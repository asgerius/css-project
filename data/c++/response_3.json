[{"tags": ["c++", "pipe", "exec", "fork", "popen"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1422489439, "post_id": 28204644, "comment_id": 44775239, "body": "Memory space is cheap. Duplicating it is cheap. <code>fork</code> is cheap. (Perhaps you&#39;re confusing memory space with memory?) How do you think <code>popen</code> creates the new process? Your other choice is some sort of <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/posix_spawn.html\" rel=\"nofollow noreferrer\">spawn</a>, but it&#39;s hard to tell because you haven&#39;t really explained what the child is going to do. Is it going to run some other program?"}, {"owner": {"reputation": 36033, "user_id": 115751, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FkIiK.png?s=128&g=1", "display_name": "WilliamKF", "link": "https://stackoverflow.com/users/115751/williamkf"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1422489778, "post_id": 28204644, "comment_id": 44775336, "body": "If my process has allocated 500 MB of heap space and I call fork, does the child process get a copy of the parent&#39;s heap space?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1422489989, "post_id": 28204644, "comment_id": 44775400, "body": "You can&#39;t copy space. The child starts out with the same address map as the parent. Mapped pages are shared until either process modifies them."}, {"owner": {"reputation": 36033, "user_id": 115751, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FkIiK.png?s=128&g=1", "display_name": "WilliamKF", "link": "https://stackoverflow.com/users/115751/williamkf"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1422490165, "post_id": 28204644, "comment_id": 44775457, "body": "So if the parent touches most pages while the child runs, then you would needlessly end up with two copies of each such page, the original (now unused in child) and the modified one in the parent.  I&#39;d like to avoid this potential overhead if possible since the child needs very little of the parent&#39;s memory."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1422495197, "post_id": 28204644, "comment_id": 44776786, "body": "If you can call <code>exec</code> (or a related function) shortly after calling <code>fork</code> then you can avoid this memory contamination. You can even <code>exec</code> yourself (that is, the same executable you&#39;re currently running), with command line parameters to tell yourself to run in some particular mode."}], "answers": [{"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 2, "last_activity_date": 1422490327, "creation_date": 1422490327, "answer_id": 28204877, "question_id": 28204644, "link": "https://stackoverflow.com/questions/28204644/how-to-convert-from-popen-to-fork-and-not-duplicate-process-memory/28204877#28204877", "title": "How to convert from popen() to fork() and not duplicate process memory?", "body": "<p>First of all, <code>popen</code> is a very thin wrapper on top of <code>fork()</code> followed by <code>exec()</code> [and some call to <code>pipe</code> and <code>dup</code> and so on to manage the ends of a pipe] . </p>\n\n<p>Second, the memory is only duplicated in form of \"copy-on-write\" memory - meaning that unless one of the processes writes to some page, the actual physical memory is shared between the two processes.</p>\n\n<p>It does mean, of course, the OS has to create a memory map with 4-8 bytes per 4KB [in typical cases] (probably plus some internal OS data to track how many copies there are of that page and stuff - but as long as the page remains the same one as the parent process, the child page uses the parent processes internal data). Compared to everything else involved in creating a new process and loading an executable file into the new process, it's a pretty small part of the time. Since you are almost immediately doing <code>exec</code>, not much of the parent process' memory will be touched, so very little will happen there.</p>\n\n<p>My advice would be that if <code>popen</code> works, keep using <code>popen</code>. If <code>popen</code> doesn't quite do what you want for some reason, then use <code>fork</code> + <code>exec</code> - but make sure you know what the reason for doing so is.</p>\n"}], "owner": {"reputation": 36033, "user_id": 115751, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FkIiK.png?s=128&g=1", "display_name": "WilliamKF", "link": "https://stackoverflow.com/users/115751/williamkf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 959, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1422490327, "creation_date": 1422489156, "last_edit_date": 1422490035, "question_id": 28204644, "link": "https://stackoverflow.com/questions/28204644/how-to-convert-from-popen-to-fork-and-not-duplicate-process-memory", "title": "How to convert from popen() to fork() and not duplicate process memory?", "body": "<p>I have a multi-threaded C++03 application that presently uses <code>popen()</code> to invoke itself (same binary) and ssh (different binary) again in a new process and reads the output, however, when porting to Android NDK this is posing some issues such as not not having permissions to access <code>ssh</code>, so I'm linking in Dropbear <code>ssh</code> to my application to try and avoid that issue.  Further, my current popen solution requires that stdout and stderr be merged together into a single FD which is a bit messy and I'd like to stop doing that.</p>\n\n<p>I would think the pipe code could be simplified by using <code>fork()</code> instead but wonder how to drop all of the parent's stack/memory which is not needed in the child of the fork?  Here is a snippet of the old working code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;errno.h&gt;\n\nusing std::endl;\nusing std::cerr;\nusing std::cout;\nusing std::string;\n\nvoid\ndoPipe()\n{\n  // Redirect stderr to stdout with '2&gt;&amp;1' so that we see any error messages\n  // in the pipe output.\n  const string selfCmd = \"/path/to/self/binary arg1 arg2 arg3 2&gt;&amp;1\";\n  FILE *fPtr = ::popen(selfCmd.c_str(), \"r\");\n  const int bufSize = 4096;\n  char buf[bufSize + 1];\n\n  if (fPtr == NULL) {\n    cerr &lt;&lt; \"Failed attempt to popen '\" &lt;&lt; selfCmd &lt;&lt; \"'.\" &lt;&lt; endl;\n  } else {\n    cout &lt;&lt; \"Result of: '\" &lt;&lt; selfCmd &lt;&lt; \"':\\n\";\n\n    while (true) {\n      if (::fgets(buf, bufSize, fPtr) == NULL) {\n        if (!::feof(fPtr)) {\n          cerr &lt;&lt; \"Failed attempt to fgets '\" &lt;&lt; selfCmd &lt;&lt; \"'.\" &lt;&lt; endl;\n        }\n        break;\n      } else {\n        cout &lt;&lt; buf;\n      }\n    }\n\n    if (pclose(fPtr) == -1) {\n      if (errno != 10) {\n        cerr &lt;&lt; \"Failed attempt to pclose '\" &lt;&lt; selfCmd &lt;&lt; \"'.\" &lt;&lt; endl;\n      }\n    }\n\n    cout &lt;&lt; \"\\n\";\n  }\n}\n</code></pre>\n\n<p>So far, this is loosely what I have done to convert to <code>fork()</code>, but fork needlessly duplicates the entire parent process memory space.  Further, it does not quite work, because the parent never sees EOF on the outFD it is reading from the <code>pipe()</code>.  Where else do I need to close the FDs for this to work?  How can I do something like <code>execlp()</code> without supplying a binary path (not easily available on Android) but instead start over with the same binary and a blank image with new args?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;errno.h&gt;\n\nusing std::endl;\nusing std::cerr;\nusing std::cout;\nusing std::string;\n\nint\nselfAction(int argc, char *argv[], int &amp;outFD, int &amp;errFD)\n{\n  pid_t childPid; // Process id used for current process.\n\n  // fd[0] is the read end of the pipe and fd[1] is the write end of the pipe.\n  int fd[2];      // Pipe for normal communication between parent/child.\n  int fdErr[2];   // Pipe for error  communication between parent/child.\n\n  // Create a pipe for IPC between child and parent.\n  const int pipeResult = pipe(fd);\n\n  if (pipeResult) {\n    cerr &lt;&lt; \"selfAction normal pipe failed: \" &lt;&lt; errno &lt;&lt; \".\\n\";\n\n    return -1;\n  }\n\n  const int errorPipeResult = pipe(fdErr);\n\n  if (errorPipeResult) {\n    cerr &lt;&lt; \"selfAction error pipe failed: \" &lt;&lt; errno &lt;&lt; \".\\n\";\n\n    return -1;\n  }\n\n  // Fork - error.\n  if ((childPid = fork()) &lt; 0) {\n    cerr &lt;&lt; \"selfAction fork failed: \" &lt;&lt; errno &lt;&lt; \".\\n\";\n\n    return -1;\n  } else if (childPid == 0) { // Fork -&gt; child.\n    // Close read end of pipe.\n    ::close(fd[0]);\n    ::close(fdErr[0]);\n\n    // Close stdout and set fd[1] to it, this way any stdout of the child is\n    // piped to the parent.\n    ::dup2(fd[1],    STDOUT_FILENO);\n    ::dup2(fdErr[1], STDERR_FILENO);\n\n    // Close write end of pipe.\n    ::close(fd[1]);\n    ::close(fdErr[1]);\n\n    // Exit child process.\n    exit(main(argc, argv));\n  } else { // Fork -&gt; parent.\n    // Close write end of pipe.\n    ::close(fd[1]);\n    ::close(fdErr[1]);\n\n    // Provide fd's to our caller for stdout and stderr:\n    outFD = fd[0];\n    errFD = fdErr[0];\n\n    return 0;\n  }\n}\n\n\nvoid\ndoFork()\n{\n  int argc = 4;\n  char *argv[4] = { \"/path/to/self/binary\", \"arg1\", \"arg2\", \"arg3\" };\n  int outFD = -1;\n  int errFD = -1;\n  int result = selfAction(argc, argv, outFD, errFD);\n\n  if (result) {\n    cerr &lt;&lt; \"Failed to execute selfAction.\" &lt;&lt; endl;\n\n    return;\n  }\n\n  FILE *outFile = fdopen(outFD, \"r\");\n  FILE *errFile = fdopen(errFD, \"r\");\n\n  const int bufSize = 4096;\n  char buf[bufSize + 1];\n\n  if (outFile == NULL) {\n    cerr &lt;&lt; \"Failed attempt to open fork file.\" &lt;&lt; endl;\n\n    return;\n  } else {\n    cout &lt;&lt; \"Result:\\n\";\n\n    while (true) {\n      if (::fgets(buf, bufSize, outFile) == NULL) {\n        if (!::feof(outFile)) {\n          cerr &lt;&lt; \"Failed attempt to fgets.\" &lt;&lt; endl;\n        }\n        break;\n      } else {\n        cout &lt;&lt; buf;\n      }\n    }\n\n    if (::close(outFD) == -1) {\n      if (errno != 10) {\n        cerr &lt;&lt; \"Failed attempt to close.\" &lt;&lt; endl;\n      }\n    }\n\n    cout &lt;&lt; \"\\n\";\n  }\n\n  if (errFile == NULL) {\n    cerr &lt;&lt; \"Failed attempt to open fork file err.\" &lt;&lt; endl;\n\n    return;\n  } else {\n    cerr &lt;&lt; \"Error result:\\n\";\n\n    while (true) {\n      if (::fgets(buf, bufSize, errFile) == NULL) {\n        if (!::feof(errFile)) {\n          cerr &lt;&lt; \"Failed attempt to fgets err.\" &lt;&lt; endl;\n        }\n        break;\n      } else {\n        cerr &lt;&lt; buf;\n      }\n    }\n\n    if (::close(errFD) == -1) {\n      if (errno != 10) {\n        cerr &lt;&lt; \"Failed attempt to close err.\" &lt;&lt; endl;\n      }\n    }\n\n    cerr &lt;&lt; \"\\n\";\n  }\n}\n</code></pre>\n\n<p>There are two kinds of child processes created in this fashion with different tasks in my application:</p>\n\n<ol>\n<li>SSH to another machine and invoke a server that will communicate back to the parent that is acting as a client.</li>\n<li>Compute a signature, delta, or merge file using rsync.</li>\n</ol>\n"}, {"tags": ["c++", "arrays", "sorting", "struct"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1422488997, "post_id": 28204614, "comment_id": 44775087, "body": "Why not use a <code>std::map</code> problem solved."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1422489051, "post_id": 28204614, "comment_id": 44775103, "body": "Or just a better algo ..."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 5, "creation_date": 1422489299, "post_id": 28204614, "comment_id": 44775199, "body": "<code>std::sort(array, array+size, [](count const &amp;a, count const &amp;b){ return a.frequency &lt; b.frequency; });</code>"}, {"owner": {"reputation": 9, "user_id": 4472054, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3f9669ff690fbaf6a940b0473d16ae50?s=128&d=identicon&r=PG&f=1", "display_name": "klw_123", "link": "https://stackoverflow.com/users/4472054/klw-123"}, "edited": false, "score": 0, "creation_date": 1422490978, "post_id": 28204614, "comment_id": 44775682, "body": "^Can you exlpain this a bit more please? I get that it is sorting the array from the beginning to array+size but I don&#39;t understand the part after that."}, {"owner": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1422491263, "post_id": 28204614, "comment_id": 44775761, "body": "Once you figure out how to use <code>std::sort</code>, functors, lambda, operator overloading, etc. You can see <a href=\"http://rextester.com/RJM32636\" rel=\"nofollow noreferrer\"><i><code>this</code></i></a> too."}], "answers": [{"tags": [], "owner": {"reputation": 3267, "user_id": 339937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FDw7.jpg?s=128&g=1", "display_name": "olegarch", "link": "https://stackoverflow.com/users/339937/olegarch"}, "is_accepted": false, "score": 1, "last_activity_date": 1422489627, "creation_date": 1422489627, "answer_id": 28204744, "question_id": 28204614, "link": "https://stackoverflow.com/questions/28204614/faster-way-to-sort-an-array-of-structs-c/28204744#28204744", "title": "Faster way to sort an array of structs c++", "body": "<p>You just need to define operator less for your structures,\nand use std::sort, see example:</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Sort_%28C%2B%2B%29\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Sort_%28C%2B%2B%29</a></p>\n"}, {"comments": [{"owner": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1422489906, "post_id": 28204764, "comment_id": 44775370, "body": "What if two words have same frequency ?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1422490193, "post_id": 28204764, "comment_id": 44775467, "body": "If they knew how to use <code>std::map</code>, they&#39;d know how to use <code>std::sort</code> too."}], "tags": [], "owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "is_accepted": false, "score": 0, "last_activity_date": 1422489708, "creation_date": 1422489708, "answer_id": 28204764, "question_id": 28204614, "link": "https://stackoverflow.com/questions/28204614/faster-way-to-sort-an-array-of-structs-c/28204764#28204764", "title": "Faster way to sort an array of structs c++", "body": "<p>After you created a pair of  for the data set, you can use std::map as container and insert the pairs into it. If you want to sort according to frequency define std:map as follows</p>\n\n<p>std::map myMap;\nmyMap.insert(std::make_pair(frequency,word));</p>\n\n<p>std::map is internally using a binary tree so you will get a sorted data when you retrieve it.</p>\n"}], "owner": {"reputation": 9, "user_id": 4472054, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3f9669ff690fbaf6a940b0473d16ae50?s=128&d=identicon&r=PG&f=1", "display_name": "klw_123", "link": "https://stackoverflow.com/users/4472054/klw-123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1422490513, "creation_date": 1422488916, "last_edit_date": 1422490513, "question_id": 28204614, "link": "https://stackoverflow.com/questions/28204614/faster-way-to-sort-an-array-of-structs-c", "title": "Faster way to sort an array of structs c++", "body": "<p>I have a struct called count declared called count with two things in it, an int called frequency and a string called word. To simplify, my program takes in a book as a text file and I count how many times each word appears. I have an array of structs and I have my program to where it will count each time a word appears and now I want a faster way to sort the array by top frequency than the way I have below. I used the bubble sorting algorithm below but it is taking my code way too long to run using this method.  Any other suggestions or help would be welcome!! I have looked up sort from the algorithm library but don't understand how I would use it here. I am new to c++ so lots of explanation on how to use sort would help a lot. </p>\n\n<pre><code>void sortArray(struct count array[],int size)\n{\n    int cur_pos = 0;\n    string the_word;\n    bool flag= true;\n\n    for(int i=0; i&lt;(size); i++)\n    {\n        flag = false;\n        for(int j=0; j&lt; (size); j++)\n        {\n            if((array[j+1].frequency)&gt;(array[j].frequency))\n            {\n                cur_pos = array[j].frequency;\n                the_word = array[j].word;\n                array[j].frequency = array[j+1].frequency;\n                array[j].word = array[j+1].word;\n                array[j+1].frequency = cur_pos;\n                array[j+1].word = the_word;\n                flag = true;\n            }\n        }\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "sfml"], "comments": [{"owner": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "edited": false, "score": 0, "creation_date": 1422537939, "post_id": 28204575, "comment_id": 44795021, "body": "A few things to get you on better tracks: a) learn polymorphism correctly, you apparently have some misunderstanding of the concept, b) don&#39;t inherit from <code>Sprite</code> but instead from <code>Drawable</code> if you really want to inherit from something -- composition is usually simpler and has several benefits -- look it up."}, {"owner": {"reputation": 115, "user_id": 3179724, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2eee52f3fadb6c15f38f1e46fc9c0c1a?s=128&d=identicon&r=PG&f=1", "display_name": "jburn7", "link": "https://stackoverflow.com/users/3179724/jburn7"}, "reply_to_user": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "edited": false, "score": 0, "creation_date": 1422542330, "post_id": 28204575, "comment_id": 44797927, "body": "Can you at least say what is is about the concept that I don&#39;t get? And how would I use composition is such a way that I could still hold vectors of my <code>MoveableObject</code> class objects?"}, {"owner": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "edited": false, "score": 0, "creation_date": 1422544810, "post_id": 28204575, "comment_id": 44799672, "body": "A <code>vector&lt;MoveableObject&gt;</code> <i>can</i> hold any instance of <code>MoveableObject</code>, the fact that this class inherits or use <code>sf::Sprite</code> is not relevant. That&#39;s why I think you misunderstood something."}, {"owner": {"reputation": 115, "user_id": 3179724, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2eee52f3fadb6c15f38f1e46fc9c0c1a?s=128&d=identicon&r=PG&f=1", "display_name": "jburn7", "link": "https://stackoverflow.com/users/3179724/jburn7"}, "reply_to_user": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "edited": false, "score": 0, "creation_date": 1422574933, "post_id": 28204575, "comment_id": 44816749, "body": "Okay I see what you mean. I went with composition like you said, I just had to add a vector of sprites in the MoveableObject class to make sure that the derived classes can have as many sprites as their animations need."}], "owner": {"reputation": 115, "user_id": 3179724, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2eee52f3fadb6c15f38f1e46fc9c0c1a?s=128&d=identicon&r=PG&f=1", "display_name": "jburn7", "link": "https://stackoverflow.com/users/3179724/jburn7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 587, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1422488647, "creation_date": 1422488647, "question_id": 28204575, "link": "https://stackoverflow.com/questions/28204575/how-to-use-inheritance-with-sfml-to-add-functions", "title": "How to use inheritance with SFML to add functions?", "body": "<p>I'm working with c++ and SFML, but I have an issue with trying to inherit from their sf::Sprite abstract class. Due to the nature of my spatial partitioning, each sprite has a chance of being drawn for as many grid cells as it touches, here in the render code</p>\n\n<pre><code>for(int i = 0; i &lt; board.GetGrid().size(); i++){\n            for(int k = 0; k &lt; board.GetGrid()[i].GetMovableObjects().size(); k++){\n                window.draw(board.GetGrid()[i].GetMovableObjects()[k]);\n            }\n            for(int j = 0; j &lt; board.GetGrid()[i].GetStationaryObjects().size(); j++){\n                window.draw(board.GetGrid()[i].GetStationaryObjects()[j]);\n            }\n        }\n</code></pre>\n\n<p>So the loop tells each cell to draw all the objects it contains, so some objects (sf::Sprites) can be drawn more than once, which is something I don't want. The solution is to give each object a <code>bool drawn</code> so I can see if a given object has already been drawn, like so</p>\n\n<pre><code>for(int i = 0; i &lt; board.GetGrid().size(); i++){\n            for(int k = 0; k &lt; board.GetGrid()[i].GetMovableObjects().size(); k++){\n                if(!board.GetGrid()[i].GetMovableObjects()[k].drawn){\n                        //draw\n</code></pre>\n\n<p>The problem is this: the std::vectors <code>movableObjects</code> and <code>stationaryObjects</code> are vectors of sf::Sprite objects: <code>std::vector&lt;sf::Sprite&gt; movableObjects, stationaryObjects;</code>\nand sf::Sprite does not have a <code>bool drawn;</code> that I can use, so I have to make my own derived class</p>\n\n<pre><code>#include \"SFML\\Graphics.hpp\"\n\nclass MoveableObject : sf::Sprite{\n    //this is a pure virtual function, must be implemented by inheriting classes\n    virtual void draw(sf::RenderTarget &amp;target, sf::RenderStates &amp;states) {};\npublic:\n    bool drawn;\n};\n</code></pre>\n\n<p>So I change my vectors to <code>std::vector&lt;MovableObject&gt; movableObjects, stationaryObjects;</code> so that the obejcts here act like sprites but can also return <code>drawn</code> or whatever else I want to add. Long post, so I'll get to the point: How do I deal with vectors of abstract classes? When I attempt to add items to these vectors like <code>moveableObjects.push_back(sprite)</code> (sprite is a simple sf::Sprite) I get the compiler error \"no suitable user-defined conversion from \"sf::Sprite\" to \"MoveableObject\" exists\"</p>\n\n<p>Trying to inherit from SFML's classes so I can add my own functions is driving me mad, so what should I do about this problem?</p>\n"}, {"tags": ["c++", "visual-studio-2012"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1422488598, "post_id": 28204559, "comment_id": 44774953, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms680345%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1422488862, "post_id": 28204559, "comment_id": 44775040, "body": "@HansPassant the first link solves my problem. Your search Kung Fu is clearly superior to mine. Meta: There needs to be a &quot;close&quot; reason for &quot;comments answered my question.&quot;"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1422488994, "post_id": 28204559, "comment_id": 44775081, "body": "You asked the wrong question, you should generally be using <a href=\"http://stackoverflow.com/a/13256385/17034\">this technique</a> instead."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1422488997, "post_id": 28204559, "comment_id": 44775088, "body": "I&#39;m pretty sure that there is an option in Visual Studio setup that allows you to &quot;keep the console window open&quot;."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1422489073, "post_id": 28204559, "comment_id": 44775111, "body": "@MatsPetersson I am inclined to believe you. However, my efforts to find said option have proved fruitless. And I really like pineapple."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1422489206, "post_id": 28204559, "comment_id": 44775158, "body": "Ok, so not COMPLETELY true. You get to press return to exit from the console window only if you are not actually debugging things...   <a href=\"http://stackoverflow.com/questions/1775865/preventing-console-window-from-closing-on-visual-studio-c-c-console-applicatio\" title=\"preventing console window from closing on visual studio c c console applicatio\">stackoverflow.com/questions/1775865/&hellip;</a>"}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1422489287, "post_id": 28204559, "comment_id": 44775194, "body": "@MatsPetersson Yeah, but I want to run WITH debugging, I just want the app to not close the window when it&#39;s done. (<b>update</b> response to your prev comment)"}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1422489466, "post_id": 28204559, "comment_id": 44775250, "body": "Screw it - I added a command-line switch <code>keepOpen</code> to the debug command line parameters in VS. The app checks for that and does a <code>getchar()</code> if it is present. <a href=\"http://en.wikipedia.org/wiki/KISS_principle\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/KISS_principle</a> (And, it&#39;s cross-platform. Assuming platform includes <code>stdio</code>/<code>stdlib</code> support. :)"}], "owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 1, "closed_date": 1422488917, "answer_count": 0, "score": 0, "last_activity_date": 1422488540, "creation_date": 1422488540, "question_id": 28204559, "link": "https://stackoverflow.com/questions/28204559/c-equivalent-of-debugger-isattached", "closed_reason": "Duplicate", "title": "C++ equivalent of Debugger.IsAttached()", "body": "<p>Is there a C++ equivalent of C#'s <code>Debugger.IsAttached()</code> method? (Windows-specific is fine with me.)</p>\n\n<p>I have a console app that has a <code>getchar()</code> at the end of <code>main()</code> to keep the console window from closing when running from VS2012. I'd like to skip that step when running a debug build directly from the command line. </p>\n"}, {"tags": ["c++", "set", "parameter-passing", "pass-by-reference", "pass-by-value"], "comments": [{"owner": {"reputation": 5697, "user_id": 1004437, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bcb375aa93ff125141a685c6727bfcf1?s=128&d=identicon&r=PG", "display_name": "sam_k", "link": "https://stackoverflow.com/users/1004437/sam-k"}, "edited": false, "score": 0, "creation_date": 1422490092, "post_id": 28204556, "comment_id": 44775430, "body": "Thanks a lot for your reply. I understand what you mean but when i have to use value or ref. that is still confusing for me. Here i am going to store values in map so pass by value is good thing? or Pass by ref?"}, {"owner": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "edited": false, "score": 0, "creation_date": 1422490779, "post_id": 28204556, "comment_id": 44775637, "body": "Is your question what the difference between passing by value and passing by reference is?"}, {"owner": {"reputation": 5697, "user_id": 1004437, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bcb375aa93ff125141a685c6727bfcf1?s=128&d=identicon&r=PG", "display_name": "sam_k", "link": "https://stackoverflow.com/users/1004437/sam-k"}, "reply_to_user": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "edited": false, "score": 0, "creation_date": 1422490908, "post_id": 28204556, "comment_id": 44775663, "body": "@Namfuak : Confusion between when to use pass by ref or pass by value."}], "answers": [{"comments": [{"owner": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "edited": false, "score": 1, "creation_date": 1422489571, "post_id": 28204621, "comment_id": 44775282, "body": "<a href=\"http://en.cppreference.com/w/cpp/container/set/insert\" rel=\"nofollow noreferrer\"><code>insert</code></a> returns a <code>pair&lt;iterator, bool&gt;</code>, the second element being true if the insertion was successful and false if not, which seems like what he intended to check.  Why do you think it is wrong?"}, {"owner": {"reputation": 5697, "user_id": 1004437, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bcb375aa93ff125141a685c6727bfcf1?s=128&d=identicon&r=PG", "display_name": "sam_k", "link": "https://stackoverflow.com/users/1004437/sam-k"}, "edited": false, "score": 0, "creation_date": 1422490018, "post_id": 28204621, "comment_id": 44775409, "body": "Its right. I am checking true or false which is return by insert function"}], "tags": [], "owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "is_accepted": false, "score": 0, "last_activity_date": 1422490342, "last_edit_date": 1422490342, "creation_date": 1422488996, "answer_id": 28204621, "question_id": 28204556, "link": "https://stackoverflow.com/questions/28204556/pass-by-value-or-const-reference-to-function/28204621#28204621", "title": "Pass by value or const reference to function?", "body": "<p>If your container set has a huge size and passing string to function is comparatively small I may use as follows:</p>\n\n<pre><code>void addFile(const string filename, const set&lt; std::string&gt; &amp; filePaths)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "is_accepted": false, "score": 0, "last_activity_date": 1422489908, "last_edit_date": 1495541191, "creation_date": 1422489412, "answer_id": 28204698, "question_id": 28204556, "link": "https://stackoverflow.com/questions/28204556/pass-by-value-or-const-reference-to-function/28204698#28204698", "title": "Pass by value or const reference to function?", "body": "<p>The first has \"better\" performance, because the second makes a copy of the <code>string</code> before passing it.  Since you aren't modifying the <code>string</code>, there is no downside passing a reference to the actual string in the calling function rather than making a copy, and takes less memory to copy a reference than a <code>string</code>.  That said, the compiler may end up treating them equivalently if you never cast off the const specifier on the <code>string</code> variable.  This difference is more useful on large parameters, for example if your <code>filepaths</code> variable had a few thousand elements there may be a very noticeable difference in passing it by reference rather than by value.</p>\n\n<p>Related: <a href=\"https://stackoverflow.com/questions/270408/is-it-better-in-c-to-pass-by-value-or-pass-by-constant-reference?rq=1\">Is it better in C++ to pass by value or pass by constant reference?</a></p>\n"}, {"comments": [{"owner": {"reputation": 5697, "user_id": 1004437, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bcb375aa93ff125141a685c6727bfcf1?s=128&d=identicon&r=PG", "display_name": "sam_k", "link": "https://stackoverflow.com/users/1004437/sam-k"}, "edited": false, "score": 0, "creation_date": 1422490926, "post_id": 28204756, "comment_id": 44775667, "body": "Thanks a lot for your reply. I understand what you mean but when i have to use value or ref. that is still confusing for me. Here i am going to store values in map so pass by value is good thing? or Pass by ref?"}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "reply_to_user": {"reputation": 5697, "user_id": 1004437, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bcb375aa93ff125141a685c6727bfcf1?s=128&d=identicon&r=PG", "display_name": "sam_k", "link": "https://stackoverflow.com/users/1004437/sam-k"}, "edited": false, "score": 0, "creation_date": 1422572721, "post_id": 28204756, "comment_id": 44815874, "body": "@Sam_k: Please keep two aspects distinct: what you store in the map (or other containers), and what you pass to the function as parameters. My answer focuses on what to pass as parameters, and I won&#39;t repeat my answer in this comment. Instead, about storing stuff in containers, in general storing values is a good choice: it makes deep-copies of the values, so they are &quot;physically&quot; contained in the container, and decoupled from other external contexts (this also simplifies ownership, lifetime management, etc.)."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 3, "last_activity_date": 1422489677, "creation_date": 1422489677, "answer_id": 28204756, "question_id": 28204556, "link": "https://stackoverflow.com/questions/28204556/pass-by-value-or-const-reference-to-function/28204756#28204756", "title": "Pass by value or const reference to function?", "body": "<p>When you have an <strong>input</strong> parameter, i.e. something that is <em>observed</em> by the function and <em>not</em> modified, consider passing it by <strong>const reference</strong> (<code>const &amp;</code>), to avoid useless deep-copies (which may require dynamic memory allocations, etc.)</p>\n\n<pre><code>void addFile(const std::string&amp; filename, \n             const std::set&lt;std::string&gt;&amp; filePaths)\n</code></pre>\n\n<hr>\n\n<p><strong>P.S.</strong><br>\nOf course, if you are passing parameters that are <em>cheap to copy</em>, like <code>int</code>s, you can just pass by value :)</p>\n"}, {"comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 2, "creation_date": 1422493141, "post_id": 28205130, "comment_id": 44776303, "body": "&quot;here&#39;s hardly any reason for it (except for built-in types)&quot; What&#39;s the exception for built-in types?"}, {"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1422493533, "post_id": 28205130, "comment_id": 44776414, "body": "@NeilKirk Well IMO sometimes it can be practical to use e.g. <code>const int</code> for a number you don&#39;t want modified inside the function (it only adds value to the implementer). Still I removed that part as my argument is a bit weak :)"}], "tags": [], "owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "is_accepted": false, "score": 0, "last_activity_date": 1422493339, "last_edit_date": 1495542035, "creation_date": 1422491922, "answer_id": 28205130, "question_id": 28204556, "link": "https://stackoverflow.com/questions/28204556/pass-by-value-or-const-reference-to-function/28205130#28205130", "title": "Pass by value or const reference to function?", "body": "<p>First of all, you should <em>never</em> pass arguments by <strong><code>const</code> value</strong> as there's hardly any reason for it. Passing by value already makes sure you can not alter the variable at the call site as it is <em>copied</em>.</p>\n\n<p>Now, the question still remains about passing arguments by value or reference. And the answer is more complicated than could be expected. There are a lot of good answers written about this on Stack Overflow.</p>\n\n<p>In short, when passing potentially large objects (like <code>std::vector</code> or <code>std::string</code>) to functions use these idiomatic guidelines:</p>\n\n<ul>\n<li>When passing for observation (read only) pass by reference to <code>const</code>.</li>\n<li>When passing an argument that you want to retain a copy of (so called <em>sink argument</em>), then also pass by reference to <code>const</code>. If the passed object is movable you can also add an overload taking the argument by <em>rvalue reference</em> (<code>T&amp;&amp;</code>) for optimization.</li>\n</ul>\n\n<p>Related info:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value\">What&#39;s the difference between passing by reference vs. passing by value?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/270408/is-it-better-in-c-to-pass-by-value-or-pass-by-constant-reference\">Is it better in C++ to pass by value or pass by constant reference?</a></li>\n<li><a href=\"https://web.archive.org/web/20100919084133/http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/\" rel=\"nofollow noreferrer\">Dave Abrahams - Want Speed? Pass by Value</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3106110/what-is-move-semantics\">What are move semantics?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/26261007/why-is-value-taking-setter-member-functions-not-recommended-in-herb-sutters-cpp\">Why is value taking setter member functions not recommended in Herb Sutter&#39;s CppCon 2014 talk (Back to Basics: Modern C++ Style)?</a></li>\n</ul>\n"}], "owner": {"reputation": 5697, "user_id": 1004437, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bcb375aa93ff125141a685c6727bfcf1?s=128&d=identicon&r=PG", "display_name": "sam_k", "link": "https://stackoverflow.com/users/1004437/sam-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2468, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1422493339, "creation_date": 1422488533, "last_edit_date": 1422489839, "question_id": 28204556, "link": "https://stackoverflow.com/questions/28204556/pass-by-value-or-const-reference-to-function", "title": "Pass by value or const reference to function?", "body": "<p>Should I pass <code>std::string</code> by value or by reference to one function. This function store this values in member variable of class.</p>\n\n<p>I am always confuse when about pass by value or reference. Please clear my confusion about this. </p>\n\n<p>Here is code :</p>\n\n<pre><code>class DataStore {\npublic:\n    void addFile(const string&amp; filename, const set&lt; std::string&gt;&amp; filePaths)\n    {  \n        if (dataStoreMap.insert(make_pair(filename, filePaths)).second)\n        {\n            cout &lt;&lt; \"Data Added\" &lt;&lt;endl;\n        }\n        else\n        {\n            cout &lt;&lt; \"Data not Added\" &lt;&lt; endl;\n        }\n    }\nprivate:\n    // member variable\n    map &lt; string, set &lt; string &gt;  &gt; dataStoreMap;\n};\n</code></pre>\n\n<p>Shall I make function declaration like this :</p>\n\n<pre><code>void addFile(const string&amp; filename, const set&lt; std::string&gt;&amp; filePaths)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>void addFile(const string filename, const set&lt; std::string&gt; filePaths)\n</code></pre>\n\n<p>Both gives same result. If there any issue about memory allocation or performance.</p>\n\n<p>Above function call from <code>cpp</code> class.    </p>\n\n<pre><code>DataStore ds;\nset&lt;string&gt; setFileDirectory{ \"1\", \"2\", \"3\", \"4\", \"6\", \"5\" };\nds.addFile(\"file.txt\", setFileDirectory);\n\nsetFileDirectory.erase(setFileDirectory.begin(), setFileDirectory.end());\nsetFileDirectory.insert({ \"1\", \"2\", \"3\", \"4\", \"5\", \"6\" });\nds.addFile(\"demo.txt\", setFileDirectory);\n</code></pre>\n\n<p>Any detailed explanation would be appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "types", "computer-science"], "comments": [{"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 0, "creation_date": 1422488078, "post_id": 28204404, "comment_id": 44774794, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/12884933/what-is-the-c-memory-layout-of-objects-structs-etc\">What is the C++ memory layout of objects/structs etc?</a>"}, {"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 1, "creation_date": 1422488166, "post_id": 28204404, "comment_id": 44774820, "body": "<code>mc</code> does indeed refer to a bit pattern that needs to be interpreted in a specific way."}], "answers": [{"tags": [], "owner": {"reputation": 65023, "user_id": 1828879, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5e67a6d7eb5968245e751e05ba1c936b?s=128&d=identicon&r=PG", "display_name": "Timothy Shields", "link": "https://stackoverflow.com/users/1828879/timothy-shields"}, "is_accepted": false, "score": 0, "last_activity_date": 1422488203, "creation_date": 1422488203, "answer_id": 28204489, "question_id": 28204404, "link": "https://stackoverflow.com/questions/28204404/making-sense-of-non-primitive-data-types/28204489#28204489", "title": "Making sense of non-primitive data types", "body": "<p>A class or struct is a composition of other data types - a composite data type - where the constituent data types may be either primitive or composite data types.</p>\n\n<p>In the following example scenario, <code>X</code> and <code>Y</code> are two composite data types. <code>Y</code> is defined only in terms of primitive data types. <code>X</code> is defined in terms of primitive data types and <code>Y</code>.</p>\n\n<pre><code>struct Y\n{\n    double* d;\n    char e;\n}\n\nstruct X\n{\n    float a;\n    int b;\n    Y c;\n}\n</code></pre>\n\n<p>The compiler decides how it is going to define the bit patterns for <code>X</code> and <code>Y</code>. For example, <code>Y</code> might look like this:</p>\n\n<pre><code>&lt;8 bytes for double* d&gt;&lt;1 byte for char e&gt;\n</code></pre>\n\n<p>And <code>X</code> might look like this:</p>\n\n<pre><code>&lt;4 bytes for float a&gt;&lt;4 bytes for int b&gt;&lt;9 bytes for Y c&gt;\n</code></pre>\n\n<p>The particular bit pattern the compiler chooses for each class or struct is not important to know for understanding the concept. What's important is that the compiler picks a particular bit pattern for each class or struct and then consistently uses that everywhere.</p>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1422488298, "creation_date": 1422488298, "answer_id": 28204508, "question_id": 28204404, "link": "https://stackoverflow.com/questions/28204404/making-sense-of-non-primitive-data-types/28204508#28204508", "title": "Making sense of non-primitive data types", "body": "<p>A class and other composite data types are usually stored with their members only.  The bit content would depend on the values of their data members.  </p>\n\n<p>So given the following class:</p>\n\n<pre><code>class MyClass\n{\n  bool  flag;\n  int   number;\n  double d;\n};\n</code></pre>\n\n<p>The computer would store the 1s and 0s for the <code>flag</code> member, followed by some padding (skipping bytes), followed by the 1s and 0s for the <code>number</code> field, followed by more padding, then followed by the 1s and 0s for the <code>d</code> field.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4420637"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1196, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1422488298, "creation_date": 1422487788, "question_id": 28204404, "link": "https://stackoverflow.com/questions/28204404/making-sense-of-non-primitive-data-types", "title": "Making sense of non-primitive data types", "body": "<p>Understanding how primitive data types works is easy: Everything in a computer is stored as a series of 0s and 1s, and so everything I need to store needs to be encoded as a series of 0s and 1s. For example: the real number <code>3.14</code> must be stored as a bit pattern, the negative number <code>-1234</code> must be stored as a bit pattern, the character <code>'A'</code> must be stored as a bit pattern, etc. When I store one of these data in memory, I have to mark the memory location of where they're stored with a specific data type (e.g. <code>float</code> for a bit pattern that represents a real number), this data type tells me how to interpret this bit pattern when I ask for it later.</p>\n\n<p>But how this definition applies to something like a class, I mean when I create an object of a specific class, for example:</p>\n\n<pre><code>MyClass mc;\n</code></pre>\n\n<p><code>mc</code> does not store a bit pattern that needs to be interpreted in a specific way, how to make sense of considering a class to be a data type? Or is there's another definition for a data type?</p>\n"}, {"tags": ["c++", "linux", "assembly"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422488885, "post_id": 28204353, "comment_id": 44775047, "body": "To verify your assembly code, write the equivalent code in C++.  Tell the compiler to generate an assembly language listing of the function.  You can compare your assembly to the code generated by the compiler."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422488953, "post_id": 28204353, "comment_id": 44775072, "body": "BTW, assembly language is processor specific.  For example, the assembly language you posted will not work on an ARM7 processor or an 8051."}], "owner": {"reputation": 425, "user_id": 3164315, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e09ccd7366ef5821db0f84832c3b19d4?s=128&d=identicon&r=PG&f=1", "display_name": "tysonsmiths", "link": "https://stackoverflow.com/users/3164315/tysonsmiths"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422487448, "creation_date": 1422487448, "question_id": 28204353, "link": "https://stackoverflow.com/questions/28204353/assembly-language-homework-writeheader-function-that-makes-calls-to-an-integer", "title": "Assembly Language homework, writeheader function that makes calls to an Integer to ASCII function", "body": "<p>I am taking a class where we are programming in assembly language. We've just started so I am really new to this and am having a hard time following. We are using a linux x64 system and I believe the assembler is called nasm. All I know is that I type $ nasm -f elf64 -g -F dwarf filename.asm into the command prompt thing to assemble.</p>\n\n<p>Here is code given to me, its a function that converts and integer into its ascii value. </p>\n\n<p>itoa.asm</p>\n\n<pre><code>; itoa: convert a non-negative integer to ascii (text)\n; itoa(buffer, n) -&gt; # bytes written\n\nglobal itoa\n\nsection .text\n\nitoa:\n            mov rax, rsi\n            mov rsi, 0\n            mov r10, 10\n\n.loop:\n            mov rdx, 0\n            div r10\n            add rdx, '0'\n            mov [rdi + rsi], dl\n            inc rsi\n            cmp rax, 0\n            jg .loop\n\n            mov rdx, rdi\n            lea rcx, [rdi + rsi -1]\n            jmp .reversetest\n\n.reverseloop:\n            mov al, [rdx]\n            mov ah, [rcx]\n            mov [rcx], al\n            mov [rdx], ah\n            inc rdx\n            dec rcx\n\n.reversetest:\n            cmp rdx, rcx\n            jl .reverseloop\n\n            mov rax, rsi\n            ret\n</code></pre>\n\n<p>Here is the instructions</p>\n\n<p>WRITEHEADER</p>\n\n<p>Write an assembly language function to write the header for a PPM file to a buffer. More information about PPM files is available here:</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Netpbm_format\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Netpbm_format</a>\nFor this function, the important part is the header, which has a simple format:</p>\n\n<pre><code>P3\nxsize ysize\ncolormax\n</code></pre>\n\n<p>The \u201cP3\u201d is hard-coded, and signals the format in use (this is called a magic value). The xsize and ysize values are integers written out as plain text, and indicate the size of the image in pixels. The colormax value tells the maximum color value for each color channel (red, green, and blue), and is hard-coded at 255 for our purposes.</p>\n\n<p>For a 1024\u00d7768 image, the header would be:</p>\n\n<pre><code>P3\n1024 768\n255\n</code></pre>\n\n<p>Which is the string: \"P3\\n1024 768\\n255\\n\"</p>\n\n<p>Your job is to write that header into a buffer, and return the number of bytes written.</p>\n\n<p>Registers</p>\n\n<p>Functions must not disturb the following registers:</p>\n\n<ul>\n<li>rbx, rbp, rsp, r12, r13, r14, r15</li>\n</ul>\n\n<p>If you need to use any of those, you should push them onto the stack at the beginning of the function, and pop them back off the stack before returning. Other functions will all follow these same rules.</p>\n\n<p>Your implementation of writeHeader will make calls to itoa. Any registers other than those on the list above may be destroyed in the call to itoa. Since you need to preserve some register values across the call, you must save them somewhere before making the call. The simplest way to do this is to pick a few of the caller-saved registers (those listed above) and use them. At the beginning of your function, save the old values:</p>\n\n<pre><code>push r13\npush r14\npush r15\n</code></pre>\n\n<p>Then you may use those registers in your function freely, assuming that itoa will preserve them. At the end of your function, right before returning, restore these registers from the stack:</p>\n\n<pre><code>pop r15\npop r14\npop r13\n</code></pre>\n\n<p>Note that the pops must happen in the reverse of the order in which the pushes occurred.</p>\n\n<p>Here is the file I am to write my function in, there is some code given me already in the file</p>\n\n<p>writeheader.asm</p>\n\n<pre><code>; writeHeader(buffer, x, y) -&gt; # bytes written\n; writes a .ppm file header to the buffer, and returns the\n; number of bytes written. The maximum color value is hard-coded\n; at 255, but the x and y sizes can be any non-negative integers.\n;\n; example: writeHeader(buffer, 100, 50) writes\n; \"P3\\n100 50\\n255\\n\" to the buffer and returns 14.\n\nglobal writeHeader\nextern itoa\n</code></pre>\n\n<p>Here is a c++ file that tests the code</p>\n\n<p>test_writeheader.cpp</p>\n\n<pre><code>#include \"gtest/gtest.h\"\n\nextern \"C\" int writeHeader(char *buffer, int x, int y);\n\nTEST(writeHeader, all) {\n    char buff[100];\n\n    int n = writeHeader(buff, 0, 0);\n    buff[n] = 0;\n    EXPECT_EQ(strlen(buff), n);\n    EXPECT_STREQ(\"P3\\n0 0\\n255\\n\", buff);\n\n    n = writeHeader(buff, 1, 2);\n    buff[n] = 0;\n    EXPECT_EQ(strlen(buff), n);\n    EXPECT_STREQ(\"P3\\n1 2\\n255\\n\", buff);\n\n    n = writeHeader(buff, 1024, 768);\n    buff[n] = 0;\n    EXPECT_EQ(strlen(buff), n);\n    EXPECT_STREQ(\"P3\\n1024 768\\n255\\n\", buff);\n\n    n = writeHeader(buff, 2560, 1440);\n    buff[n] = 0;\n    EXPECT_EQ(strlen(buff), n);\n    EXPECT_STREQ(\"P3\\n2560 1440\\n255\\n\", buff);\n}\n</code></pre>\n\n<p>I know I'm not supposed to ask for people to write my code, however I am stuck and really could use some help. If you would rather write the sudo code on how to do it, I am sure I could figure the rest out.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 3681, "user_id": 2817371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fafb901e8d840c703f4a5089692427ad?s=128&d=identicon&r=PG&f=1", "display_name": "Red Alert", "link": "https://stackoverflow.com/users/2817371/red-alert"}, "edited": false, "score": 0, "creation_date": 1422487674, "post_id": 28204338, "comment_id": 44774668, "body": "Can you describe the underlying problem you are trying to solve? The reason <code>std::function</code> doesn&#39;t have a <code>==</code> operator is because it doesn&#39;t many any sense to compare functions that way. How can you possibly determine if two functions are equal?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1422487694, "post_id": 28204338, "comment_id": 44774673, "body": "Similar (possibly duplicate): <a href=\"http://stackoverflow.com/questions/5847072/comparing-stdfunction\">stackoverflow.com/questions/5847072/comparing-stdfunction</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1422487760, "post_id": 28204338, "comment_id": 44774698, "body": "Short answer: you should make a struct that contains a unique key and the <code>std::function</code>, and have a vector of those structs. It doesn&#39;t make much sense to actually use a <code>std::function</code> as a search key. <a href=\"http://stackoverflow.com/questions/4430425/stdvector-of-stdfunction\">See here</a>"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1422487795, "post_id": 28204338, "comment_id": 44774714, "body": "I knocked up this code snippet so I won&#39;t have to bother anyone with the longer code I want to use this approach in. Basically you have set of choices - candidates as I call it here - and you confront it with some input and you want to keep only those candidates around who are still &quot;in the game&quot;. As you say, std::function makes no sense ;)"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1422487883, "post_id": 28204338, "comment_id": 44774746, "body": "@MattMcNabb This is how I will do it if no one here has a better idea."}], "answers": [{"comments": [{"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 1, "creation_date": 1422488923, "post_id": 28204530, "comment_id": 44775064, "body": "Erasing while iterating is a good path to disaster. At least it was so for many years. But maybe C++11 voodoo makes this legal now?"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 4, "creation_date": 1422489320, "post_id": 28204530, "comment_id": 44775209, "body": "Erasing while iterating has always been fine as long as you do it properly."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 1, "creation_date": 1422496731, "post_id": 28204530, "comment_id": 44777142, "body": "@user2225104 Lots of things lead to disaster if you do them wrong. Just learn the right way to do them."}, {"owner": {"reputation": 408, "user_id": 981161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63b6a92d4930dfc23b098f2ae318c34?s=128&d=identicon&r=PG", "display_name": "rparolin", "link": "https://stackoverflow.com/users/981161/rparolin"}, "edited": false, "score": 0, "creation_date": 1422504388, "post_id": 28204530, "comment_id": 44778930, "body": "In general, I&#39;d say undesirable to alter containers while iterating.<a href=\"http://en.wikipedia.org/wiki/Erase-remove_idiom\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Erase-remove_idiom</a>"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1422531323, "post_id": 28204530, "comment_id": 44790959, "body": "Erasing while iterating is fine, it&#39;s one of the main reasons why <code>erase</code> returns an iterator! (The associative containers didn&#39;t in C++03, but that got <a href=\"http://cplusplus.github.io/LWG/lwg-defects.html#130\" rel=\"nofollow noreferrer\">fixed</a> for C++11)."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 408, "user_id": 981161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63b6a92d4930dfc23b098f2ae318c34?s=128&d=identicon&r=PG", "display_name": "rparolin", "link": "https://stackoverflow.com/users/981161/rparolin"}, "edited": false, "score": 0, "creation_date": 1422538331, "post_id": 28204530, "comment_id": 44795266, "body": "@rparolin Except sometimes you can&#39;t use erase-remove, so it&#39;s important to learn how to do it the other way. See <a href=\"http://stackoverflow.com/q/28215743/2069064\">this question</a> which I just happened across."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1422488406, "creation_date": 1422488406, "answer_id": 28204530, "question_id": 28204338, "link": "https://stackoverflow.com/questions/28204338/how-to-work-around-the-fact-that-stdfunction-has-no-operator/28204530#28204530", "title": "How to work around the fact that std::function has no operator==?", "body": "<p>You don't need equality here. Just erase as you go</p>\n\n<pre><code>for (auto it = candidates.begin(); it != candidates.end(); ) {\n    if (! (*it)(foo) ) {\n        it = candidates.erase(it);\n    }\n    else {\n        ++it;\n    }\n}\nreturn !candidates.empty();\n</code></pre>\n\n<p>This will be also be faster than the version in the question even if <code>operator==</code> was defined for <code>std::function</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1422488828, "post_id": 28204560, "comment_id": 44775029, "body": "The erasing is part of it. And also, (remaining) candidates need to get a go at it. Your code returns when it finds the first one returning false. The objective of the code actually is to thin out the set of remaining candidates."}], "tags": [], "owner": {"reputation": 2446, "user_id": 2369428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CToEN.jpg?s=128&g=1", "display_name": "yivo", "link": "https://stackoverflow.com/users/2369428/yivo"}, "is_accepted": false, "score": 0, "last_activity_date": 1422489586, "last_edit_date": 1422489586, "creation_date": 1422488551, "answer_id": 28204560, "question_id": 28204338, "link": "https://stackoverflow.com/questions/28204338/how-to-work-around-the-fact-that-stdfunction-has-no-operator/28204560#28204560", "title": "How to work around the fact that std::function has no operator==?", "body": "<p>If you ever dont need to erase candidates you can write:</p>\n\n<pre><code>bool Test(TesterSet_t &amp;candidates, int foo)\n{\n    return std::any_of(candidates.begin(), candidates.end(), [&amp;foo](Tester_t &amp;tester) {\n        return tester(foo);\n    });\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Okay, you need to remove candidates</p>\n\n<pre><code>bool Test(TesterSet_t &amp;candidates, int foo)\n{\n    candidates.erase(\n        std::remove_if(candidates.begin(), candidates.end(), [&amp;foo](Tester_t &amp;tester) {\n            return !tester(foo);\n        }),\n        candidates.end()\n    );\n    return !candidates.empty();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2507, "user_id": 2251525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BjkXO.jpg?s=128&g=1", "display_name": "Peter R", "link": "https://stackoverflow.com/users/2251525/peter-r"}, "edited": false, "score": 1, "creation_date": 1422504005, "post_id": 28204630, "comment_id": 44778861, "body": "There&#39;s no comparison of contained objects, it erases if the predicate returns true."}], "tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": true, "score": 10, "last_activity_date": 1422489638, "last_edit_date": 1422489638, "creation_date": 1422489061, "answer_id": 28204630, "question_id": 28204338, "link": "https://stackoverflow.com/questions/28204338/how-to-work-around-the-fact-that-stdfunction-has-no-operator/28204630#28204630", "title": "How to work around the fact that std::function has no operator==?", "body": "<p>As others have said, you don't need comparison of <code>std::function</code>s for this. Using standard C++ facilities this can be efficiently (with linear complexity) implemented in two lines:</p>\n\n<pre><code>bool Test(TesterSet_t &amp;candidates, int foo)\n{\n    candidates.erase(std::remove_if(candidates.begin(), candidates.end(),\n        [foo](Tester_t&amp; f){ return !f(foo); }), candidates.end());\n    return !candidates.empty();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1422489545, "post_id": 28204664, "comment_id": 44775276, "body": "Indeed. This is why I think since a long time that the auto/lambda/std::function approach is fundamentally flawed. They should really have introduced a new intrinsic type and make function values and function references first class citizens. It is not really the c++ users problems how they solve the capture context implementation. With that in place, efforts like C-- might have been saved all together."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1422490153, "post_id": 28204664, "comment_id": 44775450, "body": "The problem isn&#39;t so much to dealing with the capture. The problem is that you can capture objects (or reference to objects) which are not equality comparable. You&#39;ll want to have lambda function for these, e.g., when there is no need to compare them. So you&#39;ll end up with incomparable function objects. How to deal with them (consider it an error/consider them non-equal) depends a bit on context and I actually prefer that choice not to be baked into the standard (i.e., not define equality in this case). However, if captured objects are comparable, equality for lambda functions would be nice."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 0, "last_activity_date": 1422489825, "last_edit_date": 1495540620, "creation_date": 1422489255, "answer_id": 28204664, "question_id": 28204338, "link": "https://stackoverflow.com/questions/28204338/how-to-work-around-the-fact-that-stdfunction-has-no-operator/28204664#28204664", "title": "How to work around the fact that std::function has no operator==?", "body": "<p>The simple answer is <em>not</em> to use <code>std::function&lt;...&gt;</code> in this case but rather something like <code>std::function&lt;...&gt;</code> which does define an equality operators. The approach to define an equality operator for <code>function&lt;...&gt;</code> is to detect upon construction whether the actual function object actually contains an equality operator and, if so, make the object comparable. Otherwise, you'd either produce an error or you'd consider objects holding this particular function object type to be incomparable.</p>\n\n<p>The immediate observation is, however, that most function objects are not comparable! For example, lambda functions are not comparable and <code>std::bind()</code> and <code>std::mem_fn()</code> also don't yield comparable function objects. Again, there can be a custom implementation for <code>std::bind()</code> and <code>std::mem_fn()</code>. There is no way to make lambda functions comparable <em>unless</em> the have an empty capture in which case they could be turned into function pointers and could be compared.</p>\n\n<p>The implementation of equality-aware function objects is a bit too long to quickly type into a response. However, you can have a look at my implementation at <a href=\"https://github.com/dietmarkuehl/kuhllib/blob/master/src/nstd/functional\" rel=\"nofollow noreferrer\">github</a> for equality-comparable <code>bind()</code> and <code>mem_fn()</code>. See <a href=\"https://stackoverflow.com/a/27628027/1120273\">this answer</a> for an implementation of an equality comparable version of <code>std::function&lt;...&gt;</code>. It may be desirable to have lambda functions be comparable, too, if they have the same signature and all captured values are equality comparable.</p>\n\n<p>All that said, if you can avoid the need, it is probably best avoided. However, I have come across some uses cases where a comparable <code>std::function&lt;...&gt;</code> would be rather handy despite its restrictions (i.e., not all function objects will be covered).</p>\n"}], "owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 0, "accepted_answer_id": 28204630, "answer_count": 4, "score": 6, "last_activity_date": 1422489825, "creation_date": 1422487402, "question_id": 28204338, "link": "https://stackoverflow.com/questions/28204338/how-to-work-around-the-fact-that-stdfunction-has-no-operator", "title": "How to work around the fact that std::function has no operator==?", "body": "<p>Problem: The following code would be very expressive and concise, if not necessarily fast, were it not for the fact that it does not compile.</p>\n\n<p>It does not compile because you cannot compare std::function instances with operator==(). And std::find() tries to do exactly that.</p>\n\n<p>Of course, I could go for an entirely different kind of implementation, but stubborn as I am and fond as I am with the code below, I am looking for something \"closest as possible\" which works.</p>\n\n<p>Who can provide me a pretty rewrite of the code below which does the same thing?</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;vector&gt;\n\ntypedef std::function&lt;bool(int)&gt; Tester_t;\ntypedef std::vector&lt;Tester_t&gt; TesterSet_t;\n\nbool Test(TesterSet_t &amp;candidates, int foo)\n{\n    TesterSet_t dropouts;\n    for( auto&amp; tester : candidates )\n    {\n        if(!tester(foo))    \n        {\n            droputs.push_back(tester);\n        }\n    }\n\n    while(!dropouts.empty())\n    {\n        // The following line is not compiling because std::function has no operator==()\n        TesterSet_t::iterator culprit = \n            std::find( candidates.begin(), candidates.end(), dropouts.back() );\n        candidates.erase(culprit);\n        dropouts.pop_back();\n    }\n    return !candidates.empty();\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "libxml2"], "comments": [{"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 1, "creation_date": 1422487532, "post_id": 28204317, "comment_id": 44774625, "body": "Given that you are processing fixed responses, couldn&#39;t you just preprocess the raw message text prior to the XML parsing, and replace the ESC chars with your own special text pattern?"}, {"owner": {"reputation": 1951, "user_id": 37236, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JJHyB.png?s=128&g=1", "display_name": "Amish Programmer", "link": "https://stackoverflow.com/users/37236/amish-programmer"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1422487723, "post_id": 28204317, "comment_id": 44774683, "body": "Peter M - That is my temporary workaround. The value is arbitrary text, so I wouldn&#39;t consider this approach 100% reliable."}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1422487784, "post_id": 28204317, "comment_id": 44774707, "body": "I&#39;m not sure but the ESC char may not be a valid XML UTF-8 char, so preprocessing may be your only real option."}], "answers": [{"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 1, "last_activity_date": 1422488173, "creation_date": 1422488173, "answer_id": 28204481, "question_id": 28204317, "link": "https://stackoverflow.com/questions/28204317/using-libxml2-to-parse-xml-attributes-containing-invalid-characters/28204481#28204481", "title": "Using libxml2 to Parse XML Attributes Containing Invalid Characters", "body": "<p>You are asking the unanswerable. Suppose instead of an <code>0x1B</code> character you got a <code>\\n</code>? Or worse an additional <code>\"</code>? Or a <code>\\</code>? Anything that produces invalid xml is going to make libxml2 choke, because it is an xml parser. And the example you produced is invalid xml. If you want it to parse invalid xml you need to determine how it should parse and either modify libxml2 or modify the xml so it is valid and undo the damage later. The reason it is invalid xml is precisely because it's not obvious how such things should parse.</p>\n\n<p>The best solution is to fix whatever is producing the (alleged) xml to not produce broken xml.</p>\n"}], "owner": {"reputation": 1951, "user_id": 37236, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JJHyB.png?s=128&g=1", "display_name": "Amish Programmer", "link": "https://stackoverflow.com/users/37236/amish-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 608, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449690861, "creation_date": 1422487269, "question_id": 28204317, "link": "https://stackoverflow.com/questions/28204317/using-libxml2-to-parse-xml-attributes-containing-invalid-characters", "title": "Using libxml2 to Parse XML Attributes Containing Invalid Characters", "body": "<p>I am attempting to parse XML response messages from a third-party interface that contain illegal characters. Please note that these responses are not within my control.</p>\n\n<p>The following is a modified example response</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;response&gt;\n  &lt;data value=\"Example A\" /&gt;\n  &lt;data value=\"Example B\" /&gt;\n  &lt;data value=\"Example C\" /&gt;\n&lt;/response&gt;\n</code></pre>\n\n<p>Occasionally, the \"value\" attribute might contain the <strong>ESC</strong> control character [0x1b], which is used (questionably) to indicate special characteristics to be applied to the value.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;response&gt;\n  &lt;data value=\"[0x1b]Example A\" /&gt;\n  &lt;data value=\"Example B\" /&gt;\n&lt;/response&gt;\n</code></pre>\n\n<p>I'm using the libxml2 <em>xmlParseMemory()</em> function to attempt to parse this response. <a href=\"http://www.xmlsoft.org/html/libxml-parser.html#xmlParseMemory\" rel=\"nofollow\">http://www.xmlsoft.org/html/libxml-parser.html#xmlParseMemory</a></p>\n\n<p>I'm calling the function as as follows:</p>\n\n<pre><code>xmlDocPtr doc = xmlParseMemory( buffer, size );\n</code></pre>\n\n<p>When the response XML is valid, I get a valid xmlDocPtr and can continue to work with it. If the response contains illegal characters, I receive NULL and wind up at a dead end.</p>\n\n<p>Is there any way I parse these messages without receiving errors and without throwing away the illegal characters?</p>\n"}, {"tags": ["c++", "windows", "char", "sal", "lpwstr"], "comments": [{"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 0, "creation_date": 1422486616, "post_id": 28204160, "comment_id": 44774308, "body": "see: <a href=\"http://stackoverflow.com/questions/11648246/compiler-error-in-dev-c\" title=\"compiler error in dev c\">stackoverflow.com/questions/11648246/compiler-error-in-dev-c</a> . The accepted answer talks about those symbols a bit."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1422486661, "post_id": 28204160, "comment_id": 44774326, "body": "<code>__nullterminated</code> looks like a compiler-specific extension. In any case, <code>LPWSTR</code> is simply a pointer to a wide character (with the intent being that that character is the first in an array of characters, ending with a null character, thus forming a string). Your typedef is fine (though it&#39;s missing the semicolon)."}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "edited": false, "score": 0, "creation_date": 1422486714, "post_id": 28204160, "comment_id": 44774346, "body": "so <code>typedef WCHAR   *LPWSTR </code> can be used as a substitue ?"}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1422486747, "post_id": 28204160, "comment_id": 44774357, "body": "@Misty: Yes. You read faster than I could ninja-edit my comment :-) If you&#39;re using GCC on Windows, though, there should already be a header somewhere that defines these types. (e.g. MinGW has its own version of <code>windows.h</code>.)"}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "edited": false, "score": 0, "creation_date": 1422486909, "post_id": 28204160, "comment_id": 44774408, "body": "I am using cygwin-gcc"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1422487757, "post_id": 28204160, "comment_id": 44774696, "body": "It is just a do-nothing macro, not a keyword, code analyzers can use it."}], "answers": [{"tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": true, "score": 6, "last_activity_date": 1422488057, "creation_date": 1422488057, "answer_id": 28204458, "question_id": 28204160, "link": "https://stackoverflow.com/questions/28204160/what-does-this-typedef-mean-involving-lpwstr/28204458#28204458", "title": "What does this typedef mean involving LPWSTR?", "body": "<blockquote>\n  <p>typedef __nullterminated WCHAR *NWPSTR, *LPWSTR, *PWSTR;</p>\n</blockquote>\n\n<p>The <strong><code>__nullterminated</code></strong> part is a <em>SAL annotation</em>. SAL is a Microsoft specific technology to annotate function parameters, return values, function behaviors, etc. to help finding bugs and reduce C/C++ code defects using the Visual Studio Code Analysis tool. You can read about SAL here on MSDN:</p>\n\n<blockquote>\n  <p><a href=\"http://msdn.microsoft.com/en-us/library/ms182032.aspx\" rel=\"noreferrer\"><strong>Using SAL Annotations to Reduce C/C++ Code Defects</strong></a></p>\n</blockquote>\n\n<p><strong><code>WCHAR</code></strong> is defined in the Windows Platform SDK headers basically as a typedef for <code>wchar_t</code>, which is a <strong>16-bit</strong> character type in the Microsoft Visual C++ compiler. This is used as a <em>\"character unit\"</em> for the <strong>Unicode UTF-16</strong> encoding, which is the default <em>de facto</em> Unicode encoding of Windows APIs.<br>\nNote that other compilers like GNU GCC on Linux consider <code>wchar_t</code> to be a <em>32-bit</em> character unit (<em>not</em> 16-bit), so you have to pay attention here for the portability of your code.</p>\n\n<p>(Note: Modern versions of Windows support Unicode UTF-16 with the so called <em>surrogate pairs</em>, so you can have a <em>couple</em> of adjacent <code>WCHAR</code>s defining a surrogate pair.)</p>\n\n<p><strong><code>NWPSTR</code></strong>, <strong><code>LPWSTR</code></strong> and <strong><code>PWSTR</code></strong> are all synonyms, defined as <em>pointers</em> to <code>WCHAR</code>, i.e. considering also the <code>__nullterminated</code> SAL annotation, they are pointers to <em>\"raw\"</em> <strong>C-style NUL-terminated Unicode UTF-16 strings</strong>.</p>\n\n<p>Basically, this is the Windows Win32 Unicode equivalent of the classical C's <code>char*</code>.</p>\n\n<p>I've been programming Windows in C++ for several years, and I've never met this <code>NWPSTR</code> to be honest :)</p>\n\n<p>The name <code>PWSTR</code> is built using the following elements:</p>\n\n<ul>\n<li><code>P</code>: pointer</li>\n<li><code>W</code>: <em>\"wide\"</em>, i.e. <code>WCHAR</code>/<code>wchar_t</code>-based, i.e. Unicode UTF-16</li>\n<li><code>STR</code>: string</li>\n</ul>\n\n<p>So, <code>PWSTR</code> means a pointer to a <code>WCHAR</code>/<code>wchar_t</code> string, i.e. a Unicode UTF-16 string, as already stated above.</p>\n\n<p><code>LPWSTR</code> is just an old name for the same thing; the initial <code>L</code> means <em>\"long\"</em>, and that dates back to a time when there were <em>\"long pointers\"</em> which could access memory farther than \"short\" or \"near\" pointers :) Those days are no more.</p>\n\n<p>And, if you put a <strong><code>C</code></strong> in those names, you have typedefs for the read-only <strong><code>const</code></strong> counterparts, e.g.: <strong><code>PCWSTR</code></strong> or <strong><code>LPCWSTR</code></strong> are basically <strong><code>const wchar_t*</code></strong> NUL-terminated Unicode UTF-16 strings.</p>\n\n<p>You will find <code>PCWSTR</code> and the older equivalent <code>LPCWSTR</code> used <em>a lot</em> in Windows header files and Windows API documentation to represent <strong>Unicode UTF-16</strong> <em>\"input\"</em> (i.e. <code>const</code>) <strong>C-style NUL-terminated strings</strong>.</p>\n"}], "owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1998, "favorite_count": 1, "accepted_answer_id": 28204458, "answer_count": 1, "score": 1, "last_activity_date": 1422488576, "creation_date": 1422486506, "last_edit_date": 1422488576, "question_id": 28204160, "link": "https://stackoverflow.com/questions/28204160/what-does-this-typedef-mean-involving-lpwstr", "title": "What does this typedef mean involving LPWSTR?", "body": "<p>I am trying to find a substitute for LPWSTR for porting a project to gcc. </p>\n\n<pre><code>typedef __nullterminated WCHAR *NWPSTR, *LPWSTR, *PWSTR;\n</code></pre>\n\n<p>What is null terminated ? so would it be safe if I did something like this:</p>\n\n<pre><code>typedef WCHAR   *LPWSTR \n</code></pre>\n"}, {"tags": ["c++", "qt", "latex"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1422487432, "post_id": 28204055, "comment_id": 44774585, "body": "Qt doesn&#39;t have built-in support for LaTeX as far as I know, but there&#39;s plenty of LaTeX processing libraries out there."}, {"owner": {"reputation": 873, "user_id": 2278438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6445978d48253edb913792a2c2036927?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2278438/michael"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1422571918, "post_id": 28204055, "comment_id": 44815586, "body": "@MrEricSir could you name one library?"}], "owner": {"reputation": 873, "user_id": 2278438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6445978d48253edb913792a2c2036927?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2278438/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1075, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422486005, "creation_date": 1422486005, "question_id": 28204055, "link": "https://stackoverflow.com/questions/28204055/is-there-a-way-to-include-latex-in-a-qt-application", "title": "Is there a way to include LaTeX in a Qt application?", "body": "<p>So I am working on a project to generate documents using LaTeX, the program is supposed to ask for some inputs and then compile the .tex and get a .pdf.</p>\n\n<p>The problem is that if I use QProcess to compile the .tex using terminal commands, LaTeX must be installed on the PC to work. So I was wondering if there's a way to include LaTeX in my app so I can compile .tex files without installing LaTeX on every PC. And how LaTeX online editors compile .tex?</p>\n"}, {"tags": ["c++", "tree", "traversal", "insertion"], "comments": [{"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1422486375, "post_id": 28204050, "comment_id": 44774212, "body": "Add your function preOrderPrintRec() in question."}], "answers": [{"tags": [], "owner": {"reputation": 251, "user_id": 2516674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4acce2c94d743244f3e1a4c6b2f8fb61?s=128&d=identicon&r=PG", "display_name": "huderlem", "link": "https://stackoverflow.com/users/2516674/huderlem"}, "is_accepted": true, "score": 1, "last_activity_date": 1422486404, "creation_date": 1422486404, "answer_id": 28204143, "question_id": 28204050, "link": "https://stackoverflow.com/questions/28204050/tree-traversal-not-printing-correct-order/28204143#28204143", "title": "Tree Traversal not printing correct order", "body": "<p>You're calling <code>preOrderPrintRec()</code> inside your <code>postOrderPrintRec()</code> function.  This means you're only doing a post-order traversal at the top level of the tree.  Call <code>postOrderPrintRec()</code> instead, and I think that will fix it.</p>\n"}], "owner": {"reputation": 63, "user_id": 4339870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9363afcc27a222f90eca6ce7f4cb479?s=128&d=identicon&r=PG&f=1", "display_name": "James4701", "link": "https://stackoverflow.com/users/4339870/james4701"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 28204143, "answer_count": 1, "score": 0, "last_activity_date": 1422486404, "creation_date": 1422485965, "question_id": 28204050, "link": "https://stackoverflow.com/questions/28204050/tree-traversal-not-printing-correct-order", "title": "Tree Traversal not printing correct order", "body": "<p>I have created a binary tree out of classes in C++. My insert function is non-recursive and looks like this:</p>\n\n<pre><code>bool Tree1::inOrderInsert(int x)\n{\n    TreeNode *parent = NULL;\n    TreeNode *temp = root;\n    TreeNode *newNode = new TreeNode(x);\n\n    if (root == NULL)\n    {\n        root = newNode;\n        //cout &lt;&lt; \"Root empty!\" &lt;&lt; endl;\n        return true;\n    }\n\n    while (temp != NULL)\n    {\n        if (x &lt;= temp-&gt;value)\n        {\n            parent = temp;\n            temp = temp-&gt;left;\n        }\n        else\n        {\n            parent = temp;\n            temp = temp-&gt;right;\n        }\n    }\n\n    if (x &lt;= parent-&gt;value)\n    {\n        parent-&gt;left = newNode;\n        return true;\n    }\n    else\n    {\n        parent-&gt;right = newNode;\n        return true;\n    }\n}\n</code></pre>\n\n<p>I traverse and print the tree using post order traversal with this function:</p>\n\n<pre><code>void Tree1::postOrderPrintRec(TreeNode *node)\n{\n    if (node != NULL)\n    {\n        preOrderPrintRec(node-&gt;left);\n        preOrderPrintRec(node-&gt;right);\n        cout &lt;&lt; \"Value: \" &lt;&lt; node-&gt;value &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>I insert and print values in main like this:</p>\n\n<pre><code>tree1.inOrderInsert(5);\ntree1.inOrderInsert(3);\ntree1.inOrderInsert(2);\ntree1.inOrderInsert(4);\ntree1.inOrderInsert(6);\ntree1.inOrderInsert(7);\ntree1.postOrderPrintRec(tree1.getRoot()); \n</code></pre>\n\n<p>The values I should be seeing when I run the code are as follows:\nvalue: 2\nvalue: 4\nvalue: 3\nvalue: 7\nvalue: 6\nvalue: 5</p>\n\n<p>However, I am seeing this:\nvalue: 3\nvalue: 2\nvalue: 4\nvalue: 6\nvalue: 7\nvalue: 5</p>\n\n<p>Can anyone tell me why it is printing out values in the incorrect order?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "language-lawyer", "sfinae"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 18, "creation_date": 1422485907, "post_id": 28203981, "comment_id": 44774014, "body": "It&#39;s certainly legal. MSVC doesn&#39;t have the best track record when it comes to standard conformance."}, {"owner": {"reputation": 3152, "user_id": 1377706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bhJMC.png?s=128&g=1", "display_name": "Pharap", "link": "https://stackoverflow.com/users/1377706/pharap"}, "edited": false, "score": 3, "creation_date": 1422499285, "post_id": 28203981, "comment_id": 44777839, "body": "MSVC isn&#39;t C++11 compliant yet. For example, constexpr doesn&#39;t work yet."}, {"owner": {"reputation": 501, "user_id": 1997315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee21f9d6b51b301bd72bfe3fccbe8fd0?s=128&d=identicon&r=PG", "display_name": "jingyu9575", "link": "https://stackoverflow.com/users/1997315/jingyu9575"}, "edited": false, "score": 3, "creation_date": 1422528027, "post_id": 28203981, "comment_id": 44789016, "body": "Adding an unused parameter <code>, typename = void</code> to the second <code>foo</code> can make MSVC2015 Preview compile."}], "answers": [{"comments": [{"owner": {"reputation": 24653, "user_id": 254306, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0745d192010b591257e771df7f439524?s=128&d=identicon&r=PG", "display_name": "Travis Gockel", "link": "https://stackoverflow.com/users/254306/travis-gockel"}, "edited": false, "score": 3, "creation_date": 1422488207, "post_id": 28204078, "comment_id": 44774827, "body": "Thanks! At least it&#39;s workaroundable. Is there any word on if this will get fixed for the big release?"}], "tags": [], "owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "is_accepted": false, "score": 33, "last_activity_date": 1422486098, "last_edit_date": 1495541363, "creation_date": 1422486098, "answer_id": 28204078, "question_id": 28203981, "link": "https://stackoverflow.com/questions/28203981/is-the-lazy-mans-enable-if-legal-c/28204078#28204078", "title": "Is the &quot;lazy man&#39;s enable_if&quot; legal C++?", "body": "<p>This is a feature called <a href=\"https://stackoverflow.com/questions/12654067/what-is-expression-sfinae\">\"Expression SFINAE.\"</a>  It is not yet fully supported by Visual C++ (see <a href=\"http://blogs.msdn.com/b/vcblog/archive/2014/11/17/c-11-14-17-features-in-vs-2015-preview.aspx\" rel=\"nofollow noreferrer\">\"C++11/14/17 Features In VS 2015 Preview\"</a> for the latest conformance update as of the time of this answer).</p>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1422547848, "post_id": 28204207, "comment_id": 44801908, "body": "<code>template&lt;size_t&gt; struct overload{enum type{}}</code> then <code>template&lt;typename F, overload&lt;0&gt;::type...&gt;</code> has no limit on the number of overloads, but clang explodes when fed it sadly."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1422549265, "post_id": 28204207, "comment_id": 44802864, "body": "@Yakk I used a pointer type instead (because I can currently not check the conversions allowed for converted constant expressions), but good idea, nested types are obviously unique. Kinda missed that :) As you can see I chose to use a default argument instead of a pack, because of problems in combination with other packs."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1422557880, "post_id": 28204207, "comment_id": 44807882, "body": "@Yakk Further simplified after I understood the difference in parsing between template argument and template parameter lists."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1422561200, "post_id": 28204207, "comment_id": 44809700, "body": "That is nice!  Even using the <code>=0</code> in a somewhat non-evil way.  Still, I hope that concepts lite will make this kind of hack not required, I should check if they covered the problem."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1427983673, "post_id": 28204207, "comment_id": 47002403, "body": "@Yakk Turned out the =0 is incorrect since null pointer conversions in <i>converted constant expressions</i> can only convert from <code>nullptr_t</code>. Fixed."}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 44, "last_activity_date": 1458571964, "last_edit_date": 1458571964, "creation_date": 1422486714, "answer_id": 28204207, "question_id": 28203981, "link": "https://stackoverflow.com/questions/28203981/is-the-lazy-mans-enable-if-legal-c/28204207#28204207", "title": "Is the &quot;lazy man&#39;s enable_if&quot; legal C++?", "body": "<p><a href=\"http://eel.is/c++draft/temp.over.link#6\" rel=\"nofollow\">[temp.over.link]/6</a> specifies when two function template declarations are overloads. That is done by defining equivalency of two function templates as follows:</p>\n\n<blockquote>\n  <p>Two function templates are <em>equivalent</em> if they [..] have return types [..] that are equivalent using the rules\n  described above to compare expressions involving template parameters.</p>\n</blockquote>\n\n<p>The \"rules described above\" are</p>\n\n<blockquote>\n  <p>Two expressions involving template parameters are considered\n  <em>equivalent</em> if two function definitions containing the expressions would satisfy the one definition rule (3.2) [..]</p>\n</blockquote>\n\n<p>The ODR relevant for this part states in <a href=\"http://eel.is/c++draft/basic.def.odr#6\" rel=\"nofollow\">[basic.def.odr]/6</a> that</p>\n\n<blockquote>\n  <p>Given such an entity named <code>D</code> defined in more than one translation\n  unit, then</p>\n  \n  <ul>\n  <li><strong>each definition of <code>D</code> shall consist of the same sequence of tokens</strong>;</li>\n  </ul>\n</blockquote>\n\n<p>Clearly, as the return types (which are the trailing return types as per <a href=\"http://eel.is/c++draft/dcl.fct#2\" rel=\"nofollow\">[dcl.fct]/2</a>) do not consist of the same tokens, two function definitions containing those expressions would violate the ODR.<br>\nHence the declarations of <code>foo</code> declare non-equivalent function templates and overload the name.  </p>\n\n<p>The error you see is issued due to the lack of support from VC++ for expression SFINAE - presumably the trailing-return-types are not inspected for equivalency.</p>\n\n<hr>\n\n<h3>Workaround</h3>\n\n<p>You can make the function templates non-equivalent in another way - Change the template parameter list. If you rewrite the second definition like so:</p>\n\n<pre><code>template &lt;typename F, int=0&gt;\nauto foo(F&amp;&amp; f) -&gt; decltype(f(0, 1), void())\n{\n    std::cout &lt;&lt; \"2\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Then VC++ <a href=\"http://rextester.com/CED85004\" rel=\"nofollow\">compiles it fine</a>.\nI shortened the quote in [temp.over.link]/6, which covers this:</p>\n\n<blockquote>\n  <p>Two function templates are <em>equivalent</em> if they are declared in the same\n  scope, have the same name, <strong>have identical template parameter lists</strong> [..]</p>\n</blockquote>\n\n<p>In fact, to be able to easily introduce new overloads, you can use a little helper:</p>\n\n<pre><code>template &lt;int I&gt;\nusing overload = std::integral_constant&lt;int, I&gt;*;\n</code></pre>\n\n<p>Usage is e.g.</p>\n\n<pre><code>// Remember to separate &gt; and = with whitespace\ntemplate &lt;typename... F, overload&lt;0&gt; = nullptr&gt;\nauto foo(F&amp;&amp;... f) -&gt; decltype(f(0, 1)..., void())\n\ntemplate &lt;typename... F, overload&lt;1&gt; = nullptr&gt;\nauto foo(F&amp;&amp;... f) -&gt; decltype(f(0, 1, 2)..., void())\n</code></pre>\n\n<p><a href=\"http://rextester.com/AGOD13940\" rel=\"nofollow\"><strong>Demo</strong></a>.  </p>\n"}], "owner": {"reputation": 24653, "user_id": 254306, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0745d192010b591257e771df7f439524?s=128&d=identicon&r=PG", "display_name": "Travis Gockel", "link": "https://stackoverflow.com/users/254306/travis-gockel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4081, "favorite_count": 11, "accepted_answer_id": 28204207, "answer_count": 2, "score": 51, "last_activity_date": 1458571964, "creation_date": 1422485632, "last_edit_date": 1458301540, "question_id": 28203981, "link": "https://stackoverflow.com/questions/28203981/is-the-lazy-mans-enable-if-legal-c", "title": "Is the &quot;lazy man&#39;s enable_if&quot; legal C++?", "body": "<p>I frequently use a technique I call the \"lazy man's <code>enable_if</code>,\" where I use <code>decltype</code> and the comma operator to enable a function based on some template input. Here is a small example:</p>\n\n<pre><code>template &lt;typename F&gt;\nauto foo(F&amp;&amp; f) -&gt; decltype(f(0), void())\n{\n    std::cout &lt;&lt; \"1\" &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename F&gt;\nauto foo(F&amp;&amp; f) -&gt; decltype(f(0, 1), void())\n{\n    std::cout &lt;&lt; \"2\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>With <code>--std=c++11</code>, g++ 4.7+ and Clang 3.5+ happily compile that bit of code (and it works as I would expect). However, when using MSVC 14 CTP5, I get this error complaining of <code>foo</code> already being defined:</p>\n\n<blockquote>\n  <p>Error error C2995: 'unknown-type foo(F &amp;&amp;)': function template has\n  already been defined  c++-scratch main.cpp    15</p>\n</blockquote>\n\n<p>So my question is: Is the \"lazy man's <code>enable_if</code>\" legal C++ or is this an MSVC bug?</p>\n"}, {"tags": ["c++", "operator-precedence"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 9, "creation_date": 1422485609, "post_id": 28203952, "comment_id": 44773868, "body": "Nope. There&#39;s not such a thing. But it&#39;s easy to make"}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 3, "creation_date": 1422485709, "post_id": 28203952, "comment_id": 44773912, "body": "This would be a fun code-golf question."}, {"owner": {"reputation": 65, "user_id": 4505141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ea7be7f36bce3534ee9b59b3d34b45?s=128&d=identicon&r=PG&f=1", "display_name": "Maty", "link": "https://stackoverflow.com/users/4505141/maty"}, "edited": false, "score": 0, "creation_date": 1422485943, "post_id": 28203952, "comment_id": 44774037, "body": "How would you go on about making it, sehe? I have a couple of ideas, but none seem very efficient. The best one I came up with was making cases and assigning variables to each ASCII code."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1422486211, "post_id": 28203952, "comment_id": 44774146, "body": "@Maty: The most efficient is probably one mapping function, called twice, and a simple numeric comparison."}, {"owner": {"reputation": 65, "user_id": 4505141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ea7be7f36bce3534ee9b59b3d34b45?s=128&d=identicon&r=PG&f=1", "display_name": "Maty", "link": "https://stackoverflow.com/users/4505141/maty"}, "edited": false, "score": 0, "creation_date": 1422486594, "post_id": 28203952, "comment_id": 44774299, "body": "Sorry, could you provide an example? From what I understand, map each operator into a numeric value and then compare it, which was what I was going to do with the switch and cases, but I feel like this mapping isn&#39;t the same thing."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422488470, "post_id": 28203952, "comment_id": 44774906, "body": "I highly recommend searching StackOverflow for &quot;c++ calculator precedence&quot;.  There are sooooo many examples of the calculator program on StackOverflow."}, {"owner": {"reputation": 65, "user_id": 4505141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ea7be7f36bce3534ee9b59b3d34b45?s=128&d=identicon&r=PG&f=1", "display_name": "Maty", "link": "https://stackoverflow.com/users/4505141/maty"}, "edited": false, "score": 0, "creation_date": 1422488552, "post_id": 28203952, "comment_id": 44774932, "body": "Thanks, I&#39;ll look that up, maybe make the code cleaner. But I found a way."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1423316565, "post_id": 28203952, "comment_id": 45103982, "body": "You could try to use some template magic to find out the precedence between two operators, and you can use a preprocessor macro to link the operators to their respective strings. I&#39;m not into the details, but I&#39;m positive that its possible."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 3, "creation_date": 1422488548, "post_id": 28204542, "comment_id": 44774929, "body": "You need to add <code>break</code> after the assignment statements in the <code>cases</code> so that they don&#39;t fall into the next case.  Your post presently will assign 4 to <code>temp</code> for &#39;+&#39;."}, {"owner": {"reputation": 65, "user_id": 4505141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ea7be7f36bce3534ee9b59b3d34b45?s=128&d=identicon&r=PG&f=1", "display_name": "Maty", "link": "https://stackoverflow.com/users/4505141/maty"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422488618, "post_id": 28204542, "comment_id": 44774956, "body": "If the variable temp falls into the &#39;+&#39; case, then I set it to be &#39;2&#39;, it can&#39;t fall under any of the next cases."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422488717, "post_id": 28204542, "comment_id": 44774992, "body": "Try again.  Use a debugger to single step the code or pass the &#39;+&#39; to your function and see what the result is.  Search StackOveflow for &quot;c++ case break fall through&quot;"}, {"owner": {"reputation": 65, "user_id": 4505141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ea7be7f36bce3534ee9b59b3d34b45?s=128&d=identicon&r=PG&f=1", "display_name": "Maty", "link": "https://stackoverflow.com/users/4505141/maty"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422488942, "post_id": 28204542, "comment_id": 44775071, "body": "Ah, you&#39;re right! Thank you very much. I was running the entire code on a simple function and it worked, I guess it was just luck."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1423316690, "post_id": 28204542, "comment_id": 45104016, "body": "Why are you using <code>float</code> as the type for the variable that holds the operator?!?"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 3, "creation_date": 1423317003, "post_id": 28204542, "comment_id": 45104098, "body": "That&#39;s a very long-winded way of writing <code>return precedenceMenu(inStack) &gt;= precedenceMenu(data);</code> Are you being paid per line of code?"}], "tags": [], "owner": {"reputation": 65, "user_id": 4505141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ea7be7f36bce3534ee9b59b3d34b45?s=128&d=identicon&r=PG&f=1", "display_name": "Maty", "link": "https://stackoverflow.com/users/4505141/maty"}, "is_accepted": false, "score": -3, "last_activity_date": 1422488471, "creation_date": 1422488471, "answer_id": 28204542, "question_id": 28203952, "link": "https://stackoverflow.com/questions/28203952/c-operator-precedence/28204542#28204542", "title": "C++ Operator Precedence?", "body": "<p>Thanks for the contribution, thought I'd post this if someone else ever needs same help. Might not be the most efficient code, but it works! That's all I need.</p>\n\n<pre><code>int precedenceMenu(float temp){\n\n    switch((int)temp)\n    {\n    case '+':\n        temp = '2';\n    case '-':\n        temp = '2';\n    case '*':\n        temp = '3';\n    case '/':\n        temp = '3';\n    case '^':\n        temp = '4';\n    }\n    return temp;\n}\n\nbool precedenceCheck(float inStack, float data){\n\n    bool precedence;\n    char stackChar, dataChar;\n\n    if( precedenceMenu(inStack) &gt;= precedenceMenu(data) )\n        precedence = true;\n\n    else\n        precedence = false;\n\n    return precedence;      //Returns TRUE if data &gt;= inStack (therefor switch)\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4505141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ea7be7f36bce3534ee9b59b3d34b45?s=128&d=identicon&r=PG&f=1", "display_name": "Maty", "link": "https://stackoverflow.com/users/4505141/maty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 585, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436014563, "creation_date": 1422485511, "last_edit_date": 1422485675, "question_id": 28203952, "link": "https://stackoverflow.com/questions/28203952/c-operator-precedence", "title": "C++ Operator Precedence?", "body": "<p>I am trying to create a stack and queue linked list converting infix to postfix. Anyways, my question is, is there a function that returns the operator precedence?</p>\n\n<p>I am basically trying to compare <code>'+'</code> and <code>'*'</code>, and have the function return TRUE, say if <code>'*' &gt; '+'</code>, something along those lines. Thanks.</p>\n"}, {"tags": ["c++", "templates", "exception"], "comments": [{"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 3, "creation_date": 1422484990, "post_id": 28203803, "comment_id": 44773635, "body": "Make sure you use <code>typename</code> before <code>Queue&lt;T&gt;</code>.  You really shouldn&#39;t be using a nested class for exceptions, especially not one within a template.  That&#39;s just asking for trouble."}, {"owner": {"reputation": 443, "user_id": 4258832, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f533225f3d62186f6751edf5a139a311?s=128&d=identicon&r=PG", "display_name": "JT1", "link": "https://stackoverflow.com/users/4258832/jt1"}, "reply_to_user": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 0, "creation_date": 1422485121, "post_id": 28203803, "comment_id": 44773677, "body": "I found a C++ class online that had this class structure in the skeleton for part of a larger homework. Could you elaborate on why this is asking for trouble?"}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1422485168, "post_id": 28203803, "comment_id": 44773695, "body": "Because each instantiation of the template will have a different exception type(!) But yeah, the syntax error is purely due to a dependent type missing the explicit <code>typename</code> to help the parser understand that <code>Overflow</code> is a type in that context."}, {"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 0, "creation_date": 1422485375, "post_id": 28203803, "comment_id": 44773779, "body": "The reason you are getting the error is because the compiler thinks <code>&lt;T&gt;</code> consists of less-than and greater-than operators!  That is, it&#39;s parsing your statement as <code>throw (Queue) &lt; (T) &gt; (::Overflow());</code>"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "reply_to_user": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 0, "creation_date": 1422485486, "post_id": 28203803, "comment_id": 44773818, "body": "@Rufflewind that&#39;s not true - check out the duplicate link to see what&#39;s going on."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1422485632, "post_id": 28203803, "comment_id": 44773880, "body": "Yes, if you change it to <code>throw typename Queue&lt;T&gt;::Overflow();</code>, it will work. And no, it&#39;s not parsing it as less-than and greater-than operators. Rather, since you didn&#39;t say that <code>Overflow</code> was the name of a type, it assumes that it&#39;s the name of a member function that you&#39;re trying to call (specifically pointed out in the error message, where it says: &quot;in instantiation of member function...&quot;"}, {"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1422485736, "post_id": 28203803, "comment_id": 44773930, "body": "@DrewDormann, JerryCoffin: ah, I see, thanks for the correction!"}, {"owner": {"reputation": 443, "user_id": 4258832, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f533225f3d62186f6751edf5a139a311?s=128&d=identicon&r=PG", "display_name": "JT1", "link": "https://stackoverflow.com/users/4258832/jt1"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1422486185, "post_id": 28203803, "comment_id": 44774132, "body": "@JerryCoffin: Thanks. Being new to C++ I&#39;m often a bit confused about what the compiler means when it spits out an error. It&#39;s even worse if the error is from inside the STL... However, it now makes complete sense."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1422486486, "post_id": 28203803, "comment_id": 44774256, "body": "Yup--completely understandable (just be glad you weren&#39;t using C++ 15 to 20 years ago, when error messages were <i>really</i> awful)."}, {"owner": {"reputation": 443, "user_id": 4258832, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f533225f3d62186f6751edf5a139a311?s=128&d=identicon&r=PG", "display_name": "JT1", "link": "https://stackoverflow.com/users/4258832/jt1"}, "edited": false, "score": 0, "creation_date": 1422520479, "post_id": 28203803, "comment_id": 44784806, "body": "I actually did some stuff with C++ in the late 90s (have forgot most of it since then) and remember how a very typical error message was &quot;segmentation fault&quot;. Compared to that, it&#39;s definitely been improved. ;)"}], "owner": {"reputation": 443, "user_id": 4258832, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f533225f3d62186f6751edf5a139a311?s=128&d=identicon&r=PG", "display_name": "JT1", "link": "https://stackoverflow.com/users/4258832/jt1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1422485300, "answer_count": 0, "score": 1, "last_activity_date": 1422485026, "creation_date": 1422484733, "last_edit_date": 1422485026, "question_id": 28203803, "link": "https://stackoverflow.com/questions/28203803/how-to-get-syntax-right-for-throwing-custom-exception", "closed_reason": "Duplicate", "title": "How to get syntax right for throwing custom exception?", "body": "<p>Can someone explain to me how to get this piece of code to compile? What's the syntax error here?</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Queue\n{\n  public:\n    class Overflow {};\n};\n\ntemplate &lt;typename T, typename QUEUE&gt;\nclass Queue_Adapter : public Queue&lt;T&gt;\n{\n  public:\n    void fun();\n};\n\ntemplate&lt;typename T, typename QUEUE&gt;\nvoid\nQueue_Adapter&lt;T, QUEUE&gt;::fun()\n{\n  throw Queue&lt;T&gt;::Overflow();\n}\n\nint main()\n{\n  Queue_Adapter&lt;int, int&gt; tmp;\n  tmp.fun();\n  return 0;\n}\n</code></pre>\n\n<p>I get the error message below:</p>\n\n<pre><code>test.cpp:19:19: error: 'Overflow' does not refer to a value\n  throw Queue&lt;T&gt;::Overflow();\n        ~~~~~~~~~~^\ntest.cpp:25:7: note: in instantiation of member function 'Queue_Adapter&lt;int,\n      int&gt;::fun' requested here\n  tmp.fun();\n      ^\ntest.cpp:5:11: note: declared here\n    class Overflow {};\n          ^\n1 error generated.\n</code></pre>\n\n<p>(To get rid of the error message complaining about my question being mostly code...)</p>\n"}, {"tags": ["c++", "rendering", "blending", "subpixel"], "answers": [{"comments": [{"owner": {"reputation": 1009, "user_id": 1287254, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4dd03f60239dd2c98ec3320d1876e78f?s=128&d=identicon&r=PG", "display_name": "Shaggi", "link": "https://stackoverflow.com/users/1287254/shaggi"}, "edited": false, "score": 0, "creation_date": 1424366404, "post_id": 28611341, "comment_id": 45529016, "body": "Thanks for your comment! I solved this utilizing the fact I&#39;m always rendering left to right, line-for-line. Thus, I only needed to store the last and next N/2 subpixels (where N is the size of the filter kernel used for antialiasing) which map directly to the display. I called this alphaMap, in which in i blend the kernel, gamma and b/w intensity of the pixel. Whenever I move to the next pixel, I then rasterize the previous points, mapping the alphaMap to the current colour, and the alphablend it to the destination surface.  Early version here can be seen here: <a href=\"http://pastebin.com/SP2PW6rr\" rel=\"nofollow noreferrer\">pastebin.com/SP2PW6rr</a>"}], "tags": [], "owner": {"reputation": 9, "user_id": 2433616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644b27decd74d292490db0c5248a77a6?s=128&d=identicon&r=PG", "display_name": "JanSordid", "link": "https://stackoverflow.com/users/2433616/jansordid"}, "is_accepted": false, "score": 0, "last_activity_date": 1424362641, "creation_date": 1424362641, "answer_id": 28611341, "question_id": 28203744, "link": "https://stackoverflow.com/questions/28203744/subpixel-rasterization-on-opaque-backgrounds/28611341#28611341", "title": "Subpixel rasterization on opaque backgrounds", "body": "<p>Tonight I awoke and could not fall asleep again.\nI could not let all those brain energy get to waste and stumbled over exactly the same problem.</p>\n\n<p>I came up with two different solutions, both unvalidated.</p>\n\n<ul>\n<li>You have to use a 3 channel alpha mask, one for each subpixel, blend each color with its own alpha.</li>\n<li>You can use the color channels each as alpha mask if you only render gray/BW font (1-color_value if you draw dark text on a light background color), again applying each color individualy. The color value itself should be considered 1 in this case.</li>\n</ul>\n\n<p>Hope this helps a little, I filled ~2h of insomnia with it.</p>\n\n<p>~ Jan</p>\n"}], "owner": {"reputation": 1009, "user_id": 1287254, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4dd03f60239dd2c98ec3320d1876e78f?s=128&d=identicon&r=PG", "display_name": "Shaggi", "link": "https://stackoverflow.com/users/1287254/shaggi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1424362641, "creation_date": 1422484441, "question_id": 28203744, "link": "https://stackoverflow.com/questions/28203744/subpixel-rasterization-on-opaque-backgrounds", "title": "Subpixel rasterization on opaque backgrounds", "body": "<p>I'm working on a subpixel rasterizer. The output is to be rendered on an opaque bitmap. I've come so far as to correctly render text white-on-black (because i can basically disregard the contents of the bitmap).</p>\n\n<p>The problem is the blending. Each actually rendered pixel affects it's neighbours intensity levels as well, because of the lowpass filtering technique (I'm using the 5-tap fir - 1/9, 2/9, 3/9 etc.), and additionally alpha levels of the pixel to be rendered. This result then has to be alphablended onto the destination image, which is where the problem occurs... </p>\n\n<p>The result of the pixels interactions has to be added together to achieve correct luminance - and the alphablended to the destination - but if I rasterize one pixel at a time, I 'loose' the information of the previous pixels, hence, further addition may lead to overflowing.</p>\n\n<p>How is this supposed to be done? The only solution I can imagine would work is, to render to a separate image with alpha channels for each colour, then some complex blending algorithm, and lastly alphablend it to the destination.. Somehow.</p>\n\n<p>However, I couldn't find any resources on how to actually do it - besides the basic concepts of lcd subpixel rendering and nice closeup images of monitor pixels. If anyone can help me along the way, I would be very grateful.</p>\n"}, {"tags": ["c++", "templates", "c++11", "language-lawyer", "c++14"], "comments": [{"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "edited": false, "score": 0, "creation_date": 1422486575, "post_id": 28203734, "comment_id": 44774292, "body": "Related: <a href=\"http://stackoverflow.com/questions/3796558/difference-between-template-name-and-template-id\" title=\"difference between template name and template id\">stackoverflow.com/questions/3796558/&hellip;</a>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422497589, "post_id": 28203734, "comment_id": 44777387, "body": "Last component of the <i>qualified-id</i>, if one is used."}], "answers": [{"comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1437893461, "post_id": 28959123, "comment_id": 51215717, "body": "Interestingly, there is a specific grammatical rule <i>explicit-specialization</i> alongside the rule <i>template-declaration</i>. So <code>template&lt;&gt; void foo&lt;int&gt;() {}</code> does use a <i>template-id</i> as the last part of the declarator, but it&#39;s not a <i>template-declaration</i>."}], "tags": [], "owner": {"reputation": 5696, "user_id": 4618482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4812a270499aa3e682f6dbe84b5243a3?s=128&d=identicon&r=PG", "display_name": "joki", "link": "https://stackoverflow.com/users/4618482/joki"}, "is_accepted": false, "score": 2, "last_activity_date": 1425976994, "last_edit_date": 1425976994, "creation_date": 1425976345, "answer_id": 28959123, "question_id": 28203734, "link": "https://stackoverflow.com/questions/28203734/what-is-the-meaning-of-the-words-last-component-in-14-2/28959123#28959123", "title": "What is the meaning of the words &quot;last component&quot; in &#167;14/2?", "body": "<p>In your quote from the grammar, you have omitted the production for <em>qualified-id</em> which expands to a sequence of <em>unqualified-id</em>s, and <strong>last component</strong> refers to the last of those <em>unqualified-id</em>s.</p>\n\n<p>The Standard is telling you that\na function template declaration cannot end in a <em>template-id</em>\nin contrast to a partial specialisation of a class template \n</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T&gt; class A {};\ntemplate&lt;typename T&gt; class A&lt;std::vector&lt;T&gt; &gt; {}; // ends with simple-template-id\n</code></pre>\n\n<p>even though some components of a function template's <em>qualified-id</em> could be <em>template-id</em>s, as in</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename&gt;\nstruct A {\n    void f();\n};\ntemplate&lt;typename T&gt;\nvoid A&lt;T&gt;::f() {} // cannot end with template-id\n</code></pre>\n"}], "owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1437854947, "creation_date": 1422484406, "last_edit_date": 1437854947, "question_id": 28203734, "link": "https://stackoverflow.com/questions/28203734/what-is-the-meaning-of-the-words-last-component-in-14-2", "title": "What is the meaning of the words &quot;last component&quot; in &#167;14/2?", "body": "<p>\u00a714/2 (emphasis mine)</p>\n\n<blockquote>\n  <p>A <em>template-declaration</em> can appear only as a namespace scope or class\n  scope declaration. In a function template declaration, the <strong>last\n  component</strong> of the <em>declarator-id</em> shall not be a <em>template-id</em>. [ Note:\n  That last component may be an <em>identifier</em>, an <em>operator-function-id</em>,\n  a <em>conversion-function-id</em>, or a <em>literal-operator-id</em>. In a class\n  template declaration, if the class name is a <em>simple-template-id</em>, the\n  declaration declares a class template partial specialization (14.5.5).\n  \u2014end note ]</p>\n</blockquote>\n\n<p>Note that <em>declarator-id</em> is defined in the grammar (N4140) as shown below:</p>\n\n<p><em>declarator-id</em>:<br>\n&nbsp;&nbsp;&nbsp;&nbsp;...<sub><em>opt</em></sub>&nbsp;&nbsp;&nbsp;<em>id-expression</em>  </p>\n\n<p><em>id-expression</em>:<br>\n&nbsp;&nbsp;&nbsp;&nbsp;<em>unqualified-id</em><br>\n&nbsp;&nbsp;&nbsp;&nbsp;<em>qualified-id</em>  </p>\n\n<p><em>unqualified-id</em>:<br>\n&nbsp;&nbsp;&nbsp;&nbsp;<em>identifier</em><br>\n&nbsp;&nbsp;&nbsp;&nbsp;<em>operator-function-id</em><br>\n&nbsp;&nbsp;&nbsp;&nbsp;<em>conversion-function-id</em><br>\n&nbsp;&nbsp;&nbsp;&nbsp;<em>literal-operator-id</em><br>\n&nbsp;&nbsp;&nbsp;&nbsp;~ <em>class-name</em><br>\n&nbsp;&nbsp;&nbsp;&nbsp;~ <em>decltype-specifier</em><br>\n&nbsp;&nbsp;&nbsp;&nbsp;<em>template-id</em>  </p>\n\n<p>Given that, in a function template declaration, a <em>declarator-id</em> is an identifier, an <em>operator-function-id</em>, a <em>conversion-function-id</em>, or a <em>literal-operator-id</em>, what does it mean the expression \"last component\" above?  </p>\n"}, {"tags": ["c++", "const-cast"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 4, "creation_date": 1422484202, "post_id": 28203635, "comment_id": 44773326, "body": "You said it: it is undefined behaviour."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1422484211, "post_id": 28203635, "comment_id": 44773335, "body": "Do you know what &quot;undefined behavior&quot; means?"}, {"owner": {"reputation": 137, "user_id": 3769397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41175322fcde7d9ace8725c9d9816602?s=128&d=identicon&r=PG&f=1", "display_name": "r0fg1", "link": "https://stackoverflow.com/users/3769397/r0fg1"}, "edited": false, "score": 0, "creation_date": 1422484327, "post_id": 28203635, "comment_id": 44773392, "body": "the question is that the to objects point to the same chunk of memory and have the same type up to cv qualification, yet &quot;hold&quot; different objects..."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1422484417, "post_id": 28203635, "comment_id": 44773437, "body": "Yes. It is <i>undefined behaviour</i>."}, {"owner": {"reputation": 5855, "user_id": 842658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7803680028e20c68aa8d54c935d681fb?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/842658/marc"}, "edited": false, "score": 1, "creation_date": 1422485039, "post_id": 28203635, "comment_id": 44773647, "body": "Check out <a href=\"http://goo.gl/ANHfS7\" rel=\"nofollow noreferrer\">goo.gl/ANHfS7</a> for a comparison between compilers and different optimization flags. While you should <i>never</i> rely on that kind of undefined behaviour, it sure is useful to understand what&#39;s going on."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1422485884, "post_id": 28203635, "comment_id": 44774003, "body": "@r0fg1 they don&#39;t hold different objects"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 3769397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41175322fcde7d9ace8725c9d9816602?s=128&d=identicon&r=PG&f=1", "display_name": "r0fg1", "link": "https://stackoverflow.com/users/3769397/r0fg1"}, "edited": false, "score": 0, "creation_date": 1422485056, "post_id": 28203795, "comment_id": 44773658, "body": "sure! the funny thing was that <code>&amp;x==&amp;rx</code> but <code>*(&amp;x)!=*(&amp;rx)</code>, so that&#39;s would be one explanation, thanks!"}], "tags": [], "owner": {"reputation": 2547, "user_id": 1503898, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/CX5eA.jpg?s=128&g=1", "display_name": "Amxx", "link": "https://stackoverflow.com/users/1503898/amxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1422484710, "creation_date": 1422484710, "answer_id": 28203795, "question_id": 28203635, "link": "https://stackoverflow.com/questions/28203635/address-after-const-cast-of-a-const-variable-in-c/28203795#28203795", "title": "address after const_cast of a *const* variable in C++", "body": "<p>This is clearly an undefined behaviour, therefore the question should, to my understanding, not be why it happens, but rather what makes it happen.</p>\n\n<p>I'm don't know how GCC translates and optimizes code but my best guess would be that in the <code>cout</code> line, <code>x</code> is replaced by is supposedly const value at compile time (which the compiler assumes to be <code>10</code>).</p>\n\n<p>It might be interesting to have a look at the assembly code produced !</p>\n"}, {"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 1, "last_activity_date": 1422485450, "creation_date": 1422485450, "answer_id": 28203941, "question_id": 28203635, "link": "https://stackoverflow.com/questions/28203635/address-after-const-cast-of-a-const-variable-in-c/28203941#28203941", "title": "address after const_cast of a *const* variable in C++", "body": "<p>The compiler (well, clang++ 3.7.0 as of last week) does indeed optimise the \"intention\" of the code, regardless of the legality of it:</p>\n\n<pre><code>    movl    $_ZSt4cout, %edi\n    movl    $10, %esi\n    callq   _ZNSolsEi\n    movq    %rax, %rbx\n    movl    $.L.str, %esi\n    movl    $5, %edx\n    movq    %rbx, %rdi\n    callq   _ZSt16__ostream_insertIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_PKS3_l\n    movl    $11, %esi\n    movq    %rbx, %rdi\n    callq   _ZNSolsEi\n</code></pre>\n\n<p>As always, it's worth noting that the behaviour of undefined behaviour does cover \"does what you think it will do\", as well as \"doesn't do what you think it will do\", and this CERTAINLY applies here. </p>\n\n<p><code>const_cast</code> of a value that was originally const is undefined behaviour, and at that point you have given up all rights to \"sane behaviour\" from the compiler. What happens now is whatever the compiler writer thinks is the right thing - and if that means the value actually got placed in a read-only bit of memory, then your code will not succeed in updating the value. But in this case, it simply optimises <code>x</code> to the constant 10, and <code>rx</code> becomes 11 - since you don't actually \"do\" anything else with <code>x</code> and <code>rx</code>, that's \"fine\" by the compilers standards.</p>\n"}], "owner": {"reputation": 137, "user_id": 3769397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41175322fcde7d9ace8725c9d9816602?s=128&d=identicon&r=PG&f=1", "display_name": "r0fg1", "link": "https://stackoverflow.com/users/3769397/r0fg1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 28203941, "answer_count": 2, "score": 1, "last_activity_date": 1422485450, "creation_date": 1422484006, "question_id": 28203635, "link": "https://stackoverflow.com/questions/28203635/address-after-const-cast-of-a-const-variable-in-c", "title": "address after const_cast of a *const* variable in C++", "body": "<p>I know that the following should be undefined behavior\nsince the original variable is const. How is it possible, however,\nthat the two addresses <code>&amp;x</code> and <code>&amp;rx</code> are the same, yet the values\nwhich they print (I don't say hold, since it simply cannot be),\naren't. Thanks!</p>\n\n<pre><code>const int x=10;\nint&amp; rx = const_cast&lt;int&amp;&gt;(x);\nrx++;\ncout &lt;&lt; x &lt;&lt; \" and \" &lt;&lt; rx &lt;&lt; endl;\ncout &lt;&lt; \"is &amp;x == &amp;xr: \" &lt;&lt; (&amp;x==&amp;rx) &lt;&lt; endl;\n</code></pre>\n\n<p>the output from G++ 4.9 is</p>\n\n<pre><code>10 and 11\nis &amp;x == &amp;xr: 1\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "linker"], "comments": [{"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1422484358, "post_id": 28203630, "comment_id": 44773407, "body": "Are you hesitant to build and check what will happen?"}, {"owner": {"reputation": 85, "user_id": 4042114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0043f17d3bf5e5bf731925af11fc80a4?s=128&d=identicon&r=PG&f=1", "display_name": "Ruijter", "link": "https://stackoverflow.com/users/4042114/ruijter"}, "reply_to_user": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1422484581, "post_id": 28203630, "comment_id": 44773493, "body": "It builds fine, just don&#39;t know if it would be better to copy the header into a seperate directory."}, {"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1422484777, "post_id": 28203630, "comment_id": 44773567, "body": "@Ruijter Keeping header files in separate directory is one of the best practices even though it is not mandatory"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4042114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0043f17d3bf5e5bf731925af11fc80a4?s=128&d=identicon&r=PG&f=1", "display_name": "Ruijter", "link": "https://stackoverflow.com/users/4042114/ruijter"}, "edited": false, "score": 0, "creation_date": 1422484354, "post_id": 28203704, "comment_id": 44773405, "body": "Reviewing myself, this goes for a shared library too?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 85, "user_id": 4042114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0043f17d3bf5e5bf731925af11fc80a4?s=128&d=identicon&r=PG&f=1", "display_name": "Ruijter", "link": "https://stackoverflow.com/users/4042114/ruijter"}, "edited": false, "score": 0, "creation_date": 1422484513, "post_id": 28203704, "comment_id": 44773473, "body": "@Ruijter For shared libraries in native c++ / MSVC you link to the import library not the dll. I used the word native to mean not .NET /CLR."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": true, "score": 2, "last_activity_date": 1422484257, "creation_date": 1422484257, "answer_id": 28203704, "question_id": 28203630, "link": "https://stackoverflow.com/questions/28203630/linking-a-static-library/28203704#28203704", "title": "Linking a static library", "body": "<p>Adding directories to your INCLUDE and LIB path does not influence what actually gets compiled, just the places where it finds headers and libs.</p>\n\n<p>Unless you actually add header1.cpp and header2.cpp to your project source file list, it won't get compiled.</p>\n"}], "owner": {"reputation": 85, "user_id": 4042114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0043f17d3bf5e5bf731925af11fc80a4?s=128&d=identicon&r=PG&f=1", "display_name": "Ruijter", "link": "https://stackoverflow.com/users/4042114/ruijter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 28203704, "answer_count": 1, "score": 1, "last_activity_date": 1422484257, "creation_date": 1422483984, "question_id": 28203630, "link": "https://stackoverflow.com/questions/28203630/linking-a-static-library", "title": "Linking a static library", "body": "<p>When using a third-party library in your project while you have to code, sometimes the source has the following directory pattern.</p>\n\n<pre><code>[dir]........Third Party Project\n  [file]       project.vcxproj\n  [file]       et cetera\n  [dir]........lib\n  [dir]........lib64\n    [file]        project.lib\n  [dir]........source\n    [file]        header1.cpp\n    [file]        header1.h\n    [file]        header2.cpp\n    [file]        header2.h\n</code></pre>\n\n<p>The sources files are next to the header files.</p>\n\n<p>Adding header and lib directories as needed:</p>\n\n<pre><code>`$(ProjectDir)/source/`\n</code></pre>\n\n<p>respectively</p>\n\n<pre><code>`$(ProjectDir)/lib64/`\n</code></pre>\n\n<p>Using #pragma comment to link to the library.</p>\n\n<p>No problem there. But what happens when start building the application. Is it linking to the library or does it build the two files <code>header1.cpp</code> and <code>header2.cpp</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1422483980, "post_id": 28203608, "comment_id": 44773234, "body": "How do I know the first three lines aren&#39;t the ones that are wrong?"}, {"owner": {"reputation": 1092, "user_id": 4052648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f5ee6c09fbdb0b1a28778e00eee1c2f2?s=128&d=identicon&r=PG&f=1", "display_name": "dhint4", "link": "https://stackoverflow.com/users/4052648/dhint4"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1422484129, "post_id": 28203608, "comment_id": 44773287, "body": "because the first word in each line in a string and the second is a double."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1422484224, "post_id": 28203608, "comment_id": 44773343, "body": "So in pseudo-code, read a line, check against your template, accept or reject, repeat until done. I don&#39;t see a real question here."}, {"owner": {"reputation": 1193, "user_id": 2495847, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/88f360c86d84c816902a44326899f7b6?s=128&d=identicon&r=PG", "display_name": "SharpCode", "link": "https://stackoverflow.com/users/2495847/sharpcode"}, "edited": false, "score": 0, "creation_date": 1422484235, "post_id": 28203608, "comment_id": 44773352, "body": "read in the file, split each line based on a delimiter and then check making sure the first variable is a string and the next contains a double."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1422484268, "post_id": 28203608, "comment_id": 44773367, "body": "Probably need more detail, like, what exact characters are (or are not) allowed in the first &quot;string&quot;? Is it letters only, or would something like <code>R1ght</code> be allowed? If it&#39;s letters-only, that&#39;s pretty trivial. If it&#39;s &quot;anything&#39;s allowed before the first white-space, that&#39;s trivial too--but it&#39;s impossible for use to guess which applies."}, {"owner": {"reputation": 1092, "user_id": 4052648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f5ee6c09fbdb0b1a28778e00eee1c2f2?s=128&d=identicon&r=PG&f=1", "display_name": "dhint4", "link": "https://stackoverflow.com/users/4052648/dhint4"}, "edited": false, "score": 0, "creation_date": 1422484365, "post_id": 28203608, "comment_id": 44773412, "body": "But how do I check to make sure that the 2nd word in each line is actually a double? A double could be stuck in a string but a string could not be stuck in a double and would crash the program. Not sure what&#39;s with all the negativity and down voting."}, {"owner": {"reputation": 1193, "user_id": 2495847, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/88f360c86d84c816902a44326899f7b6?s=128&d=identicon&r=PG", "display_name": "SharpCode", "link": "https://stackoverflow.com/users/2495847/sharpcode"}, "edited": false, "score": 0, "creation_date": 1422484534, "post_id": 28203608, "comment_id": 44773484, "body": "Me neither people always downvote to quickly on this site. Check out strtol: <a href=\"http://en.cppreference.com/w/cpp/string/byte/strtol\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/byte/strtol</a>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1422485270, "post_id": 28203608, "comment_id": 44773737, "body": "&quot;How would I solve this?&quot;: no effort shown. There are tons of possible answers: too broad."}], "answers": [{"comments": [{"owner": {"reputation": 1092, "user_id": 4052648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f5ee6c09fbdb0b1a28778e00eee1c2f2?s=128&d=identicon&r=PG&f=1", "display_name": "dhint4", "link": "https://stackoverflow.com/users/4052648/dhint4"}, "edited": false, "score": 0, "creation_date": 1422484965, "post_id": 28203773, "comment_id": 44773624, "body": "Emilo, thank you for your post. I will give this a try and will vote you best answer if it was what I was needing :-)"}], "tags": [], "owner": {"reputation": 18808, "user_id": 924727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bd2dcbbfd05a7c49cd74c7cb93e26488?s=128&d=identicon&r=PG", "display_name": "Emilio Garavaglia", "link": "https://stackoverflow.com/users/924727/emilio-garavaglia"}, "is_accepted": false, "score": 2, "last_activity_date": 1422484569, "creation_date": 1422484569, "answer_id": 28203773, "question_id": 28203608, "link": "https://stackoverflow.com/questions/28203608/checking-if-text-file-is-properly-formatted-in-c/28203773#28203773", "title": "Checking if text file is properly formatted in C++", "body": "<p>if <code>s</code> is the file associated text stream, given <code>std::string wd; double d;</code></p>\n\n<p>an expression like <code>s &gt;&gt; wd &gt;&gt; d</code> will attempt to read the word and the double and evaluates as \"false\" (nullptr, in fact) if it fails somehow.</p>\n\n<p>At that point you should reset the error flag (<code>s.clear()</code>), discard anything to \"\\n\" and continue. ( <code>s.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(),'\\n');</code> )</p>\n\n<p>You can count the read lines, as save the line number of the ones that makes the read failure.</p>\n"}, {"comments": [{"owner": {"reputation": 1092, "user_id": 4052648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f5ee6c09fbdb0b1a28778e00eee1c2f2?s=128&d=identicon&r=PG&f=1", "display_name": "dhint4", "link": "https://stackoverflow.com/users/4052648/dhint4"}, "edited": false, "score": 0, "creation_date": 1422488665, "post_id": 28203990, "comment_id": 44774974, "body": "Absolutely exactly what I was looking for. I didn&#39;t know this existed in C++. Thank you!"}], "tags": [], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": true, "score": 1, "last_activity_date": 1422485658, "creation_date": 1422485658, "answer_id": 28203990, "question_id": 28203608, "link": "https://stackoverflow.com/questions/28203608/checking-if-text-file-is-properly-formatted-in-c/28203990#28203990", "title": "Checking if text file is properly formatted in C++", "body": "<p>I thing <a href=\"http://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow\">regular expressions</a> is best solution for your problem.</p>\n\n<p>They are supported by C++11:</p>\n\n<pre><code>#include &lt;regex&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nauto lines = std::vector&lt;std::string&gt; {\n    \"WordOne        2\",\n    \"WordTwo        10.1\",\n    \"WordThree      0.38\",\n    \"WordThree      0.\",\n    \"WordFive      WordFive\"\n};\n\nint main() {\n    std::regex re(\"\\\\w+\\\\s+\\\\d+\\\\.?\\\\d*\");\n    for(auto line : lines) {\n        if(!std::regex_match(line, re)) {\n            std::cout &lt;&lt; \"Line: \\\"\" &lt;&lt; line\n                    &lt;&lt; \"\\\" is incorrectly formatted\" &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre>\n\n<p>This code allows various forms of fractional floating point syntax. You may want to make it more strict or allow exponential forms - just modify regex :)</p>\n"}], "owner": {"reputation": 1092, "user_id": 4052648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f5ee6c09fbdb0b1a28778e00eee1c2f2?s=128&d=identicon&r=PG&f=1", "display_name": "dhint4", "link": "https://stackoverflow.com/users/4052648/dhint4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 0, "accepted_answer_id": 28203990, "answer_count": 2, "score": -2, "last_activity_date": 1422485658, "creation_date": 1422483868, "question_id": 28203608, "link": "https://stackoverflow.com/questions/28203608/checking-if-text-file-is-properly-formatted-in-c", "title": "Checking if text file is properly formatted in C++", "body": "<p>How can I check that every line in the file is correctly formatted?</p>\n\n<p>For example, lets say I have this text file\"</p>\n\n<pre><code>WordOne        0.2\nWordTwo        0.1\nWordThree      0.38\nWordFour      WordFour   &lt;--- This would be incorrectly formatted.\n</code></pre>\n\n<p>The first word should be a string and the second should be a double. How can I properly check this?</p>\n"}, {"tags": ["python", "c++", "swig"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1422517372, "post_id": 28203576, "comment_id": 44783318, "body": "Can you explain a little more about what your function is meant to do, with a minimal complete example? I&#39;m sure there&#39;s a good work around but I don&#39;t quite understand your use cases well enough to answer."}, {"owner": {"reputation": 4970, "user_id": 2140449, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/97251fac343628ee1aad92cc3da39d99?s=128&d=identicon&r=PG", "display_name": "DarioP", "link": "https://stackoverflow.com/users/2140449/dariop"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1432916741, "post_id": 28203576, "comment_id": 49142698, "body": "@Flexo I got the same error, just put an <code>std::unique_ptr&lt;Tcl_Interp, decltype(&amp;Tcl_DeleteInterp)&gt; interp;</code> in a class and SWIG failed to parse it. I do not even need it to be exported, but the <code>%ignore</code> directive is not enough..."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "reply_to_user": {"reputation": 4970, "user_id": 2140449, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/97251fac343628ee1aad92cc3da39d99?s=128&d=identicon&r=PG", "display_name": "DarioP", "link": "https://stackoverflow.com/users/2140449/dariop"}, "edited": false, "score": 0, "creation_date": 1432916986, "post_id": 28203576, "comment_id": 49142840, "body": "@DarioP %ignore won&#39;t work because it&#39;s a parse error, not a wrapper error. There is probably a workaround possible, but it needs an MCVE to answer, because  the way to wrap it depends on what you want to do with the function."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1432917193, "post_id": 28203576, "comment_id": 49142950, "body": "If your reference to %ignore comes from my answer at <a href=\"http://stackoverflow.com/a/30411997/168175\">stackoverflow.com/a/30411997/168175</a> then you missed the most important part of that hack which was the <code>#define auto</code> bit."}, {"owner": {"reputation": 4970, "user_id": 2140449, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/97251fac343628ee1aad92cc3da39d99?s=128&d=identicon&r=PG", "display_name": "DarioP", "link": "https://stackoverflow.com/users/2140449/dariop"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1432975544, "post_id": 28203576, "comment_id": 49161005, "body": "@Flexo you are right, the source of the problem is that the argument of <code>decltype</code> is an expression. The %ignore came from the top of my head, thanks for the reference to the other question!"}], "owner": {"reputation": 91, "user_id": 4505039, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dbtfN7B-KWE/AAAAAAAAAAI/AAAAAAAAABI/yKZc9dkqaa8/photo.jpg?sz=128", "display_name": "Fernanda Monteiro", "link": "https://stackoverflow.com/users/4505039/fernanda-monteiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "closed_date": 1432917234, "answer_count": 0, "score": 1, "last_activity_date": 1422483721, "creation_date": 1422483721, "question_id": 28203576, "link": "https://stackoverflow.com/questions/28203576/parsing-c-decltype-expression-into-python-via-swig", "closed_reason": "Duplicate", "title": "Parsing C++ decltype() expression into Python via SWIG", "body": "<p>I am trying to parse a C++ code into Python using SWIG. Running the interface file I get the following error: </p>\n\n<p>../compat/option.hpp:220: Error: Syntax error in input(3).</p>\n\n<p>So this is the code for the line specified</p>\n\n<pre><code>template&lt;class F&gt;\nauto move_map(F&amp;&amp; f) -&gt; Option&lt;decltype(std::forward&lt;F&gt;(f)(std::move(*repr.ptr())))&gt;\n{\n    if (repr.is_some())\n        {\n            auto rv = Some(std::forward&lt;F&gt;(f)(std::move(*repr.ptr())));\n            do_destruct();\n            return rv;\n        }\n    else\n        {\n            return None;\n        }\n}\n</code></pre>\n\n<p>I took some time to understand but I finally found that decltype expressions are unsupported yet by SWIG. </p>\n\n<p><a href=\"http://www.swig.org/Doc3.0/CPlusPlus11.html#CPlusPlus11_type_inference\" rel=\"nofollow\">http://www.swig.org/Doc3.0/CPlusPlus11.html#CPlusPlus11_type_inference</a></p>\n\n<p>So I'm think about any tips on how to strip this code so it could get parsed. I'm not any pro with C++ (actually I'm learning it now) so any help will be welcome.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 34692, "user_id": 356440, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d16fc2844c1d9f8f815f318734554266?s=128&d=identicon&r=PG", "display_name": "Stephane Rolland", "link": "https://stackoverflow.com/users/356440/stephane-rolland"}, "edited": false, "score": 2, "creation_date": 1422483361, "post_id": 28203427, "comment_id": 44772965, "body": "and where is the code defining <code>start_helperfunction</code>  ?"}, {"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 1, "creation_date": 1422483404, "post_id": 28203427, "comment_id": 44772983, "body": "The dog ate it. Or he dropped his phone in the toilet and it had the only copy."}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 3, "creation_date": 1422483473, "post_id": 28203427, "comment_id": 44773010, "body": "Also, identifiers starting with <code>__</code> are reserved for use by the implementation. Change <code>__THREADING_H</code> to something else."}], "answers": [{"tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": true, "score": 2, "last_activity_date": 1422483358, "creation_date": 1422483358, "answer_id": 28203476, "question_id": 28203427, "link": "https://stackoverflow.com/questions/28203427/how-to-fix-lnk2019-unresolved-external-symbol/28203476#28203476", "title": "How to fix LNK2019 unresolved external symbol", "body": "<p>You didn't implement <code>start_helperfunction</code>, so the linker can't find it. You need to actually write a static member function with that name. The simplest possible one might look like this:</p>\n\n<pre><code>DWORD WINAPI Threading::start_helperfunction(LPVOID ptr)\n{\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1944429"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 0, "accepted_answer_id": 28203476, "answer_count": 1, "score": 0, "last_activity_date": 1422483358, "creation_date": 1422483176, "question_id": 28203427, "link": "https://stackoverflow.com/questions/28203427/how-to-fix-lnk2019-unresolved-external-symbol", "title": "How to fix LNK2019 unresolved external symbol", "body": "<p>I have a very simple threading class I'm using for a project. I've just begin progress on it but I'm stuck because of a LNK2019 error I can't figure out how to fix. I've narrowed down the problem to a single line. Perhaps someone can help guide me on what I need to do to fix it.</p>\n\n<p>The following is the class I'm making:</p>\n\n<pre><code>#ifndef __THREADING_H\n#define __THREADING_H\n\n#include &lt;Windows.h&gt;\n\nclass Threading {\n\npublic:\n\n    virtual void run() = 0;\n\n    void start();\n    void stop();\n\n    bool isStopped();\n    void cleanup();\n\nprivate:\n    bool stopped;\n    HANDLE reference;\n    static DWORD WINAPI start_helperfunction(LPVOID ptr);\n\n};\n\n#endif // __THREADING_H\n</code></pre>\n\n<p>And the line where I'm getting the error is by 2nd line of the <code>start_helperfunction</code>, with the <code>Threading::start_helperfunction</code> below:</p>\n\n<pre><code>#include \"Threading.h\"\n\nvoid Threading::start()\n{\n    stopped = false;\n    reference = CreateThread(NULL, 0, Threading::start_helperfunction, this, NULL, NULL);\n}\n</code></pre>\n\n<p>Finally the error message I'm getting is:</p>\n\n<pre><code>error LNK2019: unresolved external symbol \"private: static unsigned long __stdcall Threading::start_helperfunction(void *)\" (?start_helperfunction@Threading@@CGKPAX@Z) referenced in function \"public: void __thiscall Threading::start(void)\" (?start@Threading@@QAEXXZ)\n</code></pre>\n\n<p>I'm not sure what I've done wrong or what to try. I'm sure it's a simple fix. I'm not the most experienced in C++. </p>\n"}, {"tags": ["c++", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 1481, "user_id": 1103530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5880ea2fb9d6f65e608a59b9cb7615a4?s=128&d=identicon&r=PG", "display_name": "Jimbali", "link": "https://stackoverflow.com/users/1103530/jimbali"}, "edited": false, "score": 0, "creation_date": 1422482611, "post_id": 28203187, "comment_id": 44772627, "body": "You&#39;ll probably have to redraw the background image every time and then draw the rectangle over it."}, {"owner": {"reputation": 1182, "user_id": 3156373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/eNeIA.png?s=128&g=1", "display_name": "a-Jays", "link": "https://stackoverflow.com/users/3156373/a-jays"}, "edited": false, "score": 0, "creation_date": 1422513605, "post_id": 28203187, "comment_id": 44781617, "body": "Which of these is your question - how to draw a single rectangle for every keystroke (ignore multiple registrations of a keypress), or how to draw a rectangle moving in different frames?"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 1720347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8767bd5b599615b306d847e15920f7d1?s=128&d=identicon&r=PG", "display_name": "Valrandir", "link": "https://stackoverflow.com/users/1720347/valrandir"}, "is_accepted": false, "score": 1, "last_activity_date": 1422483199, "creation_date": 1422483199, "answer_id": 28203438, "question_id": 28203187, "link": "https://stackoverflow.com/questions/28203187/how-to-remove-rectangle-outline-from-image/28203438#28203438", "title": "How to remove rectangle outline from image", "body": "<ol>\n<li>Keep your original image, do not modify it by drawing on it.</li>\n<li>Create a second image, with the same size as the first image.</li>\n<li>To draw your rectangle:\n3.1 Draw your entire original image into your second image.\n3.2 Draw your rectanble into your second image.\n3.3 Draw your second image to the screen or save it to a fine or do with it what you like.</li>\n</ol>\n\n<p>Everytime that you draw a new rectangle, restart steps 3.1 to 3.3\nThis way you will only see one rectangle at a time.</p>\n\n<p>Good luck and have fun! : )</p>\n"}], "owner": {"reputation": 77, "user_id": 1666649, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86741b6a6683764eec6209d6870c6e93?s=128&d=identicon&r=PG", "display_name": "user1666649", "link": "https://stackoverflow.com/users/1666649/user1666649"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422483199, "creation_date": 1422482222, "question_id": 28203187, "link": "https://stackoverflow.com/questions/28203187/how-to-remove-rectangle-outline-from-image", "title": "How to remove rectangle outline from image", "body": "<p>I wrote some short program which draw a rectangle on image and then after press key shift to right and draw again. The result is that I receive a lot of rectangles on image but I want to draw only one rectangle, press key and draw new shifted rectangle without the previous. What can I do? Maybe there is any function which remove previous cvrectangle??To draw rectangle I use:</p>\n\n<pre><code>cv::rectangle( src,\n               cvPoint(x,y),\n               cvPoint(x+50,y+50),\n               CV_RGB(10,10,10), 5, 8\n             );\n</code></pre>\n"}, {"tags": ["c++", "gcc", "macros"], "comments": [{"owner": {"reputation": 3160, "user_id": 42588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9939e10c219a4ee7b7e6dd77238ab46b?s=128&d=identicon&r=PG", "display_name": "Steven Behnke", "link": "https://stackoverflow.com/users/42588/steven-behnke"}, "edited": false, "score": 0, "creation_date": 1422481978, "post_id": 28203080, "comment_id": 44772299, "body": "That&#39;s a Windows thing it does for methods for Unicode support. GetMessageA() is the ANSI version where GetMessageW() would be the wide string version."}, {"owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "reply_to_user": {"reputation": 3160, "user_id": 42588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9939e10c219a4ee7b7e6dd77238ab46b?s=128&d=identicon&r=PG", "display_name": "Steven Behnke", "link": "https://stackoverflow.com/users/42588/steven-behnke"}, "edited": false, "score": 0, "creation_date": 1422482033, "post_id": 28203080, "comment_id": 44772323, "body": "I am not calling <code>GetMessageA</code> I am trying to call my own method called &#39;GetMessage`"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1422482183, "post_id": 28203080, "comment_id": 44772392, "body": "windows.h has an enormous number of macros that define FuncThing as FuncThingA or FuncThingW depending on whether or not UNICODE is defined"}, {"owner": {"reputation": 3160, "user_id": 42588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9939e10c219a4ee7b7e6dd77238ab46b?s=128&d=identicon&r=PG", "display_name": "Steven Behnke", "link": "https://stackoverflow.com/users/42588/steven-behnke"}, "edited": false, "score": 0, "creation_date": 1422482279, "post_id": 28203080, "comment_id": 44772451, "body": "I realize you&#39;re not calling it, but Windows.h has a system method called GetMessage(). Try renaming it and see that it works fine.  Or don&#39;t include Windows.h"}], "answers": [{"tags": [], "owner": {"reputation": 52926, "user_id": 11898, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5757e5b62594659eedfef289274502a3?s=128&d=identicon&r=PG", "display_name": "Scott Langham", "link": "https://stackoverflow.com/users/11898/scott-langham"}, "is_accepted": true, "score": 1, "last_activity_date": 1422482023, "creation_date": 1422482023, "answer_id": 28203135, "question_id": 28203080, "link": "https://stackoverflow.com/questions/28203080/possible-conflict-between-a-macro-and-a-method/28203135#28203135", "title": "Possible Conflict between a macro and a method", "body": "<p>The best solution I've found is to just rename your methods to things that don't clash with the windows macros.</p>\n\n<p>You will probably find in the .cpp at the point of call that the macro for GetMessage is in-effect.</p>\n"}], "owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "closed_date": 1422482328, "accepted_answer_id": 28203135, "answer_count": 1, "score": 0, "last_activity_date": 1422482023, "creation_date": 1422481832, "question_id": 28203080, "link": "https://stackoverflow.com/questions/28203080/possible-conflict-between-a-macro-and-a-method", "closed_reason": "Duplicate", "title": "Possible Conflict between a macro and a method", "body": "<p>I think there is a possible conflict between a method and a windows macro.\nI am using cygwin gcc and this is what my conflict looks like</p>\n\n<pre><code>File : MRepository.h\n#pragma once\n\n#ifdef  GetMessage\n#undef  GetMessage\n#endif  //GetMessage\n\nclass MRepository\n{\npublic:\n\n    std::wstring GetMessage(const std::wstring &amp;key) const;\n    ...\n    ....\n\n};\n\nFile : MRepository.cpp\nbool MRepository::SomeMethod(boost::shared_ptr&lt;foo&gt; &amp;nd)\n{\n        std::wstring type = this-&gt;GetMessage(L\"SomeData\"); //Error Here : Method not recognized\n        ....\n        ....        \n    return available;\n}\n</code></pre>\n\n<p>This is the error that I get from the method</p>\n\n<pre><code>error: 'class MRepository' has no member named 'GetMessageA'|\n</code></pre>\n\n<p>Notice that I called <code>GetMessage</code> but it thinks the method is called <code>GetMessageA</code> any suggestions on why the compiler thinks I am trying to reference <code>GetMessageA</code> when I clearly typed in <code>GetMessage</code> ?</p>\n"}, {"tags": ["c++", "xcode", "encryption"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1422481353, "post_id": 28202913, "comment_id": 44771971, "body": "When you used the debugger, which line is causing the issue?  If you have not used the debugger, please do so before posting again."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 1720347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8767bd5b599615b306d847e15920f7d1?s=128&d=identicon&r=PG", "display_name": "Valrandir", "link": "https://stackoverflow.com/users/1720347/valrandir"}, "is_accepted": false, "score": 0, "last_activity_date": 1422482315, "creation_date": 1422482315, "answer_id": 28203209, "question_id": 28202913, "link": "https://stackoverflow.com/questions/28202913/c-xcode-program/28203209#28203209", "title": "C++ - Xcode Program", "body": "<p>First I had to add this line to get \"getline\" to be recognised:</p>\n\n<pre><code>#include &lt;string&gt;\n</code></pre>\n\n<p>Then, there was indeed an error with the line:</p>\n\n<pre><code>getline(data, s[i]);\n</code></pre>\n\n<p>This is a compilation error, that function is expecting a stream and a string, but you pass it a stream and a char.\nChanging that line for:</p>\n\n<pre><code>getline(data, s);\n</code></pre>\n\n<p>makes your program compile.</p>\n\n<p>However it probably does not do what you want at this point, since the variable i from the for is being ignored.</p>\n\n<p>I suggest that you check out some documentation on the getline function, then rethink what you want to do and try again.</p>\n\n<p>You can fine some doc here:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/vstudio/2whx1zkx(v=vs.100).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/vstudio/2whx1zkx(v=vs.100).aspx</a></p>\n\n<p>Your other concern was that it output your string many times. This is normal, since your cout statement is inside in your encryption loop.</p>\n\n<p>Move it outside the loop instead, to output it only one time once the encryption loop is done.</p>\n\n<p>It is important to spend the time to understand what each line of your program is doing, and why you need it to achieve your goal.</p>\n\n<p>Also when doing something that we find complicated, its easier to do one small part of it at a time, make sure it works, then continue with the next part.</p>\n\n<p>Good Luck :)</p>\n"}, {"tags": [], "owner": {"reputation": 239, "user_id": 1080762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/93ce87dad662479a2f8e8c2e2ec14276?s=128&d=identicon&r=PG", "display_name": "Erfan", "link": "https://stackoverflow.com/users/1080762/erfan"}, "is_accepted": false, "score": 0, "last_activity_date": 1422482529, "creation_date": 1422482529, "answer_id": 28203262, "question_id": 28202913, "link": "https://stackoverflow.com/questions/28202913/c-xcode-program/28203262#28203262", "title": "C++ - Xcode Program", "body": "<p>Create a temporary string for containing each line and an integer since we're going to find the total number of lines to create an array for all of them.</p>\n\n<pre><code>string temp = \"\";\nint numberOfLines = 0;\n</code></pre>\n\n<p>Now we try to find the total number of lines</p>\n\n<pre><code>while(data.good()) {\n    getline(data, temp);\n    cout &lt;&lt; temp &lt;&lt; endl;\n    numberOfLines++;\n}\n</code></pre>\n\n<p>Now we can create an array for all of the lines. This is a dynamic array which you can read on it for more information.</p>\n\n<pre><code>string * lines = new string[numberOfLines];\n</code></pre>\n\n<p>Now is the time to roll back and read encrypt all the lines. But first we have to go back to first position of file. That's why we use <code>seekg</code></p>\n\n<pre><code>data.seekg(data.beg);\n</code></pre>\n\n<p>For each line we read, we'll put in the array and loop through each character, encrypt it and then show the whole sentence.</p>\n\n<pre><code>int i = 0;\nwhile (data.good()) {\n    getline(data, lines[i]);\n    i++;\n    for (int j = 0; lines[i].size(); j++ ) {\n        lines[i].at(j) += 2;\n    }\n    cout &lt;&lt; lines[i] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Voila!</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2448615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be01215aa87d0c9de659fe9af1f3035?s=128&d=identicon&r=PG", "display_name": "user2448615", "link": "https://stackoverflow.com/users/2448615/user2448615"}, "is_accepted": false, "score": 1, "last_activity_date": 1422482636, "creation_date": 1422482636, "answer_id": 28203296, "question_id": 28202913, "link": "https://stackoverflow.com/questions/28202913/c-xcode-program/28203296#28203296", "title": "C++ - Xcode Program", "body": "<p>In the code below you already reach the end of the stream, and store the last line on the string s.</p>\n\n<p>while(!data.eof()){</p>\n\n<pre><code>getline(data,s);\ncout&lt;&lt; s &lt;&lt; endl;\n</code></pre>\n\n<p>}</p>\n\n<p>My suggestion is that you use a list of strings.</p>\n\n<p>vector&lt; string > s;</p>\n\n<p>string tmp;</p>\n\n<p>while(!data.eof()){</p>\n\n<pre><code>getline(data,tmp);\ns.push_back(tmp);\ncout&lt;&lt; s &lt;&lt; endl;\n</code></pre>\n\n<p>}</p>\n\n<p>The next step you loop through the list and do the encryption</p>\n\n<p>for(i=0; i &lt; s.size(); i++) </p>\n\n<p>{</p>\n\n<pre><code>// encrypt s[i]\n</code></pre>\n\n<p>}</p>\n\n<p>Hope this helped!</p>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 1241837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z3IgO.jpg?s=128&g=1", "display_name": "Jon Fast", "link": "https://stackoverflow.com/users/1241837/jon-fast"}, "is_accepted": false, "score": 0, "last_activity_date": 1422484401, "last_edit_date": 1422484401, "creation_date": 1422482655, "answer_id": 28203300, "question_id": 28202913, "link": "https://stackoverflow.com/questions/28202913/c-xcode-program/28203300#28203300", "title": "C++ - Xcode Program", "body": "<p><code>s[i]</code> is a character in the string (actually, a character reference), not the string object itself. <code>string::operator[]</code> returns a <code>char&amp;</code> in the docs. See <a href=\"http://www.cplusplus.com/reference/string/string/getline/\" rel=\"nofollow\">here</a>.</p>\n\n<p>Consider declaring a <code>std::vector&lt;string&gt; string_array;</code> and then use the <code>string_array.push_back(data)</code> member function to append strings from the file onto the vector. Use a for loop to iterate through the vector at a later time with a <code>vector&lt;string&gt;::iterator</code> or the <code>std::vector::size</code> function to get the length of the vector for a traditional for loop (via a call to <code>string_array.size()</code>). Use the square brackets to get each string from the vector (<code>string_array[0 or 1 or etc.]</code>). </p>\n\n<p>Get characters from each string in the vector by using something like <code>string_array[n][m]</code> for the <em>mth</em> character of the <em>nth</em> string. Iterating over each character should be as simple as using the <code>string::length</code> member function to get the string length, and then another for loop. </p>\n\n<p>Also, <code>std::cout &lt;&lt; s &lt;&lt; std::endl</code> is being used in the wrong places. To output each character, try <code>std::cout &lt;&lt; s[i] &lt;&lt; std::endl</code> instead, or <code>printf(\"%c\", s[i])</code>, whichever you like.</p>\n\n<p>I'd suggest not using an array to hold strings from the file because you don't know what the array's length will be at runtime (the file size could be unbounded), so a vector is better suited for this case.</p>\n\n<p>Finally, if you need code, there's a beginner's forum post <a href=\"http://www.cplusplus.com/forum/beginner/55949/\" rel=\"nofollow\">here</a> that I think will help you out. It has a lot of code like yours, but you'll have to modify it for your purposes.</p>\n\n<p>Finally, please use:</p>\n\n<pre><code>std::someCPPLibraryFunction(args);\n</code></pre>\n\n<p>instead of...</p>\n\n<pre><code>using namespace std;\nsomeCPPLibraryFunction(args);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4044671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec943e1530dd59909d04a25dc10b077a?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4044671/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1422484401, "creation_date": 1422481142, "question_id": 28202913, "link": "https://stackoverflow.com/questions/28202913/c-xcode-program", "title": "C++ - Xcode Program", "body": "<p>I am writing a program that extracts data from a text file and encrypts it. I am having some trouble with this. First of all there is an error at the getline(data,s[i]) part. Also the text file has two sentences but it only encrypts the second sentence. The other issue with that is It encrypts one letter at a time and outputs the sentence every time. It should output just the sentence encrypted.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;istream&gt;\nusing namespace std;\n\nint main(){\n//Declare Variables\nstring s;\n\nifstream data;\n\n//Uses Fstream to open text file\ndata.open (\"/Users/MacBookPro/Desktop/data.txt\");\n\n// Use while loop to extract the data from the text file\n    while(!data.eof()){\n    getline(data,s);\n        cout&lt;&lt; s &lt;&lt; endl;\n    }\n//Puts the data from the text file into a string array\n\nfor(int i = 0; data.good(); i++){\n    getline(data, s[i]);\n    cout&lt;&lt; s &lt;&lt;endl;\n}\n\n// encrypts the string\nif(data.is_open()){\n    for(int i = 0; i &lt; s.length();i++){\n\n        s[i] += 2;\n\n\n        cout &lt;&lt; s &lt;&lt; endl;\n\n    }\n}\n</code></pre>\n\n<p>return 0;\n}</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 86, "user_id": 3653949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987b70b5bb344ca0f60abd8d91a13b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Martijn Pot", "link": "https://stackoverflow.com/users/3653949/martijn-pot"}, "edited": false, "score": 0, "creation_date": 1422483240, "post_id": 28203099, "comment_id": 44772911, "body": "How can this be done when the constructors of Car and Airplane take different arguments?"}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "reply_to_user": {"reputation": 86, "user_id": 3653949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987b70b5bb344ca0f60abd8d91a13b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Martijn Pot", "link": "https://stackoverflow.com/users/3653949/martijn-pot"}, "edited": false, "score": 0, "creation_date": 1422484433, "post_id": 28203099, "comment_id": 44773441, "body": "How do you intend to use the factory in that case? Would <code>Input</code> have all that they need?"}, {"owner": {"reputation": 86, "user_id": 3653949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987b70b5bb344ca0f60abd8d91a13b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Martijn Pot", "link": "https://stackoverflow.com/users/3653949/martijn-pot"}, "edited": false, "score": 0, "creation_date": 1422485156, "post_id": 28203099, "comment_id": 44773689, "body": "Yes. Something like: if (input.car()) return Car(input.car()-&gt;nrWheels, input.car()-&gt;nrCylinders);"}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "reply_to_user": {"reputation": 86, "user_id": 3653949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987b70b5bb344ca0f60abd8d91a13b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Martijn Pot", "link": "https://stackoverflow.com/users/3653949/martijn-pot"}, "edited": false, "score": 0, "creation_date": 1422485235, "post_id": 28203099, "comment_id": 44773725, "body": "You should adapt your classes to have a constructor taking <code>Input</code> and they should handle these details."}, {"owner": {"reputation": 86, "user_id": 3653949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987b70b5bb344ca0f60abd8d91a13b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Martijn Pot", "link": "https://stackoverflow.com/users/3653949/martijn-pot"}, "edited": false, "score": 0, "creation_date": 1422599052, "post_id": 28203099, "comment_id": 44823152, "body": "I was a bit too fast. Input does not container everything. I edited my question tot make it more clear."}], "tags": [], "owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1422481881, "creation_date": 1422481881, "answer_id": 28203099, "question_id": 28202817, "link": "https://stackoverflow.com/questions/28202817/split-factory-pattern-over-multiple-libraries/28203099#28203099", "title": "Split Factory (pattern) over multiple libraries", "body": "<p>Use something like a <code>std::map&lt;std::string, std::function&lt;System(T)&gt; ctorMap;</code> where <code>T</code> is the type of <code>Input::getNrWheels</code>, inside <code>Factory</code> to hold the appropriate constructors, indexed by strings. Also provide a method, say <code>Factory::Register(std::string, std::function&lt;System(T))</code> which any class can use to register its constructor. So, the TU which defines <code>Airplane</code> should ensure that there is a call, during static initialization, for example, <code>Factory::Register(\"Airplane\", std::make_function(&amp;Airplane::Airplane))</code>.</p>\n\n<p>Also, <code>Factory::build</code> would now look like this:</p>\n\n<pre><code>System&amp; build(const Input&amp; input) {\n     return ctorMap[input.getType()](input.getNrWheels);\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 86, "user_id": 3653949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987b70b5bb344ca0f60abd8d91a13b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Martijn Pot", "link": "https://stackoverflow.com/users/3653949/martijn-pot"}, "edited": false, "score": 0, "creation_date": 1422483111, "post_id": 28203134, "comment_id": 44772861, "body": "In my (over?) simplified example you&#39;re right. In the real code it is not that simple."}], "tags": [], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": false, "score": 0, "last_activity_date": 1422482014, "creation_date": 1422482014, "answer_id": 28203134, "question_id": 28202817, "link": "https://stackoverflow.com/questions/28202817/split-factory-pattern-over-multiple-libraries/28203134#28203134", "title": "Split Factory (pattern) over multiple libraries", "body": "<p>Cut it out completely. The Factory class serves literally no benefit at all when it can only create one kind of thing. Just use a typedef instead to be flexible about what kind of System you are creating.</p>\n"}], "owner": {"reputation": 86, "user_id": 3653949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987b70b5bb344ca0f60abd8d91a13b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Martijn Pot", "link": "https://stackoverflow.com/users/3653949/martijn-pot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1422599122, "creation_date": 1422480791, "last_edit_date": 1422599122, "question_id": 28202817, "link": "https://stackoverflow.com/questions/28202817/split-factory-pattern-over-multiple-libraries", "title": "Split Factory (pattern) over multiple libraries", "body": "<p>As I can't use the real code, I'll try to sketch the situation using a simplified pseudo-code example:</p>\n\n<pre><code>class Factory {\npublic:\n    System&amp; build(const Input&amp; input) {\n        if (input.getType() == \"Airplane\") return Airplane(input.getNrWheels);\n        if (input.getType() == \"Car\") return Car(input.getNrWheels);\n    }\n}\n</code></pre>\n\n<p>Both Car and Airplane inherit from System;</p>\n\n<p>We use this factory in two executables. As executable 1 can be used with Cars and executable 2 can be used with Airplanes. \nWe would like to be able to compile and link executable 1 with Factory and Car and executable 2 with Factory and Airplane. What should we do with the Factory class to enable this?</p>\n\n<p>EDIT: Change after comments/answers</p>\n\n<p>This is less simplified example showing my problem more clearly:</p>\n\n<pre><code>class Factory {\npublic:\n    System&amp; build(const Input&amp; input) {\n        if (input.Airplane()) {\n            Pilot&amp; pilot         = *new Pilot();\n            AutoPilot&amp; autoPilot = *new AutoPilot();\n            return Airplane(input.Airplane()-&gt;NrWheels(), pilot);\n        }\n        if (input.Car()) {\n            Driver&amp; driver = *new Driver();\n            return Car(input.Car()-&gt;NrWheels, driver);\n        }\n    }\n}\n</code></pre>\n\n<p>I like the answer below which suggests the constructor map, but I (think I) need a version which allows different arguments for the constructors.\nI also would like to keep Car and Airplane free of dependency on Input.</p>\n"}, {"tags": ["c++", "c", "atmelstudio"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 2016528, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef4aa43b6bd22783d790249e62fde5b4?s=128&d=identicon&r=PG", "display_name": "bradix_14", "link": "https://stackoverflow.com/users/2016528/bradix-14"}, "edited": false, "score": 0, "creation_date": 1422481828, "post_id": 28202998, "comment_id": 44772226, "body": "Thanks for the suggestion. I&#39;m happy to use whatever will be best. I was just wondering if there was a way to do it in AtmelStudio so I could get to know my way around the IDE for the future when I do more with AVR chips."}], "tags": [], "owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "is_accepted": true, "score": 0, "last_activity_date": 1422482178, "last_edit_date": 1422482178, "creation_date": 1422481507, "answer_id": 28202998, "question_id": 28202777, "link": "https://stackoverflow.com/questions/28202777/use-atmel-studio-as-general-c-compiler/28202998#28202998", "title": "Use Atmel Studio as General C Compiler", "body": "<p>For programs intended to run in a Windows console window, may I suggest using MinGW?  That's a port of the GCC C/C++/etc. compilers used by Atmel Studio, and the Code::Blocks IDE makes a nice match for that under Windows.  I usually don't recommend software bundles, but there's a handy binary download codeblocks.org with a stable Code::Blocks and a recent stable MinGW.</p>\n\n<p><a href=\"http://www.codeblocks.org/downloads/26\" rel=\"nofollow\">Code::Block Binary Downloads</a></p>\n\n<p>As for using AtmelStudio to compile programs to run in a \"cmd\" window, the compilers used will will be some sort of cross-compiler for a CPU and OS that is not what you are running on.  Unless you have an emulator for that target platform that runs in Windows console, then I think you're out of luck.  Embedded systems typically don't have keyboard or console devices, so real programs won't have a classical Unix-style <code>main()</code> function.  You still can write and test functions that don't do console I/O or system calls.  Properly coded, those will recompile without changes to run in either environment.</p>\n"}, {"tags": [], "owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "is_accepted": false, "score": 2, "last_activity_date": 1422481886, "creation_date": 1422481886, "answer_id": 28203101, "question_id": 28202777, "link": "https://stackoverflow.com/questions/28202777/use-atmel-studio-as-general-c-compiler/28203101#28203101", "title": "Use Atmel Studio as General C Compiler", "body": "<p>As far as I know this is not possible. You can only use the simulator to investigate the simulated internal state of a microcontroller and that's it.</p>\n\n<p>There is stuff out there like <a href=\"http://winavr.cvs.sourceforge.net/viewvc/winavr/avrtest/\" rel=\"nofollow\">avrtest</a> or  <a href=\"https://github.com/buserror/simavr\" rel=\"nofollow\">simavr</a> but I'm not sure if this is working for you. </p>\n\n<p>If you just want to learn C before getting into microcontroller development - which is a rather good idea - just get another IDE like <a href=\"https://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers/lunasr1a\" rel=\"nofollow\">Eclipse C/C++</a> and start with that. After you have the basics you will be able to debug a microcontroller using just the AVR simulator as well.</p>\n\n<p><a href=\"http://www.avrfreaks.net/forum/printf-question\" rel=\"nofollow\">Here</a> is another (possible) solution to what you want but I guess that is not an answer you want to get as a beginner.</p>\n"}], "owner": {"reputation": 17, "user_id": 2016528, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef4aa43b6bd22783d790249e62fde5b4?s=128&d=identicon&r=PG", "display_name": "bradix_14", "link": "https://stackoverflow.com/users/2016528/bradix-14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1152, "favorite_count": 0, "accepted_answer_id": 28202998, "answer_count": 2, "score": 0, "last_activity_date": 1422482178, "creation_date": 1422480624, "question_id": 28202777, "link": "https://stackoverflow.com/questions/28202777/use-atmel-studio-as-general-c-compiler", "title": "Use Atmel Studio as General C Compiler", "body": "<p>I'm trying to dig in and learn C. My end goal is to head more toward AVR programming and hardware so I downloaded AtmelStudio.</p>\n\n<p>I'm working through a C primer book and wondering how to write console programs in AtmelStudio?  All the project types seem to be AVR/ARM focused (makes sense) and require me to pick a Device.</p>\n\n<p>Can I use AtmelStudio for just compiling simple programs and running them in a cmd window?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1422480785, "post_id": 28202773, "comment_id": 44771690, "body": "Stop complaining and learn to code. And look up &quot;pass by value&quot;."}, {"owner": {"reputation": 271, "user_id": 4456898, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xahsW.jpg?s=128&g=1", "display_name": "test program", "link": "https://stackoverflow.com/users/4456898/test-program"}, "edited": false, "score": 0, "creation_date": 1422528014, "post_id": 28202773, "comment_id": 44789009, "body": "It is not possible to pass C arrays by value, however it is possible for C++ arrays (std::array) and dynamic arrays (std::vector)."}], "answers": [{"tags": [], "owner": {"reputation": 2108, "user_id": 2159051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G5pGZ.png?s=128&g=1", "display_name": "BWG", "link": "https://stackoverflow.com/users/2159051/bwg"}, "is_accepted": false, "score": 2, "last_activity_date": 1422481265, "creation_date": 1422481265, "answer_id": 28202943, "question_id": 28202773, "link": "https://stackoverflow.com/questions/28202773/manipulating-a-char-array-buffer-from-a-function-in-c/28202943#28202943", "title": "Manipulating a char array buffer from a function in C++", "body": "<p>Here's a real world analogy of what's happening. I write down my phone number on a sheet of paper. I give you a copy of that sheet of paper. On the copy, you erase my number and write your own. Then you call the number that you just wrote.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1422481488, "creation_date": 1422481488, "answer_id": 28202989, "question_id": 28202773, "link": "https://stackoverflow.com/questions/28202773/manipulating-a-char-array-buffer-from-a-function-in-c/28202989#28202989", "title": "Manipulating a char array buffer from a function in C++", "body": "<p>Inside this function:</p>\n\n<pre><code>void manipCharBuffer(char* buffer) {\n   buffer = \"DERP\";\n</code></pre>\n\n<p>the name <code>buffer</code> is a different name to <code>buffer</code> in <code>main</code>. To avoid confusion you could use a different variable name, e.g.:</p>\n\n<pre><code>void manipCharBuffer(char* p_buffer) {\n   p_buffer = \"DERP\";\n</code></pre>\n\n<p>Hopefully this makes it clearly why there is no difference made to <code>main</code> here. You are setting the local pointer <code>p_buffer</code> to point to a different char array. (<code>\"DERP\"</code> is a char array located somewhere in memory).</p>\n\n<p>If you want to copy characters from one char array to another the you have to write code that copies characters; one way would be:</p>\n\n<pre><code>std::strcpy( p_buffer, \"DERP\" );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 4492809, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/592d61e554c9918c5f39efcbd3ee3298?s=128&d=identicon&r=PG&f=1", "display_name": "tba", "link": "https://stackoverflow.com/users/4492809/tba"}, "is_accepted": false, "score": 0, "last_activity_date": 1422481534, "creation_date": 1422481534, "answer_id": 28203005, "question_id": 28202773, "link": "https://stackoverflow.com/questions/28202773/manipulating-a-char-array-buffer-from-a-function-in-c/28203005#28203005", "title": "Manipulating a char array buffer from a function in C++", "body": "<p>In your main function the variable buffer points to an array of 256 characters allocated on the stack. When sending it to the function manipCharBuffer, the address is transfered by value. That means each call for the function manipCharBuffer creates a local variable also named buffer, which is stored in a different place in memory from the variable buffer in the main function but both point to the same place in memory. So the result of the line:</p>\n\n<pre><code>buffer = \"DERP\";\n</code></pre>\n\n<p>is that the local variable in the function now points to a different place in memory where the string-constant \"DERP\" is stored (determined in compile time) without changing that buffer you allocated on the stack, and the buffer variable in main still points to it.</p>\n\n<p>What you tried to do can be achieved as follows:</p>\n\n<pre><code>memcpy(buffer,\"DERP\",sizeof(char)*5); //5 and not 4 to include the null terminator\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 271, "user_id": 4456898, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xahsW.jpg?s=128&g=1", "display_name": "test program", "link": "https://stackoverflow.com/users/4456898/test-program"}, "is_accepted": false, "score": 0, "last_activity_date": 1422529854, "last_edit_date": 1422529854, "creation_date": 1422529505, "answer_id": 28213107, "question_id": 28202773, "link": "https://stackoverflow.com/questions/28202773/manipulating-a-char-array-buffer-from-a-function-in-c/28213107#28213107", "title": "Manipulating a char array buffer from a function in C++", "body": "<p>It is not possible to pass C arrays by value, however it is possible for C++ arrays (std::array) and dynamic arrays (std::vector).if you want to use c++ ,its better to use standard library.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\nusing namespace std ;\n\nvoid manipCharBuffer(char* buffer) {\n\n  strcpy(buffer,\"DERP\");\n  cout &lt;&lt; \"\\n string in called  function  \"&lt;&lt;buffer;\n}\n\nint main() {\n   char buffer[256] = \"JUNK STRING\";\n   cout &lt;&lt; \" string before call is : \" &lt;&lt;buffer;\n\n   char*p = buffer ;\n   manipCharBuffer(p);\n   cout &lt;&lt; \"\\n string after call is  : \" &lt;&lt;buffer;\n\n   return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4500214, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4ec1c848b056fb2d72108150ec278888?s=128&d=identicon&r=PG&f=1", "display_name": "ctbram", "link": "https://stackoverflow.com/users/4500214/ctbram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1422529854, "creation_date": 1422480616, "last_edit_date": 1422481077, "question_id": 28202773, "link": "https://stackoverflow.com/questions/28202773/manipulating-a-char-array-buffer-from-a-function-in-c", "title": "Manipulating a char array buffer from a function in C++", "body": "<p>I want to create a char array, let's call it a buffer. Then I want to pass a pointer to the buffer to various functions and manipulate the buffer. </p>\n\n<p>Here is a snippet that describes the goal:</p>\n\n<pre><code>void manipCharBuffer(char* buffer) {\n   buffer = \"DERP\";\n   cout &lt;&lt; buffer;\n}\n\nint main() {\n   char buffer[256] = \"JUNK STRING\";\n   std::cout &lt;&lt; buffer;\n   manipCharBuffer(buffer);\n   ctd::cout &lt;&lt; buffer;\n}\n</code></pre>\n\n<p>Why doesn't <code>manipCharBuffer</code> alter the buffer? It's like it still only has local scope inside the function.</p>\n"}, {"tags": ["c++", "linux", "multithreading"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3587600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401e769ebe15d14c21316b3a18389cc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3587600", "link": "https://stackoverflow.com/users/3587600/user3587600"}, "edited": false, "score": 0, "creation_date": 1422481160, "post_id": 28202836, "comment_id": 44771865, "body": "Thank you for the response, however the compiler gives me the error &quot;fatal error:  queue:  No such file or directory&quot; whenever I attempt to include (#include &lt;queue&gt;) any STL libraries.  I thought STL was mostly a windows standard and Linux did their own shtick.  If I have to make my own I&#39;ll do so, but I don&#39;t want to if there is some obscure library or I&#39;m just retarded at googling."}, {"owner": {"reputation": 112, "user_id": 839900, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b318dde74289b9eb1cfdb0ecff012742?s=128&d=identicon&r=PG", "display_name": "Austin Cherry", "link": "https://stackoverflow.com/users/839900/austin-cherry"}, "reply_to_user": {"reputation": 3, "user_id": 3587600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401e769ebe15d14c21316b3a18389cc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3587600", "link": "https://stackoverflow.com/users/3587600/user3587600"}, "edited": false, "score": 0, "creation_date": 1422481354, "post_id": 28202836, "comment_id": 44771972, "body": "STL is a part of C++, which works fine on Linux. What complier are you trying to use? g++?"}, {"owner": {"reputation": 3, "user_id": 3587600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401e769ebe15d14c21316b3a18389cc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3587600", "link": "https://stackoverflow.com/users/3587600/user3587600"}, "edited": false, "score": 0, "creation_date": 1422481591, "post_id": 28202836, "comment_id": 44772094, "body": "Thanks to your comment I found my problem.  I&#39;m using Geany to compile on the Pi, and did not realize that its default makefile uses gcc without linking to the standard library.  I feel silly, but thank you."}, {"owner": {"reputation": 112, "user_id": 839900, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b318dde74289b9eb1cfdb0ecff012742?s=128&d=identicon&r=PG", "display_name": "Austin Cherry", "link": "https://stackoverflow.com/users/839900/austin-cherry"}, "reply_to_user": {"reputation": 3, "user_id": 3587600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401e769ebe15d14c21316b3a18389cc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3587600", "link": "https://stackoverflow.com/users/3587600/user3587600"}, "edited": false, "score": 0, "creation_date": 1422481702, "post_id": 28202836, "comment_id": 44772153, "body": "All good. Happens to the best of us. Do you want to accept the answer, since we got it all sorted out?"}], "tags": [], "owner": {"reputation": 112, "user_id": 839900, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b318dde74289b9eb1cfdb0ecff012742?s=128&d=identicon&r=PG", "display_name": "Austin Cherry", "link": "https://stackoverflow.com/users/839900/austin-cherry"}, "is_accepted": true, "score": 0, "last_activity_date": 1422480869, "creation_date": 1422480869, "answer_id": 28202836, "question_id": 28202713, "link": "https://stackoverflow.com/questions/28202713/queue-library-in-arm-linux/28202836#28202836", "title": "Queue Library in ARM Linux", "body": "<p>Would the C++ STL Queue work?</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/queue/queue/\" rel=\"nofollow\">http://www.cplusplus.com/reference/queue/queue/</a></p>\n"}], "owner": {"reputation": 3, "user_id": 3587600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401e769ebe15d14c21316b3a18389cc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3587600", "link": "https://stackoverflow.com/users/3587600/user3587600"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "closed_date": 1422494765, "accepted_answer_id": 28202836, "answer_count": 1, "score": -1, "last_activity_date": 1422480869, "creation_date": 1422480439, "question_id": 28202713, "link": "https://stackoverflow.com/questions/28202713/queue-library-in-arm-linux", "closed_reason": "Not suitable for this site", "title": "Queue Library in ARM Linux", "body": "<p>I'm writing some multi-threading C++ code on the Raspberry Pi, and I need a queue, like a first in first out kind of queue like in the  library that exists on windows standard C++ libraries.  Does such a thing exist?  Googling just turns up stuff about message queues, or this <a href=\"http://linux.die.net/man/3/queue\" rel=\"nofollow\">http://linux.die.net/man/3/queue</a>, and neither seem quite like what I'm looking for.</p>\n"}, {"tags": ["c++", "arrays", "string", "swap"], "comments": [{"owner": {"reputation": 17464, "user_id": 2040251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UsW2G.jpg?s=128&g=1", "display_name": "kraskevich", "link": "https://stackoverflow.com/users/2040251/kraskevich"}, "edited": false, "score": 0, "creation_date": 1422479672, "post_id": 28202438, "comment_id": 44771149, "body": "Do you have any issues with your current solution?"}, {"owner": {"reputation": 50917, "user_id": 947836, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9addee65c2a92be93004ad689a7a415?s=128&d=identicon&r=PG&f=1", "display_name": "jrok", "link": "https://stackoverflow.com/users/947836/jrok"}, "edited": false, "score": 2, "creation_date": 1422479679, "post_id": 28202438, "comment_id": 44771151, "body": "Is this an assignment? Because you can do it in two lines of code if you use <code>std::string</code> instead of raw arrays."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1422529692, "post_id": 28202438, "comment_id": 44790014, "body": "@DavidSchwartz So you leave a comment even more unclear? If you want more detail, just tell him what you want to know. If you think the question is unsavable, vtc. If you think the question is bad, downvote. Your comment just never makes sense. (Yeah, I should probably have flagged it instead of having this discussion, that is my mistake.)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1422532457, "post_id": 28202438, "comment_id": 44791708, "body": "@BaummitAugen The problem, and presumably the reason this was closed, is that there is no actual, answerable question. The title is grammatically a question, but it&#39;s not an answerable question and doesn&#39;t relate to the body in any obvious way. I was hoping the question could be saved by the OP just asking a question at the end, like &quot;Why does this code X and not Y?&quot; or something."}], "answers": [{"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 3, "last_activity_date": 1422480972, "creation_date": 1422480972, "answer_id": 28202868, "question_id": 28202438, "link": "https://stackoverflow.com/questions/28202438/how-do-you-swap-first-half-of-an-array-with-second-half-with-an-unknown-size/28202868#28202868", "title": "How do you swap first half of an array with second half with an unknown size", "body": "<p>While this might be homework, this is a great chance to learn the standard library. What you are doing is just a simple rotation, and there is an <a href=\"http://en.cppreference.com/w/cpp/algorithm/rotate\" rel=\"nofollow\">algorithm</a> for that:</p>\n\n<pre><code>std::rotate(string1, string1 + std::strlen(string1) / 2,\n            string1 + std::strlen(string1));\n</code></pre>\n\n<p>does all you need, throw away your error prone loops! </p>\n\n<p>Also you should use <code>const int size = somesize</code> or better <code>std::string</code> instead of <code>char[]</code>. If you use the latter, use <code>std::string::size</code> instead of <code>strlen</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2368850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9003d68dabfb55c6ad5f378d82fa602?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/2368850/patrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1422481287, "creation_date": 1422481287, "answer_id": 28202951, "question_id": 28202438, "link": "https://stackoverflow.com/questions/28202438/how-do-you-swap-first-half-of-an-array-with-second-half-with-an-unknown-size/28202951#28202951", "title": "How do you swap first half of an array with second half with an unknown size", "body": "<p>Use <em>strlen(string1)</em> to find the length of the variable <em>string1</em>.</p>\n\n<p>Maybe you should consider using c++ features to do the work you want.</p>\n\n<p>Using <em>std::string</em> class would be more flexible than the <em>char array</em> method since it can read any number of character and it is not delimited by the <em>size</em> variable.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main() {\n\n  string string1;\n  getline(cin, string1); // Here, string 1 contains all the characters until a newline character is found.\n\n  // Get the string length\n  int n = string1.length();\n\n  // Swaps the first half with the second half.\n  string swapped_string = string1.substr(n/2, n/2 + 1) + string1.substr(0, n/2);\n\n  cout &lt;&lt; swapped_string &lt;&lt; endl;\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>There are a few problems with your code snippet that you may not have considered.</p>\n\n<ol>\n<li>Variable <em>size</em> is not initialized.</li>\n<li>You can't define a fixed size array with a non-const variable. (<em>char string1[size]</em>)</li>\n<li><em>strcpy()</em> will copy beyond the allocated memory for <em>string1</em> if <em>(strlen(string1) > size/2)</em> resulting in a buffer overflow.</li>\n<li>You should use the statement <em>break;</em> to terminate the <em>for()</em> loop when you enter your <em>if()</em> statement because you then are done swapping the first half with the second half of the array.</li>\n</ol>\n"}], "owner": {"reputation": 23, "user_id": 4459624, "user_type": "registered", "profile_image": "https://graph.facebook.com/755281954/picture?type=large", "display_name": "babygoalie29", "link": "https://stackoverflow.com/users/4459624/babygoalie29"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2187, "favorite_count": 0, "closed_date": 1422488604, "accepted_answer_id": 28202868, "answer_count": 2, "score": -3, "last_activity_date": 1422481287, "creation_date": 1422479391, "question_id": 28202438, "link": "https://stackoverflow.com/questions/28202438/how-do-you-swap-first-half-of-an-array-with-second-half-with-an-unknown-size", "closed_reason": "Needs details or clarity", "title": "How do you swap first half of an array with second half with an unknown size", "body": "<p>I am trying to swap the first half of an array of some string obtained by the user with the second half without knowing the size of the array. Here is my attempt.   </p>\n\n<pre><code>#include &lt;iostream&gt; \n#include &lt;cstring&gt;\n\nusing namespace std;\n\nint main() {\n\nint size;\n\nchar string1[size]; \nchar *string1Ptr;\n\ncout &lt;&lt; \"Please enter a string: \";\ncin.getline(string1, size);\n\nfor (int i = 0; i &lt; size; i++){\n    string1Ptr = &amp;string1[i];\n    int n = 0;\n    if(*string1Ptr == '\\0') {\n        n = i / 2;\n        strcpy(string1, string1+n);\n        strcat(string1, string1);\n    }\n}\n\ncout &lt;&lt; string1 &lt;&lt; endl;\n\nreturn EXIT_SUCCESS; \n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "clang", "llvm", "stdvector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1422477933, "post_id": 28201982, "comment_id": 44770273, "body": "What is the difference between 0 *  N (destruction)  and N * 0 (destruction) ?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1422478017, "post_id": 28201982, "comment_id": 44770318, "body": "Noticing <code>destroy</code> is a noop is easy.  Then we are looping over <code>vector::clear</code>, adding to a (local) pointer, doing a comparison to another (local) pointer to terminate, and doing a noop each step.  The compiler may assume that all loops terminate, so it can prune the loop without proving that the loop condition succeeds, and simply assign the looping pointer to the final pointer.  This assignment isn&#39;t used.  So I can see a set of steps that would do the optimization."}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 0, "creation_date": 1422478049, "post_id": 28201982, "comment_id": 44770341, "body": "@DieterL&#252;cking You still have a loop on top. I understand what you are saying though - this seems like a trivial no-op. However, gcc ends up with a tag-dispatched helper. On seeing that implementation, I was unsure about my conclusion that this is a &quot;trivial no-op&quot;."}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1422478115, "post_id": 28201982, "comment_id": 44770386, "body": "@Yakk @DieterL&#252;cking Perhaps my question really ought to be why gcc bothers with that implementation of <code>std::_Destroy</code>. Why would you say that is? Thanks!"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1422478486, "post_id": 28201982, "comment_id": 44770576, "body": "@Pradhan Well, it works in -O0 builds, while the one reliant on optimization does not."}], "answers": [{"comments": [{"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 0, "creation_date": 1422482110, "post_id": 28203110, "comment_id": 44772361, "body": "Great answer! Thanks."}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "reply_to_user": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 1, "creation_date": 1422552991, "post_id": 28203110, "comment_id": 44805121, "body": "Just for reference, I&#39;ve reported this noncomformance as <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=64865\" rel=\"nofollow noreferrer\">GCC bug #64865</a> despite my belief that it&#39;s probably insignificant. I&#39;ll let the libstdc++ developers decide for themselves."}], "tags": [], "owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "is_accepted": true, "score": 5, "last_activity_date": 1422481922, "creation_date": 1422481922, "answer_id": 28203110, "question_id": 28201982, "link": "https://stackoverflow.com/questions/28201982/vectorclear-in-libc-for-trivially-destructible-types/28203110#28203110", "title": "vector::clear in libc++ for trivially destructible types", "body": "<p>In general, a conforming implementation cannot implement <code>std::vector::clear</code> in O(1) for types with non-trivial destructors.</p>\n\n<p>C++11 [container.requirements.general]/3 states:</p>\n\n<blockquote>\n  <p>For the components affected by this subclause that declare an allocator_type, objects stored in these components shall be constructed using the <code>allocator_traits&lt;allocator_type&gt;::construct</code> function and destroyed using the <code>allocator_traits&lt;allocator_type&gt;::destroy</code> function (20.6.8.2).</p>\n</blockquote>\n\n<p>Since <code>clear</code> must destroy <code>size()</code> elements, it necessarily needs to make O(N) calls to the <code>destroy</code> function of the associated allocator. The end result can, however, effectively take constant time if each of those calls takes zero time to complete (i.e., does nothing).</p>\n\n<p>A quick look at the implementation of <code>_Destroy</code> in <a href=\"https://gcc.gnu.org/viewcvs/gcc/trunk/libstdc%2B%2B-v3/include/bits/stl_construct.h?revision=219188&amp;view=markup\" rel=\"noreferrer\">the current revision of libstdc++'s bits/stl_construct.h</a> shows that it attempts to only perform this optimization when the default allocator is in use:</p>\n\n<pre><code>  /**\n   * Destroy the object pointed to by a pointer type.\n   */\n  template&lt;typename _Tp&gt;\n    inline void\n    _Destroy(_Tp* __pointer)\n    { __pointer-&gt;~_Tp(); }\n\n  template&lt;bool&gt;\n    struct _Destroy_aux\n    {\n      template&lt;typename _ForwardIterator&gt;\n        static void\n        __destroy(_ForwardIterator __first, _ForwardIterator __last)\n      {\n        for (; __first != __last; ++__first)\n          std::_Destroy(std::__addressof(*__first));\n      }\n    };\n\n  template&lt;&gt;\n    struct _Destroy_aux&lt;true&gt;\n    {\n      template&lt;typename _ForwardIterator&gt;\n        static void\n        __destroy(_ForwardIterator, _ForwardIterator) { }\n    };\n\n  /**\n   * Destroy a range of objects.  If the value_type of the object has\n   * a trivial destructor, the compiler should optimize all of this\n   * away, otherwise the objects' destructors must be invoked.\n   */\n  template&lt;typename _ForwardIterator&gt;\n    inline void\n    _Destroy(_ForwardIterator __first, _ForwardIterator __last)\n    {\n      typedef typename iterator_traits&lt;_ForwardIterator&gt;::value_type\n                       _Value_type;\n      std::_Destroy_aux&lt;__has_trivial_destructor(_Value_type)&gt;::\n        __destroy(__first, __last);\n    }\n\n  /**\n   * Destroy a range of objects using the supplied allocator.  For\n   * nondefault allocators we do not optimize away invocation of \n   * destroy() even if _Tp has a trivial destructor.\n   */\n\n  template&lt;typename _ForwardIterator, typename _Allocator&gt;\n    void\n    _Destroy(_ForwardIterator __first, _ForwardIterator __last,\n         _Allocator&amp; __alloc)\n    {\n      typedef __gnu_cxx::__alloc_traits&lt;_Allocator&gt; __traits;\n      for (; __first != __last; ++__first)\n        __traits::destroy(__alloc, std::__addressof(*__first));\n    }\n\n  template&lt;typename _ForwardIterator, typename _Tp&gt;\n    inline void\n    _Destroy(_ForwardIterator __first, _ForwardIterator __last,\n         allocator&lt;_Tp&gt;&amp;)\n    {\n      _Destroy(__first, __last);\n    }\n</code></pre>\n\n<p>but unfortunately doesn't quite get it right since the standard allows specialization of templates in the <code>std</code> namespace that depend on user-defined types ([namespace.std]/1). For example, this program:</p>\n\n<pre><code>struct mytype {\n    int value;\n\n    mytype(int v) : value{v} {}\n\n    operator int() const { return value; }\n};\n\nnamespace std {\ntemplate &lt;&gt;\nstruct allocator&lt;::mytype&gt; {\n    using value_type = mytype;\n\n    allocator() = default;\n    template &lt;typename U&gt;\n    allocator(const allocator&lt;U&gt;&amp;) {}\n\n    mytype* allocate(std::size_t n) {\n        auto result = ::operator new(n * sizeof(mytype));\n        if (!result) throw bad_alloc();\n        return static_cast&lt;mytype*&gt;(result);\n    }\n\n    void deallocate(mytype* ptr, std::size_t) noexcept {\n        ::operator delete(ptr);\n    }\n\n    template &lt;typename U, typename...Args&gt;\n    void construct(U* ptr, Args&amp;&amp;...args) {\n        ::new ((void*)ptr) U(std::forward&lt;Args&gt;(args)...);\n        std::cout &lt;&lt; \"constructed \" &lt;&lt; *ptr &lt;&lt; '\\n';\n    }\n\n    template &lt;typename U&gt;\n    void destroy(U* ptr) noexcept {\n        std::cout &lt;&lt; \"destroying \" &lt;&lt; *ptr &lt;&lt; '\\n';\n        ptr-&gt;~U();\n    }\n\n    friend constexpr bool operator == (const allocator&amp;, const allocator&amp;) noexcept {\n        return true;\n    }\n    friend constexpr bool operator != (const allocator&amp;, const allocator&amp;) noexcept {\n        return false;\n    }\n};\n} // namespace std\n\nint main() {\n    std::vector&lt;mytype&gt;{1,2,3};\n}\n</code></pre>\n\n<p>should output:</p>\n\n<pre>\nconstructed 1\nconstructed 2\nconstructed 3\ndestroying 3\ndestroying 2\ndestroying 1\n</pre>\n\n<p>(the order of element destruction is unspecified, so the \"destroying\" lines can be in any order but must all be present.) libstdc++ incorrectly \"optimizes\" out the calls to <code>allocator&lt;mytype&gt;::construct</code> and <code>allocator&lt;mytype&gt;::destroy</code>, but of course libc++ gets it right (<a href=\"http://coliru.stacked-crooked.com/a/27860e43c400f98e\" rel=\"noreferrer\"><strong>DEMO</strong></a>).</p>\n"}], "owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1005, "favorite_count": 1, "accepted_answer_id": 28203110, "answer_count": 1, "score": 9, "last_activity_date": 1422481922, "creation_date": 1422477566, "question_id": 28201982, "link": "https://stackoverflow.com/questions/28201982/vectorclear-in-libc-for-trivially-destructible-types", "title": "vector::clear in libc++ for trivially destructible types", "body": "<p>Would <code>vector&lt;T, std::allocator&lt;T&gt;&gt;::clear()</code> be <code>O(1)</code> if <code>T</code> is trivially destructible?</p>\n\n<p>gcc's implementation in <code>bits/stl_vector.h</code> calls <code>std::_Destroy</code>(<code>bits/stl_construct.h</code>). This implementation which optimizes for the case of T being trivially destructible through tag-dispatching on <code>std::is_trivially_destructible&lt;T&gt;</code>.</p>\n\n<p>Looking through llvm's(3.5.0) implementation, <code>vector::clear</code> calls <code>std::allocator&lt;T&gt;::destroy</code> on every element, which in turn invokes the destructor.</p>\n\n<pre><code> _LIBCPP_INLINE_VISIBILITY void destroy(pointer __p) {__p-&gt;~_Tp();}\n</code></pre>\n\n<p>Would this end up getting optimized out making <code>vector::clear()</code> <code>O(1)</code> in libc++ as well?</p>\n"}, {"tags": ["c++", "dictionary"], "comments": [{"owner": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "edited": false, "score": 3, "creation_date": 1422477759, "post_id": 28201980, "comment_id": 44770197, "body": "It&#39;s a very bad idea to extend off standard containers."}, {"owner": {"reputation": 1092, "user_id": 4052648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f5ee6c09fbdb0b1a28778e00eee1c2f2?s=128&d=identicon&r=PG&f=1", "display_name": "dhint4", "link": "https://stackoverflow.com/users/4052648/dhint4"}, "reply_to_user": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "edited": false, "score": 0, "creation_date": 1422477942, "post_id": 28201980, "comment_id": 44770277, "body": "I absolutely dislike the way C++ names some of its methods. It makes it much easier for the user to understand what is trying to happen."}, {"owner": {"reputation": 1092, "user_id": 4052648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f5ee6c09fbdb0b1a28778e00eee1c2f2?s=128&d=identicon&r=PG&f=1", "display_name": "dhint4", "link": "https://stackoverflow.com/users/4052648/dhint4"}, "edited": false, "score": 0, "creation_date": 1422478009, "post_id": 28201980, "comment_id": 44770314, "body": "What if I made this CustomClass just a normal object and then added a map&lt;string, double&gt; to it and then implemented my methods this way?"}], "answers": [{"comments": [{"owner": {"reputation": 1092, "user_id": 4052648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f5ee6c09fbdb0b1a28778e00eee1c2f2?s=128&d=identicon&r=PG&f=1", "display_name": "dhint4", "link": "https://stackoverflow.com/users/4052648/dhint4"}, "edited": false, "score": 1, "creation_date": 1422478185, "post_id": 28202083, "comment_id": 44770428, "body": "Thanks for your post Oliver. That is exactly what I am going to do!"}], "tags": [], "owner": {"reputation": 2568, "user_id": 567070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f6ee25a0ae5bb46ed815d24a0cb239a?s=128&d=identicon&r=PG", "display_name": "OlivierLi", "link": "https://stackoverflow.com/users/567070/olivierli"}, "is_accepted": true, "score": 1, "last_activity_date": 1422483881, "last_edit_date": 1422483881, "creation_date": 1422477964, "answer_id": 28202083, "question_id": 28201980, "link": "https://stackoverflow.com/questions/28201980/subclassing-c-map-dictionary/28202083#28202083", "title": "Subclassing C++ Map/Dictionary", "body": "<p>If the Map object you are talking about is <code>std::Map</code> it would be a much better idea to make an <code>std::Map</code> object a member of your <code>MyCustomClass</code> and extend the functionality this way.</p>\n\n<p>Aside from some design reasons that could be considered subjective, the real sin here would be to extend a class that does not have a virtual destructor.</p>\n\n<p>This would mean that when you call <code>delete</code> on one of your <code>MyCustomClass</code> objects the destructor of the parent class would never be called.</p>\n"}, {"comments": [{"owner": {"reputation": 1092, "user_id": 4052648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f5ee6c09fbdb0b1a28778e00eee1c2f2?s=128&d=identicon&r=PG&f=1", "display_name": "dhint4", "link": "https://stackoverflow.com/users/4052648/dhint4"}, "edited": false, "score": 0, "creation_date": 1422478089, "post_id": 28202088, "comment_id": 44770367, "body": "Thanks for your post John. I am not going to extend off the map class. But to answer your question for number three, this method only gets executed if the key exists."}], "tags": [], "owner": {"reputation": 394243, "user_id": 50079, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ud1xq.png?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/50079/jon"}, "is_accepted": false, "score": 2, "last_activity_date": 1422477974, "last_edit_date": 1495541570, "creation_date": 1422477974, "answer_id": 28202088, "question_id": 28201980, "link": "https://stackoverflow.com/questions/28201980/subclassing-c-map-dictionary/28202088#28202088", "title": "Subclassing C++ Map/Dictionary", "body": "<p>To solve the mechanical problem of getting the code to compile you would simply need to dereference the resulting iterator:</p>\n\n<pre><code>return find(key)-&gt;second;\n</code></pre>\n\n<p>Of course this is a bad solution because the question itself begins from a position where we have already made bad choices.</p>\n\n<ol>\n<li>Why not simply use the <code>[]</code> operator instead of this custom code?</li>\n<li>Why even derive from <code>std::map</code> in the first place? This is <a href=\"https://stackoverflow.com/questions/2034916/is-it-okay-to-inherit-implementation-from-stl-containers-rather-than-delegate\">a bad idea</a> and whatever the problem is, there are almost certainly better ways to solve it.</li>\n<li>Even if this code were correct, what happens when <code>key</code> does not exist in the map?</li>\n</ol>\n"}], "owner": {"reputation": 1092, "user_id": 4052648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f5ee6c09fbdb0b1a28778e00eee1c2f2?s=128&d=identicon&r=PG&f=1", "display_name": "dhint4", "link": "https://stackoverflow.com/users/4052648/dhint4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 28202083, "answer_count": 2, "score": 0, "last_activity_date": 1422483881, "creation_date": 1422477564, "question_id": 28201980, "link": "https://stackoverflow.com/questions/28201980/subclassing-c-map-dictionary", "title": "Subclassing C++ Map/Dictionary", "body": "<p>My class inherits from a map object:</p>\n\n<p>This is the method I am trying to implement:</p>\n\n<pre><code>double MyCustomClass::returnValueForKey(string key){\n    return this-&gt;find(key); //&lt;--- No Viable conversion from iterator\n}\n</code></pre>\n\n<p>How can I get something like this to work?</p>\n"}, {"tags": ["c++", "c++11", "unique-ptr"], "comments": [{"owner": {"reputation": 5282, "user_id": 1062948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432acdf7ac90614c1100bb7275eb5ce5?s=128&d=identicon&r=PG", "display_name": "crayzeewulf", "link": "https://stackoverflow.com/users/1062948/crayzeewulf"}, "edited": false, "score": 0, "creation_date": 1422477684, "post_id": 28201887, "comment_id": 44770149, "body": "Not the best thing to do but you can always return a reference to it. For example, you can add the following method: <code>const NodeList&amp; getChildNodes() const { return childNodes; }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "is_accepted": true, "score": 3, "last_activity_date": 1422478053, "creation_date": 1422478053, "answer_id": 28202107, "question_id": 28201887, "link": "https://stackoverflow.com/questions/28201887/vector-of-unique-ptr-member/28202107#28202107", "title": "Vector of unique_ptr member", "body": "<p>If you are locked into the vector of unique_ptr, and want to modify them outside the class, </p>\n\n<pre><code>NodeList&amp; getChildNodes() {return childNodes;}\nconst NodeList&amp; getChildNodes() const {return childNodes;}\n</code></pre>\n\n<p>You can't return the unique_ptr because that would move it out of the vector, leaving a nullptr behind.</p>\n"}, {"tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": false, "score": 1, "last_activity_date": 1422510020, "creation_date": 1422510020, "answer_id": 28207695, "question_id": 28201887, "link": "https://stackoverflow.com/questions/28201887/vector-of-unique-ptr-member/28207695#28207695", "title": "Vector of unique_ptr member", "body": "<p>What you tried is correct but I'm guessing you did this:</p>\n\n<pre><code>// This will not work and will try to copy the list\nNodeList list = node.getChildNodes();\n</code></pre>\n\n<p>Instead this should work:</p>\n\n<pre><code>NodeList&amp; list = node.getChildNodes();\n</code></pre>\n"}], "owner": {"reputation": 1199, "user_id": 284417, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/VLZSL.jpg?s=128&g=1", "display_name": "gosom", "link": "https://stackoverflow.com/users/284417/gosom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 1, "accepted_answer_id": 28202107, "answer_count": 2, "score": 1, "last_activity_date": 1422510020, "creation_date": 1422477253, "last_edit_date": 1422486742, "question_id": 28201887, "link": "https://stackoverflow.com/questions/28201887/vector-of-unique-ptr-member", "title": "Vector of unique_ptr member", "body": "<p>I have the following:</p>\n\n<pre><code>typedef std::vector&lt;std::unique_ptr&lt;Node&gt;&gt; NodeList;\nclass Node\n{\n public:\n    Node();\n    Node(NodeType _type);\n    virtual ~Node();\n\n    NodeType getNodeType() const;\n    Node const* getParentNode() const;\n    // I want a member function to allow acces to the\n    // childNodes vector\n    bool hasChildNodes() const;\n\n    void setParent(Node* node);\n    void appendChild(std::unique_ptr&lt;Node&gt; node);\nprotected:\n    NodeType _nodeType;\n    Node* parentNode;\n    NodeList childNodes;\n};\n</code></pre>\n\n<p>I want the user of the class to have access to the childNodes (read or read and write).\nHow can I achieve that?</p>\n\n<p>EDIT</p>\n\n<p>I tried:\n    NodeList&amp; getChildNodes();</p>\n\n<p>and I get:</p>\n\n<pre><code>/usr/include/c++/4.8.3/bits/stl_construct.h:75: error: use of deleted function 'std::unique_ptr&lt;_Tp, _Dp&gt;::unique_ptr(const std::unique_ptr&lt;_Tp, _Dp&gt;&amp;) [with _Tp = Node; _Dp = std::default_delete&lt;Node&gt;]'\n { ::new(static_cast&lt;void*&gt;(__p)) _T1(std::forward&lt;_Args&gt;(__args)...); }\n   ^\n</code></pre>\n"}, {"tags": ["c++", "corba", "tao"], "comments": [{"owner": {"reputation": 6736, "user_id": 19038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/279c4270deeebe469b7c3770e7accfae?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/19038/kevin"}, "edited": false, "score": 1, "creation_date": 1422477089, "post_id": 28201802, "comment_id": 44769813, "body": "Your details don&#39;t seem to match your question title"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 1079341, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ae1b5b17d5fb967a648fb5931c93092?s=128&d=identicon&r=PG", "display_name": "user1079341", "link": "https://stackoverflow.com/users/1079341/user1079341"}, "edited": false, "score": 0, "creation_date": 1424115881, "post_id": 28222254, "comment_id": 45411298, "body": "Yes thats right...i have used one trick to get rid of the performance issue: seq.length(max_possible_length); // setting the max length at first hand removes performnce overhead of resize inside loop. while (something) {     pos+1;     seq.length (pos);     seq[pos] = some_value; }"}], "tags": [], "owner": {"reputation": 2841, "user_id": 596545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb4726914ef76517e96e937ab607455?s=128&d=identicon&r=PG", "display_name": "Johnny Willemsen", "link": "https://stackoverflow.com/users/596545/johnny-willemsen"}, "is_accepted": true, "score": 1, "last_activity_date": 1443680167, "last_edit_date": 1443680167, "creation_date": 1422557247, "answer_id": 28222254, "question_id": 28201802, "link": "https://stackoverflow.com/questions/28201802/ace-tao-performance-issue/28222254#28222254", "title": "ACE/TAO Performance Issue", "body": "<p>From Will Otte from the ATCD mailing list:\nI\u2019m going to guess that you\u2019ve got some code like this:</p>\n\n<pre><code>while (something) {\n    CORBA::ULong pos = seq.length ();\n    seq.length (pos+1);\n    seq[pos] = some_value;\n}\n</code></pre>\n\n<p>and are observing that the performance is pretty bad compared to</p>\n\n<pre><code>std::vector&lt;foo&gt; vec;\nwhile (something) {\n    size_t pos = vec.size ();\n    vec.resize (pos + 1);\n    vec[pos] = foo (bar);  // or the much more succinct vec.push_back (foo (bar));\n}\n</code></pre>\n\n<p>right?</p>\n\n<p>The answer is likely because your STL implementation is helping you out and providing geometric growth when you use resize.  The C++ standard doesn\u2019t have any requirements like that (for resize; push_back is guaranteed to grow geometrically), so you\u2019ve likely been lucky and shouldn\u2019t depend on that behavior.   </p>\n\n<p>The TAO sequences don\u2019t provide this for you, so if you repeatedly resize you\u2019re going to see poor performance because every time you resize, you\u2019re going to have to pay for an allocation of a new buffer and the time to copy all extant elements to the new underlying buffer.</p>\n"}], "owner": {"reputation": 111, "user_id": 1079341, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ae1b5b17d5fb967a648fb5931c93092?s=128&d=identicon&r=PG", "display_name": "user1079341", "link": "https://stackoverflow.com/users/1079341/user1079341"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 28222254, "answer_count": 1, "score": 1, "last_activity_date": 1443680167, "creation_date": 1422476957, "last_edit_date": 1422478967, "question_id": 28201802, "link": "https://stackoverflow.com/questions/28201802/ace-tao-performance-issue", "title": "ACE/TAO Performance Issue", "body": "<p>ACE/TAO length() function is taking too much time. Since it is creating that much amount of memory using new operator at the time of setting the length. Anybody knows alternate to length function for just setting the lengths in TAO.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 0, "creation_date": 1422476461, "post_id": 28201579, "comment_id": 44769437, "body": "Look at the RTTI and dynamic_cast"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1422476465, "post_id": 28201579, "comment_id": 44769440, "body": "Use <code>dynamic_cast</code> if you want a checked conversion or <code>static_cast</code> if you already know that something has the right type. Storing a type as enum is redundant, don&#39;t do that. Oh, btw, don&#39;t use C-style casts, those can easily be the reason your code fails."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 7, "creation_date": 1422476520, "post_id": 28201579, "comment_id": 44769479, "body": "Your objects all get sliced when they&#39;re added to your vector."}, {"owner": {"reputation": 2404, "user_id": 1464336, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/43a3e2f5a681022f037622f3715d5326?s=128&d=identicon&r=PG", "display_name": "Suedocode", "link": "https://stackoverflow.com/users/1464336/suedocode"}, "edited": false, "score": 1, "creation_date": 1422476549, "post_id": 28201579, "comment_id": 44769490, "body": "<code>std::vector&lt;Base&gt; mObj;</code> stores objects, not references.  It&#39;s cutting your <code>Derived</code> classes into <code>Base</code> classes.  EDIT: Brian beat me to it."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1422476594, "post_id": 28201579, "comment_id": 44769511, "body": "The virtual <code>Get()</code> function is entirely unnecessary. A simple address-of operator <code>&amp;</code> would have accomplished the same thing."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1422476663, "post_id": 28201579, "comment_id": 44769552, "body": "There&#39;s no reason to cast twice, once with the C style cast and once with the <code>dynamic_cast</code>. Just do the <code>dynamic_cast</code> and check to see whether the result is null before you do anything with it."}], "answers": [{"comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 2, "creation_date": 1422476985, "post_id": 28201755, "comment_id": 44769748, "body": "Actually C++ supports overriding with covariant return types."}, {"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1422477316, "post_id": 28201755, "comment_id": 44769953, "body": "Oh, I stand corrected. Never seen that used before o.O"}, {"owner": {"reputation": 6869, "user_id": 1829943, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yDzWV.png?s=128&g=1", "display_name": "CoffeDeveloper", "link": "https://stackoverflow.com/users/1829943/coffedeveloper"}, "edited": false, "score": 0, "creation_date": 1422477494, "post_id": 28201755, "comment_id": 44770054, "body": "I don&#39;t think covariance extends to virtual methods anyway"}, {"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 0, "creation_date": 1422477927, "post_id": 28201755, "comment_id": 44770266, "body": "No he&#39;s completely right, I tried it out with a quick test program: <a href=\"https://ideone.com/GzHncc\" rel=\"nofollow noreferrer\">ideone.com/GzHncc</a>"}, {"owner": {"reputation": 6869, "user_id": 1829943, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yDzWV.png?s=128&g=1", "display_name": "CoffeDeveloper", "link": "https://stackoverflow.com/users/1829943/coffedeveloper"}, "edited": false, "score": 0, "creation_date": 1422478008, "post_id": 28201755, "comment_id": 44770313, "body": "same: <a href=\"http://ideone.com/9w1vKC\" rel=\"nofollow noreferrer\">ideone.com/9w1vKC</a> :P I always thought that was working with non virtual methods only .."}, {"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 0, "creation_date": 1422478179, "post_id": 28201755, "comment_id": 44770422, "body": "It makes sense, pointers are pointers, it doesn&#39;t really matter what they point to (obligatory 16-bit protected mode mention aside). As long as the types are covariant (easy to check by the compiler), the functional signature is identical."}, {"owner": {"reputation": 3681, "user_id": 2817371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fafb901e8d840c703f4a5089692427ad?s=128&d=identicon&r=PG&f=1", "display_name": "Red Alert", "link": "https://stackoverflow.com/users/2817371/red-alert"}, "reply_to_user": {"reputation": 6869, "user_id": 1829943, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yDzWV.png?s=128&g=1", "display_name": "CoffeDeveloper", "link": "https://stackoverflow.com/users/1829943/coffedeveloper"}, "edited": false, "score": 0, "creation_date": 1422478475, "post_id": 28201755, "comment_id": 44770570, "body": "@DarioOO That doesn&#39;t make any sense, you can&#39;t override non-virtual methods."}, {"owner": {"reputation": 6869, "user_id": 1829943, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yDzWV.png?s=128&g=1", "display_name": "CoffeDeveloper", "link": "https://stackoverflow.com/users/1829943/coffedeveloper"}, "edited": false, "score": 0, "creation_date": 1422479164, "post_id": 28201755, "comment_id": 44770905, "body": "Never speaked of overriding infact. Always threated covariance like the misterious thing tha allow to return a most derived type from a method with same name and always avoided that to avoid confusion to end users (if return type is different in my code, also different is method&#39;s name)"}], "tags": [], "owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "is_accepted": true, "score": 2, "last_activity_date": 1422477409, "last_edit_date": 1422477409, "creation_date": 1422476795, "answer_id": 28201755, "question_id": 28201579, "link": "https://stackoverflow.com/questions/28201579/c-casting-from-base-to-derived/28201755#28201755", "title": "c++ casting from base to derived", "body": "<p>What you're doing isn't inheritance. <strike>You're hiding member functions.</strike> You're calling functions statically on your objects.</p>\n\n<p><strike>In C++, if you declare a member in a base class as <code>virtual</code> and later want to override it you have to preserve its entire signature, <strong>including the return type</strong>. You're changing the return type and redeclaring it as <code>virtual</code>, which is all sorts of messed up, but in particular it only works for static calls.</strike> Brian correctly points out that you're allowed to use covariant returns for overriden virtual functions. The rest is still true however.</p>\n\n<p>Which is ok, because you're not even using pointers to store your objects, you're statically storing them as <code>Base</code> inside your pointer. You're allocating larger objects (again statically, you have a whole fetish for it), then mashing them together into smaller <code>Base</code> objects in the vector, dropping the rest of the data and corrupting your combined <code>vtable</code>, you're the calling <code>Base::Get()</code> statically on all of them (not the \"derived\" <code>Get</code>s), getting a pointer to the <code>Base *</code> object (sort of valid) then lying to the compiler that it's something else, then you're using the memory you lied about.</p>\n\n<p>I'm surprised it doesn't just crash to be honest, you're probably building in debug mode with memory guards enabled (and getting runtime warnings you ignore if it's MSVC).</p>\n"}, {"comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 2, "creation_date": 1422477003, "post_id": 28201763, "comment_id": 44769762, "body": "Actually C++ supports overriding with covariant return types."}], "tags": [], "owner": {"reputation": 6869, "user_id": 1829943, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yDzWV.png?s=128&g=1", "display_name": "CoffeDeveloper", "link": "https://stackoverflow.com/users/1829943/coffedeveloper"}, "is_accepted": false, "score": 0, "last_activity_date": 1422478119, "last_edit_date": 1422478119, "creation_date": 1422476817, "answer_id": 28201763, "question_id": 28201579, "link": "https://stackoverflow.com/questions/28201579/c-casting-from-base-to-derived/28201763#28201763", "title": "c++ casting from base to derived", "body": "<p>First of all, don't use struct and public fields, use a class with public methods where required (getters to read values without being able to edit them).</p>\n\n<p>Virtual methods are used so that you can call methods in the derived class by calling them on a pointer/reference to the base class <strong>go back 2 lines and read again.</strong></p>\n\n<p>Virtual methods works as expected as long as they have the same signature, otherwise you just using 2 different methods</p>\n\n<pre><code>virtual Derived1* Get() {return this;} //in derived class1\n</code></pre>\n\n<p>is different from</p>\n\n<pre><code>virtual Base* Get() {return this;}\n</code></pre>\n\n<p>but you can do</p>\n\n<pre><code>virtual Base* Get() {return static_cast&lt;Base*&gt;(this);} //in derived class1\n</code></pre>\n\n<p>Now you have 2 methods with same signature. That would work</p>\n\n<pre><code>Derived1 derived;\nBase     base;\nBase  *  derivedbase =  derived.Get();\nif(derivedbase-&gt;Get() == derivedbase)\n    cout&lt;&lt;\"Nice eh?\"&lt;&lt;endl;\n\nusing  namespace std;\ncout&lt;&lt;derived.d&lt;&lt;endl;\ncout&lt;&lt;derived.a&lt;&lt;endl;\n\ncout&lt;&lt;base.a&lt;&lt;endl;\ncout&lt;&lt;derivedbase-&gt;a&lt;&lt;endl;\n\n//cast to derived\nDerived1 *againderived = dynamic_cast&lt;Derived1*&gt;(derivedbase);\ncout&lt;&lt;againderived-&gt;d&lt;&lt;endl;\n\n//ops that would fail\n//Derived2 *wrongcast = dynamic_cast&lt;Derived2*&gt;(derivedbase);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4504659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f79233de199516d7a247516d29137b?s=128&d=identicon&r=PG&f=1", "display_name": "hungrh", "link": "https://stackoverflow.com/users/4504659/hungrh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 28201755, "answer_count": 2, "score": -2, "last_activity_date": 1422478119, "creation_date": 1422476215, "question_id": 28201579, "link": "https://stackoverflow.com/questions/28201579/c-casting-from-base-to-derived", "title": "c++ casting from base to derived", "body": "<p>I'm having some trouble to access a derived class' value from base class. My code is:</p>\n\n<pre><code>#include &lt;iostream&gt;     // std::cout, std::endl\n#include &lt;iomanip&gt;      // std::setfill, std::setw\n\n#include &lt;vector&gt;\n\nenum EType\n{\n    E_TYPE_NONE=0,\n    E_TYPE_BASE,\n    E_TYPE_DERIVED_1,\n    E_TYPE_DERIVED_2\n};\n\nstruct Base\n{\n    Base() : mEType(E_TYPE_BASE), a(0), b(0), c(0) {}\n    virtual ~Base() {}\n\n    virtual Base* Get() {return this;}\n\n    EType mEType;\n    unsigned short a;\n    unsigned short b;\n    unsigned short c;\n};\n\nstruct Derived1 : public Base\n{\n    Derived1() : Base()\n    {\n        mEType = E_TYPE_DERIVED_1;\n        a = 1;\n        b = 2;\n        c = 3;\n        d = 4;\n    }\n\n    virtual ~Derived1() {}\n    virtual Derived1* Get() {return this;}\n\n    unsigned short d;\n};\n\nstruct Derived2 : public Base\n{\n    Derived2() : Base()\n    {\n        mEType = E_TYPE_DERIVED_2;\n        a = 5;\n        b = 6;\n        c = 7;\n        e = 8;\n    }\n\n    virtual ~Derived2() {}\n    virtual Derived2* Get() {return this;}\n\n    unsigned short e;\n};\n\nstruct Foo\n{\n    std::vector&lt;Base&gt; mObj;\n};\n\nint main(int argc, char* argv[])\n{\n    Foo myCollection;\n    Derived1 obj1;\n    Derived2 obj2;\n    Base obj3;\n\n    myCollection.mObj.push_back(obj1);\n    myCollection.mObj.push_back(obj2);\n    myCollection.mObj.push_back(obj3);\n\n    //=========================================================================\n    std::cout &lt;&lt; \"base1 = \" &lt;&lt; myCollection.mObj[0].a &lt;&lt; \"; \" &lt;&lt;\n        myCollection.mObj[0].b &lt;&lt; \"; \" &lt;&lt;\n        myCollection.mObj[0].c &lt;&lt; std::endl;\n\n    Derived1* current1;\n    //  this way i got access violation when i try to print current1\n    //current1 = dynamic_cast&lt;Derived1*&gt;(myCollection.mObj[0].Get());\n    current1 = dynamic_cast&lt;Derived1*&gt;((Derived1*)myCollection.mObj[0].Get());\n\n    std::cout &lt;&lt; \"derived1 = \" &lt;&lt; current1-&gt;a &lt;&lt; \"; \" &lt;&lt;\n        current1-&gt;b &lt;&lt; \"; \" &lt;&lt;\n        current1-&gt;c &lt;&lt; \"; \" &lt;&lt;\n        current1-&gt;d &lt;&lt; std::endl;\n\n    //=========================================================================\n    std::cout &lt;&lt; \"base2 = \" &lt;&lt; myCollection.mObj[1].a &lt;&lt; \"; \" &lt;&lt;\n        myCollection.mObj[1].b &lt;&lt; \"; \" &lt;&lt;\n        myCollection.mObj[1].c &lt;&lt; std::endl;\n\n    Derived2* current2;\n    current2 = (Derived2*)myCollection.mObj[1].Get();\n\n    std::cout &lt;&lt; \"derived2 = \" &lt;&lt; current2-&gt;a &lt;&lt; \"; \" &lt;&lt;\n        current2-&gt;b &lt;&lt; \"; \" &lt;&lt;\n        current2-&gt;c &lt;&lt; \"; \" &lt;&lt;\n        current2-&gt;e &lt;&lt; std::endl;\n\n    //=========================================================================\n    std::cout &lt;&lt; \"base3 = \" &lt;&lt; myCollection.mObj[2].a &lt;&lt; \"; \" &lt;&lt;\n        myCollection.mObj[2].b &lt;&lt; \"; \" &lt;&lt;\n        myCollection.mObj[2].c &lt;&lt; std::endl;\n\n    //=========================================================================\n    std::cout &lt;&lt; \"ENTER to exit...\";\n    std::cin.ignore(10000, '\\n');\n    return 0;\n}\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>base1 = 1; 2; 3\nderived1 = 1; 2; 3; 47472\nbase2 = 5; 6; 7\nderived2 = 5; 6; 7; 47472\nbase3 = 0; 0; 0\nENTER to exit...\n</code></pre>\n\n<p>and expected result is:</p>\n\n<pre><code>base1 = 1; 2; 3\nderived1 = 1; 2; 3; 4\nbase2 = 5; 6; 7\nderived2 = 5; 6; 7; 8\nbase3 = 0; 0; 0\nENTER to exit...\n</code></pre>\n\n<p>Could any one help me to understand:</p>\n\n<ol>\n<li>Is there any better way to cast from base to derived, instead of using the Get() method?</li>\n<li>Why i'm not getting the expected result?</li>\n</ol>\n\n<p>Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1422476229, "post_id": 28201491, "comment_id": 44769315, "body": "Learn the use of <code>*</code> and you will understand <code>**</code>."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1422476527, "post_id": 28201491, "comment_id": 44769483, "body": "Given the names of the variables, I assume that a <code>Triangle</code> has a member <code>vertices</code> that is a pointer to an array of pointers to <code>Vertex</code>es so <code>vs[0]</code> would give you a <i>pointer</i> to the first vertex."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1422476992, "post_id": 28201491, "comment_id": 44769752, "body": "Without <code>**</code> we could not have <code>***</code>, and then we could not have a <a href=\"http://c2.com/cgi/wiki?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">three star programmer</a>"}], "answers": [{"tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": false, "score": 2, "last_activity_date": 1422476092, "creation_date": 1422476092, "answer_id": 28201538, "question_id": 28201491, "link": "https://stackoverflow.com/questions/28201491/what-is-the-use-of-in-c/28201538#28201538", "title": "What is the use of ** in C++?", "body": "<p><code>Vertex*</code> is pointer-to-Vertex, so <code>Vertex**</code> is pointer-to-pointer-to-Vertex -- one more level of indirection.</p>\n\n<p>For example:</p>\n\n<pre><code>int i = 0;\nint * iPtr = &amp;i;        // iPtr -&gt; i\nint ** iPtrPtr = &amp;iPtr; // iPtrPtr -&gt; iPtr -&gt; i\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4504693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4211e3d0d0cead4cc9fc5a8883fdfbdd?s=128&d=identicon&r=PG&f=1", "display_name": "mj9497", "link": "https://stackoverflow.com/users/4504693/mj9497"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "closed_date": 1422479733, "answer_count": 1, "score": -11, "last_activity_date": 1422476215, "creation_date": 1422475961, "last_edit_date": 1422476215, "question_id": 28201491, "link": "https://stackoverflow.com/questions/28201491/what-is-the-use-of-in-c", "closed_reason": "Duplicate", "title": "What is the use of ** in C++?", "body": "<pre><code>Segment computeSegment(Triangle&amp; t, float z)\n{\n    Vertex** vs = t.vertices;\n    // ...\n}\n</code></pre>\n\n<p>Here, <code>Vertex</code> is the name of a structure.  Can you tell me what is the meaning of <code>**</code> in <code>Vertex** vs = t.vertices;</code>?</p>\n"}, {"tags": ["c++", "linux", "qt", "opengl", "user-interface"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1422475898, "post_id": 28201430, "comment_id": 44769104, "body": "Some GUI libraries allow you to open windows with OpenGL drawing contexts attached, so you can mix a normal window and a window with OpenGL drawing. Qt is one such library. Wayland is a display server, and has nothing to do with your application directly, it sits a couple of layers below your applications."}, {"owner": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "edited": false, "score": 0, "creation_date": 1422519512, "post_id": 28201430, "comment_id": 44784346, "body": "&quot;I&#39;m forced to use all the Qt functions which aren&#39;t as good as OpenGl right?&quot; You&#39;re not forced as you can use &#39;pure&#39; OpenGL inside a <code>QOpenGLWidget</code> or QML SG nodes, and the` QOpenGLFunctions` are just wrappers for OpenGL commands."}, {"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1422541066, "post_id": 28201430, "comment_id": 44797063, "body": "<b>Related:</b> <a href=\"http://stackoverflow.com/q/18005030/183120\">How do GTK+ and OpenGL libraries cooperate on a single X server?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 5, "last_activity_date": 1558115612, "last_edit_date": 1558115612, "creation_date": 1422522498, "answer_id": 28210728, "question_id": 28201430, "link": "https://stackoverflow.com/questions/28201430/making-a-program-in-linux-how-opengl-wayland-and-qt-fit-into-the-picture/28210728#28210728", "title": "Making a Program in Linux, how OpenGL, Wayland and Qt fit into the picture", "body": "<p>What makes you think you can't mix and match things? Also you suffer from misconceptions about what OpenGL, Qt and Wayland are. In general the question is far too broad to answer satisfyingly. I already gave a lengthy explanation here: <a href=\"https://stackoverflow.com/a/18006486/524368\">https://stackoverflow.com/a/18006486/524368</a></p>\n\n<p>In short terms:</p>\n\n<ul>\n<li>Wayland: A protocol to send framebuffer handles and user input and interaction events between procsses (nothing more)</li>\n<li>Wayland compositor: creates framebuffers and gives them to clients using the Wayland protocol</li>\n<li>Wayland client: draws to the framebuffers by whatever method they like</li>\n<li><p>Westion: A Wayland compositor that creates framebuffers as on-screen windows for clients to draw to</p></li>\n<li><p>X11: A graphics and user input server protocol; clients can connect to a X11 server and send it X11 drawing commands that the server executes toward a framebuffer (drawable in X11 terms). Traditionally X11 draws directly to the screen, but given the right X11 server (Xwayland) can draw to a Wayland framebuffer as well. Also X11 multiplexes user input (mouse, keyboard, joystick, and so on) to the connected clients.</p></li>\n<li>X11 server: Implements the display side backend of a X11 system.</li>\n<li><p>X11 client: Connects to a X11 server and sends drawing commands.</p></li>\n<li><p>OpenGL: A framebuffer oriented drawing API. Essentially OpenGL provides methods to efficiently draw points, lines and triangles to a framebuffer. The process of drawing can be either fixed function in a hardwired set of operations (old style OpenGL) or freely programmed (modern, shader based OpenGL). OpenGL drawing commands can be sent to a X11 server that implements GLX; in that case the OpenGL commands are executed by the X11 server and the clients just sends the server a stream of commands. However often OpenGL commands are executed directly by the process using the OpenGL API, going directly to the GPU which processes them into pixels in a framebuffer.</p></li>\n<li><p>Toolkits like Qt or GTK: Provide abstractions for the creation of user interfaces. Windows and widgets are logical structures that organize the contents of a framebuffer. User input is processed in a event system which the programmer can use to control the facilities provided by the toolkit. User interface elements are drawn by whatever means are available to the toolkit. This can be either drawing methods native to the graphics system being used (X11 drawing commands) or if there is no native set drawing commands, as in Wayland, with whatever fits the bill. So OpenGL is a viable option (and is used as such) by Qt do draw its userinterface elements if the runtime environment of the process is well suited for this.</p></li>\n</ul>\n\n<blockquote>\n  <p>How do normally people make GUI programs with a mix of windowed GUI and 3D rendering? i.e. SolidWorks</p>\n</blockquote>\n\n<p>They use a toolkit like Qt and where 3D stuff must be drawn OpenGL (or a similar API) is being used.</p>\n\n<blockquote>\n  <p>It seems that OpenGL is tailored more towards rendering and creating 3D Objects/Worlds which would be more like a game, for lack of a better description.</p>\n</blockquote>\n\n<p>OpenGL just draws points, lines and triangles.</p>\n\n<p>There are no \"scenes\" or \"worlds\" in OpenGL. Everything that looks like a scene or a game environment happens due to the program logic using OpenGL in a way, that the outcome looks like it.</p>\n\n<p>Also OpenGL doesn't do windows, it doesn't to user input. Use a GUI toolkit for the whole widget business and use OpenGL to draw your scene.</p>\n"}], "owner": {"reputation": 333, "user_id": 3692842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b65cffa4f6a8e16416a7d137b26f881b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3692842/chris"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2322, "favorite_count": 0, "closed_date": 1422541042, "accepted_answer_id": 28210728, "answer_count": 1, "score": 1, "last_activity_date": 1558115612, "creation_date": 1422475744, "last_edit_date": 1422478575, "question_id": 28201430, "link": "https://stackoverflow.com/questions/28201430/making-a-program-in-linux-how-opengl-wayland-and-qt-fit-into-the-picture", "closed_reason": "Needs details or clarity", "title": "Making a Program in Linux, how OpenGL, Wayland and Qt fit into the picture", "body": "<p>How do normally people make GUI programs with a mix of windowed GUI and 3D rendering? i.e. SolidWorks</p>\n\n<p>More specifically:\nIt seems that OpenGL is tailored more towards rendering and creating 3D Objects/Worlds which would be more like a game, for lack of a better description. So for example If I wanted to create a GUI (i.e. like MATLAB) using OpenGL I would have to program all character information for text editing, buttons etc. from scratch, which seems ridiculous.\nSo if I wanted to create these windows I would use a builder like Qt with all it's functionality but then I'm limited, if I wanted to create a fancy 3D model in Qt then I'm forced to use all the Qt functions which aren't as good as OpenGl right? (Also how does Wayland fit into this picture?)</p>\n"}, {"tags": ["c++", "gcc", "codeblocks"], "comments": [{"owner": {"reputation": 1961, "user_id": 1874323, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7f6c299c60b5eab6f199347f6715bc05?s=128&d=identicon&r=PG", "display_name": "BlamKiwi", "link": "https://stackoverflow.com/users/1874323/blamkiwi"}, "edited": false, "score": 0, "creation_date": 1422478298, "post_id": 28201373, "comment_id": 44770485, "body": "Go to Settings &gt; Compilers and debuggers and then select GCC. Could you show us your settings.   Alternatively Code::Blocks has a version that you can download that has MingW included. Maybe reinstall that version?"}, {"owner": {"reputation": 3, "user_id": 4504628, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001832932819/picture?type=large", "display_name": "Mihnea Savu", "link": "https://stackoverflow.com/users/4504628/mihnea-savu"}, "reply_to_user": {"reputation": 1961, "user_id": 1874323, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7f6c299c60b5eab6f199347f6715bc05?s=128&d=identicon&r=PG", "display_name": "BlamKiwi", "link": "https://stackoverflow.com/users/1874323/blamkiwi"}, "edited": false, "score": 1, "creation_date": 1422479718, "post_id": 28201373, "comment_id": 44771165, "body": "I reset to defaults and then manually created the path it wanted (C:\\HighTec\\Msp430\\MinGW\\bin), then I manually selected all the components and it seems to work."}], "owner": {"reputation": 3, "user_id": 4504628, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001832932819/picture?type=large", "display_name": "Mihnea Savu", "link": "https://stackoverflow.com/users/4504628/mihnea-savu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2328, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422475736, "creation_date": 1422475502, "last_edit_date": 1495539811, "question_id": 28201373, "link": "https://stackoverflow.com/questions/28201373/codeblocks-doesnt-find-compiler", "title": "CodeBlocks doesn&#39;t find compiler", "body": "<p>Suddenly CodeBlocks stopped working so I reinstalled it. Now it doesn't seem to find the compiler, no matter what i do. the message i get is\"Can't find file executable in your configured search path for gnc gcc compiler\". I have reset it do defaults countless times. I have downloaded the package with mingw, the one without, i have installed mingw separately and nothing. I have checked that the path is corect and i still get the error. I have followed the instructions here and still nothing: <a href=\"https://stackoverflow.com/questions/23254518/cant-find-file-executable-in-your-configured-search-path-for-gnc-gcc-compiler\">Can&#39;t find file executable in your configured search path for gnc gcc compiler</a>\n any ideas on what i could do ? I am running windows 8.1.</p>\n"}, {"tags": ["c++", "c++11", "shared-libraries"], "comments": [{"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1422475630, "post_id": 28201173, "comment_id": 44768960, "body": "I know that I&#39;ve built the Boost libraries without C++11 support, and then tried to link a small application to them that did have C++11 support. I don&#39;t remember the exact manifestation of the problem, but in the end linking would <i>not</i> work until I rebuilt the Boost libraries with the support."}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1422475943, "post_id": 28201173, "comment_id": 44769135, "body": "I did a bit of searching and found this, which sounds a lot like the problem I referred to in the previous comment. Looks like it might have been a bug in Boost and not evidence for what you&#39;re looking for. &lt;shrug&gt; Take a look and decide for yourself :)  <a href=\"https://svn.boost.org/trac/boost/ticket/10038\" rel=\"nofollow noreferrer\">svn.boost.org/trac/boost/ticket/10038</a>"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1422477368, "post_id": 28201173, "comment_id": 44769980, "body": "I think <a href=\"http://stackoverflow.com/q/12637699/1708801\">this question</a> answers question."}, {"owner": {"reputation": 5368, "user_id": 23715, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e874cfe011eb4270c33edab17d1afdf?s=128&d=identicon&r=PG", "display_name": "Alex Che", "link": "https://stackoverflow.com/users/23715/alex-che"}, "edited": false, "score": 0, "creation_date": 1537529015, "post_id": 28201173, "comment_id": 91828005, "body": "Related: <a href=\"https://stackoverflow.com/a/49119902/23715\">stackoverflow.com/a/49119902/23715</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1559, "user_id": 1271422, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dd32c9ead6fa797a1f2a8fad9adf24a7?s=128&d=identicon&r=PG", "display_name": "UldisK", "link": "https://stackoverflow.com/users/1271422/uldisk"}, "edited": false, "score": 0, "creation_date": 1422478295, "post_id": 28201267, "comment_id": 44770483, "body": "I would disagree that adding non virtual function change anything in the ABI. Problem is function signature change and changes of data members."}, {"owner": {"reputation": 5368, "user_id": 23715, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e874cfe011eb4270c33edab17d1afdf?s=128&d=identicon&r=PG", "display_name": "Alex Che", "link": "https://stackoverflow.com/users/23715/alex-che"}, "edited": false, "score": 0, "creation_date": 1537528071, "post_id": 28201267, "comment_id": 91827451, "body": "OP specifically asks about GCC, which has it&#39;s own ABI compatibility policies."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 3, "last_activity_date": 1422479046, "last_edit_date": 1422479046, "creation_date": 1422475134, "answer_id": 28201267, "question_id": 28201173, "link": "https://stackoverflow.com/questions/28201173/c11-compatibility-with-existing-libraries-frameworks/28201267#28201267", "title": "C++11 compatibility with existing libraries/frameworks", "body": "<p>You can consider each translation of C++ by a different compiler (even if the compiler is the same, but has a different (minor) version) incompatible. C++ has no common application binary interface (ABI).</p>\n\n<p>In addition, a change of the dialect supported by the compiler is a change of the ABI, hence the resulting libraries are incompatible. An obvious example is a release build vs. debug build, where the debug data structures introduce additional members. </p>\n\n<p>And moving structures (C++11) or not moving structures ( &lt; C++11) is a radical change of the ABI. </p>\n"}, {"tags": [], "owner": {"reputation": 1559, "user_id": 1271422, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dd32c9ead6fa797a1f2a8fad9adf24a7?s=128&d=identicon&r=PG", "display_name": "UldisK", "link": "https://stackoverflow.com/users/1271422/uldisk"}, "is_accepted": true, "score": 5, "last_activity_date": 1422478201, "creation_date": 1422478201, "answer_id": 28202133, "question_id": 28201173, "link": "https://stackoverflow.com/questions/28201173/c11-compatibility-with-existing-libraries-frameworks/28202133#28202133", "title": "C++11 compatibility with existing libraries/frameworks", "body": "<p><a href=\"https://gcc.gnu.org/wiki/Cxx11AbiCompatibility\" rel=\"noreferrer\">This</a> page is dedicated to g++ abi breaks with c++11 up to version 4.7.\nThe first sentence there is:</p>\n\n<blockquote>\n  <p>The C++98 language is ABI-compatible with the C++11 language, but several places in the library break compatibility. This makes it dangerous to link C++98 objects with C++11 objects. </p>\n</blockquote>\n\n<p>Though there are examples, where enabling c++11 won't brake ABI compatibility: one example is Qt where you can freely mix c++11 enabled builds with c++03 builds.</p>\n"}], "owner": {"reputation": 703, "user_id": 1559376, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/74db9b1afabcb3fa4cf0224ec5eb42f8?s=128&d=identicon&r=PG", "display_name": "Waldorf", "link": "https://stackoverflow.com/users/1559376/waldorf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1161, "favorite_count": 0, "accepted_answer_id": 28202133, "answer_count": 2, "score": 10, "last_activity_date": 1422479046, "creation_date": 1422474807, "question_id": 28201173, "link": "https://stackoverflow.com/questions/28201173/c11-compatibility-with-existing-libraries-frameworks", "title": "C++11 compatibility with existing libraries/frameworks", "body": "<p>I am wondering something for which I have not found a convincing answer yet.</p>\n\n<p>Situation:</p>\n\n<ul>\n<li>A system with some libraries (e.g. gtkmm) compiled without c++11 enabled. </li>\n<li>An application compiled with C++11 enabled. </li>\n<li>Both are compiled and linked with the same GCC version/environment.  </li>\n<li>The application has some function calls to the library which use std::string and std::vector.</li>\n</ul>\n\n<p>both std::string and std::vector support move semantics which most likely mean they are not binary compatible with wth non C++11 variants. However both the application and library are build with the same compiler and standard libraries, so it would not be so strange if the lib would recognize this and support it.</p>\n\n<p>Is the above situation safe, or would it be really required to compile everything with the C++11 flag, even if the same build environment is used ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 1, "creation_date": 1422474657, "post_id": 28201074, "comment_id": 44768399, "body": "To start with, you&#39;re incrementing x too many times in retrieve. You should only increment it in the inner loop, not both the inner and outer. (Run through a couple iterations by hand and you&#39;ll see why x goes out of bounds.)"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1422474676, "post_id": 28201074, "comment_id": 44768408, "body": "well, not necessary the root of your problem, but you managed to have Undefined Behavior from the first line of main."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1422474936, "post_id": 28201074, "comment_id": 44768530, "body": "Anytime you see <code>i &lt;= N</code> as loop limits for something declared or allocated as <code>ar[N]</code>, consider it a <b>giant</b> red-flag."}, {"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1422475089, "post_id": 28201074, "comment_id": 44768636, "body": "Please read <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. This will help you to find all your bugs."}], "answers": [{"comments": [{"owner": {"reputation": 793, "user_id": 4416169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/062b5273d4d63fcd079d7a65010c1817?s=128&d=identicon&r=PG&f=1", "display_name": "Matias Chara", "link": "https://stackoverflow.com/users/4416169/matias-chara"}, "edited": false, "score": 0, "creation_date": 1422475444, "post_id": 28201254, "comment_id": 44768848, "body": "thanks for the quick reply! I cant believe I didnt notice something so obvious , sorry for wasting your time, I really thought it was a really complex issue that would of taken more knowledge than what I currently have to fix, anyways, it fixed the problem :D!"}, {"owner": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "reply_to_user": {"reputation": 793, "user_id": 4416169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/062b5273d4d63fcd079d7a65010c1817?s=128&d=identicon&r=PG&f=1", "display_name": "Matias Chara", "link": "https://stackoverflow.com/users/4416169/matias-chara"}, "edited": false, "score": 1, "creation_date": 1422475548, "post_id": 28201254, "comment_id": 44768909, "body": "That&#39;s what learning is for. But do step through the debugger before posting something you can&#39;t figure out."}], "tags": [], "owner": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "is_accepted": true, "score": 0, "last_activity_date": 1422475085, "creation_date": 1422475085, "answer_id": 28201254, "question_id": 28201074, "link": "https://stackoverflow.com/questions/28201074/getting-many-errors-from-these-lines-of-code/28201254#28201254", "title": "getting many errors from these lines of code:", "body": "<p>One thing I see is your class member <code>int bArray[80][24]</code> is being iterated through loops:</p>\n\n<pre><code>for (int i = 0,x = 0; i &lt;= 80; i++, x++)\n{\n    for (int o = 0; o &lt;= 24; o++, x++)\n    {\n        p[x] = bArray[i][o];\n    }\n}\n</code></pre>\n\n<p>The problem with this is you're iterating through the loops 81 and 25 times respectively due to the &lt;= operands. This will index outside of your double array.</p>\n\n<p>EDIT: This also means x is being iterated too many times considering the line:</p>\n\n<p><code>int *p = new int[1920];</code></p>\n"}], "owner": {"reputation": 793, "user_id": 4416169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/062b5273d4d63fcd079d7a65010c1817?s=128&d=identicon&r=PG&f=1", "display_name": "Matias Chara", "link": "https://stackoverflow.com/users/4416169/matias-chara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 1, "accepted_answer_id": 28201254, "answer_count": 1, "score": -1, "last_activity_date": 1422475085, "creation_date": 1422474477, "question_id": 28201074, "link": "https://stackoverflow.com/questions/28201074/getting-many-errors-from-these-lines-of-code", "title": "getting many errors from these lines of code:", "body": "<p>this is the main.cpp file, everything seems to work fine until I hit the \"Arr = ship1.retrieve()\" function call.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include\"ship.h\" \nusing namespace std;\n\n\nint main(){\n    int newarray[5][5] = {\n        0, 0, 1, 0, 0, \n        0, 1, 1, 1, 0,\n        1, 1, 1, 1, 1,\n        0, 1, 1, 1, 0,\n        0, 0, 1, 0, 0\n    };\n    int arr[80][24];\n    int *Arr;\n    ship ship1(newarray, 1);\n    ship1.spawn(40, 12);\n    Arr = ship1.retrieve();\n    system(\"pause\");\n    delete Arr;\n}\n</code></pre>\n\n<p>here is the retrieve member function called above:</p>\n\n<pre><code>int *retrieve(){\n        int *p = new int[1920];\n        for (int i = 0,x = 0; i &lt;= 80; i++, x++)\n        {\n            for (int o = 0; o &lt;= 24; o++, x++)\n            {\n                p[x] = bArray[i][o];\n            }\n        }\n        return p;\n    }\n</code></pre>\n\n<p>and these are the errors/exceptions I got:</p>\n\n<pre><code>'text-based game engine.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\ntdll.dll'. Cannot find or open the PDB file.\n'text-based game engine.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\kernel32.dll'. Cannot find or open the PDB file.\n'text-based game engine.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\KernelBase.dll'. Cannot find or open the PDB file.\n'text-based game engine.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\msvcp120d.dll'. Cannot find or open the PDB file.\n'text-based game engine.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\msvcr120d.dll'. Cannot find or open the PDB file.\nCritical error detected c0000374\ntext-based game engine.exe has triggered a breakpoint.\n\nFirst-chance exception at 0x7774EBD8 (ntdll.dll) in text-based game engine.exe: 0xC0000374: Se produjeron da\u00f1os en un mont\u00f3n (parameters: 0x7776C338).\nUnhandled exception at 0x7774EBD8 (ntdll.dll) in text-based game engine.exe: 0xC0000374: Se produjeron da\u00f1os en un mont\u00f3n (parameters: 0x7776C338).\n\nHEAP[text-based game engine.exe]: Heap block at 0052A958 modified at 0052C784 past requested size of 1e24\ntext-based game engine.exe has triggered a breakpoint.\n\nHEAP[text-based game engine.exe]: Invalid address specified to RtlValidateHeap( 00520000, 0052A960 )\ntext-based game engine.exe has triggered a breakpoint.\n\nFirst-chance exception at 0x776AE622 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nHEAP[text-based game engine.exe]: Heap block at 0052A958 modified at 0052C784 past requested size of 1e24\ntext-based game engine.exe has triggered a breakpoint.\n\nHEAP[text-based game engine.exe]: Invalid address specified to RtlFreeHeap( 00520000, 0052A960 )\ntext-based game engine.exe has triggered a breakpoint.\n\nFirst-chance exception at 0x776AD800 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776B4F72 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xDDDDDDDD.\nFirst-chance exception at 0x776AD800 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776AD800 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776AE622 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776AD800 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776AE622 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776B4F72 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xDDDDDDDD.\nFirst-chance exception at 0x776AE622 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776AD800 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776AE622 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776AD800 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776AE622 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776AD800 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nFirst-chance exception at 0x776AE622 (ntdll.dll) in text-based game engine.exe: 0xC0000005: Access violation reading location 0xCCCCCCCC.\nThe program '[15204] text-based game engine.exe' has exited with code -1073741510 (0xc000013a).\n</code></pre>\n\n<p>it is also worth mentioning some errors poped up after the functional call, this seems to be a memory allocation problem(I am relatively new to c++).</p>\n\n<p>here is what is left of the class(I know its poorly coded D:) :</p>\n\n<p>ship.h</p>\n\n<pre><code>    #pragma once\n    class ship\n    {\n    private:\n        int mainArray[5][5];\n        const int thisId;\n        int y;\n        int x;\n        int bArray[80][24];\n        bool spawnCap;\n        void replaceAll(const int replaceVal = 0){\n            for (int i = 0; i &lt;= 5; i++){\n                for (int o = 0; o &lt;= 5; o++){\n                    //finds and replaces the default identifiers in the user created array (1= block, 0= air/nothing) with identifiers reconginazable by the class function members (replaces the default block id to the id used by the class instance(object)) \n                    if (find(i, o)){\n                        mainArray[i][o] = (replaceVal &gt; thisId)?replaceVal:thisId;\n                    }\n                }\n            }\n        }\n    public:\n        bool check(int aArray[80][24]){\n            int tempArray[5][5];\n\n            for (int i = 0, i2 = y; i &lt;= 5; i++, i2++)\n            {\n                for (int o = 0, o2 = x; o &lt;= 5; o++, o2++)\n                {\n                    //crops a specific area (5*5) and saves it to tempArray\n                    tempArray[i][o] = aArray[i2][o2];\n                }\n            }\n\n\n            for (int i = 0; i &lt;= 5; i++){\n                for (int o = 0; o &lt;= 5; o++){\n                    //compares the main array to a specific area in the buffer array, returns true if arrays dont coincede(useful for colision detecting)\n                    if (tempArray[i][o] != mainArray[i][o] &amp;&amp; tempArray[i][o] != 0){\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n\n        void spawn(int Y, int X){\n            if (!spawnCap){\n                y = Y;\n                x = X;\n                spawnCap = true;\n                for (int i = 0, i2 = y; i &lt;= 5; i++, i2++)\n                {\n                    for (int o = 0, o2 = x; o &lt;= 5; o++, o2++)\n                    {\n                        //copies the user created \"ship\" into a determined area in the buffer (can only be done once per object)\n                        bArray[i2][o2] = mainArray[i][o];\n                    }\n                }\n            }\n        }\n\n        void move(int Y, int X){\n            if (spawnCap){\n                for (int i = y; i &lt;= 5; i++)\n                {\n                    for (int o = x; o &lt;= 5; o++)\n                    {\n                        //delete last position or first (spawn) position\n                        bArray[i][o] = 0;\n                    }\n                }\n\n                y = Y;\n                x = X;\n\n                for (int i = 0, i2 = y; i &lt;= 5; i++, i2++)\n                {\n                    for (int o = 0, o2 = x; o &lt;= 5; o++, o2++)\n                    {\n                        //copies the user created \"ship\" into a determined area in the buffer\n                        bArray[i2][o2] = mainArray[i][o];\n                    }\n                }\n\n            }\n        }\n\n        bool find(int arrayCoorX, int arrayCoorY, int valueToFind = 1){\n            if (mainArray[arrayCoorX][arrayCoorY] == valueToFind){\n                return true;\n            }\n            else{\n                return false;\n            }\n        }\n\n        void update(int BArray[80][24]){\n            for (int i = 0; i &lt;= 80; i++)\n            {\n                for (int o = 0; o &lt;= 24; o++)\n                {\n                    bArray[i][o] = BArray[i][o];\n                }\n            }\n        }\n\n        int *retrieve(){\n            int *p = new int[1920];\n            int x = 0;\n            for (int i = 0; i &lt;= 80; i++, x++)\n            {\n                for (int o = 0; o &lt;= 24; o++, x++)\n                {\n                    p[x] = bArray[i][o];\n                }\n            }\n            return p;\n        }\n\n        ship(int tempArray[][5], int id, int replaceValOverride = 0) :\n            thisId(id)\n        {\n            //takes in a user created array and copies it into the class,it also takes in an id which is by default the last id + 1, the id used for the blocks can be overriden(not recomended because of the lack of support)\n            for (int i = 0;i &lt;= 5; i++)\n            {\n                for (int o = 0; o &lt;= 5; o++)\n                {\n                    mainArray[i][o] = tempArray[i][o];\n                }\n            }\n            replaceAll(replaceValOverride);\n\n\n}\n\n    ~ship(){\n    }\n\n\n};\n</code></pre>\n\n<p>If someone can explain why this is happening to me I would be forever grateful. thanks in advice for any replies!</p>\n"}, {"tags": ["c++", "treeview", "gtk3", "gtkmm", "glade"], "answers": [{"tags": [], "owner": {"reputation": 2015, "user_id": 1123654, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/eb90c999e943427f375acc5e9d94dd5a?s=128&d=identicon&r=PG", "display_name": "murrayc", "link": "https://stackoverflow.com/users/1123654/murrayc"}, "is_accepted": false, "score": 0, "last_activity_date": 1422518699, "creation_date": 1422518699, "answer_id": 28209706, "question_id": 28200839, "link": "https://stackoverflow.com/questions/28200839/glade-constructed-treeview-with-gtkmm/28209706#28209706", "title": "Glade-constructed TreeView with gtkmm", "body": "<p>You generally can't define the TreeModel (ListStore, TreeStore) in Glade when using gtkmm. The C (as used in Glade) and C++ types are just too different and the statically-typed C++ API can't know about your glade file's TreeModel definition at compile time.</p>\n\n<p>Also, in your code, your treeview_info_column_time in your C++ code is a Gtk::TreeModelColumn&lt;>. Your treeview_info_column_time in your Glade file is a GtkTreeViewColumn. Model columns and View columns are very different things. You can just use get_widget() to turn one into the other.</p>\n\n<p>You are also trying to use get_widget() to get your liststore_info TreeModel (ListStore). But a TreeModel is not a widget. get_object() might work, but I just wouldn't bother trying to define the model in Glade. The tutorial that you link to doesn't do this either.</p>\n"}, {"comments": [{"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1441839254, "post_id": 30413105, "comment_id": 52841372, "body": "I finally got back to this problem tonight. When I implement your solution fully, I get the following in the console:  <code>(gui3:2812): Gtk-WARNING **: gtkliststore.c:836: Unable to convert from glibmm__CustomPointer_Pc to gchararray</code> I can amend the original post with the new source, if you&#39;d like. =)"}, {"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1441839634, "post_id": 30413105, "comment_id": 52841482, "body": "Note: this is because I&#39;m using the type <code>gchararray</code> for the columns class and the Glade file. I tried switching to Glib::ustring and got: <code>Unknown type Glib::ustring specified in treemodel liststore_info</code> <code>gtkliststore.c:516: Invalid type (null)</code> etc"}, {"owner": {"reputation": 19915, "user_id": 308237, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6a2f17358d3928b294cc0360f30acb22?s=128&d=identicon&r=PG", "display_name": "Malvineous", "link": "https://stackoverflow.com/users/308237/malvineous"}, "reply_to_user": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1442044786, "post_id": 30413105, "comment_id": 52931013, "body": "<code>Glib::ustring</code> is the correct C++ type to use for a Glade <code>GtkListStore</code> column of type <code>gchararray</code>.  Can you confirm you&#39;re NOT putting <code>Glib::ustring</code> into the Glade file?"}, {"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1442067617, "post_id": 30413105, "comment_id": 52936862, "body": "I can do you one better and confirm my current state of affairs with a new thread: <a href=\"http://stackoverflow.com/questions/32530367/glade-gtkmm-treeview\">stackoverflow.com/questions/32530367/glade-gtkmm-treeview</a> =)"}, {"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1442238645, "post_id": 30413105, "comment_id": 52988102, "body": "Chosen as the answer because this, plus the new thread, worked."}], "tags": [], "owner": {"reputation": 19915, "user_id": 308237, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6a2f17358d3928b294cc0360f30acb22?s=128&d=identicon&r=PG", "display_name": "Malvineous", "link": "https://stackoverflow.com/users/308237/malvineous"}, "is_accepted": true, "score": 4, "last_activity_date": 1432386823, "creation_date": 1432386823, "answer_id": 30413105, "question_id": 28200839, "link": "https://stackoverflow.com/questions/28200839/glade-constructed-treeview-with-gtkmm/30413105#30413105", "title": "Glade-constructed TreeView with gtkmm", "body": "<p>I've just worked out how to do this.  It's slightly dodgy as you have to create a C++ class that matches the types in your .glade file, but providing they do match, you get the same type-safe functions as you do when creating the TreeView manually.</p>\n\n<pre><code>class Cols: public Gtk::TreeModel::ColumnRecord {\n    public:\n        Cols() {\n            // This order must match the column order in the .glade file\n            this-&gt;add(this-&gt;colA);\n            this-&gt;add(this-&gt;colB);\n            this-&gt;add(this-&gt;colC);\n        }\n\n        // These types must match those for the model in the .glade file\n        Gtk::TreeModelColumn&lt;Glib::ustring&gt; colA;\n        Gtk::TreeModelColumn&lt;Glib::ustring&gt; colB;\n        Gtk::TreeModelColumn&lt;Glib::ustring&gt; colC;\n};\n\n...\n\n// Get hold of the TreeView from the .glade file\nGtk::TreeView* tv = nullptr;\nrefBuilder-&gt;get_widget(\"treeview1\", tv); // refBuilder is Gtk::Builder instance\nassert(tv);\n\n// Get hold of the ListStore model from the .glade file\nauto items = Glib::RefPtr&lt;Gtk::ListStore&gt;::cast_dynamic(\n    refBuilder-&gt;get_object(\"listmodel1\")\n);\nassert(items);\n\nCols mycols;\n\n// Populate tree view with items\nauto row = *(items-&gt;append());\nrow[mycols.colA] = \"Row 1 Col 1\";\nrow[mycols.colB] = \"Row 1 Col 2\";\n\nrow = *(items-&gt;append());\nrow[mycols.colA] = \"Row 2 Col 1\";\n</code></pre>\n\n<p>This works by <code>Cols::Cols()</code> adding the type-safe columns in the same order as the .glade file, so the index stored in each of the <code>colX</code> variables matches the data type in the corresponding index in the model.  Just don't forget to update the code if you ever reorder the columns!  You can even add some items to the TreeView within Glade, then append more items in code and they will all show up together at runtime!</p>\n\n<p>From reading the docs it looks like you could also use the type-unsafe <code>set_value()</code> function if you wanted to avoid creating the <code>Cols</code> class entirely, like this: (untested)</p>\n\n<pre><code>row.set_value(0, \"value for first column\");\nrow.set_value(1, \"value for second column\");\n</code></pre>\n\n<p>The docs warn that a crash is likely to result if the data type doesn't match the expected column format, so going to the effort of creating a class like <code>Cols</code> is probably worth it.</p>\n"}], "owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1994, "favorite_count": 0, "accepted_answer_id": 30413105, "answer_count": 2, "score": 3, "last_activity_date": 1432386823, "creation_date": 1422473589, "last_edit_date": 1422474878, "question_id": 28200839, "link": "https://stackoverflow.com/questions/28200839/glade-constructed-treeview-with-gtkmm", "title": "Glade-constructed TreeView with gtkmm", "body": "<p>I've got a glade-constructed TreeView/ListStore that I'm trying to load into an application and manipulate via gtkmm.</p>\n\n<p>Here's the manager's class:</p>\n\n<pre><code>typedef struct\n{\n  Gtk::ListStore *liststore_info;\n  Gtk::TreeModelColumn&lt;string&gt; *treeview_info_column_time;\n  Gtk::TreeModelColumn&lt;string&gt; *treeview_info_column_message;\n}UiElements;\n\nclass GuiManager\n{\n  Glib::RefPtr&lt;Gtk::Builder&gt; builder;\n  UiElements elements;\n\n  public:\n    GuiManager();\n    ~GuiManager();\n\n    void info_handler(string msg);\n}\n</code></pre>\n\n<p>And the implementation:</p>\n\n<pre><code>GuiManager::GuiManager()\n{\n  builder = Gtk::Builder::create();\n  builder-&gt;add_from_file(\"GUI.glade\");\n\n  builder-&gt;get_widget(\"liststore_info\", elements.liststore_info);\n  builder-&gt;get_widget(\"treeview_info_column_time\", elements.treeview_info_column_time);\n  builder-&gt;get_widget(\"treeview_info_column_message\", elements.treeview_info_column_message);\n}\n</code></pre>\n\n<p>Here's the function I'm trying to call to manipulate the TreeView:</p>\n\n<pre><code>void GuiManager::info_handler(string msg)\n{\n  Gtk::TreeModel::Row row = *(elements.liststore_info-&gt;append());\n  row[*(elements.treeview_info_column_time)] = \"Now\";\n  row[*(elements.treeview_info_column_message)] = msg;\n}\n</code></pre>\n\n<p>And finally, the relevant Glade XML:</p>\n\n<pre><code>&lt;object class=\"GtkListStore\" id=\"liststore_info\"&gt;\n  &lt;columns&gt;\n    &lt;!-- column-name Time --&gt;\n    &lt;column type=\"string\"/&gt;\n    &lt;!-- column-name Message --&gt;\n    &lt;column type=\"string\"/&gt;\n  &lt;/columns&gt;\n&lt;/object&gt;\n&lt;object class=\"GtkTreeView\" id=\"treeview_info\"&gt;\n  &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n  &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n  &lt;property name=\"model\"&gt;liststore_info&lt;/property&gt;\n  &lt;property name=\"enable_search\"&gt;False&lt;/property&gt;\n  &lt;property name=\"enable_grid_lines\"&gt;both&lt;/property&gt;\n  &lt;child internal-child=\"selection\"&gt;\n    &lt;object class=\"GtkTreeSelection\" id=\"treeview-selection2\"/&gt;\n  &lt;/child&gt;\n  &lt;child&gt;\n    &lt;object class=\"GtkTreeViewColumn\" id=\"treeview_info_column_time\"&gt;\n      &lt;property name=\"resizable\"&gt;True&lt;/property&gt;\n      &lt;property name=\"sizing\"&gt;autosize&lt;/property&gt;\n      &lt;property name=\"min_width\"&gt;100&lt;/property&gt;\n      &lt;property name=\"title\" translatable=\"yes\"&gt;Time&lt;/property&gt;\n      &lt;property name=\"clickable\"&gt;True&lt;/property&gt;\n    &lt;/object&gt;\n  &lt;/child&gt;\n  &lt;child&gt;\n    &lt;object class=\"GtkTreeViewColumn\" id=\"treeview_info_column_message\"&gt;\n      &lt;property name=\"resizable\"&gt;True&lt;/property&gt;\n      &lt;property name=\"sizing\"&gt;autosize&lt;/property&gt;\n      &lt;property name=\"min_width\"&gt;300&lt;/property&gt;\n      &lt;property name=\"title\" translatable=\"yes\"&gt;Message&lt;/property&gt;\n      &lt;property name=\"clickable\"&gt;True&lt;/property&gt;\n    &lt;/object&gt;\n  &lt;/child&gt;\n&lt;/object&gt;\n</code></pre>\n\n<p>The compilation fails, however, with the following:</p>\n\n<pre><code>In file included from /usr/include/gtkmm-3.0/gtkmm.h:119:0,\n                 from GUI3_gui_manager.h:8,\n                 from GUI3_gui_manager.cpp:1:\n/usr/include/gtkmm-3.0/gtkmm/builder.h: In instantiation of \u2018void Gtk::Builder::get_widget(const Glib::ustring&amp;, T_Widget*&amp;) [with T_Widget = Gtk::TreeModelColumn&lt;std::basic_string&lt;char&gt; &gt;]\u2019:\nGUI3_gui_manager.cpp:64:86:   required from here\n/usr/include/gtkmm-3.0/gtkmm/builder.h:628:93: error: \u2018get_base_type\u2019 is     not a member of \u2018Gtk::TreeModelColumn&lt;std::basic_string&lt;char&gt; &gt;\u2019\n     widget = dynamic_cast&lt;T_Widget*&gt;(this-&gt;get_widget_checked(name, T_Widget::get_base_type()));\n                                                                                             ^\n</code></pre>\n\n<p>I'm obviously misusing TreeModelColumn, but my <a href=\"http://blog.mpshouse.com/?p=910\" rel=\"nofollow\">source tutorial</a> for this method (which as thus far proven reliable) does things in a similar fashion, so I'm at a loss for the correct method here.</p>\n\n<p>Any help is appreciated. =)</p>\n"}, {"tags": ["c++", "opencv", "feature-extraction"], "comments": [{"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1422474512, "post_id": 28200781, "comment_id": 44768302, "body": "What language are you using?"}, {"owner": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "reply_to_user": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1422476032, "post_id": 28200781, "comment_id": 44769193, "body": "@GPPK Oh, thanks! It&#39;s C++. Probably using python I wouldn&#39;t face the problem, as python certainly provides one or another package for this. For C++ I&#39;ve found either some old C-code from 1999 or some not easy to integrate libraries with many dependencies (boost, etc.)"}, {"owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 1, "creation_date": 1422547061, "post_id": 28200781, "comment_id": 44801350, "body": "&quot;Which alternatives are there in OpenCV&quot; - Gabor, lbph. (even tried<a href=\"https://github.com/berak/uniform-lbp/blob/3.0_old/Zernike.cpp\" rel=\"nofollow noreferrer\">Zernike</a> once, but found it slow and unaccurate)"}], "owner": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1485, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1510760571, "creation_date": 1422473382, "last_edit_date": 1422545799, "question_id": 28200781, "link": "https://stackoverflow.com/questions/28200781/why-there-are-not-texture-features-like-haralick-or-zernike-in-opencv", "title": "Why there are not texture features like Haralick or Zernike in OpenCV", "body": "<p>I desperately need texture features for my OpenCV-based image recognition app (<strong>EDIT: written in C++/Qt</strong>).</p>\n\n<p>When I read academic papers on CV in biology, the most describe <em>Haralick Texture Features</em> and <em>Zernike Moments</em> as standard for texture classification. Why are they missing in OpenCV?</p>\n\n<p>Are they are not up to date? Which alternatives are there in OpenCV than?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1422474526, "post_id": 28200736, "comment_id": 44768306, "body": "It shouldn&#39;t <i>crash</i>; it should detach. Also note that this is not happening at the end of your constructor, but right after the declaration, since you don&#39;t give the <code>std::thread</code> a name (this is just a temporary in an unused expression). I think you should check the lifetime of <code>MyObject</code>. Unfortunately, you did not provide a minimal testcase so it is impossible to know the true cause."}], "answers": [{"comments": [{"owner": {"reputation": 756, "user_id": 4123214, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-NTdF4zqA4zw/AAAAAAAAAAI/AAAAAAAAACg/XnEHg_99xck/photo.jpg?sz=128", "display_name": "Russell Trahan", "link": "https://stackoverflow.com/users/4123214/russell-trahan"}, "edited": false, "score": 0, "creation_date": 1422474405, "post_id": 28200852, "comment_id": 44768240, "body": "There can be many of these <code>MyObject</code> objects created and this is part of a real-time application. The <code>MyObject</code> is a dataset that can be used once it is finished being initialized. Not calling <code>Init()</code> asynchronously causes a huge hangup. <code>Init()</code> must be allowed to run longer than the constructor itself."}, {"owner": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "reply_to_user": {"reputation": 756, "user_id": 4123214, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-NTdF4zqA4zw/AAAAAAAAAAI/AAAAAAAAACg/XnEHg_99xck/photo.jpg?sz=128", "display_name": "Russell Trahan", "link": "https://stackoverflow.com/users/4123214/russell-trahan"}, "edited": false, "score": 0, "creation_date": 1422474538, "post_id": 28200852, "comment_id": 44768316, "body": "Understood. As Alexandre C and I stated, as long as you join the thread/future at the end of <code>Init()</code>and the de-constructor it should be okay."}], "tags": [], "owner": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "is_accepted": false, "score": 0, "last_activity_date": 1422473633, "creation_date": 1422473633, "answer_id": 28200852, "question_id": 28200736, "link": "https://stackoverflow.com/questions/28200736/c-stdthread-on-stack/28200852#28200852", "title": "c++ std::thread on stack", "body": "<p>You can call <code>std::thread::detach()</code> from the stack, but this is <strong>very</strong> dangerous considering the object could be long deleted while it's still running.</p>\n\n<p>According to your requirements, the best option is to make sure it joins at the end of both <code>Init()</code> and the de-constructor. <strike>I think the better design is to <code>join()</code> at the end of the constructor for simplicity.</strike> Assuming there's no other processing to be done once you start the thread and when <code>Init()</code> is invoked, this would be the best choice.</p>\n"}, {"comments": [{"owner": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "edited": false, "score": 0, "creation_date": 1422474037, "post_id": 28200935, "comment_id": 44768065, "body": "How is this any different than calling <code>join()</code>?"}, {"owner": {"reputation": 52016, "user_id": 373025, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1916b08af2d329d0fe74b7fb9412369b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre C.", "link": "https://stackoverflow.com/users/373025/alexandre-c"}, "reply_to_user": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "edited": false, "score": 0, "creation_date": 1422474106, "post_id": 28200935, "comment_id": 44768096, "body": "@PDizzle745: This avoids storing a (unique/shared) pointer to the thread and having to call <code>delete</code>."}, {"owner": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "edited": false, "score": 0, "creation_date": 1422474285, "post_id": 28200935, "comment_id": 44768179, "body": "To avoid memory management? I guess that makes more sense. But why not just make it a smart pointer of <code>std::thread</code> since it&#39;s not returning anything?"}, {"owner": {"reputation": 52016, "user_id": 373025, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1916b08af2d329d0fe74b7fb9412369b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre C.", "link": "https://stackoverflow.com/users/373025/alexandre-c"}, "reply_to_user": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "edited": false, "score": 0, "creation_date": 1422474334, "post_id": 28200935, "comment_id": 44768201, "body": "@PDizzle745: Also, the future destructor will join the thread automatically (if it is the last copy), and copy construction will prolong lifetime of the task."}, {"owner": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "edited": false, "score": 0, "creation_date": 1422474420, "post_id": 28200935, "comment_id": 44768248, "body": "This is a good point. I agree then, it should be a <code>std::future&lt;void&gt;</code>."}, {"owner": {"reputation": 756, "user_id": 4123214, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-NTdF4zqA4zw/AAAAAAAAAAI/AAAAAAAAACg/XnEHg_99xck/photo.jpg?sz=128", "display_name": "Russell Trahan", "link": "https://stackoverflow.com/users/4123214/russell-trahan"}, "edited": false, "score": 0, "creation_date": 1422474709, "post_id": 28200935, "comment_id": 44768422, "body": "That did it. Implemented this and it works like a charm. Thanks guys! And, this is easier than having the clean-up a thread handle."}], "tags": [], "owner": {"reputation": 52016, "user_id": 373025, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1916b08af2d329d0fe74b7fb9412369b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre C.", "link": "https://stackoverflow.com/users/373025/alexandre-c"}, "is_accepted": true, "score": 3, "last_activity_date": 1422474390, "last_edit_date": 1495542035, "creation_date": 1422473987, "answer_id": 28200935, "question_id": 28200736, "link": "https://stackoverflow.com/questions/28200736/c-stdthread-on-stack/28200935#28200935", "title": "c++ std::thread on stack", "body": "<p>What about:</p>\n\n<pre><code>class MyObject\n{\n    MyObject ()\n    {\n        f = std::async (std::launch::async, &amp;MyObject::Init, this);\n    }\n\nprivate:\n    void Init ();\n    std::future&lt;void&gt; f;\n};\n</code></pre>\n\n<p>This allows you to do <code>f.get ()</code> when you want to synchronize on the task. The destructor will join automatically if it is the last living copy of the object (you may want to delete the copy constructor if you don't want this behavior).</p>\n\n<p>Note that you want to synchronize at some point before destruction, since if <code>Init</code> throws an exception, your destructor will.</p>\n\n<p>Also, see <a href=\"https://stackoverflow.com/questions/19744250/c11-what-happens-to-a-detached-thread-when-main-exits\">this</a> if you want to go the <code>detach</code> route.</p>\n"}], "owner": {"reputation": 756, "user_id": 4123214, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-NTdF4zqA4zw/AAAAAAAAAAI/AAAAAAAAACg/XnEHg_99xck/photo.jpg?sz=128", "display_name": "Russell Trahan", "link": "https://stackoverflow.com/users/4123214/russell-trahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1137, "favorite_count": 0, "accepted_answer_id": 28200935, "answer_count": 2, "score": 0, "last_activity_date": 1422474390, "creation_date": 1422473211, "last_edit_date": 1422473461, "question_id": 28200736, "link": "https://stackoverflow.com/questions/28200736/c-stdthread-on-stack", "title": "c++ std::thread on stack", "body": "<p>I have an object with a normal constructor. The constructor has a lot of initialization to do. Much of this initialization can be performed asynchronously, so I am calling a new thread from within the constructor.</p>\n\n<p>When the thread in initialized on the stack, it appears that the thread is destroyed when the constructor exits which causes a crash. This would look like so:</p>\n\n<pre><code>class MyObject\n{\n    MyObject()\n    {\n        // Typical initialization\n        // ...\n\n        // Time consuming initialization\n        std::thread(&amp;MyObject::Init; this); // Create new thread to call Init();\n\n        // Crash when exit MyObject() here\n    }\n\n    void Init()\n    {\n         // Time consuming operations\n    }\n};\n</code></pre>\n\n<p>The alternative (which works) is to create the thread on the heap as such.</p>\n\n<pre><code>class MyObject\n{\n    std::thread* StartupThread;\n\n    MyObject()\n    {\n        // Typical initialization\n        // ...\n\n        // Time consuming initialization\n        StartupThread = new std::thread(&amp;MyObject::Init; this); // Create new thread to call Init();\n\n        // Crash when exit MyObject() here\n    }\n    ~MyObject()\n    {\n        StartupThread-&gt;join();\n        delete StartupThread;\n    }\n\n    void Init()\n    {\n         // Time consuming operations\n    }\n\n};\n</code></pre>\n\n<hr>\n\n<p><strong>My Question</strong></p>\n\n<p>Is there any harm is leaving the unjoined &amp; undisposed thread object alive for the lifetime of the object or should I try to clean it up as soon as <code>Init()</code> finishes?</p>\n\n<p>Is there a way to \"automatically\" dispose the thread when it finishes so it isn't left hanging around?</p>\n\n<p>Essentially, can I get the thread on the stack in some way without it crashing as I described?</p>\n"}, {"tags": ["c++", "livecode"], "comments": [{"owner": {"reputation": 2344, "user_id": 807423, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fdaac93731723b0ae9e9763c44958a31?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/807423/mark"}, "edited": false, "score": 0, "creation_date": 1422476804, "post_id": 28200722, "comment_id": 44769637, "body": "Shouldn&#39;t stored procedures be triggered automatically when a specific query is performed? The implementation shouldn&#39;t have anything to do with the client application, in this case LiveCode.  What have you tried to solve this problem and where exactly do you get stuck? What is your LiveCode script? What is your procedure? What kind of output or error message do you get?"}, {"owner": {"reputation": 9, "user_id": 4500184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nzGi7BL0vsw/AAAAAAAAAAI/AAAAAAAAAFQ/Jw14VgNcm6w/photo.jpg?sz=128", "display_name": "steveuba", "link": "https://stackoverflow.com/users/4500184/steveuba"}, "reply_to_user": {"reputation": 2344, "user_id": 807423, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fdaac93731723b0ae9e9763c44958a31?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/807423/mark"}, "edited": false, "score": 0, "creation_date": 1422753237, "post_id": 28200722, "comment_id": 44874783, "body": "Thank you Mark for your questions, in other to address my earlier question(as well as seeking help on how to write a code to run/call a stored procedure in C++), here goes;"}, {"owner": {"reputation": 9, "user_id": 4500184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nzGi7BL0vsw/AAAAAAAAAAI/AAAAAAAAAFQ/Jw14VgNcm6w/photo.jpg?sz=128", "display_name": "steveuba", "link": "https://stackoverflow.com/users/4500184/steveuba"}, "reply_to_user": {"reputation": 2344, "user_id": 807423, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fdaac93731723b0ae9e9763c44958a31?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/807423/mark"}, "edited": false, "score": 0, "creation_date": 1422766160, "post_id": 28200722, "comment_id": 44876806, "body": "@Mark       1. I have been trying to run an MS SQL Stored Procedure in LiveCode to return data to use in my stack, <b>&#39;revDataFromQuery&#39;</b>, while <b>&#39;revExecuteSQL&#39;</b> returns values <b>&#39;1&#39;</b> or <b>&#39;0&#39;</b>, which understandably means error or run. I have already opened a bug ticket on LiveCode quality center: <b>bug 13700</b> please see it further details.  2. My second ask is requesting someone with C++ experience to help write code to run stored procs, i can encapsulate that using LiveCode SDK as an external and this way i will be able to run stored procs from my LiveCode stacks.   I hope this helps?."}], "owner": {"reputation": 9, "user_id": 4500184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nzGi7BL0vsw/AAAAAAAAAAI/AAAAAAAAAFQ/Jw14VgNcm6w/photo.jpg?sz=128", "display_name": "steveuba", "link": "https://stackoverflow.com/users/4500184/steveuba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422476559, "creation_date": 1422473178, "last_edit_date": 1422476559, "question_id": 28200722, "link": "https://stackoverflow.com/questions/28200722/returning-output-in-stored-procedures-call-using-livecode", "title": "Returning output in stored procedures call using LiveCode", "body": "<p>I have been trying to run stored procedures in LiveCode to return data based on parameters passed to the stored procedure, but I never get anything back when I run with LiveCode's built-in database library. I have also not seen any third-party plug-ins targeted at stored procedures for returning data from MS SQL Server 2008 R2 (also doesn't work for any other DB servers for that matter).</p>\n\n<ol>\n<li>Is there a way to run stored procedures in LiveCode?</li>\n<li>If there are no ways to run stored procedures in LiveCode, can someone point me in the direction of (or help out) writing a LiveCode external for stored procedure calls as a plug-in for LiveCode?.</li>\n</ol>\n\n<p>LiveCode does have an SDK for building externals in C++ and Object-C, but I do not have the required expertise to do that, hence the second question.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1422473329, "post_id": 28200667, "comment_id": 44767700, "body": "<code>std::shared_ptr</code> class members can be used with incomplete types.  The type needs to be complete when <code>make_shared</code> is called (or a <code>shared_ptr</code> is manually created from a raw pointer), so that should be done in the implementation file after including all relevant headers, not inline in the class."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1422474441, "post_id": 28200667, "comment_id": 44768263, "body": "What is your question?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1422473290, "post_id": 28200693, "comment_id": 44767672, "body": "You do not need that - each class can declare a destructor and define that in a source including the header for the destructed type. (Also, your destroyer looks like a memory leak)"}, {"owner": {"reputation": 53, "user_id": 4504489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275002a08bfa985bf37ff40d4418532b?s=128&d=identicon&r=PG&f=1", "display_name": "user0175554", "link": "https://stackoverflow.com/users/4504489/user0175554"}, "edited": false, "score": 0, "creation_date": 1422533435, "post_id": 28200693, "comment_id": 44792345, "body": "tohava has giving me the right anwer, thank you tohava"}], "tags": [], "owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "is_accepted": true, "score": 4, "last_activity_date": 1422473612, "last_edit_date": 1422473612, "creation_date": 1422473032, "answer_id": 28200693, "question_id": 28200667, "link": "https://stackoverflow.com/questions/28200667/complex-circular-dependency-among-classes/28200693#28200693", "title": "Complex Circular Dependency among classes", "body": "<p>You can use forward declarations for shared pointers as well, you just need to forward declare a destructor function object as well.</p>\n\n<p>Header:</p>\n\n<pre><code>struct A;\nshared_ptr&lt;A&gt; create_A();\n</code></pre>\n\n<p>Impl:</p>\n\n<pre><code>struct A { ... };\nstruct A_destroyer { void operator()(A *p) { delete p; }  };\nshared_ptr&lt;A&gt; create_A() { return shared_ptr&lt;A&gt;(new A(), A_destroyer()); }\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 0, "last_activity_date": 1422474028, "last_edit_date": 1422474028, "creation_date": 1422473587, "answer_id": 28200838, "question_id": 28200667, "link": "https://stackoverflow.com/questions/28200667/complex-circular-dependency-among-classes/28200838#28200838", "title": "Complex Circular Dependency among classes", "body": "<p>Each class can declare a destructor and define that destructor in a source including the header for the appropriate type destructed by unique/shared pointer. Than a simple forward of that type in the header will do it. </p>\n\n<pre><code>#include &lt;memory&gt;\n\n// header B\nstruct A;\nstruct B {\n    ~B();\n    std::shared_ptr&lt;A&gt; a;\n};\n\n// header A\nstruct A {};\n\n// source B\n#include \"a\"\n#include \"b\"\nB::~B() {}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4504489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275002a08bfa985bf37ff40d4418532b?s=128&d=identicon&r=PG&f=1", "display_name": "user0175554", "link": "https://stackoverflow.com/users/4504489/user0175554"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 28200693, "answer_count": 2, "score": 2, "last_activity_date": 1422480170, "creation_date": 1422472940, "last_edit_date": 1422480170, "question_id": 28200667, "link": "https://stackoverflow.com/questions/28200667/complex-circular-dependency-among-classes", "title": "Complex Circular Dependency among classes", "body": "<p>I have 5 classes  (A,B,C,D,E), each of which will have their own class and header files.</p>\n\n<pre><code>class A{};\nclass B\n{\n  B(A&amp;a);\n};\nclass C\n{\n  C(B&amp;b);\n};\nclass D:public A\n{};\nclass E:public D\n{\n   vector&lt;C*&gt; vc;\n};\n</code></pre>\n\n<p>Forward declaration will not work because I also have a lot of sharepointers being used in each of those classes.</p>\n"}, {"tags": ["c++", "visual-studio-2010", "gcc"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1422473031, "post_id": 28200648, "comment_id": 44767521, "body": "Are you porting to GCC <i>for Windows</i>, or are you porting to some other operating system? If the latter, please say which.  What you should do is <i>completely different</i> depending on the answer to this question."}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1422473140, "post_id": 28200648, "comment_id": 44767575, "body": "ill be running it on windows. The code is written on windows visual studio and I ma porting it to gcc cygwin which will also be run on windows"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1422473510, "post_id": 28200769, "comment_id": 44767806, "body": "Except the question itself shows that <code>_T</code>&#39;s definition is not <i>quite</i> that simple :P"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1422479956, "post_id": 28200769, "comment_id": 44771287, "body": "@LightnessRacesinOrbit I&#39;ll bet a cookie that that&#39;s just the double expansion hack, and <code>__T(x)</code> expands to either <code>L##x</code> or just <code>x</code> depending on a build parameter (probably <code>-DUNICODE</code> or not)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1422508748, "post_id": 28200769, "comment_id": 44780036, "body": "@zwol: Yes, I agree. Well done. That&#39;s still more complicated than this answer makes out."}], "tags": [], "owner": {"reputation": 3946, "user_id": 1703536, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d781a145ffbdecc059bfe29a3ce9fb1e?s=128&d=identicon&r=PG", "display_name": "Jeff Loughlin", "link": "https://stackoverflow.com/users/1703536/jeff-loughlin"}, "is_accepted": false, "score": 4, "last_activity_date": 1422473337, "creation_date": 1422473337, "answer_id": 28200769, "question_id": 28200648, "link": "https://stackoverflow.com/questions/28200648/t-not-recognized-porting-tchar-h-from-microsoft-to-gcc/28200769#28200769", "title": "_T not recognized - porting tchar.h from microsoft to gcc", "body": "<p>In the Visual Studio headers, <code>_T</code> is defined to be <code>L</code> if compiling with wide character support, or nothing otherwise.</p>\n\n<p>So if wide character support is enabled, <code>_T(\"blah blah blah\")</code> will get preprocessed to <code>L\"blah blah blah\"</code>.</p>\n\n<p>If wide character support is disabled, <code>_T(\"blah blah blah\")</code> will get preprocessed to <code>\"blah blah blah\"</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 7, "last_activity_date": 1422481477, "last_edit_date": 1422481477, "creation_date": 1422473427, "answer_id": 28200797, "question_id": 28200648, "link": "https://stackoverflow.com/questions/28200648/t-not-recognized-porting-tchar-h-from-microsoft-to-gcc/28200797#28200797", "title": "_T not recognized - porting tchar.h from microsoft to gcc", "body": "<p>As discussed for instance at <a href=\"https://stackoverflow.com/questions/4168748/tchar-h-not-found-on-cygwin\">tchar.h not found on cygwin</a> , Cygwin (being a compatibility layer which attempts to emulate the POSIX programming interface on top of Windows) has more in common with a Unix implementation than it does Windows.  In particular, it does not provide <code>tchar.h</code>.</p>\n\n<p>What you should do about this depends on your larger goals: <em>why</em> are you trying to compile this program using something other than Visual Studio?  Here are some possibilities:</p>\n\n<ul>\n<li><p>You want a more standard-conforming C++ implementation than VS2010 provides, but you still want to build a native Windows application.  The path of least resistance is probably to switch to a newer version of Visual Studio instead; the \"Express\" editions of these are free-as-in-beer.  You could also try <a href=\"http://www.mingw.org/\" rel=\"nofollow\">MinGW</a>, which is a GCC backend that produces <em>native</em> Windows applications, and <a href=\"http://blog.llvm.org/2014/07/clangllvm-on-windows-update.html\" rel=\"nofollow\">Clang for Windows</a>.</p></li>\n<li><p>You need to interoperate at the ABI level with (e.g. load DLLs into) a C++ program that was compiled using MinGW.  In that case you should also be using MinGW.  (Clang-for-Windows is supposed to be ABI-compatible with Visual Studio, so it won't work in this case.  Note that if the ABI involved is specified <em>entirely in plain C</em>, then there should be no problem loading a Visual Studio-compiled DLL into a MinGW-compiled program or vice versa.)</p></li>\n<li><p>This is stage one of a port to Unix (note: for purpose of this discussion, MacOS X counts as Unix), or you need to interoperate at the ABI level with a <em>Cygwin</em> program ... which means you have to port to Unix.  In that case, stage <em>zero</em> needs to be <em>stop using <code>tchar.h</code></em>.</p>\n\n<p>What I mean by that is, go back to your Visual Studio builds, and then find every place in your code that uses anything defined in <code>tchar.h</code> (<code>_TCHAR</code>, <code>_T</code>, <code>_TEXT</code>, <code>_tcs*</code>, probably others) and change them to use either plain <code>char</code>, or <code>wchar_t</code>, as appropriate, and the associated string-literal syntax and functions.  You should also wean yourself off the generic (neither <code>A</code> nor <code>W</code> suffix) variant of the core Windows API at the same time.  I believe there is a macro you can define that causes <code>windows.h</code> not to provide the generic API at all, but I don't remember what it is and can't find it on MSDN right now.</p>\n\n<p>Keep in mind while doing this that Unix prefers you to use UTF-8-coded text in <code>char</code>/<code>std::string</code>, rather than UTF-16 text in <code>wchar_t</code>/<code>std::wstring</code> etc.  It has been my experience that a cross-platform application is generally happiest conforming to the Unix convention <em>except</em> in the functions that talk directly to the Windows API, which use exclusively the <code>W</code> variants of that API, converting back and forth right then and there.  (And you need to create yourself a compatibility layer and isolate all of that code there and arrange to have as little of it as possible.)</p></li>\n</ul>\n"}], "owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2144, "favorite_count": 0, "accepted_answer_id": 28200797, "answer_count": 2, "score": 2, "last_activity_date": 1422481477, "creation_date": 1422472882, "question_id": 28200648, "link": "https://stackoverflow.com/questions/28200648/t-not-recognized-porting-tchar-h-from-microsoft-to-gcc", "title": "_T not recognized - porting tchar.h from microsoft to gcc", "body": "<p>I am trying to port a component that runs fine on Microsoft Visual studio\nThe component has the following code in it</p>\n\n<pre><code>if ( SuperNode.someMethod == _T( \"Hello\" ) )    \n</code></pre>\n\n<p>When attempting to build the code in gcc cygwin I get the following error</p>\n\n<pre><code>error: '_T' was not declared in this scope|\n</code></pre>\n\n<p>Now in visual studio <code>_T</code> points to <code>tchar.h</code>\nWhich has something like this</p>\n\n<pre><code>#define _T(x)       __T(x)\n#define _TEXT(x)    __T(x)\n</code></pre>\n\n<p>What could I do to fix this problem for gcc cygwin ? Ill be running it on windows</p>\n"}, {"tags": ["c++", "static", "constants", "multidimensional-array"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1422472906, "post_id": 28200582, "comment_id": 44767441, "body": "<code>var</code> needs to be know at compile time since it is used as an array dimensions.  You can use <code>int**</code> if you don&#39;t know what the dimensions will be at compile time."}, {"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1422473150, "post_id": 28200582, "comment_id": 44767583, "body": "Yes, but I am not dynamically allocating my array. And I need to pass the second dimension of the array to make it work, I believe."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1422473266, "post_id": 28200582, "comment_id": 44767657, "body": "Btw, you can find out the value of var because the size of an array element must be known at compile time (and that&#39;s why your code doesn&#39;t compile -- there&#39;s const and there&#39;s const). var is sizeof(a[0])/sizeof(a[0][0]). Provided the array contains at least one element with at least one element."}, {"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1422473688, "post_id": 28200582, "comment_id": 44767899, "body": "@PeterSchneider But, the array is getting declared. There is no problem with the declaration of the array. If I do not call the <code>funPrivate()</code> the code works fine. (having declared it as a constant, that is a valid statement I believe)"}], "answers": [{"comments": [{"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 0, "creation_date": 1422473979, "post_id": 28200864, "comment_id": 44768028, "body": "Getting an error, I do know that I cannot use this statement (Not to be taken rudely ;) ) But sir, why I cannot use that?? And the error that the compiler gives me is not that I cannot use that declaration, but the error is that it shall be <code>static</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 1, "creation_date": 1422474268, "post_id": 28200864, "comment_id": 44768172, "body": "@user007: Because types are a compile-time feature, yet you are attempting to make the type of your array (remember: the dimension is part of the type!) dependent on a runtime value. It doesn&#39;t matter that it&#39;s marked <code>const</code>: it&#39;s still a runtime value. It cannot define array bounds."}, {"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1422474473, "post_id": 28200864, "comment_id": 44768280, "body": "@LightnessRacesinOrbit  But, then how does this work fine?? :\\ <a href=\"http://ideone.com/hmYf0f\" rel=\"nofollow noreferrer\">ideone.com/hmYf0f</a>  And, but <code>type</code> do you mean the function prototype?? You mean the data type of the variable <code>var</code> right??"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 1, "creation_date": 1422474530, "post_id": 28200864, "comment_id": 44768307, "body": "@user007, in that case, the value of <code>temp</code> is known at compile time."}, {"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 0, "creation_date": 1422475361, "post_id": 28200864, "comment_id": 44768809, "body": "@RSahu I wrote this small code :: <a href=\"http://ideone.com/Uejks9\" rel=\"nofollow noreferrer\">ideone.com/Uejks9</a> I don&#39;t know but this works fine on my CodeBlocks IDE, but gives a runtime error on ideone. :\\ But, I don&#39;t get it is the declaration of the array faulty?? (But, had the declaration of the array been faulty this won&#39;t have worked :: <a href=\"http://ideone.com/iigSAr\" rel=\"nofollow noreferrer\">ideone.com/iigSAr</a> And, if the declaration of the function is faulty then what is the reason for this? There are too many contradicting things around. :\\"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 0, "creation_date": 1422475506, "post_id": 28200864, "comment_id": 44768881, "body": "@user007 The reason why it compiles is that by default, ideone uses an extension that exists in the g++ compiler.  If you were to compile this using the <code>-Wall -pedantic</code> switch, you will receive the compiler error others have already mentioned.  In other words, your code that compiles is not standard C++."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1422473675, "creation_date": 1422473675, "answer_id": 28200864, "question_id": 28200582, "link": "https://stackoverflow.com/questions/28200582/error-in-accessing-a-2d-array-inside-a-class/28200864#28200864", "title": "Error in accessing a 2D array inside a class", "body": "<p>The member variable <code>var</code> cannot be used in the declaration of an array like you are attempting in the function <code>funPrivate</code>:</p>\n\n<pre><code>void funPrivate(int arr[][var], int temp)\n</code></pre>\n\n<p>Your best option is to use <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code>.</p>\n\n<pre><code>void funPrivate(std::vector&lt;std::vector&lt;int&gt;&gt; const&amp; arr, int temp) {\n    cout &lt;&lt; arr[0][0] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>In the calling function, you can use:</p>\n\n<pre><code>void funPublic(){\n    std::vector&lt;std::vector&lt;int&gt;&gt; arr(var, std::vector&lt;int&gt;(var));\n    funPrivate(arr, var);\n   cout &lt;&lt; \"Hello\";\n};\n</code></pre>\n"}], "owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 28200864, "answer_count": 1, "score": 0, "last_activity_date": 1422473675, "creation_date": 1422472691, "question_id": 28200582, "link": "https://stackoverflow.com/questions/28200582/error-in-accessing-a-2d-array-inside-a-class", "title": "Error in accessing a 2D array inside a class", "body": "<p>I have been working on a code in C++. But, I got stuck at a point.</p>\n\n<p>This is a small prototype of my code::</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Test{\nprivate:\n    const int var;\n    void funPrivate(int arr[][var], int temp){\n        cout &lt;&lt; arr[0][0] &lt;&lt; endl;\n    }\npublic:\n    Test(int n) : var(n){};\n\n    void funPublic(){\n        int a[var][var];\n        funPrivate(a, var);\n      cout &lt;&lt; \"Hello\";\n    };\n};\n\nint main()\n{\n    Test t1(5);\n    t1.funPublic();\n    return 0;\n}\n</code></pre>\n\n<p>I create a class <code>funPublic()</code> method, where I create a 2D array (using the const int var, which I declare as a private member inside my class <code>Test</code>) and then pass it to a private methode <code>funPrivate(int arr[][var], int temp)</code>, where I print <code>arr[0][0]</code> (which shall be a garbage value).</p>\n\n<p>But, when I try to run this program, I get an error::</p>\n\n<p><code>error: invalid use of non-static data member 'Test::var'</code></p>\n\n<p>My method <code>funPrivate(int arr[][var], int temp)</code> is a normal function (not a static function) and I don't a reason that I shall declare <code>int var</code> as static. Why does this happen.</p>\n\n<p>Further, if I slightly modify the declaration of my method 'funPrivate(int arr[][var], int temp)' to this <code>void funPrivate(int arr[][var])</code> then I get one more error:</p>\n\n<p><code>error: 'arr' was not declared in this scope</code></p>\n\n<p>Now, I don't know why does that happen. We pass the size of the array for our convenience, because there is no way to determine the size of the array in a function, but that shall not cause the error that <code>arr was not declared in this scope</code>.</p>\n\n<p>I have been thinking and searching a lot, but still can't find an answer. Please help. Thanks for any help in advance. :D</p>\n"}, {"tags": ["c++", "class", "variable-declaration"], "comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1422472667, "post_id": 28200540, "comment_id": 44767291, "body": "Can you provide more context about where the problematic line of code is? With just what you&#39;ve provided here, I don&#39;t think there&#39;s enough information to help out."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1422473066, "post_id": 28200540, "comment_id": 44767541, "body": "I think that the error you&#39;re mentioning is the <i>second</i> error, and it&#39;s a false positive caused by the <i>first</i> error.  Namely that <code>loading</code> has no default constructor to be called by <code>new loading()</code>."}, {"owner": {"reputation": 1709, "user_id": 4325016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f0a09185dea1c14428422310a022de?s=128&d=identicon&r=PG&f=1", "display_name": "George Houpis", "link": "https://stackoverflow.com/users/4325016/george-houpis"}, "edited": false, "score": 0, "creation_date": 1422483354, "post_id": 28200540, "comment_id": 44772962, "body": "What happens when you go just ==&gt; loading* loadingScreen = new loading;"}, {"owner": {"reputation": 41, "user_id": 3294731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d1d735e08c1e160c7d92a34f0cf45c6?s=128&d=identicon&r=PG&f=1", "display_name": "vroomhenderson", "link": "https://stackoverflow.com/users/3294731/vroomhenderson"}, "edited": false, "score": 0, "creation_date": 1422485896, "post_id": 28200540, "comment_id": 44774008, "body": "I kinda figured that I&#39;d be voted down here... But I really am stuck and I&#39;m not seeing this issue anywhere else. This is the first error the compiler is mentioning, so it can&#39;t be a false positive. new loading() is actually supposed to be new loading(device); That was a typo on my part and will be corrected above. I will also attach my main class."}, {"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 1, "creation_date": 1422489248, "post_id": 28200540, "comment_id": 44775174, "body": "You have a <code>bool loading</code> and a <code>class loading</code>. Rename the <code>bool</code> at the top of main.cpp and wonder."}], "answers": [{"tags": [], "owner": {"reputation": 85633, "user_id": 400056, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9f2bfb454da13e7a17d5ec6df6aac25f?s=128&d=identicon&r=PG", "display_name": "DarkDust", "link": "https://stackoverflow.com/users/400056/darkdust"}, "is_accepted": true, "score": 2, "last_activity_date": 1422519651, "creation_date": 1422519651, "answer_id": 28209962, "question_id": 28200540, "link": "https://stackoverflow.com/questions/28200540/when-declaring-a-variable-variable-not-declared-in-this-scope/28209962#28209962", "title": "When declaring a variable: variable not declared in this scope", "body": "<p>The problem might be caused by the fact that you've got two different things called <code>loading</code>:</p>\n\n<p>First, there's your <code>class loading</code>. But then, there's also the variable <code>bool loading</code>. So when you do:</p>\n\n<pre><code>loading* loadingScreen = new loading(device);\n</code></pre>\n\n<p>the compiler is confronted with an ambiguity and seems to prefer the variable <code>loading</code> over the type <code>loading</code> (I'm not an C++ pro and can't explain why this is the case; my guess is it's because the variable is the most \"recent\" definition of that name).</p>\n\n<p>The fix is pretty easy: make the two names different. Since C++ is case-sensitive you should adopt the convention of starting class names with an uppercase letter: make that <code>class Loading</code> and <code>Loading* loadingScreen = new Loading(device);</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 3294731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d1d735e08c1e160c7d92a34f0cf45c6?s=128&d=identicon&r=PG&f=1", "display_name": "vroomhenderson", "link": "https://stackoverflow.com/users/3294731/vroomhenderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "accepted_answer_id": 28209962, "answer_count": 1, "score": 0, "last_activity_date": 1422519651, "creation_date": 1422472553, "last_edit_date": 1422486305, "question_id": 28200540, "link": "https://stackoverflow.com/questions/28200540/when-declaring-a-variable-variable-not-declared-in-this-scope", "title": "When declaring a variable: variable not declared in this scope", "body": "<p>I have the code: <code>loading* loadingScreen = new loading(device);</code></p>\n\n<p>When I compile the program, the compiler complains that loading screen wasn't declared: </p>\n\n<pre><code>error: 'loadingScreen' was not declared in this scope\n     loading* loadingScreen = new loading(device);\n              ^\n</code></pre>\n\n<p>I'm unsure what's causing this. What I've tried:</p>\n\n<ul>\n<li>Rewriting it so that the constructor isn't run.</li>\n<li>Relocating the declaration to a different section of code.</li>\n<li>Making sure my classes are included correctly.</li>\n</ul>\n\n<p>Here's my main.cpp file:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;irrlicht.h&gt;\n#include &lt;future&gt; // std::async, std::future\n#include &lt;chrono&gt; // Millisecond timer\n#include &lt;pthread.h&gt;\n#include &lt;loading.h&gt;\n#include &lt;fps.h&gt;\n\nbool loading = false;\n\nstruct load_struct {\n    irr::IrrlichtDevice *device;\n    fps *fpsLevel;\n};\n\nvoid load(void * loadingStruct)\n{\n    loading = true;\n    struct load_struct *args = (struct load_struct *) loadingStruct;\n\n    loading = false;\n    pthread_exit(NULL);\n}\n\nint main()\n{\n    //Create display to optimal settings.\n    irr::IrrlichtDevice *device = irr::createDevice(irr::video::EDT_NULL);\n    irr::s32 depth = device-&gt;getVideoModeList()-&gt;getDesktopDepth();\n    irr::core::dimension2d&lt;irr::u32&gt; resolution = device-&gt;getVideoModeList()-&gt;getDesktopResolution();\n    device-&gt;drop();\n    device = irr::createDevice(irr::video::EDT_OPENGL, resolution, depth, true, true, true, NULL); // TODO: Change last parameter\n    if(device==NULL)\n    {\n        std::cout &lt;&lt; \"Unable to create device! Do you have graphics drivers installed?\" &lt;&lt; std::endl;\n        return 1;\n    }\n\n    //Open data files\n    device-&gt;getFileSystem()-&gt;addFileArchive(\"Resources\",true,true,irr::io::EFAT_ZIP);\n\n    device-&gt;getFileSystem()-&gt;addFileArchive(\"Video.tar\");\n    device-&gt;getFileSystem()-&gt;addFileArchive(\"Textures.tar\");\n    device-&gt;getFileSystem()-&gt;addFileArchive(\"Models.tar\");\n    device-&gt;getFileSystem()-&gt;addFileArchive(\"Audio.tar\");\n\n    //Load first room.\n    loading* loadingScreen = new loading(device);\n    fps *fpsLevel = new fps();\n    pthread_t creationThread;\n    struct load_struct loadingStruct;\n    loadingStruct.device = device;\n    loadingStruct.fpsLevel = fpsLevel;\n    //pthread_create(creationThread,NULL,load,(void *)&amp;loadingStruct); Fix me!\n    while(loading==false)\n    {\n        loadingScreen-&gt;update();\n        std::this_thread::sleep_for(std::chrono::milliseconds(1000/60));\n    }\n\n    loadingScreen-&gt;kill();\n\n    // Run first room.\n    fpsLevel-&gt;run();\n\n    //Clean up.\n    device-&gt;drop();\n    return 0;\n}\n</code></pre>\n\n<p>Here's my loading.h file:</p>\n\n<pre><code>#include &lt;irrlicht.h&gt;\n#include &lt;string&gt;\n#ifndef LOADING_H\n#define LOADING_H\n\nclass loading\n{\npublic:\n    loading(irr::IrrlichtDevice *device);\n    void update();\n    void kill();\nprotected:\n    int slide;\n    static const int SLIDES_AMOUNT = 60;\n    const std::string FILENAME_TEMPLATE = \"Loading_Screen/%.png\";\n    irr::video::ITexture* slides[SLIDES_AMOUNT];\n};\n\n#endif // LOADING_H\n</code></pre>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["c++", "visual-studio-2012", "windows-7-x64"], "comments": [{"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422472255, "post_id": 28200438, "comment_id": 44767060, "body": "I just noticed that the code for Person.h in the problem code has body code for the getters/setters. I just took that out and it still won&#39;t compile."}, {"owner": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "edited": false, "score": 2, "creation_date": 1422472367, "post_id": 28200438, "comment_id": 44767122, "body": "Always use header guards. With that said, what error are you getting with the second snippet? I don&#39;t see where you&#39;re include Date.h for Person.h."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1422472552, "post_id": 28200438, "comment_id": 44767226, "body": "<code>class Person : public Date{</code> Why would Person need to inherit from Date?"}, {"owner": {"reputation": 52926, "user_id": 11898, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5757e5b62594659eedfef289274502a3?s=128&d=identicon&r=PG", "display_name": "Scott Langham", "link": "https://stackoverflow.com/users/11898/scott-langham"}, "edited": false, "score": 0, "creation_date": 1422472628, "post_id": 28200438, "comment_id": 44767268, "body": "Person.h needs to #include Date.h to be able to use Date as the return type for getBirthDay. What is the first error of the (as you describe it) &quot;creates even more problems&quot;?"}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422472669, "post_id": 28200438, "comment_id": 44767294, "body": "I tried using #include &quot;Date.h&quot; and it just produces different errors like this: 1&gt;c:\\users\\jhs publishing pc\\documents\\visual studio 2012\\projects\\practice\\practice\\date.h(3): error C2011: &#39;Date&#39; : &#39;class&#39; type redefinition 1&gt;          c:\\users\\jhs publishing pc\\documents\\visual studio 2012\\projects\\practice\\practice\\date.h(3) : see declaration of &#39;Date&#39; 1&gt;c:\\users\\jhs publishing pc\\documents\\visual studio 2012\\projects\\practice\\practice\\person.h(13): error C2079: &#39;Person::birthDate&#39; uses undefined class &#39;Date&#39;"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1422472719, "post_id": 28200438, "comment_id": 44767319, "body": "A <code>Person</code> is usually not a <code>Date</code>, so it doesn&#39;t qualify for the inheritance relationship.  A person <i>has-a</i> birthdate, which indicates a containment relationship."}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422472723, "post_id": 28200438, "comment_id": 44767323, "body": "I explained above that it was a hack to make Date visible to Person. It &quot;works&quot;, but it&#39;s lousy code."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422472764, "post_id": 28200438, "comment_id": 44767350, "body": "What&#39;s the error if you remove the inheritance?"}, {"owner": {"reputation": 52926, "user_id": 11898, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5757e5b62594659eedfef289274502a3?s=128&d=identicon&r=PG", "display_name": "Scott Langham", "link": "https://stackoverflow.com/users/11898/scott-langham"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1422472793, "post_id": 28200438, "comment_id": 44767364, "body": "@drescherjm - It shouldn&#39;t... that&#39;s roughly what the original question is."}, {"owner": {"reputation": 356, "user_id": 1264253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fb85a65bdabc92b2ac49807ced0d88?s=128&d=identicon&r=PG", "display_name": "PDizzle745", "link": "https://stackoverflow.com/users/1264253/pdizzle745"}, "edited": false, "score": 3, "creation_date": 1422472796, "post_id": 28200438, "comment_id": 44767368, "body": "If you&#39;re getting redefined issues, it sounds like it&#39;s header guards. You&#39;re using VS, so add the line <code>#pragma once</code> to the top of each class file and try again."}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422472954, "post_id": 28200438, "comment_id": 44767469, "body": "But after I split the code into header and .cpp files, even making Date the Parent class of Person doesn&#39;t work. So something else is needed"}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422473172, "post_id": 28200438, "comment_id": 44767593, "body": "I added #pragma once to the top of each file. Now get error C2146: syntax error : missing &#39;;&#39; before identifier &#39;title&#39; as the first error and lots more"}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422473271, "post_id": 28200438, "comment_id": 44767661, "body": "Adding the pragma line did resolve the inability of VS to recognize the Date class, but still getting a lot of misc strange errors error C4430: missing type specifier - int assumed. Note: C++ does not support default-int"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422473280, "post_id": 28200438, "comment_id": 44767665, "body": "@Max &quot;doesn&#39;t work&quot; is about as nebulous as you can get. The exact error message produced would be considerably more informative, and belongs in your question. Setup header guards or a pragma-once as suggested. And btw, <b><i>all</i></b> your standard strings <code>string</code> should be <code>std::string</code>. <i>don&#39;t</i> &quot;fix&quot; that by shoving a <code>using namespace std;</code> in a header file."}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422473290, "post_id": 28200438, "comment_id": 44767669, "body": "error C2146: syntax error : missing &#39;;&#39; before identifier &#39;getTitle&#39;"}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422473404, "post_id": 28200438, "comment_id": 44767735, "body": "@WhozCraig, that&#39;s interesting that you should mention that. I tried using only std:: instead of both, but VS doesn&#39;t seem to work unless both are present in some way. Either VS is buggy or I just don&#39;t understand how to use it"}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422473461, "post_id": 28200438, "comment_id": 44767777, "body": "Sorry, what I meant by &quot;doesn&#39;t work&quot; is that the program will not compile. If I can get it to compile, I can get the rest myself."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1422473628, "post_id": 28200438, "comment_id": 44767875, "body": "@Max Something <a href=\"http://pastebin.com/v5U78V9v\" rel=\"nofollow noreferrer\">like this</a>, though that may be a little off the radar."}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422474164, "post_id": 28200438, "comment_id": 44768129, "body": "@WhozCraig Thanks a lot. It does compile, however the code still isn&#39;t split into header and cpp files. I&#39;ll come back when I see the results of that. This does work, though, with the include for Date.h, so there is progress!"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422474267, "post_id": 28200438, "comment_id": 44768171, "body": "@Max the little code posted didn&#39;t really need to be split into cpp files, but if you&#39;re just wanting to learn how to do it that is a decent starting point. Best of luck."}], "answers": [{"tags": [], "owner": {"reputation": 52926, "user_id": 11898, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5757e5b62594659eedfef289274502a3?s=128&d=identicon&r=PG", "display_name": "Scott Langham", "link": "https://stackoverflow.com/users/11898/scott-langham"}, "is_accepted": false, "score": 2, "last_activity_date": 1422473477, "last_edit_date": 1422473477, "creation_date": 1422473081, "answer_id": 28200704, "question_id": 28200438, "link": "https://stackoverflow.com/questions/28200438/im-trying-to-learn-how-to-properly-separate-class-header-and-code/28200704#28200704", "title": "I&#39;m trying to learn how to properly separate class header and code", "body": "<p>To prevent redefinition errors, add include guards to header files. To be portable, use:</p>\n\n<pre><code>#if !defined(THE_HEADER_NAME_H)\n#define THE_HEADER_NAME_H\n// Usual code and declarations here.\n#endif\n</code></pre>\n\n<p>In Visual Studio, you can use:</p>\n\n<pre><code>#pragma once\n// Usual code and declarations here.\n</code></pre>\n\n<p>In headers, don't write (at global scope level)</p>\n\n<pre><code>using namespace XXXXX\n</code></pre>\n\n<p>because that will cause all files including yours to also use namespace XXXXX which they may not want imposed upon them. If you use types that are in a namespace, type out the entire type name with namespace, so use:</p>\n\n<pre><code>std::string getTitle()\n</code></pre>\n\n<p>(In a cpp file, you can have 'using namespace XXXXX' after any #includes)</p>\n"}, {"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422474536, "post_id": 28200965, "comment_id": 44768314, "body": "Do <i>not</i> make header <i>inclusion</i> dependent on <i>prior</i> header inclusion. The <code>Person.h</code> header file should include <code>Date.h</code>  If that takes properly setting up include guards or pragmas so be it. <code>Person.h</code> needs <code>&lt;string&gt;</code> for <code>std::string</code>, so you include it in the header. It needs <code>Date.h</code> for <code>Date</code>, <i>so include it in the header</i>. If the <code>Person.cpp</code> file needs something else (<code>foo.h</code>) and the header does <i>not</i>, then <i>that</i> belongs in the cpp-files include list; not the headers."}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422475302, "post_id": 28200965, "comment_id": 44768776, "body": "Thank you WhozCraig!! I separated the class into header and cpp files, and it compiles. I will have to study this some more to understand it better. I have work experience in C, but only college with C++ (I have a BS in CS), so I&#39;m trying to master it. Thanks again."}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422475563, "post_id": 28200965, "comment_id": 44768919, "body": "I have a followup question @WhozCraig, if you don&#39;t mind. What is the purpose of using const as in  const std::string Person::getFirstName() const { return firstName; } I&#39;ve never seen const used like this. I know it obviously means &quot;constant&quot;, but I&#39;ve vague on its use here."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422476651, "post_id": 28200965, "comment_id": 44769543, "body": "@Max it is a contract with the object that warrants non-mutable access. Ex: given a <code>const Person&amp;</code>, your prior code would <i>not</i> allow execution of any of your &#39;getters&quot; because the reference is <code>const</code> but the member fns were <i>not</i>. <i>Usually</i> &quot;getters&quot; are <code>const</code>, as they don&#39;t modify the object anyway, and setters are <i>not</i>."}, {"owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422476844, "post_id": 28200965, "comment_id": 44769667, "body": "Thank you very much. C++ is a huge pain to code. Java is a lot easier"}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "reply_to_user": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "edited": false, "score": 0, "creation_date": 1422476981, "post_id": 28200965, "comment_id": 44769746, "body": "@Max both languages have their pros and cons :)"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1422474646, "last_edit_date": 1422474646, "creation_date": 1422474098, "answer_id": 28200965, "question_id": 28200438, "link": "https://stackoverflow.com/questions/28200438/im-trying-to-learn-how-to-properly-separate-class-header-and-code/28200965#28200965", "title": "I&#39;m trying to learn how to properly separate class header and code", "body": "<p>You have 2 problems IMHO.</p>\n\n<p>First is the guards problem that Scott Langham's answer will solve.</p>\n\n<p>The second is a problem of namespaces.</p>\n\n<p>I assume that in your working source, you have (directly on indirectly via stdafx.h or another include) :</p>\n\n<pre><code>#include &lt;string&gt;\n\nusing namespace std;\n</code></pre>\n\n<p>It is not recommended to have <code>using namespace std;</code> in a <code>.h</code> header file ... but that means that you should use <code>std::string</code> instead of <code>string</code>:</p>\n\n<p>date.h </p>\n\n<pre><code>class Date {\n    private:\n        int month;\n        int day;\n        int year;\n    public:\n        Date::Date() { }                                                //Date class constructor with 0 arguments\n        virtual ~Date() {}                                              //Date class destructor\n        Date( int aMonth, int aDay, int aYear ) {                       //Date class constructor with 3 arguments\n            this-&gt;month = aMonth;                                       // Set the private member data with the argument data\n            this-&gt;year = aYear;\n            this-&gt;day = aDay;\n            }       \n        //\"Getter\" functions for the Date class\n        int getMonth(){return this-&gt;month;}                             \n        int getYear() {return this-&gt;year;}\n        int getDay() {return this-&gt;day;} \n\n        //\"Setter\" functions for the Date class\n        void setDay( int aDay ){ this-&gt;day = aDay; }                    \n        void setMonth( int aMonth )  { this-&gt;month = aMonth; }  \n        void setYear( int aYear ) { this-&gt;year = aYear; }\n\n};\n</code></pre>\n\n<p>person.h (string -> std::string and remove method implementations)</p>\n\n<pre><code>#include &lt;string&gt;\n#include \"Date.h\"\n\nclass Person : public Date{\n\nprivate:                                                                //Private data members\n    std::string title;\n    std::string firstName;\n    std::string lastName;\n    Date birthDate;\n\npublic:\n    Person::Person() {}                                                 //Person class constructor with 0 arguments\n    Person(std::string title, \n        std::string firstName, \n        std::string lastName, \n        Date birthDay);                                                 //Person class constructor with 4 arguments\n\n    virtual ~Person(){}                                                 //Person class destructor\n\n    //\"Getter\" functions for the Person class\n    std::string getTitle();\n    std::string getFirstName();\n    std::string getLastName();\n    Date getBirthDay();\n\n    //\"Setter\" functions for the Person class\n    void setTitle(std::string Title);\n    void setFirstName(std::string fName);\n    void setLastName (std::string lName);\n    void setBirthday (Date aBirthday);\n};\n</code></pre>\n\n<p>person.cpp (fixed includes and constructor)</p>\n\n<pre><code>#include &lt;string&gt;\n#include \"Person.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\n//Person class constructor with 0 arguments\nPerson::Person(string atitle, string afirstName, string alastName, Date abirthDay) {\n    title = atitle,\n          firstName = afirstName,\n          lastName = alastName,\n          birthDate = abirthDay;\n}\n\n//\"Getter\" functions for the Person class\nstring Person::getTitle() { return title; }\nstring Person::getFirstName() { return firstName; }\nstring Person::getLastName() { return lastName; }\nDate Person::getBirthDay() { return birthDate; }\n\n//\"Setter\" functions for the Person class\nvoid Person::setTitle(string Title) { this-&gt;title = Title; }\nvoid Person::setFirstName(string fName) { this-&gt;firstName = fName; }\nvoid Person::setLastName (string lName) { this-&gt;lastName = lName; }\nvoid Person::setBirthday (Date aBirthday) { this-&gt;birthDate = aBirthday; }\n</code></pre>\n\n<p>It can even be used without guards, but guard are anyway a good practice.</p>\n\n<p>In fact as <code>Date.h</code> is included in <code>Person.h</code> it should really have a guard - not shown here for simplicity</p>\n"}], "owner": {"reputation": 19, "user_id": 4504001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000176921469/picture?type=large", "display_name": "Max", "link": "https://stackoverflow.com/users/4504001/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1422474646, "creation_date": 1422472180, "last_edit_date": 1422473679, "question_id": 28200438, "link": "https://stackoverflow.com/questions/28200438/im-trying-to-learn-how-to-properly-separate-class-header-and-code", "title": "I&#39;m trying to learn how to properly separate class header and code", "body": "<p>I have a class project that I did from college that \"works\", but isn't constructed properly.</p>\n\n<p>It has a Date class and a Person class.</p>\n\n<p>In my \"working\" code, all of the class data (constructors, members, and functions) are contained within a single header file for each class (a separate file for each class).</p>\n\n<p>The program loads text file data (Persons, presidents and actors) into a vector, sorts, filters and prints the data on the console, and saves it to a file.</p>\n\n<p>In the Person class constructor (and functions), the Date class is instantiated for a \"birthdate\" object. Then the birthday is used in the program.</p>\n\n<p>The problem I'm having is this:</p>\n\n<p>I can easily instantiate \"Date\" in the Person constructor and members, if all the class code is in a header file for each class, AND I make the Date the \"Parent\" class for Person. But if I don't do both of these things, then \"Person\" doesn't know anything about \"Date\" and cannot instantiate anything from Date.</p>\n\n<p>If I use an #include \"Date.h\" in Person.h, this creates even more problems and doesn't work either.</p>\n\n<p>Of course, \"Date\" is not a proper parent class for \"Person\", but it was the only way I could hack the code to make it work lol. When I first coded this years ago in college, I never did figure out how to divide the class code properly in so that it would compile and run. The \"working code\" with all the class code in a header file is my hack. I want to learn how to do it the right way.</p>\n\n<p>I have pasted in the bare minimum example below of what \"works\" and what doesn't. Any tips to make this code work with the classes divided into header and .cpp files would be much appreciated.</p>\n\n<h3>What works:</h3>\n\n<pre><code>class Date {\n    private:\n        int month;\n        int day;\n        int year;\n\n    public:\n        Date::Date() {}\n        virtual ~Date() {}\n        Date( int aMonth, int aDay, int aYear ) {\n            this-&gt;month = aMonth;\n            this-&gt;year = aYear;\n            this-&gt;day = aDay;\n        }\n\n        // \"Getter\" functions for the Date class\n        int getMonth(){return this-&gt;month;}\n        int getYear() {return this-&gt;year;}\n        int getDay() {return this-&gt;day;}\n\n        // \"Setter\" functions for the Date class\n        void setDay( int aDay ){ this-&gt;day = aDay; }\n        void setMonth( int aMonth )  { this-&gt;month = aMonth; }\n        void setYear( int aYear ) { this-&gt;year = aYear; }\n};\n\nclass Person : public Date{\n    private:\n        string title;\n        string firstName;\n        string lastName;\n        Date birthDate;\n\n    public:\n        Person::Person() {}\n        Person(string title, string firstName, string lastName, Date birthDay);\n        virtual ~Person() {}\n\n        //\"Getter\" functions for the Person class\n        string getTitle() { return title; }\n        string getFirstName() { return firstName; }\n        string getLastName() { return lastName; }\n        Date getBirthDay() { return birthDate; }\n\n        //\"Setter\" functions for the Person class\n        void setTitle(string Title) { this-&gt;title = Title; }\n        void setFirstName(string fName) { this-&gt;firstName = fName; }\n        void setLastName (string lName) { this-&gt;lastName = lName; }\n        void setBirthday (Date aBirthday) { this-&gt;birthDate = aBirthday; }\n};\n</code></pre>\n\n<h3>What doesn't work (Doesn't compile):</h3>\n\n<p><strong>Date.h</strong></p>\n\n<pre><code>class Date {\n    private:\n        int month;\n        int day;\n        int year;\n    public:\n        Date();\n        virtual ~Date() {}\n        Date( int aMonth, int aDay, int aYear );\n\n        //Getters and setters\n        int getMonth();\n        int getYear() ;\n        int getDay();\n        void setDay( int aDay );\n        void setMonth( int aMonth ) ;\n        void setYear( int aYear ) ;\n\n};\n</code></pre>\n\n<p><strong>Date.cpp</strong></p>\n\n<pre><code>#include \"Date.h\"\nDate::Date() {}\nDate::Date( int aMonth, int aDay, int aYear ) {\n    this-&gt;month = aMonth;\n    this-&gt;year = aYear;\n    this-&gt;day = aDay;\n}\n\nint Date::getMonth(){return this-&gt;month;}\nint Date::getYear() {return this-&gt;year;}\nint Date::getDay()  {return this-&gt;day;}\n\n//\"Setter\" functions for the Date class\nvoid Date::setDay( int aDay ){ this-&gt;day = aDay; }\nvoid Date::setMonth( int aMonth )  { this-&gt;month = aMonth; }\nvoid Date::setYear( int aYear ) { this-&gt;year = aYear; }\n</code></pre>\n\n<p><strong>Person.h</strong></p>\n\n<pre><code>#include &lt;string&gt;\n\nclass Person{\n    private:\n        string title;\n        string firstName;\n        string lastName;\n        Date birthDate;\n\n    public:\n        //Person::Person() {}\n        Person(string title, string firstName, string lastName, Date birthDay); \n\n        //\"Getter\" functions for the Person class\n        string getTitle() { return title; }\n        string getFirstName() { return firstName; }\n        string getLastName() { return lastName; }\n        Date getBirthDay() { return birthDate; }\n\n        //\"Setter\" functions for the Person class\n        void setTitle(string Title) { this-&gt;title = Title; }\n        void setFirstName(string fName) { this-&gt;firstName = fName; }\n        void setLastName (string lName) { this-&gt;lastName = lName; }\n        void setBirthday (Date aBirthday) { this-&gt;birthDate = aBirthday; }\n    };\n</code></pre>\n\n<p><strong>Person.cpp</strong></p>\n\n<pre><code>#include \"Person.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\n//Person class constructor with 0 arguments\nPerson::Person(string atitle, string afirstName, string alastName, Date abirthDay) {\n    title = atitle,\n          firstName = afirstName,\n          lastName = alastName,\n          birthday = abirthDay)\n}\n\n//\"Getter\" functions for the Person class\nstring Person::getTitle() { return title; }\nstring Person::getFirstName() { return firstName; }\nstring Person::getLastName() { return lastName; }\nDate Person::getBirthDay() { return birthDate; }\n\n//\"Setter\" functions for the Person class\nvoid Person::setTitle(string Title) { this-&gt;title = Title; }\nvoid Person::setFirstName(string fName) { this-&gt;firstName = fName; }\nvoid Person::setLastName (string lName) { this-&gt;lastName = lName; }\nvoid Person::setBirthday (Date aBirthday) { this-&gt;birthDate = aBirthday; }\n</code></pre>\n\n<h3>Operating system notes</h3>\n\n<p>I'm using MS Visual Studio 2012 Update 4 on a Windows 7 PC.</p>\n"}, {"tags": ["c++", "reference"], "answers": [{"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 7, "last_activity_date": 1422472163, "creation_date": 1422472163, "answer_id": 28200432, "question_id": 28200388, "link": "https://stackoverflow.com/questions/28200388/how-does-this-return-a-reference/28200432#28200432", "title": "How does this return a reference?", "body": "<p><code>return instance;</code> does return a reference to <code>instance</code>. That is just like</p>\n\n<pre><code>int&amp; r = a;\n</code></pre>\n\n<p>for some <code>int a</code> creates a reference to <code>a</code> without needing to write <code>a&amp;</code> or something like this.</p>\n"}, {"tags": [], "owner": {"reputation": 10212, "user_id": 970543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wq9T6.jpg?s=128&g=1", "display_name": "Nik Bougalis", "link": "https://stackoverflow.com/users/970543/nik-bougalis"}, "is_accepted": true, "score": 2, "last_activity_date": 1422472610, "creation_date": 1422472610, "answer_id": 28200553, "question_id": 28200388, "link": "https://stackoverflow.com/questions/28200388/how-does-this-return-a-reference/28200553#28200553", "title": "How does this return a reference?", "body": "<p>No, it's correct as written. The compiler will create and return a reference to <code>instance</code> from the function <code>getInstance</code>.</p>\n\n<p>You ask whether it should be <code>instance&amp;</code>. First of all, that is not syntactically valid. What about <code>&amp;instance</code> then? That would take the address of <code>instance</code> and would, therefore, return an <code>instance *</code>.</p>\n\n<p>The multiple uses of the <code>&amp;</code> operator are a common source of confusion. Here's a quick \"cheat-sheet\" that doesn't use complex terminology from the standard:</p>\n\n<p>The binary (two argument) version of <code>&amp;</code> is applied against two instances of variables and represents bitwise AND (except when overloaded).</p>\n\n<pre><code>unsigned int a = 7;\nunsigned int b = 3;\nunsigned int c = a &amp; b; // c = 3\n</code></pre>\n\n<p>The unary (one argument) version of <code>&amp;</code> when applied to a type denotes a reference to a type. Example:</p>\n\n<pre><code>int a = 7;\nint&amp; ref_a = a; // ref_a is a reference to a\n</code></pre>\n\n<p>The unary (one argument) version of <code>&amp;</code> when applied to a variable denotes the <code>address-of</code> operator and yields a pointer to the variable.</p>\n\n<pre><code>int a = 7;\nint* ptr_a = &amp;a;\n</code></pre>\n"}], "owner": {"reputation": 552, "user_id": 3886129, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/XMREQ.jpg?s=128&g=1", "display_name": "Nooble", "link": "https://stackoverflow.com/users/3886129/nooble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 28200553, "answer_count": 2, "score": -1, "last_activity_date": 1422472610, "creation_date": 1422471997, "question_id": 28200388, "link": "https://stackoverflow.com/questions/28200388/how-does-this-return-a-reference", "title": "How does this return a reference?", "body": "<p>I've been trying to learn how to use a singleton design pattern and stumbled across this:</p>\n\n<pre><code>    static S&amp; getInstance()\n    {\n        static S instance;\n        return instance;\n    }\n</code></pre>\n\n<p>I noticed here that it returns <code>instance</code>, shouldn't it be supposed to return an <code>instance&amp;</code>? </p>\n\n<p>Edit: I should also mention that the compiler doesn't seem to be making any complaints.</p>\n"}, {"tags": ["c++", "opencv", "ubuntu", "video", "ffmpeg"], "comments": [{"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1422472937, "post_id": 28200349, "comment_id": 44767462, "body": "You don&#39;t say in your question, do you definitely have a <a href=\"http://www.fourcc.org/codecs.php\" rel=\"nofollow noreferrer\">codec</a> installed?"}, {"owner": {"reputation": 4949, "user_id": 2191652, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3cfa80e86236c34a19d11dfa54262d40?s=128&d=identicon&r=PG", "display_name": "mcExchange", "link": "https://stackoverflow.com/users/2191652/mcexchange"}, "reply_to_user": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1422477191, "post_id": 28200349, "comment_id": 44769881, "body": "I compiled ffmpeg from source before compiling OpenCV (ffmpeg -version says that I have ffmpeg 2.3.3 installed).I compiled OpenCV from source (version 2.4.5) and ccmake says that it definitely found ffmpeg. I&#39;m not sure which codecs are used by vlc and the videoplayer but since I can encode videos I thought I should be able to decode them in the same format (as in the second coding example)"}], "answers": [{"tags": [], "owner": {"reputation": 4949, "user_id": 2191652, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3cfa80e86236c34a19d11dfa54262d40?s=128&d=identicon&r=PG", "display_name": "mcExchange", "link": "https://stackoverflow.com/users/2191652/mcexchange"}, "is_accepted": false, "score": 0, "last_activity_date": 1422883936, "creation_date": 1422883936, "answer_id": 28278899, "question_id": 28200349, "link": "https://stackoverflow.com/questions/28200349/cannot-play-video-created-by-opencv-using-ubuntu-12-04/28278899#28278899", "title": "Cannot play video created by OpenCV (using Ubuntu 12.04)", "body": "<p>Since I gave up on writing videos using Opencv I just want to mention how I resolved my problem. After saving every image as a png file, I'm using ffmpeg from linux command line to write the sequence of images as a video.</p>\n\n<p>Pictures are named sequentially like this:\n00001.png,\n00002.png,\n00003.png,\n[\u2026]</p>\n\n<p>Then I use this command</p>\n\n<blockquote>\n  <p>ffmpeg -i %5d.png -vcodec mpeg4 test.avi</p>\n</blockquote>\n"}], "owner": {"reputation": 4949, "user_id": 2191652, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3cfa80e86236c34a19d11dfa54262d40?s=128&d=identicon&r=PG", "display_name": "mcExchange", "link": "https://stackoverflow.com/users/2191652/mcexchange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 862, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422883936, "creation_date": 1422471875, "question_id": 28200349, "link": "https://stackoverflow.com/questions/28200349/cannot-play-video-created-by-opencv-using-ubuntu-12-04", "title": "Cannot play video created by OpenCV (using Ubuntu 12.04)", "body": "<p>I tried to write a video from a sequence of images created by OpenCV. However I cannot open the videos after writing them. I guess there is a codec issue. I find it extremely difficult where the error exactly comes from. Here is my code:</p>\n\n<pre><code>    Size size = Size(vecOfMats[0].rows,vecOfMats[0].cols);\n    int codec = CV_FOURCC('D', 'I', 'V', 'X');\n\n    VideoWriter videoWriter;\n    videoWriter.open(outputFilename,codec,15.0,size,true);\n\n    for(int z=0; z &lt; vecOfMats.size(); z++)\n    {\n        videoWriter.write(vecOfMats[z]);\n    }\n    videoWriter.release();\n</code></pre>\n\n<p>I also tried all of these codecs without success (either OpenCv could not find the codec or the video could not be opened):</p>\n\n<pre><code>int codec = CV_FOURCC('P','I','M','1');   // = MPEG-1 codec\nint codec = CV_FOURCC('M','J','P','G');   // = motion-jpeg codec - cannot be played by VLC\nint codec = CV_FOURCC('M', 'P', '4', '2');// = MPEG-4.2 codec - not found\nint codec = CV_FOURCC('D', 'I', 'V', '3');// = MPEG-4.3 codec - not found\nint codec = CV_FOURCC('D', 'I', 'V', 'X');// = MPEG-4 codec - cannot be played by VLC\nint codec = CV_FOURCC('U', '2', '6', '3');// = H263 codec - must have w/h = 4\nint codec = CV_FOURCC('I', '2', '6', '3');// = H263I codec - not found\n</code></pre>\n\n<p>I even took the codec of a video opened via OpenCV previously (without success):</p>\n\n<pre><code>string filename = \"/path/to/the/video/myVideo.avi\";\nVideoCapture capture(filename);\nint ex = static_cast&lt;int&gt;(capture.get(CV_CAP_PROP_FOURCC));             // Get Codec Type- Int form\nchar EXT[] = {(char)(ex &amp; 0XFF) , (char)((ex &amp; 0XFF00) &gt;&gt; 8),(char)((ex &amp; 0XFF0000) &gt;&gt; 16),(char)((ex &amp; 0XFF000000) &gt;&gt; 24), 0};// Transform from int to char via Bitwise operators\ncout&lt;&lt;\"Codec: \"&lt;&lt;ex&lt;&lt;endl;\nVideoWriter videoWriter;\nvideoWriter.open(outputFilename,ex,15.0,size,true);\n</code></pre>\n\n<p>I'm not even sure if the problem lies with my OpenCV or my Ubuntu :/. \n(I tried to open them using the default video player and vlc)</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 1309, "user_id": 3495829, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39b722b155ba7bb1288a84c00e11e888?s=128&d=identicon&r=PG&f=1", "display_name": "qeadz", "link": "https://stackoverflow.com/users/3495829/qeadz"}, "edited": false, "score": 0, "creation_date": 1422471929, "post_id": 28200297, "comment_id": 44766871, "body": "What is the function signature for GetVert()?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1422472015, "post_id": 28200297, "comment_id": 44766925, "body": "Likely, you are taking the address of a temporary"}, {"owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "edited": false, "score": 0, "creation_date": 1422472190, "post_id": 28200297, "comment_id": 44767020, "body": "CoreExport Point3 GetVert(int i); CoreExport is a dllimport/export macro"}, {"owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "edited": false, "score": 0, "creation_date": 1422472381, "post_id": 28200297, "comment_id": 44767136, "body": "Dieter L&#252;cking: derp, guess there is nothing I can do about that."}, {"owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "edited": false, "score": 0, "creation_date": 1422473294, "post_id": 28200297, "comment_id": 44767675, "body": "How are you even compiling it? gcc 4.9.2 gives me an error on this: <code>error: taking address of temporary [-fpermissive]</code>. Additionally, this line: <code>last = current;</code>  gives another one: <code>error: no match for \u2018operator=\u2019 (operand types are \u2018Point3\u2019 and \u2018Point3*\u2019)</code>, which is quite correct (as <code>Point3* current, last;</code> means <code>Point3* current; Point3 last;</code>)."}, {"owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "edited": false, "score": 0, "creation_date": 1422503752, "post_id": 28200297, "comment_id": 44778799, "body": "it was a typo on explaining the problem, supposed to be *last on first line. otherwise it compiles fine on vc++11"}], "answers": [{"comments": [{"owner": {"reputation": 2904, "user_id": 2283531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/40555433e8da6e6720cd2c91296c6574?s=128&d=identicon&r=PG&f=1", "display_name": "Javi", "link": "https://stackoverflow.com/users/2283531/javi"}, "edited": false, "score": 0, "creation_date": 1422472595, "post_id": 28200490, "comment_id": 44767246, "body": "It will be efficient in the sense that there is no copy of  the <code>Point3</code> from <code>GetVert``to </code>current`. But there is a construction anyway, which is extremely infefficient in this case. Am I wrong?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2904, "user_id": 2283531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/40555433e8da6e6720cd2c91296c6574?s=128&d=identicon&r=PG&f=1", "display_name": "Javi", "link": "https://stackoverflow.com/users/2283531/javi"}, "edited": false, "score": 0, "creation_date": 1422472892, "post_id": 28200490, "comment_id": 44767422, "body": "@JaviV Given the choice between code that definitely works and code that definitely doesn&#39;t work, I&#39;ll take the functional code every time. The only way to avoid any extra constructions is to have <code>GetVert()</code> return a <code>Point3&amp;</code> or <code>Point3*</code>."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 0, "last_activity_date": 1422472822, "last_edit_date": 1422472822, "creation_date": 1422472364, "answer_id": 28200490, "question_id": 28200297, "link": "https://stackoverflow.com/questions/28200297/getting-a-pointer-to-a-value-result-from-a-function/28200490#28200490", "title": "Getting a pointer to a value result from a function", "body": "<p>This line of code:</p>\n\n<pre><code>current = &amp;mesh-&gt;GetVert(0);\n</code></pre>\n\n<p>can perhaps be more illustratively thought of as:</p>\n\n<pre><code>{\n    Point3 _tmp_point = mesh-&gt;GetVert(0);\n    current = &amp;_tmp_point;\n    // _tmp_point gets destroyed\n}\n// current points to destroyed temporary\n</code></pre>\n\n<p>(Note: I'm assuming that <code>GetVert</code> returns a <code>Point3</code> and not a <code>Point3&amp;</code>, otherwise you wouldn't be having any problems)</p>\n\n<p>Basically the problem is that <code>current</code> points to a temporary <code>Point3</code> that gets the destroyed at the end of the assignment statement. The code as written guarantees that you have a dangling pointer!</p>\n\n<p>The simple solution is just to note use pointers:</p>\n\n<pre><code>for (int i = 1; i &lt; mesh-&gt;VertCount(); i++) {\n    Point3 current = mesh-&gt;GetVert(i);\n    // etc.\n</code></pre>\n\n<p>Note that due to the <a href=\"http://en.wikipedia.org/wiki/Return_value_optimization\" rel=\"nofollow\">Return Value Optimization</a>, <code>GetVert()</code> will likely construct its returned object in-place in <code>current</code> - so this will be efficient. </p>\n"}], "owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 28200490, "answer_count": 1, "score": 0, "last_activity_date": 1422472822, "creation_date": 1422471728, "question_id": 28200297, "link": "https://stackoverflow.com/questions/28200297/getting-a-pointer-to-a-value-result-from-a-function", "title": "Getting a pointer to a value result from a function", "body": "<p>I'm working with a framework that delivers and sets vertex positions only through function calls. For instance </p>\n\n<pre><code>Point3 pos = mesh-&gt;GetVert(0);\nmesh-&gt;SetVert(0, pos);\n</code></pre>\n\n<p>Now I'm trying to optimize an algorithm that requires me to loop through all the vertices and also keep the last vertex in mind so I tried this:</p>\n\n<pre><code>Point3* current, last;\ncurrent = &amp;mesh-&gt;GetVert(0);\nfor (int i = 1; i &lt; mesh-&gt;VertCount(); i++) {\n    last = current;\n    current = &amp;mesh-&gt;GetVert(i);\n\n    do stuff...\n}\n</code></pre>\n\n<p>but what I found out was that the pointer current gets set to something like 0x12003 every single time and never actually points to the Point3 data. I was under the impression that what I tried to do was possible? After all, when dealing with the same frameworks worldspaces(glorified matrices), adding &amp; in front of the querying function call successfully returns a pointer to the worldspace object.</p>\n\n<p>Confused now, what gives?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 6852, "user_id": 214762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d0879a01a4294a36eba6d1ea21699e?s=128&d=identicon&r=PG", "display_name": "RA.", "link": "https://stackoverflow.com/users/214762/ra"}, "edited": false, "score": 2, "creation_date": 1422471400, "post_id": 28200096, "comment_id": 44766581, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2203388/c-templates-polymorphism\">C++ Templates polymorphism</a>"}, {"owner": {"reputation": 21, "user_id": 1168115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c93da234e017f64a112c7764a29a6f0?s=128&d=identicon&r=PG", "display_name": "Doug Beyer", "link": "https://stackoverflow.com/users/1168115/doug-beyer"}, "reply_to_user": {"reputation": 6852, "user_id": 214762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d0879a01a4294a36eba6d1ea21699e?s=128&d=identicon&r=PG", "display_name": "RA.", "link": "https://stackoverflow.com/users/214762/ra"}, "edited": false, "score": 0, "creation_date": 1422539165, "post_id": 28200096, "comment_id": 44795830, "body": "I read the polymorphism link and that did explain the overall issue. However, the error message states that it can&#39;t convert the &quot;QList&lt;T&gt;&quot; to a &quot;QList&lt;T&gt; &amp;&quot;. Ignorning the lack of template polymorphism, I would think that my list is being passed by reference as written. So why did the template polymorphism issue cause that specific error message?"}], "owner": {"reputation": 21, "user_id": 1168115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c93da234e017f64a112c7764a29a6f0?s=128&d=identicon&r=PG", "display_name": "Doug Beyer", "link": "https://stackoverflow.com/users/1168115/doug-beyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 915, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422471077, "creation_date": 1422471077, "question_id": 28200096, "link": "https://stackoverflow.com/questions/28200096/qt-c2664-cannot-convert-parameter-1-from-qlistt-to-qlistt", "title": "Qt - C2664 - cannot convert parameter 1 from &#39;QList&lt;T&gt;&#39; to &#39;QList&lt;T&gt; &amp;&#39;", "body": "<p>Using Qt 5.4 and compiling in Qt Creator.</p>\n\n<p>In widget 1, there is a file-scoped QList:</p>\n\n<pre><code>static QList&lt; Tag * &gt; g_Tags;\n</code></pre>\n\n<p>Note that Tag inherits from BaseDataObject. Both Tag and BaseDataObject have private, undefined copy constructors and operator=() functions.</p>\n\n<p>Also in widget 1, there is the following constructor call:</p>\n\n<pre><code>MoverDialog dlg( g_Tags, this );\n</code></pre>\n\n<p>In simplified form, MoverDialog.h looks like:</p>\n\n<pre><code>class MoverDialog : public QDialog\n{\nQ_OBJECT\n\npublic:\n    ///////////////////////////////////////////////////////////////////////////////////////////\n    //  Constructors/Destructor\n\n    explicit MoverDialog(   QList&lt; BaseDataObject * &gt; &amp; availableList,\n                            QWidget * parent = 0 );\n    virtual ~MoverDialog();\n\netc. etc.\n</code></pre>\n\n<p>When I compile this code, I get the following error:</p>\n\n<pre><code>D:\\MyDocs\\Projects\\dsb\\Src\\Apps\\RecipeMgr_Qt\\Source\\Ui\\RecipeGeneralWidget.cpp:166: error: C2664: \n'MoverDialog::MoverDialog(QList&lt;T&gt; &amp;,QList&lt;T&gt; &amp;,QWidget *)' : cannot convert parameter 1 \nfrom 'QList&lt;T&gt;' to 'QList&lt;T&gt; &amp;'\nwith\n[\n    T=recipemgr::BaseDataObject *\n]\nand\n[\n    T=recipemgr::Tag *\n]\nand\n[\n    T=recipemgr::BaseDataObject *\n]]\n</code></pre>\n\n<p>Compilation succeeds if I change the declaration of the file-scoped list to:</p>\n\n<pre><code>static QList&lt; BaseDataObject * &gt; g_Tags;\n</code></pre>\n\n<p>Why does compilation fail with the file-scoped list declared using \"Tag *\" like shown at the top of this posting?</p>\n"}, {"tags": ["c++", "c++11", "initialization"], "comments": [{"owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "reply_to_user": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "edited": false, "score": 0, "creation_date": 1422472086, "post_id": 28200049, "comment_id": 44766953, "body": "@Casey: This is a not duplicate. I was asking about the syntax forms <code>T{p}</code> and <code>T={p}</code>, which cover several types of initialization under the standard. The other question refers only to list initialization.  My question is broader, for example it also covers C++ &quot;value initialization&quot; and C++ &quot;aggregate initialization&quot; as well as list initialization."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1422472329, "post_id": 28200049, "comment_id": 44767099, "body": "<i>List-initialization</i> is initialization of an object or reference from a <i>braced-init-list</i> ([dcl.init.list]/p1). It includes the aggregate initialization case for types that are aggregates, and the value initialization case of <code>{}</code> used with non-aggregates."}, {"owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422473326, "post_id": 28200049, "comment_id": 44767698, "body": "@T.C., I&#39;m not convinced. [dcl.inti.list] doesn&#39;t appear to cover agreegates. [dcl.init.aggr] covers aggregates. Also, <a href=\"http://en.cppreference.com/w/cpp/language/initialization\" rel=\"nofollow noreferrer\">this page</a> appears to me to distinguish between list initialization and aggregate initialization."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422474687, "post_id": 28200049, "comment_id": 44768412, "body": "The master algorithm for initialization is in [dcl.init]/p17, which jumps to [dcl.init.list] in its first bullet for all <i>braced-init-list</i>s. In turn, the first bullet in [dcl.init.list]/p3 covers aggregates (by referring to [dcl.init.aggr])."}, {"owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422771136, "post_id": 28200049, "comment_id": 44877581, "body": "@T.C., thanks for the references, I understand now. I did try searching before I posted this question. I searched for &quot;brace initialization&quot; and &quot;curly brace initialization&quot; but didn&#39;t find the referenced article."}], "owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "closed_date": 1422471412, "answer_count": 0, "score": 5, "last_activity_date": 1422471279, "creation_date": 1422470915, "last_edit_date": 1422471218, "question_id": 28200049, "link": "https://stackoverflow.com/questions/28200049/c11-initialization-tp-vs-t-p", "closed_reason": "Duplicate", "title": "c++11 initialization T{p, ...} vs T = {p, ...}", "body": "<p>In his new book <a href=\"https://rads.stackoverflow.com/amzn/click/com/1491903996\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Effective Modern C++</a>, Scott Meyers makes the statement in the section \"Items 7: Distinguish between () and {} when creating objects,\" that:</p>\n\n<blockquote>\n  <p>I'll generally ignore the equals-sign-plus-braces syntax, because C++\n  usually treats it the same as the braces-only version.</p>\n</blockquote>\n\n<p>Taking note of the \"usually\" qualifier, how does when and how does <code>= { ... }</code> differ from plain <code>{ ... }</code>?</p>\n"}, {"tags": ["c++", "c++11", "g++", "codeblocks"], "comments": [{"owner": {"reputation": 1309, "user_id": 3495829, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39b722b155ba7bb1288a84c00e11e888?s=128&d=identicon&r=PG&f=1", "display_name": "qeadz", "link": "https://stackoverflow.com/users/3495829/qeadz"}, "edited": false, "score": 1, "creation_date": 1422470923, "post_id": 28200004, "comment_id": 44766335, "body": "Your main() function tries to pipe game.m_digit to cout as well as read it in from cin. Main is unable to see m_digit because it is private. Try reading into a temporary variable and then calling setDigit() and getDigit() as per your class&#39; interface."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1422480898, "post_id": 28200068, "comment_id": 44771742, "body": "There are some getter methods already, they just aren&#39;t being called :)"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 3, "last_activity_date": 1422470997, "creation_date": 1422470997, "answer_id": 28200068, "question_id": 28200004, "link": "https://stackoverflow.com/questions/28200004/code-blocks-and-g-error-is-private/28200068#28200068", "title": "code blocks and g++ error &quot;is private&quot;", "body": "<p>The compiler is correct.<br>\nThe statement:</p>\n\n<pre><code>cin &gt;&gt; game.m_digit[i];\n</code></pre>\n\n<p>is accessing a private member:</p>\n\n<pre><code>class bullsAndCows {\nprivate:\n    const int m_size{4};\n    bool m_guessed{false};\n    std::vector&lt;char&gt; m_digit;\n    std::vector&lt;state&gt; m_digitState;\n</code></pre>\n\n<p>Private members can only be accessed by methods inside the class, not by external entities, like the <code>main</code> function.</p>\n\n<p>Your choices are:  </p>\n\n<ul>\n<li>Create getter and setter methods.</li>\n<li>Overload stream extraction operator>> for class <code>bullsAndCows</code></li>\n<li>Make the variables public.</li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3477273"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 28200068, "answer_count": 1, "score": 0, "last_activity_date": 1422471249, "creation_date": 1422470773, "last_edit_date": 1422471249, "question_id": 28200004, "link": "https://stackoverflow.com/questions/28200004/code-blocks-and-g-error-is-private", "title": "code blocks and g++ error &quot;is private&quot;", "body": "<p>I'm getting these errors with the code blocks IDE(with g++ compiler)\n\"is private\" for every member variable. As far as I know it is only legal to use the private variables within the other members, which is what i'm doing. This is the code of my cpp:</p>\n\n<pre><code>/*\nbullsAndCows.cpp\n*/\n\nusing namespace std;\n\n//enum class state {_bull, _cow, _none};\n\nclass bullsAndCows {\nprivate:\n    const int m_size{4};\n    bool m_guessed{false};\n    std::vector&lt;char&gt; m_digit;\n    std::vector&lt;state&gt; m_digitState;\n\npublic:\n    bullsAndCows() {\n        m_guessed = false;\n        for(int i = 0; i &lt; m_size; i++)\n            m_digitState[i] = state._none;\n    }\n\n    void bullsAndCows::setGuessed(bool value) { _guessed = value; }\n    bool bullsAndCows::getGuessed() { return _guessed; }\n    void bullsAndCows::setDigit(char value, int i) { m_digit[i] = value; }\n    char bullsAndCows::getDigit(int i) { return m_digit[i]; }\n    void bullsAndCows::setDigitState(state value, int i) { m_digitState[i] = value; }\n    state bullsAndCows::getDigitState(int i) { return m_digitState[i]; }\n};\n</code></pre>\n\n<p>this the code of my main, where i'm testing:</p>\n\n<pre><code>#include \"bullsAndCows.h\"\n\nusing namespace std;\n\nint main()\n{\n    bullsAndCows game;\n    for(int i = 0; i &lt; game.m_size; i++) {\n        cin &gt;&gt; game.m_digit[i];\n        cout &lt;&lt; game.m_digit[i];\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The c++11 flag is activated on the compiler.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1422470979, "post_id": 28199998, "comment_id": 44766359, "body": "doesn&#39;t <code>ss.str()</code> just return a string, instead of anything else? calling <code>clear</code> on that wouldn&#39;t do too much, I think?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422471025, "post_id": 28199998, "comment_id": 44766381, "body": "Lose the string stream. it isn&#39;t needed. a local <code>str</code> inside outer for-loop using <code>str.append(c)</code> would be sufficient. And <code>&lt;random&gt;</code> would make this <i>much</i> cleaner, btw."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422471133, "post_id": 28199998, "comment_id": 44766428, "body": "Please use character literals, such as &#39;A&#39;, instead of numbers like 97."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422471205, "post_id": 28199998, "comment_id": 44766474, "body": "My understanding is that there are 26 letters in the English alphabet, but you are generating up to 25 different possibilities.  Am I missing something?"}, {"owner": {"reputation": 73, "user_id": 4235432, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e47c51045810f75a24588514802cea0c?s=128&d=identicon&r=PG&f=1", "display_name": "eilchner", "link": "https://stackoverflow.com/users/4235432/eilchner"}, "edited": false, "score": 0, "creation_date": 1422471297, "post_id": 28199998, "comment_id": 44766527, "body": "Should be <code>c= rand()%26 + 97;</code> my bad."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1422471772, "post_id": 28199998, "comment_id": 44766785, "body": "<a href=\"http://ideone.com/N7uZfh\" rel=\"nofollow noreferrer\">Solution with <code>&lt;random&gt;</code></a>."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1422471813, "post_id": 28199998, "comment_id": 44766812, "body": "Using <code>rand</code> in a modern C++ program is a plain horrible thing to do (and if we&#39;re pedantic also just plain wrong), considering the better alternatives. Same goes for using magic numbers like <code>97</code> which already resulted in a bug. Using <code>random</code> instead even avoids the whole arithmetic in the first case."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422472479, "post_id": 28199998, "comment_id": 44767187, "body": "Btw, don&#39;t use that <code>&lt;random&gt;</code> solution with non-ascii platforms. (unlikely you would, but had to mention it). There are ways get around the non-continuity of character series on things like EBCDIC, but it really wasn&#39;t worth the trouble when I posted that sample. Sorry if that offended anyone."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4235432, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e47c51045810f75a24588514802cea0c?s=128&d=identicon&r=PG&f=1", "display_name": "eilchner", "link": "https://stackoverflow.com/users/4235432/eilchner"}, "edited": false, "score": 0, "creation_date": 1422471524, "post_id": 28200211, "comment_id": 44766643, "body": "Works like a charm, thanks a lot. Any idea why my version didn&#39;t work?"}, {"owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "reply_to_user": {"reputation": 73, "user_id": 4235432, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e47c51045810f75a24588514802cea0c?s=128&d=identicon&r=PG&f=1", "display_name": "eilchner", "link": "https://stackoverflow.com/users/4235432/eilchner"}, "edited": false, "score": 0, "creation_date": 1422471949, "post_id": 28200211, "comment_id": 44766887, "body": "I added some info and a link to the answer for clarification."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1422472113, "post_id": 28200211, "comment_id": 44766969, "body": "don&#39;t forget about srand(time(NULL)) to seed your generator"}, {"owner": {"reputation": 73, "user_id": 4235432, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e47c51045810f75a24588514802cea0c?s=128&d=identicon&r=PG&f=1", "display_name": "eilchner", "link": "https://stackoverflow.com/users/4235432/eilchner"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1422472124, "post_id": 28200211, "comment_id": 44766974, "body": "Thanks again. I found that <code>ss.str().clear();</code> would clear the stringstream in a different question on stackoverflow. @user3613500 I&#39;ve got that in main, no worries."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 73, "user_id": 4235432, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e47c51045810f75a24588514802cea0c?s=128&d=identicon&r=PG&f=1", "display_name": "eilchner", "link": "https://stackoverflow.com/users/4235432/eilchner"}, "edited": false, "score": 0, "creation_date": 1422472164, "post_id": 28200211, "comment_id": 44767007, "body": "@eilchner fyi, it would have worked had the stream been <i>inside</i> the first for-loop. And the <code>string str</code> in your case would be needless if you really wanted to use streams. Just an <code>ostringstream ss</code> inside the first loop, then pushing <code>ss.str()</code> after the inner loop completes would also have accomplished what you sought."}], "tags": [], "owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "is_accepted": true, "score": 1, "last_activity_date": 1422471917, "last_edit_date": 1422471917, "creation_date": 1422471386, "answer_id": 28200211, "question_id": 28199998, "link": "https://stackoverflow.com/questions/28199998/generating-a-random-vector-of-strings-in-c/28200211#28200211", "title": "Generating a random vector of strings in C++", "body": "<p>First of all, as WhozCraig stated, you don't need to use a <code>stringstream</code> here. <code>std::string</code> provides everything you need.</p>\n\n<p>The reason that your code didn't work is that your <a href=\"http://www.cplusplus.com/reference/ios/ios/eof/\" rel=\"nofollow\"><code>eof</code> bit</a> was set through the <code>operator&gt;&gt;</code>. Calling <code>stringstream::clear()</code> resets the bit and makes the stream usable again.</p>\n\n<p>Here is your code with slight modifications, working alright. I also added the fixes suggested by Thomas Matthews:</p>\n\n<pre><code>void losuj(vector &lt;string&gt; &amp;vec, int ile)\n{\n    int i, j;\n    string str;\n    char c;\n    for(i=0; i&lt;ile; i++)\n    {\n        for (j=0; j&lt;5; j++)\n        {\n            c = rand() % 26 + 'A';\n            str += c;\n        }\n        vec.push_back(str);\n        str.clear();\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "is_accepted": false, "score": 0, "last_activity_date": 1422471426, "creation_date": 1422471426, "answer_id": 28200219, "question_id": 28199998, "link": "https://stackoverflow.com/questions/28199998/generating-a-random-vector-of-strings-in-c/28200219#28200219", "title": "Generating a random vector of strings in C++", "body": "<p>You have to reset the state of the stringstream because you've reached <code>eof</code>:</p>\n\n<pre><code>ss.clear();\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4235432, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e47c51045810f75a24588514802cea0c?s=128&d=identicon&r=PG&f=1", "display_name": "eilchner", "link": "https://stackoverflow.com/users/4235432/eilchner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "accepted_answer_id": 28200211, "answer_count": 2, "score": 0, "last_activity_date": 1422471917, "creation_date": 1422470756, "question_id": 28199998, "link": "https://stackoverflow.com/questions/28199998/generating-a-random-vector-of-strings-in-c", "title": "Generating a random vector of strings in C++", "body": "<p>I've got a problem with my function that's supposed to generate a vector of random strings. However, all I get is the first element in the vector is random and the rest is empty. Here's the code: </p>\n\n<pre><code>void losuj(vector &lt;string&gt; &amp;vec, int ile){\n    int i, j;\n    string str;\n    stringstream ss;\n    char c;\n    for(i=0; i&lt;ile; i++){\n        for(j=0; j&lt;5; j++){\n            c= rand()%25 + 97;\n            ss &lt;&lt; c;\n        }\n        ss &gt;&gt; str;\n        vec.push_back(str);\n        ss.str().clear();\n        str.clear();\n    }\n}\n</code></pre>\n\n<p>Any thoughts on what could be wrong?</p>\n"}, {"tags": ["c++", "windows", "gcc", "cygwin"], "comments": [{"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 1, "creation_date": 1422470657, "post_id": 28199950, "comment_id": 44766203, "body": "std::wstring is part of the standard, if I recall correctly. I don&#39;t see why cygwind wouldn&#39;t support it. Have you tested it?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 0, "creation_date": 1422471154, "post_id": 28199950, "comment_id": 44766443, "body": "@cassiorenan: However, it works <i>completely differently</i> in Cygwin than in Visual Studio.  Easiest to assume they&#39;re unrelated classes."}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 0, "creation_date": 1422471268, "post_id": 28199950, "comment_id": 44766509, "body": "Ah, I see. Disregard my answer, then. I&#39;m not very familiar with Visual Studio&#39;s particularities."}], "answers": [{"tags": [], "owner": {"reputation": 306, "user_id": 1616940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jdKeT.png?s=128&g=1", "display_name": "Mehran", "link": "https://stackoverflow.com/users/1616940/mehran"}, "is_accepted": true, "score": 3, "last_activity_date": 1422470853, "creation_date": 1422470853, "answer_id": 28200032, "question_id": 28199950, "link": "https://stackoverflow.com/questions/28199950/porting-stdwstring-to-gcc-cygwin/28200032#28200032", "title": "porting std::wstring to gcc cygwin", "body": "<p>Yes.  It supports, But not easy.</p>\n\n<blockquote>\n  <p>To support wstring, your platform needs to support a whole bunch of\n  wchar_t functionality.  q.v. Standard C++ IOStreams and Locales by\n  Langer and Kreft.</p>\n  \n  <p>It's really not enough to say \"Hey, we've got wchar_t, and wchar_t\n  character traits, so we can turn on std::wstring.\"  The platform also\n  needs to provide support for the C++ wide character I/O:  wistream,\n  wostream, facet, cvt, locale.  And that's where things become\n  problematic.</p>\n  \n  <p>For Cygwin on Windows, the platform is Cygwin (and its amazingly cool\n  POSIX API layer) moreso than the WinAPI.</p>\n  \n  <p>ASIDE:  I'm not sure what the MinGW situation is, but since MinGW uses\n  WinAPI directly rather than having a more Unix-like POSIX API as the\n  approach, MinGW may not be in this Cygwin situation.</p>\n  \n  <p>Windows does support that functionality, <em>but</em> it appears that no one\n  has gone through the considerable effort of plumbing up Cygwin to use\n  those facilities.  (Those are the FooW routines, rather than the FooA\n  routines, in the WinAPI.  And there is a lot of work to get the locale\n  magic to work correctly.)</p>\n  \n  <p>Also, Windows uses a wchar_t of 2 bytes.  (Previous UCS-2, from the\n  Unicode\n  1.0 era.  Now with Vista and Win7, it's UTF-16.)  It would be a bit retro to have Cygwin use a 2 byte wchar_t, rather than a 4 byte\n  wchar_t.  That just makes everything a little more difficult.</p>\n</blockquote>\n\n<p><em>For further details, go to the <strong><code>gcc.gnu.org/ml/gcc-help</code></strong>:</em></p>\n"}, {"tags": [], "owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "is_accepted": false, "score": 1, "last_activity_date": 1422471064, "creation_date": 1422471064, "answer_id": 28200092, "question_id": 28199950, "link": "https://stackoverflow.com/questions/28199950/porting-stdwstring-to-gcc-cygwin/28200092#28200092", "title": "porting std::wstring to gcc cygwin", "body": "<p>It does have support. This code compiles fine on g++ 4.8(As it should on any standard-conforming compiler):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main(){\n  std::wstring s(L\"Hello World!\");\n  std::wcout &lt;&lt; s;\n}\n</code></pre>\n"}], "owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 28200032, "answer_count": 2, "score": 0, "last_activity_date": 1422471064, "creation_date": 1422470539, "question_id": 28199950, "link": "https://stackoverflow.com/questions/28199950/porting-stdwstring-to-gcc-cygwin", "title": "porting std::wstring to gcc cygwin", "body": "<p>I am tryong to port a project written in Visual Studio 2010 from a Microsoft compiler to gcc Cygwin. My question is does gcc Cygwin or gcc support std::wstring ? Is there a work around for that ? </p>\n"}, {"tags": ["c++", "c", "linux", "file-io", "printf"], "comments": [{"owner": {"reputation": 29810, "user_id": 423170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/H9kNQ.png?s=128&g=1", "display_name": "Frxstrem", "link": "https://stackoverflow.com/users/423170/frxstrem"}, "edited": false, "score": 0, "creation_date": 1422470350, "post_id": 28199843, "comment_id": 44766048, "body": "I don&#39;t understand what you expect to happen, apart from what the quoted paragraph says?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 2, "creation_date": 1422470372, "post_id": 28199843, "comment_id": 44766063, "body": "You are &quot;wrong&quot; in your <code>scanf</code> use inside <code>from_user</code> (<code>&amp;</code> should not be there) and in general memory management (pointer value is not returned to <code>main</code>). It has nothing to do with <code>printf</code> vs. <code>fprintf</code> matter."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422470445, "post_id": 28199843, "comment_id": 44766102, "body": "You may want to add a newline to the file when you print.  Did you try opening the file in a text editor?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1422470738, "post_id": 28199843, "comment_id": 44766244, "body": "<code>void main()</code> should be <code>int main(void)</code>. If a book, tutorial, or instructor told you to use <code>void main()</code>, <b>find a better one</b>. Allocating 10 bytes for an <code>int*</code> makes no sense. You want <i>one</i> <code>int</code> object, so <code>malloc(sizeof (int))</code> would make more sense -- but the <code>malloc</code> isn&#39;t necessary at all, since you already have an <code>int</code> object whose address is passed as a parameter. Except that you don&#39;t, since you initialized <code>ch</code> to <code>NULL</code>. Try: <code>int ch; from_user(&amp;ch);</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1422470826, "post_id": 28199843, "comment_id": 44766289, "body": "Your <code>from_user</code> function doesn&#39;t modify <code>ch</code> -- it can&#39;t, functions can&#39;t modify their arguments (modifying a parameter only updates a local copy of the argument)."}], "answers": [{"comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1422470486, "post_id": 28199901, "comment_id": 44766131, "body": "Even single pointer is enough right? Anyways we have the location being allocated and initialized in the function the OP&#39;s scanf() has an issue"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1422470596, "post_id": 28199901, "comment_id": 44766177, "body": "@Gopi: If we want to edit the value of <code>ch</code>, then we need to pass the pointer to <code>ch</code>, or pass it by reference."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1422470733, "post_id": 28199901, "comment_id": 44766240, "body": "I meant why not do everything inside the func() and return the pointer like <code>int *from_user()</code>"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1422470799, "post_id": 28199901, "comment_id": 44766277, "body": "@Gopi: That would be fine, as would pm100&#39;s variant. I felt that this kept to the spirit of how the original code was intended to work."}], "tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": true, "score": 6, "last_activity_date": 1422470750, "last_edit_date": 1592644375, "creation_date": 1422470382, "answer_id": 28199901, "question_id": 28199843, "link": "https://stackoverflow.com/questions/28199843/is-fprintf-not-like-printf-when-writing-to-file/28199901#28199901", "title": "Is fprintf not like printf when writing to file?", "body": "<h3><code>from_user()</code> is not implemented correctly.</h3>\n<ol>\n<li><p>The pointer that you create in <code>from_user()</code> will not be passed back to the calling function. To do that, you need a double pointer, or to pass by reference.</p>\n</li>\n<li><p>In your code, you pass a <code>int **</code> to <code>scanf()</code>, while it is expecting a variable of <code>int *</code>.</p>\n</li>\n</ol>\n<h3>Here's a working implementation:</h3>\n<pre><code>void from_user(int **b){\n    *b = malloc(sizeof(int));\n    printf(&quot;please give me an integer&quot;);\n    scanf(&quot;%d&quot;, *b);\n}\n\nint main() {\n    int *ch;\n    from_user(&amp;ch);\n}\n</code></pre>\n<h3>Your File IO</h3>\n<p>That part is all fine. It's just the value of <code>ch</code> that is broken.</p>\n"}, {"comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1422470779, "post_id": 28199983, "comment_id": 44766266, "body": "Just add how it should be used : <code>int ch = from_user();</code> and later <code>fprintf(fp,&quot;%d&quot;,ch);</code>"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 3, "last_activity_date": 1422471699, "last_edit_date": 1422471699, "creation_date": 1422470658, "answer_id": 28199983, "question_id": 28199843, "link": "https://stackoverflow.com/questions/28199843/is-fprintf-not-like-printf-when-writing-to-file/28199983#28199983", "title": "Is fprintf not like printf when writing to file?", "body": "<p>a much simpler from_user implementation</p>\n\n<pre><code>int from_user(){\n    int i;\n    printf(\"please give me an integer\");\n    scanf(\"%d\", &amp;i);\n    return i;\n}\n</code></pre>\n\n<p>and in main</p>\n\n<pre><code>int ch = from_user();\n...\n      printf(\"this is what you entered %d\",ch);\n        fprintf(fp,\"%d\",ch);  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3852, "user_id": 921723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e3b1e32ece685d794a2d839300166c?s=128&d=identicon&r=PG", "display_name": "Jite", "link": "https://stackoverflow.com/users/921723/jite"}, "is_accepted": false, "score": 0, "last_activity_date": 1422472039, "last_edit_date": 1495540168, "creation_date": 1422471560, "answer_id": 28200247, "question_id": 28199843, "link": "https://stackoverflow.com/questions/28199843/is-fprintf-not-like-printf-when-writing-to-file/28200247#28200247", "title": "Is fprintf not like printf when writing to file?", "body": "<p>Simplest fix to your own code, you don't need to use double pointers, just allocate the memory in main and pass the pointer to your function, like this:</p>\n\n<ol>\n<li>Remove <code>b = malloc(10);</code></li>\n<li>Remove the <code>&amp;</code> before b in scanf</li>\n<li>Change <code>int*ch = NULL;</code> to <code>int *ch = malloc(sizeof(int));</code></li>\n</ol>\n\n<p>Done. Why does it matter where we allocate the memory? See my more detailed answer here: <a href=\"https://stackoverflow.com/questions/15244429/pointer-of-a-pointer-in-linked-list-append/15244654#15244654\">pointer of a pointer in linked list append</a></p>\n\n<p>Oh and you should move <code>free(ch)</code> out from the else statement.</p>\n"}], "owner": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 28199901, "answer_count": 3, "score": -2, "last_activity_date": 1422476189, "creation_date": 1422470170, "last_edit_date": 1422476189, "question_id": 28199843, "link": "https://stackoverflow.com/questions/28199843/is-fprintf-not-like-printf-when-writing-to-file", "title": "Is fprintf not like printf when writing to file?", "body": "<p>I've reviewed the documentation:</p>\n\n<p>It says <a href=\"http://www.cs.bu.edu/teaching/c/file-io/intro/\" rel=\"nofollow\">here</a>:</p>\n\n<blockquote>\n  <p>Once a file has been successfully opened, you can read from it using fscanf() or write to it using fprintf(). These functions work just\n  like scanf() and printf(), except they require an extra first\n  parameter, a FILE * for the file to be read/written.</p>\n</blockquote>\n\n<p>So, I wrote my code as such, and I made sure to include a conditional statement to make sure that the file opened:</p>\n\n<pre><code># include&lt;stdio.h&gt;\n# include&lt;stdlib.h&gt;\n\nvoid from_user(int*b){\n\n    b = malloc(10);\n    printf(\"please give me an integer\");\n    scanf(\"%d\",&amp;b);\n\n}\n\nvoid main(){\n\n    FILE *fp;\n\n    int*ch = NULL;\n    from_user(ch);\n    fp = fopen(\"bfile.txt\",\"w\");\n\n    if (fp == NULL){\n        printf(\"the file did not open\");\n    }\n    else {\n        printf(\"this is what you entered %d\",*ch);\n        fprintf(fp,\"%d\",*ch);  \n        fclose(fp);\n        free(ch);   \n    }\n}\n</code></pre>\n\n<p>Am I wrong or is the documentation not explaining this correctly?  thanks.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1422469891, "post_id": 28199532, "comment_id": 44765797, "body": "Is it possible that the file was not opened? I mean no permission to write in the default location."}, {"owner": {"reputation": 324, "user_id": 4059056, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2ed311ff4325d3e02cb2e3b54f9ee168?s=128&d=identicon&r=PG&f=1", "display_name": "Brandan B", "link": "https://stackoverflow.com/users/4059056/brandan-b"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1422470049, "post_id": 28199532, "comment_id": 44765887, "body": "Yeah I think your right let me check"}], "answers": [{"tags": [], "owner": {"reputation": 324, "user_id": 4059056, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2ed311ff4325d3e02cb2e3b54f9ee168?s=128&d=identicon&r=PG&f=1", "display_name": "Brandan B", "link": "https://stackoverflow.com/users/4059056/brandan-b"}, "is_accepted": false, "score": 6, "last_activity_date": 1422470421, "creation_date": 1422470421, "answer_id": 28199917, "question_id": 28199532, "link": "https://stackoverflow.com/questions/28199532/qiodevicewrite-device-not-open-when-file-is-open/28199917#28199917", "title": "&quot;QIODevice::write: device not open&quot; when file is open", "body": "<p>The problem was I was creating the file in a place that did not exist on this computer changed the location to create the folder and it fixed it.</p>\n"}], "owner": {"reputation": 324, "user_id": 4059056, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2ed311ff4325d3e02cb2e3b54f9ee168?s=128&d=identicon&r=PG&f=1", "display_name": "Brandan B", "link": "https://stackoverflow.com/users/4059056/brandan-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10460, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1422470421, "creation_date": 1422469087, "question_id": 28199532, "link": "https://stackoverflow.com/questions/28199532/qiodevicewrite-device-not-open-when-file-is-open", "title": "&quot;QIODevice::write: device not open&quot; when file is open", "body": "<p>When I compile my program I get the error message \"QIODevice::write: device not open\" this program worked on my old computer but for some reason its not working on my new computer. Any insight on how to fix this error would be greatly appreciated, thanks. </p>\n\n<pre><code>file.open(QIODevice::Append);\nfile2.open(QIODevice::Append);\n\nQTextStream stream(&amp;file); //stream of information\nQTextStream stream2(&amp;file2);\n\n//write to file\n//code continued here, deleted to post here... stream &lt;&lt; whatever, stream2 &lt;&lt; whatever whatever...\n\n//end stream\nstream &lt;&lt; endl;\nstream2 &lt;&lt; endl;\n\n//close file\nfile.close();\nfile2.close();\n</code></pre>\n"}, {"tags": ["c++", "boost", "thread-safety", "shared-ptr", "libc++"], "comments": [{"owner": {"reputation": 2404, "user_id": 1464336, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/43a3e2f5a681022f037622f3715d5326?s=128&d=identicon&r=PG", "display_name": "Suedocode", "link": "https://stackoverflow.com/users/1464336/suedocode"}, "edited": false, "score": 1, "creation_date": 1422476296, "post_id": 28199212, "comment_id": 44769357, "body": "According to <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\">implementation details here</a>, it says &quot;To satisfy thread safety requirements, the reference counters are typically incremented and decremented using an equivalent of std::atomic::fetch_add with std::memory_order_relaxed.&quot;  I was hoping to find source for it to confirm the statement, but I am having trouble finding online documentation of the libc++ source code for gcc (albeit they are only naive Google searches, maybe someone can provide a link).  I notice your link is for LLVM though."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1422478576, "post_id": 28199212, "comment_id": 44770618, "body": "Who wrote that code, when, why and what else did they write ... if only there was a way find out. ;)"}, {"owner": {"reputation": 10176, "user_id": 148766, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d1a60b7fb5b8f7a4889adb17cd4e4531?s=128&d=identicon&r=PG", "display_name": "Christopher Tarquini", "link": "https://stackoverflow.com/users/148766/christopher-tarquini"}, "reply_to_user": {"reputation": 2404, "user_id": 1464336, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/43a3e2f5a681022f037622f3715d5326?s=128&d=identicon&r=PG", "display_name": "Suedocode", "link": "https://stackoverflow.com/users/1464336/suedocode"}, "edited": false, "score": 0, "creation_date": 1422479830, "post_id": 28199212, "comment_id": 44771226, "body": "@Aggieboy I think the mirror I linked is the source for libc++ on GCC as well, you just compile it with <code>-gcc-toolchain</code>. libstd++ (default standard library on GCC) uses <code>__gnu_cxx::__exchange_and_add</code>, which I believe is also a full barrier but I&#39;m not sure. It seems like it&#39;s commonish knowledge that it should be implemented with relaxed barriers but I can&#39;t seem to find any library besides boost that does it"}, {"owner": {"reputation": 10176, "user_id": 148766, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d1a60b7fb5b8f7a4889adb17cd4e4531?s=128&d=identicon&r=PG", "display_name": "Christopher Tarquini", "link": "https://stackoverflow.com/users/148766/christopher-tarquini"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1422480026, "post_id": 28199212, "comment_id": 44771313, "body": "@UlrichEckhardt I&#39;d settle for some decent comments :P. I&#39;m just curious why any STL implementation would go against best practice for thread safe reference counting (for performance) when it obviously has the ability to use it (atomics are there, just use them!). Maybe it was just how they did it, but maybe someone more familiar with atomics can shed some light on whether not there is a good reason to do it this way"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1422563847, "post_id": 28199212, "comment_id": 44811300, "body": "Just to not leave any bad vibes here, @ChrisT, I wanted to (ironically) suggest that you check the according version control system. That&#39;s what the &quot;blame&quot; or &quot;annotate&quot; commands can be used for in many such systems. I&#39;m not  sure if this irony came across though..."}], "answers": [{"comments": [{"owner": {"reputation": 10176, "user_id": 148766, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d1a60b7fb5b8f7a4889adb17cd4e4531?s=128&d=identicon&r=PG", "display_name": "Christopher Tarquini", "link": "https://stackoverflow.com/users/148766/christopher-tarquini"}, "edited": false, "score": 27, "creation_date": 1422488461, "post_id": 28204322, "comment_id": 44774902, "body": "Finally, an answer relating to atomics that I understand!"}, {"owner": {"reputation": 4617, "user_id": 983430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3e3d11abddb97fa1f4e9cc576140533a?s=128&d=identicon&r=PG", "display_name": "Amos M. Carpenter", "link": "https://stackoverflow.com/users/983430/amos-m-carpenter"}, "edited": false, "score": 0, "creation_date": 1424927669, "post_id": 28204322, "comment_id": 45754882, "body": "Hah, I just got a &quot;You did&#39;t pass&quot; when this answer was shown to &quot;audit&quot; my reviews... I had flagged this as spam, thinking that someone with no rep (it wasn&#39;t showing the <i>real</i> user) was extremely unlikely to have written code, let alone an entire library, that someone else was now asking about :-D"}, {"owner": {"reputation": 12054, "user_id": 3614835, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xzZDV.png?s=128&g=1", "display_name": "Jeffrey Bosboom", "link": "https://stackoverflow.com/users/3614835/jeffrey-bosboom"}, "edited": false, "score": 0, "creation_date": 1424968359, "post_id": 28204322, "comment_id": 45777611, "body": "At first look, I thought this was a bad self-answer (the smiley in particular).  I was on guard for audits, so I passed, but it&#39;s not a great audit choice."}, {"owner": {"reputation": 10176, "user_id": 148766, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d1a60b7fb5b8f7a4889adb17cd4e4531?s=128&d=identicon&r=PG", "display_name": "Christopher Tarquini", "link": "https://stackoverflow.com/users/148766/christopher-tarquini"}, "edited": false, "score": 2, "creation_date": 1476889488, "post_id": 28204322, "comment_id": 67540160, "body": "For future visitors to this page, it looks like this was fixed: <a href=\"https://llvm.org/bugs/show_bug.cgi?id=22803\" rel=\"nofollow noreferrer\">llvm.org/bugs/show_bug.cgi?id=22803</a>"}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 40, "last_activity_date": 1422487307, "creation_date": 1422487307, "answer_id": 28204322, "question_id": 28199212, "link": "https://stackoverflow.com/questions/28199212/why-does-libcs-implementation-of-shared-ptr-use-full-memory-barriers-instead/28204322#28204322", "title": "Why does libc++&#39;s implementation of shared_ptr use full memory barriers instead of relaxed?", "body": "<p>Because when I wrote that code, the compiler (clang) had not yet implemented C++11 atomics.  And I never got back to it to clean it up.  </p>\n\n<p>Nothing subtle here. :-)</p>\n"}], "owner": {"reputation": 10176, "user_id": 148766, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d1a60b7fb5b8f7a4889adb17cd4e4531?s=128&d=identicon&r=PG", "display_name": "Christopher Tarquini", "link": "https://stackoverflow.com/users/148766/christopher-tarquini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1665, "favorite_count": 8, "accepted_answer_id": 28204322, "answer_count": 1, "score": 28, "last_activity_date": 1422487307, "creation_date": 1422468095, "last_edit_date": 1422476104, "question_id": 28199212, "link": "https://stackoverflow.com/questions/28199212/why-does-libcs-implementation-of-shared-ptr-use-full-memory-barriers-instead", "title": "Why does libc++&#39;s implementation of shared_ptr use full memory barriers instead of relaxed?", "body": "<p>In boost's implementation of <code>shared_ptr</code>, it uses <a href=\"https://github.com/boostorg/smart_ptr/blob/master/include/boost/smart_ptr/detail/sp_counted_base_clang.hpp#L29\" rel=\"noreferrer\">relaxed memory ordering to increment its reference count</a>. This appears safe as decrements use acquire/release to make sure that any previous decrements are visible to the thread before releasing memory. This method seems correct and appears in Herb Sutters <a href=\"http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Herb-Sutter-atomic-Weapons-1-of-2\" rel=\"noreferrer\">talk on atomics</a></p>\n\n<p>In libc++'s implementation uses <a href=\"http://llvm.org/svn/llvm-project/libcxx/trunk/src/memory.cpp\" rel=\"noreferrer\">full memory barriers</a></p>\n\n<pre><code>template &lt;class T&gt;\ninline T\nincrement(T&amp; t) _NOEXCEPT\n{\n    return __sync_add_and_fetch(&amp;t, 1);\n}\n\ntemplate &lt;class T&gt;\ninline T\ndecrement(T&amp; t) _NOEXCEPT\n{\n    return __sync_add_and_fetch(&amp;t, -1);\n}\n\n}  // name\n</code></pre>\n\n<p>Is there a reason for this decision? Are there any performance or safety differences between them? </p>\n"}, {"tags": ["c++", "c++11", "g++"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422469455, "post_id": 28199162, "comment_id": 44765525, "body": "You should test on C++ being C++11 or some earlier version !"}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1422470002, "post_id": 28199162, "comment_id": 44765861, "body": "Try: <code>#if defined(__cplusplus) &amp;&amp; (__cplusplus &gt;= 201103L)</code> instead."}, {"owner": {"reputation": 156, "user_id": 960907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8555b937c33ab5660e32cbb8a377b9f9?s=128&d=identicon&r=PG", "display_name": "slepasteur", "link": "https://stackoverflow.com/users/960907/slepasteur"}, "edited": false, "score": 0, "creation_date": 1422525234, "post_id": 28199162, "comment_id": 44787367, "body": "Thank you but sadly this code is not mine, it is from the C++ REST SDK and fixing it breaks the compilation of the library. I submitted an issue."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422612667, "post_id": 28199162, "comment_id": 44829071, "body": "The build break appears to be due to a bug in <code>boost::function</code>; it doesn&#39;t handle <code>nullptr</code> correctly. I submitted <a href=\"https://svn.boost.org/trac/boost/ticket/10981\" rel=\"nofollow noreferrer\">svn.boost.org/trac/boost/ticket/10981</a>"}], "answers": [{"tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": false, "score": 7, "last_activity_date": 1422468234, "creation_date": 1422468234, "answer_id": 28199261, "question_id": 28199162, "link": "https://stackoverflow.com/questions/28199162/nullptr-t-not-defined-on-g-4-9-2/28199261#28199261", "title": "nullptr_t not defined on g++ 4.9.2", "body": "<p><code>nullptr_t</code> is not defined by the preprocessor, so having the preprocessor check for it won't work.  <code>nullptr</code> is defined in <code>g++-4.9.2</code> with <code>-std=c++11</code>, which a quick test program can verify.</p>\n\n<pre><code>    int main() {\n      std::nullptr_t i = nullptr;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 7, "last_activity_date": 1422470499, "last_edit_date": 1422470499, "creation_date": 1422469355, "answer_id": 28199607, "question_id": 28199162, "link": "https://stackoverflow.com/questions/28199162/nullptr-t-not-defined-on-g-4-9-2/28199607#28199607", "title": "nullptr_t not defined on g++ 4.9.2", "body": "<p>I think you misunderstand what <code>#ifdef</code> tests for. Specifically</p>\n\n<pre><code>#if defined identifier\n</code></pre>\n\n<p>will (from \u00a716.1, emphasis mine):</p>\n\n<blockquote>\n  <p>evaluate to 1 if the identifier is currently defined as a <strong>macro name</strong> (that is, if it is predefined or if it\n  has been the subject of a <code>#define</code> preprocessing directive without an intervening <code>#undef</code> directive with the\n  same subject identifier), 0 if it is not.</p>\n</blockquote>\n\n<p>It only can check for if the identifier is defined by <code>#define</code>. But <code>std::nullptr_t</code> isn't a a macro name - it's a typedef. Specifically (\u00a718.2/9):</p>\n\n<blockquote>\n  <p><code>nullptr_t</code> is defined as follows:</p>\n\n<pre><code>namespace std {\n    typedef decltype(nullptr) nullptr_t;\n}\n</code></pre>\n</blockquote>\n\n<p>In a similar vein, the following program won't print anything:</p>\n\n<pre><code>int main() {\n    #ifdef int\n    std::cout &lt;&lt; \"int is defined\" &lt;&lt; std::endl;\n    #endif\n}\n</code></pre>\n\n<p>The test you want instead is:</p>\n\n<pre><code>#if __cplusplus &gt;= 201103L\n    // C++11\n#else\n    // not C++11\n#endif\n</code></pre>\n\n<p>From the <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html\" rel=\"nofollow\">gcc docs</a>:</p>\n\n<blockquote>\n  <p><code>__cplusplus</code><br>\n  This macro is defined when the C++ compiler is in use. You can use <code>__cplusplus</code> to test whether a header is compiled by a C compiler or a C++ compiler. This macro is similar to <code>__STDC_VERSION__</code>, in that it expands to a version number. Depending on the language standard selected, the value of the macro is <code>199711L</code>, as mandated by the 1998 C++ standard; <code>201103L</code>, per the 2011 C++ standard; an unspecified value strictly larger than <code>201103L</code> for the experimental languages enabled by <code>-std=c++1y</code> and <code>-std=gnu++1y</code>. </p>\n</blockquote>\n"}], "owner": {"reputation": 156, "user_id": 960907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8555b937c33ab5660e32cbb8a377b9f9?s=128&d=identicon&r=PG", "display_name": "slepasteur", "link": "https://stackoverflow.com/users/960907/slepasteur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1422525481, "creation_date": 1422467919, "last_edit_date": 1422525481, "question_id": 28199162, "link": "https://stackoverflow.com/questions/28199162/nullptr-t-not-defined-on-g-4-9-2", "title": "nullptr_t not defined on g++ 4.9.2", "body": "<p>I am using C++ Rest SDK on a project in linux comipled with g++ 4.9.2 with the -std=c++11 flag set.</p>\n\n<p>Internaly C++ Rest SDK checks if nullptr exists like that:</p>\n\n<pre><code>#if defined nullptr_t\n#define NEEDS_NULLPTR_DEFINED 0\n#else\n#define NEEDS_NULLPTR_DEFINED 1\n#endif\n#if NEEDS_NULLPTR_DEFINED\n#define nullptr NULL\n#endif\n</code></pre>\n\n<p>This check fail on my machine leading nullptr to be defined as NULL which breaks the compilation afterwards. I am not quite sure if g++ or C++ Rest SDK is to blame for that problem.</p>\n\n<p>Do you have any idea on why this nullptr_t check fails with g++ 4.9.2 and how to fix it?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I submitted an issue to C++ REST SDK: <a href=\"https://casablanca.codeplex.com/workitem/340\" rel=\"nofollow\">https://casablanca.codeplex.com/workitem/340</a></p>\n"}, {"tags": ["c++", "algorithm", "stl", "iterator", "c++14"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422468678, "post_id": 28199082, "comment_id": 44765083, "body": "<code>std::unique</code> moves anyway, so I don&#39;t see what you gain from it."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422468923, "post_id": 28199082, "comment_id": 44765223, "body": "@T.C. What do you mean? <code>std::unique</code> copy-assigning <a href=\"http://en.cppreference.com/w/cpp/algorithm/unique\" rel=\"nofollow noreferrer\">here</a> in section &quot;Possible implementation&quot;."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1422469029, "post_id": 28199082, "comment_id": 44765277, "body": "That&#39;s not a good implementation. Real libraries <a href=\"http://coliru.stacked-crooked.com/a/198b772ffc2f41ba\" rel=\"nofollow noreferrer\">move</a>."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422469134, "post_id": 28199082, "comment_id": 44765339, "body": "@T.C. Does they move mandatory?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422469914, "post_id": 28199082, "comment_id": 44765811, "body": "It must support all <code>MoveAssignable</code> types, so it&#39;s actually more work for the library implementer to not move."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422469795, "post_id": 28199654, "comment_id": 44765738, "body": "No, internally <code>std::unique</code> must use move assignment directly. Using <code>swap</code> would require <code>MoveConstructible</code> as well."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422469976, "post_id": 28199654, "comment_id": 44765846, "body": "@T.C. Seems to be correct. Are the elements actually swapped then, or are the ones after the returned new end in a moved-from state?"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422470081, "post_id": 28199654, "comment_id": 44765903, "body": "@T.C. libstdc++ seems to do <code>*++__dest = _GLIBCXX_MOVE(*__first)</code>, which indicates that the latter is true."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422470282, "post_id": 28199654, "comment_id": 44766016, "body": "<code>remove</code> has a note that says the remainder has valid but unspecified state. <code>unique</code> doesn&#39;t, but should still be the case."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1422637305, "post_id": 28199654, "comment_id": 44842887, "body": "@Orient The requirement is <a href=\"http://en.cppreference.com/w/cpp/concept/MoveAssignable\" rel=\"nofollow noreferrer\">MoveAssignable</a>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1422670758, "post_id": 28199654, "comment_id": 44855484, "body": "<code>unique</code> also requires a forward iterator, but that requirement is also obviously met."}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 5, "last_activity_date": 1422470266, "last_edit_date": 1422470266, "creation_date": 1422469529, "answer_id": 28199654, "question_id": 28199082, "link": "https://stackoverflow.com/questions/28199082/unique-algorithm-with-move-iterators/28199654#28199654", "title": "unique algorithm with move iterators", "body": "<p>The program is guaranteed to work by the standard.<br>\n<code>std::unique</code> requires forward iterators.  The easiest way to show up that move iterators satisfy that requirement is to inspect the <code>iterator_category</code> typedef of <code>move_iterator</code>:</p>\n\n<pre><code>typedef typename iterator_traits&lt;Iterator&gt;::iterator_category iterator_category;\n</code></pre>\n\n<p>As you can see, the iterator category of the underlying iterator type is directly adapted. In fact, the behavior of move iterators is almost equivalent to their underlying ones, [move.iterators]/1:</p>\n\n<blockquote>\n  <p>Class template <code>move_iterator</code> is an iterator adaptor with the same\n  behavior as the underlying iterator except that its indirection\n  operator implicitly converts the value returned by the underlying\n  iterator\u2019s indirection operator to an rvalue reference.</p>\n</blockquote>\n\n<p>There are no other noteworthy requirements: Clearly <code>vector&lt;&gt;::iterator</code> is an input iterator (as required by [move.iter.requirements]). The only relevant requirement imposed by <code>unique</code> itself is</p>\n\n<blockquote>\n  <p>The type of <code>*first</code> shall satisfy the <code>MoveAssignable</code> requirements\n  (Table 22).</p>\n</blockquote>\n\n<p>... which is straightforwardly met.</p>\n\n<p>Note that using move iterators should not bring any advantage over normal ones. Internally the duplicate elements are move-assigned (hence the <code>MoveAssignable</code> requirement), so returning an rvalue reference from <code>operator*</code> is superfluous.</p>\n"}], "owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 28199654, "answer_count": 1, "score": 6, "last_activity_date": 1422470266, "creation_date": 1422467662, "question_id": 28199082, "link": "https://stackoverflow.com/questions/28199082/unique-algorithm-with-move-iterators", "title": "unique algorithm with move iterators", "body": "<p>Is it permittable to use <code>std::unique</code> with iterators created by means of <code>std::make_move_iterator</code> function? I tried <a href=\"http://coliru.stacked-crooked.com/a/8257229d75ef5f69\">the following</a>, and got success:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;limits&gt;\n#include &lt;iterator&gt;\n\n#include &lt;cstdlib&gt;\n\nstruct A\n{\n\n    A() : i(std::numeric_limits&lt; double &gt;::quiet_NaN()) { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; \"\\n\"; }\n    A(double ii) : i(ii) { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; \"\\n\"; }\n    A(A const &amp; a) : i(a.i) { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; \"\\n\"; }\n    A(A &amp;&amp; a) : i(std::move(a.i)) { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; \"\\n\"; a.i = std::numeric_limits&lt; double &gt;::quiet_NaN(); }\n    A &amp; operator = (A const &amp; a) { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; \"\\n\"; i = a.i; return *this; }\n    A &amp; operator = (A &amp;&amp; a) { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; \"\\n\"; i = std::move(a.i); a.i = std::numeric_limits&lt; double &gt;::quiet_NaN(); return *this; }\n    bool operator &lt; (A const &amp; a) const { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; \"\\n\"; return (i &lt; a.i); }\n#pragma clang diagnostic push\n#pragma clang diagnostic ignored \"-Wfloat-equal\"\n    bool operator == (A const &amp; a) const { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; \"\\n\"; return (i == a.i); }\n#pragma clang diagnostic pop\n\n    friend\n    std::ostream &amp;\n    operator &lt;&lt; (std::ostream &amp; o, A const &amp; a)\n    {\n        return o &lt;&lt; a.i;\n    }\n\nprivate :\n\n    double i;\n\n};\n\nint\nmain()\n{\n    std::vector&lt; A &gt; v{1.0, 1.0, 2.0, 2.0, 2.0, 3.0, 4.0, 4.0, 5.0, 6.0, 6.0, 7.0};\n    std::cout &lt;&lt; \"v constructed\\n\\n\\n\\n\";\n    std::sort(v.begin(), v.end());\n    auto const end = std::unique(std::make_move_iterator(v.begin()), std::make_move_iterator(v.end())).base();\n    std::copy(v.begin(), end, std::ostream_iterator&lt; A &gt;(std::cout, \" \"));\n    std::cout &lt;&lt; std::endl;\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>But maybe is it implementation-dependent success?</p>\n\n<p>And what regarding other algorithms from <code>&lt;numeric&gt;</code> and <code>&lt;algorithm&gt;</code>?</p>\n"}, {"tags": ["java", "c++", "tree", "tree-search"], "comments": [{"owner": {"reputation": 119, "user_id": 4495436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6ab2f93c080ecad9680974f92fa9355?s=128&d=identicon&r=PG&f=1", "display_name": "userzizzy", "link": "https://stackoverflow.com/users/4495436/userzizzy"}, "reply_to_user": {"reputation": 5421, "user_id": 1594449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688d73160b862fef962b8981a8ae620c?s=128&d=identicon&r=PG", "display_name": "gknicker", "link": "https://stackoverflow.com/users/1594449/gknicker"}, "edited": false, "score": 1, "creation_date": 1422467823, "post_id": 28199080, "comment_id": 44764568, "body": "i couldnt post a image due to lack of reputation."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1422467877, "post_id": 28199080, "comment_id": 44764602, "body": "Then add a link and someone will most certainly edit your question to include the image."}, {"owner": {"reputation": 119, "user_id": 4495436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6ab2f93c080ecad9680974f92fa9355?s=128&d=identicon&r=PG&f=1", "display_name": "userzizzy", "link": "https://stackoverflow.com/users/4495436/userzizzy"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1422470368, "post_id": 28199080, "comment_id": 44766061, "body": "@JoachimPileborg A helpful image link has been added."}, {"owner": {"reputation": 119, "user_id": 4495436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6ab2f93c080ecad9680974f92fa9355?s=128&d=identicon&r=PG&f=1", "display_name": "userzizzy", "link": "https://stackoverflow.com/users/4495436/userzizzy"}, "reply_to_user": {"reputation": 5421, "user_id": 1594449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688d73160b862fef962b8981a8ae620c?s=128&d=identicon&r=PG", "display_name": "gknicker", "link": "https://stackoverflow.com/users/1594449/gknicker"}, "edited": false, "score": 0, "creation_date": 1422470445, "post_id": 28199080, "comment_id": 44766103, "body": "@gknicker Refer to the link in EDIT section"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 4495436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6ab2f93c080ecad9680974f92fa9355?s=128&d=identicon&r=PG&f=1", "display_name": "userzizzy", "link": "https://stackoverflow.com/users/4495436/userzizzy"}, "edited": false, "score": 0, "creation_date": 1422475662, "post_id": 28200264, "comment_id": 44768976, "body": "I can iterate easily thru <code>task_container</code> like: <code>vector&lt;Job&gt;::iterator it;     for(it = task_container.begin(); it != task_container.end(); ++it)</code>. but how to use <code>iterator it</code> to access vector elements of <code>other_jobs</code>? Pls give code."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 119, "user_id": 4495436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6ab2f93c080ecad9680974f92fa9355?s=128&d=identicon&r=PG&f=1", "display_name": "userzizzy", "link": "https://stackoverflow.com/users/4495436/userzizzy"}, "edited": false, "score": 0, "creation_date": 1422476123, "post_id": 28200264, "comment_id": 44769245, "body": "Iterating through vectors is all the same.  For the member <code>other_jobs</code>, you would initialize an iterator, <code>std::vector&lt;SubJob&gt;::iterator</code>, to the beginning, <code>other_jobs.begin()</code>, and increment the iterator to point to the next element."}, {"owner": {"reputation": 119, "user_id": 4495436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6ab2f93c080ecad9680974f92fa9355?s=128&d=identicon&r=PG&f=1", "display_name": "userzizzy", "link": "https://stackoverflow.com/users/4495436/userzizzy"}, "edited": false, "score": 0, "creation_date": 1422486145, "post_id": 28200264, "comment_id": 44774120, "body": "So i will initialise the iterator <code>it</code> for the member <code>other_jobs</code>  to the beginning as in <code>it.other_jobs.begin()</code> or <code>it-&gt;other_jobs.begin()</code>?"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 1, "last_activity_date": 1422471608, "creation_date": 1422471608, "answer_id": 28200264, "question_id": 28199080, "link": "https://stackoverflow.com/questions/28199080/implementing-tree-with-different-data-types-of-nodes/28200264#28200264", "title": "Implementing tree with different data types of nodes", "body": "<p>Hmmm, I don't think a tree is the best data structure for your requirements.  I suggest a <code>std::vector</code> of <code>Jobs</code>.  Each <code>Job</code> should have a container of <code>subjobs</code></p>\n\n<p>Your schedule can iterate through a vector much easier than a tree.  </p>\n\n<p><strong>Edit 1:  The code</strong>  </p>\n\n<pre><code>class Subjob;\nclass Job\n{\n  std::vector&lt;Subjob&gt; other_jobs;\n};\n\nstd::vector&lt;Job&gt; task_container;\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 4495436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6ab2f93c080ecad9680974f92fa9355?s=128&d=identicon&r=PG&f=1", "display_name": "userzizzy", "link": "https://stackoverflow.com/users/4495436/userzizzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 28200264, "answer_count": 1, "score": -1, "last_activity_date": 1422475706, "creation_date": 1422467658, "last_edit_date": 1422475706, "question_id": 28199080, "link": "https://stackoverflow.com/questions/28199080/implementing-tree-with-different-data-types-of-nodes", "title": "Implementing tree with different data types of nodes", "body": "<p>I have to combinatorially count all possible cases for a task. I want to make a tree for that purpose. There are several jobs and each job has several sub jobs. There are many agents available to do the jobs. Suppose Job1 Subjob1 can be done by Agent 1 or 2, then Job 1 Sub Job2 will be done by either of the agents. And then Job 2 will be started. and so on.\nSince nodes are varying and also the number of child nodes changes at different levels, my questions are:</p>\n\n<ol>\n<li><p>what is the best data structure to implement the same? </p></li>\n<li><p>what is the best way to traverse the tree using the data structure that you have recommended? </p></li>\n</ol>\n\n<p>please give concrete C++/Java examples or web sources also rather than only abstract advise as I am green at coding. </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Please refer to the flowchart for the tree that i have in mind.</p>\n\n<p><img src=\"https://i.stack.imgur.com/28dBt.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++", "windows", "file", "winapi", "path"], "comments": [{"owner": {"reputation": 2142, "user_id": 1689504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af4a48f5ed0d4a54a43844ea1ecc395?s=128&d=identicon&r=PG", "display_name": "HerrJoebob", "link": "https://stackoverflow.com/users/1689504/herrjoebob"}, "edited": false, "score": 0, "creation_date": 1422468077, "post_id": 28199076, "comment_id": 44764732, "body": "Most likely your problem is that your program doesn&#39;t handle being started in different working directories. Go ahead and put in a minimum code example."}, {"owner": {"reputation": 221, "user_id": 3385436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/313a2376f9135209f724dbb92bec2722?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3385436/sam"}, "reply_to_user": {"reputation": 2142, "user_id": 1689504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af4a48f5ed0d4a54a43844ea1ecc395?s=128&d=identicon&r=PG", "display_name": "HerrJoebob", "link": "https://stackoverflow.com/users/1689504/herrjoebob"}, "edited": false, "score": 0, "creation_date": 1422468223, "post_id": 28199076, "comment_id": 44764828, "body": "What would you like the code example to contain? It&#39;s pretty much just recieving the text from an edit control that has an absolute path from Windows Explorer in it and trying to open a std::ifstream with that path."}, {"owner": {"reputation": 221, "user_id": 3385436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/313a2376f9135209f724dbb92bec2722?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3385436/sam"}, "reply_to_user": {"reputation": 2142, "user_id": 1689504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af4a48f5ed0d4a54a43844ea1ecc395?s=128&d=identicon&r=PG", "display_name": "HerrJoebob", "link": "https://stackoverflow.com/users/1689504/herrjoebob"}, "edited": false, "score": 0, "creation_date": 1422470833, "post_id": 28199076, "comment_id": 44766294, "body": "@HerrJoebob What could be a reason for my program to not handle being started in different working directories? I mean, as long as file paths are absolute and valid, how does it matter where the exe is?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1422471438, "post_id": 28199076, "comment_id": 44766602, "body": "Does the path contain quotes too as shown above?"}, {"owner": {"reputation": 221, "user_id": 3385436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/313a2376f9135209f724dbb92bec2722?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3385436/sam"}, "edited": false, "score": 0, "creation_date": 1422472439, "post_id": 28199076, "comment_id": 44767166, "body": "No, not when the user enters the path. Can be added though. I don&#39;t know if the std::ifstream constructor takes paths with quotes."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1422472680, "post_id": 28199076, "comment_id": 44767299, "body": "Why are you using ANSI text? Do you need to support Windows 98?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1422472952, "post_id": 28199076, "comment_id": 44767468, "body": "No you do not want quotes, it&#39;s just that your example above showed them."}, {"owner": {"reputation": 221, "user_id": 3385436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/313a2376f9135209f724dbb92bec2722?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3385436/sam"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1422473098, "post_id": 28199076, "comment_id": 44767556, "body": "@DavidHeffernan I&#39;m using ANSI? I&#39;m not using it intentionally. How do you see that? I thought char is normal standard today ..."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1422473773, "post_id": 28199076, "comment_id": 44767943, "body": "Windows native encoding is UTF-16. Held in wchar_t elements. You are using the Win 98 compatibility api."}, {"owner": {"reputation": 221, "user_id": 3385436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/313a2376f9135209f724dbb92bec2722?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3385436/sam"}, "edited": false, "score": 0, "creation_date": 1422474032, "post_id": 28199076, "comment_id": 44768062, "body": "So if I&#39;m using wchar_t, my paths can contain German Umlaute and all the ANSI symbols? That&#39;s strange to me, I&#39;ve always been using plain char as it&#39;s applied in pretty much every tutorial I&#39;ve seen :)"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1422475774, "post_id": 28199076, "comment_id": 44769028, "body": "Pretty hard to imagine how an absolute path could fail. Working directory is not relevant."}, {"owner": {"reputation": 221, "user_id": 3385436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/313a2376f9135209f724dbb92bec2722?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3385436/sam"}, "edited": false, "score": 0, "creation_date": 1422476956, "post_id": 28199076, "comment_id": 44769729, "body": "Nah, the paths themselves are correct, it has to be the backslash and whitespace stuff. I just thought there has to be like a standard function from the WinAPI or something to make it ready for the system() call. I couldn&#39;t find any information about the format of the paths to be passed into the std::ifstream constructor either ..."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1422477401, "post_id": 28199076, "comment_id": 44770000, "body": "What can we say. If the system tells you that there&#39;s no such file, then you got the path wrong. But you should certainly stop using ANSI text."}, {"owner": {"reputation": 221, "user_id": 3385436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/313a2376f9135209f724dbb92bec2722?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3385436/sam"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1422477567, "post_id": 28199076, "comment_id": 44770090, "body": "@DavidHeffernan Sorry, I&#39;m not actually making any system() call. The std::ifstream constructor is all I send any path to. You mean I can basically just replace every &#39;char&#39; with &#39;wchar_t&#39;? Or isn&#39;t it as simple as that?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1422478043, "post_id": 28199076, "comment_id": 44770334, "body": "No it&#39;s not that simple. You might not be making the system call. The library is. But the C++ library isn&#39;t Unicode aware. Well, maybe the latest version is, I don&#39;t know. <a href=\"http://stackoverflow.com/questions/821873/how-to-open-an-stdfstream-ofstream-or-ifstream-with-a-unicode-filename\" title=\"how to open an stdfstream ofstream or ifstream with a unicode filename\">stackoverflow.com/questions/821873/&hellip;</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1422480876, "post_id": 28199076, "comment_id": 44771735, "body": "The standard <code>std::basic_ifstream</code> does not support Unicode filenames. Non-ASCII characters are assumed to be in the current locale. So you may be encountering a conversion error, producing a filename that does not actually match the real file. However, Microsoft&#39;s version of <code>std::basic_ifstream</code> includes an additional non-standard constructor that accepts a UTF-16 filename as <code>wchar_t*</code>. You could use <code>MultiByteToWideChar()</code> to convert the user&#39;s Ansi text to UTF-16 yourself, or switch to Unicode-based edit fields so you can get the user&#39;s text as UTF-16 directly."}], "owner": {"reputation": 221, "user_id": 3385436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/313a2376f9135209f724dbb92bec2722?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3385436/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 548, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422468690, "creation_date": 1422467641, "last_edit_date": 1422468690, "question_id": 28199076, "link": "https://stackoverflow.com/questions/28199076/absolute-file-paths-are-invalid-as-stdifstream-constructur-argument", "title": "Absolute file paths are invalid as std::ifstream constructur argument", "body": "<p>I'm developing a Win32 application that has a configuration dialog where the user can specify file paths to things like the database root / working directory. Up until now, in testing, I've been using this functionality with relative file paths, as my file structure is not spread out too much. Also, my config.txt file, which is in the same directory as the .exe file, is loaded on startup, calling the std::ifstream constructor with a relative, hard-coded path.</p>\n\n<p>As I'm newly working with the command line (allowing to drag files on the program's .exe file, therefore passing their paths), <code>the path to the config.txt file somehow is not recognized as valid</code> and my program (accordingly) throws an error upon this. Replacing the relative, hard-coded path with an absolute path won't fix this, because then, there's the problems with white spaces, backslashes (possibly German Umlaute in my user name too...).</p>\n\n<p>Besides the problem with the config.txt path, I now have attempted to <code>paste absolute paths from the address bar of Windows Explorer</code> into the edit controls of my program's configuration dialog. However with these paths, I run into pretty much the same problems.</p>\n\n<p>To round this up (and possibly further hint to the source of my problem), the same behaviour occurrs when I <code>drag files on the .exe</code> to pass their paths. Luckily, the paths (containing whitespaces) are quoted in the command line, so separation is easy, but after reading in, they behave just like the config.txt path and paths entered into the configuration dialog.</p>\n\n<p>Long story short - I am looking for a way to convert paths from the command line or the address bar of Windows Explorer into valid arguments to the std::ifstream constructor. The issues dealt with here are common actually - the standard whitespaces, backslash and Umlaute (Unicode) things.</p>\n\n<p>Here's a minimal example of reading in an absolute path from the dialog and trying to open a std::ifstream:</p>\n\n<pre><code>char path[256];\nHWND hEditCtrl = GetDlgItem(hwndConfigurationDlg, IDC_CONFIG_EDITTEXT_DATABASE);\nGetWindowText(hEditCtrl, path, sizeof(path));\n\n// path contains something like\n// \"C:\\Users\\Firstname Lastname\\Documents\\2__Programming\\Desktop\\Ger\u00e4t.txt\"\n// notice the whitespace, backslashes, German Umlaut.\n\nstd::ifstream ifstr(path, ios::in);\nif (!ifstr.good()){\n    MessageBox(NULL, \"The file was not found at the specified path.\",\n                    \"File Open Error\", MB_OK);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++-cli"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1422468759, "post_id": 28199064, "comment_id": 44765128, "body": "Google &quot;c++ rule of three&quot;, you are violating it with the <i>dataArray</i> member.  The getData() function makes it fatal.  Might not be the only place."}, {"owner": {"reputation": 1464, "user_id": 592485, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/28869b3820416f0ed6dab101952b1904?s=128&d=identicon&r=PG", "display_name": "Deeko", "link": "https://stackoverflow.com/users/592485/deeko"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1422469205, "post_id": 28199064, "comment_id": 44765383, "body": "Are you referring to my lack of copy constructor and destructor? I do have those - sorry, should have included them."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1422469251, "post_id": 28199064, "comment_id": 44765406, "body": "@Deeko - The rule of 3 also requires an assignment operator.  Second, your copy constructor is bogus.  It does nothing, and does not make a copy.  This bogus-ness is enough to cause issues with a program that makes copies, such as yours."}, {"owner": {"reputation": 1464, "user_id": 592485, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/28869b3820416f0ed6dab101952b1904?s=128&d=identicon&r=PG", "display_name": "Deeko", "link": "https://stackoverflow.com/users/592485/deeko"}, "edited": false, "score": 0, "creation_date": 1422469546, "post_id": 28199064, "comment_id": 44765588, "body": "Can you explain what makes it bogus? I&#39;m converting it back to a value type, creating a new pointer for the new object, and then putting that value in that pointer. Is there a step missing?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1422469687, "post_id": 28199064, "comment_id": 44765674, "body": "@Deeko - See my answer below.   Your copy constructor&#39;s responsibility is to <i>make copies</i>.  Your code refused to do that."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1422471810, "post_id": 28199064, "comment_id": 44766811, "body": "@Deeko -- Look at your copy constructor.  What if <code>value.dataArray</code> <i>is</i> NULL?  You never set it, thus you have a copy with an uninitialized pointer value."}, {"owner": {"reputation": 1464, "user_id": 592485, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/28869b3820416f0ed6dab101952b1904?s=128&d=identicon&r=PG", "display_name": "Deeko", "link": "https://stackoverflow.com/users/592485/deeko"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1422472603, "post_id": 28199064, "comment_id": 44767250, "body": "@PaulMcKenzie I&#39;ve simplified the copy constructor to copy the array and added NULL handling per your suggestions (thanks, it&#39;s cleaner and less error prone that way). Unfortunately, the AccessViolationExceptions persist."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 1464, "user_id": 592485, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/28869b3820416f0ed6dab101952b1904?s=128&d=identicon&r=PG", "display_name": "Deeko", "link": "https://stackoverflow.com/users/592485/deeko"}, "edited": false, "score": 0, "creation_date": 1422474475, "post_id": 28199064, "comment_id": 44768281, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/69765/discussion-between-paulmckenzie-and-deeko\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1464, "user_id": 592485, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/28869b3820416f0ed6dab101952b1904?s=128&d=identicon&r=PG", "display_name": "Deeko", "link": "https://stackoverflow.com/users/592485/deeko"}, "edited": false, "score": 0, "creation_date": 1422469849, "post_id": 28199692, "comment_id": 44765777, "body": "It&#39;s not empty. The commented out section explains what it does. I could fill out the entire thing, but that would not be helpful. The Data class operates on different data types - and depending on certain inputs, it converts dataArray to/from different primitives. It doesn&#39;t add to the question to type all of it here, so I gave an example of what it does with doubles."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 1464, "user_id": 592485, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/28869b3820416f0ed6dab101952b1904?s=128&d=identicon&r=PG", "display_name": "Deeko", "link": "https://stackoverflow.com/users/592485/deeko"}, "edited": false, "score": 0, "creation_date": 1422469899, "post_id": 28199692, "comment_id": 44765801, "body": "@Deeko - Please edit your question.  When you post code, all we are going by is what you post.  If we see no implementation, then there is no implementation.  And yes, it is important you post it because your code calls the copy constructor."}, {"owner": {"reputation": 1464, "user_id": 592485, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/28869b3820416f0ed6dab101952b1904?s=128&d=identicon&r=PG", "display_name": "Deeko", "link": "https://stackoverflow.com/users/592485/deeko"}, "edited": false, "score": 0, "creation_date": 1422470094, "post_id": 28199692, "comment_id": 44765911, "body": "Sorry for not being clear - I did post the code in the copy constructor, but in a comment, because it was not complete for every case. I&#39;ve edited the original question to reflect this, but, like the new comment says - the &quot;else&quot; case does actually fill out dataArray, in the same way it does for doubles, just with other data types."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 1464, "user_id": 592485, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/28869b3820416f0ed6dab101952b1904?s=128&d=identicon&r=PG", "display_name": "Deeko", "link": "https://stackoverflow.com/users/592485/deeko"}, "edited": false, "score": 1, "creation_date": 1422470174, "post_id": 28199692, "comment_id": 44765958, "body": "@Deeko - The copy constructor only responsibility is to create a copy.  I can&#39;t stress this any more than that.  Your implementation is dodgy, at best.  You shouldn&#39;t be doing any <i>if</i> statements at all -- just take the object passed to you, and create the <i>exact</i> copy of it.  If you don&#39;t do that, then my answer stands -- you&#39;re potentially passing around half-baked copies."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 1464, "user_id": 592485, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/28869b3820416f0ed6dab101952b1904?s=128&d=identicon&r=PG", "display_name": "Deeko", "link": "https://stackoverflow.com/users/592485/deeko"}, "edited": false, "score": 0, "creation_date": 1422474834, "post_id": 28199692, "comment_id": 44768478, "body": "You updated your question with new code.  Your assignment operator is now faulty.  Please use the one I posted in the answer above.  Or better yet, use <code>std::vector&lt;char&gt;</code> and there will be no need for assignment op, copy constructor, or destructor."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1422471893, "last_edit_date": 1422471893, "creation_date": 1422469642, "answer_id": 28199692, "question_id": 28199064, "link": "https://stackoverflow.com/questions/28199064/accessviolationexception-with-c-cli-and-native-interop/28199692#28199692", "title": "AccessViolationException with C++/CLI and native interop", "body": "<p>The copy constructor you provided for your <code>Data</code> class is empty, thus anytime a copy is made, you are creating an object that is <em>not</em> a copy of the object you're copying.  What happens is that your program is now passing half-baked copies around with no <code>dataArray</code> element set.  </p>\n\n<p>These errors, where the user-defined copy constructor is broken or incomplete, are some of the toughest errors to diagnose.  You must complete your code for the copy constructor to perform a real copy.  </p>\n\n<p>In addition, you need an assignment operator to complete the \"rule of 3\".</p>\n\n<p>Edit:  An example of a correctly coded copy constructor would be this:</p>\n\n<pre><code>   Data(const Data &amp;value) : field(value.field), dataType(value.dataType), dataArray(0) \n   {\n     addData(dataType, value.dataArray);\n   }\n</code></pre>\n\n<p>And in the <code>addData</code> you determine the data type.</p>\n\n<p>Additional information:  </p>\n\n<p>Your destructor need not check for NULL, as it is not necessary.</p>\n\n<pre><code>~Data()\n{\n    delete dataArray;\n}\n</code></pre>\n\n<p>Also, the assignment operator would look like this:</p>\n\n<pre><code>   #include &lt;algorithm&gt;\n   //...\n   Data&amp; operator=(Data value)\n   {\n      std::swap(value.dataType, dataType);\n      std::swap(value.dataArray, datArraye);\n      std::swap(value.field, field);\n      return *this;\n   }\n</code></pre>\n"}], "owner": {"reputation": 1464, "user_id": 592485, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/28869b3820416f0ed6dab101952b1904?s=128&d=identicon&r=PG", "display_name": "Deeko", "link": "https://stackoverflow.com/users/592485/deeko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 847, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422472520, "creation_date": 1422467610, "last_edit_date": 1422472520, "question_id": 28199064, "link": "https://stackoverflow.com/questions/28199064/accessviolationexception-with-c-cli-and-native-interop", "title": "AccessViolationException with C++/CLI and native interop", "body": "<p>I have a CLI/C++ class that instantiates a native C++ object, then later calls a method on that object and has some data returned. I'm getting random AccessViolationExceptions and can't figure out what's going on. Here's a stripped down version of my code:</p>\n\n<pre><code>public ref class MyWrapper\n{\npublic:\n   MyWrapper()\n   {\n      nativeObject = new NativeObject();\n   }          \n\n   Object^ getData(String^ field)\n   {\n      string nativeField = msclr::interop::marshal_as&lt;string&gt;(field);\n      Data nativeResult = nativeObject-&gt;getData(nativeField);\n      Object^ result = convertToManaged(nativeResult);\n      return result;\n   }\n\n   Object&amp; convertToManaged(Data data)\n   {\n       // This converts the char* noted below back into its basic data type, and returns it as an object\n   }\n\nprivate:\n      NativeObject* nativeObject;\n}\n</code></pre>\n\n<p>..then, in NativeObject...</p>\n\n<pre><code>Data getData(string nativeField)\n{\n      // do some processing\n      Data result(nativeField);\n      result.addData();\n      return result;\n}\n</code></pre>\n\n<p>A rough definition of Data:</p>\n\n<pre><code>class Data\n{\nprivate:\n   string field;\n   int dataType;\n   char* dataArray;\n   size_t size;\n\npublic:\n   Data()\n   {\n      dataArray = NULL;\n   }\n   Data(const Data &amp;value) \n   {\n      copyData(value);\n   }\n\n   ~Data()\n   {\n      delete dataArray;\n   }\n\n   void copyData(const Data &amp;value)\n   { \n      dataType = value.dataType;\n      size = value.size;\n\n      if (value.dataArray != NULL)\n      {\n         dataArray = new char[value.size];\n         memcpy(dataArray, value.dataArray, value.size);\n      }\n      else\n      {\n         dataArray = NULL;\n      }\n   }\n\n   Data&amp; Data::operator=(const Data &amp; value)\n   {\n      copyData(value);\n      return *this;\n   }\n\n   void addData()\n   {\n      /* This converts a basic data type like a double into a char* with reinterpret_cast, \n      like this: \n\n      double* newValue = new double();\n      *newValue = value;\n      dataArray = reinterpret_cast&lt;char*&gt;(newValue);\n      size = sizeof(double);\n      */\n   }\n}\n</code></pre>\n\n<p>Most of the time, this works fine. I have a C# test assembly that runs it with various (expected) input types and it runs without issue. But, when I put it in the context of a larger application, it will randomly throw AccessViolationExceptions. While most of them come from this code itself, it's not always the same place - sometimes its the managed getData function, sometimes its the native getData function. And ever stranger, when running with this code in place, random other parts of the application that are purely managed will give me AccessViolationExceptions, which never occurred before adding this code.</p>\n\n<p>Any ideas what's going on? It seems obvious that I'm doing something bad to memory but I can't figure out what. I've tried a few variations of this (returning the native Data object as a pointer, creating the result object as a pin_ptr from the managed code, and passing it in as an argument, etc), but they all produce similar results.</p>\n\n<p>Commenting out result.addData() APPEARS to make the issue go away. All that method does is allocate some memory that gets stored in the dataArray field. Could the fact that that's then passed back to managed code be the problem?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1422467461, "post_id": 28198944, "comment_id": 44764362, "body": "are you sure you are looking in the right place on the file system? Put an absolute path in there"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1422467485, "post_id": 28198944, "comment_id": 44764376, "body": "What if you can&#39;t create the file? Have you checked that the file is created properly? And how (and when and where) do you check if data has been written to it?"}, {"owner": {"reputation": 17, "user_id": 3813531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f0caa2dfc85338cc55b451a90ccf9a?s=128&d=identicon&r=PG&f=1", "display_name": "mrajesh016", "link": "https://stackoverflow.com/users/3813531/mrajesh016"}, "edited": false, "score": 0, "creation_date": 1422467513, "post_id": 28198944, "comment_id": 44764395, "body": "Yaa , i&#39;m sure about the path no problem there"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1422467523, "post_id": 28198944, "comment_id": 44764404, "body": "I tested your code and it works for me. Maybe you have a permission error."}, {"owner": {"reputation": 1857, "user_id": 1473653, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16b3d9fce3747c5766f39e647167dcf7?s=128&d=identicon&r=PG", "display_name": "ahjohnston25", "link": "https://stackoverflow.com/users/1473653/ahjohnston25"}, "edited": false, "score": 1, "creation_date": 1422467739, "post_id": 28198944, "comment_id": 44764511, "body": "Could you use <code>stat()</code> to check if the file exists instead of opening it with <code>ifstream</code>? I feel like <code>ifstream</code> may block writes to the file (though I don&#39;t know enough about C++ internals to be sure)."}, {"owner": {"reputation": 725, "user_id": 1135237, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/22b63d609b1cbbefc2720bf906697157?s=128&d=identicon&r=PG", "display_name": "qqqqq", "link": "https://stackoverflow.com/users/1135237/qqqqq"}, "edited": false, "score": 0, "creation_date": 1422467755, "post_id": 28198944, "comment_id": 44764518, "body": "Use this code to test that it is opened or not:if (myfile.is_open()) {...}"}, {"owner": {"reputation": 17, "user_id": 3813531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f0caa2dfc85338cc55b451a90ccf9a?s=128&d=identicon&r=PG&f=1", "display_name": "mrajesh016", "link": "https://stackoverflow.com/users/3813531/mrajesh016"}, "edited": false, "score": 0, "creation_date": 1422468454, "post_id": 28198944, "comment_id": 44764949, "body": "I think the &quot;MaxPackets\\tInterval\\tPacketSize\\ttimeFirstTPacket&quot; is not getting wriiten due to something i did below it"}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1422472048, "post_id": 28199542, "comment_id": 44766943, "body": "Instead of <code>ifstream</code> use <code>tellg</code> immediately after opening the file to find out if it is empty. (If tellg returns 0, write the header before data, else proceed directly to appending)"}], "tags": [], "owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "is_accepted": true, "score": 2, "last_activity_date": 1422469126, "creation_date": 1422469126, "answer_id": 28199542, "question_id": 28198944, "link": "https://stackoverflow.com/questions/28198944/writing-to-a-file-if-its-being-created-for-first-time/28199542#28199542", "title": "Writing to a file if it&#39;s being created for first time", "body": "<p>You are opening the file for output twice, and the second time is overwriting what you wrote the first time. You can either open it only once, or you can open it in append mode the second time:</p>\n\n<pre><code>ofstream outfile(\"report.txt\", std::ios::app);\n</code></pre>\n\n<p>This will make it append to the end of the file instead of overwriting it.</p>\n"}], "owner": {"reputation": 17, "user_id": 3813531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f0caa2dfc85338cc55b451a90ccf9a?s=128&d=identicon&r=PG&f=1", "display_name": "mrajesh016", "link": "https://stackoverflow.com/users/3813531/mrajesh016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 28199542, "answer_count": 1, "score": 0, "last_activity_date": 1422474982, "creation_date": 1422467207, "last_edit_date": 1422468321, "question_id": 28198944, "link": "https://stackoverflow.com/questions/28198944/writing-to-a-file-if-its-being-created-for-first-time", "title": "Writing to a file if it&#39;s being created for first time", "body": "<p>I want to write Some Header to my file only the first time it's being created.  The file name is report .txt</p>\n\n<p>My attempt so far--> </p>\n\n<pre><code>   if(ifstream(\"report.txt\")){\n       printf(\"The file already exists\");\n\n   }\n\n else\n {\n     printf(\"file is created for first time\\n\");\n    ofstream resfile(\"report.txt\");\n       resfile&lt;&lt;\"MaxPackets\\tInterval\\tPacketSize\\ttimeFirstTPacket\"&lt;&lt;endl;\n\n }\n</code></pre>\n\n<p>I'm getting the output \"file is created for first time\" when it happens but nothing is being written to it . Sorry all it's being written to the file after i comment out all the code that is present after it. </p>\n\n<p>The code after the above lines is --> </p>\n\n<pre><code>   ofstream outfile(\"report.txt\");\n    while(getline(infile,data)) \n     {\n         istringstream res(data);\n              string word;\n              int flag;\n\n         if(line==0){\n\n              outfile&lt;&lt;\"1000\\t0.01\\t64\\t\";\n\n              flag=0;\n\n              while(res&gt;&gt;word){\n\n                  if(flag==1)\n                    outfile&lt;&lt;word&lt;&lt;endl;\n\n                flag++;\n              }\n\n\n         }\n\n\n\n\n\n         line++;\n\n     }\n\n     outfile.close();\n</code></pre>\n\n<p>But how to rectify it?? please help</p>\n"}, {"tags": ["c++", "pointers", "inheritance", "smart-pointers", "virtual-functions"], "comments": [{"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 0, "creation_date": 1422466780, "post_id": 28198718, "comment_id": 44763951, "body": "Simple: Don&#39;t return <code>this</code> from a function. Since you just called the function, you must have a way to access the object after all... (There is one exception for <a href=\"http://en.wikipedia.org/wiki/Fluent_interface#C.2B.2B\" rel=\"nofollow noreferrer\">fluent interfaces</a> in which you will return <code>*this</code> and only ever use that to chain another method.)"}, {"owner": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "edited": false, "score": 0, "creation_date": 1422466818, "post_id": 28198718, "comment_id": 44763976, "body": "&quot;but it needs to link to the same administrative info&quot; are you saying this because you need to track the relationship between <code>foo</code> and <code>ptr</code> or is <code>foo</code> some kind of transformation of <code>ptr</code>?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 4, "creation_date": 1422467110, "post_id": 28198718, "comment_id": 44764166, "body": "You might want to take a look at <code>std::shared_from_this</code> and <code>std::make_shared</code>."}, {"owner": {"reputation": 1104, "user_id": 942179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609d88a9b6ac9d556f22c89c4552fc18?s=128&d=identicon&r=PG", "display_name": "Elmar Zander", "link": "https://stackoverflow.com/users/942179/elmar-zander"}, "reply_to_user": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "edited": false, "score": 0, "creation_date": 1422467146, "post_id": 28198718, "comment_id": 44764189, "body": "@Guvante Well, if e.g. <code>foo</code> contains a smart pointer to the same object (<code>new Derived(param)</code>) that as <code>ptr</code> and both have there own reference counter, the code will probably at some point reference an already deleted object, and it will delete the object twice. So, they <i>must</i> use the same reference counter. I just said &#39;administrative info` because, you need not realise this via reference counting."}, {"owner": {"reputation": 1104, "user_id": 942179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609d88a9b6ac9d556f22c89c4552fc18?s=128&d=identicon&r=PG", "display_name": "Elmar Zander", "link": "https://stackoverflow.com/users/942179/elmar-zander"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1422467640, "post_id": 28198718, "comment_id": 44764467, "body": "@Deduplicator Yes, that looks quite nice. With boost it should also work with C++03."}, {"owner": {"reputation": 1104, "user_id": 942179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609d88a9b6ac9d556f22c89c4552fc18?s=128&d=identicon&r=PG", "display_name": "Elmar Zander", "link": "https://stackoverflow.com/users/942179/elmar-zander"}, "reply_to_user": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 0, "creation_date": 1422467949, "post_id": 28198718, "comment_id": 44764649, "body": "@gha.st The function may return <code>this</code>, but may also return some kind of wrapper or a completely new object. The calling code cannot know this, since this is completely up to the derived class."}, {"owner": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1422470170, "post_id": 28198718, "comment_id": 44765955, "body": "So you are sometimes returning <code>this</code> (in a smart pointer) other times you are returning some other object. That is the bit that I was missing. @Deduplicator: You should expand your comment to an answer, it matches his use case quite well."}], "owner": {"reputation": 1104, "user_id": 942179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609d88a9b6ac9d556f22c89c4552fc18?s=128&d=identicon&r=PG", "display_name": "Elmar Zander", "link": "https://stackoverflow.com/users/942179/elmar-zander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1422466450, "creation_date": 1422466450, "question_id": 28198718, "link": "https://stackoverflow.com/questions/28198718/idiom-for-smart-ptrs-and-virtual-functions", "title": "Idiom for smart_ptr&#39;s and virtual functions", "body": "<p>In a code I'm writing, I want to rely as much as possible on smart pointers. I have now the problem, that when I want to use dynamic dispatch (which is basically not a problem with smart pointers), in the virtual function that gets called, <code>this</code> is again a bare pointer and is stripped of all the smart pointer info. </p>\n\n<p>To make this clear, consider the following base class</p>\n\n<pre><code>class Base {\n  virtual smart_ptr&lt;Base&gt; do_stuff(int some_param);\n}\n</code></pre>\n\n<p>and a fragment where this class and a derived class is used;</p>\n\n<pre><code>smart_ptr&lt;Base&gt; ptr = smart_ptr&lt;Base&gt;( new Derived(param1) );\nsmart_ptr&lt;Base&gt; foo = ptr-&gt;do_stuff(2);\n</code></pre>\n\n<p>For the <code>do_stuff</code> implementation in <code>Derived</code> it should be possible to return just the original smart pointer, or a new smart pointer wrapping the old one or even a completely new object. Of course, when I say \"the original smart pointer\" it doesn't have to be the same object, but it needs to link to the same  administrative info (like ref counter, or linked list or whatever) as <code>ptr</code>. I clearly won't get that using <code>smart_ptr&lt;Base&gt;(this)</code>, but what are the alternatives?  The only alternatives that I currently see, are</p>\n\n<ol>\n<li>Pass the smart pointer also into <code>do_stuff</code> like <code>do_stuff(smart_ptr&lt;Base&gt; This, int some_param)</code>, assert that <code>this == This.get()</code> and then work with <code>This</code>?</li>\n<li>Keep the smart pointers in a global hashtable (or static member in Base) and make a lookup in <code>do_stuff</code> into that table (like <code>This = Base::ptrs[this]</code>)?</li>\n</ol>\n\n<p>Both of them are pretty ugly. The first can be made a bit nicer by </p>\n\n<ol start=\"3\">\n<li>Renaming <code>do_stuff</code> to <code>do_stuff_</code>, making it protected and providing a friend function <code>do_stuff(smart_ptr&lt;Base&gt; ptr, int param)</code>, which returns <code>ptr-&gt;do_stuff_(ptr, param)</code>.</li>\n</ol>\n\n<p>However, I don't like that friend function business for methods that should rather be class members. Is there any nice C++ idiom out there that I've seen yet? It should preferable work with C++03.</p>\n"}, {"tags": ["c++", "algorithm", "recursion", "logic"], "comments": [{"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1422466367, "post_id": 28198642, "comment_id": 44763686, "body": "at what point in the code do you first notice something wrong?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 4, "creation_date": 1422466415, "post_id": 28198642, "comment_id": 44763709, "body": "When you used the debugger, and executed each statement one at a time, which line causes the issue?"}, {"owner": {"reputation": 163, "user_id": 4436162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a5a4e159e8bdc13e009eb507e916d2?s=128&d=identicon&r=PG&f=1", "display_name": "ghosts_in_the_code", "link": "https://stackoverflow.com/users/4436162/ghosts-in-the-code"}, "reply_to_user": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1422466571, "post_id": 28198642, "comment_id": 44763807, "body": "@TankorSmash I was just trying the program with simple situations such as win(1,2,1) and win(2,2,1). I got 0 as the final answer in both situations, making it seem as though neither player wins in a 2 player game."}, {"owner": {"reputation": 163, "user_id": 4436162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a5a4e159e8bdc13e009eb507e916d2?s=128&d=identicon&r=PG&f=1", "display_name": "ghosts_in_the_code", "link": "https://stackoverflow.com/users/4436162/ghosts-in-the-code"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422466609, "post_id": 28198642, "comment_id": 44763836, "body": "@ThomasMatthews I don&#39;t know to use a debugger. The error is logical, not in the syntax. Can a debugger help?"}, {"owner": {"reputation": 330, "user_id": 2892280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f114732d296420e6a0c139492cddff5?s=128&d=identicon&r=PG&f=1", "display_name": "bajuwa", "link": "https://stackoverflow.com/users/2892280/bajuwa"}, "edited": false, "score": 5, "creation_date": 1422466988, "post_id": 28198642, "comment_id": 44764098, "body": "A debugger can usually let you see what variables have what values for the given line you are at (which, btw, you can step through line by line at your own pace while the program is &#39;paused&#39; by the debugger)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422469053, "post_id": 28198642, "comment_id": 44765288, "body": "Spend some time, learn to use the debugger.  A lot faster than having folks at StackOverflow perform a code review or inspection."}, {"owner": {"reputation": 163, "user_id": 4436162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a5a4e159e8bdc13e009eb507e916d2?s=128&d=identicon&r=PG&f=1", "display_name": "ghosts_in_the_code", "link": "https://stackoverflow.com/users/4436162/ghosts-in-the-code"}, "edited": false, "score": 0, "creation_date": 1422629379, "post_id": 28198642, "comment_id": 44837956, "body": "Sorry, but I couldn&#39;t understand anything about the debugger."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1422652797, "post_id": 28198642, "comment_id": 44850192, "body": "Learning to use a debugger is one of the most important skills to have as a programmer."}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 4436162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a5a4e159e8bdc13e009eb507e916d2?s=128&d=identicon&r=PG&f=1", "display_name": "ghosts_in_the_code", "link": "https://stackoverflow.com/users/4436162/ghosts-in-the-code"}, "edited": false, "score": 0, "creation_date": 1422629525, "post_id": 28201371, "comment_id": 44838042, "body": "I am assuming that all players play perfectly. isn&#39;t that enough to determine whether you can possibly win, for a given scenario?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 163, "user_id": 4436162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a5a4e159e8bdc13e009eb507e916d2?s=128&d=identicon&r=PG&f=1", "display_name": "ghosts_in_the_code", "link": "https://stackoverflow.com/users/4436162/ghosts-in-the-code"}, "edited": false, "score": 0, "creation_date": 1422630798, "post_id": 28201371, "comment_id": 44838787, "body": "Definitely not, in some cases. Consider a simple 3-player game where A can not win. He can play x or y, but will lose either way. If A plays x, B will have a winning move. If A plays y, C will have a winning move. So, A&#39;s play is undefined. Now imagine a further game, with 4 player, leading to a situation as above. D will be unable to predict A&#39;s behaviour, even trough &quot;perfect-play&quot; assumptions."}, {"owner": {"reputation": 163, "user_id": 4436162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a5a4e159e8bdc13e009eb507e916d2?s=128&d=identicon&r=PG&f=1", "display_name": "ghosts_in_the_code", "link": "https://stackoverflow.com/users/4436162/ghosts-in-the-code"}, "edited": false, "score": 0, "creation_date": 1422631089, "post_id": 28201371, "comment_id": 44838938, "body": "Okay, but my algorithm doesn&#39;t work even for a 2 player game. I know for a fact that the person playing second can always win. Could you please find the error. I can put a bounty (50) since I anyway don&#39;t use the site (SO) much."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 163, "user_id": 4436162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a5a4e159e8bdc13e009eb507e916d2?s=128&d=identicon&r=PG&f=1", "display_name": "ghosts_in_the_code", "link": "https://stackoverflow.com/users/4436162/ghosts-in-the-code"}, "edited": false, "score": 0, "creation_date": 1422652009, "post_id": 28201371, "comment_id": 44849872, "body": "Programmed a recursive, but inefficient C++ solution. Is it worth some bounty ? :-)"}], "tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1422652520, "last_edit_date": 1422652520, "creation_date": 1422475501, "answer_id": 28201371, "question_id": 28198642, "link": "https://stackoverflow.com/questions/28198642/program-for-number-game/28201371#28201371", "title": "Program for number game", "body": "<p>There's a bunch of issues with your approach.</p>\n\n<p>The main one is that since this is not a simple two-player min-max, you cannot simply return one score, recursively. You have to return the score each player would get, for each play of a given player. Something like:</p>\n\n<p>void  scores(int currentPlayer, int toWrite, int outScores[], int nbOut)</p>\n\n<p>Would return the score of all players in <em>outScores</em>, if <em>currentPlayer</em> were to write one or two number, from <em>toWrite</em>, with <em>nbOut</em> players already out. </p>\n\n<p>Still, this is not optimal. Recursively trying all solutions for 10 players means going more than 50 levels down, with a branching factor of 2. You need some dynamic programming to make it efficient.</p>\n\n<p>I did code it. It works very well for 4 players, with a max value of 10. It gets really slow for higher number of players. As I said, dynamic programming is what you are looking for, here. </p>\n\n<p>Also, I assume a player would prefer playing just once if it would still get to lose in the same order.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;memory.h&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nconst int NB_PLAYERS = 3;\nconst int MAX_VALUE = 10;\n\nvector&lt;pair&lt;int, int&gt;&gt; scores(int currentPlayer, int toWrite, int outScores[], int nbOut)\n{\n    if (outScores[currentPlayer] == -1) // we're already out, lets just have the next player play\n    {\n        return scores((currentPlayer + 1) % NB_PLAYERS, toWrite, outScores, nbOut);\n    }\n\n    if (toWrite == MAX_VALUE) // one player is out\n    {\n        vector&lt;pair&lt;int, int&gt;&gt; ret;\n        if (nbOut + 2 != NB_PLAYERS)\n        {\n            outScores[currentPlayer] = -1; // so the game can continue without us\n            ret = scores((currentPlayer + 1) % NB_PLAYERS, 1, outScores, nbOut + 1);\n        }\n        else\n        {\n            for(int i=0; i &lt; NB_PLAYERS; i++)\n            {\n                if (outScores[i] == 0)\n                {\n                    outScores[i] = NB_PLAYERS; // set the winner\n                }\n            }\n        }\n        outScores[currentPlayer] = nbOut + 1;\n        ret.push_back(pair&lt;int, int&gt;(1,currentPlayer));\n        return ret;\n    }\n\n    if (toWrite + 1 == MAX_VALUE) // no point playing to lose, if we can avoid it\n    {\n        vector&lt;pair&lt;int, int&gt;&gt; ret;\n        ret = scores((currentPlayer + 1) % NB_PLAYERS, toWrite + 1, outScores, nbOut);\n        ret.push_back(pair&lt;int,int&gt;(1,currentPlayer));\n        return ret;\n    }\n\n    int scoresIfPlay1[NB_PLAYERS];\n    int scoresIfPlay2[NB_PLAYERS];\n    vector&lt;pair&lt;int,int&gt;&gt; ret1;\n    vector&lt;pair&lt;int,int&gt;&gt; ret2;\n\n    memcpy(scoresIfPlay1, outScores, sizeof(int) * NB_PLAYERS);\n    memcpy(scoresIfPlay2, outScores, sizeof(int) * NB_PLAYERS);\n\n    ret1 = scores((currentPlayer + 1) % NB_PLAYERS, toWrite + 1, scoresIfPlay1, nbOut); //recurse with both choices\n    ret2 = scores((currentPlayer + 1) % NB_PLAYERS, toWrite + 2, scoresIfPlay2, nbOut);\n\n    if (scoresIfPlay2[currentPlayer] &gt; scoresIfPlay1[currentPlayer]) // pick the solution that yields the higher score\n    {\n        memcpy(outScores, scoresIfPlay2, sizeof(int) * NB_PLAYERS);\n        ret2.push_back(pair&lt;int,int&gt;(2,currentPlayer));\n        return ret2;\n    }\n    else\n    {\n        memcpy(outScores, scoresIfPlay1, sizeof(int) * NB_PLAYERS);\n        ret1.push_back(pair&lt;int,int&gt;(1,currentPlayer));\n        return ret1;\n    }\n}\n\nint main()\n{\n    int outScores[NB_PLAYERS] = {0};\n\n    vector&lt;pair&lt;int, int&gt;&gt; plays = scores(0, 1, outScores, 0);\n\n    for(int i = 0; i &lt; NB_PLAYERS; i++)\n    {\n        cout &lt;&lt; \"Player \" &lt;&lt; i &lt;&lt; \" has score \" &lt;&lt; outScores[i] &lt;&lt; endl;\n    }\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; \"Plays were: \" &lt;&lt; endl;\n    for(int i = plays.size() - 1; i &gt;= 0; --i)\n    {\n        cout &lt;&lt; \"player \" &lt;&lt; plays[i].second &lt;&lt; \" plays \" &lt;&lt; plays[i].first &lt;&lt; \" times.\" &lt;&lt; endl;\n    }\n\n}\n</code></pre>\n\n<p><strong>=== old answer ===</strong></p>\n\n<p>The problem, as stated, doesn't allow you to tell whether you will win or lose. In order to do so, you must change the rules in one way or another: Since there would be 9 losers and 1 winner, any of the non-winning players can change the way they play and while they still lose, affect who wins. E.g. player x loses either way but can make it a win or a loss for player y. How x will play is not defined.</p>\n\n<p>You need to pick a scenario:</p>\n\n<ul>\n<li>Every player will try to eliminate every other player as fast as possible, as long as it doesn't make them lose.</li>\n<li>Or, being eliminated later yields more points. Players will maximise their score.</li>\n</ul>\n\n<p>In any case, the solution should be more complex than above. You probably want to recurse over</p>\n\n<p><em>int scoreFromPosition(int player,int no_of_players,int counter)</em></p>\n\n<p>which would return the max score player <em>player</em> can get when <em>no_of_player</em> players are left, with counter currently being <em>counter</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 11286, "user_id": 3928385, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3HdfL.png?s=128&g=1", "display_name": "Ishamael", "link": "https://stackoverflow.com/users/3928385/ishamael"}, "is_accepted": true, "score": 2, "last_activity_date": 1422832621, "creation_date": 1422832621, "answer_id": 28269114, "question_id": 28198642, "link": "https://stackoverflow.com/questions/28198642/program-for-number-game/28269114#28269114", "title": "Program for number game", "body": "<p>So as Jeffrey pointed out, this game cannot be solved for more that two players. So my understanding that the question now is why your program doesn't work for two players.</p>\n\n<p>The biggest issue in your logic for the two player game is that you misinterpret the value of <code>counter</code>. What <code>counter</code> effectively means in your code is what value the player needs to write right now (also having an option to write <code>counter + 1</code> after that as well). So you properly assume that if <code>counter &gt;= 10</code>, then a player loses, though the way you handle it might not be correct. What I would do, since we are talking about a two player game here, is just <code>return 0</code> immediately if <code>counter</code> is greater or equal to <code>10</code>.</p>\n\n<p>Now to the main issue -- the way you call the recursive function. The first time you call it is correct</p>\n\n<pre><code>if(win(player+1,no_of_players,counter+1)==0)\n</code></pre>\n\n<p>You pass it to another player (by the way, you are not using the <code>player</code> variable in any way, so I would just remove it from the code altogether), writing <code>counter</code> on the board, and by this time we know that <code>counter</code> is not <code>10</code>, so it is safe to write it.</p>\n\n<p>Your second call, however, is wrong.</p>\n\n<pre><code>if(win(player+1,no_of_players,counter+2)==0)\n</code></pre>\n\n<p>Here you effectively passing a turn to the next player, after writing both <code>counter</code> and <code>counter + 1</code> on the board. But wait, what if <code>counter + 1</code> is <code>10</code>? You need to call it like this:</p>\n\n<pre><code>if(counter + 1 &lt; 10 &amp;&amp; win(player+1,no_of_players,counter+2)==0)\n</code></pre>\n\n<p>In other words, do not even consider taking two turns if the second turn would result in printing 10.</p>\n\n<p>Finally, the last issue in your thinking is that your program will return a different value if you call it as <code>win(1, 2, 1)</code> and <code>win(2, 2, 1)</code>. You are not using the variable <code>player</code>, so it cannot return different values. Your <code>win</code> function doesn't say whether player with ordinal <code>player</code> wins or not, what it says is whether <strong>current</strong> player wins or not. So to test that it actually works, it makes more sense to change the initial value <code>counter</code>, simulating different turns by the first player, to see how the return value changes. For instance, the first player loses, so <code>win(1, 2, 1)</code> is <code>0</code>, and no matter what turn the first player makes, the second player wins, so <code>win(2, 2, 2)</code> and <code>win(2, 2, 3)</code> are <code>1</code>.</p>\n\n<p>Here's how it could look. I did just two changes to your code: made it <code>return 0</code> immediately if the <code>counter</code> is <code>10</code> and changed the way the second recursive call is made as described above. I did not remove <code>player</code> and <code>no_of_players</code> variables, but they are not really used in the code anymore:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include&lt;iostream&gt;\nusing namespace std;\n\nbool win(int player,int no_of_players,int counter)\n{\n    if(no_of_players==1)\n        return 1;\n    if(counter&gt;=10)\n    {\n        return 0;\n    }\n    if(player&gt;no_of_players)\n        player=0;\n    if(win(player+1,no_of_players,counter+1)==0)\n    {\n        cout&lt;&lt;\"\\nMove 1\";\n        return 1;\n    }\n    if(counter + 1 &lt; 10 &amp;&amp; win(player+1,no_of_players,counter+2)==0)\n    {\n        cout&lt;&lt;\"\\nMove 2\";\n        return 1;\n    }\n    cout&lt;&lt;\"\\nLosing position\";\n    return 0;\n}\n\nint main()\n{\n    int a=win(0,2,1);\n    cout&lt;&lt;\"\\nFinal state :\"&lt;&lt;a&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 4436162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a5a4e159e8bdc13e009eb507e916d2?s=128&d=identicon&r=PG&f=1", "display_name": "ghosts_in_the_code", "link": "https://stackoverflow.com/users/4436162/ghosts-in-the-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "accepted_answer_id": 28269114, "answer_count": 2, "score": -3, "last_activity_date": 1422832621, "creation_date": 1422466228, "last_edit_date": 1492087846, "question_id": 28198642, "link": "https://stackoverflow.com/questions/28198642/program-for-number-game", "title": "Program for number game", "body": "<p>I tried writing a C++ program for <a href=\"https://puzzling.stackexchange.com/questions/8286/10-friends-play-a-number-game/8297\">this question</a>. I am assuming all players play perfectly and the program is also playing perfectly to counter it. I tried using recursion (by reducing the problem into 2 smaller ones at each step). The value given with 'final state' tells you whether you will win (1) or lose (0). What is wrong with my code, since manually working out the solutions gives different results.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nbool win(int player,int no_of_players,int counter)\n{\n    if(no_of_players==1)\n        return 1;\n    if(counter&gt;=10)\n    {\n        --no_of_players;\n        counter=0;\n    }\n    if(player&gt;no_of_players)\n        player=0;\n    if(win(player+1,no_of_players,counter+1)==0)\n    {\n        cout&lt;&lt;\"\\nMove 1\";\n        return 1;\n    }\n    if(win(player+1,no_of_players,counter+2)==0)\n    {\n        cout&lt;&lt;\"\\nMove 2\";\n        return 1;\n    }\n    cout&lt;&lt;\"\\nLosing position\";\n    return 0;\n}\n\nint main()\n{\n    int a=win(0,2,1);\n    cout&lt;&lt;\"\\nFinal state :\"&lt;&lt;a;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "data-structures", "stdvector"], "comments": [{"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 8, "creation_date": 1422466004, "post_id": 28198560, "comment_id": 44763482, "body": "what are the errors?"}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 2, "creation_date": 1422466216, "post_id": 28198560, "comment_id": 44763596, "body": "His error is that he&#39;s trying to pass a PTMF as the predicate."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 1, "creation_date": 1422466233, "post_id": 28198560, "comment_id": 44763603, "body": "I&#39;m going to go out on a limb and guess that <code>isSingleTag</code> is not declared <code>static</code> and therefore doesn&#39;t work as a predicate for <code>remove_if</code>."}, {"owner": {"reputation": 6346, "user_id": 2587908, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LhXQO.jpg?s=128&g=1", "display_name": "sfjac", "link": "https://stackoverflow.com/users/2587908/sfjac"}, "edited": false, "score": 1, "creation_date": 1422466237, "post_id": 28198560, "comment_id": 44763606, "body": "You don&#39;t show the declaration - is <code>isSingleTag</code> static?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 2, "creation_date": 1422466297, "post_id": 28198560, "comment_id": 44763639, "body": "Hi vegazz! The information you&#39;ve provided here isn&#39;t enough for us to help diagnose what&#39;s wrong. Can you provide more information, like what specific error you&#39;re getting (compile-time error? if so, what? runtime error? if so, what kind?) or enough code for us to be able to reproduce the error on our end? Thanks!"}, {"owner": {"reputation": 1351, "user_id": 2425827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/s90T7.jpg?s=128&g=1", "display_name": "vegazz", "link": "https://stackoverflow.com/users/2425827/vegazz"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1422466755, "post_id": 28198560, "comment_id": 44763931, "body": "@Wintermute true :D problem solved, im new to c++ .. thank you"}], "answers": [{"tags": [], "owner": {"reputation": 50917, "user_id": 947836, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9addee65c2a92be93004ad689a7a415?s=128&d=identicon&r=PG&f=1", "display_name": "jrok", "link": "https://stackoverflow.com/users/947836/jrok"}, "is_accepted": true, "score": 2, "last_activity_date": 1422466388, "creation_date": 1422466388, "answer_id": 28198701, "question_id": 28198560, "link": "https://stackoverflow.com/questions/28198560/c-vector-remove-if-pairs/28198701#28198701", "title": "C++ vector remove_if pairs", "body": "<p>A pointer to a member function isn't callable without an object of the class the function is member of.</p>\n\n<p>Make <code>isSingleTag</code> <code>static</code> - taking its address results in a plain function pointer. Alternatively, make it a free function, since it looks like it's got no bussiness being a member function in the first place (it doesn't access any other members, does it?).</p>\n\n<p>The other option (for when you legitimately need to be a member function) is to bind it to a class object, using <code>std::bind</code>:</p>\n\n<pre><code>MyClass obj;\nauto func = std::bind(&amp;MyClass::isSingleTag, obj);\n</code></pre>\n\n<p>Now func is a callable that you can pass to the algorithm.</p>\n"}], "owner": {"reputation": 1351, "user_id": 2425827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/s90T7.jpg?s=128&g=1", "display_name": "vegazz", "link": "https://stackoverflow.com/users/2425827/vegazz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "accepted_answer_id": 28198701, "answer_count": 1, "score": 0, "last_activity_date": 1422466476, "creation_date": 1422465969, "last_edit_date": 1422466476, "question_id": 28198560, "link": "https://stackoverflow.com/questions/28198560/c-vector-remove-if-pairs", "title": "C++ vector remove_if pairs", "body": "<p>Im trying to remove pairs from vector with remove_if, but im getting errors</p>\n\n<pre><code>bool MyClass::isSingleTag(const pair&lt;int,string&gt; &amp; val) {\n   string tag = val.second;\n   int posImg, posBr;\n   posImg = tag.find(\"&lt;img\");\n   posBr = tag.find(\"&lt;br\");\n   if (posImg == -1 &amp;&amp; posBr == -1) {\n      return false;\n   } else {\n      return true;\n   }\n}\nvoid MyClass::deleteSingleTags() {\n   vector&lt;pair&lt;int,string&gt;&gt;::iterator last_iter;\n   last_iter = remove_if(allTags.begin(), allTags.end(), &amp;MyClass::isSingleTag);\n   allTags.erase(last_iter, allTags.end());\n}\n</code></pre>\n\n<p>Errors: <a href=\"http://pastebin.com/1FCWRVDG\" rel=\"nofollow\">http://pastebin.com/1FCWRVDG</a></p>\n"}, {"tags": ["c++", "visual-studio-2010", "dll"], "comments": [{"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 0, "creation_date": 1422466219, "post_id": 28198502, "comment_id": 44763597, "body": "Considering that VS2010 is not the newest Version, the question arises on which OS you are executing your program (&quot;Windows 7, Windows Server 2008 R2, Windows Vista, and Windows Server 2008:  This value requires <a href=\"http://support.microsoft.com/kb/2533623\" rel=\"nofollow noreferrer\">KB2533623</a> to be installed.&quot;)"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1422468962, "post_id": 28198502, "comment_id": 44765248, "body": "If you have no idea what dependent DLLs are missing then use SysInternals&#39; Process Monitor.  You see the app searching for it and not finding it."}, {"owner": {"reputation": 50972, "user_id": 74815, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/498c19952d2aa2c9ea2ccc4d9ea8ec69?s=128&d=identicon&r=PG", "display_name": "i_am_jorf", "link": "https://stackoverflow.com/users/74815/i-am-jorf"}, "edited": false, "score": 0, "creation_date": 1422469641, "post_id": 28198502, "comment_id": 44765638, "body": "The extensive Remarks section in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684175(v=vs.85).aspx\" rel=\"nofollow noreferrer\">LoadLibrary</a> documentation describes how it searches for a DLL when you provide a relative path.  The first place it looks is next to the current image.  I second using <a href=\"https://technet.microsoft.com/en-us/sysinternals/bb896645.aspx\" rel=\"nofollow noreferrer\">ProcessMonitor</a> to try to track down your dependency issues."}, {"owner": {"reputation": 1, "user_id": 4504086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de67f6b6354798d14548730aaf62301b?s=128&d=identicon&r=PG&f=1", "display_name": "codefish", "link": "https://stackoverflow.com/users/4504086/codefish"}, "edited": false, "score": 0, "creation_date": 1422618049, "post_id": 28198502, "comment_id": 44831754, "body": "I found the Problem. I am using a UnitTest and the active directory is not the debug directory in my solution. So  I set with [code] SetDllDirectory(L&quot;Path to Dll&quot;);[\\code] the directory where to search for the dlls"}], "owner": {"reputation": 1, "user_id": 4504086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de67f6b6354798d14548730aaf62301b?s=128&d=identicon&r=PG&f=1", "display_name": "codefish", "link": "https://stackoverflow.com/users/4504086/codefish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 954, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422465810, "creation_date": 1422465810, "question_id": 28198502, "link": "https://stackoverflow.com/questions/28198502/loadlibrary-relative-path", "title": "LoadLibrary relative Path", "body": "<p>I trie to load a dll into my application. The dll and all dependend dll's are stored in the application directory.</p>\n\n<p>First i tried to load with this:</p>\n\n<pre><code>HINSTANCE dllInstance = LoadLibrary(L\"opc_ua_client_dlld.dll\");\n</code></pre>\n\n<p>This is not working.</p>\n\n<pre><code>HINSTANCE dllInstance = LoadLibraryEx(L\"opc_ua_client_dlld.dll\",NULL,LOAD_LIBRARY_SEARCH_APPLICATION_DIR);\n</code></pre>\n\n<p>This is also not working</p>\n\n<p>Only if I give a absolute path to the dll, the application tries to load the dll but I get an error that the dependend dll's are not found.</p>\n\n<p>How can load from a relative path?</p>\n"}, {"tags": ["c++", "macos"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1422465768, "post_id": 28198425, "comment_id": 44763338, "body": "Is this a C function you&#39;re exporting or a C++ one? You may need to wrap it in an <a href=\"http://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c\"><code>extern &quot;C&quot; { ... }</code></a> block. It might be exported correctly, but with a C++ function name."}, {"owner": {"reputation": 1, "user_id": 4504082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcacd9e363daaed7ab02fca7f87b668?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Carmac", "link": "https://stackoverflow.com/users/4504082/jon-carmac"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1422466337, "post_id": 28198425, "comment_id": 44763665, "body": "It&#39;s a simple C function, i added context to the post of what i tried."}], "answers": [{"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1422467088, "creation_date": 1422467088, "answer_id": 28198913, "question_id": 28198425, "link": "https://stackoverflow.com/questions/28198425/osx-c-export-function/28198913#28198913", "title": "OSX C++ Export function", "body": "<p>You have <em>defined</em> (not just declared) a standalone, non-member, non-template, non-inline function in a header. This is exactly the thing you should not be doing. It leads to the sort of errors you describe, and is prohibited by the standard.</p>\n\n<p>You should have only a function ptototype in the header. Move its definition to an exactly one source file.</p>\n\n<p>The visibility attribute only makes sense when building shared libraries. You probably don't need it.</p>\n"}], "owner": {"reputation": 1, "user_id": 4504082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcacd9e363daaed7ab02fca7f87b668?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Carmac", "link": "https://stackoverflow.com/users/4504082/jon-carmac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422467088, "creation_date": 1422465583, "last_edit_date": 1422466313, "question_id": 28198425, "link": "https://stackoverflow.com/questions/28198425/osx-c-export-function", "title": "OSX C++ Export function", "body": "<p>I got a large C++ project that uses a makefile on OSX. where I simply want to add an exported function that I can resolve can call. The project needs to be an executeable and not a library. It already exports a bunch of functions but I cannot get my export to work, meaning it's not visible when I run nm on the binary.</p>\n\n<p>I tried to simply add this to the header .h</p>\n\n<pre><code>#define EXPORT __attribute__((visibility(\"default\")))\nEXPORT int callme(int test);\n</code></pre>\n\n<p>I also tried declaring it in the header like</p>\n\n<pre><code>EXPORT int callme(int test) {return 0;}\n</code></pre>\n\n<p>but then i get a bunch of errors of the symbol already existing in other object files.</p>\n\n<p>Edit: It's a simple C function and I also tried</p>\n\n<pre><code> #if !defined(__cplusplus)\n #define MONExternC extern\n #else\n #define MONExternC extern \"C\"\n #endif\n\n MONExternC int callme (int test);\n</code></pre>\n\n<p>I'm a bit of novice when it comes to C++ and any insight or help would be much appreciated, thanks.</p>\n"}, {"tags": ["c++", "graph", "hierarchy", "scenegraph"], "answers": [{"tags": [], "owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "is_accepted": false, "score": 0, "last_activity_date": 1422476799, "creation_date": 1422476799, "answer_id": 28201757, "question_id": 28198259, "link": "https://stackoverflow.com/questions/28198259/understanding-scene-graphs-and-graph-edges/28201757#28201757", "title": "Understanding Scene Graphs and Graph Edges", "body": "<p>In a graph, edges connect vertices. This is just by definition of what a graph is in that context, look up a basic lecture on graph theory in the context of computer science.</p>\n\n<p>Note that there are other definitions for a graph, and also this has nothing to do with graphic, even though you will render the scene to a picture probably.</p>\n"}], "owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1422476799, "creation_date": 1422465016, "question_id": 28198259, "link": "https://stackoverflow.com/questions/28198259/understanding-scene-graphs-and-graph-edges", "title": "Understanding Scene Graphs and Graph Edges", "body": "<p>So I'm trying to getting to grips with using Scene graphs and nodes in my code (game coding in C++) and I think I understand the basics of them and how they are used (and I can definitely see the benefits), but I'm coming across the term \"<em>Graph Edge</em>\" and I can't find any reading material explaining exactly what they are and how they fit in with Scene Graphs/trees/nodes in object hierarchy structures.</p>\n\n<p>If anyone knows of any good material or has their own answer on what graph edges are and how they fit in (in use and implementation) that would be great.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "iostream"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1422465149, "post_id": 28198104, "comment_id": 44762976, "body": "This comes up on SO daily. People keep forgetting (or they didn&#39;t read their C++ book properly!) that <code>&gt;&gt;</code> into a string gets <i>a word</i>. Surely there&#39;s a FAQ for this &quot;problem&quot;?"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1422472283, "post_id": 28198104, "comment_id": 44767072, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/1736080/c-cout-cin-string-manipulation\">C++ cout cin string manipulation</a>"}], "answers": [{"comments": [{"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "edited": false, "score": 0, "creation_date": 1422465286, "post_id": 28198210, "comment_id": 44763072, "body": "@dkg: No, that would read the entire stream (up to end-of-file or an error), and wouldn&#39;t give you a string."}], "tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": true, "score": 3, "last_activity_date": 1422464882, "creation_date": 1422464882, "answer_id": 28198210, "question_id": 28198104, "link": "https://stackoverflow.com/questions/28198104/strange-cout-behavior-in-a-while-loop-in-c/28198210#28198210", "title": "Strange cout behavior in a while loop in C++", "body": "<p>Streaming into a string with <code>&gt;&gt;</code> reads a single word, up to a whitespace character. So you get two separate inputs, <code>\"Hello\"</code> and <code>\"world\"</code>.</p>\n\n<p>To read an entire line:</p>\n\n<pre><code>getline(cin, input);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 0, "last_activity_date": 1422465820, "last_edit_date": 1592644375, "creation_date": 1422465447, "answer_id": 28198376, "question_id": 28198104, "link": "https://stackoverflow.com/questions/28198104/strange-cout-behavior-in-a-while-loop-in-c/28198376#28198376", "title": "Strange cout behavior in a while loop in C++", "body": "<p>The buffer works OK. The logic behind <code>opreator&gt;&gt;</code> is ... ummm... a little bit complicated. You are in fact using a free standing <code>operator&gt;&gt;</code> for input stream and a string - <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator_ltltgtgt\" rel=\"nofollow noreferrer\">this no (2)</a>.</p>\n<p>The key part is:</p>\n<blockquote>\n<p>[...] then reads characters [...] until one of the following conditions becomes true:</p>\n<p>[...]</p>\n<ul>\n<li><code>std::isspace(c,is.getloc())</code> is true for the next character c in is (this whitespace character remains in the input stream).</li>\n</ul>\n</blockquote>\n<p>Which means it &quot;eats&quot; input until a white space (according to current locale) is met. Of course as Mike said, for the whole line, there is <code>getline</code>.</p>\n<p>It's worth to remember this nitpick too: <a href=\"https://stackoverflow.com/questions/28109679/why-does-cin-command-leaves-a-n-in-the-buffer/28109827#28109827\">Why does cin command leaves a &#39;\\n&#39; in the buffer?</a></p>\n"}], "owner": {"reputation": 273, "user_id": 3724417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4cbf080175ab5964b7b524a61422b8d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3724417", "link": "https://stackoverflow.com/users/3724417/user3724417"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 28198210, "answer_count": 2, "score": 0, "last_activity_date": 1422465820, "creation_date": 1422464588, "question_id": 28198104, "link": "https://stackoverflow.com/questions/28198104/strange-cout-behavior-in-a-while-loop-in-c", "title": "Strange cout behavior in a while loop in C++", "body": "<p>I am trying to print the input and then all the strings in the tk vector, as in the following program:</p>\n\n<pre><code>int main() {\n    while (true) {\n        string input;\n        cout &lt;&lt; \"prompt: \";\n        cin &gt;&gt; input;\n        vector&lt;string&gt; tk = {\"this\", \"is\", \"an\", \"example\"}; \n\n        cout &lt;&lt; input &lt;&lt; endl;\n        for (int i = 0; i &lt; tk.size(); i++) {\n            cout &lt;&lt; tk[i] &lt;&lt; endl;\n        }\n\n    }   \n    return 0; \n}\n</code></pre>\n\n<p>When I give the input \"Hello world\" I am expecting the output to be:</p>\n\n<pre><code>Hello world\nthis\nis\nan \nexample\nprompt: \n</code></pre>\n\n<p>But the output was:</p>\n\n<pre><code>Hello\nthis\nis\nan\nexample\nprompt: world\nthis\nis \nan\nexample\nprompt:\n</code></pre>\n\n<p>Does anyone know what went wrong here? I guess the cause is related to how the buffer works, but I really have no idea about the details.</p>\n"}, {"tags": ["c++", "visual-studio-2012", "readfile"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 2, "creation_date": 1422464730, "post_id": 28197891, "comment_id": 44762689, "body": "try this: <a href=\"http://stackoverflow.com/questions/593175/breaking-readfile-blocking-named-pipe-windows-api\" title=\"breaking readfile blocking named pipe windows api\">stackoverflow.com/questions/593175/&hellip;</a>"}, {"owner": {"reputation": 946, "user_id": 2769366, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8YFWC.jpg?s=128&g=1", "display_name": "Jaruba", "link": "https://stackoverflow.com/users/2769366/jaruba"}, "edited": false, "score": 0, "creation_date": 1422498871, "post_id": 28197891, "comment_id": 44777734, "body": "Great link. Thank you. :)"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1422501006, "post_id": 28197891, "comment_id": 44778199, "body": "It shouldn&#39;t wait for all 4096 bytes. It should return as soon as there is at least one byte available. Are you sure this problem really exists? NB you <i>must</i> check for an error return."}, {"owner": {"reputation": 946, "user_id": 2769366, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8YFWC.jpg?s=128&g=1", "display_name": "Jaruba", "link": "https://stackoverflow.com/users/2769366/jaruba"}, "edited": false, "score": 0, "creation_date": 1422502937, "post_id": 28197891, "comment_id": 44778620, "body": "It might be because I&#39;m building a FireBreath project and I&#39;m calling the C++ function from the browser, so it could also freeze because the browser can&#39;t continue until it gets the return value. But I am sure that the function waits until it gets the entire buffer and only then returns the value. My answer solves this issue entirely."}], "answers": [{"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1422464888, "creation_date": 1422464888, "answer_id": 28198214, "question_id": 28197891, "link": "https://stackoverflow.com/questions/28197891/win32-readfile-output-without-waiting-for-buffer/28198214#28198214", "title": "Win32 ReadFile Output without waiting for buffer", "body": "<p>One option is to put the code that reads from the pipe in its own thread, and have it run in a loop.  That will keep your main thread from blocking, and you can always read as much data as there is.  The challenge is that you now need to have a way to get the reading thread to transmit the data back to the main thread.</p>\n\n<p>Another option is to use overlapped I/O, which is discussed in the ReadFile and CreateFile documentation in MSDN.  It's a way to have the OS call back whenever data has been read from the pipe.  So your ReadFile won't block, but there (probably) won't be any data in the buffer until later.</p>\n"}, {"tags": [], "owner": {"reputation": 946, "user_id": 2769366, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8YFWC.jpg?s=128&g=1", "display_name": "Jaruba", "link": "https://stackoverflow.com/users/2769366/jaruba"}, "is_accepted": true, "score": 1, "last_activity_date": 1422498823, "creation_date": 1422498823, "answer_id": 28206094, "question_id": 28197891, "link": "https://stackoverflow.com/questions/28197891/win32-readfile-output-without-waiting-for-buffer/28206094#28206094", "title": "Win32 ReadFile Output without waiting for buffer", "body": "<p>Arkadiy's comment led me in the right direction. I made it work with the help of <code>PeekNamedPipe()</code></p>\n\n<p>My current code:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt; \n#include &lt;stdio.h&gt;\n\n#pragma warning( disable : 4800 ) // hide bool warning\n#define BUFSIZE 1024\nHANDLE g_hChildStd_OUT_Rd = NULL;\n\nstd::string ReadFromPipe(PROCESS_INFORMATION piProcInfo) {\n    CHAR chBuf[BUFSIZE];\n    DWORD dwRead;\n    DWORD avail;\n    bool bSuccess = FALSE;\n    bool tSuccess = FALSE;\n    std::string out = \"\";\n    tSuccess = PeekNamedPipe( g_hChildStd_OUT_Rd, NULL, 0, NULL, &amp;avail, NULL );\n    if (tSuccess &amp;&amp; avail &gt;= BUFSIZE) {\n        while (avail &gt;= BUFSIZE) {\n            bSuccess=ReadFile( g_hChildStd_OUT_Rd, chBuf, BUFSIZE, &amp;dwRead, NULL);\n            if( ! bSuccess || dwRead == 0 ) break; \n            std::string s(chBuf, dwRead);\n            out += s;\n            avail = avail - BUFSIZE;\n        }\n        return out;\n    } else {\n        return \"[false]\";\n    }\n}\n</code></pre>\n\n<p>This function, when called, will return the output since the last time it was called. <code>BUFSIZE</code> now acts as the minimum buffer, if the output is less then the minimum buffer, the function will return <code>[false]</code> (as string, not bool).</p>\n"}], "owner": {"reputation": 946, "user_id": 2769366, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8YFWC.jpg?s=128&g=1", "display_name": "Jaruba", "link": "https://stackoverflow.com/users/2769366/jaruba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2157, "favorite_count": 0, "accepted_answer_id": 28206094, "answer_count": 2, "score": 1, "last_activity_date": 1422498823, "creation_date": 1422464008, "last_edit_date": 1495542260, "question_id": 28197891, "link": "https://stackoverflow.com/questions/28197891/win32-readfile-output-without-waiting-for-buffer", "title": "Win32 ReadFile Output without waiting for buffer", "body": "<p>I run a command to cmd.exe with <code>CreateProcess()</code>. The command itself has an endless output, so I use a function that I modified from <a href=\"https://stackoverflow.com/questions/14147138/capture-output-of-spawned-process-to-string#14149200\">this answer</a> to get partial outputs into a string.</p>\n\n<pre><code>#define BUFSIZE 4096\nHANDLE g_hChildStd_OUT_Rd = NULL;\n\nstd::string ReadFromPipe(PROCESS_INFORMATION piProcInfo) {\n    DWORD dwRead; \n    CHAR chBuf[BUFSIZE];\n    ReadFile( g_hChildStd_OUT_Rd, chBuf, BUFSIZE, &amp;dwRead, NULL);\n    std::string s(chBuf, dwRead);\n    return s;\n}\n</code></pre>\n\n<p>But this code creates some problems.</p>\n\n<p>Firstly, every time I call it, it may freeze the program while it waits for the output to buffer to 4096 bytes.</p>\n\n<p>Secondly, it will always only get the next 4096 bytes in the output queue. (even if the current output is a lot larger)</p>\n\n<p>What I would like would be to call the function and get all the data that was outputed in the meanwhile and also be able to set a minimum number of bytes to get (instead of the buffer). If the minimum number of bytes is not available yet, I would prefer it skips <code>ReadFile()</code> entirely and just return <code>false</code>. (instead of freezing the application)</p>\n\n<p>Would this be possible?</p>\n"}, {"tags": ["c++", "eclipse", "beagleboneblack", "toolchain"], "comments": [{"owner": {"reputation": 537, "user_id": 2025015, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6a02fc0716593735b5782f89f9e62cec?s=128&d=identicon&r=PG", "display_name": "Parduz", "link": "https://stackoverflow.com/users/2025015/parduz"}, "edited": false, "score": 0, "creation_date": 1422464101, "post_id": 28197830, "comment_id": 44762264, "body": "Also: is <a href=\"http://gnuarmeclipse.livius.net/blog/\" rel=\"nofollow noreferrer\">this Eclipse plugin</a> useful for me?"}, {"owner": {"reputation": 2259, "user_id": 1446689, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WZmEf.jpg?s=128&g=1", "display_name": "moki", "link": "https://stackoverflow.com/users/1446689/moki"}, "edited": false, "score": 1, "creation_date": 1423274677, "post_id": 28197830, "comment_id": 45095577, "body": "all you need is a cross compiler and using that you need to compile all the libraries and tools you want to use to build your application and then you must integrate them with your favorite IDE (if you want to use one) and use that to produce the binary image and upload it to your board. This is a very broad topic and there&#39;s no single ultimate way to do it. It largely depends on the specific use case (that&#39;s why it&#39;s called embedded after all.). BeagleBone Black is a very nicely documented project. Why don&#39;t you follow their help or ask them directly? they have a very active forum."}, {"owner": {"reputation": 537, "user_id": 2025015, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6a02fc0716593735b5782f89f9e62cec?s=128&d=identicon&r=PG", "display_name": "Parduz", "link": "https://stackoverflow.com/users/2025015/parduz"}, "reply_to_user": {"reputation": 2259, "user_id": 1446689, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WZmEf.jpg?s=128&g=1", "display_name": "moki", "link": "https://stackoverflow.com/users/1446689/moki"}, "edited": false, "score": 0, "creation_date": 1423316548, "post_id": 28197830, "comment_id": 45103976, "body": "&#39;cause any guide/tutorial i followed failed. Some are outdated, some just does&#39;nt work. I donwloaded the linaro toolchain binaries, but gcc crashes when invoked by configure. I don&#39;t know if it crashes &#39;cause i pass wrong parameters or &#39;cause it is just bugged. I&#39;m stuck in the &quot;build wxwidgets&quot; step and i don&#39;t know what&#39;s wrong."}, {"owner": {"reputation": 537, "user_id": 2025015, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6a02fc0716593735b5782f89f9e62cec?s=128&d=identicon&r=PG", "display_name": "Parduz", "link": "https://stackoverflow.com/users/2025015/parduz"}, "reply_to_user": {"reputation": 2259, "user_id": 1446689, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WZmEf.jpg?s=128&g=1", "display_name": "moki", "link": "https://stackoverflow.com/users/1446689/moki"}, "edited": false, "score": 0, "creation_date": 1423316589, "post_id": 28197830, "comment_id": 45103988, "body": "I&#39;d argue also the &quot;very nicely documented&quot; part of your comment but i could have missed something so i can&#39;t be sure why i don&#39;t agree with you (even if, after about 100 bookmarks saved to try to get some clue, i&#39;m pretty sure that it is not so well documented :) ). Thanks for your comment, i&#39;d be happy if you could guide me,"}, {"owner": {"reputation": 2259, "user_id": 1446689, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WZmEf.jpg?s=128&g=1", "display_name": "moki", "link": "https://stackoverflow.com/users/1446689/moki"}, "edited": false, "score": 1, "creation_date": 1423331084, "post_id": 28197830, "comment_id": 45108327, "body": "Well, since you say &quot;You&quot; have &quot;failed&quot; or &quot;stuck&quot; in build <code>wxwidgets</code> part of the hundred plus pages you have read, I suggest you post that error message and the article you followed as a link so we can see what we can do about it. This is why stackoverflow is build for. I&#39;ve been using BeagleBone and BeagleBoard for a long time without any trouble and I have created working environments for both Windows and Linux. Also those documentations are written for professionals so most beginners will find it difficult to follow or simply won&#39;t be able to debug / rectify if anything goes wrong."}, {"owner": {"reputation": 2259, "user_id": 1446689, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WZmEf.jpg?s=128&g=1", "display_name": "moki", "link": "https://stackoverflow.com/users/1446689/moki"}, "edited": false, "score": 0, "creation_date": 1423331335, "post_id": 28197830, "comment_id": 45108419, "body": "Also there&#39;s a flag for questions that are too broad and if you do not include the results of your research or efforts it will be in concluded as belonging to such categories."}], "answers": [{"tags": [], "owner": {"reputation": 2785, "user_id": 2267114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/02QNl.png?s=128&g=1", "display_name": "Dmitry Sokolov", "link": "https://stackoverflow.com/users/2267114/dmitry-sokolov"}, "is_accepted": false, "score": 4, "last_activity_date": 1423732571, "last_edit_date": 1495540033, "creation_date": 1423732571, "answer_id": 28473514, "question_id": 28197830, "link": "https://stackoverflow.com/questions/28197830/how-to-make-a-cross-toolchain-to-compile-from-win7eclipsemingwwxwidgets-to-be/28473514#28473514", "title": "How to make a Cross-toolchain to compile from Win7+Eclipse+MinGW+wxWidgets to Beaglebone Black with Debian?", "body": "<ol>\n<li>You need a compiler that runs on Windows and produces binaries for the target platform (Debian arm).</li>\n<li>You need a SDK (headers, libs) for the target platform.</li>\n</ol>\n\n<p><a href=\"http://sourceforge.net/p/mingw-w64/wiki2/Cross%20Win32%20and%20Win64%20compiler/\" rel=\"nofollow noreferrer\">The MinGW-64w wiki</a> describes how to build MinGW cross-compiler and build environment.</p>\n\n<p>You can also look at <a href=\"https://stackoverflow.com/questions/4769968/c-cross-compiler-from-windows-to-linux\">SO: C++ cross-compiler from Windows to Linux</a>.</p>\n\n<p>Another technique is <a href=\"http://en.wikipedia.org/wiki/Cross_compiler#Canadian_Cross\" rel=\"nofollow noreferrer\">Canadian Cross</a>, like Google makes its Android NDK for Windows host. At first you should setup Linux build machine. Then build GCC and binutils that will run on Windows machine and will produce binaries for Debian arm. Then copy built toolchain to Windows Cygwin or MSYS environment.</p>\n"}], "owner": {"reputation": 537, "user_id": 2025015, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6a02fc0716593735b5782f89f9e62cec?s=128&d=identicon&r=PG", "display_name": "Parduz", "link": "https://stackoverflow.com/users/2025015/parduz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1602, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1423732571, "creation_date": 1422463859, "last_edit_date": 1423275573, "question_id": 28197830, "link": "https://stackoverflow.com/questions/28197830/how-to-make-a-cross-toolchain-to-compile-from-win7eclipsemingwwxwidgets-to-be", "title": "How to make a Cross-toolchain to compile from Win7+Eclipse+MinGW+wxWidgets to Beaglebone Black with Debian?", "body": "<p>I've got some experience in programming for Windows environment but I need to develop a \"Kiosk\" (I've heard that this is the right name) on a BeagleBone Black. I'm totally new to Linux and also new to the tools I'm going to use. Until the last couple of months, I developed with <code>VB6</code> and <code>C++Builder</code> only.</p>\n\n<p>Right now I have <code>Eclipse</code>, <code>MinGW</code> and <code>wxWidgets</code> working on my Windowns 7 64-bits PC, and the BeagleBone Black booting a Debian 7.8 with <code>LXDE</code>.</p>\n\n<p>I need to setup a tool-chain to compile for the BeagleBone Black. I tried really hard and have read at least hundred pages, but still I've not figured it out.</p>\n\n<p>From <a href=\"http://www.gurucoding.com/en/rpi_cross_compiler/index.php\" rel=\"noreferrer\">This Site</a> I've learnt that it's possible to compile for Linux from Windows, which could be the perfect solution. If not possible, I already have a Virtual Machine running Ubuntu (but I can change it if needed) ready for <code>Eclipse</code> and other stuff installation.</p>\n\n<p>I'm still lost about what tool-chain to use/build with. <a href=\"http://gnutoolchains.com/beaglebone/\" rel=\"noreferrer\">This site</a> seems to have already built a tool-chain, but there's no indication to where to go from there. I understand that I should now compile the <code>wxWidgets</code> with this tools, but I'm unsure and also I don't want to mess-up my current working setup in Windows 'cause I missed a switch or a path.</p>\n\n<p>I see how this question was asked more than one time, but I didn't find one that is up-to-date so I'm asking it again.</p>\n\n<p>How to make a tool-chain to compile a GUI application, from Windows using <code>Eclipse</code>, <code>MinGW</code> and <code>wxWidget</code> for a BeagleBone Black running Debian and <code>LXDE</code>?</p>\n"}, {"tags": ["c++", "arduino"], "answers": [{"tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": true, "score": 3, "last_activity_date": 1422463922, "creation_date": 1422463922, "answer_id": 28197858, "question_id": 28197733, "link": "https://stackoverflow.com/questions/28197733/c-trouble-with-operators/28197858#28197858", "title": "C++ Trouble with operators ()", "body": "<p>You've got an <code>else</code> with no attached <code>if</code>.</p>\n\n<p>Presumably, the <code>println</code> are supposed to be inside the following block, rather than being the entire body of the <code>if</code> statement:</p>\n\n<pre><code>if(ID.indexOf(msg)&gt;=0)\n{\n  Serial.println(\"Access granted.\");  // &lt;&lt;&lt; inside if body\n  digitalWrite(10, HIGH);\n  delay(2000);\n  digitalWrite(10, LOW);\n}\nelse\n{\n  Serial.println(\"Access denied.\");   // &lt;&lt;&lt; inside else body\n  digitalWrite(9, HIGH);\n  delay(2000);\n  digitalWrite(9, LOW);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4503966, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004594058907/picture?type=large", "display_name": "Tim Fosteman", "link": "https://stackoverflow.com/users/4503966/tim-fosteman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1422466576, "accepted_answer_id": 28197858, "answer_count": 1, "score": -8, "last_activity_date": 1422463922, "creation_date": 1422463534, "last_edit_date": 1422463872, "question_id": 28197733, "link": "https://stackoverflow.com/questions/28197733/c-trouble-with-operators", "closed_reason": "Not suitable for this site", "title": "C++ Trouble with operators ()", "body": "<p>Theres problem with Arduino scetch\nIts part of code:</p>\n\n<pre><code>![void verifica(){\n    msg=msg.substring(1,13);\n    if(ID.indexOf(msg)&gt;=0) Serial.println(\"Access granted.\");\n    {\n      digitalWrite(10, HIGH);\n      delay(2000);\n      digitalWrite(10, LOW);\n    }\n    else Serial.println(\"Access denied.\");\n    {\n      digitalWrite(9, HIGH);\n      delay(2000);\n      digitalWrite(9, LOW);\n    }\n}\n</code></pre>\n\n<p>So i got trouble with compiling, theres looks like no fail. Im sorry, and yeah, im n00b =(\n<a href=\"http://s019.radikal.ru/i608/1501/5e/db7c7db4380b.png\" rel=\"nofollow\">http://s019.radikal.ru/i608/1501/5e/db7c7db4380b.png</a></p>\n"}, {"tags": ["c++", "dll", "window", "draw", "inject"], "comments": [{"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1422466450, "post_id": 28197709, "comment_id": 44763739, "body": "It is a DLL so WinAPI should do just fine. Put the message loop in an <code>std::thread</code> so you won&#39;t stall the DLL.."}, {"owner": {"reputation": 92, "user_id": 3711332, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e23bcb9d2d6b4281b4a61f122a820b51?s=128&d=identicon&r=PG&f=1", "display_name": "TomCrow", "link": "https://stackoverflow.com/users/3711332/tomcrow"}, "reply_to_user": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1422469905, "post_id": 28197709, "comment_id": 44765804, "body": "I just found SFML and SFGUI would be great, but is it possible to make it work from injected dll? When i tried and compiled, it shows error about missing sfml graphicsc dll even if i copied the dll to my dll, to target exe and to injector.. nothing worked :/"}], "owner": {"reputation": 92, "user_id": 3711332, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e23bcb9d2d6b4281b4a61f122a820b51?s=128&d=identicon&r=PG&f=1", "display_name": "TomCrow", "link": "https://stackoverflow.com/users/3711332/tomcrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422464416, "creation_date": 1422463467, "last_edit_date": 1422464416, "question_id": 28197709, "link": "https://stackoverflow.com/questions/28197709/open-window-and-draw-with-injected-dll", "title": "Open window and draw with injected dll", "body": "<p>Iam using C++. I have injected dll with many features. But I would want to be able to open a new window and draw to it. What would you suggest to me, what should I learn to create window and draw primitives/images/text to it? I need something easy that isnt very complicated to do in dll. Also later I want use some gui kit to make gui to control my dll functions. Thanks for answers. Sorry for my english, still learning.</p>\n"}, {"tags": ["c++", "templates", "multiple-inheritance"], "comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1422463600, "post_id": 28197620, "comment_id": 44761929, "body": "The second approach might work if you actually derive from <code>T2</code>.  (<code>template &lt;typename T1, typename T2&gt; class MyArray : public T2</code>)  But instead you would want <code>T2::n = n_init;</code>.  (The address-of operator doesn&#39;t do anything for you here.)  <a href=\"http://ideone.com/IKA0JQ\" rel=\"nofollow noreferrer\">Here is a demo of this approach</a>."}, {"owner": {"reputation": 1215, "user_id": 371248, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b75b8b334ba914479d92fb2179a7a0f3?s=128&d=identicon&r=PG", "display_name": "Eos Pengwern", "link": "https://stackoverflow.com/users/371248/eos-pengwern"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1422463890, "post_id": 28197620, "comment_id": 44762110, "body": "@cdhowie Wow! That does, in fact, work. Would you like to make that an answer so I can accept it"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1422464089, "post_id": 28197620, "comment_id": 44762256, "body": "This looks very much like <a href=\"http://stackoverflow.com/questions/28157895/assigning-a-template-generated-class-to-a-c-struct-with-the-same-layout\" title=\"assigning a template generated class to a c struct with the same layout\">stackoverflow.com/questions/28157895/&hellip;</a> that you asked a couple days ago and already has an accepted answer."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1422464402, "post_id": 28197620, "comment_id": 44762475, "body": "Why do you want to keep separate copies of the size and begin of a <code>vector&lt;&gt;</code>? You can always just obtain them from the <code>vector&lt;&gt;</code> itself. Moreover, the size of a <code>vector&lt;&gt;</code> may not fit into an <code>int</code>."}, {"owner": {"reputation": 1215, "user_id": 371248, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b75b8b334ba914479d92fb2179a7a0f3?s=128&d=identicon&r=PG", "display_name": "Eos Pengwern", "link": "https://stackoverflow.com/users/371248/eos-pengwern"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1422464521, "post_id": 28197620, "comment_id": 44762552, "body": "@Mark B You&#39;re right to spot the similarity, and it is indeed the same underlying problem, but this is a different aspect of it. The question a couple of days ago was to do with assigning existing C++ classes to new C structs; today&#39;s is to do with setting up new C++ classes from existing C structs. I think I&#39;m done now!"}, {"owner": {"reputation": 1215, "user_id": 371248, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b75b8b334ba914479d92fb2179a7a0f3?s=128&d=identicon&r=PG", "display_name": "Eos Pengwern", "link": "https://stackoverflow.com/users/371248/eos-pengwern"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1422464599, "post_id": 28197620, "comment_id": 44762603, "body": "@Walter You&#39;re right, it should be a size_t not an int"}], "answers": [{"tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": true, "score": 1, "last_activity_date": 1422464107, "creation_date": 1422464107, "answer_id": 28197937, "question_id": 28197620, "link": "https://stackoverflow.com/questions/28197620/having-a-template-refer-to-a-member-from-a-jointly-inherited-class/28197937#28197937", "title": "Having a template refer to a member from a jointly-inherited class", "body": "<p>In order for this to work, the template class must derive from the type containing <code>n</code> and then you can access it as <code>T::n</code> where <code>T</code> is the template parameter.</p>\n\n<p>(You can't access the inherited member using just <code>n</code> because that's not a <em>dependent name</em> and so the compiler will try to resolve it when the template itself is compiled, not later when it is instantiated, and no <code>n</code> exists within <code>MyArray</code> or at the global scope.  Using <code>T::n</code> causes it to be a dependent name -- depending on <code>T</code> -- and so resolution of the name is deferred until the template is instantiated.)</p>\n\n<pre><code>typedef struct {\n    float *p;\n    int n;\n} float_array_C;\n\ntemplate &lt;typename T&gt;\nclass MyArray : public T\n{\npublic:\n    MyArray(int n_init) {\n        T::n = n_init;\n    }\n};\n</code></pre>\n\n<p>Note that you will run into problems with code like this:</p>\n\n<pre><code>class Foo : public float_array_C, public MyArray&lt;float_array_C&gt; { /* ... */ };\n</code></pre>\n\n<p>In this case both <code>Foo</code> and <code>MyArray&lt;float_array_C&gt;</code> contain a <em>separate</em> instance of <code>float_array_C</code>.  You can use virtual inheritance for <code>float_array_C</code> if this is a problem:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass MyArray : virtual public T { /* ... */ };\n\nclass Foo :\n    virtual public float_array_C,\n    public MyArray&lt;float_array_C&gt;\n{ /* ... */ };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1422464489, "post_id": 28198048, "comment_id": 44762532, "body": "I don&#39;t think this will compile. Did you try? You must at least <code>T::n=n_init</code>."}, {"owner": {"reputation": 1215, "user_id": 371248, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b75b8b334ba914479d92fb2179a7a0f3?s=128&d=identicon&r=PG", "display_name": "Eos Pengwern", "link": "https://stackoverflow.com/users/371248/eos-pengwern"}, "edited": false, "score": 1, "creation_date": 1422464689, "post_id": 28198048, "comment_id": 44762659, "body": "I can confirm that it compiles!"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1422464853, "post_id": 28198048, "comment_id": 44762764, "body": "<a href=\"http://coliru.stacked-crooked.com/a/d39ed1c3aa4b5d9b\" rel=\"nofollow noreferrer\">g++ and clang both reject this code</a>. <code>n</code> and <code>p</code> need to be dependent names, which means they must depend on <code>T</code>. <b>A compiler that accepts this code is a broken compiler.</b>"}, {"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1422464917, "post_id": 28198048, "comment_id": 44762812, "body": "@cdhowie yes, I just tested it in ideone too. It compiles in VS2013 though."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1422464944, "post_id": 28198048, "comment_id": 44762829, "body": "@Axalo The Microsoft Visual C++ compiler is pretty much the canonical definition of &quot;broken compiler.&quot;"}], "tags": [], "owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "is_accepted": false, "score": 1, "last_activity_date": 1422464942, "last_edit_date": 1422464942, "creation_date": 1422464394, "answer_id": 28198048, "question_id": 28197620, "link": "https://stackoverflow.com/questions/28197620/having-a-template-refer-to-a-member-from-a-jointly-inherited-class/28198048#28198048", "title": "Having a template refer to a member from a jointly-inherited class", "body": "<p>Another approach which only needs one template argument:</p>\n\n<pre><code>typedef struct {\n    float *p;\n    int n;\n} float_array_C;\n\ntemplate&lt;typename T&gt; class MyArray : public T\n{\npublic:\n    MyArray(int n_init)\n    {\n        T::n = n_init;   \n        contents.resize(T::n);\n        T::p = contents.data();\n    }       \nprivate:\n    std::vector&lt;std::remove_pointer_t&lt;decltype(T::p)&gt;&gt; contents;\n};\n\ntypedef MyArray&lt;float_array_C&gt; floatArray;\n</code></pre>\n"}], "owner": {"reputation": 1215, "user_id": 371248, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b75b8b334ba914479d92fb2179a7a0f3?s=128&d=identicon&r=PG", "display_name": "Eos Pengwern", "link": "https://stackoverflow.com/users/371248/eos-pengwern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 28197937, "answer_count": 2, "score": 1, "last_activity_date": 1422464942, "creation_date": 1422463207, "last_edit_date": 1422464138, "question_id": 28197620, "link": "https://stackoverflow.com/questions/28197620/having-a-template-refer-to-a-member-from-a-jointly-inherited-class", "title": "Having a template refer to a member from a jointly-inherited class", "body": "<p>It's obvious that the following code won't compile, because it gives an \"undeclared identifier\" error at the line 'n = n_init'. Nevertheless, to a human reader the intent is probably clear enough: I want to declare a template for a class which will never be instantiated by itself, but only by multiple inheritance alongside another class which is guaranteed to contain at minimum a member 'n' of type int and a member 'p' of type T*, but which (being a C struct obtained from elsewhere) I'm not at liberty to derive from another template containing these fields:</p>\n\n<pre><code>// In a C header file from elsewhere:\n// ----------------------------------\ntypedef struct {\n    float *p;\n    int n;\n} float_array_C;\n\n// In my C++ header file:\n// ----------------------\n\ntemplate&lt;typename T&gt; class MyArray\n{\npublic:\n    MyArray(int n_init)\n    {\n        n = n_init;   \n        contents.resize(n);\n        p = contents.data();\n    }\n\n    virtual void mustExist() = 0;\n\nprivate:\n    std::vector&lt;T&gt; contents; \n};\n\n\nclass float_array : public float_array_C, public MyArray&lt;float&gt;\n{\npublic:\n    float_array(int n) : float_array_C(), MyArray(n)\n    {}\n\n    virtual void mustExist() {}\n};\n\n...\n\nfloat_array testArray(10);\n</code></pre>\n\n<p>I've also tried this approach, with equally little success:</p>\n\n<pre><code>typedef struct {\n    float *p;\n    int n;\n} float_array_C;\n\ntemplate&lt;typename T1, typename T2&gt; class MyArray\n{\npublic:\n    MyArray(int n_init)\n    {\n        &amp;T2::n = n_init;   \n        contents.resize(n);\n        &amp;T2::p = contents.data();\n    }\n\nprivate:\n    std::vector&lt;T1&gt; contents; \n};\n\n\ntypedef MyArray&lt;float, float_array_C&gt; floatArray;\n\n\n...\n\nfloat_array testArray(10);\n</code></pre>\n\n<p>Can this, or anything remotely similar to it, in fact be done? </p>\n"}, {"tags": ["c++", "c", "malloc", "realloc"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1422462990, "post_id": 28197461, "comment_id": 44761498, "body": "It has a bug because?"}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1422463062, "post_id": 28197461, "comment_id": 44761548, "body": "It seems it&#39;s <i>someone else</i> how likes to know that."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422464065, "post_id": 28197461, "comment_id": 44762235, "body": "@iharob It does have a bug.  See my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1422464024, "post_id": 28197840, "comment_id": 44762207, "body": "I would consider passing a size of 0 to <code>realloc</code> to be a bug to begin with. Different implementations vary, often in non-conforming ways, with regard to how they handle this case. <code>realloc</code> to size 0 is <b>not</b> specified to be the same as <code>free</code> except on implementations where <code>malloc(0)</code> returns a null pointer, but some implementations wrongly make it the same, and there&#39;s no clean way to handle the difference (to determine whether it&#39;s an error or an expected behavior). Just avoid doing this."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1422464159, "post_id": 28197840, "comment_id": 44762307, "body": "See definition of <a href=\"http://www.cplusplus.com/reference/cstdlib/realloc/\" rel=\"nofollow noreferrer\">realloc</a>."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1422464412, "post_id": 28197840, "comment_id": 44762484, "body": "@R.. Thanks for pointing that out.  I&#39;ve added a note regarding the different standards."}], "tags": [], "owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "is_accepted": true, "score": 2, "last_activity_date": 1422464361, "last_edit_date": 1422464361, "creation_date": 1422463878, "answer_id": 28197840, "question_id": 28197461, "link": "https://stackoverflow.com/questions/28197461/whats-the-bug-with-a-possible-wrapper-function-of-realloc-c-function/28197840#28197840", "title": "What&#39;s the bug with a possible wrapper function of realloc C function?", "body": "<p>A null-pointer return value from <code>realloc</code> may indicate either:</p>\n\n<ol>\n<li>That the function did not allocate storage.</li>\n<li>That the size parameter was zero and the memory was deallocated.</li>\n</ol>\n\n<p>Your code covers the first possibility, but not the second.  A null return value can be valid, indicating that deallocation of a memory block completed succesfully.  Signalling an error under these conditions is a bug.</p>\n\n<p><strong>Note this applies for C90 C++98</strong></p>\n\n<p>As noted in the comments, passing a size parameter of 0 is implementation specific in C99/C11 C++11.</p>\n"}, {"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 1, "last_activity_date": 1422463897, "creation_date": 1422463897, "answer_id": 28197853, "question_id": 28197461, "link": "https://stackoverflow.com/questions/28197461/whats-the-bug-with-a-possible-wrapper-function-of-realloc-c-function/28197853#28197853", "title": "What&#39;s the bug with a possible wrapper function of realloc C function?", "body": "<p>There is at least one bug; this line:</p>\n\n<pre><code>    if (new_ptr != *ptr)\n</code></pre>\n\n<p>invokes undefined behavior. Any use of the old pointer, especially comparison with the new one, after <code>realloc</code> succeeds, is forbidden. You need to make the assignment unconditionally.</p>\n\n<p>Further, while this is not an internal bug, the external API is misdesigned and error-prone. Often the type of the caller's pointer will not be <code>void *</code> but some other pointer type like <code>char *</code> or <code>struct foo *</code>, and you'll have users doing:</p>\n\n<pre><code>reallocX((void **)&amp;myptr, size);\n</code></pre>\n\n<p>This causes your function to invoke undefined behavior via aliasing violations (at the very least; possibly also out-of-bound writes if different pointer types vary in size/representation) because it's accessing a <code>void *</code> object at an address that does not point to a <code>void *</code> object but to some other type of pointer object.</p>\n\n<p>These kinds of wrappers are simply harmful and need to be rejected. There's no way to do them right/safely.</p>\n"}], "owner": {"reputation": 63, "user_id": 4433636, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/45ac43a5940e6a876a5ddf1842943cd7?s=128&d=identicon&r=PG&f=1", "display_name": "dsfbi_13052013", "link": "https://stackoverflow.com/users/4433636/dsfbi-13052013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 28197840, "answer_count": 2, "score": -1, "last_activity_date": 1422464361, "creation_date": 1422462742, "question_id": 28197461, "link": "https://stackoverflow.com/questions/28197461/whats-the-bug-with-a-possible-wrapper-function-of-realloc-c-function", "title": "What&#39;s the bug with a possible wrapper function of realloc C function?", "body": "<p>I like to know the possible bug in the following possible wrapper function of the realloc C function:</p>\n\n<pre><code>void reallocX(void** ptr, size_t size)\n{\n    void *new_ptr = realloc(*ptr, size);\n    if (new_ptr != NULL)\n    {\n        if (new_ptr != *ptr)\n        {\n            *ptr = new_ptr;\n        }\n    }\n    else\n    {\n        printf( \"Help! realloc returned NULL!\\n\");\n        exit( EXIT_FAILURE);\n    }\n}\n</code></pre>\n\n<p>.</p>\n\n<p>I know that it is based in the possible wrapper function of the malloc C function, that is:</p>\n\n<pre><code>void *\nmallocX (size_t nbytes)\n{\n  void *ptr;\n  ptr = malloc (nbytes);\n  if (ptr == NULL) {\n    printf( \"Help! malloc returned NULL!\\n\");\n    exit (EXIT_FAILURE);\n  }\n  return ptr;\n}\n</code></pre>\n\n<p>. This malloc C function wrapper function is based on the \"mallocc\" C function of <a href=\"http://www.ime.usp.br/~pf/algoritmos/aulas/aloca.html\" rel=\"nofollow\">this webpage</a>. </p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c++", "visual-studio-2010", "visual-c++", "curl", "libcurl"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1422464835, "post_id": 28197435, "comment_id": 44762748, "body": "Duplicate of: <a href=\"http://stackoverflow.com/questions/10060093/special-characters-like-and-in-curl-post-data\" title=\"special characters like and in curl post data\">stackoverflow.com/questions/10060093/&hellip;</a>"}, {"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1422465362, "post_id": 28197435, "comment_id": 44763116, "body": "Not a duplicate because this question is about the API and the other is not.  The answer would be <a href=\"http://curl.haxx.se/libcurl/c/curl_easy_escape.html\" rel=\"nofollow noreferrer\">curl_easy_escape</a> here, whereas it is <code>--data-urlencode</code> for that proposed duplicate."}, {"owner": {"reputation": 1, "user_id": 4503866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d76e39f51d68f668a7c10c27958ef558?s=128&d=identicon&r=PG&f=1", "display_name": "joe massoud", "link": "https://stackoverflow.com/users/4503866/joe-massoud"}, "edited": false, "score": 0, "creation_date": 1422518951, "post_id": 28197435, "comment_id": 44784102, "body": "I&#39;ll give it a try and get back to u thanks"}], "owner": {"reputation": 1, "user_id": 4503866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d76e39f51d68f668a7c10c27958ef558?s=128&d=identicon&r=PG&f=1", "display_name": "joe massoud", "link": "https://stackoverflow.com/users/4503866/joe-massoud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 406, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422546025, "creation_date": 1422462663, "last_edit_date": 1422546025, "question_id": 28197435, "link": "https://stackoverflow.com/questions/28197435/curl-authentication-contains-and", "title": "Curl authentication contains &quot;@&quot; &quot;.&quot; and &quot;:&quot;", "body": "<p>the input id name is     : <code>form1:username</code><br>\nthe input id password is : <code>form1:password</code></p>\n\n<p>the actual username  for example is : <code>L6644280@wise.net.lb</code><br>\nthe actual password  for example is : <code>SDFKSJDFJF</code></p>\n\n<p>So i used this code :</p>\n\n<pre><code>curl_easy_setopt(curl, CURLOPT_POSTFIELDS, \"form1:username=L6644280@wise.net.lb&amp;form1:password=SDFKSJDFJF\");\n</code></pre>\n\n<p>After running code it returns source code of login page which means it didnt login.</p>\n\n<p>I guess because of the special characters.</p>\n\n<p>I'm new to curl any idea ?</p>\n\n<p><strong>Updated :</strong></p>\n\n<p>@indiv</p>\n\n<p>I added this but didnt work , i dont know if im doing something wrong:</p>\n\n<pre><code>char *login= curl_easy_escape(curl, \"form1:username=L6644280@wise.net.lb&amp;form1:password=SDFKSJDFJF\", 61);\n\ncurl_easy_setopt(curl, CURLOPT_POSTFIELDS, login);\n</code></pre>\n\n<p><strong>Updated :</strong>\nHere is the website im trying to fetch from and this is the full code :</p>\n\n<pre><code>int main()\n{\nCURL *curl;\nCURLcode res; \nstd::string readBuffer;\ncurl = curl_easy_init(); \nchar *login= curl_easy_escape(curl, \"form1:username=L6644280@wise.net.lb&amp;form1:password=SDFKSJDFJF\", 61);\nif(curl) { \ncurl_easy_setopt(curl, CURLOPT_VERBOSE, true); \n    curl_easy_setopt(curl, CURLOPT_USERAGENT, \"Chrome/39.0.2171.99\");\n    curl_easy_setopt(curl, CURLOPT_URL,    \"https://services.wise.net.lb/account_mgmt/usage/index.jsf\");\n    curl_easy_setopt(curl, CURLOPT_USERPWD, login);\n    curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, 0L);\n    curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 0L);\n    curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1); \n    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteCallback);\n    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;readBuffer);\n\nres = curl_easy_perform(curl);\ncurl_easy_cleanup(curl);\nstd::cout &lt;&lt; readBuffer &lt;&lt; std::endl;\n} \n\nreturn EXIT_SUCCESS; \n}\n</code></pre>\n\n<p>This still returns the source code of the login page which means it didnt login :/</p>\n"}, {"tags": ["c++", "serialization", "boost", "mfc", "linker"], "comments": [{"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 0, "creation_date": 1422466522, "post_id": 28197408, "comment_id": 44763781, "body": "So, if you link it as 64 bit it works, but if you link the same library to a 32 bit project it doesn&#39;t...?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1422574118, "post_id": 28197408, "comment_id": 44816420, "body": "Sounds like you&#39;re using the wrong calling convention. Since x64 only has one, it will compile fine even if the calling convention isn&#39;t specified. For x86 you have to be explicit. Windows predominantly uses <code>__stdcall</code>, not <code>__cdecl</code>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4503773, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oUpL5aWJcGs/AAAAAAAAAAI/AAAAAAAAAEo/dtlF8ZVUKTQ/photo.jpg?sz=128", "display_name": "Vincent8Hz", "link": "https://stackoverflow.com/users/4503773/vincent8hz"}, "edited": false, "score": 0, "creation_date": 1424833969, "post_id": 28585550, "comment_id": 45709733, "body": "I rewrote the codes a few weeks ago to use MFC serialization to serialize vectors in my program and it now looks fine. Still, thank you."}], "tags": [], "owner": {"reputation": 607, "user_id": 483756, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7b0233f71d74f7d0314de24aa65b7b5c?s=128&d=identicon&r=PG", "display_name": "LRaiz", "link": "https://stackoverflow.com/users/483756/lraiz"}, "is_accepted": false, "score": 4, "last_activity_date": 1424268248, "last_edit_date": 1495541617, "creation_date": 1424268248, "answer_id": 28585550, "question_id": 28197408, "link": "https://stackoverflow.com/questions/28197408/linker-errors-with-boostarchive-and-serialization/28585550#28585550", "title": "linker errors with boost::archive and serialization", "body": "<p>I run into similar problem linking on 64 bit computer. Based on <a href=\"https://stackoverflow.com/questions/2629421/how-to-use-boost-in-visual-studio-2010\">this answer</a>. I rebuild boost libraries and it solved the problem.\nTry</p>\n\n<pre><code> b2 --toolset=msvc-12.0 --build-type=complete architecture=x86 address-model=64 stage\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4503773, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oUpL5aWJcGs/AAAAAAAAAAI/AAAAAAAAAEo/dtlF8ZVUKTQ/photo.jpg?sz=128", "display_name": "Vincent8Hz", "link": "https://stackoverflow.com/users/4503773/vincent8hz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424268248, "creation_date": 1422462579, "last_edit_date": 1422464330, "question_id": 28197408, "link": "https://stackoverflow.com/questions/28197408/linker-errors-with-boostarchive-and-serialization", "title": "linker errors with boost::archive and serialization", "body": "<p>I am new to VC++ 12.0 with MFC and also the boost library. However, I need to use the boost library to serialize the vector storing customized data types. I read the examples of <a href=\"http://www.boost.org/doc/libs/1_45_0/libs/serialization/example/demo_gps.hpp\" rel=\"nofollow\">DEMO_GPS</a> and used similar codes in my problem. Unfortunately, I came across the following linker errors: </p>\n\n<pre><code>1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"public: __cdecl boost::archive::archive_exception::archive_exception(enum boost::archive::archive_exception::_exception_code,char const *,char const *)\" (??0archive_exception@archive@boost@@QEAA@W4_exception_code@012@PEBD1@Z) referenced in function \"protected: void __cdecl boost::archive::basic_text_oprimitive&lt;class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &gt;::save_impl&lt;double&gt;(double const &amp;,struct boost::mpl::bool_&lt;1&gt; &amp;)\" (??$save_impl@N@?$basic_text_oprimitive@V?$basic_ostream@DU?$char_traits@D@std@@@std@@@archive@boost@@IEAAXAEBNAEAU?$bool_@$00@mpl@2@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"public: virtual __cdecl boost::archive::archive_exception::~archive_exception(void)\" (??1archive_exception@archive@boost@@UEAA@XZ) referenced in function \"public: void __cdecl boost::archive::archive_exception::`vbase destructor'(void)\" (??_Darchive_exception@archive@boost@@QEAAXXZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"public: virtual char const * __cdecl boost::archive::archive_exception::what(void)const \" (?what@archive_exception@archive@boost@@UEBAPEBDXZ) referenced in function \"[thunk]:public: virtual char const * __cdecl boost::archive::archive_exception::what`vtordisp{4294967292,0}' (void)const \" (?what@archive_exception@archive@boost@@$4PPPPPPPM@A@EBAPEBDXZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::serialization::extended_type_info::key_unregister(void)const \" (?key_unregister@extended_type_info@serialization@boost@@IEBAXXZ) referenced in function \"public: __cdecl boost::serialization::extended_type_info_typeid&lt;class CDPoint&gt;::~extended_type_info_typeid&lt;class CDPoint&gt;(void)\" (??1?$extended_type_info_typeid@VCDPoint@@@serialization@boost@@QEAA@XZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::serialization::extended_type_info::key_register(void)const \" (?key_register@extended_type_info@serialization@boost@@IEBAXXZ) referenced in function \"public: __cdecl boost::serialization::extended_type_info_typeid&lt;class CDPoint&gt;::extended_type_info_typeid&lt;class CDPoint&gt;(void)\" (??0?$extended_type_info_typeid@VCDPoint@@@serialization@boost@@QEAA@XZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::extended_type_info_typeid_0(char const *)\" (??0extended_type_info_typeid_0@typeid_system@serialization@boost@@IEAA@PEBD@Z) referenced in function \"public: __cdecl boost::serialization::extended_type_info_typeid&lt;class CDPoint&gt;::extended_type_info_typeid&lt;class CDPoint&gt;(void)\" (??0?$extended_type_info_typeid@VCDPoint@@@serialization@boost@@QEAA@XZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::~extended_type_info_typeid_0(void)\" (??1extended_type_info_typeid_0@typeid_system@serialization@boost@@IEAA@XZ) referenced in function \"int `public: __cdecl boost::serialization::extended_type_info_typeid&lt;class CDPoint&gt;::extended_type_info_typeid&lt;class CDPoint&gt;(void)'::`1'::dtor$0\" (?dtor$0@?0???0?$extended_type_info_typeid@VCDPoint@@@serialization@boost@@QEAA@XZ@4HA)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::type_register(class type_info const &amp;)\" (?type_register@extended_type_info_typeid_0@typeid_system@serialization@boost@@IEAAXAEBVtype_info@@@Z) referenced in function \"public: __cdecl boost::serialization::extended_type_info_typeid&lt;class CDPoint&gt;::extended_type_info_typeid&lt;class CDPoint&gt;(void)\" (??0?$extended_type_info_typeid@VCDPoint@@@serialization@boost@@QEAA@XZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::type_unregister(void)\" (?type_unregister@extended_type_info_typeid_0@typeid_system@serialization@boost@@IEAAXXZ) referenced in function \"public: __cdecl boost::serialization::extended_type_info_typeid&lt;class CDPoint&gt;::~extended_type_info_typeid&lt;class CDPoint&gt;(void)\" (??1?$extended_type_info_typeid@VCDPoint@@@serialization@boost@@QEAA@XZ)\n1&gt;SMTDoc.obj : error LNK2001: unresolved external symbol \"public: virtual bool __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::is_less_than(class boost::serialization::extended_type_info const &amp;)const \" (?is_less_than@extended_type_info_typeid_0@typeid_system@serialization@boost@@UEBA_NAEBVextended_type_info@34@@Z)\n1&gt;SMTDoc.obj : error LNK2001: unresolved external symbol \"public: virtual bool __cdecl boost::serialization::typeid_system::extended_type_info_typeid_0::is_equal(class boost::serialization::extended_type_info const &amp;)const \" (?is_equal@extended_type_info_typeid_0@typeid_system@serialization@boost@@UEBA_NAEBVextended_type_info@34@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"public: void __cdecl boost::archive::detail::basic_oarchive::save_object(void const *,class boost::archive::detail::basic_oserializer const &amp;)\" (?save_object@basic_oarchive@detail@archive@boost@@QEAAXPEBXAEBVbasic_oserializer@234@@Z) referenced in function \"public: static void __cdecl boost::archive::detail::save_non_pointer_type&lt;class boost::archive::xml_oarchive&gt;::save_standard::invoke&lt;class CDPoint&gt;(class boost::archive::xml_oarchive &amp;,class CDPoint const &amp;)\" (??$invoke@VCDPoint@@@save_standard@?$save_non_pointer_type@Vxml_oarchive@archive@boost@@@detail@archive@boost@@SAXAEAVxml_oarchive@34@AEBVCDPoint@@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: __cdecl boost::archive::detail::basic_oserializer::basic_oserializer(class boost::serialization::extended_type_info const &amp;)\" (??0basic_oserializer@detail@archive@boost@@IEAA@AEBVextended_type_info@serialization@3@@Z) referenced in function \"public: __cdecl boost::archive::detail::oserializer&lt;class boost::archive::xml_oarchive,class CDPoint&gt;::oserializer&lt;class boost::archive::xml_oarchive,class CDPoint&gt;(void)\" (??0?$oserializer@Vxml_oarchive@archive@boost@@VCDPoint@@@detail@archive@boost@@QEAA@XZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: __cdecl boost::archive::detail::basic_oserializer::~basic_oserializer(void)\" (??1basic_oserializer@detail@archive@boost@@IEAA@XZ) referenced in function \"public: virtual __cdecl boost::archive::detail::oserializer&lt;class boost::archive::xml_oarchive,class CDPoint&gt;::~oserializer&lt;class boost::archive::xml_oarchive,class CDPoint&gt;(void)\" (??1?$oserializer@Vxml_oarchive@archive@boost@@VCDPoint@@@detail@archive@boost@@UEAA@XZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: __cdecl boost::archive::basic_text_oprimitive&lt;class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &gt;::~basic_text_oprimitive&lt;class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &gt;(void)\" (??1?$basic_text_oprimitive@V?$basic_ostream@DU?$char_traits@D@std@@@std@@@archive@boost@@IEAA@XZ) referenced in function \"protected: __cdecl boost::archive::xml_oarchive_impl&lt;class boost::archive::xml_oarchive&gt;::~xml_oarchive_impl&lt;class boost::archive::xml_oarchive&gt;(void)\" (??1?$xml_oarchive_impl@Vxml_oarchive@archive@boost@@@archive@boost@@IEAA@XZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_start(char const *)\" (?save_start@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXPEBD@Z) referenced in function \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_override&lt;double&gt;(struct boost::serialization::nvp&lt;double&gt; const &amp;,int)\" (??$save_override@N@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXAEBU?$nvp@N@serialization@2@H@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_end(char const *)\" (?save_end@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXPEBD@Z) referenced in function \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_override&lt;double&gt;(struct boost::serialization::nvp&lt;double&gt; const &amp;,int)\" (??$save_override@N@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXAEBU?$nvp@N@serialization@2@H@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::end_preamble(void)\" (?end_preamble@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXXZ) referenced in function \"public: static void __cdecl boost::archive::save_access::save_primitive&lt;class boost::archive::xml_oarchive,double&gt;(class boost::archive::xml_oarchive &amp;,double const &amp;)\" (??$save_primitive@Vxml_oarchive@archive@boost@@N@save_access@archive@boost@@SAXAEAVxml_oarchive@12@AEBN@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_override(class boost::archive::object_id_type const &amp;,int)\" (?save_override@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXAEBVobject_id_type@23@H@Z) referenced in function \"public: class boost::archive::xml_oarchive &amp; __cdecl boost::archive::detail::interface_oarchive&lt;class boost::archive::xml_oarchive&gt;::operator&lt;&lt;&lt;class boost::archive::object_id_type const &gt;(class boost::archive::object_id_type const &amp;)\" (??$?6$$CBVobject_id_type@archive@boost@@@?$interface_oarchive@Vxml_oarchive@archive@boost@@@detail@archive@boost@@QEAAAEAVxml_oarchive@23@AEBVobject_id_type@23@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_override(class boost::archive::object_reference_type const &amp;,int)\" (?save_override@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXAEBVobject_reference_type@23@H@Z) referenced in function \"public: class boost::archive::xml_oarchive &amp; __cdecl boost::archive::detail::interface_oarchive&lt;class boost::archive::xml_oarchive&gt;::operator&lt;&lt;&lt;class boost::archive::object_reference_type const &gt;(class boost::archive::object_reference_type const &amp;)\" (??$?6$$CBVobject_reference_type@archive@boost@@@?$interface_oarchive@Vxml_oarchive@archive@boost@@@detail@archive@boost@@QEAAAEAVxml_oarchive@23@AEBVobject_reference_type@23@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_override(class boost::archive::version_type const &amp;,int)\" (?save_override@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXAEBVversion_type@23@H@Z) referenced in function \"public: class boost::archive::xml_oarchive &amp; __cdecl boost::archive::detail::interface_oarchive&lt;class boost::archive::xml_oarchive&gt;::operator&lt;&lt;&lt;class boost::archive::version_type const &gt;(class boost::archive::version_type const &amp;)\" (??$?6$$CBVversion_type@archive@boost@@@?$interface_oarchive@Vxml_oarchive@archive@boost@@@detail@archive@boost@@QEAAAEAVxml_oarchive@23@AEBVversion_type@23@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_override(class boost::archive::class_id_type const &amp;,int)\" (?save_override@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXAEBVclass_id_type@23@H@Z) referenced in function \"public: class boost::archive::xml_oarchive &amp; __cdecl boost::archive::detail::interface_oarchive&lt;class boost::archive::xml_oarchive&gt;::operator&lt;&lt;&lt;class boost::archive::class_id_type const &gt;(class boost::archive::class_id_type const &amp;)\" (??$?6$$CBVclass_id_type@archive@boost@@@?$interface_oarchive@Vxml_oarchive@archive@boost@@@detail@archive@boost@@QEAAAEAVxml_oarchive@23@AEBVclass_id_type@23@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_override(class boost::archive::class_id_optional_type const &amp;,int)\" (?save_override@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXAEBVclass_id_optional_type@23@H@Z) referenced in function \"public: class boost::archive::xml_oarchive &amp; __cdecl boost::archive::detail::interface_oarchive&lt;class boost::archive::xml_oarchive&gt;::operator&lt;&lt;&lt;class boost::archive::class_id_optional_type const &gt;(class boost::archive::class_id_optional_type const &amp;)\" (??$?6$$CBVclass_id_optional_type@archive@boost@@@?$interface_oarchive@Vxml_oarchive@archive@boost@@@detail@archive@boost@@QEAAAEAVxml_oarchive@23@AEBVclass_id_optional_type@23@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_override(class boost::archive::class_id_reference_type const &amp;,int)\" (?save_override@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXAEBVclass_id_reference_type@23@H@Z) referenced in function \"public: class boost::archive::xml_oarchive &amp; __cdecl boost::archive::detail::interface_oarchive&lt;class boost::archive::xml_oarchive&gt;::operator&lt;&lt;&lt;class boost::archive::class_id_reference_type const &gt;(class boost::archive::class_id_reference_type const &amp;)\" (??$?6$$CBVclass_id_reference_type@archive@boost@@@?$interface_oarchive@Vxml_oarchive@archive@boost@@@detail@archive@boost@@QEAAAEAVxml_oarchive@23@AEBVclass_id_reference_type@23@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_override(struct boost::archive::class_name_type const &amp;,int)\" (?save_override@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXAEBUclass_name_type@23@H@Z) referenced in function \"public: class boost::archive::xml_oarchive &amp; __cdecl boost::archive::detail::interface_oarchive&lt;class boost::archive::xml_oarchive&gt;::operator&lt;&lt;&lt;struct boost::archive::class_name_type const &gt;(struct boost::archive::class_name_type const &amp;)\" (??$?6$$CBUclass_name_type@archive@boost@@@?$interface_oarchive@Vxml_oarchive@archive@boost@@@detail@archive@boost@@QEAAAEAVxml_oarchive@23@AEBUclass_name_type@23@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::save_override(struct boost::archive::tracking_type const &amp;,int)\" (?save_override@?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAAXAEBUtracking_type@23@H@Z) referenced in function \"public: class boost::archive::xml_oarchive &amp; __cdecl boost::archive::detail::interface_oarchive&lt;class boost::archive::xml_oarchive&gt;::operator&lt;&lt;&lt;struct boost::archive::tracking_type const &gt;(struct boost::archive::tracking_type const &amp;)\" (??$?6$$CBUtracking_type@archive@boost@@@?$interface_oarchive@Vxml_oarchive@archive@boost@@@detail@archive@boost@@QEAAAEAVxml_oarchive@23@AEBUtracking_type@23@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: __cdecl boost::archive::basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;::~basic_xml_oarchive&lt;class boost::archive::xml_oarchive&gt;(void)\" (??1?$basic_xml_oarchive@Vxml_oarchive@archive@boost@@@archive@boost@@IEAA@XZ) referenced in function \"protected: __cdecl boost::archive::xml_oarchive_impl&lt;class boost::archive::xml_oarchive&gt;::~xml_oarchive_impl&lt;class boost::archive::xml_oarchive&gt;(void)\" (??1?$xml_oarchive_impl@Vxml_oarchive@archive@boost@@@archive@boost@@IEAA@XZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: __cdecl boost::archive::xml_oarchive_impl&lt;class boost::archive::xml_oarchive&gt;::xml_oarchive_impl&lt;class boost::archive::xml_oarchive&gt;(class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp;,unsigned int)\" (??0?$xml_oarchive_impl@Vxml_oarchive@archive@boost@@@archive@boost@@IEAA@AEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@I@Z) referenced in function \"public: __cdecl boost::archive::xml_oarchive::xml_oarchive(class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp;,unsigned int)\" (??0xml_oarchive@archive@boost@@QEAA@AEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@I@Z)\n</code></pre>\n\n<p>Some answers say that this kind of error is due to the mismatching of the boost library and the project, 32bit Vs 64bit. However, I have also tried the DEMO_GPS codes on x64 platform while there is no linker error. </p>\n\n<p>Here are my codes of saving the document: </p>\n\n<pre><code>BOOL CSMTDoc::OnSaveDocument(LPCTSTR lpszPathName)\n{\n    // TODO: Add your specialized code here and/or call the base class\n\n    if (!CDocument::OnSaveDocument(lpszPathName))\n    return FALSE;\n\n    char* pBuffer;\n\n    USES_CONVERSION;\n    pBuffer = T2A(lpszPathName);\n\n    std::ofstream ofs(pBuffer);\n    assert(ofs.good());\n    boost::archive::xml_oarchive oa(ofs);\n    oa &lt;&lt; BOOST_SERIALIZATION_NVP(minPoint);\n\n    return CDocument::OnSaveDocument(lpszPathName);\n}\n</code></pre>\n\n<p>And also what have been included particularly for boost serialization: </p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;  \n#include &lt;cstdio&gt; \n#include &lt;boost/config.hpp&gt;\n#if defined(BOOST_NO_STDC_NAMESPACE)\nnamespace std{\n    using ::remove;\n}\n#endif\n#include &lt;boost/archive/xml_iarchive.hpp&gt;\n#include &lt;boost/archive/xml_oarchive.hpp&gt;\n</code></pre>\n\n<p>I also tried a simple version of boost serialization, which is just like the simplest one in the tutorial. However, it seems like everytime I uncomment this line: </p>\n\n<pre><code>boost::archive::text_oarchive oa(ofs);\n</code></pre>\n\n<p>in OnSaveDocument(LPCTSTR lpszPathName), there will be some linker errors: </p>\n\n<pre><code>1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"public: __cdecl boost::archive::archive_exception::archive_exception(enum boost::archive::archive_exception::_exception_code,char const *,char const *)\" (??0archive_exception@archive@boost@@QEAA@W4_exception_code@012@PEBD1@Z) referenced in function \"protected: void __cdecl boost::archive::basic_text_oprimitive&lt;class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &gt;::save_impl&lt;unsigned int&gt;(unsigned int const &amp;,struct boost::mpl::bool_&lt;0&gt; &amp;)\" (??$save_impl@I@?$basic_text_oprimitive@V?$basic_ostream@DU?$char_traits@D@std@@@std@@@archive@boost@@IEAAXAEBIAEAU?$bool_@$0A@@mpl@2@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"public: virtual __cdecl boost::archive::archive_exception::~archive_exception(void)\" (??1archive_exception@archive@boost@@UEAA@XZ) referenced in function \"public: void __cdecl boost::archive::archive_exception::`vbase destructor'(void)\" (??_Darchive_exception@archive@boost@@QEAAXXZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"public: virtual char const * __cdecl boost::archive::archive_exception::what(void)const \" (?what@archive_exception@archive@boost@@UEBAPEBDXZ) referenced in function \"[thunk]:public: virtual char const * __cdecl boost::archive::archive_exception::what`vtordisp{4294967292,0}' (void)const \" (?what@archive_exception@archive@boost@@$4PPPPPPPM@A@EBAPEBDXZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: __cdecl boost::archive::detail::basic_oarchive::~basic_oarchive(void)\" (??1basic_oarchive@detail@archive@boost@@IEAA@XZ) referenced in function \"public: __cdecl boost::archive::detail::common_oarchive&lt;class boost::archive::text_oarchive&gt;::~common_oarchive&lt;class boost::archive::text_oarchive&gt;(void)\" (??1?$common_oarchive@Vtext_oarchive@archive@boost@@@detail@archive@boost@@QEAA@XZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"public: void __cdecl boost::archive::detail::basic_oarchive::end_preamble(void)\" (?end_preamble@basic_oarchive@detail@archive@boost@@QEAAXXZ) referenced in function \"public: static void __cdecl boost::archive::save_access::save_primitive&lt;class boost::archive::text_oarchive,struct boost::archive::tracking_type&gt;(class boost::archive::text_oarchive &amp;,struct boost::archive::tracking_type const &amp;)\" (??$save_primitive@Vtext_oarchive@archive@boost@@Utracking_type@23@@save_access@archive@boost@@SAXAEAVtext_oarchive@12@AEBUtracking_type@12@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: __cdecl boost::archive::basic_text_oprimitive&lt;class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &gt;::~basic_text_oprimitive&lt;class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &gt;(void)\" (??1?$basic_text_oprimitive@V?$basic_ostream@DU?$char_traits@D@std@@@std@@@archive@boost@@IEAA@XZ) referenced in function \"protected: __cdecl boost::archive::text_oarchive_impl&lt;class boost::archive::text_oarchive&gt;::~text_oarchive_impl&lt;class boost::archive::text_oarchive&gt;(void)\" (??1?$text_oarchive_impl@Vtext_oarchive@archive@boost@@@archive@boost@@IEAA@XZ)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::basic_text_oarchive&lt;class boost::archive::text_oarchive&gt;::newtoken(void)\" (?newtoken@?$basic_text_oarchive@Vtext_oarchive@archive@boost@@@archive@boost@@IEAAXXZ) referenced in function \"protected: void __cdecl boost::archive::text_oarchive_impl&lt;class boost::archive::text_oarchive&gt;::save&lt;unsigned int&gt;(unsigned int const &amp;)\" (??$save@I@?$text_oarchive_impl@Vtext_oarchive@archive@boost@@@archive@boost@@IEAAXAEBI@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: void __cdecl boost::archive::text_oarchive_impl&lt;class boost::archive::text_oarchive&gt;::save(class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; const &amp;)\" (?save@?$text_oarchive_impl@Vtext_oarchive@archive@boost@@@archive@boost@@IEAAXAEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function \"public: static void __cdecl boost::archive::save_access::save_primitive&lt;class boost::archive::text_oarchive,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; &gt;(class boost::archive::text_oarchive &amp;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; const &amp;)\" (??$save_primitive@Vtext_oarchive@archive@boost@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@save_access@archive@boost@@SAXAEAVtext_oarchive@12@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)\n1&gt;SMTDoc.obj : error LNK2019: unresolved external symbol \"protected: __cdecl boost::archive::text_oarchive_impl&lt;class boost::archive::text_oarchive&gt;::text_oarchive_impl&lt;class boost::archive::text_oarchive&gt;(class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp;,unsigned int)\" (??0?$text_oarchive_impl@Vtext_oarchive@archive@boost@@@archive@boost@@IEAA@AEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@I@Z) referenced in function \"public: __cdecl boost::archive::text_oarchive::text_oarchive(class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp;,unsigned int)\" (??0text_oarchive@archive@boost@@QEAA@AEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@I@Z)\n</code></pre>\n"}, {"tags": ["c++", "module", "scope"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1422462633, "post_id": 28197406, "comment_id": 44761278, "body": "Put it before main or forward declare it."}], "answers": [{"tags": [], "owner": {"reputation": 4038, "user_id": 2159939, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/d4Hlu.jpg?s=128&g=1", "display_name": "Ivan Smirnov", "link": "https://stackoverflow.com/users/2159939/ivan-smirnov"}, "is_accepted": false, "score": 1, "last_activity_date": 1422470499, "last_edit_date": 1422470499, "creation_date": 1422462904, "answer_id": 28197516, "question_id": 28197406, "link": "https://stackoverflow.com/questions/28197406/how-to-create-a-module-in-the-main-class-in-c/28197516#28197516", "title": "How to create a module in the main class in c++?", "body": "<p>Forward-declare your <code>calculate</code> function like this:</p>\n\n<pre><code>int calculate(int m, int n);\n\nint main() { //beginning main\n    int n;\n    int m;\n    int result =0;\n    cout &lt;&lt; \"Dime m en (m sobre n)\" &lt;&lt; endl;\n    cin &gt;&gt; m;\n    cout &lt;&lt; \"Dime n:\" &lt;&lt; endl;\n\n    cin &gt;&gt; n;\n    result = calculate(m,n);\n    cout &lt;&lt; result &lt;&lt; endl;\n    return 0;\n} //finish main\n\nint calculate(int m, int n){ //begin calculate\n    return m+n;\n}\n</code></pre>\n\n<p>The reason you have to do this is because in C and C++, the compiler doesn't know that your function exists yet when it comes across the call to <code>calculate()</code>.\nThere are two ways to avoid errors stemming from this behavior: either you define the entire function, with its body, prior to <code>main</code> and everything will then be known to the compiler by the time it sees the <code>calculate()</code> call, or you simply declare the function using what's called a <em>prototype</em>, which declares the name, argument types, and return type of your function, and then define the function body later. The code here takes the latter approach.</p>\n"}, {"tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 1, "last_activity_date": 1422463810, "creation_date": 1422463810, "answer_id": 28197809, "question_id": 28197406, "link": "https://stackoverflow.com/questions/28197406/how-to-create-a-module-in-the-main-class-in-c/28197809#28197809", "title": "How to create a module in the main class in c++?", "body": "<p><strong>why do I get this error?</strong></p>\n\n<p>The compiler only knows about what has been declared. At the point it encounters the statement</p>\n\n<pre><code>result = calculate(m,n);\n</code></pre>\n\n<p>in your <code>int main()</code> function, it has not come across a declaration of <code>calculate</code> that fits the usage (or any in this case), hence your program is faulty.</p>\n\n<p>So, you must tell the compiler about your function <code>calculate()</code> <em>before</em> you use it. This may either by moving the definition of <code>calculate()</code> in front of that of <code>main()</code>, or by merely adding a declaration, telling the compiler that such a function exists, and providing its body later, as in</p>\n\n<pre><code>int calculate(int, int);      // make this function known to the compiler\n\nint main() {\n    /* ... */\n    result = calculate(m,n);  // okay: function is known\n    /* ... */\n}\n\nint calculate(int n, int m)   // provide full function definition\n{\n    /* ... */\n    return result;\n}\n</code></pre>\n\n<p>Here, the declaration of <code>calculate()</code> may be in another file (a header file, say <code>calculate.h</code>) and the full definition of <code>calculate()</code> in yet another file (a source file, say, <code>calculate.cc</code>). In the latter case, you must make sure that the loader finds the correct function that is called from <code>main()</code>, i.e. you must link the object files together.</p>\n"}, {"tags": [], "owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "is_accepted": false, "score": 1, "last_activity_date": 1422471727, "creation_date": 1422471727, "answer_id": 28200296, "question_id": 28197406, "link": "https://stackoverflow.com/questions/28197406/how-to-create-a-module-in-the-main-class-in-c/28200296#28200296", "title": "How to create a module in the main class in c++?", "body": "<p>The compiler can only resolves names it is familiar with at a given point. The point where it needs to resolve your call to <code>calculate()</code> is before any mention of it in the code, hence the compiler isn't familiar with it at that point.</p>\n\n<p>To solve this, you need to have <code>calculate()</code> declared before (above, in the code) the function in which you call it, which is your <code>main()</code> function.</p>\n\n<p>Accomplish this by either:</p>\n\n<ol>\n<li><p>Move the entire definition of <code>calculate()</code> so that it'll be above your <code>main()</code> -- could be in the same .cpp file or in an included header file.</p></li>\n<li><p>Alternatively, just declare <code>calculate()</code> somewhere above <code>main()</code> -- could be in the same .cpp file or in an included header file -- and leave the definition where it is now.</p></li>\n</ol>\n"}], "owner": {"reputation": 34, "user_id": 4459713, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d1ec9aadbff7d7abcd7d1099acb0df89?s=128&d=identicon&r=PG&f=1", "display_name": "flaixman", "link": "https://stackoverflow.com/users/4459713/flaixman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1422471727, "creation_date": 1422462577, "last_edit_date": 1422463208, "question_id": 28197406, "link": "https://stackoverflow.com/questions/28197406/how-to-create-a-module-in-the-main-class-in-c", "title": "How to create a module in the main class in c++?", "body": "<p>I've got a great problem, that may be a newbie one.My problem is that I get an error that the method was not created in this scope, but it really it is.</p>\n\n<pre><code>int main() { //beggining main\n  int n;\n  int m;\n  int result =0;\n  cout &lt;&lt; \"Dime m en (m sobre n)\" &lt;&lt; endl;\n  cin &gt;&gt; m;\n  cout &lt;&lt; \"Dime n:\" &lt;&lt; endl;\n  cin &gt;&gt; n; \n  result = calculate(m,n);\n  cout &lt;&lt; result &lt;&lt; endl;\n  return 0;\n} //finish main\n\nint calculate(int m, int n){ //begin calculate\n  return m+n;\n} //finish calculate\n</code></pre>\n\n<p>when I build the project, I get \u2018calculate\u2019 was not declared in this scope in the result = calculate(m,n); line ;</p>\n\n<p>It may be a silly thing, but why do I get this error? Thanks a lot</p>\n"}, {"tags": ["c++", "windows", "shell", "winapi", "contextmenu"], "comments": [{"owner": {"reputation": 549, "user_id": 1295063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qx8i.png?s=128&g=1", "display_name": "Ralara", "link": "https://stackoverflow.com/users/1295063/ralara"}, "edited": false, "score": 1, "creation_date": 1422463188, "post_id": 28197401, "comment_id": 44761630, "body": "Not sure about <code>IExecuteCommand</code> but <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb776095(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>IContextMenu</code></a> can be used. The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms647988%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">InsertMenuItem</a> function allows you to set information about the item including <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms647578%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">&#39;MFS_DISABLED&#39;</a> which disables the menu item and grays it so that it cannot be selected."}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "reply_to_user": {"reputation": 549, "user_id": 1295063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qx8i.png?s=128&g=1", "display_name": "Ralara", "link": "https://stackoverflow.com/users/1295063/ralara"}, "edited": false, "score": 0, "creation_date": 1422473205, "post_id": 28197401, "comment_id": 44767615, "body": "Yes, I know it&#39;s possible with <code>IContextMenu</code>, thanks. (In fact, before the introduction of <code>IExecuteCommand</code> in Windows 7, I wrote shell extensions using the &quot;good old&quot; <code>IContextMenu</code>). I was just curious if this would be possible also with <code>IExecuteCommand</code>, or if this new COM interface for context-menu shell extensions is such limited to not allow something as basic as this feature. (In that case, frankly speaking I would define <code>IExecuteCommand</code> mostly useless...). But I&#39;m not sure about that, so I thought of asking here. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "edited": false, "score": 0, "creation_date": 1422484367, "post_id": 28202079, "comment_id": 44773413, "body": "Thanks for your answer, that I&#39;ve upvoted. I didn&#39;t know about the COM interfaces you cited, thanks for sharing this information. But at this point I wonder if it&#39;s just simpler to follow the <i>&quot;classical&quot;</i> <code>IContextMenu</code> path... :)"}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "reply_to_user": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "edited": false, "score": 1, "creation_date": 1422485404, "post_id": 28202079, "comment_id": 44773791, "body": "Depends on which versions of Windows you need to support I guess, if it is Win7+ then these are less work and more to the point."}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "edited": false, "score": 1, "creation_date": 1423263225, "post_id": 28202079, "comment_id": 45092552, "body": "<b><code>CommandStateHandler</code></b> is documented here in <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd758089(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Guidance for Implementing In-Process Extensions</a>: <i>&quot;<code>IExplorerCommandState</code> associated with a <b><code>CommandStateHandler</code></b> entry registered under a <b>shell</b> \\verb subkey.&quot;</i>. Thanks for pointing this interface out!"}], "tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": true, "score": 2, "last_activity_date": 1422477936, "creation_date": 1422477936, "answer_id": 28202079, "question_id": 28197401, "link": "https://stackoverflow.com/questions/28197401/how-to-gray-out-some-context-menu-options-with-an-iexecutecommand-based-shell-ex/28202079#28202079", "title": "How to gray out some context-menu options with an IExecuteCommand-based shell extension?", "body": "<p>I have never tried this but you should be able to set <code>CommandState\u00adHandler</code> (undocumented?) in your verb's key to a CLSID that implements <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd378380(v=vs.85).aspx\" rel=\"nofollow\">IExplorerCommandState</a>.</p>\n\n<p>You might also think about implementing <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb761880(v=vs.85).aspx\" rel=\"nofollow\">IExplorerCommand</a> instead of IExecuteCommand+IExplorerCommandState...</p>\n\n<p>You can also hide verbs based on a query to the property system with the <code>AppliesTo</code> value.</p>\n"}], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 1, "accepted_answer_id": 28202079, "answer_count": 1, "score": 1, "last_activity_date": 1423262838, "creation_date": 1422462562, "last_edit_date": 1423262838, "question_id": 28197401, "link": "https://stackoverflow.com/questions/28197401/how-to-gray-out-some-context-menu-options-with-an-iexecutecommand-based-shell-ex", "title": "How to gray out some context-menu options with an IExecuteCommand-based shell extension?", "body": "<p>When implementing a context-menu shell extension using the <code>IExecuteCommand</code> approach (as described in <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2010/03/12/9977246.aspx\" rel=\"nofollow\">this blog post</a>), how can a given menu option be grayed out?</p>\n\n<p>E.g. Suppose that the shell extension offers some menu options, and some of them should be grayed out basing on some state and conditions that the shell extension computes, for example: if the user right-clicks on a file and the shell extension detects that this file has some given properties, some of the shell extension context menu options should be grayed out.</p>\n\n<p>How to do that using <code>IExecuteCommand</code>?</p>\n\n<p>Or should another Windows Shell COM interface be used for that purpose?</p>\n"}, {"tags": ["c++", "c++11", "parameter-passing", "variadic-templates", "c++14"], "comments": [{"owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 0, "creation_date": 1422462805, "post_id": 28197393, "comment_id": 44761396, "body": "It throws a similar error with clang 3.5"}, {"owner": {"reputation": 131, "user_id": 3687100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f55137212134e4dc619df9eb8a70ca85?s=128&d=identicon&r=PG&f=1", "display_name": "abcthomas", "link": "https://stackoverflow.com/users/3687100/abcthomas"}, "edited": false, "score": 0, "creation_date": 1422462987, "post_id": 28197393, "comment_id": 44761497, "body": "VS2013 Give this: main.cpp(7): error C3551: expected a trailing return type"}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1422463644, "post_id": 28197503, "comment_id": 44761949, "body": "<code>return f2(std::forward&lt;decltype(args)&gt;(args)...);</code>"}, {"owner": {"reputation": 24673, "user_id": 2567683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1022957737/picture?type=large", "display_name": "Nikos Athanasiou", "link": "https://stackoverflow.com/users/2567683/nikos-athanasiou"}, "edited": false, "score": 1, "creation_date": 1422463884, "post_id": 28197503, "comment_id": 44762106, "body": ".. and now the <code>*</code> in <code>void(*)(int, char, double)</code> is suddenly written with a <a href=\"https://www.youtube.com/watch?v=qrdpliMfoAM\" rel=\"nofollow noreferrer\">26 fond</a>"}], "tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 10, "last_activity_date": 1611584233, "last_edit_date": 1611584233, "creation_date": 1422462868, "answer_id": 28197503, "question_id": 28197393, "link": "https://stackoverflow.com/questions/28197393/can-default-function-arguments-fill-in-for-expanded-parameter-packs/28197503#28197503", "title": "Can default function arguments &quot;fill in&quot; for expanded parameter packs?", "body": "<p>You aren't calling a function with default-arguments from the template.</p>\n<p>You are calling a function-pointer, which points to a function expecting exactly 3 arguments, neither more nor less.</p>\n<p>Of course the compiler complains bitterly about the missing third one.</p>\n<p>You could do what you are trying to do there with a variadic functor, <a href=\"//coliru.stacked-crooked.com/a/2236f6b722323031\" rel=\"nofollow noreferrer\">since C++14 even a lambda</a>:</p>\n<pre><code>wrap([](auto&amp;&amp;... args){return f2(std::forward&lt;decltype(args)&gt;(args)...);}, 1, 'a'); \n</code></pre>\n"}], "owner": {"reputation": 24673, "user_id": 2567683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1022957737/picture?type=large", "display_name": "Nikos Athanasiou", "link": "https://stackoverflow.com/users/2567683/nikos-athanasiou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 28197503, "answer_count": 1, "score": 11, "last_activity_date": 1611584233, "creation_date": 1422462538, "last_edit_date": 1495539812, "question_id": 28197393, "link": "https://stackoverflow.com/questions/28197393/can-default-function-arguments-fill-in-for-expanded-parameter-packs", "title": "Can default function arguments &quot;fill in&quot; for expanded parameter packs?", "body": "<p>The following code <a href=\"http://coliru.stacked-crooked.com/a/001f1a997f0b499d\" rel=\"nofollow noreferrer\">fails to compile</a> : </p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename F, typename ...Args&gt;\nstatic auto wrap(F func, Args&amp;&amp;... args)\n{\n    return func(std::forward&lt;Args&gt;(args)...);\n}\n\nvoid f1(int, char, double)\n{\n    std::cout &lt;&lt; \"do nada1\\n\"; \n}\n\nvoid f2(int, char='a', double=0.)\n{\n    std::cout &lt;&lt; \"do nada2\\n\"; \n}\n\nint main()\n{\n    wrap(f1, 1, 'a', 2.); \n    wrap(f2, 1, 'a'); \n}\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>g++ -std=c++14 -O2 -Wall -pedantic -pthread main.cpp &amp;&amp; ./a.out\n\nmain.cpp: In instantiation of 'auto wrap(F, Args&amp;&amp; ...) [with F = void(*)(int, char, double); Args = {int, char}]':\nmain.cpp:22:20:   required from here\nmain.cpp:6:44: error: too few arguments to function\n     return func(std::forward&lt;Args&gt;(args)...);\n</code></pre>\n\n<p>It seems that the rule about \"parameter packs being last\" is followed (at least in the declaration) and after the expansion a correct function call should be formed : <code>f2</code> can either be called with 1, 2 or 3 arguments so the <code>too few arguments</code> being an error seems 'harsh'. It also doesn't look like a <a href=\"https://stackoverflow.com/a/14788106/2567683\">deduction problem</a> (which would be my guess - but got shaky due to the error message)</p>\n\n<p>Is this a missing feature or there's a violation from the Standard's point of view ? </p>\n"}, {"tags": ["c++", "linux", "bash", "fpga"], "comments": [{"owner": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "edited": false, "score": 0, "creation_date": 1422471738, "post_id": 28197348, "comment_id": 44766763, "body": "If the driver is the same before and after reprogramming the FPGA, you don&#39;t have to unload the driver. You should only ensure that there are no pending transactions on the bus."}, {"owner": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "edited": false, "score": 0, "creation_date": 1422471791, "post_id": 28197348, "comment_id": 44766794, "body": "I assume you are using a PCIe core? Which one do you use?"}, {"owner": {"reputation": 11, "user_id": 4503791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3aa36df2012b18c73f7912f35ce7d2?s=128&d=identicon&r=PG&f=1", "display_name": "muscle_noob", "link": "https://stackoverflow.com/users/4503791/muscle-noob"}, "reply_to_user": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "edited": false, "score": 0, "creation_date": 1422493540, "post_id": 28197348, "comment_id": 44776418, "body": "I need to unload the driver, if not the driver would crash even I&#39;m pretty sure there is no transaction going on. No, I&#39;m working on Altera Cyclone V so the driver basically is to enable the communication between ARM and FPGA through AXI bus."}, {"owner": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "edited": false, "score": 1, "creation_date": 1422496218, "post_id": 28197348, "comment_id": 44777017, "body": "I think it&#39;s not necessary to use a bash script. You can use normal read/write operations on sysfs to modify the driver binding <code>&#47;sys&#47;bus&#47;pci&#47;drivers&#47;&lt;xxx&gt;&#47;unbind</code>. Your Linux should also handle add and remove action on a device. For example (PCIe) <code>&#47;sys&#47;bus&#47;pci&#47;devices&#47;0000:00:00.0&#47;remove</code>. Removing a device unbinds and unloads it&#39;s driver. You can try this by hand as root with tools like echo and cat."}], "owner": {"reputation": 11, "user_id": 4503791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3aa36df2012b18c73f7912f35ce7d2?s=128&d=identicon&r=PG&f=1", "display_name": "muscle_noob", "link": "https://stackoverflow.com/users/4503791/muscle-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 953, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1422463414, "creation_date": 1422462376, "last_edit_date": 1422463414, "question_id": 28197348, "link": "https://stackoverflow.com/questions/28197348/rmmod-resources-temporarily-unavailable", "title": "rmmod: Resources temporarily unavailable", "body": "<p>I have a C++ program, a Linux driver and a Bash script. The C++ program will communicate with the FPGA through the driver. To program the FPGA, I need to unload the driver, program FPGA and reload driver afterwards. And those are the tasks in the Bash script. </p>\n\n<p>Basically what I want to achieve is when the C++ program receives a particular command from the client program, it will launch the Bash script to kill the C++ program, unload driver, program FPGA, load back the driver and start again the C++ program. But when I use <code>system</code> , <code>fork</code> and <code>execl</code> to launch the script within the C++ program, the rmmod is not successful with error message \"resources temporarily unavailable\". Looks like the driver thinks the C++ program is still using it.</p>\n\n<p>But I thought when I use <code>fork</code> and <code>execl</code>, if I kill the C++ program from other process will free up the driver, no? What should I do to kill the program and unload the driver?</p>\n"}, {"tags": ["c++", "postgresql", "valgrind", "libpqxx"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422462371, "post_id": 28197270, "comment_id": 44761095, "body": "I don&#39;t know what could be wrong, but implementing your own c++ class for <code>libpq</code> interaction is very simple. And I am sure there are no memory problems with <code>libpq</code> that valgrind can report."}, {"owner": {"reputation": 3045, "user_id": 1474847, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JWwwX.png?s=128&g=1", "display_name": "Jendas", "link": "https://stackoverflow.com/users/1474847/jendas"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1423384212, "post_id": 28197270, "comment_id": 45121031, "body": "I eventually did implement quite nice libpq wrapper in C++, hoever, the problem remains the same. It turned out, that the problem is caused by libssl - the OpenSSL library, which is using uninitialized variables as entropy source. At first, it seemed weird to me, but when you think about it, it makes a little bit sense. What doesn&#39;t is the fact, that libssl authors did not bother to provide some easy switch to turn this behaviour off while debugging with valgrind."}], "owner": {"reputation": 3045, "user_id": 1474847, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JWwwX.png?s=128&g=1", "display_name": "Jendas", "link": "https://stackoverflow.com/users/1474847/jendas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422462196, "creation_date": 1422462196, "question_id": 28197270, "link": "https://stackoverflow.com/questions/28197270/pqxx-c-library-valgrind-conditional-jump-or-move-depends-on-uninitialised-val", "title": "pqxx c++ library Valgrind: Conditional jump or move depends on uninitialised value(s)", "body": "<p>I use <code>libpqxx-4.0</code> C++ library to work with remote Postgresql database in my project. Everything worked fine, but than I tried running my project with valgrind and got almost million error messages saying \n<code>Conditional jump or move depends on uninitialised value(s)</code>\nand \n<code>Use of uninitialised value of size 8</code></p>\n\n<p>It seems to be occurring somewhere directly inside the library since the valgrind trace says (for example):</p>\n\n<pre><code>==24073== Conditional jump or move depends on uninitialised value(s)\n==24073==    at 0x5C2CCEF: PQconnectPoll (in /usr/lib/libpq.so.5.6)\n==24073==    by 0x5C2DB8D: ??? (in /usr/lib/libpq.so.5.6)\n==24073==    by 0x5C2E496: PQconnectdb (in /usr/lib/libpq.so.5.6)\n==24073==    by 0x59EE190: pqxx::connectionpolicy::normalconnect(pg_conn*) (in /usr/lib/x86_64-linux-gnu/libpqxx-4.0.so)\n==24073==    by 0x59EE2A3: pqxx::connect_direct::do_startconnect(pg_conn*) (in /usr/lib/x86_64-linux-gnu/libpqxx-4.0.so)\n==24073==    by 0x59E8BA0: pqxx::connection_base::init() (in /usr/lib/x86_64-linux-gnu/libpqxx-4.0.so)\n==24073==    by 0x448453: pqxx::basic_connection&lt;pqxx::connect_direct&gt;::basic_connection(std::string const&amp;) (basic_connection.hxx:65)\n==24073==    by 0x4263BC: ServerData::load_from_db() (serverdata.cpp:43)\n==24073==    by 0x40CBD2: main (server.cpp:231)\n</code></pre>\n\n<p>On my side the code causing this error is</p>\n\n<pre><code>pqxx::connection c(get_conn_string());  // connects to the database\n</code></pre>\n\n<p>where the get_conn_string method prototype is</p>\n\n<pre><code>std::string ServerData::get_conn_string() const\n</code></pre>\n\n<p>Please do you have any idea what I might be doing wrong or is there something wrong with the library itself?</p>\n"}, {"tags": ["java", "c++", "arrays", "java-native-interface", "data-conversion"], "answers": [{"comments": [{"owner": {"reputation": 2572, "user_id": 4170242, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh4.googleusercontent.com/-pW6h6a6LPmk/AAAAAAAAAAI/AAAAAAAAAzw/PbbT--O7U4c/photo.jpg?sz=128", "display_name": "Daniel Kvist", "link": "https://stackoverflow.com/users/4170242/daniel-kvist"}, "edited": false, "score": 0, "creation_date": 1422465012, "post_id": 28197573, "comment_id": 44762866, "body": "Yes, but there is one problem though. That answer describes how to do it with <code>int</code> arrays, but what if I have an array of C++ class instances that I have created myself, and want to convert them to an array of java class instances, which I also have created myself, corresponding to the C++ class instances? EDIT: I&#39;ll clarify it in my question!"}, {"owner": {"reputation": 355, "user_id": 4502545, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Poeqem01C6A/AAAAAAAAAAI/AAAAAAAAHsM/QXFHD2I-gQc/photo.jpg?sz=128", "display_name": "Gergely", "link": "https://stackoverflow.com/users/4502545/gergely"}, "reply_to_user": {"reputation": 2572, "user_id": 4170242, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh4.googleusercontent.com/-pW6h6a6LPmk/AAAAAAAAAAI/AAAAAAAAAzw/PbbT--O7U4c/photo.jpg?sz=128", "display_name": "Daniel Kvist", "link": "https://stackoverflow.com/users/4170242/daniel-kvist"}, "edited": false, "score": 0, "creation_date": 1422465668, "post_id": 28197573, "comment_id": 44763287, "body": "I think it should be pretty much the same, except it&#39;s an Object array. It depends more on where you want to create it. In Java it&#39;s easy, you just call new and then pass down the reference to C++ via JNI.  If you want to create the Java objects in C++, that&#39;s a lot more complicated, as you&#39;ll need to do something like: get a class pointer to your object, get a method pointer to the constructor, invoke the constructor, also create an object array and populate it with your objects - point is, each and every one of these steps can only be done by calling JNI&#39;s methods."}, {"owner": {"reputation": 2572, "user_id": 4170242, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh4.googleusercontent.com/-pW6h6a6LPmk/AAAAAAAAAAI/AAAAAAAAAzw/PbbT--O7U4c/photo.jpg?sz=128", "display_name": "Daniel Kvist", "link": "https://stackoverflow.com/users/4170242/daniel-kvist"}, "edited": false, "score": 0, "creation_date": 1422468261, "post_id": 28197573, "comment_id": 44764849, "body": "What is a ctor signature?"}, {"owner": {"reputation": 355, "user_id": 4502545, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Poeqem01C6A/AAAAAAAAAAI/AAAAAAAAHsM/QXFHD2I-gQc/photo.jpg?sz=128", "display_name": "Gergely", "link": "https://stackoverflow.com/users/4502545/gergely"}, "reply_to_user": {"reputation": 2572, "user_id": 4170242, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh4.googleusercontent.com/-pW6h6a6LPmk/AAAAAAAAAAI/AAAAAAAAAzw/PbbT--O7U4c/photo.jpg?sz=128", "display_name": "Daniel Kvist", "link": "https://stackoverflow.com/users/4170242/daniel-kvist"}, "edited": false, "score": 1, "creation_date": 1422470083, "post_id": 28197573, "comment_id": 44765905, "body": "It&#39;s a string that specifies the arguments and return value of a method (or a constructor in this case - a constructor is just a special method which has the name &lt;init&gt;), in JNI this is the only way to tell the JVM which particular method you want to get a handler for. Have a look here: <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/types.html#type_signatures\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/&hellip;</a>"}, {"owner": {"reputation": 2572, "user_id": 4170242, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh4.googleusercontent.com/-pW6h6a6LPmk/AAAAAAAAAAI/AAAAAAAAAzw/PbbT--O7U4c/photo.jpg?sz=128", "display_name": "Daniel Kvist", "link": "https://stackoverflow.com/users/4170242/daniel-kvist"}, "edited": false, "score": 0, "creation_date": 1422633958, "post_id": 28197573, "comment_id": 44840724, "body": "So, lets say I have a variable, <code>v</code>, and I want to pass it to the constructor of a java class, it would go in the field saying &quot;...your ctor signature...&quot;?"}], "tags": [], "owner": {"reputation": 355, "user_id": 4502545, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Poeqem01C6A/AAAAAAAAAAI/AAAAAAAAHsM/QXFHD2I-gQc/photo.jpg?sz=128", "display_name": "Gergely", "link": "https://stackoverflow.com/users/4502545/gergely"}, "is_accepted": true, "score": 1, "last_activity_date": 1422466090, "last_edit_date": 1495539811, "creation_date": 1422463074, "answer_id": 28197573, "question_id": 28197227, "link": "https://stackoverflow.com/questions/28197227/how-to-call-a-c-method-returning-an-array-from-jni-and-convert-the-contents-of/28197573#28197573", "title": "How to call a C++ method returning an array from JNI and convert the contents of the array to an array of java classes?", "body": "<p>Isn't this what you're after? <a href=\"https://stackoverflow.com/questions/1610045/how-to-return-an-array-from-jni-to-java\">How to return an array from JNI to Java?</a></p>\n\n<p>Here are some more detailed examples: <a href=\"https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html#zz-6.2\" rel=\"nofollow noreferrer\">https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html#zz-6.2</a></p>\n\n<p>If you want to create the Java objects from JNI code, that's particularly painful. Something like this:</p>\n\n<pre><code>jclass cls = (*env)-&gt;FindClass(env, \"...your class...\");\njmethodID ctor = (*env)-&gt;GetMethodID(env, cls, \"&lt;init&gt;\", \"...your ctor signature...\");\njobject obj = (*env)-&gt;NewObject(env, cls, ctor, ...);\n</code></pre>\n\n<p>Plus you should null-check the return values of all these of course.</p>\n\n<p>After that you can create the Java array and add the item to it:</p>\n\n<pre><code>jobjectArray results = (*env)-&gt;NewObjectArray(env, 100, cls, NULL);\n(*env)-&gt;SetObjectArrayElement(env, results, 0, obj);\n</code></pre>\n"}], "owner": {"reputation": 2572, "user_id": 4170242, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh4.googleusercontent.com/-pW6h6a6LPmk/AAAAAAAAAAI/AAAAAAAAAzw/PbbT--O7U4c/photo.jpg?sz=128", "display_name": "Daniel Kvist", "link": "https://stackoverflow.com/users/4170242/daniel-kvist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1262, "favorite_count": 0, "accepted_answer_id": 28197573, "answer_count": 1, "score": 1, "last_activity_date": 1422466090, "creation_date": 1422462039, "last_edit_date": 1422465549, "question_id": 28197227, "link": "https://stackoverflow.com/questions/28197227/how-to-call-a-c-method-returning-an-array-from-jni-and-convert-the-contents-of", "title": "How to call a C++ method returning an array from JNI and convert the contents of the array to an array of java classes?", "body": "<p>I'm creating a C++ library, and I want to port it to java. I have a method which gets a <code>RAWINPUTDEVICELIST</code> by calling <code>GetRawInputDeviceList()</code>, and scrolls through the array and converts each item to an instance of a class called <code>Device</code> and adds them to an array, in C++. I want to call this method and convert the contents of the list to an array of java classes, called something like <code>Device</code>, and assign the variables that it contains to the values of the C++ class.</p>\n\n<p><strong>EDIT:</strong> Pretend that the array I want to convert contains instances of a C++ class which looks like this:</p>\n\n<pre><code>class CplusplusExampleClass {\npublic:\n    int variable;\n};\n</code></pre>\n\n<p>I want to convert all those instances of that class which is contained in the C++ array to corresponding instances of a java class. Pretend that the java class looks like this:</p>\n\n<pre><code>public class JavaExampleClass {\n    public int variable;\n}\n</code></pre>\n\n<p>This is possible to do with the method described in the answer to the question suggested by @Gergely, to just convert the integer and then create a new instance, for each class, but pretend that the classes contains lots of stuff, like objects (class instances), other variables etc.</p>\n\n<p>Is this possible, and then, how can I do it?</p>\n"}, {"tags": ["c++", "oop", "interface", "multiple-inheritance"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 3, "creation_date": 1422462216, "post_id": 28197169, "comment_id": 44760997, "body": "<a href=\"http://stackoverflow.com/questions/21558/in-c-what-is-a-virtual-base-class\" title=\"in c what is a virtual base class\">stackoverflow.com/questions/21558/&hellip;</a>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422462318, "post_id": 28197169, "comment_id": 44761064, "body": "... and <a href=\"http://ideone.com/JSsG1K\" rel=\"nofollow noreferrer\">example therein</a>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 1720347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8767bd5b599615b306d847e15920f7d1?s=128&d=identicon&r=PG", "display_name": "Valrandir", "link": "https://stackoverflow.com/users/1720347/valrandir"}, "edited": false, "score": 0, "creation_date": 1422471229, "post_id": 28197307, "comment_id": 44766489, "body": "Most Excellent\u2122 Just when I though I had a very good grasp on C++, I learn something new.  Thank you very much sir."}], "tags": [], "owner": {"reputation": 1709, "user_id": 4325016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f0a09185dea1c14428422310a022de?s=128&d=identicon&r=PG&f=1", "display_name": "George Houpis", "link": "https://stackoverflow.com/users/4325016/george-houpis"}, "is_accepted": true, "score": 2, "last_activity_date": 1422462266, "creation_date": 1422462266, "answer_id": 28197307, "question_id": 28197169, "link": "https://stackoverflow.com/questions/28197169/abstract-class-not-mapping-directly-any-elegant-solutions/28197307#28197307", "title": "Abstract class not mapping directly, any elegant solutions?", "body": "<p>This is like he classic diamond inheritance case.   Try:</p>\n\n<pre><code>class Surface\n{\n    public:\n    virtual void Draw() = 0;\n};\n\nclass Display : virtual public Surface\n{\n};\n\nclass Surface_OpenGL : virtual public Surface\n{\n    public:\n    void Draw(){}\n};\n\nclass Display_OpenGL : public Display, public Surface_OpenGL\n{\n    public:\n    //void Draw() { Surface_OpenGL::Draw(); }\n};\n\n#define WIN32_LEAN_AND_MEAN\n#include &lt;windows.h&gt;\nint WINAPI WinMain(HINSTANCE, HINSTANCE, LPSTR, int)\n{\n    //Error cannot instantiate abstract class\n    Display *display = new Display_OpenGL();\n\n    display-&gt;Draw();\n    delete display;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 1720347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8767bd5b599615b306d847e15920f7d1?s=128&d=identicon&r=PG", "display_name": "Valrandir", "link": "https://stackoverflow.com/users/1720347/valrandir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 28197307, "answer_count": 1, "score": 0, "last_activity_date": 1422462266, "creation_date": 1422461880, "question_id": 28197169, "link": "https://stackoverflow.com/questions/28197169/abstract-class-not-mapping-directly-any-elegant-solutions", "title": "Abstract class not mapping directly, any elegant solutions?", "body": "<p>The code below fails to instantiate the Display_OpenGL class, because it does not consider the Surface implementation from Surface_OpenGL to map with the Display : Surface class.</p>\n\n<p>Uncommenting this line fix the problem but then this is not elegant.\n    //void Draw() { Surface_OpenGL::Draw(); }</p>\n\n<p>Is there's a better solution for what I want to do?\nDraw is already defined in Surface_OpenGL, but it seems like it needs to be defined explicitly for Display as well, any nice solutions?</p>\n\n<p>Thank you.</p>\n\n<pre><code>class Surface\n{\n    public:\n    virtual void Draw() = 0;\n};\n\nclass Display : public Surface\n{\n};\n\nclass Surface_OpenGL : public Surface\n{\n    public:\n    void Draw(){}\n};\n\nclass Display_OpenGL : public Display, public Surface_OpenGL\n{\n    public:\n    //void Draw() { Surface_OpenGL::Draw(); }\n};\n\n#define WIN32_LEAN_AND_MEAN\n#include &lt;windows.h&gt;\nint WINAPI WinMain(HINSTANCE, HINSTANCE, LPSTR, int)\n{\n    //Error cannot instantiate abstract class\n    Display *display = new Display_OpenGL();\n\n    display-&gt;Draw();\n    delete display;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "drawing"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 2083482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d4011a89d44b63dea2b9ad652ef81?s=128&d=identicon&r=PG", "display_name": "Leopoldo Negro", "link": "https://stackoverflow.com/users/2083482/leopoldo-negro"}, "is_accepted": false, "score": 0, "last_activity_date": 1422461829, "creation_date": 1422461829, "answer_id": 28197146, "question_id": 28196983, "link": "https://stackoverflow.com/questions/28196983/is-there-a-faster-way-to-clear-the-console/28197146#28197146", "title": "Is there a faster way to clear the Console?", "body": "<p><a href=\"http://www.cplusplus.com/articles/4z18T05o/\" rel=\"nofollow\">Here</a> you can check different methods for clearing the screen, I recommend writting multiple blank lines as an easy solution and probably enough for your application.</p>\n"}], "owner": {"reputation": 119, "user_id": 3802998, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c8819cb4db3113c12e79daabb2d1fdba?s=128&d=identicon&r=PG&f=1", "display_name": "Dadex", "link": "https://stackoverflow.com/users/3802998/dadex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2814, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1422461829, "creation_date": 1422461396, "question_id": 28196983, "link": "https://stackoverflow.com/questions/28196983/is-there-a-faster-way-to-clear-the-console", "title": "Is there a faster way to clear the Console?", "body": "<p>I'm developing some simple 2D array-based games. Their main feature is a bouncing \"ball\" (simply a char ball_char='O') in a box. The structure BALL has 2 variables: X and Y which rapresent its array positions. Every clock (a Sleep(milliseconds)) a procedure changes its X and Y (for example +1), clears the console's window and then draws all the array again simulating the ball's movement.</p>\n\n<p>Here's part of the code:</p>\n\n<pre><code>#include &lt;iostream.h&gt; //cout\n#include &lt;windows.h&gt; //Sleep(ms) and clearscreen()\n\n#define H 51\n#define W 51\nchar box[H][W];\n\nstruct ball\n{\n      char ball_char;\n      int x, y, movx, movy;\n}b;\n\nvoid clearscreen() //MY TEACHER SUGGESTED ME THIS CODE TO \"CLEAR\" THE SCREEN\n{\n    HANDLE hOut;\n    COORD Position;\n\n    hOut = GetStdHandle(STD_OUTPUT_HANDLE);                          \n\n    Position.X = 0;\n    Position.Y = 0;\n    SetConsoleCursorPosition(hOut, Position);\n}\n\nvoid draw() //here comes the bad \"graphic engine\" lol\n{   \n    int i;\n    clearscreen();\n    for(i=0;i&lt;H;i++)\n    {\n        for(int j=0;j&lt;W;j++)\n            cout&lt;&lt;box[i][j];\n        cout&lt;&lt;\"|\"&lt;&lt;endl; //DRAWING EDGES &lt;---this is on the right side\n    }\n\n    for(i=0;i&lt;W;i++)\n        cout&lt;&lt;\"-\"; //this is on the bottom side\n}\n</code></pre>\n\n<p>As you can see, the larger the box, the longer it takes to draw the whole array again. As I commented, I mentioned this project to my professor which suggested me that code to clear the console. But it isn't a real cleaning but, as far I can see, it only places the cursor at the beginning.</p>\n\n<p>Main code:</p>\n\n<pre><code>main()\n{\n    b.ball_char='O';\n    b.x=10;\n    b.y=0;\n    b.movx=1;\n    b.movy=1;\n\n    do //this is what I call \"the clock\"\n    {\n        move() //my procedure to simulate the ball movements (it simply adds movements force to their coordinates with some controls etc.)\n        draw();\n        Sleep(100);\n    }while(1);\n}\n</code></pre>\n\n<p>So the question is: do you know any faster way to clean the console? I already know that system(\"cls\") is to be avoided.</p>\n"}, {"tags": ["c++", "templates", "std"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1422460779, "post_id": 28196729, "comment_id": 44760052, "body": "No, you shouldn&#39;t. You should define it in your app&#39;s namespace."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1422460960, "post_id": 28196729, "comment_id": 44760163, "body": "@RSahu: Why not? &quot;A program may add a template specialization for any standard library template to namespace <code>std</code> only if the declaration depends on a user-defined type&quot; (plus a couple of other conditions). That&#39;s the case here."}, {"owner": {"reputation": 456, "user_id": 2237976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9252282bf7929b1140c681fe7b1abeec?s=128&d=identicon&r=PG", "display_name": "moo", "link": "https://stackoverflow.com/users/2237976/moo"}, "edited": false, "score": 0, "creation_date": 1422461024, "post_id": 28196729, "comment_id": 44760199, "body": "Even if I define it in the app&#39;s namespace, how can I realize such a get method with an arbitrary return type?"}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "reply_to_user": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 4, "creation_date": 1422461170, "post_id": 28196729, "comment_id": 44760280, "body": "@MikeSeymour Function templates cannot be partially specialized though. Also, <code>std::get</code> accepts an instance of <code>tuple</code>, so the OP could not specialize it for instances of <code>Composite</code>. They would have to add an overload, which is not allowed."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1422461481, "post_id": 28196729, "comment_id": 44760473, "body": "@moo Examine how <code>std::get</code> for <code>std::tuple</code> deduces its return type."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1422461676, "post_id": 28196729, "comment_id": 44760602, "body": "@AndyProwl: Thanks, that&#39;s a good reason why not."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 1, "creation_date": 1422461762, "post_id": 28196729, "comment_id": 44760671, "body": "@moo: In C++14 or later, just use <code>auto</code> to deduce the return type. In C++11, use <code>decltype</code> or <code>tuple_element::type</code>."}, {"owner": {"reputation": 456, "user_id": 2237976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9252282bf7929b1140c681fe7b1abeec?s=128&d=identicon&r=PG", "display_name": "moo", "link": "https://stackoverflow.com/users/2237976/moo"}, "edited": false, "score": 0, "creation_date": 1422461826, "post_id": 28196729, "comment_id": 44760717, "body": "Thanks for the hints! That helped a lot."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1422462207, "post_id": 28196729, "comment_id": 44760987, "body": "@MikeSeymour and Andy Prowl, thanks for the discussion, and bringing clarity to my suggestion,  while I was I at a work meeting :)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1422464566, "post_id": 28196729, "comment_id": 44762582, "body": "@MikeSeymour s/<code>auto</code>/<code>decltype(auto)</code>/"}], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 2237976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9252282bf7929b1140c681fe7b1abeec?s=128&d=identicon&r=PG", "display_name": "moo", "link": "https://stackoverflow.com/users/2237976/moo"}, "edited": false, "score": 0, "creation_date": 1422463051, "post_id": 28197488, "comment_id": 44761538, "body": "I have found a solution on my own in the meantime. But thanks anyways."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1422464289, "last_edit_date": 1422464289, "creation_date": 1422462833, "answer_id": 28197488, "question_id": 28196729, "link": "https://stackoverflow.com/questions/28196729/stdget-for-own-class-with-tuple-as-member/28197488#28197488", "title": "std::get for own class with tuple as member", "body": "<p>You may do:</p>\n\n<pre><code>template &lt;std::size_t I, typename... Ts&gt;\nauto get(Composite&lt;Ts...&gt;&amp; composite)\n-&gt; decltype(std::get&lt;I&gt;(composite.getRefValues()))\n{\n    return std::get&lt;I&gt;(composite.getRefValues());\n}\n</code></pre>\n\n<p>Note: In C++14, you may omit the <code>-&gt; decltype(..)</code> part.</p>\n"}, {"tags": [], "owner": {"reputation": 456, "user_id": 2237976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9252282bf7929b1140c681fe7b1abeec?s=128&d=identicon&r=PG", "display_name": "moo", "link": "https://stackoverflow.com/users/2237976/moo"}, "is_accepted": false, "score": 1, "last_activity_date": 1422462983, "creation_date": 1422462983, "answer_id": 28197541, "question_id": 28196729, "link": "https://stackoverflow.com/questions/28196729/stdget-for-own-class-with-tuple-as-member/28197541#28197541", "title": "std::get for own class with tuple as member", "body": "<p>For completeness, here is my solution. Thanks everyone:</p>\n\n<pre><code>template&lt;typename ... TTypes&gt;\nclass Composite {\npublic:\n    Composite(TTypes... t) {\n        std::tuple&lt;TTypes...&gt; tuple(t...);\n        values = tuple;\n    } \n\n    std::tuple&lt;TTypes...&gt; &amp;getRefValues() { return values; }    \nprivate:\n    std::tuple&lt;TTypes...&gt; values;\n};\n\nnamespace std {\ntemplate&lt;size_t I, typename ... TTypes&gt;\n    auto get(Composite&lt;TTypes ...&gt; &amp;t) -&gt; typename std::tuple_element&lt;I, std::tuple&lt;TTypes...&gt;&gt;::type { \n        return std::get&lt;I&gt;(t.getRefValues());\n    }\n}\n\nint main() {\n    Composite&lt;int, char, double&gt; c(13, 'c', 13.5);\n    std::cout &lt;&lt; std::get&lt;0&gt;(c) &lt;&lt; std::endl;\n    std::cout &lt;&lt; std::get&lt;1&gt;(c) &lt;&lt; std::endl;\n    std::cout &lt;&lt; std::get&lt;2&gt;(c) &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 456, "user_id": 2237976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9252282bf7929b1140c681fe7b1abeec?s=128&d=identicon&r=PG", "display_name": "moo", "link": "https://stackoverflow.com/users/2237976/moo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1028, "favorite_count": 0, "accepted_answer_id": 28197488, "answer_count": 2, "score": 1, "last_activity_date": 1422464289, "creation_date": 1422460651, "last_edit_date": 1422462119, "question_id": 28196729, "link": "https://stackoverflow.com/questions/28196729/stdget-for-own-class-with-tuple-as-member", "title": "std::get for own class with tuple as member", "body": "<p>I have a class like this:</p>\n\n<pre><code> template&lt;typename ... TTypes&gt;\n class Composite {\n public:\n     std::tuple&lt;TTypes...&gt; &amp;getRefValues() { return values; }   \n private:\n     std::tuple&lt;TTypes...&gt; values;\n };\n</code></pre>\n\n<p>Can I define <code>std::get</code> for my class Composite? It should basically call the already defined <code>std::get</code> for the private tuple values.</p>\n\n<p>I was able to implement a customized get function when the return type is known (e.g. for an int array member) but I don't know how to realize get when the return type can be an arbitrary type (depending on the components' type of the tuple values)?</p>\n"}, {"tags": ["c++", "inheritance", "copy-constructor", "deep-copy"], "comments": [{"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 0, "creation_date": 1422460650, "post_id": 28196676, "comment_id": 44759952, "body": "So what&#39;s the problem you&#39;re having with this code? You might want to look at the <a href=\"http://en.wikibooks.org/wiki/More_C++_Idioms/Virtual_Constructor\" rel=\"nofollow noreferrer\">virtual constructor idiom</a> (particularly the virtual copy)."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 6, "creation_date": 1422460966, "post_id": 28196676, "comment_id": 44760166, "body": "But then the <code>Register</code> class needs to know about all the possible derived classes. Perhaps you can give the base class a <code>virtual Base* clone() const;</code> member function, which all derived classes implement as <code>Base* clone() const { return new Derived (*this); }</code>"}, {"owner": {"reputation": 131, "user_id": 3687100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f55137212134e4dc619df9eb8a70ca85?s=128&d=identicon&r=PG&f=1", "display_name": "abcthomas", "link": "https://stackoverflow.com/users/3687100/abcthomas"}, "edited": false, "score": 2, "creation_date": 1422461393, "post_id": 28196676, "comment_id": 44760413, "body": "<a href=\"http://stackoverflow.com/questions/259853/whats-the-best-signature-for-clone-in-c\" title=\"whats the best signature for clone in c\">stackoverflow.com/questions/259853/&hellip;</a>"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 1, "creation_date": 1422461746, "post_id": 28196676, "comment_id": 44760659, "body": "What type is <code>this-&gt;contenders</code>? Depending on the type you might have undefined behavior. (It should really be a vector.)"}, {"owner": {"reputation": 21, "user_id": 4121036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvM3h.jpg?s=128&g=1", "display_name": "Rangutang", "link": "https://stackoverflow.com/users/4121036/rangutang"}, "edited": false, "score": 0, "creation_date": 1422462342, "post_id": 28196676, "comment_id": 44761080, "body": "It tells me that &quot;there is no instance of constructor Professional::Professional that matches the argument list argument types are:(Contender)&quot;. And we are not suppose to use vectors on this assignment I can post all of the code if you would like"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1422462872, "post_id": 28196676, "comment_id": 44761436, "body": "@Rangutang Please ask that in a separate question."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1422744786, "post_id": 28257202, "comment_id": 44873034, "body": "The type check surely should be on the source object, not the (empty) destination."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 1, "last_activity_date": 1422745060, "last_edit_date": 1422745060, "creation_date": 1422742849, "answer_id": 28257202, "question_id": 28196676, "link": "https://stackoverflow.com/questions/28196676/copy-constructor-when-using-inheritence/28257202#28257202", "title": "Copy-constructor when using inheritence", "body": "<p>I understand that <code>contenders</code> is a pointer to an array of pointers.  </p>\n\n<p>There are three issues :</p>\n\n<ul>\n<li>you need to intialize <code>contenders</code>. </li>\n<li>the <code>dynamic_cast&lt;&gt;</code> check should use the original object</li>\n<li><code>Professional</code> and <code>Exerciser</code> copy constructors are certainly defined as copying objects of type <code>Professional</code> and <code>Exerciser</code> respectively and not <code>Contender</code>.</li>\n</ul>\n\n<p>Here a proposed correction: </p>\n\n<pre><code>Register::Register(const Register&amp; original)\n{\n    kap = original.kap;\n    currentAmount = original.currentAmount;\n    contenders = new Contender[currentAmount];  // was missing\n    for (int i = 0; i &lt; currentAmount; i++)\n    {\n        if (Professional* pro = dynamic_cast&lt;Professional*&gt;(original.contenders[i]))\n        {\n            contenders[i] = new Professional(*pro);  // use the pro instead of contender\n        }\n        if (Exerciser* exe = dynamic_cast&lt;Exerciser*&gt;(original.contenders[i]))  \n        {\n            contenders[i] = new Exerciser(*exe);  // use exe instead of contender\n        }\n    }\n    initiate(currentAmount);\n}\n</code></pre>\n\n<p>Three recomendations though:  </p>\n\n<ul>\n<li>you don't need to use <code>this-&gt;</code> to prefix all object variables.  Only in case of ambiguity with local variables of the member function itself. </li>\n<li>think of using <code>vector</code> instead of a pointer to an array</li>\n<li>the clone approach proposed in the comments would be a really nice and powerful alternative to your <code>dynamic_cast&lt;&gt;</code> checks</li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 4121036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvM3h.jpg?s=128&g=1", "display_name": "Rangutang", "link": "https://stackoverflow.com/users/4121036/rangutang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1422745060, "creation_date": 1422460505, "last_edit_date": 1422463249, "question_id": 28196676, "link": "https://stackoverflow.com/questions/28196676/copy-constructor-when-using-inheritence", "title": "Copy-constructor when using inheritence", "body": "<p>I have a problem with a school assignment. I am supposed to create a system that keeps track of contenders in a sporting event. I have a base class contender and two classes that derive from that called <code>Professional</code> and <code>Exerciser</code>.<br>\nAnd then I have a register class that contains a <code>Contender **contenders</code>. And I have to create a copy-constructor for this class but I don't know how to do it.</p>\n\n<p>I thought about something like this</p>\n\n<pre><code>Register::Register(const Register&amp; original)\n{\n    this-&gt;kap = original.kap;\n    this-&gt;currentAmount = original.currentAmount;\n    for (int i = 0; i &lt; this-&gt;currentAmount; i++)\n    {\n        if (Professional* pro = dynamic_cast&lt;Professional*&gt;(this-&gt;contenders[i]))\n        {\n            this-&gt;contenders[i] = new Professional(*original.contenders[i]);\n        }\n        if (Exerciser* pro = dynamic_cast&lt;Exerciser*&gt;(this-&gt;contenders[i]))\n        {\n            this-&gt;contenders[i] = new Exerciser(*original.contenders[i]);\n        }\n    }\n    this-&gt;initiate(this-&gt;currentAmount);\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qnetworkaccessmanager", "qtnetwork", "qnetworkreply"], "comments": [{"owner": {"reputation": 2345, "user_id": 956531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bc58919dfd1e89d9d5be71a9c68dd9d?s=128&d=identicon&r=PG", "display_name": "alediaferia", "link": "https://stackoverflow.com/users/956531/alediaferia"}, "edited": false, "score": 0, "creation_date": 1422460564, "post_id": 28196620, "comment_id": 44759907, "body": "Make sure you flush the data and seek back to 0 before setting content."}, {"owner": {"reputation": 2345, "user_id": 956531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bc58919dfd1e89d9d5be71a9c68dd9d?s=128&d=identicon&r=PG", "display_name": "alediaferia", "link": "https://stackoverflow.com/users/956531/alediaferia"}, "edited": false, "score": 0, "creation_date": 1422460628, "post_id": 28196620, "comment_id": 44759944, "body": "Also, <code>QDomDocument::setContent(QIODevice * dev, bool namespaceProcessing, QString * errorMsg = 0, int * errorLine = 0, int * errorColumn = 0)</code> gives an easy way to know the actual error message..."}, {"owner": {"reputation": 183, "user_id": 4023471, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f1228782a0846b6219d2c770d823dbce?s=128&d=identicon&r=PG&f=1", "display_name": "testus", "link": "https://stackoverflow.com/users/4023471/testus"}, "reply_to_user": {"reputation": 2345, "user_id": 956531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bc58919dfd1e89d9d5be71a9c68dd9d?s=128&d=identicon&r=PG", "display_name": "alediaferia", "link": "https://stackoverflow.com/users/956531/alediaferia"}, "edited": false, "score": 0, "creation_date": 1422461946, "post_id": 28196620, "comment_id": 44760788, "body": "@alediaferia can you tell me what you mean by flushing the data?"}, {"owner": {"reputation": 2345, "user_id": 956531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bc58919dfd1e89d9d5be71a9c68dd9d?s=128&d=identicon&r=PG", "display_name": "alediaferia", "link": "https://stackoverflow.com/users/956531/alediaferia"}, "edited": false, "score": 0, "creation_date": 1422462250, "post_id": 28196620, "comment_id": 44761021, "body": "Make sure the data you write from <code>reply-&gt;readAll()</code> to the temporary file is written actually to the file and not just buffered into memory. You can achieve this by calling <code>tempFile.flush()</code> before setting the content. Also, <code>QDomDocument::setContent</code> does not give any advice regarding how it uses the <code>QIODevice*</code> you pass in so you better <code>tempFile.seek(0)</code> before, in order to make sure <code>QDomDocument</code> actually reads from the start of the file."}, {"owner": {"reputation": 5192, "user_id": 775305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d16fcd6b1cfb7896f77b6ea4aed8dd7a?s=128&d=identicon&r=PG", "display_name": "Dan Milburn", "link": "https://stackoverflow.com/users/775305/dan-milburn"}, "edited": false, "score": 2, "creation_date": 1422462332, "post_id": 28196620, "comment_id": 44761071, "body": "Note that the temporary file isn&#39;t actually necessary.  QNetworkReply inherits from QIODevice, so you can just do <code>versionXML.setContent(reply)</code>."}, {"owner": {"reputation": 2345, "user_id": 956531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bc58919dfd1e89d9d5be71a9c68dd9d?s=128&d=identicon&r=PG", "display_name": "alediaferia", "link": "https://stackoverflow.com/users/956531/alediaferia"}, "edited": false, "score": 0, "creation_date": 1422462404, "post_id": 28196620, "comment_id": 44761123, "body": "Anyway there&#39;s a lot to check here. You also need to check whether you get a valid response from server. Anyway I highly recommend you print out the error message."}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 4023471, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f1228782a0846b6219d2c770d823dbce?s=128&d=identicon&r=PG&f=1", "display_name": "testus", "link": "https://stackoverflow.com/users/4023471/testus"}, "edited": false, "score": 0, "creation_date": 1422465590, "post_id": 28197716, "comment_id": 44763249, "body": "I tried this but I get <b>XML download size: 226 bytes Failed to parse QML</b> as the output everytime. Even if I link to a non-existent file I get the same XML download size. Is the first part of <code>manager-&gt;get(QNetworkRequest(QUrl(&quot;http:&#47;&#47;example.com&#47;file.x&zwnj;&#8203;ml&quot;)));</code> correct?"}, {"owner": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "reply_to_user": {"reputation": 183, "user_id": 4023471, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f1228782a0846b6219d2c770d823dbce?s=128&d=identicon&r=PG&f=1", "display_name": "testus", "link": "https://stackoverflow.com/users/4023471/testus"}, "edited": false, "score": 0, "creation_date": 1422465886, "post_id": 28197716, "comment_id": 44763403, "body": "Okay good, then have a look what these 226 bytes are. See my edited answer."}, {"owner": {"reputation": 183, "user_id": 4023471, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f1228782a0846b6219d2c770d823dbce?s=128&d=identicon&r=PG&f=1", "display_name": "testus", "link": "https://stackoverflow.com/users/4023471/testus"}, "edited": false, "score": 0, "creation_date": 1422466091, "post_id": 28197716, "comment_id": 44763526, "body": "<b>&lt;head&gt;&lt;title&gt;Not Acceptable!&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Not Acceptable!&lt;/h1&gt;&lt;p&gt;An appropriate representation of the requested resource could not be found on this server. This error was generated by Mod_Security.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</b> If I copy the same link I put in the <code>manager</code> in a web browser I do see my XML file."}, {"owner": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "reply_to_user": {"reputation": 183, "user_id": 4023471, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f1228782a0846b6219d2c770d823dbce?s=128&d=identicon&r=PG&f=1", "display_name": "testus", "link": "https://stackoverflow.com/users/4023471/testus"}, "edited": false, "score": 0, "creation_date": 1422466279, "post_id": 28197716, "comment_id": 44763626, "body": "Looks like you need to set a proper <code>Accept</code> header in the request. <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Request_fields\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/List_of_HTTP_header_fields#Request_fie&zwnj;&#8203;lds</a>"}, {"owner": {"reputation": 183, "user_id": 4023471, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f1228782a0846b6219d2c770d823dbce?s=128&d=identicon&r=PG&f=1", "display_name": "testus", "link": "https://stackoverflow.com/users/4023471/testus"}, "edited": false, "score": 0, "creation_date": 1422466332, "post_id": 28197716, "comment_id": 44763662, "body": "got it using this answer <a href=\"http://stackoverflow.com/questions/14416786/webpage-returning-http-406-error-only-when-connecting-from-qt\" title=\"webpage returning http 406 error only when connecting from qt\">stackoverflow.com/questions/14416786/&hellip;</a>"}], "tags": [], "owner": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "is_accepted": true, "score": 1, "last_activity_date": 1422465641, "last_edit_date": 1422465641, "creation_date": 1422463498, "answer_id": 28197716, "question_id": 28196620, "link": "https://stackoverflow.com/questions/28196620/qtnetwork-download-xml-file-and-read-its-content/28197716#28197716", "title": "QtNetwork: Download xml file and read its content", "body": "<p>I think the streaming interfaces are a bit hard to use when you are new to Qt. If you don't have super-big downloads that fit into RAM, just use QByteArray.</p>\n\n<pre><code>fileIsReady(QNetworkReply *reply){\n    QByteArray data = reply-&gt;readAll();\n    qDebug() &lt;&lt; \"XML download size:\" &lt;&lt; data.size() &lt;&lt; \"bytes\";\n    qDebug() &lt;&lt; QString::\u200bfromUtf8(data);\n\n    QDomDocument versionXML;\n\n    if(!versionXML.setContent(data))\n    {\n        qWarning() &lt;&lt; \"Failed to parse XML\";\n    }\n\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 4023471, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f1228782a0846b6219d2c770d823dbce?s=128&d=identicon&r=PG&f=1", "display_name": "testus", "link": "https://stackoverflow.com/users/4023471/testus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1028, "favorite_count": 0, "accepted_answer_id": 28197716, "answer_count": 1, "score": 0, "last_activity_date": 1422465641, "creation_date": 1422460352, "question_id": 28196620, "link": "https://stackoverflow.com/questions/28196620/qtnetwork-download-xml-file-and-read-its-content", "title": "QtNetwork: Download xml file and read its content", "body": "<p>I have a Qt application where I am trying to download a XML file form a server and then read the content of the file.\nUnfortunately, I am not able to get the content of the downloaded file in to a <code>QDomDocument</code>.</p>\n\n<p>This is what I tried</p>\n\n<pre><code>QNetworkAccessManager *manager = new QNetworkAccessManager(this);\nconnect(manager, SIGNAL(finished(QNetworkReply*)), this, SLOT(fileIsReady(QNetworkReply*)) );\nmanager-&gt;get(QNetworkRequest(QUrl(\"http://example.com/file.xml\")));\n\n\nfileIsReady(QNetworkReply *reply){\n\n    QTemporaryFile tempFile;\n    if(tempFile.open()){\n        tempFile.write(reply-&gt;readAll());\n        QDomDocument versionXML;\n        QDomElement root;\n\n        if(!versionXML.setContent(&amp;tempFile)){\n            qDebug() &lt;&lt; \"failed to load version file\" &lt;&lt; endl;\n        }\n        else{\n            root=versionXML.firstChildElement();\n            //...\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["c++", "assembly", "x86", "x86-64", "unsigned-integer"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1422460203, "post_id": 28196510, "comment_id": 44759630, "body": "The top half of a 64bit register is zeroed out when you write to only the lower half."}, {"owner": {"reputation": 5258, "user_id": 1722025, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aS04m.jpg?s=128&g=1", "display_name": "asimes", "link": "https://stackoverflow.com/users/1722025/asimes"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1422460249, "post_id": 28196510, "comment_id": 44759669, "body": "@harold, I thought an explicit <code>cltq</code> was needed?"}, {"owner": {"reputation": 131, "user_id": 3687100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f55137212134e4dc619df9eb8a70ca85?s=128&d=identicon&r=PG&f=1", "display_name": "abcthomas", "link": "https://stackoverflow.com/users/3687100/abcthomas"}, "edited": false, "score": 0, "creation_date": 1422460319, "post_id": 28196510, "comment_id": 44759715, "body": "What was the output of the result function ?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1422460391, "post_id": 28196510, "comment_id": 44759779, "body": "<code>cltq</code> is for sign extending. A plain write (including <i>any</i> 32-bit modification, for example also <code>or eax, 0</code> and even <code>mov eax, eax</code>) uses zero extension."}, {"owner": {"reputation": 5258, "user_id": 1722025, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aS04m.jpg?s=128&g=1", "display_name": "asimes", "link": "https://stackoverflow.com/users/1722025/asimes"}, "reply_to_user": {"reputation": 131, "user_id": 3687100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f55137212134e4dc619df9eb8a70ca85?s=128&d=identicon&r=PG&f=1", "display_name": "abcthomas", "link": "https://stackoverflow.com/users/3687100/abcthomas"}, "edited": false, "score": 0, "creation_date": 1422460453, "post_id": 28196510, "comment_id": 44759817, "body": "@abcthomas, Two samples, although really what matters is the top half of <code>%rax</code>: <i>./u_to_ull 10</i>, <i>Result as unsigned long long is 10</i>; <i>./u_to_ull -10</i>, <i>WARNING: atoi() returned -10 and (unsigned int)foo is 4294967286</i>, <i>Result as unsigned long long is 4294967286</i>"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1422460509, "post_id": 28196510, "comment_id": 44759871, "body": "I can&#39;t quite understand your question. Are you asking what the C++ language says about assigning a smaller size unsigned to a larger one? Or are you asking about this specific compiler&#39;s generated assembly code? In that case, what compiler, what options did you use, etc?"}, {"owner": {"reputation": 5258, "user_id": 1722025, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aS04m.jpg?s=128&g=1", "display_name": "asimes", "link": "https://stackoverflow.com/users/1722025/asimes"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1422460691, "post_id": 28196510, "comment_id": 44759990, "body": "@MarkB, I think harold&#39;s comment would answer this question well, although I would like to see that documented somewhere. I guess a C++ guarantee would be good as well. Compiled as <code>g++ u_to_ull.c -o u_to_ull</code>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1423569424, "post_id": 28196510, "comment_id": 45192513, "body": "<a href=\"http://stackoverflow.com/questions/11177137/why-do-most-x64-instructions-zero-the-upper-part-of-a-32-bit-register\">Why do most x64 instructions zero the upper part of a 32 bit register</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5258, "user_id": 1722025, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aS04m.jpg?s=128&g=1", "display_name": "asimes", "link": "https://stackoverflow.com/users/1722025/asimes"}, "edited": false, "score": 0, "creation_date": 1422461910, "post_id": 28197130, "comment_id": 44760763, "body": "Great, thank you. I figured something must be going on that I had missed or crazy values would be bound to show up eventually"}], "tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": true, "score": 5, "last_activity_date": 1422462580, "last_edit_date": 1422462580, "creation_date": 1422461792, "answer_id": 28197130, "question_id": 28196510, "link": "https://stackoverflow.com/questions/28196510/unsigned-int-to-unsigned-long-long-well-defined/28197130#28197130", "title": "Unsigned int to unsigned long long well defined?", "body": "<p>In the <a href=\"http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html\" rel=\"nofollow\">Intel\u00ae 64 and IA-32 Architectures Software Developer Manuals</a>, volume 1, chapter 3.4.1.1 (General-Purpose Registers in 64-Bit Mode), it says</p>\n\n<blockquote>\n  <p>32-bit operands generate a 32-bit result, zero-extended to a 64-bit result in the destination general-purpose register.</p>\n</blockquote>\n\n<p>So after <code>mov -0xc(%rbp),%eax</code>, the upper half of <code>rax</code> <em>is</em> defined, and it's zero.</p>\n\n<p>This also applies to the <code>87 C0</code> encoding of <code>xchg eax, eax</code>, but not to its <code>90</code> encoding (which is defined as <code>nop</code>, overruling the rule quoted above).</p>\n"}, {"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 3, "last_activity_date": 1422461816, "creation_date": 1422461816, "answer_id": 28197139, "question_id": 28196510, "link": "https://stackoverflow.com/questions/28196510/unsigned-int-to-unsigned-long-long-well-defined/28197139#28197139", "title": "Unsigned int to unsigned long long well defined?", "body": "<p>From C++98 (and C++11 seems to be unchanged) 4.7/2 (integral conversions - no promotions are relevant) we learn:</p>\n\n<blockquote>\n  <p>If the destination type is unsigned, the resulting value is the least\n  unsigned integer congruent to the source integer (modulo 2n where n is\n  the number of bits used to represent the unsigned type).</p>\n</blockquote>\n\n<p>This clearly shows that as long as the source and destination are unsigned and the destination is at least as large as the source, the value will be unchanged. If the compiler generated code that failed to make the larger value equal, the compiler is buggy.</p>\n"}], "owner": {"reputation": 5258, "user_id": 1722025, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aS04m.jpg?s=128&g=1", "display_name": "asimes", "link": "https://stackoverflow.com/users/1722025/asimes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 28197130, "answer_count": 2, "score": 5, "last_activity_date": 1423568959, "creation_date": 1422460089, "last_edit_date": 1423568959, "question_id": 28196510, "link": "https://stackoverflow.com/questions/28196510/unsigned-int-to-unsigned-long-long-well-defined", "title": "Unsigned int to unsigned long long well defined?", "body": "<p>I wanted to see what was happening behind the scenes when an <code>unsigned long long</code> was assigned the value of an <code>unsigned int</code>. I made a simple C++ program to try it out and moved all the io out of main():</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n\nvoid usage() {\n        std::cout &lt;&lt; \"Usage: ./u_to_ull &lt;unsigned int&gt;\\n\";\n        exit(0);\n}\n\nvoid atoiWarning(int foo) {\n        std::cout &lt;&lt; \"WARNING: atoi() returned \" &lt;&lt; foo &lt;&lt; \" and (unsigned int)foo is \" &lt;&lt;\n ((unsigned int)foo) &lt;&lt; \"\\n\";\n}\n\nvoid result(unsigned long long baz) {\n        std::cout &lt;&lt; \"Result as unsigned long long is \" &lt;&lt; baz &lt;&lt; \"\\n\";\n}\n\nint main(int argc, char** argv) {\n        if (argc != 2) usage();\n\n        int foo = atoi(argv[1]);\n        if (foo &lt; 0) atoiWarning(foo);\n\n        // Signed to unsigned\n        unsigned int bar = foo;\n\n        // Conversion\n        unsigned long long baz = -1;\n        baz = bar;\n\n        result(baz);\n\n        return 0;\n}\n</code></pre>\n\n<p>The resulting assembly produced this for main:</p>\n\n<pre><code>0000000000400950 &lt;main&gt;:\n  400950:       55                      push   %rbp\n  400951:       48 89 e5                mov    %rsp,%rbp\n  400954:       48 83 ec 20             sub    $0x20,%rsp\n  400958:       89 7d ec                mov    %edi,-0x14(%rbp)\n  40095b:       48 89 75 e0             mov    %rsi,-0x20(%rbp)\n  40095f:       83 7d ec 02             cmpl   $0x2,-0x14(%rbp)\n  400963:       74 05                   je     40096a &lt;main+0x1a&gt;\n  400965:       e8 3a ff ff ff          callq  4008a4 &lt;_Z5usagev&gt;\n  40096a:       48 8b 45 e0             mov    -0x20(%rbp),%rax\n  40096e:       48 83 c0 08             add    $0x8,%rax\n  400972:       48 8b 00                mov    (%rax),%rax\n  400975:       48 89 c7                mov    %rax,%rdi\n  400978:       e8 0b fe ff ff          callq  400788 &lt;atoi@plt&gt;\n  40097d:       89 45 f0                mov    %eax,-0x10(%rbp)\n  400980:       83 7d f0 00             cmpl   $0x0,-0x10(%rbp)\n  400984:       79 0a                   jns    400990 &lt;main+0x40&gt;\n  400986:       8b 45 f0                mov    -0x10(%rbp),%eax\n  400989:       89 c7                   mov    %eax,%edi\n  40098b:       e8 31 ff ff ff          callq  4008c1 &lt;_Z11atoiWarningi&gt;\n  400990:       8b 45 f0                mov    -0x10(%rbp),%eax\n  400993:       89 45 f4                mov    %eax,-0xc(%rbp)\n  400996:       48 c7 45 f8 ff ff ff    movq   $0xffffffffffffffff,-0x8(%rbp)\n  40099d:       ff\n  40099e:       8b 45 f4                mov    -0xc(%rbp),%eax\n  4009a1:       48 89 45 f8             mov    %rax,-0x8(%rbp)\n  4009a5:       48 8b 45 f8             mov    -0x8(%rbp),%rax\n  4009a9:       48 89 c7                mov    %rax,%rdi\n  4009ac:       e8 66 ff ff ff          callq  400917 &lt;_Z6resulty&gt;\n  4009b1:       b8 00 00 00 00          mov    $0x0,%eax\n  4009b6:       c9                      leaveq\n  4009b7:       c3                      retq\n</code></pre>\n\n<p>The <code>-1</code> from the C++ makes it clear that <code>-0x8(%rbp)</code> corresponds to <code>baz</code> (due to <code>$0xffffffffffffffff</code>). <code>-0x8(%rbp)</code> is written to by <code>%rax</code>, but the top four bytes of <code>%rax</code> appear to not have been assigned, <code>%eax</code>was assigned</p>\n\n<p>Does this suggest that the top 4 bytes of <code>-0x8(%rbp)</code> are undefined?</p>\n"}, {"tags": ["c++", "dll", "rundll32"], "answers": [{"tags": [], "owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "is_accepted": true, "score": 7, "last_activity_date": 1422460717, "creation_date": 1422460717, "answer_id": 28196754, "question_id": 28196501, "link": "https://stackoverflow.com/questions/28196501/running-c-dll-with-rundll32-missing-entry/28196754#28196754", "title": "Running C++ DLL with rundll32 - Missing entry", "body": "<p>You can double-check by running Dumpbin.exe /exports on your DLL to see the actual exported name.  Which right now is <em>not</em> <code>entry</code>, as the error message tells you.</p>\n\n<p>You need to prefix <code>extern \"C\"</code> to the declaration to disable C++ name mangling.</p>\n\n<p>Good enough for a 64-bit executable, but that turns it into <code>_entry@16</code> if this is a 32-bit DLL, still not quite good enough to keep rundll32 happy.  Use Project + Add New Item, Code node, pick the \"Module-Definition File (.def)\" item template.  And make it look like this:</p>\n\n<pre><code>EXPORTS\nentry = entry\n</code></pre>\n"}], "owner": {"reputation": 893, "user_id": 1183602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3ZJHj.png?s=128&g=1", "display_name": "Transcendental", "link": "https://stackoverflow.com/users/1183602/transcendental"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2788, "favorite_count": 1, "accepted_answer_id": 28196754, "answer_count": 1, "score": 2, "last_activity_date": 1422460717, "creation_date": 1422460062, "question_id": 28196501, "link": "https://stackoverflow.com/questions/28196501/running-c-dll-with-rundll32-missing-entry", "title": "Running C++ DLL with rundll32 - Missing entry", "body": "<p>So I'm trying to use rundll to test and run my C++ written DLL , and i've followed the guidelines here and on other sites and the entry point looks like this:</p>\n\n<pre><code>__declspec(dllexport)  void CALLBACK entry(HWND hwnd, HINSTANCE hinst, LPSTR lpszCmdLine, int nCmdShow)\n{\n    //do stuff\n}\n</code></pre>\n\n<p>But the rundll process prompts me with an error message box saying \"Error in C:\\path\\to\\DLL Missing entry: entry\"</p>\n\n<p>Attempted execution command: \"rundll32 C:\\path\\to\\DLL, entry\".</p>\n"}, {"tags": ["c++", "tcp", "boost-asio", "impersonation", "arp"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1422460490, "post_id": 28196466, "comment_id": 44759856, "body": "This question as off-topic because it is not about programming. Figure out what you can or can&#39;t do on the networking part. Then if you need to code something up and have trouble with it, ask here."}, {"owner": {"reputation": 83, "user_id": 3893176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bc84c834d2b26e8ebb07a51db78a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Tim37", "link": "https://stackoverflow.com/users/3893176/tim37"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1422462049, "post_id": 28196466, "comment_id": 44760869, "body": "I&#39;ll fix the question to make sure this is a programming question. Thanks for helping."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 3893176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bc84c834d2b26e8ebb07a51db78a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Tim37", "link": "https://stackoverflow.com/users/3893176/tim37"}, "edited": false, "score": 0, "creation_date": 1422544339, "post_id": 28197826, "comment_id": 44799362, "body": "Thanks, this is definite progress. The question then becomes &quot;how does one add a bind() to a socket in Boost ASIO?&quot;"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 83, "user_id": 3893176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bc84c834d2b26e8ebb07a51db78a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Tim37", "link": "https://stackoverflow.com/users/3893176/tim37"}, "edited": false, "score": 0, "creation_date": 1422548975, "post_id": 28197826, "comment_id": 44802682, "body": "@Tim37 I would look up the documentation."}, {"owner": {"reputation": 83, "user_id": 3893176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bc84c834d2b26e8ebb07a51db78a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Tim37", "link": "https://stackoverflow.com/users/3893176/tim37"}, "edited": false, "score": 0, "creation_date": 1422574200, "post_id": 28197826, "comment_id": 44816455, "body": "OK, my question is a duplicate of <a href=\"http://stackoverflow.com/questions/17299476/how-to-specify-a-specific-nic-to-be-used-in-an-application-written-in-c-boost\" title=\"how to specify a specific nic to be used in an application written in c boost\">stackoverflow.com/questions/17299476/&hellip;</a>"}, {"owner": {"reputation": 83, "user_id": 3893176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bc84c834d2b26e8ebb07a51db78a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Tim37", "link": "https://stackoverflow.com/users/3893176/tim37"}, "edited": false, "score": 0, "creation_date": 1423137955, "post_id": 28197826, "comment_id": 45031377, "body": "The essence of my problem was to find where the bind() call was buried in Boost ASIO. I found this through another source."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1422548913, "last_edit_date": 1422548913, "creation_date": 1422463846, "answer_id": 28197826, "question_id": 28196466, "link": "https://stackoverflow.com/questions/28196466/in-boost-asio-how-can-i-set-the-source-ip-address-to-impersonate-another-server/28197826#28197826", "title": "In Boost ASIO how can I set the source IP address to impersonate another server&#39;s IP address?", "body": "<p>Use <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/bind.html\" rel=\"nofollow\"><code>bind</code></a> call to assign the source IP address and port. </p>\n\n<p>If you do not call <code>bind</code> before <code>connect</code> the OS picks and binds the interface for you using the routing table.</p>\n\n<p>The IP address must be the address of one of your host's interfaces. In other words, you cannot spoof your source IP using <code>bind</code> call.</p>\n"}, {"tags": [], "owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "is_accepted": false, "score": 3, "last_activity_date": 1423137777, "last_edit_date": 1423137777, "creation_date": 1422746198, "answer_id": 28257640, "question_id": 28196466, "link": "https://stackoverflow.com/questions/28196466/in-boost-asio-how-can-i-set-the-source-ip-address-to-impersonate-another-server/28257640#28257640", "title": "In Boost ASIO how can I set the source IP address to impersonate another server&#39;s IP address?", "body": "<p>One can set the source IP to an arbitrary address on outbound data by manually constructing both network and transport layer headers, then sending the headers and the desired payload to a <a href=\"http://linux.die.net/man/7/raw\" rel=\"nofollow\">raw socket</a>.  The use of raw sockets may require elevated permissions, or may be disabled or restricted by the kernel, such as on some Microsoft <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740463%28v=vs.85%29.aspx\" rel=\"nofollow\">platforms</a>.  Furthermore, due to TCP's three-way handshake and unpredictable sequence numbers, the effectiveness of the forged TCP segment, outside of potential <a href=\"http://en.wikipedia.org/wiki/TCP_reset_attack\" rel=\"nofollow\">TCP reset attacks</a>, is questionable.</p>\n\n<p>Routing is a different topic and depends on the various routers and configurations.  For instance, devices may perform egress filtering and drop packets with a source address for which the device cannot validate.  Furthermore, the affects of an IP address conflict can vary, but it often results in an intermittent connection.</p>\n\n<hr>\n\n<p>Boost.Asio provides a <a href=\"http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/reference/basic_raw_socket.html\" rel=\"nofollow\"><code>basic_raw_socket&lt;Protocol&gt;</code></a> template that expects a type meeting the <a href=\"http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/reference/Protocol.html\" rel=\"nofollow\">Protocol</a> type requirement.  For instance, below is the start or a <code>raw</code> protocol:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct raw\n{\n  typedef boost::asio::ip::basic_endpoint&lt;raw&gt; endpoint;\n  int type() const     { return SOCK_RAW;    }\n  int protocol() const { return IPPROTO_RAW; }\n  int family() const   { return PF_INET;     }\n};\n\nboost::asio::basic_raw_socket&lt;raw&gt; socket;\n</code></pre>\n\n<p>When dealing with raw sockets, the difficulty is often not in using Boost.Asio, but rather having to implement the Network and Transport wire protocol.  Below is a complete minimal example where I tried to keep it as simple as possible by creating a <code>raw</code> protocol and using <code>basic_raw_socket</code> to send a UDP message:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\n#include &lt;boost/array.hpp&gt;\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/cstdint.hpp&gt;\n\n/// @brief raw socket provides the protocol for raw socket.\nclass raw\n{\npublic:\n  ///@brief The type of a raw endpoint.\n  typedef boost::asio::ip::basic_endpoint&lt;raw&gt; endpoint;\n\n  ///@brief The raw socket type.\n  typedef boost::asio::basic_raw_socket&lt;raw&gt; socket;\n\n  ///@brief The raw resolver type.\n  typedef boost::asio::ip::basic_resolver&lt;raw&gt; resolver;\n\n  ///@brief Construct to represent the IPv4 RAW protocol.\n  static raw v4()\n  {\n    return raw(IPPROTO_RAW, PF_INET);\n  }\n\n  ///@brief Construct to represent the IPv6 RAW protocol.\n  static raw v6()\n  {\n    return raw(IPPROTO_RAW, PF_INET6);\n  }\n\n  ///@brief Default constructor.\n  explicit raw()\n    : protocol_(IPPROTO_RAW),\n      family_(PF_INET)\n  {}\n\n  ///@brief Obtain an identifier for the type of the protocol.\n  int type() const\n  {\n    return SOCK_RAW;\n  }\n\n  ///@brief Obtain an identifier for the protocol.\n  int protocol() const\n  {\n    return protocol_;\n  }\n\n  ///@brief Obtain an identifier for the protocol family.\n  int family() const\n  {\n    return family_;\n  }\n\n  ///@brief Compare two protocols for equality.\n  friend bool operator==(const raw&amp; p1, const raw&amp; p2)\n  {\n    return p1.protocol_ == p2.protocol_ &amp;&amp; p1.family_ == p2.family_;\n  }\n\n  /// Compare two protocols for inequality.\n  friend bool operator!=(const raw&amp; p1, const raw&amp; p2)\n  {\n    return !(p1 == p2);\n  }\n\nprivate:\n  explicit raw(int protocol_id, int protocol_family)\n    : protocol_(protocol_id),\n      family_(protocol_family)\n  {}\n\n  int protocol_;\n  int family_;\n};\n\n///@ brief Mockup ipv4_header for with no options.\n//\n//  IPv4 wire format:\n//\n//  0                   1                   2                   3\n//  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n// +-------+-------+-------+-------+-------+-------+-------+------+   ---\n// |version|header |    type of    |    total length in bytes     |    ^\n// |  (4)  | length|    service    |                              |    |\n// +-------+-------+-------+-------+-------+-------+-------+------+    |\n// |        identification         |flags|    fragment offset     |    |\n// +-------+-------+-------+-------+-------+-------+-------+------+  20 bytes\n// | time to live  |   protocol    |       header checksum        |    |\n// +-------+-------+-------+-------+-------+-------+-------+------+    |\n// |                      source IPv4 address                     |    |\n// +-------+-------+-------+-------+-------+-------+-------+------+    |\n// |                   destination IPv4 address                   |    v\n// +-------+-------+-------+-------+-------+-------+-------+------+   ---\n// /                       options (if any)                       /\n// +-------+-------+-------+-------+-------+-------+-------+------+\nclass ipv4_header\n{\npublic:\n  ipv4_header() { std::fill(buffer_.begin(), buffer_.end(), 0); }\n\n  void version(boost::uint8_t value) {\n    buffer_[0] = (value &lt;&lt; 4) | (buffer_[0] &amp; 0x0F);\n  }\n\n  void header_length(boost::uint8_t value)\n  {\n    buffer_[0] = (value &amp; 0x0F) | (buffer_[0] &amp; 0xF0);\n  }\n\n  void type_of_service(boost::uint8_t value) { buffer_[1] = value; }\n  void total_length(boost::uint16_t value) { encode16(2, value); }\n  void identification(boost::uint16_t value) { encode16(4, value); }\n\n  void dont_fragment(bool value)\n  {\n    buffer_[6] ^= (-value ^ buffer_[6]) &amp; 0x40;\n  }\n\n  void more_fragments(bool value)\n  {\n    buffer_[6] ^= (-value ^ buffer_[6]) &amp; 0x20;\n  }\n\n  void fragment_offset(boost::uint16_t value)\n  {\n     // Preserve flags.\n     auto flags = static_cast&lt;uint16_t&gt;(buffer_[6] &amp; 0xE0) &lt;&lt; 8;\n     encode16(6, (value &amp; 0x1FFF) | flags);\n  }\n\n  void time_to_live(boost::uint8_t value) { buffer_[8] = value; }\n  void protocol(boost::uint8_t value) { buffer_[9] = value; }\n  void checksum(boost::uint16_t value) { encode16(10, value); }\n\n  void source_address(boost::asio::ip::address_v4 value)\n  {\n    auto bytes = value.to_bytes();\n    std::copy(bytes.begin(), bytes.end(), &amp;buffer_[12]);\n  }\n\n  void destination_address(boost::asio::ip::address_v4 value)\n  {\n    auto bytes = value.to_bytes();\n    std::copy(bytes.begin(), bytes.end(), &amp;buffer_[16]);\n  }\n\npublic:\n\n  std::size_t size() const { return buffer_.size(); }\n\n  const boost::array&lt;uint8_t, 20&gt;&amp; data() const { return buffer_; }\n\nprivate:\n\n  void encode16(boost::uint8_t index, boost::uint16_t value)\n  {\n    buffer_[index] = (value &gt;&gt; 8) &amp; 0xFF;\n    buffer_[index + 1] = value &amp; 0xFF;\n  }\n\n  boost::array&lt;uint8_t, 20&gt; buffer_;\n};\n\nvoid calculate_checksum(ipv4_header&amp; header)\n{\n  // Zero out the checksum.\n  header.checksum(0);\n\n  // Checksum is the 16-bit one's complement of the one's complement sum of\n  // all 16-bit words in the header.\n\n  // Sum all 16-bit words.\n  auto data = header.data();\n  auto sum = std::accumulate&lt;boost::uint16_t*, boost::uint32_t&gt;(\n    reinterpret_cast&lt;boost::uint16_t*&gt;(&amp;data[0]),\n    reinterpret_cast&lt;boost::uint16_t*&gt;(&amp;data[0] + data.size()),\n    0);\n\n  // Fold 32-bit into 16-bits.\n  while (sum &gt;&gt; 16)\n  {\n    sum = (sum &amp; 0xFFFF) + (sum &gt;&gt; 16);\n  }\n\n  header.checksum(~sum);\n}\n\n///@brief Mockup IPv4 UDP header.\n//\n// UDP wire format:\n//\n//  0                   1                   2                   3\n//  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n// +-------+-------+-------+-------+-------+-------+-------+------+   ---\n// |          source port          |      destination port        |    ^\n// +-------+-------+-------+-------+-------+-------+-------+------+  8 bytes\n// |            length             |          checksum            |    v\n// +-------+-------+-------+-------+-------+-------+-------+------+   ---\n// /                        data (if any)                         /\n// +-------+-------+-------+-------+-------+-------+-------+------+\nclass udp_header\n{\npublic:\n  udp_header() { std::fill(buffer_.begin(), buffer_.end(), 0); }\n\n  void source_port(boost::uint16_t value)      { encode16(0, value); }\n  void destination_port(boost::uint16_t value) { encode16(2, value); }\n  void length(boost::uint16_t value)           { encode16(4, value); }\n  void checksum(boost::uint16_t value)         { encode16(6, value); }\n\npublic:\n\n  std::size_t size() const { return buffer_.size(); }\n\n  const boost::array&lt;uint8_t, 8&gt;&amp; data() const { return buffer_; }\n\nprivate:\n\n  void encode16(boost::uint8_t index, boost::uint16_t value)\n  {\n    buffer_[index] = (value &gt;&gt; 8) &amp; 0xFF;\n    buffer_[index + 1] = value &amp; 0xFF;\n  }\n\n  boost::array&lt;uint8_t, 8&gt; buffer_;\n};\n\n\nint main()\n{\n  boost::asio::io_service io_service;\n\n  // Create all I/O objects.\n  boost::asio::ip::udp::socket receiver(io_service,\n    boost::asio::ip::udp::endpoint(boost::asio::ip::udp::v4(), 0));\n  boost::asio::basic_raw_socket&lt;raw&gt; sender(io_service,\n    raw::endpoint(raw::v4(), 0));\n\n  const auto receiver_endpoint = receiver.local_endpoint();\n\n  // Craft a UDP message with a payload 'hello' coming from\n  // 8.8.8.8:54321\n  const boost::asio::ip::udp::endpoint spoofed_endpoint(\n    boost::asio::ip::address_v4::from_string(\"8.8.8.8\"),\n    54321);\n  const std::string payload = \"hello\";\n\n  // Create the UDP header.\n  udp_header udp;\n  udp.source_port(spoofed_endpoint.port());\n  udp.destination_port(receiver_endpoint.port());\n  udp.length(udp.size() + payload.size()); // Header + Payload\n  udp.checksum(0); // Optioanl for IPv4\n\n  // Create the IPv4 header.\n  ipv4_header ip;\n  ip.version(4);                   // IPv4\n  ip.header_length(ip.size() / 4); // 32-bit words\n  ip.type_of_service(0);           // Differentiated service code point\n  auto total_length = ip.size() + udp.size() + payload.size();\n  ip.total_length(total_length); // Entire message.\n  ip.identification(0);\n  ip.dont_fragment(true);\n  ip.more_fragments(false);\n  ip.fragment_offset(0);\n  ip.time_to_live(4);\n  ip.source_address(spoofed_endpoint.address().to_v4());\n  ip.destination_address(receiver_endpoint.address().to_v4());\n  ip.protocol(IPPROTO_UDP);\n  calculate_checksum(ip);\n\n  // Gather up all the buffers and send through the raw socket.\n  boost::array&lt;boost::asio::const_buffer, 3&gt; buffers = {{\n    boost::asio::buffer(ip.data()),\n    boost::asio::buffer(udp.data()),\n    boost::asio::buffer(payload)\n  }};\n  auto bytes_transferred = sender.send_to(buffers,\n    raw::endpoint(receiver_endpoint.address(), receiver_endpoint.port()));\n  assert(bytes_transferred == total_length);\n\n  // Read on the reciever.\n  std::vector&lt;char&gt; buffer(payload.size(), '\\0');\n  boost::asio::ip::udp::endpoint sender_endpoint;\n  bytes_transferred = receiver.receive_from(\n      boost::asio::buffer(buffer), sender_endpoint);\n\n  // Verify.\n  assert(bytes_transferred == payload.size());\n  assert(std::string(buffer.begin(), buffer.end()) == payload);\n  assert(spoofed_endpoint == sender_endpoint);\n\n  // Print endpoints.\n  std::cout &lt;&lt;\n    \"Actual sender endpoint: \" &lt;&lt; sender.local_endpoint() &lt;&lt; \"\\n\"\n    \"Receiver endpoint: \" &lt;&lt; receiver.local_endpoint() &lt;&lt; \"\\n\"\n    \"Receiver's remote endpoint: \" &lt;&lt; sender_endpoint &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ sudo ./a.out\nActual sender endpoint: 0.0.0.0:255\nReceiver endpoint: 0.0.0.0:44806\nReceiver's remote endpoint: 8.8.8.8:54321\n</code></pre>\n\n<p>As indicated in the output, although the true sender endpoint is <code>0.0.0.0:255</code>, the receiver believes the sender's endpoint is <code>8.8.8.8:54321</code>.</p>\n"}], "owner": {"reputation": 83, "user_id": 3893176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bc84c834d2b26e8ebb07a51db78a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Tim37", "link": "https://stackoverflow.com/users/3893176/tim37"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3228, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1423137777, "creation_date": 1422459968, "last_edit_date": 1422463951, "question_id": 28196466, "link": "https://stackoverflow.com/questions/28196466/in-boost-asio-how-can-i-set-the-source-ip-address-to-impersonate-another-server", "title": "In Boost ASIO how can I set the source IP address to impersonate another server&#39;s IP address?", "body": "<p>I have a Boost ASIO-based C++ server program and I'd like to be able to set the source IP address used by TCP to that of another server. I know one can read the source and destination IP addresses but presumably they can be set as well?</p>\n\n<p>Presumably if I set the \"wrong\" source IP address in the C++ code there will be some interaction with the network stack. Won't the network stack re-set the source IP address on the way out even if the C++ code is right? Is the right way to do this to write C++ ASIO code to pick a specific virtual network interface? One that is configured with the \"wrong\" static IP address? I have seen this before as a way to control the source IP address. Is that what I need to do instead?</p>\n\n<p>I am wondering what the consequences of this would be. Having two machines with the same static IP address configured might cause the \"normal\" server to stop working completely, which would be bad.</p>\n\n<p>I have both Windows and Linux ports of my server I can use in case the code proposed will work on one OS and not the other. I'm currently leaning towards Kali Linux as I can \"arpspoof\" the main server and effectively shut it off for a while.</p>\n"}, {"tags": ["c++", "qt", "utf-8"], "comments": [{"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "edited": false, "score": 2, "creation_date": 1422459861, "post_id": 28196356, "comment_id": 44759381, "body": "(Of course it is your task, but... there is 2015, windows supports utf8 since 20 years ago, maybe would you consider a complete migration to the wonderful world of the unicode?)"}], "owner": {"reputation": 119, "user_id": 787217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eMeTH.jpg?s=128&g=1", "display_name": "TerenceChill", "link": "https://stackoverflow.com/users/787217/terencechill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1422459647, "creation_date": 1422459647, "question_id": 28196356, "link": "https://stackoverflow.com/questions/28196356/qt5-use-latin1-instead-of-utf8-globally", "title": "Qt5 use Latin1 instead of Utf8 globally", "body": "<p>I ported my project from Qt4 to Qt5 and have now the following problem. </p>\n\n<p>Since Qt5 the constructor <code>QString(const char*)</code> assumes that the passed string is Utf8 encoded. That breaks my code because <code>QStrings</code> are often converted to <code>char*</code> (with <code>toLatin1()</code> - for third party library apis) and backwards only with <code>QString(const char*)</code> instead of <code>fromLatin1()</code>.</p>\n\n<p>With the precompiler flags <code>QT_NO_CAST_FROM_ASCII</code> and <code>QT_NO_CAST_TO_ASCII</code> it is possible to spot implicit conversions. But I don't want to refactor my huge project to support Utf8, I'm totally fine with Latin1 encoding. </p>\n\n<p>How can I get the <code>QString</code> constructor work like before in Qt4? Is there a alternative to <code>QTextCodec::setCodecForCStrings</code> which was available in Qt4?</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1422459088, "post_id": 28196098, "comment_id": 44758817, "body": "<code>JohnSmith = &quot;John Smith&quot;;</code> Double quotes, not apostrophes. Curiously, you know enough to write <code>&quot;Hello &quot;</code> and not <code>&#39;Hello &#39;</code>."}, {"owner": {"reputation": 3, "user_id": 4503617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e146b091200a353d92ef07b121c1a65?s=128&d=identicon&r=PG&f=1", "display_name": "Benchevy116", "link": "https://stackoverflow.com/users/4503617/benchevy116"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1422459301, "post_id": 28196098, "comment_id": 44758973, "body": "Oh wow haha, that was careless of me. Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4503617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e146b091200a353d92ef07b121c1a65?s=128&d=identicon&r=PG&f=1", "display_name": "Benchevy116", "link": "https://stackoverflow.com/users/4503617/benchevy116"}, "edited": false, "score": 0, "creation_date": 1422459324, "post_id": 28196161, "comment_id": 44758993, "body": "Thank you haha, this was not explained in my textbook for some reason"}], "tags": [], "owner": {"reputation": 4038, "user_id": 2159939, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/d4Hlu.jpg?s=128&g=1", "display_name": "Ivan Smirnov", "link": "https://stackoverflow.com/users/2159939/ivan-smirnov"}, "is_accepted": false, "score": 2, "last_activity_date": 1422459148, "creation_date": 1422459148, "answer_id": 28196161, "question_id": 28196098, "link": "https://stackoverflow.com/questions/28196098/simple-error-with-string-variables/28196161#28196161", "title": "Simple error with string variables", "body": "<p>In C everything you embrace in single quotes (<code>'c'</code>) is treated as a character. If you want to make a string use double quotes: <code>\"John Smith\"</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": false, "score": 2, "last_activity_date": 1422459994, "last_edit_date": 1422459994, "creation_date": 1422459205, "answer_id": 28196185, "question_id": 28196098, "link": "https://stackoverflow.com/questions/28196098/simple-error-with-string-variables/28196185#28196185", "title": "Simple error with string variables", "body": "<p>The compiler thinks that <code>'John Smith'</code> should be a character because you are using single quotes instead of double quotes. In c++, <code>'x'</code> means a <code>char</code>, whereas <code>\"x\"</code> means a <code>const char[2]</code>, that is a string literal. To use strings, use <code>\"John Smith\"</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1422460664, "creation_date": 1422460664, "answer_id": 28196731, "question_id": 28196098, "link": "https://stackoverflow.com/questions/28196098/simple-error-with-string-variables/28196731#28196731", "title": "Simple error with string variables", "body": "<p>This is because you are using wrong syntax for assigning the string. A string is assigned like <strong>string var= \"John Smith\"</strong> . The syntax you are using is for assigning the character. Like if you want to assign a char to a var then it would be like <strong>char ch = 'A'</strong>.\n     I hope it would help.</p>\n"}], "owner": {"reputation": 3, "user_id": 4503617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e146b091200a353d92ef07b121c1a65?s=128&d=identicon&r=PG&f=1", "display_name": "Benchevy116", "link": "https://stackoverflow.com/users/4503617/benchevy116"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 28196731, "answer_count": 3, "score": 1, "last_activity_date": 1422460664, "creation_date": 1422458995, "last_edit_date": 1422460636, "question_id": 28196098, "link": "https://stackoverflow.com/questions/28196098/simple-error-with-string-variables", "title": "Simple error with string variables", "body": "<p>Ok so I am a beginner to C++, using Visual Express C++ 2010 as my compiler. I have an assignment to create a program that calculates the net pay and budget of John Smith. I should be able to use the string variable 'John Smith', I used #include . I'm not sure why it says that I exceed the character count, because I should be using a string, not a variable. Sorry for the excessive comments, they're required for the assignment. And I'm sure that this is a very basic code format, but as I said, I'm new. Thanks in advance</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>// Module 2 Programming Challenge Right.cpp : Defines the entry point for the console application.\r\n//\r\n\r\n#include \"stdafx.h\"\r\n\r\n\r\n\r\n// This program should calculate the base pay and budget of John Smith\r\n#include &lt;iostream&gt;\r\n#include &lt;string&gt;\r\n\r\nusing namespace std;\r\n\r\nint main()\r\n{\r\n\tint BasePay;  // I am Ben Chilton, this is the Module 2 programming challenge, this was started on 1/26/2015\r\n\tint Commission;  // The purpose of this program is to calculate the gross pay, deductions, net pay, and sales value\r\n\tint GrossPay;   // of the employee John Smith. It also calculates his budget by using his net pay\r\n\tint Deductions;\r\n\tint NetPay;\r\n\tint Sales;\r\n\tint HousingBudget; \r\n\tint FACBudget; // Food and clothes budget\r\n\tint EntBudget; // Entertainment budget\r\n\tint MiscBudget; // Miscellaneous budget\r\n\tstring JohnSmith; //string should have a use? It's not highlighted blue, even though I used \" #include &lt;string&gt; \"\r\n\t\t\t\t\t  // I'm using a string variable here, not character, not sure what the problem is\r\n\tBasePay = 900;\r\n\tSales = 3500;\r\n\tCommission = (Sales * 6) / 100; // He earns 6% commission on sales, hence multiplying by 6 and dividing by 100\r\n\tGrossPay = Commission + BasePay; // Gross pay is his base pay plus his commission on sales\r\n\tDeductions = (GrossPay * 18) / 100; // Again I used multiplication and division to calculate percentages\r\n\tNetPay = GrossPay - Deductions; // His net pay is his gross pay minus his deductions, done here\r\n\tHousingBudget = (NetPay * 30) / 100; // \r\n\tFACBudget = (NetPay * 15) / 100;\r\n\tEntBudget = (NetPay * 50) / 100; // Interesting budget choices haha\r\n\tMiscBudget = (NetPay * 5) / 100;\r\n\r\n\tJohnSmith = 'John Smith';  // Not sure why it is identifying this as a character, not a string\r\n\r\n\tcout &lt;&lt; \"Hello \" &lt;&lt; JohnSmith &lt;&lt; \" . We'll be calculating your income and budget. \\n\";\r\n\tcout &lt;&lt; \"Your base pay is \" &lt;&lt; BasePay &lt;&lt; \" dollars. \\n\";\r\n\tcout &lt;&lt; \"You made \" &lt;&lt; Sales &lt;&lt; \" dollars in sales. \\n\";\r\n\tcout &lt;&lt; \"You earned \" &lt;&lt; Commission &lt;&lt; \" dollars in commission from your sales. \\n\";\r\n\tcout &lt;&lt; \"Your gross pay is \" &lt;&lt; GrossPay &lt;&lt; \" dollars . \\n\";\r\n\tcout &lt;&lt; \"Your deductions are \" &lt;&lt; Deductions &lt;&lt; \" dollars. \\n\";\r\n\tcout &lt;&lt; \"Your net pay is \" &lt;&lt; NetPay &lt;&lt; \" dollars. \\n\";\r\n\tcout &lt;&lt; \"Your housing budget is \" &lt;&lt; HousingBudget &lt;&lt; \" dollars. \\n\";\r\n\tcout &lt;&lt; \"You have \" &lt;&lt; FACBudget &lt;&lt; \" to spend on food and clothes. \\n\";\r\n\tcout &lt;&lt; \"Your budget for entertainment is \" &lt;&lt; EntBudget &lt;&lt; \" dollars. \\n\";\r\n\tcout &lt;&lt; \"That leaves you with \" &lt;&lt; MiscBudget &lt;&lt; \" dollars to spend on anything else. \\n\";\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c++", "gcc", "dll", "mingw"], "comments": [{"owner": {"reputation": 10964, "user_id": 2478565, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/UnOcW.jpg?s=128&g=1", "display_name": "Drew McGowen", "link": "https://stackoverflow.com/users/2478565/drew-mcgowen"}, "edited": false, "score": 1, "creation_date": 1422458787, "post_id": 28195981, "comment_id": 44758604, "body": "What&#39;s wrong with using <code>g++ -shared</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4384812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebb86affcb8a834c9d3d9613f8998c3?s=128&d=identicon&r=PG&f=1", "display_name": "manceb", "link": "https://stackoverflow.com/users/4384812/manceb"}, "is_accepted": false, "score": 0, "last_activity_date": 1422460716, "creation_date": 1422460716, "answer_id": 28196753, "question_id": 28195981, "link": "https://stackoverflow.com/questions/28195981/dllwrap-could-not-work-with-iostream/28196753#28196753", "title": "dllwrap could not work with &lt;iostream&gt;?", "body": "<p>I just tested the a option in dllwrap .It worked well,I will check it further .\nbut i can't find the explaintion in <a href=\"http://oldwiki.mingw.org/index.php/dllwrap\" rel=\"nofollow\">dllwrap old wiki</a></p>\n\n<p>the option is </p>\n\n<blockquote>\n  <p>-lstdc++\n  the new compiler is \n  dllwrap.exe -o hello3.dll hello3.o --def hello3.def  --output-lib\n  libhello3.a -lstdc++</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 4384812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebb86affcb8a834c9d3d9613f8998c3?s=128&d=identicon&r=PG&f=1", "display_name": "manceb", "link": "https://stackoverflow.com/users/4384812/manceb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422460716, "creation_date": 1422458634, "question_id": 28195981, "link": "https://stackoverflow.com/questions/28195981/dllwrap-could-not-work-with-iostream", "title": "dllwrap could not work with &lt;iostream&gt;?", "body": "<p>dllwrap is the tool of the GNU GCC in mingw .It be used to build .dll file like gcc or g++.but I found it did not work well with  like below:</p>\n\n<p>hello3.cpp</p>\n\n<pre><code>#include&lt;iostream&gt;\nextern \"C\"   void MyDllSay( void )\n   {\n   }\n</code></pre>\n\n<p>hello3.def</p>\n\n<pre><code>LIBRARY hello3.dll\nEXPORTS \nMyDllSay               @1 \nhello = MyDllSay     @2 \n</code></pre>\n\n<p>the compiler code is </p>\n\n<blockquote>\n  <p>g++.exe -c -O3 hello3.cpp</p>\n  \n  <p>dllwrap.exe -o hello3.dll hello3.o --def hello3.def  --output-lib\n  libhello3.a</p>\n</blockquote>\n\n<p>the error report is</p>\n\n<blockquote>\n  <p>hello3.o:hello3.cpp:(.text+0x8): undefined reference to\n  <code>std::ios_base::Init::~I nit()'\n  hello3.o:hello3.cpp:(.text.startup+0xc): undefined reference to\n  </code>std::ios_base:: Init::Init()' collect2.exe: error: ld returned 1 exit\n  status</p>\n</blockquote>\n\n<p>if I set the hello3.cpp like this</p>\n\n<pre><code>//#include&lt;iostream&gt;\n#include&lt;fstream&gt;\nextern \"C\"   void MyDllSay( void )\n   {\n\n   }\n</code></pre>\n\n<p>or like this</p>\n\n<pre><code>//#include&lt;iostream&gt;\nextern \"C\"   void MyDllSay( void )\n   {\n\n   }\n</code></pre>\n\n<p>everything is fine.\nHow to make dllwrap work with iostream?</p>\n\n<p>Thanks a lot in advance for any help !</p>\n"}, {"tags": ["c++", "c++11", "casting", "operator-overloading", "overloading"], "comments": [{"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 1, "creation_date": 1422458432, "post_id": 28195848, "comment_id": 44758328, "body": "Show the declaration of <code>foo</code>, I&#39;m pretty sure you ran afoul of the Most Vexing Parse."}, {"owner": {"reputation": 4121, "user_id": 700023, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d419df3f5d81c6248a21b49027b3f23b?s=128&d=identicon&r=PG&f=1", "display_name": "fstab", "link": "https://stackoverflow.com/users/700023/fstab"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1422458539, "post_id": 28195848, "comment_id": 44758403, "body": "I updated the post, with the declaration of <code>foo</code>"}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1422458602, "post_id": 28195848, "comment_id": 44758452, "body": "That declares a function call <code>foo</code> returning a <code>Foo</code> and taking no arguments (<code>()</code>). If you just want a <code>Foo</code> object, declare it as <code>Foo foo;</code>."}, {"owner": {"reputation": 4121, "user_id": 700023, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d419df3f5d81c6248a21b49027b3f23b?s=128&d=identicon&r=PG&f=1", "display_name": "fstab", "link": "https://stackoverflow.com/users/700023/fstab"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1422458688, "post_id": 28195848, "comment_id": 44758512, "body": "Sorry, I omitted the argument to the constructor for simplicity. Now I have fixed that."}], "answers": [{"comments": [{"owner": {"reputation": 4121, "user_id": 700023, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d419df3f5d81c6248a21b49027b3f23b?s=128&d=identicon&r=PG&f=1", "display_name": "fstab", "link": "https://stackoverflow.com/users/700023/fstab"}, "edited": false, "score": 0, "creation_date": 1422458788, "post_id": 28195970, "comment_id": 44758606, "body": "Thanks for your answer. Actually, I omitted the instantiation parameters for the sake of posting a simplification of what I am actually working on. I just fixed it."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 4121, "user_id": 700023, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d419df3f5d81c6248a21b49027b3f23b?s=128&d=identicon&r=PG&f=1", "display_name": "fstab", "link": "https://stackoverflow.com/users/700023/fstab"}, "edited": false, "score": 0, "creation_date": 1422458847, "post_id": 28195970, "comment_id": 44758654, "body": "@fstab: I&#39;ve updated the answer to match your changes."}, {"owner": {"reputation": 4121, "user_id": 700023, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d419df3f5d81c6248a21b49027b3f23b?s=128&d=identicon&r=PG&f=1", "display_name": "fstab", "link": "https://stackoverflow.com/users/700023/fstab"}, "edited": false, "score": 0, "creation_date": 1422458997, "post_id": 28195970, "comment_id": 44758756, "body": "I don&#39;t understand when you say that it&#39;s a function declaration. <code>filename</code> is a <code>const char *</code>, and what I wanted to do is to convert it to a <code>std::string</code> type, before sending it to the <code>Foo</code> constructor (object actually will be stored in the <code>foo</code> variable)"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 4121, "user_id": 700023, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d419df3f5d81c6248a21b49027b3f23b?s=128&d=identicon&r=PG&f=1", "display_name": "fstab", "link": "https://stackoverflow.com/users/700023/fstab"}, "edited": false, "score": 0, "creation_date": 1422459137, "post_id": 28195970, "comment_id": 44758855, "body": "@fstab: It&#39;s a function declaration because that&#39;s how you write a function declaration (with or without <code>()</code> around the parameter name). The conversion to <code>string</code> can be implicit, so <code>Foo foo(filename);</code> will declare the variable you want. If it weren&#39;t, then you&#39;d need one of the more complicated forms at the end of the answer."}, {"owner": {"reputation": 4121, "user_id": 700023, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d419df3f5d81c6248a21b49027b3f23b?s=128&d=identicon&r=PG&f=1", "display_name": "fstab", "link": "https://stackoverflow.com/users/700023/fstab"}, "edited": false, "score": 0, "creation_date": 1422459173, "post_id": 28195970, "comment_id": 44758886, "body": "I followed your advice and instantiated <code>foo</code> with the curly braces. Now I get this error: <code>undefined reference to Foo::Foo(std::string const&amp;)&#39;</code>,but I can assure you that I do have that constructor."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 4121, "user_id": 700023, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d419df3f5d81c6248a21b49027b3f23b?s=128&d=identicon&r=PG&f=1", "display_name": "fstab", "link": "https://stackoverflow.com/users/700023/fstab"}, "edited": false, "score": 0, "creation_date": 1422459223, "post_id": 28195970, "comment_id": 44758917, "body": "@fstab: &quot;undefined reference&quot; means you&#39;ve declared the constructor, but not defined it, or not linked with the file that contains the definition."}], "tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 1, "last_activity_date": 1422458939, "last_edit_date": 1422458939, "creation_date": 1422458612, "answer_id": 28195970, "question_id": 28195848, "link": "https://stackoverflow.com/questions/28195848/cast-to-string-operator-overloading-in-c/28195970#28195970", "title": "cast to string operator overloading in C++", "body": "<blockquote>\n  <p><code>foo</code> is of type <code>Foo</code>, declared and instantiated as <code>Foo foo(std::string(filename))</code></p>\n</blockquote>\n\n<p>That's a function declaration, interpreting <code>filename</code> as the name of a function parameter, equivalent to</p>\n\n<pre><code>Foo foo(std::string filename);\n</code></pre>\n\n<p>A variable declaration would look like</p>\n\n<pre><code>Foo foo(filename);\n</code></pre>\n\n<p>or, if you needed an explicit conversion (which you probably don't here)</p>\n\n<pre><code>Foo foo{std::string(filename)};        // C++11 or later\nFoo foo = Foo(std::string(filename));  // historic dialects\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1422459773, "creation_date": 1422459773, "answer_id": 28196399, "question_id": 28195848, "link": "https://stackoverflow.com/questions/28195848/cast-to-string-operator-overloading-in-c/28196399#28196399", "title": "cast to string operator overloading in C++", "body": "<p>If you question was about the usage of <code>operator const std::string &amp; () const</code>, it is quite simple : this operator is used when you need to convert to a <code>std::string</code>. Example :</p>\n\n<pre><code>Foo foo(filename);\n\nstd::string s = foo; // uses the declared operator const std::string &amp; () const\n</code></pre>\n"}], "owner": {"reputation": 4121, "user_id": 700023, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d419df3f5d81c6248a21b49027b3f23b?s=128&d=identicon&r=PG&f=1", "display_name": "fstab", "link": "https://stackoverflow.com/users/700023/fstab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1249, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1422459773, "creation_date": 1422458340, "last_edit_date": 1422458661, "question_id": 28195848, "link": "https://stackoverflow.com/questions/28195848/cast-to-string-operator-overloading-in-c", "title": "cast to string operator overloading in C++", "body": "<p>I am working on a class that has a method with the following signature:</p>\n\n<pre><code>operator const std::string &amp; () const\n</code></pre>\n\n<p>It's documented as \"cast to string operator\".\nI am wondering how to effectively invoke it. Unfortunately the following expression:</p>\n\n<pre><code>std::string(foo)\n</code></pre>\n\n<p>produces this error:</p>\n\n<pre><code>some_test.cpp:13:41: error: no matching function for call to'\nstd::basic_string&lt;char&gt;::basic_string(Foo (&amp;)(std::string))'\n</code></pre>\n\n<p>Considering that <code>foo</code> is of type <code>Foo</code>, declared and instantiated as <code>Foo foo(std::string(filename))</code></p>\n\n<p>being a begginner of C++, this leaves me a bit confused. Any hints on what this means?</p>\n"}, {"tags": ["c++", "windows", "callback"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1422457940, "post_id": 28195653, "comment_id": 44758023, "body": "It can be a static member function - not that it helps much. There are many different tricks to associate a class instance with an <code>HWND</code> handle - see e.g. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms633568.aspx\" rel=\"nofollow noreferrer\"><code>SetProp</code></a> or <code>SetWindowLongPtr</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1422457999, "post_id": 28195653, "comment_id": 44758070, "body": "<code>static</code> member functions can be used as callback functions without too much effort. Making <code>non-static</code> member function work as callback functions requires creating wrapper functions."}, {"owner": {"reputation": 319, "user_id": 2091066, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d7ebb68241fc561c8141f1c3a0c048b8?s=128&d=identicon&r=PG", "display_name": "Fredrik Boston Westman", "link": "https://stackoverflow.com/users/2091066/fredrik-boston-westman"}, "edited": false, "score": 0, "creation_date": 1422458318, "post_id": 28195653, "comment_id": 44758274, "body": "hmm okay. Well its mainly getting acces to width and height changes im after, without having to do some ugly work around using global variables. I want to create a compact and incapsulated window class"}], "answers": [{"comments": [{"owner": {"reputation": 3783, "user_id": 1731200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ee017760fb073022ed2dc2faaf506516?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1731200/matthias"}, "edited": false, "score": 0, "creation_date": 1502271567, "post_id": 28491549, "comment_id": 78132674, "body": "Does this also work for the callback of DialogBox for instance?"}, {"owner": {"reputation": 3783, "user_id": 1731200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ee017760fb073022ed2dc2faaf506516?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1731200/matthias"}, "edited": false, "score": 0, "creation_date": 1502279845, "post_id": 28491549, "comment_id": 78138700, "body": "It works with DialogBoxParam instead of DialogBox (See: <a href=\"https://www.gamedev.net/forums/topic/691392-windows-callbacks-as-class-members/?tab=comments#comment-5352706\" rel=\"nofollow noreferrer\">gamedev.net/forums/topic/&hellip;</a>)"}], "tags": [], "owner": {"reputation": 71, "user_id": 3054966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4I8PC.jpg?s=128&g=1", "display_name": "Mohit A", "link": "https://stackoverflow.com/users/3054966/mohit-a"}, "is_accepted": true, "score": 3, "last_activity_date": 1423794272, "creation_date": 1423794272, "answer_id": 28491549, "question_id": 28195653, "link": "https://stackoverflow.com/questions/28195653/can-windows-proc-callback-function-be-a-member-function-of-a-class/28491549#28491549", "title": "Can windows proc/callback function be a member function of a class?", "body": "<p>Just like the comments suggest a combination of <code>static</code> member functions and <code>SetWindowLongPtr</code> can be used to achieve what you are looking to do.</p>\n\n<p>Here is a sample class declaration that defines the static <code>WindowProc</code> as a member function.</p>\n\n<pre><code>class MyClass\n{\npublic:\n    void MainThreadProc ();\n\nprivate:\n    static LRESULT CALLBACK WindowProc (HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam);\n    LRESULT _WindowProc (HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam);\n};\n</code></pre>\n\n<p>The MainThreadProc method will create the window. Make sure to pass in <code>this</code> to <code>CreateWindowEx</code> as that is how you will get access to your class members.</p>\n\n<pre><code>void MyClass::MainThreadProc()\n{\n    MSG msg;    \n    HINSTANCE hinstance = GetModuleHandle (NULL);    \n    WNDCLASSEX wcx = {0};\n    HWND hwnd = NULL;\n\n    wcx.cbSize = sizeof wcx;\n    wcx.hInstance = hinstance;\n    wcx.hCursor = LoadCursor (NULL, IDC_NO);\n    wcx.style = CS_HREDRAW | CS_VREDRAW;\n    wcx.hbrBackground = (HBRUSH) (COLOR_WINDOW + 1);\n    wcx.hIcon = LoadIcon (NULL, IDI_APPLICATION);\n    wcx.lpfnWndProc = WindowProc;\n    wcx.lpszClassName = L\"MyWindowClass\";\n\n    RegisterClassEx (&amp;wcx);\n\n    hwnd = CreateWindowEx ( WS_EX_APPWINDOW,\n                            L\"MyWindowClass\",\n                            L\"MyWindow\",\n                            WS_OVERLAPPEDWINDOW,\n                            CW_USEDEFAULT,\n                            CW_USEDEFAULT,\n                            CW_USEDEFAULT,\n                            CW_USEDEFAULT,\n                            NULL,\n                            NULL,\n                            hinstance,\n                            this);\n\n    ShowWindow (hwnd, SW_SHOWDEFAULT);    \n\n    while (GetMessage(&amp;msg, NULL, 0, 0))\n    {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n}\n</code></pre>\n\n<p>In <code>WindowProc</code> you will store the <code>this</code> object using <code>SetWindowLongPtr</code> for future use.</p>\n\n<pre><code>LRESULT MyClass::WindowProc (HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    if (WM_NCCREATE == uMsg)\n    {\n        SetWindowLongPtr (hwnd, GWLP_USERDATA, (LONG_PTR) ((CREATESTRUCT*) lParam)-&gt;lpCreateParams);\n        return TRUE;\n    }\n\n    return ((MyClass*) GetWindowLongPtr (hwnd, GWLP_USERDATA))-&gt;_WindowProc (hwnd, uMsg, wParam, lParam);\n}\n</code></pre>\n\n<p>And for completeness sake, here is the final member function for processing window messages and you will have access to all class members at this point.</p>\n\n<pre><code>LRESULT MyClass::_WindowProc (HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    switch (uMsg)\n    {   \n    case WM_DESTROY:\n        PostQuitMessage (S_OK);\n        break;\n    default:\n        return DefWindowProc (hwnd, uMsg, wParam, lParam);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 2091066, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d7ebb68241fc561c8141f1c3a0c048b8?s=128&d=identicon&r=PG", "display_name": "Fredrik Boston Westman", "link": "https://stackoverflow.com/users/2091066/fredrik-boston-westman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1306, "favorite_count": 0, "accepted_answer_id": 28491549, "answer_count": 1, "score": 1, "last_activity_date": 1423794272, "creation_date": 1422457854, "question_id": 28195653, "link": "https://stackoverflow.com/questions/28195653/can-windows-proc-callback-function-be-a-member-function-of-a-class", "title": "Can windows proc/callback function be a member function of a class?", "body": "<p>When you for example create a window on the screen in windows, you create a callback function to receive message from windows</p>\n\n<pre><code> LRESULT CALLBACK WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)\n</code></pre>\n\n<p>Can you make this function a member function of a class? If so, how do I do it? The reason I would like the callback function to be a member of a class is to have acces to certain variables, while still having the variables incapsulated. For instance where I save the width and height of the window, so if they ever where to be changed I can changed them in the callback function directly.</p>\n\n<p>If not, do you have any suggestions on how I would go about solving this problem, giving the callback function acces to incapsulated variables?</p>\n"}]