[{"tags": ["c++", "call-by-value"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 5, "creation_date": 1570662885, "post_id": 58313411, "comment_id": 102987652, "body": "Can&#39;t be certain without seeing your includes, and/or whether you have <code>using namespace std;</code> in your code, but my guess is, that after you move it after the <code>main</code>: <code>std::swap</code> is being used, instead of your function. Your function doesn&#39;t do the swapping, because values are passed by value, instead of by reference, so it only swaps the copies of those variables."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12110725"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570663238, "post_id": 58313411, "comment_id": 102987713, "body": "I&#39;ve added all the includes now"}, {"owner": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570663281, "post_id": 58313411, "comment_id": 102987715, "body": "to fix your own swap, just change signature to <code>void swap(int&amp; a, int&amp; b)</code> (as @AlgirdasPreid\u017eius said pass by reference)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12110725"}, "edited": false, "score": 0, "creation_date": 1570663421, "post_id": 58313411, "comment_id": 102987740, "body": "Yes, I&#39;m aware of that.  I just wanted to know the reason why swap happened here. Also, can you elaborate on what &quot;swaps the copies of those variables&quot; mean? @a"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1570663497, "post_id": 58313411, "comment_id": 102987759, "body": "@MarshallMathew Due to <code>using namespace std;</code>, the <code>std::swap</code> is being used (even if you didn&#39;t include the header, which defines it: it might have been included by other STL headers), so relevant reading: <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std;\u201d considered bad practice?</a>, and possible(?) duplicate: <a href=\"https://stackoverflow.com/questions/35679436/c-passing-by-reference-or-by-value\">C++ passing by reference or by value?</a>"}, {"owner": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "edited": false, "score": 0, "creation_date": 1570663542, "post_id": 58313411, "comment_id": 102987766, "body": "@MarshallMathew <code>x</code> and <code>y</code> are copied when you pass them into your <code>swap</code> (as <code>a</code> and <code>b</code>), and you swap <code>a</code> and <code>b</code>, not <code>x</code> and <code>y</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1570663571, "post_id": 58313411, "comment_id": 102987772, "body": "Folks, we have an answer section for answers. Thanks."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570663588, "post_id": 58313411, "comment_id": 102987775, "body": "@MarshallMathew &quot;<i>on what &quot;swaps the copies of those variables&quot; mean?</i>&quot; Function takes a copy of variables. Swaps those. Returns. Since swapping was done on the copies, no change is observed outside the function."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1570663757, "post_id": 58313411, "comment_id": 102987812, "body": "@LightnessRacesinOrbit &quot;<i>Folks, we have an answer section for answers. Thanks.</i>&quot; 1) Yes, but my first &quot;answer&quot; was just a guess, before the question was edited to include the missing information. Answers should be answers, not guesses. 2) Even after the edit, I think that this question already has answers somewhere else (which I linked to)."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1570675239, "post_id": 58313411, "comment_id": 102989938, "body": "Moving that <code>swap</code> so it comes after <code>main</code> is a bit of a red herring. Deleting it would have the same effect."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1570700396, "post_id": 58313411, "comment_id": 102999001, "body": "@AlgirdasPreid\u017eius If all you have is a guess, it&#39;s best not to post anything. But deffo don&#39;t do it in the comments where it cannot be peer reviewed. When you already suspect your suggestion is wrong, that&#39;s double-bad. You can simply leave the answering to those who do know and move on to another question that you feel you can answer. :) The comments section is not for providing solutions, confidently or otherwise. Cheers."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1570717015, "post_id": 58313411, "comment_id": 103008612, "body": "@LightnessRacesinOrbit &quot;<i>If all you have is a guess, it&#39;s best not to post anything.</i>&quot; Even if it&#39;s a guess: it&#39;s, most likely, an educated guess. Typically, it is formed, by taking into account similar problems, seen in the past, but without necessary information, in current question, to confirm those. Hence, if you take note of those preconceptions, before stating your guess at a problem: I don&#39;t see anything wrong with doing so, instead of just writing dry, blanket statement of &quot;Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.&quot;"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1570717094, "post_id": 58313411, "comment_id": 103008658, "body": "@LightnessRacesinOrbit &quot;<i>When you already suspect your suggestion is wrong, that&#39;s double-bad.</i>&quot; Why do you think, that I suspect that my suggestion is wrong? I didn&#39;t. I suspected, that my suggestion is right, but the question lacked sufficient information, to confirm it. But, still, in essence, it was just a guess, even if I was 99% sure, that it was the issue observed. And even after the question was edited to include entire information: I feel it&#39;s a question compounded of 3 other questions, already answered on SO, so it&#39;s better to close it as a duplicate, of those, in my opinion."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12110725"}, "edited": false, "score": 0, "creation_date": 1570664670, "post_id": 58313486, "comment_id": 102987976, "body": "Thank you so much."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1570700406, "post_id": 58313486, "comment_id": 102999005, "body": "@MarshallMathew No problem"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 10, "last_activity_date": 1570700480, "last_edit_date": 1570700480, "creation_date": 1570663504, "answer_id": 58313486, "question_id": 58313411, "link": "https://stackoverflow.com/questions/58313411/why-in-this-code-swapping-happens-when-the-swap-function-is-written-after-int/58313486#58313486", "title": "why in this code swapping happens when the &quot;swap&quot; function is written after int main() but not before it?", "body": "<p>Your swap function doesn't really swap anything, because it takes its arguments by value rather than by reference. All you're doing is manipulating variables that are local to that function.</p>\n\n<p>When you don't introduce it until <em>after</em> <code>main</code>, it's not in scope when you call it, so <code>std::swap</code> is used instead. <code>std::swap</code> works correctly.</p>\n\n<p>Although you didn't specifically say <code>std::swap</code>, you wrote <code>using namespace std;</code> which removes that requirement (good reason not to do it!!). And, although you did not <code>#include &lt;algorithm&gt;</code>, you cannot guarantee which standard headers may end up including other ones by virtue of how the implementation is constructed.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12110725"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 58313486, "answer_count": 1, "score": 2, "last_activity_date": 1570700480, "creation_date": 1570662645, "last_edit_date": 1570663215, "question_id": 58313411, "link": "https://stackoverflow.com/questions/58313411/why-in-this-code-swapping-happens-when-the-swap-function-is-written-after-int", "title": "why in this code swapping happens when the &quot;swap&quot; function is written after int main() but not before it?", "body": "<p>So my doubt is, \nI was trying out call by value,\nWhile running the given code, Swapping happens when I write the function definition after int main()\nBut if I cut and paste the function definition above int main(), the swap does not take place. Why is that?</p>\n\n<pre><code>\n#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;vector&gt;\n#include&lt;bitset&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n#define ADDU 1\n#define SUBU 3\n#define AND 4\n#define OR  5\n#define NOR 7\n#define MemSize 65536\nvoid swap(int a, int b)\n{\n    int temp = a;\n    a = b;\n    b = temp;\n}\n\nint main(){\n    // int a = 20;\n    // int *p = &amp;a;\n    // cout&lt;&lt;\"P: \"&lt;&lt;p&lt;&lt;endl&lt;&lt;\"*P gives: \"&lt;&lt;*p&lt;&lt;endl&lt;&lt;\"&amp;p gives: \"&lt;&lt;&amp;p&lt;&lt;endl&lt;&lt;\"&amp;a : \"&lt;&lt;&amp;a;;\n\n    int x,y;\n    x = 10;\n    y = 20;\n    cout&lt;&lt;\"Before Swapping: \"&lt;&lt;\"x: \"&lt;&lt;x&lt;&lt;endl&lt;&lt;\"y: \"&lt;&lt;y&lt;&lt;endl;\n    swap(x,y);\n    cout&lt;&lt;\"After Swapping: \"&lt;&lt;\"x: \"&lt;&lt;x&lt;&lt;endl&lt;&lt;\"y: \"&lt;&lt;y&lt;&lt;endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "linker", "g++", "dead-code"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1570661196, "post_id": 58313143, "comment_id": 102987338, "body": "&quot;most linkers&quot; - What <i>specific</i> code in the first list is incorrectly being... &quot;eliminated&quot; ? Also, linkers don&#39;t eliminate code from &quot;compilation units&quot;; they strip it from link targets. only after ensuring it isn&#39;t referenced. <code>doSomething</code> is clearly referred to in the first listing, so which code are you actually talking about? A <i>real</i> <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would probably go a long way in amplifying your question."}, {"owner": {"reputation": 3329, "user_id": 481760, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f99efa5275015762b790468f2de08741?s=128&d=identicon&r=PG", "display_name": "Ayjay", "link": "https://stackoverflow.com/users/481760/ayjay"}, "edited": false, "score": 1, "creation_date": 1570662058, "post_id": 58313143, "comment_id": 102987487, "body": "After playing around with this code to get it to actually compile (why didn&#39;t you do this?), it seems to work fine. <a href=\"https://godbolt.org/z/GegCyT\" rel=\"nofollow noreferrer\">Godbolt</a>. What&#39;s your actual issue and can you link a code sample that actually demonstrates the problem?"}, {"owner": {"reputation": 33, "user_id": 11322957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567cf2d4ef4983487436af672f0fe5ca?s=128&d=identicon&r=PG", "display_name": "Tomas", "link": "https://stackoverflow.com/users/11322957/tomas"}, "edited": false, "score": 0, "creation_date": 1570740534, "post_id": 58313143, "comment_id": 103019584, "body": "I have created actually working example. It requires multiple files (and apparently also a library), which is why I did not write it in the first place. I apologize for confusing you."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 11322957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567cf2d4ef4983487436af672f0fe5ca?s=128&d=identicon&r=PG", "display_name": "Tomas", "link": "https://stackoverflow.com/users/11322957/tomas"}, "edited": false, "score": 0, "creation_date": 1570740916, "post_id": 58314839, "comment_id": 103019710, "body": "Thanks, I will carefully read the article asap. The question remains: what can I do about it? I know I can add dummy functions (as demonstrated in the new linked repro build), but i would prefer something less cumbersome. Like a function attributes or similar."}, {"owner": {"reputation": 33, "user_id": 11322957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567cf2d4ef4983487436af672f0fe5ca?s=128&d=identicon&r=PG", "display_name": "Tomas", "link": "https://stackoverflow.com/users/11322957/tomas"}, "edited": false, "score": 0, "creation_date": 1570784091, "post_id": 58314839, "comment_id": 103031272, "body": "Thanks for the update. I did not know about the difference before you pointed it out yesterday.  I have really hoped that there is some way to <i>mark</i> the object to <i>always pull it</i> from the code.  I guess I will have to stick with what I have. It is inconvenient, but modifying link commands (especially from cmake) would be even worse. Thanks :D"}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 2, "last_activity_date": 1570745730, "last_edit_date": 1570745730, "creation_date": 1570676438, "answer_id": 58314839, "question_id": 58313143, "link": "https://stackoverflow.com/questions/58313143/selectively-disable-dead-code-elimination-in-a-library/58314839#58314839", "title": "selectively disable dead code elimination in a library", "body": "<blockquote>\n  <p>Unfortunately, most linkers will eliminate all symbols from compilation units if there is no apparent function call into them.</p>\n</blockquote>\n\n<p>You are mistaken: a linker that would do that would be a broken linker. Linkers <em>do not</em> garbage-collect code that registers global constructors or destructors.</p>\n\n<p>What most likely happens is that your object files aren't even selected into the link (not pulled from archive libraries) in the first place. This <a href=\"https://eli.thegreenplace.net/2013/07/09/library-order-in-static-linking\" rel=\"nofollow noreferrer\">post</a> has a good explanation of the algorithm many linkers use to determine what is and isn't selected.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Now that we can see a repro, your <em>actual</em> question has <em>nothing</em> to do with dead code elimination. As I suspected, <code>subscriber.o</code> is simply not pulled in from <code>libsubscriber.a</code>, because the linker finds no reason to do so.</p>\n\n<p>Here is the actual link command:</p>\n\n<pre><code>/usr/bin/c++ -rdynamic CMakeFiles/main.dir/main.cpp.o  -o main libsubscriber.a\n</code></pre>\n\n<p>Here is the command you want to have:</p>\n\n<pre><code>/usr/bin/c++ -rdynamic CMakeFiles/main.dir/main.cpp.o  -o main \\\n  -Wl,--whole-archive libsubscriber.a -Wl,--nowhole-archive\n</code></pre>\n\n<p>I don't know how to achieve that with CMake, sorry.</p>\n\n<p>Alternatively, you could also achieve desired effect with:</p>\n\n<pre><code>/usr/bin/c++ -rdynamic CMakeFiles/main.dir/main.cpp.o  -o main \\\n -u _Z19forceLinkSubscriberv libsubscriber.a\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11322957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567cf2d4ef4983487436af672f0fe5ca?s=128&d=identicon&r=PG", "display_name": "Tomas", "link": "https://stackoverflow.com/users/11322957/tomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 58314839, "answer_count": 1, "score": 0, "last_activity_date": 1570745730, "creation_date": 1570660478, "last_edit_date": 1570740969, "question_id": 58313143, "link": "https://stackoverflow.com/questions/58313143/selectively-disable-dead-code-elimination-in-a-library", "title": "selectively disable dead code elimination in a library", "body": "<p>I have many cpp files, some of which have functions to self-subscribe to events. Unfortunately, most linkers will eliminate all symbols from compilation units if there is no apparent function call into them. Is there a way to force linking of these subscription functions? I do not want to disable dead code stripping entirely, because I might miss a lot of opportunities from the other translation units.</p>\n\n<p>Subscriber.cpp:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Event &amp;someEvent();\n\nvoid doSomething()\n{\n  printf(\"doing something\\n\");\n}\n\nclass Initializer\n{\n  public: Initializer()\n  {\n    // I need this function to be kept\n    someEvent().subscribe(&amp;doSomething);\n  }\n} initializer;\n</code></pre>\n\n<p>Main.cpp:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Event &amp;someEvent();\n\nint main()\n{\n  someEvent().dispatch();\n}\n</code></pre>\n\n<p>Thanks</p>\n\n<h2>EDIT:</h2>\n\n<p>Here is a repro build: <a href=\"https://github.com/malytomas/deadCodeElimination\" rel=\"nofollow noreferrer\">https://github.com/malytomas/deadCodeElimination</a>\n(Thanks Ayjay for help, even if his/her example does not reproduce the problem.)</p>\n\n<p>The problem happens only with libraries.\n(Thanks Employed Russian for bringing this up.)</p>\n"}, {"tags": ["c++", "c++11", "stdvector", "move-semantics"], "comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1570662318, "post_id": 58313096, "comment_id": 102987529, "body": "@Fureeish These are not the same type of errors. Yours disappears in GNU gcc8.2, this one doesn&#39;t"}], "answers": [{"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1570663950, "post_id": 58313497, "comment_id": 102987843, "body": "I found your talk <a href=\"https://youtu.be/vLinb2fgkHk\" rel=\"nofollow noreferrer\">Everything you ever wanted to know about move semantics</a> most insightful. This is straight from that table. ++1"}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 10, "last_activity_date": 1570663616, "creation_date": 1570663616, "answer_id": 58313497, "question_id": 58313096, "link": "https://stackoverflow.com/questions/58313096/defining-destructor-in-a-class-derived-from-move-only-type-gives-compile-time-er/58313497#58313497", "title": "defining destructor in a class derived from move-only type gives compile-time error when created with emplace_back or push_back of std::vector", "body": "<p>Verify your expectations of <em>CopyConstructible</em> and <em>MoveConstructible</em> with <code>static_assert</code>s:</p>\n\n<pre><code>static_assert(!std::is_copy_constructible&lt;A&gt;{});\nstatic_assert( std::is_move_constructible&lt;A&gt;{});\n\nstatic_assert(!std::is_copy_constructible&lt;B&gt;{});\nstatic_assert(!std::is_move_constructible&lt;B&gt;{});\n</code></pre>\n\n<p>When <code>~B()</code> is declared, the compiler implicitly deletes <code>B(B&amp;&amp;)</code>.  You can override that behavior with an explicit declaration:</p>\n\n<pre><code>B(B&amp;&amp;) = default;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "is_accepted": false, "score": 1, "last_activity_date": 1570663736, "creation_date": 1570663736, "answer_id": 58313505, "question_id": 58313096, "link": "https://stackoverflow.com/questions/58313096/defining-destructor-in-a-class-derived-from-move-only-type-gives-compile-time-er/58313505#58313505", "title": "defining destructor in a class derived from move-only type gives compile-time error when created with emplace_back or push_back of std::vector", "body": "<p>Adding anything to the <code>std::vector</code> may potentially cause reallocation of the whole vector. For this to succeed the class needs to provide either:</p>\n\n<ul>\n<li>copy constructor</li>\n<li>noexcept move constructor</li>\n</ul>\n\n<p>When <code>~B</code> is present, your class <code>B</code> provides neither. With the <code>using</code> clause it knows how to move <code>B(A&amp;&amp;)</code> but that's not a move constructor.</p>\n"}], "owner": {"reputation": 71, "user_id": 2420567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc69f4b9cff69751479c87a3eba6c5c?s=128&d=identicon&r=PG", "display_name": "Aneel", "link": "https://stackoverflow.com/users/2420567/aneel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 1, "accepted_answer_id": 58313497, "answer_count": 2, "score": 6, "last_activity_date": 1570663736, "creation_date": 1570660228, "last_edit_date": 1570663286, "question_id": 58313096, "link": "https://stackoverflow.com/questions/58313096/defining-destructor-in-a-class-derived-from-move-only-type-gives-compile-time-er", "title": "defining destructor in a class derived from move-only type gives compile-time error when created with emplace_back or push_back of std::vector", "body": "<p>Removing the comment from following code gives a compile time error. It seems that defining the destructor in derived class is causing the copy constructor to be called in emplace_back</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;vector&gt;\n\nstruct A\n{\n    A() = default;\n    A( A&amp; ) = delete;\n    A&amp; operator=( A&amp; ) = delete;\n    A( A&amp;&amp; ) = default;\n    A&amp; operator=( A&amp;&amp; ) = default;\n    ~A(){};\n};\n\nstruct B : public A\n{\n    using A::A;\n    //~B() = default; //ERROR\n};\n\nint main()\n{\n    std::vector&lt; B &gt; list;\n    for( int ii = 0; ii &lt; 3; ii++ ) { list.emplace_back(); }\n    return 0;\n}\n</code></pre>\n\n<p>The error is:</p>\n\n<pre><code>In file included from /usr/include/c++/5/vector:62:0,\n                 from a.cpp:1:\n/usr/include/c++/5/bits/stl_construct.h: In instantiation of \u2018void std::_Construct(_T1*, _Args&amp;&amp; ...) [with _T1 = B; _Args = {B}]\u2019:\n/usr/include/c++/5/bits/stl_uninitialized.h:75:18:   required from \u2018static _ForwardIterator std::__uninitialized_copy&lt;_TrivialValueTypes&gt;::__uninit_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = std::move_iterator&lt;B*&gt;; _ForwardIterator = B*; bool _TrivialValueTypes = false]\u2019\n/usr/include/c++/5/bits/stl_uninitialized.h:126:15:   required from \u2018_ForwardIterator std::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = std::move_iterator&lt;B*&gt;; _ForwardIterator = B*]\u2019\n/usr/include/c++/5/bits/stl_uninitialized.h:281:37:   required from \u2018_ForwardIterator std::__uninitialized_copy_a(_InputIterator, _InputIterator, _ForwardIterator, std::allocator&lt;_Tp&gt;&amp;) [with _InputIterator = std::move_iterator&lt;B*&gt;; _ForwardIterator = B*; _Tp = B]\u2019\n/usr/include/c++/5/bits/stl_uninitialized.h:303:2:   required from \u2018_ForwardIterator std::__uninitialized_move_if_noexcept_a(_InputIterator, _InputIterator, _ForwardIterator, _Allocator&amp;) [with _InputIterator = B*; _ForwardIterator = B*; _Allocator = std::allocator&lt;B&gt;]\u2019\n/usr/include/c++/5/bits/vector.tcc:422:8:   required from \u2018void std::vector&lt;_Tp, _Alloc&gt;::_M_emplace_back_aux(_Args&amp;&amp; ...) [with _Args = {}; _Tp = B; _Alloc = std::allocator&lt;B&gt;]\u2019\n/usr/include/c++/5/bits/vector.tcc:101:23:   required from \u2018void std::vector&lt;_Tp, _Alloc&gt;::emplace_back(_Args&amp;&amp; ...) [with _Args = {}; _Tp = B; _Alloc = std::allocator&lt;B&gt;]\u2019\na.cpp:24:57:   required from here\n/usr/include/c++/5/bits/stl_construct.h:75:7: error: invalid initialization of non-const reference of type \u2018B&amp;\u2019 from an rvalue of type \u2018B\u2019\n     { ::new(static_cast&lt;void*&gt;(__p)) _T1(std::forward&lt;_Args&gt;(__args)...); }\n       ^\na.cpp:15:8: note:   initializing argument 1 of \u2018B::B(B&amp;)\u2019\n struct B : public A\n        ^\n</code></pre>\n\n<p>I am using the base class like A for managing HANDLEs, and want to define destructor in derived class mostly for debugging purposes. For now I am using smart pointers in vectors to avoid this issue.</p>\n\n<p>I am wondering what is causing this and how to fix this by either changes in code or using more suitable container. Any help is appreciated.</p>\n\n<p>Edit:\nI am compiling with <code>g++ -std=c++11</code> g++ version <code>g++ (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609</code></p>\n"}, {"tags": ["c++", "sse", "intrinsics", "avx"], "comments": [{"owner": {"reputation": 1629, "user_id": 2927848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e21a18807ebac8e078272cfdeb6b7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chase R Lewis", "link": "https://stackoverflow.com/users/2927848/chase-r-lewis"}, "edited": false, "score": 0, "creation_date": 1570658982, "post_id": 58312904, "comment_id": 102986798, "body": "To  mask at runtime you would need to load the values into register then perform a masking operation on them (such as an &#39;AND&#39; operation) with a mask you make. You won&#39;t be able to modify your actual instructions executed by the cpu at runtime."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1570659047, "post_id": 58312904, "comment_id": 102986822, "body": "<a href=\"https://stackoverflow.com/questions/36488675/is-there-an-inverse-instruction-to-the-movemask-instruction-in-intel-avx2/36491672\" title=\"is there an inverse instruction to the movemask instruction in intel avx2\">stackoverflow.com/questions/36488675/&hellip;</a>"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1570659479, "post_id": 58312904, "comment_id": 102986919, "body": "Do you have <b>AVX512F</b> and <b>AVX512VL</b> ?"}, {"owner": {"reputation": 906, "user_id": 9007125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/4IA0y.jpg?s=128&g=1", "display_name": "Kari", "link": "https://stackoverflow.com/users/9007125/kari"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1570659635, "post_id": 58312904, "comment_id": 102986957, "body": "@walter, nope, only AVX with <code>m256</code>"}, {"owner": {"reputation": 4933, "user_id": 8217180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9621a549160f738b81303a4a008ddd50?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Ribizel", "link": "https://stackoverflow.com/users/8217180/tobias-ribizel"}, "edited": false, "score": 0, "creation_date": 1570660397, "post_id": 58312904, "comment_id": 102987133, "body": "If your mask is already stored as a <code>m256</code>, you can use the <code>blendv</code> intrinsics with a zero vector. Otherwise, you would probably have to build the mask by hand, as Walter&#39;s answer shows"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1570679245, "post_id": 58312904, "comment_id": 102990814, "body": "Updated my answer on the linked duplicate with an intrinsics version.  It&#39;s <i>much</i> more efficient than the <code>setr</code> answer with scalar bit tests given here.  Obviously use it to get a mask and apply with <code>_mm256_and_ps</code> because <code>0.0 &amp; anything</code> is <code>0.0</code>, i.e. normal SIMD masking."}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 3, "creation_date": 1570660444, "post_id": 58313107, "comment_id": 102987145, "body": "You can do <i>much</i> better for the inverse of movemask using SIMD instead of <code>_mm_set</code>/<code>setr</code>.  Will google when I have time."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1570680496, "post_id": 58313107, "comment_id": 102991085, "body": "Your version is pretty much a performance disaster with GCC9.2 (everything scalar and then insert each mask separately into a vector), and not much better with clang9.0. <a href=\"https://godbolt.org/z/m7elLc\" rel=\"nofollow noreferrer\">godbolt.org/z/m7elLc</a>  (Although clang does come up with some interesting stuff like doing one half of the bitmap with SIMD integer multiply by large single-bit constants, and using <code>vpsrad</code> for one half).  Still, these are <i>much</i> worse than using a 256-bit AND + FP compare to check for matching FP bit-patterns."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 0, "last_activity_date": 1570661055, "last_edit_date": 1570661055, "creation_date": 1570660261, "answer_id": 58313107, "question_id": 58312904, "link": "https://stackoverflow.com/questions/58312904/simd-sse-avx-mask-8-floats-by-unsigned-char/58313107#58313107", "title": "SIMD, SSE, AVX - mask 8 floats by unsigned char?", "body": "<p>If you had AVX512F and AVX512VL you could use this:</p>\n\n<pre><code>auto input    = _mm256_set1_ps(5.0f);\n__mmask8 mask = 0b10101010;\nauto masked   = _mm256_maskz_mov_ps(mask,input);\n</code></pre>\n\n<p>Otherwise, you must use the bitwise, when you first must find a way to 'unpack' the 8-bits into 8 32-bit fields of an <code>__m256</code>, for example</p>\n\n<pre><code>static constexpr int32_t all_mask=int(0xffffffff);\naudo tmp      = _mm256_setr_epi32(mask&amp;1 ? all_mask:0, mask&amp;2  ? all_mask:0,\n                                  mask&amp;4 ? all_mask:0, mask&amp;8  ? all_mask:0,\n                                  mask&amp;16? all_mask:0, mask&amp;32 ? all_mask:0,\n                                  mask&amp;64? all_mask:0, mask&amp;128? all_mask:0);\nauto masked   = _mm256_and_ps(tmp,input);\n</code></pre>\n\n<p>(I may have confused <code>_mm256_setr_epi32</code> and <code>_mm256_set_epi32</code>.) There is presumably a faster way to unpack the mask, see <a href=\"https://stackoverflow.com/a/36491672/1023390\">this answer</a>.</p>\n\n<p>In other words, in this case it's perhaps better to never use a 8-bit integer ask mask, but directly use <code>__m256</code> or <code>__m256i</code>.</p>\n"}], "owner": {"reputation": 906, "user_id": 9007125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/4IA0y.jpg?s=128&g=1", "display_name": "Kari", "link": "https://stackoverflow.com/users/9007125/kari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "closed_date": 1570679137, "answer_count": 1, "score": 0, "last_activity_date": 1570661055, "creation_date": 1570658763, "last_edit_date": 1570659614, "question_id": 58312904, "link": "https://stackoverflow.com/questions/58312904/simd-sse-avx-mask-8-floats-by-unsigned-char", "closed_reason": "Duplicate", "title": "SIMD, SSE, AVX - mask 8 floats by unsigned char?", "body": "<p>How can I mask 8 floats in my <code>__m256</code> variable via bits in my <code>unsigned char</code> variable? (their values are not known during compilation)</p>\n\n<pre><code>__m256 flts = _mm256_set1_ps(5.0f);\nunsigned char = 0b10010111;//just for example, but can be any value during runtime\n</code></pre>\n\n<p>Desired output would have <code>flts</code> contain 5, 0, 0, 5, 0, 5, 5, 5</p>\n\n<p>Is there an efficient instruction on <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/\" rel=\"nofollow noreferrer\">Intel Intrinsics Guide</a>?</p>\n\n<p>Processor only supports instructions up to AVX (but not AVX2 or beyond)</p>\n"}, {"tags": ["c++", "arrays", "file", "stream", "fstream"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1570659415, "post_id": 58312868, "comment_id": 102986903, "body": "What does the file actually look like, and what are you having trouble with exactly? Please be more specific. Also, your <code>if</code> statements have erroneous <code>;</code> on them. Also, see <a href=\"https://stackoverflow.com/questions/5605125/\">Why is iostream::eof inside a loop condition considered wrong?</a>."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1570670724, "post_id": 58312868, "comment_id": 102989044, "body": "Your code has so many errors in it that your best next step might be to <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">do some debugging</a> on your own. Once you see the more specific problems, see if they are already addressed on SO, and ask for a solution if they are not."}], "answers": [{"tags": [], "owner": {"reputation": 4394, "user_id": 11218687, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q9OQOfewRmE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6UauF-z1wrWfcYS38osHELYqJMA/mo/photo.jpg?sz=128", "display_name": "Dmitry Kuzminov", "link": "https://stackoverflow.com/users/11218687/dmitry-kuzminov"}, "is_accepted": false, "score": 0, "last_activity_date": 1570660763, "last_edit_date": 1570660763, "creation_date": 1570660274, "answer_id": 58313109, "question_id": 58312868, "link": "https://stackoverflow.com/questions/58312868/how-to-obtain-the-whole-integers-from-file-has-strings-and-integers-and-store-th/58313109#58313109", "title": "How to obtain the whole integers from file has strings and integers and store them into array in C++?", "body": "<p>First observation: you iterate out of bounds of the array:</p>\n\n<pre><code>int digits[20];\nfor (int i = 0; i &lt;= 20; i++)\n</code></pre>\n\n<p>20 elements and 21 iteration. That is an undefined behavior, so everything is possible here (if your program eventually gets here).</p>\n\n<p>Next, you read from file once and then you have an infinite loop because the expression <code>!file1.eof()</code> is either true or false for the rest of the program run. Isn't that the reason of \"output stops\"?</p>\n\n<p>The third finding: your <code>if</code> statements are useless because of the semicolon after the statement:</p>\n\n<pre><code>if(('0' &lt;= contents &amp;&amp; contents &lt;= '9') &amp;&amp; ('0' &gt;= contents+1 &amp;&amp; contents+1 &gt; '9'));\n            digits[n]=contents;\n</code></pre>\n\n<p>You just assign <code>digits[n]=contents;</code> without any check.</p>\n\n<p>I neither see any reason of providing a reference to char in the function. Why not to make it a local variable?</p>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 11558385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bb5b8d8d2b06d5385b3b6f7538b0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Josh W.", "link": "https://stackoverflow.com/users/11558385/josh-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1570663749, "creation_date": 1570663749, "answer_id": 58313506, "question_id": 58312868, "link": "https://stackoverflow.com/questions/58312868/how-to-obtain-the-whole-integers-from-file-has-strings-and-integers-and-store-th/58313506#58313506", "title": "How to obtain the whole integers from file has strings and integers and store them into array in C++?", "body": "<p>You will need first to add <code>get()</code> functionality inside the loop as well in order to reach end of file.</p>\n\n<p>Forthmore try to add a while loop once a <code>char</code> was found to be an integer to continue in asking for the next character.</p>\n\n<p>e.g. </p>\n\n<pre><code>int digits[20];\nint i = 0;\nifstream file1(\"filepath\");\nchar contents;\nwhile (!file1.eof())\n{\n    file1.get(contents); // get the next character\n\n    if (contents &lt;= '9' &amp;&amp; contents &gt;= '0' &amp;&amp; i &lt; 20) // if character is in number range\n    {\n        digits[i++] = contents - '0'; // converting the chat to the right integer\n        file1.get(contents);\n\n        while (contents &lt;= '9' &amp;&amp; contents &gt;= '0' &amp;&amp; i &lt; 20) // while is integer continue on\n        {\n            digits[i++] = contents - '0';\n            file1.get(contents);\n        }\n    }\n}\n\n// do other stuff here\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 12191649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c14a29127065f1482380db33360737?s=128&d=identicon&r=PG&f=1", "display_name": "Mar", "link": "https://stackoverflow.com/users/12191649/mar"}, "edited": false, "score": 0, "creation_date": 1570744723, "post_id": 58314472, "comment_id": 103020990, "body": "Thanks! That&#39;s the solution I was looking for!"}], "tags": [], "owner": {"reputation": 90, "user_id": 10479218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f72eb4361198f4a39d3dd3ecfae46e?s=128&d=identicon&r=PG&f=1", "display_name": "Giuliano", "link": "https://stackoverflow.com/users/10479218/giuliano"}, "is_accepted": true, "score": 0, "last_activity_date": 1570749712, "last_edit_date": 1570749712, "creation_date": 1570673194, "answer_id": 58314472, "question_id": 58312868, "link": "https://stackoverflow.com/questions/58312868/how-to-obtain-the-whole-integers-from-file-has-strings-and-integers-and-store-th/58314472#58314472", "title": "How to obtain the whole integers from file has strings and integers and store them into array in C++?", "body": "<p>You have to deal with the number of digits of the number found:</p>\n\n<pre><code>int digits[20];\nint i = 0;\nshort int aux[3]; // to format each digit of the numbers\n\nifstream file1(\"filepath\");\nchar contents;\n\nfile1.get(contents); //first char\n\nif (!file1.eof()) //test if you have only one char in the file\n{\n    while (!file1.eof() &amp;&amp; i &lt; 20) // limit added to read only 20 numbers\n    {\n        if (contents &lt;= '9' &amp;&amp; contents &gt;= '0') // if character is in number range\n        {\n            aux[0] = contents - '0'; // converting the char to the right integer\n            file1.get(contents);\n\n            if (contents &lt;= '9' &amp;&amp; contents &gt;= '0') // if contents is number, continue on\n            {\n                aux[1] = contents - '0';\n\n                if (!file1.eof()) // if has mor char to read, continue on\n                {\n                    file1.get(contents);\n\n                    if (contents &lt;= '9' &amp;&amp; contents &gt;= '0') // if is integer, continue on\n                    {\n                        aux[2] = contents - '0';\n                        file1.get(contents); // will read same of last char if eof, but will have no effect at all\n                        //aux[0] *= 100; // define houndred\n                        //aux[1] *= 10; // define ten\n                        digits[i++] = (aux[0] * 100) + (aux[1] * 10) + aux[2];\n                    }\n                    else\n                    {\n                        //aux[0] *= 10; // define ten\n                        digits[i++] = (aux[0] * 10) + aux[1];\n                    }\n                }\n                else\n                {\n                    digits[i++] = (aux[0] * 10) + aux[1];\n                }\n            }\n            else\n            {\n                digits[i++] = aux[0];\n            }\n        }\n    }\n}\nelse if (contents &lt;= '9' &amp;&amp; contents &gt;= '0' &amp;&amp; i &lt; 20) // check if the only one char is number\n{\n    digits[i++} = contents - '0';\n}\n</code></pre>\n\n<p>If you want read an undefined size number, then you will have to allocate memory to format each digit of the numers with new (c++) or malloc(c/c++).</p>\n"}], "owner": {"reputation": 43, "user_id": 12191649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c14a29127065f1482380db33360737?s=128&d=identicon&r=PG&f=1", "display_name": "Mar", "link": "https://stackoverflow.com/users/12191649/mar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 58314472, "answer_count": 3, "score": 0, "last_activity_date": 1570749712, "creation_date": 1570658543, "last_edit_date": 1570659532, "question_id": 58312868, "link": "https://stackoverflow.com/questions/58312868/how-to-obtain-the-whole-integers-from-file-has-strings-and-integers-and-store-th", "title": "How to obtain the whole integers from file has strings and integers and store them into array in C++?", "body": "<p>I want to obtain integers from file that has strings too, and store them into array to do some operation on them. the integers can be 1 or 12 or 234, so 3 digits. I am trying to do that but the output stops when I run the code</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void GetNumFromFile (ifstream &amp;file1, char &amp; contents)\n{\n    int digits[20];\n    file1.get(contents);\n    while(!file1.eof())\n    {\n        for (int n = 0; n &lt; 10; n++)\n        {\n            if(('0' &lt;= contents &amp;&amp; contents &lt;= '9') &amp;&amp; ('0' &gt;= contents+1 &amp;&amp; contents+1 &gt; '9'));\n            digits[n]=contents;\n            if(('0' &lt;= contents &amp;&amp; contents &lt;= '9') &amp;&amp; ('0' &lt;= contents+1 &amp;&amp; contents+1 &lt; '9'));\n            digits[n]=contents;\n            if(('0' &lt;= contents &amp;&amp; contents &lt;= '9') &amp;&amp; ('0' &lt;= contents+1 &amp;&amp; contents+1 &lt;= '9') &amp;&amp; ('0' &lt;= contents+2 &amp;&amp; contents+2 &lt; '9'));\n            digits[n]=contents;\n        }\n        continue;\n    }\n    for (int i = 0; i &lt;= 20; i++)\n    {\n        cout &lt;&lt; *(digits + i) &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "compilation", "g++"], "answers": [{"comments": [{"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1570659718, "post_id": 58312987, "comment_id": 102986983, "body": "And there is nothing preventing use of C run-time library functions (like the named strcpy_s) in C++. It may run afoul of local coding guidelines but it is certainly legal within the language."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 2, "last_activity_date": 1570659331, "creation_date": 1570659331, "answer_id": 58312987, "question_id": 58312861, "link": "https://stackoverflow.com/questions/58312861/compile-c-shared-object-with-c-files/58312987#58312987", "title": "Compile C shared object with C++ files", "body": "<p>Sure, you can <strong>link</strong> your C++ program with your shared C library. Just make sure that you tell the C++ compiler that the functions in that library have C linkage by adding <code>extern \"C\" { ... }</code> around the functions in your C library's header file:</p>\n\n<p><em>shared_c_lib.h</em></p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n// all your C functions declarations/prototypes\n\n#ifdef __cplusplus\n} // extern \"C\"\n#endif\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8473360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2f5495d4748c47a9882e51f2d08df0?s=128&d=identicon&r=PG&f=1", "display_name": "Shirakawa42", "link": "https://stackoverflow.com/users/8473360/shirakawa42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 58312987, "answer_count": 1, "score": 1, "last_activity_date": 1570659331, "creation_date": 1570658488, "question_id": 58312861, "link": "https://stackoverflow.com/questions/58312861/compile-c-shared-object-with-c-files", "title": "Compile C shared object with C++ files", "body": "<p>I have a C shared object (.so file) and i can only compile it using gcc because it uses C only functions like strcpy_s.</p>\n\n<p>And i have a C++ code that contain some C++ only libraries.</p>\n\n<p>Is that possible to compile the shared object with gcc and my code with g++ together ?</p>\n"}, {"tags": ["c++", "neural-network"], "answers": [{"comments": [{"owner": {"reputation": 1779, "user_id": 1862823, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/134ae6e532080f6012f7d24f6c843428?s=128&d=identicon&r=PG", "display_name": "NeomerArcana", "link": "https://stackoverflow.com/users/1862823/neomerarcana"}, "edited": false, "score": 0, "creation_date": 1570660976, "post_id": 58313190, "comment_id": 102987270, "body": "welcome to Stackoverflow. I sort of thought that the XOR problem couldn&#39;t have local minima, only global minima? In any case, what else can I do?"}, {"owner": {"reputation": 1779, "user_id": 1862823, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/134ae6e532080f6012f7d24f6c843428?s=128&d=identicon&r=PG", "display_name": "NeomerArcana", "link": "https://stackoverflow.com/users/1862823/neomerarcana"}, "edited": false, "score": 0, "creation_date": 1570662736, "post_id": 58313190, "comment_id": 102987620, "body": "I tried lowering the learning rate to both <code>0.002</code> and <code>0.01</code> but I get similar results still. Simliar meaning that sometimes it just doesn&#39;t classify correctly. When you say it&#39;s an empirical process etc, do you mean to say that sometimes your network just doesn&#39;t work (I assume because the random starting weights) and so you just need to try again? If so, surely there&#39;s a better way to initiate the weights. Could you double-check my backprop is correct?"}, {"owner": {"reputation": 2416, "user_id": 12188799, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x2Us7lDjK_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdbvJBo6jnFH2eAReBMTWM_XkFHSw/photo.jpg?sz=128", "display_name": "Javier Silva Ort&#237;z", "link": "https://stackoverflow.com/users/12188799/javier-silva-ort%c3%adz"}, "reply_to_user": {"reputation": 1779, "user_id": 1862823, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/134ae6e532080f6012f7d24f6c843428?s=128&d=identicon&r=PG", "display_name": "NeomerArcana", "link": "https://stackoverflow.com/users/1862823/neomerarcana"}, "edited": false, "score": 0, "creation_date": 1570664603, "post_id": 58313190, "comment_id": 102987960, "body": "By empirical I mean just that. Finding the optimal initial weight values is an open question. You&#39;re code works fine, I tested it. I ran several training sessions with the only difference being the weight values, got results like yours. It proves you don&#39;t have a problem, it&#39;s just the network being annoying as sometimes they are, even simple ones. Train one that gives correct results and keep it. Again, you have no issues."}, {"owner": {"reputation": 1779, "user_id": 1862823, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/134ae6e532080f6012f7d24f6c843428?s=128&d=identicon&r=PG", "display_name": "NeomerArcana", "link": "https://stackoverflow.com/users/1862823/neomerarcana"}, "edited": false, "score": 0, "creation_date": 1570664780, "post_id": 58313190, "comment_id": 102987996, "body": "in that case how does something like reinforcement learning work, or generative adversarial networks? For example, if I was unlucky to have bad initial weights in a network that I was using reinforcement learning, how would I ever know? In GAN, if one of the two networks had bad initial weights, wouldn&#39;t it invalidate everything they do?"}, {"owner": {"reputation": 2416, "user_id": 12188799, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x2Us7lDjK_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdbvJBo6jnFH2eAReBMTWM_XkFHSw/photo.jpg?sz=128", "display_name": "Javier Silva Ort&#237;z", "link": "https://stackoverflow.com/users/12188799/javier-silva-ort%c3%adz"}, "reply_to_user": {"reputation": 1779, "user_id": 1862823, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/134ae6e532080f6012f7d24f6c843428?s=128&d=identicon&r=PG", "display_name": "NeomerArcana", "link": "https://stackoverflow.com/users/1862823/neomerarcana"}, "edited": false, "score": 0, "creation_date": 1570667408, "post_id": 58313190, "comment_id": 102988488, "body": "Those type of networks are very different from the simple multilayer perceptron you designed. Short answer for reinforcement learning and GANs, you don&#39;t need to know if you had bad initial weights, and it does not invalidate anything they do, those networks modify the weights in a different way and according to a different criteria than just mere gradient descent. Think of them as providing a means of &quot;self healing&quot;."}], "tags": [], "owner": {"reputation": 2416, "user_id": 12188799, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x2Us7lDjK_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdbvJBo6jnFH2eAReBMTWM_XkFHSw/photo.jpg?sz=128", "display_name": "Javier Silva Ort&#237;z", "link": "https://stackoverflow.com/users/12188799/javier-silva-ort%c3%adz"}, "is_accepted": true, "score": 1, "last_activity_date": 1570717467, "last_edit_date": 1570717467, "creation_date": 1570660835, "answer_id": 58313190, "question_id": 58312806, "link": "https://stackoverflow.com/questions/58312806/is-this-overfitting-or-underfitting-on-an-xor-test/58313190#58313190", "title": "Is this overfitting or underfitting on an XOR test?", "body": "<p>You have done nothing wrong. Notice that you get different results even after training your network with the same amount of epochs and training data. Overfitting would be the cause if you would have used more epochs and/or training data in the network that works wrong. Underfitting is the opposite of that. You don't have underfitting, and you don't have overfitting. You could try to lower your learning rate by an order of magnitude or ar least by half, increase it, change training function or add momentum. It is important for you to know that neural networks is a very empirical process, if your trained network passes validation then it's ok, if not then tweak it a bit and retrain or just retrain. There is no closed form formula, solution or recipe for their design.</p>\n"}], "owner": {"reputation": 1779, "user_id": 1862823, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/134ae6e532080f6012f7d24f6c843428?s=128&d=identicon&r=PG", "display_name": "NeomerArcana", "link": "https://stackoverflow.com/users/1862823/neomerarcana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 58313190, "answer_count": 1, "score": 0, "last_activity_date": 1570717467, "creation_date": 1570658057, "last_edit_date": 1570661172, "question_id": 58312806, "link": "https://stackoverflow.com/questions/58312806/is-this-overfitting-or-underfitting-on-an-xor-test", "title": "Is this overfitting or underfitting on an XOR test?", "body": "<p>I have the following Neural Network code, I'm just trying to work my way up from basic problems, such as the XOR problem, while building up a codebase. This is a hobby project.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;random&gt;\n#include &lt;chrono&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;iomanip&gt;\n\ntypedef float DataType;\ntypedef DataType (*ActivationFuncPtr)(const DataType&amp;);\n\nstatic DataType learningRate = 0.02;\nstatic std::size_t numberEpochs = 1000000;\n\nDataType sigmoid(const DataType&amp; x)\n{\n    return DataType(1) / (DataType(1) + std::exp(-x));\n}\n\ntemplate&lt;typename T&gt;\nclass Random\n{\npublic:\n    T operator()()\n    {\n        return m_dis(m_mt);\n    }\n\nprotected:\n    static std::mt19937 m_mt;\n    static std::uniform_real_distribution&lt;T&gt; m_dis;\n};\n\ntemplate&lt;typename T&gt; std::mt19937 Random&lt;T&gt;::m_mt(std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::system_clock::now().time_since_epoch()).count());\ntemplate&lt;typename T&gt; std::uniform_real_distribution&lt;T&gt; Random&lt;T&gt;::m_dis(0,1);\n\ntemplate&lt;std::size_t NumInputs&gt;\nclass Neuron\n{\npublic:\n\n    Neuron(ActivationFuncPtr activationFunction)\n    :\n        m_activationFunction(activationFunction)\n    {\n        Random&lt;DataType&gt; r;\n        std::generate(m_weights.begin(),m_weights.end(),[&amp;]()\n        {\n            return r();\n        });\n        m_biasWeight = r();\n    }\n\n    void FeedForward(const std::array&lt;DataType,NumInputs&gt;&amp; inputValues)\n    {\n        DataType sum = m_biasWeight;\n        for(std::size_t i = 0; i &lt; inputValues.size(); ++i)\n            sum += inputValues[i] * m_weights[i];\n        m_output = m_activationFunction(sum);\n\n        m_netInput = sum;\n    }\n\n    DataType GetOutput() const\n    {\n        return m_output;\n    }\n\n    DataType GetNetInput() const\n    {\n        return m_netInput;\n    }\n\n    std::array&lt;DataType,NumInputs&gt; Backpropagate(const DataType&amp; error,\n                           const std::array&lt;DataType,NumInputs&gt;&amp; inputValues,\n                           std::array&lt;DataType,NumInputs+1&gt;&amp; weightAdjustments)\n    {\n        DataType errorOverOutput = error;\n        DataType outputOverNetInput = m_output * (DataType(1) - m_output); // sigmoid derivative\n\n        std::array&lt;DataType,NumInputs&gt; netInputOverWeight;\n        for(std::size_t i = 0; i &lt; NumInputs; ++i)\n        {\n            netInputOverWeight[i] = inputValues[i];\n        }\n\n        DataType netInputOverBias = DataType(1);\n\n        std::array&lt;DataType,NumInputs&gt; errorOverWeight;\n        for(std::size_t i = 0; i &lt; NumInputs; ++i)\n        {\n            errorOverWeight[i] = errorOverOutput * outputOverNetInput * netInputOverWeight[i];\n        }\n\n        DataType errorOverBias = errorOverOutput * outputOverNetInput * netInputOverBias;\n\n        for(std::size_t i = 0; i &lt; NumInputs; ++i)\n        {\n            weightAdjustments[i] = errorOverWeight[i];\n        }\n        weightAdjustments[NumInputs] = errorOverBias;\n\n        DataType errorOverNetInput = errorOverOutput * outputOverNetInput;\n\n        std::array&lt;DataType,NumInputs&gt; errorWeights;\n        for(std::size_t i = 0; i &lt; NumInputs; ++i)\n        {\n            errorWeights[i] = errorOverNetInput * m_weights[i];\n        }\n\n        return errorWeights;\n    }\n\n    void AdjustWeights(const std::array&lt;DataType,NumInputs+1&gt;&amp; adjustments)\n    {\n        for(std::size_t i = 0; i &lt; NumInputs; ++i)\n            m_weights[i] = m_weights[i] - learningRate * adjustments[i];\n        m_biasWeight = m_biasWeight - learningRate * adjustments[NumInputs];\n    }\n\n    const std::array&lt;DataType,NumInputs&gt; GetWeights() const {return m_weights;}\n    const DataType&amp; GetBiasWeight() const { return m_biasWeight; }\n\nprotected:\n    std::array&lt;DataType,NumInputs&gt; m_weights;\n    DataType m_biasWeight;\n\n    ActivationFuncPtr m_activationFunction;\n\n    DataType m_output;\n    DataType m_netInput;\n};\n\nmain()\n{\n\n    std::array&lt;std::array&lt;DataType,2&gt;,4&gt; inputData = {{{0,0},{0,1},{1,0},{1,1}}};\n    std::array&lt;std::array&lt;DataType,1&gt;,4&gt; desiredOutputs = {{{0},{1},{1},{0}}};\n    std::array&lt;Neuron&lt;2&gt;*,2&gt; hiddenLayer1 = {{ new Neuron&lt;2&gt;(sigmoid), new Neuron&lt;2&gt;(sigmoid) }};\n    std::array&lt;Neuron&lt;2&gt;*,1&gt; outputLayer = {{ new Neuron&lt;2&gt;(sigmoid) }};\n\n    std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(80);\n\n    DataType minError = std::numeric_limits&lt;DataType&gt;::max();\n    bool minErrorFound = false;\n\n    std::size_t epochNumber = 0;\n    while(epochNumber &lt; numberEpochs &amp;&amp; !minErrorFound)\n    {\n        DataType epochMSE = 0;\n\n        for(std::size_t row = 0; row &lt; inputData.size(); ++row)\n        {\n            const std::array&lt;DataType,2&gt;&amp; dataRow = inputData[row];\n            const std::array&lt;DataType,1&gt;&amp; outputRow = desiredOutputs[row];\n\n            // Feed the values through to the output layer\n\n            hiddenLayer1[0]-&gt;FeedForward(dataRow);\n            hiddenLayer1[1]-&gt;FeedForward(dataRow);\n\n            DataType output0 = hiddenLayer1[0]-&gt;GetOutput();\n            DataType output1 = hiddenLayer1[1]-&gt;GetOutput();\n\n            outputLayer[0]-&gt;FeedForward({output0,output1});\n\n            DataType finalOutput0 = outputLayer[0]-&gt;GetOutput();\n\n            // if there was more than 1 output neuron these errors need to be summed together first to create total error\n            DataType totalError = 0.5 * std::pow(outputRow[0] - finalOutput0,2.f);\n            epochMSE += totalError * totalError;\n\n            DataType propagateError = -(outputRow[0] - finalOutput0);\n\n            std::array&lt;DataType,3&gt; weightAdjustmentsOutput;\n            std::array&lt;DataType,2&gt; outputError = outputLayer[0]-&gt;Backpropagate(propagateError,\n                                                                   {output0,output1},\n                                                                   weightAdjustmentsOutput);\n\n            std::array&lt;DataType,3&gt; weightAdjustmentsHidden1;\n            hiddenLayer1[0]-&gt;Backpropagate(outputError[0],dataRow,weightAdjustmentsHidden1);\n\n            std::array&lt;DataType,3&gt; weightAdjustmentsHidden2;\n            hiddenLayer1[1]-&gt;Backpropagate(outputError[1],dataRow,weightAdjustmentsHidden2);\n\n            outputLayer[0]-&gt;AdjustWeights(weightAdjustmentsOutput);\n            hiddenLayer1[0]-&gt;AdjustWeights(weightAdjustmentsHidden1);\n            hiddenLayer1[1]-&gt;AdjustWeights(weightAdjustmentsHidden2);\n        }\n\n        epochMSE *= DataType(1) / inputData.size();\n\n        if(epochMSE &gt;= minError + 0.00000001)\n        {\n            minErrorFound = true;\n        }\n        else\n            minError = epochMSE;\n\n        ++epochNumber;\n    }\n\n    std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(80)\n                &lt;&lt; \"\\n\\n====================================\\n\"\n                &lt;&lt; \"   TRAINING COMPLETE\"\n                &lt;&lt; \"\\n\\n====================================\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Minimum error: \" &lt;&lt; minError &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Number epochs: \" &lt;&lt; epochNumber &lt;&lt; \"/\" &lt;&lt; numberEpochs &lt;&lt; std::endl;\n\n    // output tests\n    std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(2)\n                &lt;&lt; \"\\n\\n====================================\\n\"\n                &lt;&lt; \"   FINAL TESTS\"\n                &lt;&lt; \"\\n\\n====================================\" &lt;&lt; std::endl;\n\n    for(std::size_t row = 0; row &lt; inputData.size(); ++row)\n    {\n        const std::array&lt;DataType,2&gt;&amp; dataRow = inputData[row];\n        const std::array&lt;DataType,1&gt;&amp; outputRow = desiredOutputs[row];\n        std::cout &lt;&lt; dataRow[0] &lt;&lt; \",\" &lt;&lt; dataRow[1] &lt;&lt; \" (\" &lt;&lt; outputRow[0] &lt;&lt; \")  :  \";\n\n        // Feed the values through to the output layer\n\n        hiddenLayer1[0]-&gt;FeedForward(dataRow);\n        hiddenLayer1[1]-&gt;FeedForward(dataRow);\n\n        DataType output0 = hiddenLayer1[0]-&gt;GetOutput();\n        DataType output1 = hiddenLayer1[1]-&gt;GetOutput();\n\n        outputLayer[0]-&gt;FeedForward({output0,output1});\n\n        DataType finalOutput0 = outputLayer[0]-&gt;GetOutput();\n\n        std::cout &lt;&lt; finalOutput0 &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Most of the time, the output looks like this, and I think \"great! success!\"</p>\n\n<pre><code>====================================\n   TRAINING COMPLETE\n\n====================================\nMinimum error: 0.00000000106923325748908837340422905981540679931640625000000000000000000000000000\nNumber epochs: 1000000/1000000\n\n\n====================================\n   FINAL TESTS\n\n====================================\n0.00,0.00 (0.00)  :  0.01\n0.00,1.00 (1.00)  :  0.99\n1.00,0.00 (1.00)  :  0.99\n1.00,1.00 (0.00)  :  0.01\n\nProcess returned 0 (0x0)   execution time : 0.992 s\nPress any key to continue.\n</code></pre>\n\n<p>But then the following is the output occassionally, which I want to understand, is this overfitting, or underfitting, or have I done something wrong somewhere? How can I prevent this?</p>\n\n<pre><code>====================================\n   TRAINING COMPLETE\n\n====================================\nMinimum error: 0.00787912402302026748657226562500000000000000000000000000000000000000000000000000\nNumber epochs: 1000000/1000000\n\n\n====================================\n   FINAL TESTS\n\n====================================\n0.00,0.00 (0.00)  :  0.01\n0.00,1.00 (1.00)  :  0.50\n1.00,0.00 (1.00)  :  0.99\n1.00,1.00 (0.00)  :  0.50\n\nProcess returned 0 (0x0)   execution time : 1.024 s\nPress any key to continue.\n</code></pre>\n\n<p>I have tried using more or less epochs along with a higher or lower learning rate, but I still ocassionally get a result as above (not always the exact same as above but similar). For example, with a learning rate of <code>0.002</code> and <code>1000000</code> epochs, I get the following ocassionally:</p>\n\n<pre><code>====================================\n   TRAINING COMPLETE\n\n====================================\nMinimum error: 0.01417684461921453475952148437500000000000000000000000000000000000000000000000000\nNumber epochs: 176477/1000000\n\n\n====================================\n   FINAL TESTS\n\n====================================\n0.00,0.00 (0.00)  :  0.29\n0.00,1.00 (1.00)  :  0.59\n1.00,0.00 (1.00)  :  0.59\n1.00,1.00 (0.00)  :  0.63\n\nProcess returned 0 (0x0)   execution time : 0.225 s\nPress any key to continue.\n</code></pre>\n\n<p>I see how it exited early because the error grew rather than shrank, but is that because I exited early when I shouldn't have?</p>\n"}, {"tags": ["python", "c++", "gurobi"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 11979059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dY7M.jpg?s=128&g=1", "display_name": "Eli Towle", "link": "https://stackoverflow.com/users/11979059/eli-towle"}, "is_accepted": false, "score": 1, "last_activity_date": 1570738993, "creation_date": 1570738993, "answer_id": 58330567, "question_id": 58312805, "link": "https://stackoverflow.com/questions/58312805/gurobi-using-addconstrs-but-the-expression-is-not-right/58330567#58330567", "title": "Gurobi: Using addConstrs() but the expression is not right", "body": "<p>In Python, using <code>range(n)</code> returns a list of <code>n</code> numbers from <code>0</code> to <code>n-1</code>. Thus, your <code>addConstrs()</code> functions iterate over the keys <code>(0,0)</code>, <code>(0,1)</code>, <code>(1,0)</code>, <code>(1,1)</code>, <code>(2,0)</code>, and <code>(2,1)</code>.</p>\n\n<p>However, the <code>u</code> variables are indexed by <code>(1,1)</code>, <code>(1,2)</code>, <code>(2,1)</code>, <code>(2,2)</code>, <code>(3,1)</code>, and <code>(3,2)</code>:</p>\n\n<pre><code>gurobi&gt; u = m.addVars([1, 2, 3], [1, 2], vtype=GRB.BINARY)\ngurobi&gt; u.keys()\n&lt;gurobi.tuplelist (6 tuples, 2 values each):\n ( 1 , 1 )\n ( 1 , 2 )\n ( 2 , 1 )\n ( 2 , 2 )\n ( 3 , 1 )\n ( 3 , 2 )\n&gt;\n</code></pre>\n\n<p>You receive a <code>KeyError</code> because the indices of the constraints do not match the indices of the variables. To fix this, you can change the construction of the <code>u</code> variables to match that of the <code>p</code> variables:</p>\n\n<pre><code>gurobi&gt; u = m.addVars(3, 2, vtype=GRB.BINARY)\ngurobi&gt; u.keys()\n&lt;gurobi.tuplelist (6 tuples, 2 values each):\n ( 0 , 0 )\n ( 0 , 1 )\n ( 1 , 0 )\n ( 1 , 1 )\n ( 2 , 0 )\n ( 2 , 1 )\n&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12191624, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VI-nEotUQtQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcTGfJbLvGbAWIcF5VI-os1WD9-Tw/photo.jpg?sz=128", "display_name": "cheesecake fun", "link": "https://stackoverflow.com/users/12191624/cheesecake-fun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570738993, "creation_date": 1570658050, "last_edit_date": 1570666234, "question_id": 58312805, "link": "https://stackoverflow.com/questions/58312805/gurobi-using-addconstrs-but-the-expression-is-not-right", "title": "Gurobi: Using addConstrs() but the expression is not right", "body": "<p>I am new to Gurobi and Python. I am trying to solve a simple mixed binary problem, but there are some errors. </p>\n\n<p>I defined the problem as follows,</p>\n\n<p>I want variable u[1,1], u[2,1], u[3,1] and u[1,2], u[2,2], u[3,2], similarity to variable p. I want to add above constraints, but there are some errors saying my expressions is not right.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>u=m.addVars([1, 2, 3], [1, 2], vtype=GRB.BINARY)\np=m.addVars(3,2,lb=0.0)\n\nm.addConstrs(p[i,j]&lt;= 30*u[i,j]\n            for i in range(3)\n            for j in range(2))\nm.addConstrs(p[(i,j)]&gt;=5*u[(i,j)]\n            for i in range(3)\n            for j in range(2))\n</code></pre>\n\n<p>The error is like this</p>\n\n<pre><code>line 14, in &lt;module&gt;\n    for i in range(3)\n  File \"model.pxi\", line 3062, in gurobipy.Model.addConstrs\n  File \"/Users/Documents/pyexercise/HW4Q1.py\", line 15, in &lt;genexpr&gt;\n    for j in range(2))\nKeyError: (0, 0)\n</code></pre>\n\n<p>Can anyone help me with this? Thanks!</p>\n"}, {"tags": ["java", "c++", "memory-leaks", "java-native-interface", "heap-memory"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1570664461, "post_id": 58312753, "comment_id": 102987934, "body": "You aren&#39;t calling <code>ReleaseStringUTFChars()</code> under all possible conditions."}, {"owner": {"reputation": 305, "user_id": 8245400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ef59afbc82bc1e96bd802a6e45ce0e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8245400/raj"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1570665148, "post_id": 58312753, "comment_id": 102988062, "body": "@user207421 there are 3 GetStringUTFChars() for which I have corresponding ReleaseStringUTFChars() too."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1570665333, "post_id": 58312753, "comment_id": 102988097, "body": "I repeat. You are not calling it under all possible conditions. Consider the various early returns."}, {"owner": {"reputation": 305, "user_id": 8245400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ef59afbc82bc1e96bd802a6e45ce0e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8245400/raj"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1570665490, "post_id": 58312753, "comment_id": 102988123, "body": "@user207421 Good Point, in my use case I always pass the arguments, so they will never be Null. But will consider checking that too."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1570665677, "post_id": 58312753, "comment_id": 102988158, "body": "You need to do more than &#39;consider&#39; it. You need to <i>fix</i> it. It is a memory leak, which is exactly what you are asking about, and it occurs under quite a few conditions, not limited to null arguments. Your code is incorrectly structured."}, {"owner": {"reputation": 305, "user_id": 8245400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ef59afbc82bc1e96bd802a6e45ce0e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8245400/raj"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1570665880, "post_id": 58312753, "comment_id": 102988204, "body": "@user207421 I have updated my code above, and planning to load test it right now. Please let me know if it is correct now. I don&#39;t have Nulls so removed that check."}, {"owner": {"reputation": 305, "user_id": 8245400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ef59afbc82bc1e96bd802a6e45ce0e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8245400/raj"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1570669975, "post_id": 58312753, "comment_id": 102988915, "body": "@user207421 Still same issue Old generation is growing and then gets GCed. The issue remains the same. Even if I comment out all the code, except for the last part were I just return a Static array of size 50. Still, the old generation keeps growing."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1570672752, "post_id": 58312753, "comment_id": 102989451, "body": "Consider switching to <code>int[] values = new int[]; for(JavaObject o: javaOjctes){      cache.get(o.getkey1,o.getkey2,o.getkeyType[], values);       &#47;&#47;further processing    }</code>"}, {"owner": {"reputation": 305, "user_id": 8245400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ef59afbc82bc1e96bd802a6e45ce0e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8245400/raj"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1570674449, "post_id": 58312753, "comment_id": 102989767, "body": "@AlexCohn Ok will try and let you know"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1570687597, "post_id": 58312753, "comment_id": 102992849, "body": "In your updated code you keep using <code>key1Value</code> after having called <code>ReleaseStringUTFChars</code>, which is incorrect (that pointer is no longer guaranteed to be valid). You also seem to have two calls to <code>ReleaseStringUTFChars</code> for that string."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570706672, "post_id": 58312753, "comment_id": 103002332, "body": "@Raj For JNI work, you should be using <a href=\"https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii\">RAII</a> techniques so that you are not in the situation where you are not releasing memory when you return from the function.  For example, the destructor for an RAII class would automatically call <code>ReleaseStringUTFChars</code>, thus a leak would not appear regardless of the reason the function exits (a <code>return</code> statement, and exception thrown, etc.)"}], "owner": {"reputation": 305, "user_id": 8245400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ef59afbc82bc1e96bd802a6e45ce0e?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/8245400/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570665827, "creation_date": 1570657659, "last_edit_date": 1570665827, "question_id": 58312753, "link": "https://stackoverflow.com/questions/58312753/returning-array-from-jni-to-java-causing-slow-leak", "title": "Returning array from JNI to Java causing slow leak", "body": "<p>I have a cache implemented in c++ using multimap and then I look up the cache and return the matching integer values as an array to the Java code.</p>\n\n<p>The problem I am facing is, the Old generation progressively gets completely full and triggers continuous full GC from thereon. I found out, that, just returning a static array is causing the Old generation to fillup periodically and trigger a  full GC. Eventually at a high load system will heap dump.</p>\n\n<p>The code is like below\nJava</p>\n\n<pre><code>for(JavaObject o: javaOjctes){\n     int[] values = cache.get(o.getkey1,o.getkey2,o.getkeyType[]);\n      //further processing\n   }\n</code></pre>\n\n<p>and on C++ side I have CacheImpl.cpp</p>\n\n<pre><code>JNIEXPORT jintArray JNICALL Java_com_test_cache_CacheService_get(JNIEnv *env, jobject thisObject, jstring key1,jstring key2,jobjectArray keyTypes){\n\nconst char *key1Value = (env)-&gt;GetStringUTFChars(key1,NULL);\nenv-&gt;ReleaseStringUTFChars(key1,key1Value);\n//if(key1Value == NULL)\n    //return NULL;\n\nconst char *key2Value = (env)-&gt;GetStringUTFChars(key2,NULL);\n\n //if(key2Value == NULL)\n     //return NULL;\n\nstring key2_str(key2value);\nenv-&gt;ReleaseStringUTFChars(key2,key2Value);\n\n\njsize length = env-&gt;GetArrayLength(keyTypes);\n\n if(length == 0)\n     return NULL;\n\n// I\u2019m managing the C++ cache from Java side, so getting the\n// reference of native cache from Java\njclass CacheService = env-&gt;GetObjectClass(thisObject);\nCache* cache= (Cache*) env-&gt;GetStaticLongField(CacheService,getCacheField(env,thisObject));\nenv-&gt;DeleteLocalRef(CacheService);\nlist&lt;int&gt; result;\nfor(int index=0;index&lt;length;index++){\n\n  jstring keyType =(jstring) env-&gt;GetObjectArrayElement(keyTypes,index);\n  const char *key_type_str=env-&gt;GetStringUTFChars(keyType,NULL);\n  string key_type(key_type_str);\n  env-&gt;ReleaseStringUTFChars(keyType,key_type_str);\n\n   // Cache.cpp code is given below\n  list&lt;int&gt; intermediate=cache-&gt;get(key2_str+key_type,key1Value);\n  result.merge(intermediate);\n\n\n  intermediate=cache-&gt;get(key_type,key1Value);\n  result.merge(intermediate);\n}\n\nenv-&gt;ReleaseStringUTFChars(key1,key1Value);\n\n// I would return result list from below code\n// For testing I commented all of the above code and\n// tested with only below code. I could see Old gen\n// Keep growing and GC spikes\n\n    jintArray Ids=env-&gt;NewIntArray(50);\n          if(Ids == NULL){\n              return NULL;\n          }\n         jint return_Array[50];\n         int j=0;\n         for(j=0; j&lt;50 ;j++){\n            return_Array[j]=j;\n          }\n          env-&gt;SetIntArrayRegion(Ids,0,50,return_Array);\n          //env-&gt;DeleteLocalRef(Ids);\n          return Ids;\n</code></pre>\n\n<p>and The Cache.cpp code is like below</p>\n\n<pre><code>shared_ptr&lt;multimap&lt;string, SomeObject&gt; &gt; Cache::cacheMap;\n\nlist&lt;int&gt;  Cache::get(string key,const char* key1Value){\n\n       SomeObject value;\n       list&lt;int&gt; IDs;\n\n       shared_ptr&lt;multimap&lt;string, SomeObject&gt; &gt; readMap=atomic_load(&amp;cacheMap);\n       pair&lt;mapIterator,mapIterator&gt; result=readMap-&gt;equal_range(key);\n\n       for(auto iterator=result.first; iterator!=result.second; iterator++){\n          value=iterator-&gt;second;\n\n          if(!(value.checkID(key1Value))){\n              IDs.push_front(value.getID(key1Value));\n\n          }\n       }\n\n       return IDs;\n}\n</code></pre>\n\n<p>In the code above I guess the Ids array </p>\n\n<pre><code>jintArray Ids=env-&gt;NewIntArray(50);\n</code></pre>\n\n<p>is not getting deleted so I tried to </p>\n\n<pre><code>//env-&gt;DeleteLocalRef(Ids);\n</code></pre>\n\n<p>This doesn't work as the empty array will be returned on Java side.</p>\n\n<p>As described in the code comments, I commented out all the code except for returning a static array to Java. I could see that the Old Generation was getting filled up gradually triggering a Full GC, which I believe is a slow leak problem. I have a slow leak in this cache lookup flow. Am I missing something? </p>\n\n<p>Thanks,\nRaj</p>\n"}, {"tags": ["c++", "c++11", "templates", "casting", "static"], "comments": [{"owner": {"reputation": 351, "user_id": 7834933, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kAAAkx4hSUc/AAAAAAAAAAI/AAAAAAAAqoE/UdciGksbY3A/photo.jpg?sz=128", "display_name": "Daniel", "link": "https://stackoverflow.com/users/7834933/daniel"}, "edited": false, "score": 0, "creation_date": 1570657904, "post_id": 58312751, "comment_id": 102986531, "body": "Is this c++? Please tag your post with the programming language."}, {"owner": {"reputation": 1455, "user_id": 8334663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0jW47.jpg?s=128&g=1", "display_name": "sao", "link": "https://stackoverflow.com/users/8334663/sao"}, "edited": false, "score": 0, "creation_date": 1570658938, "post_id": 58312751, "comment_id": 102986786, "body": "welcome to stack overflow. Please edit your question to include more details, including your language and some example code."}, {"owner": {"reputation": 1, "user_id": 12191620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f929c99c12fcc941be310bb8cea864e?s=128&d=identicon&r=PG&f=1", "display_name": "alleSkalFa", "link": "https://stackoverflow.com/users/12191620/alleskalfa"}, "edited": false, "score": 0, "creation_date": 1570671483, "post_id": 58312751, "comment_id": 102989173, "body": "Will do now, thanks"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1570681468, "post_id": 58312751, "comment_id": 102991274, "body": "Are you trying to declare <code>larger</code>, or to implement it? You cast in the implementation, not in the prototype. The code you show only remotely resembles C++."}, {"owner": {"reputation": 1, "user_id": 12191620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f929c99c12fcc941be310bb8cea864e?s=128&d=identicon&r=PG&f=1", "display_name": "alleSkalFa", "link": "https://stackoverflow.com/users/12191620/alleskalfa"}, "edited": false, "score": 0, "creation_date": 1570689509, "post_id": 58312751, "comment_id": 102993672, "body": "Declare. Thanks for the confirmation."}, {"owner": {"reputation": 2444, "user_id": 3197387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ec27435a4e7d85c8eb8b5e4799abc7?s=128&d=identicon&r=PG&f=1", "display_name": "Sisir", "link": "https://stackoverflow.com/users/3197387/sisir"}, "edited": false, "score": 0, "creation_date": 1570732895, "post_id": 58312751, "comment_id": 103016520, "body": "2 things: What is Type2; is this a template type or it is a class/struct? 2) If it is a template type use <code>class</code> before its declaration else remove it from the template declaration. Then check whether the types you are converting are they really compatible"}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 5823300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jcmFm.jpg?s=128&g=1", "display_name": "Daniel Trout", "link": "https://stackoverflow.com/users/5823300/daniel-trout"}, "is_accepted": false, "score": 0, "last_activity_date": 1570693124, "creation_date": 1570693124, "answer_id": 58317763, "question_id": 58312751, "link": "https://stackoverflow.com/questions/58312751/how-to-cast-template-arguments/58317763#58317763", "title": "How to cast template arguments", "body": "<p>I think you want do that static casting inside the function.  For example:</p>\n\n<pre><code>    template &lt;class Type, Type2&gt;  \n    Type larger(Type x, Type2 y) {\n        Type ycasted = static_cast&lt;Type&gt;(y);\n        //compare x and ycasted\n    }\n</code></pre>\n\n<p>However, it's possible that I misunderstood your question.  Hope this helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 12191620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f929c99c12fcc941be310bb8cea864e?s=128&d=identicon&r=PG&f=1", "display_name": "alleSkalFa", "link": "https://stackoverflow.com/users/12191620/alleskalfa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570693124, "creation_date": 1570657650, "last_edit_date": 1570681309, "question_id": 58312751, "link": "https://stackoverflow.com/questions/58312751/how-to-cast-template-arguments", "title": "How to cast template arguments", "body": "<p>I'm trying to cast the argument of Type2 to Type. It's not compiling. </p>\n\n<p>Specifically, I'm trying to compare items of two different types, and want to cast the second element y to (Type).</p>\n\n<p>This is in C++</p>\n\n<pre><code>template &lt;class Type, Type2&gt;                             \nType larger(Type x, Type2 static_cast&lt;Type&gt;(y)); \n</code></pre>\n\n<p>E: Clarity</p>\n"}, {"tags": ["android", "c++", "android-ndk", "android-source", "android.mk"], "answers": [{"tags": [], "owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "is_accepted": false, "score": 0, "last_activity_date": 1570746461, "creation_date": 1570746461, "answer_id": 58331904, "question_id": 58312735, "link": "https://stackoverflow.com/questions/58312735/error-shared-libraries-missing-static-libraries-android-mk/58331904#58331904", "title": "Error: SHARED_LIBRARIES missing STATIC_LIBRARIES Android.mk", "body": "<p>The platform build system is not the same as the one used by the NDK. There's no such rule as <code>PREBUILT_STATIC_LIBRARY</code> or <code>PREBUILT_SHARED_LIBRARY</code>, so those rules aren't being executed. The platform uses <code>BUILD_PREBUILT</code>, and you have to specify your <code>LOCAL_MODULE_CLASS</code>. See <a href=\"https://android.googlesource.com/platform/packages/apps/Dialer/+/refs/heads/master/Android.mk\" rel=\"nofollow noreferrer\">https://android.googlesource.com/platform/packages/apps/Dialer/+/refs/heads/master/Android.mk</a> for an example.</p>\n\n<p>CMake is not supported at all in the platform.</p>\n\n<p>You also probably don't want to use Android.mk in the platform. That build system (which is unrelated to ndk-build) has been on its way out for several years. You'll want to use Soong as described by <a href=\"https://source.android.com/setup/build\" rel=\"nofollow noreferrer\">https://source.android.com/setup/build</a>.</p>\n"}], "owner": {"reputation": 29, "user_id": 11407188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef08223846486bb1454a3dc3f022b67?s=128&d=identicon&r=PG&f=1", "display_name": "Axaror", "link": "https://stackoverflow.com/users/11407188/axaror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2298, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1573587617, "creation_date": 1570657543, "last_edit_date": 1573587617, "question_id": 58312735, "link": "https://stackoverflow.com/questions/58312735/error-shared-libraries-missing-static-libraries-android-mk", "title": "Error: SHARED_LIBRARIES missing STATIC_LIBRARIES Android.mk", "body": "<p>I have an android application which also has c++ code dependencies. </p>\n\n<p>I want to build this application as system application by compiling with AOSP. </p>\n\n<p>In my android.mk, I have to first import a static library (abc.a) and then use it to build a shared library (xyz.so).  </p>\n\n<p>I am facing build error as <strong>\"error: xyz (SHARED_LIBRARIES android-arm64) missing abc (STATIC_LIBRARIES android-arm64)\"</strong></p>\n\n<p>Android.mk:</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := abc\nLOCAL_SRC_FILES := $(LOCAL_PATH)/$(TARGET_ARCH_ABI)/abc.a\ninclude $(PREBUILT_STATIC_LIBRARY)\n\ninclude $(CLEAR_VARS)\n#LOCAL_LDFLAGS := -llog -ldl\nLOCAL_MODULE    := libxyz\nLOCAL_SRC_FILES := \\\n                xyz.cpp \\\n                xyz1.cpp        \nLOCAL_STATIC_LIBRARIES := abc\nLOCAL_CFLAGS += -Wall -Werror -Wno-unused-parameter -Wno-switch\n#LOCAL_SDK_VERSION := 19\n#LOCAL_NDK_STL_VARIANT := c++_static # LLVM libc++\ninclude $(BUILD_SHARED_LIBRARY)  \n</code></pre>\n\n<p>Cmakelists: </p>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\nadd_library( # Sets the name of the library.\n             abc\n             # Sets the library as a shared library.\n             SHARED\n             # Provides a relative path to your source file(s).\n             src/main/cpp/abc.cpp\n             src/main/cpp/abc.hxx\n            ......................)\n\nfind_library( # Sets the name of the path variable.\n              log-lib\n              log pthread)\n\nadd_library( xyz\n             STATIC\n             IMPORTED )\n\n set_target_properties( # Specifies the target library.\n                        xyz\n                        # Specifies the parameter you want to define.\n                        PROPERTIES IMPORTED_LOCATION\n                        # Provides the path to the library you want to import.\n                        ../../../../${ANDROID_ABI}/xyz.a )\n\ntarget_link_libraries( # Specifies the target library.\n                       abc\n                       xyz ${log-lib} )\n</code></pre>\n\n<p>Attaching error screenshot. </p>\n\n<p><a href=\"https://i.stack.imgur.com/zTcqV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zTcqV.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "computer-science", "cpu-architecture", "language-design", "von-neumann"], "comments": [{"owner": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 6, "creation_date": 1570657197, "post_id": 58312638, "comment_id": 102986332, "body": "The wikipedia link you posted states: &quot;Many widely used programming languages such as C, C++ and Java have ceased to be strictly von Neumann by adding support for parallel processing, in the form of threads.&quot;"}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 0, "creation_date": 1570657362, "post_id": 58312638, "comment_id": 102986380, "body": "@Rotem Kindly, please read the questions below the picture. P.S I&#39;ve read the article before posting the question."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 4, "creation_date": 1570657498, "post_id": 58312638, "comment_id": 102986420, "body": "Why does it matter?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570657564, "post_id": 58312638, "comment_id": 102986439, "body": "C is designed around a register machine with RAM, like a PDP-11. That&#39;s why it has local vars, pointers, and array indexing.  Most C implementations also depend on a stack for automatic storage, when they need to be spilled from registers and for recursion.  But C/C++ have managed to avoid requiring a callstack; other implementations are possible for function context.  And BTW, you don&#39;t need to specify a single ISA, just the <a href=\"https://en.wikipedia.org/wiki/Model_of_computation\" rel=\"nofollow noreferrer\">&quot;model of computation&quot;</a> / abstract machine type like <a href=\"https://en.wikipedia.org/wiki/Register_machine\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Register_machine</a>"}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1570657660, "post_id": 58312638, "comment_id": 102986461, "body": "@Barry I though for you every detail matters. :P"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1570657837, "post_id": 58312638, "comment_id": 102986513, "body": "One can care a great deal about every detail of the language and how to use it, without caring a single iota about the name somebody might use to try to characterize the model of computation they see it as embodying."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1570658151, "post_id": 58312638, "comment_id": 102986601, "body": "@JerryCoffin In my humble opinion names are important. Furthermore, one might wonder, what&#39;s the computational model that C++ abstract machine simulates? ;)"}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570658404, "post_id": 58312638, "comment_id": 102986667, "body": "@PeterCordes Exactly to what my question focuses. What&#39;s the computational model for C++&#39;s abstract machine if not Von Neumann&#39;s."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 3, "creation_date": 1570658558, "post_id": 58312638, "comment_id": 102986702, "body": "@101010: &quot;<i>In my humble opinion names are important.</i>&quot; And what makes this particular name important? &quot;<i>what&#39;s the computational model that C++ abstract machine simulates?</i>&quot; The stuff that inspired you to make a choice 30+ years ago isn&#39;t necessarily relevant now that the choice has been made. What matters is the choice, not why it was made. The C++ standard defines how the abstract machine works; <i>that</i> is the &quot;computational model&quot;."}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 6, "creation_date": 1570659161, "post_id": 58312638, "comment_id": 102986848, "body": "We complain that all we get these days are basically debugging questions, but when we get an actual interesting question to answer, all we care about is whether the question &quot;matters&quot; somehow? What&#39;s your guys&#39; standard on whether the question &quot;matters&quot; or not?"}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1570659191, "post_id": 58312638, "comment_id": 102986854, "body": "I would say the premise of the question doesn&#39;t really make sense. While most modern systems are Von Neumann I see no reason that the typical compiled language (C, C++, whatever) could not be made to run just as readily on a Harvard architecture system."}, {"owner": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 0, "creation_date": 1570659651, "post_id": 58312638, "comment_id": 102986960, "body": "@101010 I read the text of the question, and my comment merely meant to state that this is specifically addressed in the article for the benefit of other readers. So, I would suggest you clarify what you are after? An opinionated discussion? A more authoritative answer? Regardless I believe you should state why you believe the statement in the article may be misguided."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 0, "creation_date": 1570659851, "post_id": 58312638, "comment_id": 102986998, "body": "@Rotem What the article states is already incoporated in &quot;or if it&#39;s not (e.g., because of asynchronous execution with the advent of threads) was it ever considered a Von Neumann language?&quot;."}, {"owner": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 1, "creation_date": 1570660156, "post_id": 58312638, "comment_id": 102987077, "body": "@101010 &quot;ceased to be&quot; as written in the article implies that they were considered strictly VN languages, at least by the author of the article. Regardless, I find the question worthy of debate."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 1, "creation_date": 1570683343, "post_id": 58312638, "comment_id": 102991664, "body": "@C&#225;ssioRenan: Agreed.  This is the first time I&#39;ve ever <i>added</i> the tag <code>[computer-science]</code> to a question, rather than removing it from some debugging /  engineering question (presumably posted by a student taking a class titled Computer Science)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570699428, "post_id": 58312638, "comment_id": 102998438, "body": "@101010: I was working on a big update to my answer while you accepted it.  On more careful reading, I realized that the computer science RAM abstract machine uses the term &quot;registers&quot; for what are really more like memory addresses.  It&#39;s not like a CPU with registers + RAM.  It&#39;s more abstract and further from modeling real CPUs than I thought.  So there was a lot more ground to cover about what <i>abstract</i> models of computation are for, vs. the C++ abstract machine. Also, Von Neumann vs. Harvard is probably red herring here; the dude has his name on so much stuff... see that para in my answer"}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1570699632, "post_id": 58312638, "comment_id": 102998562, "body": "@PeterCordes It looks that I have something for evening reading. Thanxs ;)"}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1570700142, "post_id": 58313095, "comment_id": 102998836, "body": "Caveat: I&#39;m interested in theoretical CS stuff, but I don&#39;t actually work in that field or pay super careful attention to a lot of this stuff.  I may have distorted some things.  And almost certainly could have edited this down to fewer words if I spent even more time on it.  I think some of the key points are well-formatted and presented in this version of the answer, especially the section at the top, and at the bottom about PDP-7 / PDP-11 supporting pointers vs. 8-bit micros that don&#39;t nearly as easily."}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 11, "last_activity_date": 1570735367, "last_edit_date": 1570735367, "creation_date": 1570660220, "answer_id": 58313095, "question_id": 58312638, "link": "https://stackoverflow.com/questions/58312638/is-c-considered-a-von-neumann-programming-language/58313095#58313095", "title": "Is C++ considered a Von Neumann programming language?", "body": "<p>TL:DR: The C++ abstract machine is a type of <a href=\"https://en.wikipedia.org/wiki/Parallel_random-access_machine\" rel=\"nofollow noreferrer\">PRAM (Parallel Random Access Machine)</a>.</p>\n\n<hr>\n\n<p>From the <a href=\"https://en.wikipedia.org/wiki/Von_Neumann_programming_languages\" rel=\"nofollow noreferrer\">Von Neumann Languages</a> Wikipedia article you linked:</p>\n\n<blockquote>\n  <p>Many widely used programming languages such as C, C++ and Java have <strong>ceased</strong> to be strictly von Neumann by adding support for parallel processing, in the form of threads.</p>\n</blockquote>\n\n<p><em>Cease</em> describes a transition from being to not-being.  So yes, before C++11 added threads, C++ was <em>strictly</em> a Von Neumann language according to Wikipedia.  (And after it's still basically a VN language; having multiple threads sharing the same address-space doesn't fundamentally change how C++ works.)</p>\n\n<p><strong>The interesting parts of being a Von Neumann architecture in this context:</strong></p>\n\n<ul>\n<li>Having addressable RAM at all, allowing efficient access (modulo cache / paging) to any object at any time</li>\n<li>Storing the program in RAM: function pointers are possible and efficient, without requiring an interpreter</li>\n<li>Having a program counter that steps through instructions in the stored program: <strong>The natural model is an imperative programming language that does one thing at a time</strong>.  This is so fundamental that it's easy to forget it's not the only model!  (vs. an FPGA or ASIC or something where all gates potentially do something in parallel every clock cycle.  Or a MIMD GPU where a computational \"kernel\" you write is run over all the data potentially in parallel, without implicit sequencing of what order each element is processed in.  Or <a href=\"https://en.wikipedia.org/wiki/Computational_RAM\" rel=\"nofollow noreferrer\">Computational RAM</a>: put ALUs in the memory chips to bypass the Von Neumann bottleneck)</li>\n</ul>\n\n<p>IDK why the wiki article mentions self-modifying code, though; like most languages, ISO C++ doesn't standardize that and is fully compatible with ahead-of-time compilation for a <a href=\"https://en.wikipedia.org/wiki/Harvard_architecture\" rel=\"nofollow noreferrer\">split-bus / split-address-space Harvard architecture</a>.  (No <code>eval</code> or anything else that would require an interpreter or JIT.)  Or on a normal CPU (<a href=\"https://en.wikipedia.org/wiki/Von_Neumann_architecture\" rel=\"nofollow noreferrer\">Von Neumann</a>), strict W^X memory protection and never using <code>mprotect</code> to change page permissions from writeable to executable.</p>\n\n<p>Of course most real C++ implementations <em>do</em> provide well-defined ways to write machine-code into a buffer and cast to a function pointer, as extensions.  (e.g. GNU C/C++'s <code>__builtin___clear_cache(start, end)</code> is named for I-cache sync, but defined in terms of making it safe to call data as a function wrt. dead-store elimination optimizations as well, so it's possible for code to break without it even on x86 which has coherent I-caches.)  So <strong>implementations can extend ISO C++ to take advantage of this feature of Von Neumann architectures</strong>; ISO C++ is intentionally limited in scope to allow for differences between OSes and stuff like that.</p>\n\n<p>Note that being Von Neumann does <em>not</em> strictly imply supporting indirect addressing modes.  Some early CPUs didn't, and self-modifying code (to rewrite an address hard-coded in an instruction) was necessary to implement things that we now use indirection for.</p>\n\n<p><strong>Also note that John Von Neumann was a really famous guy, with his name attached to a lot of fundamental things</strong>.  Some of the connotations of Von Neumann architecture (as opposed to Harvard) aren't really relevant in all contexts.  e.g. <strong>the \"Von Neumann language\" term doesn't so much care about Von Neumann vs. Harvard;  It cares about stored-program with a program counter vs. something like Cellular Automata or a Turing machine (with a real tape)</strong>.  Getting extra bandwidth by using a separate bus (or just split caches) to fetch instructions (Harvard) is just a performance optimization, not a fundamental change.</p>\n\n<hr>\n\n<h1>What is an abstract machine model / model of computation anyway?</h1>\n\n<p>First of all, there are some <a href=\"https://en.wikipedia.org/wiki/Model_of_computation\" rel=\"nofollow noreferrer\">models of computation</a> that are <em>weaker</em> than Turing machines, like <a href=\"https://en.wikipedia.org/wiki/Finite-state_machine\" rel=\"nofollow noreferrer\">Finite State Machines</a>.  There are also non-sequential models of computation, for example <a href=\"https://en.wikipedia.org/wiki/Cellular_automaton\" rel=\"nofollow noreferrer\">Cellular Automata (Conway's Game of Life)</a>, where multiple things happen in parallel at each \"step\".</p>\n\n<p>The <a href=\"https://en.wikipedia.org/wiki/Turing_machine\" rel=\"nofollow noreferrer\">Turing machine</a> is the most widely-known (and mathematically simple)  sequential <a href=\"https://en.wikipedia.org/wiki/Abstract_machine\" rel=\"nofollow noreferrer\">abstract machine</a> that is as \"strong\" as we know how to make.  Without any kind of absolute memory addressing, just relative movement on the tape, it naturally provides infinite storage. This is important, and makes all other kinds of abstract machines very unlike real CPUs in some ways.  Remember, these models of computation are used for <em>theoretical</em> computer science, not engineering.  Problems like finite amounts of memory or performance aren't relevant to what's computable <em>in theory</em>, only in practice.</p>\n\n<p>If you can compute something on a Turing machine, you can compute it on any other Turing-complete model of computation (by definition), perhaps with a much simpler program or perhaps not.  Turing machines aren't very nice to program, or at least very <em>different</em> from assembly language for any real CPU.  Most notably, the memory isn't random-access.  And they can't easily model parallel computing / algorithms.  (If you want to prove things about an algorithm in the abstract, having an implementation of it for an abstract machine of some sort is probably a good thing.)</p>\n\n<p>It's also potentially interesting to prove what features an abstract machine needs to have in order to <em>be</em> Turing complete, so that's another motivation for developing more of them.</p>\n\n<p>There are many others that are equivalent in terms of computability.  The <a href=\"https://en.wikipedia.org/wiki/Random-access_machine\" rel=\"nofollow noreferrer\">RAM machine model</a> is most like real-world CPUs that have an array of memory.  But being a simple abstract machine, it doesn't bother with registers.  In fact, just to make things more confusing, it calls its memory  cells an array of <em>registers</em>.  A RAM machine supports indirect addressing, so the correct analogy to real world CPUs is definitely to memory, not CPU registers.  (And there are an unbounded number of registers, each of unbounded size.  Addresses keep going forever and every \"register\" needs to able to hold a pointer.)  A RAM machine can be Harvard: program stored in a separate finite-state portion of the machine.  Think of it like a machine with memory-indirect addressing modes so you can keep \"variables\" in known locations, and use some of them as pointers to unbounded-size data structures.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Random-access_machine#Examples_of_models\" rel=\"nofollow noreferrer\">The program for an abstract RAM machine</a> looks like assembly language, with load/add/jnz and whatever other selection of instructions you want it to have.  The operands can be immediates or register numbers (what normal people would call absolute addresses).  Or if the model has an accumulator, then you have a load/store machine with an accumulator a lot more like a real CPU.</p>\n\n<p>If you ever wondered why a \"3-address\" machine like MIPS was called that instead of 3-operand, it's probably 1. because the instruction encoding needs room / I-fetch bandwidth through the Von Neumann bottleneck for 3 <em>explicit</em> operand locations (register number) and 2. because in a RAM abstract machine, operands are memory addresses = register numbers.</p>\n\n<hr>\n\n<h1>C++ can't be Turing complete: pointers have a finite size.</h1>\n\n<p><strong>Of course, C++ has <em>huge</em> differences from a CS abstract machine model: C++ requires every type to have a compile-time-constant finite <code>sizeof</code>, so C++ <em>can't</em> be Turing-complete if you include the infinite-storage requirement</strong>.  Everything in <a href=\"https://cs.stackexchange.com/questions/60965/is-c-actually-turing-complete\">Is C actually Turing-complete?</a> on cs.SE applies to C++, too: the requirement that types have a fixed width is a showstopper for infinite storage.  See also <a href=\"https://en.wikipedia.org/wiki/Random-access_machine#Finite_vs_unbounded\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Random-access_machine#Finite_vs_unbounded</a></p>\n\n<hr>\n\n<h1>So Computer Science abstract machines are silly, what about the C++ Abstract machine?</h1>\n\n<p>They of course have their purposes, but there's a lot more interesting stuff we can say about C++ and what kind of machine it assumes if we get a bit <strong>less abstract</strong> and also talk about what a machine can do <em>efficiently</em>.  Once we talk about finite machine machines and performance, these differences become relevant.</p>\n\n<p>First, to run C++ at all, and second, to run without huge and/or unacceptable performance overheads.  (e.g. the HW will need to support pointers fairly directly, probably not with self-modifying code that stores the pointer value into every load/store instruction that uses it.  And that wouldn't work in C++11 where threading is part of the language: the same code can be operating on 2 different pointers at once.)</p>\n\n<p>We can look in more detail at the model of computation assumed by the ISO C++ standard, which describes how the language works in terms of what happens on the Abstract Machine.  Real implementations are required to run code on real hardware that runs \"as-if\" the abstract machine were executing C++ source, reproducing any/all observable behaviour (observable by other parts of the program without invoking UB).</p>\n\n<p>C/C++ has memory and pointers, so it's pretty definitely a type of RAM machine.</p>\n\n<p>Or these days, <strong>a <a href=\"https://en.wikipedia.org/wiki/Parallel_random-access_machine\" rel=\"nofollow noreferrer\">Parallel random-access machine</a></strong>, adding shared memory to the RAM model, and giving each thread its own program counter. Given that <code>std::atomic&lt;&gt;</code> release-sequences make <em>all</em> previous operations visible to other threads, the \"establishing a happens-before relationship\" model of synchronization is based around <em>coherent</em> shared memory.  Emulating it on top of something that required manual triggering of syncing / flushing would be horrible for performance.  (Very clever optimizations may prove when that can be delayed so not every release-store has to suffer, but seq-cst will probably be horrible.  seq-cst has to establish a global order of operations that all threads agree on; that's hard unless a store becomes visible to all other threads at the same time.)</p>\n\n<p>But note that in C++, actual simultaneous access is UB unless you do it with <code>atomic&lt;T&gt;</code>.  This <a href=\"https://electronics.stackexchange.com/questions/387181/mcu-programming-c-o2-optimization-breaks-while-loop/387478#387478\">allows the optimizer to freely use CPU registers</a> for locals, temporaries, and even globals without exposing registers as a language feature.  <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">UB allows optimization</a> in general; that's why modern C/C++ implementations are <em>not</em> portable assembly language.</p>\n\n<p><strong>The historical <code>register</code> keyword in C/C++ means a variable can't have its address taken, so even a non-optimizing compiler can keep it in a CPU register, not memory.</strong>  We're talking about CPU registers, not the computer science RAM Machine \"register = addressable memory location\".  (Like <code>rax..rsp/r8..r15</code> on x86, or <code>r0..r31</code> on MIPS).  Modern compilers do escape analysis and naturally keep locals in registers normally, unless they have to spill them.  Other types of CPU registers are possible, e.g. a register-stack like x87 FP registers.  <strong>Anyway, the <code>register</code> keyword existed to optimize for this type of machine.</strong>  But it doesn't rule out running on a machine with no registers, only memory-memory instructions.</p>\n\n<p><strong>C++ is designed to run well on a Von Neumann machine with CPU registers</strong>, but the C++ abstract machine (that the standard uses to define the language) doesn't allow execution of data as code, or say anything about registers.  Each C++ thread does have its own execution context, though, and that models PRAM threads/cores each having their own program counter and callstack (or whatever an implementation uses for automatic storage, and for figuring out where to return.)  In a real machine with CPU registers, they're private to each thread.</p>\n\n<p>All real-world CPUs are <a href=\"https://en.wikipedia.org/wiki/Random-access_machine\" rel=\"nofollow noreferrer\">Random Access Machines</a>, and have CPU registers separate from addressable / indexable RAM.  Even CPUs that can only compute with a single accumulator register typically have at least one pointer or index register that at least allows some limited array indexing.  At least all CPUs that work well as C compiler targets.</p>\n\n<p>Without registers, every machine instruction encoding would need absolute memory addresses for all operands.  (Maybe like a 6502 where the \"zero page\", the low 256 bytes of memory, was special, and there are addressing modes that use a word from the zero page as the index or pointer, to allow 16-bit pointers without any 16-bit architectural registers.  Or something like that.)  See <a href=\"https://retrocomputing.stackexchange.com/questions/6095/why-do-c-to-z80-compilers-produce-poor-code\">Why do C to Z80 compilers produce poor code? on RetroComputing.SE</a> for some interesting stuff about real-world 8-bit CPUs where a fully compliant C implementation (supporting recursion and reentrancy) is quite expensive to implement.  A lot of of the slowness is that 6502 / Z80 systems were too small to host an optimizing compiler.  But even a hypothetical modern optimizing cross-compiler (like a gcc or LLVM back-end) would have a hard time with some things.  See also a recent answer on <a href=\"https://stackoverflow.com/questions/52781571/what-is-an-unused-memory-address/58315206#58315206\">What is an unused memory address?</a> for a nice explanation of 6502's zero-page indexed addressing mode: 16-bit pointer from an absolute 8-bit address in memory + 8-bit register.</p>\n\n<p>A machine <em>without</em> indirect addressing at all couldn't easily support array indexing, linked lists, and definitely not pointer variables as first-class objects.  (Not efficiently anyway)</p>\n\n<hr>\n\n<h3>What's efficient on <em>real</em> machines -> what idioms are natural</h3>\n\n<p><strong>Most of C's early history was on <a href=\"https://en.wikipedia.org/wiki/PDP-11\" rel=\"nofollow noreferrer\">PDP-11</a></strong>, which is a normal mem + register machine where any register can work as a pointer.  Automatic storage maps to registers, or to space on the callstack when they need to be spilled.  Memory is a flat array of bytes (or chunks of <code>char</code>), no segmentation.</p>\n\n<p>Array indexing is just defined in terms of pointer arithmetic instead of being its own thing perhaps because PDP-11 could do that efficiently: any register can hold an address and be dereferenced.  (vs. some machines with only a couple special registers of pointer width, and the rest narrower.  That was common on an 8-bit machine, but early 16-bit machines like PDP-11 had little enough RAM that one 16-bit register was enough for an address).</p>\n\n<p>See Dennis Ritchie's article <a href=\"https://www.bell-labs.com/usr/dmr/www/chist.html\" rel=\"nofollow noreferrer\">The Development of the C Language</a> for more history; <strong>C grew out of B on PDP-7 Unix</strong>.  (The first Unix was written in PDP-7 asm).  I don't know much about PDP-7, but apparently BCPL and B also use pointers that are just integers, and arrays are based on pointer-arithmetic.</p>\n\n<p><strong><a href=\"https://en.wikipedia.org/wiki/PDP-7\" rel=\"nofollow noreferrer\">PDP-7 is an 18-bit word-addressable ISA</a></strong>.  That's probably why B has no <code>char</code> type.  But its registers are wide enough to hold pointers so it does naturally support B and C's pointer model (that pointers aren't really special, you can copy them around and deref them, and you can take the address of anything).  So flat memory model, no \"special\" area of memory like you find on segmented machines or some 8-bit micros with a zero page.</p>\n\n<p>Things like C99 VLAs (and unlimited size local variables) and unlimited reentrancy and recursion imply a callstack or other allocation mechanism for function local-variable context (aka stack frames on a normal machine that uses a stack pointer.)</p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570695280, "post_id": 58313191, "comment_id": 102996300, "body": "<i>a CPU is usually seen as using a Harvard Architecture if it has separate caches for code and data</i> That sloppy terminology (instead of Modified Harvard) is usually only used when talking about bandwidth / performance, not computability.  I refuse to call split L1 caches on top of a unified address-space and single bus a Harvard machine, and so should everyone else!  In this context Harvard is (as you say) about having split address-spaces or at least split buses, allowing program in flash and data in RAM, for example."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570695515, "post_id": 58313191, "comment_id": 102996405, "body": "C++ on hardware where you have to fake coherence with software is maybe theoretically possible but not plausible for practical performance reasons.  Remember that a release-sequence has to make <i>all</i> preceding atomic and non-atomic operations visible to other threads that might synchronize-with it via an acquire load.  i.e. it has to do a full sync.  Also, unless you flush after every relaxed store, you at least risk violating the note that says stores should become visible to other threads promptly.  (Like on normal coherent shared mem that always tries to drain its store buffer ASAP)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570695799, "post_id": 58313191, "comment_id": 102996537, "body": "I&#39;m also not confident you could reliably implement seq-cst over non-coherent SHM with more than 2 nodes.  All threads have to agree on a global order of operations for seq_cst loads/stores (across objects).  I guess it&#39;s probably doable if you&#39;re willing to wait for a network RTT after every seq_cst store, but that&#39;s hardly a viable implementation.  C++ very much assumes that all threads will share <i>coherent</i> memory.  Machines with non-coherent shared memory in real life (some clusters) use it for fast message-passing under software control (e.g. MPI), not for single-system-image / threads."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570718758, "post_id": 58313191, "comment_id": 103009714, "body": "@PeterCordes: Well, I&#39;ll admit I haven&#39;t implemented it to be sure it&#39;d work out, but it seems like there are some optimizations that could be done. What we&#39;re talking about is basically similar to distributed database updates, which have been studied for years and fairly efficient ways to avoid most of the difficulties have been found."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1570719121, "post_id": 58313191, "comment_id": 103009913, "body": "@PeterCordes: As far as split caches (and such) being Harvard architecture or not: I mostly agree that it&#39;s sloppy terminology that I wish had never come into use--but the usage is now so common that (at best) miscommunication is almost inevitable if I try to treat Harvard Architecture as referring solely to machines with completely separate data and program storage. My real point was that the name is too widely abused to mean much--you need to specify more detail to be sure what you&#39;re saying isn&#39;t misunderstood."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570723737, "post_id": 58313191, "comment_id": 103012450, "body": "Yeah that&#39;s true about actual usage.  In my own answer, I said &quot;split-bus split-address-space Harvard&quot; to make sure it was clear.  But anyway, after further thought I&#39;m pretty sure Harvard vs. Von Neumann wasn&#39;t the point <i>at all</i> of being a Von Neumann Language.  Just like <a href=\"//stackoverflow.com/q/54882556\">Does the Harvard architecture have the von Neumann bottleneck?</a>.  Harvard is just a performance optimization of a stored-program machine that requires special instructions to modify program memory. Both have addresses and a sequential execution model, and the VN bottleneck."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 4, "last_activity_date": 1570661540, "last_edit_date": 1570661540, "creation_date": 1570660842, "answer_id": 58313191, "question_id": 58312638, "link": "https://stackoverflow.com/questions/58312638/is-c-considered-a-von-neumann-programming-language/58313191#58313191", "title": "Is C++ considered a Von Neumann programming language?", "body": "<p>I think trying to pin C++ (or most other languages) to a single architecture model is difficult at best. Let's consider C++ 98/03. As the question says, they fit with the Von Neumann model. Oh, but wait--they also fit about equally well (if not better) with Harvard architecture.</p>\n\n<p>For that matter, Harvard Architecture is really more a family of models than a single model. In particular, a CPU is usually seen as using a Harvard Architecture if it has separate caches for code and data--even if it's something like an x86, where the hardware does its best to hide that split from the code (e.g., you can write self-modifying code, and after you've modified the code, what you execute will be the new code--though there can be a substantial penalty, because the instruction cache isn't optimized to deal with modifications).</p>\n\n<p>But \"Harvard Architecture\" can also be used to describe things like some DSPs, which have two (or three) entirely separate memory buses connected to physically separate memory:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PpAos.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PpAos.gif\" alt=\"enter image description here\"></a></p>\n\n<p>The language rules to accommodate this are actually fairly subtle--to the point that unless you were looking for them, it would be easy to miss them entirely. For example, C and C++ define a pointer to a function as a separate thing from a pointer to data. They're also pretty careful to avoid giving any guarantees about things like addresses being comparable except under fairly limited circumstances (e.g., in C++ you're not guaranteed anything about comparing the address of a function to the address of data).</p>\n\n<p>Since the C++11 standard, however, that's changed a bit. While the core language retains the basic character of having some stream of instructions that are executed in a specified order, the library adds the ability to create multiple threads that can execute in parallel. These are allowed to communicate via shared memory, but you have to use an atomic variable or a memory fence to guarantee any degree of success. That allows implementation on machines anywhere from extremely tightly coupled, to fairly loosely coupled, where (for example) communication that looks like shared memory may actually involve sending data over something like a network connection, with a signal sent to tell the far end when a transmission is complete.</p>\n\n<p>So, again, the specification of the language isn't really tied to what would normally be seen as a single architecture at the hardware level. Rather the contrary, while it probably works better for what would normally be thought of as fairly tightly coupled machines, I believe it could be realized on fairly loosely coupled machines such as a cluster of entirely separate, disparate machines. You'd typically need (or at least want) to change how you wrote your code, but at least in theory you could write portable C++ code that ran on either.</p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1570699721, "post_id": 58315556, "comment_id": 102998617, "body": "After thinking some more, I think the Harvard / Von Neumann distinction isn&#39;t the interesting one in this context.  It&#39;s that programs are stored as instructions that are fetched and executed sequentially, vs. a fundamentally different model of computation like Cellular Automata.  i.e. it&#39;s an imperative model of computation, lending itself to sequential imperative languages like C or x86 assembly.  Updated my answer significantly with some theoretical CS stuff, and fun links like C not being Turing Complete (finite storage)."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1570683175, "last_edit_date": 1570683175, "creation_date": 1570682442, "answer_id": 58315556, "question_id": 58312638, "link": "https://stackoverflow.com/questions/58312638/is-c-considered-a-von-neumann-programming-language/58315556#58315556", "title": "Is C++ considered a Von Neumann programming language?", "body": "<p>C++ is a specification written in English in a standard. See <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf\" rel=\"nofollow noreferrer\">n3337</a> -late draft of C++11.</p>\n\n<p>As <a href=\"https://stackoverflow.com/a/58313191/841108\">Jerry Coffin</a> and <a href=\"https://stackoverflow.com/a/58313095/841108\">Peter Cordes</a> are explaining, the official model is a parallel random machine.</p>\n\n<p>But you generally code in C++ by using a compiler and running your program (unless you code embedded systems) under some <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">operating system</a> (e.g. Windows or Linux; read also <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\">this</a>). Many OSes provide <a href=\"https://en.wikipedia.org/wiki/Dynamic_loading\" rel=\"nofollow noreferrer\">dynamic loading</a> facilities (e.g. <a href=\"http://man7.org/linux/man-pages/man3/dlopen.3.html\" rel=\"nofollow noreferrer\">dlopen(3)</a> on Linux) and most computers could have C++ compilers.</p>\n\n<p>Then you <em>practically</em> could generate C++ code at runtime, fork a compilation of that generated C++ code as a <a href=\"https://en.wikipedia.org/wiki/Plug-in_(computing)\" rel=\"nofollow noreferrer\">plugin</a>, then <code>dlopen</code> that generated plugin. And on Linux you can do that many times (e.g. have dozen of thousands of such generated plugins, see my <a href=\"https://github.com/bstarynk/bismon/\" rel=\"nofollow noreferrer\">bismon</a> and <a href=\"https://github.com/bstarynk/misc-basile/blob/master/manydl.c\" rel=\"nofollow noreferrer\">manydl.c</a> programs).</p>\n\n<p>You could also find several JIT-compiling C++ libraries, such as <a href=\"https://gcc.gnu.org/onlinedocs/jit/\" rel=\"nofollow noreferrer\">libgccjit</a> or <a href=\"https://llvm.org\" rel=\"nofollow noreferrer\">LLVM</a>.</p>\n\n<p>Practically speaking, <strong>C++ programs can generate code at runtime then use it</strong> (even if that is outside of the C++ standard). And that is characteristic of Von Neumann machines.</p>\n"}], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1308, "favorite_count": 1, "accepted_answer_id": 58313095, "answer_count": 3, "score": 6, "last_activity_date": 1570735367, "creation_date": 1570656876, "last_edit_date": 1570683226, "question_id": 58312638, "link": "https://stackoverflow.com/questions/58312638/is-c-considered-a-von-neumann-programming-language", "title": "Is C++ considered a Von Neumann programming language?", "body": "<p>The term <a href=\"https://en.wikipedia.org/wiki/Von_Neumann_programming_languages\" rel=\"nofollow noreferrer\"><strong>Von Neumann languages</strong></a> is applied to programming languages whose computational model is based on the <a href=\"https://en.wikipedia.org/wiki/Von_Neumann_architecture\" rel=\"nofollow noreferrer\"><strong>Von Neumann computer architecture</strong></a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GNw7I.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GNw7I.jpg\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>Is C++ considered a Von Neumann language, or if it's not (e.g., because of asynchronous execution with the advent of threads) was it ever considered a Von Neumann language?</li>\n<li>Is there an architecture that C++'s computational model/abstract machine is based on and thus can be classified as a language of that architecture?</li>\n</ul>\n"}, {"tags": ["c++", "inheritance", "operator-overloading", "friend"], "comments": [{"owner": {"reputation": 382, "user_id": 5623147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da068ffce1337828392e929ed1e3921c?s=128&d=identicon&r=PG&f=1", "display_name": "Matriac", "link": "https://stackoverflow.com/users/5623147/matriac"}, "edited": false, "score": 1, "creation_date": 1570656713, "post_id": 58312520, "comment_id": 102986176, "body": "its because second doesnt have access to those variables. They have to be protected instead of private if you want to have access to them in  child class"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1570656913, "post_id": 58312520, "comment_id": 102986242, "body": "<code>class second</code> <b>also</b> cannot access those variables.  That is how <code>private</code> works.  They are privately owned by<code>class first</code>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 4, "creation_date": 1570657080, "post_id": 58312520, "comment_id": 102986300, "body": "Your friends can see your private parts, but they can&#39;t see your parents&#39; private parts."}], "answers": [{"tags": [], "owner": {"reputation": 2339, "user_id": 1102805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de42f74b5509b8af4bd0f255d05fd94?s=128&d=identicon&r=PG", "display_name": "darcamo", "link": "https://stackoverflow.com/users/1102805/darcamo"}, "is_accepted": false, "score": 1, "last_activity_date": 1570657377, "creation_date": 1570657377, "answer_id": 58312708, "question_id": 58312520, "link": "https://stackoverflow.com/questions/58312520/overloading-cannot-access-inherited-private-data/58312708#58312708", "title": "Overloading &lt;&lt; Cannot Access Inherited Private Data", "body": "<p>When you write</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>friend ostream &amp;operator &lt;&lt; (ostream &amp;output, second &amp;dS);\n</code></pre>\n\n<p>you are allowing some external function with that signature to have access to any internal attribute/member your <code>second</code> class has access. That means <code>operator&lt;&lt;</code> will have access to the attribute <code>f</code> even though it is private. However, your <code>second</code> class does not have access to the private data from the base class. Thus, it cannot give that access to a <code>friend</code> function.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9411000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "drowsell", "link": "https://stackoverflow.com/users/9411000/drowsell"}, "edited": false, "score": 0, "creation_date": 1570911161, "post_id": 58315140, "comment_id": 103068904, "body": "Thanks, I think this is the real solution that I have to go with!"}], "tags": [], "owner": {"reputation": 23, "user_id": 12166979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d87d6c97888153d2d894edbfd9dbf8?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/12166979/brian"}, "is_accepted": false, "score": 0, "last_activity_date": 1570678889, "creation_date": 1570678889, "answer_id": 58315140, "question_id": 58312520, "link": "https://stackoverflow.com/questions/58312520/overloading-cannot-access-inherited-private-data/58315140#58315140", "title": "Overloading &lt;&lt; Cannot Access Inherited Private Data", "body": "<p>As the others said, the second Class does not have access to the private members of the first class. You could try writing some set and get methods in the first class. The get methods would return the value (that i'm assume you're seeking). You could call this function in the second class. Not sure if that's going overboard for what you're looking for though. Might just want to do the overloading in the fist class</p>\n"}], "owner": {"reputation": 11, "user_id": 9411000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "drowsell", "link": "https://stackoverflow.com/users/9411000/drowsell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1570678889, "creation_date": 1570656267, "last_edit_date": 1570656929, "question_id": 58312520, "link": "https://stackoverflow.com/questions/58312520/overloading-cannot-access-inherited-private-data", "title": "Overloading &lt;&lt; Cannot Access Inherited Private Data", "body": "<p>I am trying to overload the <code>operator&lt;&lt;</code> from the class <code>second</code>. The problem is some of the data I am trying to access is private in class <code>first</code>. Why am I unable to access the private data since I am using the friend function?</p>\n\n<p>I found that the overload is only working with non-inherited private data. </p>\n\n<pre><code>class first\n{\npublic:\n\n    student(string a, string b, float c, int d);\n\nprivate:\n    string a;\n    string b;\n    float c;\n    int d;\n    int e;\n    static int count;   \n};\n\n\nclass second : public first\n{\npublic:\n\n    second(string a, string b, float c, int d, string f);\n\n\n    friend ostream &amp;operator &lt;&lt; (ostream &amp;output, second &amp;dS);\n    friend istream &amp;operator &gt;&gt; (istream &amp;input, second &amp;dS);\n\nprivate:\n    string f; \n};\n\n\n// Separate File\n\nostream &amp;operator &lt;&lt;(ostream&amp; output, second&amp; dS){\n\n    output &lt;&lt; iS.a &lt;&lt; endl;\n\n    output &lt;&lt; iS.f &lt;&lt; endl;\n\n\nreturn output;\n}\n\n</code></pre>\n\n<p>This is the error I am getting:</p>\n\n<pre><code>overload.cpp:27:18: error: 'a' is a private member of 'first'\n    output &lt;&lt; dS.a &lt;&lt; endl;\n                 ^\n./example.hpp:51:9: note: declared private here\n        string a; \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570657600, "post_id": 58312489, "comment_id": 102986448, "body": "Recommendations: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">Read How to debug small programs</a>. Make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Step through the code with a debugger looking for places where the program does the unexpected. Use descriptive variable names."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1570657748, "post_id": 58312489, "comment_id": 102986485, "body": "I don&#39;t want to get into a revert-war with you, so please explain what putty has to do with this question. Far as I can see it serves no purpose here other than as one of hundreds of possible terminal emulators."}, {"owner": {"reputation": 421, "user_id": 11521482, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QIrZ4uBKGpc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfy52SQZZoz_RBLxJ0jRvF-_uNwbQ/mo/photo.jpg?sz=128", "display_name": "Mathias Schmid", "link": "https://stackoverflow.com/users/11521482/mathias-schmid"}, "edited": false, "score": 0, "creation_date": 1570660120, "post_id": 58312489, "comment_id": 102987071, "body": "In function <code>hexa()</code> you overwrite the upper hex digit with the lower. Use <code>q[2*i] += hexmap[ ( byte &amp; 0xF0 ) &gt;&gt; 4 ];</code> and <code>q[2*i+1] += hexmap[ ( byte &amp; 0x0F ) &gt;&gt; 0 ];</code> and it works. In function <code>binary()</code> you will loose leading binary zero digits. If you want the leading binary zero digits you need to loop over each of the 8 character bits and shift right during each loop cycle. Why you don&#39;t return the result as string and avoid allocating memory ?"}, {"owner": {"reputation": 3, "user_id": 12185654, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gy3ST9S1AEQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3redtebGWpcotaweX_yNs6jaDTfULQ/photo.jpg?sz=128", "display_name": "hacobo", "link": "https://stackoverflow.com/users/12185654/hacobo"}, "edited": false, "score": 0, "creation_date": 1570660923, "post_id": 58312489, "comment_id": 102987255, "body": "I have to use the write function to print it out."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570661725, "post_id": 58312489, "comment_id": 102987437, "body": "@hacobo <i>I have to use the write function to print it out</i> -- How does this prevent you from returning a <code>std::string</code>?  Do you believe that you can&#39;t print out a <code>std::string</code>&#39;s contents?  There is absolutely no need for <code>new char []</code> or char pointers in your code.  Everything can be done using <code>std::string</code>."}, {"owner": {"reputation": 3, "user_id": 12185654, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gy3ST9S1AEQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3redtebGWpcotaweX_yNs6jaDTfULQ/photo.jpg?sz=128", "display_name": "hacobo", "link": "https://stackoverflow.com/users/12185654/hacobo"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570662569, "post_id": 58312489, "comment_id": 102987572, "body": "@PaulMcKenzie How do I print out a string using the write() function. It says it needs Write(int,const *void,size_t)"}, {"owner": {"reputation": 421, "user_id": 11521482, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QIrZ4uBKGpc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfy52SQZZoz_RBLxJ0jRvF-_uNwbQ/mo/photo.jpg?sz=128", "display_name": "Mathias Schmid", "link": "https://stackoverflow.com/users/11521482/mathias-schmid"}, "edited": false, "score": 0, "creation_date": 1570664909, "post_id": 58312489, "comment_id": 102988018, "body": "If you have a <code>std::string str</code> then you can use <code>write(STDOUT_FILENO, str.c_str(), str.size());</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570665908, "post_id": 58312489, "comment_id": 102988207, "body": "@hacobo A string class would be almost useless if it had no way to get the data as a <code>char *</code> (or const char *) and use it.  The <code>c_str()</code> function gives you a pointer to the string data."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1570669001, "post_id": 58312489, "comment_id": 102988745, "body": "It looks like you are presenting two problems here. 1) Produce the binary representation of your string. 2) Produce the hexadecimal representation of your string. You might find it easier to focus and work on one at a time. Not to mention that multiple inquiries in a Stack Overflow question tend to produce results that are of no help to future visitors."}], "owner": {"reputation": 3, "user_id": 12185654, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gy3ST9S1AEQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3redtebGWpcotaweX_yNs6jaDTfULQ/photo.jpg?sz=128", "display_name": "hacobo", "link": "https://stackoverflow.com/users/12185654/hacobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 763, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570668570, "creation_date": 1570656105, "last_edit_date": 1570668570, "question_id": 58312489, "link": "https://stackoverflow.com/questions/58312489/converting-a-char-array-to-binary-and-returning-the-array", "title": "Converting a char array to binary and returning the array", "body": "<p>I am trying to convert a char array to hexadecimal and binary. Then returning those values as a char array to write it out to standard output. Since I am not allowed to use <code>cout</code> for the output, I won\u2019t be able to use the hex IO manipulator to accomplish this. Likewise, functions from the printf family using a format of %x are not permitted either.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>constexpr char hexmap[] = {'0', '1', '2', '3', '4', '5', '6', '7',\n                           '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'};\n\nchar *hexa(char buffer[],int size){\n    string str;\n    char *q = new char[10000];\n    for( int i = 0; i &lt; size; ++i )\n    {\n         char const byte = buffer[i];\n         q[i] += hexmap[ ( byte &amp; 0xF0 ) &gt;&gt; 4 ];\n         q[i] += hexmap[ ( byte &amp; 0x0F ) &gt;&gt; 0 ];\n    }\n    //  for (int i = 0; i &lt; str.length();i++){\n    //  q[i] = str[i];\n    //  cout &lt;&lt; q[i];\n    //  }\n    return q;\n\n}\n\nchar *binary(char buffer[]){\n    string n(buffer);\n    int s = n.length(); \n    string t = \"\";\n        for (int i = 0; i &lt;= s; i++)  { \n         int val = int(n[i]); \n         string bin = \"\"; \n         while (val &gt; 0){\n            (val % 2)? bin.push_back('1'):\n                bin.push_back('0');\n            val /= 2;\n         }\n         reverse(bin.begin(),bin.end());\n             t += bin;\n        }\n    char *c = new char[t.length()];\n    for (int i = 0; i &lt; t.length(); ++i){\n       c[i] = t[i];\n\n    }\n    return c;             \n\n}\n</code></pre>\n\n<pre>\n% cat file1\nHello World\n% ./dog \u00adn 5 \u00adx file1\n65486c6c6f\n% ./dog \u00adn 5 \u00adb file1\n0110010101001000011011000110110001101111\n</pre>\n\n<p>My Results:</p>\n\n<pre>\nBinary:1001000110111010010010000\nHex:lk\u2592\u2592\u2592beio\u2592kbknojbg\u2592\u2592b\u2592lk\u2592\n</pre>\n"}, {"tags": ["c++", "visual-studio-code"], "answers": [{"tags": [], "owner": {"reputation": 4912, "user_id": 1330381, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/9TOv2.png?s=128&g=1", "display_name": "jxramos", "link": "https://stackoverflow.com/users/1330381/jxramos"}, "is_accepted": false, "score": 1, "last_activity_date": 1570659650, "last_edit_date": 1570659650, "creation_date": 1570656431, "answer_id": 58312556, "question_id": 58312341, "link": "https://stackoverflow.com/questions/58312341/visual-studio-code-settings-json-family-of-c-cpp-xxx-configurations-vs-c-cpp-pr/58312556#58312556", "title": "Visual Studio Code: settings.json family of C_Cpp.xxx configurations vs c_cpp_properties.json?", "body": "<p>So there is a precedence relationship apparently: the <code>C_Cpp.xxx</code> family of settings serve as global defaults that can serve as a user level default (<code>~/Library/Application Support/Code/User/settings.json</code>) or a folder level default if so configured.</p>\n\n<p>The relationship is covered in this documentation: <a href=\"https://code.visualstudio.com/docs/cpp/customize-default-settings-cpp\" rel=\"nofollow noreferrer\">(Customizing default settings)</a></p>\n\n<blockquote>\n  <p>You can override the default values for properties set in c_cpp_properties.json</p>\n</blockquote>\n\n<p>Would probably have been better understood if written as:</p>\n\n<blockquote>\n  <p>You can override the default values for properties defined in <code>settings.json</code> with those set in <code>c_cpp_properties.json</code>.</p>\n</blockquote>\n\n<p>The understanding here being that there's a name correspondence and matching between the two contexts. The language in the documentation seems to denote stuff in <code>settings.json</code> with the terminology of <em>\"VS Code settings\"</em>.</p>\n\n<p>This makes more sense when you actually manage to create a <code>c_cpp_properties.json</code> in a workspace by invoking one of the commands:\n<a href=\"https://i.stack.imgur.com/w8MtN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w8MtN.png\" alt=\"c_cpp_properties.json creating command\"></a></p>\n\n<p>Then you'll find the newly generated file in your <code>.vscode</code> folder\n<a href=\"https://i.stack.imgur.com/J2ams.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J2ams.png\" alt=\"c_cpp_properties.json generated in .vscode folder\"></a></p>\n\n<p>The default config when editing via JSON renders on my mac as...</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>{\n    \"configurations\": [\n        {\n            \"name\": \"Mac\",\n            \"defines\": [],\n            \"macFrameworkPath\": [\n                \"/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/System/Library/Frameworks\"\n            ],\n            \"compilerPath\": \"/usr/bin/clang\",\n            \"intelliSenseMode\": \"clang-x64\"\n        }\n    ],\n    \"version\": 4\n}\n</code></pre>\n\n<p>Just for reference all the itemized Cpp configurations are laid out here <a href=\"https://code.visualstudio.com/docs/cpp/c-cpp-properties-schema-reference\" rel=\"nofollow noreferrer\">(c_cpp_properties.json reference)</a>, the mapping going as:</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>// settings.json\n{\n    C_cpp.default.&lt;configName&gt; : &lt;configValue&gt;\n}\n</code></pre>\n\n<p>==></p>\n\n<pre class=\"lang-json prettyprint-override\"><code>// c_cpp_properties.json\n{\n    \"configurations\": [\n    {\n        \"name\": \"MyLocalConfig\",\n        &lt;configName&gt;:&lt;configValue&gt;,\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 4912, "user_id": 1330381, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/9TOv2.png?s=128&g=1", "display_name": "jxramos", "link": "https://stackoverflow.com/users/1330381/jxramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570659650, "creation_date": 1570655317, "last_edit_date": 1570658177, "question_id": 58312341, "link": "https://stackoverflow.com/questions/58312341/visual-studio-code-settings-json-family-of-c-cpp-xxx-configurations-vs-c-cpp-pr", "title": "Visual Studio Code: settings.json family of C_Cpp.xxx configurations vs c_cpp_properties.json?", "body": "<p>I'm pretty new to using the C/C++ Extension for VSCode. I'm confused what the precise roles and relationships are between configurations defined in the <code>.vscode/c_cpp_properties.json</code> file and the <code>C_Cpp.xxx</code> family of settings allowed in the <code>settings.json</code> file.</p>\n\n<p>Do these two mechanisms allow the configuration of the same settings just under different precedence rules or something? </p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 16677, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "is_accepted": false, "score": 0, "last_activity_date": 1570656627, "creation_date": 1570656627, "answer_id": 58312593, "question_id": 58312202, "link": "https://stackoverflow.com/questions/58312202/c-while-loop-insight-request/58312593#58312593", "title": "C++ while loop insight request", "body": "<p>Your check for valid characters is too broad, and doesn't really make sense:</p>\n\n<pre><code>if (ch &gt;= 0 || ch &lt;= 9 || ch &lt;= 'a' || ch &gt;= 'z' || ch &lt;= 'A' || ch &gt;= 'Z' || ch != '_')\n</code></pre>\n\n<p>Every possible value of <code>ch</code> is going to be greater than or equal to zero, so this expression is equivalent to <code>(true || a || b || c || ... || z)</code> and it's always going to resolve to true.</p>\n\n<p>Instead, see if it's below <code>'A'</code>, between <code>'Z'</code> and <code>'a'</code> or beyond <code>'z'</code> and if so, it's invalid. </p>\n\n<p>Also, when checking if it's a digit, you need to check if it's \u2265 <code>'0'</code> <strong>and</strong> \u2264 <code>'9'</code> as <em>characters</em>. It's important that you compare it to the character representation of 0 and 9 because the value of the character <code>'0'</code> not actually <code>0</code> (<a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">it turns out it's actually <code>48</code></a>) and likewise with <code>'9'</code>:</p>\n\n<pre><code>if ( ch &lt; 'A'  \n || (ch &gt; 'Z' &amp;&amp; ch &lt; 'a')\n || ch &gt; 'z')\n{\n    if (ch &gt;= '0' &amp;&amp; ch &lt;= '9')\n    {\n        cout &lt;&lt; \"Not a valid identifier.\" &lt;&lt; endl;\n        cout &lt;&lt; \"Identifiers cannot start with a digit.\" &lt;&lt; endl;\n        ch = '\\n';\n    }\n    else\n    {\n        cout &lt;&lt; \"Not a valid identifier.\" &lt;&lt; endl;\n        cout &lt;&lt; \"Invalid character.\" &lt;&lt; endl;\n        ch = '\\n';\n    }\n}\n</code></pre>\n\n<p>It's not really clear what the check after that is meant to do? Is it only meant to allow letters? That seems strange after saying \"Identifiers cannot <strong>start</strong> with a digit.\" anyway:</p>\n\n<pre><code>if (ch &gt;= 'a' || ch &lt;= 'z' || ch &gt;= 'A' || ch &lt;= 'Z')\n</code></pre>\n\n<p>This has essentially the same issue where every character is going to be either above 'a' or below 'z' or both, so this will always resolve to true. Instead, use <code>&amp;&amp;</code> to check for being within a range:</p>\n\n<pre><code>if ((ch &gt;= 'a' &amp;&amp; ch &lt;= 'z') || (ch &gt;= 'A' &amp;&amp; ch &lt;= 'Z'))\n</code></pre>\n\n<p>Hopefully that addresses your question.</p>\n"}, {"tags": [], "owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "is_accepted": false, "score": 0, "last_activity_date": 1570657303, "creation_date": 1570657303, "answer_id": 58312701, "question_id": 58312202, "link": "https://stackoverflow.com/questions/58312202/c-while-loop-insight-request/58312701#58312701", "title": "C++ while loop insight request", "body": "<p>The logic is not great; <code>i</code> is valid, but your code says it's not. It at least goes back to the menu just fine. Your code is also behaving like it will respond immediately as letters are being typed. That is not the case. It won't print anything until the user presses Enter.</p>\n\n<p>It seems the issue is your variable <code>ch</code> being a <code>char</code>. If I type anything that's longer than a single character, what will happen is that the single character gets evaluated, and the remaining characters I typed <em>remain in the input stream</em>. It looks like you are attempting to handle that, but it's not working. I am not going to spend time delving into the why, partly because it's complex, partly because I don't know the full intricacies of <code>istream</code> behavior.</p>\n\n<p>What I will say is that if you want to handle a multi-character input, use cin.get() everywhere and not just sometimes. You can do processing of each character, but again, nothing will go to the screen until the user presses Enter.</p>\n\n<p>But here's code that appears to work:</p>\n\n<pre><code>#include &lt;cctype&gt;  // isalpha() and isalnum()\n#include &lt;string&gt;  // ch is now a std::string\n// ...\ncase IDENTIFIER_CHOICE:\n    cout &lt;&lt; \"Please enter an identifier and press [Enter] immediately after.  \";\n\n    std::cin.ignore(256, '\\n');  // needed because of getline behavior\n    std::getline(std::cin, ch);\n    if (!(isalpha(ch[0]) || ch[0] == '_')) {\n        cout &lt;&lt; \"Not valid.\\n\";\n        break;\n    }\n\n    for (int i = 1; i &lt; ch.size(); ++i) {\n        if (!isalnum(ch[i])) {\n            cout &lt;&lt; \"Not valid.\\n\";\n            break;\n        }\n    }\n\n    cout &lt;&lt; \"Valid.\\n\";\n    break;\n// ...\n</code></pre>\n\n<p>With <code>cin</code>, when you press Enter, that keystroke is saved in the input stream. <code>getline()</code> doesn't behave the way we expect because while <code>cin</code> will typically ignore that keystroke, <code>getline</code> does not. So I just tell <code>cin</code> to ignore an arbitrary (but sufficient in this case) amount of characters in the stream up to and including the Enter keystroke (Mac and Linux, should still behave for Windows (I think)). </p>\n\n<p>This is still far from bulletproof input validation (that's impossible), but I think it suffices for what you're working on.</p>\n"}], "owner": {"reputation": 11, "user_id": 12191441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70c6b10cfc62af43ae7fac7b7dc3c645?s=128&d=identicon&r=PG&f=1", "display_name": "Boxsteam", "link": "https://stackoverflow.com/users/12191441/boxsteam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570657400, "creation_date": 1570654727, "last_edit_date": 1570657400, "question_id": 58312202, "link": "https://stackoverflow.com/questions/58312202/c-while-loop-insight-request", "title": "C++ while loop insight request", "body": "<p>basically I am having weird trouble with my while loop near the beginning of the program which checks for user validation on their choice of activity. When they choose the first activity and complete it, it works fine, but when they complete the second activity, it will go into runtime and keep requesting the user to input a valid choice, even though they haven't even gotten the chance to input a choice. Any tips?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    const int DIGITS_CHOICE = 1, IDENTIFIER_CHOICE = 2, DOUBLE_CHOICE = 3, EXIT_CHOICE = 4;\n    int choice;\n\n    int userNumber, storedNumber, factor = 10, digitCounter = 0, subtractor;\n\n    char ch;\n\n    do\n    {\n        cout &lt;&lt; \"\\n\\n\\t\\tPlease choose an option:\\n\\n\"\n            &lt;&lt; \"1. How many digits?\\n\"\n            &lt;&lt; \"2. Is this a valid C++ Identifer?\\n\"\n            &lt;&lt; \"3. Is this a double letter word?\\n\"\n            &lt;&lt; \"4. Exit\\n\";\n\n        cout &lt;&lt; endl &lt;&lt; \"Choice: \";\n        cin &gt;&gt; choice;\n\n        while (choice &lt; DIGITS_CHOICE || choice &gt; EXIT_CHOICE)\n        {\n            cout &lt;&lt; endl &lt;&lt; \"Please enter a valid menu option: \";\n            cin &gt;&gt; choice;\n        }\n\n        if (choice != EXIT_CHOICE)\n        {\n            switch (choice)\n            {\n            case DIGITS_CHOICE:\n                cout &lt;&lt; \"Please enter an integer: \";\n                cin &gt;&gt; userNumber;\n\n                storedNumber = userNumber;\n\n                if (userNumber &lt; 10)\n                {\n                    digitCounter = 1;\n                }\n                else\n                {\n                    while (userNumber != 0)\n                    {\n                        subtractor = userNumber % factor;\n                        if (subtractor &gt; 0)\n                        {\n                            userNumber = userNumber - subtractor;\n                            factor *= 10;\n                            digitCounter++;\n                        }\n                        else\n                        {\n                            userNumber = 0;\n                        }\n                    }\n                }\n\n                cout &lt;&lt; storedNumber &lt;&lt; \" has \" &lt;&lt; digitCounter &lt;&lt; \" digit(s).\" &lt;&lt; endl;\n                factor = 10;\n                digitCounter = 0;\n                break;\n\n            case IDENTIFIER_CHOICE:\n                cout &lt;&lt; \"Please enter an identifier and press [Enter] immediately after.  \";\n\n                cin &gt;&gt; ch;\n\n                if (ch &gt;= 0 || ch &lt;= 9 || ch &lt;= 'a' || ch &gt;= 'z' || ch &lt;= 'A' || ch &gt;= 'Z' || ch != '_')\n                {\n                    if (ch &gt;= 0 || ch &lt;= 9)\n                    {\n                        cout &lt;&lt; \"Not a valid identifier.\" &lt;&lt; endl;\n                        cout &lt;&lt; \"Identifiers cannot start with a digit.\" &lt;&lt; endl;\n                        ch = '\\n';\n                    }\n                    else\n                    {\n                        cout &lt;&lt; \"Not a valid identifier.\" &lt;&lt; endl;\n                        cout &lt;&lt; \"Inavlid character.\" &lt;&lt; endl;\n                        ch = '\\n';\n                    }\n                }\n\n                while (ch != '\\n')\n                {\n                    if (ch &gt;= 'a' || ch &lt;= 'z' || ch &gt;= 'A' || ch &lt;= 'Z')\n                    {\n                        cin.get(ch);\n                    }\n                }\n                break;\n            case DOUBLE_CHOICE:\n                break;\n            }\n        }\n\n    } while (choice != EXIT_CHOICE);\n    return 0;\n}\n</code></pre>\n\n<p>Also the program isn't complete yet. the third option has nothing and the 2nd option is almost complete. the first activity though is complete :)</p>\n"}, {"tags": ["c++", "performance", "draw"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1570654959, "post_id": 58312197, "comment_id": 102985581, "body": "That literally translates to a single  <code>sub esp, N</code> instruction (or close enough, where N is the count of aligned bytes required for 25 structures) if the vertex type is POD (and it probably is). You know you could always ram this through asm-list generation and check for what is happening in optimized release builds."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1570655762, "post_id": 58312197, "comment_id": 102985872, "body": "<code>ALLEGRO_VERTEX vertList[25];</code> <i>&quot;does the allocation of the 25-element vertex array have any negative effects on speed?&quot;</i> - No. You are <i>declaring</i> an array with <i>automatic storage duration</i> on the function stack itself. The function stack will be provided with sufficient size to handle a 25-element array many times over. There is no call to a memory allocation function, it is simply a declaration. (which is probably one of the, if not the, most efficient way to get a 25-element array)"}], "answers": [{"tags": [], "owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "is_accepted": true, "score": 1, "last_activity_date": 1570655185, "creation_date": 1570655185, "answer_id": 58312311, "question_id": 58312197, "link": "https://stackoverflow.com/questions/58312197/does-this-allocation-have-any-effects-on-speed/58312311#58312311", "title": "Does this allocation have any effects on speed?", "body": "<p>The only way to tell it for sure, is to measure. But what else could you use instead, to compare with? Allocating on the heap would be obviously slower. Using a global variable to hold the vertices could be an option - only for perf benchmarking.</p>\n\n<p>Given that the stack allocation of trivially constructible objects is usually translates to a simple change of the stack pointer, the allocation itself probably wouldn't be a big deal. What could have an observable effect tough, is touching extra cache lines. The less cache lines the code writes, the better, from the performance perspective. Therefore, you can experiment with splitting <code>vertList[25]</code> into cache line sized arrays, and calling <code>al_draw_prim</code> multiple times. A benchmark would show if there's a difference. </p>\n"}], "owner": {"reputation": 731, "user_id": 8184859, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9G1p6.jpg?s=128&g=1", "display_name": "Mode77", "link": "https://stackoverflow.com/users/8184859/mode77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58312311, "answer_count": 1, "score": 0, "last_activity_date": 1570655935, "creation_date": 1570654709, "last_edit_date": 1570655935, "question_id": 58312197, "link": "https://stackoverflow.com/questions/58312197/does-this-allocation-have-any-effects-on-speed", "title": "Does this allocation have any effects on speed?", "body": "<p>This non-member function <code>drawPoly()</code> draws an n-sided polygon in 3D space from a list of vertices.</p>\n\n<p>This function typically gets called thousands of times during normal execution and speed is critical.</p>\n\n<p>Ignoring the effects of the functions called within <code>drawPoly()</code>, does the allocation of the 25-element vertex array have any negative effects on speed?</p>\n\n<pre><code>void drawPoly(const meshx::Face&amp; face, gen::Vector position,\n    ALLEGRO_COLOR color, bool filled)\n{\n    ALLEGRO_VERTEX vertList[25];\n    std::size_t k = 0;\n\n    // ...For every vertex in the polygon...\n    for(; k &lt; face.getNumVerts(); ++k) {\n        vertList[k].x = position.x + face.alVerts[k].x;\n        vertList[k].y = position.y + face.alVerts[k].y;\n        vertList[k].z = position.z + face.alVerts[k].z;\n        vertList[k].u = 0;\n        vertList[k].v = 0;\n        vertList[k].color = color;\n    }\n    // Draw with ALLEGRO_VERTEXs and no textures.\n    if(filled) {\n        al_draw_prim(vertList, nullptr, nullptr,\n            0, k, ALLEGRO_PRIM_TRIANGLE_LIST);\n    } else {\n        al_draw_prim(vertList, nullptr, nullptr,\n            0, k, ALLEGRO_PRIM_LINE_LOOP);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "timer"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1570655405, "post_id": 58312194, "comment_id": 102985755, "body": "sleep does not consume &quot;process time&quot;. There is no correct function for your use case."}, {"owner": {"reputation": 1795, "user_id": 168235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10dacc51aadd2f2eef6ad5f3bd377f6e?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/168235/james"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1570655539, "post_id": 58312194, "comment_id": 102985802, "body": "expected output is 1 second -- even when ive sat at a breakpoint all day -- the sleep call is really just to give the program a real expected timing"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1570657342, "post_id": 58312194, "comment_id": 102986376, "body": "BTW, there is no language C/C++.  Your post is C++ because <code>std::chrono</code> is not in the C language (the C language doesn&#39;t have the <code>::</code> operator). You should update your tags accordingly."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1570657464, "post_id": 58312194, "comment_id": 102986409, "body": "Yup, debugging real-time code is tough, because time doesn&#39;t stand still when you hit a breakpoint. Too bad. Deal with it."}, {"owner": {"reputation": 1795, "user_id": 168235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10dacc51aadd2f2eef6ad5f3bd377f6e?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/168235/james"}, "edited": false, "score": 0, "creation_date": 1570668086, "post_id": 58312194, "comment_id": 102988604, "body": "Removing all references to sleep, it was a distraction from my intended question. Also mentioning that I will accept any platform-specific example (though ideally windows) way of accomplishing this."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1570669733, "post_id": 58312194, "comment_id": 102988871, "body": "Since you are targeting Windows, why do you request a POSIX way?"}], "answers": [{"tags": [], "owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "is_accepted": false, "score": 1, "last_activity_date": 1570669618, "last_edit_date": 1570669618, "creation_date": 1570668223, "answer_id": 58313965, "question_id": 58312194, "link": "https://stackoverflow.com/questions/58312194/c-c-elapsed-process-cycles-not-including-at-breakpoints/58313965#58313965", "title": "C/C++ elapsed process cycles, not including at breakpoints", "body": "<p>Yes, trying to measure the CPU time of your process would be dependent on support from your operating system. Rather than look up what support is available from various operating systems, though, I would propose that your approach is flawed.</p>\n\n<p>Debugging typically uses a debug build that has most optimizations turned off (to make it easier to do things like set breakpoints accurately). Timings on a non-optimized build lack practical value. Hence any timings of your program should usually be ignored when you are using breakpoints&ndash;even if the breakpoint is outside the timed section.</p>\n\n<p>To combine using breakpoints with timings, I would do the debugging in two phases. In one phase, you set breakpoints and look at what is happening in the debug build. In the other phase, you use identical input (redirect a file into <code>std::cin</code> if it helps) and time the process in the release build. There may be some back-and-forth between the stages as you work out what is going on. That's fine; the point is not to have exactly two phases, but to keep breakpoints and timings separate.</p>\n"}, {"tags": [], "owner": {"reputation": 218, "user_id": 9005776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X7XkgjzojQ0/AAAAAAAAAAI/AAAAAAAABQk/5IrfXRyNwt4/photo.jpg?sz=128", "display_name": "Phles", "link": "https://stackoverflow.com/users/9005776/phles"}, "is_accepted": false, "score": 0, "last_activity_date": 1570669119, "last_edit_date": 1570669119, "creation_date": 1570668804, "answer_id": 58314009, "question_id": 58312194, "link": "https://stackoverflow.com/questions/58312194/c-c-elapsed-process-cycles-not-including-at-breakpoints/58314009#58314009", "title": "C/C++ elapsed process cycles, not including at breakpoints", "body": "<p>Although JaMit gives a better answer (<a href=\"https://stackoverflow.com/a/58313965/9005776\">here</a>), it is possible but it depends entirely on your compiler and the amount of overhead this creates will probably slow down your program too much to get an accurate result. You can use whatever time recording function you please but either way you would have to:</p>\n\n<ul>\n<li>Record the start of the loop</li>\n<li>Record the start of the breakpoint</li>\n<li>Programmatically cause a breakpoint</li>\n<li>Record the end of the breakpoint</li>\n<li>Record the end of the loop.</li>\n</ul>\n\n<p>If you're looking for speed though, you really need to be testing in an optimized release mode without breakpoints and writing the output to the console or a file. Nonetheless, it is possible to do what you're trying to do, and here's a sample solution.</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;intrin.h&gt; //include for visual studio break\n#include &lt;iostream&gt;\nint main(void) {\n\n    for (int c = 0; c &lt; 100; c++) {\n        //Start of loop\n        auto start = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::high_resolution_clock::now().time_since_epoch()).count();\n        /*Do stuff here*/\n        auto startBreak = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::high_resolution_clock::now().time_since_epoch()).count();\n        //visual studio only\n        __debugbreak();\n        auto endBreak = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::high_resolution_clock::now().time_since_epoch()).count();\n        /*Do more stuff here*/\n        auto end = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::high_resolution_clock::now().time_since_epoch()).count();\n        /*Time for 1 pass of the loop, including all the records of getting the time*/\n        std::cout &lt;&lt; end - start - (endBreak - startBreak) &lt;&lt; \"\\n\";\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1570769844, "creation_date": 1570769844, "answer_id": 58334461, "question_id": 58312194, "link": "https://stackoverflow.com/questions/58312194/c-c-elapsed-process-cycles-not-including-at-breakpoints/58334461#58334461", "title": "C/C++ elapsed process cycles, not including at breakpoints", "body": "<p>given your objective: <em>which is my attempt to print the time elapsed between loops.</em></p>\n\n<p>in the C language:</p>\n\n<p>Note that <code>clock()</code> returns the number of clock tics since the program started.</p>\n\n<p>This code measures the elapsed time for each loop by showing the start/end time for each loop</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main( void )\n{\n    clock_t loopStart = clock();\n    clock_t loopEnd;\n\n\n    for( int i=0; i&lt; 10000; i++ )\n    {\n        loopEnd = clock();\n        // something here to be timed\n        printf(\"[%lf : %lf ms].\\n\", (double)loopStart/CLOCKS_PER_SEC, (double)loopEnd/CLOCKS_PER_SEC );\n        loopStart = loopEnd;\n    }\n}\n</code></pre>\n\n<p>Of course, if you want to display the actual number of clock ticks per loop, then remove the division by <code>CLOCKS_PER_SEC</code> and calculate the difference and only display the difference</p>\n"}], "owner": {"reputation": 1795, "user_id": 168235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10dacc51aadd2f2eef6ad5f3bd377f6e?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/168235/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1570769844, "creation_date": 1570654695, "last_edit_date": 1570668405, "question_id": 58312194, "link": "https://stackoverflow.com/questions/58312194/c-c-elapsed-process-cycles-not-including-at-breakpoints", "title": "C/C++ elapsed process cycles, not including at breakpoints", "body": "<p>See the following code, which is my attempt to print the time elapsed between loops.</p>\n\n<pre><code>void main()\n{\n    while (true)\n    {\n        static clock_t timer;\n\n        clock_t t = clock();\n        clock_t elapsed = t - timer;\n        float elapsed_sec = (float)elapsed / (float)CLOCKS_PER_SEC;\n        timer = t;\n\n        printf(\"[dt:%d ms].\\n\", (int)(elapsed_sec*1000));\n    }\n}\n</code></pre>\n\n<p>However, if I set a breakpoint and sit there for 10 seconds, when i continue execution the elapsed time includes that 5 seconds -- and I don't want it to, for my intended usage.</p>\n\n<p>I assume <code>clock()</code> is the wrong function, but what is the correct one?\nNote that if there IS no standard C or C++ single call for this -- well, how do you compute it? Is there a posix way? </p>\n\n<p>I suspect that this is actually information only knowable with platform-specific calls. If that is the case, i'd like to at least know how to do so on windows (msvc).</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1570654943, "post_id": 58312145, "comment_id": 102985572, "body": "Yes, specifying the full pathname will fix the issue. If it didn&#39;t, then you specified the path or filename incorrectly."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1570655674, "post_id": 58312145, "comment_id": 102985847, "body": "By default your data files need to be in the ProjectName folder unless you changed the debugger setting for current working directory that defaults to <code>$(ProjectDir)</code>. This is the same behavior for all versions of Visual Studio since at least the late 1990s."}], "answers": [{"tags": [], "owner": {"reputation": 218, "user_id": 9005776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X7XkgjzojQ0/AAAAAAAAAAI/AAAAAAAABQk/5IrfXRyNwt4/photo.jpg?sz=128", "display_name": "Phles", "link": "https://stackoverflow.com/users/9005776/phles"}, "is_accepted": true, "score": 2, "last_activity_date": 1570655749, "last_edit_date": 1570655749, "creation_date": 1570655064, "answer_id": 58312276, "question_id": 58312145, "link": "https://stackoverflow.com/questions/58312145/path-to-input-files-in-vs-2019/58312276#58312276", "title": "Path to input files in VS 2019", "body": "<p><img src=\"https://i.stack.imgur.com/iQLFd.png\" alt=\"Visual Studio Working Directory\"></p>\n\n<p>There is a setting in the current project settings for working directory.\nWhen you build a project in visual studio, the executable is run in this directory, regardless of which directory the executable is in.\nThe working directory is found under Project Settings >> Configuration Properties >> Debugging\nMore information about properties pages: \n<a href=\"https://docs.microsoft.com/en-us/cpp/build/working-with-project-properties?view=vs-2019\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/build/working-with-project-properties?view=vs-2019</a></p>\n"}], "owner": {"reputation": 565, "user_id": 1505713, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c325b88c929eab279dfbd4e5f4e8c26e?s=128&d=identicon&r=PG", "display_name": "user1505713", "link": "https://stackoverflow.com/users/1505713/user1505713"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 58312276, "answer_count": 1, "score": 0, "last_activity_date": 1570655749, "creation_date": 1570654490, "question_id": 58312145, "link": "https://stackoverflow.com/questions/58312145/path-to-input-files-in-vs-2019", "title": "Path to input files in VS 2019", "body": "<p>Visual Studio does not seem to be finding input files when I try to compile under \"Debug\":</p>\n\n<pre><code>/* in.dat exists in \n\n\\ProjectName\\\n\\ProjectName\\Debug\\\n\\Debug\\\n\n*/\n\nstring name = \"in.dat\";\nifstream ifs(name); // nullptr...\n</code></pre>\n\n<p>Are there specific places VS looks for input files? Specifying an absolute pathname did not solve the problem. </p>\n"}, {"tags": ["c++", "pointers", "memory-leaks"], "comments": [{"owner": {"reputation": 1120, "user_id": 4623418, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZIVAuvNP8WE/AAAAAAAAAAI/AAAAAAAAAEw/zzuok1S9_ZM/photo.jpg?sz=128", "display_name": "Bas in het Veld", "link": "https://stackoverflow.com/users/4623418/bas-in-het-veld"}, "edited": false, "score": 0, "creation_date": 1570653860, "post_id": 58311975, "comment_id": 102985157, "body": "This code won&#39;t compile. Please post code that is correct and can compile"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1570653865, "post_id": 58311975, "comment_id": 102985159, "body": "The code looks okay besides the fact that you don&#39;t update <code>capacity</code>.  Can you give us  a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that causes the memory leak to trigger?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1570653957, "post_id": 58311975, "comment_id": 102985198, "body": "How do you know, that such error is coming from <code>resize</code>? If you don&#39;t <code>delete[]</code> the memory anywhere outside of <code>resize</code> - that may be the cause of the issue."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1570654021, "post_id": 58311975, "comment_id": 102985222, "body": "Unrelated, but you don&#39;t do <code>structure.capacity *= 2;</code> after <code>structure.array = array</code> so <code>capacity</code> will stay at <code>1</code> even though you&#39;ve allocated 2 doubles."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570654223, "post_id": 58311975, "comment_id": 102985308, "body": "Why are you trying to do what <code>std::vector</code> does already?  Also, you didn&#39;t post a <code>main</code> program showing how you use your class."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1570654581, "post_id": 58311975, "comment_id": 102985435, "body": "Ask yourself what happens to the <i>final</i> instance of <code>Structure</code> (wherever that is). We don&#39;t know (obviously, since you posted no <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>), but without proper destruction the last allocation (which is also the first allocation if a resize never happened) is blatantly leaked."}, {"owner": {"reputation": 561, "user_id": 6781431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/474851c0a5ec3cf43cf852a2a6d8595a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Pearce", "link": "https://stackoverflow.com/users/6781431/chris-pearce"}, "edited": false, "score": 0, "creation_date": 1570654581, "post_id": 58311975, "comment_id": 102985436, "body": "It&#39;s quite likely that the place that this memory is leaking is not shown in the code you&#39;ve posted. As others have stated, the leak will happen when your struct gets destroyed. You have not included that location of your code with your question."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 3, "last_activity_date": 1570661733, "last_edit_date": 1570661733, "creation_date": 1570654532, "answer_id": 58312154, "question_id": 58311975, "link": "https://stackoverflow.com/questions/58311975/memory-leak-after-delete/58312154#58312154", "title": "Memory Leak after delete []", "body": "<p>Your struct is not following the <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of 3/5/0</a>, in particular it is missing a destructor to <code>delete[]</code> the current <code>array</code> when the struct itself is destroyed:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Structure {\n    double* array = new double[1];\n    int capacity = 1;\n\n    ~Structure() { delete[] array; } // &lt;-- add this!\n\n    /* also, you should add these, too:\n    Structure(const Structure &amp;)\n    Structure(Structure &amp;&amp;)\n    Structure&amp; operator=(const Structure &amp;)\n    Structure&amp; operator=(Structure &amp;&amp;)\n    */\n};\n</code></pre>\n\n<p>You really should be using <code>std::vector&lt;double&gt;</code> instead of using <code>new[]</code> directly. <code>std::vector</code> handles everything you are trying to do manually, and does it safer than you are:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;vector&gt;\n\nstruct Structure {\n    std::vector&lt;double&gt; array;\n\n    Structure() : array(1) {}\n};\n\nvoid resize (Structure&amp; structure) {\n    structure.array.resize(structure.array.size() * 2);\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;vector&gt;\n\nstruct Structure {\n    std::vector&lt;double&gt; array;\n\n    Structure() { array.reserve(1); }\n};\n\nvoid resize (Structure&amp; structure) {\n    structure.array.reserve(structure.array.capacity() * 2);\n}\n</code></pre>\n\n<p>Depending on how you are actually using the <code>array</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 12191324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660fddfc18f4e488d5c3f12b96610c04?s=128&d=identicon&r=PG&f=1", "display_name": "SethRowland", "link": "https://stackoverflow.com/users/12191324/sethrowland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1570661733, "creation_date": 1570653611, "question_id": 58311975, "link": "https://stackoverflow.com/questions/58311975/memory-leak-after-delete", "title": "Memory Leak after delete []", "body": "<p>I am having a memory leak issue and I can't figure out what might be causing it. I have a struct that contains an array. I occasionally need to resize the array, so I create a new array that is double the length of the old array, and copy all of the old values. Then I delete the array with \"delete [] array\", and reassign the old array with the new array.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Structure {\n    double* array = new double[1]\n    int capacity = 1;\n}\n\nvoid resize (Structure&amp; structure) {\n    double* array = new double[structure.capacity * 2];\n    for (int i = 0; i &lt; structure.capacity; i++) {\n        array[i] = structure.array[i];\n    }\n    delete [] structure.array;\n    structure.array = array;\n}\n</code></pre>\n\n<p>I expect the old array to be deallocated and replaced with the new array. Instead I get a memory leak error. </p>\n\n<pre><code>==91== 16 bytes in 1 blocks are definitely lost in loss record 1 of 1\n==91==    at 0x4C3089F: operator new[](unsigned long)\n</code></pre>\n"}, {"tags": ["c++", "vector", "foreach", "iterator"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1570653622, "post_id": 58311945, "comment_id": 102985033, "body": "Adding and removing elements to/from the vector while you are looping through it using iterators, such as in the case of a <a href=\"https://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">range-based <code>for</code> loop</a>, is <b>undefined behavior</b>, <code>pop_back()</code> and <code>push_back()</code> both invalidate the <code>end()</code> iterator. A range-based <code>for</code> loop caches the <code>end()</code> iterator before entering the loop, it does not call <code>end()</code> on each iteration.  A range-based <code>for</code> loop must not modify the vector itself, but it can modify the contents of the vector."}, {"owner": {"reputation": 561, "user_id": 6781431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/474851c0a5ec3cf43cf852a2a6d8595a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Pearce", "link": "https://stackoverflow.com/users/6781431/chris-pearce"}, "edited": false, "score": 2, "creation_date": 1570653658, "post_id": 58311945, "comment_id": 102985048, "body": "Using <code>pop_back()</code> does not necessarily modify the capacity of the vector. The memory is still there, but should not be accessed. This is undefined behaviour though, and doing it will cause you issues."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1570654066, "post_id": 58311945, "comment_id": 102985241, "body": "Maybe not quite a duplicate, but certainly closely related: <a href=\"https://stackoverflow.com/q/20317068/179910\">stackoverflow.com/q/20317068/179910</a>"}], "owner": {"reputation": 148, "user_id": 3625699, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002196543117/picture?type=large", "display_name": "user3625699", "link": "https://stackoverflow.com/users/3625699/user3625699"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 1, "closed_date": 1570653672, "answer_count": 0, "score": 1, "last_activity_date": 1570657154, "creation_date": 1570653461, "last_edit_date": 1570657154, "question_id": 58311945, "link": "https://stackoverflow.com/questions/58311945/c-stdvector-modifying-behavior-in-foreach-loop", "closed_reason": "Duplicate", "title": "c++ std::vector modifying behavior in foreach loop", "body": "<p>I have a simple yet troublesome case of using std::vector in C++. The pop_back method slowly decreases the size of the vector at the same time that it is being iterated in the for each loop. This however goes on with no problems and the size of the vector in the end of the for each loop is 0. \nHow come that the last elements are still able to be accessed while they are not in the vector? (calling push_back on last iteration places the new number on index 0 of the vector)</p>\n\n<pre><code>#include &lt;vector&gt;\n\nint main() {\n    std::vector&lt;int&gt; v1 = {1,2,3,4,5};\n    for(int&amp; n : v1){\n        n++;\n        std::cout &lt;&lt; n &lt;&lt; \" \";\n        v1.pop_back();\n        if(n==6){ v1.push_back(865); }\n    }\n    std::cout &lt;&lt; v1.size();\n    return 0;\n}\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "data-structures", "concurrency"], "comments": [{"owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570653657, "post_id": 58311902, "comment_id": 102985047, "body": "@Fran&#231;oisAndrieux thank you, that&#39;s a good point and actually what&#39;s already happening; I oversimplified my example code. I&#39;ve updated it it."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1570653696, "post_id": 58311902, "comment_id": 102985073, "body": "Instead of manually padding to avoid false sharing, you could use <code>alignas(std::hardware_destructive_interference_size)</code>. In a toolchain where  <code>std::hardware_destructive_interference_size</code> isn&#39;t available, I usually go for 64. It&#39;s just a guess but it seems to help."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1570654174, "post_id": 58311902, "comment_id": 102985286, "body": "You&#39;re only holding the lock while doing <code>map[i][j]=val;</code> right? If so, the lock should not significantly affect concurrency since most of the time it will be uncontended as the threads are busy in <code>somewhat_expensive_f</code>."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1570654377, "post_id": 58311902, "comment_id": 102985366, "body": "Do the other threads really need access to the values in the outer <code>map</code>? If not, just populate the inner map in each thread and add the whole thing to the outer map when it&#39;s ready."}, {"owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1570654603, "post_id": 58311902, "comment_id": 102985447, "body": "@DavidSchwartz the challenge is in the real application there are a handful of places where things are calculated and inserted and all of the insertions are on different areas of the map almost all of the time. I am seeing lock contention and it seems like mostly unnecessary given that &gt;99% of the insertions have nothing to do with each other because they are insertions into different submaps. That&#39;s why I&#39;m trying to come up with a more fine-grained locking structure."}, {"owner": {"reputation": 816, "user_id": 6093696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991ce77dfa46d45f5301c0e29a8be248?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/6093696/eric"}, "edited": false, "score": 0, "creation_date": 1570654691, "post_id": 58311902, "comment_id": 102985481, "body": "You&#39;re on the right track. This is called striped locking. Some implementations will increase or decrease the number of locks dynamically as the map grows or shrinks."}, {"owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1570654724, "post_id": 58311902, "comment_id": 102985492, "body": "@TedLyngmo you are correct to point out that the other threads don&#39;t need the inserted values while the rest of the insertions are occurring. However, at the end of the computation, the next phase of the application needs this single, organized data structure to be like this. So, I could create a bunch of thread-local map of maps and then combine them in a single thread somehow."}, {"owner": {"reputation": 816, "user_id": 6093696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991ce77dfa46d45f5301c0e29a8be248?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/6093696/eric"}, "edited": false, "score": 0, "creation_date": 1570655452, "post_id": 58311902, "comment_id": 102985772, "body": "It looks like you&#39;re not concerned about overwriting existing values in the map, right? You could probably forget the locking and go with a fully lock-free implementation in that case."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1570655700, "post_id": 58311902, "comment_id": 102985858, "body": "@Kulluk007 Sure, that should make it require no synchronizing for the insertion. Just let the main thread do the insertion after each worker is done/joined."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1570658499, "post_id": 58311902, "comment_id": 102986690, "body": "@Kulluk007 You really shouldn&#39;t be seeing lock contention though. That makes me suspect you either aren&#39;t measuring correctly or don&#39;t understand your code&#39;s behavior correctly. Given that, I&#39;d be hesitant to make design changes based on that understanding. Understanding why multithreaded coded is behaving as it is so you can form a proper plan to improve it is <i>very</i> hard."}], "answers": [{"comments": [{"owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "edited": false, "score": 0, "creation_date": 1570829323, "post_id": 58314607, "comment_id": 103052402, "body": "I tried this and am hitting a TSAN data race; I&#39;m using striped locking with 8 buckets, keyed on <code>i</code> in my example above (<code>the_map[i][j] = val</code>). So, two threads that both want to insert into <code>the_map</code> with the same <code>i</code> will need to acquire the same lock, regardless of <code>j</code>. However, TSAN is reporting a race on <code>map::operator[]</code> for two threads trying to write into <code>the_map</code>. Is it possible that the outer map (<code>the_map</code>) is doing something during <code>operator[]</code> that affects internal structures? Maybe rebalancing the RB-tree is triggered?  <i>Should</i> this approach (locking based on <code>i</code>) work?"}, {"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "reply_to_user": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "edited": false, "score": 0, "creation_date": 1570832336, "post_id": 58314607, "comment_id": 103053133, "body": "Yes, indeed, <code>operator []</code> inserts the key if it doesn&#39;t exist.  You should not have an outer map anyway -- use an array or a vector."}, {"owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "edited": false, "score": 0, "creation_date": 1570838207, "post_id": 58314607, "comment_id": 103054284, "body": "Yep the default map constructor is used to create an empty map as needed (when the key doesn&#39;t exist). My question has to do with something else (and finding the cause of the TSAN race). If two threads insert different values <code>i</code> and <code>j</code> into the outer map, is there a possibility of a race in the internal tree of the map? For example, Red Black tree is rebalanced using rotation (most likely) and couldn&#39;t that cause a data race in the above example, if this happens during the concurrent <code>i</code> and <code>j</code> insertions? This could happen with lock striping because they would use different locks."}, {"owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "edited": false, "score": 0, "creation_date": 1570838438, "post_id": 58314607, "comment_id": 103054322, "body": "Re: not using a map for the outer data structure -- I agree that maps should rarely be used -- I&#39;m modifying an existing benchmark currently. But I think they use it because the domain is large and indexes used are sparse. The hashing to a small domain is why they probably use this. Is there a clever way to use an array here?"}, {"owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "edited": false, "score": 0, "creation_date": 1570839240, "post_id": 58314607, "comment_id": 103054444, "body": "I think this question is relevant: <a href=\"https://stackoverflow.com/questions/27829806/can-different-threads-insert-into-a-map-if-they-always-use-different-keys\" title=\"can different threads insert into a map if they always use different keys\">stackoverflow.com/questions/27829806/&hellip;</a>  I&#39;m currently using a single outer map and lock striping on the key doesn&#39;t help given the rebalancing issue (and possibly other issues) I raised above."}, {"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "reply_to_user": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "edited": false, "score": 1, "creation_date": 1570843416, "post_id": 58314607, "comment_id": 103054961, "body": "Oh I thought the outer map was for your striping buckets.  You should have 8 outer maps and 8 locks -- one pair for each bucket.  Nothing about the maps should need to be thread-safe, because nothing should touch any map without holding its bucket&#39;s lock."}, {"owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "edited": false, "score": 0, "creation_date": 1570908051, "post_id": 58314607, "comment_id": 103068231, "body": "Got it! I&#39;ll give that a try. Thanks."}], "tags": [], "owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "is_accepted": true, "score": 1, "last_activity_date": 1570679954, "last_edit_date": 1570679954, "creation_date": 1570674389, "answer_id": 58314607, "question_id": 58311902, "link": "https://stackoverflow.com/questions/58311902/fine-grained-locks-on-c-map-of-maps/58314607#58314607", "title": "Fine-grained locks on C++ map of maps", "body": "<p>Dividing your map into multiple maps, each of which can be locked independently, is a good and practical approach.   The key to doing this efficiently is to remember that, while you may have 10s of thousands of entries in your map, you probably don't have that many threads or that many cores.</p>\n\n<p>If your machine has, say 8 cores, then hashing your keys into 64 different buckets, each with its own map and mutex, will ensure that contention is unlikely and won't significantly slow down the application.</p>\n\n<p>At most 8 cores could be trying to insert at the same time, and even if they were doing that constantly, they'd only be blocked 12% of the time.  Your threads will probably have lots of other things to do, though, so real contention would be much less than that.</p>\n\n<p>As @Eric indicates, the magic Google words for this are \"lock striping\".</p>\n\n<p>Regarding false sharing of adjacent mutexes: <code>std::map</code> insertions aren't fast enough for that to be a real problem.</p>\n\n<p>One thing you might have to worry about is contention in the memory allocator that is used to allocate map nodes.  They all come from the same heap, after all.</p>\n"}], "owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 58314607, "answer_count": 1, "score": 0, "last_activity_date": 1570679954, "creation_date": 1570653280, "last_edit_date": 1570653982, "question_id": 58311902, "link": "https://stackoverflow.com/questions/58311902/fine-grained-locks-on-c-map-of-maps", "title": "Fine-grained locks on C++ map of maps", "body": "<p>I have a C++17 application that has multiple threads concurrently writing to a map of maps:</p>\n\n<pre><code>// global shared variable across threads\nstd::map&lt;int, std::map&lt;int, int&gt;&gt; the_map;\n\n// many threads inserting different values for varying i and j\nauto val = somewhat_expensive_f()\nthe_map[i][j] = val;\n</code></pre>\n\n<p>For this application, there are tens of thousands of unique (i,j) pairs and on the order of 2,000 map in the_map upon completion. I'm experimenting with running multiple threads running expensive computations that insert into this map of maps. Right now I'm using a <code>std::map</code> which doesn't allow concurrent insertions.</p>\n\n<p>I wrapped the insertions with a <code>std::lock_guard&lt;std::mutex&gt;</code> as a first cut, and of course that really slowed down the application and hamstrung the concurrency. My instinct is that I can either use some concurrent map of maps or fine-grained locking. </p>\n\n<p>For the second approach, my instinct is to do some sort of array of locks that are indexed into using a hash of the (i,j) tuple. For example, <code>lock_guard&lt;mutex&gt;(array_of_locks[hash((i&lt;&lt;32)|j) % array_sz])</code> could allow multiple locks to be shared across the thousands of sub-maps.</p>\n\n<p><strong>Question 1:</strong> Am I on the right track? Any feedback on this approach?</p>\n\n<p><strong>Question 2:</strong> With this approach, one concern I have is false sharing of adjacent mutexes in the array. I could pad them out to fill an entire cache line. Are there better approaches? </p>\n\n<p>Another approach I could consider is to do some sort of inserting into thread-local maps and then combine them later in a master thread.</p>\n"}, {"tags": ["c++", "visual-studio", "computer-science"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1570652457, "post_id": 58311684, "comment_id": 102984581, "body": "please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. If this is all the code you are trying to compile, there should be other errors"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1570652496, "post_id": 58311684, "comment_id": 102984593, "body": "My best guess: You didn&#39;t <code>#include &lt;cmath&gt;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1570653161, "post_id": 58311684, "comment_id": 102984866, "body": "In addition to the above comment, you can also try <code>std::floor</code> and <code>std::pow</code> and see if that helps."}, {"owner": {"reputation": 1, "user_id": 12191267, "user_type": "registered", "profile_image": "https://graph.facebook.com/463290827861557/picture?type=large", "display_name": "Edward Ramos", "link": "https://stackoverflow.com/users/12191267/edward-ramos"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1570653165, "post_id": 58311684, "comment_id": 102984867, "body": "@UnholySheep yes, I included cmath but in the .cpp file. this is a header file i am trying to create, to make my own library, mt example is a function I am creating inside of the header."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1570653636, "post_id": 58311840, "comment_id": 102985039, "body": "One more improvement would be simply <code>return std::floor(value*p + 0.5)&#47;p;</code>. There&#39;s no need for <code>roundedval</code>. Of course, it merely a double and shouldn&#39;t be a major performance problem, but still. It is <i>technically</i> unnecessary."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1570653751, "post_id": 58311840, "comment_id": 102985106, "body": "@Chipster, indeed."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1570653740, "last_edit_date": 1592644375, "creation_date": 1570653033, "answer_id": 58311840, "question_id": 58311684, "link": "https://stackoverflow.com/questions/58311684/i-am-trying-to-create-my-own-library-source-function-on-visual-studio/58311840#58311840", "title": "I am trying to create my own library/source function on visual studio", "body": "<ol>\n<li><p>Make sure you use</p>\n<pre><code> #include &lt;cmath&gt;\n</code></pre>\n</li>\n<li><p>Use the <code>std::</code> prefix when using the functions from the <code>std</code> namespace.</p>\n<pre><code> roundedval = std::floor(value* std::pow(10, digits) + 0.5) / std::pow(10, digits);\n</code></pre>\n</li>\n<li><p>If the IDE still cannot find the functions, ignore the the IDE. As long as your code compiles. builds. and runs successfully, the IDE's issues can be ignored.</p>\n</li>\n</ol>\n<h3>Suggestion for minor code improvement</h3>\n<p>You have two calls to <code>std::pow(10, digits)</code>. It can be reduced to one.</p>\n<pre><code>double p = std::pow(10, digits);\nroundedval = std::floor(value*p + 0.5)/p;\n</code></pre>\n<p>A further improvement would be to not use the variable <code>roundedval</code> at all. The function can be:</p>\n<pre><code>double round_off(double value, double digits)\n{\n    double p = std::pow(10, digits);\n    return std::floor(value*p + 0.5)/p;\n}\n</code></pre>\n<p>The next improvement would be to use <code>int</code> as the type of <code>digits</code> instead of <code>double</code>.</p>\n<pre><code>double round_off(double value, int digits)\n{\n    double p = std::pow(10, digits);\n    return std::floor(value*p + 0.5)/p;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12191267, "user_type": "registered", "profile_image": "https://graph.facebook.com/463290827861557/picture?type=large", "display_name": "Edward Ramos", "link": "https://stackoverflow.com/users/12191267/edward-ramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1570653740, "creation_date": 1570652326, "last_edit_date": 1570652610, "question_id": 58311684, "link": "https://stackoverflow.com/questions/58311684/i-am-trying-to-create-my-own-library-source-function-on-visual-studio", "title": "I am trying to create my own library/source function on visual studio", "body": "<p>So far i have this, and the floor and pow have red lines and it says identifier \"floor\" is undefined, and I get the same message with pow. What am I doing wrong and how can I fix this? </p>\n\n<pre><code>double round_off(double value, double digits)\n{\n    double roundedval;\n    roundedval = floor(value* pow(10, digits) + 0.5) / pow(10, digits);\n\n    return roundedval;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 8, "creation_date": 1570651073, "post_id": 58311396, "comment_id": 102984112, "body": "Don&#39;&#39;t put pictures of code in the question. Put a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as text in the question. Btw: <code>a = 12345678</code> is assigning <code>12345678</code> to <code>a</code>, not comparing it for equallity. Use <code>==</code>."}, {"owner": {"reputation": 322, "user_id": 8844604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVplw.jpg?s=128&g=1", "display_name": "Mauricio Ruiz", "link": "https://stackoverflow.com/users/8844604/mauricio-ruiz"}, "edited": false, "score": 2, "creation_date": 1570651449, "post_id": 58311396, "comment_id": 102984256, "body": "Please try write code here using the adequate format. It is  easier than watch a picture. BTW review the difference between = and ==."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1570651540, "post_id": 58311396, "comment_id": 102984285, "body": "not everybody can access your link, not everybody can view the image. Questions about code are required to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in the question, if they dont then thats a reason to close the question. I am just telling this so you hopefully understand that Ted actually was trying to help you"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1570651677, "post_id": 58311396, "comment_id": 102984328, "body": "... i forgot the most important reason: nobody can copy paste your image to compile the code and see what it does (see <a href=\"https://stackoverflow.com/questions/5508110/why-is-this-program-erroneously-rejected-by-three-c-compilers\">here</a> for more on that topic)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570651690, "post_id": 58311396, "comment_id": 102984334, "body": "@\u10da\u10e3\u10d9\u10d0\u10d0\u10da\u10d4\u10e5\u10e1\u10d0\u10d8\u10d0 -- At some places <code>imgur</code> links are blocked and/or blacklisted."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 1, "creation_date": 1570652043, "post_id": 58311396, "comment_id": 102984440, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/58253071/variable-changes-on-its-own-in-c\">Variable changes on it&#39;s own in C++</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12125880, "user_type": "registered", "profile_image": "https://graph.facebook.com/671139156720621/picture?type=large", "display_name": "\u10da\u10e3\u10d9\u10d0 \u10d0\u10da\u10d4\u10e5\u10e1\u10d0\u10d8\u10d0", "link": "https://stackoverflow.com/users/12125880/%e1%83%9a%e1%83%a3%e1%83%99%e1%83%90-%e1%83%90%e1%83%9a%e1%83%94%e1%83%a5%e1%83%a1%e1%83%90%e1%83%98%e1%83%90"}, "edited": false, "score": 0, "creation_date": 1570651566, "post_id": 58311495, "comment_id": 102984293, "body": "oh okay thanks. so if &#39;a&#39; and &#39;x&#39; assing to the same number, in this case 12345678 does that mean that they are euqal to each other ?"}, {"owner": {"reputation": 3, "user_id": 12125880, "user_type": "registered", "profile_image": "https://graph.facebook.com/671139156720621/picture?type=large", "display_name": "\u10da\u10e3\u10d9\u10d0 \u10d0\u10da\u10d4\u10e5\u10e1\u10d0\u10d8\u10d0", "link": "https://stackoverflow.com/users/12125880/%e1%83%9a%e1%83%a3%e1%83%99%e1%83%90-%e1%83%90%e1%83%9a%e1%83%94%e1%83%a5%e1%83%a1%e1%83%90%e1%83%98%e1%83%90"}, "edited": false, "score": 0, "creation_date": 1570651588, "post_id": 58311495, "comment_id": 102984298, "body": "okay nevermind i tired and it worked as i wanted &lt;3 thank you a lot :)"}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1570651748, "post_id": 58311495, "comment_id": 102984355, "body": "What&#39;s strange is that they are storing the password directly and making a hard-coded comparison instead of hashing it and comparing it against the stored hash. I get that is at a &quot;new to C++ and programming&quot; bit of code, but there are better exercises than security theater."}], "tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": true, "score": 4, "last_activity_date": 1570652002, "last_edit_date": 1570652002, "creation_date": 1570651377, "answer_id": 58311495, "question_id": 58311396, "link": "https://stackoverflow.com/questions/58311396/trying-to-create-password-in-c/58311495#58311495", "title": "trying to create password in c++", "body": "<p>The problem is <code>a = 12345678</code> is operation that sets <code>a</code>to <code>12345678</code> and returns <code>a</code> by reference. So your if statement simply doesn't do what you want - instead of checking whether <code>a</code> is <code>12345678</code>, it sets <code>a</code> to <code>12345678</code> and then checks if <code>a</code> isn't zero.</p>\n\n<p>To fix it replace <code>=</code> with <code>==</code> for comparison.</p>\n\n<pre><code>if (a == 12345678)\n    cout &lt;&lt; \"password is correct\";\n</code></pre>\n\n<p>Though, it is a bit strange that password is a number and not a string... but whatever.</p>\n"}], "owner": {"reputation": 3, "user_id": 12125880, "user_type": "registered", "profile_image": "https://graph.facebook.com/671139156720621/picture?type=large", "display_name": "\u10da\u10e3\u10d9\u10d0 \u10d0\u10da\u10d4\u10e5\u10e1\u10d0\u10d8\u10d0", "link": "https://stackoverflow.com/users/12125880/%e1%83%9a%e1%83%a3%e1%83%99%e1%83%90-%e1%83%90%e1%83%9a%e1%83%94%e1%83%a5%e1%83%a1%e1%83%90%e1%83%98%e1%83%90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1570665179, "accepted_answer_id": 58311495, "answer_count": 1, "score": -1, "last_activity_date": 1570658725, "creation_date": 1570650945, "last_edit_date": 1570658725, "question_id": 58311396, "link": "https://stackoverflow.com/questions/58311396/trying-to-create-password-in-c", "closed_reason": "Not suitable for this site", "title": "trying to create password in c++", "body": "<p>I am trying to do password handling in C++.</p>\n\n<p>For example, I want the password to be 12345678, but no matter what I insert as a meaning of 'a' it always says that the password is correct, so basically it always thinks the quantity of 'a' is equal to the quantity of 'x'.</p>\n\n<p>At the beginning, I tried to do it like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>if (a = 12345678)                                                              \ncout &lt;&lt; \"password is correct\";\n</code></pre>\n\n<p>This didn't work either.</p>\n\n<p>here is the picture of the code: <a href=\"https://imgur.com/ssl4i6F\" rel=\"nofollow noreferrer\">https://imgur.com/ssl4i6F</a></p>\n"}, {"tags": ["c++", "exception"], "comments": [{"owner": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "edited": false, "score": 12, "creation_date": 1570650596, "post_id": 58311311, "comment_id": 102983917, "body": "you&#39;re throwing <code>int</code>, not <code>std::exception</code>"}, {"owner": {"reputation": 11, "user_id": 11721078, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6xZKfCy7kKw/AAAAAAAAAAI/AAAAAAAANe8/b-9sXRP9A4g/photo.jpg?sz=128", "display_name": "Shobhit Gupta", "link": "https://stackoverflow.com/users/11721078/shobhit-gupta"}, "reply_to_user": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "edited": false, "score": 1, "creation_date": 1570650755, "post_id": 58311311, "comment_id": 102983981, "body": "@user3365922 what should I throw exactly?"}, {"owner": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "edited": false, "score": 3, "creation_date": 1570650822, "post_id": 58311311, "comment_id": 102984007, "body": "<code>runtime_error(to_string(x))</code> for example"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1570650955, "post_id": 58311311, "comment_id": 102984063, "body": "@ShobhitGupta You can throw, and catch whatever you want (and whatever suits a particular problem). If you want to <code>throw</code> an <code>int</code>: just catch <code>int</code>. If you want to catch <code>std::exception const&amp;</code>: throw <code>std::exception (&quot;Some message&quot;)</code> (or instance of whatever class, which inherits from <code>std::exception</code>)."}, {"owner": {"reputation": 11, "user_id": 11721078, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6xZKfCy7kKw/AAAAAAAAAAI/AAAAAAAANe8/b-9sXRP9A4g/photo.jpg?sz=128", "display_name": "Shobhit Gupta", "link": "https://stackoverflow.com/users/11721078/shobhit-gupta"}, "edited": false, "score": 0, "creation_date": 1570651017, "post_id": 58311311, "comment_id": 102984087, "body": "what should I throrw if I want the compilerprint the type of exception ? in this case division by zero error ?"}, {"owner": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1570651041, "post_id": 58311311, "comment_id": 102984100, "body": "@AlgirdasPreid\u017eius <code>std::exception</code> has no ctor from string"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1570651081, "post_id": 58311311, "comment_id": 102984115, "body": "@ShobhitGupta -- <i>what should I return if I want to the exception?</i> -- This is part of <i>your</i> design, not ours.  It&#39;s up to you."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "edited": false, "score": 0, "creation_date": 1570651611, "post_id": 58311311, "comment_id": 102984302, "body": "@user3365922 Noted. Somehow I thought, that if <code>what</code> method is declared in it, one must be able to set the string, returned by it, while constructing the instance :/"}], "owner": {"reputation": 11, "user_id": 11721078, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6xZKfCy7kKw/AAAAAAAAAAI/AAAAAAAANe8/b-9sXRP9A4g/photo.jpg?sz=128", "display_name": "Shobhit Gupta", "link": "https://stackoverflow.com/users/11721078/shobhit-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570651381, "creation_date": 1570650546, "last_edit_date": 1570651381, "question_id": 58311311, "link": "https://stackoverflow.com/questions/58311311/not-able-to-catch-exception-with-stdexception", "title": "Not able to catch exception with std::exception", "body": "<p>i am learning exception handling in c++. I want the compiler to print what type of exception is causing the problem.But it gives an error instead and closes the program.</p>\n\n<pre><code>int divi(int x,int y)\n{\n    if(y==0)\n    throw x;\n    return x/y;\n}\n\nint main()\n{   \n    try{\n        int a=5,b=0,c;\n        c=divi(a,b);\n        cout&lt;&lt;c;\n    }\n    catch(exception &amp;exc)\n    {    \n        cerr&lt;&lt;exc.what()&lt;&lt;endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/de5cQ.jpg\" rel=\"nofollow noreferrer\">this is the error:</a></p>\n"}, {"tags": ["c++", "windows", "window", "desktop-application", "window-managers"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1570649204, "post_id": 58310942, "comment_id": 102983361, "body": "Why <code>this-&gt;Wnd.emplace_back(Window(name, x, y, width, height, windowClass, style, this-&gt;IdGenNum++));</code> instead of <code>this-&gt;Wnd.emplace_back(name, x, y, width, height, windowClass, style, this-&gt;IdGenNum++);</code>?"}, {"owner": {"reputation": 135, "user_id": 12189300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32efb8df57e79106d6aaf2e4c08e0fe3?s=128&d=identicon&r=PG&f=1", "display_name": "Splize", "link": "https://stackoverflow.com/users/12189300/splize"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570649555, "post_id": 58310942, "comment_id": 102983492, "body": "Because I thought it&#39;s the way to do this. ^^&#39; I think it&#39;s clearer to read and not writing <code>Window</code> seems to not solve anything either? Thanks anyway!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1570649737, "post_id": 58310942, "comment_id": 102983573, "body": "<code>emplace_back()</code> constructs the vector element type using the parameters you provide. By specifying <code>Window(...)</code> as a parameter, you are constructing a temp <code>Window()</code> object first, and then <code>emplace_back()</code> tries to constructor another <code>Window</code> inside the vector using the <code>Window</code>&#39;s copy constructor, which has been <code>delete</code>d. By omitting the <code>Window(...)</code>, only 1 <code>Window</code> is constructed, inside the vector, using the <code>name</code>, <code>x</code>, <code>y</code>, etc variables directly as parameters to that constructor."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570649848, "post_id": 58310942, "comment_id": 102983627, "body": "@Splize &quot;<i>I think it&#39;s clearer to read</i>&quot; But then, <code>emplace_back</code> doesn&#39;t accomplish it&#39;s intention: creating the object in a vector, opposed to copying it, as <code>push_back</code> does. Due to the fact, that it forwards its arguments, to the constructor of <code>Window</code>, and if it receives a single argument of type <code>Window const&amp;</code>, the only constructor matching such signature is copy constructor. &quot;<i>seems to not solve anything either</i>&quot; If it&#39;s the case, the problem is not in the <code>emplace_back</code> call. Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570649991, "post_id": 58310942, "comment_id": 102983689, "body": "<code>push_back()</code> doesn&#39;t have to copy, though.  It can move instead. It is overloaded in C++11 and later to accept an rvalue, so you could do this: <code>this-&gt;Wnd.push_back(Window(...));</code> Of course, it would help if <code>Window</code> had a move constructor defined, though."}, {"owner": {"reputation": 135, "user_id": 12189300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32efb8df57e79106d6aaf2e4c08e0fe3?s=128&d=identicon&r=PG&f=1", "display_name": "Splize", "link": "https://stackoverflow.com/users/12189300/splize"}, "edited": false, "score": 0, "creation_date": 1570650646, "post_id": 58310942, "comment_id": 102983936, "body": "Ok, you were right, this seems to have been a major issue, but the error is still there, which leaves me completely clueless. As soon as the <code>addWindow</code> function is erased, everything compiles fine..."}], "answers": [{"tags": [], "owner": {"reputation": 561, "user_id": 6781431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/474851c0a5ec3cf43cf852a2a6d8595a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Pearce", "link": "https://stackoverflow.com/users/6781431/chris-pearce"}, "is_accepted": false, "score": 1, "last_activity_date": 1570649878, "last_edit_date": 1570649878, "creation_date": 1570649690, "answer_id": 58311114, "question_id": 58310942, "link": "https://stackoverflow.com/questions/58310942/error-c2280-problem-with-copy-constructor-while-instantiating-an-object-in-std/58311114#58311114", "title": "Error C2280 / Problem with Copy Constructor while instantiating an Object in std::vector?", "body": "<p>The <code>Window</code> copy constructor is declared with <code>delete</code>, but when you pass an existing <code>Window</code> object into <code>emplace_back()</code>, the implementation of <code>emplace_back()</code> will attempt to use its arguments to construct another <code>Window</code> object in-place. The only way it can do this is by trying to use the deleted copy constructor.</p>\n\n<p>You could either declare a copy constructor, use <code>push_back()</code>, or even better call <code>emplace_back()</code> using the arguments for your other <code>Window</code> constructor, which will avoid a copy.</p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 0, "last_activity_date": 1570650941, "creation_date": 1570650941, "answer_id": 58311395, "question_id": 58310942, "link": "https://stackoverflow.com/questions/58310942/error-c2280-problem-with-copy-constructor-while-instantiating-an-object-in-std/58311395#58311395", "title": "Error C2280 / Problem with Copy Constructor while instantiating an Object in std::vector?", "body": "<p>This line creates a temporary Window that will be moved (if there's a move constructor) or copied (if there's a copy constructor) to the <code>vector</code> - but your <code>Window</code> lacks both:</p>\n\n<pre><code>this-&gt;Wnd.emplace_back(Window(name, x, y, width, height, windowClass, style,\n                              this-&gt;IdGenNum++));\n</code></pre>\n\n<p>With <code>emplace_back</code> you don't need to create a temporary since the argument you give to <code>emplace_back</code> are perfect forwarded to the constructor of <code>Window</code>, so there will be no unnecessary move or copy being made:</p>\n\n<pre><code>this-&gt;Wnd.emplace_back(name, x, y, width, height, windowClass, style, this-&gt;IdGenNum++);\n</code></pre>\n\n<p>Although this should be enough to solve this immediate problem, your <code>Window</code> class looks like it should support moving but not necessarily copying.</p>\n"}], "owner": {"reputation": 135, "user_id": 12189300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32efb8df57e79106d6aaf2e4c08e0fe3?s=128&d=identicon&r=PG&f=1", "display_name": "Splize", "link": "https://stackoverflow.com/users/12189300/splize"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 58311395, "answer_count": 2, "score": 0, "last_activity_date": 1570661977, "creation_date": 1570648988, "last_edit_date": 1592644375, "question_id": 58310942, "link": "https://stackoverflow.com/questions/58310942/error-c2280-problem-with-copy-constructor-while-instantiating-an-object-in-std", "title": "Error C2280 / Problem with Copy Constructor while instantiating an Object in std::vector?", "body": "<p>I am currently programming my first application by following ChiliTomatoNoodle's tutorials and modify his code to my needs. While doing so and implementing a simple WindowManager class, which has the purpose to store all the window instances in a std::vector and similar things, I got following error message:</p>\n<blockquote>\n<p>C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.23.28105\\include\\xmemory(758,1):</p>\n<p>error C2280: 'Window::Window(const Window &amp;)': attempting to reference a deleted function (compiling source file src\\cpp\\WindowManager.cpp)</p>\n</blockquote>\n<p>The Problem seems to lie in the <code>addWindow</code> function, where the window is instantiated and stored in <code>std::vector&lt;Window&gt; Wnd</code>:</p>\n<pre><code>void WindowManager::addWindow(unsigned short x, unsigned short y, unsigned short width, unsigned short height, const char* name, Window::WindowClass&amp; windowClass, DWORD style) {\n\n    this-&gt;Wnd.emplace_back(Window(name, x, y, width, height, windowClass, style, this-&gt;IdGenNum++));\n}\n</code></pre>\n<p>I already changed <code>push_back</code> to <code>emplace_back</code> to maybe avoid copying (?), but it didn't solve the problem.</p>\n<p>Then there's also a getter (that seems to be fine and not copying anything):</p>\n<pre><code>Window&amp; WindowManager::getWindow(const unsigned short id) {\n\n    for (Window &amp;element : this-&gt;Wnd) {\n\n        if (element.Id == id) {\n\n            return element;\n        }\n    }\n}\n</code></pre>\n<p>And here is the <code>Window</code> class header:</p>\n<pre><code>class Window {\n\nprivate:    // Friends\n\n    friend class WindowManager;\n\npublic:     // Nested Classes\n\n    class WindowClass {\n\n        ...\n    };\n\nprivate:    // Variables and Instances\n\n    unsigned short Id;    // Received by WindowManager on Creation\n\n    const char* Name;\n\n    HWND Handle;\n\n    ...\n\npublic:     // Constructors and Deconstructors\n\n    Window(const Window&amp;) = delete;\n\n    Window(\n        \n        const char* name,\n        unsigned short x, \n        unsigned short y, \n        unsigned short width, \n        unsigned short height,  \n        WindowClass&amp; windowClass, \n        DWORD style,\n        unsigned short id\n    );\n\n    ~Window();\n\n\nprivate:    // Functions\n\n    ...\n\npublic:     // Operators\n\n    Window&amp; operator=(const Window&amp;) = delete;\n};\n</code></pre>\n<p><strong>Edit:</strong></p>\n<p>Thanks for all the answers and comments pointing out that the arguments have to be passed directly to the <code>emplace_back</code> method. As it turned out, the vector still copied the object (no clue why..), but I could fix this by using <code>std::list</code> instead, which doesn't have this behavior.</p>\n"}, {"tags": ["c++", "arrays", "string", "memcpy"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1570648524, "post_id": 58310818, "comment_id": 102983064, "body": "is it supposed to be a null terminated string?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1570648661, "post_id": 58310818, "comment_id": 102983124, "body": "&quot;<i>is working fine for all other data types except string.</i>&quot; Do you mean <code>std::string</code>? If so, <code>memcpy</code> doesn&#39;t invoke copy-constructors."}], "answers": [{"comments": [{"owner": {"reputation": 557, "user_id": 2122943, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/2516d9e60e239fc45554d6d433432444?s=128&d=identicon&r=PG", "display_name": "Sel_va", "link": "https://stackoverflow.com/users/2122943/sel-va"}, "edited": false, "score": 0, "creation_date": 1570676119, "post_id": 58310878, "comment_id": 102990120, "body": "How can i have a different function for non trivial data type alone - as i have implemented template?"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1570648704, "creation_date": 1570648704, "answer_id": 58310878, "question_id": 58310818, "link": "https://stackoverflow.com/questions/58310818/implementing-erase-in-a-dynamic-array-for-string-type-crashes/58310878#58310878", "title": "Implementing erase in a dynamic array for string type crashes", "body": "<p>You can't use <code>memcpy</code> on non trivially copyable types.  <code>std::string</code> is not trvially copyable so you can't use it on it.</p>\n\n<p>What you need to do is have erase call special versions of erase depending on the type the container holds.  If it is a trivial type, then call the version of <code>erase</code> that uses <code>memcpy</code>.  If it is not then call the version of <code>erase</code> that uses a for loop and does a naive copy/move operation.</p>\n"}, {"comments": [{"owner": {"reputation": 557, "user_id": 2122943, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/2516d9e60e239fc45554d6d433432444?s=128&d=identicon&r=PG", "display_name": "Sel_va", "link": "https://stackoverflow.com/users/2122943/sel-va"}, "edited": false, "score": 0, "creation_date": 1570675593, "post_id": 58311366, "comment_id": 102990012, "body": "how can i find if it is trivial or non trivial, when i use a template? I mean for string alone how can i define a different function??"}, {"owner": {"reputation": 557, "user_id": 2122943, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/2516d9e60e239fc45554d6d433432444?s=128&d=identicon&r=PG", "display_name": "Sel_va", "link": "https://stackoverflow.com/users/2122943/sel-va"}, "edited": false, "score": 0, "creation_date": 1570675998, "post_id": 58311366, "comment_id": 102990095, "body": "when using copy i get this error - Function call with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ &#39;Checked Iterators&#39; - Tried defining secure no warnings , but still same error.."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 557, "user_id": 2122943, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/2516d9e60e239fc45554d6d433432444?s=128&d=identicon&r=PG", "display_name": "Sel_va", "link": "https://stackoverflow.com/users/2122943/sel-va"}, "edited": false, "score": 0, "creation_date": 1570719659, "post_id": 58311366, "comment_id": 103010218, "body": "@Sel_va see <a href=\"https://en.cppreference.com/w/cpp/types/is_trivial\" rel=\"nofollow noreferrer\"><code>std::is_trivial</code></a> and related traits. And do what the compiler says - read the documentation about <a href=\"https://docs.microsoft.com/en-us/cpp/standard-library/checked-iterators?view=vs-2019\" rel=\"nofollow noreferrer\">Checked Iterators</a>. Since your code uses raw pointers, they are considered to be unchecked iterators. So either 1) don&#39;t use standard algorithms (not recommended), or 2) use the <a href=\"https://docs.microsoft.com/en-us/cpp/standard-library/checked-array-iterator-class?view=vs-2019\" rel=\"nofollow noreferrer\"><code>checked_array_iterator</code></a> adapter."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1570651570, "last_edit_date": 1570651570, "creation_date": 1570650839, "answer_id": 58311366, "question_id": 58310818, "link": "https://stackoverflow.com/questions/58310818/implementing-erase-in-a-dynamic-array-for-string-type-crashes/58311366#58311366", "title": "Implementing erase in a dynamic array for string type crashes", "body": "<p>You can't use <code>memcpy()</code> for non-trivial types, like <code>std::string</code>, that may need to copy internal data from one instance to another.  In this case, you need to copy each element individually using its own <code>operator=</code>, eg:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nvoid myArr&lt;T&gt;::erase(ULONG index)\n{\n    if (index &gt;= count)\n        return;\n\n    T* temp_arr = new T[max_count];\n\n    // copy elements before the index...\n    for(int i = 0; i &lt; index; ++i) {\n        temp_arr[i] = arr[i];\n    }\n\n    // copy elements after the index...\n    for (int i = index + 1; i &lt; count; ++i) {\n        temp_arr[i - 1] = arr[i];\n    }\n\n    delete[] arr;\n    arr = temp_arr;\n\n    --count;\n}\n</code></pre>\n\n<p>Or better, you can use <a href=\"https://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\"><code>std::copy()</code></a> instead, which is optimized for copying trivial types, and \"does the right thing\" for copying non-trivial types:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nvoid myArr&lt;T&gt;::erase(ULONG index)\n{\n    if (index &gt;= count)\n        return;\n\n    T* temp_arr = new T[max_count];\n\n    // copy elements before the index...\n    std::copy(arr, arr + index, temp_arr);\n\n    // copy elements after the index...\n    std::copy(arr + (index+1), arr + count, temp_arr + index);\n\n    delete[] arr;\n    arr = temp_arr;\n\n    --count;\n}\n</code></pre>\n\n<p>Alternatively, since your class seems to have a concept of the array having a capacity vs a count, you don't actually need to allocate a new array at all, you can simply modify the existing array inline so as to shrink its count without affecting its capacity (this is basically what <code>std::vector::erase()</code> does):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nvoid myArr&lt;T&gt;::erase(ULONG index)\n{\n    if (index &gt;= count)\n        return;\n\n    // shift elements after the index down one slot...\n    std::copy(arr + (index+1), arr + count, arr + index);\n\n    // clear the now-unused last slot of its data...\n    arr[count-1] = T();\n\n    --count;\n}\n</code></pre>\n"}], "owner": {"reputation": 557, "user_id": 2122943, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/2516d9e60e239fc45554d6d433432444?s=128&d=identicon&r=PG", "display_name": "Sel_va", "link": "https://stackoverflow.com/users/2122943/sel-va"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570651570, "creation_date": 1570648478, "question_id": 58310818, "link": "https://stackoverflow.com/questions/58310818/implementing-erase-in-a-dynamic-array-for-string-type-crashes", "title": "Implementing erase in a dynamic array for string type crashes", "body": "<p>I am trying to implementing stl vector in C++ for types like string,int, ulong etc using template class. The erase function found below is working fine for all other data types except string. </p>\n\n<pre><code>template &lt;typename T&gt;\nvoid myArr&lt;T&gt;::erase(ULONG index)\n{\n    if(index &gt;= count)\n        return;\n    T* temp_arr = new T[max_count];\n    if(index == 0)\n    {\n        memcpy(temp_arr,(arr+1),(count-1)*sizeof(T));\n    }\n    else if(index == count-1)\n    {\n        memcpy(temp_arr,arr,(count-1)*sizeof(T));\n    }\n    else\n    {\n        memcpy(temp_arr,arr,(index-1)*sizeof(T));\n        memcpy(temp_arr+index,arr+index+1,(count-index)*sizeof(T));\n    }\n    delete[] arr;\n    arr = temp_arr;\n    count--;\n}\n</code></pre>\n\n<p>When string is the array type, the program crashes with memory access violation 0x0005. How to handle this for strings data type..?</p>\n"}, {"tags": ["c++", "templates", "linked-list"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1570648621, "post_id": 58310755, "comment_id": 102983106, "body": "templates are an advanced topic. If you are new to them and c++ in general you probably better start with something way simpler. You wouldnt gain much if you would get your code turned into template code as answer when it does not come with &gt;10 pages of explanation. Maybe you can turn your question into asking one specific more focused question?"}], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 1, "last_activity_date": 1570650483, "last_edit_date": 1570650483, "creation_date": 1570649586, "answer_id": 58311088, "question_id": 58310755, "link": "https://stackoverflow.com/questions/58310755/how-to-use-templates-in-a-c-linked-list/58311088#58311088", "title": "How to use templates in a c++ linked list?", "body": "<p>Actually, you almost have all you need, but you are still using a regualar class with a concrete type.</p>\n\n<pre><code>using Item = std::string;\n\nclass DList { ... };\n</code></pre>\n\n<p>So first we drop the concrete type:</p>\n\n<pre><code>// using Item = std::string;\n\nclass DList { ... }; // sure Item is now undefined...\n</code></pre>\n\n<p>Then we tell the class to be a template</p>\n\n<pre><code>template &lt;typename Item&gt;\nclass DList { ... };\n</code></pre>\n\n<p>Now <code>Item</code> got re-introduced, but instead of being a concrete type, it's now a generic one. That's it, you have a template list (assuming the list is implemented correctly, I didn't check).</p>\n\n<p>Whenever you now instantiate your list:</p>\n\n<pre><code>DList&lt;int&gt;;\nDList&lt;std::string&gt;;\n// ...\n</code></pre>\n\n<p>You create a totally new, independent data type (which means especially, that you cannot assign a <code>DList&lt;int&gt;</code> to a pointer to <code>DList&lt;double&gt;</code>, just all alike as you cannot assign a int to a pointer to double either).</p>\n\n<p>When you instantiate a template, every occurence of a template parameter will be replaced with the type you instantiated the template with, e. g. in <code>DList&lt;int&gt;</code>, every occurence of <code>Item</code> will be replaced with <code>int</code>.</p>\n\n<p>Well, all this is just a very short introduction, there's quite a lot to follow yet, but that's rather to be handled in book than in an answer on stackoverflow...</p>\n\n<p>Some notes to your node's constructor, though:</p>\n\n<pre><code>DListNode(Item i /* , ... */) { item = i; }\n</code></pre>\n\n<p>At very first, you should get used to using constructor's initialiser list (not to be confused with <code>std::initializer_list</code>):</p>\n\n<pre><code>DListNode(Item i /* , ... */) : item(i) { }\n</code></pre>\n\n<p>You avoid default initiasation + assignment in favour of direct initialisation by value. Additionally, some types (non-default constructible ones, const members and references) <em>only</em> can be initialised that way.</p>\n\n<p>Then you are producing an unnecessary copy:</p>\n\n<pre><code>DListNode(Item i /* , ... */) : item(i) { }\n//             ^ temporary copy   ^ final copy, created from temporary\n</code></pre>\n\n<p>You avoid that copy, if you accept the item by reference:</p>\n\n<pre><code>DListNode(Item const&amp; i /* , ... */) : item(i) { }\n// now copies from reference, one copy less\n</code></pre>\n\n<p>You can additionally provide move semantics:</p>\n\n<pre><code>DListNode(Item&amp;&amp; i /* , ... */) : item(std::move(i)) { }\n</code></pre>\n\n<p>so that objects you don't need outside the list any more can be moved into (well, actually their contents). In some cases, this can be much cheaper than a full copy...</p>\n\n<p>All said about the constructor (apart from the initialiser list) applies to the <code>append</code> and <code>insertAfter</code> functions as well.</p>\n\n<p>Initialiser lists and avoiding copies is general advice, unrelated to templates...</p>\n"}], "owner": {"reputation": 135, "user_id": 10285887, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-h-XNXmPvMhY/AAAAAAAAAAI/AAAAAAAACUE/wqOLMgxQC8s/photo.jpg?sz=128", "display_name": "John Harrison", "link": "https://stackoverflow.com/users/10285887/john-harrison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1570650483, "creation_date": 1570648230, "question_id": 58310755, "link": "https://stackoverflow.com/questions/58310755/how-to-use-templates-in-a-c-linked-list", "title": "How to use templates in a c++ linked list?", "body": "<p>I don't fully understand the concept of templates and am trying to get some help on how to implement one on my linked list below. I'm trying to get my code to be able to support the following types : <code>List&lt; List&lt;std::string&gt; &gt;</code> <code>List&lt;std::string&gt;</code> <code>List&lt;int&gt;</code>. I was wondering if there was any way someone could give me an example of how to convert these items into templates in addition to trying to explain what is happening? I'm new to c++ so any help I can get would be appreciated.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;cstddef&gt;\n\n\nusing Item = std::string;\n\n// TURN DList into a template!\nclass DList {\nprivate:\n\n  class DListNode {\n  public:\n    Item item;\n    DListNode * next;\n    DListNode * prev;\n    DListNode(Item i, DListNode *n=nullptr, DListNode *p=nullptr) {\n      item = i;      \n      next = n;\n      prev = p;\n    }\n  };\n\n  DListNode * head;\n  DListNode * tail;\n\npublic:\n  class iterator {\n    DListNode *node;\n  public:\n    iterator(DListNode *n = nullptr) {\n      node = n;\n    }\n\n    Item&amp; getItem() { return node-&gt;item; }\n    void next() { node = node-&gt;next; }\n    void prev() { node = node-&gt;prev; }\n    bool end() { return node==nullptr; }\n\n    friend class DList;\n  };\n\n\n\npublic:\n  DList() {\n    // list is empty\n    head = nullptr;\n    tail = nullptr;\n  }\n\n  bool empty() {\n    return head==nullptr;\n  }\n\n  void append(Item a) {\n    DListNode *node = new DListNode(a,nullptr,tail);\n    if ( head == nullptr ) {\n      // empty list\n      head = node;\n      tail = node;\n    } else {\n      tail-&gt;next = node;\n      tail = node;\n    }\n  }\n\n  void insertAfter(iterator it, Item item)\n  {\n    if(head == nullptr || it.node == nullptr) { // NULL iterator means insert at head\n      DListNode *node = new DListNode(item,head); // next=head, prev=NULL\n      if ( head == nullptr) // same as zyBook\n        head = tail = node;\n      else { // if inserting before head, it.node==NULL\n        head-&gt;prev = node;\n        head = node;\n      }\n    } else if (it.node == tail) {\n      DListNode *node = new DListNode(item,nullptr,tail); // next=NULL, prev=old tail\n      tail-&gt;next = node;\n      tail = node;\n    } else {\n      DListNode *node = new DListNode(item,it.node-&gt;next,it.node);\n      it.node-&gt;next = node;\n      node-&gt;next-&gt;prev = node;\n    }\n  }\n\n  void erase (iterator it) {\n    DListNode *succ = it.node-&gt;next; // successor node\n    DListNode *pred = it.node-&gt;prev; // predecessor node\n\n    if (succ != NULL)\n      succ-&gt;prev = pred;\n    if (pred != NULL)\n      pred-&gt;next = succ;\n\n    if (it.node == head)\n      head = succ; // head is following node\n    if (it.node == tail)\n      tail = pred; // tail is previous node\n\n    delete it.node; // delete the node; not shown in zyBook, but necessary in C/C++\n    // iterator is now invalid, caller should not use it again\n  }\n\n  iterator begin() {\n    return iterator(head);\n  }\n\n  iterator reverse_begin() {\n    return iterator(tail);\n  }\n};\n\ntemplate &lt;typename Item&gt;\nstd::ostream&amp; operator &lt;&lt; (std::ostream&amp; out, DList&lt;Item&gt; &amp;l)\n{\n  out &lt;&lt; \"{\";\n  auto it = l.begin();\n  out &lt;&lt; it.getItem();\n  it.next();\n  for(; !it.end(); it.next())\n    {\n      out &lt;&lt; \", \" &lt;&lt; it.getItem();\n    }\n  out &lt;&lt; \"}\" &lt;&lt; std::endl;\n  return out;\n}\n\n\nint main()\n{\n  {\n    DList&lt;std::string&gt; l;\n\n    l.append(\"eggs\");\n    l.append(\"milk\");\n    l.append(\"bread\");\n\n    std::cout &lt;&lt; l;\n  }\n  {\n    DList&lt;int&gt; l;\n\n    l.append(1);\n    l.append(2);\n    l.append(3);\n\n    std::cout &lt;&lt; l;\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1570648451, "post_id": 58310678, "comment_id": 102983024, "body": "With <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/operator_precedence</a> you will see that <code>(a[i] - ans * r &gt; 0)</code> is equivalent to <code>(((a[i]) - (ans * r)) &gt; 0)</code>. The value of <code>(a[i]) - (ans * r)</code> is compared with <code>0</code>. The result is converted to the type of <code>ans</code>. If it&#39;s a numeric type: true =&gt; 1, false =&gt; 0"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1570648948, "last_edit_date": 1570648948, "creation_date": 1570648460, "answer_id": 58310813, "question_id": 58310678, "link": "https://stackoverflow.com/questions/58310678/what-does-it-mean-by-ans-ai-ans-r-0-where-ans-r-are-integers/58310813#58310813", "title": "What does it mean by &quot; ans += (a[i] - ans * r &gt; 0); &quot;, where ans,r are integers and a[i] is an array element?", "body": "<p>When in doubt, simplify.</p>\n\n<p>Due to <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a>, the line</p>\n\n<pre><code>ans += (a[i] - ans * r &gt; 0);\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>ans += ((a[i] - ans * r) &gt; 0);\n</code></pre>\n\n<p>To make it more readable, use:</p>\n\n<pre><code>bool temp1 = ((a[i] - ans * r) &gt; 0);\nans += temp1;\n</code></pre>\n\n<p>When used in a term such as <code>ans += temp1</code>, a <code>bool</code> gets converted/promoted to <code>1</code> if the value is <code>true</code> and to <code>0</code> if the value is <code>false</code>.</p>\n\n<p>A further simplification would be:</p>\n\n<pre><code>bool temp1 = ((a[i] - ans * r) &gt; 0);\nint temp2 = (temp1? 1 : 0);\nans += temp2;\n</code></pre>\n\n<p>In the end, <code>ans</code> gets incremented by <code>1</code> if <code>(a[i] - ans * r) &gt; 0</code>. Otherwise, its value remains unchanged.</p>\n"}], "owner": {"reputation": 3, "user_id": 12190837, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAhXMjU_nDIsiEGeLO8CDKwP-6kWbBJIH4LHZBV=k-s128", "display_name": "ifahim1000", "link": "https://stackoverflow.com/users/12190837/ifahim1000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "closed_date": 1570648888, "accepted_answer_id": 58310813, "answer_count": 1, "score": -2, "last_activity_date": 1570648948, "creation_date": 1570647988, "last_edit_date": 1570648569, "question_id": 58310678, "link": "https://stackoverflow.com/questions/58310678/what-does-it-mean-by-ans-ai-ans-r-0-where-ans-r-are-integers", "closed_reason": "Duplicate", "title": "What does it mean by &quot; ans += (a[i] - ans * r &gt; 0); &quot;, where ans,r are integers and a[i] is an array element?", "body": "<p>i cant understand the second line of the below code:</p>\n\n<pre><code>for (int i = n - 1; i &gt;= 0; i--)\n{\n   ans += (a[i] - ans * r &gt; 0);\n   printf(\"%d\\n\", ans);\n}\n</code></pre>\n"}, {"tags": ["c++", "floating-point", "boolean"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1570647760, "post_id": 58310590, "comment_id": 102982740, "body": "<code>0</code> is <code>false</code>. Anything else is <code>true</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1570647939, "post_id": 58310590, "comment_id": 102982813, "body": "imho it is not really helpful to think of booleans as being stored as integers. Thats rather an implementation detail. Boolean values are <code>true</code> and <code>false</code> and <code>0</code> converts to <code>false</code>, thats all you need to remember"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1570648895, "post_id": 58310590, "comment_id": 102983228, "body": "That tutorial is misleading at best, and wrong at worst. <a href=\"https://stackoverflow.com/a/56369692/560648\">How bools are <i>stored</i> is not known except to your compiler</a>, and those claims about how bools are <i>evaluated</i> internally are too vacuous to even criticize. Please stop learning from online tutorials written by randomers and pick up <a href=\"https://stackoverflow.com/q/388242/560648\">a good peer-reviewed book</a> instead."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1570648998, "post_id": 58310590, "comment_id": 102983272, "body": "Anyway, that dupe answers your question."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570661074, "post_id": 58310590, "comment_id": 102987304, "body": "Its a <i>value</i> thing, not a <i>type</i> issue."}], "owner": {"reputation": 1140, "user_id": 8981474, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5S2rF.png?s=128&g=1", "display_name": "isakbob", "link": "https://stackoverflow.com/users/8981474/isakbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "closed_date": 1570647723, "answer_count": 0, "score": 0, "last_activity_date": 1570647599, "creation_date": 1570647599, "question_id": 58310590, "link": "https://stackoverflow.com/questions/58310590/since-booleans-are-an-integral-type-in-c-does-this-mean-0-0-is-not-false", "closed_reason": "Duplicate", "title": "Since booleans are an integral type in C++, does this mean &quot;0.0&quot; is not false?", "body": "<h1>Background</h1>\n\n<p>In C++, <a href=\"https://www.learncpp.com/cpp-tutorial/boolean-values/\" rel=\"nofollow noreferrer\">booleans</a> are stored as integers:</p>\n\n<blockquote>\n  <p>Boolean values are not actually stored in Boolean variables as the words \u201ctrue\u201d or \u201cfalse\u201d. Instead, they are stored as integers: true becomes the integer 1, and false becomes the integer 0. Similarly, when Boolean values are evaluated, they don\u2019t actually evaluate to \u201ctrue\u201d or \u201cfalse\u201d. They evaluate to the integers 0 (false) or 1 (true). Because Booleans actually store integers, they are considered an integral type.</p>\n</blockquote>\n\n<p>However, this seemed to contradict something I have seen. I recently came across a branched file that seemed to imply that the float value 0.0 is also equivalent to false as shown below:</p>\n\n<p><strong>Base Version</strong></p>\n\n<pre><code>arraySet_[m][n].resize(VALUES().maximumCellsPerRow[r], 0.0);\n</code></pre>\n\n<p><strong>Branched Version</strong></p>\n\n<pre><code>arraySet_[m][n].resize(VALUES().maximumCellsPerRow[r],false);\n</code></pre>\n\n<p>Given this equivalence I have seen, I am now wondering...</p>\n\n<h2>Question</h2>\n\n<p>Even though booleans are stored as integers, does C++ interpret the <code>float</code> value of 0.0 as false as well?</p>\n"}, {"tags": ["c++", "string", "substring", "reverse"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1570648012, "post_id": 58310570, "comment_id": 102982843, "body": "You&#39;re doubling up characters between words. Fwiw, you&#39;re also including the terminator in your calculation. That console output is <i>not</i> what I see. I see: <code>New:  ehT  kciuq  nworb  xof  spmuj  revo  eht  yzal  .god</code> , and note the leading space, and double spaces between words. Any particular reason you&#39;re not just using iterators and <code>std::reverse</code> limited to each word ?"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1570648491, "post_id": 58310570, "comment_id": 102983039, "body": "Those are not spaces but <code>\\0</code>. However my terminal displays them as spaces too."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1570649709, "post_id": 58310570, "comment_id": 102983561, "body": "Mentioned in my prior comment, <a href=\"https://pastebin.com/pQj62BPD\" rel=\"nofollow noreferrer\">something like this</a>. A bit of a hack. To do it right would involve <code>std::find</code> and <code>std::isspace</code>, but you get the idea."}], "answers": [{"comments": [{"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 2, "creation_date": 1570648433, "post_id": 58310699, "comment_id": 102983013, "body": "More specific, a <code>std::string</code> contains a <code>\\0</code> at the end so it is compatible with c strings. In the debugger it is clearly visible that before each reversed word there is a <code>\\0</code>."}, {"owner": {"reputation": 561, "user_id": 6781431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/474851c0a5ec3cf43cf852a2a6d8595a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Pearce", "link": "https://stackoverflow.com/users/6781431/chris-pearce"}, "reply_to_user": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1570648957, "post_id": 58310699, "comment_id": 102983258, "body": "Yeah great point, it&#39;s not just any data, but the null terminator of the string. Updated."}], "tags": [], "owner": {"reputation": 561, "user_id": 6781431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/474851c0a5ec3cf43cf852a2a6d8595a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Pearce", "link": "https://stackoverflow.com/users/6781431/chris-pearce"}, "is_accepted": true, "score": 2, "last_activity_date": 1570648951, "last_edit_date": 1570648951, "creation_date": 1570648075, "answer_id": 58310699, "question_id": 58310570, "link": "https://stackoverflow.com/questions/58310570/reversing-elements-of-a-string-delimited-by-spaces-returns-a-larger-string-than/58310699#58310699", "title": "Reversing elements of a string delimited by spaces returns a larger string than the original", "body": "<p>You're likely ending up with unprintable 'characters' in your string since you're trying to access off the end of a string.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>for(int j = word.length(); j &gt;= 0; j--){\n    revWord.push_back(word[j]);\n}\n</code></pre>\n\n<p>Here you set a variable to be equal to the word length, and then this variable is used to read one byte past the end of the string. The data stored here is a NUL byte, which is there so that the <code>std::string</code> can be used to produce a matching C-style string without making a copy of its data.</p>\n\n<p>I believe you're also ending up with a space at the end of your string, adding one more extra character.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1570653247, "creation_date": 1570653247, "answer_id": 58311894, "question_id": 58310570, "link": "https://stackoverflow.com/questions/58310570/reversing-elements-of-a-string-delimited-by-spaces-returns-a-larger-string-than/58311894#58311894", "title": "Reversing elements of a string delimited by spaces returns a larger string than the original", "body": "<p>There is a much simpler way to implement your <code>reverse()</code> function, using the <a href=\"https://en.cppreference.com/w/cpp/algorithm/reverse\" rel=\"nofollow noreferrer\"><code>std::reverse()</code></a> algorithm to modify the original <code>std::string</code> object inline and not use any additional <code>std::string</code> objects at all:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::string reverse(std::string str)\n{\n    std::string::size_type word_start = 0, word_end;\n    std::string::iterator iter = str.begin();\n\n    do\n    {\n        word_end = str.find(' ', word_start);\n        if (word_end == std::string::npos)\n        {\n            std::reverse(iter + word_start, str.end());\n            break;\n        }\n        std::reverse(iter + word_start, iter + word_end);\n        word_start = str.find_first_not_of(' ', word_end + 1);\n    }\n    while (word_start != std::string::npos);\n\n    return str;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/RAOKq7\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}], "owner": {"reputation": 57, "user_id": 7696758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18d731017be4c009f58ce9b3555554d1?s=128&d=identicon&r=PG&f=1", "display_name": "aslotu", "link": "https://stackoverflow.com/users/7696758/aslotu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 58310699, "answer_count": 2, "score": 1, "last_activity_date": 1570653247, "creation_date": 1570647501, "question_id": 58310570, "link": "https://stackoverflow.com/questions/58310570/reversing-elements-of-a-string-delimited-by-spaces-returns-a-larger-string-than", "title": "Reversing elements of a string delimited by spaces returns a larger string than the original", "body": "<p>Having fun in c++ on CodeWars trying to reverse the letters of the words in a string, words delimited by spaces ie. \"Hello my friend\" --> \"olleH ym dneirf\", where extra spaces are not lost.</p>\n\n<p>My answer is failing the tests, but when I diff my answer and the suggested answer there is no output. I also tried checking the length of the original and reversed strings and there is a significant difference in their lengths, depending on the string. However, when I compare the outputs they are again identical in terms of length, and there is no trailing whitespace. </p>\n\n<pre><code>int main() {\n\n    std::string s(\"The quick brown fox jumps over the lazy dog.\");\n\n    std::cout &lt;&lt;\"Old: \"&lt;&lt;s&lt;&lt;std::endl;\n    std::cout &lt;&lt;\"New: \"&lt;&lt;reverse(s)&lt;&lt;std::endl;\n\n    //lengths are not the same\n    std::cout &lt;&lt;\"Length of s: \"&lt;&lt;s.length()&lt;&lt;std::endl;\n    std::cout &lt;&lt;\"Length of reverse(s): \"&lt;&lt;reverse(s).length()&lt;&lt;std::endl;\n\n    //check for trailing whitespace\n    std::cout &lt;&lt;\"Last 5 chars of reverse(s): \"&lt;&lt;reverse(s).substr(reverse(s).length() - 6)&lt;&lt;std::endl;\n}\n</code></pre>\n\n<pre><code>std::string reverse(std::string str) {\n\n    std::string word;\n    std::string revWord;\n    std::string result;\n    char space(' ');\n\n    int cursor = 0;\n    for(int i = 0; i &lt; str.length(); i++){\n        std::string revWord;\n        if (str[i] == space || i == str.length() - 1){\n            if (i == str.length() - 1)\n                i++;\n            word = str.substr(cursor, i - cursor);\n            for(int j = word.length(); j &gt;= 0; j--){\n                revWord.push_back(word[j]);\n            }\n            word = revWord;\n            if(i != str.length() - 1)\n                result.append(word + \" \");\n            cursor = i+1;\n        }\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>Console Output:</p>\n\n<pre><code>Old: The quick brown fox jumps over the lazy dog.\nNew: ehT kciuq nworb xof spmuj revo eht yzal .god \nLength of s: 44\nLength of reverse(s): 54\nLast 5 chars of reverse(s): .god\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "class", "oop"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1570647345, "post_id": 58310493, "comment_id": 102982548, "body": "&quot;ive been told that this is bad practice.&quot; - why?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1570647358, "post_id": 58310493, "comment_id": 102982554, "body": "<i>But ive been told that this is bad practice.</i> That&#39;s silly.  Code like this is fine.  Making a separate class for <code>pistol</code> and <code>revolver</code> would be silly since there are/can be many different pistols/revolvers that have their own stats."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1570647425, "post_id": 58310493, "comment_id": 102982592, "body": "There are numerous ways to do this, and which one works better depends on your circumstances.  You&#39;ve left out having a data file that holds all the attributes that you read in and parse."}, {"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "edited": false, "score": 0, "creation_date": 1570650905, "post_id": 58310493, "comment_id": 102984040, "body": "&quot;The standard practice for this&quot; is a Factory Pattern.  Apologies but I am very busy right now. I am sure this article of mine, will help: <a href=\"https://dbj.org/c-the-modern-factory/\" rel=\"nofollow noreferrer\">dbj.org/c-the-modern-factory</a>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1570648008, "creation_date": 1570648008, "answer_id": 58310685, "question_id": 58310493, "link": "https://stackoverflow.com/questions/58310493/what-is-the-proper-way-to-initialize-predefined-member-variables-in-multiple-obj/58310685#58310685", "title": "What is the proper way to initialize predefined member variables in multiple objects?", "body": "<p>You have</p>\n\n<pre><code>Gun pistol(10, 10, 10);\nGun revolver(20, 5, 15);\nGun machinePistol(5, 20, 5);\n</code></pre>\n\n<p>It sounds from your post that those are the only valid arguments for constructing <code>Gun</code>. It that is true, then I would advise:</p>\n\n<ol>\n<li>Add <code>public</code> <code>static</code> member functions to <code>Gun</code> to create such <code>Gun</code>s.</li>\n<li>Make the constructor of the class <code>private</code> so that <code>Gun</code>s cannot be constructed any other way.</li>\n</ol>\n\n<hr>\n\n<pre><code>class Gun\n{\n    public:\n\n       static Gun constructPistol();\n       static Gun constructRevolver();\n       static Gun constructMachinePistol();\n\n    private:\n\n       Gun(int, int, int);\n};\n\nGun Gun::constructPistol() { return Gun(10, 10, 10); }\nGun Gun::constructRevolver() { return Gun(20, 5, 15); }\nGun Gun::constructMachinePistol() { return Gun(5, 20, 5); }\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 8313634, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VwZD4TzkULY/AAAAAAAAAAI/AAAAAAAAAG8/NrsTw1vKa5I/photo.jpg?sz=128", "display_name": "Miles Turin", "link": "https://stackoverflow.com/users/8313634/miles-turin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570648008, "creation_date": 1570647165, "question_id": 58310493, "link": "https://stackoverflow.com/questions/58310493/what-is-the-proper-way-to-initialize-predefined-member-variables-in-multiple-obj", "title": "What is the proper way to initialize predefined member variables in multiple objects?", "body": "<p>I do not come from an OOP background, and though I fully understand classes, this is a stylistic question that I have never found a satisfactory answer to. Say you are making a video game, and define a class called Gun. It has member variables called damage, fire rate, and accuracy. There are several pre defined guns, well say pistol, revolver, and machine pistol. Each Guns member variables are known at run time and never change. What is the proper way to initialize each gun?</p>\n\n<p>You can just initialize them at run time </p>\n\n<pre><code>Gun pistol(10, 10, 10);\nGun revolver(20, 5, 15);\nGun machinePistol(5, 20, 5);\n</code></pre>\n\n<p>But ive been told that this is bad practice. You can define each of them as a new class inherited from Gun, then initialize all of their member variables in their constructors, but this is quite verbose, and it is difficult to keep track of all of the new classes. </p>\n\n<p>You could also have all of the member variables be initialized in one constructor, like so</p>\n\n<pre><code>switch(whichGun)\n{\ncase pistol:\n    damage = 10;\n    //etc, etc\n}\n</code></pre>\n\n<p>But this requires some way to identify each gun, such as an enum which comes off as cumbersome. </p>\n\n<p>What is the standard practice for this? I mainly use c++ but I would assume that this applies to most OOPL. </p>\n"}, {"tags": ["c++", "ncurses"], "comments": [{"owner": {"reputation": 10579, "user_id": 1046007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c27f58af84eeaad72231f198e7c369?s=128&d=identicon&r=PG", "display_name": "Walter Tross", "link": "https://stackoverflow.com/users/1046007/walter-tross"}, "edited": false, "score": 0, "creation_date": 1570646588, "post_id": 58310307, "comment_id": 102982258, "body": "please give a full example of your problem"}, {"owner": {"reputation": 249, "user_id": 10855478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xs2KX.png?s=128&g=1", "display_name": "k-a-v", "link": "https://stackoverflow.com/users/10855478/k-a-v"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1570646702, "post_id": 58310307, "comment_id": 102982307, "body": "@GuillaumeRacicot  - yup, setlocale did it for me"}], "owner": {"reputation": 249, "user_id": 10855478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xs2KX.png?s=128&g=1", "display_name": "k-a-v", "link": "https://stackoverflow.com/users/10855478/k-a-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1570646529, "answer_count": 0, "score": 0, "last_activity_date": 1570646297, "creation_date": 1570646297, "question_id": 58310307, "link": "https://stackoverflow.com/questions/58310307/c-ncurses-printw-with-special-characters-yeilds-tb", "closed_reason": "Duplicate", "title": "C++ ncurses: printw with special characters yeilds &#39;\ufffd~T~B&#39;", "body": "<p>I'm trying to <a href=\"https://en.wikipedia.org/wiki/Box-drawing_character\" rel=\"nofollow noreferrer\">print box drawing characters</a> with ncurses in C++, as shown below.  </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;ncurses.h&gt;\n\nint main() {\n    initscr();\n    addstr(\"\u2502\");\n    getch();\n    endwin();\n}\n</code></pre>\n\n<p>When I use <code>printw</code> or <code>addstr</code> to print non-alphabetic/numeric to the screen, it only prints <code>\ufffd~T~B</code>. What am I doing wrong?</p>\n"}, {"tags": ["c++", "segmentation-fault", "stdthread"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1570646072, "post_id": 58310249, "comment_id": 102982036, "body": "What is <code>numThreads</code>? <code>getMax</code>? Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 11, "user_id": 5792218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d4563ba3a34a2a45f72d6279131524?s=128&d=identicon&r=PG&f=1", "display_name": "helloWorld123", "link": "https://stackoverflow.com/users/5792218/helloworld123"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570646119, "post_id": 58310249, "comment_id": 102982068, "body": "numThreads is just a define variable which defines there to be 10 threads that are going to be created."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1570646143, "post_id": 58310249, "comment_id": 102982074, "body": "Don&#39;t explain the code. Provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> instead."}, {"owner": {"reputation": 11, "user_id": 5792218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d4563ba3a34a2a45f72d6279131524?s=128&d=identicon&r=PG&f=1", "display_name": "helloWorld123", "link": "https://stackoverflow.com/users/5792218/helloworld123"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570646221, "post_id": 58310249, "comment_id": 102982118, "body": "#define numThreads 10"}, {"owner": {"reputation": 11, "user_id": 5792218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d4563ba3a34a2a45f72d6279131524?s=128&d=identicon&r=PG&f=1", "display_name": "helloWorld123", "link": "https://stackoverflow.com/users/5792218/helloworld123"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570646237, "post_id": 58310249, "comment_id": 102982130, "body": "getMax() returns max value of an array"}, {"owner": {"reputation": 978, "user_id": 1902082, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f46590cf12954aeab118e32b10f0ed97?s=128&d=identicon&r=PG", "display_name": "scooter me fecit", "link": "https://stackoverflow.com/users/1902082/scooter-me-fecit"}, "edited": false, "score": 0, "creation_date": 1570646273, "post_id": 58310249, "comment_id": 102982146, "body": "@Matt: If &quot;we&quot; (viewers) can&#39;t compile your code (minimal reproducible example), it&#39;s hard to tell what your bug is. For example, if <code>size</code> isn&#39;t the same as <code>numThreads</code>, well, that could be one particular bug."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1570646360, "post_id": 58310249, "comment_id": 102982175, "body": "Please use the Edit link to edit your question and make your program complete."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1570646377, "post_id": 58310249, "comment_id": 102982184, "body": "@Matt Why is it so hard, to <a href=\"https://stackoverflow.com/posts/58310249/edit\">edit</a> your question with the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Did you try to read the link, that I provided, so you can learn what it is?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1570646517, "post_id": 58310249, "comment_id": 102982225, "body": "after filling in the blanks your code works:<a href=\"https://wandbox.org/permlink/pC3hbMv8ZKATzi2E\" rel=\"nofollow noreferrer\">wandbox.org/permlink/pC3hbMv8ZKATzi2E</a>, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1570646529, "post_id": 58310249, "comment_id": 102982230, "body": "There is also no <code>threadMax</code> defined anywhere in this, but is used in the final loop. Please, imagine what we know about your code is <b>only</b> what you posted. We don&#39;t have your source file. We don&#39;t have your <code>#include</code> stack, your global variables, hard macros, etc. Therefore <i>we can&#39;t reproduce your issue</i>. Therefore, at best you&#39;re going to get WAGs (wild-arse-guesses), which are unproductive and make for terrible long-term answers. <a href=\"https://stackoverflow.com/posts/58310249/edit\">Update your question</a> so as to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and we can probably help."}, {"owner": {"reputation": 11, "user_id": 5792218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d4563ba3a34a2a45f72d6279131524?s=128&d=identicon&r=PG&f=1", "display_name": "helloWorld123", "link": "https://stackoverflow.com/users/5792218/helloworld123"}, "edited": false, "score": 0, "creation_date": 1570646696, "post_id": 58310249, "comment_id": 102982301, "body": "Here is some updated code"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1570646848, "post_id": 58310249, "comment_id": 102982357, "body": "<code>num += 1;</code> is not synchronized. Multiple threads may try to read from/write to <code>num</code> at the same time."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1570647229, "post_id": 58310249, "comment_id": 102982499, "body": "@helloWorld123 The bottom line is that multithread programming isn&#39;t about just knowing how to start threads.  You have to learn synchronization techniques -- mutexes, atomic variables, race conditions, etc.  It is not a trivial topic."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 5, "last_activity_date": 1570646997, "creation_date": 1570646997, "answer_id": 58310454, "question_id": 58310249, "link": "https://stackoverflow.com/questions/58310249/why-am-i-getting-a-seg-fault-when-creating-threads/58310454#58310454", "title": "Why am I getting a Seg Fault when creating threads?", "body": "<p>The behavior of this code is undefined:</p>\n\n<pre><code> void getMax(double *A){\n        num += 1;\n        double max = A[0];\n        double min = A[0];\n        for (int i =0; i&lt;size; i++){\n              if(A[i] &gt; max){\n                        max = A[i];\n                }\n        }\n        threadMax[num] = max;\n}\n</code></pre>\n\n<p>The <code>num += 1</code> can allow multiple threads to attempt to modify <code>num</code> at the same time. Worse, when <code>num</code> is read in the <code>threadMax[num] = max;</code>, threads may see values of <code>num</code> modified by other threads while they were running.</p>\n\n<p>You need to assign each thread a number in some safe way.</p>\n\n<p>Here are three ways it can fail:</p>\n\n<ol>\n<li><p>Two threads do <code>num += 1;</code> at exactly the same time and as a result, <code>num</code> only increments once.</p></li>\n<li><p>Every thread does <code>num += 1;</code> before any thread does <code>threadMax[num] = max;</code>. All threads overwrite the same entry in the array. (Which, actually, is out of bounds!)</p></li>\n<li><p>The code crashes because its behavior is undefined.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1570648534, "last_edit_date": 1570648534, "creation_date": 1570648162, "answer_id": 58310731, "question_id": 58310249, "link": "https://stackoverflow.com/questions/58310249/why-am-i-getting-a-seg-fault-when-creating-threads/58310731#58310731", "title": "Why am I getting a Seg Fault when creating threads?", "body": "<p>As others have stated, your <code>num</code> variable is not protected from race conditions inside of <code>getMax()</code>, which can lead to it being corrupted, thus causing <code>getMax()</code> to access the <code>threadMax[]</code> array out of bounds.</p>\n\n<p>You can avoid that by simply getting rid of that <code>num</code> variable altogether and pass the array index as an input parameter to <code>std::thread</code> instead.</p>\n\n<p>Try something more like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;array&gt;\n#include &lt;thread&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\nconst size_t size = 10;\nconst size_t numThreads = 10;\n\ndouble threadMax[numThreads] = {};\n\nvoid getMax(int idx, double *A){\n    threadMax[idx] = *max_element(A, A + size);\n}\n\nint main(){\n    srand(time(nullptr));\n\n    vector&lt;double&gt; A(size);\n    array&lt;thread, numThreads&gt; t;\n\n    //Assign random values to array\n    generate_n(A.begin(), size, [](){ return double(rand() % 100); });\n    /* or:\n    for(double &amp;d : A){\n        d = double(rand() % 100);\n    }\n    */\n\n    //create Threads\n    for(int j = 0; j &lt; numThreads; ++j){\n        cout &lt;&lt; A[j] &lt;&lt; \"    \" &lt;&lt; j &lt;&lt; \"\\n\";\n        t[j] = thread(getMax, j, A.data());\n    }\n\n    //join threads\n    for(thread &amp;thd : t){\n        thd.join();\n    }\n\n    //Find Max from all threads\n    double max = *max_element(threadMax.begin(), threadMax.end());\n    cout &lt;&lt; max;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5792218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d4563ba3a34a2a45f72d6279131524?s=128&d=identicon&r=PG&f=1", "display_name": "helloWorld123", "link": "https://stackoverflow.com/users/5792218/helloworld123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570648534, "creation_date": 1570646003, "last_edit_date": 1570647389, "question_id": 58310249, "link": "https://stackoverflow.com/questions/58310249/why-am-i-getting-a-seg-fault-when-creating-threads", "title": "Why am I getting a Seg Fault when creating threads?", "body": "<p>I am confused as to why I am getting a segmentation fault when creating and firing off threads here. It happens in the <code>t[j] = thread(getMax, A);</code> line and I am very confused as to why this is happening. <code>threadMax[]</code> is the max of each thread. <code>getMax()</code> returns the maximum value of an array.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;thread&gt;\n#define size 10\n#define numThreads 10\nusing namespace std;\n\nint threadMax[numThreads] = {0};\nint num =0;\n\nvoid getMax(double *A){\n    num += 1;\n    double max = A[0];\n    double min = A[0];\n    for (int i =0; i&lt;size; i++){\n        if(A[i] &gt; max){\n            max = A[i];\n        }\n    }\n    threadMax[num] = max;\n}\n\nint main(){\n    int max =0;\n    double S,E;\n    double *A = new double[size];\n    srand(time(NULL));\n    thread t[numThreads];\n    //Assign random values to array\n    for(int i = 0; i&lt;size; i++){\n        A[i] = (double(rand()%100));\n    }\n    //create Threads\n    for(int j =0; j &lt;numThreads; j++){\n        cout &lt;&lt; A[j] &lt;&lt; \"    \" &lt;&lt; j &lt;&lt; \"\\n\";\n        t[j] = thread(getMax, A);\n    }\n\n    //join threads\n    for(int i =0; i&lt; numThreads; i++){\n        t[i].join();\n    }\n\n    //Find Max from all threads\n    for(int i =0; i &lt; numThreads; i++){\n        if(threadMax[i] &gt; max){\n            max = threadMax[i];\n        }\n    }\n\n    cout &lt;&lt;max;\n\n    delete [] A;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "visual-c++", "createprocess"], "comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1570696953, "post_id": 58310225, "comment_id": 102997090, "body": "What does &quot;without anything attached&quot; mean? What does &quot;n seconds per line&quot; mean? &quot;TestProject.exe&quot; is the &quot;App&quot;?"}, {"owner": {"reputation": 27592, "user_id": 1031591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1", "display_name": "atlaste", "link": "https://stackoverflow.com/users/1031591/atlaste"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1570701767, "post_id": 58310225, "comment_id": 102999795, "body": "@WernerHenze &#39;Without anything attached&#39; means just starting the EXE from Windows Explorer. &quot;N seconds per line&quot; means that it will take N seconds to produce a single iteration of <code>i</code>. And yes, &quot;TestProject.exe&quot; is the app. I&#39;ll update the question, thanks for the feedback."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1570714227, "post_id": 58310225, "comment_id": 103006836, "body": "Does the &quot;Debugger&quot; see any debug events in any case? Which and how many? Does that make the difference?"}, {"owner": {"reputation": 27592, "user_id": 1031591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1", "display_name": "atlaste", "link": "https://stackoverflow.com/users/1031591/atlaste"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1570733247, "post_id": 58310225, "comment_id": 103016655, "body": "@WernerHenze Good question, that was also my initial guess. The answer is: not during the execution of the tests, only before and after (loading dll&#39;s, start/exit process, etc). In other words: no relevant events are generated. Zero."}, {"owner": {"reputation": 27592, "user_id": 1031591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1", "display_name": "atlaste", "link": "https://stackoverflow.com/users/1031591/atlaste"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1570733349, "post_id": 58310225, "comment_id": 103016702, "body": "One thing I did notice is that the vector copy constructor makes all the difference in the world. Without it, the timings are pretty much what you would expect. With it, something weird is going on..."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1570872046, "post_id": 58310225, "comment_id": 103059250, "body": "I once read that if you start a process in the MSVC debugger allocations are handled differently. I don&#39;t know the reasons, but maybe that is worth looking at. To be honest I am not sure if this helps much because I would expect the allocation to do more if running under a debugger, but your observation suggest the opposite."}, {"owner": {"reputation": 27592, "user_id": 1031591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1", "display_name": "atlaste", "link": "https://stackoverflow.com/users/1031591/atlaste"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1570891476, "post_id": 58310225, "comment_id": 103063912, "body": "@WernerHenze The benchmarks suggest the exact opposite: that running CreateProcess does something weird, which VS somehow seems to be able to work around."}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1570902019, "post_id": 58310225, "comment_id": 103066620, "body": "std implementation is complex with Visual Studio. Just to give an idea: <a href=\"https://devblogs.microsoft.com/cppblog/cpp17-20-features-and-fixes-in-vs-2019/\" rel=\"nofollow noreferrer\">devblogs.microsoft.com/cppblog/&hellip;</a> cites a &quot;memcpy fast path&quot;, it probably takes a specific path when you debug. I can&#39;t reproduce with similar code w/o std. Have you tried to look inside std impl (I won&#39;t :-) ?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1570951184, "post_id": 58310225, "comment_id": 103074593, "body": "please print value of <code>ULONG NtGlobalFlag;</code> from <a href=\"https://www.geoffchappell.com/studies/windows/win32/ntdll/structs/peb/index.htm\" rel=\"nofollow noreferrer\"><code>PEB</code></a> in case when program run fast under vs debugger and slow in (4) case"}, {"owner": {"reputation": 12248, "user_id": 235660, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/98ef0371256aeebaa378d1acc31ff4a8?s=128&d=identicon&r=PG", "display_name": "Alois Kraus", "link": "https://stackoverflow.com/users/235660/alois-kraus"}, "edited": false, "score": 0, "creation_date": 1570959683, "post_id": 58310225, "comment_id": 103076151, "body": "Use WPR. Execute wpr  -start GeneralProfile -start CPU -start VirtualAlloc -start DiskIO and execute then your application which is slow. Then run wpr -stop c:\\temp\\slowHeapIssue.etl and drop the ETL along with your pdbs for your application somewhere. WPR is part of Windows 10 so it should just work."}], "answers": [{"comments": [{"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1570950168, "post_id": 58359012, "comment_id": 103074430, "body": "Everyone knows a run is slower under a debugger for various reasons, but - or maybe I missed something - that doesn&#39;t explain why 4 (not run under VS debugger) is <i>slower</i> than 3 (run under VS debugger)."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1570950827, "post_id": 58359012, "comment_id": 103074540, "body": "@SimonMourier - agree with your question. this only unclear for me. may be this - <a href=\"https://thetweaker.files.wordpress.com/2014/09/091914_1923_acceleratin1.png?w=505&amp;zoom=2\" rel=\"nofollow noreferrer\">thetweaker.files.wordpress.com/2014/09/&hellip;</a> set in project (app and debugger) and this explain why when run code from VS debugger not slow compare without debugger, but this is very unusual and not by default. need more info and research here, but i sure that source of time different - debug heap in 4 case. i be ask print <a href=\"https://processhacker.sourceforge.io/doc/ntpebteb_8h_source.html#l00071\" rel=\"nofollow noreferrer\"><code>NtGlobalFlags</code></a> at begin in all 3 case"}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1570952383, "post_id": 58359012, "comment_id": 103074765, "body": "So, yes, setting _NO_DEBUG_HEAP=1 on Debugger causes 4 to run like the others, so it means debug heap is on for this case? That&#39;s weird."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1570953797, "post_id": 58359012, "comment_id": 103074971, "body": "@SimonMourier - you correct that under debugger, when debug heap is used application must run slow compare without debugger. but why in this case (2)(Run App in the Visual Studio debugger) app not run more slow compare (1), despite it intensive use heap alloc/free all time ? your own assumption <i>std implementation..</i> also not explain why under vs debugger code run fast like no debugger, but slow with another debugger (of course we can detect not only debugger present but which concrete, but i sure only special anti-debug protections do this)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 1, "creation_date": 1570953979, "post_id": 58359012, "comment_id": 103075003, "body": "@SimonMourier i can not myself do test/checks here. but i sure that different in heap settings is source of different. so need check for <a href=\"https://www.geoffchappell.com/studies/windows/win32/ntdll/structs/peb/index.htm\" rel=\"nofollow noreferrer\"><code>NtGlobalFlag</code></a> at begin. then, if my assumption correct, check for <code>_NO_DEBUG_HEAP</code> in app - are this variable exist and if yes - it value"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1570954170, "post_id": 58359012, "comment_id": 103075033, "body": "@SimonMourier - by default - no <code>_NO_DEBUG_HEAP</code> variable in program environment. as result we use debug heap if debugger present and not use it if not present. if <code>_NO_DEBUG_HEAP</code> exist and not 0 value - debug heap not used even if debugger present. that (2) and (3) run like (1) say that possible VS in OP projects sets <code>_NO_DEBUG_HEAP=1</code>.. but this is only assumption (not sure in this)"}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 2, "creation_date": 1570956481, "post_id": 58359012, "comment_id": 103075500, "body": "I also tried the &quot;Enable Windows debug heap allocator (Native only)&quot; Tools/Options/Debugging setting. When checked, 3 and 4 run the same. So overall, it looks like it means running under VS debugger sets _NO_DEBUG_HEAP=1 unless this setting is checked. I think this is what they say here: <a href=\"https://devblogs.microsoft.com/cppblog/c-debugging-improvements-in-visual-studio-14/\" rel=\"nofollow noreferrer\">devblogs.microsoft.com/cppblog/&hellip;</a> &quot; <code>... when launching C++ apps with the VS debugger ... we disable the operating system\u2019s debug heap ...</code>, while just calling CreateProcess w DEBUG_PROCESS enables it."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 1, "creation_date": 1570957455, "post_id": 58359012, "comment_id": 103075683, "body": "@SimonMourier - i just start code under vs2019 debugger and view <code>_NO_DEBUG_HEAP=1</code> variable is set. this is all explain. even if we not manually set it in project settings - this is now set by default. because this 2 and 1 run at same time. environment is inherited if not set it direct. as result 3 also run as 1 (app inherit _NO_DEBUG_HEAP=1 from debugger). but in case 4 - no <code>_NO_DEBUG_HEAP=1</code>"}, {"owner": {"reputation": 27592, "user_id": 1031591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1", "display_name": "atlaste", "link": "https://stackoverflow.com/users/1031591/atlaste"}, "edited": false, "score": 0, "creation_date": 1570974628, "post_id": 58359012, "comment_id": 103079258, "body": "@RbMm Oh boy... Allright, I&#39;ve just did all the tests. If you (1) set _NO_DEBUG_HEAP, it works as expected. Question is of course still how does test #3 differ from test #4. Apparently you need to reset both NtGlobalFlag and BeingDebugged, and you have to do it immediately after the <code>CreateProcess</code>. After that, the behavior is the same, so apparently they are both checked... With that, I consider your answer the correct one, and I&#39;m happy to award you the bounty. Am I happy with how my code looks... well let&#39;s save that discussion for another day..."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 27592, "user_id": 1031591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1", "display_name": "atlaste", "link": "https://stackoverflow.com/users/1031591/atlaste"}, "edited": false, "score": 0, "creation_date": 1570974950, "post_id": 58359012, "comment_id": 103079332, "body": "@atlaste - <i>Question is of course still how does test #3 differ from test #4.</i> - in 3 you start debugger from VS debugger. and VS debugger set <code>_NO_DEBUG_HEAP=1</code> in your <i>Debugger</i>, then when you start <i>App</i> from your debugger - the <code>_NO_DEBUG_HEAP=1</code> is <b>inherited</b> as all your environment. when you start your debugger separate - nobody set <code>_NO_DEBUG_HEAP=1</code> for it. and you not set it when start app too - as result no <code>_NO_DEBUG_HEAP=1</code> in case #4 in <i>App</i> environment. and you not need reset NtGlobalFlag or BeingDebugged."}, {"owner": {"reputation": 27592, "user_id": 1031591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1", "display_name": "atlaste", "link": "https://stackoverflow.com/users/1031591/atlaste"}, "edited": false, "score": 0, "creation_date": 1570976938, "post_id": 58359012, "comment_id": 103079722, "body": "Yeah I understand. From what I can see in my tests, the first thing that happens when you start a process is that the PEB/NtGlobalFlag and the BeingDebugged flag are checked - and if one of that is non-0, it checks if <code>_NO_DEBUG_HEAP == 1</code>. I also understand <i>why</i> now - if you change the PEB flags, it has side-effects with events (notifications will be missing) for the debugger. That pretty much sums it all up... I just don&#39;t like it, because it kinda makes you wonder what other stuff is going to happen when you use CreateProcess."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 27592, "user_id": 1031591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1", "display_name": "atlaste", "link": "https://stackoverflow.com/users/1031591/atlaste"}, "edited": false, "score": 0, "creation_date": 1570977347, "post_id": 58359012, "comment_id": 103079801, "body": "@atlaste - but <code>CreateProcessW</code> (with <code>CreateProcessAsUserW</code> and if very want <code>CreateProcessInternalW</code>) only way create new process and not understand <i>wonder what other stuff is going to happen when you use CreateProcess</i>. the <code>BeingDebugged</code> and <code>_NO_DEBUG_HEAP != 0</code> checked at very early stage of process initialization"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 4, "last_activity_date": 1570958695, "last_edit_date": 1570958695, "creation_date": 1570918464, "answer_id": 58359012, "question_id": 58310225, "link": "https://stackoverflow.com/questions/58310225/weird-slowdown-when-using-createprocess/58359012#58359012", "title": "Weird slowdown when using CreateProcess", "body": "<p>different in debug heap. read <a href=\"https://preshing.com/20110717/the-windows-heap-is-slow-when-launched-from-the-debugger/\" rel=\"nofollow noreferrer\">The Windows Heap Is Slow When Launched from the Debugger</a></p>\n\n<p>and <a href=\"https://ofekshilon.com/2014/09/20/accelerating-debug-runs-part-1-_no_debug_heap-2/\" rel=\"nofollow noreferrer\">Accelerating Debug Runs, Part 1: _NO_DEBUG_HEAP</a></p>\n\n<p>when process initialized system (ntdll) check are debugger present, if check are environment variable <code>_NO_DEBUG_HEAP</code> exists and is set to non zero. if no - set the <em>NtGlobalFlag</em> (in the PEB) to debug heap use (<code>FLG_HEAP_ENABLE_TAIL_CHECK</code>, <code>FLG_HEAP_ENABLE_FREE_CHECK</code>, <code>FLG_HEAP_VALIDATE_PARAMETERS</code>) all this checks and filling all allocated blocks with special pattern (<code>baadf00d</code> and <code>abababab</code> at the end of block) make all heap alloc/free slow (compare without this case)</p>\n\n<p>from another side your program most time use for allocate/free memory from heap.</p>\n\n<p>the profile also show this - <code>RtlAllocateHeap</code>, <code>memset</code> - sure when allocated block filled with magic pattern, <code>RtlpNtMakeTemporaryKey</code> - this \"function\" composed from single instruction - <code>jmp ZwDeleteKey</code> - so you really not inside this function but \"near\" it, inside another function related to heap.</p>\n\n<hr>\n\n<p>as noted <em>Simon Mourier</em> - why the case (2) and (3) run fast as (1) (when no debugger) but only case (4) more slow ?</p>\n\n<p>from <a href=\"https://devblogs.microsoft.com/cppblog/c-debugging-improvements-in-visual-studio-14/\" rel=\"nofollow noreferrer\">C++ Debugging Improvements in Visual Studio \"14\"</a></p>\n\n<blockquote>\n  <p>So to improve performance when launching C++ applications with the\n  Visual Studio debugger, in Visual Studio 2015 we disable the operating\n  system\u2019s debug heap.</p>\n</blockquote>\n\n<p>this is done by set <strong><code>_NO_DEBUG_HEAP=1</code></strong> in debugged process environment . so compare <a href=\"https://ofekshilon.com/2014/09/20/accelerating-debug-runs-part-1-_no_debug_heap-2/\" rel=\"nofollow noreferrer\">Accelerating Debug Runs, Part 1: _NO_DEBUG_HEAP</a> (article is old) - now this is by default.</p>\n\n<p>we can check this by next code in app:</p>\n\n<pre><code>WCHAR _no_debug_heap[32];\nif (GetEnvironmentVariable(L\"_NO_DEBUG_HEAP\", _no_debug_heap, _countof(_no_debug_heap)))\n{\n    DbgPrint(\"_NO_DEBUG_HEAP=%S\\n\", _no_debug_heap);\n}\nelse\n{\n    DbgPrint(\"error=%u\\n\", GetLastError());\n}\n</code></pre>\n\n<p>so when we start app under debugger - no debug heap because VS debugger add <code>_NO_DEBUG_HEAP=1</code>. when you start your debugger under debugger and app from your debugger - from <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessw\" rel=\"nofollow noreferrer\"><code>CreateProcessW</code></a> function</p>\n\n<blockquote>\n  <p><strong><em>lpEnvironment</em></strong></p>\n  \n  <p>A pointer to the environment block for the new process. If this\n  parameter is NULL, the new process uses the environment of the calling\n  process.</p>\n</blockquote>\n\n<p>because you pass 0 here - so app use the same environment as debugger - inherit <code>_NO_DEBUG_HEAP=1</code></p>\n\n<p>but in case (4) - you not set <code>_NO_DEBUG_HEAP=1</code> by self. as result debug heap used and run more slow.</p>\n"}], "owner": {"reputation": 27592, "user_id": 1031591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1", "display_name": "atlaste", "link": "https://stackoverflow.com/users/1031591/atlaste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 58359012, "answer_count": 1, "score": 1, "last_activity_date": 1570958695, "creation_date": 1570645882, "last_edit_date": 1570735759, "question_id": 58310225, "link": "https://stackoverflow.com/questions/58310225/weird-slowdown-when-using-createprocess", "title": "Weird slowdown when using CreateProcess", "body": "<p>Let me just start with some example code. I have made a minimum test case for this. To reproduce, two pieces are needed:</p>\n\n<p>First executable, a small application that uses <code>CreateProcess</code>. Let's call it <em>Debugger</em>.</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    STARTUPINFO         si = {0};\n    PROCESS_INFORMATION pi = {0};\n    si.cb = sizeof(si);\n\n    // Starts the 'App':\n    auto exe = L\"C:\\\\Tests\\\\x64\\\\Release\\\\TestProject.exe\";\n    std::vector&lt;wchar_t&gt; tmp;\n    tmp.resize(1024);\n    memcpy(tmp.data(), exe, (1 + wcslen(exe)) * sizeof(wchar_t));\n\n    auto result = CreateProcess(NULL, tmp.data(), NULL, NULL, FALSE, DEBUG_PROCESS, NULL, NULL, &amp;si, &amp;pi);\n    DEBUG_EVENT debugEvent = { 0 };\n    bool continueDebugging = true;\n    while (continueDebugging) \n    {\n        if (WaitForDebugEvent(&amp;debugEvent, INFINITE))\n        {\n            std::cout &lt;&lt; \"Event \" &lt;&lt; debugEvent.dwDebugEventCode &lt;&lt; std::endl;\n            if (debugEvent.dwDebugEventCode == EXIT_PROCESS_DEBUG_EVENT)\n            {\n                continueDebugging = false;\n            }\n\n            // I real life, this is more complicated... For a minimum test, this will do\n            auto continueStatus = DBG_CONTINUE;\n            ContinueDebugEvent(debugEvent.dwProcessId, debugEvent.dwThreadId, continueStatus);\n\n        }\n    }\n    std::cout &lt;&lt; \"Done.\" &lt;&lt; std::endl;\n\n    std::string s;\n    std::getline(std::cin, s);\n\n    return 0;\n}\n</code></pre>\n\n<p>Second executable, a small application that does something stupid which consumes time. Let's call this one <em>App</em>:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n__declspec(noinline) void CopyVector(uint64_t value, std::vector&lt;uint8_t&gt; data)\n{\n    // irrelevant.\n    data.resize(10);\n    *reinterpret_cast&lt;uint64_t*&gt;(data.data()) = value;\n}\n\nint main(int argc, const char** argv)\n{\n    for (int i = 0; i &lt; 10; ++i) \n    {\n        LARGE_INTEGER StartingTime, EndingTime, ElapsedMicroseconds;\n        LARGE_INTEGER Frequency;\n\n        QueryPerformanceFrequency(&amp;Frequency);\n        QueryPerformanceCounter(&amp;StartingTime);\n\n        // Activity to be timed\n        std::vector&lt;uint8_t&gt; tmp;\n        tmp.reserve(10'000'000 * 8);\n\n        // The activity (*)\n        uint64_t v = argc;\n        for (size_t j = 0; j &lt; 10'000'000; ++j)\n        {\n            v = v * 78239742 + 1278321;\n\n            CopyVector(v, tmp);\n        }\n\n        QueryPerformanceCounter(&amp;EndingTime);\n        ElapsedMicroseconds.QuadPart = EndingTime.QuadPart - StartingTime.QuadPart;\n\n        // We now have the elapsed number of ticks, along with the\n        // number of ticks-per-second. We use these values\n        // to convert to the number of elapsed microseconds.\n        // To guard against loss-of-precision, we convert\n        // to microseconds *before* dividing by ticks-per-second.\n\n        ElapsedMicroseconds.QuadPart *= 1000000;\n        ElapsedMicroseconds.QuadPart /= Frequency.QuadPart;\n\n        std::cout &lt;&lt; \"Elapsed: \" &lt;&lt; ElapsedMicroseconds.QuadPart &lt;&lt; \" microsecs\" &lt;&lt; std::endl;\n    }\n\n    std::string s;\n    std::getline(std::cin, s);\n}\n</code></pre>\n\n<p>Notice how the <em>debugger</em> application doesn't really do anything. It just sits there, waiting till the <em>app</em> is done. I'm using the latest version of VS2019.</p>\n\n<p>There are now four scenario's that I have tested. For each scenario, I've timed the time it takes for a single iteration (of variable <code>i</code>). What I would have expected is that running the <em>App</em> (1) and running the <em>Debugger</em> (4) would be about the same speed (because the <em>Debugger</em> isn't really doing anything). However, the reality is very different:</p>\n\n<ol>\n<li>Run <em>App</em> (Windows explorer / Ctrl-F5). This will take approx 1 second per iteration on my pc.</li>\n<li>Run <em>App</em> in the Visual Studio debugger (F5). Again, approx 1 second per iteration. What I would expect.</li>\n<li>Run <em>Debugger</em> in the Visual Studio debugger (F5). Again, approx 1 second per iteration. Again, what I would expect.</li>\n<li>Run <em>Debugger</em> (simply from Windows Explorer or ctrl-F5). This time, we have to wait approx. 4 seconds (!) per iteration. Not what I would expect!</li>\n</ol>\n\n<p>I've narrowed down the issue to the <code>vector&lt;uint8_t&gt; data</code> argument, which is passed by value (calling the copy c'tor). </p>\n\n<p>I would very much like to know what is going on here... Why is running <em>debugger</em> 4 times slower, while it's not doing anything?</p>\n\n<p>-- update --</p>\n\n<p>I have added some stack tracing and profiling capabilities to my little debugger program using a proprietary library... to compare cases (3) and (4) with each other. I've basically counted how often a pointer in my stack trace occurs.</p>\n\n<p>These methods can be found prominently in the results of case (4), but are insignificant in case (3). The number at the start is a simple counter:</p>\n\n<pre><code>352       - inside memset (address: 0x7ffa727349d5)\n284       - inside RtlpNtMakeTemporaryKey (address: 0x7ffa727848b2)\n283       - inside RtlAllocateHeap (address: 0x7ffa726bbaba)\n261       - inside memset (address: 0x7ffa727356af)\n180       - inside RtlFreeHeap (address: 0x7ffa726bfc10)\n167       - inside RtlpNtMakeTemporaryKey (address: 0x7ffa72785408)\n161       - inside RtlGetCurrentServiceSessionId (address: 0x7ffa726c080f)\n</code></pre>\n\n<p>Especially RtlpNtMakeTemporaryKey seems to turn up a lot. Unfortunately I have no clue what this means, and Google doesn't seem to be helping...</p>\n"}, {"tags": ["c++", "chaiscript"], "answers": [{"tags": [], "owner": {"reputation": 77, "user_id": 10812840, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lNcZadZq6Ys/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iPU6OOHMY1b5ddQmPHjEWkGTPPhA/mo/photo.jpg?sz=128", "display_name": "Rick", "link": "https://stackoverflow.com/users/10812840/rick"}, "is_accepted": false, "score": 1, "last_activity_date": 1570647755, "creation_date": 1570647755, "answer_id": 58310630, "question_id": 58310058, "link": "https://stackoverflow.com/questions/58310058/passing-a-c-object-to-a-chaiscript-function/58310630#58310630", "title": "Passing a C++ Object to a ChaiScript Function", "body": "<p>After a bit more searching, I found out how to do this!</p>\n\n<p>I've changed ChaiScript.cpp to the following:</p>\n\n<pre><code>#include \"ChaiScript.h\"\n#include \"SampleClass.h\"\n\nChaiScript::ChaiScript(\n   const std::string&amp; script_name)\n{\n   chai.add(chaiscript::vector_conversion&lt;std::vector&lt;int&gt;&gt;());\n\n   chaiscript::ModulePtr m = chaiscript::ModulePtr(new chaiscript::Module());\n\n   chaiscript::utility::add_class&lt;SampleClass&gt;(*m,\n      \"SampleClass\",\n      { \n         chaiscript::constructor&lt;SampleClass(const int id, const int x, const int y, const std::string &amp; name)&gt;() \n      },\n      { \n         {chaiscript::fun(&amp;SampleClass::m_x), \"X\"} \n      });\n\n   chai.add(m);\n\n   chai.eval_file(script_name);\n}\n\nChaiScript::~ChaiScript()\n{\n\n}\n</code></pre>\n\n<p>My SampleScript.chai also changed to:</p>\n\n<pre><code>def ReceiveSampleClass(SampleClass sample)\n{\n    var result = sample.X;\n    sample.X += 2;\n    var result2 = sample.X;\n    print(\"1) \" + to_string(result));\n    print(\"2) \" + to_string(result2));\n}\n</code></pre>\n\n<p>The process I was missing was adding the class to a module and adding that to chai script.</p>\n\n<pre><code>   chaiscript::ModulePtr m = chaiscript::ModulePtr(new chaiscript::Module());\n\n   chaiscript::utility::add_class&lt;SampleClass&gt;(*m,\n      \"SampleClass\",\n      { \n         chaiscript::constructor&lt;SampleClass(const int id, const int x, const int y, const std::string &amp; name)&gt;() \n      },\n      { \n         {chaiscript::fun(&amp;SampleClass::m_x), \"X\"} \n      });\n\n   chai.add(m);\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 10812840, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lNcZadZq6Ys/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iPU6OOHMY1b5ddQmPHjEWkGTPPhA/mo/photo.jpg?sz=128", "display_name": "Rick", "link": "https://stackoverflow.com/users/10812840/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570647755, "creation_date": 1570645111, "question_id": 58310058, "link": "https://stackoverflow.com/questions/58310058/passing-a-c-object-to-a-chaiscript-function", "title": "Passing a C++ Object to a ChaiScript Function", "body": "<p>I am trying to pass a custom c++ object reference to a simple chai script so that the chai script can eventually read/access/call public variables &amp; methods.</p>\n\n<p>I'm not certain if this is even possible, nor if once it is passed inside of the chai script function if it will have access to the classes values without having the class previously defined within chai... Any insight would be very helpful, as I can't find a specific section in the documentation relating to this.</p>\n\n<p>Here is a very basic implementation.</p>\n\n<p><strong>ChaiScript.h</strong></p>\n\n<pre><code>#pragma once\n\n#include \"ChaiScript\\include\\chaiscript\\chaiscript.hpp\"\n\nclass ChaiScript\n{\npublic:\n   explicit ChaiScript(\n      const std::string&amp; script_name);\n\n   ~ChaiScript();\n\n   chaiscript::ChaiScript chai;\n\nprivate:\n};\n</code></pre>\n\n<p><strong>ChaiScript.cpp</strong></p>\n\n<pre><code>#include \"ChaiScript.h\"\n\nChaiScript::ChaiScript(\n   const std::string&amp; script_name)\n{\n   chai.add(chaiscript::vector_conversion&lt;std::vector&lt;int&gt;&gt;());\n\n   chai.eval_file(script_name);\n}\n\nChaiScript::~ChaiScript()\n{\n\n}\n</code></pre>\n\n<p><strong>SampleClass.h</strong></p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n\nclass SampleClass\n{\npublic:\n   SampleClass(\n      const int id,\n      const int x,\n      const int y,\n      const std::string&amp; name);\n\n   const int m_id;\n   int m_x;\n   int m_y;\n   std::string m_name;\n\nprivate:\n\n   // Disable copying as we don't want to make a copy each time we pass the class to chai...\n   SampleClass();\n   SampleClass(const SampleClass&amp; rhs);\n   SampleClass&amp; operator=(const SampleClass&amp; rhs);\n};\n</code></pre>\n\n<p><strong>SampleClass.cpp</strong></p>\n\n<pre><code>#include \"SampleClass.h\"\n\nSampleClass::SampleClass(\n   const int id,\n   const int x,\n   const int y,\n   const std::string&amp; name) : \n   m_id(id),\n   m_x(x),\n   m_y(y),\n   m_name(name)\n{\n\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"ChaiScript.h\"\n#include \"SampleClass.h\"\n\nint main()\n{\n   SampleClass* sample_class = new SampleClass(0, 1, 2, \"Test\");\n   ChaiScript* script = new ChaiScript(\"Scripts\\\\SampleScript.chai\");\n\n   // This line is where I start to need help as it does not compile.\n   script-&gt;chai.eval&lt;std::function&lt;void(&amp;SampleClass)&gt;&gt;(\"ReceiveSampleClass\")(&amp;sample_class);\n\n   system(\"pause\");\n   return 0;\n}\n</code></pre>\n\n<p><strong>SampleScript.chai</strong></p>\n\n<pre><code>def ReceiveSampleClass(SampleClass sample)\n{\n    var result = sample.m_x + sample.m_y;\n    print(\"2+2=\" + to_string(result));\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1570646375, "post_id": 58310030, "comment_id": 102982180, "body": "And what does your code look like for your current attempt? What <i>exactly</i> are you having problems with? What does the input look like (<i>exactly</i>)? Without code and a specific problem description, you can <i>not</i> expect anyone to give you a solution to your problem. The question &quot;as given&quot; is severely lacking in relevant details (and <i>I&#39;d say</i> is unanswerable)."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1570647346, "post_id": 58310030, "comment_id": 102982550, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1120140/how-can-i-read-and-parse-csv-files-in-c\">How can I read and parse CSV files in C++?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1570649679, "last_edit_date": 1570649679, "creation_date": 1570648485, "answer_id": 58310823, "question_id": 58310030, "link": "https://stackoverflow.com/questions/58310030/reading-in-a-comma-delimited-txt-file-and-putting-into-array/58310823#58310823", "title": "Reading in a comma delimited .txt file and putting into array", "body": "<p>Looks like your input data is one <em>record</em> per line (row).<br>\nSo, let's model the row:  </p>\n\n<pre><code>struct Record  \n{\n    std::string name;\n    std::string breed;\n    int         age;\n    int         id;\n    friend std::istream&amp; operator&gt;&gt;(std::istream&amp; input, Record&amp; r);\n};\n\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; input, Record&amp; r)\n{\n    // read the fields into a string.\n    std::string text_line;\n    std::getline(input, text_line);\n    char comma;\n    std::istringstream input_stream(text_line);\n    // Read the name until a comma.\n    std::getline(input_stream, r.name, ',');\n    // Read the bread until a comma.\n    std::getline(input_stream, r.breed, ',');\n    input_stream &gt;&gt; r.age;\n    input_stream &gt;&gt; comma;\n    input_stream &gt;&gt; r.id;\n    return input_stream;\n}\n</code></pre>\n\n<p>You input code would look something like this:  </p>\n\n<pre><code>std::vector&lt;Record&gt; database;\nRecord r;\nwhile (dog_file &gt;&gt; r)\n{\n  database.push_back(r);\n}\n</code></pre>\n\n<p><strong>Edit 1: Accessing database records</strong><br>\nTo find the breed of the second dog:  </p>\n\n<pre><code>  std::cout &lt;&lt; database[1].breed &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Remember that indices are zero based.  So the 2nd element is at index 1.</p>\n\n<p><strong>Edit 2: Accessing fields by number</strong><br>\nThe issue with accessing fields by number is that the fields are different types.  However, this can be resolve by return a string for all the contents because all types can be converted to a string:  </p>\n\n<pre><code>struct Record  \n{\n    std::string name;\n    std::string breed;\n    int         age;\n    int         id;\n    std::string operator[](int field_index);\n    std::string operator[](const std::string&amp; field_name);\n};\nstd::string Record::operator[](int field_index)\n{\n    std::string value;\n    std::ostringstream value_stream;\n    switch (field_index)\n    {\n        case 0:  value = name; break;\n        case 1:  value = breed; break;\n        case 2:  \n            value_stream &lt;&lt; age;\n            value = value_stream.str();\n            break;\n        case 3:  \n            value_stream &lt;&lt; age;\n            value = value_stream.str();\n            break;          \n    }\n    return value;\n}\n\nstd::string Record::operator[](const std::string&amp; field_name)\n{\n    std::string value;\n    std::ostringstream value_stream;\n    if (field_name == \"name\") value = name;\n    else if (field_name == \"breed\") value = breed;\n    else if (field_name == \"age\")\n    {\n        value_stream &lt;&lt; age;\n        value = value_stream.str();\n    }\n    else if (field_name == \"id\")\n    {\n        value_stream &lt;&lt; id;\n        value = value_stream.str();\n    }\n    return value;\n}\n</code></pre>\n\n<p>IMHO, the preference should be to refer to a struct's members by member name not treated as an array.  One issue with treating the <code>struct</code> as an array is that the fields have different types.  C++ variables like to be only one type, functions can only return one type.  You can add complexity by using a <code>union</code> which will have a type ID field or maybe a <code>tuple</code>.  The simplest method is to access by member using the <code>'.'</code> notation.</p>\n"}], "owner": {"reputation": 1, "user_id": 11150634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b1d120a8fd0557379195a1c397ed33c?s=128&d=identicon&r=PG&f=1", "display_name": "MataSpivey", "link": "https://stackoverflow.com/users/11150634/mataspivey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1570649679, "creation_date": 1570644987, "last_edit_date": 1570648245, "question_id": 58310030, "link": "https://stackoverflow.com/questions/58310030/reading-in-a-comma-delimited-txt-file-and-putting-into-array", "title": "Reading in a comma delimited .txt file and putting into array", "body": "<p>Say have a file named, \"dogs.txt\", and it has like the name, breed, its age, and id num. So i wanted to read each element into my c++ program so they're accessible by like dog[0,2] will give me the 2nd element (breed) of the 0th dog.</p>\n\n<p>example:  </p>\n\n<pre><code>max, beagle, 12, 1  \nsam, pit bull, 2, 2  \n</code></pre>\n\n<p>how would i code that into my program and then have it store into an array?</p>\n\n<p>i can only use <code>&lt;iostream&gt;, &lt;fstream&gt;, &lt;iomanip&gt;, &lt;vector&gt;, &lt;cmath&gt;, &lt;ctime&gt;, &lt;cstdlib&gt;,</code> and <code>&lt;string&gt;</code>.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570644803, "post_id": 58309780, "comment_id": 102981451, "body": "I have no idea how you came up with the answer of &quot;GAC&quot; as a common substring in the first string.  &quot;GAC&quot; appears in the second string, but not the first."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1570645209, "post_id": 58309780, "comment_id": 102981646, "body": "@PaulMcKenzie Based on OP&#39;s &quot;longer substring&quot; example, I think that the substring does not need to be contiguous."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 1, "creation_date": 1570647219, "post_id": 58309780, "comment_id": 102982493, "body": "This is asking for the <a href=\"https://en.wikipedia.org/wiki/Longest_common_subsequence_problem\" rel=\"nofollow noreferrer\">Longest Common Subsequence</a>, a different problem than the title suggests."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570654002, "post_id": 58309780, "comment_id": 102985216, "body": "And since this problem is well-documented, discussed, etc. an Internet search is all that&#39;s required to give a wealth of information.  As you can see, your code is just not going to do the job -- to solve it takes much more sophistication, again, discussed on many sites."}, {"owner": {"reputation": 11, "user_id": 11885899, "user_type": "registered", "profile_image": "https://graph.facebook.com/2398241493574624/picture?type=large", "display_name": "Wojtek Szoda", "link": "https://stackoverflow.com/users/11885899/wojtek-szoda"}, "edited": false, "score": 0, "creation_date": 1570683698, "post_id": 58309780, "comment_id": 102991746, "body": "Yea i mean Subsequence. In polish dictionary &quot;Substring&quot; and &quot;Subsequence&quot; means this same. Sorry"}], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 8844604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVplw.jpg?s=128&g=1", "display_name": "Mauricio Ruiz", "link": "https://stackoverflow.com/users/8844604/mauricio-ruiz"}, "is_accepted": false, "score": -1, "last_activity_date": 1570645948, "creation_date": 1570645948, "answer_id": 58310231, "question_id": 58309780, "link": "https://stackoverflow.com/questions/58309780/find-longest-common-substring/58310231#58310231", "title": "Find Longest common Substring", "body": "<p>You can improve your code with some basic ideas. I understand you want <strong>one</strong> of the longest strings, not all, then you can store the length of the longest string until each moment in the program, and use this length for search string at least of length+1. But the bes solution is use dynamic porgramming, you can read this solution here: <a href=\"https://www.geeksforgeeks.org/longest-common-substring-dp-29/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/longest-common-substring-dp-29/</a></p>\n"}], "owner": {"reputation": 11, "user_id": 11885899, "user_type": "registered", "profile_image": "https://graph.facebook.com/2398241493574624/picture?type=large", "display_name": "Wojtek Szoda", "link": "https://stackoverflow.com/users/11885899/wojtek-szoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570675439, "creation_date": 1570643939, "last_edit_date": 1570645078, "question_id": 58309780, "link": "https://stackoverflow.com/questions/58309780/find-longest-common-substring", "title": "Find Longest common Substring", "body": "<p>I need to find longest common substring from two DNA strings.\nI have first string \"CGATAC\", and second: \"GACAGTC\"\nWith my code my result is: \"GAC\", but you can get longer substring, i mean \"GATC\". What i need to change to get longer substring ?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int k = 0;\nfor (int i = 0; i &lt; substring1.length(); i++) {\n    char znak = substring1[i];\n    for (int j = k; j &lt; substring2.length(); j++) {\n        char znak2 = substring2[j];\n        if (znak == znak2) {\n            end_substring += znak;\n            k = j;\n            break;\n        }\n    }\n}\ncout &lt;&lt; end_substring;\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1570643835, "post_id": 58309732, "comment_id": 102980968, "body": "Note: <code>int a[n];</code> is invalid in standard C++."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1570648504, "post_id": 58309732, "comment_id": 102983049, "body": "Please upgrade to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "owner": {"reputation": 1, "user_id": 11079624, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--xnDiYrbOFI/AAAAAAAAAAI/AAAAAAAAAW0/6WRYw2OWpp4/photo.jpg?sz=128", "display_name": "rad10wave", "link": "https://stackoverflow.com/users/11079624/rad10wave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570643772, "creation_date": 1570643772, "question_id": 58309732, "link": "https://stackoverflow.com/questions/58309732/showing-wrong-answer-while-submission-but-test-cases-are-passed", "title": "Showing wrong answer while submission but test cases are passed", "body": "<p>Im trying to solve the problem <a href=\"https://www.codechef.com/OCT19B/problems/S10E/\" rel=\"nofollow noreferrer\">https://www.codechef.com/OCT19B/problems/S10E/</a>\nChef wants to buy a new phone, but he is not willing to spend a lot of money. Instead, he checks the price of his chosen model everyday and waits for the price to drop to an acceptable value. So far, he has observed the price for N days (numbere 1 through N); for each valid i, the price on the i-th day was Pi</p>\n\n<p>dollars.</p>\n\n<p>On each day, Chef considers the price of the phone to be good if it is strictly smaller than all the prices he has observed during the previous five days. If there is no record of the price on some of the previous five days (because Chef has not started checking the price on that day yet), then Chef simply ignores that previous day \u2015 we could say that he considers the price on that day to be infinite.</p>\n\n<p>Now, Chef is wondering \u2015 on how many days has he considered the price to be good? Find the number of these days.\nthe code is:</p>\n\n<pre><code>int l;\ncin&gt;&gt;l;\nwhile(l--){\n    int n,sum=1,sx=0;\n    cin&gt;&gt;n;\n    int a[n];\n    for(int i=0;i&lt;n;i++)\n    cin&gt;&gt;a[i];\n    for(int i=1;i&lt;4;i++){\n        sx=0;\n        for(int j=0;j&lt;i;j++)\n        if(a[j]&gt;=a[i])\n        sx++;\n        if(sx==i)\n        sum++;\n    }\n   for(int i=0;i&lt;n;i++){\n       int k=i,s=0;\n\n       for(int j=i;j&lt;k+5&amp;&amp;k+5&lt;n;j++){\n           if(a[j]&gt;=a[k+5]){\n               s++;\n\n           }\n\n       }\n       if(s==5){\n           sum++;\n       }\n       s=0;\n   }\n   cout&lt;&lt;sum&lt;&lt;endl;\n}\n\nreturn 0;}\n</code></pre>\n\n<p>I am getting output for the given test case in codechef, but its showing wrong answer while submission</p>\n"}, {"tags": ["c++", "constants"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1570643732, "post_id": 58309690, "comment_id": 102980926, "body": "You can&#39;t.  Period.  If you violate that (and C++ lets you) you have undefined behavior and no longer have correct code, not matter what result you get."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1570643735, "post_id": 58309690, "comment_id": 102980928, "body": "To edit the value, simply change its initial value. You cannot change it afterward"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1570643858, "post_id": 58309690, "comment_id": 102980977, "body": "If you are &quot;required&quot; to edit a <code>const</code> variable, then you need to stop and think about the design of your code. As others have said, you <i>can</i> edit the value but the <code>const</code> declaration is a red flag that you <i>shouldn&#39;t</i>. Especially if this <code>const</code> variable is from third-party code that you have not compiled."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1570645690, "post_id": 58309690, "comment_id": 102981866, "body": "I recommend that you check that you have not misunderstood the assignment."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1570652616, "post_id": 58309690, "comment_id": 102984648, "body": "A const member variable is a curious animal because different object instances can have differing values as it can be initialized upon construction. It&#39;s UB because compilers an assume ongoing constness for any given object.  This is a risk since any change by casting for an instance can be ignored by the compiler. To mitigate the risk one can declare the member variable <code>volatile const</code> which overrides optimization.  But it&#39;s a hack even though it will almost certainly work."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1570652872, "post_id": 58309690, "comment_id": 102984755, "body": "One could always just replace an object with a copy except the new object is constructed with the desired const member. Another hack, but completely legal. Perhaps the instructor is trying to see how clever the student is?"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1570660956, "post_id": 58309690, "comment_id": 102987264, "body": "I&#39;m curious how one could store a VIN in an <code>int</code> since VINs contain alphabetic characters."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1570645171, "post_id": 58309764, "comment_id": 102981626, "body": "<code>int&amp; ref = const_cast&lt;int&amp;&gt;(m_vin); ref = &lt;new value&gt;;</code> - Ouch. Please don&#39;t ever <i>actually</i> do that... (meant as a comment to OP)."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1570644184, "last_edit_date": 1570644184, "creation_date": 1570643868, "answer_id": 58309764, "question_id": 58309690, "link": "https://stackoverflow.com/questions/58309690/easiest-way-to-modify-a-const-variables-value/58309764#58309764", "title": "Easiest way to modify a const variable&#39;s value", "body": "<p><strong>Word of caution:</strong> Modifying the value of such an object, no matter the technique used to do it, is cause for undefined behavior.</p>\n\n<p>You could use:</p>\n\n<pre><code>int&amp; ref = const_cast&lt;int&amp;&gt;(m_vin);\nref = &lt;new value&gt;;\n</code></pre>\n\n<p>Don't blame me if your computer blows up.</p>\n\n<hr>\n\n<p>It will be better to change the variable to be a non-<code>const</code> one.</p>\n\n<pre><code>int m_vin;\n</code></pre>\n\n<p>You should ask your professor/teaching assistant why is the <code>const</code> used there if the value of the variable is expected to be modified through out the code. That does not make sense.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1570644746, "creation_date": 1570644746, "answer_id": 58309969, "question_id": 58309690, "link": "https://stackoverflow.com/questions/58309690/easiest-way-to-modify-a-const-variables-value/58309969#58309969", "title": "Easiest way to modify a const variable&#39;s value", "body": "<p>\"For my CS class I have a variable const int m_vin, throughout my code I am required to edit this value.\" - Don't do that. You'll invoke Undefined Behaviour.</p>\n\n<p>Create a copy. Edit the copy. Save the copy back to \"wherever\".</p>\n\n<p>Don't try to modify <code>const</code> variables. Even though the language gives you tools to write code that will do it and that will compile, you will have code that has no well defined behaviour. Don't do that.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1570645036, "post_id": 58310011, "comment_id": 102981570, "body": "Literals are constant, but constant aren&#39;t all literals.  Also constants can be variables."}], "tags": [], "owner": {"reputation": 1, "user_id": 11535265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tG7sW.jpg?s=128&g=1", "display_name": "mohammedabdulai", "link": "https://stackoverflow.com/users/11535265/mohammedabdulai"}, "is_accepted": false, "score": 0, "last_activity_date": 1570644921, "creation_date": 1570644921, "answer_id": 58310011, "question_id": 58309690, "link": "https://stackoverflow.com/questions/58309690/easiest-way-to-modify-a-const-variables-value/58310011#58310011", "title": "Easiest way to modify a const variable&#39;s value", "body": "<p>Constants (also called literals) are fixed values once declared and initialized. unlike variables whose value can be altered, constants - as the name implies does not change, they remain constant. Constant must have to be initialized at the time of creating it, and new values cannot be assigned later to it.</p>\n\n<p>Consider using a variable if the value will ever change during the program execution.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1570645402, "post_id": 58310036, "comment_id": 102981735, "body": "<code>const_cast</code> is <i>only</i> valid if the object was originally declared &quot;non-const&quot;. Otherwise you invoke Undefined Behaviour."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1570645637, "post_id": 58310036, "comment_id": 102981831, "body": "And UB is about more than just putting you at the whim of the OS. You are at the whim of the compiler first, and that&#39;s <i>much</i> harder to reason about. Just don&#39;t do it. At all. Ever."}, {"owner": {"reputation": 4625, "user_id": 1964969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0879c1954a7ee8660f80eafdf9f66776?s=128&d=identicon&r=PG", "display_name": "Yury Schkatula", "link": "https://stackoverflow.com/users/1964969/yury-schkatula"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1570655174, "post_id": 58310036, "comment_id": 102985668, "body": "@JesperJuhl, totally agree this is mad-bad thing. Updated my answer to emphasize that."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1570690715, "post_id": 58310036, "comment_id": 102994169, "body": "The question involves a member const variable which will always be in ram since each object could be initialized with different values on construction. I suspect that the instructor was pushing the idea of making a constructor that initialized m_vin but hard to say from the question."}], "tags": [], "owner": {"reputation": 4625, "user_id": 1964969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0879c1954a7ee8660f80eafdf9f66776?s=128&d=identicon&r=PG", "display_name": "Yury Schkatula", "link": "https://stackoverflow.com/users/1964969/yury-schkatula"}, "is_accepted": false, "score": 0, "last_activity_date": 1570655046, "last_edit_date": 1570655046, "creation_date": 1570645017, "answer_id": 58310036, "question_id": 58309690, "link": "https://stackoverflow.com/questions/58309690/easiest-way-to-modify-a-const-variables-value/58310036#58310036", "title": "Easiest way to modify a const variable&#39;s value", "body": "<p><strong>Do not do this. Ever.</strong> As stated by R Sahu, you can try <code>const_cast</code> to remove const'ness. However, this is not the only guard to fight with. Sometimes (especially if this is a global-scope defined item), memory page that contains the const items could be marked as read-only by OS (I met such a thing on Win XP). So, your attempt to modify const_cast'ed item could end up with Access Violation or similar. </p>\n\n<p>Again: do NOT do this.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1570645079, "creation_date": 1570645079, "answer_id": 58310051, "question_id": 58309690, "link": "https://stackoverflow.com/questions/58309690/easiest-way-to-modify-a-const-variables-value/58310051#58310051", "title": "Easiest way to modify a const variable&#39;s value", "body": "<p>You don't.</p>\n\n<p>That's the whole point.</p>\n"}, {"tags": [], "owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "is_accepted": false, "score": 0, "last_activity_date": 1571023089, "last_edit_date": 1571023089, "creation_date": 1570659929, "answer_id": 58313067, "question_id": 58309690, "link": "https://stackoverflow.com/questions/58309690/easiest-way-to-modify-a-const-variables-value/58313067#58313067", "title": "Easiest way to modify a const variable&#39;s value", "body": "<blockquote>\n  <blockquote>\n    <p>For my CS class I have a variable <code>const int m_vin</code>, throughout my code I am required to edit this value. I was under the impression that const variables cannot be edited. How would I go about this?</p>\n  </blockquote>\n</blockquote>\n\n<p>As others have pointed out, you can't, at least not directly. And it's not good programming to even try.</p>\n\n<blockquote>\n  <blockquote>\n    <p>Here are the directions for m_vin which is a member variable of an Object named Vehicle: m_vin, a const int which represent a unique VIN\u2013Vehicle Identification Number (no two vehicles can ever exist with the same m_vin).</p>\n  </blockquote>\n</blockquote>\n\n<p>Most likely your instructor is asking you to construct different objects with differing <code>const int m_vin</code>. If you do that you don't need to edit them after construction since each object is initialized with a different vin.</p>\n\n<blockquote>\n  <blockquote>\n    <p>In my program I am required to edit m_vin;</p>\n  </blockquote>\n</blockquote>\n\n<p>However, assuming this is sort of a programming challenge, you can change a const member variable by instantiating a new object initialized with the different value. This is best done in a friend function so you can access private variables.</p>\n\n<p>One way to accomplish this is using placement new together with a constructor that has all values needed to initialize the object. First save copies of all the values in the object locally. Use <code>std::move</code> for dynamic values. Next, call the destructor on the object. Then use placement new with the argument list needed to reconstruct the object with the new const value.</p>\n\n<p>The following code replaces m_vin with a different value.</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;string&gt;\n\n\nstruct Foo {\n    const int m_vin;\n    std::string stuff;\n    Foo(int m_vin_, std::string stuff_) : m_vin{ m_vin_ }, stuff{ stuff_ } {}\n    ~Foo() {}\n};\n\nint main()\n{\n    Foo foo1(1, \"SomeString\");\n    int ci = 42  // modify ci\n    std::string stuff = foo1.stuff;\n    foo1.~Foo();                // in case there is any dynamic objects in Foo\n    new(&amp;foo1) Foo(ci, stuff);\n    std::string x = foo1.stuff;\n}\n</code></pre>\n\n<p>But be warned. You should also use <code>std::launder</code> to guarantee the const member will be correctly read. This sort of hack, while legal (I think), harms the readability of the code. People reading the code will, reasonably, assume that const member variables will not change after they are constructed. So don't do it other than to pacify an instructor with a weird request.</p>\n"}], "owner": {"reputation": 15, "user_id": 12022312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b879edb41536a81ebe8d8d0a9b2a6dfa?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelConnors1017", "link": "https://stackoverflow.com/users/12022312/michaelconnors1017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 6, "score": 0, "last_activity_date": 1571023089, "creation_date": 1570643606, "last_edit_date": 1570649127, "question_id": 58309690, "link": "https://stackoverflow.com/questions/58309690/easiest-way-to-modify-a-const-variables-value", "title": "Easiest way to modify a const variable&#39;s value", "body": "<p>For my CS class I have a variable <code>const int m_vin</code>, throughout my code I am required to edit this value. I was under the impression that <code>const</code> variables cannot be edited. How would I go about this?</p>\n\n<p>Edit:\nHere are the directions for <code>m_vin</code> which is a member variable of an Object named Vehicle:\nm_vin, a const int which represent a unique VIN\u2013Vehicle Identification Number (no two vehicles can ever exist with the same m_vin).</p>\n\n<p>In my program I am required to edit <code>m_vin</code>;</p>\n"}, {"tags": ["c++", "loops"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1570643473, "post_id": 58309630, "comment_id": 102980813, "body": "<code>for</code> is a keyword.  keywords means special things in the language."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1570643496, "post_id": 58309630, "comment_id": 102980831, "body": "its a keyword and part of the language, <code>cout</code> is a library function defined in the standard library and not part of the core language"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1570643599, "post_id": 58309630, "comment_id": 102980868, "body": "It&#39;s defined <a href=\"https://timsong-cpp.github.io/cppwp/stmt.for\" rel=\"nofollow noreferrer\">here</a>. In the standard like every keyword like <code>if</code>, <code>int</code> and <code>return</code>."}, {"owner": {"reputation": 23, "user_id": 7485404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eQQ4H.jpg?s=128&g=1", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/7485404/siddharth"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570644245, "post_id": 58309630, "comment_id": 102981158, "body": "@NathanOliver  I understand that for is a keyword but leads me to another question Where is the keyword defined in the language, at compiler level ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1570644332, "post_id": 58309630, "comment_id": 102981195, "body": "It is defined in <a href=\"https://timsong-cpp.github.io/cppwp/\" rel=\"nofollow noreferrer\">the standard</a>.  The standard tells the compiler how it should behave and the the compiler, once it sees the keyword, stamps out the machine code needed to do the work."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 0, "last_activity_date": 1570645583, "last_edit_date": 1570645583, "creation_date": 1570644524, "answer_id": 58309912, "question_id": 58309630, "link": "https://stackoverflow.com/questions/58309630/where-is-for-of-the-for-loop-is-defined-like-cout-is-object-of-iostream-is-f/58309912#58309912", "title": "Where is &#39;for&#39; of the for loop is defined? Like cout is object of iostream is &#39;for&#39; or &#39;while&#39; also an object?", "body": "<blockquote>\n  <p>Where is 'for' of the for loop is defined?</p>\n</blockquote>\n\n<p>The meaning of a <code>for</code> statement is defined in the standard document that describes the language. In the sections [stmt.iter] and [stmt.for] in particular.</p>\n\n<blockquote>\n  <p>how does the compiler understand and decide the course of action after it encounters the for keyword.</p>\n</blockquote>\n\n<p>A compiler does not \"understand\". A compiler is a computer program. It is a sequence of instructions for a computer. The processor executes the instructions depending on input given to it.</p>\n\n<p>The programmers who implement the compiler make sure that the compiler produces a program that behaves as the language specifies.</p>\n\n<p>If you want to know more in depth, then you are essentially asking, how compilers are written. That is outside the scope of my answer. You'll find that books have been written about the subject.</p>\n"}], "owner": {"reputation": 23, "user_id": 7485404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eQQ4H.jpg?s=128&g=1", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/7485404/siddharth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 58309912, "answer_count": 1, "score": 0, "last_activity_date": 1570645583, "creation_date": 1570643356, "question_id": 58309630, "link": "https://stackoverflow.com/questions/58309630/where-is-for-of-the-for-loop-is-defined-like-cout-is-object-of-iostream-is-f", "title": "Where is &#39;for&#39; of the for loop is defined? Like cout is object of iostream is &#39;for&#39; or &#39;while&#39; also an object?", "body": "<p>as all the syntax terms must be defined in the program where is for defined.</p>\n\n<p>ex: \nfor  (i=0;i&lt;8;i++0)\n{  }</p>\n\n<p>how does the compiler understand and decide the course of action after it encounters the for keyword.</p>\n"}, {"tags": ["c++", "linux", "dladdr"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1570643440, "post_id": 58309551, "comment_id": 102980798, "body": "Hint: $ORIGIN also: rpath - Read your linker documentation."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1570643653, "post_id": 58309551, "comment_id": 102980895, "body": "I&#39;ve had issues with this as well.  There don&#39;t seem to be much in the way of &quot;one size fits all&quot; solutions: <a href=\"https://en.wikipedia.org/wiki/Rpath\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Rpath</a>"}], "answers": [{"tags": [], "owner": {"reputation": 647, "user_id": 9773285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95570197a5ef8f4a067a3669c09143?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A", "link": "https://stackoverflow.com/users/9773285/mark-a"}, "is_accepted": true, "score": 4, "last_activity_date": 1570647455, "creation_date": 1570647455, "answer_id": 58310558, "question_id": 58309551, "link": "https://stackoverflow.com/questions/58309551/on-linux-in-a-c-program-how-do-i-find-the-path-to-the-shared-library-that-wa/58310558#58310558", "title": "On Linux, in a C++ program, how do I find the path to the shared library that was loaded?", "body": "<p>You can look at <code>/proc/&lt;pid&gt;/maps</code> (or <code>/proc/self/maps</code> to look at the mappings of the current process). This will show all files that are mmaped into the process address space, which will include shared libraries.</p>\n\n<pre><code># cat /proc/self/maps\n55af8c635000-55af8c63d000 r-xp 00000000 08:01 4456473                    /bin/cat\n55af8c83c000-55af8c83d000 r--p 00007000 08:01 4456473                    /bin/cat\n55af8c83d000-55af8c83e000 rw-p 00008000 08:01 4456473                    /bin/cat\n55af8cb0f000-55af8cb30000 rw-p 00000000 00:00 0                          [heap]\n7f90267d6000-7f9027219000 r--p 00000000 08:01 6429169                    /usr/lib/locale/locale-archive\n7f9027219000-7f9027400000 r-xp 00000000 08:01 267123                     /lib/x86_64-linux-gnu/libc-2.27.so\n7f9027400000-7f9027600000 ---p 001e7000 08:01 267123                     /lib/x86_64-linux-gnu/libc-2.27.so\n7f9027600000-7f9027604000 r--p 001e7000 08:01 267123                     /lib/x86_64-linux-gnu/libc-2.27.so\n7f9027604000-7f9027606000 rw-p 001eb000 08:01 267123                     /lib/x86_64-linux-gnu/libc-2.27.so\n7f9027606000-7f902760a000 rw-p 00000000 00:00 0 \n7f902760a000-7f9027631000 r-xp 00000000 08:01 267095                     /lib/x86_64-linux-gnu/ld-2.27.so\n7f90277f7000-7f902781b000 rw-p 00000000 00:00 0 \n7f9027831000-7f9027832000 r--p 00027000 08:01 267095                     /lib/x86_64-linux-gnu/ld-2.27.so\n7f9027832000-7f9027833000 rw-p 00028000 08:01 267095                     /lib/x86_64-linux-gnu/ld-2.27.so\n7f9027833000-7f9027834000 rw-p 00000000 00:00 0 \n7ffd03876000-7ffd03897000 rw-p 00000000 00:00 0                          [stack]\n7ffd0399d000-7ffd039a0000 r--p 00000000 00:00 0                          [vvar]\n7ffd039a0000-7ffd039a2000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n\n</code></pre>\n"}], "owner": {"reputation": 458, "user_id": 1462309, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/507988a7c221071a7b343484f7b7e668?s=128&d=identicon&r=PG", "display_name": "user1462309", "link": "https://stackoverflow.com/users/1462309/user1462309"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58310558, "answer_count": 1, "score": 3, "last_activity_date": 1570647455, "creation_date": 1570642991, "question_id": 58309551, "link": "https://stackoverflow.com/questions/58309551/on-linux-in-a-c-program-how-do-i-find-the-path-to-the-shared-library-that-wa", "title": "On Linux, in a C++ program, how do I find the path to the shared library that was loaded?", "body": "<p>I need to load functions from a custom library on an embedded platform that does not have a lot of the usual tools (e.g. no ldd, no gdb, etc). I'm cross compiling to that platform.</p>\n\n<p>Suppose I want to use the function <code>foo</code> from <code>libx.so</code>. Now the platform has <code>libx.so</code> included in the system libs directory, but I want my program to pick it up from another location. I've set the LD_LIBRARY_PATH accordingly, but I strongly suspect my program is still picking up the system one.</p>\n\n<p>I tried the following:</p>\n\n<pre><code>    Dl_info dl_info;\n    dladdr((void*)foo, &amp;dl_info);\n    fprintf(stdout, \"module %s loaded\\n\", dl_info.dli_fname);\n</code></pre>\n\n<p>But this returns <code>a.out</code>, which is not helpful. </p>\n\n<p>I also tried:</p>\n\n<pre><code>    Dl_info dl_info;\n    link_map* lm;\n    int code = dladdr1((void*)foo, &amp;dl_info, (void**)(&amp;lm), RTLD_DL_LINKMAP);\n    if (code == 0)\n    {\n        std::cout &lt;&lt; \"Failed\" &lt;&lt; std::endl;\n        return 0;\n    }\n    fprintf(stdout, \"module %s loaded\\n\", lm-&gt;l_name);\n</code></pre>\n\n<p>And I get an empty string. Note, the return code was <em>not</em> 0.</p>\n\n<p>Any other methods I can try?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "directory", "filesystems", "std", "options"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1570642851, "post_id": 58309449, "comment_id": 102980524, "body": "See constructor (4): <a href=\"https://en.cppreference.com/w/cpp/filesystem/recursive_directory_iterator/recursive_directory_iterator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/filesystem/&hellip;</a>   and bitwise OR the mask elements you require."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1570657598, "post_id": 58309449, "comment_id": 102986447, "body": "Why mix <code>recursive_directory_iterator</code> and an inner iterator? It seems likey that you&#39;ll iterate over the same element twice some of the times."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 7478155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c18e7fc944fd1396ebeb66fe42d8982?s=128&d=identicon&r=PG&f=1", "display_name": "stormForce", "link": "https://stackoverflow.com/users/7478155/stormforce"}, "is_accepted": false, "score": 0, "last_activity_date": 1570644363, "creation_date": 1570644363, "answer_id": 58309873, "question_id": 58309449, "link": "https://stackoverflow.com/questions/58309449/c-how-to-use-stdfilesystemdirectory-options/58309873#58309873", "title": "C++ How to use std::filesystem::directory_options", "body": "<p>I have edited the code:</p>\n\n<pre><code>   for (auto&amp; dirent : std::filesystem::recursive_directory_iterator(start_path))\n{\n    if (dirent.is_directory())\n    {\n        // CRASH if permission denied; need std::filesystem::options\n        std::filesystem::path fsp = dirent.path();\n        for (auto&amp; subdirent : std::filesystem::directory_iterator(fsp))\n        {\n            if (!subdirent.is_directory()&amp;&amp; !is_symlink(subdirent) &amp;&amp; (fs::status(subdirent).permissions() ==  fs::perms::owner_all | fs::perms::group_all))\n            {\n                dir_stack.push_back(dirent.path());\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 737, "user_id": 8925535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XSiCR.jpg?s=128&g=1", "display_name": "droptop", "link": "https://stackoverflow.com/users/8925535/droptop"}, "edited": false, "score": 0, "creation_date": 1611910901, "post_id": 58315147, "comment_id": 116606945, "body": "Could you explain the use of the <code>|</code> operator ??"}], "tags": [], "owner": {"reputation": 21, "user_id": 4547970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce78c5033d8b99de7fb6e377c0eb4921?s=128&d=identicon&r=PG&f=1", "display_name": "BDMcGrew", "link": "https://stackoverflow.com/users/4547970/bdmcgrew"}, "is_accepted": false, "score": 1, "last_activity_date": 1570678957, "creation_date": 1570678957, "answer_id": 58315147, "question_id": 58309449, "link": "https://stackoverflow.com/questions/58309449/c-how-to-use-stdfilesystemdirectory-options/58315147#58315147", "title": "C++ How to use std::filesystem::directory_options", "body": "<p>Thank you guys for pointing me in the right direction.  A bit more digging and lots of trial and error and I got it. I hope this code is right, it does what I want!  And yeah, I know there are some shorthand things I can do to shorten up the statements but my memory isn't that good :)  Thanks again!</p>\n\n<pre><code>const std::filesystem::directory_options options = (\n    std::filesystem::directory_options::follow_directory_symlink |\n    std::filesystem::directory_options::skip_permission_denied\n);\n\n    try\n    {\n        for (const auto&amp; dirent :\n            std::filesystem::recursive_directory_iterator(start_path,\n            std::filesystem::directory_options(options)))\n        {\n            \u2026\n        }\n    catch(std::filesystem::filesystem_error &amp;fse)\n    {\n        std::cout &lt;&lt; \"Caught fatal exception: \"\n            &lt;&lt; std::endl\n            &lt;&lt; fse.what()\n            &lt;&lt; std::endl;\n    }\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4547970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce78c5033d8b99de7fb6e377c0eb4921?s=128&d=identicon&r=PG&f=1", "display_name": "BDMcGrew", "link": "https://stackoverflow.com/users/4547970/bdmcgrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1430, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570678957, "creation_date": 1570642588, "question_id": 58309449, "link": "https://stackoverflow.com/questions/58309449/c-how-to-use-stdfilesystemdirectory-options", "title": "C++ How to use std::filesystem::directory_options", "body": "<p>Total noob here so apologies in advance if this is covered somewhere else but, I'm not finding a suitable example in google anywhere or anywhere else.</p>\n\n<p>I'm using std::filesystem::recursive_directory_iterator to walk though a directory tree.  When I get to a dir that I don't have permission on, it throws an exception.  I understand that std::filesystem::directory_options is what I want, to be able to skip permission denied and not follow symlinks; but I'm not sure how to use it.  </p>\n\n<p>Basically I need to walk a directory tree (which could be quite, quite large); skipping any permission denied directories and not following symlinks.  If each directory has any files of any type then that directory get added to a queue to be used later.  </p>\n\n<p>Snip of code is below.  </p>\n\n<p>Thanks.</p>\n\n<pre><code>for (auto&amp; dirent : std::filesystem::recursive_directory_iterator(start_path))\n{\n    if (dirent.is_directory())\n    {\n        // CRASH if permission denied; need std::filesystem::options\n        std::filesystem::path fsp = dirent.path();\n        for (auto&amp; subdirent : std::filesystem::directory_iterator(fsp))\n        {\n            if (!subdirent.is_directory())\n            {\n                dir_stack.push_back(dirent.path());\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570643062, "post_id": 58309382, "comment_id": 102980624, "body": "While you&#39;re entitled to your opinion, there is no <a href=\"https://en.cppreference.com/w/cpp/thread/lock\" rel=\"nofollow noreferrer\"><code>std::lock</code></a> in this code so I&#39;m not sure you are complaining about what you think you are. If you are complaining about the <code>.lock()</code> calls you are not suppose to use those functions anyway. You are expected to use <a href=\"https://en.cppreference.com/w/cpp/thread/unique_lock\" rel=\"nofollow noreferrer\"><code>std::unique_lock</code></a> and other RAII lock owning objects. Those functions are only exposed so you can implement your own lock types."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570643288, "post_id": 58309382, "comment_id": 102980728, "body": "Is the line you&#39;ve shown with <code>cout</code> used without a <code>mutex</code>? If it&#39;s not shown, I think it would be clearer to add it. If you are not using a <code>mutex</code> there then that explains the problem."}, {"owner": {"reputation": 113, "user_id": 8172314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRc26.png?s=128&g=1", "display_name": "Maciej", "link": "https://stackoverflow.com/users/8172314/maciej"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570702018, "post_id": 58309382, "comment_id": 102999928, "body": "First of all, i am not complaining, I am asking an objective question. While indeed i forgot to add a mutex lock around the cout, this does not explain the problem at all. An explanation of a problem is a clear, objective, explicit step by step chronological description of what is happening and how is that different from what one thinks is happening. I do not see how your comments bring us any closer to that."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570715431, "post_id": 58309382, "comment_id": 103007602, "body": "A complaint is &quot;expressing dissatisfaction about something&quot; so I hope you can see why someone might interpret <i>&quot;Yes, I hate C++ iostream and yes i hate the std::locks&quot;</i> as a complaint. As for my second comment, it&#39;s important to establish whether or not <code>cout</code> is synchronized in your actual code. If the actual code doesn&#39;t synchronize, it indeed explains your observations. If you simply forgot to include them here, it&#39;s important to fix the question as it may distract from the actual cause of what you are asking about."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570715604, "post_id": 58309382, "comment_id": 103007724, "body": "It sounds like you interpreted me second comment as an attempt at answering your question. Comments are not for answering questions, they are for discussing the question. For example, I&#39;m pointing out errors in the question. You should not expect a <i>&quot;a clear, objective, explicit step by step chronological description&quot;</i> in the comments. My comment is meant to indicates that the cause of the problem <i>might</i> be the missing synchronization. But I recognize that it might be simply an omission. It&#39;s meant to give you the opportunity to improve your question by clearing up this confusion."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 8172314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRc26.png?s=128&g=1", "display_name": "Maciej", "link": "https://stackoverflow.com/users/8172314/maciej"}, "edited": false, "score": 0, "creation_date": 1570701937, "post_id": 58309440, "comment_id": 102999891, "body": "This is only partially true, only cout example misses a mutex. Both printf cases have it."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 113, "user_id": 8172314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRc26.png?s=128&g=1", "display_name": "Maciej", "link": "https://stackoverflow.com/users/8172314/maciej"}, "edited": false, "score": 0, "creation_date": 1570702544, "post_id": 58309440, "comment_id": 103000183, "body": "yes but the second example doesn&#39;t hold the mutex whilst calling <code>get</code>"}, {"owner": {"reputation": 113, "user_id": 8172314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRc26.png?s=128&g=1", "display_name": "Maciej", "link": "https://stackoverflow.com/users/8172314/maciej"}, "edited": false, "score": 0, "creation_date": 1570703022, "post_id": 58309440, "comment_id": 103000446, "body": "exactly! and this makes one think that printf for some wierd reason interferes with get. Apparently this is not the case however, the second answer provided the required clue."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 3, "last_activity_date": 1570642541, "creation_date": 1570642541, "answer_id": 58309440, "question_id": 58309382, "link": "https://stackoverflow.com/questions/58309382/why-does-printf-cause-deadlock-with-future-get-while-the-cout-does-not/58309440#58309440", "title": "Why does printf cause deadlock with future.get while the cout does not?", "body": "<p>you're holding <code>printf_mutex</code> so the task can't complete and <code>future_result_of_packaged_task.get()</code> never returns. Your other examples don't hold the mutex whilst calling <code>get</code> so don't deadlock.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 8172314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRc26.png?s=128&g=1", "display_name": "Maciej", "link": "https://stackoverflow.com/users/8172314/maciej"}, "edited": false, "score": 0, "creation_date": 1570702839, "post_id": 58309762, "comment_id": 103000346, "body": "Using RAII is exactly what prevents one from learning and understanding problems like these and results in much messier and less readable code anyway. It cannot be a race between worker_thread and the main because the output clearly shows that the worker gets past the only mutex it has. I provided the entire code so that one can compile it for him/herself and check precisely that. The &quot;factorial will be locked forever, because it&#39;s called after printf_mutex been locked.&quot; is a good clue leading to the root of the problem:"}, {"owner": {"reputation": 113, "user_id": 8172314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRc26.png?s=128&g=1", "display_name": "Maciej", "link": "https://stackoverflow.com/users/8172314/maciej"}, "edited": false, "score": 0, "creation_date": 1570702852, "post_id": 58309762, "comment_id": 103000354, "body": "- Main is stuck on get() because it is a blocking function, something which I did not think about but in the hindsight should&#39;ve been obvious. Commenting out the output in factorial() makes all three variants of the output in main work as intended."}], "tags": [], "owner": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "is_accepted": true, "score": 0, "last_activity_date": 1570646696, "last_edit_date": 1570646696, "creation_date": 1570643866, "answer_id": 58309762, "question_id": 58309382, "link": "https://stackoverflow.com/questions/58309382/why-does-printf-cause-deadlock-with-future-get-while-the-cout-does-not/58309762#58309762", "title": "Why does printf cause deadlock with future.get while the cout does not?", "body": "<p>You're having a race condition between <code>worker_thread</code> lock and the lowest <code>printf_mutex.lock()</code> (you can see it by placing a <code>std::this_thread::sleep_for(std::chrono::seconds(1));</code> before its <code>printf_mutex.lock();</code>) and also, if, by luck, <code>worker_thread</code> wins, you're having a mutex logic problem between the locking inside <code>factorial</code> and the lowest <code>printf_mutex.lock()</code>. <code>factorial</code> will be locked forever, because it's called after <code>printf_mutex</code> been locked. Either you lock inside <code>factorial</code> or lock before the outside <code>printf</code>.</p>\n\n<p>Working or not with <code>std::cout</code> or with <code>printf</code> is just luck. <code>std::cout</code> can be slower or faster than <code>printf</code> depending on your optimization directive. And note that you're using <code>std::cout</code> without <code>printf_mutex.lock();</code> before, that's why it's working. Also, in the <code>printf</code> case that works, you're calling <code>.get()</code> before locking, that's why it works. Fix the race conditions and lock logics, then both <code>printf</code> and <code>std::cout</code> shall work.</p>\n\n<hr>\n\n<p>Obs.: Prefer using RAII lock pattern and also consider using <code>std::recursive_mutex</code> for same thread locks, for printing, it can be very helpful.</p>\n"}], "owner": {"reputation": 113, "user_id": 8172314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRc26.png?s=128&g=1", "display_name": "Maciej", "link": "https://stackoverflow.com/users/8172314/maciej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 58309762, "answer_count": 2, "score": 0, "last_activity_date": 1570703454, "creation_date": 1570642273, "last_edit_date": 1570703454, "question_id": 58309382, "link": "https://stackoverflow.com/questions/58309382/why-does-printf-cause-deadlock-with-future-get-while-the-cout-does-not", "title": "Why does printf cause deadlock with future.get while the cout does not?", "body": "<p>I have some experience with MPI and CUDA and now I decided that it is high time to actually do some threading. I was learning the C++ Standard Library threading thingies and (based on a series of Youtube videos) I was building a simple piece of code which builds a job with std::packaged_task and sends it to job queue for worker threads to execute. Simple enough so far.</p>\n\n<p>The problem started when I tried retrieving a result of the job via a future:</p>\n\n<pre><code>  printf_mutex.lock();\n  printf(\"MAIN: Result of %i! is %i\\n\", 6, future_result_of_packaged_task.get()); // this causes deadlock!\n  printf_mutex.unlock();\n</code></pre>\n\n<p>This locks the code forever!\nBut this works:</p>\n\n<pre><code>  int mah_result = future_result_of_packaged_task.get();\n  printf_mutex.lock();\n  printf(\"MAIN: Result of %i! is %i\\n\", 6, mah_result ); // this is okay\n  printf_mutex.unlock();\n</code></pre>\n\n<p>As does this (which is what the youtuber did):</p>\n\n<pre><code>std::cout &lt;&lt; future_result_of_packaged_task.get() &lt;&lt; \"\\n\"; //this is okay\n</code></pre>\n\n<p><strong>WHY DOES PRINTF() FAIL WHILE THE COUT WORKS CORRECTLY?</strong></p>\n\n<p>I think understanding this problem could be very educational.</p>\n\n<p>The entire code is simple enough (some libraries are not needed since i just lazy copypasted them from a previous toy code, but who cares):</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;thread&gt;\n#include &lt;string&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n#include &lt;iostream&gt;\n#include &lt;future&gt;\n#include &lt;deque&gt;\n\nint factorial(int N, std::mutex&amp; printf_mutex)\n{\n  int result = 1;\n  for (int i = N; i &gt; 1; --i) result *= i;\n  printf_mutex.lock();\n  printf(\"FACTORIAL: Result of %i! is %i\\n\", N, result);\n  printf_mutex.unlock();\n  return result;\n}\n\nvoid worker_thread( std::deque&lt; std::packaged_task&lt;int()&gt; &gt;&amp; task_queue, std::mutex&amp; task_queue_mutex, std::condition_variable&amp; task_queue_cv, std::mutex&amp; printf_mutex )\n{\n  std::unique_lock&lt;std::mutex&gt; task_queue_mutex_lock(task_queue_mutex);\n  task_queue_cv.wait(task_queue_mutex_lock, [&amp;](){return !task_queue.empty();} );\n  printf_mutex.lock();\n  printf(\"WORKER: I'm not sleeping anymore!\\n\"); // this is okay\n  printf_mutex.unlock();\n  std::packaged_task&lt;int()&gt; my_task = std::move( task_queue.front() );\n  task_queue.pop_front();\n  my_task();\n}\n\nint main()\n{\n  std::mutex printf_mutex;\n  std::mutex task_queue_mutex;\n  std::deque&lt; std::packaged_task&lt;int()&gt; &gt; task_queue;\n  std::condition_variable task_queue_cv;\n\n  std::thread a_thread( worker_thread, std::ref(task_queue), std::ref(task_queue_mutex), std::ref(task_queue_cv), std::ref(printf_mutex) );\n  std::this_thread::sleep_for(std::chrono::seconds(1));\n\n  std::packaged_task&lt;int()&gt; a_task( bind(factorial, 6, std::ref(printf_mutex)) );\n  std::future&lt;int&gt; future_result_of_packaged_task = a_task.get_future();\n\n  task_queue_mutex.lock();\n  task_queue.push_back(std::move(a_task));\n  task_queue_mutex.unlock();\n  task_queue_cv.notify_one();\n  printf_mutex.lock();\n  printf(\"MAIN: Notification sent!\\n\"); // this is okay\n  printf_mutex.unlock();\n\n  //std::cout &lt;&lt; future_result_of_packaged_task.get() &lt;&lt; \"\\n\"; //this is okay\n\n  int mah_result = future_result_of_packaged_task.get();\n  printf_mutex.lock();\n  printf(\"MAIN: Result of %i! is %i\\n\", 6, mah_result ); // this is okay\n  printf_mutex.unlock();\n\n  printf_mutex.lock();\n  //printf(\"MAIN: Result of %i! is %i\\n\", 6, future_result_of_packaged_task.get()); // this causes a deadlock!\n  printf_mutex.unlock();\n\n  a_thread.join();\n  return 0;\n}\n</code></pre>\n\n<p>Yes, I hate C++ iostream and yes i hate the std::locks, their mere existence offends the Occam's Razor. I also use horrible naming scheme for my toy codes. None of that matters for the question tough.</p>\n\n<p>EDIT: So, the solution to the puzzle is not obvious from the accepted answer. I want to make it clear:\n 1. Protecting the cout with printf_mutex makes it fail as well as printf. This suggests that the problem is either future.get() interfering with output mechanisms on my machine or the problem being a mutex clash / a race. When in doubt, always suspect a race, and notice that:<br>\n 2. future.get() is a blocking function. I <em>effectively</em> locked a mutex and went to sleep, which is asking for races. Where can that race happen tough? By experiment we know that it never happens in the worker thread. Where else could it happen?<br>\n<strong>3. The answer is that the factorial also tries to lock printf_mutex and fails because the main always locks it first and then goes to sleep in future.get()</strong></p>\n\n<p>The accepted answer is the one which provided the strongest/most complete clue.</p>\n"}, {"tags": ["c++", "dictionary", "iterator", "transform"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10559799, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ek2LxSfsv-Q/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAy9uzzO63w8EhPNPaDQs2XwZdjuA/mo/photo.jpg?sz=128", "display_name": "BDD", "link": "https://stackoverflow.com/users/10559799/bdd"}, "edited": false, "score": 0, "creation_date": 1570644831, "post_id": 58309550, "comment_id": 102981466, "body": "I think it was using pair instead of map within the vector. Thanks for the help!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1570650102, "last_edit_date": 1570650102, "creation_date": 1570642983, "answer_id": 58309550, "question_id": 58309374, "link": "https://stackoverflow.com/questions/58309374/how-can-i-add-dictionaries-to-a-vector/58309550#58309550", "title": "How Can I Add Dictionaries to a Vector?", "body": "<p>I think you are using the incorrect data type. Use of</p>\n\n<pre><code>std::map&lt;std::string, std::vector&lt;std::pair&lt;std::string, int&gt;&gt;&gt; groceryDict;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>std::map&lt;std::string, std::map&lt;std::string, int&gt;&gt; groceryDict;\n</code></pre>\n\n<p>will work better.</p>\n\n<p>The following block of code should work.</p>\n\n<pre><code>std::vector&lt;std::pair&lt;std::string, int&gt;&gt; rowVect;\n\nstd::map&lt;std::string, int&gt; rowDict = {{\"Bananas\", 2}, {\"Apples\", 5}};\nfor ( auto&amp; item: rowDict )\n{\n   std::string x = item.first;\n   int y = item.second;\n   rowVect.push_back({x, y});\n}\n</code></pre>\n\n<p>or the simpler version of the <code>for</code> loop.</p>\n\n<pre><code>for ( auto&amp; item: rowDict )\n{\n   rowVect.push_back(item);\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10559799, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ek2LxSfsv-Q/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAy9uzzO63w8EhPNPaDQs2XwZdjuA/mo/photo.jpg?sz=128", "display_name": "BDD", "link": "https://stackoverflow.com/users/10559799/bdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 58309550, "answer_count": 1, "score": 1, "last_activity_date": 1570653089, "creation_date": 1570642223, "last_edit_date": 1570653089, "question_id": 58309374, "link": "https://stackoverflow.com/questions/58309374/how-can-i-add-dictionaries-to-a-vector", "title": "How Can I Add Dictionaries to a Vector?", "body": "<p>I am trying to populate a dictionary of the form <code>map&lt;string, vector&lt;map&lt;string,string&gt;&gt; &gt;</code> groceryDict but I am running into an issue where I cannot get the key and value strings out of the dictionary. In <code>map&lt;string, vector&lt;map&lt;string,string&gt;&gt; &gt;</code> groceryDict the first key is represents the type of grocery item ie: fruit, vegetable, or meat. That keys value is a vector of dictionaries. Each dictionary item of the vector has an item name and quantity ie: Tomatoes:2 or Strawberries:5.</p>\n\n<ol>\n<li>I have tried the following code:</li>\n</ol>\n\n<pre><code>    vector&lt;map&lt;string, string&gt;&gt;rowVect;\n    map&lt;string,string&gt; rowDict={{'Bananas','2'}{'Apples','5'}};\n    for (map&lt;string, string&gt;::iterator it = rowDict.begin(); it != \n    rowDict.end();it++) {\n     string x = it-&gt;first;\n     string y = it-&gt;second;\n     rowVect.push_back({x,y});\n     }\n</code></pre>\n\n<ol start=\"2\">\n<li>I have also tried the following code:</li>\n</ol>\n\n<pre><code>    vector&lt;pair&lt;string, string&gt;&gt;rowVect;\n    map&lt;string,string&gt; rowDict={{'Bananas','2'}{'Apples','5'}};\n    std::transform(rowDict.begin(), rowDict.end(), back_inserter(rowVect), \n    [&amp;](std::pair&lt;string,string&gt; &amp;p) {rowVect.push_back( p ); });\n</code></pre>\n\n<p>I expected the code to compile but instead I received the following errors:<br>\n1. Error C2675 unary '++': '_Iter' does not define this operator or a \n    conversion to a type acceptable to the predefined operator<br>\n2. Error C2664::operator ()(std::pair &amp;) const': \n    cannot convert argument 1 from 'std::pair' to \n    'std::pair &amp;'</p>\n"}, {"tags": ["c++", "pointers", "initialization", "access-violation"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570642201, "post_id": 58309317, "comment_id": 102980248, "body": "Sounds like <code>path</code> doesn&#39;t contain either <code>&#39;\\\\&#39;</code> or <code>&#39;&#47;&#39;</code>. Fortunately, looks like you <code>LOG</code> the variable <code>path</code>. What value does it have?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1570642226, "post_id": 58309317, "comment_id": 102980261, "body": "You have multiple variables named <code>p</code>, which one is the problem? Where in your code does the crash happens, on what line? And please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show us. Also please refresh read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1570642234, "post_id": 58309317, "comment_id": 102980263, "body": "We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. But I note that you have a second <code>char *p</code> declared within the <code>if</code> statement. I can&#39;t see it being used, but might it be used without being set?"}], "owner": {"reputation": 3, "user_id": 11517279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lfVhzAF--w0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcWj5RfaENDR1SufTiVXrPVkcWzoA/mo/photo.jpg?sz=128", "display_name": "Ricardo Mel&#233;ndez", "link": "https://stackoverflow.com/users/11517279/ricardo-mel%c3%a9ndez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570643043, "creation_date": 1570641968, "last_edit_date": 1570643043, "question_id": 58309317, "link": "https://stackoverflow.com/questions/58309317/write-access-violation-c", "title": "Write access violation c++", "body": "<p>I am trying to run this code in vs 2019 but when I run the code give following error:</p>\n\n<pre><code>&lt;unable to read memory&gt;\n</code></pre>\n\n<p>this is the code:</p>\n\n<pre><code>// serializing config files using a stupid custom format\n#define CONFIG_FILE \"config.txt\"\n#define CONFIG_MAX_RECORDS 64\n#define CONFIG_BUF_SIZE 4096\ntypedef struct {\n    char* filterName;\n    char* filterValue;\n} filterRecord;\nUINT filtersSize;\nfilterRecord filters[CONFIG_MAX_RECORDS] = {0};\nchar configBuf[CONFIG_BUF_SIZE+2]; // add some padding to write \\n\nBOOL parameterized = 0; // parameterized flag, means reading args from command line\n\n// loading up filters and fill in\nvoid loadConfig() {\n    char path[MSG_BUFSIZE];\n    char *p;\n    FILE *f;\n    GetModuleFileName(NULL, path, MSG_BUFSIZE);\n    LOG(\"Executable path: %s\", path);\n    p = strrchr(path, '\\\\');\n    if (p == NULL) p = strrchr(path, '/'); \n    strcpy(p+1, CONFIG_FILE);\n    LOG(\"Config path: %s\", path);\n    f = fopen(path, \"r\");\n    .....\n</code></pre>\n\n<p>Exception thrown: write access violation.\n<strong>p</strong> was nullptr. occurred</p>\n"}, {"tags": ["c++", "windows", "file", "driver"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1570642028, "post_id": 58309279, "comment_id": 102980161, "body": "This may be helpful: <a href=\"http://www.zachburlingame.com/2011/02/versioning-a-native-cc-binary-with-visual-studio/\" rel=\"nofollow noreferrer\">zachburlingame.com/2011/02/&hellip;</a> - basically; the Win32 API has functions to do this, you just need to call them and provide the required information. Did you research <i>any</i> MSDN documentation <i>at all</i> before asking this?"}, {"owner": {"reputation": 7, "user_id": 5468923, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cCHT4.png?s=128&g=1", "display_name": "Ruashua", "link": "https://stackoverflow.com/users/5468923/ruashua"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1570643947, "post_id": 58309279, "comment_id": 102981018, "body": "I did.  I have been down a few paths that lead to file attribute editing, which is not what I need, and complete driver creation, which seems much too complicated for what I need.   Your path seems to be setting the project exe&#39;s version number at compile time.  My program creates a bogus .sys file during runtime, and I would like the program to be able to set that .sys&#39; file version after or during the .sys&#39; creation. During runtime."}], "answers": [{"tags": [], "owner": {"reputation": 7, "user_id": 5468923, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cCHT4.png?s=128&g=1", "display_name": "Ruashua", "link": "https://stackoverflow.com/users/5468923/ruashua"}, "is_accepted": true, "score": 0, "last_activity_date": 1570835774, "creation_date": 1570835774, "answer_id": 58349455, "question_id": 58309279, "link": "https://stackoverflow.com/questions/58309279/how-do-i-set-file-version-during-runtime-on-a-sys-file-that-my-program-creates/58349455#58349455", "title": "How do I set File Version during runtime on a .sys file that my program creates", "body": "<p>Well, I could not find a function that sets the file version, only gets.\nI ended up creating a hello world driver and setting the file version of that with the method that Jesper linked (which is all preprocessor).  This compiles a .sys with a version number.  </p>\n\n<p>I analyzed the .sys file and found a couple of spots with version info.  One is in DWORD little-endian, this is what Windows grabs for file details.  The other is very close to it, stored as a string.  I am not sure which one the program I am interfacing with grabs so I am changing both.  Changing the string version does not change the file version in the file details. .sys files seem to have a sensitive file structure.  If you change something unrelated to the file version, Windows no longer parses the file correctly for the version. </p>\n\n<p><a href=\"https://i.stack.imgur.com/Az6Ia.png\" rel=\"nofollow noreferrer\">Here are the bits I changed.</a> The string version is incremented by one because I was testing.</p>\n"}], "owner": {"reputation": 7, "user_id": 5468923, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cCHT4.png?s=128&g=1", "display_name": "Ruashua", "link": "https://stackoverflow.com/users/5468923/ruashua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 58349455, "answer_count": 1, "score": -2, "last_activity_date": 1570835774, "creation_date": 1570641818, "question_id": 58309279, "link": "https://stackoverflow.com/questions/58309279/how-do-i-set-file-version-during-runtime-on-a-sys-file-that-my-program-creates", "title": "How do I set File Version during runtime on a .sys file that my program creates", "body": "<p>I want my c++ program to create an empty .sys driver file, with \"File Version\" populated in the file details in Windows.  The file doesn't need anything else, just \"File Version\".  I also want to be able to change the file version or create a new file with a different file version.  I am using another program to read this file version.<br>\nHow would I go about doing this?  Is there an easy way that does not involve the whole driver-making process?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 6, "creation_date": 1570641899, "post_id": 58309264, "comment_id": 102980094, "body": "Why do you need 1000 functions? What is different between each of these functions? Is the code different or is it just the data that the code acts on that&#39;s different? If it&#39;s the later, then you only need one function."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 7, "creation_date": 1570641903, "post_id": 58309264, "comment_id": 102980096, "body": "C++ does not allow you to create functions at runtime. However, there might be a different solution to your problem. You&#39;ll have to provide more details of the problem you are trying to solve though."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1570642016, "post_id": 58309264, "comment_id": 102980155, "body": "@RSahu &quot;<i>C++ does not allow you to create functions at runtime</i>&quot; - true, but it is fairly trivial to dynamically allocate a block of memory with executable rights, copy prepared machine instructions into that memory, and then use it like any other function. Plenty of frameworks use this technique for making executable thunks dynamically at runtime, for instance."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570642041, "post_id": 58309264, "comment_id": 102980170, "body": "With what you have shown here, you only need one function and you pass <code>somevariable</code> as an argument."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570642172, "post_id": 58309264, "comment_id": 102980232, "body": "@RemyLebeau, is that what happens under the covers when you load a DLL?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 3, "creation_date": 1570642185, "post_id": 58309264, "comment_id": 102980238, "body": "Is it because the 3rd-party library takes a c-style callback with no <code>void*</code> user-provided argument?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1570642209, "post_id": 58309264, "comment_id": 102980251, "body": "@RSahu no, it is not.  I was referring more to frameworks like ATL, MFC, VCL, etc which use dynamic thunks to provide proxying of non-static class methods on a per-object basic for things like C-style callbacks, Win32 window message handlers, etc."}, {"owner": {"reputation": 285, "user_id": 5009965, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c7e373406444bbef6f503b62ce8770eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jones G", "link": "https://stackoverflow.com/users/5009965/jones-g"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570642524, "post_id": 58309264, "comment_id": 102980392, "body": "@Code-Apprentice that is what I am doing but the 3rd party lib does not allow that, it wants a dedicated function for what ever argument you pass or else it will overwrite it."}, {"owner": {"reputation": 285, "user_id": 5009965, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c7e373406444bbef6f503b62ce8770eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jones G", "link": "https://stackoverflow.com/users/5009965/jones-g"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1570642786, "post_id": 58309264, "comment_id": 102980503, "body": "@MaximEgorushkin almost like what you mentioned."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1570643065, "post_id": 58309264, "comment_id": 102980626, "body": "@James Guana could you simply provide a 3D library function declaration which you need to use ? It seems like you simply need a functor which will collect result into a collection like vector or list."}, {"owner": {"reputation": 944, "user_id": 7480820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EYbddFUbJW0/AAAAAAAAAAI/AAAAAAAAAHY/LzyS_Lco87Y/photo.jpg?sz=128", "display_name": "Philip Nelson", "link": "https://stackoverflow.com/users/7480820/philip-nelson"}, "edited": false, "score": 3, "creation_date": 1570643262, "post_id": 58309264, "comment_id": 102980713, "body": "This is likely an example of the <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>. Instead, why don&#39;t you give more details about your problem with the third party library instead of the solution you think you need?"}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1570643964, "post_id": 58309264, "comment_id": 102981025, "body": "libffi can create executable code at run-time (a concrete example of Remy Lebeau&#39;s comment), the closure part of the library is able to package sets of arguments in order to massage parameter sets needed by your function to a function signature required by a callback system. You provide the cclosure to the function taking the callback and use the code provided to libffi to unpack the saved data along with whatever arguments are taken in order to call your &#39;real&#39; callback."}, {"owner": {"reputation": 285, "user_id": 5009965, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c7e373406444bbef6f503b62ce8770eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jones G", "link": "https://stackoverflow.com/users/5009965/jones-g"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1570644203, "post_id": 58309264, "comment_id": 102981140, "body": "@VictorGubin You mean a struct? I have that, but the 3rd party callback has one to one relationship with a function, so if you called it again for a new data, it will ignore your previous data even if you have an increment for it. Sound illogical right?"}, {"owner": {"reputation": 1056, "user_id": 585566, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/28d065c01caf33a7e23fdbf7f7ca352e?s=128&d=identicon&r=PG", "display_name": "SleepingSpider", "link": "https://stackoverflow.com/users/585566/sleepingspider"}, "edited": false, "score": 0, "creation_date": 1570645664, "post_id": 58309264, "comment_id": 102981851, "body": "Would it work if you wrap this function in a class and create a new object of this class anytime you want to use this 3rd party library? Must the function names be unique too?"}, {"owner": {"reputation": 285, "user_id": 5009965, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c7e373406444bbef6f503b62ce8770eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jones G", "link": "https://stackoverflow.com/users/5009965/jones-g"}, "edited": false, "score": 0, "creation_date": 1570646338, "post_id": 58309264, "comment_id": 102982163, "body": "I have not attempted that yet. But it might work"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 6, "creation_date": 1570649736, "post_id": 58309264, "comment_id": 102983572, "body": "@JamesGuana Mentioning the XY problem is not a comment about your intelligence. Instead, Philip is pointing out that you appear to have started with a problem (using a 3rd party library) and you thought of a potential solution (generating functions programmatically) but there is likely a better solution to your original problem. If you edit your question to show the third party library that you are using and how you want to use it, then we can address that more direclty."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1570713041, "last_edit_date": 1570713041, "creation_date": 1570652685, "answer_id": 58311778, "question_id": 58309264, "link": "https://stackoverflow.com/questions/58309264/programmatically-creating-functions-in-c/58311778#58311778", "title": "Programmatically creating functions in c++", "body": "<p>You can use templates to generate a compile-time fixed number of c-style functions, each of which can pass a hard-coded argument to your C++ callback. You can use that hard-coded argument to associate the c-style callback with an object.</p>\n\n<p>Here is a minimal working C++14 example that allows to associate a unique C++ <code>std::function</code> with each of the generated c-style callback. You can initialize that <code>std::function</code> with a lambda that captures whatever state you need in that particular callback:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n\nclass Callbacks {\n    static constexpr unsigned count = 1000;\n    static Callbacks* instance;\n\n    using CF = void(); // C-style callback type.\n    using F = std::function&lt;CF&gt;; // C++ stateful callback type.\n\n    F callbacks_[count];\n    CF* c_style_callbacks_[count];\n\n    template&lt;unsigned Index&gt;\n    static void c_style_callback() {\n        instance-&gt;callbacks_[Index]();\n    }\n\n    template&lt;unsigned... Index&gt;\n    void make_c_style_callbacks(std::integer_sequence&lt;unsigned, Index...&gt;) {\n        auto initializer_list = {(c_style_callbacks_[Index] = &amp;c_style_callback&lt;Index&gt;)...};\n        static_cast&lt;void&gt;(initializer_list);\n    }\n\npublic:\n    Callbacks() {\n        make_c_style_callbacks(std::make_integer_sequence&lt;unsigned, count&gt;{});\n        if(instance)\n            throw; // One instance only please.\n        instance = this;\n    }\n\n    Callbacks(Callbacks const&amp;) = delete;\n    Callbacks&amp; operator=(Callbacks const&amp;) = delete;\n\n    ~Callbacks() noexcept {\n        instance = 0;\n    }\n\n    CF* register_callback(F f) noexcept {\n        // Linear search can be improved upon.\n        auto condition = [](F const&amp; f) { return !f; };\n        auto index = std::find_if(std::begin(callbacks_), std::end(callbacks_), condition) - std::begin(callbacks_);\n        if(index &lt; count) {\n            callbacks_[index] = std::move(f); // Assumes move-assignement is noexcept.\n            return c_style_callbacks_[index];\n        }\n        return 0;\n    }\n\n    void unregister_callback(CF* cf) noexcept {\n        // Linear search can be improved upon.\n        auto index = std::find(std::begin(c_style_callbacks_), std::end(c_style_callbacks_), cf) - std::begin(c_style_callbacks_);\n        if(index &lt; count)\n            callbacks_[index] = {};\n        else\n            throw; // cf has not been found. Programming error.\n    }\n};\n\nCallbacks* Callbacks::instance = 0;\n\nint main() {\n    Callbacks c;\n    unsigned n = 0;\n\n    auto p0 = c.register_callback([m = n++]() { std::cout &lt;&lt; m &lt;&lt; '\\n'; });\n    auto p1 = c.register_callback([m = n++]() { std::cout &lt;&lt; m &lt;&lt; '\\n'; });\n    auto p2 = c.register_callback([m = n++]() { std::cout &lt;&lt; m &lt;&lt; '\\n'; });\n\n    p0(); // Outputs 0.\n    p1(); // Outputs 1.\n    p2(); // Outputs 2.\n\n    c.unregister_callback(p2);\n    c.unregister_callback(p1);\n    c.unregister_callback(p0);\n}\n</code></pre>\n\n<p>The solution requires using a bit of global state, which is <code>Callbacks::instance</code> here. An alternative would be to parametrize <code>c_style_callback</code> with a reference to an object with linkage (internal or external), which means a global, namespace-scoped or class static object.</p>\n\n<p>If you are using C++11 you will need to use a backport of <code>std::integer_sequence</code> and <code>std::make_integer_sequence</code> which arrived in C++14 but don't actually require any C++14-specific features. Example <code>[m = n++]</code> named captures are also available since C++14, but that is just for demonstration.</p>\n"}], "owner": {"reputation": 285, "user_id": 5009965, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c7e373406444bbef6f503b62ce8770eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jones G", "link": "https://stackoverflow.com/users/5009965/jones-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "accepted_answer_id": 58311778, "answer_count": 1, "score": -2, "last_activity_date": 1596107254, "creation_date": 1570641771, "last_edit_date": 1596107254, "question_id": 58309264, "link": "https://stackoverflow.com/questions/58309264/programmatically-creating-functions-in-c", "title": "Programmatically creating functions in c++", "body": "<p>Suppose we have a code that contains 1000 copies of function with the following form:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>function myname_[X](args){\n    struct somevariable_[X];\n    //others\n}\n</code></pre>\n<p>where [X] is a sequence say 0001, 0002 etc.</p>\n<p>I intend to make it cleaner by programmatically generating the function and variable names instead. How can we do this in c++?</p>\n"}, {"tags": ["c++", "windows", "gcc", "libraries"], "comments": [{"owner": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "edited": false, "score": 0, "creation_date": 1570644986, "post_id": 58309215, "comment_id": 102981546, "body": "You are trying to create a program using mingw and gcc, then following instructions that are meant to be followed with Visual Studio and Windows SDK..."}, {"owner": {"reputation": 33, "user_id": 10135157, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Qwert Yuiop", "link": "https://stackoverflow.com/users/10135157/qwert-yuiop"}, "reply_to_user": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "edited": false, "score": 0, "creation_date": 1570646053, "post_id": 58309215, "comment_id": 102982029, "body": "@yms So the problem is that it doesn&#39;t work with the gcc compiler? Do I have to use Visual Studio to make it work?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1570646635, "post_id": 58309215, "comment_id": 102982275, "body": "As you identified you should use the library <code>libgdi32.a</code>.  The documentation to use <code>Gdi32.lib</code> is for the MSVC tool-chain.  As you are using the MinGW64 tool-chain (which uses gcc) you need to adjust the library names accordingly.  When new to developing on a platform it is often easier to use the native tool-chains as all the supporting documentation matches what you need to do."}, {"owner": {"reputation": 33, "user_id": 10135157, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Qwert Yuiop", "link": "https://stackoverflow.com/users/10135157/qwert-yuiop"}, "edited": false, "score": 0, "creation_date": 1570651452, "post_id": 58309215, "comment_id": 102984257, "body": "@ Richard  Is it enough to link to the folder which the file sits in, or do I need to link to the file directly? About the tool-chain: Until now everything I did in C++ worked well with the gcc compiler, so I wasn&#39;t aware that there would be differences other than how the editor looks."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1570655070, "post_id": 58309215, "comment_id": 102985617, "body": "You need to link with the file directly.  Basically MinGW64 is a port of gcc to the MS-Windows environment with reverse engineering of MS&#39;s WinAPI supporting libraries.  gcc because of it&#39;s Linux background expects libraries to be in a different format, with different naming convention."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10135157, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Qwert Yuiop", "link": "https://stackoverflow.com/users/10135157/qwert-yuiop"}, "edited": false, "score": 0, "creation_date": 1570645440, "post_id": 58309838, "comment_id": 102981753, "body": "I downloaded the gdi32.lib and added it to the folder C:\\Programfiles\\Dev-Cpp\\MinGW64\\x86_64-w64-mingw32\\lib. The error message is unchanged when I recompile."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1570644190, "creation_date": 1570644190, "answer_id": 58309838, "question_id": 58309215, "link": "https://stackoverflow.com/questions/58309215/how-do-i-set-up-the-libraries-correctly-for-windows-gdi-in-c/58309838#58309838", "title": "How do I set up the libraries correctly for Windows&#39; GDI in C++?", "body": "<p>The header files only provide declarations, For CreateCompatibleDC you need to provide gdi32.lib as part of the link (this is the \"Library\" portion of the Requirements block on Microsoft documentation pages).</p>\n"}], "owner": {"reputation": 33, "user_id": 10135157, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Qwert Yuiop", "link": "https://stackoverflow.com/users/10135157/qwert-yuiop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 677, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570645573, "creation_date": 1570641550, "last_edit_date": 1570645573, "question_id": 58309215, "link": "https://stackoverflow.com/questions/58309215/how-do-i-set-up-the-libraries-correctly-for-windows-gdi-in-c", "title": "How do I set up the libraries correctly for Windows&#39; GDI in C++?", "body": "<p>I want to make a C++ program that has live access to the pixels (colors and intensity e.g. bitmap) on the screen. One of the ways I think that should be possible is using Windows' GDI functions such as <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/wingdi/nf-wingdi-createcompatibledc\" rel=\"nofollow noreferrer\">CreateCompatibleDC</a>. </p>\n\n<p>The problem is that when I try to run it, I get error message: \n\"\nC:\\Users\\Myname\\AppData\\Local\\Temp\\cce0hZ9w.o   Screencapture_example.cpp:(.text+0x30): undefined reference to `__imp_CreateCompatibleDC'\n\"</p>\n\n<p>So it looks like the library containing the function is not present or not included. However I did include windows.h and wingdi.h, and according to the page in the link given above, the function is part of wingdi.h. </p>\n\n<p>It also says it requires library Gdi32.lib which I can't find anywhere on my computer. However there is a file called libgdi32.a, which sits in the folder C:\\Programfiles\\Dev-Cpp\\MinGW64\\x86_64-w64-mingw32\\lib. I downloaded the gdi32.lib and added it to the same folder. The error message is unchanged when I recompile.</p>\n\n<p>That folder is included in the libraries section of the Dev-C++ editor, which uses the gcc compiler. My operating system is Windows 10.</p>\n\n<pre><code>#include&lt;windows.h&gt;\n#include&lt;wingdi.h&gt;\nint main(int argc,char *argv[]){\n\nHDC hdc = GetDC(NULL); // get the desktop device context\nHDC hDest = CreateCompatibleDC(hdc); // create a device context to use yourself\n\n//More to come here but I don't want to complicate it too much before\n//I get it to work this far.\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "struct", "dll", "char"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1570641966, "post_id": 58309191, "comment_id": 102980139, "body": "Include output as properly formatted text in the question, not as external link or image."}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1570642217, "post_id": 58309191, "comment_id": 102980255, "body": "What is &quot;testDll.Skuska&quot; in the Python code? One error is that the C++ structs contain fixed length char arrays while corresponding ctypes structs have char pointers instead."}, {"owner": {"reputation": 31, "user_id": 11262515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5994a92b7535367cc3f0b669b0ba4bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/11262515/juraj"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1570655233, "post_id": 58309191, "comment_id": 102985685, "body": "I changed <code>testDll.Skuska</code> to <code>testDll.Calculation</code> (typo)."}, {"owner": {"reputation": 31, "user_id": 11262515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5994a92b7535367cc3f0b669b0ba4bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/11262515/juraj"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1570657305, "post_id": 58309191, "comment_id": 102986363, "body": "I have tried different ctypes. When I try <code>c_char * 10</code> (initialization is the same) I get an Error: <i>&quot;Exception thrown at 0x78AFEE3F (ucrtbased.dll) in python.exe: 0xC0000005: Access violation writing location 0x00000014.&quot;</i> I have also tried <code>c_byte * 10</code> (without initialization) and got the same Access violation. Also when I step into the <b>library.cpp</b> it says that the output parameter passed by reference is <code>&lt;struct at NULL&gt;</code>"}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1570667933, "post_id": 58309191, "comment_id": 102988580, "body": "The &quot;byref&quot; should only be used in calls and not as type (interesting that ctypes accepts this). Therefore argtypes should be [POINTER(OutData)] and the actual call parameter of Calculation should be byref(outData)."}, {"owner": {"reputation": 31, "user_id": 11262515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5994a92b7535367cc3f0b669b0ba4bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/11262515/juraj"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1570690780, "post_id": 58309191, "comment_id": 102994195, "body": "@MichaelButscher thank you that fixed it! It was weird to me that the byref() want an instance in the argtypes instead of Type. I posted the answer and I want to give some credit/reputation to you. How can I do that? (first time posting a question here)."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 11262515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5994a92b7535367cc3f0b669b0ba4bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/11262515/juraj"}, "is_accepted": true, "score": 0, "last_activity_date": 1570690400, "creation_date": 1570690400, "answer_id": 58317072, "question_id": 58309191, "link": "https://stackoverflow.com/questions/58309191/calling-c-dll-from-python/58317072#58317072", "title": "Calling C++ dll from python", "body": "<p>Changed the python ctypes to <code>c_char * 10</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class StructSurface(Structure):\n    _fields_ = [(\"surfReq\", c_char * 10)]\n\nclass StructGeneralData(Structure):\n    _fields_ = [(\"surface\", StructSurface),\n                (\"weight\", c_char * 10)]\n\nclass OutData(Structure):\n    _fields_ = [(\"generalData\", StructGeneralData),\n                (\"message\", c_char * 10)]\n</code></pre>\n\n<p>And changed the argtypes and actual call to</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>testDll.argtypes = [POINTER(OutData)]\ntestDll.Calculation(byref(outData))\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11262515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5994a92b7535367cc3f0b669b0ba4bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/11262515/juraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 58317072, "answer_count": 1, "score": 2, "last_activity_date": 1570690400, "creation_date": 1570641426, "last_edit_date": 1592644375, "question_id": 58309191, "link": "https://stackoverflow.com/questions/58309191/calling-c-dll-from-python", "title": "Calling C++ dll from python", "body": "<p>I have a created dll library in c++ and exported it as c type dll. The library header is this:\n<strong>library.h</strong></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Surface\n{\n    char surfReq[10];\n};\n\nstruct GeneralData\n{\n    Surface surface;\n    char weight[10];\n};\n\nstruct Output\n{\n    GeneralData generalData;\n    char message[10];\n};\nextern &quot;C&quot; __declspec(dllexport) int __cdecl Calculation(Output &amp;output);\n</code></pre>\n<p><strong>library.cpp</strong></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>int Calculation(Output &amp;output)\n{\n  strcpy_s(output.message, 10, &quot;message&quot;);\n  strcpy_s(output.generalData.weight, 10, &quot;weight&quot;);\n  strcpy_s(output.generalData.surface.surfReq, 10, &quot;surfReq&quot;);\n  return 0;\n}\n</code></pre>\n<p>Now I have this Python script:</p>\n<pre class=\"lang-py prettyprint-override\"><code>#! python3-32\nfrom ctypes import *\nimport sys, os.path\n\nclass StructSurface(Structure):\n    _fields_ = [(&quot;surfReq&quot;, c_char_p)]\n\nclass StructGeneralData(Structure):\n    _fields_ = [(&quot;surface&quot;, StructSurface),\n                (&quot;weight&quot;, c_char_p)]\n\nclass OutData(Structure):\n    _fields_ = [(&quot;generalData&quot;, StructGeneralData),\n                (&quot;message&quot;, c_char_p)]\n\nmy_path = os.path.abspath(os.path.dirname(__file__))\npath = os.path.join(my_path, &quot;../../../libs/Python.dll&quot;)\n\ntestDll = cdll.LoadLibrary(path)\n\nsurfReq = (b''*10)\nstructSurface = StructSurface(surfReq)\n\nweight = (b''*10)\nstructGeneralData = StructGeneralData(structSurface, weight)\n\nmessage = (b''*10)\noutData = OutData(structGeneralData, message) \n\ntestDll.restyp = c_int\ntestDll.argtypes = [byref(outData)]\ntestDll.Calculation(outData)\nprint(outData.message)\nprint(outData.generalData.weight)\nprint(outData.generalData.surface.surfReq)\n</code></pre>\n<p>When I print the fields from outData I get the same results in all of them:</p>\n<blockquote>\n<p>b'surfReq'</p>\n<p>b'surfReq'</p>\n<p>b'surfReq'</p>\n</blockquote>\n<p>Can you please tell me how to specify the char arrays/fields so I get the correct result. I am only allowed to change the python script.\nI called this library from C# with no problems.</p>\n"}, {"tags": ["c++", "opengl", "glm-math"], "comments": [{"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1570642523, "post_id": 58309160, "comment_id": 102980390, "body": "<i>&quot;it looks way bigger than that.&quot;</i> -- Could you explain how you came to that conclusion? What is your method for comparing the apparent size of the object in real life vs the object on your screen? What size do you expect it to be on the screen?"}, {"owner": {"reputation": 2296, "user_id": 8623159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u98OE.jpg?s=128&g=1", "display_name": "Kai Burjack", "link": "https://stackoverflow.com/users/8623159/kai-burjack"}, "edited": false, "score": 1, "creation_date": 1570647147, "post_id": 58309160, "comment_id": 102982465, "body": "Are you sure about the <code>68.4</code> degrees <i>vertical</i> field of view angle? I just measured mine <code>atan(heightOfScreen &#47; distanceToScreen)</code> and came to about 25 degrees - and that&#39;s with a 38&#39;&#39; monitor. You do realize that most if not all perspective matrix creation methods/functions use a <i>vertical</i> field of view angle and not a <i>horizontal</i> field of view angle."}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1570647372, "post_id": 58309160, "comment_id": 102982561, "body": "@Romen Just by simply comparing it. I expect some coefficient that is dependent on the screen size(real world measurements)"}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1570647396, "post_id": 58309160, "comment_id": 102982580, "body": "@t.niese What do you mean?"}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "reply_to_user": {"reputation": 2296, "user_id": 8623159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u98OE.jpg?s=128&g=1", "display_name": "Kai Burjack", "link": "https://stackoverflow.com/users/8623159/kai-burjack"}, "edited": false, "score": 0, "creation_date": 1570647663, "post_id": 58309160, "comment_id": 102982699, "body": "@httpdigest I measured my view angle using arcsin not arctan with arctan I get 42&#176;"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1570647947, "post_id": 58309160, "comment_id": 102982821, "body": "@user11914177, Please humour me and try to explain <i>your method</i> for &quot;simply comparing it&quot;. A formally defined approach to comparing an on-screen size to the real-life size you perceive will give us a framework to determine what the <i>correct</i> coefficient will be."}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1570648215, "post_id": 58309160, "comment_id": 102982914, "body": "@Romen I laid down a one meter long ruler 3 meters away from my eyes. I remembered that size and then compared it to my program running on fullscreen on a 13&quot; and 26&quot; monitor."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1570648314, "post_id": 58309160, "comment_id": 102982959, "body": "@user11914177, How far away was your eye from the monitors you checked? Are you able to estimate a factor representing the difference you <i>did</i> see? Are you expecting the object on the screen to appear the same apparent size as in real-life, <b>or</b>, are you expecting it to occupy the same percentage of the field-of-vision (on screen) as it does in real life?"}, {"owner": {"reputation": 2296, "user_id": 8623159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u98OE.jpg?s=128&g=1", "display_name": "Kai Burjack", "link": "https://stackoverflow.com/users/8623159/kai-burjack"}, "edited": false, "score": 0, "creation_date": 1570648537, "post_id": 58309160, "comment_id": 102983068, "body": "I propose a different way: measure the distance from your eye to the screen along a line that is perpendicular to the screen surface (call the intersection point with the screen and that line <code>P</code>), as well as measure the left, right, bottom and top distances from that point <code>P</code> to the respective edge of the screen. Feeding this into glFrustum (or the matrix/vector library equivalent of that) will give you 100% accurate scales. I really suspect something wrong with your angle measurements."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 2296, "user_id": 8623159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u98OE.jpg?s=128&g=1", "display_name": "Kai Burjack", "link": "https://stackoverflow.com/users/8623159/kai-burjack"}, "edited": false, "score": 1, "creation_date": 1570648644, "post_id": 58309160, "comment_id": 102983116, "body": "@httpdigest, There may be a fundamental problem with the question here that has nothing to do with the code. If I have a 3m wide TV, should the cube be rendered at 100% the width of the TV when viewed from <i>any distance</i>? If not, then there are real-life factors that make this problem impossible to solve without head-tracking."}, {"owner": {"reputation": 2296, "user_id": 8623159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u98OE.jpg?s=128&g=1", "display_name": "Kai Burjack", "link": "https://stackoverflow.com/users/8623159/kai-burjack"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1570648762, "post_id": 58309160, "comment_id": 102983175, "body": "@Romen yepp, I absolutely agree to that! If he/she moves his/her head, then the measurements will of course be wrong/off. But I was hoping that the OP knew that and he/she kept the head stationary (as best as possible)."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1570648943, "post_id": 58309160, "comment_id": 102983253, "body": "@user11914177, To reiterate my question in the comment above. How big should the cube appear on a TV that is 1 metre wide when the user stands 3m away from the TV? Should it fill 100% of the width of the TV?"}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1570649012, "post_id": 58309160, "comment_id": 102983279, "body": "@Romen My 13&quot; monitor is 58cm away from my eyes the 26&quot; monitor is 70cm away. As you may have noticed, I have measured my view angle wrongly. With my correct view angle it looks better on both screens. I expect to occupy the same percentage of space."}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "reply_to_user": {"reputation": 2296, "user_id": 8623159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u98OE.jpg?s=128&g=1", "display_name": "Kai Burjack", "link": "https://stackoverflow.com/users/8623159/kai-burjack"}, "edited": false, "score": 0, "creation_date": 1570649158, "post_id": 58309160, "comment_id": 102983336, "body": "@httpdigest How to feed the information in?"}, {"owner": {"reputation": 2296, "user_id": 8623159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u98OE.jpg?s=128&g=1", "display_name": "Kai Burjack", "link": "https://stackoverflow.com/users/8623159/kai-burjack"}, "edited": false, "score": 0, "creation_date": 1570649408, "post_id": 58309160, "comment_id": 102983438, "body": "@user11914177 what do you mean, how to feed it in? You already use some <code>projection = infinitePerspective(...)</code> function to calculate a symmetric perspective projection matrix with some gluPerspective() equivalent in the math library you use. So just use the glFrustum equivalent in that math library and then upload the matrix to OpenGL in the same way as you already do."}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "reply_to_user": {"reputation": 2296, "user_id": 8623159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u98OE.jpg?s=128&g=1", "display_name": "Kai Burjack", "link": "https://stackoverflow.com/users/8623159/kai-burjack"}, "edited": false, "score": 0, "creation_date": 1570649617, "post_id": 58309160, "comment_id": 102983523, "body": "@httpdigest Yes, but how to use the four lengths measured? How do you get them into <code>infinitePerspective(...)</code>?"}, {"owner": {"reputation": 2296, "user_id": 8623159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u98OE.jpg?s=128&g=1", "display_name": "Kai Burjack", "link": "https://stackoverflow.com/users/8623159/kai-burjack"}, "edited": false, "score": 0, "creation_date": 1570650169, "post_id": 58309160, "comment_id": 102983760, "body": "You don&#39;t. You use some other function which is like glFrustum. You do <i>not</i> use the function taking an angle."}], "answers": [{"tags": [], "owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "is_accepted": true, "score": 0, "last_activity_date": 1570708424, "creation_date": 1570708424, "answer_id": 58322318, "question_id": 58309160, "link": "https://stackoverflow.com/questions/58309160/how-to-scale-things-in-opengl-to-real-sizes/58322318#58322318", "title": "How to scale things in OpenGL to real sizes?", "body": "<p>As it turns out, a real scale is impossible. But with the right view angle it looks good.</p>\n"}], "owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 58322318, "answer_count": 1, "score": 0, "last_activity_date": 1570708424, "creation_date": 1570641269, "last_edit_date": 1570648332, "question_id": 58309160, "link": "https://stackoverflow.com/questions/58309160/how-to-scale-things-in-opengl-to-real-sizes", "title": "How to scale things in OpenGL to real sizes?", "body": "<p>I am trying to make a program in OpenGL 3.3. Everything is working, but the problem is that everything looks too small. I measured out my field of view in real life and I came to the result of 46.9\u00b0. So I applied that to my projection matrix like this:</p>\n\n<pre><code>projection = infinitePerspective(radians(46.9f), float(windowWidth) / float(windowHeight), 0.005f);\n</code></pre>\n\n<p>but it hasn't helped much. </p>\n\n<p>I made a screenshot for you that shows a one by one by one meter cube that is 3 meters away from the camera:\n<a href=\"https://i.stack.imgur.com/t7gHE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t7gHE.jpg\" alt=\"Cube 3 meters away\"></a></p>\n\n<p>If I measure out one meter in real life and view it from three meters away it looks way bigger than that. Is there some coefficient needed to scale everything, so that it looks real?</p>\n"}, {"tags": ["c++", "file", "text"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1570641349, "post_id": 58309144, "comment_id": 102979825, "body": "Are you allowed to use <code>std::string</code> and <code>std::vector</code>?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1570641449, "post_id": 58309144, "comment_id": 102979868, "body": "Read the old file into memory. Do whatever transformation you need to do to the in-memory representation. Write the result to a temporary file. Rename the temporary file to the name of the original file (thus replacing it). Done."}], "owner": {"reputation": 21, "user_id": 12190236, "user_type": "registered", "profile_image": "https://graph.facebook.com/10220029415996724/picture?type=large", "display_name": "adymock94", "link": "https://stackoverflow.com/users/12190236/adymock94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1594024918, "creation_date": 1570641184, "last_edit_date": 1594024918, "question_id": 58309144, "link": "https://stackoverflow.com/questions/58309144/c-how-to-modify-contents-of-a-text-file", "title": "C++ How to modify contents of a text file?", "body": "<p>For apart of my C++ assignment, I have been told to create a program that can output a diamond to the screen with a user specified character and number of rows. The results then need to be stored in a text file, which I have completed. Next I have been asked to find a way to modify the existing text file with the resulted outputs of the diamonds to allow for the characters of the diamonds to be modified. I have been told to use direct binary access to find and change the characters stored in the file containing the diamonds but am at a loss of how to do it.</p>\n\n<p>Any help is appreciated :)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nvoid diamond(int n, char c);\nint main()\n{\nint a, b, e, d = 1;\nchar c;\n\ncout &lt;&lt; \"Enter a single character:\" &lt;&lt; endl;\ncin &gt;&gt; c;\n\ncout &lt;&lt; \"Enter amount of rows:\" &lt;&lt; endl;\ncin &gt;&gt; a;\n\n//File output to text file code is shown below\n//After program is run, the variable info is stored in output.txt\n\nofstream file; //Output stream\nfile.open(\"output.txt\", ofstream::app); //Opened in append mode to prevent it from overwriting the files contents each time\n\nif (!file) {\n    file &lt;&lt; \"Unable to open file.\" &lt;&lt; endl;\n    return 1;\n}\n\nif (file.is_open()) {\n    file &lt;&lt; \"The character that was entered is \";\n    file &lt;&lt; c;\n    file &lt;&lt; \" \";\n    file &lt;&lt; \"and the number of rows that were specified is \";\n    file &lt;&lt; a;\n    file &lt;&lt; \".\\n\\n\";\n}\n\nd = a - 1;\n\nfor (e = 1; e &lt;= a; e++)\n\n{\n    for (b = 1; b &lt;= d; b++)\n        file &lt;&lt; \" \";\n    d--;\n\n    for (b = 1; b &lt;= 2 * e - 1; b++)\n        file &lt;&lt; c;\n\n    file &lt;&lt; \"\\n\";\n}\n\nd = 1;\nfor (e = 1; e &lt;= a; e++)\n{\n\n    for (b = 1; b &lt;= d; b++)\n        file &lt;&lt; \" \";\n    d++;\n\n    for (b = 1; b &lt;= 2 * (a - e) - 1; b++)\n        file &lt;&lt; c;\n    file &lt;&lt; \"\\n\";\n\n}\n\nfile.close();\nstd::cin.get(); //Prints variables and diamonds to file, please check output.txt for results\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "sdl-2", "sdl-image"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1570649128, "post_id": 58309097, "comment_id": 102983323, "body": "And you&#39;ve verified (with a debugger/<code>printf()</code>/etc.) that <code>img</code> &amp; <code>texture</code> are non-NULL?"}, {"owner": {"reputation": 11, "user_id": 12190234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11803b6a3eba31c247fc62568f19527?s=128&d=identicon&r=PG&f=1", "display_name": "axilirate", "link": "https://stackoverflow.com/users/12190234/axilirate"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1570681934, "post_id": 58309097, "comment_id": 102991364, "body": "<code>int img_flag = IMG_INIT_PNG; \t\tif (!(IMG_Init(img_flag) &amp; img_flag)) { \t\t\tstd::cout &lt;&lt; &quot;error&quot;; \t\t};</code> Outputs an error."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12190234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11803b6a3eba31c247fc62568f19527?s=128&d=identicon&r=PG&f=1", "display_name": "axilirate", "link": "https://stackoverflow.com/users/12190234/axilirate"}, "is_accepted": false, "score": 1, "last_activity_date": 1570699412, "creation_date": 1570699412, "answer_id": 58319593, "question_id": 58309097, "link": "https://stackoverflow.com/questions/58309097/sdl-texture-from-img-load-fails-to-draw/58319593#58319593", "title": "SDL_Texture from IMG_Load() fails to draw?", "body": "<p>Had to include zlib1.dll and libpng16-16.dll to the same folder as the cpp.</p>\n\n<p>libpng16-16.dll depends on zlib1.dll.</p>\n"}], "owner": {"reputation": 11, "user_id": 12190234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11803b6a3eba31c247fc62568f19527?s=128&d=identicon&r=PG&f=1", "display_name": "axilirate", "link": "https://stackoverflow.com/users/12190234/axilirate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570699412, "creation_date": 1570640928, "last_edit_date": 1570644180, "question_id": 58309097, "link": "https://stackoverflow.com/questions/58309097/sdl-texture-from-img-load-fails-to-draw", "title": "SDL_Texture from IMG_Load() fails to draw?", "body": "<p>The only thing I see is the RenderDrawColor.</p>\n\n<p>Also the \"circle.png\" is in the right folder (where the main.cpp is).</p>\n\n<pre><code>#include &lt;SDL.h&gt;\n#include &lt;SDL_Image.h&gt;\n\nint main(int argc,char* args[]) {\n    SDL_Init(SDL_INIT_EVERYTHING);\n    IMG_Init(IMG_INIT_PNG);\n    SDL_Window* window = SDL_CreateWindow(\"_\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 640, 480, SDL_WINDOW_SHOWN);\n    SDL_Renderer* render = SDL_CreateRenderer(window, -1, SDL_RENDERER_ACCELERATED);\n    SDL_SetRenderDrawColor(render,0, 255, 255, 255);\n    SDL_Surface* img = IMG_Load(\"circle.png\");\n    SDL_Texture* texture = SDL_CreateTextureFromSurface(render, img);\n    SDL_FreeSurface(img);\n\n    SDL_Event event;\n    while (1) {\n        while (SDL_PollEvent(&amp;event)) {\n            switch (event.type) {\n            case SDL_QUIT:\n                return 0;\n            }\n        }\n    SDL_RenderClear(render);\n    SDL_RenderCopy(render, texture, NULL, NULL);\n    SDL_RenderPresent(render);\n    }\n\n    system(\"PAUSE\");\n    return 0;\n}   \n</code></pre>\n"}, {"tags": ["c++", "json", "boost"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1570639881, "post_id": 58308727, "comment_id": 102979175, "body": "Once you retrieved the info from the file, there is no JSON involved anymore, so you can remove that from your question. Also, you could reduce your code to something closer to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which would also make sure that you really know what&#39;s in the property tree."}, {"owner": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "edited": false, "score": 0, "creation_date": 1570639975, "post_id": 58308727, "comment_id": 102979214, "body": "Using BOOST_FOREACH is a really old way. C++11 provides range-based for. However, it seems that that is not the main issue."}, {"owner": {"reputation": 101, "user_id": 12189215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491a34cbf388334bbb3ec4cab1ce69ba?s=128&d=identicon&r=PG&f=1", "display_name": "cesare borgia", "link": "https://stackoverflow.com/users/12189215/cesare-borgia"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1570640117, "post_id": 58308727, "comment_id": 102979273, "body": "@UlrichEckhardt honestly, if i knew how to make it simpler, i would; i can start with the comments i guess?"}, {"owner": {"reputation": 101, "user_id": 12189215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491a34cbf388334bbb3ec4cab1ce69ba?s=128&d=identicon&r=PG&f=1", "display_name": "cesare borgia", "link": "https://stackoverflow.com/users/12189215/cesare-borgia"}, "reply_to_user": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "edited": false, "score": 0, "creation_date": 1570640418, "post_id": 58308727, "comment_id": 102979395, "body": "@yumetodo my problem is that the subtree is not recognized as a node and i don&#39;t understand why not"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1570640471, "post_id": 58308727, "comment_id": 102979422, "body": "Well, your topic says &quot;reading nested JSON&quot;. Did that part succeed? If yes, then there&#39;s some way to improve this question. Also, where exactly is that exception thrown? On which iteration?"}, {"owner": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "edited": false, "score": 0, "creation_date": 1570640580, "post_id": 58308727, "comment_id": 102979472, "body": "reproduced: <a href=\"https://wandbox.org/permlink/Q79hq9lz9UUpY92N\" rel=\"nofollow noreferrer\">wandbox.org/permlink/Q79hq9lz9UUpY92N</a> (note: rewrite with C++11 range-based for, use pt::path to avoid delimit key, use C++17 maybe_unsed attribute to disable warning)"}], "answers": [{"tags": [], "owner": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "is_accepted": true, "score": 1, "last_activity_date": 1570641202, "creation_date": 1570641202, "answer_id": 58309148, "question_id": 58308727, "link": "https://stackoverflow.com/questions/58308727/reading-nested-json-file-w-boost/58309148#58309148", "title": "reading nested json file w/ boost", "body": "<p>Finally, I got it that your <code>get_child</code> usage is not correct! Just pass the tree to range-based for.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;boost/property_tree/json_parser.hpp&gt;\n#include &lt;boost/property_tree/ptree.hpp&gt;\n#include &lt;boost/foreach.hpp&gt;\n#include &lt;iostream&gt;\n\nnamespace pt = boost::property_tree;\n\npt::ptree tree;\n\nint main() {\n\n    pt::read_json(\"bla.json\", tree);\n\n    for(auto&amp;&amp; v : tree.get_child(\"ABC\")) {\n        const std::string &amp; key = v.first; // key\n        const pt::ptree &amp; subtree = v.second; // value (or a subnode)\n        //const pt::ptree &amp; subsubtree = v.second; // value (or a subnode)\n        std::cout &lt;&lt; key &lt;&lt; std::endl;\n        if(subtree.empty()) {\n            // This is a key:value\n            //  use subtree.data() as string value or subtree.get_value&lt;T&gt;()\n            std::cout &lt;&lt; \"subtree empty\" &lt;&lt; std::endl;\n            } else {\n            // This is a subtree\n            //  use subtree as child\n            std::cout &lt;&lt; \"subtree not empty\" &lt;&lt; std::endl;\n\n            for(auto&amp;&amp; sv : subtree/*.get_child(pt::path(key, '\\0'))*/) {\n                [[maybe_unused]]const std::string &amp; subkey = sv.first; // key\n                const pt::ptree &amp; subsubtree = sv.second; // value (or a subnode)\n                std::cout &lt;&lt; subkey &lt;&lt; std::endl;\n                if(subsubtree.empty()) {\n                    std::cout &lt;&lt; \"subsubtree empty\" &lt;&lt; std::endl;\n                    } else {\n                    std::cout &lt;&lt; \"subsubtree not empty\" &lt;&lt; std::endl;\n                    std::cout &lt;&lt; subsubtree.data() &lt;&lt; std::endl;\n                    for(auto&amp;&amp; ssv: subsubtree) {\n                        [[maybe_unused]]const std::string &amp; subsubkey = ssv.first; // key\n                        const pt::ptree &amp; subsubsubtree = ssv.second; // value (or a subnode)\n                        std::cout &lt;&lt; subsubkey &lt;&lt; std::endl;\n                        if(subsubsubtree.empty()) {\n                            std::cout &lt;&lt; \"subsubsubtree empty\" &lt;&lt; std::endl;\n                            if (auto subsubsubtree_v = subsubsubtree.get_value_optional&lt;double&gt;()) {\n                                std::cout &lt;&lt; subsubsubtree_v.get() &lt;&lt; std::endl;\n                            }\n                        }\n                        else {\n                            std::cout &lt;&lt; \"subsubtree not empty\" &lt;&lt; std::endl;\n                            std::cout &lt;&lt; subsubtree.data() &lt;&lt; std::endl;\n                        }\n                    }\n                }\n            }\n\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/uRub7N5VeZ9WrDKd\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/uRub7N5VeZ9WrDKd</a></p>\n"}], "owner": {"reputation": 101, "user_id": 12189215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491a34cbf388334bbb3ec4cab1ce69ba?s=128&d=identicon&r=PG&f=1", "display_name": "cesare borgia", "link": "https://stackoverflow.com/users/12189215/cesare-borgia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 58309148, "answer_count": 1, "score": -1, "last_activity_date": 1570641202, "creation_date": 1570639370, "last_edit_date": 1570640164, "question_id": 58308727, "link": "https://stackoverflow.com/questions/58308727/reading-nested-json-file-w-boost", "title": "reading nested json file w/ boost", "body": "<p>I'm trying to read a JSON formatted file which is nested with the BOOST library in C++.</p>\n\n<p>I tried a couple of things, browsed through many questions in this forum, but I couldn't find anything really similar, or that would work.</p>\n\n<p>the json file im looking at has the following structure </p>\n\n<pre><code>{\n    \"ABC\": {\n        \"FF:[10.0,20.0]\": {\n            \"GHG:[-2.5,-2.0]\": {\n                \"value\": 1.1176470518112183,\n                \"error\": 0.013857235087295462\n            },\n            \"GHG:[1.566,2.0]\": {\n                \"value\": 0.9958805441856384,\n                \"error\": 0.027176504445043704\n            }\n        },\n        \"FF:[30.0,50.0]\": {\n            \"GHG:[-2.5,-2.0]\": {\n                \"value\": 1.1176470518112183,\n                \"error\": 0.013857235087295462\n            },\n            \"GHG:[2.0,2.5]\": {\n                \"value\": 1.0464363098144531,\n                \"error\": 0.061588554028766326\n            }\n        }        \n    },\n    \"ZXY\": {\n        \"FF:[10.0,20.0]\": {\n            \"GHG:[-2.5,-2.0]\": {\n                \"value\": 1.1176470518112183,\n                \"error\": 0.013857235087295462\n            },\n            \"GHG:[1.566,2.0]\": {\n                \"value\": 0.9958805441856384,\n                \"error\": 0.027176504445043704\n            }\n        },\n        \"FF:[30.0,50.0]\": {\n            \"GHG:[-2.5,-2.0]\": {\n                \"value\": 1.1176470518112183,\n                \"error\": 0.013857235087295462\n            },\n            \"GHG:[2.0,2.5]\": {\n                \"value\": 1.0464363098144531,\n                \"error\": 0.061588554028766326\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>i was trying to use the BOOST_FOREACH method as is described here:\n<a href=\"http://www.ce.unipr.it/people/medici/boost_ptree.html\" rel=\"nofollow noreferrer\">http://www.ce.unipr.it/people/medici/boost_ptree.html</a></p>\n\n<pre><code>#include &lt;boost/property_tree/json_parser.hpp&gt;\n#include &lt;boost/property_tree/ptree.hpp&gt;\n#include &lt;boost/foreach.hpp&gt;\n#include &lt;iostream&gt;\n\nnamespace pt = boost::property_tree;\n\npt::ptree tree;\n\nint main() {\n\n    pt::read_json(\"bla.json\", tree);\n\n    BOOST_FOREACH(  pt::ptree::value_type const&amp;v, tree.get_child(\"ABC\") ) {\n        const std::string &amp; key = v.first;\n        const pt::ptree &amp; subtree = v.second; \n        //const pt::ptree &amp; subsubtree = v.second;\n        std::cout &lt;&lt; key &lt;&lt; std::endl;\n        if(subtree.empty()) {\n            std::cout &lt;&lt; \"subtree empty\" &lt;&lt; std::endl;\n            } else {\n            std::cout &lt;&lt; \"subtree not empty\" &lt;&lt; std::endl;\n\n            BOOST_FOREACH(  pt::ptree::value_type const&amp;sv, subtree.get_child(key) ) {\n                const std::string &amp; subkey = sv.first; // key\n                const pt::ptree &amp; subsubtree = sv.second; // value (or a subnode)\n                if(subsubtree.empty()) {\n                    std::cout &lt;&lt; \"subsubtree empty\" &lt;&lt; std::endl;\n                    } else {\n                    std::cout &lt;&lt; \"subsubtree not empty\" &lt;&lt; std::endl;\n                    std::cout &lt;&lt; subsubtree.data() &lt;&lt; std::endl;\n                }\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>but i always get an error that there's no such node:</p>\n\n<pre><code>terminate called after throwing an instance of 'boost::wrapexcept&lt;boost::property_tree::ptree_bad_path&gt;'\n  what():  No such node (FF:[10.0,20.0])\nAborted \n</code></pre>\n\n<p>i'm pretty sure this is not a hard problem, but i'm kind of a newbie with c++ and i really appreciate any help!</p>\n"}, {"tags": ["c++", "for-loop"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1570638165, "post_id": 58308318, "comment_id": 102978425, "body": "All iterators are required allow <code>++it</code> so <code>next</code> is an unneeded abstraction."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1570638178, "post_id": 58308318, "comment_id": 102978432, "body": "I dont really understand the question. You seem to have already a solution to do what you want in <code>operator++</code> ..."}, {"owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570638256, "post_id": 58308318, "comment_id": 102978480, "body": "@NathanOliver why unneeded? is a zero cost abstraction that could have been used as a customization point"}, {"owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1570638345, "post_id": 58308318, "comment_id": 102978520, "body": "@formerlyknownas_463035818 because I am providing the full code to make things clearer, but I actually cannot modify the operator++ itself since is third party stuff"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1570638349, "post_id": 58308318, "comment_id": 102978523, "body": "A function call is not zero cost.  <i>why unneeded?</i> Because ranged based for loops were built to use iterators and all iterators are required to support <code>++it</code>."}, {"owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570638477, "post_id": 58308318, "comment_id": 102978575, "body": "@NathanOliver it has indeed zero cost if it is inlined and by default calling <code>operator++</code>, there would be no different in the generated assembly between calling <code>std::next</code> or calling <code>operator++</code> directly."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570638528, "post_id": 58308318, "comment_id": 102978602, "body": "Sure, if it is inlined.  There is no guarantee that it will be though."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1570638639, "post_id": 58308318, "comment_id": 102978648, "body": "what is the actual goal of this? I mean you can do whatever you want to add in <code>next</code> in the last line of the loop, I know its not what you want, but what exactly do you want?"}, {"owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570638903, "post_id": 58308318, "comment_id": 102978774, "body": "@NathanOliver any decent compiler is basically doing that already for <code>std::begin</code> and <code>std::end</code>, I still see this as a missing customization point for no good reason. There are popular talks around like &quot;free your functions&quot; by Klaus Iglberger, and then the standard is by default calling a member operator? I do not get it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1570639022, "post_id": 58308318, "comment_id": 102978821, "body": "@nyarlathotep108 <code>std::begin</code> and <code>std::end</code> are not used, unless the range is not an array and does not provide member begin and end.  If it is a container then <code>begin</code> and <code>end</code> are called directly.  This goes along perfectly with why <code>next</code>/<code>advance</code> is not used.  This is supposed to fast as possible and an extra function call could make it slower."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570641630, "post_id": 58308318, "comment_id": 102979958, "body": "@NathanOliver Let&#39;s not pretend the standard cares about debug build performance. Most of this stuff is zero cost abstraction under optimizations, but I disagree that &quot;it might not be optimized away even though it is trivial&quot; is a successful argument for or against any of the iterator abstractions or <code>std::next</code>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1570641930, "post_id": 58308318, "comment_id": 102980116, "body": "@nyarlathotep108 If you cannot modify <code>operator++</code> for a type that is not yours then it would also not be &quot;correct&quot; to use <code>std::next</code> as customization point for it. It&#39;s not your type, so it&#39;s not yours to specialize operations for. Unlike messing with <code>namespace std</code> in the wrong way it wouldn&#39;t be straight up UB, but it&#39;s definitely fragile and bad practice."}, {"owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570699715, "post_id": 58308318, "comment_id": 102998613, "body": "@NathanOliver you are right and my assumption was definitely wrong: by default, range-for-loop will look for member function <code>.begin()</code> and <code>.end()</code> and only in case they are not found it will look for free functions. But I do not think this design choice has anything to do with performances."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1570638556, "post_id": 58308506, "comment_id": 102978613, "body": "The question is why?  This doesn&#39;t answer that"}, {"owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "edited": false, "score": 0, "creation_date": 1570638599, "post_id": 58308506, "comment_id": 102978629, "body": "This is clear in the question as well, but why should not take advantage since <code>std::next</code> is in STL as well? It is indeed using <code>std::begin</code> and <code>std::end</code>, why not <code>std::next</code>?"}, {"owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "edited": false, "score": 0, "creation_date": 1570639262, "post_id": 58308506, "comment_id": 102978908, "body": "Now I am commenting your updated answer: yes, indeed <code>std::next</code> is doing redundant stuff, but it has been introduced together with the range based for loop in C++11, I still see both (1) no reason why <code>std::next</code> signature is done that way (compared for example to <code>std::advance</code> which is way more generic) and still (2) why it is then not used by default."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1570694748, "last_edit_date": 1570694748, "creation_date": 1570638511, "answer_id": 58308506, "question_id": 58308318, "link": "https://stackoverflow.com/questions/58308318/range-for-loops-not-using-stdnext-by-default/58308506#58308506", "title": "Range-for loops not using std::next by default?", "body": "<p>The range-based for loop does not use function next.</p>\n\n<p>It is defined the following way</p>\n\n<pre><code>{\n    auto &amp;&amp;__range = for-range-initializer ;\n    auto __begin = begin-expr ;\n    auto __end = end-expr ;\n    for ( ; __begin != __end; ++__begin ) {\n        for-range-declaration = *__begin;\n            statement\n    }\n}\n</code></pre>\n\n<p>The general function <code>std::next</code> does not return a reference to the source iterator</p>\n\n<pre><code>template &lt;class InputIterator&gt;\nconstexpr InputIterator next(InputIterator x,\n                             typename iterator_traits&lt;InputIterator&gt;::difference_type n = 1);\n</code></pre>\n\n<p>Its usage is the same as</p>\n\n<blockquote>\n  <p>6 Effects: Equivalent to: advance(x, n); return x;</p>\n</blockquote>\n\n<p>Using this function the loop would look like</p>\n\n<pre><code>for ( ; __begin != __end; __begin = next( __begin ) )\n</code></pre>\n\n<p>that produces a redundant code.</p>\n\n<p>As for the general functions std::next and std::prev then they are intentially designed to create a new iterator without changing the original iterator.</p>\n\n<p>Consider for example the following if statement</p>\n\n<pre><code>if ( *current == *std::next( current ) ) /*...*/;\n</code></pre>\n\n<p>If the function <code>std::next</code> would return a reference to the original iterator then the if expression had undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570641394, "post_id": 58309156, "comment_id": 102979841, "body": "Doesn&#39;t this (sadly) need like 20 more lines of boilerplate iterator facade? Not faulting you for not reciting that incantation here, but it should probably be mentioned more explicitly..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570643995, "post_id": 58309156, "comment_id": 102981043, "body": "@MaxLanghof sry,  don&#39;t understand what you mean. Its only meant to be used inside the range based for loop,  where nobody gets to see the iterators. No,  actually it is meant to demonstrate that it requires too much boilerplate the be really useful in practice;)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570692973, "post_id": 58309156, "comment_id": 102995158, "body": "Well someone might try and use this with a <code>std::algorithm</code> (why not?), in which case the lack of iterator tags and such might be problematic. But true, if we assume that it&#39;ll only ever be used in a range-for, this should be sufficient."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1570641424, "last_edit_date": 1570641424, "creation_date": 1570641245, "answer_id": 58309156, "question_id": 58308318, "link": "https://stackoverflow.com/questions/58308318/range-for-loops-not-using-stdnext-by-default/58309156#58309156", "title": "Range-for loops not using std::next by default?", "body": "<blockquote>\n  <p>Any idea why this decision has been made?</p>\n</blockquote>\n\n<p>Nope.</p>\n\n<blockquote>\n  <p>And any idea how could I inject my code right before every call to operator++() then?</p>\n</blockquote>\n\n<p>You can write a container wrapper that has a <code>begin</code> and <code>end</code> that returns some wrapped iterator, that decorates the <code>operator++</code>. It requires lots of boiler plate, and to be honest I am not sure if it is worth the effort when you can achieve the same effect with a non-range-based loop and zero boilerplate. Anyhow here you go:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\ntemplate &lt;typename C,typename F&gt;\nstruct container_wrapper {\n    template &lt;typename iterator&gt;\n    struct iterator_wrapper {\n        iterator base;\n        F func;\n        typename std::iterator_traits&lt;iterator&gt;::value_type operator*() { \n             return *base;\n        }\n        iterator_wrapper&amp; operator++() {\n            func();\n            ++base;\n            return *this;\n        }\n        bool operator !=(const iterator_wrapper&amp; other) { \n             return base != other.base; \n        }\n    };\n    C&amp; container;\n    F func;\n    iterator_wrapper&lt;typename C::iterator&gt; begin() { return iterator_wrapper&lt;typename C::iterator&gt;{ container.begin(),func }; }\n    iterator_wrapper&lt;typename C::iterator&gt; end() { return iterator_wrapper&lt;typename C::iterator&gt; { container.end(),func }; }\n};\n\ntemplate &lt;typename C,typename F&gt;\ncontainer_wrapper&lt;C,F&gt; make_container_wrapper(C&amp; c, F f) { return {c,f}; }\n\nint main(){\n    std::vector&lt;int&gt; x{ 1,2,3,4,5,6};\n    for (const auto&amp; x : make_container_wrapper(x,[](){std::cout &lt;&lt; \"\\n\";})) {\n        std::cout &lt;&lt; x;\n    }\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1\n2\n3\n4\n5\n6\n</code></pre>\n\n<p>You can pass a lambda as second parameter that is executed before incrementing. </p>\n\n<p>PS: The above should work in C++11, while in newer standards it might be a tiny bit simpler (eg you wouldnt need a <code>make_..</code> helper function for deduction).</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1570641516, "creation_date": 1570641516, "answer_id": 58309209, "question_id": 58308318, "link": "https://stackoverflow.com/questions/58308318/range-for-loops-not-using-stdnext-by-default/58309209#58309209", "title": "Range-for loops not using std::next by default?", "body": "<blockquote>\n  <p>Any idea why this decision has been made?</p>\n</blockquote>\n\n<p>Because forward iterators need to implement <code>operator++(int)</code> and <code>operator++()</code> properly. It's in the standard, that's what makes a forward iterator, well, a forward iterator. <code>std::next</code> is not a customization point. It provides an alternative way of getting a new instance of the pseudo-iterator object, usually when the pseudo-iterator either is not a class, or doesn't provide operators, or has no methods, etc. If the \"pseudo\"-iterator object type itself provides the increment operator, then it cannot be safely treated like a pseudo-iterator. It must either adhere to the contract of the relevant iterator, or you must not use it like it was an iterator: <strong>it isn't!</strong> Instead, provide a wrapper. Merely providing <code>next</code> as a \"customization\" is likely not enough, so the design prevents you from assuming that it's enough: you have to do more work anyway, since you need to examine the pseudo-iterator object's API to wrap it.</p>\n\n<blockquote>\n  <p>And any idea how could I inject my code right before every call to operator++() then?</p>\n</blockquote>\n\n<p>Use your own iterators. They can wrap whatever pseudo-iterator object is provided by the third-party library you're using.</p>\n\n<p>The main problem with such customization points is that not only range-for would be using them, so whatever side effects you wish to add for the purpose of range-for, will break other things, and quite possibly you'll have large projects with hundreds of latent bugs that way, and unrelated changes will make the whole thing blow up.</p>\n\n<p>The wrapper class should provide the functionality that's needed, and then if some new use case comes up, it won't compile, and the wrapper will have to be extended. This way the latent bugs won't be a problem (assuming that you have sufficient coverage in the unit tests for the wrapper).</p>\n\n<p>It's clear that whatever the third-party object returns as its \"iterator\" is not really the iterator you want. Thus wrap it so that it works for you. It's really easy.</p>\n"}], "owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1570694748, "creation_date": 1570637789, "question_id": 58308318, "link": "https://stackoverflow.com/questions/58308318/range-for-loops-not-using-stdnext-by-default", "title": "Range-for loops not using std::next by default?", "body": "<p>I am surprised that by default a range-based for loop is missing the customization point of calling <code>std::next</code> on the iterator returned by <code>std::begin</code> and is instead directly calling <code>operator++()</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct Iterator {\n    Iterator&amp; operator++()\n    {\n        cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; endl;\n        ++i;\n        return *this;\n    }\n\n    int operator*()\n    {\n        return i;\n    }\n\n    int i;\n};\n\nbool operator!=(const Iterator&amp; lhs, const Iterator&amp; rhs)\n{\n    return lhs.i != rhs.i;\n}\n\nIterator&amp; next(Iterator&amp; it)\n{\n    // this is where I need to injext my code :/\n    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; endl;\n    return ++it;\n}\n\nstruct Container {\n\n    Iterator begin() { return { 0 }; }\n    Iterator end() { return { 10 }; }\n};\n\nint main()\n{\n    Container con;\n\n    for (const auto&amp; elem : con) {\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Any idea why this decision has been made? And any idea how could I inject my code right before every call to <code>operator++()</code> then?</p>\n"}, {"tags": ["c++", "arrays", "string", "loops", "char"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1570637845, "post_id": 58308310, "comment_id": 102978297, "body": "I assume you are not permitted to use <code>std::string</code> and you are stuck with character arrays and VLAs that are illegal in standard <code>c++</code>."}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "edited": false, "score": 0, "creation_date": 1570638012, "post_id": 58308310, "comment_id": 102978360, "body": "There are loads of things you can do better to improve your code but if you just want it working; you wrote <code>normal[i] = reverse[a-i]</code> in reverse. Instead it should be <code>reverse[a-i]=normal[i]</code>"}, {"owner": {"reputation": 159, "user_id": 12189862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saRhp.png?s=128&g=1", "display_name": "Hibou", "link": "https://stackoverflow.com/users/12189862/hibou"}, "reply_to_user": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "edited": false, "score": 0, "creation_date": 1570638210, "post_id": 58308310, "comment_id": 102978454, "body": "@lucieon it works perfectly thank you. What can I do to improve my code ?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 3, "creation_date": 1570638598, "post_id": 58308310, "comment_id": 102978628, "body": "BTW, <code>char normal[a]</code> is a VLA and not standard C++; your compiler may have an extension for it.  For dynamic arrays, either use <code>new</code> or use <code>std::vector</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1570638683, "post_id": 58308310, "comment_id": 102978672, "body": "You will need to use <code>std::getline(cin,...)</code> to limit the number of letters input.  Otherwise, your character array may be overwritten beyond its capacity."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1570638778, "post_id": 58308310, "comment_id": 102978722, "body": "Before printing a character array, verify that the last character is a <code>&#39;\\0&#39;</code>, or terminating nul character.  Otherwise the <code>std::cout</code> will print characters until it finds one (could access memory beyond your program)."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1570639194, "post_id": 58308310, "comment_id": 102978880, "body": "<a href=\"https://en.cppreference.com/w/cpp/algorithm/reverse\" rel=\"nofollow noreferrer\">std::reverse</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1570639254, "post_id": 58308601, "comment_id": 102978906, "body": "Just use <a href=\"https://en.cppreference.com/w/cpp/algorithm/reverse\" rel=\"nofollow noreferrer\">std::reverse</a> and you are done. One line of code. Why make it complicated?"}, {"owner": {"reputation": 18, "user_id": 12190029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDGideL6pEQRs3ENAtNEY8LbWRmlD6ovMaSmC9zBg=k-s128", "display_name": "Vortexian", "link": "https://stackoverflow.com/users/12190029/vortexian"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1570648981, "post_id": 58308601, "comment_id": 102983263, "body": "@JesperJuhl I&#39;m not sure if this person is allowed to use the reverse function, as their uploaded code made it seem to me like they were asked to rewrite the function."}], "tags": [], "owner": {"reputation": 18, "user_id": 12190029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDGideL6pEQRs3ENAtNEY8LbWRmlD6ovMaSmC9zBg=k-s128", "display_name": "Vortexian", "link": "https://stackoverflow.com/users/12190029/vortexian"}, "is_accepted": false, "score": 0, "last_activity_date": 1570638829, "creation_date": 1570638829, "answer_id": 58308601, "question_id": 58308310, "link": "https://stackoverflow.com/questions/58308310/reversing-string-c/58308601#58308601", "title": "Reversing string C++", "body": "<p>Personally, I would load the input string into a char array and iterate backwards, starting at the end of the input array and just doing some index math.</p>\n\n<p>Let n = input string length</p>\n\n<p>Iterate from i = n-1 to 0, and load input[i] into reversed[n-i]. Luceion is correct; you're not doing the correct method of actually reversing input string in the first for loop.</p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 10865069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho1Cy.jpg?s=128&g=1", "display_name": "Ghazi", "link": "https://stackoverflow.com/users/10865069/ghazi"}, "is_accepted": true, "score": 1, "last_activity_date": 1570639487, "last_edit_date": 1570639487, "creation_date": 1570639121, "answer_id": 58308669, "question_id": 58308310, "link": "https://stackoverflow.com/questions/58308310/reversing-string-c/58308669#58308669", "title": "Reversing string C++", "body": "<p>You have to use constant to declare an array this way:</p>\n\n<pre><code>char normal[a]={};\nchar reverse[a]={};\n</code></pre>\n\n<p>You can allocate memory like this instead:</p>\n\n<pre><code>char* normal = (char*)calloc(a+1, sizeof(char));\nchar* reverse = (char*)calloc(a+1, sizeof(char));\n</code></pre>\n\n<p>and free it once done using it.</p>\n\n<p>The <code>+1</code> is because you have to account for the ending null char.\nI don't think letting the user account for it is a good idea unless your users will only be C-programmers... Better change <code>a = nbre-1;</code> to <code>a=nbre;</code>.</p>\n\n<p>Finally, you should have meant to write your for-loop as:</p>\n\n<pre><code>for (int i = 1; i &lt;= a; i++) {\n    reverse[i-1] = normal[a - i];\n}\n</code></pre>\n\n<p>I made many changes to your for loop. I will let you do the Homework to understand why. </p>\n"}], "owner": {"reputation": 159, "user_id": 12189862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saRhp.png?s=128&g=1", "display_name": "Hibou", "link": "https://stackoverflow.com/users/12189862/hibou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 58308669, "answer_count": 2, "score": 0, "last_activity_date": 1570639487, "creation_date": 1570637752, "question_id": 58308310, "link": "https://stackoverflow.com/questions/58308310/reversing-string-c", "title": "Reversing string C++", "body": "<p>I tried to create a code that reverse a string, I think my loops logic is correct. But I don't know what is wrong.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(){\n    std::cout&lt;&lt;\"How many letters does your string have &gt;&gt; \";\n    int nbre;\n    std::cin&gt;&gt; nbre;\n    int a;\n    a=nbre-1;            \n    char normal[a]={};\n    char reverse[a]={};\n    std::cout&lt;&lt;\"Enter your string &gt;&gt; \";\n    std::cin &gt;&gt; normal;\n    for (int i=0;i&lt;=a;i++){\n        normal[i]=reverse[a-i];\n    }\n\n    std::cout &lt;&lt; \"The reversed string is &gt;&gt; \" &lt;&lt; std::endl;\n    for (int u=0; u&lt;=a; u++){\n        std::cout&lt;&lt;reverse[u];\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/H0Ubk.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["c++", "c++14", "priority-queue", "template-specialization"], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 1, "last_activity_date": 1570637913, "creation_date": 1570637913, "answer_id": 58308347, "question_id": 58308284, "link": "https://stackoverflow.com/questions/58308284/use-default-container-but-custom-comparator-in-priority-queue/58308347#58308347", "title": "Use default container but custom comparator in priority_queue", "body": "<p>You can't. This is the same as function parameter defaults where you have to specify parameter <code>a</code> before being able to specify parameter <code>b</code> even if both have default values and you want to keep <code>a</code> as default, like:</p>\n\n<pre><code>void foo(int a = 5, int b = 42);\n</code></pre>\n\n<p>You could make a helper that creates such a queue but in the end you'll still have to specify the 2nd argument, even if you just want the default.</p>\n\n<p>Something like:</p>\n\n<pre><code>template &lt;typename T, typename Comp&gt;\nusing default_priority_queue = std::priority_queue&lt;T, std::vector&lt;T&gt;, Comp&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1570640117, "creation_date": 1570640117, "answer_id": 58308902, "question_id": 58308284, "link": "https://stackoverflow.com/questions/58308284/use-default-container-but-custom-comparator-in-priority-queue/58308902#58308902", "title": "Use default container but custom comparator in priority_queue", "body": "<p>If you are worried about explicitly mentioning <code>std::vector</code> you could write something like this:</p>\n\n<pre><code>priority_queue&lt;int, priority_queue&lt;int&gt;::container_type, decltype(cmp)&gt; my_queue(cmp);\n</code></pre>\n\n<p>though, I dont believe priority queue getting a different default container is really an issue and simply writing vector is actually shorter than that. </p>\n"}], "owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570640117, "creation_date": 1570637657, "question_id": 58308284, "link": "https://stackoverflow.com/questions/58308284/use-default-container-but-custom-comparator-in-priority-queue", "title": "Use default container but custom comparator in priority_queue", "body": "<p>Is is possible to use a <code>priority_queue</code> with the default container type, but a custom comparator?</p>\n\n<p>In other words, how do I get around specifying <code>vector</code> here?</p>\n\n<pre><code>auto cmp = [](int a, int b){ return a &gt; b; };\npriority_queue&lt;int, vector&lt;int&gt;, decltype(cmp)&gt; my_queue(cmp);\n</code></pre>\n"}, {"tags": ["c++", "for-loop", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1570640781, "post_id": 58308242, "comment_id": 102979577, "body": "<code>vec.push_back(&amp;a);</code> pushes the address of a <i>local variable</i>, that is about to go out of scope (and will then be <i>invalid</i>), into the vector. That&#39;s unlikely to be what you want."}, {"owner": {"reputation": 13, "user_id": 12189866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcd7e9f6d2e36e2b13235353e2b13882?s=128&d=identicon&r=PG&f=1", "display_name": "fluid_e3", "link": "https://stackoverflow.com/users/12189866/fluid-e3"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1570696343, "post_id": 58308242, "comment_id": 102996816, "body": "Thank you for your answer. In my code, I wanted to use this loop to replace a recursion. Instead of integer pointers, I would pushback pointers on objects. I will switch to std::stack."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1570640911, "post_id": 58308273, "comment_id": 102979631, "body": "You are ignoring the problem of putting the address of a local (soon to be dead) variable into the vector. Your answer would be better if it also addressed that."}], "tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": true, "score": 3, "last_activity_date": 1570641129, "last_edit_date": 1570641129, "creation_date": 1570637594, "answer_id": 58308273, "question_id": 58308242, "link": "https://stackoverflow.com/questions/58308242/c-segmentation-fault-while-iterating-over-vector-of-pointers-while-push-back/58308273#58308273", "title": "C++: Segmentation fault while iterating over vector of pointers while push_back", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/container/vector/push_back\" rel=\"nofollow noreferrer\"><code>push_back</code></a> invalidates the iterator when appending results in <code>size &gt; capacity</code> so it reallocates and copies to the new space.</p>\n\n<blockquote>\n  <p>Appends the given element\u00a0value\u00a0to the end of the container.</p>\n  \n  <p>1)\u00a0The new element is initialized as a copy of\u00a0value.</p>\n  \n  <p>2)\u00a0value\u00a0is moved into the new element.</p>\n  \n  <p>If the new\u00a0size()\u00a0is greater than\u00a0capacity()\u00a0then all iterators and\n  references (including the past-the-end iterator) are invalidated.\n  Otherwise only the past-the-end iterator is invalidated.</p>\n</blockquote>\n\n<p>Plus as @Jesper pointed out you are storing a reference to a local variable in your <code>vector</code>:</p>\n\n<pre><code>int a = 43; \nvec.push_back(&amp;a);\n</code></pre>\n\n<p>which  if went out of scope before your <code>vector</code> you will have dangling references.</p>\n"}], "owner": {"reputation": 13, "user_id": 12189866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcd7e9f6d2e36e2b13235353e2b13882?s=128&d=identicon&r=PG&f=1", "display_name": "fluid_e3", "link": "https://stackoverflow.com/users/12189866/fluid-e3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 58308273, "answer_count": 1, "score": 1, "last_activity_date": 1570641129, "creation_date": 1570637478, "last_edit_date": 1570637627, "question_id": 58308242, "link": "https://stackoverflow.com/questions/58308242/c-segmentation-fault-while-iterating-over-vector-of-pointers-while-push-back", "title": "C++: Segmentation fault while iterating over vector of pointers while push_back", "body": "<p>I want to iterate through a vector of pointers pointing on objects. While iterating, I have to push_back new pointers to the vector. Before the loop, the number of push_backs is unknown and there is no abort criterion, so that I can't use a while loop.</p>\n\n<p>Here is an example using pointers on integers, that shows the same error as the version with objects: Segmentation fault (core dumped) after one iteration. </p>\n\n<pre><code>vector&lt;int*&gt; vec;\nint a = 43;\nvec.push_back(&amp;a);\n\nfor (vector&lt;int*&gt;::iterator it = vec.begin(); it != vec.end(); ++it) {\n    cout &lt;&lt; *(*it) &lt;&lt; \" \" &lt;&lt; *it &lt;&lt; endl;\n    vec.push_back(&amp;a);\n}\n</code></pre>\n\n<p>The same Code but with integers works great.</p>\n\n<pre><code>vector &lt;int&gt;vec;\nint a = 43;\nvec.push_back (a);\n\nfor (vector &lt; int &gt;::iterator it = vec.begin (); it != vec.end (); ++it){\n    cout &lt;&lt; (*it) &lt;&lt; \" \" &lt;&lt; *it &lt;&lt; endl;\n    vec.push_back (a);    \n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "parameters", "alias", "pack"], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1570637926, "post_id": 58308296, "comment_id": 102978323, "body": "TIL. What a weird corner case."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570637990, "post_id": 58308296, "comment_id": 102978346, "body": "@Quentin Yeah, I didn&#39;t know this either (although it makes sense). Thankfully the compiler provided the right hint!"}, {"owner": {"reputation": 41, "user_id": 9550495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644164a3ebe38fce77abcabe1a073889?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWeaver", "link": "https://stackoverflow.com/users/9550495/codeweaver"}, "edited": false, "score": 0, "creation_date": 1570639039, "post_id": 58308296, "comment_id": 102978828, "body": "Okay, that was some impressively fast analysis.  You have my thanks.  Studying this now."}, {"owner": {"reputation": 41, "user_id": 9550495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644164a3ebe38fce77abcabe1a073889?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWeaver", "link": "https://stackoverflow.com/users/9550495/codeweaver"}, "edited": false, "score": 0, "creation_date": 1570639443, "post_id": 58308296, "comment_id": 102978988, "body": "Okay, definitely learning loads from this one question.  I didn&#39;t realize you could specialize a template (equal_type) based solely on the &#39;peeling off&#39; of a parameter like that."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 41, "user_id": 9550495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644164a3ebe38fce77abcabe1a073889?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWeaver", "link": "https://stackoverflow.com/users/9550495/codeweaver"}, "edited": false, "score": 0, "creation_date": 1570639913, "post_id": 58308296, "comment_id": 102979187, "body": "@CodeWeaver Now you have me curious how you would do the template recursion you suggested without that... I suspect you&#39;ve actually done this specialization before without realizing. ;)"}, {"owner": {"reputation": 41, "user_id": 9550495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644164a3ebe38fce77abcabe1a073889?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWeaver", "link": "https://stackoverflow.com/users/9550495/codeweaver"}, "edited": false, "score": 0, "creation_date": 1570640348, "post_id": 58308296, "comment_id": 102979375, "body": "I think I figured out where my disconnect was, though I doubt I would have ended up with as elegant a solution as Max&#39;s.  I think I got it into my head that it was the ExtractQ_t alias that wasn&#39;t properly having substituted each of the types in Ns (in EqualQ_t).    So I focussed on a failure there instead of one layer up, where my processing of a parameter pack into another parameter pack wasn&#39;t being handled by equal_type_t.  I also needed the hint about aliases not participating in template argument deduction, and that the kind of matching I was doing needed it.  Once again, thanks."}, {"owner": {"reputation": 41, "user_id": 9550495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644164a3ebe38fce77abcabe1a073889?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWeaver", "link": "https://stackoverflow.com/users/9550495/codeweaver"}, "edited": false, "score": 0, "creation_date": 1570640404, "post_id": 58308296, "comment_id": 102979393, "body": "As to template recursion... actually I was merely assuming I could.  I have no idea if I can, or what it would look like, but now you&#39;ve got me curious too. :)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 41, "user_id": 9550495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644164a3ebe38fce77abcabe1a073889?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWeaver", "link": "https://stackoverflow.com/users/9550495/codeweaver"}, "edited": false, "score": 0, "creation_date": 1570640659, "post_id": 58308296, "comment_id": 102979514, "body": "@CodeWeaver I was stuck there at first too, but then I noticed that the compiler error specifically complains about the parameters given to <code>equal_type_t</code>, which brought me on the right track. Regarding recursion, this would be the pre-C++17 (i.e. pre fold expression) way to do it: <a href=\"https://godbolt.org/z/NKmMZD\" rel=\"nofollow noreferrer\">godbolt.org/z/NKmMZD</a> (added it to the answer since it&#39;s already here)."}, {"owner": {"reputation": 41, "user_id": 9550495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644164a3ebe38fce77abcabe1a073889?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWeaver", "link": "https://stackoverflow.com/users/9550495/codeweaver"}, "edited": false, "score": 0, "creation_date": 1570682868, "post_id": 58308296, "comment_id": 102991542, "body": "Illustrating at this point fairly firmly, the TIMTOWTDI principle. :)  In my case it wasn&#39;t the fold that got me.  For anyone else following this thread, I posted an attempt at what I would have resorted to in a separate &#39;answer&#39; (probably below)."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 1, "last_activity_date": 1570640823, "last_edit_date": 1570640823, "creation_date": 1570637689, "answer_id": 58308296, "question_id": 58308189, "link": "https://stackoverflow.com/questions/58308189/c-template-parameter-pack-expansion-of-alias/58308296#58308296", "title": "C++ template parameter pack expansion of alias", "body": "<p>The error diagnostic tries to say that the first parameter of <code>equal_type_t</code> cannot be a pack, yet you are expanding a pack into it. Thus, the simple fix is to do the same thing you did earlier:</p>\n\n<pre><code>template &lt;typename N, typename ...Ns&gt;\nusing EqualQ_t = equal_type_t&lt;ExtractQ_t&lt;N&gt;, ExtractQ_t&lt;Ns&gt;...&gt;;\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/j6_HGU\" rel=\"nofollow noreferrer\">https://godbolt.org/z/j6_HGU</a></p>\n\n<p>The unpacking into a non-pack + pack would require template argument deduction, but that doesn't happen for alias templates, see <a href=\"https://en.cppreference.com/w/cpp/language/template_argument_deduction#Alias_templates\" rel=\"nofollow noreferrer\">cppreference</a>. You would need a struct template specialization (or template function call) to get deduction.</p>\n\n<hr>\n\n<p>Using SFINAE seems a little weird in this case though. If the condition is not fulfilled, you get some <a href=\"https://godbolt.org/z/oH7fSZ\" rel=\"nofollow noreferrer\">compiler gibberish</a> about SFINAE thrown in your face. There are other ways to cause a hard error during compilation.</p>\n\n<p>I would say the following is the idiomatic way to write the same code, which gives you a good error when there is a problem and would (not exactly coincidentally) avoid your original problem:</p>\n\n<pre><code>template &lt;typename ...Ns&gt;\nstruct equal_type;\n\ntemplate &lt;typename N,typename ...Ns&gt;\nstruct equal_type&lt;N, Ns...&gt;\n{\n    static_assert((std::is_same_v&lt;N, Ns&gt; &amp;&amp; ...), \"These types must be the same!\");\n    using type = N;\n};\n\ntemplate &lt;typename ...Ns&gt;\nusing equal_type_t = typename equal_type&lt;Ns...&gt;::type;\n\ntemplate &lt;typename N&gt;\nusing ExtractQ_t = typename N::Q;\n\ntemplate &lt;typename ...Ns&gt;\nusing EqualQ_t = equal_type_t&lt;ExtractQ_t&lt;Ns&gt;...&gt;;\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/u52mUE\" rel=\"nofollow noreferrer\">https://godbolt.org/z/u52mUE</a></p>\n\n<hr>\n\n<p>For completeness, the pre-C++17 way (before fold expressions existed) does indeed use recursion:</p>\n\n<pre><code>template &lt;typename N1, typename N2, typename ...Ns&gt;\nstruct equal_type\n{\n    static_assert(std::is_same_v&lt;N1, N2&gt;, \"These types must be the same!\");\n    using type = typename equal_type&lt;N1, Ns...&gt;::type;\n};\n\ntemplate &lt;typename N1, typename N2&gt;\nstruct equal_type&lt;N1, N2&gt;\n{\n    static_assert(std::is_same_v&lt;N1, N2&gt;, \"These types must be the same!\");\n    using type = N1;\n};\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/NKmMZD\" rel=\"nofollow noreferrer\">https://godbolt.org/z/NKmMZD</a></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 9550495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644164a3ebe38fce77abcabe1a073889?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWeaver", "link": "https://stackoverflow.com/users/9550495/codeweaver"}, "is_accepted": false, "score": 0, "last_activity_date": 1570642103, "creation_date": 1570642103, "answer_id": 58309348, "question_id": 58308189, "link": "https://stackoverflow.com/questions/58308189/c-template-parameter-pack-expansion-of-alias/58309348#58309348", "title": "C++ template parameter pack expansion of alias", "body": "<p>Figured this was best suited to a self-answer, but this is mostly directed at Max, who asked a return question, and this response 'is too long to fit in the margins'.</p>\n\n<p>If I'd never tried parameter packs, I probably wouldn't have gotten to this variation on template recursion to solve my problem, but it's probably where I might have gone to if I hadn't been educated on the real issue.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename N,typename ...Ns&gt;\nusing equal_type_t = typename std::enable_if_t&lt;(std::is_same_v&lt;N, Ns&gt; &amp;&amp; ...), N&gt;;\n\ntemplate &lt;typename N&gt;\nusing ExtractQ_t = typename N::Q;\n\ntemplate &lt;typename N,typename ...Ns&gt;\nclass EqualQ\n{\npublic:\n    using type = equal_type_t&lt;ExtractQ_t&lt;N&gt;,typename EqualQ&lt;Ns...&gt;::type&gt;;\n};\n\ntemplate &lt;typename N&gt;\nclass EqualQ&lt;N&gt;\n{\npublic:\n    using type = ExtractQ_t&lt;N&gt;;\n};\n\ntemplate &lt;typename ...Ns&gt;\nusing EqualQ_t = typename EqualQ&lt;Ns...&gt;::type;\n\nint main()\n{\n    struct Qness{};\n    struct Foo{using Q = Qness;};\n    struct Bar{using Q = Qness;};\n    struct Baz{using Q = Qness;};\n    using F = EqualQ_t&lt;Foo,Bar,Baz&gt;;\n    static_assert(std::is_same_v&lt;F,Qness&gt;);\n\n    return 0;\n}\n</code></pre>\n\n<p>Yes, I realize it's not idiomatic, definitely less clean than either of Max's solutions, and doesn't answer my <em>original</em> question, but explores what I was trying to avoid.</p>\n\n<p>One of the things I did discover doing it in this manner though was that aliases can't be specialized like class templates can.  So point of education there too.  I had to turn EqualQ into a templated struct.</p>\n\n<p>The thing is, doing it this way wouldn't have educated me on why I couldn't unpack my parameter packs the way I originally wanted to, and certainly not to Max's idiomatic pattern, which I shall now be adopting. :)</p>\n"}], "owner": {"reputation": 41, "user_id": 9550495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644164a3ebe38fce77abcabe1a073889?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWeaver", "link": "https://stackoverflow.com/users/9550495/codeweaver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1570642103, "creation_date": 1570637298, "question_id": 58308189, "link": "https://stackoverflow.com/questions/58308189/c-template-parameter-pack-expansion-of-alias", "title": "C++ template parameter pack expansion of alias", "body": "<p>So, my motivation here is to determine whether the same named type declaration within several classes are the same type.  In this example, I'm looking to see that all of Foo, Bar, and Baz have an internal type Q.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename N,typename ...Ns&gt;\nusing equal_type_t = typename std::enable_if_t&lt;(std::is_same_v&lt;N, Ns&gt; &amp;&amp; ...), N&gt;;\n\ntemplate &lt;typename N&gt;\nusing ExtractQ_t = typename N::Q;\n\ntemplate &lt;typename ...Ns&gt;\nusing EqualQ_t = equal_type_t&lt;ExtractQ_t&lt;Ns&gt;...&gt;;\n\n\nint main()\n{\n    struct Qness{};\n    struct Foo{using Q = Qness;};\n    struct Bar{using Q = Qness;};\n    struct Baz{using Q = Qness;};\n    using F = EqualQ_t&lt;Foo,Bar,Baz&gt;;\n    static_assert(std::is_same_v&lt;F,Qness&gt;);\n\n    return 0;\n}\n</code></pre>\n\n<p>Tested in clang9 (praise be to godbolt).</p>\n\n<p>The error reported is:</p>\n\n<pre><code>#1 with x86-64 clang 9.0.0\n&lt;source&gt;:10:31: error: pack expansion used as argument for non-pack parameter of alias template\n\nusing EqualQ_t = equal_type_t&lt;ExtractQ_t&lt;Ns&gt;...&gt;;\n</code></pre>\n\n<p>I could probably solve this by way of doing some template recursion, but I'm trying to learn to use parameter pack expansion wherever possible.</p>\n\n<p>Is this possible?  Is this not an allowed context?  If I separate out a few individual N types, it works fine:</p>\n\n<pre><code>template &lt;typename N1,typename N2, typename N3, typename ...Ns&gt;\nusing EqualQ_t = equal_type_t&lt;ExtractQ_t&lt;N1&gt;,ExtractQ_t&lt;N2&gt;,ExtractQ_t&lt;N3&gt;&gt;;\n</code></pre>\n\n<p>I have to be having a pre-coffee brain-fog and can't see where I might be hosing the syntax.</p>\n\n<p>Is there an expansion variant of this that will work?</p>\n"}, {"tags": ["c++", "gtk", "gdk"], "comments": [{"owner": {"reputation": 1943, "user_id": 1391824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b30c131f358c299e7b5c89870c3761?s=128&d=identicon&r=PG", "display_name": "TingPing", "link": "https://stackoverflow.com/users/1391824/tingping"}, "edited": false, "score": 0, "creation_date": 1570696907, "post_id": 58308137, "comment_id": 102997067, "body": "The important detail is surely the contents of the file."}, {"owner": {"reputation": 1, "user_id": 10570400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb6bf690abeda8e0de7e8ded239f43a?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/10570400/stephen"}, "reply_to_user": {"reputation": 1943, "user_id": 1391824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b30c131f358c299e7b5c89870c3761?s=128&d=identicon&r=PG", "display_name": "TingPing", "link": "https://stackoverflow.com/users/1391824/tingping"}, "edited": false, "score": 0, "creation_date": 1570719304, "post_id": 58308137, "comment_id": 103010014, "body": "The contents of the data files is pure ascii - no special characters."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10570400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb6bf690abeda8e0de7e8ded239f43a?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/10570400/stephen"}, "edited": false, "score": 0, "creation_date": 1570972767, "post_id": 58345954, "comment_id": 103078815, "body": "Thanks for that. So its beginning to sound like a library version problem."}], "tags": [], "owner": {"reputation": 746, "user_id": 12126234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10a7b87642cedea860405eebe2625b2?s=128&d=identicon&r=PG&f=1", "display_name": "lb90", "link": "https://stackoverflow.com/users/12126234/lb90"}, "is_accepted": false, "score": 0, "last_activity_date": 1570816932, "last_edit_date": 1570816932, "creation_date": 1570814752, "answer_id": 58345954, "question_id": 58308137, "link": "https://stackoverflow.com/questions/58308137/gtk3-textview-does-not-display-entire-file-of-a-certain-size-last-lines-are/58345954#58345954", "title": "Gtk3 textView does not display entire file (of a certain size) - last lines are invisible", "body": "<p>Works fine here. Gnome-Shell on X11, Arch Linux, Gtk 3.24.12</p>\n\n<p>\u00af\\_(\u30c4)_/\u00af</p>\n\n<p><a href=\"https://i.stack.imgur.com/BOiIs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BOiIs.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 10570400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb6bf690abeda8e0de7e8ded239f43a?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/10570400/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570816932, "creation_date": 1570637098, "question_id": 58308137, "link": "https://stackoverflow.com/questions/58308137/gtk3-textview-does-not-display-entire-file-of-a-certain-size-last-lines-are", "title": "Gtk3 textView does not display entire file (of a certain size) - last lines are invisible", "body": "<p>Gtk3 textView does not display entire file (of a certain size) - last lines are invisible.</p>\n\n<p>The demo code was abstracted from an app I am developing. All error handling code, extraneous widgets etc. removed.</p>\n\n<p>Loading the sample file \"zs.txt\" - only the first 965 lines are displayed visibly </p>\n\n<ul>\n<li>the last few lines are marked with the line number (961 to 970). Only lines up to 965 are displayed.</li>\n<li>the remaining lines ARE in the buffer, but are invisible. </li>\n<li>The demo code reads-back the buffer and saves it in \"zback.txt\", which compares identically with \"zs.txt\".</li>\n</ul>\n\n<p>Weirdly, loading the file \"zs_big.txt\", which is twice the size of \"zs.txt\"`, loads \nOK, all the lines are visible.</p>\n\n<p>I have tried </p>\n\n<ul>\n<li>forcibly changing the visibility through tags - no effect.</li>\n<li><p>switching between the following gave no improvement: </p>\n\n<ul>\n<li>gtk_text_buffer_set_text()</li>\n<li>gtk_text_buffer_insert() - in one go, and looping over small chunks</li>\n<li>gtk_text_buffer_insert_at_cursor()</li>\n</ul></li>\n</ul>\n\n<p>It appears to be largely sensitive to the number of lines in the file, but there also seems\nto be some data sensitivity (i.e. line length) as well.</p>\n\n<p>I really cannot see a reason for this behavior. Any help greatly appreciated!</p>\n\n<p>g.cpp g.h  - graphic code.</p>\n\n<p>zs.txt     - small file that invokes problem.</p>\n\n<p>zs_big.txt - big file that works ok.</p>\n\n<p>The widget hierarchy is:</p>\n\n<pre><code>m_win           - main window\n  |\n  m_vbox        - vertical box\n    |\n    m_hPane     - horizontal pane\n      |\n      m_vScrWin - scrolled window\n        |   \n        m_vSub  - sub box\n          |\n          m_aTV - application textView \n</code></pre>\n\n<p>Running on ubuntu trusty 14.04.6 LTS.</p>\n\n<p>To build:\n  make</p>\n\n<p>Uses g++, with</p>\n\n<ul>\n<li>gtk+-3.0 </li>\n<li>x11 </li>\n<li>gdk-x11-2.0</li>\n<li>Xt</li>\n</ul>\n\n<p>Executable is then simply: g</p>\n\n<p>g.cpp:</p>\n\n<pre><code>#include \"g.h\"\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"g.h\"\nusing namespace std;\nint main(int argc,  char **argv)\n{\n    CG *g = new CG;\n    g-&gt;gui(argc,  argv);\n    delete g;\n    return(0);\n}\n\nCG::CG(){};\n\nvoid CG::gui(int argc, char *argv[])\n{\n    //SELECT FILE TO LOAD\n    m_file = (char *)\"zs.txt\";\n    //m_file = (char *)\"zs_big.txt\";\n\n    gtk_init(&amp;argc, &amp;argv);\n\n    // Main window\n    m_win = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n    gtk_window_move(GTK_WINDOW(m_win),  0,  0);\n    gtk_window_set_default_size(GTK_WINDOW(m_win), 600, 800);\n\n    // vertical box in main window\n    m_vbox = gtk_box_new(GTK_ORIENTATION_VERTICAL, 0);\n    gtk_container_add(GTK_CONTAINER(m_win), m_vbox); \n\n    // Horizontal pane in vertical box\n    m_hPane = gtk_paned_new(GTK_ORIENTATION_HORIZONTAL);\n    gtk_widget_set_size_request(m_hPane, 500, 200);\n    gtk_box_pack_start(GTK_BOX(m_vbox), m_hPane, TRUE, TRUE, 0);\n\n    // Scrolled window in horizontal pane\n    m_vScrWin = gtk_scrolled_window_new(NULL, NULL);\n    gtk_scrolled_window_set_policy(GTK_SCROLLED_WINDOW(m_vScrWin), GTK_POLICY_ALWAYS, GTK_POLICY_ALWAYS);\n    gdk_cursor_new(GDK_XTERM);\n    gtk_widget_get_window(m_vScrWin);\n    gtk_paned_pack1(GTK_PANED(m_hPane), m_vScrWin, TRUE, TRUE);\n    gtk_widget_realize(m_vScrWin);\n\n    // Vertical sub-box in scrolled window\n    m_vSub  = gtk_box_new(GTK_ORIENTATION_VERTICAL, 0);\n    gtk_widget_set_size_request(m_vSub, 40, 20);\n    gtk_container_add(GTK_CONTAINER(m_vScrWin), m_vSub); \n\n    // Application text view in vertical sub-box\n    m_aTV = gtk_text_view_new();\n    gtk_text_view_set_editable(GTK_TEXT_VIEW(m_aTV), FALSE);\n    gtk_box_pack_start(GTK_BOX(m_vSub ), m_aTV, FALSE, FALSE, 0);\n    gtk_widget_show_all(m_win);\n\n    GtkTextBuffer *textViewBuffer = gtk_text_view_get_buffer(GTK_TEXT_VIEW(m_aTV));\n    writeTextToView(m_file, textViewBuffer);\n    save(textViewBuffer);\n    gtk_main();\n}\n\nvoid CG::writeTextToView(const gchar *const fname,  GtkTextBuffer *textViewBuffer)\n{\n    FILE *fp = fopen(fname, \"r\");\n    struct stat st;\n    fstat(fileno(fp), &amp;st);\n\n    gchar *rbuf = new gchar[st.st_size];\n    fread(rbuf, 1, st.st_size, fp);\n\n    fclose(fp);\n        // Have also tried gtk_text_buffer_insert() gtk_text_buffer_insert_at_cursor() here.\n    gtk_text_buffer_set_text(textViewBuffer, rbuf, st.st_size);\n\n    delete [] rbuf; \n}\n\nvoid\nCG::save(GtkTextBuffer *textViewBuffer)\n{\n    GtkTextIter sIter, eIter;\n    gtk_text_buffer_get_start_iter(textViewBuffer, &amp;sIter);\n    gtk_text_buffer_get_end_iter(textViewBuffer, &amp;eIter);\n\n    gchar *cp = gtk_text_buffer_get_text(textViewBuffer, &amp;sIter, &amp;eIter, TRUE);\n\n    FILE *fp = fopen(\"zback.txt\", \"w\");\n    fprintf(fp, \"%s\", cp);\n    fclose(fp);\n}\n</code></pre>\n\n<p>g.h:</p>\n\n<pre><code>#ifndef GRAPHIC_H\n#define GRAPHIC_H\n#include \"g.h\"\n#include &lt;X11/Xlib.h&gt;\n#include &lt;iostream&gt;\n#include &lt;gtk/gtk.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;string.h&gt;\nusing namespace std;\nclass CG\n{\npublic:\n    CG();\n    ~CG(){};\n    void gui(int argc, char *argv[]);\n    void LoadInitialFiles();\n    void writeTextToView(const gchar *const ptr, GtkTextBuffer *tvb);\n    void save(GtkTextBuffer *textViewBuffer);\n    gchar *m_file;\n    GtkWidget *m_hPane;\n    GtkWidget *m_vScrWin;\n    GtkWidget *m_win;\n    GtkWidget *m_vbox;\n    GtkWidget *m_vSub;\n    GtkWidget *m_aTV;\n};\n#endif\n</code></pre>\n\n<p>makefile:</p>\n\n<pre><code>    GCCFLAGS= -g -Wall -Werror -std=c++11 \n\nall: tags g \n\ng: g.o\n    g++ $(GCCFLAGS) -o g g.o `pkg-config --cflags --libs gtk+-3.0 x11 gdk-x11-2.0` -lXt  -I/usr/include/X11\n\ng.o: g.cpp g.h\n    g++ $(GCCFLAGS) -c g.cpp `pkg-config --cflags --libs gtk+-3.0 x11 gdk-x11-2.0` -I/usr/include/X11 \n\nclean: \n    rm -f g *.o tags zback.txt\n\ntags: *.h *.cpp\n    ctags *.h *.cpp\n\n</code></pre>\n\n<p>zs.txt (small data sample file that fails):</p>\n\n<pre><code>\nxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxx\n\n\nxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nx\nxx\n\nxx\nxx\nxx\nxxxx\nxx\nx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nx\nxx\nx\n\nxx\nxx\nxx\nxx\nxx\nxx\nx\nxx\nx\n\nxx\nxx\nxx\nxx\nxx\nxx\nx\nxx\nx\n\nxx\nxx\nxx\nxx\nxx\nx\nxx\nx\n\nxx\nxx\nxx\nxx\nxx\nxx\nx\nxx\nxx\nxx\nxx\nxx\nxxx\nxx\nxx\nxx\nxx\nxx\nxx\nx\n\nxx\nxx\nxx\nxx\nxx\nxx\nx\nxx\nxxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nx\n\nxx\nxx\nxx\nxx\nxx\nxx\nx\nxx\nxxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nx\n\nxx\nxx\nxx\nxx\nxx\nxx\nx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxxx\nxx\nxx\nxx\nx\n\nxx\nxx\nxx\nxx\nxx\nx\nxx\nx\n\nxx\nxx\nxx\nxxx\nxx\nx\nxx\nx\n\nxxx\nxx\nxx\nxxx\nxxxx\nxx\nx\nxx\nxx\nx\n\nxxx\nxx\nxx\nxxx\nxxxx\nxx\nx\nxx\nxx\nxxx\nxx\nxxx\nxxxxxx\nxxx\nxx\nxxx\nxx\nx\n\nxx\n\nxx\nxx\nx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxxxxxx\nx\n\nxx\nxx\nxx\n\nfile xx\nfile xx\n\nfile xx\n\nfile xx\nfile xx\nfile xx\nfile xx\nfile xx\nfile xx\n\nfile xx\nfile xx\n\nfile xx\nfile xx\n\nfile xx\n\nline 961 xx\nline 962 xx\nline 963 xx\nline 964 xx\nline 965 xx\nline 966 xx\nline 967 xx\nline 968 xx\nline 969 xx\nline 970 xx\n</code></pre>\n\n<p>zs_big.txt (big sample file that works):</p>\n\n<pre><code>\nxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxx\n\n\nxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\n\nxx\nxx\n\nline 963 xx\nline 964 xx\nline 965 xx\nline 966 xx\nline 967 xx\nxx\n\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\n\nxx\n\nxx\n\n\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\n\nxx\n\n\nxx\n\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\n\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\n\nxx\nxx\n\nline 963 xx\nline 964 xx\nline 965 xx\n\nline 966 xx\nline 967 xx\nxx\n\nxx\n\nxx\n\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\n\nxx\n\nxx\n\n\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\n\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\n\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\n\nxx\nxx\nxx\nxx\nxx\n\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\nxx\n\nxx\nline 2998 and lastxx\n</code></pre>\n"}, {"tags": ["c++", "compiler-errors"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12189742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCX6rWrv3LuJ3LBM7vt1P69sSJDHYVxGNccj7-ezA=k-s128", "display_name": "Meme Review", "link": "https://stackoverflow.com/users/12189742/meme-review"}, "edited": false, "score": 0, "creation_date": 1570638401, "post_id": 58308158, "comment_id": 102978549, "body": "then how can i fix this programme?? i am new to programming"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 13, "user_id": 12189742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCX6rWrv3LuJ3LBM7vt1P69sSJDHYVxGNccj7-ezA=k-s128", "display_name": "Meme Review", "link": "https://stackoverflow.com/users/12189742/meme-review"}, "edited": false, "score": 2, "creation_date": 1570638457, "post_id": 58308158, "comment_id": 102978567, "body": "@MemeReview: The quick fix is to set <code>x</code> to zero at the point of declaration. Later on in your programming life you&#39;ll settle upon more fancy ways."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 8, "last_activity_date": 1570637174, "creation_date": 1570637174, "answer_id": 58308158, "question_id": 58308132, "link": "https://stackoverflow.com/questions/58308132/visual-studio-generates-error-uninitialized-local-variable-x-and-online-com/58308158#58308158", "title": "Visual Studio generates &quot;Error: uninitialized local variable &#39;x&#39; &quot;and online Compiler does not - Why?", "body": "<p>Visual Studio is being kind to you here: the behaviour of reading an uninitialised variable is <em>undefined</em> in C++, and <code>(x != -999)</code> is an uninitialised read on the first encounter.</p>\n\n<p>Don't ignore warnings issued by the other compilers.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1570637761, "creation_date": 1570637761, "answer_id": 58308312, "question_id": 58308132, "link": "https://stackoverflow.com/questions/58308132/visual-studio-generates-error-uninitialized-local-variable-x-and-online-com/58308312#58308312", "title": "Visual Studio generates &quot;Error: uninitialized local variable &#39;x&#39; &quot;and online Compiler does not - Why?", "body": "<p>Reading an uninitialised variable (which you do) is not <em>required</em> to be a compiler error. It is defined by the standard as having \"Undefined Behaviour\". Which basically means that the compiler is allowed to compile your program, but can do <em>whatever it likes</em> to <em>any</em> part of your program, since it is now defined as having <em>no</em> well defined behaviour - so <em>anything</em> is OK.</p>\n\n<p>In C++ it is ultimately the responsibility of the <em>programmer</em> to know <em>all</em> the rules of the language and <em>never</em> write anything that invokes UB <em>anywhere</em> and the compiler is <em>not</em> required to help you / diagnose your errors, it can just <em>assume</em> that you didn't write any UB and whatever result is OK if you did anyway.</p>\n\n<p>There is <em>no safety net</em> / <em>no training wheels</em> in C++.</p>\n\n<p>See also: <a href=\"https://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/ub</a></p>\n"}], "owner": {"reputation": 13, "user_id": 12189742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCX6rWrv3LuJ3LBM7vt1P69sSJDHYVxGNccj7-ezA=k-s128", "display_name": "Meme Review", "link": "https://stackoverflow.com/users/12189742/meme-review"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58308158, "answer_count": 2, "score": 1, "last_activity_date": 1570640808, "creation_date": 1570637095, "last_edit_date": 1570640808, "question_id": 58308132, "link": "https://stackoverflow.com/questions/58308132/visual-studio-generates-error-uninitialized-local-variable-x-and-online-com", "title": "Visual Studio generates &quot;Error: uninitialized local variable &#39;x&#39; &quot;and online Compiler does not - Why?", "body": "<pre><code>int main() {\n    int y, z, a, b, c;\n    int x;\n    double d;\n    cout &lt;&lt; \"Enter Numbers! Enter -999 to Stop:\\n\";\n    y = 0; z = 0; a = 0;\n    b = 0; c = 0; d = 0;\n\nwhile (x != -999) {\n\n    cin &gt;&gt; x;\n\n    if (x &gt; 0) y++;\n    if (x &gt; 0) b += x;\n    if (x == 0) z++;\n    if (x &lt; 0 &amp;&amp; x != -999)a++;\n    if (x &lt; 0 &amp;&amp; x != -999) c += x;\n\n\n\n}\nd = b * 1.0 / y * 1.0;\nif (b == 0 || y == 0) {\n    d = 0;\n}\n\ncout &lt;&lt; \"Total Positive Numbers are: \" &lt;&lt; y &lt;&lt; endl;\ncout &lt;&lt; \"Total Negative Numbers are: \" &lt;&lt; a &lt;&lt; endl;\ncout &lt;&lt; \"Total Zeros are: \" &lt;&lt; z &lt;&lt; endl;\ncout &lt;&lt; \"Sum of Positive Numbers is: \" &lt;&lt; b &lt;&lt; endl;\ncout &lt;&lt; \"Sum of Negative Numbers is: \" &lt;&lt; c &lt;&lt; endl;\ncout &lt;&lt; \"Average of Positive Numbers is: \" &lt;&lt; d * 1.0 &lt;&lt; endl;\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>The visual studio compiler says its \"uninitialized local variable 'x' used\" at line 13.</p>\n\n<p>However, it has no problem on other online compiler.</p>\n"}, {"tags": ["c++", "c++11", "fstream", "binaryfiles", "read-write"], "comments": [{"owner": {"reputation": 137, "user_id": 9472543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lamba Dawet", "link": "https://stackoverflow.com/users/9472543/lamba-dawet"}, "edited": false, "score": 0, "creation_date": 1570637114, "post_id": 58308081, "comment_id": 102977933, "body": "So what&#39;s wrong with the Q?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1570637336, "post_id": 58308081, "comment_id": 102978036, "body": "Check your sizes again."}, {"owner": {"reputation": 796, "user_id": 1643973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/198787891419681bb0932f54a502a40c?s=128&d=identicon&r=PG", "display_name": "jjramsey", "link": "https://stackoverflow.com/users/1643973/jjramsey"}, "edited": false, "score": 0, "creation_date": 1570637597, "post_id": 58308081, "comment_id": 102978175, "body": "You said, &quot;In the below setup, the size of MyStruct is 24 bytes. Therefore, the 32th byte in file should be the Weight member variable of the 2nd struct.&quot; Because compilers may add padding to the struct, that is not necessarily true. See here: <a href=\"https://stackoverflow.com/questions/5397447/struct-padding-in-c\">stackoverflow.com/questions/5397447/struct-padding-in-c</a>"}, {"owner": {"reputation": 137, "user_id": 9472543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lamba Dawet", "link": "https://stackoverflow.com/users/9472543/lamba-dawet"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1570637740, "post_id": 58308081, "comment_id": 102978246, "body": "@molbdnilo Dammit copy/paste :D It turned out to be a typo.. Thanks"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1570637850, "post_id": 58308081, "comment_id": 102978300, "body": "Your approach is very fragile and ignores any potential padding within the struct. You are only guaranteed that there will be no padding before the <i>first</i> member of a struct. Further, changing the order of member may well change the size of your struct. You members are <code>int - 4 bytes</code>, <code>doube - 8 bytes</code>, and <code>char - 1 byte</code>. Unless something is forcing 8-byte alignment of members within the struct, your double (assuming no padding) will start at the 28th byte -- if your struct is really 24 bytes in size). Check the size with members ordered as <code>double, int, char</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1570640009, "post_id": 58308081, "comment_id": 102979231, "body": "What happens if <code>test.txt</code> doesn&#39;t exist? How do you fix it?"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1570641493, "post_id": 58308081, "comment_id": 102979895, "body": "@LambaDawet did you now solve this problem? I suggest you use <a href=\"https://en.cppreference.com/w/cpp/types/offsetof\" rel=\"nofollow noreferrer\">offsetof()</a> instead of relying on a certain member being in a certain place. Also this way your program won&#39;t break if you reorder the members of <code>MyStruct</code> od add new members."}, {"owner": {"reputation": 137, "user_id": 9472543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lamba Dawet", "link": "https://stackoverflow.com/users/9472543/lamba-dawet"}, "reply_to_user": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1570714790, "post_id": 58308081, "comment_id": 103007187, "body": "@churill Yes, it was a typo in my <code>sizeof(double)</code>, it should be <code>sizeof(MyStruct)</code> but thanks"}], "owner": {"reputation": 137, "user_id": 9472543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lamba Dawet", "link": "https://stackoverflow.com/users/9472543/lamba-dawet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570636914, "creation_date": 1570636914, "question_id": 58308081, "link": "https://stackoverflow.com/questions/58308081/why-reading-and-writing-to-a-binary-file-is-not-working-as-i-expect", "title": "Why reading and writing to a binary file is not working as I expect?", "body": "<p>I am trying to replace a double value that is on the 32th byte in the binary file. In the below setup, the size of <code>MyStruct</code> is 24 bytes. Therefore, the 32th byte in file should be the <code>Weight</code> member variable of the 2nd struct. Right now when I execute, I am getting the strange output. I am expecting my 2nd struct to have the new weight value of 250 instead of 200: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nstruct MyStruct\n{\n    int Grade;\n    double Weight;\n    char Gender;\n};\n\nint main()\n{\n    MyStruct* lStruct = new MyStruct{ 1, 100, 'M' };\n    MyStruct* lStruct2 = new MyStruct{ 2, 200, 'F' };;\n\n    fstream InFile;\n    InFile.open(\"test.txt\", ios::in | ios::out | ios::binary);\n    InFile.write(reinterpret_cast&lt;char*&gt;(lStruct), sizeof(MyStruct));\n    InFile.write(reinterpret_cast&lt;char*&gt;(lStruct2), sizeof(MyStruct));\n\n\n    InFile.seekp(32, ios::beg);\n    double Weight = 250;\n    InFile.write(reinterpret_cast&lt;char*&gt;(&amp;Weight), sizeof(double));\n\n    InFile.seekg(0, ios::beg);\n    InFile.read(reinterpret_cast&lt;char*&gt;(lStruct), sizeof(MyStruct));\n    InFile.seekg(24, ios::beg);\n    InFile.read(reinterpret_cast&lt;char*&gt;(lStruct2), sizeof(double));\n\n    cout &lt;&lt; lStruct-&gt;Grade&lt;&lt; endl;\n    cout &lt;&lt; lStruct-&gt;Weight &lt;&lt; endl;\n    cout &lt;&lt; lStruct-&gt;Gender&lt;&lt; endl;\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; lStruct2-&gt;Grade&lt;&lt; endl;\n    cout &lt;&lt; lStruct2-&gt;Weight &lt;&lt; endl;\n    cout &lt;&lt; lStruct2-&gt;Gender&lt;&lt; endl;\n    cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>1</p>\n  \n  <p>100</p>\n  \n  <p>M</p>\n  \n  <p>2</p>\n  \n  <p>200</p>\n  \n  <p>F</p>\n</blockquote>\n\n<p>What is the problem?</p>\n\n<p>Bonus question: is <code>seekp(32, ios::beg)</code> equivalent to <code>seekp(-16, ios::end)</code>? (can I use negative away-from end)?</p>\n"}, {"tags": ["c++", "q-learning"], "comments": [{"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1570637738, "post_id": 58308078, "comment_id": 102978244, "body": "By a <i>move</i> you mean the interaction with a tile, right? So either uncovering it or flag it as a mine? Also, 50 iterations is really a tough constrain."}, {"owner": {"reputation": 19, "user_id": 10428605, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qS7NgmT-Zcs/AAAAAAAAAAI/AAAAAAAAABo/Oo_bVaxBA7I/photo.jpg?sz=128", "display_name": "Rhett Flanagan", "link": "https://stackoverflow.com/users/10428605/rhett-flanagan"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 1, "creation_date": 1570638291, "post_id": 58308078, "comment_id": 102978496, "body": "@Timo Not quite interacting with a tile, it&#39;s not like the old minesweeper game. There is a sweeper robot that wanders around the map identifying mines, moving is literally moving, if it collides with a mine, that mine is considered swept and removed from the map."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1570638755, "post_id": 58308078, "comment_id": 102978705, "body": "Oh I see, can you list or link the whole ruleset of the actual game?"}, {"owner": {"reputation": 19, "user_id": 10428605, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qS7NgmT-Zcs/AAAAAAAAAAI/AAAAAAAAABo/Oo_bVaxBA7I/photo.jpg?sz=128", "display_name": "Rhett Flanagan", "link": "https://stackoverflow.com/users/10428605/rhett-flanagan"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1570639917, "post_id": 58308078, "comment_id": 102979190, "body": "@Timo I&#39;ve updated with a list of the ruleset as given. It may be easier to understand if you look at the exercise that it was based on, which is linked near the start of my post, that used ANNs to perform the same concept in a continuous environment."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1570671641, "post_id": 58308078, "comment_id": 102989214, "body": "Do the agents have knowledge of their surrounding environment or of the mines? Otherwise this would be impossible. The article doesn&#39;t say anything about it tho."}, {"owner": {"reputation": 19, "user_id": 10428605, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qS7NgmT-Zcs/AAAAAAAAAAI/AAAAAAAAABo/Oo_bVaxBA7I/photo.jpg?sz=128", "display_name": "Rhett Flanagan", "link": "https://stackoverflow.com/users/10428605/rhett-flanagan"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1570690369, "post_id": 58308078, "comment_id": 102994028, "body": "@Timo The agents do have knowledge of the mines, they can &quot;see&quot; the nearest active mines. I wanted to try getting the agent to learn to move towards the nearest active mine rather than learning to go to the positions of mines in the environment since that has problems with mines being removed but have been unsuccessful with that so far."}], "answers": [{"tags": [], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "is_accepted": false, "score": 1, "last_activity_date": 1570716843, "last_edit_date": 1570716843, "creation_date": 1570715958, "answer_id": 58324731, "question_id": 58308078, "link": "https://stackoverflow.com/questions/58308078/q-learning-to-learn-minesweeping-behavior/58324731#58324731", "title": "Q-learning to learn minesweeping behavior", "body": "<p>Given that the sweeper can always see the nearest mine, this should be pretty easy. From your question I assume your only problem is finding a good reward function and representation for your agent state.</p>\n\n<h1>Defining a state</h1>\n\n<p>Absolute positions are rarely useful in a random environment, especially if the environment is infinite like in your example (since the bot can drive over the borders and respawn at the other side). This means that the size of the environment isn't needed for the agent to operate (we will actually need it to simulate the infinite space, tho).</p>\n\n<p>A reward function calculates its return value based on the current state of the agent compared to its previous state. But how do we define a state? Lets see what we actually need in order to operate the agent like we want it to.</p>\n\n<ol>\n<li>The position of the agent.</li>\n<li>The position of the nearest mine.</li>\n</ol>\n\n<p>That is all we need. Now I said erlier that absolute positions are bad. This is because it makes the Q table (you call it Q matrix) static and very fragile to randomness. So let's try to completely eliminate abosulte positions from the reward function and replace them with relative positions. Luckily, this is very simple in your case: instead of using the absolute positions, we use the relative position between the nearest mine and the agent.</p>\n\n<p>Now we don't deal with coordinates anymore, but vectors. Lets calculate the vector between our points: <code>v = pos_mine - pos_agent</code>. This vector gives us two very important pieces of information:</p>\n\n<ol>\n<li>the direction in which the nearst mine is, and</li>\n<li>the distance to the nearest mine.</li>\n</ol>\n\n<p>And these are all we need to make our agent operational. Therefore, an agent state can be defined as </p>\n\n<pre><code>State: Direction x Distance\n</code></pre>\n\n<p>of which distance is a floating point value and direction either a float that describes the angle or a normalized vector.</p>\n\n<h1>Defining a reward function</h1>\n\n<p>Given our newly defined state, the only thing we care about in our reward function is the distance. Since all we want is to move the agent towards mines, the distance is all that matters. Here are a few guesses how the reward function could work:</p>\n\n<ol>\n<li>If the agent sweeps a mine (distance == 0), return a huge reward (ex. 100).</li>\n<li>If the agent moves towards a mine (distance is shrinking), return a neutral (or small) reward (ex. 0).</li>\n<li>If the agent moves away from a mine (distance is increasing), retuan a negative reward (ex. -1).</li>\n</ol>\n\n<p>Theoretically, since we penaltize moving away from a mine, we don't even need rule 1 here.</p>\n\n<h1>Conclusion</h1>\n\n<p>The only thing left is determining a good learning rate and discount so that your agent performs well after 50 iterations. But, given the simplicity of the environment, this shouldn't even matter that much. Experiment. </p>\n"}], "owner": {"reputation": 19, "user_id": 10428605, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qS7NgmT-Zcs/AAAAAAAAAAI/AAAAAAAAABo/Oo_bVaxBA7I/photo.jpg?sz=128", "display_name": "Rhett Flanagan", "link": "https://stackoverflow.com/users/10428605/rhett-flanagan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570716843, "creation_date": 1570636899, "last_edit_date": 1570640345, "question_id": 58308078, "link": "https://stackoverflow.com/questions/58308078/q-learning-to-learn-minesweeping-behavior", "title": "Q-learning to learn minesweeping behavior", "body": "<p>I am attempting to use Q-learning to learn minesweeping behavior on a discreet version of Mat Buckland's smart sweepers, the original available here <a href=\"http://www.ai-junkie.com/ann/evolved/nnt1.html\" rel=\"nofollow noreferrer\">http://www.ai-junkie.com/ann/evolved/nnt1.html</a>, for an assignment. The assignment limits us to 50 iterations of 2000 moves on a grid that is effectively 40x40, with the mines resetting and the agent being spawned in a random location each iteration.</p>\n\n<p>I've attempted performing q learning with penalties for moving, rewards for sweeping mines and penalties for not hitting a mine. The sweeper agent seems unable to learn how to sweep mines effectively within the 50 iterations because it learns that going to specific cell is good, but after a the mine is gone it is no longer rewarded, but penalized for going to that cell with the movement cost</p>\n\n<p>I wanted to attempt providing rewards only when all the mines were cleared in an attempt to make the environment static as there would only be a state of not all mines collected, or all mines collected, but am struggling to implement this due to the agent having only 2000 moves per iteration and being able to backtrack, it never manages to sweep all the mines in an iteration within the limit with or without rewards for collecting mines.</p>\n\n<p>Another idea I had was to have an effectively new Q matrix for each mine, so once a mine is collected, the sweeper transitions to that matrix and operates off that where the current mine is excluded from consideration.</p>\n\n<p>Are there any better approaches that I can take with this, or perhaps more practical tweaks to my own approach that I can try?</p>\n\n<p>A more explicit explanation of the rules:</p>\n\n<ul>\n<li>The map edges wrap around, so moving off the right edge of the map will cause the bot to appear on the left edge etc.</li>\n<li>The sweeper bot can move up down, left or right from any map tile.</li>\n<li>When the bot collides with a mine, the mine is considered swept and then removed.</li>\n<li>The aim is for the bot to learn to sweep all mines on the map from any starting position.</li>\n</ul>\n"}, {"tags": ["c++", "c++11", "shared-ptr"], "comments": [{"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 5, "creation_date": 1570636894, "post_id": 58308058, "comment_id": 102977830, "body": "Why don&#39;t you try?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1570636964, "post_id": 58308058, "comment_id": 102977860, "body": "Short answer: No."}], "answers": [{"tags": [], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "is_accepted": false, "score": 4, "last_activity_date": 1570636939, "creation_date": 1570636939, "answer_id": 58308089, "question_id": 58308058, "link": "https://stackoverflow.com/questions/58308058/can-smart-pointers-be-implicitly-used-as-pointers/58308089#58308089", "title": "Can smart pointers be implicitly used as pointers?", "body": "<p>No they can't be used interchangable. You would get a compiler error in your example. But you can always get the raw pointer by <code>shared_ptr::get()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": false, "score": 2, "last_activity_date": 1570637302, "creation_date": 1570637302, "answer_id": 58308191, "question_id": 58308058, "link": "https://stackoverflow.com/questions/58308058/can-smart-pointers-be-implicitly-used-as-pointers/58308191#58308191", "title": "Can smart pointers be implicitly used as pointers?", "body": "<p><a href=\"https://en.cppreference.com/book/intro/smart_pointers\" rel=\"nofollow noreferrer\">Smart pointers</a> are used to make sure that an object is deleted if it is no longer used (referenced).</p>\n\n<p>Smart pointer are there to manage lifetime of the pointer they own/share.</p>\n\n<p>You can think of a wrapper that has a pointer inside. So the answer is no. However you can access to the pointer they own via <code>get()</code> method. </p>\n\n<p>Please note that it is not so difficult to make dangling pointers if you use <code>get</code> method, so if you use it be extra cautious.</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1570640221, "last_edit_date": 1570640221, "creation_date": 1570637412, "answer_id": 58308227, "question_id": 58308058, "link": "https://stackoverflow.com/questions/58308058/can-smart-pointers-be-implicitly-used-as-pointers/58308227#58308227", "title": "Can smart pointers be implicitly used as pointers?", "body": "<p>NO! It would be a <strong>terrible API</strong>. Yes, you could easily implement it within <code>shared_ptr</code>, but just because you could doesn't mean you should.</p>\n\n<p>Why is it such a bad idea? The plain-pointer-based interface of <code>bar</code> doesn't retain an instance of the shared pointer. If <code>bar</code> happens to store the raw pointer somewhere and then exit, there's nothing that guarantees that the pointer it had stored won't become dangling in the future. The only way to guarantee that would be to retain an instance of the shared pointer, not the raw pointer (that's the whole point of <code>shared_ptr</code>!).</p>\n\n<p>It gets worse: the following code is undefined behavior if <code>foo()</code> returns a pointer instance that had only one reference when <code>foo()</code> returned (e.g. if <code>foo</code> is a simple factory of new objects):</p>\n\n<pre><code>AnotherClass *ptr = m.foo().get();\n// The shared_ptr instance returned by foo() is destroyed at this point\nm.bar(ptr); // undefined behavior: ptr is likely a dangling pointer here\n</code></pre>\n\n<p>Here are the options; consider those listed earlier first before considering their successors.</p>\n\n<ul>\n<li><p>If <code>bar(AnotherClass *)</code> is an external API, then you need to wrap it in a safe way, i.e. the code that would have called <code>Original::bar</code> should be calling <code>MyWrapped::bar</code>, and the wrapper should do whatever lifetime management is necessary. Suppose that there is <code>startUsing(AnotherClass *)</code> and <code>finishUsing(AnotherClass *)</code>, and the code expects the pointer to remain valid between <code>startUsing</code> and <code>finishUsing</code>. Your wrapper would be:</p>\n\n<pre><code>class WithUsing {\n  std::unique_ptr&lt;AnotherClass&gt; owner; /* or shared_ptr if the ownership is shared */\n  std::shared_ptr&lt;User&gt; user;\npublic:\n  WithUsing(std::unique_ptr&lt;AnotherClass&gt; owner, std::Shared_ptr&lt;User&gt; user) :\n    owner(std::move(owner)), user(std::move(user)) {\n    user.startUsing(owner.get());\n  }\n  void bar() const {\n    user.bar(owner.get());\n  }\n  ~WithUsing() {\n    user.finishUsing(owner.get());\n  }\n};\n</code></pre>\n\n<p>You would then use <code>WithUsing</code> as a handle to the <code>User</code> object, and any uses would be done through that handle, ensuring the existence of the object.</p></li>\n<li><p>If <code>AnotherClass</code> is copyable and is very cheap to copy (e.g. it consists of a pointer or two), then pass it by value:</p>\n\n<pre><code>void bar(AnotherClass)\n</code></pre></li>\n<li><p>If the implementation of <code>bar</code> doesn't need to change the value, it can be <em>defined</em> to take a const-value (the declaration can be without the <code>const</code> as it doesn't matter there):</p>\n\n<pre><code>void bar(const AnotherClass a) { ... }\n</code></pre></li>\n<li><p>If <code>bar</code> doesn't store a pointer, then don't pass it a pointer: pass a const reference by default, or a non-const reference if necessary.</p>\n\n<pre><code>void bar(const AnotherClass &amp;a);\nvoid bar_modifies(AnotherClass &amp;a);\n</code></pre></li>\n<li><p>If it makes sense to invoke <code>bar</code> with \"no object\" (a.k.a. \"null\"), then:</p>\n\n<ol>\n<li><p>If passing <code>AnotherClass</code> by value is OK, then use <code>std::optional</code>:</p>\n\n<pre><code>void bar(std::optional&lt;AnotherClass&gt; a);\n</code></pre></li>\n<li><p>Otherwise, if <code>AnotherClass</code> takes ownership, passing <code>unique_ptr</code> works fine since it can be null.</p></li>\n<li><p>Otherwise, passing <code>shared_ptr</code> works fine since it can be null.</p></li>\n</ol></li>\n<li><p>If <code>foo()</code> creates a new object (vs. returning an object that exists already), it should be returning <code>unique_ptr</code> anyway, <em>not</em> a <code>shared_ptr</code>. Factory functions should be returning unique pointers: that's idiomatic C++. Doing otherwise is confusing, since returning a <code>shared_ptr</code> <strong>is meant to express existing shared ownership</strong>.</p>\n\n<pre><code>std::unique_ptr&lt;AnotherClass&gt; foo();\n</code></pre></li>\n<li><p>If <code>bar</code> should take ownership of the value, then it should be accepting a unique pointer - that's the idiom for \"I'm taking over managing the lifetime of that object\":</p>\n\n<pre><code>void bar(std::unique_ptr&lt;const AnotherClass&gt; a);\nvoid bar_modifies(std::unique_ptr&lt;AnotherClass&gt; a);\n</code></pre></li>\n<li><p>If <code>bar</code> should retain shared ownership, then it should be taking <code>shared_ptr</code>, and you will be immediately converting the <code>unique_ptr</code> returned from <code>foo()</code> to a shared one:</p>\n\n<pre><code>struct MyClass {\n  std::unique_ptr&lt;AnotherClass&gt; foo();\n  void bar(std::shared_ptr&lt;const AnotherClass&gt; a);\n  void bar_modifies(std::shared_ptr&lt;AnotherClass&gt; a);\n};\n\nvoid test() {\n  MyClass m;\n  std::shared_ptr&lt;AnotherClass&gt; p{foo()};\n  m.bar(p);\n}\n</code></pre></li>\n</ul>\n\n<p><code>shared_ptr(const Type)</code> and <code>shared_ptr(Type)</code> will share the ownership,\nthey provide a constant view and a modifiable view of the object, respectively. <code>shared_ptr&lt;Foo&gt;</code> is also convertible to <code>shared_ptr&lt;const Foo&gt;</code> (but not the other way round, you'd use <code>const_pointer_cast</code> for that (with caution). You should always default to accessing objects as constants, and only working with non-constant types when there's an explicit need for it.</p>\n\n<p>If a method doesn't modify something, make it self-document that fact by having it accept a reference/pointer to <code>const something</code> instead.</p>\n"}], "owner": {"reputation": 751, "user_id": 9639861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c11315ebf8ac39f99a32084d4fcc83a?s=128&d=identicon&r=PG&f=1", "display_name": "Baptiste Merliot", "link": "https://stackoverflow.com/users/9639861/baptiste-merliot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 58308227, "answer_count": 3, "score": 1, "last_activity_date": 1570640221, "creation_date": 1570636809, "last_edit_date": 1570637840, "question_id": 58308058, "link": "https://stackoverflow.com/questions/58308058/can-smart-pointers-be-implicitly-used-as-pointers", "title": "Can smart pointers be implicitly used as pointers?", "body": "<p>Are smart pointers considered as pointers? And thus can they implicitly used as pointers?</p>\n\n<p>Let's say I have the following class:</p>\n\n<pre><code>class MyClass {\n    //...\n    std::shared_ptr&lt;AnotherClass&gt; foo() { /*whatever*/ };\n    void bar(AnotherClass* a) { /*whatever too*/ };\n    //...\n}\n</code></pre>\n\n<p>Then can I use <code>MyClass</code> the following way?</p>\n\n<pre><code>// m is an instance of MyClass\nm.bar(m.foo());\n</code></pre>\n"}, {"tags": ["c++", "loops", "do-while"], "comments": [{"owner": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "edited": false, "score": 1, "creation_date": 1570638952, "post_id": 58308049, "comment_id": 102978793, "body": "Can you show us what you have tried so far and where do you get stuck? You can&#39;t ask us to complete the assignment for you."}, {"owner": {"reputation": 13, "user_id": 12189778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pWxD1.jpg?s=128&g=1", "display_name": "Audrey", "link": "https://stackoverflow.com/users/12189778/audrey"}, "reply_to_user": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "edited": false, "score": 0, "creation_date": 1570639724, "post_id": 58308049, "comment_id": 102979115, "body": "@simon I already figured it out. Thank you very much."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12189778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pWxD1.jpg?s=128&g=1", "display_name": "Audrey", "link": "https://stackoverflow.com/users/12189778/audrey"}, "edited": false, "score": 1, "creation_date": 1570637769, "post_id": 58308100, "comment_id": 102978265, "body": "Thank you very much mate :) I appreciate it."}], "tags": [], "owner": {"reputation": 686, "user_id": 7449489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MkKo5.jpg?s=128&g=1", "display_name": "JCollier", "link": "https://stackoverflow.com/users/7449489/jcollier"}, "is_accepted": true, "score": 0, "last_activity_date": 1570637748, "last_edit_date": 1570637748, "creation_date": 1570636997, "answer_id": 58308100, "question_id": 58308049, "link": "https://stackoverflow.com/questions/58308049/need-help-converting-to-do-while-loop/58308100#58308100", "title": "Need help converting to do while loop", "body": "<p>Really simple. Just put the header statements of your old <code>for</code> loop in the following places: before the new loop, in the <code>while</code> condition of the new loop, and inside the new loop as the last line of code, respectively.</p>\n\n<p>Here is your old loop code:</p>\n\n<pre><code>for(int i = 1; i &lt;= num; i++){\n  cout&lt;&lt;\"Enter a number: \";\n  cin &gt;&gt; input;\n  sum += input;\n}\n</code></pre>\n\n<p>And here is the new code:</p>\n\n<pre><code>int i = 1;\ndo {\n  cout&lt;&lt;\"Enter a number: \";\n  cin &gt;&gt; input;\n  sum += input;\n  i++;\n} while (i &lt;= num);\n</code></pre>\n\n<p>Don't submit the assignment until you understand what I did, or you'll only be cheating yourself :) \nCheck out <a href=\"https://www.tutorialspoint.com/cplusplus/cpp_do_while_loop.htm\" rel=\"nofollow noreferrer\">this</a> page for more info on a <code>do...while</code> loop. And it sounds like you could use some understanding on <code>for</code> loops as well, so check them out <a href=\"https://www.tutorialspoint.com/cplusplus/cpp_for_loop.htm\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 12189778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pWxD1.jpg?s=128&g=1", "display_name": "Audrey", "link": "https://stackoverflow.com/users/12189778/audrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58308100, "answer_count": 1, "score": 0, "last_activity_date": 1570638637, "creation_date": 1570636774, "last_edit_date": 1570638637, "question_id": 58308049, "link": "https://stackoverflow.com/questions/58308049/need-help-converting-to-do-while-loop", "title": "Need help converting to do while loop", "body": "<p>I am new to programming and I have an assignment to do in C++. I need to convert this to do while loop.  Can someone help me out? Thanks in advance. </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\nint num;\nfloat input, sum=0, avg;\n\ncout&lt;&lt;\"Input the amount of numbers: \";\ncin &gt;&gt; num; \n\nfor(int i = 1; i &lt;= num; i++){\n  cout&lt;&lt;\"Enter a number: \";\n  cin &gt;&gt; input;\n  sum += input;\n}\n\navg = sum / num;\ncout &lt;&lt; \"The average is = \" &lt;&lt; avg &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "floating-point", "language-lawyer", "undefined-behavior"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570636854, "post_id": 58308042, "comment_id": 102977809, "body": "[Tangent] When you measured performance, did you do so in a release (optimized) build?"}, {"owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570636905, "post_id": 58308042, "comment_id": 102977833, "body": "@NathanOliver sure :)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1570640909, "post_id": 58308042, "comment_id": 102979629, "body": "I don&#39;t think anything in IEEE-754 would forbid an implementation from storing <code>uint32_t</code> little-endian but <code>float</code> big-endian, nor do I think anything would forbid a contrived implementation from adding padding to <code>float</code> which could cause the code to overwrite storage following <code>u</code>.  On the other hand, the fact that the Standard doesn&#39;t forbid implementations from breaking code doesn&#39;t mean that the code shouldn&#39;t be reliable on quality general-purpose implementations for all remotely-commonplace platforms."}, {"owner": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "edited": false, "score": 0, "creation_date": 1570655644, "post_id": 58308042, "comment_id": 102985835, "body": "What about denormal?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1570661322, "post_id": 58308042, "comment_id": 102987364, "body": "<code>0xff &lt;&lt; 23</code>, <code>126 &lt;&lt; 23</code> are UB with 16-bit <code>int&#47;unsigned</code>.  Code fails to perform as desired for sub-normals, NaN, infinity."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1570789115, "post_id": 58308042, "comment_id": 103033828, "body": "I&#39;m voting to close this question as off-topic because it is <a href=\"https://codereview.stackexchange.com/help/on-topic\">seeking peer review of your code</a> instead of asking <a href=\"https://stackoverflow.com/help/on-topic\">a specific programming problem</a>.  However, this question should be a good fit for <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}, {"owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570791338, "post_id": 58308042, "comment_id": 103034900, "body": "@chux you are absolutely right! I adjusted the code accordingly. Also I failed to mention that I&#39;m not handling subnormals on purpose. I fixed that in the question."}, {"owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1570791515, "post_id": 58308042, "comment_id": 103034997, "body": "@L.F. I agree, the wording of the title suggests that I&#39;m looking for a code review. However, I&#39;m actually only interested whether the bit pattern is well defined by the standard. I rephrased the title accordingly."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1576533612, "post_id": 59364808, "comment_id": 104923571, "body": "IMO this is excessively pessimistic. Also, <code>memcpy</code> never violates strict aliasing in C++  (that&#39;s a C thing)."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1576533756, "post_id": 59364808, "comment_id": 104923622, "body": "@M.M Oh yeah, totally. But OP asked if it was <i>well defined</i> and stuck a <code>language-lawyer</code> tag on it."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1576535410, "post_id": 59364808, "comment_id": 104924175, "body": "@M.M regarding strict aliasing, it&#39;s not a guarantee, because at least a few architectures use different endianness for float and int registers: <a href=\"https://en.wikipedia.org/wiki/Endianness#Floating-point_and_endianness\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Endianness#Floating-point_and_endianne&zwnj;&#8203;ss</a> . As the link states, it&#39;s unreasonably pessimistic, but again, <code>language-lawyer</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1576535471, "post_id": 59364808, "comment_id": 104924201, "body": "That&#39;s still not a strict aliasing problem , it just means you get different bits than you expected"}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1576535753, "post_id": 59364808, "comment_id": 104924311, "body": "@M.M Exactly! I know it&#39;s unreasonably pessimistic and pedantic (even the link says so), but to get the mantissa of a binary32 you shift/mask the bits of the integer representation. If the bits are different, you get the wrong answer."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1576541316, "post_id": 59364808, "comment_id": 104925648, "body": "@M.M After a second read, I think you have a good point about about behavior vs &quot;the problem&quot;. I changed my answer to be a little more nuanced about it."}], "tags": [], "owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "is_accepted": true, "score": 1, "last_activity_date": 1576542932, "last_edit_date": 1576542932, "creation_date": 1576533304, "answer_id": 59364808, "question_id": 58308042, "link": "https://stackoverflow.com/questions/58308042/if-stdnumeric-limitsfloatis-iec559-is-true-does-that-mean-that-i-can-extr/59364808#59364808", "title": "If std::numeric_limits&lt;float&gt;::is_iec559 is true, does that mean that I can extract exponent and mantissa in a well defined way?", "body": "<blockquote>\n  <p><strong>\"Does this mean that the bit operations I'm doing are well defined...\"</strong></p>\n</blockquote>\n\n<p>The TL;DR;, by the strict definition of \"well defined\": <strong>no</strong>.</p>\n\n<p>Your assumptions are <em>likely correct</em> but not <em>well defined</em>, because there are no guarantees about the bit width, or the implementation of <code>float</code>. From \u00a7 3.9.1:</p>\n\n<blockquote>\n  <p>there are three floating point types: float, double, and long double. The type double provides at least as much precision as float, and the type long double provides at least as much precision as double. The set of values of the type float is a subset of the set of values of the type double; the set of values of the type double is a subset of the set of values of the type long double. The value representation of floating-point types is implementation-defined. </p>\n</blockquote>\n\n<p>The <code>is_iec559</code> clause only qualifies with:</p>\n\n<blockquote>\n  <p>True if and only if the type adheres to IEC 559 standard</p>\n</blockquote>\n\n<p>If a literal genie wrote you a terrible compiler, and made <code>float</code> = <em>binary16</em>, <code>double</code> =  <em>binary32</em>, and <code>long double</code> = <em>binary64</em>, and made <code>is_iec559</code> true for all the types, it would still adhere to the standard. </p>\n\n<blockquote>\n  <p><strong>does that mean that I can extract exponent and mantissa in a well defined way?</strong></p>\n</blockquote>\n\n<p>The TL;DR;, by the limited guarantees of the C++ standard: <strong>no</strong>.</p>\n\n<p>Assume you use <code>float32_t</code> and <code>is_iec559</code> is true, and logically deduced from all the rules that it could only be <em>binary32</em> with no trap representations, and you correctly argued that <code>memcpy</code> is a well defined for conversion between arithmetic types of the same width, and won't break strict aliasing. Even with all those assumptions, the behavior might be <em>well defined</em> but it's only <em>likely</em> and not <em>guaranteed</em> that you can extract the mantissa this way. </p>\n\n<p>The IEEE 754 standard and 2's complement regard <em>bit string  encodings</em>, and the behavior of <code>memcpy</code> is described using <em>bytes</em>. While it's plausible to assume the bit string of <code>uint32_t</code> and <code>float32_t</code> would be encoded the same way (e.g. same endianness), there's no guarantee in the standard for that. If the bit strings are stored differently and you shift and mask the copied integer representation to get the mantissa, the answer will be incorrect, despite the <code>memcpy</code> behavior being well defined.</p>\n\n<blockquote>\n  <p><strong>As mentioned in the comments, endianess could be an issue. Does anybody know?</strong></p>\n</blockquote>\n\n<p>At least <a href=\"https://en.wikipedia.org/wiki/Endianness#Floating-point_and_endianness\" rel=\"nofollow noreferrer\">a few architectures</a> have used different endianness for floating point registers and integer registers. The same link says that except for small embedded processors, this isn't a concern. I trust Wikipedia entirely for all topics and refuse to do any further research.</p>\n"}], "owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 1, "accepted_answer_id": 59364808, "answer_count": 1, "score": 3, "last_activity_date": 1576542932, "creation_date": 1570636704, "last_edit_date": 1570791649, "question_id": 58308042, "link": "https://stackoverflow.com/questions/58308042/if-stdnumeric-limitsfloatis-iec559-is-true-does-that-mean-that-i-can-extr", "title": "If std::numeric_limits&lt;float&gt;::is_iec559 is true, does that mean that I can extract exponent and mantissa in a well defined way?", "body": "<p>I've built a custom version of <a href=\"https://en.cppreference.com/w/cpp/numeric/math/frexp\" rel=\"nofollow noreferrer\"><code>frexp</code></a>:</p>\n\n<pre><code>auto frexp(float f) noexcept\n{\n    static_assert(std::numeric_limits&lt;float&gt;::is_iec559);\n\n    constexpr uint32_t ExpMask = 0xff;\n    constexpr int32_t ExpOffset = 126;\n    constexpr int MantBits = 23;\n\n    uint32_t u;\n    std::memcpy(&amp;u, &amp;f, sizeof(float)); // well defined bit transformation from float to int\n\n    int exp = ((u &gt;&gt; MantBits) &amp; ExpMask) - ExpOffset; // extract the 8 bits of the exponent (it has an offset of 126)\n\n    // divide by 2^exp (leaving mantissa intact while placing \"0\" into the exponent)\n    u &amp;= ~(ExpMask &lt;&lt; MantBits); // zero out the exponent bits\n    u |= ExpOffset &lt;&lt; MantBits; // place 126 into exponent bits (representing 0)\n\n    std::memcpy(&amp;f, &amp;u, sizeof(float)); // copy back to f\n    return std::make_pair(exp, f);\n}\n</code></pre>\n\n<p>By checking <a href=\"https://en.cppreference.com/w/cpp/types/numeric_limits/is_iec559\" rel=\"nofollow noreferrer\"><code>is_iec559</code></a> I'm making sure that <code>float</code> fulfills</p>\n\n<blockquote>\n  <p>the requirements of IEC 559 (IEEE 754) standard.</p>\n</blockquote>\n\n<p>My question is: <strong>Does this mean that the bit operations I'm doing are well defined and do what I want?</strong> If not, is there a way to fix it?</p>\n\n<p>I tested it for some random values and it seems to be correct, at least on Windows 10 compiled with msvc and on <a href=\"https://wandbox.org/permlink/VdKLHXtSaqB6B4KR\" rel=\"nofollow noreferrer\">wandbox</a>. Note however, that (on purpose) I'm not handling the edge cases of subnormals, <code>NaN</code>, and <code>inf</code>.</p>\n\n<p>If anyone wonders why I'm doing this: In benchmarks I found that this version of <code>frexp</code> is up to 15 times faster than <code>std::frexp</code> on Windows 10. I haven't tested other platforms yet. But I want to make sure that this not just works by coincident and may brake in future.</p>\n\n<h2>Edit:</h2>\n\n<p>As mentioned in the comments, endianess could be an issue. Does anybody know?</p>\n"}, {"tags": ["c++", "oop", "pointers"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570636437, "post_id": 58307897, "comment_id": 102977616, "body": "This would be the duplicate if you had correctly used virtual methods to implement overriding: <a href=\"https://stackoverflow.com/questions/672373/can-i-call-a-base-classs-virtual-function-if-im-overriding-it\" title=\"can i call a base classs virtual function if im overriding it\">stackoverflow.com/questions/672373/&hellip;</a>."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1570636697, "post_id": 58307897, "comment_id": 102977735, "body": "What do you mean &quot;what is the purpose of having this line&quot;?  If you don&#39;t know why it is there, why do you have it?  Is this a homework question?"}, {"owner": {"reputation": 87, "user_id": 12003811, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZzP-vQrQ2_E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftz6VngIJkF6XSocqGDvoqcLV39Q/photo.jpg?sz=128", "display_name": "zZzZ", "link": "https://stackoverflow.com/users/12003811/zzzz"}, "edited": false, "score": 0, "creation_date": 1570636955, "post_id": 58307897, "comment_id": 102977855, "body": "Yup this is a homework question.The code structure given cannot be modified.I&#39;m only allowed to add my code in that specified area.I&#39;m able to produce the desired output but this line  &quot;Parent *p = new Child();&quot; is not useful at all for my solution.So I wonder what is the purpose of having this line..."}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 4, "last_activity_date": 1570636748, "creation_date": 1570636748, "answer_id": 58308045, "question_id": 58307897, "link": "https://stackoverflow.com/questions/58307897/how-to-call-the-overriden-function-of-parent-class-in-c/58308045#58308045", "title": "How to call the overriden function of parent class in C++?", "body": "<p>There are several points to make here:</p>\n\n<ol>\n<li><p><code>Child</code> is not overriding anything, it is only hiding the base class method. Overriding would require <code>virtual</code> member functions, and you can verify that a method actually overrides a base class function by adding the <code>override</code> keyword. Neither class is polymorphic, because there are no virtual methods anywhere.</p></li>\n<li><p>Since your classes are not polymorphic, you will only ever have static binding, no dynamic binding. (You correctly identified this happening).</p></li>\n<li><p>To call a base class function that was overridden or hidden in a derived class, you prefix the call with the base class name and <code>::</code>, like so:</p>\n\n<pre><code>class Child : public Parent{\n  int b;\n  public:\n    void display(){\n      Parent::display();\n    }\n};\n\n// or\n\nint main()\n{\n  Child c;\n  c.Parent::display();\n}\n</code></pre></li>\n<li><p>There is no difference between <code>Parent *p = new Child();</code> and <code>Parent *p = new Child;</code> in your code, both call the default constructor to initialize a new child object. For types like <code>int</code> there is a difference, <code>new int;</code> creates an uninitialized <code>int</code> object, <code>new int();</code> (or <code>new int{};</code>) initializes it to zero instead.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 12003811, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZzP-vQrQ2_E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftz6VngIJkF6XSocqGDvoqcLV39Q/photo.jpg?sz=128", "display_name": "zZzZ", "link": "https://stackoverflow.com/users/12003811/zzzz"}, "edited": false, "score": 0, "creation_date": 1570637868, "post_id": 58308095, "comment_id": 102978306, "body": "If the parenthesis doesn&#39;t hold any value, means it&#39;s the same as the one without parenthesis,is it?"}, {"owner": {"reputation": 87, "user_id": 12003811, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZzP-vQrQ2_E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftz6VngIJkF6XSocqGDvoqcLV39Q/photo.jpg?sz=128", "display_name": "zZzZ", "link": "https://stackoverflow.com/users/12003811/zzzz"}, "edited": false, "score": 0, "creation_date": 1570637933, "post_id": 58308095, "comment_id": 102978329, "body": "Someone told me this is an upcasting &quot;Parent *p = new Child&quot; ..."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 87, "user_id": 12003811, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZzP-vQrQ2_E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftz6VngIJkF6XSocqGDvoqcLV39Q/photo.jpg?sz=128", "display_name": "zZzZ", "link": "https://stackoverflow.com/users/12003811/zzzz"}, "edited": false, "score": 0, "creation_date": 1570638001, "post_id": 58308095, "comment_id": 102978352, "body": "@XinYi Yes. There is an implicit conversion from derived pointer to base pointer. Such conversion is called an upcast. Similar conversion is done on the line <code>Parent* a = &amp;c</code>."}, {"owner": {"reputation": 87, "user_id": 12003811, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZzP-vQrQ2_E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftz6VngIJkF6XSocqGDvoqcLV39Q/photo.jpg?sz=128", "display_name": "zZzZ", "link": "https://stackoverflow.com/users/12003811/zzzz"}, "edited": false, "score": 0, "creation_date": 1570639176, "post_id": 58308095, "comment_id": 102978872, "body": "In that case, I can also use p-&gt;display(); to get the desired output.Thank you very much!!!! =]"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 1, "last_activity_date": 1570638077, "last_edit_date": 1570638077, "creation_date": 1570636967, "answer_id": 58308095, "question_id": 58307897, "link": "https://stackoverflow.com/questions/58307897/how-to-call-the-overriden-function-of-parent-class-in-c/58308095#58308095", "title": "How to call the overriden function of parent class in C++?", "body": "<blockquote>\n  <p>How to call the overriden function of parent class in C++?</p>\n</blockquote>\n\n<p>You haven't actually overridden any function in your example. Only virtual member functions can be overridden, and <code>display</code> is non-virtual.</p>\n\n<blockquote>\n  <p>I made use of static binding to successfully call the display() member function of the parent class</p>\n</blockquote>\n\n<p>Your solution works because there is no overriding or virtual functions involved. Another way to call the hidden member function is to use the scope resolution operator:</p>\n\n<pre><code>c.Parent::display();\n</code></pre>\n\n<p>This would use static binding even if the function was virtual.</p>\n\n<hr>\n\n<blockquote>\n  <p>What is the purpose of having this line <code>Parent *p = new Child();</code>?</p>\n</blockquote>\n\n<p>It doesn't seem to have any purpose in your program. In general, <code>new</code> is used to allocate objects dynamically from the free store.</p>\n\n<p>Note that the memory will be leaked unless you explicitly deallocate it with <code>delete</code>. Also not that <code>delete p</code> would have undefined behaviour, because it points to a base whose destructor is non-virtual.</p>\n\n<blockquote>\n  <p>Is it a pointer pointing to a constructor?</p>\n</blockquote>\n\n<p>No. <code>p</code> points to the dynamic object that was created in the free store.</p>\n\n<blockquote>\n  <p>What is the difference between that line and <code>Parent *p = new Child;</code>? </p>\n</blockquote>\n\n<p>Without parentheses, you use default initialisation syntax. With empty parentheses you use value initialisation.</p>\n\n<p>In the case of trivially constrtuctible classes (such as <code>Parent</code>), default initialisation will default initialise the members. In case of integer members, this leaves the members uninitialised. Value initialisation will instead value initialise the members, which for integers means initialisation to zero.</p>\n\n<p>In the case of non-trivially constructible classes (such as <code>Child</code>), both default and value initialisation invoke the default constructor.</p>\n"}], "owner": {"reputation": 87, "user_id": 12003811, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZzP-vQrQ2_E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftz6VngIJkF6XSocqGDvoqcLV39Q/photo.jpg?sz=128", "display_name": "zZzZ", "link": "https://stackoverflow.com/users/12003811/zzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 58308095, "answer_count": 2, "score": -1, "last_activity_date": 1570638077, "creation_date": 1570636169, "last_edit_date": 1570637020, "question_id": 58307897, "link": "https://stackoverflow.com/questions/58307897/how-to-call-the-overriden-function-of-parent-class-in-c", "title": "How to call the overriden function of parent class in C++?", "body": "<p>The expected output:</p>\n\n<pre><code>Child = 2\nParent = 1\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>class Parent{\n    int a;\n    public:\n        void display(){\n            a = 1;\n            cout &lt;&lt; \"Parent = \" &lt;&lt; a &lt;&lt; endl;\n        }\n};\n\nclass Child:public Parent{\n    int b;\n    public:\n        void display(){\n            b = 2;\n            cout &lt;&lt; \"Child = \" &lt;&lt; b &lt;&lt; endl;\n        }\n};\n\nint main()\n{\n    Parent *p = new Child();\n    Child c;\n\n    //write your code here\n    /* My solution :\n      c.display();\n      Parent* a = &amp;c;\n      a-&gt;display();\n    */\n\n\n}\n</code></pre>\n\n<p>I made use of static binding to successfully call the display() member function of the parent class</p>\n\n<p>However, I wonder if there is any better solution for this question.</p>\n\n<p>What is the purpose of having this line <code>Parent *p = new Child();</code>?  Is it a pointer pointing to a constructor?</p>\n\n<p>What is the difference between that line and <code>Parent *p = new Child;</code>? </p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1570635716, "post_id": 58307697, "comment_id": 102977222, "body": "Please provide the sample text it fails on. BTW, the last <code>\\n</code> should be optional to match the comment on the last line of text, <code>&quot;#.*\\n?&quot;</code>. Also, try <code>&quot;#.*[\\r\\n]*&quot;</code>"}, {"owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "edited": false, "score": 0, "creation_date": 1570635807, "post_id": 58307697, "comment_id": 102977263, "body": "Try escaping the backslah: <code>(&quot;#.*\\\\n&quot;);</code>"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1570635975, "post_id": 58307697, "comment_id": 102977351, "body": "Please extract and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. As a new user here, also take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1570638151, "post_id": 58307697, "comment_id": 102978420, "body": "It worked for me.  I used <code>auto fullText = string(&quot;#one two\\nthree four\\n#five six\\nseven eight\\nnine #ten\\n&quot;);</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1570642583, "post_id": 58307697, "comment_id": 102980421, "body": "Some issues to think about:  1) <code>char t[] = &quot;&#47;&#47;&quot;;</code> is not a commented line; 2) <code>&#47;* double backslashes: &#47;&#47; *&#47;</code> uses C-Style comments and the &quot;//&quot; is not the start of a comment; 3) Similarly, <code>char u[] = &quot;&#47;* not a comment *&#47;&quot;;</code> is not a comment.  Regular expressions may not be the correct choice for parsing comments."}, {"owner": {"reputation": 33, "user_id": 1671127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117d7fc8f35a26c38490a5bfca019bc0?s=128&d=identicon&r=PG", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/1671127/abdullah"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1570702034, "post_id": 58307697, "comment_id": 102999935, "body": "@WiktorStribi\u017cew, {&quot;#.*[\\r\\n]*&quot;} worked. Could you elaborate what was wrong before"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1570702112, "post_id": 58307697, "comment_id": 102999972, "body": "<code>\\n</code> does not match CR chars. <code>\\r</code> does. And <code>.</code> does not match carriage returns in the ECMAScript 5 compliant regex."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 1671127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117d7fc8f35a26c38490a5bfca019bc0?s=128&d=identicon&r=PG", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/1671127/abdullah"}, "edited": false, "score": 1, "creation_date": 1570703107, "post_id": 58320502, "comment_id": 103000500, "body": "Thanks, well explained!"}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1570702211, "creation_date": 1570702211, "answer_id": 58320502, "question_id": 58307697, "link": "https://stackoverflow.com/questions/58307697/remove-line-comment-from-file-by-using-regex/58320502#58320502", "title": "remove line comment from file by using regex", "body": "<p>The point here is that <code>.</code> does not match carriage returns in the ECMAScript 5 compliant regex and <code>\\n</code> pattern does not match CR chars while <code>\\r</code> does. </p>\n\n<p>You may fix the issue by using <code>[\\r\\n]*</code> at the end of the pattern:</p>\n\n<pre><code>std::regex pattern{\"#.*[\\r\\n]*\"};\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 1671127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117d7fc8f35a26c38490a5bfca019bc0?s=128&d=identicon&r=PG", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/1671127/abdullah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 58320502, "answer_count": 1, "score": -1, "last_activity_date": 1570702211, "creation_date": 1570635574, "last_edit_date": 1570693392, "question_id": 58307697, "link": "https://stackoverflow.com/questions/58307697/remove-line-comment-from-file-by-using-regex", "title": "remove line comment from file by using regex", "body": "<p>I used the pattern below to remove comment lines from file, and succeed it in Visual Studio Editor. However, the same pattern didn't work with C++ regex class.  </p>\n\n<pre><code>std::regex pattern (\"#.*\\n\");\nfullText =  std::regex_replace (fullText,pattern,\"\");\n</code></pre>\n\n<p>Code above is a very brief part from the implementation: You can assume all text is read into <code>fullText</code> at once.</p>\n\n<p>Actual results must remove all comment lines from file/string. Trailing comments can be ignored.</p>\n\n<p>Sample file is .txt extension and has the text below:</p>\n\n<pre><code># Initialization file..\n# This file supports line comments, and does not support trailing comments.\n# Text here is not case sensitive.\n# White spaces are ignored in file processing. \n# Values are comma \",\" separated. \n\n\nColmn,          Colmn,  \n1,              0xFF,\n2,              0xFF, \n3,              0xFF,\n4,              0xFF,\n5,              0xFF,\n</code></pre>\n\n<p>I assume all lines must be finished with <code>\\n</code>, and I attempt to select all text between <code>#</code> and <code>\\n</code>.</p>\n\n<p>Thanks in advance for the any advice.</p>\n"}, {"tags": ["c++", "function", "class", "binary-tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1570635076, "post_id": 58307510, "comment_id": 102976845, "body": "Are you talking about a member function? Like <code>MyClass::swapTrees(MyClass&amp; other)</code>"}, {"owner": {"reputation": 147, "user_id": 9312204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c83b3dea4dabd6c79c8634664a59354?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/9312204/david"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1570635189, "post_id": 58307510, "comment_id": 102976918, "body": "Yes. I suppose I need some help-functions."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1570635246, "post_id": 58307510, "comment_id": 102976952, "body": "You could probably use <code>std::swap</code>."}], "answers": [{"tags": [], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "is_accepted": false, "score": 0, "last_activity_date": 1570635374, "creation_date": 1570635374, "answer_id": 58307635, "question_id": 58307510, "link": "https://stackoverflow.com/questions/58307510/how-to-implement-function-with-one-argument-that-swaps-private-content-of-object/58307635#58307635", "title": "How to implement function with one argument that swaps private content of objects", "body": "<p>Well you can create a member function and call <code>std::swap</code> on your tree:</p>\n\n<pre><code>class MyClass\n{\npublic:\n    void swapTrees(MyClass&amp; other)\n    {\n        std::swap(tree, other.tree);\n    }\n\nprivate:\n    Tree tree;    \n};\n</code></pre>\n\n<p>Usage is</p>\n\n<pre><code>MyCalss a, b;\na.swapTrees(b);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147, "user_id": 9312204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c83b3dea4dabd6c79c8634664a59354?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/9312204/david"}, "edited": false, "score": 0, "creation_date": 1570635923, "post_id": 58307716, "comment_id": 102977326, "body": "This looks like something along the lines of what I was looking for. I will get back to programming a bit later on today and get back to you, thanks."}, {"owner": {"reputation": 147, "user_id": 9312204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c83b3dea4dabd6c79c8634664a59354?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/9312204/david"}, "edited": false, "score": 0, "creation_date": 1570637200, "post_id": 58307716, "comment_id": 102977975, "body": "By the way I have never seen explicit and noexcept used before. Are they necessary? I don&#39;t know if my examinator will allow me to use them."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 147, "user_id": 9312204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c83b3dea4dabd6c79c8634664a59354?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/9312204/david"}, "edited": false, "score": 0, "creation_date": 1570637241, "post_id": 58307716, "comment_id": 102977994, "body": "@David Then exclude them.:)"}, {"owner": {"reputation": 147, "user_id": 9312204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c83b3dea4dabd6c79c8634664a59354?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/9312204/david"}, "edited": false, "score": 0, "creation_date": 1570653109, "post_id": 58307716, "comment_id": 102984843, "body": "Just wanted to let you know that it worked great, thank you very much."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1570636183, "last_edit_date": 1570636183, "creation_date": 1570635614, "answer_id": 58307716, "question_id": 58307510, "link": "https://stackoverflow.com/questions/58307510/how-to-implement-function-with-one-argument-that-swaps-private-content-of-object/58307716#58307716", "title": "How to implement function with one argument that swaps private content of objects", "body": "<p>Here is a demonstrative program that shows how a member function swap can be defined.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n\nclass A\n{\nprivate:\n    int x;\npublic:\n    explicit A( int x = 0 ) : x( x ) {}\n\n    void swap( A &amp;a ) noexcept\n    {\n        int tmp = std::move( a.x );\n        a.x = std::move( this-&gt;x );\n        this-&gt;x = std::move( tmp );\n    }\n\n    void swap( A &amp;&amp;a ) noexcept\n    {\n        int tmp = std::move( a.x );\n        a.x = std::move( this-&gt;x );\n        this-&gt;x = std::move( tmp );\n    }\n\n\n    const int &amp; getX() const { return x; }\n};\n\nint main() \n{\n    A a1( 10 );\n    A a2( 20 );\n\n    std::cout &lt;&lt; \"a1.x = \" &lt;&lt; a1.getX() &lt;&lt; '\\n';\n    std::cout &lt;&lt; \"a2.x = \" &lt;&lt; a2.getX() &lt;&lt; '\\n';\n\n    a1.swap( a2 );\n\n    std::cout &lt;&lt; \"a1.x = \" &lt;&lt; a1.getX() &lt;&lt; '\\n';\n    std::cout &lt;&lt; \"a2.x = \" &lt;&lt; a2.getX() &lt;&lt; '\\n';\n\n    a1.swap( A( 30 ) );\n\n    std::cout &lt;&lt; \"a1.x = \" &lt;&lt; a1.getX() &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>a1.x = 10\na2.x = 20\na1.x = 20\na2.x = 10\na1.x = 30\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 9312204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c83b3dea4dabd6c79c8634664a59354?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/9312204/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58307716, "answer_count": 2, "score": -1, "last_activity_date": 1570636183, "creation_date": 1570634910, "question_id": 58307510, "link": "https://stackoverflow.com/questions/58307510/how-to-implement-function-with-one-argument-that-swaps-private-content-of-object", "title": "How to implement function with one argument that swaps private content of objects", "body": "<p>I have created a class which stores a private expression tree. I have to add a function to this class which takes its own type as an argument and swaps the trees of these objects. If I could use 2 arguments I suppose I could create a friend function. I would appreciate some ideas as to how I could go about implementing such a function. </p>\n"}, {"tags": ["c++", "opencv", "grayscale", "hdl"], "comments": [{"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1570633788, "post_id": 58307054, "comment_id": 102976152, "body": "Yes OpenCV color conversion is biased <a href=\"https://docs.opencv.org/3.4/de/d25/imgproc_color_conversions.html\" rel=\"nofollow noreferrer\">docs.opencv.org/3.4/de/d25/imgproc_color_conversions.html</a>"}, {"owner": {"reputation": 3, "user_id": 12188289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2acfab6dd272d54cf80ba65bb4fd1e7f?s=128&d=identicon&r=PG", "display_name": "Rob Jolley", "link": "https://stackoverflow.com/users/12188289/rob-jolley"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1570644693, "post_id": 58307054, "comment_id": 102981399, "body": "Thanks Konrad  Rob"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12188289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2acfab6dd272d54cf80ba65bb4fd1e7f?s=128&d=identicon&r=PG", "display_name": "Rob Jolley", "link": "https://stackoverflow.com/users/12188289/rob-jolley"}, "edited": false, "score": 0, "creation_date": 1570638121, "post_id": 58307407, "comment_id": 102978404, "body": "Hi Paul,  Thank you for your quick response.  Your pseudocode turned out to be very close to actual C++ code that worked.  See below.    Not being particularly C++ savy I had tried something similar accessing each RGB element with at.&lt;uchar&gt; getting out of bounds and thinking it was a problem with how I was addressing the individual channel rather than the type or I was returning a 1/4 of the image for some reason"}], "tags": [], "owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "is_accepted": true, "score": 0, "last_activity_date": 1570634560, "creation_date": 1570634560, "answer_id": 58307407, "question_id": 58307054, "link": "https://stackoverflow.com/questions/58307054/color-to-grayscale-conversion/58307407#58307407", "title": "Color to grayscale conversion", "body": "<p>Our vision does not perceive linearly the brightness, so it makes sense for usual applications to use some sort of transformation that tries to mimic the human perception.</p>\n\n<p>For your application, you have 2 options: either use a similar transformation in HDL (which might not be easy or desired), or make a custom rgb to grayscale for OpenCV which uses the same transformation you use.</p>\n\n<p>A short snippet (more like pseudocode, you'll have to figure out the details) for this would be something like:</p>\n\n<pre><code>cv::Mat linearRgbToGray(const cv::Mat &amp;color) {\n    cv::Mat gray(color.size(), CV_8UC1);\n    for (int i = 0; i &lt; color.rows; i++)\n        for (int j = 0; j &lt; color.cols; j++)\n           gray.at(i, j) = (color.at(i, j)[0] + color.at(i, j)[1] + color.at(i, j)[2]) / 3;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 12188289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2acfab6dd272d54cf80ba65bb4fd1e7f?s=128&d=identicon&r=PG", "display_name": "Rob Jolley", "link": "https://stackoverflow.com/users/12188289/rob-jolley"}, "is_accepted": false, "score": 0, "last_activity_date": 1570638522, "creation_date": 1570638522, "answer_id": 58308512, "question_id": 58307054, "link": "https://stackoverflow.com/questions/58307054/color-to-grayscale-conversion/58308512#58308512", "title": "Color to grayscale conversion", "body": "<p>As per Paul92's advice above</p>\n\n<pre><code>cv::Mat linearRgbToGray(const cv::Mat &amp;color) {\n            cv::Mat gray(color.size(), CV_8UC1);\n            for (int i = 0; i &lt; color.rows; i++)\n                        for (int j = 0; j &lt; color.cols; j++)\n                                    gray.at&lt;uchar&gt;(i, j) = ((color.at&lt;cv::Vec3b&gt;(i, j)[0] + color.at&lt;cv::Vec3b&gt;(i, j)[1] + color.at&lt;cv::Vec3b&gt;(i, j)[2]) / 3);\n            return gray;\n}\n</code></pre>\n\n<p>The above code worked and overcame out of bounds errors I experienced earlier.  Thank you,  Rob.</p>\n"}], "owner": {"reputation": 3, "user_id": 12188289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2acfab6dd272d54cf80ba65bb4fd1e7f?s=128&d=identicon&r=PG", "display_name": "Rob Jolley", "link": "https://stackoverflow.com/users/12188289/rob-jolley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 58307407, "answer_count": 2, "score": 0, "last_activity_date": 1570638522, "creation_date": 1570633245, "last_edit_date": 1570634193, "question_id": 58307054, "link": "https://stackoverflow.com/questions/58307054/color-to-grayscale-conversion", "title": "Color to grayscale conversion", "body": "<p>Im using a C++ openCV program for first principles Algorithm development for HDL(Verilog) image object detection.  I've finally managed to get HDL version up to the point of canny detection.  In order to validate the two,  both need to have identical output.  I have found their are subtle differences that I thing are being contributed to by the openCV imread colour to grayscale conversion biasing green. The smoothed image is overall brighter in the openCV C++ method.  From looking at the rgb2gray method it appears openCV used a bias ie (R<em>X+G</em>Y+B*Z)/3 while in HDL I have been using (R+G+B)/3 as I require it to complete Gaussian, Sobel and Canny filters.  Human visualisation is secondary and multiplication by a non-int is undesirable.</p>\n\n<p>Is there a standard linear grayscale conversion for conversion or a means to override the existing method?\n...</p>\n\n<pre><code>int main()\n{\n            int thold = 15;\n\n            clock_t start;\n            double duration;\n            const int sobelX[3][3] = { {-1, 0, 1}, {-2, 0, 2}, {-1, 0, 1} };  //Where origionally floats in python\n            const int sobelY[3][3] = { {-1, -2, -1}, {0, 0, 0}, {1, 2, 1} }; //Where origionally floats in python\n            const int kernel[5][5] = { {1,6,12,6,1},\n                                                                                                {6,42,79,42,6},\n                                                                                                                        {12,79,148,79,12},\n                                                                                                                        {6,42,79,42,6},\n                                                                                                                        {1,6,12,6,1} };// 1/732\n            // Above normalised kernal for smoothing,  see origional python script for method \n            start = std::clock();\n            int height, width, intPixel, tSx, tSy, tS, dirE, dirEE, maxDir, curPoint, contDirection, cannyImgPix, nd, tl, tm, tr, mr, br, bm, bl, ml = 0;\n            int contNum = 128;\n            int contPixCount = 0;\n            int curContNum = 0;\n            int contPlace = 0;\n            int oldContPlace = 0;\n            int g = 0;\n            bool maxPoint;\n            struct pixel {\n                        int number;\n                        int h;\n                        int w;\n\n            };\n            std::vector&lt;pixel&gt; contourList;\n            //double floatPixel = 0.0;\n            int kernalCumulator = 0;\n            const int mp = 3;\n        //  Scalar color(0, 0, 255);\n            //          duration = ((clock()) - start) / (double)CLOCKS_PER_SEC;\n            //          start = clock();\n            //          cout &lt;&lt; \"Start image in\" &lt;&lt; duration &lt;&lt; '\\n';\n            //          Mat dst;\n            Mat rawImg = imread(\"C:\\\\Users\\\\&amp;&amp;&amp;\\\\Documents\\\\pycode\\\\paddedGS.png\",0);\n            printf(\"%d\",rawImg.type());\n\n//          Mat rawImg = imread(\"C:\\\\Users\\\\&amp;&amp;&amp;\\\\Documents\\\\openCV_Master\\\\openCVexample\\\\openCVexample\\\\brace200.jpg \", 0);\n            height = rawImg.rows;\n            width = rawImg.cols;\n            cout &lt;&lt; \"Height of image \" &lt;&lt; height &lt;&lt; '\\n';\n            cout &lt;&lt; \"Width of image \" &lt;&lt; width &lt;&lt; '\\n';\n            Mat filteredImg = Mat::zeros(height, width, CV_8U);\n            printf(\"%d\", filteredImg.type());\n            Mat sobelImg = Mat::zeros(height, width, CV_8U);\n            Mat directionImg = Mat::zeros(height, width, CV_8U);\n            Mat cannyImg = Mat::zeros(height, width, CV_8U);\n            Mat contourImg = Mat::zeros(height, width, CV_16U);\n\n//          rawImg.convertTo(rawImg, CV_8UC1);\n\n            duration = ((clock()) - start) / (double)CLOCKS_PER_SEC;\n            start = clock();\n            cout &lt;&lt; \"Start image in\" &lt;&lt; duration &lt;&lt; '\\n';\n            // Loop to threshold already grayscaled image           \n            /*\n            for (int h = 0; h &lt; (height); h++)\n            {\n                        for (int w = 0; w &lt; (width); w++)\n                        {\n                                    g = (int)rawImg.at&lt;uchar&gt;(h, w,0);\n                                    cout &lt;&lt; g &lt;&lt; \"g\";\n                                    g+= (int)rawImg.at&lt;uchar&gt;(h, w, 1);\n                                    cout &lt;&lt; g &lt;&lt; \"g\";\n                                    g+= (int)rawImg.at&lt;uchar&gt;(h, w, 2);\n                                    cout &lt;&lt; g &lt;&lt; \"g\";\n                                    g = g/3;\n                                    rawGImg.at&lt;uchar&gt;(h,w) = g;\n                        }\n            }\n\n            */\n            //          imshow(\"thresholded Image\", rawImg);\n            //          waitKey();\n            // Loop to smooth using Gausian 5 x 5 kernal\n\n//          imshow(\"raw Image\", rawImg);\n\n\n            for (int h = 3; h &lt; (height - 3); h++)\n            {\n                        for (int w = 3; w &lt; (width - 3); w++)\n                        {\n                                    if (rawImg.at&lt;uchar&gt;(h, w) &gt;=6 )//Thresholding included\n                                    {\n                                                for (int xk = 0; xk &lt; 5; xk++)\n                                                {\n                                                            for (int yk = 0; yk &lt; 5; yk++)\n                                                            {\n                                                                        intPixel = rawImg.at&lt;uchar&gt;((h + (xk - mp)), (w + (yk - mp)));\n                                                                        kernalCumulator += intPixel*(kernel[xk][yk]);//Mutiplier required as rounding is making number go above 255,  better solution?\n                                                            }\n                                                }\n                                    }\n                                    else\n                                                kernalCumulator = 0;\n\n                                    kernalCumulator = kernalCumulator / 732;\n                                    if (kernalCumulator &lt; 0 || kernalCumulator &gt; 255)\n                                    {\n        //                                      cout &lt;&lt; \"kernal Value: \" &lt;&lt; kernalCumulator;\n            //                                  cout &lt;&lt; \" intPixel:\" &lt;&lt; intPixel &lt;&lt; '\\n';\n                                    }\n                                    filteredImg.at&lt;uchar&gt;(h, w) = (uchar)kernalCumulator;\n                                    kernalCumulator = 0;\n                        }\n            }\n</code></pre>\n"}, {"tags": ["c++", "class", "pointers", "member", "stdmap"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 5, "creation_date": 1570633196, "post_id": 58307000, "comment_id": 102975850, "body": "Yes it can but be careful with dangling pointers. You may consider using <code>std::shared_ptr</code> for the items"}], "answers": [{"tags": [], "owner": {"reputation": 415, "user_id": 4310651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKOwp.jpg?s=128&g=1", "display_name": "Malov Vladimir", "link": "https://stackoverflow.com/users/4310651/malov-vladimir"}, "is_accepted": false, "score": 0, "last_activity_date": 1570721948, "creation_date": 1570721948, "answer_id": 58326571, "question_id": 58307000, "link": "https://stackoverflow.com/questions/58307000/trying-to-access-class-members-through-a-map-of-pointers/58326571#58326571", "title": "Trying to access class members through a map of pointers", "body": "<p>It's a bit confusing class architecture, but in your case you can rewrite your code like this and it will be the same instance:</p>\n\n<pre><code>class Item final {\npublic:\n    // Some data\n    int data{ 0 };\n};\n\nusing ItemsMap = std::map&lt;int, std::shared_ptr&lt;Item&gt;&gt;;\n\nclass Thing final {\npublic:\n    void addItemToMap(int i, ItemsMap&amp; items)\n    {\n        items.insert(std::make_pair(i, _item));\n    }\n\nprivate:\n    std::shared_ptr&lt;Item&gt; _item;\n};\n\nclass Mgr final {\npublic:\n    void accessItem(int key)\n    {\n        ItemsMap::const_iterator foundIt = sps.find(key);\n        if (foundIt != sps.end()) {\n            std::cout &lt;&lt; foundIt-&gt;second-&gt;data &lt;&lt; std::endl;\n        }\n    }\n\nprivate:\n    ItemsMap sps;\n}; \n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 5887043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DjEOd.jpg?s=128&g=1", "display_name": "ellysisland", "link": "https://stackoverflow.com/users/5887043/ellysisland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570721948, "creation_date": 1570633062, "question_id": 58307000, "link": "https://stackoverflow.com/questions/58307000/trying-to-access-class-members-through-a-map-of-pointers", "title": "Trying to access class members through a map of pointers", "body": "<p>I have the following code:</p>\n\n<pre><code>class Thing\n{\n    private:\n    Item item;\n};\n\nclass Mgr{\n\n   public:\n\n   std::map&lt;int, Item*&gt; sps;\n\n};\n\n\n\nvoid Thing::addItemToMap(std::map&lt;int, Item*&gt;&amp; sps, int i){\n\n   sps.insert(std::make_pair(i, &amp;(this-&gt;item)));\n}\n\n\nvoid Mgr::accessItem( int i){\n    auto it = sps.find(i);\n    if(it!=sps.end(){\n      // it-&gt;second             is the instance of Item I inserted in the map before?\n   }\n}\n</code></pre>\n\n<p>will it be possible for Mgr to  retrieve the same instance of Thing->item that Thing  inserted calling \"addItemToMap\"  with key \"i = 3\") by the method \"accessItem(3)\"?</p>\n"}, {"tags": ["c++", "inheritance", "abstract-class"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1570632589, "post_id": 58306818, "comment_id": 102975486, "body": "Rule of thumb: Never include a cpp file.  Class declarations should be in a header file that gets included where needed and the cpp file where the implementation is should be compiled and linked to all of your other object files."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1570632702, "post_id": 58306818, "comment_id": 102975565, "body": "Do you have Include guards?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1570634104, "post_id": 58306818, "comment_id": 102976313, "body": "You have not seen examples of including .cpp files anywhere, and that&#39;s not because nobody else thought of it; it&#39;s because it&#39;s wrong. <code>#include</code> is not like <code>import</code> in Java. (C++ is not much like Java, except for punctuation and the spelling of some keywords. You might want to get a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good book</a>.)"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1570632929, "post_id": 58306886, "comment_id": 102975692, "body": "Include guards aren&#39;t going to help."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570715945, "post_id": 58306886, "comment_id": 103007955, "body": "That just means they are still doing it wrong.  cpp files never need include gaurds."}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570807340, "post_id": 58306886, "comment_id": 103043629, "body": "@NathanOliver you dont Even know, if he is using h and cpp files correctly. Maybe he defined the class in the cpp file"}], "tags": [], "owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "is_accepted": false, "score": 1, "last_activity_date": 1570632696, "creation_date": 1570632696, "answer_id": 58306886, "question_id": 58306818, "link": "https://stackoverflow.com/questions/58306818/error-redefinition-of-class-inheritance/58306886#58306886", "title": "error: redefinition of &#39;class ...&#39; inheritance", "body": "<p>You don't use any include guards:</p>\n\n<pre><code>#ifndef MQBIOTEXECUTER_H //only define this class the first time the pre-processor sees this definition\n#define MQBIOTEXECUTER_H\n\n#include &lt;Arduino.h&gt;\n#include &lt;ArduinoJson.h&gt;\n\nclass MQBIOTExecutor\n{\npublic:\n    virtual void getState() = 0;\n\n    virtual void getCommands() = 0;\n    virtual void executeCommand(JsonDocument jdoc) = 0;\n\n    virtual void getConfig() = 0;\n    virtual void setConfig(JsonDocument jdoc) = 0;\n\n    virtual void getSensor() = 0;\n\n    virtual void extend(String topic, String payload, JsonDocument payloadJsonDoc) = 0;\n};\n\n#endif \n</code></pre>\n\n<p>So this class gets compiled every time you include it and is therefore redefined.</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 9006610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nmx7H.gif?s=128&g=1", "display_name": "epileptic", "link": "https://stackoverflow.com/users/9006610/epileptic"}, "is_accepted": false, "score": 0, "last_activity_date": 1570681664, "last_edit_date": 1570681664, "creation_date": 1570641120, "answer_id": 58309132, "question_id": 58306818, "link": "https://stackoverflow.com/questions/58306818/error-redefinition-of-class-inheritance/58309132#58309132", "title": "error: redefinition of &#39;class ...&#39; inheritance", "body": "<p>I followed the hint given by @NathanOliver</p>\n\n<blockquote>\n  <p>Rule of thumb: Never include a cpp file. Class declarations should be in a header file that gets included where needed and the cpp file where the implementation is should be compiled and linked to all of your other object files.</p>\n</blockquote>\n\n<p>and restructured my project. The problem still appeared so i continued searching the web and figured out that adding <code>#pragma once</code> at the beginning of my header file fixed the issue.</p>\n"}], "owner": {"reputation": 27, "user_id": 9006610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nmx7H.gif?s=128&g=1", "display_name": "epileptic", "link": "https://stackoverflow.com/users/9006610/epileptic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1570681664, "creation_date": 1570632474, "question_id": 58306818, "link": "https://stackoverflow.com/questions/58306818/error-redefinition-of-class-inheritance", "title": "error: redefinition of &#39;class ...&#39; inheritance", "body": "<p>I browsed many similar questions but cannot find an answer fitting to my problem. I try to create a abstract class and extend that in a different <code>.cpp</code> file. If I try to compile i am getting this error.</p>\n\n<pre><code>In file included from src/main.cpp:6:0:\nsrc/MQBIOTExecutor.cpp:4:7: error: redefinition of 'class MQBIOTExecutor'\n class MQBIOTExecutor\n       ^\nIn file included from src/MQBIOT.cpp:3:0,\n                 from src/main.cpp:5:\nsrc/MQBIOTExecutor.cpp:4:7: error: previous definition of 'class MQBIOTExecutor'\n class MQBIOTExecutor\n       ^\nIn file included from src/MyExecutor.cpp:3:0,\n                 from src/main.cpp:7:\nsrc/MQBIOTExecutor.cpp:4:7: error: redefinition of 'class MQBIOTExecutor'\n class MQBIOTExecutor\n       ^\nIn file included from src/MQBIOT.cpp:3:0,\n                 from src/main.cpp:5:\nsrc/MQBIOTExecutor.cpp:4:7: error: previous definition of 'class MQBIOTExecutor'\n class MQBIOTExecutor\n       ^\n</code></pre>\n\n<p>I have already tried many things like putting  the abstract class into a header file or making all function pure virtual and not pure virtual etc. </p>\n\n<p>My <code>MQBIOTExecutor.cpp</code></p>\n\n<pre><code>#include &lt;Arduino.h&gt;\n#include &lt;ArduinoJson.h&gt;\n\nclass MQBIOTExecutor\n{\npublic:\n    virtual void getState() = 0;\n\n    virtual void getCommands() = 0;\n    virtual void executeCommand(JsonDocument jdoc) = 0;\n\n    virtual void getConfig() = 0;\n    virtual void setConfig(JsonDocument jdoc) = 0;\n\n    virtual void getSensor() = 0;\n\n    virtual void extend(String topic, String payload, JsonDocument payloadJsonDoc) = 0;\n};\n</code></pre>\n\n<p>My <code>MyExecutor.cpp</code></p>\n\n<pre><code>#include &lt;Arduino.h&gt;\n#include &lt;ArduinoJson.h&gt;\n#include &lt;MQBIOTExecutor.cpp&gt;\n\nclass MyExecutor : public MQBIOTExecutor\n{\npublic:\n    virtual void getState()\n    {\n    }\n\n    virtual void getCommands()\n    {\n    }\n    virtual void executeCommand(JsonDocument jdoc)\n    {\n    }\n\n    virtual void getConfig()\n    {\n    }\n    virtual void setConfig(JsonDocument jdoc)\n    {\n    }\n\n    virtual void getSensor()\n    {\n    }\n\n    virtual void extend(String topic, String payload, JsonDocument payloadJsonDoc)\n    {\n    }\n};\n</code></pre>\n\n<p>The rest is irrelevant. If I remove the inheritance the whole thing compiles.</p>\n"}, {"tags": ["c#", "c++", "wcf", "ssl"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1570632557, "post_id": 58306664, "comment_id": 102975465, "body": "use a library like openssl or crypto++"}, {"owner": {"reputation": 1, "user_id": 11535559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7040ba483fddb80215f09f4791144188?s=128&d=identicon&r=PG&f=1", "display_name": "Viralkumar", "link": "https://stackoverflow.com/users/11535559/viralkumar"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1570635320, "post_id": 58306664, "comment_id": 102976990, "body": "Thanks Alan for your suggestion.  i used Openssl but i am facing issue to read PFX as it is created with private key. how to use password with openssl API X509_ptr cert(PEM_read_bio_X509(input.get(), NULL, 0, NULL), X509_free);"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1570637972, "post_id": 58306664, "comment_id": 102978342, "body": "pass a password callback into <a href=\"https://www.openssl.org/docs/man1.1.0/man3/PEM_read_bio_X509.html\" rel=\"nofollow noreferrer\">PEM_read_bio_X509</a>"}, {"owner": {"reputation": 6039, "user_id": 10163251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Fwrh.jpg?s=128&g=1", "display_name": "Abraham Qian", "link": "https://stackoverflow.com/users/10163251/abraham-qian"}, "edited": false, "score": 0, "creation_date": 1570700864, "post_id": 58306664, "comment_id": 102999272, "body": "Please refer to the below link, it might be useful to you. <a href=\"https://stackoverflow.com/questions/8058510/access-x509-certificate-store-with-unmanaged-c\" title=\"access x509 certificate store with unmanaged c\">stackoverflow.com/questions/8058510/&hellip;</a>"}], "owner": {"reputation": 1, "user_id": 11535559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7040ba483fddb80215f09f4791144188?s=128&d=identicon&r=PG&f=1", "display_name": "Viralkumar", "link": "https://stackoverflow.com/users/11535559/viralkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570633871, "creation_date": 1570631963, "last_edit_date": 1570633871, "question_id": 58306664, "link": "https://stackoverflow.com/questions/58306664/how-to-read-pfx-file-into-x509-in-native-c-and-pass-this-certificate-to-c-app", "title": "How to read PFX file into X509 in Native C++ and pass this certificate to c# application", "body": "<p>I have a client-server application where my client application is in C# (WPF) written and the server application is a WCF service.</p>\n\n<p>Client application uses SSL certificate with WCF service call and WCF service uses the same certificate to authenticate the client.</p>\n\n<p>I am using in C# API <code>X509Certificate2(byte[] rawData, SecureString password)</code> to read <code>PFX</code> file and pass this certificate instance in each WCF service call. It is working fine.</p>\n\n<p>My requirement is to move certificate creation logic to native C++.<br>\ni.e.: <em>Read PFX in C++, generate certificate object and pass it to C# application.</em></p>\n\n<p><code>C# Application ---&gt; C++ CLI ---&gt; C++ Native</code></p>\n\n<p>Please help me how can I make it possible.</p>\n\n<p>Thanks,<br>\nViralkumar Mistry</p>\n"}, {"tags": ["c++", "vector", "iterator"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1570631399, "post_id": 58306422, "comment_id": 102974781, "body": "It decays to a pointer. Just use <code>std::vector</code> all the way through."}], "answers": [{"tags": [], "owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "is_accepted": false, "score": 1, "last_activity_date": 1570632401, "creation_date": 1570632401, "answer_id": 58306787, "question_id": 58306422, "link": "https://stackoverflow.com/questions/58306422/converting-array-of-an-object-passed-in-as-an-argument-to-vector/58306787#58306787", "title": "Converting array of an object passed in as an argument to vector", "body": "<p>The parameter <code>Wall walls[]</code> will decay to <code>Wall *walls</code>. Since you lose the length information you will need to pass the number of elements in that array along as parameter. Like this:</p>\n\n<pre><code>int func(int row, int col, Wall* walls, int len) {\n    std::vector&lt;Wall&gt; vecWalls;\n    vecWalls.insert(vecWalls.begin(), walls, walls + len);\n\n    //or shorter:\n    std::vector&lt;Wall&gt; vecWalls2(walls, walls + len);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 415, "user_id": 4310651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKOwp.jpg?s=128&g=1", "display_name": "Malov Vladimir", "link": "https://stackoverflow.com/users/4310651/malov-vladimir"}, "is_accepted": false, "score": 0, "last_activity_date": 1570632825, "last_edit_date": 1570632825, "creation_date": 1570632467, "answer_id": 58306814, "question_id": 58306422, "link": "https://stackoverflow.com/questions/58306422/converting-array-of-an-object-passed-in-as-an-argument-to-vector/58306814#58306814", "title": "Converting array of an object passed in as an argument to vector", "body": "<p>Simple C array doesn't know anything about iterators, but you can fill std::vector using simple pointers on first and next after last array items.</p>\n\n<pre><code>int func(Wall* walls, size_t arraySize)\n{\n    std::vector&lt;Wall&gt; vecWalls;\n    vecWalls.insert(vecWalls.begin(), &amp;walls[0], &amp;walls[arraySize]);\n\n    return 0;\n}\n\nint main()\n{\n    Wall walls[10] = {};\n    // Fill walls array\n\n    const size_t arraySize = sizeof(walls) / sizeof(walls[0]);\n    func(walls, arraySize);\n}\n</code></pre>\n\n<p>Moreover, if you create new vector you can initialize it with items from you simple array like this:</p>\n\n<pre><code>std::vector&lt;Wall&gt; vecWalls2(&amp;walls[0], &amp;walls[arraySize]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1570632896, "creation_date": 1570632896, "answer_id": 58306949, "question_id": 58306422, "link": "https://stackoverflow.com/questions/58306422/converting-array-of-an-object-passed-in-as-an-argument-to-vector/58306949#58306949", "title": "Converting array of an object passed in as an argument to vector", "body": "<p>The standard functions <code>std::begin</code> and <code>std::end</code> may not be used with pointers as their arguments.</p>\n\n<p>In the function declaration</p>\n\n<pre><code>int func(int row, int col, Wall walls[]) {\n</code></pre>\n\n<p>the parameter <code>Wall walls[]</code> is adjusted by the compiler to pointer type <code>Wall *walls</code> and the passed to the function array also is implicitly converted to pointer to its first element.</p>\n\n<p>I suppose that within the function the array pointed to by walls is not changed.</p>\n\n<p>In this case the function can be defined the following way</p>\n\n<pre><code>int func( int row, int col, const Wall walls[], size_t n ) {\n  // Some code before ...\n\n  // Converting array of Wall to vector\n  std::vector&lt;Wall&gt; vecWalls( walls, walls + n );\n }\n</code></pre>\n"}], "owner": {"reputation": 457, "user_id": 8455470, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01e8b42b903732a5fcf2ba3fc7bd28dc?s=128&d=identicon&r=PG&f=1", "display_name": "sangmin park", "link": "https://stackoverflow.com/users/8455470/sangmin-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1570633249, "answer_count": 3, "score": 0, "last_activity_date": 1570632896, "creation_date": 1570631188, "question_id": 58306422, "link": "https://stackoverflow.com/questions/58306422/converting-array-of-an-object-passed-in-as-an-argument-to-vector", "closed_reason": "Duplicate", "title": "Converting array of an object passed in as an argument to vector", "body": "<p>I'm trying to convert an array of Wall to a vector of Wall. The array is passed in as an argument and within the function I am trying to convert it using the <code>insert()</code>. I receive an error saying that <em>\"no instance of overloaded function \"std::begin\" matches the argument list -- argument types are: (Wall *)\"</em></p>\n\n<pre><code>int func(int row, int col, Wall walls[]) {\n  // Some code before ...\n\n  // Converting array of Wall to vector\n  std::vector&lt;Wall&gt; vecWalls;\n  vecWalls.insert(vecWalls.begin(), std::begin(walls), std::end(walls));\n }\n</code></pre>\n\n<p>I have tried just creating another array of Wall within the function and using that to as an argument for the <code>insert()</code>. However, that did not create any issues.</p>\n\n<pre><code>Wall walls2[5];\nstd::vector&lt;Wall&gt; vecWalls;\nvecWalls.insert(vecWalls.begin(), std::begin(walls2), std::end(walls2));\n</code></pre>\n\n<p>What is happening to my array of Wall when it is being passed as an argument.</p>\n"}, {"tags": ["c++", "bit-manipulation"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1570631237, "post_id": 58306315, "comment_id": 102974669, "body": "Do it by hand a few times for a few inputs. Do you notice anything? If you&#39;re diving into bit manipulation you might also want to check out <a href=\"https://graphics.stanford.edu/~seander/bithacks.html\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/bithacks.html</a>."}, {"owner": {"reputation": 1154, "user_id": 6521181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/81957e6bc199ffd1ce4362dda7d488f1?s=128&d=identicon&r=PG&f=1", "display_name": "John London", "link": "https://stackoverflow.com/users/6521181/john-london"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570632448, "post_id": 58306315, "comment_id": 102975414, "body": "Wow thanks for the link, never know there is such an extensive collection for bit manipulation tricks!"}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 3, "last_activity_date": 1570631716, "creation_date": 1570631716, "answer_id": 58306582, "question_id": 58306315, "link": "https://stackoverflow.com/questions/58306315/subset-related-bit-manipulation/58306582#58306582", "title": "Subset related bit manipulation", "body": "<p>If <code>s</code> is of the form <code>...10000</code> then <code>s-1</code> is <code>...01111</code>. We then <code>&amp;</code> with <code>m</code>, which leaves only those <code>1</code> in the lower portion that were also present in <code>m</code>. (The upper bits of <code>s</code> stay untouched and remain identical to those in <code>m</code>).</p>\n\n<p>Effectively, we clear the least set bit in <code>s</code> and replace all lower bits with those in <code>m</code>. It can be seen that this amounts to \"counting downwards within the set bits of <code>m</code>\". That is, if <code>m</code> has <code>k</code> set bits, count down from <code>(1&lt;&lt;k)-1</code> and, for each of those 2<sup>k</sup> numbers, distribute its <code>k</code> bits into the <code>k</code> positions that <code>m</code> had set bits in.</p>\n\n<p>Or, if we interpret <code>m</code> as a bitset, it <strong>enumerates all subsets of <code>m</code></strong> (including <code>m</code> but skipping the empty subset).</p>\n"}], "owner": {"reputation": 1154, "user_id": 6521181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/81957e6bc199ffd1ce4362dda7d488f1?s=128&d=identicon&r=PG&f=1", "display_name": "John London", "link": "https://stackoverflow.com/users/6521181/john-london"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 58306582, "answer_count": 1, "score": 4, "last_activity_date": 1570633009, "creation_date": 1570630867, "last_edit_date": 1570632394, "question_id": 58306315, "link": "https://stackoverflow.com/questions/58306315/subset-related-bit-manipulation", "title": "Subset related bit manipulation", "body": "<p>I want to know what this bit manipulation means:</p>\n\n<pre><code>for (int m = 1; m &lt; (1 &lt;&lt; n); ++m) {\n    for (int s = m; s; s = (s - 1) &amp; m) {\n        // ....\n    }\n}\n</code></pre>\n\n<p>The first for-loop is to enumerate all subsets of n elements, but what the <em>second for-loop</em> means?</p>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1570630728, "post_id": 58306160, "comment_id": 102974375, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/531502/vc-resources-in-a-static-library\">VC++ resources in a static library</a>"}, {"owner": {"reputation": 163, "user_id": 11543027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a6b00966189e870fb5b6260a0146d2e?s=128&d=identicon&r=PG&f=1", "display_name": "userrmgs", "link": "https://stackoverflow.com/users/11543027/userrmgs"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570630944, "post_id": 58306160, "comment_id": 102974503, "body": "@Algirdas The link u suggested does not solve the problem."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1570630983, "post_id": 58306160, "comment_id": 102974523, "body": "OT: This question strikes me close to home, since I am, currently, in process of fixing a defect, which occurred because someone moved code to a static lib (from a .dll), which resulted in certain dialog failing to be displayed.."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570631261, "post_id": 58306160, "comment_id": 102974695, "body": "&quot;<i>The link u suggested does not solve the problem.</i>&quot; What solution do you want? Static libs can&#39;t contain embedded resources. And the linked question explains that, while providing several solutions, around such limitation."}, {"owner": {"reputation": 163, "user_id": 11543027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a6b00966189e870fb5b6260a0146d2e?s=128&d=identicon&r=PG&f=1", "display_name": "userrmgs", "link": "https://stackoverflow.com/users/11543027/userrmgs"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570631324, "post_id": 58306160, "comment_id": 102974735, "body": "@AlgirdasPreid\u017eius, I am also converting MFC dll to MFC static library. I am calling a function in static library  from main application which launches a mfc dialog. After converting to static library it is not launching dialog and it is crashing."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1570631570, "post_id": 58306160, "comment_id": 102974884, "body": "Yes, that&#39;s the problem, that I was seeing as well. Please re-read the duplicate suggestion, so you would understand the possible ways to solve the problem. TLDR version of it, as I already stated: static library can&#39;t contain resources."}, {"owner": {"reputation": 163, "user_id": 11543027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a6b00966189e870fb5b6260a0146d2e?s=128&d=identicon&r=PG&f=1", "display_name": "userrmgs", "link": "https://stackoverflow.com/users/11543027/userrmgs"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570631716, "post_id": 58306160, "comment_id": 102974975, "body": "@Algirdas, I saw that link, I could not understand. I want to go for include the static library&#39;s associated .res file solution. I could not understand this.Where( in exe or in lib) and how to set it?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1570632035, "post_id": 58306160, "comment_id": 102975178, "body": "Static libraries can&#39;t have a <code>.res</code> file.  And if you do put one in a static library project it will be silently ignored.  Follow the duplicates suggestions."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570632085, "post_id": 58306160, "comment_id": 102975204, "body": "@userrmgs You link .res file in the same way, as you would link .lib file. Do take note, if multiple .res files, compiled into the same binary (.exe, or .dll) contain icons, you may hit this issue: <a href=\"https://stackoverflow.com/questions/31323596/fatal-error-cvt1100-duplicate-resource-typeicon-name1-c-visual-studio-c\">fatal error CVT1100: duplicate resource. type:ICON, name:1</a>."}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 12064269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oNJuh.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/12064269/nick"}, "edited": false, "score": 1, "creation_date": 1570636574, "post_id": 58306694, "comment_id": 102977688, "body": "If using the Visual Studio resource editor, any changes done manually on the .rc file will get lost. So mind to include additional .rc files via the &quot;resource includes&quot; option of Visual Studio or via the .rc2 file."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "reply_to_user": {"reputation": 349, "user_id": 12064269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oNJuh.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/12064269/nick"}, "edited": false, "score": 0, "creation_date": 1570636787, "post_id": 58306694, "comment_id": 102977780, "body": "@Nick - Excellent point! I forgot about that, as I disable the use of the visual resource editor in/on my similarly to-be-included resource scripts - all of which are .rc2 files, BTW."}], "tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": false, "score": 2, "last_activity_date": 1570632085, "creation_date": 1570632085, "answer_id": 58306694, "question_id": 58306160, "link": "https://stackoverflow.com/questions/58306160/dialog-resources-in-a-static-library/58306694#58306694", "title": "Dialog resources in a static library", "body": "<p>The problem here is that a static library <strong><em>doesn't have</em></strong> an 'associated .res file'. If you are trying to migrate a DLL with resources to a static library, then you will need to also 'export' the resource script (its <code>.rc</code> file plus any associated <code>.rc2</code> files and other referenced resources) to <strong><em>the client program</em></strong>!</p>\n\n<p>So, just as you would have an <code>#include \"module.h\"</code> line in the <code>.cpp</code> source(s), you will also need an <code>#include \"module.rc\"</code> in your program's main <code>.rc</code> file (or, at least, in a file that it includes).</p>\n\n<p>Note: Other fixes that folks have tried, like linking explicitly with extra (pre-compiled) <code>.res</code> files won't work! Although the internal structure of a binary <code>.res</code> file is very similar to any other <code>.obj</code> file, the linker will only ever include one!</p>\n"}], "owner": {"reputation": 163, "user_id": 11543027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a6b00966189e870fb5b6260a0146d2e?s=128&d=identicon&r=PG&f=1", "display_name": "userrmgs", "link": "https://stackoverflow.com/users/11543027/userrmgs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570638773, "creation_date": 1570630427, "last_edit_date": 1570638773, "question_id": 58306160, "link": "https://stackoverflow.com/questions/58306160/dialog-resources-in-a-static-library", "title": "Dialog resources in a static library", "body": "<p>I have a problem with dialog and icon resources in my static library.\nI have created a MFC static library with Visual Studio 2008.</p>\n\n<p>I am calling <code>Func()</code> in the static library from <code>Win32</code> application, It tries to launch  a MFC dialog in the static library.</p>\n\n<p>When trying to access the resource I am getting afxCurrentResourceHandle is NULL assertion.</p>\n\n<p>I add this line <code>AFX_MANAGE_STATE(AfxGetStaticModuleState());</code>  in the <code>Func()</code> as the first line. But it didn't help.</p>\n\n<p>I need to use only static library. As per requirement, I should not use dll.</p>\n\n<p>Please help me how to launch a dialog in MFC static library from a non MFC application.</p>\n"}, {"tags": ["c++", "c++11", "runtime-error", "out-of-memory"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 6, "creation_date": 1570630148, "post_id": 58306001, "comment_id": 102974056, "body": "<code>int a[n]</code> - VLA is not legal in C++ and may silently fail"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1570630526, "post_id": 58306001, "comment_id": 102974275, "body": "Try with <code>int a[1000]</code> instead of <code>int a[n]</code> and report back. Also <a href=\"https://stackoverflow.com/posts/58306001/edit\">edit</a> your question and show a minimal input that triggers the problem."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1570631255, "post_id": 58306001, "comment_id": 102974688, "body": "This sounds strange. <code>SIGCONT</code> is sent <i>to</i>  a process after it has been stopped in order for the OS to start it again. It is not triggered by the process itself, and is not usually considered a runtime error."}], "owner": {"reputation": 11, "user_id": 10596624, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mKflbeOXJQU/AAAAAAAAAAI/AAAAAAAAB1Y/WXKLGIyEIJk/photo.jpg?sz=128", "display_name": "Mohit Soni", "link": "https://stackoverflow.com/users/10596624/mohit-soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570629874, "creation_date": 1570629874, "question_id": 58306001, "link": "https://stackoverflow.com/questions/58306001/i-got-a-runtime-error-sigcont-for-the-below-code", "title": "I got a RunTime error SIGCONT for the below code", "body": "<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main(){\n    int t;\n    cin&gt;&gt;t;\n    while(t--){\n        int n,ctr=0;\n        cin&gt;&gt;n;\n        int a[n],ptr=750;\n        for(int i=0;i&lt;n;i++){\n            cin&gt;&gt;a[i];\n            if(a[i]&lt;ptr){\n                ctr++;\n                ptr=a[i];\n            }\n        }\n        cout&lt;&lt;ctr-(n/5)+1&lt;&lt;\"\\n\";\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>All other answers say I would have divided by zero or accessed out of bounds but here I do not find any such situation</strong></p>\n"}, {"tags": ["c++", "c", "jenkins", "abi"], "comments": [{"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1570628624, "post_id": 58305510, "comment_id": 102973173, "body": "1. Why is this tagged C/C++?"}, {"owner": {"reputation": 603, "user_id": 2721809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7c55a4a4bb4dab34e02e6cc96bc146?s=128&d=identicon&r=PG", "display_name": "Tim Angus", "link": "https://stackoverflow.com/users/2721809/tim-angus"}, "reply_to_user": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1570628708, "post_id": 58305510, "comment_id": 102973220, "body": "abidiff is a tool for C and/or C++"}, {"owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "edited": false, "score": 0, "creation_date": 1570629434, "post_id": 58305510, "comment_id": 102973663, "body": "That shouldn&#39;t really matter. The act of running a diff is different from the file types it&#39;s being run on."}], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 2721809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7c55a4a4bb4dab34e02e6cc96bc146?s=128&d=identicon&r=PG", "display_name": "Tim Angus", "link": "https://stackoverflow.com/users/2721809/tim-angus"}, "edited": false, "score": 0, "creation_date": 1570629834, "post_id": 58305920, "comment_id": 102973889, "body": "Mmm, I had come across stuff like that, but we&#39;re not using pipelines unfortunately."}, {"owner": {"reputation": 916, "user_id": 11458415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b7c30fb5fc0fd5e46a80dd7c71333b8?s=128&d=identicon&r=PG&f=1", "display_name": "smelm", "link": "https://stackoverflow.com/users/11458415/smelm"}, "reply_to_user": {"reputation": 603, "user_id": 2721809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7c55a4a4bb4dab34e02e6cc96bc146?s=128&d=identicon&r=PG", "display_name": "Tim Angus", "link": "https://stackoverflow.com/users/2721809/tim-angus"}, "edited": false, "score": 0, "creation_date": 1570630097, "post_id": 58305920, "comment_id": 102974029, "body": "Have a look at the other stackoverflow link then. It uses only the shell."}], "tags": [], "owner": {"reputation": 916, "user_id": 11458415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b7c30fb5fc0fd5e46a80dd7c71333b8?s=128&d=identicon&r=PG&f=1", "display_name": "smelm", "link": "https://stackoverflow.com/users/11458415/smelm"}, "is_accepted": false, "score": 0, "last_activity_date": 1570629666, "creation_date": 1570629666, "answer_id": 58305920, "question_id": 58305510, "link": "https://stackoverflow.com/questions/58305510/running-a-specific-diff-command-between-files-in-two-jenkins-builds/58305920#58305920", "title": "Running a specific diff command between files in two Jenkins builds", "body": "<p>You can find the last successfull build like this (if you are using a pipeline)</p>\n\n<pre><code>import jenkins.model.*\n\ndef job = jenkins.model.Jenkins.instance.getItemByFullName('&lt;jobname&gt;')\ndef buildNumber = job.getLastSuccessfulBuild().getNumber()\nsh \"abidiff &lt;my-file&gt; ../builds/$buildNumber\"\n</code></pre>\n\n<p>You might also want to take a look at: <a href=\"https://stackoverflow.com/questions/31508603/how-to-retrieve-build-id-of-latest-successful-build-in-jenkins\">How to retrieve build_id of latest successful build in Jenkins?</a></p>\n\n<p>Or you might think about <a href=\"https://jenkins.io/doc/pipeline/steps/core/#archiveartifacts-archive-the-artifacts\" rel=\"nofollow noreferrer\">archiveArtifacts</a></p>\n"}], "owner": {"reputation": 603, "user_id": 2721809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7c55a4a4bb4dab34e02e6cc96bc146?s=128&d=identicon&r=PG", "display_name": "Tim Angus", "link": "https://stackoverflow.com/users/2721809/tim-angus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570629666, "creation_date": 1570628377, "question_id": 58305510, "link": "https://stackoverflow.com/questions/58305510/running-a-specific-diff-command-between-files-in-two-jenkins-builds", "title": "Running a specific diff command between files in two Jenkins builds", "body": "<p>I recently discovered <code>abidiff</code>; a tool that takes two binaries as input, and describes differences in ABI. This could prove useful to detect when ABI version numbers need to change.</p>\n\n<p>Ideally we would integrate this into our Jenkins based CI, but I can't immediately see a straightforward way to run a command on a file in the current build and the corresponding file in the last successful build (ideally on the same branch).</p>\n\n<p>I did play around with an <code>Exceute Shell</code> build step, but couldn't see an obvious way to get at the previous successful build number, from which I would eventually be able to get a path to the files I want to compare. Any suggestions/pointers on how to get this? There is the <code>GIT_PREVIOUS_SUCCESSFUL_COMMIT</code> environment variable, but this isn't much use as far as I can tell, as resolving the SHA to a file on disk would require resolving the SHA to the build number.</p>\n"}, {"tags": ["c++", "static-code-analysis", "cppcheck"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1570628563, "post_id": 58305469, "comment_id": 102973141, "body": "Probably just submit a bug report to cppcheck"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 3, "creation_date": 1570628820, "post_id": 58305469, "comment_id": 102973285, "body": "I&#39;m voting to close this question as off-topic because this is a bugreport for cppcheck."}, {"owner": {"reputation": 106, "user_id": 925300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e65dc6d8b4d2aaa87a865fd76f2a9f3?s=128&d=identicon&r=PG", "display_name": "user34341", "link": "https://stackoverflow.com/users/925300/user34341"}, "edited": false, "score": 0, "creation_date": 1570639713, "post_id": 58305469, "comment_id": 102979109, "body": "Use analyzers that support C++17 :). For example PVS-Studio (<a href=\"https://www.viva64.com/en/b/0614/\" rel=\"nofollow noreferrer\">free license</a>)."}, {"owner": {"reputation": 18, "user_id": 4693560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b830ef2115b5741c23b173fb4f2fd38?s=128&d=identicon&r=PG&f=1", "display_name": "Mladen Milev", "link": "https://stackoverflow.com/users/4693560/mladen-milev"}, "edited": false, "score": 0, "creation_date": 1570701811, "post_id": 58305469, "comment_id": 102999819, "body": "Hell I posted the topic here and my last 2 lines of the post are the important one - looking for knowledge sharing and triggering discussion for effective and&amp;or controlled use and code scan with CppCheck. So please do not close the topic but focus on sharing knowledge in using the tool and c++.  Regarding &quot;free&quot; PVS-Studio, besides the &quot;free&quot; marketing it is not applicable in my case and I have CppCheck integrated with Sonar."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1570791427, "post_id": 58305469, "comment_id": 103034951, "body": "Maybe cppcheck doesn&#39;t handle <code>template&lt;class&gt; class allocator</code> syntax and requires <code>template&lt;typename&gt; class allocator</code>."}], "answers": [{"comments": [{"owner": {"reputation": 18, "user_id": 4693560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b830ef2115b5741c23b173fb4f2fd38?s=128&d=identicon&r=PG&f=1", "display_name": "Mladen Milev", "link": "https://stackoverflow.com/users/4693560/mladen-milev"}, "edited": false, "score": 0, "creation_date": 1570701528, "post_id": 58305591, "comment_id": 102999653, "body": "can you provide me an example? I did not see in the CppCheck manual how to define micros in the cpp code so that the code is excluded"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 18, "user_id": 4693560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b830ef2115b5741c23b173fb4f2fd38?s=128&d=identicon&r=PG&f=1", "display_name": "Mladen Milev", "link": "https://stackoverflow.com/users/4693560/mladen-milev"}, "edited": false, "score": 0, "creation_date": 1570712014, "post_id": 58305591, "comment_id": 103005437, "body": "@MladenMilev: Example added."}, {"owner": {"reputation": 18, "user_id": 4693560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b830ef2115b5741c23b173fb4f2fd38?s=128&d=identicon&r=PG&f=1", "display_name": "Mladen Milev", "link": "https://stackoverflow.com/users/4693560/mladen-milev"}, "edited": false, "score": 0, "creation_date": 1570722078, "post_id": 58305591, "comment_id": 103011612, "body": "Thanks, but unfortunately still crashing :("}, {"owner": {"reputation": 18, "user_id": 4693560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b830ef2115b5741c23b173fb4f2fd38?s=128&d=identicon&r=PG&f=1", "display_name": "Mladen Milev", "link": "https://stackoverflow.com/users/4693560/mladen-milev"}, "edited": false, "score": 0, "creation_date": 1570722499, "post_id": 58305591, "comment_id": 103011837, "body": "The CppCheck recognizes the MACRO name. Is it possible the problem to be that the macro is within an included header? Should not be as it should expand the header in the class. But on the other hand it is not compiling so might be processing it separated from the class."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 18, "user_id": 4693560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b830ef2115b5741c23b173fb4f2fd38?s=128&d=identicon&r=PG&f=1", "display_name": "Mladen Milev", "link": "https://stackoverflow.com/users/4693560/mladen-milev"}, "edited": false, "score": 0, "creation_date": 1570737679, "post_id": 58305591, "comment_id": 103018502, "body": "As frequently, I confound the condition test. should be fixed now."}, {"owner": {"reputation": 18, "user_id": 4693560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b830ef2115b5741c23b173fb4f2fd38?s=128&d=identicon&r=PG&f=1", "display_name": "Mladen Milev", "link": "https://stackoverflow.com/users/4693560/mladen-milev"}, "edited": false, "score": 0, "creation_date": 1570790599, "post_id": 58305591, "comment_id": 103034545, "body": "That works! Thanks a lot for the help and today I learned something new! Good job! @Jarod42"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 0, "last_activity_date": 1570737639, "last_edit_date": 1570737639, "creation_date": 1570628623, "answer_id": 58305591, "question_id": 58305469, "link": "https://stackoverflow.com/questions/58305469/cppcheck-crashing-with-specific-template-syntax/58305591#58305591", "title": "CppCheck crashing with specific template syntax", "body": "<p>You can define MACRO to cppcheck (include guard of the header file for example).</p>\n\n<p>Or something more specific:</p>\n\n<pre><code>#if !defined(CPP_CHECK)\ntemplate &lt;\n  class obj_type,\n  template&lt;class&gt; class allocator = SmartPointerAllocator,\n  template&lt;class, class&gt; class data_container = std::list&gt;\n#endif\nclass EXPORT_OBJECT GenericConfigurationHandler\n{\n    // ...\n};\n</code></pre>\n\n<p>and then</p>\n\n<p><code>cppcheck -DCPP_CHECK file.cpp</code></p>\n"}], "owner": {"reputation": 18, "user_id": 4693560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b830ef2115b5741c23b173fb4f2fd38?s=128&d=identicon&r=PG&f=1", "display_name": "Mladen Milev", "link": "https://stackoverflow.com/users/4693560/mladen-milev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 1, "accepted_answer_id": 58305591, "answer_count": 1, "score": 0, "last_activity_date": 1570737639, "creation_date": 1570628228, "question_id": 58305469, "link": "https://stackoverflow.com/questions/58305469/cppcheck-crashing-with-specific-template-syntax", "title": "CppCheck crashing with specific template syntax", "body": "<p>in our project (VS c++17) we have a template causing CppCheck (version 1.89 but also some earlier versions) to crash no Windows.</p>\n\n<p>It crashes if called from command line or via GUI. Unfortunately the tool exits in a way I cannot get clear idea why it crashes. Via the GUI I tried forcing the c++ version to 14, 17 and 20 but no effect.</p>\n\n<p>After following up on the file causing the crash I identified the following syntax in header is \"the guilty\" one:</p>\n\n<pre><code>// Header file\n\ntemplate &lt;\n    class obj_type,\n    template&lt;class&gt; class allocator = SmartPointerAllocator,\n    template&lt;class, class&gt; class data_container = std::list&gt;\n\nclass EXPORT_OBJECT GenericConfigurationHandler \n{\nprotected:\n    typedef typename allocator&lt;obj_type&gt;::ClientData ClientData;\n    typedef data_container&lt;ClientData, std::allocator&lt;ClientData&gt;&gt; TargetConfigurations;\nprivate:\n    mutable TargetConfigurations m_target_configurations;\n\nprotected:\n    TargetConfigurations&amp; get_target_configurations() const { return m_target_configurations; }\n\npublic:\n    /**\n    *   \\brief constructor\n    */\n    GenericConfigurationHandler() = default;\n\n    /**\n    *   \\brief destructor\n    */\n    virtual ~GenericConfigurationHandler() {\n        std::for_each(m_target_configurations.begin(), m_target_configurations.end(),\n            [](ClientData&amp; data) {\n            allocator&lt;obj_type&gt;::destroy(data);\n        });\n    }\n\n    /**\n    *   \\brief regist a new configuration\n    *   \\param target_config new target configuration\n    */\n    template &lt;class src_obj&gt;\n    void regist_configuration(const src_obj&amp; target_config) {\n        m_target_configurations.push_back(allocator&lt;obj_type&gt;::create(target_config));\n    }\n\n    /**\n    *   \\brief generates target configuration values\n    */\n    virtual TargetConfigurations build_configurators() const {\n        return m_target_configurations;\n    }\n};\n</code></pre>\n\n<p>The SmartPointerAllocator itself is: </p>\n\n<pre><code>// Header file\ntemplate&lt;class T&gt;\nstruct SmartPointerAllocator {\n    //variable type\n    typedef typename std::remove_pointer&lt;T&gt;::type var_type;\n    //conatiner type\n    typedef std::shared_ptr&lt;var_type&gt; ClientData;\n\n    //creator\n    template&lt;class obj_type&gt;\n    static ClientData create(const obj_type&amp; src_obj) {\n        typedef typename std::remove_pointer&lt;obj_type&gt;::type src_obj_type;\n        return ClientData(new src_obj_type(src_obj));\n    }\n\n    //deallocator\n    static void destroy(ClientData&amp; src_obj) {\n    }\n\n    static void commit(const ClientData&amp; src_obj) {\n        src_obj-&gt;commit_configuration();\n    }\n};\n</code></pre>\n\n<p>What I further notice is the crash appears on <strong>loading</strong> the .cpp files and reading/parcing the .h files. Not during the analysis! </p>\n\n<p>If I comment the template definition and leave \"not compilable code\" like this <strong>the analysis passes</strong>:</p>\n\n<pre><code>// Header file\n\n//template &lt;\n//  class obj_type,\n//  template&lt;class&gt; class allocator = SmartPointerAllocator,\n//  template&lt;class, class&gt; class data_container = std::list&gt;\n\nclass EXPORT_OBJECT GenericConfigurationHandler \n{\nprotected:\n    typedef typename allocator&lt;obj_type&gt;::ClientData ClientData;\n    typedef data_container&lt;ClientData, std::allocator&lt;ClientData&gt;&gt; TargetConfigurations;\nprivate:\n    mutable TargetConfigurations m_target_configurations;\n\nprotected:\n    TargetConfigurations&amp; get_target_configurations() const { return m_target_configurations; }\n\npublic:\n    /**\n    *   \\brief constructor\n    */\n    GenericConfigurationHandler() = default;\n\n    ...\n};\n</code></pre>\n\n<p>The difference between <strong>first</strong> and <strong>third</strong> code is only <strong><em>the commented template lines at the beginning</em></strong>. </p>\n\n<p>I tried to escape the particular header file but the tool does not allow (only cpp files)</p>\n\n<p>Any suggestions how to overcome this?</p>\n"}, {"tags": ["c++", "linux", "eclipse", "cmake"], "comments": [{"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1570628280, "post_id": 58305389, "comment_id": 102972964, "body": "Note sure that you can. If you are remoting to the server, are you sure you don&#39;t have access to a GUI at all? If you connect with <code>ssh -x user@server.address</code>, and try to run eclipse&amp;, you probably would get a gui. Or do you have the project locally and just wan to build on the server? If that&#39;s the case, just create the CMakeLists.txt yourself. There are guides for integrating cmake into eclipse, but none that I found for a conversion."}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 1, "creation_date": 1570628300, "post_id": 58305389, "comment_id": 102972972, "body": "Without a lot more detail, this question will likely be closed for being too broad."}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1570628426, "post_id": 58305389, "comment_id": 102973054, "body": "I think you have to write the CMakeLists.txt by your own. In my opinion this is anyway the better approach, because then you can create multiple build chains (Makefile, eclipse-projects). Without GUI you can then create makefiles with CMake"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1570628504, "post_id": 58305389, "comment_id": 102973105, "body": "<a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=186847\" rel=\"nofollow noreferrer\">bugs.eclipse.org/bugs/show_bug.cgi?id=186847</a>"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 2, "creation_date": 1570628568, "post_id": 58305389, "comment_id": 102973144, "body": "I don&#39;t think there is a way to <b>generate</b> CMake files from existing Eclipse projects. You have to write the CMake files on your own, structuring them to match your Eclipse project&#39;s setup and build hierarchies."}], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 2, "last_activity_date": 1570634096, "last_edit_date": 1570634096, "creation_date": 1570630757, "answer_id": 58306275, "question_id": 58305389, "link": "https://stackoverflow.com/questions/58305389/how-i-can-build-eclipse-c-project-with-cmake-from-the-linux-console-no-gui-i/58306275#58306275", "title": "How I can build Eclipse C++ project with CMake from the Linux console ( no GUI is available )", "body": "<p>Unless you write a CMake generator from eclipse files, there is no tools that will produce a seamless transition between the two automatically, and I don't think there is a 1:1 relationship between the two.</p>\n\n<p>The best would be to learn CMake and write the file that match your current project. After that, there are ways that eclipse can use this CMake file afterwards so you don't duplicate your project definition.</p>\n"}], "owner": {"reputation": 11, "user_id": 12188927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f76a100fe1c5d42d0944c88c8a0c3b8d?s=128&d=identicon&r=PG&f=1", "display_name": "elessar", "link": "https://stackoverflow.com/users/12188927/elessar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570634096, "creation_date": 1570627967, "question_id": 58305389, "link": "https://stackoverflow.com/questions/58305389/how-i-can-build-eclipse-c-project-with-cmake-from-the-linux-console-no-gui-i", "title": "How I can build Eclipse C++ project with CMake from the Linux console ( no GUI is available )", "body": "<p>I have Eclipse C++ project and want to build this on Linux server ( no GUI ) with CMake. How can I generate CMakelists.txt from this Eclipse project?</p>\n"}, {"tags": ["c++", "c", "mosquitto"], "comments": [{"owner": {"reputation": 646, "user_id": 7251286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e021813332cd736c36621f3a549487f?s=128&d=identicon&r=PG&f=1", "display_name": "florgeng", "link": "https://stackoverflow.com/users/7251286/florgeng"}, "edited": false, "score": 0, "creation_date": 1570632242, "post_id": 58305376, "comment_id": 102975293, "body": "could you try to replace <code>mosquitto_connect</code> with <code>mosquitto_connect_async</code> -- so that the loop is already running when the connect is executed"}, {"owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "reply_to_user": {"reputation": 646, "user_id": 7251286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e021813332cd736c36621f3a549487f?s=128&d=identicon&r=PG&f=1", "display_name": "florgeng", "link": "https://stackoverflow.com/users/7251286/florgeng"}, "edited": false, "score": 0, "creation_date": 1570636857, "post_id": 58305376, "comment_id": 102977810, "body": "I have already done that but  ... no luck ! BTW thanks for response @florgeng"}], "owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570627938, "creation_date": 1570627938, "question_id": 58305376, "link": "https://stackoverflow.com/questions/58305376/onconnect-callback-is-not-getting-called-using-mosquitto-c", "title": "OnConnect() Callback is not getting called using mosquitto C", "body": "<p>Using mosquitto, I am trying to push data into AWS. mosquitto_connect() function is executing successfully but onConnect() function is not getting called for some unknown reason. onDisconnect() returns an error code 7 which means MOSQ_ERR_CONN_LOST. I am clueless how to deal with this.</p>\n\n<p>Note : Same program used to work previously but now throwing error.</p>\n\n<pre><code>\nstatic void onDisconnect(struct mosquitto *mosq, void *obj, int rc){\n  std::cout&lt;&lt;__FUNCTION__&lt;&lt;\" : \"&lt;&lt;__LINE__&lt;&lt;\" : \"&lt;&lt;mosquitto_strerror(rc)&lt;&lt;std::endl;\n  cout &lt;&lt; \"disconnect status...\" &lt;&lt; rc &lt;&lt; endl; \n  // mosquitto_loop_stop(mosq, false);  (void)obj, (void)mosq;\n}\n\n\nstatic void onConnect(struct mosquitto *mosq, void *userdata, int result){\n std::cout&lt;&lt;__FUNCTION__&lt;&lt;\" : \"&lt;&lt;__LINE__&lt;&lt;\" : mosquitto connect callback succeed. \\n \"&lt;&lt;std::endl;  \n} \n\n\nstatic void onCallback(struct mosquitto *mosq, void *userdata, int level, const char *str){\n// Pring all log messages regardless of level.       (void)mosq, (void)userdata, (void)level;   std::cout&lt;&lt;__FUNCTION__&lt;&lt;\" : \"&lt;&lt;str&lt;&lt;std::endl; \n} \n\nmosquitto_lib_init();\nstruct mosquitto * mosq = NULL;\nconst char *clientId = \"ClientId\";        \nmosq = mosquitto_new(clientId, true, NULL);\n\nif (!mosq) { \n    std::cout&lt;&lt;__FUNCTION__&lt;&lt;\" : \"&lt;&lt;__LINE__&lt;&lt;\" mosquitto_new failed. \\n \"&lt;&lt;std::endl;  \n    return;\n}else\n    std::cout&lt;&lt;__FUNCTION__&lt;&lt;\" : \"&lt;&lt;__LINE__&lt;&lt;\" mosquitto_new succeed. \\n \"&lt;&lt;std::endl;    \n\nmosquitto_tls_opts_set(mosq, 1, NULL, NULL);       \nmosquitto_tls_set(mosq, \"/etc/ssl/certs/ca-certificates.crt\", NULL,                            \n                        \"/opt/usr_data/tests/LoaderPoc/certs/cert.pem\",                            \n                        \"/opt/usr_data/tests/LoaderPoc/certs/privkey.pem\", NULL);                                  \n\nmosquitto_connect_callback_set(mosq, onConnect);\nmosquitto_disconnect_callback_set(mosq, onDisconnect);    \nmosquitto_log_callback_set(mosq, onCallback);    \n//mosquitto_publish_callback_set(mosq, onPublish);    \n\nconst char *host = \"a2eg3przjv23yh.iot.us-east-1.amazonaws.com\";     \nauto ret = mosquitto_connect(mosq, host, 8883, 60);\n    cout &lt;&lt; \"connection status..\" &lt;&lt; ret &lt;&lt;endl;        \n\nauto loop_ret = mosquitto_loop_start(mosq);\n    cout &lt;&lt; \"Loop status...\" &lt;&lt; loop_ret &lt;&lt; endl; \n</code></pre>\n\n<pre><code>Output\nMachineAppOnBoardManager::onCallback : Client ClientId sending CONNECT\nMachineAppOnBoardManager::onDisconnect : 160 : The connection was lost.\ndisconnect status...7 \n</code></pre>\n"}, {"tags": ["c++", "windows", "qt"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1570628859, "post_id": 58305305, "comment_id": 102973306, "body": "You have an error in the code. Absolutely, we can set the window title any time we want if the code is correct."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1570630618, "post_id": 58305305, "comment_id": 102974321, "body": "When <code>exec()</code> returns, the GUI is done running, and you should be exiting the <code>main</code> function. You need to set the window title either while the application is running, or before the window is shown. But that&#39;s just to clear your misunderstanding of how <code>exec()</code> is to be used. Doing <code>setWindowTitle</code> after <code>exec()</code> returns is pointless, since the main window will be hidden at this point (the user had closed it to exit the application), but changing its name won&#39;t hurt. So please show the code that causes this issue. It&#39;s not usual."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11718005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/392cf8bb449635838ef7bd27aa6deae1?s=128&d=identicon&r=PG&f=1", "display_name": "spike", "link": "https://stackoverflow.com/users/11718005/spike"}, "is_accepted": false, "score": 0, "last_activity_date": 1570633067, "creation_date": 1570633067, "answer_id": 58307001, "question_id": 58305305, "link": "https://stackoverflow.com/questions/58305305/updating-main-window-title-after-exec-gets-segment-fault/58307001#58307001", "title": "Updating main window title after exec gets segment fault", "body": "<p>My problem was caused by my trying to use a pointer to my main window withing a MainWindow function. Actually it was a bit more convoluted as I was actually calling a function in another class. The solution was to pass the this pointer to the function in the other class.</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1570635857, "creation_date": 1570635857, "answer_id": 58307792, "question_id": 58305305, "link": "https://stackoverflow.com/questions/58305305/updating-main-window-title-after-exec-gets-segment-fault/58307792#58307792", "title": "Updating main window title after exec gets segment fault", "body": "<p>You're most likely trying to use a destroyed instance of <code>MainWindow</code>. Probably you mistakenly set the <code>QT_WADeleteOnClose</code> attribute on the window. The following self-contained example demonstrates this issue. The attribute may be set in the <code>.ui</code> file, and you may be unaware of it.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qdDJ5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qdDJ5.png\" alt=\"screenshot of the example application\"></a></p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/mainwindow-crash-double-delete-58305305\n#include &lt;QtWidgets&gt;\n\nclass Window : public QMainWindow {\n   QWidget central;\n   QGridLayout layout{&amp;central};\n   QLabel label{\"Hello, World!\"};\n   QCheckBox crash{\"Crash on exit\"};\npublic:\n   static bool alive;\n   Window() {\n      alive = true;\n      layout.addWidget(&amp;label, 0, 0);\n      layout.addWidget(&amp;crash, 1, 0);\n      setCentralWidget(&amp;central);\n      connect(&amp;crash, &amp;QCheckBox::toggled, this, [this](){\n         setAttribute(Qt::WA_DeleteOnClose, crash.isChecked());\n      });\n   }\n   ~Window() {\n      qDebug() &lt;&lt; __FUNCTION__;\n      alive = false;\n   }\n};\nbool Window::alive;\n\nint main(int argc, char *argv[])\n{\n   QApplication a(argc, argv);\n   int rc;\n   {\n      Window w;\n      w.show();\n      rc = a.exec();\n      Q_ASSERT(w.alive);\n      w.setWindowTitle(\"A New Title Awaits\");\n      qDebug() &lt;&lt; \"We're past w.setWindowTitle()\";\n   }\n   return rc;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11718005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/392cf8bb449635838ef7bd27aa6deae1?s=128&d=identicon&r=PG&f=1", "display_name": "spike", "link": "https://stackoverflow.com/users/11718005/spike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1570635857, "creation_date": 1570627737, "question_id": 58305305, "link": "https://stackoverflow.com/questions/58305305/updating-main-window-title-after-exec-gets-segment-fault", "title": "Updating main window title after exec gets segment fault", "body": "<p>If I call MainWindow function setWindowTitle after a.exec() is called in main.cpp I get a segment fault (C000 0005). Is there any way to change the window title after the gui is running. I don't believe this is a WIN 10 restriction as I could do this in python with tkinter. I am using qtcreator, but without QML forms.</p>\n"}, {"tags": ["c++", "memcmp"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1570627658, "post_id": 58305215, "comment_id": 102972601, "body": "Did you profile it, by comparing the same large buffer with itself?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1570627675, "post_id": 58305215, "comment_id": 102972612, "body": "That&#39;s up the your standard library implementation. Maybe you can look at the assembly to find out."}, {"owner": {"reputation": 1740, "user_id": 1179842, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f87956151883524d8079e9787cc471dd?s=128&d=identicon&r=PG", "display_name": "SteakOverflow", "link": "https://stackoverflow.com/users/1179842/steakoverflow"}, "edited": false, "score": 0, "creation_date": 1570627765, "post_id": 58305215, "comment_id": 102972672, "body": "I tried to look up the source for gcc, but it is an internal function that does not have an implementation. I also did not profile it, as I am looking for a general answer for all compilers"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570627766, "post_id": 58305215, "comment_id": 102972675, "body": "While agreeing with @Fran&#231;oisAndrieux I became curious and had a look into <a href=\"https://github.com/lattera/glibc/blob/master/string/memcmp.c\" rel=\"nofollow noreferrer\">memcmp.c on github</a>. According to this, your comparison can make sense. However, isn&#39;t this a bit exotic?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570627886, "post_id": 58305215, "comment_id": 102972756, "body": "I&#39;m not a fan of this check.  it looks like it will hide bugs.  Why would you check if an array equals itself.  Seems like this is a symptom of a bigger issue."}, {"owner": {"reputation": 1740, "user_id": 1179842, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f87956151883524d8079e9787cc471dd?s=128&d=identicon&r=PG", "display_name": "SteakOverflow", "link": "https://stackoverflow.com/users/1179842/steakoverflow"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570628114, "post_id": 58305215, "comment_id": 102972875, "body": "@NathanOliver I am comparing two arrays, but due to the COW implementation of <code>QByteArray</code>, they can sometimes point to the same memory, so I was wondering if I could take a shortcut"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1570628240, "post_id": 58305215, "comment_id": 102972944, "body": "@SteakOverflow No, you often can&#39;t find source code for those kinds of functions. They are often implemented in highly optimized assembly. This is why I mention you will likely need to inspect the assembly to determine what optimizations it contains."}], "answers": [{"comments": [{"owner": {"reputation": 1740, "user_id": 1179842, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f87956151883524d8079e9787cc471dd?s=128&d=identicon&r=PG", "display_name": "SteakOverflow", "link": "https://stackoverflow.com/users/1179842/steakoverflow"}, "edited": false, "score": 0, "creation_date": 1570627958, "post_id": 58305293, "comment_id": 102972801, "body": "What I am trying to do is compare two chunks of memory. The chunks might or might not actually be the same single chunk"}, {"owner": {"reputation": 934, "user_id": 8474738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdPIm.jpg?s=128&g=1", "display_name": "Nathanael Demacon", "link": "https://stackoverflow.com/users/8474738/nathanael-demacon"}, "reply_to_user": {"reputation": 1740, "user_id": 1179842, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f87956151883524d8079e9787cc471dd?s=128&d=identicon&r=PG", "display_name": "SteakOverflow", "link": "https://stackoverflow.com/users/1179842/steakoverflow"}, "edited": false, "score": 0, "creation_date": 1570628021, "post_id": 58305293, "comment_id": 102972833, "body": "Well, then it makes sense to do the comparison."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1570628525, "post_id": 58305293, "comment_id": 102973118, "body": "One could test whether the compiler\u2019s memcmp() implementation already does this by creating a few enormous (eg 100MB) arrays of identical data and then measuring the time it takes to memcmp() two different arrays vs the time it takes to memcmp() one against itself.  (Note that would only tell you about one implementation of memcmp(); other compilers\u2019 implementations might work differently)"}], "tags": [], "owner": {"reputation": 934, "user_id": 8474738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdPIm.jpg?s=128&g=1", "display_name": "Nathanael Demacon", "link": "https://stackoverflow.com/users/8474738/nathanael-demacon"}, "is_accepted": false, "score": 1, "last_activity_date": 1570628220, "last_edit_date": 1570628220, "creation_date": 1570627708, "answer_id": 58305293, "question_id": 58305215, "link": "https://stackoverflow.com/questions/58305215/what-does-memcmp-do-if-you-pass-two-identical-pointers-as-inputs/58305293#58305293", "title": "What does memcmp do if you pass two identical pointers as inputs?", "body": "<p>If by \"same array\" you mean same pointer then yes, it makes sense. But if you want to compare the content (what a <code>memcmp</code> implementation should do), the equality doesn't make sense.</p>\n\n<p>Also the implementation of <code>memcmp</code> you're using could do this verification.</p>\n"}, {"comments": [{"owner": {"reputation": 1740, "user_id": 1179842, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f87956151883524d8079e9787cc471dd?s=128&d=identicon&r=PG", "display_name": "SteakOverflow", "link": "https://stackoverflow.com/users/1179842/steakoverflow"}, "edited": false, "score": 0, "creation_date": 1570628371, "post_id": 58305477, "comment_id": 102973017, "body": "What would you consider large enough, and why does it only make sense for that size?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1740, "user_id": 1179842, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f87956151883524d8079e9787cc471dd?s=128&d=identicon&r=PG", "display_name": "SteakOverflow", "link": "https://stackoverflow.com/users/1179842/steakoverflow"}, "edited": false, "score": 0, "creation_date": 1570628418, "post_id": 58305477, "comment_id": 102973049, "body": "@SteakOverflow For one thing, a branch (such as <code>if</code>) is <a href=\"https://stackoverflow.com/a/11227902/7359094\">not free</a>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 1740, "user_id": 1179842, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f87956151883524d8079e9787cc471dd?s=128&d=identicon&r=PG", "display_name": "SteakOverflow", "link": "https://stackoverflow.com/users/1179842/steakoverflow"}, "edited": false, "score": 0, "creation_date": 1570628427, "post_id": 58305477, "comment_id": 102973055, "body": "@SteakOverflow If the array is only 8 bytes then checking for pointer equality before checking for byte-wise equality would roughly double the amount of work. That&#39;s without considering branch mispredictions."}, {"owner": {"reputation": 1740, "user_id": 1179842, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f87956151883524d8079e9787cc471dd?s=128&d=identicon&r=PG", "display_name": "SteakOverflow", "link": "https://stackoverflow.com/users/1179842/steakoverflow"}, "edited": false, "score": 0, "creation_date": 1570632131, "post_id": 58305477, "comment_id": 102975232, "body": "After some benchmarking, it appears that gcc and clang both do use that shortcut, as they are extremely fast when comparing two identical pointers. The only measurable difference between <code>memcmp_wrapper</code> and <code>std::memcmp</code> is therefore when <code>count&lt;=1</code>."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 6, "last_activity_date": 1570630186, "last_edit_date": 1570630186, "creation_date": 1570628262, "answer_id": 58305477, "question_id": 58305215, "link": "https://stackoverflow.com/questions/58305215/what-does-memcmp-do-if-you-pass-two-identical-pointers-as-inputs/58305477#58305477", "title": "What does memcmp do if you pass two identical pointers as inputs?", "body": "<blockquote>\n  <p>What does memcmp do if you pass two identical pointers as inputs?</p>\n</blockquote>\n\n<p>It will return 0.</p>\n\n<blockquote>\n  <p>will memcmp already [return early if pointers are equal]?</p>\n</blockquote>\n\n<p>It is not specified by the standard. A version of glibc that I checked for example does not.</p>\n\n<blockquote>\n  <p>Would it make sense to write something like this</p>\n</blockquote>\n\n<p>Potentially, if the array is large enough.</p>\n\n<blockquote>\n  <p>What would you consider large enough,</p>\n</blockquote>\n\n<p>I would consider the array to be large enough when you have measured <code>memcmp_wrapper</code> to be faster than <code>memcmp</code> by a factor that statistically significant compared to the variance of the measurements.</p>\n\n<p>Some considerations, among many, for measuring are:</p>\n\n<ul>\n<li><p>the size threshold can be different across different systems depending on CPU, cache and memory etc. See <a href=\"https://stackoverflow.com/questions/16699247/what-is-a-cache-friendly-code\">What is a &quot;cache-friendly&quot; code?</a> for an in-depth discussion.</p></li>\n<li><p>Also note that if the optimiser can prove the equality of the pointers at compile time, then it may be smart enough to optimise the <code>memcmp</code> away entirely, and you may end up measuring two programs that do nothing so design your test harness with care.</p></li>\n</ul>\n\n<blockquote>\n  <p>and why does it only make sense for that size? </p>\n</blockquote>\n\n<p>The branch is not free. The time that you may save by not comparing the array must overcome the expense of the added check.</p>\n\n<p>Since the cost of comparing the array increases (linear asymptotic complexity) with the size of the array, there must be some length after which any comparison will be slower than the branch.</p>\n"}], "owner": {"reputation": 1740, "user_id": 1179842, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f87956151883524d8079e9787cc471dd?s=128&d=identicon&r=PG", "display_name": "SteakOverflow", "link": "https://stackoverflow.com/users/1179842/steakoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 58305477, "answer_count": 2, "score": 4, "last_activity_date": 1570630186, "creation_date": 1570627467, "question_id": 58305215, "link": "https://stackoverflow.com/questions/58305215/what-does-memcmp-do-if-you-pass-two-identical-pointers-as-inputs", "title": "What does memcmp do if you pass two identical pointers as inputs?", "body": "<p>I am comparing two byte arrays with <code>memcmp</code> (or rather a library function does that). The arrays can become relatively large, and they can actually be the same array in many cases.</p>\n\n<p>Would it make sense to write something like this, or will <code>memcmp</code> already do that internally?</p>\n\n<pre><code>int memcmp_wrapper(const void* lhs, const void* rhs, std::size_t count) {\n    if (lhs == rhs)\n        return 0;\n    return std::memcmp(lhs, rhs, count);\n}\n</code></pre>\n"}, {"tags": ["c++", "stm32", "mbed"], "comments": [{"owner": {"reputation": 76, "user_id": 4950336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d42c34a0849a1d4a5237638f92001f6?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Plyaskin", "link": "https://stackoverflow.com/users/4950336/stephen-plyaskin"}, "edited": false, "score": 0, "creation_date": 1570714240, "post_id": 58305010, "comment_id": 103006843, "body": "Question about counting Sine Waves is unrelated to Mbed OS and stm32. You shoud accumulate data from <code>AnalogIn</code> and handle this array of data. It is like you can have several different sources of data: ADC, stream from network, text file etc. And method of handling is common for all sources.  So. You can create 2 questions: how to accumulate data and how extract sine from data."}, {"owner": {"reputation": 1, "user_id": 8794488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yq0OQ1n3-O8/AAAAAAAAAAI/AAAAAAAAF44/GcK-53eiAFk/photo.jpg?sz=128", "display_name": "Nicholas Skram", "link": "https://stackoverflow.com/users/8794488/nicholas-skram"}, "reply_to_user": {"reputation": 76, "user_id": 4950336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d42c34a0849a1d4a5237638f92001f6?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Plyaskin", "link": "https://stackoverflow.com/users/4950336/stephen-plyaskin"}, "edited": false, "score": 0, "creation_date": 1571301664, "post_id": 58305010, "comment_id": 103197740, "body": "Thank you for answering, but are you familiar with the Mbed OS5 API? I am looking for a solution such as <i>InterruptIn</i> only for Analog signals in Real-time."}], "owner": {"reputation": 1, "user_id": 8794488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yq0OQ1n3-O8/AAAAAAAAAAI/AAAAAAAAF44/GcK-53eiAFk/photo.jpg?sz=128", "display_name": "Nicholas Skram", "link": "https://stackoverflow.com/users/8794488/nicholas-skram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570626849, "creation_date": 1570626849, "question_id": 58305010, "link": "https://stackoverflow.com/questions/58305010/mbed-os-5-analog-pulse-counter-using-stm32l432", "title": "Mbed OS 5 Analog Pulse Counter using STM32L432", "body": "<p>Is there a good method for <strong>counting Sine Waves using Mbed OS 5</strong>?\nAs far as I'm concerned, the API only provides an elegant solution to this using <strong>InterruptIn</strong> for Digital signals.</p>\n\n<p>From experience with AVR controllers, <strong>input capture</strong> modes allow for edge detection using Timer/Counters.</p>\n\n<p>In my case, there is no need for any timing nor frequency measurements.</p>\n\n<p>I've tried using both InterruptIn and AnalogIn with a set threshold but seem to get burst of counted values rather than <strong>Single Pulse Counting</strong>.      </p>\n"}, {"tags": ["c++", "dictionary"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1570627002, "post_id": 58304992, "comment_id": 102972178, "body": "No, but you can store it all in a <code>map&lt;string, map&lt;string, tuple&lt;string, string&gt;&gt;&gt;</code>."}, {"owner": {"reputation": 448, "user_id": 7502962, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c95c170717376e69bbc06f775dd79ee8?s=128&d=identicon&r=PG&f=1", "display_name": "KGB91", "link": "https://stackoverflow.com/users/7502962/kgb91"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1570627220, "post_id": 58304992, "comment_id": 102972322, "body": "How do I search that map? Do you have a small example (I am a newbie to C++)?"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 3, "creation_date": 1570629857, "post_id": 58304992, "comment_id": 102973899, "body": "Unrelated, but if you are new to C++ you should take a look at <a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">Why should I not include bits/stdc++.h?</a> and <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std;\u201d considered bad practice?</a>. Just to point you in the right direction for future projects ;)"}], "answers": [{"comments": [{"owner": {"reputation": 448, "user_id": 7502962, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c95c170717376e69bbc06f775dd79ee8?s=128&d=identicon&r=PG&f=1", "display_name": "KGB91", "link": "https://stackoverflow.com/users/7502962/kgb91"}, "edited": false, "score": 0, "creation_date": 1570635345, "post_id": 58306197, "comment_id": 102976999, "body": "Thanks! Can you give some comments on line 3, I cannot follow that one. I don&#39;t understand what <code>&amp;myCar</code> does?"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "reply_to_user": {"reputation": 448, "user_id": 7502962, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c95c170717376e69bbc06f775dd79ee8?s=128&d=identicon&r=PG&f=1", "display_name": "KGB91", "link": "https://stackoverflow.com/users/7502962/kgb91"}, "edited": false, "score": 1, "creation_date": 1570640665, "post_id": 58306197, "comment_id": 102979518, "body": "It means, that the variable <code>myCarMap</code> is just a reference (almost like a pointer). Without the <code>&amp;</code> we would copy the result of <code>mapMap[myCar];</code>. You can read more about this topic in <a href=\"https://stackoverflow.com/questions/1943276/what-does-do-in-a-c-declaration\">this question</a>"}, {"owner": {"reputation": 448, "user_id": 7502962, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c95c170717376e69bbc06f775dd79ee8?s=128&d=identicon&r=PG&f=1", "display_name": "KGB91", "link": "https://stackoverflow.com/users/7502962/kgb91"}, "edited": false, "score": 0, "creation_date": 1570785966, "post_id": 58306197, "comment_id": 103032259, "body": "One final question. If I want to find the car names in the first map, say BMW, how do I do that? This does not seem to work: <code>Test3.assign(get&lt;0&gt;(mapMap.find(&quot;BMW&quot;)-&gt;second));</code>"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "reply_to_user": {"reputation": 448, "user_id": 7502962, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c95c170717376e69bbc06f775dd79ee8?s=128&d=identicon&r=PG&f=1", "display_name": "KGB91", "link": "https://stackoverflow.com/users/7502962/kgb91"}, "edited": false, "score": 1, "creation_date": 1570787551, "post_id": 58306197, "comment_id": 103033058, "body": "<code>mapMap.find(&quot;BMW&quot;)-&gt;second</code> is a map itself, not a tuple."}], "tags": [], "owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "is_accepted": true, "score": 1, "last_activity_date": 1570630536, "creation_date": 1570630536, "answer_id": 58306197, "question_id": 58304992, "link": "https://stackoverflow.com/questions/58304992/use-a-map-with-the-map-name-defined-by-a-string-c/58306197#58306197", "title": "Use a map with the map name defined by a string C++", "body": "<p>To expand on Quentin's comment with a small example: </p>\n\n<pre><code>std::map&lt;std::string, std::map&lt;std::string, std::tuple&lt;std::string, std::string&gt;&gt;&gt; mapMap;\nstd::string myCar = \"BMW\";\nstd::map&lt;std::string, std::tuple&lt;std::string, std::string&gt;&gt; &amp;myCarMap = mapMap[myCar];\nmyCarMap.insert({\"Usage\", {\"1\", \"2\"}});\n\n//Or simply\nauto &amp;bmwMap = mapMap[\"BMW\"];\nbmwMap.insert({\"Usage\", {\"1\", \"2\"}});\n}\n</code></pre>\n\n<p>Probably you can find better names than <code>mapMap</code> though ;)</p>\n"}], "owner": {"reputation": 448, "user_id": 7502962, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c95c170717376e69bbc06f775dd79ee8?s=128&d=identicon&r=PG&f=1", "display_name": "KGB91", "link": "https://stackoverflow.com/users/7502962/kgb91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 58306197, "answer_count": 1, "score": 0, "last_activity_date": 1570630536, "creation_date": 1570626797, "question_id": 58304992, "link": "https://stackoverflow.com/questions/58304992/use-a-map-with-the-map-name-defined-by-a-string-c", "title": "Use a map with the map name defined by a string C++", "body": "<p>This is a follow up question from <a href=\"https://stackoverflow.com/questions/58301843/cout-from-a-map-with-stdtuple\">Cout from a map with std::tuple</a></p>\n\n<p>I have made a small map that I call <code>BMW</code>. It contains the keys <code>Usage</code> and <code>Diesel</code>, as shown below.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;bits/stdc++.h&gt;\n#include &lt;map&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main()\n{\n\n    // initialize container\n    map&lt;string, tuple&lt;string, string&gt;&gt; BMW;\n\n    // insert elements\n    BMW.insert({\"Usage\", {\"1\", \"2\"}});\n    BMW.insert({\"Disel\", {\"2\", \"3\"}});\n\n        string sFirst_value;\n     string sSecond_value;\n\n     //prints out the map\n    for (const auto&amp; x : BMW) {\n        sFirst_value.assign(get&lt;0&gt;(BMW.find(x.first)-&gt;second)); \n        sSecond_value.assign(get&lt;1&gt;(BMW.find(x.first)-&gt;second));\n        cout &lt;&lt; x.first &lt;&lt; \"\\n\" &lt;&lt; \"Min: \" &lt;&lt; sFirst_value &lt;&lt;  \"\\n\" &lt;&lt; \"Max: \" &lt;&lt; sSecond_value &lt;&lt; \"\\n\" &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Is there anyway I can call the name of the map, <code>BMW</code>, from a string instead of writing <code>BMW.insert({\"Usage\", {\"1\", \"2\"}});</code>? Like this:</p>\n\n<pre><code>stirng Mycar;\nMycar.insert({\"Usage\", {\"1\", \"2\"}});\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1570626525, "post_id": 58304856, "comment_id": 102971875, "body": "<code>tracknum.c_str()+tracknumext.c_str()</code> you are adding pointers there, not combining strings. Try <code>(tracknum + tracknumext).c_str();</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1570626581, "post_id": 58304856, "comment_id": 102971910, "body": "Even if you made the changes mentioned in the above comment, it seems you are using narrow strings when the function you&#39;re calling wants wide-character strings."}, {"owner": {"reputation": 3, "user_id": 10598639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f9lzDytxjaU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8yyRSjVsYeSL3M1H4U2r9QWyR6w/mo/photo.jpg?sz=128", "display_name": "ivon pint", "link": "https://stackoverflow.com/users/10598639/ivon-pint"}, "edited": false, "score": 0, "creation_date": 1570626691, "post_id": 58304856, "comment_id": 102971980, "body": "I&#39;m new to c++. I&#39;m more proficient in python."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1570626903, "post_id": 58304856, "comment_id": 102972111, "body": "MS api usually has 2 versions of functions that take strings. One that accepts <code>char *</code> and one that accepts <code>wchar_t *</code>. In this case you can call the non-unicode version explicitly with <code>PlaySoundA</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 1, "creation_date": 1570627374, "post_id": 58304856, "comment_id": 102972427, "body": "@Adrian Both <code>std::string</code> and <code>std::wstring</code> are instantiations of the <code>std::basic_string</code> template with different underlying character types. They have the same interface."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1570627463, "post_id": 58304856, "comment_id": 102972497, "body": "@molbdnilo But does it return a char* or a wchar_t*? cppreference site just keeps pushing back to <code>basic_string::c_str()</code>!"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 2, "creation_date": 1570627665, "post_id": 58304856, "comment_id": 102972605, "body": "@Adrian <code>basic_string::c_str</code> returns a pointer to the underlying character type, called <code>CharT</code> on cppreference.com."}, {"owner": {"reputation": 3, "user_id": 10598639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f9lzDytxjaU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8yyRSjVsYeSL3M1H4U2r9QWyR6w/mo/photo.jpg?sz=128", "display_name": "ivon pint", "link": "https://stackoverflow.com/users/10598639/ivon-pint"}, "edited": false, "score": 0, "creation_date": 1570627786, "post_id": 58304856, "comment_id": 102972688, "body": "Thanks for assisting... do you think there&#39;s a solution. I made changes to program now i&#39;m getting this new error after I try to join both char together now it wont compile.                 LPSTR chtracknum = (const_cast&lt;char*&gt;(tracknum + tracknumext).c_str());"}, {"owner": {"reputation": 3, "user_id": 10598639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f9lzDytxjaU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8yyRSjVsYeSL3M1H4U2r9QWyR6w/mo/photo.jpg?sz=128", "display_name": "ivon pint", "link": "https://stackoverflow.com/users/10598639/ivon-pint"}, "edited": false, "score": 0, "creation_date": 1570627876, "post_id": 58304856, "comment_id": 102972745, "body": "invalid const_cast from type &#39;std::__cxx11::basic_string&lt;char&gt;&#39; to type &#39;char*&#39;|"}, {"owner": {"reputation": 3, "user_id": 10598639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f9lzDytxjaU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8yyRSjVsYeSL3M1H4U2r9QWyR6w/mo/photo.jpg?sz=128", "display_name": "ivon pint", "link": "https://stackoverflow.com/users/10598639/ivon-pint"}, "edited": false, "score": 0, "creation_date": 1570629971, "post_id": 58304856, "comment_id": 102973962, "body": "I&#39;m stuck. any assistance is appreciated."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10598639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f9lzDytxjaU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8yyRSjVsYeSL3M1H4U2r9QWyR6w/mo/photo.jpg?sz=128", "display_name": "ivon pint", "link": "https://stackoverflow.com/users/10598639/ivon-pint"}, "edited": false, "score": 0, "creation_date": 1570638892, "post_id": 58306502, "comment_id": 102978768, "body": "here&#39;s what I&#39;m doing and i&#39;m still getting an error. I&#39;m new to c++              LPCWSTR chtracknum = (const_cast&lt;const*&gt;(tracknum+tracknumext)wide.c_str());"}, {"owner": {"reputation": 3, "user_id": 10598639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f9lzDytxjaU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8yyRSjVsYeSL3M1H4U2r9QWyR6w/mo/photo.jpg?sz=128", "display_name": "ivon pint", "link": "https://stackoverflow.com/users/10598639/ivon-pint"}, "edited": false, "score": 0, "creation_date": 1570638974, "post_id": 58306502, "comment_id": 102978801, "body": "i&#39;m trying to find a way to switch from basic string(narrow) to wide string(wstring) then I should be able to use PlaySoundW(TEXT(var))"}, {"owner": {"reputation": 3, "user_id": 10598639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f9lzDytxjaU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8yyRSjVsYeSL3M1H4U2r9QWyR6w/mo/photo.jpg?sz=128", "display_name": "ivon pint", "link": "https://stackoverflow.com/users/10598639/ivon-pint"}, "edited": false, "score": 0, "creation_date": 1570641473, "post_id": 58306502, "comment_id": 102979881, "body": "class carolTracks {     public:         void track()         {             int num = 2;             string tracknum = to_string(num);             string tracknumext = &quot;.wav&quot;;             wstring wtracknum, wtracknumext;              for (int i = 0; i &lt;tracknum.length(); ++i)                 wtracknum += wchar_t(tracknum[i]);             const wchar_t* chtracknum = (wtracknum+wtracknumext).c_str();             PlaySoundW(TEXT(chtracknum), NULL, SND_FILENAME | SND_ASYNC);         } };"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3, "user_id": 10598639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f9lzDytxjaU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8yyRSjVsYeSL3M1H4U2r9QWyR6w/mo/photo.jpg?sz=128", "display_name": "ivon pint", "link": "https://stackoverflow.com/users/10598639/ivon-pint"}, "edited": false, "score": 0, "creation_date": 1570646157, "post_id": 58306502, "comment_id": 102982082, "body": "@ivonpint Such a loop is NOT the correct way to convert a <code>std::string</code> to a <code>std::wstring</code>. Just use <code>std::wstring</code> by itself, you don&#39;t need <code>std::string</code> at all. Also, you can&#39;t use the <code>TEXT()</code> macro in this case, it only works with <b>literals</b>, not with <b>variables</b>. Also, <code>chtracknum</code> is a dangling pointer to invalid memory! Try this instead: <code>int num = 2; wstring filename = to_wstring(num) + L&quot;.wav&quot;; PlaySoundW(file.c_str(), NULL, SND_FILENAME | SND_ASYNC);</code> See the answer I just posted demonstrating this."}], "tags": [], "owner": {"reputation": 46, "user_id": 9851332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f8b597adb68176ef681930c559f1c8?s=128&d=identicon&r=PG&f=1", "display_name": "xdimy", "link": "https://stackoverflow.com/users/9851332/xdimy"}, "is_accepted": false, "score": 0, "last_activity_date": 1570631424, "creation_date": 1570631424, "answer_id": 58306502, "question_id": 58304856, "link": "https://stackoverflow.com/questions/58304856/convert-int-to-string-then-join-another-variable-to-create-a-full-extension-the/58306502#58306502", "title": "convert int to string then join another variable to create a full extension, then convert it to const_char*", "body": "<p>You are already advised to use wide version <code>wstring</code> (instead of narrow <code>string</code>) to be compatible with LPCWSTR params in PlaySoundW.\nSo your LPSTR chtracknum should be also wide and const to be compatible with <code>c_str()</code> from <code>wstring</code>, so you need <code>LPCWSTR chtracknum</code> (after you begin to use <code>wstring</code> instead of string)</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10598639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f9lzDytxjaU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8yyRSjVsYeSL3M1H4U2r9QWyR6w/mo/photo.jpg?sz=128", "display_name": "ivon pint", "link": "https://stackoverflow.com/users/10598639/ivon-pint"}, "edited": false, "score": 0, "creation_date": 1570654086, "post_id": 58310189, "comment_id": 102985249, "body": "Thank you! Just started to code in c++ 3 weeks ago."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1570646220, "last_edit_date": 1570646220, "creation_date": 1570645783, "answer_id": 58310189, "question_id": 58304856, "link": "https://stackoverflow.com/questions/58304856/convert-int-to-string-then-join-another-variable-to-create-a-full-extension-the/58310189#58310189", "title": "convert int to string then join another variable to create a full extension, then convert it to const_char*", "body": "<p>You are using <code>std::string</code>, which is based on <code>char</code>, but you are trying to use the <code>TCHAR</code>-based version of <code>PlaySound()</code> and are clearly compiling with <code>UNICODE</code> defined, so that <code>TCHAR</code> maps to <code>wchar_t</code> and <code>PlaySound()</code> maps to <code>PlaySoundW()</code>.  You are trying to use <code>char</code> data where <code>wchar_t</code> data is expected, that is exactly what the conversion errors are complaining about.</p>\n\n<p>You are also misusing the string's <code>c_str()</code> method, as well as the <code>TEXT()</code> macro.</p>\n\n<p>Just use <code>std::wstring</code> instead, and call <code>PlaySoundW()</code> directly, eg:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class carolTracks\n{\n    public:\n        void track()\n        {\n            int num = 1;\n            std::wstring tracknum = std::to_wstring(num);\n            std::wstring tracknumext = L\".wav\";\n            std::wcout &lt;&lt; tracknum &lt;&lt; std::endl;\n            std::wcout &lt;&lt; tracknumext &lt;&lt; std::endl;\n\n            std::wstring filename = tracknum + tracknumext;\n            PlaySoundW(filename.c_str(), NULL, SND_FILENAME | SND_ASYNC);\n        }\n};\n</code></pre>\n\n<p>Alternatively, if you want to continue using <code>std::string</code>, just call <code>PlaySoundA()</code> directly instead:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class carolTracks\n{\n    public:\n        void track()\n        {\n            int num = 1;\n            std::string tracknum = std::to_string(num);\n            std::string tracknumext = \".wav\";\n            std::cout &lt;&lt; tracknum &lt;&lt; std::endl;\n            std::cout &lt;&lt; tracknumext &lt;&lt; std::endl;\n\n            std::string filename = tracknum + tracknumext;\n            PlaySoundA(filename.c_str(), NULL, SND_FILENAME | SND_ASYNC);\n        }\n};\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10598639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f9lzDytxjaU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC8yyRSjVsYeSL3M1H4U2r9QWyR6w/mo/photo.jpg?sz=128", "display_name": "ivon pint", "link": "https://stackoverflow.com/users/10598639/ivon-pint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58310189, "answer_count": 2, "score": 0, "last_activity_date": 1570646220, "creation_date": 1570626331, "last_edit_date": 1570643914, "question_id": 58304856, "link": "https://stackoverflow.com/questions/58304856/convert-int-to-string-then-join-another-variable-to-create-a-full-extension-the", "title": "convert int to string then join another variable to create a full extension, then convert it to const_char*", "body": "<hr>\n\n<p>Getting this error when I try to get data from a variable to place it into the playsond function :</p>\n\n<pre><code>cannot convert 'std::__cxx11::string {aka std::__cxx11::basic_string&lt;char&gt;}' to 'LPCWSTR {aka const wchar_t*}\n\ncannot convert 'std::__cxx11::string {aka std::__cxx11::basic_string&lt;char&gt;}' to 'LPCWSTR {aka const wchar_t*}\n\ncannot convert 'LPSTR {aka char*}' to 'LPCWSTR {aka const wchar_t*}' for argument '1' to 'BOOL PlaySoundW(LPCWSTR, HMODULE, DWORD)'|invalid operands of types 'const char*' and 'const char*' to binary 'operator+'|\n</code></pre>\n\n<hr>\n\n<p>I have a c++ project that I'm working on to play sounds automatically selected from a random number between 1-5. I'm trying to change the variable from an int to string, then then to a const_char* then place a .wav extension on the file and place it into a function to auto play the random number.wav file.</p>\n\n<p>Basically I want to create a var that's a string that can work to go this function:</p>\n\n<pre><code>PlaySound(TEXT(var), NULL, SND_FILENAME | SND_ASYNC);\n</code></pre>\n\n<p>example of the function:</p>\n\n<pre><code>class carolTracks\n{\n    public:\n        void track()\n        {\n            int num = 1;\n            string tracknum = to_string(num);\n            string tracknumext = \".wav\";\n            cout &lt;&lt;tracknum&lt;&lt;endl;\n            cout &lt;&lt;tracknumext&lt;&lt;endl;\n\n            //LPSTR chtracknum = (const_cast&lt;char*&gt;(tracknum.c_str()+tracknumext.c_str()));\n            //PlaySound(TEXT(chtracknum), NULL, SND_FILENAME | SND_ASYNC);\n        }\n};\n</code></pre>\n"}, {"tags": ["c++", "iterator", "virtual"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1570626350, "post_id": 58304719, "comment_id": 102971773, "body": "You did not provide the exact context but I suspect this was due to missing comparison operators for <code>IIterator</code>. As a side note, you probably might want to reconsider defining <code>const_iterator</code> as <code>const</code> type."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1570626609, "post_id": 58304719, "comment_id": 102971929, "body": "Standard library (STL) make it different way. &lt;algorithm&gt; header have a generic algorithms like <a href=\"https://en.cppreference.com/w/cpp/algorithm/for_each\" rel=\"nofollow noreferrer\">for_each</a>, <a href=\"https://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow noreferrer\">remove_if</a> etc. which works on any iterator."}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1570627180, "post_id": 58304719, "comment_id": 102972291, "body": "To answer the headline question, yes. That&#39;s exactly what <code>std::iterator</code> does."}, {"owner": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "reply_to_user": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1570628950, "post_id": 58304719, "comment_id": 102973356, "body": "@sweenish <code>std::iterator</code> is not virtual"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1570629682, "post_id": 58304719, "comment_id": 102973815, "body": "Why are you doing this? I&#39;m not convinced at all that any of this is needed to do whatever you have in mind. On that note: please share what you&#39;re really trying to achieve. Show the code you have in mind that will be using it. It&#39;s a good bet that that code can be made to work in C++ without doing any of what you propose, and it will read not all that different from C# (or Python)."}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "reply_to_user": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "edited": false, "score": 0, "creation_date": 1570630554, "post_id": 58304719, "comment_id": 102974291, "body": "@fdan &quot;std::iterator is the base class provided to simplify definitions of the required types for iterators&quot; from <a href=\"https://en.cppreference.com/w/cpp/iterator/iterator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/iterator/iterator</a>"}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "reply_to_user": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "edited": false, "score": 0, "creation_date": 1570631414, "post_id": 58304719, "comment_id": 102974796, "body": "@fdan It took looking at the &lt;iterator&gt; files, but it appears to not be; I misunderstood what cppreference.com was saying. I&#39;m still a bit surprised, though."}, {"owner": {"reputation": 19, "user_id": 11274687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a50a3e0e906c14d750973effedf23fe?s=128&d=identicon&r=PG&f=1", "display_name": "Lev Marder", "link": "https://stackoverflow.com/users/11274687/lev-marder"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1570649673, "post_id": 58304719, "comment_id": 102983545, "body": "@KubaOber it was my homework and I needed to make sorting algorithms for ISequence so it works on Array, List, etc. My goal right now is to make those algorithms work on iterators. Sort functions signature <code>c++ void quickSort(ISequence&lt;T&gt;* seq, int start, int end, C cmp); </code> where C cmp is a compare function. Maybe I need to give up making MyIterator class member of Array and make it external? Or make std::iterator a parameter? Or the best solution here is to add 2 other template types?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1570714777, "post_id": 58304719, "comment_id": 103007178, "body": "You don&#39;t need an <code>ISequence</code>. You would in C# if you had no <code>IList</code> etc. Not in C++. Seriously. Get rid of that, and wherever you accept <code>ISequence</code>, accept a generic type. And it will still work, as long as the concrete types you pass along indeed act like they should. For example, <code>getIsEmpty</code> would be a C++ equivalent of an extension method, i.e. a freestanding function, not a member: <code>template &lt;class C&gt; bool isEmpty(const C&amp; sequence) { return sequence.begin() == sequence.end(); }</code>. Your framework would look at home in C#, but not in C++."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1570715160, "post_id": 58304719, "comment_id": 103007427, "body": "In C++, someone seeing a &quot;sequence&quot; with no iterators will be just confused. There&#39;s no need for it. Whatever cool sequences you have, just make sure they provide <code>begin()</code> and <code>end()</code> members, or that there are <code>std::begin</code> and <code>std::end</code> overloads for them. That automatically makes them iterable. If this &quot;framework&quot; was given to you by a teacher for a C++ class, then the teacher just doesn&#39;t know C++, and I&#39;m not joking: they are unfamiliar with the basic idioms and patterns of C++, never mind the standard library. C# is not C++. You&#39;re taught C# in this class, and the cake is a total lie."}, {"owner": {"reputation": 19, "user_id": 11274687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a50a3e0e906c14d750973effedf23fe?s=128&d=identicon&r=PG&f=1", "display_name": "Lev Marder", "link": "https://stackoverflow.com/users/11274687/lev-marder"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1570717260, "post_id": 58304719, "comment_id": 103008766, "body": "@KubaOber that&#39;s how higher education in IT works in Russia. Maybe there are good sources or literature to learn C++ in a good way?"}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1570629630, "last_edit_date": 1570629630, "creation_date": 1570627706, "answer_id": 58305292, "question_id": 58304719, "link": "https://stackoverflow.com/questions/58304719/is-it-possible-to-create-a-virtual-iterator-class/58305292#58305292", "title": "Is it possible to create a virtual iterator class?", "body": "<p>The concepts you're implementing are rather foundational in C#. Perhaps there's a good reason none of that exists in C++? Yes!</p>\n\n<p>You are trying to implement .Net library using C++. <strong>This is not such a great idea</strong>, since the design of that library caters to the limitations of C# and the CLR (or whatever they call it these days). C# can do much less with types at compile time, and it doesn't have a compile-time generic type substitution system like C++ does. By not using what C++ offers, you're reinventing the wheel and writing code that looks quite unidiomatic. And it'll likely be slower than it needs to be, since virtual method calls on iterators are liable to be invoked often, their overheads showing. The compiler will devirtualize some of the calls if it can, but that's not something to depend on.</p>\n\n<p>Generalizing a bit; <em>The direct use of most any idiom from the .Net ecosystem in C++ is wrong by default unless proven otherwise</em>.</p>\n\n<p>In C++ the notion of \"interfaces\" doesn't depend on virtual methods, but on concepts - i.e. constraints on types. There's no way to achieve this in C#, nor in CLR in general, the design doesn't support it. In C++, as long as the concrete type used fits within the constraints that the caller requires (e.g. is iterable), the compiler will take care of the rest. Idiomatically, you'd pass containers around either using <a href=\"https://en.cppreference.com/w/cpp/ranges\" rel=\"nofollow noreferrer\">ranges</a> or iterators, and all code that accepts those should be generic: the type of the container or iterator should be a template parameter, and the iterators should not be forced to be of the same type - this was really a library design bug in older versions of C++ library.</p>\n\n<p>So, the beauty of C++ is that you don't have to define any interfaces whatsoever. In C++20 you can constrain the types using concepts, but other than that, it's just simple - much simpler than in C#. The idea of ranges is to have objects that act \"like\" containers, i.e. you can iterate on them using range-for, but they aren't necessarily containers - they may be just a way to express a range of elements on a container, or even dynamically generated.</p>\n\n<p>If you're thinking of doing this in support of porting code from C# to C++, then simply forget about the need for <code>ISequence</code> etc. Just use generic type parameters, optionally constrain them using concepts if you're using a C++20 compiler, and you're set. It's that easy. The container can be anything. Even the plain \"C\" array (shudder - don't use those, use <code>std::array</code> instead, always!).</p>\n\n<p>Suppose we had following C# code:</p>\n\n<pre><code>System.IO.TextWriter cout = Console.Out;\n\nAction&lt;System.Collections.IEnumerable&gt; printValues = (values) =&gt;\n{\n    cout.WriteLine(\"printValues\");\n    foreach (var v in values)\n        cout.Write($\"{v} \");\n    cout.Write(\"\\n\");\n};\n\nvar list_of_ints = new List&lt;int&gt;{1, 2, 3, 4, 5};\nvar vector_of_strings = new String[]{\"a\", \"b\", \"c\", \"d\"};\ncout.WriteLine(\"* Entire containers\");\nprintValues(list_of_ints);\nprintValues(vector_of_strings);\ncout.WriteLine(\"\\n* Subranges of containers\");\nprintValues(list_of_ints.GetRange(1, list_of_ints.Count() - 1));\nprintValues(vector_of_strings.Take(vector_of_strings.Count() - 1));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>* Entire containers\nprintValues\n1 2 3 4 5\nprintValues\na b c d\n\n* Subranges of containers\nprintValues\n2 3 4 5\nprintValues\na b c\n</code></pre>\n\n<p>It wouldn't look much different in C++, as long as you stick to idiomatic C++ and don't try reimplementing .Net in C++:</p>\n\n<pre><code>#include &lt;forward_list&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n// This will accept entire containers, as well as C++20 ranges.\ntemplate &lt;class C&gt; void printValues(const C &amp;values) {\n    std::cout &lt;&lt; __FUNCTION__ &lt;&lt; \" with container\\n\";\n    for (auto &amp;v : values)\n        std::cout &lt;&lt; v &lt;&lt; \" \";\n    std::cout &lt;&lt; \"\\n\";\n}\n\n// This is the more legacy way of doing it - to stay compatible with C++98 (shiver).\ntemplate &lt;class I1, class I2&gt; void printValues(I1 start, I2 end) {\n    std::cout &lt;&lt; __FUNCTION__ &lt;&lt; \" with iterators\\n\";\n    for (; start != end; ++start)\n        std::cout &lt;&lt; *start &lt;&lt; \" \";\n    std::cout &lt;&lt; \"\\n\";\n}\n\nint main() {\n    std::forward_list&lt;int&gt; list_of_ints{1,2,3,4,5};\n    std::vector&lt;std::string&gt; vector_of_strings{\"a\", \"b\", \"c\", \"d\"};\n\n    std::cout &lt;&lt; \"* Entire containers\\n\";\n    printValues(list_of_ints);\n    printValues(vector_of_strings);\n    std::cout &lt;&lt; \"\\n* Subranges of containers\\n\";\n    printValues(std::next(list_of_ints.cbegin()), list_of_ints.cend());\n    printValues(vector_of_strings.cbegin(), std::prev(vector_of_strings.cend()));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>* Entire containers\nprintValues with container\n1 2 3 4 5 \nprintValues with container\na b c d \n\n* Subranges of containers\nprintValues with iterators\n2 3 4 5 \nprintValues with iterators\na b c \n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11274687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a50a3e0e906c14d750973effedf23fe?s=128&d=identicon&r=PG&f=1", "display_name": "Lev Marder", "link": "https://stackoverflow.com/users/11274687/lev-marder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570629630, "creation_date": 1570625956, "question_id": 58304719, "link": "https://stackoverflow.com/questions/58304719/is-it-possible-to-create-a-virtual-iterator-class", "title": "Is it possible to create a virtual iterator class?", "body": "<p>I have a virtual container \"ISequence\" which is used as a template for container implementations on arrays or lists. I have implemented an iterator for both Array and List containers. What I want to do is to create a virtual IIterator class so I can create algorithms that use iterators and accept ISequence is a parameter. My goal is to be free of implementation.</p>\n\n<p>I tried adding virtual IIterator class to ISequence with no methods and that inherits std::iterator but that didn't work</p>\n\n<p>ISequence class:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nclass ISequence {\nprotected:\n    int length; //length of sequence\npublic:\n    virtual int getLength() const = 0; //get length of sequence\n    virtual bool getIsEmpty() const = 0; //check if empty\npublic:\n    virtual T get(int index) const = 0; //get item based on index\n    virtual T getFirst() const = 0; //get first item\n    virtual T getLast() const = 0; //get last item\n    virtual ISequence&lt;T&gt;* getSubSequence(int startIndex, int endIndex) const = 0;\n    virtual void append(T item) = 0; //add item to the end\n    virtual void prepend(T item) = 0; //add item to the beginning\n    virtual void insertAt(int index, T item) = 0; //insert item at a specific point\n    virtual void remove(T item) = 0; //remove specific item\n    virtual void replace(int index, T item) = 0; //replace an item\n};\n\n</code></pre>\n\n<p>Array with an iterator:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nclass ArraySequence: public ISequence&lt;T&gt; {\nprivate:\n    T* data;\npublic:\n    ArraySequence();\n    ArraySequence(ISequence&lt;T&gt;* sequence);\n    ArraySequence(int n, int leftLimit, int rightLimit);\n    ArraySequence&lt;T&gt;&amp; operator=(const ArraySequence&lt;T&gt;&amp; sequence);\n    ~ArraySequence();\npublic:\n    virtual int getLength() const override;\n    virtual bool getIsEmpty() const override;\npublic:\n    virtual T get(int index) const override;\n    virtual T getFirst() const override;\n    virtual T getLast() const override;\n    virtual ArraySequence&lt;T&gt;* getSubSequence(int startIndex, int endIndex) const override;\n    virtual void append(T item) override;\n    virtual void prepend(T item) override;\n    virtual void insertAt(int index, T item) override;\n    virtual void remove(T item) override;\n    virtual void replace(int index, T item) override;\nprivate:\n    class MyIterator: public std::iterator&lt;std::random_access_iterator_tag, T&gt; {\n        friend class ArraySequence;\n    private:\n        T* pos;\n        MyIterator(T* pos);\n    public:\n        MyIterator(const MyIterator &amp;it);\n        ~MyIterator();\n    public:\n        typename MyIterator::reference operator*() const;\n        typename MyIterator::pointer operator-&gt;() const;\n        typename MyIterator::reference operator[](const typename MyIterator::difference_type&amp; n) const;\n        typename MyIterator::difference_type operator-(const MyIterator&amp; it) const;\n        MyIterator operator++(int);\n        MyIterator&amp; operator++();\n        MyIterator operator--(int);\n        MyIterator&amp; operator--();\n        MyIterator operator+(const typename MyIterator::difference_type&amp; n) const;\n        MyIterator&amp; operator+=(const typename MyIterator::difference_type&amp; n);\n        MyIterator operator-(const typename MyIterator::difference_type&amp; n) const;\n        MyIterator&amp; operator-=(const typename MyIterator::difference_type&amp; n);\n        bool operator!=(const MyIterator&amp; it) const;\n        bool operator==(const MyIterator&amp; it) const;\n        bool operator&lt;(const MyIterator&amp; it) const;\n        bool operator&gt;(const MyIterator&amp; it) const;\n        bool operator&lt;=(const MyIterator&amp; it) const;\n        bool operator&gt;=(const MyIterator&amp; it) const;\n    };\npublic:\n    typedef MyIterator iterator;\n    typedef MyIterator const const_iterator;\n    iterator begin();\n    iterator end();\n    const_iterator begin() const;\n    const_iterator end() const;\n};\n</code></pre>\n\n<p>My code for abstract IIterator (as an addition to ISequence):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>protected:\n    class IIterator: public std::iterator&lt;std::random_access_iterator_tag, T&gt; { //virtual Iterator class\n    };\npublic:\n    typedef IIterator iterator;\n    typedef IIterator const const_iterator;\n    iterator begin();\n    iterator end();\n    const_iterator begin() const;\n    const_iterator end() const;\n</code></pre>\n\n<p>Then I inherit it by MyIterator in Array.</p>\n\n<p>With what I tried I get the \"Invalid operands to binary expression ('ISequence::IIterator' and 'ISequence::IIterator')\" error message when I run simple forrange cycle.</p>\n"}, {"tags": ["javascript", "c++", "embedded-v8"], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 11357532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AiTGm1f9kaE/AAAAAAAAAAI/AAAAAAAAAEo/4rKSm8iSQ-M/photo.jpg?sz=128", "display_name": "Anastasia Riza", "link": "https://stackoverflow.com/users/11357532/anastasia-riza"}, "is_accepted": false, "score": 0, "last_activity_date": 1570638207, "creation_date": 1570638207, "answer_id": 58308429, "question_id": 58304608, "link": "https://stackoverflow.com/questions/58304608/v8-newinstance-memory-leak/58308429#58308429", "title": "v8 NewInstance memory leak", "body": "<p>I've solved it. If you have such problem - remember to firstly save your object template to Persistent and then get it from it</p>\n"}], "owner": {"reputation": 19, "user_id": 11357532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AiTGm1f9kaE/AAAAAAAAAAI/AAAAAAAAAEo/4rKSm8iSQ-M/photo.jpg?sz=128", "display_name": "Anastasia Riza", "link": "https://stackoverflow.com/users/11357532/anastasia-riza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570638207, "creation_date": 1570625617, "question_id": 58304608, "link": "https://stackoverflow.com/questions/58304608/v8-newinstance-memory-leak", "title": "v8 NewInstance memory leak", "body": "<p>I have a problem with v8. I am creating object with NewInstance from Object Template. This function is being called every frame, and I have such code (see below), where GC does not collect objects from returned array and therefore I have memory leak</p>\n\n<pre><code>Events.on(\"frame\", () =&gt; { let objs = Test.getAllObjects(); });\n</code></pre>\n\n<p>Test.getAllObjects returns array of objects created with NewInstance\nI can't figure out why objects returned by this function are still alive </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1570625530, "post_id": 58304555, "comment_id": 102971269, "body": "What is your question?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1570625862, "post_id": 58304555, "comment_id": 102971492, "body": "In my opinion, the property of XOR, that, for any <code>a</code> <code>a ^ a == 0</code>, should be enough to solve this task."}, {"owner": {"reputation": 1542, "user_id": 443136, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/96f1ca62e16935890751ea3b4d7d84c8?s=128&d=identicon&r=PG", "display_name": "Valerio Santinelli", "link": "https://stackoverflow.com/users/443136/valerio-santinelli"}, "edited": false, "score": 0, "creation_date": 1570625987, "post_id": 58304555, "comment_id": 102971559, "body": "What is the result that you&#39;re getting and what are you expecting?"}, {"owner": {"reputation": 3, "user_id": 12188637, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4aQ9YI0kUWg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf94S0gd_SH2EAeZZSI_FZyuoOYuQ/photo.jpg?sz=128", "display_name": "Yashika Khurana", "link": "https://stackoverflow.com/users/12188637/yashika-khurana"}, "reply_to_user": {"reputation": 1542, "user_id": 443136, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/96f1ca62e16935890751ea3b4d7d84c8?s=128&d=identicon&r=PG", "display_name": "Valerio Santinelli", "link": "https://stackoverflow.com/users/443136/valerio-santinelli"}, "edited": false, "score": 0, "creation_date": 1570627508, "post_id": 58304555, "comment_id": 102972524, "body": "@ValerioSantinelli, for array 1 2 3 1 output should be 2,3 ."}, {"owner": {"reputation": 3, "user_id": 12188637, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4aQ9YI0kUWg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf94S0gd_SH2EAeZZSI_FZyuoOYuQ/photo.jpg?sz=128", "display_name": "Yashika Khurana", "link": "https://stackoverflow.com/users/12188637/yashika-khurana"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570627568, "post_id": 58304555, "comment_id": 102972549, "body": "@Algirdas , that works for finding only one unique no. the question is to find two unique numbers."}, {"owner": {"reputation": 3, "user_id": 12188637, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4aQ9YI0kUWg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf94S0gd_SH2EAeZZSI_FZyuoOYuQ/photo.jpg?sz=128", "display_name": "Yashika Khurana", "link": "https://stackoverflow.com/users/12188637/yashika-khurana"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570627630, "post_id": 58304555, "comment_id": 102972586, "body": "@MaxLanghof  the ques is to find two numbers that do not appear twice in the array."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1570627811, "post_id": 58304555, "comment_id": 102972700, "body": "That&#39;s the task that you are supposed to solve. It defeats the purpose if we do it for you. Please ask a more specific question."}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1570628709, "post_id": 58305116, "comment_id": 102973222, "body": "To be a good answer, I&#39;d expect some explanations <i>why</i> that works. <i>Me</i> can deduce, but can question author (or someone else reading this later on) as well?"}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1570628965, "post_id": 58305116, "comment_id": 102973365, "body": "@Aconcagua added explanations :)"}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "edited": false, "score": 0, "creation_date": 1570629801, "post_id": 58305116, "comment_id": 102973870, "body": "Sure you can choose any set bit from <code>res</code>, which one would you have picked and how?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1570631220, "post_id": 58305116, "comment_id": 102974655, "body": "OK, added my proposition for the explanation, hope you don&#39;t mind. If you don&#39;t like it, just revert, I&#39;m fine with then..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1570631316, "post_id": 58305116, "comment_id": 102974730, "body": "Side note: you could as well have started with <code>ans = 0</code>, you&#39;d just find the other one of those unique numbers you find with <code>ans = res</code> :)"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1570631900, "post_id": 58305116, "comment_id": 102975086, "body": "[dropped some comments to keep answer clean from long discussion]"}], "tags": [], "owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "is_accepted": true, "score": 1, "last_activity_date": 1570631169, "last_edit_date": 1570631169, "creation_date": 1570627155, "answer_id": 58305116, "question_id": 58304555, "link": "https://stackoverflow.com/questions/58304555/unique-numbers-using-bitwise-operators/58305116#58305116", "title": "Unique numbers using bitwise operators", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int n;\n    cin &gt;&gt; n;\n    int *arr = new int[n];\n    for (int i = 0; i &lt; n; ++i)\n        cin &gt;&gt; arr[i];\n\n    int res = 0;\n    for (int i = 0; i &lt; n; ++i)\n        res ^= arr[i];\n    /*\n     So far, we XOR-ed all elements in the array; the trick behind, though,\n     is that any two duplicates will eliminate themselves, so effectively\n     res now contains the two unique numbers XOR-ed together.\n   */\n\n    /*\n     Now we need the index of a bit where these two unique numbers differ\n     i. e. the index of a one-bit in res; ANY one will do the trick,\n     so let's just pick the right most one...\n    */\n    int set = 1;\n    while (!(set &amp; res))\n        set &lt;&lt;= 1;\n\n    /*\n        Now the tricky part.\n        It is guaranteed that there are only 2 numbers which occur only once in the array.\n        Note that for any set bit in the xor of these two numbers,\n        that bit has to occur either in the 1st or 2nd.\n        Now traverse the array and check for which numbers this bit is set.\n        Note that for any number for which it is set, that number occurs twice unless it's one of the 2 unique numbers.\n        Hence if we keep \"XOR-ing\" `res` with numbers for which `set` bit is set, we acquire one of the 2 unique numbers.\n        Since the xor of both is stored in `res`, \"XOR-ing\" `ans` with `res` gives the 2nd unique number.\n    */\n    int ans = res;\n    for (int i = 0; i &lt; n; ++i)\n        if (arr[i] &amp; set)\n            ans ^= arr[i];\n\n    cout &lt;&lt; ans &lt;&lt; ' ' &lt;&lt; (ans ^ res) &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12188637, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4aQ9YI0kUWg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf94S0gd_SH2EAeZZSI_FZyuoOYuQ/photo.jpg?sz=128", "display_name": "Yashika Khurana", "link": "https://stackoverflow.com/users/12188637/yashika-khurana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 58305116, "answer_count": 1, "score": -1, "last_activity_date": 1570631169, "creation_date": 1570625480, "last_edit_date": 1570625501, "question_id": 58304555, "link": "https://stackoverflow.com/questions/58304555/unique-numbers-using-bitwise-operators", "title": "Unique numbers using bitwise operators", "body": "<p>In an array that has n numbers, all numbers are present twice except for two numbers. find them using bitwise operators.\ni have tried it by taking a xor of the nos. in the array. then finding out the right most set bit in the xor.\nthen for all the nos. which have the same position of set bit in the array i have taken a xor of them together,\nmy code:-</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\ncout&lt;&lt;\"enter the size of array.\"&lt;&lt;endl;\nint n;\ncin&gt;&gt;n;\nint arr[n];\ncout&lt;&lt;\"enter the array elements.\"&lt;&lt;endl;\nfor(int i=0;i&lt;n;i++)\n{\n    cin&gt;&gt;arr[i];\n}\nint myxor=0;\nfor(int i=0;i&lt;n;i++)\n{\n    myxor^=arr[i];\n}\nint set=0;\nint k=0;\nwhile(myxor)\n{ k++;\n    set=myxor&amp;1;\n    if(set)\n    {\n        break;\n    }\n    //k++;\n    myxor&gt;&gt;=1;\n\n}\nint t,p;\nint xor2=0; int c=0;\nint xor1=0;\nfor(int j=0;j&lt;n;j++)\n{\n    p=arr[j];\n while(p)\n { c++;\n     t=p&amp;1;\n     if(t)\n     {\n         break;\n     }\n\n     //c++;\n     p&gt;&gt;=1;\n }\n    if(c==k)\n    {\n        xor1^=arr[j];\n    }\n    else{\n        xor2^=arr[j];\n    }\n\n}\n\ncout&lt;&lt;xor1&lt;&lt;endl;\ncout&lt;&lt;xor2&lt;&lt;endl;\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "api", "subdirectory", "mkdir"], "comments": [{"owner": {"reputation": 877, "user_id": 4241078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1298bd3c96afd9316d50eea60587efd?s=128&d=identicon&r=PG&f=1", "display_name": "bloody", "link": "https://stackoverflow.com/users/4241078/bloody"}, "edited": false, "score": 1, "creation_date": 1570625585, "post_id": 58304464, "comment_id": 102971313, "body": "Consider using std::filesystem::create_directory() (since C++17)"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1570625928, "post_id": 58304464, "comment_id": 102971528, "body": "Your backslashes suggest that you are trying to create \u201cC:\\Usersmndir\u201d (assuming that your compiler ignores backslashes that don\u2019t form known escape sequences)."}, {"owner": {"reputation": 486, "user_id": 5925476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97ca6ce6e4c775b9a79b629d6f4b7848?s=128&d=identicon&r=PG&f=1", "display_name": "mnabil", "link": "https://stackoverflow.com/users/5925476/mnabil"}, "edited": false, "score": 0, "creation_date": 1570626458, "post_id": 58304464, "comment_id": 102971831, "body": "Thanks Davis; I forgot this backslash while writing the question. I updated it."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 3, "creation_date": 1570626753, "post_id": 58304464, "comment_id": 102972017, "body": "Creating new subdirectories there requires administrator privileges. That&#39;s the directory where user profiles are created, and only administrators can do that."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1570627168, "post_id": 58304464, "comment_id": 102972282, "body": "C:\\Users is protected by UAC. You need elevation to do this."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 1, "creation_date": 1570631480, "post_id": 58304464, "comment_id": 102974838, "body": "The way this question is worded puzzles me greatly.  So, if there was some function that can create a folder under <code>C:\\Users</code>, without requiring admin privileges, but it was not the <code>CreateDirectory()</code> function, then would you not consider that as a solution to your problem?  Furthermore, why do you want to create a directory under <code>C:\\Users</code>?  Could it be that what you <i>actually</i> want to do is create...  <b><i>a user</i></b>?"}, {"owner": {"reputation": 486, "user_id": 5925476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97ca6ce6e4c775b9a79b629d6f4b7848?s=128&d=identicon&r=PG&f=1", "display_name": "mnabil", "link": "https://stackoverflow.com/users/5925476/mnabil"}, "edited": false, "score": 0, "creation_date": 1570637149, "post_id": 58304464, "comment_id": 102977947, "body": "For the first point: yes, I would consider it a solution as I&#39;m searching for a function that can create a directory under &quot;C:/Users&quot; without requiring admin privilege. For the second point: I do want to create a directory under &quot;C:/Users&quot; as the application that I&#39;m working on porting it does so! Thus, it is a legacy tool and we need to keep the backward compatibility."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 4, "creation_date": 1570638571, "post_id": 58304464, "comment_id": 102978619, "body": "You can have the program&#39;s installer (which is running as administrator) pre-create the necessary directories and set the security on them appropriately. Note however that creating directories inside C:\\Users is highly irregular and may cause problems with future profile creation. Better would be to fix the tool so it uses some other directory."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1570651159, "post_id": 58304464, "comment_id": 102984148, "body": "If it&#39;s a Unix application that creates a directory in &quot;/home&quot;, surely you can abstract this to use some other directory that&#39;s a better fit to Windows, such as &quot;C:\\ProgramData\\&lt;organization&gt;\\mndir&quot;. Your installer can create this directory and set appropriate security for users to access it. Actually, it can be created lazily on first use as well, since the creator has full control to set security on the directory."}], "owner": {"reputation": 486, "user_id": 5925476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97ca6ce6e4c775b9a79b629d6f4b7848?s=128&d=identicon&r=PG&f=1", "display_name": "mnabil", "link": "https://stackoverflow.com/users/5925476/mnabil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570626403, "creation_date": 1570625195, "last_edit_date": 1570626403, "question_id": 58304464, "link": "https://stackoverflow.com/questions/58304464/createdirectory-windows-api-usage-in-c-to-create-a-directory-under-c-users-wi", "title": "CreateDirectory windows API usage in c++ to create a directory under C:/users without running the application as an admin", "body": "<p>I want my program to create a directory under \"C:\\users\\\" using \"CreateDirectory()\" function:</p>\n\n<pre><code>#include&lt;windows.h&gt;\n\nint main(){\n   CreateDirectory (\"C:\\\\Users\\\\mndir\", NULL);\n   return 0;\n}\n</code></pre>\n\n<p>The problem is that it fails to create a directory under \"C:/users\" if we did not run the application as admin.</p>\n\n<p>Is there a solution for this problem without running the application as an admin?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "boost", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1570624909, "post_id": 58304311, "comment_id": 102970912, "body": "Message <code>Could not find the following Boost libraries:</code> contains <i>logical</i> name of the library. For find, which <b>filename</b> is searching, pass <code>-DBoost_DEBUG=ON</code> option to <code>cmake</code>."}, {"owner": {"reputation": 2187, "user_id": 2920614, "user_type": "registered", "accept_rate": 48, "profile_image": "https://lh4.googleusercontent.com/-esVq312MLXE/AAAAAAAAAAI/AAAAAAAA2Tk/jQtcCx2Owb0/photo.jpg?sz=128", "display_name": "amigo421", "link": "https://stackoverflow.com/users/2920614/amigo421"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1570626079, "post_id": 58304311, "comment_id": 102971614, "body": "thank you very much for the flag, it shows me detailed info and I could find required flags and solve my problem. Boost_LIB_PREFIX and Boost_NAMESPACE are helpful for my issue"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1570627219, "post_id": 58304311, "comment_id": 102972318, "body": "@amigo421 If your issue was solved, please consider writing an answer post so others know how you solved it. And mark it as accepted."}], "answers": [{"tags": [], "owner": {"reputation": 2187, "user_id": 2920614, "user_type": "registered", "accept_rate": 48, "profile_image": "https://lh4.googleusercontent.com/-esVq312MLXE/AAAAAAAAAAI/AAAAAAAA2Tk/jQtcCx2Owb0/photo.jpg?sz=128", "display_name": "amigo421", "link": "https://stackoverflow.com/users/2920614/amigo421"}, "is_accepted": false, "score": 1, "last_activity_date": 1570633743, "last_edit_date": 1570633743, "creation_date": 1570629379, "answer_id": 58305841, "question_id": 58304311, "link": "https://stackoverflow.com/questions/58304311/custom-boost-prefix-namspace-how-to-build-with/58305841#58305841", "title": "custom boost prefix/namspace - how to build with", "body": "<p>This addition to the CMake script fixes the problem:</p>\n\n<pre><code>...\nset(Boost_NO_SYSTEM_PATHS OFF)\n\nset(Boost_LIB_PREFIX my_boost_161)\nset(Boost_NAMESPACE my_boost_161)\n\nset(Boost_USE_STATIC_LIBS OFF)\n...\n</code></pre>\n"}], "owner": {"reputation": 2187, "user_id": 2920614, "user_type": "registered", "accept_rate": 48, "profile_image": "https://lh4.googleusercontent.com/-esVq312MLXE/AAAAAAAAAAI/AAAAAAAA2Tk/jQtcCx2Owb0/photo.jpg?sz=128", "display_name": "amigo421", "link": "https://stackoverflow.com/users/2920614/amigo421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570633743, "creation_date": 1570624695, "last_edit_date": 1570627303, "question_id": 58304311, "link": "https://stackoverflow.com/questions/58304311/custom-boost-prefix-namspace-how-to-build-with", "title": "custom boost prefix/namspace - how to build with", "body": "<p>I need to use custom build of boost lib, which uses own library naming prefix as well as namespace in the code.</p>\n\n<p>I need to link with it in <code>CMakeLists.txt</code>: </p>\n\n<pre><code>set(BOOST_INCLUDEDIR /path/to/custom/boost/include)\nset(BOOST_LIBRARYDIR /path/to/custom/boost/lib)\nset(BOOST_NAMESPACE my_boost_161)\nset(Boost_NO_SYSTEM_PATHS OFF)\n\nset (Boost_USE_STATIC_LIBS OFF)\nfind_package (Boost REQUIRED COMPONENTS my_unit_test_framework)\ninclude_directories (${Boost_INCLUDE_DIRS})\n</code></pre>\n\n<p>the libraries have a names like :</p>\n\n<blockquote>\n  <p>libmy_boost_161_unit_test_framework.so</p>\n</blockquote>\n\n<p>and really exist in lib folder</p>\n\n<p>there is a errors like:</p>\n\n<blockquote>\n  <p>CMake Error at\n  /home/user1/.localcmake/share/cmake-3.14/Modules/FindBoost.cmake:2132\n  (message):   Unable to find the requested Boost libraries.</p>\n  \n  <p>Boost version: 1.61.0</p>\n  \n  <p>Boost include path:<br>\n  /path/to/custom/boost/include</p>\n  \n  <p>Could not find the following Boost libraries:</p>\n\n<pre><code>      boost_unit_test_framework\n</code></pre>\n  \n  <p>No Boost libraries were found.  You may need to set BOOST_LIBRARYDIR\n  to the   directory containing Boost libraries or BOOST_ROOT to the\n  location of</p>\n</blockquote>\n\n<p>How can I specify to look for libs with names like (<code>my_</code> addition to standard names):\nsimilar to <code>Boost_LIB_VERSION</code>      which gives an ability to add the version to lib name</p>\n\n<blockquote>\n  <p>my_boost_161_unit_test_framework</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 6, "creation_date": 1570624786, "post_id": 58304297, "comment_id": 102970835, "body": "do you ever assign anything to <code>input</code> ?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1570624835, "post_id": 58304297, "comment_id": 102970862, "body": "Always pay attention to your compiler&#39;s warnings. There should be something among the lines of &quot;uninitialized local variable &#39;input&#39; used&quot;."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570624861, "post_id": 58304297, "comment_id": 102970879, "body": "You ask for what operation they want to use, but you never use <code>cin</code> to get that response.  You need to use <code>cin</code> to put a value into <code>input</code>."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1570624897, "post_id": 58304297, "comment_id": 102970904, "body": "1) &quot;<i>whenever I build my program it shows no error. But it does not do what I had intended it to do</i>&quot; If the code compiles - it means that it is syntactically correct, not that it will run without issues. Compiler, can&#39;t (yet) read your mind, so it compiles the code you wrote, not the code, that you intended to write. 2) Did you try stepping through your code with a debugger?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570625970, "post_id": 58304297, "comment_id": 102971550, "body": "Don&#39;t put <code>[ANSWERED]</code> - in the title: it&#39;s useless fluff. Once you accept an answer, it&#39;s quote obvious, that the question is answered, without opening it. Nor edit your question with the answer. If the answer was posted in the comments: write the answer, and accept it, yourself"}, {"owner": {"reputation": 23, "user_id": 12188521, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAeKjvb3fO48hiIFeoCQzrMAN3ujsDpURSqVVosbw=k-s128", "display_name": "MeltingPaint_", "link": "https://stackoverflow.com/users/12188521/meltingpaint"}, "edited": false, "score": 0, "creation_date": 1570626048, "post_id": 58304297, "comment_id": 102971594, "body": "Oh alright, thanks for the info"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1570626133, "post_id": 58304297, "comment_id": 102971646, "body": "@MeltingPaint_ &quot;<i>Oh alright, thanks for the info</i>&quot; Such information shouldn&#39;t have come from me, though. It should have been present in the <a href=\"https://stackoverflow.com/tour\">tour</a>, and/or in the <a href=\"https://stackoverflow.com/help\">help center</a>, that you should&#39;ve read, before asking the question.."}], "answers": [{"tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 1, "last_activity_date": 1570625014, "creation_date": 1570625014, "answer_id": 58304403, "question_id": 58304297, "link": "https://stackoverflow.com/questions/58304297/what-seems-to-be-wrong-in-my-c-calculator/58304403#58304403", "title": "What seems to be wrong in my C++ calculator?", "body": "<p>As the comments suggest, you need to get a value for your <code>input</code> variable at some point. I would suggest immediately before the <code>switch</code> that depends on it:</p>\n\n<pre><code>    cin &gt;&gt; input; // You forgot to put this line in, I think!\n    switch(input)\n    {\n        ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1570625343, "post_id": 58304465, "comment_id": 102971168, "body": "It&#39;s a shame there&#39;s no GCC warning that says: <b><i>will be used</i></b> uninitialized!"}], "tags": [], "owner": {"reputation": 1417, "user_id": 716682, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/13cdb854a6ee1add60c3c754e3e056a3?s=128&d=identicon&r=PG", "display_name": "Pibben", "link": "https://stackoverflow.com/users/716682/pibben"}, "is_accepted": false, "score": 1, "last_activity_date": 1570625197, "creation_date": 1570625197, "answer_id": 58304465, "question_id": 58304297, "link": "https://stackoverflow.com/questions/58304297/what-seems-to-be-wrong-in-my-c-calculator/58304465#58304465", "title": "What seems to be wrong in my C++ calculator?", "body": "<p>If you increase the warning level on your compiler, for example using <code>-Wall</code> for GCC, you get a useful warning explaining your problem:</p>\n\n<pre><code>&lt;source&gt;: In function 'int main()':\n\n&lt;source&gt;:8:19: warning: 'input' may be used uninitialized in this function [-Wmaybe-uninitialized]\n\n    8 | char choice = 'Y',input;\n\n      |                   ^~~~~\n\nCompiler returned: 0\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12188521, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAeKjvb3fO48hiIFeoCQzrMAN3ujsDpURSqVVosbw=k-s128", "display_name": "MeltingPaint_", "link": "https://stackoverflow.com/users/12188521/meltingpaint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "closed_date": 1570630355, "accepted_answer_id": 58304403, "answer_count": 2, "score": 2, "last_activity_date": 1570626258, "creation_date": 1570624651, "last_edit_date": 1570626258, "question_id": 58304297, "link": "https://stackoverflow.com/questions/58304297/what-seems-to-be-wrong-in-my-c-calculator", "closed_reason": "Not suitable for this site", "title": "What seems to be wrong in my C++ calculator?", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\nint num1,num2,answer;\nchar choice = 'Y',input;\n\nwhile (choice == 'Y' || choice == 'y')\n{\n    cout &lt;&lt; \"Enter the first number: \" &lt;&lt; endl;\n    cin &gt;&gt; num1;\n    cout &lt;&lt; \"Enter the second number: \" &lt;&lt; endl;\n    cin &gt;&gt; num2;\n\n    cout &lt;&lt; \"What operation would you like to use?\" &lt;&lt; endl &lt;&lt; endl;\n    cout &lt;&lt; \"Press [A] if you want to use Addition.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Press [S] if you want to use Subtraction.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Press [M] if you want to use Multiplication.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Press [D] if you want to use Division.\" &lt;&lt; endl;\n\n    switch(input)\n    {\n        case 'A':\n        case 'a':\n            {\n                answer=num1+num2;\n                cout &lt;&lt; \"This is the sum of your equation: \" &lt;&lt; answer &lt;&lt; endl;\n                break;\n            }\n        case 'S':\n        case 's':\n            {\n                answer=num1-num2;\n                cout &lt;&lt; \"This is the difference of your equation: \" &lt;&lt; answer &lt;&lt; endl;\n                break;\n            }\n        case 'M':\n        case 'm':\n            {\n                answer=num1*num2;\n                cout &lt;&lt; \"This is the product of your equation: \" &lt;&lt; answer &lt;&lt; endl;\n                break;\n            }\n        case 'D':\n        case 'd':\n            {\n                answer=num1/num2;\n                cout &lt;&lt; \"This is the quotient of your equation: \" &lt;&lt; answer &lt;&lt; endl;\n                break;\n            }\n        default:\n            {\n                cout &lt;&lt; \"Invalid Operation...\" &lt;&lt; endl;\n                break;\n            }\n    }\n    cout &lt;&lt; \"Do you want to go again? (Y/N) \" &lt;&lt; endl;\n    cin &gt;&gt; choice;\n}\n\ncout &lt;&lt; \"See you later.\" &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n\n<p>So I just started college about a month and a half ago, and I thought that I'd try out the codes that still hasn't been taught to us. But I ran into a problem, whenever I build my program it shows no error. But it does not do what I had intended it to do, to be a calculator. It immediately jumps to, \"Do you want to go again?\" After inputting the 2 numbers and it won't let the user even choose an operation let alone calculate it. What seems to be wrong with my code?</p>\n\n<p>[EDIT]\nI forgot to put cin >> input; right after asking for which operation to use.</p>\n"}, {"tags": ["c++", "class", "dictionary", "constructor", "initialization"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1570624760, "post_id": 58304273, "comment_id": 102970824, "body": "<code>lookup</code> is not a member function of <code>Info</code>, so it doesn&#39;t know about anything named <code>_info</code>. If you want to create an object of type <code>Info</code>, you should use that name: <code>{&quot;aclk&quot;, Info(1)}</code>."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1570624772, "post_id": 58304273, "comment_id": 102970828, "body": "Why not just <code>{ &quot;aclk&quot;, Info(1) }</code> or simply <code>{ &quot;aclk&quot;, 1 }</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1570625065, "last_edit_date": 1570625065, "creation_date": 1570624742, "answer_id": 58304320, "question_id": 58304273, "link": "https://stackoverflow.com/questions/58304273/how-to-insert-object-into-stdmap-while-declaration/58304320#58304320", "title": "How to insert object into std::map while declaration", "body": "<p>You have to supply an object of the type <code>Info</code> instead of its data member <code>_info</code>. For example</p>\n\n<pre><code> std::map&lt;std::string, Info &gt; lookup  {\n  {\n    \"aclk\",\n    1\n  }\n};\n</code></pre>\n\n<p>This is valid because the class <code>Info</code> has a conversion constructor.</p>\n\n<p>Or (if for example the constructor is explicit)</p>\n\n<pre><code> std::map&lt;std::string, Info &gt; lookup  {\n  {\n    \"aclk\",\n    Info(1)\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58304320, "answer_count": 1, "score": 3, "last_activity_date": 1570625065, "creation_date": 1570624588, "last_edit_date": 1570624906, "question_id": 58304273, "link": "https://stackoverflow.com/questions/58304273/how-to-insert-object-into-stdmap-while-declaration", "title": "How to insert object into std::map while declaration", "body": "<p><strong>Question:</strong></p>\n\n<p>I'm trying to insert instance of a class into <em>std::map</em> at compile time but getting the below error always.</p>\n\n<pre><code>main.cpp:18:12: error: \u2018_info\u2019 was not declared in this scope\n     _info(1)\n        ^\n</code></pre>\n\n<p>line number 18 points to below block of the code</p>\n\n<pre><code>15. std::map&lt;std::string, Info &gt; lookup  {\n16.      {\n17.        \"aclk\",\n18.        _info(1)\n19.      }\n20.    };\n</code></pre>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;map&gt;\n\nclass Info{\n    int _info;\npublic:\n   Info(int info){\n     _info = info;\n   }   \n}; \n\n\n std::map&lt;std::string, Info &gt; lookup  {\n  {\n    \"aclk\",\n    _info(1)\n  }\n};\n\nint main()\n{\n   //dummy\n}\n</code></pre>\n\n<p><strong>Observation:</strong></p>\n\n<p>When I dynamically create the object I don't see any such errors.</p>\n\n<pre><code>const std::map&lt;std::string, Info &gt; lookup  {\n  {\n    \"aclk\",\n    new Info(1)\n  }\n};\n</code></pre>\n\n<p>But map being <code>const</code> and instance being inserted with <code>new</code> doesn't make any sense.</p>\n"}, {"tags": ["c++", "c", "libmongoc"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1570625145, "post_id": 58304175, "comment_id": 102971070, "body": "If you have the source, (.c and .h files) then include them in the make file just like any other source files.  <i><a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Spec-Files.html\" rel=\"nofollow noreferrer\">Read this.</a></i>, and <i><a href=\"http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/\" rel=\"nofollow noreferrer\">this</a></i>."}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "edited": false, "score": 0, "creation_date": 1577559046, "post_id": 58304175, "comment_id": 105199530, "body": "(1) install it locally using usual cmake installation procedure; (2) configure CMAKE_MODULE_PATH to include newly installed location; (3) use <code>find_package(libmongoc-1.0 1.15 REQUIRED)</code>;"}], "owner": {"reputation": 21, "user_id": 4003636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kmSg3.jpg?s=128&g=1", "display_name": "mohammad-nazari", "link": "https://stackoverflow.com/users/4003636/mohammad-nazari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570624213, "creation_date": 1570624213, "question_id": 58304175, "link": "https://stackoverflow.com/questions/58304175/how-can-i-add-and-compile-mongoc-source-code-in-projects-and-using-locally-cmak", "title": "How can I add and compile mongoc source code in projects and using locally (CMakeList config)", "body": "<p>I want to add mongoc source code to My project then compile, build and use it locally without installing libmongoc on the system(Ubuntu). I want My project source code to be portable without having to install any library dependencies like mongoc in the target development system and be a cross platform project.</p>\n\n<p>How to configure the CMakeList file (or any other)?</p>\n\n<p>Thanks for your help in advance!</p>\n"}, {"tags": ["c++", "qt", "compilation", "continuous-integration", "gitlab"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1570624935, "post_id": 58304146, "comment_id": 102970925, "body": "If you use <code>qmake</code> you probably have a .pro file? If so, you might use two .pro file, one per configuration, and build two versions of your application."}], "answers": [{"tags": [], "owner": {"reputation": 575, "user_id": 8602926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2IQZ.png?s=128&g=1", "display_name": "Sv443", "link": "https://stackoverflow.com/users/8602926/sv443"}, "is_accepted": false, "score": 0, "last_activity_date": 1570627632, "creation_date": 1570627632, "answer_id": 58305265, "question_id": 58304146, "link": "https://stackoverflow.com/questions/58304146/how-to-change-something-in-the-code-according-to-settings-in-the-gitlab-ci-build/58305265#58305265", "title": "How to change something in the code according to settings in the GitLab CI build script", "body": "<p>I've just found out how to do it.  </p>\n\n<p>Before, I was trying to add the <code>-D</code> argument to the <code>nmake</code> call when instead, I needed to add a <code>DEFINES+=MY_VAR='foo bar'</code> to the <code>qmake</code> call.<br>\nAfter doing this and deleting the <code>build-</code> folder to get rid of the outdated <code>Makefile.Debug</code> and <code>Makefile.Release</code> files I got it to work correctly.</p>\n"}], "owner": {"reputation": 575, "user_id": 8602926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2IQZ.png?s=128&g=1", "display_name": "Sv443", "link": "https://stackoverflow.com/users/8602926/sv443"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570627632, "creation_date": 1570624095, "question_id": 58304146, "link": "https://stackoverflow.com/questions/58304146/how-to-change-something-in-the-code-according-to-settings-in-the-gitlab-ci-build", "title": "How to change something in the code according to settings in the GitLab CI build script", "body": "<p>My code is written in C++<br>\nGitLab CI Compiler: MSVC2017_x64</p>\n\n<p>My project is being compiled with a GitLab pipeline on a Windows server. I want to be able to compile parts of this project two times and somehow change something in the code, before it is compiled so that I will have two versions of the same application but with different predefined settings.<br>\nSomething simple like the compiler setting a <code>#define</code> in a header or cpp file would be great.<br>\nUsing this same technique, I'd also like to hard wire the build number (pipeline ID) into the application.  </p>\n\n<p>I've already tried the <code>/D</code> or <code>-D</code> parameter but it doesn't set a <code>#define</code>.  </p>\n\n<p>The solution needs to work no matter what the user's setup is so something like environment variables won't work.  </p>\n\n<p>This is my <code>.gitlab-ci.yml</code> file (the application is ultimately built with the <code>qmake</code> and <code>nmake</code> calls):</p>\n\n<pre><code>stages:\n  - build\n  - test\nvariables:\n  GIT_SUBMODULE_STRATEGY: recursive\nbuild:\n  stage: build\n  only:\n    - master\n  tags:\n    - windows\n    - qt\n  script:\n    - call \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Auxiliary\\Build\\vcvars64.bat\"\n    - call \"C:\\Qt\\5.9.1\\msvc2017_64\\bin\\qtenv2.bat\"\n    - set CL=/MP16\n    - set PATH=\"C:\\Program Files (x86)\\Inno Setup 5\";%PATH%\n    - cd %CI_PROJECT_DIR%\\(...)\\Application\n    - qmake CONFIG+=release\n    - nmake\n    - cd %CI_PROJECT_DIR%\\(...)\\3rdParty\\Windows\n    - copy (...)\\Application.exe .\n    - copy (...)\\Application.ico .\n    - windeployqt .\n    - iscc InnoScript.iss\n\n  artifacts:\n    name: \"%CI_COMMIT_REF_NAME%\"\n    expire_in: 1 month\n    paths:\n    - (...)\\3rdParty\\Windows\\Application.exe\n</code></pre>\n\n<p>And this is how I would want it to be (with the <code>-D mode=xy</code>'s):</p>\n\n<pre><code>stages:\n  - build\n  - test\nvariables:\n  GIT_SUBMODULE_STRATEGY: recursive\nbuild:\n  stage: build\n  only:\n    - master\n  tags:\n    - windows\n    - qt\n  script:\n    - call \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Auxiliary\\Build\\vcvars64.bat\"\n    - call \"C:\\Qt\\5.9.1\\msvc2017_64\\bin\\qtenv2.bat\"\n    - set CL=/MP16\n    - set PATH=\"C:\\Program Files (x86)\\Inno Setup 5\";%PATH%\n    - cd %CI_PROJECT_DIR%\\(...)\\Application\n    - qmake CONFIG+=release\n    - nmake -D mode=prod\n    - qmake CONFIG+=release\n    - nmake -D mode=stage\n    - cd %CI_PROJECT_DIR%\\(...)\\3rdParty\\Windows\n    - copy (...)\\Application.exe .\n    - copy (...)\\Application.ico .\n    - windeployqt .\n    - iscc InnoScript.iss\n\n  artifacts:\n    name: \"%CI_COMMIT_REF_NAME%\"\n    expire_in: 1 month\n    paths:\n    - (...)\\3rdParty\\Windows\\Application.exe\n</code></pre>\n\n<blockquote>\n  <p>How do I modify my code by only using the GitLab CI or is there another, better way?</p>\n</blockquote>\n"}, {"tags": ["c++", "string", "c++17"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1570623918, "post_id": 58304063, "comment_id": 102970370, "body": "This is a job for a static analyzer.  <code>std::string</code> has a <code>cont char*</code> converting constructor so you can&#39;t stop it from accepting a null pointer."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1570623964, "post_id": 58304063, "comment_id": 102970393, "body": "@NathanOliver exactly (Im painfully aware of that) - do you think cpp core check can help here ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1570624157, "post_id": 58304063, "comment_id": 102970490, "body": "I would hope so.  They should be able to detect the null pointer dereference."}, {"owner": {"reputation": 372, "user_id": 3676427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7566659380c32f296138992e79f69eee?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Pascual", "link": "https://stackoverflow.com/users/3676427/isaac-pascual"}, "edited": false, "score": 0, "creation_date": 1570633203, "post_id": 58304063, "comment_id": 102975855, "body": "Accept nullptr or not is a pre-condition question."}], "answers": [{"comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1570624100, "post_id": 58304140, "comment_id": 102970462, "body": "I will try that"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1570626007, "post_id": 58304140, "comment_id": 102971570, "body": "Last time I&#39;ve checked cppcheck it suffered from lack of proper C++11 support and complained about syntax errors everywhere. Did they fix this and even implement support for C++17 in recent releases?"}, {"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1570626443, "post_id": 58304140, "comment_id": 102971821, "body": "@VTT I think they try to be roughly up to date (no idea w.r.t C++17, but the C++11 basics should be fine), but I guess manually specifying which tests to run might be the way to go."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1570627803, "post_id": 58304140, "comment_id": 102972696, "body": "It seems VS2017 cpp core check is not able to detect this one"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1570693368, "post_id": 58304140, "comment_id": 102995334, "body": "@lubgr I tried to give cppcheck a spin - what options are you using exactly ? at first it doesn&#39;t find this error - checking includes it tells me it cannot find &lt;string&gt; header but tells me this isn&#39;t an issue..."}, {"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "edited": false, "score": 0, "creation_date": 1570693756, "post_id": 58304140, "comment_id": 102995529, "body": "I ran it without any options, with a standard homebrew installation. Maybe you need to tell it where to look for standard headers? I guess the warning can only show up if <code>&lt;string&gt;</code> is found."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1570794436, "post_id": 58304140, "comment_id": 103036441, "body": "I ended up modifying the basic_string template ala. `    basic_string(int) = delete;     basic_string(::std::nullptr_t) = delete;` - this ofc. won&#39;t catch all cases but does indeed seem to catch  the direct cases at least"}], "tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": true, "score": 4, "last_activity_date": 1570624074, "creation_date": 1570624074, "answer_id": 58304140, "question_id": 58304063, "link": "https://stackoverflow.com/questions/58304063/constructing-string-from-null/58304140#58304140", "title": "constructing string from NULL?", "body": "<p>Running <a href=\"http://cppcheck.sourceforge.net/\" rel=\"nofollow noreferrer\"><code>cppcheck</code></a> (version 1.89) on the example file yields:</p>\n\n<blockquote>\n<pre><code>Checking test.cpp ...\ntest.cpp:9:10: error: Null pointer dereference [nullPointer]\ntest(NULL);\n     ^\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1570626164, "post_id": 58304645, "comment_id": 102971664, "body": "If we just could add this to std::string itself- then it would be great !"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570646597, "post_id": 58304645, "comment_id": 102982262, "body": "You need an overload for <code>void test(const char*)</code> as well (and have it call <code>test(&quot;&quot;)</code> if null), otherwise the caller can do something like <code>const char *s = nullptr; test(s);</code> and still crash at runtime."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570689342, "post_id": 58304645, "comment_id": 102993594, "body": "@RemyLebeau thats a good point - I am less worried about that situation at the time being though"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1570794251, "post_id": 58304645, "comment_id": 103036327, "body": "I ended up modifying the basic_string template ala. `    basic_string(int) = delete;     basic_string(::std::nullptr_t) = delete;` - this ofc. won&#39;t catch all cases but does indeed seem to catch  the direct cases at least"}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 3, "last_activity_date": 1570625739, "creation_date": 1570625739, "answer_id": 58304645, "question_id": 58304063, "link": "https://stackoverflow.com/questions/58304063/constructing-string-from-null/58304645#58304645", "title": "constructing string from NULL?", "body": "<p>You can add a couple of prohibited overloads capturing use of <code>0</code>, <code>NULL</code> or <code>nullptr</code> arguments:</p>\n\n<pre><code>void test(int bad_argument) = delete;\nvoid test(::std::nullptr_t bad_argument) = delete;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1570646760, "post_id": 58304662, "comment_id": 102982329, "body": "Even without compile-time checking for null, you should still use a trampoline, it can do something like this to ensure no exception is thrown on a null pointer: <code>void test(const char* ptr) { if (!ptr) ptr = &quot;&quot;; test(std::string(ptr)); }</code> or <code>void test(const char* ptr) { test(std::string(ptr ? ptr : &quot;&quot;)); }</code>"}], "tags": [], "owner": {"reputation": 1417, "user_id": 716682, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/13cdb854a6ee1add60c3c754e3e056a3?s=128&d=identicon&r=PG", "display_name": "Pibben", "link": "https://stackoverflow.com/users/716682/pibben"}, "is_accepted": false, "score": 2, "last_activity_date": 1570625775, "creation_date": 1570625775, "answer_id": 58304662, "question_id": 58304063, "link": "https://stackoverflow.com/questions/58304063/constructing-string-from-null/58304662#58304662", "title": "constructing string from NULL?", "body": "<p>You can add a trampoline function that checks for NULL pointer at compile (and run) time, if your compiler supports it. For GCC it would look like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void test(const std::string&amp; s){\n\n}\n\nvoid test(const char* ptr  __attribute__((nonnull))) {\n    test(std::string(ptr));\n}\n\nint main()\n{\n    test(NULL);\n    return 0;\n}\n</code></pre>\n\n<p>The warning you get is:</p>\n\n<pre><code>&lt;source&gt;:13:14: warning: null passed to a callee that requires a non-null argument [-Wnonnull]\n\n    test(NULL);\n         ~~~~^\n</code></pre>\n"}], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 58304140, "answer_count": 3, "score": 7, "last_activity_date": 1570794473, "creation_date": 1570623829, "last_edit_date": 1570794473, "question_id": 58304063, "link": "https://stackoverflow.com/questions/58304063/constructing-string-from-null", "title": "constructing string from NULL?", "body": "<p>After some change of the code-base I came accross this gotcha:</p>\n\n<pre><code>#include &lt;string&gt;\n\nvoid test(const std::string&amp; s){\n}\n\nint main()\n{\n    test(NULL);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/7uJnef\" rel=\"nofollow noreferrer\">https://godbolt.org/z/7uJnef</a></p>\n\n<p>This throws an exception. Changing to 'nullptr' helps nothing (still no error or warning).</p>\n\n<p>I guess my question is, is there a way to detect or find this error at pre-runtime throughout the sourcecode ? perhaps some compiler warning, etc. (using MSVC VS-2017)</p>\n\n<p><strong>I ended up modifying the basic_string template ala. <code>basic_string(int) = delete;\n    basic_string(::std::nullptr_t) = delete;</code> - this won't catch all cases but does indeed seem to catch  the direct cases at least</strong></p>\n"}, {"tags": ["c++", "c++17", "visual-studio-2019", "gcc8"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1570624060, "post_id": 58304058, "comment_id": 102970443, "body": "You cannot implicitly (or explicitly) convert from a base object to a derived object... Try it without <code>chrono</code> or similar, just <code>struct A : B {};</code>. (Deriving from non-polymorphic <code>std</code> facilities is also usually a design flaw.)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1570624415, "post_id": 58304058, "comment_id": 102970635, "body": "When compiling with VS, make sure you set conformance mode to Yes (/permissive-).  This makes the compiler more standard compliant (turns off a lot of non-standard extensions)"}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 2, "last_activity_date": 1570624806, "creation_date": 1570624806, "answer_id": 58304340, "question_id": 58304058, "link": "https://stackoverflow.com/questions/58304058/steady-clocknow-return-type-invalid-with-gcc/58304340#58304340", "title": "steady_clock::now() return type invalid with gcc", "body": "<p>What you are trying to do is essentially this:</p>\n\n<pre><code>struct Base\n{};\n\nBase getBase();\n\nstruct Derived : Base\n{\n    static Derived get() { return getBase(); }\n};\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/KZyP99\" rel=\"nofollow noreferrer\">https://godbolt.org/z/KZyP99</a></p>\n\n<p>That doesn't work because the compiler has no idea how to convert a <code>Base</code> to a <code>Derived</code>. You could add a constructor for <code>Derived</code> from <code>Base</code> to fix this.</p>\n\n<p>I would question the general design though. Inheriting from <code>std</code> facilities is generally a design flaw/weakness. Prefer composition over inheritance (<em>especially</em> if the thing you intend to derive from is not polymorphic). Have <code>SteadyTime</code> expose a <code>time_point</code> member if you need to, or wrap its interface manually. Having and using multiple concrete (i.e. non-abstract) classes in the same inheritance hierarchy quickly leads to chaos like object slicing and other UB, as well as general confusion for users.</p>\n"}], "owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 58304340, "answer_count": 1, "score": 1, "last_activity_date": 1570624806, "creation_date": 1570623810, "question_id": 58304058, "link": "https://stackoverflow.com/questions/58304058/steady-clocknow-return-type-invalid-with-gcc", "title": "steady_clock::now() return type invalid with gcc", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;chrono&gt;\n\nstruct SteadyTime : std::chrono::steady_clock::time_point {\n    using time_point::time_point;\n\n    static SteadyTime now() {\n      return clock::now();\n    }\n};\n</code></pre>\n\n<p>This works well with Visual Studio 2019 but with gcc 8.3 I get the following error:</p>\n\n<pre><code>&lt;source&gt;: In static member function 'static SteadyTime SteadyTime::now()':\n\n&lt;source&gt;:7:24: error: could not convert 'std::chrono::_V2::steady_clock::now()' from 'std::chrono::_V2::steady_clock::time_point' {aka 'std::chrono::time_point&lt;std::chrono::_V2::steady_clock, std::chrono::duration&lt;long int, std::ratio&lt;1, 1000000000&gt; &gt; &gt;'} to 'SteadyTime'\n\n       return clock::now();\n\n              ~~~~~~~~~~^~\n\nCompiler returned: 1\n</code></pre>\n\n<p>This code seems to be standard so what could be wrong?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1570624121, "post_id": 58304041, "comment_id": 102970471, "body": "You probably need this: <a href=\"https://isocpp.org/wiki/faq/serialization\" rel=\"nofollow noreferrer\">https://isocpp.org/wiki/faq/serialization</a>"}, {"owner": {"reputation": 1, "user_id": 12150411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b4c3f3adb2e74620a58b836828032d?s=128&d=identicon&r=PG&f=1", "display_name": "young-", "link": "https://stackoverflow.com/users/12150411/young"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1570626549, "post_id": 58304041, "comment_id": 102971889, "body": "i just edited the question with s @drescherjm."}, {"owner": {"reputation": 1, "user_id": 12150411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b4c3f3adb2e74620a58b836828032d?s=128&d=identicon&r=PG&f=1", "display_name": "young-", "link": "https://stackoverflow.com/users/12150411/young"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1570626654, "post_id": 58304041, "comment_id": 102971961, "body": "name is a char not a string"}, {"owner": {"reputation": 1, "user_id": 12150411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b4c3f3adb2e74620a58b836828032d?s=128&d=identicon&r=PG&f=1", "display_name": "young-", "link": "https://stackoverflow.com/users/12150411/young"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1570626698, "post_id": 58304041, "comment_id": 102971983, "body": "i dont get you. how am i writing a record using a bug"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1570626853, "post_id": 58304041, "comment_id": 102972073, "body": "I think the code you presented is not enough context to understand the problem. I don&#39;t understand why you are displaying the records before you read from the file but I am unsure how <code>stud</code> got initialized in the first place. Also the display  code probably should be in its own function. Not part of the reading process."}, {"owner": {"reputation": 877, "user_id": 4241078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1298bd3c96afd9316d50eea60587efd?s=128&d=identicon&r=PG&f=1", "display_name": "bloody", "link": "https://stackoverflow.com/users/4241078/bloody"}, "edited": false, "score": 2, "creation_date": 1570626854, "post_id": 58304041, "comment_id": 102972074, "body": "<code>for(int i = 0; i &lt; 1; i++)</code> - this loop is useless, processed once anyway."}, {"owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1570627141, "post_id": 58304041, "comment_id": 102972274, "body": "Please include the contents of the <code>.txt</code> file and the way you read it."}, {"owner": {"reputation": 1, "user_id": 12150411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b4c3f3adb2e74620a58b836828032d?s=128&d=identicon&r=PG&f=1", "display_name": "young-", "link": "https://stackoverflow.com/users/12150411/young"}, "edited": false, "score": 0, "creation_date": 1570627679, "post_id": 58304041, "comment_id": 102972615, "body": "i describe the whole program function. i can not post the whole program here. before i display the records there is a part of the case statement that lets me enter student data. once i am done entering then  it displays the student data.&quot;stud&quot; is an an object for class &quot;students&quot;.@drescherjm"}, {"owner": {"reputation": 1, "user_id": 12150411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b4c3f3adb2e74620a58b836828032d?s=128&d=identicon&r=PG&f=1", "display_name": "young-", "link": "https://stackoverflow.com/users/12150411/young"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1570628352, "post_id": 58304041, "comment_id": 102973007, "body": "i just edited it @drescherjm and produced minimal reproducible example"}, {"owner": {"reputation": 1, "user_id": 12150411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b4c3f3adb2e74620a58b836828032d?s=128&d=identicon&r=PG&f=1", "display_name": "young-", "link": "https://stackoverflow.com/users/12150411/young"}, "reply_to_user": {"reputation": 877, "user_id": 4241078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1298bd3c96afd9316d50eea60587efd?s=128&d=identicon&r=PG&f=1", "display_name": "bloody", "link": "https://stackoverflow.com/users/4241078/bloody"}, "edited": false, "score": 0, "creation_date": 1570628413, "post_id": 58304041, "comment_id": 102973045, "body": "@bloody so that loop doesn&#39;t do anything i suppose."}, {"owner": {"reputation": 1, "user_id": 12150411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b4c3f3adb2e74620a58b836828032d?s=128&d=identicon&r=PG&f=1", "display_name": "young-", "link": "https://stackoverflow.com/users/12150411/young"}, "reply_to_user": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1570628429, "post_id": 58304041, "comment_id": 102973056, "body": "@Habitate i just produced it"}, {"owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1570631447, "post_id": 58304041, "comment_id": 102974820, "body": "I will have to ask you to post your code in a way in which we can copy-paste it and it will compile. As of now, it has quite a couple of syntax and logic errors."}, {"owner": {"reputation": 1, "user_id": 12150411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b4c3f3adb2e74620a58b836828032d?s=128&d=identicon&r=PG&f=1", "display_name": "young-", "link": "https://stackoverflow.com/users/12150411/young"}, "reply_to_user": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1570632565, "post_id": 58304041, "comment_id": 102975472, "body": "@Habitate i just fixed the errors and logic errors you can compile it now."}], "owner": {"reputation": 1, "user_id": 12150411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b4c3f3adb2e74620a58b836828032d?s=128&d=identicon&r=PG&f=1", "display_name": "young-", "link": "https://stackoverflow.com/users/12150411/young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570632502, "creation_date": 1570623725, "last_edit_date": 1570632502, "question_id": 58304041, "link": "https://stackoverflow.com/questions/58304041/how-to-read-from-a-text-file-in-c", "title": "how to read from a text file in c++", "body": "<p>My program is a student database which stores student details in a class called \"students\", with an object called \"stud\". I created different options through \"case statements\" to select from to edit the program such as add students details, edit, delete etc. I am attempting to read from a text file. I have searched on ways to implement how to read from text files, however the program does not read from the text file. It does not read at all. I think i am implementing the code the wrong way. The module I am having an issue with is case 7 to read from the text file. tips would be helpful.\nThe code is below:</p>\n\n<pre><code>     #include&lt;string&gt;\n#include&lt;iomanip&gt;\n#include&lt;fstream&gt;\n#include&lt;cstring&gt; \n#include&lt;cassert&gt;\n#include&lt;iostream&gt;\n#include&lt;conio.h&gt;\n\n\nusing namespace std;\n\nclass students\n    {\n        public:\n\n        char name[50];\n        char sname[45];\n\n        int idno;\n        char cours[40];\n        int age;\n        int modules;\n\n        void read_data();\n        void display();\n\n    }s;\n\n   void students::read_data()\n   {\n        cout&lt;&lt;\"Enter name :\";\n        cin&gt;&gt;name;\n        cout&lt;&lt;\"Enter Surname : \";\n        cin&gt;&gt;sname;\n        cout&lt;&lt;\"Enter course : \";\n        cin&gt;&gt;cours;\n        cout&lt;&lt;\"Enter age :\";\n        cin&gt;&gt;age;\n        cout&lt;&lt;\"Enter modules:\";\n        cin&gt;&gt;modules;\n      }\n    void students::display()\n    {\n        cout&lt;&lt;\"-----------------------------------------------\"&lt;&lt;endl;\n        cout&lt;&lt;\"Student ID no : \"&lt;&lt;idno&lt;&lt;endl;\n        cout&lt;&lt;\"Student name is :\"&lt;&lt;name&lt;&lt;endl;\n        cout&lt;&lt;\"Student Surname is : \"&lt;&lt;sname&lt;&lt;endl;\n        cout&lt;&lt;\"Student course is :\"&lt;&lt;cours&lt;&lt;endl;\n        cout&lt;&lt;\"Student age is  :\"&lt;&lt;age&lt;&lt;endl;\n        cout&lt;&lt;\"Student modules are:\"&lt;&lt;modules&lt;&lt;endl;\n        cout&lt;&lt;\"----------------------------------------------\"&lt;&lt;endl;\n    }\n\n     int main()\n     {\n\n       char dow;\n       int arr=0;\n      do{\n\n        students stud[100];\n\n        cout&lt;&lt;\"Press 1 Enter record \\n\";\n        cout&lt;&lt;\"Press 2 Display record \\n\";\n        cout&lt;&lt;\"\\n\\t Select option::\";\n\n        int idcheck=0;\n\n        int sw;\n        cin&gt;&gt;sw;\n\n        switch(sw)\n        {\n\n        case 1:\n{\n        cout&lt;&lt;\"\\n Enter the data of the student no \"&lt;&lt;arr+1&lt;&lt;\" is :\\n\";\n\n                cout&lt;&lt;\"\\t Enter the Roll No = \";\n                int id2;\n                int id;\n\n                cin&gt;&gt;id;\n\n                for(int j=0; j&lt;arr; j++)\n                {\n\n                    id2=id;\n                    if(id2==stud[j].idno)\n                    {\n                        idcheck=1;\n                     }\n                 }\n                 if(idcheck!=1){\n                    stud[arr].idno=id;\n\n                 stud[arr].read_data();\n\n                    arr=arr+1;\n                 }\n                 else\n                 {\n                    cout&lt;&lt;\"This Record is Already Entered \\n\"; \n                 }\n               }\n\n                 break;\n    case 2:  \n   {\n    ifstream sfile;\n    sfile.open(\"StudentFile.txt\", ios::in);\n\n    cout &lt;&lt; \"\\n-----------------------------------------------\" &lt;&lt; endl;\n    for(int i = 0; i &lt; 1; i++)\n    {\n    cout &lt;&lt; setw(12) &lt;&lt; \"Rollno ||\";\n    cout &lt;&lt; setw(12) &lt;&lt; \" Name   ||\";\n    cout &lt;&lt; setw(12) &lt;&lt; \" Surname    || \";\n    cout &lt;&lt; setw(12) &lt;&lt; \"Age  ||\";\n    cout &lt;&lt; setw(12) &lt;&lt; \" Course  ||\";\n    cout &lt;&lt; setw(12) &lt;&lt; \" Module   ||\";\n\n    for(int k = 0; k &lt; arr; k++)\n    {\n        if(stud[k].idno != 'd')\n    {\n            cout &lt;&lt; \"\\n\";\n            cout &lt;&lt; \" \";\n            cout &lt;&lt; setw(5) &lt;&lt; stud[k].idno;                            \n            cout &lt;&lt; setw(15) &lt;&lt; stud[k].name;                           \n            cout &lt;&lt; setw(14) &lt;&lt; stud[k].sname;                       \n            cout &lt;&lt; setw(14) &lt;&lt; stud[k].age;                         \n            cout &lt;&lt; setw(12) &lt;&lt; stud[k].cours;                       \n            cout &lt;&lt; setw(14) &lt;&lt; stud[k].modules;                        \n    }\n    }\n    }\n     cout &lt;&lt; \"\\n-------------------------------------------\"   &lt;&lt; endl;\n\n     sfile.read((char*)&amp;s, sizeof(s));\n     sfile.close();\n}\n\n                break;\n\n                default:\n                    cout&lt;&lt;\"\\t Wrong option Selected \";\n                    break;\n}\n\n    cout&lt;&lt;\"\\n\\n\\t Do You Want to Continue Again [Y/N]\";\n    cin&gt;&gt;dow;\n\n}\nwhile(dow=='y');\nreturn 0;\ngetch();\n} \n</code></pre>\n"}, {"tags": ["c++", "search", "tree", "binary"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 6, "creation_date": 1570620784, "post_id": 58303165, "comment_id": 102968644, "body": "<code>if (root == NULL){  root-&gt;cand = data;</code> you ensure that it&#39;s a null pointer and then you try to access it anyway?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 3, "creation_date": 1570621523, "post_id": 58303165, "comment_id": 102969075, "body": "Please read <a href=\"https://stackoverflow.com/q/31816095/1782465\">why <code>bits&#47;stdc++.h</code> should not be used</a>."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1570621740, "post_id": 58303165, "comment_id": 102969187, "body": "@hacxter Now after you selected &quot;the best&quot; answer reread my answer.:)"}], "answers": [{"tags": [], "owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "is_accepted": false, "score": 0, "last_activity_date": 1570621096, "creation_date": 1570621096, "answer_id": 58303273, "question_id": 58303165, "link": "https://stackoverflow.com/questions/58303165/im-trying-to-code-a-binary-search-tree-using-c-but-the-program-takes-only-2-i/58303273#58303273", "title": "I&#39;m trying to code a binary search tree using c++ but the program takes only 2 inputs and stops", "body": "<p>You are first checking that root is NULL. If it is, you are changing its data. This is not good at all, and will cause a crash. </p>\n\n<pre><code>if (root == NULL)\n{\n    root-&gt;cand = data; //code stops here\n</code></pre>\n\n<p>If root is NULL, you must create a root node first.</p>\n\n<pre><code>if ( root == nullptr ) {\n    root = new node;\n    root-&gt;cand = data; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 12186775, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JD3UfnjI4FI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdioHNG_vMw6n6UR9pUTPyUZx4EwQ/photo.jpg?sz=128", "display_name": "hacxter", "link": "https://stackoverflow.com/users/12186775/hacxter"}, "edited": false, "score": 0, "creation_date": 1570621776, "post_id": 58303355, "comment_id": 102969213, "body": "Thank you! This looks way better than mine."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 11, "user_id": 12186775, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JD3UfnjI4FI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdioHNG_vMw6n6UR9pUTPyUZx4EwQ/photo.jpg?sz=128", "display_name": "hacxter", "link": "https://stackoverflow.com/users/12186775/hacxter"}, "edited": false, "score": 0, "creation_date": 1570621814, "post_id": 58303355, "comment_id": 102969231, "body": "@hacxter You selected as the best answer an incomplete answer."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1570621680, "last_edit_date": 1570621680, "creation_date": 1570621357, "answer_id": 58303355, "question_id": 58303165, "link": "https://stackoverflow.com/questions/58303165/im-trying-to-code-a-binary-search-tree-using-c-but-the-program-takes-only-2-i/58303355#58303355", "title": "I&#39;m trying to code a binary search tree using c++ but the program takes only 2 inputs and stops", "body": "<p>The member function <code>add</code> is invalid and moreover has undefined behavior.</p>\n\n<p>In this if statement</p>\n\n<pre><code>if (root == NULL)\n{\n    root-&gt;cand = data; //code stops here\n    root-&gt;left = NULL;\n    root-&gt;right = NULL;\n}\n</code></pre>\n\n<p>there is used a null-pointer to access memory.</p>\n\n<p>In this else statement</p>\n\n<pre><code>else\n{\n    node *temp = root;\n    while (temp != NULL)\n    {\n        if (data &lt; temp-&gt;cand)\n        {\n            temp = temp-&gt;left;\n        }\n        else\n        {\n            temp = temp-&gt;right;\n        }\n    }\n    temp = new node;\n    temp-&gt;cand = data;\n    temp-&gt;left = temp-&gt;right = NULL;\n}\n</code></pre>\n\n<p>the created node <code>temp</code> is not added to the tree. So the program has a memory leak.</p>\n\n<p>The function can be written the following way. It is better to make its return type <code>void</code>. Otherwise the returned value 1 as in your function implementation does not make sense.</p>\n\n<pre><code>class candies\n{\n    node *root;\n\npublic:\n    candies();\n    void add(int);\n    int check();\n};\n\n//...\n\nvoid candies::add( int data )\n{\n    node **current = &amp;root;\n\n    while ( *current != nullptr )\n    {\n        if ( data &lt; ( *current )-&gt;cand )\n        {\n            current = &amp;( *current )-&gt;left;\n        }\n        else\n        {\n            current = &amp;( *current )-&gt;right;\n        }\n    }\n\n    *current = new node { data, nullptr, nullptr };\n} \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12186775, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JD3UfnjI4FI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdioHNG_vMw6n6UR9pUTPyUZx4EwQ/photo.jpg?sz=128", "display_name": "hacxter", "link": "https://stackoverflow.com/users/12186775/hacxter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58303355, "answer_count": 2, "score": -1, "last_activity_date": 1570621680, "creation_date": 1570620700, "question_id": 58303165, "link": "https://stackoverflow.com/questions/58303165/im-trying-to-code-a-binary-search-tree-using-c-but-the-program-takes-only-2-i", "title": "I&#39;m trying to code a binary search tree using c++ but the program takes only 2 inputs and stops", "body": "<p>Notice the //, the program stops taking input and that is the main problem. <br>\n<code>root-&gt;cand = data;</code> <br>\nHere is the full code:</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n using namespace std;\n struct node\n{\n    int cand;\n    node *left;\n    node *right;\n};\nclass candies\n{\n    node *root;\n\npublic:\n    candies();\n    int add(int);\n    int check();\n};\ncandies::candies()\n{\n    root = NULL;\n}\nint candies::add(int data)\n{\n    if (root == NULL)\n    {\n        root-&gt;cand = data; //code stops here\n        root-&gt;left = NULL;\n        root-&gt;right = NULL;\n    }\n    else\n    {\n        node *temp = root;\n        while (temp != NULL)\n        {\n            if (data &lt; temp-&gt;cand)\n            {\n                temp = temp-&gt;left;\n            }\n            else\n            {\n                temp = temp-&gt;right;\n            }\n        }\n        temp = new node;\n        temp-&gt;cand = data;\n        temp-&gt;left = temp-&gt;right = NULL;\n    }\n    return 1;\n}\nint candies::check()\n{\n    node *temp;\n    temp = root;\n    int data;\n    cin &gt;&gt; data;\n    while (temp != NULL)\n    {\n        if (temp-&gt;cand == data)\n        {\n            cout &lt;&lt; \"YES\\n\";\n            return 1;\n        }\n        else if (data &lt; temp-&gt;cand)\n            temp = temp-&gt;left;\n        else if (data &gt; temp-&gt;cand)\n            temp = temp-&gt;right;\n    }\n    cout &lt;&lt; \"NO\\n\";\n    return 0;\n}\nint main()\n{\n    candies c;\n    int n;\n    cin &gt;&gt; n;\n    while (n--)\n    {\n        int data;\n        cin &gt;&gt; data;\n        c.add(data);\n    }\n    c.check();\n}\n</code></pre>\n"}, {"tags": ["c++", "oop", "static"], "answers": [{"comments": [{"owner": {"reputation": 160, "user_id": 7122385, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c4d82a87a116270eab5b02a632b05ec?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/7122385/eddy"}, "edited": false, "score": 0, "creation_date": 1570620918, "post_id": 58303206, "comment_id": 102968728, "body": "Like this: <code>std::string Rules::suits[4] = {&quot;Diamonds&quot;, &quot;Hearts&quot;, &quot;Spades&quot;, &quot;Clubs&quot;}; std::string Rules::ranks[13] = {&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;,&quot;10&quot;,&quot;J&quot;,&quot;Q&quot;,&quot;K&quot;,&quot;A&quot;}; </code> right?"}], "tags": [], "owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "is_accepted": true, "score": 3, "last_activity_date": 1570620827, "creation_date": 1570620827, "answer_id": 58303206, "question_id": 58303156, "link": "https://stackoverflow.com/questions/58303156/undefined-reference-to-static-member-of-class/58303206#58303206", "title": "Undefined reference to static member of class", "body": "<p>In <code>Rules.cpp</code>, you don't <em>define</em> the static members <code>Rules::suits</code> and <code>Rules::ranks</code>, but rather introduce 2 new global variables.</p>\n\n<p>In order for the static definition to work, you need to specify the fully qualified name, e.g. <code>Rules::suits</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": false, "score": 0, "last_activity_date": 1570621229, "creation_date": 1570621229, "answer_id": 58303319, "question_id": 58303156, "link": "https://stackoverflow.com/questions/58303156/undefined-reference-to-static-member-of-class/58303319#58303319", "title": "Undefined reference to static member of class", "body": "<h2>Use a constant expression <code>constexpr</code></h2>\n\n<p>In the header Rules.h file:</p>\n\n<pre><code>constexpr std::array&lt;std::string_view, 4&gt; suits = {\"Diamonds\", \"Hearts\", \"Spades\", \"Clubs\"}; \n</code></pre>\n"}], "owner": {"reputation": 160, "user_id": 7122385, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c4d82a87a116270eab5b02a632b05ec?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/7122385/eddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 58303206, "answer_count": 2, "score": 0, "last_activity_date": 1570621229, "creation_date": 1570620668, "question_id": 58303156, "link": "https://stackoverflow.com/questions/58303156/undefined-reference-to-static-member-of-class", "title": "Undefined reference to static member of class", "body": "<p>I am about to learn basic OOP operations in C++ and now I encountered a problem with static members of class. I try to build simple card game. I create classes <code>Rules</code>, <code>Deck</code> and <code>Card</code>.</p>\n\n<p>My <code>Deck</code> class taking rules and some constants from <code>Rules</code> class and then do something. I'm only use <code>Deck::createDeck();</code> in main function, nothing else. When I try to compile the code I get in result error:</p>\n\n<blockquote>\n  <p>/usr/bin/ld: CMakeFiles/CardGame.dir/Sources/Rules.cpp.o: in function <code>Rules::getSuits[abi:cxx11]()':\n  /home/bartosz/CLionProjects/CardGame/Sources/Rules.cpp:12: undefined reference to</code>Rules::suits[abi:cxx11]'\n  /usr/bin/ld: CMakeFiles/CardGame.dir/Sources/Rules.cpp.o: in function <code>Rules::getRanks[abi:cxx11]()':\n  /home/bartosz/CLionProjects/CardGame/Sources/Rules.cpp:16: undefined reference to</code>Rules::ranks[abi:cxx11]'\n  collect2: error: ld returned 1 exit status</p>\n</blockquote>\n\n<p>But I belive that static members (<code>suits</code> and <code>ranks</code>) are corectlly initialized, so why compiler doesn't see this variables? </p>\n\n<p>My code:</p>\n\n<p>Rules.h</p>\n\n<pre><code>#ifndef CARDGAME_RULES_H\n#define CARDGAME_RULES_H\n\n#include &lt;string&gt;\n\nclass Rules {\npublic:\n    static std::string suits[4];\n    static std::string ranks[13];\n\npublic:\n    static std::string * getSuits();\n    static std::string * getRanks();\n};\n\n\n#endif //CARDGAME_RULES_H\n</code></pre>\n\n<p>Rules.cpp</p>\n\n<pre><code>#include \"../Headers/Rules.h\"\n\nstd::string suits[4] = {\"Diamonds\", \"Hearts\", \"Spades\", \"Clubs\"};\nstd::string ranks[13] = {\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"J\",\"Q\",\"K\",\"A\"};\n\n\nstd::string * Rules::getSuits() {\n    return suits;\n}\n\nstd::string * Rules::getRanks() {\n    return ranks;\n}\n</code></pre>\n\n<p>Deck.h</p>\n\n<pre><code>#ifndef CARDGAME_DECK_H\n#define CARDGAME_DECK_H\n\n\n#include \"Card.h\"\n\nclass Deck {\nprivate:\n    Card * cards;\n    Deck();\n\npublic:\n    static void createDeck();\n    void shuffle();\n    void dealCards();\n};\n\n\n#endif //CARDGAME_DECK_H\n</code></pre>\n\n<p>Deck.cpp</p>\n\n<pre><code>#include \"../Headers/Deck.h\"\n#include \"../Headers/Rules.h\"\n\nDeck::Deck() {\n\n}\n\nvoid Deck::createDeck() {\n    std::string * ranks = Rules::getRanks();\n    std::string * suits = Rules::getSuits();\n    // some operations\n}\n\nvoid Deck::shuffle() {\n\n}\n\nvoid Deck::dealCards() {\n\n}\n</code></pre>\n"}]