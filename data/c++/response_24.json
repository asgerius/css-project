[{"tags": ["c++", "cuda", "thrust"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1435191449, "post_id": 31039092, "comment_id": 50102195, "body": "C and C++ are different languages. Do not add a C tag for C++-only questions."}], "answers": [{"tags": [], "owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "is_accepted": true, "score": 0, "last_activity_date": 1435191504, "last_edit_date": 1435191504, "creation_date": 1435190596, "answer_id": 31039150, "question_id": 31039092, "link": "https://stackoverflow.com/questions/31039092/does-thrust-copy-data-if-its-device-vector-is-created-from-iterator/31039150#31039150", "title": "Does thrust copy data if its device_vector is created from iterator?", "body": "<pre><code>thrust::device_vector &lt;float&gt; vec(raw_data, raw_data+100);\n</code></pre>\n\n<p><code>vec</code> variable is filled with data copied from  pointer variable <code>raw_data</code> of range 0 to 100.</p>\n\n<p>It is using the  following constructor  to initialize the variable vec.</p>\n\n<pre><code>template&lt;typename InputIterator &gt;\n__host__    device_vector (InputIterator first, InputIterator last)\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5030115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e39fceba214e65c825d7e955eb6d03c9?s=128&d=identicon&r=PG", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/5030115/hieu-pham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "accepted_answer_id": 31039150, "answer_count": 1, "score": 0, "last_activity_date": 1435191674, "creation_date": 1435190168, "last_edit_date": 1435191674, "question_id": 31039092, "link": "https://stackoverflow.com/questions/31039092/does-thrust-copy-data-if-its-device-vector-is-created-from-iterator", "title": "Does thrust copy data if its device_vector is created from iterator?", "body": "<p>Suppose that I have the following code</p>\n\n<pre><code>float *raw_data;\ncudaMalloc(&amp;raw_data, 100*sizeof(float));\nthrust::device_vector &lt;float&gt; vec(raw_data, raw_data+100);\n</code></pre>\n\n<p>When executing the last line, does thrust copy the memory from raw_data to that of the device_vector, or does it just set the corresponding range of the vector?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "database", "visual-studio-2012", "unqlite", "nosql"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1435200861, "post_id": 31039015, "comment_id": 50104260, "body": "Did you add <code>unqlite.c</code> to your visual studio project so that it is built as part of your application?"}, {"owner": {"reputation": 87, "user_id": 3619911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bd719ae4681432b9ac1843149fc82c?s=128&d=identicon&r=PG&f=1", "display_name": "user3619911", "link": "https://stackoverflow.com/users/3619911/user3619911"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1435214877, "post_id": 31039015, "comment_id": 50108829, "body": "Yes, I did. I added as existing item and after that I put the option precompiled header as &#39;Not using Precompiled headers&#39;. This proceeding worked for others libraries."}], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 2410150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9076c787be49a4b2991b18b01053ba8?s=128&d=identicon&r=PG", "display_name": "woldendans", "link": "https://stackoverflow.com/users/2410150/woldendans"}, "is_accepted": false, "score": 3, "last_activity_date": 1444825366, "creation_date": 1444825366, "answer_id": 33125182, "question_id": 31039015, "link": "https://stackoverflow.com/questions/31039015/error-lnk2019-unresolved-external-symbo-unqlite/33125182#33125182", "title": "error LNK2019: unresolved external symbo UnQLite", "body": "<p>If your are compiling your project in C++, and included the unqlite.h header in a C++ file, you might want to surround it with an extern \"C\" statement. This should look like this:</p>\n\n<pre><code>extern \"C\" {\n#include \"unqlite.h\"\n}\n</code></pre>\n\n<p>I believe that the distributed header file at the root of the project lacks this statement. You can alternatively try to use the unqlite.h file under the <strong>scr/</strong> folder on the Unqlite GitHub, that does have this statement inside:</p>\n\n<p><a href=\"https://github.com/symisc/unqlite\" rel=\"nofollow\">https://github.com/symisc/unqlite</a></p>\n\n<p>Cheers!</p>\n"}], "owner": {"reputation": 87, "user_id": 3619911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bd719ae4681432b9ac1843149fc82c?s=128&d=identicon&r=PG&f=1", "display_name": "user3619911", "link": "https://stackoverflow.com/users/3619911/user3619911"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505459686, "creation_date": 1435189729, "last_edit_date": 1506103282, "question_id": 31039015, "link": "https://stackoverflow.com/questions/31039015/error-lnk2019-unresolved-external-symbo-unqlite", "title": "error LNK2019: unresolved external symbo UnQLite", "body": "<p>I am trying to use UnQLite database with visual studio 2012, but when I try to open the database I got the following error: </p>\n\n<p>error LNK2019: unresolved external symbol \"int __cdecl unqlite_open(struct unqlite * *,char const *,unsigned int)\" (?unqlite_open@@YAHPAPAUunqlite@@PBDI@Z) referenced in function \"bool __cdecl connect_database(void)\" (?connect_database@@YA_NXZ)</p>\n\n<p>This is my code:</p>\n\n<p>void connect_database() {</p>\n\n<pre><code> // Open our database;\n rc = unqlite_open(&amp;pDb,\"myDB.db\",UNQLITE_OPEN_CREATE);\n\n if( rc != UNQLITE_OK ){ return; }\n</code></pre>\n\n<p>}</p>\n\n<p>I would appreciate your help.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "visual-c++"], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 5046713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ead9ee3a32d80a9f9e3cc9c7772888c?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/5046713/bill"}, "is_accepted": false, "score": 0, "last_activity_date": 1435191332, "creation_date": 1435191332, "answer_id": 31039241, "question_id": 31038998, "link": "https://stackoverflow.com/questions/31038998/how-to-average-percentage-of-pairs/31039241#31039241", "title": "How to average percentage of pairs", "body": "<p>Keep a running sum of percentagePair after each trial.  After the last trial, divide the running sum by the number of trials.</p>\n\n<p>As your code stands now, avgPercentagePair is only 10% of percentagePair.</p>\n"}], "owner": {"reputation": 21, "user_id": 2649283, "user_type": "registered", "profile_image": "https://graph.facebook.com/545480463/picture?type=large", "display_name": "Joel Borja", "link": "https://stackoverflow.com/users/2649283/joel-borja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1435241485, "creation_date": 1435189632, "last_edit_date": 1435241485, "question_id": 31038998, "link": "https://stackoverflow.com/questions/31038998/how-to-average-percentage-of-pairs", "title": "How to average percentage of pairs", "body": "<p>I am stuck on this last bit of my code. I know I have to add all of my percentage of pairs from each trial but how would I add all my percentage of pairs from each trial? Also how would I only have it show up last in my output     as \"Average Percentage of pairs = \" ?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include \"card.h\"\n#include \"deck.h\"\n#include \"stdlib.h\"\n#include \"time.h\"\n\nusing namespace std;\n\n\nint main(){\n\nsrand((unsigned)time(NULL)); //randomize function\n\n\n\n\nfor (int y = 1; y &lt;= 10; y++){//this gives me 10 trials \n\n    int numberOfPairs = 0;\n    int numberOfFlushes = 0;\n    int numberOfHands = 10000;\n\n    for (int i = 0; i &lt; numberOfHands; i++){// this gives me 10,000 of whatever I put inside this loop\n\n\n        Deck gameDeck;//(calls the constructor) this creates the deck \n        gameDeck.shuffle(100);//this shuffles the deck 100 times \n\n        Card hand[5];//defining five cards\n        hand[0] = gameDeck.getCard(); //listing the cards 1-5\n        hand[1] = gameDeck.getCard();\n        hand[2] = gameDeck.getCard();\n        hand[3] = gameDeck.getCard();\n        hand[4] = gameDeck.getCard();\n\n        Card::Suit checkFlush = hand[0].getSuit(); //get the suit of the first card starting at zero\n        bool hasFlush = true;\n        bool hasPair = false;\n\n        for (int j = 0; j &lt; 5; j++){ //runs through the deck (checking for pairs)\n            if (hand[j].getSuit() != checkFlush){//this is comparing the j series with the suites \n                hasFlush = false; //do not redefine \n            }\n            for (int k = 0; k &lt; 5; k++){//runs through the deck and compares j and k\n\n                if (j != k &amp;&amp; !hasPair){// dont want them to equal because its comparing the same card &amp;&amp; search for a pair if you havent found one\n                    if (hand[j].getValue() == hand[k].getValue()){//this tells us we have a pair\n                        numberOfPairs++;//keeping track of my pairs \n                        hasPair = true;\n                        break;//breaks after finding a pair\n                    }\n\n                }\n\n            }\n        }\n        if (hasFlush == true){\n            numberOfFlushes++;//keeps track of my flushes\n        }\n\n\n    }\n    float percentagePair = ((float)numberOfPairs / numberOfHands) * 100.0; //finds percentage with a least a pair for each trial\n    float percentageFlush = ((float)numberOfFlushes / numberOfHands) * 100.0;//finds percentage with a least a flush for each trial\n    float avgPercentagePair = (percentagePair/ 10); // takes the average percent of pairs of all 10 trials\n\n\n\n    std::cout &lt;&lt; \"Trial number = \" &lt;&lt; y &lt;&lt; endl;\n    std::cout &lt;&lt; \"Hands dealt = \"  &lt;&lt; numberOfHands &lt;&lt; endl;\n    std::cout &lt;&lt; \"Number of hands with at least a pair = \" &lt;&lt; numberOfPairs &lt;&lt; endl;\n    std::cout &lt;&lt; \"Number of hands with a flush = \" &lt;&lt; numberOfFlushes &lt;&lt; endl;\n    std::cout &lt;&lt; \"Percentage of hands with at least a pair = \" &lt;&lt; percentagePair &lt;&lt; \"%\" &lt;&lt; endl;\n    std::cout &lt;&lt; \"Percentage of hands with a flush = \" &lt;&lt; percentageFlush &lt;&lt; \"%\" &lt;&lt; endl &lt;&lt; endl;\n\n    std::cout &lt;&lt; \"Average Percentage of pairs = \" &lt;&lt; avgPercentagePair &lt;&lt; \"%\" &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 3, "creation_date": 1435189357, "post_id": 31038910, "comment_id": 50101672, "body": "<code>std::move</code> by itself doesn&#39;t invoke a move operator; all you&#39;re doing is passing an r-value reference to <code>funct</code> but <code>funct</code> isn&#39;t actually doing a move."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1435189411, "post_id": 31038910, "comment_id": 50101684, "body": "you pass argument by (r-value) reference, so no copy or move constructor."}, {"owner": {"reputation": 2285, "user_id": 2910144, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfd46a7fdd37fbecff245eacdcfacbba?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Miguel Colanta", "link": "https://stackoverflow.com/users/2910144/carlos-miguel-colanta"}, "edited": false, "score": 0, "creation_date": 1435189502, "post_id": 31038910, "comment_id": 50101707, "body": "So passing an r-value reference through <code>std::move</code> won&#39;t invoke move/copy?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1435189644, "post_id": 31038910, "comment_id": 50101736, "body": "You can confirm that the copy-constructor is not being used by adding <code>carl(carl const &amp;) = delete;</code>"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1435221181, "post_id": 31038910, "comment_id": 50112742, "body": "Here&#39;s a rule of thumb: <b><code>std::move()</code> does NOT move.</b>"}], "answers": [{"comments": [{"owner": {"reputation": 2285, "user_id": 2910144, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfd46a7fdd37fbecff245eacdcfacbba?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Miguel Colanta", "link": "https://stackoverflow.com/users/2910144/carlos-miguel-colanta"}, "edited": false, "score": 0, "creation_date": 1435189918, "post_id": 31038986, "comment_id": 50101814, "body": "Ahhh i see, so just to clarify. using <code>std::move</code> on a <code>&amp;&amp;</code> will not invoke copy/move but it will only simply bind the values?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 2285, "user_id": 2910144, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfd46a7fdd37fbecff245eacdcfacbba?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Miguel Colanta", "link": "https://stackoverflow.com/users/2910144/carlos-miguel-colanta"}, "edited": false, "score": 0, "creation_date": 1435190132, "post_id": 31038986, "comment_id": 50101873, "body": "@CarloBrew Think of references as aliases for the objects they are initialized with. There are references for lvalues (<code>T&amp;</code>) and references for rvalues (<code>T&amp;&amp;</code>). Initializing a reference with <code>std::move</code> or anything else does not cause a copy or move, because no new object is being created. So yes, it will just bind the object to the reference."}, {"owner": {"reputation": 2285, "user_id": 2910144, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfd46a7fdd37fbecff245eacdcfacbba?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Miguel Colanta", "link": "https://stackoverflow.com/users/2910144/carlos-miguel-colanta"}, "edited": false, "score": 0, "creation_date": 1435192406, "post_id": 31038986, "comment_id": 50102440, "body": "I see thank you. is it the same case if it&#39;s <code>std::forward</code> ?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 2285, "user_id": 2910144, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfd46a7fdd37fbecff245eacdcfacbba?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Miguel Colanta", "link": "https://stackoverflow.com/users/2910144/carlos-miguel-colanta"}, "edited": false, "score": 0, "creation_date": 1435192725, "post_id": 31038986, "comment_id": 50102507, "body": "@CarloBrew Yes, <code>std::forward</code> just returns an lvalue if the argument is an lvalue, and an rvalue if the argument is an rvalue. It doesn&#39;t create a new object and doesn&#39;t call any constructors. It&#39;s literally a type cast, just like <code>std::move</code>."}], "tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": true, "score": 2, "last_activity_date": 1435189560, "creation_date": 1435189560, "answer_id": 31038986, "question_id": 31038910, "link": "https://stackoverflow.com/questions/31038910/does-stdmove-invoke-the-copy-operator-if-its-used-as-an-argument-on-a-para/31038986#31038986", "title": "Does std::move invoke the copy operator if it&#39;s used as an argument on a &amp;&amp; parameter?", "body": "<p>There are no moves happening in your code. <code>func</code> takes a reference as a parameter, so passing <code>std::move(c)</code> simply binds a reference - no copy or move occurs. The key fact is that <code>std::move</code> doesn't move, it just returns an rvalue designating the object. If you took your parameter by value:</p>\n\n<pre><code>void func(carl get);\n</code></pre>\n\n<p>Then you would be creating a new object which is initialized using the move constructor (assuming you pass an rvalue to <code>func</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": false, "score": 2, "last_activity_date": 1435220098, "creation_date": 1435220098, "answer_id": 31044772, "question_id": 31038910, "link": "https://stackoverflow.com/questions/31038910/does-stdmove-invoke-the-copy-operator-if-its-used-as-an-argument-on-a-para/31044772#31044772", "title": "Does std::move invoke the copy operator if it&#39;s used as an argument on a &amp;&amp; parameter?", "body": "<p>For your example, this here,</p>\n\n<pre><code>void funct(carl&amp;&amp; get) { std::cout&lt;&lt;get.x&lt;&lt;std::endl; }\n</code></pre>\n\n<p>gives exactly the same behaviour as</p>\n\n<pre><code>void funct(carl&amp; get) { std::cout&lt;&lt;get.x&lt;&lt;std::endl; }\n</code></pre>\n\n<p>Namely: you pass a reference to a function.</p>\n\n<hr>\n\n<p>Things only change when you <em>move</em> the rvalue reference into a new object:</p>\n\n<pre><code>void funct(carl&amp;&amp; get)\n{   \n    auto my_carl = std::move(get); \n    std::cout&lt;&lt;my_carl.x&lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>Then the compiler calls the move constructor of <code>carl</code> to move the content out of the object instead of doing a copy.</p>\n"}], "owner": {"reputation": 2285, "user_id": 2910144, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfd46a7fdd37fbecff245eacdcfacbba?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Miguel Colanta", "link": "https://stackoverflow.com/users/2910144/carlos-miguel-colanta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 2, "accepted_answer_id": 31038986, "answer_count": 2, "score": 3, "last_activity_date": 1435220098, "creation_date": 1435189006, "last_edit_date": 1435218684, "question_id": 31038910, "link": "https://stackoverflow.com/questions/31038910/does-stdmove-invoke-the-copy-operator-if-its-used-as-an-argument-on-a-para", "title": "Does std::move invoke the copy operator if it&#39;s used as an argument on a &amp;&amp; parameter?", "body": "<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n\nclass carl{\n    public:\n    int x;\n\n    carl(int y):x(y){\n\n    }\n\n\n    carl(carl&amp;&amp; other)\n    {\n    std::cout&lt;&lt;\" cons called?\"&lt;&lt;std::endl;\n    this-&gt;x = other.x;\n    other.x = 0;\n    }\n\n\n    void operator=(carl&amp;&amp; other){\n    std::cout&lt;&lt;\"operator called?\"&lt;&lt;std::endl;\n    this-&gt;x = other.x;\n    other.x = 0;\n    }\n};\n\n\n\nvoid funct(carl&amp;&amp; get){\nstd::cout&lt;&lt;get.x&lt;&lt;std::endl;    \n}\n\n\nint main(int argc, char** argv) {\n    carl c(2);\n    funct(std::move(c));\n    std::cout&lt;&lt;c.x&lt;&lt;std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2\n2\n</code></pre>\n\n<p>If I remember, there is a special rule for special member functions stating that, <em>if a class declared a move constructor/operator then that class will not automatically generate copy operators/constructors</em>.</p>\n\n<p>Based from my example, it seems that move operators and constructors were not invoked but rather it <strong>copied</strong> the value. It was supposed to empty out the value of c' <code>x</code> and do the <code>cout</code> to confirm but none of that happened. Can anybody clarify what's happening with my code?  </p>\n"}, {"tags": ["java", "android", "c++", "string", "java-native-interface"], "comments": [{"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "edited": false, "score": 1, "creation_date": 1435188659, "post_id": 31038813, "comment_id": 50101500, "body": "You must have <code>native boolean  callJNIMethod();</code> declaration somewhere in your java code - add the new parameter to it as well."}, {"owner": {"reputation": 117, "user_id": 4250078, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/05b12f74e2a627f98a66ef709a93018f?s=128&d=identicon&r=PG&f=1", "display_name": "Nematode7", "link": "https://stackoverflow.com/users/4250078/nematode7"}, "reply_to_user": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "edited": false, "score": 0, "creation_date": 1435188719, "post_id": 31038813, "comment_id": 50101516, "body": "Ah yes, totally forgot about that! Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4250078, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/05b12f74e2a627f98a66ef709a93018f?s=128&d=identicon&r=PG&f=1", "display_name": "Nematode7", "link": "https://stackoverflow.com/users/4250078/nematode7"}, "edited": false, "score": 0, "creation_date": 1435365282, "post_id": 31063912, "comment_id": 50185971, "body": "Oh I didn&#39;t know that. Thanks! I&#39;ll keep that in mind."}], "tags": [], "owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "is_accepted": true, "score": 1, "last_activity_date": 1435285821, "creation_date": 1435285821, "answer_id": 31063912, "question_id": 31038813, "link": "https://stackoverflow.com/questions/31038813/jni-method-formal-argument-lists-differ-in-length/31063912#31063912", "title": "JNI method: formal argument lists differ in length", "body": "<p>You went astray by editing the .h file. Changes to native methods should begin in your Java source.</p>\n\n<p>The .h file should be generated by <code>javah</code> from the compiled .class file. You can set up your build system to re-run <code>javah</code> with each build. That way you'll see right away if the native method implementations no longer match the native declarations in your Java source.</p>\n"}], "owner": {"reputation": 117, "user_id": 4250078, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/05b12f74e2a627f98a66ef709a93018f?s=128&d=identicon&r=PG&f=1", "display_name": "Nematode7", "link": "https://stackoverflow.com/users/4250078/nematode7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 31063912, "answer_count": 1, "score": 0, "last_activity_date": 1435285821, "creation_date": 1435188431, "question_id": 31038813, "link": "https://stackoverflow.com/questions/31038813/jni-method-formal-argument-lists-differ-in-length", "title": "JNI method: formal argument lists differ in length", "body": "<p>I'm trying to emend a JNI function that takes a string argument from the java layer. </p>\n\n<p>Initially, the java code from the .java file was: </p>\n\n<pre><code>callJNIMethod();\n</code></pre>\n\n<p>I'm trying to change it so that I can give it a string, like this:</p>\n\n<pre><code>String arg = \"abcd\";\ncallJNIMethod(arg);\n</code></pre>\n\n<p>In my JNI code, this is what the function previously looked like:</p>\n\n<pre><code>JNIEXPORT jboolean JNICALL Java_com_file_app_Activity_callJNIMethod(\nJNIEnv *env, jclass clazz){\n\n//use the string\n}\n</code></pre>\n\n<p>This is what I changed it to (in the wrapper .cpp file and the header .h file):</p>\n\n<pre><code>JNIEXPORT jboolean JNICALL Java_com_file_app_Activity_callJNIMethod(\nJNIEnv *env, jclass clazz, jstring str);\n</code></pre>\n\n<p>I'm getting an error that the method callJNIMethod cannot be applied to the given types.</p>\n\n<pre><code>required: no arguments\nfound: java.lang.String\nreason: actual and formal argument lists differ in length\nNote: Some input files use or override a deprecated API.\n</code></pre>\n\n<p>Any idea what's wrong? </p>\n"}, {"tags": ["c++", "arrays", "hex"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1435188570, "post_id": 31038796, "comment_id": 50101482, "body": "Where yo you get <code>6144</code> and why aren&#180;t you checking if this is enough for your <code>bufferString</code>? And whats the problem?"}, {"owner": {"reputation": 1229, "user_id": 1599549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3282a4c9edbe89333be13d99c1b86ac4?s=128&d=identicon&r=PG", "display_name": "Mlagma", "link": "https://stackoverflow.com/users/1599549/mlagma"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1435188827, "post_id": 31038796, "comment_id": 50101543, "body": "It&#39;s an arbitrary buffer size (1024 * 6). This isn&#39;t an end user program...it&#39;s a test script for a UART hardware device I&#39;m interacting with, and I know for a fact any input will never have more than 6000 bytes. I&#39;ll edit my post to make it clearer."}, {"owner": {"reputation": 2179, "user_id": 67591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d6477f402edc037da317708924193d?s=128&d=identicon&r=PG", "display_name": "IvyMike", "link": "https://stackoverflow.com/users/67591/ivymike"}, "edited": false, "score": 0, "creation_date": 1435189378, "post_id": 31038796, "comment_id": 50101676, "body": "Your current code writes to <code>bufferBytes[i]</code> twice, overwriting the first value.  I believe the second instance should be <code>bufferBytes[i+1]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3542, "user_id": 5033611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a91063fb01317639d57d5fc9c9d9c7?s=128&d=identicon&r=PG", "display_name": "ssemilla", "link": "https://stackoverflow.com/users/5033611/ssemilla"}, "edited": false, "score": 0, "creation_date": 1435190997, "post_id": 31039192, "comment_id": 50102086, "body": "Note the <code>- &#39;0&#39;</code>, <code>|=</code> and the <code>[i&#47;2]</code> part."}], "tags": [], "owner": {"reputation": 3542, "user_id": 5033611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a91063fb01317639d57d5fc9c9d9c7?s=128&d=identicon&r=PG", "display_name": "ssemilla", "link": "https://stackoverflow.com/users/5033611/ssemilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1435193253, "last_edit_date": 1435193253, "creation_date": 1435190929, "answer_id": 31039192, "question_id": 31038796, "link": "https://stackoverflow.com/questions/31038796/converting-stdstring-into-hex-and-then-storing-it-in-a-byte-array/31039192#31039192", "title": "Converting std::string into hex, and then storing it in a byte array", "body": "<p>Here's a rough snippet that would probably do the job.</p>\n\n<pre><code>  for (int i = 0; i &lt; bufferString.length(); i += 2) {\n\n    bufferBytes[i/2] = (bufferString[i] - '0') &lt;&lt; 4;\n    bufferBytes[i/2] |= bufferString[i+1] - '0';\n\n  }\n</code></pre>\n\n<p>If your intention is to store each hex digit as their own char element then this should be the body of the loop:</p>\n\n<pre><code>    bufferBytes[i] = (bufferString[i] - '0') &lt;&lt; 4;\n    bufferBytes[i+1] = bufferString[i+1] - '0';\n</code></pre>\n"}], "owner": {"reputation": 1229, "user_id": 1599549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3282a4c9edbe89333be13d99c1b86ac4?s=128&d=identicon&r=PG", "display_name": "Mlagma", "link": "https://stackoverflow.com/users/1599549/mlagma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435193253, "creation_date": 1435188313, "last_edit_date": 1435188979, "question_id": 31038796, "link": "https://stackoverflow.com/questions/31038796/converting-stdstring-into-hex-and-then-storing-it-in-a-byte-array", "title": "Converting std::string into hex, and then storing it in a byte array", "body": "<p>This question probably has an easy answer. I believe I have some working code, but I feel like there is a much better solution.</p>\n\n<p>In any case, this is the problem I'm having:</p>\n\n<p>Basically a user enters some data into a terminal, and my program is monitoring the terminal. It's important to know that I'm not using <code>cin</code>, which I know can easily be manipulated to interpret incoming data as hexadecimal. Instead, my program is using an adapted version of conios.h for linux and using <code>kbhit()</code>. All user input is stored as a <code>std::string</code> until the user decides to submit it. </p>\n\n<p>At that point, I have to interpret the string as hexadecimal - but there's a minor caveat. I have to save this string in a character array. </p>\n\n<p>That said, this is what I have:</p>\n\n<pre><code>     ...\n     char bufferBytes[6144];\n     std::string bufferString = \"\";\n     ...\n\n     for(i = 0; i &lt; bufferString.length(); i = i+2)\n     {\n        bufferBytes[i] = (stoi(bufferString.at(i), 0, 16) &lt;&lt; 4);\n        bufferBytes[i] = (stoi(bufferString.at(i+1), 0, 16);    \n     }\n</code></pre>\n\n<p>I believe this will do the trick, but I feel like there's probably a better solution. </p>\n\n<p>Any input would be appreciated.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Say a user enters <code>0123456789ABCDEF</code>. This is stored as a std::string until the user decides to submit it. At this point, I need to interpret this std::string as hexadecimal numbers and store them in a character array. I believe the code I have above will work, but is there a better/more efficient way of doing what I described.</p>\n"}, {"tags": ["c++", "raytracing"], "comments": [{"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 0, "creation_date": 1435229324, "post_id": 31038793, "comment_id": 50117690, "body": "A very small epsilon can indeed <a href=\"http://geekshavefeelings.com/x/wp-content/uploads/2010/03/Its-Really-Not-a-Rendering-Bug-You-see....pdf\" rel=\"nofollow noreferrer\">cause problems</a> in reflection and refraction, you can try a slightly higher value like 0.0001f."}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1435229900, "post_id": 31038793, "comment_id": 50118113, "body": "you should also avoid square-rooting negative reals in your if statement: <code>if(sqrtNV &lt; EPSILON || (n * n) * sqrtNV &lt; 1)</code>."}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 1, "creation_date": 1435230009, "post_id": 31038793, "comment_id": 50118185, "body": "and add a hit-offset to your recursive raytrace call: otherwise you&#39;ll probably intersect the same surface you just refracted off"}], "owner": {"reputation": 31, "user_id": 4530508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHmWd.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4530508/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435229086, "creation_date": 1435188306, "last_edit_date": 1435229086, "question_id": 31038793, "link": "https://stackoverflow.com/questions/31038793/refraction-in-c-raytracer-giving-artifacts", "title": "Refraction in C++ RayTracer giving artifacts", "body": "<p>I am currently working on the refract function for my RayTracer. For some reason, i can't get it to work. It definitely renders a different image then usual, but it has a lot of artifacts in it, and it's not \"transparent\". My refract function is:</p>\n\n<pre><code>void computeRefractedLight( const Vec3Df &amp; origin, const Vec3Df &amp; dest, int &amp; level, Vec3Df &amp; hit, Vec3Df &amp; color, int &amp; triangleIndex, Vec3Df &amp; hitnormal)\n{\n    //Calculate normal of triangle\n    Triangle triangle3d = MyMesh.triangles[triangleIndex];\n    Vec3Df normal = hitnormal;\n\n    // Normalize the direction of the ray hitting the triangle\n    Vec3Df viewDir = hit - origin;\n    viewDir.normalize();\n\n    // Breaking index (hardcoded for now)\n    float n = 1.5f;\n\n    float dotNV = n * (Vec3Df::dotProduct(normal, viewDir));\n    float sqrtNV = (1 - ((Vec3Df::dotProduct(normal, viewDir))*(Vec3Df::dotProduct(normal, viewDir))));\n    if(sqrtNV &lt; EPSILON)\n        return;\n    else\n    {\n        Vec3Df result = ((dotNV - sqrtf(1 - (n * n) * sqrtNV)) * normal) - (n * viewDir);\n        std::cout &lt;&lt; \"Calculating refraction\" &lt;&lt; std::endl;\n        performRayTracing(hit, result, level, color);\n    }\n}\n</code></pre>\n\n<p>If I ue this code to render my image (a sphere on a plane), I get the following result:</p>\n\n<p><img src=\"https://i.stack.imgur.com/OlJg2.png\" alt=\"enter image description here\"></p>\n\n<p>The artifacts are probably caused by the floating point precision. However, I have used an Epsilon (0.0000f), but I could have implemented this the wrong way. Anyone who knows how to help me?</p>\n"}, {"tags": ["c++", "object", "error-handling"], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1435189699, "creation_date": 1435189699, "answer_id": 31039009, "question_id": 31038787, "link": "https://stackoverflow.com/questions/31038787/return-value-to-main-from-inside-object/31039009#31039009", "title": "Return value to main from inside object", "body": "<p>You may use <code>throw</code> for that:</p>\n\n<pre><code>struct C\n{\n    C() {throw std::runtime_error(\"for the example\");}\n};\n\n\nint main()\n{\n    try\n    {\n        C c;\n\n        // Do normal stuff (that never happen due to throw)\n        return 0;\n    }\n    catch (const std::exception&amp; e)\n    {\n        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;\n        return -1;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 31039009, "answer_count": 1, "score": 0, "last_activity_date": 1435189699, "creation_date": 1435188254, "question_id": 31038787, "link": "https://stackoverflow.com/questions/31038787/return-value-to-main-from-inside-object", "title": "Return value to main from inside object", "body": "<p>In my main() I am creating objects that have error checking in the constructor.\nIf an error occurs I want to return an error code from main() to quit the program.</p>\n\n<p>Should I use a callback to return an error code in main() or should I not put error checking in the constructor; move it to a member function that can return an error code to main()?</p>\n"}, {"tags": ["c++", "visual-studio", "build", "gyp"], "comments": [{"owner": {"reputation": 217, "user_id": 5011657, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8c3fa349d2494451e87b5889f6889a74?s=128&d=identicon&r=PG&f=1", "display_name": "MicroHat11", "link": "https://stackoverflow.com/users/5011657/microhat11"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1435190839, "post_id": 31038756, "comment_id": 50102039, "body": "I have downloaded the gyp source, then ran the command &#39;gclient sync&#39; in cmd to install python and download other tools."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 5045991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/925de5161810632efcb48d57c33bbc1d?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush", "link": "https://stackoverflow.com/users/5045991/peeyush"}, "is_accepted": true, "score": 2, "last_activity_date": 1435649561, "creation_date": 1435649561, "answer_id": 31132214, "question_id": 31038756, "link": "https://stackoverflow.com/questions/31038756/how-to-use-gyp/31132214#31132214", "title": "How to use GYP?", "body": "<p>For building visual studio projects you can use gyp like this</p>\n\n<pre><code>gyp &lt;your gyp filename&gt; -DOS=win --depth=. -f msvs -G msvs_version=2013 --generator-output=./build_win -Icommon.gypi\n</code></pre>\n\n<p>gyp is the gyp.bat present in the gyp download. VS project will be created in build_win directory, generator-output lets you specify where you want the projects generated. -I is used to add any gyp include files, in this example common.gypi is getting included, replace it with your appropriate gypi file </p>\n"}], "owner": {"reputation": 217, "user_id": 5011657, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8c3fa349d2494451e87b5889f6889a74?s=128&d=identicon&r=PG&f=1", "display_name": "MicroHat11", "link": "https://stackoverflow.com/users/5011657/microhat11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2354, "favorite_count": 0, "accepted_answer_id": 31132214, "answer_count": 1, "score": 1, "last_activity_date": 1435649561, "creation_date": 1435188057, "last_edit_date": 1435191283, "question_id": 31038756, "link": "https://stackoverflow.com/questions/31038756/how-to-use-gyp", "title": "How to use GYP?", "body": "<p>I am trying to build <a href=\"https://bitbucket.org/chromiumembedded/java-cef/src\" rel=\"nofollow\">JCEF</a> to a visual studio project using <a href=\"https://code.google.com/p/gyp/\" rel=\"nofollow\">GYP</a>. </p>\n\n<p>The JCEF download includes all the C++ files and .gyp, .gypi files. </p>\n\n<p>I have no experience in Python and wonder how I run the actual .gyp file so it turns into a visual studio project? </p>\n\n<p>I have downloaded the gyp source, then ran the command 'gclient sync' in cmd to install python and download other tools. I could only find tools to improve visual studio project layout. What is the command to actually run the .gyp file?</p>\n"}, {"tags": ["c++", "audio", "wav"], "comments": [{"owner": {"reputation": 29791, "user_id": 120261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2f78d64b265cf0c1c5781c1ea7a39?s=128&d=identicon&r=PG", "display_name": "mtrw", "link": "https://stackoverflow.com/users/120261/mtrw"}, "edited": false, "score": 0, "creation_date": 1435198304, "post_id": 31038721, "comment_id": 50103680, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/17318685/printing-of-a-wav-header-in-c\">printing of a wav header in c</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1861, "user_id": 1940360, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b81506cc7a5ceb4ad43301a225d75f3a?s=128&d=identicon&r=PG", "display_name": "ranisalt", "link": "https://stackoverflow.com/users/1940360/ranisalt"}, "edited": false, "score": 0, "creation_date": 1435190279, "post_id": 31038951, "comment_id": 50101900, "body": "I think you completely ignored what I have written. I&#39;m getting even the VERY FIRST BYTE incorrectly, so maybe I&#39;m reading the middle parts incorrectly, but what about the very first byte? Why is not being read properly?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1861, "user_id": 1940360, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b81506cc7a5ceb4ad43301a225d75f3a?s=128&d=identicon&r=PG", "display_name": "ranisalt", "link": "https://stackoverflow.com/users/1940360/ranisalt"}, "edited": false, "score": 0, "creation_date": 1435192806, "post_id": 31038951, "comment_id": 50102525, "body": "@ranisalt: Part of that is due to you reading some of the values as integers when they are not integers to begin with.  The <code>RIFF</code> and <code>WAVE</code> markers are not integers! They are actually character strings.  You also have to take endian into account for the other fields that really are integers, such as the data size of each chunk, and the fields of the WAVE format header."}, {"owner": {"reputation": 1861, "user_id": 1940360, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b81506cc7a5ceb4ad43301a225d75f3a?s=128&d=identicon&r=PG", "display_name": "ranisalt", "link": "https://stackoverflow.com/users/1940360/ranisalt"}, "edited": false, "score": 0, "creation_date": 1435200383, "post_id": 31038951, "comment_id": 50104139, "body": "I tried the code after your edit and still no luck. edit: now file.read actually fails silently, but I&#39;m sure file size is enough."}, {"owner": {"reputation": 1861, "user_id": 1940360, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b81506cc7a5ceb4ad43301a225d75f3a?s=128&d=identicon&r=PG", "display_name": "ranisalt", "link": "https://stackoverflow.com/users/1940360/ranisalt"}, "edited": false, "score": 0, "creation_date": 1435201783, "post_id": 31038951, "comment_id": 50104464, "body": "I discovered why the read won&#39;t work by any means: the fstream can&#39;t even open the file. I have asserted the file is there, present, in the correct directory, with proper permissions but it still can not open the file. Any clue why?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1861, "user_id": 1940360, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b81506cc7a5ceb4ad43301a225d75f3a?s=128&d=identicon&r=PG", "display_name": "ranisalt", "link": "https://stackoverflow.com/users/1940360/ranisalt"}, "edited": false, "score": 0, "creation_date": 1435202599, "post_id": 31038951, "comment_id": 50104661, "body": "@ranisalt: That is behind the scope of this original question.  Post a new question about that specific issue. Most likely, your <code>filename</code> is not trying to open the file you are expecting."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1435202525, "last_edit_date": 1435202525, "creation_date": 1435189319, "answer_id": 31038951, "question_id": 31038721, "link": "https://stackoverflow.com/questions/31038721/reading-wav-header-renders-wrong-data/31038951#31038951", "title": "Reading WAV header renders wrong data", "body": "<p>That code is NOT EVEN CLOSE to be the correct way to read a WAV file.  A WAV file has structure to it, but the code is completely ignoring that structure, making inaccurate assumptions without validating them:</p>\n\n<ul>\n<li>it assumes the first subchunk inside the <code>WAVE</code> chunk is <code>fmt\\0</code> - not always true!</li>\n<li>it assumes the size of the <code>fmt\\0</code> chunk's data is exactly 16 bytes - not always true!</li>\n<li>it assumes that no other chunks exist between the <code>fmt\\0</code> and <code>data</code> chunks - not always true!</li>\n</ul>\n\n<p>You really should use a pre-existing library to read audio files, such as <a href=\"https://libav.org\" rel=\"nofollow\">libav</a>, but if you are going to do it manually, at least pay attention to what you are reading.  Every chunk has a header that indicates the chunk type and data size.  You MUST take those into account correctly.  Read the chunks in a loop, reading each header, data payload, and optional padding as needed, checking for specific chunks that you are interested in, and ignoring other chunks that you are not interested in.</p>\n\n<p>Try something more like this:</p>\n\n<pre><code>#ifndef FFT_FFT_H\n#define FFT_FFT_H\n\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nclass FFT {\npublic:\n    FFT(const std::string&amp; filename);\n\nprivate:\n    std::ifstream file;\n};\n\n#endif //FFT_FFT_H\n</code></pre>\n\n<p></p>\n\n<pre><code>#include \"fft.h\"\n\n#include &lt;cstdint&gt;\n#include &lt;cstring&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;vector&gt;\n#include &lt;stdexcept&gt; \n\n#pragma pack(push, 1)\nstruct chunkHdr\n{    \n    char chunkID[4];\n    uint32_t dataSize;\n};\n\nstruct waveFmt\n{\n    uint16_t wFormatTag;\n    uint16_t nChannels;\n    uint32_t nSamplesPerSec;\n    uint32_t nAvgBytesPerSec;\n    uint16_t nBlockAlign;\n};\n\nstruct waveFmtEx\n{\n    waveFmt wf;\n    uint16_t wBitsPerSample;\n    uint16_t cbSize;\n    // cbSize number of bytes follow this struct...\n};\n\nstruct pcmWaveFmt\n{\n    waveFmt wf;\n    uint16_t wBitsPerSample;\n};\n\nunion uWaveFmt\n{\n    waveFmt wf;\n    waveFmtEx wfx;\n    pcmWaveFmt pcm;\n};\n#endif\n\nvoid readBytes(std::ifstream &amp;f, void *buf, std::streamsize bufsize)\n{\n    if (!f.read(reinterpret_cast&lt;char*&gt;(buf), bufsize))\n        throw std::runtime_error(\"not enough bytes in file\");\n}\n\nvoid skipBytes(std::ifstream &amp;f, std::streamsize bufsize)\n{\n    if (!f.seekg(bufsize, std::ios_base::cur))\n        throw std::runtime_error(\"not enough bytes in file\");\n}\n\nvoid readChunkHeader(std::ifstream &amp;f, chunkHdr &amp;hdr)\n{\n    readBytes(f, &amp;hdr, sizeof(hdr));\n    // if you are on a big-endian system, you need to swap the bytes of hdr.dataSize here...\n}\n\nFFT::FFT(const std::string&amp; filename)\n{\n    file.open(filename.c_str(), std::ifstream::binary);\n    if (!file.is_open())\n        throw std::runtime_error(\"cannot open the file\");\n\n    chunkHdr hdr;\n    char riffType[4];\n    std::vector&lt;uint8_t&gt; waveFmtBuffer;\n    uWaveFmt *fmt = NULL;\n\n    readChunkHeader(file, hdr); // should be RIFF\n    if( (hdr.chunkID[0] != 'R') ||\n        (hdr.chunkID[1] != 'I') ||\n        (hdr.chunkID[2] != 'F') ||\n        (hdr.chunkID[3] != 'F') )\n        throw std::runtime_error(\"Expected chunk 'RIFF' not detected\");\n\n    readBytes(file, riffType, 4); // should be WAVE\n    if( (riffType[0] != 'W') ||\n        (riffType[1] != 'A') ||\n        (riffType[2] != 'V') ||\n        (riffType[3] != 'E') )\n        throw std::runtime_error(\"Expected type 'WAVE' not detected\");\n\n    while (!file.eof())\n    {\n        readChunkHeader(file, hdr);\n\n        if(\n            (hdr.chunkID[0] == 'f') &amp;&amp;\n            (hdr.chunkID[1] == 'm') &amp;&amp;\n            (hdr.chunkID[2] == 't') &amp;&amp;\n            (hdr.chunkID[3] == '\\0') )\n        {\n            if (fmt)\n                throw std::runtime_error(\"Only one 'fmt' chunk is allowed\");\n\n            if (hdr.dataSize == 0)\n                throw std::runtime_error(\"Invalid 'fmt' data size detected\");\n\n            waveFmtBuffer.resize(hdr.dataSize);\n            readBytes(file, &amp;data[0], hdr.dataSize);\n            fmt = reinterpret_cast&lt;uWaveFmt*&gt;(&amp;waveFmtBuffer[0]);\n\n            if (hdr.dataSize &gt;= sizeof(waveFmtEx))\n            {\n                // if you are on a big-endian system, you need to swap the bytes of the uWaveFmt-&gt;wfx fields first...\n\n                if (fmt-&gt;wfx.wFormatTag == 1) // PCM\n                    fmt-&gt;wfx.cbSize = 0; // not used in PCM\n\n                else if (hdr.dataSize &lt; (sizeof(waveFmtEx) + fmt-&gt;cbSize))\n                    throw std::runtime_error(\"Invalid 'fmt' data size detected\");\n            }\n            else if (hdr.dataSize == sizeof(waveFmt))\n            {\n                // if you are on a big-endian system, you need to swap the bytes of the fmt-&gt;wf fields first...\n\n                if (fmt-&gt;wf.wFormatTag == 1) // PCM\n                    throw std::runtime_error(\"Invalid 'fmt' data size detected\"); // needed at least sizeof(pcmWaveFmt) bytes\n            }\n            else\n                throw std::runtime_error(\"Invalid 'fmt' data size detected\");\n\n            // use fmt as needed...\n         }\n\n         else if(\n            (hdr.chunkID[0] == 'd') &amp;&amp;\n            (hdr.chunkID[1] == 'a') &amp;&amp;\n            (hdr.chunkID[2] == 't') &amp;&amp;\n            (hdr.chunkID[3] == 'a') )\n        {\n            if (!fmt)\n                throw std::runtime_error(\"'fmt' chunk not detected before 'data' chunk\");\n\n            // read exactly hdr.dataSize bytes, processing audio samples\n            // as needed based on the format defined in the 'fmt' chunk...\n\n            skipBytes(file, hdr.dataSize);\n        }\n\n        // any other chunks you are interested in...\n\n        else\n        {\n            // skip everything else...\n            skipBytes(file, hdr.dataSize);\n        }\n\n        // skip trailing pad byte if the data size is not even...\n        if ((hdr.dataSize % 2) != 0)\n            skipBytes(file, 1);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1861, "user_id": 1940360, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b81506cc7a5ceb4ad43301a225d75f3a?s=128&d=identicon&r=PG", "display_name": "ranisalt", "link": "https://stackoverflow.com/users/1940360/ranisalt"}, "edited": false, "score": 0, "creation_date": 1435198273, "post_id": 31039260, "comment_id": 50103675, "body": "Good, I actually haven&#39;t read about this endianness issue anywhere. I knew the file has its own endianness but I forgot about my machine.  I will try to read byte by byte and check if the values are correct."}, {"owner": {"reputation": 1861, "user_id": 1940360, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b81506cc7a5ceb4ad43301a225d75f3a?s=128&d=identicon&r=PG", "display_name": "ranisalt", "link": "https://stackoverflow.com/users/1940360/ranisalt"}, "edited": false, "score": 0, "creation_date": 1435198933, "post_id": 31039260, "comment_id": 50103808, "body": "something I was thinking, suppose I read the first 4 bytes of the file without dealing with endianness. From what I know, the only difference would be that the value read would be backwards. Since the value is always the same (ASCII hex for &quot;RIFF&quot;), in the worst case it would read &quot;FFIR&quot;. However, that is not the case."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1435202676, "post_id": 31039260, "comment_id": 50104683, "body": "The first 4 bytes are not an integer to begin with, and thus they are not affected by endian, and you <i>should not</i> be reading them as an integer.  But if you do, then you have to take endian into account."}], "tags": [], "owner": {"reputation": 2255, "user_id": 670358, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6DjA.png?s=128&g=1", "display_name": "Kaslai", "link": "https://stackoverflow.com/users/670358/kaslai"}, "is_accepted": false, "score": 1, "last_activity_date": 1435191521, "creation_date": 1435191521, "answer_id": 31039260, "question_id": 31038721, "link": "https://stackoverflow.com/questions/31038721/reading-wav-header-renders-wrong-data/31039260#31039260", "title": "Reading WAV header renders wrong data", "body": "<p>Reading bytes from a file and using those bytes directly as bytes for numbers is <strong>implementation-defined behavior</strong>. The C++ standard makes no guarantee of the internal byte order of integers. </p>\n\n<p>To start, you'll want a function that will read little endian numbers from a file and store them as native integers in memory. It might seem superfluous if you're already on a little endian machine, but there is no good reason to not read things this way, and plenty of good reasons to not blindly assume that you're running on a little endian architecture.</p>\n\n<p>Next, you will want to properly follow the spec and read the sizes and offsets to parse the information, as Remy said. Blindly assuming that all wav files are laid out the same is a much worse assumption than you might think. </p>\n\n<p>As far as actually troubleshooting your issue, read the file one byte at a time and print it. Make sure you're actually reading the data you're expecting. Sometimes, odd things can happen, especially on Linux.</p>\n"}], "owner": {"reputation": 1861, "user_id": 1940360, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b81506cc7a5ceb4ad43301a225d75f3a?s=128&d=identicon&r=PG", "display_name": "ranisalt", "link": "https://stackoverflow.com/users/1940360/ranisalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1435202525, "creation_date": 1435187801, "last_edit_date": 1435190341, "question_id": 31038721, "link": "https://stackoverflow.com/questions/31038721/reading-wav-header-renders-wrong-data", "title": "Reading WAV header renders wrong data", "body": "<p>I am trying to read the contents of a WAV file, and to start I want to read the header to find information. According to a lot of sources, the first 44 bytes of the file contain the information.</p>\n\n<p>I have inspected the file with an HEX editor and it contains the correct data, starting with \"RIFF\", then numbers, \"WAVE\" and all.</p>\n\n<p>I then tried the following code to access the header values:\n<a href=\"https://gist.github.com/ranisalt/1b0dbc84ea874a04db3f\" rel=\"nofollow noreferrer\">https://gist.github.com/ranisalt/1b0dbc84ea874a04db3f</a></p>\n\n<p>Problem is this renders completely useless information, as if I was trying to read something in the middle of the file. I get nonsense values, not consistent with those from the HEX editor:</p>\n\n<p><img src=\"https://i.imgur.com/BD6WFzB.png\" alt=\"Imgur\"></p>\n\n<p><strong>Please mind</strong> that even though the code is not completely correct, my problem is that the fstream read is not rendering the same bytes the file has.</p>\n\n<p>I also am working on an embedded platform with very little memory, so I need code with minimal overhead, that's why I am not seeking a full fledged library.</p>\n\n<p>I tried seeking to the position 0 of the file before reading, but this is even worse, reading other strange values with no meaning.</p>\n\n<p>What could possibly be happening with the file reading to render such nonsense values?</p>\n"}, {"tags": ["c++", "templates", "inheritance"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1435187347, "post_id": 31038624, "comment_id": 50101133, "body": "<a href=\"http://coliru.stacked-crooked.com/a/4c509ba40a9991c3\" rel=\"nofollow noreferrer\">Can&#39;t reproduce</a>."}, {"owner": {"reputation": 823, "user_id": 4812238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFdQT.jpg?s=128&g=1", "display_name": "Ediac", "link": "https://stackoverflow.com/users/4812238/ediac"}, "edited": false, "score": 0, "creation_date": 1435187513, "post_id": 31038624, "comment_id": 50101184, "body": "This isn&#39;t the solution, but <code>Derived</code> is inheriting from <code>Base</code> which is inheriting from <code>OOPPolymorphic</code>, and you inherit <code>OOPPolymorphic</code> again, is this possible?"}], "owner": {"reputation": 305, "user_id": 2579071, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1078307906/picture?type=large", "display_name": "Yuval Simon", "link": "https://stackoverflow.com/users/2579071/yuval-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435187163, "creation_date": 1435187163, "question_id": 31038624, "link": "https://stackoverflow.com/questions/31038624/ambiguous-functions-c-template-inheritance", "title": "Ambiguous functions c++ template inheritance", "body": "<p>I try to write some generic code which meant for multiple inheritance.\nHere is summary of the code:</p>\n\n<pre><code>struct Type {};\n\ntemplate &lt;class T&gt;\nclass OOPPolymorphic {\n    friend T;\n    void RegisterInheritence(const Type* base) {}\npublic:\n    static const Type* GetType() {\n        return thisType;\n    }\n    virtual const Type* MyType() = 0;\n};\n\nclass Base :public OOPPolymorphic&lt;Base&gt; {\npublic:\n    virtual const Type* MyType() {\n        return OOPPolymorphic&lt;Base&gt;::GetType();\n    }\n};\n\nclass Derived : public Base, public OOPPolymorphic&lt;Derived&gt; {\npublic:\n    Derived() {\n    OOPPolymorphic&lt;Derived&gt;::RegisterInheritence(Base::GetType());\n    }\n    virtual const Type* MyType() {\n        return OOPPolymorphic&lt;Derived&gt;::GetType();\n    }\n};\n</code></pre>\n\n<p>The class Base compiles with no errors, but in class Derived I get ambiguity error:</p>\n\n<pre><code>'OOPPolymorphic' is ambiguous '\nCandidates are:\n OOPPolymorphic(const OOPPolymorphic&lt;Base&gt; &amp;)\n OOPPolymorphic()\n OOPPolymorphic(const OOPPolymorphic&lt;Derived&gt; &amp;)\n OOPPolymorphic()\n</code></pre>\n\n<p>I really don't understand why it happens. I read that I can write \"using ...\" in Derived to fix it, but I must assume there isn't because it is homework (I don't know what's the use of the template).\nSomeone got any idea why it is ambiguity?\nThanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1435186803, "post_id": 31038519, "comment_id": 50100982, "body": "Your code doesn&#39;t match your error. Your error says <code>friend class slist;</code>. Your code says <code>friend class slist&lt;T&gt;;</code>. Which is it?"}, {"owner": {"reputation": 205, "user_id": 4687427, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a4148df66c56dfce9cc301ff9546fc95?s=128&d=identicon&r=PG&f=1", "display_name": "Jumper", "link": "https://stackoverflow.com/users/4687427/jumper"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1435187140, "post_id": 31038519, "comment_id": 50101080, "body": "@TC do you want me to put up the calling client class. Since the error comes during compilation which involves a main program instantiating a list and adding a few members."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1435187685, "post_id": 31038519, "comment_id": 50101229, "body": "What you need to do is supply a SMALL but COMPLETE sample of code that illustrates your problem.   In particular, it is not clear what order the two templates appear in your source file, if they appear in different ones, etc.    Anyway, look at <a href=\"http://stackoverflow.com/questions/8967521/c-class-template-with-template-class-friend-whats-really-going-on-here\" title=\"c class template with template class friend whats really going on here\">stackoverflow.com/questions/8967521/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1435186818, "post_id": 31038552, "comment_id": 50100988, "body": "That makes <code>slist&lt;foo&gt;</code> a friend of <code>node&lt;bar&gt;</code>."}, {"owner": {"reputation": 205, "user_id": 4687427, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a4148df66c56dfce9cc301ff9546fc95?s=128&d=identicon&r=PG&f=1", "display_name": "Jumper", "link": "https://stackoverflow.com/users/4687427/jumper"}, "edited": false, "score": 0, "creation_date": 1435187031, "post_id": 31038552, "comment_id": 50101043, "body": "I tried this, but now I&#39;m getting the following error../node.hpp:4:35: error: explicit specialization of non-template class &#39;slist&#39;         template&lt;typename E&gt;friend class slist&lt;E&gt;;                                          ^    ~~~"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 205, "user_id": 4687427, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a4148df66c56dfce9cc301ff9546fc95?s=128&d=identicon&r=PG&f=1", "display_name": "Jumper", "link": "https://stackoverflow.com/users/4687427/jumper"}, "edited": false, "score": 0, "creation_date": 1435187683, "post_id": 31038552, "comment_id": 50101227, "body": "@Jumper Did you specify a forward declaration for <code>template&lt;typename T&gt; class slist;</code>?"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1435187730, "last_edit_date": 1435187730, "creation_date": 1435186790, "answer_id": 31038552, "question_id": 31038519, "link": "https://stackoverflow.com/questions/31038519/friend-class-declaration-error/31038552#31038552", "title": "Friend class declaration error", "body": "<p>The friend class declaration needs it's own template parameter declaration without shadowing the enclosing classes template parameters:</p>\n\n<pre><code>template&lt;typename U&gt; class slist; // Forward declare slist\n\ntemplate &lt;typename T&gt; \nclass node{\n\n    template&lt;typename U&gt; // &lt;&lt;&lt;&lt;&lt;\n    friend class slist&lt;U&gt;;\n                    // ^ &lt;&lt;&lt;&lt;&lt;\n    // ...\n}; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 2, "last_activity_date": 1435190041, "creation_date": 1435190041, "answer_id": 31039071, "question_id": 31038519, "link": "https://stackoverflow.com/questions/31038519/friend-class-declaration-error/31039071#31039071", "title": "Friend class declaration error", "body": "<p>You need to forward declare the List class as a template class:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt; class List; //&lt;&lt; fwd decl\n\ntemplate&lt;typename T&gt; class Node {\n    int i;\npublic:\n    friend class List&lt;T&gt;; //&lt;&lt; usage same as you have now\n    Node() : i(123) {}\n    int value() { return i; }\n};\n\ntemplate&lt;typename T&gt; class List { //&lt;&lt; definition\npublic:\n    List(Node&lt;T&gt;* node) { node-&gt;i++; }\n};\n\nint main() {\n    Node&lt;int&gt; node{};\n    List&lt;int&gt; list{&amp;node};\n    std::cout &lt;&lt; node.value() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/2RUWgj\" rel=\"nofollow\">http://ideone.com/2RUWgj</a></p>\n"}], "owner": {"reputation": 205, "user_id": 4687427, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a4148df66c56dfce9cc301ff9546fc95?s=128&d=identicon&r=PG&f=1", "display_name": "Jumper", "link": "https://stackoverflow.com/users/4687427/jumper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 907, "favorite_count": 0, "closed_date": 1440173961, "accepted_answer_id": 31039071, "answer_count": 2, "score": 1, "last_activity_date": 1435190041, "creation_date": 1435186537, "question_id": 31038519, "link": "https://stackoverflow.com/questions/31038519/friend-class-declaration-error", "closed_reason": "Duplicate", "title": "Friend class declaration error", "body": "<p>I'm implementing a singly linked list. Here's the node class</p>\n\n<pre><code>template &lt;typename T&gt; class node{\n\n    friend class slist&lt;T&gt;;\n    public:\n        explicit node():data(0), next(NULL){}\n\n    private:\n        T data;\n        node&lt;T&gt; *next;\n\n};\n</code></pre>\n\n<p>And here's the list class.</p>\n\n<pre><code>template&lt;typename T&gt; class slist{\n    public:\n        slist():head(NULL){}\n\n\n        bool empty(){\n            return head == NULL;\n        }\n\n        void add_front(const T&amp; data){\n            if(head == NULL){\n                node&lt;T&gt;* n = new node&lt;T&gt;();\n                n-&gt;data = data;\n                n-&gt;next = NULL;\n                head = n;\n                return;\n            }\n            node&lt;T&gt;* n = new node&lt;T&gt;();\n            n-&gt;data = data;\n            n-&gt;next = head;\n            head = n;\n        }\n\n        void remove_front(){\n            if(head == NULL) return;\n            node&lt;T&gt;* old = head;\n            head = old-&gt;next;\n            delete old;\n        }\n\n        void print_list(){\n            if(head == NULL) return;\n            while(!empty()){\n                std::cout&lt;&lt;head-&gt;data&lt;&lt;std::endl;\n                head = head-&gt;next;\n            }\n        }\n\n        ~slist(){\n\n            while(!empty()) remove_front();\n\n        }\n\n    private:\n        node&lt;T&gt;* head;\n};\n</code></pre>\n\n<p>The implementation works perfectly fine if I declare the members in the node as public. However the moment I declare them private and make the slist a friend class, I get the following error.</p>\n\n<pre><code>In file included from src.cpp:3:\n./slist.hpp:5:28: error: redefinition of 'slist' as different kind of symbol\ntemplate&lt;typename T&gt; class slist{\n                           ^\n./node.hpp:4:15: note: previous definition is here\n        friend class slist;\n</code></pre>\n\n<p>I can obviously find other implementation of single linked list, but I'm trying to understand what's going wrong here. So please refrain from unsolicited advice as \"google it\". Thanks.</p>\n"}, {"tags": ["c++", "c++11", "lambda", "function-pointers"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 5, "creation_date": 1435186176, "post_id": 31038437, "comment_id": 50100792, "body": "The capture is most similar to class member than argument."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 5, "creation_date": 1435186210, "post_id": 31038437, "comment_id": 50100803, "body": "One difference is that the capture occurs when the lambda is created whereas passing a value occurs when the lambda is called. I&#39;m fairly new to C++11, so it will take some time for me to come up with an example that illustrates the real differences."}, {"owner": {"reputation": 1783, "user_id": 453056, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/787f07c7f788f35cd01628a783174d5e?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/453056/kyle"}, "edited": false, "score": 2, "creation_date": 1435186329, "post_id": 31038437, "comment_id": 50100834, "body": "By capturing something you effectively tie data to the lambda. You are then able to pass around the combination of data + lambda easily wherever it needs to go."}, {"owner": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "reply_to_user": {"reputation": 1783, "user_id": 453056, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/787f07c7f788f35cd01628a783174d5e?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/453056/kyle"}, "edited": false, "score": 0, "creation_date": 1435186764, "post_id": 31038437, "comment_id": 50100967, "body": "@Kyle By &#39;tie the data to the lambda&#39; you mean i can use captured data later on, am i  right? if so can you show me one example please. Thanks"}, {"owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "edited": false, "score": 1, "creation_date": 1435188167, "post_id": 31038437, "comment_id": 50101366, "body": "I&#39;m not sure but I don&#39;t think it&#39;s common to do your own lambda lifting, Yes, we have implemented your function <code>x</code> but you need to pass constant <code>z</code> as the first argument to get a sensible result. It&#39;s leaky and ugly. You need closures and that means capturing variables that are free (available) which the user shouldn&#39;t have to know of for it to work."}, {"owner": {"reputation": 1783, "user_id": 453056, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/787f07c7f788f35cd01628a783174d5e?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/453056/kyle"}, "edited": false, "score": 1, "creation_date": 1435188882, "post_id": 31038437, "comment_id": 50101560, "body": "@ArpitParasana I&#39;m not familiar enough with C++11&#39;s lambda syntax to give a solid example. The idea is that you could do things like pass your lambda with captured data to the function <code>void fun(std::function&lt;int(int,int)&gt; lambda){..}</code>"}, {"owner": {"reputation": 853, "user_id": 7408143, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/w6j01.png?s=128&g=1", "display_name": "J3STER", "link": "https://stackoverflow.com/users/7408143/j3ster"}, "edited": false, "score": 0, "creation_date": 1489888456, "post_id": 31038437, "comment_id": 72867183, "body": "@ArpitParasana would you mind explaining <code>function &lt;int(int,int)&gt; cppstyle;</code> this syntax?"}, {"owner": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "reply_to_user": {"reputation": 853, "user_id": 7408143, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/w6j01.png?s=128&g=1", "display_name": "J3STER", "link": "https://stackoverflow.com/users/7408143/j3ster"}, "edited": false, "score": 1, "creation_date": 1490029355, "post_id": 31038437, "comment_id": 72918553, "body": "@J3STER This link has a great explanation: <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/functional/function</a>; its basically a variable of type function which can have a handle to other function which has a signature as specified in declaration (in this case a function which accepts two integers and returns an integer)."}], "answers": [{"comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 1, "creation_date": 1435188431, "post_id": 31038763, "comment_id": 50101431, "body": "One thing to note: if you capture by reference and the referenced variable goes out of scope, you can cause crashes."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 1, "creation_date": 1435188523, "post_id": 31038763, "comment_id": 50101462, "body": "@Kupiakos that is correct, and the same goes for <code>Capture</code> function object in my example. If <code>i</code> goes out of scope while the function object is still alive then this is undefined behaviour so sky is the limit."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 1, "creation_date": 1559231795, "post_id": 31038763, "comment_id": 99363619, "body": "@AlyssaHaroldsen &quot;you can cause crashes&quot; -&gt; &quot;you have undefined behaviour&quot;"}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": true, "score": 25, "last_activity_date": 1435189699, "last_edit_date": 1435189699, "creation_date": 1435188077, "answer_id": 31038763, "question_id": 31038437, "link": "https://stackoverflow.com/questions/31038437/difference-between-capture-and-passing-an-argument-in-lambda-functions/31038763#31038763", "title": "Difference between capture and passing an argument in lambda functions", "body": "<p>The difference between a captured argument and a passing argument could be seen with an analogy. Consider the following function object:</p>\n\n<pre><code>struct Capture {\n  int &amp;i;\n  int const j;\npublic:\n  Capture(int &amp;_i, int &amp;_j) : i(_i), j(_j) {}\n  int operator()(int const a, int const b) {\n    i *= j;\n    return a * b;\n  }\n};\n</code></pre>\n\n<p>In function object class <code>Capture</code> there are two member variables <code>i</code> and <code>j</code>. There's also overloaded <code>operator()</code> which takes two input arguments. Now consider the following lambda:</p>\n\n<pre><code>int i, j;\n[&amp;i, j](int const a, int const b) {\n  i *= j;\n  return a * b;\n};\n</code></pre>\n\n<p>The member variables of class <code>Capture</code> are in analogy with the lambda capture (i.e., <code>[&amp;i, j]</code>), whereas input arguments of overloaded <code>operator()</code> <code>a</code> and <code>b</code> are in analogy with input arguments <code>a</code> and <code>b</code> of the lambda shown above.</p>\n\n<p>That is, if you consider a lambda as a function object, its capture is the state of the function object (i.e., its member variables) whereas its input arguments would be the input arguments of the overloaded <code>operator()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 853, "user_id": 7408143, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/w6j01.png?s=128&g=1", "display_name": "J3STER", "link": "https://stackoverflow.com/users/7408143/j3ster"}, "edited": false, "score": 1, "creation_date": 1489889718, "post_id": 31057162, "comment_id": 72867372, "body": "would your code work the same, if you passed <code>i</code> as a second argument instead of capturing it?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 853, "user_id": 7408143, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/w6j01.png?s=128&g=1", "display_name": "J3STER", "link": "https://stackoverflow.com/users/7408143/j3ster"}, "edited": false, "score": 0, "creation_date": 1559231875, "post_id": 31057162, "comment_id": 99363669, "body": "@J3STER no, it simply <i>won&#39;t compile</i>. <code>std::for_each</code> wants a function of <i>one</i> parameter"}], "tags": [], "owner": {"reputation": 4175, "user_id": 1082038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEql2.jpg?s=128&g=1", "display_name": "Nevin", "link": "https://stackoverflow.com/users/1082038/nevin"}, "is_accepted": false, "score": 17, "last_activity_date": 1435254118, "creation_date": 1435254118, "answer_id": 31057162, "question_id": 31038437, "link": "https://stackoverflow.com/questions/31038437/difference-between-capture-and-passing-an-argument-in-lambda-functions/31057162#31057162", "title": "Difference between capture and passing an argument in lambda functions", "body": "<p>At a higher level, you capture the data you know now, and you pass in the data you don't have until you need to make the call.</p>\n\n<p>For instance, let's say you wanted to add a constant to every number in a vector.  Your could write it like (caution: untested):</p>\n\n<pre><code>void Add(std::vector&lt;int&gt;&amp; v, int i)\n{\n    std::for_each(std::begin(v), std::end(v), [i](int&amp; j){ j += i; });\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 321, "user_id": 3278350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa10d5bbb5f85739263730bf9a03ddd?s=128&d=identicon&r=PG&f=1", "display_name": "talekeDskobeDa", "link": "https://stackoverflow.com/users/3278350/talekedskobeda"}, "edited": false, "score": 1, "creation_date": 1598880244, "post_id": 56380959, "comment_id": 112592444, "body": "Thanks for exposing the pitfall. Along the lines of the lambdas as function object analogy, it means that the captured <code>i = 5</code> is the state of the function object during the creation and when the <code>i</code> changes inside the loop, the state of the function object is not altered."}], "tags": [], "owner": {"reputation": 21, "user_id": 11578814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47c75bdff664c7ee86d1e019aaf89b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Raul1962", "link": "https://stackoverflow.com/users/11578814/raul1962"}, "is_accepted": false, "score": 2, "last_activity_date": 1559234051, "last_edit_date": 1559234051, "creation_date": 1559229107, "answer_id": 56380959, "question_id": 31038437, "link": "https://stackoverflow.com/questions/31038437/difference-between-capture-and-passing-an-argument-in-lambda-functions/56380959#56380959", "title": "Difference between capture and passing an argument in lambda functions", "body": "<p>The capture of i value is set when the lambda was defined, while when i is passed as argument (j), it is changing in the loop.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main(int argc,char **argv)   {\n    auto i=5;\n    auto f = [=](int j) {cout&lt;&lt;\"capture i=\"&lt;&lt;i&lt;&lt;\", passing i as j=\"&lt;&lt;j&lt;&lt; endl; };\n    while (i&lt;30) {\n        i += 10;\n        f(i);\n    }\n}\n</code></pre>\n\n<p>--- This will be the output:  </p>\n\n<blockquote>\n  <p>lambda capture i=5, passing i as argument j=15</p>\n  \n  <p>lambda capture i=5, passing i as argument j=25</p>\n  \n  <p>lambda capture i=5, passing i as argument j=35</p>\n</blockquote>\n"}], "owner": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8863, "favorite_count": 7, "accepted_answer_id": 31038763, "answer_count": 3, "score": 27, "last_activity_date": 1559234051, "creation_date": 1435185982, "last_edit_date": 1524859618, "question_id": 31038437, "link": "https://stackoverflow.com/questions/31038437/difference-between-capture-and-passing-an-argument-in-lambda-functions", "title": "Difference between capture and passing an argument in lambda functions", "body": "<p>I understand the lambda function and the purpose of it in c++ 11. But i do not understand the difference between \"Capturing the value\" and \"Passing an argument\". \nFor Instance..</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\nusing namespace std;\n\nint add(int a,int b){\n    return a+b;\n}\n\nint main(int argc, char** argv){\n\n    function &lt;int(int,int)&gt; cppstyle;\n    cppstyle = add;\n\n    auto l = [] (function &lt;int(int,int)&gt; f,int a, int b) {return f(a,b);};\n\n    cout &lt;&lt; l(cppstyle,10,30) &lt;&lt;\"\\n\";   \n}\n</code></pre>\n\n<p>The output of the code above is same as the code below..</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\nusing namespace std;\n\nint add(int a,int b){\n    return a+b;\n}\n\nint main(int argc, char** argv){\n\n    function &lt;int(int,int)&gt; cppstyle;\n    cppstyle = add;\n\n    auto l = [cppstyle] (int a, int b) {return cppstyle(a,b);};\n\n    cout &lt;&lt; l(10,30) &lt;&lt;\"\\n\";    \n}\n</code></pre>\n\n<p>Is \"capturing a value\" similar to \"passing a value as an argument\"? or capture has some special meaning?</p>\n"}, {"tags": ["c++", "class", "return-value"], "comments": [{"owner": {"reputation": 9, "user_id": 5044293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee0418e5242608ca2aeb38795411044?s=128&d=identicon&r=PG&f=1", "display_name": "alfa_peste", "link": "https://stackoverflow.com/users/5044293/alfa-peste"}, "edited": false, "score": 0, "creation_date": 1435185933, "post_id": 31038405, "comment_id": 50100730, "body": "why my implementation doesn&#39;t work***"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1435186164, "post_id": 31038405, "comment_id": 50100788, "body": "Do you understand the difference between a <i>class</i> and an <i>instance of a class?</i> You have a class <code>Bucket</code>, but you do not have a <code>Bucket</code>."}, {"owner": {"reputation": 9, "user_id": 5044293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee0418e5242608ca2aeb38795411044?s=128&d=identicon&r=PG&f=1", "display_name": "alfa_peste", "link": "https://stackoverflow.com/users/5044293/alfa-peste"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1435186550, "post_id": 31038405, "comment_id": 50100892, "body": "yes i know the difference... I don&#39;t know how to assign the result of a function to a value. (I thought it is almost  the same as the library std ...std::cout&lt;&lt;&quot;....&quot;; )"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1435187149, "post_id": 31038405, "comment_id": 50101083, "body": "Do you understand that <code>get_value1()</code> is not a static function, and what that means?"}, {"owner": {"reputation": 9, "user_id": 5044293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee0418e5242608ca2aeb38795411044?s=128&d=identicon&r=PG&f=1", "display_name": "alfa_peste", "link": "https://stackoverflow.com/users/5044293/alfa-peste"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1435187757, "post_id": 31038405, "comment_id": 50101250, "body": "No :(... I don&#39;t know. What is a static function?"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1435189126, "post_id": 31038405, "comment_id": 50101615, "body": "It&#39;s a member function you can use without an instance of the class. This function isn&#39;t static. <i>You need a <code>Bucket</code>.</i> Think about it-- what do you expect this function to return?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 1, "creation_date": 1435190374, "post_id": 31038405, "comment_id": 50101922, "body": "@Beta Sir, you just triggered a Mr. Creosote flashback."}], "owner": {"reputation": 9, "user_id": 5044293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee0418e5242608ca2aeb38795411044?s=128&d=identicon&r=PG&f=1", "display_name": "alfa_peste", "link": "https://stackoverflow.com/users/5044293/alfa-peste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435185986, "creation_date": 1435185832, "last_edit_date": 1435185986, "question_id": 31038405, "link": "https://stackoverflow.com/questions/31038405/two-classes-returned-values", "title": "two classes -&gt; returned values", "body": "<p>I have 2 classes: Bucket and ExtHash</p>\n\n<p>How do I assign the returned value of a function from the class Bucket to a element from the class ExtHash? Why doesn't my implementation work?</p>\n\n<pre><code>template &lt;typename E, size_t N = 15&gt; \nclass Bucket\n{\n    size_t local; \n    size_t bucket_size;\n. . .\n public:\nE value1;\nE value2;\n...\nE get_value1(){\nreturn value1\n}\nE get_value2(){\nreturn value2\n}\n....\n};\n\ntemplate &lt;typename E, size_t N = 15&gt;\nclass ExtHash : public Container &lt; E &gt;\n{\n    size_t hash_size;\n...\npublic:\n...\nvirtual E function() const override;\n\n};\n\ntemplate &lt;typename E, size_t N&gt;\nE ExtHash&lt;E, N&gt;::function() const {\n...\nE last = Bucket&lt;E, N&gt;::get_value1(); //How should it look ???\nE prev = Bucket&lt;E, N&gt;::get_value2);//How should it look????\n...\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "arduino"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 3594344, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000676967513/picture?type=large", "display_name": "cfrancklin", "link": "https://stackoverflow.com/users/3594344/cfrancklin"}, "edited": false, "score": 0, "creation_date": 1435186788, "post_id": 31038422, "comment_id": 50100977, "body": "Thank you! I didn&#39;t see I was using only GENERIC_READ. Everything&#39;s working just fine now."}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 1, "last_activity_date": 1435185920, "creation_date": 1435185920, "answer_id": 31038422, "question_id": 31038403, "link": "https://stackoverflow.com/questions/31038403/error-5-access-is-denied-when-using-writefile-to-interface-arduino-and-c-prog/31038422#31038422", "title": "Error 5: Access is Denied when using WriteFile to interface Arduino and C++ program", "body": "<p>You're only opening the serial port with <code>GENERIC_READ</code> which means read-only access. You need to add <code>GENERIC_WRITE</code> as well if you want to be able to write to it.</p>\n\n<pre><code>hSerial = CreateFile(porta, GENERIC_READ | GENERIC_WRITE, 0, 0,\n    OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0);\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 3594344, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000676967513/picture?type=large", "display_name": "cfrancklin", "link": "https://stackoverflow.com/users/3594344/cfrancklin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "accepted_answer_id": 31038422, "answer_count": 1, "score": 0, "last_activity_date": 1435187119, "creation_date": 1435185824, "last_edit_date": 1435187119, "question_id": 31038403, "link": "https://stackoverflow.com/questions/31038403/error-5-access-is-denied-when-using-writefile-to-interface-arduino-and-c-prog", "title": "Error 5: Access is Denied when using WriteFile to interface Arduino and C++ program", "body": "<p>I'm developing a C++ console program to connect with an Arduino Uno.\nI need to send a key to the Arduino board so it can activate the RFID sensor and send back to the program the UID read.</p>\n\n<p>The ReadFile function works ~almost~ perfectly, but when I try to send an \"a\" to Arduino so it can start running its ReadFromRFID function I get this message:</p>\n\n<blockquote>\n  <p>\"Error 5: Access is Denied\"</p>\n</blockquote>\n\n<p>Does anyone know what am I doing wrong and how to do it right?</p>\n\n<p>Here that is the code I have so far:</p>\n\n<pre><code>HANDLE hSerial;\n\nvoid printErro() {\n\n    printf(\":: ERRO ::\\n\");\n\n    wchar_t erro[1024];\n    FormatMessageW(FORMAT_MESSAGE_FROM_SYSTEM, NULL, GetLastError(),\n        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), erro, 1024, NULL);\n    printf(\"Erro %ld: %ls\", GetLastError(), erro);\n\n}\n\nHANDLE conectArduino() {\n\n    LPCWSTR porta = L\"COM3\";\n\n    hSerial = CreateFile(porta, GENERIC_READ, 0, 0, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0);\n\n    if (hSerial == INVALID_HANDLE_VALUE){\n        if (GetLastError() == ERROR_FILE_NOT_FOUND){\n\n            printErro();\n\n        }\n        //some other error occurred. Inform user.\n\n        printErro();\n\n    }\n\n    DCB parametros = { 0 };\n    parametros.DCBlength = sizeof(parametros);\n    parametros.BaudRate = CBR_9600;\n    parametros.ByteSize = 8;\n    parametros.StopBits = ONESTOPBIT;\n    parametros.Parity = NOPARITY;\n\n    if (!SetCommState(hSerial, &amp;parametros)){\n        //error setting serial port state\n\n        printErro();\n\n    }\n\n    COMMTIMEOUTS timeouts = { 0 };\n    timeouts.ReadIntervalTimeout = 10000;\n    timeouts.ReadTotalTimeoutConstant = 1000;\n    timeouts.ReadTotalTimeoutMultiplier = 0;\n    timeouts.WriteTotalTimeoutConstant = 100;\n    timeouts.WriteTotalTimeoutMultiplier = 0;\n\n    if (!SetCommTimeouts(hSerial, &amp;timeouts)) {\n\n        printErro();\n\n    }\n\n    return hSerial;\n\n}\n\nvoid readArduino(HANDLE hSerial) {\n\n    printf(\"RECEBENDO DADOS DO ARDUINO\\n\\n\");\n\n    char buffer[12] = { 0 };\n    DWORD qtdBytesLida = 0;\n\n    if (!ReadFile(hSerial, buffer, 11, &amp;qtdBytesLida, NULL)) {\n\n        printErro();\n\n    }\n\n    printf(\"%d: %*.*s\", qtdBytesLida, qtdBytesLida, qtdBytesLida, buffer);\n\n    getchar();\n\n    printf(\"\\n\\n\");\n    printf(\"----------------------------------------------------------------------\");\n    printf(\"\\n\\n\");\n\n}\n\nvoid sendArduino(const char* palavra) {\n\n    printf(\"ENVIANDO DADOS PARA O ARDUINO\\n\\n\");\n\n    char buffer[2] = \"a\";\n    DWORD qtdBytesEscrita = 0;\n\n    HANDLE hSerial = conectArduino();\n\n    if (!WriteFile(hSerial, buffer, 1, &amp;qtdBytesEscrita, NULL)) {\n\n        printErro();\n\n    }\n    else {\n\n        readArduino(hSerial);\n\n    }\n\n    CloseHandle(hSerial);\n\n    getchar();\n\n    printf(\"\\n\\n\");\n    printf(\"----------------------------------------------------------------------\");\n    printf(\"\\n\\n\");\n\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "templates"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 3, "creation_date": 1435185808, "post_id": 31038376, "comment_id": 50100686, "body": "<i>I get an error after I run it and have no idea why...</i> It might help if you gave us a hint as to what the error was."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 5, "creation_date": 1435185850, "post_id": 31038376, "comment_id": 50100698, "body": "Perfect time to learn how to use a debugger."}, {"owner": {"reputation": 3, "user_id": 5046587, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Cque7_hwZMc/AAAAAAAAAAI/AAAAAAAAADg/ZWAm2Cw5UN4/photo.jpg?sz=128", "display_name": "Addicted44", "link": "https://stackoverflow.com/users/5046587/addicted44"}, "edited": false, "score": 0, "creation_date": 1435185890, "post_id": 31038376, "comment_id": 50100710, "body": "The process returned : -1073741819. It&#39;s some kind of logic error in the code and I&#39;m not sure what exactly. It crashes in the beginning because I have messages but none of them appear. So it seems I have an error in my constructor?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5046587, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Cque7_hwZMc/AAAAAAAAAAI/AAAAAAAAADg/ZWAm2Cw5UN4/photo.jpg?sz=128", "display_name": "Addicted44", "link": "https://stackoverflow.com/users/5046587/addicted44"}, "edited": false, "score": 0, "creation_date": 1435207860, "post_id": 31039084, "comment_id": 50105976, "body": "Thanks so much ! This is the fix."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1435190103, "creation_date": 1435190103, "answer_id": 31039084, "question_id": 31038376, "link": "https://stackoverflow.com/questions/31038376/im-trying-to-finish-a-program-and-the-program-crashes-and-i-cant-find-the-logi/31039084#31039084", "title": "I&#39;m trying to finish a program and the program crashes and I can&#39;t find the logic error", "body": "<p><code>ostream&amp; operator&lt;&lt;(ostream&amp; os, Array&lt;T&gt; arr)</code> takes a copy of arr, triggering the copy constructor. Copy constructor also tries to print out using the <code>&lt;&lt;</code> operator which triggers the copy constructor. Uncontrolled recursion until you crash.</p>\n\n<p>Probably just a typo, but pass in a reference. <code>ostream&amp; operator&lt;&lt;(ostream&amp; os, Array&lt;T&gt; &amp; arr)</code></p>\n"}], "owner": {"reputation": 3, "user_id": 5046587, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Cque7_hwZMc/AAAAAAAAAAI/AAAAAAAAADg/ZWAm2Cw5UN4/photo.jpg?sz=128", "display_name": "Addicted44", "link": "https://stackoverflow.com/users/5046587/addicted44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 31039084, "answer_count": 1, "score": -4, "last_activity_date": 1435190103, "creation_date": 1435185704, "question_id": 31038376, "link": "https://stackoverflow.com/questions/31038376/im-trying-to-finish-a-program-and-the-program-crashes-and-i-cant-find-the-logi", "title": "I&#39;m trying to finish a program and the program crashes and I can&#39;t find the logic error", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n\nusing namespace std;\n\n//implement the functions directly in the class declaration below\ntemplate &lt;typename T&gt;\nclass Array\n{\npublic:\n    Array(int s)\n    {\n    this-&gt;size = s;\n    elements = new T [size];\n\n    cout &lt;&lt; \"Array was created \" &lt;&lt; *this &lt;&lt; endl;\n    }\n    Array(const Array&amp; right)\n    {\n    this-&gt;initElements(right);\n\n    cout &lt;&lt; \"Array was copy constructed \" &lt;&lt; *this &lt;&lt; endl;\n    }\n    Array&amp; operator=(const Array&amp; right)\n    {\n        if(this != &amp;right)\n    {\n        this-&gt;freeArray();\n        this-&gt;initElements(right);\n\n        cout &lt;&lt; \"Array has new values = \" &lt;&lt; *this &lt;&lt; endl;\n    }\n    return *this;\n    }\n\n    virtual ~Array()\n    {\n    this-&gt;freeArray();\n\n    cout &lt;&lt; \"Array was destroyed\" &lt;&lt; endl;\n    }\n\n    T&amp; operator[](int index)\n    {\n        if(index &gt; -1 || index &lt; size)\n        {\n            return this-&gt;elements[index];\n        }\n        else\n                    throw out_of_range(\"Out of range\");\n    }\n\n    T&amp; operator[](int index) const\n    {\n        if(index &gt; -1 || index &lt; size)\n        {\n        return this-&gt;elements[index];\n        }\n        else\n            {\n                throw out_of_range(\"Out of range\");\n            }\n    }\n\n    T&amp; getElements()\n    {\n        return this-&gt;elements;\n    }\n\n    int get_size() const\n    {\n        return this-&gt;size;\n    }\n\n    void sort_array()\n    {\n        for(int i = 0; i &lt; this-&gt;size ; i++)\n        {\n            for(int j = i+1 ; j &lt; this-&gt;size-1 ; j++)\n            {\n                if(elements[j]&lt; elements[i])\n                {\n                    swap(elements[i],elements[j]);\n                }\n            }\n        }\n    }\nprivate:\n    T *elements;\n    int size;\n    void freeArray()\n    {\n        delete [] this-&gt;elements;\n    }\n    void initElements(const Array&amp; other)\n    {\n    this-&gt;elements = new T [other.get_size()];\n    for(int i = 0; i &lt; other.get_size(); i++)\n        this-&gt;elements[i] = other.elements[i];\n    }\n};\n\ntemplate &lt;typename T&gt;\nostream&amp; operator&lt;&lt;(ostream&amp; os, Array&lt;T&gt; arr)\n{\n    os &lt;&lt; \"Array::=(\" ;\n    for(int i = 0 ; i &lt; arr.get_size() ; i ++)\n    {\n        os &lt;&lt; arr[i] &lt;&lt; \", \";\n    }\n    os &lt;&lt; \")\" &lt;&lt; endl;\n    return os;\n}\n\n\n\nint main()\n{\n    //do not change this\n    Array&lt;int&gt; arr(5);\n    arr[0] = 1;\n    arr[1] = 2;\n\n    cout &lt;&lt; arr &lt;&lt; endl;\n    cout &lt;&lt; \"arr.size= \" &lt;&lt; arr.get_size() &lt;&lt; endl;\n\n    try\n    {\n        cout &lt;&lt; arr[6] &lt;&lt; endl;\n    }\n    catch (const out_of_range&amp; e)\n    {\n        cout &lt;&lt; \"6 is out of range\" &lt;&lt; endl;\n    }\n\n    arr.sort_array();\n    cout &lt;&lt; arr &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>This is my program on C++ it's an array that needs to be a template and I get an error after I run it and have no idea why... I need it checked fast and if someone can tell me what's my problem and where?</p>\n"}, {"tags": ["c++", "tic-tac-toe"], "comments": [{"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1435185651, "post_id": 31038276, "comment_id": 50100635, "body": "<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1435185730, "post_id": 31038276, "comment_id": 50100660, "body": "It seems like you don&#39;t have a specific question yet, and you are hoping to have a discussion about this code.  Is that true?"}, {"owner": {"reputation": 2944, "user_id": 5014959, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0452d1509d5759ec646b4638b4af6eb4?s=128&d=identicon&r=PG&f=1", "display_name": "Alp", "link": "https://stackoverflow.com/users/5014959/alp"}, "edited": false, "score": 0, "creation_date": 1435185917, "post_id": 31038276, "comment_id": 50100725, "body": "If you are new to programming and still in learning process, do it right. First rule of programming is to write readable code: readable even for yourself. What I mean by readable? A program is an organized way of step by step description of an idea/process/task. So, you should be clear with what you say and how you say it. For example abd and def are horrible horrible class names. If you want other people to understand your code and help you, HELP THEM by at least writing something readable."}, {"owner": {"reputation": 1, "user_id": 5046518, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A8Ed39_fcdk/AAAAAAAAAAI/AAAAAAAAAAw/ASfU_gxmP-A/photo.jpg?sz=128", "display_name": "kazza", "link": "https://stackoverflow.com/users/5046518/kazza"}, "edited": false, "score": 0, "creation_date": 1435186580, "post_id": 31038276, "comment_id": 50100907, "body": "I&#39;m sorry . I do understand that the class name and object name do not make any sense . And my question is , can how can I use switch case to change the value of the array .Let&#39;s say if the User 1 enters 1 as as his choice , I want a[0] set to x and similarly for User 2 using switch case , just I have no idea how to do it . The process and switch functions are still incomplete and I should have commented it too ."}], "answers": [{"tags": [], "owner": {"reputation": 2313, "user_id": 231844, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2e731702917afeb958741433fb17e803?s=128&d=identicon&r=PG", "display_name": "Bloodyaugust", "link": "https://stackoverflow.com/users/231844/bloodyaugust"}, "is_accepted": false, "score": 0, "last_activity_date": 1435190397, "creation_date": 1435190397, "answer_id": 31039127, "question_id": 31038276, "link": "https://stackoverflow.com/questions/31038276/c-tic-tac-toe-using-switch-case/31039127#31039127", "title": "C++ Tic-Tac-Toe using switch case", "body": "<p>As the comments on your question have implied, your code needs better formatting. However, to answer your question, you could do something along the lines of:</p>\n\n<pre><code>void process() {\n    if (turn == 1) {\n        a[ch1 - '0'] = 'x'; //char - '0' to convert char to int\n    } else {\n        a[ch2 = '0'] = 'o';\n    }\n};\n</code></pre>\n\n<p>As you can see, you don't really need a switch here. Just use their input to directly access the correct spot in the array.</p>\n"}], "owner": {"reputation": 1, "user_id": 5046518, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A8Ed39_fcdk/AAAAAAAAAAI/AAAAAAAAAAw/ASfU_gxmP-A/photo.jpg?sz=128", "display_name": "kazza", "link": "https://stackoverflow.com/users/5046518/kazza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1292, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1435190397, "creation_date": 1435185164, "question_id": 31038276, "link": "https://stackoverflow.com/questions/31038276/c-tic-tac-toe-using-switch-case", "title": "C++ Tic-Tac-Toe using switch case", "body": "<p>I was trying out a C++ code for the Tic Tac Toe program with help of classes . I am new to coding and would appreciate some help.This is what I have done till now.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint turn=1;\nclass abc\n{\nprivate:\nint a[9];\nchar ch1,ch2;\npublic:\n\n\nvoid accept()\n{\n    if(turn==1)\n     {\n     cout&lt;&lt;\"\\n\\nPlayer 1 enter choice : \";\n     cin&gt;&gt;ch1;\n     turn=2;\n     }\n    else\n    {\n     cout&lt;&lt;\"\\n\\nPlayer 2 enter choice :\";\n     cin&gt;&gt;ch2;\n     turn=1;\n     }\n}\n\nvoid layout()\n{\na[0]=1;\na[1]=2;\na[2]=3;\na[3]=4;\na[4]=5;\na[5]=6;\na[6]=7;\na[7]=8;\na[8]=9;\n\ncout&lt;&lt;\"\\n\\n\"&lt;&lt;\"-----------\"&lt;&lt;\" \"&lt;&lt;a[0]&lt;&lt;\"     \"&lt;&lt;a[1]&lt;&lt;\"     \"&lt;&lt;a[2]&lt;&lt;\" -----------\";       \ncout&lt;&lt;\"\\n\"&lt;&lt;\"-----------\"&lt;&lt;\" \"&lt;&lt;a[3]&lt;&lt;\"     \"&lt;&lt;a[5]&lt;&lt;\"     \"&lt;&lt;a[6]&lt;&lt;\" -----------\";\ncout&lt;&lt;\"\\n\"&lt;&lt;\"-----------\"&lt;&lt;\" \"&lt;&lt;a[6]&lt;&lt;\"     \"&lt;&lt;a[7]&lt;&lt;\"     \"&lt;&lt;a[8]&lt;&lt;\" -----------\";\n}\n\nvoid process ()\n{\nif (turn==1)\n{\n\nswitch(ch1)\n{\n    case 1:     \n    a[0]='x';\n    break;\n\n}\n}\n}\n\n/*void check()\n{\nif(a[0]==a[1] &amp;&amp; a[1]=a[2]\n}\n*/\n\n};\n\nint main()\n{\nabc def;\ncout&lt;&lt;\"-----------TIC - TAC - TOE-----------\";\ndef.layout();\ndo\n{\n    do\n    {\n    def.accept();\n    def.process();\n    def.layout();       \n    //def.check();\n    }while(turn==2);\n\n    }while(turn==1);\n\n    return 0;\n}\n</code></pre>\n\n<p>So , I can switch from player 1 to player 2 , I intend to use the process function for modifying the layout i.e if the turn 1 player enters 1 then the array should be layout should be modified accordingly . And basically I think I know the logic for the check function i.e a[0]==a[1] &amp;&amp; a[1]=a[2] and the other 7 conditions . I just want to know how to use switch case in this condition. </p>\n"}, {"tags": ["c++", "qt", "inheritance"], "comments": [{"owner": {"reputation": 2552, "user_id": 3594858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/STD3K.jpg?s=128&g=1", "display_name": "Timusan", "link": "https://stackoverflow.com/users/3594858/timusan"}, "edited": false, "score": 0, "creation_date": 1435189918, "post_id": 31038198, "comment_id": 50101813, "body": "Hi and welcome to SO! Well formed question, but could you also post a code sample of how you applied the shadow? When folks see the code, they might get a better idea of what you might be missing."}, {"owner": {"reputation": 31, "user_id": 5046503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f13cfc09d00f34a37c5a972dd341ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo Gomes", "link": "https://stackoverflow.com/users/5046503/ricardo-gomes"}, "reply_to_user": {"reputation": 2552, "user_id": 3594858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/STD3K.jpg?s=128&g=1", "display_name": "Timusan", "link": "https://stackoverflow.com/users/3594858/timusan"}, "edited": false, "score": 0, "creation_date": 1435190560, "post_id": 31038198, "comment_id": 50101964, "body": "Shadow code (first answer):   <a href=\"http://stackoverflow.com/questions/23718827/qt-shadow-around-window\" title=\"qt shadow around window\">stackoverflow.com/questions/23718827/qt-shadow-around-window</a>    How I applied the shadow:   shadow-&gt;setColor(c);   shadow-&gt;setDistance(scale);   shadow-&gt;setBlurRadius(blur_radius);    ui-&gt;frame-&gt;setGraphicsEffect(shadow);   @Timusan"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5046503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f13cfc09d00f34a37c5a972dd341ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo Gomes", "link": "https://stackoverflow.com/users/5046503/ricardo-gomes"}, "edited": false, "score": 1, "creation_date": 1435187669, "post_id": 31038502, "comment_id": 50101224, "body": "Setting setGraphicsEffect(NULL) to the line edit does not seem to work. Also getting the text effect is useless because it doesn&#39;t have one.   The way inheritance works here is different. It doesn&#39;t set the same effect to the children, instead Qt backend will detect that the frame have children and will render them with the same effect.."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 31, "user_id": 5046503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f13cfc09d00f34a37c5a972dd341ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo Gomes", "link": "https://stackoverflow.com/users/5046503/ricardo-gomes"}, "edited": false, "score": 0, "creation_date": 1435220594, "post_id": 31038502, "comment_id": 50112349, "body": "@RicardoGomes thanks for the feedback:) I tried to give additional ideas if they are of any help."}, {"owner": {"reputation": 31, "user_id": 5046503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f13cfc09d00f34a37c5a972dd341ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo Gomes", "link": "https://stackoverflow.com/users/5046503/ricardo-gomes"}, "edited": false, "score": 0, "creation_date": 1435235599, "post_id": 31038502, "comment_id": 50121861, "body": "Thanks @RudolfsBundulis for the ideas. As I said before the first idea is impossible. This is what happens when I do that: <a href=\"http://i.imgur.com/ATv8iti.png\" rel=\"nofollow noreferrer\">i.imgur.com/ATv8iti.png</a>  I need that QLineEdit above the frame.. The second ideia might do the trick but I have no clue how to do that, and painter-&gt;device() always returns the same pointer."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 31, "user_id": 5046503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f13cfc09d00f34a37c5a972dd341ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo Gomes", "link": "https://stackoverflow.com/users/5046503/ricardo-gomes"}, "edited": false, "score": 0, "creation_date": 1435236504, "post_id": 31038502, "comment_id": 50122585, "body": "@RicardoGomes - as for the first, well yeah, by default the items will be managed by the layout not to overlap, but i think that by tweaking the geometry of the second one you can actually achieve that they overlap even if they are not parent and child but sadly I&#39;m don&#39;t have a working example. As for the second - glad you tried that out. If the pointer is always the same I assume that the <code>draw()</code> method is only called for the parent widget and then it uses the same <code>QPainter</code> to draw the children without explicitly calling it again (seems a bit weird though). If so I&#39;m sadly out of ideas."}, {"owner": {"reputation": 31, "user_id": 5046503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f13cfc09d00f34a37c5a972dd341ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo Gomes", "link": "https://stackoverflow.com/users/5046503/ricardo-gomes"}, "edited": false, "score": 0, "creation_date": 1435241272, "post_id": 31038502, "comment_id": 50126476, "body": "We found a way to fix it! Adding the QLineEdit to the layout(same as the first idea) did the trick: layout()-&gt;addWidget(ui-&gt;lineEdit);   Thanks again for everything."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 31, "user_id": 5046503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f13cfc09d00f34a37c5a972dd341ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo Gomes", "link": "https://stackoverflow.com/users/5046503/ricardo-gomes"}, "edited": false, "score": 0, "creation_date": 1435242272, "post_id": 31038502, "comment_id": 50127321, "body": "@RicardoGomes and how did you make both widgets overlap? Which layout was it?"}, {"owner": {"reputation": 31, "user_id": 5046503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f13cfc09d00f34a37c5a972dd341ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo Gomes", "link": "https://stackoverflow.com/users/5046503/ricardo-gomes"}, "edited": false, "score": 0, "creation_date": 1435243099, "post_id": 31038502, "comment_id": 50128026, "body": "I didn&#39;t use MainWindow centralWidget layout. Instead we used MainWindow layout and it worked. The only problem is that Qt is printing an warning that I shouldn&#39;t use that layout.."}], "tags": [], "owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "is_accepted": false, "score": 1, "last_activity_date": 1435220568, "last_edit_date": 1435220568, "creation_date": 1435186408, "answer_id": 31038502, "question_id": 31038198, "link": "https://stackoverflow.com/questions/31038198/disable-setgraphicseffect-inheritance-in-qt/31038502#31038502", "title": "Disable setGraphicsEffect inheritance in Qt", "body": "<p>Documentation of <a href=\"http://doc.qt.io/qt-4.8/qgraphicsitem.html#setGraphicsEffect\" rel=\"nofollow\">QGraphicsItem::setGraphicsEffect</a> states that</p>\n\n<blockquote>\n  <p>Note: This function will apply the effect on itself and all its children.</p>\n</blockquote>\n\n<p>thus the behaivor you are expecting is correct. </p>\n\n<p><del>What I'd suggest is overriding the graphics item on the <code>QLineEdit</code> explicitly by calling either <code>setGraphicsEffect(NULL)</code> or by getting the default text effect of the line edit and then setting it back after your custom effect on the frame has been applied. I'm not sure if the line edit has a default effect or not, thus not sure if the NULL approach will do.</del></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>As stated by the OP the proposed way of overriding the existing effect by calling <code>QGraphicsItem::setGraphicsEffect</code> with null does not work. So given that I see 2 further possibilies:</p>\n\n<ul>\n<li>Don't make the <code>QLineEdit</code> a child of the frame (not sure if that is possible, you mentioned that frame cannot be unbound from the window but nothing about frame to line edit relationship constraints).</li>\n<li>Since you already have subclassed the graphics effect with your <code>CustomShadowEffect</code> you could tweak the <code>draw()</code> method to ignore calls with <code>QPainter</code> that belongs to the line edit. What you could do is keep a list of ignored <code>QPaintDevice</code> instances in the effect - <code>QWidget</code> inherits <code>QPaintDevice</code> and you can query the <code>QPaintDevice</code> pointer from the <code>QPainter</code> via <a href=\"http://doc.qt.io/qt-4.8/qpainter.html#device\" rel=\"nofollow\">QPainter::device</a>, so you can simply add the widgets to your internal list and then in the <code>draw</code> method compare the <code>QPaintDevice</code> of the incoming <code>QPainter</code> to the ignored ones.</li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 5046503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f13cfc09d00f34a37c5a972dd341ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo Gomes", "link": "https://stackoverflow.com/users/5046503/ricardo-gomes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1773, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1582523708, "creation_date": 1435184780, "last_edit_date": 1582523708, "question_id": 31038198, "link": "https://stackoverflow.com/questions/31038198/disable-setgraphicseffect-inheritance-in-qt", "title": "Disable setGraphicsEffect inheritance in Qt", "body": "<p>How to disable setGraphicsEffect inheritance to children in Qt?</p>\n\n<p>For example, imagine my project has this hierarchy:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fN5jm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fN5jm.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I apply a shadow with setGraphicsEffect to the frame the line edit will inherit that shadow effect, and I don't want that. This is what I'am getting:</p>\n\n<p><a href=\"https://i.stack.imgur.com/O1y5W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O1y5W.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see, there's a shadow around the letters of the line edit. Any idea how to fix this?</p>\n\n<p>One more thing.. visibly in the image above the MainWindow has some flags like Qt::FramelessWindowHint and Qt::WA_TranslucentBackground so the frame is supposed to be the \"window\", and the frame automatically resizes when I resize the MainWindow so I can't change that hierarchy.</p>\n\n<p>As requested by Timusan here is the code of the shadow:\n<a href=\"https://stackoverflow.com/questions/23718827/qt-shadow-around-window\">Qt: shadow around window</a></p>\n\n<p>To apply it to the frame:  </p>\n\n<pre><code>CustomShadowEffect *shadow = new CustomShadowEffect();    \nshadow-&gt;setColor(c);  \nshadow-&gt;setDistance(scale);  \nshadow-&gt;setBlurRadius(blur_radius);  \nui-&gt;frame-&gt;setGraphicsEffect(shadow);  \n</code></pre>\n\n<p><strong>UPDATE</strong>  </p>\n\n<pre><code>layout()-&gt;addWidget(ui-&gt;lineEdit);  \n</code></pre>\n"}, {"tags": ["c++", "heap-memory", "dynamic-memory-allocation", "variable-length-array"], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1435184877, "creation_date": 1435184877, "answer_id": 31038218, "question_id": 31038177, "link": "https://stackoverflow.com/questions/31038177/why-cant-we-specify-a-variable-size-when-declaring-a-static-array/31038218#31038218", "title": "Why can&#39;t we specify a variable size when declaring a static array?", "body": "<p>Variable length array is an extension supported by certain compilers and it not (yet) in the standard.</p>\n"}], "owner": {"reputation": 524, "user_id": 1582350, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b7ac87a4e596261fd36a6b19388e3821?s=128&d=identicon&r=PG&f=1", "display_name": "Moiz Sajid", "link": "https://stackoverflow.com/users/1582350/moiz-sajid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "closed_date": 1435184894, "answer_count": 1, "score": 0, "last_activity_date": 1435184877, "creation_date": 1435184685, "last_edit_date": 1435184822, "question_id": 31038177, "link": "https://stackoverflow.com/questions/31038177/why-cant-we-specify-a-variable-size-when-declaring-a-static-array", "closed_reason": "Duplicate", "title": "Why can&#39;t we specify a variable size when declaring a static array?", "body": "<p>Through dynamic memory allocation, the following the code works perfectly. </p>\n\n<pre><code>int *ptr;\nint size1;\n\ncin &gt;&gt; size1;\n\nptr = new int[size1];\n</code></pre>\n\n<p>In static memory allocation, I get the following error: array bound is not an integer constant before ']' token</p>\n\n<pre><code>int size2;\ncin &gt;&gt; size2;\nint arr[size2];\n</code></pre>\n\n<p>Why is this so? Why can't we specify a variable size? </p>\n"}, {"tags": ["c++", "qt", "unit-testing"], "comments": [{"owner": {"reputation": 496, "user_id": 1217329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f7025df575dd54e9ed8f88ccb45e27f7?s=128&d=identicon&r=PG", "display_name": "Titandrake", "link": "https://stackoverflow.com/users/1217329/titandrake"}, "edited": false, "score": 0, "creation_date": 1435184512, "post_id": 31038088, "comment_id": 50100231, "body": "I&#39;m not very familiar with C++, but have you looked into the existing C++ mocking libraries? Python&#39;s mock library lets you create mock classes around arbitrary classes, including 3rd party libraries. I&#39;m not sure if C++ is as permissive, but I&#39;d imagine people will try to do so as much as possible.  Googling C++ mock gave me <a href=\"https://code.google.com/p/googlemock/\" rel=\"nofollow noreferrer\">code.google.com/p/googlemock</a>"}, {"owner": {"reputation": 129, "user_id": 2524999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a07f45ca9471278efde164c3ce840cf?s=128&d=identicon&r=PG", "display_name": "Eric D", "link": "https://stackoverflow.com/users/2524999/eric-d"}, "reply_to_user": {"reputation": 496, "user_id": 1217329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f7025df575dd54e9ed8f88ccb45e27f7?s=128&d=identicon&r=PG", "display_name": "Titandrake", "link": "https://stackoverflow.com/users/1217329/titandrake"}, "edited": false, "score": 0, "creation_date": 1435184705, "post_id": 31038088, "comment_id": 50100300, "body": "I looked at Google Mock, but couldn&#39;t find good examples of how to mock existing 3rd party libraries.  I&#39;ll give it another look to see if I missed something..."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1435192949, "post_id": 31038088, "comment_id": 50102561, "body": "As for the fourth option, if you&#39;re always going to be running the unit tests on the same machine you could easily redirect the URLs using a <a href=\"https://en.wikipedia.org/wiki/Hosts_%28file%29\" rel=\"nofollow noreferrer\">hosts file</a> on that machine."}, {"owner": {"reputation": 483, "user_id": 2941910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ffd724c00ec3008f50e3c6b222f0410?s=128&d=identicon&r=PG&f=1", "display_name": "Al.exe", "link": "https://stackoverflow.com/users/2941910/al-exe"}, "edited": false, "score": 0, "creation_date": 1438099158, "post_id": 31038088, "comment_id": 51304587, "body": "Disclaimer I work at Typemock: Typemock Isolator++ mocks third party libraries, non virtual methods, statics... you don&#39;t have to alter your code just for testing. Come check it at <a href=\"http://www.typemock.com/isolatorpp-product-page\" rel=\"nofollow noreferrer\">typemock.com/isolatorpp-product-page</a>"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 2524999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a07f45ca9471278efde164c3ce840cf?s=128&d=identicon&r=PG", "display_name": "Eric D", "link": "https://stackoverflow.com/users/2524999/eric-d"}, "edited": false, "score": 0, "creation_date": 1435693676, "post_id": 31053457, "comment_id": 50304657, "body": "In my case, I was able to just put the helper functions in &quot;MyClass.&quot;  Nevertheless, it was the same concept and it worked beautifully!  It seems like such an obvious solution in retrospect... Thanks!"}], "tags": [], "owner": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "is_accepted": true, "score": 1, "last_activity_date": 1435243012, "creation_date": 1435243012, "answer_id": 31053457, "question_id": 31038088, "link": "https://stackoverflow.com/questions/31038088/unit-testing-highly-dependent-network-dependent-functions-in-qt/31053457#31053457", "title": "Unit Testing Highly Dependent (Network Dependent) Functions in Qt", "body": "<p>I think that the best solution just in use c++ class aggregation. You can create Helper class such as this:</p>\n\n<pre><code>class Helper\n{\n    void function1();\n    void function2();\n    void function3();\n}\n</code></pre>\n\n<p>And agregate this class in MyClass. MyClass.h:</p>\n\n<pre><code>#include &lt;QNetworkAccessManager&gt;\n#include \"Helper.h\"\nclass MyClass\n{\n    void function1();\n    void function2();\n    void function3();\n    Helper helper;\n    QNetworkAccessManager manager; // this is the object used to make network requests\n}\n</code></pre>\n\n<p>MyClass.cpp: </p>\n\n<pre><code>#include \"myclass.h\"\nMyClass::function1()\n{\n    helper.function1();\n    manager.get(\"www.myserver.com\");\n}\n\nMyClass::function2()\n{\n    helper.function2();\n    manager.get(\"www.yourserver.com\");\n}\n\nMyClass::function3()\n{\n    helper.function3();\n}\n</code></pre>\n\n<p>In this case you need to test Helper class.</p>\n"}], "owner": {"reputation": 129, "user_id": 2524999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a07f45ca9471278efde164c3ce840cf?s=128&d=identicon&r=PG", "display_name": "Eric D", "link": "https://stackoverflow.com/users/2524999/eric-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 1, "accepted_answer_id": 31053457, "answer_count": 1, "score": 0, "last_activity_date": 1435243012, "creation_date": 1435184166, "question_id": 31038088, "link": "https://stackoverflow.com/questions/31038088/unit-testing-highly-dependent-network-dependent-functions-in-qt", "title": "Unit Testing Highly Dependent (Network Dependent) Functions in Qt", "body": "<p>I'm trying to write unit tests for a project that I am working on (written in C++ with Qt), but I'm having difficulty since my code largely depends on network responses.  My project contains one main class with three important functions.  The workflow looks something like this:</p>\n\n<pre><code>// myclass.h\n#include &lt;QNetworkAccessManager&gt;\nclass MyClass\n{\n    void function1();\n    void function2();\n    void function3();\n    QNetworkAccessManager manager; // this is the object used to make network requests\n}\n\n// myclass.cpp\n#include \"myclass.h\"\nMyClass::function1()\n{\n    // this function should be called to start the chain of events\n\n    // set up the first request\n    manager.get(\"www.myserver.com\");\n}\n\nMyClass::function2()\n{\n    // this function is called with the response of the request made in function1\n\n    // process the results of the first request\n    // set up the second request\n    manager.get(\"www.yourserver.com\");\n}\n\nMyClass::function3()\n{\n    // this function is called with the results of the second request\n\n    // process the results of the second request\n}\n</code></pre>\n\n<p>I've left out most of the nitty gritty details for clarity, but the code above is a good illustration of how the class is organized.  There is one function within the class that should be called to start the process, and the other functions are called when the network requests finish so that the results of those requests can be processed.</p>\n\n<p>I would like to test each function individually so that I can throw in a lot of different responses and different error situations, to make sure that my code reacts properly in each situation.  The problem is that I don't need or want my functions to actually make any internet requests during these tests.  I've searched online, but haven't found any really good solutions.  Here are the options that I've found:</p>\n\n<ol>\n<li><p>Linker Tricks</p>\n\n<ul>\n<li>The idea here is to create a mock class that is also named QNetworkAccessReply, with a dummy <code>get</code> function that doesn't actually make any network requests.  Then during compile time I link my code to this mock class instead of the one that ships with Qt.</li>\n<li>This idea seems to be the cleanest that I've found as far as not needing to modi my class, but I haven't been able to figure out how to actually pull this off in practice.</li>\n</ul></li>\n<li><p>Preprocessor Directives</p>\n\n<ul>\n<li><p>This idea involves creating a mock object, let's say <code>QNetworkAccessManager_Mock</code>, and defining a macro in one of my test files, something like: <code>#define TESTCASE</code>.  Then within the code that I am trying the test, I would replace an instance of <code>QNetworkAccessManager manager;</code> with:</p>\n\n<pre><code>#ifdef TESTCASE\n    QNetworkAccessManager_Mock manager;\n#else\n    QNetworkAccessManager manager;\n#endif\n</code></pre></li>\n<li><p>This option is relatively easy to implement in small projects, but can get unruly in larger projects where your code would have to be riddled with <code>#ifdef</code> sections.  I don't like the level of modification to my original code that this option involves</p></li>\n</ul></li>\n<li><p>Edit my source files with a script</p>\n\n<ul>\n<li>I could create a simple script that runs through my source files to replace each instance of <code>QNetworkAccessManager</code> with a mock class instead.</li>\n<li>This option allows me to leave my source code untouched, and I don't have to mess with linking properly at compile time, but it seems like a lot of extra overhead that shouldn't be needed.</li>\n</ul></li>\n<li><p>Modify the destination url for each request</p>\n\n<ul>\n<li>I could choose a url for a local server that I know doesn't exist, such as <code>localhost:9000</code>.  In this case, each network request would fail in a predictable way, but it seems like too much of a hack just to get it to work.</li>\n<li>Alternatively, my unit tests could spin up a local server from which I could return some canned responses.  This seems to me like too much overhead just to check how each individual function responds, and it still doesn't let me check how my class responds to errors having to deal with network failures.</li>\n<li>In either case, I would still need a way to modify the url, either using preprocessor directives, bringing me back to the issues with #2 and #3.</li>\n</ul></li>\n<li><p>Just don't write tests.</p>\n\n<ul>\n<li>This option defeats the whole purpose</li>\n</ul></li>\n</ol>\n\n<p>There are plenty of examples that exist for mocking dependencies <strong>if I was the one that wrote the dependent classes</strong>.  There doesn't seem to be any clean and easy solutions, however, for mocking dependent classes that exist within other libraries.  Are the solutions that I outlined above really my only options, or have I overlooked something?  What would you recommend as my best choice?</p>\n"}, {"tags": ["c++", "std", "c++14", "non-member-functions"], "answers": [{"tags": [], "owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "is_accepted": true, "score": 2, "last_activity_date": 1435184337, "creation_date": 1435184337, "answer_id": 31038122, "question_id": 31038061, "link": "https://stackoverflow.com/questions/31038061/support-of-stdcbegin-in-c14/31038122#31038122", "title": "Support of std::cbegin() in C++14", "body": "<p>GCC 4.9's support for C++14 is experimental and incomplete.  But <a href=\"https://gcc.gnu.org/gcc-5/changes.html\" rel=\"nofollow\">here</a>, you can see that</p>\n\n<blockquote>\n  <p>global functions cbegin, cend, rbegin, rend, crbegin, and crend for range access to containers, arrays and initializer lists.</p>\n</blockquote>\n\n<p>were added in GCC 5.1.</p>\n"}, {"comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1435184466, "post_id": 31038126, "comment_id": 50100215, "body": "It was my proposal. Only I did not write it myself because it should be written instead of me by some member of the Committee. :)"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 2, "last_activity_date": 1435184360, "creation_date": 1435184360, "answer_id": 31038126, "question_id": 31038061, "link": "https://stackoverflow.com/questions/31038061/support-of-stdcbegin-in-c14/31038126#31038126", "title": "Support of std::cbegin() in C++14", "body": "<p>Yes, they are in C++14. They were added by a <a href=\"http://wg21.link/lwg2128\" rel=\"nofollow\">library issue</a>, not by a paper, and it looks like libstdc++'s manual page doesn't track library issues.</p>\n\n<p>They are implemented in GCC 5.1. See <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=64656\" rel=\"nofollow\">GCC bug 64656</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 2, "last_activity_date": 1435185651, "last_edit_date": 1435185651, "creation_date": 1435185350, "answer_id": 31038315, "question_id": 31038061, "link": "https://stackoverflow.com/questions/31038061/support-of-stdcbegin-in-c14/31038315#31038315", "title": "Support of std::cbegin() in C++14", "body": "<p>Yes they are, cppreference describes them along <a href=\"http://en.cppreference.com/w/cpp/iterator/begin\" rel=\"nofollow\">begin</a>/<a href=\"http://en.cppreference.com/w/cpp/iterator/end\" rel=\"nofollow\">end</a>.</p>\n\n<p>And the standard defines it in section <em><code>24.7 - Range access</code></em>. I'm not citing it because it's a bunch of template function definitions which agree with the above links.</p>\n\n<p>The draft, which should be very close to the final version (I can't remember the number for the final draft, sorry): <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf\" rel=\"nofollow\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf</a></p>\n\n<p>As a matter of fact, you can play with embedded examples on the cppreference, and change <code>begin</code> and <code>end</code> calls to <code>cbegin</code>/<code>cend</code> and try to run them. <code>gcc 4.9</code> complains, though <code>gcc 5.1</code> already works, as well as <code>clang 3.6</code>. So it's just a matter of compiler support.</p>\n"}], "owner": {"reputation": 976, "user_id": 2548655, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/929PX.jpg?s=128&g=1", "display_name": "Michiel uit het Broek", "link": "https://stackoverflow.com/users/2548655/michiel-uit-het-broek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1034, "favorite_count": 0, "accepted_answer_id": 31038122, "answer_count": 3, "score": 5, "last_activity_date": 1574306708, "creation_date": 1435184061, "last_edit_date": 1574306708, "question_id": 31038061, "link": "https://stackoverflow.com/questions/31038061/support-of-stdcbegin-in-c14", "title": "Support of std::cbegin() in C++14", "body": "<p>Item 13 from Scott Mayers' \"Effective Modern C++\" states to prefer const_iterators over iterators. I agree but I also want to use non-member functions rather than member functions. According to the book there should be a non-member function <code>std::cbegin()</code> and <code>std::cend()</code> in C++14. </p>\n\n<p>To make use of this functions I just installed gcc version 4.9.2 and compiled with the flag <code>-std=c++14</code>. It seems to compile until I try to use <code>std::cbegin()</code>. I start searching for the support for this function but couldn't find anything about it. For example, at <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html\">gnu onlinedocs status</a> the function isn't even mentioned.</p>\n\n<p>My question is, will <code>std::cbegin()</code> and <code>std::cend()</code> really be supported in c++14 or is this a mistake in the book? If it will be a C++14 feature, are there compilers which already support these functions and when will gcc support it?</p>\n\n<p>There are many questions at SO about <code>begin()</code> but these questions are about the member functions or about the constexpr-ness and not about the support of the non-member variant.</p>\n"}, {"tags": ["c++", "list", "pointers", "std", "destructor"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1435184028, "post_id": 31038010, "comment_id": 50100027, "body": "The pointer is destroyed (which is a no-op). The pointee isn&#39;t. (And this is a good example of why you shouldn&#39;t use owning raw pointers - especially containers of them.)"}], "answers": [{"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 4, "last_activity_date": 1435184090, "creation_date": 1435184090, "answer_id": 31038068, "question_id": 31038010, "link": "https://stackoverflow.com/questions/31038010/does-stdlists-erase-member-function-call-the-destructor-for-all-stored-elemen/31038068#31038068", "title": "Does std::list&#39;s erase member function call the destructor for all stored elements?", "body": "<p>When you call the <code>clear()</code> method of the list, it will destroy all of the objects stored inside of the list. In your case, you have a list of <code>demo*</code>s This means that each of the <em>pointers</em> will be destroyed, since the <em>pointers</em> are stored inside the list, but the <em>pointees</em> won't be destroyed because the <em>pointees</em> aren't stored inside the list. In other words, destroying the pointers isn't the same as calling <code>delete</code> on each of those pointers. As a result, it's usually not recommended to store raw pointers in container types if those pointers own the objects they point at, since, as you've just seen, the destructors aren't called automatically.</p>\n\n<p>Now, on the other hand, suppose you have a <code>list&lt;unique_ptr&lt;demo&gt;&gt;</code>. In that case, calling <code>clear()</code> will destroy all the <code>unique_ptr&lt;demo&gt;</code>s in the list. This in turn will deallocate the objects that the <code>unique_ptr</code>s point at, since destroying a <code>unique_ptr</code> also destroys the object it points at. This works because <code>unique_ptr</code> has an idea of ownership and realizes that it needs to destroy the object it points at when it is itself destroyed.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2273, "favorite_count": 0, "accepted_answer_id": 31038068, "answer_count": 1, "score": 3, "last_activity_date": 1451860598, "creation_date": 1435183757, "last_edit_date": 1451860598, "question_id": 31038010, "link": "https://stackoverflow.com/questions/31038010/does-stdlists-erase-member-function-call-the-destructor-for-all-stored-elemen", "title": "Does std::list&#39;s erase member function call the destructor for all stored elements?", "body": "<p>I am debugging one memory issue it has some relation with the <code>std::list::erase</code> method. </p>\n\n<p>While reading the documentation for <code>std::list::erase</code>, I saw <a href=\"http://www.cplusplus.com/reference/list/list/erase/\" rel=\"nofollow\">this statement</a>:</p>\n\n<blockquote>\n  <p>\"This effectively reduces the container size by the number of elements removed, which are destroyed.\"</p>\n</blockquote>\n\n<p>I am having difficulty in understanding this statement. As an example, consider this setup:</p>\n\n<pre><code>class demo {\n\n};\nstd::list&lt;demo *&gt; mylist;\n</code></pre>\n\n<p>Now, suppose I call <code>mylist.erase(iterator of list)</code>. I thought that this would call the destructor for class <code>demo</code>, but it doesn't seem to, which seems to contradict the statement \"which are destroyed.\"</p>\n\n<p>Can you please help me with this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2051, "user_id": 2145920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/asOgc.jpg?s=128&g=1", "display_name": "Dmitry Galchinsky", "link": "https://stackoverflow.com/users/2145920/dmitry-galchinsky"}, "edited": false, "score": 1, "creation_date": 1435186245, "post_id": 31038005, "comment_id": 50100810, "body": "You should add the line number where you have your error. Your mistake is simple: note that your <code>switch</code> is outside the main function, you should move the first <code>}</code> to the bottom of the file."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5022132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad64df5c3d0c2e32d44d16367751fa8?s=128&d=identicon&r=PG&f=1", "display_name": "dallascowboys", "link": "https://stackoverflow.com/users/5022132/dallascowboys"}, "edited": false, "score": 0, "creation_date": 1435184687, "post_id": 31038022, "comment_id": 50100294, "body": "ok thanks I added the brace. But when I run the code after the user enters number of meters it ends. How do I get it to run the function and then output the total for meters in feet?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 21, "user_id": 5022132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad64df5c3d0c2e32d44d16367751fa8?s=128&d=identicon&r=PG&f=1", "display_name": "dallascowboys", "link": "https://stackoverflow.com/users/5022132/dallascowboys"}, "edited": false, "score": 0, "creation_date": 1435184992, "post_id": 31038022, "comment_id": 50100402, "body": "@dallascowboys See my updated post. And why are you named dallascowboys instead of dallascowboy?:)"}, {"owner": {"reputation": 21, "user_id": 5022132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad64df5c3d0c2e32d44d16367751fa8?s=128&d=identicon&r=PG&f=1", "display_name": "dallascowboys", "link": "https://stackoverflow.com/users/5022132/dallascowboys"}, "edited": false, "score": 0, "creation_date": 1435341345, "post_id": 31038022, "comment_id": 50177285, "body": "I have updated my code. I am finished but my do while loop is not working? I want the user to be able to pick from the menu repeatedly options 1-4 and then press 5 to end the program."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1435342086, "last_edit_date": 1435342086, "creation_date": 1435183849, "answer_id": 31038022, "question_id": 31038005, "link": "https://stackoverflow.com/questions/31038005/why-do-i-keep-getting-error-message-a-function-definition-is-not-allowed-here-b/31038022#31038022", "title": "Why do I keep getting error message &quot;a function-definition is not allowed here before &#39;{&#39; token&quot; in C++?", "body": "<p>In fact you defined function <code>main</code> within function <code>meters_infeet</code></p>\n\n<pre><code>double meters_infeet(double meters)\n{\n    double totalmetersinfeet = meters * 3.280839895;\n    return totalmetersinfeet;\n\n\n   int main()\n</code></pre>\n\n<p>You missed the closing brace of function.<code>meters_infeet</code></p>\n\n<p>It seems that this closing brace</p>\n\n<pre><code>  cin &gt;&gt; choice;\n }\n</code></pre>\n\n<p>is the closing brace that has to be after the return statement of <code>meters_infeet</code> and before <code>main</code>.</p>\n\n<p>It gets lost in the program.:)</p>\n\n<p>And in this code snippet</p>\n\n<pre><code> switch (choice)\n{\ncase 1:\ncout &lt;&lt; \"Enter Meters\" &lt;&lt; endl;\ncin &gt;&gt; meters;\ndouble meters_infeet(double meters);\nbreak;\n}\n</code></pre>\n\n<p>statement</p>\n\n<pre><code>double meters_infeet(double meters);\n</code></pre>\n\n<p>is a function declaration.\nI think you mean something like</p>\n\n<pre><code>double feets = meters_infeet( meters );\n</code></pre>\n\n<p><strong>EDIT:</strong> It is a bad idea to change the code in the question when the original question before updating was already answered. Because in this case readers will not see a relation between the question and the answers.</p>\n\n<p>First of all these functions do not make sense</p>\n\n<pre><code> double area_infeet(double length_inmeters, double width_inmeters){\n double totalareainfeet = (length_inmeters * 3.280839895) \nreturn totalareainfeet;\n }\n double area_inmeters(double length_infeet, double width_infeet){\n double totalareainmeters = (length_infeet / 3.280839895) \nreturn totalareainmeters;\n }\n</code></pre>\n\n<p>Their second parameters are not used.</p>\n\n<p>The switch statement should be inside the do-while statement</p>\n\n<pre><code>do {\n cout &lt;&lt; \"English-Metric Junior\" &lt;&lt; endl;\n cout &lt;&lt; \"1)Convert from meters to feet\" &lt;&lt; endl;\n cout &lt;&lt; \"2) Convert from feet to meters\" &lt;&lt; endl;\n cout &lt;&lt; \"3) Compute the area of a rectangle in square feet given width\n cout &lt;&lt; \"4) Compute the area of a rectangle in  meters given the length\n cout &lt;&lt; \"5) Quit the Program\" &lt;&lt; endl;\n cout &lt;&lt; \"Please enter a number (1-5)\" &lt;&lt; endl;\n cin &gt;&gt; choice;\n\n switch (choice)\n {\n   //...\n }\n\n} while( choice != 5);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5022132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad64df5c3d0c2e32d44d16367751fa8?s=128&d=identicon&r=PG&f=1", "display_name": "dallascowboys", "link": "https://stackoverflow.com/users/5022132/dallascowboys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435342086, "creation_date": 1435183728, "last_edit_date": 1435341197, "question_id": 31038005, "link": "https://stackoverflow.com/questions/31038005/why-do-i-keep-getting-error-message-a-function-definition-is-not-allowed-here-b", "title": "Why do I keep getting error message &quot;a function-definition is not allowed here before &#39;{&#39; token&quot; in C++?", "body": "<p>For a project I have to create a simple, menu-driven conversion software package that the user enters a number and converts among other things, meters to feet, feet to meters, etc. I have to use a function for each conversion. I have started with the meters to feet function. But when I  compile it I get the error message \"a function-definition is not allowed here before '{' token.\" How do I fix this? I am also a beginner.</p>\n\n<pre><code> #include &lt;iostream&gt;\n\nusing namespace std;\n\ndouble meters_infeet(double meters){\ndouble totalmetersinfeet = (meters * 3.280839895);\nreturn totalmetersinfeet;\n}\ndouble feet_inmeters(double feet){\n double totalfeetinmeters = (feet / 3.280839895);\nreturn totalfeetinmeters;\n}   \n double area_infeet(double length_inmeters, double width_inmeters){\n double totalareainfeet = (length_inmeters * 3.280839895) \nreturn totalareainfeet;\n }\n double area_inmeters(double length_infeet, double width_infeet){\n double totalareainmeters = (length_infeet / 3.280839895) \nreturn totalareainmeters;\n }\n\n\n\nint main()\n {\n int choice;\n double meters;\n double feet;\n double length_inmeters;\n double width_inmeters;\n double length_infeet;\n double  width_infeet;\n\n do{\n\n cout &lt;&lt; \"English-Metric Junior\" &lt;&lt; endl;\n cout &lt;&lt; \"1)Convert from meters to feet\" &lt;&lt; endl;\n cout &lt;&lt; \"2) Convert from feet to meters\" &lt;&lt; endl;\n cout &lt;&lt; \"3) Compute the area of a rectangle in square feet given width\n cout &lt;&lt; \"4) Compute the area of a rectangle in  meters given the length\n cout &lt;&lt; \"5) Quit the Program\" &lt;&lt; endl;\n cout &lt;&lt; \"Please enter a number (1-5)\" &lt;&lt; endl;\n cin &gt;&gt; choice;\n }while(choice &gt; 5);\n\n\n\n switch (choice)\n{\ncase 1:\ncout &lt;&lt; \"Enter Meters\" &lt;&lt; endl;\ncin &gt;&gt; meters;\ncout &lt;&lt; meters_infeet(meters)&lt;&lt; \"Feet \" &lt;&lt; endl;\nbreak;\ncase 2:\ncout &lt;&lt; \"Enter Feet\" &lt;&lt; endl;\ncin &gt;&gt; feet;\ncout &lt;&lt; feet_inmeters(feet)&lt;&lt; \"Meters \" &lt;&lt; endl;\nbreak;\ncase 3:\ncout &lt;&lt; \"Enter length in meters\" &lt;&lt; endl;\ncin &gt;&gt; length_inmeters;\ncout &lt;&lt; \"Enter width in meters\" &lt;&lt; endl;\n cin &gt;&gt; width_inmeters;\ncout &lt;&lt; area_infeet( length_inmeters, width_inmeters) &lt;&lt; endl;\nbreak;\ncase 4:\ncout &lt;&lt; \"Enter length in feet\" &lt;&lt; endl;\ncin &gt;&gt; length_infeet;\ncout &lt;&lt; \"Enter width in feet\" &lt;&lt; endl;\ncin &gt;&gt; width_infeet;\ncout &lt;&lt; area_inmeters(length_infeet, width_infeet)&lt;&lt; endl;\nbreak;\n</code></pre>\n"}, {"tags": ["c++", "compiler-construction", "compiler-errors", "object-initializers"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1435183861, "post_id": 31037994, "comment_id": 50099964, "body": "Go back to your book and read about the syntax of <code>for</code> loops."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1435183913, "post_id": 31037994, "comment_id": 50099983, "body": "Don&#39;t use the comma operator in <code>for</code> loops. Check your course notes."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5045928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5976d2ead53fc2e087e928d5b005c6?s=128&d=identicon&r=PG&f=1", "display_name": "Onpetcow", "link": "https://stackoverflow.com/users/5045928/onpetcow"}, "edited": false, "score": 0, "creation_date": 1435184593, "post_id": 31038054, "comment_id": 50100255, "body": "Thanks! That helps a lot."}], "tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 0, "last_activity_date": 1435184021, "creation_date": 1435184021, "answer_id": 31038054, "question_id": 31037994, "link": "https://stackoverflow.com/questions/31037994/compiler-errors-including-initializer-before-token/31038054#31038054", "title": "Compiler Errors including initializer before &#39;&lt;&#39; token", "body": "<p>There are several issues here:</p>\n\n<ol>\n<li>The parts of a <code>for</code> loop should be delimited by a semi-colon (<code>;</code>), not a comma (<code>,</code>)</li>\n<li>In the first <code>for</code> loop, <code>i + 2</code> is not stored anywhere. Assuming you meant to add <code>2</code> to <code>i</code>'s value, you should use <code>i+=2</code>.</li>\n</ol>\n\n<p>So, in conclusion, your <code>for</code> loops should look like:</p>\n\n<pre><code>for (int i = 100; i &lt; smallestMultiple; i+=2)\n{\n    for (int j = 20; j &gt;=10; j--)\n    {\n        // rest of the code\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5045928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5976d2ead53fc2e087e928d5b005c6?s=128&d=identicon&r=PG&f=1", "display_name": "Onpetcow", "link": "https://stackoverflow.com/users/5045928/onpetcow"}, "edited": false, "score": 0, "creation_date": 1435184579, "post_id": 31038117, "comment_id": 50100247, "body": "Awesome thanks! I knew it was something simple that I was missing."}], "tags": [], "owner": {"reputation": 41, "user_id": 5039786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zVi7.jpg?s=128&g=1", "display_name": "Miguel Hernando", "link": "https://stackoverflow.com/users/5039786/miguel-hernando"}, "is_accepted": true, "score": 0, "last_activity_date": 1435184316, "creation_date": 1435184316, "answer_id": 31038117, "question_id": 31037994, "link": "https://stackoverflow.com/questions/31037994/compiler-errors-including-initializer-before-token/31038117#31038117", "title": "Compiler Errors including initializer before &#39;&lt;&#39; token", "body": "<p>The sintaxis of for uses ; to differentiate the three expressions (initialization, condition, and update) therefore you should write:</p>\n\n<pre><code>for (int i = 100; i &lt; smallestMultiple; i+=2)\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>for (int i = 100, i &lt; smallestMultiple, i+2)\n</code></pre>\n\n<p>if you wanted to iterate i from 100 to smallestMultiple with increments of 2</p>\n"}], "owner": {"reputation": 33, "user_id": 5045928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5976d2ead53fc2e087e928d5b005c6?s=128&d=identicon&r=PG&f=1", "display_name": "Onpetcow", "link": "https://stackoverflow.com/users/5045928/onpetcow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 31038117, "answer_count": 2, "score": -1, "last_activity_date": 1435184316, "creation_date": 1435183670, "last_edit_date": 1435183784, "question_id": 31037994, "link": "https://stackoverflow.com/questions/31037994/compiler-errors-including-initializer-before-token", "title": "Compiler Errors including initializer before &#39;&lt;&#39; token", "body": "<p>I am writing this piece of code for one of the Project Euler puzzles to practice coding and I am having trouble with what I think are a couple syntax errors. What am I doing wrong here?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    int smallestMultiple = 10000;\n    int sum = 1;\n\n    for (int i = 100, i &lt; smallestMultiple, i+2)\n    {\n        for (int j = 20, j &gt;=10, j--)\n        {\n            sum = sum + (i % j);\n\n        }\n\n        if (sum == 1)\n        {\n            smallestMultiple = i;\n        }\n\n        else \n        {\n            sum = 1;\n        }\n    }\n\n    cout&lt;&lt; \"The smallest number easily divisible by the numbers 1 to 20 is \" &lt;&lt; smallestMultiple &lt;&lt; \".\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I received the below errors when I tried to compile this code. What type of syntax am I missing? </p>\n\n<pre><code>smallMultiple.cpp:6: error: expected \u2018;\u2019 before \u2018int\u2019\nsmallMultiple.cpp: In function \u2018int main()\u2019: \nsmallMultiple.cpp:12: error: expected initializer before \u2018&lt;\u2019 token\nsmallMultiple.cpp:32: error: expected primary-expression at end of input\nsmallMultiple.cpp:32: error: expected \u2018;\u2019 at end of input\nsmallMultiple.cpp:32: error: expected primary-expression at end of input\nsmallMultiple.cpp:32: error: expected \u2018)\u2019 at end of input\nsmallMultiple.cpp:32: error: expected statement at end of input\nsmallMultiple.cpp:32: error: expected \u2018}\u2019 at end of input\n</code></pre>\n"}, {"tags": ["c++", "gcc", "mingw", "gcc-warning"], "comments": [{"owner": {"reputation": 1811, "user_id": 2595767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLCvI.png?s=128&g=1", "display_name": "Keith Marshall", "link": "https://stackoverflow.com/users/2595767/keith-marshall"}, "edited": false, "score": 0, "creation_date": 1435311081, "post_id": 31037944, "comment_id": 50158509, "body": "Please tag correctly. There is no such thing as <code>MinGW 4.9.2</code>, (and <code>MinGW-5.1.0</code> is a long defunct installer for <code>MinGW GCC-3.4.5</code>). Perhaps you mean <code>mingw-w64 GCC-4.9.2</code> and <code>mingw-w64 GCC-5.1.0</code>, but neither is <code>MinGW</code>."}, {"owner": {"reputation": 209, "user_id": 773212, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8139af4e3e30ec762d5631694132ac01?s=128&d=identicon&r=PG", "display_name": "Renaud", "link": "https://stackoverflow.com/users/773212/renaud"}, "edited": false, "score": 0, "creation_date": 1443366576, "post_id": 31037944, "comment_id": 53455407, "body": "I have the same problem with gcc version 5.2.0 (x86_64-posix-seh-rev0, built by MinGW-W64 project) and boost/asio. However th following code works as it should  (#pragma GCC diagnostic push #pragma GCC diagnostic ignored &quot;-Wunused-variable&quot; void f() {     int x(0); } #pragma GCC diagnostic pop)"}], "answers": [{"tags": [], "owner": {"reputation": 8293, "user_id": 3460805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c7Zi7.jpg?s=128&g=1", "display_name": "Chnossos", "link": "https://stackoverflow.com/users/3460805/chnossos"}, "is_accepted": false, "score": 1, "last_activity_date": 1446454455, "creation_date": 1446454455, "answer_id": 33473845, "question_id": 31037944, "link": "https://stackoverflow.com/questions/31037944/mingw-5-1-0-no-longer-seems-to-suppress-warnings/33473845#33473845", "title": "MinGW 5.1.0 no longer seems to suppress warnings", "body": "<p>Looking at the error:</p>\n\n<pre><code>In file included from C:/C++/MinGW-w64/5.1.0/i686-w64-mingw32/include/c++/memory:81:0,\n             from ../common/include/boost/asio/detail/addressof.hpp:21,\n             from ../common/include/boost/asio/detail/handler_alloc_helpers.hpp:19,\n             from ../common/include/boost/asio/detail/bind_handler.hpp:19,\n             from ../common/include/boost/asio/detail/wrapped_handler.hpp:18,\n             from ../common/include/boost/asio/io_service.hpp:24,\n             [...]:\nboost/smart_ptr/shared_ptr.hpp:549:38: warning: 'template&lt;class&gt; class std::auto_ptr' is deprecated [-Wdeprecated-declarations]\n     this_type( static_cast&lt; std::auto_ptr&lt;Y&gt; &amp;&amp; &gt;( r ) ).swap( *this );\n                                  ^\n</code></pre>\n\n<p>You can see the compiler flag is no longer <code>-Wunused-variable</code> but now <code>-Wdeprecated-declarations</code>.\nReflecting that in the #pragma made it work again for me.</p>\n"}], "owner": {"reputation": 89, "user_id": 4394486, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f4f76c825891118d96e572f62ca7ef1f?s=128&d=identicon&r=PG&f=1", "display_name": "Merrill Cornish", "link": "https://stackoverflow.com/users/4394486/merrill-cornish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446454455, "creation_date": 1435183439, "last_edit_date": 1435183884, "question_id": 31037944, "link": "https://stackoverflow.com/questions/31037944/mingw-5-1-0-no-longer-seems-to-suppress-warnings", "title": "MinGW 5.1.0 no longer seems to suppress warnings", "body": "<p>I am running Windows 7.1 64-bit, Boost 1.58.0, and (recently) MinGW 5.1.0 64-bit.</p>\n\n<p>When I was previously running MinGW 4.9.2, I used the following</p>\n\n<pre><code>#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wunused-variable\"\n#include \"boost/asio/ip/host_name.hpp\" // for host_name()\n#pragma GCC diagnostic pop\n</code></pre>\n\n<p>to suppress unnecessary warnings, and it worked--most of the time.  If there was a legitimate error in the code, these suppressed warning showed up anyway--but I can live with that.</p>\n\n<p>Yesterday, I upgraded to MinGW 5.1.0 64-bit.  The pragmas shown above no longer seem to be suppressing warnings.  I couldn't find anything on Google that would suggest anything has changed.</p>\n\n<p>I really would like to have this feature working again since I'm using Boost Test that has dozens of \"std::auto_ptr is deprecated\" warnings.</p>\n"}, {"tags": ["c++", "linux", "boost", "linker", "raspberry-pi"], "comments": [{"owner": {"reputation": 205, "user_id": 4129764, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-1wptx7ysxwE/AAAAAAAAAAI/AAAAAAAAEgQ/hBO1oxNH8jg/photo.jpg?sz=128", "display_name": "Johan Engblom", "link": "https://stackoverflow.com/users/4129764/johan-engblom"}, "edited": false, "score": 0, "creation_date": 1435183781, "post_id": 31037807, "comment_id": 50099931, "body": "maybe I&#39;m wrong here but isn&#39;t it <code>-lboost_system</code> you should link to?"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 205, "user_id": 4129764, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-1wptx7ysxwE/AAAAAAAAAAI/AAAAAAAAEgQ/hBO1oxNH8jg/photo.jpg?sz=128", "display_name": "Johan Engblom", "link": "https://stackoverflow.com/users/4129764/johan-engblom"}, "edited": false, "score": 0, "creation_date": 1435184495, "post_id": 31037807, "comment_id": 50100221, "body": "normally, yes, but I use a custom built (stripped down and name-magled) version that compiles as libboost.a. I guess I didn&#39;t make that very clear -- srry. I need to try to link against regular old boost, but I suspect it won&#39;t help."}, {"owner": {"reputation": 205, "user_id": 4129764, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-1wptx7ysxwE/AAAAAAAAAAI/AAAAAAAAEgQ/hBO1oxNH8jg/photo.jpg?sz=128", "display_name": "Johan Engblom", "link": "https://stackoverflow.com/users/4129764/johan-engblom"}, "edited": false, "score": 0, "creation_date": 1435185338, "post_id": 31037807, "comment_id": 50100535, "body": "can you put a <code>-L &#47;dir where libboost is at&#47;</code> ? How are you cross-compiling or are you compiling on target?"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 205, "user_id": 4129764, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-1wptx7ysxwE/AAAAAAAAAAI/AAAAAAAAEgQ/hBO1oxNH8jg/photo.jpg?sz=128", "display_name": "Johan Engblom", "link": "https://stackoverflow.com/users/4129764/johan-engblom"}, "edited": false, "score": 0, "creation_date": 1435185574, "post_id": 31037807, "comment_id": 50100611, "body": "I have the _l/dir where libboost is at/ already in the makefile. I have been building the application on target as it is very small, but I initially built my libraries using arm-bcm2708-linux-gnueabi-g++ on a Ubuntu desktop. I tried building the library on target as well, same result. I am now trying to build the application via cross-compiler and see what happens. I will start a build conventional system boost on target right before I go home tonight so I can try that too -- it takes about 4 hours apparently."}, {"owner": {"reputation": 205, "user_id": 4129764, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-1wptx7ysxwE/AAAAAAAAAAI/AAAAAAAAEgQ/hBO1oxNH8jg/photo.jpg?sz=128", "display_name": "Johan Engblom", "link": "https://stackoverflow.com/users/4129764/johan-engblom"}, "edited": false, "score": 0, "creation_date": 1435185913, "post_id": 31037807, "comment_id": 50100722, "body": "Have you tried with the raspian image, you could do a <code>sudo apt-get install boost</code> maybe you won&#39;t have to wait those 4 hours. There is a yocto meta-layer for raspeberry-pi that you also could use to make sure that the libraries are cross-compiled correctly. In general you shouldn&#39;t compile on target as it usually a quite time consuming task. BTW. What&#39;s your constraints on the system, do you have limited SD card space?"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 205, "user_id": 4129764, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-1wptx7ysxwE/AAAAAAAAAAI/AAAAAAAAEgQ/hBO1oxNH8jg/photo.jpg?sz=128", "display_name": "Johan Engblom", "link": "https://stackoverflow.com/users/4129764/johan-engblom"}, "edited": false, "score": 0, "creation_date": 1435186134, "post_id": 31037807, "comment_id": 50100781, "body": "Yeah... I don&#39;t think you can get boost from aptitude on pi. Terrible shame. There isn&#39;t really a constraint on the system. The boost dance is done to avoid conflicts with 3rd party apps that use my library. This isn&#39;t really necessary for the pi, but reconfiguring the build setup is nontrivial. In general, I believe my cross-compiling is working correctly (at least I have that going for me...)"}, {"owner": {"reputation": 205, "user_id": 4129764, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-1wptx7ysxwE/AAAAAAAAAAI/AAAAAAAAEgQ/hBO1oxNH8jg/photo.jpg?sz=128", "display_name": "Johan Engblom", "link": "https://stackoverflow.com/users/4129764/johan-engblom"}, "edited": false, "score": 0, "creation_date": 1435213733, "post_id": 31037807, "comment_id": 50108194, "body": "I got a little bit afraid there for a moment but it seems that boost is available, this is from my Raspberry Pi2: <code>sudo apt-get install libboost-system-dev Reading package lists... Done Building dependency tree        Reading state information... Done The following extra packages will be installed:   libboost-system1.49-dev libboost-system1.49.0 libboost1.49-dev</code>"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 205, "user_id": 4129764, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-1wptx7ysxwE/AAAAAAAAAAI/AAAAAAAAEgQ/hBO1oxNH8jg/photo.jpg?sz=128", "display_name": "Johan Engblom", "link": "https://stackoverflow.com/users/4129764/johan-engblom"}, "edited": false, "score": 0, "creation_date": 1435268594, "post_id": 31037807, "comment_id": 50143099, "body": "Thanks for all your comments! I figured it out and post the answer."}], "answers": [{"tags": [], "owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "is_accepted": false, "score": 0, "last_activity_date": 1435268793, "creation_date": 1435268793, "answer_id": 31061356, "question_id": 31037807, "link": "https://stackoverflow.com/questions/31037807/dynamic-library-using-boost-has-undefined-references-when-built-on-arm-architect/31061356#31061356", "title": "dynamic library using boost has undefined references when built on ARM architecture", "body": "<p>Solved. In the end, the trouble stemmed from the <code>-frepo</code> flag. This was necessary to compile a file called <code>legacy_abi.cpp</code> that is part of my library to allow third party developers using older and more exotic OSs/compilers. This isn't needed on the Pi, so I just removed it from the offending file from the build, dropped the <code>-frepo</code> flag and happy happy. </p>\n\n<p>One final note, aptitude (for Pi, anyway) only supplies boost up to 1.49 (as far as I can tell). My project requires boost >= 1.50. This is an inherited project, so I'm still discovering all its little idiosyncracies.</p>\n"}], "owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435268793, "creation_date": 1435182884, "last_edit_date": 1435184778, "question_id": 31037807, "link": "https://stackoverflow.com/questions/31037807/dynamic-library-using-boost-has-undefined-references-when-built-on-arm-architect", "title": "dynamic library using boost has undefined references when built on ARM architecture", "body": "<p>I have a C++ based dynamic library that I have built for the big 3 OSs that relies heavily on boost. Currently, I am compiling it for the raspberry pi. It took me a while to find the magic words to get the library to even build (-frepo as a compiler flag was the key, but I confess that I am not certain why this is the case).</p>\n\n<p>Now, when I try to link to the library, I get an 'undefined reference' error to every boost call that my library makes, i.e.:</p>\n\n<pre><code>//`libmylib.so`: undeifined reference to `boost::shared_ptr&lt;boost::detail::thread_data_base&gt;::shared_ptr()'\n</code></pre>\n\n<p>When I build <code>libmylib.so</code>, I also build a custom version of boost as <code>libboost.a</code>. This all compiles and links fine on other OSs and non-ARM architectures so I tried putting <code>-lboost</code> as one of the flags, but I still get the same plethora of undefined reference errors form <code>libmylib.so</code>. </p>\n\n<p>Needless to say, all my paths are correct.</p>\n\n<p>It seems like linking behaves a bit differently on the raspberry pi than it does on other linux systems. For example, I built a static library (<code>libmythread.a</code>) that uses <code>libpthread</code>. When I link to that <code>libmythread.a</code>, I also get undefined reference errors unless I also use <code>-lpthread</code> in the build recipe. On my Thinkpad running Fedora, I would never have to do this since I included <code>-lpthread</code> in the compilation of the static library <code>libmythread.a</code>. </p>\n\n<p>I would love to find a tutorial or guide that explains these discrepancies. I would also love to overcome them!</p>\n\n<p>I also tried the same build on a conventional linux machine and everything linked fine, no problem. At least I know that my build process is OK. This does open up the possibility, though, that the <code>-frepo</code> flag is doing something funny that I don't understand and that this could be the root of the problem. </p>\n"}, {"tags": ["c++", "language-lawyer"], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1435183561, "post_id": 31037955, "comment_id": 50099853, "body": "Extended integer types must still obey all the core language rules for integer types."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1435183689, "post_id": 31037955, "comment_id": 50099901, "body": "That does not state if those extended types are allowed to be used to implement the types from <code>&lt;cstdint&gt;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1435183748, "post_id": 31037955, "comment_id": 50099916, "body": "@BaummitAugen It does. The types in <code>&lt;cstdint&gt;</code> are required to be signed or unsigned integer types, and gnasher729&#39;s quote shows how the standard defines &quot;signed integer type&quot;. Showing that &quot;signed integer type&quot; allows for &quot;extended signed integer type&quot; answers your question, does it not?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1435183852, "post_id": 31037955, "comment_id": 50099960, "body": "@hvd Well we  might have an answer if we combine your comment (plus some standard quote) and the above answer. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1435183938, "post_id": 31037955, "comment_id": 50099990, "body": "@BaummitAugen I see your point, the answer could be clearer. I&#39;m perfectly okay with it if gnasher729 wants to incorporate my comment into the answer, preferably also elaborating a bit more. :)"}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 1, "last_activity_date": 1435183487, "creation_date": 1435183487, "answer_id": 31037955, "question_id": 31037764, "link": "https://stackoverflow.com/questions/31037764/are-the-fixed-width-integer-types-guaranteed-to-be-typedefs-for-the-standard-bui/31037955#31037955", "title": "Are the fixed width integer types guaranteed to be typedefs for the standard built in types?", "body": "<p>From the C++ standard: \"There may also be implementation-defined extended signed integer types. The standard and extended signed integer types are collectively called signed integer types. \". (I think there is a similar line about extended unsigned integer types) Nothing is said how you would use these extended integer types, they are obviously non-portable and implementation defined. </p>\n\n<p>However, int16_t etc. can be typedefs for extended integer types. </p>\n"}, {"comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1435188642, "post_id": 31037977, "comment_id": 50101496, "body": "Seems to be the strongest proof here, I hope it is also correct (and it is as far as I can see). I will check again tomorrow, if some language lawyer comes along to disprove your answer."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 2, "last_activity_date": 1435183625, "creation_date": 1435183625, "answer_id": 31037977, "question_id": 31037764, "link": "https://stackoverflow.com/questions/31037764/are-the-fixed-width-integer-types-guaranteed-to-be-typedefs-for-the-standard-bui/31037977#31037977", "title": "Are the fixed width integer types guaranteed to be typedefs for the standard built in types?", "body": "<p>I have a draft version of the C99 spec in front of me and a draft of the C++14 spec as well. Since these are drafts, this information might be incorrect, but I believe that the wording is the same in the final version.</p>\n\n<p>In the C++14 spec, &sect;18.4.1 has this to say about <code>&lt;cstdint&gt;</code>:</p>\n\n<pre><code>namespace std {\n   typedef signed-integer-type int8_t; // optional\n   typedef signed-integer-type int16_t; // optional\n   typedef signed-integer-type int32_t; // optional\n   typedef signed-integer-type int64_t; // optional\n\n   [ etc. ]\n}\n</code></pre>\n\n<p>It then says</p>\n\n<blockquote>\n  <p>The header defines all functions, types, and macros the same as 7.18 in the C standard.</p>\n</blockquote>\n\n<p>I went to the draft C99 standard, &sect;7.18, and saw nothing that required the types defined to actually be aliases for built-in types like <code>int</code>, <code>long int</code>, etc. It just said that if these types exist, they have to meet certain constraints about their ranges, sizes, and memory layouts.</p>\n\n<p>Overall, I strongly suspect that the answer is \"no,\" but if I'm mistaken, I'm interested to see where I misread the spec. :-)</p>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1435184144, "last_edit_date": 1435184144, "creation_date": 1435183680, "answer_id": 31037997, "question_id": 31037764, "link": "https://stackoverflow.com/questions/31037764/are-the-fixed-width-integer-types-guaranteed-to-be-typedefs-for-the-standard-bui/31037997#31037997", "title": "Are the fixed width integer types guaranteed to be typedefs for the standard built in types?", "body": "<p>These are specified by the C standard (and incorporated by reference by the C++ standard), which requires each to be a typedef for a <em>signed integer type</em> or <em>unsigned integer type</em>, as the case may be.</p>\n\n<p><em>signed integer type</em> is in turn defined by the core language to consist of the <em>standard signed integer types</em> (which are <code>signed char</code>, <code>short int</code>, <code>int</code>, <code>long int</code> and <code>long long int</code>) and any implementation-defined <em>extended signed integer types</em>.</p>\n\n<p>Similarly, <em>unsigned integer type</em> is defined by the core language to consist of the <em>standard unsigned integer types</em> (which are <code>unsigned char</code>, <code>unsigned short int</code>, <code>unsigned int</code>, <code>unsigned long int</code> and <code>unsigned long long int</code>) and any implementation-defined <em>extended unsigned integer types</em> corresponding to the extended signed integer types.</p>\n\n<p>In short, each of those typedefs may be one of the usual built-in types or an implementation-defined extended integer type. Most compilers do not support extended integer types, so on those compilers they must be built-in types.</p>\n"}, {"comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1435185119, "post_id": 31038099, "comment_id": 50100444, "body": "But that does not proof that an implementation that does not use two&#39;s complement is actually allowed to provide those optional types (in C++), doesn&#39;t it?"}, {"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1435187423, "post_id": 31038099, "comment_id": 50101152, "body": "@BaummitAugen the implementation is not prohibited from providing these optional types in any case, and in case if the standard types are not two&#39;s complement, <code>intN_t</code> types will certainly not be typedefs for standard types."}], "tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": false, "score": 4, "last_activity_date": 1435184194, "creation_date": 1435184194, "answer_id": 31038099, "question_id": 31037764, "link": "https://stackoverflow.com/questions/31037764/are-the-fixed-width-integer-types-guaranteed-to-be-typedefs-for-the-standard-bui/31038099#31038099", "title": "Are the fixed width integer types guaranteed to be typedefs for the standard built in types?", "body": "<p>No, at least not for types <code>intN_t</code>. These types are guaranteed to have two\u2019s complement representation (as per C99 7.18.1.1 which C++11 and C++14 reference). And standard integer types don't have to be two's complement.</p>\n\n<p>C11 also has important change over C99 (which is actually just bugfix), emphasizing the point above:</p>\n\n<p>7.20.1.1/3:</p>\n\n<blockquote>\n  <p>However, if an implementation provides integer types with\n  widths of 8, 16, 32, or 64 bits, no padding bits, <strong>and (for the signed types) that have a\n  two\u2019s complement representation</strong>, it shall define the corresponding typedef names.</p>\n</blockquote>\n"}], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "accepted_answer_id": 31037997, "answer_count": 4, "score": 8, "last_activity_date": 1435184194, "creation_date": 1435182704, "last_edit_date": 1435183082, "question_id": 31037764, "link": "https://stackoverflow.com/questions/31037764/are-the-fixed-width-integer-types-guaranteed-to-be-typedefs-for-the-standard-bui", "title": "Are the fixed width integer types guaranteed to be typedefs for the standard built in types?", "body": "<p>Are the types from <code>&lt;cstdint&gt;</code> (like e.g. <code>int16_t</code>, <code>uint_fast64_t</code>, <code>int_least8_t</code>) guaranteed to be <code>typedef</code>s for one of the built in types like <code>short</code>, <code>unsigned long</code> etc.?</p>\n\n<p>Or is an implementation allowed to use types that are non of the usual built in ones to implement the fixed width types?</p>\n"}, {"tags": ["c++", "templates", "stl", "containers", "allocator"], "owner": {"reputation": 1494, "user_id": 266378, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1Gjli.jpg?s=128&g=1", "display_name": "Niels Lohmann", "link": "https://stackoverflow.com/users/266378/niels-lohmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435181981, "creation_date": 1435181981, "question_id": 31037562, "link": "https://stackoverflow.com/questions/31037562/class-with-many-stl-template-parameters-use-one-allocator-or-several", "title": "Class with many STL template parameters - use one allocator or several?", "body": "<p>I am writing a JSON class for C++11, see <a href=\"http://github.com/nlohmann/json\" rel=\"nofollow\">http://github.com/nlohmann/json</a>. My central data structure is a class wrapping the JSON value types (null, array, object, string, bool, number) in a union and offering it in via a nice C++ and STL-like interface. The types for the values can be set via template parameters and default to <code>std::vector</code> for arrays, <code>std::map</code> for objects, <code>std::string</code> for strings, <code>bool</code> for booleans, <code>int64_t</code> for integer numbers, and <code>double</code> for floating-type numbers.</p>\n\n<p>To support the concept of an <a href=\"http://en.cppreference.com/w/cpp/concept/AllocatorAwareContainer\" rel=\"nofollow\">AllocatorAwareContainer</a>, I also allowed to pass an allocator type which defaults to <code>std::allocator</code>. As the array, object, and string types are stored with pointers in my union, I use this allocator to allocate memory for these types.</p>\n\n<p>So far, so good (see <a href=\"https://github.com/nlohmann/json/blob/master/src/json.hpp\" rel=\"nofollow\">https://github.com/nlohmann/json/blob/master/src/json.hpp</a> for the complete source code)...</p>\n\n<p>Now my question is whether it makes sense to pass an allocator which is then implicitly used for the types array, object, and string. Alternatively, I could customize the allocator by passing an allocator with the concrete type <code>std::map</code>, <code>std::vector</code>, and <code>std::string</code>. Then, however, I need to be able to specify this specialization, because currently, my class uses the following definition for the templates:</p>\n\n<pre><code>template &lt;\n    template&lt;typename U, typename V, typename... Args&gt; class ObjectType = std::map,\n    template&lt;typename U, typename... Args&gt; class ArrayType = std::vector,\n    class StringType = std::string,\n    class BooleanType = bool,\n    class NumberIntegerType = int64_t,\n    class NumberFloatType = double,\n    template&lt;typename U&gt; class AllocatorType = std::allocator\n    &gt;\nclass basic_json\n</code></pre>\n\n<p>The problem is, that <code>ArrayType</code> should be a <code>std::vector&lt;basic_json&gt;</code>, but the concrete type of <code>basic_json</code> is yet to be defined. Even worse, <code>ObjectType</code> should be a mapping from <code>StringType</code> to <code>basic_json</code>. The code shown here (and completely found here <a href=\"https://github.com/nlohmann/json/blob/master/src/json.hpp\" rel=\"nofollow\">https://github.com/nlohmann/json/blob/master/src/json.hpp</a>) compiles and is fine, but I have no idea how to allow to specify an allocator per type rather than for the whole class.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "c++11", "refactoring", "rawstring"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1435182011, "post_id": 31037558, "comment_id": 50099168, "body": "Note that the 2 versions are not equivalent. <code>&quot;blah blah1blah blah2blah blah3blah blah4&quot;</code> vs multiline"}, {"owner": {"reputation": 4578, "user_id": 397390, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/f8n3X.jpg?s=128&g=1", "display_name": "Wei Shi", "link": "https://stackoverflow.com/users/397390/wei-shi"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1435183959, "post_id": 31037558, "comment_id": 50100001, "body": "Thanks for pointing out. In my case, they are equivalent."}, {"owner": {"reputation": 4578, "user_id": 397390, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/f8n3X.jpg?s=128&g=1", "display_name": "Wei Shi", "link": "https://stackoverflow.com/users/397390/wei-shi"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1435194390, "post_id": 31037558, "comment_id": 50102864, "body": "@Yakk, I want to convert the first <code>foo</code> to the second <code>foo</code>. Why do you think my example does not match my problem?"}, {"owner": {"reputation": 4578, "user_id": 397390, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/f8n3X.jpg?s=128&g=1", "display_name": "Wei Shi", "link": "https://stackoverflow.com/users/397390/wei-shi"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1435197652, "post_id": 31037558, "comment_id": 50103556, "body": "@Yakk, yes, the example I gave is exactly what I want. I don&#39;t care about white space or line break."}, {"owner": {"reputation": 761, "user_id": 2345647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c511ef77481eb163a14285a3b1e1016?s=128&d=identicon&r=PG", "display_name": "Jim Wood", "link": "https://stackoverflow.com/users/2345647/jim-wood"}, "edited": false, "score": 0, "creation_date": 1435253634, "post_id": 31037558, "comment_id": 50135191, "body": "I doubt that there is an existing tool to do this, but you could write your own using any language that will do a find and replace with regex."}], "owner": {"reputation": 4578, "user_id": 397390, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/f8n3X.jpg?s=128&g=1", "display_name": "Wei Shi", "link": "https://stackoverflow.com/users/397390/wei-shi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435194619, "creation_date": 1435181940, "last_edit_date": 1435194619, "question_id": 31037558, "link": "https://stackoverflow.com/questions/31037558/how-to-batch-refactor-old-multi-line-c-string-into-c11-raw-string-literal", "title": "How to batch refactor old multi-line C string into C++11 raw string literal", "body": "<p>I have some legacy code with old style C string.</p>\n\n<pre><code>string foo = \"blah blah1\"\n             \"blah blah2\"\n             \"blah blah3\"\n             \"blah blah4\";\n</code></pre>\n\n<p>I want to convert all of them into C++11 raw string literal.</p>\n\n<pre><code>string foo = R\"(\n    blah blah1\n    blah blah2\n    blah blah3\n    blah blah4\n)\";\n</code></pre>\n\n<p>Is there some tool/editor/script I can use to batch convert them?</p>\n\n<p>I understand that those two versions are different(the first <code>foo</code> does not have line break, but in my case, I don't care about <code>\\n</code>, so they are equivalent.</p>\n"}, {"tags": ["c++", "floating", "forward", "rate", "quantlib"], "comments": [{"owner": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "edited": false, "score": 0, "creation_date": 1435237542, "post_id": 31037325, "comment_id": 50123412, "body": "In my answer below, I&#39;ve tried to explain what happens in the example. However, I&#39;m not really sure of the difference between the two alternatives you&#39;re listing. What&#39;s the difference between &quot;computing the forward rates and then adding the spread&quot; and &quot;taking the spot curve only and adding the spread&quot;? How would you compute the forward rates if not on the spot curve?"}, {"owner": {"reputation": 41, "user_id": 4995320, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155599352430214/picture?type=large", "display_name": "Lucas Triana", "link": "https://stackoverflow.com/users/4995320/lucas-triana"}, "reply_to_user": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "edited": false, "score": 0, "creation_date": 1435244229, "post_id": 31037325, "comment_id": 50128953, "body": "It is done using the spot curve, I agree. So are you saying that somewhere along the way the forward rates are computed to compute the cash flows, is that right? If so, where are these computations of the forward rates done? Could you please point me towards it? I don&#39;t see how the forward rates are computed or where exactly is this done"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4995320, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155599352430214/picture?type=large", "display_name": "Lucas Triana", "link": "https://stackoverflow.com/users/4995320/lucas-triana"}, "edited": false, "score": 0, "creation_date": 1435240243, "post_id": 31051237, "comment_id": 50125558, "body": "I am confused. How is the <code>libor3m</code> forecasting its fixings,is it computing forward rates or is it looking for the spot rates associated to the cash flow dates and assigning it to that particular coupon rate and then adding the spread?                                              If I want to compute the cash flows by estimating using forward rates, do I have to create a new <code>YieldTermStructure</code> of forward rates (call it <code>ForwardTermStructure</code>) and  a new <code>RelinkableHandle</code> for it or do I do it as in the bond.cpp example and assume that somewhere this forward rate calculation is done?"}, {"owner": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "reply_to_user": {"reputation": 41, "user_id": 4995320, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155599352430214/picture?type=large", "display_name": "Lucas Triana", "link": "https://stackoverflow.com/users/4995320/lucas-triana"}, "edited": false, "score": 0, "creation_date": 1435247395, "post_id": 31051237, "comment_id": 50131407, "body": "Oh, I see the source of the confusion. No, the coupons calculate forward rates based on the spot curve. I&#39;ll add some directions to the answer."}], "tags": [], "owner": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "is_accepted": false, "score": 1, "last_activity_date": 1435248184, "last_edit_date": 1435248184, "creation_date": 1435237529, "answer_id": 31051237, "question_id": 31037325, "link": "https://stackoverflow.com/questions/31037325/quantlib-floatingratebond-cashflow-computation/31051237#31051237", "title": "Quantlib FloatingRateBond cashflow computation", "body": "<p>There are two different kind of objects at play in the example.</p>\n\n<p>Actual curves are built and stored inside smart pointers; for instance, <code>depoSwapTermStructure</code> (the spot curve) is a <code>boost::shared_ptr&lt;YieldTermStructure&gt;</code>, and so is <code>bondDiscountingTermStructure</code>. They basically behave as pointers to <code>YieldTermStructure</code>.</p>\n\n<p>Then, you have instances of <code>Handle&lt;YieldTermStructure&gt;</code> (or <code>RelinkableHandle</code>) which give you another level of indirection: a <code>Handle</code> contains a <code>shared_ptr</code> and can switch it for another if needed (the rationale for that and a few more details are available at <a href=\"http://implementingquantlib.com/2013/07/odds-and-ends-smart-pointers-and-handles.html\" rel=\"nofollow\">this link</a>).</p>\n\n<p>In the example, the <code>libor3m</code> index is passed the <code>liborTermStructure</code> handle, so it will forecast its fixings by using whatever curve is linked to it: in this case, <code>depoSwapTermStructure</code>, since the statement</p>\n\n<pre><code>liborTermStructure.linkTo(depoSwapTermStructure);\n</code></pre>\n\n<p>is executed before pricing the bond. As you say, the coupon rates are calculated by forecasting the index fixings off the curve and adding the spread. If we linked <code>liborTermStructure</code> to another curve and asked the bond for its cash flows again, they would be recalculated based on the new curve.</p>\n\n<p>The same happens for discounting. Whatever curve is linked to <code>discountingTermStructure</code> will be used to discount the cash flows; in the example, that would be <code>bondDiscountingTermStructure</code>.</p>\n\n<p>As for how the coupon rates are calculated: each coupon calculates its own rate and amount with the help of the <code>BlackIborCouponPricer</code> instance that is built right after the bond and associated to the coupons shortly afterwards by the statement</p>\n\n<pre><code>setCouponPricer(floatingRateBond.cashflows(),pricer);\n</code></pre>\n\n<p>The code that actually performs the calculation involves the <code>BlackIborCouponPricer</code> and <code>FloatingRateCoupon</code> classes (more details are <a href=\"http://implementingquantlib.com/2014/01/chapter-4-part-1-of-5-cash-flows-and.html\" rel=\"nofollow\">here</a> and in the posts that follow) but ultimately the rate is calculated in the <code>IborIndex</code> class as:</p>\n\n<pre><code>Rate IborIndex::forecastFixing(const Date&amp; fixingDate) const {\n    Date d1 = valueDate(fixingDate);\n    Date d2 = maturityDate(d1);\n    Time t = dayCounter_.yearFraction(d1, d2);\n    return forecastFixing(d1, d2, t);\n}\n\nRate IborIndex::forecastFixing(const Date&amp; d1,\n                                      const Date&amp; d2,\n                                      Time t) const {\n    DiscountFactor disc1 = termStructure_-&gt;discount(d1);\n    DiscountFactor disc2 = termStructure_-&gt;discount(d2);\n    return (disc1/disc2 - 1.0) / t;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4995320, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155599352430214/picture?type=large", "display_name": "Lucas Triana", "link": "https://stackoverflow.com/users/4995320/lucas-triana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435248184, "creation_date": 1435181070, "last_edit_date": 1435219832, "question_id": 31037325, "link": "https://stackoverflow.com/questions/31037325/quantlib-floatingratebond-cashflow-computation", "title": "Quantlib FloatingRateBond cashflow computation", "body": "<p>Looking at the Bond.cpp example: <a href=\"http://quantlib.org/reference/_bonds_8cpp-example.html\" rel=\"nofollow\">http://quantlib.org/reference/_bonds_8cpp-example.html</a> it looks like <code>depoSwapTermStructure</code> and <code>liborTermStructure</code> are exactly the same curve. However, for the floating rate bond it seems that the FloatingRateBond class is computing the coupon rates, and therefore the cashflows, for the floatingRateBond instance by computing the forward rates and then adding the spread to it (which sounds right to me). </p>\n\n<p>Is this correct or is it the case for this example that the forecasted cashflows are being computed by taking the spot curve only and adding the spread to obtain the forecasted coupon rates?</p>\n"}, {"tags": ["c++", "macos", "gcc", "std"], "comments": [{"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1435180883, "post_id": 31037251, "comment_id": 50098650, "body": "Include #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt;"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 3, "creation_date": 1435180885, "post_id": 31037251, "comment_id": 50098652, "body": "<code>gcc</code> is a C compiler. You want to use a C++ compiler and linker for compiling (and linking) C++ code."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 1, "creation_date": 1435180890, "post_id": 31037251, "comment_id": 50098655, "body": "@EvanCarslake nope. How could a mere header file <b>possibly</b> cause a linker error? (in any non-contrived non-template example anyway\u2026)"}], "answers": [{"comments": [{"owner": {"reputation": 2043, "user_id": 988441, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/hDd5P.jpg?s=128&g=1", "display_name": "NcAdams", "link": "https://stackoverflow.com/users/988441/ncadams"}, "edited": false, "score": 0, "creation_date": 1435181646, "post_id": 31037273, "comment_id": 50099003, "body": "That is 100% correct. Glad it was so simple, thank you!"}], "tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": true, "score": 24, "last_activity_date": 1435180858, "creation_date": 1435180858, "answer_id": 31037273, "question_id": 31037251, "link": "https://stackoverflow.com/questions/31037251/c-undefined-symbols-for-architecture-x86-64-error-when-std-is-used/31037273#31037273", "title": "C++: &quot;Undefined symbols for architecture x86_64&quot; error when &quot;std&quot; is used", "body": "<p>You are writing a C++ program. The compiler is called <code>g++</code> (not <code>gcc</code>). So use:</p>\n\n<pre><code>g++ test.cpp -o test\n</code></pre>\n\n<p>Using <code>g++</code> sets up the linker to link to the correct C++ runtime libraries. If you happen to write a C++ program that doesn't use any standard library functions, then <code>gcc</code> might work but it's still the wrong compiler.</p>\n"}], "owner": {"reputation": 2043, "user_id": 988441, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/hDd5P.jpg?s=128&g=1", "display_name": "NcAdams", "link": "https://stackoverflow.com/users/988441/ncadams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5599, "favorite_count": 1, "accepted_answer_id": 31037273, "answer_count": 1, "score": 8, "last_activity_date": 1435180858, "creation_date": 1435180761, "question_id": 31037251, "link": "https://stackoverflow.com/questions/31037251/c-undefined-symbols-for-architecture-x86-64-error-when-std-is-used", "title": "C++: &quot;Undefined symbols for architecture x86_64&quot; error when &quot;std&quot; is used", "body": "<p>I'm a new C++ programmer, and I'm trying to run a simple, &lt;10 line program as a system test. My operating system is OSX 10.9.5, and my gcc version is 4.2.1.</p>\n\n<p>I've created a file \"test.cpp\" which I'm compiling on the command line with gcc. The command is \"gcc test.cpp -o test\". I then run \"./test\". (Yes, this is process as basic as it sounds.) The file is below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main ()\n{\n  printf(\"Hello World!\");\n  std::cout &lt;&lt; \"Hi again!\"; //Problem line\n}\n</code></pre>\n\n<p>When I include the line that includes std, gcc returns the following long error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"std::__1::locale::use_facet(std::__1::locale::id&amp;) const\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt;&lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*) in test-e54cb2.o\n  \"std::__1::ios_base::getloc() const\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt;&lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*) in test-e54cb2.o\n  \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::__init(unsigned long, char)\", referenced from:\n      std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt; std::__1::__pad_and_output&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt;, char const*, char const*, char const*, std::__1::ios_base&amp;, char) in test-e54cb2.o\n  \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::~basic_string()\", referenced from:\n      std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt; std::__1::__pad_and_output&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt;, char const*, char const*, char const*, std::__1::ios_base&amp;, char) in test-e54cb2.o\n  \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::sentry::sentry(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;)\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt;&lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*) in test-e54cb2.o\n  \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::sentry::~sentry()\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt;&lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*) in test-e54cb2.o\n  \"std::__1::cout\", referenced from:\n      _main in test-e54cb2.o\n  \"std::__1::ctype&lt;char&gt;::id\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt;&lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*) in test-e54cb2.o\n  \"std::__1::locale::~locale()\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt;&lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*) in test-e54cb2.o\n  \"std::__1::ios_base::__set_badbit_and_consider_rethrow()\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt;&lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*) in test-e54cb2.o\n  \"std::__1::ios_base::clear(unsigned int)\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt;&lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*) in test-e54cb2.o\n  \"std::terminate()\", referenced from:\n      ___clang_call_terminate in test-e54cb2.o\n  \"___cxa_begin_catch\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt;&lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*) in test-e54cb2.o\n      ___clang_call_terminate in test-e54cb2.o\n  \"___cxa_end_catch\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt;&lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*) in test-e54cb2.o\n  \"___gxx_personality_v0\", referenced from:\n      std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt;&lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char const*) in test-e54cb2.o\n      std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt; std::__1::__pad_and_output&lt;char, std::__1::char_traits&lt;char&gt; &gt;(std::__1::ostreambuf_iterator&lt;char, std::__1::char_traits&lt;char&gt; &gt;, char const*, char const*, char const*, std::__1::ios_base&amp;, char) in test-e54cb2.o\n      Dwarf Exception Unwind Info (__eh_frame) in test-e54cb2.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>An error of this nature also occurs if I include the line \"using namespace std;\". It seems like any reference to \"std\" causes this.</p>\n\n<p>I've read many threads regarding errors of the form \"Undefined symbol for architecture...\". Most seem to occur for simple issues or for issues arising from conflicts in large projects, and none of them seem to address my particular situation.</p>\n\n<p>Can anyone point me in the right direction?</p>\n"}, {"tags": ["c++", "iostream"], "comments": [{"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "edited": false, "score": 2, "creation_date": 1435180961, "post_id": 31037222, "comment_id": 50098696, "body": "You have to create the file beforehand (e.g with notepad) and type the data there. And don&#39;t write to the file you are reading from."}, {"owner": {"reputation": 1436, "user_id": 3066972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ee784dcb5e3afadd6b5cae7949a5f5?s=128&d=identicon&r=PG&f=1", "display_name": "ssnobody", "link": "https://stackoverflow.com/users/3066972/ssnobody"}, "edited": false, "score": 0, "creation_date": 1435181382, "post_id": 31037222, "comment_id": 50098876, "body": "You don&#39;t enter the times and hours, it reads them from the file."}, {"owner": {"reputation": 31, "user_id": 5046375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c93a10a42452af72029d9a438a7a52e?s=128&d=identicon&r=PG&f=1", "display_name": "user5046375", "link": "https://stackoverflow.com/users/5046375/user5046375"}, "edited": false, "score": 0, "creation_date": 1435182589, "post_id": 31037222, "comment_id": 50099473, "body": "Ah, so it just writes the data from a file into a vector named temps in this example. So if I want the data printed out, I have to print it from the vector?"}, {"owner": {"reputation": 1804, "user_id": 754147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQkUn.jpg?s=128&g=1", "display_name": "prmottajr", "link": "https://stackoverflow.com/users/754147/prmottajr"}, "edited": false, "score": 0, "creation_date": 1435183016, "post_id": 31037222, "comment_id": 50099648, "body": "That is correct it is only processing files if you want to print you will have to change the example."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5046375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c93a10a42452af72029d9a438a7a52e?s=128&d=identicon&r=PG&f=1", "display_name": "user5046375", "link": "https://stackoverflow.com/users/5046375/user5046375"}, "edited": false, "score": 0, "creation_date": 1435183373, "post_id": 31037836, "comment_id": 50099795, "body": "Thanks a lot for explaining in detail. It looks like I was actually expecting a different behavior from the program. :) Now ot makes sense."}], "tags": [], "owner": {"reputation": 714, "user_id": 3600461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c9120ccbb5f86e57a60e4fb96f701402?s=128&d=identicon&r=PG&f=1", "display_name": "sitting-duck", "link": "https://stackoverflow.com/users/3600461/sitting-duck"}, "is_accepted": false, "score": 1, "last_activity_date": 1435183001, "creation_date": 1435183001, "answer_id": 31037836, "question_id": 31037222, "link": "https://stackoverflow.com/questions/31037222/bjarne-stroustrup-chapter-10-5-example/31037836#31037836", "title": "Bjarne Stroustrup chapter 10.5 example", "body": "<p>When you see the prompt: </p>\n\n<pre><code>cout &lt;&lt; \"Please enter input file name: \\n\";\n</code></pre>\n\n<p>It is asking you what file you want to read the data from.</p>\n\n<p>When you see the prompt: </p>\n\n<pre><code>cout &lt;&lt; \"Please enter output file name: \\n\";\n</code></pre>\n\n<p>It is asking you what file you want to write to.</p>\n\n<p>Notice the difference in the key words <strong>input</strong> and <strong>output</strong>.</p>\n\n<p>This loop:</p>\n\n<pre><code>while (ist &gt;&gt; hour &gt;&gt; temperature) {\n            temps.push_back(Reading{hour,temperature});\n</code></pre>\n\n<p>Is saying that while ist (the input file stream) returns a good value (meaning it hasn't reached the end of file yet) we add an item of type Reading to the Vector called \"temps\". (A Vector is essentially a list container type) We created an item of type Reading from the two items we grabbed from the line in the file.  </p>\n\n<p>So to recap, we make a Reading from the text in the file, and then we add it to the vector called \"temps\"</p>\n\n<p>\">>\" is an operator that reads the next item in the file.\nIn the code, it reads the next two items and puts them into hour and temperature.</p>\n"}], "owner": {"reputation": 31, "user_id": 5046375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c93a10a42452af72029d9a438a7a52e?s=128&d=identicon&r=PG&f=1", "display_name": "user5046375", "link": "https://stackoverflow.com/users/5046375/user5046375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1557316878, "creation_date": 1435180650, "last_edit_date": 1557316878, "question_id": 31037222, "link": "https://stackoverflow.com/questions/31037222/bjarne-stroustrup-chapter-10-5-example", "title": "Bjarne Stroustrup chapter 10.5 example", "body": "<p>This is about an example in Section 10.5 of Bjarne Stroustrup's \"Principles and Practices using C++\" book. As far as I understand, it should prompt the user to enter the name of the file to be created (So I typed <code>probe.txt</code>), after that it should ask the user to open a file (So I type <code>probe.txt</code> again) and then the program skips my <code>while</code> statement and returns 0. How am I supposed to enter the hours and temperatures?</p>\n\n<pre><code>#include &lt;std_lib_facilities.h&gt;\n\nstruct Reading {\n    int hour;\n    double temperature;\n};\n\nint main()\n{\n    cout &lt;&lt; \"Please enter input file name: \\n\";\n    string iname;\n    cin &gt;&gt; iname;\n    ifstream ist{iname};\n\n    string oname;\n    cout &lt;&lt; \"Please enter output file name: \\n\";\n    cin &gt;&gt; oname;\n    ofstream ost{oname};\n\n    vector&lt;Reading&gt; temps;\n    int hour;\n    double temperature;\n    while (ist &gt;&gt; hour &gt;&gt; temperature) {\n        temps.push_back(Reading{hour,temperature});\n    }\n\n    keep_window_open();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "wxwidgets"], "comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1435181213, "post_id": 31037218, "comment_id": 50098797, "body": "Did you have Visual Studio open?  Could it have been running a debugger on it?"}, {"owner": {"reputation": 11, "user_id": 720496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2283be1995fe4807b7554fee60c8e4c6?s=128&d=identicon&r=PG&f=1", "display_name": "doctorafternoon", "link": "https://stackoverflow.com/users/720496/doctorafternoon"}, "reply_to_user": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1436193718, "post_id": 31037218, "comment_id": 50494720, "body": "It does seem like a debugging type slowdown, but makes no difference if Visual Studio is closed."}], "owner": {"reputation": 11, "user_id": 720496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2283be1995fe4807b7554fee60c8e4c6?s=128&d=identicon&r=PG&f=1", "display_name": "doctorafternoon", "link": "https://stackoverflow.com/users/720496/doctorafternoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435180644, "creation_date": 1435180644, "question_id": 31037218, "link": "https://stackoverflow.com/questions/31037218/same-executable-different-filename-changes-performance", "title": "Same executable, different filename changes performance", "body": "<p>I have an executable (neural network simulation software) developed in C++ and wxWidgets, compiled in Visual Studio 2010. On my development machine (Windows 7 64bit) it was running very slowly, taking 130 seconds instead of 14 seconds for the same run. I finally discovered that it works fine if I just changed the filename of the exe. To hunt for the cause I've turned off antivirus (Microsoft Security Essentials, searched the registry and event logs, but found nothing. Doesn't matter if it's compiled with wxWidgets DLL or static library, 32bit or 64bit.</p>\n\n<p>What could possibly be the problem? Processor affinity and priority is all normal. Only clue is that the process also uses more memory (130meg instead of 90meg). </p>\n"}, {"tags": ["c++", "sorting", "stl", "multimap", "equal-range"], "comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1435181273, "post_id": 31037204, "comment_id": 50098820, "body": "Do you need to support lookup by key, or just the operations described above? Also, are there any time bounds on how efficiently you need to be able to do this?"}, {"owner": {"reputation": 75, "user_id": 2717002, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4T5qu.jpg?s=128&g=1", "display_name": "Mohammed Raqeeb", "link": "https://stackoverflow.com/users/2717002/mohammed-raqeeb"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1435257668, "post_id": 31037204, "comment_id": 50137589, "body": "@templatetypedef We do need to lookup by key..the efficient it is, d better it is."}], "answers": [{"comments": [{"owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1435182048, "post_id": 31037464, "comment_id": 50099193, "body": "this is probably easiest, but a multimap with a custom compare would do it too..."}, {"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "reply_to_user": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1435182196, "post_id": 31037464, "comment_id": 50099267, "body": "No it wouldn&#39;t.  The compare function is just passed the two keys to compare, not the keys and the values.  If you&#39;re suggesting compare look up the values-  ewww, that would be horrible performance.  Or depending on implementation an inifinite recursion and stackdump."}, {"owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1435182571, "post_id": 31037464, "comment_id": 50099459, "body": "well, i was suggesting something a hair more hack-ish i suppose... along the lines of the custom compare could access the data itself for both components.  i&#39;m sure outside the scope of the learning exercise..."}, {"owner": {"reputation": 75, "user_id": 2717002, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4T5qu.jpg?s=128&g=1", "display_name": "Mohammed Raqeeb", "link": "https://stackoverflow.com/users/2717002/mohammed-raqeeb"}, "edited": false, "score": 0, "creation_date": 1435261381, "post_id": 31037464, "comment_id": 50139583, "body": "@GabeSechan I modified my code to use the map&lt;int, set&lt;string&gt; &gt; approach. All seems fine now. Thanks!"}], "tags": [], "owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "is_accepted": false, "score": 2, "last_activity_date": 1435181553, "creation_date": 1435181553, "answer_id": 31037464, "question_id": 31037204, "link": "https://stackoverflow.com/questions/31037204/how-can-i-print-values-of-a-key-in-sorted-order-in-a-multimap/31037464#31037464", "title": "How can I print values of a key in sorted order in a multimap", "body": "<p>I wouldn't use multimap.  I'd use a <code>map&lt;int, set&lt;string&gt;&gt;</code>.  The reason is you need both your keys and values sorted.  A multimap is only going to sort the keys.  By using a map of sets, the map will sort by keys and the set will sort by values (assuming you give it the right comparator).</p>\n"}, {"comments": [{"owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1435181844, "post_id": 31037483, "comment_id": 50099096, "body": "although that doesn&#39;t allow for non-unique keys... wait, why doesn&#39;t multimap work with custom compare?  the compare needs to point to something that contains both aspects is all..."}, {"owner": {"reputation": 3470, "user_id": 21426, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/930015d2cd3a11a7740341f62f87519b?s=128&d=identicon&r=PG", "display_name": "Ross Smith", "link": "https://stackoverflow.com/users/21426/ross-smith"}, "reply_to_user": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1435182251, "post_id": 31037483, "comment_id": 50099294, "body": "It does allow for non-unique keys. It doesn&#39;t allow for non-unique key-value pairs, but if you want that, just use a multiset instead of a set. You can&#39;t give a multimap a comparison that looks at both key and value, it won&#39;t compile."}, {"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1435182742, "post_id": 31037483, "comment_id": 50099542, "body": "The bigger problem to me is that if you need to check if there is any value for a given key, you can&#39;t.  You can only check if a given pair is in the data structure."}], "tags": [], "owner": {"reputation": 3470, "user_id": 21426, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/930015d2cd3a11a7740341f62f87519b?s=128&d=identicon&r=PG", "display_name": "Ross Smith", "link": "https://stackoverflow.com/users/21426/ross-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1435181633, "creation_date": 1435181633, "answer_id": 31037483, "question_id": 31037204, "link": "https://stackoverflow.com/questions/31037204/how-can-i-print-values-of-a-key-in-sorted-order-in-a-multimap/31037483#31037483", "title": "How can I print values of a key in sorted order in a multimap", "body": "<p>If you want to sort key-value pairs by both the key and the value, then you don't want a multimap, which doesn't provide any way to sort on values with the same key. You want a set of pairs, with a custom comparison function that sorts them in the order you want. Something like this (warning, code written off the top of my head, not tested):</p>\n\n<pre><code>using KeyValue = std::pair&lt;int, std::string&gt;;\n\nstruct CompareKeyValue {\n    bool operator()(const KeyValue&amp; lhs, const KeyValue&amp; rhs) const {\n        if (lhs.first != rhs.first)\n            return lhs.first &gt; rhs.first; // Reverse order\n        else\n            return lhs.second &lt; rhs.second;\n    }\n};\n\nstd::set&lt;KeyValue, CompareKeyValue&gt; my_data;\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 2717002, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4T5qu.jpg?s=128&g=1", "display_name": "Mohammed Raqeeb", "link": "https://stackoverflow.com/users/2717002/mohammed-raqeeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1435182300, "creation_date": 1435180582, "last_edit_date": 1435182300, "question_id": 31037204, "link": "https://stackoverflow.com/questions/31037204/how-can-i-print-values-of-a-key-in-sorted-order-in-a-multimap", "title": "How can I print values of a key in sorted order in a multimap", "body": "<p>I need to design a data structure that basically stores key-value pairs with key being an integer and its value a string.</p>\n\n<p>Condition 1: There could be multiple values associated with a Key.</p>\n\n<p>Condition 2: I need to print all the keys stored in this map in descending order.</p>\n\n<p>Condition 3: Though the Keys(integers) are printed in Descending order, their corresponding values(strings) must be printed in lexicographic(sorted in ascending) order.</p>\n\n<p><strong>Sample Input:</strong>                               </p>\n\n<pre><code>78 Eve                                      \n99 Bob                                       \n78 Alice                                    \n</code></pre>\n\n<p><strong>Expected Output:</strong></p>\n\n<pre><code>99 Bob\n78 Alice\n78 Eve\n</code></pre>\n\n<p>Notice the keys are in descending order, while the values are in ascending order.</p>\n\n<p>To do this I have come up with below code in C++:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\nint main()\n{\n    int N;\n    string name;\n    int marks;\n    multimap&lt;int, string, greater&lt;int&gt;&gt; studMap;\n    multimap&lt;int, string, greater&lt;int&gt;&gt;::iterator itBeg, itEnd;\n    typedef multimap&lt;int, string, greater&lt;int&gt;&gt;::iterator mapIter;\n\n    cin &gt;&gt; N;   // total no. of key-value pairs input by user\n\n    while (N--)\n    {\n        cin &gt;&gt; name &gt;&gt; marks;  // pairs of value-key input by user - N times\n        studMap.insert(pair&lt;int, string&gt;(marks, name));\n    }\n\n    for (itBeg = studMap.begin(); itBeg != studMap.end(); itBeg = itEnd)\n    {\n        marks = itBeg-&gt;first;\n\n        pair&lt;mapIter, mapIter&gt; keyRange = studMap.equal_range(marks);\n\n        for (itEnd = keyRange.first; itEnd != keyRange.second; ++itEnd)\n        {\n            cout &lt;&lt; marks &lt;&lt; \" \" &lt;&lt; itEnd-&gt;second &lt;&lt; endl;\n        }\n    }  \n    return 0;\n}\n</code></pre>\n\n<p>But I am getting output as shown below:</p>\n\n<pre><code>99 Bob\n78 Eve \n78 Alice\n</code></pre>\n\n<p>whereas I need pair(78, Alice) to be printed before (78, Eve)</p>\n"}, {"tags": ["c++", "accelerate-framework", "vdsp"], "comments": [{"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 0, "creation_date": 1435180632, "post_id": 31037184, "comment_id": 50098542, "body": "I see it&#39;s C++, so use std::sort with an appropriate predicate"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5256174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2wAC5.jpg?s=128&g=1", "display_name": "D. Donley", "link": "https://stackoverflow.com/users/5256174/d-donley"}, "is_accepted": false, "score": -1, "last_activity_date": 1440292548, "last_edit_date": 1440292548, "creation_date": 1440290192, "answer_id": 32162101, "question_id": 31037184, "link": "https://stackoverflow.com/questions/31037184/reordering-with-accelerate-framework/32162101#32162101", "title": "Reordering with Accelerate framework", "body": "<p>Can you use vDSP_vgathr? This APIs grabs values from a vector using another vector of indices.</p>\n\n<p><a href=\"https://developer.apple.com/library/mac/documentation/Accelerate/Reference/vDSPRef/index.html#//apple_ref/c/func/vDSP_vgathr\" rel=\"nofollow\">https://developer.apple.com/library/mac/documentation/Accelerate/Reference/vDSPRef/index.html#//apple_ref/c/func/vDSP_vgathr</a></p>\n\n<p>Here is a summary:\nSingle-Vector Gathering\nThe functions in this group use either indices or pointers stored within one source vector to generate a new vector containing the chosen elements from either a second source vector or from memory.</p>\n\n<p>vDSP_vgathr\nVector gather; single precision.</p>\n\n<p>Declaration\nSWIFT</p>\n\n<p><code>func vDSP_vgathr(_ __vDSP_A: UnsafePointer&lt;Float&gt;,\n               _ __vDSP_B: UnsafePointer&lt;vDSP_Length&gt;,\n               _ __vDSP_J: vDSP_Stride,\n               _ __vDSP_C: UnsafeMutablePointer&lt;Float&gt;,\n               _ __vDSP_K: vDSP_Stride,\n               _ __vDSP_N: vDSP_Length)</code></p>\n\n<p>OBJECTIVE-C</p>\n\n<p><code>void vDSP_vgathr ( const float *__vDSP_A, const vDSP_Length *__vDSP_B, vDSP_Stride __vDSP_IB, float *__vDSP_C, vDSP_Stride __vDSP_IC, vDSP_Length __vDSP_N );</code>\nParameters\n__vDSP_A<br>\nSingle-precision real input vector\n__vDSP_B<br>\nInteger vector containing indices\n__vDSP_J<br>\nStride for B\n__vDSP_C<br>\nSingle-precision real output vector\n__vDSP_K<br>\nStride for C\n__vDSP_N<br>\nThe number of elements to process\nDiscussion\nPerforms the following operation:</p>\n\n<p>Uses elements of vector B as indices to copy selected elements of vector A to sequential locations in vector C. Note that 1, not zero, is treated as the first location in the input vector when evaluating indices. This function can only be done out of place.</p>\n"}], "owner": {"reputation": 1, "user_id": 5030866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6be6247bf36d2b0e0ccac7c404f60ff?s=128&d=identicon&r=PG&f=1", "display_name": "galuoises", "link": "https://stackoverflow.com/users/5030866/galuoises"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440292548, "creation_date": 1435180514, "question_id": 31037184, "link": "https://stackoverflow.com/questions/31037184/reordering-with-accelerate-framework", "title": "Reordering with Accelerate framework", "body": "<p>I would like to use the Accelerate Framework libraries for sorting data (pairs of x and y values).</p>\n\n<p>I used the function vDSP_vsorti to find the vector with the ordering indices of the x data. Now I should reorder the y data accordingly to the x sorting indices order. </p>\n\n<p>How I could do it? Does exist a function in Accelerate Framework to reorder the vector?</p>\n"}, {"tags": ["c++", "assembly", "visual-studio-2013", "masm", "irvine32"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1435180653, "post_id": 31037176, "comment_id": 50098551, "body": "<code>adding obj files to linker</code> - so, have you added <code>calka.obj</code>, and does it get created by assembling first? Does VS maybe show you the command it is running, and if so, does that include <code>calka.obj</code>?"}, {"owner": {"reputation": 75, "user_id": 4975390, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44fa0425a346020dcb682ea760853fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Nichten", "link": "https://stackoverflow.com/users/4975390/nichten"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1435181065, "post_id": 31037176, "comment_id": 50098733, "body": "I have clear my solution, and after that I compile calka.asm with right click in Solution Explorer. After that I have added calka.obj with option &quot;Add Existing item&quot; - what I get after building project is: <code>Debug\\calka.obj : warning LNK4042: object specified more than once; extras ignored</code> Something more to do?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user781847"}, "edited": false, "score": 0, "creation_date": 1435181193, "post_id": 31037176, "comment_id": 50098787, "body": "I&#39;m not sure if &quot;Add Existing Item&quot; is the way to add an object file, isn&#39;t there a specific tab in the project property somewhere in the linker/compiler options? Maybe it&#39;s the same, just a guess."}, {"owner": {"reputation": 75, "user_id": 4975390, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44fa0425a346020dcb682ea760853fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Nichten", "link": "https://stackoverflow.com/users/4975390/nichten"}, "edited": false, "score": 0, "creation_date": 1435181538, "post_id": 31037176, "comment_id": 50098953, "body": "How to do it correctly? I have tried plenty of ways but nothing get it to work :)."}, {"owner": {"reputation": 75, "user_id": 4975390, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44fa0425a346020dcb682ea760853fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Nichten", "link": "https://stackoverflow.com/users/4975390/nichten"}, "edited": false, "score": 0, "creation_date": 1435182115, "post_id": 31037176, "comment_id": 50099235, "body": "According to this: <a href=\"http://stackoverflow.com/questions/7946513/how-to-include-obj-files-into-the-project\">link</a> there is no diiference in including method..."}], "answers": [{"tags": [], "owner": {"reputation": 13243, "user_id": 3512216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kg2sx.gif?s=128&g=1", "display_name": "rkhb", "link": "https://stackoverflow.com/users/3512216/rkhb"}, "is_accepted": true, "score": 2, "last_activity_date": 1580484074, "last_edit_date": 1580484074, "creation_date": 1435252747, "answer_id": 31056748, "question_id": 31037176, "link": "https://stackoverflow.com/questions/31037176/running-asm-procedure-in-cpp-file/31056748#31056748", "title": "Running asm procedure in cpp file", "body": "<p><code>Irvine32.inc</code> includes <code>SmallWin.inc</code> and that sets <code>.MODEL flat, stdcall</code>. So, every procedure will be decorated by default as if the calling convention were <a href=\"https://msdn.microsoft.com/library/zxk0tw93.aspx\" rel=\"nofollow noreferrer\">STDCALL</a>. <code>_calka</code> becomes <code>_calka@0</code>. For the <a href=\"https://msdn.microsoft.com/library/zkwh89ks.aspx\" rel=\"nofollow noreferrer\">CDECL calling convention</a> needed for <code>main.cpp</code> you have to override the default calling convention for the procedure with <code>PROC C</code>. Now the underscore will be added automatically. TLDR: <code>calka proc C</code>.</p>\n\n<p>The best is, you create a new project. I'll describe the procedure for Microsoft Visual Studio 2015 RC on Windows 10. The procedure is quite similar for other VS versions.</p>\n\n<p>1) Start Visual Studio 2015 RC and choose <code>FILE - New - Project</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/3JIrd.gif\" alt=\"Screenshot\"></p>\n\n<p>2) In the next window choose <code>Win 32 Console Application</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/Cfr26.gif\" alt=\"Screenshot\"></p>\n\n<p>3) You get a confirmation. Click on <code>Next &gt;</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/qH3MG.gif\" alt=\"Screenshot\"></p>\n\n<p>4) In the next window choose<br>\n   [X] Console application<br>\n   [X] Empty project<br>\n   Click on <code>Finish</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/K2AuS.gif\" alt=\"Screenshot\"></p>\n\n<p>5) Make sure, that the project is highlighted in the Solution Explorer and choose <code>PROJECT - Build Customizations...</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/1LCGG.gif\" alt=\"Screenshot\"></p>\n\n<p>6) In the next window tick <code>masm(.targets,.props)</code> and click on <code>OK</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/5Z6w6.gif\" alt=\"Screenshot\"></p>\n\n<p>7) Create main.cpp: <code>PROJECT - Add New Item</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/NijkR.gif\" alt=\"Screenshot\"></p>\n\n<p>8) In the next window choose <code>C++File(.cpp)</code>, give it a name and click on <code>Add</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/HQhJV.gif\" alt=\"Screenshot\"></p>\n\n<p>9) Create calka.asm: <code>PROJECT - Add New Item</code>. In the next window choose <code>C++File(.cpp)</code> and - IMPORTANT! - give it a name with <code>.asm</code> extension. Click on <code>Add</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/vrUz2.gif\" alt=\"Screenshot\"></p>\n\n<p>10) Now check if the <code>.asm</code> file has the right properties. In the Solution Explorer right-click on the file and choose <code>Properties</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/zFK8L.gif\" alt=\"Screenshot\"></p>\n\n<p>11) In the Property Page you should see<br>\n   Excluded From Build    (empty) or No<br>\n   Item Build             Microsoft Macro Assembler<br>\n   Click on <code>OK</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/Afe6V.gif\" alt=\"Screenshot\"></p>\n\n<p>12) Now you can fill the files with content.</p>\n\n<p><img src=\"https://i.stack.imgur.com/s417x.gif\" alt=\"Screenshot\"></p>\n\n<p>You don't need <code>system(\"Pause\")</code> since <kbd>CTRL-F5</kbd> builds, runs and pauses the application.</p>\n\n<p>In the <code>.asm</code> file delete</p>\n\n<pre><code>INCLUDELIB kernel32.lib\nINCLUDELIB user32.lib\n</code></pre>\n\n<p>and let Visual Studio them automatically include. Add to</p>\n\n<pre><code>INCLUDELIB Irvine32.lib\nINCLUDE Irvine32.inc\nINCLUDE macros.inc\n</code></pre>\n\n<p>the full path to the files. That's better than to change the settings of VS.</p>\n\n<p>Change</p>\n\n<pre><code>_calka proc near\n...\n_calka ENDP\n</code></pre>\n\n<p>to</p>\n\n<pre><code>calka PROC C\n...\ncalka ENDP\n</code></pre>\n\n<p>13) Build and run with <kbd>CTRL-F5</kbd>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/Nq3bE.gif\" alt=\"Screenshot\"></p>\n\n<p>The application will be opened in a new window.</p>\n"}], "owner": {"reputation": 75, "user_id": 4975390, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44fa0425a346020dcb682ea760853fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Nichten", "link": "https://stackoverflow.com/users/4975390/nichten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1053, "favorite_count": 0, "accepted_answer_id": 31056748, "answer_count": 1, "score": 1, "last_activity_date": 1580484074, "creation_date": 1435180477, "last_edit_date": 1447776028, "question_id": 31037176, "link": "https://stackoverflow.com/questions/31037176/running-asm-procedure-in-cpp-file", "title": "Running asm procedure in cpp file", "body": "<p>I am trying to run procedure from asm file in cpp file but i get such errors:</p>\n\n<pre><code>Error   1   error LNK2019: unresolved external symbol _calka referenced in function _main   D:\\Addem\\main.obj   Project\nError   2   error LNK1120: 1 unresolved externals   D:\\Addem\\Debug\\Project.exe  1   1   Project\n</code></pre>\n\n<p>Here is my main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std; \n\nextern \"C\" void calka();\n\nint main()\n{\n    calka();\n\n    system(\"Pause\");\n    return 0;\n}\n</code></pre>\n\n<p>And my calka.asm</p>\n\n<pre><code>; The calka Subroutine    (calka.asm)\npublic _calka                  \n\nINCLUDELIB kernel32.lib\nINCLUDELIB user32.lib\nINCLUDELIB Irvine32.lib\nINCLUDE Irvine32.inc\nINCLUDE macros.inc\n\n\n\n.data\nBUFFER_SIZE = 50\nbuffer BYTE BUFFER_SIZE DUP(?)\nfilename    BYTE 80 DUP(0)\nfileHandle  HANDLE ?\nRozmiar dw ?\nZnak db ?\nSuma dw ?\nMinus db 0\nwynik dw ?\ntemp dd ?\n\n.code\n_calka proc near\n\n; Let user input a filename.\n    mWrite \"Podaj nazwe pliku (z rozszerzeniem): \"\n    mov edx,OFFSET filename\n    mov ecx,SIZEOF filename\n    call    ReadString\n\n; Open the file for input.\n    mov edx,OFFSET filename\n    call    OpenInputFile\n    mov fileHandle,eax\n\n; Check for errors.\n    cmp eax,INVALID_HANDLE_VALUE        ; error opening file?\n    jne file_ok                 ; no: skip\n    mWrite &lt;\"Cannot open file\",0dh,0ah&gt;\n    jmp quit                        ; and quit\nfile_ok:\n\n; Read the file into a buffer.\n    mov edx,OFFSET buffer\n    mov ecx,BUFFER_SIZE\n    call    ReadFromFile\n    jnc check_buffer_size           ; error reading?\n    mWrite \"Error reading file. \"       ; yes: show error message\n    call    WriteWindowsMsg\n    jmp close_file\n\ncheck_buffer_size:\n    cmp eax,BUFFER_SIZE         ; buffer large enough?\n    jb  buf_size_ok             ; yes\n    mWrite &lt;\"Error: Buffer too small for the file\",0dh,0ah&gt;\n    jmp quit                        ; and quit\n\nbuf_size_ok:    \n    mov buffer[eax],0       ; insert null terminator\n    ;mWrite \"File size: \"\n    ;call   WriteDec            ; display file size\n    ;call   Crlf\n\n; Display the buffer.\n\n\n; Pytanie o wielkosc przedzialu\n\n    mWrite \"Podaj wielkosc przedzialu h na osi x: \"\n    mov edx,OFFSET Rozmiar\n    mov ecx,SIZEOF Rozmiar\n    call    ReadDec\n\n    mov Rozmiar, ax\n\n\n    ;mWrite &lt;\"Buffer:\",0dh,0ah,0dh,0ah&gt;\n    ;mov    edx,OFFSET buffer   ; display the buffer\n    ;call   WriteString\n    ;call   Crlf\n\n    mov ecx, 15\n    mov ebx, OFFSET buffer\n\nmov si, 0\n        jmp odczyt1\nodczyt:\n        mov ebx, temp\n        inc ebx\n\nodczyt1:\n        mov cl, byte ptr [ebx]\n        mov Znak, cl\n\n        mov temp, ebx\n\n        cmp Znak, '$' ;koniec pliku\n        je koniec\n        cmp Znak, 3bh ;srednik - nastepna liczba\n        je nastepna\n        cmp Znak, 20h ;spacja - ponowne wczytanie\n        je odczyt\n        cmp Znak, '-'\n        je Zmien_znak\n\n\n        mov al, Znak\n        sub al, 30h\n        mov bl, al\n        mov bh, 0\n        mov ax, 10\n        mul si\n        add ax, bx\n        mov si, ax\n        jmp odczyt\n\nZmien_znak:\n        mov Minus, 1\n        jmp odczyt\n\nnastepna:\n        cmp Minus, 0\n        je dodaj\n        jne odejm\ndodaj:\n        add Suma, si\n        mov si, 0\n        jmp odczyt\nodejm:\n        sub Suma, si\n        mov Minus, 0\n        mov si, 0\n        jmp odczyt\n\nkoniec:\n        cmp Minus, 0\n        je dod\n        jne minu\ndod:\n        add Suma, si\n        mov si, 0\n        jmp kon\nminu:\n        sub Suma, si\n        mov Minus, 0\n        mov si, 0\nkon:\n        mov ax, Suma\n        mul Rozmiar\n\n    mWrite \"Wynik calkowania: \"\n    cmp ax,0\n    ;mov ebx, eax\n    jg plus\n    mWrite \"-\"\n    mov bx, 0\n    sub bx, ax\n    mov ax, bx\n\nplus:\n    call WriteDec\n\n\nclose_file:\n    mov eax,fileHandle\n    call    CloseFile\n\n    ; Zeby aplikacja sie nie zamknela, heheszki :D\n    mov edx,OFFSET Rozmiar\n    mov ecx,SIZEOF Rozmiar\n    call    ReadString\n\nquit:\n    exit\n_calka ENDP\n\nEND\n</code></pre>\n\n<p>I have tried everything what I can focus on - adding obj files to linker and so on. I only want to type the name of file, read date from it and calculate it. Calka.asm works well unless I try to get it work in my cpp file.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "c", "pointers", "memory", "memcpy"], "comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1435180585, "post_id": 31037161, "comment_id": 50098514, "body": "Assuming the types check out, I believe that is valid. Just remember that the first statement won&#39;t typecheck like the second one will, so type errors will slip through if the first statement is used."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1435180640, "post_id": 31037161, "comment_id": 50098544, "body": "No that&#39;s not the same. <code>memcpy</code> copies the data pointed to by the source pointer to the address pointed to by the destination pointer. <code>ptr</code> will still point to the same address afterwards."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "reply_to_user": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1435180654, "post_id": 31037161, "comment_id": 50098552, "body": "@SilvioMayolo Maybe that is why it written that way.  I think someone was trying to dodge the type checker."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435181833, "post_id": 31037161, "comment_id": 50099091, "body": "@Makenbaccon: That&#39;s what casts are for. At worst, use pointer casts; they are still much more readable than this crap"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1435181927, "post_id": 31037161, "comment_id": 50099125, "body": "They can&#39;t be the same. The first one copies into what <code>ptr</code> points to, the other changes the value of <code>ptr</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1435182175, "post_id": 31037161, "comment_id": 50099260, "body": "@DavidSchwartz: It&#39;s actually <code>*(char *)ptr = (char *)&amp;value</code> No idea how <code>double</code> fits into this."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435182266, "post_id": 31037161, "comment_id": 50099301, "body": "@Olaf kind of odd, isn&#39;t it?"}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435182403, "post_id": 31037161, "comment_id": 50099363, "body": "@Olaf I guess I need to figure out if he was trying to copy the value of the <code>double</code> into where <code>ptr</code> is pointing, or if he wanted the address of the <code>double</code> copied into <code>ptr</code>.  Whichever he intended, he seemed to do neither."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1435184639, "post_id": 31037161, "comment_id": 50100271, "body": "sizeof(double) is not guaranteed to be the same as sizeof(char*), insofar saying &quot;Well, you&#39;re not wrong&quot; is wrong. It may work (&quot;work&quot;) but it&#39;s initializing a pointer with a non-safely derived pointer by overwriting the raw bit pattern. In other words, undefined behavior."}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1435181196, "post_id": 31037216, "comment_id": 50098789, "body": "I&#39;m a little confused by your example.  I&#39;ve made an edit, would you be able to readdress your answer?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1435181258, "post_id": 31037216, "comment_id": 50098816, "body": "@Makenbaccon: I&#39;ve already updated this answer in response to your edit."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1435181393, "post_id": 31037216, "comment_id": 50098882, "body": "=) thanks. I&#39;ll respond to your edit: if <code>value</code> is a double, <code>&amp;value</code> is a <code>double *</code>, correct? To be most acurate, it should be <code>sizeof(double *)</code>, correct?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1435182286, "post_id": 31037216, "comment_id": 50099312, "body": "No, that&#39;s incorrect.  If <code>value</code> is <code>double</code>, then <code>&amp;value</code> is <code>double *</code>, and you should <code>memcpy(..., sizeof(double))</code>."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1435245362, "post_id": 31037216, "comment_id": 50129888, "body": "It is definitely something more esoteric.  I think whatever value that <code>double</code> is holding isn&#39;t really a <code>double</code>, I think the previous developer just needed a <code>double</code> sized word."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": false, "score": 2, "last_activity_date": 1435181091, "last_edit_date": 1435181091, "creation_date": 1435180633, "answer_id": 31037216, "question_id": 31037161, "link": "https://stackoverflow.com/questions/31037161/using-memcpy-to-assign-a-pointer-an-address/31037216#31037216", "title": "Using `memcpy()` to assign a pointer an address", "body": "<p>No, it is absolutely different.  Let's add some types:</p>\n\n<pre><code>char *addr;\nchar **ptr = &amp;addr;\nchar *value = \"Hello\";\n\nmemcpy(ptr, &amp;value, sizeof(char *));\n// Equivalent to...\n*ptr = value;\n</code></pre>\n\n<p>Better to avoid <code>memcpy()</code> if it is possible to use <code>=</code> instead.</p>\n\n<p>Among other things, if the types are incorrect, then <code>=</code> will generate the proper diagnostics, while <code>memcpy()</code> will happily crash your program or worse.</p>\n\n<p>Given the types,</p>\n\n<pre><code>double value, value2;\nvoid *ptr = &amp;value2;\n\n// This copies `value` into `value2`.\nmemcpy(ptr, &amp;value, sizeof(double));\n</code></pre>\n\n<p>Using <code>sizeof(char *)</code> is wrong, because it should be <code>sizeof(double)</code> if you are copying a <code>double</code>.</p>\n\n<p>Theoretically, you could be doing something more esoteric, but I'll ignore that possibility.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1435181100, "post_id": 31037235, "comment_id": 50098747, "body": "@DietrichEpp: You are right, thanks. I just read <code>&amp;ptr</code>. Updated my answer. (Who writes such crap?)"}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1435181802, "post_id": 31037235, "comment_id": 50099077, "body": "Ya, I&#39;ve been hired to fix this code.  The problem is that I&#39;ve been told its already working.  I need to determine what he was doing here so I don&#39;t screw it up"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435182062, "post_id": 31037235, "comment_id": 50099201, "body": "Oh, my! I know that. Had such a job myself: &quot;The code is almost complete, just some additions required&quot;. It ended up 1 year work for code which I had rewritten in half the time more clearly and with much less collywobbles. Pro-side: I&#39;m a freelancer - longer safe income :-)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1435187958, "post_id": 31037235, "comment_id": 50101313, "body": "no, it&#39;s like <code>*ptr = value;</code>  . <code>memcpy</code> takes the address of both source and destination. <code>value</code> must have type <code>char *</code> and <code>ptr</code> have type <code>char **</code> (although you could argue that <code>void *</code> would work). There&#39;s no aliasing problem if those were the types (although they aren&#39;t as OP&#39;s edit shows)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1435188413, "post_id": 31037235, "comment_id": 50101425, "body": "@MattMcNabb: You&#39;re right. Just edited. That is apparently more confusing that I thought. Even more reason not to use this. Regarding aliasing: I just remember about some question some days ago :-)"}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 1, "last_activity_date": 1435188744, "last_edit_date": 1435188744, "creation_date": 1435180699, "answer_id": 31037235, "question_id": 31037161, "link": "https://stackoverflow.com/questions/31037161/using-memcpy-to-assign-a-pointer-an-address/31037235#31037235", "title": "Using `memcpy()` to assign a pointer an address", "body": "<p>That <code>memcpy</code> is like</p>\n\n<pre><code>*ptr = value;\n</code></pre>\n\n<p>So <code>ptr</code> has to point to a <code>char *</code> (assuming <code>value</code> is, according to the <code>sizeof</code>). </p>\n\n<p>Assuming <code>ptr</code> is <code>char **</code> (or you change that to take the address of <code>ptr</code>: <code>&amp;ptr</code>) and properly initialized, I see no actual problem <strong>here</strong>. However, this code inhibits type checking by the compiler and is likely slower than a simple assignment.</p>\n\n<p>It also might exhibit problems with aliasing if source and destination have different typs (as the edit implies). It also will likely prohibit optimizations.</p>\n\n<p>Oh, and: that code is more difficult to read/manually verify/understand, IOW: to maintain (as the comments and my own edits show). Maybe the developer was after job safety by obfuscation?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>After your edit adding type information: That code is even worse. It does not even use the same types. My advise: kick the author where it really hurts and then rewrite the code <em>very</em> carefully. Note: whoever write such code, very likely writes more crap elsewhere.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 4966735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ee0c3c455559ffb59bf60516132f7c?s=128&d=identicon&r=PG&f=1", "display_name": "Brockr22", "link": "https://stackoverflow.com/users/4966735/brockr22"}, "is_accepted": false, "score": 0, "last_activity_date": 1435181045, "creation_date": 1435181045, "answer_id": 31037320, "question_id": 31037161, "link": "https://stackoverflow.com/questions/31037161/using-memcpy-to-assign-a-pointer-an-address/31037320#31037320", "title": "Using `memcpy()` to assign a pointer an address", "body": "<p>The assignment notation is much more concise and readable then using memcpy and allows compiler optimization.  The <code>=</code> means an assignment, while memcpy just copies memory.<br>\n<em>You should stick with the <code>=</code> assignment</em></p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1435181436, "post_id": 31037365, "comment_id": 50098902, "body": "&quot;This changes the address of the pointer&quot;? Ehm.. it changes its value."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1435181645, "post_id": 31037365, "comment_id": 50099001, "body": "This has been closest to helping me understand; just so that I make sure i get it...<code>memcpy()</code> goes to the address pointed to by <code>ptr</code>, then writes <code>sizeof(char *)</code> bytes from the address pointed to by <code>&amp;value</code> to the address pointed to by <code>ptr</code>, correct?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435182404, "post_id": 31037365, "comment_id": 50099364, "body": "@Olaf You&#39;re right, badly phrased - lack of coffee is my excuse."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1435182436, "post_id": 31037365, "comment_id": 50099383, "body": "@Makenbaccon Correct. <code>memcpy</code> effectively dereferences both of the pointers you provide - it doesn&#39;t change the pointers themselves."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1435182556, "post_id": 31037365, "comment_id": 50099449, "body": "I guess now I need to figure out what the previous developer actually wanted to do...hmmm. Thanks!"}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 2, "last_activity_date": 1435182388, "last_edit_date": 1435182388, "creation_date": 1435181192, "answer_id": 31037365, "question_id": 31037161, "link": "https://stackoverflow.com/questions/31037161/using-memcpy-to-assign-a-pointer-an-address/31037365#31037365", "title": "Using `memcpy()` to assign a pointer an address", "body": "<p>This changes the <strong>address</strong> that the pointer <code>ptr</code> points to:</p>\n\n<pre><code>ptr = &amp;value;\n</code></pre>\n\n<p>This changes the <strong>data</strong> at the address that the pointer <code>ptr</code> points to:</p>\n\n<pre><code>memcpy(ptr, &amp;value, sizeof(char*));\n</code></pre>\n\n<p>In the second case, <code>ptr</code> still points to the same address as before the call. So in no way are they the same.</p>\n"}], "owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6324, "favorite_count": 0, "accepted_answer_id": 31037365, "answer_count": 4, "score": 1, "last_activity_date": 1435188744, "creation_date": 1435180415, "last_edit_date": 1435185047, "question_id": 31037161, "link": "https://stackoverflow.com/questions/31037161/using-memcpy-to-assign-a-pointer-an-address", "title": "Using `memcpy()` to assign a pointer an address", "body": "<p>Is</p>\n\n<pre><code>memcpy( ptr, &amp;value, sizeof(char *) );\n</code></pre>\n\n<p>the same as</p>\n\n<pre><code>ptr = &amp;value;\n</code></pre>\n\n<p>.....</p>\n\n<p>I've never seen <code>memcpy()</code> used to do this before.\nIt seems like I should respond to the developer of this code with the phrase \"Well, you're not wrong.\" It seems like a bit wordier than it needs to be.</p>\n\n<p>Edit: It seems important to note that <code>ptr</code> is <code>void * ptr</code>. <code>value</code> is <code>double value</code>.</p>\n\n<hr>\n\n<p>Edit2: For those who are interested in following this problem down its rabbit hole with me read along.  This bit of code was flagged by static analysis as a potential buffer overflow.  The static analysis was worried that the destination buffer <code>ptr</code> might not have enough space to hold a <code>sizeof(char *)</code> worth of information.<br>\nRather than deal with the problem it gave me I tried to understand exactly what this <code>memcpy()</code> did (thank you for helping me with that).  Once I understood what was happening, I had to understand why the size of memory given to <code>memcpy()</code> was <code>sizeof(char *)</code>; the function this <code>memcpy()</code> is in is called one time, and that one time it looks like this:</p>\n\n<pre><code>SdmJniGetPointer(blah, blah, &amp;ptr)\n</code></pre>\n\n<p>Meaning that the actual value of <code>ptr</code> within this function, and in the <code>memcpy()</code> call, is the address of another pointer!</p>\n\n<p>It was bizzare to me that the previous developer would <code>memcpy()</code> a <code>sizeof(char *)</code> amount of data because this system is compiled on 32 and 64 bit machines.  However, because he passes in the address to a pointer (<code>&amp;ptr</code>) into the function as <code>ptr</code>, he not only circumvents this shifting from 4-byte pointers to 8-byte pointers depending on the system architecture but wields it exactly as he meant too (I think).  In the end, on a 64-bit system, all of the <code>double value</code> is copied into the address pointed to by <code>ptr</code> which is really an address to a different pointer (<code>&amp;ptr</code>), and on 32-bit machines, half of it is copied to the location <code>ptr</code> which is really <code>&amp;ptr</code>.  Now I just need to figure out what that <code>double value</code> really represents, and why he would be ok bisecting it.</p>\n\n<p>If that didn't make sense, I'll try again, but it feels a like he was Inception-ing the pointer. =)</p>\n"}, {"tags": ["c++", "matlab", "matlab-compiler"], "comments": [{"owner": {"reputation": 4720, "user_id": 297353, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/80f939139c895b24aebedd1481db0ec6?s=128&d=identicon&r=PG", "display_name": "AruniRC", "link": "https://stackoverflow.com/users/297353/arunirc"}, "edited": false, "score": 0, "creation_date": 1435207820, "post_id": 31037053, "comment_id": 50105969, "body": "The later versions of Matlab do have some reported cases of extreme memory usage. You could try running it with the -nodesktop option to disable the GUI and just use the command line if the memory usage is too extreme"}, {"owner": {"reputation": 523, "user_id": 3097348, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b54ab41a04da2a1f6ebb53e607b37c8c?s=128&d=identicon&r=PG&f=1", "display_name": "lnk", "link": "https://stackoverflow.com/users/3097348/lnk"}, "reply_to_user": {"reputation": 4720, "user_id": 297353, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/80f939139c895b24aebedd1481db0ec6?s=128&d=identicon&r=PG", "display_name": "AruniRC", "link": "https://stackoverflow.com/users/297353/arunirc"}, "edited": false, "score": 0, "creation_date": 1435314054, "post_id": 31037053, "comment_id": 50160277, "body": "@ AruniRC The problem is not that matlab consume extreme amount of memory. The problem is that it does not free energy after I terminate it"}, {"owner": {"reputation": 7911, "user_id": 2056067, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WkkfD.png?s=128&g=1", "display_name": "A. Donda", "link": "https://stackoverflow.com/users/2056067/a-donda"}, "edited": false, "score": 0, "creation_date": 1435325337, "post_id": 31037053, "comment_id": 50167521, "body": "@lnk, is the Matlab runtime itself terminated?"}, {"owner": {"reputation": 523, "user_id": 3097348, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b54ab41a04da2a1f6ebb53e607b37c8c?s=128&d=identicon&r=PG&f=1", "display_name": "lnk", "link": "https://stackoverflow.com/users/3097348/lnk"}, "edited": false, "score": 0, "creation_date": 1435340906, "post_id": 31037053, "comment_id": 50177040, "body": "@ A. Donda Matlab runtime is &quot;loaded&quot; to my .exe program. I do it with this lines: mclInitializeApplication(NULL,0); mylibInitialize();. After that lines executed memory consumption increases and I can call matlab functions. To close matlab I use this lines: mylibTerminate(); mclTerminateApplication();. After that lines executed memory is not free. However if I try to call matlab function program gives an error. So I think that Matlab is terminated"}, {"owner": {"reputation": 7911, "user_id": 2056067, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WkkfD.png?s=128&g=1", "display_name": "A. Donda", "link": "https://stackoverflow.com/users/2056067/a-donda"}, "edited": false, "score": 0, "creation_date": 1437672393, "post_id": 31037053, "comment_id": 51140206, "body": "@lnk, didn&#39;t catch your comment because with a space between @ and the name there is no notification. I can&#39;t comment on your code, but I&#39;d suggest to use a process monitor to verify the Matlab runtime has been cleanly terminated."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1491388494, "post_id": 31037053, "comment_id": 73527109, "body": "Did you link to your DLL statically, or with LoadLibrary?   If with LoadLibrary, there&#39;s an excellent chance some internal statics/globals were populated and would be freed when you call FreeLibrary."}], "owner": {"reputation": 523, "user_id": 3097348, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b54ab41a04da2a1f6ebb53e607b37c8c?s=128&d=identicon&r=PG&f=1", "display_name": "lnk", "link": "https://stackoverflow.com/users/3097348/lnk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435307695, "creation_date": 1435180051, "last_edit_date": 1435307695, "question_id": 31037053, "link": "https://stackoverflow.com/questions/31037053/matlab-runtime-does-not-free-memory-after-shut-down", "title": "Matlab Runtime does not free memory after shut down", "body": "<p>I have created a shared library using Matlab Compiler according to <a href=\"http://blogs.mathworks.com/loren/2011/02/03/creating-c-shared-libraries-and-dlls/\" rel=\"nofollow\">this</a> example. I have integrated that library into my C++ project. When I initialize the matlab runtime and library, the RAM consumption of my program increases drastically. The problem is that when I shut down the library and the matlab runtime the RAM consumption of the program does not reduce.</p>\n"}, {"tags": ["c++", "memory-management", "vector"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1435179700, "post_id": 31036937, "comment_id": 50098050, "body": "What is it you&#39;re trying to achieve here?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 2, "creation_date": 1435179781, "post_id": 31036937, "comment_id": 50098100, "body": "Nearly every time an object contains a pointer to a <code>vector</code>, <code>string</code> or <code>map</code>, you are PROBABLY doing SOMETHING wrong."}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "edited": false, "score": 0, "creation_date": 1435179811, "post_id": 31036937, "comment_id": 50098117, "body": "I&#39;m allocating X amount of components, where components are an instance of the instance data. So I&#39;m saying, &quot;Hey, allocate enough memory for 10 components!&quot; And then getting/setting those instances as needed."}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1435179968, "post_id": 31036937, "comment_id": 50098186, "body": "@MatsPetersson, I think your missing the exercise here. How else would you allocate the entire memory buffer as a single allocation and then just let entity, vertices, etc, point to different parts of that buffer?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435180158, "post_id": 31036937, "comment_id": 50098280, "body": "@Stradigos Don&#39;t use raw pointers, <code>new()</code>,<code>delete</code>,<code>malloc()</code>,<code>free()</code>, etc. yourself please. For most of the common use cases you&#39;re just doing it wrong. You rather use one of the <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">Standard container</a> or <a href=\"http://en.cppreference.com/w/cpp/memory\" rel=\"nofollow noreferrer\">Dynamic memory management</a> classes."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435180353, "post_id": 31036937, "comment_id": 50098381, "body": "@Stradigos <i>&quot; I think your missing the exercise here ...&quot;</i> I suppose no one is missing anything from your question, besides you need to be clearer what you&#39;re actually asking about."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435180437, "post_id": 31036937, "comment_id": 50098431, "body": "@Stradigos you have found out what happens when you use a vector and no one called the constructor to set up all of its book-keeping and internal structures. Lot more going on in your average constructor than memory allocation."}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435180667, "post_id": 31036937, "comment_id": 50098560, "body": "@user4581301, even when I do this: std::vector&lt;float&gt; *vertices = new std::vector&lt;float&gt;(0); in the initialization I get the same error. Or is that not sufficient enough?"}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "edited": false, "score": 0, "creation_date": 1435180804, "post_id": 31036937, "comment_id": 50098617, "body": "@ \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6, What don&#39;t you understand about wanting to allocate a single chunk of memory for 10 instances of the component and letting the pointers point to different parts of the allocated chunk? It works, except with vectors, and I&#39;m trying to learn why... I posted links for a reason. Check them out if you&#39;re still lost. Maybe you&#39;ll learn something too."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1435180984, "post_id": 31036937, "comment_id": 50098704, "body": "If you want to allocate one large lump of memory for &quot;everything&quot;, then you should not use a pointer to a vector - in fact, you probably shouldn&#39;t use a vector at all - although I&#39;m reasonably sure it makes absolutely no difference with the overhead of a pointer to a vector or not, unless you use one global array - as soon as you use SOME sort of pointer to allocated memory, you may just as well use a vector."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435181146, "post_id": 31036937, "comment_id": 50098764, "body": "On it&#39;s own <code>std::vector&lt;float&gt; *vertices = new std::vector&lt;float&gt;(0);</code> is sufficient. Unfortunately, assigning it willy-nilly to an array of unaligned bytes is going to blow up your CPU when it tries to assign an int to an odd-numbered memory address."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435181212, "post_id": 31036937, "comment_id": 50098795, "body": "@Stradigos <i>&quot;Maybe you&#39;ll learn something too.&quot;</i> Bub <a href=\"http://www.nwliandmedispa.com/wp-content/uploads/2015/01/lash2.bmp\" rel=\"nofollow noreferrer\"><b>(-_-)</b></a> !"}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1435182120, "post_id": 31036937, "comment_id": 50099238, "body": "@MatsPetersson, This is for a game engine, so I don&#39;t want to be allocating and deallocating memory, especially non-contiguous memory, at a whim. By pre-allocating chunks, I can reuse the same memory until I outgrow the need for it, at which time I would allocate a new chunk. I could use the swap + pop_back trick on vectors to minimize the performance impact and keep it somewhat contiguous, but I&#39;ve read reports that indicate this method is better. Thank you for the intelligent responses. I&#39;m interested in hearing any more wisdom you have."}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435182199, "post_id": 31036937, "comment_id": 50099270, "body": "@user4581301, the memory allocator I&#39;m using (<a href=\"https://bitbucket.org/bitsquid/foundation/src\" rel=\"nofollow noreferrer\">bitbucket.org/bitsquid/foundation/src</a>) uses forward aligned bytes, I think. I&#39;ll have to confirm that, but if that&#39;s true does that mitigate the issue or is there something more I need to watch out for?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1435182265, "post_id": 31036937, "comment_id": 50099300, "body": "@Stradigos Better <a href=\"http://www.falleri.ch/index.php?option=com_content&amp;view=article&amp;id=263:es-isch-emal-es-bueebli-gsi\" rel=\"nofollow noreferrer\"><b>B&#252;ebli</b></a> (our nearest neighbours have ingeniously subtle speech). Have a look at <a href=\"http://stackoverflow.com/questions/222557/what-uses-are-there-for-placement-new\">placement <code>new()</code></a> may be."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435182999, "post_id": 31036937, "comment_id": 50099640, "body": "Ran a bit of test code. Looks like my AMD chip is a lot kinder on misaligned data than I&#39;m used to. I don&#39;t know what the performance impact was, but the program did not crash reading a misaligned long long. @Stradigos, I know where you&#39;re coming from. The less time spent on memory management, the better. I do this sort of shtick all the time in embedded systems. If you need a pool of pre-allocated vectors to pull vectors from at need, make a huge array of vectors. Don&#39;t malloc the suckers or mix them with other data. They weren&#39;t made to be used that way."}], "answers": [{"tags": [], "owner": {"reputation": 77, "user_id": 5046252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCHlB.gif?s=128&g=1", "display_name": "Albert Baker", "link": "https://stackoverflow.com/users/5046252/albert-baker"}, "is_accepted": false, "score": 1, "last_activity_date": 1435182216, "last_edit_date": 1495540277, "creation_date": 1435182216, "answer_id": 31037632, "question_id": 31036937, "link": "https://stackoverflow.com/questions/31036937/how-can-i-allocate-memory-for-a-data-structure-that-contains-a-vector/31037632#31037632", "title": "How can I allocate memory for a data structure that contains a vector?", "body": "<p>I think I see what you are trying to do.  </p>\n\n<p>There are numerous issues.  First.  You are making a buffer of random data, telling C++ that a Vector sized piece of it is a Vector.   But, at no time do you actually call the constructor to Vector which will initialize the pointers and constructs inside to viable values.  </p>\n\n<p>This has already been answered here: <a href=\"https://stackoverflow.com/questions/519808/call-a-constructor-on-a-already-allocated-memory\">Call a constructor on a already allocated memory</a></p>\n\n<p>The second issue is the line</p>\n\n<pre><code>instanceData.vertices[i] = vertices;\n</code></pre>\n\n<p>instanceData.vertices is a pointer to a Vector, so you actually need to write </p>\n\n<pre><code>(*(instanceData.vertices))[i]  \n</code></pre>\n\n<p>The third issue is that the contents of *(instanceData.vertices) are floats, and not Vector, so you should not be able to do the assignment there.</p>\n"}, {"comments": [{"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435185351, "post_id": 31037674, "comment_id": 50100541, "body": "Did you take a look at that Bitsquid ECS link in the original post by chance? Even after reading that and understanding the necessity, are you still dead set on the first solution? Here&#39;s my implementation of what that link talks about: <a href=\"http://pastebin.com/htPeXUye\" rel=\"nofollow noreferrer\">pastebin.com/htPeXUye</a> @user4581301, this is for you too since you&#39;ve been so kind.  The pastebin link doesn&#39;t feature the MeshSystem I&#39;m working on, which needs to vectors to handle the realtime need of mesh manipulation. It&#39;s pretty much the same as Transform, but with different a different data structure."}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "edited": false, "score": 0, "creation_date": 1435185616, "post_id": 31037674, "comment_id": 50100626, "body": "I&#39;m hearing what you guys are saying, I really am, but Bitsquid isn&#39;t an indie engine and the developer isn&#39;t a novice. Autodesk just acquired the engine, so it has AAA interest. I think there&#39;s some really good ideas in it, but now you guys are making me doubt lol.  By the way, this post seems to be a solution for using vectors with this method, but I&#39;m trying to understand it more: <a href=\"http://bitsquid.blogspot.com/2010/09/custom-memory-allocation-in-c.html?showComment=1329474140968#c3748357253605756112\" rel=\"nofollow noreferrer\">bitsquid.blogspot.com/2010/09/&hellip;</a> Just now learning about in-place constructors."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "edited": false, "score": 1, "creation_date": 1435187881, "post_id": 31037674, "comment_id": 50101290, "body": "@Stradigos Important point you aren&#39;t taking from bitsquid. It&#39;s using blocks of simple and contiguous data. std::vector is neither. The approach is not revolutionary. I used to do that all the time programming for 6804s. Because it works. You need to know where it works and where it does not, but a lot of that is doing what you&#39;re doing:Experimenting. Knowing how to bend the system to do what you want is good, too. Look into overloading <code>new</code> to draw from your reserved memory pool if you need to create more complicated structures and custom allocators."}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435199735, "post_id": 31037674, "comment_id": 50103988, "body": "@user4581301 Thanks for all your great, non-judgmental advice today. I was super frustrated at the start. The approach is not revolutionary, I agree, but I feel is often misunderstood and met with real resistance from people who don&#39;t understand or appreciate with a departure from &quot;proper OOP&quot; can do. The right tool for the right job though. I&#39;m still learning, and this is one tool I intend to master."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1435208013, "post_id": 31037674, "comment_id": 50106031, "body": "What 4581301 said, if you want to do things in a buffer, use a typed pointer to access the memory area like a built-in array.  Do not use std::vector for that.  But std::vector is much easier and safer, and with modern compilers should be fast (as long as you don&#39;t get a bunch of temporary objects involved by accident).  I&#39;ll try to post the code in the morning."}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435210332, "post_id": 31037674, "comment_id": 50106819, "body": "KennyOstrom, and @user4581301. Got it working :-) Proof: <a href=\"http://screencast.com/t/3hO5fyy6KNz\" rel=\"nofollow noreferrer\">screencast.com/t/3hO5fyy6KNz</a> Intro is just showing off the classes, I check the values at the end. Tomorrow I need to read on whether or not I&#39;m leaking anything by using the in place new operator. I&#39;m almost certain I am and that I need to call a special deconstructor of some sort."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "edited": false, "score": 1, "creation_date": 1435249623, "post_id": 31037674, "comment_id": 50132865, "body": "@Stradigos line 42 of the center window you shouldn&#39;t need those <code>memcpy</code>&#39;s. <code>new(newData.entity+size)</code> should have just made and initialized a vector at newData.entity+size just the way you wanted. However, vector does not actually contain its data, just a pointer to it, so you have a memory leak if you put that instance away without manually destroying the vector. This sort of memory management is exactly what bitsquid is trying to avoid. Using a custom allocator with your vector can help you out here, but you&#39;re better off not using vector at all and instead using a simpler structure."}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435252337, "post_id": 31037674, "comment_id": 50134464, "body": "@user4581301 If I decide to allocate more space I&#39;ll still need to copy the old allocated data into the new space, no? And I&#39;ve seen you guys mention I should be using something other than vector a few times, but I don&#39;t know what else to use if not a vector. The data structure is holding mesh data that could possibly change frame to frame, so it needs to be a variable size. I know that sort of memory management is what bitsquid was trying to avoid, but I don&#39;t see a way around it while still maintaining continuous memory like this. The end goal is reduced cache miss."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "edited": false, "score": 1, "creation_date": 1435254348, "post_id": 31037674, "comment_id": 50135618, "body": "@Stradigos memcpy is really, really dumb. Given a vector, it copies the element count and the pointer to the elements. Not the contents of the pointer. This leaves you with two vectors pointing at the same array. Normally this is doom, because one of the vectors would delete the array on resize or destruction and the other vector would be left pointing to bad memory. Doesn&#39;t happen to you because you aren&#39;t doing anything with the old vector, including calling the destructor. It does leave a maintenance issue if another coder takes your work."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1435255086, "post_id": 31037674, "comment_id": 50136028, "body": "If you use std::vector you MUST DISREGARD EVERYTHING ELSE about allocating or copying anything inside the vector.  Either you use std::vector member functions, or you do not use std::vector.  If you follow the ECS allocation examples, you will use built-in arrays and pointer arithmetic."}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435256939, "post_id": 31037674, "comment_id": 50137133, "body": "@user4581301 Oh wow that&#39;s bad. I see your point. And point taken from you, Kenny, as well. Accepting this answer now that I&#39;ve got a firmer understanding. Thanks again to you both."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "edited": false, "score": 1, "creation_date": 1435259773, "post_id": 31037674, "comment_id": 50138726, "body": "@Stradigos two solutions: Roll-your-own dynamic array where you control the memory allocation/deallocation/copying or allocate worst-case sized mesh pool and do the same partitioning trick to dole bits of it out to instances as needed. Vector is built to handle different use cases. for future reference, vector implements the <code>=</code> operator with enough smarts to efficiently copy itself. If that&#39;s not enough, <code>std::copy</code> can handle the rest. Also look into <code>std::move</code> for cases that you don&#39;t care about the old vector any more."}], "tags": [], "owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "is_accepted": true, "score": 3, "last_activity_date": 1435239840, "last_edit_date": 1435239840, "creation_date": 1435182442, "answer_id": 31037674, "question_id": 31036937, "link": "https://stackoverflow.com/questions/31036937/how-can-i-allocate-memory-for-a-data-structure-that-contains-a-vector/31037674#31037674", "title": "How can I allocate memory for a data structure that contains a vector?", "body": "<p>It looks like you want InstanceData.buffer to have the actual memory space which is allocated/deallocated/accessed by other things.  The entity and vertices pointers then point into this space.  But by trying to use std::vector, you are mixing up two completely incompatible approaches.</p>\n\n<p>1) You can do this with the language and the standard library, which means no raw pointers, no \"new\", no \"sizeof\".  </p>\n\n<pre><code>struct Point {float x; float y;} // usually this is int, not float\nstruct InstanceData {\n    Entity entity;\n    std::vector&lt;Point&gt; vertices;\n}\n</code></pre>\n\n<p>This is the way I would recommend.  If you need to output to a specific binary format for serialization, just handle that in the save method.</p>\n\n<p>2) You can manage the memory internal to the class, using oldschool C, which means using N*sizeof(float) for the vertices.  Since this will be extremely error prone for a new programmer (and still rough for vets), you must make all of this private to class InstanceData, and do not allow any code outside InstanceData to manage them.  Use unit tests.  Provide public getter functions.  I've done stuff like this for data structures that go across the network, or when reading/writing files with a specified format (Tiff, pgp, z39.50).  But just to store in memory using difficult data structures -- no way.</p>\n\n<p>Some other questions you asked:</p>\n\n<p>How do I allocate memory for std::vector?</p>\n\n<p>You don't.  The vector allocates its own memory, and manages it.  You can tell it to resize() or reserve() space, or push_back, but it will handle it.  Look at <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/container/vector</a></p>\n\n<p>How do I allocate memory for a vector [sic] in a buffer like this?</p>\n\n<p>You seem to be thinking of an array.  You're way off with your pseudo code so far, so you really need to work your way up through a tutorial.  You have to allocate with \"new\".  I could post some starter code for this, if you really need, which I would edit into the answer here.</p>\n\n<p>Also, you said something about vector increasing along another dimension.  Vectors are one dimensional.  You can make a vector of vectors, but let's not get into that.</p>\n\n<p>edit addendum:</p>\n\n<p>The basic idea with a megabuffer is that you allocate all the required space in the buffer, then you initialize the values, then you use it through the getters.</p>\n\n<p>The data layout is \"Header, Entity1, Entity2, ..., EntityN\"</p>\n\n<pre><code>// I did not check this code in a compiler, sorry, need to get to work soon\nMegaBuffer::MegaBuffer() {AllocateBuffer(0);}\nMegaBuffer::~MegaBuffer() {ReleaseBuffer();}\n\nMegaBuffer::AllocateBuffer(size_t size /*, whatever is needed for the header*/){\n    if (nullptr!=buffer)\n        ReleaseBuffer(); \n\n    size_t total_bytes = sizeof(Header) + count * sizeof(Entity)\n    buffer = new unsigned char [total_bytes];\n    header = buffer;\n\n    // need to set up the header\n    header-&gt;count = 0;\n    header-&gt;allocated = size;\n\n    // set up internal pointer\n    entity = buffer + sizeof(Header);\n}\n\nMegaBuffer::ReleaseBuffer(){\n    delete [] buffer;\n}\n\nEntity* MegaBuffer::operator[](int n) {return entity[n];}\n</code></pre>\n\n<p>The header is always a fixed size, and appears exactly once, and tells you how many entities you have. In your case there's no header because you are using member variables \"usedInstances\" and \"allocatednstances\" instead.  So you do sort of have a header but it is not part of the allocated buffer.  But you don't want to allocate 0 bytes, so just set usedInstances=0; allocatedInstances=0; buffer=nullptr;</p>\n\n<p>I did not code for changing the size of the buffer, because the bitsquid ECS example covers that, but he doesn't show the first time initialization. Make sure you initialize n and allocated, and assign meaningful values for each entity before you use them.</p>\n\n<p>You are not doing the bitsquid ECS the same as the link you posted.  In that, he has several different objects of fixed size in parallel arrays.  There is an entity, its mass, its position, etc.  So entity[4] is an entity which has mass equal to \"mass[4]\" and its acceleration is \"acceleration[4]\".  This uses pointer arithmetic to access array elements. (built in array, NOT std::Array, NOT std::vector)</p>\n\n<p>The data layout is \"Entity1, Entity2, ..., EntityN, mass1, mass2, ..., massN, position1, position2, ..., positionN, velocity1 ... \" you get the idea.  </p>\n\n<p>If you read the article, you'll notice he says basically the same thing everyone else said about the standard library.  You can use an std container to store each of these arrays, OR you can allocate one megabuffer and use pointers and \"built in array\" math to get to the exact memory location within that buffer for each item.  In the classic faux-pas, he even says \"This avoids any hidden overheads that might exist in the Array class and we only have a single allocation to keep track of.\"  But you don't know if this is faster or slower than std::Array, and you're introducing a lot of bugs and extra development time dealing with raw pointers.</p>\n"}], "owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 31037674, "answer_count": 2, "score": -1, "last_activity_date": 1435239840, "creation_date": 1435179608, "last_edit_date": 1495540712, "question_id": 31036937, "link": "https://stackoverflow.com/questions/31036937/how-can-i-allocate-memory-for-a-data-structure-that-contains-a-vector", "title": "How can I allocate memory for a data structure that contains a vector?", "body": "<p>If I have a struct instanceData:</p>\n\n<pre><code>struct InstanceData\n{\n    unsigned usedInstances;\n    unsigned allocatedInstances;\n    void* buffer;\n\n    Entity* entity;\n    std::vector&lt;float&gt; *vertices;\n};\n</code></pre>\n\n<p>And I allocate enough memory for an Entity and std::vector:</p>\n\n<pre><code>newData.buffer = size * (sizeof(Entity) + sizeof(std::vector&lt;float&gt;)); // Pseudo code\nnewData.entity = (Entity *)(newData.buffer);\nnewData.vertices = (std::vector&lt;float&gt; *)(newData.entity + size);\n</code></pre>\n\n<p>And then attempt to copy a vector of any size to it:</p>\n\n<pre><code>SetVertices(unsigned i, std::vector&lt;float&gt; vertices)\n{\n    instanceData.vertices[i] = vertices;\n}\n</code></pre>\n\n<p>I get an Access Violation Reading location error.</p>\n\n<p>I've chopped up my code to make it concise, but it's based on <a href=\"http://bitsquid.blogspot.com/2014/09/building-data-oriented-entity-system.html\" rel=\"nofollow noreferrer\">Bitsquid's ECS</a>. so just assume it works if I'm not dealing with vectors (it does). With this in mind, I'm assuming it's having issues because it doesn't know what size the vector is going to scale to. However, I thought the vectors might increase along another dimension, like this?:</p>\n\n<p><img src=\"https://i.stack.imgur.com/xQ3qO.png\" alt=\"enter image description here\"></p>\n\n<p>Am I wrong? Either way, <strong>how can I allocate memory for a vector in a buffer like this</strong>?</p>\n\n<p>And yes, <a href=\"https://stackoverflow.com/questions/4427738/allocate-memory-for-a-vector\">I know vectors manage their own memory</a>. That's besides the point. I'm trying to do something different.</p>\n"}, {"tags": ["c++", "c", "stack", "heap"], "comments": [{"owner": {"reputation": 1342, "user_id": 4780877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg9ru.jpg?s=128&g=1", "display_name": "Emacs User", "link": "https://stackoverflow.com/users/4780877/emacs-user"}, "edited": false, "score": 0, "creation_date": 1435179262, "post_id": 31036787, "comment_id": 50097818, "body": "The very best practice is to implement both options with flexibility to switch between implementations based on memory, computation speeds, and other load conditions."}, {"owner": {"reputation": 314, "user_id": 5029813, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5c89a34e553b0a7544b09b68124d67de?s=128&d=identicon&r=PG&f=1", "display_name": "99ProblemsAndTheyreAllCode", "link": "https://stackoverflow.com/users/5029813/99problemsandtheyreallcode"}, "reply_to_user": {"reputation": 1342, "user_id": 4780877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg9ru.jpg?s=128&g=1", "display_name": "Emacs User", "link": "https://stackoverflow.com/users/4780877/emacs-user"}, "edited": false, "score": 0, "creation_date": 1435179348, "post_id": 31036787, "comment_id": 50097856, "body": "@EmacsUser the application will be run server-side with generous allocation for memory/cpus."}, {"owner": {"reputation": 314, "user_id": 5029813, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5c89a34e553b0a7544b09b68124d67de?s=128&d=identicon&r=PG&f=1", "display_name": "99ProblemsAndTheyreAllCode", "link": "https://stackoverflow.com/users/5029813/99problemsandtheyreallcode"}, "reply_to_user": {"reputation": 1342, "user_id": 4780877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg9ru.jpg?s=128&g=1", "display_name": "Emacs User", "link": "https://stackoverflow.com/users/4780877/emacs-user"}, "edited": false, "score": 0, "creation_date": 1435179653, "post_id": 31036787, "comment_id": 50098021, "body": "@EmacsUser it feels wrong due to obfuscation of the end goal, it feels messy to include all the data globally. I know the global implementation will most likely be faster, but there is no separation of concerns"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435180085, "post_id": 31036787, "comment_id": 50098243, "body": "Would that not be &quot;C wrapped in <code>extern &quot;C&quot;</code>&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 2929, "user_id": 5031373, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8eb5ce3a29a47c2fde92470b1f1c714c?s=128&d=identicon&r=PG&f=1", "display_name": "jpyams", "link": "https://stackoverflow.com/users/5031373/jpyams"}, "is_accepted": false, "score": 0, "last_activity_date": 1435179698, "creation_date": 1435179698, "answer_id": 31036957, "question_id": 31036787, "link": "https://stackoverflow.com/questions/31036787/deciding-between-datastore-and-global-variables/31036957#31036957", "title": "Deciding between datastore and global variables", "body": "<p>For speed reasons and code clarity staticly define these variables.  Lay out your definitions nicely and comment generously to help future viewers of your code.  In a file, you can't comment to inform future editors what everything is.  It's just slower.</p>\n"}, {"tags": [], "owner": {"reputation": 1342, "user_id": 4780877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg9ru.jpg?s=128&g=1", "display_name": "Emacs User", "link": "https://stackoverflow.com/users/4780877/emacs-user"}, "is_accepted": false, "score": 0, "last_activity_date": 1435179947, "creation_date": 1435179947, "answer_id": 31037029, "question_id": 31036787, "link": "https://stackoverflow.com/questions/31036787/deciding-between-datastore-and-global-variables/31037029#31037029", "title": "Deciding between datastore and global variables", "body": "<p>The very best practice is to implement both options with flexibility to switch between implementations based on memory, computation speeds, and other load conditions.</p>\n\n<p>If the application will be run server-side with generous allocation for memory/cpu, then design to those conditions. Why \"feel wrong\" as you put it?</p>\n\n<p>Your end goal is not clearly defined. So obfuscation is not an issue yet. Obfuscation comes when you willfully redirect your coding to hide your tracks. But making a complete solution, if that is what is needed, is not obfuscation. </p>\n"}, {"comments": [{"owner": {"reputation": 314, "user_id": 5029813, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5c89a34e553b0a7544b09b68124d67de?s=128&d=identicon&r=PG&f=1", "display_name": "99ProblemsAndTheyreAllCode", "link": "https://stackoverflow.com/users/5029813/99problemsandtheyreallcode"}, "edited": false, "score": 0, "creation_date": 1435180615, "post_id": 31037137, "comment_id": 50098533, "body": "Good solution, easy to update with the ability to remove the overhead of reading a datastore everytime. Thank you"}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 2, "last_activity_date": 1435180323, "creation_date": 1435180323, "answer_id": 31037137, "question_id": 31036787, "link": "https://stackoverflow.com/questions/31036787/deciding-between-datastore-and-global-variables/31037137#31037137", "title": "Deciding between datastore and global variables", "body": "<p>It might be appropriate to generate a seperate C file from the CSV using a high level language, e.g. Python. Then either <code>#include</code> the generated file (only if used in a single module using <code>static</code>), or as a seperate compilation unit.</p>\n\n<p>That way you can easily change the values in the CSV/spreadsheet program of your choice, while still having all data available. The code generating program can be called by the build system, so no manual fiddling.</p>\n"}], "owner": {"reputation": 314, "user_id": 5029813, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5c89a34e553b0a7544b09b68124d67de?s=128&d=identicon&r=PG&f=1", "display_name": "99ProblemsAndTheyreAllCode", "link": "https://stackoverflow.com/users/5029813/99problemsandtheyreallcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 31037137, "answer_count": 3, "score": 0, "last_activity_date": 1447613063, "creation_date": 1435179034, "last_edit_date": 1447613063, "question_id": 31036787, "link": "https://stackoverflow.com/questions/31036787/deciding-between-datastore-and-global-variables", "title": "Deciding between datastore and global variables", "body": "<p><strong>Description</strong></p>\n\n<p>For a hybrid C/C++ (C++ wrapped in extern \"C\") application I'm writing I am trying to decide if it is better for me to include some static definitions my program needs to run as global variables or in an external datastore that needs to be read in every time it is run (i.e. a .csv file or sql database).</p>\n\n<p>My static definitions, when laid out in a csv file, take appx 15 columns each with a maximum of 40 definitions (less than that to begin, but up to 40 due to feature scaling).</p>\n\n<p><strong>Problem</strong></p>\n\n<p>I'm torn because it feels wrong to me to include so much data as global variables that get loaded with the program at compile time. However, the overhead of reading from a datastore every time I run the program after compiling seems unnecessary. </p>\n\n<p><strong>Question</strong></p>\n\n<p>What are the best practices here? My code needs to be portable enough for someone else to understand and I do not want to obfuscate it.</p>\n"}, {"tags": ["c++", "xcode", "clang++"], "comments": [{"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1435178855, "post_id": 31036530, "comment_id": 50097600, "body": "Your next step is to reduce your code to the smallest possible example that displays the problem, then add that code and the error messages it generates your question.  For more about this see this help page: <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 63, "user_id": 5046248, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-110v19sqz5k/AAAAAAAAAAI/AAAAAAAABPI/8toJvTvXV1U/photo.jpg?sz=128", "display_name": "DesiLinguist", "link": "https://stackoverflow.com/users/5046248/desilinguist"}, "reply_to_user": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1435184629, "post_id": 31036530, "comment_id": 50100268, "body": "Since I am fairly unfamiliar with the large-ish code base, trying to come up with an MCVE is quite challenging for me. However, I will try."}], "answers": [{"comments": [{"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1435179249, "post_id": 31036659, "comment_id": 50097813, "body": "operator &gt;&gt; is defined in a lot of places for a lot of different objects.  Do you know that he is using a stringstream?  It could be he needs to include &lt;istream&gt; or &lt;iostream&gt; or ...    We need more information."}], "tags": [], "owner": {"reputation": 2861, "user_id": 1008115, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Nmtel.jpg?s=128&g=1", "display_name": "PnotNP", "link": "https://stackoverflow.com/users/1008115/pnotnp"}, "is_accepted": false, "score": 1, "last_activity_date": 1435178684, "creation_date": 1435178684, "answer_id": 31036659, "question_id": 31036530, "link": "https://stackoverflow.com/questions/31036530/cannot-compile-code-with-clang-but-works-with-gcc/31036659#31036659", "title": "Cannot compile code with clang, but works with gcc", "body": "<p><code>operator&gt;&gt;</code> is defined for <code>istringstream</code>. Try to include <code>#include &lt;sstream&gt;</code> file in your source before wherever <code>namespace english</code> is defined.</p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 5046248, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-110v19sqz5k/AAAAAAAAAAI/AAAAAAAABPI/8toJvTvXV1U/photo.jpg?sz=128", "display_name": "DesiLinguist", "link": "https://stackoverflow.com/users/5046248/desilinguist"}, "edited": false, "score": 0, "creation_date": 1435184662, "post_id": 31037027, "comment_id": 50100280, "body": "Thanks! This seemed to help but now I run into a new error that I cannot seem to fix in the same way."}], "tags": [], "owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "is_accepted": true, "score": 5, "last_activity_date": 1435179941, "creation_date": 1435179941, "answer_id": 31037027, "question_id": 31036530, "link": "https://stackoverflow.com/questions/31036530/cannot-compile-code-with-clang-but-works-with-gcc/31037027#31037027", "title": "Cannot compile code with clang, but works with gcc", "body": "<p>As the error message states, <code>std::istream &amp; operator &gt;&gt; (std::istream &amp;is, english::CTag &amp;tag)</code> is defined in <code>src/english/tags.h</code>. \nBut since the template in <code>src/include/hash_stream.h</code> which calls it is declared before that file is included, the error occurs.</p>\n\n<p>The documentation already provides the solution:</p>\n\n<blockquote>\n  <p>Make sure the function you want to call is declared before the template that might call it. This is the only option if none of its argument types contain classes. You can do this either by moving the template definition, or by moving the function definition, or by adding a forward declaration of the function before the template.</p>\n</blockquote>\n\n<p>So either make sure this file is included <strong>before</strong> including <code>src/include/hash_stream.h</code>, or apply any of the solutions provided by the documentation.</p>\n"}], "owner": {"reputation": 63, "user_id": 5046248, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-110v19sqz5k/AAAAAAAAAAI/AAAAAAAABPI/8toJvTvXV1U/photo.jpg?sz=128", "display_name": "DesiLinguist", "link": "https://stackoverflow.com/users/5046248/desilinguist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4808, "favorite_count": 1, "accepted_answer_id": 31037027, "answer_count": 2, "score": 6, "last_activity_date": 1435185594, "creation_date": 1435178145, "last_edit_date": 1435185594, "question_id": 31036530, "link": "https://stackoverflow.com/questions/31036530/cannot-compile-code-with-clang-but-works-with-gcc", "title": "Cannot compile code with clang, but works with gcc", "body": "<p>I am trying to fix some bugs in an open source C++ project and the original author is currently too busy with his academic life to help. The code compiles just fine with <code>gcc-4.9</code> installed via macports. And I have been debugging with <code>lldb</code> on the command line. However, if possible, I would like to get the code to compile with <code>clang</code> since that would let me use Xcode and <code>lldb</code> together and make the bug easier to isolate.</p>\n\n<p>When I try to compile the code with <code>clang</code>, I get the following error: </p>\n\n<pre><code>In file included from ./src/include/hash.h:25:\n./src/include/hash_stream.h:18:11: error: call to function 'operator&gt;&gt;' that is neither visible in the template definition\n  nor found by argument-dependent lookup\n  iss &gt;&gt; table[key] ;\n      ^\n./src/common/tagger/implementations/collins/tagger.h:118:9: note: in instantiation of function template specialization\n  'operator&gt;&gt;&lt;CWord, english::CTag&gt;' requested here\n  i &gt;&gt; (*m_TopTags);\n    ^\n./src/english/tags.h:29:23: note: 'operator&gt;&gt;' should be declared prior to the call site or in namespace 'english'\ninline std::istream &amp; operator &gt;&gt; (std::istream &amp;is, english::CTag &amp;tag) {\n                  ^\n1 error generated.\nmake: *** [obj/english.postagger.o] Error 1\n</code></pre>\n\n<p>This error occurs in <a href=\"https://github.com/desilinguist/zpar/blob/master/src/include/hash_stream.h\" rel=\"noreferrer\">this</a> file which is basically trying to read a key, a <code>:</code>, and a value separated by spaces into a custom hash map. I have read the relevant <a href=\"http://clang.llvm.org/compatibility.html#dep_lookup\" rel=\"noreferrer\">section</a> in the clang compatibility guide but I cannot figure out what I need to change to get this to compile.</p>\n\n<p><strong>EDIT</strong>: Per @m-s, I modified <code>src/common/tagger/implementations/collins/tagger_include.h</code> to move <code>tags.h</code> above <code>hash_stream.h</code> and that seemed to fix that error. However, I now run into a new error:</p>\n\n<pre><code>In file included from ./src/common/conparser/implementations/muhua/weight.cpp:13:\nIn file included from ./src/common/conparser/implementations/muhua/weight.h:13:\nIn file included from ./src/common/conparser/weight_base.h:13:\nIn file included from ./src/common/conparser/base_include.h:10:\nIn file included from ./src/english/tags.h:43:\nIn file included from ./src/english/pos/penn_morph.h:15:\nIn file included from ./src/include/knowledge/tagdict.h:15:\nIn file included from ./src/include/hash.h:25:\n./src/include/hash_stream.h:15:11: error: call to function 'operator&gt;&gt;' that is neither visible in the template definition\n      nor found by argument-dependent lookup\n      iss &gt;&gt; key;\n          ^\n./src/include/learning/perceptron/hashmap_score_packed.h:282:7: note: in instantiation of function template specialization\n      'operator&gt;&gt;&lt;std::__1::pair&lt;unsigned long, unsigned long&gt;, CPackedScore&lt;double, 2048&gt; &gt;' requested here\n   is &gt;&gt; static_cast&lt; CHashMap&lt; K, CPackedScore&lt;SCORE_TYPE, PACKED_SIZE&gt; &gt; &amp;&gt;(score_map) ;\n      ^\n./src/common/conparser/implementations/muhua/weight.cpp:48:27: note: in instantiation of function template specialization\n      'operator&gt;&gt;&lt;std::__1::pair&lt;unsigned long, unsigned long&gt;, double, 2048&gt;' requested here\n   iterate_templates(file &gt;&gt;,;);\n                          ^\n./src/common/conparser/implementations/muhua/weight.h:133:4: note: expanded from macro 'iterate_templates'\n   left(m_mapS0cmN0tm)right\\\n   ^\n./src/include/pair_stream.h:16:16: note: 'operator&gt;&gt;' should be declared prior to the call site\nstd::istream &amp; operator &gt;&gt; (std::istream &amp;is, std::pair&lt;T1, T2&gt; &amp;p) {\n               ^\n1 error generated.\nmake: *** [obj/english.conparser/weight.o] Error 1\n</code></pre>\n\n<p>I tried to include <code>pair_stream.h</code> before <code>hash.h</code> but that doesn't seem to work and I am stumped again. Any help would be much appreciated. </p>\n\n<p><strong>EDIT 2</strong>: I actually thought about things and took another stab at this and now it all works. Thanks, everyone! StackOverflow is awesome :)</p>\n"}, {"tags": ["c++", "qt", "layout"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1435178794, "post_id": 31036526, "comment_id": 50097569, "body": "implement <code>addWwidget</code> as a member of your <code>my_widget</code>"}, {"owner": {"reputation": 107, "user_id": 1176476, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21b0f4875744b3d97fc916090abc507d?s=128&d=identicon&r=PG", "display_name": "user1176476", "link": "https://stackoverflow.com/users/1176476/user1176476"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1435179518, "post_id": 31036526, "comment_id": 50097942, "body": "Hello. layout() will still be an accessor. Also QWidget and QObject don&#39;t have any layout member variable. Even if i implement addWidget in MyWidget, i will still be unable to add new widgets to my_widget&#39;s layout. Thnx"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1435182726, "post_id": 31036526, "comment_id": 50099536, "body": "then also make the layout a member, too."}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1605714694, "last_edit_date": 1605714694, "creation_date": 1435180399, "answer_id": 31037158, "question_id": 31036526, "link": "https://stackoverflow.com/questions/31036526/how-can-i-add-dynamically-widget-into-a-widgets-layout-in-qt/31037158#31037158", "title": "How can i add dynamically widget into a widget&#39;s layout in QT", "body": "<p>What's wrong about <code>layout()</code> being an accessor? It works! It returns <code>QLayout *</code>, and you can add other widgets to it. Make sure you <code>show()</code> these widgets if the parent is already visible.</p>\n<p>You can also cast layouts, if you think being more specific would be useful in a particular layout:</p>\n<pre><code>auto *grid = qobject_cast&lt;QGridLayout*&gt;(parent-&gt;layout());\nif (grid)\n  // Add in the second column\n  grid-&gt;addWidget(widget, grid-&gt;rowCount(), 1);\nelse\n  parent-&gt;layout()-&gt;addWidget(widget);\nwidget-&gt;show();\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 1176476, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21b0f4875744b3d97fc916090abc507d?s=128&d=identicon&r=PG", "display_name": "user1176476", "link": "https://stackoverflow.com/users/1176476/user1176476"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3279, "favorite_count": 1, "accepted_answer_id": 31037158, "answer_count": 1, "score": -1, "last_activity_date": 1605714694, "creation_date": 1435178133, "question_id": 31036526, "link": "https://stackoverflow.com/questions/31036526/how-can-i-add-dynamically-widget-into-a-widgets-layout-in-qt", "title": "How can i add dynamically widget into a widget&#39;s layout in QT", "body": "<p>What i want to do is to add a widget in a widget's layout dynamically:</p>\n\n<pre><code>my_widget-&gt;layout()-&gt;addWidget(another_widget);\n</code></pre>\n\n<p>but sadly layout() method is an accessor.</p>\n\n<p>Another way to do this is use the ui variable of the MainWindow,</p>\n\n<pre><code>ui-&gt;my_widget_layout-&gt;addWidget(another_widget);\n</code></pre>\n\n<p>which gives me direct access to widget's layout. \nIs there another way to do this ?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c#", "c++", "mono", "marshalling", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 2579, "user_id": 1729349, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/QsdvA.jpg?s=128&g=1", "display_name": "inside", "link": "https://stackoverflow.com/users/1729349/inside"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1435178258, "post_id": 31036431, "comment_id": 50097306, "body": "#define APIFUNC extern &quot;C&quot; __declspec(dllexport)"}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 2, "creation_date": 1435178487, "post_id": 31036431, "comment_id": 50097435, "body": "I don&#39;t know a lot about marshalling, but I bet that the <code>sizeof(long)</code> is 8. It is on my 64-bit Ubuntu system under gcc. Use <code>int</code> or one of the sized types from <code>&lt;cstdint&gt;</code>. Or make two versions of the function in C# and call the proper one."}, {"owner": {"reputation": 2579, "user_id": 1729349, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/QsdvA.jpg?s=128&g=1", "display_name": "inside", "link": "https://stackoverflow.com/users/1729349/inside"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1435178669, "post_id": 31036431, "comment_id": 50097520, "body": "just found a workaround :)"}], "answers": [{"tags": [], "owner": {"reputation": 2579, "user_id": 1729349, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/QsdvA.jpg?s=128&g=1", "display_name": "inside", "link": "https://stackoverflow.com/users/1729349/inside"}, "is_accepted": false, "score": -1, "last_activity_date": 1435178905, "creation_date": 1435178905, "answer_id": 31036743, "question_id": 31036431, "link": "https://stackoverflow.com/questions/31036431/intptr-is-not-properly-marshaled-in-mono/31036743#31036743", "title": "IntPtr is not properly marshaled in mono", "body": "<p>I just found a workaround, I am forcing my IntPtrs to be marshaled as 4 bytes: </p>\n\n<pre><code>[DllImport(@\"libRT\", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.Cdecl)]\nprivate static extern uint DoChallenge(\n    [MarshalAs(UnmanagedType.U4)] // this is a fix\n    IntPtr pEncryptedBlob,\n    uint dwEncryptedBlobLen,\n    [MarshalAs(UnmanagedType.U4)]\n    IntPtr pDecryptedBlob,\n    uint dwMaxLen,\n    ref uint dwDecryptedBlobLen);\n</code></pre>\n\n<p>Result: </p>\n\n<p>C# result: </p>\n\n<pre><code>139700723537696\n139700723538064\n</code></pre>\n\n<p>C++ result: </p>\n\n<pre><code>pEncryptedBlob: 139700723537696 \npDecryptedBlob: 139700723538064\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "is_accepted": true, "score": 2, "last_activity_date": 1435185908, "creation_date": 1435185908, "answer_id": 31038419, "question_id": 31036431, "link": "https://stackoverflow.com/questions/31036431/intptr-is-not-properly-marshaled-in-mono/31038419#31038419", "title": "IntPtr is not properly marshaled in mono", "body": "<p>To remove platform specific implementation so your C# &amp; c/cpp code will run xplat  you should just pass a C# \"System.String\" to \"const char *src\". Interop marshalling will handle the rest.</p>\n\n<p>C signature of: </p>\n\n<pre><code>void myfunc (const char *src, size_t n);\n</code></pre>\n\n<p>C# DllImport of: </p>\n\n<pre><code>private static extern void myCfunc (string src, uint n);\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>var myString = \"Test\";\nmyCfunc(myString, myString.Length);\n</code></pre>\n\n<p>Interop with Native Libraries :\n<a href=\"http://www.mono-project.com/docs/advanced/pinvoke/\" rel=\"nofollow\">http://www.mono-project.com/docs/advanced/pinvoke/</a></p>\n"}], "owner": {"reputation": 2579, "user_id": 1729349, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/QsdvA.jpg?s=128&g=1", "display_name": "inside", "link": "https://stackoverflow.com/users/1729349/inside"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 31038419, "answer_count": 2, "score": 0, "last_activity_date": 1435185908, "creation_date": 1435177847, "question_id": 31036431, "link": "https://stackoverflow.com/questions/31036431/intptr-is-not-properly-marshaled-in-mono", "title": "IntPtr is not properly marshaled in mono", "body": "<p>I am trying to do a function P/Invoke using Mono on Ubuntu 14.04: </p>\n\n<pre><code>[DllImport(@\"libRT\", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.Cdecl)]\n    private static extern uint DoChallenge(\n        IntPtr pEncryptedBlob,\n        uint dwEncryptedBlobLen,\n        IntPtr pDecryptedBlob,\n        uint dwMaxLen,\n        ref uint dwDecryptedBlobLen);\n</code></pre>\n\n<p>Before I invoke the function in C#, I print the encrypted and decrypted values: </p>\n\n<pre><code>Console.WriteLine(pEncryptedBlob.ToString()); // value is 140640247632608\nConsole.WriteLine(pDecryptedBlob.ToString()); // values is 140640247634240\n\n// Do the challenge\nthis.errorCode = DoRtasChallenge(pEncryptedBlob, pDecryptedBlob,\n                    (uint)this.decryptedBlobBuffer.Length,\n                    ref this.decryptedBlobReturnLength);\n</code></pre>\n\n<p>Now in C++ code I print the values that I receive:</p>\n\n<pre><code>APIFUNC uint32_t DoChallenge(unsigned char * pEncryptedBlob,long dwEncryptedBlobLen,unsigned char * pDecryptedBlob,long dwMaxLen,long * dwDecryptedBlobLen)\n{ \n    fprintf(stderr, \"pEncryptedBlob: %ld \\n\",pEncryptedBlob);\n    fprintf(stderr, \"pDecryptedBlob: %ld \\n\",pDecryptedBlob);\n\n    // the output: \n    // pEncryptedBlob: 1 \n    // pDecryptedBlob: 140640603072256 \n}\n</code></pre>\n\n<p>So  it looks like both of IntPtrs are getting modified during the marshaling. </p>\n\n<p>I assume that this happens specifically because of Mono/Ubuntu 14.04 64 bit environment, because it works on Windows and Ubuntu 14.04 32 bit.</p>\n\n<p>Any ideas for the workaround? Thanks very much</p>\n"}, {"tags": ["c++", "batch-processing", "nested-loops"], "comments": [{"owner": {"reputation": 1618, "user_id": 4744142, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10205509523369034/picture?type=large", "display_name": "Michel Billaud", "link": "https://stackoverflow.com/users/4744142/michel-billaud"}, "edited": false, "score": 0, "creation_date": 1435178030, "post_id": 31036367, "comment_id": 50097162, "body": "You have no reason to believe that the number of values in the file is a multiple of 5, so your for loop may (and often will) run out of input data in the middle.  Hint: use only one loop (&quot;for each number from the file&quot;), and a counter for values already written on the current line."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1435180084, "post_id": 31036481, "comment_id": 50098242, "body": "Not that OP is likely to see this happen, but <code>amount % 5 == 0</code> fails at integer overflow."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 2, "last_activity_date": 1435177986, "creation_date": 1435177986, "answer_id": 31036481, "question_id": 31036367, "link": "https://stackoverflow.com/questions/31036367/in-c-how-can-i-make-integers-from-a-data-file-be-spaced-evenly-into-5-colums/31036481#31036481", "title": "In C++ How can I make integers from a data file be spaced evenly into 5 colums?", "body": "<p>Use modular arithmetic!</p>\n\n<p>The 'mod' operator, <code>%</code> will do division and return the remainder. You can use this to figure out when to print your new lines:</p>\n\n<pre><code>while(stuff) {\n    if(amount % 5 == 0) {\n        cout &lt;&lt; endl;\n    }\n    amount++;\n\n    //more stuff\n}\n</code></pre>\n\n<p>as a side note, the reason your code isn't working now is probably becuase your <code>i=0</code> was supposed to be <code>amount = 0</code>, but modular arithmetic will let you keep amount as a running total.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5045830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd4bd93a66a2cee4be08433fab1f1c00?s=128&d=identicon&r=PG&f=1", "display_name": "Rkess26", "link": "https://stackoverflow.com/users/5045830/rkess26"}, "edited": false, "score": 0, "creation_date": 1435178634, "post_id": 31036517, "comment_id": 50097506, "body": "Alright that made the output go into columns, but the last integer keeps repeating now even though I closed the while loop at the end?"}], "tags": [], "owner": {"reputation": 24, "user_id": 4439999, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v2FHJD5KduI/AAAAAAAAAAI/AAAAAAAAAFM/jtbDU21En60/photo.jpg?sz=128", "display_name": "Svampuz", "link": "https://stackoverflow.com/users/4439999/svampuz"}, "is_accepted": false, "score": -1, "last_activity_date": 1435178113, "creation_date": 1435178113, "answer_id": 31036517, "question_id": 31036367, "link": "https://stackoverflow.com/questions/31036367/in-c-how-can-i-make-integers-from-a-data-file-be-spaced-evenly-into-5-colums/31036517#31036517", "title": "In C++ How can I make integers from a data file be spaced evenly into 5 colums?", "body": "<p>You have not inizialized amount variable:</p>\n\n<pre><code>int data;\nint count = 0;\nint amount = 0;\n</code></pre>\n\n<p>should solve your problem.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5045830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd4bd93a66a2cee4be08433fab1f1c00?s=128&d=identicon&r=PG&f=1", "display_name": "Rkess26", "link": "https://stackoverflow.com/users/5045830/rkess26"}, "edited": false, "score": 0, "creation_date": 1435179185, "post_id": 31036632, "comment_id": 50097776, "body": "This solved it thank you so much. I didn&#39;t realize that the for loop was redundant."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 2, "last_activity_date": 1435179444, "last_edit_date": 1435179444, "creation_date": 1435178587, "answer_id": 31036632, "question_id": 31036367, "link": "https://stackoverflow.com/questions/31036367/in-c-how-can-i-make-integers-from-a-data-file-be-spaced-evenly-into-5-colums/31036632#31036632", "title": "In C++ How can I make integers from a data file be spaced evenly into 5 colums?", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nint read(istream &amp; in)\n{\n    int data; // the data which will be inputted from the file\n    int amount = 5; // number of data integers in a column\n\n    cout &lt;&lt; \"Values read from file\" &lt;&lt; endl;\n    while (in &gt;&gt; data) //only need one cin. This will catch most of the errors you'll\n                        // care about.\n    {\n        cout &lt;&lt; setw(7) &lt;&lt; data;\n        if (--amount == 0) // % 5 will screw up at max int. \n                           // This won't and is probably quicker.\n        {\n            amount = 5;\n            cout &lt;&lt; endl;\n        }\n    }\n    if (amount != 5)\n    { // spit out EOL if there are any left-overs.\n        cout &lt;&lt; endl;\n    }\n\n    return 0;\n}\n\nint main(int argsc, char ** argsv)\n{\n    // ifstream in(\"name of file\");\n    // read(in);\n    read(cin);\n}\n</code></pre>\n\n<p>EDIT: Generalized to make it a bit more usable. OP seems to want to read from file at some point.</p>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 2, "last_activity_date": 1435178734, "creation_date": 1435178734, "answer_id": 31036682, "question_id": 31036367, "link": "https://stackoverflow.com/questions/31036367/in-c-how-can-i-make-integers-from-a-data-file-be-spaced-evenly-into-5-colums/31036682#31036682", "title": "In C++ How can I make integers from a data file be spaced evenly into 5 colums?", "body": "<pre><code>int main()\n{\n    int data; // the data which will be inputted from the file\n    int count = 0; // number of values written so far\n    cout &lt;&lt; \"Values read from file\" &lt;&lt; endl;\n    while (cin &gt;&gt; data) {\n        cout &lt;&lt; setw(7) &lt;&lt; data;\n        if (++count % 5 == 0)\n            cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<ul>\n<li>you only need one loop</li>\n<li><em>always</em> check the result of reading something to check if it worked.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 5045830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd4bd93a66a2cee4be08433fab1f1c00?s=128&d=identicon&r=PG&f=1", "display_name": "Rkess26", "link": "https://stackoverflow.com/users/5045830/rkess26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1435179444, "creation_date": 1435177669, "last_edit_date": 1435178700, "question_id": 31036367, "link": "https://stackoverflow.com/questions/31036367/in-c-how-can-i-make-integers-from-a-data-file-be-spaced-evenly-into-5-colums", "title": "In C++ How can I make integers from a data file be spaced evenly into 5 colums?", "body": "<p>I am having a very hard time formatting the data values from a program correctly. The point of the program is to display values from a data file in batch processing in a format like 5 columns with 5 integers each and creating another row of 5 integers if there is more than 5 integers in the data file.  </p>\n\n<p>However my code is not working in this manner even though it seems it should</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\nint main()\n{\n    int data;// the data which will be inputted from the file                                                                                                                                                            \n    int count = 0;\n    int amount; // number of data integers in a column                                                                                                                                                                   \n\n    cout &lt;&lt; \"Values read from file\" &lt;&lt; endl;\n    while (cin &gt;&gt; data)\n    {\n        for (int i = 0; i &lt; 5; i++)\n        {\n            amount++;\n            cin &gt;&gt; data;\n            cout &lt;&lt; setw(7) &lt;&lt;  data;\n            if (amount  == 5)\n            {\n                i  = 0;\n                cout &lt;&lt; endl;\n            }\n        }\n    }\n    return 0; \n }\n</code></pre>\n\n<p>This is what I have so far and the code is compiling but the output I'm getting is very ugly and the integers at the end repeat. </p>\n\n<p>This is what the format I'm getting looks like </p>\n\n<blockquote>\n  <p>Values read from file\n       32     -4    707     22     33 -70000 370000    -43     17      0     96     96     96     96     96</p>\n</blockquote>\n"}, {"tags": ["c++", "inheritance", "iterator", "user-defined", "reverse-iterator"], "answers": [{"tags": [], "owner": {"reputation": 1494, "user_id": 266378, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1Gjli.jpg?s=128&g=1", "display_name": "Niels Lohmann", "link": "https://stackoverflow.com/users/266378/niels-lohmann"}, "is_accepted": true, "score": 0, "last_activity_date": 1437509243, "creation_date": 1437509243, "answer_id": 31548651, "question_id": 31036364, "link": "https://stackoverflow.com/questions/31036364/inherit-all-functions-from-user-defined-iterator-in-reverse-iterator/31548651#31548651", "title": "Inherit all functions from user-defined iterator in reverse_iterator", "body": "<p>Unfortunately, I did not receive an answer, so here is what I did. Maybe an ugly solution provokes someone to post something nicer :-)</p>\n\n<h1>Background</h1>\n\n<p>So the first thing I learned is that <code>std::reverse_iterator</code> does nothing more than to encapsulate a \"normal\" iterator (called <code>current</code>, accessible via <code>base()</code>) and to establish the relationship of the reverse iterator being \"one element more to the left\" than the \"normal\" iterator.</p>\n\n<p><img src=\"https://i.stack.imgur.com/yoaFM.png\" alt=\"relationship between iterators and reverse iterators\"></p>\n\n<p>(image from <a href=\"http://en.cppreference.com/w/cpp/iterator/reverse_iterator\" rel=\"nofollow noreferrer\">cppreference.com</a>)</p>\n\n<h1>Generic solution</h1>\n\n<p>As long as the \"normal\" iterator has the standard interface and does not use any additional functions, the lines</p>\n\n<pre><code>using reverse_iterator = std::reverse_iterator&lt;iterator&gt;;\nusing const_reverse_iterator = std::reverse_iterator&lt;const_iterator&gt;;\n</code></pre>\n\n<p>are sufficient to automagically convert your own iterator class into a reverse iterator.</p>\n\n<p>And with the member functions</p>\n\n<pre><code>reverse_iterator rbegin() { return reverse_iterator(end()); }\nreverse_iterator rend() { return reverse_iterator(begin()); }\nconst_reverse_iterator crbegin() const { return const_reverse_iterator(cend()); }\nconst_reverse_iterator crend() const { return const_reverse_iterator(cbegin()); }\n</code></pre>\n\n<p>reverse iteration is possible, for instance code like</p>\n\n<pre><code>for (my_container::reverse_iterator rit = c.rbegin(); rit != c.rend(); ++it)\n{\n   // rit will iterator container c in reverse order\n}\n</code></pre>\n\n<p>works.</p>\n\n<h1>Adding more functionality to iterators</h1>\n\n<p>As I wrote in the question, I extended the <code>iterator</code> class with two additional members, <code>key()</code> and <code>value()</code>. The former allows quick access to the key of a JSON object during iteration. The latter is an alias to write <code>it.value()</code> rather than <code>*it</code>. Unfortunately, the above approach does not inherit these function to <code>reverse_iterator</code>.</p>\n\n<p>To enrich the user-defined reverse iterators, we need to inherit from <code>std::reverse_iterator&lt;iterator&gt;</code> and delegate calls to the base iterator. Unfortunately, I found no other approach than to do this manually. For the mentioned functions, this looks as follows:</p>\n\n<pre><code>class reverse_iterator : public std::reverse_iterator&lt;iterator&gt;\n{\n  ...\n\n  std::string key() const\n  {\n      auto it = --this-&gt;base();\n      return it.key();\n  }\n\n  reference value() const\n  {\n      auto it = --this-&gt;base();\n      return it.operator * ();\n  }  \n}\n</code></pre>\n\n<p>The most tricky part is that you need to implement the \"off-by-one\" relationship manually:</p>\n\n<ol>\n<li>Retrieve the base iterator via <code>base()</code>.</li>\n<li>Decrement it to point to the \"right\" (left, actually...) element.</li>\n<li>Call the desired function.</li>\n</ol>\n\n<p>And with that, we're nearly done. Nearly, because of the <code>...</code> in the code above. What is left to do is to delegate all other calls to functions like <code>operator++</code> to the base class. I found now way to let someone else to this boring delegation.</p>\n\n<p>So the class contains code like</p>\n\n<pre><code>using base_iterator = std::reverse_iterator&lt;iterator&gt;;\n\nreverse_iterator operator++(int)\n{\n    return base_iterator::operator++(1);\n}\n\nreverse_iterator&amp; operator++()\n{\n    base_iterator::operator++();\n    return *this;\n}\n</code></pre>\n\n<p>(Note the definition of <code>base_iterator</code>.)</p>\n\n<p>That's it. We now have user-defined reverse iterators which allow us to code</p>\n\n<pre><code>for (my_container::reverse_iterator rit = c.rbegin(); rit != c.rend(); ++it)\n{\n   std::cout &lt;&lt; rit.key() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<h1>Cleaning up</h1>\n\n<p>In a discussion on Github, <a href=\"https://github.com/gregmarr\" rel=\"nofollow noreferrer\">gregmarr</a> proposed to combine the <code>reverse_iterator</code> and the <code>const_reverse_iterator</code> classes into a single template class like</p>\n\n<pre><code>template&lt;typename Base&gt;\nclass json_reverse_iterator : public std::reverse_iterator&lt;Base&gt;\n{\n  public:\n    /// shortcut to the reverse iterator adaptor\n    using base_iterator = std::reverse_iterator&lt;Base&gt;;\n    /// the reference type for the pointed-to element\n    using reference = typename Base::reference;\n\n    /// create reverse iterator from iterator\n    json_reverse_iterator(const typename base_iterator::iterator_type&amp; it)\n        : base_iterator(it) {}\n\n    /// create reverse iterator from base class\n    json_reverse_iterator(const base_iterator&amp; it) : base_iterator(it) {}\n\n...\n}\n</code></pre>\n\n<p>This allows to write</p>\n\n<pre><code>using reverse_iterator = json_reverse_iterator&lt;iterator&gt;;\nusing const_reverse_iterator = json_reverse_iterator&lt;const_iterator&gt;;\n</code></pre>\n\n<p>and to be happy.</p>\n\n<h1>Full example</h1>\n\n<p>See <a href=\"https://github.com/nlohmann/json/blob/300fba63888d4c39053006f466bfd24937cac972/src/json.hpp#L5516\" rel=\"nofollow noreferrer\">here</a> for the complete code.</p>\n\n<p>I'd still like to see a solution that avoids repeating most functionality, but this one is good enough for me. And as I haven't found anything better in quite a while, I decided to share it.</p>\n"}], "owner": {"reputation": 1494, "user_id": 266378, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1Gjli.jpg?s=128&g=1", "display_name": "Niels Lohmann", "link": "https://stackoverflow.com/users/266378/niels-lohmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 1, "accepted_answer_id": 31548651, "answer_count": 1, "score": 2, "last_activity_date": 1437509243, "creation_date": 1435177659, "question_id": 31036364, "link": "https://stackoverflow.com/questions/31036364/inherit-all-functions-from-user-defined-iterator-in-reverse-iterator", "title": "Inherit all functions from user-defined iterator in reverse_iterator", "body": "<p>I am writing a JSON class for C++11, see <a href=\"http://github.com/nlohmann/json\" rel=\"nofollow\">http://github.com/nlohmann/json</a>. My central data structure is a class wrapping the JSON value types (null, array, object, string, bool, number) in a union and offering it in via a nice C++ interface. As arrays (implemented via <code>std::vector</code>) and objects (<code>std::map</code>) come with their own iterators, I implemented a \"wrapper\" iterator which delegates calls to <code>operator++</code> or <code>operator-&gt;</code> to the respective member variables. Furthermore, I implemented two additional functions <code>std::string key()</code> to access keys of a JSON object and <code>reference value()</code> as an alias to <code>operator*()</code>.</p>\n\n<p>So far, so good (see <a href=\"https://github.com/nlohmann/json/blob/master/src/json.hpp\" rel=\"nofollow\">https://github.com/nlohmann/json/blob/master/src/json.hpp</a> for the complete source code)...</p>\n\n<p>Then I wanted to implement <code>reverse_iterator</code> and <code>const_reverse_iterator</code>. And here the problems begin.</p>\n\n<ul>\n<li>If I realize them via <code>using reverse_iterator = std::reverse_iterator&lt;iterator&gt;;</code> and <code>using const_reverse_iterator = std::reverse_iterator&lt;const_iterator&gt;;</code>, everything is fine, but the functions <code>key()</code> and <code>value()</code> are not available with <code>reverse_iterator</code> or <code>const_reverse_iterator</code> objects.</li>\n<li>If I implement my own class <code>reverse_iterator</code> like <code>class reverse_iterator : public std::reverse_iterator&lt;typename basic_json::iterator&gt;</code>, I need to implement the whole class again. It is not sufficient to give an implementation for <code>key()</code> and <code>value()</code>, but also for <code>operator++()</code> and all the other stuff which I hope to have gotten for free using the <code>std::reverse_iterator</code> adaptor.</li>\n</ul>\n\n<p>I spent quite some time searching for answers, but all references I found either scratching the surface of incomplete toy examples or come to the conclusion that iterators are hard work and one should move to Boost...</p>\n\n<p>So here are my questions:</p>\n\n<ol>\n<li>How can I create a <code>reverse_iterator</code> from my customized class <code>iterator</code> so that it inherits as much functions as possible?</li>\n<li>If inheriting behavior beyond the standard stuff does not work automatically, how can I write a <code>reverse_iterator</code> without repeating myself completely?</li>\n</ol>\n\n<p>Any help is greatly appreciated!</p>\n"}, {"tags": ["c#", "c++", "function", "dll", "global"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 1814831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2fb02845c413ce7a1400560ab609a6?s=128&d=identicon&r=PG", "display_name": "ezhang94", "link": "https://stackoverflow.com/users/1814831/ezhang94"}, "edited": false, "score": 0, "creation_date": 1435237110, "post_id": 31038395, "comment_id": 50123090, "body": "This explanation is very informative. I figured that something like this might be the case, but I did not know how to put it into words. Thanks"}, {"owner": {"reputation": 15, "user_id": 1814831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2fb02845c413ce7a1400560ab609a6?s=128&d=identicon&r=PG", "display_name": "ezhang94", "link": "https://stackoverflow.com/users/1814831/ezhang94"}, "edited": false, "score": 0, "creation_date": 1435607354, "post_id": 31038395, "comment_id": 50260986, "body": "Update: Additionally, I found this reference on MSDN that says: &quot;If you are progamming in Visaul Basic or C#, you must declare DLL functions within a class or Visual Basic module.&quot; <a href=\"https://msdn.microsoft.com/en-us/library/khbsw73t(v=vs.100).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/khbsw73t(v=vs.100).aspx</a>"}], "tags": [], "owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "is_accepted": true, "score": 1, "last_activity_date": 1435185765, "creation_date": 1435185765, "answer_id": 31038395, "question_id": 31036353, "link": "https://stackoverflow.com/questions/31036353/c-unable-to-access-methods-included-in-c-cli-dll/31038395#31038395", "title": "C# - Unable to Access Methods Included in C++/CLI .dll", "body": "<blockquote>\n  <p>If it is not possible, why can't C# not use \"class-less\" DLLs?</p>\n</blockquote>\n\n<p>Because the CLR does not support it, methods must always be a member of a class.  That's an impedance mismatch with C++'s support for free functions.  The C++/CLI compiler solves it by moving them into a class anyway.  It's name is <code>&lt;Module&gt;</code> and it is not accessible outside of the assembly.  Like an <em>internal</em> class in C#.  In effect making the functions inaccessible as well.</p>\n\n<p>Solving it is simple, add them to a ref class.  You can declare them <em>static</em>.</p>\n"}], "owner": {"reputation": 15, "user_id": 1814831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2fb02845c413ce7a1400560ab609a6?s=128&d=identicon&r=PG", "display_name": "ezhang94", "link": "https://stackoverflow.com/users/1814831/ezhang94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 31038395, "answer_count": 1, "score": 1, "last_activity_date": 1435185765, "creation_date": 1435177611, "question_id": 31036353, "link": "https://stackoverflow.com/questions/31036353/c-unable-to-access-methods-included-in-c-cli-dll", "title": "C# - Unable to Access Methods Included in C++/CLI .dll", "body": "<p>I have two C++/CLI DLLs that I am trying to use with C#. I am using VS10 and have made sure that the DLLs are appropriately included in the \"References\" folder.</p>\n\n<p>So, the first DLL works great. It contains classes, so the C# application can access the functions within the classes by 1) creating an instance of a class found in the DLL, then 2) calling the function \"normally.\" (e.g. <code>instanceOfClass.method1();</code>).</p>\n\n<p><strong>The second DLL does not work.</strong> In the second DLL, all functions are at a global scope. No namespace scopes or classes. I am running into issues here, because when I try to access one of these functions in the C# application, I get an error: <code>The name 'fxn' does not exist in the current context.</code> I have tried all of the following possible ways of addressing the function:</p>\n\n<pre><code>namespace myDLL {           // Tried with and without namespace declaration\n    class Program {\n        static void Main(string[] args) {\n            fxnInitialize();\n            myDLL.fxnInitialize();\n            myDLL-&gt;fxnInitialize();    \n        }\n    }\n}\n</code></pre>\n\n<p>All of the other questions I have found regarding this issue have been with C++ DLLs with classes. <em>My</em> issue is: <strong>Is it possible to reference methods in DLLs that <em>don't</em> belong to a class?</strong></p>\n\n<ul>\n<li><p>If it is possible, what am I doing wrong? I suspect I might be limiting the namespace (or some scope) in my C# application that is not allowing it see the contents of the DLL</p></li>\n<li><p>If it is not possible, why can't C# not use \"class-less\" DLLs? Is there a way to get around this, or another way to avoid using classes in the library (for easiest accessibility)?</p></li>\n</ul>\n"}, {"tags": ["c++", "c++11", "nullptr"], "comments": [{"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 3, "creation_date": 1435177118, "post_id": 31036153, "comment_id": 50096682, "body": "<code>nullptr_t</code> is the type of <code>nullptr</code>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 3, "creation_date": 1435177416, "post_id": 31036153, "comment_id": 50096834, "body": "<code>nullptr</code> and <code>nullptr_t</code> are never interchangeable. The question makes no sense. There&#39;s no such matter as choosing which one to use."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1435177554, "post_id": 31036153, "comment_id": 50096913, "body": "There was a <a href=\"http://qr.ae/74om57\" rel=\"nofollow noreferrer\">very good answer</a> on the same question submitted on Quora earlier today by Brain. Not sure if you&#39;re the one who asked it as it seems very coincidental."}], "answers": [{"tags": [], "owner": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "is_accepted": false, "score": 3, "last_activity_date": 1435177113, "creation_date": 1435177113, "answer_id": 31036178, "question_id": 31036153, "link": "https://stackoverflow.com/questions/31036153/what-is-the-difference-between-nullptr-and-nullptr-t-in-c/31036178#31036178", "title": "What is the difference between nullptr and nullptr_t in C++?", "body": "<p><code>nullptr</code> is of type <code>nullptr_t</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 24, "last_activity_date": 1435177113, "creation_date": 1435177113, "answer_id": 31036180, "question_id": 31036153, "link": "https://stackoverflow.com/questions/31036153/what-is-the-difference-between-nullptr-and-nullptr-t-in-c/31036180#31036180", "title": "What is the difference between nullptr and nullptr_t in C++?", "body": "<p><code>nullptr</code> is the constant, <code>nullptr_t</code> is its type. Use each one in contexts where you need respectively a null pointer, or the type of a null pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 343, "user_id": 4461183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0845621997a766ae7c7e8a6122b85b?s=128&d=identicon&r=PG", "display_name": "Karlis Olte", "link": "https://stackoverflow.com/users/4461183/karlis-olte"}, "is_accepted": false, "score": 2, "last_activity_date": 1435177130, "creation_date": 1435177130, "answer_id": 31036187, "question_id": 31036153, "link": "https://stackoverflow.com/questions/31036153/what-is-the-difference-between-nullptr-and-nullptr-t-in-c/31036187#31036187", "title": "What is the difference between nullptr and nullptr_t in C++?", "body": "<p>If you try this</p>\n\n<pre><code>cout &lt;&lt; typeid(nullptr).name() &lt;&lt; endl;\n</code></pre>\n\n<p>you will see that nullptr is of type std::nullptr_t.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1435177188, "creation_date": 1435177188, "answer_id": 31036203, "question_id": 31036153, "link": "https://stackoverflow.com/questions/31036153/what-is-the-difference-between-nullptr-and-nullptr-t-in-c/31036203#31036203", "title": "What is the difference between nullptr and nullptr_t in C++?", "body": "<p><code>nullptr</code> is a pointer literal of type <code>std::nullptr_t</code>. \nAnd moreover <code>nullptr</code> is also a keyword of the C++ the same way as boolean literals false and true.:)</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1435178086, "last_edit_date": 1435178086, "creation_date": 1435177372, "answer_id": 31036258, "question_id": 31036153, "link": "https://stackoverflow.com/questions/31036153/what-is-the-difference-between-nullptr-and-nullptr-t-in-c/31036258#31036258", "title": "What is the difference between nullptr and nullptr_t in C++?", "body": "<p>From [lex.nullptr]:</p>\n\n<blockquote>\n  <p><strong>Pointer Literals</strong></p>\n  \n  <p><em>pointer-literal</em>:<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>nullptr</code>  </p>\n  \n  <p>The pointer literal is the keyword <code>nullptr</code>. It is a prvalue of type <code>std::nullptr_t</code>. [ Note: <code>std::nullptr_t</code>\n  is a distinct type that is neither a pointer type nor a pointer to member type; rather, a prvalue of this type is\n  a null pointer constant and can be converted to a null pointer value or null member pointer value. See 4.10\n  and 4.11. \u2014end note ]</p>\n</blockquote>\n\n<p>So use <code>nullptr</code> when you need a pointer literal, and <code>std::nullptr_t</code> in a context when you need to take that type. The latter, for instance, if you're making a function or constructor or something that can take a <code>nullptr</code> as an argument. </p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 4, "last_activity_date": 1435178393, "last_edit_date": 1435178393, "creation_date": 1435177403, "answer_id": 31036270, "question_id": 31036153, "link": "https://stackoverflow.com/questions/31036153/what-is-the-difference-between-nullptr-and-nullptr-t-in-c/31036270#31036270", "title": "What is the difference between nullptr and nullptr_t in C++?", "body": "<blockquote>\n  <p><em>\"... if I use one over the other?\"</em></p>\n</blockquote>\n\n<p>You can't (<em>use one over the other</em>) they're orthogonal by these means:</p>\n\n<p><code>nullptr_t</code> is the <strong>type</strong> used to represent a <code>nullptr</code></p>\n\n<p><code>nullptr</code> is <sup>(1)</sup>effectively a <strong>constant</strong> of type <code>nullptr_t</code> that represents a specific compiler implementation defined value.</p>\n\n<p>See the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf\" rel=\"nofollow\">C++11 standards</a> section:</p>\n\n<blockquote>\n  <p><h3>2.14.7 Pointer literals</h3></p>\n  \n  <ol>\n  <li>The pointer literal is the keyword <code>nullptr</code>. It is a prvalue of type <code>std::nullptr_t</code>.<br>\n  [ Note: <code>std::nullptr_t</code>\n  is a distinct type that is neither a pointer type nor a pointer to member type; rather, a prvalue of this type is a null pointer constant and can be converted to a null pointer value or null member pointer value. See 4.10\n  and 4.11. \u2014 end note ]</li>\n  </ol>\n</blockquote>\n\n<hr>\n\n<p><sup>\n<sup>1)</sup> Just like the <code>this</code> keyword <code>nullptr</code> stands for an rvalue rather than being of <code>const</code> type. Thus, <code>decltype(nullptr)</code> can be a non-<code>const</code> type. With Visual C++ 2015 and MinGW g++ 5.1 it is non-<code>const</code>.\n</sup></p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 821114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15ec53496d2496fb3d030f27650f7d92?s=128&d=identicon&r=PG", "display_name": "Julian McKinlay", "link": "https://stackoverflow.com/users/821114/julian-mckinlay"}, "is_accepted": false, "score": 5, "last_activity_date": 1435177422, "creation_date": 1435177422, "answer_id": 31036277, "question_id": 31036153, "link": "https://stackoverflow.com/questions/31036153/what-is-the-difference-between-nullptr-and-nullptr-t-in-c/31036277#31036277", "title": "What is the difference between nullptr and nullptr_t in C++?", "body": "<p>In exactly the same way that <code>true</code> is a C++ keyword literal of type <code>bool</code>, <code>nullptr</code> is a C++ keyword literal of type <code>std::nullptr_t</code>.</p>\n"}], "owner": {"reputation": 524, "user_id": 1582350, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b7ac87a4e596261fd36a6b19388e3821?s=128&d=identicon&r=PG&f=1", "display_name": "Moiz Sajid", "link": "https://stackoverflow.com/users/1582350/moiz-sajid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7389, "favorite_count": 2, "accepted_answer_id": 31036180, "answer_count": 7, "score": 11, "last_activity_date": 1435178393, "creation_date": 1435177018, "last_edit_date": 1435177505, "question_id": 31036153, "link": "https://stackoverflow.com/questions/31036153/what-is-the-difference-between-nullptr-and-nullptr-t-in-c", "title": "What is the difference between nullptr and nullptr_t in C++?", "body": "<p>Which one should I use? Any advantages if I use one over the other? </p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "edited": false, "score": 1, "creation_date": 1435177034, "post_id": 31036066, "comment_id": 50096632, "body": "This is a possible duplicate of <a href=\"http://stackoverflow.com/questions/15864269/use-stdmove-in-c11-move-constructor-with-uniform-initialization-syntax\">Use std::move in C++11 move constructor with uniform initialization syntax</a>."}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1435177295, "post_id": 31036066, "comment_id": 50096763, "body": "Why do you <code>new</code> and not use <code>std::make_shared</code>?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1435177296, "post_id": 31036066, "comment_id": 50096764, "body": "See <a href=\"http://open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1467\" rel=\"nofollow noreferrer\">LWG 1467</a>."}, {"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1435177414, "post_id": 31036066, "comment_id": 50096833, "body": "@0x499602D2 such a long list... Just tested: Not working prior gcc 4.9, but <b>working in gcc 5.1</b>. Not working in clang 3.6 either"}, {"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "reply_to_user": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1435177760, "post_id": 31036066, "comment_id": 50097019, "body": "@MariusBancila because <code>object_ptr</code> is <code>void*</code>. Using <code>make_shared</code> will requires casting from <code>shared_ptr&lt;T&gt;</code> to <code>shared_ptr&lt;void&gt;</code>."}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1435178201, "post_id": 31036066, "comment_id": 50097266, "body": "@texasbruce that will work (i.e. <code>object_ptr {std::make_shared&lt;T&gt;(std::move(object)) }</code>). See this <a href=\"http://stackoverflow.com/questions/5913396/why-do-stdshared-ptrvoid-work\" title=\"why do stdshared ptrvoid work\">stackoverflow.com/questions/5913396/&hellip;</a>."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1435178375, "post_id": 31036066, "comment_id": 50097372, "body": "Note that in general, you should remove that reference from the forwarding reference <code>T&amp;&amp;</code>. Otherwise, you&#39;ll construct lvalue-refs when passing an lvalue to the <code>Object(T&amp;&amp;)</code> ctor. <code>new std::remove_reference_t&lt;T&gt;{ .. }</code> This isn&#39;t a problem here though, since you&#39;re passing a prvalue."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1435178500, "post_id": 31036066, "comment_id": 50097443, "body": "CWG 1467 will be reopened cc @0x499602D2 see <a href=\"https://groups.google.com/a/isocpp.org/d/topic/std-discussion/CvYHxNSzw8c/discussion\" rel=\"nofollow noreferrer\">groups.google.com/a/isocpp.org/d/topic/std-discussion/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1435179147, "post_id": 31036612, "comment_id": 50097748, "body": "Would it be fixed in c++11 or new standard?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 1, "creation_date": 1435179847, "post_id": 31036612, "comment_id": 50098137, "body": "@texasbruce Not sure what you mean. Clang has already implemented this change in its latest version. The above paragraph was added to the C++14 standard."}, {"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1435215163, "post_id": 31036612, "comment_id": 50108999, "body": "&quot;<i>If <code>T</code> is a class type</i>&quot;... this sounds strange. I&#39;m pretty sure that it would work with struct type as well, why this wording? :O"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1435223138, "post_id": 31036612, "comment_id": 50113908, "body": "@PaperBirdMaster - according to the standard, a struct is also a class type."}], "tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": true, "score": 4, "last_activity_date": 1435178613, "last_edit_date": 1435178613, "creation_date": 1435178466, "answer_id": 31036612, "question_id": 31036066, "link": "https://stackoverflow.com/questions/31036066/uniform-initialization-with-curly-brace-is-mistaken-as-initializer-list/31036612#31036612", "title": "Uniform Initialization with curly brace is mistaken as Initializer List", "body": "<p>This was a known issue, and a defect in the standard (see <a href=\"http://open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1467\" rel=\"nofollow\"><strong>CWG #1467</strong></a>). The proposal has been applied to the latest working paper (\u00a78.5.4 [dcl.init.list]/3):</p>\n\n<blockquote>\n  <p>List-initialization of an object or reference of type T is defined as follows:</p>\n  \n  <ul>\n  <li>If <code>T</code> is a class type and the initializer list has a single element of type <code>cv U</code>, where <code>U</code> is <code>T</code> or a class derived\n  from <code>T</code>, the object is initialized from that element (by copy-initialization for copy-list-initialization, or\n  by direct-initialization for direct-list-initialization).</li>\n  </ul>\n</blockquote>\n\n<p>Note that trunk versions of <a href=\"http://melpon.org/wandbox/permlink/Exa3mNJmnifAQ7Ct\" rel=\"nofollow\">Clang</a> and <a href=\"http://melpon.org/wandbox/permlink/qLEWrt3cCp3aoiP2\" rel=\"nofollow\">GCC</a> accept this code.</p>\n"}], "owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 2, "accepted_answer_id": 31036612, "answer_count": 1, "score": 6, "last_activity_date": 1435178613, "creation_date": 1435176696, "last_edit_date": 1435177076, "question_id": 31036066, "link": "https://stackoverflow.com/questions/31036066/uniform-initialization-with-curly-brace-is-mistaken-as-initializer-list", "title": "Uniform Initialization with curly brace is mistaken as Initializer List", "body": "<p>I have a class as:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nclass Object {\n    std::shared_ptr&lt;void&gt; object_ptr;\npublic:\n    Object() {}\n\n    template&lt;typename T&gt;\n    Object(T&amp;&amp; object) \n        : object_ptr {new T {std::move(object)} } {}\n\n    virtual ~Object() {};\n};\n</code></pre>\n\n<p>My main cpp file is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Object.hpp\"\n\nclass Foo {};\n\n\nint main() {\n    Object o {Foo{}};\n}\n</code></pre>\n\n<p>It gives me error:</p>\n\n<pre><code>test/test.cpp:13:20:   required from here\ninclude/Object.hpp:24:49: error: could not convert \u2018{std::move&lt;Foo&amp;&gt;((* &amp; object))}\u2019 from \u2018&lt;brace-enclosed initializer list&gt;\u2019 to \u2018Foo\u2019\n         : object_ptr {new T {std::move(object)} } {}\n                                                 ^\ninclude/Object.hpp:24:49: error: no matching function for call to \u2018std::shared_ptr&lt;void&gt;::shared_ptr(&lt;brace-enclosed initializer list&gt;)\u2019\ninclude/Object.hpp:24:49: note: candidates are:\nIn file included from /usr/include/c++/4.8/memory:82:0,\n                 from include/Object.hpp:7,\n                 from test/test.cpp:2:\n/usr/include/c++/4.8/bits/shared_ptr.h:314:2: note: template&lt;class _Alloc, class ... _Args&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(std::_Sp_make_shared_tag, const _Alloc&amp;, _Args&amp;&amp; ...)\n  shared_ptr(_Sp_make_shared_tag __tag, const _Alloc&amp; __a,\n  ^\n/usr/include/c++/4.8/bits/shared_ptr.h:314:2: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:265:17: note: constexpr std::shared_ptr&lt;_Tp&gt;::shared_ptr(std::nullptr_t) [with _Tp = void; std::nullptr_t = std::nullptr_t]\n       constexpr shared_ptr(nullptr_t __p) noexcept\n                 ^\n/usr/include/c++/4.8/bits/shared_ptr.h:265:17: note:   no known conversion for argument 1 from \u2018&lt;type error&gt;\u2019 to \u2018std::nullptr_t\u2019\n/usr/include/c++/4.8/bits/shared_ptr.h:257:2: note: template&lt;class _Tp1, class _Del&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(std::unique_ptr&lt;_Up, _Ep&gt;&amp;&amp;)\n  shared_ptr(std::unique_ptr&lt;_Tp1, _Del&gt;&amp;&amp; __r)\n  ^\n/usr/include/c++/4.8/bits/shared_ptr.h:257:2: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:253:2: note: template&lt;class _Tp1&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(std::auto_ptr&lt;_Up&gt;&amp;&amp;)\n  shared_ptr(std::auto_ptr&lt;_Tp1&gt;&amp;&amp; __r);\n  ^\n/usr/include/c++/4.8/bits/shared_ptr.h:253:2: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:248:11: note: template&lt;class _Tp1&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(const std::weak_ptr&lt;_Tp1&gt;&amp;)\n  explicit shared_ptr(const weak_ptr&lt;_Tp1&gt;&amp; __r)\n           ^\n/usr/include/c++/4.8/bits/shared_ptr.h:248:11: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:236:2: note: template&lt;class _Tp1, class&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(std::shared_ptr&lt;_Tp1&gt;&amp;&amp;)\n  shared_ptr(shared_ptr&lt;_Tp1&gt;&amp;&amp; __r) noexcept\n  ^\n/usr/include/c++/4.8/bits/shared_ptr.h:236:2: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:226:7: note: std::shared_ptr&lt;_Tp&gt;::shared_ptr(std::shared_ptr&lt;_Tp&gt;&amp;&amp;) [with _Tp = void]\n       shared_ptr(shared_ptr&amp;&amp; __r) noexcept\n       ^\n/usr/include/c++/4.8/bits/shared_ptr.h:226:7: note:   no known conversion for argument 1 from \u2018&lt;type error&gt;\u2019 to \u2018std::shared_ptr&lt;void&gt;&amp;&amp;\u2019\n/usr/include/c++/4.8/bits/shared_ptr.h:218:2: note: template&lt;class _Tp1, class&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(const std::shared_ptr&lt;_Tp1&gt;&amp;)\n  shared_ptr(const shared_ptr&lt;_Tp1&gt;&amp; __r) noexcept\n  ^\n/usr/include/c++/4.8/bits/shared_ptr.h:218:2: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:206:2: note: template&lt;class _Tp1&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(const std::shared_ptr&lt;_Tp1&gt;&amp;, _Tp*)\n  shared_ptr(const shared_ptr&lt;_Tp1&gt;&amp; __r, _Tp* __p) noexcept\n  ^\n/usr/include/c++/4.8/bits/shared_ptr.h:206:2: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:184:2: note: template&lt;class _Deleter, class _Alloc&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(std::nullptr_t, _Deleter, _Alloc)\n  shared_ptr(nullptr_t __p, _Deleter __d, _Alloc __a)\n  ^\n/usr/include/c++/4.8/bits/shared_ptr.h:184:2: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:165:2: note: template&lt;class _Tp1, class _Deleter, class _Alloc&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(_Tp1*, _Deleter, _Alloc)\n  shared_ptr(_Tp1* __p, _Deleter __d, _Alloc __a)\n  ^\n/usr/include/c++/4.8/bits/shared_ptr.h:165:2: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:146:2: note: template&lt;class _Deleter&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(std::nullptr_t, _Deleter)\n  shared_ptr(nullptr_t __p, _Deleter __d)\n  ^\n/usr/include/c++/4.8/bits/shared_ptr.h:146:2: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:129:2: note: template&lt;class _Tp1, class _Deleter&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(_Tp1*, _Deleter)\n  shared_ptr(_Tp1* __p, _Deleter __d)\n  ^\n/usr/include/c++/4.8/bits/shared_ptr.h:129:2: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:112:11: note: template&lt;class _Tp1&gt; std::shared_ptr&lt;_Tp&gt;::shared_ptr(_Tp1*)\n  explicit shared_ptr(_Tp1* __p)\n           ^\n/usr/include/c++/4.8/bits/shared_ptr.h:112:11: note:   template argument deduction/substitution failed:\n/usr/include/c++/4.8/bits/shared_ptr.h:103:7: note: std::shared_ptr&lt;_Tp&gt;::shared_ptr(const std::shared_ptr&lt;_Tp&gt;&amp;) [with _Tp = void]\n       shared_ptr(const shared_ptr&amp;) noexcept = default;\n       ^\n/usr/include/c++/4.8/bits/shared_ptr.h:103:7: note:   no known conversion for argument 1 from \u2018&lt;type error&gt;\u2019 to \u2018const std::shared_ptr&lt;void&gt;&amp;\u2019\n/usr/include/c++/4.8/bits/shared_ptr.h:100:17: note: constexpr std::shared_ptr&lt;_Tp&gt;::shared_ptr() [with _Tp = void]\n       constexpr shared_ptr() noexcept\n                 ^\n/usr/include/c++/4.8/bits/shared_ptr.h:100:17: note:   candidate expects 0 arguments, 1 provided\nmake: *** [test.o] Error 1\n</code></pre>\n\n<p>However if I change <code>new T {std::move(object)}</code> to <code>new T (std::move(object))</code>. It works:</p>\n\n<pre><code>class Object {\n    std::shared_ptr&lt;void&gt; object_ptr;\npublic:\n    Object() {}\n\n    template&lt;typename T&gt;\n    Object(T&amp;&amp; object) \n        : object_ptr {new T (std::move(object)) } {}\n\n    virtual ~Object() {};\n};\n</code></pre>\n\n<p>Why curly brace uniform initialization does not work here? Why is considered an initializater list in this case? Foo does not even have a constructor taking initializer list?</p>\n"}, {"tags": ["c++", "shell", "filepath"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1435176870, "post_id": 31035974, "comment_id": 50096529, "body": "I believe <a href=\"http://linux.die.net/man/3/wordexp\" rel=\"nofollow noreferrer\">wordexp</a> does that."}, {"owner": {"reputation": 1531, "user_id": 4335488, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e0c0f19b150060bf76c4709c44556d0e?s=128&d=identicon&r=PG&f=1", "display_name": "HSchmale", "link": "https://stackoverflow.com/users/4335488/hschmale"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1435177968, "post_id": 31035974, "comment_id": 50097142, "body": "@Jashaszun It does not."}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1435182085, "post_id": 31035974, "comment_id": 50099215, "body": "From a commandline you can use echo and let bash evaluate it. Calling it from C++ without invoking bash will skip the shell expansions. Try using bash as the command and echo the path."}], "answers": [{"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 2, "last_activity_date": 1435177280, "creation_date": 1435177280, "answer_id": 31036232, "question_id": 31035974, "link": "https://stackoverflow.com/questions/31035974/use-shell-symbols-in-directory-path/31036232#31036232", "title": "Use shell symbols in directory path", "body": "<p>You can use  <a href=\"http://linux.die.net/man/3/wordexp\" rel=\"nofollow\">wordexp</a>:</p>\n\n<pre><code>#include &lt;wordexp.h&gt;\n\nstd::string wordexp(std::string var, int flags = 0)\n{\n    wordexp_t p;\n    if(!wordexp(var.c_str(), &amp;p, flags))\n    {\n        if(p.we_wordc &amp;&amp; p.we_wordv[0])\n            var = p.we_wordv[0];\n        wordfree(&amp;p);\n    }\n    return var;\n}\n\nint main()\n{\n    std::cout &lt;&lt; wordexp(\"~/test\") &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 1531, "user_id": 4335488, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e0c0f19b150060bf76c4709c44556d0e?s=128&d=identicon&r=PG&f=1", "display_name": "HSchmale", "link": "https://stackoverflow.com/users/4335488/hschmale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 31036232, "answer_count": 1, "score": 3, "last_activity_date": 1435177280, "creation_date": 1435176328, "question_id": 31035974, "link": "https://stackoverflow.com/questions/31035974/use-shell-symbols-in-directory-path", "title": "Use shell symbols in directory path", "body": "<p>I want to open a file with my program, and I want to use shell symbols to make it easier for me to locate the file. Is there an easy way to have the shell expand out my file path before I use it on runtime. I'm looking for a function that does this.</p>\n\n<p><code>~/.foo.bar</code> -> <code>/home/someuser/.foo.bar</code></p>\n\n<p>Is there some easy way to have the shell preprocess the paths to files before opening the file?</p>\n"}, {"tags": ["c++", "eclipse"], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1435177768, "last_edit_date": 1592644375, "creation_date": 1435177410, "answer_id": 31036273, "question_id": 31035948, "link": "https://stackoverflow.com/questions/31035948/which-and-how-do-i-use-a-compiler-with-eclipse-juno-newest-one/31036273#31036273", "title": "Which and how do i use a compiler with eclipse juno (newest one)?", "body": "<p>Most Linux boxes come with GCC built right in. If not, fire up the package manager and install.</p>\n<p>Mac I can't speak on.</p>\n<p>For Windows your easiest choices are <a href=\"http://www.mingw.org/\" rel=\"nofollow noreferrer\">MinGW</a> and <a href=\"https://www.visualstudio.com/en-us/products/visual-studio-express-vs.aspx\" rel=\"nofollow noreferrer\">Visual Studio</a>.</p>\n<p>My preference goes to MinGW because of tight integration with Eclipse.</p>\n<p>If you go with using Visual Studio, learn using the IDE that comes with it. Once you know C++ and gain some experience, then try using using Eclipse with it as Eclipse doesn't work well out of the box with Visual Studio. Until you know what the error messages that will come your way mean, Visual Studio under Eclipse will just cause you grief.</p>\n<p>As for better IDE, that's a matter of preference, but real men use <a href=\"https://en.wikipedia.org/wiki/Ed_(text_editor)\" rel=\"nofollow noreferrer\">ed</a> and start fires by spitting on wood really, really fast.</p>\n<h1>EDIT</h1>\n<p>If anyone has experience with the current state of Clang support in Eclipse, please chime in.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435179733, "post_id": 31036480, "comment_id": 50098074, "body": "<code>sudo apt-get install build-essential</code> command fails on a very large number of linux distros."}], "tags": [], "owner": {"reputation": 340, "user_id": 1623317, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FFxns.jpg?s=128&g=1", "display_name": "Howard Rubin", "link": "https://stackoverflow.com/users/1623317/howard-rubin"}, "is_accepted": false, "score": -1, "last_activity_date": 1435177986, "creation_date": 1435177986, "answer_id": 31036480, "question_id": 31035948, "link": "https://stackoverflow.com/questions/31035948/which-and-how-do-i-use-a-compiler-with-eclipse-juno-newest-one/31036480#31036480", "title": "Which and how do i use a compiler with eclipse juno (newest one)?", "body": "<p>You didn't say what operating system you're running on. For Windows, you can <a href=\"https://www.visualstudio.com/en-us/products/visual-studio-express-vs.aspx\" rel=\"nofollow\">download Visual Studio Express</a>. For Linux, GCC works well, so if g++ at a command prompt isn't found, you should install the build-essential package, like this:\nsudo apt-get install build-essential</p>\n"}], "owner": {"reputation": 11, "user_id": 5046204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e72eb1e5d7ad0921a299f9fd687200?s=128&d=identicon&r=PG&f=1", "display_name": "keshoswald", "link": "https://stackoverflow.com/users/5046204/keshoswald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1435177986, "creation_date": 1435176254, "question_id": 31035948, "link": "https://stackoverflow.com/questions/31035948/which-and-how-do-i-use-a-compiler-with-eclipse-juno-newest-one", "title": "Which and how do i use a compiler with eclipse juno (newest one)?", "body": "<p>i am learning c++ using eclipse. I have heard that i need a compiler with it. Which one should i use and how do i add it? Also if there is a better ide than eclipse for c++ please let me know. Thanks</p>\n"}, {"tags": ["c++", "operator-keyword"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435175807, "post_id": 31035776, "comment_id": 50095945, "body": "<a href=\"http://ideone.com/TWtPTP\" rel=\"nofollow noreferrer\">Doesn&#39;t compile</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1197, "user_id": 4931530, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-nDmPkk0Onz4/AAAAAAAAAAI/AAAAAAAABLE/oS85cViB7SA/photo.jpg?sz=128", "display_name": "Acha Bill", "link": "https://stackoverflow.com/users/4931530/acha-bill"}, "edited": false, "score": 0, "creation_date": 1435175857, "post_id": 31035776, "comment_id": 50095979, "body": "@jafar See my previous comment."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1435175858, "post_id": 31035776, "comment_id": 50095981, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/669818/virtual-assignment-operator-c\">virtual assignment operator C++</a>"}, {"owner": {"reputation": 3, "user_id": 5002868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5134f90761a22a4b9a94de9004a8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Papkov", "link": "https://stackoverflow.com/users/5002868/michael-papkov"}, "edited": false, "score": 0, "creation_date": 1435176037, "post_id": 31035776, "comment_id": 50096090, "body": "Sorry for the mistake, I was trying to figure it our and changed it. It does compile now."}, {"owner": {"reputation": 1197, "user_id": 4931530, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-nDmPkk0Onz4/AAAAAAAAAAI/AAAAAAAABLE/oS85cViB7SA/photo.jpg?sz=128", "display_name": "Acha Bill", "link": "https://stackoverflow.com/users/4931530/acha-bill"}, "edited": false, "score": 0, "creation_date": 1435176296, "post_id": 31035776, "comment_id": 50096227, "body": "what do you want to achieve?"}, {"owner": {"reputation": 3, "user_id": 5002868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5134f90761a22a4b9a94de9004a8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Papkov", "link": "https://stackoverflow.com/users/5002868/michael-papkov"}, "edited": false, "score": 0, "creation_date": 1435176364, "post_id": 31035776, "comment_id": 50096260, "body": "I want to understand why in b=b2 it goes to assignment operator of A, and not B, since I&#39;m assigning to B right?"}, {"owner": {"reputation": 1197, "user_id": 4931530, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-nDmPkk0Onz4/AAAAAAAAAAI/AAAAAAAABLE/oS85cViB7SA/photo.jpg?sz=128", "display_name": "Acha Bill", "link": "https://stackoverflow.com/users/4931530/acha-bill"}, "edited": false, "score": 0, "creation_date": 1435176499, "post_id": 31035776, "comment_id": 50096341, "body": "you cant assign <code>a</code> to <code>b</code>. Error: <code>binary &#39;=&#39;: no operator found which takes a right-hand operand of type &#39;A&#39; (or there is no acceptable conversion)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5002868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5134f90761a22a4b9a94de9004a8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Papkov", "link": "https://stackoverflow.com/users/5002868/michael-papkov"}, "edited": false, "score": 0, "creation_date": 1435176560, "post_id": 31036005, "comment_id": 50096366, "body": "How is it a better match tho? They are exactly the same, are they not?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 3, "user_id": 5002868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5134f90761a22a4b9a94de9004a8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Papkov", "link": "https://stackoverflow.com/users/5002868/michael-papkov"}, "edited": false, "score": 0, "creation_date": 1435176609, "post_id": 31036005, "comment_id": 50096386, "body": "@MichaelPapkov: one overload (user-defined) takes an <code>A const&amp;</code>, the other (compiler-generated) takes a <code>B const&amp;</code>."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 2, "last_activity_date": 1435176436, "creation_date": 1435176436, "answer_id": 31036005, "question_id": 31035776, "link": "https://stackoverflow.com/questions/31035776/c-operator-weird-behviour/31036005#31036005", "title": "c++ operator= weird behviour", "body": "<p>There's still a compiler-generated assignment operator in class <code>B</code> (it's overloaded); unlike how this works with constructors, defining one or more assignment operator overloads does not prevent the compiler from generating a copy assignment operator when one is lacking. The compiler generated one calls <code>A::operator=</code>. And it's the better match for an argument of type <code>B</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5002868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5134f90761a22a4b9a94de9004a8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Papkov", "link": "https://stackoverflow.com/users/5002868/michael-papkov"}, "edited": false, "score": 0, "creation_date": 1435177299, "post_id": 31036040, "comment_id": 50096767, "body": "It seems like you&#39;re right, unless I explicitly overload B&amp; B::operator=(B const&amp; b) my self, It does what you say it does."}], "tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": true, "score": 1, "last_activity_date": 1435176579, "creation_date": 1435176579, "answer_id": 31036040, "question_id": 31035776, "link": "https://stackoverflow.com/questions/31035776/c-operator-weird-behviour/31036040#31036040", "title": "c++ operator= weird behviour", "body": "<p>You've defined an assignment operator in <code>B</code>, but there's also another implicit copy-assignment operator generated by the compiler:</p>\n\n<pre><code>B&amp; B::operator=(B const&amp;);\n</code></pre>\n\n<p>This is a better match than the one that takes <code>A const&amp;</code> so it is chosen in the assignment <code>b = b2</code> (since <code>b2</code> is a <code>B</code> it doesn't require a derived-to-base conversion for the one that takes an <code>A</code>). The implicit copy-assignment operator calls the copy-assignment operator of the base class which you wrote:</p>\n\n<pre><code>B&amp; B::operator=(B const&amp; b) {\n    A::operator=(b);\n    return *this;\n}\n</code></pre>\n\n<p>This is why it looks like <code>A::operator=(A const&amp;)</code> is being chosen by the assignment.</p>\n"}], "owner": {"reputation": 3, "user_id": 5002868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5134f90761a22a4b9a94de9004a8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Papkov", "link": "https://stackoverflow.com/users/5002868/michael-papkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 31036040, "answer_count": 2, "score": -1, "last_activity_date": 1435176579, "creation_date": 1435175642, "last_edit_date": 1435175904, "question_id": 31035776, "link": "https://stackoverflow.com/questions/31035776/c-operator-weird-behviour", "title": "c++ operator= weird behviour", "body": "<p>Help? I really have no idea what's happening here?\nWhy in line 3 of assignments it calls operator= of A, when its an assignment of B to B?</p>\n\n<pre><code>class A{\npublic: \n    A&amp; operator=(const A&amp;){cout &lt;&lt; \"A assignment\" &lt;&lt; endl;return *this;}\n};\n\nclass B:public A{\npublic: \n    A&amp; operator=(const A&amp;){cout &lt;&lt; \"B assignment\" &lt;&lt; endl;return *this;}\n};\n\nint main() {\n    A a;\n    B b;\n    B b2;       \n    a=b; //  output: A assignment\n    b=a; //  output: B assignment\n    b=b2; //  output: A assignment WHY??\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "regex", "lambda", "boost-filesystem"], "comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1435176248, "post_id": 31035750, "comment_id": 50096193, "body": "Are you sure you used <code>back_inserter</code>, and not <code>front_inserter</code>? <code>forward_list</code> doesn&#39;t have a <code>push_back</code> function, so <code>back_inserter</code> should not work with it."}], "answers": [{"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 2, "last_activity_date": 1435176160, "last_edit_date": 1435176160, "creation_date": 1435176050, "answer_id": 31035891, "question_id": 31035750, "link": "https://stackoverflow.com/questions/31035750/segmentation-fault-in-stdtransform/31035891#31035891", "title": "Segmentation fault in std::transform", "body": "<p>Your output iterator is a simple <code>results.begin()</code>, which is probably <code>== results.end()</code>. The clue here is that the failure comes when trying to assign the result.</p>\n\n<p>You either need a <code>back_inserter</code> as you found, or to use some container with enough space already allocated (which can only work if you know how many items you're transforming in advance).</p>\n\n<p>Specifically, consider the sample implementation of the first overload <a href=\"http://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow\">here</a>.</p>\n\n<p>The line</p>\n\n<pre><code>*d_first++ = op(*first1++);\n</code></pre>\n\n<p>requires the destination iterator already to be valid. If it's <code>== end()</code> as suggested, the whole operation is illegal.</p>\n"}, {"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 13, "last_activity_date": 1435176198, "creation_date": 1435176198, "answer_id": 31035928, "question_id": 31035750, "link": "https://stackoverflow.com/questions/31035750/segmentation-fault-in-stdtransform/31035928#31035928", "title": "Segmentation fault in std::transform", "body": "<p>The <code>std::transform</code> algorithm's third parameter should be an iterator to the start of the range where the values should be written. Specifically, it works by overwriting the values in the range pointed at by the iterator with the transformed values. This means that there actually have to be values there to overwrite in the first place. In your case, you're writing to an empty <code>forward_list</code>, so there's nothing to write to, hence the crash.</p>\n\n<p>To fix this, consider replacing the last argument with a <code>back_inserter</code>, which will automatically create the space that's needed as the values are produced:</p>\n\n<pre><code>std::transform(std::sregex_iterator(file_data.begin(), file_data.end(), re),\n               std::sregex_iterator(),\n               back_inserter(results), // &lt;--- This is new\n               [&amp;](const std::smatch&amp; m)-&gt;fs::path{\n        return root / fs::path(m[1].str());\n});\n</code></pre>\n\n<p>More generally, to the best of my knowledge, all of the algorithms in <code>&lt;algorithm&gt;</code> that write to output ranges will assume that there are values available to overwrite in that range. If that isn't the case, consider using a <code>back_inserter</code> or other type of insert iterator, which will automatically create the space that's needed for you.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 2187, "user_id": 2920614, "user_type": "registered", "accept_rate": 48, "profile_image": "https://lh4.googleusercontent.com/-esVq312MLXE/AAAAAAAAAAI/AAAAAAAA2Tk/jQtcCx2Owb0/photo.jpg?sz=128", "display_name": "amigo421", "link": "https://stackoverflow.com/users/2920614/amigo421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 0, "accepted_answer_id": 31035928, "answer_count": 2, "score": 10, "last_activity_date": 1435176315, "creation_date": 1435175544, "last_edit_date": 1435176315, "question_id": 31035750, "link": "https://stackoverflow.com/questions/31035750/segmentation-fault-in-stdtransform", "title": "Segmentation fault in std::transform", "body": "<p>I'm trying to transfer parsed out the file names from regex match to the list of <code>filesystem::path</code> objects. </p>\n\n<p>I believe that matches are valid because <code>for_each</code> for the same iterators and print to console work perfectly. However, I'm getting a segmentation fault running this code. What am I doing wrong? Is there a mistake in my lambda?</p>\n\n<pre><code>        namespace fs = boost::filesystem;\n        std::forward_list&lt;fs::path&gt; results;\n        std::transform(std::sregex_iterator(file_data.begin(), file_data.end(), re),\n                       std::sregex_iterator(), results.begin(),\n                       [&amp;](const std::smatch&amp; m)-&gt;fs::path{\n            return root / fs::path(m[1].str());\n        });\n</code></pre>\n\n<p>GDB shows me this line as a place of error:</p>\n\n<pre><code>path&amp; operator=(const path&amp; p)\n{\n  m_pathname = p.m_pathname;\n  return *this;\n}\n</code></pre>\n\n<p>UPDATE: found the solution - use <code>back_inserter(results)</code> instead of <code>results.begin()</code>. However, why is that?</p>\n"}, {"tags": ["c++", "multidimensional-array", "data-structures"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1435175628, "post_id": 31035683, "comment_id": 50095822, "body": "If you have a sparse matrix (i.e. lots more grid cells that <code>Node</code> values) then this would be okay, if you have a dense matrix, I would discourage this kind of container for performance. You&#39;ll have tons of cache misses."}, {"owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 3, "creation_date": 1435175639, "post_id": 31035683, "comment_id": 50095829, "body": "why don&#39;t you define your own class (i.e. <code>point3d</code>) to use as your map key?"}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 0, "creation_date": 1435177295, "post_id": 31035683, "comment_id": 50096762, "body": "If you only need them to be negative (not fractional), why don&#39;t you use <code>int</code>?"}, {"owner": {"reputation": 341, "user_id": 4407052, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-VL_6BOuRiUU/AAAAAAAAAAI/AAAAAAAAAKU/soyh07p12zg/photo.jpg?sz=128", "display_name": "jagemue", "link": "https://stackoverflow.com/users/4407052/jagemue"}, "reply_to_user": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 0, "creation_date": 1435177356, "post_id": 31035683, "comment_id": 50096799, "body": "@mescalinum: Yeah, you&#39;re right. I will do that. Thought a bit too complex ;-)"}, {"owner": {"reputation": 341, "user_id": 4407052, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-VL_6BOuRiUU/AAAAAAAAAAI/AAAAAAAAAKU/soyh07p12zg/photo.jpg?sz=128", "display_name": "jagemue", "link": "https://stackoverflow.com/users/4407052/jagemue"}, "reply_to_user": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 0, "creation_date": 1435177502, "post_id": 31035683, "comment_id": 50096881, "body": "@C&#225;ssio Renan: It is a greater project and the positions have to be double (was not my decision)."}], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 106804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b5afbe55a4beae824e3b88f75d954b1?s=128&d=identicon&r=PG", "display_name": "Luis Yanes", "link": "https://stackoverflow.com/users/106804/luis-yanes"}, "edited": false, "score": 0, "creation_date": 1435190509, "post_id": 31035816, "comment_id": 50101957, "body": "In the case the user cares about repeated points then this solution is not correct because the repetitions will not be represented in the map."}, {"owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "reply_to_user": {"reputation": 337, "user_id": 106804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b5afbe55a4beae824e3b88f75d954b1?s=128&d=identicon&r=PG", "display_name": "Luis Yanes", "link": "https://stackoverflow.com/users/106804/luis-yanes"}, "edited": false, "score": 0, "creation_date": 1435212543, "post_id": 31035816, "comment_id": 50107640, "body": "In this context repeated points would be based on floating point equality...which would require in turn forther analysis"}], "tags": [], "owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "is_accepted": true, "score": 3, "last_activity_date": 1435175819, "creation_date": 1435175819, "answer_id": 31035816, "question_id": 31035683, "link": "https://stackoverflow.com/questions/31035683/cpp-use-map-for-multidimensionality/31035816#31035816", "title": "CPP: Use map for multidimensionality?", "body": "<p>My opinion is no.</p>\n\n<p>Use a std::map (without the pointer). vector3d is any structure holding 3 double ordered somehow. A possibility is</p>\n\n<pre><code>struct vector3d\n{\n   double x ;\n   double y ; \n   double z ;\n} ;\n</code></pre>\n\n<p>with a </p>\n\n<pre><code>bool operator&lt;(const vector3d lhs, const vector3d &amp;rhs)\n{\n   if (lhs.x != rhs.x)\n      return lhs.x &lt; rhs.x ;\n   if (lhs.y != rhs.y)\n      return lhs.y &lt; rhs.y ;\n    return lhs.z &lt; rhs.z ;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 3, "last_activity_date": 1435175984, "last_edit_date": 1435175984, "creation_date": 1435175876, "answer_id": 31035835, "question_id": 31035683, "link": "https://stackoverflow.com/questions/31035683/cpp-use-map-for-multidimensionality/31035835#31035835", "title": "CPP: Use map for multidimensionality?", "body": "<p>That data structure can be fine, you may consider to store smart pointer instead of raw one not to deal with memory management manually. But depends on situation it could be more efficient to use structure with three coordinates as a key for a single map:</p>\n\n<pre><code>struct 3d {\n    double x, y, z;\n    bool operator&lt;( const 3d &amp;r ) const;\n}\n\nstd::map&lt; 3d, pathplanning::Node*&gt; map;\n</code></pre>\n\n<p><code>std::tuple&lt;double, double, double&gt;</code> can be used as well. This will eliminate 2 additional lookups for data access and probably would be more cache friendly.</p>\n\n<p>On another side if you need performance but do not care about order you may consider <code>std::unordered_map</code>, but in that case you would have to implement <code>std::hash</code> specialization for 3d structure. Or you can use 3 nested <code>std::unordered_map</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 106804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b5afbe55a4beae824e3b88f75d954b1?s=128&d=identicon&r=PG", "display_name": "Luis Yanes", "link": "https://stackoverflow.com/users/106804/luis-yanes"}, "is_accepted": false, "score": 2, "last_activity_date": 1435176896, "creation_date": 1435176896, "answer_id": 31036113, "question_id": 31035683, "link": "https://stackoverflow.com/questions/31035683/cpp-use-map-for-multidimensionality/31036113#31036113", "title": "CPP: Use map for multidimensionality?", "body": "<p>You could also try using a <code>unordered_multimap&lt; gridPos, pathfinder::Node* &gt;</code> and use a mapping function of the 3D <code>gridPos</code> into 1D, a nice article about how to do this with hash tables can be found here (<a href=\"http://matthias-mueller-fischer.ch/publications/tetraederCollision.pdf\" rel=\"nofollow\">http://matthias-mueller-fischer.ch/publications/tetraederCollision.pdf</a>).</p>\n\n<p>For an explanation on how to write a custom hash function for STL containers you can visit <a href=\"http://www.drdobbs.com/windows/user-defined-hash-functions-for-unordere/231600210\" rel=\"nofollow\">http://www.drdobbs.com/windows/user-defined-hash-functions-for-unordere/231600210</a> and follow the advise presented there.</p>\n\n<p>Then inside the multimap you can store your <code>pathfinder::Node</code> data or pointers as you see fit and query the structure using the mapping of the 1D <code>gridPos</code> to 3D.</p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 341, "user_id": 4407052, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-VL_6BOuRiUU/AAAAAAAAAAI/AAAAAAAAAKU/soyh07p12zg/photo.jpg?sz=128", "display_name": "jagemue", "link": "https://stackoverflow.com/users/4407052/jagemue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 1, "accepted_answer_id": 31035816, "answer_count": 3, "score": 2, "last_activity_date": 1435176896, "creation_date": 1435175324, "question_id": 31035683, "link": "https://stackoverflow.com/questions/31035683/cpp-use-map-for-multidimensionality", "title": "CPP: Use map for multidimensionality?", "body": "<p>I want to build a 3D grid and use a multidimensional map, which holds the nodes, something like:</p>\n\n<pre><code>std::map&lt;double, std::map&lt;double, std::map&lt;double, pathplanning::Node*&gt; &gt; &gt;\n</code></pre>\n\n<p>The three doubles are the (x,y,z) position in the grid, the <code>Node</code> datatype is a simple class, which capsules some information.</p>\n\n<p>I'm new at the cpp community and i want to ask: is that a good way? Or should i use some different datastructures? Here is why i don't use a multidimensional array: the positions could be negative, the array index can't.</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "is_accepted": true, "score": 5, "last_activity_date": 1435177042, "creation_date": 1435177042, "answer_id": 31036159, "question_id": 31035641, "link": "https://stackoverflow.com/questions/31035641/qt-qinstallmessagehandler-encoding/31036159#31036159", "title": "Qt qInstallMessageHandler encoding", "body": "<p>The problem is here:</p>\n\n<pre><code>QByteArray localMsg = msg.toLatin1();\n</code></pre>\n\n<p>To quote <a href=\"http://doc.qt.io/qt-5/qstring.html#toLatin1\" rel=\"noreferrer\">the documentation for QString::toLatin1()</a>:</p>\n\n<blockquote>\n  <p>Returns a Latin-1 representation of the string as a QByteArray.</p>\n  \n  <p>The returned byte array is undefined if the string contains non-Latin1\n  characters. Those characters may be suppressed or <strong>replaced with a\n  question mark</strong>.</p>\n</blockquote>\n\n<p>Emphasis mine.</p>\n\n<p>The good news is there's no reason you need to call this method.  Converting the contents of msg from a QString to a QByteArray is completely unnecessary here.</p>\n"}], "owner": {"reputation": 595, "user_id": 1274868, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bf94875f746c352d74cd9863420dc62c?s=128&d=identicon&r=PG", "display_name": "Lobster", "link": "https://stackoverflow.com/users/1274868/lobster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "accepted_answer_id": 31036159, "answer_count": 1, "score": 1, "last_activity_date": 1579258298, "creation_date": 1435175161, "last_edit_date": 1579258298, "question_id": 31035641, "link": "https://stackoverflow.com/questions/31035641/qt-qinstallmessagehandler-encoding", "title": "Qt qInstallMessageHandler encoding", "body": "<p>I have a problem with Russian text in debug log when I implemented my custom log handler via <code>qInstallMessageHandler</code> function. Currently, my code is:</p>\n\n<pre><code>void myMessageOutput(QtMsgType type, const QMessageLogContext &amp;context, const QString &amp;msg) {\n\n    QByteArray localMsg = msg.toLatin1();\n\n    QString stringType;\n    switch (type) {\n    case QtDebugMsg:\n        stringType = \"D\";\n        break;\n    case QtWarningMsg:\n        stringType = \"W\";\n        break;\n    case QtCriticalMsg:\n        stringType = \"C\";\n        break;\n    case QtFatalMsg:\n        stringType = \"Fatal\";\n        break;\n    default:\n        stringType = \"Unknown\";\n    }\n\n    QString logString = QString(\"[%1] %2:%3 - %4\\n\")\n            .arg(stringType)\n            .arg(context.function)\n            .arg(context.line)\n            .arg(localMsg.constData());\n\n    if (__logFile.isOpen()) {\n        QTextStream stream(&amp;__logFile);\n        stream &lt;&lt; logString;\n    }\n\n    QTextStream stderrStream(stderr, QIODevice::WriteOnly);\n\n    stderrStream&lt;&lt;logString;\n\n    if (type == QtFatalMsg) {\n        abort();\n    }\n} \n</code></pre>\n\n<p>And in <code>main()</code> function:</p>\n\n<pre><code>QTextCodec::setCodecForLocale(QTextCodec::codecForName(\"UTF-8\"));\ncreateLogFile();\n\nqInstallMessageHandler(myMessageOutput);\n\nqDebug()&lt;&lt;\"Hi \u043f\u0440\u0438\u0432\u0435\u0442\";\n</code></pre>\n\n<p>But instead of \"Hi \u043f\u0440\u0438\u0432\u0435\u0442\" I got </p>\n\n<blockquote>\n  <p>[D] int main(int, char**):131 - Hi ??????</p>\n</blockquote>\n\n<p>in qt creator log. I tried to user Windows-1251 codec, but it don't change anything. </p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1435176124, "post_id": 31035638, "comment_id": 50096137, "body": "Pick one - two implementations doing the same, different ways (I would suggest using std::thread)"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5033662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1042dfd6dadd14b64a6be4215a08f0fd?s=128&d=identicon&r=PG&f=1", "display_name": "rayallen", "link": "https://stackoverflow.com/users/5033662/rayallen"}, "edited": false, "score": 0, "creation_date": 1435176715, "post_id": 31035715, "comment_id": 50096443, "body": "Thank you for the reply. can you give me a example for the platform specific aspects?"}], "tags": [], "owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "is_accepted": true, "score": 0, "last_activity_date": 1435175439, "creation_date": 1435175439, "answer_id": 31035715, "question_id": 31035638, "link": "https://stackoverflow.com/questions/31035638/the-difference-between-multi-threaded-programming-for-win32-and-multi-threade/31035715#31035715", "title": "The difference between &quot;Multi-Threaded Programming for win32&quot; and &quot;Multi-Threaded Programming with C++11&quot;", "body": "<p>If you are programming under windows you can use both. If you want your program be portable on other platforms then you'll better stick to c++11. </p>\n\n<p>As a general rule I would suggest you to go for c++11 if you are learning, since it's a set more coherent with c++ language. Win32 threading APIs are a C-style set of functions, not a C++ library.</p>\n\n<p>On the other hand there may be valid reasons to use win32 programming, but this are buried into platform specific aspects that you probably do not need (now).</p>\n"}, {"tags": [], "owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "is_accepted": false, "score": 0, "last_activity_date": 1435175647, "creation_date": 1435175647, "answer_id": 31035777, "question_id": 31035638, "link": "https://stackoverflow.com/questions/31035638/the-difference-between-multi-threaded-programming-for-win32-and-multi-threade/31035777#31035777", "title": "The difference between &quot;Multi-Threaded Programming for win32&quot; and &quot;Multi-Threaded Programming with C++11&quot;", "body": "<p>Before C++11 there was no way in the standard library to create threads. CreateThread() is a Windows API function and therefore will only work on Windows.</p>\n\n<p>If your compiler supports C++11 and specifically C++11 threads, you are generally better off using std::thread because it will work on with any compiler/OS that supports C++11 threads. It's worth noting that C++11 threads are basically taken from Boost threads, so if you ever run into a situation where they aren't supported, you can probably download the boost libraries and change all your std::thread calls to boost::thread and it should still work.</p>\n"}], "owner": {"reputation": 93, "user_id": 5033662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1042dfd6dadd14b64a6be4215a08f0fd?s=128&d=identicon&r=PG&f=1", "display_name": "rayallen", "link": "https://stackoverflow.com/users/5033662/rayallen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 31035715, "answer_count": 2, "score": 0, "last_activity_date": 1435175647, "creation_date": 1435175145, "question_id": 31035638, "link": "https://stackoverflow.com/questions/31035638/the-difference-between-multi-threaded-programming-for-win32-and-multi-threade", "title": "The difference between &quot;Multi-Threaded Programming for win32&quot; and &quot;Multi-Threaded Programming with C++11&quot;", "body": "<p>i am a rookie in C++ programming. I have a stupid question.</p>\n\n<p>If I want to program multi_threading , when do I use the \"Multi-Threaded Programming with C++11\" and when \"Multi-Threaded Programming for win32\"?</p>\n\n<p>In win32 uses man <code>CreateThread()</code>, In c++11 uses man <code>std::thread</code> </p>\n"}, {"tags": ["c++", "c++14", "sfinae"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435175038, "post_id": 31035563, "comment_id": 50095459, "body": "That is some pretty intense code there. What are you trying to achieve?"}, {"owner": {"reputation": 307, "user_id": 4899417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf31f49f9fb92d16755eeec4aff4d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Hans vesselg&#229;rd", "link": "https://stackoverflow.com/users/4899417/hans-vesselg%c3%a5rd"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435175664, "post_id": 31035563, "comment_id": 50095843, "body": "When I have a class with a member named children that is a tuple the tuple should get iterated and the children &lt;&lt; streamed"}, {"owner": {"reputation": 307, "user_id": 4899417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf31f49f9fb92d16755eeec4aff4d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Hans vesselg&#229;rd", "link": "https://stackoverflow.com/users/4899417/hans-vesselg%c3%a5rd"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435175745, "post_id": 31035563, "comment_id": 50095903, "body": "Any suggestions for an alternative approach is also welcome :)"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 3, "creation_date": 1435176282, "post_id": 31035563, "comment_id": 50096218, "body": "As a general rule, MSVC is always wrong."}], "answers": [{"comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1435175854, "post_id": 31035783, "comment_id": 50095978, "body": "can someone more familiar with the standardese meaning of &quot;undefined&quot; in this case confirm?"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 1, "creation_date": 1435176247, "post_id": 31035783, "comment_id": 50096192, "body": "You&#39;re exactly right. &quot;Undefined&quot; in this case means &quot;no definition&quot;, i.e. &quot;no class body&quot;."}, {"owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 0, "creation_date": 1435176399, "post_id": 31035783, "comment_id": 50096281, "body": "In my copy of N4140 it does not say <code>&#47;&#47; undefined</code>, it only says that all <b>specializations</b> need to meet the <code>UnaryTypeTraits</code> requirements. Which does not make any statement about the base template."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 0, "creation_date": 1435176472, "post_id": 31035783, "comment_id": 50096328, "body": "@DanielFrey sorry, I grabbed the wrong section number, it says that it 20.4.1 (under a reference to 20.4.2.5)"}, {"owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 0, "creation_date": 1435176923, "post_id": 31035783, "comment_id": 50096560, "body": "Ah. Well, in that case it&#39;s &quot;only&quot; the synopsis, which is non-binding in this case. 17.6 only mentions some requirements for the <i>defined</i> stuff from the synopsis, but it does not mention things marked (commented) as <i>undefined</i>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 1, "creation_date": 1435177854, "post_id": 31035783, "comment_id": 50097065, "body": "@DanielFrey &quot;specialization&quot; in the standardese sense can mean &quot;instantiation&quot; in the colloquial sense (e.g., <code>bitset&lt;31&gt;</code> is a &quot;specialization&quot; of <code>bitset</code>). Also, [res.on.headers]/p1 says that &quot;A C++ header shall provide the <i>declarations</i> and definitions that appear in its synopsis&quot;. <code>template &lt;class T&gt; class tuple_size;</code> is a declaration."}, {"owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1435177994, "post_id": 31035783, "comment_id": 50097150, "body": "@T.C. VC++ does provide the declaration and definitions, but it provides <i>more</i> definitions than listed in the synopsis."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1435178035, "post_id": 31035783, "comment_id": 50097165, "body": "@T.C. so, an empty <code>{}</code> primary template is in violation of the standard?  But a primary template of <code>tuple_size</code> that is <code>std::false_type</code> is not?  And a non-existent body is not?  (arguably, there are no specializations of an undefined primary template that are not template specializations?)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1435178244, "post_id": 31035783, "comment_id": 50097296, "body": "@Yakk <code>false_type</code> is also in violation (the <code>BaseCharacteristic</code> must be <code>std::integral_constant&lt;size_t, N&gt;</code>). Also, <a href=\"https://issues.isocpp.org/show_bug.cgi?id=42\" rel=\"nofollow noreferrer\">issues.isocpp.org/show_bug.cgi?id=42</a>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1435179513, "post_id": 31035783, "comment_id": 50097940, "body": "@T.C. ok ok, are you saying it would be compliant for a C++ standard library to define <code>tuple_size&lt;int&gt;</code> to be <code>std::integral_constant&lt;size_t, 7&gt;</code>.  Because 7 seems like a friendly number.  (and yes, making it <code>{}</code> and saying that all specializations should be yada yada, or the empty struct, is probably good)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1435179721, "post_id": 31035783, "comment_id": 50098065, "body": "@Yakk Why not 42? :) I&#39;m not sure, really. Either the base template must be undefined - so that there&#39;s no specialization <code>tuple_size&lt;int&gt;</code>; or it&#39;s UB to do <code>tuple_size&lt;int&gt;</code>, in which case defining it as <code>std::integral_constant&lt;size_t, 7&gt;</code> is perfectly legal. I&#39;m personally inclined towards the first interpretation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1435180003, "post_id": 31035783, "comment_id": 50098201, "body": "@T.C.: Your terminology seems off; I do not believe &quot;specialization&quot; is appropriate when, say, declaring a local variable <code>bitset&lt;31&gt; local_var;</code>. AFAIK, specialization is when you are providing a definition of the class; i.e. <code>template&lt;&gt; struct bitset&lt;31&gt; { ... };</code>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1435180154, "post_id": 31035783, "comment_id": 50098279, "body": "@Hurkyl It&#39;s the core language&#39;s terminology, not mine. [temp.spec]/p4: &quot;An instantiated template specialization can be either implicitly instantiated (14.7.1) for a given argument list or be explicitly instantiated (14.7.2). A specialization is a class, function, or class member that is either instantiated or explicitly specialized (14.7.3).&quot;"}, {"owner": {"reputation": 307, "user_id": 4899417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf31f49f9fb92d16755eeec4aff4d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Hans vesselg&#229;rd", "link": "https://stackoverflow.com/users/4899417/hans-vesselg%c3%a5rd"}, "edited": false, "score": 0, "creation_date": 1435181445, "post_id": 31035783, "comment_id": 50098908, "body": "&quot;You should realize however, that your question is not about the compiler&#39;s involved, but rather the standard library implementations.&quot; yes- of course I meant &quot;the compiling system&quot;"}], "tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": false, "score": 6, "last_activity_date": 1435200503, "last_edit_date": 1435200503, "creation_date": 1435175674, "answer_id": 31035783, "question_id": 31035563, "link": "https://stackoverflow.com/questions/31035563/does-the-standard-require-stdtuple-size-to-be-sfinae-friendly/31035783#31035783", "title": "Does the standard require std::tuple_size to be SFINAE-friendly?", "body": "<p>N4140 20.4.1 describes <code>tuple_size</code>'s non-specialized version as:</p>\n\n<pre><code>template &lt;class T&gt; class tuple_size; // undefined\n</code></pre>\n\n<p>By providing a definition, the MSVC lib has violated the standard.</p>\n\n<p>You should realize however, that your question is not about the compilers involved, but rather the standard library implementations.</p>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 4899417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf31f49f9fb92d16755eeec4aff4d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Hans vesselg&#229;rd", "link": "https://stackoverflow.com/users/4899417/hans-vesselg%c3%a5rd"}, "is_accepted": false, "score": 0, "last_activity_date": 1435247782, "creation_date": 1435247782, "answer_id": 31055215, "question_id": 31035563, "link": "https://stackoverflow.com/questions/31035563/does-the-standard-require-stdtuple-size-to-be-sfinae-friendly/31055215#31055215", "title": "Does the standard require std::tuple_size to be SFINAE-friendly?", "body": "<p>Could something like this perhaps work with some modifications?</p>\n\n<pre><code>template&lt;typename S, typename T,    typename   tuple_element&lt;0,decltype(T::children)&gt;::type &gt;\n    S&amp; operator&lt;&lt;(S&amp; s, const T&amp; t)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1435260880, "creation_date": 1435260880, "answer_id": 31059266, "question_id": 31035563, "link": "https://stackoverflow.com/questions/31035563/does-the-standard-require-stdtuple-size-to-be-sfinae-friendly/31059266#31059266", "title": "Does the standard require std::tuple_size to be SFINAE-friendly?", "body": "<p>The standard mandates that <code>tuple_size</code> <strong>not</strong> be SFINAE friendly, but <a href=\"https://issues.isocpp.org/show_bug.cgi?id=42\" rel=\"nofollow\">this is considered by many to be a defect, and looks on-track to be fixed in C++17</a>.</p>\n\n<p>It is required that all specializations (which in standard-speak for \"template instantiations\") of <code>tuple_size</code> basically be <code>std::integral_constant&lt;size_t, ?&gt;</code> or inherit from it.  (It leaves some freedom to the compiler)</p>\n\n<p>If the primary template isn't defined, then it doesn't violate that.  But if the primary template is defined to be an empty struct (or similar), then that empty struct is a template instance (which the standard calls a \"specialization\") that is not essentially <code>std::integral_constant&lt;size_t, ?&gt;</code>.</p>\n\n<p>By my reading, it would be legal for the primary template (the \"failure\" case) to be <code>std::integral_constant&lt;size_t, 42&gt;</code> or any other constant.  Useless and evil, but legal.  But being an empty struct violates the standard.</p>\n\n<p>However, the arguments about changing this to mandate an empty struct are about wording, and not about if it is a good idea.</p>\n\n<p>Thanks to @T.C. who solved this in a comment thread on another answer here.</p>\n"}], "owner": {"reputation": 307, "user_id": 4899417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf31f49f9fb92d16755eeec4aff4d84f?s=128&d=identicon&r=PG&f=1", "display_name": "Hans vesselg&#229;rd", "link": "https://stackoverflow.com/users/4899417/hans-vesselg%c3%a5rd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "accepted_answer_id": 31059266, "answer_count": 3, "score": 14, "last_activity_date": 1435260880, "creation_date": 1435174854, "last_edit_date": 1435185697, "question_id": 31035563, "link": "https://stackoverflow.com/questions/31035563/does-the-standard-require-stdtuple-size-to-be-sfinae-friendly", "title": "Does the standard require std::tuple_size to be SFINAE-friendly?", "body": "<p>Edit append:\nThe question title was \"do Visual Studio compiler or Clang have incorrect behavior\"- but that have been changed.</p>\n\n<p>So I add here that clang and gcc compiles it the way I intended, but VS does not.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>template&lt;typename S, typename T, std::size_t... I&gt;\n  void\n  print_tuple_like(S&amp; s, const T&amp; t, std::index_sequence&lt;I...&gt;)\n  {\n    void* unused[] = { &amp;(s &lt;&lt; std::get&lt;I&gt;(t))... };      \n  }\n\ntemplate&lt;typename S, typename T,\n         std::size_t N = std::tuple_size&lt;decltype(T::children)&gt;::value&gt;\n    S&amp; operator&lt;&lt;(S&amp; s, const T&amp; t)\n{\n    print_tuple_like(s, t.children, std::make_index_sequence&lt;N&gt;{});\n    return s;\n}\n</code></pre>\n\n<p>and I get an compiler error:</p>\n\n<pre><code>1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\utility(313): error C2338: The C++ Standard doesn't define tuple_size for this type.\n1&gt;  c:\\users\\jonas\\documents\\visual studio 2015\\projects\\consoleapplication7\\consoleapplication7\\consoleapplication7.cpp(36): note: see reference to class template instantiation 'std::tuple_size&lt;unknown-type&gt;' being compiled\n1&gt;  c:\\users\\jonas\\documents\\visual studio 2015\\projects\\consoleapplication7\\consoleapplication7\\consoleapplication7.cpp(43): note: see reference to function template instantiation 'void print_tuple_like&lt;S,std::tuple&lt;Signature::A,Signature::B&gt;,0,1&gt;(S &amp;,const T &amp;,std::integer_sequence&lt;_Ty,0,1&gt;)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              S=std::ostream,\n1&gt;              T=std::tuple&lt;Signature::A,Signature::B&gt;,\n1&gt;              _Ty=size_t\n1&gt;          ]\n1&gt;  c:\\users\\jonas\\documents\\visual studio 2015\\projects\\consoleapplication7\\consoleapplication7\\consoleapplication7.cpp(50): note: see reference to function template instantiation 'S &amp;operator &lt;&lt;&lt;std::ostream,Signature,2&gt;(S &amp;,const T &amp;)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              S=std::ostream,\n1&gt;              T=Signature\n1&gt;          ]\n</code></pre>\n\n<p>That is because the following code in visual studio:</p>\n\n<pre><code>// TEMPLATE STRUCT tuple_size \ntemplate&lt;class _Tuple&gt;  \nstruct tuple_size   {   // size of non-tuple\n    static_assert(_Always_false&lt;_Tuple&gt;::value, \"The C++ Standard doesn't define tuple_size for this type.\");   \n};\n</code></pre>\n\n<p>make the substitution failure into a hard failure- making the SFINAE SFIAE</p>\n\n<p>If I remove </p>\n\n<pre><code>static_assert(_Always_false&lt;_Tuple&gt;::value, \"The C++ Standard doesn't define tuple_size for this type.\");\n</code></pre>\n\n<p>it works.</p>\n\n<p>Is the code strecthing the c++ standard rules?\nOr is Microsoft in the wrong?</p>\n"}, {"tags": ["c++", "opencv", "image-recognition"], "owner": {"reputation": 51, "user_id": 2285659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc25570d0b0ed93d73bf7dcfe92f5c15?s=128&d=identicon&r=PG", "display_name": "mous16", "link": "https://stackoverflow.com/users/2285659/mous16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1447702443, "creation_date": 1435174699, "question_id": 31035519, "link": "https://stackoverflow.com/questions/31035519/quickly-recognize-different-scanned-forms-with-opencv-and-find-homography-transf", "title": "Quickly recognize different scanned forms with OpenCV and find homography transformation", "body": "<p>I have some image files of forms, that will be filled, printed and then scanned. The forms are of 5 different kinds (but possibly more), and I know the coordinates of the fields in original images.</p>\n\n<p>For each scanned document I have to find out which kind of form it is and then calculate the homography transformation to translate the specified fields coordinates.</p>\n\n<p>My problem is to do this procedure as fast as possible while keeping low the rate of wrong recognitions; also I don't know as much as I want of image analysis.</p>\n\n<p>I would like to build a \"database\" of original images keypoints, and then, for each scanned image, extrapolate keypoints, calculate transformation and so on.\nWhich is the right approach with OpenCV?\nBy now, I've managed to achieve the second part, from homography calculation to field coordinate transformation; here, more or less, my bad implementation of the first part:</p>\n\n<pre><code>void generateDataDb()\n{\n    cv::Ptr&lt;cv::xfeatures2d::SURF&gt; detector = cv::xfeatures2d::SURF::create();\n\n    const std::string dstPath{ \"./data_db.xml\" };\n    cv::FileStorage storage{ dstPath, cv::FileStorage::WRITE };\n\n    for(size_t i=1; i&lt;=5; ++i) {\n        std::string srcPath{ std::string{\"./templates/\"}+\n                             std::to_string(i)+\n                             std::string{\".png\"} };\n        cv::Mat modelImage { cv::imread(srcPath, CV_LOAD_IMAGE_GRAYSCALE) };\n\n        if(!modelImage.empty()){\n            std::vector&lt;cv::KeyPoint&gt; modelKeypoints;\n            cv::Mat modelDescriptors;\n            detector-&gt;detectAndCompute(modelImage,\n                                       cv::Mat(),\n                                       modelKeypoints,\n                                       modelDescriptors);\n\n            std::string keypointsId{ std::to_string(i)+\n                                     std::string{\"-keypoints\"} };\n            storage&lt;&lt;keypointsId&lt;&lt;modelKeypoints;\n            std::string descriptorsId{ std::to_string(i)+\n                                       std::string{\"-descriptors\"} };\n            storage&lt;&lt;descriptorsId&lt;&lt;modelDescriptors;\n        }\n    }\n    storage.release();\n}\n\ncv::Mat analyzeDocument(std::string srcPath)\n{\n    cv::Mat scannedImage { cv::imread(srcPath, CV_LOAD_IMAGE_GRAYSCALE) };\n    if(modelImage.empty()){\n        return {};\n    }\n\n    cv::Ptr&lt;cv::xfeatures2d::SURF&gt; detector = cv::xfeatures2d::SURF::create();\n    std::vector&lt;cv::KeyPoint&gt; scannedKeypoints;\n    cv::Mat scannedDescriptors;\n    detector-&gt;detectAndCompute(scannedImage,\n                               cv::Mat(),\n                               scannedKeypoints,\n                               scannedDescriptors);\n\n    const std::string dbPath{ \"./data_db.xml\" };\n    cv::FileStorage storage{ dbPath, cv::FileStorage::READ };\n    size_t formKind=0;  // Excuse me for the bad datatype,\n                        // in my code there are enums!\n\n    // Missing code that should set formKind to the right model index.\n\n    if(formKind==0){\n        return {};\n    }\n\n    std::string keypointsId{ std::to_string(formKind)+\n                             std::string{\"-keypoints\"} };\n    std::vector&lt;cv::KeyPoint&gt; modelKeypoints;\n    storage[keypointsId]&gt;&gt;modelKeypoints;\n    std::string descriptorsId{ std::to_string(formKind)+\n                               std::string{\"-descriptors\"} };\n    cv::Mat modelDescriptors;\n    storage[descriptorsId]&gt;&gt;modelDescriptors;\n\n    cv::FlannBasedMatcher matcher;\n    std::vector&lt; cv::DMatch &gt; matches;\n    matcher.match( modelDescriptors, scannedDescriptors, matches );\n    std::vector&lt;cv::Point2f&gt; modelPoints, scanPoints;\n    for( size_t i = 0; i &lt; matches.size(); i++ ) {\n        modelPoints.push_back( modelKeypoints[ matches[i].queryIdx ].pt );\n        scanPoints.push_back( scanKeypoints[ matches[i].trainIdx ].pt );\n    }\n    return cv::findHomography( modelPoints, scanPoints, cv::RANSAC );\n}\n</code></pre>\n\n<p>I know that there are better ideas for the database, but I've too many doubts about which one is the right one for me.</p>\n\n<p>Also, <code>SURF</code>, <code>FlannBasedMatcher</code>, <code>DMatch</code>, <code>RANSAC</code>, I don't understand strengths and weaknesses of these choices, so maybe I'm all wrong.</p>\n\n<p>Any suggestion is appreciated, thanks!</p>\n"}, {"tags": ["c++", "unicode", "char", "fstream"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1435174873, "post_id": 31035517, "comment_id": 50095359, "body": "You can&#39;t just increment the character and hope for it to successfully iterate over the entirety of the UNICODE character space. There are literally billions of possible characters, but <a href=\"https://en.wikipedia.org/wiki/List_of_Unicode_characters\" rel=\"nofollow noreferrer\">only a fraction are allocated</a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435175107, "post_id": 31035517, "comment_id": 50095502, "body": "Unicode chars need to follow certain bit patterns, as mentioned only a fraction of all the possible numbers that would fit in."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5045882"}, "edited": false, "score": 0, "creation_date": 1435175202, "post_id": 31035517, "comment_id": 50095558, "body": "Okay, but can you explain me a way to do this?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1435175368, "post_id": 31035517, "comment_id": 50095652, "body": "@KilianHe the best way is to get a Unicode database that tells you which characters are defined, although it may get out of date."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1435178363, "post_id": 31035517, "comment_id": 50097363, "body": "@tadman, not billions...U+0000 to U+10FFFF is 1,114,112 possible but not all are allocated."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5045882"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1435178387, "post_id": 31035517, "comment_id": 50097381, "body": "@MarkRansom I would really appreciate a lot if you would go into detail with that. sounds very promising! I&#39;m a novice programmer so bear with me :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1435178625, "post_id": 31035517, "comment_id": 50097504, "body": "@MarkTolonen Ah, I just checked and the 6-byte variant of UTF-8 was killed off a while ago. Good to know. <a href=\"https://en.wikipedia.org/?title=UTF-32\" rel=\"nofollow noreferrer\">UTF-32</a> doesn&#39;t use the entire 32-bit number space, which is where I was thinking &quot;billions&quot; from."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5045882"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1435178990, "post_id": 31035517, "comment_id": 50097669, "body": "@MarkTolonen can you tell me how to iterate through all those chars and skip the ones that aren&#39;t allocated?"}, {"owner": {"reputation": 6825, "user_id": 631429, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a9ec13176c9cc5a876ac2bb65aac173c?s=128&d=identicon&r=PG", "display_name": "wjl", "link": "https://stackoverflow.com/users/631429/wjl"}, "edited": false, "score": 0, "creation_date": 1435180206, "post_id": 31035517, "comment_id": 50098311, "body": "Please keep in mind that <code>wchar_t</code> and &quot;wide&quot; streams in general don&#39;t have anything to do with Unicode. You actually will have to do quite a bit of work to use them and Unicode in a compatible way, and about 10x that amount of work to do the same in a cross-platform manner."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1435184110, "post_id": 31035517, "comment_id": 50100070, "body": "@KilianHe, You need some kind of Unicode database to determine what is used and what isn&#39;t.  In Python, for example, there is a <code>unicodedata</code> module where you can query what a Unicode codepoint represents and make decisions.  Also, writing Unicode codepoints to a file isn&#39;t possible.  You have to pick an encoding.  UTF-8, UTF-16LE, UTF-16BE, UTF-32LE, and UTF-32BE are typical options.  Would you accept a Python solution? :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5045882"}, "edited": false, "score": 0, "creation_date": 1435220032, "post_id": 31035517, "comment_id": 50112018, "body": "@ MarkTolonen yes a Python solution would be dandy aswell :)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5045882"}, "edited": false, "score": 0, "creation_date": 1435220487, "post_id": 31040677, "comment_id": 50112291, "body": "Thanks a lot! Seems like C++ is a poor choice for this task? What will an unassigned code point look like? If it&#39;s an empty string I could check that before writing it to the file. What happens when I try to access something within the range for private use?"}, {"owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "edited": false, "score": 0, "creation_date": 1435268634, "post_id": 31040677, "comment_id": 50143122, "body": "It&#39;s probably a good idea to do a bit of research into what Unicode is. C++ is fine, but it will be a bit more work. Unassigned code points and private use characters will probably show up as invalid characters, how exactly depends on how you display the file. For instance, \ue000 is in a private use block, \u0378 is not assigned."}], "tags": [], "owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "is_accepted": false, "score": 0, "last_activity_date": 1435202607, "creation_date": 1435202607, "answer_id": 31040677, "question_id": 31035517, "link": "https://stackoverflow.com/questions/31035517/write-every-possible-char-into-a-file/31040677#31040677", "title": "write every possible char into a file", "body": "<p>This is quite an open-ended question, the exact answer depends on how ambitious you are. So I'm not going to post a program, but just list the basic steps:</p>\n\n<ul>\n<li><p>Unicode allocates characters to numbers (called <em>code points</em>), for instance \"A\" is allocated to nr 65, commonly written in hexadecimal as U+0041. It also defines the name and a lot of other properties. For instance \"A\" is called \"LATIN CAPITAL LETTER A\", it's lower case version is \"a\", it's part of a left-to-right language etc.</p></li>\n<li><p>But on it's own it does <strong>not</strong> specify how that character is written to a file. For that you have to pick an encoding. A common encoding are UTF-8, it should be easy to find the code to encode a code point to bytes. And if you open your text file, then your editor also needs to understand that encoding (shouldn't be a problem for UTF-8).</p></li>\n<li><p>Specifically for C++, when writing UTF-8 I would open a narrow output stream (<code>std::ofstream</code>) and write the bytes. C++ in principle has no support for writing Unicode files. Your program would roughly look like this.</p>\n\n<pre><code>for (unsigned int codePoint = 0; codePoint &lt; 0x110000; ++codePoint)\n{\n    std::string utf8 = encode_utf8(codePoint);\n    outStream &lt;&lt; utf8 &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>Maybe add a newline every 256 characters or so.</p></li>\n<li><p>There are 17 <em>planes</em> of 2^16 code points. many commonly used characters are in the first plane. You can either print the first plane only (U+0000 to U+FFFF), or print all code points (U+0000 to U+10FFFF). Some of the planes don't have assigned characters yet.</p></li>\n<li><p>Do you want to print the <em>assigned</em> code points only? In that case you have to download the list from the Unicode consortium and parse it. There is no formula which yields the allocated code points. Or as others pointed out, you can use a language with those tables built-in, like Python or Java.</p></li>\n<li><p>And finally, some of the ranges are reserved for <em>private use</em>. You may choose to skip those as well.</p></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5045882"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1435202607, "creation_date": 1435174695, "question_id": 31035517, "link": "https://stackoverflow.com/questions/31035517/write-every-possible-char-into-a-file", "title": "write every possible char into a file", "body": "<p>I want to write every character that exists into a file. I guess unicode has the most complete set of characters, but I can't quite tell. Can you help me out with this? I'm working in C++. This code seems to \"only\" write the ASCII set of chars (or am I wrong?). Thx for the help.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main(void) {\n\nwofstream wOutStream;\nwOutStream.open(\"myFile.txt\");\n\nwchar_t myChar = 0;\ndo {\n    wOutStream &lt;&lt; myChar &lt;&lt; \" \";\n    myChar++;\n} while (myChar != 0);\n\nwOutStream.close();\n\ncin.get();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c-preprocessor", "preprocessor-directive", "chrono"], "comments": [{"owner": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "edited": false, "score": 0, "creation_date": 1435174946, "post_id": 31035501, "comment_id": 50095401, "body": "What compiler are you using? The first errors suggests that the preprocessor doesn&#39;t understand <code>__has_feature</code>, which after a quick search seems to be Clang-specific? (Maybe gcc supports it as well?)"}], "answers": [{"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 2, "last_activity_date": 1469916113, "last_edit_date": 1469916113, "creation_date": 1435176343, "answer_id": 31035977, "question_id": 31035501, "link": "https://stackoverflow.com/questions/31035501/preprocessor-errors-compiling-chrono-io/31035977#31035977", "title": "Preprocessor Errors Compiling Chrono_io", "body": "<p>I haven't played with this code in several years.  It is using:</p>\n\n<pre><code>#if __has_feature(cxx_rvalue_references)\n          __seconds_(std::move(__seconds)),\n...\n</code></pre>\n\n<p>to check if the compiler supports rvalue references (C++11 move semantics).  My recommendation is to assume that you have C++11 (since you have to have <code>&lt;chrono&gt;</code> and just remove the <code>__has_feature</code> and the <code>#else</code> branch.</p>\n\n<p>If for some reason you have to support a compiler which doesn't have rvalue references you can:</p>\n\n<pre><code>#define __has_feature(x) 0\n</code></pre>\n\n<p>and this will select the <code>#else</code> branch everywhere.</p>\n\n<p><code>__has_feature(cxx_rvalue_references)</code> is a clang extension.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Update to this library.</p>\n\n<p><a href=\"https://howardhinnant.github.io/date/chrono_io.html\" rel=\"nofollow\">https://howardhinnant.github.io/date/chrono_io.html</a></p>\n\n<p>It has been simplified to only streaming durations.</p>\n"}], "owner": {"reputation": 569, "user_id": 1492162, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RU6Yr.jpg?s=128&g=1", "display_name": "David K.", "link": "https://stackoverflow.com/users/1492162/david-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 31035977, "answer_count": 1, "score": 2, "last_activity_date": 1469916113, "creation_date": 1435174649, "last_edit_date": 1495539863, "question_id": 31035501, "link": "https://stackoverflow.com/questions/31035501/preprocessor-errors-compiling-chrono-io", "title": "Preprocessor Errors Compiling Chrono_io", "body": "<p>Recently pulled some code to a new system, and I'm having some trouble compiling chrono_io and ratio_io.</p>\n\n<p>I'm unsure what to change, since the errors <a href=\"https://stackoverflow.com/questions/21338385/what-does-the-compiler-error-missing-binary-operator-before-token-mean\">appear to affect the preprocessor</a>.</p>\n\n<p>It seems like it must be a cross-platform compatibility issue for which the code doesn't account.</p>\n\n<p>Any ideas how I can resolve these preprocessor and compiler errors?</p>\n\n<pre><code>In file included from Test.cc:12:0:\nchrono_io:221:18: error: missing binary operator before token \"(\"\n #if __has_feature(cxx_rvalue_references)\n                  ^\nchrono_io:789:18: error: missing binary operator before token \"(\"\n #if __has_feature(cxx_rvalue_references)\n                  ^\nchrono_io:821:18: error: missing binary operator before token \"(\"\n #if __has_feature(cxx_rvalue_references)\n                  ^\nchrono_io:833:18: error: missing binary operator before token \"(\"\n #if __has_feature(cxx_rvalue_references)\n                  ^\nchrono_io:845:18: error: missing binary operator before token \"(\"\n #if __has_feature(cxx_rvalue_references)\n                  ^\nchrono_io:858:18: error: missing binary operator before token \"(\"\n #if __has_feature(cxx_rvalue_references)\n                  ^\nchrono_io:885:18: error: missing binary operator before token \"(\"\n #if __has_feature(cxx_rvalue_references)\n                  ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:36:1: error: \u2018_LIBCPP_BEGIN_NAMESPACE_STD\u2019 does not name a type\n _LIBCPP_BEGIN_NAMESPACE_STD\n ^\nratio_io:46:1: error: \u2018basic_string\u2019 does not name a type\n basic_string&lt;_CharT&gt;\n ^\nratio_io:58:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;atto, char&gt;\n        ^\nratio_io:58:21: error: \u2018atto\u2019 was not declared in this scope\n struct ratio_string&lt;atto, char&gt;\n                     ^\nratio_io:58:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:513:47: note:   \u2018std::atto\u2019\n   typedef ratio&lt;1,       1000000000000000000&gt; atto;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:59:1: error: explicit specialization of non-template \u2018ratio_string\u2019\n {\n ^\nratio_io:60:12: error: \u2018string\u2019 does not name a type\n     static string symbol() {return string(1, 'a');}\n            ^\nratio_io:61:12: error: \u2018string\u2019 does not name a type\n     static string prefix()  {return string(\"atto\");}\n            ^\nratio_io:83:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;atto, wchar_t&gt;\n        ^\nratio_io:83:21: error: \u2018atto\u2019 was not declared in this scope\n struct ratio_string&lt;atto, wchar_t&gt;\n                     ^\nratio_io:83:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:513:47: note:   \u2018std::atto\u2019\n   typedef ratio&lt;1,       1000000000000000000&gt; atto;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:83:34: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;atto, wchar_t&gt;\n                                  ^\nratio_io:92:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;femto, char&gt;\n        ^\nratio_io:92:21: error: \u2018femto\u2019 was not declared in this scope\n struct ratio_string&lt;femto, char&gt;\n                     ^\nratio_io:92:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:514:47: note:   \u2018std::femto\u2019\n   typedef ratio&lt;1,          1000000000000000&gt; femto;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:92:32: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;femto, char&gt;\n                                ^\nratio_io:117:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;femto, wchar_t&gt;\n        ^\nratio_io:117:21: error: \u2018femto\u2019 was not declared in this scope\n struct ratio_string&lt;femto, wchar_t&gt;\n                     ^\nratio_io:117:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:514:47: note:   \u2018std::femto\u2019\n   typedef ratio&lt;1,          1000000000000000&gt; femto;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:117:35: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;femto, wchar_t&gt;\n                                   ^\nratio_io:126:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;pico, char&gt;\n        ^\nratio_io:126:21: error: \u2018pico\u2019 was not declared in this scope\n struct ratio_string&lt;pico, char&gt;\n                     ^\nratio_io:126:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:515:47: note:   \u2018std::pico\u2019\n   typedef ratio&lt;1,             1000000000000&gt; pico;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:126:31: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;pico, char&gt;\n                               ^\nratio_io:151:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;pico, wchar_t&gt;\n        ^\nratio_io:151:21: error: \u2018pico\u2019 was not declared in this scope\n struct ratio_string&lt;pico, wchar_t&gt;\n                     ^\nratio_io:151:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:515:47: note:   \u2018std::pico\u2019\n   typedef ratio&lt;1,             1000000000000&gt; pico;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:151:34: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;pico, wchar_t&gt;\n                                  ^\nratio_io:160:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;nano, char&gt;\n        ^\nratio_io:160:21: error: \u2018nano\u2019 was not declared in this scope\n struct ratio_string&lt;nano, char&gt;\n                     ^\nratio_io:160:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:516:47: note:   \u2018std::nano\u2019\n   typedef ratio&lt;1,                1000000000&gt; nano;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:160:31: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;nano, char&gt;\n                               ^\nratio_io:185:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;nano, wchar_t&gt;\n        ^\nratio_io:185:21: error: \u2018nano\u2019 was not declared in this scope\n struct ratio_string&lt;nano, wchar_t&gt;\n                     ^\nratio_io:185:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:516:47: note:   \u2018std::nano\u2019\n   typedef ratio&lt;1,                1000000000&gt; nano;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:185:34: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;nano, wchar_t&gt;\n                                  ^\nratio_io:194:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;micro, char&gt;\n        ^\nratio_io:194:21: error: \u2018micro\u2019 was not declared in this scope\n struct ratio_string&lt;micro, char&gt;\n                     ^\nratio_io:194:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:517:47: note:   \u2018std::micro\u2019\n   typedef ratio&lt;1,                   1000000&gt; micro;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:194:32: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;micro, char&gt;\n                                ^\nratio_io:219:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;micro, wchar_t&gt;\n        ^\nratio_io:219:21: error: \u2018micro\u2019 was not declared in this scope\n struct ratio_string&lt;micro, wchar_t&gt;\n                     ^\nratio_io:219:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:517:47: note:   \u2018std::micro\u2019\n   typedef ratio&lt;1,                   1000000&gt; micro;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:219:35: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;micro, wchar_t&gt;\n                                   ^\nratio_io:228:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;milli, char&gt;\n        ^\nratio_io:228:21: error: \u2018milli\u2019 was not declared in this scope\n struct ratio_string&lt;milli, char&gt;\n                     ^\nratio_io:228:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:518:47: note:   \u2018std::milli\u2019\n   typedef ratio&lt;1,                      1000&gt; milli;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:228:32: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;milli, char&gt;\n                                ^\nratio_io:253:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;milli, wchar_t&gt;\n        ^\nratio_io:253:21: error: \u2018milli\u2019 was not declared in this scope\n struct ratio_string&lt;milli, wchar_t&gt;\n                     ^\nratio_io:253:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:518:47: note:   \u2018std::milli\u2019\n   typedef ratio&lt;1,                      1000&gt; milli;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:253:35: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;milli, wchar_t&gt;\n                                   ^\nratio_io:262:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;centi, char&gt;\n        ^\nratio_io:262:21: error: \u2018centi\u2019 was not declared in this scope\n struct ratio_string&lt;centi, char&gt;\n                     ^\nratio_io:262:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:519:47: note:   \u2018std::centi\u2019\n   typedef ratio&lt;1,                       100&gt; centi;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:262:32: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;centi, char&gt;\n                                ^\nratio_io:287:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;centi, wchar_t&gt;\n        ^\nratio_io:287:21: error: \u2018centi\u2019 was not declared in this scope\n struct ratio_string&lt;centi, wchar_t&gt;\n                     ^\nratio_io:287:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:519:47: note:   \u2018std::centi\u2019\n   typedef ratio&lt;1,                       100&gt; centi;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:287:35: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;centi, wchar_t&gt;\n                                   ^\nratio_io:296:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;deci, char&gt;\n        ^\nratio_io:296:21: error: \u2018deci\u2019 was not declared in this scope\n struct ratio_string&lt;deci, char&gt;\n                     ^\nratio_io:296:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:520:47: note:   \u2018std::deci\u2019\n   typedef ratio&lt;1,                        10&gt; deci;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:296:31: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;deci, char&gt;\n                               ^\nratio_io:321:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;deci, wchar_t&gt;\n        ^\nratio_io:321:21: error: \u2018deci\u2019 was not declared in this scope\n struct ratio_string&lt;deci, wchar_t&gt;\n                     ^\nratio_io:321:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:520:47: note:   \u2018std::deci\u2019\n   typedef ratio&lt;1,                        10&gt; deci;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:321:34: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;deci, wchar_t&gt;\n                                  ^\nratio_io:330:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;deca, char&gt;\n        ^\nratio_io:330:21: error: \u2018deca\u2019 was not declared in this scope\n struct ratio_string&lt;deca, char&gt;\n                     ^\nratio_io:330:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:521:47: note:   \u2018std::deca\u2019\n   typedef ratio&lt;                       10, 1&gt; deca;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:330:31: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;deca, char&gt;\n                               ^\nratio_io:355:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;deca, wchar_t&gt;\n        ^\nratio_io:355:21: error: \u2018deca\u2019 was not declared in this scope\n struct ratio_string&lt;deca, wchar_t&gt;\n                     ^\nratio_io:355:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:521:47: note:   \u2018std::deca\u2019\n   typedef ratio&lt;                       10, 1&gt; deca;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:355:34: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;deca, wchar_t&gt;\n                                  ^\nratio_io:364:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;hecto, char&gt;\n        ^\nratio_io:364:21: error: \u2018hecto\u2019 was not declared in this scope\n struct ratio_string&lt;hecto, char&gt;\n                     ^\nratio_io:364:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:522:47: note:   \u2018std::hecto\u2019\n   typedef ratio&lt;                      100, 1&gt; hecto;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:364:32: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;hecto, char&gt;\n                                ^\nratio_io:389:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;hecto, wchar_t&gt;\n        ^\nratio_io:389:21: error: \u2018hecto\u2019 was not declared in this scope\n struct ratio_string&lt;hecto, wchar_t&gt;\n                     ^\nratio_io:389:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:522:47: note:   \u2018std::hecto\u2019\n   typedef ratio&lt;                      100, 1&gt; hecto;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:389:35: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;hecto, wchar_t&gt;\n                                   ^\nratio_io:398:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;kilo, char&gt;\n        ^\nratio_io:398:21: error: \u2018kilo\u2019 was not declared in this scope\n struct ratio_string&lt;kilo, char&gt;\n                     ^\nratio_io:398:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:523:47: note:   \u2018std::kilo\u2019\n   typedef ratio&lt;                     1000, 1&gt; kilo;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:398:31: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;kilo, char&gt;\n                               ^\nratio_io:423:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;kilo, wchar_t&gt;\n        ^\nratio_io:423:21: error: \u2018kilo\u2019 was not declared in this scope\n struct ratio_string&lt;kilo, wchar_t&gt;\n                     ^\nratio_io:423:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:523:47: note:   \u2018std::kilo\u2019\n   typedef ratio&lt;                     1000, 1&gt; kilo;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:423:34: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;kilo, wchar_t&gt;\n                                  ^\nratio_io:432:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;mega, char&gt;\n        ^\nratio_io:432:21: error: \u2018mega\u2019 was not declared in this scope\n struct ratio_string&lt;mega, char&gt;\n                     ^\nratio_io:432:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:524:47: note:   \u2018std::mega\u2019\n   typedef ratio&lt;                  1000000, 1&gt; mega;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:432:31: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;mega, char&gt;\n                               ^\nratio_io:457:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;mega, wchar_t&gt;\n        ^\nratio_io:457:21: error: \u2018mega\u2019 was not declared in this scope\n struct ratio_string&lt;mega, wchar_t&gt;\n                     ^\nratio_io:457:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:524:47: note:   \u2018std::mega\u2019\n   typedef ratio&lt;                  1000000, 1&gt; mega;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:457:34: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;mega, wchar_t&gt;\n                                  ^\nratio_io:466:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;giga, char&gt;\n        ^\nratio_io:466:21: error: \u2018giga\u2019 was not declared in this scope\n struct ratio_string&lt;giga, char&gt;\n                     ^\nratio_io:466:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:525:47: note:   \u2018std::giga\u2019\n   typedef ratio&lt;               1000000000, 1&gt; giga;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:466:31: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;giga, char&gt;\n                               ^\nratio_io:491:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;giga, wchar_t&gt;\n        ^\nratio_io:491:21: error: \u2018giga\u2019 was not declared in this scope\n struct ratio_string&lt;giga, wchar_t&gt;\n                     ^\nratio_io:491:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:525:47: note:   \u2018std::giga\u2019\n   typedef ratio&lt;               1000000000, 1&gt; giga;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:491:34: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;giga, wchar_t&gt;\n                                  ^\nratio_io:500:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;tera, char&gt;\n        ^\nratio_io:500:21: error: \u2018tera\u2019 was not declared in this scope\n struct ratio_string&lt;tera, char&gt;\n                     ^\nratio_io:500:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:526:47: note:   \u2018std::tera\u2019\n   typedef ratio&lt;            1000000000000, 1&gt; tera;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:500:31: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;tera, char&gt;\n                               ^\nratio_io:525:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;tera, wchar_t&gt;\n        ^\nratio_io:525:21: error: \u2018tera\u2019 was not declared in this scope\n struct ratio_string&lt;tera, wchar_t&gt;\n                     ^\nratio_io:525:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:526:47: note:   \u2018std::tera\u2019\n   typedef ratio&lt;            1000000000000, 1&gt; tera;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:525:34: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;tera, wchar_t&gt;\n                                  ^\nratio_io:534:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;peta, char&gt;\n        ^\nratio_io:534:21: error: \u2018peta\u2019 was not declared in this scope\n struct ratio_string&lt;peta, char&gt;\n                     ^\nratio_io:534:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:527:47: note:   \u2018std::peta\u2019\n   typedef ratio&lt;         1000000000000000, 1&gt; peta;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:534:31: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;peta, char&gt;\n                               ^\nratio_io:559:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;peta, wchar_t&gt;\n        ^\nratio_io:559:21: error: \u2018peta\u2019 was not declared in this scope\n struct ratio_string&lt;peta, wchar_t&gt;\n                     ^\nratio_io:559:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:527:47: note:   \u2018std::peta\u2019\n   typedef ratio&lt;         1000000000000000, 1&gt; peta;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:559:34: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;peta, wchar_t&gt;\n                                  ^\nratio_io:568:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;exa, char&gt;\n        ^\nratio_io:568:21: error: \u2018exa\u2019 was not declared in this scope\n struct ratio_string&lt;exa, char&gt;\n                     ^\nratio_io:568:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:528:47: note:   \u2018std::exa\u2019\n   typedef ratio&lt;      1000000000000000000, 1&gt; exa;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:568:30: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;exa, char&gt;\n                              ^\nratio_io:593:8: error: \u2018ratio_string\u2019 is not a class template\n struct ratio_string&lt;exa, wchar_t&gt;\n        ^\nratio_io:593:21: error: \u2018exa\u2019 was not declared in this scope\n struct ratio_string&lt;exa, wchar_t&gt;\n                     ^\nratio_io:593:21: note: suggested alternative:\nIn file included from /usr/include/c++/4.8.2/chrono:38:0,\n                 from Test.cc:11:\n/usr/include/c++/4.8.2/ratio:528:47: note:   \u2018std::exa\u2019\n   typedef ratio&lt;      1000000000000000000, 1&gt; exa;\n                                               ^\nIn file included from chrono_io:139:0,\n                 from Test.cc:12:\nratio_io:593:33: error: \u2018ratio_string\u2019 is not a template type\n struct ratio_string&lt;exa, wchar_t&gt;\n                                 ^\nratio_io:599:1: error: \u2018_LIBCPP_END_NAMESPACE_STD\u2019 does not name a type\n _LIBCPP_END_NAMESPACE_STD\n ^\nIn file included from Test.cc:12:0:\nchrono_io:1164:1: error: \u2018_LIBCPP_END_NAMESPACE_STD\u2019 does not name a type\n _LIBCPP_END_NAMESPACE_STD\n ^\nTest.cc: In function \u2018void RealDataTest()\u2019:\nTest.cc:167:12: error: cannot bind \u2018std::basic_ostream&lt;char&gt;\u2019 lvalue to \u2018std::basic_ostream&lt;char&gt;&amp;&amp;\u2019\n  std::cout &lt;&lt; \"Time for n-&gt;mostRecent: \" &lt;&lt; (Clock::now() - start) &lt;&lt; std::endl;\n            ^\nIn file included from /usr/include/c++/4.8.2/iostream:39:0,\n                 from Nearby.cc:9,\n                 from Test.cc:5:\n/usr/include/c++/4.8.2/ostream:602:5: error:   initializing argument 1 of \u2018std::basic_ostream&lt;_CharT, _Traits&gt;&amp; std::operator&lt;&lt;(std::basic_ostream&lt;_CharT, _Traits&gt;&amp;&amp;, const _Tp&amp;) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; _Tp = std::chrono::duration&lt;long int, std::ratio&lt;1l, 1000000000l&gt; &gt;]\u2019\n     operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp;&amp; __os, const _Tp&amp; __x)\n     ^\nTest.cc:185:12: error: cannot bind \u2018std::basic_ostream&lt;char&gt;\u2019 lvalue to \u2018std::basic_ostream&lt;char&gt;&amp;&amp;\u2019\n  std::cout &lt;&lt; \"Time for n-&gt;deletePost: \" &lt;&lt; (Clock::now() - start) &lt;&lt; std::endl;\n            ^\nIn file included from /usr/include/c++/4.8.2/iostream:39:0,\n                 from Nearby.cc:9,\n                 from Test.cc:5:\n/usr/include/c++/4.8.2/ostream:602:5: error:   initializing argument 1 of \u2018std::basic_ostream&lt;_CharT, _Traits&gt;&amp; std::operator&lt;&lt;(std::basic_ostream&lt;_CharT, _Traits&gt;&amp;&amp;, const _Tp&amp;) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; _Tp = std::chrono::duration&lt;long int, std::ratio&lt;1l, 1000000000l&gt; &gt;]\u2019\n     operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp;&amp; __os, const _Tp&amp; __x)\n     ^\nmake: *** [all] Error 1\n</code></pre>\n"}, {"tags": ["c++", "node.js", "v8"], "comments": [{"owner": {"reputation": 92373, "user_id": 2050455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1255d2cb06adc4d0b48adf1d90e847?s=128&d=identicon&r=PG", "display_name": "mscdex", "link": "https://stackoverflow.com/users/2050455/mscdex"}, "edited": false, "score": 1, "creation_date": 1435174971, "post_id": 31035482, "comment_id": 50095415, "body": "It&#39;s possible the callback is being executed from a different thread, so IIRC you will have to use <a href=\"https://github.com/thlorenz/libuv-dox/blob/master/methods.md#async\" rel=\"nofollow noreferrer\"><code>uv_async_*</code></a> to alert the main node/io.js thread and do your v8-related stuff there."}, {"owner": {"reputation": 60, "user_id": 409816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea1112157bdb856dfd0cee6c4981001?s=128&d=identicon&r=PG", "display_name": "MrZ", "link": "https://stackoverflow.com/users/409816/mrz"}, "reply_to_user": {"reputation": 92373, "user_id": 2050455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1255d2cb06adc4d0b48adf1d90e847?s=128&d=identicon&r=PG", "display_name": "mscdex", "link": "https://stackoverflow.com/users/2050455/mscdex"}, "edited": false, "score": 0, "creation_date": 1435241498, "post_id": 31035482, "comment_id": 50126660, "body": "Thank you, that might have been the problem. I edited the code according to your suggestions above. I get a different error however..."}, {"owner": {"reputation": 1, "user_id": 6671185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f1901faa01b1e29085d0010a4e73ac?s=128&d=identicon&r=PG&f=1", "display_name": "2atom", "link": "https://stackoverflow.com/users/6671185/2atom"}, "edited": false, "score": 0, "creation_date": 1559542039, "post_id": 31035482, "comment_id": 99438699, "body": "check this article : <a href=\"https://stackoverflow.com/questions/31207454/v8-multithreaded-function\" title=\"v8 multithreaded function\">stackoverflow.com/questions/31207454/v8-multithreaded-functi&zwnj;&#8203;on</a>"}], "owner": {"reputation": 60, "user_id": 409816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea1112157bdb856dfd0cee6c4981001?s=128&d=identicon&r=PG", "display_name": "MrZ", "link": "https://stackoverflow.com/users/409816/mrz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 846, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1435241456, "creation_date": 1435174568, "last_edit_date": 1435241456, "question_id": 31035482, "link": "https://stackoverflow.com/questions/31035482/c-null-reference-in-v8-when-trying-to-get-isolate-in-callback", "title": "C++ null reference in V8 when trying to get Isolate in callback", "body": "<p>I'm trying to figure out what in my code that does not work. I have a third party library-dll that has a method that i call in a method \"RegisterSensorEvent\". The idea is that the 3rd party method takes a callback method and a void pointer to a context. I pass a JS callback as context and then try to call it in \"SensorEventCallback\". I've tried to debug and i only get to: </p>\n\n<pre><code>Isolate* isolate = Isolate::GetCurrent(); (first line in method SensorEventCallback)\n</code></pre>\n\n<p>And there i get nullref exception. Are there any obvious mistakes here? </p>\n\n<pre><code>struct EventContext {\n        v8::Persistent&lt;v8::Function, v8::CopyablePersistentTraits&lt;v8::Function&gt;&gt; callback;\n    };\n\n    void SensorEventCallback(const char *protocol, const char *model, int sensorId, int dataType, const char *value, int ts, int callbackId, void *callbackVoid) {\n        Isolate* isolate = Isolate::GetCurrent();\n        EventContext *ctx = static_cast&lt;EventContext *&gt;(callbackVoid);\n        v8::Local&lt;v8::Function&gt; function = v8::Local&lt;v8::Function&gt;::New(isolate, ((v8::Persistent&lt;v8::Function, v8::CopyablePersistentTraits&lt;v8::Function&gt;&gt;)ctx-&gt;callback));\n        const unsigned argc = 1;\n        Local&lt;Value&gt; argv[argc] = { v8::Number::New(isolate, sensorId) };\n        function-&gt;Call(isolate-&gt;GetCurrentContext()-&gt;Global(), argc, argv);\n    }\n\n    void RegisterSensorEvent(const v8::FunctionCallbackInfo&lt;v8::Value&gt;&amp; args){\n        Isolate* isolate = Isolate::GetCurrent();\n        v8::Local&lt;v8::Function&gt; cb = v8::Local&lt;v8::Function&gt;::Cast(args[0]);\n        v8::Persistent&lt;v8::Function, v8::CopyablePersistentTraits&lt;v8::Function&gt;&gt; value(isolate, cb);\n\n        EventContext *ctx = new EventContext();\n        ctx-&gt;callback = value;\n\n        Local&lt;Number&gt; num = Number::New(isolate, tdRegisterSensorEvent((TDSensorEvent)&amp;SensorEventCallback, ctx));\n        args.GetReturnValue().Set(num);\n    }\n</code></pre>\n\n<p>JS Code:</p>\n\n<pre><code>var registeredEventId = someModule.AddSensorEventListener(function (args) {\n    console.log(\"This is value from callback: \" + args);\n});\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>So i changed method to this (removed all V8-stuff):</p>\n\n<pre><code>void SensorEventCallback(const char *protocol, const char *model, int sensorId, int dataType, const char *value, int ts, int callbackId, void *callbackVoid) {\n        SensorEventBaton *baton = new SensorEventBaton();\n        baton-&gt;ctx = callbackVoid;\n\n        uv_async_t* asyncHandle = new uv_async_t;\n        asyncHandle-&gt;data = baton;\n\n        uv_async_init(uv_default_loop(), asyncHandle, (uv_async_cb)SensorEventCallbackAfter);\n    }\n\nstruct SensorEventBaton {\n        void *ctx;\n    };\n</code></pre>\n\n<p>But i still get errors. This time i don't even get to the SensorEventCallbackAfter-method. I get error like:</p>\n\n<p>node.exe: 0xC0000005: Access violation writing location 0x6CB55EF8.</p>\n"}, {"tags": ["c++", "video-recording", "edsdk", "canon-sdk"], "answers": [{"comments": [{"owner": {"reputation": 586, "user_id": 3016483, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/jFQDy.jpg?s=128&g=1", "display_name": "Illuminati0x5B", "link": "https://stackoverflow.com/users/3016483/illuminati0x5b"}, "edited": false, "score": 0, "creation_date": 1435615372, "post_id": 31045681, "comment_id": 50265057, "body": "Thank you. It worked after I started live view from PC"}], "tags": [], "owner": {"reputation": 1039, "user_id": 3517404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGv35.jpg?s=128&g=1", "display_name": "Johannes Bildstein", "link": "https://stackoverflow.com/users/3517404/johannes-bildstein"}, "is_accepted": false, "score": 1, "last_activity_date": 1435222682, "creation_date": 1435222682, "answer_id": 31045681, "question_id": 31035458, "link": "https://stackoverflow.com/questions/31035458/movie-recording-using-edsdk-canon-t3/31045681#31045681", "title": "Movie recording using EDSDK (Canon T3)", "body": "<p>to start movie recording you have to make sure that the camera is in movie mode (usually there is a physical switch on the camera). You can check if the camera is in movie mode with the PropID_Record property. It should have value 3 when the camera is ready.</p>\n\n<p>Then, when you have opened a session you can show the live view either on the computer or on the camera by setting the appropriate value. You can set the live view output by using the PropID_Evf_OutputDevice property.</p>\n\n<p>Let me know if you need something more specific or have a look at this <a href=\"http://www.codeproject.com/Articles/688276/Canon-EDSDK-Tutorial-in-Csharp\" rel=\"nofollow\" title=\"Canon-EDSDK-Tutorial\">article</a> (although for C#, it might still be useful)</p>\n"}], "owner": {"reputation": 586, "user_id": 3016483, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/jFQDy.jpg?s=128&g=1", "display_name": "Illuminati0x5B", "link": "https://stackoverflow.com/users/3016483/illuminati0x5b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435222682, "creation_date": 1435174461, "question_id": 31035458, "link": "https://stackoverflow.com/questions/31035458/movie-recording-using-edsdk-canon-t3", "title": "Movie recording using EDSDK (Canon T3)", "body": "<p>I'm trying to remotely start movie shoot on Canon T3 which is connect to a PC via USB cable. The moment I connect the camera to the PC, the live view gets disabled and thus I'm not able to start recording (The EDSDK command fails).</p>\n\n<p>What should I do to avoid this?</p>\n"}, {"tags": ["c++", "c++11", "destructor", "move-semantics", "noexcept"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1435174450, "post_id": 31035424, "comment_id": 50095133, "body": "Mark destructor as no except."}, {"owner": {"reputation": 22733, "user_id": 134841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51b7f05de9889e7212f949f0fd975922?s=128&d=identicon&r=PG", "display_name": "Marc Mutz - mmutz", "link": "https://stackoverflow.com/users/134841/marc-mutz-mmutz"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1435174522, "post_id": 31035424, "comment_id": 50095175, "body": "@Jarod42: destructors are implicitly noexcept"}, {"owner": {"reputation": 52016, "user_id": 373025, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1916b08af2d329d0fe74b7fb9412369b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre C.", "link": "https://stackoverflow.com/users/373025/alexandre-c"}, "edited": false, "score": 2, "creation_date": 1435174610, "post_id": 31035424, "comment_id": 50095221, "body": "Could this be related : <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=56191\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=56191</a>? (or simply <a href=\"http://stackoverflow.com/questions/15721544/destructors-and-noexcept\" title=\"destructors and noexcept\">stackoverflow.com/questions/15721544/destructors-and-noexcep&zwnj;&#8203;t</a> which points there)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 52016, "user_id": 373025, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1916b08af2d329d0fe74b7fb9412369b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre C.", "link": "https://stackoverflow.com/users/373025/alexandre-c"}, "edited": false, "score": 0, "creation_date": 1435176345, "post_id": 31035424, "comment_id": 50096249, "body": "Please provide a simple, self contained, compiling example that demonstrates the error in question.  My initial attempt (where I set a member to <code>int</code>) did not generate the error in question.  @AlexandreC. at first look, that bug seems to be fixed in 4.9.2"}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1435174786, "creation_date": 1435174786, "answer_id": 31035546, "question_id": 31035424, "link": "https://stackoverflow.com/questions/31035424/why-does-stdis-nothrow-move-assignable-depend-on-the-presence-of-a-destructor/31035546#31035546", "title": "Why does std::is_nothrow_move_assignable depend on the presence of a destructor?", "body": "<p>A user-declared destructor suppresses the implicit generation of move special member functions ([class.copy]/p9, 20). Thus, <code>C</code> only has a copy constructor and a copy assignment operator; the latter is used to perform the \"move\" assignment, and presumably could throw.</p>\n"}], "owner": {"reputation": 22733, "user_id": 134841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51b7f05de9889e7212f949f0fd975922?s=128&d=identicon&r=PG", "display_name": "Marc Mutz - mmutz", "link": "https://stackoverflow.com/users/134841/marc-mutz-mmutz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 31035546, "answer_count": 1, "score": 0, "last_activity_date": 1435174786, "creation_date": 1435174385, "question_id": 31035424, "link": "https://stackoverflow.com/questions/31035424/why-does-stdis-nothrow-move-assignable-depend-on-the-presence-of-a-destructor", "title": "Why does std::is_nothrow_move_assignable depend on the presence of a destructor?", "body": "<p>I have a class like the following:</p>\n\n<pre><code>class C {\npublic:\n    C() : ... {}\n    ~C() {}\n\n    Member_1 m_1;\n    // ...\n    Member_N m_N;\n};\n</code></pre>\n\n<p>The two special member functions shown are the only ones declared.</p>\n\n<p>Now,</p>\n\n<pre><code>static_assert(std::is_nothrow_move_assignable&lt;Member_1&gt;::value);\n// ...\nstatic_assert(std::is_nothrow_move_assignable&lt;Member_N&gt;::value);\n</code></pre>\n\n<p>are all satisfied. Yet,</p>\n\n<pre><code>static_assert(std::is_nothrow_move_assignable&lt;C&gt;::value);\n</code></pre>\n\n<p>asserts. If I remove the empty destructor, it passes.</p>\n\n<p>What does the destructor have to do with the move assignment operator? New Rule of Five?</p>\n\n<p>Compiler is GCC 4.9.3 with <code>-std=c++0x</code> (for historic reasons).</p>\n"}, {"tags": ["c++", "time-complexity", "stdset"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1435174040, "post_id": 31035255, "comment_id": 50094900, "body": "No, it&#39;s <a href=\"http://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\"><code>srd::less&lt;Key&gt;</code></a> actually applied as default."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1435174460, "post_id": 31035255, "comment_id": 50095142, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 <code>std</code>? Also, order is defined by your implementation of a less than operation."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1435174565, "post_id": 31035255, "comment_id": 50095193, "body": "@scohe001 Of course, a typo."}, {"owner": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "edited": false, "score": 0, "creation_date": 1435174631, "post_id": 31035255, "comment_id": 50095233, "body": "how do i do that operator== is used?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1435175302, "post_id": 31035255, "comment_id": 50095611, "body": "@myelf you cannot sort using <code>operator==</code>"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1435175333, "post_id": 31035255, "comment_id": 50095634, "body": "@myelf: If you want to search using your <code>operator==</code>, then you can use <code>std::find</code>. But then the search is not taking advantage of the ordered nature of the set, and is O(n) instead of O(log n)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1435175905, "post_id": 31035255, "comment_id": 50096011, "body": "Very hard to do with any speed. == tells you match or not, but not where in the set you are relative to where the target should be."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "edited": false, "score": 0, "creation_date": 1435175472, "post_id": 31035481, "comment_id": 50095717, "body": "can you give a tip what makes sense for a &lt; operator for a std::vector&lt;double&gt;?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "edited": false, "score": 1, "creation_date": 1435175578, "post_id": 31035481, "comment_id": 50095787, "body": "@myelf: You could use the one that is already defined in the standard library, which does a lexicographical comparison. <a href=\"http://en.cppreference.com/w/cpp/container/vector/operator_cmp\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector/operator_cmp</a>"}, {"owner": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "edited": false, "score": 0, "creation_date": 1435176090, "post_id": 31035481, "comment_id": 50096119, "body": "Thanks. Unfortunately this does not make much sense for what I am trying to do."}, {"owner": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "edited": false, "score": 0, "creation_date": 1435179635, "post_id": 31035481, "comment_id": 50098005, "body": "Oh, thanks! When I use std::set&lt;type&gt;::iterator it= std::find(std::begin(std::set&lt;type&gt;), std::end(std::set&lt;type&gt;), elementOfType) is this what I &quot;want&quot; to do? I guess the runtime of this is bad."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "edited": false, "score": 0, "creation_date": 1435179770, "post_id": 31035481, "comment_id": 50098089, "body": "@myelf  yes. It is a linear search with O( size() )."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1435176517, "last_edit_date": 1435176517, "creation_date": 1435174567, "answer_id": 31035481, "question_id": 31035255, "link": "https://stackoverflow.com/questions/31035255/does-stdsetclasstype-findelement-use-the-operator-from-the-class-to-com/31035481#31035481", "title": "Does std::set&lt;classtype&gt;.find(element) use the == operator from the class to compare the elements?", "body": "<p>From the C++ Standard (23.2.4 Associative containers)</p>\n\n<blockquote>\n  <p>3 The phrase \u201cequivalence of keys\u201d means the equivalence relation\n  imposed by the comparison and <strong>not the operator== on keys</strong>. That is,\n  two keys k1 and k2 are considered to be equivalent if for the\n  comparison object comp, comp(k1, k2) == false &amp;&amp; comp(k2, k1) ==\n  false. For any two keys k1 and k2 in the same container, calling\n  comp(k1, k2) shall always return the same value.</p>\n</blockquote>\n\n<p>Member function <code>find</code> seeks a key according to the comparison object <code>comp</code></p>\n\n<p>If you did not specify explicitly the comparison object then the class uses by default standard functional object <code>std::less</code> that uses <code>operator &lt;</code> within its operator function. So your class has to have the operator &lt; defined.</p>\n\n<p>If you want to use <code>operator ==</code> for comparison values in the set then you can use standard algorithm <code>std::find</code> instead of the method <code>find</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 800474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51db6c0e15f6033a50b15e09c2e63829?s=128&d=identicon&r=PG", "display_name": "myelf", "link": "https://stackoverflow.com/users/800474/myelf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "accepted_answer_id": 31035481, "answer_count": 1, "score": 0, "last_activity_date": 1435176517, "creation_date": 1435173838, "question_id": 31035255, "link": "https://stackoverflow.com/questions/31035255/does-stdsetclasstype-findelement-use-the-operator-from-the-class-to-com", "title": "Does std::set&lt;classtype&gt;.find(element) use the == operator from the class to compare the elements?", "body": "<p>Say I have </p>\n\n<pre><code>std::set&lt;classtype&gt; set;\nclass classtype {\n    bool operator==(const classtype&amp; ct) {\n        //..\n    } \n};\n//..\nstd::set&lt;classtype&gt;::iterator it = set.find(element);\n</code></pre>\n\n<p>Find does use the == operator from the class correct? </p>\n\n<p>Also my reference says it has log(n) worst case runtime where n is the number of elements in the set. How is this realized internally? I understand that the key is that the elements in the set have a order (so insertion takes long to create that order), for integer sets it is clear what order means but for random classes not so much.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "edited": false, "score": 0, "creation_date": 1435173958, "post_id": 31035192, "comment_id": 50094848, "body": "Oh, I didn&#39;t know that. Thanks, that makes sense."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 1, "last_activity_date": 1435173676, "creation_date": 1435173676, "answer_id": 31035192, "question_id": 31035166, "link": "https://stackoverflow.com/questions/31035166/priority-queue-with-custom-comparator-returning-wrong-top-of-the-heap/31035192#31035192", "title": "priority_queue with custom comparator returning wrong top-of-the-heap", "body": "<p>The C++ priority queue is a <em>max</em>-heap; the <em>largest</em> element is on <code>top</code>.</p>\n"}], "owner": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 31035192, "answer_count": 1, "score": 0, "last_activity_date": 1435173676, "creation_date": 1435173603, "question_id": 31035166, "link": "https://stackoverflow.com/questions/31035166/priority-queue-with-custom-comparator-returning-wrong-top-of-the-heap", "title": "priority_queue with custom comparator returning wrong top-of-the-heap", "body": "<p>I'm wondering why does the following code return the element with 10 as top element</p>\n\n<pre><code>class mycomparison\n{\npublic:\n  bool operator() (pair&lt;int, Node*&gt; e1, pair&lt;int, Node*&gt; e2) const {\n    return e1.first &lt; e2.first;\n  };\n};\n\n  priority_queue&lt;pair&lt;int, Node*&gt;, vector&lt;pair&lt;int, Node*&gt;&gt;, mycomparison&gt; queue;\n  queue.push(make_pair(4, &amp;root));\n  queue.push(make_pair(10, &amp;root));\n  auto var = queue.top();\n</code></pre>\n\n<p>Shouldn't it return the 4 element?</p>\n"}, {"tags": ["c++", "class", "inheritance", "abstract"], "answers": [{"comments": [{"owner": {"reputation": 1052, "user_id": 4098136, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/548d3b9d55802dd299457405ec8333df?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Papalillo", "link": "https://stackoverflow.com/users/4098136/antonio-papalillo"}, "edited": false, "score": 0, "creation_date": 1435174989, "post_id": 31035277, "comment_id": 50095426, "body": "I did it, and it showed a different error:  Cannot declare variable &#39;A&#39; to be of abstract type &#39;Alpha&#39; because the following virtual functions are pure within &#39;Alpha&#39;: virtual void Beta::overwrite(Beta&amp;)"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 1052, "user_id": 4098136, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/548d3b9d55802dd299457405ec8333df?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Papalillo", "link": "https://stackoverflow.com/users/4098136/antonio-papalillo"}, "edited": false, "score": 0, "creation_date": 1435175102, "post_id": 31035277, "comment_id": 50095499, "body": "@AndroidGuy Which is exactly what I told you would happen if you didn&#39;t change the signature of <code>Alpha::overwrite</code>."}, {"owner": {"reputation": 1052, "user_id": 4098136, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/548d3b9d55802dd299457405ec8333df?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Papalillo", "link": "https://stackoverflow.com/users/4098136/antonio-papalillo"}, "edited": false, "score": 0, "creation_date": 1435175887, "post_id": 31035277, "comment_id": 50096002, "body": "Huh sorry, I didn&#39;t get it."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 1052, "user_id": 4098136, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/548d3b9d55802dd299457405ec8333df?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Papalillo", "link": "https://stackoverflow.com/users/4098136/antonio-papalillo"}, "edited": false, "score": 2, "creation_date": 1435176001, "post_id": 31035277, "comment_id": 50096066, "body": "@AndroidGuy:  Your <code>Alpha</code> class is abstract because it doesn&#39;t <i>correctly</i> implement the <code>overwrite</code> method.  The compiler says that <code>overwrite(Alpha a)</code> is a different method than <code>overwrite(Beta&amp; b)</code>.  Your <code>Alpha</code> class needs to have an <code>overwrite(Beta&amp; b)</code> method."}, {"owner": {"reputation": 1052, "user_id": 4098136, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/548d3b9d55802dd299457405ec8333df?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Papalillo", "link": "https://stackoverflow.com/users/4098136/antonio-papalillo"}, "edited": false, "score": 0, "creation_date": 1435176339, "post_id": 31035277, "comment_id": 50096247, "body": "Ok now I got it. Thank you for the explanation."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 3, "last_activity_date": 1435173908, "creation_date": 1435173908, "answer_id": 31035277, "question_id": 31035145, "link": "https://stackoverflow.com/questions/31035145/c-cannot-declare-parameter-anonymous-to-be-of-abstract-type/31035277#31035277", "title": "C++ - &quot;Cannot declare parameter &#39;anonymous&#39; to be of abstract type&quot;", "body": "<p>The <code>Beta</code> class is abstract and cannot be instantiated.  </p>\n\n<p>Your function signature wants an instantiation of an abstract class.</p>\n\n<p>Try passing by reference or pointer:  </p>\n\n<pre><code>void overwrite(Beta&amp; b);\nvoid overwrite(Beta * b);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1052, "user_id": 4098136, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/548d3b9d55802dd299457405ec8333df?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Papalillo", "link": "https://stackoverflow.com/users/4098136/antonio-papalillo"}, "edited": false, "score": 0, "creation_date": 1435174749, "post_id": 31035283, "comment_id": 50095293, "body": "That&#39;s a nice answer, but in my case the Alpha class shouldn&#39;t be touched, especially in the case of mentioning the abstract class inside of it. If it could be solved by only touching the abstract class (Beta) it would be very great."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 1052, "user_id": 4098136, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/548d3b9d55802dd299457405ec8333df?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Papalillo", "link": "https://stackoverflow.com/users/4098136/antonio-papalillo"}, "edited": false, "score": 0, "creation_date": 1435174808, "post_id": 31035283, "comment_id": 50095323, "body": "Then you are SOL. If you cannot change the signature of <code>overwrite</code> in your derived class to match the <b>pure virtual function</b> in your base class, then you cannot compile any of your derived classes."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 1, "last_activity_date": 1435173927, "creation_date": 1435173927, "answer_id": 31035283, "question_id": 31035145, "link": "https://stackoverflow.com/questions/31035145/c-cannot-declare-parameter-anonymous-to-be-of-abstract-type/31035283#31035283", "title": "C++ - &quot;Cannot declare parameter &#39;anonymous&#39; to be of abstract type&quot;", "body": "<p>The problem is your <code>overwrite</code> method is pure-virtual and not being overridden. This method has the following signature in <code>Beta</code></p>\n\n<pre><code>virtual void overwrite(Beta) = 0;\n</code></pre>\n\n<p>In <code>Alpha</code> it is </p>\n\n<pre><code>void overwrite(Alpha);\n</code></pre>\n\n<p>These are <strong>not</strong> the same function signature. What you can do is pass a reference and cast it, for example</p>\n\n<pre><code>class Beta {\n    public:\n        virtual int  read() const = 0;\n        virtual void write(int) = 0;\n        virtual void overwrite(Beta&amp;) = 0;\n};\n\nclass Alpha : public Beta {\n    public:\n        int  read     () const;\n        void write    (int);\n        void overwrite(Beta&amp;) override;  // Note the override\n    private:\n        int value;\n};\n\nvoid Alpha::overwrite(Beta&amp; A){\n    value = static_cast&lt;Alpha&amp;&gt;(A).value;\n}\n</code></pre>\n\n<p>This will produce the output (<a href=\"http://cpp.sh/5iif\" rel=\"nofollow\">live demo</a>):</p>\n\n<pre><code>A: 8\nB: 6\n\nA: 6 \n</code></pre>\n\n<p>Note that I added the keyword <code>override</code> after the function declaration in <code>Alpha</code>. If you would have done this while the argument was still an <code>Alpha</code>, your code would not have compiled for this reason.</p>\n"}], "owner": {"reputation": 1052, "user_id": 4098136, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/548d3b9d55802dd299457405ec8333df?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Papalillo", "link": "https://stackoverflow.com/users/4098136/antonio-papalillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2676, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1435173927, "creation_date": 1435173530, "question_id": 31035145, "link": "https://stackoverflow.com/questions/31035145/c-cannot-declare-parameter-anonymous-to-be-of-abstract-type", "title": "C++ - &quot;Cannot declare parameter &#39;anonymous&#39; to be of abstract type&quot;", "body": "<p>I have this simple class (Alpha) and his abstract class (Beta). I'm unable to pass Alpha (Beta) objects to overwrite() function, because abstract class can't handle self type objects.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::cout;\nusing std::endl;\nusing std::ostream;\n\nclass Beta {\n    public:\n        virtual int  read() const = 0;\n        virtual void write(int) = 0;\n        virtual void overwrite(Beta) = 0; // &lt;-- This is the problem\n};\n\nclass Alpha : public Beta {\n    public:\n        int  read     () const;\n        void write    (int);\n        void overwrite(Alpha);\n    private:\n        int value;\n};\n\nint Alpha::read() const {\n    return value;\n}\nvoid Alpha::write(int v) {\n    value = v;\n}\nvoid Alpha::overwrite(Alpha A) {\n    value = A.value;\n}\n\nint main () {\n    Alpha A, B;\n    A.write(8);\n    B.write(6);\n\n    cout &lt;&lt; \"A: \" &lt;&lt; A.read() &lt;&lt; endl; // 8\n    cout &lt;&lt; \"B: \" &lt;&lt; B.read() &lt;&lt; endl; // 6\n\n    A.overwrite(B);\n\n    cout &lt;&lt; endl &lt;&lt; \"A: \" &lt;&lt; A.read(); // 6\n    return 0;\n}\n</code></pre>\n\n<p>It gives me <code>[Error] cannot declare parameter '&lt;anonymous&gt;' to be of abstract type 'Beta'</code>. How to deal with it? It's a small code sample, but I need to solve this because I can't overload operators and declaring that type of functions correctly.</p>\n"}, {"tags": ["c++", "c", "linux", "debugging", "gdb"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4764841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c27f91dc84a22df5c6e90a145ce4631?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce Lavoie", "link": "https://stackoverflow.com/users/4764841/bruce-lavoie"}, "edited": false, "score": 1, "creation_date": 1435244955, "post_id": 31035158, "comment_id": 50129534, "body": "As it turns out, when debugger the remote target after issuing a &quot;target remote localhost:3333&quot;  I needed to issue a &quot;load&quot; to load the image to the target because I&#39;m not running gdbserver on the target.  After the load, it worked fine."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1435173560, "creation_date": 1435173560, "answer_id": 31035158, "question_id": 31035124, "link": "https://stackoverflow.com/questions/31035124/gdb-can-not-locate-source-files/31035158#31035158", "title": "GDB can not locate source files", "body": "<p>Read section about <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Source-Path.html\" rel=\"nofollow\">source path in GDB</a>. You need to use the <code>dir</code>  command inside <code>(gdb)</code>  command. prompt.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4764841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c27f91dc84a22df5c6e90a145ce4631?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce Lavoie", "link": "https://stackoverflow.com/users/4764841/bruce-lavoie"}, "is_accepted": false, "score": 1, "last_activity_date": 1435245001, "creation_date": 1435245001, "answer_id": 31054184, "question_id": 31035124, "link": "https://stackoverflow.com/questions/31035124/gdb-can-not-locate-source-files/31054184#31054184", "title": "GDB can not locate source files", "body": "<p>As it turns out, when debugger the remote target after issuing a \"target remote localhost:3333\" I needed to issue a \"load\" to load the image to the target because I'm not running gdbserver on the target. After the load, it worked fine. \u2013  Bruce Lavoie just now</p>\n"}], "owner": {"reputation": 11, "user_id": 4764841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c27f91dc84a22df5c6e90a145ce4631?s=128&d=identicon&r=PG&f=1", "display_name": "Bruce Lavoie", "link": "https://stackoverflow.com/users/4764841/bruce-lavoie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3455, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1582975749, "creation_date": 1435173438, "last_edit_date": 1582975749, "question_id": 31035124, "link": "https://stackoverflow.com/questions/31035124/gdb-can-not-locate-source-files", "title": "GDB can not locate source files", "body": "<p>I'm using GDB with the \"Open On-Chip Debugger\" project to debug a cross compiled project for remote MIPs target and for some reason GDB can't locate the source files.</p>\n\n<p>Here I invoke GDB on the target elf file.</p>\n\n<pre><code>development@ubuntu:~/vitessesdk/CEServices/build$ mipsel-vtss-elf-gdb obj/CEServices.elf\nGNU gdb (crosstool-NG 1.20.0 - vtss-eCos-toolchain-v2) 7.8\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"--host=x86_64-build_unknown-linux-gnu --target=mipsel-vtss-elf\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nFind the GDB manual and other documentation resources online at:\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\n****Reading symbols from obj/CEServices.elf...done.****\n(gdb)\n</code></pre>\n\n<p>At this point I type in the target remote command to connect</p>\n\n<pre><code>(gdb) target remote localhost:3333\nRemote debugging using localhost:3333\n0xa0000000 in ?? ()\n(gdb) step\n</code></pre>\n\n<p>Cannot find bounds of current function</p>\n\n<pre><code>(gdb) list\n78  /home/development/vitesseSDK/CEServices/build/../third_party/eCos/packages/language/c/libc/startup/current/src/main.cxx: No such file or directory.\n(gdb) \n</code></pre>\n\n<p>I'll a listing of the directory and the file is there.</p>\n\n<pre><code>development@ubuntu:~/vitessesdk/CEServices/build$ ls ../third_party/eCos/packages/language/c/libc/startup/current/src/main.cxx\n../third_party/eCos/packages/language/c/libc/startup/current/src/main.cxx\ndevelopment@ubuntu:~/vitessesdk/CEServices/build$\n</code></pre>\n\n<p>Any ideas as to why this is happening?</p>\n"}, {"tags": ["c++", "visual-studio-2013", "preprocessor-directive", "pragma-pack"], "comments": [{"owner": {"reputation": 12454, "user_id": 79737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GaA88.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/79737/jay"}, "edited": false, "score": 1, "creation_date": 1435173377, "post_id": 31034906, "comment_id": 50094547, "body": "Both of your structures are located after the pragma in the file. I&#39;d be surprised if they&#39;re different. Your output shows two &#39;FirstExample&#39; lines so it doesn&#39;t match your source code..."}, {"owner": {"reputation": 1048, "user_id": 1281652, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/46a85c94539819d787e4eb6d6c604d23?s=128&d=identicon&r=PG&f=1", "display_name": "rgb", "link": "https://stackoverflow.com/users/1281652/rgb"}, "reply_to_user": {"reputation": 12454, "user_id": 79737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GaA88.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/79737/jay"}, "edited": false, "score": 0, "creation_date": 1435173912, "post_id": 31034906, "comment_id": 50094816, "body": "@Jay Thanks for your comment. I&#39;ve corrected this mistake."}], "answers": [{"tags": [], "owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "is_accepted": false, "score": 6, "last_activity_date": 1435173655, "last_edit_date": 1435173655, "creation_date": 1435173256, "answer_id": 31035065, "question_id": 31034906, "link": "https://stackoverflow.com/questions/31034906/scope-of-the-pragma-pack-directive-in-visual-studio/31035065#31035065", "title": "Scope of the pragma pack directive in Visual Studio", "body": "<p>It  takes effect at the first struct, union, or class declaration after the pragma is seen and lasts until the first encountered #pragma pack(pop) or another #pragma pack(push) which last to its pop-counterpart.</p>\n\n<p>(push and pops usually come in pairs)</p>\n"}, {"tags": [], "owner": {"reputation": 2861, "user_id": 1008115, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Nmtel.jpg?s=128&g=1", "display_name": "PnotNP", "link": "https://stackoverflow.com/users/1008115/pnotnp"}, "is_accepted": false, "score": 4, "last_activity_date": 1435173511, "creation_date": 1435173511, "answer_id": 31035139, "question_id": 31034906, "link": "https://stackoverflow.com/questions/31034906/scope-of-the-pragma-pack-directive-in-visual-studio/31035139#31035139", "title": "Scope of the pragma pack directive in Visual Studio", "body": "<p>You should call <code>#pragma pack(pop)</code> before <code>SecondExample</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#pragma pack(push, 1)\n\nstruct FirstExample\n{\n   int intVar;   // 4 bytes\n   char charVar; // 1 byte\n};\n\n#pragma pack(pop)\n\nstruct SecondExample\n{\n   int intVar;   // 4 bytes\n   char charVar; // 1 byte\n};\n\n\nvoid main()\n{\n printf(\"Size of the FirstExample is %d\\n\", sizeof(FirstExample));\n printf(\"Size of the SecondExample is %d\\n\", sizeof(SecondExample));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 8, "last_activity_date": 1435173545, "creation_date": 1435173545, "answer_id": 31035153, "question_id": 31034906, "link": "https://stackoverflow.com/questions/31034906/scope-of-the-pragma-pack-directive-in-visual-studio/31035153#31035153", "title": "Scope of the pragma pack directive in Visual Studio", "body": "<p>Just because it \"takes effect at the first struct\" does not mean that its effect is limited to that first struct. <code>#pragma pack</code> works in a typical way for a preprocessor directive: it lasts \"indefinitely\" from the point of activation, ignoring any language-level scopes, i.e. its effect spreads to the end of translation unit (or until overridden by another <code>#pragma pack</code>).</p>\n"}], "owner": {"reputation": 1048, "user_id": 1281652, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/46a85c94539819d787e4eb6d6c604d23?s=128&d=identicon&r=PG&f=1", "display_name": "rgb", "link": "https://stackoverflow.com/users/1281652/rgb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2389, "favorite_count": 0, "accepted_answer_id": 31035153, "answer_count": 3, "score": 9, "last_activity_date": 1534932857, "creation_date": 1435172753, "last_edit_date": 1534932857, "question_id": 31034906, "link": "https://stackoverflow.com/questions/31034906/scope-of-the-pragma-pack-directive-in-visual-studio", "title": "Scope of the pragma pack directive in Visual Studio", "body": "<p>What is the scope of the <code>#pragma pack</code> alignment in Visual C++? The API reference\n<a href=\"https://msdn.microsoft.com/en-us/library/vstudio/2e70t5y1%28v=vs.120%29.aspx\" rel=\"noreferrer\">https://msdn.microsoft.com/en-us/library/vstudio/2e70t5y1%28v=vs.120%29.aspx</a>\nsays:</p>\n\n<blockquote>\n  <p>pack takes effect at the first struct, union, or class declaration\n  after the pragma is seen</p>\n</blockquote>\n\n<p>So as a consequence for the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#pragma pack(push, 1)\n\nstruct FirstExample\n{\n   int intVar;   // 4 bytes\n   char charVar; // 1 byte\n};\n\nstruct SecondExample\n{\n   int intVar;   // 4 bytes\n   char charVar; // 1 byte\n};\n\n\nvoid main()\n{\n   printf(\"Size of the FirstExample is %d\\n\", sizeof(FirstExample));\n   printf(\"Size of the SecondExample is %d\\n\", sizeof(SecondExample));\n}\n</code></pre>\n\n<p>I've expected:</p>\n\n<pre><code>Size of the FirstExample is 5\nSize of the SecondExample is 8\n</code></pre>\n\n<p>but I've received:</p>\n\n<pre><code>Size of the FirstExample is 5\nSize of the SecondExample is 5\n</code></pre>\n\n<p>That is why I am a little surprised and I really appreciate any explanation you can provide.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 823, "user_id": 4812238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFdQT.jpg?s=128&g=1", "display_name": "Ediac", "link": "https://stackoverflow.com/users/4812238/ediac"}, "edited": false, "score": 0, "creation_date": 1435172509, "post_id": 31034792, "comment_id": 50094050, "body": "Assuming <code>arr</code> is an <code>int arr[]</code> , then yes"}, {"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 0, "creation_date": 1435172515, "post_id": 31034792, "comment_id": 50094056, "body": "any cases where you failed to do this??"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1435172538, "post_id": 31034792, "comment_id": 50094079, "body": "Please state the type of <code>arr</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 1, "creation_date": 1435175124, "post_id": 31034792, "comment_id": 50095512, "body": "@RyanHaining <code>Pirate</code>, obviously. Don&#39;t try that trick with the <code>--</code> operator. <code>Pirate</code>&#39;s <code>--</code> overload burns the running computer to the waterline and keelhauls the user for daring to take <i>anything</i> from a <code>Pirate</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2912, "user_id": 1274223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/uGq26.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/1274223/alejandro"}, "edited": false, "score": 2, "creation_date": 1435172501, "post_id": 31034841, "comment_id": 50094045, "body": "Beat me to it by seconds!"}, {"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 0, "creation_date": 1435172761, "post_id": 31034841, "comment_id": 50094218, "body": "where does this fail?? :\\"}, {"owner": {"reputation": 759, "user_id": 2002086, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oKNub.png?s=128&g=1", "display_name": "Roguebantha", "link": "https://stackoverflow.com/users/2002086/roguebantha"}, "edited": false, "score": 0, "creation_date": 1435172880, "post_id": 31034841, "comment_id": 50094274, "body": "Thanks that&#39;s all I needed."}, {"owner": {"reputation": 2912, "user_id": 1274223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/uGq26.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/1274223/alejandro"}, "reply_to_user": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 2, "creation_date": 1435172882, "post_id": 31034841, "comment_id": 50094276, "body": "@user007, a user-defined type may do different things for the increment operators and <code>operator +</code>."}, {"owner": {"reputation": 759, "user_id": 2002086, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oKNub.png?s=128&g=1", "display_name": "Roguebantha", "link": "https://stackoverflow.com/users/2002086/roguebantha"}, "edited": false, "score": 0, "creation_date": 1435172916, "post_id": 31034841, "comment_id": 50094294, "body": "Thanks anyway Alejandro :)"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 4, "creation_date": 1435173270, "post_id": 31034841, "comment_id": 50094494, "body": "@user007 If <code>arr</code> is, for instance, an array of <code>list&lt;T&gt;::iterator</code>, then <code>++</code> is defined but <code>+ 1</code> is not."}], "tags": [], "owner": {"reputation": 44578, "user_id": 536086, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/75d228bb162b779392a94d9364969208?s=128&d=identicon&r=PG", "display_name": "Yochai Timmer", "link": "https://stackoverflow.com/users/536086/yochai-timmer"}, "is_accepted": true, "score": 10, "last_activity_date": 1435172485, "creation_date": 1435172485, "answer_id": 31034841, "question_id": 31034792, "link": "https://stackoverflow.com/questions/31034792/a-valid-c-statement/31034841#31034841", "title": "A valid C++ statement?", "body": "<p>For an integer it will. </p>\n\n<p>But it depends on the type of <strong>arr</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "edited": false, "score": 0, "creation_date": 1435173357, "post_id": 31035057, "comment_id": 50094540, "body": "The question has a semicolon at the end of the second code block, which implies that it is a complete statement. Assuming parallelism, both of the code blocks are therefore complete statements, which means that the return value is irrelevant. In this case, if <code>arr</code> is an <code>int</code> array, the two code blocks are the same."}, {"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "reply_to_user": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "edited": false, "score": 1, "creation_date": 1435173512, "post_id": 31035057, "comment_id": 50094616, "body": "@RedRoboHood But these expressions are not equivalent. Though they have the same behavior (or appear to have such), it&#39;s different for stacked or compound expressions that make use of post-increment."}, {"owner": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "edited": false, "score": 0, "creation_date": 1435173590, "post_id": 31035057, "comment_id": 50094643, "body": "You are correct, but Roguebantha made it clear by adding a semicolon that he is not asking about stacked or compound expressions."}, {"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "reply_to_user": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "edited": false, "score": 0, "creation_date": 1435173672, "post_id": 31035057, "comment_id": 50094684, "body": "@RedRoboHood Not to be picky, but the first block isn&#39;t a statement (no semicolon) AND I don&#39;t think it&#39;s good to give the impression that pre and post increment are the same."}, {"owner": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "edited": false, "score": 0, "creation_date": 1435173814, "post_id": 31035057, "comment_id": 50094774, "body": "Agreed. If you were to edit your answer to note that the differences do not apply to the exact situation given by the asker, it would be correct."}], "tags": [], "owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "is_accepted": false, "score": 1, "last_activity_date": 1435173865, "last_edit_date": 1592644375, "creation_date": 1435173228, "answer_id": 31035057, "question_id": 31034792, "link": "https://stackoverflow.com/questions/31034792/a-valid-c-statement/31035057#31035057", "title": "A valid C++ statement?", "body": "<h2>In this case, yes. But, in other situations, no, it will not.</h2>\n<p>In general, with an array of object or number, it will call the post-increment operator, which can be different from a regular pre-increment operator--although post-increment may appear to just increment alone, in reality, it will increment the actual object BUT it will return a copy of the unincremented object. Beware of this small technicality.</p>\n<p>Also, note that user-defined operator overloads may not follow these semantics at all.</p>\n"}], "owner": {"reputation": 759, "user_id": 2002086, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oKNub.png?s=128&g=1", "display_name": "Roguebantha", "link": "https://stackoverflow.com/users/2002086/roguebantha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 31034841, "answer_count": 2, "score": 4, "last_activity_date": 1435174769, "creation_date": 1435172350, "last_edit_date": 1435174769, "question_id": 31034792, "link": "https://stackoverflow.com/questions/31034792/a-valid-c-statement", "title": "A valid C++ statement?", "body": "<p>I couldn't find it online, so I thought I should ask here. Will</p>\n\n<pre><code>arr[0]++;\n</code></pre>\n\n<p>behave the same as</p>\n\n<pre><code>arr[0] = arr[0] + 1;\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c++", "ssl", "boost", "callback", "boost-asio"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1435172143, "last_edit_date": 1435172143, "creation_date": 1435171674, "answer_id": 31034587, "question_id": 31034526, "link": "https://stackoverflow.com/questions/31034526/boost-asio-ssl-number-of-bytes-received/31034587#31034587", "title": "Boost ASIO SSL number of bytes received", "body": "<p>The <code>write</code> call <em>sends</em> data.</p>\n\n<p>Since it doesn't, at all, <em>receive</em> data the number of bytes <em>received</em> is by definition 0.</p>\n\n<p>If you want to receive data, use <code>(async_)read</code> and it will tell you the number of bytes <em>received</em>.</p>\n\n<p>These call backs use the same <em>placeholder</em> (<code>bytes_transferred</code>) but it carries different meaning depending on the direction of the transfer that has been completed.</p>\n\n<p>Here's a solution that <em>technically</em> does what you want: define an extra parameter of <code>startComm</code> and bind it (not with a placeholder).</p>\n\n<pre><code>void handle_read(const boost::system::error_code &amp;error, size_t bytes_received) {\n    if (!error) {\n        std::cout &lt;&lt; \"Reply: \";\n        std::cout.write(reply_, bytes_received);\n        std::cout &lt;&lt; \"\\n\";\n\n        boost::asio::async_write(socket_, boost::asio::buffer(std::string(\"Now?\")),\n                                 boost::bind(&amp;SSLClient::startComm, \n                                     this, \n                                     boost::asio::placeholders::error,\n                                     bytes_received,\n                                     boost::asio::placeholders::bytes_transferred));\n    } else {\n        std::cout &lt;&lt; \"Read failed: \" &lt;&lt; error.message() &lt;&lt; \"\\n\";\n    }\n}\n\nvoid startComm(const boost::system::error_code &amp;error, size_t had_received, size_t bytes_sent) {\n    if (!error) {\n        std::cout &lt;&lt; \"Reply: \";\n        std::cout.write(reply_, had_received);\n        std::cout &lt;&lt; \"\\n\";\n    } else {\n        std::cout &lt;&lt; \"Write failed: \" &lt;&lt; error.message() &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Note that I still think you might <em>mistakenly</em> expect <code>async_write</code> to receive a reply, which (obviously?) isn't the case</p>\n"}], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 31034587, "answer_count": 1, "score": 1, "last_activity_date": 1435592399, "creation_date": 1435171497, "last_edit_date": 1435592399, "question_id": 31034526, "link": "https://stackoverflow.com/questions/31034526/boost-asio-ssl-number-of-bytes-received", "title": "Boost ASIO SSL number of bytes received", "body": "<p>I would like to create client/server communication programs pair using Boost ASIO + SSL. So I started off with the examples provided by boost, and I learned how that works, and I'm almost ready to develop my communication protocol, except that there's one problem.</p>\n\n<p>So starting from <a href=\"http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/example/ssl/client.cpp\" rel=\"nofollow\">this example</a>, I'm modifying the <code>handle_read()</code> callback function after the handshake. The following is my code. My only modification is: Add another callback function called <code>startComm()</code>, which will start the communication.</p>\n\n<pre><code>void handle_read(const boost::system::error_code&amp; error,\n                 size_t bytes_transferred)\n{\n    if (!error)\n    {\n        std::cout &lt;&lt; \"Reply: \";\n        std::cout.write(reply_, bytes_transferred);\n        std::cout &lt;&lt; \"\\n\";\n\n        boost::asio::async_write(socket_,\n                                 boost::asio::buffer(std::string(\"Now?\")),\n                                 boost::bind(&amp;SSLClient::startComm, this,\n                                             boost::asio::placeholders::error,\n                                             boost::asio::placeholders::bytes_transferred));\n    }\n    else\n    {\n        std::cout &lt;&lt; \"Read failed: \" &lt;&lt; error.message() &lt;&lt; \"\\n\";\n    }\n}\n\nvoid startComm(const boost::system::error_code&amp; error,\n                 size_t bytes_transferred)\n{\n    if (!error)\n    {\n        std::cout &lt;&lt; \"Reply: \";\n        std::cout.write(reply_, bytes_transferred); //problem here, bytes transferred should contain the number of received chars not number of written chars\n        std::cout &lt;&lt; \"\\n\";\n    }\n    else\n    {\n        std::cout &lt;&lt; \"Read failed: \" &lt;&lt; error.message() &lt;&lt; \"\\n\";\n    }\n\n\n}\n</code></pre>\n\n<p>In the <code>async_write()</code> above, there's an argument <code>boost::asio::placeholders::bytes_transferred</code> which parametrizes my callback function to provide <strong>the number of bytes that were sent to the server</strong>. Now I would like to know the <strong>number of bytes the server responded with</strong>. How can I do that in my simple example?</p>\n\n<p>Thanks. If you require any additional details, please ask.</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr", "c++14", "unique-ptr"], "comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1435172493, "post_id": 31034461, "comment_id": 50094040, "body": "Remember that <code>shared_ptr</code> <i>erases</i> the deleter. The only template parameter is the type pointed-to in the current view."}, {"owner": {"reputation": 4450, "user_id": 387023, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Jf9aL.jpg?s=128&g=1", "display_name": "j00hi", "link": "https://stackoverflow.com/users/387023/j00hi"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1435173259, "post_id": 31034461, "comment_id": 50094490, "body": "@o11c what does that mean? I tried the proposed solution by @Nawaz and the deleter gets called after the <code>shared_ptr</code> is destroyed."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1435175555, "post_id": 31034461, "comment_id": 50095773, "body": "it means that the deleter&#39;s type is not related to the <code>shared_ptr</code>&#39;s type. You can even cast to, say, a <code>shared_ptr&lt;char&gt;</code> and it will still call the original deleter."}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 15, "last_activity_date": 1435171507, "creation_date": 1435171507, "answer_id": 31034531, "question_id": 31034461, "link": "https://stackoverflow.com/questions/31034461/move-a-unique-ptr-with-custom-deleter-to-a-shared-ptr/31034531#31034531", "title": "Move a unique_ptr with custom deleter to a shared_ptr", "body": "<pre><code>auto uniquePtr = give_unique_ptr();\nauto sharedPtr = std::shared_ptr&lt;decltype(uniquePtr)::element_type&gt;(std::move(uniquePtr));\n</code></pre>\n\n<p>And yes, the <code>shared_ptr</code> will store - and later use - the custom deleter.</p>\n"}, {"comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 2, "creation_date": 1435172462, "post_id": 31034602, "comment_id": 50094022, "body": "IMO, it would probably be better to have <code>make_shared_from</code> take an rvalue reference to make it outwardly visible that it was being moved from"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 3, "creation_date": 1435172543, "post_id": 31034602, "comment_id": 50094083, "body": "@RyanHaining or even a value, that&#39;s more C++11-idiomatic in most cases."}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1435172595, "post_id": 31034602, "comment_id": 50094114, "body": "@RyanHaining: That is also good. How about <code>move_from</code> instead of <code>make_shared_from</code>?"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 1, "creation_date": 1435172620, "post_id": 31034602, "comment_id": 50094127, "body": "@o11c I can&#39;t say I agree, would there be any difference other than incurring an additional move?"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1435172952, "post_id": 31034602, "comment_id": 50094319, "body": "@RyanHaining Passing by value means less indirections, and the additional move is negligible since it&#39;s trivial and only 2 words. Of course this is all moot if the compiler inlines enough ..."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1435173017, "post_id": 31034602, "comment_id": 50094352, "body": "@o11c what do you mean by &quot;less indirections&quot;?"}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1435173113, "post_id": 31034602, "comment_id": 50094419, "body": "@o11c: Frankly, I don&#39;t see any benefit of &quot;pass by value&quot; here."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1435173210, "post_id": 31034602, "comment_id": 50094474, "body": "@RyanHaining To load from an <code>int *</code> argument, only a single memory access must be made. To load from an <code>int **</code> or <code>int *&amp;</code> argument, <i>two</i> memory access must be made serially. Though now that I think about it, non-POD types add the pointer automatically even by-value, but I still do it for consistency and obviousness."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 2, "creation_date": 1435173316, "post_id": 31034602, "comment_id": 50094517, "body": "@o11c the <code>shared_ptr</code> constructor takes a <code>unique_ptr&amp;&amp;</code>, so it&#39;s hard to call it more &quot;idiomatic&quot; to take a value.  Custom deleters can be larger to the point where an additional move may not be as negligible as you think.  passing.  Moving a pointer is trivial, moving a <code>unique_ptr</code> is not."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1435173380, "post_id": 31034602, "comment_id": 50094549, "body": "@o11c your last comment is incorrect, unless you mean dereferencing through two layers of pointers, which wouldn&#39;t happen here anyway since nowhere does it actually access the owned resource."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 3, "creation_date": 1435173426, "post_id": 31034602, "comment_id": 50094574, "body": "<code>&amp;&amp;</code> for sink arguments make sense and is idiomatic, even if you have a sink-only type.  With an inlined function, all this register/pointer-counting is not going to matter, anyhow.  And @Ryan&#39;s point about &quot;we don&#39;t know how much custom deleters cost&quot; is a good one.  I&#39;d choose <code>std::shared_ptr&lt;T&gt; share_unique_ptr( std::unique_ptr&lt;T,D&gt;&amp;&amp; ptr )</code> myself as the name/signature: the the fact this returns a shared ptr should be part of the function name."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1435173955, "post_id": 31034602, "comment_id": 50094846, "body": "@Nawaz I&#39;d maintain that having the function take an rvalue reference is the right choice for outward clarity.  Having another &quot;move&quot; function is less than desirable imo."}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1435174129, "post_id": 31034602, "comment_id": 50094948, "body": "Alright guys, <code>make_shared_from</code> with rvalue-ref as parameter has been finalized, and edited the answer accordingly."}], "tags": [], "owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "is_accepted": true, "score": 19, "last_activity_date": 1435174096, "last_edit_date": 1435174096, "creation_date": 1435171739, "answer_id": 31034602, "question_id": 31034461, "link": "https://stackoverflow.com/questions/31034461/move-a-unique-ptr-with-custom-deleter-to-a-shared-ptr/31034602#31034602", "title": "Move a unique_ptr with custom deleter to a shared_ptr", "body": "<p>If you know (or want to explicitly type) the <em>type</em> of the object, then you can do this:</p>\n\n<pre><code>std::shared_ptr&lt;int&gt; sharedPtr(std::move(uniquePtr));\n</code></pre>\n\n<p>The constructor of <code>std::shared_ptr</code> will take care of the deletor.</p>\n\n<hr>\n\n<p>If you, however, want the <em>type</em> to be inferred, then:</p>\n\n<pre><code>auto sharedPtr = make_shared_from(std::move(uniquePtr));\n</code></pre>\n\n<p>where <code>make_shared_from</code> is:</p>\n\n<pre><code>template&lt;typename T, typename D&gt;\nstd::shared_ptr&lt;T&gt; make_shared_from(std::unique_ptr&lt;T,D&gt; &amp;&amp; p)\n{\n   //D is deduced but it is of no use here!\n   //We need only `T` here, the rest will be taken \n   //care by the constructor of shared_ptr\n   return std::shared_ptr&lt;T&gt;(std::move(p));\n};\n</code></pre>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 4450, "user_id": 387023, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Jf9aL.jpg?s=128&g=1", "display_name": "j00hi", "link": "https://stackoverflow.com/users/387023/j00hi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4824, "favorite_count": 3, "accepted_answer_id": 31034602, "answer_count": 2, "score": 25, "last_activity_date": 1435174096, "creation_date": 1435171279, "question_id": 31034461, "link": "https://stackoverflow.com/questions/31034461/move-a-unique-ptr-with-custom-deleter-to-a-shared-ptr", "title": "Move a unique_ptr with custom deleter to a shared_ptr", "body": "<p>I have a function which creates a unique_ptr with a custom deleter and returns it:</p>\n\n<pre><code>auto give_unique_ptr() {\n    auto deleter = [](int* pi) {\n        delete pi;\n    };\n    int* i = new int{1234};\n    return std::unique_ptr&lt;int, decltype(deleter)&gt;(i, deleter);\n}\n</code></pre>\n\n<p>In the client code of that function, I'd like to move the <code>unique_ptr</code> into a <code>shared_ptr</code>, but I don't know how to do that given that I don't know the decltype of my custom deleter outside of the function.</p>\n\n<p>I guess it should look something like this:</p>\n\n<pre><code>auto uniquePtr = give_unique_ptr();\nauto sharedPtr = std::shared_ptr&lt;..??..&gt;(std::move(uniquePtr));\n</code></pre>\n\n<p>What do I have to write instead of <em>..??..</em> to get the correct type?</p>\n\n<p>If this is possible, will the <code>shared_ptr</code> behave nicely and call my custom deleter created inside the <code>give_unique_ptr()</code> function when it's usage count reaches zero?</p>\n"}, {"tags": ["c++", "compiler-construction", "virtual-functions"], "comments": [{"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 7, "creation_date": 1435170883, "post_id": 31034277, "comment_id": 50093086, "body": "Technically speaking, it&#39;s not required to use a vtable at all, sounds like the person interviewing was just boosting his/her own ego."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1435170896, "post_id": 31034277, "comment_id": 50093094, "body": "I assume when the &quot;use of developer&quot; became a topic, the interview was drawing to a close?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1435170916, "post_id": 31034277, "comment_id": 50093104, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3804079/how-does-virtual-method-invocation-work-in-c\">How does virtual method invocation work in C++?</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 3, "creation_date": 1435172796, "post_id": 31034277, "comment_id": 50094236, "body": "I don&#39;t understand why it matters how virtual methods are implemented by the compiler.  IMHO, the only concept that is important is how the virtual methods are resolved in a high level understanding."}, {"owner": {"reputation": 103, "user_id": 1618832, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/22bf234dbadef4a1674a2b82f9cfdc05?s=128&d=identicon&r=PG", "display_name": "vDeepak", "link": "https://stackoverflow.com/users/1618832/vdeepak"}, "edited": false, "score": 0, "creation_date": 1435172830, "post_id": 31034277, "comment_id": 50094257, "body": "Does it mean we, as developer need not to worry how compiler implements their virtual mechanism? My view is regarding &quot;hidden&quot; code."}], "answers": [{"tags": [], "owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "is_accepted": false, "score": 1, "last_activity_date": 1435173429, "creation_date": 1435173429, "answer_id": 31035118, "question_id": 31034277, "link": "https://stackoverflow.com/questions/31034277/role-of-compiler-for-virtual-functions-in-c/31035118#31035118", "title": "Role of compiler for Virtual functions in C++", "body": "<blockquote>\n  <p>If a compiler is doing everything for you then what is the use of developer?</p>\n</blockquote>\n\n<p>Developers are there to specify their intentions and compilers are there to transform the intentions to executables. As time passes, computers get faster and compilers smarter so there is no need to express developer's intentions in assembly code but in Erlang, F#, Prolog, whatever.</p>\n\n<p>In other words, it's interesting to know details of the code produced by C++ compilers, but it is not the core of C++ development.</p>\n\n<p>Finally, to answer the quoted question:</p>\n\n<p><strong>Compilers are not doing everything yet. Unfortunately.</strong></p>\n"}], "owner": {"reputation": 103, "user_id": 1618832, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/22bf234dbadef4a1674a2b82f9cfdc05?s=128&d=identicon&r=PG", "display_name": "vDeepak", "link": "https://stackoverflow.com/users/1618832/vdeepak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435173429, "creation_date": 1435170683, "last_edit_date": 1435171117, "question_id": 31034277, "link": "https://stackoverflow.com/questions/31034277/role-of-compiler-for-virtual-functions-in-c", "title": "Role of compiler for Virtual functions in C++", "body": "<p>Recently I attended an interview. The interviewer asked me to explain virtual function mechanism in C++. I explained using VPTR and VTABLE. I explained in detail how VPTR and VTABLE are used to achieve run time polymorphism.</p>\n\n<p>While I was explaining how the compiler introduces hidden code to fetch VPTR from the class, get function address from VTABLE and call is resolved. But he was not satisfied with the answer. He asked me detail of hidden code? What exactly does a compiler do? If a compiler is doing everything for you then what is the use of developer?</p>\n\n<p>I searched for details of the role of a compiler for virtual functions. Regarding the hidden code.  But still not clear about the question. </p>\n\n<p>Please, any help or pointers?</p>\n"}, {"tags": ["c++", "pointers", "object"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1435170653, "post_id": 31034197, "comment_id": 50092960, "body": "You <code>vector</code> stores pointers, but you <code>push_back</code> the address of a variable that will go out of scope each loop (so instead just have <code>std::vector&lt;DF_XML_Table&gt;</code> and drop the <code>&amp;</code> from the <code>push_back</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "edited": false, "score": 0, "creation_date": 1435170826, "post_id": 31034261, "comment_id": 50093051, "body": "This is a simplified version of code. The real code has a vector&lt;DF_Table&gt; where DF_Table is a abstract super class of DF_XML_Table and others. I think I can only have a vector or pointers if the elements are an abstract class? My point is I will have to go with the second option you suggested. It works now, thanks."}], "tags": [], "owner": {"reputation": 185, "user_id": 1706118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b30be11406388f16191447161b990221?s=128&d=identicon&r=PG", "display_name": "birdypme", "link": "https://stackoverflow.com/users/1706118/birdypme"}, "is_accepted": false, "score": 2, "last_activity_date": 1435170634, "creation_date": 1435170634, "answer_id": 31034261, "question_id": 31034197, "link": "https://stackoverflow.com/questions/31034197/populating-c-object-fields-inside-loop-is-resulting-in-empty-fields/31034261#31034261", "title": "Populating C++ object fields inside loop is resulting in empty fields", "body": "<p>This is linked to the <a href=\"http://en.cppreference.com/w/cpp/language/lifetime\" rel=\"nofollow\">lifetime</a> of your object.\nAs you define xmlTbl on the stack, the memory is not allocated on the heap but on the stack, and the pointer to <code>xmlTbl</code> (<code>&amp;xmlTbl</code>) actually becomes invalid after the <code>}</code> brace of the for loop.</p>\n\n<p>What you need to do is allocate these, either by using a <code>vector&lt;DF_XML_Table&gt;</code> (instead of <code>vector&lt;DF_XML_Table*&gt;</code>), or use <code>new</code> to allocate memory (but you will have to call delete on each allocated pointer to avoid leaks.</p>\n"}, {"comments": [{"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "edited": false, "score": 0, "creation_date": 1435170903, "post_id": 31034300, "comment_id": 50093097, "body": "Bad idea. <code>unique_ptr&lt;DF_XML_Table&gt;</code> or <code>shared_ptr&lt;DF_XML_Table&gt;</code> is a smarter and much safer solution."}], "tags": [], "owner": {"reputation": 823, "user_id": 4812238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFdQT.jpg?s=128&g=1", "display_name": "Ediac", "link": "https://stackoverflow.com/users/4812238/ediac"}, "is_accepted": false, "score": 2, "last_activity_date": 1435171864, "last_edit_date": 1435171864, "creation_date": 1435170774, "answer_id": 31034300, "question_id": 31034197, "link": "https://stackoverflow.com/questions/31034197/populating-c-object-fields-inside-loop-is-resulting-in-empty-fields/31034300#31034300", "title": "Populating C++ object fields inside loop is resulting in empty fields", "body": "<p>That is because the <code>xmlTbl</code> object you are creating only exists within the scope of the <code>for</code>, once it exits <code>for</code> it gets deallocated. Instead:</p>\n\n<pre><code>vector&lt;std::unique_ptr&lt;DF_XML_Table&gt;&gt; tblVec;\nfor (int i = 1; i &lt;= 5; i++)\n{\n    string tblName = \"Name\";\n    tblVec.push_back( unique_ptr&lt;DF_XML_Table&gt;( new DF_XML_Table ) );\n    tblVec.back()-&gt;name = tblName;\n}\ncout &lt;&lt; \"tbl[0]-&gt;name = \" &lt;&lt; tblVec[0]-&gt;name &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 2, "last_activity_date": 1435172601, "last_edit_date": 1435172601, "creation_date": 1435170870, "answer_id": 31034324, "question_id": 31034197, "link": "https://stackoverflow.com/questions/31034197/populating-c-object-fields-inside-loop-is-resulting-in-empty-fields/31034324#31034324", "title": "Populating C++ object fields inside loop is resulting in empty fields", "body": "<blockquote>\n  <p>Why is this the output?</p>\n\n<pre><code>tbl[0]-&gt;name =\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p>It's because </p>\n\n<blockquote>\n<pre><code>DF_XML_Table xmlTbl;\n</code></pre>\n</blockquote>\n\n<p>goes out of scope and will be destroyed on each of the loops iterations. You'll have a dangling pointer left, and accessing it later is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behaviour</a>.</p>\n\n<hr>\n\n<p>Instead of using raw pointers, you should choose an appropriate <a href=\"http://en.cppreference.com/w/cpp/memory\" rel=\"nofollow\">dynamic memory management</a> smart pointer to be stored in the <code>std::vector&lt;&gt;</code>:</p>\n\n<pre><code>vector&lt;std::unique_ptr&lt;DF_XML_Table&gt;&gt; tblVec;\nfor (int i = 1; i &lt;= 5; i++) {\n    DF_XML_Table* xmlTbl = ;\n    tblVec.push_back(std::unique_ptr&lt;DF_XML_Table&gt;(new DF_XML_Table()));\n    tblVec.back()-&gt;name = \"Name\";\n}\ncout &lt;&lt; \"tbl[0]-&gt;name = \" &lt;&lt; tblVec[0]-&gt;name &lt;&lt; endl;\n</code></pre>\n\n<p>The code above will ensure that ownership for the dynamically allocated object is transferred to the containing <code>vector&lt;std::unique_ptr&lt;DF_XML_Table&gt;&gt;</code>, and be properly handled to decease their life time no earlier, than <code>tblVec</code> goes out of scope.</p>\n"}], "owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 31034324, "answer_count": 3, "score": 1, "last_activity_date": 1435173342, "creation_date": 1435170428, "last_edit_date": 1435173342, "question_id": 31034197, "link": "https://stackoverflow.com/questions/31034197/populating-c-object-fields-inside-loop-is-resulting-in-empty-fields", "title": "Populating C++ object fields inside loop is resulting in empty fields", "body": "<p>I'm fairly new to C++ so bear with me.</p>\n\n<p>I will try to explain my problem simply.</p>\n\n<p>I think the code below is simple enough to understand. I have a object DF_XML_Table that has a field 'name'. I am creating instances of the object and assigning values to the name field. It is resulting in empty name fields.</p>\n\n<pre><code>vector&lt;DF_XML_Table*&gt; tblVec;\nfor (int i = 1; i &lt;= 5; i++)\n{\n    string tblName = \"Name\";\n    DF_XML_Table xmlTbl;\n    xmlTbl.name = tblName;\n    tblVec.push_back(&amp;xmlTbl);\n\n}\ncout &lt;&lt; \"tbl[0]-&gt;name = \" &lt;&lt; tblVec[0]-&gt;name &lt;&lt; endl;\n</code></pre>\n\n<p>Why is this the output?</p>\n\n<pre><code>tbl[0]-&gt;name =\n</code></pre>\n"}, {"tags": ["c++", "c++11", "variadic-templates", "lvalue", "rvalue"], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 4, "last_activity_date": 1435170658, "creation_date": 1435170658, "answer_id": 31034270, "question_id": 31034184, "link": "https://stackoverflow.com/questions/31034184/variadic-templates-and-rvalue-refs/31034270#31034270", "title": "Variadic Templates and RValue refs", "body": "<p>If you specify argument, you have to give lvalue reference:</p>\n\n<pre><code>f&lt;int, float&amp;, double&gt;(10, 20, 30, x, 50.0);\n</code></pre>\n\n<p>or simply let compiler deduce for you</p>\n\n<pre><code>f(10, 20, 30, x, 50.0);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "edited": false, "score": 0, "creation_date": 1435171455, "post_id": 31034391, "comment_id": 50093426, "body": "The simple deduction gives an error saying... <code>.....file.h:41:87: note:   cannot convert \u2018x\u2019 (type \u2018float\u2019) to type \u2018float&amp;&amp;\u2019</code>. I fixed the typo with the template..."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "edited": false, "score": 0, "creation_date": 1435172324, "post_id": 31034391, "comment_id": 50093941, "body": "@subzero Not with exactly the function in your question, it won&#39;t."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1586187225, "last_edit_date": 1586187225, "creation_date": 1435171033, "answer_id": 31034391, "question_id": 31034184, "link": "https://stackoverflow.com/questions/31034184/variadic-templates-and-rvalue-refs/31034391#31034391", "title": "Variadic Templates and RValue refs", "body": "<blockquote>\n  <p>As far as I understand, <code>Args</code> here could either be lvalue or rvalue references, depending on the type deduction at compile time.</p>\n</blockquote>\n\n<p>You're half right. <code>Args&amp;&amp;</code> would be either an lvalue or rvalue reference. But <code>Args</code> itself is either an lvalue reference or <em>not a reference</em>. A simpler case:</p>\n\n<pre><code>template &lt;typename T&gt; void foo(T&amp;&amp; ) { }\n\nfoo(1); // T is int\nint x;\nfoo(x); // T is int&amp;\n</code></pre>\n\n<p>When you specify <code>float</code> for <code>x</code>, you are specifying that that particular argument will have type <code>float&amp;&amp;</code>, and you cannot implicitly convert an lvalue <code>float</code> to an rvalue. You would have to cast it (via <code>std::move</code>):</p>\n\n<pre><code>f&lt;int, float, double&gt;(10, 20, 30, std::move(x), 50.0);\n</code></pre>\n\n<p>Or specify that it's an lvalue via <code>float&amp;</code>:</p>\n\n<pre><code>f&lt;int, float&amp;, double&gt;(10, 20, 30, x, 50.0);\n</code></pre>\n\n<p>Or simply let deduction do its thing:</p>\n\n<pre><code>f(10, 20, 30, x, 50.0);\n</code></pre>\n\n\n"}], "owner": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1001, "favorite_count": 0, "accepted_answer_id": 31034391, "answer_count": 2, "score": 1, "last_activity_date": 1586187225, "creation_date": 1435170382, "last_edit_date": 1435171229, "question_id": 31034184, "link": "https://stackoverflow.com/questions/31034184/variadic-templates-and-rvalue-refs", "title": "Variadic Templates and RValue refs", "body": "<p>Consider the following C++ code</p>\n\n<pre><code>template &lt;class... Args&gt;\nvoid f (const int x, const int y, Args&amp;&amp;... args) {\n  // Do something\n}\n</code></pre>\n\n<p>As far as I understand,<code>Args</code> here could either be lvalue or rvalue references, depending on the type deduction at compile time.</p>\n\n<p>So, I should be able to call the function using -</p>\n\n<pre><code>float x = 40.0;\nf&lt;int, float, double&gt;(10, 20, 30, x, 50.0);\n</code></pre>\n\n<p>This gives me an error saying that it could not cast x from type <code>float</code> to type <code>float&amp;&amp;</code>.</p>\n\n<p>How do I define a function with a variadic template that accepts both lvalue and rvalue references.</p>\n"}, {"tags": ["c++", "r", "parallel-processing", "rcpp"], "comments": [{"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 2, "creation_date": 1435173614, "post_id": 31034105, "comment_id": 50094657, "body": "Put it in a package."}, {"owner": {"reputation": 12012, "user_id": 4998761, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e38623efd528efef8abb6596d74e679a?s=128&d=identicon&r=PG", "display_name": "Nick Kennedy", "link": "https://stackoverflow.com/users/4998761/nick-kennedy"}, "edited": false, "score": 1, "creation_date": 1435173618, "post_id": 31034105, "comment_id": 50094659, "body": "It works fine on my machine (Windows 8.1, R 3.2.0, Rcpp 0.11.6. Looking at <a href=\"http://stackoverflow.com/questions/6074310/snow-inline-rcpp\">stackoverflow.com/questions/6074310/snow-inline-rcpp</a> another option would be to put your function into a local package."}], "answers": [{"tags": [], "owner": {"reputation": 1642, "user_id": 2726309, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/051f1ed22ee7660c986a1e47cf4f7040?s=128&d=identicon&r=PG&f=1", "display_name": "kennyB", "link": "https://stackoverflow.com/users/2726309/kennyb"}, "is_accepted": false, "score": 0, "last_activity_date": 1435177217, "last_edit_date": 1435177217, "creation_date": 1435175583, "answer_id": 31035759, "question_id": 31034105, "link": "https://stackoverflow.com/questions/31034105/sourcecpp-with-parallel/31035759#31035759", "title": "sourceCpp() with parallel", "body": "<p>This seems to work now that I've put the functions into a package.</p>\n"}], "owner": {"reputation": 1642, "user_id": 2726309, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/051f1ed22ee7660c986a1e47cf4f7040?s=128&d=identicon&r=PG&f=1", "display_name": "kennyB", "link": "https://stackoverflow.com/users/2726309/kennyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 761, "favorite_count": 0, "closed_date": 1435175722, "answer_count": 1, "score": 0, "last_activity_date": 1435177217, "creation_date": 1435170095, "question_id": 31034105, "link": "https://stackoverflow.com/questions/31034105/sourcecpp-with-parallel", "closed_reason": "Duplicate", "title": "sourceCpp() with parallel", "body": "<p>Using <code>sourceCpp</code> doesn't seem to work with parallel. How can I call an <code>Rcpp</code> function on a <code>parallel</code> cluster?</p>\n\n<p>My example:</p>\n\n<p>A <code>test.cpp</code> file:</p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\nusing namespace Rcpp;\n\n// [[Rcpp::export]]\nNumericVector timesTwo(NumericVector x) {\n  return x * 2;\n}\n</code></pre>\n\n<p>And an <code>R</code> file:</p>\n\n<pre><code>library(parallel)\nlibrary(Rcpp)\nsourceCpp(\"test.cpp\")\ntimesTwo(1)\n# [1] 2\n\ncl &lt;- makeCluster(2)\nclusterEvalQ(cl, {\n  library(Rcpp)\n  sourceCpp(\"test.cpp\")\n  timesTwo(1)\n})\n# Error in checkForRemoteErrors(lapply(cl, recvResult)) : \n# 2 nodes produced errors; first error: Error 1 occurred building shared library.\nstopCluster(cl)\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 2, "creation_date": 1435170174, "post_id": 31034095, "comment_id": 50092703, "body": "Should be <code>int (S::*pmf)() {&amp;S::f}</code> and it means &quot;<code>pmf</code> is a pointer to member function of <code>S</code> that takes no arguments and returns <code>int</code>, initialized to the address of the member function <code>S::f</code>."}, {"owner": {"reputation": 1171, "user_id": 3015723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qki0h.jpg?s=128&g=1", "display_name": "Snappawapa", "link": "https://stackoverflow.com/users/3015723/snappawapa"}, "edited": false, "score": 0, "creation_date": 1435170215, "post_id": 31034095, "comment_id": 50092718, "body": "perhaps this will shed some light: <a href=\"http://stackoverflow.com/questions/4984600/when-do-i-use-a-dot-arrow-or-double-colon-to-refer-to-members-of-a-class-in-c\" title=\"when do i use a dot arrow or double colon to refer to members of a class in c\">stackoverflow.com/questions/4984600/&hellip;</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435170248, "post_id": 31034095, "comment_id": 50092730, "body": "Lookup for <a href=\"http://stackoverflow.com/search?q=%5Bc%2B%2B%5Dmember+function+pointer+what+is\">member function pointer</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1435170428, "post_id": 31034095, "comment_id": 50092818, "body": "I gave up understanding function pointer declarations (member function declarations are worse), and google it every time, if I really need some. On the other hand, std::function with a signature is nice."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1435170548, "post_id": 31034095, "comment_id": 50092885, "body": "You misspelled it, but here is a <a href=\"http://ideone.com/0okuhS\" rel=\"nofollow noreferrer\">demo</a> of what you may have meant."}, {"owner": {"reputation": 25, "user_id": 3771221, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rSAQM.png?s=128&g=1", "display_name": "Seu", "link": "https://stackoverflow.com/users/3771221/seu"}, "edited": false, "score": 0, "creation_date": 1435171247, "post_id": 31034095, "comment_id": 50093312, "body": "So it is misspelled in the book (polish version), I thought it is some kind of tricky and exotic coding ;] Thanks guys for your answers and links."}], "answers": [{"tags": [], "owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "is_accepted": true, "score": 0, "last_activity_date": 1435170180, "creation_date": 1435170180, "answer_id": 31034128, "question_id": 31034095, "link": "https://stackoverflow.com/questions/31034095/complicated-syntax-classes/31034128#31034128", "title": "Complicated syntax (classes)", "body": "<p><code>pmf()</code> is a member function pointer for a member function <code>S::f</code> which return <code>int</code> and accept no parameters.</p>\n"}], "owner": {"reputation": 25, "user_id": 3771221, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rSAQM.png?s=128&g=1", "display_name": "Seu", "link": "https://stackoverflow.com/users/3771221/seu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "closed_date": 1435170281, "accepted_answer_id": 31034128, "answer_count": 1, "score": 1, "last_activity_date": 1435170180, "creation_date": 1435170030, "question_id": 31034095, "link": "https://stackoverflow.com/questions/31034095/complicated-syntax-classes", "closed_reason": "Duplicate", "title": "Complicated syntax (classes)", "body": "<p>I stumbled upon weird (for me) construction in B. Stroustrup's book. The code is</p>\n\n<pre><code>int (S::*) pmf() {&amp;S::f};\n</code></pre>\n\n<p>I am intermediate in C++, but I don't even know, what should I look for in Google and SO. I don't understand above construction, can you help me or point me to a good source?</p>\n"}, {"tags": ["c++", "algorithm", "data-structures", "tree", "quadtree"], "answers": [{"tags": [], "owner": {"reputation": 569, "user_id": 1492162, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RU6Yr.jpg?s=128&g=1", "display_name": "David K.", "link": "https://stackoverflow.com/users/1492162/david-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1438885503, "creation_date": 1438885503, "answer_id": 31863170, "question_id": 31033812, "link": "https://stackoverflow.com/questions/31033812/cost-benefit-of-reverse-lookup-in-quadtree-implementation/31863170#31863170", "title": "Cost/Benefit of Reverse Lookup in Quadtree Implementation", "body": "<p>TL;DR The essential benefit of not needing to pass in several bytes of coordinates isn't worth while.</p>\n\n<p>I did some conceptual work, and looked at what would be required for implementation, and it appears that a reverse-lookup has little to no benefit when compared with the potential downside in memory use and execution time.</p>\n\n<p>For this reason, I chose to maintain a coordinates-based implementation, which I've found to be performant at scale.</p>\n"}], "owner": {"reputation": 569, "user_id": 1492162, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RU6Yr.jpg?s=128&g=1", "display_name": "David K.", "link": "https://stackoverflow.com/users/1492162/david-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 31863170, "answer_count": 1, "score": 0, "last_activity_date": 1438885503, "creation_date": 1435169031, "last_edit_date": 1435170368, "question_id": 31033812, "link": "https://stackoverflow.com/questions/31033812/cost-benefit-of-reverse-lookup-in-quadtree-implementation", "title": "Cost/Benefit of Reverse Lookup in Quadtree Implementation", "body": "<p>I recently wrote a point quadtree implementation, in which points are inserted based on (x, y) coordinates. Each point has a unique point_id.</p>\n\n<p>It has no reverse lookup right now \u2013 if you want to find a point, you need to pass coordinates.</p>\n\n<p>Are there any benefits to maintaining something like the below pseudocode?</p>\n\n<pre><code>Map(point_id, [pointers to subtrees in quadtree that contain the point])\n</code></pre>\n\n<p>What are the upsides and downsides of implementing something like this?</p>\n"}, {"tags": ["c++", "oop", "msvc12"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 4, "creation_date": 1435169094, "post_id": 31033746, "comment_id": 50092154, "body": "The <code>Foo</code> in <code>int Foo::dosomething(float x, float y, float z);</code> in the class declaration is extra and ill-formatted c++. (Some compiles give a warning, other ignore it)"}, {"owner": {"reputation": 642, "user_id": 803017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e585168fc21084f48aeb33e76f21d5a3?s=128&d=identicon&r=PG&f=1", "display_name": "7VoltCrayon", "link": "https://stackoverflow.com/users/803017/7voltcrayon"}, "edited": false, "score": 0, "creation_date": 1435169320, "post_id": 31033746, "comment_id": 50092268, "body": "MSVC2013 32bit (using the QT Creator IDE)"}], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 5, "last_activity_date": 1435169353, "last_edit_date": 1435169353, "creation_date": 1435168962, "answer_id": 31033787, "question_id": 31033746, "link": "https://stackoverflow.com/questions/31033746/double-colon-before-method-declaration-in-class-definition/31033787#31033787", "title": "double-colon (::) before method declaration in class definition", "body": "<p>It is incorrect (and many compilers consider it an error) to add the scope to the function name <em>within</em> the class definition. Since it is already within the scope of a class, you are essentially defining the functions scope as <code>Foo::Foo::dosomething</code> which is wrong.</p>\n\n<pre><code>class Foo\n{\npublic:\n    int Foo::dosomething(float x, float y, float z);   // Shouldn't have Foo::\n};\n</code></pre>\n\n<p>To answer your question of what the <code>::</code> does, it specifies the <strong>scope</strong> of the function. Consider these two functions</p>\n\n<pre><code>int dosomething(float x, float y, float z);\nint Foo::dosomething(float x, float y, float z);\n</code></pre>\n\n<p>The first is a free function, the latter is a method of the <code>Foo</code> class and (since it isn't preceded by the word <code>static</code>) requires an instance of <code>Foo</code> to be called from.</p>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 1, "last_activity_date": 1435189534, "creation_date": 1435189534, "answer_id": 31038983, "question_id": 31033746, "link": "https://stackoverflow.com/questions/31033746/double-colon-before-method-declaration-in-class-definition/31038983#31038983", "title": "double-colon (::) before method declaration in class definition", "body": "<p>In general, it is not <em>illegal</em> to use the <code>::</code> scope operator against the existing class scope to refer to its own members (even though it is redundant).</p>\n\n<blockquote>\n  <p>After the point of declaration of a class member, the member name can be looked up in the scope of its\n  class. [ <em>Note:</em> this is true even if the class is an incomplete class. For example,\n  <code>struct X {</code><br>\n  <code>enum E { z = 16 };</code><br>\n  <code>int b[X::z];</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>// OK</em><br>\n  <code>};</code><br>\n  <sub>C++11 &sect;3.3.2 &para;5</sub></p>\n</blockquote>\n\n<p>The problem is that the definition of <em>point of declaration</em> seems to preclude using the scope operator in the member declaration if it is on its own name.</p>\n\n<blockquote>\n  <p>The <em>point of declaration</em> for a name is immediately after its complete declarator (Clause 8) and before its <em>initializer</em> (if any), except as noted below. [ <em>Example:</em><br>\n       <code>int x = 12;</code><br>\n       <code>{ int x = x; }</code><br>\n  Here the second <code>x</code> is initialized with its own (indeterminate) value. <em>\u2014 end example</em> ]<br>\n  <sub>C++11 &sect;3.3.2 &para;1</sub></p>\n</blockquote>\n\n<p>There are no exceptions for class members in the paragraphs that follow in the rest of &sect;3.3.2.</p>\n\n<p>Even with the above restriction, the syntax for class members do not prohibit the use of a <em>qualified-id</em> for the member name. It is therefore not a syntax error to accept the shown code. But, there is a semantic violation, and a diagnostic should have been emitted.</p>\n"}], "owner": {"reputation": 642, "user_id": 803017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e585168fc21084f48aeb33e76f21d5a3?s=128&d=identicon&r=PG&f=1", "display_name": "7VoltCrayon", "link": "https://stackoverflow.com/users/803017/7voltcrayon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "accepted_answer_id": 31038983, "answer_count": 2, "score": 2, "last_activity_date": 1435189534, "creation_date": 1435168868, "last_edit_date": 1435169537, "question_id": 31033746, "link": "https://stackoverflow.com/questions/31033746/double-colon-before-method-declaration-in-class-definition", "title": "double-colon (::) before method declaration in class definition", "body": "<p>I have a class written by a 3rd party, which has something like this Foo.h:</p>\n\n<pre><code>class Foo\n{\npublic:\n    int Foo::dosomething(float x, float y, float z);\n\n    //Other things here\n};\n</code></pre>\n\n<p>And in Foo.cpp, dosomething is:</p>\n\n<pre><code>int Foo::dosomething(float x, float y, float z)\n{    \n    //Something\n}\n</code></pre>\n\n<p>What does the <code>::</code> before the function name in the header mean? When I create a new object</p>\n\n<pre><code>Foo foo;\n</code></pre>\n\n<p>I cannot access the dosomething function like this: </p>\n\n<pre><code>foo.dosomething(1,2,3);\n</code></pre>\n\n<p>How is dosomething meant to be accessed? When I remove the :: in the header file before dosomething like so:</p>\n\n<pre><code>class Foo\n{\npublic:\n    int dosomething(float x, float y, float z);\n\n    //Other things here\n};\n</code></pre>\n\n<p>I can access dosomething from an object of type Foo.</p>\n"}, {"tags": ["c++", "c", "ubuntu", "stream", "pipe"], "comments": [{"owner": {"reputation": 465, "user_id": 1140106, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0909a8b4bb65fc36f018e5f707ba857a?s=128&d=identicon&r=PG", "display_name": "GManika", "link": "https://stackoverflow.com/users/1140106/gmanika"}, "edited": false, "score": 0, "creation_date": 1435169739, "post_id": 31033705, "comment_id": 50092472, "body": "Hi did you try/refer the below posting ?  [Here][1]        [1]: <a href=\"http://stackoverflow.com/questions/1367373/python-subprocess-popen-oserror-errno-12-cannot-allocate-memory\" title=\"python subprocess popen oserror errno 12 cannot allocate memory\">stackoverflow.com/questions/1367373/&hellip;</a>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1435170009, "post_id": 31033705, "comment_id": 50092612, "body": "Do you call <code>pclose</code> for each call to <code>popen</code>? Maybe you call <code>fclose</code> by mistake."}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435173410, "post_id": 31033705, "comment_id": 50094564, "body": "@user2062604 Just to be clear, is your call to <code>popen</code> failing and leaving <code>errno</code> set to <code>ENOMEM</code>, or could this be happening in one of the programs created by your call to <code>popen</code>? Note that <code>popen(&quot;lsof -p pid | wc -l&quot;, &quot;r&quot;)</code> should fork a shell which will then fork for <code>lsof</code> and again for <code>wc</code>."}, {"owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1435178242, "post_id": 31033705, "comment_id": 50097293, "body": "@DavidSchwartz Thanks for checking, but yes I am calling pclose"}, {"owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1435178256, "post_id": 31033705, "comment_id": 50097304, "body": "@AndrewHenle I&#39;ve edited my question to include the complete code."}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435178610, "post_id": 31033705, "comment_id": 50097498, "body": "So the full message printed by your program is &quot;popen failed with error 12 &#39;Cannot allocate memory&#39;&quot;?"}, {"owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "reply_to_user": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435179185, "post_id": 31033705, "comment_id": 50097777, "body": "@nategoose I think it really is popen that is setting errno because I set errno to zero before calling popen and I doubt that lsof or wc are causing ENOMEM. Could I be wrong here?"}, {"owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "reply_to_user": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435179236, "post_id": 31033705, "comment_id": 50097802, "body": "@nategoose The full message is:  Error: File ShellCommand.cpp line 137: popen failed with error 12 &#39;Cannot allocate memory&#39;"}, {"owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "edited": false, "score": 0, "creation_date": 1435179510, "post_id": 31033705, "comment_id": 50097937, "body": "I&#39;m particularly interested in the STREAM_MAX limit, how can I tell if I&#39;m at or close to this limit? Am I barking up the wrong tree?"}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435179510, "post_id": 31033705, "comment_id": 50097938, "body": "@user2062604  I was just wanting to verify that the error message wasn&#39;t coming from one of the programs that your program spawned."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1435179715, "post_id": 31033705, "comment_id": 50098058, "body": "Sounds like a fork failure because your process is so big there isn&#39;t room for a copy of it. Related: <a href=\"http://stackoverflow.com/q/8368067/2404501\">this question</a>"}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435180602, "post_id": 31033705, "comment_id": 50098522, "body": "@WumpusQ.Wumbley <code>fork</code> isn&#39;t that memory hungry, though <code>exec</code> can be based on the size of the executable.  <code>pipe</code> can be as well, and there are 2 pipes involved here."}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435180847, "post_id": 31033705, "comment_id": 50098636, "body": "@user2062604 Temporarily replace your <code>popen</code> code with <code>system(&quot;szCommand&quot;)</code> and see what happens.  You&#39;ll have to handle return code checking differently.  If that works then try putting <code>system(&quot;cat &#47;proc&#47;meminfo&quot;);</code> just before your call to <code>popen</code> and see what the output is."}, {"owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "reply_to_user": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435181902, "post_id": 31033705, "comment_id": 50099118, "body": "@nategoose I&#39;ve tried that as well, but when system(szCommand) fails, it just returns -1. Also, I&#39;m capturing data from /proc/meminfo every second and logging the memory used, as well as watching the Ubuntu graphical system monitor, and the system memory used never goes over 60%."}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435200226, "post_id": 31033705, "comment_id": 50104111, "body": "@user2062604 This is a rather simple program to &quot;need for this to work with swap disabled&quot;.  Can you elaborate on what the requirement is?  If you&#39;re hitting the memory limit when running this then you&#39;ve got some problems.  You should be able to run it in console mode (with no GUI) with swap disabled though.  You could also call the system calls directly and avoid <code>popen</code> opening a shell and decreasing buffer sizes, which would save you a little memory, but not that much."}, {"owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "reply_to_user": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435203640, "post_id": 31033705, "comment_id": 50104911, "body": "@nategoose  This is a small part of a much larger program. The issue here is that I&#39;m not, as far as I can tell, hitting the memory limit. Both /proc/meminfo and the graphical System Monitor both indicate that I&#39;m nowhere close to the memory limit. I must be hitting some other resource limit, but I don&#39;t know what it is. I have a hunch that it might be STREAM_MAX but I don&#39;t know how to check for this. If by &quot;run the system calls&quot; you mean call system() then I have already tried that and it fails, returning -1, just as frequently. What could be going wrong here? Thanks for everyone&#39;s help btw!"}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435238380, "post_id": 31033705, "comment_id": 50124076, "body": "@user2062604  When I said &quot;system calls&quot; I meant <code>fork()</code>, <code>pipe()</code>, <code>execve()</code>, <code>dup()</code>, <code>dup2()</code>, and <code>sigprocmask()</code>.  Those are called by <code>popen()</code>, but in <code>popen</code> your shell is run first and it runs the command string, which is useful since it looks up the locations of the commands with the PATH environmental variable and can also do built in commands that aren&#39;t separate programs, but calling them directly has less overhead or tell you more about what exactly is failing."}, {"owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "reply_to_user": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435338211, "post_id": 31033705, "comment_id": 50175636, "body": "I re-implemented popen() as @nategoose suggested and turns out fork() is failing with ENOMEM. I still believe this is because I have some resource leak - this is backed up by the fact that my system got to a point where I could hardly run my application without fork() failing, even after restarting the application, but after rebooting, fork() stopped failing entirely (at least for the time being). The problem is I have no idea what resource limit I&#39;m hitting - it doesn&#39;t seem to be memory (which is only at 60% capacity). Does anyone know what other limits I could be hitting and how to test?"}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435549276, "post_id": 31033705, "comment_id": 50229450, "body": "@user2062604  Have you looked in the logs?  There may be some messages in there relevant to the failing call to <code>fork</code>.  <a href=\"http://www.cyberciti.biz/faq/linux-log-files-location-and-how-do-i-view-logs-files/\" rel=\"nofollow noreferrer\">cyberciti.biz/faq/&hellip;</a>"}, {"owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "reply_to_user": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1435603157, "post_id": 31033705, "comment_id": 50258674, "body": "Thanks for the good idea @nategoose but I did a text search through the entire /var/log directory for &quot;fork&quot; as well as &quot;13:28:19&quot; which was the system time when I could last get the error to occur, and nothing useful came up."}], "owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3332, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435179451, "creation_date": 1435168738, "last_edit_date": 1435179451, "question_id": 31033705, "link": "https://stackoverflow.com/questions/31033705/why-is-popen-failing-with-cannot-allocate-memory", "title": "Why is popen failing with &#39;Cannot Allocate Memory&#39;", "body": "<p>I have an Ubuntu C++ application that executes shell commands by calling popen(). The popen() call works great usually but sometimes it will fail and will indicate error 12 'Cannot allocate memory'.</p>\n\n<p>I know that the system is not even close to being out of memory, so that's not the problem. I know that the process has roughly 250 files open, which is far less than the OPEN_MAX value of 1024.</p>\n\n<p>What else could be the problem?</p>\n\n<p>I've read elsewhere that I could be at the STREAM_MAX limit (which is 16), but I don't know how to check whether or not this is actually the case. Any help would be very much appreciated!</p>\n\n<p>Here is the complete code:</p>\n\n<pre><code>// Format the command to get the number of files open in this process\nchar szCommand[1024];\nmemset(&amp;(szCommand[0]), 0, sizeof(szCommand));\nsnprintf(szCommand, sizeof(szCommand) - 1, \"lsof -p %i | wc -l\", static_cast&lt;int&gt;(getpid()));\n\n// A string to capture the output\nstd::string szTotalOutput(\"\");\n\n// Execute the command\nFILE *pFile = popen(szCommand, \"r\");\n\n// If the open was successful\nif (pFile)\n{\n    // A text buffer to capture output\n    char szOutput[2048];\n    memset(&amp;(szOutput[0]), 0, sizeof(szOutput));\n\n    // Get the output\n    while (fgets(szOutput, static_cast&lt;int&gt;(sizeof(szOutput) - 1), pFile))\n    {\n        // Add to the total output\n        szTotalOutput += std::string(szOutput);\n    }\n\n    // Close the file\n    pclose(pFile);\n}\n\n// Or, if the open failed\nelse\n{\n    // An error string\n    char szError[2048];\n    memset(&amp;(szError[0]), 0, sizeof(szError));\n\n    // If we have a good error\n    if (errno != 0)\n    {\n        // Format the error string\n        snprintf(szError, sizeof(szError) - 1, \"popen failed with error %i '%s'\", errno, strerror(errno));\n    }\n\n    // Or, if we don't have a good error\n    else\n    {\n        // Format the error string\n        snprintf(szError, sizeof(szError) - 1, \"popen failed but errno was not set\");\n    }\n\n    // Print this error message to the console window\n    printf(\"Error: File %s line %i: %s\\n\", __FILE__, __LINE__, szError);\n}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I've found that if I re-enable swap (which was previously disabled) then the issue doesn't happen. But ultimately I need for this to work with swap disabled.</p>\n"}, {"tags": ["c++", "c", "cuda", "thrust", "multiple-gpu"], "answers": [{"tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": true, "score": 5, "last_activity_date": 1435209384, "last_edit_date": 1435209384, "creation_date": 1435169933, "answer_id": 31034070, "question_id": 31033661, "link": "https://stackoverflow.com/questions/31033661/initialize-struct-on-different-gpus/31034070#31034070", "title": "Initialize struct on different GPUs", "body": "<p>The problem is you are instantiating all the vectors in the same CUDA GPU context, then trying to use them in a different context. This happens because the default constructor for each <code>device_vector</code> gets called when you define the array of structures. To annotate your code:</p>\n\n<pre><code>struct LstmLayer lstmLayers[MAX_NUM_LSTM_LAYERS]; // default constructor for each device vector called here in one GPU context.\n\nfor (int i = 0; i &lt; numLstmLayers; ++i) {\n    CUDA_SAFE_CALL(cudaSetDevice(i));\n    lstmLayers[i].setDevice(i);\n    lstmLayers[i].init(true); // Error here, you changed to a different device and called resize\n}\n</code></pre>\n\n<p>The solution is probably to redefine the device vectors as pointers, and explicitly call their constructors in your <code>init</code> method. There are a lot of different ways this could be done, for example:</p>\n\n<pre><code> struct LstmLayer {\n  int deviceId;\n  thrust::device_vector &lt;real_t&gt;  * W;\n  thrust::device_vector &lt;real_t&gt; * gradW;\n\n  LstmLayer() : deviceId(0) {}\n\n  LstmLayer(int __deviceId__) : deviceId(__deviceId__) {}\n\n  void setDevice(int __deviceId__) { deviceId = __deviceId__; }\n\n  void init(bool initParams) {\n    W = new thrust::device_vector&lt;real_t&gt;(4*lstmSize * 2*lstmSize);\n    gradW = new thrust::device_vector&lt;real_t&gt;(4*lstmSize * 2*lstmSize);\n\n    if (initParams) GPU_Random_Vector(W);\n  }\n}\n</code></pre>\n\n<p>[disclaimer: written in browser, never compiled, use at own risk]</p>\n\n<p>obviously you would need to defined a destructor to prevent memory leaks. There are other possibilities, I'll leave that as an exercise to the reader. </p>\n"}], "owner": {"reputation": 57, "user_id": 5030115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e39fceba214e65c825d7e955eb6d03c9?s=128&d=identicon&r=PG", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/5030115/hieu-pham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 31034070, "answer_count": 1, "score": 0, "last_activity_date": 1435209384, "creation_date": 1435168568, "question_id": 31033661, "link": "https://stackoverflow.com/questions/31033661/initialize-struct-on-different-gpus", "title": "Initialize struct on different GPUs", "body": "<p>I have a struct that looks like this</p>\n\n<pre><code>struct LstmLayer {\n  int deviceId;\n  thrust::device_vector &lt;real_t&gt; W;\n  thrust::device_vector &lt;real_t&gt; gradW;\n\n  LstmLayer() : deviceId(0) {}\n\n  LstmLayer(int __deviceId__) : deviceId(__deviceId__) {}\n\n  void setDevice(int __deviceId__) { deviceId = __deviceId__; }\n\n  void init(bool initParams) {\n    W.resize(4*lstmSize * 2*lstmSize);\n    gradW.resize(4*lstmSize * 2*lstmSize);\n\n    if (initParams) GPU_Random_Vector(W);\n  }\n}\n</code></pre>\n\n<p>Now I want to initialize an array of <code>LstmLayer</code>, with each element on a different GPU device. I do it as follows</p>\n\n<pre><code>  struct LstmLayer lstmLayers[MAX_NUM_LSTM_LAYERS];\n\n  for (int i = 0; i &lt; numLstmLayers; ++i) {\n    CUDA_SAFE_CALL(cudaSetDevice(i));\n    lstmLayers[i].setDevice(i);\n    lstmLayers[i].init(true);\n  }\n</code></pre>\n\n<p>Running this program gives the following error</p>\n\n<pre><code>terminate called after throwing an instance of 'thrust::system::system_error'\n  what():  driver shutting down\n</code></pre>\n\n<p>Please tell me what's wrong with my code and how to do it right? Thank you in advanced.</p>\n"}, {"tags": ["c++", "math"], "comments": [{"owner": {"reputation": 8149, "user_id": 616644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wVwGC.png?s=128&g=1", "display_name": "Rick Smith", "link": "https://stackoverflow.com/users/616644/rick-smith"}, "edited": false, "score": 0, "creation_date": 1435168313, "post_id": 31033563, "comment_id": 50091677, "body": "Welcome to Stack Overflow! There seems to be a lot of extra code that isn&#39;t needed to understand the question.  Please try to narrow your question down the the <a href=\"http://stackoverflow.com/help/mcve\">Minimum, Complete, Verifiable Example</a> needed to get an answer."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1435168380, "post_id": 31033563, "comment_id": 50091718, "body": "did you try stepping through your code with a debugger?"}, {"owner": {"reputation": 2741, "user_id": 866104, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a3861ea6213ff2a02cd97480d1e8f393?s=128&d=identicon&r=PG", "display_name": "Michelle", "link": "https://stackoverflow.com/users/866104/michelle"}, "edited": false, "score": 1, "creation_date": 1435168494, "post_id": 31033563, "comment_id": 50091778, "body": "My first recommendation would be to write a separate function that reverses the digits of a number. Mostly because you have to do it twice, but it would also make it easier to narrow down the problem."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1435168780, "post_id": 31033563, "comment_id": 50091970, "body": "I agree that you should write a simple function that takes an int, and returns the reversed int.  Then this whole exercise becomes a 5 or 6 line reverse function, and a 5 or 6 line main() program."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1435169287, "post_id": 31033563, "comment_id": 50092257, "body": "If you do what was suggested, the bulk of the main() program would be this: <code>cout &lt;&lt;  reverse_num( reverse_num(input1) + reverse_num(input2) );</code>  So it is a one-line main program.  As to the reverse_num function, that is a trivial function, no more than 5 lines.  Also, those calls to <code>pow</code> are totally unnecessary.  Take a step back and think about how to take a number, get the last digit, and move that digit to the left each time you read the next digit.  It is a simple loop, no <code>pow</code> involved (but modulus, division, and addition are done)."}], "answers": [{"comments": [{"owner": {"reputation": 3541, "user_id": 5045104, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-vIk2Kv9zs0A/AAAAAAAAAAI/AAAAAAAAAA8/68iABvnsu9Y/photo.jpg?sz=128", "display_name": "Rax Weber", "link": "https://stackoverflow.com/users/5045104/rax-weber"}, "edited": false, "score": 0, "creation_date": 1435238372, "post_id": 31033879, "comment_id": 50124073, "body": "Your help is pretty much acknowledged! I wish to be as excellent as you experts one day. :)"}], "tags": [], "owner": {"reputation": 6480, "user_id": 637801, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4d3579c42c83ae8dfa42f97dc57754e0?s=128&d=identicon&r=PG", "display_name": "IronMensan", "link": "https://stackoverflow.com/users/637801/ironmensan"}, "is_accepted": false, "score": 0, "last_activity_date": 1435169286, "creation_date": 1435169286, "answer_id": 31033879, "question_id": 31033563, "link": "https://stackoverflow.com/questions/31033563/adding-reversed-numbers-then-reversing-the-sum/31033879#31033879", "title": "Adding reversed numbers then reversing the sum", "body": "<p>As suggested in the comments, you should write a function to reverse the number because you have to do it three times.</p>\n\n<p>When you're building up the reversed number, you're multiplying the wrong part and multiplying by the wrong amount.</p>\n\n<p>The first two lines correctly extract the lowest digit:</p>\n\n<pre><code>rev1 = n1%10;\nn1/=10;\n</code></pre>\n\n<p>So if <code>n1</code> started at 1234, it would now be 123 with <code>rev1</code> holding the value of 4.</p>\n\n<p>Building the reversed value should look like this:</p>\n\n<pre><code>res1 = (res1 * 10) + rev1;\n</code></pre>\n\n<p>You don't need to include <code>pow</code> at all because subsequent iterations will scale what's there.  To continue the example, <code>res1</code> will now be 4.  On the next iteration, <code>n1</code> will be reduced to 12 and <code>rev1</code> will be 3.  The last line will do this:</p>\n\n<pre><code>res1 = (4 * 10) + 3;\n</code></pre>\n\n<p>resulting in 43.  It has now correctly reversed two digits.  It will continue in this manner to reverse the rest of the number.</p>\n\n<p>It is not necessary to count the number of digits in the original number.  When both <code>n1</code> and <code>rev1</code> are zero, you have reversed the entire number.</p>\n"}, {"tags": [], "owner": {"reputation": 1197, "user_id": 4931530, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-nDmPkk0Onz4/AAAAAAAAAAI/AAAAAAAABLE/oS85cViB7SA/photo.jpg?sz=128", "display_name": "Acha Bill", "link": "https://stackoverflow.com/users/4931530/acha-bill"}, "is_accepted": false, "score": 0, "last_activity_date": 1435169384, "creation_date": 1435169384, "answer_id": 31033913, "question_id": 31033563, "link": "https://stackoverflow.com/questions/31033563/adding-reversed-numbers-then-reversing-the-sum/31033913#31033913", "title": "Adding reversed numbers then reversing the sum", "body": "<p>A separate function to reverse an integer would make the problem simpler</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\nusing namespace std;    \n\nint reverse(int a)\n{\n    stringstream sstream;\n    while (a != 0)\n    {\n        int temp = a % 10;\n        a /= 10;\n\n        sstream &lt;&lt; temp;\n    }\n    int r;\n    sstream &gt;&gt; r;\n\n    return r;\n}\nint main()\n{\n    int a, b;\n    cin &gt;&gt; a &gt;&gt; b; //a = 12, b = 34\n\n    int ra = reverse(a);\n    int rb = reverse(b);\n\n    int sum = ra + rb;\n\n    int rsum = reverse(sum);\n\n    cout &lt;&lt; rsum &lt;&lt; endl; //46\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1435171577, "post_id": 31034156, "comment_id": 50093487, "body": "Even though this should work, these &quot;online judge tests&quot; have a time out limit, and <code>reverse</code>and <code>to_string</code> could make the difference between a successful submission or not.  So the sure way to beat the time out (if that is an issue) is to reverse the int &quot;in place&quot; by doing simple addition, multiplication, and mod."}, {"owner": {"reputation": 186, "user_id": 4885184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10152979704813043/picture?type=large", "display_name": "yolgun", "link": "https://stackoverflow.com/users/4885184/yolgun"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1435172218, "post_id": 31034156, "comment_id": 50093889, "body": "Thanks for the remark. I have inserted reverse_fast function for efficiency."}, {"owner": {"reputation": 3541, "user_id": 5045104, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-vIk2Kv9zs0A/AAAAAAAAAAI/AAAAAAAAAA8/68iABvnsu9Y/photo.jpg?sz=128", "display_name": "Rax Weber", "link": "https://stackoverflow.com/users/5045104/rax-weber"}, "edited": false, "score": 0, "creation_date": 1435238464, "post_id": 31034156, "comment_id": 50124135, "body": "&#39;Reuse&#39;. Got it, bro. :)"}], "tags": [], "owner": {"reputation": 186, "user_id": 4885184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10152979704813043/picture?type=large", "display_name": "yolgun", "link": "https://stackoverflow.com/users/4885184/yolgun"}, "is_accepted": false, "score": 0, "last_activity_date": 1435172171, "last_edit_date": 1435172171, "creation_date": 1435170289, "answer_id": 31034156, "question_id": 31033563, "link": "https://stackoverflow.com/questions/31033563/adding-reversed-numbers-then-reversing-the-sum/31034156#31034156", "title": "Adding reversed numbers then reversing the sum", "body": "<p>In C++ 'reuse' is the keyword.</p>\n\n<ol>\n<li>Reuse existing functions.</li>\n<li>Reuse your own functions.</li>\n</ol>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nint reverse_fast(int val) {\n    int result = 0;\n    while (val) {\n        result = result * 10 + val % 10;\n        val = val / 10;\n    }\n    return result;\n}\n\nint reverse(int val) {\n    std::string s = std::to_string(val);\n    reverse(s.begin(), s.end());\n    return std::stoi(s);\n}\n\nint main()\n{\n    int t, n1, n2;\n    std::cin &gt;&gt; t;\n\n    while (t--) {\n        std::cin &gt;&gt; n1 &gt;&gt; n2;\n        std::cout &lt;&lt; reverse(reverse(n1) + reverse(n2));\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3541, "user_id": 5045104, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-vIk2Kv9zs0A/AAAAAAAAAAI/AAAAAAAAAA8/68iABvnsu9Y/photo.jpg?sz=128", "display_name": "Rax Weber", "link": "https://stackoverflow.com/users/5045104/rax-weber"}, "edited": false, "score": 0, "creation_date": 1435238195, "post_id": 31034480, "comment_id": 50123929, "body": "Awesome! I really appreciate your help. I hope to encounter more of your great answers in the future. By the way, I&#39;m still a newbie; so please bear with people like me who want to be as good as people like you. :)"}, {"owner": {"reputation": 3541, "user_id": 5045104, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-vIk2Kv9zs0A/AAAAAAAAAAI/AAAAAAAAAA8/68iABvnsu9Y/photo.jpg?sz=128", "display_name": "Rax Weber", "link": "https://stackoverflow.com/users/5045104/rax-weber"}, "edited": false, "score": 0, "creation_date": 1435329767, "post_id": 31034480, "comment_id": 50170529, "body": "I did, but it says i need 15 more reputation in order for the upvote to take effect."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 0, "last_activity_date": 1435255866, "last_edit_date": 1435255866, "creation_date": 1435171340, "answer_id": 31034480, "question_id": 31033563, "link": "https://stackoverflow.com/questions/31033563/adding-reversed-numbers-then-reversing-the-sum/31034480#31034480", "title": "Adding reversed numbers then reversing the sum", "body": "<p>First, you need to rethink how to reverse a number.</p>\n\n<p>Basically, what you want to do is to have a running total starting from 0.  </p>\n\n<p>Then starting from the rightmost digit in the number to reverse, you </p>\n\n<p>1) Take the total and multiply it by 10.  This \"moves\" the digits of the running total to the left by 1 place, leaving a 0 in the units place in the total.  </p>\n\n<p>2) Retrieve the rightmost digit from the input number you want to reverse, and add it to the total.</p>\n\n<p>3) Divide the input number by 10 and store results back into the input number.  If the result is 0, stop, else go to step 1).</p>\n\n<p>That's it.  </p>\n\n<p>So for example, to reverse the number 123:</p>\n\n<blockquote>\n  <p>1) Total = 0.</p>\n  \n  <p>2) Total = (Total x 10) + (last_digit_of_number) = (0 x 10) + 3 = 3</p>\n  \n  <p>3) Divide number by 10  (123 / 10), so number is now 12.</p>\n  \n  <p>4) Total = (Total x 10) + (last_digit_of_number) = (3 x 10) + 2 = 32</p>\n  \n  <p>5) Divide number by 10  (12 / 10), so number is now 1</p>\n  \n  <p>6) Total = (Total x 10) + (last_digit_of_number) = (32 x 10) + 1 = 321</p>\n  \n  <p>7) Divide number by 10  (1 / 10), so number is now 0.  We can stop.</p>\n</blockquote>\n\n<p>So Total is 321, thus the number has been reversed</p>\n\n<p>Look at the code below:</p>\n\n<pre><code>unsigned long reverse_num(unsigned long num)\n{\n    unsigned long sum = 0;  // our running total\n    while (num)    // keep going until our input is 0\n    {\n        sum = sum * 10 // multiply our running total by 10, so as to \n                       // shift it one place to the left\n        +\n                       // add on the following\n        num % 10;      // to get the last digit of our input do a mod(10)\n\n        num /= 10;     // divide by 10 to remove the last digit\n    }\n    return sum;  // return the result\n}\n</code></pre>\n\n<p>So now the requirements are that you want to reverse the input of two reversed numbers.  Simple:</p>\n\n<pre><code>unsigned long input1, input2;\ncin &gt;&gt; input1 &gt;&gt; input2;\ncout &lt;&lt; reverse_num(reverse_num(input1) + reverse_num(input2));\n</code></pre>\n\n<p>The call is doing exactly what the assignment stated, literally.  You are reversing the results of the sum of two reversed numbers.</p>\n"}], "owner": {"reputation": 3541, "user_id": 5045104, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-vIk2Kv9zs0A/AAAAAAAAAAI/AAAAAAAAAA8/68iABvnsu9Y/photo.jpg?sz=128", "display_name": "Rax Weber", "link": "https://stackoverflow.com/users/5045104/rax-weber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2235, "favorite_count": 0, "accepted_answer_id": 31034480, "answer_count": 4, "score": -7, "last_activity_date": 1435255866, "creation_date": 1435168240, "last_edit_date": 1435172045, "question_id": 31033563, "link": "https://stackoverflow.com/questions/31033563/adding-reversed-numbers-then-reversing-the-sum", "title": "Adding reversed numbers then reversing the sum", "body": "<p>I need help with my program. The concept is to accept 2 integers, add their reversed values, then reverse the sum. I have already tried debugging my code but still I can't see what's wrong with it. Here is the code:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;math.h&gt;\n    using namespace std;\n\n    int main()\n    {\n        int t, n1, n2;\n        cin &gt;&gt; t;\n\n        while(t--)\n        {\n            int n_digs1=1, n_digs2=1, res1=0, res2=0, f1=0, f2=0;\n            cin &gt;&gt; n1 &gt;&gt; n2;\n            for(int i=1;i&lt;=9;i++)\n            {\n                if((int)(n1/pow(10,i)) != 0)\n                    n_digs1++;\n                else\n                    f1=1;\n                if((int) (n2/pow(10,i)) != 0)\n                    n_digs2++;\n                else\n                    f2=1;\n                if(f1==1 &amp;&amp; f2==1){\n                    //cout &lt;&lt; n_digs1 &lt;&lt; n_digs2 &lt;&lt; endl;\n                    break;}\n            }\n            int rev1, rev2;\n            for(int i=n_digs1-1;i&gt;=0;i--)\n            {\n                rev1 = n1%10;\n                n1/=10;\n                res1 = res1 + rev1*pow(10,i);\n            }\n            for(int i=n_digs2-1;i&gt;=0;i--)\n            {\n                rev2 = n2%10;\n                n2/=10;\n                res2 = res2 + rev2*pow(10,i);\n            }\n            int n3 = res1+res2, n_digs3=1, rev3, res3=0;\n            for(int i=1;i&lt;=9;i++)\n            {\n                if((int)(n3/pow(10,i)) != 0)\n                    n_digs3++;\n                else\n                    break;\n            }\n\n            for(int i=n_digs3-1;i&gt;=0;i--)\n            {\n                rev3 = n3%10;\n                n3/=10;\n                res3 = res3 + rev3*pow(10,i);\n            }\n            cout &lt;&lt; res3 &lt;&lt; endl;\n        }\n        return 0;\n    }\n</code></pre>\n\n<p>The problem I'm trying to solve is based on SPOJ.(<a href=\"http://www.spoj.com/problems/ADDREV/\" rel=\"nofollow\">http://www.spoj.com/problems/ADDREV/</a>)\nThank you very much!</p>\n"}, {"tags": ["c++", "carchive"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 5, "creation_date": 1435167688, "post_id": 31033357, "comment_id": 50091268, "body": "Don&#39;t add elements to your vector that way!! <code>dataPoints-&gt;push_back(*dataPoint);</code> You are leaking every single element <a href=\"https://stackoverflow.com/questions/9303921/deleting-dereferenced-elements-from-vector\" title=\"deleting dereferenced elements from vector\">stackoverflow.com/questions/9303921/&hellip;</a>"}, {"owner": {"reputation": 541, "user_id": 3983972, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9cd8e81550abcb0143c6507947fe7712?s=128&d=identicon&r=PG&f=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3983972/batman"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1435167713, "post_id": 31033357, "comment_id": 50091283, "body": "Thanks for the heads up!"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 4, "creation_date": 1435167744, "post_id": 31033357, "comment_id": 50091304, "body": "You also have no reason to <code>new</code> the <code>std::vector</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1435168262, "post_id": 31033357, "comment_id": 50091635, "body": "Please avoid MFC (It is useless in a console application, and harmful for beginners)"}, {"owner": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1435168331, "post_id": 31033357, "comment_id": 50091688, "body": "The documentation for <code>CArchive</code> ( <a href=\"https://msdn.microsoft.com/en-us/library/caz3zy5s.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/caz3zy5s.aspx</a> ) doesn&#39;t say anything about running on a different thread.  If you don&#39;t go through the trouble of calling the functions you want on a different thread, it&#39;s not going to do that automatically."}, {"owner": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1435168459, "post_id": 31033357, "comment_id": 50091749, "body": "The documentation for <code>CArchive::Close()</code> says <b>Flushes any data remaining in the buffer</b>, closes the archive, and disconnects the archive from the file.  It looks to me like Microsoft is aggressive about keeping data in that buffer."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1435168619, "post_id": 31033357, "comment_id": 50091861, "body": "There is probably no reason to use <code>new</code> at all in this program.  Removing those calls to <code>new</code> makes those <code>ASSERT</code> lines unnecessary, since you would be dealing with objects, not pointers."}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 3983972, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9cd8e81550abcb0143c6507947fe7712?s=128&d=identicon&r=PG&f=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3983972/batman"}, "edited": false, "score": 1, "creation_date": 1435168395, "post_id": 31033434, "comment_id": 50091725, "body": "This helped. Turns out it spent 4 minutes deallocating."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 4, "last_activity_date": 1435167859, "creation_date": 1435167859, "answer_id": 31033434, "question_id": 31033357, "link": "https://stackoverflow.com/questions/31033357/execution-order-of-c/31033434#31033434", "title": "Execution order of c++", "body": "<p>If you want to create a vector with a million elements that are all default-initialized you just just use this version of the constructor</p>\n\n<pre><code>vector&lt;TestData&gt; dataPoints{numOfPoint};\n</code></pre>\n\n<p>You should stop <code>new</code>ing everything, let RAII handle the cleanup for you.</p>\n\n<p>Also, know that <code>push_back</code> requires a <code>resize</code> of your vector if it's capacity isn't large enough, so if you start with an empty vector, and know how big it is going to be at the end, you can use <code>reserve</code> ahead of time.</p>\n\n<pre><code>vector&lt;TestData&gt; dataPoints;\ndataPoints.reserve(numOfPoint);\nfor (int i = 0; i &lt; numOfPoint; i++)\n{\n    dataPoints-&gt;push_back(TestData{});\n}\n</code></pre>\n"}], "owner": {"reputation": 541, "user_id": 3983972, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9cd8e81550abcb0143c6507947fe7712?s=128&d=identicon&r=PG&f=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3983972/batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 31033434, "answer_count": 1, "score": 0, "last_activity_date": 1435167859, "creation_date": 1435167549, "question_id": 31033357, "link": "https://stackoverflow.com/questions/31033357/execution-order-of-c", "title": "Execution order of c++", "body": "<p>I created a program that tests <code>carchive</code>. I wanted to see how fast it took to save a million data points:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"TestData.h\"\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nvoid pause() {\n    cin.clear();\n    cout &lt;&lt; endl &lt;&lt; \"Press any key to continue...\";\n    cin.ignore();\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    int numOfPoint = 1000000;\n\n    printf(\"Starting test...\\n\\n\");\n    vector&lt;TestData&gt;* dataPoints = new vector&lt;TestData&gt;();\n\n    printf(\"Creating %i points...\\n\", numOfPoint);\n    for (int i = 0; i &lt; numOfPoint; i++)\n    {\n        TestData* dataPoint = new TestData();\n        dataPoints-&gt;push_back(*dataPoint);\n    }\n    printf(\"Finished creating points.\\n\\n\");\n\n    printf(\"Creating archive...\\n\");\n    CFile* pFile = new CFile();\n    CFileException e;\n    TCHAR* fileName = _T(\"foo.dat\");\n    ASSERT(pFile != NULL);\n    if (!pFile-&gt;Open(fileName, CFile::modeCreate | CFile::modeReadWrite | CFile::shareExclusive, &amp;e))\n    {\n        return -1;\n    }\n\n    bool bReading = false;\n    CArchive* pArchive = NULL;\n    try\n    {\n        pFile-&gt;SeekToBegin();\n        UINT uMode = (bReading ? CArchive::load : CArchive::store);\n        pArchive = new CArchive(pFile, uMode);\n        ASSERT(pArchive != NULL);\n    }\n    catch (CException* pException)\n    {\n        return -2;\n    }\n    printf(\"Finished creating archive.\\n\\n\");\n\n    //SERIALIZING DATA\n    printf(\"Serializing data...\\n\");\n    for (int i = 0; i &lt; dataPoints-&gt;size(); i++)\n    {\n        dataPoints-&gt;at(i).serialize(pArchive);\n    }\n    printf(\"Finished serializing data.\\n\\n\");\n\n    printf(\"Cleaning up...\\n\");\n    pArchive-&gt;Close();\n    delete pArchive;\n    pFile-&gt;Close();\n    delete pFile;\n    printf(\"Finished cleaning up.\\n\\n\");\n\n    printf(\"Test Complete.\\n\");\n\n    pause();\n\n    return 0;\n}\n</code></pre>\n\n<p>When I run this code, it takes some time to create the data points, but then it runs through the rest of the code almost instantly. However, I then have to wait about 4 minutes for the application to actually finish running. I would assume the application would wait hang at the serializing data portion just like it did during the creation of the data points.</p>\n\n<p>So my question is about how this actually work. Does <code>carchive</code> do its thing on a separate thread and allow the rest of the code to execute?</p>\n\n<p>I can provide more information if necessary.</p>\n"}, {"tags": ["c++", "multithreading", "pointers", "pass-by-reference"], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1435168046, "creation_date": 1435168046, "answer_id": 31033494, "question_id": 31033238, "link": "https://stackoverflow.com/questions/31033238/have-trouble-understanding-and-when-they-come-with-thread/31033494#31033494", "title": "Have trouble understanding * and &amp; when they come with thread", "body": "<p>The issue you are having is that std::thread is not taking <code>a</code> by reference.  You can wrap <code>a</code> with <a href=\"http://en.cppreference.com/w/cpp/utility/functional/ref\" rel=\"nofollow\"><code>std::ref</code></a> in order to get the reference to the thread function.</p>\n\n<pre><code>thread tt(change, std::ref(a));\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5045376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f70967d8ee1f5fcd26491d1f4e16c3?s=128&d=identicon&r=PG&f=1", "display_name": "Ven", "link": "https://stackoverflow.com/users/5045376/ven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1435215301, "answer_count": 1, "score": 1, "last_activity_date": 1435168046, "creation_date": 1435167146, "last_edit_date": 1435167308, "question_id": 31033238, "link": "https://stackoverflow.com/questions/31033238/have-trouble-understanding-and-when-they-come-with-thread", "closed_reason": "Duplicate", "title": "Have trouble understanding * and &amp; when they come with thread", "body": "<p>all!I meet some trouble\uff01The function \"change\" changes nothing...</p>\n\n<pre><code>void change(int &amp;a){\n    cout &lt;&lt; \"thread tt \\t\" &lt;&lt; &amp;a &lt;&lt; \" value:\" &lt;&lt; a &lt;&lt; endl;\n    a = 5;\n    return;\n}\n\nint main()\n{\n    int a = 4;\n    cout &lt;&lt; \"Thread main \\t\" &lt;&lt; &amp;a &lt;&lt; \" value:\" &lt;&lt; a &lt;&lt; endl;\n    thread tt(change, a);\n\n    tt.join();\n    cout &lt;&lt; \"After join() \\t\" &lt;&lt; &amp;a &lt;&lt; \" value:\" &lt;&lt; a &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>So, I write another programme to track the address of \"a\" and \"&amp;a\".Here is the code.</p>\n\n<pre><code>void change(int &amp;a,int b){\n    cout &lt;&lt; \"thread change \\t\" &lt;&lt; &amp;a &lt;&lt; \" value:\" &lt;&lt; a &lt;&lt; endl;\n    a = b;\n    return;\n}\n\n\nvoid change2(int *a,int b){\n    cout &lt;&lt; \"thread change2 \\t\" &lt;&lt; &amp;a &lt;&lt; \" value:\" &lt;&lt; a &lt;&lt; endl;\n    *a = b;\n    return;\n}\n\nint main()\n{\n    int a = 1;\n\n    change(a,2);\n    cout &lt;&lt; &amp;a &lt;&lt; \" \" &lt;&lt; a &lt;&lt; endl;\n    change2(&amp;a,3);\n    cout &lt;&lt; &amp;a &lt;&lt; \" \" &lt;&lt; a &lt;&lt; endl;\n    cout &lt;&lt; \"Thread main \\t\" &lt;&lt; &amp;a &lt;&lt; \" value:\" &lt;&lt; a &lt;&lt; endl&lt;&lt;endl;\n\n\n    thread t(change, a,4);\n    t.join();\n    cout &lt;&lt; \"After t.join()\\t\" &lt;&lt; &amp;a &lt;&lt; \" value:\" &lt;&lt; a &lt;&lt; endl;\n    cout &lt;&lt; &amp;a &lt;&lt; \" \" &lt;&lt; a &lt;&lt; endl &lt;&lt; endl;\n\n    thread tt(change2, &amp;a,5);\n    tt.join();\n    cout &lt;&lt; \"After tt.join()\\t\" &lt;&lt; &amp;a &lt;&lt; \" value:\" &lt;&lt; a &lt;&lt; endl;\n    cout &lt;&lt; &amp;a &lt;&lt; \" \" &lt;&lt; a &lt;&lt; endl &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>And results:</p>\n\n<pre><code>thread change   0038FE98 value:1\n0038FE98 2\nthread change2  0038FD68 value:0038FE98\n0038FE98 3\nThread main     0038FE98 value:3\n\nthread change   0070FAF4 value:3\nAfter t.join()  0038FE98 value:3\n0038FE98 3\n\nthread change2  00D0F99C value:0038FE98\nAfter tt.join() 0038FE98 value:5\n0038FE98 5\n</code></pre>\n\n<p>It seems that function \"change\" does NOT work only when we run it as a thread.</p>\n\n<p>And I wonder whether it relates to STACK?</p>\n\n<p>Could anyone give me some explenation?thanks a lot.. It really suffers me T_T</p>\n"}, {"tags": ["c++", "winapi", "device-driver"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1435167716, "post_id": 31033145, "comment_id": 50091285, "body": "have a look at this: <a href=\"http://stackoverflow.com/questions/18774179/windows-service-starting-stopping-another-service\" title=\"windows service starting stopping another service\">stackoverflow.com/questions/18774179/&hellip;</a>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1435171206, "post_id": 31033145, "comment_id": 50093279, "body": "Does your desktop app run elevated? If not then you are probably out of luck. You&#39;d likely need to create a separate process, best as a guardian service, to keep this other service alive."}, {"owner": {"reputation": 13490, "user_id": 2561452, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b4607e40ce354aa670c9a924845529ef?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Oschler", "link": "https://stackoverflow.com/users/2561452/robert-oschler"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1435181077, "post_id": 31033145, "comment_id": 50098737, "body": "@DavidHeffernan Thanks.  What I could do is launch another app that would prompt the user for elevated permissions and do the restart.  A bit convoluted, but less of a hassle than instructing a novice user on using the Local Services control panel to restart the service."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1435181499, "post_id": 31033145, "comment_id": 50098935, "body": "Install a dedicated guardian service to do the restarting and then the user can be shielded completely"}], "answers": [{"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1435226882, "post_id": 31046986, "comment_id": 50116194, "body": "I think you should add a brief description of the function and so make padding useless."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1435226139, "creation_date": 1435226139, "answer_id": 31046986, "question_id": 31033145, "link": "https://stackoverflow.com/questions/31033145/restart-windows-8-1-local-service-from-a-c-app/31046986#31046986", "title": "Restart Windows 8.1 local Service from a C++ app?", "body": "<p>Just call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682108(v=vs.85).aspx\" rel=\"nofollow\"><code>ControlService</code></a>. [Filler]</p>\n"}], "owner": {"reputation": 13490, "user_id": 2561452, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b4607e40ce354aa670c9a924845529ef?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Oschler", "link": "https://stackoverflow.com/users/2561452/robert-oschler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435226139, "creation_date": 1435166793, "last_edit_date": 1495542597, "question_id": 31033145, "link": "https://stackoverflow.com/questions/31033145/restart-windows-8-1-local-service-from-a-c-app", "title": "Restart Windows 8.1 local Service from a C++ app?", "body": "<p>I have a C++ desktop app that talks to a foreign (not written by me) Windows 8.1 Local Service.  The service talks to a USB device.  Unfortunately, the service has a bug that causes it to become unresponsive if the USB device is detached, even if detached properly using the USB device manager utility.  Currently I have to go into the Windows 8.1 Local Services control panel and restart the service manually.</p>\n\n<p>I can detect if the service is unresponsive from my app.  So what I want to do is if upon startup I detect that condition, I restart the service from my app.  Is there a WinApi or other call or technique available that will help me do that?  I've found some C# examples like this one:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5752576/how-to-restart-windows-service\">How to restart windows service?</a></p>\n\n<p>But nothing for C++.  I am using Visual Studio 2013 for development.</p>\n"}, {"tags": ["c++", "using"], "comments": [{"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1435166830, "post_id": 31033132, "comment_id": 50090760, "body": "Where is the <code>typedef</code> in your code?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2953119"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1435166858, "post_id": 31033132, "comment_id": 50090772, "body": "@MooseBoys What are you talking about?"}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1435166904, "post_id": 31033132, "comment_id": 50090806, "body": "your link points to <i>How to typedef a template class?</i>. What are you trying to accomplish?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2953119"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1435166938, "post_id": 31033132, "comment_id": 50090819, "body": "@MooseBoys Have you ever read the asnwers?"}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1435167440, "post_id": 31033132, "comment_id": 50091118, "body": "No I didn&#39;t read all the answers in your link; questions on SO should generally be self-contained.  That said, it seems like your question is specifically related to <a href=\"http://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\">type aliasing</a> in C++11.  Given that, this question probably isn&#39;t a dup of the template/typename question, but it&#39;s too low quality in its current form to justify reopening.  Odds are, you&#39;re simply not using a C++11-compatible compiler."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 2, "creation_date": 1435167757, "post_id": 31033132, "comment_id": 50091314, "body": "@MooseBoys This question is totally reasonable, and is absolutely a dup of that question...  given that the problem - as even expressed in the question itself - is the missing <code>typename</code> keyword. I don&#39;t know what you&#39;re talking about."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1435169005, "post_id": 31033132, "comment_id": 50092104, "body": "@Barry looks like you&#39;re right - adding a second <code>template</code> allows the code to compile."}], "owner": {"user_type": "does_not_exist", "display_name": "user2953119"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1435167096, "answer_count": 0, "score": 0, "last_activity_date": 1435167112, "creation_date": 1435166729, "last_edit_date": 1495540710, "question_id": 31033132, "link": "https://stackoverflow.com/questions/31033132/template-using-declaration", "closed_reason": "Duplicate", "title": "Template using declaration", "body": "<p>Why isn't it compiled:</p>\n\n<pre><code>template&lt;typename T&gt;\nusing v_itt = std::vector&lt;T&gt;::iterator; //error: missing 'typename' \n                             //prior to dependent type name 'std::vector&lt;T&gt;::iterator\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/1e15e41848f83728\" rel=\"nofollow noreferrer\">demo</a></p>\n\n<p>I use as it said in this <a href=\"https://stackoverflow.com/a/6907216/2953119\">topic</a>. What did I miss?</p>\n"}, {"tags": ["c++", "standards"], "comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1435167381, "post_id": 31033130, "comment_id": 50091076, "body": "@CoryKramer I think you&#39;ve misunderstood the question. I&#39;m not asking for the status of the <i>standard as a whole</i>; I&#39;m asking about the status of individual &quot;papers&quot; (this terminology sounds vague to me, but it&#39;s the term used by the open standard site) such as N3922 (as I mentioned)."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 2, "creation_date": 1435175875, "post_id": 31033130, "comment_id": 50095994, "body": "I don&#39;t believe questions on the standards process should be considered requests for outside resources. There are a large number of C++ questions that are unanswerable without referring to the process or linking to specific issue being handled by the committee."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1435186049, "post_id": 31033334, "comment_id": 50100755, "body": "Of course, the EWG issues list can only be used to track recent papers proposing a core language change, which is a subset of all papers."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1435202434, "post_id": 31033334, "comment_id": 50104615, "body": "@T.C. indeed, you are correct, which is why I was careful to say it was for this particular case. I am planning on expanding it but I don&#39;t think I will get to it till tomorrow, most of this I have figured out through trial and error and so explaining it well requires some thought. For defects and active issues it is relatively straight forward, for proposals it usually requires going through the minutes."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1435249875, "post_id": 31033334, "comment_id": 50133043, "body": "&quot;most of this I have figured out through trial and error&quot; -- and here I was somewhat hoping that I&#39;d just overlooked something obvious! Very disappointing, but thank you for sharing what you&#39;ve learned."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1435255265, "post_id": 31033334, "comment_id": 50136141, "body": "@KyleStrand I am not part of the committee so my insight is limited to what is publicly available. There are several members of the committee that regularly contribute here, so perhaps one of them will come by and comment on something I have missed or maybe add their own answer."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1435255702, "post_id": 31033334, "comment_id": 50136408, "body": "@KyleStrand it might make sense to unaccept my answer for now since it may attract more attention and perhaps some insightful comments or maybe a better answer. This is a good question, I will keep extending my answer as I get a chance."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1435255972, "post_id": 31033334, "comment_id": 50136566, "body": "I forgot that unanswered questions can get better visibility. I&#39;ll do that."}, {"owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "edited": false, "score": 0, "creation_date": 1435331224, "post_id": 31033334, "comment_id": 50171548, "body": "What does &quot;post-Issaquah&quot; and &quot;post-Urbana&quot; mean??"}, {"owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "edited": false, "score": 0, "creation_date": 1435350975, "post_id": 31033334, "comment_id": 50181795, "body": "It helps a lot. Thank you."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1436215683, "post_id": 31033334, "comment_id": 50507621, "body": "It seems that recently that the &quot;disposition&quot; column is only filled for papers written at a meeting and disposed of at the same meeting."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1436227250, "post_id": 31033334, "comment_id": 50511943, "body": "@T.C. that makes sense considering the numbering of the documents just increases so we will never see a previous document in a mailing or at least I have not seen that happen. Many papers get revised and so in those cases you will see the same proposal in the pre and post mailing with different numbers. So if a proposal gets accepted unrevised or a current revision gets accepted at a late meeting this won&#39;t show help us."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1451505862, "post_id": 31033334, "comment_id": 56814548, "body": "I had forgotten about this question and your suggestion of un-accepting your answer; since no more answers have appeared, I&#39;ll re-accept it."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1467457183, "post_id": 31033334, "comment_id": 63747124, "body": "It seems like the committee has been trying to improve visibility into the process and the status of the standard; do you or @T.C. know if the situation has changed since you answered?"}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 15, "last_activity_date": 1435374640, "last_edit_date": 1495542845, "creation_date": 1435167447, "answer_id": 31033334, "question_id": 31033130, "link": "https://stackoverflow.com/questions/31033130/how-does-the-standards-committee-indicate-the-status-of-a-paper-under-considerat/31033334#31033334", "title": "How does the standards committee indicate the status of a paper under consideration?", "body": "<p>For this particular case, we can guess this is an Evolution Working Group(<em>EWG</em>) issue from the Background section of the paper which says:</p>\n\n<blockquote>\n  <p>In Issaquah, EWG considered two alternative resolutions; this paper\n  offers wording for one of the two, and mentions the other only as an\n  acceptable alternative in case CWG uncovers fatal problems with EWG's\n  preferred resolution.</p>\n</blockquote>\n\n<p>We can see from the latest <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4422.html#161\" rel=\"nofollow noreferrer\">C++ Standard Evolution Completed Issues List</a> that the status of <code>N3922</code> is <code>WP</code>. For the Evolution Working Group the issue statues are defined on the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4421.html#Status\" rel=\"nofollow noreferrer\">active issues list</a> we an see <code>WP</code> stands for:</p>\n\n<blockquote>\n  <p>WP - (Working Paper) - The proposed resolution has not been accepted\n  as a Technical Corrigendum, but the full WG21/PL22.16 committee has\n  voted to apply the issue's resolution to the working paper.</p>\n</blockquote>\n\n<p>and indeed <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4422.html#161\" rel=\"nofollow noreferrer\">issue 161</a> which is tracking this paper says:</p>\n\n<blockquote>\n  <p>Adopted into the working draft in Urbana, as N3922. </p>\n</blockquote>\n\n<p>We can find the latest issues list for EWG and Core from the latest <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/\" rel=\"nofollow noreferrer\">mailings</a> and the latest mailings can be found off of the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/\" rel=\"nofollow noreferrer\">main WG21 site</a> and going to the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/\" rel=\"nofollow noreferrer\">papers section</a> and going to the latest date.</p>\n\n<p>In the general case, the post meeting mailing <em>Disposition</em> column will tell you the status of a paper, for example from <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/\" rel=\"nofollow noreferrer\">2015 the post-Lenexa mailing shows</a> the <em>Disposition</em> column for proposal <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4508.html\" rel=\"nofollow noreferrer\">N4508    A proposal to add shared_mutex (untimed) (Revision 4)</a> says <code>Adopted 2015-05</code> and we can confirm by looking at the latest draft standard which is also part of the mailing: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4527.pdf\" rel=\"nofollow noreferrer\">N4527  Working Draft, Standard for Programming Language C++</a> and it indeed contain the new and modified wording. We can also usually find the latest draft standard by going to this <a href=\"https://stackoverflow.com/a/4653479\">answer from  the question \"Where do I find the current C or C++ standard documents?\"</a></p>\n\n<p>This may not always be helpful, in this case of <code>N3922</code> was only listed in the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/#mailing2014-03\" rel=\"nofollow noreferrer\">post-Issaquah</a> mailing and has an empty <em>Disposition</em> but was later adopted <em>Urbana</em> but there is no indication of this in the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/#mailing2014-11\" rel=\"nofollow noreferrer\">post-Urbana mailing</a>.</p>\n\n<p><B>What does \"post-Issaquah\" and \"post-Urbana\" mean?</B></p>\n\n<p>The C++ standards meetings are usually referred to by the names of the places they took place. We can find a complete list on the <a href=\"https://isocpp.org/\" rel=\"nofollow noreferrer\">isocpp.org site</a> in the <a href=\"https://isocpp.org/std/meetings-and-participation/upcoming-meetings\" rel=\"nofollow noreferrer\">Upcoming Meetings, Past Meetings</a> section. So for the example the May 2015 meeting took place in <em>Lenexa, Kansas</em>.</p>\n\n<p>Before and after each meeting there is a mailing that lists all the documents relevant to that meeting and these are referred to as the <em>pre</em> and <em>post</em> meeting mailings, So for Lenexa we have the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/#mailing2015-04\" rel=\"nofollow noreferrer\">pre-Lenexa mailing</a> and <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/#mailing2015-05\" rel=\"nofollow noreferrer\">post-Lenexa mailing</a>. The post meeting mailing will contain meeting minutes, updated proposals and potentially the <em>Disposition</em> of the proposal, the latest working draft of the standard, updated issues lists etc...</p>\n"}], "owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 6, "accepted_answer_id": 31033334, "answer_count": 1, "score": 15, "last_activity_date": 1435374640, "creation_date": 1435166725, "last_edit_date": 1435354043, "question_id": 31033130, "link": "https://stackoverflow.com/questions/31033130/how-does-the-standards-committee-indicate-the-status-of-a-paper-under-considerat", "title": "How does the standards committee indicate the status of a paper under consideration?", "body": "<p>Does the C++ standards committee provide (on <a href=\"http://www.open-std.org/\" rel=\"nofollow noreferrer\">the open standard site</a> or elsewhere) any indicatation of the status of the papers under consideration and indexed on the open-standards site? I am referring to the individual \"papers\" indicating potential changes to the standard, with associated discussion, as per the example below; I am <em>not</em> referring to the (published or draft) standard <em>as a whole</em>.</p>\n\n<p>For instance, how can I determine whether <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3922.html\" rel=\"nofollow noreferrer\">N3922</a> has been accepted or rejected?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1435166932, "post_id": 31033068, "comment_id": 50090817, "body": "That <i>is</i> interesting. I&#39;m getting that it&#39;s an error defining a variable of this class. I.e., <code>foo&lt;bar::baz&gt;{};</code> is OK (g++), but then <code>foo&lt;bar::baz&gt; f;</code> is not. So it&#39;s pretty much an unusable type, and it looks like the error just comes relatively late (i.e., not at class definition)."}, {"owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "reply_to_user": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1435167780, "post_id": 31033068, "comment_id": 50091323, "body": "@AmiTavory It&#39;s not unusable, as you can always add a <a href=\"http://coliru.stacked-crooked.com/a/22807544d8414c4e\" rel=\"nofollow noreferrer\">public type alias</a>. Interesting question, though. Why is there an access check on the specialization for <code>::i</code>?"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 0, "creation_date": 1435167970, "post_id": 31033068, "comment_id": 50091442, "body": "@DanielFrey My understanding is that the question is about the case without modifying the code of <code>bar</code>."}, {"owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "reply_to_user": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1435168081, "post_id": 31033068, "comment_id": 50091519, "body": "@AmiTavory My point was just that the specialization is accepted on the private type, only the use requires the public alias (which is IMHO quite reasonable as the author of <code>bar</code> might want to specialize some other template <code>foo</code> for his own private type <code>baz</code>). But yes, the question is about the specialization for <code>::i</code>, so that doesn&#39;t help much."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 0, "creation_date": 1435168174, "post_id": 31033068, "comment_id": 50091574, "body": "@DanielFrey OK. Thanks for the interesting comment."}], "answers": [{"tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 5, "last_activity_date": 1435172030, "creation_date": 1435172030, "answer_id": 31034690, "question_id": 31033068, "link": "https://stackoverflow.com/questions/31033068/when-can-you-specialize-a-template-on-a-private-member-type/31034690#31034690", "title": "When can you specialize a template on a private member type?", "body": "<p>Consider <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_closed.html#182\"><strong>CWG #182</strong></a>:</p>\n\n<blockquote>\n  <p>Certain access checks are suppressed on explicit instantiations.\n  14.7.2 [temp.explicit] paragraph 8 says [\u2026] I was surprised that similar wording does not exist (that I could find) for explicit\n  specializations. I believe that the two cases should be handled\n  equivalently in the example below (i.e., that the specialization\n  should be permitted).</p>\n\n<pre><code>template &lt;class T&gt; struct C {\n  void f();\n  void g();\n};\n\ntemplate &lt;class T&gt; void C&lt;T&gt;::f(){}\ntemplate &lt;class T&gt; void C&lt;T&gt;::g(){}\n\nclass A {\n  class B {};\n  void f();\n};\n\ntemplate void C&lt;A::B&gt;::f();    // okay\ntemplate &lt;&gt; void C&lt;A::B&gt;::g(); // error - A::B inaccessible\n</code></pre>\n  \n  <p>[\u2026]</p>\n  \n  <p><strong>Rationale (October 2002)</strong>:</p>\n  \n  <p><strong>We reconsidered this and decided that the difference between the two\n  cases (explicit specialization and explicit instantiation) is\n  appropriate. The access rules are sometimes bent when necessary to\n  allow naming something, as in an explicit instantiation, but explicit\n  specialization requires not only naming the entity but also providing\n  a definition somewhere.</strong></p>\n</blockquote>\n\n<p>GCC and Clang do indeed reject the last line of the example shown, which is - apparently - inconsistent behavior, as for a corresponding explicit specialization of a class template, they do not issue an error message:</p>\n\n<pre><code>template &lt;class&gt; struct T {\n    void g();\n};\n\nclass A { class B; class C; };\n\ntemplate &lt;&gt; struct T&lt;A::B&gt;;    // Ok\ntemplate &lt;&gt; void T&lt;A::C&gt;::g(); // Error\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/683d27c05be058e8\"><strong>Demo</strong></a>. So I'll go out on a limb here and call both cases you showed ill-formed by \u00a714.3/3:</p>\n\n<blockquote>\n  <p>The name of a <em>template-argument</em> shall be accessible at the point\n  where it is used as a <em>template-argument</em>.</p>\n</blockquote>\n"}], "owner": {"reputation": 10492, "user_id": 603688, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1058344e1b119c4d9dd3aedc5456277b?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/603688/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 1, "accepted_answer_id": 31034690, "answer_count": 1, "score": 7, "last_activity_date": 1435172030, "creation_date": 1435166513, "question_id": 31033068, "link": "https://stackoverflow.com/questions/31033068/when-can-you-specialize-a-template-on-a-private-member-type", "title": "When can you specialize a template on a private member type?", "body": "<p>Given these definitions</p>\n\n<pre><code>template&lt;class T&gt; class foo {};\ntemplate&lt;class T&gt; class foo1 { static int i; };\nclass bar { class baz {}; };\n</code></pre>\n\n<p>I'm surprised to see that this compiles</p>\n\n<pre><code>template&lt;&gt;\nclass foo&lt;bar::baz&gt; {};\n</code></pre>\n\n<p>but this fails with the error <code>'class bar::baz' is private</code></p>\n\n<pre><code>template&lt;&gt;\nint foo1&lt;bar::baz&gt;::i = 42;\n</code></pre>\n\n<p>When does this happen, and is there a workaround other than making the type public?</p>\n"}, {"tags": ["java", "c++", "sorting", "computer-science", "quicksort"], "comments": [{"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 0, "creation_date": 1435166056, "post_id": 31032889, "comment_id": 50090272, "body": "<a href=\"http://programmers.stackexchange.com/\">programmers.stackexchange.com</a> ?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1435166239, "post_id": 31032889, "comment_id": 50090399, "body": "Hint: What is the <b>worst-case</b> performance for sorting the array <code>[0, 1, 2, 3, 4, 5, 6, 6, 6, 6, 6, 6, ...]</code>?"}, {"owner": {"reputation": 107, "user_id": 3919258, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/1e9fd12a0a49fc5470d9156255876af2?s=128&d=identicon&r=PG", "display_name": "user96454", "link": "https://stackoverflow.com/users/3919258/user96454"}, "edited": false, "score": 0, "creation_date": 1435166450, "post_id": 31032889, "comment_id": 50090529, "body": "if we assume pivot selection at the middle O(NlgN). If pivot is the first entry, then O(N^2)"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1435166753, "post_id": 31032889, "comment_id": 50090699, "body": "@user96454 Incorrect. In the <b>worst case</b>, how many recursive calls will you need?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1435166820, "post_id": 31032889, "comment_id": 50090750, "body": "If you have only 7 distinct keys ... do you need to stick with quick sort? Bucket, counting our radix sort could be your friends."}, {"owner": {"reputation": 107, "user_id": 3919258, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/1e9fd12a0a49fc5470d9156255876af2?s=128&d=identicon&r=PG", "display_name": "user96454", "link": "https://stackoverflow.com/users/3919258/user96454"}, "edited": false, "score": 0, "creation_date": 1435167280, "post_id": 31032889, "comment_id": 50091013, "body": "I&#39;m not sure why its incorrect. In the <b>worst case</b>, 1 is out first pivot so no changes happen, 2 is our second pivot - no changes, 3 is the 3rd pivot - no changes...all the way until the Nth element. That is O(N^2) recursive calls."}, {"owner": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "reply_to_user": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 0, "creation_date": 1435171225, "post_id": 31032889, "comment_id": 50093299, "body": "@Hcorg when referring other sites, it is often helpful to point that <a href=\"http://meta.stackexchange.com/tags/cross-posting/info\">cross-posting is frowned upon</a>"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 3919258, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/1e9fd12a0a49fc5470d9156255876af2?s=128&d=identicon&r=PG", "display_name": "user96454", "link": "https://stackoverflow.com/users/3919258/user96454"}, "edited": false, "score": 0, "creation_date": 1435168087, "post_id": 31033356, "comment_id": 50091522, "body": "I have a couple questions. First, this is exactly what I had in mind when I said O(N^2), but from what you are describing the algorithm stops when it hits 6. My understanding was that quicksort my default doesn&#39;t have a mechanism for &quot;detecting&quot; a sorted array, and it will continue breaking the problem down to its smallest size. This is why I didn&#39;t assume the algorithm would stop when <code>6</code> was picked as a pivot."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 107, "user_id": 3919258, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/1e9fd12a0a49fc5470d9156255876af2?s=128&d=identicon&r=PG", "display_name": "user96454", "link": "https://stackoverflow.com/users/3919258/user96454"}, "edited": false, "score": 0, "creation_date": 1435168353, "post_id": 31033356, "comment_id": 50091699, "body": "@user96454 Well, given an array that only consists of <code>6</code>s, what would <code>3-way-partition</code> do?"}, {"owner": {"reputation": 107, "user_id": 3919258, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/1e9fd12a0a49fc5470d9156255876af2?s=128&d=identicon&r=PG", "display_name": "user96454", "link": "https://stackoverflow.com/users/3919258/user96454"}, "edited": false, "score": 1, "creation_date": 1435168530, "post_id": 31033356, "comment_id": 50091800, "body": "Ahh, I just got the fact that you are not calling quicksort on the middle partitions, which [6, 6, 6, .....] would surely be. Makes sense, i was calling quicksort on all 3 parts of a partition"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1435167549, "creation_date": 1435167549, "answer_id": 31033356, "question_id": 31032889, "link": "https://stackoverflow.com/questions/31032889/quicksort-q-finitely-many-distinct-keys/31033356#31033356", "title": "Quicksort Q: Finitely many distinct keys", "body": "<p>The quicksort algorithm looks like this:</p>\n\n<pre><code>quicksort(A, lo, hi):\n  if lo &lt; hi:\n    p := partition(A, lo, hi)\n    quicksort(A, lo, p - 1)\n    quicksort(A, p + 1, hi)\n</code></pre>\n\n<p>We have a special partition that is 3-way, so let's say it returns the equal range for whatever pivot it picks and we just need to go below and above that:</p>\n\n<pre><code>quicksort(A, lo, hi):\n  if lo &lt; hi:\n    p1, p2 := 3-way-partition(A, lo, hi)\n    quicksort(A, lo, p1 - 1) // (1)\n    quicksort(A, p2 + 1, hi) // (2)\n</code></pre>\n\n<p>Now, consider the <em>very worst</em> case. We have an array that looks like <code>[0,1,2,3,4,5,6,6,6,6...]</code> and our pivot selection algorithm is as dumb as possible: it picks the pivots in strictly increasing order. In this case, the first recursive call (<code>(1)</code> above) will always do nothing because there will be nothing smaller than the pivot. So we're only ever dealing with one single recursive call - of size <code>N - 1</code>. </p>\n\n<p>Each recursive call reduces the problem size by one, until the 7th recursive call (which will pick the <code>6</code> pivot) - that one completes the sort. This is the key step in only having 7 distinct keys - you only need at most 7 calls. Each of those 7 calls iterates the entire array... that's <code>O(7N) == O(N)</code>. More generally, if there are only <code>k</code> distinct keys, you can say that the worst case is <code>O(kN)</code> from the same argument. </p>\n"}], "owner": {"reputation": 107, "user_id": 3919258, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/1e9fd12a0a49fc5470d9156255876af2?s=128&d=identicon&r=PG", "display_name": "user96454", "link": "https://stackoverflow.com/users/3919258/user96454"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 1, "accepted_answer_id": 31033356, "answer_count": 1, "score": 1, "last_activity_date": 1435170421, "creation_date": 1435165940, "last_edit_date": 1435170421, "question_id": 31032889, "link": "https://stackoverflow.com/questions/31032889/quicksort-q-finitely-many-distinct-keys", "title": "Quicksort Q: Finitely many distinct keys", "body": "<p>Need to show that a quicksort with a special partitioning, where an array gets partitioned into 3 parts (&lt; than 3 pivot, = to pivot, > than pivot) and a special array of size N where only 7 distinct keys are possible can be sorted in O(N). </p>\n\n<p>So, I suppose we can assume the pivot is being chosen somewhere in the middle (otherwise we could have something like [0, 1, 2, 3, 4, 5, 6, 6, 6, 6, .....] and that should take O(N^2)). </p>\n\n<p>Here is what I am thinking:<br>\nSuppose we did the first partitioning.  Now we move to the recursive step 2. Suppose we only focus on the right partition. Since every element here is greater than the pivot, and there were only 7 distinct keys, the number of distinct keys in this partition is strictly less than 7. This implies that after 7 iterations of the algorithm, all elements in the left and right sub-sub-...-partitions should be the same. </p>\n\n<p>Now, I can see how this would be O(N) if the algorithms stopped recurring on a constant array, but my understanding is that it doesn't.  Please clarify this if its not the case. </p>\n\n<p>So what's going on here? </p>\n"}, {"tags": ["c++", "polymorphism", "shared-ptr", "virtual-functions"], "comments": [{"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 0, "creation_date": 1435165528, "post_id": 31032707, "comment_id": 50089931, "body": "how A(A&amp;&amp;) is implemented? Also - as long as method does not touch anything &#39;around&#39; this it might not segfault, as no &#39;bad&#39; memory is touched."}, {"owner": {"reputation": 11, "user_id": 5045564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd47dde5cfde2215219fd83c965a2d1?s=128&d=identicon&r=PG&f=1", "display_name": "djs", "link": "https://stackoverflow.com/users/5045564/djs"}, "reply_to_user": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 0, "creation_date": 1435165635, "post_id": 31032707, "comment_id": 50089995, "body": "That function actually isn&#39;t called at all, I put a cout statement inside it and it is never called.  However it still causes a segfault when <code>A theA(makeanA()) </code> is used in place of the first two lines of main.  Will add to post."}, {"owner": {"reputation": 1837, "user_id": 1143140, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/66L35.jpg?s=128&g=1", "display_name": "A.sharif", "link": "https://stackoverflow.com/users/1143140/a-sharif"}, "edited": false, "score": 1, "creation_date": 1435165753, "post_id": 31032707, "comment_id": 50090073, "body": "Why are you returning &quot;A&quot; in method &quot;makeanA()&quot;? Shouldn&#39;t you be returning temp?"}, {"owner": {"reputation": 11, "user_id": 5045564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd47dde5cfde2215219fd83c965a2d1?s=128&d=identicon&r=PG&f=1", "display_name": "djs", "link": "https://stackoverflow.com/users/5045564/djs"}, "edited": false, "score": 0, "creation_date": 1435165819, "post_id": 31032707, "comment_id": 50090117, "body": "typo, sorry about that"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 2, "creation_date": 1435165860, "post_id": 31032707, "comment_id": 50090139, "body": "We need a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example.</a>. This code doesn&#39;t compile on it&#39;s own."}, {"owner": {"reputation": 11, "user_id": 5045564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd47dde5cfde2215219fd83c965a2d1?s=128&d=identicon&r=PG&f=1", "display_name": "djs", "link": "https://stackoverflow.com/users/5045564/djs"}, "edited": false, "score": 0, "creation_date": 1435165920, "post_id": 31032707, "comment_id": 50090175, "body": "ok, I am going to try to reproduce this and will close this question"}, {"owner": {"reputation": 604, "user_id": 1575991, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8f033d419fc2e4c833e633ab5fd20794?s=128&d=identicon&r=PG", "display_name": "Shokwav", "link": "https://stackoverflow.com/users/1575991/shokwav"}, "edited": false, "score": 0, "creation_date": 1435166754, "post_id": 31032707, "comment_id": 50090700, "body": "I didn&#39;t get any segmentation fault when I attempted to recreate this."}, {"owner": {"reputation": 11, "user_id": 5045564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd47dde5cfde2215219fd83c965a2d1?s=128&d=identicon&r=PG&f=1", "display_name": "djs", "link": "https://stackoverflow.com/users/5045564/djs"}, "edited": false, "score": 0, "creation_date": 1435167072, "post_id": 31032707, "comment_id": 50090889, "body": "yeah, I&#39;m attempting to recreate it outside of the initial code and can&#39;t get the segfault, my bad"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5045564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd47dde5cfde2215219fd83c965a2d1?s=128&d=identicon&r=PG&f=1", "display_name": "djs", "link": "https://stackoverflow.com/users/5045564/djs"}, "is_accepted": false, "score": 0, "last_activity_date": 1435926130, "creation_date": 1435926130, "answer_id": 31206778, "question_id": 31032707, "link": "https://stackoverflow.com/questions/31032707/c-shared-ptr-segfaults-on-virtual-method-call-but-not-dereference/31206778#31206778", "title": "C++: Shared_Ptr segfaults on virtual method call, but not dereference", "body": "<p>So it ended up that my error was dealing with a dynamic/shared library.  I opened the library within a function other than my main, so when the function returned, its attempts to find the virtual table resulted in a segfault</p>\n"}], "owner": {"reputation": 11, "user_id": 5045564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd47dde5cfde2215219fd83c965a2d1?s=128&d=identicon&r=PG&f=1", "display_name": "djs", "link": "https://stackoverflow.com/users/5045564/djs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435926130, "creation_date": 1435165309, "last_edit_date": 1435165865, "question_id": 31032707, "link": "https://stackoverflow.com/questions/31032707/c-shared-ptr-segfaults-on-virtual-method-call-but-not-dereference", "title": "C++: Shared_Ptr segfaults on virtual method call, but not dereference", "body": "<p>Currently my code looks like this:</p>\n\n<pre><code>class A\n{\n    public:\n    //A(A&amp;&amp;);\n    A&amp; operator=(const A&amp;);\n    std::vector&lt;std::shared_ptr&lt;B&gt;&gt; myVec;\n\n    int accessMyFunc() {\n        return myVec[0]-&gt;myFunc();\n    }\n}\n\nclass B\n{\n    public:\n    virtual ~B();\n    virtual  int myFunc() const = 0;\n}\n\nclass C : public B\n{\n    public:\n    virtual int myFunc() const override {/* do stuff*/}\n}\n\nA makeanA()\n{\n    A temp;\n    temp.myVec.emplace_back(new C)\n    return temp;\n}\n</code></pre>\n\n<p>When I run this main </p>\n\n<pre><code>int main()\n{\n    A theA;\n    theA = makeanA();\n    theA.accessMyFunc();\n}\n</code></pre>\n\n<p>I get a segfault from the -> within accessMyFunc.  However, <code>*myVec[0]</code> does not segfault, and I have checked within the assignment constructor for A that the shared_ptrs are being copied properly.  Why would this segfault be occurring not on dereference, but on the method call?  Especially when the assignment constructor verifies that the shared_ptr of the lhs and the rhs both point to the same spot?</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["c++", "kinect"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435164688, "post_id": 31032467, "comment_id": 50089393, "body": "<i>&quot;but I don&#39;t seem to have access to it&quot;</i> Sample code and error messages please, or it didn&#39;t happen."}, {"owner": {"reputation": 213, "user_id": 2920867, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95c6378c25b86043da8284b90e97f4b4?s=128&d=identicon&r=PG&f=1", "display_name": "CVirtuous", "link": "https://stackoverflow.com/users/2920867/cvirtuous"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435164982, "post_id": 31032467, "comment_id": 50089581, "body": "Sorry, I added an example of the error."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435165102, "post_id": 31032467, "comment_id": 50089652, "body": "Is it used the same way as in the samples you had compiled successfully? Does your project have all the same settings (include and library paths)? Is it an intellisense error only or doesn&#39;t the project compile? For the latter case, compile your project once, to update the indexer."}, {"owner": {"reputation": 213, "user_id": 2920867, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95c6378c25b86043da8284b90e97f4b4?s=128&d=identicon&r=PG&f=1", "display_name": "CVirtuous", "link": "https://stackoverflow.com/users/2920867/cvirtuous"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435165741, "post_id": 31032467, "comment_id": 50090058, "body": "Compilation gives the same error. Other project settings are the same as far as I can tell."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1435165870, "post_id": 31032467, "comment_id": 50090145, "body": "Some <code>#define</code> (<code>-D</code> option) missing to activate the <code>WindowsPreview</code> may be? The information you give in your question isn&#39;t really sufficient to diagnose your error."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1435191732, "post_id": 31032467, "comment_id": 50102262, "body": "@CVirtuous: Namespaces have nothing to do with libraries (i.e. .lib files), they are supposed to be defined in plain text, openly in header files. So, all you need to do is search through your header files for the definition of <code>WindowsPreview::Kinect</code> namespace. If it is not there, then it won&#39;t work. If it is there, you will see what else is necessary (like a <code>#define something</code> or such)."}], "answers": [{"comments": [{"owner": {"reputation": 213, "user_id": 2920867, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95c6378c25b86043da8284b90e97f4b4?s=128&d=identicon&r=PG&f=1", "display_name": "CVirtuous", "link": "https://stackoverflow.com/users/2920867/cvirtuous"}, "edited": false, "score": 0, "creation_date": 1435249397, "post_id": 31038462, "comment_id": 50132729, "body": "Thank you this is what I was looking for."}], "tags": [], "owner": {"reputation": 164, "user_id": 4941240, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QNpqsLRToaw/AAAAAAAAAAI/AAAAAAAAAMA/to7h7iMzWrY/photo.jpg?sz=128", "display_name": "GregT-MN", "link": "https://stackoverflow.com/users/4941240/gregt-mn"}, "is_accepted": true, "score": 2, "last_activity_date": 1600500172, "last_edit_date": 1600500172, "creation_date": 1435186147, "answer_id": 31038462, "question_id": 31032467, "link": "https://stackoverflow.com/questions/31032467/how-to-access-windowspreview-namespace/31038462#31038462", "title": "How to access &#39;WindowsPreview&#39; namespace?", "body": "<p>WindowsPreview::Kinect is the namespace when using the Kinect API for the Windows Store, the other APIs use Microsoft::Kinect.</p>\n<p>Found a mention of the namespaces in one of the videos: <a href=\"https://channel9.msdn.com/Series/Programming-Kinect-for-Windows-v2/02\" rel=\"nofollow noreferrer\">Kinect Data Sources and Programming Model</a> (starts at 20:00)</p>\n<blockquote>\n<p>Rob: In the store APIs, the namespace is WindowsPreview.Kinect?<br />\nJesse: (Yes)<br />\nRob: Can you talk about the other APIs?<br />\nJesse: In the other APIs, the namespace is Microsoft.Kinect, the WindowsPreview namespace is indicating that we are previewing the WinRT APIs for further inclusion in some form of Windows down the road.</p>\n</blockquote>\n<p>It appears to be listed as WindowsPreview.Kinect in the <a href=\"https://msdn.microsoft.com/en-us/library/windowspreview.kinect.kinectsensor.aspx\" rel=\"nofollow noreferrer\">documentation</a> but in my code (not targetting the Windows store) it shows up as Microsoft.Kinect:<img src=\"https://i.stack.imgur.com/EKo02.png\" alt=\"enter image description here\" />\nIn my opinion, this is something that could be more clearly documented, but it is possible I'm just not looking in the right places.</p>\n"}], "owner": {"reputation": 213, "user_id": 2920867, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95c6378c25b86043da8284b90e97f4b4?s=128&d=identicon&r=PG&f=1", "display_name": "CVirtuous", "link": "https://stackoverflow.com/users/2920867/cvirtuous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 31038462, "answer_count": 1, "score": -1, "last_activity_date": 1600500172, "creation_date": 1435164580, "last_edit_date": 1435165126, "question_id": 31032467, "link": "https://stackoverflow.com/questions/31032467/how-to-access-windowspreview-namespace", "title": "How to access &#39;WindowsPreview&#39; namespace?", "body": "<p>I am trying to work with a kinect 2 in c++. All the code samples I have seen use the WindowsPreview namespace but I don't seem to have access to it. I have the SDK (code samples run fine). I have correctly linked to the Kinect.h and kinect20.lib files. Can someone help me out? </p>\n\n<p><img src=\"https://i.stack.imgur.com/x1xIx.png\" alt=\"example of the error\"></p>\n"}, {"tags": ["c++", "visual-studio-2008", "windows-ce", "bsp"], "owner": {"reputation": 45, "user_id": 4650538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cdfa20e61b757038596266be9ce39de?s=128&d=identicon&r=PG&f=1", "display_name": "mdavid", "link": "https://stackoverflow.com/users/4650538/mdavid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435164137, "creation_date": 1435164137, "question_id": 31032322, "link": "https://stackoverflow.com/questions/31032322/how-to-wake-up-resume-after-calling-setsystempowerstate-in-wince-7", "title": "How to wake-up/resume after calling SetSystemPowerState in WINCE 7", "body": "<p>We are currently changing the state of our device to suspend using SetSystemPowerState(NULL, POWER_STATE_SUSPEND, POWER_FORCE) so we can save power when the system is not acquiring any readings. The problem is that after suspending the device using SetSystemPowerState in our application, we are not able to wake it up with a touch in screen, home key or interrupt signal. How we can set the system up to wake up on a touch screen event or interrupt signal? Do we have to modify the registers?</p>\n\n<p>We are currently using WINCE 7 and VS 2008. Our processor is an iMX53.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "csv"], "comments": [{"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "edited": false, "score": 2, "creation_date": 1435163848, "post_id": 31032157, "comment_id": 50088859, "body": "C++ in Visual Basic 2008? What does that mean?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1435163923, "post_id": 31032157, "comment_id": 50088919, "body": "Spit the output into error-logs and statistics and merge these files finally."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "reply_to_user": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "edited": false, "score": 0, "creation_date": 1435163952, "post_id": 31032157, "comment_id": 50088932, "body": "It&#39;s some kind of elvish... @JonathanWood"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1435168838, "post_id": 31032157, "comment_id": 50092010, "body": "Please look up the following: <code>rewind()</code>, <code>ostream::seekp</code>, <code>ostream::tellp</code>."}, {"owner": {"reputation": 11, "user_id": 5045498, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205774652700126/picture?type=large", "display_name": "Thy Dai", "link": "https://stackoverflow.com/users/5045498/thy-dai"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1435181085, "post_id": 31032157, "comment_id": 50098744, "body": "@ThomasMatthews: Hi Thomas! Thanks for your suggestion! I tried all those functions and for some reason, it only prints it after everything. I tried rewind(m_pDlg-&gt;sumLog) and it prints the next thing at the end. Then, fseek(m_pDlg-&gt;sumLog, 0, SEEK_SET) and still the same affect."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5045498, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205774652700126/picture?type=large", "display_name": "Thy Dai", "link": "https://stackoverflow.com/users/5045498/thy-dai"}, "edited": false, "score": 0, "creation_date": 1435164406, "post_id": 31032311, "comment_id": 50089222, "body": "This is a great suggestion! Thank you! However, I was wondering what would happen if I left a space at the top of the file for it to be overwritten?"}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 11, "user_id": 5045498, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205774652700126/picture?type=large", "display_name": "Thy Dai", "link": "https://stackoverflow.com/users/5045498/thy-dai"}, "edited": false, "score": 0, "creation_date": 1435167499, "post_id": 31032311, "comment_id": 50091159, "body": "Yes, that approach would work. It&#39;s just that A) You need to make sure you leave enough spaces, and B) To do that, you&#39;ll probably have too many so that your data has a bunch of spaces in it."}], "tags": [], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "is_accepted": false, "score": 0, "last_activity_date": 1435164081, "creation_date": 1435164081, "answer_id": 31032311, "question_id": 31032157, "link": "https://stackoverflow.com/questions/31032157/how-to-redirect-to-the-top-of-a-csv-file-using-setfilepointer/31032311#31032311", "title": "How to redirect to the top of a .csv file using SetFilePointer", "body": "<p>Are you asking how to write new data at the top of the file after the file already has content?</p>\n\n<p>If so, the answer is that trying to insert data anywhere but the end of the file is horribly inefficient. Basically, you'd need to shift every byte after the insertion point to a lower position in the file. This involves reading and rewriting each byte in a very complex way.</p>\n\n<p>So the best solution is to write your new content to a new file, and then copy the original file to the new file, after your new content. That is much more efficient and easier to implement.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1435164121, "creation_date": 1435164121, "answer_id": 31032319, "question_id": 31032157, "link": "https://stackoverflow.com/questions/31032157/how-to-redirect-to-the-top-of-a-csv-file-using-setfilepointer/31032319#31032319", "title": "How to redirect to the top of a .csv file using SetFilePointer", "body": "<p>You cannot simply insert such variable length data to the start of an already opened file. You'll need a different approach:</p>\n\n<ol>\n<li>You read in the <code>.csv</code> skipping the statistics line, and move it to a backup file.</li>\n<li>You calculate the new statistics based on what was read in in step 1.</li>\n<li>You reopen the <code>.csv</code> file as output print the header and statistics first, and afterwards print all of the other data lines that were used to calculate the statistics</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 5045498, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205774652700126/picture?type=large", "display_name": "Thy Dai", "link": "https://stackoverflow.com/users/5045498/thy-dai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1435178504, "creation_date": 1435163650, "last_edit_date": 1435178504, "question_id": 31032157, "link": "https://stackoverflow.com/questions/31032157/how-to-redirect-to-the-top-of-a-csv-file-using-setfilepointer", "title": "How to redirect to the top of a .csv file using SetFilePointer", "body": "<p>Basically, I'm creating an error log for a series of test to be ran that records failures and successes. The error log is a <strong>.csv</strong> file. Basically, the program is taking a list of tests and they are named #testlist.txt for example. Within each #testlist.txt is a series of tests.</p>\n\n<p>For example,</p>\n\n<p>#testlist.txt contains:</p>\n\n<p>Test1.txt</p>\n\n<p>Test2.txt</p>\n\n<p>Test3.txt</p>\n\n<p>Within Test1.txt, there are 3 subtests. These subtests can fail or succeed; hence, the success and failure rate. So what this error log reports is the statistics for each Test, and also a global success and failure rate for all the tests with the #testlist.</p>\n\n<p>My assignment is to have the statistics of the #testlist at the top of the list instead of at the bottom. <strong>The problem is:</strong> I don't know how to redirect to the top of the file after all the individual test statistics have been printed to print the global statistics to the .csv file.</p>\n\n<p>I am using <em>C++</em> in <em>Visual Basic 2008</em>. Any suggestions would be extremely helpful! Thank you so much!</p>\n\n<h1>Update:</h1>\n\n<p>So this may seem like a dumb question, but I went to MSDN to look up SetFilePointer which is what my colleague suggested I try, but it wasn't making sense as to why it wasn't working in my code.</p>\n\n<pre><code>if (SetFilePointer(m_pDlg-&gt;sumLog,0,NULL,FILE_BEGIN) != INVALID_SET_FILE_POINTER){\n        fprintf(m_pDlg-&gt;sumLog, \"\\n\\n%s,%s,%d,%d,%d,%0.2f%%,%0.2f%%\", pDlg-&gt;testlistFileName, s, m_pDlg-&gt;m_uiValTotal, \n            m_pDlg-&gt;m_uiValPassed, m_pDlg-&gt;m_uiValFailedGlobal,\n            m_pDlg-&gt;getSuccessRate(m_pDlg-&gt;m_uiValTotal, m_pDlg-&gt;m_uiValPassed),\n            m_pDlg-&gt;getFailureRate(m_pDlg-&gt;m_uiValTotal, m_pDlg-&gt;m_uiValFailedGlobal));\n    }\n</code></pre>\n\n<p>Perhaps I'm understanding this method wrong and if anyone could shed some light on this and help me to get this working, that'd be greatly appreciated!</p>\n\n<p><strong>The problem:</strong> SetFilePointer is always equal to INVALID_SET_FILE_POINTER.</p>\n\n<p>Some more information:</p>\n\n<pre><code>m_pDlg-&gt;sumLog\n</code></pre>\n\n<p>This is the name of the file I'm writing to. At the end of this file (maybe about 1GB of data), I'm trying to get to the beginning to insert this line.\nI've declared it as</p>\n\n<pre><code>FILE* sumLog;\n</code></pre>\n\n<p>If more information is needed, I will be happy to provide.</p>\n\n<p>Again, thank you so much!</p>\n"}, {"tags": ["c++", "visual-studio-2010", "boost", "dll", "nuget"], "comments": [{"owner": {"reputation": 5987, "user_id": 1577580, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/u6PCt.jpg?s=128&g=1", "display_name": "Gilad", "link": "https://stackoverflow.com/users/1577580/gilad"}, "edited": false, "score": 0, "creation_date": 1435167262, "post_id": 31032070, "comment_id": 50091002, "body": "Post build script is your friend"}, {"owner": {"reputation": 997, "user_id": 683983, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0cffce97129a3844d3645d571b0eefb8?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/683983/christian"}, "reply_to_user": {"reputation": 5987, "user_id": 1577580, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/u6PCt.jpg?s=128&g=1", "display_name": "Gilad", "link": "https://stackoverflow.com/users/1577580/gilad"}, "edited": false, "score": 1, "creation_date": 1435168957, "post_id": 31032070, "comment_id": 50092078, "body": "Yes, I have mentioned that in my question - I have called it step instead of script. But it is not a really slick solution."}], "answers": [{"comments": [{"owner": {"reputation": 997, "user_id": 683983, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0cffce97129a3844d3645d571b0eefb8?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/683983/christian"}, "edited": false, "score": 0, "creation_date": 1458415734, "post_id": 36106027, "comment_id": 59854313, "body": "Thanks for sharing your idea. IMHO copying using an xcopy command or an MSBuild task is not much different. You already mentioned the main drawback to hard-code the versions and names is required. I was searching for a way that the information is propagated automatically from nuget."}], "tags": [], "owner": {"reputation": 41, "user_id": 2344281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/657450eb5a472401279cd8d0d113eeae?s=128&d=identicon&r=PG", "display_name": "Chris Bechette", "link": "https://stackoverflow.com/users/2344281/chris-bechette"}, "is_accepted": false, "score": 1, "last_activity_date": 1458414936, "creation_date": 1458414936, "answer_id": 36106027, "question_id": 31032070, "link": "https://stackoverflow.com/questions/31032070/copy-nuget-boost-dll-to-automatically-to-the-output-directory/36106027#36106027", "title": "Copy NuGet Boost DLL to automatically to the Output directory", "body": "<p>I used MSBuild's copy task for this exact purpose: </p>\n\n<pre><code>&lt;PropertyGroup Condition=\"'$(Configuration)'=='Debug'\"&gt;\n  &lt;BoostRT&gt;-gd&lt;/BoostRT&gt;\n&lt;/PropertyGroup&gt;\n&lt;PropertyGroup Condition=\"'$(Configuration)'=='Release' Or '$(Configuration)'=='Release_withPDB'\"&gt;\n  &lt;BoostRT&gt;&lt;/BoostRT&gt;\n&lt;/PropertyGroup&gt;\n&lt;ItemGroup&gt;\n&lt;BoostDlls Include=\"..\\packages\\boost_log-vc120.1.59.0.0\\lib\\native\\address-model-$(PlatformArchitecture)\\lib\\boost_log-vc120-mt$(BoostRT)-1_59.dll;\n  ..\\packages\\boost_thread-vc120.1.59.0.0\\lib\\native\\address-model-$(PlatformArchitecture)\\lib\\boost_thread-vc120-mt$(BoostRT)-1_59.dll;\n  ..\\packages\\boost_system-vc120.1.59.0.0\\lib\\native\\address-model-$(PlatformArchitecture)\\lib\\boost_system-vc120-mt$(BoostRT)-1_59.dll;\n  ..\\packages\\boost_chrono-vc120.1.59.0.0\\lib\\native\\address-model-$(PlatformArchitecture)\\lib\\boost_chrono-vc120-mt$(BoostRT)-1_59.dll;\n  ..\\packages\\boost_date_time-vc120.1.59.0.0\\lib\\native\\address-model-$(PlatformArchitecture)\\lib\\boost_date_time-vc120-mt$(BoostRT)-1_59.dll;\n  ..\\packages\\boost_filesystem-vc120.1.59.0.0\\lib\\native\\address-model-$(PlatformArchitecture)\\lib\\boost_filesystem-vc120-mt$(BoostRT)-1_59.dll\" /&gt;\n&lt;/ItemGroup&gt;\n&lt;Target Name=\"CopyFiles\" AfterTargets=\"Build\"&gt;\n  &lt;Copy SourceFiles=\"@(BoostDlls)\" DestinationFolder=\"$(OutDir)\" /&gt;\n&lt;/Target&gt;\n</code></pre>\n\n<p>Hardcoding the boost lib version (1.59) is not awesome but other than that it works well. </p>\n"}], "owner": {"reputation": 997, "user_id": 683983, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0cffce97129a3844d3645d571b0eefb8?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/683983/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1458414936, "creation_date": 1435163406, "last_edit_date": 1495540899, "question_id": 31032070, "link": "https://stackoverflow.com/questions/31032070/copy-nuget-boost-dll-to-automatically-to-the-output-directory", "title": "Copy NuGet Boost DLL to automatically to the Output directory", "body": "<p>I am using several Boost libraries in my C++ project. The libraries are acquired through NuGet packages, e.g. the Boost Thread library <a href=\"https://www.nuget.org/packages/boost_thread/\" rel=\"nofollow noreferrer\">boost_thread</a>.</p>\n\n<p>Compiling and linking works without any changes to the project properties. But debugging and running the application fails due to missing DLLs in the output directory.</p>\n\n<p>One solution is to use the post build step copying the required DLLs. This is described at other places, e.g. <a href=\"https://stackoverflow.com/questions/1776060/how-to-make-visual-studio-copy-dll-to-output-directory\">how to make visual studio copy dll to output directory?</a>.</p>\n\n<p>This is an example for the required copy command in the Debug configuration: </p>\n\n<pre><code>xcopy /F /Y \"$(SolutionDir)\\packages\\boost_regex-vc100.1.58.0.0\\lib\\native\\address-model-32\\lib\\boost_regex-vc100-mt-gd-1_58.dll\" \"$(OutDir)\"\n</code></pre>\n\n<p>The Project is Visual Studio 2010 project. But the IDE actually used is Visual Studio 2013.</p>\n\n<p>But is there a better way to achieve this?</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 3665, "user_id": 2502409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb7da4ea752f8cbe91601e127d3bccf?s=128&d=identicon&r=PG", "display_name": "Nazar554", "link": "https://stackoverflow.com/users/2502409/nazar554"}, "edited": false, "score": 0, "creation_date": 1435163538, "post_id": 31031962, "comment_id": 50088662, "body": "Are you using MSVC or MinGW compiler?"}, {"owner": {"reputation": 297, "user_id": 3147483, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/96b345235b18a75daf7c5727ac1a53d3?s=128&d=identicon&r=PG&f=1", "display_name": "jbcarpen", "link": "https://stackoverflow.com/users/3147483/jbcarpen"}, "reply_to_user": {"reputation": 3665, "user_id": 2502409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb7da4ea752f8cbe91601e127d3bccf?s=128&d=identicon&r=PG", "display_name": "Nazar554", "link": "https://stackoverflow.com/users/2502409/nazar554"}, "edited": false, "score": 0, "creation_date": 1435166197, "post_id": 31031962, "comment_id": 50090368, "body": "I&#39;m using MSVC (VS 2008 specifically)"}], "owner": {"reputation": 297, "user_id": 3147483, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/96b345235b18a75daf7c5727ac1a53d3?s=128&d=identicon&r=PG&f=1", "display_name": "jbcarpen", "link": "https://stackoverflow.com/users/3147483/jbcarpen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1435163138, "creation_date": 1435163119, "last_edit_date": 1435163138, "question_id": 31031962, "link": "https://stackoverflow.com/questions/31031962/vswprintf-unresolved-only-for-x64", "title": "_vswprintf unresolved only for x64", "body": "<p>I'm writing a right click context menu extension dll for Windows to support functionality in another program.</p>\n\n<p>It's building fine targeting Win32, but when I try to build for x64, I get this</p>\n\n<pre><code>error LNK2001: unresolved external symbol _vswprintf\n</code></pre>\n\n<p>I am not actually <em>calling</em> it anywhere in my code, so even if it is undefined, that shouldn't be a problem.  (I am including stdio.h, stdarg.h, and wchar.h though, so it <em>should</em> be defined.)</p>\n"}, {"tags": ["c++", "matlab", "matrix", "sparse-matrix", "eigen"], "comments": [{"owner": {"reputation": 513, "user_id": 2658323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fd58250dd25aa5f9edfeb265c8516299?s=128&d=identicon&r=PG", "display_name": "user2658323", "link": "https://stackoverflow.com/users/2658323/user2658323"}, "edited": false, "score": 0, "creation_date": 1435593395, "post_id": 31031958, "comment_id": 50253366, "body": "It is not clear to me what you are after.  That matlab code is dense, not sparse.  Do you want to prepare a sparse matrix in order to avoid insertion costs later given you know that there are at most 3 non-zeros by row?"}], "answers": [{"tags": [], "owner": {"reputation": 1108, "user_id": 1312729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a1a74acabea3fed98cbe62758627fc4?s=128&d=identicon&r=PG", "display_name": "d11", "link": "https://stackoverflow.com/users/1312729/d11"}, "is_accepted": false, "score": 0, "last_activity_date": 1448959016, "creation_date": 1448959016, "answer_id": 34015975, "question_id": 31031958, "link": "https://stackoverflow.com/questions/31031958/eigen-library-setting-all-non-zero-elements-in-a-sparsematrix-row-to-zero/34015975#34015975", "title": "Eigen Library: Setting all Non-Zero elements in a SparseMatrix *Row* to Zero", "body": "<p>The equivalent of the Matlab code above can be implemented using the setZero function, as follows:</p>\n\n<pre><code>A.row(i).setZero();\n</code></pre>\n\n<p>Note that this works for dense matrices, not sparse ones. The MatrixXd class is recommended if you want the size to be dynamic.</p>\n"}], "owner": {"reputation": 31, "user_id": 2231787, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/58721cc8d7242987d6adc5ee165181b6?s=128&d=identicon&r=PG", "display_name": "user2231787", "link": "https://stackoverflow.com/users/2231787/user2231787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 868, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448959016, "creation_date": 1435163106, "last_edit_date": 1495541712, "question_id": 31031958, "link": "https://stackoverflow.com/questions/31031958/eigen-library-setting-all-non-zero-elements-in-a-sparsematrix-row-to-zero", "title": "Eigen Library: Setting all Non-Zero elements in a SparseMatrix *Row* to Zero", "body": "<p>For a matrix A and row 'i' in MATLAB, I would do the following:</p>\n\n<pre><code>A(i,:) = zeros(size(A(i,:));\n</code></pre>\n\n<p>A stupid way to do the same would be to iterate through the whole row and setting the non-zero values to zero. This is not suitable as I am working with huge matrices (200,000+ columns) here.</p>\n\n<p>Is there a simple and fast way to do this? I am using the SparseMatrix class in Eigen. I also know that there are at most 3 non zero values in each row. I don't know where.</p>\n\n<p>I need this to edit a <em>few</em> rows in the matrix with new values. The idea is that I first make the whole row zero and then assign my values to certain elements on the same row.</p>\n\n<p>The following <a href=\"https://stackoverflow.com/questions/24707942/eigen-how-to-insert-a-sparsevector-into-a-sparsematrix-as-row-or-column\">question</a> on StackOverflow was relevant but unfortunately had no answers.</p>\n"}, {"tags": ["python", "c++", "macos", "gcc", "clang"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1435163559, "post_id": 31031921, "comment_id": 50088678, "body": "Python uses C, not C++.  That looks like C++ name mangling.  Is it C++?  I played with this a couple of days ago, not exactly the same, but look at :  <a href=\"http://stackoverflow.com/questions/30983220/ctypes-error-attributeerror-symbol-not-found-os-x-10-7-5/30983638#30983638\" title=\"ctypes error attributeerror symbol not found os x 10 7 5\">stackoverflow.com/questions/30983220/&hellip;</a>"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1435164650, "post_id": 31031921, "comment_id": 50089369, "body": "Is this one of your modules?"}, {"owner": {"reputation": 302, "user_id": 5023528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cf701e85043baac55166895b84734f?s=128&d=identicon&r=PG&f=1", "display_name": "user45254", "link": "https://stackoverflow.com/users/5023528/user45254"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1435164703, "post_id": 31031921, "comment_id": 50089404, "body": "@cdarke Ok, this is an excerpt of what I get with nm.  It seems to be undefined.  Do I still do what you suggest?  <code>0000000000072a60 S __ZTIN4util9ExceptionE U __ZTINSt8ios_base7failureB5cxx11E U __ZTISt11range_error</code>"}, {"owner": {"reputation": 302, "user_id": 5023528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cf701e85043baac55166895b84734f?s=128&d=identicon&r=PG&f=1", "display_name": "user45254", "link": "https://stackoverflow.com/users/5023528/user45254"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1435165016, "post_id": 31031921, "comment_id": 50089600, "body": "@cdarke So if I am reading this correctly, it is looking for the symbol in the CXX11 library right?"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1435215376, "post_id": 31031921, "comment_id": 50109119, "body": "I&#39;m fairly sure that <code>ios_base</code> is the C++ stream library (cout etc.), nothing to do with the iPhone operating system!   The point is, why is that module compiled n C++ and not C?"}], "owner": {"reputation": 302, "user_id": 5023528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cf701e85043baac55166895b84734f?s=128&d=identicon&r=PG&f=1", "display_name": "user45254", "link": "https://stackoverflow.com/users/5023528/user45254"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 672, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1435165535, "creation_date": 1435163005, "last_edit_date": 1435165535, "question_id": 31031921, "link": "https://stackoverflow.com/questions/31031921/python-not-importing-module-perhaps-gcc-being-used-to-compile-the-python-libra", "title": "python not importing module-- perhaps gcc being used to compile the python library instead of clang?", "body": "<p>Mac OSX here, Python 2.7.9 |Anaconda 2.2.0 (x86_64)|.  I'm trying to install a python module called, say, foo.  I run</p>\n\n<pre><code>python setup.py install\n</code></pre>\n\n<p>I get </p>\n\n<pre><code>running install\nrunning build\nrunning build_ext\nrunning install_lib\nrunning install_egg_info\nRemoving /Users/jir955/anaconda/lib/python2.7/site-packages/kenlm-0.0.0-py2.7.egg-info\nWriting /Users/jir955/anaconda/lib/python2.7/site-packages/kenlm-0.0.0-py2.7.egg-info\n</code></pre>\n\n<p>However, after </p>\n\n<pre><code>import foo\n</code></pre>\n\n<p>I get the error</p>\n\n<pre><code>  Traceback (most recent call last): File \"&lt;stdin&gt;\", \nline 1, in &lt;module&gt; ImportError: foo.so, 2):\n Symbol not found: __ZTINSt8ios_base7failureB5cxx11E\nReferenced from: foo.so Expected in: dynamic lookup\n</code></pre>\n\n<p>Errors in the past have occurred when I tried to compile something with gcc instead of clang.  (At some point I downloaded gcc on my own, for some reason, but then I brew uninstalled gcc.)  I have avoided the errors by sometimes adding -toolset=clang.  </p>\n\n<p>I have tried adding </p>\n\n<pre><code> os.environ[\"CC\"] = \"/usr/bin/clang\"\n os.environ[\"CXX\"] = \"/usr/bin/clang\"\n</code></pre>\n\n<p>to setup.py, and also modifying bashrc to include</p>\n\n<pre><code>export CC=/usr/bin/clang\nexport CXX=/usr/bin/clang++\n</code></pre>\n\n<p>But these things have not worked.  One person I talked to suggested that the problem was that I compiled python libraries using gcc instead of clang, but if this is the case I don't know how how to fix that either.</p>\n\n<p>Edit: with </p>\n\n<pre><code>nm foo.so\n</code></pre>\n\n<p>an excerpt of what I get is </p>\n\n<pre><code>0000000000072a60 S __ZTIN4util9ExceptionE\nU __ZTINSt8ios_base7failureB5cxx11E\nU __ZTISt11range_error\n</code></pre>\n"}, {"tags": ["c++", "random"], "comments": [{"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 3, "creation_date": 1435162867, "post_id": 31031797, "comment_id": 50088249, "body": "Why do you seed twice?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1435162890, "post_id": 31031797, "comment_id": 50088266, "body": "Using <code>std::rand</code> is your problem. <b>Don&#39;t</b>. <a href=\"http://dilbert.com/strip/2001-10-25\" rel=\"nofollow noreferrer\">It&#39;s basically junk</a>. Use a <a href=\"http://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">proper random number generator</a>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1435163041, "post_id": 31031797, "comment_id": 50088375, "body": "@ScottHunter I amended that comment to a link with a dozen different methods. <code>rand()</code> has long been known to be virtually useless. Unless you really do not care about how random your numbers are, use a proper library."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1435164095, "post_id": 31031797, "comment_id": 50089031, "body": "<a href=\"http://assets.amuniversal.com/321a39e06d6401301d80001dd8b71c47\" rel=\"nofollow noreferrer\">I don&#39;t see the problem</a>."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1435164365, "post_id": 31031797, "comment_id": 50089197, "body": "Meditate on this: Any algorithm that is always guaranteed to produce the same output from the same input is deterministic. Deterministic algorithms cannot output any more randomness than is fed into them."}], "answers": [{"tags": [], "owner": {"reputation": 40, "user_id": 5045535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45858f7e83ce973172febeb100ea33fe?s=128&d=identicon&r=PG", "display_name": "Melenor", "link": "https://stackoverflow.com/users/5045535/melenor"}, "is_accepted": true, "score": 3, "last_activity_date": 1435163664, "creation_date": 1435163664, "answer_id": 31032162, "question_id": 31031797, "link": "https://stackoverflow.com/questions/31031797/my-c-random-number-is-not-random/31032162#31032162", "title": "my c++ random number is not random", "body": "<p>You Problem is the rand() function of the cstdlib. It is no good random number generator. If you want to use proper random numbers in c++ use some from the  header from c++-11 or external random number generators (e.g. mersenne twister).\nBut nonetheless, using random numbers in for parallel programs is no easy task. You should use random number generators, which are specialised on that (e.g. r250_omp.h).</p>\n"}, {"tags": [], "owner": {"reputation": 27634, "user_id": 1576602, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d5132c0e702c0b50cac6aa7c56d191f?s=128&d=identicon&r=PG", "display_name": "Andrzej Pronobis", "link": "https://stackoverflow.com/users/1576602/andrzej-pronobis"}, "is_accepted": false, "score": 1, "last_activity_date": 1435164089, "last_edit_date": 1495541176, "creation_date": 1435164089, "answer_id": 31032312, "question_id": 31031797, "link": "https://stackoverflow.com/questions/31031797/my-c-random-number-is-not-random/31032312#31032312", "title": "my c++ random number is not random", "body": "<p>The problem is likely to be caused by your <code>rand</code>. See the discussion and answers for this question: <a href=\"https://stackoverflow.com/questions/30430137/first-random-number-is-always-smaller-than-rest/30430614#30430614\">First random number is always smaller than rest</a></p>\n\n<p>It seems that the generated numbers for neighboring seeds (your case) can be quite heavily correlated. rand's implementations might vary, and for some implementations it seems to be a much more pronounced phenomena.</p>\n"}, {"tags": [], "owner": {"reputation": 613, "user_id": 3642532, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ITT2n.jpg?s=128&g=1", "display_name": "Mattia Merlini", "link": "https://stackoverflow.com/users/3642532/mattia-merlini"}, "is_accepted": false, "score": 0, "last_activity_date": 1435432948, "creation_date": 1435432948, "answer_id": 31092652, "question_id": 31031797, "link": "https://stackoverflow.com/questions/31031797/my-c-random-number-is-not-random/31092652#31092652", "title": "my c++ random number is not random", "body": "<p>I think your random gen should be like this:</p>\n\n<pre><code>int max=100, min=0;\nsrand(time(NULL));\nint random = (rand() % (max-min)) + min;\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 4844581, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b0c56cc6361761b3d349758682723acb?s=128&d=identicon&r=PG&f=1", "display_name": "wasabi123", "link": "https://stackoverflow.com/users/4844581/wasabi123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 31032162, "answer_count": 3, "score": 3, "last_activity_date": 1435432948, "creation_date": 1435162635, "question_id": 31031797, "link": "https://stackoverflow.com/questions/31031797/my-c-random-number-is-not-random", "title": "my c++ random number is not random", "body": "<p>I am running this</p>\n\n<pre><code>#include &lt;boost/mpi.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cstdlib&gt;\n#include &lt;time.h&gt;\nnamespace mpi = boost::mpi;\n\nint main()\n{\n    mpi::environment env;\n    mpi::communicator world;\n\n\n\n    srand (time(NULL));\n    std::srand(time(0) + world.rank());\n    int my_number = std::rand();\n    if (world.rank() == 0) {\n        std::vector&lt;int&gt; all_numbers;\n        gather(world, my_number, all_numbers, 0);\n        for (int proc = 0; proc &lt; world.size(); ++proc)\n            std::cout &lt;&lt; \"Process #\" &lt;&lt; proc &lt;&lt; \" thought of \"\n            &lt;&lt; all_numbers[proc] &lt;&lt; std::endl;\n    } else {\n        gather(world, my_number, 0);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>to distributively generate random number, however, it gives me the number around the same magnitude everytime.... </p>\n\n<pre><code>dhcp-18-189-66-216:ising2 myname$ make\nmpic++ -I/usr/local/include/boost -L/usr/local/lib -lboost_mpi -lboost_serialization main.cpp -o main\nmpirun -n 4 main\nProcess #0 thought of 238772362\nProcess #1 thought of 238789169\nProcess #2 thought of 238805976\nProcess #3 thought of 238822783\ndhcp-18-189-66-216:ising2 myname$ make\nmpic++ -I/usr/local/include/boost -L/usr/local/lib -lboost_mpi -lboost_serialization main.cpp -o main\nmpirun -n 4 main\nProcess #0 thought of 238805976\nProcess #1 thought of 238822783\nProcess #2 thought of 238839590\nProcess #3 thought of 238856397\ndhcp-18-189-66-216:ising2 myname$ make\nmpic++ -I/usr/local/include/boost -L/usr/local/lib -lboost_mpi -lboost_serialization main.cpp -o main\nmpirun -n 4 main\nProcess #0 thought of 238856397\nProcess #1 thought of 238873204\nProcess #2 thought of 238890011\nProcess #3 thought of 238906818\ndhcp-18-189-66-216:ising2 myname$ \n</code></pre>\n\n<p>In the website, <a href=\"http://www.boost.org/doc/libs/1_55_0/doc/html/mpi/tutorial.html\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_55_0/doc/html/mpi/tutorial.html</a> , others said they get:</p>\n\n<pre><code>Process #0 thought of 332199874\nProcess #1 thought of 20145617\nProcess #2 thought of 1862420122\nProcess #3 thought of 480422940\nProcess #4 thought of 1253380219\nProcess #5 thought of 949458815\nProcess #6 thought of 650073868\n</code></pre>\n\n<p>I am very confused.... Any help? Thank you.</p>\n"}, {"tags": ["c++", "c", "memory", "malloc", "heap"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 6, "creation_date": 1435162871, "post_id": 31031742, "comment_id": 50088254, "body": "Yes, malloc has overhead. That&#39;s completely implementation-specific. But in general your program will be more memory-efficient if it uses fewer large allocations rather than many small allocations."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1435162996, "post_id": 31031742, "comment_id": 50088336, "body": "It&#39;s implementation defined. However, in any case there is some overhead to manage the allocated memory. You may start reading at: <a href=\"https://en.wikipedia.org/?title=Memory_management\" rel=\"nofollow noreferrer\">en.wikipedia.org/?title=Memory_management</a>"}, {"owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "edited": false, "score": 0, "creation_date": 1435170296, "post_id": 31031742, "comment_id": 50092752, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/1119134/how-do-malloc-and-free-work\">How do malloc() and free() work?</a>"}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1435172526, "post_id": 31031742, "comment_id": 50094065, "body": "While the question is basically the same, the answers have less exposition over there than here."}], "answers": [{"tags": [], "owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "is_accepted": false, "score": 1, "last_activity_date": 1435162695, "creation_date": 1435162695, "answer_id": 31031821, "question_id": 31031742, "link": "https://stackoverflow.com/questions/31031742/malloc-and-heap-extra-memory-for-storing-the-size-and-linked-list-information/31031821#31031821", "title": "malloc and heap: extra memory for storing the size and linked list information?", "body": "<p>Yes, it is possible for an implementation of <code>malloc</code> to actually allocate a little more memory than what you requested, store the size of the allocated memory at the start of the allocated memory, then give you a pointer to the immediate next memory address. When you call <code>free</code> on that pointer, the allocator will go back a little, read the size of the buffer, and figure out how much it needs to actually release.</p>\n\n<p>But of course, another possible implementation could keep a list, or a dictionary, or do something entirely different under the hood, as long as it gives you the same specified behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 2, "last_activity_date": 1435162778, "creation_date": 1435162778, "answer_id": 31031846, "question_id": 31031742, "link": "https://stackoverflow.com/questions/31031742/malloc-and-heap-extra-memory-for-storing-the-size-and-linked-list-information/31031846#31031846", "title": "malloc and heap: extra memory for storing the size and linked list information?", "body": "<p>Memory allocation is dependent on the compiler libraries and the operating system.  </p>\n\n<p>Both languages don't state a maximum amount of memory that can be allocated.  All you are guaranteed is the requested size.  </p>\n\n<p>So if there is any additional memory allocated, it would be platform dependent.  </p>\n\n<p>Also, there may be less overhead when allocating larger spaces.  </p>\n\n<p>Try writing your own memory allocator and see what is needed, especially when desposing the memory.</p>\n"}, {"comments": [{"owner": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1435164894, "post_id": 31031883, "comment_id": 50089524, "body": "Of course. I was simplifying the situation because thinking about the case in which <code>malloc</code> fails doesn&#39;t really apply to the question."}], "tags": [], "owner": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "is_accepted": false, "score": 1, "last_activity_date": 1435162888, "creation_date": 1435162888, "answer_id": 31031883, "question_id": 31031742, "link": "https://stackoverflow.com/questions/31031742/malloc-and-heap-extra-memory-for-storing-the-size-and-linked-list-information/31031883#31031883", "title": "malloc and heap: extra memory for storing the size and linked list information?", "body": "<p>When you allocate memory using <code>malloc</code>, all you get is a pointer to the first address in that memory and a guarantee that so many bytes have been allocated for your use. The details of <em>how</em> that memory is allocated and tracked are platform-dependent, and there is no way for you to access that information from within the program. So while extra memory may be allocated for overhead purposes, you can't use that knowledge in a cross-platform way.</p>\n"}, {"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 2, "creation_date": 1435164167, "post_id": 31032079, "comment_id": 50089074, "body": "it&#39;s worth noting that there are many other tricks which might cost extra space, like padding with special bitpatterns to detect out-of-bounds write or information about the allocation (which part of the code did the allocation) for debugging purposes."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1435164724, "post_id": 31032079, "comment_id": 50089419, "body": "Maybe add something about <a href=\"http://linux.die.net/man/3/malloc\" rel=\"nofollow noreferrer\">optimistic allocation</a>.  (BTW: A very good answer! )"}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1435165389, "post_id": 31032079, "comment_id": 50089828, "body": "@chux:  The man page mention of optimistic allocation is interesting, but I don&#39;t see how it fits.  I think it means <code>sbrk()</code> is optimistic and could lead to <code>malloc()</code> optimism, right?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1435168015, "post_id": 31032079, "comment_id": 50091468, "body": "OP says &quot;The actual memory space used is really 10 words?&quot; so is thinking <code>malloc()</code> and others truly <i>use</i> memory when all that really may happen was memory was marked for use, but not used yet and the &quot;extra memory&quot; may change when true use occurs. <a href=\"http://stackoverflow.com/q/19991623/2410359\">See here</a>.  If that does not help, don&#39;t bother messing your fine answer.   Note: Optimistic allocation is a separate idea from <code>sbrk()</code>."}], "tags": [], "owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "is_accepted": true, "score": 7, "last_activity_date": 1435165441, "last_edit_date": 1435165441, "creation_date": 1435163420, "answer_id": 31032079, "question_id": 31031742, "link": "https://stackoverflow.com/questions/31031742/malloc-and-heap-extra-memory-for-storing-the-size-and-linked-list-information/31032079#31032079", "title": "malloc and heap: extra memory for storing the size and linked list information?", "body": "<p>It is completely implementation dependent.</p>\n\n<p>a) It could have a few bytes before each allocated node which contains the size of the node, pointer to the next node, and maybe a previous node pointer and the type of node.</p>\n\n<p>b) The returned item may have nothing else around it except other allocations.  A structure elsewhere keeps track of what is allocated and what is free, perhaps by a bitmap or a miniature parallel list.</p>\n\n<p>c) Another variation provides several arrays of fixed sized chunks.  One array may provide 32-byte blocks; another 128-byte blocks, etc.  A bitmap for each array manages allocations.</p>\n\n<p>d) The most minimal implementation I have seen ignores <code>free()</code> completely (that is, <code>free()</code> is a no op) and allocates the next piece of the pool at each <code>malloc()</code>.</p>\n\n<hr>\n\n<p>By far, the most commonly used modern technique is <em>a</em>.   Variant <em>b</em> is used in many filesystems like NTFS and FAT.  Option <em>c</em> was/is favored in many DEC operating systems, especially for kernel use.  Option <em>d</em> is used by a few minimalist embedded environments with a suitable caveat.</p>\n\n<p>In most implementations, the requested allocation is rounded up to some natural multiple (usually of 2, 8, 16, etc.) convenient for the algorithm.  So a series of allocations of 5, 3, 8, 7, 4, 1, and 15 might each be regarded as a 16 byte request.</p>\n"}], "owner": {"reputation": 2309, "user_id": 4802797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-qOpr0OlDCkA/AAAAAAAAAAI/AAAAAAAAALE/8bNsDCgdbuk/photo.jpg?sz=128", "display_name": "fluency03", "link": "https://stackoverflow.com/users/4802797/fluency03"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "accepted_answer_id": 31032079, "answer_count": 4, "score": 4, "last_activity_date": 1435170111, "creation_date": 1435162473, "question_id": 31031742, "link": "https://stackoverflow.com/questions/31031742/malloc-and-heap-extra-memory-for-storing-the-size-and-linked-list-information", "title": "malloc and heap: extra memory for storing the size and linked list information?", "body": "<p>I have a simple question about the <code>heap</code> and <code>malloc</code>: </p>\n\n<p>When we allocate some memory space using <code>malloc</code> as following:</p>\n\n<pre><code>int *p;\np = (int*) malloc (10*sizeof(int));\n</code></pre>\n\n<p>It actually allocates 10 words in the heap. However, my question is: </p>\n\n<p>The actual memory space used is really 10 words? </p>\n\n<p>Or there are other extra space needed for storing the value of memory size?  </p>\n\n<p>Or, even, because the heap is structured as <em>Linked list</em>, is there other memory space being used for storing the address which points to the next node of the list in the heap? </p>\n"}, {"tags": ["java", "c++", "java-native-interface"], "comments": [{"owner": {"reputation": 9152, "user_id": 2338547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QT3fG.png?s=128&g=1", "display_name": "markspace", "link": "https://stackoverflow.com/users/2338547/markspace"}, "edited": false, "score": 2, "creation_date": 1435161897, "post_id": 31031498, "comment_id": 50087561, "body": "I wouldn&#39;t even try.  Return the block of 1024 bytes to the Java code, and let Java write the bytes."}, {"owner": {"reputation": 1185, "user_id": 3441222, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c1ef99d243c541138c9084f434bc98bf?s=128&d=identicon&r=PG&f=1", "display_name": "RedCollarPanda", "link": "https://stackoverflow.com/users/3441222/redcollarpanda"}, "reply_to_user": {"reputation": 9152, "user_id": 2338547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QT3fG.png?s=128&g=1", "display_name": "markspace", "link": "https://stackoverflow.com/users/2338547/markspace"}, "edited": false, "score": 0, "creation_date": 1435163355, "post_id": 31031498, "comment_id": 50088554, "body": "This in not an option! I REALLY need to use OutputStream there."}], "owner": {"reputation": 1185, "user_id": 3441222, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c1ef99d243c541138c9084f434bc98bf?s=128&d=identicon&r=PG&f=1", "display_name": "RedCollarPanda", "link": "https://stackoverflow.com/users/3441222/redcollarpanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1435162241, "answer_count": 0, "score": 0, "last_activity_date": 1435161829, "creation_date": 1435161829, "question_id": 31031498, "link": "https://stackoverflow.com/questions/31031498/writing-data-to-outputstream-from-native-code", "closed_reason": "Duplicate", "title": "Writing data to OutputStream from Native Code", "body": "<p>I have a JNI method like this </p>\n\n<pre><code> JNIEXPORT jint JNICALL Java_lib_Fs_readFile\n  (JNIEnv *, jclass, jstring java_string, jobject stream) {\n  unsigned char read_block[1024] = { 0 };\n\n }\n</code></pre>\n\n<p>How can I write read_block[1024] to  </p>\n\n<pre><code>jobject stream \n</code></pre>\n\n<p>that is OutputStream from native code? </p>\n"}, {"tags": ["c++", "qt", "casting", "udp", "reinterpret-cast"], "comments": [{"owner": {"reputation": 23, "user_id": 5045028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/292e19bedf080cb0f3c30fd550aa7e98?s=128&d=identicon&r=PG&f=1", "display_name": "Doggman9", "link": "https://stackoverflow.com/users/5045028/doggman9"}, "edited": false, "score": 0, "creation_date": 1435166605, "post_id": 31031252, "comment_id": 50090624, "body": "Thank you AndyG and Angew.  Both of your answers were very helpful."}], "answers": [{"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 3, "last_activity_date": 1435162215, "last_edit_date": 1435162215, "creation_date": 1435161624, "answer_id": 31031422, "question_id": 31031252, "link": "https://stackoverflow.com/questions/31031252/reinterpret-cast-double-to-char-to-double-not-working-c/31031422#31031422", "title": "reinterpret_cast - double to char[] to double not working - C++", "body": "<p>You don't want to <code>reinterpret_cast</code> <code>&amp;bytes</code>, but <code>bytes</code>. The former is the address of a pointer, the latter is the value (what's pointed to), which is where your <code>double</code> is.</p>\n\n<p>Also, cast to <code>unsigned char*</code>, not <code>unsigned char* const</code>, so you don't cast away c-v qualifiers</p>\n\n<pre><code>double test = 0.3;\nunsigned char* bytes = reinterpret_cast&lt;unsigned char*&gt;(&amp;test);\ndouble recv = *reinterpret_cast&lt;double*&gt;(bytes);\nstd::cout &lt;&lt; recv &lt;&lt; std::endl;\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>0.3</p>\n</blockquote>\n\n<p><a href=\"http://ideone.com/Sz6ICa\" rel=\"nofollow\">Live Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 2017, "user_id": 4999494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0e49247723efb14f33ad19a5ecdf1a4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Balabin", "link": "https://stackoverflow.com/users/4999494/alexander-balabin"}, "is_accepted": false, "score": 0, "last_activity_date": 1435161811, "creation_date": 1435161811, "answer_id": 31031487, "question_id": 31031252, "link": "https://stackoverflow.com/questions/31031252/reinterpret-cast-double-to-char-to-double-not-working-c/31031487#31031487", "title": "reinterpret_cast - double to char[] to double not working - C++", "body": "<p>In your <code>interpret_cast</code> example you're taking pointer to <code>bytes</code> which is already a pointer to the data bytes and casting to pointer to double. If you cast <code>bytes</code> instead and also cast to a <code>const double*</code> (because reinterpret_cast does not cast away constness) it will work:</p>\n\n<pre><code>double recv = *reinterpret_cast&lt;const double*&gt;(bytes);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 2, "last_activity_date": 1435161847, "creation_date": 1435161847, "answer_id": 31031507, "question_id": 31031252, "link": "https://stackoverflow.com/questions/31031252/reinterpret-cast-double-to-char-to-double-not-working-c/31031507#31031507", "title": "reinterpret_cast - double to char[] to double not working - C++", "body": "<p>@AndyG is correct about the <code>bytes</code> part. As for <code>datagram</code>: <code>&amp;datagram</code> gives you the address of the <code>QByteArray</code> object, not the address of its contents. For that, you need <code>data()</code>:</p>\n\n<pre><code>QByteArray datagram;\nQDataStream out(&amp;datagram, QIODevice::WriteOnly);\nout.setVersion(QDataStream::Qt_5_1);\nout.setFloatingPointPrecision(QDataStream::SinglePrecision);\n\ndouble test = 0.3;\nout &lt;&lt; test;\ndouble recv = *reinterpret_cast&lt;double*&gt;(datagram.data());\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5045028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/292e19bedf080cb0f3c30fd550aa7e98?s=128&d=identicon&r=PG&f=1", "display_name": "Doggman9", "link": "https://stackoverflow.com/users/5045028/doggman9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1712, "favorite_count": 0, "accepted_answer_id": 31031422, "answer_count": 3, "score": 2, "last_activity_date": 1435162215, "creation_date": 1435161146, "question_id": 31031252, "link": "https://stackoverflow.com/questions/31031252/reinterpret-cast-double-to-char-to-double-not-working-c", "title": "reinterpret_cast - double to char[] to double not working - C++", "body": "<p>I am trying to send some double's in a datagram via udpSendSocket.  The data is coming from a QT GUI and being sent to a VS2013 driver program (both in C++).  I am using a QDataStream to put data into a QByteArray which is then sent off.  Everything works fine for integers but I cannot make it work for doubles.</p>\n\n<p>I have already confirmed that my transmission code works such that whatever is in datagram is being received by the driver program so I am doing all of my testing in the QT program.</p>\n\n<p>At first I sent a double straight into QDataStream which claims to use IEEE 754 and then used *reinterpret_cast to convert it back to a double.</p>\n\n<pre><code>// QT Program\nQByteArray datagram;\nQDataStream out(&amp;datagram, QIODevice::WriteOnly);\nout.setVersion(QDataStream::Qt_5_1);\nout.setFloatingPointPrecision(QDataStream::SinglePrecision);\n\ndouble test = 0.3;\nout &lt;&lt; test;\ndouble recv = *reinterpret_cast&lt;double*&gt;(&amp;datagram);\n</code></pre>\n\n<p>With that recv = 2.32e-317.</p>\n\n<p>After that didn't work I focused on trying to convert a double to byte array back to double.  Multiple sources led me to believe this would work but it is not.</p>\n\n<pre><code>double test = 0.3;\nunsigned char const* bytes = reinterpret_cast&lt;unsigned char const*&gt;(&amp;test);\ndouble recv = *reinterpret_cast&lt;double*&gt;(&amp;bytes);\n</code></pre>\n\n<p>With that recv = 1.33e-317.</p>\n\n<p>sizeof(double) returns 8.</p>\n\n<p>What am I doing wrong with reinterpret_cast?  Should I be making this conversion a different way?  Any suggestions?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "division"], "comments": [{"owner": {"reputation": 2635, "user_id": 640397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3j0Sj.png?s=128&g=1", "display_name": "Apples", "link": "https://stackoverflow.com/users/640397/apples"}, "edited": false, "score": 1, "creation_date": 1435161213, "post_id": 31031223, "comment_id": 50087081, "body": "Have you considered changing the structure of your algorithm to avoid division, rather trying to find a faster division technique?"}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1435161235, "post_id": 31031223, "comment_id": 50087102, "body": "An error of 10% per division can lead to exponential errors when reused, is that worth it? possibly not"}, {"owner": {"reputation": 2007, "user_id": 543913, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7d76a4187acf1918902f0a2ab239aba?s=128&d=identicon&r=PG", "display_name": "dshin", "link": "https://stackoverflow.com/users/543913/dshin"}, "edited": false, "score": 0, "creation_date": 1435161478, "post_id": 31031223, "comment_id": 50087272, "body": "This is purely for intellectual curiosity with no planned application."}, {"owner": {"user_type": "does_not_exist", "display_name": "user146043"}, "edited": false, "score": 0, "creation_date": 1435161695, "post_id": 31031223, "comment_id": 50087423, "body": "x * 1/y is faster if you can precompute the reciprocal."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1435161796, "post_id": 31031223, "comment_id": 50087497, "body": "Duplicate of <a href=\"http://stackoverflow.com/q/12227126/555045\">this</a>? Well, I don&#39;t know if it&#39;s faster. It&#39;s something."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1435162468, "post_id": 31031223, "comment_id": 50087967, "body": "1) mask out the fraction bits of the divisor, 2) take its 8 most significant bits, 3) look up for its reciprocal, 4) multiply the reciprocal with the dividend, 5) add the exponent of the divisor to the exponent part of the product."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1435163271, "post_id": 31031223, "comment_id": 50088504, "body": "Of course if you can use a built-in instruction equivalent to <code>rcpss</code> or <code>pfrcp</code>, that&#39;s probably best."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1435164261, "post_id": 31031223, "comment_id": 50089137, "body": "you can use <code>RCPSS</code> instruction <a href=\"http://stackoverflow.com/q/9939322/995714\">Fast 1/X division (reciprocal)</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3020, "user_id": 5601591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dymec.png?s=128&g=1", "display_name": "Jack Giffin", "link": "https://stackoverflow.com/users/5601591/jack-giffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1476050757, "last_edit_date": 1495535449, "creation_date": 1476050757, "answer_id": 39949009, "question_id": 31031223, "link": "https://stackoverflow.com/questions/31031223/fast-approximate-float-division/39949009#39949009", "title": "Fast approximate float division", "body": "<p>I hope that this helps because this is probably as close as your going to get to what you are looking for.</p>\n\n<pre><code>__inline__ double __attribute__((const)) divide( double y, double x ) {\n                                    // calculates y/x\n    union {\n        double dbl;\n        unsigned long long ull;\n    } u;\n    u.dbl = x;                      // x = x\n    u.ull = ( 0xbfcdd6a18f6a6f52ULL - u.ull ) &gt;&gt; (unsigned char)1;\n                                    // pow( x, -0.5 )\n    u.dbl *= u.dbl;                 // pow( pow(x,-0.5), 2 ) = pow( x, -1 ) = 1.0/x\n    return u.dbl * y;               // (1.0/x) * y = y/x\n}\n</code></pre>\n\n<p><br/>\nSee also:<br/>\n    <a href=\"https://stackoverflow.com/questions/9939322/fast-1-x-division-reciprocal/39714493#39714493\">Another post about reciprocal approximation.</a><br/>\n    <a href=\"https://en.wikipedia.org/wiki/Fast_inverse_square_root\" rel=\"nofollow noreferrer\">The Wikipedia page.</a></p>\n"}, {"tags": [], "owner": {"reputation": 544, "user_id": 3398381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e984d79fb5dbca6cddf6b2eff90fea02?s=128&d=identicon&r=PG&f=1", "display_name": "nimig18", "link": "https://stackoverflow.com/users/3398381/nimig18"}, "is_accepted": false, "score": 1, "last_activity_date": 1491456195, "creation_date": 1491456195, "answer_id": 43246339, "question_id": 31031223, "link": "https://stackoverflow.com/questions/31031223/fast-approximate-float-division/43246339#43246339", "title": "Fast approximate float division", "body": "<p>FDIV is usually <strong>exceptionally</strong> slower than FMUL just b/c it can't be piped like multiplication and requires multiple clk cycles for iterative convergence HW seeking process.</p>\n\n<p>Easiest way is to simply recognize that division is nothing more than the multiplication of the dividend <code>y</code> and the inverse of the divisor <code>x</code>. The not so straight forward part is remembering a float value <code>x = m * 2 ^ e</code> &amp; its inverse <code>x^-1 = (1/m)*2^(-e) = (2/m)*2^(-e-1) = p * 2^q</code> approximating this new mantissa <code>p = 2/m = 3-x, for 1&lt;=m&lt;2</code>. This gives a rough piece-wise linear approximation of the inverse function, however we can do a lot better by using an iterative Newton Root Finding Method to improve that approximation. </p>\n\n<p>let <code>w = f(x) = 1/x</code>, the inverse of this function <code>f(x)</code> is found by solving for <code>x</code> in terms of <code>w</code> or <code>x = f^(-1)(w) = 1/w</code>. To improve the output with the root finding method we must first create a function whose zero reflects the desired output, i.e. <code>g(w) = 1/w - x,  d/dw(g(w)) = -1/w^2</code>. </p>\n\n<p><code>w[n+1]= w[n] - g(w[n])/g'(w[n]) = w[n] + w[n]^2 * (1/w[n] - x) = w[n] * (2 - x*w[n])</code></p>\n\n<p><code>w[n+1] = w[n] * (2 - x*w[n]),  when w[n]=1/x, w[n+1]=1/x*(2-x*1/x)=1/x</code></p>\n\n<p>These components then add to get the final piece of code:</p>\n\n<pre><code>float inv_fast(float x) {\n    union { float f; int i; } v;\n    float w, sx;\n    int m;\n\n    sx = (x &lt; 0) ? -1:1;\n    x = sx * x;\n\n    v.i = (int)(0x7EF127EA - *(uint32_t *)&amp;x);\n    w = x * v.f;\n\n    // Efficient Iterative Approximation Improvement in horner polynomial form.\n    v.f = v.f * (2 - w);     // Single iteration, Err = -3.36e-3 * 2^(-flr(log2(x)))\n    // v.f = v.f * ( 4 + w * (-6 + w * (4 - w)));  // Second iteration, Err = -1.13e-5 * 2^(-flr(log2(x)))\n    // v.f = v.f * (8 + w * (-28 + w * (56 + w * (-70 + w *(56 + w * (-28 + w * (8 - w)))))));  // Third Iteration, Err = +-6.8e-8 *  2^(-flr(log2(x)))\n\n    return v.f * sx;\n}\n</code></pre>\n"}], "owner": {"reputation": 2007, "user_id": 543913, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7d76a4187acf1918902f0a2ab239aba?s=128&d=identicon&r=PG", "display_name": "dshin", "link": "https://stackoverflow.com/users/543913/dshin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1538, "favorite_count": 3, "answer_count": 2, "score": 4, "last_activity_date": 1491456195, "creation_date": 1435161045, "question_id": 31031223, "link": "https://stackoverflow.com/questions/31031223/fast-approximate-float-division", "title": "Fast approximate float division", "body": "<p>On modern processors, float division is a good order of magnitude slower than float multiplication (when measured by reciprocal throughput).</p>\n\n<p>I'm wondering if there are any algorithms out there for computating a fast approximation to <code>x/y</code>, given certain assumptions and tolerance levels. For example, if you assume that <code>0&lt;x&lt;y</code>, and are willing to accept any output that is within 10% of the true value, are there algorithms faster than the built-in FDIV operation?</p>\n"}]