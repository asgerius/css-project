[{"tags": ["c++", "string", "char", "atoi"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521676936, "post_id": 49418426, "comment_id": 85838604, "body": "You&#39;ll have to skip (scan) past the non-numeric characters first.  See <code>std::isdigit</code>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1521676962, "post_id": 49418426, "comment_id": 85838609, "body": "For the characters <code>\u20190\u2019..\u20199\u2019</code> you can subtract <code>\u20190\u2019</code> to get the number that the character represents."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1521676999, "post_id": 49418426, "comment_id": 85838616, "body": "<code>atoi()</code> takes a C-style string (char pointer). If you just need to convert a single digit, subtract <code>&#39;0&#39;</code>."}, {"owner": {"reputation": 4625, "user_id": 1861521, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/dda04c7abdfe8b05f4a258b7a01900a6?s=128&d=identicon&r=PG", "display_name": "jcarpenter2", "link": "https://stackoverflow.com/users/1861521/jcarpenter2"}, "edited": false, "score": 0, "creation_date": 1521677095, "post_id": 49418426, "comment_id": 85838635, "body": "<code>std::stoi</code> takes a string argument -- you can probably take the appropriate substring, and then use that function."}], "answers": [{"tags": [], "owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1521677018, "creation_date": 1521677018, "answer_id": 49418466, "question_id": 49418426, "link": "https://stackoverflow.com/questions/49418426/pulling-a-single-char-from-a-string-and-converting-it-to-int/49418466#49418466", "title": "Pulling a single char from a string and converting it to int", "body": "<p>You should read the manual page for <code>atoi()</code> more carefully.  The actual prototype is:</p>\n\n<pre><code> int atoi(const char *string)\n</code></pre>\n\n<p>You are attempting to pass a single character rather than a pointer to a character array.  In other words, by using <code>s[2]</code> you are dereferencing the pointer.  You could, instead, use:</p>\n\n<pre><code> value = std::atoi(s+2);\n</code></pre>\n\n<p>or alternatively:</p>\n\n<pre><code> value = std::atoi(&amp;s[2]);\n</code></pre>\n\n<p>This code doesn't dereference the pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 4625, "user_id": 1861521, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/dda04c7abdfe8b05f4a258b7a01900a6?s=128&d=identicon&r=PG", "display_name": "jcarpenter2", "link": "https://stackoverflow.com/users/1861521/jcarpenter2"}, "edited": false, "score": 0, "creation_date": 1521677229, "post_id": 49418468, "comment_id": 85838671, "body": "<code>std::string</code> does not include a null terminator, so this answer is wrong even though it type checks.  You could end up with a segfault."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 4625, "user_id": 1861521, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/dda04c7abdfe8b05f4a258b7a01900a6?s=128&d=identicon&r=PG", "display_name": "jcarpenter2", "link": "https://stackoverflow.com/users/1861521/jcarpenter2"}, "edited": false, "score": 0, "creation_date": 1521677336, "post_id": 49418468, "comment_id": 85838698, "body": "Oops, didn&#39;t notice that it was <code>std::string</code>, assumed <code>char *</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 4625, "user_id": 1861521, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/dda04c7abdfe8b05f4a258b7a01900a6?s=128&d=identicon&r=PG", "display_name": "jcarpenter2", "link": "https://stackoverflow.com/users/1861521/jcarpenter2"}, "edited": false, "score": 0, "creation_date": 1521677558, "post_id": 49418468, "comment_id": 85838738, "body": "@jcarpenter2 I&#39;ve revised it to use <code>.c_str()</code>."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1521677500, "last_edit_date": 1521677500, "creation_date": 1521677040, "answer_id": 49418468, "question_id": 49418426, "link": "https://stackoverflow.com/questions/49418426/pulling-a-single-char-from-a-string-and-converting-it-to-int/49418468#49418468", "title": "Pulling a single char from a string and converting it to int", "body": "<p>The argument to <code>std::atoi</code> must be <code>char*</code>, but <code>s[2]</code> is <code>char</code>. You need to use its address. And to get a valid C string from a <code>std::string</code>, you need to use the <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\"><code>c_str()</code></a> method.</p>\n\n<pre><code>value = std::atoi(&amp;(s.c_str()[2]));\n</code></pre>\n\n<p>You should have gotten an error saying that the argument wasn't of the correct type.</p>\n"}, {"tags": [], "owner": {"reputation": 4625, "user_id": 1861521, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/dda04c7abdfe8b05f4a258b7a01900a6?s=128&d=identicon&r=PG", "display_name": "jcarpenter2", "link": "https://stackoverflow.com/users/1861521/jcarpenter2"}, "is_accepted": true, "score": 1, "last_activity_date": 1521677483, "creation_date": 1521677483, "answer_id": 49418518, "question_id": 49418426, "link": "https://stackoverflow.com/questions/49418426/pulling-a-single-char-from-a-string-and-converting-it-to-int/49418518#49418518", "title": "Pulling a single char from a string and converting it to int", "body": "<p>You can write:</p>\n\n<pre><code>std::string s = \"#/5\";\nstd::string substring = s.substr(2, 1);\nint value = std::stoi(substring);\n</code></pre>\n\n<p>Using the <code>substr</code> method of <code>std::string</code> to pull out the substring that you want to parse as an integer, and then using <code>stoi</code> (which takes a <code>std::string</code>) instead of <code>atoi</code> (which takes a <code>const char *</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 9515246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mecki", "link": "https://stackoverflow.com/users/9515246/mecki"}, "is_accepted": false, "score": 2, "last_activity_date": 1521802782, "last_edit_date": 1521802782, "creation_date": 1521677591, "answer_id": 49418536, "question_id": 49418426, "link": "https://stackoverflow.com/questions/49418426/pulling-a-single-char-from-a-string-and-converting-it-to-int/49418536#49418536", "title": "Pulling a single char from a string and converting it to int", "body": "<p>You can create <code>std::string</code> from one char and use <code>std::stoi</code> to convert to integer.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\nusing namespace std;\n\nint main() {\n  int value = 0;\n  string s = \"#/5\";\n  value = stoi(string(1, s[2])); //conversion\n  cout &lt;&lt; value;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9531683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aab9263ca3ede64e6510667bb236a0e4?s=128&d=identicon&r=PG&f=1", "display_name": "MTurek", "link": "https://stackoverflow.com/users/9531683/mturek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1493, "favorite_count": 0, "accepted_answer_id": 49418518, "answer_count": 4, "score": 1, "last_activity_date": 1521802782, "creation_date": 1521676733, "last_edit_date": 1521677613, "question_id": 49418426, "link": "https://stackoverflow.com/questions/49418426/pulling-a-single-char-from-a-string-and-converting-it-to-int", "title": "Pulling a single char from a string and converting it to int", "body": "<p>I am trying to pull a specific char from a string and convert it to an int. I have tried the following code, but I am unclear why it doesn't work nor can I find a way to do the conversion.</p>\n\n<pre><code>int value = 0;\nstd::string s = \"#/5\";\n\nvalue = std::atoi(s[2]);  // want value == 5\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1521675771, "post_id": 49418273, "comment_id": 85838266, "body": "Add your try and you&#39;ll get help."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1521676044, "post_id": 49418273, "comment_id": 85838364, "body": "Since you have problems with arrays, use <code>std::vector</code>. :-)"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1521676107, "post_id": 49418273, "comment_id": 85838380, "body": "If you haven&#39;t already, look towards <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> and <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find</code></a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521676123, "post_id": 49418273, "comment_id": 85838384, "body": "Implement a method that compares another <code>Account</code> by name.  You could also overload <code>operator&lt;</code> to compare to another account by name."}, {"owner": {"reputation": 31, "user_id": 7973144, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BXnVgsNiIN4/AAAAAAAAAAI/AAAAAAAAADs/dweU0-zsSbs/photo.jpg?sz=128", "display_name": "Gre3n", "link": "https://stackoverflow.com/users/7973144/gre3n"}, "edited": false, "score": 0, "creation_date": 1521676632, "post_id": 49418273, "comment_id": 85838506, "body": "`  bool usernameExists(Account* userAccount, Account* accountList[], \t\tint numberOfElements) { \tbool jap = true; \twhile (jap) { \t\tcout &lt;&lt; &quot;Enter username: &quot;; \t\tstring name; \t\tcin &gt;&gt; name; \t\tfor (int i = 0; i &lt; 4; i++) { \t\t\tif (name == accountList[i]) { \t\t\t\treturn true; \t\t\t} else \t\t\t\treturn false; \t\t} \t}  }  ` Thanks my try. I tryed lost of thing, but nothing works."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1521677512, "post_id": 49418273, "comment_id": 85838726, "body": "Post this as an edit, please. Also, why are you passing pointers to functions? Did you not learn about references?"}], "answers": [{"comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1521678992, "post_id": 49418488, "comment_id": 85839048, "body": "I have a ton of feedback, up to you whether you wanna implement any of it: your <code>usernameExsist</code> function compares the name, not the <code>username</code>. Despite OP&#39;s spelling, you should consider spelling the function correctly. Both parameters should be <code>const&amp;</code>. The only way to break your <code>while</code> loop is by not inputting an age. You can omit the local variables altogether and just store the data straight into <code>Account</code>. For demonstration purposes, I&#39;d have omitted all the unnecessary stuff from <code>Account</code> (including the constructor), which would make your code shorter and clearer,. Use ranged <code>for</code>"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1521679083, "post_id": 49418488, "comment_id": 85839073, "body": "I&#39;d have probably not worried about demonstrating the io aspects of reading into <code>Account</code>, I&#39;d have just replaced it entirely by adding two <code>Account</code> and finding one. Again, it just makes the code in the answer shorter which in turn makes it clearer the important aspect (the function to check if the username <i>exsists</i>)"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "reply_to_user": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1521679602, "post_id": 49418488, "comment_id": 85839179, "body": "@Tas I focused only on the class vector but not about the remaining stuff. Anyway thanks and i will edit it later on."}], "tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": true, "score": 1, "last_activity_date": 1521677474, "last_edit_date": 1521677474, "creation_date": 1521677174, "answer_id": 49418488, "question_id": 49418273, "link": "https://stackoverflow.com/questions/49418273/usernameexsist-function-c-object-orienten-progrmming/49418488#49418488", "title": "usernameExsist function c++ Object-orienten progrmming", "body": "<p>You can use class <code>vector</code> which relieve you from the burden of arrays and size...</p>\n\n<p>Here is an example that you could modify to meet your needs:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n\nclass Account {\n    public:\n        Account(string, unsigned int, string, string);\n    //private: // in your example un-comment private and provide public getters instead.\n        string name;\n        unsigned int age;\n        string username;\n        string password;\n};\n\nAccount::Account(string Name, unsigned int Age, string UserName, string Password) : \n    name(Name), age(Age), username(UserName), password(Password){\n\n}\n\n\nbool usernameExsist(string, vector&lt;Account&gt;);\n\n\nint main(){\n\n    std::vector&lt; Account &gt; vec;\n    string name;\n    unsigned int age;\n    string username;\n    string password;\n\n    while(1){\n        cout &lt;&lt; \"name: \";\n        getline(cin, name);\n        cin.ignore();\n        cout &lt;&lt; \"Age: \";\n        cin &gt;&gt; age;\n        if(!age || age &lt; 0)\n            break;\n        cin.ignore();\n        cout &lt;&lt; endl;\n        cout &lt;&lt; \"username: \";\n        getline(cin, username);\n        cin.ignore();\n        cout &lt;&lt; endl;\n        cout &lt;&lt; \"password: \";\n        getline(cin, password);\n        cout &lt;&lt; endl;\n        cin.ignore();\n\n        Account a(name, age, username, password);\n        vec.push_back(a);\n    }\n\n    cout &lt;&lt; usernameExsist(\"Max\", vec) &lt;&lt; endl;\n\n\n    cout &lt;&lt; endl;\n    return 0;\n}\n\nbool usernameExsist(string name, vector&lt;Account&gt; vec){\n    const int size = vec.size();\n    for(int i(0); i != size; ++i)\n        if(name == vec[i].name){\n            cout &lt;&lt; \"Found at: \" &lt;&lt; i &lt;&lt; endl;\n            return true;\n        }\n    return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7973144, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BXnVgsNiIN4/AAAAAAAAAAI/AAAAAAAAADs/dweU0-zsSbs/photo.jpg?sz=128", "display_name": "Gre3n", "link": "https://stackoverflow.com/users/7973144/gre3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 49418488, "answer_count": 1, "score": -1, "last_activity_date": 1521677474, "creation_date": 1521675691, "last_edit_date": 1521676059, "question_id": 49418273, "link": "https://stackoverflow.com/questions/49418273/usernameexsist-function-c-object-orienten-progrmming", "title": "usernameExsist function c++ Object-orienten progrmming", "body": "<p>I have a class:</p>\n\n<pre><code>class Account {\nprivate:\n    string name;\n    unsigned int age;\n    string username;\n    string password;\n};\n</code></pre>\n\n<p>In my main program I need to make a <code>bool usernameExsist(Account* userAccount, Account* acountList[], int numberOfElements)</code> function that returns true if the name is found. But I have problems with the arrays and the implementation.I entered some information in the class: <code>Account first=Account(\"Max\", 18,\"maxx34\",\"12345adc\");</code>Can someone help me with the implementation?! Thanks. </p>\n"}, {"tags": ["c++", "struct", "unordered-map"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1521675498, "post_id": 49418173, "comment_id": 85838169, "body": "No, this is not a coincidence. This is zero-initialization."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1521676679, "post_id": 49418173, "comment_id": 85838519, "body": "To be clear. The answer to the  question in the title is &#39;yes&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 7, "last_activity_date": 1521675641, "last_edit_date": 1521675641, "creation_date": 1521675485, "answer_id": 49418235, "question_id": 49418173, "link": "https://stackoverflow.com/questions/49418173/will-an-unordered-map-create-a-zero-initialized-struct/49418235#49418235", "title": "Will an unordered map create a zero initialized struct?", "body": "<p>No, it's not coincidence, and yes, the map creates a zero-initialized struct. But let's go through the details:</p>\n\n<p>New elements in the map are created with <em>value-initialization</em>; essentially with something like <code>::new (address) T()</code>. Value-initialization of a class without user-defined default constructor such as your <code>TestStruct</code> means that the object is zero-intialized, hence all non-static members are zero-initialized.</p>\n\n<p>From <a href=\"https://wg21.link/dcl.init#8\" rel=\"noreferrer\">[dcl.init]p8</a>:</p>\n\n<blockquote>\n  <p>To <em>value-initialize</em> an object of type T means: [...] if <code>T</code> is a [...] class type without a user-provided or deleted default constructor, then the object is zero-initialized [...]</p>\n</blockquote>\n\n<p>From <a href=\"https://wg21.link/dcl.init#6\" rel=\"noreferrer\">[dcl.init]p6</a>:</p>\n\n<blockquote>\n  <p>To <em>zero-initialize</em> an object or reference of type T means: [...]  if <code>T</code> is a [...] class type, its padding bits (6.7) are initialized to zero bits\n  and each non-static data member, each non-virtual base class subobject, and, if the object is not a base\n  class subobject, each virtual base class subobject is zero-initialized [...]</p>\n</blockquote>\n\n<p>But if your class had a user-defined default constructor, then value-initialization would result in that constructor being called. So it's true that your <code>int</code> is zero-intitialized, but only because of the particularly simple kind of class you have.</p>\n"}], "owner": {"reputation": 77, "user_id": 5115319, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/65d6ffa5dc7c7993e1c2af018a62d7ab?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5115319/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 1, "accepted_answer_id": 49418235, "answer_count": 1, "score": 2, "last_activity_date": 1521675641, "creation_date": 1521675072, "question_id": 49418173, "link": "https://stackoverflow.com/questions/49418173/will-an-unordered-map-create-a-zero-initialized-struct", "title": "Will an unordered map create a zero initialized struct?", "body": "<p>I have an unordered map that has a key of an <code>int</code> and a value of a <code>struct</code>. If the key is not found, I want the map to create a zero initialized <code>struct</code>.</p>\n\n<pre><code>struct TestStruct\n{ \n   int a;\n};\n\nvoid foo()\n{\n   std::unordered_map&lt;int, TestStruct&gt; map;\n   TestStruct&amp; test = map[1];    \n}\n</code></pre>\n\n<p>When debugging I can see that the values of <code>test.a == 0</code> but is this a coincidence?  </p>\n\n<p>Relevant post: <a href=\"https://stackoverflow.com/questions/8280023/does-a-c-struct-have-a-default-constructor\">Does a c++ struct have a default constructor?</a></p>\n"}, {"tags": ["c++", "design-patterns", "reference", "include", "components"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521675094, "post_id": 49418147, "comment_id": 85838071, "body": "Looks like complment.h can get by with just a forward declaration of <code>Entity</code>. Good reading on how to work around header dependencies in <a href=\"https://stackoverflow.com/questions/625799/resolve-build-errors-due-to-circular-dependency-amongst-classes\">Resolve build errors due to circular dependency amongst classes</a>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1521675121, "post_id": 49418147, "comment_id": 85838075, "body": "Use Forward declaration."}, {"owner": {"reputation": 1, "user_id": 4176075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4151a9acde6dd7eec46b2ca079e0491f?s=128&d=identicon&r=PG&f=1", "display_name": "Ronan", "link": "https://stackoverflow.com/users/4176075/ronan"}, "edited": false, "score": 0, "creation_date": 1521675202, "post_id": 49418147, "comment_id": 85838099, "body": "Note that if I forward declare <code>Entity</code> in <code>Component</code> (as the files show), classes which include <code>Entity</code> have ambiguity problems"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521675961, "post_id": 49418147, "comment_id": 85838336, "body": "<code>Component.h</code> will probably be easiest to wrap your head around looking something like this: <a href=\"https://pastebin.com/DVvSwTqg\" rel=\"nofollow noreferrer\">pastebin.com/DVvSwTqg</a> TL;DR: Don&#39;t forget that <code>Entity</code> is inside a namespace."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1521676655, "post_id": 49418147, "comment_id": 85838513, "body": "Don&#39;t use <code>using namespace XXX;</code> in header."}, {"owner": {"reputation": 1, "user_id": 4176075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4151a9acde6dd7eec46b2ca079e0491f?s=128&d=identicon&r=PG&f=1", "display_name": "Ronan", "link": "https://stackoverflow.com/users/4176075/ronan"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521679108, "post_id": 49418147, "comment_id": 85839080, "body": "@user4581301 Ok, I&#39;ll try that. Looks more clean."}, {"owner": {"reputation": 1, "user_id": 4176075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4151a9acde6dd7eec46b2ca079e0491f?s=128&d=identicon&r=PG&f=1", "display_name": "Ronan", "link": "https://stackoverflow.com/users/4176075/ronan"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1521679141, "post_id": 49418147, "comment_id": 85839085, "body": "@Jarod42 What should I use to include the namespace? Or should I do Namespace::Class everytime I include some class from another namespace?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1521682635, "post_id": 49418147, "comment_id": 85839780, "body": "You might use it in cpp, not in header. In header, that nullify the interest of namespace. Prepend with <code>XXX::</code>."}], "owner": {"reputation": 1, "user_id": 4176075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4151a9acde6dd7eec46b2ca079e0491f?s=128&d=identicon&r=PG&f=1", "display_name": "Ronan", "link": "https://stackoverflow.com/users/4176075/ronan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1521675151, "answer_count": 0, "score": 0, "last_activity_date": 1521674859, "creation_date": 1521674859, "question_id": 49418147, "link": "https://stackoverflow.com/questions/49418147/c-circular-includes-implementing-component-pattern", "closed_reason": "Duplicate", "title": "c++ Circular includes (implementing component pattern)", "body": "<p>Implementing the <strong>Component</strong> pattern in <strong>C++</strong>, I came upon a problem related with includes.\n<br>\n<br>\n<br>\nI have an <code>Entity</code> class, which has the following components: <code>Renderer</code>, <code>Physics</code> and <code>Collider</code>. They inherit from <code>Component</code>, which has a single virtual method <code>Component-&gt;update(elapsedTime)</code> and a reference to the <code>Entity</code> it belongs to.\n<br>\n<br>\nEach time an <code>Entity</code> is updated, its components are updated too. As the components alter the <code>Entity</code>'s state, I thought it would be a good idea making them have a reference to the <code>Entity</code> they belong too (I could pass the <code>Entity</code> as a parameter in the <code>Component-&gt;update()</code> call but for performance I prefer not doing so).\n<br>\n<br>\nNow I must include <code>Renderer</code>, <code>Physics</code> and <code>Collider</code> from <code>Entity</code>, and include <code>Entity</code> from <code>Component</code>. Luckily, <code>Entity</code> calls methods from the above but <code>Component</code> just stores a reference to <code>Entity</code>, so I should include normally <code>Renderer</code>, <code>Physics</code> and <code>Collider</code> from <code>Entity</code>, and forward declare <code>Entity</code> from <code>Component</code>. After doing so, I found a problem which I cannot solve or know how to investigate. So I tried the other way around, and other problems risen up. \n<br>\n<br></p>\n\n<ul>\n<li>Including normally <code>Renderer</code>, <code>Physics</code> and <code>Collider</code> from <code>Entity</code>, and forward declare <code>Entity</code> from <code>Component</code>:</li>\n</ul>\n\n<p>A class which includes <code>Entity</code> would complain saying that <code>Entity</code> is ambiguous. This is due to (I think) that class loading <code>Entity</code>, then loading its <code>Component</code>s which forward declare <code>Entity</code>. How can I forward declare <code>Entity</code> without having other classes complaining about this ambiguity?</p>\n\n<ul>\n<li>Including normally <code>Entity</code> from <code>Component</code>, and forward declaring <code>Renderer</code>, <code>Physics</code> and <code>Collider</code> from <code>Entity</code>:</li>\n</ul>\n\n<p>In my <code>Entity-&gt;update()</code> method I do <code>this-&gt;collision-&gt;update()</code> which breaks, by saying that <em><code>pointer to incomplete class is not allowed</code></em>.</p>\n\n<p>How can I solve this without changing my class structure or behavior?</p>\n\n<p>Here are the files, using the first example (including the components and forward declaring <code>Entity</code> from <code>Component</code>:\n<br><br>\n<code>Entity.h</code></p>\n\n<pre><code>#ifndef ENTITY_H\n\n#define ENTITY_H\n\n#include \"Collision.h\"\n#include \"Physics.h\"\n#include \"Renderer.h\"\n#include \"TextureRenderer.h\"\n\nusing namespace Components;\n\nnamespace Entities\n{\n    class Entity\n    {\n        public:\n\n            Entity();\n\n            Collision* getCollision();\n\n            virtual void update(float elapsedTime);\n\n        protected:\n            Collision* collision;\n            Physics* physics;\n            Renderer* renderer;\n    };\n}\n#endif\n</code></pre>\n\n<p><code>Entity.cpp</code></p>\n\n<pre><code>#include \"Entity.h\"\n\nnamespace Entities\n{\n\n    Entity::Entity()\n    {\n    }\n\n    Collision* Entity::getCollision()\n    {\n        return this-&gt;collision;\n    }\n\n    void Entity::update(float elapsedTime)\n    {\n        collision-&gt;update(elapsedTime);\n        physics-&gt;update(elapsedTime);\n        renderer-&gt;update(elapsedTime);\n    }\n\n}\n</code></pre>\n\n<p><code>Component.h</code></p>\n\n<pre><code>#ifndef COMPONENT_H\n\n#define COMPONENT_H\n\nnamespace Components\n{\n    class Component\n    {\n        public:\n            Component(Entity* entity);\n\n            virtual void update(float elapsedTime) = 0;\n        protected:\n            Entity* entity;\n        private:\n            friend class Entity;\n    };\n}\n\n#endif\n</code></pre>\n\n<p><code>Component.cpp</code></p>\n\n<pre><code>#include \"Component.h\"\n#include \"Entity.h\"\n\nnamespace Components\n{\n    Component::Component(Entity* entity)\n    {\n        this-&gt;entity = entity;\n    }\n}\n</code></pre>\n\n<p><code>Collision.h</code></p>\n\n<pre><code>#ifndef COLLISION_H\n\n#define COLLISION_H\n\n#include \"Component.h\"\n\nnamespace Components\n{\n    class Collision : public Component\n    {\n        public:\n            void collide(Entity* entity);\n\n        protected:\n            virtual bool collidesWith(Entity* entity) = 0;\n    };\n}\n\n#endif\n</code></pre>\n\n<p><code>Collision.cpp</code></p>\n\n<pre><code>#include \"Collision.h\"\n\nnamespace Components\n{\n    void Collision::collide(Entity* entity)\n    {\n        if (this-&gt;collidesWith(entity))\n        {\n            ...\n        }\n    }\n}\n</code></pre>\n\n<p><code>Renderer.h</code></p>\n\n<pre><code>#ifndef RENDERER_H\n\n#define RENDERER_H\n\n#include \"Component.h\"\n\nnamespace Components\n{\n    class Renderer : public Component\n    {\n        public:\n            Renderer(Entity* entity);\n\n            virtual void update(float elapsedTime) override;\n    };\n}\n\n\n#endif\n</code></pre>\n\n<p><code>Renderer.cpp</code></p>\n\n<pre><code>#include \"Renderer.h\"\n\nnamespace Components\n{\n    Renderer::Renderer(Entity* entity) : Component(entity){ }\n\n    void Renderer::update(float elapsedTime){}\n}\n</code></pre>\n\n<p>And <code>Physics</code> is pretty much empty and I don't feel like adding it right now.\n<br>\n<br>\nThanks a lot\n<br>\n<br>\n<br>\n<em>I'm having way to much problems with includes. My code does a lot of double referencing for performance reasons, and each pair of classes accesses the methods of each other. C++ hates this, and defining which class should forward declare the other is a pain in the ass.</em></p>\n"}, {"tags": ["c++", "list", "queue", "hashtable"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1521674825, "post_id": 49417900, "comment_id": 85837984, "body": "When In see a pop function in a while not empty loop, I expect an empty container at the end. Can we have a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Sidenote: Lot of unexpected pointer use here. Example: what is <code>top</code> for?"}, {"owner": {"reputation": 1, "user_id": 8218967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ba77c0fd7db902f45597d2b5a0e381?s=128&d=identicon&r=PG&f=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/8218967/sai"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521677458, "post_id": 49417900, "comment_id": 85838717, "body": "What dumpStack does is it takes a stack and puts into a queue. After dumping the whole stack to a queue, it prints the each queue in the hashTable (total of 10 queues). So if I had numbers 19 and 9 in a queue, it would go in hashTable[9]. I use a temp pointer to reference the queue in hashTable[9] and use the temp variable to iterate. Not sure why the main queue would change as well."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8218967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ba77c0fd7db902f45597d2b5a0e381?s=128&d=identicon&r=PG&f=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/8218967/sai"}, "is_accepted": true, "score": 0, "last_activity_date": 1521684434, "creation_date": 1521684434, "answer_id": 49419383, "question_id": 49417900, "link": "https://stackoverflow.com/questions/49417900/copied-queue-changes-queues-head-pointer-points-to-null-after-printing-temp-que/49419383#49419383", "title": "Copied queue changes Queue&#39;s head pointer points to null after printing temp Queue", "body": "<p>What I did was I changed listLinkedQueue *temp into listNode *temp and let temp equal to head->next since head represents a dummy node in my code. This way I never change the original sequence of the queue when I iterate through it.</p>\n\n<pre><code>void printTable(linkedListQueue **ht) {\n    for (int i = 0; i &lt; 10; i++) {\n        listNode *temp = ht[i]-&gt;head-&gt;next;\n        if (temp != nullptr) {\n            cout &lt;&lt; \"Table [\" &lt;&lt; currentTable &lt;&lt; \"][\" &lt;&lt; i &lt;&lt; \"]:\";\n            while (temp != nullptr) {\n                cout &lt;&lt; \" \" &lt;&lt; temp-&gt;data;\n                if (temp-&gt;next != nullptr)\n                    cout &lt;&lt; \",\";\n                temp = temp-&gt;next;\n            }\n            cout &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8218967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ba77c0fd7db902f45597d2b5a0e381?s=128&d=identicon&r=PG&f=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/8218967/sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 49419383, "answer_count": 1, "score": 0, "last_activity_date": 1521684434, "creation_date": 1521673345, "last_edit_date": 1521677733, "question_id": 49417900, "link": "https://stackoverflow.com/questions/49417900/copied-queue-changes-queues-head-pointer-points-to-null-after-printing-temp-que", "title": "Copied queue changes Queue&#39;s head pointer points to null after printing temp Queue", "body": "<p>After the end of dumpStack, the call to printTable prints the hashTable with the queue in each index perfectly fine. When I try to individually print it afterwards, head->next points to null (the head points to a dummy node). How can I print the temp queue without changing the main queue's pointers? I'm not allowed to use vectors. </p>\n\n<pre><code>void dumpStack(listNode *top, int currentDigit, int currentTable) {\n    while (isEmpty() == 0) {\n        listNode *temp = pop();\n        int digit = getDigit(temp, currentDigit);\n        int hashIndex = digit;\n        addTail(hashTable[currentTable][hashIndex], temp);\n        cout &lt;&lt; \"Added \" &lt;&lt; temp-&gt;data &lt;&lt; \" to hashTable[\" &lt;&lt; currentTable &lt;&lt; \"][\" &lt;&lt; hashIndex &lt;&lt; \"]\" &lt;&lt; endl;\n        cout &lt;&lt; hashTable[currentTable][hashIndex]-&gt;head-&gt;next-&gt;data &lt;&lt; endl;\n    }\n    cout &lt;&lt; \"DONE DUMPSTACK\" &lt;&lt; endl;\n    printTable(hashTable[currentTable]);\n    cout &lt;&lt; hashTable[currentTable][9]-&gt;head-&gt;next-&gt;data &lt;&lt; endl;\n}\n\nvoid printTable(linkedListQueue **ht) {\n    for (int i = 0; i &lt; 10; i++) {\n        linkedListQueue *temp = ht[i];\n        if (isEmpty(temp) == 0) {\n            cout &lt;&lt; \"Table [\" &lt;&lt; currentTable &lt;&lt; \"][\" &lt;&lt; i &lt;&lt; \"]:\";\n            while (temp-&gt;head-&gt;next != nullptr) {\n                cout &lt;&lt; \" \" &lt;&lt; temp-&gt;head-&gt;next-&gt;data;\n                if (temp-&gt;head-&gt;next-&gt;next != nullptr)\n                    cout &lt;&lt; \",\";\n                temp-&gt;head-&gt;next = temp-&gt;head-&gt;next-&gt;next;\n            }\n            cout &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n\n<p>All parts of my code are correct and it does not have any runtime errors.</p>\n"}, {"tags": ["c++", "dictionary", "stl"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521672792, "post_id": 49417716, "comment_id": 85837348, "body": "I recommend reading through a good data structures book, maybe an advanced one also."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1521672805, "post_id": 49417716, "comment_id": 85837356, "body": "There is no index in a map"}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 5, "creation_date": 1521672859, "post_id": 49417716, "comment_id": 85837378, "body": "You can use a sorted <code>vector&lt;pair&gt;</code>, use <code>std::lower_bound</code> to access by key."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1521672871, "post_id": 49417716, "comment_id": 85837383, "body": "I&#39;m curious, why do you want that?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1521672903, "post_id": 49417716, "comment_id": 85837399, "body": "There is no <code>random</code> or direct access with a <code>map</code>.  Consider that many implementations use a <code>red-black</code> tree, which has links.  Trying to find the 10th node is time consuming, at best."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 3, "creation_date": 1521672912, "post_id": 49417716, "comment_id": 85837402, "body": "Keep a <i>sorted vector</i> and use binary searches (like lower_bound). Wrap that in a class."}, {"owner": {"reputation": 687, "user_id": 8785864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc539da405cd593d7539fc965d512950?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Gutierrez", "link": "https://stackoverflow.com/users/8785864/garrett-gutierrez"}, "edited": false, "score": 1, "creation_date": 1521673820, "post_id": 49417716, "comment_id": 85837706, "body": "Do you still want O(logn) insertions? Note that with the sorted vector recommendation independent insertions will be O(n), though you would have the option to do batch insertions at O(nlogn) by pushing back all the elements and then sorting."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1521714077, "post_id": 49417716, "comment_id": 85852994, "body": "A <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/multi_index/doc/tutorial/indices.html#rnk_indices\" rel=\"nofollow noreferrer\"><code>boost::multi_index::ranked_unique</code></a> structure has logarithmic by key <i>and</i> logarithmic by index lookup"}], "answers": [{"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 0, "last_activity_date": 1521713025, "creation_date": 1521713025, "answer_id": 49425689, "question_id": 49417716, "link": "https://stackoverflow.com/questions/49417716/c-stdmap-how-to-access-keys-by-index-location/49425689#49425689", "title": "C++ std::map how to access keys by index location", "body": "<p>You could just iterate through them:</p>\n\n<pre><code>my_fancy_map['a'] = 'value_for_a'\nmy_fancy_map['b'] = 'value_for_b'\n\nauto location = std::begin(my_fancy_map);\nassert location.first == 'a'\n++location;\nassert location.first == 'b'\nassert location.second == 'value_for_b'\nassert my_fancy_map['a'] == 'value_for_a'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2698, "user_id": 2030532, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ac8b7394596f759b9688d2ed419db6e6?s=128&d=identicon&r=PG", "display_name": "motam79", "link": "https://stackoverflow.com/users/2030532/motam79"}, "edited": false, "score": 0, "creation_date": 1522096113, "post_id": 49496512, "comment_id": 86004185, "body": "Thanks for your answer. Do you happen to know if there is a benchmark on boost::multi-index?"}, {"owner": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "reply_to_user": {"reputation": 2698, "user_id": 2030532, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ac8b7394596f759b9688d2ed419db6e6?s=128&d=identicon&r=PG", "display_name": "motam79", "link": "https://stackoverflow.com/users/2030532/motam79"}, "edited": false, "score": 1, "creation_date": 1522132384, "post_id": 49496512, "comment_id": 86015627, "body": "Benchmark against what? You might find this presentation useful: <a href=\"http://www.mkrevuelta.com/m/pdf/UsingStdCpp_2017_MartinKR_SuperTree_16_9.pdf\" rel=\"nofollow noreferrer\">mkrevuelta.com/m/pdf/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "is_accepted": true, "score": 1, "last_activity_date": 1522224382, "last_edit_date": 1522224382, "creation_date": 1522082547, "answer_id": 49496512, "question_id": 49417716, "link": "https://stackoverflow.com/questions/49417716/c-stdmap-how-to-access-keys-by-index-location/49496512#49496512", "title": "C++ std::map how to access keys by index location", "body": "<p>You can use Boost.MultiIndex's <a href=\"http://www.boost.org/libs/multi_index/doc/tutorial/indices.html#rnk_indices\" rel=\"nofollow noreferrer\">ranked indices</a>:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/b5e1a65715d0d2ce\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/multi_index_container.hpp&gt;\n#include &lt;boost/multi_index/ranked_index.hpp&gt;\n#include &lt;boost/multi_index/member.hpp&gt;\n\nusing namespace boost::multi_index;\n\ntemplate&lt;typename K,typename T&gt;\nusing ranked_map=multi_index_container&lt;\n  std::pair&lt;K,T&gt;,\n  indexed_by&lt;\n    ranked_unique&lt;member&lt;std::pair&lt;K,T&gt;,K,&amp;std::pair&lt;K,T&gt;::first&gt;&gt;\n  &gt;\n&gt;;\n\n#include &lt;cassert&gt;\n#include &lt;string&gt;\n\nint main()\n{\n  ranked_map&lt;std::string,std::string&gt; m;\n\n  m.emplace(\"a\",\"value for a\");\n  m.emplace(\"b\",\"value for b\");\n\n  assert(m.nth(0)-&gt;first==\"a\");\n  assert(m.nth(1)-&gt;first==\"b\");\n  assert(m.nth(1)-&gt;second==\"value for b\");\n  assert(m.find(\"a\")-&gt;second==\"value for a\");\n}\n</code></pre>\n\n<p>Note, however, that <code>nth</code> is not O(1) but logarithmic, so ranked indices are not exactly random-access. </p>\n\n<p><strong>Postscript:</strong> Another alternative with true random access is Boost.Container's <a href=\"http://www.boost.org/doc/html/container/non_standard_containers.html#container.non_standard_containers.flat_xxx\" rel=\"nofollow noreferrer\">flat associative containers</a>:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/5b060201918ccb0b\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/container/flat_map.hpp&gt;\n#include &lt;cassert&gt;\n#include &lt;string&gt;\n\nint main()\n{\n  boost::container::flat_map&lt;std::string,std::string&gt; m;\n\n  m[\"a\"]=\"value for a\";\n  m[\"b\"]=\"value for b\";\n\n  assert(m.nth(0)-&gt;first==\"a\");\n  assert(m.nth(1)-&gt;first==\"b\");\n  assert(m.nth(1)-&gt;second==\"value for b\");\n  assert(m[\"a\"]==\"value for a\");\n}\n</code></pre>\n\n<p>The downside here is that insertion takes linear rather than logarithmic time.</p>\n"}], "owner": {"reputation": 2698, "user_id": 2030532, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ac8b7394596f759b9688d2ed419db6e6?s=128&d=identicon&r=PG", "display_name": "motam79", "link": "https://stackoverflow.com/users/2030532/motam79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2299, "favorite_count": 0, "accepted_answer_id": 49496512, "answer_count": 2, "score": 0, "last_activity_date": 1522224382, "creation_date": 1521672135, "question_id": 49417716, "link": "https://stackoverflow.com/questions/49417716/c-stdmap-how-to-access-keys-by-index-location", "title": "C++ std::map how to access keys by index location", "body": "<p>I would like to use C++ <code>std::map</code> to access the value associated to a given key in log(n) time. Since the keys of a <code>std::map</code> are sorted, technically, I can access the keys by the location in the sorted order. \nI know std::map does not have a random access iterator. Is there any \"map like\" data structure providing both access through the keys (by using the [] operator) and also providing the (read-only) random access though the location of the key in the sorted order. Here is a basic example:</p>\n\n<pre><code>my_fancy_map['a'] = 'value_for_a'\nmy_fancy_map['b'] = 'value_for_b'\n\nassert my_fancy_map.get_key_at_location(0) == 'a'\nassert my_fancy_map.get_key_at_location(1) == 'b'\nassert my_fancy_map.get_value_at_location(1) == 'value_for_b'\nassert my_fancy_map['a'] == 'value_for_a'\n</code></pre>\n"}, {"tags": ["c++", "profiling", "timing", "boost-timer"], "comments": [{"owner": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "edited": false, "score": 1, "creation_date": 1521673270, "post_id": 49417671, "comment_id": 85837520, "body": "You may want to take a look at <code>std::chrono</code> library <a href=\"http://en.cppreference.com/w/cpp/header/chrono\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/header/chrono</a>"}, {"owner": {"reputation": 193, "user_id": 7927672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349c309560c1a72c588d75e757b651b7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian4264 ", "link": "https://stackoverflow.com/users/7927672/ian4264"}, "edited": false, "score": 0, "creation_date": 1521675046, "post_id": 49417671, "comment_id": 85838058, "body": "Depending on just how much code you want to measure, I would consider using a couple of RAII Classes, one to keep the overall time records and print the summary at the end, and the other to record the individual time for a step, where it&#39;s constructor records time.now() and it&#39;s destructor some the calculation and adds the duration to the overall tally. With such a system you can have minimal extra code to do the measuring and printing as well as allowing you to calculate average times for steps, how many times they run etc."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1521677660, "post_id": 49417671, "comment_id": 85838769, "body": "Look into the <code>ctime</code> and <code>chrono</code> libraries."}, {"owner": {"reputation": 7269, "user_id": 597609, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f06fbe276a86734c80c4845319e25abb?s=128&d=identicon&r=PG", "display_name": "Andrea Zonca", "link": "https://stackoverflow.com/users/597609/andrea-zonca"}, "edited": false, "score": 0, "creation_date": 1521710617, "post_id": 49417671, "comment_id": 85850536, "body": "thanks, isn&#39;t this a common situation? isn&#39;t there already a full fledged library that can handle this without writing my own?"}], "answers": [{"comments": [{"owner": {"reputation": 7269, "user_id": 597609, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f06fbe276a86734c80c4845319e25abb?s=128&d=identicon&r=PG", "display_name": "Andrea Zonca", "link": "https://stackoverflow.com/users/597609/andrea-zonca"}, "edited": false, "score": 0, "creation_date": 1521710756, "post_id": 49418566, "comment_id": 85850624, "body": "thanks! this is very useful, what if the guard is <b>inside</b> a loop, would it add up each run? also, let&#39;s say I want a whole timer library, which one do you recommend?"}, {"owner": {"reputation": 2012, "user_id": 1003701, "user_type": "registered", "accept_rate": 87, "profile_image": "https://graph.facebook.com/1091820450934096/picture?type=large", "display_name": "Miroslav Mares", "link": "https://stackoverflow.com/users/1003701/miroslav-mares"}, "reply_to_user": {"reputation": 7269, "user_id": 597609, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f06fbe276a86734c80c4845319e25abb?s=128&d=identicon&r=PG", "display_name": "Andrea Zonca", "link": "https://stackoverflow.com/users/597609/andrea-zonca"}, "edited": false, "score": 0, "creation_date": 1521737252, "post_id": 49418566, "comment_id": 85870210, "body": "@AndreaZonca If the RAII guard is <b>inside</b> a loop, it gets created and destroyed each loop iteration. So the result is &quot;a lots of measurements of single loop iteration&quot;. To answer your question about the timer library, I unfortunately cannot tell as I only used <code>std::chrono</code>. But I would not hesitate to try <code>boost::timer</code>, as Boost libraries are usually very high quality."}], "tags": [], "owner": {"reputation": 2012, "user_id": 1003701, "user_type": "registered", "accept_rate": 87, "profile_image": "https://graph.facebook.com/1091820450934096/picture?type=large", "display_name": "Miroslav Mares", "link": "https://stackoverflow.com/users/1003701/miroslav-mares"}, "is_accepted": true, "score": 1, "last_activity_date": 1521677809, "creation_date": 1521677809, "answer_id": 49418566, "question_id": 49417671, "link": "https://stackoverflow.com/questions/49417671/aggregate-wall-time-of-code-blocks-in-c/49418566#49418566", "title": "Aggregate wall time of code blocks in C++", "body": "<p>Not very advanced, but for basic time measurement, you can use <code>std::chrono</code> library, specifically the <a href=\"http://en.cppreference.com/w/cpp/chrono/high_resolution_clock\" rel=\"nofollow noreferrer\"><code>std::chrono::high_resolution_clock</code></a> - the clock\nwith smallest tick period (= highest accuracy) provided by the implementation.</p>\n\n<p>For some more trivial time measurement, I have used RAII classes similar to this:</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;cstdint&gt;\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass TimeMeasureGuard {\npublic:\n    using clock_type = std::chrono::high_resolution_clock;\n\nprivate:\n    const std::string m_testName;\n    std::ostream&amp; m_os;\n\n    clock_type::time_point started_at;\n    clock_type::time_point ended_at;\n\npublic:\n    TimeMeasureGuard(const std::string&amp; testName, std::ostream&amp; os = std::cerr)\n        : m_testName(testName), m_os(os)\n    {\n        started_at = clock_type::now();\n    }\n\n    ~TimeMeasureGuard()\n    {\n        ended_at = clock_type::now();\n\n        // Get duration\n        const auto duration = ended_at - started_at;\n\n        // Get duration in nanoseconds\n        const auto durationNs = std::chrono::nanoseconds(duration).count();\n        // ...or in microseconds:\n        const auto durationUs\n            = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(duration).count();\n\n        // Report total run time into 'm_os' stream\n        m_os &lt;&lt; \"[Test \" &lt;&lt; std::quoted(m_testName) &lt;&lt; \"]: Total run time: \"\n             &lt;&lt; durationNs &lt;&lt; \" ns, \" &lt;&lt; \"or: \" &lt;&lt; durationUs &lt;&lt; \" us\" &lt;&lt; std::endl;\n    }\n};\n</code></pre>\n\n<p>Of course this is a very simple class, which would deserve several improvements before being used for a real measurement.</p>\n\n<p>You can use this class like:</p>\n\n<pre><code>std::uint64_t computeSquares()\n{\n    std::uint64_t interestingNumbers = 0;\n    {\n        auto time_measurement = TimeMeasureGuard(\"Test1\");\n\n        for (std::uint64_t x = 0; x &lt; 1'000; ++x) {\n            for (std::uint64_t y = 0; y &lt; 1'000; ++y) {\n                if ((x * y) % 42 == 0)\n                    ++interestingNumbers;\n            }\n        }\n    }\n    return interestingNumbers;\n}\n\nint main()\n{\n    std::cout &lt;&lt; \"Computing all x * y, where 'x' and 'y' are from 1 to 1'000...\"\n              &lt;&lt; std::endl;\n    const auto res = computeSquares();\n    std::cerr &lt;&lt; \"Interesting numbers found: \" &lt;&lt; res &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>Computing all x * y, where 'x' and 'y' are from 1 to 1'000...\n[Test \"Test1\"]: Total run time: 6311371 ns, or: 6311 us\nInteresting numbers found: 111170\n</code></pre>\n\n<p>For simple time measurement cases, this might be easier than using\na whole timer library, and it's just a few lines of code, you don't\nneed to include lots of headers.</p>\n"}], "owner": {"reputation": 7269, "user_id": 597609, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f06fbe276a86734c80c4845319e25abb?s=128&d=identicon&r=PG", "display_name": "Andrea Zonca", "link": "https://stackoverflow.com/users/597609/andrea-zonca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 49418566, "answer_count": 1, "score": 0, "last_activity_date": 1521677809, "creation_date": 1521671924, "question_id": 49417671, "link": "https://stackoverflow.com/questions/49417671/aggregate-wall-time-of-code-blocks-in-c", "title": "Aggregate wall time of code blocks in C++", "body": "<p>I have a large codebase and I want to manually add some timers to profile some sections of the code.\nSome of those sections are within a loop, so I would like to aggregate all the wall time spent there for each iteration.</p>\n\n<p>What I'd like to do in a Pythonic pseudo-code:</p>\n\n<pre><code>time_step_1 = 0\ntime_step_2 = 0\nfor pair in pairs:\n\n    start_step_1 = time.now()\n    run_step_1(pair)\n    time_step_1 += start_step_1 - time.now()\n\n    start_step_2 = time.now()\n    run_step_2(pair)\n    time_step_2 += start_step_2 - time.now()\n\nprint(\"Time spent in step 1\", time_step_1)\nprint(\"Time spent in step 2\", time_step_2)\n</code></pre>\n\n<p>Is there a library in C++ to do this?\nOtherwise would you recommend using <code>boost::timer</code>, create a map of timers and then resume and stop at each iteration?</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 6, "creation_date": 1521671900, "post_id": 49417641, "comment_id": 85837089, "body": "<code>processor_processid_map[128] = { 0L };</code> invokes <i>undefined behavior</i> by writing past the bounds of the array"}, {"owner": {"reputation": 117, "user_id": 4286125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9328597d455fe111d6355860d6bd27c8?s=128&d=identicon&r=PG&f=1", "display_name": "MoeKav", "link": "https://stackoverflow.com/users/4286125/moekav"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1521672021, "post_id": 49417641, "comment_id": 85837116, "body": "So why does it cause a crash? Does any memory leak cause a crash?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1521672144, "post_id": 49417641, "comment_id": 85837152, "body": "<i>undefined behavior</i> means anything can happen - including crashes (also you don&#39;t have a memory leak in this code)"}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1521672503, "post_id": 49417641, "comment_id": 85837255, "body": "This might be a good time to learn to use your debugger.  A debug build in VS might have warned you that you&#39;d just corrupted the stack by writing past the end of your arrays."}, {"owner": {"reputation": 895, "user_id": 7418646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVlz8.jpg?s=128&g=1", "display_name": "Samantha", "link": "https://stackoverflow.com/users/7418646/samantha"}, "edited": false, "score": 0, "creation_date": 1521681792, "post_id": 49417641, "comment_id": 85839620, "body": "This is an out-of-bounds error, not a memory leak."}, {"owner": {"reputation": 89, "user_id": 4147896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c4bb2ccb6d45ae560fef95a10397206?s=128&d=identicon&r=PG&f=1", "display_name": "mman", "link": "https://stackoverflow.com/users/4147896/mman"}, "edited": false, "score": 1, "creation_date": 1521700459, "post_id": 49417641, "comment_id": 85844802, "body": "It might be difficult to pinpoint the problem without a debugger. My guess is that the out of bounds assignment has changed the __onexitbegin pointer. __onexitbegin and _onexitend stores the range of functions needed to be called while exiting, and the system would have crashed on calling the exitbegin."}], "answers": [{"tags": [], "owner": {"reputation": 767718, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 2, "last_activity_date": 1521683356, "last_edit_date": 1521683356, "creation_date": 1521679328, "answer_id": 49418760, "question_id": 49417641, "link": "https://stackoverflow.com/questions/49417641/c-program-crash-on-exit/49418760#49418760", "title": "C++ Program Crash on exit", "body": "<p>I'd say you're slightly confused about what:</p>\n\n<pre><code>processor_processid_map[128] = { 0L };\n</code></pre>\n\n<p>is actually doing. The fact that you have braces in there seems to indicate you think it will set all values in the array to zero but that is <em>not</em> the case. You can <em>initialise</em> the array that way but assigning to it is a different matter.</p>\n\n<p>What that code is doing is trying to set element number <code>128</code> to zero and, since elements are restricted to the range <code>0..127</code>, what you have there is undefined behaviour.</p>\n\n<p>If you <em>do</em> wish to zero out the entire array, there are a number of ways to do this, including:</p>\n\n<pre><code>// Simple loop.\nfor (int i = 0; i &lt; sizeof(id_map) / sizeof(*id_map); ++i)\n    id_map[i] = 0;\n\n// Setting memory.\n#include &lt;cstring&gt;\nmemset(id_map, 0, sizeof(id_map));\n\n// Fill algorithm.\n#include &lt;algorithm&gt;\nstd::fill(id_map, id_map + sizeof(id_map) / sizeof(*id_map), 0);\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 4286125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9328597d455fe111d6355860d6bd27c8?s=128&d=identicon&r=PG&f=1", "display_name": "MoeKav", "link": "https://stackoverflow.com/users/4286125/moekav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 49418760, "answer_count": 1, "score": 0, "last_activity_date": 1521683356, "creation_date": 1521671751, "question_id": 49417641, "link": "https://stackoverflow.com/questions/49417641/c-program-crash-on-exit", "title": "C++ Program Crash on exit", "body": "<p>I have a very simple program that I don't know why a crash occurs on exit.\nMy main function is a simple <code>cout&lt;&lt;\"Hello world\";</code></p>\n\n<p>But I've added another cpp file:</p>\n\n<p>system_information.cpp:</p>\n\n<pre><code>system_information::system_information() {\n    threadid_processid_map[22]=23;\n\n    processor_processid_map[128] = { 0L };\n    processor_threadid_map[128] = { 0L };\n}\n</code></pre>\n\n<p>And the header file looks like:</p>\n\n<p>system_information.h</p>\n\n<pre><code>class system_information{\npublic:\n\n    DWORD processor_processid_map[128];\n    DWORD processor_threadid_map[128];              \n\n    unordered_map&lt;DWORD, DWORD&gt; threadid_processid_map;\n    system_information();\n};\n</code></pre>\n\n<p>And I simply have this file to declare in instance of my class:</p>\n\n<p>parse.cpp:</p>\n\n<pre><code>#include \"system_information.h\"\nsystem_information sys_info;\n</code></pre>\n\n<p>My program crashes on exit on crt0at.c at this line:</p>\n\n<pre><code>onexitbegin_new = (_PVFV *) DecodePointer(__onexitbegin);\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "string", "bitset"], "comments": [{"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 0, "creation_date": 1521672657, "post_id": 49417639, "comment_id": 85837297, "body": "Looks like there&#39;s a <code>to_string</code> function: <a href=\"http://en.cppreference.com/w/cpp/utility/bitset/to_string\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/bitset/to_string</a>"}, {"owner": {"reputation": 31, "user_id": 3809217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUpm2.png?s=128&g=1", "display_name": "vister", "link": "https://stackoverflow.com/users/3809217/vister"}, "reply_to_user": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 0, "creation_date": 1521674517, "post_id": 49417639, "comment_id": 85837898, "body": "Yes, but it converts to a binary string and what I want is a decimal representation"}, {"owner": {"reputation": 2921, "user_id": 1610473, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0aba1bea3eea941fd79209f3c6704453?s=128&d=identicon&r=PG", "display_name": "SaganRitual", "link": "https://stackoverflow.com/users/1610473/saganritual"}, "edited": false, "score": 0, "creation_date": 1521675563, "post_id": 49417639, "comment_id": 85838192, "body": "Just double-checking: are you sure you need a decimal number? What&#39;s wrong with hexadecimal? If you&#39;re going to show something to the user, I&#39;m guessing it won&#39;t matter to them whether it&#39;s decimal or hex--it won&#39;t mean anything to them either way. Hex would be way, way easier."}, {"owner": {"reputation": 31, "user_id": 3809217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUpm2.png?s=128&g=1", "display_name": "vister", "link": "https://stackoverflow.com/users/3809217/vister"}, "edited": false, "score": 0, "creation_date": 1521676981, "post_id": 49417639, "comment_id": 85838613, "body": "I&#39;m writing this program as laboratory project and it must have simple interace in wchich user enters two decimal numbers and which operation to perform and gets the result. So unfortunately it must be decimal."}, {"owner": {"reputation": 31, "user_id": 3809217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUpm2.png?s=128&g=1", "display_name": "vister", "link": "https://stackoverflow.com/users/3809217/vister"}, "edited": false, "score": 0, "creation_date": 1521677473, "post_id": 49417639, "comment_id": 85838720, "body": "And I know that displaying such long numbers don&#39;t tell anything to the user but I only do this to meet the requirements"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1521677822, "post_id": 49417639, "comment_id": 85838808, "body": "Might want to look for some big number libraries."}, {"owner": {"reputation": 2921, "user_id": 1610473, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0aba1bea3eea941fd79209f3c6704453?s=128&d=identicon&r=PG", "display_name": "SaganRitual", "link": "https://stackoverflow.com/users/1610473/saganritual"}, "edited": false, "score": 0, "creation_date": 1521679379, "post_id": 49417639, "comment_id": 85839140, "body": "You say it&#39;s a lab assignment? Converting a binary value <i>hundreds</i> of digits long into decimal? That&#39;s going to be hard even for professionals. Were you taught anything that could be applied to this problem? Is your prof in the habit of giving you super-hard problems without discussing any of the basics with you?"}, {"owner": {"reputation": 31, "user_id": 3809217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUpm2.png?s=128&g=1", "display_name": "vister", "link": "https://stackoverflow.com/users/3809217/vister"}, "edited": false, "score": 0, "creation_date": 1521761472, "post_id": 49417639, "comment_id": 85882140, "body": "Thanks for advice. I think that for now I&#39;ll just convert and display in hex because i have no time to solve this problem."}], "owner": {"reputation": 31, "user_id": 3809217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUpm2.png?s=128&g=1", "display_name": "vister", "link": "https://stackoverflow.com/users/3809217/vister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521671741, "creation_date": 1521671741, "question_id": 49417639, "link": "https://stackoverflow.com/questions/49417639/convert-stdbitset-to-decimal-stdstring", "title": "Convert std::bitset to decimal std::string", "body": "<p>I have a class for operations on numbers of N-bit lenght in which I use <em>std::bitset</em> for storing a number. I have to write a method for converting <em>std::bitset</em> to decimal <em>string</em>, so that the results of operations can be displayed to user. The problem is I cannot use fundamental types because my number might have hundrets of digits.</p>\n\n<p>Do you have an idea for any algorithm that can do it?</p>\n"}, {"tags": ["c++", "image-processing", "cuda", "gpu", "npp"], "answers": [{"comments": [{"owner": {"reputation": 30126, "user_id": 649233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b093ba11c148847569acfa653964663?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/649233/jason"}, "edited": false, "score": 0, "creation_date": 1521694665, "post_id": 49420407, "comment_id": 85842695, "body": "That is an awesome find! I did see that code in the jpegNPP example, but it never occurred to me that was the issue, and the error response was making things confusing as well... <code>NPP_RESIZE_FACTOR_ERROR</code> isn&#39;t documented as being an error return value from the <code>nppiResize</code> family of functions, and furthermore it&#39;s documented as being a scale-by-zero or negative-scale error, which I didn&#39;t see where that would have occurred."}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 4, "last_activity_date": 1521740424, "last_edit_date": 1521740424, "creation_date": 1521691885, "answer_id": 49420407, "question_id": 49417529, "link": "https://stackoverflow.com/questions/49417529/undocumented-resize-error-when-using-nvidia-npp-to-resize-image/49420407#49420407", "title": "Undocumented resize error when using Nvidia NPP to resize image", "body": "<p>Looking at the jpegNPP CUDA sample code, I observe this sequence:</p>\n\n<pre><code>    NppiInterpolationMode eInterploationMode = NPPI_INTER_SUPER;\n\n    if (nScaleFactor &gt;= 1.f)\n        eInterploationMode = NPPI_INTER_LANCZOS;\n\n    NPP_CHECK_NPP(nppiResize_8u_C1R(..., eInterploationMode));\n}\n</code></pre>\n\n<p>When I switch your interpolation mode from <code>NPPI_INTER_SUPER</code> to <code>NPPI_INTER_LANCZOS</code> in your example, the error goes away for me (CUDA 9.1, linux). I suspect there is some undocumented (AFAICT) requirement in NPP library for this function, that the <code>NPPI_INTER_SUPER</code> interpolation mode not be used when the resize scale factor is 1.0 or greater (yours is 1.0, it is the ratio of the sourceROI/destROI).</p>\n\n<p>I suggest you study the usage in that sample code, and put a similar mechanism in place in your code.</p>\n\n<p>I've already put in a request to have the CUDA documentation updated with appropriate information.  I don't have any further details.  You're welcome to file your own bug at <a href=\"http://developer.nvidia.com\" rel=\"nofollow noreferrer\">http://developer.nvidia.com</a></p>\n\n<p>update: I've confirmed with the CUDA team that a documentation update for this is planned in a future CUDA release.  In a nutshell, the requirement to use <code>NPPI_INTER_SUPER</code> is that you must be doing downscaling.  That is, the ratio of X source ROI dimension divided by the X destination ROI dimension must be greater than 1.0.  Likewise the ratio of the Y source ROI dimension divided by the Y destination ROI dimension must be greater than 1.0.  If either of these conditions are not met, the <code>NPPI_INTER_SUPER</code> interpolation mode cannot be used.  For example, the <code>NPPI_INTER_LANCZOS</code> mode can be used instead.</p>\n"}], "owner": {"reputation": 30126, "user_id": 649233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b093ba11c148847569acfa653964663?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/649233/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1223, "favorite_count": 1, "accepted_answer_id": 49420407, "answer_count": 1, "score": 2, "last_activity_date": 1521740424, "creation_date": 1521671148, "last_edit_date": 1521694179, "question_id": 49417529, "link": "https://stackoverflow.com/questions/49417529/undocumented-resize-error-when-using-nvidia-npp-to-resize-image", "title": "Undocumented resize error when using Nvidia NPP to resize image", "body": "<p>I'm attempting to use the Nvidia performance primatives library to resize an image, but the <code>nppiResize_8u_C3R</code> function is throwing a <code>NPP_RESIZE_FACTOR_ERROR</code> that is not listed in the documentation as one of the error return codes for that function.  Here is my hopefully simple code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;nppi.h&gt;\n\nint image_a_pitch;\nNppiSize image_a_size = {.width = 960, .height = 540};\nNppiRect image_a_roi = {.x = 0, .y = 0, .width = 960, .height = 540};\nNpp8u* image_a = nppiMalloc_8u_C3(960, 540, &amp;image_a_pitch);\n\nint image_b_pitch;\nNppiSize image_b_size = {.width = 960, .height = 540};\nNppiRect image_b_roi = {.x = 0, .y = 0, .width = 960, .height = 540};\nNpp8u* image_b = nppiMalloc_8u_C3(960, 540, &amp;image_b_pitch);\n\nNppStatus result = nppiResize_8u_C3R(image_a, image_a_pitch, image_a_size, image_a_roi, image_b, image_b_pitch, image_b_size, image_b_roi, NPPI_INTER_SUPER);\n\nif (result != NPP_SUCCESS) {\n    std::cerr &lt;&lt; \"Error executing Resize -- code: \" &lt;&lt; result &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>You might note I'm not actually resizing the image, and yes, that is true, but I'm attempting to create the simplest case for this error.  From what I've been testing, it doesn't seem to matter what sizes I use for the images, I still get the same return error code, which does not seem to be a valid error code for that function, but rather an error code for the depreciated <code>nppiResizeSqrPixel_8u_C3R</code>.</p>\n\n<p>I'd definitely appreciate some help pointing out whatever error I'm doing in setting up the library calls that is causing this error.</p>\n"}, {"tags": ["c++", "explorer", "file-browser", "shell-namespace-extension"], "owner": {"reputation": 21, "user_id": 9531382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bert", "link": "https://stackoverflow.com/users/9531382/bert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1546811090, "creation_date": 1521670928, "last_edit_date": 1546811090, "question_id": 49417489, "link": "https://stackoverflow.com/questions/49417489/windows-10-namespace-extension-openfiledialog-and-the-temporary-folder", "title": "Windows 10 Namespace Extension - OpenFileDialog and the temporary folder", "body": "<p>For a little side project I've been working on a namespace extension to view and modify a custom archive format straight from windows explorer. This is working fine: I can browse the archive, modify it etc., but I've run into a little stumbling block when it comes to the windows file browser and how it handles opening files straight from the archive.</p>\n\n<p>For whatever reason, when opening a file from the archive it puts a copy in the windows Cache folder (C:\\Users\\User\\AppData\\Local\\Microsoft\\Windows\\INetCache\\IE). It also changes the filename by appending \"[]\". I've noticed that the windows zip archive handling has the same behaviour. This is causing issues for an application that I want to allow to select files straight from the archive, since it copies the file in there without any sub-folder information and I need to know the relative path of the selected file (relative to the archive). </p>\n\n<p>So my questions are:</p>\n\n<ol>\n<li>Can I override this temporary file path somehow/somewhere, so that I have full control over where this temporary file is placed and how it's named?</li>\n<li>Barring 1, is there a way for me to get the original path from the file(browser)? (using WPF for the client application)</li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1521669356, "post_id": 49417153, "comment_id": 85836131, "body": "Eh, <code>std::strtod</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1521669361, "post_id": 49417153, "comment_id": 85836134, "body": "Can you give an example?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1521669424, "post_id": 49417153, "comment_id": 85836155, "body": "Start by posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> illustrating your problem. Then <i>maybe</i> we&#39;ll have a chance to answer. Bad question; downvoted."}, {"owner": {"reputation": 1, "user_id": 9059075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3de31cacf6bef77206cee3eccdc3e350?s=128&d=identicon&r=PG&f=1", "display_name": "CT3S", "link": "https://stackoverflow.com/users/9059075/ct3s"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1521669434, "post_id": 49417153, "comment_id": 85836161, "body": "I tried <code>std::strtod</code> didn&#39;t get any luck. @HolyBlackCat"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 2, "creation_date": 1521669453, "post_id": 49417153, "comment_id": 85836172, "body": "Please <a href=\"https://stackoverflow.com/posts/49417153/edit\">show</a> what you tried."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1521669472, "post_id": 49417153, "comment_id": 85836179, "body": "It doesn&#39;t mean it doesn&#39;t fit for your purpose. Show us your attempt and how it didn&#39;t work."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1521669547, "post_id": 49417153, "comment_id": 85836223, "body": "see here <a href=\"https://stackoverflow.com/questions/5687269/confused-how-to-convert-from-a-string-to-double-using-strtod-in-c\" title=\"confused how to convert from a string to double using strtod in c\">stackoverflow.com/questions/5687269/&hellip;</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1521669875, "post_id": 49417153, "comment_id": 85836359, "body": "<a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stof\" rel=\"nofollow noreferrer\">std::stof, std::stod, std::stold</a>"}, {"owner": {"reputation": 1, "user_id": 9059075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3de31cacf6bef77206cee3eccdc3e350?s=128&d=identicon&r=PG&f=1", "display_name": "CT3S", "link": "https://stackoverflow.com/users/9059075/ct3s"}, "edited": false, "score": 0, "creation_date": 1521670024, "post_id": 49417153, "comment_id": 85836439, "body": "Please see edit."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521670006, "post_id": 49417281, "comment_id": 85836424, "body": "Not exactly the right language, but the sentiment is the same. Don&#39;t use <code>atof</code> in C. It has zero error checking. Instead use <code>strtod</code> which properly sets <code>errno</code> on failed conversion as well as providing an <code>endptr</code> parameter to validate whether a conversion took place."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1521670265, "post_id": 49417281, "comment_id": 85836531, "body": "Please don&#39;t use C code on a C++ answer."}], "tags": [], "owner": {"reputation": 403, "user_id": 1583182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3598bee954f82cee58167e2be7aa010a?s=128&d=identicon&r=PG", "display_name": "Andreas GS", "link": "https://stackoverflow.com/users/1583182/andreas-gs"}, "is_accepted": false, "score": 0, "last_activity_date": 1521673952, "last_edit_date": 1521673952, "creation_date": 1521669870, "answer_id": 49417281, "question_id": 49417153, "link": "https://stackoverflow.com/questions/49417153/char-seperated-by-a-decimal-into-a-double-c/49417281#49417281", "title": "Char seperated by a decimal into a double c++", "body": "<p>Note that giving an example, code snips, and error logs make troubleshooting a lot easier :)</p>\n\n<p>It sound like you have some input like <code>\"2.1\"</code> and need to convert it to a double like <code>2.1</code>?</p>\n\n<p>If that is the case you can use the <a href=\"http://www.cplusplus.com/reference/cstdlib/atof/\" rel=\"nofollow noreferrer\"><code>&lt;cstdlib&gt;</code> <code>atof</code></a> function.</p>\n\n<p>Example:</p>\n\n<pre><code>/* atof example: sine calculator */\n#include &lt;stdio.h&gt;      /* printf, fgets */\n#include &lt;stdlib.h&gt;     /* atof */\n#include &lt;math.h&gt;       /* sin */\n\nint main ()\n{\n  double n;\n  char buffer[256];\n  printf (\"Enter degrees: \");\n  fgets (buffer,256,stdin);\n  n = atof (buffer);\n  printf (\"You entered %s which is a double like %f\\n\" , buffer, n);\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1521670679, "creation_date": 1521670679, "answer_id": 49417444, "question_id": 49417153, "link": "https://stackoverflow.com/questions/49417153/char-seperated-by-a-decimal-into-a-double-c/49417444#49417444", "title": "Char seperated by a decimal into a double c++", "body": "<p>Well, you are wildly overthinking it. The C++ library provides <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stof\" rel=\"nofollow noreferrer\">std::stof, std::stod, std::stold</a> that does exactly what you want. Convert a string like <code>\"2.5\"</code> to a <code>float</code>, <code>double</code> or <code>long double</code>, e.g.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main (void) {\n\n    std::string s = \"2.5\";\n    double d = std::stod(s);\n\n    std::cout &lt;&lt; d &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/stodex\n2.5\n</code></pre>\n\n<p>Look things over and let me know if you have further overthinking questions.</p>\n"}], "owner": {"reputation": 1, "user_id": 9059075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3de31cacf6bef77206cee3eccdc3e350?s=128&d=identicon&r=PG&f=1", "display_name": "CT3S", "link": "https://stackoverflow.com/users/9059075/ct3s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1521670931, "answer_count": 2, "score": -1, "last_activity_date": 1521693247, "creation_date": 1521669304, "last_edit_date": 1521693247, "question_id": 49417153, "link": "https://stackoverflow.com/questions/49417153/char-seperated-by-a-decimal-into-a-double-c", "closed_reason": "Needs details or clarity", "title": "Char seperated by a decimal into a double c++", "body": "<p>I am passing a string variable (std::string) and iterating through the string character by character. Whenever I run into a decimal, I want to combine the previous position on the string (i.e 2) and the next position in the string (i.e 5) into a double. So how would I go about making the char 2, char . , char 5 into one whole value (2.5)?</p>\n\n<pre><code>std::double x;\nstd::string varibleName = \"4 5 7 2.5\";\n       for (int i = 0; i &lt; variableName.length(); i++) // iterates through variableName\n       {\n          if (variableName[i] == '.'){ // if the current position of the iteration is a decimal, I want to grab the char before the decimal and the char after the decimal so I can combine all three positions of the string making it 2.5 and not 25.\n           }\n       }\n</code></pre>\n"}, {"tags": ["c++", "quickfix"], "comments": [{"owner": {"reputation": 5608, "user_id": 310971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c3218260b97c83b89427c798c0a989?s=128&d=identicon&r=PG", "display_name": "DumbCoder", "link": "https://stackoverflow.com/users/310971/dumbcoder"}, "edited": false, "score": 0, "creation_date": 1522078819, "post_id": 49417150, "comment_id": 85994595, "body": "<code>Tag 52</code> is in the header of the message. You are adding another tag 52 in the body."}, {"owner": {"reputation": 687, "user_id": 2109534, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/C3YCc.jpg?s=128&g=1", "display_name": "hector", "link": "https://stackoverflow.com/users/2109534/hector"}, "reply_to_user": {"reputation": 5608, "user_id": 310971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c3218260b97c83b89427c798c0a989?s=128&d=identicon&r=PG", "display_name": "DumbCoder", "link": "https://stackoverflow.com/users/310971/dumbcoder"}, "edited": false, "score": 0, "creation_date": 1522158424, "post_id": 49417150, "comment_id": 86034052, "body": "Yes, you&#39;re right. I asked for the header first and then remove and set the field and it worked: <code>msg.getHeader().removeField(52);  msg.getHeader().setField(52, FIX::UtcTimeStampConvertor::convert(m_time, false));</code>"}], "owner": {"reputation": 687, "user_id": 2109534, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/C3YCc.jpg?s=128&g=1", "display_name": "hector", "link": "https://stackoverflow.com/users/2109534/hector"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 450, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1521669297, "creation_date": 1521669297, "question_id": 49417150, "link": "https://stackoverflow.com/questions/49417150/using-fix-message-timestamps-without-milliseconds-in-quickfix-c", "title": "Using FIX message timestamps without milliseconds in quickfix/C++", "body": "<p>I'm working with an initiator app and I've set my configuration file as:</p>\n\n<pre><code>[DEFAULT]\nConnectionType=initiator\nMillisecondsInTimeStamp=N\n...\n[SESSION]\nBeginString=FIX.4.2\nDefaultApplVerID=FIX.4.2\n...\n</code></pre>\n\n<p>But, telling not to add milliseconds in the configuration file takes no effect on the timestamps of the fix messages:</p>\n\n<pre><code>...[SOH]52=20180321-21:07:36.848[SOH]...\n</code></pre>\n\n<p>I've also tried to overwrite the tag with no success:</p>\n\n<pre><code>FIX::UtcTimeStamp m_time;\nm_time.setCurrent();\nmsg.removeField(52);\nmsg.setField(52, FIX::UtcTimeStampConvertor::convert(m_time, false));\n</code></pre>\n\n<p>I only get a duplicated 52 tag, although the duplicated one without milliseconds. Anyway, how can I send messages without milliseconds in their timestamps?</p>\n"}, {"tags": ["c++", "gcc", "compilation", "stack-overflow", "processor"], "owner": {"reputation": 11, "user_id": 5425397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d6859c28c6041ce32fa0a543cd8c74?s=128&d=identicon&r=PG&f=1", "display_name": "L. Chen", "link": "https://stackoverflow.com/users/5425397/l-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1521670239, "creation_date": 1521668727, "last_edit_date": 1521670239, "question_id": 49417047, "link": "https://stackoverflow.com/questions/49417047/what-triggers-gcc-fsplit-stack-option-to-allocate-another-stack-segment", "title": "what triggers gcc -fsplit-stack option to allocate another stack segment", "body": "<p>I'm trying to make sense of how this option works.</p>\n\n<p>In the source code of g++, it only says a segment of stack is allocated when a processor specific function is called.</p>\n\n<p>I'm wondering which processor function will trigger it.</p>\n\n<p>For reference, here is the source code of this option,</p>\n\n<p><a href=\"https://sourceware.org/svn/gcc/tags/gcc_7_3_0_release/libgcc/generic-morestack.c\" rel=\"nofollow noreferrer\">https://sourceware.org/svn/gcc/tags/gcc_7_3_0_release/libgcc/generic-morestack.c</a></p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "debuggervisualizer", "natvis"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1521671616, "post_id": 49416995, "comment_id": 85837007, "body": "Interesting how to modify how the MSVC debugger shows things, even though for C++17+ this specific data-type should be replaced by a <code>std::string_view</code>."}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1521671680, "post_id": 49416995, "comment_id": 85837021, "body": "@Deduplicator: Yeah, I knew someone was going to say that..."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1521671711, "post_id": 49416995, "comment_id": 85837030, "body": "Glad to be of service."}], "answers": [{"tags": [], "owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "is_accepted": false, "score": 1, "last_activity_date": 1521668545, "creation_date": 1521668545, "answer_id": 49416996, "question_id": 49416995, "link": "https://stackoverflow.com/questions/49416995/how-to-get-stdpairchar-char-to-display-as-a-proper-string-segment-in-vi/49416996#49416996", "title": "How to get std::pair&lt;char *, char *&gt; to display as a proper string segment in Visual Studio&#39;s debugger?", "body": "<p>Create <code>%UserProfile%\\Documents\\Visual Studio 2015\\Visualizers\\custom.natvis</code> (replace <code>2015</code> with your version of Visual Studio, obviously) and then try something like the following:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;AutoVisualizer xmlns=\"http://schemas.microsoft.com/vstudio/debugger/natvis/2010\"&gt;\n  &lt;!-- For more information on how to create debugger visualizers, refer to:\n       https://msdn.microsoft.com/en-us/library/jj620914.aspx\n       https://msdn.microsoft.com/en-us/library/75w45ekt.aspx\n  --&gt;\n  &lt;Type Name=\"std::pair&amp;lt;*,*&amp;gt;\"&gt;\n      &lt;DisplayString Condition=\"*second - *first &amp;gt;= 0\"&gt;{first,[second - first]}&lt;/DisplayString&gt;\n  &lt;/Type&gt;\n  &lt;Type Name=\"std::pair&amp;lt;*,*&amp;gt;\"&gt;\n      &lt;DisplayString Condition=\"*second._Ptr - *first._Ptr &amp;gt;= 0\"&gt;{first._Ptr,[second._Ptr - first._Ptr]}&lt;/DisplayString&gt;\n  &lt;/Type&gt;\n&lt;/AutoVisualizer&gt;\n</code></pre>\n\n<p>Result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cEA7y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cEA7y.png\" alt=\"Screenshot\"></a></p>\n"}], "owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521668545, "creation_date": 1521668545, "question_id": 49416995, "link": "https://stackoverflow.com/questions/49416995/how-to-get-stdpairchar-char-to-display-as-a-proper-string-segment-in-vi", "title": "How to get std::pair&lt;char *, char *&gt; to display as a proper string segment in Visual Studio&#39;s debugger?", "body": "<p>How do I get <code>std::pair&lt;char *, char *&gt;</code> to display as a proper string segment in Visual Studio, rather than as two pointers to null-terminated strings?</p>\n"}, {"tags": ["c++", "c++11", "rawstring"], "comments": [{"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1521713324, "post_id": 49416631, "comment_id": 85852427, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/30308088/include-in-raw-string-literal-without-terminating-said-literal\">Include )&quot; in raw string literal without terminating said literal</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": false, "score": 10, "last_activity_date": 1521667184, "creation_date": 1521667184, "answer_id": 49416701, "question_id": 49416631, "link": "https://stackoverflow.com/questions/49416631/escape-r-in-a-raw-string-in-c/49416701#49416701", "title": "escape R&quot;()&quot; in a raw string in C++", "body": "<p>The raw string will terminate after the first <code>)\"</code> it sees. You can change the delimiter to <code>***</code> for example:</p>\n\n<pre><code>string raw_str = R\"***(R\"(foo)\")***\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "is_accepted": true, "score": 25, "last_activity_date": 1521713564, "last_edit_date": 1521713564, "creation_date": 1521667212, "answer_id": 49416712, "question_id": 49416631, "link": "https://stackoverflow.com/questions/49416631/escape-r-in-a-raw-string-in-c/49416712#49416712", "title": "escape R&quot;()&quot; in a raw string in C++", "body": "<p>The format for the <a href=\"http://en.cppreference.com/w/cpp/language/string_literal\" rel=\"noreferrer\">raw-string literals</a>[<a href=\"https://timsong-cpp.github.io/cppwp/lex.string#nt:raw-string\" rel=\"noreferrer\">2</a>] is: <code>R\"delimiter( raw_characters )delimiter\"</code></p>\n\n<p>so you can use a different <em>delimiter</em> that is not in the string like:</p>\n\n<pre><code>string raw_str = R\"~(R\"(foo)\")~\";\n</code></pre>\n"}], "owner": {"reputation": 18731, "user_id": 1293653, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/544ef24ee81aa564c4cd50a57e9d5951?s=128&d=identicon&r=PG", "display_name": "One Two Three", "link": "https://stackoverflow.com/users/1293653/one-two-three"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11023, "favorite_count": 3, "accepted_answer_id": 49416712, "answer_count": 2, "score": 12, "last_activity_date": 1521713564, "creation_date": 1521666931, "last_edit_date": 1521673408, "question_id": 49416631, "link": "https://stackoverflow.com/questions/49416631/escape-r-in-a-raw-string-in-c", "title": "escape R&quot;()&quot; in a raw string in C++", "body": "<pre><code>  string raw_str = R\"(R\"(foo)\")\";\n</code></pre>\n\n<p>If I have <code>R\"()\"</code> inside a raw string, and that causes the parser to confuse. (ie., it thought the left most <code>)\"</code> was the end of the raw string.</p>\n\n<p>How do I escape this?</p>\n"}, {"tags": ["c++", "visual-studio", "vb6", "ole", "ocx"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1521667119, "post_id": 49416592, "comment_id": 85835110, "body": "Do you have the debug runtime support installed?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1521668041, "post_id": 49416592, "comment_id": 85835565, "body": "When building debug vs release versions the compiler employs different optimizations and has different error checking capabilities. Meaning that some errors may be caught in a debug build and others may be caught in a release build. If the two differ you probably have a bug somewhere. The compiler is not required to diagnose all your bugs, nor may it be able to."}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 1, "creation_date": 1521668282, "post_id": 49416592, "comment_id": 85835681, "body": "Looks like someone &quot;#defined&quot; <code>VT_BOOL</code> as <code>char</code> in debug mode. You can try to define it <code>ocx.cpp</code> to get the pre-processor error about redef pointing to the initial bad definition place."}, {"owner": {"reputation": 2328, "user_id": 673593, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/65f36c1de0e158f5bf2b5e861ded8efd?s=128&d=identicon&r=PG", "display_name": "JonN", "link": "https://stackoverflow.com/users/673593/jonn"}, "reply_to_user": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1521669879, "post_id": 49416592, "comment_id": 85836362, "body": "@A.A I looked at definitions using Visual Studio with the build configuration set for Release and Debug and VT_BOOL in both configurations is an enum VARENUM with a value of 11.  And BOOL in both cases is   typedef int BOOL;"}, {"owner": {"reputation": 2328, "user_id": 673593, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/65f36c1de0e158f5bf2b5e861ded8efd?s=128&d=identicon&r=PG", "display_name": "JonN", "link": "https://stackoverflow.com/users/673593/jonn"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1521670624, "post_id": 49416592, "comment_id": 85836683, "body": "@JesperJuhl Yes most definitely run-time errors can occur exclusively in release or in debug build occasionally.  This is a VB6 build/compile time error that is related to which OCX is currently registered.  And the online documents I&#39;ve found so far do not adequately define the cause of this error, nor does the error itself name or describe the Automation type that it is claiming is &quot;not supported&quot;  Specifically is it claiming the OCX type is not found and therefore not supported or that one of the data members of the OCX type is not supported?"}, {"owner": {"reputation": 2328, "user_id": 673593, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/65f36c1de0e158f5bf2b5e861ded8efd?s=128&d=identicon&r=PG", "display_name": "JonN", "link": "https://stackoverflow.com/users/673593/jonn"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1521671896, "post_id": 49416592, "comment_id": 85837087, "body": "@RichardCritten  Not sure what you mean by &quot;debug runtime support&quot;  Is this a VB6 thing?  I have Visual Basic 6.0(SP6) installed and the OCX was built in C++ with VS2010 V10.0.40219.1 SP1 Rel"}, {"owner": {"reputation": 2328, "user_id": 673593, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/65f36c1de0e158f5bf2b5e861ded8efd?s=128&d=identicon&r=PG", "display_name": "JonN", "link": "https://stackoverflow.com/users/673593/jonn"}, "reply_to_user": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1521672230, "post_id": 49416592, "comment_id": 85837174, "body": "@A.A Also in the OCX source code VT_BOOL is not a type but an enum with a value of 11 which the DISP_PROPERTY_EX macro uses."}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 1, "creation_date": 1521712158, "post_id": 49416592, "comment_id": 85851630, "body": "Look at your ODL files and its MIDL settings for differences between Debug and Release configurations. The MFC dispatch maps are not used for the TypeLibs so the problem should not be in the cpp files."}], "answers": [{"tags": [], "owner": {"reputation": 2328, "user_id": 673593, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/65f36c1de0e158f5bf2b5e861ded8efd?s=128&d=identicon&r=PG", "display_name": "JonN", "link": "https://stackoverflow.com/users/673593/jonn"}, "is_accepted": true, "score": 3, "last_activity_date": 1521753943, "creation_date": 1521753943, "answer_id": 49438743, "question_id": 49416592, "link": "https://stackoverflow.com/questions/49416592/debug-release-version-of-ocx-incompatible-variable-uses-an-automation-type-no/49438743#49438743", "title": "Debug &amp; Release version of OCX incompatible &quot;Variable uses an Automation type not supported in Visual Basic&quot;", "body": "<p>Following @A. A suggestion to examine the property settings for the OCX projects ODL file (SigPlus.odl) I found the solution.</p>\n\n<p>There were differences in the Release vs Debug settings when looking at the <strong>Properties</strong> for the SigPlus.odl file.  To access ODL properties right click on the .ODL file in the source files in Solution Explorer. The setting that was making the Debug build declare bools as char was the <strong>MkTypeLib Compatible</strong> option.  The debug build had this set to No and the Release had it set to Yes.  Once I changed the debug build to <strong>MkTypeLib Compatible:Yes</strong> then the TypeInfo from <em>OLE/COM Object Viewer</em> showed the bools as VARIANT_BOOL just like the Release build and the VB ActiveX EXE container now builds successfully.</p>\n\n<p><a href=\"https://i.stack.imgur.com/z9gBf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z9gBf.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/tNBRj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tNBRj.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2328, "user_id": 673593, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/65f36c1de0e158f5bf2b5e861ded8efd?s=128&d=identicon&r=PG", "display_name": "JonN", "link": "https://stackoverflow.com/users/673593/jonn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 49438743, "answer_count": 1, "score": 3, "last_activity_date": 1521753943, "creation_date": 1521666723, "question_id": 49416592, "link": "https://stackoverflow.com/questions/49416592/debug-release-version-of-ocx-incompatible-variable-uses-an-automation-type-no", "title": "Debug &amp; Release version of OCX incompatible &quot;Variable uses an Automation type not supported in Visual Basic&quot;", "body": "<p>I have a legacy OCX control built in VS2010 and used in a VB6 ActiveX EXE.  When I register the debug version of the OCX and try to build it with VB6 I get the error <a href=\"https://i.stack.imgur.com/Hszje.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hszje.png\" alt=\"AutoTypeNotSupportedInVB\"></a></p>\n\n<p>If I register the Release version then the VB ActiveX EXE container compiles and runs. I've done online search for this error but the results are not very informative.  It's not really clear if the error means it can't find the OCX type at all or if there's a type within the OCX interface that VB doesn't support.   The error points to the first attempted use of the OCX object in the VB source code.</p>\n\n<pre><code>170 m_SignCaptureForm.SigPlus1.TabletComTest = False\n</code></pre>\n\n<p>Where SigPlus1 is the OCX object.  Looking at the TypeInfo from <em>OLE/COM Object Viewer</em> the only differences I see between the Debug and Release are that all the BOOL return types are defined as <strong>char</strong> in the Debug version and as <strong>VARIANT_BOOL</strong> in the Release version.  </p>\n\n<p>========OLE/COM Object Viewer TypeInfo for Debug ========</p>\n\n<pre><code>      char TabletLCDMode;\n      [id(0x00000010)            \n]\n</code></pre>\n\n<p>=========OLE/COM Object Viewer TypeInfo for Release ========</p>\n\n<pre><code>      VARIANT_BOOL TabletLCDMode;\n      [id(0x00000010)            \n]\n</code></pre>\n\n<p>There's nothing in the OCX source code that I can see that would affect these declarations to be different in Debug vs Release.  What I am asking is why I'm getting this error and if the cause is the difference in BOOL types whats the remedy for that?</p>\n\n<pre><code>ocx.h:    afx_msg BOOL GetTabletLCDMode();\nocx.cpp:  DISP_PROPERTY_EX(CSigPlusCtrl, \"TabletLCDMode\", GetTabletLCDMode, SetTabletLCDMode, VT_BOOL)\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1521666477, "post_id": 49416529, "comment_id": 85834815, "body": "because a leading 0 turns it into an octal integer literal"}, {"owner": {"reputation": 3, "user_id": 9531184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a006f0a06c046849480e04c9805132c4?s=128&d=identicon&r=PG&f=1", "display_name": "C_newb", "link": "https://stackoverflow.com/users/9531184/c-newb"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1521666518, "post_id": 49416529, "comment_id": 85834842, "body": "how do you get rid of the annoying octal integer literal? pls"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1521666536, "post_id": 49416529, "comment_id": 85834852, "body": "Find a different language."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1521666554, "post_id": 49416529, "comment_id": 85834861, "body": "Don&#39;t add a 0 at the front?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1521666600, "post_id": 49416529, "comment_id": 85834887, "body": "You don&#39;t get rid of octal literals.  There is no reason to write 01234 unless you want an octal literal.  If you want 1234 you just write 1234"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521666943, "post_id": 49416529, "comment_id": 85835035, "body": "You can explicitly set the base for your conversion as well as setting the starting <code>pos</code> for your conversion to begin, e.g. <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\">std::stoi, std::stol, std::stoll</a> Either will allow you to skip the leading zero."}, {"owner": {"reputation": 3, "user_id": 9531184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a006f0a06c046849480e04c9805132c4?s=128&d=identicon&r=PG&f=1", "display_name": "C_newb", "link": "https://stackoverflow.com/users/9531184/c-newb"}, "edited": false, "score": 0, "creation_date": 1521699034, "post_id": 49416529, "comment_id": 85844252, "body": "The program i am/was writing required a user input and the user may put in a 0437 instead of 437 so may the &quot;UnholySheep&quot; become holy with velcro gloves."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1521667705, "post_id": 49416541, "comment_id": 85835396, "body": "You can add <code>0b100011111</code> to that as the binary literal version."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1521667783, "post_id": 49416541, "comment_id": 85835440, "body": "That edit is <i>much</i> better! I have withdrawn my downvote."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1521668009, "post_id": 49416541, "comment_id": 85835541, "body": "@JesperJuhl Indeed. Updated."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1521668035, "post_id": 49416541, "comment_id": 85835560, "body": "@MartinBonner Appreciate the feedback. The original was indeed somewhat botched."}], "tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": true, "score": 2, "last_activity_date": 1521667777, "last_edit_date": 1521667777, "creation_date": 1521666493, "answer_id": 49416541, "question_id": 49416529, "link": "https://stackoverflow.com/questions/49416529/unsigned-number-displays-different-results-when-a-zero-is-appended-to-the-number/49416541#49416541", "title": "Unsigned Number displays different results when a zero is appended to the number", "body": "<p>Because the value represented by an octal literal is being printed out as decimal value on the standard output. If you want to output the octal literal value you should use the <a href=\"http://en.cppreference.com/w/cpp/io/manip/hex\" rel=\"nofollow noreferrer\">std::oct</a> stream manipulator:</p>\n\n<pre><code>std::cout &lt;&lt; std::oct &lt;&lt; number;\n</code></pre>\n\n<p>Integer values are represented by <a href=\"http://en.cppreference.com/w/cpp/language/integer_literal\" rel=\"nofollow noreferrer\">integer literals</a>. They can be octal such as <code>0437</code>, decimal such as <code>287</code> or hexadecimal such as <code>0x11f</code> and as of C++14 they can be binary literals such as <code>0b100011111</code>. All of these literals represent the same value.</p>\n"}], "owner": {"reputation": 3, "user_id": 9531184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a006f0a06c046849480e04c9805132c4?s=128&d=identicon&r=PG&f=1", "display_name": "C_newb", "link": "https://stackoverflow.com/users/9531184/c-newb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1521666538, "accepted_answer_id": 49416541, "answer_count": 1, "score": -6, "last_activity_date": 1521667777, "creation_date": 1521666441, "question_id": 49416529, "link": "https://stackoverflow.com/questions/49416529/unsigned-number-displays-different-results-when-a-zero-is-appended-to-the-number", "closed_reason": "Duplicate", "title": "Unsigned Number displays different results when a zero is appended to the number", "body": "<p>Why does this program display 2 different numbers when unsigned number is chnaged from '437' to '0437' cout statement? when I put 437 the cout shows 437 but when i use '0437' it shows '287'. Why is it so?</p>\n\n<pre><code>int main()\n{\n    unsigned number = 437;\n    cout&lt;&lt;number&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "loops", "input"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 7, "creation_date": 1521665685, "post_id": 49416318, "comment_id": 85834442, "body": "Review the meaning of <code>||</code>.  Try saying the expression out loud."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 2, "creation_date": 1521665686, "post_id": 49416318, "comment_id": 85834444, "body": "Your condition always evaluates to <code>true</code> do to use of <code>||</code> operator."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1521665699, "post_id": 49416318, "comment_id": 85834451, "body": "<a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Rubber_duck_debugging</a>"}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "edited": false, "score": 2, "creation_date": 1521665726, "post_id": 49416318, "comment_id": 85834465, "body": "You cannot be &#39;c&#39; and &#39;n&#39; at same time, so it loops forever."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1521666888, "post_id": 49416318, "comment_id": 85835014, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/26337003/why-non-equality-check-of-one-variable-against-many-values-always-returns-true\">Why non-equality check of one variable against many values always returns true?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 9325564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b39aceb8eb8d51624d06fb23aeb72bc?s=128&d=identicon&r=PG&f=1", "display_name": "user9325564", "link": "https://stackoverflow.com/users/9325564/user9325564"}, "edited": false, "score": 0, "creation_date": 1521666791, "post_id": 49416579, "comment_id": 85834962, "body": "Oh I thought or was the way to achieve that effect. It makes more sense when you put it like that, thanks!"}], "tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": true, "score": 3, "last_activity_date": 1521666863, "last_edit_date": 1521666863, "creation_date": 1521666646, "answer_id": 49416579, "question_id": 49416318, "link": "https://stackoverflow.com/questions/49416318/c-loops-forever/49416579#49416579", "title": "C++ Loops forever", "body": "<p>A <code>do</code>-<code>while</code> statement loops as long as the <code>while</code> expression is <code>true</code>.</p>\n\n<p>Your <code>while</code> expression is </p>\n\n<pre><code>choice != 'c' || choice != 'n'\n</code></pre>\n\n<p>In common English, that expression means</p>\n\n<blockquote>\n  <p><code>choice</code> is not <code>'c'</code> <strong>OR</strong> <code>choice</code> is not <code>'n'</code></p>\n</blockquote>\n\n<p>That statement, logically, is <strong>always true</strong>.  <code>choice</code> is <strong>always</strong> not one of those things.</p>\n\n<p>In both English and C++, you would want to use <code>and</code>/<code>&amp;&amp;</code> in that expression.</p>\n"}], "owner": {"reputation": 7, "user_id": 9325564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b39aceb8eb8d51624d06fb23aeb72bc?s=128&d=identicon&r=PG&f=1", "display_name": "user9325564", "link": "https://stackoverflow.com/users/9325564/user9325564"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1521666929, "accepted_answer_id": 49416579, "answer_count": 1, "score": -6, "last_activity_date": 1521666863, "creation_date": 1521665631, "question_id": 49416318, "link": "https://stackoverflow.com/questions/49416318/c-loops-forever", "closed_reason": "Not suitable for this site", "title": "C++ Loops forever", "body": "<p>I wrote the following loop as a part of a program for my CS homework, however regardless of the input, the program keeps looping at this exact point. What am I doing wrong?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nchar choice;\ndo\n{\n  cout &lt;&lt; \"Type 'c' for characters or type 'n' for numbers: \";\n  cin &gt;&gt; choice;\n}while (choice != 'c' || choice != 'n');\n</code></pre>\n"}, {"tags": ["c++", "qt", "qtablewidget", "qtablewidgetitem"], "answers": [{"comments": [{"owner": {"reputation": 772, "user_id": 4572356, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh6.googleusercontent.com/-sOiC9nd0Ojg/AAAAAAAAAAI/AAAAAAAAADI/XbgE9pPDbdc/photo.jpg?sz=128", "display_name": "remi", "link": "https://stackoverflow.com/users/4572356/remi"}, "edited": false, "score": 1, "creation_date": 1521666338, "post_id": 49416451, "comment_id": 85834746, "body": "Awesome! Thanks for such a quick reply again. (I don&#39;t know how I missed that from your previous answer...)"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1521666587, "last_edit_date": 1521666587, "creation_date": 1521666152, "answer_id": 49416451, "question_id": 49416179, "link": "https://stackoverflow.com/questions/49416179/qt-inherit-from-qtablewidgetitem-to-widget-and-overide-operator/49416451#49416451", "title": "QT Inherit from QTableWidgetItem to Widget and overide &#39;&lt;&#39; operator", "body": "<p>Only the <code>QTableWidgetItem</code> are called when ordering them, in your case the <code>QProgressBar_custom</code> are added as <code>cellWidget</code>s, but not as <code>QTableWidgetItem</code>s, you must do it as follows:</p>\n\n<pre><code>void addCustomProgressBarCell(int row, int col, double d1, double d2, const QString&amp; txt1, const QString&amp; txt2, double p){\n    QProgressBar_custom *qprbar = new QProgressBar_custom;\n    qprbar-&gt;setAmount1(d1);\n    qprbar-&gt;setAmount2(d2);\n    qprbar-&gt;setTxt1(txt1);\n    qprbar-&gt;setTxt2(txt2);\n    qprbar-&gt;setPercentage(p);\n    setCellWidget(row, col, qprbar);\n    setItem(row, col, qprbar); // add this line\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kP6X5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kP6X5.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 772, "user_id": 4572356, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh6.googleusercontent.com/-sOiC9nd0Ojg/AAAAAAAAAAI/AAAAAAAAADI/XbgE9pPDbdc/photo.jpg?sz=128", "display_name": "remi", "link": "https://stackoverflow.com/users/4572356/remi"}, "edited": false, "score": 0, "creation_date": 1521699765, "post_id": 49419748, "comment_id": 85844533, "body": "Thanks for the detailed comments! I actually tried a similar case with delegates instead of qprogressbar. Then I went back to qprogressbar, because I didn&#39;t get the result I wanted.  I can&#39;t recall exactly what the problem was."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1521687093, "creation_date": 1521687093, "answer_id": 49419748, "question_id": 49416179, "link": "https://stackoverflow.com/questions/49416179/qt-inherit-from-qtablewidgetitem-to-widget-and-overide-operator/49419748#49419748", "title": "QT Inherit from QTableWidgetItem to Widget and overide &#39;&lt;&#39; operator", "body": "<p>Some comments:</p>\n\n<ul>\n<li><p>If there are many items, using a delegate will be more performant than instantiating widgets for every item. The delegate's <code>paint</code> method can use <code>QStyle::drawControl</code>. A complete example will be provided later. It is not particularly complicated, and works very well.</p></li>\n<li><p>Prefer <code>QString</code> format strings to concatenation, for performance and readability. Use <code>QStringLiteral</code> instead of casting C strings.</p>\n\n<pre><code>auto const txtField = QStringLiteral(\"%1 %2 \\t%3 %4 \")\n                      .arg(d1, 'f', 2) .arg(txt1)\n                      .arg(f2, 'f', 4) .arg(txt2);\n</code></pre></li>\n<li><p>For <code>QObject</code>-derived classes, <code>qobject_cast</code> is another option. To make it robust and not potentially break internal data structures in the table view, the comparison operator must always return a consistent result (or no result at all - i.e. assert):</p>\n\n<pre><code>bool operator &lt;(const QTableWidgetItem&amp; other) const {\n   auto const *p = qobject_cast&lt;const QProgressBar*&gt;(&amp;other);\n   if (true)\n      // let's always succeed\n      return p ? value() &lt; p-&gt;value() \n               : static_cast&lt;const QTableWidgetItem*&gt;(this) &lt; &amp;other;\n   else {\n      // catch errors\n      Q_ASSERT(p);\n      return value() &lt; p-&gt;value();\n   }\n}\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 772, "user_id": 4572356, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh6.googleusercontent.com/-sOiC9nd0Ojg/AAAAAAAAAAI/AAAAAAAAADI/XbgE9pPDbdc/photo.jpg?sz=128", "display_name": "remi", "link": "https://stackoverflow.com/users/4572356/remi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 840, "favorite_count": 2, "accepted_answer_id": 49416451, "answer_count": 2, "score": 3, "last_activity_date": 1521687093, "creation_date": 1521665126, "question_id": 49416179, "link": "https://stackoverflow.com/questions/49416179/qt-inherit-from-qtablewidgetitem-to-widget-and-overide-operator", "title": "QT Inherit from QTableWidgetItem to Widget and overide &#39;&lt;&#39; operator", "body": "<p>I want a <code>QTableWidget</code> with certain cells as customized <code>QProgressBar</code>s, and I want it to be possible to sort the columns containing these.</p>\n\n<p>My customized <code>QProgressBar</code> is inheriting from both <code>QProgressBar</code> and <code>QTableWidgetItem</code>, and I am overiding the <code>'&lt;'</code> operator to allow for sorting.</p>\n\n<p>Below is an example of a customized <code>QTableWidget</code> (<code>QTableWidget_custom</code>), <code>QTableWidgetItem</code> (<code>QTableWidgetItem_double</code>) and <code>QProgressBar</code> (<code>QProgressBar_custom</code>). After the table is populated, I am only able to sort the columns containing <code>QTableWidgetItem_double</code>s.</p>\n\n<p><strong>QTableWidgetItem_double</strong></p>\n\n<pre><code>class QTableWidgetItem_double : public QTableWidgetItem\n{    \npublic:\n   QTableWidgetItem_double(const double _d = 0.0) :QTableWidgetItem(){\n      d = _d;\n      this-&gt;setTextAlignment(Qt::AlignRight | Qt::AlignVCenter);\n      setText(QString::number(d, 'f', 4));\n   }\n\n   double d = 0.0;\n\n   bool operator &lt;(const QTableWidgetItem&amp; other) const{\n      QTableWidgetItem_double const *qtwd = dynamic_cast&lt;QTableWidgetItem_double const *&gt;(&amp;other);\n      return d &lt; qtwd-&gt;d;\n   }\n};\n</code></pre>\n\n<p><strong>QProgressBar_custom</strong></p>\n\n<pre><code>class QProgressBar_custom : public QProgressBar, public QTableWidgetItem\n{    \npublic:\n   QProgressBar_custom() : QProgressBar(){\n      setTextVisible(true);\n      setStyleSheet(\" QProgressBar { border: 1px solid grey; border-radius: 0px; text-align: right;} QProgressBar::chunk { background-color: rgba(0,255,0,100); width: 1px;}\");\n      setAlignment(Qt::AlignCenter);\n   }    \n   QProgressBar_custom(const QString txt) : QTableWidgetItem(txt){}\n\n   bool operator &lt;(const QTableWidgetItem&amp; other) const{\n      QProgressBar const *p = dynamic_cast&lt;QProgressBar const*&gt;(&amp;other);\n      return value() &lt; p-&gt;value();\n   }\n\nprivate:\n   double d1 = 0.0;\n   double d2 = 0.0;\n   QString txt1 = \"\";\n   QString txt2 = \"\";    \npublic:\n   void setText(){\n      QString txtfield = QString::number(d1, 'f', 2) + \" \" + txt1 + \" \\t\" + QString::number(d2, 'f', 4) + \" \" + txt2 + \" \";\n      setFormat(txtfield);\n   }    \n   void setTxt1(const QString&amp; txt){ txt1 = txt; }\n   void setTxt2(const QString&amp; txt){ txt2 = txt; }\n   void setAmount1(double d){ d1 = d; }\n   void setAmount2(double d){ d2 = d; }\n   void setPercentage(double p){\n      setValue(int(100.0*p));\n      setText();\n   }   \n};\n</code></pre>\n\n<p><strong>QTableWidget_custom</strong></p>\n\n<pre><code>class QTableWidget_custom : public QTableWidget\n{\npublic:\n   QTableWidget_custom(QWidget *parent) : QTableWidget(parent){}\n\n   void addCustomProgressBarCell(int row, int col, double d1, double d2, const QString&amp; txt1, const QString&amp; txt2, double p){\n      QProgressBar_custom* qprbar = new QProgressBar_custom();\n      qprbar-&gt;setAmount1(d1);\n      qprbar-&gt;setAmount2(d2);\n      qprbar-&gt;setTxt1(txt1);\n      qprbar-&gt;setTxt2(txt2);\n      qprbar-&gt;setPercentage(p);\n      setCellWidget(row, col, qprbar);\n   }\n   void addCustomDoubleCell(int row, int col, double d){\n      QTableWidgetItem_double* qtwd = new QTableWidgetItem_double(d);\n      setItem(row, col, qtwd);\n   }\n};\n</code></pre>\n\n<p><strong>Populating the table</strong></p>\n\n<pre><code>void QTWidgetTableItem::testCustomTableWidgetItem(){        \n   //Some random data:\n   double data1[10] = { 1.0, 2.0, 34.4, 32.02, 1000.0, 2002.0, 0.0001, 0.02, 0.009, 10.0 };\n   double data2[10] = { -1.01, 22.3, 54.4, 1232.02, 0.0, -22.0, 0.1231, -0.02, 10.009, 5.0 };\n   double data3[10] = { 5.0, 201.0, 434.4444, 32.32, 1234.231, 2002.232, 0.111, 0.0422, 0.212, -10.0 };\n   double data4[10] = { 1.0, 2.0, 5.0, 25.00, 12.2, 100.0, 0.0, 50.0, 65.03, 0.9 };\n   QString txt1[10] = { \"abc\", \"abc\", \"abc\", \"eur\", \"usd\", \"php\", \"cpp\", \"xxx\", \"yyy\", \"zzz\" };\n   QString txt2[10] = { \"aaa\", \"bbb\", \"ccc\", \"ddd\", \"asd\", \"qwe\", \"trt\", \"tr1\", \"tr2\", \"tr3\" };\n\n   //Prepare table:\n   QTableWidget_custom* table = ui.tableWidget;\n   table-&gt;insertColumn(0); table-&gt;setColumnWidth(0, 70);\n   table-&gt;insertColumn(1); table-&gt;setColumnWidth(1, 70);\n   table-&gt;insertColumn(2);   table-&gt;setColumnWidth(2, 170);\n   table-&gt;setSortingEnabled(false);\n\n   //Add data to table:\n   for (int i = 0; i &lt; 10; i++){\n      table-&gt;insertRow(i);\n\n      table-&gt;addCustomDoubleCell(i, 0, data1[i]);\n      table-&gt;addCustomDoubleCell(i, 1, data2[i]);          \n      table-&gt;addCustomProgressBarCell(i, 2, data3[i], data4[i], txt1[i], txt2[i], data4[i] / 100.0);\n\n   }\n   table-&gt;setSortingEnabled(true);    \n}\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/d3L1q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d3L1q.png\" alt=\"Resulting table\"></a></p>\n\n<p>If I click on the horizontal header of column 1 or 2, the table is sorted correctly using the overloaded operator of <code>QTableWidgetItem_double</code>. If I click on the third header, nothing happens. The overloaded function is never called.</p>\n"}, {"tags": ["javascript", "c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 4406, "user_id": 4911665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4f3ec7f68e33af504b9055abed79b7?s=128&d=identicon&r=PG&f=1", "display_name": "talamaki", "link": "https://stackoverflow.com/users/4911665/talamaki"}, "is_accepted": true, "score": 1, "last_activity_date": 1521703680, "last_edit_date": 1521703680, "creation_date": 1521702882, "answer_id": 49422645, "question_id": 49415798, "link": "https://stackoverflow.com/questions/49415798/how-to-define-the-window-object-in-qscriptengine/49422645#49422645", "title": "How to define the `window` object in QScriptEngine", "body": "<p>You can assign <code>this</code> to a <code>window</code> variable:</p>\n\n<pre><code>engine.evaluate(\"window=this; var test=42; console.log(test); console.log(window.test)\");\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>\"42\"<br>\n  \"42\"</p>\n</blockquote>\n\n<p>There is a blog post in Qt Blog about <a href=\"http://blog.qt.io/blog/2011/03/04/faking-a-web-browser-environment-in-qtscript/\" rel=\"nofollow noreferrer\">Faking a web browser environment in QtScript</a>.</p>\n"}], "owner": {"reputation": 11267, "user_id": 903651, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3dda4f66a2b7cc9fdced12a0fbede58?s=128&d=identicon&r=PG", "display_name": "Adrian Maire", "link": "https://stackoverflow.com/users/903651/adrian-maire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 49422645, "answer_count": 1, "score": 1, "last_activity_date": 1521703680, "creation_date": 1521663522, "last_edit_date": 1521664454, "question_id": 49415798, "link": "https://stackoverflow.com/questions/49415798/how-to-define-the-window-object-in-qscriptengine", "title": "How to define the `window` object in QScriptEngine", "body": "<h2>The JavaScript <code>window</code> object</h2>\n\n<p>In JavaScript, browsers have a global object <code>window</code>. This object has some interesting propreties:</p>\n\n<pre><code>var any = 5;\nconsole.log(window.any);\n</code></pre>\n\n<p>The <code>window</code> object act as a namespace, where all variables are created inside. </p>\n\n<p>This behavior is not (by default) active while using <code>QScriptEngine</code> of Qt, which is a general purpose JS engine and does not have those browsers specific capabilities.</p>\n\n<p>The question is:</p>\n\n<p><strong>How to get <code>QScriptEngine</code> to have this <code>window</code> object?</strong> (With similar behavior)</p>\n\n<hr>\n\n<h3>Tries</h3>\n\n<p>Supposing a simple C++ project including <code>Qt</code> (currently 5.7), the following code parse some JS and shows the results:</p>\n\n<pre><code>#include &lt;QDebug&gt;\n#include &lt;QScriptEngine&gt;\n#include &lt;QCoreApplication&gt;\n\n//Logger class, for console.log\nclass Logger: public QObject\n{\n    Q_OBJECT\npublic:\n    Logger( QObject*parent = nullptr): QObject(parent) {}\n\npublic slots:\n    void log(const QString&amp; str){ qDebug() &lt;&lt; str; }\n};\n\n#include \"test.moc\"\n\nint main(int argn, char* args[])\n{\n    QCoreApplication app(argn, args);\n    QScriptEngine engine;\n    // Logger\n    Logger logger;\n    QScriptValue loggerResult = engine.newQObject(&amp;logger);\n    engine.globalObject().setProperty(\"console\", loggerResult);\n\n    // TODO CONFIG HERE FOR WINDOW OBJECT\n    //engine.globalObject().setProperty(QString(\"window\"), \n    //    engine.newObject()); //Does not work, obviously\n\n    engine.evaluate(\"var test=42; console.log(test); console.log(window.test)\");\n    if (engine.hasUncaughtException()) \n    {\n        int line = engine.uncaughtExceptionLineNumber();\n        QScriptValue error = engine.uncaughtException();\n        QStringList errorStr = engine.uncaughtExceptionBacktrace();\n        qDebug() &lt;&lt; \"Exception at:\" &lt;&lt; line &lt;&lt; \":\" &lt;&lt; error.toString();\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>\"42\"<br>\n  \"\"</p>\n</blockquote>\n"}, {"tags": ["c++", "linked-list", "doubly-linked-list"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521664048, "post_id": 49415795, "comment_id": 85833615, "body": "BTW, you can place the code for class methods outside of the class.  This reduces the amount of code the compiler has to parse when including the header files."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1521664065, "post_id": 49415795, "comment_id": 85833629, "body": "Please read about the MCVE in the site guidelines. In particular, it shouldn&#39;t be necessary to guess what you input in order to reproduce the issue. Replace that with hardcoded values. That also helps you, because it&#39;s in the last step where the actual corruption of your data structure happens. BTW: Do you know what <code>static</code> does?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1521664226, "post_id": 49415795, "comment_id": 85833711, "body": "I recommend using a debugger <b>and</b> drawing the linked list as you step through your program."}, {"owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521664233, "post_id": 49415795, "comment_id": 85833716, "body": "@ThomasMatthews yes, I was aware. Is there a big difference? I just didn&#39;t feel like making a header file"}, {"owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1521664323, "post_id": 49415795, "comment_id": 85833759, "body": "@UlrichEckhardt will do. I&#39;ll head over and read that. I&#39;ll update the question to include my inputs"}, {"owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521664353, "post_id": 49415795, "comment_id": 85833772, "body": "@ThomasMatthews great, thanks. I will look into that!"}, {"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1521664404, "post_id": 49415795, "comment_id": 85833794, "body": "Those getters and setters in your <code>Node</code> class are quite unnecessary. Instead, I would make <code>LinkedList</code> and <code>Node</code> friends."}, {"owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "reply_to_user": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1521664437, "post_id": 49415795, "comment_id": 85833814, "body": "@MikeBorkland why is that?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1521664600, "post_id": 49415795, "comment_id": 85833921, "body": "Concerning extracting a header, generally yes. However, if you wanted a linked list, you would use <code>std::list&lt;&gt;</code>. You are doing that for learning though (I guess), so it makes sense to keep it all in one file."}, {"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1521664610, "post_id": 49415795, "comment_id": 85833922, "body": "Because you can access the members of <code>Node</code> directly. Example: if you pass <code>Node *p</code> to a function, you can get access to its <code>next</code> pointer with <code>p-&gt;next</code>."}, {"owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "reply_to_user": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1521664669, "post_id": 49415795, "comment_id": 85833955, "body": "@MikeBorkland my understanding was that it is a good habit to not access members directly and to use public functions to access them outside of the class"}, {"owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1521664726, "post_id": 49415795, "comment_id": 85833984, "body": "@UlrichEckhardt yes, this is purely for learning"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1521664787, "post_id": 49415795, "comment_id": 85834016, "body": "@David Are you sure you want <code>value</code> to be an <code>int*</code>? Why is it not an <code>int</code>?"}, {"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1521664887, "post_id": 49415795, "comment_id": 85834063, "body": "@David In general, yes, that is good advice. For example, you wouldn&#39;t want the user to be able to access the <code>prev</code> and <code>next</code> pointers. However, there is no reason why the <code>LinkedList</code> class should not be able to access the <code>next</code> and <code>prev</code> pointers of a <code>Node</code> in the list. If you declare <code>friend class Node;</code> in your <code>LinkedList</code> class, then <code>LinkedList</code> will be able to access the private variables of <code>Node</code>."}, {"owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1521664923, "post_id": 49415795, "comment_id": 85834084, "body": "@super it easily could be. I just chose that for the slight savings. Also mostly for practice with using pointers"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521664958, "post_id": 49415795, "comment_id": 85834104, "body": "Public vs private depends on what you&#39;re doing with it. In the case of <code>Node</code> you have a public setter function that does absolutely nothing to protect the object from someone setting an invalid value and a public getter that hands the value out to all who ask.  The only difference between this and a public variable is a few extra lines of code and a place to hang a debugger breakpoint."}, {"owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "reply_to_user": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1521665013, "post_id": 49415795, "comment_id": 85834134, "body": "@MikeBorkland ok yeah that makes sense. Didn&#39;t think of it that way. Thanks for the tip!"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1521665123, "post_id": 49415795, "comment_id": 85834193, "body": "@David I don&#39;t think you are saving anything. You are just loosing by using a pointer there."}, {"owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1521665170, "post_id": 49415795, "comment_id": 85834211, "body": "@super fair enough"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521665299, "post_id": 49415795, "comment_id": 85834273, "body": "Slight savings is actually a loss. The pointer may well be larger and more expensive to copy than an int. Plus using a pointer makes it harder on the CPU to cache the value. With an <code>int</code>, when you load a <code>Node</code>, you also load the <code>int</code>. With a pointer you likely have to dive back into slower storage looking for the pointed-to <code>int</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521666828, "post_id": 49415795, "comment_id": 85834981, "body": "Unrelated: In the <code>print</code> function I think you&#39;re missing a <code>count++</code> in the <code>while</code> loop."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1521668697, "post_id": 49415795, "comment_id": 85835862, "body": "Once you are done solving this yourself, just use <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\">std::list</a> or (usually better) <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a>."}], "answers": [{"comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1521665241, "post_id": 49416112, "comment_id": 85834244, "body": "<code>empty</code> is telling you if the list is empty of not, it&#39;s not removing/deleting anything."}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521666347, "post_id": 49416112, "comment_id": 85834749, "body": "@user4581301, modified my answer. Thanks  for your valuable suggestions :-)"}], "tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": -1, "last_activity_date": 1521666315, "last_edit_date": 1521666315, "creation_date": 1521664893, "answer_id": 49416112, "question_id": 49415795, "link": "https://stackoverflow.com/questions/49415795/linked-list-replaces-the-front-node-instead-of-popping-onto-back/49416112#49416112", "title": "Linked List replaces the front node instead of popping onto back", "body": "<p>As you are using a static variable in below code all your node will have first value you entered.</p>\n\n<pre><code>static int init;\nstd::cin &gt;&gt; init;\nstatic Node x(&amp;init);\n</code></pre>\n\n<p>Correct it like below and try again</p>\n\n<pre><code>int *init = new int;\nstd::cin &gt;&gt; *init;\nNode *x = New Node(init);\n</code></pre>\n\n<p>Your pushBack method look good for me. Just make above change and try.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521665832, "post_id": 49416338, "comment_id": 85834513, "body": "Minor niggle: <code>Node</code> is <code>static</code> in the asker&#39;s source. It&#39;s not on the stack."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1521665997, "post_id": 49416338, "comment_id": 85834590, "body": "Another recommendation worth adding: Have <code>pushBack</code> take an <code>int</code> parameter and create the <code>Node</code> inside <code>pushBack</code> with the passed-in <code>int</code>. The user of the Linked List shouldn&#39;t have to deal with nodes. That&#39;s the linked list&#39;s job."}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 0, "creation_date": 1521666044, "post_id": 49416338, "comment_id": 85834607, "body": "Value is a int pointer."}, {"owner": {"reputation": 1076, "user_id": 789491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d88046d5f80de0fdd0daaef0599a449?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/789491/jason"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521666123, "post_id": 49416338, "comment_id": 85834637, "body": "@user4581301 the suggestion to have the pushBack() take the int value is an excellent design suggestion."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 1, "creation_date": 1521666135, "post_id": 49416338, "comment_id": 85834644, "body": "@AbhijitPritam true, but the general consensus is that using a pointer to an <code>int</code> is a bad idea. It&#39;s slower, probably larger, and adds additional memory management issues."}, {"owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "edited": false, "score": 0, "creation_date": 1521666335, "post_id": 49416338, "comment_id": 85834744, "body": "@Jason, that answer makes sense to me. I guess I need to do a little more reading up on this topic (which is why I&#39;m doing some practice and getting some great help from you all). I was also under the impression that a pointer is automatically deleted when it leaves scope. I guess I don&#39;t understand that very well either. Either way, thanks for the input"}, {"owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521666355, "post_id": 49416338, "comment_id": 85834753, "body": "@user4581301 that makes perfect sense to me. I will be implementing that"}], "tags": [], "owner": {"reputation": 1076, "user_id": 789491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d88046d5f80de0fdd0daaef0599a449?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/789491/jason"}, "is_accepted": true, "score": 2, "last_activity_date": 1521665946, "last_edit_date": 1521665946, "creation_date": 1521665696, "answer_id": 49416338, "question_id": 49415795, "link": "https://stackoverflow.com/questions/49415795/linked-list-replaces-the-front-node-instead-of-popping-onto-back/49416338#49416338", "title": "Linked List replaces the front node instead of popping onto back", "body": "<p>There are lots of good tips here, but none so far will solve the fundamental problem: you need to allocate the Node instances on the heap instead of the stack.</p>\n\n<p>To make this easier, I'm going to suggest you store the ints by value instead of a pointer. Change all the places you use int* to just plain 'int'.</p>\n\n<p>Then change the code to push a node on the back to this:</p>\n\n<pre><code>else if (input == '2') {\n  std::cout &lt;&lt; \"Value: \";\n  int init;\n  std::cin &gt;&gt; init;\n  Node *x = new Node(init);\n  ll.pushBack(x);\n}\n</code></pre>\n\n<p>I've tested this with your code and it worked for me.</p>\n\n<p>When you do something like this:</p>\n\n<pre><code>    else if (input == '2') {\n  std::cout &lt;&lt; \"Value: \";\n  int init;\n  std::cin &gt;&gt; init;\n  Node x(init);\n  ll.pushBack(&amp;x);\n}\n</code></pre>\n\n<p>You're allocating a Node on the stack, which means as soon as you exit the \"else\" block the Node 'x' is destroyed and the pointer you added to your list is no longer valid.  You need to allocate Node on the heap with the new operator.  That will keep the Node alive and in memory until you delete it later.</p>\n\n<p>Speaking of delete -- once you get this part working, you'll want to write a destructor that iterates over all the nodes in your list and deletes them.  But for now, I'd focus on getting your other operations correct.</p>\n"}], "owner": {"reputation": 443, "user_id": 1691556, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e71a66583a644e0f146d1bbb46526788?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1691556/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "closed_date": 1521725341, "accepted_answer_id": 49416338, "answer_count": 2, "score": -2, "last_activity_date": 1521666315, "creation_date": 1521663518, "last_edit_date": 1521665452, "question_id": 49415795, "link": "https://stackoverflow.com/questions/49415795/linked-list-replaces-the-front-node-instead-of-popping-onto-back", "closed_reason": "Not suitable for this site", "title": "Linked List replaces the front node instead of popping onto back", "body": "<p>I'm working on creating a doubly linked list. I seem to be having issues with the <code>pushBack</code> function (supposed to add a node to the end of the list). Somehow it just replaces the first node and points to itself as both the previous and next node. When I go to print the list, it just goes on forever because the next node isn't NULL (because as I said, it's pointing to itself for some reason). Posted below is the entire program. I think I might be having an issue with scope or possible am using the pointers incorrectly.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Node {\npublic:\n  Node();\n  Node(int *val, Node *nx = NULL, Node *prev = NULL) {\n    value = val; next = nx; previous = prev;\n  }\n\n  void setPrev(Node* prev) { previous = prev; }\n  void setNext(Node* nx) { next = nx; }\n  void setVal(int* x) { value = x; }\n  Node* getPrev() { return previous; }\n  Node* getNext() { return next; }\n  int* getVal() { return value; }\n\nprivate:\n  int* value;\n  Node *next;\n  Node *previous;\n};\n\nclass LinkedList {\n public:\n  LinkedList() : front(NULL), back(NULL) {}\n\n  bool empty() { return front == NULL; }\n  void pushBack(Node *nd) {\n    if (back == NULL) {\n      front = nd;\n      back = nd;\n    }\n    else {\n      back-&gt;setNext(nd);\n      nd-&gt;setPrev(back);\n      back = nd;\n    }\n    std::cout &lt;&lt; \"Front: \" &lt;&lt; *front-&gt;getVal() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Back: \" &lt;&lt; *back-&gt;getVal() &lt;&lt; std::endl;\n  }\n  Node* topFront() { return front; }\n  void printFront() {\n    int *x = front-&gt;getVal();\n    std::cout &lt;&lt; *x &lt;&lt; std::endl;\n  }\n\n  void print() {\n    if (empty()) {\n      std::cout &lt;&lt; \"List is empty\" &lt;&lt; std::endl;\n    }\n    else {\n      std::cout &lt;&lt; \"Print list\" &lt;&lt; std::endl;\n\n      Node *x = front;\n      int count = 1;\n\n      // First just print the first element, then the rest\n      int *y = front-&gt;getVal();\n      std::cout &lt;&lt; count &lt;&lt; \": \";\n      std::cout &lt;&lt; *y &lt;&lt; std::endl;\n\n      x = x-&gt;getNext();\n\n      while (x != NULL) {\n        std::cout &lt;&lt; count &lt;&lt; \": \";\n        int *z = x-&gt;getVal(); std::cout &lt;&lt; *z &lt;&lt; std::endl;\n\n        x = x-&gt;getNext();\n      }\n    }\n  }\n private:\n  Node* front;\n  Node* back;\n};\n\nint main() {\n  LinkedList ll;\n  char input;\n  char const *menu = {\"Options:\\n\\n\" \\\n                      \"0. Quit\\n\" \\\n                      \"1. Print linked-list\\n\" \\\n                      \"2. pushBack -- add to the end of the LinkedList\\n\"};\n\n  while (input != '0') {\n    std::cout &lt;&lt; menu &lt;&lt; std::endl;\n    std::cout &lt;&lt; \":\";\n\n    std::cin &gt;&gt; input;\n\n    if (input == '1') {\n      ll.print();\n    }\n    else if (input == '2') {\n      std::cout &lt;&lt; \"Value: \";\n      static int init;\n      std::cin &gt;&gt; init;\n      static Node x(&amp;init);\n      ll.pushBack(&amp;x);\n    }\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Below is the input that I used. I printed some values to try to debug the program. You'll notice, I just tried putting the nodes with values 1, 2, 3 and 4 into the list</p>\n\n<pre><code>Options:\n\n0. Quit\n1. Print linked-list\n2. pushBack -- add to the end of the LinkedList\n\n:2\nValue: 1\nFront: 1\nBack: 1\nNode Prev: 0\nNode Next: 0\nOptions:\n\n0. Quit\n1. Print linked-list\n2. pushBack -- add to the end of the LinkedList\n\n:2\nValue: 2\nFront: 2\nBack: 2\nNode Prev: 0x602300\nNode Next: 0x602300\nOptions:\n\n0. Quit\n1. Print linked-list\n2. pushBack -- add to the end of the LinkedList\n\n:2\nValue: 3\nFront: 3\nBack: 3\nNode Prev: 0x602300\nNode Next: 0x602300\nOptions:\n\n0. Quit\n1. Print linked-list\n2. pushBack -- add to the end of the LinkedList\n\n:2\nValue: 4\nFront: 4\nBack: 4\nNode Prev: 0x602300\nNode Next: 0x602300\nOptions:\n\n0. Quit\n1. Print linked-list\n2. pushBack -- add to the end of the LinkedList\n\n:0\n</code></pre>\n"}, {"tags": ["c++", "image-processing", "computer-vision"], "comments": [{"owner": {"reputation": 3953, "user_id": 1866656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ac0ebcab32a8a880576cf42822d707?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/1866656/ash"}, "edited": false, "score": 0, "creation_date": 1521668001, "post_id": 49415773, "comment_id": 85835537, "body": "To make sure I understood correctly... For each position of your rope, you want to detect the crossing point and then four points that are on the rope, at a given distance from the crossing point? If yes, then I think that your problem is very difficult to solve without additional constraints/assumptions on the pose of the rope relative to the camera and the color/texture of the background. If as in your example, the rope is in a plane perpendicular to the camera with a white background, you could detect edges and turn them into connected components, and compute the distance like that..."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 2, "creation_date": 1521672123, "post_id": 49415773, "comment_id": 85837144, "body": "Draw a circle with the red dot as center. Find the pixels where the rope and the circle intersect. You should get exactly four connected components. Those are your blue dots."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 1, "creation_date": 1521710010, "post_id": 49415773, "comment_id": 85850155, "body": "@CrisLuengo I think there might be a problem with that approach if there could be kinks or bends in the rope which would affect the distance of the blue point from the red point, wouldn&#39;t there? I mean you are really assuming that the ropes are straight radii from the red point."}, {"owner": {"reputation": 3953, "user_id": 1866656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ac0ebcab32a8a880576cf42822d707?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/1866656/ash"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1521716348, "post_id": 49415773, "comment_id": 85854731, "body": "@MarkSetchell agreed, this was the whole point of my comment: not only bends but viewpoint changes also will affect the distance in the projective plane."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1521722339, "post_id": 49415773, "comment_id": 85859022, "body": "@MarkSetchell: well, the OP just says &quot;All the four points have the same distance from the red spot.&quot; It doesn&#39;t specify what type of distance. Obviously it&#39;s somewhat more involved computing the distance along the rope, but if the distance is small w.r.t. the possible curvature of the rope, both distances would be fairly similar."}], "answers": [{"comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 1, "creation_date": 1521722583, "post_id": 49427207, "comment_id": 85859224, "body": "This is impressively detailed, it looks like you set out to write a book... :)"}, {"owner": {"reputation": 3696, "user_id": 1104179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lZY6X.gif?s=128&g=1", "display_name": "Rethunk", "link": "https://stackoverflow.com/users/1104179/rethunk"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1521770167, "post_id": 49427207, "comment_id": 85884386, "body": "@CrisLuengo: soon to be available as a Kindle remaindered textbook: available for free until they mingle the hard drive."}, {"owner": {"reputation": 3696, "user_id": 1104179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lZY6X.gif?s=128&g=1", "display_name": "Rethunk", "link": "https://stackoverflow.com/users/1104179/rethunk"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1521771079, "post_id": 49427207, "comment_id": 85884578, "body": "@CrisLuengo: also sent you a LinkedIn request. Howdy!  (Above: &quot;mingle&quot; --&gt; &quot;munge&quot;)"}], "tags": [], "owner": {"reputation": 3696, "user_id": 1104179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lZY6X.gif?s=128&g=1", "display_name": "Rethunk", "link": "https://stackoverflow.com/users/1104179/rethunk"}, "is_accepted": false, "score": 1, "last_activity_date": 1521717173, "creation_date": 1521717173, "answer_id": 49427207, "question_id": 49415773, "link": "https://stackoverflow.com/questions/49415773/how-to-detect-the-coordinates-of-certain-points-on-image/49427207#49427207", "title": "how to detect the coordinates of certain points on image", "body": "<p>Although you're using ORB, you're still going to need an algorithm to segment the rope from the background, or at least some technique to identify image chunks that belong to the rope and that are equidistant from the red dot. There are a number of options to explore.</p>\n\n<p>It's important to consider your lighting &amp; imaging as separate problems to be solved if this is meant to be a real-world application. This looks a bit like a problem for a class rather than for a application you'll sell and support, but you should still consider lighting:</p>\n\n<ul>\n<li>Will your algorithm(s) still work when light level is reduced?</li>\n<li>How will detection be affected by changes in camera pose relative to the surface where the rope will be located?</li>\n<li>If you'll be detecting \"black\" rope, will the algorithm also be required to detect rope of different colors? dirty rope? rope on different backgrounds?</li>\n</ul>\n\n<p>Since you're object of interest is rope, you have to consider a class of algorithms suitable for detection of non-rigid objects. Always consider the simplest solution first! </p>\n\n<p><strong>Connected Components</strong>\nConnected components labeling is a traditional image processing algorithm and still suitable as the starting point for many applications. The last I knew, this was implemented in OpenCV as findContours(). This can also be called \"blob finding\" or some variant thereof.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Connected-component_labeling\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Connected-component_labeling</a></p>\n\n<p><a href=\"https://docs.opencv.org/2.4/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours\" rel=\"nofollow noreferrer\">https://docs.opencv.org/2.4/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours</a> </p>\n\n<p>Depending on lighting, you may have to take different steps to binarize the image before running connected components. As a start, convert the color image to grayscale, which will simplify the task significantly.</p>\n\n<ol>\n<li>Try a manual threshold since you can quickly test a number of values to see the effect. Don't be too discouraged if the binarization isn't quite right--this can often be fixed with preprocessing.</li>\n<li>If a range of manual thresholds works (e.g. 52 - 76 in an 8-bit grayscale range), then use an algorithm that will automatically calculate the threshold for you: Otsu, entropy-based methods, etc., will all offer comparable performance. Whichever technique works best, the code/algorithm can be tweaked further to optimize for your rope application.</li>\n<li>If thresholding and binarization don't work--which for your rope application seems unlikely, at least how you've presented it--then switch to thinking in terms of gradient-based (edge-based, energy-based) techniques.</li>\n</ol>\n\n<p>But assuming you can separate the rope from the background, you're still going to need a method to start at the red dot [within the rope] and move equal distances out to the blue points. More about that later after a discussion of other rope segmentation methods.</p>\n\n<p>Note: connected components labeling can work in scenarios beyond just binarizing black &amp; white images. If you can create a texture field or some other 2D representation of the image that makes it possible to distinguish the black rope from the relatively light background, you may be able to use a connected components algorithm. (Finding a \"more complicated\" or \"more modern\" algorithm isn't necessarily going to be the right approach.)</p>\n\n<p>In a binarized image, blobs can be nested: on a white background you can have several black blobs, inside of one or more of which are white blobs, inside of which are black blobs, etc. An earlier version of OpenCV handled this reasonably well. (OpenCV is a nice starting point, and a touchpoint for many, but for a number of reasons it doesn't always compare favorably to other open source and commercial packages; popularity notwithstanding, OpenCV has some issues.)</p>\n\n<p>Once you have a \"blob\" (a 4-connected region of pixels) in a 2D digital image, you can treat the blob as an object, at which point you have a number of options:</p>\n\n<ul>\n<li>Edge tracing: trace around the inside and outside edges of the blob. From what I recall, OpenCV does (or at least should) have some relatively straightforward method to get the edges. </li>\n<li>Split the blob into component blobs, each of which can be treated separately</li>\n<li>Convert the blob to a polygon</li>\n<li>...</li>\n</ul>\n\n<p>A connected components algorithm should be high on the list of techniques to try if you have a non-rigid object.</p>\n\n<p><strong>Boolean Operations</strong>\nOnce you have the rope as a connected component (and possibly even without this), you can use boolean image operations to find the spots at the blue dots in your image:</p>\n\n<ol>\n<li>Create a circular region in data, or even in the image</li>\n<li>Find the intersection of the circle (an annulus) and the black region representing the rope. Using your original image, you should have four regions.</li>\n<li>Find the center point of the intersection regions.</li>\n</ol>\n\n<p>You could even try this without using connected components at all, but using connected components as part of the solution could make it more robust.</p>\n\n<p><strong>Polygon Simplification</strong>\nIf you have a blob, which in your application would be a connected set of black pixels representing the rope on the floor, then you can consider converting this blob to one or more polygons for further processing. There are advantages to working with polygons.</p>\n\n<p>If you consider only the outside boundary of the rope, then you can see that the set of pixels defining the boundary represents a polygon. It's a polygon with a lot of points, and not a convex polygon, but a polygon nonetheless.</p>\n\n<p>To simplify the polygon, you can use an algorithm such as Ramer-Douglas-Puecker:</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm</a></p>\n\n<p>Once you have a simplified polygon, you can try a few techniques to render useful data from the polygon</p>\n\n<ul>\n<li>Angle Bisector Network</li>\n<li>Triangulation (e.g. using ear clipping)</li>\n</ul>\n\n<p>Triangulation is typically dependent on initial conditions, so the resulting triangulation for slighting different polygons (that is, rope -> blob -> polygon -> simplified polygon). So in your application it might be useful to triangulate the dark rope region, and then to connect the center of one triangle to the center of the next nearest triangle. You'll also have to deal with crossings, such as the rope overlap. Ultimately this can yield a \"skeletonization\" of the rope. Speaking of which...</p>\n\n<p><strong>Skeletonization</strong>\nIf the rope problem was posed to you as a class exercise, then it may have been a prompt to try skeletonization. You can read about it here:</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Topological_skeleton\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Topological_skeleton</a></p>\n\n<p>Skeletonization and thinning have their own problems to solve, but you should dig into them a bit and see those problems themselves.</p>\n\n<p>The Medial Axis Transform (MAT) is a related concept. Long story there.</p>\n\n<p><strong>Edge-based techniques</strong>\nThere are a number of techniques to generate \"edge images\" based on edge strength, energy, entropy, etc. Making them robust takes a little effort. If you've had academic training in image processing you've likely heard of Harris, Sobel, Canny, and similar processing methods--none are magic bullets, but they're simple and dependable and will yield data you need.</p>\n\n<p>An \"edge image\" consists of pixels representing the image gradient strength [and sometimes the gradient direction]. People may call this edge image something else, but it's the concept that matters.</p>\n\n<p>What you then do with the edge data is another subject altogether. But one reason to think of edge images (or at least object borders) is that it reduces the amount of information your algorithm(s) will need to process.</p>\n\n<p><strong>Mean Shift (and related)</strong>\nTo get back to segmentation mentioned in the section on connected components, there are other methods for segmenting figures from a background: K-means, mean shift, and so on. You probably won't need any of those, but they're neat and worth studying.</p>\n\n<p><strong>Stroke Width Transform</strong>\nThis is an intriguing technique used to extract text from noisy backgrounds. Although it's intended for OCR, it could work for rope since the rope width is relatively constant, the rope shape varies, there are crossings, etc.</p>\n\n<p>In short, and simplifying quite a bit, you can think of SWT as a means to find \"strokes\" (thick lines) by finding gradients antiparallel to each other. On either side of a stroke (or line), the edge gradient points normal to the object edge. The normal on one side of the stroke points opposite the direction of the normal on the other side of the stroke. By filtering for pixel-gradient pairs within a certain distance of each other, you can isolate certain strokes--even automatically. For your example the collection of points representing edge pairs for the rope would be much more common than other point pairs.</p>\n\n<p><strong>Non-Rigid Matching</strong>\nThere are techniques for matching non-rigid shapes, but they would not be worth exploring. If any of the techniques I mentioned above is unfamiliar to you, explore some of those first before you try any fancier algorithms.</p>\n\n<p><strong>CNNs, machine learning, etc.</strong>\nJust don't even think of these methods as a starting point. </p>\n\n<p><strong>Other Considerations</strong>\nIf this were an application for industry, security, or whatnot, you'd have to determine how well your image processing worked under all environmental considerations. That's not an easy task, and can make all the difference between a setup that \"works\" in the lab and a setup that actually works in practice.</p>\n\n<p>I hope that's of some help. Feel free to post a reply if I've confused more than helped, or if you want to explore some idea in more detail. Though I tried to touch on some common(ish) techniques, I didn't mention all the different ways of addressing this problem.</p>\n\n<p>And briefly: once you have a skeleton, point network, or whatever representing a reduced data set for the rope and the red dot (the identified feature), a few techniques to find the items at the blue dots:</p>\n\n<ul>\n<li>For a skeleton, trace along each \"branch\" of the rope outward from the know until the geodesic distance or straight-line 2D distance is the distance D that you want.</li>\n<li>To use geometry, create a circle of width 1 - 2 pixels. Find the intersection of that circle and the rope. Find the center point of the intersections of circle and rope. (Also described above.)</li>\n</ul>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 29, "user_id": 8796465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b47cacdd5ed78aa1e7cd20a2209b9a49?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmad", "link": "https://stackoverflow.com/users/8796465/ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1127, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1521717173, "creation_date": 1521663446, "last_edit_date": 1521707347, "question_id": 49415773, "link": "https://stackoverflow.com/questions/49415773/how-to-detect-the-coordinates-of-certain-points-on-image", "title": "how to detect the coordinates of certain points on image", "body": "<p><a href=\"https://i.stack.imgur.com/vSwNC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vSwNC.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I'm using the ORB algorithm to detect and get the coordinates of the crossings of rope shown in the image, which is represented by the red dot. I want to detect the coordinates of the four points surrounding the crossing represented by the blue dots. All the four points have the same distance from the red spot.\nAny idea how to get their coordinates by getting use of the red spot coordinate.\nThank you in Advance  </p>\n"}, {"tags": ["c++", "c", "visual-studio", "winapi"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1521663423, "post_id": 49415624, "comment_id": 85833291, "body": "Are you getting errors?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1521663928, "post_id": 49415624, "comment_id": 85833552, "body": "@JonathanPotter - No.  Thanks--updated the question."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 5, "creation_date": 1521664129, "post_id": 49415624, "comment_id": 85833671, "body": "I think _WINDLL is something the compiler defines for you, to tell you you&#39;re being compiled as a DLL. I don&#39;t think it changes anything implicitly; your code would have to actually test for it via #ifdef."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1521664527, "post_id": 49415624, "comment_id": 85833864, "body": "@JonathanPotter - Ahhh, and it is being checked in a different solution which uses these same .props files.  Thanks.  I both hope and believe you are correct :)  I certainly didn&#39;t find it in the system headers, but I&#39;m always reluctant to trust that as a &quot;final answer&quot; :)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1521665707, "post_id": 49415624, "comment_id": 85834455, "body": "&quot;include Windows.h for sockets, mutexes, and threads&quot; at least for &quot;mutex&quot; and &quot;thread&quot;, I&#39;d recommend <code>include &lt;mutex&gt;</code> and <code>include &lt;thread&gt;</code> instead."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1521668854, "post_id": 49415624, "comment_id": 85835938, "body": "@JesperJuhl I don\u2019t wanna trigger the C guys :). Plus it\u2019s an OS abstraction layer. Pedal to the metal and all."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1521668987, "post_id": 49415624, "comment_id": 85835986, "body": "@zzxyz. - I&#39;m not following you. <code>&lt;mutex&gt;</code> and <code>&lt;thread&gt;</code> are C++ headers, <i>not</i> C headers. What are you on about?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1521671546, "post_id": 49415624, "comment_id": 85836977, "body": "@JesperJuhl They are C guys, and I&#39;m going to pull STL headers into their code?  I truly don&#39;t understand what&#39;s not to get about that causing a problem."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1521672711, "post_id": 49415624, "comment_id": 85837316, "body": "It is not a predefined macro like Jonathan guessed.  This comes from the &quot;Windows Dynamic Link Library&quot; property sheet.  Use View &gt; (Other Windows) &gt; Property Manager to see that.  Doesn&#39;t mean anything more than &quot;this project builds a DLL that is going to be used on Windows&quot;.  You&#39;ll certainly lose elegance points for having it defined in a static library project but you&#39;ll probably get away with it.  Removing the property sheet would be wise."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1521673557, "post_id": 49415624, "comment_id": 85837619, "body": "@HansPassant - It is explicitly defined in one of OUR property sheets (I know, I know) that is used by projects I&#39;ve never even looked at.  God only knows what those projects are doing with it.  I can&#39;t remove the sheet without major headaches, either."}, {"owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "edited": false, "score": 0, "creation_date": 1521698807, "post_id": 49415624, "comment_id": 85844172, "body": "_WINDLL might not be defined by the compiler, but it is defined by the implementation. Generally any identifier with leading underscore followed by a capital letter is reserved and its existence should be managed, if not by the compiler itself, the bundled runtime."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1521749895, "post_id": 49415624, "comment_id": 85877389, "body": "Surely your property sheets are under source control. So just find out, who added that property sheet to your project, or who added the <code>_WINDLL</code> preprocessor symbol to the property sheet, and ask for clarification. The commit message may provide some clues as well."}], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 993, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1521674604, "creation_date": 1521662799, "last_edit_date": 1521674604, "question_id": 49415624, "link": "https://stackoverflow.com/questions/49415624/effect-of-defining-windll-in-a-static-lib", "title": "Effect of defining _WINDLL in a static lib", "body": "<p>For reasons I'm not going to get heavily into, but boil down to complicated .props chains, I have a number of projects (All <code>C</code> compiled with a <code>C++</code> compiler), that in a <code>DLL</code> <strong>solution,</strong> still build static libraries, but define <code>_WINDLL</code>.  This is fixable, but not easily.</p>\n\n<p>None of these projects will or ever will use MFC--or anything like it--but <em>one</em> project--an OS abstraction layer--does include Windows.h for sockets, mutexes, and threads.</p>\n\n<p>There are no errors or warnings during compilation because of this, and the application seems to run fine, but it's an ancient beast, with hundreds of little features and no unit tests :)</p>\n\n<p>My question is: do I <strong>need</strong> to fix these static libraries to not define _WINDLL?</p>\n\n<p>EDIT:</p>\n\n<p>More background would seem to be necessary although I think I have my answer:</p>\n\n<p>The property sheet defining this is OUR property sheet, and it's part of a relatively complex system that allows us to build Release/Debug/Lib/Dll Arm/WinCE/x86/x64 Clang/MSVC with <em>relatively</em> little pain, but it does occasionally have its issues.  The property sheets are hierarchical and are used by both projects I work with and by projects I have no desire to touch.</p>\n"}, {"tags": ["c++", "alignment", "placement-new"], "answers": [{"comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 7, "creation_date": 1521663456, "post_id": 49415641, "comment_id": 85833310, "body": "You could also write <code>std::aligned_storage_t</code>. I&#39;ve sometimes made this error (with other types) by simply forgetting the <code>_t</code>. It can be quite difficult to spot"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 12, "last_activity_date": 1521663005, "last_edit_date": 1521663005, "creation_date": 1521662885, "answer_id": 49415641, "question_id": 49415612, "link": "https://stackoverflow.com/questions/49415612/false-warning-for-placement-new/49415641#49415641", "title": "False warning for placement new?", "body": "<p><code>std::aligned_storage</code> is a trait with a nested <code>type</code> member. That <code>type</code> is of the correct size and alignment. The trait itself may have no data members, and therefore will get the default object size, which is 1.</p>\n\n<p>So the fix is simple:</p>\n\n<pre><code>std::aligned_storage&lt;10,alignof(long)&gt;::type storage;\n</code></pre>\n"}], "owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 2, "accepted_answer_id": 49415641, "answer_count": 1, "score": 8, "last_activity_date": 1521663005, "creation_date": 1521662748, "last_edit_date": 1521662974, "question_id": 49415612, "link": "https://stackoverflow.com/questions/49415612/false-warning-for-placement-new", "title": "False warning for placement new?", "body": "<p>I have the following code:</p>\n\n<pre><code>#include \"type_traits\"\n#include &lt;new&gt;\n\n\nvoid foo()\n{\n    std::aligned_storage&lt;10,alignof(long)&gt; storage;\n    new (&amp;storage) int(12);\n}\n</code></pre>\n\n<p>I have some storage defined (with length 10 bytes), and I am placement <code>new</code>ing an <code>int</code> into that location</p>\n\n<p>gcc 7.3 gives the following warning:</p>\n\n<pre><code>&lt;source&gt;:10:10: warning: placement new constructing an object of type 'int' and size '4' in a region of type 'std::aligned_storage&lt;10, 8&gt;' and size '1' [-Wplacement-new=]\n     new (&amp;storage) int(12);\n</code></pre>\n\n<p>If I am not incorrect this warning is incorrect.  Am I missing something here or is this warning spurious?</p>\n"}, {"tags": ["c++", "performance", "openssl", "epoll", "handshake"], "comments": [{"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521662628, "post_id": 49415489, "comment_id": 85832852, "body": "May the <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> be with you."}, {"owner": {"reputation": 11, "user_id": 9530127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aff322959b0d2a2a19dd83cedf00f47?s=128&d=identicon&r=PG&f=1", "display_name": "M. Mike", "link": "https://stackoverflow.com/users/9530127/m-mike"}, "reply_to_user": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521664680, "post_id": 49415489, "comment_id": 85833961, "body": "ssl parts is easy, but socket (multiplexing) parts is very difficult to produce simple codes."}, {"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1521668559, "post_id": 49415489, "comment_id": 85835813, "body": "Just in case, did you check if there are enough random bits available? cat /proc/sys/kernel/random/entropy_avail, should return something around 1k~2k."}, {"owner": {"reputation": 11, "user_id": 9530127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aff322959b0d2a2a19dd83cedf00f47?s=128&d=identicon&r=PG&f=1", "display_name": "M. Mike", "link": "https://stackoverflow.com/users/9530127/m-mike"}, "edited": false, "score": 0, "creation_date": 1521736624, "post_id": 49415489, "comment_id": 85869773, "body": "# cat /proc/sys/kernel/random/entropy_avail 140 Hmm"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9530127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aff322959b0d2a2a19dd83cedf00f47?s=128&d=identicon&r=PG&f=1", "display_name": "M. Mike", "link": "https://stackoverflow.com/users/9530127/m-mike"}, "edited": false, "score": 0, "creation_date": 1521664532, "post_id": 49415767, "comment_id": 85833868, "body": "i know, i tested several times with &quot;openssl s_client -verify -showcerts -connect&quot; command from remote machines. i tested a lot of different server programs with this command and with my stress tool. There is something missing in ssl settings or there is something more i think. But i didn&#39;t understand what..."}], "tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1521663766, "last_edit_date": 1521663766, "creation_date": 1521663438, "answer_id": 49415767, "question_id": 49415489, "link": "https://stackoverflow.com/questions/49415489/openssl-handshake-ssl-accept-is-slow-in-milliseconds/49415767#49415767", "title": "Openssl handshake (SSL_accept) is slow in milliseconds", "body": "<p>SSL Handshake includes critical operational logic includes encryption.\nI am listing you some of the reasons for slow processing:-</p>\n\n<ol>\n<li>A client requests access to a protected resource.</li>\n<li>The server presents its certificate to the client.</li>\n<li>The client verifies the server\u2019s certificate.</li>\n<li>If successful, the client sends its certificate to the server.</li>\n<li>The server verifies the client\u2019s credentials.</li>\n<li>If successful, the server grants access to the protected resource requested by the client </li>\n</ol>\n\n<p>So if you don't have SSL handshake in your application, your application avoids all the above operation and obviously it will increasing operational speed.</p>\n\n<p>One most important reason for slow speed is if you consider all the above there is so many communication between client and server and data decryption/encryption is done in a synchronize and that also reduces the parallel processing as well. </p>\n"}], "owner": {"reputation": 11, "user_id": 9530127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aff322959b0d2a2a19dd83cedf00f47?s=128&d=identicon&r=PG&f=1", "display_name": "M. Mike", "link": "https://stackoverflow.com/users/9530127/m-mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1042, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521665103, "creation_date": 1521662257, "last_edit_date": 1521665103, "question_id": 49415489, "link": "https://stackoverflow.com/questions/49415489/openssl-handshake-ssl-accept-is-slow-in-milliseconds", "title": "Openssl handshake (SSL_accept) is slow in milliseconds", "body": "<p>i am writing a server program with c++.\ni used epoll socket multiplexing for linux and openssl 1.0.2 for secure layer</p>\n\n<p>on Centos 6.9 final (with 4 cores, 2GBs of RAM, x64 arch).</p>\n\n<p>This server program's purpose is a websocket/socket server library for my projects.</p>\n\n<p>My problem is,\nSSL_accept and SSL_do_handshake functions are little slow.</p>\n\n<p>i made a little statics for my problem;</p>\n\n<p>for 50k EPOLL_CTL_ADD usage (i mean, 50k user connections simultaneously/repeatedly) my main read\nfunction (SSL_read, SSL_accept logic) spending 92.8 seconds at total.</p>\n\n<p>for this 92.8 seconds, SSL_accept (or SSL_do_handshake [i tried]) functions spends 81.9 seconds.</p>\n\n<p>but when i close my ssl algorithms (made with defines) and re-stress, read main function usage [read( function] is spending 10.4 seconds for 50k with same function usages in this statics.</p>\n\n<p>The averages are;</p>\n\n<ul>\n<li><p>No SSL : my read main function spends 0.2ms average for each read call (and perform my upper functions) from epoll loop (10.4/50000)</p></li>\n<li><p>With SSL : my read main function spends 1.85ms average for each read call (and perform my upper functions) from epoll loop (92.8/50000)</p></li>\n</ul>\n\n<p>With these conditions my server can accept only 18~19k users at same time (i tried a lot of times) (SSL version is 9.25 times slow from Non-SSL version). And there is a lot of locking my server itself at these times.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>At same VPS, i tried nodejs, nginx etc, there is no locking theirselfs like my server.</li>\n<li>SSL certificate is purchased ssl from comodo.</li>\n<li>i research thousands of times and i looked at a lot of server source codes thounds of times.</li>\n</ul>\n\n<p>My question is, why my SSL_accept/SSL_do_handshake functions are slow.</p>\n\n<p>i tried a lot of things in 3~5 months. But i couldn't figure it out.</p>\n\n<p>My time spend logic is:</p>\n\n<pre><code>###\ntimeMs = CurTime()\nSSL_accept(...)\ntimeTotalVariable += (CurTime() - timeMs)\n###\n</code></pre>\n\n<p>This is my pseudo code :</p>\n\n<pre><code>\"call\" ctx = SSL_CTX_new(SSLv23_method())\n; close sslv2 &amp; sslv3 protos\n; set SSL_MODE_RELEASE_BUFFERS | SSL_MODE_ENABLE_PARTIAL_WRITE | SSL_MODE_ACCEPT_MOVING_WRITE_BUFFER | SSL_OP_NO_COMPRESSION | SSL_OP_CIPHER_SERVER_PREFERENCE | SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION\n; set SSL_SESS_CACHE_OFF (if i use built-in openssl server cache, there is nothing big different)\n; SSL_CTX_set_session_id_context ...\n; SSL_CTX_set_verify(cx, SSL_VERIFY_NONE, NULL);\n; SSL_CTX_set_options(ctx, SSL_OP_SINGLE_DH_USE);\n; SSL_CTX_set_tmp_dh(ctx, ...\n; SSL_CTX_use_certificate_chain_file(...\n; SSL_CTX_use_PrivateKey_file(...\n; SSL_CTX_check_private_key(...\n; SSL_CTX_set_cipher_list(...\n; SSL_CTX_set_options(ctx, SSL_OP_SINGLE_ECDH_USE);\n; SSL_CTX_set_ecdh_auto(ctx, 1); (or set curve with \"prime256v1\")\n\"call\" bind(srvSock, ...\n\"call\" srvSock = listen(...\n\n\"call\" add_epoll(srvSock, ReadFlag\n\n###\n\n\"func\" Read_Handle(Sock // from my epoll( loops\n  if (Sock == srvSock)\n    \"call\" Accept_Handle(Sock\n  else\n    \"call\" Real_Read_Handle(Sock\n\"end func\"\n\n\"func\" Real_Read_Handle(Sock\n  if (!SSL_is_init_finished(ssl)) {\n    timeMs = CurTime()\n    \"call\" ret = SSL_accept(ssl);\n    timeTotalVariable += (CurTime() - timeMs)\n    \"call\" err = SSL_get_error(ssl, ret);\n    if (err == SSL_ERROR_WANT_READ) {\n      set_epoll(Sock, ReadFlag\n    return;\n    }\n    if (err == SSL_ERROR_WANT_WRITE) {\n      set_epoll(Sock, WriteFlag\n    return;\n    }\n    ...\n  }\n  \"call\" SSL_read(ssl, ...\n  ...\n\"end func\"\n\n\"func\" Accept_Handle(Sock\n  \"call\" newSock = accept(Sock, ...\n  \"call\" MyNonBlockingSocketSetFunction(Sock\n  \"call\" ssl = SSL_new(ctx\n  \"call\" SSL_set_fd(ssl, newSock);\n  \"call\" SSL_set_accept_state(ssl\n  \"call\" BIO_set_nbio(SSL_get_rbio(ssl), 0);\n  \"call\" BIO_set_nbio(SSL_get_wbio(ssl), 0);\n  \"call\" add_epoll(newSock, ReadFlag // handshake will do at main read function.\n\"end func\"\n</code></pre>\n\n<p>my codes are very huge (i am coding this server for a long time), so i gave pseudo codes.\nas i said, i tried a lot of things, but not succeed at all.</p>\n\n<p>there is a problem in strace (i think);</p>\n\n<pre><code>read(9898, \"\\26\\3\\3\\0F\", 5)             = 5\nread(9898, \"\\20\\0\\0BA\\4@/\\241|9\\325\\247\\351S\\265\\7&lt;\\204\\5\\260\\203H\\\\\\314\\212\\301\\324B\\f\\353+\"..., 70) = 70\nread(9898, \"\\24\\3\\3\\0\\1\", 5)            = 5\nread(9898, \"\\1\", 1)                     = 1\nread(9898, \"\\26\\3\\3\\0(\", 5)             = 5\nread(9898, \"&gt;\\205\\203\\0006\\354\\337\\264{\\214\\6\\0\\4\\343\\311Ai%\\30\\347\\20\\307\\300\\253+\\200}B\\\\\\326:\\211\"..., 40) = 40\nwrite(9898, \"\\26\\3\\3\\0\\312\\4\\0\\0\\306\\0\\0\\1,\\0\\300\\17\\225!A4\\310\\312(\\231.\\263\\23\\t\\265\\3}\\211\"..., 258) = 258\nread(9896, \"\\27\\3\\3\\1\\347\", 5)          = 5\nread(9896, \"t()R\\2\\347pvE\\341\\n\\272C\\231\\267\\352.\\21G\\212u\\203wO\\v\\16\\326\\4\\352\\205\\326\\340\"..., 487) = 487\nread(9895, \"\\26\\3\\3\\0F\", 5)             = 5\nread(9895, \"\\20\\0\\0BA\\4\\213\\335\\242OV\\2154\\371\\345\\2321\\257\\217\\377\\236\\\"xN\\206\\322\\205I{\\242\\307\\276\"..., 70) = 70\nread(9895, \"\\24\\3\\3\\0\\1\", 5)            = 5\nread(9895, \"\\1\", 1)                     = 1\nread(9895, \"\\26\\3\\3\\0(\", 5)             = 5\nread(9895, \"^\\341Ii\\273\\35\\nMe\\214\\303\\352aE\\236\\26q\\333\\274\\366\\375\\255@;\\275Ad\\204ko\\223\\377\"..., 40) = 40\nwrite(9895, \"\\26\\3\\3\\0\\312\\4\\0\\0\\306\\0\\0\\1,\\0\\300\\17\\225!A4\\310\\312(\\231.\\263\\23\\t\\265\\3}d\"..., 258) = 258\nread(9894, \"\\27\\3\\3\\1\\346\", 5)          = 5\nread(9894, \"\\n+e\\16\\\\\\330\\305\\322\\364\\367j\\356b\\336\\3T3\\va\\200\\324\\03107_\\320,\\22H\\33\\3\\350\"..., 486) = 486\nread(9892, \"\\26\\3\\3\\0F\", 5)             = 5\nread(9892, \"\\20\\0\\0BA\\4Q\\214t7$\\276$\\3744\\247\\364,\\320\\376\\225\\2623z\\204\\254U\\355\\17\\323\\214S\"..., 70) = 70\nread(9892, \"\\24\\3\\3\\0\\1\", 5)            = 5\nread(9892, \"\\1\", 1)                     = 1\nread(9892, \"\\26\\3\\3\\0(\", 5)             = 5\nread(9892, \"\\201\\214T8\\257nBM{\\210\\202V\\25\\340R\\315)\\320\\343'h\\341\\353\\351\\6f!$\\314\\230\\300\\221\"..., 40) = 40\nwrite(9892, \"\\26\\3\\3\\0\\312\\4\\0\\0\\306\\0\\0\\1,\\0\\300\\17\\225!A4\\310\\312(\\231.\\263\\23\\t\\265\\3}h\"..., 258) = 258\n</code></pre>\n\n<p>These are handshake read/write calls at SSL_accept of my server.</p>\n\n<p>but i tested nginx, openlitespeed, nodejs etc...\nThose servers' strace log like this;</p>\n\n<pre><code>read(8247, \"\\26\\3\\1\\1.\\1\\0\\1*\\3\\3T\\214\\201\\305\\2\\365\\260\\r\\210\\212\\232j\\1778\\315\\301\\312\\235\\354e\\4\"..., 1024) = 307\nwrite(8247, \"\\26\\3\\3\\0=\\2\\0\\0009\\3\\3\\16\\241r76\\203\\245e\\373\\10rF\\330l\\235-\\3\\2436Y\\326\"..., 1821) = 1821\nread(8178, \"\\26\\3\\1\\1.\\1\\0\\1*\\3\\3\\367._\\207\\353\\316\\262j\\277\\332\\352\\237\\363\\343\\30\\351\\370X\\210\\34x\"..., 1024) = 307\nwrite(8178, \"\\26\\3\\3\\0=\\2\\0\\0009\\3\\3\\347\\322\\200\\222\\206\\336y\\2\\243\\213&lt;\\235\\265\\230\\33\\315\\375\\306H5\\7\"..., 1821) = 1821\nread(8280, \"\\26\\3\\1\\1.\\1\\0\\1*\\3\\3\\35\\214\\374)Vg7\\225\\36\\340\\251*\\234j\\35&gt;O\\234\\3Dw\"..., 1024) = 307\nwrite(8280, \"\\26\\3\\3\\0=\\2\\0\\0009\\3\\3\\240q\\207T\\331\\262\\314\\261o\\3\\307L{U\\20c\\270\\232\\377(\\364\"..., 1821) = 1821\nread(8567, \"\\26\\3\\1\\1.\\1\\0\\1*\\3\\3\\255\\270\\3447\\362\\226\\17\\276x\\205\\305\\334C\\16$@Zd\\2\\353\\304\"..., 1024) = 307\nwrite(8567, \"\\26\\3\\3\\0=\\2\\0\\0009\\3\\3\\355\\314fko\\25C\\235\\260\\213\\273\\263o`\\2\\234:\\344\\27\\341]\"..., 1821) = 1821\n</code></pre>\n\n<p>for handshake, 8 partial read at my server ???</p>\n\n<p>why my SSL_accept function is slow?</p>\n\n<p>PS. : Sorry for my bad grammer.</p>\n\n<p>Edit; SSL settings parts (ssl settings parts are easy to reproduce, but socket multiplexing part is very difficult to reproduce)</p>\n\n<pre><code>SSL_CTX *ctx = NULL;\nvoid Init_SSL() {\n    OPENSSL_config(NULL);\n    SSL_library_init();\n    SSL_load_error_strings();\n    OpenSSL_add_all_algorithms();\n}\n\nvoid Init_Server() {\n    #if OPENSSL_VERSION_NUMBER &lt; 0x10100000L\n        ctx = SSL_CTX_new(SSLv23_method());\n    #else\n        ctx = SSL_CTX_new(TLS_method());\n    #endif\n    if (ctx == NULL) {\n        cout &lt;&lt; \"can not create ctx\" &lt;&lt; endl;\n    return;\n    }\n    SSL_CTX_set_options(ctx, SSL_OP_NO_SSLv2);\n    SSL_CTX_set_options(ctx, SSL_OP_NO_SSLv3);\n    SSL_CTX_set_mode(ctx, SSL_MODE_RELEASE_BUFFERS);\n    SSL_CTX_set_mode(ctx, SSL_MODE_ENABLE_PARTIAL_WRITE);\n    SSL_CTX_set_mode(ctx, SSL_MODE_ACCEPT_MOVING_WRITE_BUFFER);\n    SSL_CTX_set_options(ctx, SSL_OP_NO_COMPRESSION);\n    SSL_CTX_set_options(ctx, SSL_OP_CIPHER_SERVER_PREFERENCE);\n    #ifdef SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION\n    SSL_CTX_set_options(ctx, SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION);\n    #endif\n    SSL_CTX_set_session_cache_mode(ctx, SSL_SESS_CACHE_OFF);\n    const unsigned char *TmpStr = \"SslSrv\";\n    SSL_CTX_set_session_id_context(ctx, TmpStr, strlen(TmpStr));\n    SSL_CTX_set_verify(ctx, SSL_VERIFY_NONE, NULL);\n}\n\nbool LoadCert() {\n    DH *dh;\n    BIO *bio = BIO_new_file(\"server.dh\", \"r\");\n        if (bio == NULL) {\n            cout &lt;&lt; \"dh file error\" &lt;&lt; endl;\n        return false;\n        }\n        dh = PEM_read_bio_DHparams(bio, NULL, NULL, NULL);\n        BIO_free(bio);\n        if (dh == NULL) {\n            cout &lt;&lt; \"dh params error\" &lt;&lt; endl;\n        return false;\n        }\n        const int size = BN_num_bits(dh-&gt;p);\n        if (size &lt; 1024) {\n            cout &lt;&lt; \"dh bits size error\" &lt;&lt; endl;\n        return false;\n        }\n        SSL_CTX_set_options(ctx, SSL_OP_SINGLE_DH_USE);\n        int r = SSL_CTX_set_tmp_dh(ctx, dh);\n        if (!r) {\n            cout &lt;&lt; \"cannot set tmp dh\" &lt;&lt; endl;\n        return false;\n        }\n    }\n    if (SSL_CTX_use_certificate_chain_file(ctx, \"server.crt\") &lt;= 0) {\n        cout &lt;&lt; \"cannot load cert\" &lt;&lt; endl;\n    return false;\n    }\n    if (SSL_CTX_use_PrivateKey_file(ctx, \"server.key\", SSL_FILETYPE_PEM) &lt;= 0) {\n        cout &lt;&lt; \"cannot load priv key file\" &lt;&lt; endl;\n    return false;\n    }\n    if (!SSL_CTX_check_private_key(ctx)) {\n        cout &lt;&lt; \"priv key file is wrong\" &lt;&lt; endl;\n    return false;\n    }\n    // this list from nodejs (default list)\n    if (SSL_CTX_set_cipher_list(ctx, \"ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA\") == 0) {\n        cout &lt;&lt; \"cannot set cipher list\" &lt;&lt; endl;\n    return false;\n    }\n    SSL_CTX_set_options(ctx, SSL_OP_SINGLE_ECDH_USE);\n    #if SSL_CTRL_SET_ECDH_AUTO\n    SSL_CTX_set_ecdh_auto(ctx, 1);\n    #endif\nreturn true;\n}\n</code></pre>\n\n<p>is there any missing or invalid things in this settings?\nThanks.</p>\n"}, {"tags": ["c++", "stm32", "keil", "stm32f4"], "comments": [{"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521662596, "post_id": 49415486, "comment_id": 85832834, "body": "May the <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> be with you."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1521662601, "post_id": 49415486, "comment_id": 85832837, "body": "Step through the crt where it calls teh static constructors?"}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1521707296, "post_id": 49415486, "comment_id": 85848383, "body": "In what way does it &#39;block&#39;? Do you end up in a fault handler?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6773564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d555193b5f4045890f40e4d1e11e7a60?s=128&d=identicon&r=PG&f=1", "display_name": "alireza", "link": "https://stackoverflow.com/users/6773564/alireza"}, "is_accepted": false, "score": -1, "last_activity_date": 1521664459, "creation_date": 1521664459, "answer_id": 49416015, "question_id": 49415486, "link": "https://stackoverflow.com/questions/49415486/stm32-keil-cpp-code-blocks-before-entering-the-main/49416015#49416015", "title": "stm32 keil cpp code blocks before entering the main", "body": "<p>i also found some pages on the net which they are related to my problem but i still couldn't solve it \n<a href=\"http://www.keil.com/support/docs/3614.htm\" rel=\"nofollow noreferrer\">http://www.keil.com/support/docs/3614.htm</a></p>\n\n<p><a href=\"http://www.keil.com/forum/17845/bkpt-0xab-problem-without-swi/\" rel=\"nofollow noreferrer\">http://www.keil.com/forum/17845/bkpt-0xab-problem-without-swi/</a></p>\n\n<p>i think my problem is related to the Semihosting but i can't understand it :(</p>\n"}], "owner": {"reputation": 1, "user_id": 6773564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d555193b5f4045890f40e4d1e11e7a60?s=128&d=identicon&r=PG&f=1", "display_name": "alireza", "link": "https://stackoverflow.com/users/6773564/alireza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1521664459, "creation_date": 1521662250, "question_id": 49415486, "link": "https://stackoverflow.com/questions/49415486/stm32-keil-cpp-code-blocks-before-entering-the-main", "title": "stm32 keil cpp code blocks before entering the main", "body": "<p>i used to write my programs with c in keil for stm32f407 and every thing works fine.\nnow i want to migrate to c++ . \ni just changed .c suffix sources to .cpp and also add some extern \"c\" and my system worked fine.\nbut when i want to work with classes like vector or string my system blocks before entering the main.</p>\n\n<p>i include vector and string classes and  declare variable like  : string str; and system works fine</p>\n\n<p>but when i give value to it like str=\"dd\"; in any line of my application , it compiles and download successfully to the device but at run time system blocks before entering the main; </p>\n\n<p>I expected at least it proceed to the corresponding line (str=\"dd\";) and then blocks but it blocks before entering the main.</p>\n\n<p>i also configured heap and stack to 0x4000 bytes </p>\n\n<p>do you have any idea about is the problem?</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1521662289, "post_id": 49415452, "comment_id": 85832662, "body": "Why does C store <code>unique_ptr&lt;B&gt;</code> instead of <code>B</code>?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1521662355, "post_id": 49415452, "comment_id": 85832699, "body": "Factory classes/functions should usually return <code>std::unique_prt</code>s. If that&#39;s all the caller needs it&#39;s perfect. If the caller needs shared ownership they can just store the return value in a <code>std::shared_ptr</code> and get just that."}, {"owner": {"reputation": 1785, "user_id": 1932934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73ceb0d823c0168b55045d7ffaaf2364?s=128&d=identicon&r=PG", "display_name": "Taztingo", "link": "https://stackoverflow.com/users/1932934/taztingo"}, "edited": false, "score": 0, "creation_date": 1521662432, "post_id": 49415452, "comment_id": 85832743, "body": "@NeilButterworth The example was geared towards smart pointers instead of public/private inheritance. You do make a good point so I&#39;ll update it for clarification."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1521662492, "post_id": 49415452, "comment_id": 85832775, "body": "See Herb Sutter&#39;s talk <a href=\"https://www.youtube.com/watch?v=JfmTagWcqoE\" rel=\"nofollow noreferrer\"><i>Leak-Freedom in C++... By Default</i></a>"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1521662573, "post_id": 49415452, "comment_id": 85832817, "body": "Use <code>std::unique_ptr</code> when you own something; raw pointer to observe something and <code>std::shared_ptr</code> when you need to re-design."}, {"owner": {"reputation": 1785, "user_id": 1932934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73ceb0d823c0168b55045d7ffaaf2364?s=128&d=identicon&r=PG", "display_name": "Taztingo", "link": "https://stackoverflow.com/users/1932934/taztingo"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1521662790, "post_id": 49415452, "comment_id": 85832944, "body": "@RichardCritten If I&#39;m just observing wouldn&#39;t it be better to use a reference?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 3, "creation_date": 1521662858, "post_id": 49415452, "comment_id": 85832980, "body": "@Taztingo Depends on the circumstance. If you are storing something in an object, I would usually recommend pointers rather than references, as references can&#39;t be rebound, so you can&#39;t copy the object if you used them."}, {"owner": {"reputation": 1785, "user_id": 1932934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73ceb0d823c0168b55045d7ffaaf2364?s=128&d=identicon&r=PG", "display_name": "Taztingo", "link": "https://stackoverflow.com/users/1932934/taztingo"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1521662969, "post_id": 49415452, "comment_id": 85833051, "body": "Okay cool these answers help a lot. Damn you guys are good! @Justin I&#39;ll take a look at the video you posted, thanks."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1521662979, "post_id": 49415452, "comment_id": 85833059, "body": "@Taztingo question was about pointers - references are also useful."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521663474, "post_id": 49415452, "comment_id": 85833320, "body": "Unrelated: <code>std::queue</code> should be pretty safe, but before building much infrastructure around pointers to library container contents, make sure you&#39;re familiar with the <a href=\"https://stackoverflow.com/questions/6438086/iterator-invalidation-rules\">Iterator Invalidation Rules</a>."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1521663854, "post_id": 49415452, "comment_id": 85833522, "body": "It still isn&#39;t clear why you need any kind of pointer to <code>B</code> at all."}, {"owner": {"reputation": 1785, "user_id": 1932934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73ceb0d823c0168b55045d7ffaaf2364?s=128&d=identicon&r=PG", "display_name": "Taztingo", "link": "https://stackoverflow.com/users/1932934/taztingo"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1521685090, "post_id": 49415452, "comment_id": 85840399, "body": "@juanchopanza The pointers to B are there because C owns B, and are manually added to it&#39;s list. It was added to replicate the scenario I was facing, without having all my code. The question was more directed at the pointers for A. You did help me fix up some minor points that may have caused confusion, thanks for asking about it."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521685842, "post_id": 49415452, "comment_id": 85840595, "body": "@user4581301: Even if <code>queue</code> moves its elements (which it might, given a non-default backing container), that wouldn\u2019t invalidate pointers to the objects <i>pointed to</i> by those elements."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521695178, "post_id": 49415452, "comment_id": 85842833, "body": "Yeah. Not sure what I was worried about."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1521698424, "post_id": 49415452, "comment_id": 85843999, "body": "@Taztingo That is no reason to have pointers of any type. Some crucial information is missing. Or you don&#39;t need pointers to B."}], "answers": [{"comments": [{"owner": {"reputation": 1785, "user_id": 1932934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73ceb0d823c0168b55045d7ffaaf2364?s=128&d=identicon&r=PG", "display_name": "Taztingo", "link": "https://stackoverflow.com/users/1932934/taztingo"}, "edited": false, "score": 0, "creation_date": 1521685957, "post_id": 49418595, "comment_id": 85840625, "body": "Do you mean shorter than or equal to the lifetime, then use unique? My lifetime happens to be equal."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 1785, "user_id": 1932934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73ceb0d823c0168b55045d7ffaaf2364?s=128&d=identicon&r=PG", "display_name": "Taztingo", "link": "https://stackoverflow.com/users/1932934/taztingo"}, "edited": false, "score": 0, "creation_date": 1521687516, "post_id": 49418595, "comment_id": 85841018, "body": "@Taztingo: It\u2019s rare to have two objects be destroyed <i>simultaneously</i>: the only case that comes to mind is destroying an array of a type with no destructor.  But if that can somehow happen, than equal would suffice."}, {"owner": {"reputation": 1785, "user_id": 1932934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73ceb0d823c0168b55045d7ffaaf2364?s=128&d=identicon&r=PG", "display_name": "Taztingo", "link": "https://stackoverflow.com/users/1932934/taztingo"}, "edited": false, "score": 0, "creation_date": 1521687741, "post_id": 49418595, "comment_id": 85841072, "body": "I guess in my case I have A, B, C all being generated at once, and A happens to be passed in. Once A is destroyed the others are no longer used."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 1785, "user_id": 1932934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73ceb0d823c0168b55045d7ffaaf2364?s=128&d=identicon&r=PG", "display_name": "Taztingo", "link": "https://stackoverflow.com/users/1932934/taztingo"}, "edited": false, "score": 0, "creation_date": 1521689742, "post_id": 49418595, "comment_id": 85841494, "body": "@Taztingo: It is of course sufficient that <code>B::a</code> (for any object of type <code>B</code>) not be accessed (even to, say, compare it to <code>nullptr</code>!) after the referent has been destroyed.  I wrote &quot;shorter lifetime&quot; as a design guideline for safety: if you have destroyed the <code>B</code>, you can&#39;t possibly access its pointer too late."}], "tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": true, "score": 2, "last_activity_date": 1521677992, "creation_date": 1521677992, "answer_id": 49418595, "question_id": 49415452, "link": "https://stackoverflow.com/questions/49415452/which-smart-pointer-type/49418595#49418595", "title": "Which smart pointer type?", "body": "<p>Leaving aside why <code>C</code> owns its <code>B</code> objects via a pointer, the question is not whether <code>A</code> is used via some base class.  Indeed, a <code>shared_ptr&lt;Base&gt;</code> can be used to own an object of a derived class even if <code>Base</code> has a non-virtual destructor!</p>\n\n<p>The real question is whether the <em>lifetime</em> of the <code>B</code> objects owned by a <code>C</code> (which is probably the same as the lifetime of the <code>C</code>) is (known to be) shorter than that of the <code>A</code> objects to which they refer.  If it is, you can stick to <code>unique_ptr&lt;A&gt;</code> for <em>owning</em> the <code>A</code>s and <code>A*</code> (or <code>IInterface*</code>) for <em>using</em> them.  If not, you should consider using <code>shared_ptr</code> for both, although you should <em>also</em> consider other possibilities like destroying individual <code>B</code> objects sooner or transferring the ownership of the <code>A</code> to a place where it can outlive the observing references to it.</p>\n"}], "owner": {"reputation": 1785, "user_id": 1932934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73ceb0d823c0168b55045d7ffaaf2364?s=128&d=identicon&r=PG", "display_name": "Taztingo", "link": "https://stackoverflow.com/users/1932934/taztingo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "closed_date": 1521700812, "accepted_answer_id": 49418595, "answer_count": 1, "score": 4, "last_activity_date": 1521684956, "creation_date": 1521662129, "last_edit_date": 1521684956, "question_id": 49415452, "link": "https://stackoverflow.com/questions/49415452/which-smart-pointer-type", "closed_reason": "Duplicate", "title": "Which smart pointer type?", "body": "<p>I'm fairly new to smart pointer usage, and want to make sure I'm not introducing bad habits. I have an object A that is being created from a factory, and added to a queue. This queue is then read from another thread, and at this point I think it's perfectly valid to use a unique_ptr. </p>\n\n<pre><code>struct IInterface\n{\n\n}\n\nclass A : public IInterface\n{\n\n}\n\nstd::queue&lt;std::unique_ptr&lt;A&gt;&gt; queue;\n</code></pre>\n\n<p>However, while constructing A I realize I need a Class C. C takes a List of B's that it owns.</p>\n\n<pre><code>class A : public IInterface\n{\n    C c;\n}\n\nclass B\n{\n}\n\nclass C\n{\n    List&lt;unqiue_ptr&lt;B&gt;&gt; b;\n}\n</code></pre>\n\n<p>To me this still looks okay because we have ownership defined. However, I'm unsure of what pointer needs to be used when Class B now needs a pointer to IInterface, which A happens to implement. Do I make it a shared_ptr?</p>\n\n<pre><code>struct IInterface\n{\n\n}\n\nclass A : public IInterface\n{\n    C c;\n}\n\nstd::queue&lt;std::shared_ptr&lt;A&gt;&gt; queue;\n\n\n\nclass B\n{\n    shared_ptr&lt;IInterface&gt; a;\n}\n\nclass C\n{\n    List&lt;unique_ptr&lt;B&gt;&gt; b;\n}\n</code></pre>\n\n<p>Did I choose the correct smart pointer, and did I analyze this correctly? I know this is super simple for you guys, but figured I would ask before I start doing things incorrectly.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1521661960, "post_id": 49415400, "comment_id": 85832480, "body": "Please <b><a href=\"https://stackoverflow.com/posts/49415400/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 2, "creation_date": 1521662040, "post_id": 49415400, "comment_id": 85832529, "body": "Please read up about encapsulation"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7583245"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1521662114, "post_id": 49415400, "comment_id": 85832566, "body": "@NathanOliver This is that example and this is not my code jsut an example i quickly wrote for this question"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1521662204, "post_id": 49415400, "comment_id": 85832612, "body": "Perhaps spend a little more time formulating the question"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1521662220, "post_id": 49415400, "comment_id": 85832627, "body": "How can we tell you what is wrong with your code if we don&#39;t see the code that is actually causing the problem?  We could guess and tell you to check this and that but that is not how Stack Overflow works.  You ask a concrete question and you (hopefully) get concrete answer(s)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7583245"}, "edited": false, "score": 0, "creation_date": 1521662221, "post_id": 49415400, "comment_id": 85832629, "body": "Is anything unclear?"}, {"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521662234, "post_id": 49415400, "comment_id": 85832632, "body": "@Spartan5434, and not even I wrote this post myself..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7583245"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1521662298, "post_id": 49415400, "comment_id": 85832667, "body": "@NathanOliver This is the code that is causing me issues though since the value in the class is still not displaying correctly"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7583245"}, "reply_to_user": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521662328, "post_id": 49415400, "comment_id": 85832684, "body": "@SmitYcyken What?"}, {"owner": {"reputation": 26054, "user_id": 23896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d4dc630c582673cfd21f7c80c79ff7f?s=128&d=identicon&r=PG", "display_name": "matli", "link": "https://stackoverflow.com/users/23896/matli"}, "edited": false, "score": 0, "creation_date": 1521676397, "post_id": 49415400, "comment_id": 85838449, "body": "@Spartan5434 No, it is not a complete example. Write a small example that we can compile ourselves."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7583245"}, "reply_to_user": {"reputation": 26054, "user_id": 23896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d4dc630c582673cfd21f7c80c79ff7f?s=128&d=identicon&r=PG", "display_name": "matli", "link": "https://stackoverflow.com/users/23896/matli"}, "edited": false, "score": 0, "creation_date": 1521677543, "post_id": 49415400, "comment_id": 85838736, "body": "@matli Just updated"}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "edited": false, "score": 0, "creation_date": 1521703802, "post_id": 49415400, "comment_id": 85846369, "body": "@Spartan5434: The code clearly shows what is the problem. Unfortunately someone powerful enough here on SO likes to be annoying for no evident (for me) reason. As the community grows is unavoidable that someone will misuse power that in a perfect world s/he shouldn&#39;t have... do not assume that because someone has an high-enough rep then for sure is smart or well behaving. It would be the same mistake as assuming that because someone is wearing a uniform then it will always be good and do well. Real world doesn&#39;t work this way."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7583245"}, "reply_to_user": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "edited": false, "score": 0, "creation_date": 1521747155, "post_id": 49415400, "comment_id": 85875860, "body": "@6502 Yeah this website just likes to flip-flop all the time. I post too much code ppl get pissed. I post a small example like they told me then they want more. Honestly, I&#39;m done, people here think they are geniuses and critique every little thing u do in a post."}], "answers": [{"comments": [{"owner": {"reputation": 26054, "user_id": 23896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d4dc630c582673cfd21f7c80c79ff7f?s=128&d=identicon&r=PG", "display_name": "matli", "link": "https://stackoverflow.com/users/23896/matli"}, "edited": false, "score": 0, "creation_date": 1521677904, "post_id": 49415481, "comment_id": 85838819, "body": "And to be clear, that&#39;s the <code>player playerobj</code>in the setWeapon method that should be removed. Otherwise you create a temporary player object which just exists within that method."}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 26054, "user_id": 23896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d4dc630c582673cfd21f7c80c79ff7f?s=128&d=identicon&r=PG", "display_name": "matli", "link": "https://stackoverflow.com/users/23896/matli"}, "edited": false, "score": 0, "creation_date": 1521702332, "post_id": 49415481, "comment_id": 85845683, "body": "@matli: indeed, after rewording is more clear"}], "tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 4, "last_activity_date": 1521702295, "last_edit_date": 1521702295, "creation_date": 1521662230, "answer_id": 49415481, "question_id": 49415400, "link": "https://stackoverflow.com/questions/49415400/assigning-value-to-variables-in-class-from-outside-of-class/49415481#49415481", "title": "Assigning value to variables in class from outside of class", "body": "<p>The problem is the first code line inside <code>setWeapon</code>:</p>\n\n<pre><code>player playerobj;\n</code></pre>\n\n<p>that will create <strong>another player object</strong>. Apparently instead you want to set the current weapon of the current player, the code should be:</p>\n\n<pre><code>void player::setWeapon(){\n    cout &lt;&lt; \"choose Number\" &lt;&lt; endl\n         &lt;&lt; \"'1' for gun\" &lt;&lt; endl\n         &lt;&lt; \"'2' for axe\" &lt;&lt; endl;\n    cin &gt;&gt; playerWeaponInt;\n    if(playerWeaponInt == 1){\n        playerWeapon = \"gun\"; // NOTE: no \"playerobj.\"\n    } else if (playerWeaponInt == 2){\n        playerWeapon = \"axe\";\n    }\n}\n</code></pre>\n\n<p>when a method is executed there is an implicit object pointed by <code>this</code>.\nWhen you say <code>playerWeapon</code> in a method it's intended that you mean\n<code>this-&gt;playerWeapon</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7583245"}, "edited": false, "score": 0, "creation_date": 1521675575, "post_id": 49415619, "comment_id": 85838197, "body": "Hi, I wanted to print it in another class method outside of the class"}, {"owner": {"reputation": 1273, "user_id": 8285732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc625d1ed5c36dfef98d17dfeac7fe7?s=128&d=identicon&r=PG&f=1", "display_name": "milbrandt", "link": "https://stackoverflow.com/users/8285732/milbrandt"}, "edited": false, "score": 0, "creation_date": 1521703110, "post_id": 49415619, "comment_id": 85846025, "body": "@Spartan5434 So please remove the local <code>playerobj</code> from <code>setWeapon</code>. Add an accessor method <code>string getPlayerWeapon() const { return playerWeapon; }</code> to your class to get access outside of the <code>player</code> class.."}], "tags": [], "owner": {"reputation": 1273, "user_id": 8285732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc625d1ed5c36dfef98d17dfeac7fe7?s=128&d=identicon&r=PG&f=1", "display_name": "milbrandt", "link": "https://stackoverflow.com/users/8285732/milbrandt"}, "is_accepted": false, "score": 0, "last_activity_date": 1521662761, "creation_date": 1521662761, "answer_id": 49415619, "question_id": 49415400, "link": "https://stackoverflow.com/questions/49415400/assigning-value-to-variables-in-class-from-outside-of-class/49415619#49415619", "title": "Assigning value to variables in class from outside of class", "body": "<p>First, you shouldn't expose the internal represenatation of your <code>class player</code> by making it's internal data <code>playerWeapon</code>. Better make a method to set and make the data private. Proposal:</p>\n\n<pre><code>class player {\npublic:\n    void setPlayerWeapon(const string &amp;playerWeapon);\n    void setWeapon();\nprivate:\n    string playerWeapon;\n}\n</code></pre>\n\n<p>Next, where do you want to display the content of playerobj.playerWeapon? As <code>player::setWeapon</code> has ist own object <code>playerobj</code> which will be destructed when leaving the method you can only display it inside the current method call. Probably this is not what you wanted to do. I assume you wanted to set <code>playerWeapon</code> of your current object. If so, just remove the auxillary object \n<code>player playerobj</code>from the method and assign the weapon string directly to the objects member variable.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7583245"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1521677713, "answer_count": 2, "score": 0, "last_activity_date": 1521702295, "creation_date": 1521661939, "last_edit_date": 1521677525, "question_id": 49415400, "link": "https://stackoverflow.com/questions/49415400/assigning-value-to-variables-in-class-from-outside-of-class", "closed_reason": "Not suitable for this site", "title": "Assigning value to variables in class from outside of class", "body": "<p>I was having trouble trying assign variables declared in a class value outside of the class in functions. Example below:</p>\n\n<pre><code>class player {\npublic:\nstring playerWeapon;\nvoid setWeapon();\n}\n</code></pre>\n\n<p>Then maybe outside the header file where this is declared in the cpp file:</p>\n\n<pre><code>void player::setWeapon(){\nplayer playerobj;\nint playerWeaponInt;\ncout &lt;&lt; \"choose Number\" &lt;&lt; endl\n     &lt;&lt; \"'1' for gun\" &lt;&lt; endl\n     &lt;&lt; \"'2' for axe\" &lt;&lt; endl;\n     cin &gt;&gt; playerWeaponInt;\n</code></pre>\n\n<p>Then I tried an if statement to assign the  number to a string that can be put into the variable:</p>\n\n<pre><code>if(playerWeaponInt == 1){\n\nplayerobj.playerWeapon = \"gun\";\n\nelse if (playerWeaponInt == 2){\n\nplayerobj.playerWeapon = \"axe\"\n}\n</code></pre>\n\n<p>But hwenever i try to display it later in the program the variable is empty and nothing is display. Can anyone help me out </p>\n\n<p>EDIT: Here is an extra piece of code so it will compile</p>\n\n<pre><code>player playerObj;\nmain(){\nplayerObj.setWeapon; \n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "appimage"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1521662747, "post_id": 49415322, "comment_id": 85832914, "body": "Have you compiled Qt in a static way?"}, {"owner": {"reputation": 63, "user_id": 9403787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80dfed72fe8666126fe193ac6287c17e?s=128&d=identicon&r=PG&f=1", "display_name": "HERT", "link": "https://stackoverflow.com/users/9403787/hert"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1521663573, "post_id": 49415322, "comment_id": 85833378, "body": "No, i can&#39;t compile."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1521663687, "post_id": 49415322, "comment_id": 85833442, "body": "if you want to statically link the Qt library, it must be compiled in a static way, many OS do not do it, and only compile it dynamically, so in your case you can not do it, you must download the Qt source code and compile it in a static way, and you can just do it."}, {"owner": {"reputation": 63, "user_id": 9403787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80dfed72fe8666126fe193ac6287c17e?s=128&d=identicon&r=PG&f=1", "display_name": "HERT", "link": "https://stackoverflow.com/users/9403787/hert"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1521663853, "post_id": 49415322, "comment_id": 85833521, "body": "I was thinking you talk about static link, I can run my program in QT creator and program work perfect."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1521664021, "post_id": 49415322, "comment_id": 85833596, "body": "Obviously it works correctly since that executable is linking the libraries in a dynamin form, since it will be found in <code>&#47;usr&#47;lib</code>, for example, execute <code>ldd your_executable</code> and observe the dependencies."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2075043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dff31da432158f2fb73973abca7824d?s=128&d=identicon&r=PG", "display_name": "Prashant Moglaikar", "link": "https://stackoverflow.com/users/2075043/prashant-moglaikar"}, "is_accepted": false, "score": 0, "last_activity_date": 1521809797, "creation_date": 1521809797, "answer_id": 49450195, "question_id": 49415322, "link": "https://stackoverflow.com/questions/49415322/qt-static-linking-or-appimage/49450195#49450195", "title": "Qt Static Linking or AppImage", "body": "<p>Welcome to Qt world !</p>\n\n<p>You have to understand the Qt installation in two ways.</p>\n\n<p>1) Dynamic library ( Shared lib in linux ) using Qt online/offline installer or some lib are already there in most of Linux OS.</p>\n\n<p>2) Static library ( Static lib in linux ) using Qt source code and then do the manual configuration using ./configure with multiple options.</p>\n\n<p>Your problem is pretty straight forward to solve if you understood it correctly how to install Qt with static linking in your Linux OS.</p>\n\n<p>Now check this link \n<a href=\"http://www.linuxfromscratch.org/blfs/view/svn/x/qt5.html\" rel=\"nofollow noreferrer\">http://www.linuxfromscratch.org/blfs/view/svn/x/qt5.html</a></p>\n\n<p>here they have provided step by step instruction to download Qt source and configure options.</p>\n\n<p>Now for you important parameter is -- <strong>\"static\"</strong></p>\n\n<p>./configure -prefix $QT5PREFIX                          \\\n            -sysconfdir /etc/xdg                        \\\n            -confirm-license                            \\\n            -opensource                                 \\\n            -<strong>static</strong>                                     \\\n            -dbus-linked                                \\\n            -openssl-linked                             \\\n            -system-harfbuzz                            \\\n            -system-sqlite                              \\\n            -nomake examples                            \\\n            -no-rpath                                   \\\n            -skip qtwebengine                           &amp;&amp;</p>\n\n<p>which I have added for you and highlighted.</p>\n\n<p>Kindly share what you want to achieve exactly with this cause static compilation is only beneficial in case you commercial license of Qt other wise if you want to go for open source version then you must to choose dynamic library deployment ... check licensing part ...</p>\n\n<p>if you need in dynamic deployment let's reframe your question with exact requirement.</p>\n"}], "owner": {"reputation": 63, "user_id": 9403787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80dfed72fe8666126fe193ac6287c17e?s=128&d=identicon&r=PG&f=1", "display_name": "HERT", "link": "https://stackoverflow.com/users/9403787/hert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521809797, "creation_date": 1521661641, "last_edit_date": 1521662027, "question_id": 49415322, "link": "https://stackoverflow.com/questions/49415322/qt-static-linking-or-appimage", "title": "Qt Static Linking or AppImage", "body": "<p>Hello I trying to do static linking in QT in Linux OpenSUSE 42.3 but I get some problems <a href=\"https://doc.qt.io/qt-5.6/linux-deployment.html\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5.6/linux-deployment.html</a> I use this instruction and searching qt in pc(I installed qt creator,qt5 des.,qt5 ass.,qt5 D-Bus viewer), and i get  many variants(4xQT,QT5,QT5CORE and etc), i try to find somewhere configure file ( which run in instruction ./configure -static -prefix /path/to/Qt  , but i get nothing) , also i find linuxdeployqt\nwhich can create executable file(AppImage), so what to use linuxdeployqt (AppImage) or QT static linking still worth wasting my time?What the difference?</p>\n"}, {"tags": ["c++", "lua", "luabridge"], "comments": [{"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1521664617, "post_id": 49415317, "comment_id": 85833925, "body": "You need an isntance. Have you tried <code>local p = proxy()</code> and <code>p:doSomething(&quot;calling a function!&quot;)</code>?"}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1521665347, "post_id": 49415317, "comment_id": 85834294, "body": "And change <code>void doSomething(char* str)</code> to get <code>const char*</code> or <code>std::string</code>(<a href=\"http://vinniefalco.github.io/LuaBridge/Manual.html\" rel=\"nofollow noreferrer\">vinniefalco.github.io/LuaBridge/Manual.html</a>)"}, {"owner": {"reputation": 1454, "user_id": 1683902, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2d00f9a657d663d31fde89af0b2e6851?s=128&d=identicon&r=PG", "display_name": "Ian Young", "link": "https://stackoverflow.com/users/1683902/ian-young"}, "reply_to_user": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1521665752, "post_id": 49415317, "comment_id": 85834476, "body": "Neither worked. I did make a little progress, though, I&#39;ll update the question."}], "answers": [{"tags": [], "owner": {"reputation": 1454, "user_id": 1683902, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2d00f9a657d663d31fde89af0b2e6851?s=128&d=identicon&r=PG", "display_name": "Ian Young", "link": "https://stackoverflow.com/users/1683902/ian-young"}, "is_accepted": true, "score": 0, "last_activity_date": 1521666123, "creation_date": 1521666123, "answer_id": 49416437, "question_id": 49415317, "link": "https://stackoverflow.com/questions/49415317/calling-c-class-function-from-lua-script/49416437#49416437", "title": "Calling C++ class function from LUA script", "body": "<p>As it turned out, I had to change the code to:</p>\n\n<pre><code>int main()\n{\n    lua_State* L = luaL_newstate();\n    luaL_openlibs(L);\n    proxy p;\n    luabridge::getGlobalNamespace(L)\n        .beginClass&lt;proxy&gt;(\"proxy\")\n        .addFunction(\"doSomething\", &amp;proxy::doSomething)\n        .endClass();\n\n    std::string filename(\"test.lua\");\n    if (luaL_dofile(L, filename.c_str())) {\n        std::cout &lt;&lt; \"Error: script not loaded (\" &lt;&lt; filename &lt;&lt; \")\" &lt;&lt; std::endl;\n        L = 0;\n        return -1;\n    }\n    // new code\n    auto doSomething = luabridge::getGlobal(L, \"something\");\n    doSomething(p);\n    return 0;\n}\n</code></pre>\n\n<p>And change the script:</p>\n\n<pre><code>function something(e)\n    e:doSomething(\"something\")\nend\n</code></pre>\n\n<p>This actually works better for me. The script wouldn't work because the lua stack didn't know anything about the proxy instance, and I had to call a lua function directly, which, in turn, called the class member function.</p>\n\n<p>I don't know if there is an easier way to do it, but this is good enough for me.</p>\n"}], "owner": {"reputation": 1454, "user_id": 1683902, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2d00f9a657d663d31fde89af0b2e6851?s=128&d=identicon&r=PG", "display_name": "Ian Young", "link": "https://stackoverflow.com/users/1683902/ian-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 49416437, "answer_count": 1, "score": 1, "last_activity_date": 1521666123, "creation_date": 1521661619, "question_id": 49415317, "link": "https://stackoverflow.com/questions/49415317/calling-c-class-function-from-lua-script", "title": "Calling C++ class function from LUA script", "body": "<p>I'm attempting to learn how to use lua/luabridge to call member function of a class, but I'm having some trouble:</p>\n\n<p>Here is the simple test class:</p>\n\n<pre><code>class proxy\n{\npublic:\n    void doSomething(char* str)\n    {\n        std::cout &lt;&lt; \"doDomething called!: \" &lt;&lt; str &lt;&lt; std::endl;\n    }\n};\n</code></pre>\n\n<p>And the code that uses it:</p>\n\n<pre><code>int main()\n{\n    lua_State* L = luaL_newstate();\n    luaL_openlibs(L);\n    proxy p;\n    luabridge::getGlobalNamespace(L)\n        .beginClass&lt;proxy&gt;(\"proxy\")\n        .addFunction(\"doSomething\", &amp;proxy::doSomething)\n        .endClass();\n\n    std::string filename(\"test.lua\");\n    if (luaL_dofile(L, filename.c_str()) || lua_pcall(L, 0, 0, 0)) {\n        std::cout &lt;&lt; \"Error: script not loaded (\" &lt;&lt; filename &lt;&lt; \")\" &lt;&lt; std::endl;\n        L = 0;\n        return -1;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>And finally, the lua script:</p>\n\n<pre><code>proxy:doSomething(\"calling a function!\")\n</code></pre>\n\n<p>There is probably several errors here, but specifically what I want to do, is call the the member function for the <code>proxy</code> instance, from the lua script, as if I was calling:</p>\n\n<pre><code>p.doSomething(\"calling a function!\");\n</code></pre>\n\n<p>I'm aware that there are a lot of similar questions, but none I have found so far directly answers my question.</p>\n\n<p>Currently the script does not even load/execute so I'm a bit puzzled.</p>\n"}, {"tags": ["c++", "templates", "tuples"], "answers": [{"comments": [{"owner": {"reputation": 921, "user_id": 2043980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17e881e92b245bcb71fe579f34acb1b0?s=128&d=identicon&r=PG", "display_name": "Demaunt", "link": "https://stackoverflow.com/users/2043980/demaunt"}, "edited": false, "score": 0, "creation_date": 1521692708, "post_id": 49415305, "comment_id": 85842157, "body": "but why the second case is known at run-time? I mean to_pair is going to be compiled with i,j variables, so their types are known?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 921, "user_id": 2043980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17e881e92b245bcb71fe579f34acb1b0?s=128&d=identicon&r=PG", "display_name": "Demaunt", "link": "https://stackoverflow.com/users/2043980/demaunt"}, "edited": false, "score": 0, "creation_date": 1521695866, "post_id": 49415305, "comment_id": 85843071, "body": "The types are known but not their values. When you use <code>std::get&lt;i&gt;(tuple)</code>, the value of <code>i</code> must be known at compile time."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1521661569, "creation_date": 1521661569, "answer_id": 49415305, "question_id": 49415272, "link": "https://stackoverflow.com/questions/49415272/stdget-from-teplate-argument/49415305#49415305", "title": "std::get from teplate argument", "body": "<blockquote>\n  <p>I mean what is the difference between int type being template argument specialization and int argument as a common argument?</p>\n</blockquote>\n\n<p>One is defined at compile time while the other is defined at run time.</p>\n\n<p>A run time value cannot be used as a template parameter. Hence, the second case does not work.</p>\n"}], "owner": {"reputation": 921, "user_id": 2043980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17e881e92b245bcb71fe579f34acb1b0?s=128&d=identicon&r=PG", "display_name": "Demaunt", "link": "https://stackoverflow.com/users/2043980/demaunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 49415305, "answer_count": 1, "score": 0, "last_activity_date": 1521661569, "creation_date": 1521661431, "question_id": 49415272, "link": "https://stackoverflow.com/questions/49415272/stdget-from-teplate-argument", "title": "std::get from teplate argument", "body": "<p>Could you please explane or maybe give a link that explains:\nwhy this works:</p>\n\n<pre><code>template &lt;int i, int j, class T&gt;\nauto to_pair(T tuple) -&gt; decltype(std::make_pair(std::get&lt;i&gt;(tuple), std::get&lt;j&gt;(tuple)))\n{\n    return std::make_pair(std::get&lt;i&gt;(tuple), std::get&lt;j&gt;(tuple));\n}\n</code></pre>\n\n<p>and this does not?</p>\n\n<pre><code>template &lt;class T&gt;\nauto to_pair(int i, int j, T tuple) -&gt; decltype(std::make_pair(std::get&lt;i&gt;(tuple), std::get&lt;j&gt;(tuple)))\n{\n    return std::make_pair(std::get&lt;i&gt;(tuple), std::get&lt;j&gt;(tuple));\n}\n</code></pre>\n\n<p>I mean what is the difference between int type being template argument specialization and int argument as a common argument?</p>\n"}, {"tags": ["c++", "memory-leaks", "polymorphism", "valgrind"], "comments": [{"owner": {"reputation": 551, "user_id": 4571206, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yJHES.jpg?s=128&g=1", "display_name": "Abr001am", "link": "https://stackoverflow.com/users/4571206/abr001am"}, "edited": false, "score": 0, "creation_date": 1521660894, "post_id": 49415102, "comment_id": 85831936, "body": "This is important issue, because a lot of C programs I designed don&#39;t declare a memory issue in debugger but valgrind report them."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5753941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7aeb4a3e3d76e8b41617fac2a90417?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse McDonald", "link": "https://stackoverflow.com/users/5753941/jesse-mcdonald"}, "edited": false, "score": 0, "creation_date": 1521664727, "post_id": 49415151, "comment_id": 85833985, "body": "Thank you, I made the modification and valgrind  now does not detect an error."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 8, "last_activity_date": 1521661613, "last_edit_date": 1521661613, "creation_date": 1521660933, "answer_id": 49415151, "question_id": 49415102, "link": "https://stackoverflow.com/questions/49415102/why-does-valgrind-see-a-memory-leak-here-when-there-is-none/49415151#49415151", "title": "Why does valgrind see a memory leak here when there is none", "body": "<p>You do have a memory leak.  The issue with</p>\n\n<pre><code>void P::rebase(P* self){\n    //memory leak is detected, but no leak actually happens\n    delete self;\n    self=new C();\n}\n</code></pre>\n\n<p>Is you are passing the pointer by value.  This means the pointer from main is never reassigned the new address and you actually lose it as <code>self</code> goes out of scope when the function end.  If you use</p>\n\n<pre><code>void P::rebase(P*&amp; self){\n    //memory leak is detected, but no leak actually happens\n    delete self;\n    self=new C();\n}\n</code></pre>\n\n<p>Where you pass the pointer by reference then you won't have a memory leak.</p>\n\n<hr>\n\n<p>You also have undefined in your function since you keep calling delete on the pointer from main and calling delete on a pointer more than once, if it is not null, is undefined behavior.</p>\n\n<p>Essentially your code is the same as</p>\n\n<pre><code>int* a = new int;\nfor (int i = 0; i &lt; 10000; i++)\n{\n    int* b = a; // we copy the address held by a\n    delete b; // uh oh we call delete on that same address again\n    b = new int; // put new memory in b, this does nothing to a\n} // leak here as b goes out of scope and we no longer have the address it held\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 1, "last_activity_date": 1521660953, "creation_date": 1521660953, "answer_id": 49415157, "question_id": 49415102, "link": "https://stackoverflow.com/questions/49415102/why-does-valgrind-see-a-memory-leak-here-when-there-is-none/49415157#49415157", "title": "Why does valgrind see a memory leak here when there is none", "body": "<p>Valgrind is correct sort of.</p>\n\n<pre><code>void P::rebase(P* self){\n    //memory leak is detected, but no leak actually happens\n    delete self;\n    self=new C();\n}\n</code></pre>\n\n<p>This has two problems - it does not return the new pointer to the program\nIt deletes a running object.</p>\n\n<p>Deleting the running object may cause the code at the end of the function to crash, because there is object referencing needed to leave the function.</p>\n\n<p>The code probably should crash when test->print() is called.  I think the compiler is re-using the memory for both objects.  If you switched them round e.g.</p>\n\n<pre><code> P* old = self;\n self=new C();\n delete old;\n</code></pre>\n\n<p>Then it would not work.</p>\n\n<p>The non-virtual call to test will work, but is causing undefined behavior.  As the real object has been destroyed after the first call.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1521661376, "post_id": 49415244, "comment_id": 85832192, "body": "In this case though it did well as the OP is actually leaking memory."}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1521661523, "post_id": 49415244, "comment_id": 85832250, "body": "@NathanOliver Yes true. I have modified my answer."}], "tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1521661481, "last_edit_date": 1521661481, "creation_date": 1521661308, "answer_id": 49415244, "question_id": 49415102, "link": "https://stackoverflow.com/questions/49415102/why-does-valgrind-see-a-memory-leak-here-when-there-is-none/49415244#49415244", "title": "Why does valgrind see a memory leak here when there is none", "body": "<p>Valgrind is a software and it has its own logic and based on its logic it create list of warnings if some of its condition satisfy which it considered as memory leak. It does not necessary that it is a perfect memory leak. If you think that such warnings can be ignored you can simply ignore it. </p>\n\n<p>But in your case I can see a clear memory leak. You instantiated a object from class <code>C</code> and you never release the memory. That is the reason in C++ we are encouraged to use smart pointer to avoid this kind mistakes.</p>\n\n<pre><code>self=new C();\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 5753941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7aeb4a3e3d76e8b41617fac2a90417?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse McDonald", "link": "https://stackoverflow.com/users/5753941/jesse-mcdonald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "accepted_answer_id": 49415151, "answer_count": 3, "score": 1, "last_activity_date": 1521661613, "creation_date": 1521660742, "last_edit_date": 1521661472, "question_id": 49415102, "link": "https://stackoverflow.com/questions/49415102/why-does-valgrind-see-a-memory-leak-here-when-there-is-none", "title": "Why does valgrind see a memory leak here when there is none", "body": "<p>I have the following piece of C++ code, for the time being ignore the bad practice in actually doing this in a program. </p>\n\n<pre><code>#include&lt;iostream&gt;\n//#include &lt;type_traits&gt;\nusing namespace std;\n\nclass P{\n    public:\n    void rebase(P* self);\n    virtual void print();\n    virtual ~P(){} \n};\nclass C: public P{\n    virtual void print();\n\n};\nvoid P::rebase(P* self){\n    //memory leak is detected, but no leak actually happens\n    delete self;\n    self=new C();\n}\nvoid P::print(){\n    cout&lt;&lt;\"P\"&lt;&lt;endl;\n}\nvoid C::print(){\n    cout&lt;&lt;\"C\"&lt;&lt;endl;\n}\n\n\nint main(){\n    P *test;\n    test= new P();\n    test-&gt;print();\n    for(int i=0;i&lt;10000;i++) test-&gt;rebase(test);//run the \"leaking\" code 10000 times to amplify any leak\n    test-&gt;print();\n    delete test;\n    while (true);//blocks program from stoping so we can look at it with pmap\n}\n</code></pre>\n\n<p>I sent this jenky piece of code through valgrind and it reported a memory leak in P::rebase(), but when I look at the memory usage there is no leak, why does valgrind think there is?</p>\n\n<pre><code>==5547== LEAK SUMMARY:\n==5547==    definitely lost: 80,000 bytes in 10,000 blocks\n==5547==    indirectly lost: 0 bytes in 0 blocks\n==5547==      possibly lost: 0 bytes in 0 blocks\n==5547==    still reachable: 72,704 bytes in 1 blocks\n==5547==         suppressed: 0 bytes in 0 blocks\n==5547== Rerun with --leak-check=full to see details of leaked memory\n==5547== \n==5547== For counts of detected and suppressed errors, rerun with: -v\n==5547== ERROR SUMMARY: 30001 errors from 7 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>and I double checked with <code>sudo pmap -x</code> and there is no leak</p>\n\n<pre><code>total kB           13272    2956     180\n</code></pre>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 3, "creation_date": 1521660567, "post_id": 49415037, "comment_id": 85831745, "body": "First, &quot;4.6.0&quot; is not a valid number. You can&#39;t have two decimal points in numbers. Second, floating-point values are not exact."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1521660595, "post_id": 49415037, "comment_id": 85831758, "body": "Since when do real numbers have two decimal dots?"}, {"owner": {"reputation": 69, "user_id": 9378932, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/22f51d39eac9a70e458d3ea54bd91e5c?s=128&d=identicon&r=PG&f=1", "display_name": "ciyaso", "link": "https://stackoverflow.com/users/9378932/ciyaso"}, "edited": false, "score": 0, "creation_date": 1521660698, "post_id": 49415037, "comment_id": 85831826, "body": "if i change to <code>strVersion.substr(0, 3)</code> so string is &quot;4.6&quot; the float number is still <code>4.59999990</code>"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 2, "creation_date": 1521660973, "post_id": 49415037, "comment_id": 85831979, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "is_accepted": true, "score": 1, "last_activity_date": 1521661404, "creation_date": 1521661404, "answer_id": 49415268, "question_id": 49415037, "link": "https://stackoverflow.com/questions/49415037/extract-opengl-version-from-version-string/49415268#49415268", "title": "extract opengl version from version string", "body": "<p><strong>Why you don't get the third number</strong></p>\n\n<p><code>std::atof</code> will take as many characters as it can that represent a <em>decimal number</em>. That's <code>4.6</code>. The next dot cannot be part of the number, because there is no such thing as a decimal number with two dots. Decimal numbers only have one dot, separating the <em>integer</em> and the <em>fractional parts</em>.</p>\n\n<p><strong>Why you get 4.59999990 instead of 4.6</strong></p>\n\n<p>Because <em>floating point numbers</em> cannot store any possible combination of <em>integer</em> and <em>fractional part</em>. They have limited space to store information, so they always are just approximations. See <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">is floating point math broken?</a>.</p>\n\n<p><strong>How to get the version</strong></p>\n\n<p><em>A version is not a number.</em> That version consists of three numbers, not one: <code>4</code>, <code>6</code> and <code>0</code>. They are <em>integers</em>, not <em>decimal numbers</em>. So you need to either just handle the version as a string:</p>\n\n<pre><code>if (strVersion == \"4.6.0\")\n</code></pre>\n\n<p>or you have to split it into three parts and get those integer values separately. See <a href=\"https://stackoverflow.com/questions/5167625/splitting-a-c-stdstring-using-tokens-e-g\">Splitting a C++ std::string using tokens</a> for how to do that.</p>\n"}], "owner": {"reputation": 69, "user_id": 9378932, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/22f51d39eac9a70e458d3ea54bd91e5c?s=128&d=identicon&r=PG&f=1", "display_name": "ciyaso", "link": "https://stackoverflow.com/users/9378932/ciyaso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 49415268, "answer_count": 1, "score": 0, "last_activity_date": 1521661404, "creation_date": 1521660444, "question_id": 49415037, "link": "https://stackoverflow.com/questions/49415037/extract-opengl-version-from-version-string", "title": "extract opengl version from version string", "body": "<p>Im trying to get the current opengl verson.</p>\n\n<p><code>glGetString(GL_VERSION)</code> returns</p>\n\n<p><code>\"4.6.0 NVIDIA 391.01\"</code></p>\n\n<pre><code>    std::string strVersion = (const char*)glGetString(GL_VERSION);\n    strVersion = strVersion.substr(0, strVersion.find(\" \"));\n    float number = std::atof(strVersion.c_str());\n</code></pre>\n\n<p>float number = 4.59999990</p>\n\n<p>why is the float not 4.6.0?</p>\n"}, {"tags": ["c++", "xcode", "c++11", "cmake", "macos-high-sierra"], "comments": [{"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1521660459, "post_id": 49415019, "comment_id": 85831689, "body": "Is the <code>snap7</code>-library compiled for 64 bit architecture?"}, {"owner": {"reputation": 51, "user_id": 8446060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1843bc256d6d77c926901edacd98178?s=128&d=identicon&r=PG&f=1", "display_name": "bhmth", "link": "https://stackoverflow.com/users/8446060/bhmth"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1521661274, "post_id": 49415019, "comment_id": 85832128, "body": "via brew i only get the libsnap7.dylib / snap7.h files directly in /usr/local/cellar. however if you download the source directly there is the option to recompile the libary for every given architecture"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1521661635, "post_id": 49415019, "comment_id": 85832316, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8774593/cmake-link-to-external-library\">CMake link to external library</a>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1521661688, "post_id": 49415019, "comment_id": 85832340, "body": "In short: neither <code>include_directories</code> nor <code>link_directories</code> command <b>links</b> to the library. You need to use <code>target_link_libraries</code> command."}, {"owner": {"reputation": 51, "user_id": 8446060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1843bc256d6d77c926901edacd98178?s=128&d=identicon&r=PG&f=1", "display_name": "bhmth", "link": "https://stackoverflow.com/users/8446060/bhmth"}, "edited": false, "score": 0, "creation_date": 1521663647, "post_id": 49415019, "comment_id": 85833421, "body": "edited my cmake like this: FIND_LIBRARY(LIB snap7)  TARGET_LINK_LIBRARIES(${PROJECT} &quot;${LIB}&quot;)  TARGET_INCLUDE_DIRECTORIES(${PROJECT} PUBLIC /usr/local/Cellar/snap7/1.4.2_1/include) but still getting the same error"}], "owner": {"reputation": 51, "user_id": 8446060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1843bc256d6d77c926901edacd98178?s=128&d=identicon&r=PG&f=1", "display_name": "bhmth", "link": "https://stackoverflow.com/users/8446060/bhmth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521660389, "creation_date": 1521660389, "question_id": 49415019, "link": "https://stackoverflow.com/questions/49415019/c-include-libary-osx-clang-ld-symbols-not-found-for-architecture-x86-64", "title": "C++ include libary OSX, clang, ld: symbol(s) not found for architecture x86_64", "body": "<p>i'm trying to develop a small scaled application to exchange data between a pc and a plc using the snap7 Libary.</p>\n\n<p>I installed snap7 via brew and edited my cmake with the following lines</p>\n\n<pre><code>include_directories(/usr/local/Cellar/snap7/1.4.2_1/include)\nlink_directories(/usr/local/Cellar/snap7/1.4.2_1/lib)\n</code></pre>\n\n<p>so far so good i can now do this</p>\n\n<pre><code>#include &lt;snap7.h&gt;\n</code></pre>\n\n<p>but when i try to build the application (using CLion on macOS 10.13.3 with XCode Version 9.2 (9C40b)</p>\n\n<p>i get the following error</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"TS7Client::TS7Client()\", referenced from:\n  _main in main.cpp.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[2]: *** [Zebra_TCP] Error 1\nmake[1]: *** [CMakeFiles/Zebra_TCP.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "static-analysis"], "owner": {"reputation": 53, "user_id": 7933322, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60f7a335b009b633dcc8ec8872f1eb7e?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Foster", "link": "https://stackoverflow.com/users/7933322/travis-foster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1521660033, "creation_date": 1521660033, "question_id": 49414927, "link": "https://stackoverflow.com/questions/49414927/c-core-guidelines-checker-really-slow-on-small-project", "title": "C++ Core Guidelines Checker REALLY slow on small project", "body": "<p>I'm using an A8-5600K so I'm used to waiting a bit for CPU tasks to complete - nothing too bad but as far as CPUs go it's not the greatest. 12GB RAM, running very latest Visual Studio 2017 (15.6.6 iirc) as of this morning.</p>\n\n<p>I'm wanting to run static analysis simply because I believe it could save me time chasing edge cases and bugs while also making the code look nicer. I've got a relatively small project (single file, 5000 lines) which uses WxWidgets, OpenCV, STD, Chrono, Threads, Windows, and probably a few other things. I'm only running a single check (Style) as I figured it would be faster than running every check. It's been running for an hour and in the meantime I've got a CPU that's more or less tapped out and can't compile anything.</p>\n\n<p>I presume by this point that the Checker is getting through my code in no time and spending ages trying to tell me how to fix OpenCV or something. I understand that without knowing how OpenCV works the Checker might find it difficult understanding some stuff that's going on in my code.</p>\n\n<p>What can I do? Is the Checker simply not meant for consumer-grade CPUs ? If I ran this overnight would it finish? Does the number of rules have that much of an effect or should I just have them all checked for (ie 95% crawling my project, 5% analysis)?</p>\n\n<p>Also, the posts I've seen in regard to 3rd Party Libraries seem content with simply filtering out the warnings post-check (words on the blackboard are written but merely erased afterward so to speak) - this likely won't speed things up for me.</p>\n"}, {"tags": ["c++", "batch-file", "winapi"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1521659639, "post_id": 49414680, "comment_id": 85831246, "body": "execute <i>bat</i> in context of current process - only if you will be parse and execute <i>bat</i> yourself. you faster need use <code>CreateProcess</code> for create <i>cmd</i>, which execute <i>bat</i>. - this api let you set any Environment variables"}, {"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521659730, "post_id": 49414680, "comment_id": 85831293, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1478171/how-can-we-use-a-batch-file-in-c\">how can we use a batch file in c++?</a>"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 2, "creation_date": 1521662884, "post_id": 49414680, "comment_id": 85832995, "body": "Use another batch file that first runs <code>call vcvarsall.bat</code> and then runs your application."}, {"owner": {"reputation": 118713, "user_id": 1012053, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDAXz.jpg?s=128&g=1", "display_name": "dbenham", "link": "https://stackoverflow.com/users/1012053/dbenham"}, "reply_to_user": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521663038, "post_id": 49414680, "comment_id": 85833093, "body": "@SmitYcyken - No, that is not a duplicate. The OP already knows how to spawn a process that runs a batch script from C++ code. But the OP wants to know how to execute the batch script from C++ and preserve environment variables that the script creates so the C++ program can use them. (I don&#39;t think it is possible in the way the OP envisions it)"}, {"owner": {"reputation": 947, "user_id": 2265220, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/17bf33df5689c7db6e0332887e23e36c?s=128&d=identicon&r=PG", "display_name": "Vojt\u011bch Melda Meluz&#237;n", "link": "https://stackoverflow.com/users/2265220/vojt%c4%9bch-melda-meluz%c3%adn"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1521668467, "post_id": 49414680, "comment_id": 85835769, "body": "Exactly! @JonathanPotter of course, but that&#39;s not exactly easy to do in my case. I&#39;d like to do that from the app itself and continue working. That&#39;s the question."}, {"owner": {"reputation": 59189, "user_id": 778560, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52ebdc4690fff7b07d3644c4cb7b255a?s=128&d=identicon&r=PG", "display_name": "Aacini", "link": "https://stackoverflow.com/users/778560/aacini"}, "edited": false, "score": 0, "creation_date": 1521682905, "post_id": 49414680, "comment_id": 85839842, "body": "You can&#39;t. You have a misconception here. You should realize that a &quot;Batch file&quot; is <i>never</i> executed by itself. The program that &quot;execute&quot; the Batch file is <code>cmd.exe</code>, so your question really is: How execute <code>cmd.exe</code> program and preserve its environment after it ends? The answer should be obvious..."}, {"owner": {"reputation": 947, "user_id": 2265220, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/17bf33df5689c7db6e0332887e23e36c?s=128&d=identicon&r=PG", "display_name": "Vojt\u011bch Melda Meluz&#237;n", "link": "https://stackoverflow.com/users/2265220/vojt%c4%9bch-melda-meluz%c3%adn"}, "edited": false, "score": 0, "creation_date": 1521708054, "post_id": 49414680, "comment_id": 85848868, "body": "Well, could you help me with the &quot;obvious&quot; part?"}, {"owner": {"reputation": 59189, "user_id": 778560, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52ebdc4690fff7b07d3644c4cb7b255a?s=128&d=identicon&r=PG", "display_name": "Aacini", "link": "https://stackoverflow.com/users/778560/aacini"}, "edited": false, "score": 0, "creation_date": 1521726708, "post_id": 49414680, "comment_id": 85862449, "body": "When an .exe program ends, <i>all</i> the resources allocated for it are closed and released, like any opened file or any allocated memory block. This, of course, include the memory block allocated for the environment variables that belongs to such a program. This is the way that standard .exe programs (like <code>cmd.exe</code> or anyone of your C++ projects) works in Windows OS and there is no way to modify it..."}, {"owner": {"reputation": 59189, "user_id": 778560, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52ebdc4690fff7b07d3644c4cb7b255a?s=128&d=identicon&r=PG", "display_name": "Aacini", "link": "https://stackoverflow.com/users/778560/aacini"}, "edited": false, "score": 0, "creation_date": 1521726733, "post_id": 49414680, "comment_id": 85862467, "body": "I suggest you to review the description of <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682658(v=vs.85).aspx\" rel=\"nofollow noreferrer\">ExitProcess Win32 API function</a> that indicate: <i>Exiting a process causes the following: 6. All of the object handles opened by the process are closed</i>."}], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 2265220, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/17bf33df5689c7db6e0332887e23e36c?s=128&d=identicon&r=PG", "display_name": "Vojt\u011bch Melda Meluz&#237;n", "link": "https://stackoverflow.com/users/2265220/vojt%c4%9bch-melda-meluz%c3%adn"}, "edited": false, "score": 0, "creation_date": 1521741399, "post_id": 49431686, "comment_id": 85872765, "body": "Thank you! The idea with the text file is actually a good one! Didn&#39;t think about that. It&#39;s sad that such a basic thing isn&#39;t natively possible, but hey, if it works, then as a workaround it is fine by me!"}], "tags": [], "owner": {"reputation": 11788, "user_id": 2360169, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/x8M06.jpg?s=128&g=1", "display_name": "Michael Gunter", "link": "https://stackoverflow.com/users/2360169/michael-gunter"}, "is_accepted": true, "score": 1, "last_activity_date": 1521730210, "creation_date": 1521730210, "answer_id": 49431686, "question_id": 49414680, "link": "https://stackoverflow.com/questions/49414680/execute-a-batch-via-win32-in-the-context-of-the-calling-process-hence-keeping-t/49431686#49431686", "title": "Execute a batch via win32 in the context of the calling process, hence keeping the environment variables", "body": "<p>There is no way to automatically apply a child process's environment to a parent process. You could read the child environment manually by jumping through some hoops. <a href=\"https://stackoverflow.com/questions/1202653/check-for-environment-variable-in-another-process\">Check for environment variable in another process?</a></p>\n\n<p>There are arguably simpler approaches though. Here are a couple.</p>\n\n<ul>\n<li>Programmatically create a batch file that calls vcvarsall.bat and then invokes the compilation.</li>\n<li>Programmatically create a batch file that calls vcvarsall.bat and then writes the environment to a file (<code>set &gt; env.txt</code>). Then read and parse that text file.</li>\n</ul>\n"}], "owner": {"reputation": 947, "user_id": 2265220, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/17bf33df5689c7db6e0332887e23e36c?s=128&d=identicon&r=PG", "display_name": "Vojt\u011bch Melda Meluz&#237;n", "link": "https://stackoverflow.com/users/2265220/vojt%c4%9bch-melda-meluz%c3%adn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 49431686, "answer_count": 1, "score": 1, "last_activity_date": 1521730210, "creation_date": 1521659087, "last_edit_date": 1521668526, "question_id": 49414680, "link": "https://stackoverflow.com/questions/49414680/execute-a-batch-via-win32-in-the-context-of-the-calling-process-hence-keeping-t", "title": "Execute a batch via win32 in the context of the calling process, hence keeping the environment variables", "body": "<p>I have my own application for building a huge set of C++ projects. On Windows I need to set the environment variables via vcvarsall.bat, but how can I execute the batch from a C++ console app in the context of the current process, so that the environment the batch creates is kept for my app? Both _spawnvp and ShellExecuteEx create a dedicated process.</p>\n\n<p>Edit: I of course know how to execute a process or batch, but I want to know to preserve the environment the batch creates.</p>\n"}, {"tags": ["c++", "algorithm", "dictionary"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4434329"}, "edited": false, "score": 0, "creation_date": 1521658995, "post_id": 49414571, "comment_id": 85830889, "body": "Are you using std::map ?"}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1521660219, "post_id": 49414571, "comment_id": 85831565, "body": "Not enough info. State the requirements exactly. Is the map presented to your code already built, or do you insert the strings into it? Do you need to retain the original strings, or would it suffice to store lower case versions of them in the map?"}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1521660436, "post_id": 49414571, "comment_id": 85831679, "body": "How can we tell if it&#39;s an exact duplicate if we can&#39;t tell precisely what the intended question is?"}, {"owner": {"reputation": 170, "user_id": 9178490, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f73720385a3dfb05fb833ee4644b7e9d?s=128&d=identicon&r=PG&f=1", "display_name": "aromahola", "link": "https://stackoverflow.com/users/9178490/aromahola"}, "edited": false, "score": 0, "creation_date": 1521701096, "post_id": 49414571, "comment_id": 85845097, "body": "I am using std::map, I am inserting strings in map, I have to retain the strings as it is. Only comparison should be case insensitive."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1521659769, "last_edit_date": 1521659769, "creation_date": 1521659359, "answer_id": 49414753, "question_id": 49414571, "link": "https://stackoverflow.com/questions/49414571/case-insensitive-comparison-of-string-and-map/49414753#49414753", "title": "case insensitive comparison of string and map", "body": "<blockquote>\n  <p>Is there any better way than iterating through entire map and check for each record? </p>\n</blockquote>\n\n<p>It needs to be done since you cannot use <code>std::map::find</code>, which will work more efficiently. You can use use <code>std::find_if</code> to reduce some of the boilerplate code but it still means that you are iterating over each item of the <code>map</code>.</p>\n\n<p>But more importantly, if you are going to search for a key using a case insensitive comparison, it will be better to also create the map using a case insensitive compare function/functor. Otherwise, it's possible to have multiple elements in the <code>map</code> such as:</p>\n\n<pre><code>(jAvA, 2)\n(java, 20)\n(JAVA, 30)\n</code></pre>\n\n<p>Then the search function will not necessarily get you the item you would like have.</p>\n"}, {"comments": [{"owner": {"reputation": 170, "user_id": 9178490, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f73720385a3dfb05fb833ee4644b7e9d?s=128&d=identicon&r=PG&f=1", "display_name": "aromahola", "link": "https://stackoverflow.com/users/9178490/aromahola"}, "edited": false, "score": 0, "creation_date": 1521700972, "post_id": 49414849, "comment_id": 85845038, "body": "yeah, this is working. Can we use stricmp and compare string and map as we are doing for stl::sort by passing function to stl::sort?  I updated code for sort in above question."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 1, "last_activity_date": 1521659709, "creation_date": 1521659709, "answer_id": 49414849, "question_id": 49414571, "link": "https://stackoverflow.com/questions/49414571/case-insensitive-comparison-of-string-and-map/49414849#49414849", "title": "case insensitive comparison of string and map", "body": "<p>You can use a case-insensitive comparator for your map:</p>\n\n<pre><code>struct CaseInsensitiveLess\n{\n    bool operator()(std::string lhs, std::string rhs)\n    {\n        std::transform(lhs.begin(), lhs.end(), lhs.begin(),\n                       [](char c) { return std::tolower(c); });\n        std::transform(rhs.begin(), rhs.end(), rhs.begin(),\n                       [](char c) { return std::tolower(c); });\n        return lhs &lt; rhs;\n    }\n};\n\nint main()\n{\n    std::map&lt;std::string, int, CaseInsensitiveLess&gt; foo = {\n        {\"Cpp\", 1}, {\"jAvA\", 2}, {\"Cobol\", 3}\n    };\n\n    std::cout &lt;&lt; foo[\"java\"] &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/20293057e37e0c40\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p>This converts strings to lower case when comparing them, so <code>\"java\"</code>, <code>\"Java\"</code>, <code>\"jAvA\"</code>, <code>\"JAVA\"</code>, etc. will all be considered the same string when inserting into the map or looking up values in it.</p>\n"}], "owner": {"reputation": 170, "user_id": 9178490, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f73720385a3dfb05fb833ee4644b7e9d?s=128&d=identicon&r=PG&f=1", "display_name": "aromahola", "link": "https://stackoverflow.com/users/9178490/aromahola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "closed_date": 1521660037, "answer_count": 2, "score": -1, "last_activity_date": 1521701622, "creation_date": 1521658705, "last_edit_date": 1521701622, "question_id": 49414571, "link": "https://stackoverflow.com/questions/49414571/case-insensitive-comparison-of-string-and-map", "closed_reason": "Duplicate", "title": "case insensitive comparison of string and map", "body": "<p>I have a <code>string s=\"java\"</code> and a <code>map&lt;string,int&gt;M</code>. <code>M</code> contains \n<code>(Cpp,1), (jAvA,2), (Cobol,3)</code>.  I have to check if <code>string s</code> matches (case insensitive) with any key in map. <code>Is there any better way than iterating through entire map and check for each record</code>? In this example string s should match with second record in map, as it is case insensitive matching. In following example we are using <code>compareInterval()</code> with <code>sort()</code>. Is there any way that we can use any function with stricmp() and use map M and string s and perform case insensitive matching efficiently?</p>\n\n<pre><code>// A C++ program to demonstrate STL sort() using\n// our own comparator\n#include&lt;bits/stdc++.h&gt;\nusing namespace std;\n\n// An interval has start time and end time\nstruct Interval\n{\n   int start, end;\n};\n\n// Compares two intervals according to staring times.\nbool compareInterval(Interval i1, Interval i2)\n{\n   return (i1.start &lt; i2.start);\n}\n\nint main()\n{\n  Interval arr[] =  { {6,8}, {1,9}, {2,4}, {4,7} };\n  int n = sizeof(arr)/sizeof(arr[0]);\n\n// sort the intervals in increasing order of\n// start time\nsort(arr, arr+n, compareInterval);\n\ncout &lt;&lt; \"Intervals sorted by start time : \\n\";\nfor (int i=0; i&lt;n; i++)\n   cout &lt;&lt; \"[\" &lt;&lt; arr[i].start &lt;&lt; \",\" &lt;&lt; arr[i].end\n        &lt;&lt; \"] \";\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1521658843, "post_id": 49414555, "comment_id": 85830808, "body": "Why did you put <code>-lgsl</code> on one of your compile commands instead of the link command?"}, {"owner": {"reputation": 140, "user_id": 5955924, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/884981341616495/picture?type=large", "display_name": "Petrosyan Alexander", "link": "https://stackoverflow.com/users/5955924/petrosyan-alexander"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1521659706, "post_id": 49414555, "comment_id": 85831278, "body": "one of the files needs the -lgslg flag to link with gsl library. I&#39;m a total noob in terms of makefiles, so I don&#39;t know at which stage do I need to link the binaries."}, {"owner": {"reputation": 949, "user_id": 1503645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24cc5c188fec22a7ed277178ff1f059f?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/1503645/daniel"}, "edited": false, "score": 1, "creation_date": 1521660835, "post_id": 49414555, "comment_id": 85831917, "body": "important caveat: For the linker, the file order matters. When linking in an incorrect order the linker will complain about: &quot;undefined reference to &#39;some_func&#39;&quot;. see <a href=\"https://stackoverflow.com/questions/45135/why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc\" title=\"why does the order in which libraries are linked sometimes cause errors in gcc\">stackoverflow.com/questions/45135/&hellip;</a>"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1521663521, "post_id": 49414555, "comment_id": 85833341, "body": "Show complete make output of a clean build."}, {"owner": {"reputation": 140, "user_id": 5955924, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/884981341616495/picture?type=large", "display_name": "Petrosyan Alexander", "link": "https://stackoverflow.com/users/5955924/petrosyan-alexander"}, "edited": false, "score": 0, "creation_date": 1521663952, "post_id": 49414555, "comment_id": 85833559, "body": "Got it. I was redeclaring the classes inside the .cpp files, This meant that what I thought were implementations were actually methods from a different class."}], "answers": [{"comments": [{"owner": {"reputation": 2154, "user_id": 362792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/283347e31dc72eedd581c8b744e681f4?s=128&d=identicon&r=PG", "display_name": "Hitobat", "link": "https://stackoverflow.com/users/362792/hitobat"}, "edited": false, "score": 0, "creation_date": 1521661567, "post_id": 49415080, "comment_id": 85832275, "body": "In general gcc seems to collect unknown symbols from your files, and expects that it&#39;ll find the actual definitions later.  Your link phase is actually for the target <code>main</code> so all libraries go there. Looking at the headers you list, it looks like your dependencies are: * simulation -&gt; lattice and thermodynamics * thermodynamics -&gt; libgsl (from your original makefile) * lattice -&gt; nothing  So the link line above for main declares them in this order. Equivalently I think that <code>simulation.o lattice.o thermodynamics.o -lgsl</code> would also work."}, {"owner": {"reputation": 140, "user_id": 5955924, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/884981341616495/picture?type=large", "display_name": "Petrosyan Alexander", "link": "https://stackoverflow.com/users/5955924/petrosyan-alexander"}, "edited": false, "score": 0, "creation_date": 1521661871, "post_id": 49415080, "comment_id": 85832448, "body": "It works if I dereference all the class and method calls. But I do need those classes (otherwise what&#39;s the point)."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 140, "user_id": 5955924, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/884981341616495/picture?type=large", "display_name": "Petrosyan Alexander", "link": "https://stackoverflow.com/users/5955924/petrosyan-alexander"}, "edited": false, "score": 0, "creation_date": 1521662715, "post_id": 49415080, "comment_id": 85832894, "body": "@PetrosyanAlexander Added a note."}, {"owner": {"reputation": 140, "user_id": 5955924, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/884981341616495/picture?type=large", "display_name": "Petrosyan Alexander", "link": "https://stackoverflow.com/users/5955924/petrosyan-alexander"}, "edited": false, "score": 0, "creation_date": 1521662777, "post_id": 49415080, "comment_id": 85832934, "body": "I wrote the exact same makefil, the problem is still there.   Weirdly, if I did <code>g++ *.cpp -o main</code>, it would still fail with the same error message."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1521662699, "last_edit_date": 1521662699, "creation_date": 1521660643, "answer_id": 49415080, "question_id": 49414555, "link": "https://stackoverflow.com/questions/49414555/undefined-symbols-for-architecture-x86-64-when-linking-multiple-files/49415080#49415080", "title": "Undefined symbols for architecture x86_64 when linking multiple files", "body": "<p>It fails to link because your makefile uses linker flags when compiling. Whereas the linker flags must be used when linking.</p>\n\n<p>Corrections:</p>\n\n<pre><code>CXXFLAGS := -std=c++11 -Wall -Wextra\n\nmain: simulation.o thermodynamics.o lattice.o\n    g++ -o main simulation.o thermodynamics.o lattice.o -lgsl\n\nsimulation.o: simulation.cpp lattice.h  thermodynamics.h\n    g++ -c ${CXXFLAGS} -o simulation.o simulation.cpp \n\nthermodynamics.o: thermodynamics.cpp thermodynamics.h\n    g++ -c ${CXXFLAGS} -o thermodynamics.o thermodynamics.cpp \n\nlattice.o: lattice.cpp lattice.h\n    g++ -c ${CXXFLAGS} -o lattice.o lattice.cpp \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 140, "user_id": 5955924, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/884981341616495/picture?type=large", "display_name": "Petrosyan Alexander", "link": "https://stackoverflow.com/users/5955924/petrosyan-alexander"}, "is_accepted": false, "score": 0, "last_activity_date": 1521663806, "creation_date": 1521663806, "answer_id": 49415863, "question_id": 49414555, "link": "https://stackoverflow.com/questions/49414555/undefined-symbols-for-architecture-x86-64-when-linking-multiple-files/49415863#49415863", "title": "Undefined symbols for architecture x86_64 when linking multiple files", "body": "<p>I figured out what went wrong. Had to do with the way I've split the classes between files. </p>\n\n<p>I declared the classes in the <code>.h</code> files, and then redeclared them inside <code>.cpp</code> files. Instead I should have filled the cpp files with implementations of the form <code>class::method(params)</code>. </p>\n\n<p>Also I didn't <code>#include</code> the <code>.h</code> file inside the <code>.cpp</code>file. </p>\n\n<p>Lastly, I also had the wrong order of linkage: as pointed out by @Maxim Egorushkin, the order of linking matters. I should have linked the files all at once, and not at the final stage. </p>\n\n<p>Thanks for everyone that answered! </p>\n"}], "owner": {"reputation": 140, "user_id": 5955924, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/884981341616495/picture?type=large", "display_name": "Petrosyan Alexander", "link": "https://stackoverflow.com/users/5955924/petrosyan-alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521663806, "creation_date": 1521658656, "last_edit_date": 1521661794, "question_id": 49414555, "link": "https://stackoverflow.com/questions/49414555/undefined-symbols-for-architecture-x86-64-when-linking-multiple-files", "title": "Undefined symbols for architecture x86_64 when linking multiple files", "body": "<p>I'm trying to link three files using g++. The files are <code>simulation.o</code>, <code>lattice.o</code> and <code>thermodynamics.o</code>. </p>\n\n<p>They're a bit long, but the gist of it is. I have a makefile:</p>\n\n<pre><code>            main: simulation.o thermodynamics.o lattice.o\n                g++ simulation.o thermodynamics.o lattice.o\n\n            simulation.o: simulation.cpp lattice.o lattice.h thermodynamics.o thermodynamics.h\n                g++ -std=c++11 simulation.cpp -o simulation.o -c\n\n            thermodynamics.o: thermodynamics.cpp\n                g++ -std=c++11 thermodynamics.cpp -o thermodynamics.o -lgsl -c\n\n            lattice.o: lattice.cpp\n                g++ -std=c++11 lattice.cpp -o lattice.o -c\n</code></pre>\n\n<p>It passes the compile stage, but never links them. For each method I need from a different file, it simply says that it's undefined, and and refuses to find them. </p>\n\n<p>The classes and methods are all defined in the <code>.h</code> files. But for some reason I can define an external function but not an external class. </p>\n"}, {"tags": ["c++", "templates", "constructor", "tuples", "order-of-execution"], "comments": [{"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 2, "creation_date": 1521659342, "post_id": 49414550, "comment_id": 85831071, "body": "Even this order is not guaranteed."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 1, "creation_date": 1521659573, "post_id": 49414550, "comment_id": 85831203, "body": "from g++ I get &quot;4 3 2 1 0&quot;, from clang++ &quot;0 1 2 3 4&quot;"}, {"owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "edited": false, "score": 0, "creation_date": 1521661294, "post_id": 49414550, "comment_id": 85832133, "body": "I just compiled it with clang and clang++ and I get &quot;4 3 2 1 0&quot; ..."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1521663086, "post_id": 49414550, "comment_id": 85833121, "body": "Why exactly do you need a specific order? Is it for logging?"}, {"owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "edited": false, "score": 0, "creation_date": 1521664806, "post_id": 49414550, "comment_id": 85834025, "body": "In my actual implementation the Widget class is used for GUI widgets. The Element class is actually a 2D Quad and this structure is supposed to organize these Quads in a modular hierarchy. The reason why they need to be initialized in order is that the Quads are rendered in the order in which they were created, meaning that Quads initialized later will be rendered on top of Quads initialized before. There are other ways to organize this but for the sake of simplicity and performance would really prefer to compose the Quads this way."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1521813651, "post_id": 49414550, "comment_id": 85905109, "body": "@stimulate &quot;I just compiled it with clang&quot; is not useful information, because what matters here is the implementation of <code>std::tuple</code>. So using Clang &amp; libstdc++ will give the same result as GCC (because it uses the same <code>std::tuple</code>). Using Clang &amp; libc++ will not."}], "answers": [{"comments": [{"owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "edited": false, "score": 0, "creation_date": 1521660700, "post_id": 49414958, "comment_id": 85831827, "body": ":( So this means I have to retreat to initializing each member one by one, which means I cant make <code>elements</code> const, which makes this entire thing a lot less elegant and performant..? Kind of a let-down from C++..."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1521663450, "last_edit_date": 1521663450, "creation_date": 1521660166, "answer_id": 49414958, "question_id": 49414550, "link": "https://stackoverflow.com/questions/49414550/defining-element-initialization-order-when-constructing-stdtuple/49414958#49414958", "title": "Defining element initialization order when constructing std::tuple", "body": "<p>There is no requirement in the standard for the order of <code>std::tuple</code> member initialisation, I am afraid.</p>\n\n<p>You can iterate over a <code>tuple</code> in a specific order though, e.g.:</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n\n#include &lt;boost/fusion/adapted/std_tuple.hpp&gt;\n#include &lt;boost/fusion/algorithm/iteration/for_each.hpp&gt;\n\nint main()\n{\n    auto a = std::make_tuple(true, 42, 3.14, \"abc\");\n    boost::fusion::for_each(a, [](auto&amp; value) {\n            std::cout &lt;&lt; value &lt;&lt; '\\n';\n        });\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>1\n42\n3.14\nabc\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "is_accepted": true, "score": 1, "last_activity_date": 1521813613, "last_edit_date": 1521813613, "creation_date": 1521804376, "answer_id": 49448605, "question_id": 49414550, "link": "https://stackoverflow.com/questions/49414550/defining-element-initialization-order-when-constructing-stdtuple/49448605#49448605", "title": "Defining element initialization order when constructing std::tuple", "body": "<p>For anyone interested in a solution, I came up with a way to control the initialization order and retain the constness of <code>elements</code>:</p>\n\n<pre><code>#include &lt;tuple&gt;\n\ntemplate&lt;typename... Elems&gt;\n    struct construct \n    {\n        template&lt;size_t... Ns, typename Head, typename... Rest&gt;\n            static constexpr const std::tuple&lt;Rest...&gt; \n                drop_head_impl( const std::index_sequence&lt;Ns...&gt; ns, \n                    const std::tuple&lt;Head, Rest...&gt; tup )\n            {\n                return std::tuple&lt;Rest...&gt;( std::get&lt;Ns + 1u&gt;( tup )... );\n            }\n\n        template&lt;typename Head, typename... Rest&gt;\n            static constexpr const std::tuple&lt;Rest...&gt; \n                drop_head( const std::tuple&lt;Head, Rest...&gt; tup )\n            {\n                return drop_head_impl( std::make_index_sequence&lt;sizeof...(Rest)&gt;(), tup );\n            }\n\n        template&lt;typename Head&gt;\n            static constexpr const std::tuple&lt;Head&gt; \n                func_impl( const std::tuple&lt;typename Head::initer_t&gt; initer )\n            {\n                return  std::tuple&lt;Head&gt;( { std::get&lt;0&gt;( initer ) } ); \n            }\n\n        template&lt;typename Head, typename Next, typename... Rest&gt;\n            static constexpr const std::tuple&lt;Head, Next, Rest...&gt; \n                func_impl( const std::tuple&lt;typename Head::initer_t, typename Next::initer_t, typename Rest::initer_t...&gt; initer )\n            {\n                std::tuple&lt;Head&gt; head( { std::get&lt;0&gt;( initer ) } ); \n                return std::tuple_cat( head, func_impl&lt;Next, Rest...&gt;( drop_head(initer) ) );\n            }\n\n        static constexpr const std::tuple&lt;Elems...&gt; \n            func( const std::tuple&lt;typename Elems::initer_t...&gt; initer )\n        {\n            return func_impl&lt;Elems...&gt;( initer );\n        }\n    };\n\n// Elements are the end points of a Widget hierarchy\nstruct Element\n{\n    using initer_t = int;\n    Element( const initer_t pIniter )\n        :data{ pIniter }\n    {\n        printf( \"Creating %i\\n\", data );\n    }\n    const initer_t data;\n};\n\n// A Widget class stores any number of Elements and/or other Widget instances\ntemplate&lt;typename... Elems&gt;\n    struct Widget\n    {\n        using initer_t = std::tuple&lt;typename Elems::initer_t...&gt;;\n        Widget( const initer_t pIniter )\n            :elements( construct&lt;Elems...&gt;::func( pIniter ) ) \n        {}\n        const std::tuple&lt;Elems...&gt; elements;\n    };\n\nint main()\n{\n    using Button = Widget&lt;Element, Element&gt;;\n    using ButtonList = Widget&lt;Button, Button, Element&gt;;\n\n    Button::initer_t basic_button_initer{ 0, 1 }; // presets for Buttons\n    Button::initer_t other_button_initer{ 2, 3 }; \n\n    ButtonList::initer_t buttonlist_initer{ basic_button_initer, other_button_initer, 4 }; //a preset for a ButtonList\n\n    ButtonList buttonlist{ buttonlist_initer };\n    return 0;\n}\n</code></pre>\n\n<p>The <code>construct</code> structure takes the tuple of <code>initer_t</code>s (initer), constructs a tuple containing the first element of <code>Elems...</code> using the first element of initer, then drops the first element of initer and passes the remaining tuple to itself, which causes a tuple with the next element of <code>Elems...</code> to be constructed using the next element in initer. This recursion is stopped by an overload of <code>func_impl</code> for a tuple with one element which simply constructs that element from its <code>initer_t</code> in a tuple and returns it. This single-element tuple gets concatenated to the tuple with the previous element, the result gets returned to the higher level and is concatenated to the single-element tuple there and so on.</p>\n"}], "owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 49448605, "answer_count": 2, "score": 1, "last_activity_date": 1521813613, "creation_date": 1521658644, "last_edit_date": 1521810581, "question_id": 49414550, "link": "https://stackoverflow.com/questions/49414550/defining-element-initialization-order-when-constructing-stdtuple", "title": "Defining element initialization order when constructing std::tuple", "body": "<p>I would like to store the initialization values for elements in a tuple inside a separate tuple, so that I can use the same values as a preset for other tuples of the respective type. </p>\n\n<p>It is very important to my program that the constructors of the tuple elements are called in left-to-right order (otherwise it would at best turn out very confusing).</p>\n\n<p>Here is a simplified version of my program:</p>\n\n<pre><code>#include &lt;tuple&gt;\n\n// Elements are the end points of a Widget hierarchy\nstruct Element\n{\n    using initer_t = int;\n    Element( const initer_t pIniter )\n        :data{ pIniter }\n    {\n        printf(\"Creating %i\\n\", data);\n    }\n    const initer_t data;\n};\n\n// A Widget class stores any number of Elements and/or other Widget instances\ntemplate&lt;typename... Elems&gt;\n    struct Widget\n    {\n        using initer_t = std::tuple&lt;typename Elems::initer_t...&gt;;\n        Widget( const initer_t pIniter )\n            :elements{ pIniter } \n        {}\n        const std::tuple&lt;Elems...&gt; elements;\n    };\n\nint main()\n{\n    using Button = Widget&lt;Element, Element&gt;;\n    using ButtonList = Widget&lt;Button, Button, Element&gt;;\n\n    Button::initer_t basic_button_initer{ 0, 1 }; // presets for Buttons\n    Button::initer_t other_button_initer{ 2, 3 }; \n\n    ButtonList::initer_t buttonlist_initer{ basic_button_initer, other_button_initer, 4 }; //a preset for a ButtonList\n\n    ButtonList buttonlist{ buttonlist_initer };\n    return 0;\n}\n</code></pre>\n\n<p>So I am initializing the <code>std::tuple&lt;Elems...&gt; elements</code> member of <code>Widget&lt;Elems...&gt;</code> with a <code>std::tuple&lt;typename Elems::initer_t...&gt;</code> in <code>Widget&lt;Elems...&gt;</code>'s constructor initialization list. \nThis is supposed to initialize each element of <code>elements</code> with its corresponding initialization value of the type defined by <code>initer_t</code> using the values in pIniter.\nThe <code>initer_t</code> type is a type for each member of a Widget hierarchy(for example a <code>Widget&lt;typename...&gt;</code> or an <code>Element</code>), which is the type that the hierarchy member should be initialized with. \nBut the order in which this happens is right-to-left, while I need it in left-to-right.</p>\n\n<p>The output of the program is </p>\n\n<pre><code>Creating 4\nCreating 3\nCreating 2\nCreating 1\nCreating 0\n</code></pre>\n\n<p>But I want to reverse this order.</p>\n\n<p>How can I do this in this case?</p>\n"}, {"tags": ["c++", "vectorization", "simd", "avx", "sse2"], "comments": [{"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1521661949, "post_id": 49414268, "comment_id": 85832475, "body": "What compiler? And what compiler options? Also, what generation processor? Haswell? Skylake?"}, {"owner": {"reputation": 111, "user_id": 5994679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a373e5b123e19ef023988c6b6bb2c8?s=128&d=identicon&r=PG&f=1", "display_name": "Liotro78", "link": "https://stackoverflow.com/users/5994679/liotro78"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1521663715, "post_id": 49414268, "comment_id": 85833453, "body": "Compiler: Microsoft Visual Studio C++ 2013, CPU: (&quot;Kaby Lake-U&quot;) Intel&#174; Core\u2122 i7-7500U <a href=\"https://ark.intel.com/products/95451/Intel-Core-i7-7500U-Processor-4M-Cache-up-to-3_50-GHz-\" rel=\"nofollow noreferrer\">link</a>."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1521663786, "post_id": 49414268, "comment_id": 85833483, "body": "Did you pass the flag <code>&#47;arch:avx</code>?"}, {"owner": {"reputation": 111, "user_id": 5994679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a373e5b123e19ef023988c6b6bb2c8?s=128&d=identicon&r=PG&f=1", "display_name": "Liotro78", "link": "https://stackoverflow.com/users/5994679/liotro78"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1521663961, "post_id": 49414268, "comment_id": 85833565, "body": "I didn&#39;t. For SSE2 code I didn&#39;t add any flag, just activated the intrinsics in the properties of the project. I will try tomorrow to add the flag /arch:avx. I will let you know. What do you think about the code?"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1521664086, "post_id": 49414268, "comment_id": 85833640, "body": "Worth a read: <a href=\"https://stackoverflow.com/questions/7839925/using-avx-cpu-instructions-poor-performance-without-archavx\" title=\"using avx cpu instructions poor performance without archavx\">stackoverflow.com/questions/7839925/&hellip;</a>"}, {"owner": {"reputation": 111, "user_id": 5994679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a373e5b123e19ef023988c6b6bb2c8?s=128&d=identicon&r=PG&f=1", "display_name": "Liotro78", "link": "https://stackoverflow.com/users/5994679/liotro78"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1521664162, "post_id": 49414268, "comment_id": 85833679, "body": "I found this discussion <a href=\"https://stackoverflow.com/questions/20169064/does-archavx-enable-avx2\">link</a>, maybe this was the problem. Let&#39;s see tomorrow! Thanks"}, {"owner": {"reputation": 111, "user_id": 5994679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a373e5b123e19ef023988c6b6bb2c8?s=128&d=identicon&r=PG&f=1", "display_name": "Liotro78", "link": "https://stackoverflow.com/users/5994679/liotro78"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1521664190, "post_id": 49414268, "comment_id": 85833693, "body": "Wow, thanks a lot. I will read it!"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1521664237, "post_id": 49414268, "comment_id": 85833718, "body": "Your statement, &quot;The conversion from double to float for the yD vector seems pretty fast, while a lot of time is lost in the line where data is inserted in the _m256 Y register.&quot; - made me suspect you were using Visual Studio without <code>&#47;arch:AVX</code> as that would be precisely what you would see under a profiler. While I&#39;m not sure if this is the cause (since you have a *-lake processor), it&#39;s still suspect."}, {"owner": {"reputation": 111, "user_id": 5994679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a373e5b123e19ef023988c6b6bb2c8?s=128&d=identicon&r=PG&f=1", "display_name": "Liotro78", "link": "https://stackoverflow.com/users/5994679/liotro78"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1521664539, "post_id": 49414268, "comment_id": 85833875, "body": "Apart the main topic, what is your opinion on the AVX code? Do you think it is already in a good shape to perform decently fast when the /arch:AVX will be added?"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1521664793, "post_id": 49414268, "comment_id": 85834020, "body": "I don&#39;t know. I haven&#39;t tried to parse what it does to see if what you have is efficient or not."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521673155, "post_id": 49414268, "comment_id": 85837478, "body": "@Liotro78: you should probably be using 256-bit loads and 256-bit <code>vcvtpd2ps</code>, then shuffle those results together, especially if you have AVX2.  Also, pass args to your inline function instead of keeping pointers in globals like <code>yD</code> or something.  That might not inline away."}, {"owner": {"reputation": 111, "user_id": 5994679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a373e5b123e19ef023988c6b6bb2c8?s=128&d=identicon&r=PG&f=1", "display_name": "Liotro78", "link": "https://stackoverflow.com/users/5994679/liotro78"}, "edited": false, "score": 1, "creation_date": 1521816898, "post_id": 49414268, "comment_id": 85907664, "body": "Thanks to all for your valuable inputs. Adding /arch:AVX flag fixed the problem!"}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1521687104, "post_id": 49418231, "comment_id": 85840906, "body": "Yup, much better.  All versions of <code>vcvtpd2ps</code> cost a shuffle uop on Haswell / Skylake, so using YMM is much better because it also leads to less shuffling <i>after</i> to create a 256b vector.  Your stand-alone version of the function ends up with an extra memory operand because MSVC&#39;s default calling convention passes <code>__m256</code> by hidden reference; unfortunately MS didn&#39;t use <code>__vectorcall</code> for x86-64 by default.  Anyway, this should go away when inlining."}], "tags": [], "owner": {"reputation": 869, "user_id": 7519513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c34e9268e6feddce2370659088cb28?s=128&d=identicon&r=PG&f=1", "display_name": "Nejc", "link": "https://stackoverflow.com/users/7519513/nejc"}, "is_accepted": false, "score": 4, "last_activity_date": 1521932403, "last_edit_date": 1521932403, "creation_date": 1521675465, "answer_id": 49418231, "question_id": 49414268, "link": "https://stackoverflow.com/questions/49414268/fastest-way-to-perform-avx-inner-product-operations-with-mixed-float-double-i/49418231#49418231", "title": "Fastest way to perform AVX inner product operations with mixed (float, double) input vectors", "body": "<p>I rewrote your function and took better advantage of what AVX has to offer. I also used fused multiply-add at the end; if you can't use FMA, just replace that line with addition and multiplication. I only now see that I wrote an implementation that uses unaligned loads and yours uses aligned loads, but I'm not gonna lose any sleep over it. :)</p>\n\n<pre><code>__m256 foo(float*x, double* yD, const size_t i, __m256 res_prev)\n{\n  __m256 X = _mm256_loadu_ps(x + i);\n\n  __m128 yD21 = _mm256_cvtpd_ps(_mm256_loadu_pd(yD + i + 0));\n  __m128 yD43 = _mm256_cvtpd_ps(_mm256_loadu_pd(yD + i + 4));\n\n  __m256 Y = _mm256_set_m128(yD43, yD21);\n\n  return _mm256_fmadd_ps(X, Y, res_prev);\n}\n</code></pre>\n\n<p>I did a quick benhmark and compared running times of your and my implementation. I tried two different benchmark approaches with several repetitions and every time my code was around 15% faster. I used MSVC 14.1 compiler and compiled the program with /O2 and /arch:AVX2 flags.</p>\n\n<p>EDIT: this is the disassembly of the function:</p>\n\n<pre><code>vcvtpd2ps   xmm3,ymmword ptr [rdx+r8*8+20h]  \nvcvtpd2ps   xmm2,ymmword ptr [rdx+r8*8]  \nvmovups     ymm0,ymmword ptr [rcx+r8*4]  \n\nvinsertf128 ymm3,ymm2,xmm3,1  \n\nvfmadd213ps ymm0,ymm3,ymmword ptr [r9] \n</code></pre>\n\n<p>EDIT 2: this is the disassembly of your AVX implementation of the same algorithm:</p>\n\n<pre><code>vcvtpd2ps   xmm0,xmmword ptr [rdx+r8*8+30h]  \nvcvtpd2ps   xmm1,xmmword ptr [rdx+r8*8+20h]  \n\nvmovlhps    xmm3,xmm1,xmm0  \nvcvtpd2ps   xmm0,xmmword ptr [rdx+r8*8+10h]  \nvcvtpd2ps   xmm1,xmmword ptr [rdx+r8*8]  \nvmovlhps    xmm2,xmm1,xmm0  \n\nvperm2f128  ymm3,ymm2,ymm3,20h  \n\nvmulps      ymm0,ymm3,ymmword ptr [rcx+r8*4]  \nvaddps      ymm0,ymm0,ymmword ptr [r9]\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5994679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a373e5b123e19ef023988c6b6bb2c8?s=128&d=identicon&r=PG&f=1", "display_name": "Liotro78", "link": "https://stackoverflow.com/users/5994679/liotro78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1521932403, "creation_date": 1521657631, "last_edit_date": 1521662894, "question_id": 49414268, "link": "https://stackoverflow.com/questions/49414268/fastest-way-to-perform-avx-inner-product-operations-with-mixed-float-double-i", "title": "Fastest way to perform AVX inner product operations with mixed (float, double) input vectors", "body": "<p>I need to build a single-precision floating-point <strong>inner product</strong> routine for mixed single/double-precision floating-point vectors, exploiting the <strong>AVX</strong> instruction set for SIMD registers with 256 bits. </p>\n\n<p>Problem: one input vector is <strong>float</strong> (x), while the other is <strong>double</strong> (yD).</p>\n\n<p>Hence, before to compute the true inner product operations, I need to convert my input yD vector data from double to float.</p>\n\n<p>Using the <strong>SSE2</strong> instruction set, I was able to implement a very fast code doing what I needed, and with speed performances very close to the case when both vectors x and y were float:</p>\n\n<pre><code>  void vector_operation(const size_t i) \n  {\n    __m128 X = _mm_load_ps(x + i);\n    __m128 Y = _mm_movelh_ps(_mm_cvtpd_ps(_mm_load_pd(yD + i + 0)), _mm_cvtpd_ps(_mm_load_pd(yD + i + 2)));\n    //inner-products accumulation\n    res = _mm_add_ps(res, _mm_mul_ps(X, Y));\n  }   \n</code></pre>\n\n<p>Now, with the hope to further speed-up, I implemented a correpsonding version with AVX instruction set:</p>\n\n<pre><code>  inline void vector_operation(const size_t i) \n  {\n    __m256 X = _mm256_load_ps(x + i);\n    __m128 yD1 = _mm_cvtpd_ps(_mm_load_pd(yD + i + 0));\n    __m128 yD2 = _mm_cvtpd_ps(_mm_load_pd(yD + i + 2));\n    __m128 yD3 = _mm_cvtpd_ps(_mm_load_pd(yD + i + 4));\n    __m128 yD4 = _mm_cvtpd_ps(_mm_load_pd(yD + i + 6));\n\n    __m128 Ylow = _mm_movelh_ps(yD1, yD2);\n    __m128 Yhigh = _mm_movelh_ps(yD3, yD4);\n\n    //Pack __m128 data inside __m256 \n    __m256 Y = _mm256_permute2f128_ps(_mm256_castps128_ps256(Ylow), _mm256_castps128_ps256(Yhigh), 0x20);\n\n    //inner-products accumulation \n    res = _mm256_add_ps(res, _mm256_mul_ps(X, Y));\n  }\n</code></pre>\n\n<p>I also tested other AVX implementations using, for example, casting and insertion operations instead of perfmuting data. Performances were comparably poor compared to the case where both x and y vectors were float.</p>\n\n<p>The problem with the AVX code is that no matter how I implemented it, its performance is by far inferior to the ones achieved by using only float x and y vectors (i.e. no double-float conversion is needed).</p>\n\n<p>The conversion from double to float for the yD vector seems pretty fast, while a lot of time is lost in the line where data is inserted in the _m256 Y register.</p>\n\n<p>Do you know if this is a well-known issue with AVX?</p>\n\n<p>Do you have a solution that could preserve good performances?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "macos", "qt", "qmake"], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1521658254, "creation_date": 1521658254, "answer_id": 49414439, "question_id": 49414240, "link": "https://stackoverflow.com/questions/49414240/how-to-get-a-binary-without-the-app-using-qmake-on-macos/49414439#49414439", "title": "How to get a binary, without the .app, using qmake on macOS?", "body": "<p>Sure! Add the following to the project file:</p>\n\n<p><code>CONFIG -= app_bundle</code></p>\n"}], "owner": {"reputation": 23, "user_id": 6699606, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IZcacf2JjWk/AAAAAAAAAAI/AAAAAAAADhs/DYIu5xk0kg8/photo.jpg?sz=128", "display_name": "Nebulean", "link": "https://stackoverflow.com/users/6699606/nebulean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 49414439, "answer_count": 1, "score": 1, "last_activity_date": 1521658254, "creation_date": 1521657549, "last_edit_date": 1521657941, "question_id": 49414240, "link": "https://stackoverflow.com/questions/49414240/how-to-get-a-binary-without-the-app-using-qmake-on-macos", "title": "How to get a binary, without the .app, using qmake on macOS?", "body": "<p>I am using qmake for a c++ project, on macOS.</p>\n\n<p>When I compile the project, the output is a <strong>.app</strong> folder, <strong>which contains my binary</strong>, and some other files for macos.</p>\n\n<p>Can I add an option on my <strong>.pro</strong> file to compile the project and have the binary, <strong>without having the .app</strong> ?</p>\n"}, {"tags": ["c++", "multithreading", "winsock2"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1521657219, "post_id": 49414037, "comment_id": 85829822, "body": "1) you don&#39;t <i>need</i> multiple threads to serve multiple clients. 2) threads <i>will</i> complicate your code and make it <i>hard</i> to get correct. 3) even with threads you probably want to use a thread pool, not simply one thread per connection."}, {"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521657534, "post_id": 49414037, "comment_id": 85829984, "body": "It is not a real question. 1) It is too broad 2) opinion based 3) so on..."}, {"owner": {"reputation": 1545, "user_id": 2687589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0ca2e33a502cc32f12a023a29886f8e7?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon McKenzie", "link": "https://stackoverflow.com/users/2687589/brandon-mckenzie"}, "edited": false, "score": 2, "creation_date": 1521657629, "post_id": 49414037, "comment_id": 85830036, "body": "It&#39;s good to see somebody learning C++ in 8th grade, and I wish you the best.  That said, you might want to do some quick googling before you ask next time to prevent downvotes.  Googling &quot;Simple C++ Chat Server&quot; gives <a href=\"https://github.com/hassanyf/Simple-Server-and-Chat-Program\" rel=\"nofollow noreferrer\">this</a> as a first result, and there&#39;s plenty more great examples for you to look at.  If you want to see something meatier, try looking into IRC source code, IRC is a classic chat program that&#39;s a bit more complex, but still lean enough to study in a reasonable amount of time."}, {"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521658075, "post_id": 49414037, "comment_id": 85830329, "body": "It&#39;s bad to see somebody can&#39;t googling in 8th grade=) No offence, just a joke. I would be really honoured if some seniors taught me to google =)"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1521658329, "post_id": 49414037, "comment_id": 85830480, "body": "&quot;I want to make it multi-threaded so I can connect more than clients, ...&quot; typo?  ... sentence incomplete? what (other than clients) might you want to connect?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1521658400, "post_id": 49414037, "comment_id": 85830527, "body": "I recommend you research the &#39;select&#39; concept of handling multiple i/o channels with a single task.  Multiple threads imply context-switching, which is comparatively expensive, and thus probably something to avoid.  There is a use for threads, so this might be an opportunity for you to learn if this is a reasonable approach for your effort.   Good luck."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1521659538, "post_id": 49414037, "comment_id": 85831182, "body": "Is this C++ code when you have <code>printf</code>?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1521663958, "post_id": 49414037, "comment_id": 85833562, "body": "I  recommend you avoid the &#39;select&#39; concept of handling multiple i/o channels with a single task.  Multiple threads allow context-switching, which avoids app-wide delays from blocking calls, allows effective use of multiple cores and does not involve you in writing explicit state-machines to handle any protocol more complex than &#39;echo&#39;.  [AKA - Q. is too broad or opinion-based] :)"}, {"owner": {"reputation": 9, "user_id": 8863480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16fb45821177c2deb4a9d932fe86551c?s=128&d=identicon&r=PG&f=1", "display_name": "Jackson Simpson", "link": "https://stackoverflow.com/users/8863480/jackson-simpson"}, "edited": false, "score": 0, "creation_date": 1521723268, "post_id": 49414037, "comment_id": 85859689, "body": "I cant use github at school and all the source code is for linux pthreads when Im using windows also I cant use very many forums for examples because they are all blocked. I should have mentioned this thanks"}], "answers": [{"tags": [], "owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "is_accepted": false, "score": 1, "last_activity_date": 1521659318, "last_edit_date": 1592644375, "creation_date": 1521659318, "answer_id": 49414739, "question_id": 49414037, "link": "https://stackoverflow.com/questions/49414037/c-multi-threaded-server/49414739#49414739", "title": "C++ multi threaded server", "body": "<p>There are dozens of ways how to implement this solution.</p>\n<p>First of all, it is better to design what approach is preferable for your educational purposes.</p>\n<h3>Considering network programming:</h3>\n<p>One of the best guides for network programming I can recommend is <a href=\"http://beej.us/guide/bgnet/\" rel=\"nofollow noreferrer\">Beej's Guide</a>.</p>\n<h3>Considering server-side architecture:</h3>\n<p>I would like to recommend C++ Concurrency in Action: Practical Multithreading by  Anthony Williams for further reading.</p>\n<p>Before you, a whole sea of possibilities - go for it!</p>\n<h3>Ps: considering general questions like this</h3>\n<p>It is better to look for an answer to such questions in <a href=\"https://softwareengineering.stackexchange.com/questions/110202/state-machines-vs-threads\">softwareengineering</a> forum.</p>\n"}], "owner": {"reputation": 9, "user_id": 8863480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16fb45821177c2deb4a9d932fe86551c?s=128&d=identicon&r=PG&f=1", "display_name": "Jackson Simpson", "link": "https://stackoverflow.com/users/8863480/jackson-simpson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3696, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1523927937, "creation_date": 1521656836, "last_edit_date": 1523927937, "question_id": 49414037, "link": "https://stackoverflow.com/questions/49414037/c-multi-threaded-server", "title": "C++ multi threaded server", "body": "<p>I'm working on a server that just connects a client and sends back what they type. So far it works well, but I want to make it multi-threaded so I can connect more clients, so they can \"Talk.\" Can you guys refer me to any source code that I can look over to make some adjustments to my own code? Thanks. I would also like this to work on different networks, and I am not sure how to do this so some source code to that as well would work. Also I'm in eighth grade and haven't had a lot of experience so a well-explained answer would be appreciated. </p>\n\n<pre><code>int main() {\n\n    WSADATA wsaData;\n\n    // Initialize Winsock\n    int iResult = WSAStartup(MAKEWORD(2,2), &amp;wsaData);\n    if(iResult != 0)\n    {\n        printf(\"WSAStartup failed: %d\\n\", iResult);\n        return 1;\n    }\n\n    struct addrinfo *result = NULL,\n                    hints;\n\n    ZeroMemory(&amp;hints, sizeof(hints));\n    hints.ai_family = AF_INET;      // Internet address family is unspecified so that either an IPv6 or IPv4 address can be returned\n    hints.ai_socktype = SOCK_STREAM;    // Requests the socket type to be a stream socket for the TCP protocol\n    hints.ai_protocol = IPPROTO_TCP;\n    hints.ai_flags = AI_PASSIVE;\n\n    // Resolve the local address and port to be used by the server\n    iResult = getaddrinfo(NULL, DEFAULT_PORT, &amp;hints, &amp;result);\n    if (iResult != 0)\n    {\n        printf(\"getaddrinfo failed: %d\\n\", iResult);\n        WSACleanup();\n        return 1;\n    }\n\n    SOCKET ListenSocket = INVALID_SOCKET;\n\n    // Create a SOCKET for the server to listen for client connections\n    ListenSocket = socket(result-&gt;ai_family, result-&gt;ai_socktype, result-&gt;ai_protocol);\n\n    if (ListenSocket == INVALID_SOCKET)\n    {\n        printf(\"Error at socket(): %d\\n\", WSAGetLastError());\n        freeaddrinfo(result);\n        WSACleanup();\n        return 1;\n    }\n\n    // Setup the TCP listening socket\n    iResult = bind(ListenSocket, result-&gt;ai_addr, (int)result-&gt;ai_addrlen);\n\n    if (iResult == SOCKET_ERROR)\n    {\n        printf(\"bind failed: %d\", WSAGetLastError());\n        freeaddrinfo(result);\n        closesocket(ListenSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    freeaddrinfo(result);\n\n    // To listen on a socket\n    if ( listen(ListenSocket, SOMAXCONN) == SOCKET_ERROR)\n    {\n        printf(\"listen failed: %d\\n\", WSAGetLastError());\n        closesocket(ListenSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    SOCKET ClientSocket;\n\n    ClientSocket = INVALID_SOCKET;\n\n    // Accept a client socket\n    ClientSocket = accept(ListenSocket, NULL, NULL);\n\n    if (ClientSocket == INVALID_SOCKET)\n    {\n        printf(\"accept failed: %d\\n\", WSAGetLastError());\n        closesocket(ListenSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    char recvbuf[DEFAULT_BUFFER_LENGTH];\n    int iSendResult;\n\n    // reveice until the client shutdown the connection\n    do {\n        iResult = recv(ClientSocket, recvbuf, DEFAULT_BUFFER_LENGTH, 0);\n        if (iResult &gt; 0)\n        {\n            char msg[DEFAULT_BUFFER_LENGTH];\n            memset(&amp;msg, 0, sizeof(msg));\n            strncpy(msg, recvbuf, iResult);\n\n            printf(\"Received: %s\\n\", msg);\n\n            iSendResult = send(ClientSocket, recvbuf, iResult, 0);\n\n            if (iSendResult == SOCKET_ERROR)\n            {\n                printf(\"send failed: %d\\n\", WSAGetLastError());\n                closesocket(ClientSocket);\n                WSACleanup();\n                return 1;\n            }\n\n            printf(\"Bytes sent: %ld\\n\", iSendResult);\n        }\n        else if (iResult == 0)\n            printf(\"Connection closed\\n\");\n        else\n        {\n            printf(\"recv failed: %d\\n\", WSAGetLastError());\n            closesocket(ClientSocket);\n            WSACleanup();\n            //return 1;\n        }\n    } while (iResult &gt; 0);\n\n    // Free the resouces\n    closesocket(ListenSocket);\n    WSACleanup();\n\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "glm-math"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521657350, "post_id": 49414020, "comment_id": 85829891, "body": "Try changing your design.  The C++ language does not support reflection."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521657426, "post_id": 49414020, "comment_id": 85829924, "body": "For example, instead of have a function that operates base on field types, modify the field classes (types) to contain the functionality."}, {"owner": {"reputation": 720, "user_id": 1481358, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/05bd1c0bb267bdb183c0cbd0e6cd0d00?s=128&d=identicon&r=PG", "display_name": "ChaoSXDemon", "link": "https://stackoverflow.com/users/1481358/chaosxdemon"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521657466, "post_id": 49414020, "comment_id": 85829946, "body": "I was hoping some macro + template magic :) not looking for general reflection system."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521657645, "post_id": 49414020, "comment_id": 85830046, "body": "You can use some template magic:  <code>template&lt; typename DataType&gt; function(...)</code>.   You&#39;ll need to override the function name for POD types."}, {"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521657691, "post_id": 49414020, "comment_id": 85830067, "body": "Adding some macro to the ill-designed code will make you crazy one day."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1521657714, "post_id": 49414020, "comment_id": 85830080, "body": "Might be worth looking into <a href=\"http://www.boost.org/doc/libs/1_63_0/libs/hana/doc/html/index.html\" rel=\"nofollow noreferrer\">boost::hana</a>."}, {"owner": {"reputation": 720, "user_id": 1481358, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/05bd1c0bb267bdb183c0cbd0e6cd0d00?s=128&d=identicon&r=PG", "display_name": "ChaoSXDemon", "link": "https://stackoverflow.com/users/1481358/chaosxdemon"}, "reply_to_user": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521657876, "post_id": 49414020, "comment_id": 85830180, "body": "@SmitYcyken what\u2019s a better design?"}, {"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1521658013, "post_id": 49414020, "comment_id": 85830288, "body": "@ChaoSXDemon, this is typical XY question. It looks like you are trying to invent one more reflection bicycle in c++."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1521658131, "post_id": 49414020, "comment_id": 85830366, "body": "Also if all of your types are default constructible, you might be able to do some hackery with <code>std::tuple</code>, e.g. with C++17: <code>using sFieldTypes = std::tuple&lt;glm::vec3, uint32_t, glm::vec3&gt;; std::apply([](auto val){ &#47;* something with decltype(val)... *&#47; }, sFieldTypes{});</code>"}], "owner": {"reputation": 720, "user_id": 1481358, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/05bd1c0bb267bdb183c0cbd0e6cd0d00?s=128&d=identicon&r=PG", "display_name": "ChaoSXDemon", "link": "https://stackoverflow.com/users/1481358/chaosxdemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1521663202, "creation_date": 1521656794, "last_edit_date": 1521663202, "question_id": 49414020, "link": "https://stackoverflow.com/questions/49414020/c-map-to-type-for-creation", "title": "C++ map to type for creation", "body": "<p>I am not sure how to do this in C++ ... and so I would like to seek the knowledge of the Stack :)</p>\n\n<p>Basically I have an enum defining some values I care about:</p>\n\n<pre><code>enum class VertexField : uint16_t\n{\n    Position = 0,\n    Color,\n    Normal,\n    Count,\n    Invalid\n};\n</code></pre>\n\n<p>Then I have an array that indicates the size of each enum if we allocate memory for that enum value:</p>\n\n<pre><code>const uint16_t sFieldSizes[] =\n{\n    12,     //Position, 4bytes each, float vec3\n    4,      //Color, 1bytes each, unorm vec4\n    12      //Normal, 4bytes each, float vec3\n};\n</code></pre>\n\n<p>Now what I want to do is to add another array that tells me the type ... so conceptually it would look like:</p>\n\n<pre><code>const TYPE sFieldTypes[] = \n{\n    glm::vec3,\n    uint32_t,\n    glm::vec3\n};\n</code></pre>\n\n<p>I know the above isn't code that works but what are ways to do what I want that compiles?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1521656628, "post_id": 49413930, "comment_id": 85829511, "body": "why do you have to write your own <code>strcpy</code>? just asking, because using <code>strlen</code> seems to be fine"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1521656678, "post_id": 49413930, "comment_id": 85829532, "body": "btw do you want to learn &quot;c++ the c way&quot; ? because if not then you should take a look at <code>std::string</code> first"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1521656740, "post_id": 49413930, "comment_id": 85829569, "body": "Exercise: find out why <code>for(i=0;i&lt;strlen(s);i++)</code> is inefficient."}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1521656832, "post_id": 49413930, "comment_id": 85829617, "body": "If that is a stab at writing a function definition then take the &quot;;&quot; off of the end of the header..."}, {"owner": {"reputation": 139, "user_id": 5847142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c954cf3f1778284267d7de8537527ac3?s=128&d=identicon&r=PG&f=1", "display_name": "HangrY", "link": "https://stackoverflow.com/users/5847142/hangry"}, "edited": false, "score": 0, "creation_date": 1521656841, "post_id": 49413930, "comment_id": 85829630, "body": "Don&#39;t use NULL for 0, only for pointers"}, {"owner": {"reputation": 2007, "user_id": 5834077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N7N3H.jpg?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5834077/carl"}, "reply_to_user": {"reputation": 139, "user_id": 5847142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c954cf3f1778284267d7de8537527ac3?s=128&d=identicon&r=PG&f=1", "display_name": "HangrY", "link": "https://stackoverflow.com/users/5847142/hangry"}, "edited": false, "score": 3, "creation_date": 1521656904, "post_id": 49413930, "comment_id": 85829673, "body": "@HangrY Don&#39;t even use it for pointers, use <code>nullptr</code> instead"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "edited": false, "score": 4, "creation_date": 1521656959, "post_id": 49413930, "comment_id": 85829694, "body": "<code>int mystrcpy(char *c, const char* s) { std::strcpy(c, s); return 0; }</code>"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 1, "creation_date": 1521657133, "post_id": 49413930, "comment_id": 85829775, "body": "Canonical strcpy take only one pass over the source :  <code>while(*s) {*c++ = *s++; }  *c = 0;</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1521657144, "post_id": 49413930, "comment_id": 85829784, "body": "Please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. In the code you show here we cannot know where <code>c</code> points to, so basically anything is possible even if the method was fine otherwise"}, {"owner": {"reputation": 11, "user_id": 8398635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14725a2814cfc421ef7461c4a2c023a6?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/8398635/john-doe"}, "edited": false, "score": 0, "creation_date": 1521657191, "post_id": 49413930, "comment_id": 85829808, "body": "I have to implement strcpy cuz it is a school assignment, ok?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 2, "creation_date": 1521657351, "post_id": 49413930, "comment_id": 85829892, "body": "@SeverinPappadeux <code>while(*c++ = *s++);</code> takes care of the null terminator for you"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 3, "creation_date": 1521657353, "post_id": 49413930, "comment_id": 85829893, "body": "@SeverinPappadeux -- it&#39;s usually even more compact than that: <code>while (*c++ = *s++) ;</code>. Yes, I know, busybody compilers will give you various warnings about this code."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1521657606, "post_id": 49413930, "comment_id": 85830018, "body": "@JohnDoe <i>I have to implement strcpy cuz it is a school assignment, ok?</i> -- If you are doing that, then why are you using <code>strlen</code>, since that is found in the same family of C-string functions?  I would expect you can&#39;t use <code>strlen</code> either."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1521657717, "post_id": 49413930, "comment_id": 85830083, "body": "Sort out the formatting of the code. Always use braces/ Learn to write readable code"}, {"owner": {"reputation": 604, "user_id": 7780211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rP7pt.jpg?s=128&g=1", "display_name": "Misho Tek", "link": "https://stackoverflow.com/users/7780211/misho-tek"}, "edited": false, "score": 0, "creation_date": 1521657736, "post_id": 49413930, "comment_id": 85830097, "body": "@JohnDoe could you show us a part of your code where char * is declared and function mystrcpy is called?"}, {"owner": {"reputation": 11, "user_id": 8398635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14725a2814cfc421ef7461c4a2c023a6?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/8398635/john-doe"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1521657845, "post_id": 49413930, "comment_id": 85830162, "body": "@PaulMcKenzie why would the usage of strlen be a concern? You deviate from the point."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1521657969, "post_id": 49413930, "comment_id": 85830256, "body": "@JohnDoe please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the actual problem you are trying to solve. Your <code>mystrcpy</code> has a logic bug that trashes memory, which may be amplified if the calling code uses <code>mystrcpy</code> incorrectly to begin with."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1521657985, "post_id": 49413930, "comment_id": 85830267, "body": "The <code>strlen</code> is called for each character in the string. <code>strlen</code> requires <code>n</code> operations. And this is called n times - i.e n*n operations will be performed. When you can do the task in n operations"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "edited": false, "score": 0, "creation_date": 1521658178, "post_id": 49413930, "comment_id": 85830392, "body": "Imagine &quot;How do I implement <code>strlen</code> function in C++&quot;. Then you would know why calling <code>strlen</code> so many times in <code>strcpy</code> is a silly idea."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1521658406, "post_id": 49413930, "comment_id": 85830533, "body": "@JohnDoe -- Here is the issue -- you posted code claiming you want to write your own <code>strcpy</code>.  You give absolutely no parameters in what you can or can&#39;t use.  Since you didn&#39;t state what you can or can&#39;t use, it is assumed that you can&#39;t use <i>any</i> C-string related function.  This includes <code>strcat</code>, <code>strlen</code>, <code>strchr</code>, and included in that <code>strcpy</code>.  Otherwise, why not use <code>memcpy</code> and stick a null at the end?"}, {"owner": {"reputation": 11, "user_id": 8398635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14725a2814cfc421ef7461c4a2c023a6?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/8398635/john-doe"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1521658513, "post_id": 49413930, "comment_id": 85830600, "body": "@PaulMcKenzie anything would do as long as I dont use the strcpy function itself. Even library functions"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "edited": false, "score": 0, "creation_date": 1521658886, "post_id": 49413930, "comment_id": 85830832, "body": "Now, you suddenly mention a member function <code>Persoana::my_strcpy</code>. Your question is less consistent now. Not to mention how to make sense of making a <code>strcpy</code> replica a member function."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1521659164, "post_id": 49413930, "comment_id": 85830983, "body": "@NickyC - The whole exercise (if it is a student exercise) makes little sense. Most likely an ivy league university!"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1521657444, "post_id": 49414156, "comment_id": 85829933, "body": "&quot;<i>that will lead to an access violation</i>&quot; - no, it leads to a buffer overflow that results in undefined behavior, which MAY throw an AV, or it may just trash memory without crashing"}], "tags": [], "owner": {"reputation": 384, "user_id": 7193039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SD1Fs.png?s=128&g=1", "display_name": "Matthias Gr&#252;n", "link": "https://stackoverflow.com/users/7193039/matthias-gr%c3%bcn"}, "is_accepted": false, "score": -2, "last_activity_date": 1521657520, "last_edit_date": 1521657520, "creation_date": 1521657275, "answer_id": 49414156, "question_id": 49413930, "link": "https://stackoverflow.com/questions/49413930/how-do-i-implement-strcpy-function-in-c/49414156#49414156", "title": "How do I implement strcpy function in C++", "body": "<p>The for loop</p>\n\n<pre><code>for(i=0; i &lt; strlen(s); i++)\n</code></pre>\n\n<p>aborts when <em>i &lt; strlen(s)</em> becomes <em>false</em>, which is the case when i is equal to <em>strlen(s)</em>. So that will be the value of i when the loop ends.</p>\n\n<p>C strings are NULL-terminated as you know, so you need <em>strlen(s) + 1</em> bytes reserved for c. Since you increment i again before writing the '\\0' character, you're using <em>strlen(s) + 2</em> bytes starting at c.</p>\n\n<p>If c is exactly the size that's needed (<em>strlen(s) + 1</em>), that <em>may</em> lead to an access violation, since you're writing past the end of the allocated memory.</p>\n\n<p>So instead of</p>\n\n<pre><code>c[++i]=NULL;\n</code></pre>\n\n<p>write</p>\n\n<pre><code>c[i]='\\0';\n</code></pre>\n\n<p>Hope this makes sense!</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1521657688, "last_edit_date": 1521657688, "creation_date": 1521657278, "answer_id": 49414160, "question_id": 49413930, "link": "https://stackoverflow.com/questions/49413930/how-do-i-implement-strcpy-function-in-c/49414160#49414160", "title": "How do I implement strcpy function in C++", "body": "<p>Your loop itself is OK (but inefficient, since you call <code>strlen()</code> on every iteration).  The real problem is when you go to insert the null terminator at the end of the copied string.  You are incrementing <code>i</code> again before inserting the terminator.  DON'T do that.  <code>i</code> is already at the correct index after the loop ends, so just use it as-is: </p>\n\n<pre><code>int mystrcpy(char *c, const char* s);\n{\n    int i, len = strlen(s);\n    for(i = 0; i &lt; len; ++i)\n        c[i] = s[i];\n    c[i] = '\\0'; // &lt;-- NO ++ HERE!\n    cout &lt;&lt; c;\n    return 0;\n}\n</code></pre>\n\n<p>That being said, the simplest way to implement <code>strcpy</code> without using <code>i</code> at all is as follows:</p>\n\n<pre><code>int mystrcpy(char *c, const char* s)\n{\n    char *p = c;\n    while (*p++ = *s++);\n    cout &lt;&lt; c;\n    return 0;\n}\n</code></pre>\n\n<p>If you remove the <code>cout</code> then it becomes simpler:</p>\n\n<pre><code>int mystrcpy(char *c, const char* s)\n{\n    while (*c++ = *s++);\n    return 0;\n}\n</code></pre>\n\n<p>No matter what, make sure that when you call <code>mystrcpy()</code>, <code>c</code> is pointing to a <code>char[]</code> buffer that is allocated to at least <code>strlen(s)+1</code> chars in size, otherwise the code will have <em>undefined behavior</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 11, "user_id": 8398635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14725a2814cfc421ef7461c4a2c023a6?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/8398635/john-doe"}, "edited": false, "score": 1, "creation_date": 1521659411, "post_id": 49414661, "comment_id": 85831114, "body": "@JohnDoe - Please re-read peoples comments - and think about them"}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": true, "score": 1, "last_activity_date": 1521659025, "creation_date": 1521659025, "answer_id": 49414661, "question_id": 49413930, "link": "https://stackoverflow.com/questions/49413930/how-do-i-implement-strcpy-function-in-c/49414661#49414661", "title": "How do I implement strcpy function in C++", "body": "<p>Other posters have posted implementations of <code>strcpy</code> - Why you are using this in C++ code? That is an interesting question as C++ very rarely uses C style strings</p>\n\n<p>The other problem is with its usage:</p>\n\n<pre><code>int main()\n{\n Persoana a;\n cout &lt;&lt; endl;\n cout&lt;&lt;a.my_strcpy(\"maria\",\"george\");\n\n return 0;\n}\n</code></pre>\n\n<p>The strings \"maria\" and \"george\" are read only. Instead create an empty read/ write string as shown below that is long enough - i.e. 7 characters (do not forget the null character)</p>\n\n<p>So the code should be</p>\n\n<pre><code>int main()\n{\n Persoana a;\n char copy_of_string[7];\n cout &lt;&lt; endl;\n cout&lt;&lt;a.my_strcpy(copy_of_string,\"george\");\n\n return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8398635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14725a2814cfc421ef7461c4a2c023a6?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/8398635/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1456, "favorite_count": 0, "accepted_answer_id": 49414661, "answer_count": 3, "score": -5, "last_activity_date": 1521659025, "creation_date": 1521656466, "last_edit_date": 1521658688, "question_id": 49413930, "link": "https://stackoverflow.com/questions/49413930/how-do-i-implement-strcpy-function-in-c", "title": "How do I implement strcpy function in C++", "body": "<p>So I have this header given to me</p>\n\n<pre><code>int mystrcpy(char *c, const char* s);\n</code></pre>\n\n<p>And I have to implement strcpy function myself. But when I do it and run the program, the console stops working, which I believe is a sign of memory address violation.</p>\n\n<p>I tried this:</p>\n\n<pre><code>int mystrcpy(char *c, const char* s)\n{\n    int i=0;\n    for(i=0;i&lt;strlen(s);i++)\n        c[i]=s[i];\n    c[++i]=NULL;\n    cout&lt;&lt;c;\n    return 0;\n}\n</code></pre>\n\n<p>Full code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cstring&gt;\nusing namespace std;\nclass Persoana\n{\n char *nume;\n int an;\n float inaltime;\npublic:\n int my_strcpy(char *c, const char*s);\n};\n\n\nint Persoana::my_strcpy(char *c, const char* s)\n{\n\n //code I need to insert\n\n return 0;\n}\n\nint main()\n{\n Persoana a;\n cout &lt;&lt; endl;\n cout&lt;&lt;a.my_strcpy(\"maria\",\"george\");\n\n return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "catch-unit-test"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1521656751, "post_id": 49413898, "comment_id": 85829575, "body": "what is the content of your cmake files?"}, {"owner": {"reputation": 2007, "user_id": 5834077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N7N3H.jpg?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5834077/carl"}, "edited": false, "score": 0, "creation_date": 1521657124, "post_id": 49413898, "comment_id": 85829771, "body": "Did you check out their minimal example <a href=\"https://github.com/catchorg/Catch2/blob/master/docs/build-systems.md\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1521657214, "post_id": 49413898, "comment_id": 85829818, "body": "Do your CMake files contain <code>include_directories(include)</code> anywhere? (Or at the minimum, a <code>target_include_directories()</code>)"}, {"owner": {"reputation": 3597, "user_id": 829496, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XXTbx.jpg?s=128&g=1", "display_name": "fronthem", "link": "https://stackoverflow.com/users/829496/fronthem"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1521657288, "post_id": 49413898, "comment_id": 85829860, "body": "@GuillaumeRacicot I&#39;m writing please wait. Carl not yet thanks."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1521657574, "post_id": 49413898, "comment_id": 85830001, "body": "For the second problem, you can do: <code>set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}&#47;bin)</code>. However, I would recommend that you do <i>not</i> do this, but rather keep executables in the directories where they were created."}, {"owner": {"reputation": 3597, "user_id": 829496, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XXTbx.jpg?s=128&g=1", "display_name": "fronthem", "link": "https://stackoverflow.com/users/829496/fronthem"}, "edited": false, "score": 0, "creation_date": 1521657734, "post_id": 49413898, "comment_id": 85830094, "body": "ok, I added my make files but I think they are totally wrong."}, {"owner": {"reputation": 1232, "user_id": 138553, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/NQ7Ru.jpg?s=128&g=1", "display_name": "IlliakaillI", "link": "https://stackoverflow.com/users/138553/illiakailli"}, "edited": false, "score": 0, "creation_date": 1536794212, "post_id": 49413898, "comment_id": 91556771, "body": "there is a bug: factorial of 0 expected to be 1, but current implementation will give you 0"}], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 5, "last_activity_date": 1521658413, "last_edit_date": 1592644375, "creation_date": 1521658109, "answer_id": 49414390, "question_id": 49413898, "link": "https://stackoverflow.com/questions/49413898/how-to-use-cmake-with-catch2/49414390#49414390", "title": "How to use CMake with Catch2?", "body": "<p>If you look at the CMake documentation, the <code>PROJECT_SOURCE_DIR</code> variable is define as that:</p>\n<blockquote>\n<p>Top level source directory for the current project.</p>\n<p>This is the source directory of the most recent project() command.</p>\n</blockquote>\n<p>Since you called <code>project</code> many times, that variable will constantly change. I would suggest you to remove your project directive,  or to use <code>CMAKE_SOURCE_DIR</code>, which always point to the source directory of the whole project.</p>\n<hr />\n<p>As a side note, I suggest to use <code>set(CMAKE_CXX_STANDARD 11)</code> instead of <code>add_definition</code></p>\n"}, {"comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 3, "creation_date": 1521658247, "post_id": 49414398, "comment_id": 85830426, "body": "How can you suggest someone to use <code>include_directories</code> instead of <code>target_include_directories</code> and sleep at night?"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1521658322, "post_id": 49414398, "comment_id": 85830473, "body": "@GuillaumeRacicot For this example, it isn&#39;t really necessary to specify includes on a target by target basis. However, I will add a note saying that <code>target_include_directories</code> is the better practice."}, {"owner": {"reputation": 3650, "user_id": 5387794, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7c76efa31a04b23c99d0b964a474491c?s=128&d=identicon&r=PG&f=1", "display_name": "kovac", "link": "https://stackoverflow.com/users/5387794/kovac"}, "edited": false, "score": 0, "creation_date": 1568549378, "post_id": 49414398, "comment_id": 102301843, "body": "&quot;The call should be using <code>add_library</code>&quot; and &quot;The file should be test_fact.cpp&quot; -  <code>add_library(fact fact.cpp)</code> and then <code>add_executable(fact test_fact.cpp)</code> raises CMake error: &quot;add_executable cannot create target &quot;fact&quot; because another   target with the same name already exists.&quot;. Did I misunderstand the suggestion?"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 3650, "user_id": 5387794, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7c76efa31a04b23c99d0b964a474491c?s=128&d=identicon&r=PG&f=1", "display_name": "kovac", "link": "https://stackoverflow.com/users/5387794/kovac"}, "edited": false, "score": 0, "creation_date": 1568561843, "post_id": 49414398, "comment_id": 102304703, "body": "@swdon You&#39;re correct, I didn&#39;t realize I specified 2 targets with the same name, they should have been different."}], "tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": true, "score": 4, "last_activity_date": 1568561818, "last_edit_date": 1568561818, "creation_date": 1521658126, "answer_id": 49414398, "question_id": 49413898, "link": "https://stackoverflow.com/questions/49413898/how-to-use-cmake-with-catch2/49414398#49414398", "title": "How to use CMake with Catch2?", "body": "<p>Many problems here:</p>\n\n<pre><code>add_executable(fact fact.cpp)\n</code></pre>\n\n<p>The call should be using <code>add_library</code> (You could also specify <code>STATIC</code> or <code>SHARED</code>), since you are only defining a factorial function, not an executable <em>with a <code>main</code> function</em>.</p>\n\n<pre><code>add_executable(fact fact.cpp)\n</code></pre>\n\n<p>The file should be <code>test_fact.cpp</code> and the target should have a different name to avoid conflict with the previous library you created. Also, your <code>fact.cpp</code> doesn't include <code>fact.hpp</code>. Last but not least, instead of doing <code>target_include_directories</code>, just write the following in your top-level <code>CMakeLists.txt</code>:</p>\n\n<pre><code>include_directories(include)\n</code></pre>\n\n<p>Now, all subdirectories should be able to access the header files. Beware that this removes control of the scoping of the header files (<code>PRIVATE</code> vs <code>PUBLIC</code> vs <code>INTERFACE</code>) and allows <em>all</em> subdirectories to access the header files. If you want to restrict this behavior, then use <code>target_include_direcories</code> for all targets (Your library and the test executable). For this example, since everything needs to access the header files, there is no problem with the statement above.</p>\n\n<p>More problems:</p>\n\n<pre><code>project(factorial)\ncmake_minimum_required(VERSION 2.8.12)\n</code></pre>\n\n<p>Either switch the order of these statements, or remove both of them. (You only need them in your top level CMake file)</p>\n"}], "owner": {"reputation": 3597, "user_id": 829496, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XXTbx.jpg?s=128&g=1", "display_name": "fronthem", "link": "https://stackoverflow.com/users/829496/fronthem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9902, "favorite_count": 2, "accepted_answer_id": 49414398, "answer_count": 2, "score": 9, "last_activity_date": 1568561818, "creation_date": 1521656374, "last_edit_date": 1521658040, "question_id": 49413898, "link": "https://stackoverflow.com/questions/49413898/how-to-use-cmake-with-catch2", "title": "How to use CMake with Catch2?", "body": "<p>From <a href=\"https://github.com/catchorg/Catch2/blob/master/docs/tutorial.md#writing-tests\" rel=\"noreferrer\">Catch2's example</a>, I tried to run this example with <code>cmake</code> where structure of my project is like this:</p>\n\n<pre><code>/factorial\n    +-- CMakeLists.txt\n    +-- /bin\n    +-- /include\n    |     +-- catch.hpp\n    |     +-- fact.hpp \n    +-- /src\n    |     +-- CMakeLists.txt\n    |    +-- fact.cpp\n    +-- /test\n         +-- CMakeLists.txt\n         +-- test_fact.cpp\n</code></pre>\n\n<p><code>fact.cpp</code>:</p>\n\n<pre><code>unsigned int factorial( unsigned int number ) {\n    return number &lt;= 1 ? number : factorial(number-1)*number;\n}\n</code></pre>\n\n<p><code>fact.hpp</code>:</p>\n\n<pre><code>#ifndef FACT_H\n#define FACT_H\n\nunsigned int factorial(unsigned int);\n\n#endif\n</code></pre>\n\n<p><code>test_fact.cpp</code>:</p>\n\n<pre><code>#define CATCH_CONFIG_MAIN\n#include \"catch.hpp\"\n#include \"fact.hpp\"\n\nTEST_CASE( \"factorials are computed\", \"[factorial]\" ) {\n    REQUIRE( factorial(1) == 1 );\n    REQUIRE( factorial(2) == 2 );\n    REQUIRE( factorial(3) == 6 );\n    REQUIRE( factorial(10) == 3628800 );\n}\n</code></pre>\n\n<p>I tried several ways already to build this project with <code>cmake</code> but it's failed. Sometimes I got an error:</p>\n\n<pre><code>cpp:X:XX: fatal error: 'fact.hpp' file not found\n...\n</code></pre>\n\n<p>and sometimes I got:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"_main\", referenced from:\n...\n</code></pre>\n\n<p>when I run <code>make</code>.</p>\n\n<p>What should I have in <code>factorial/CMakeLists.txt</code>,<code>factorial/src/CMakeLists.txt</code> and <code>factorial/test/CMakeLists.txt</code>, if I want to have my execution files in <code>factorial/bin</code>?</p>\n\n<p>Additional:\nThis is my CMakeLists.txts (I think they are completely wrong).</p>\n\n<p><code>factorial/CMakeLists.txt</code>:</p>\n\n<pre><code>project(factorial)\ncmake_minimum_required(VERSION 2.8.12)\n\nadd_definitions(\"-std=c++11\")\nset(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin)\n\nadd_subdirectory(src)\nadd_subdirectory(test)\n</code></pre>\n\n<p><code>factorial/src/CMakeLists.txt</code>:</p>\n\n<pre><code>project(factorial)\ncmake_minimum_required(VERSION 2.8.12)\n\nadd_executable(fact fact.cpp)\n</code></pre>\n\n<p><code>factorial/test/CMakeLists.txt</code>:</p>\n\n<pre><code>project(factorial)\ncmake_minimum_required(VERSION 2.8.12)\n\nadd_executable(test_fact test_fact.cpp)\ntarget_include_directories(test_fact PRIVATE ${CMAKE_SOURCE_DIR}/include)\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2010", "opengl", "glfw"], "comments": [{"owner": {"reputation": 23, "user_id": 7232498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1hRyxtFH7aw/AAAAAAAAAAI/AAAAAAAAACs/SjSNEQvZTD8/photo.jpg?sz=128", "display_name": "Konstantinos Moulakis", "link": "https://stackoverflow.com/users/7232498/konstantinos-moulakis"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1521657588, "post_id": 49413883, "comment_id": 85830010, "body": "@Rabbid76 i did that and again only shows one triangle but now is the other color"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7232498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1hRyxtFH7aw/AAAAAAAAAAI/AAAAAAAAACs/SjSNEQvZTD8/photo.jpg?sz=128", "display_name": "Konstantinos Moulakis", "link": "https://stackoverflow.com/users/7232498/konstantinos-moulakis"}, "edited": false, "score": 0, "creation_date": 1521658462, "post_id": 49414340, "comment_id": 85830564, "body": "@ Rabbid76 yes it only change the color of the triangle to the color of the fragment that i fix"}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1521661905, "last_edit_date": 1521661905, "creation_date": 1521657942, "answer_id": 49414340, "question_id": 49413883, "link": "https://stackoverflow.com/questions/49413883/opengl-two-different-triangles-with-two-shader-programs/49414340#49414340", "title": "Opengl two different triangles with two shader programs", "body": "<p>The 2nd vertex shader and fragment shader won't compile, because <code>gl_Position1</code> and <code>gl_FragColor1</code> are not valid output variables. You have to use <code>gl_Position</code> and <code>gl_FragColor</code>. See <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Shader\" rel=\"nofollow noreferrer\">Vertex Shader</a> and <a href=\"https://www.khronos.org/opengl/wiki/Fragment_Shader\" rel=\"nofollow noreferrer\">Fragment Shader</a></p>\n\n<pre><code>const char* vertex_shader1 = \n\"#version 110 \\n\"\n\"attribute vec3 in_position; \\n\"\n\"void main() \\n\"\n\"{ \\n\"\n\"     gl_Position = vec4(in_position.x, in_position.y, in_position.z, 1.0);\\n\"\n\"} \\n\";\n\nconst char* fragment_shader1 = \n\"#version 110 \\n\"\n\"void main (void) \\n\"\n\"{ \\n\"\n\"     gl_FragColor = vec4(0.4,0.7,0.3, 1.0); \\n\"\n\"} \\n\";\n</code></pre>\n\n<p>I recommend to use <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glGetShader.xhtml\" rel=\"nofollow noreferrer\"><code>glGetShaderiv</code></a> to verify if the shader code was compiled successfully.</p>\n\n<p>e.g.</p>\n\n<pre><code>GLint status;\nglGetShaderiv(vertex_shader1, GL_COMPILE_STATUS, &amp;status);\n</code></pre>\n\n<p>By calling <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/es2.0/xhtml/glGetProgramiv.xml\" rel=\"nofollow noreferrer\"><code>glGetProgramiv</code></a> with the parameter <code>GL_LINK_STATUS</code> check if linking the program succeeded.</p>\n\n<p><br/>\nYou have 2 vertex buffers with each 3 vertices, so you have to call <code>glDrawArrays(GL_TRIANGLES, 0, 3);</code> twice and not one time <code>glDrawArrays(GL_TRIANGLES, 0, 6);</code>.<br/>\nBind the buffer, define and enable the array of generic vertex attribute data and then draw the triangle:</p>\n\n<pre><code>glUseProgram(shaderProgram);\n\nglBindBuffer(GL_ARRAY_BUFFER, triangle_vbo); //bind the VBO\nGLint in_pos = glGetAttribLocation(shaderProgram, \"in_position\");\nglVertexAttribPointer(in_pos, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GL_FLOAT), (void*)0);\nglEnableVertexAttribArray(in_pos); \nglDrawArrays(GL_TRIANGLES, 0, 3); //draw the 1st triangle\n\nglUseProgram(shaderProgram1);\n\nglBindBuffer(GL_ARRAY_BUFFER, triangle_vbo1);\nGLint in_pos1 = glGetAttribLocation(shaderProgram1, \"in_position\");\nglVertexAttribPointer(in_pos1, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GL_FLOAT), (void*)0);\nglEnableVertexAttribArray(in_pos1);\nglDrawArrays(GL_TRIANGLES, 0, 3); //draw the 2nd triangle\n</code></pre>\n\n<p>See the preview:\n<a href=\"https://i.stack.imgur.com/thiX7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/thiX7.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 23, "user_id": 7232498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1hRyxtFH7aw/AAAAAAAAAAI/AAAAAAAAACs/SjSNEQvZTD8/photo.jpg?sz=128", "display_name": "Konstantinos Moulakis", "link": "https://stackoverflow.com/users/7232498/konstantinos-moulakis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 49414340, "answer_count": 1, "score": 1, "last_activity_date": 1521668705, "creation_date": 1521656332, "last_edit_date": 1521668705, "question_id": 49413883, "link": "https://stackoverflow.com/questions/49413883/opengl-two-different-triangles-with-two-shader-programs", "title": "Opengl two different triangles with two shader programs", "body": "<p>I want to create 2 triangles with different colors that they change to wireframe mode when I press \"Tab\" my problem is that I have two VBO and two shaders programs but it only compile one triangle </p>\n\n<pre><code>    #include &lt;GL\\glew.h&gt;\n#include &lt;GLFW\\glfw3.h&gt;\n#include &lt;iostream&gt;\n\nbool flag;\nvoid framebuffer_size_callback(GLFWwindow* window, int width, int height);\nvoid processInput(GLFWwindow *window);\n\nconst char* vertex_shader = \n\"#version 110 \\n\"\n\"attribute vec3 in_position; \\n\"\n\"void main() \\n\"\n\"{ \\n\"\n\"     gl_Position = vec4(in_position.x, in_position.y, in_position.z, 1.0);\\n\"\n\"} \\n\";\n\n\nconst char* fragment_shader = \n\"#version 110 \\n\"\n\"void main (void) \\n\"\n\"{ \\n\"\n\"     gl_FragColor = vec4(0.7,0.3,0.3, 1.0); \\n\"\n\"} \\n\";\n\nconst char* vertex_shader1 = \n\"#version 110 \\n\"\n\"attribute vec3 in_position; \\n\"\n\"void main() \\n\"\n\"{ \\n\"\n\"     gl_Position1 = vec4(in_position.x, in_position.y, in_position.z, 1.0);\\n\"\n\"} \\n\";\n\n\nconst char* fragment_shader1 = \n\"#version 110 \\n\"\n\"void main (void) \\n\"\n\"{ \\n\"\n\"     gl_FragColor1 = vec4(0.4,0.7,0.3, 1.0); \\n\"\n\"} \\n\";\n\n\nint main()\n{\n    //Initialize GLFW\n    if (!glfwInit()) //if GLFW is not initialized correctly, exit\n    {\n        std::cout &lt;&lt; \"Failed to initialize GLFW\" &lt;&lt; std::endl;\n        return -1;\n    }\n\n    //Create the window\n    GLFWwindow* window = glfwCreateWindow(800, 600, \"LearnOpenGL\", NULL, NULL);\n    if (window == NULL) //if the window was not created correctly, exit\n    { \n        std::cout &lt;&lt; \"Failed to create GLFW window\" &lt;&lt; std::endl;\n        glfwTerminate();\n        return -1;\n    }\n\n    //Specify OpenGL version\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 2);\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 0);\n\n    //Make the context that was created the current one\n    glfwMakeContextCurrent(window);\n\n    //Initialize GLEW\n    if (glewInit() != GLEW_OK) //if GLEW was not initialized correctly, exit\n    { \n        std::cout &lt;&lt; \"Failed to initialize GLEW\" &lt;&lt; std::endl;\n        glfwTerminate();\n        return -1;\n    }  \n\n    //Set the viewport size changing function\n    glfwSetFramebufferSizeCallback(window, framebuffer_size_callback); \n\n\n\n    //Rectangle vertices, to uncomment select the area and press Ctr+K,Ctr+U\n    float vertices[] = \n    { \n        // first triangle \n        0.55f, 0.5f, 0.0f,     // top right \n        0.55f, -0.5f, 0.0f,   // bottom right\n        -0.45f, 0.5f, 0.0f,  // top left \n\n    }; \n\n    float vertices1[] = \n    { \n\n        // second triangle \n        0.45f, -0.5f, 0.0f,   // bottom right \n        -0.55f, -0.5f, 0.0f, // bottom left\n        -0.55f, 0.5f, 0.0f  // top left \n    }; \n\n\n    //Create the triangle VBO\n    GLuint triangle_vbo;\n    glGenBuffers(1, &amp;triangle_vbo); //generate a unique\u00a0buffer ID \n    glBindBuffer(GL_ARRAY_BUFFER, triangle_vbo); //bind the VBO to the context\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);//copy user-defined data into the currently bound buffer\n    glBindBuffer(GL_ARRAY_BUFFER, 0); //unbind the VBO\n\n    //Create a vertex shader object\n    GLuint vertexShader; \n    vertexShader = glCreateShader(GL_VERTEX_SHADER); //ID of the shader object\n    glShaderSource(vertexShader, 1, &amp;vertex_shader, NULL); //attach the shader source code to the shader object\n    glCompileShader(vertexShader);//compile the shader\n\n    //Create a fragment shader object\n    GLuint fragmentShader;\n    fragmentShader  = glCreateShader(GL_FRAGMENT_SHADER);\n    glShaderSource(fragmentShader, 1, &amp;fragment_shader, NULL);\n    glCompileShader(fragmentShader);\n\n    //Create a shader program object\n    GLuint shaderProgram; \n    shaderProgram = glCreateProgram(); //create the program ID\n    glAttachShader(shaderProgram, vertexShader); //attach the shaders to the program\n    glAttachShader(shaderProgram, fragmentShader);\n    glLinkProgram(shaderProgram); // link the program\n\n    //Delete the vertex andd fragment shader objects\n    glDeleteShader(vertexShader);\n    glDeleteShader(fragmentShader);\n\n    //Create the triangle VBO\n    GLuint triangle_vbo1;\n    glGenBuffers(1, &amp;triangle_vbo1); //generate a unique\u00a0buffer ID \n    glBindBuffer(GL_ARRAY_BUFFER, triangle_vbo1); //bind the VBO to the context\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices1), vertices1, GL_STATIC_DRAW);//copy user-defined data into the currently bound buffer\n    glBindBuffer(GL_ARRAY_BUFFER, 0); //unbind the VBO\n\n    //Create a vertex shader object\n    GLuint vertexShader1; \n    vertexShader1 = glCreateShader(GL_VERTEX_SHADER); //ID of the shader object\n    glShaderSource(vertexShader1, 1, &amp;vertex_shader1, NULL); //attach the shader source code to the shader object\n    glCompileShader(vertexShader1);//compile the shader\n\n    //Create a fragment shader object\n    GLuint fragmentShader1;\n    fragmentShader1  = glCreateShader(GL_FRAGMENT_SHADER);\n    glShaderSource(fragmentShader1, 1, &amp;fragment_shader1, NULL);\n    glCompileShader(fragmentShader1);\n\n    //Create a shader program object\n    GLuint shaderProgram1; \n    shaderProgram1 = glCreateProgram(); //create the program ID\n    glAttachShader(shaderProgram1, vertexShader1); //attach the shaders to the program\n    glAttachShader(shaderProgram1, fragmentShader1);\n    glLinkProgram(shaderProgram1); // link the program\n\n    //Delete the vertex andd fragment shader objects\n    glDeleteShader(vertexShader1);\n    glDeleteShader(fragmentShader1);\n\n\n    //Rendering loop\n    while(!glfwWindowShouldClose(window))\n    {\n        //Process input\n        processInput(window);\n\n        //Clear the buffers\n        glClearColor(1.0f, 1.0f, 1.0f, 1.0f); //dark green\n        //glClearColor(0.5f, 0.0f, 0.0f, 1.0f); //maroon\n        glClear(GL_COLOR_BUFFER_BIT);\n\n            if(flag==true)\n{\n                glPolygonMode( GL_FRONT_AND_BACK, GL_LINE );\n            }\n            else glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);\n\n\n        //Render objects...\n        glUseProgram(shaderProgram); //use a shader program\n\n        glBindBuffer(GL_ARRAY_BUFFER, triangle_vbo); //bind the VBO\n\n        //tell OpenGL how to read and assign the VBO to the attribute\n        GLint in_pos = glGetAttribLocation(shaderProgram, \"in_position\");\n        glVertexAttribPointer(in_pos, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GL_FLOAT), (void*)0);\n        glEnableVertexAttribArray(in_pos); \n\n        glUseProgram(shaderProgram);\n        glUseProgram(shaderProgram1);\n\n        glBindBuffer(GL_ARRAY_BUFFER, triangle_vbo1);\n\n        GLint in_pos1 = glGetAttribLocation(shaderProgram1, \"in_position\");\n        glVertexAttribPointer(in_pos1, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GL_FLOAT), (void*)0);\n        glEnableVertexAttribArray(in_pos1);\n\n        glDrawArrays(GL_TRIANGLES, 0, 6); //draw the triangle\n\n\n        //Swap buffers and poll IO events (keys pressed/released, mouse moved etc.)\n        glfwSwapBuffers(window);\n        glfwPollEvents();    \n    }\n\n    //Terminate GLFW before exit\n    glfwTerminate();\n    return 0;\n}\n\n\n//Viewport size changing function\nvoid framebuffer_size_callback(GLFWwindow* window, int width, int height)\n{\n    glViewport(0, 0, width, height);\n}  \n\n//Input\nvoid processInput(GLFWwindow *window)\n{\n    if(glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)\n        glfwSetWindowShouldClose(window, true);\n\n    if(glfwGetKey(window, GLFW_KEY_TAB) == GLFW_PRESS)\n        flag=true;\n    else flag=false;\n}\n</code></pre>\n\n<p>The Tab switch changes to wireframe mode as I long keep pressing the \"Tab\". I want to change only with one click and when click again to change to default </p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1521655795, "post_id": 49413726, "comment_id": 85829021, "body": "What the heck is this <code>b++;    b++;    b++;   ...</code> code ??"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 2, "creation_date": 1521656052, "post_id": 49413726, "comment_id": 85829173, "body": "I have literally no idea what&#39;s going on here."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1521656138, "post_id": 49413726, "comment_id": 85829228, "body": "Translated into English, <code>int a,b,c,d,e,f,g,h,i,k,A,B,C,D,E,F,G;</code> means &quot;I need an array.&quot;"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1521656281, "post_id": 49413726, "comment_id": 85829309, "body": "<code>b += 746</code> is an idea that comes to mind instead of this whole <code>b++; b++; ...</code> thing."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1521656495, "post_id": 49413726, "comment_id": 85829436, "body": "Why don&#39;t you just stick them in a <code>std::map&lt;int, int&gt;</code> where the index is the random number generated and the value is a count you increase every time you get that number. Then getting the counts is just a matter of iterating the map and printing out the key:value pairs..? Btw; <code>srand</code>/<code>rand</code> produce horribly bad quality random numbers. Use the stuff from the <code>&lt;random&gt;</code> header instead."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1521656504, "post_id": 49413726, "comment_id": 85829443, "body": "You should not be calling <code>srand(time(NULL))</code> on every loop iteration.  Call it ONLY ONCE at program startup instead."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521656534, "post_id": 49413726, "comment_id": 85829467, "body": "I think you may be overthinking this. You need to count the the frequency of a large number of randomly generated number, yes?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1521656627, "post_id": 49413726, "comment_id": 85829509, "body": "@OP --  Honestly, this can be done in around 5 lines using a <code>std::map&lt;int, int&gt;</code>, and without all of those variables that boggle the mind."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1521656677, "last_edit_date": 1521656677, "creation_date": 1521656282, "answer_id": 49413865, "question_id": 49413726, "link": "https://stackoverflow.com/questions/49413726/c-moving-generated-numbers-into-a-string/49413865#49413865", "title": "C++ - Moving generated numbers into a string", "body": "<blockquote>\n  <p>and i need to know how many times does 0 appear, 1, 2...</p>\n</blockquote>\n\n<p>And to achieve that you should not store all numbers into one huge string, but you better have <code>int</code> array with 10 elements (one counter for each digit) and increase each accordingly when new number generated - at the end you have all your counters:</p>\n\n<pre><code>std::vector&lt;int&gt; counters( 10 );\n...\nfor( auto c : std::to_string( G ) )\n    ++counters[ c - '0' ];\n\n// at the end all counters in the vector\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1521656771, "last_edit_date": 1521656771, "creation_date": 1521656364, "answer_id": 49413893, "question_id": 49413726, "link": "https://stackoverflow.com/questions/49413726/c-moving-generated-numbers-into-a-string/49413893#49413893", "title": "C++ - Moving generated numbers into a string", "body": "<blockquote>\n  <p>if a ask to turn G into a string, Im going to have a string of the very last number assigned to G, and not of all of them</p>\n</blockquote>\n\n<p>Simply declare a separate <code>std::string</code> variable that your loop can append to each time a new number is assigned to <code>G</code>, eg:</p>\n\n<pre><code>std::string everything;\n...\nG = ...;\neverything += std::to_string(G);\n...\n</code></pre>\n\n<p>Then after the loop is finished, you can loop through <code>everything</code> counting the characters as needed.</p>\n\n<p>Or, consider using a <code>std::map</code> keyed by digit chars, and let it handle the counting for you:</p>\n\n<pre><code>std::map&lt;char, int&gt; counter;\n...\nG = ...;\nfor (char ch : std::to_string(G))\n    counter[ch]++;\n...\n</code></pre>\n\n<p>Or, just use a fixed array indexed by digits:</p>\n\n<pre><code>int counter[10];\n...\nG = ...;\nfor (char ch : std::to_string(G))\n    counter[ch-'0']++;\n...\n</code></pre>\n\n<p>Either way, after the loop is finished, you can then loop through <code>counter</code> to retrieve the counts of each digit.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1521657053, "post_id": 49413915, "comment_id": 85829737, "body": "Why on earth is your answer code still calling <code>srand</code> and <code>rand</code>? What&#39;s wrong with <code>std::random_device</code>? Also; <i>please</i> don&#39;t use <code>std::default_random_engine</code> - <i>ever</i> - you don&#39;t know what it will be and it may be just as bad as <code>rand()</code> - name the engine you want explicitly - most likely <code>std::mt19937</code> or <code>std::19937_64</code>."}, {"owner": {"reputation": 307, "user_id": 5948236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c66d6a1631e6d23b639b7353aaa7c83?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Bohmbach", "link": "https://stackoverflow.com/users/5948236/steve-bohmbach"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1521657857, "post_id": 49413915, "comment_id": 85830170, "body": "Because i have limited C++ experience and was attempting to solve the problem that was given by the user. If he wants an entire code review, that is great. But thats not what i was trying to do, nor is it what was requested. I could be wrong, but i think he asked how to get all the numbers into one large string......"}], "tags": [], "owner": {"reputation": 307, "user_id": 5948236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c66d6a1631e6d23b639b7353aaa7c83?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Bohmbach", "link": "https://stackoverflow.com/users/5948236/steve-bohmbach"}, "is_accepted": false, "score": -2, "last_activity_date": 1521656426, "creation_date": 1521656426, "answer_id": 49413915, "question_id": 49413726, "link": "https://stackoverflow.com/questions/49413726/c-moving-generated-numbers-into-a-string/49413915#49413915", "title": "C++ - Moving generated numbers into a string", "body": "<p>you need to have a variable living out side of your function that you can append to every time the loop runs. when the loop finishes than you will have all of the content stored inside of that str: variable </p>\n\n<pre><code>    int a,b,c,d,e,f,g,h,i,k,A,B,C,D,E,F,G;\n\nsrand(time(NULL));\nint seed = rand();\ndefault_random_engine ran { static_cast &lt;int&gt;( chrono::high_resolution_clock::now().time_since_epoch().count())};\ndefault_random_engine ran_2 { static_cast &lt;int&gt;( chrono::high_resolution_clock::now().time_since_epoch().count())};\nuniform_int_distribution &lt;int&gt; range {1,50};\n\na=range (ran);\nb = 2;\nc = 107;\nd = 109;\ne = 113;\nf = 167;\ng = 173;\nh = 587;\ni = 13; \nstd::string str;\nfor ( k=0; k &lt; 100000; k++) {\n\nsrand(time(NULL));\nint seed = rand();\ndefault_random_engine ran { static_cast &lt;int&gt;( chrono::high_resolution_clock::now().time_since_epoch().count())};\ndefault_random_engine ran_2 { static_cast &lt;int&gt;( chrono::high_resolution_clock::now().time_since_epoch().count())};\n    uniform_int_distribution &lt;int&gt; range {1,50};\na=range (ran);\n\nb++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;\nc++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;\nd++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;\ne++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;\nf++;    f++;\ng--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;\nh--;    h--;    h--;    h--;    h--;    h--;    h--;    h--;    h--;    h--;    h--;\ni--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;\n   A= (a*b*c*f);\n   B= ((A^13)/d*h-i^a);\n   C= (A*B^i-b*h*g*e*a);\n   D= (b+c+d+e+f+g+h+i)*a;\n   E= ((a*A*B*C*D)/100000000);\n   F= E % 10;\n   if ( F &lt; 0 ) { G = F*(-1); } else { G = F; }\n\n   cout &lt;&lt; G;\n   str.append(G)\n}\n\ncout &lt;&lt; str;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521657655, "post_id": 49414176, "comment_id": 85830050, "body": "In the asker&#39;s case the generated numbers appear to be [1,50]. This makes a map overkill. A simple 50 element array will do the job."}, {"owner": {"reputation": 603, "user_id": 4128181, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002109318213/picture?type=large", "display_name": "Vicctor", "link": "https://stackoverflow.com/users/4128181/vicctor"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521658168, "post_id": 49414176, "comment_id": 85830383, "body": "Right. That&#39; s depends on the range of probes. In case of small amount of probes simple array is enou."}], "tags": [], "owner": {"reputation": 603, "user_id": 4128181, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002109318213/picture?type=large", "display_name": "Vicctor", "link": "https://stackoverflow.com/users/4128181/vicctor"}, "is_accepted": false, "score": 0, "last_activity_date": 1521657328, "creation_date": 1521657328, "answer_id": 49414176, "question_id": 49413726, "link": "https://stackoverflow.com/questions/49413726/c-moving-generated-numbers-into-a-string/49414176#49414176", "title": "C++ - Moving generated numbers into a string", "body": "<p>I don't know how to do that with strings but hashmap should help here (see below); The cons of this is the mem consumption. With a large number of probes and really random values, you can end up with memory allocation problem.</p>\n\n<pre><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;unordered_map&gt;\n#include &lt;map&gt;\n\nint main()\n{\n  std::unordered_map&lt;int, int&gt; histogram;\n  std::unordered_map&lt;int, int&gt;::iterator it;\n\n  for (int i = 0; i &lt; 1000; i++) {\n      int v = rand();\n      if (histogram.find(v) == histogram.end()) {\n          histogram[v] = 0;\n      }\n      histogram[v]++;\n  }\n\n for (it = histogram.begin(); it != histogram.end(); it++ ) {\n        std::cout &lt;&lt; \"VALUE:\" &lt;&lt; it-&gt;first  // number\n              &lt;&lt; \"\\t FREQ:\"\n              &lt;&lt; it-&gt;second   // frequency\n              &lt;&lt; std::endl ;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 9430314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AU4Mz.jpg?s=128&g=1", "display_name": "CH4B", "link": "https://stackoverflow.com/users/9430314/ch4b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1521658063, "accepted_answer_id": 49413893, "answer_count": 4, "score": -4, "last_activity_date": 1521657328, "creation_date": 1521655758, "question_id": 49413726, "link": "https://stackoverflow.com/questions/49413726/c-moving-generated-numbers-into-a-string", "closed_reason": "Needs details or clarity", "title": "C++ - Moving generated numbers into a string", "body": "<p>I have a code that generates some numbers, and now I need to count how frequent they are. For example, the code will generate 100000 numbers, and i need to know how many times does 0 appear, 1, 2... I know that this can be done with strings, but im having a problem turning those values into one big string.\nYou see, all the generated numbers will be the same variable G, so if a ask to turn G into a string, Im going to have a string of the very last number assigned to G, and not of all of them, that is beacuse the variable G changes value each time its printed, because it is inside a loop. is there any way for me to move ALL the printed values into one big string? (If 100000 is too much for a string, i can generate less numbers with little problem)</p>\n\n<p>This is the code</p>\n\n<pre><code>int a,b,c,d,e,f,g,h,i,k,A,B,C,D,E,F,G;\n\nsrand(time(NULL));\nint seed = rand();\ndefault_random_engine ran { static_cast &lt;int&gt;( chrono::high_resolution_clock::now().time_since_epoch().count())};\ndefault_random_engine ran_2 { static_cast &lt;int&gt;( chrono::high_resolution_clock::now().time_since_epoch().count())};\nuniform_int_distribution &lt;int&gt; range {1,50};\n\na=range (ran);\nb = 2;\nc = 107;\nd = 109;\ne = 113;\nf = 167;\ng = 173;\nh = 587;\ni = 13; \n\nfor ( k=0; k &lt; 100000; k++) {\n\n    srand(time(NULL));\n    int seed = rand();\n    default_random_engine ran { static_cast &lt;int&gt;( chrono::high_resolution_clock::now().time_since_epoch().count())};\n    default_random_engine ran_2 { static_cast &lt;int&gt;( chrono::high_resolution_clock::now().time_since_epoch().count())};\n        uniform_int_distribution &lt;int&gt; range {1,50};\n    a=range (ran);\n\nb++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;    b++;\nc++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;    c++;\nd++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;    d++;\ne++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;    e++;\nf++;    f++;\ng--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;   g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;    g--;\nh--;    h--;    h--;    h--;    h--;    h--;    h--;    h--;    h--;    h--;    h--;\ni--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;    i--;\n\n       A= (a*b*c*f);\n       B= ((A^13)/d*h-i^a);\n       C= (A*B^i-b*h*g*e*a);\n       D= (b+c+d+e+f+g+h+i)*a;\n       E= ((a*A*B*C*D)/100000000);\n       F= E % 10;\n       if ( F &lt; 0 ) { G = F*(-1); } else { G = F; }\n\n       cout &lt;&lt; G;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Thank you very much! :) Have a great day</p>\n"}, {"tags": ["c++", "c++11", "openwrt"], "comments": [{"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1521657051, "post_id": 49413463, "comment_id": 85829736, "body": "What standard library (including version) are you using? If it&#39;s old enough, it might not have <code>to_string</code> in it. In that case, changing the Makefile won&#39;t help."}, {"owner": {"reputation": 11, "user_id": 8899943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f122205f19b5a3f9ae377c7c436116?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub J.", "link": "https://stackoverflow.com/users/8899943/jakub-j"}, "reply_to_user": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1521659053, "post_id": 49413463, "comment_id": 85830923, "body": "You mean version of g++? I am using g++ version 5.4.0."}], "answers": [{"tags": [], "owner": {"reputation": 2997, "user_id": 2285202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bccd329fe99ef1b3d24a3eb82523e045?s=128&d=identicon&r=PG", "display_name": "Anton Glukhov", "link": "https://stackoverflow.com/users/2285202/anton-glukhov"}, "is_accepted": false, "score": 1, "last_activity_date": 1521718008, "creation_date": 1521718008, "answer_id": 49427469, "question_id": 49413463, "link": "https://stackoverflow.com/questions/49413463/crosscompile-for-openwrt-with-c11-flag/49427469#49427469", "title": "Crosscompile for OpenWRT with c++11 flag", "body": "<p>Depends on GCC version and STD lib version. I can confirm that the last version from upstream works perfectly. Here is my <em>test</em> Makefile which may help you and give you some clues.</p>\n\n<pre><code>CXX=/media/build/openwrt/staging_dir/toolchain-arm_cortex-a7+neon-vfpv4_gcc-5.5.0_musl_eabi/bin/arm-openwrt-linux-g++\n\nRM=rm -f\nLDLIBS=\nCPPFLAGS=-Wall -std=c++11\nLDFLAGS=-L/media/build/openwrt/staging_dir/target-arm_cortex-a7+neon-vfpv4_musl_eabi/usr/lib\nINC=-I. -I/media/build/openwrt/staging_dir/target-arm_cortex-a7+neon-vfpv4_musl_eabi/usr/include\n\n\nSOURCES=main.cpp\nOBJECTS=$(SOURCES:.cpp=.o)\nEXECUTABLE = hello\n\nall: $(OBJECTS) $(EXECUTABLE)\n\n$(EXECUTABLE): $(OBJECTS)\n    $(CXX) -o $@ $^ $(LDFLAGS) $(LDLIBS)\n\n.cpp.o:\n    $(CXX) $(INC) $(CPPFLAGS) -c $&lt;\n\nclean:\n    $(RM) $(OBJECTS)\n\ndistclean: clean\n    $(RM) $(EXECUTABLE)\n\n.PHONY: all clean distclean\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8899943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f122205f19b5a3f9ae377c7c436116?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub J.", "link": "https://stackoverflow.com/users/8899943/jakub-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521718008, "creation_date": 1521654854, "question_id": 49413463, "link": "https://stackoverflow.com/questions/49413463/crosscompile-for-openwrt-with-c11-flag", "title": "Crosscompile for OpenWRT with c++11 flag", "body": "<p>I am new in OpenWRT and I need to crosscompile c++ program. The problem is, I am still getting this error:</p>\n\n<pre><code>error: 'to_string' is not a member of 'std'\n  \"duplicate raw value \" + std::to_string(it-&gt;first));\n                           ^\n</code></pre>\n\n<p>Now I know, it's problem, that there isn't used c++11 flag during compilation. I tried to add TARGET_CXXFLAGS into Makefile, but it didn't help me. </p>\n\n<p>Here is the Makefile:</p>\n\n<pre><code>include $(TOPDIR)/rules.mk\n\nPKG_NAME:=gateway\nPKG_VERSION:=1.0\nPKG_RELEASE:=2\nINIT_SCRIPT_NAME:=$(PKG_NAME)\n\nPKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.xz\nPKG_SOURCE_SUBDIR:=$(PKG_NAME)-$(PKG_VERSION)\nPKG_BUILD_DIR:=$(BUILD_DIR)/$(PKG_NAME)-$(PKG_VERSION)\nPKG_SOURCE_PROTO:=git\nPKG_BUILD_DEPENDS:=+libmosquittopp +poco +zmq +cppzmq +openzwave +cppunit +bluez-libs\nPKG_SOURCE_URL:=....\nPKG_SOURCE_VERSION:=...\n\nCMAKE_INSTALL:=1\n\ninclude $(INCLUDE_DIR)/package.mk\ninclude $(INCLUDE_DIR)/cmake.mk\n\nCMAKE_OPTIONS += \\\n    -DCMAKE_INSTALL_PREFIX=/ \\\n    -DCMAKE_BUILD_TYPE:STRING=Release\n\nTARGET_CXXFLAGS += -DPOCO_NO_FPENVIRONMENT \nTARGET_CXXFLAGS += -g -std=c++11 -Wall -pedantic\n\n....\n</code></pre>\n\n<p>Thank you for your advice, Jakub.</p>\n"}, {"tags": ["c++", "enums"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1521654540, "post_id": 49413317, "comment_id": 85828315, "body": "<code>SUN</code> is not a reference to a <code>day</code> value. You can&#39;t set the default value of some pointer to be anything other than a pointer to the same type, and you can&#39;t set the default value of a reference to something that&#39;s not a reference (setting aside <code>const</code>-qualifiers, for now)."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1521654549, "post_id": 49413317, "comment_id": 85828320, "body": "Exactly what the error says. What exactly do you have trouble with?"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 1, "creation_date": 1521654572, "post_id": 49413317, "comment_id": 85828336, "body": "<code>void isWeekend(day const &amp;dayOfWeek=SUN);</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1521654602, "post_id": 49413317, "comment_id": 85828349, "body": "@SamVarshavchik are you positive that you can&#39;t initialize a reference with a non-reference? Because there&#39;s quite the chicken-and-egg problem then ;)"}, {"owner": {"reputation": 29, "user_id": 4093930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4911f6c81d96a850b1b7d7e33e4bfeba?s=128&d=identicon&r=PG&f=1", "display_name": "Abi", "link": "https://stackoverflow.com/users/4093930/abi"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1521655046, "post_id": 49413317, "comment_id": 85828625, "body": "@Quentin: This is the exact error: error C2440: &#39;default argument&#39;: cannot convert from &#39;day&#39; to &#39;day &amp;&#39;"}, {"owner": {"reputation": 29, "user_id": 4093930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4911f6c81d96a850b1b7d7e33e4bfeba?s=128&d=identicon&r=PG&f=1", "display_name": "Abi", "link": "https://stackoverflow.com/users/4093930/abi"}, "reply_to_user": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1521655213, "post_id": 49413317, "comment_id": 85828715, "body": "@liliscent: if I specify it as const, I won&#39;t be able to change the value of the &#39;dayOfWeek&#39; variable inside the isWeekend function. I need that functionality."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1521655425, "post_id": 49413317, "comment_id": 85828829, "body": "Ah, but what variable would you be changing here exactly? <code>SUN</code> is a value, not a variable."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1521655597, "post_id": 49413317, "comment_id": 85828920, "body": "<code>void isWeekend(day &amp;dayOfWeek=SUN);</code> shouldn&#39;t a function named this return a bool and be const? I mean I would expect this signature: <code>bool isWeekend(const day &amp; dayOfWeek=SUN) const;</code>"}, {"owner": {"reputation": 29, "user_id": 4093930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4911f6c81d96a850b1b7d7e33e4bfeba?s=128&d=identicon&r=PG&f=1", "display_name": "Abi", "link": "https://stackoverflow.com/users/4093930/abi"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1521656129, "post_id": 49413317, "comment_id": 85829222, "body": "@storyTeller: Let&#39;s say there are 2 functions:  void funcA {  ... isWeekend(); }  void funcB {  day d; isWeekend(d); }  isWeekend should be able to change the value of &#39;d&#39; being passed in the function. If isWeekend is called without any arguments, then SUN is used by default by the calling function."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1521656340, "post_id": 49413317, "comment_id": 85829339, "body": "And I just told you... SUN is not an object, it&#39;s a value."}, {"owner": {"reputation": 29, "user_id": 4093930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4911f6c81d96a850b1b7d7e33e4bfeba?s=128&d=identicon&r=PG&f=1", "display_name": "Abi", "link": "https://stackoverflow.com/users/4093930/abi"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1521656364, "post_id": 49413317, "comment_id": 85829350, "body": "@drescherjm That&#39;s exactly how my actual function signature looks like: bool as the return type and is a const func.I skipped this information because isWeekend is an example function written only for the purposes of asking the question here."}, {"owner": {"reputation": 29, "user_id": 4093930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4911f6c81d96a850b1b7d7e33e4bfeba?s=128&d=identicon&r=PG&f=1", "display_name": "Abi", "link": "https://stackoverflow.com/users/4093930/abi"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1521660013, "post_id": 49413317, "comment_id": 85831452, "body": "@StoryTeller: Thanks a lot for your reply. I think I&#39;m understanding what you&#39;re trying to tell me. For instance, this compiles: void isWeekday(std::string&amp; dayOfWeek=std::string(&quot;sunday&quot;)); while this does not: void isWeekday(std::string&amp; dayOfWeek=&quot;sunday&quot;); Question is, how do I do the same i.e. create an object for an enum? I&#39;ve tried a few things but I&#39;m messing up the syntax somewhere and am getting an error."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1521655034, "post_id": 49413480, "comment_id": 85828620, "body": "Your entire explanation doesn&#39;t add up to why making it <code>const</code> is suddenly okay"}, {"owner": {"reputation": 384, "user_id": 7193039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SD1Fs.png?s=128&g=1", "display_name": "Matthias Gr&#252;n", "link": "https://stackoverflow.com/users/7193039/matthias-gr%c3%bcn"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1521655231, "post_id": 49413480, "comment_id": 85828726, "body": "You&#39;re right and it&#39;s not necessary here anyway. I edited my answer."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1521655347, "post_id": 49413480, "comment_id": 85828783, "body": "Well, better. Though I was hoping you&#39;d instead elaborate on why const makes a difference. Make the answer more informative and all that. But this is good too."}, {"owner": {"reputation": 29, "user_id": 4093930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4911f6c81d96a850b1b7d7e33e4bfeba?s=128&d=identicon&r=PG&f=1", "display_name": "Abi", "link": "https://stackoverflow.com/users/4093930/abi"}, "edited": false, "score": 0, "creation_date": 1521661557, "post_id": 49413480, "comment_id": 85832269, "body": "@MatthiasGr&#252;n: Thanks a lot for the explanation. I understood the mistake, though I&#39;m still figuring out how to fix it. I can&#39;t lose the &#39;&amp;&#39; because I want the isWeekday() to be able to change the value of the parameter passed. Thanks again though."}], "tags": [], "owner": {"reputation": 384, "user_id": 7193039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SD1Fs.png?s=128&g=1", "display_name": "Matthias Gr&#252;n", "link": "https://stackoverflow.com/users/7193039/matthias-gr%c3%bcn"}, "is_accepted": false, "score": 3, "last_activity_date": 1521655183, "last_edit_date": 1521655183, "creation_date": 1521654910, "answer_id": 49413480, "question_id": 49413317, "link": "https://stackoverflow.com/questions/49413317/c-error-while-passing-enum-as-default-parameter-by-reference-in-c/49413480#49413480", "title": "C++ Error while passing enum as default parameter by reference in C++", "body": "<p>The problem is that you are declaring the parameter to be a non-const lvalue reference (as the error message suggests). An lvalue is essentially something that can be assigned to, so an lvalue reference is a reference to an existing object. <em>SUN</em> here, thus, is not an lvalue and therefore cannot be used to initialize the lvalue reference. A caller would have to call this method with an existing variable as its parameter if you declare it to be an lvalue reference. So remove the reference, since it's not necessary here if this is just supposed to be an input parameter.</p>\n\n<p>See here for more information: <a href=\"http://en.cppreference.com/w/cpp/language/value_category\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/value_category</a></p>\n"}], "owner": {"reputation": 29, "user_id": 4093930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4911f6c81d96a850b1b7d7e33e4bfeba?s=128&d=identicon&r=PG&f=1", "display_name": "Abi", "link": "https://stackoverflow.com/users/4093930/abi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 758, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1521655731, "creation_date": 1521654435, "last_edit_date": 1521654463, "question_id": 49413317, "link": "https://stackoverflow.com/questions/49413317/c-error-while-passing-enum-as-default-parameter-by-reference-in-c", "title": "C++ Error while passing enum as default parameter by reference in C++", "body": "<p>Here's what I'm trying to accomplish:</p>\n\n<pre><code>class Schedule\n{\n    public:\n    enum day{MON, TUE, WED, THU, FRI, SAT, SUN};\n    void isWeekend(day &amp;dayOfWeek=SUN);\n}\n</code></pre>\n\n<p>I'm trying to retrieve the day in the function that calls <code>isWeekend</code>, defaulting it to 'SUN'.\nOn VS2017, this is the error that I see: </p>\n\n<pre><code>initial value of reference to non-const must be an lvalue.\n</code></pre>\n\n<p>What am I missing? \nThe same function compiles without the <code>&amp;</code> i.e.</p>\n\n<pre><code>void isWeekend(day dayOfWeek=SUN)\n</code></pre>\n"}, {"tags": ["c++", "abort", "codecvt"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1521654485, "post_id": 49413237, "comment_id": 85828276, "body": "This &quot;program&quot; is not a program; it&#39;s a code snippet. Add just enough code so that it compiles and runs and shows the problem."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1521654860, "post_id": 49413237, "comment_id": 85828507, "body": "If you&#39;re trying to use the stream you imbued using <code>cv1</code>&#39;s address after it has been destroyed, its likely to fail.  But we can&#39;t tell that until we&#39;ve seen your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  You&#39;ve been here for long enough to understand why one is required."}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 1308854, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/236c8c7dc04e187fd607d526dbce3e8b?s=128&d=identicon&r=PG", "display_name": "Woody20", "link": "https://stackoverflow.com/users/1308854/woody20"}, "edited": false, "score": 0, "creation_date": 1521662118, "post_id": 49413629, "comment_id": 85832570, "body": "Tnx for your prompt (and correct!) response. When I compile your code, I get an  <code>error C2661: &#39;std::_Crt_new_delete::operator new&#39;: no overloaded function takes 3 arguments</code>. This comes from `#ifdef _DEBUG / #define new DEBUG_NEW / #endif`` that Visual Studio puts into a dialog source file. Removing that compiles and runs without error. So there is some Visual Studio incompatibility."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 611, "user_id": 1308854, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/236c8c7dc04e187fd607d526dbce3e8b?s=128&d=identicon&r=PG", "display_name": "Woody20", "link": "https://stackoverflow.com/users/1308854/woody20"}, "edited": false, "score": 0, "creation_date": 1521663040, "post_id": 49413629, "comment_id": 85833094, "body": "The code I presented doesn&#39;t pass 3 arguments to <code>new</code>, it should compile no matter what <code>new</code> is defined as. Otherwise VS is breaking core language functionality. What is <code>DEBUG_NEW</code> defined as? I don&#39;t use VS."}, {"owner": {"reputation": 611, "user_id": 1308854, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/236c8c7dc04e187fd607d526dbce3e8b?s=128&d=identicon&r=PG", "display_name": "Woody20", "link": "https://stackoverflow.com/users/1308854/woody20"}, "edited": false, "score": 0, "creation_date": 1521743993, "post_id": 49413629, "comment_id": 85874207, "body": "<code>#define DEBUG_NEW new(THIS_FILE, __LINE__)</code>, and <code>#define THIS_FILE __FILE__</code>. And, yes, it is a bug in VS, which I will report. Nothing wrong w/your code!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 611, "user_id": 1308854, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/236c8c7dc04e187fd607d526dbce3e8b?s=128&d=identicon&r=PG", "display_name": "Woody20", "link": "https://stackoverflow.com/users/1308854/woody20"}, "edited": false, "score": 0, "creation_date": 1521745532, "post_id": 49413629, "comment_id": 85875055, "body": "The only way that such a <code>DEBUG_NEW</code> could work like this is if there is an overloaded <code>operator new</code> in scope that takes 3 parameters: <code>void* operator new (size_t size, const char *filename, int line)</code> (see <a href=\"https://stackoverflow.com/a/583079/65863\">this example</a>). It sounds like that is not actually the case in your situation, which would explain the compiler error you are seeing."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1521663129, "last_edit_date": 1521663129, "creation_date": 1521655406, "answer_id": 49413629, "question_id": 49413237, "link": "https://stackoverflow.com/questions/49413237/abort-in-wifstream-destructor/49413629#49413629", "title": "Abort in wifstream destructor", "body": "<p><code>std::locale</code> maintains a reference count for each facet that is associated with it.  The <code>std::locale</code> constructor you are calling will increment a reference count for the <code>std::codecvt_utf16</code> object you are passing in, and then <code>std::locale</code>'s destructor will decrement that reference count.  When the reference count of the <code>std::codecvt_utf16</code> falls to 0, it will be destroyed via the <code>delete</code> operator.  That is why you are getting the abort error - when the <code>std::wifstream</code> destructor is cleaning up the <code>imbue</code>'d locale, the locale's destructor tries to <code>delete</code> something that was not allocated with the <code>new</code> operator to begin with.</p>\n\n<p>Do this instead:</p>\n\n<pre><code>inFile.imbue(std::locale(inFile.getloc(),\n    new std::codecvt_utf16&lt;wchar_t, 0x10ffff, std::little_endian&gt;));\n</code></pre>\n\n<p>See the example in the <a href=\"http://en.cppreference.com/w/cpp/locale/codecvt_utf16\" rel=\"nofollow noreferrer\"><code>std::codecvt_utf16</code></a> documentation on <a href=\"http://en.cppreference.com\" rel=\"nofollow noreferrer\">cppreference.com</a>.</p>\n"}], "owner": {"reputation": 611, "user_id": 1308854, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/236c8c7dc04e187fd607d526dbce3e8b?s=128&d=identicon&r=PG", "display_name": "Woody20", "link": "https://stackoverflow.com/users/1308854/woody20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 49413629, "answer_count": 1, "score": 0, "last_activity_date": 1521663129, "creation_date": 1521654188, "last_edit_date": 1521654517, "question_id": 49413237, "link": "https://stackoverflow.com/questions/49413237/abort-in-wifstream-destructor", "title": "Abort in wifstream destructor", "body": "<p>The following C++ code gets a mysterious error (\"Debug Error!...abort() has been called\") when the <code>return</code> is executed. This is Visual Studio 2017 15.6.3, and the program is a 64-bit debug build, running under 64-bit Windows 7. What is causing this error, and how can I fix it?</p>\n\n<pre><code>wifstream inFile;\n\nstd::codecvt_utf16&lt;wchar_t, 0x10ffff, std::little_endian&gt; cv1;\ninFile.imbue(std::locale(inFile.getloc(), &amp;cv1));\nreturn 0;\n</code></pre>\n\n<p>Tracing through with the debugger shows the message is coming from the disassembler instruction</p>\n\n<pre><code>call        std::basic_ifstream&lt;wchar_t,std::char_traits&lt;wchar_t&gt; &gt;::`vbase destructor'\n</code></pre>\n\n<p>The last entry on the stack, other than <code>msvcp140d.dll</code>, <code>vcruntime140d.dll</code> and <code>ucrtbased.dll</code> is</p>\n\n<pre><code>    MyApp.exe!std::basic_ifstream&lt;wchar_t,std::char_traits&lt;wchar_t&gt; &gt;::`vbase destructor'() C++\n</code></pre>\n\n<p>The purpose of this code is the input file <code>infile</code> is Unicode (little-endian), and I am reading it into a <code>std::string</code> variable.</p>\n"}, {"tags": ["c++", "c++11", "logging", "spdlog"], "comments": [{"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 0, "creation_date": 1521654708, "post_id": 49413154, "comment_id": 85828419, "body": "I think I would implement this RAII-based, like <a href=\"http://en.cppreference.com/w/cpp/thread/lock_guard\" rel=\"nofollow noreferrer\"><code>lock_guard</code></a> and alike, keeping a stack in the logger and pushing and popping from the stack on context creation and deletion. Would need to be mindful about multithreading if applicable though, maybe could use <code>thread_local</code> <a href=\"http://en.cppreference.com/w/cpp/language/storage_duration\" rel=\"nofollow noreferrer\">storage class</a>."}, {"owner": {"reputation": 3392, "user_id": 1698058, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/04c30dfc3f9c98f3ea8eeaf54e592539?s=128&d=identicon&r=PG", "display_name": "Chris Hunt", "link": "https://stackoverflow.com/users/1698058/chris-hunt"}, "reply_to_user": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 0, "creation_date": 1521656265, "post_id": 49413154, "comment_id": 85829299, "body": "@jdehesa that sounds closer to a call stack, which is very useful but not what I&#39;m trying to do. Here I want the &quot;name&quot; of a scope to be generated from the parent names without having to qualify them in the code. In the example: <code>app.Connector.send()</code> comes from the definitions in the <code>app</code> namespace, <code>Connector</code> class, and <code>send()</code> method. I don&#39;t think a runtime solution is applicable here (how would you know you&#39;re &quot;in&quot; a given namespace, for example)."}, {"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 0, "creation_date": 1521657260, "post_id": 49413154, "comment_id": 85829846, "body": "Ahh I see, I wasn&#39;t understanding the problem right, thanks for clarifying again."}], "answers": [{"comments": [{"owner": {"reputation": 3392, "user_id": 1698058, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/04c30dfc3f9c98f3ea8eeaf54e592539?s=128&d=identicon&r=PG", "display_name": "Chris Hunt", "link": "https://stackoverflow.com/users/1698058/chris-hunt"}, "edited": false, "score": 0, "creation_date": 1521667871, "post_id": 49415710, "comment_id": 85835481, "body": "If <code>LOG_CONTEXT</code> is defining a static object then it won&#39;t be possible to use it in a class body as a standalone statement, assuming that it needs to be initialized to be provided the name. Can you tell me how this gives us more than the existing implementation that defines a local <code>__log_context__</code> struct?"}], "tags": [], "owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "is_accepted": false, "score": 0, "last_activity_date": 1521663193, "creation_date": 1521663193, "answer_id": 49415710, "question_id": 49413154, "link": "https://stackoverflow.com/questions/49413154/how-to-declare-static-information-in-scopes-accessible-to-nested-lexical-scopes/49415710#49415710", "title": "How to declare static information in scopes accessible to nested lexical scopes in C++?", "body": "<p>Writing an example would take some time, but I'll share how I'd approach this problem.</p>\n\n<ul>\n<li>Your <code>LOG_CONTEXT</code> can be invoked anywhere, so if we create multiple static objects then order of their construction is unknown. </li>\n<li>Your contexts can be sorted by line number, which is accessible with <code>__LINE__</code></li>\n<li><code>LOG_CONTEXT</code> can create static objects of <code>LoggingContext</code> struct, which self-registers to local container under creation. (By local I mean unique in compilation object, might be achieved with anonymous namespace)</li>\n<li><code>LOG_*</code> should take their current line and take the most recent LoggingContext from local register. (Or few last, if needed)</li>\n<li>I think all of it is possible with <code>constexpr</code> sematics (but quite a challange)</li>\n</ul>\n\n<p>Open problems:</p>\n\n<ul>\n<li>Static objects in functions (created in first call)</li>\n<li>Nesting of contexts (maybe comparing <code>__FUNCTION__</code> would work)?</li>\n</ul>\n\n<p>PS. I'll try to implement it on weekend</p>\n"}, {"comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1570219161, "post_id": 49441637, "comment_id": 102857242, "body": "Instead of the variable declaration, can you instead use <code>using __prev_log_context__ = __log_context__ ;</code> just before you declare the shadowing <code>__log_context__ </code>?"}, {"owner": {"reputation": 3392, "user_id": 1698058, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/04c30dfc3f9c98f3ea8eeaf54e592539?s=128&d=identicon&r=PG", "display_name": "Chris Hunt", "link": "https://stackoverflow.com/users/1698058/chris-hunt"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 1, "creation_date": 1570246299, "post_id": 49441637, "comment_id": 102862151, "body": "This was mentioned as option 1 in the original post. The problem is that in the body of a class, <code>__log_context__</code> must refer unambiguously to a single type. The following fails, for example: <code>class A {}; class B { using C = A; class A {}; };</code>. See <a href=\"https://godbolt.org/z/6TAIf7\" rel=\"nofollow noreferrer\">here</a>, the error is <code>declaration of &#39;struct B::A&#39; changes meaning of &#39;A&#39;</code>."}, {"owner": {"reputation": 9801, "user_id": 567650, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ccbc30c848110d05818d71e37ae8c8cf?s=128&d=identicon&r=PG", "display_name": "jwd", "link": "https://stackoverflow.com/users/567650/jwd"}, "edited": false, "score": 0, "creation_date": 1582357431, "post_id": 49441637, "comment_id": 106757018, "body": "Cool stuff, but FYI: you shouldn&#39;t use names starting with <code>_</code> (like <code>__log_context__</code>). They are reserved for the implementation. (<a href=\"https://stackoverflow.com/a/228797/567650\">link</a>)"}], "tags": [], "owner": {"reputation": 3392, "user_id": 1698058, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/04c30dfc3f9c98f3ea8eeaf54e592539?s=128&d=identicon&r=PG", "display_name": "Chris Hunt", "link": "https://stackoverflow.com/users/1698058/chris-hunt"}, "is_accepted": true, "score": 2, "last_activity_date": 1521773417, "creation_date": 1521773417, "answer_id": 49441637, "question_id": 49413154, "link": "https://stackoverflow.com/questions/49413154/how-to-declare-static-information-in-scopes-accessible-to-nested-lexical-scopes/49441637#49441637", "title": "How to declare static information in scopes accessible to nested lexical scopes in C++?", "body": "<p>Okay, I found a solution.</p>\n\n<p>The trick is that a <code>decltype(var)</code> for <code>var</code> visible in the outer scope will resolve to the type of that outer scope <code>var</code> even if we define <code>var</code> later in the same scope. This allows us to shadow the outer type but still access it, via an otherwise unused variable of the outer type, while allowing us to define a variable of the same name to be accessed in inner scopes.</p>\n\n<p>Our general construction looks like</p>\n\n<pre><code>struct __log_context__\n{\n    typedef decltype(__log_context_var__) prev;\n    static const char * name() { return name_; }\n    static ::logging::log_context  context()\n    {\n        return ::logging::log_context(\n            name(), chain&lt;__log_context__&gt;::get() );\n    }\n};\nstatic __log_context__ __log_context_var__;\n</code></pre>\n\n<p>The only other detail is that we need a terminating condition when iterating up the context chain, so we use <code>void*</code> as a sentinel value and specialize for it in the helper classes used for constructing the output string.</p>\n\n<p>C++11 is required for <code>decltype</code> and to allow local classes to be passed to template parameters.</p>\n\n<pre><code>#include &lt;spdlog/spdlog.h&gt;\n\nnamespace logging {\n\nspdlog::logger &amp; instance()\n{\n    auto sink =\n        std::make_shared&lt;spdlog::sinks::ansicolor_stdout_sink_mt&gt;();\n    decltype(sink) sinks[] = {sink};\n    static spdlog::logger logger(\n        \"console\", std::begin( sinks ), std::end( sinks ) );\n    return logger;\n}\n\nclass log_context\n{\npublic:\n    log_context( const char *         name,\n                 const std::string &amp;  scope_name )\n        : name_ ( name       )\n        , scope_( scope_name )\n    {}\n\n    const char * name() const\n    { return name_; }\n\n    const char * scope() const\n    { return scope_.c_str(); }\n\nprivate:\n    const char *  name_;\n    std::string   scope_;\n};\n\nclass log_statement\n{\npublic:\n    log_statement( spdlog::logger &amp;           logger,\n                   spdlog::level::level_enum  level,\n                   const log_context &amp;        context )\n        : logger_ ( logger  )\n        , level_  ( level   )\n        , context_( context )\n    {}\n\n    template&lt;class T, class... U&gt;\n    void operator()( const T &amp;  t, U&amp;&amp;...  u )\n    {\n        std::string  fmt = std::string( \"[{}] \" ) + t;\n        logger_.log(\n            level_,\n            fmt.c_str(),\n            context_.scope(),\n            std::forward&lt;U&gt;( u )... );\n    }\n\nprivate:\n    spdlog::logger &amp;           logger_;\n    spdlog::level::level_enum  level_;\n    const log_context &amp;        context_;\n};\n\n} // namespace logging\n\n// Helpers for walking up the lexical scope chain.\ntemplate&lt;class T, class Prev = typename T::prev&gt;\nstruct chain\n{\n    static std::string get()\n    {\n        return (chain&lt;Prev, typename Prev::prev&gt;::get() + \".\")\n            + T::name();\n    }\n};\n\ntemplate&lt;class T&gt;\nstruct chain&lt;T, void*&gt;\n{\n    static std::string get()\n    {\n        return T::name();\n    }\n};\n\n#define LOGGER ::logging::instance()\n\n#define CHECK_LEVEL( level_name ) \\\n    LOGGER.should_log( ::spdlog::level::level_name )\n\n#define CHECK_AND_LOG( level_name )      \\\n    if ( !CHECK_LEVEL( level_name ) ) {} \\\n    else                                 \\\n        ::logging::log_statement(        \\\n            LOGGER,                      \\\n            ::spdlog::level::level_name, \\\n            __log_context__::context() )\n\n#define LOG_TRACE CHECK_AND_LOG( trace )\n#define LOG_DEBUG CHECK_AND_LOG( debug )\n#define LOG_INFO CHECK_AND_LOG( info )\n#define LOG_WARNING CHECK_AND_LOG( warn )\n#define LOG_ERROR CHECK_AND_LOG( err )\n#define LOG_CRITICAL CHECK_AND_LOG( critical )\n\n#define LOG_CONTEXT_IMPL(prev_type,name_)            \\\nstruct __log_context__                               \\\n{                                                    \\\n    typedef prev_type prev;                          \\\n    static const char * name() { return name_; }     \\\n    static ::logging::log_context  context()         \\\n    {                                                \\\n        return ::logging::log_context(               \\\n            name(), chain&lt;__log_context__&gt;::get() ); \\\n    }                                                \\\n};                                                   \\\nstatic __log_context__ __log_context_var__\n\n#define LOG_CONTEXT(name_) \\\n    LOG_CONTEXT_IMPL(decltype(__log_context_var__),name_)\n\n#define ROOT_CONTEXT(name_) \\\n    LOG_CONTEXT_IMPL(void*,name_)\n\n// We include the root definition here to ensure that\n// __log_context_var__ is always defined for any uses of\n// LOG_CONTEXT.\nROOT_CONTEXT( \"global\" );\n</code></pre>\n\n<p>which with an approximation of the code in my initial post</p>\n\n<pre><code>#include &lt;logging.hpp&gt;\n\nnamespace app {\n\nLOG_CONTEXT( \"app\" );\n\nclass Connector {\n    LOG_CONTEXT( \"Connector\" );\n\npublic:\n    void send( const std::string &amp;  msg )\n    {\n        LOG_CONTEXT( \"send()\" );\n        LOG_TRACE( msg );\n    }\n};\n\n} // namespace app\n\nvoid fn()\n{\n    LOG_DEBUG( \"in fn\" );\n}\n\nint main()\n{\n    LOG_CONTEXT( \"main()\" );\n    LOGGER.set_level( spdlog::level::trace );\n    LOG_INFO( \"starting app\" );\n    fn();\n    app::Connector c;\n    c.send( \"hello world\" );\n}\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>[2018-03-22 22:35:06.746] [console] [info] [global.main()] starting app\n[2018-03-22 22:35:06.747] [console] [debug] [global] in fn\n[2018-03-22 22:35:06.747] [console] [trace] [global.app.Connector.send()] hello world\n</code></pre>\n\n<p>as desired.</p>\n\n<p>Conditionally inheriting an outer scope as mentioned in the question example is left as an exercise.</p>\n"}], "owner": {"reputation": 3392, "user_id": 1698058, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/04c30dfc3f9c98f3ea8eeaf54e592539?s=128&d=identicon&r=PG", "display_name": "Chris Hunt", "link": "https://stackoverflow.com/users/1698058/chris-hunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 1, "accepted_answer_id": 49441637, "answer_count": 2, "score": 3, "last_activity_date": 1521815293, "creation_date": 1521653901, "last_edit_date": 1521815293, "question_id": 49413154, "link": "https://stackoverflow.com/questions/49413154/how-to-declare-static-information-in-scopes-accessible-to-nested-lexical-scopes", "title": "How to declare static information in scopes accessible to nested lexical scopes in C++?", "body": "<p>I want to declare identifiers for scopes which will be used to automatically populate a field of any logging statements within the innermost scope. They will usually, but not always (e.g. lambdas, blocks introduced with <code>{}</code>), match the \"name\" of the enclosing block.</p>\n\n<p>Usage would look something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>namespace app {\n\nLOG_CONTEXT( \"app\" );\n\nclass Connector {\n    LOG_CONTEXT( \"Connector\" );\n    void send( const std::string &amp;  msg )\n    {\n        LOG_CONTEXT( \"send()\" );\n        LOG_TRACE( msg );\n    }\n};\n\n} // namespace app\n\n//                     not inherited\nLOG_CONTEXT( \"global\", false );\n\nvoid fn()\n{\n    LOG_DEBUG( \"in fn\" );\n}\n\nint main()\n{\n    LOG_CONTEXT( \"main()\" );\n    LOG_INFO( \"starting app\" );\n    fn();\n    Connector c;\n    c.send( \"hello world\" );\n}\n</code></pre>\n\n<p>with the result being something like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[2018-03-21 10:17:16.146] [info] [main()] starting app\n[2018-03-21 10:17:16.146] [debug] [global] in fn\n[2018-03-21 10:17:16.146] [trace] [app.Connector.send()] hello world\n</code></pre>\n\n<p>We can get the inner-most scope by defining the <code>LOG_CONTEXT</code> macro such that it declares a struct. Then in the <code>LOG_*</code> macros we call a static method on it to retrieve the name. We pass the whole thing to a callable object, e.g.:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>namespace logging {\n\nspdlog::logger &amp; instance()\n{\n    auto sink =\n        std::make_shared&lt;spdlog::sinks::ansicolor_stdout_sink_mt&gt;();\n    decltype(sink) sinks[] = {sink};\n    static spdlog::logger logger(\n        \"console\", std::begin( sinks ), std::end( sinks ) );\n    return logger;\n}\n\n// TODO: stack-able context\nclass log_context\n{\npublic:\n    log_context( const char *  name )\n        : name_( name )\n    {}\n\n    const char * name() const\n    { return name_; }\n\nprivate:\n    const char *  name_;\n};\n\nclass log_statement\n{\npublic:\n    log_statement( spdlog::logger &amp;           logger,\n                   spdlog::level::level_enum  level,\n                   const log_context &amp;        context )\n        : logger_ ( logger  )\n        , level_  ( level   )\n        , context_( context )\n    {}\n\n    template&lt;class T, class... U&gt;\n    void operator()( const T &amp;  t, U&amp;&amp;...  u )\n    {\n        std::string  fmt = std::string( \"[{}] \" ) + t;\n        logger_.log(\n            level_,\n            fmt.c_str(),\n            context_.name(),\n            std::forward&lt;U&gt;( u )... );\n    }\n\nprivate:\n    spdlog::logger &amp;           logger_;\n    spdlog::level::level_enum  level_;\n    const log_context &amp;        context_;\n};\n\n} // namespace logging\n\n#define LOGGER ::logging::instance()\n\n#define CHECK_LEVEL( level_name ) \\\n    LOGGER.should_log( ::spdlog::level::level_name )\n\n#define CHECK_AND_LOG( level_name )      \\\n    if ( !CHECK_LEVEL( level_name ) ) {} \\\n    else                                 \\\n        ::logging::log_statement(        \\\n            LOGGER,                      \\\n            ::spdlog::level::level_name, \\\n            __log_context__::context() )\n\n#define LOG_TRACE CHECK_AND_LOG( trace )\n#define LOG_DEBUG CHECK_AND_LOG( debug )\n#define LOG_INFO CHECK_AND_LOG( info )\n#define LOG_WARNING CHECK_AND_LOG( warn )\n#define LOG_ERROR CHECK_AND_LOG( err )\n#define LOG_CRITICAL CHECK_AND_LOG( critical )\n\n#define LOG_CONTEXT( name_ )                        \\\n    struct __log_context__                          \\\n    {                                               \\\n        static ::logging::log_context context()     \\\n        {                                           \\\n            return ::logging::log_context( name_ ); \\\n        }                                           \\\n    }\n\nLOG_CONTEXT( \"global\" );\n</code></pre>\n\n<p>Where I'm stuck is building the stack of contexts to use when defining an inner-most <code>__log_context__</code>. We may use a differently-named structure and macro convention to add 1 or 2 levels (e.g. <code>LOG_MODULE</code> can define a <code>__log_module__</code>), but I want a more general solution. Here are the restrictions I can think of to make things easier:</p>\n\n<ol>\n<li>Scope nesting level may be reasonably bounded, but the user should not have to provide the current level/code may be moved to a different scope without being changed. Maybe 16 levels is enough (that gives us orgname::app::module::subsystem::subsubsystem::detail::impl::detail::util with some room to spare...)</li>\n<li>Number of next-level scopes within a scope (in a single translation unit) may be bounded, but should be much larger than the value for 1. Maybe 256 is reasonable, but I'm sure someone will have a counterexample.</li>\n<li>Ideally the same macro could be used for any context.</li>\n</ol>\n\n<p>I have considered the following approaches:</p>\n\n<ol>\n<li><p><code>using __parent_context__ = __log_context__; struct __log_context__ ...</code></p>\n\n<p>hoping that <code>__parent_context__</code> picks up the outer context, but I was getting compiler errors indicating that a type name must refer unambiguously to a single type in the same scope. This restriction applies only when used in the body of a class, this would otherwise work for functions and namespaces.</p></li>\n<li><p>Tracking the structures applicable to a scope in something like <code>boost::mpl::vector</code></p>\n\n<p>The examples in the tutorial lead me to believe I would run into the same issue as in 1, since the vector after being pushed to needs to be given a distinct name which would need to be referred to specifically in nested scopes.</p></li>\n<li><p>Generating the name of the applicable outer scope with a preprocessor counter.</p>\n\n<p>This would work in my simple usage example above, but would fail in the presence of discontinuous declarations in a namespace or method definitions outside of the corresponding class.</p></li>\n</ol>\n\n<p>How can this information be accessed in the nested scopes?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 79, "user_id": 9530191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf0c6b5516b86417ef1105547f1eba24?s=128&d=identicon&r=PG&f=1", "display_name": "GMHDBJD", "link": "https://stackoverflow.com/users/9530191/gmhdbjd"}, "edited": false, "score": 0, "creation_date": 1521714333, "post_id": 49413105, "comment_id": 85853201, "body": "@GMHDBJD If the answer was helpful to you, consider accepting it by clicking on the tick mark in the top left."}], "tags": [], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "is_accepted": true, "score": 2, "last_activity_date": 1521653769, "creation_date": 1521653769, "answer_id": 49413105, "question_id": 49412995, "link": "https://stackoverflow.com/questions/49412995/friend-class-declaration-and-member-function-declaration/49413105#49413105", "title": "friend class declaration and member function declaration", "body": "<p>A friend class/function declaration IS a declaration in itself and forward-declares the class/function. You got that right. </p>\n\n<p>Now if you could forward declare a member function of <code>class A</code> as a <code>friend</code> in <code>class B</code>, that means you are changing the interface of <code>class A</code>. </p>\n\n<p>Imagine I did</p>\n\n<pre><code>class foo {\npublic:\n    friend void std::vector&lt;int&gt;::fun();\n};\n</code></pre>\n\n<p>Am I adding a function to <code>std::vector&lt;int&gt;</code>?</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 1, "last_activity_date": 1521655252, "creation_date": 1521655252, "answer_id": 49413583, "question_id": 49412995, "link": "https://stackoverflow.com/questions/49412995/friend-class-declaration-and-member-function-declaration/49413583#49413583", "title": "friend class declaration and member function declaration", "body": "<p>Standard gives an example:</p>\n\n<blockquote>\n  <p><strong>13.3 Friends</strong> [class.friend] 3/</p>\n\n<pre><code>class C;\ntypedef C Ct;\n\nclass X1 {\n  friend C; // OK: class C is a friend\n};\n\nclass X2 {    \n  friend Ct;      // OK: class C is a friend\n  friend D;       // error: no type-name D in scope\n  friend class D; // OK: elaborated-type-specifier declares new class\n};\n</code></pre>\n</blockquote>\n\n<p><code>friend class D</code> both forward declares <code>class D</code> and a friend relationship with it.</p>\n"}], "owner": {"reputation": 79, "user_id": 9530191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf0c6b5516b86417ef1105547f1eba24?s=128&d=identicon&r=PG&f=1", "display_name": "GMHDBJD", "link": "https://stackoverflow.com/users/9530191/gmhdbjd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 49413105, "answer_count": 2, "score": 2, "last_activity_date": 1521655252, "creation_date": 1521653391, "question_id": 49412995, "link": "https://stackoverflow.com/questions/49412995/friend-class-declaration-and-member-function-declaration", "title": "friend class declaration and member function declaration", "body": "<p>Why friend class need not forward declaration but  member function need?</p>\n\n<p>friend class:</p>\n\n<pre><code>class String0{     \nfriend class String;\nprivate:\n    int size = 0;\n    string s;\n};\n\nclass String {      \npublic:\n    string combine(const string &amp;s1);\nprivate:\n    int size = 0;\n    string s;\n};   \n</code></pre>\n\n<p>member friend:</p>\n\n<pre><code>class String {        \npublic:\n    string combine(const string &amp;s1);  //why need this?\nprivate:\n    int size = 0;\n    string s;\n};\n\nclass String0 {\nfriend string String::combine(const string &amp;);\n};\n\nString String::combine(const string &amp;s1){...}\n</code></pre>\n\n<p>Classes and nonmember functions need not have been declared before they are used\nin a friend declaration. \nBut why member function need?</p>\n"}, {"tags": ["c++", "string", "vector", "tolower"], "comments": [{"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1521653617, "post_id": 49412903, "comment_id": 85827781, "body": "Unrelated, but there&#39;s no need to ever directly compare something to 0. 0 is falsy, so the <code>!</code> operator can be used."}, {"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1521653735, "post_id": 49412903, "comment_id": 85827857, "body": "The error occurs because you&#39;re trying to modify a <code>const</code> object."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 7, "last_activity_date": 1521653419, "creation_date": 1521653419, "answer_id": 49413002, "question_id": 49412903, "link": "https://stackoverflow.com/questions/49412903/tolower-stdvectorstdstring/49413002#49413002", "title": "ToLower std::vector&lt;std::string&gt;", "body": "<p>This is because <code>term</code> is <code>const</code> reference. Make a copy before converting it to lowercase:</p>\n\n<pre><code>bool lookupTerm(const std::string&amp; term, const std::vector&lt;std::string&gt;&amp; possible_names) {\n    std::string lower(term);\n    transform(lower.begin(), lower.end(), lower.begin(), ::tolower);\n    for (const std::string &amp;possible_name : possible_names)\n    {\n        if (possible_name.compare(lower) == 0)\n            return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>You could also achieve the same effect by removing <code>const</code>, and taking the parameter by value:</p>\n\n<pre><code>bool lookupTerm(std::string term, const std::vector&lt;std::string&gt;&amp; possible_names) {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1521653959, "last_edit_date": 1521653959, "creation_date": 1521653549, "answer_id": 49413042, "question_id": 49412903, "link": "https://stackoverflow.com/questions/49412903/tolower-stdvectorstdstring/49413042#49413042", "title": "ToLower std::vector&lt;std::string&gt;", "body": "<p><code>std::transform</code> needs to be able to change the contents of whatever the third argument dereferences to.</p>\n\n<p>That does not work in your case since <code>term</code> is a <code>const</code> object.</p>\n\n<p>You can create function local object to store the transformed string.</p>\n\n<pre><code>std::string lowercaseTerm(term);\ntransform(term.begin(), term.end(), lowercaseTerm.begin(), ::tolower);\n</code></pre>\n\n<p>and then use <code>lowercaseTerm</code> in the following line.</p>\n\n<pre><code>  if (possible_name.compare(lowercaseTerm) == 0)\n</code></pre>\n"}], "owner": {"reputation": 3680, "user_id": 7723882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6aUwy.png?s=128&g=1", "display_name": "Matias Barrios", "link": "https://stackoverflow.com/users/7723882/matias-barrios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 1, "accepted_answer_id": 49413002, "answer_count": 2, "score": 1, "last_activity_date": 1521653959, "creation_date": 1521653127, "question_id": 49412903, "link": "https://stackoverflow.com/questions/49412903/tolower-stdvectorstdstring", "title": "ToLower std::vector&lt;std::string&gt;", "body": "<p>This is related to question :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/49410992/string-array-to-c-function\">String array to C++ function</a></p>\n\n<p>Although everything is working fine now, the only thing I am not able to accomplish is to <strong>tolower</strong> the user input as I am getting an error :</p>\n\n<h3>Function</h3>\n\n<pre><code>bool lookupTerm(const std::string&amp; term, const std::vector&lt;std::string&gt;&amp; possible_names) {\n\n    transform(term.begin(), term.end(), term.begin(), ::tolower);\n    for (const std::string &amp;possible_name : possible_names)\n    {\n        if (possible_name.compare(term) == 0)\n            return true;\n    }\n    return false;\n}\n</code></pre>\n\n<h3>Parameters</h3>\n\n<pre><code>const std::vector&lt;std::string&gt; possible_asterisk         = { \"star\" , \n                                                              \"asterisk\" , \n                                                              \"tilde\"};\nstring term = \"SoMeWorD\";\n</code></pre>\n\n<h3>Error</h3>\n\n<pre><code> In file included from /usr/include/c++/7.2.0/algorithm:62:0,\n                 from jdoodle.cpp:5:\n/usr/include/c++/7.2.0/bits/stl_algo.h: In instantiation of '_OIter std::transform(_IIter, _IIter, _OIter, _UnaryOperation) [with _IIter = __gnu_cxx::__normal_iterator&lt;const char*, std::__cxx11::basic_string&lt;char&gt; &gt;; _OIter = __gnu_cxx::__normal_iterator&lt;const char*, std::__cxx11::basic_string&lt;char&gt; &gt;; _UnaryOperation = int (*)(int) throw ()]':\njdoodle.cpp:40:64:   required from here\n/usr/include/c++/7.2.0/bits/stl_algo.h:4306:12: error: assignment of read-only location '__result.__gnu_cxx::__normal_iterator&lt;const char*, std::__cxx11::basic_string&lt;char&gt; &gt;::operator*()'\n  *__result = __unary_op(*__first);\n</code></pre>\n\n<p>I know that transform should be receiving a string. How can I momentarily cast the <strong>std::vector</strong> to simply <strong>string</strong> so I can get that word to lowercase?</p>\n"}, {"tags": ["c++", "std-pair"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 6, "creation_date": 1521652929, "post_id": 49412800, "comment_id": 85827346, "body": "Did you try <code>return myFunction().first;</code>  ?"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 2, "creation_date": 1521653156, "post_id": 49412800, "comment_id": 85827476, "body": "Maybe you should look at the <a href=\"http://en.cppreference.com/w/cpp/utility/pair#Non-member_functions\" rel=\"nofollow noreferrer\">documentation for <code>std::pair</code></a>."}, {"owner": {"reputation": 45, "user_id": 3433328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyId9.jpg?s=128&g=1", "display_name": "Julini", "link": "https://stackoverflow.com/users/3433328/julini"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1521654539, "post_id": 49412800, "comment_id": 85828314, "body": "@ArnavBorborah: Thanks. I did know <code>std::pair</code> members <code>first</code> and <code>second</code>, but somehow didn&#39;t think about using them on function call."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3433328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyId9.jpg?s=128&g=1", "display_name": "Julini", "link": "https://stackoverflow.com/users/3433328/julini"}, "edited": false, "score": 0, "creation_date": 1521654016, "post_id": 49412838, "comment_id": 85828016, "body": "... of course! Now it seems obvious to me. Thank you, that works very fine for my use case."}], "tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": true, "score": 9, "last_activity_date": 1521653172, "last_edit_date": 1521653172, "creation_date": 1521652932, "answer_id": 49412838, "question_id": 49412800, "link": "https://stackoverflow.com/questions/49412800/return-only-the-first-element-of-an-stdpair-when-calling-a-function-that-retur/49412838#49412838", "title": "Return only the first element of an std::pair when calling a function that returns std::pair", "body": "<p>a <code>std::pair</code> is just a struct with 2 values; so just return the \"first\" item in the struct.</p>\n\n<pre><code>return myFunction().first;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 6, "last_activity_date": 1521652936, "creation_date": 1521652936, "answer_id": 49412841, "question_id": 49412800, "link": "https://stackoverflow.com/questions/49412800/return-only-the-first-element-of-an-stdpair-when-calling-a-function-that-retur/49412841#49412841", "title": "Return only the first element of an std::pair when calling a function that returns std::pair", "body": "<p>Perhaps</p>\n\n<pre><code>return std::get&lt;0&gt;(myFunction());\n</code></pre>\n\n<p>or </p>\n\n<pre><code>return std::get&lt;bool&gt;(myFunction());\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3433328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyId9.jpg?s=128&g=1", "display_name": "Julini", "link": "https://stackoverflow.com/users/3433328/julini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 49412838, "answer_count": 2, "score": -2, "last_activity_date": 1521653172, "creation_date": 1521652824, "question_id": 49412800, "link": "https://stackoverflow.com/questions/49412800/return-only-the-first-element-of-an-stdpair-when-calling-a-function-that-retur", "title": "Return only the first element of an std::pair when calling a function that returns std::pair", "body": "<p>I'm using a function that returns an <code>std::pair</code>:</p>\n\n<pre><code>std::pair&lt;bool, int&gt; myFunction() {\n    //Do something...\n\n    if (success) {\n        return {true, someValue};\n    }\n    else {\n        return {false, someOtherValue};\n    }\n}\n</code></pre>\n\n<p>On success, the pair's first value will be <code>true</code>, otherwise <code>false</code>.</p>\n\n<p>Some functions that call <code>myFunction()</code> use the returned pair's second value, others don't. For those, I'm calling <code>myFunction()</code> like this:</p>\n\n<pre><code>bool myOtherFunction() {\n    //Do something...\n\n    bool success;\n    std::tie(success, std::ignore) = myFunction(); //I don't care about the pair's second value\n\n    return success;\n}\n</code></pre>\n\n<p>Is there a way to avoid declaring <code>bool success</code> and returning <code>myFunction()</code>'s return value's first element directly?</p>\n"}, {"tags": ["c++", "mp3", "wav", "vlc"], "comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 1, "creation_date": 1521653483, "post_id": 49412793, "comment_id": 85827698, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/646480/is-using-a-mutex-to-prevent-multiple-instances-of-the-same-program-from-running\">Is using a Mutex to prevent multiple instances of the same program from running safe?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9432978"}, "reply_to_user": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1521710824, "post_id": 49412793, "comment_id": 85850682, "body": "@MohammadKanan without using Mutex if it is possible"}], "owner": {"user_type": "does_not_exist", "display_name": "user9432978"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521710777, "creation_date": 1521652813, "last_edit_date": 1521710777, "question_id": 49412793, "link": "https://stackoverflow.com/questions/49412793/how-can-i-check-if-there-is-an-already-running-session-of-vlc-and-close-it-befor", "title": "How can I check if there is an already running session of VLC and close it before playing a new file in c++?", "body": "<p>Now I play correctly MP3 and WAV file with VLC.\nHow can I check if there is an already running session of VLC and close it before playing a new file ?(without using Mutex)</p>\n\n<p>Here's my code</p>\n\n<pre><code>int TfMain::play(char *filename)\n    {\n\n    const char *appname = \"c:\\\\Program Files\\\\VideoLAN\\\\VLC\\\\vlc.exe\";\n\n    STARTUPINFOA si;\n    PROCESS_INFORMATION pi;\n    memset(&amp;si, 0, sizeof(si));\n    si.cb = sizeof(si);\n    memset(&amp;pi, 0, sizeof(pi));\n\n    char buf[MAX_PATH + 300];\n    wsprintfA(buf, \"%s \\\"%s\\\" --play-and-exit\", appname, filename);\n    CreateProcessA(0, buf, NULL, NULL, FALSE, 0, NULL, NULL, &amp;si, &amp;pi);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "database", "qt", "c++11", "qtsql"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1521653592, "post_id": 49412759, "comment_id": 85827767, "body": "QSqlDatabase is a class that manages the connection, it does not store information except credentials."}, {"owner": {"reputation": 83, "user_id": 916844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jhkeK.jpg?s=128&g=1", "display_name": "MarkoShiva", "link": "https://stackoverflow.com/users/916844/markoshiva"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1521655118, "post_id": 49412759, "comment_id": 85828667, "body": "Thank you for fast answer so then what would be proper way to export the database. beside doing the dirty way of QFile:copy()."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1521655426, "post_id": 49412759, "comment_id": 85828830, "body": "think that this is the easiest option, why do not you want to use it?"}, {"owner": {"reputation": 83, "user_id": 916844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jhkeK.jpg?s=128&g=1", "display_name": "MarkoShiva", "link": "https://stackoverflow.com/users/916844/markoshiva"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1521655533, "post_id": 49412759, "comment_id": 85828885, "body": "Because then can&#39;t really ask user for the filename but will probably use it for now."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1521655637, "post_id": 49412759, "comment_id": 85828939, "body": "What do you mean, you can not ask for the filename?"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1521655731, "post_id": 49412759, "comment_id": 85828993, "body": "You can know the file name from db instance! you said sqlite3."}, {"owner": {"reputation": 83, "user_id": 916844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jhkeK.jpg?s=128&g=1", "display_name": "MarkoShiva", "link": "https://stackoverflow.com/users/916844/markoshiva"}, "edited": false, "score": 0, "creation_date": 1521657475, "post_id": 49412759, "comment_id": 85829950, "body": "Well yes but that is not important as I can make use of other way to sequence db backup files."}, {"owner": {"reputation": 83, "user_id": 916844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jhkeK.jpg?s=128&g=1", "display_name": "MarkoShiva", "link": "https://stackoverflow.com/users/916844/markoshiva"}, "edited": false, "score": 0, "creation_date": 1521657539, "post_id": 49412759, "comment_id": 85829986, "body": "Yes I do know the name that is currently used I wanted to leave option to user to choose a name to save file. Anyway thx for a heads up I will do it as copy for now."}, {"owner": {"reputation": 83, "user_id": 916844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jhkeK.jpg?s=128&g=1", "display_name": "MarkoShiva", "link": "https://stackoverflow.com/users/916844/markoshiva"}, "edited": false, "score": 0, "creation_date": 1521663598, "post_id": 49412759, "comment_id": 85833395, "body": "I guess I will later run the sql query to dump the data as for now the sqlite is not encrypted but will be in future so then backing up encrypted blob if you delete a key is useless so will have a unencrypted backup version for that."}], "owner": {"reputation": 83, "user_id": 916844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jhkeK.jpg?s=128&g=1", "display_name": "MarkoShiva", "link": "https://stackoverflow.com/users/916844/markoshiva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521654827, "creation_date": 1521652709, "last_edit_date": 1521654827, "question_id": 49412759, "link": "https://stackoverflow.com/questions/49412759/how-to-convert-the-qsqldatabase-into-qdatastream-to-save-it-its-sqite-database", "title": "How to convert the QSQLDatabase into QDataStream to save it. its sqite database", "body": "<p>I need for project to convert a QSqlDatabase obejct which is db that I work on project to the QDataStream so I could save it as a db dump file which I can later import again to the project to work on as there are parts where we need to remove the db and its contents.</p>\n\n<p>Was reading documentation but can't find proper way to do this. \nI need it for sort of export and save as dialog and also for import dialog.\nDialogs\n are implemented but I'm not sure how to do this.</p>\n\n<pre><code>QDataStream out(&amp;file);\nout.setVersion(QDataStream::Qt_DefaultCompiledVersion);\nQSqlDatabase db = storage-&gt;database();\nout &lt;&lt; db;\n</code></pre>\n\n<p>Storage::database() function return current db in the QSqlDatabase format and I need it converted.</p>\n"}, {"tags": ["c++", "sparse-matrix", "linear-algebra", "eigen", "matrix-decomposition"], "answers": [{"tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": false, "score": 0, "last_activity_date": 1521817006, "creation_date": 1521817006, "answer_id": 49452592, "question_id": 49412750, "link": "https://stackoverflow.com/questions/49412750/solving-for-lx-b-and-px-b-when-a-llt/49452592#49452592", "title": "Solving for Lx=b and Px=b when A=LLt", "body": "<p>Have a look how <code>_solve_impl</code> is implemented for <code>SimplicialCholesky</code>. Essentially, you can simply write:</p>\n\n<pre><code>Eigen::VectorXd x = solver.permutationP()*b; // P not Pinv!\nsolver.matrixL().solveInPlace(x); // matrixL is already a triangularView\n\n// depending on LLt or LDLt use either:\ndouble res_llt = x.squaredNorm();\ndouble res_ldlt = x.dot(solver.vectorD().asDiagonal().inverse()*x);\n</code></pre>\n\n<p>Note that you need to multiply by <code>P</code> and not <code>Pinv</code>, since the inverse of \n<code>A = P^-1 L D L^t P</code> is </p>\n\n<pre><code>P^-1 L^-t D^-1 L^-1 P\n</code></pre>\n\n<p>because the order of matrices reverses when taking the inverse of a product.</p>\n"}], "owner": {"reputation": 397, "user_id": 958110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ef95da4ba9602c6ad06e9d08f6c7d0c6?s=128&d=identicon&r=PG", "display_name": "yannick", "link": "https://stackoverflow.com/users/958110/yannick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521817006, "creation_date": 1521652677, "question_id": 49412750, "link": "https://stackoverflow.com/questions/49412750/solving-for-lx-b-and-px-b-when-a-llt", "title": "Solving for Lx=b and Px=b when A=LLt", "body": "<p>I am decomposing a sparse SPD matrix A using Eigen. It will either be a LLt or a LDLt deomposition (Cholesky), so we can assume the matrix will be decomposed as <code>A = P-1 LDLt P</code> where P is a permutation matrix, L is triangular lower and D diagonal (possibly identity). If I do</p>\n\n<pre><code>SolverClassName&lt;SparseMatrix&lt;double&gt; &gt; solver;\nsolver.compute(A);\n</code></pre>\n\n<p>To solve <code>Lx=b</code> then is it efficient to do the following?</p>\n\n<pre><code>solver.matrixL().TriangularView&lt;Lower&gt;().solve(b)\n</code></pre>\n\n<p>Similarly, to solve <code>Px=b</code> then is it efficient to do the following?</p>\n\n<pre><code>solver.permutationPinv()*b\n</code></pre>\n\n<p>I would like to do this in order to compute <code>bt A-1 b</code> efficiently and stably.</p>\n"}, {"tags": ["c++", "c++11", "templates", "c++14", "variadic-templates"], "comments": [{"owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "edited": false, "score": 0, "creation_date": 1521652359, "post_id": 49412609, "comment_id": 85826989, "body": "I realize this might be an XY problem, in the interest of learning I want to know how this can be done."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 3, "creation_date": 1521652392, "post_id": 49412609, "comment_id": 85827012, "body": "This can be done, but it seems like a bad idea.  It is a lot of work for negative benefit.  It is now harder to work out what that object is, and there are going to be corner cases you cannot automatically solve in a way that is reasonable to people writing code.  One way you&#39;d do it is you&#39;d ask if (args...) can be applied to (f) in any permutation and get the permutation, and then have a &quot;permute args...&quot; and a C++17 style &quot;std apply&quot;.  This ends up requiring factorial compile time and a whole pile of code."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1521652394, "post_id": 49412609, "comment_id": 85827014, "body": "So to understand your question, you want your constructor to work regardless of if the argument order matches the tuple object order? That doesn&#39;t seem like a good idea, because the second that two of your classes take the same argument type it would be ambiguous which to use for which object."}, {"owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1521652427, "post_id": 49412609, "comment_id": 85827036, "body": "@CoryKramer Yes, and I am also aware of that, there would also be an issue if/when some of the types take multiple arguments to the constructor."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1521652639, "post_id": 49412609, "comment_id": 85827167, "body": "Do you require a C++11 solution? Or a C++14 solution can be acceptable?"}, {"owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "edited": false, "score": 0, "creation_date": 1521652776, "post_id": 49412609, "comment_id": 85827251, "body": "This is for a hobby project so c++14 works fine."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1521652814, "post_id": 49412609, "comment_id": 85827280, "body": "@arynaq C++17? If you don&#39;t need a specific version, don&#39;t specify one please :)"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1521653149, "post_id": 49412609, "comment_id": 85827472, "body": "Other question: do you accept a solution where the argument type is required to be <b>exactly</b> the type of the constructor or you need a more flexible solution? I mean: if you require the exact types, <code>Enemy&lt;MachineGun,Turret,Cannon&gt; e2(&quot;3&quot;,14,&#39;5&#39;);</code> can&#39;t be accepted, because <code>&quot;3&quot;</code> is a <code>char const [2]</code>, not a <code>std::string</code>. But if you want a more flexible solution, there is the problem that with a <code>char</code> you can initialize both <code>MachineGun</code> and <code>Turret</code> and the same with an <code>int</code>."}, {"owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "edited": false, "score": 0, "creation_date": 1521653428, "post_id": 49412609, "comment_id": 85827664, "body": "Implicit conversion is fine max :)"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 2, "creation_date": 1521653584, "post_id": 49412609, "comment_id": 85827761, "body": "yes, is fine; but how do you think we can decide that <code>&#39;5&#39;</code> is used to initialize the <code>Turret</code> and <code>14</code> to initialize the <code>MachineGun</code>?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1521660838, "post_id": 49412609, "comment_id": 85831920, "body": "@Yakk: Unless OP wants to impose some kind of ordering on the types, in which case it&#39;s still a lot of work for negative benefit, but not factorial to compile"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1521667454, "post_id": 49412609, "comment_id": 85835276, "body": "@AndyG In the limit it is factorial (to check that no ordering works) I think.  Even if it was like &quot;typeA is preferred over typeB&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "edited": false, "score": 0, "creation_date": 1521660546, "post_id": 49414405, "comment_id": 85831735, "body": "Thank you max! This is very helpful in understanding SFINAE which is still somewhat magic to me :)"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1521660709, "last_edit_date": 1521660709, "creation_date": 1521658149, "answer_id": 49414405, "question_id": 49412609, "link": "https://stackoverflow.com/questions/49412609/stdtuple-automatic-constructor-order/49414405#49414405", "title": "std::tuple, automatic constructor order", "body": "<p>The biggest problem that I see in your question is the risk that the same value can initialize two different object in your tuple.</p>\n\n<p>By example, given</p>\n\n<pre><code>Enemy&lt;MachineGun,Turret,Cannon&gt; e2(\"3\",14,'5');\n</code></pre>\n\n<p>the integer (<code>14</code>) can initialize both <code>MachineGun</code> (a <code>int</code> constructor) and <code>Turret</code> (a <code>char</code> constructor and implicit conversion from <code>int</code> to <code>char</code>).</p>\n\n<p>Same problem for <code>'5'</code>: can initialize both <code>MachineGun</code> (a <code>int</code> constructor and implicit conversion from <code>char</code> to <code>int</code>) and <code>Turret</code> (a <code>char</code> constructor).</p>\n\n<p>The only way I see to solve this problem is to avoid constructor collisions adding deleted constructors.</p>\n\n<p>So you can add a deleted <code>char</code> constructor for <code>MachineGun</code></p>\n\n<pre><code>struct MachineGun\n {\n   explicit MachineGun (int i)\n    { /* something */ }\n\n   MachineGun (char) = delete;\n };\n</code></pre>\n\n<p>and a deleted <code>int</code> constructor for <code>Turret</code></p>\n\n<pre><code>struct Turret\n {\n   explicit Turret (char c) \n    { /* something */ }\n\n   Turret (int) = delete;\n };\n</code></pre>\n\n<p>More generally speaking, you have to add all deleted constructor necessary to avoid all possible ambiguities and to enable only one constructor for every argument you pass to <code>Enemy</code> constructor.</p>\n\n<p>Anyway, given this simplification, you can write a couple of SFINAE alternative functions to select the right element, from a list, to construct an object</p>\n\n<pre><code>template &lt;typename T, typename A0, typename ... As&gt;\nstd::enable_if_t&lt;true == std::is_constructible&lt;T, A0&gt;::value, T&gt;\n    selectArg (A0 &amp;&amp; a0, As ...)\n { return T{ std::forward&lt;A0&gt;(a0) }; }\n\ntemplate &lt;typename T, typename A0, typename ... As&gt;\nstd::enable_if_t&lt;false == std::is_constructible&lt;T, A0&gt;::value, T&gt;\n    selectArg (A0, As &amp;&amp; ... as)\n { return selectArg&lt;T&gt;(std::forward&lt;As&gt;(as)...); }\n</code></pre>\n\n<p>And <code>Enemy</code> simply become</p>\n\n<pre><code>template &lt;typename ... Ts&gt;\nstruct Enemy\n {\n   private:\n      std::tuple&lt;Ts...&gt; device_list;\n\n   public:\n      template &lt;typename ... Args&gt;\n      Enemy (Args ... args)\n        : device_list { selectArg&lt;Ts&gt;(args...)... }\n       { }\n };\n</code></pre>\n\n<p>The following is a full working example</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nstruct MachineGun\n {\n   explicit MachineGun (int i)\n    { std::cout &lt;&lt; \"- MachineGun: \" &lt;&lt; i &lt;&lt; std::endl; }\n\n   MachineGun (char) = delete;\n };\n\nstruct Turret\n {\n   explicit Turret (char c) \n    { std::cout &lt;&lt; \"- Turret: \" &lt;&lt; c &lt;&lt; std::endl; }\n\n   Turret (int) = delete;\n };\n\nstruct Cannon\n {\n   explicit Cannon (std::string const &amp; s)\n    { std::cout &lt;&lt; \"- Cannon: \" &lt;&lt; s &lt;&lt; std::endl; }\n };\n\ntemplate &lt;typename T, typename A0, typename ... As&gt;\nstd::enable_if_t&lt;true == std::is_constructible&lt;T, A0&gt;::value, T&gt;\n    selectArg (A0 &amp;&amp; a0, As ...)\n { return T{ std::forward&lt;A0&gt;(a0) }; }\n\ntemplate &lt;typename T, typename A0, typename ... As&gt;\nstd::enable_if_t&lt;false == std::is_constructible&lt;T, A0&gt;::value, T&gt;\n    selectArg (A0, As &amp;&amp; ... as)\n { return selectArg&lt;T&gt;(std::forward&lt;As&gt;(as)...); }\n\ntemplate &lt;typename ... Ts&gt;\nstruct Enemy\n {\n   private:\n      std::tuple&lt;Ts...&gt; device_list;\n\n   public:\n      template &lt;typename ... Args&gt;\n      Enemy (Args ... args)\n        : device_list { selectArg&lt;Ts&gt;(args...)... }\n       { }\n };\n\nint main()\n {\n   Enemy&lt;MachineGun,Turret,Cannon&gt; e1(1,'2',std::string(\"3\"));\n   Enemy&lt;MachineGun,Turret,Cannon&gt; e2(\"3\",14,'5');\n   Enemy&lt;Turret,MachineGun,Cannon&gt; e3(std::string(\"14\"), 5, '3');\n }\n</code></pre>\n\n<p>Using <code>typename std::enable_if&lt;...&gt;::type</code> instead of <code>std::enable_if_t&lt;...&gt;</code> the solution works also with C++11.</p>\n"}], "owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 49414405, "answer_count": 1, "score": 1, "last_activity_date": 1521660709, "creation_date": 1521652201, "last_edit_date": 1521658219, "question_id": 49412609, "link": "https://stackoverflow.com/questions/49412609/stdtuple-automatic-constructor-order", "title": "std::tuple, automatic constructor order", "body": "<p>Consider the following code snippet</p>\n\n<pre><code>struct MachineGun {\n    explicit  MachineGun (int a);\n};\n\nstruct Turret {\n    explicit  Turret (char b);\n};\n\nstruct Cannon {\n    explicit  Cannon (std::string c);\n};\n\n\ntemplate&lt;typename... Ts&gt;\nstruct Enemy {\n    template&lt;typename...Args&gt;\n    Enemy(Args&amp;&amp;... args)\n        : device_list {std::forward&lt;Args&gt;(args)...}\n    {\n\n    }\n\nprivate:\n    std::tuple&lt;Ts...&gt; device_list;\n};\n</code></pre>\n\n<p>In the above constructor <code>std::forward</code> with the args unpack matches the correct constructor of the type inside the tuple but I cannot figure out how to try to make this match regardless of order of the types or parameters.</p>\n\n<p>Hypothetically the code below represent the same thing: \"Give me an enemy with a machinegun, turret and cannon\"</p>\n\n<pre><code>Enemy&lt;MachineGun,Turret,Cannon&gt; e1(1,'1',std::string(\"1\"));\nEnemy&lt;MachineGun,Turret,Cannon&gt; e2(\"3\",14,'5');\nEnemy&lt;Turret,MachineGun,Cannon&gt; e3(std::string(\"14\"), 5, '33');\n</code></pre>\n\n<p>But how do I actually enable this? <code>e1</code> will compile as the args list matches the type list order, both <code>e2</code> and <code>e3</code> should represent the same thing but how do I make my compiler understand this?</p>\n"}, {"tags": ["c++", "winapi", "print-spooler-api"], "comments": [{"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1521654996, "post_id": 49412505, "comment_id": 85828600, "body": "Could be the printer has its own print processor which is setting jobs to paused before deleting them. Can&#39;t you go by the fact that the job vanishes that it was deleted?"}, {"owner": {"reputation": 1637, "user_id": 1779053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca880190dda0a33ee736cf349ff6c4ee?s=128&d=identicon&r=PG", "display_name": "SyndicatorBBB", "link": "https://stackoverflow.com/users/1779053/syndicatorbbb"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1521728693, "post_id": 49412505, "comment_id": 85863971, "body": "@CareyGregory This is good idea. The issue is that I need to know the exact document that was deleted and this information doesn&#39;t exist for the PRINTER_CHANGE_DELETE_JOB."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1521741107, "post_id": 49412505, "comment_id": 85872588, "body": "You can query almost anything about a print job with <code>GetJob</code> as long as you call it before the job is deleted."}, {"owner": {"reputation": 1637, "user_id": 1779053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca880190dda0a33ee736cf349ff6c4ee?s=128&d=identicon&r=PG", "display_name": "SyndicatorBBB", "link": "https://stackoverflow.com/users/1779053/syndicatorbbb"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1521756423, "post_id": 49412505, "comment_id": 85880430, "body": "Yes good idea. It helped me a lot ! Would you mind to provide an answer so I can select it as accepted?"}, {"owner": {"reputation": 2670, "user_id": 313445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fxw3W.jpg?s=128&g=1", "display_name": "Nick Westgate", "link": "https://stackoverflow.com/users/313445/nick-westgate"}, "edited": false, "score": 0, "creation_date": 1521931001, "post_id": 49412505, "comment_id": 85943823, "body": "Which driver were you using? I&#39;d like to test it. Cheers."}, {"owner": {"reputation": 2670, "user_id": 313445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fxw3W.jpg?s=128&g=1", "display_name": "Nick Westgate", "link": "https://stackoverflow.com/users/313445/nick-westgate"}, "edited": false, "score": 0, "creation_date": 1522028866, "post_id": 49412505, "comment_id": 85968630, "body": "I tested a couple of Kyocera drivers. They don&#39;t have custom PP and the statuses I saw are normal (ends with Deleted, Printed etc). I think the problem is the OP&#39;s code which &quot;polls printer queue&quot;, not using FindFirst/NextPrinterChangeNotification or not using it correctly."}, {"owner": {"reputation": 1637, "user_id": 1779053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca880190dda0a33ee736cf349ff6c4ee?s=128&d=identicon&r=PG", "display_name": "SyndicatorBBB", "link": "https://stackoverflow.com/users/1779053/syndicatorbbb"}, "reply_to_user": {"reputation": 2670, "user_id": 313445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fxw3W.jpg?s=128&g=1", "display_name": "Nick Westgate", "link": "https://stackoverflow.com/users/313445/nick-westgate"}, "edited": false, "score": 0, "creation_date": 1522045712, "post_id": 49412505, "comment_id": 85973035, "body": "@NickWestgate Hi Nick, sorry for the delay. I will send you the driver later on today I don&#39;t remember the name. It is not right. I do use FindFirstPrinterChangeNotification and FindNextPrinterChangeNotification and I do use them correctly. I&#39;m not sure how you tested it but it is not enough only to install a driver, you should also configure the printer to pause any job it receives. Make sure you do it first and then test it."}, {"owner": {"reputation": 1637, "user_id": 1779053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca880190dda0a33ee736cf349ff6c4ee?s=128&d=identicon&r=PG", "display_name": "SyndicatorBBB", "link": "https://stackoverflow.com/users/1779053/syndicatorbbb"}, "reply_to_user": {"reputation": 2670, "user_id": 313445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fxw3W.jpg?s=128&g=1", "display_name": "Nick Westgate", "link": "https://stackoverflow.com/users/313445/nick-westgate"}, "edited": false, "score": 0, "creation_date": 1522055582, "post_id": 49412505, "comment_id": 85978283, "body": "@NickWestgate As I promised, the driver name is Kyocera ECOSYS M3550idn KX. I remind you that it is also related to the printer configuration. Thank you for the help!"}, {"owner": {"reputation": 2670, "user_id": 313445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fxw3W.jpg?s=128&g=1", "display_name": "Nick Westgate", "link": "https://stackoverflow.com/users/313445/nick-westgate"}, "edited": false, "score": 0, "creation_date": 1522064396, "post_id": 49412505, "comment_id": 85984082, "body": "Like the ones <a href=\"https://www.kyoceradocumentsolutions.eu/index/service/dlc.false.driver.ECOSYSM3550IDN._.EN.html\" rel=\"nofollow noreferrer\">here</a>? I tried the V4 and KX ones today with no problem. When you say configure the printer to pause any job, do you mean the printer or driver or print queue? (Obviously I don&#39;t have the physical printer.) I have software that pauses the job. Is that enough? Since Carey has already answered, feel free to contact me via email etc."}, {"owner": {"reputation": 1637, "user_id": 1779053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca880190dda0a33ee736cf349ff6c4ee?s=128&d=identicon&r=PG", "display_name": "SyndicatorBBB", "link": "https://stackoverflow.com/users/1779053/syndicatorbbb"}, "reply_to_user": {"reputation": 2670, "user_id": 313445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fxw3W.jpg?s=128&g=1", "display_name": "Nick Westgate", "link": "https://stackoverflow.com/users/313445/nick-westgate"}, "edited": false, "score": 0, "creation_date": 1522065725, "post_id": 49412505, "comment_id": 85984966, "body": "@NickWestgate In my enviroment there is a print server and this evniorment is configurated (using software as you specified) to pause any new job. Then If I want to really print the document, I come to the printer, enter my password, select one of the pending documents and select print. No problem. You can also feel free to contact me via email if you need help to reproduce it."}, {"owner": {"reputation": 2670, "user_id": 313445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fxw3W.jpg?s=128&g=1", "display_name": "Nick Westgate", "link": "https://stackoverflow.com/users/313445/nick-westgate"}, "edited": false, "score": 0, "creation_date": 1522092993, "post_id": 49412505, "comment_id": 86002627, "body": "Your network profile has no contact details (mine does) and googling your handle only finds Stack Exchange accounts (google me - I&#39;m not the wrestler - follow my SE pic to get me on Twitter)."}], "answers": [{"comments": [{"owner": {"reputation": 1637, "user_id": 1779053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca880190dda0a33ee736cf349ff6c4ee?s=128&d=identicon&r=PG", "display_name": "SyndicatorBBB", "link": "https://stackoverflow.com/users/1779053/syndicatorbbb"}, "edited": false, "score": 0, "creation_date": 1521787000, "post_id": 49440760, "comment_id": 85889027, "body": "Just one last thing, you mean that I should use polling calling the GeJob function and keep following the jobs ? Because when a job is deleted I don&#39;t have information about it (even not JobId)."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 1637, "user_id": 1779053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca880190dda0a33ee736cf349ff6c4ee?s=128&d=identicon&r=PG", "display_name": "SyndicatorBBB", "link": "https://stackoverflow.com/users/1779053/syndicatorbbb"}, "edited": false, "score": 0, "creation_date": 1521814711, "post_id": 49440760, "comment_id": 85905893, "body": "@SyndicatorBBB Well, you&#39;re going to need some way of detecting that the job disappeared. When you get notified the job was created, you could call GetJob to get the info you need, and then save that in a list to be used later if the job vanishes without a delete notification."}, {"owner": {"reputation": 1637, "user_id": 1779053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca880190dda0a33ee736cf349ff6c4ee?s=128&d=identicon&r=PG", "display_name": "SyndicatorBBB", "link": "https://stackoverflow.com/users/1779053/syndicatorbbb"}, "edited": false, "score": 0, "creation_date": 1521877699, "post_id": 49440760, "comment_id": 85927651, "body": "Okay, I guess I need to work with it a little bit more. I was afraid that after the job is deleted, I won&#39;t be able to get details on this job using GetJob because the job was already deleted."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 1637, "user_id": 1779053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca880190dda0a33ee736cf349ff6c4ee?s=128&d=identicon&r=PG", "display_name": "SyndicatorBBB", "link": "https://stackoverflow.com/users/1779053/syndicatorbbb"}, "edited": false, "score": 1, "creation_date": 1521903259, "post_id": 49440760, "comment_id": 85934885, "body": "@SyndicatorBBB You won&#39;t. Once the job is deleted it&#39;s gone and you can&#39;t query anything about it. You have to do that query up front and save the info you need."}], "tags": [], "owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "is_accepted": true, "score": 1, "last_activity_date": 1521766394, "creation_date": 1521766394, "answer_id": 49440760, "question_id": 49412505, "link": "https://stackoverflow.com/questions/49412505/when-job-is-printed-last-job-status-is-job-status-paused-instead-of-job-status/49440760#49440760", "title": "When job is printed, last job status is JOB_STATUS_PAUSED, instead of JOB_STATUS_PRINTED", "body": "<p>It may be that the Kyocera printer has its own print processor which is setting print jobs to a paused state before deleting them. In that case, you can still detect the deletion by the fact that the job disappears. Obviously, you'll have to keep a list of ongoing print jobs in order to detect deletions in this manner. </p>\n\n<p>When the print job first appears, you should call the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd144894(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>GetJob</code> function</a> with the <code>Level</code> parameter set to 2 and pass a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd145020(v=vs.85).aspx\" rel=\"nofollow noreferrer\">JOB_INFO_2</a> struct to be filled in. The JOB_INFO_2 struct will provide all the information about a print job that's available.</p>\n"}], "owner": {"reputation": 1637, "user_id": 1779053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ca880190dda0a33ee736cf349ff6c4ee?s=128&d=identicon&r=PG", "display_name": "SyndicatorBBB", "link": "https://stackoverflow.com/users/1779053/syndicatorbbb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 49440760, "answer_count": 1, "score": 1, "last_activity_date": 1521766394, "creation_date": 1521651899, "question_id": 49412505, "link": "https://stackoverflow.com/questions/49412505/when-job-is-printed-last-job-status-is-job-status-paused-instead-of-job-status", "title": "When job is printed, last job status is JOB_STATUS_PAUSED, instead of JOB_STATUS_PRINTED", "body": "<p>I poll printer queue on any change like JOB_CHANGE, and if I see that some job disappeared, I report to server that job has been printed or deleted, according to job last status.</p>\n\n<p>Problem is that the printer Kyocera M3550 returns as the last status JOB_STATUS_PAUSED, but no JOB_STATUS_DELETED or JOB_STATUS_PRINTED.</p>\n\n<p>These are the statutes I get in ascending order:</p>\n\n<ul>\n<li>JOB_STATUS_SPOOLING</li>\n<li>0 (which doesn't match to any known status) </li>\n<li>JOB_STATUS_PASUED</li>\n</ul>\n\n<p>What does that mean? I can't relay on the JOB_STATUS_PASUED as my last status because it is possible that someone preformed this intentionally.</p>\n"}, {"tags": ["c++", "multithreading", "ncurses"], "comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1521651713, "post_id": 49412359, "comment_id": 85826587, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29545588/two-windows-one-modified-by-thread-random-output\">Two Windows - one modified by thread random output</a>"}, {"owner": {"reputation": 1697, "user_id": 5172820, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/da4f4afa5dabda9b8e3de78e61e55713?s=128&d=identicon&r=PG&f=1", "display_name": "minecraftplayer1234", "link": "https://stackoverflow.com/users/5172820/minecraftplayer1234"}, "reply_to_user": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1521651885, "post_id": 49412359, "comment_id": 85826689, "body": "Its not a duplicate. Its not a ncurses problem"}], "answers": [{"tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": false, "score": 0, "last_activity_date": 1521667847, "last_edit_date": 1521667847, "creation_date": 1521657601, "answer_id": 49414260, "question_id": 49412359, "link": "https://stackoverflow.com/questions/49412359/properly-update-class-members/49414260#49414260", "title": "Properly update class members", "body": "<p>Process of creating threads is your issue.</p>\n\n<pre><code>for (auto i = 0; i &lt; 4; i++) {\n    philosophers.push_back(philosopher(i + 1, table, table.forks[i], table.forks[i + 1]));\n}\n</code></pre>\n\n<p>in above code you create <code>philosopher</code> object which is inserted into vector. In constructor of <code>philosopher</code> you create thread</p>\n\n<pre><code>    philosopher(int _id, dining_philosophers &amp;table_ref, fork l, fork r)\n    : id(_id), left_fork(l), right_fork(r), table(table_ref),\n      t(&amp;philosopher::live, this) {} // &lt;&lt;&lt;&lt;&lt;---------------------\n</code></pre>\n\n<p>so <code>t</code> thread was created and it took as thread function - <code>live</code> method, and this method is being called on <code>this</code> object. </p>\n\n<p>After calling </p>\n\n<pre><code>philosophers.push_back(philosopher(i + 1, table, table.forks[i], table.forks[i + 1]));\n</code></pre>\n\n<p>temporary object <code>philosopher</code> in <code>push_back</code> method is moved, so moved object gets new value of <code>this</code> pointer. While calling <code>push_back</code> method reallocation of memory occurs too ,so all created objectes are moved. This way of constructing objects is issue - thread function refers to object which doesn't exist, object was moved so its <code>this</code> pointer is invalid.</p>\n\n<p>For me you should create all objects and then you can start thread.</p>\n\n<p>1) remove </p>\n\n<pre><code>   t(&amp;philosopher::live, this) {}\n</code></pre>\n\n<p>from constructor</p>\n\n<p>2) add new method in <code>philosopher</code> class to start thread</p>\n\n<pre><code>void startTask () {\n    t = thread(&amp;philosopher::live,this);\n}\n</code></pre>\n\n<p>3) create and start threads</p>\n\n<pre><code>    for (auto i = 0; i &lt; 4; i++) {\n    philosophers.push_back(\n        philosopher(i + 1, table, table.forks[i], table.forks[i + 1]));\n}\nphilosophers.push_back(\n    philosopher(5, table, table.forks[4], table.forks[0]));\nfor (int i = 0; i &lt; 5; ++i)\n   philosophers[i].startTask();\n</code></pre>\n\n<p>And the last issue, your current constructor looks like </p>\n\n<pre><code>philosopher(int _id, dining_philosophers &amp;table_ref, fork l, fork r)\n    : id(_id), left_fork(l), right_fork(r), table(table_ref),\n</code></pre>\n\n<p><code>left_fork</code> and <code>right_fork</code> are references, now you bind reference to temporary objects - <code>l</code> and <code>r</code>, change it to </p>\n\n<pre><code>philosopher(int _id, dining_philosophers &amp;table_ref, fork&amp; l, fork&amp; r)\n    : id(_id), left_fork(l), right_fork(r), table(table_ref),\n</code></pre>\n"}], "owner": {"reputation": 1697, "user_id": 5172820, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/da4f4afa5dabda9b8e3de78e61e55713?s=128&d=identicon&r=PG&f=1", "display_name": "minecraftplayer1234", "link": "https://stackoverflow.com/users/5172820/minecraftplayer1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1521667847, "creation_date": 1521651453, "last_edit_date": 1521662909, "question_id": 49412359, "link": "https://stackoverflow.com/questions/49412359/properly-update-class-members", "title": "Properly update class members", "body": "<p>I am trying to write a program solving 5 dining philosophers problem. I am on the beginning, so for now I want every philosopher to just think, eat, without any synchronization, looking at forks etc. This is what I wrote:</p>\n\n<pre><code>#pragma once\n#include &lt;atomic&gt;\n#include &lt;chrono&gt;\n#include &lt;mutex&gt;\n#include &lt;random&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n\n#include &lt;fork.hpp&gt;\n\nclass dining_philosophers {\npublic:\n    // std::vector&lt;philosopher&gt; philosophers;\n    std::array&lt;fork, 5&gt; forks;\n    // ui u;\n    dining_philosophers();\n    std::atomic&lt;bool&gt; ready{false};\n};\n\ndining_philosophers::dining_philosophers() {}\n\nclass philosopher {\npublic:\n    dining_philosophers &amp;table;\n    // ui &amp;u;\n    fork &amp;left_fork;\n    fork &amp;right_fork;\n    std::mt19937 rng{std::random_device{}()};\n    int state = -1;\n    int progress = 0;\n    int id;\n    std::thread t;\n    philosopher();\n    philosopher(int _id, dining_philosophers &amp;table_ref, fork l, fork r)\n        : id(_id), left_fork(l), right_fork(r), table(table_ref),\n          t(&amp;philosopher::live, this) {}\n    void live();\n    void eat();\n    void think();\n    void wait_for_forks();\n    void release_forks();\n};\n\nvoid philosopher::live() {\n    while (!table.ready) {\n        std::this_thread::yield();\n    }\n    while (true) {\n        think();\n        // wait_for_forks();\n        eat();\n        // release_forks();\n    }\n}\n\nvoid philosopher::think() {\n    state = 0;\n    int part = std::uniform_int_distribution&lt;int&gt;(15, 25)(rng);\n    int thinkingTime = part * 200; // in miliseconds\n    for (auto i = 0; i &lt; part; i++) {\n        double p = (double)i / (double)part;\n        progress = p * 100;\n        // std::thread t(&amp;ui::update_state, &amp;u, id, \"thinking\", progress);\n        // u.update_state(id, \"thinking\", progress);\n        // t.join();\n        std::this_thread::sleep_for(std::chrono::milliseconds(200));\n    }\n}\n\nvoid philosopher::eat() {\n    state = 1;\n    int part = std::uniform_int_distribution&lt;int&gt;(15, 25)(rng);\n    int thinkingTime = part * 200; // in miliseconds\n    for (auto i = 0; i &lt; part; i++) {\n        double p = (double)i / (double)part;\n        progress = p * 100;\n        // std::thread t(&amp;ui::update_state, &amp;u, id, \"thinking\", progress);\n        // u.update_state(id, \"thinking\", progress);\n        // t.join();\n        std::this_thread::sleep_for(std::chrono::milliseconds(200));\n    }\n}\n</code></pre>\n\n<p><code>class fork</code> is just empty, I wrote it to use it later.</p>\n\n<p>Now I need to print some information about what's going on using ncurses. I thought about making it like this: I have a global vector of philosophers. Every 200ms my other thread using <code>ui::update()</code> function checks for philosophers members, like id, state and progress and prints it out. I wrote something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ncurses.h&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n\n#include &lt;dining_philosophers.hpp&gt;\n\nstd::vector&lt;philosopher&gt; philosophers;\n\nclass ui {\nprivate:\n    int row;\n    int col;\n    std::mutex m;\n\npublic:\n    ui();\n    ~ui();\n    void print_initial_state();\n    void update_state(int id, const char *state, int progress);\n    void update();\n};\n\nui::ui() {\n    initscr();\n    // noecho();\n    start_color();\n    getmaxyx(stdscr, col, row);\n}\n\nui::~ui() { endwin(); }\n\nvoid ui::update() {\n    int x = 10;\n    int y = 10;\n    while (true) {\n        for (auto &amp;phil : philosophers) {\n            int id = phil.id;\n            int state = phil.state;\n            int progress = phil.progress;\n            move(y + id - 1, 0);\n            clrtoeol();\n            move(y + id - 1, x);\n            printw(\"Philosopher %d is %d, progress: %d%%\", id, state, progress);\n            refresh();\n        }\n        std::this_thread::sleep_for(std::chrono::milliseconds(200));\n    }\n}\n\nint main() {\n    dining_philosophers table;\n    ui u;\n    // std::vector&lt;philosopher&gt; philosophers;\n    for (auto i = 0; i &lt; 4; i++) {\n        philosophers.push_back(\n            philosopher(i + 1, table, table.forks[i], table.forks[i + 1]));\n    }\n    philosophers.push_back(\n        philosopher(5, table, table.forks[4], table.forks[0]));\n    // std::thread t{[&amp;]() {}};\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    table.ready = true;\n    std::thread t1(&amp;ui::update, &amp;u);\n    // std::this_thread::sleep_for(std::chrono::seconds(5));\n    // t.join();\n    t1.join();\n    for (auto &amp;p : philosophers) {\n        p.t.join();\n    }\n}\n</code></pre>\n\n<p>I know I don't have a proper thread closing, for now I use <kbd>Ctrl</kbd>+<kbd>C</kbd>. The problem is that ncurses for five philosophers prints:</p>\n\n<pre><code>Philosopher 1 is -1, progress: 0%\nPhilosopher 2 is -1, progress: 0%\n</code></pre>\n\n<p>and so on. If in update function I would do <code>philosophers[0].progress++</code>, it would start to increment the progress. So I guess the problem is that if the thread in philosopher (<code>live()</code> function) changes something, the change does not appear in the global vector. Is there a way to change that behaviour?</p>\n"}, {"tags": ["c++", "ssl", "openssl"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1521651218, "post_id": 49412223, "comment_id": 85826231, "body": "What does the documentation says about error -1?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1521651254, "post_id": 49412223, "comment_id": 85826263, "body": "In case you didn&#39;t check, <a href=\"http://xkcd.com/1024/\" rel=\"nofollow noreferrer\">here is an useful guide</a>."}, {"owner": {"reputation": 21, "user_id": 9529988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a7da5a79cd61ae7b58be8f527654084?s=128&d=identicon&r=PG&f=1", "display_name": "tsschnell", "link": "https://stackoverflow.com/users/9529988/tsschnell"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1521651453, "post_id": 49412223, "comment_id": 85826408, "body": "@YSC For return value &lt; 0: The TLS/SSL handshake was not successful, because a fatal error occurred either at the protocol level or a connection failure occurred. The shutdown was not clean. It can also occur of action is need to continue the operation for non-blocking BIOs. Call SSL_get_error() with the return value ret to find out the reason."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521655722, "post_id": 49412223, "comment_id": 85828988, "body": "Does a network analyzer like Wireshark provide any usable information in the packet trace? For example, is a connection to the remote target being made at all?"}, {"owner": {"reputation": 21, "user_id": 9529988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a7da5a79cd61ae7b58be8f527654084?s=128&d=identicon&r=PG&f=1", "display_name": "tsschnell", "link": "https://stackoverflow.com/users/9529988/tsschnell"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521704358, "post_id": 49412223, "comment_id": 85846682, "body": "@user4581301 i&#39;ve updated my question to provide more details"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521705567, "post_id": 49412223, "comment_id": 85847355, "body": "Sadly all I get from that is what you probably already knew, port opened, TCP connection established, no attempt at SSL negotiation, 90 seconds later, connection terminated. Does <code>SSL_connect()</code> wait the full 90 seconds before reporting failure and terminating?"}, {"owner": {"reputation": 21, "user_id": 9529988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a7da5a79cd61ae7b58be8f527654084?s=128&d=identicon&r=PG&f=1", "display_name": "tsschnell", "link": "https://stackoverflow.com/users/9529988/tsschnell"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521715261, "post_id": 49412223, "comment_id": 85853918, "body": "@user4581301 <code>SSL_connect()</code> fails immediately, i think on server side the connection is being closed on timeout."}, {"owner": {"reputation": 21, "user_id": 9529988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a7da5a79cd61ae7b58be8f527654084?s=128&d=identicon&r=PG&f=1", "display_name": "tsschnell", "link": "https://stackoverflow.com/users/9529988/tsschnell"}, "edited": false, "score": 0, "creation_date": 1521716014, "post_id": 49412223, "comment_id": 85854494, "body": "I&#39;ll provide you more details: this problem comes out on a particular os <a href=\"http://www.on-time.com/rtos-32.htm\" rel=\"nofollow noreferrer\">ontime rtos</a>.  I&#39;ve compiled the whole library and generated dlls through an old compiler, borland 5.02. I load the dlls with <code>LoadLibrary()</code> and get the functions i need through <code>GetProcAddress()</code>. Actually i have no problem on my pc with these dlls, i use the same code and they do work fine, while on the other os they don&#39;t."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521734477, "post_id": 49412223, "comment_id": 85868290, "body": "I don&#39;t think I&#39;m going to be much help here. <code>WSAEINPROGRESS</code> hints at the program trying to use the socket while winsock is connecting it. If there is an option to build the DLL with extra debugging info (like a verbosity option), I&#39;d turn it on."}], "owner": {"reputation": 21, "user_id": 9529988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a7da5a79cd61ae7b58be8f527654084?s=128&d=identicon&r=PG&f=1", "display_name": "tsschnell", "link": "https://stackoverflow.com/users/9529988/tsschnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 674, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1521704297, "creation_date": 1521651074, "last_edit_date": 1521704297, "question_id": 49412223, "link": "https://stackoverflow.com/questions/49412223/ssl-connect-fails", "title": "SSL_connect() fails", "body": "<p><br/>\nI'm having some troubles with <code>openssl-1.0.1c</code> in c++, more precisely </p>\n\n<blockquote>\n  <p><strong>SSL_connect()</strong> is failing with no reason, and returns -1.<br/>\n  <strong>SSL_get_error()</strong> returns <strong>SSL_SYSCALL_ERROR</strong>.<br/>\n  <strong>ERR_get_error()</strong> returns <strong>0</strong>.<br/>\n  <strong>WSAGetLastError()</strong> returns <strong>WSAEINPROGRESS</strong>.<br/></p>\n</blockquote>\n\n<p>I'm stuck in this, and i have ran out of ideas.<br/>\nIs there anybody who can give me some advice on how to debug this?\nAny suggestion is appreciated,<br/>\nThanks in advance. <br> <br>\nThis is what i get on the server side <br> \n<img src=\"https://image.ibb.co/kO3isx/mosquitto.png\" width=\"600\" height=\"150\"> <br>\nThis is what whireshark shows<br>\n<img src=\"https://preview.ibb.co/kODNkH/wireshark.png\" width=\"750\" height=\"200\"></p>\n"}, {"tags": ["c++", "opencv", "3d", "stack", "2d"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 0, "creation_date": 1521651080, "post_id": 49412165, "comment_id": 85826143, "body": "Could you please illustrate how to do the slice adding?"}, {"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "reply_to_user": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 1, "creation_date": 1521651162, "post_id": 49412165, "comment_id": 85826200, "body": "Added, although i strongly suggest reading a tutorial on C++ Vectors"}, {"owner": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 0, "creation_date": 1521651288, "post_id": 49412165, "comment_id": 85826290, "body": "In such case, could I travel from one position (x1, y1, z1) to an immediately upper position doing (x1,y1,z1+1), such that my new position in the matrix would be (x1,y1,z2)?"}, {"owner": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "reply_to_user": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 0, "creation_date": 1521651407, "post_id": 49412165, "comment_id": 85826373, "body": "@thepirate16 Are you looking to access the three channels in an OpenCV image?"}, {"owner": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "reply_to_user": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "edited": false, "score": 0, "creation_date": 1521651541, "post_id": 49412165, "comment_id": 85826472, "body": "@skr_robo no, I only want to travel the 3D matrix by adding a scalar to any of its components."}, {"owner": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 0, "creation_date": 1521651801, "post_id": 49412165, "comment_id": 85826642, "body": "@GPPK Then what you are creating is not a 3D matrix or 3D array, but a collection of 2D arrays, which do not preserve the property of being &quot;travellable&quot; by adding an integer to any of its components. Am I wrong?"}, {"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1521653371, "post_id": 49412165, "comment_id": 85827635, "body": "My answer was focused around not using stack, and using a C++ alternative which Vector is a fairly close match to. I would suggest if your question has changed then this answer may not help you. It&#39;s certainly going to be a mental gymnastic challenge."}], "tags": [], "owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "is_accepted": false, "score": 3, "last_activity_date": 1521651570, "last_edit_date": 1521651570, "creation_date": 1521650919, "answer_id": 49412165, "question_id": 49411997, "link": "https://stackoverflow.com/questions/49411997/c-create-3d-array-out-of-stacking-2d-arrays/49412165#49412165", "title": "C++ : Create 3D array out of stacking 2D arrays", "body": "<p><strong>This answer is in response to the question above of:</strong></p>\n\n<blockquote>\n  <p>In Python I normally use functions like vstack, stack, etc to easily create a 3D array by stacking 2D arrays one onto another.</p>\n</blockquote>\n\n<p>This is certainly possible, you can add matrices into a vector which would be your \"stack\"</p>\n\n<p>For instance you could use a </p>\n\n<pre><code>std::vector&lt;cv::Mat&gt;&gt;\n</code></pre>\n\n<p>This would give you a vector of mats, which would be one slice, and then you could \"layer\" those by adding more slices vector</p>\n\n<p>If you then want to have multiple stacks you can add that vector into another vector:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;cv::Mat&gt;&gt;\n</code></pre>\n\n<p>To add matrix to an array you do:</p>\n\n<pre><code>myVector.push_back(matrix);\n</code></pre>\n\n<p><strong>Edit for question below</strong></p>\n\n<blockquote>\n  <p>In such case, could I travel from one position (x1, y1, z1) to an immediately upper position doing (x1,y1,z1+1), such that my new position in the matrix would be (x1,y1,z2)? </p>\n</blockquote>\n\n<p>You'll end up with something that looks a lot like this. If you have a matrix at element 1 in your vector, it doesn't really have any relationship to the element[2] except for the fact that you have added it into that point. If you want to build relationships then you will need to code that in yourself.\n<a href=\"https://i.stack.imgur.com/qe7RO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qe7RO.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "is_accepted": false, "score": 0, "last_activity_date": 1521652000, "creation_date": 1521652000, "answer_id": 49412540, "question_id": 49411997, "link": "https://stackoverflow.com/questions/49411997/c-create-3d-array-out-of-stacking-2d-arrays/49412540#49412540", "title": "C++ : Create 3D array out of stacking 2D arrays", "body": "<p>Based on the question and comments, I think you are looking for something like this:</p>\n\n<pre><code>std::vector&lt;cv::Mat&gt; vec_im;\n//In side for loop:\nvec_im.push_back(im);\n</code></pre>\n\n<p>Then, you can access it by:</p>\n\n<pre><code>Scalar intensity_1 = vec_im[z1].at&lt;uchar&gt;(y, x);\nScalar intensity_2 = vec_im[z2].at&lt;uchar&gt;(y, x);\n</code></pre>\n\n<p>This assumes that the image is single channel.</p>\n"}, {"tags": [], "owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "is_accepted": false, "score": 3, "last_activity_date": 1521652004, "creation_date": 1521652004, "answer_id": 49412544, "question_id": 49411997, "link": "https://stackoverflow.com/questions/49411997/c-create-3d-array-out-of-stacking-2d-arrays/49412544#49412544", "title": "C++ : Create 3D array out of stacking 2D arrays", "body": "<p>You can actually create a 3D or ND mat with opencv, you need to use the constructor that takes the <a href=\"https://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#a5fafc033e089143062fd31015b5d0f40\" rel=\"nofollow noreferrer\">dimensions</a> as input. Then copy each matrix into (this case) the 3D array</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n\nusing namespace cv;\nusing namespace std;\n\nint main() {\n    // Dimensions for the constructor... set dims[0..2] to what you want\n    int dims[] = {5, 5, 5}; // 5x5x5 3d mat\n\n    Mat m = Mat::zeros(5, 5, CV_8UC1);\n\n    for (size_t i = 0; i &lt; 5; i++) {\n        for (size_t k = 0; k &lt; 5; k++) {\n            m.at&lt;uchar&gt;(i, k) = i + k;\n        }\n    }\n\n    // Mat with constructor specifying 3 dimensions with dimensions sizes in dims.\n    Mat 3DMat = Mat(3, dims, CV_8UC1);\n\n    // We fill our 3d mat.\n    for (size_t i = 0; i &lt; m2.size[0]; i++) {\n        for (size_t k = 0; k &lt; m2.size[1]; k++) {\n            for (size_t j = 0; j &lt; m2.size[2]; j++) {\n                3DMat.at&lt;uchar&gt;(i, k, j) = m.at&lt;uchar&gt;(k, j);\n            }\n        }\n    }\n\n    // We print it to show the 5x5x5 array.\n    for (size_t i = 0; i &lt; m2.size[0]; i++) {\n        for (size_t k = 0; k &lt; m2.size[1]; k++) {\n            for (size_t j = 0; j &lt; m2.size[2]; j++) {\n                std::cout &lt;&lt; (int) 3DMat.at&lt;uchar&gt;(i, k, j) &lt;&lt; \" \";\n            }\n            std::cout &lt;&lt; endl;\n        }\n        std::cout &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 0, "creation_date": 1521709479, "post_id": 49417793, "comment_id": 85849798, "body": "I am executing this and <i>joined</i> does not seem to have the expected dimensions (I am getting 100x2 when I cout <i>joined.size()</i> ) ."}, {"owner": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 0, "creation_date": 1521710841, "post_id": 49417793, "comment_id": 85850695, "body": "My bad, once I use <i>joined.size</i> (without the parenthesis) it shows the correct size."}], "tags": [], "owner": {"reputation": 869, "user_id": 7519513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c34e9268e6feddce2370659088cb28?s=128&d=identicon&r=PG&f=1", "display_name": "Nejc", "link": "https://stackoverflow.com/users/7519513/nejc"}, "is_accepted": true, "score": 3, "last_activity_date": 1521674070, "last_edit_date": 1521674070, "creation_date": 1521672569, "answer_id": 49417793, "question_id": 49411997, "link": "https://stackoverflow.com/questions/49411997/c-create-3d-array-out-of-stacking-2d-arrays/49417793#49417793", "title": "C++ : Create 3D array out of stacking 2D arrays", "body": "<p>The Numpy function <code>vstack</code> returns a contiguous array. Any C++ solution that produces vectors or arrays of <code>cv::Mat</code> objects does not reflect the behaviour of <code>vstack</code> in this regard, becase separate \"layers\" belonging to individual cv::Mat objects will not be stored in contiguous buffer (unless a careful allocation of underlying buffers is done in advance of course).</p>\n\n<p>I present the solution that copies all arrays into a three-dimensional <code>cv::Mat</code> object with a contiguous buffer. As far as the idea goes, this answer is similar to <a href=\"https://stackoverflow.com/a/49412544/7519513\">Aram's answer</a>. But instead of assigning pixel values one by one, I take advantage of OpenCV functions. At the beginning I allocate the matrix which has a size <code>N X ROWS X COLS</code>, where <code>N</code> is the number of 2D images I want to \"stack\" and <code>ROWS x COLS</code> are dimensions of each of these images. </p>\n\n<p>Then I make <code>N</code> steps. On every step, I obtain the pointer to the location of the first element along the \"outer\" dimension. I pass that pointer to the constructor of temporary Mat object that acts as a kind of wrapper around the memory chunk of size <code>ROWS x COLS</code> (but no copies are made) that begins at the address that is pointed-at by pointer. I then use <code>copyTo</code> method to copy <code>i</code>-th image into that memory chunk. Code for <code>N = 2</code>:</p>\n\n<pre><code>cv::Mat img0 = cv::imread(\"image0.png\", CV_IMREAD_GRAYSCALE);\ncv::Mat img1 = cv::imread(\"image1.png\", CV_IMREAD_GRAYSCALE);\n\ncv::Mat images[2] = {img0, img1};  // you can also use vector or some other container\n\nint dims[3] = { 2, img0.rows, img0.cols }; // dimensions of new image  \n\ncv::Mat joined(3, dims, CV_8U); // same element type (CV_8U) as input images\n\nfor(int i = 0; i &lt; 2; ++i)\n{\n  uint8_t* ptr = &amp;joined.at&lt;uint8_t&gt;(i, 0, 0); // pointer to first element of slice i\n\n  cv::Mat destination(img0.rows, img0.cols, CV_8U, (void*)ptr); // no data copy, see documentation\n\n  images[i].copyTo(destination);\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 0, "accepted_answer_id": 49417793, "answer_count": 4, "score": 4, "last_activity_date": 1521735543, "creation_date": 1521650420, "last_edit_date": 1521735543, "question_id": 49411997, "link": "https://stackoverflow.com/questions/49411997/c-create-3d-array-out-of-stacking-2d-arrays", "title": "C++ : Create 3D array out of stacking 2D arrays", "body": "<p>In Python I normally use functions like <em>vstack</em>, <em>stack</em>, etc to easily create a 3D array by stacking 2D arrays one onto another.</p>\n\n<p>Is there any way to do this in C++?</p>\n\n<p>In particular, I have loaded a image into a Mat variable with OpenCV like:</p>\n\n<pre><code>cv::Mat im = cv::imread(\"image.png\", 0);\n</code></pre>\n\n<p>I would like to make a 3D array/Mat of N layers by stacking copies of that Mat variable.</p>\n\n<p><strong>EDIT:</strong> This new 3D matrix has to be \"travellable\" by adding an integer to any of its components, such that if I am in the position (x1,y1,1) and I add +1 to the last component, I arrive to (x1,y1,2). Similarly for any of the coordinates/components of the 3D matrix.</p>\n\n<p><strong>SOLVED:</strong> Both answers from @Aram and @Nejc do exactly what expected. I set @Nejc 's answer as the correct one for his shorter code.</p>\n"}, {"tags": ["c++", "namespaces"], "comments": [{"owner": {"reputation": 861, "user_id": 9003404, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9fe54a5b762ce2377bccdaf8ae705a42?s=128&d=identicon&r=PG&f=1", "display_name": "ICanKindOfCode", "link": "https://stackoverflow.com/users/9003404/icankindofcode"}, "edited": false, "score": 0, "creation_date": 1521650510, "post_id": 49411986, "comment_id": 85825743, "body": "No. You only use the stuff from the namespace. The <code>std</code> namespace contains stuff like <code>cout</code> and <code>string</code> and a <i>LOT</i> of other stuff."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 3, "creation_date": 1521650511, "post_id": 49411986, "comment_id": 85825745, "body": "Both are no. And you need to read books instead of asking too basic questions."}, {"owner": {"reputation": 190, "user_id": 3984892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e311ed4521dda03e9b04dfffb2349b?s=128&d=identicon&r=PG&f=1", "display_name": "zaw", "link": "https://stackoverflow.com/users/3984892/zaw"}, "edited": false, "score": 1, "creation_date": 1521650547, "post_id": 49411986, "comment_id": 85825771, "body": "No, with the &#39;using namespace&#39; statement you enable symbols from the std namespace to be used without the namespace qualifier."}, {"owner": {"reputation": 861, "user_id": 9003404, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9fe54a5b762ce2377bccdaf8ae705a42?s=128&d=identicon&r=PG&f=1", "display_name": "ICanKindOfCode", "link": "https://stackoverflow.com/users/9003404/icankindofcode"}, "reply_to_user": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1521650574, "post_id": 49411986, "comment_id": 85825798, "body": "@liliscent He might just be doing it as a hobby, in which case a book isn&#39;t really a great idea."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 861, "user_id": 9003404, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9fe54a5b762ce2377bccdaf8ae705a42?s=128&d=identicon&r=PG&f=1", "display_name": "ICanKindOfCode", "link": "https://stackoverflow.com/users/9003404/icankindofcode"}, "edited": false, "score": 8, "creation_date": 1521650584, "post_id": 49411986, "comment_id": 85825811, "body": "@KidDoesCodingAndHasNoFriends: That is the opposite of true."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 861, "user_id": 9003404, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9fe54a5b762ce2377bccdaf8ae705a42?s=128&d=identicon&r=PG&f=1", "display_name": "ICanKindOfCode", "link": "https://stackoverflow.com/users/9003404/icankindofcode"}, "edited": false, "score": 1, "creation_date": 1521650897, "post_id": 49411986, "comment_id": 85826012, "body": "I strongly disagree, @KidDoesCodingAndHasNoFriends . Having good references saves a ton of time, even a single book. Without a good guided reference you often lack the correct terminology required to find tutorials or online reference materials via web searches and lack the frame of reference required to tell good materials from bad. Of course that requires finding a good book in the first place. <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">Fortunately Stack Overflow maintains a curated list of trusted reference material</a>"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 861, "user_id": 9003404, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9fe54a5b762ce2377bccdaf8ae705a42?s=128&d=identicon&r=PG&f=1", "display_name": "ICanKindOfCode", "link": "https://stackoverflow.com/users/9003404/icankindofcode"}, "edited": false, "score": 0, "creation_date": 1521651123, "post_id": 49411986, "comment_id": 85826179, "body": "@KidDoesCodingAndHasNoFriends I miss those times when I was a kid, had programming only as a hobby, and had enough time to read all those fancy books about C++ programming :)"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 8922922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73fb1e4a68113361e2558d2207b26400?s=128&d=identicon&r=PG", "display_name": "Nitesh_Adapa", "link": "https://stackoverflow.com/users/8922922/nitesh-adapa"}, "edited": false, "score": 0, "creation_date": 1521812106, "post_id": 49412046, "comment_id": 85904016, "body": "thanks for the help"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 10, "last_activity_date": 1521651224, "last_edit_date": 1521651224, "creation_date": 1521650549, "answer_id": 49412046, "question_id": 49411986, "link": "https://stackoverflow.com/questions/49411986/using-namespace-std/49412046#49412046", "title": "Using namespace std?", "body": "<blockquote>\n  <p>Is above code an equivalent to <code>int std::a,std::b,std::c;</code></p>\n</blockquote>\n\n<p>No.  A <code>using namespace</code> statement means that your code can use members of that namespace without having to qualify them with the namespace's name.</p>\n\n<p>For example, say you have a <code>#include &lt;string&gt;</code> statement followed by a <code>using namespace std;</code> statement.  You can then refer to the <code>std::string</code> class as just <code>string</code> instead.</p>\n\n<p>Or, say you have a <code>#include &lt;iostream&gt;</code> statement followed by a <code>using namespace std;</code> statement.  You can then refer to the <code>std::cin</code> and <code>std::cout</code> objects as just <code>cin</code> and <code>cout</code>, respectively.</p>\n\n<p>Simply <code>using</code> a namespace does not add anything to that namespace.  It is a way of bringing content from the specified namespace into the calling namespace.</p>\n\n<blockquote>\n  <p>If I declared(defined) a namespace <code>Hi</code> after the line <code>using namespace std;</code>. Is <code>Hi</code> a part of <code>std</code></p>\n</blockquote>\n\n<p>No.  To do that, <code>Hi</code> would have to be declared inside of a <code>namespace std</code> block, eg:</p>\n\n<pre><code>namespace std {\n    namespace Hi {\n        ...\n    }\n}\n</code></pre>\n\n<p>But, <a href=\"http://en.cppreference.com/w/cpp/language/extending_std\" rel=\"noreferrer\">that is undefined behavior (except in special cases)</a>, as you are generally not allowed to add things to the <code>std</code> namespace.</p>\n"}, {"tags": [], "owner": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "is_accepted": false, "score": 1, "last_activity_date": 1521650758, "creation_date": 1521650758, "answer_id": 49412109, "question_id": 49411986, "link": "https://stackoverflow.com/questions/49411986/using-namespace-std/49412109#49412109", "title": "Using namespace std?", "body": "<p>No, there is no need for <code>std::Hi</code>.The variables you declare are not in <code>std</code> namespace. The <code>std</code> generally contains common language facilities such as <code>cout</code>, <code>cin</code>, <code>string</code> etc. </p>\n"}], "owner": {"reputation": 133, "user_id": 8922922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73fb1e4a68113361e2558d2207b26400?s=128&d=identicon&r=PG", "display_name": "Nitesh_Adapa", "link": "https://stackoverflow.com/users/8922922/nitesh-adapa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "closed_date": 1521655202, "accepted_answer_id": 49412046, "answer_count": 2, "score": 2, "last_activity_date": 1521651475, "creation_date": 1521650399, "last_edit_date": 1521651475, "question_id": 49411986, "link": "https://stackoverflow.com/questions/49411986/using-namespace-std", "closed_reason": "Needs details or clarity", "title": "Using namespace std?", "body": "<p>I included the line <code>using namespace std;</code>on top of my code. Now consider the declaration   <code>int a,b,c;</code>.Is above code an equivalent to <code>int std::a,std::b,std::c;</code>? If so, consider the following example:</p>\n\n<p>If I declared(defined) a namespace <code>Hi</code> after the line <code>using namespace std;</code>.\nIs <code>Hi</code> a part of <code>std</code> i.e .., am I supposed to use <code>Hi</code> as <code>std::Hi</code>?</p>\n\n<p>I'm a beginner .</p>\n"}, {"tags": ["c++", "visual-studio-2008", "warnings"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1521650250, "post_id": 49411833, "comment_id": 85825561, "body": "Also remember that hovering over a symbol may not be accurate. Intellisense is a totally separate compiler from the compiler that you use to build your code."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1521656732, "post_id": 49411833, "comment_id": 85829564, "body": "Check the symbol(s) before the <code>const</code> have all been defined.  This looks like a &quot;run-on-error&quot; and the compiler is making a best-guess at the problem."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1521656829, "post_id": 49411833, "comment_id": 85829615, "body": "I have, everything is valid, all the custom type definitions exist and I can access them by right clicking and &quot;Go to Definition&quot;"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1521656900, "post_id": 49411833, "comment_id": 85829671, "body": "As @drescherjm said: just because Intellisense can see the symbols does not mean that the real compiler can.  Try using the symbols in a small piece of test code."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1521656949, "post_id": 49411833, "comment_id": 85829687, "body": "The headers are present in the project and are all in the same folder.  I haven&#39;t changed anything."}], "owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521650462, "creation_date": 1521649960, "last_edit_date": 1521650462, "question_id": 49411833, "link": "https://stackoverflow.com/questions/49411833/error-c1243-reported-incorrectly", "title": "error C1243 reported incorrectly", "body": "<p>I'm recompiling a C++ dll, where I have made 0 code changes, except to replace a library in the build, which also meant changing include references.</p>\n\n<p>This is very much a work in progress and is incomplete, when I compile the dll I get so many errors in modules that seem to be completely inaccurate.</p>\n\n<p>For example I get C2143 reported on the last line of:</p>\n\n<pre><code>    typedef void (nliSERVICE_PIN_CALLBACK) (nliPROGRAM_ID const * const pProgramId,\n                                    nliNEURON_ID const * const pNeuronId,\n                                    UINT8 const SubnetId,\n                                    UINT8 const NodeId,\n                                    bool const FromRouter);\n</code></pre>\n\n<p>I've hovered the mouse every type and all check out and all are valid in the project.  But for some reason I am getting this error, unless I am missing something the syntax is correct.</p>\n\n<p>The project is being built with Microsoft Visual Studio 2008.</p>\n\n<p>I have no choice on the version or build.</p>\n\n<p>Error message:\n      Error 213 error C2143: syntax error : missing ')' before 'const'  </p>\n"}, {"tags": ["c++", "arrays", "printing", "char"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 3, "creation_date": 1521649766, "post_id": 49411720, "comment_id": 85825213, "body": "<code>name[21] = n[21]</code> -&gt; <code>strcpy(name, n)</code>"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 5, "creation_date": 1521649774, "post_id": 49411720, "comment_id": 85825218, "body": "<code>name[21] = n[21];</code> This doesnt do what you think it does, <i>and</i> access outside both of these arrays. Also please use std::string instead of char[]."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1521650464, "post_id": 49411720, "comment_id": 85825715, "body": "<i>I know string makes more sense but the teacher demands a char array</i> -- Get another teacher as you&#39;re learning <code>C</code> with a couple of C++ syntax thrown in, not C++."}, {"owner": {"reputation": 480, "user_id": 6459731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/179e020f0454f24c41c44ee25084bdcb?s=128&d=identicon&r=PG&f=1", "display_name": "WARhead", "link": "https://stackoverflow.com/users/6459731/warhead"}, "edited": false, "score": 0, "creation_date": 1521652690, "post_id": 49411720, "comment_id": 85827201, "body": "<i>Student class with Undergrad/grad/gradassist base classes.</i> did you mean derived classes ?"}, {"owner": {"reputation": 77, "user_id": 9529859, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-68HRtBoEetk/AAAAAAAAAAI/AAAAAAAAAeU/tbc3073WYl0/photo.jpg?sz=128", "display_name": "Brody Gore", "link": "https://stackoverflow.com/users/9529859/brody-gore"}, "edited": false, "score": 0, "creation_date": 1521656370, "post_id": 49411720, "comment_id": 85829355, "body": "Yes, I fixed the mistake"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9529859, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-68HRtBoEetk/AAAAAAAAAAI/AAAAAAAAAeU/tbc3073WYl0/photo.jpg?sz=128", "display_name": "Brody Gore", "link": "https://stackoverflow.com/users/9529859/brody-gore"}, "edited": false, "score": 0, "creation_date": 1521653185, "post_id": 49412696, "comment_id": 85827502, "body": "Thank you!! You saved our life!"}], "tags": [], "owner": {"reputation": 384, "user_id": 7193039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SD1Fs.png?s=128&g=1", "display_name": "Matthias Gr&#252;n", "link": "https://stackoverflow.com/users/7193039/matthias-gr%c3%bcn"}, "is_accepted": true, "score": 1, "last_activity_date": 1521652506, "creation_date": 1521652506, "answer_id": 49412696, "question_id": 49411720, "link": "https://stackoverflow.com/questions/49411720/my-char-array-in-my-c-program-will-not-print-anything/49412696#49412696", "title": "My char array in my c++ program will not print anything", "body": "<p>The problem lies here, in the way you initialize the members <em>name</em> and <em>ssn</em>:</p>\n\n<pre><code> Student(const char n[], const char ss[], float&amp; gp, int&amp; cred) {\n      name[21] = n[21];\n      ssn[10] = ss[10];\n</code></pre>\n\n<p>There's more than one thing wrong here</p>\n\n<ol>\n<li><em>name</em> and <em>ssn</em> are char arrays of size 21 and size 10 respectively. This means that valid indices range from 0 to 20 and 0 to 9 respectively. So by accessing <em>name[21]</em> and <em>ssn[10]</em> you're accessing elements past the end of the allotted memory.</li>\n<li>Even if the indices were valid, you would just be assigning a single character by doing it this way.</li>\n</ol>\n\n<p>In order to initialize these member variables the way you're intending, do this:</p>\n\n<pre><code> Student(const char n[], const char ss[], float&amp; gp, int&amp; cred) {\n      strcpy_s(name, sizeof(name), n);\n      strcpy_s(ssn, sizeof(ssn), ss);\n</code></pre>\n\n<p>This will copy all the characters comprising the input strings into your member variables and you will get the desired output.</p>\n"}], "owner": {"reputation": 77, "user_id": 9529859, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-68HRtBoEetk/AAAAAAAAAAI/AAAAAAAAAeU/tbc3073WYl0/photo.jpg?sz=128", "display_name": "Brody Gore", "link": "https://stackoverflow.com/users/9529859/brody-gore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 49412696, "answer_count": 1, "score": 1, "last_activity_date": 1521656354, "creation_date": 1521649617, "last_edit_date": 1521656354, "question_id": 49411720, "link": "https://stackoverflow.com/questions/49411720/my-char-array-in-my-c-program-will-not-print-anything", "title": "My char array in my c++ program will not print anything", "body": "<p>I am doing my first C++ program for my class. I am really new to this program so I have a lot to learn. In my program I am suppose to create a Student class with Undergrad/grad/gradassist derived classes. The name and SSN fields have to be in a char array (I know string makes more sense but the teacher demands a char array). The program mostly works fine except it does not print anything in my char arrays. Please help!</p>\n\n<pre><code>#include &lt;iostream&gt;;\nusing namespace std;\nclass Student {\n  protected:\n    char name[21];\n    char ssn[10];\n    float gpa;\n    int credits;\n\n  public: \n     Student::Student() {};\n\n     Student(const char n[], const char ss[], float&amp; gp, int&amp; cred) {\n      name[21] = n[21];\n      ssn[10] = ss[10];\n      gpa = gp;\n      credits = cred;\n\n\n  }\n\n    virtual void print() {\n     cout &lt;&lt; \"Name: \" &lt;&lt; name &lt;&lt; endl;\n     cout &lt;&lt; \"SSN: \" &lt;&lt; ssn &lt;&lt; endl;\n     cout &lt;&lt; \"GPA: \" &lt;&lt; gpa &lt;&lt; endl;\n     cout &lt;&lt; \"Credits: \" &lt;&lt; credits &lt;&lt; endl;\n }\n    virtual float tuition() const = 0;\n\n\n };\nclass undergrad : public Student {\n  protected:\n    float undergrad_rate;\n    char* year;\n  public:\n   undergrad::undergrad() {}\n\n   undergrad(float ugr, char* yr, const char n[], const char ss[], float&amp; \n   gp, int&amp; cred) :\n   Student(n, ss, gp, cred), undergrad_rate(ugr), year(yr){}\n\n   void set_year(char* yr) {\n    year = yr;\n                            }\n   char* getYear() {\n    return year;\n      }\n   float getRate() {\n    return undergrad_rate;\n      }\n    void print() {\n    Student::print();\n    cout &lt;&lt; \"Undergrad rate: \" &lt;&lt; undergrad_rate &lt;&lt; endl;\n    cout &lt;&lt; \"year: \" &lt;&lt; year &lt;&lt; endl;\n\n\n       }\n\n   float tuition() { \n   //cout &lt;&lt; \"The tuition is $35000\" &lt;&lt; endl;\n   return 35000;\n    }\n\n  };\n class grad : public Student {\n  protected:\n   float grad_rate;\n   char* thesis;\n\n  public:\n\n };\n\n  int main(){\n\n    char* jr = \"Junior\";\n    char* sr1 = \"Senior\";\n    char* fr = \"Freshman\";\n    char* sr = \"Sophmore\";\n\n    undergrad g(380, jr, \"M\", \"000111222\", 4.0, 12);\n    g.print();\n\n\n    system(\"pause\");\n    return 0;\n\n }\n</code></pre>\n"}, {"tags": ["c++", "dynamic-programming"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1521650677, "post_id": 49411717, "comment_id": 85825872, "body": "you probably have some undefined behavior. If you can try running the code under valgrind. It will find many of those things"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 3, "creation_date": 1521651256, "post_id": 49411717, "comment_id": 85826267, "body": "Is part of the competition having unintelligible names?"}, {"owner": {"reputation": 340, "user_id": 5474282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tXrQM.jpg?s=128&g=1", "display_name": "programmingandroid", "link": "https://stackoverflow.com/users/5474282/programmingandroid"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1521651610, "post_id": 49411717, "comment_id": 85826515, "body": "@Caleth, sorry for that. Generally competitive programmers have to focus on getting the task done asap without focusing on code readability. In fact, I just added the comments in the code for this question so that it may be easier to understand. I will update the code soon and change the variable names so that it is better for everyone."}, {"owner": {"reputation": 340, "user_id": 5474282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tXrQM.jpg?s=128&g=1", "display_name": "programmingandroid", "link": "https://stackoverflow.com/users/5474282/programmingandroid"}, "edited": false, "score": 1, "creation_date": 1521652007, "post_id": 49411717, "comment_id": 85826770, "body": "Just updated the code and added more comments explaining the use of every variable."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1521652499, "post_id": 49411717, "comment_id": 85827073, "body": "Can you explain the purpose of <code>leftmost</code> in <code>slv</code>?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1521652588, "post_id": 49411717, "comment_id": 85827134, "body": "Most of your comments repeat <i>what the code does</i>. They need to say <i>why the code does what it does</i>"}, {"owner": {"reputation": 340, "user_id": 5474282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tXrQM.jpg?s=128&g=1", "display_name": "programmingandroid", "link": "https://stackoverflow.com/users/5474282/programmingandroid"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1521652720, "post_id": 49411717, "comment_id": 85827221, "body": "@Caleth, &#39;leftmost&#39; keeps track of the last index that is part of a group. So if the array has 5 elements, and we have chosen the first 2 as a group, then leftmost is equal to 2. Thus, leftmost in a way tells us that we can only form groups in the array remaining from leftmost till n, as we have already used indices till index &#39;leftmost&#39;."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1521657110, "post_id": 49411717, "comment_id": 85829765, "body": "Your code would be easier to manage and more efficient if you used an array of structures, rather than parallel arrays."}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1521656314, "post_id": 49413124, "comment_id": 85829324, "body": "It&#39;s impossible for any implementation of <code>std::max</code> to evaluate its arguments twice. It would be possible for a macro, but it can&#39;t be one."}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1521657144, "post_id": 49413124, "comment_id": 85829783, "body": "@HolyBlackCat You are right, that explanation was wrong. It&#39;s the order of the statements. I have updated my answer. Thanks!"}, {"owner": {"reputation": 340, "user_id": 5474282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tXrQM.jpg?s=128&g=1", "display_name": "programmingandroid", "link": "https://stackoverflow.com/users/5474282/programmingandroid"}, "edited": false, "score": 1, "creation_date": 1521657383, "post_id": 49413124, "comment_id": 85829905, "body": "@MaxVollmer, Thanks! I don&#39;t think I would have figured this out alone."}], "tags": [], "owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "is_accepted": true, "score": 5, "last_activity_date": 1521656908, "last_edit_date": 1521656908, "creation_date": 1521653830, "answer_id": 49413124, "question_id": 49411717, "link": "https://stackoverflow.com/questions/49411717/competitive-programming-code-gives-different-answers-on-online-compilers/49413124#49413124", "title": "Competitive Programming - Code gives different answers on online compilers", "body": "<p><strong>Reason for the different result</strong></p>\n\n<p>The parameters you use in <code>std::max</code> are being executed in a different order online and on your local machine. When <code>comf(leftMosts[i], rightMosts[i]) + solve(rightMosts[i]+1, rightMosts[i])</code> is executed before <code>solve(i+1, leftmost)</code>, you get the desired result. If the order is swapped, you get the wrong result.</p>\n\n<p><strong>Refactored code that works</strong></p>\n\n<p>Here's your code that I refactored for better readability. One of the things I did was breaking up the long return statement in <code>slv</code>. If you switch the order of the lines <code>int a =...</code> and <code>int b =...</code> you will get the wrong result:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;string.h&gt;\n#include &lt;algorithm&gt;\n#include &lt;set&gt;\n\n// terms[] stores the value of all the terms. leftMosts[i] and rightMosts[i] store the leftmost and rightmost occurrences of the ith element in terms[]. \n//solvedValues[] stands for dynamic programming and stores the pre calculated terms of the function solve()\nint numberOfTerms;\nint terms[5005];\nint leftMosts[5005];\nint rightMosts[5005];\nint solvedValues[5005];\n\nint comf(int left,int right)\n{ \n    std::set&lt;int&gt; track;\n    int ret = 0;\n    for(int i = left; i &lt;= right; i++)\n    {\n        if (!track.count(terms[i]))\n        {\n            ret = (ret^terms[i]);\n            track.insert(terms[i]);\n        }\n    }\n    return ret;\n}\n\n// below, solve stands for 'solve', it is terms recursive memoized function\n// returns max sequence from i to (numberOfTerms-1). to find max, call solve(0, -1) so i=0,lefmost=-1. leftmost keeps track of the position of last index of last chosen set.\nint solve(int i, int leftmost)\n{\n    if (i &gt;= numberOfTerms)\n    {\n        return 0;\n    }\n\n    if (solvedValues[i] != -1)\n    {\n        return solvedValues[i];\n    }\n\n    if (leftMosts[i] &lt;= leftmost)\n    {\n        return solve(i+1, leftmost);// we cant go choose leftMosts[i] to rightMosts[i] so we move on\n    }\n\n    // decide if it is better to choose current leftMosts[i] to rightMosts[i] or better to simply move on and skip this.\n    int a = comf(leftMosts[i], rightMosts[i]) + solve(rightMosts[i]+1, rightMosts[i]);\n    int b = solve(i+1, leftmost);\n    return solvedValues[i] = std::max(a, b);\n}\n\nvoid init()\n{\n    scanf(\"%d\", &amp;numberOfTerms);\n    for(int i = 0; i &lt; numberOfTerms; i++)\n    {\n        scanf(\"%d\", &amp;terms[i]);\n    }\n    // init all as -1\n    memset(solvedValues, -1, sizeof(solvedValues));\n    memset(leftMosts, -1, sizeof(leftMosts));\n    memset(rightMosts, -1, sizeof(rightMosts));\n}\n\nint main()\n{\n    init();\n\n    // calc leftMosts[i] and rightMosts[i] for all 'i in terms\n    for (int i = 0; i &lt; numberOfTerms; i++)\n    {\n        for (int leftIndex = 0; leftIndex &lt; i; leftIndex++)\n        {\n            if (terms[leftIndex] == terms[i])\n            {\n                leftMosts[i] = leftIndex;\n                break;\n            }\n        }\n\n        for (int rightIndex = numberOfTerms-1; rightIndex &gt; i; rightIndex--)\n        {\n            if (terms[rightIndex] == terms[i])\n            {\n                rightMosts[i] = rightIndex;\n                break;\n            }\n        }\n\n        if (leftMosts[i] == -1)\n        {\n            leftMosts[i] = i;// if there is no leftmost occ, then leftmost is current\n        }\n\n        if (rightMosts[i] == -1)\n        {\n            rightMosts[i] = i;// same as above for rightmost\n        }\n    }\n\n    printf(\"%d numberOfTerms\", solve(0, -1));\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>What do we learn from this?</strong></p>\n\n<p>Readable, clean code is not only nice to your fellow programmers (and yourself), it also reduces the risk of bugs.</p>\n"}], "owner": {"reputation": 340, "user_id": 5474282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tXrQM.jpg?s=128&g=1", "display_name": "programmingandroid", "link": "https://stackoverflow.com/users/5474282/programmingandroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 49413124, "answer_count": 1, "score": 1, "last_activity_date": 1521664373, "creation_date": 1521649610, "last_edit_date": 1521664373, "question_id": 49411717, "link": "https://stackoverflow.com/questions/49411717/competitive-programming-code-gives-different-answers-on-online-compilers", "title": "Competitive Programming - Code gives different answers on online compilers", "body": "<p>I was trying to solve the <a href=\"http://codeforces.com/problemset/problem/811/C\" rel=\"nofollow noreferrer\">problem 811C on codeforces</a>. I started off coding on sublime-text and managed to come up with a solution after some time. When I ran the program, it gave me the correct answer but when I submitted the code, for some reason I am getting a different answer on codeforces. I <strong>checked if the array is going out of bounds</strong>, but that doesn't seem to be the reason. Here's the code:</p>\n\n<pre><code>/* Code Readability Credit : Max Vollmer */\n#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;string.h&gt;\n#include &lt;algorithm&gt;\n#include &lt;set&gt;\n\n// terms[] stores the value of all the terms. leftMosts[i] and rightMosts[i] store the leftmost and rightmost occurrences of the ith element in terms[]. \n//solvedValues[] stands for dynamic programming and stores the pre calculated terms of the function solve()\nint numberOfTerms;\nint terms[5005];\nint leftMosts[5005];\nint rightMosts[5005];\nint solvedValues[5005];\n\nint comf(int left,int right)// comf = comfort (see problem statement if you do not understand this)\n{ \n    std::set&lt;int&gt; track;\n    int ret = 0;\n    for(int i = left; i &lt;= right; i++)\n    {\n        if (!track.count(terms[i]))\n        {\n            ret = (ret^terms[i]);\n            track.insert(terms[i]);\n        }\n    }\n    return ret;\n}\n\n// below, solve stands for 'solve', it is terms recursive memoized function\n// returns max sequence from i to (numberOfTerms-1). to find max, call solve(0, -1) so i=0,lefmost=-1. leftmost keeps track of the position of last index of last chosen set.\nint solve(int i, int leftmost)\n{\n    if (i &gt;= numberOfTerms)\n    {\n        return 0;\n    }\n\n    if (solvedValues[i] != -1)\n    {\n        return solvedValues[i];\n    }\n\n    if (leftMosts[i] &lt;= leftmost)\n    {\n        return solve(i+1, leftmost);// we cant go choose leftMosts[i] to rightMosts[i] so we move on\n    }\n\n    // decide if it is better to choose current leftMosts[i] to rightMosts[i] or better to simply move on and skip this.\n    return solvedValues[i] = std::max(comf(leftMosts[i], rightMosts[i]) + solve(rightMosts[i]+1, rightMosts[i]), solve(i+1, leftmost));\n}\n\nvoid init()\n{\n    scanf(\"%d\", &amp;numberOfTerms);\n    for(int i = 0; i &lt; numberOfTerms; i++)\n    {\n        scanf(\"%d\", &amp;terms[i]);\n    }\n    // init all as -1\n    memset(solvedValues, -1, sizeof(solvedValues));\n    memset(leftMosts, -1, sizeof(leftMosts));\n    memset(rightMosts, -1, sizeof(rightMosts));\n}\n\nint main()\n{\n    init();\n\n    // calc leftMosts[i] and rightMosts[i] for all 'i in terms\n    for (int i = 0; i &lt; numberOfTerms; i++)\n    {\n        for (int leftIndex = 0; leftIndex &lt; i; leftIndex++)\n        {\n            if (terms[leftIndex] == terms[i])\n            {\n                leftMosts[i] = leftIndex;\n                break;\n            }\n        }\n\n        for (int rightIndex = numberOfTerms-1; rightIndex &gt; i; rightIndex--)\n        {\n            if (terms[rightIndex] == terms[i])\n            {\n                rightMosts[i] = rightIndex;\n                break;\n            }\n        }\n\n        if (leftMosts[i] == -1)\n        {\n            leftMosts[i] = i;// if there is no leftmost occ, then leftmost is current\n        }\n\n        if (rightMosts[i] == -1)\n        {\n            rightMosts[i] = i;// same as above for rightmost\n        }\n    }\n\n    printf(\"%d\\n\", solve(0, -1));\n\n    return 0;\n}\n</code></pre>\n\n<p>Here's the test case:</p>\n\n<blockquote>\n  <p>100 931 4584 2116 3004 3813 62 2819 2998 2080 4906 3198 2443 2952 3793 1958 3864 3985 3169 3134 4011 4525 995 4163 308 4362 1148 4906 3092 \n  1647 244 1370 1424 2753 84 2997 1197 2606 425 3501 2606 683 4747 3884 4787 2166 3017 3080 4303 3352 1667 2636 3994 757 2388 870 1788 988 \n  1303 0 1230 1455 4213 2113 2908 871 1997 3878 4604 1575 3385 236 847 2524 3937 1803 2678 4619 1125 3108 1456 3017 1532 3845 3293 2355\n  2230 4282 2586 2892 4506 3132 4570 1872 2339 2166 3467 3080 2693 1925 2308</p>\n</blockquote>\n\n<p>The Correct Output Should Be :</p>\n\n<blockquote>\n  <p>227685</p>\n</blockquote>\n\n<p>The Wrong Output on Codeforces :</p>\n\n<blockquote>\n  <p>245849</p>\n</blockquote>\n\n<p>Again, on my machine the code works fine and outputs 227685 but when it is run online, the code outputs 245849 for some reason.\nThe code can be <a href=\"https://www.tutorialspoint.com/compile_cpp_online.php\" rel=\"nofollow noreferrer\">tested online here.</a>\nAnd here's an <a href=\"https://imgur.com/a/E5v4e\" rel=\"nofollow noreferrer\">image of the code working on a local machine.</a></p>\n\n<p>I would love to understand what is causing this.</p>\n\n<p><strong>Update :</strong>\nThis error was caused as the variable <code>leftmost</code> in the function <code>solve(int i,int leftmost)</code> was not taken into account when the final calculated value was set to <code>solvedValues[i]</code>. This is a bad/incorrect approach to the problem and results in problems such as the order in <code>std::max()</code> affecting the output of the code.</p>\n"}, {"tags": ["c++", "mfc", "window", "registry", "window-handles"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1521649782, "post_id": 49411436, "comment_id": 85825226, "body": "Unclear, what you are asking. Which aspect of the modality do you hope to implement? What scope of modality are you looking for? And is this really the problem you are trying to solve, or is it part of an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>?"}, {"owner": {"reputation": 53, "user_id": 7459622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fpMn9.jpg?s=128&g=1", "display_name": "Alberto Bricio", "link": "https://stackoverflow.com/users/7459622/alberto-bricio"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1521650044, "post_id": 49411436, "comment_id": 85825431, "body": "I&#39;m trying performing app navigation with a touch screen keyboard pressing Alt+tab"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1521650655, "post_id": 49411436, "comment_id": 85825856, "body": "So what you are <b>really</b> trying accomplish is to prevent the touch keyboard from taking focus, right? That&#39;s a different question."}, {"owner": {"reputation": 53, "user_id": 7459622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fpMn9.jpg?s=128&g=1", "display_name": "Alberto Bricio", "link": "https://stackoverflow.com/users/7459622/alberto-bricio"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1521650962, "post_id": 49411436, "comment_id": 85826061, "body": "Not exactly, what I pretend to do is that the app-switching window never lost the focus, because the user could touch on another window (Desktop for example) and the app-switching window disappears."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 3, "creation_date": 1521651028, "post_id": 49411436, "comment_id": 85826102, "body": "Yes. And that is perfectly fine. That&#39;s what the user expects. It&#39;s the standard design of the app switching application."}, {"owner": {"reputation": 53, "user_id": 7459622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fpMn9.jpg?s=128&g=1", "display_name": "Alberto Bricio", "link": "https://stackoverflow.com/users/7459622/alberto-bricio"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1521711730, "post_id": 49411436, "comment_id": 85851322, "body": "You&#39;re right, nevertheless what I am looking for is the same behaviour that windows osk (example: if you open in CMD <code>osk</code> and type ALT+TAB, app switching window doesn&#39;t lost focus by clicking). I don&#39;t know if there are any way to do the same. Thanks beforehand."}, {"owner": {"reputation": 53, "user_id": 7459622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fpMn9.jpg?s=128&g=1", "display_name": "Alberto Bricio", "link": "https://stackoverflow.com/users/7459622/alberto-bricio"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1521712659, "post_id": 49411436, "comment_id": 85851957, "body": "Sorry I hadn&#39;t understand truly real problem... maybe you&#39;re right and prevent touch keyboard from taking focus is a good solution. Are there any way to do that? Thanks"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1521796159, "post_id": 49411436, "comment_id": 85893487, "body": "<a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20160912-00/?p=94295\" rel=\"nofollow noreferrer\">How can I have a window that rejects activation but still receives pointer input?</a>"}], "owner": {"reputation": 53, "user_id": 7459622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fpMn9.jpg?s=128&g=1", "display_name": "Alberto Bricio", "link": "https://stackoverflow.com/users/7459622/alberto-bricio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521665751, "creation_date": 1521648848, "last_edit_date": 1521665751, "question_id": 49411436, "link": "https://stackoverflow.com/questions/49411436/application-switching-window-as-a-modal-window", "title": "Application-switching window as a modal window", "body": "<p>It is possible to set application-switching window as a Modal window (<a href=\"https://en.wikipedia.org/wiki/Modal_window\" rel=\"nofollow noreferrer\">see definition</a>)?</p>\n\n<p>I mean, this window appears when I press <kbd>Alt</kbd>+<kbd>Ctrl</kbd>+<kbd>Tab</kbd> button at the same time and allows me navigate between opened applications typing \"tab\" key.</p>\n\n<p><a href=\"https://i.stack.imgur.com/f0UE2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f0UE2.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The problem appears when I push/click outside the window (Application-switching window lost focus and disappears).</p>\n\n<p>Are there any way to avoid this problem in C++ MFC? I have tried calling:</p>\n\n<pre><code>CWnd* appSwitchingWnd = GetTopWindow();\nappSwitchingWnd .SetFocus();\n</code></pre>\n\n<p>But it doesn't works...</p>\n\n<p>I will appreciate any kind of help.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 3, "creation_date": 1521648917, "post_id": 49411422, "comment_id": 85824547, "body": "You can&#39;t, <code>name()</code> is implementation defined."}, {"owner": {"reputation": 833, "user_id": 8047760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4420b0b735bf473e56fb2996ae53d39?s=128&d=identicon&r=PG&f=1", "display_name": "Christian G", "link": "https://stackoverflow.com/users/8047760/christian-g"}, "edited": false, "score": 0, "creation_date": 1521648958, "post_id": 49411422, "comment_id": 85824574, "body": "You should only use typeid for debugging purposes: <a href=\"https://stackoverflow.com/questions/32016809/using-typeid-to-get-name-of-derived-class\" title=\"using typeid to get name of derived class\">stackoverflow.com/questions/32016809/&hellip;</a>"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1521648969, "post_id": 49411422, "comment_id": 85824582, "body": "I don&#39;t think you can avoid RTTI with the current C++ standard version. I.e. there is no compile time reflection in C++ yet."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1521649045, "post_id": 49411422, "comment_id": 85824648, "body": "Also, afaik an alias is just a new name for a type so it would share the same typeid, i dont think theres any way for typeid to know which one it should give you"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1521649145, "post_id": 49411422, "comment_id": 85824728, "body": "The only thing that can help you here is a stringification macro."}], "answers": [{"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 1, "last_activity_date": 1521649464, "creation_date": 1521649464, "answer_id": 49411669, "question_id": 49411422, "link": "https://stackoverflow.com/questions/49411422/return-alias-identificator-instead-of-type-in-typeidsome-type-name/49411669#49411669", "title": "Return alias identificator instead of type in typeid(SOME_TYPE).name()", "body": "<blockquote>\n  <p>... alias identificator ...</p>\n</blockquote>\n\n<p>There's no such thing, at least not after compilation. It's just syntactic sugar and doesn't exist in any sense in the final executable.</p>\n\n<p>The <em>only</em> way to grab the local name of a type (as opposed to the implementation-defined and probably-mangled typeid name) is with a stringize/stringify macro.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1521649479, "creation_date": 1521649479, "answer_id": 49411675, "question_id": 49411422, "link": "https://stackoverflow.com/questions/49411422/return-alias-identificator-instead-of-type-in-typeidsome-type-name/49411675#49411675", "title": "Return alias identificator instead of type in typeid(SOME_TYPE).name()", "body": "<blockquote>\n  <p>Can somebody give an advice, how I can do this?</p>\n</blockquote>\n\n<p>The language does not support a mechanism to do this.</p>\n\n<p>What you have is simply a type alias.</p>\n\n<p>From <a href=\"http://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/type_alias</a>:</p>\n\n<blockquote>\n  <p>A type alias declaration introduces a name which can be used as a synonym for the type denoted by type-id. It does not introduce a new type and it cannot change the meaning of an existing type name. </p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 1, "last_activity_date": 1521650062, "last_edit_date": 1521650062, "creation_date": 1521649720, "answer_id": 49411751, "question_id": 49411422, "link": "https://stackoverflow.com/questions/49411422/return-alias-identificator-instead-of-type-in-typeidsome-type-name/49411751#49411751", "title": "Return alias identificator instead of type in typeid(SOME_TYPE).name()", "body": "<p>You can't. Because a type alias is transparent: It is just a synonym for a new type, not a new type. As an implementation detail it doesn't even get mangled in the type system because it's not a type.</p>\n\n<blockquote>\n  <p>\u00a77.1.3 The typedef specifier [dcl.typedef]</p>\n  \n  <ol>\n  <li><p>[...] A name declared with the typedef specifier becomes a typedef-name . Within the scope of its declaration, a typedef-name is\n  syntactically equivalent to a keyword and names the type associated\n  with the identifier in the way described in Clause 8. A typedef-name\n  is thus a synonym for another type. <strong>A typedef-name does not\n  introduce a new type</strong> the way a class declaration (9.1) or enum\n  declaration does.</p></li>\n  <li><p>A typedef-name can also be introduced by an alias-declaration . The identifier following the using keyword becomes a typedef-name and the\n  optional attribute-specifier-seq following the identifier appertains\n  to that typedef-name . It has the same semantics as if it were\n  introduced by the typedef specifier. In particular, <strong>it does not\n  define a new type</strong> and it shall not appear in the type-id .</p></li>\n  </ol>\n</blockquote>\n\n<p><code>typeid(T).name();</code> is pretty much useless anyway. Until we have proper introspection in C++ you have to resort to hacks to get what you want (macros, intrusive techniques or external code generator tools).</p>\n"}], "owner": {"reputation": 463, "user_id": 7273346, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dc49edfca1b789bdfc3d0af669c324be?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrii", "link": "https://stackoverflow.com/users/7273346/dmitrii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 49411669, "answer_count": 3, "score": 0, "last_activity_date": 1521650062, "creation_date": 1521648811, "question_id": 49411422, "link": "https://stackoverflow.com/questions/49411422/return-alias-identificator-instead-of-type-in-typeidsome-type-name", "title": "Return alias identificator instead of type in typeid(SOME_TYPE).name()", "body": "<p>In the following example</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid foo() {\n    const char* name = typeid(T).name();\n    std::cout &lt;&lt; name;\n}\n</code></pre>\n\n<p>the variable 'name' will be initialized by type 'T' name. It is very convinient if we need to print this template type name. But, if we have the alias:</p>\n\n<pre><code>using shortTypeName = std::smth::smth_else::smth_more;\n</code></pre>\n\n<p>in the result of the call</p>\n\n<pre><code>foo&lt;shortTypeName&gt;();\n</code></pre>\n\n<p>will be printed 'std::smth::smth_else::smth_more'. And I need to print exactly the alias name, but not the type it is defined. Can somebody give an advice, how I can do this?</p>\n"}, {"tags": ["c++", "linux", "shared-libraries"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 4, "creation_date": 1521648786, "post_id": 49411343, "comment_id": 85824445, "body": "Depends on the compiler. Some compilers maintain ABI compatibility (what you&#39;d need) between some standards versions. You&#39;d need to consult the docs for your particular compiler"}, {"owner": {"reputation": 2467, "user_id": 1716525, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Fn3LA.jpg?s=128&g=1", "display_name": "Roshan Mehta", "link": "https://stackoverflow.com/users/1716525/roshan-mehta"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1521649795, "post_id": 49411343, "comment_id": 85825235, "body": "What particular thing I should look in compiler docs. I mean the keywords to search for."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1521657592, "post_id": 49411343, "comment_id": 85830012, "body": "Starting point (may be out of date) <a href=\"https://stackoverflow.com/questions/16190269/g-always-backward-compatible-with-older-static-libraries\" title=\"g always backward compatible with older static libraries\">stackoverflow.com/questions/16190269/&hellip;</a>"}], "owner": {"reputation": 2467, "user_id": 1716525, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Fn3LA.jpg?s=128&g=1", "display_name": "Roshan Mehta", "link": "https://stackoverflow.com/users/1716525/roshan-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521648585, "creation_date": 1521648585, "question_id": 49411343, "link": "https://stackoverflow.com/questions/49411343/using-library-with-different-compiler-flag", "title": "Using library with different compiler flag", "body": "<p>can we use a library built with a different flag say -std=c++17 with my program which is going to be built using -std=c++11 in these cases.</p>\n\n<pre><code>A) Same compiler used to build the library:\ncase 1: shared lib (.so)\ncase 2: static library (.a)\n\nB) Different compiler:\ncase 1: shared lib (.so)\ncase 2: static library (.a)\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 0, "creation_date": 1521648792, "post_id": 49411236, "comment_id": 85824449, "body": "That will largely depend on what is the criterion to decide which path policy you should use. Macros work fine if you want the user building the code to be able to pass something like <code>-DUSE_OPERATIONAL_PATH_POLICY</code>. If you want to choose depending on platform features or something else, you may be able to use template meta-programming or <a href=\"http://en.cppreference.com/w/cpp/language/if#Constexpr_If\" rel=\"nofollow noreferrer\"><code>if constexpr</code></a>."}, {"owner": {"reputation": 518, "user_id": 273649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff481edd2d4d3cc46e04b4cb0952b7c4?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/273649/david"}, "reply_to_user": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 1, "creation_date": 1521650468, "post_id": 49411236, "comment_id": 85825718, "body": "This is a project that has legacy tentacles, and legacy development environments all over the place.  Some developers are very attached to the comfort of the specific environments, no matter how different it is from what is going to become the QA environment.  We are moving towards trying to do CI builds, and I need to make is possible for Jenkins to set things up while not making my other devs weep."}], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 273649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff481edd2d4d3cc46e04b4cb0952b7c4?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/273649/david"}, "edited": false, "score": 1, "creation_date": 1521650680, "post_id": 49411344, "comment_id": 85825876, "body": "I have struggled with seeing when &#39;using&#39; is anything more than a convenience.  This is a clear winner for being semantically useful."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 4, "last_activity_date": 1521648587, "creation_date": 1521648587, "answer_id": 49411344, "question_id": 49411236, "link": "https://stackoverflow.com/questions/49411236/specify-template-parameters-at-build-time/49411344#49411344", "title": "Specify Template Parameters at Build Time", "body": "<blockquote>\n  <p>but the only idea I have is fall back to macros to make a selection</p>\n</blockquote>\n\n<p>True.</p>\n\n<hr>\n\n<blockquote>\n  <p>If I do that, then I don't really need the template abstraction for the policy.</p>\n</blockquote>\n\n<p>False. The template abstraction helps you to minimize use of the preprocessor and isolate your policies cleanly.</p>\n\n<p>You can also force instantiation of your template class in a <code>.cpp</code> file to avoid compile-time overhead caused by templates, as you are aware of all the possible policy types.</p>\n\n<hr>\n\n<pre><code>// filereaderimpl.hpp\n\nnamespace detail \n{ \n    template&lt;typename PathPolicy&gt;\n    class FileReaderImpl { /* ... */ };\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>// filereader.hpp\n#include &lt;fileheaderimpl.hpp&gt;\n\n#ifdef SOME_BUILD_TIME_CHOICE\nusing FileReader = detail::FileHeaderImpl&lt;SomePolicy&gt;;\n#else\nusing FileReader = detail::FileHeaderImpl&lt;SomeOtherPolicy&gt;;\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1521649559, "creation_date": 1521649559, "answer_id": 49411702, "question_id": 49411236, "link": "https://stackoverflow.com/questions/49411236/specify-template-parameters-at-build-time/49411702#49411702", "title": "Specify Template Parameters at Build Time", "body": "<p><strong>EDIT: I misread the problem, the solution below will allow policy selection at runtime, you asked for selection at build time.</strong></p>\n\n<p>I think your problem would be better served by inheritance. </p>\n\n<p>So you have a base <code>PathPolicy</code> (you can call it whatever i.e. <code>DefaultPolicy</code>) class and then have other policies inherit from the <code>PathPolicy</code> class. </p>\n\n<p>So your <code>UnitTestPolicy</code> becomes</p>\n\n<pre><code>struct UnitTestPolicy : public PathPolicy\n{\n   public:\n     UnitTestPolicy()\n     {\n       path = \"blah//blah\";\n     }\n} ;\n</code></pre>\n\n<p>Then in your file reader, use the base class only to abstract other implementations of the policy class. That way your file reader doesn't care what the policy is; it's just going to read the file. </p>\n\n<p>Working example <a href=\"http://cpp.sh/5lwe7\" rel=\"nofollow noreferrer\">here</a>. </p>\n"}], "owner": {"reputation": 518, "user_id": 273649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff481edd2d4d3cc46e04b4cb0952b7c4?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/273649/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 49411344, "answer_count": 2, "score": 3, "last_activity_date": 1521649748, "creation_date": 1521648351, "last_edit_date": 1521649748, "question_id": 49411236, "link": "https://stackoverflow.com/questions/49411236/specify-template-parameters-at-build-time", "title": "Specify Template Parameters at Build Time", "body": "<p>I have used templates to implement path policies.</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;DefaultPolicy.h&gt;\n\ntemplate&lt;typename PathPolicy = DefaultPolicy&gt;\nclass FileReader\n{\n    public:\n    double getNextNumber();\n\n    private:\n    PathPolicy pp;\n    readNumbers() { std::ifstream myFile(pp.path); }; //And so on\n };\n</code></pre>\n\n<p>I implemented:</p>\n\n<pre><code>[HEADER]\nstruct DefaultPolicy\n{\n   public:\n   std::string path\n   DefaultPolicy()\n} ;\n\n[IMPLEMENTATION]\nDefaultPolicy::DefaultPolicy() : path(\".\"){}\n</code></pre>\n\n<p>So now I want to implement lots of different policies like:</p>\n\n<pre><code>[HEADER]\nstruct UnitTestPolicy\n{\n   public:\n   std::string path\n   UnitTestPolicy()\n} ;\n\n[IMPLEMENTATION]\nUnitTestPolicy::UnitTestPolicy() : path(\"unittests/resources\"){}\n\n[HEADER]\nstruct OperationalPathPolicy\n{\n   public:\n   std::string path\n   OperationalPathPolicy()\n} ;\n\n[IMPLEMENTATION]\nOperationalPathPolicy::OperationalPathPolicy() : path(\"/sw/cm/resources\"){}\n</code></pre>\n\n<p>I'm not sure how to switch my policies.  These are compile-time choices, and I can select the target that I'm building for, but the only idea I have is fall back to macros to make a selection. If I do that, then I don't really need the template abstraction for the policy.</p>\n\n<p>How should I select a policy class at build time?</p>\n"}, {"tags": ["c++", "linux", "sockets", "chat"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521648400, "post_id": 49411213, "comment_id": 85824157, "body": "It would help a lot if you printed the actual error when a system call like <code>recv</code> fails. Print the value of <code>errno</code>, or use <code>perror</code> to print a nice message describing the error."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521648531, "post_id": 49411213, "comment_id": 85824256, "body": "And unrelated to your current problem, but think about the length reported by <code>strlen</code>... It does not include the string terminator. What happens in the server when you try to print the <i>unterminated</i> string you received?"}, {"owner": {"reputation": 11, "user_id": 9529701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a68116fee1dec89b8f5dd2a22fa886?s=128&d=identicon&r=PG&f=1", "display_name": "MadMax0", "link": "https://stackoverflow.com/users/9529701/madmax0"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521649582, "post_id": 49411213, "comment_id": 85825040, "body": "@Someprogrammerdude as for <code>strlen</code>, I am not sure what happens in the server when I would try on to print the unterminated string, I will try to figure it out. Should I use <code>sizeof</code> instead?"}, {"owner": {"reputation": 11, "user_id": 9529701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a68116fee1dec89b8f5dd2a22fa886?s=128&d=identicon&r=PG&f=1", "display_name": "MadMax0", "link": "https://stackoverflow.com/users/9529701/madmax0"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521649694, "post_id": 49411213, "comment_id": 85825136, "body": "As for proper way to showing errors (sorry for being newbie) Using <code>perror</code>: <code>recv failed: Socket operation on non-socket</code>"}, {"owner": {"reputation": 11, "user_id": 9529701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a68116fee1dec89b8f5dd2a22fa886?s=128&d=identicon&r=PG&f=1", "display_name": "MadMax0", "link": "https://stackoverflow.com/users/9529701/madmax0"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521650577, "post_id": 49411213, "comment_id": 85825802, "body": "Ok, everything is working fine. I have figure it out by google &quot;Socket operation on non-socket&quot;. Thank you anyway @Someprogrammerdude to show me how important is being patient and to properly debug the program :)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521654638, "post_id": 49411213, "comment_id": 85828371, "body": "Send <code>strlen(...) + 1</code> instead, and the terminator will be sent with the string."}], "owner": {"reputation": 11, "user_id": 9529701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a68116fee1dec89b8f5dd2a22fa886?s=128&d=identicon&r=PG&f=1", "display_name": "MadMax0", "link": "https://stackoverflow.com/users/9529701/madmax0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1521650799, "creation_date": 1521648262, "last_edit_date": 1521650799, "question_id": 49411213, "link": "https://stackoverflow.com/questions/49411213/no-data-received-in-simple-socket-chat", "title": "No data received in simple socket chat", "body": "<p>i am trying to write a simple client-server one-way chat (just for learning purpose) but i am stuck at the very beginning. These are codes for both server and client </p>\n\n<p>Server:</p>\n\n<pre><code>#include &lt;stdio.h&gt;      /* for printf() and fprintf() */\n#include &lt;sys/socket.h&gt; /* for socket(), bind(), and connect() */\n#include &lt;arpa/inet.h&gt;  /* for sockaddr_in and inet_ntoa() */\n#include &lt;netinet/in.h&gt;\n#include &lt;stdlib.h&gt;     /* for atoi() and exit() */\n#include &lt;string.h&gt;     /* for memset() */\n#include &lt;unistd.h&gt;     /* for close() */\n#include &lt;stdio.h&gt;  /* for perror() */\n#include &lt;stdlib.h&gt; /* for exit() */\n#include &lt;string.h&gt;\n\n#define MYPORT 3490\n\nint main(int argc, char *argv){\n\nstruct sockaddr_in my_addr;\nstruct sockaddr_in cli_addr;\nint sockfd;\nint newsockfd;\nsocklen_t clilen;\nint n;\nchar client_message[2000];\n\n//socket declaration\nsockfd = socket(AF_INET, SOCK_STREAM, 0);\n\n//filling struct\nmy_addr.sin_family=AF_INET;\nmy_addr.sin_port=htons(MYPORT);\nmy_addr.sin_addr.s_addr=INADDR_ANY;\nmemset(&amp; (my_addr.sin_zero), '0', 8);\n\n//binding socket to address and port\nif(bind(sockfd, (struct sockaddr *)&amp; my_addr, sizeof(my_addr))&lt;0)\n    printf(\"Bind error\");\n\n//listening on the socket\nlisten(sockfd, 5);\nprintf(\"Waiting for connection...\\n\");\nclilen = sizeof(cli_addr);\n\n//accepting connection\nif (newsockfd = accept(sockfd, (struct sockaddr *)&amp; cli_addr, &amp;clilen) &lt;0){  \n    printf(\"Unable to connect\\n\");\n}\nelse\n{\n    printf(\"Connected with %s\\n\", inet_ntoa(cli_addr.sin_addr));\n}\n\n while( (n = recv(newsockfd , client_message , 2000 , 0)) &gt; 0 )\n    {\n\n        printf(client_message);\n    }\n\n if(n == 0)\n    {\n        printf(\"Client disconnected\");\n    }\n    else if(n == -1)\n    {\n        printf(\"recv failed\");\n    }\n\n}\n</code></pre>\n\n<p>Client:</p>\n\n<pre><code>#include &lt;stdio.h&gt;      /* for printf() and fprintf() */\n#include &lt;sys/socket.h&gt; /* for socket(), bind(), and connect() */\n#include &lt;arpa/inet.h&gt;  /* for sockaddr_in and inet_ntoa() */\n#include &lt;netinet/in.h&gt;\n#include &lt;stdlib.h&gt;     /* for atoi() and exit() */\n#include &lt;string.h&gt;     /* for memset() */\n#include &lt;unistd.h&gt;     /* for close() */\n#include &lt;string&gt;\n\nint main(int argc, char * argv[]){\n\nint n;\nint client;\nint dest_port = 3490;\nchar buffer[1000];\n\nstruct sockaddr_in server_addr;\n\nclient = socket(AF_INET, SOCK_STREAM, 0);\nprintf(\"Socket created\\n\");\n\nserver_addr.sin_family=AF_INET;\nserver_addr.sin_port=htons(dest_port);\nserver_addr.sin_addr.s_addr=inet_addr(\"127.0.0.1\");\nmemset(&amp;(server_addr.sin_zero),'0',8);\n\nif(connect(client, (struct sockaddr*)&amp;server_addr, sizeof(server_addr))&lt;0)\n    printf(\"Connection error\");\nprintf(\"Connected with server\\n\");\n\n while(1)\n    {\n        printf(\"Enter message : \");\n        scanf(\"%s\" , buffer);\n\n        //Send some data\n        if( send(client , buffer , strlen(buffer) , 0) &lt; 0)\n        {\n            printf(\"Send failed\");\n            return 1;\n        }\n    }\n}\n</code></pre>\n\n<p>The server output as following:</p>\n\n<pre><code>Waiting for connection...\nConnected with 127.0.0.1\nrecv failed\n</code></pre>\n\n<p>when output of client</p>\n\n<pre><code>Socket created\nConnected with server\nEnter message :\n</code></pre>\n\n<p>I have spent hours reading tutorials, man pages and others and I really can`t solve this. The issue seems to be not as much complicated, so the more upset I am. \nMoreover, when trying to send from server and receive in client, I have got \"send failed\" on the server side. </p>\n\n<p>EDIT: \nAfter using perror and finding out what \"socket operation on non-socket\" means I figure it out that a problem was </p>\n\n<pre><code>if (newsockfd = accept(sockfd, (struct sockaddr *)&amp; cli_addr, &amp;clilen) &lt;0)\n</code></pre>\n\n<p>Which first coompare \"accept...\" with \"0\" and then assign the result of comparison to <code>newsockfd</code>. </p>\n"}, {"tags": ["c++", "googletest"], "comments": [{"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1521648356, "post_id": 49411102, "comment_id": 85824127, "body": "Essential information missing is your build commands and build log. Please add to your post."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 3, "creation_date": 1521658481, "post_id": 49411102, "comment_id": 85830582, "body": "Neither of the duplicate symbols (demangled = <code>BigNumber::isZero()</code> and <code>BigNumber::getNum()</code>) is defined in the posted code, and only the latter is declared in class <code>class BigNumber</code> as posted. The code being compiled and linked is more than we see and differs from what we see. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> needed."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1521816086, "post_id": 49411102, "comment_id": 85907006, "body": "Why are you linking all your tests into a single binary?  Just create one test program from each source file."}], "owner": {"reputation": 760, "user_id": 2517787, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/54a811678fa6312ea181e5eae2d92829?s=128&d=identicon&r=PG", "display_name": "Lance Hardwood", "link": "https://stackoverflow.com/users/2517787/lance-hardwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 403, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1521648937, "creation_date": 1521647944, "last_edit_date": 1521648937, "question_id": 49411102, "link": "https://stackoverflow.com/questions/49411102/googletest-duplicate-symbols-linker-error", "title": "Googletest: Duplicate symbols linker error", "body": "<p>I have tests for my classes <code>ArithmeticSvc</code> and <code>BigNumber</code>. Both header files have their respective header guards. My tests for <code>ArithmeticSvc</code> throw a duplicate symbol error when including <code>BigNumber</code> in its header file. The relevant files are below:</p>\n\n<p><code>BigNumber.h</code></p>\n\n<pre><code>#ifndef BIG_NUMBER_H\n#define BIG_NUMBER_H\n\n#include &lt;string&gt;\n#include \"stack.h\"\nusing namespace std;\n\nclass BigNumber {\n    bool isNegative;\n    string num = \"0\";\n    public:\n        BigNumber(string num);\n        BigNumber(string num, bool isNeg);\n        string getNum();\n};\n\n#endif\n</code></pre>\n\n<p><code>ArithmeticSvc.h</code></p>\n\n<pre><code>#ifndef ARITHMETIC_SVC_H\n#define ARITHMETIC_SVC_H\n\n#include \"bignumber.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass ArithmeticSvc {\n    public:\n        ArithmeticSvc();\n        string evaluate(string exp);\n};\n\n#endif\n</code></pre>\n\n<p><code>bignumber_test.cc</code></p>\n\n<pre><code>#include \"gtest/gtest.h\"\n#include \"bignumber.h\"\n\nnamespace {\n    TEST(BigNumber, ShouldPass) {\n        ASSERT_FALSE(false);\n    }\n}\n\n#endif\n</code></pre>\n\n<p><code>arithmeticsvc_test.cc</code></p>\n\n<pre><code>#include \"gtest/gtest.h\"\n#include \"arithmeticsvc.h\"\n\nnamespace {\n    TEST(ArithmeticSvc, ShouldPass) {\n        ASSERT_TRUE(true);\n    }\n}\n</code></pre>\n\n<p>Error log snippit:</p>\n\n<pre><code>duplicate symbol __ZN9BigNumber6isZeroEv in:\n    /var/folders/m2/cd4zt6556h992_b0g27h1s8c0000gn/T/arithmeticsvc_test-3a62e1.o\n    /var/folders/m2/cd4zt6556h992_b0g27h1s8c0000gn/T/bignumber_test-b9cad9.o\nduplicate symbol __ZN9BigNumber6getNumEv in:\n    /var/folders/m2/cd4zt6556h992_b0g27h1s8c0000gn/T/arithmeticsvc_test-3a62e1.o\n</code></pre>\n\n<p>I use this command to compile tests:</p>\n\n<p><code>g++ -std=c++11 -stdlib=libc++ -lgtest -lpthread *.cc -o main_test</code></p>\n\n<p>Does anyone know how I can test a class with dependencies that also have their own tests in google test?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 12, "creation_date": 1521647766, "post_id": 49410996, "comment_id": 85823664, "body": "Use <code>std::vector</code>, and avoid such problems."}, {"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 0, "creation_date": 1521647771, "post_id": 49410996, "comment_id": 85823670, "body": "<a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1521647837, "post_id": 49410996, "comment_id": 85823718, "body": "Life always goes better with std::vector"}, {"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "edited": false, "score": 0, "creation_date": 1521647930, "post_id": 49410996, "comment_id": 85823784, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4029870/how-to-create-a-dynamic-array-of-integers\">How to create a dynamic array of integers</a>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1521648431, "post_id": 49410996, "comment_id": 85824184, "body": "Your problem is the loop <code>for(int i=0; i&lt;brojUnesenih; ++i){ delete nizKompl[i]; }</code>. That shouldn&#39;t be there. All of those pointers to dynamically allocated objects were just copied to the new sequence of pointers you just allocated. They&#39;re supposed to be <i>retained</i> in the new sequence after expansion (thus the copy). You <i>real</i> problem is you&#39;re not using <code>std::vector</code> as everyone was so quick to point out, and apparently not reading the code."}, {"owner": {"reputation": 55, "user_id": 2535424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daeh4.jpg?s=128&g=1", "display_name": "Adnan Selimovic", "link": "https://stackoverflow.com/users/2535424/adnan-selimovic"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1521648876, "post_id": 49410996, "comment_id": 85824518, "body": "Wow so many std::vector! Well thank you all but I need to implement my own dynamical array as I am studying c++ and trying to understand how pointers work! @WhozCraig Thanks for answering my question!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1521649367, "post_id": 49410996, "comment_id": 85824874, "body": "@AdnanSelimovic <i>I need to implement my own dynamical array</i> -- Then implement a generic dynamic array <i>class</i>, where at the very least you actually learn something worth your time.  Things like the rule of 3, proper cleanup, overloading assignment and copy constructor, etc..  You learn very little with having <code>new[]</code> and <code>delete[]</code> strewn all over the code."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 2535424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daeh4.jpg?s=128&g=1", "display_name": "Adnan Selimovic", "link": "https://stackoverflow.com/users/2535424/adnan-selimovic"}, "edited": false, "score": 0, "creation_date": 1521648264, "post_id": 49411056, "comment_id": 85824064, "body": "I am aware of existence of std::vector but as I have stated in my question I need to use dynamical array."}, {"owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "reply_to_user": {"reputation": 55, "user_id": 2535424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daeh4.jpg?s=128&g=1", "display_name": "Adnan Selimovic", "link": "https://stackoverflow.com/users/2535424/adnan-selimovic"}, "edited": false, "score": 0, "creation_date": 1521648386, "post_id": 49411056, "comment_id": 85824143, "body": "Quote form <code>cppreference.com</code> &quot; std::vector is a sequence container that encapsulates dynamic size arrays.&quot;. <code>std::vector</code> is the dynamic array of the standard template library."}, {"owner": {"reputation": 55, "user_id": 2535424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daeh4.jpg?s=128&g=1", "display_name": "Adnan Selimovic", "link": "https://stackoverflow.com/users/2535424/adnan-selimovic"}, "edited": false, "score": 0, "creation_date": 1521648578, "post_id": 49411056, "comment_id": 85824296, "body": "Sorry I haven&#39;t been clear but I need to implement my own dynamical array."}, {"owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "reply_to_user": {"reputation": 55, "user_id": 2535424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daeh4.jpg?s=128&g=1", "display_name": "Adnan Selimovic", "link": "https://stackoverflow.com/users/2535424/adnan-selimovic"}, "edited": false, "score": 0, "creation_date": 1521648780, "post_id": 49411056, "comment_id": 85824442, "body": "Why? Unless you have a very good reason to do so, don&#39;t do it. You will have a very hard time doing a better job the the maintainers of the stl already did."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1521649129, "post_id": 49411056, "comment_id": 85824719, "body": "@schorsch312 Judging by the verbiage from the OP, his very good reason is assignment requirements and a grade ultimately depends on it. I completely concur in the real world common sense says use a vector; who ever said academia was anything like the real world."}], "tags": [], "owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "is_accepted": false, "score": 3, "last_activity_date": 1521647839, "creation_date": 1521647839, "answer_id": 49411056, "question_id": 49410996, "link": "https://stackoverflow.com/questions/49410996/how-to-expand-dynamically-allocated-array-in-c/49411056#49411056", "title": "How to expand dynamically allocated array in C++?", "body": "<p>Use <code>std::vector&lt;ComplexNumber&gt;</code> and use push_back to allocate memory dynamically. </p>\n\n<p>Your code will look something like this:</p>\n\n<pre><code>std::vector&lt;ComplexNumber&gt; nizKompl;\n\nwhile(true) {\n  cout &lt;&lt; \"Unesite novi kompleksni broj(realni imaginarni): \";\n\n  if(cin &gt;&gt; re &gt;&gt; im){\n    nizKompl.push_back({re,im});\n  } else {\n    cout &lt;&lt; endl &lt;&lt; endl;\n    break;\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1521648959, "post_id": 49411459, "comment_id": 85824575, "body": "Was about to write this up. Thanks for saving me the time. tick."}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 6, "last_activity_date": 1521649087, "last_edit_date": 1521649087, "creation_date": 1521648909, "answer_id": 49411459, "question_id": 49410996, "link": "https://stackoverflow.com/questions/49410996/how-to-expand-dynamically-allocated-array-in-c/49411459#49411459", "title": "How to expand dynamically allocated array in C++?", "body": "<p>If you really need not to use <code>std::vector</code> (for educational reasons), then your problem is here:</p>\n\n<pre><code>for(int i=0; i&lt;brojUnesenih; ++i){\n  delete nizKompl[i];\n}\n</code></pre>\n\n<p>you just copied those <em>pointers</em> to your new, slightly bigger array. If you delete the objects they point to, your new array is full of unusable dangling pointers.</p>\n\n<p>The proximate fixes are:</p>\n\n<ol>\n<li>just don't delete these objects. Consider ownership transferred to the new array and keep them alive. Delete the three lines quoted above.</li>\n<li><p><strong>OR</strong> if you really want to delete the originals, you need to copy them first - this means a deep copy of the object rather than a shallow copy of the pointer, so your new array should be populated like</p>\n\n<pre><code>// shallow copy:\n// copy(nizKompl, nizKompl+brojUnesenih, nizTemp);\n// deep copy:\ntransform(nizKompl, nizKompl+brojUnesenih, nizTemp, clone);\n</code></pre>\n\n<p>with the function</p>\n\n<pre><code>ComplexNumber* clone(ComplexNumber *original) {\n  return new ComplexNumber(*original);\n}\n</code></pre>\n\n<p>NB. I can't think of any good reason to do this, it's just wasteful.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 601, "user_id": 1338667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c6c97eb8a07daf93f2415c6080bd47?s=128&d=identicon&r=PG", "display_name": "nVxx", "link": "https://stackoverflow.com/users/1338667/nvxx"}, "is_accepted": false, "score": 2, "last_activity_date": 1521649265, "creation_date": 1521649265, "answer_id": 49411596, "question_id": 49410996, "link": "https://stackoverflow.com/questions/49410996/how-to-expand-dynamically-allocated-array-in-c/49411596#49411596", "title": "How to expand dynamically allocated array in C++?", "body": "<p>As already mentioned, using <code>std::vector</code> would be the right approach.</p>\n\n<p>But wrt your exact question:</p>\n\n<pre><code>for(int i=0; i&lt;brojUnesenih; ++i){\n    delete nizKompl[i];\n}\n</code></pre>\n\n<p>This is what causes the double delete, since you copy the same pointers to your new array and also delete them.  When entering the first number, you'll create an array of size one and create an object.  On the second number, you'll allocate a new array of size two, copy the first element over to the new array, but also delete it.  And once you add the third element, you'll create a new array of size three, copy the first two pointers and again try to delete them, but the first pointer was already deleted.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1521718388, "last_edit_date": 1521718388, "creation_date": 1521649481, "answer_id": 49411677, "question_id": 49410996, "link": "https://stackoverflow.com/questions/49410996/how-to-expand-dynamically-allocated-array-in-c/49411677#49411677", "title": "How to expand dynamically allocated array in C++?", "body": "<p>It is unclear why you are not using the standard class <code>std::vector</code> and using pointers instead of objects themselves.</p>\n\n<p>Nevertheless it seems you mean something like the following</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;memory&gt;\n\nstruct ComplexNumber\n{\n    ComplexNumber() : ComplexNumber( 0, 0 ) {}\n    ComplexNumber( int re, int im ) : re( re ), im( im ) {}\n    int re;\n    int im;\n};\n\nint main() \n{\n    ComplexNumber **nizKompl = nullptr;\n    size_t brojUnesenih = 0;\n    bool unos;\n\n    do\n    {\n        std::cout &lt;&lt; \"Unesite novi kompleksni broj(realni imaginarni): \";\n\n        int re, im;\n\n        if( ( unos = !!( std::cin &gt;&gt; re &gt;&gt; im ) ) )\n        { \n            ComplexNumber **nizTemp = new ComplexNumber * [brojUnesenih + 1];\n\n            std::copy( nizKompl, nizKompl + brojUnesenih, nizTemp );\n            nizTemp[brojUnesenih] = new ComplexNumber( re, im );\n\n            ++brojUnesenih;\n\n            delete [] nizKompl;\n            nizKompl = nizTemp;\n        }\n    } while ( unos );\n\n    for ( size_t i = 0; i &lt; brojUnesenih; i++ )\n    {\n        std::cout &lt;&lt; \"{ \" &lt;&lt; nizKompl[i]-&gt;re \n                  &lt;&lt; \", \" &lt;&lt; nizKompl[i]-&gt;im\n                  &lt;&lt; \" } \";\n    }\n    std::cout &lt;&lt; std::endl;\n\n    if ( nizKompl )\n    {\n        std::for_each( nizKompl, nizKompl + brojUnesenih, std::default_delete&lt;ComplexNumber&gt;() );\n    }\n\n    delete [] nizKompl;\n\n    return 0;\n}   \n</code></pre>\n\n<p>The program output might look like</p>\n\n<pre><code>Unesite novi kompleksni broj(realni imaginarni): 1 1\nUnesite novi kompleksni broj(realni imaginarni): 2 2\nUnesite novi kompleksni broj(realni imaginarni): 3 3\nUnesite novi kompleksni broj(realni imaginarni): 4 4\nUnesite novi kompleksni broj(realni imaginarni): 5 5\nUnesite novi kompleksni broj(realni imaginarni): a\n{ 1, 1 } { 2, 2 } { 3, 3 } { 4, 4 } { 5, 5 } \n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 2535424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daeh4.jpg?s=128&g=1", "display_name": "Adnan Selimovic", "link": "https://stackoverflow.com/users/2535424/adnan-selimovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 49411459, "answer_count": 4, "score": 3, "last_activity_date": 1521729047, "creation_date": 1521647704, "last_edit_date": 1521729047, "question_id": 49410996, "link": "https://stackoverflow.com/questions/49410996/how-to-expand-dynamically-allocated-array-in-c", "title": "How to expand dynamically allocated array in C++?", "body": "<p>I have tried to implement solution to dynamical expansion of array as user is entering new data in main as shown:</p>\n\n<pre><code>ComplexNumber** nizKompl = new ComplexNumber*[1];\nbool unos = true;\n\nwhile(unos){\n  cout &lt;&lt; \"Unesite novi kompleksni broj(realni imaginarni): \";\n\n  if(cin &gt;&gt; re &gt;&gt; im){ \n    nizKompl[brojUnesenih] = new ComplexNumber(re,im);\n    ++brojUnesenih;\n\n    ComplexNumber** nizTemp = new ComplexNumber*[brojUnesenih+1];\n    copy(nizKompl, nizKompl+brojUnesenih, nizTemp);\n\n    for(int i=0; i&lt;brojUnesenih; ++i){\n      delete nizKompl[i];\n    }\n\n    delete [] nizKompl;\n    nizKompl = nizTemp; \n  } else {\n    cout &lt;&lt; endl &lt;&lt; endl;\n    unos = false;\n  }\n}\n</code></pre>\n\n<p>ComplexNumber is custom type. ComplexNumber works fine but I am having problem with double free or corruption error as I am entering new data and creating new ComplexNumbers in program.</p>\n\n<p>Is there some better way to achieve this?\n<strong>I need to use my own dynamical array instead of std::vector</strong> because It is for educational purpose.</p>\n\n<p>As I understand double free error occurs when you try to free memory which is already free'd. But It seems that I just can't resolve the issue, as I can see no double free should happen. </p>\n\n<p>Is something happening in memory of which I have no knowledge?\nIs it problem with std::copy as I am copying array of pointers of pointers?</p>\n\n<p>I would really appreciate any help or suggestion. Thank you!</p>\n"}, {"tags": ["c++", "arrays", "compare", "lookup"], "comments": [{"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1521648356, "post_id": 49410992, "comment_id": 85824126, "body": "<code>char[] people_names = [&quot;Mario&quot;,&quot;Luigi&quot;];</code> you probably want <code>const char *people_names[] = { &quot;Mario&quot;, &quot;Luigi&quot; };</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3680, "user_id": 7723882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6aUwy.png?s=128&g=1", "display_name": "Matias Barrios", "link": "https://stackoverflow.com/users/7723882/matias-barrios"}, "edited": false, "score": 0, "creation_date": 1521648686, "post_id": 49411099, "comment_id": 85824378, "body": "Thanks so much! This is the issue then."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1521648594, "last_edit_date": 1521648594, "creation_date": 1521647936, "answer_id": 49411099, "question_id": 49410992, "link": "https://stackoverflow.com/questions/49410992/string-array-to-c-function/49411099#49411099", "title": "String array to C++ function", "body": "<p>The problem is that when you pass an array to a function, it decays to a pointer to its first element.</p>\n\n<p>It doesn't matter if you attempt to declare the argument as an array, the compiler still translates it as a pointer. <code>string possible_names[]</code> is equal to <code>string* possible_names</code> when you declare arguments.</p>\n\n<p>The simple solution is to use either <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> or <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a> depending on your needs and use-case.</p>\n\n<p>Using <code>std::vector</code> your code would look something like this:</p>\n\n<pre><code>std::vector&lt;std::string&gt; people_names = { \"Mario\", \"Luigi\" };\n\nbool lookupTerm(const std::string&amp; term, const std::vector&lt;std::string&gt;&amp; possible_names) {\n    for (const std::string &amp;possible_name : possible_names)\n    {\n        if (possible_name == term)\n            return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>One line using <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find</code></a>:</p>\n\n<pre><code>bool lookupTerm(const std::string&amp; term, const std::vector&lt;std::string&gt;&amp; possible_names) {\n    return std::find(possible_names.begin(), possible_names.end(), term) != possible_names.end();\n}\n</code></pre>\n\n<p>If performance becomes a problem you can increase the performance of this by using a sorted vector (using <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\"><code>std::sort</code></a>) and <a href=\"http://en.cppreference.com/w/cpp/algorithm/lower_bound\" rel=\"nofollow noreferrer\"><code>std::lower_bound</code></a>:</p>\n\n<pre><code>//at one point:\nstd::sort(people_names.begin(), people_names.end());\n\nbool lookupTerm(const std::string&amp; term, const std::vector&lt;std::string&gt;&amp; sorted_possible_names) {\n    //sorted_possible_names must be always sorted when you call this!\n    auto i = std::lower_bound(sorted_possible_names.begin(), sorted_possible_names.end(), term);\n    return (i != sorted_possible_names.end() &amp;&amp; *i == term);\n}\n</code></pre>\n"}], "owner": {"reputation": 3680, "user_id": 7723882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6aUwy.png?s=128&g=1", "display_name": "Matias Barrios", "link": "https://stackoverflow.com/users/7723882/matias-barrios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 49411099, "answer_count": 1, "score": 1, "last_activity_date": 1521648594, "creation_date": 1521647693, "question_id": 49410992, "link": "https://stackoverflow.com/questions/49410992/string-array-to-c-function", "title": "String array to C++ function", "body": "<p>I want to check if a given name is inside an array of possible names. I wrote this small debugging function ( yeah... I know it always return true ) trying to understand why it does not work and why I get the below error.</p>\n\n<h3>Code</h3>\n\n<pre><code>char[] people_names = [\"Mario\",\"Luigi\"];\n\nbool lookupTerm (string term, string possible_names[]){\n   for(const string &amp;possible_name : possible_names)\n     cout &lt;&lt; possible_name &lt;&lt;  endl;\n\n    return true;\n}\n</code></pre>\n\n<h3>Error</h3>\n\n<pre><code>jdoodle.cpp: In function 'bool lookupTerm(std::__cxx11::string, std::__cxx11::string*)':\njdoodle.cpp:19:38: error: no matching function for call to 'begin(std::__cxx11::basic_string&lt;char&gt;*&amp;)'\n</code></pre>\n\n<p>I know that it must be really obvious but according to what I have searched for, it should work. Can someone point me in the right direction?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10528, "user_id": 15852, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/be9efe0d1a8a6a184b5ccbe667883215?s=128&d=identicon&r=PG", "display_name": "Kieveli", "link": "https://stackoverflow.com/users/15852/kieveli"}, "edited": false, "score": 0, "creation_date": 1521647845, "post_id": 49410974, "comment_id": 85823726, "body": "You might want to add the foo() function too."}], "answers": [{"comments": [{"owner": {"reputation": 749, "user_id": 1080552, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/d1043eb5fb5084c29d29fd09dc285e6e?s=128&d=identicon&r=PG", "display_name": "steviekm3", "link": "https://stackoverflow.com/users/1080552/steviekm3"}, "edited": false, "score": 0, "creation_date": 1521648212, "post_id": 49411089, "comment_id": 85824018, "body": "Does using the [=] eliminate the dangling references ?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 749, "user_id": 1080552, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/d1043eb5fb5084c29d29fd09dc285e6e?s=128&d=identicon&r=PG", "display_name": "steviekm3", "link": "https://stackoverflow.com/users/1080552/steviekm3"}, "edited": false, "score": 1, "creation_date": 1521648456, "post_id": 49411089, "comment_id": 85824193, "body": "@steviekm3: it captures everything by value, so yes. Please don&#39;t ignore my advice about <code>&amp;</code> and <code>=</code>."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1521651538, "post_id": 49411089, "comment_id": 85826470, "body": "You could also just call <code>std::async(std::launch::async, foo, arg1, arg2)</code> and avoid the capturing lambda"}, {"owner": {"reputation": 749, "user_id": 1080552, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/d1043eb5fb5084c29d29fd09dc285e6e?s=128&d=identicon&r=PG", "display_name": "steviekm3", "link": "https://stackoverflow.com/users/1080552/steviekm3"}, "edited": false, "score": 0, "creation_date": 1521675910, "post_id": 49411089, "comment_id": 85838316, "body": "Yes I will change code to list out the captures.  I\u2019m not sure why in this case code is using capturing lambda instead just doing function call."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 2, "last_activity_date": 1521647912, "creation_date": 1521647912, "answer_id": 49411089, "question_id": 49410974, "link": "https://stackoverflow.com/questions/49410974/confused-over-following-async-behavior/49411089#49411089", "title": "Confused over following async behavior", "body": "<p><code>[&amp;]{ return (foo(arg1,arg2)); }</code> is a <em>lambda expression</em> that produces a <em>closure</em> taking no arguments and returning <code>foo(arg1, arg2)</code> upon invocation.</p>\n\n<p><code>arg1</code> and <code>arg2</code> are captured by reference in the closure. This means that as soon as an iteration of the <code>for</code> loop ends, the closure will hold <strong>dangling references</strong>. This is likely the cause of your problem.</p>\n\n<p>Capture <code>arg1</code> and <code>arg2</code> by value instead:</p>\n\n<pre><code>[arg1, arg2]{ return foo(arg1, arg2); }\n</code></pre>\n\n<p>Using the default <code>&amp;</code> or <code>=</code> captures is usually a bad idea as they can introduce subtle bugs. Prefer listing your captures explicitly unless you have a good reason to not do so.</p>\n"}, {"comments": [{"owner": {"reputation": 749, "user_id": 1080552, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/d1043eb5fb5084c29d29fd09dc285e6e?s=128&d=identicon&r=PG", "display_name": "steviekm3", "link": "https://stackoverflow.com/users/1080552/steviekm3"}, "edited": false, "score": 0, "creation_date": 1521648131, "post_id": 49411101, "comment_id": 85823947, "body": "This sounds correct as the strange results are duplicated values in the return vector, when not running in parallel produced unique values."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 1, "last_activity_date": 1521648368, "last_edit_date": 1521648368, "creation_date": 1521647944, "answer_id": 49411101, "question_id": 49410974, "link": "https://stackoverflow.com/questions/49410974/confused-over-following-async-behavior/49411101#49411101", "title": "Confused over following async behavior", "body": "<p>There's no <code>return</code> in the for loop - the <code>return</code> is in the function that you're passing to <code>async</code>.</p>\n\n<p>The problem is that the function is capturing <code>arg1</code> and <code>arg2</code> by reference, and when it's called some time in the future those objects no longer exist, so attempting to access them is undefined.  </p>\n\n<p>Replace the capture list <code>[&amp;]</code> with <code>[arg1, arg2]</code> to capture them by value instead.<br>\n(And throw in an empty parameter list for good measure: <code>[arg1, arg2]() { ... }</code>.)</p>\n"}], "owner": {"reputation": 749, "user_id": 1080552, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/d1043eb5fb5084c29d29fd09dc285e6e?s=128&d=identicon&r=PG", "display_name": "steviekm3", "link": "https://stackoverflow.com/users/1080552/steviekm3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 49411089, "answer_count": 2, "score": 1, "last_activity_date": 1521648368, "creation_date": 1521647640, "question_id": 49410974, "link": "https://stackoverflow.com/questions/49410974/confused-over-following-async-behavior", "title": "Confused over following async behavior", "body": "<p>I'm trying to figure out following code and am not sure what the std::async part is doing:</p>\n\n<pre><code>std::vector&lt;double&gt; RunParallel( std::vector&lt;std::vector&lt;int&gt;&gt; args)  \n{\n    std::vector&lt;std::future&lt;double&gt;&gt; results(args.size());\n    for( int iter_job = 0;  iter_job &lt; args.size(); ++iter_job )\n    {\n        int arg1 = args[iter_job][0];\n        int arg2 = args[iter_job][1];\n        results[iter_job]= std::async(std::launch::async, [&amp;]\n              { return (foo(arg1,arg2)); });\n    }\n    std::vector&lt;double&gt; returnValues;\n    for(int iter_job =0; iter_job&lt;args.size(); ++iter_job)\n    {\n          returnValues.push_back(results[iter_job].get());\n    }\n }\n</code></pre>\n\n<p>I don't understand what the return is doing in the std::async call.  </p>\n\n<p>Somehow this code is leading to strange results and I wonder if it has to do with the return call in the middle of the first for loop.</p>\n"}, {"tags": ["c++", "r", "gpu", "rcpp", "armadillo"], "answers": [{"tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": true, "score": 0, "last_activity_date": 1521648642, "creation_date": 1521648642, "answer_id": 49411365, "question_id": 49410927, "link": "https://stackoverflow.com/questions/49410927/does-rcpparmadillo-enable-bandicoot/49411365#49411365", "title": "Does RcppArmadillo enable bandicoot?", "body": "<p>The entire Armadillo repo is <em>completely free of any reference to <a href=\"https://github.com/conradsnicta/bandicoot-code\" rel=\"nofollow noreferrer\">bandicoot</a></em> so how could RcppArmadillo possibly support it?</p>\n\n<pre><code>edd@rob:~/git/armadillo-code(unstable)$ ag bandicoot          # silversearcher\nedd@rob:~/git/armadillo-code(unstable)$ grep -r bandicoot .   # standard grep\nedd@rob:~/git/armadillo-code(unstable)$ \n</code></pre>\n\n<p>Also note that <a href=\"https://github.com/conradsnicta/bandicoot-code\" rel=\"nofollow noreferrer\">bandicoot</a> is still labelled experimental.</p>\n\n<p>We do have GPU support from R though, see eg <a href=\"https://github.com/RInstitute/rcpparrayfire\" rel=\"nofollow noreferrer\">RcppArrayFire</a>.</p>\n"}], "owner": {"reputation": 330, "user_id": 7225791, "user_type": "registered", "profile_image": "https://graph.facebook.com/1047163048728191/picture?type=large", "display_name": "Gwendal Yviquel", "link": "https://stackoverflow.com/users/7225791/gwendal-yviquel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 49411365, "answer_count": 1, "score": 0, "last_activity_date": 1521648642, "creation_date": 1521647540, "question_id": 49410927, "link": "https://stackoverflow.com/questions/49410927/does-rcpparmadillo-enable-bandicoot", "title": "Does RcppArmadillo enable bandicoot?", "body": "<p>I just would like to know if RcppArmadillo enables bandicoot, or is there any other way to enable gpu calculation with RcppArmadillo?</p>\n\n<p>Thank you, maybe it is too generalized but i did not find much info on the web about that.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 3990838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca850212cf1cdabbd83e1386ae41f1d?s=128&d=identicon&r=PG&f=1", "display_name": "pawel_j", "link": "https://stackoverflow.com/users/3990838/pawel-j"}, "edited": false, "score": 0, "creation_date": 1521649585, "post_id": 49411253, "comment_id": 85825044, "body": "Shame on me. Thank you :)"}], "tags": [], "owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "is_accepted": true, "score": 2, "last_activity_date": 1521649147, "last_edit_date": 1521649147, "creation_date": 1521648392, "answer_id": 49411253, "question_id": 49410873, "link": "https://stackoverflow.com/questions/49410873/why-the-segfault-on-ostream-stdstring-created-from-char-array/49411253#49411253", "title": "Why the segfault on ostream std::string created from char array", "body": "<p>When I compile your code, I get this warning:</p>\n\n<pre><code>..\\main.cpp: In function 'std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const point_t&amp;)':\n..\\main.cpp:15:1: warning: no return statement in function returning non-void [-Wreturn-type]\n</code></pre>\n\n<p>This means you forgot to return the <code>ostream</code> in your stream insertion operator, causing undefined behavior. Fix it by adding the <code>return</code>:</p>\n\n<pre><code>std::ostream&amp; operator &lt;&lt; (std::ostream &amp;o,const point_t &amp;a){\n  o &lt;&lt; print(a.name, sizeof(a.name)) &lt;&lt; \", \" &lt;&lt; a.y;\n  return o;\n}\n</code></pre>\n\n<p>I recommend always compiling with a high warning level and then striving for warning-free compiles. When the compiler is trying to help you, don't ignore it.</p>\n\n<p>As @nvoigt noted, you should also <code>#include &lt;string&gt;</code>. Your standard library implementation might be getting that included from another header, but you shouldn't depend on that. Also, nothing you show here requires the <code>#include &lt;fstream&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 299, "user_id": 3990838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca850212cf1cdabbd83e1386ae41f1d?s=128&d=identicon&r=PG&f=1", "display_name": "pawel_j", "link": "https://stackoverflow.com/users/3990838/pawel-j"}, "edited": false, "score": 0, "creation_date": 1521649607, "post_id": 49411332, "comment_id": 85825064, "body": "Shame on me. Thank you :)"}], "tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": false, "score": 3, "last_activity_date": 1521648562, "creation_date": 1521648562, "answer_id": 49411332, "question_id": 49410873, "link": "https://stackoverflow.com/questions/49410873/why-the-segfault-on-ostream-stdstring-created-from-char-array/49411332#49411332", "title": "Why the segfault on ostream std::string created from char array", "body": "<p>You code does not compile with my compiler (VS2017).</p>\n\n<p>I fixed it to this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\ntypedef struct point {\n    char name[10];\n    int y;\n} point_t;\n\n\nstd::string print(const char* str, size_t size) {\n    return std::string(str, size);\n}\n\nstd::ostream&amp; operator &lt;&lt; (std::ostream &amp;o, const point_t &amp;a) {\n    o &lt;&lt; print(a.name, sizeof(a.name)) &lt;&lt; \", \" &lt;&lt; a.y;\n\n    return o;\n}\n\n\nint main() {\n    point_t p = {\n        { '0','1','2','3','4','5','6','7','8','9' },\n        4\n    };\n\n    std::cout &lt;&lt; \"we have\" &lt;&lt; p &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Note the <code>return</code> statement for your operator and the include for <code>string</code>. </p>\n\n<p>I don't have any problems with the fixed version. If your compiler did compile your version, I'd suggest you turn up the warning level or get a compiler that notifies you of errors. </p>\n"}], "owner": {"reputation": 299, "user_id": 3990838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca850212cf1cdabbd83e1386ae41f1d?s=128&d=identicon&r=PG&f=1", "display_name": "pawel_j", "link": "https://stackoverflow.com/users/3990838/pawel-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 49411253, "answer_count": 2, "score": 1, "last_activity_date": 1521649147, "creation_date": 1521647423, "question_id": 49410873, "link": "https://stackoverflow.com/questions/49410873/why-the-segfault-on-ostream-stdstring-created-from-char-array", "title": "Why the segfault on ostream std::string created from char array", "body": "<p>this is something I cannot understand:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\ntypedef struct point{\n  char name[10];\n  int y;\n} point_t;\n\n\nstd::string print(const char* str, size_t size) {\n  return std::string(str, size);\n}\n\nstd::ostream&amp; operator &lt;&lt; (std::ostream &amp;o,const point_t &amp;a){\n  o &lt;&lt; print(a.name, sizeof(a.name)) &lt;&lt; \", \" &lt;&lt; a.y;\n}\n\n\nint main(){\n  point_t p = {\n    {'0','1','2','3','4','5','6','7','8','9'},\n    4\n  };\n\n  std::cout &lt;&lt; \"we have\" &lt;&lt; p &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>There is a segfault, which valgrinds shows on at </p>\n\n<pre>std::basic_ostream&lt;char, std::char_traits&lt;char> >& std::endl&lt;char, std::char_traits&lt;char> >(std::basic_ostream&lt;char, std::char_traits&lt;char> >&) (in /usr/lib64/libstdc++.so.6.0.13)</pre>\n\n<p>which I cannot understand, because I can pring the string character by character and the segfault does not happen (for example &lt;&lt; a.name[0] &lt;&lt; a.name[1] &lt;&lt; ... &lt;&lt; a.name[9])</p>\n\n<p>Any help appreciated.</p>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 3500, "user_id": 847349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BsyZ.jpg?s=128&g=1", "display_name": "Dmitry Ledentsov", "link": "https://stackoverflow.com/users/847349/dmitry-ledentsov"}, "edited": false, "score": 0, "creation_date": 1521647511, "post_id": 49410777, "comment_id": 85823454, "body": "perhaps, you&#39;d want to automate that via makefile generation, e.g. via <a href=\"https://premake.github.io/\" rel=\"nofollow noreferrer\">premake</a> or CMake. This will cost you less time and will generate correct dependencies. The direct answer to your question might be an easy extension of the makefile, but I&#39;d consider another option"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1521649924, "post_id": 49410777, "comment_id": 85825342, "body": "Your question is unclear. Which file paths are you trying to do without?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5930979"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1521649991, "post_id": 49410777, "comment_id": 85825399, "body": "@Beta I am trying to compile all cpp file in all directories under the src folder."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1521650594, "post_id": 49410777, "comment_id": 85825821, "body": "And put all of the resultant object files in <code>out&#47;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": true, "score": 0, "last_activity_date": 1521726042, "creation_date": 1521726042, "answer_id": 49430214, "question_id": 49410777, "link": "https://stackoverflow.com/questions/49410777/recursive-makefile-to-build-o-files/49430214#49430214", "title": "Recursive Makefile to build .o files", "body": "<p>Use the <code>vpath</code> directive to specifiy the source directories.</p>\n\n<pre><code>TARGETS := latest.bin\n\nLD      := ld\nLDFLAGS := -T linker.ld -melf_i386\n\nCC      := ~/opt/cross/bin/i386-elf-g++\nCCFLAGS := -c -ffreestanding -nostdlib -fno-builtin -fno-rtti -fno-exceptions\n\nAS      := ~/opt/cross/bin/i386-elf-as\nASFLAGS := -c\n\nvpath %.cpp  src/kernel\nvpath %.s    src/kernel/arch/i386\n\nSOURCES := $(wildcard *.cpp) $(wildcard *.s)\nOBJECTS := $(addsuffix .o, $(basename $(notdir $(SOURCES))))\n\nall: $(TARGETS)\n\nout/%.o: %.cpp\n    $(CC) $(CCFLAGS) -o $@ $&lt;\n\nout/%.o: %.s\n    $(AS) $(ASFLAGS) -o $@ $&lt;\n\nlatest.bin: $(OBJECTS)\n    $(LD) $(LDFLAGS) -o $@ $^\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5930979"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 49430214, "answer_count": 1, "score": 0, "last_activity_date": 1521726042, "creation_date": 1521647169, "last_edit_date": 1521647292, "question_id": 49410777, "link": "https://stackoverflow.com/questions/49410777/recursive-makefile-to-build-o-files", "title": "Recursive Makefile to build .o files", "body": "<p>I am writing a simple kernel and all is going well so far.\nI am using a Makefile to build the system through the shell.\nHowever, I wish to move and reorganise the file structure but, my the makefile uses absolute linking.\nHow can I refactor this to compile all <code>.cpp/.c</code> files and <code>.s</code> files to an out folder and link them, without needing to define each folder path?</p>\n\n<pre><code>CC = ~/opt/cross/bin/i386-elf-g++\nAS = ~/opt/cross/bin/i386-elf-as\nLNFLAGS = -T linker.ld -melf_i386\nCCFLAGS = -c -ffreestanding -nostdlib -fno-builtin -fno-rtti -fno-exceptions\nASFLAGS = -c\nCTMP = $(wildcard src/kernel/*.cpp)\nATMP = $(wildcard src/kernel/arch/i386/*.s)\nCFILE = $(subst src/kernel/, ,$(CTMP))\nAFILE = $(subst src/kernel/arch/i386/, ,$(ATMP))\nCSRC = $(CFILE:.c=)\nASRC = $(AFILE:.s=)\n\nOUT = $(wildcard out/*.o)\n\nall: ccompile acompile link\n\nccompile:\n    for file in $(CSRC) ; do \\\n        $(CC) $(CCFLAGS) src/kernel/$$file -o out/$$file.o ; \\\n    done\n\nacompile:\n    for file in $(ASRC) ; do \\\n        $(AS) $(ASFLAGS) src/kernel/arch/i386/$$file.s -o out/$$file.o ; \\\n    done\n\nlink:\n    ld $(LNFLAGS) -o latest.bin $(OUT)\n</code></pre>\n"}, {"tags": ["c++", "gcc", "floating-point", "mingw"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 2, "creation_date": 1521647053, "post_id": 49410717, "comment_id": 85823039, "body": "&quot;nothing seems to work&quot;. Could you show some code?"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1521647245, "post_id": 49410717, "comment_id": 85823224, "body": "What exactly is behaving differently?"}, {"owner": {"reputation": 139, "user_id": 5847142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c954cf3f1778284267d7de8537527ac3?s=128&d=identicon&r=PG&f=1", "display_name": "HangrY", "link": "https://stackoverflow.com/users/5847142/hangry"}, "edited": false, "score": 0, "creation_date": 1521647305, "post_id": 49410717, "comment_id": 85823282, "body": "No I cannot, sorry but code here isn&#39;t really relevant or reliable due to the size of the software and the number of calculations. With 3 days of digging I think it most likely comes from rounding and calculation precisions"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1521647322, "post_id": 49410717, "comment_id": 85823296, "body": "Have you considered integer math?  or gmp signed integers?"}, {"owner": {"reputation": 139, "user_id": 5847142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c954cf3f1778284267d7de8537527ac3?s=128&d=identicon&r=PG&f=1", "display_name": "HangrY", "link": "https://stackoverflow.com/users/5847142/hangry"}, "edited": false, "score": 0, "creation_date": 1521647373, "post_id": 49410717, "comment_id": 85823340, "body": "I cant work on integers; although i&#39;ll take a look a gmp. For the same code running I don&#39;t have the same output on both systems"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1521647386, "post_id": 49410717, "comment_id": 85823351, "body": "Maybe try <a href=\"https://stackoverflow.com/a/5777610/1460794\">checking</a> if all your platforms use ieee 754"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1521647492, "post_id": 49410717, "comment_id": 85823444, "body": "You have not mentioned <a href=\"https://stackoverflow.com/questions/7420665\">this very relevant flag</a>."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1521647652, "post_id": 49410717, "comment_id": 85823564, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20963419/cross-platform-floating-point-consistency\">Cross Platform Floating Point Consistency</a>"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1521647655, "post_id": 49410717, "comment_id": 85823567, "body": "What are your compilation flags? Are your inputs exactly the same? Are you using some external libraries? How much you results differ on both platforms?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1521648018, "post_id": 49410717, "comment_id": 85823864, "body": "You might also want to look at <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">gmplib.org</a>, <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/multiprecision/doc/html/index.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_66_0/libs/multiprecision/doc/html/&hellip;</a>, or similar multiple precision libraries (<a href=\"https://en.wikipedia.org/wiki/List_of_arbitrary-precision_arithmetic_software\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>) if you care about reproducibility and not about performance."}, {"owner": {"reputation": 139, "user_id": 5847142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c954cf3f1778284267d7de8537527ac3?s=128&d=identicon&r=PG&f=1", "display_name": "HangrY", "link": "https://stackoverflow.com/users/5847142/hangry"}, "edited": false, "score": 0, "creation_date": 1521648092, "post_id": 49410717, "comment_id": 85823915, "body": "Compiler flags are -std=c++11 -static-libgcc -static-libstdc++ -fexceptions So, not much The outputs are large because the software loops over the calculations and give results each time but the first difference that occurs is a 0.0000012 difference. After 300 iteration I have a difference too large to be ignored by my company&#39;s clients."}, {"owner": {"reputation": 139, "user_id": 5847142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c954cf3f1778284267d7de8537527ac3?s=128&d=identicon&r=PG&f=1", "display_name": "HangrY", "link": "https://stackoverflow.com/users/5847142/hangry"}, "edited": false, "score": 0, "creation_date": 1521648338, "post_id": 49410717, "comment_id": 85824108, "body": "yes both platforms use IEEE 754"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1521649493, "post_id": 49410717, "comment_id": 85824969, "body": "@RichardCritten: The C++ standard specifies the order of evaluation in the [expr] clause. It does not fully determine the precision used for floating-point evaluation."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1521649572, "post_id": 49410717, "comment_id": 85825028, "body": "@wally: Certainly this question is similar. Unfortunately, as floating-point behavior is not fully standardized, an answer for one set of compilers is not a duplicate of an answer for another set of compilers, even if they differ only in which versions they are. Getting deterministic behavior requires, among other things, setting certain compiler switches."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1521649647, "post_id": 49410717, "comment_id": 85825096, "body": "Do you call any math library routines, such as <code>sin</code> or <code>log</code>? Do you have any multi-threading or other non-deterministic behavior in your program, aside from the floating-point?"}, {"owner": {"reputation": 139, "user_id": 5847142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c954cf3f1778284267d7de8537527ac3?s=128&d=identicon&r=PG&f=1", "display_name": "HangrY", "link": "https://stackoverflow.com/users/5847142/hangry"}, "edited": false, "score": 0, "creation_date": 1521651098, "post_id": 49410717, "comment_id": 85826159, "body": "No multi threading but yes a few uses of math routines"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1521653195, "post_id": 49410717, "comment_id": 85827507, "body": "@EricPostpischil Why is it unfortunate? The duplicate doesn&#39;t claim to be version specific. &quot;among other things&quot; could mean anything."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1521653716, "post_id": 49410717, "comment_id": 85827845, "body": "@wally: It is unfortunate because another question that is generic or that answers for other compilers or versions does not answer this question. And hence this question should not be marked as a duplicate of the other, since it is not a duplicate and is not answered by the other."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1521655245, "post_id": 49410717, "comment_id": 85828733, "body": "@EricPostpischil This is not a version specific problem."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1521656024, "post_id": 49410717, "comment_id": 85829154, "body": "@wally: It is a version-specific problem because solutions that work in one compiler version may not work in another version, due to changing behaviors between versions. Or there may have been no solution in a previous version (e.g., because the compiler did not offer a switch to select what precision was used in evaluating floating-point expressions) but there is in a later version (because a switch was added)."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 5847142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c954cf3f1778284267d7de8537527ac3?s=128&d=identicon&r=PG&f=1", "display_name": "HangrY", "link": "https://stackoverflow.com/users/5847142/hangry"}, "edited": false, "score": 0, "creation_date": 1521648949, "post_id": 49411414, "comment_id": 85824567, "body": "I only use double and I take all my data I work on from files, so no constants"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1521649275, "post_id": 49411414, "comment_id": 85824802, "body": "This answer is not nearly sufficient. Differences in floating-point behavior arise from compilers opting to use more precision (e.g. using <code>long double</code> calculations even when the type of the operands is <code>double</code>), compilers contracting expressions (replacing <code>a*b+c</code> with <code>fma(a, b, c)</code>), and otherwise taking license with floating-point arithmetic. Additionally, if a program is multithreading or otherwise non-deterministic in its execution, floating-point results may vary. Answering the question requires addressing specific compiler characteristics."}, {"owner": {"reputation": 139, "user_id": 5847142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c954cf3f1778284267d7de8537527ac3?s=128&d=identicon&r=PG&f=1", "display_name": "HangrY", "link": "https://stackoverflow.com/users/5847142/hangry"}, "edited": false, "score": 0, "creation_date": 1521651254, "post_id": 49411414, "comment_id": 85826264, "body": "I need 8-9 digits precision, and the first inconsistency that arises is at 10^-6"}, {"owner": {"reputation": 259, "user_id": 5386469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ad83326b4e3fc5b3493f84e8960480?s=128&d=identicon&r=PG&f=1", "display_name": "Ratah", "link": "https://stackoverflow.com/users/5386469/ratah"}, "edited": false, "score": 0, "creation_date": 1521653574, "post_id": 49411414, "comment_id": 85827753, "body": "You have to trace where in your program you notice the beginning of inconsistency. It would be due to a particular computation or user-defined function. Otherwise try long double and notice the first inconsistency, it should be less than 10 digits precision"}, {"owner": {"reputation": 139, "user_id": 5847142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c954cf3f1778284267d7de8537527ac3?s=128&d=identicon&r=PG&f=1", "display_name": "HangrY", "link": "https://stackoverflow.com/users/5847142/hangry"}, "edited": false, "score": 0, "creation_date": 1521654359, "post_id": 49411414, "comment_id": 85828217, "body": "The first inconsistency happens on the 12-13 digits but after 300 iteration I have a 15% difference on the final result (the approximations errors causes the program to go into if statement at different times on different systems). I need 10^-6 precision. A"}], "tags": [], "owner": {"reputation": 259, "user_id": 5386469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ad83326b4e3fc5b3493f84e8960480?s=128&d=identicon&r=PG&f=1", "display_name": "Ratah", "link": "https://stackoverflow.com/users/5386469/ratah"}, "is_accepted": false, "score": 0, "last_activity_date": 1521648782, "creation_date": 1521648782, "answer_id": 49411414, "question_id": 49410717, "link": "https://stackoverflow.com/questions/49410717/how-to-ensure-same-floating-point-behavior-on-windows-and-linux/49411414#49411414", "title": "How to ensure same floating-point behavior on windows and linux?", "body": "<p>To have the same behavior, at least you have to:</p>\n\n<p>1- standardize your type, do not switch from double to long double\nuse only unique type long double for example \n2- if you have any constante, use floating point literal related to your type:</p>\n\n<p>If you choose long double, your constante must have as suffixe l or L\nex: 0.5L  </p>\n"}], "owner": {"reputation": 139, "user_id": 5847142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c954cf3f1778284267d7de8537527ac3?s=128&d=identicon&r=PG&f=1", "display_name": "HangrY", "link": "https://stackoverflow.com/users/5847142/hangry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1521648782, "creation_date": 1521647013, "last_edit_date": 1521647846, "question_id": 49410717, "link": "https://stackoverflow.com/questions/49410717/how-to-ensure-same-floating-point-behavior-on-windows-and-linux", "title": "How to ensure same floating-point behavior on windows and linux?", "body": "<p>I have a software that does massive calculations on doubles and it has to run on linux and windows. I do not care about what behavior is used (faster is better), but it is mandatory that I get the same results on both platform.</p>\n\n<p>I am compiling with x86_64-w64-mingw32 gcc version 4.9.2 on windows 10.\nAnd x86_64-linux-gnu gcc 4.9.3 on xubuntu.</p>\n\n<p>I've tried using the following compile options:\n  -frounding-math\n  -fno-rounding-math\n  -ffloat-store\non both systems and nothing seems to work.</p>\n\n<p>I know a bit about the complexity of floating-point representation but should it really be that hard to force the same behavior for a software that has to be cross platform?</p>\n"}, {"tags": ["c++", "c", "windows"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 8, "creation_date": 1521647343, "post_id": 49410616, "comment_id": 85823306, "body": "You might look at <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow noreferrer\"><code>std::this_thread::sleep_for</code></a> if you want to modernize your code."}, {"owner": {"reputation": 1569, "user_id": 1694593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ec320e3d57fdbde4b7ecc8194b2a2d1?s=128&d=identicon&r=PG", "display_name": "Wander3r", "link": "https://stackoverflow.com/users/1694593/wander3r"}, "edited": false, "score": 1, "creation_date": 1521647683, "post_id": 49410616, "comment_id": 85823585, "body": "Exactly as the documentation states. Switching to <code>Sleep</code> should be a seamless transition from <code>_sleep</code>"}, {"owner": {"reputation": 154, "user_id": 4277804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5946227d09a01798802c0418de26931a?s=128&d=identicon&r=PG&f=1", "display_name": "mlel", "link": "https://stackoverflow.com/users/4277804/mlel"}, "edited": false, "score": 0, "creation_date": 1521648018, "post_id": 49410616, "comment_id": 85823865, "body": "Thanks for the <code>sleep_for</code> function. We also have the same question for C project (I will add the C tag as well)."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1521648741, "post_id": 49410616, "comment_id": 85824418, "body": "if look for old crt code - in file <code>slbeep.c</code> - <code>void __cdecl _sleep(unsigned long dwDuration) {      if (dwDuration == 0) {         dwDuration++;     }     Sleep(dwDuration);  }</code> - so <code>_sleep</code> is very thin shell over <code>Sleep</code>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1521649379, "post_id": 49410616, "comment_id": 85824883, "body": "sleep() is a posix function, once supported by Windows NT and Microsoft&#39;s C compiler.  It acquired a leading underscore after the posix subsystem fell out of use, too many short lowercase identifiers in the global namespace.  As long as you&#39;d consider posix functions you might as well consider Windows functions :)"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1521649522, "post_id": 49410616, "comment_id": 85824995, "body": "@HansPassant - Windows never supported POSIX fully. How do you explain sleep() accepting seconds and _sleep() milliseconds."}], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1521649779, "post_id": 49411567, "comment_id": 85825222, "body": "simply look for <a href=\"http://www.cnhintl.com/it/DataMaster/1-VB6/VC98/CRT/SRC/SLBEEP.C\" rel=\"nofollow noreferrer\"><code>slbeep.c</code></a> - here <code>_sleep</code> implementation. not need any tests"}, {"owner": {"reputation": 834, "user_id": 3079037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/DY854.jpg?s=128&g=1", "display_name": "David A. Gray", "link": "https://stackoverflow.com/users/3079037/david-a-gray"}, "edited": false, "score": 0, "creation_date": 1581458944, "post_id": 49411567, "comment_id": 106439107, "body": "I&#39;d count that as an improvement. Why would you ever want to sleep for zero milliseconds."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 834, "user_id": 3079037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/DY854.jpg?s=128&g=1", "display_name": "David A. Gray", "link": "https://stackoverflow.com/users/3079037/david-a-gray"}, "edited": false, "score": 0, "creation_date": 1582543770, "post_id": 49411567, "comment_id": 106801303, "body": "@DavidA.Gray When you specify the amount of time to sleep, it&#39;s a minimum. The platform can put you to sleep for longer if that is beneficial to system performance. So a sleep for zero (or more) milliseconds says to the platform that now would be a good time to put you to sleep if it will help performance but if it won&#39;t help performance, you can continue to do useful work. It&#39;s commonly done at optimal pre-emption points such as right after releasing some locks (to give other threads a chance at it) or right before acquiring some (to reduce the odds you&#39;ll be pre-empted while holding it)."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1582554533, "post_id": 49411567, "comment_id": 106807168, "body": "This was especially useful before there were multicore processors. <code>Sleep(0)</code> is an effective way to hand back your control of the CPU core to the OS."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 6, "last_activity_date": 1521665153, "last_edit_date": 1521665153, "creation_date": 1521649184, "answer_id": 49411567, "question_id": 49410616, "link": "https://stackoverflow.com/questions/49410616/sleep-vs-sleep-functions/49411567#49411567", "title": "Sleep() vs _sleep() functions", "body": "<p>As RbMm mentioned, <code>_sleep</code> had been <a href=\"http://www.cnhintl.com/it/DataMaster/1-VB6/VC98/CRT/SRC/SLBEEP.C\" rel=\"noreferrer\">implemented</a> as a very thin wrapper around <code>Sleep</code>:</p>\n\n<pre><code>void __cdecl _sleep(unsigned long dwDuration)\n{\n\n    if (dwDuration == 0) {\n        dwDuration++;\n    }\n    Sleep(dwDuration);\n\n}\n</code></pre>\n\n<p>To confirm, we can test it. Fortunately it's easy to test:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;windows.h&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std::chrono_literals;\n\nint main() {\n    auto tm1 = std::chrono::system_clock::now();\n    _sleep(250);\n    auto tm2 = std::chrono::system_clock::now();\n    Sleep(250);\n    auto tm3 = std::chrono::system_clock::now();\n    std::cout &lt;&lt; \"_sleep took \" &lt;&lt; (tm2-tm1)/1ms &lt;&lt; \" ms, Sleep took \" &lt;&lt; (tm3-tm2)/1ms &lt;&lt; \" ms\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>_sleep took 250 ms, Sleep took 250 ms\n</code></pre>\n\n<p>So it appears both <code>_sleep</code> and <code>Sleep</code> sleep for the specific number of milliseconds.<br>\n<code>_sleep</code> is a MSVC CRT function, and <code>Sleep</code> is a Windows API.<br>\nSo in MSVC they should be interchangeable.</p>\n\n<p>One minor difference is that in case of a <code>0</code> argument, <code>_sleep</code> sleeps for <code>1ms</code> whereas <code>Sleep</code> doesn't sleep at all.</p>\n"}], "owner": {"reputation": 154, "user_id": 4277804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5946227d09a01798802c0418de26931a?s=128&d=identicon&r=PG&f=1", "display_name": "mlel", "link": "https://stackoverflow.com/users/4277804/mlel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10997, "favorite_count": 2, "accepted_answer_id": 49411567, "answer_count": 1, "score": 8, "last_activity_date": 1582541420, "creation_date": 1521646750, "last_edit_date": 1582541420, "question_id": 49410616, "link": "https://stackoverflow.com/questions/49410616/sleep-vs-sleep-functions", "title": "Sleep() vs _sleep() functions", "body": "<p>Currently, I am working on an old project developed (in C and C++) for Windows with Visual Studio 2010 or less. We would like to update it for newer version such as Visual Studio 2015 or 2017.</p>\n\n<p>I have found that the _sleep() function is <a href=\"https://msdn.microsoft.com/en-US/library/mt620088.aspx\" rel=\"nofollow noreferrer\">no longer supported by Microsoft</a> and that instead I shall use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686298(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Sleep()</a> function.</p>\n\n<p>I didn't find the equivalent <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686298(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation</a> for the old _sleep() function and I wonder if both functions behave exactly identical ? This <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/dbd2073d-d8ce-4a39-b7b7-29549969536f/what-is-sleep?forum=vcgeneral\" rel=\"nofollow noreferrer\">MSDN post</a> makes me wondering if the only differences are in the types of the argument ?</p>\n\n<p>Thanks in advance for your answers.</p>\n"}, {"tags": ["c++", "qt", "multimedia", "qtmultimedia", "qvideowidget"], "answers": [{"comments": [{"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1521651200, "post_id": 49411960, "comment_id": 85826223, "body": "The answer is simple, the video can&#39;t be 100 % width and height of the underlaying QWidget all the time. The video keeps a specific ratio and horizontal or vertical spaces will appear."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1521651291, "post_id": 49411960, "comment_id": 85826292, "body": "@user3606329  The widget has the correct width and height, the video does not. That can not be changed since that depends on the file or in your case the resolution of your camera."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1521651382, "post_id": 49411960, "comment_id": 85826352, "body": "@user3606329  explain why you tell me crazy downvoter ?."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1521651434, "post_id": 49411960, "comment_id": 85826393, "body": "@ eyllanesc : you&#39;re not, I called it back and upvoted your answer now. greetings."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1521651870, "post_id": 49411960, "comment_id": 85826681, "body": "@ eyllanesc the comment has been already removed and I&#39;m always nice."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1521650314, "creation_date": 1521650314, "answer_id": 49411960, "question_id": 49410557, "link": "https://stackoverflow.com/questions/49410557/qvideowidget-doesnt-resize-well/49411960#49411960", "title": "QVideoWidget doesn&#39;t resize well", "body": "<p>When you use the following instruction:</p>\n\n<pre><code>m_viewfinder = new QVideoWidget(ui-&gt;captureView);\n</code></pre>\n\n<p>You are setting as the parent of <code>m_viewfinder</code> to <code>captureView</code>, so the positions of <code>m_viewfinder</code> will be relative to <code>captureView</code>, but this does not indicate that it will be the same size as the parent.</p>\n\n<p>One of the easiest ways to do this is to use a layout. Also, it is not necessary to create the <code>QGraphicsWidget</code> or the <code>QVBoxLayout</code>, so I recommend you to delete it and get the design as it was established by default:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JZigb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JZigb.png\" alt=\"enter image description here\"></a></p>\n\n<p>and then we establish a layout that is placed in the <code>centralWidget</code>, and in this layout we add the <code>QVideoWidget</code>.</p>\n\n<pre><code>...\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    m_viewfinder = new QVideoWidget;\n    QVBoxLayout *lay = new QVBoxLayout(ui-&gt;centralWidget);\n    lay-&gt;addWidget(m_viewfinder);\n    m_camera = new QCamera(QCameraInfo::defaultCamera());\n    m_camera-&gt;setViewfinder(m_viewfinder);\n\n    m_camera-&gt;start();\n}\n...\n</code></pre>\n\n<p>In the following <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/49410557\" rel=\"nofollow noreferrer\">link</a> you can find the complete example.</p>\n"}], "owner": {"reputation": 818, "user_id": 2424611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mY3Hk.jpg?s=128&g=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/2424611/mahesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 0, "accepted_answer_id": 49411960, "answer_count": 1, "score": 0, "last_activity_date": 1521650314, "creation_date": 1521646591, "last_edit_date": 1521649212, "question_id": 49410557, "link": "https://stackoverflow.com/questions/49410557/qvideowidget-doesnt-resize-well", "title": "QVideoWidget doesn&#39;t resize well", "body": "<p>I have a Qt application which simply captures from the default webcam and shows it on a QVideoWidget. In the ui, I have a simple MainWindow with a QGraphicsView inside a VerticalLayout:</p>\n\n<p>ui design</p>\n\n<p><img src=\"https://i.stack.imgur.com/88t3f.png\" alt=\"\"></p>\n\n<p>My mainwindow.cpp=============================================</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    m_viewfinder = new QVideoWidget(ui-&gt;captureView);\n    m_camera = new QCamera(QCameraInfo::defaultCamera());\n    m_camera-&gt;setViewfinder(m_viewfinder);\n\n    m_camera-&gt;start();\n}\n\nMainWindow::~MainWindow()\n{\n    m_camera-&gt;stop();\n    delete m_viewfinder;\n    delete m_camera;\n    delete ui;\n}\n</code></pre>\n\n<p>When I execute this, I get the application running, but the video contents do not scale according to the mainwindow size. Examples:</p>\n\n<p>When I start the application</p>\n\n<p><img src=\"https://i.stack.imgur.com/IlVuz.png\" alt=\"\"></p>\n\n<p>Resizing mainwindow down</p>\n\n<p><img src=\"https://i.stack.imgur.com/DbbcA.png\" alt=\"\"></p>\n\n<p>Resizing mainwindow up</p>\n\n<p><img src=\"https://i.stack.imgur.com/ehUbZ.png\" alt=\"\"></p>\n\n<p>Is there some way to make the video content resize well and fit the available area?\nI have seen this answer: <a href=\"https://stackoverflow.com/questions/38374158/qvideowidget-video-is-cut-off\">QVideoWidget: Video is cut off</a>, but it doesn't offer any solution that works for me. When use the QGraphicsView-QGraphicsScene-QGraphicsVideoItem chain, I see nothing at all.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1521646808, "post_id": 49410500, "comment_id": 85822844, "body": "Why do you need to resize it? Does your C function get upset if you&#39;re passing it more than the length parameter indicates?"}, {"owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 4, "creation_date": 1521646896, "post_id": 49410500, "comment_id": 85822920, "body": "nothing wrong with <code>buffer.resize(strlen(buffer.c_str()));</code>"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1521647642, "post_id": 49410500, "comment_id": 85823558, "body": "@void: If a C library takes a <code>char*</code>+size, then they almost always accept embedded NUL characters. That&#39;s <i>why</i> C APIs take string lengths. What you want to do is usually unnecessary."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1521647973, "post_id": 49410500, "comment_id": 85823830, "body": "@NicolBolas This particular C function is writing to the specified buffer I give it, not reading from it. I left that detail out, sorry about that. I won&#39;t know exactly how many characters are written until after the function returns."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1521648108, "post_id": 49410500, "comment_id": 85823929, "body": "Option 3, where you don&#39;t make a string until after the call, seems best to me"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1521648116, "post_id": 49410500, "comment_id": 85823937, "body": "@void.pointer: Then why do you need to do this? <code>basic_string::size</code> will give you the size of the buffer that can be written to. You want to tell the C function how much space it has to write into the buffer. Why do you need to truncate your buffer? If the C function returns how many characters it has written, just <code>resize</code> it to that afterwards."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1521648194, "post_id": 49410500, "comment_id": 85824002, "body": "@NicolBolas Because the size of the string after the call is technically a lie. I want it to be the size of actual characters, not the maximum size. If I use this string in a stream later, it writes out all the null characters as well which I don&#39;t want. In a way I&#39;m abusing the size property of a string before the C function call to treat the string as a buffer with a maximum size."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1521651890, "post_id": 49410500, "comment_id": 85826697, "body": "@void.pointer as Nicol said: &quot;<i>If the C function returns how many characters it has written, just resize it to that afterwards</i>&quot;. Does the C function do that? <code>std::string buffer(MAX_BUFFER_SIZE, &#39;\\0&#39;); int size = TheCLibraryFunction(&amp;buffer[0], buffer.size()); buffer.resize(size);</code> I would find it very odd if a function taking a <code>char*</code>+maxsize doesn&#39;t return the real size. If not, just use <code>strlen(c_str())</code> after the function exits: <code>std::string buffer(MAX_BUFFER_SIZE, &#39;\\0&#39;); TheCLibraryFunction(&amp;buffer[0], buffer.size()); buffer.resize(strlen(buffer.c_str()));</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1521647496, "post_id": 49410636, "comment_id": 85823447, "body": "This will remove the last &#39;\\0&#39;, which op said they didn&#39;t want."}], "tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": false, "score": 4, "last_activity_date": 1521655014, "last_edit_date": 1521655014, "creation_date": 1521646794, "answer_id": 49410636, "question_id": 49410500, "link": "https://stackoverflow.com/questions/49410500/how-to-resize-stdstring-to-remove-all-null-terminator-characters/49410636#49410636", "title": "How to resize std::string to remove all null terminator characters?", "body": "<p>You can do this:</p>\n\n<pre><code>buffer.erase(std::find(buffer.begin(), buffer.end(), '\\0'), buffer.end());\n</code></pre>\n\n<p>Consider <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/erase\" rel=\"nofollow noreferrer\"><code>std::basic_string::erase</code></a> has an overloading:</p>\n\n<pre><code>basic_string&amp; erase( size_type index = 0, size_type count = npos );\n</code></pre>\n\n<p>A more succinct way:</p>\n\n<pre><code>buffer.erase(buffer.find('\\0'));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 1, "creation_date": 1521647206, "post_id": 49410643, "comment_id": 85823185, "body": "<a href=\"http://en.cppreference.com/w/cpp/string/basic_string/find\" rel=\"nofollow noreferrer\">std::string::find</a> doesn&#39;t return an iterator."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1521647220, "post_id": 49410643, "comment_id": 85823203, "body": "What about <code>str.resize(str.find(&#39;\\0&#39;));</code>?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1521647346, "post_id": 49410643, "comment_id": 85823310, "body": "@O&#39;Neil you&#39;re right - would mean we have to add str.begin() (which breaks if not found) to it; or use std::find as liliscent said"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1521647409, "post_id": 49410643, "comment_id": 85823370, "body": "I&#39;m not sure whether I misunderstood OP&#39;s question, but this solution is flawed. If the original buffer is not null-terminated, the iterator is out of boundary."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1521647452, "post_id": 49410643, "comment_id": 85823405, "body": "@O&#39;Neil Yeah that ran though my mind as well. Perhaps <code>MAX_BUFFER_SIZE+1</code> on the initial size, and then the previous snippet I gave would be safe."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1521647623, "post_id": 49410643, "comment_id": 85823542, "body": "I updated my question to clarify a misunderstanding. When I said I only wanted 1 trailing null terminator, I was implying the one that <code>std::string</code> manages &amp; expects. So from the outside perspective, I don&#39;t want any explicit null terminators. Sorry for the confusion."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1521647655, "post_id": 49410643, "comment_id": 85823565, "body": "@void.pointer but std:string doesn&#39;t expect or require any null terminator"}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1521647730, "post_id": 49410643, "comment_id": 85823629, "body": "@UKMonkey From the perspective of <code>c_str()</code> it does. Not concerned about the implementation too much. Not disagreeing with you, just stating that I miscommunicated what I intended to ask for."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1521648741, "post_id": 49410643, "comment_id": 85824419, "body": "@NicolBolas yes - it will - but I answered the question at the time.  It has since changed;  I&#39;ve updated my answer to match."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1521648834, "post_id": 49410643, "comment_id": 85824487, "body": "@void.pointer yes; c_str() will ensure that it provides a null terminated string; but this is NOT included in the size() call unless you explcitly add it to the string.  ie <code>std::string derp(&quot;hello&quot;)</code> has a length of 5, not 6"}], "tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": true, "score": 13, "last_activity_date": 1567731461, "last_edit_date": 1567731461, "creation_date": 1521646808, "answer_id": 49410643, "question_id": 49410500, "link": "https://stackoverflow.com/questions/49410500/how-to-resize-stdstring-to-remove-all-null-terminator-characters/49410643#49410643", "title": "How to resize std::string to remove all null terminator characters?", "body": "<p>Many ways to do this; but probably the one to me that seems to be most \"C++\" rather than C is:</p>\n\n<pre><code>str.erase(std::find(str.begin(), str.end(), '\\0'), str.end());\n</code></pre>\n\n<p>i.e. Erase everything from the first null to the end.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 4478264, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Kdv2DCwN8ck/AAAAAAAAAAI/AAAAAAAAAPQ/T37EOzNW60Y/photo.jpg?sz=128", "display_name": "Moeren", "link": "https://stackoverflow.com/users/4478264/moeren"}, "is_accepted": false, "score": 2, "last_activity_date": 1521647034, "creation_date": 1521647034, "answer_id": 49410727, "question_id": 49410500, "link": "https://stackoverflow.com/questions/49410500/how-to-resize-stdstring-to-remove-all-null-terminator-characters/49410727#49410727", "title": "How to resize std::string to remove all null terminator characters?", "body": "<p>You can use buffer.find('\\0') instead of strlen(buffer.c_str())</p>\n"}, {"tags": [], "owner": {"reputation": 9494, "user_id": 5517378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/VWdPz.png?s=128&g=1", "display_name": "NutCracker", "link": "https://stackoverflow.com/users/5517378/nutcracker"}, "is_accepted": false, "score": 0, "last_activity_date": 1552815618, "creation_date": 1552815618, "answer_id": 55205717, "question_id": 49410500, "link": "https://stackoverflow.com/questions/49410500/how-to-resize-stdstring-to-remove-all-null-terminator-characters/55205717#55205717", "title": "How to resize std::string to remove all null terminator characters?", "body": "<p>I know this question already has some answers, but I also want to contribute with my answer, although this solution works for all null terminators only at the end of the string.</p>\n\n<pre><code>void rtrim_null(std::string&amp; str) {\n    str.erase(std::find_if(str.rbegin(), str.rend(), [](int character) {\n        return '\\0' != character;\n    }).base(), str.end());\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6753, "user_id": 15161, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ux55V.jpg?s=128&g=1", "display_name": "slashmais", "link": "https://stackoverflow.com/users/15161/slashmais"}, "is_accepted": false, "score": 1, "last_activity_date": 1575612422, "last_edit_date": 1575612422, "creation_date": 1575612005, "answer_id": 59207673, "question_id": 49410500, "link": "https://stackoverflow.com/questions/49410500/how-to-resize-stdstring-to-remove-all-null-terminator-characters/59207673#59207673", "title": "How to resize std::string to remove all null terminator characters?", "body": "<p>Using your<br/></p>\n\n<pre><code>std::string buffer(MAX_BUFFER_SIZE, '\\0');\nTheCLibraryFunction(&amp;buffer[0], buffer.size());\n</code></pre>\n\n<p>To remove 0-terminators, simplest is:<br/>\n<code>buffer = buffer.c_str();</code><br/>\n(also possibly fastest? - didn't test)</p>\n"}, {"tags": [], "owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "is_accepted": false, "score": 0, "last_activity_date": 1590679689, "creation_date": 1590679689, "answer_id": 62068476, "question_id": 49410500, "link": "https://stackoverflow.com/questions/49410500/how-to-resize-stdstring-to-remove-all-null-terminator-characters/62068476#62068476", "title": "How to resize std::string to remove all null terminator characters?", "body": "<p>One Liner using <a href=\"https://www.boost.org/doc/libs/1_52_0/doc/html/boost/algorithm/trim_if.html\" rel=\"nofollow noreferrer\">boost::trim_if</a> if you want to trim multiple characters (I wanted to remove <code>\\r</code>, <code>\\n</code>, <code>\\0</code> and <code>' '</code>) from the string:</p>\n\n<pre><code>int main()\n{\n    std::string str(\"abcd \\0 \\r\\n \\0\", 12);\n    std::cout &lt;&lt; \"Str: \" &lt;&lt; str &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Length: \" &lt;&lt; str.length() &lt;&lt; std::endl;\n\n    boost::trim_if(str, boost::is_any_of(std::string(\"\\r\\n\\0 \", 4)));\n\n    std::cout &lt;&lt; \"Length: \" &lt;&lt; str.length() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Str: abcd\n\nLength: 12\nLength: 4\n</code></pre>\n"}], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9262, "favorite_count": 2, "accepted_answer_id": 49410643, "answer_count": 6, "score": 14, "last_activity_date": 1590679689, "creation_date": 1521646438, "last_edit_date": 1521665351, "question_id": 49410500, "link": "https://stackoverflow.com/questions/49410500/how-to-resize-stdstring-to-remove-all-null-terminator-characters", "title": "How to resize std::string to remove all null terminator characters?", "body": "<p>I'm using a <code>std::string</code> to interface with a C-library that requires a <code>char*</code> and a length field:</p>\n\n<pre><code>std::string buffer(MAX_BUFFER_SIZE, '\\0');\nTheCLibraryFunction(&amp;buffer[0], buffer.size());\n</code></pre>\n\n<p>However, the <code>size()</code> of the string is the actual size, not the size of the string containing actual valid non-null characters (i.e. the equivalent of <code>strlen()</code>). What is the best method of telling the <code>std::string</code> to reduce its size so that there's <s>only 1 ending null terminator character</s> no explicit null terminator characters? The best solution I can think of is something like:</p>\n\n<pre><code>buffer.resize(strlen(buffer.c_str()));\n</code></pre>\n\n<p>Or even:</p>\n\n<pre><code>char buffer[MAX_BUFFER_SIZE]{};\nTheCLibraryFunction(buffer, sizeof(buffer));\nstd::string thevalue = buffer;\n</code></pre>\n\n<p>Hoping for some built-in / \"modern C++\" way of doing this.</p>\n\n<h2>EDIT</h2>\n\n<p>I'd like to clarify the \"ending null terminator\" requirement I mentioned previously. I didn't mean that I want 1 null terminator explicitly in <code>std::string</code>'s buffer, I was more or less thinking of the string as it comes out of <code>basic_string::c_str()</code> which has 1 null terminator. However for the purposes of the <code>resize()</code>, I want it to represent the size of <em>actual</em> non-null characters. Sorry for the confusion.</p>\n"}, {"tags": ["c++", "qt-creator", "msvc14"], "answers": [{"comments": [{"owner": {"reputation": 1543, "user_id": 3020849, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/56b238c1ee61ac5064b891e8f41641e5?s=128&d=identicon&r=PG&f=1", "display_name": "Santi Pe&#241;ate-Vera", "link": "https://stackoverflow.com/users/3020849/santi-pe%c3%b1ate-vera"}, "edited": false, "score": 0, "creation_date": 1521706039, "post_id": 49416029, "comment_id": 85847631, "body": "How can I check if I have Visual Studio build tools? I have the full VS2017 and I can compile c++ with it."}], "tags": [], "owner": {"reputation": 56, "user_id": 9446750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7eaf4af9dd732a315d0fad6b7b9a0a9?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Gottardello", "link": "https://stackoverflow.com/users/9446750/denis-gottardello"}, "is_accepted": false, "score": 0, "last_activity_date": 1521664522, "creation_date": 1521664522, "answer_id": 49416029, "question_id": 49410363, "link": "https://stackoverflow.com/questions/49410363/msvc2017-is-not-recognized-by-qtcreator/49416029#49416029", "title": "MSVC2017 is not recognized by QtCreator", "body": "<p>Please verify if you have installed msvc2017 32 / 64 bit and the same version and Qt libraries.\nIf yes please check to have installed the Visual Studio build tools.</p>\n"}], "owner": {"reputation": 1543, "user_id": 3020849, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/56b238c1ee61ac5064b891e8f41641e5?s=128&d=identicon&r=PG&f=1", "display_name": "Santi Pe&#241;ate-Vera", "link": "https://stackoverflow.com/users/3020849/santi-pe%c3%b1ate-vera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521664522, "creation_date": 1521646027, "question_id": 49410363, "link": "https://stackoverflow.com/questions/49410363/msvc2017-is-not-recognized-by-qtcreator", "title": "MSVC2017 is not recognized by QtCreator", "body": "<p>I installed VS 2017, and then installed Qt Creator 4.5.2 with the MSVC2017 plug-in.</p>\n\n<p>I reboot the necessary times...</p>\n\n<p>I launch QtCreator, the Qt kit for MSVC2017 is there but the compiler is not.</p>\n\n<p>I add cl.exe manually, but it fails to compile as described <a href=\"https://stackoverflow.com/questions/46569139/qtcreator-qmake-cannot-run-compiler-cl?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">here</a>.\nI reinstalled Qt as suggested, but the problems persist.</p>\n\n<p><strong>How do I set MSVC2017 up to work properly with QtCreator?</strong></p>\n\n<p>PS: Other stack overflow questions did not hep either (<a href=\"https://stackoverflow.com/questions/48229225/using-qt-creator-5-8-with-msvc-2015-compiler?rq=1&amp;utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">this</a>, <a href=\"https://stackoverflow.com/questions/33171416/qt-creator-building-with-msvc?rq=1\">this</a>)</p>\n"}, {"tags": ["c++", "windows", "visual-studio-2017"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 2404535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59ea0ea7bf3f1847728c246bb305626?s=128&d=identicon&r=PG", "display_name": "Kaninstek", "link": "https://stackoverflow.com/users/2404535/kaninstek"}, "edited": false, "score": 0, "creation_date": 1521648773, "post_id": 49410780, "comment_id": 85824436, "body": "This works perfectly, thank you for the solution and the explanation!"}], "tags": [], "owner": {"reputation": 758, "user_id": 6386977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbe1206c8461a32bc0b1894dc518f97?s=128&d=identicon&r=PG&f=1", "display_name": "Rabster", "link": "https://stackoverflow.com/users/6386977/rabster"}, "is_accepted": true, "score": 1, "last_activity_date": 1521647181, "creation_date": 1521647181, "answer_id": 49410780, "question_id": 49410195, "link": "https://stackoverflow.com/questions/49410195/getch-in-combination-with-while-loop-triggers-loopcontent-twice/49410780#49410780", "title": "Getch in combination with while-loop triggers loopcontent twice", "body": "<p>The problem is that a <code>char</code> can only hold 255 values. Thus, in order to get more unique values <code>getch</code> sometimes uses two values to represent a key code, an instruction and a value. For example, try hitting the F keys and you'll notice the same issue arise. </p>\n\n<p>Ultimately, the behavior you are experiencing is due to the fact that <code>getch</code> is being called twice for the arrow keys.</p>\n\n<p>To fix this, check if the instruction is for the arrow keys, in this case the value is 224 for the arrows keys. Once you have identified an arrow keys is being pressed read in the second value with another call to <code>getch</code> and there you will be able to find the actual key.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\nusing namespace std;\nenum KeyCodes {\n    KEY_UP = 72,\n    KEY_LEFT = 75,\n    KEY_RIGHT = 77,\n    KEY_DOWN = 80\n};\nint arrowKey()\n{\n    int c = _getch();\n    if (c == 224) {\n        //another value\n        int key = _getch();\n\n        switch (key)\n        {\n        case KEY_UP:\n            cout &lt;&lt; endl &lt;&lt; \"Up\" &lt;&lt; endl;\n            break;\n        case KEY_LEFT:\n            cout &lt;&lt; endl &lt;&lt; \"Left\" &lt;&lt; endl;\n            break;\n        case KEY_RIGHT:\n            cout &lt;&lt; endl &lt;&lt; \"Right\" &lt;&lt; endl;\n            break;\n        case KEY_DOWN:\n            cout &lt;&lt; endl &lt;&lt; \"Down\" &lt;&lt; endl;\n            break;\n        }\n    }\n\n    return 0;\n}\n\nint main() {\n    int roundNum = 0;\n    while (roundNum &lt;= 20)\n    {\n        roundNum++;\n        cout &lt;&lt; roundNum / 2 &lt;&lt; endl;\n        arrowKey();\n    }\n}\n</code></pre>\n\n<p>It's also worth pointing out that <code>getch</code> is not apart of the std library and could thus have some variation.</p>\n"}], "owner": {"reputation": 35, "user_id": 2404535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59ea0ea7bf3f1847728c246bb305626?s=128&d=identicon&r=PG", "display_name": "Kaninstek", "link": "https://stackoverflow.com/users/2404535/kaninstek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 49410780, "answer_count": 1, "score": 0, "last_activity_date": 1521647181, "creation_date": 1521645585, "question_id": 49410195, "link": "https://stackoverflow.com/questions/49410195/getch-in-combination-with-while-loop-triggers-loopcontent-twice", "title": "Getch in combination with while-loop triggers loopcontent twice", "body": "<p>I'm not really a programmer so my knownledge is extremely limited, I'm just hoping to get a very basic program working for a project. I've been googling around a lot and from what I've found I'm guessing it has to do with getch reading blank spaces or new lines as an input or something along those lines. None of the solutions I have found seem to fix the issue for me however (I might be implementing them wrong though).</p>\n\n<p>This is in the main function:</p>\n\n<pre><code>while (roundNum &lt;= 20)\n{\n\n    roundNum++;\n\n    cout &lt;&lt; roundNum / 2 &lt;&lt; endl;\n    arrowKey();\n\n\n}\n</code></pre>\n\n<p>And the arrowKey function (which I found by googling so I don) looks like this:</p>\n\n<pre><code>int arrowKey()\n{\n    int c = 0;\n    switch ((c = _getch()))\n    {\n    case KEY_UP:\n        cout &lt;&lt; endl &lt;&lt; \"Up\" &lt;&lt; endl;\n        break;\n    case KEY_LEFT:\n        cout &lt;&lt; endl &lt;&lt; \"Left\" &lt;&lt; endl;\n        break;\n    case KEY_RIGHT:\n        cout &lt;&lt; endl &lt;&lt; \"Right\" &lt;&lt; endl;\n        break;\n    case KEY_DOWN:\n        cout &lt;&lt; endl &lt;&lt; \"Down\" &lt;&lt; endl;\n        break;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The problem is that the roundNum reads out twice as well as adds two to the number for every arrow key press, like this:</p>\n\n<pre><code> 1\n 1\n\n Up\n 2\n 2\n\n Right\n 3\n 3\n</code></pre>\n\n<p>etc</p>\n\n<p>Help is greatly appreciated!</p>\n"}, {"tags": ["c++", "qt", "cmd", "console"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 8646980, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/941e31559a7483efa85d07ac15f2e372?s=128&d=identicon&r=PG&f=1", "display_name": "skdadle", "link": "https://stackoverflow.com/users/8646980/skdadle"}, "edited": false, "score": 0, "creation_date": 1521707282, "post_id": 49410398, "comment_id": 85848373, "body": "Thanks a lot.. however.. it just worked today.. without changing anything, my code worked.. the only thing I did differently was (this is gonna sound ridiculous) I clicked on &quot;run&quot; instead of f5...i Honestly have no idea what happened"}, {"owner": {"reputation": 105, "user_id": 8646980, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/941e31559a7483efa85d07ac15f2e372?s=128&d=identicon&r=PG&f=1", "display_name": "skdadle", "link": "https://stackoverflow.com/users/8646980/skdadle"}, "edited": false, "score": 0, "creation_date": 1522854192, "post_id": 49410398, "comment_id": 86317529, "body": "hey, i&#39;ve been trying the code that you provided me with (I think its a thousand times better than what I have!!) and I have a question, is there a way I can input things too? through a line edit? for example input things like &quot;dir&quot; and have them be displayed in my textEdit field?  Thanks a lot!"}, {"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "reply_to_user": {"reputation": 105, "user_id": 8646980, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/941e31559a7483efa85d07ac15f2e372?s=128&d=identicon&r=PG&f=1", "display_name": "skdadle", "link": "https://stackoverflow.com/users/8646980/skdadle"}, "edited": false, "score": 0, "creation_date": 1522855873, "post_id": 49410398, "comment_id": 86318775, "body": "@skdadle yes you can. I added a generic function to the answer to show how."}, {"owner": {"reputation": 105, "user_id": 8646980, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/941e31559a7483efa85d07ac15f2e372?s=128&d=identicon&r=PG&f=1", "display_name": "skdadle", "link": "https://stackoverflow.com/users/8646980/skdadle"}, "edited": false, "score": 0, "creation_date": 1529059974, "post_id": 49410398, "comment_id": 88749603, "body": "thanks for the edit!! but what about when i want to pass parameters to my batch scripts? (that are in my qprocess commands) for example i would like to pass a username and password from my QLine edits input into this qprocess"}], "tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 1, "last_activity_date": 1522855837, "last_edit_date": 1522855837, "creation_date": 1521646150, "answer_id": 49410398, "question_id": 49410123, "link": "https://stackoverflow.com/questions/49410123/showing-cmd-terminal-in-qt-widgets-application/49410398#49410398", "title": "showing cmd terminal in qt widgets application", "body": "<p>You can try</p>\n\n<pre><code>system(\"cmd /k ipconfig\");\n</code></pre>\n\n<p>This will open another terminal window which will stay open (<code>k</code> stands for <code>keep</code>) at the end of the command execution.</p>\n\n<p>I think you don't need the <code>CONFIG += console</code> project setting, to achieve this. Calling <code>system</code> will start another process, which isn't related at all with the calling application.</p>\n\n<p>If you want to start external programs from within a Qt application, you can use <a href=\"http://doc.qt.io/qt-5/qprocess.html\" rel=\"nofollow noreferrer\">QProcess class</a>, which lets you somehow interact with the started processes through standard in/out. For a very simple example, have a form with a push button and a text edit called <code>textEdit</code>; in the push button <code>clicked</code> slot:</p>\n\n<pre><code>QProcess process;\nprocess.start(\"ipconfig\");\nprocess.waitForReadyRead();\nui-&gt;textEdit-&gt;setText(process.readAll());\nprocess.waitForFinished();\n</code></pre>\n\n<p>This way, you won't see additional console windows, and the command output will be shown directly in your text edit.</p>\n\n<p>This can be generalized in a function like this:</p>\n\n<pre><code>bool exec(QString command)\n{\n  QProcess process;\n  process.start(command);\n  if(!process.waitForStarted())\n  {\n    return false; //the process failed to start\n  }\n\n  //etc...\n\n  return true;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 4478264, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Kdv2DCwN8ck/AAAAAAAAAAI/AAAAAAAAAPQ/T37EOzNW60Y/photo.jpg?sz=128", "display_name": "Moeren", "link": "https://stackoverflow.com/users/4478264/moeren"}, "is_accepted": false, "score": 0, "last_activity_date": 1521647235, "creation_date": 1521647235, "answer_id": 49410796, "question_id": 49410123, "link": "https://stackoverflow.com/questions/49410123/showing-cmd-terminal-in-qt-widgets-application/49410796#49410796", "title": "showing cmd terminal in qt widgets application", "body": "<p>Depending on whether this is not just a quick hack/tool, you can look at QProcess for more indepth control over your process so that you can read / write the child process pipes.</p>\n"}], "owner": {"reputation": 105, "user_id": 8646980, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/941e31559a7483efa85d07ac15f2e372?s=128&d=identicon&r=PG&f=1", "display_name": "skdadle", "link": "https://stackoverflow.com/users/8646980/skdadle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1559, "favorite_count": 1, "accepted_answer_id": 49410398, "answer_count": 2, "score": 1, "last_activity_date": 1522855837, "creation_date": 1521645419, "question_id": 49410123, "link": "https://stackoverflow.com/questions/49410123/showing-cmd-terminal-in-qt-widgets-application", "title": "showing cmd terminal in qt widgets application", "body": "<p>I'm trying to pass some cmd commands using system() and I would like to be able to \"communicate\" with cmd, say I code in <code>system(\"dir\")</code> in my mainwindow.cpp under my clicked function</p>\n\n<p>this is what it looks like for example  </p>\n\n<pre><code>void MainWindow::on_pushButton_login_clicked()\n{\n  std::string platform_server_ip  = ui-&gt;lineEdit_platform_server_ip-&gt;text().toStdString();   \n\n  if (platform_server_ip == \"dir\"\n\n    {\n      QMessageBox::information(this,\"Login\", \"all required log in details are correct\");\n\n     close();\n\n     const char* c = platform_server_ip.c_str();\n     system(c);\n     system(\"ipconfig\");\n\n\n    }\n</code></pre>\n\n<p><em>I would like to know why it behaves like this and if that's normal</em>. I've included  <code>CONFIG   += console</code>\nin my project file, and checked \"run in terminal\" (tried it also without) but it never shows me my <strong>desired outcome</strong>.</p>\n\n<p>Instead what I get, is a blank terminal that pops up along side my GUI, and then when I enter \"dir\" in my GUI and hit enter, a cmd window pops up really fast and in less than a second, its gone. I've even tried it with <code>system(\"ipconfig\")</code>and<code>system (\"pause\")</code> \nas well as with one system command like this <code>system(\"ipconfig\" \"&amp;pause\")</code></p>\n\n<p><strong>desired outcome:</strong> is just a normal execution of system(\"ipconfig\"), followed by other system commands, that display the same result as typing them in cmd itself.</p>\n\n<p>I've also tried all this in \"qt Console application\" and I either get the same result, or the output (what would normally be as output on cmd) is then found in \"application output\" of qt creator.</p>\n\n<p>Is there another better way I can achieve what I want? \nI'm truly a noob and would really appreciate some guidance.</p>\n"}, {"tags": ["c++", "algorithm", "sorting"], "comments": [{"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "edited": false, "score": 1, "creation_date": 1521645803, "post_id": 49410095, "comment_id": 85822040, "body": "eventually as the section of the array you are pivoting gets smaller and smaller, <code>i &gt;= j</code> will trigger."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1521645968, "post_id": 49410095, "comment_id": 85822191, "body": "Marginally related: Think you want  <code>do</code>/<code>while</code> instead of plain old <code>while</code> at <code>while (inputs[i] &lt; pivotValue)</code> in Hoare partition."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1521647769, "post_id": 49410095, "comment_id": 85823667, "body": "The most immediate trip would be an already-sorted sequence of two elements. But, if you instrument your code you&#39;ll find you&#39;re already tripping it with your current sequence."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521648342, "post_id": 49410095, "comment_id": 85824112, "body": "@user4581301 Why would I want a do while instead of a while? Is any efficiency gained? Is a bug fixed?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1521652631, "post_id": 49410095, "comment_id": 85827163, "body": "@ChristopherPisz &#39;d do it for purely pedantic reasons to start. If your goal is to implement Hoare partition and you do something different, then you failed to accomplish the goal. Hoare partition increments/decrements, then tests, resulting in a minimum of one <code>i++</code> and <code>j--</code>.  A perfect use case for <code>do</code>/<code>while</code> over <code>while</code>. There will be a difference in the outcome. What the outcome of this change is noticeable difference in the output or the speed of the algorithm, I&#39;d have to poke at if for a while. I can imagine cases that devolve into an infinite loop because <code>if (i &gt;= j)</code> isn&#39;t true."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1521658212, "post_id": 49410095, "comment_id": 85830411, "body": "Look at the wiki article again, note that it starts with i = leftIndex -1 and j = rightIndex + 1, then in the loops i is pre-incremented and j is pre-decremented. It&#39;s not a big deal, but it is how wiki defines Hoare partition scheme."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1521659179, "post_id": 49410095, "comment_id": 85830989, "body": "@rcgldr I have and did the first time. My question is, what&#39;s the advantage of doing it that way vs the way I did it? i see none. I think the way it was written in the Wiki article is just &quot;worse&quot; because its harder to read. Start at the bounds and move inward. Both do that AFAICT. I don&#39;t want to implement something the same way someone else did without an actual reason to."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1521659797, "post_id": 49410095, "comment_id": 85831323, "body": "@ChristopherPisz - The pre-decrement and pre-increment may be a bit faster, depending on the processor, but the main point is that this is apparently how Hoare partition scheme is defined."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 1, "creation_date": 1521660261, "post_id": 49410095, "comment_id": 85831592, "body": "@rcgldr &amp; user4581301 meh. I don&#39;t think the the details of how an algorithm is implemented in psuedocode on wikipedia define a particular algorithm. An algorithm is defined by breaking a problem into particular steps. How you implement those individual steps is completely up to you as long as the end result, and efficiency in obtaining it, are the same. Looking at my code and the code on wikipedia, I see no difference in the result or the efficiency. Quite frankly I think starting at 1 outside the bounds, only to restructure into a do while instead of a while, is quite frankly, silliness."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 1, "creation_date": 1521660556, "post_id": 49410095, "comment_id": 85831738, "body": "@ChristopherPisz - it&#39;s not a do while. The whiles become <code>while(inputs[++i] &lt; pivotValue);</code> and <code>while(inputs[--j] &gt; pivotValue);</code>. In the case of Visual Studio, although it doesn&#39;t make sense, typically do{}while() is a bit slower than while(). Now this could have been bad luck due to where the loop is located. I&#39;d have to look this up, but I think other articles and old text books about Hoare partition are the same as the wiki article."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1521660860, "post_id": 49410095, "comment_id": 85831929, "body": "I see no difference in the outcome or the efficiency, so I have no concern."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1521670833, "post_id": 49410095, "comment_id": 85836735, "body": "OK. A useful set of examples: Your code with a simple inputs that cause infinite loop: <a href=\"https://ideone.com/H8ksmI\" rel=\"nofollow noreferrer\">ideone.com/H8ksmI</a> . Same inputs with canonical Hoare partition: <a href=\"https://ideone.com/nv544t\" rel=\"nofollow noreferrer\">ideone.com/nv544t</a> . Canonical inputs with your inputs <a href=\"https://ideone.com/qfx3us\" rel=\"nofollow noreferrer\">ideone.com/qfx3us</a>"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521731809, "post_id": 49410095, "comment_id": 85866305, "body": "@user4581301 I concede. Changing to do/while"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1521733890, "post_id": 49410095, "comment_id": 85867867, "body": "So, if w had to put it in words, why we want to increment or decrement before the evaluation, we would say, &quot;In order to move past the values we just swapped&quot;, right?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1521735697, "post_id": 49410095, "comment_id": 85869139, "body": "I think there&#39;s a bug when sorting <code>{0, 1, 0}</code>..."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1521740761, "post_id": 49410095, "comment_id": 85872358, "body": "0,1,0 seems to work OK, with the current revision."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1521741035, "post_id": 49410095, "comment_id": 85872536, "body": "Do you want the whole set of inputs or one input is enough?"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1521752287, "post_id": 49410095, "comment_id": 85878708, "body": "&quot;for all my test inputs that I&#39;ve come up with so far&quot;. You could test this on all possible permutations of, say, a 10 element array. You can use stand library sort as a comparison. Exhaustive and randomized testing are useful when you have an implementation that is known to be good."}], "answers": [{"comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1521659317, "post_id": 49411491, "comment_id": 85831060, "body": "Let me rephrase.... What are the inputs where this evaluation is true for i &gt; j, rather than i == j?"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 0, "last_activity_date": 1521648999, "creation_date": 1521648999, "answer_id": 49411491, "question_id": 49410095, "link": "https://stackoverflow.com/questions/49410095/quicksort-with-hoare-partition/49411491#49411491", "title": "Quicksort with Hoare partition", "body": "<p>There is no <code>break</code> in the body of your <code>while (true) { ... }</code>, so anything after it is unreachable. </p>\n\n<p>As your test cases run to completion, and there are no exceptions thrown or caught, that means they must have <em>all</em> hit <code>return j;</code>, <em>each time</em> you <code>partition</code>ed. </p>\n"}, {"tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": true, "score": 1, "last_activity_date": 1521755058, "last_edit_date": 1521755058, "creation_date": 1521751271, "answer_id": 49438075, "question_id": 49410095, "link": "https://stackoverflow.com/questions/49410095/quicksort-with-hoare-partition/49438075#49438075", "title": "Quicksort with Hoare partition", "body": "<p>Confusion arose, because I had implemented the algorithm wrong. As a couple users pointed out in the comments to the original question (before edits), the listing on wikipedia uses a do/while as opposed to a while, such that the increment of i and decrement of j occur before the evaluation of the condition.</p>\n\n<p>I had assumed there was no functional difference, but there is.</p>\n\n<p>So, given an equivalent partition function:</p>\n\n<pre><code>size_t partition(std::vector&lt;int&gt; &amp; inputs, size_t leftIndex, size_t rightIndex)\n{\n    int pivotValue = inputs[leftIndex];\n    size_t i = leftIndex - 1;\n    size_t j = rightIndex + 1;\n\n    while (true)\n    {\n        while (inputs[++i] &lt; pivotValue);\n        while (inputs[--j] &gt; pivotValue);\n\n        if (i &gt;= j)\n        {\n            return j;\n        }\n\n        std::iter_swap(inputs.begin() + i, inputs.begin() + j);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It becomes obvious that the check for i >= j will get a true hit after the loop walked the marker at each bound closer towards the middle, when they are pointed to the same element or have crossed over each other.</p>\n\n<p>With the fixes increment and decrement loops, an increment and decrement occur each iteration of the main loop. Whereas before, they didn't.</p>\n\n<p>As always, when dealing with algorithms, step through it on paper and it will become clear.</p>\n"}], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "accepted_answer_id": 49438075, "answer_count": 2, "score": 1, "last_activity_date": 1521755058, "creation_date": 1521645372, "last_edit_date": 1521735130, "question_id": 49410095, "link": "https://stackoverflow.com/questions/49410095/quicksort-with-hoare-partition", "title": "Quicksort with Hoare partition", "body": "<p>I've implemented a quicksort in C++ after reading the Wikipedia article on it. Just trying to refresh my memory from school in prep for interviews for a job change.</p>\n\n<p>Here is my implementation</p>\n\n<pre><code>#include &lt;vector&gt;\n\nsize_t partition(std::vector&lt;int&gt; &amp; inputs, size_t leftIndex, size_t rightIndex)\n{\n    int pivotValue = inputs[leftIndex];\n    size_t i = leftIndex - 1;\n    size_t j = rightIndex + 1;\n\n    while (true)\n    {\n        while (inputs[++i] &lt; pivotValue);\n        while (inputs[--j] &gt; pivotValue);\n\n        if (i &gt;= j)\n        {\n            return j;\n        }\n\n        std::iter_swap(inputs.begin() + i, inputs.begin() + j);\n    }\n\n    return 0;\n}\n\nvoid sort(std::vector&lt;int&gt; &amp; inputs, size_t leftIndex, size_t rightIndex)\n{\n    if (leftIndex &lt; rightIndex)\n    {\n        size_t pivot = partition(inputs, leftIndex, rightIndex);\n        sort(inputs, leftIndex, pivot);\n        sort(inputs, pivot + 1, rightIndex);\n    }\n}\n\nint main()\n{\n    std::vector&lt;int&gt; inputs = { 3,7,1,2,9,5,4,0,8,6 };\n    sort(inputs, 0, inputs.size() - 1);\n\n    return 0;\n}\n</code></pre>\n\n<p>It seems to work fine for all my test inputs that I've come up with so far.</p>\n\n<p><em>Editing from here for clarity</em></p>\n\n<p>If we change</p>\n\n<pre><code>        if (i &gt;= j)\n        {\n            return j;\n        }\n</code></pre>\n\n<p>to</p>\n\n<pre><code>        if (i &gt; j)\n        {\n            return j;\n        }\n        else if(i == j)\n        {\n            return j;\n        }\n</code></pre>\n\n<p>My question is, what set of inputs would exercise the following block of the partition function?</p>\n\n<pre><code>        if (i &gt; j)\n        {\n            return j;\n        }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1521645191, "post_id": 49409969, "comment_id": 85821520, "body": "This really needs a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1521645307, "post_id": 49409969, "comment_id": 85821606, "body": "@FredLarson It has to <a href=\"http://coliru.stacked-crooked.com/a/005d579e7236e4d0\" rel=\"nofollow noreferrer\">otherwise it doesnt compile</a>. That being said yes MVCE."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1521645368, "post_id": 49409969, "comment_id": 85821656, "body": "@Borgleader: Oh yes, you&#39;re right. I was thinking there was a compile error, but on closer inspection the error shown is a runtime error."}, {"owner": {"reputation": 2007, "user_id": 5834077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N7N3H.jpg?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5834077/carl"}, "edited": false, "score": 1, "creation_date": 1521645462, "post_id": 49409969, "comment_id": 85821739, "body": "I think you should post your header file too, since in main you&#39;re including a different header than in the <code>simplestudent.cpp</code> file."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1521645519, "post_id": 49409969, "comment_id": 85821788, "body": "@Eray Erturk I cannot reproduce the error using the presented code if to add the default constructor."}, {"owner": {"reputation": 11, "user_id": 9529451, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eray Erturk", "link": "https://stackoverflow.com/users/9529451/eray-erturk"}, "edited": false, "score": 0, "creation_date": 1521645546, "post_id": 49409969, "comment_id": 85821821, "body": "@n.m. in addition to those, there exists a getId method, empty destructer and empty copy constructor. Also, I will edit the assignment operator above."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1521645547, "post_id": 49409969, "comment_id": 85821823, "body": "My strong suspicion is that the default constructor does something like this: <code>Foo() : i(0), s(nullptr) {}</code> which causes <a href=\"http://coliru.stacked-crooked.com/a/69e2975094f5d05d\" rel=\"nofollow noreferrer\">a logic_error in <code>std::string</code></a>. The fix is to remove <code>s(nullptr)</code>. (Called it: <code>const string sname = 0</code>)"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1521645630, "post_id": 49409969, "comment_id": 85821891, "body": "@Eray Erturk So if you defined the copy assignment operator explicitly then it seems the error is in its implementation."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1521645756, "post_id": 49409969, "comment_id": 85822005, "body": "The right way to solve the problem is using a debugger. Trace the program step by stepv observe how variable come ro be, change values, and cease to exist; note at which point the exception is thrown; look at current values of the variables; figure out what went wrong. If still unable to, post your findings together with a way to reproduce them (this means a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1521645824, "post_id": 49409969, "comment_id": 85822068, "body": "general advice, run under a debugger. You will immedatley see what line is failing. Second - google for the error message, you will get instant hits (I just did) telling you the exact cause"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1521645884, "post_id": 49409969, "comment_id": 85822119, "body": "OK <code>const string sname = 0</code> what do you expect to accomplish with this?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1521645981, "post_id": 49409969, "comment_id": 85822202, "body": "and for the first time today. Use std::vector rather than arrays. Life always goes better with std::vector"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1521646038, "post_id": 49409969, "comment_id": 85822243, "body": "@n.m. curious about which constructor will get called for <code>Student()</code> since both constructors match (one with defaults, one with no args)"}, {"owner": {"reputation": 11, "user_id": 9529451, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eray Erturk", "link": "https://stackoverflow.com/users/9529451/eray-erturk"}, "edited": false, "score": 0, "creation_date": 1521646108, "post_id": 49409969, "comment_id": 85822298, "body": "I have used debugger on visual studio, and it says that the problem is with this line:  Student* s1 = new Student(1,&quot;er&quot;);"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1521646177, "post_id": 49409969, "comment_id": 85822362, "body": "@pm100 <a href=\"http://coliru.stacked-crooked.com/a/05b950810ec9719f\" rel=\"nofollow noreferrer\">it should be ambiguous</a>"}, {"owner": {"reputation": 11, "user_id": 9529451, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eray Erturk", "link": "https://stackoverflow.com/users/9529451/eray-erturk"}, "edited": false, "score": 0, "creation_date": 1521646178, "post_id": 49409969, "comment_id": 85822365, "body": "This is the exception :::Unhandled exception at 0x0095D6F0 (ucrtbased.dll) in Project4.exe: 0xC0000005: Access violation reading location 0x00000000"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1521646729, "post_id": 49409969, "comment_id": 85822773, "body": "It looks like your compiler has a bug. It allows you to define both <code>Student::Student(const int sid = 0, const string sname = 0)</code> and <code>Student::Student()</code> and then call the default constructor. This is not legal in C++."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9529451, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eray Erturk", "link": "https://stackoverflow.com/users/9529451/eray-erturk"}, "edited": false, "score": 0, "creation_date": 1521646530, "post_id": 49410409, "comment_id": 85822615, "body": "I cannot delete the first one because I am not allowed to delete it by the instructor, also I changed  &quot;sname = 0&quot; to &quot;sname = &quot;&quot; &quot; but nothing changed again."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 11, "user_id": 9529451, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eray Erturk", "link": "https://stackoverflow.com/users/9529451/eray-erturk"}, "edited": false, "score": 0, "creation_date": 1521646749, "post_id": 49410409, "comment_id": 85822792, "body": "@ErayErturk if your instructor gave you this <code>Student(const int sid = 0, const string sname = 0);</code> then your instructor is either incompetent or sadistic. Sorry to inform you."}, {"owner": {"reputation": 11, "user_id": 9529451, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eray Erturk", "link": "https://stackoverflow.com/users/9529451/eray-erturk"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1521646860, "post_id": 49410409, "comment_id": 85822888, "body": "@n.m. actually it was my mistake, I miswrote it, sorry for that, he gave us that :: Student(const int sid = 0, const string sname = &quot;&quot;);"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 11, "user_id": 9529451, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eray Erturk", "link": "https://stackoverflow.com/users/9529451/eray-erturk"}, "edited": false, "score": 0, "creation_date": 1521647243, "post_id": 49410409, "comment_id": 85823221, "body": "@ErayErturk that&#39;s a different matter! This one <code>Student();</code> is still an error."}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 2, "last_activity_date": 1521646201, "creation_date": 1521646201, "answer_id": 49410409, "question_id": 49409969, "link": "https://stackoverflow.com/questions/49409969/error-on-dynamic-array-creation-on-c/49410409#49410409", "title": "Error on dynamic array creation on c++", "body": "<p>you are failing because you are passing null to the constructor of std::string. THis is not allowed. You do it here</p>\n\n<pre><code>  Student(const int sid = 0, const string sname = 0);\n</code></pre>\n\n<p>Its also not clear why you have 2 constructors</p>\n\n<pre><code> Student(const int sid = 0, const string sname = 0);\n    Student();\n</code></pre>\n\n<p>These are basically identical.</p>\n\n<p>I would simply remove the first one. Now studentName will get default constructed (empty)</p>\n"}], "owner": {"reputation": 11, "user_id": 9529451, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eray Erturk", "link": "https://stackoverflow.com/users/9529451/eray-erturk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1521646201, "creation_date": 1521645021, "last_edit_date": 1521645676, "question_id": 49409969, "link": "https://stackoverflow.com/questions/49409969/error-on-dynamic-array-creation-on-c", "title": "Error on dynamic array creation on c++", "body": "<p>I have a question for my homework. I have written a Student class and its constructor just holds id and name of a single student. Here is the constructor and get method: (I will not put the other part because irrelevant)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"SimpleStudent.h\"\nusing namespace std;\n\nStudent::Student(const int sid , const string sname ) {\n    studentId = sid;\n    studentName = sname;\n}\nstring Student::getStudentName() {\n    return studentName; \n} \n\nvoid Student::operator=(const Student &amp;right) {\n    if (&amp;right != this) {\n        if (studentId != right.studentId) {\n            studentId = right.studentId;\n        }\n        if (studentName != right.studentName) {\n            studentName = right.studentName;\n        }\n    }\n}\n</code></pre>\n\n<p>Note that, studentId and studentName is declared in the header at the private part as int and string, respectively.</p>\n\n<p>Here is the test part:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"SimpleSRS.h\"\nusing namespace std;\nint main() {\n    Student* x = new Student[1];\n    Student* s1 = new Student(1,\"er\");\n    x[0] = *s1;    \n    cout &lt;&lt; x[0].getStudentName() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>When I run the code above, I get the following error:</p>\n\n<p>terminate called after throwing an instance of 'std::logic_error' basic_string::_S_construct null not valid</p>\n\n<p>I cannot figure out the problem. Thank you</p>\n\n<p>Edit: Here is the header file:</p>\n\n<pre><code>#ifndef __SIMPLE_STUDENT_H\n#define __SIMPLE_STUDENT_H\n#include &lt;string&gt;\nusing namespace std;\n\nclass Student {\npublic:\n    Student(const int sid = 0, const string sname = 0);\n    Student();\n    ~Student();\n    Student(const Student &amp;studentToCopy);\n    void operator=(const Student &amp;right);\n    int getStudentId();\n    string getStudentName();\nprivate:\n    int studentId;\n    string studentName;\n};\n#endif\n</code></pre>\n"}, {"tags": ["c++", "memory", "visual-c++", "reverse-engineering", "readprocessmemory"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1521652033, "post_id": 49409929, "comment_id": 85826789, "body": "You are not doing any error handling. Does <code>FindWindow()</code> find a valid <code>HWND</code>? If so, does <code>OpenProcess()</code> return a valid <code>HANDLE</code>?  If so, does <code>ReadProcessMemory()</code> return TRUE? If any of them fail, what does <code>GetLastError()</code> say is the reason? Are you sure you even have the correct memory address? Make sure you are not being affected by <a href=\"https://blogs.msdn.microsoft.com/michael_howard/2006/05/26/address-space-layout-randomization-in-windows-vista/\" rel=\"nofollow noreferrer\">Address Space Layout Randomization (ASLR)</a>. You should use an offset that is relative to the base address of the process you are reading from."}, {"owner": {"reputation": 1, "user_id": 9529432, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-P5QtBVLCyv4/AAAAAAAAAAI/AAAAAAAAACA/1tt6LIOr9Fo/photo.jpg?sz=128", "display_name": "Pasta Dealer", "link": "https://stackoverflow.com/users/9529432/pasta-dealer"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1521664284, "post_id": 49409929, "comment_id": 85833742, "body": "Tested all of it now, and still nothing, it works on my second computer so there is nothing wrong with the address or code, and Im not affected by ASLR"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1521665931, "post_id": 49409929, "comment_id": 85834558, "body": "You are clearly doing something wrong. What I described will work fine on all computers if you use it correctly, perform adequate error handling, and have proper permissions to access the target process."}, {"owner": {"reputation": 1, "user_id": 9529432, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-P5QtBVLCyv4/AAAAAAAAAAI/AAAAAAAAACA/1tt6LIOr9Fo/photo.jpg?sz=128", "display_name": "Pasta Dealer", "link": "https://stackoverflow.com/users/9529432/pasta-dealer"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1521671368, "post_id": 49409929, "comment_id": 85836918, "body": "GetLastError returns 0, got a string function for it, also null, I tried disabling security, anti-virus, firewall, windows defender etc, and starting in admin mode, still returns 0. I tried using another game that uses modules, but this returned something like -66756576 I don&#39;t know what more permission is needed than admin + disabling possible factors blocking"}, {"owner": {"reputation": 1, "user_id": 9529432, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-P5QtBVLCyv4/AAAAAAAAAAI/AAAAAAAAACA/1tt6LIOr9Fo/photo.jpg?sz=128", "display_name": "Pasta Dealer", "link": "https://stackoverflow.com/users/9529432/pasta-dealer"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1521672393, "post_id": 49409929, "comment_id": 85837227, "body": "I also tried disabling UAC, and still nothing"}, {"owner": {"reputation": 1, "user_id": 9529432, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-P5QtBVLCyv4/AAAAAAAAAAI/AAAAAAAAACA/1tt6LIOr9Fo/photo.jpg?sz=128", "display_name": "Pasta Dealer", "link": "https://stackoverflow.com/users/9529432/pasta-dealer"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1521986872, "post_id": 49409929, "comment_id": 85956019, "body": "I did no changes to code or computer, and today it was magically working again. funny but strange :/"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9529432, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-P5QtBVLCyv4/AAAAAAAAAAI/AAAAAAAAACA/1tt6LIOr9Fo/photo.jpg?sz=128", "display_name": "Pasta Dealer", "link": "https://stackoverflow.com/users/9529432/pasta-dealer"}, "edited": false, "score": 0, "creation_date": 1521649556, "post_id": 49410499, "comment_id": 85825016, "body": "Not sure what you mean by that ? There are tags and the question is pretty straight forward: Why it won&#39;t read from memory on one computer when it does on the other one"}], "tags": [], "owner": {"reputation": 1, "user_id": 9529648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matthew Taylor", "link": "https://stackoverflow.com/users/9529648/matthew-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1521646432, "creation_date": 1521646432, "answer_id": 49410499, "question_id": 49409929, "link": "https://stackoverflow.com/questions/49409929/readprocessmemory-in-c-wont-read/49410499#49410499", "title": "Readprocessmemory in C++ won&#39;t read", "body": "<p>A.) Can you read the Address in Cheat Engine etc</p>\n\n<p>B.) Does it require a base address (e.g \"client.dll\")?  If so get the module base address of the required module.</p>\n"}], "owner": {"reputation": 1, "user_id": 9529432, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-P5QtBVLCyv4/AAAAAAAAAAI/AAAAAAAAACA/1tt6LIOr9Fo/photo.jpg?sz=128", "display_name": "Pasta Dealer", "link": "https://stackoverflow.com/users/9529432/pasta-dealer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1097, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1521672369, "creation_date": 1521644924, "last_edit_date": 1521672369, "question_id": 49409929, "link": "https://stackoverflow.com/questions/49409929/readprocessmemory-in-c-wont-read", "title": "Readprocessmemory in C++ won&#39;t read", "body": "<p>I have been coding for a few years now, but in 2016 I took a couple years off. Now I decided to come back, so I wanted to play around with some reverse engineering.\nI played around with a game called Black Ops 1: Zombies. I found the memory addresses, then I went into C++ to code a simple cheat for unlimited ammo (This is offline), but it didn't work, so tried using ReadProcessMemory instead to see if it gives the correct ammo. The console started printing out \"0\". I thought there might been something with the code so I looked up some of my older source code, and the code was the same, tried installing VS 2015 instead in case the compiler is the problem, still nothing, tried GNCC compiler, still nothing. Tried using it on my second computer and it worked. I tried disabling Anti-Virus and windows defender but still nothing.\nHere is the source code if it means anything:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\nusing namespace std;\n\nDWORD Address = 0x180A6C8;\nDWORD pID;\n\nint points;\n\nint main()\n{\n    while (true)\n    {\n\n\n        HWND hWnd = FindWindowA(0, (\"Call of Duty\u00ae: BlackOps\"));\n        GetWindowThreadProcessId(hWnd, &amp;pID);\n        HANDLE pHandle = OpenProcess(PROCESS_VM_READ, FALSE, pID);\n        ReadProcessMemory(pHandle, (LPVOID)Address, &amp;points, sizeof(points), 0);\n        cout &lt;&lt; points &lt;&lt; endl;\n        Sleep(100);\n    }\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "wpf", "visual-studio-2017"], "owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1521644753, "creation_date": 1521644753, "question_id": 49409862, "link": "https://stackoverflow.com/questions/49409862/wpf-application-freezes-on-tooltip-only-inside-visual-studio", "title": "WPF application freezes on ToolTip (only inside Visual Studio)", "body": "<p>After upgrading a <strong>VS2010</strong> WPF project (that uses unmanaged code as well if that matters) to <strong>VS2017</strong> (along with some other other upgrades such as Cuda), when running the application, everything works until a tooltip is required to appear. \nThe weird thing is that <strong>this only happens when running the code with a debugger</strong> (inside VS), but <strong>when running without it works fine</strong> (Ctrl+F5, or the .exe directly) .</p>\n\n<p>The Tooltip is a simple textbox ToolTip (Adding <code>ToolTipService.InitialShowDelay=\"5000\"</code> makes the freeze delay in 5 seconds).</p>\n\n<p>Pausing the application when the freeze occurs, a stack trace of the Main thread shows that the app is stuck on a <code>WaitForSingleObject</code> in <code>ntdll.dll</code> after a <code>RaiseToolTipOpeningEvent</code> is triggered (I'm assuming the parts before that are related to WPF's mechanism for raising the tool tip with a slight delay).</p>\n\n<p>Here's the stack:</p>\n\n<pre><code>ntdll.dll!NtWaitForSingleObject()  Unknown Symbols loaded.\nKernelBase.dll!WaitForSingleObjectEx() Unknown Symbols loaded.\ncombase.dll!CDllHost::MTAInitializeActivators() Line 830    C++ Symbols loaded.\ncombase.dll!CDllHost::GetApartmentActivators(unsigned long &amp; hCOMActivator, unsigned long &amp; hWinRTActivator) Line 622   C++ Symbols loaded.\n[Inline Frame] combase.dll!CDllHost::GetCOMApartmentActivator(unsigned long &amp;) Line 133 C++ Symbols loaded.\n[Inline Frame] combase.dll!DoATApartmentCreate(unsigned long &amp;) Line 225    C++ Symbols loaded.\ncombase.dll!CClassCache::GetActivatorFromDllHost(int fSixteenBit, int isActivatingAppInstalledClass, unsigned long dwDllThreadModel, unsigned long * phActivator) Line 3643 C++ Symbols loaded.\ncombase.dll!CProcessActivator::GetApartmentActivator(ActivationPropertiesIn * pInActProperties, ISystemActivator * * ppActivator) Line 1093 C++ Symbols loaded.\ncombase.dll!CProcessActivator::CCICallback(unsigned long dwContext, IUnknown * pUnkOuter, ActivationPropertiesIn * pActIn, IActivationPropertiesIn * pInActProperties, IActivationPropertiesOut * * ppOutActProperties) Line 1601   C++ Symbols loaded.\ncombase.dll!CProcessActivator::AttemptActivation(ActivationPropertiesIn * pActIn, IUnknown * pUnkOuter, IActivationPropertiesIn * pInActProperties, IActivationPropertiesOut * * ppOutActProperties, HRESULT(CProcessActivator::*)(unsigned long, IUnknown *, ActivationPropertiesIn *, IActivationPropertiesIn *, IActivationPropertiesOut * *) pfnCtxActCallback, unsigned long dwContext) Line 1524  C++ Symbols loaded.\ncombase.dll!CProcessActivator::ActivateByContext(ActivationPropertiesIn * pActIn, IUnknown * pUnkOuter, IActivationPropertiesIn * pInActProperties, IActivationPropertiesOut * * ppOutActProperties, HRESULT(CProcessActivator::*)(unsigned long, IUnknown *, ActivationPropertiesIn *, IActivationPropertiesIn *, IActivationPropertiesOut * *) pfnCtxActCallback) Line 1368   C++ Symbols loaded.\ncombase.dll!CProcessActivator::CreateInstance(IUnknown * pUnkOuter, IActivationPropertiesIn * pInActProperties, IActivationPropertiesOut * * ppOutActProperties) Line 1268  C++ Symbols loaded.\ncombase.dll!ActivationPropertiesIn::DelegateCreateInstance(IUnknown * pUnkOuter, IActivationPropertiesOut * * ppActPropsOut) Line 1932  C++ Symbols loaded.\ncombase.dll!CClientContextActivator::CreateInstance(IUnknown * pUnkOuter, IActivationPropertiesIn * pInActProperties, IActivationPropertiesOut * * ppOutActProperties) Line 567 C++ Symbols loaded.\ncombase.dll!ActivationPropertiesIn::DelegateCreateInstance(IUnknown * pUnkOuter, IActivationPropertiesOut * * ppActPropsOut) Line 1984  C++ Symbols loaded.\ncombase.dll!ICoCreateInstanceEx(const _GUID &amp; OriginalClsid, IUnknown * punkOuter, unsigned long dwClsCtx, _COSERVERINFO * pServerInfo, unsigned long dwCount, unsigned long dwActvFlags, tagMULTI_QI * pResults, ActivationPropertiesIn * pActIn) Line 1935    C++ Symbols loaded.\ncombase.dll!CComActivator::DoCreateInstance(const _GUID &amp; Clsid, IUnknown * punkOuter, unsigned long dwClsCtx, _COSERVERINFO * pServerInfo, unsigned long dwCount, tagMULTI_QI * pResults, ActivationPropertiesIn * pActIn) Line 385    C++ Symbols loaded.\n[Inline Frame] combase.dll!CoCreateInstanceEx(const _GUID &amp;) Line 176   C++ Symbols loaded.\ncombase.dll!CoCreateInstance(const _GUID &amp; rclsid, IUnknown * pUnkOuter, unsigned long dwContext, const _GUID &amp; riid, void * * ppv) Line 120    C++ Symbols loaded.\nPGHook.dll!00007ffd375410a4()   Unknown No symbols loaded.\nUIAutomationCore.dll!BlockingCoreDispatcher::CreateAndRegisterBlockingCore(void)    Unknown Symbols loaded.\nUIAutomationCore.dll!BlockingCoreDispatcher::FinalConstruct(void)   Unknown Symbols loaded.\nUIAutomationCore.dll!CUIAutomation7::FinalConstruct(void)   Unknown Symbols loaded.\nUIAutomationCore.dll!ATL::CComObject&lt;class CUIAutomation7&gt;::CreateInstance(class ATL::CComObject&lt;class CUIAutomation7&gt; * *) Unknown Symbols loaded.\nUIAutomationCore.dll!UiaReturnRawElementProvider() Unknown Symbols loaded.\nUIAutomationProvider.ni.dll!00007ffd1ab2a933()  Unknown No symbols loaded.\n[Managed to Native Transition]      Annotated Frame\nUIAutomationProvider.dll!System.Windows.Automation.Provider.AutomationInteropProvider.ReturnRawElementProvider(System.IntPtr hwnd, System.IntPtr wParam, System.IntPtr lParam, System.Windows.Automation.Provider.IRawElementProviderSimple el) Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Controls.Primitives.Popup.PopupSecurityHelper.ForceMsaaToUiaBridge(System.Windows.Controls.Primitives.PopupRoot popupRoot) Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Controls.Primitives.Popup.CreateWindow(bool asyncCall) Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Controls.Primitives.Popup.OnIsOpenChanged(System.Windows.DependencyObject d, System.Windows.DependencyPropertyChangedEventArgs e)  Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.DependencyObject.OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs e)  Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.FrameworkElement.OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs e)    Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.DependencyObject.NotifyPropertyChange(System.Windows.DependencyPropertyChangedEventArgs args)    Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.DependencyObject.UpdateEffectiveValue(System.Windows.EntryIndex entryIndex, System.Windows.DependencyProperty dp, System.Windows.PropertyMetadata metadata, System.Windows.EffectiveValueEntry oldEntry, ref System.Windows.EffectiveValueEntry newEntry, bool coerceWithDeferredReference, bool coerceWithCurrentValue, System.Windows.OperationType operationType) Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.DependencyObject.SetValueCommon(System.Windows.DependencyProperty dp, object value, System.Windows.PropertyMetadata metadata, bool coerceWithDeferredReference, bool coerceWithCurrentValue, System.Windows.OperationType operationType, bool isInternal)    Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Data.BindingOperations.SetBinding(System.Windows.DependencyObject target, System.Windows.DependencyProperty dp, System.Windows.Data.BindingBase binding)   Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Controls.Primitives.Popup.CreateRootPopup(System.Windows.Controls.Primitives.Popup popup, System.Windows.UIElement child)  Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Controls.ToolTip.OnIsOpenChanged(System.Windows.DependencyObject d, System.Windows.DependencyPropertyChangedEventArgs e)   Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.DependencyObject.OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs e)  Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.FrameworkElement.OnPropertyChanged(System.Windows.DependencyPropertyChangedEventArgs e)    Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.DependencyObject.NotifyPropertyChange(System.Windows.DependencyPropertyChangedEventArgs args)    Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.DependencyObject.UpdateEffectiveValue(System.Windows.EntryIndex entryIndex, System.Windows.DependencyProperty dp, System.Windows.PropertyMetadata metadata, System.Windows.EffectiveValueEntry oldEntry, ref System.Windows.EffectiveValueEntry newEntry, bool coerceWithDeferredReference, bool coerceWithCurrentValue, System.Windows.OperationType operationType) Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.DependencyObject.SetValueCommon(System.Windows.DependencyProperty dp, object value, System.Windows.PropertyMetadata metadata, bool coerceWithDeferredReference, bool coerceWithCurrentValue, System.Windows.OperationType operationType, bool isInternal)    Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.DependencyObject.SetValue(System.Windows.DependencyProperty dp, object value)    Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Controls.PopupControlService.RaiseToolTipOpeningEvent()    Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.DispatcherTimer.FireTick(object unused)    Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate callback, object args, int numArgs)  Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.ExceptionWrapper.TryCatchWhen(object source, System.Delegate callback, object args, int numArgs, System.Delegate catchHandler) Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.DispatcherOperation.InvokeImpl()   Unknown Symbols loaded.\nWindowsBase.dll!MS.Internal.CulturePreservingExecutionContext.CallbackWrapper(object obj)   Unknown Symbols loaded.\nmscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx) Line 954  C#  Symbols loaded.\nmscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx) Line 902  C#  Symbols loaded.\nmscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state) Line 891    C#  Symbols loaded.\nWindowsBase.dll!MS.Internal.CulturePreservingExecutionContext.Run(MS.Internal.CulturePreservingExecutionContext executionContext, System.Threading.ContextCallback callback, object state)  Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.DispatcherOperation.Invoke()   Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.Dispatcher.ProcessQueue()  Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.Dispatcher.WndProcHook(System.IntPtr hwnd, int msg, System.IntPtr wParam, System.IntPtr lParam, ref bool handled)  Unknown Symbols loaded.\nWindowsBase.dll!MS.Win32.HwndWrapper.WndProc(System.IntPtr hwnd, int msg, System.IntPtr wParam, System.IntPtr lParam, ref bool handled) Unknown Symbols loaded.\nWindowsBase.dll!MS.Win32.HwndSubclass.DispatcherCallbackOperation(object o) Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate callback, object args, int numArgs)  Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.ExceptionWrapper.TryCatchWhen(object source, System.Delegate callback, object args, int numArgs, System.Delegate catchHandler) Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.Dispatcher.LegacyInvokeImpl(System.Windows.Threading.DispatcherPriority priority, System.TimeSpan timeout, System.Delegate method, object args, int numArgs)   Unknown Symbols loaded.\nWindowsBase.dll!MS.Win32.HwndSubclass.SubclassWndProc(System.IntPtr hwnd, int msg, System.IntPtr wParam, System.IntPtr lParam)  Unknown Symbols loaded.\n[Native to Managed Transition]      Annotated Frame\nuser32.dll!UserCallWinProcCheckWow()    Unknown Symbols loaded.\nuser32.dll!DispatchMessageWorker()  Unknown Symbols loaded.\nWindowsBase.ni.dll!00007ffce783bd98()   Unknown No symbols loaded.\n[Managed to Native Transition]      Annotated Frame\nWindowsBase.dll!System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame frame)   Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Application.RunDispatcher(object ignore)   Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Application.RunInternal(System.Windows.Window window)  Unknown Symbols loaded.\nMyApplication.exe!MyApplication.App.Main()  Unknown Symbols loaded.\n[Native to Managed Transition]      Annotated Frame\nmscoreei.dll!_CorExeMain() Unknown Symbols loaded.\nmscoree.dll!_CorExeMain_Exported() Unknown Symbols loaded.\nkernel32.dll!BaseThreadInitThunk() Unknown Symbols loaded.\nntdll.dll!RtlUserThreadStart() Unknown Symbols loaded.\n</code></pre>\n\n<p>I can't find any thread that's blocking the main thread by not signaling the above waited object. I've tried returning to .NET 4.5.1 (Now using 4.7) but it had no effect. </p>\n\n<p>When running the executable directly and attaching to the process, it works fine as well, so I compared the modules used when loading with debugger and without, and somehow <code>ntdll.dll</code> is not even loaded when running without a debugger (which is even more confusing to me).</p>\n\n<p>Searching the web led me no where so any help or suggestion would be appreciated. </p>\n"}, {"tags": ["c++", "cuda", "cublas"], "comments": [{"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "edited": false, "score": 0, "creation_date": 1521645174, "post_id": 49409745, "comment_id": 85821502, "body": "Initialization (all those <code>malloc</code> and <code>cudaMalloc</code>) seems ok, because I can print the values correctly). Trying to check what happens after those initialization."}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "edited": false, "score": 0, "creation_date": 1521645418, "post_id": 49409745, "comment_id": 85821705, "body": "The only clue I have is that the variable <code>singularity</code> is 0, which means the matrix is not invertible, which is odd because I&#39;ve just checked and it is invertible."}, {"owner": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 1, "creation_date": 1521645596, "post_id": 49409745, "comment_id": 85821871, "body": "What is the value of the returned status for the <code>cusolverSpDcsrlsvqr</code> call? according to this <a href=\"http://docs.nvidia.com/cuda/cusolver/index.html\" rel=\"nofollow noreferrer\">docs.nvidia.com/cuda/cusolver/index.html</a> there should be a status returned if it is not SUCCESS it could explain what happened."}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "reply_to_user": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 1, "creation_date": 1521645716, "post_id": 49409745, "comment_id": 85821971, "body": "<code>CUSOLVER_STATUS_INTERNAL_ERROR</code>"}, {"owner": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1521645765, "post_id": 49409745, "comment_id": 85822016, "body": "Yay.. at least you know why you are not getting a result.. it failed ;) Now we need to figure out why :)"}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "reply_to_user": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1521645816, "post_id": 49409745, "comment_id": 85822057, "body": "XD, I got that xD. Is the csr representation I&#39;ve given correct?"}, {"owner": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1521645915, "post_id": 49409745, "comment_id": 85822150, "body": "Unfortunately, that is beyond my ability. :( I have not done any CUDA dev in years. Hopefully someone can help you further. :("}, {"owner": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1521645985, "post_id": 49409745, "comment_id": 85822205, "body": "CUSOLVER_STATUS_INTERNAL_ERROR   An internal cuSolver operation failed. This error is usually caused by a cudaMemcpyAsync() failure.  To correct: check that the hardware, an appropriate version of the driver, and the cuSolver library are correctly installed. Also, check that the memory passed as a parameter to the routine is not being deallocated prior to the routine\u2019s completion."}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "reply_to_user": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1521646094, "post_id": 49409745, "comment_id": 85822286, "body": "cuda capabilites 6.1 and the toolkit version is the 9.1.85 (latest). Drivers are latest version as well."}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "reply_to_user": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1521646521, "post_id": 49409745, "comment_id": 85822604, "body": "The synchronization might be the problem tough, in a cuda example there&#39;s a call <code>cudaStat1 = cudaDeviceSynchronize();</code> which I haven&#39;t. Not sure where should I use it though."}, {"owner": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1521646707, "post_id": 49409745, "comment_id": 85822754, "body": "Your guess is as good as mine at this point. (probably better actually :) )"}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "reply_to_user": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1521647159, "post_id": 49409745, "comment_id": 85823134, "body": "It must be something stupid... I&#39;m 90% sure."}, {"owner": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1521654345, "post_id": 49409745, "comment_id": 85828211, "body": "There are no smart bugs :)..."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1521663511, "post_id": 49409745, "comment_id": 85833334, "body": "Your use of thrust vectors as arguments to the cusolver call is completely wrong"}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "edited": false, "score": 0, "creation_date": 1521663696, "post_id": 49409745, "comment_id": 85833448, "body": "why is that? Am I not passing the pointer tho the device memory? Can you tell me how to correct it?"}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1521666318, "post_id": 49409745, "comment_id": 85834732, "body": "@talonmies I sorted out everything, I&#39;d like to know how I am supposed to use the thrust vectors as arguments."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1521666660, "post_id": 49409745, "comment_id": 85834911, "body": "raw_pointer_cast is the canonical way to get a pointer from a device_pointer, although is seems like the get() method might work"}], "answers": [{"comments": [{"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "edited": false, "score": 0, "creation_date": 1521664005, "post_id": 49415885, "comment_id": 85833588, "body": "If this was the error then as I said... it was really stupid... lemme try. Thank you"}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "edited": false, "score": 0, "creation_date": 1521665148, "post_id": 49415885, "comment_id": 85834203, "body": "Ok, that was an error, but I&#39;m still getting 0 as solution. I can believe I made such a mistake... the error I had with the solver disappeared."}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "edited": false, "score": 0, "creation_date": 1521666116, "post_id": 49415885, "comment_id": 85834634, "body": "Ok sorted out, I forgot to initialize the vector <code>dataB</code>."}], "tags": [], "owner": {"reputation": 6633, "user_id": 1662425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8109db00d44ebcdc900353b05e3a1443?s=128&d=identicon&r=PG", "display_name": "tera", "link": "https://stackoverflow.com/users/1662425/tera"}, "is_accepted": false, "score": 1, "last_activity_date": 1521663870, "creation_date": 1521663870, "answer_id": 49415885, "question_id": 49409745, "link": "https://stackoverflow.com/questions/49409745/cusolver-doesnt-return-the-correct-solution/49415885#49415885", "title": "cuSolver doesn&#39;t return the correct solution", "body": "<p>The <code>csrColIndA</code> array in your example is too short, so that cuSOLVER tries to read past the end of it.</p>\n\n<p><a href=\"http://docs.nvidia.com/cuda/cusolver/index.html#format-csr\" rel=\"nofollow noreferrer\">According to the cuSOLVER documentation</a> and common convention, the column index array has the same length as the array of nonzero matrix entries, and stores the column index of each nonzero element (and not just the first nonzero element in each column as in your example, which would limit the format to sparsity patterns where all nonzero elements are vertically consecutive).</p>\n\n<p>So your example output should have</p>\n\n<pre><code>csrColIndA = {0, 1, 0, 1, 2, 1, 2, 3, 2, 3, 4, 3, 4, 5, 4, 5}\n</code></pre>\n"}], "owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521666085, "creation_date": 1521644446, "last_edit_date": 1521666085, "question_id": 49409745, "link": "https://stackoverflow.com/questions/49409745/cusolver-doesnt-return-the-correct-solution", "title": "cuSolver doesn&#39;t return the correct solution", "body": "<p>I'm trying to use the QR linear system solver in cuSOLVER, this</p>\n\n<pre><code>#include &lt;cusparse_v2.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;cuda.h&gt;\n#include &lt;cuda_runtime.h&gt;\n#include \"device_launch_parameters.h\"\n#include &lt;iostream&gt;\n#include &lt;cassert&gt;\n\n#include &lt;cublas_v2.h&gt;\n#include &lt;cusolverDn.h&gt;\n#include &lt;cusolverSp.h&gt;\n\n#include &lt;thrust/host_vector.h&gt;\n#include &lt;thrust/device_vector.h&gt;\n\nusing namespace thrust;\n\n#define CUSPARSE_CHECK(x) {cusparseStatus_t _c=x; if (_c != CUSPARSE_STATUS_SUCCESS) {printf(\"cusparse fail: %d, line: %d\\n\", (int)_c, __LINE__); exit(-1);}}\n\nvoid init_handlers_and_matr_descriptor(cusolverSpHandle_t&amp; cusolverH,cusparseHandle_t&amp; cusparseH,cusparseMatDescr_t&amp; descrA) {\n    assert(CUSOLVER_STATUS_SUCCESS == cusolverSpCreate(&amp;cusolverH));\n    assert(CUSPARSE_STATUS_SUCCESS == cusparseCreate(&amp;cusparseH));\n    assert(CUSPARSE_STATUS_SUCCESS == cusparseCreateMatDescr(&amp;descrA)); //CUSPARSE_INDEX_ZERO,CUSPARSE_MATRIX_TYPE_GENERAL\n    assert(CUSPARSE_STATUS_SUCCESS == cusparseSetMatIndexBase(descrA,CUSPARSE_INDEX_BASE_ZERO));\n    assert(CUSPARSE_STATUS_SUCCESS == cusparseSetMatType(descrA, CUSPARSE_MATRIX_TYPE_GENERAL));\n}\n\nint sparse_solver_test() {\n\n    //Init csr format A and b for solving Ax = b\n    /*\n    A =\n    [  1.0  2.0  0.0  0.0  0.0  0.0 ]\n    [  3.0  4.0  5.0  0.0  0.0  0.0 ]\n    [  0.0  6.0  7.0  8.0  0.0  0.0 ]\n    [  0.0  0.0  9.0 10.0 11.0  0.0 ]\n    [  0.0  0.0  0.0 12.0 13.0 14.0 ]\n    [  0.0  0.0  0.0  0.0 15.0 16.0 ]\n\n    b = [0.0,2.0,4.0,6.0,8.0,10.0]^T\n    */\n\n    int nnz_A = 16, m = 6;\n\n    cusolverSpHandle_t cusolverH = NULL;\n    cusparseHandle_t cusparseH = NULL; //cuBLAS or cuSPARSE?\n    cusolverStatus_t cusolver_status = CUSOLVER_STATUS_SUCCESS;\n    cusparseMatDescr_t descrA;\n    cudaError_t cudaStat;\n\n    init_handlers_and_matr_descriptor(cusolverH, cusparseH, descrA);\n\n    host_vector&lt;double&gt; h_csrValA(nnz_A), h_dataB(m), h_dataX(m);\n    host_vector&lt;int&gt; h_csrRowPtrA(m + 1), h_csrColIndA(nnz_A);\n    device_vector&lt;double&gt; d_csrValA(nnz_A), d_dataB(m), d_dataX(m);\n    device_vector&lt;int&gt; d_csrRowPtrA(m + 1), d_csrColIndA(nnz_A);\n\n    //Init matrix\n    for (auto i = 0; i &lt; nnz_A; ++i) h_csrValA[i] = static_cast&lt;double&gt;(i + 1);\n    h_csrRowPtrA[0] = 0;\n    h_csrRowPtrA[1] = 2;\n    for (auto i = 2; i &lt; m; ++i) h_csrRowPtrA[i] = h_csrRowPtrA[i - 1] + 3;\n    h_csrRowPtrA[m] = nnz_A;\n\n    h_csrColIndA[0] = 0;\n    int v[] = {0, 1, 0, 1, 2, 1, 2, 3, 2, 3, 4, 3, 4, 5, 4, 5 };\n    for (auto i = 0; i &lt; nnz_A; ++i) h_csrColIndA[i] = v[i];\n\n    for (auto i = 0; i &lt; m; ++i) h_dataB[i] = static_cast&lt;double&gt;(2 * i);\n\n    //device memory and descriptor A init\n    d_csrValA = h_csrValA;\n    d_csrRowPtrA = h_csrRowPtrA;\n    d_csrColIndA = h_csrColIndA;\n    d_dataB = h_dataB;\n\n    //step4, solve the linear system?\n    int singularity;\n    cusolver_status = cusolverSpDcsrlsvqr(\n        cusolverH, m, nnz_A, descrA,\n        d_csrValA.data().get(), d_csrRowPtrA.data().get(), d_csrColIndA.data().get(), d_dataB.data().get(),\n        0.0, 0, d_dataX.data().get(), &amp;singularity);\n\n    std::cout &lt;&lt; \"singularity = \" &lt;&lt; singularity &lt;&lt; std::endl;\n    assert(CUSOLVER_STATUS_SUCCESS == cusolver_status);\n\n    h_dataX = d_dataX;\n\n    std::cout &lt;&lt; \"x = (\";\n    for (auto i = 0; i &lt; m; ++i) {\n        std::cout &lt;&lt; h_dataX[i];\n        if (i &lt; m - 1) std::cout &lt;&lt; \", \";\n    }\n    std::cout &lt;&lt; std::endl;\n\n    if (cusparseH)\n        cusparseDestroy(cusparseH);\n    if (cusolverH)\n        cusolverSpDestroy(cusolverH);\n    if (descrA)\n        cusparseDestroyMatDescr(descrA);\n    cudaDeviceReset();\n    return 0;\n}\n\nint main(int argc, char** argv) {\n    sparse_solver_test();\n    return 0;\n}\n</code></pre>\n\n<p>Not sure if the setup of my function is wrong, can anyone help?</p>\n\n<p><strong>Update</strong> I simplified the code a bit using the thrust library, still the error is the same though, but at least I got rid of all the malloc etc...</p>\n\n<p><strong>Update</strong> Corrected the <code>csrIndColA</code> (changed the code accordingly) array as suggested. Now the solver works (i.e. I'm not getting anymore the error I was getting earlier), still though I'm getting 0 as result.</p>\n\n<p><strong>Update</strong> With all the changes I've done I also forgot to initialize <code>h_dataB</code>, together with the indices in <code>csrIndColA</code> that solved the problem, the full code is above for future reference.</p>\n"}, {"tags": ["android", "c++", "termux"], "answers": [{"tags": [], "owner": {"reputation": 16093, "user_id": 534298, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4ba32c06ed067564a6c6512de5217657?s=128&d=identicon&r=PG", "display_name": "nos", "link": "https://stackoverflow.com/users/534298/nos"}, "is_accepted": false, "score": 0, "last_activity_date": 1524620561, "creation_date": 1524620561, "answer_id": 50012870, "question_id": 49409712, "link": "https://stackoverflow.com/questions/49409712/c-edit-compile-and-execute-on-termux/50012870#50012870", "title": "C++ edit, compile and execute on Termux", "body": "<p>The <code>termux-setup-storage</code> package maps all the Chromebook Files folders to a new folder in your home directory. To install it, type the following in your termux</p>\n\n<pre><code>pkg install termux-setup-storage\n</code></pre>\n\n<p>Then if you type in your termux</p>\n\n<pre><code>cd\nls storage/downloads\n</code></pre>\n\n<p>You should see the content of your Chromebook's Download folder. On my chromebook, the <code>storage</code> folder contains the following Chromebook Files folders</p>\n\n<pre><code>~ $ ls storage/\ndcim/      downloads/ movies/    music/     pictures/  shared/\n</code></pre>\n\n<p>I usually put cpp code in my termux user directory (e.g., <code>~/src/project1</code>), instead of the Chromebook's directories. Both compiling and execution with <code>g++</code> seems fine so far (see the screenshot below). Let me know if you have more specific questions.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0cju8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0cju8.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 33, "user_id": 9529296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7765ec6f2114854e5bff75fd9eb721e?s=128&d=identicon&r=PG", "display_name": "fatm", "link": "https://stackoverflow.com/users/9529296/fatm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1635, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524620561, "creation_date": 1521644371, "last_edit_date": 1521812347, "question_id": 49409712, "link": "https://stackoverflow.com/questions/49409712/c-edit-compile-and-execute-on-termux", "title": "C++ edit, compile and execute on Termux", "body": "<p>I would like to be able to download a set of files from Drive on to my tablet (Nexus 7 2012 running Lineage OS) and then edit, compile and execute the relevant files. These files are all c++ related .cpp, .h and the main file. (BTW I am new to c++ and Termux). </p>\n\n<p>When I currently do this I can edit and compile but cannot execute - I get a permission denied error message. I have followed the instructions from the termux help page, run termux-setup-storage and given permission for the emulator to access the shared folders. These are all setup correctly as far as I can tell. </p>\n\n<p>Checking up on other questions and sites it is well explained that you cannot compile and run on the emulated storage locations (nor the external drive if you have one - I don't).</p>\n\n<p>My issue is that I cannot copy the files from the emulated download folder into the termux folder. I cannot directly download from drive to the termux folder, and do not know how to navigate directly to Drive from within termux. </p>\n\n<p>So more specifically:</p>\n\n<ol>\n<li>How do you copy a file from the emulated termux downloads into the termux folder? (adding su does not work).</li>\n<li>Is it possible to navigate via termux directly into drive and to work there?</li>\n<li>I have tried to chmod the files in termux but this does not work. I have also tried termux-open and this does not work. Is there some other way to compile and execute c++ files in termux using clang++?</li>\n</ol>\n\n<p>Any other suggestions would be appreciated.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "pointers", "dynamic-arrays"], "comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 7, "creation_date": 1521644374, "post_id": 49409636, "comment_id": 85820886, "body": "What you should be doing is to use <code>std::vector&lt;int&gt;</code> instead of a <code>int[]</code>."}, {"owner": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "edited": false, "score": 0, "creation_date": 1521644780, "post_id": 49409636, "comment_id": 85821200, "body": "you call <code>displayArray</code> passing a pointer to an int, and the function name, parameter name, argument name and function code makes me think you want to pass an array as parameter. There is also a memory leak ( you allocate at : <code>int *arr; arr = new int[size];</code>, but you don&#39;t delete it or return it ). Also, why do you return the pointer to the argument that will be modified anyway when you pass it as a non const reference ? Don&#39;t you want to return the array itself ? Why don&#39;t you assign the return value when you call <code>generateAndFillArray</code> ? You just dereference it"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1521645190, "post_id": 49409636, "comment_id": 85821519, "body": "When passing arrays to functions, you should pass the capacity also."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1521647785, "post_id": 49409636, "comment_id": 85823681, "body": "<code>int size; const int arr; * generateAndFillArray(size);</code> --&gt; <code>int size; int *arr = generateAndFillArray(size);</code> and in <code>generateAndFillArray</code>: <code>return &amp;size;</code> --&gt; <code>return arr;</code>. You need to study the difference between pointers and references."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1521654359, "last_edit_date": 1521654359, "creation_date": 1521653154, "answer_id": 49412911, "question_id": 49409636, "link": "https://stackoverflow.com/questions/49409636/how-can-i-return-a-dynamically-allocated-array-and-the-size-of-the-array-then-pr/49412911#49412911", "title": "How can I return a dynamically allocated array and the size of the array then print it out through second function?", "body": "<p>There are several problems with the code, namely</p>\n\n<ul>\n<li><p>the code in <code>main()</code> is just completely wrong.  You are declaring <code>arr</code> as <code>const</code> without initializing it, and you are not declaring it as a pointer at all. You are passing <code>arr</code> to <code>displayArray()</code> using <code>operator&amp;</code>, which you don't need if <code>arr</code> were a pointer to begin with.  And you are not calling <code>delete[]</code> to free the array that <code>generateAndFillArray()</code> allocates with <code>new[]</code>.</p></li>\n<li><p>in <code>generateAndFillArray()</code>, you are not validating to make sure that the user is entering actual numbers at all, you are only validating that numbers are in a given range.  If the user types a non-number value, <code>operator&gt;&gt;</code> fails, but you are not checking for that.  You are also not returning the pointer to the allocated array.</p></li>\n<li><p>in <code>displayArray()</code>, you are not outputting the array in the format that you have documented. Even if you were, you are only outputting the 1st number in the array on each loop iteration.  You are not actually looping through the whole array.</p></li>\n</ul>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;limits&gt;\n\nusing namespace std;\n\n// prototypes\nint* generateAndFillArray(int &amp; size);\nvoid displayArray(const int *arr, int size);\n\nint main()\n{\n    int size;\n    int *arr = generateAndFillArray(size);\n    displayArray(arr, size);\n    delete[] arr;\n\n    return 0;\n}\n\n//Prompt the User for a number (1-10) then dynamically allocate an array of this size.\n//Prompt the user to fill out the array, with numbers (1-100) all numbers included (1 and 100 are allowed).\n//Return the array through the return statement to the main body and the size of the array through a reference parameter.\n\nint* generateAndFillArray(int &amp;size)\n{\n    cout &lt;&lt; \"Enter a number (1-10) that will serve as the size of the array: \";\n    do\n    {\n        if (cin &gt;&gt; size)\n        {\n            if (size &gt;= 1 &amp;&amp; size &lt;= 10)\n                break;\n\n            cout &lt;&lt; \"Please enter a correct number between 1 and 10. \";\n        }\n        else\n        {\n            cin.clear();\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n            cout &lt;&lt; \"Please enter a valid number between 1 and 10. \";\n        }\n    }\n    while (true);\n\n    int *arr = new int[size];\n\n    cout &lt;&lt; \"enter a number for each subscript of the array \";\n\n    for (int i = 0; i &lt; size; ++i)\n    {\n        while (!(cin &gt;&gt; arr[i]))\n        {\n            cin.clear();\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n            cout &lt;&lt; \"Please enter valid numbers for subscript \" &lt;&lt; i &lt;&lt; \" onward. \";\n        }\n    }\n\n    return arr;\n}\n\n//Display on one line, by itself, with a space following each number, surrounded by square\n//    brackets. example: [1 59 13 37 55]\nvoid displayArray(const int *numbers, int size)\n{\n    cout &lt;&lt; \"[\";\n    if (size &gt; 0)\n    {\n        cout &lt;&lt; numbers[0];\n        for (int i = 1; i &lt; size; i++)\n            cout &lt;&lt; \" \" &lt;&lt; numbers[i];\n    }\n    cout &lt;&lt; \"]\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>That being said, you really should be using <code>std::vector</code> instead of <code>new[]</code> directly.  And you can use STL algorithms like <a href=\"http://en.cppreference.com/w/cpp/algorithm/copy_n\" rel=\"nofollow noreferrer\"><code>std::copy_n()</code></a> instead of manual input/output loops:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;limits&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\n// prototypes\nvector&lt;int&gt; generateAndFillArray();\nvoid displayArray(const vector&lt;int&gt; &amp;arr);\n\nint main()\n{\n    vector&lt;int&gt; arr = generateAndFillArray();\n    displayArray(arr);\n    return 0;\n}\n\n//Prompt the User for a number (1-10) then dynamically allocate an array of this size.\n//Prompt the user to fill out the array, with numbers (1-100) all numbers included (1 and 100 are allowed).\n//Return the array through the return statement to the main body.\n\nvector&lt;int&gt; generateAndFillArray()\n{\n    int size;\n    cout &lt;&lt; \"Enter a number (1-10) that will serve as the size of the array: \";\n    do\n    {\n        if (cin &gt;&gt; size)\n        {\n            if (size &gt;= 1 &amp;&amp; size &lt;= 10)\n                break;\n\n            cout &lt;&lt; \"Please enter a correct number between 1 and 10. \";\n        }\n        else\n        {\n            cin.clear();\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n            cout &lt;&lt; \"Please enter a valid number between 1 and 10. \";\n        }\n    }\n    while (true);\n\n    vector&lt;int&gt; arr;\n    arr.reserve(size);\n\n    cout &lt;&lt; \"enter a number for each subscript of the array \";\n\n    do\n    {\n        copy_n(istream_iterator&lt;int&gt;(cin), size, back_inserter(arr));\n        if (cin)\n            break;\n\n        arr.clear();\n        cin.clear();\n        cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n        cout &lt;&lt; \"enter valid numbers for each subscript of the array \";\n    }\n    while (true);\n\n    return arr;\n}\n\n//Display on one line, by itself, with a space following each number, surrounded by square\n//    brackets. example: [1 59 13 37 55]\nvoid displayArray(const vector&lt;int&gt; &amp;numbers)\n{\n    cout &lt;&lt; \"[\";\n    copy_n(numbers.begin(), numbers.size(), ostream_iterator&lt;int&gt;(cout, \" \"));\n    cout &lt;&lt; \"]\" &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 579, "user_id": 6169115, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5ad7944ff33c7114a8ddff00011cef96?s=128&d=identicon&r=PG&f=1", "display_name": "icestorm0806", "link": "https://stackoverflow.com/users/6169115/icestorm0806"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 49412911, "answer_count": 1, "score": -2, "last_activity_date": 1521654359, "creation_date": 1521644174, "last_edit_date": 1521652648, "question_id": 49409636, "link": "https://stackoverflow.com/questions/49409636/how-can-i-return-a-dynamically-allocated-array-and-the-size-of-the-array-then-pr", "title": "How can I return a dynamically allocated array and the size of the array then print it out through second function?", "body": "<p>I need to return a dynamically allocated array and the size of the array from a function then print it out through a second function.</p>\n\n<p>I am having trouble with \"const int *arr\" and how to initialization it.</p>\n\n<p>I added my code below. If there is anything else needed to better answer, please let me know.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n// prototypes\nint * generateAndFillArray(int &amp; size);\nvoid displayArray(const int *arr, int size);\n\nint main()\n{\n    int size;\n    const int arr;\n\n    * generateAndFillArray(size);\n    displayArray(&amp;arr, size);\n\n    return 0;\n}\n\n//Prompt the User for a number (1-10) then dynamically allocate an array of this size.\n//Prompt the user to fill out the array, with numbers (1-100) all numbers included (1 and 100 are allowed).\n//Return the array through the return statement to the main body and the size of the array through a reference parameter.\n\nint * generateAndFillArray(int &amp;size) {\n    cout &lt;&lt; \"Enter a number (1-10) that will serve as the size of the array: \";\n    cin &gt;&gt; size;\n    while (!(size &gt;= 1 &amp;&amp; size &lt;= 10))\n    {\n        cout &lt;&lt; \"Please enter a correct number between 1 and 10. \";\n        cin &gt;&gt; size;\n    }\n\n    int *arr;\n    arr = new int[size];\n    for (int i = 0; i &lt; size; i++)\n    {\n        cout &lt;&lt; \"enter a number for each subscript of the array \";\n        cin &gt;&gt; arr[i];\n        cout &lt;&lt; \"you entered \" &lt;&lt; arr[i] &lt;&lt; endl;\n    }\n\n    return &amp;size;\n}\n\n//Display on one line, by itself, with a space following each number, surrounded by square\n//    brackets. example: [1 59 13 37 55]\nvoid displayArray(const int *numbers, int size) {\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        cout &lt;&lt; *(numbers) &lt;&lt; \"  \";\n    }\n}\n</code></pre>\n\n<p>I am unable to change the prototypes. I am requesting assistance with a project for school.</p>\n\n<p>With that being said, this only covers about 10% of the project. I am not requesting anyone do my homework for me. Only looking for help with a small section.</p>\n"}, {"tags": ["c++", "sqlite", "openssl", "cppsqlite"], "comments": [{"owner": {"reputation": 190, "user_id": 3984892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e311ed4521dda03e9b04dfffb2349b?s=128&d=identicon&r=PG&f=1", "display_name": "zaw", "link": "https://stackoverflow.com/users/3984892/zaw"}, "edited": false, "score": 0, "creation_date": 1521648636, "post_id": 49409595, "comment_id": 85824336, "body": "&quot; the extensions needed to read and write an encrypted database file are licensed software. &quot; from the source: The code to implement this API is not available in the public release of SQLite. int sqlite3_key... Do you have the licensed extension?"}, {"owner": {"reputation": 630, "user_id": 277055, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5e33690e9ebe9ce2daf7e42781d6b0bb?s=128&d=identicon&r=PG", "display_name": "hugo411", "link": "https://stackoverflow.com/users/277055/hugo411"}, "reply_to_user": {"reputation": 190, "user_id": 3984892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e311ed4521dda03e9b04dfffb2349b?s=128&d=identicon&r=PG&f=1", "display_name": "zaw", "link": "https://stackoverflow.com/users/3984892/zaw"}, "edited": false, "score": 0, "creation_date": 1521654420, "post_id": 49409595, "comment_id": 85828242, "body": "No, is it SQLCipher? Because i was using an old version of sqlite3 amalgamation before which require only openSSL. Nothing else."}], "owner": {"reputation": 630, "user_id": 277055, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5e33690e9ebe9ce2daf7e42781d6b0bb?s=128&d=identicon&r=PG", "display_name": "hugo411", "link": "https://stackoverflow.com/users/277055/hugo411"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1521644739, "creation_date": 1521644070, "last_edit_date": 1521644739, "question_id": 49409595, "link": "https://stackoverflow.com/questions/49409595/sqlite3-c-with-cppsqlite3-wrapper-on-c-with-encrypted-database-on-windows", "title": "Sqlite3.c with cppsqlite3 wrapper on c++ with encrypted database on windows", "body": "<p>i am trying to compile a project using sqlite3 amalgamation on a c++ project with the help of CppSQLite3 wrapper. I added SQLITE_HAS_CODEC flag because i have an encrypted database. I added openSSL 1.0.2 include directory and the libeay32.lib. \nI tried compiling with Clang 5.0 and GCC 4.9 on windows x86 and this is the error on the <strong>linker</strong>:</p>\n\n<pre><code>error : undefined reference to 'sqlite3CodecGetKey'\nerror : undefined reference to 'sqlite3_rekey_v2'\nerror : undefined reference to 'sqlite3_key_v2'\nclang.exe : error : linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "class", "object"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521644209, "post_id": 49409587, "comment_id": 85820760, "body": "What do you mean by &quot;the integer is never created&quot;? Can you please elaborate? And please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> to show us."}, {"owner": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "edited": false, "score": 1, "creation_date": 1521644295, "post_id": 49409587, "comment_id": 85820821, "body": "where is the main you ran ? and <code>ptr = new Member*[sizeOfArrParticipants];</code>, an array of pointer ? really ? you should prefer using vector."}, {"owner": {"reputation": 278, "user_id": 5470770, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3348aa561631114656f1e7d0488bcac?s=128&d=identicon&r=PG&f=1", "display_name": "anderssinho", "link": "https://stackoverflow.com/users/5470770/anderssinho"}, "reply_to_user": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "edited": false, "score": 0, "creation_date": 1521644368, "post_id": 49409587, "comment_id": 85820883, "body": "@HatsuPointerKun I can&#39;t use a vector for this assignment. We have tu use an array of pointers.  I can put in the little main function also"}, {"owner": {"reputation": 278, "user_id": 5470770, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3348aa561631114656f1e7d0488bcac?s=128&d=identicon&r=PG&f=1", "display_name": "anderssinho", "link": "https://stackoverflow.com/users/5470770/anderssinho"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521645072, "post_id": 49409587, "comment_id": 85821413, "body": "@Someprogrammerdude when I check with the debugger after I created the array of pointer it says &quot;unable to read memory&quot; on the integer called memberNumber."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521645345, "post_id": 49409587, "comment_id": 85821634, "body": "BTW, you don&#39;t need the <code>this-&gt;</code> notation; access members directly."}, {"owner": {"reputation": 278, "user_id": 5470770, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3348aa561631114656f1e7d0488bcac?s=128&d=identicon&r=PG&f=1", "display_name": "anderssinho", "link": "https://stackoverflow.com/users/5470770/anderssinho"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1521645499, "post_id": 49409587, "comment_id": 85821773, "body": "@ThomasMatthews thought that was the convention?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1521645569, "post_id": 49409587, "comment_id": 85821846, "body": "@anderssinho it is, but in Java, not in C++."}, {"owner": {"reputation": 278, "user_id": 5470770, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3348aa561631114656f1e7d0488bcac?s=128&d=identicon&r=PG&f=1", "display_name": "anderssinho", "link": "https://stackoverflow.com/users/5470770/anderssinho"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1521645706, "post_id": 49409587, "comment_id": 85821958, "body": "@Quentin okay, but that&#39;s not the root of my problem"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1521645867, "post_id": 49409587, "comment_id": 85822111, "body": "You have the member variable <code>Tour::ptr</code>, but you never make it point anywhere. It is uninitialized and <i>indeterminate</i>. Dereferencing it (like you do in <code>addParticipant</code>) leads to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>."}, {"owner": {"reputation": 278, "user_id": 5470770, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3348aa561631114656f1e7d0488bcac?s=128&d=identicon&r=PG&f=1", "display_name": "anderssinho", "link": "https://stackoverflow.com/users/5470770/anderssinho"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521646134, "post_id": 49409587, "comment_id": 85822322, "body": "@Someprogrammerdude so when I do \tptr = new Member*[sizeOfArrParticipants]; inside addParticipants, I don&#39;t point it to that part of the memory you mean?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521646305, "post_id": 49409587, "comment_id": 85822468, "body": "But you don&#39;t do that in the code you show!"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1521646442, "post_id": 49409587, "comment_id": 85822560, "body": "<i>Also</i> you use <code>participants  - 1</code> as the index. This is a problem because when you call it the first time then <code>participants</code> is equal to zero, and you will use <code>-1</code> as the index. Which will be out of bounds."}, {"owner": {"reputation": 278, "user_id": 5470770, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3348aa561631114656f1e7d0488bcac?s=128&d=identicon&r=PG&f=1", "display_name": "anderssinho", "link": "https://stackoverflow.com/users/5470770/anderssinho"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521646512, "post_id": 49409587, "comment_id": 85822600, "body": "@Someprogrammerdude edited the code again.It should say that the index is 0 just for this test. And in the initiateMember I think I do the pointing?"}, {"owner": {"reputation": 278, "user_id": 5470770, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3348aa561631114656f1e7d0488bcac?s=128&d=identicon&r=PG&f=1", "display_name": "anderssinho", "link": "https://stackoverflow.com/users/5470770/anderssinho"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521646729, "post_id": 49409587, "comment_id": 85822774, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/167273/discussion-between-anderssinho-and-some-programmer-dude\">continue this discussion in chat</a>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1521648254, "post_id": 49409587, "comment_id": 85824054, "body": "Okay now you allocate some memory for <code>ptr</code>, but e.g. <code>ptr[0]</code> is still not a valid pointer. It doesn&#39;t point anywhere specific. It&#39;s still <i>indeterminate</i>. Perhaps you should have an array of <i>objects</i> instead of an array of pointers to objects? I.e. <code>Member* ptr;</code>?"}, {"owner": {"reputation": 278, "user_id": 5470770, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3348aa561631114656f1e7d0488bcac?s=128&d=identicon&r=PG&f=1", "display_name": "anderssinho", "link": "https://stackoverflow.com/users/5470770/anderssinho"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521648851, "post_id": 49409587, "comment_id": 85824498, "body": "@Someprogrammerdude I have now reworked the initiateMember and it looks like this:  Member *memberArr = new Member[5]; ptr = &amp;memberArr; ptr[0]-&gt;setName(&quot;hej&quot;);  And now I can assign values to the variables with the pointer. But I think there most be a more neat way to do this?"}], "owner": {"reputation": 278, "user_id": 5470770, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e3348aa561631114656f1e7d0488bcac?s=128&d=identicon&r=PG&f=1", "display_name": "anderssinho", "link": "https://stackoverflow.com/users/5470770/anderssinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521646554, "creation_date": 1521644046, "last_edit_date": 1521646554, "question_id": 49409587, "link": "https://stackoverflow.com/questions/49409587/when-creating-a-object-of-custom-type-im-losing-a-field-variable", "title": "When creating a object of custom type I&#39;m losing a field variable", "body": "<p>I'm currently creating a program in which I'm trying to create a pointer to a class called Member, from inside a class called Tour.</p>\n\n<p>For the creation of the pointer I do like this:</p>\n\n<pre><code>    void Tour::initiateMember()\n{\n    this-&gt;sizeOfArrParticipants = 5;\n    ptr = new Member*[sizeOfArrParticipants];\n\n}\n</code></pre>\n\n<p>But when I later try to use the ptr varible I noticed that it hasn't created all the fields correctly. The member class has three field, two strings and a int, and the two strings are created but the integer is never created instead when you debugg it says that \"it cannot ready memory\".</p>\n\n<p>Here is the some short example of the code:</p>\n\n<pre><code>class Member\n{\npublic:\n    Member();\n    Member(string name, int memberNr, string phoneNr);\n    ~Member();\n\n    void setName(string name);\n    void setPhoneNr(string phoneNr);\n    void setMemberNr(int memberNr);\n\nprivate:\n    string name;\n    string phoneNr;\n    int memberNumber;\n};\n\n\nMember::Member()\n{\n    this-&gt;name = \"Joe Doe\";\n    this-&gt;memberNumber = 0;\n    this-&gt;phoneNr = \"0\";\n}\n\nMember::Member(string name, int memberNr, string phoneNr)\n{\n    this-&gt;name = name;\n    this-&gt;memberNumber = memberNr;\n    this-&gt;phoneNr = phoneNr;\n}\n\nMember::~Member()\n{\n}\n\nvoid Member::setName(string name)\n{\n    this-&gt;name = name;\n}\n\nvoid Member::setPhoneNr(string phoneNr)\n{\n    this-&gt;phoneNr = phoneNr;\n}\n\nvoid Member::setMemberNr(int memberNr)\n{\n    this-&gt;memberNumber = memberNr;\n}\n\nstring Member::getName() const\n{\n    return this-&gt;name;\n}\n\nstring Member::getPhoneNr() const\n{\n    return this-&gt;phoneNr;\n}\n\nint Member::getMemberNr() const\n{\n    return this-&gt;memberNumber;\n}\n\n\nclass Tour\n{\npublic:\n    Tour();\n    Tour(int date, string name, int eduLevel, int typeOfTour, int participants);\n    ~Tour();\n\n    void initiateMember();\n    void addParticipant(int memberNr, string name, string phoneNr);\n\nprivate:\n    int date;\n    int participants;\n    int typeOfTour;\n    Member **ptr;\n};\n\n\n\nTour::Tour()\n{\n    this-&gt;date = 0;\n    this-&gt;typeOfTour = 0;\n    this-&gt;participants = 0;\n    this-&gt;initiateMember();\n}\n\nTour::Tour(int date, string name, int eduLevel, const int typeOfTour, int participants)\n{\n    this-&gt;date = date;\n    this-&gt;typeOfTour = 0;\n    this-&gt;participants = participants;\n    this-&gt;initiateMember();\n\n}\n\n\nTour::~Tour()\n{\n\n}\n\nvoid Tour::initiateMember()\n{\n    this-&gt;sizeOfArrParticipants = 5;\n    ptr = new Member*[sizeOfArrParticipants];\n    Member ptr2;\n    ptr2 = Member::Member();\n    Member obj1;\n    obj1.setMemberNr(1);\n\n}\n\nvoid Tour::addParticipant(int memberNr, string name, string phoneNr)\n{\n    ptr[0]-&gt;setMemberNr(memberNr);\n    ptr[0]-&gt;setName(name);\n    ptr[0]-&gt;setPhoneNr(phoneNr);\n\n}\n\nint main()\n{\nTour tourB();\ntourA.addParticipant(1111, \"Stina Larsson\", \"011-111111\");\nreturn 0;\n}\n</code></pre>\n\n<p>Now when I have been trying more noticed that it works if I use the default constructor to create a object of the Member class.</p>\n\n<pre><code>Member ptr2;\nptr2 = Member::Member();\n</code></pre>\n\n<p>Then all fields are created and accessible, why can't I do this with the array of pointers? </p>\n"}, {"tags": ["c++", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 3, "creation_date": 1521643848, "post_id": 49409457, "comment_id": 85820459, "body": "You could not use macros - that would resolve the problem; or put all the code before the include of the macros that don&#39;t want them."}, {"owner": {"reputation": 1069, "user_id": 5909613, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed74c29cc1502b7f39ede71993587291?s=128&d=identicon&r=PG&f=1", "display_name": "Jerome Reinl&#228;nder", "link": "https://stackoverflow.com/users/5909613/jerome-reinl%c3%a4nder"}, "edited": false, "score": 1, "creation_date": 1521643906, "post_id": 49409457, "comment_id": 85820507, "body": "Sadly, there is no way to undef several macros at once."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1521644084, "post_id": 49409457, "comment_id": 85820640, "body": "Why have you tagged this C? I would not use macros in the first place? C++ has better ways of doing things"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1521644106, "post_id": 49409457, "comment_id": 85820665, "body": "So you define macros in C++ (some will answer &quot;don&#39;t&quot; right here). You define them in a header, which apparently gets included all over the place. But most includers do not want a significant part of the header. Only a (small) subset of includers need the macros. Why don&#39;t you have two headers, one with one without macros, or one without and one only with the macros?"}, {"owner": {"reputation": 3255, "user_id": 249696, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/06Chx.jpg?s=128&g=1", "display_name": "Yoric", "link": "https://stackoverflow.com/users/249696/yoric"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1521646546, "post_id": 49409457, "comment_id": 85822627, "body": "@UKMonkey Unfortunately, in this case, I could do neither."}, {"owner": {"reputation": 3255, "user_id": 249696, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/06Chx.jpg?s=128&g=1", "display_name": "Yoric", "link": "https://stackoverflow.com/users/249696/yoric"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1521646633, "post_id": 49409457, "comment_id": 85822694, "body": "@Yunnosch Because I&#39;m writing templates, which means that I need to put the implementation in the header, along with the macros."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1521647533, "post_id": 49409544, "comment_id": 85823475, "body": "2 places actually <code>&lt;MyMacros.h&gt;</code> and <code>&lt;undefMacros.h&gt;</code>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1521647940, "post_id": 49409544, "comment_id": 85823794, "body": "@Jarod42 True.  Updated to clarify."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 3255, "user_id": 249696, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/06Chx.jpg?s=128&g=1", "display_name": "Yoric", "link": "https://stackoverflow.com/users/249696/yoric"}, "edited": false, "score": 0, "creation_date": 1521648184, "post_id": 49409544, "comment_id": 85823990, "body": "@Yoric Glad I could help.  Don&#39;t forget to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept</a> if you found this useful."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1521647919, "last_edit_date": 1521647919, "creation_date": 1521643938, "answer_id": 49409544, "question_id": 49409457, "link": "https://stackoverflow.com/questions/49409457/scoping-c-macros/49409544#49409544", "title": "Scoping C++ macros?", "body": "<p>You can create a separate include file that undefines the macros in question and include that in your source files.</p>\n\n<p>For example, in undefMacros.h:</p>\n\n<pre><code>#undef MACRO_1\n#undef MACRO_2\n// ...\n#undef MACRO_N\n</code></pre>\n\n<p>Then in your source files:</p>\n\n<pre><code>#include &lt;MyMacros.h&gt; // defines MACRO_1, MACRO_2, ... MACRO_N\n\n// bla\n// bla\n\n#include &lt;undefMacros.h&gt;\n</code></pre>\n\n<p>Then you only need to maintain the <code>#undef</code> statements in one place, in addition to where the macros are originally defined.</p>\n"}, {"comments": [{"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "reply_to_user": {"reputation": 3255, "user_id": 249696, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/06Chx.jpg?s=128&g=1", "display_name": "Yoric", "link": "https://stackoverflow.com/users/249696/yoric"}, "edited": false, "score": 0, "creation_date": 1521761611, "post_id": 49411293, "comment_id": 85882177, "body": "@Yoric You could perhaps call the file <code>SetOrClearMacros.h</code> and/or call the &quot;controlling&quot; macro something like <code>MACROS_HAVE_BEEN_DEFINED</code>... yes, it is a little confusing, and if your set of macros is/were reasonably static, then dbush&#39;s answer is better, as it uses better-named (but separate) files. If the list of macros <i>is</i> likely to change, then (to me) the advantage of having it all in one file begins to outweigh the confusion."}], "tags": [], "owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "is_accepted": false, "score": 1, "last_activity_date": 1521648474, "creation_date": 1521648474, "answer_id": 49411293, "question_id": 49409457, "link": "https://stackoverflow.com/questions/49409457/scoping-c-macros/49411293#49411293", "title": "Scoping C++ macros?", "body": "<p>A variant on <a href=\"https://stackoverflow.com/a/49409544/2096401\">dbush's answer</a> would be to combine the definitions and clearing of the macros in one file:</p>\n\n<p><strong><code>MyMacros.h</code></strong></p>\n\n<pre><code>#ifndef MACRO_1\n#   define MACRO_1 ...\n#   define MACRO_2 ...\n...\n#   define MACRO_N ...\n//! Remember to add #undef if new macros are added\n#else\n#   undef MACRO_1\n#   undef MACRO_2\n...\n#   undef MACRO_N\n#endif\n</code></pre>\n\n<p>and then simply include this file at the top and bottom of where you use it:</p>\n\n<pre><code>#include \"MyMacros.h\"\n...\n...\n...\n#include \"MyMacros.h\"\n</code></pre>\n\n<p>Keeping everything in one file should make it easier to remember to add an <code>#undef</code> if you add a new macro.</p>\n"}], "owner": {"reputation": 3255, "user_id": 249696, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/06Chx.jpg?s=128&g=1", "display_name": "Yoric", "link": "https://stackoverflow.com/users/249696/yoric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1521648474, "creation_date": 1521643713, "last_edit_date": 1521644530, "question_id": 49409457, "link": "https://stackoverflow.com/questions/49409457/scoping-c-macros", "title": "Scoping C++ macros?", "body": "<p>I am working on a large C++ project. I have a bunch of macros that are used in a subset of the project, but I don't want to export them everywhere, to avoid contaminating unrelated code.</p>\n\n<p>Right now, many of my files look like</p>\n\n<pre><code>#include &lt;MyMacros.h&gt; // defines MACRO_1, MACRO_2, ... MACRO_N\n\n// bla\n// bla\n\n#undef MACRO_1\n#undef MACRO_2\n// ...\n#undef MACRO_N\n</code></pre>\n\n<p>Of course, this is going to break the day I introduce <code>MACRO_N+1</code>.</p>\n\n<p>Is there a better way to do somehow undefine all these macros at once?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 6, "creation_date": 1521643470, "post_id": 49409345, "comment_id": 85820124, "body": "So, what&#39;s stopping you from writing said macro? Note: why macro instead of a function?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1521643549, "post_id": 49409345, "comment_id": 85820199, "body": "My general advice is: Don&#39;t do that. Avoid macros as much as you can (and then avoid them some more). However, if that&#39;s not possible then you have to tell us what you have tried, and how id worked (or not worked). And if you know how to create single-argument macros, then it should not be hard to extrapolate and at least <i>guess</i> how a two-argument macro should be."}, {"owner": {"reputation": 415, "user_id": 7305358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/909955eb7835150dae7bfbfa4e587e23?s=128&d=identicon&r=PG&f=1", "display_name": "Zinki", "link": "https://stackoverflow.com/users/7305358/zinki"}, "edited": false, "score": 0, "creation_date": 1521643552, "post_id": 49409345, "comment_id": 85820205, "body": "what&#39;s your problem? You clearly already know the Syntax for multi-argument Macros, what problem did you run into?"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 1, "creation_date": 1521643644, "post_id": 49409345, "comment_id": 85820282, "body": "Don&#39;t do that. Just <a href=\"https://stackoverflow.com/a/29326784/1362568\">write C++</a>"}, {"owner": {"reputation": 1, "user_id": 9529239, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UQOWq04xm08/AAAAAAAAAAI/AAAAAAAAAHc/_4mQZsyXba8/photo.jpg?sz=128", "display_name": "Anamika Kumari", "link": "https://stackoverflow.com/users/9529239/anamika-kumari"}, "edited": false, "score": 0, "creation_date": 1521643690, "post_id": 49409345, "comment_id": 85820325, "body": "I wrote the macro function which is #define debug_print(x,y)(cout&lt;&lt;&quot;x is::&lt;&lt;x&lt;&lt;&quot; &quot;&lt;&lt;&quot;y is::&lt;&lt;Y&quot;);  and called that function in my code as debug_print(a,b).   but it is not working"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1521643995, "post_id": 49409345, "comment_id": 85820580, "body": "Can you put all that in your question and put the error message in as well please?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1521644014, "post_id": 49409345, "comment_id": 85820591, "body": "Take care where you put your quotes. And please edit your question to have a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> of the non-working code. Then while editing your question, please copy-paste the full and complete output of the compiler into the body of the question, if there is any of course. And <i>tell</i> us <i>how</i> &quot;it is not working&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1521644296, "post_id": 49409603, "comment_id": 85820824, "body": "<i>&quot;in the <code>&lt;your code here&gt;</code> section you can then use <code>__VA_ARGS__</code>&quot;</i> - A bit of a cop out on your part if I may say so. It&#39;s not at all obvious how to complete <code>&lt;your code here&gt;</code>, especially to a novice."}, {"owner": {"reputation": 3936, "user_id": 7571171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zfVoB.png?s=128&g=1", "display_name": "Thomas Flinkow", "link": "https://stackoverflow.com/users/7571171/thomas-flinkow"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1521644479, "post_id": 49409603, "comment_id": 85820976, "body": "@StoryTeller you are very right on that point; it&#39;s just that 1. I haven&#39;t really worked with variadic arguments myself, so instead of putting potentially wrong code, I just linked to a tutorial and 2. the <code>&lt;your code here&gt;</code> part depends heavily on what the OP wants to do, especially because it seems like they only want 2 parameters, so variadic arguments are overkill anyways. Thank you for your feedback :)"}, {"owner": {"reputation": 1, "user_id": 9529239, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UQOWq04xm08/AAAAAAAAAAI/AAAAAAAAAHc/_4mQZsyXba8/photo.jpg?sz=128", "display_name": "Anamika Kumari", "link": "https://stackoverflow.com/users/9529239/anamika-kumari"}, "edited": false, "score": 0, "creation_date": 1521644747, "post_id": 49409603, "comment_id": 85821179, "body": "Thanks for the solution. It is working"}, {"owner": {"reputation": 3936, "user_id": 7571171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zfVoB.png?s=128&g=1", "display_name": "Thomas Flinkow", "link": "https://stackoverflow.com/users/7571171/thomas-flinkow"}, "reply_to_user": {"reputation": 1, "user_id": 9529239, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UQOWq04xm08/AAAAAAAAAAI/AAAAAAAAAHc/_4mQZsyXba8/photo.jpg?sz=128", "display_name": "Anamika Kumari", "link": "https://stackoverflow.com/users/9529239/anamika-kumari"}, "edited": false, "score": 0, "creation_date": 1521644791, "post_id": 49409603, "comment_id": 85821211, "body": "@AnamikaKumari glad to hear that it&#39;s working for you!"}], "tags": [], "owner": {"reputation": 3936, "user_id": 7571171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zfVoB.png?s=128&g=1", "display_name": "Thomas Flinkow", "link": "https://stackoverflow.com/users/7571171/thomas-flinkow"}, "is_accepted": false, "score": 0, "last_activity_date": 1521644337, "last_edit_date": 1521644337, "creation_date": 1521644095, "answer_id": 49409603, "question_id": 49409345, "link": "https://stackoverflow.com/questions/49409345/how-to-write-a-macro-function-which-has-multiple-arguments/49409603#49409603", "title": "how to write a macro function which has multiple arguments", "body": "<p>What you want to look into are <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html\" rel=\"nofollow noreferrer\"><strong>variadic macros</strong></a> if you want a <strong>variadic number of parameters</strong>. Using those, you can define a macro like this</p>\n\n<pre><code>#define debug_print(...) &lt;your code here&gt;\n</code></pre>\n\n<p>in the <code>&lt;your code here&gt;</code> section you can then use <a href=\"https://www.cprogramming.com/tutorial/c/lesson17.html\" rel=\"nofollow noreferrer\"><code>__VA_ARGS__</code></a>.</p>\n\n<hr>\n\n<p>If you only want to use <strong>two parameters</strong>, you can define the macro like this:</p>\n\n<pre><code>#define debug_print(x, y) (std::cout &lt;&lt; \"value of x is::\" &lt;&lt; x &lt;&lt; \" \" &lt;&lt; \"value of y is:::\" &lt;&lt; y &lt;&lt; std::endl)\n</code></pre>\n\n<p>and use it like</p>\n\n<pre><code>int x = 5;\nint y = 9;\ndebug_print(x, y);\n</code></pre>\n\n<hr>\n\n<p>As the others have already said, please <em>do not use this macro</em> unless you absolutely must! E.g. you don't see that <code>debug_print</code> needs <code>iostream</code> to work, and you don't see which types can be passed into it.</p>\n"}], "owner": {"reputation": 1, "user_id": 9529239, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UQOWq04xm08/AAAAAAAAAAI/AAAAAAAAAHc/_4mQZsyXba8/photo.jpg?sz=128", "display_name": "Anamika Kumari", "link": "https://stackoverflow.com/users/9529239/anamika-kumari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "closed_date": 1521646118, "answer_count": 1, "score": -5, "last_activity_date": 1521644337, "creation_date": 1521643433, "question_id": 49409345, "link": "https://stackoverflow.com/questions/49409345/how-to-write-a-macro-function-which-has-multiple-arguments", "closed_reason": "Duplicate", "title": "how to write a macro function which has multiple arguments", "body": "<p>I have to write a macro function which takes multiple argument and print them.\ne.g,</p>\n\n<pre><code>int main(){\n    int x,y;\n    x=5;\n    y=9;\n    cout&lt;&lt;\"value of x is::\"&lt;&lt;x&lt;&lt;\" \"&lt;&lt;\"value of y is:::\"&lt;&lt;y&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>I want to write a macro which takes x and y as argument and print same as above.\nlike <em>debug_print(x,y).</em></p>\n"}, {"tags": ["c++", "class", "pointers", "vector"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 3, "creation_date": 1521643365, "post_id": 49409280, "comment_id": 85820039, "body": "Please pare your code down to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also describe the exact errors you are getting."}, {"owner": {"reputation": 29, "user_id": 9098443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WE3DBebZcxY/AAAAAAAAAAI/AAAAAAAABlY/-aEZUDLV82Y/photo.jpg?sz=128", "display_name": "\u041d\u0435\u0434\u044f\u043b\u043a\u043e \u0410\u043d\u0433\u0435\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/9098443/%d0%9d%d0%b5%d0%b4%d1%8f%d0%bb%d0%ba%d0%be-%d0%90%d0%bd%d0%b3%d0%b5%d0%bb%d0%be%d0%b2"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1521643706, "post_id": 49409280, "comment_id": 85820334, "body": "Im not getting errors (for now), i just dont know how to store user input into vector"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1521643873, "post_id": 49409280, "comment_id": 85820476, "body": "(btw hardest name to @). allocate a <code>Person*</code> and then use <code>vector::push_back</code>? This is a very basic operation, that should have been covered in your class/book/tutorial"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1521645249, "post_id": 49409280, "comment_id": 85821564, "body": "Why is it that all these assignment questions people post about have so terrible design? A <code>std::vector</code> of pointers? Really? Sorry for the rant, but tell your teacher he should be ashamed of himself."}, {"owner": {"reputation": 29, "user_id": 9098443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WE3DBebZcxY/AAAAAAAAAAI/AAAAAAAABlY/-aEZUDLV82Y/photo.jpg?sz=128", "display_name": "\u041d\u0435\u0434\u044f\u043b\u043a\u043e \u0410\u043d\u0433\u0435\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/9098443/%d0%9d%d0%b5%d0%b4%d1%8f%d0%bb%d0%ba%d0%be-%d0%90%d0%bd%d0%b3%d0%b5%d0%bb%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1521646393, "post_id": 49409280, "comment_id": 85822527, "body": "I know right, I often skip classes and study at home, but i still have to do these tasks.."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1521649659, "post_id": 49409280, "comment_id": 85825108, "body": "Do you know, given a class, how to make an variable that is an object of that class? I.e. <code>Person aPerson &#47;*things here*&#47;;</code>?"}, {"owner": {"reputation": 29, "user_id": 9098443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WE3DBebZcxY/AAAAAAAAAAI/AAAAAAAABlY/-aEZUDLV82Y/photo.jpg?sz=128", "display_name": "\u041d\u0435\u0434\u044f\u043b\u043a\u043e \u0410\u043d\u0433\u0435\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/9098443/%d0%9d%d0%b5%d0%b4%d1%8f%d0%bb%d0%ba%d0%be-%d0%90%d0%bd%d0%b3%d0%b5%d0%bb%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1521655601, "post_id": 49409280, "comment_id": 85828923, "body": "Yes, but what else"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1521678411, "post_id": 49409280, "comment_id": 85838931, "body": "Taking input into a temporary object and then pushing it into a vector?"}], "answers": [{"tags": [], "owner": {"reputation": 421, "user_id": 5016491, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205704778432592/picture?type=large", "display_name": "Maaz Bin Musa", "link": "https://stackoverflow.com/users/5016491/maaz-bin-musa"}, "is_accepted": false, "score": 0, "last_activity_date": 1522305771, "creation_date": 1522305771, "answer_id": 49549595, "question_id": 49409280, "link": "https://stackoverflow.com/questions/49409280/how-to-store-user-input-into-vectors-with-pointers/49549595#49549595", "title": "How to store user input into vectors with pointers", "body": "<p>Firstly create setters for each element as well in your classes.</p>\n\n<p>Secondly your while loop logic is flawed. Do something like this</p>\n\n<pre><code>char continue_or_not c = 'y';\n\nwhile(c == 'y')\n{\n  \\\\Take input by cin of each element\n  \\\\make a temp person pointer\n  \\\\make a new person and assign it all the values you input\n  \\\\assign that person to that pointer\n  \\\\copy that pointer to the vector (you will need a copy constructor for person as well because it has a pointer in it)\n  \\\\take input in 'c' again and each iterating\n\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9098443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WE3DBebZcxY/AAAAAAAAAAI/AAAAAAAABlY/-aEZUDLV82Y/photo.jpg?sz=128", "display_name": "\u041d\u0435\u0434\u044f\u043b\u043a\u043e \u0410\u043d\u0433\u0435\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/9098443/%d0%9d%d0%b5%d0%b4%d1%8f%d0%bb%d0%ba%d0%be-%d0%90%d0%bd%d0%b3%d0%b5%d0%bb%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522305771, "creation_date": 1521643265, "question_id": 49409280, "link": "https://stackoverflow.com/questions/49409280/how-to-store-user-input-into-vectors-with-pointers", "title": "How to store user input into vectors with pointers", "body": "<p>I'm trying to solve this task whole day now, but I just can't and need some help.\nThe task is:\nWrite a program that requires the user to enter random number of people. For each person enter their name and age, and for the apartment - number of rooms and the area of apartment. Print on the screen the names of people with two-room apartments and the area of apartment.</p>\n\n<p>Note: Each person's apartment should be a pointer to an object in a Class Apartment  in the Person class. The people entered by the console should be stored in a Vector with pointers to objects from class Person.</p>\n\n<p>I'm confused with pointers and vectors.\nHe's my code so far. I know it's messy and bad..</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nclass Apartment {\nprivate:\n     int nRooms; // - number of rooms\n    double q; // - area of apartment\n\npublic:\n    Apartment(int nr, double qq)\n    {nRooms = nr; q = qq;}\n    int get_nRooms() { return nRooms; }\n    double get_q() { return q; }\n};\n\nclass Person{\nprivate:\n    string name;\n    int age;\n    Apartment* apartment;\n\npublic:\n    Person(string n, int a, Apartment* ap)\n    {name = n; age = a; apartment = ap;}\n\n    string getName(){return name;}\n    int getAge(){return age;}\n    Apartment* setApartment(Apartment *);\n    Apartment* getApartment(){return apartment;}\n};\n\nint main() {\n    vector&lt;Person*&gt; ps;\n    string n; // - person's name\n    int age, nr; // nr - number of rooms\n    double q; // area of apartment\n\nwhile (cin &gt;&gt; n &gt;&gt; age &gt;&gt; nr &gt;&gt; q){\n    if (nr == 2) {\n        cout &lt;&lt; \"People with 2 room apartments:\" &lt;&lt; n &lt;&lt; \" \" &lt;&lt; endl;\n        cout &lt;&lt; \"And their quadrature: \" &lt;&lt; q &lt;&lt; endl;\n        } \n\n}\n\nsystem(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1521643204, "post_id": 49409140, "comment_id": 85819924, "body": "Did you use one text block containing a json data file and code from two different languages? Also you don&#39;t &quot;convert&quot; from a data file to a programming language, you write code in the language to read the data file. (or in the case of json, use established libraries, see documentation)"}], "answers": [{"tags": [], "owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1521644607, "creation_date": 1521644607, "answer_id": 49409811, "question_id": 49409140, "link": "https://stackoverflow.com/questions/49409140/is-there-any-way-to-convert-json-to-model-easier-in-c/49409811#49409811", "title": "Is there any way to convert JSON to model easier in C++?", "body": "<p>I've had great success with the <a href=\"https://github.com/nlohmann/json#arbitrary-types-conversions\" rel=\"nofollow noreferrer\">Nlohmann Json</a> library, which allows you to define a single set of serialization and deserialization functions, and then freely convert from your chosen structure to json and back. </p>\n"}], "owner": {"reputation": 257, "user_id": 8520495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03c460f919f329a6d08614b0e589e8b4?s=128&d=identicon&r=PG&f=1", "display_name": "0x11901", "link": "https://stackoverflow.com/users/8520495/0x11901"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521644607, "creation_date": 1521642907, "question_id": 49409140, "link": "https://stackoverflow.com/questions/49409140/is-there-any-way-to-convert-json-to-model-easier-in-c", "title": "Is there any way to convert JSON to model easier in C++?", "body": "<p>I have a JSON string that I need to map into a Model in C++. My current practice is define data type of the variable and get the value of JSON via key then assign to model one by one. Here is the code\uff1a</p>\n\n<pre><code>auto code = BaseModel::intValue(data, \"code\");\n\nint BaseModel::intValue( const std::unordered_map&lt;std::string, Value&gt;&amp; value, const std::string&amp; key )\n{\n    return (value.find( key ) != value.end() &amp;&amp; BaseModel::isBasicType(value.at(key))) ? value.at(key).asInt() : 0;\n}\n</code></pre>\n\n<p>Is there any easy way to convert JSON to model? Maybe I just need define a header file with the model\u2018s data type, then it can help me convert JSON to model object.Instead of creating a model object, assign value to the model object from JSON one by one. I know there is a way in Objective-C\uff1a</p>\n\n<pre><code>// JSON:\n{\n    \"uid\":123456,\n    \"name\":\"Harry\",\n    \"created\":\"1965-07-31T00:00:00+0000\"\n}\n\n// Model:\n@interface User : NSObject\n@property UInt64 uid;\n@property NSString *name;\n@property NSDate *created;\n@end\n@implementation User\n@end\n\n\n// Convert json to model:\nUser *user = [User yy_modelWithJSON:json];\n\n// Convert model to json:\nNSDictionary *json = [user yy_modelToJSONObject];\n</code></pre>\n"}, {"tags": ["c++", "windows", "boost", "lua"], "answers": [{"tags": [], "owner": {"reputation": 492, "user_id": 5248907, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1e8033de32c3fb5fbd562edbb5711a03?s=128&d=identicon&r=PG&f=1", "display_name": "pandaman1234", "link": "https://stackoverflow.com/users/5248907/pandaman1234"}, "is_accepted": true, "score": 0, "last_activity_date": 1530302083, "last_edit_date": 1530302083, "creation_date": 1523051554, "answer_id": 49701449, "question_id": 49409087, "link": "https://stackoverflow.com/questions/49409087/does-lua-sethook-trigger-even-in-registered-c-functions/49701449#49701449", "title": "Does lua_sethook trigger even in registered C functions?", "body": "<p>To answer the question in the title: <strong>No</strong>, the lua_sethook doesn't trigger in registered C functions that can be called from the Lua side.</p>\n\n<p>Also, to save some time for any people that might have the same idea that I did, I investigated a bit more about what kind of mechanism could be used to essentially stop the execution of a running C/C++ thread, save the context (memory, variables, etc.) go execute some custom code/thread termination condition monitoring piece of code (executed within the same thread) and then go back to the saved context or return to the lua script with a <code>lua_error</code> call to unwind the call stack and release resources properly. I tested all of these tools/mechanism and none could solve the issue to have a cooperative thread termination mechanism</p>\n\n<ul>\n<li><code>TerminateThread</code> from the main thread to kill the lua/worker thread. Avoid at all cost, since it leaves the process' memory in an undefined state, doesn't release any resource, sometimes generate memory access violation</li>\n<li><code>LibEvent</code> which can execute signal handlers within the same thread. For some reason when I tried it with example code it simply wasn't being called and didn't stop the thread execution</li>\n<li><code>boost::asio</code>'s deadline timers which are async timers that can execute some custom routine in between the triggers. The worker's routine must be placed in the timers handlers code and won't stop a <code>while(true)</code> to execute for instance in the timer's routine.</li>\n<li>Windows' API <code>SetTimer</code> function  will create another thread to handle the signals, which just moves the problem (cannot exit the lua thread from the newly created thread)</li>\n<li>Interrupt signal handlers (in the particular case of Windows the <code>SIGTERM</code> signal is unhandled so I thought maybe I could use some custom routine with it): They can't be used because a <code>lua_error</code> call essentially comes down a <code>longjmp</code> which is not recommended by the MSDN documentation on interrupt signal handlers: \n\n<blockquote>\n  <p>Do not use longjmp unless the interrupt is caused by a floating-point exception (that is, sig is SIGFPE). In this case, first reinitialize the floating-point package by using a call to _fpreset. </p>\n</blockquote></li>\n</ul>\n\n<p>So once you're in a registered C++ function called from the Lua side you can't really get out of it forcefully without consequences.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p><strong>It was possible for me to get out of the thread forcefully</strong>. In my case, I used <code>boost::thread</code> and called the <code>interrupt</code> function from the main thread. By putting a try/catch block around the <code>lua_pcall</code> instruction with a <code>boost::thread_interrupted</code> exception handler, I was able to safely call <code>lua_error</code> from C++, unwind the callstack properly and end the lua thread in a semi-cooperative way.</p>\n"}], "owner": {"reputation": 492, "user_id": 5248907, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1e8033de32c3fb5fbd562edbb5711a03?s=128&d=identicon&r=PG&f=1", "display_name": "pandaman1234", "link": "https://stackoverflow.com/users/5248907/pandaman1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 49701449, "answer_count": 1, "score": 1, "last_activity_date": 1530302083, "creation_date": 1521642767, "last_edit_date": 1521754230, "question_id": 49409087, "link": "https://stackoverflow.com/questions/49409087/does-lua-sethook-trigger-even-in-registered-c-functions", "title": "Does lua_sethook trigger even in registered C functions?", "body": "<p>Let's say I created a <code>boost::thread</code> that eventually calls <code>lua_pcall</code> which is blocking the thread until the end of the return of the script. I would like to use <code>lua_sethook</code> to monitor an escape condition and probably set a <code>boost::this_thread::interrupt_point()</code>, but does it also trigger during a call to a registered C function that the lua script calls? </p>\n\n<p>The documentation specifies that the hook could be called after/before each instruction (or after each <em>n</em> instructions), but I think the C function call is compiled down to a <code>CALL</code> bytecode instruction. Therefore the hook would only be called when I return from the C function. </p>\n\n<p>Is there anyway to have a <em>cooperative</em> thread termination in this case? I would like to avoid <code>TerminateThread</code> from the windows API. Everyone's saying to not use it.</p>\n\n<p><strong>EDIT:</strong> After testing it locally, I can answer my first question </p>\n\n<blockquote>\n  <p>Does lua_sethook trigger even in registered C functions?</p>\n</blockquote>\n\n<p>As I thought, no. Now, how can someone use cooperative thread termination in this case?</p>\n"}]