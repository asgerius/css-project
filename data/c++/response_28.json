[{"tags": ["c++"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1437609333, "post_id": 31575949, "comment_id": 51106598, "body": "Please post an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 0, "creation_date": 1437609507, "post_id": 31575949, "comment_id": 51106641, "body": "Looks pretty close to a MCVE to me."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 1, "creation_date": 1437609793, "post_id": 31575949, "comment_id": 51106693, "body": "@marsh What? 144 loc to demonstrate a wrong order of declaration is far from minimal. <a href=\"http://coliru.stacked-crooked.com/a/e05d2fa9481a9e60\" rel=\"nofollow noreferrer\">This</a> would have been a minimal example for his issue."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1437609795, "post_id": 31575949, "comment_id": 51106694, "body": "There are many other errors that pop up once this one is fixed."}, {"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 0, "creation_date": 1437611435, "post_id": 31575949, "comment_id": 51107101, "body": "There is 1 more error, which I posted the answer to."}], "answers": [{"tags": [], "owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "is_accepted": true, "score": 2, "last_activity_date": 1437611419, "last_edit_date": 1437611419, "creation_date": 1437609336, "answer_id": 31575968, "question_id": 31575949, "link": "https://stackoverflow.com/questions/31575949/error-c3861-identifier-not-found/31575968#31575968", "title": "error C3861: identifier not found", "body": "<p>You need to move calc_grade above grade so that it knows it exists. Or declare it above like this.</p>\n\n<pre><code>double calc_grade(double midterm, double final, std::vector&lt;double&gt;&amp; homework);\n</code></pre>\n\n<p>Your grade method is marked const, so it may not change your class. But you are calling calc_grade which does not take a const vector therefor it could change the class member you are handing it. You can make it take a const vector to solve this. I would make that method const as well to keep things consistent. </p>\n\n<p>One possible fix: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iomanip&gt;\n\n//////////////////////////////////////////////////////////\n//////////////////////////CORE CLASS//////////////////////\n//////////////////////////////////////////////////////////\nclass Core {\npublic:\n    Core() : midterm(0), final(0) { }\n    Core(std::istream&amp; is) { read(is); }\n\n    std::string name() const;\n\n    virtual std::istream&amp; read(std::istream&amp;);\n    virtual double grade() const;\nprotected:\n    std::istream&amp; read_common(std::istream&amp;);\n    std::istream&amp; read_hw(std::istream&amp;, std::vector&lt;double&gt;&amp;);\n    double midterm, final;\n    std::vector&lt;double&gt; homework;\nprivate:    \n    std::string n;  \n};\n\nstd::string Core::name() const { return n; }\n\n\ndouble calc_grade(double midterm, double final, const std::vector&lt;double&gt;&amp; homework)\n{\n    double result = 0.0;\n    for (std::vector&lt;double&gt;::const_iterator i = homework.begin(); i != homework.end(); ++i)\n        result += *i;\n\n    return midterm*0.4 + final*0.4 + (result / homework.size())*0.2;\n}\n\n\ndouble Core::grade() const\n{\n    return calc_grade(midterm, final, homework);\n}\n\nstd::istream&amp; Core::read_common(std::istream&amp; in)\n{\n    in &gt;&gt; n &gt;&gt; midterm &gt;&gt; final;\n    return in;\n}\n\nstd::istream&amp; Core::read(std::istream&amp; in)\n{\n    read_common(in);\n    read_hw(in, homework);\n    return in;\n}\n\nstd::istream&amp; Core::read_hw(std::istream&amp; in, std::vector&lt;double&gt;&amp; homework)\n{\n    double input;\n    while (in &gt;&gt; input)\n        homework.push_back(input);\n\n    return in;\n}\n\n//////////////////////////////////////////////////////////\n//////////////////////////GRAD CLASS//////////////////////\n//////////////////////////////////////////////////////////\nclass Grad : public Core {\npublic:\n    Grad() : thesis(0) { }\n    Grad(std::istream&amp; is) { read(is); }\n\n    double grade() const;\n    std::istream&amp; read(std::istream&amp;);\nprivate:\n    double thesis;\n};\n\nstd::istream&amp; Grad::read(std::istream&amp; in)\n{\n    read_common(in);\n    in &gt;&gt; thesis;\n    read_hw(in, homework);\n    return in;\n}\n\ndouble Grad::grade() const\n{\n    return std::min(Core::grade(), thesis);\n}\n\n//////////////////////////////////////////////////////////\n//////////////////////MISCELLANEOUS///////////////////////\n//////////////////////////////////////////////////////////\nbool compare_grades(const Core&amp; c1, const Core&amp; c2)\n{\n    return c1.grade() &lt; c2.grade();\n}\n\nbool compare_Core_ptrs(const Core* cp1, const Core* cp2)\n{\n    return compare_grades(*cp1, *cp2);\n}\n\nusing namespace std;\n\nint main()\n{\n    vector&lt;Core*&gt; students;\n    Core* record;\n    char ch;\n    string::size_type maxlen = 0;\n\n    while (cin &gt;&gt; ch)\n    {\n        if (ch == 'U')\n            record = new Core;\n        else\n            record = new Grad;\n        record-&gt;read(cin);\n        maxlen = max(maxlen, record-&gt;name().size());\n        students.push_back(record);\n    }\n\n    sort(students.begin(), students.end(), compare_Core_ptrs);\n\n    for (vector&lt;Core*&gt;::size_type i = 0; i != students.size(); ++i)\n    {\n        cout &lt;&lt; students[i]-&gt;name() &lt;&lt; string(maxlen + 1 - students[i]-&gt;name().size(), ' ');\n        try\n        {\n            double final_grade = students[i]-&gt;grade();\n            streamsize prec = cout.precision();\n            cout &lt;&lt; setprecision(3) &lt;&lt; final_grade &lt;&lt; setprecision(prec) &lt;&lt; endl;\n        }\n        catch (domain_error e)\n        {\n            cout &lt;&lt; e.what() &lt;&lt; endl;\n        }\n        delete students[i];\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 4788487, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-0Px8PKHs_jo/AAAAAAAAAAI/AAAAAAAAAD4/yJ0bkrocyFc/photo.jpg?sz=128", "display_name": "trollpidor", "link": "https://stackoverflow.com/users/4788487/trollpidor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2887, "favorite_count": 0, "accepted_answer_id": 31575968, "answer_count": 1, "score": -1, "last_activity_date": 1437611419, "creation_date": 1437609242, "question_id": 31575949, "link": "https://stackoverflow.com/questions/31575949/error-c3861-identifier-not-found", "title": "error C3861: identifier not found", "body": "<p>I encountered the following problem with this code.   </p>\n\n<pre><code> #include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iomanip&gt;\n\n//////////////////////////////////////////////////////////\n//////////////////////////CORE CLASS//////////////////////\n//////////////////////////////////////////////////////////\nclass Core {\npublic:\n    Core() : midterm(0), final(0) { }\n    Core(std::istream&amp; is) { read(is); }\n\n    std::string name() const;\n\n    virtual std::istream&amp; read(std::istream&amp;);\n    virtual double grade() const;\nprotected:\n    std::istream&amp; read_common(std::istream&amp;);\n    std::istream&amp; read_hw(std::istream&amp;, std::vector&lt;double&gt;&amp;);\n    double midterm, final;\n    std::vector&lt;double&gt; homework;\nprivate:    \n    std::string n;  \n};\n\nstd::string Core::name() const { return n; }\n\ndouble Core::grade() const\n{\n    return calc_grade(midterm, final, homework);\n}\n\nstd::istream&amp; Core::read_common(std::istream&amp; in)\n{\n    in &gt;&gt; n &gt;&gt; midterm &gt;&gt; final;\n    return in;\n}\n\nstd::istream&amp; Core::read(std::istream&amp; in)\n{\n    read_common(in);\n    read_hw(in, homework);\n    return in;\n}\n\nstd::istream&amp; Core::read_hw(std::istream&amp; in, std::vector&lt;double&gt;&amp; homework)\n{\n    double input;\n    while (in &gt;&gt; input)\n        homework.push_back(input);\n\n    return in;\n}\n\n//////////////////////////////////////////////////////////\n//////////////////////////GRAD CLASS//////////////////////\n//////////////////////////////////////////////////////////\nclass Grad : public Core {\npublic:\n    Grad() : thesis(0) { }\n    Grad(std::istream&amp; is) { read(is); }\n\n    double grade() const;\n    std::istream&amp; read(std::istream&amp;);\nprivate:\n    double thesis;\n};\n\nstd::istream&amp; Grad::read(std::istream&amp; in)\n{\n    read_common(in);\n    in &gt;&gt; thesis;\n    read_hw(in, homework);\n    return in;\n}\n\ndouble Grad::grade() const\n{\n    return std::min(Core::grade(), thesis);\n}\n\n//////////////////////////////////////////////////////////\n//////////////////////MISCELLANEOUS///////////////////////\n//////////////////////////////////////////////////////////\nbool compare_grades(const Core&amp; c1, const Core&amp; c2)\n{\n    return c1.grade() &lt; c2.grade();\n}\n\nbool compare_Core_ptrs(const Core* cp1, const Core* cp2)\n{\n    return compare_grades(*cp1, *cp2);\n}\n\ndouble calc_grade(double midterm, double final, std::vector&lt;double&gt;&amp; homework)\n{\n    double result = 0.0;\n    for (std::vector&lt;double&gt;::const_iterator i = homework.begin(); i != homework.end(); ++i)\n        result += *i;\n\n    return midterm*0.4 + final*0.4 + (result / homework.size())*0.2;\n}\n\nusing namespace std;\n\nint main()\n{\n    vector&lt;Core*&gt; students;\n    Core* record;\n    char ch;\n    string::size_type maxlen = 0;\n\n    while (cin &gt;&gt; ch)\n    {\n        if (ch == 'U')\n            record = new Core;\n        else\n            record = new Grad;\n        record-&gt;read(cin);\n        maxlen = max(maxlen, record-&gt;name().size());\n        students.push_back(record);\n    }\n\n    sort(students.begin(), students.end(), compare_Core_ptrs);\n\n    for (vector&lt;Core*&gt;::size_type i = 0; i != students.size(); ++i)\n    {\n        cout &lt;&lt; students[i]-&gt;name() &lt;&lt; string(maxlen + 1 - students[i]-&gt;name().size(), ' ');\n        try\n        {\n            double final_grade = students[i]-&gt;grade();\n            streamsize prec = cout.precision();\n            cout &lt;&lt; setprecision(3) &lt;&lt; final_grade &lt;&lt; setprecision(prec) &lt;&lt; endl;\n        }\n        catch (domain_error e)\n        {\n            cout &lt;&lt; e.what() &lt;&lt; endl;\n        }\n        delete students[i];\n    }\n    return 0;\n}\n</code></pre>\n\n<p>error C3861: 'calc_grade': identifier not found. I tried to move the function before the classes but nothing changed. I don't understand what is wrong. Help.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2012", "msbuild"], "comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1437622884, "post_id": 31575933, "comment_id": 51109741, "body": "I don&#39;t know how, but you could look towards <a href=\"https://msdn.microsoft.com/en-us/library/ms164311.aspx\" rel=\"nofollow noreferrer\">MSBuild parameters</a>, <a href=\"https://msdn.microsoft.com/en-us/library/5dy88c2e.aspx\" rel=\"nofollow noreferrer\">schema elements</a> and <a href=\"https://github.com/Microsoft/TypeScript/wiki/Setting-Compiler-Options-in-MSBuild-projects\" rel=\"nofollow noreferrer\">compiler options</a>"}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1437657149, "post_id": 31575933, "comment_id": 51128507, "body": "Visual Studio provides a <a href=\"https://msdn.microsoft.com/en-us/library/kezkeayy(v=vs.110).aspx\" rel=\"nofollow noreferrer\">CL environment variable</a> to specify compiler and linker options.  You should be able to use it to augment your MSBuild call."}], "owner": {"reputation": 85, "user_id": 2403909, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/e0f989e1a58b6d910c66520df44b9f3a?s=128&d=identicon&r=PG", "display_name": "user2403909", "link": "https://stackoverflow.com/users/2403909/user2403909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1263, "favorite_count": 0, "closed_date": 1437731061, "answer_count": 0, "score": 1, "last_activity_date": 1437610110, "creation_date": 1437609120, "last_edit_date": 1437610110, "question_id": 31575933, "link": "https://stackoverflow.com/questions/31575933/how-to-pass-additional-compiler-linker-options-in-msbuild-command-line", "closed_reason": "Duplicate", "title": "How to pass additional compiler/linker options in msbuild command line?", "body": "<p>So the thing is I am trying to do something that requires adding additional compiler and linker options while building a project. I do not want that option to be added to the default compile options so that it is not messed up for others. In visual studio I can add additional options to the compiler and linker by editing the properties of the project. It will be good to have a one-time switch between adding or not adding these additional options. Say in command line using <code>msbuild /compilerOption /linkerOption</code> to add these addiontal options. Or having a configure file that can be loaded by <code>msbuild</code> command. Is there a good way to do that? Thanks!</p>\n"}, {"tags": ["c++", "opengl", "fragment-shader", "vertex-shader"], "comments": [{"owner": {"reputation": 1725, "user_id": 1351828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a351d561f75641e458ce8f6dfd5b5227?s=128&d=identicon&r=PG", "display_name": "Adrian Krupa", "link": "https://stackoverflow.com/users/1351828/adrian-krupa"}, "edited": false, "score": 2, "creation_date": 1437608455, "post_id": 31575788, "comment_id": 51106370, "body": "Where do you get error 1281 (GL_INVALID_VALUE)?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1437610013, "post_id": 31575788, "comment_id": 51106734, "body": "How is vs_out conencted to fs_in?"}, {"owner": {"reputation": 115, "user_id": 4905333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b39b928e7b0e06cb2a8da5a7ea41f606?s=128&d=identicon&r=PG&f=1", "display_name": "bobby", "link": "https://stackoverflow.com/users/4905333/bobby"}, "reply_to_user": {"reputation": 1725, "user_id": 1351828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a351d561f75641e458ce8f6dfd5b5227?s=128&d=identicon&r=PG", "display_name": "Adrian Krupa", "link": "https://stackoverflow.com/users/1351828/adrian-krupa"}, "edited": false, "score": 0, "creation_date": 1437629834, "post_id": 31575788, "comment_id": 51111728, "body": "@AdrianKrupa: If I am substituting gl_FragColor = colorOut; by gl_FragColor = fs_in.color; the error occurs."}, {"owner": {"reputation": 115, "user_id": 4905333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b39b928e7b0e06cb2a8da5a7ea41f606?s=128&d=identicon&r=PG&f=1", "display_name": "bobby", "link": "https://stackoverflow.com/users/4905333/bobby"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1437630010, "post_id": 31575788, "comment_id": 51111795, "body": "@immibis: the shaders are linked in the same program. the blocks have the same name and exactly the same members (ordering, types and naming). therefore, as far as I know, the should be linked automatically"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1437636382, "post_id": 31575788, "comment_id": 51114870, "body": "What does the glGetShaderInfoLog/glProgramInfoLog say? Btw.: The blocks do not have the same name. One is called vs_out, the other one fs_in."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1437638837, "post_id": 31575788, "comment_id": 51116199, "body": "@bobby they do not have the same name, one is called vs_out and one is called fs_in."}, {"owner": {"reputation": 1725, "user_id": 1351828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a351d561f75641e458ce8f6dfd5b5227?s=128&d=identicon&r=PG", "display_name": "Adrian Krupa", "link": "https://stackoverflow.com/users/1351828/adrian-krupa"}, "edited": false, "score": 0, "creation_date": 1437642334, "post_id": 31575788, "comment_id": 51118436, "body": "@bobby this error you get from C++ code. Put some here. Also as BDL mentioned, how do you check shaders compilation/linking?"}, {"owner": {"reputation": 115, "user_id": 4905333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b39b928e7b0e06cb2a8da5a7ea41f606?s=128&d=identicon&r=PG&f=1", "display_name": "bobby", "link": "https://stackoverflow.com/users/4905333/bobby"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1437821794, "post_id": 31575788, "comment_id": 51199139, "body": "@immibis: only the block names are important and they are the same."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1437823192, "post_id": 31575788, "comment_id": 51199468, "body": "@bobby what are <code>fs_in</code> and <code>vs_out</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 4905333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b39b928e7b0e06cb2a8da5a7ea41f606?s=128&d=identicon&r=PG&f=1", "display_name": "bobby", "link": "https://stackoverflow.com/users/4905333/bobby"}, "is_accepted": true, "score": 0, "last_activity_date": 1437839483, "last_edit_date": 1437839483, "creation_date": 1437821942, "answer_id": 31625756, "question_id": 31575788, "link": "https://stackoverflow.com/questions/31575788/opengl-error-1281-in-fragment-shader-only-by-using-block-interface/31625756#31625756", "title": "OpenGL Error 1281 in fragment shader (only by using block interface)", "body": "<p>The problem was very unintiutive. The variable \"int materialIdOut;\" was incorrectly \"initialized\". It seems, that when I was using the block interface, the problem occurs. If not, all worked fine</p>\n\n<p>EDIT:\nsee solution in the question post</p>\n"}], "owner": {"reputation": 115, "user_id": 4905333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b39b928e7b0e06cb2a8da5a7ea41f606?s=128&d=identicon&r=PG&f=1", "display_name": "bobby", "link": "https://stackoverflow.com/users/4905333/bobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1284, "favorite_count": 1, "accepted_answer_id": 31625756, "answer_count": 1, "score": 0, "last_activity_date": 1437840110, "creation_date": 1437608060, "last_edit_date": 1437840110, "question_id": 31575788, "link": "https://stackoverflow.com/questions/31575788/opengl-error-1281-in-fragment-shader-only-by-using-block-interface", "title": "OpenGL Error 1281 in fragment shader (only by using block interface)", "body": "<p>I have a very confusing error somewhere in the vertex or fragment shader. The rendering works when I do not actively use the block interface in the fragment shader. But when I am using it error 1281 occurs. Below you see the working vertex and fragment shaders. The error is discusse below the code.</p>\n\n<p>Vertex shader:</p>\n\n<pre><code>#version 430\n\nin layout (location = 0) vec3 position;\nin layout (location = 1) vec4 color;\nin layout (location = 2) vec3 normal;\nin layout (location = 3) vec2 uv;\nin layout (location = 4) vec3 tangent;\nin layout (location = 5) int materialId;\n\nuniform mat4 pr_matrix;\nuniform mat4 vw_matrix = mat4(1.0);\nuniform mat4 ml_matrix = mat4(1.0);\n\n\nout VS_OUT {\n    vec4 color;\n    vec2 texture_coordinates;\n    vec3 normal;\n    vec3 tangent;\n    vec3 binormal;\n    vec3 worldPos;\n    int materialIdOut;\n} vs_out;\n\nout vec4 colorOut;\n\nvoid main()\n{\n    vs_out.color = color;\n    vs_out.texture_coordinates = uv;        \n    mat3 normalMatrix = transpose ( inverse ( mat3 ( ml_matrix )));\n    vs_out.normal = normalize ( normalMatrix * normalize ( normal ));\n    gl_Position = ( pr_matrix * vw_matrix * ml_matrix ) * vec4 ( position, 1.0);\n\n    colorOut = vec4(vs_out.normal,1.0);\n}\n</code></pre>\n\n<p>WORKING fragment shader (normal is used as color):</p>\n\n<pre><code>#version 430\n\n\nuniform vec3 cameraPos;\nuniform mat4 ml_matrix;\nuniform mat4 vw_matrix;\nuniform sampler2D texSlots[32];\n\nin VS_OUT {\n    vec4 color;\n    vec2 texture_coordinates;\n    vec3 normal;\n    vec3 tangent;\n    vec3 binormal;\n    vec3 worldPos;\n    int materialIdOut;\n} fs_in;\n\n\nout vec4 gl_FragColor;\nin vec4 colorOut;\n\nvoid main()\n{\n    gl_FragColor = colorOut;\n}\n</code></pre>\n\n<p>If I am trying to use the block interface in the fragment shader like\n        gl_FragColor = fs_in.color;\nor\n        gl_FragColor = vec4(fs_in.normal,1.0);</p>\n\n<p>the error 1281 occurs. I really do not see why this is not working.</p>\n\n<p><strong>EDIT: solution:</strong></p>\n\n<p>there where in fact two problems:\n1) int was interpreted as float\nFrom the application I send the material attribute to the shader by using\nglVertexAttribPointer(SHADER_MATERIAL_INDEX, 1, GL_INT, ...); which leads to the problem, that attribute was interpreted as float in the shader\nBy using glVertexAttribIPointerEXT(SHADER_MATERIAL_INDEX, 1, GL_INT, ...); we can overcome this problem\n2) The program linking was not successful \"error c5215 integer varying must be flat\" which leads to a change in the vertex and fragment shader.</p>\n\n<pre><code>out VS_OUT {\n    vec4 color;\n    vec2 texture_coordinates;\n    vec3 normal;\n    vec3 tangent;\n    vec3 binormal;\n    vec3 worldPos;\n    flat int materialIdOut;\n} vs_out;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>in VS_OUT {\n    vec4 color;\n    vec2 texture_coordinates;\n    vec3 normal;\n    vec3 tangent;\n    vec3 binormal;\n    vec3 worldPos;\n    flat int materialIdOut;\n} fs_in;\n</code></pre>\n\n<p>Now everything works perfect</p>\n"}, {"tags": ["c++", "timer", "webcam", "interrupt", "periodic-task"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4868521, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RmobkPSbulc/AAAAAAAAAAI/AAAAAAAAAOA/xbVa7LIAdVA/photo.jpg?sz=128", "display_name": "kjbpv", "link": "https://stackoverflow.com/users/4868521/kjbpv"}, "edited": false, "score": 0, "creation_date": 1437684777, "post_id": 31576189, "comment_id": 51147368, "body": "Great, thanks! I&#39;ll see if I can figure out how to do it that way."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1437612301, "last_edit_date": 1437612301, "creation_date": 1437611071, "answer_id": 31576189, "question_id": 31575782, "link": "https://stackoverflow.com/questions/31575782/interrupt-timer-for-periodic-webcam-frame-capture-c/31576189#31576189", "title": "interrupt timer for periodic webcam frame capture c++", "body": "<p>Most cameras capture images on their own clock. You are then a slave, not a master: you don't trigger image capture. Instead, you're notified whenever a new image is available. Any of the camera APIs (OpenCV, Qt Multimedia, etc.) will allow you to be notified when new camera data is available. If an API doesn't have asynchronous notification, you can spin a thread and perform the capture synchronously. Say, with OpenCV:</p>\n\n<pre><code>void process(const cv::Mat &amp; frame) { ... }\n\nint main() {\n  bool quit = false;\n  std::condition_variable queue_cv;\n  std::mutex queue_mutex;\n  std::deque&lt;cv::Mat&gt; queue;\n  auto capture = cv::VideoCapture(0);\n\n  // Worker thread - source of frames\n  auto thread = std::thread([&amp;]{\n    int frame_count = 0;\n    while (! quit) {\n      cv::Mat frame;\n      if (! capture.read(frame)) break;\n      frame_count ++;\n      if (frame_count &gt;= 30) {\n        std::unique_lock&lt;std::mutex&gt; lock(queue_mutex);\n        queue.push_back(frame);\n        lock.unlock();\n        queue_cv.notify_one();\n        frame_count = 0;\n      }\n    }\n    quit = true;\n  });\n\n  // Main thread - consumer of frames\n  while (!quit) {\n    std::unique_lock&lt;std::mutex&gt; lock(queue_mutex);\n    queue_cv.wait(queue_lock, []{ return queue.size() &gt; 0; });\n    // we own the lock here\n    auto frame = queue.pop_front();\n    lock.unlock();\n    // lock is released, process the frame\n    process(frame);\n  }\n  thread.join();\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4868521, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RmobkPSbulc/AAAAAAAAAAI/AAAAAAAAAOA/xbVa7LIAdVA/photo.jpg?sz=128", "display_name": "kjbpv", "link": "https://stackoverflow.com/users/4868521/kjbpv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "accepted_answer_id": 31576189, "answer_count": 1, "score": 1, "last_activity_date": 1437612301, "creation_date": 1437608029, "question_id": 31575782, "link": "https://stackoverflow.com/questions/31575782/interrupt-timer-for-periodic-webcam-frame-capture-c", "title": "interrupt timer for periodic webcam frame capture c++", "body": "<p>I need to capture a frame from a webcam approximately 30 times per second. Essentially, I'm looking for a way to implement the following:</p>\n\n<pre><code>mainloop:\nwhile( // scan is in process )\n{\n    // process current image\n    // discard current image and dequeue next image (pop it off the front of the queue)\n}\n\ninterrupt routine: // execute 30 times per second\n{\n    // capture newImage with webcam\n    // enqueue newImage (push it onto the back of the queue)\n    // reset timer and return from interrupt \n}\n</code></pre>\n\n<p>I'm afraid I don't have enough experience to know exactly what I'm looking for. If anybody has better advice about how to take a picture in the background every 30 seconds, I'd be thrilled to hear it. I'm new to OpenCV, although I have a fair amount of C++ experience in a classroom context. The end goal of my project is to use feature detection and matching in order to extract the frame-to-frame transformation matrix between every two frames (in other words, to track camera motion over a surface).</p>\n\n<p>Target OS: OSX Yosemite 10.10.4, running XCode 6.3.1\n* eventually this solution will be moved to a windows platform, so I'd love to find a solution that isn't platform-(or computer-)specific. </p>\n"}, {"tags": ["c++", "eclipse", "autocomplete", "nsight", "chrono"], "answers": [{"tags": [], "owner": {"reputation": 2163, "user_id": 5085250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/10k8D.jpg?s=128&g=1", "display_name": "havogt", "link": "https://stackoverflow.com/users/5085250/havogt"}, "is_accepted": true, "score": 1, "last_activity_date": 1437648525, "creation_date": 1437648525, "answer_id": 31585167, "question_id": 31575678, "link": "https://stackoverflow.com/questions/31575678/eclipse-nvidia-nsight-7-0-c-chrono-autocomplete/31585167#31585167", "title": "Eclipse (Nvidia NSight 7.0) C++ chrono autocomplete", "body": "<p>With the following settings I made it partly work. Autocomplete works but only after manually adding the includes:<code>#include &lt;chrono&gt;</code> (same for other c++11 stuff like <code>shared_ptr</code>).</p>\n\n<p>You need to manually activate c++11 in the indexer. For nsight 7.0 you need to do the following steps:</p>\n\n<p>In the project properties go to:</p>\n\n<ol>\n<li><strong>General</strong> -> <strong>Path and Symbols</strong> -> <strong>Symbols</strong> -> <strong>Add...</strong> -> Add the <code>__cplusplus</code> variable with the value <code>201103L</code> (c++11). The default value will be overridden.</li>\n<li><strong>General</strong> -> <strong>Preprocessor and Include Paths, Macro etc.</strong> -> <strong>Providers</strong> -> Activate <strong>CDT GCC Built-in Compiler Settings</strong> -> Decative <strong>Share setting entries between projects (global provider)</strong> -> To <strong>Command to get compiler specs:</strong> add <code>-std=c++11</code> to the line.</li>\n<li>Apply changes and rebuild the index if not done automatically (right click on project -> <strong>Index</strong> -> <strong>Rebuild</strong>).</li>\n</ol>\n\n<p>The problem to solve is how to force the indexer to work even when the header is not included...</p>\n"}], "owner": {"reputation": 3, "user_id": 5145750, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-52QVRPiS1OQ/AAAAAAAAAAI/AAAAAAAAI6Y/x-3LoZqqVEU/photo.jpg?sz=128", "display_name": "Igor Campos", "link": "https://stackoverflow.com/users/5145750/igor-campos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 1, "accepted_answer_id": 31585167, "answer_count": 1, "score": 0, "last_activity_date": 1437648525, "creation_date": 1437607370, "question_id": 31575678, "link": "https://stackoverflow.com/questions/31575678/eclipse-nvidia-nsight-7-0-c-chrono-autocomplete", "title": "Eclipse (Nvidia NSight 7.0) C++ chrono autocomplete", "body": "<p>I am using the chrono library in a project and would like to enable autocomplete in eclipse. I've searched the internet, but failed to find a way to do so.</p>\n\n<p>The IDE doesn't autocomplete std::chrono, neither system_clock.</p>\n\n<p>I appreciate your help.</p>\n\n<p>Thanks,</p>\n\n<p>Igor Campos</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1437605565, "post_id": 31575369, "comment_id": 51105608, "body": "Your example is a scenario where you would typically <i>not</i> choose to use pointer members at all.  The pointer members would have a longer lifespan than the constructor parameters they would point to."}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1437605573, "post_id": 31575369, "comment_id": 51105612, "body": "this-&gt;name is a pointer. You cannot assign this to a string (by value)"}, {"owner": {"reputation": 4877, "user_id": 2350145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/230aded37964ea6113113036842425d2?s=128&d=identicon&r=PG", "display_name": "Anirban Nag &#39;tintinmj&#39;", "link": "https://stackoverflow.com/users/2350145/anirban-nag-tintinmj"}, "reply_to_user": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1437605629, "post_id": 31575369, "comment_id": 51105632, "body": "@JensMunk so what can i write in the constructor to access the class variable <code>name</code>?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1437605691, "post_id": 31575369, "comment_id": 51105648, "body": "If you declared a pointer, that means that you want to make it to <i>point</i> somewhere. But no one here knows where you want it to point to. Only you do. Which is why it is unclear what you are asking. How do you expect up to know what you what to do? Explain what you want to achieve as the end result of all this, and them maybe we&#39;ll be able to tell you how to do it."}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1437605792, "post_id": 31575369, "comment_id": 51105683, "body": "@AnirbanNag&#39;tintinmj&#39; You could change your member to a std::string name and do exactly what you already did. It will work"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437606113, "post_id": 31575369, "comment_id": 51105768, "body": "&quot;I am from Java background so these(pointers) things are very confusing for me.&quot; Your Java background is perfect to understand pointers!  Java has pointers (sometimes called &#39;Java references&#39;) and they behave the same as C/C++ pointers. So don&#39;t worry, you already know very well how to use C/C++ pointers! But it&#39;s better, and easier, to just avoid pointers and pass things by value in most cases. But Java doesn&#39;t have this easy option, so perhaps it will take you a little time to get used to it. Welcome to C++!!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437606521, "post_id": 31575369, "comment_id": 51105882, "body": "@AaronMcDaid no, java object references do not behave like C++ pointers"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1437606570, "post_id": 31575369, "comment_id": 51105892, "body": "@AnirbanNag&#39;tintinmj&#39; In C++ you should not use pointers in your class definition here. They don&#39;t do what you think they do ."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1437606693, "post_id": 31575369, "comment_id": 51105930, "body": "@AnirbanNag&#39;tintinmj&#39; There is no need for pointers.  Just declare a <code>string</code> and <code>int</code> member, as any sane C++ programmer would.  Look at the answers and all of issues associated with writing code like this.  Also, don&#39;t use Java as a guide in writing C++ code.  Maybe that is where you are going astray."}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 7, "creation_date": 1437606782, "post_id": 31575430, "comment_id": 51105951, "body": "And now you have the issue of <code>delete</code> and memory leaks."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1437607411, "post_id": 31575430, "comment_id": 51106109, "body": "Since the OP claims to come from Java, and since this is C++, a huge caveat should be given with this solution.  The class now requires that the rule of 3 be implemented: <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\" title=\"what is the rule of three\">stackoverflow.com/questions/4172722/what-is-the-rule-of-thre&zwnj;&#8203;e</a>  C++ has no garbage collection to release the memory."}], "tags": [], "owner": {"reputation": 1147, "user_id": 813009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zaGq8.png?s=128&g=1", "display_name": "tp1", "link": "https://stackoverflow.com/users/813009/tp1"}, "is_accepted": true, "score": 6, "last_activity_date": 1437605811, "creation_date": 1437605811, "answer_id": 31575430, "question_id": 31575369, "link": "https://stackoverflow.com/questions/31575369/how-to-combine-this-and-pointer-in-c/31575430#31575430", "title": "How to combine `this` and pointer in c++?", "body": "<p>try</p>\n\n<pre><code>this-&gt;name = new string(name);\nthis-&gt;age = new int(age);\n</code></pre>\n\n<p>But I would recommend renaming the parameters so that there is no confusion whether you use the parameter or member variable.</p>\n"}, {"comments": [{"owner": {"reputation": 4877, "user_id": 2350145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/230aded37964ea6113113036842425d2?s=128&d=identicon&r=PG", "display_name": "Anirban Nag &#39;tintinmj&#39;", "link": "https://stackoverflow.com/users/2350145/anirban-nag-tintinmj"}, "edited": false, "score": 0, "creation_date": 1437605912, "post_id": 31575434, "comment_id": 51105710, "body": "Yes I am aware of that <code>name</code> is a string pointer. I don&#39;t want to change it. That&#39;s why the &#39;curious case&#39; I mentioned."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 4877, "user_id": 2350145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/230aded37964ea6113113036842425d2?s=128&d=identicon&r=PG", "display_name": "Anirban Nag &#39;tintinmj&#39;", "link": "https://stackoverflow.com/users/2350145/anirban-nag-tintinmj"}, "edited": false, "score": 0, "creation_date": 1437605995, "post_id": 31575434, "comment_id": 51105729, "body": "@AnirbanNag&#39;tintinmj&#39;, why do want want to use pointers as members in this way? It&#39;s not good C++."}, {"owner": {"reputation": 4877, "user_id": 2350145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/230aded37964ea6113113036842425d2?s=128&d=identicon&r=PG", "display_name": "Anirban Nag &#39;tintinmj&#39;", "link": "https://stackoverflow.com/users/2350145/anirban-nag-tintinmj"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437606029, "post_id": 31575434, "comment_id": 51105741, "body": "@AaronMcDaid It&#39;s for experimental purpose."}, {"owner": {"reputation": 608, "user_id": 1828193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/22c498903307d42a9cb2b7142f6b73f2?s=128&d=identicon&r=PG", "display_name": "Pepedou", "link": "https://stackoverflow.com/users/1828193/pepedou"}, "edited": false, "score": 0, "creation_date": 1437606166, "post_id": 31575434, "comment_id": 51105788, "body": "If you&#39;re using pointers store the address of the parameter with the &amp; operator or pass a pointer as a parameter. I updated my answer to show both scenarios."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 4877, "user_id": 2350145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/230aded37964ea6113113036842425d2?s=128&d=identicon&r=PG", "display_name": "Anirban Nag &#39;tintinmj&#39;", "link": "https://stackoverflow.com/users/2350145/anirban-nag-tintinmj"}, "edited": false, "score": 0, "creation_date": 1437606222, "post_id": 31575434, "comment_id": 51105802, "body": "@AnirbanNag&#39;tintinmj&#39; There is very little to experiment with.  You assign a pointer with a pointer.  Given that, there is no need to write code like this."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1437606289, "post_id": 31575434, "comment_id": 51105816, "body": "@Pepedou Your last example leads to undefined behavior.  You are assigning the address of a temporary to the instance."}, {"owner": {"reputation": 4877, "user_id": 2350145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/230aded37964ea6113113036842425d2?s=128&d=identicon&r=PG", "display_name": "Anirban Nag &#39;tintinmj&#39;", "link": "https://stackoverflow.com/users/2350145/anirban-nag-tintinmj"}, "edited": false, "score": 0, "creation_date": 1437606314, "post_id": 31575434, "comment_id": 51105822, "body": "@Pepedou The second option of your updated answer is giving negative exit value."}, {"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 0, "creation_date": 1437606366, "post_id": 31575434, "comment_id": 51105836, "body": "Your 2nd constructor in the <b>UPDATE</b> portion is wrong! You are passing <code>name</code> and <code>age</code> by value! So, a copy of them is sent! So by the time your function call gets over <code>name</code> and <code>age</code> are removed from the stack and they don&#39;t exist (which is undefined behaviour)!"}, {"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 0, "creation_date": 1437606462, "post_id": 31575434, "comment_id": 51105866, "body": "@Pepedou you need not remove it! It can be changed to this! <code>MyClass(string &amp;name, int &amp;age)</code> this way it will work fine!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 0, "creation_date": 1437606491, "post_id": 31575434, "comment_id": 51105873, "body": "@user007 Then it makes the class very fragile"}, {"owner": {"reputation": 608, "user_id": 1828193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/22c498903307d42a9cb2b7142f6b73f2?s=128&d=identicon&r=PG", "display_name": "Pepedou", "link": "https://stackoverflow.com/users/1828193/pepedou"}, "reply_to_user": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 0, "creation_date": 1437606606, "post_id": 31575434, "comment_id": 51105902, "body": "@user007 I was just thinking about adding that but wasn&#39;t sure because he said he wants to use pointers as member variables."}, {"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1437606615, "post_id": 31575434, "comment_id": 51105907, "body": "@MattMcNabb Fragile? Why? Can you explain a bit?"}, {"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 1, "creation_date": 1437606791, "post_id": 31575434, "comment_id": 51105959, "body": "@Pepedou yeah! Then we can use <code>this-&gt;name = &amp;name</code> address of the reference would give the address of the original string!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 2, "creation_date": 1437606794, "post_id": 31575434, "comment_id": 51105961, "body": "@user007 imagine someone writes: <code>string s(&quot;bla&quot;);</code> and then <code>new HumanBeing(s);</code> (assigned to an appropriate sort of pointer).  Then <code>s</code> may end its lifetime , leaving the dynamically allocated HumanBeing with a dangling reference."}, {"owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1437607055, "post_id": 31575434, "comment_id": 51106018, "body": "@MattMcNabb Yeah!  But that will be the case even when we pass the parameters by pointers, right? So the whole thing of storing it as pointer is wrong I assume."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "edited": false, "score": 1, "creation_date": 1437607223, "post_id": 31575434, "comment_id": 51106061, "body": "@user007 Yes; although when the parameters are pointers it does give the programmer writing the calling code a bit of a hint that the class might store the pointer."}], "tags": [], "owner": {"reputation": 608, "user_id": 1828193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/22c498903307d42a9cb2b7142f6b73f2?s=128&d=identicon&r=PG", "display_name": "Pepedou", "link": "https://stackoverflow.com/users/1828193/pepedou"}, "is_accepted": false, "score": 4, "last_activity_date": 1437606821, "last_edit_date": 1437606821, "creation_date": 1437605841, "answer_id": 31575434, "question_id": 31575369, "link": "https://stackoverflow.com/questions/31575369/how-to-combine-this-and-pointer-in-c/31575434#31575434", "title": "How to combine `this` and pointer in c++?", "body": "<p>Your logic is correct. You should be able to write <code>this-&gt;name = name</code>. I believe your problem is that the class variable 'name' is pointer to string <code>string *</code> while the parameter you're receiving in your constructor is a string <code>string</code>. Try changing this:</p>\n\n<pre><code>private:\n  string *name;\n  int *age;\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>private:\n  string name;\n  int age;\n</code></pre>\n\n<p>UPDATE: If you want to use pointers then you must pass a pointer.</p>\n\n<pre><code>MyClass(string *name, int *age)\n{\n  this-&gt;name = name;\n  this-&gt;age = age;\n}\n</code></pre>\n\n<p>Or you could pass by reference and have a similar behavior to Java.</p>\n\n<pre><code>private:\n  string *name;\n  int *age;\n\nMyClass(string &amp;name, int &amp;age)\n{\n  this-&gt;name = &amp;name;\n  this-&gt;age = &amp;age;\n}\n</code></pre>\n\n<p>Thanks @user007</p>\n"}, {"tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 2, "last_activity_date": 1437606948, "last_edit_date": 1437606948, "creation_date": 1437606431, "answer_id": 31575526, "question_id": 31575369, "link": "https://stackoverflow.com/questions/31575369/how-to-combine-this-and-pointer-in-c/31575526#31575526", "title": "How to combine `this` and pointer in c++?", "body": "<p><code>HumanBeing</code> is a constructor. Whenever possible, you should use the base/member initializer syntax of a constructor to initialize the members and base class portions:</p>\n\n<pre><code>HumanBeing(string name, int age)\n: name(name)  // error!\n, age(age)    // error!\n{\n    // what to do in here? Nothing!\n}\n</code></pre>\n\n<p>However, that won't work here (see <code>error!</code> comments) because the members <code>age</code> and <code>name</code> are pointers. </p>\n\n<p>This is a problem, because the constructor arguments are temporary objects. We must not store, inside the class object, pointers to temporary objects. And so we cannot fix it like this, even though it compiles:</p>\n\n<pre><code>HumanBeing(string name, int age)\n: name(&amp;name) \n, age(&amp;age)\n{\n}\n</code></pre>\n\n<p>The parameter objects <code>name</code> and <code>age</code> cease to exist when the constructor terminates, and so the object's members are left pointing to garbage.</p>\n\n<p>You must redesign the constructor with a different interface, or redesign the class so that its members aren't pointers.</p>\n\n<p>// Alternative constructor: get stable objects from somewhere</p>\n\n<p>HumanBeing(string *n, int *a)\n   : name(n)\n   , age(a)\n   {\n   }</p>\n\n<p>// Alternative class design</p>\n\n<pre><code>class HumanBeing {\nprivate:\n    string name;\n    int age;\n\n    HumanBeing(string n, int a)\n    : name(n)\n    , age(a)\n    {\n    }\n};\n</code></pre>\n\n<p>There is rarely any need to fuss around with the <code>this</code> pointer. The main use is when a non-static member function needs to call another function in another class, or a non-class function, and needs to pass a pointer to its object. For instance:</p>\n\n<pre><code>// FooClass derives from NotificationTarget\n// The this pointer is FooClass *, and\n// implicitly converts to NotificationTarget * in the RegisterMe call.\n\nFooClass::RegisterForNotification(NotificationSource &amp;ns)\n{\n  ns.RegisterMe(this);   // void NotificationSource::RegisterMe(NotificationTarget *);\n}\n</code></pre>\n\n<p>The <code>this</code> pointer can be used to overcome a scoping problem in C++:</p>\n\n<pre><code>int xl;  // at file scope\n\nclass funny {\n  int x1;\n\n  void method()\n  {\n     xl = 1;  // TYPO! assigns to xl at file scope, not x1 member.\n     this-&gt;xl = 1; // TYPO! But caught by compiler. \n  }\n};\n</code></pre>\n\n<p>This doesn't add up to a reason to use <code>this-&gt;member</code> all over the place in C++ programs; you must use sane naming conventions to defend against this type of problem, such as using <code>g_</code> prefix on globals, and <code>m_</code> on members, or a similar convention.</p>\n"}, {"tags": [], "owner": {"reputation": 388, "user_id": 5046695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6f52337c5696cae0930d085d8f6d5d?s=128&d=identicon&r=PG&f=1", "display_name": "ncalmbeblpaicr0011", "link": "https://stackoverflow.com/users/5046695/ncalmbeblpaicr0011"}, "is_accepted": false, "score": 11, "last_activity_date": 1437606747, "last_edit_date": 1495535059, "creation_date": 1437606436, "answer_id": 31575527, "question_id": 31575369, "link": "https://stackoverflow.com/questions/31575369/how-to-combine-this-and-pointer-in-c/31575527#31575527", "title": "How to combine `this` and pointer in c++?", "body": "<p>I would avoid using pointers in this example and rewrite it like this:</p>\n\n<pre><code>class HumanBeing {\nprivate:\n    string name;\n    int age;\npublic:\n    HumanBeing(string name, int age) : name (name), age (age) \n    {\n    }\n};\n</code></pre>\n\n<p>The above example initializes you data members using a <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">constructor initialization list</a>.</p>\n\n<p>If you choose to use pointers anyway, then you have to decide how owership of the data will be handled.</p>\n\n<p>If your class will take ownership of the data, then you can do what <a href=\"https://stackoverflow.com/a/31575430/5046695\">tp1 suggested</a>.</p>\n\n<p>If your class will not take ownership of the data, then you can do this:</p>\n\n<pre><code>    HumanBeing(string &amp;name, int &amp;age) : name (&amp;name), age (&amp;age) \n    {\n    }\n</code></pre>\n\n<p>If you have access to C++11 and still want to use pointers, I would suggest at least using <a href=\"https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one\">smart pointers</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 5087437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11ba4f2d1052c6200d24c211b32dbf17?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremiah Dicharry", "link": "https://stackoverflow.com/users/5087437/jeremiah-dicharry"}, "is_accepted": false, "score": 2, "last_activity_date": 1437607385, "last_edit_date": 1437607385, "creation_date": 1437606737, "answer_id": 31575576, "question_id": 31575369, "link": "https://stackoverflow.com/questions/31575369/how-to-combine-this-and-pointer-in-c/31575576#31575576", "title": "How to combine `this` and pointer in c++?", "body": "<p>Pointers are just variables that hold a memory address.\nThey do not hold any data value, they just hold a memory address to the data.\nDon't think of them as something too complicated.</p>\n\n<pre><code>class HumanBeing {\nprivate:\n\n    // just holds a memory address (size 4 for 32-bits, 8 for 64 bits)\n    string *name;\n\n    // just holds a memory address (size 4 for 32-bits, 8 for 64 bits)\n    int *age;\n\n    HumanBeing(string name, int age) {\n        // These lines use new to allocate memory from the heap and\n        // initialize them with the parameters passed.\n        // Then they return memory addresses that are stored in\n        // this-&gt;name and this-&gt;age\n        this-&gt;name = new string(name);\n        this-&gt;age = new int(age);\n    }\n};\n</code></pre>\n\n<p>If you want to use pointers in more code:\n<code>this-&gt;name</code> is a memory address\n<code>*(this-&gt;name)</code> dereferences that memory address and gives the value where that memory address is located.</p>\n\n<p>Also <strong>beware</strong> anytime you use <code>new</code>, you have to <code>delete</code> the allocated memory to prevent memory leaks when you're not using it anymore because C++ doesn't have the convenient resource expensive garbage collector that Java has.</p>\n"}], "owner": {"reputation": 4877, "user_id": 2350145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/230aded37964ea6113113036842425d2?s=128&d=identicon&r=PG", "display_name": "Anirban Nag &#39;tintinmj&#39;", "link": "https://stackoverflow.com/users/2350145/anirban-nag-tintinmj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 31575430, "answer_count": 5, "score": 1, "last_activity_date": 1437607385, "creation_date": 1437605483, "last_edit_date": 1437605577, "question_id": 31575369, "link": "https://stackoverflow.com/questions/31575369/how-to-combine-this-and-pointer-in-c", "title": "How to combine `this` and pointer in c++?", "body": "<p>I am learning C++. There is a curious case and I want to know the solution. Suppose the code is as following</p>\n\n<pre><code>class HumanBeing {\nprivate:\n    string *name;\n    int *age;\n\n    HumanBeing(string name, int age) {\n        // what to do in here?\n    }\n};\n</code></pre>\n\n<p>In Java I can use <code>this.name = name</code>. But in C++ I can do <code>this-&gt;name = name</code>(it is not valid for above example), but what to do when the class variable is a pointer?</p>\n\n<p>I am from Java background so these(pointers) things are very confusing for me.</p>\n"}, {"tags": ["c++", "cgal"], "answers": [{"tags": [], "owner": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "is_accepted": false, "score": 1, "last_activity_date": 1437635977, "creation_date": 1437635977, "answer_id": 31580631, "question_id": 31575266, "link": "https://stackoverflow.com/questions/31575266/3d-convex-hulls-cgalhalfspace-intersection-3-with-exact-constructions-kernel/31580631#31580631", "title": "3D Convex Hulls CGAL::halfspace_intersection_3 with exact_constructions kernel", "body": "<p>There is indeed a bug in this version of CGAL. The fix is in <a href=\"https://github.com/sloriot/cgal/commit/f3f73d10a129d065ee94d13b9eff14851a74ae5a\" rel=\"nofollow\">this commit</a>.</p>\n\n<p>Note that since you want to use a kernel with exact constructions, you better use <a href=\"http://doc.cgal.org/latest/Convex_hull_3/group__PkgConvexHull3Functions.html#ga5c2ab0e6e63557e65ad7f2bdc3c351fc\" rel=\"nofollow\"><code>CGAL::halfspace_intersection_with_constructions_3</code></a> which should be faster.</p>\n"}], "owner": {"reputation": 1, "user_id": 5143031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99defb0ad23234dc25ced27a67807a50?s=128&d=identicon&r=PG&f=1", "display_name": "Luk78", "link": "https://stackoverflow.com/users/5143031/luk78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437635977, "creation_date": 1437604776, "question_id": 31575266, "link": "https://stackoverflow.com/questions/31575266/3d-convex-hulls-cgalhalfspace-intersection-3-with-exact-constructions-kernel", "title": "3D Convex Hulls CGAL::halfspace_intersection_3 with exact_constructions kernel", "body": "<p>I'd want to use the CGAL Exact_predicates_exact_constructions_kernel with the 3D Convex Hulls function CGAL::halfspace_intersection_3 (CGAL Vers. 4.6.1), this is my simple test:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>#include \"CGAL/Exact_predicates_exact_constructions_kernel.h\"\n#include \"CGAL/Convex_hull_3/dual/halfspace_intersection_3.h\"\n\ntypedef CGAL::Exact_predicates_exact_constructions_kernel  K;\ntypedef K::Plane_3                                         Plane;\ntypedef K::Point_3                                         Point;\ntypedef CGAL::Polyhedron_3&lt;K&gt;                              Polyhedron_3;\n\nint main (void) {\n\n    std::list&lt;Plane&gt; planes;\n    Polyhedron_3 P;\n\n    CGAL::halfspace_intersection_3(planes.begin(),\n                                   planes.end(),\n                                   P,\n                                   boost::make_optional(Point(0, 0, 0)) );\n\n    return 0;\n}\n</code></pre>\n\n<p>but I get this error on compilation:</p>\n\n<pre><code>In file included from /CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/halfspace_intersection_3.h:27:0,\n                 from /test/halfspace_intersection_3.cpp:2:\n/CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/Convex_hull_traits_dual_3.h: In instantiation of \u2018class CGAL::Convex_hull_3::Convex_hull_filtered_traits_dual_3&lt;CGAL::Epeck&gt;\u2019:\n/CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/Convex_hull_traits_dual_3.h:266:15:   required from \u2018class CGAL::Convex_hull_3::Convex_hull_traits_dual_3&lt;CGAL::Epeck, true&gt;\u2019\n/CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/halfspace_intersection_3.h:259:32:   required from \u2018void CGAL::halfspace_intersection_3(PlaneIterator, PlaneIterator, Polyhedron&amp;, const boost::optional&lt;typename Polyhedron::Vertex::Point_3&gt;&amp;) [with PlaneIterator = std::_List_iterator&lt;CGAL::Plane_3&lt;CGAL::Epeck&gt; &gt;; Polyhedron = CGAL::Polyhedron_3&lt;CGAL::Epeck&gt;; typename Polyhedron::Vertex::Point_3 = CGAL::Point_3&lt;CGAL::Epeck&gt;]\u2019\n/test/halfspace_intersection_3.cpp:18:73:   required from here\n/CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/Convex_hull_traits_dual_3.h:193:21: error: no type named \u2018Exact_kernel_rt\u2019 in \u2018class CGAL::Epeck\u2019\n                     Exact_traits;\n                     ^\n/CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/Convex_hull_traits_dual_3.h:201:21: error: no type named \u2018Exact_kernel_rt\u2019 in \u2018class CGAL::Epeck\u2019\n                     Converter_exact_dual;\n                     ^\n/CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/Convex_hull_traits_dual_3.h:210:45: error: no type named \u2018Exact_kernel_rt\u2019 in \u2018class CGAL::Epeck\u2019\n                     Converter_approx_dual &gt; Equal_3;\n                                             ^\n/CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/Convex_hull_traits_dual_3.h:216:45: error: no type named \u2018Exact_kernel_rt\u2019 in \u2018class CGAL::Epeck\u2019\n                     Converter_approx_dual &gt; Collinear_3;\n                                             ^\n/CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/Convex_hull_traits_dual_3.h:222:45: error: no type named \u2018Exact_kernel_rt\u2019 in \u2018class CGAL::Epeck\u2019\n                     Converter_approx_dual &gt; Coplanar_3;\n                                             ^\n/CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/Convex_hull_traits_dual_3.h:228:45: error: no type named \u2018Exact_kernel_rt\u2019 in \u2018class CGAL::Epeck\u2019\n                     Converter_approx_dual &gt; Less_distance_to_point_3;\n                                             ^\n/CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/Convex_hull_traits_dual_3.h:234:45: error: no type named \u2018Exact_kernel_rt\u2019 in \u2018class CGAL::Epeck\u2019\n                     Converter_approx_dual &gt; Has_on_positive_side_3;\n                                             ^\n/CGAL-4.6.1/include/CGAL/Convex_hull_3/dual/Convex_hull_traits_dual_3.h:240:45: error: no type named \u2018Exact_kernel_rt\u2019 in \u2018class CGAL::Epeck\u2019\n                     Converter_approx_dual &gt; Less_signed_distance_to_plane_3;\n                                             ^\nmake[2]: *** [CMakeFiles/TestCGAL.dir/halfspace_intersection_3.cpp.o] Error 1\n</code></pre>\n\n<p>Is it possible to use the exact constructions kernel with 3D Convex Hulls CGAL::halfspace_intersection_3 ? Please could give me a clue about this? Thanks a lot</p>\n"}, {"tags": ["c++", "c", "lua", "ffi", "luajit"], "answers": [{"tags": [], "owner": {"reputation": 13709, "user_id": 63791, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/7XiDt.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/63791/alex"}, "is_accepted": true, "score": 6, "last_activity_date": 1437605596, "creation_date": 1437605596, "answer_id": 31575388, "question_id": 31575216, "link": "https://stackoverflow.com/questions/31575216/luajit-ffi-cdef-doesnt-understand-class/31575388#31575388", "title": "LuaJIT FFI cdef doesn&#39;t understand &#39;class&#39;?", "body": "<p><code>class</code> is a C++ keyword. It doesn't exist in C. LuaJIT expects C code, not C++ code in the FFI block.</p>\n\n<p>As for how to work around this, it depends on what you're doing. Either you make that a C <code>struct</code>, or you find a different way to access it.</p>\n"}], "owner": {"reputation": 345, "user_id": 2030964, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/I3DrJ.jpg?s=128&g=1", "display_name": "theman", "link": "https://stackoverflow.com/users/2030964/theman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 0, "accepted_answer_id": 31575388, "answer_count": 1, "score": -1, "last_activity_date": 1437605596, "creation_date": 1437604529, "question_id": 31575216, "link": "https://stackoverflow.com/questions/31575216/luajit-ffi-cdef-doesnt-understand-class", "title": "LuaJIT FFI cdef doesn&#39;t understand &#39;class&#39;?", "body": "<pre><code>class Myuser * MyClient_GetMyUser(AUser aUser);\n</code></pre>\n\n<p>This is the error for trying to declare that function with ffi.cdef:</p>\n\n<pre><code>Error: dllImport.lua:861: declaration specifier expected near 'class' at line 20\n</code></pre>\n\n<p>How is this possible? How would I go about declaring 'class' if I must do so within cdef?</p>\n"}, {"tags": ["c++", "new-operator"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1437604713, "post_id": 31575140, "comment_id": 51105330, "body": "Uniqueness issues might (might) precent reuse of the same page, which would mean ~4k of memory space per zero byte allocation... or, we could instead allocate an &#39;unused&#39; page, then a set of pages where we use each address for a distinct array, and follow it with another empty guard page.  However, this all seems over engineering for something not often used, no?"}, {"owner": {"reputation": 283, "user_id": 625687, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4bc5835681011b023fe7932149d8c93b?s=128&d=identicon&r=PG", "display_name": "Alexander Riccio", "link": "https://stackoverflow.com/users/625687/alexander-riccio"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1437605556, "post_id": 31575140, "comment_id": 51105600, "body": "Over engineering? We&#39;re talking about <i>implementation of dynamic memory allocation</i>, which is used by nearly every part of a program! Surely, a bit of extra engineering is worth it here? Unless you&#39;re talking about complexity/performance - yes this <i>is</i> another code path to test, a bit of additional complexity, and a bit more code in a very hot function."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1437605798, "post_id": 31575140, "comment_id": 51105684, "body": "I think @Yakk meant that zero element arrays are not often used.  Which I tend to agree with."}, {"owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 0, "creation_date": 1437606050, "post_id": 31575140, "comment_id": 51105744, "body": "What is a fundamental difference between accessing an element at index <code>0</code> for <code>0</code>-size array and an element at index <code>1</code> for 1-size array? Why would we do special allocation in the first case?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 0, "creation_date": 1437608690, "post_id": 31575140, "comment_id": 51106424, "body": "@AlexD in fact, debugging heaps that stuff every allocation at the end of a page with a protected page afterwards to catch &quot;off-by-one&quot; errors are a neat trick that is used in real tool chains (I saw a talk by ... ubisoft Montreal guy mayhap?).  The equivalent for zero sized arrays costs you a page per allocation."}, {"owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1437609184, "post_id": 31575140, "comment_id": 51106559, "body": "@Yakk Nice :). But again, how is it worse than to allocate a page for <code>new[1]</code> or <code>new [2]</code>? All in all, it seems to me that <code>new[0]</code> is rather a <i>particular case</i> of <code>new[...]</code>, which does not justify special handling. I think it is close to what you said in the first comment, correct?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 0, "creation_date": 1437610277, "post_id": 31575140, "comment_id": 51106802, "body": "@AlexD well, <code>new char[1]</code> has ~400000% overhead under this system.  <code>new char[0]</code> would have infinite% overhead!  ;)  But yes, I&#39;d say that special handing wouldn&#39;t be all that warrented here.  Zero sized <code>new</code> just isn&#39;t common enough.  I could see being lazy in that it might sometimes hit the edge of a page, and dereferencing might break things, but putting effort into it seems a waste."}, {"owner": {"reputation": 283, "user_id": 625687, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4bc5835681011b023fe7932149d8c93b?s=128&d=identicon&r=PG", "display_name": "Alexander Riccio", "link": "https://stackoverflow.com/users/625687/alexander-riccio"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1437618551, "post_id": 31575140, "comment_id": 51108788, "body": "@Yakk Application Verifier uses that trick (in &quot;full page&quot; heap) to detect buffer overruns."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1497910012, "post_id": 31575140, "comment_id": 76267361, "body": "Related, see <a href=\"http://www.openwall.com/lists/oss-security/2017/06/19/1\" rel=\"nofollow noreferrer\">Qualys Security Advisory - The Stack Clash</a> on OSS-Security mailing list. Its shows off some neat tricks, and its pretty damning of the guard page. Its amazing how many OS&#39;es they took down with it."}], "answers": [{"comments": [{"owner": {"reputation": 782, "user_id": 5145654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRw4q.jpg?s=128&g=1", "display_name": "AaronI", "link": "https://stackoverflow.com/users/5145654/aaroni"}, "reply_to_user": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 0, "creation_date": 1437610958, "post_id": 31575766, "comment_id": 51106961, "body": "You are right - I found the relevant section in the standard (basic.stc.dynamic.allocation) and updated the answer."}], "tags": [], "owner": {"reputation": 782, "user_id": 5145654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRw4q.jpg?s=128&g=1", "display_name": "AaronI", "link": "https://stackoverflow.com/users/5145654/aaroni"}, "is_accepted": true, "score": 4, "last_activity_date": 1437610917, "last_edit_date": 1437610917, "creation_date": 1437607940, "answer_id": 31575766, "question_id": 31575140, "link": "https://stackoverflow.com/questions/31575140/do-any-implementations-of-operator-new-return-a-pointer-to-a-guard-page-for-zero/31575766#31575766", "title": "Do any implementations of operator new return a pointer to a guard page for zero-size arrays?", "body": "<p>I looked at the (draft) standard and I couldn't find anything that explicitly prohibits this. I would guess that the answer is \"no\", though. This is why:</p>\n\n<ul>\n<li>As you say, new is required to return a non-null pointer.</li>\n<li>Further, whatever it returns must be safe to pass to delete.</li>\n<li>So a \"random value\" won't work because it will break delete.</li>\n<li>It's also required to return different values for each call (at least until they are deleted) - see the C++ standard section basic.stc.dynamic.allocation.</li>\n<li>At this point only one option remains: return \"fake  pointers\" which are somehow recognizable by delete as \"fake pointers\".</li>\n</ul>\n\n<p>One possible implementation could be done by reserving a range of unpaged memory, and every time someone calls new int[0] it could return a different address in that range (easy to do if the allocator keeps a global counter or something like that).</p>\n\n<p>On the plus side, you will gain the ability to immediately detect dereferences on this type of pointer. On the other hand, you will lose the ability to detect double-frees because delete on your pointer effectively becomes a no op, and you will make new and delete more complex and slower for all the normal cases.</p>\n\n<p>So because it's tricky to do, and the cons outweigh the pros, I'm pretty confident that nobody does that.</p>\n\n<p>gcc on linux just allocates a small amount of memory and returns that. I believe that this is pretty much a standard way to do this.</p>\n"}, {"tags": [], "owner": {"reputation": 3364, "user_id": 693294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5935d56f077497b60c12cf86b9d2e1?s=128&d=identicon&r=PG", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/693294/gilbert"}, "is_accepted": false, "score": 2, "last_activity_date": 1437949245, "last_edit_date": 1437949245, "creation_date": 1437610748, "answer_id": 31576143, "question_id": 31575140, "link": "https://stackoverflow.com/questions/31575140/do-any-implementations-of-operator-new-return-a-pointer-to-a-guard-page-for-zero/31576143#31576143", "title": "Do any implementations of operator new return a pointer to a guard page for zero-size arrays?", "body": "<p>To track how much memory needs to be released most allocators I've looked within or wrote look something like:</p>\n\n<pre> void *malloc_example( size_t bytes ) {\n     size_t *ret = get_memory(bytes + sizeof size_t);   /* find free memory */\n     *ret = bytes;                /* remember size of allocated area */\n     return (void *)( ret + 1 );\n }</pre>\n\n<p>So when you allocate zero-length blocks you actually get a sneaky word ahead of the address returned to you. This also assures each allocation is assigned a unique address. This is important and pointing to dedicated guard memory for zero-length blocks is more of a waste as each free must test for what my experience says is a rare condition.</p>\n\n<p>Some debugging allocators include additional overhead to catch double-frees, memory leaks, guard words to catch overflow of previous buffers, etc. Also, pointing to some magic memory can make such debugging more difficult to do.</p>\n"}], "owner": {"reputation": 283, "user_id": 625687, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4bc5835681011b023fe7932149d8c93b?s=128&d=identicon&r=PG", "display_name": "Alexander Riccio", "link": "https://stackoverflow.com/users/625687/alexander-riccio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 1, "accepted_answer_id": 31575766, "answer_count": 2, "score": 8, "last_activity_date": 1437949245, "creation_date": 1437604078, "last_edit_date": 1495539841, "question_id": 31575140, "link": "https://stackoverflow.com/questions/31575140/do-any-implementations-of-operator-new-return-a-pointer-to-a-guard-page-for-zero", "title": "Do any implementations of operator new return a pointer to a guard page for zero-size arrays?", "body": "<p>Related to: <a href=\"https://stackoverflow.com/a/1087066/625687\">C++ new int[0] -- will it allocate memory?</a></p>\n\n<p>The standard says, in 5.3.4/7:</p>\n\n<blockquote>\n  <p>When the value of the expression in a direct-new-declarator is zero, the allocation function is called to allocate an array with no elements.</p>\n</blockquote>\n\n<p>...and, in 3.7.3.1/2:</p>\n\n<blockquote>\n  <p>The effect of dereferencing a pointer returned as a request for zero size is undefined.</p>\n</blockquote>\n\n<p>...yet, the pointer can't be a null pointer.</p>\n\n<p>Since actually dereferencing the pointer is undefined behavior, does any implementation return a pointer to a guard page? I imagine that it'd be easy, and help detect bugs/improve security.</p>\n"}, {"tags": ["c++", "c++11", "timestamp", "chrono", "uint64"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1437610019, "post_id": 31575061, "comment_id": 51106736, "body": "so, your <code>while</code> loop condition consists of 8 operators and a function call.  And it involves magic numbers.  Complex code that works is marginally ok: complex code that doesn&#39;t work should be made less complex.  (and no, I don&#39;t care if that particular line works, its existence detracts from debugging the rest of the nearby code).  I don&#39;t see where you set <code>getTimeStamp</code>&#39;s data -- what epoch is it using, and how do you know it is the same one as the clock you are using?"}], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 5109415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71095355ca4d676490190a07b34b4a5?s=128&d=identicon&r=PG", "display_name": "hdastwb", "link": "https://stackoverflow.com/users/5109415/hdastwb"}, "is_accepted": true, "score": -1, "last_activity_date": 1437613453, "creation_date": 1437613453, "answer_id": 31576539, "question_id": 31575061, "link": "https://stackoverflow.com/questions/31575061/how-to-convert-stdchronotime-point-to-uint64-t/31576539#31576539", "title": "How to convert std::chrono::time_point to uint64_t?", "body": "<p>Actually, I would suggest going more in the direction of solution A and converting the rest of your <code>uint64_t</code> times into time_points: the <code>chrono</code> unit system is pretty useful. I would start by defining a helper function to convert from the <code>uint64_t</code> timestamps on your objects to time_points:</p>\n\n<pre><code>using u64_millis = duration&lt;uint64_t, milli&gt;;\nstatic time_point&lt;system_clock, u64_millis&gt; u64_to_time(uint64_t timestamp) {\n    return time_point&lt;system_clock, u64_millis&gt;{u64_millis{timestamp}};\n}\n</code></pre>\n\n<p>if your epoch is different than the one for <code>system_clock</code>, this would be the place to fix it. It would probably also work to use <code>milliseconds</code> instead of <code>u64_millis</code>, but the representation type for <code>milliseconds</code> isn't explicitly defined and doing it the above way ensures that the types match up correctly.</p>\n\n<p>Now, the code that you posted becomes something like:</p>\n\n<pre><code>auto now = system_clock::now();\nbool is_old = now - u64_to_time(data_holder-&gt;getTimestamp()) &gt; minutes{2};\n\nauto value = now;\nwhile (now - u64_to_time(data_holder-&gt;getTimestamp()) &lt; seconds{80}\n        &amp;&amp; now - value &lt; seconds{80}) {\n    this_thread::sleep_for(milliseconds{100});\n    now = system_clock::now();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1437615054, "creation_date": 1437615054, "answer_id": 31576742, "question_id": 31575061, "link": "https://stackoverflow.com/questions/31575061/how-to-convert-stdchronotime-point-to-uint64-t/31576742#31576742", "title": "How to convert std::chrono::time_point to uint64_t?", "body": "<p>At least as I read it, this is sleeping 100 ms at a time, then checking whether it's slept for 2 minutes yet. Then repeating until it reaches the 2 minute point.</p>\n\n<p>It seems to me like it makes a lot more sense to compute the desired time, and sleep until then:</p>\n\n<pre><code>struct foo { \n    time_point&lt;system_clock&gt; time_stamp;\n\n    time_point&lt;system_clock&gt; get_timestamp() { return time_stamp; }\n    foo() : time_stamp(system_clock::now()) {}\n};\n\n// ...    \nfoo f;\n\nstd::this_thread::sleep_until(f.get_timestamp() + 2m);\n</code></pre>\n\n<p>This does use the (new in C++14) user defined literal to construct a duration of 2 minutes. If you really need to support an older (C++11) compiler, you'll need to use <code>minutes(2)</code> instead.</p>\n\n<p>As far as the title question goes, I'd say: just say no. Far better to store your time_points as actual time_points than insist on stuffing them into integers, then turn them back into time_points when you need to use them again. It's not at all apparent that this accomplishes anything useful in exchange for the pain.</p>\n"}], "owner": {"reputation": 3782, "user_id": 1950349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b390c1bb809c1c2f89b554fcfa64822?s=128&d=identicon&r=PG", "display_name": "user1950349", "link": "https://stackoverflow.com/users/1950349/user1950349"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6106, "favorite_count": 1, "accepted_answer_id": 31576539, "answer_count": 2, "score": 0, "last_activity_date": 1437615054, "creation_date": 1437603690, "last_edit_date": 1437607253, "question_id": 31575061, "link": "https://stackoverflow.com/questions/31575061/how-to-convert-stdchronotime-point-to-uint64-t", "title": "How to convert std::chrono::time_point to uint64_t?", "body": "<p>I am trying to see whether my data is 120 second (or 2 minutes) old or not by looking at the timestamp of the data so I have below code as I am using <code>chrono</code> package in C++:</p>\n\n<pre><code>uint64_t now = duration_cast&lt;milliseconds&gt;(steady_clock::now().time_since_epoch()).count();\n// check for 2 minutes old data\nbool is_old = (120 * 1000 &lt; (now - data_holder-&gt;getTimestamp()));   \n\nuint64_t value = now;\nwhile (now &lt; data_holder-&gt;getTimestamp() + 80 * 1000 \n        &amp;&amp; now &lt; value + 80 * 1000) {\n    std::this_thread::sleep_for(std::chrono::milliseconds(100));\n    now = duration_cast&lt;milliseconds&gt;(steady_clock::now().time_since_epoch()).count();\n}\n</code></pre>\n\n<p>In the above code <code>data_holder-&gt;getTimestamp()</code> is uint64_t which returns timestamp in milliseconds. </p>\n\n<p>Now when I print out <code>now</code> variable value, I see this <code>10011360</code> and when I print out <code>data_holder-&gt;getTimestamp()</code> value which is <code>1437520382241</code> </p>\n\n<pre><code>2015-07-21 16:13:02,530 WARN 0x7f35312d1700 data_check - now value: 10011360 , data holder timestamp: 1437520382241\n</code></pre>\n\n<p>And from the above data holder timestamp, it doesn't look to be 120 second old data right so I feel something is wrong in my code? Since if I convert that data holder timestamp to actual time (using epoch converter) and then compare it with logs time as shown above it is almost same.</p>\n\n<p>So I decided to use <code>system_clock</code> instead of <code>steady_clock</code> and came up with below code in which I started to use <code>auto</code> instead of <code>uint64_t</code>.</p>\n\n<p><strong>Solution A:</strong></p>\n\n<pre><code>auto now = system_clock::now();\nauto dh_ts = system_clock::time_point{milliseconds{data_holder-&gt;getTimestamp()}};\nbool is_old = (minutes{2} &lt; (now - dh_ts));\n</code></pre>\n\n<p>Earlier, I was using <code>now</code> variable value as <code>uint64_t</code> instead of <code>auto</code>. Now after the above code, I have something like this in my original code since <code>now</code> is not <code>uint64_t</code> so I am getting compilation error while compiling the code.</p>\n\n<pre><code>uint64_t value = now;\nwhile (now &lt; data_holder-&gt;getTimestamp() + 80 * 1000 \n        &amp;&amp; now &lt; value + 80 * 1000) {\n    std::this_thread::sleep_for(std::chrono::milliseconds(100));\n    now = duration_cast&lt;milliseconds&gt;(steady_clock::now().time_since_epoch()).count();\n}\n</code></pre>\n\n<p>What is the right way to fix this? I cannot change <code>data_holder-&gt;getTimestamp()</code> data type, it has to be <code>uint64_t</code> since other code is also using it.</p>\n\n<p>Here is the error:</p>\n\n<pre><code>error: cannot convert std::chrono::time_point&lt;std::chrono::_V2::system_clock, std::chrono::duration&lt;long int, std::ratio&lt;1l, 1000000000l&gt; &gt; &gt;\u00e2 to \u00e2uint64_t {aka long unsigned int}\u00e2 in initialization\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Can I use like this instead of using <code>Solution A</code> if everything looks good below?</p>\n\n<p><strong>Solution B:</strong></p>\n\n<pre><code>uint64_t now = duration_cast&lt;milliseconds&gt;(system_clock::now().time_since_epoch()).count();\nbool is_old = (120 * 1000 &lt; (now - data_holder-&gt;getTimestamp()));\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1437603303, "post_id": 31574957, "comment_id": 51104746, "body": "<code>p</code> is a pointer. <code>arr</code> is an array. Plenty of duplicates out there."}], "answers": [{"comments": [{"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437603968, "post_id": 31575054, "comment_id": 51105023, "body": "If the array is accepted by reference then it doesn&#39;t decay, and it basically works as it should."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1437604137, "post_id": 31575054, "comment_id": 51105099, "body": "&quot;decay&quot; is irrelevant. The function parameter is a pointer. It doesn&#39;t matter <i>what</i> happens to whatever is passed as argument."}], "tags": [], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "is_accepted": false, "score": 3, "last_activity_date": 1437603909, "last_edit_date": 1437603909, "creation_date": 1437603673, "answer_id": 31575054, "question_id": 31574957, "link": "https://stackoverflow.com/questions/31574957/why-does-this-yield-different-values-on-using-sizeof-operator/31575054#31575054", "title": "Why does this yield different values on using sizeof operator?", "body": "<p>In your code, <code>p</code> is defined as a pointer, so <code>sizeof(p)</code> is the same as <code>sizeof(int*)</code>, with is 4 on 32bit systems and 8 on 64bit systems.</p>\n\n<p>In the second case, <code>arr</code> is a static array, so <code>sizeof(arr)</code> is the same as <code>sizeof(int[5])</code> which returns <code>5*sizeof(int)</code>, assuming there's no padding or other complex work happening \"under the hood\".</p>\n\n<p>Note that when you pass an array name as an argument to a function which accepts a pointer as a formal function parameter, the array \"decays\" to a pointer, so calling <code>sizeof</code> on an argument yields behavior you likely did not expect. For example:</p>\n\n<hr>\n\n<p><strong>Code Listing</strong></p>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid printSize(int* arg);\n\nint main(void)\n{\n    int *p;\n    int arr[10];\n    printf(\"sizeof p:%d\\n\", sizeof(p));\n    printf(\"sizeof arr:%d\\n\", sizeof(arr));\n    printSize(p);\n    printSize(arr);\n\n    return 0;\n}\n\nvoid printSize(int* arg)\n{\n    printf(\"sizeof arg:%d\\n\", sizeof(arg));\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Sample Output</strong></p>\n\n<hr>\n\n<pre><code>sizeof p:8\nsizeof arr:40\nsizeof arg:8\nsizeof arg:8\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "is_accepted": false, "score": 3, "last_activity_date": 1437603937, "last_edit_date": 1437603937, "creation_date": 1437603686, "answer_id": 31575059, "question_id": 31574957, "link": "https://stackoverflow.com/questions/31574957/why-does-this-yield-different-values-on-using-sizeof-operator/31575059#31575059", "title": "Why does this yield different values on using sizeof operator?", "body": "<p>When you say <code>int *p = new int(40);</code> you are actually allocating space for a <em>single</em> integer and filling that space with the integer <code>40</code>. If you want an array of 40 integers, you should use square brackets:</p>\n\n<pre><code>int *p = new int[40];\n</code></pre>\n\n<p>So, to answer question #1: neither. The space allocated is the size of one <code>int</code> on your system.</p>\n\n<p>To answer question #2: the first line of output is the size of a single pointer on your system (because <code>p</code> is just a pointer). This will probably be the same as the size of an <code>int</code>, which is likely 4 bytes. The second line of output will be the total allocation size of your array of integers, so it will be <code>40*sizeof(int)</code>, or <code>160</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 1, "last_activity_date": 1437603915, "creation_date": 1437603915, "answer_id": 31575110, "question_id": 31574957, "link": "https://stackoverflow.com/questions/31574957/why-does-this-yield-different-values-on-using-sizeof-operator/31575110#31575110", "title": "Why does this yield different values on using sizeof operator?", "body": "<p>Your two uses of <code>sizeof</code> are querying the size of the types <code>int*</code> and <code>int[5]</code> respectively.</p>\n\n<p>(also, you have a bug and meant <code>new int[40]</code>, not <code>new int(40)</code>, but that doesn't affect the results of <code>sizeof</code>)</p>\n"}], "owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1437680798, "answer_count": 3, "score": -2, "last_activity_date": 1437603937, "creation_date": 1437603257, "question_id": 31574957, "link": "https://stackoverflow.com/questions/31574957/why-does-this-yield-different-values-on-using-sizeof-operator", "closed_reason": "Duplicate", "title": "Why does this yield different values on using sizeof operator?", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main (void)\n{\n    int * p = new int(40);  // here `p` points to an array having space for 40 ints or space allocated is 40 bytes?\n    for (int i = 0; i &lt; 2; i++)\n        cin&gt;&gt;p[i];\n    cout&lt;&lt;sizeof(p)&lt;&lt;\"\\n\";   // here, the output should be size of array since p points to an array\n    int arr[5] = {1,2,3,4,5}; // since, here it will output 20 (space allocated for the entire array)\n    cout&lt;&lt;sizeof(arr)&lt;&lt;\"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>So, I have two questions (the first two comments in the program)</p>\n\n<ol>\n<li><p>Here <code>p</code> points to an array having space for 40 ints or space allocated is 40 bytes?</p></li>\n<li><p>Here, the output should be size of array since <code>p</code> points to an array because technically speaking, <code>arr</code> is also a pointer and when we do <code>*arr</code> it references to the first element of the array. </p></li>\n</ol>\n"}, {"tags": ["c++", "gcc", "linker", "apache-traffic-server"], "answers": [{"comments": [{"owner": {"reputation": 265, "user_id": 5041403, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hzwz_jtJsmY/AAAAAAAAAAI/AAAAAAAAAP4/SsldU1VCw8k/photo.jpg?sz=128", "display_name": "Leif Hedstrom", "link": "https://stackoverflow.com/users/5041403/leif-hedstrom"}, "reply_to_user": {"reputation": 3, "user_id": 5145628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/083856e424bc0f978b2c7ae4174b9dac?s=128&d=identicon&r=PG&f=1", "display_name": "Divanshu Arneja", "link": "https://stackoverflow.com/users/5145628/divanshu-arneja"}, "edited": false, "score": 0, "creation_date": 1437670670, "post_id": 31582086, "comment_id": 51139152, "body": "I have no idea what you are doing, you must have found it before if you tried to compile it as above (which wouldn&#39;t work). It&#39;s built as part of the standard build if you do      ./configure --enable-example-plugins"}], "tags": [], "owner": {"reputation": 265, "user_id": 5041403, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hzwz_jtJsmY/AAAAAAAAAAI/AAAAAAAAAP4/SsldU1VCw8k/photo.jpg?sz=128", "display_name": "Leif Hedstrom", "link": "https://stackoverflow.com/users/5041403/leif-hedstrom"}, "is_accepted": true, "score": 1, "last_activity_date": 1437640274, "creation_date": 1437640274, "answer_id": 31582086, "question_id": 31574926, "link": "https://stackoverflow.com/questions/31574926/unable-to-compile-bnull-transform-c-apache-traffic-server/31582086#31582086", "title": "Unable to compile bnull-transform.c - Apache Traffic Server", "body": "<p>You are trying to compile this plugin (which is a .so) as a standalone app. That won't work. You should use the tsxs script that comes with your ATS installation, e.g.</p>\n\n<pre><code>tsxs -o null-transform.so null-transform.cc\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5145628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/083856e424bc0f978b2c7ae4174b9dac?s=128&d=identicon&r=PG&f=1", "display_name": "Divanshu Arneja", "link": "https://stackoverflow.com/users/5145628/divanshu-arneja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "closed_date": 1437679948, "accepted_answer_id": 31582086, "answer_count": 1, "score": 0, "last_activity_date": 1437640274, "creation_date": 1437603122, "question_id": 31574926, "link": "https://stackoverflow.com/questions/31574926/unable-to-compile-bnull-transform-c-apache-traffic-server", "closed_reason": "Duplicate", "title": "Unable to compile bnull-transform.c - Apache Traffic Server", "body": "<p>I am trying to run bnull-transform example of Apache traffic server. After a making few changes which are not present on github version of the code, I was finally able to resolve the errors. But when I compile it using gcc I am getting the below errors - </p>\n\n<p>/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64/crt1.o: In function <code>_start':\n(.text+0x20): undefined reference to</code>main'\n/tmp/cc5gVORu.o: In function <code>my_data_alloc':\nbnull-transform.c:(.text+0x13): undefined reference to</code>_TSmalloc'\n/tmp/cc5gVORu.o: In function <code>my_data_destroy':\nbnull-transform.c:(.text+0x7b): undefined reference to</code>TSIOBufferDestroy'\nbnull-transform.c:(.text+0x87): undefined reference to <code>_TSfree'\n/tmp/cc5gVORu.o: In function</code>handle_buffering':\nbnull-transform.c:(.text+0xa8): undefined reference to <code>TSVConnWriteVIOGet'\nbnull-transform.c:(.text+0xbe): undefined reference to</code>TSIOBufferCreate'\nbnull-transform.c:(.text+0xe7): undefined reference to <code>_TSAssert'\nbnull-transform.c:(.text+0xf9): undefined reference to</code>TSIOBufferReaderAlloc'\nbnull-transform.c:(.text+0x122): undefined reference to <code>_TSAssert'\nbnull-transform.c:(.text+0x130): undefined reference to</code>TSVIOBufferGet'\nbnull-transform.c:(.text+0x155): undefined reference to <code>TSVIONTodoGet'\nbnull-transform.c:(.text+0x16e): undefined reference to</code>TSVIOReaderGet'\nbnull-transform.c:(.text+0x176): undefined reference to <code>TSIOBufferReaderAvail'\nbnull-transform.c:(.text+0x19f): undefined reference to</code>TSVIOReaderGet'\nbnull-transform.c:(.text+0x1bd): undefined reference to <code>TSIOBufferCopy'\nbnull-transform.c:(.text+0x1cf): undefined reference to</code>TSVIOReaderGet'\nbnull-transform.c:(.text+0x1da): undefined reference to <code>TSIOBufferReaderConsume'\nbnull-transform.c:(.text+0x1e6): undefined reference to</code>TSVIONDoneGet'\nbnull-transform.c:(.text+0x1ff): undefined reference to <code>TSVIONDoneSet'\nbnull-transform.c:(.text+0x20b): undefined reference to</code>TSVIONTodoGet'\nbnull-transform.c:(.text+0x222): undefined reference to <code>TSVIOContGet'\nbnull-transform.c:(.text+0x233): undefined reference to</code>TSContCall'\nbnull-transform.c:(.text+0x24b): undefined reference to <code>TSVIOContGet'\nbnull-transform.c:(.text+0x25c): undefined reference to</code>TSContCall'\n/tmp/cc5gVORu.o: In function <code>handle_output':\nbnull-transform.c:(.text+0x294): undefined reference to</code>TSTransformOutputVConnGet'\nbnull-transform.c:(.text+0x2a8): undefined reference to <code>TSIOBufferReaderAvail'\nbnull-transform.c:(.text+0x2c6): undefined reference to</code>TSVConnWrite'\nbnull-transform.c:(.text+0x2ef): undefined reference to <code>_TSAssert'\n/tmp/cc5gVORu.o: In function</code>handle_transform':\nbnull-transform.c:(.text+0x315): undefined reference to <code>TSContDataGet'\nbnull-transform.c:(.text+0x341): undefined reference to</code>TSContDataSet'\n/tmp/cc5gVORu.o: In function <code>bnull_transform':\nbnull-transform.c:(.text+0x3b0): undefined reference to</code>TSVConnClosedGet'\nbnull-transform.c:(.text+0x3c0): undefined reference to <code>TSContDataGet'\nbnull-transform.c:(.text+0x3d4): undefined reference to</code>TSContDestroy'\nbnull-transform.c:(.text+0x3f1): undefined reference to <code>TSVConnWriteVIOGet'\nbnull-transform.c:(.text+0x401): undefined reference to</code>TSVIOContGet'\nbnull-transform.c:(.text+0x412): undefined reference to <code>TSContCall'\nbnull-transform.c:(.text+0x420): undefined reference to</code>TSTransformOutputVConnGet'\nbnull-transform.c:(.text+0x432): undefined reference to <code>TSVConnShutdown'\n/tmp/cc5gVORu.o: In function</code>transformable':\nbnull-transform.c:(.text+0x46a): undefined reference to <code>TSHttpTxnServerRespGet'\nbnull-transform.c:(.text+0x47d): undefined reference to</code>TSHttpHdrStatusGet'\nbnull-transform.c:(.text+0x49b): undefined reference to <code>TS_NULL_MLOC'\nbnull-transform.c:(.text+0x4aa): undefined reference to</code>TSHandleMLocRelease'\nbnull-transform.c:(.text+0x4be): undefined reference to <code>TSError'\n/tmp/cc5gVORu.o: In function</code>transform_add':\nbnull-transform.c:(.text+0x4e0): undefined reference to <code>TSTransformCreate'\nbnull-transform.c:(.text+0x4f9): undefined reference to</code>TSHttpTxnHookAdd'\n/tmp/cc5gVORu.o: In function <code>transform_plugin':\nbnull-transform.c:(.text+0x54e): undefined reference to</code>TSHttpTxnReenable'\n/tmp/cc5gVORu.o: In function <code>TSPluginInit':\nbnull-transform.c:(.text+0x59c): undefined reference to</code>TSPluginRegister'\nbnull-transform.c:(.text+0x5af): undefined reference to <code>TSError'\nbnull-transform.c:(.text+0x5bf): undefined reference to</code>TSError'\nbnull-transform.c:(.text+0x5d2): undefined reference to <code>TSContCreate'\nbnull-transform.c:(.text+0x5df): undefined reference to</code>TSHttpHookAdd'\ncollect2: ld returned 1 exit status</p>\n\n<p>Please help.</p>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 12849, "user_id": 1218281, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a7d7e9fa2049d4dbf9a508e5eccdb0a?s=128&d=identicon&r=PG", "display_name": "Cyral", "link": "https://stackoverflow.com/users/1218281/cyral"}, "edited": false, "score": 0, "creation_date": 1437603157, "post_id": 31574900, "comment_id": 51104682, "body": "It sounds like you added the Modbus .dll to your references correctly. What is the namespace of Modbus class you want to use?"}, {"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1437604534, "post_id": 31574900, "comment_id": 51105268, "body": "I don&#39;t think the space is valid, namespace names cannot have spaces in them."}], "answers": [{"tags": [], "owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "is_accepted": false, "score": 1, "last_activity_date": 1437607697, "creation_date": 1437607697, "answer_id": 31575722, "question_id": 31574900, "link": "https://stackoverflow.com/questions/31574900/need-a-solution-for-c-into-c/31575722#31575722", "title": "Need a solution for c++ into c#", "body": "<p>Is your Modbus Server C++ project generating a managed assembly?  If not, it may be that your Add Reference didn't actually do anything.  In your C# project, if you expand the References node in Solution Explorer, do you see an entry for Modbus Server?  Does that entry have a warning icon superimposed (a small yellow triangle with an exclamation mark)?</p>\n\n<p>If your C++ project is generating native C++ I don't think Add Project Reference will work.   </p>\n\n<p>If Modbus Server is generating a COM object you could use Add Reference and the COM tab to add a reference to the COM object.  But that means you'd have to register the COM object on the system you're doing your build on - either manually by running regsvr32 (or whatever is appropriate for your COM object) or automatically in the Modbus Server project.</p>\n\n<p>If Modbus Server is a regular native C++ DLL (i.e., not a COM object) then you can't access it via Add Reference at all.  </p>\n\n<p>One alternative is <a href=\"https://msdn.microsoft.com/en-us/library/ms235282.aspx\" rel=\"nofollow\">P/Invoke</a> which will let you describe the DLL entry points to C#.  </p>\n\n<p>Another alternative would be to write a <a href=\"https://msdn.microsoft.com/en-us/library/68td296t.aspx\" rel=\"nofollow\">C++/CLI</a> wrapper that calls Modbus Server like any other C++ program would, but which declares .NET methods that can be called from C# to invoke the Modbus Server methods.  Then you can use Add Reference to add the C++/CLI wrapper project to your C# project.</p>\n"}], "owner": {"reputation": 1, "user_id": 5145494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2248d4d7aeb3739895ee6dde9c8be5bf?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Sewell", "link": "https://stackoverflow.com/users/5145494/joshua-sewell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437607697, "creation_date": 1437603027, "question_id": 31574900, "link": "https://stackoverflow.com/questions/31574900/need-a-solution-for-c-into-c", "title": "Need a solution for c++ into c#", "body": "<p>Hope someone can point me in the right direction.</p>\n\n<p>I started a windowsFormApplication in c# called WindowsFormApplication6 (I know, I'm super creative). Now I have a project in c++ (\"Modbus Server\") that I need to load into and run under project WindowsFormApplication6.</p>\n\n<p>So I Googled it. What I found was that I need to load Modbus Server into WindowsFormApp via File, add existing project, and locate and click on the project.</p>\n\n<p>Now upon more googling, I found that I need to add reference to Modbus Server.</p>\n\n<p>So hightlight WindowsFormApp6, then right click it, hit add, then Reference, Solution, Projects, and finally click Modbus Server. </p>\n\n<p>Lastly Google says that in Windows I need to write \"using Modbus Server;\"\nor \"using WindowsFormApplication6.Modbus Server;\"\nbut every time I type \"ModbusServer\" it says \"the type or Namespace Name 'ModbusServer' Could not be found\" (\"are you missing a using directive or an assembly reference?\"). I have also split the word into \"Modbus Server\" which is what I would think, since that is how it's written everywhere else.</p>\n\n<p>So now it looks like this \"using Modbus Server;\" but it keeps saying \"Expected;\"</p>\n\n<p>I have looked over the modbus code, there is no namespace in it (c++)\nis it even possible to do what I want?</p>\n"}, {"tags": ["c++", "class", "header"], "comments": [{"owner": {"reputation": 2163, "user_id": 5085250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/10k8D.jpg?s=128&g=1", "display_name": "havogt", "link": "https://stackoverflow.com/users/5085250/havogt"}, "edited": false, "score": 0, "creation_date": 1437603140, "post_id": 31574891, "comment_id": 51104673, "body": "You mean: what does <code>BBB&lt;CCC&gt; item;</code> mean?"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1437603363, "post_id": 31574891, "comment_id": 51104777, "body": "It looks like class AAA contains a private variable, BBB, which is a template class of type CCC."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4942378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ebc38bef7a15a7f9cb91e604b78f534?s=128&d=identicon&r=PG&f=1", "display_name": "VitalPotion", "link": "https://stackoverflow.com/users/4942378/vitalpotion"}, "edited": false, "score": 0, "creation_date": 1437603488, "post_id": 31574991, "comment_id": 51104829, "body": "Thanks a lot. Then how to initialize it in constructor?"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 35, "user_id": 4942378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ebc38bef7a15a7f9cb91e604b78f534?s=128&d=identicon&r=PG&f=1", "display_name": "VitalPotion", "link": "https://stackoverflow.com/users/4942378/vitalpotion"}, "edited": false, "score": 0, "creation_date": 1437603554, "post_id": 31574991, "comment_id": 51104849, "body": "@VitalPotion <a href=\"http://www.codeproject.com/Articles/257589/An-Idiots-Guide-to-Cplusplus-Templates-Part#ClassTempl\" rel=\"nofollow noreferrer\">codeproject.com/Articles/257589/&hellip;</a>"}, {"owner": {"reputation": 2163, "user_id": 5085250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/10k8D.jpg?s=128&g=1", "display_name": "havogt", "link": "https://stackoverflow.com/users/5085250/havogt"}, "edited": false, "score": 0, "creation_date": 1437603589, "post_id": 31574991, "comment_id": 51104864, "body": "Depends on its constuctor. But it is not different to a non-template class."}], "tags": [], "owner": {"reputation": 4429, "user_id": 3962211, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100001763507125/picture?type=large", "display_name": "Roy Shmuli", "link": "https://stackoverflow.com/users/3962211/roy-shmuli"}, "is_accepted": false, "score": 1, "last_activity_date": 1437603410, "last_edit_date": 1495541216, "creation_date": 1437603410, "answer_id": 31574991, "question_id": 31574891, "link": "https://stackoverflow.com/questions/31574891/please-explain-about-class-instance-in-c/31574991#31574991", "title": "Please explain about class instance in c++", "body": "<p><code>&lt;object&gt;</code> mean genric programing, The object <code>BBB</code> getting class type <code>CCC</code> and it can be used in declaration of functions and variables in class <code>BBB</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/posts/3862556/edit\">More information here.</a></p>\n"}, {"tags": [], "owner": {"reputation": 2163, "user_id": 5085250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/10k8D.jpg?s=128&g=1", "display_name": "havogt", "link": "https://stackoverflow.com/users/5085250/havogt"}, "is_accepted": true, "score": 3, "last_activity_date": 1437603445, "creation_date": 1437603445, "answer_id": 31574997, "question_id": 31574891, "link": "https://stackoverflow.com/questions/31574891/please-explain-about-class-instance-in-c/31574997#31574997", "title": "Please explain about class instance in c++", "body": "<p><code>BBB</code>is a class that takes a template parameter. The template parameter is class <code>CCC</code>. That means <code>item</code> is a private variable of type <code>BBB&lt;CCC&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 4199462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/920c75ef17e199b07c7eebbc8d4201e2?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/4199462/vivek"}, "is_accepted": false, "score": 1, "last_activity_date": 1476388658, "last_edit_date": 1476388658, "creation_date": 1437605329, "answer_id": 31575344, "question_id": 31574891, "link": "https://stackoverflow.com/questions/31574891/please-explain-about-class-instance-in-c/31575344#31575344", "title": "Please explain about class instance in c++", "body": "<p>item is a private member of type BBB&lt; CCC >. BBB&lt; CCC > is a class. BBB is a template class that requires a concrete class or data-type like int or CCC in this case. </p>\n\n<p>BBB is defined as follows:</p>\n\n<pre><code>template &lt;class T&gt; class BBB\n{\n...\n};\n</code></pre>\n\n<p>As an example, item can be initialized in the constructor of class AAA with any object of type BBB, in the following way:-</p>\n\n<pre><code>AAA(BBB&lt;CCC&gt; &amp;bObj) : item(bObj)\n{\n...\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4942378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ebc38bef7a15a7f9cb91e604b78f534?s=128&d=identicon&r=PG&f=1", "display_name": "VitalPotion", "link": "https://stackoverflow.com/users/4942378/vitalpotion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 31574997, "answer_count": 3, "score": -1, "last_activity_date": 1476388658, "creation_date": 1437602996, "question_id": 31574891, "link": "https://stackoverflow.com/questions/31574891/please-explain-about-class-instance-in-c", "title": "Please explain about class instance in c++", "body": "<pre><code>class AAA\n{\nprivate:\n    BBB&lt;CCC&gt; item;\n....}\n</code></pre>\n\n<blockquote>\n  <p>Both BBB and CCC are other classes name of their header files.<p> What\n  does \"BBB&lt; CCC > item;\" means?</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 45276, "user_id": 176922, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/621b61c5445afea7639b4cf6bb7c455a?s=128&d=identicon&r=PG", "display_name": "Benjamin Bannier", "link": "https://stackoverflow.com/users/176922/benjamin-bannier"}, "edited": false, "score": 1, "creation_date": 1437603587, "post_id": 31574883, "comment_id": 51104863, "body": "Can you show a complete example? Right now it is not really clear where your problem lies ... the example line doesn&#39;t show I/O whereas <code>setprecision</code> isn&#39;t related to how something is stored. It might all be some confusion about the concept of floating point on your part as well ..."}], "answers": [{"tags": [], "owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1437603535, "creation_date": 1437603535, "answer_id": 31575021, "question_id": 31574883, "link": "https://stackoverflow.com/questions/31574883/exponential-value-restriction-in-float-variable-in-c/31575021#31575021", "title": "exponential value restriction in Float variable in C++", "body": "<p>You are limited by the type you are using. A single precision float can only represent between 6 and 9 significant decimal digits.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Single-precision_floating-point_format</a></p>\n\n<p>Remember, a float is not a decimal value. So what you're seeing is the decimal representation. If you want more digits in the decimal representation, use a double.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Double-precision_floating-point_format</a></p>\n\n<p>Double precision floats can represent values to 15-17 digits of decimal precision. This should guarantee the minimum of 8 that you require.</p>\n"}, {"tags": [], "owner": {"reputation": 230, "user_id": 1792302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a40f97f46d35e933a4bf42239651a68?s=128&d=identicon&r=PG&f=1", "display_name": "ydobonebi", "link": "https://stackoverflow.com/users/1792302/ydobonebi"}, "is_accepted": false, "score": 0, "last_activity_date": 1437603994, "last_edit_date": 1437603994, "creation_date": 1437603658, "answer_id": 31575050, "question_id": 31574883, "link": "https://stackoverflow.com/questions/31574883/exponential-value-restriction-in-float-variable-in-c/31575050#31575050", "title": "exponential value restriction in Float variable in C++", "body": "<p>The precision and encoding of floating point values is concretely defined by IEEE 754. Without defining your own implementation of of floating points should be stored in memory, you can't really change the internal precision for how it's encoded and stored in memory. </p>\n\n<p>If you want better precision you can use <strong>double</strong>s. All the math functions work well  with doubles.</p>\n"}], "owner": {"reputation": 563, "user_id": 5090901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64321cc0cef8fd93a88151dac9e7e90f?s=128&d=identicon&r=PG&f=1", "display_name": "ruhaib", "link": "https://stackoverflow.com/users/5090901/ruhaib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1437603994, "creation_date": 1437602961, "last_edit_date": 1437603306, "question_id": 31574883, "link": "https://stackoverflow.com/questions/31574883/exponential-value-restriction-in-float-variable-in-c", "title": "exponential value restriction in Float variable in C++", "body": "<p>I want my answer in some precision form but not for input output purposes.</p>\n\n<p><code>float a = cos ( 90*(PI/180))</code> <code>gives 1.794897E-09</code></p>\n\n<p>where as I want up to 8 decimal places answer in my variable which will give </p>\n\n<p><code>0.00000000</code></p>\n\n<p>setprecision or other methods are not helping to store the value in a variable. How can it be stored? basically it may not even be 8 or 9 digits .. all i want is restriction of an exponentiol form in my answer</p>\n"}, {"tags": ["c++", "unit-testing", "boost"], "answers": [{"comments": [{"owner": {"reputation": 828, "user_id": 2938082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8522ef14ed96cd1ce46dacd77344e726?s=128&d=identicon&r=PG", "display_name": "CharlyDelta", "link": "https://stackoverflow.com/users/2938082/charlydelta"}, "edited": false, "score": 0, "creation_date": 1437735346, "post_id": 31575731, "comment_id": 51167145, "body": "Thank you for your help in advance. I am still trying to find out what it could be... The problem with <code>sdf::Element</code> is, that this is a library I use. I don&#39;t have direct access to anything of it... At least I am on the right way. I found out, that all test cases run without problems, if I just remove the destructor. This is, of course, not desired, but the destructor works without problems on a normal CLI program using my shared lib... I will now further investigate the problem, maybe it is a problem in the library..."}, {"owner": {"reputation": 828, "user_id": 2938082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8522ef14ed96cd1ce46dacd77344e726?s=128&d=identicon&r=PG", "display_name": "CharlyDelta", "link": "https://stackoverflow.com/users/2938082/charlydelta"}, "edited": false, "score": 0, "creation_date": 1440095049, "post_id": 31575731, "comment_id": 52142777, "body": "I accepted your answer, since it lead me in the right direction to solve the problem. It was very hard and time consuming though... Thank you very much for your help :)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1437607749, "last_edit_date": 1495540828, "creation_date": 1437607749, "answer_id": 31575731, "question_id": 31574865, "link": "https://stackoverflow.com/questions/31574865/boost-unit-tests-fail-with-sigabrt/31575731#31575731", "title": "Boost unit tests fail with sigabrt", "body": "<p>The error is not in the code posted. </p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/1ef7740fbd41b9ad\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<p>You'll <em>have</em> to debug this yourself. </p>\n\n<p>The problem appears to be with freed <em>or</em> uninitialized shared pointers to <code>sdf::Element</code>. See whether you use any static data that could have become linked into both the executable and the dynamic library (perhaps they're defined in header files).</p>\n\n<p>See whether you have shared pointers aliasing other shared pointers. See if you used <code>shared_from_this</code> (indirectly) from the object's constructor.</p>\n\n<p>If not, just eliminate causes. Comment all tests until the error disappears. Remove TUs. Make more stuff TU-local. Etc. etc. right until you have a sample that fits into an SO question and still exhibits the problem.</p>\n\n<p>Likely, you'll spot the source of the problem before that. If not, we're still here to help (even more).</p>\n\n<hr>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"http://blog.jerryorr.com/2014/04/solve-your-problem-by-almost-asking.html\" rel=\"nofollow noreferrer\">Solve your problem by almost asking on SO</a></li>\n<li><a href=\"http://kera.name/articles/2013/10/nobody-writes-testcases-any-more/\" rel=\"nofollow noreferrer\">Nobody Writes Testcases Any More</a></li>\n<li><a href=\"https://stackoverflow.com/help/mcve\">Minimal Complete Verifiable Example</a></li>\n<li><a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">Short, Self Contained, Correct (Compilable), Example</a> (and <a href=\"https://meta.stackexchange.com/questions/22754/sscce-how-to-provide-examples-for-programming-questions/22762#22762\">more</a> and <a href=\"http://pobox.com/~skeet/csharp/complete.html\" rel=\"nofollow noreferrer\">more</a> etc.)</li>\n</ul>\n"}], "owner": {"reputation": 828, "user_id": 2938082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8522ef14ed96cd1ce46dacd77344e726?s=128&d=identicon&r=PG", "display_name": "CharlyDelta", "link": "https://stackoverflow.com/users/2938082/charlydelta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 892, "favorite_count": 1, "accepted_answer_id": 31575731, "answer_count": 1, "score": 0, "last_activity_date": 1437607749, "creation_date": 1437602857, "question_id": 31574865, "link": "https://stackoverflow.com/questions/31574865/boost-unit-tests-fail-with-sigabrt", "title": "Boost unit tests fail with sigabrt", "body": "<p>I wrote a dynamic library and unit tests for it. Recently, I checked the library with Valgrind for any memory leaks and after some polishing I managed to get rid of every single leak. But after running the boost unit tests, I encountered several weird errors from boost and I just can't find the origin...</p>\n\n<p>Here is the complete console error log:</p>\n\n<pre><code>nddlgen-core-test: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = sdf::Element; typename boost::detail::sp_member_access&lt;T&gt;::type = sdf::Element*]: Assertion `px != 0' failed.\nnddlgen-core-test: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = sdf::Element; typename boost::detail::sp_member_access&lt;T&gt;::type = sdf::Element*]: Assertion `px != 0' failed.\nnddlgen-core-test: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = sdf::Element; typename boost::detail::sp_member_access&lt;T&gt;::type = sdf::Element*]: Assertion `px != 0' failed.\nnddlgen-core-test: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = sdf::Element; typename boost::detail::sp_member_access&lt;T&gt;::type = sdf::Element*]: Assertion `px != 0' failed.\nnddlgen-core-test: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = sdf::Element; typename boost::detail::sp_member_access&lt;T&gt;::type = sdf::Element*]: Assertion `px != 0' failed.\nnddlgen-core-test: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = sdf::Element; typename boost::detail::sp_member_access&lt;T&gt;::type = sdf::Element*]: Assertion `px != 0' failed.\nnddlgen-core-test: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = sdf::Element; typename boost::detail::sp_member_access&lt;T&gt;::type = sdf::Element*]: Assertion `px != 0' failed.\nnddlgen-core-test: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = sdf::Element; typename boost::detail::sp_member_access&lt;T&gt;::type = sdf::Element*]: Assertion `px != 0' failed.\nnddlgen-core-test: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = sdf::Element; typename boost::detail::sp_member_access&lt;T&gt;::type = sdf::Element*]: Assertion `px != 0' failed.\nnddlgen-core-test: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = sdf::Element; typename boost::detail::sp_member_access&lt;T&gt;::type = sdf::Element*]: Assertion `px != 0' failed.\nnddlgen-core-test: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access&lt;T&gt;::type boost::shared_ptr&lt;T&gt;::operator-&gt;() const [with T = sdf::Element; typename boost::detail::sp_member_access&lt;T&gt;::type = sdf::Element*]: Assertion `px != 0' failed.\n</code></pre>\n\n<p>In the results of the unit tests, it also says for each of those errors above something like the following:</p>\n\n<pre><code>../src/base/Controller_Test.cpp(72): Exception: signal: SIGABRT (application abort requested)\nLast check point was here.\n</code></pre>\n\n<p>The weird thing is, that every single <code>BOOST_CHECK_*</code> without any exception passes without a problem, but eventually some (not all!) test functions would fail anyway with the errors mentioned above...</p>\n\n<p>Here is a part of my unit test class, I marked line 72 above with a comment. Since the error is always the same, I cut the test class to contain one example.</p>\n\n<pre><code>#define BOOST_TEST_DYN_LINK\n#define BOOST_TEST_MODULE ControllerTest\n\n#include &lt;boost/test/included/unit_test.hpp&gt;\n#include &lt;boost/algorithm/string.hpp&gt;\n\n#include &lt;nddlgen/Controller.h&gt;\n\nusing namespace std;\nusing namespace nddlgen;\nusing namespace boost;\nusing namespace boost::unit_test;\n\nstruct UnitUnderTest\n{\n    UnitUnderTest()\n    {\n        c = new Controller(&amp;this-&gt;errorText);\n    }\n\n    ~UnitUnderTest()\n    {\n        boost::checked_delete(c);\n    }\n\n    Controller* c;\n    string errorText;\n};\n\nstring existingFile = \"res/testmodel.sdf\";\nstring corruptedFile = \"res/corruptedmodel.sdf\";\n\n/**\n * ======================================================\n * Tests for normal operation\n * ======================================================\n */\nBOOST_AUTO_TEST_SUITE (ControllerTestNormalBehaviour)\n\n    /**\n     * Test if the output file names match the expected behavior.\n     */\n    BOOST_AUTO_TEST_CASE (testGetOutputFileNames)\n    {\n        UnitUnderTest uut;\n        string actualModelOutputFileName;\n        string actualInitialStateOutputFileName;\n\n        // Should work since a file identifier has not been set yet\n        BOOST_CHECK_EQUAL(uut.c-&gt;setFileIdentifier(existingFile), true);\n\n        actualModelOutputFileName = uut.c-&gt;getModelsOutputFileName();\n        actualInitialStateOutputFileName = uut.c-&gt;getInitialStateOutputFileName();\n\n        BOOST_CHECK_EQUAL(actualModelOutputFileName, \"testmodel-model.nddl\");\n        BOOST_CHECK_EQUAL(actualInitialStateOutputFileName, \"testmodel-initial-state.nddl\"); // This is line 72\n    }\n\nBOOST_AUTO_TEST_SUITE_END()\n</code></pre>\n\n<p>After that, I checked the compiled unit test program with Valgrind and found several memory leaks... I don't know if this is relevant, but since my library is (according to Valgrind) mem-leak-free, I assume that it must be boost... </p>\n\n<p>What can I do to fix the problem so that my unit tests will run without these kind of errors? Or does anyone got a tip for me for how I could debug this in any way?</p>\n"}, {"tags": ["c++", "stdstring"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1437613903, "post_id": 31574858, "comment_id": 51107677, "body": "You&#39;re asking an optimization question without attempting to do any profiling to verify your assumptions. You assume that a loop is somehow inherently slow. What you seem to be forgetting is that compilers don&#39;t directly translate your C++ code into machine code. The C++ code&#39;s meaning is extracted from it, and the compiler generates machine code that has the same meaning. <b>This doesn&#39;t imply at all that the generated code will do the same things that you coded in C++, only that the effects will be the same</b>. What does it really mean? Oftentimes, loops vanish. Profile, profile, profile."}, {"owner": {"reputation": 7341, "user_id": 4822120, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cb73b37b475eb2c8c710875ac9d842ba?s=128&d=identicon&r=PG&f=1", "display_name": "ggrr", "link": "https://stackoverflow.com/users/4822120/ggrr"}, "edited": false, "score": 0, "creation_date": 1437617157, "post_id": 31574858, "comment_id": 51108448, "body": "I usually convert whole int to string first, just because this method is more straightforward,understandable and maintainable,also I hate to hardcode &quot;10&quot; in the int to string method."}, {"owner": {"reputation": 2912, "user_id": 1274223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/uGq26.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/1274223/alejandro"}, "edited": false, "score": 1, "creation_date": 1437624474, "post_id": 31574858, "comment_id": 51110119, "body": "You may want to look at <a href=\"http://www.slideshare.net/andreialexandrescu1/three-optimization-tips-for-c\" rel=\"nofollow noreferrer\">these slides</a> from a presentation that Andrei Alexandrescu gave regarding optimization -- one of the examples he used and analyzed was exactly counting digits in a base 10 number."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 5133770, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/71301189bae2d96a9c754d8f0fc73af6?s=128&d=identicon&r=PG&f=1", "display_name": "Ming An", "link": "https://stackoverflow.com/users/5133770/ming-an"}, "edited": false, "score": 0, "creation_date": 1437605446, "post_id": 31575088, "comment_id": 51105570, "body": "Since there is one extra step, this method is actually slower than using the loop?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1437607517, "post_id": 31575088, "comment_id": 51106139, "body": "Do note that <code>std::to_string()</code> is new in C++11. For older versions, you can use <code>std::ostringstream</code> instead: <code>std::ostringstream oss; oss &lt;&lt; number; return oss.str().length();</code>"}], "tags": [], "owner": {"reputation": 1575, "user_id": 1593297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zsi4O.jpg?s=128&g=1", "display_name": "Beta Carotin", "link": "https://stackoverflow.com/users/1593297/beta-carotin"}, "is_accepted": false, "score": 3, "last_activity_date": 1437603822, "creation_date": 1437603822, "answer_id": 31575088, "question_id": 31574858, "link": "https://stackoverflow.com/questions/31574858/can-i-convert-an-int-to-string-then-count-the-number-of-digits/31575088#31575088", "title": "Can I convert an int to string then count the number of digits?", "body": "<p>Yes, this method is possible.<br>\nThe difference is that there is an extra step involved if you convert to string first. The string conversion actually does something similar to the loop you described.</p>\n\n<p>Here is an example how to count integer digits via string length:  </p>\n\n<pre><code>#include &lt;string&gt;\n\nint number_of_digits(int number) {\n    // Using C++11\n    return std::to_string(number).length();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1437607940, "post_id": 31575645, "comment_id": 51106244, "body": "<code>temp</code> contains no data, and certainly is not null-terminated, when <code>_itoa()</code> is called, so the use of <code>strlen()</code> in the third parameter is wrong in this context (not to mention it is the wrong value for <code>_itoa_s()</code> input anyway), and memory will be corrupted when <code>_itoa_s()</code> tries to write beyond the bounds of <code>temp</code>. The correct code should be more like this: <code>char *temp = new char[16]; _itoa_s(number, temp, 16, 10); cout &lt;&lt; ... &lt;&lt; strlen(temp) &lt;&lt; ...; delete[] temp;</code>, or simply: <code>char temp[16] = {0}; _itoa_s(number, temp, 10); cout &lt;&lt; ... &lt;&lt; strlen(temp) &lt;&lt; ...;</code>"}, {"owner": {"reputation": 659, "user_id": 5049799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO82e.jpg?s=128&g=1", "display_name": "Kapobajza", "link": "https://stackoverflow.com/users/5049799/kapobajza"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1437611303, "post_id": 31575645, "comment_id": 51107060, "body": "Thanks for correcting me,I will correct my code so it won&#39;t give any errors."}], "tags": [], "owner": {"reputation": 659, "user_id": 5049799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO82e.jpg?s=128&g=1", "display_name": "Kapobajza", "link": "https://stackoverflow.com/users/5049799/kapobajza"}, "is_accepted": false, "score": 2, "last_activity_date": 1437617256, "last_edit_date": 1437617256, "creation_date": 1437607190, "answer_id": 31575645, "question_id": 31574858, "link": "https://stackoverflow.com/questions/31574858/can-i-convert-an-int-to-string-then-count-the-number-of-digits/31575645#31575645", "title": "Can I convert an int to string then count the number of digits?", "body": "<p>You could use the <code>itoa()</code> function (in this example below, <code>_itoa_s()</code> is a <em>safe</em> version of <code>itoa()</code>). This function basically transforms an integer to a string (itoa=integer to alphabet).</p>\n\n<p>Here's an example:</p>\n\n<pre><code>int number;\nchar temp[12];\ncout &lt;&lt; \"Enter your number: \";\ncin &gt;&gt; number;\n\n//itoa(number, temp, 10);\n//_itoa_s(number, temp, 12, 10);\n_itoa_s(number, temp, 10);\n\ncout &lt;&lt; \"The number of digits is: \" &lt;&lt; strlen(temp) &lt;&lt; endl;\n</code></pre>\n\n<p><code>itoa()</code> takes 3 parameters: the number you're going to convert (<code>number</code>), the buffer where the number will be held after the conversion (<code>temp</code>), and the numeral system to which you're converting to (<code>10</code> is for base-10, aka decimal numeral system).</p>\n\n<p><code>_itoa_s()</code> takes a 4th parameter, the size of the buffer.  There is also a templated version of <code>_itoa_s()</code> specifically for static arrays (which is used in the example above). It takes 3 parameters, letting the compiler deduce the buffer size for the 4th parameter.</p>\n\n<p>Also, I chose 12 characters for the <code>temp</code> buffer because the max value of a integer is 2,147,483,647, which has 10 digits, plus room for a null terminator and some extra alignment.</p>\n"}, {"tags": [], "owner": {"reputation": 782, "user_id": 5145654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRw4q.jpg?s=128&g=1", "display_name": "AaronI", "link": "https://stackoverflow.com/users/5145654/aaroni"}, "is_accepted": false, "score": 0, "last_activity_date": 1437608460, "creation_date": 1437608460, "answer_id": 31575841, "question_id": 31574858, "link": "https://stackoverflow.com/questions/31574858/can-i-convert-an-int-to-string-then-count-the-number-of-digits/31575841#31575841", "title": "Can I convert an int to string then count the number of digits?", "body": "<p>The obvious divide-by-10 method will return 0 for an input of 0, which may or may not be what you want. Other than that, both methods will return the same, but divide-by-10 is <em>much</em> faster.</p>\n\n<p>If you use std::string as I do in the example below (which allocates memory), then the divide-by-10 method is easily hundreds of times faster.</p>\n\n<pre><code>int numlen_using_divide_by_10(int n) {\n  int ret = 0;\n  for (; n; n /= 10) ++ret;\n  return ret;\n}\n\nint numlen_using_string(int n) {\n  return std::to_string(n).size();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 5133770, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/71301189bae2d96a9c754d8f0fc73af6?s=128&d=identicon&r=PG&f=1", "display_name": "Ming An", "link": "https://stackoverflow.com/users/5133770/ming-an"}, "edited": false, "score": 0, "creation_date": 1437627364, "post_id": 31576530, "comment_id": 51110949, "body": "Thank you for the explanation."}, {"owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "edited": false, "score": 0, "creation_date": 1485349470, "post_id": 31576530, "comment_id": 70888279, "body": "GCC can do better: <code>template&lt;class T&gt; static constexpr size_t digits() noexcept {   return static_cast&lt;size_t&gt;( std::log10(std::numeric_limits&lt;T&gt;::max()) ) + 1; }</code>"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1437613724, "last_edit_date": 1437613724, "creation_date": 1437613403, "answer_id": 31576530, "question_id": 31574858, "link": "https://stackoverflow.com/questions/31574858/can-i-convert-an-int-to-string-then-count-the-number-of-digits/31576530#31576530", "title": "Can I convert an int to string then count the number of digits?", "body": "<p><strong>Yes, you can. NO, you don't want to actually do it</strong>. It will be 2 orders of magnitude (~100x) slower than using the loop. Why? Because integer to string conversion not only has to execute some sort of a loop to generate the string's digits, but also has to allocate <em>and</em> deallocate the heap to hold the string, unless the string has some sort of a small-string optimization.</p>\n\n<p>In most cases, people would consider your approach to be an ugly hack. If you want to count digits in an integer, you don't even need a loop:</p>\n\n<pre><code>constexpr int digits(int32_t x) {\n  return \n    (x &lt; 0 ? digits(-x) :\n    (x &lt; 10 ? 1 :   \n    (x &lt; 100 ? 2 :   \n    (x &lt; 1000 ? 3 :   \n    (x &lt; 10000 ? 4 :   \n    (x &lt; 100000 ? 5 :   \n    (x &lt; 1000000 ? 6 :   \n    (x &lt; 10000000 ? 7 :  \n    (x &lt; 100000000 ? 8 :  \n    (x &lt; 1000000000 ? 9 :  \n    10))))))))));  \n}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 5133770, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/71301189bae2d96a9c754d8f0fc73af6?s=128&d=identicon&r=PG&f=1", "display_name": "Ming An", "link": "https://stackoverflow.com/users/5133770/ming-an"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 0, "accepted_answer_id": 31576530, "answer_count": 4, "score": 2, "last_activity_date": 1437617256, "creation_date": 1437602838, "last_edit_date": 1437612727, "question_id": 31574858, "link": "https://stackoverflow.com/questions/31574858/can-i-convert-an-int-to-string-then-count-the-number-of-digits", "title": "Can I convert an int to string then count the number of digits?", "body": "<p>I know the common way to count the digits of an int is using a loop, and keep dividing by 10 until it's gone. I'm curious that can I first convert the int into a string and then count the length of the string to get the number of digits (assume there are only positive ints)?</p>\n\n<p>If this method is possible, then what is the difference between using a loop?</p>\n"}, {"tags": ["c++", "newline", "standards"], "comments": [{"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 3, "creation_date": 1437602958, "post_id": 31574837, "comment_id": 51104588, "body": "&quot;For consistency, it\u2019s very helpful to follow this rule&quot;.  <a href=\"http://stackoverflow.com/questions/72271/no-newline-at-end-of-file-compiler-warning\">Historically</a>, the main problem was failing to add a newline after a .h file with an #endif header guard."}, {"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 1, "creation_date": 1437602970, "post_id": 31574837, "comment_id": 51104593, "body": "Why not test it yourself?"}, {"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1437602974, "post_id": 31574837, "comment_id": 51104596, "body": "Hmm, I haven&#39;t ever heard anything about that."}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1437603961, "post_id": 31574837, "comment_id": 51105019, "body": "@Jashaszun how would you test that?"}, {"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "reply_to_user": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "edited": false, "score": 0, "creation_date": 1437603978, "post_id": 31574837, "comment_id": 51105027, "body": "@iheanyi Try to compile."}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 3, "creation_date": 1437604026, "post_id": 31574837, "comment_id": 51105043, "body": "@Jashaszun umm, so what if I happen to have a compiler that allows files that end with and without newlines? Trying to compile proves nothing."}, {"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "reply_to_user": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "edited": false, "score": 0, "creation_date": 1437604103, "post_id": 31574837, "comment_id": 51105082, "body": "@iheanyi Then either (1) the compiler follows the standard, in which case now you know that the standard doesn&#39;t care about these newlines, or (2) the compiler does not follow the standard, in which case you know nothing more."}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1437604250, "post_id": 31574837, "comment_id": 51105148, "body": "@Jashaszun Exactly. So your test does not answer the question &quot;Does that apply to the most recent C++ standard?&quot; since there are two possible explanations for whatever result I get. The point (by asking you how you&#39;d test it) is that there is no possible test, unless you have a compiler certified by a standard body that it correctly implements that part of the standard, to test your way to the right answer."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 2, "creation_date": 1437604309, "post_id": 31574837, "comment_id": 51105167, "body": "@Jashaszun: The usual rule of thumb with standards is &quot;be lax in what you accept.  Be strictly conformant in what you generate&quot;.  So a compiler that accepted non-compliant input when there was no ambiguity wouldn&#39;t be doing a &quot;bad job&quot;.  Although it ideally should warn about any non-standard anything it accepted."}, {"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "reply_to_user": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "edited": false, "score": 0, "creation_date": 1437604358, "post_id": 31574837, "comment_id": 51105188, "body": "@iheanyi Well, I guess I just assumed that all of the major compilers adhered to the standard."}, {"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1437604392, "post_id": 31574837, "comment_id": 51105205, "body": "@PeterCordes I didn&#39;t realize that, sorry. I thought that all of the major compilers exactly adhere to the standards."}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 2, "creation_date": 1437604422, "post_id": 31574837, "comment_id": 51105218, "body": "@Jashaszun Umm. . . that should be a weak assumption. As in, most of the time, I can assume if there is a mistake, it is me who made it and not the compiler. But, I don&#39;t think there is a single compiler that has ever 100% adhered to the standard."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1437610444, "post_id": 31574837, "comment_id": 51106842, "body": "see also <a href=\"http://stackoverflow.com/a/26127812/1708801\">Backslash newline at end of file warning</a>"}], "answers": [{"comments": [{"owner": {"reputation": 12546, "user_id": 1235565, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c5960a26870721e69a362891b6174378?s=128&d=identicon&r=PG", "display_name": "Jirka Hanika", "link": "https://stackoverflow.com/users/1235565/jirka-hanika"}, "edited": false, "score": 0, "creation_date": 1560945126, "post_id": 31574898, "comment_id": 99901804, "body": "TL;DR - In C, each source file must end in a newline.  In C++, the compiler will imagine the final newline even if the programmer hasn&#39;t provided one."}], "tags": [], "owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "is_accepted": true, "score": 8, "last_activity_date": 1437605459, "last_edit_date": 1437605459, "creation_date": 1437603026, "answer_id": 31574898, "question_id": 31574837, "link": "https://stackoverflow.com/questions/31574837/c-standards-newline-ending-of-source-files/31574898#31574898", "title": "C++ Standards (newline ending of source files)", "body": "<p>The given code is legal in the case of C++, but not for C.</p>\n\n<p>Indeed, the C (N1570) standard says:</p>\n\n<blockquote>\n  <p>Each instance of a backslash character (<code>\\</code>) immediately followed by a new-line\n  character is deleted, splicing physical source lines to form logical source lines.\n  Only the last backslash on any physical source line shall be eligible for being part\n  of such a splice. A source file that is not empty shall end in a new-line character,\n  which shall not be immediately preceded by a backslash character before any such\n  splicing takes place.</p>\n</blockquote>\n\n<p>The C++ standard (N3797) formulates it a bit differently (emphasis mine):</p>\n\n<blockquote>\n  <p>Each instance of a backslash character (<code>\\</code>) immediately followed by a new-line character is deleted,\n  splicing physical source lines to form logical source lines. Only the last backslash on any physical\n  source line shall be eligible for being part of such a splice. If, as a result, a character sequence that\n  matches the syntax of a universal-character-name is produced, the behavior is undefined. <strong>A source file\n  that is not empty and that does not end in a new-line character, or that ends in a new-line character\n  immediately preceded by a backslash character before any such splicing takes place, shall be processed\n  as if an additional new-line character were appended to the file.</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 155, "user_id": 5121037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd067314da7cc5d2a37bcca162de29a5?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/5121037/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1189, "favorite_count": 0, "accepted_answer_id": 31574898, "answer_count": 1, "score": 11, "last_activity_date": 1437605459, "creation_date": 1437602746, "last_edit_date": 1495541628, "question_id": 31574837, "link": "https://stackoverflow.com/questions/31574837/c-standards-newline-ending-of-source-files", "title": "C++ Standards (newline ending of source files)", "body": "<p>I am referring to: <a href=\"https://stackoverflow.com/questions/729692/why-should-files-end-with-a-newline\">Why should text files end with a newline?</a>\nOne of the answers quotes the C89 standard. Which in brief dictates that a file must end with a new line, which is not immediately preceded by a backslash.</p>\n\n<p>Does that apply to the most recent C++ standard? </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n  cout &lt;&lt; \"Hello World!\" &lt;&lt; endl;\n  return 0;\n}\n//\\\n</code></pre>\n\n<p>Is the above valid? (Assuming there is a newline after //\\, which I've been unable to display)</p>\n"}, {"tags": ["c++", "iterator"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 4, "creation_date": 1437602459, "post_id": 31574737, "comment_id": 51104372, "body": "It&#39;s just because the iterator has no <b>implicit</b> conversion to any data type accepted by <code>operator&lt;&lt;</code>.  An iterator acts like a pointer, but it is a distinct type.  Just use <code>cout &lt;&lt; &amp;*it</code> (as you&#39;ve already noted)"}, {"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1437602470, "post_id": 31574737, "comment_id": 51104379, "body": "there does not exist operator &lt;&lt;(ostream&amp;, iterator of your choice)"}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1437602613, "post_id": 31574737, "comment_id": 51104437, "body": "@BenVoigt <code>cout &lt;&lt; &amp;*it</code> and <code>cout &lt;&lt; &amp;(*it)</code> are same."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1437602658, "post_id": 31574737, "comment_id": 51104460, "body": "@Creris is there any other way to do this?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1437602760, "post_id": 31574737, "comment_id": 51104501, "body": "@manetsus: To do what? Print an iterator? First you have to define what it means to print an iterator."}, {"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1437602763, "post_id": 31574737, "comment_id": 51104505, "body": "That depends on what you want to print"}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1437603052, "post_id": 31574737, "comment_id": 51104637, "body": "@BenjaminLindley so why it is undefined? sometimes it becomes difficult to debug!"}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1437603233, "post_id": 31574737, "comment_id": 51104719, "body": "@Creris I want to print its representation or how it is in memory or something like that. I want to see how it is managed internally. say, by printing addresses of elements of an array you can easily find its memory consumption etc."}, {"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1437604506, "post_id": 31574737, "comment_id": 51105255, "body": "go inspect the source code. You can at most print its address with std::addressof(iterator)"}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1437604630, "post_id": 31574737, "comment_id": 51105299, "body": "@Creris But my question is why it is like this? why I can&#39;t?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1437604696, "post_id": 31574737, "comment_id": 51105324, "body": "@manetsus: It&#39;s already been explained to you why. In Baum mit Augen&#39;s answer."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1437605355, "post_id": 31574737, "comment_id": 51105530, "body": "@BenjaminLindley: But how could it possible that a more ambiguous thing like <code>std::distance(numbered.begin(), numbers.begin())</code> is defined but this is not?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1437606112, "post_id": 31574737, "comment_id": 51105767, "body": "@manetsus: What is ambiguous about <code>std::distance(numbered.begin(), numbers.begin())</code>?"}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1437606909, "post_id": 31574737, "comment_id": 51105979, "body": "@BenjaminLindley: Could it give any defined output as it is measuring the distance between two different vectors named <code>numbered</code> and <code>numbers</code>?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1437607673, "post_id": 31574737, "comment_id": 51106165, "body": "@manetsus: Oh, I didn&#39;t notice those were two different names. Comparing iterators from different containers is undefined behavior."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1437608028, "post_id": 31574737, "comment_id": 51106264, "body": "@BenjaminLindley: So, what was the problem to define them and marked some undefined behavior where the ambiguity comes?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1437608117, "post_id": 31574737, "comment_id": 51106285, "body": "@manetsus: Sorry, you&#39;ll have to rephrase that. I have no idea what you are asking."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1437608430, "post_id": 31574737, "comment_id": 51106366, "body": "@BenjaminLindley: Sorry for my bad English, &quot;So, what is the problem if they define the printing of iterator? they can easily mark some point as undefined behavior, isn&#39;t it?&quot;"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1437608630, "post_id": 31574737, "comment_id": 51106410, "body": "@manetsus: The problem is explained in Baum&#39;s answer. <i>&quot;there is no conventional meaning of printing an iterator&quot;</i>."}, {"owner": {"reputation": 1, "user_id": 7399887, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/5965fe3a75d81649614bf49f0f61ea44?s=128&d=identicon&r=PG", "display_name": "Kosmic", "link": "https://stackoverflow.com/users/7399887/kosmic"}, "edited": false, "score": 0, "creation_date": 1484058642, "post_id": 31574737, "comment_id": 70352365, "body": "I could actually print value of iterator (concretely of type vector&lt;int&gt;) by doing this: *(&amp;(*(iterator))). Can&#39;t really explain what is going on there, but maybe somebody will find it useful to quickly debug or something."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1437602916, "post_id": 31574841, "comment_id": 51104571, "body": "The offset or distance from the beginning may be more useful, something like <code>std::distance(it, numbers.begin())</code>."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1437602986, "post_id": 31574841, "comment_id": 51104609, "body": "@ThomasMatthews Would be reasonable too, but how would an iterator know where its range begins?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1437603164, "post_id": 31574841, "comment_id": 51104683, "body": "@ThomasMatthews: I think that might lead to some hard to trace bugs, especially, if you have a container holding integers. I&#39;d much rather have a compiler error."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1437603573, "post_id": 31574841, "comment_id": 51104856, "body": "@ThomasMatthews why it prints negative numbers? however, it also prints something when two iterators are of different vectors! strange behavior! It would cause ambiguity!"}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1437603861, "post_id": 31574841, "comment_id": 51104977, "body": "@BaummitAugen while comparing like <code>it!=numbers.end()</code>, it compares two integers or something, right? I expect that integer to be printed. Sometimes, it becomes difficult to debug. They could define such an ambiguous thing like <code>std::distance(it, numbers.begin())</code> but did not it? Huh, ridiculous!"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1437604028, "post_id": 31574841, "comment_id": 51105047, "body": "@manetsus &quot;it!=numbers.end(), it compares two integer or something, &quot; Yeah, or something, whatever that something is. For example, what do think an <code>std::unordered_set::iterator</code> would look like, and how would you print that?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 1, "creation_date": 1437604349, "post_id": 31574841, "comment_id": 51105186, "body": "@manetsus: I&#39;ve never had difficulty debugging because I couldn&#39;t print an iterator directly to an <code>ostream</code>. The debugger knows how to handle standard iterators, and can output all kinds of information from them. Even if I were to resort to <code>printf&#47;cout</code> style debugging, I can easily form whatever expression I need to see the result of, whether it&#39;s <code>*it</code> or <code>&amp;it</code> or <code>&amp;*it</code> or <code>distance(it1, it2)</code>."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1437604451, "post_id": 31574841, "comment_id": 51105227, "body": "@BaummitAugen that something must be represented to an integer any how, right? I would like to print something (could be an integer) that represent the orientation it keeps data internally. In brief, I want to see the actual scenario whatever it is <code>std::unordered_set::iterator</code> or <code>std::vector::iterator</code>."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1437605161, "post_id": 31574841, "comment_id": 51105475, "body": "@BenjaminLindley: Actually, I wanted to be clear about it&#39;s internal work. However, is there any relation between <code>iterator</code> and <code>reverse_iterator</code>? if yes, why <code>distance(numbers.rbegin(), numbers.begin())</code> gives compile error? if no, then how it could be no as it is traversing the same vector?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1437605308, "post_id": 31574841, "comment_id": 51105511, "body": "@manetsus If you have another question, post it as a question and not as a comment to an answer to a different question."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1437605512, "post_id": 31574841, "comment_id": 51105591, "body": "@BaummitAugen: Surely, but this question came as a sequence as I could not get the thing properly."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1437605559, "post_id": 31574841, "comment_id": 51105603, "body": "@manetsus You can include a link to this question in your new question if you feel like the context helps."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1437605785, "post_id": 31574841, "comment_id": 51105679, "body": "@BaummitAugen: However, what do you mean by &quot;because there is conventional meaning of printing an iterator&quot;? if it is, what is that conventional meaning?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1437607011, "post_id": 31574841, "comment_id": 51106006, "body": "@manetsus I&#39;m not sure why you&#39;re so certain that iterators are represented by something akin to an integer, no matter what. It is not the case. For example, an <code>std::list</code> iterator is mainly a pointer, and has no clue how far it is from the beginning or the end. A hashmap iterator refers to a bucket and a position inside this bucket&#39;s list, again with no way to know how far it is from the first or last object in the map."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1437607198, "post_id": 31574841, "comment_id": 51106057, "body": "@Quentin If it could not be represented as an integer anyhow, how could you get <code>it!=numbers.end()</code> ? In case of list and something, you can still print it&#39;s pointer in the memory, so, why not it&#39;s iterator?"}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1437607438, "post_id": 31574841, "comment_id": 51106118, "body": "@BaummitAugen: Its okay. Your answer is okay, that&#39;s why I up-voted, but I could not satisfy myself enough, so I did not accept your answer till now. If any better answer does not come, I would accept yours. Thanks."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1437607483, "post_id": 31574841, "comment_id": 51106130, "body": "@manetsus iterators overload the <code>!=</code> operator, so it isn&#39;t a clue that something happens with integers either. Possible implementation for a singly-linked list : an iterator arriving at the end would detect that the &quot;next&quot; node is in fact <code>nullptr</code>. It sets a boolean flag <code>atEnd</code> to <code>true</code>. The <code>list.end()</code> methods return an iterator which always has the flag set. Now you can compare the flags in <code>operator!=</code> to achieve the usual syntax : if they are both true, we&#39;re comparing two past-the-end iterators."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1437607827, "post_id": 31574841, "comment_id": 51106204, "body": "@Quentin: <code>true</code> can easily represented by <code>1</code> which is an integer. However, it could be a <code>-1</code> also! As in <code>JAVA</code>, if you find a substring in a string and the substring does not occur in the string, it returns <code>-1</code>. No need to be an straight-forward integer, it can be derived &#39;anyhow&#39;."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1437608009, "post_id": 31574841, "comment_id": 51106256, "body": "@manetsus but printing that boolean (or integer, if you like integers) is not really useful : you can only know whether you&#39;re past the end, or not. It&#39;s the only information the iterator needs, so it contains nothing else. What you want to print to get a sense of what is going on is just <i>not there</i>."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1437608185, "post_id": 31574841, "comment_id": 51106307, "body": "@Quentin: Sure, but on the other case, I could easily calculate how far I am from the beginning or end! (as mentioned in case of <code>JAVA</code> scenario)."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 2, "creation_date": 1437608392, "post_id": 31574841, "comment_id": 51106355, "body": "@manetsus not without traversing the whole list again to find your iterator, counting as you go. Note that merely keeping a counter inside the iterator won&#39;t work, because you can remove objects from the list while you&#39;re iterating. Such heavy functionalities with little gain are avoided in C++. I don&#39;t know about Java (and I don&#39;t know why you keep bringing it up either)."}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 3, "last_activity_date": 1437605834, "last_edit_date": 1437605834, "creation_date": 1437602754, "answer_id": 31574841, "question_id": 31574737, "link": "https://stackoverflow.com/questions/31574737/how-the-iterator-in-c-could-be-printed/31574841#31574841", "title": "how the iterator in c++ could be printed?", "body": "<p>There is no predefined output operator for the standard iterators because there is no conventional meaning of printing an iterator. What would you expect such an operation to print? While you seem to expect to see the address of the object the iterator refers to, I find that not clear at all.</p>\n\n<p>There is no universal answer to that, so the committee decided not to add a those operators. (The last half sentence is a guess, I am not part of the committee.)</p>\n\n<p>If you want to print those iterators, I would define a function like <code>print(Iterator);</code> (or something like this, whatever fits your needs) that does what you want. I would not add an <code>operator &lt;&lt;</code> for iterators for the reason I mentioned above.  </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5170863"}, "is_accepted": false, "score": 0, "last_activity_date": 1439237669, "creation_date": 1439237669, "answer_id": 31928331, "question_id": 31574737, "link": "https://stackoverflow.com/questions/31574737/how-the-iterator-in-c-could-be-printed/31928331#31928331", "title": "how the iterator in c++ could be printed?", "body": "<blockquote>\n  <p>why the iterator itself could not printed by doing the following?</p>\n</blockquote>\n\n<p>Because, it is not defined to a value internally.</p>\n\n<blockquote>\n  <p>Is there any other way to do this?</p>\n</blockquote>\n\n<p>Basically, the compiler does not facilitate it by default, you may try to edit the compiler code! But it is too terrific you know! </p>\n\n<blockquote>\n  <p>If not, why?</p>\n</blockquote>\n\n<p>Because it has no well-defined way to express it. </p>\n"}, {"comments": [{"owner": {"reputation": 450, "user_id": 4414160, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SfOclufg0ko/AAAAAAAAAAI/AAAAAAAAAOk/L_nY3mKWvvw/photo.jpg?sz=128", "display_name": "Aadhil RF", "link": "https://stackoverflow.com/users/4414160/aadhil-rf"}, "edited": false, "score": 2, "creation_date": 1514441913, "post_id": 44857334, "comment_id": 82973306, "body": "This must be the accepted answer. What is the complexity of such arithmetics on iterators?"}, {"owner": {"reputation": 5700, "user_id": 4934640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f69527ae459cbbda0ab5c2e08686a50?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4934640/user"}, "edited": false, "score": 1, "creation_date": 1558930710, "post_id": 44857334, "comment_id": 99247652, "body": "It does not work for all iterators as in double linked lists: <a href=\"https://stackoverflow.com/questions/29764251/no-match-for-operator-error-on-simple-iterator-difference\">\u201cNo match for operator-\u201d error on simple iterator difference</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8038009"}, "is_accepted": false, "score": 18, "last_activity_date": 1499237774, "last_edit_date": 1499237774, "creation_date": 1498883363, "answer_id": 44857334, "question_id": 31574737, "link": "https://stackoverflow.com/questions/31574737/how-the-iterator-in-c-could-be-printed/44857334#44857334", "title": "how the iterator in c++ could be printed?", "body": "<p>Yes, there is a way to do it!</p>\n\n<p>You can't print the iterator because <strong>it is not defined to have a value</strong>.\nBut you can perform arithematic operations on them and that helps you to print the value (<s><strong>of the iterator</strong></s>).</p>\n\n<p>Do the following.</p>\n\n<pre><code>cout &lt;&lt; it - v.begin();  \n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;iostream&gt;     \n#include &lt;algorithm&gt;    \n#include &lt;vector&gt; \n#include &lt;iterator&gt;\n\nusing namespace std;\n\nint main () {\n  vector&lt;int&gt; v = {20,3,98,34,20,11,101,201};           \n  sort (v.begin(), v.end());                \n\n  vector&lt;int&gt;::iterator low,up;\n  low = lower_bound (v.begin(), v.end(), 20);          \n  up = upper_bound (v.begin(), v.end(), 20);                  \n\n  std::cout &lt;&lt; \"lower_bound at position \" &lt;&lt; (low - v.begin()) &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"upper_bound at position \" &lt;&lt; (up - v.begin()) &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>Output of the above code:</p>\n\n<pre><code>lower_bound at position 2\nupper_bound at position 4\n</code></pre>\n\n<p><strong>Note</strong>: this is just a way to get things done and no way I have claimed that we can print the iterator.</p>\n\n<p>...</p>\n"}], "owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27508, "favorite_count": 10, "answer_count": 3, "score": 18, "last_activity_date": 1499237774, "creation_date": 1437602297, "question_id": 31574737, "link": "https://stackoverflow.com/questions/31574737/how-the-iterator-in-c-could-be-printed", "title": "how the iterator in c++ could be printed?", "body": "<p>Suppose, I have declared a vector in <code>C++</code> like this:</p>\n\n<pre><code>vector&lt;int&gt;numbers = {4,5,3,2,5,42};\n</code></pre>\n\n<p>I can iterate it through the following code:</p>\n\n<pre><code>for (vector&lt;int&gt;::iterator it = numbers.begin(); it!=numbers.end(); it++){\n    // code goes here\n}\n</code></pre>\n\n<p>Now, I would talk about coding in the block of <code>for loop</code>.</p>\n\n<p>I can access and change any value using this iterator. say, I want to increase every value by 10 and the print. So, the code would be:</p>\n\n<pre><code>*it+=10;\ncout &lt;&lt; *it &lt;&lt; endl;\n</code></pre>\n\n<p>I can print the address of both iterator and elements that are being iterated.</p>\n\n<p>Address of iterator can be printed by:</p>\n\n<pre><code>cout &lt;&lt; &amp;it &lt;&lt; endl;\n</code></pre>\n\n<p>Address of iterated elements can be printed by:</p>\n\n<pre><code>cout &lt;&lt; &amp;(*it) &lt;&lt; endl;\n</code></pre>\n\n<p>But <strong>why the iterator itself could not printed by doing the following?</strong></p>\n\n<pre><code>cout &lt;&lt; it &lt;&lt;endl;\n</code></pre>\n\n<p>At first I thought the convention came from <code>JAVA</code> considering the security purpose. But if it is, then why I could print it's address?</p>\n\n<p>However, <strong>Is there any other way to do this? If not, why?</strong></p>\n"}, {"tags": ["c++", "valgrind", "callgrind"], "comments": [{"owner": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 0, "creation_date": 1437608429, "post_id": 31574730, "comment_id": 51106365, "body": "We really need some code before we&#39;ll be able to help you. Can you post the function that this is happening on?"}, {"owner": {"reputation": 9, "user_id": 3889260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b301dab226f1e8861aaec424d39e94d?s=128&d=identicon&r=PG&f=1", "display_name": "qazmonk", "link": "https://stackoverflow.com/users/3889260/qazmonk"}, "reply_to_user": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 0, "creation_date": 1437662787, "post_id": 31574730, "comment_id": 51133365, "body": "Sorry about that. I edited the question to include the code."}, {"owner": {"reputation": 9, "user_id": 3889260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b301dab226f1e8861aaec424d39e94d?s=128&d=identicon&r=PG&f=1", "display_name": "qazmonk", "link": "https://stackoverflow.com/users/3889260/qazmonk"}, "reply_to_user": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 1, "creation_date": 1437662960, "post_id": 31574730, "comment_id": 51133509, "body": "I&#39;m guessing that the instructions have to do with cleaning up the maps since they can get very large."}], "owner": {"reputation": 9, "user_id": 3889260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b301dab226f1e8861aaec424d39e94d?s=128&d=identicon&r=PG&f=1", "display_name": "qazmonk", "link": "https://stackoverflow.com/users/3889260/qazmonk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1437664401, "creation_date": 1437602269, "last_edit_date": 1437664401, "question_id": 31574730, "link": "https://stackoverflow.com/questions/31574730/callgrind-high-end-of-function-instruction-count", "title": "Callgrind high end of function instruction count", "body": "<p>I am using callgrind to profile a piece of code and I have noticed a huge number of instructions being counted after the end of a function. Here is the output in question</p>\n\n<pre><code>         4    cout &lt;&lt; \"computing cut\" &lt;&lt; endl;\n     8,126  =&gt; ???:global constructors keyed to a (1x)\n         6    vector&lt;hole_node*&gt; cut = residual_reachable(s, &amp;cap, &amp;f);\n18,006,296  =&gt; mtlib.cpp:residual_reachable(hole_node*, std::__1::unordered_map&lt;hole_node_edge, int, hole_node_edge_hash, std::__1::equal_to&lt;hole_node_edge&gt;, std::__1::allocator&lt;std::__1::pair&lt;hole_node_edge const, int&gt; &gt; &gt;*, std::__1::unordered_map&lt;hole_node_edge, int, hole_node_edge_hash, std::__1::equal_to&lt;hole_node_edge&gt;, std::__1::allocator&lt;std::__1::pair&lt;hole_node_edge const, int&gt; &gt; &gt;*) (1x)\n         .    return cut;\n        14  }\n2,327,827,246  =&gt; ???:global constructors keyed to a (3x)\n     4,950  vector&lt;hole_node*&gt; find_interior(hole_node* root, int prev_width=0) {\n</code></pre>\n\n<p>And here is the code for the entire function. It's just an implementation of the Edmonds\u2013Karp algorithm.</p>\n\n<pre><code>    typedef unordered_map&lt;hole_node_edge, int, hole_node_edge_hash&gt; edge_hashmap;\ntypedef unordered_map&lt;hole_node*, hole_node*, hole_node_hash, hole_node_eq&gt; vertex_hashmap;\n\nvector&lt;hole_node*&gt; min_cut(vector&lt;hole_node*&gt; srcs, vector&lt;hole_node*&gt; tgts, \n                               hole_node** graph, int rows, int cols) {\n      cout &lt;&lt; \"making edges\" &lt;&lt; endl;\n      edge_hashmap f, cap;\n      vertex_hashmap p;\n      for (int r = 0; r &lt; rows; r++) {\n        for (int c = 0; c &lt; cols; c++) {\n          hole_node* cur = graph[r*cols + c];\n          if (cur != NULL) {\n            int size = graph[r*cols + c]-&gt;neighbors.size();\n            for (int i = 0; i &lt; size; i++) {\n              hole_node_edge e(cur, cur-&gt;neighbors[i]);\n              pair&lt;hole_node_edge, int&gt; tmp1(e, 0);\n              pair&lt;hole_node_edge, int&gt; tmp2(e, 1);\n              f.insert(tmp1);\n              cap.insert(tmp2);\n            }\n          }\n        }\n      }\n\n      cout &lt;&lt; \"making new vertices\" &lt;&lt; endl;\n      hole_node * s = new hole_node(-1, -1, 0, -1);\n      hole_node * t = new hole_node(-1, -2, 0, -1);\n      s-&gt;id = -1;\n      t-&gt;id = -2;\n      cout &lt;&lt; \"adding src edges\" &lt;&lt; endl;\n      for (int i = 0; i &lt; srcs.size(); i++) {\n        hole_node_edge fwd(s, srcs[i]);\n        hole_node_edge bak(srcs[i], s);\n        s-&gt;neighbors.push_back(srcs[i]);\n        srcs[i]-&gt;neighbors.push_back(s);\n        f.insert(pair&lt;hole_node_edge, int&gt;(fwd, 0));\n        f.insert(pair&lt;hole_node_edge, int&gt;(bak, 0));\n        cap.insert(pair&lt;hole_node_edge, int&gt;(fwd, 8));\n        cap.insert(pair&lt;hole_node_edge, int&gt;(bak, 0));\n      }\n      cout &lt;&lt; \"adding tgt edges\" &lt;&lt; endl;\n      for (int i = 0; i &lt; tgts.size(); i++) {\n        hole_node_edge fwd(t, tgts[i]);\n        hole_node_edge bak(tgts[i], t);\n        t-&gt;neighbors.push_back(tgts[i]);\n        tgts[i]-&gt;neighbors.push_back(t);\n        f.insert(pair&lt;hole_node_edge, int&gt;(fwd, 0));\n        f.insert(pair&lt;hole_node_edge, int&gt;(bak, 0));\n        cap.insert(pair&lt;hole_node_edge, int&gt;(fwd, 0));\n        cap.insert(pair&lt;hole_node_edge, int&gt;(bak, 8));\n      }\n      cout &lt;&lt; \"done construction graph\" &lt;&lt; endl;\n      cout &lt;&lt; \"running main loop\" &lt;&lt; endl;\n      while (residual_path(s, t, rows, cols, &amp;cap, &amp;f, &amp;p)) {\n        cout &lt;&lt; \"found path \" &lt;&lt; p.size() &lt;&lt; endl;\n        vertex_hashmap::const_iterator cur_it = p.find(t);\n        while (cur_it != p.end()) {\n          hole_node * u = cur_it-&gt;first;\n          hole_node * v = cur_it-&gt;second;\n          int fwd_flow = (f.find(hole_node_edge(u, v)))-&gt;second;\n          int bck_flow = (f.find(hole_node_edge(v, u)))-&gt;second;\n          f[hole_node_edge(v, u)] = fwd_flow + 1;\n          f[hole_node_edge(u, v)] = bck_flow - 1;\n          cur_it = p.find(cur_it-&gt;second);\n        }\n        p.clear();\n      }\n      cout &lt;&lt; \"computing cut\" &lt;&lt; endl;\n      vector&lt;hole_node*&gt; cut = residual_reachable(s, &amp;cap, &amp;f);\n      return cut;\n    }\n</code></pre>\n\n<p>If I'm interpreting the output correctly there are about 2 billion instructions being executed after the end of the method. What are these and how do I reduce them? Also in general what do the 'global constructors keyed to a...' lines mean?</p>\n"}, {"tags": ["c++", "dll"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1437603001, "post_id": 31574705, "comment_id": 51104618, "body": "Take a look at the <a href=\"http://en.cppreference.com/w/cpp/thread/thread\" rel=\"nofollow noreferrer\">thread documentation</a>"}], "answers": [{"tags": [], "owner": {"reputation": 401, "user_id": 2271136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cb8de7172cff48a7ef43bc280186438?s=128&d=identicon&r=PG", "display_name": "Arrigo", "link": "https://stackoverflow.com/users/2271136/arrigo"}, "is_accepted": true, "score": 0, "last_activity_date": 1437607236, "last_edit_date": 1437607236, "creation_date": 1437605904, "answer_id": 31575448, "question_id": 31574705, "link": "https://stackoverflow.com/questions/31574705/how-to-properly-call-c-function-in-multi-threaded-design/31575448#31575448", "title": "How to properly call C++ function in multi threaded design?", "body": "<p>C++11 added a big support for multithreading, so I suggest you use it.</p>\n\n<p>You can set this up using threads as said in the comments. Another way could be using <a href=\"http://it.cppreference.com/w/cpp/thread/future\" rel=\"nofollow\">future</a>s and <a href=\"http://en.cppreference.com/w/cpp/thread/promise\" rel=\"nofollow\">promise</a>s if you want to send back easily results.</p>\n\n<p>A future allows to defer a computation to another thread running in background: the thread is automatically handled via the standard library.</p>\n\n<p>A promise allows to set a value once and to read from it as many times as needed. From a promise you can obtain as many futures as you like. It also allows more control on the result of the async computation, like sending back exceptions to the caller. <a href=\"http://www.cplusplus.com/reference/future/promise/set_exception/\" rel=\"nofollow\">Here is an example</a>.</p>\n\n<p>Remember to use locking or atomics whenever multiple threads read and writes to the same resources.</p>\n\n<p>For completeness, a (stupid) example using futures:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;sstream&gt;\n#include &lt;future&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n\nstd::mutex consoleLock;\n\nvoid functionLongExecTime(int id) {\n    int myints[] = {0,1,2};\n    do {\n        std::ostringstream ss;\n        ss &lt;&lt; \"id = \" &lt;&lt; id &lt;&lt; \" -- permutation: \";\n        for (auto i : myints)\n            ss &lt;&lt; i &lt;&lt; ' ';\n        std::lock_guard&lt;std::mutex&gt; guard(consoleLock);\n        std::cout &lt;&lt; ss.str() &lt;&lt; std::endl;\n    } while ( std::next_permutation(std::begin(myints), std::end(myints)) );\n}\n\nstd::future&lt;void&gt; complexLogic(int id) {\n    return std::async(&amp;(functionLongExecTime), id);\n}\n\nint main ()\n{\n    std::vector&lt;std::future&lt;void&gt;&gt; futures;\n\n    // start 5 big computations\n    for (int i = 0; i &lt; 5; ++i) {\n        futures.push_back(complexLogic(i));\n    }\n\n    // do lots of stuff...\n    std::this_thread::sleep_for (std::chrono::seconds(2));\n    std::cout &lt;&lt; \"main awakes\" &lt;&lt; std::endl;\n\n    // ensure that each computation finished\n    for (auto &amp;f : futures) {\n        // if async computation finished, return immediately\n        // otherwise, wait for async completion\n        f.get();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This is an example of output:</p>\n\n<pre><code>id = 0 -- permutation: 0 1 2 \nid = 0 -- permutation: 0 2 1 \nid = 0 -- permutation: 1 0 2 \nid = 0 -- permutation: 1 2 0 \nid = 0 -- permutation: 2 0 1 \nid = 0 -- permutation: 2 1 0 \nid = 1 -- permutation: 0 1 2 \nid = 1 -- permutation: 0 2 1 \nid = 1 -- permutation: 1 0 2 \nid = 1 -- permutation: 1 2 0 \nid = 1 -- permutation: 2 0 1 \nid = 2 -- permutation: 0 1 2 \nid = 1 -- permutation: 2 1 0 \nid = 2 -- permutation: 0 2 1 \nid = 3 -- permutation: 0 1 2 \nid = 2 -- permutation: 1 0 2 \nid = 4 -- permutation: 0 1 2 \nid = 3 -- permutation: 0 2 1 \nid = 2 -- permutation: 1 2 0 \nid = 4 -- permutation: 0 2 1 \nid = 3 -- permutation: 1 0 2 \nid = 2 -- permutation: 2 0 1 \nid = 4 -- permutation: 1 0 2 \nid = 3 -- permutation: 1 2 0 \nid = 2 -- permutation: 2 1 0 \nid = 4 -- permutation: 1 2 0 \nid = 3 -- permutation: 2 0 1 \nid = 3 -- permutation: 2 1 0 \nid = 4 -- permutation: 2 0 1 \nid = 4 -- permutation: 2 1 0 \nmain awakes\n</code></pre>\n\n<p>You can notice the overlapping of lines between async calls, showing the concurrency of the async computations.</p>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 4199462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/920c75ef17e199b07c7eebbc8d4201e2?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/4199462/vivek"}, "is_accepted": false, "score": 0, "last_activity_date": 1437606096, "creation_date": 1437606096, "answer_id": 31575473, "question_id": 31574705, "link": "https://stackoverflow.com/questions/31574705/how-to-properly-call-c-function-in-multi-threaded-design/31575473#31575473", "title": "How to properly call C++ function in multi threaded design?", "body": "<p>You need to create a class that extends the Thread class and has a string data member and a start method. From the WriteData function, you can then create a new thread and call the run method after passing std::string argument to the thread object. The run method will invoke the start(std::string) method in the Thread class.</p>\n\n<p>Here is a prototype:</p>\n\n<pre><code>class MyThread : public Thread\n{\n    private:\n    std::string s;\n....\n    public:\n    setStr(std::string ss) { s = ss;}\n    start() { ... }\n....\n}\n\nmain()\n{\n    class MyThread t;\n    std::string ss = \"Hello\";\n    t.setStr(\n    t.run();\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 28882, "user_id": 785349, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuJeX.jpg?s=128&g=1", "display_name": "quarks", "link": "https://stackoverflow.com/users/785349/quarks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 31575448, "answer_count": 2, "score": 0, "last_activity_date": 1437607236, "creation_date": 1437602174, "question_id": 31574705, "link": "https://stackoverflow.com/questions/31574705/how-to-properly-call-c-function-in-multi-threaded-design", "title": "How to properly call C++ function in multi threaded design?", "body": "<p>I have this code:</p>\n\n<pre><code>void CMyComponent::ProcessData(std::string ss){\n  // do stuff with data, its could take a long while\n}\n</code></pre>\n\n<p>Now I want to call this ProcessData() method from this</p>\n\n<pre><code>STDMETHODIMP CMyComponent::WriteData(BSTR data, BSTR* retstr){\n  std::string ss = _bstr_t(data, false);\n  // Question: How to properly call ProcessData and send the std::string to the multithreaded app\n}\n</code></pre>\n\n<p>The primary goal is that the WriteData will be called but will return immediately as the ProcessData() will run in the background.</p>\n"}, {"tags": ["c++", "most-vexing-parse"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1437602021, "post_id": 31574575, "comment_id": 51104187, "body": "See section 1(b) of the document, it explains these vexing parses."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 3, "creation_date": 1437602212, "post_id": 31574575, "comment_id": 51104259, "body": "Why do you say <code>Rectangle s(origin());</code> does not resemble a vexing parse? It is the canonical example of the most vexing parse. What do you think the most vexing parse is, if not that?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1437602325, "post_id": 31574575, "comment_id": 51104315, "body": "The declaration works fine. Try to <i>use</i> <code>s</code> and see what happens."}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1437604467, "post_id": 31574575, "comment_id": 51105236, "body": "I understand that it resembles a vexing parse. However I am under the impression that a vexing parse would result in a compile time error. for example for a class foo using it like <code>foo a();</code> would give an error while compiling and its a form of most vexing parse.So from what I get is a that a statement could resemble a vexing parse and at the same time compile without any issues. A vexing parse from what I understand is a statement that might resemble a function. <code>&lt;Return type&gt; functionName (parameters..)</code>"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1437604613, "post_id": 31574575, "comment_id": 51105295, "body": "The reason we call it <i>vexing</i> is because the declaration <i>doesn&#39;t</i> cause a compile time error. It only causes an error later in the program <i>if</i> you use the function."}], "answers": [{"comments": [{"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1437604267, "post_id": 31574686, "comment_id": 51105150, "body": "By works fine I meant that it compiles with no errors. I am under the impression that a vexing parse would give a compile time error. for example for a class <code>foo</code> using it like <code>foo a();</code> would give an error while compiling and its a form of most vexing parse."}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "reply_to_user": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1437604405, "post_id": 31574686, "comment_id": 51105209, "body": "@James Franco, not until you try to use it like it is an object"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 4, "creation_date": 1437604954, "post_id": 31574686, "comment_id": 51105417, "body": "@JamesFranco if it were not a valid declaration, then it would not be a vexing parse.   The &quot;vexing&quot; part is because you tried to write a variable declaration but it happened to be syntactically valid as a function declaration.  Function declarations are legal, obviously."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 9, "last_activity_date": 1437602096, "last_edit_date": 1495540897, "creation_date": 1437602096, "answer_id": 31574686, "question_id": 31574575, "link": "https://stackoverflow.com/questions/31574575/how-is-this-a-most-vexing-parse/31574686#31574686", "title": "How is this a most vexing parse?", "body": "<p><code>Rectangle s(origin());</code> is a vexing parse too. It declares a function <code>s</code> which returns <code>rectangle</code>, and takes as argument pointer to function returning <code>origin</code>. Not sure what you meant by \"works fine\".</p>\n\n<p><code>rectangle       w( origin(), extents() );</code> declares a function <code>w</code> returning <code>rectangle</code> and taking arguments: pointer to function returning <code>origin</code>, and pointer to function returning <code>extents</code>.</p>\n\n<p>For more detail <a href=\"https://stackoverflow.com/questions/27613904/why-foo-fbar-can-be-a-declaration-of-a-function-that-takes-type-bar-and-r?lq=1\">see this question</a> or browse the other questions under the <a href=\"/questions/tagged/most-vexing-parse\" class=\"post-tag\" title=\"show questions tagged &#39;most-vexing-parse&#39;\" rel=\"tag\">most-vexing-parse</a> tag.</p>\n"}], "owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 31574686, "answer_count": 1, "score": 5, "last_activity_date": 1437602162, "creation_date": 1437601631, "last_edit_date": 1437602162, "question_id": 31574575, "link": "https://stackoverflow.com/questions/31574575/how-is-this-a-most-vexing-parse", "title": "How is this a most vexing parse?", "body": "<p>I was going through this <a href=\"http://herbsutter.com/2013/05/09/gotw-1-solution/\" rel=\"nofollow\">article</a></p>\n\n<p>and there is a statement in item 3 saying</p>\n\n<pre><code>// C++98 \nrectangle       w( origin(), extents() );       // oops, vexing parse\n</code></pre>\n\n<p>how is the above a most vexing parse. If I did something like this </p>\n\n<pre><code>struct origin\n{\n};\nstruct Rectangle\n{\n    Rectangle(const origin&amp; s)\n    {\n    }\n};\n</code></pre>\n\n<p>The statement </p>\n\n<pre><code> Rectangle s(origin());    \n</code></pre>\n\n<p>works fine and does not resemble a vexing parse. \nWhy did the author say that its a vexing parse. Is that a typo or am I missing something ?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 1, "last_activity_date": 1437602013, "creation_date": 1437602013, "answer_id": 31574668, "question_id": 31574561, "link": "https://stackoverflow.com/questions/31574561/why-temporary-is-created-in-the-following-example/31574668#31574668", "title": "Why temporary is created in the following example", "body": "<p>The result of every conversion to an object type is a temporary.</p>\n\n<p>Beware that Microsoft Visual C++ is non-compliant to this rule, when the conversion is an identity conversion.  I've reported <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/615622/identity-cast-to-non-reference-type-violates-standard\" rel=\"nofollow\">a bug on Microsoft Connect</a> which also shows the rules in the standard that require creation of a temporary:</p>\n\n<blockquote>\n  <p>The result of the expression <code>(T)</code> cast-expression is of type <code>T</code>. The result is an lvalue if <code>T</code> is an lvalue reference type or an rvalue reference to function type and an xvalue if <code>T</code> is an rvalue reference to object type; <strong>otherwise the result is a prvalue</strong>.</p>\n</blockquote>\n\n<p>(section 5.4 <code>[expr.cast]</code> of the Standard, the <code>xvalue</code> language was added in C++11 but the creation of a temporary in this case has always existed)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5059319"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 31574668, "answer_count": 1, "score": 0, "last_activity_date": 1437604484, "creation_date": 1437601563, "last_edit_date": 1437604484, "question_id": 31574561, "link": "https://stackoverflow.com/questions/31574561/why-temporary-is-created-in-the-following-example", "title": "Why temporary is created in the following example", "body": "<p>Could you please explain (better in terms of standard) \nwhy temporary is created in the following example in line marked with comment?</p>\n\n<pre><code>class A\n{\npublic:\n\n    bool operator&lt;(const A&amp; rhs) const {return true;}\n\n};\n\nset&lt;A&gt; s;\n\nint main()\n{\n    s.insert(A());\n    set&lt;A&gt;::iterator pos;\n    pos = s.begin();\n    (A)*pos;              // why temporary created here?\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2012", "windows-xp"], "comments": [{"owner": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 2, "creation_date": 1437600790, "post_id": 31574290, "comment_id": 51103685, "body": "Perhaps, you compiled it as x64. Try to find that option and change it to x86."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5137342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28ccb33886ca58b901c26063f40fca2?s=128&d=identicon&r=PG&f=1", "display_name": "Vippol", "link": "https://stackoverflow.com/users/5137342/vippol"}, "is_accepted": false, "score": -1, "last_activity_date": 1437602133, "last_edit_date": 1437602133, "creation_date": 1437601426, "answer_id": 31574519, "question_id": 31574290, "link": "https://stackoverflow.com/questions/31574290/change-c-target-application-to-xp/31574519#31574519", "title": "Change C++ target application to XP", "body": "<p>The <a href=\"https://msdn.microsoft.com/en-us/library/bb384843.aspx\" rel=\"nofollow\">Microsoft</a> website offers a great description of creating and modifying Win32 Applications. </p>\n\n<p>They even offer a video that gives you a step by step on creating such a thing and any other questions you may have regarding Win32 applications.</p>\n\n<p>Also, you can download and build your application using <a href=\"https://www.visualstudio.com/downloads/download-visual-studio-vs#d-visual-studio-2012-update\" rel=\"nofollow\">Windows XP Targeting Tool Set</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 424, "user_id": 3207429, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/68fc696f1753876049f01476eddfb4c9?s=128&d=identicon&r=PG", "display_name": "vim", "link": "https://stackoverflow.com/users/3207429/vim"}, "is_accepted": false, "score": 1, "last_activity_date": 1437601658, "creation_date": 1437601658, "answer_id": 31574582, "question_id": 31574290, "link": "https://stackoverflow.com/questions/31574290/change-c-target-application-to-xp/31574582#31574582", "title": "Change C++ target application to XP", "body": "<p>You need to build your app using windows xp targeting tool set. You can download it <a href=\"https://www.visualstudio.com/downloads/download-visual-studio-vs#d-visual-studio-2012-update\" rel=\"nofollow\">here</a>. More info on <a href=\"http://blogs.msdn.com/b/vcblog/archive/2012/10/08/windows-xp-targeting-with-c-in-visual-studio-2012.aspx\" rel=\"nofollow\">msdn</a>.</p>\n"}], "owner": {"reputation": 243, "user_id": 3918747, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c548427d9b17a2a1e6653fe575ae22d1?s=128&d=identicon&r=PG&f=1", "display_name": "Kamel", "link": "https://stackoverflow.com/users/3918747/kamel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1437602133, "creation_date": 1437600443, "last_edit_date": 1437601224, "question_id": 31574290, "link": "https://stackoverflow.com/questions/31574290/change-c-target-application-to-xp", "title": "Change C++ target application to XP", "body": "<p>I built a <strong>C++</strong> application with <strong>Microsoft Visual Studio 2012</strong>, but when tried it in <strong>Windows XP</strong>, it returns \"<strong>not valid win 32 application</strong>\".</p>\n\n<p>I found some similar questions in stackoverflow and the msdn blog, and all of them say to change the <strong>toolkit plateform to XP</strong>, but in my case i didn't find this option.</p>\n\n<p>I tried to make an update to the ** C++ redistrubitable** , but this doesn't solve the issue. </p>\n\n<p>Does anyone have an idea about the problem?</p>\n\n<p><a href=\"https://i.stack.imgur.com/bmQci.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bmQci.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "windows", "dacl"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1437602105, "post_id": 31574200, "comment_id": 51104216, "body": "That&#39;s the expected behaviour.  The object namespace isn&#39;t persistent, it is reconstructed each time the system boots.  But there are various ways you can run your code automatically at startup, e.g., make it a system service, or use the task scheduler."}, {"owner": {"reputation": 1, "user_id": 5145269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6c8cb4c1b09394e2345d77ce3dbb769?s=128&d=identicon&r=PG&f=1", "display_name": "Lyonel", "link": "https://stackoverflow.com/users/5145269/lyonel"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1437684330, "post_id": 31574200, "comment_id": 51147126, "body": "Ah @HarryJohnston, that makes sense.  I&#39;ll just run my code at start up as a system service.  Thanks!"}], "owner": {"reputation": 1, "user_id": 5145269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6c8cb4c1b09394e2345d77ce3dbb769?s=128&d=identicon&r=PG&f=1", "display_name": "Lyonel", "link": "https://stackoverflow.com/users/5145269/lyonel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1437600062, "creation_date": 1437600062, "question_id": 31574200, "link": "https://stackoverflow.com/questions/31574200/setnamedsecurityinfo-setting-dacl-for-object-works-but-does-not-persist-after", "title": "SetNamedSecurityInfo: Setting DACL for Object works, but does not persist after system restart", "body": "<p>In Windows 7, I'm trying to give a user group the ability read/write access to a specific disk connected through SCSI so they can run a utility that reads/writes to that disk.  I'm trying to do this through modifying the DACL of the disk object using SetNamedSecurityInfo using C++.</p>\n\n<pre><code>    string devicePath = \"\\\\?\\scsi#disk&amp;ven_wsi&amp;prod_drs1100p#6&amp;383ae3b6&amp;0&amp;000300#{53f56307-b6bf-11d0-94f2-00a0c91efb8b}\";\n    PSID ppsidOwner, ppsidGroup;\n    PACL ppDacl = NULL, ppSacl = NULL;\n    PSECURITY_DESCRIPTOR ppSecurityDescriptor = NULL;\n    char objName[200];\n    strcpy(objName, devicePath.c_str());\n\n    // Get SecurityInfo\n    GetNamedSecurityInfoA(objName, 1, DACL_SECURITY_INFORMATION | GROUP_SECURITY_INFORMATION | OWNER_SECURITY_INFORMATION, &amp;ppsidOwner, &amp;ppsidGroup, &amp;ppDacl, NULL, &amp;ppSecurityDescriptor);\n\n    // Build ACE\n    EXPLICIT_ACCESS str_ACE;\n    DWORD rightsMask = STANDARD_RIGHTS_ALL | GENERIC_ALL | GENERIC_WRITE | GENERIC_READ;\n    BuildExplicitAccessWithNameA(&amp;str_ACE, \"DRS Operators\", rightsMask, GRANT_ACCESS, NO_INHERITANCE);\n    PACL newPACL;\n\n    // Set ACE then Set SecurityInfo\n    SetEntriesInAclA(1, &amp;str_ACE, ppDacl, &amp;newPACL);\n    SetNamedSecurityInfoA(objName, 1, DACL_SECURITY_INFORMATION, NULL, NULL, newPACL, NULL);\n</code></pre>\n\n<p>The code I wrote seems to work, which I have confirmed by using GetNamedSecurityInfoA on the object before and after I change the DACL, then passing the received SecurityDescriptors to ConvertSecurityDescriptorToStringSecurityDescriptorA, and making sure that they have changed.  After running through this code, I'm able to log in as any user in the \"DRS Operators\" user group and am able to read/write to the disk.</p>\n\n<p>The only problem I'm having is that the changes to the DACL do not persist after the system shuts down.  After a restart, the DACL is set back to what it was before I ran through the code above (which I checked by using GetNamedSecurityInfoA).  Does anyone here have an idea of why the changes aren't persisting?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 0, "creation_date": 1437599771, "post_id": 31574098, "comment_id": 51103159, "body": "What does <code>display()</code> do?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1437599776, "post_id": 31574098, "comment_id": 51103162, "body": "How is <code>display</code> defined? Does it take its argument by value or by reference?"}, {"owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "edited": false, "score": 0, "creation_date": 1437599931, "post_id": 31574098, "comment_id": 51103264, "body": "Oh! I thought it&#39;s evident from the attached link. I will write the whole program."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1437599977, "post_id": 31574098, "comment_id": 51103283, "body": "It might be obvious to me or you but not everyone reading this post will figure it out."}, {"owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "edited": false, "score": 0, "creation_date": 1437600001, "post_id": 31574098, "comment_id": 51103293, "body": "I am sorry for that, I have edited my original post. :)"}], "answers": [{"comments": [{"owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "edited": false, "score": 0, "creation_date": 1437600052, "post_id": 31574139, "comment_id": 51103321, "body": "Right, so when this happens, won&#39;t it just call the function <code>getlength</code>? Why exactly will the copy constructor be called? I am sorry for this but I am reading these for the first time."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1437600265, "post_id": 31574139, "comment_id": 51103410, "body": "The copy constructor is called because when you pass by value, a temporary is <i>created</i> (Note the word <i>created</i>).  To create the temporary <code>Line</code>, it has to be constructed, hence the constructor call."}, {"owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "edited": false, "score": 0, "creation_date": 1437601086, "post_id": 31574139, "comment_id": 51103818, "body": "Also, in the above code, why exactly they have done, <code>*obj.ptr</code>?"}, {"owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "edited": false, "score": 0, "creation_date": 1437601127, "post_id": 31574139, "comment_id": 51103833, "body": "Since <code>ptr</code> is a pointer too, therefore to access the value at that particular location, shouldn&#39;t it be something like, <code>*obj.*ptr</code>?"}, {"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "reply_to_user": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "edited": false, "score": 0, "creation_date": 1437601294, "post_id": 31574139, "comment_id": 51103894, "body": "@JohnLui In the signature of Line copy constructor, obj is declared to be a reference to a (const) object o type Line. It&#39;s not a pointer, but a reference, so you can access its members without the *."}, {"owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "edited": false, "score": 0, "creation_date": 1437601853, "post_id": 31574139, "comment_id": 51104130, "body": "That&#39;s true, so it should be used something like this, <code>obj.*ptr</code>? Because, <code>*ptr</code> is the actual value that we will have to copy."}, {"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1437602618, "post_id": 31574139, "comment_id": 51104441, "body": "* has lower precedence than ., so *ptr.obj is the same as *(ptr.obj)"}, {"owner": {"reputation": 658, "user_id": 4763421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daf648d3b48bfd2ceb55c75e71b32288?s=128&d=identicon&r=PG&f=1", "display_name": "blashser", "link": "https://stackoverflow.com/users/4763421/blashser"}, "edited": false, "score": 1, "creation_date": 1437603030, "post_id": 31574139, "comment_id": 51104632, "body": "If you want to avoid the copy constructor the object should be passed as reference or pointer: <code>void display2(Line&amp; obj)</code> or <code>void display3(Line* obj)</code>"}], "tags": [], "owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1437601002, "last_edit_date": 1437601002, "creation_date": 1437599816, "answer_id": 31574139, "question_id": 31574098, "link": "https://stackoverflow.com/questions/31574098/how-in-this-copy-constructors-is-called/31574139#31574139", "title": "How in this copy constructors is called?", "body": "<p>You are passing <code>line</code> by  value to <code>display</code>.</p>\n\n<p>When you pass an object to a function by value, a copy of the object is created on the stack. In your case, the <code>obj</code> parameter of the <code>display</code> function is created calling the copy constructor of the <code>class Line</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 4331697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6fbc3cb28a217a31d6e761385747f2?s=128&d=identicon&r=PG&f=1", "display_name": "Springfield762", "link": "https://stackoverflow.com/users/4331697/springfield762"}, "is_accepted": false, "score": 1, "last_activity_date": 1437600200, "creation_date": 1437600200, "answer_id": 31574233, "question_id": 31574098, "link": "https://stackoverflow.com/questions/31574098/how-in-this-copy-constructors-is-called/31574233#31574233", "title": "How in this copy constructors is called?", "body": "<p>When you passed solid object as display(Line) function parameter, copy constructor is called because in C++ arguments are passed by value when you pass solid object. So when you passed Line object into function, copy constructor is called to create object copy from existing one. To avoid copying you need to pass parameters by reference or pointer(smart or normal).</p>\n"}, {"tags": [], "owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "is_accepted": false, "score": 1, "last_activity_date": 1437600223, "creation_date": 1437600223, "answer_id": 31574242, "question_id": 31574098, "link": "https://stackoverflow.com/questions/31574098/how-in-this-copy-constructors-is-called/31574242#31574242", "title": "How in this copy constructors is called?", "body": "<p><code>display</code> is defined like:</p>\n\n<pre><code>void display(Line obj)\n</code></pre>\n\n<p>This is pass by value and not pass by reference. A copy must be made which is why the copy constructor is called.</p>\n"}, {"tags": [], "owner": {"reputation": 1597, "user_id": 1307255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7XEd.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/1307255/nishant"}, "is_accepted": false, "score": 1, "last_activity_date": 1437627119, "creation_date": 1437627119, "answer_id": 31578392, "question_id": 31574098, "link": "https://stackoverflow.com/questions/31574098/how-in-this-copy-constructors-is-called/31578392#31578392", "title": "How in this copy constructors is called?", "body": "<p>Your function <code>display</code> is defined like:</p>\n\n<pre><code>void display(Line obj)\n</code></pre>\n\n<p>This is a <code>call-by-value</code>, and in the case of <code>call-by-value</code>the copy of the argument is made, not the actual object is passed. Hence when your function is called <code>copy constructor</code>is invoked.\nIf you want to avoid it, pass parameter by reference or pointer.</p>\n\n<p>Change the definition of <code>Display</code> from <code>void display(Line obj)</code> to </p>\n\n<pre><code>void display(Line *obj)\n</code></pre>\n\n<p>and in <code>main</code>change the function call from <code>display(line);</code> to <code>display(&amp;line);</code></p>\n"}], "owner": {"reputation": 1314, "user_id": 4993482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/708d1930c0cda22936291c493cdd703e?s=128&d=identicon&r=PG&f=1", "display_name": "John Lui", "link": "https://stackoverflow.com/users/4993482/john-lui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 31574139, "answer_count": 4, "score": 0, "last_activity_date": 1437627119, "creation_date": 1437599659, "last_edit_date": 1437599968, "question_id": 31574098, "link": "https://stackoverflow.com/questions/31574098/how-in-this-copy-constructors-is-called", "title": "How in this copy constructors is called?", "body": "<p>I am reading copy constructors for the first time. Here is the link from which I am reading it: <code>http://www.tutorialspoint.com/cplusplus/cpp_copy_constructor.htm</code></p>\n\n<p>Now, in their first example, in the output, they have written this: </p>\n\n<pre><code>Normal constructor allocating ptr\nCopy constructor allocating ptr.\nLength of line : 10\nFreeing memory!\nFreeing memory!\n</code></pre>\n\n<p>I just want to know, how exactly the copy constructor is getting called here? In the <code>main</code> function, they have written it as: </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Line\n{\n   public:\n      int getLength( void );\n      Line( int len );             // simple constructor\n      Line( const Line &amp;obj);  // copy constructor\n      ~Line();                     // destructor\n\n   private:\n      int *ptr;\n};\n\n// Member functions definitions including constructor\nLine::Line(int len)\n{\n    cout &lt;&lt; \"Normal constructor allocating ptr\" &lt;&lt; endl;\n    // allocate memory for the pointer;\n    ptr = new int;\n    *ptr = len;\n}\n\nLine::Line(const Line &amp;obj)\n{\n    cout &lt;&lt; \"Copy constructor allocating ptr.\" &lt;&lt; endl;\n    ptr = new int;\n   *ptr = *obj.ptr; // copy the value\n}\n\nLine::~Line(void)\n{\n    cout &lt;&lt; \"Freeing memory!\" &lt;&lt; endl;\n    delete ptr;\n}\nint Line::getLength( void )\n{\n    return *ptr;\n}\n\nvoid display(Line obj)\n{\n   cout &lt;&lt; \"Length of line : \" &lt;&lt; obj.getLength() &lt;&lt;endl;\n}\n\n// Main function for the program\nint main( )\n{\n   Line line(10);\n\n   display(line);\n\n   return 0;\n}\n</code></pre>\n\n<p>So, it's just <code>Line line(10)</code> which will call the constructor for setting length. Why exactly will the copy constructor be called? Wont' the constructor be called when we pass it an actual object of class <code>Line</code>?</p>\n"}, {"tags": ["c++", "boost", "visual-studio-2013", "linker", "command-prompt"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1437601525, "post_id": 31573993, "comment_id": 51103978, "body": "Even linking a dynamic library (DLL) requires an import library during link."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 2097442, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/ca18f475ee1495a02604517d7cd829cc?s=128&d=identicon&r=PG", "display_name": "Neo Mosaid", "link": "https://stackoverflow.com/users/2097442/neo-mosaid"}, "edited": false, "score": 0, "creation_date": 1437601528, "post_id": 31574504, "comment_id": 51103979, "body": "i did it , i added <b>LIB</b> and <b>INCLUDE</b> to the environment variable , however  this is not the issue here"}, {"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "reply_to_user": {"reputation": 315, "user_id": 2097442, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/ca18f475ee1495a02604517d7cd829cc?s=128&d=identicon&r=PG", "display_name": "Neo Mosaid", "link": "https://stackoverflow.com/users/2097442/neo-mosaid"}, "edited": false, "score": 0, "creation_date": 1437601757, "post_id": 31574504, "comment_id": 51104095, "body": "The error message indicates that the lib file cannot be found. So either you don&#39;t have that lib file, or you do not correctly specify the directory. Regardless whether you link dynamically or static, you always need a lib file. But the file name will be different."}, {"owner": {"reputation": 315, "user_id": 2097442, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/ca18f475ee1495a02604517d7cd829cc?s=128&d=identicon&r=PG", "display_name": "Neo Mosaid", "link": "https://stackoverflow.com/users/2097442/neo-mosaid"}, "edited": false, "score": 0, "creation_date": 1437602530, "post_id": 31574504, "comment_id": 51104402, "body": "yes the <b>-s prefix</b> in the lib file name means static linking, i think the normal build of boost library make only libs for dynamic linking , i looked it up and one solution is to make a complete build <code>.\\b2 --build-type=complete</code> but this not an acceptable solution for me, the after build size alone of boost is a big inconvenience for me"}], "tags": [], "owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "is_accepted": false, "score": 0, "last_activity_date": 1437601359, "creation_date": 1437601359, "answer_id": 31574504, "question_id": 31573993, "link": "https://stackoverflow.com/questions/31573993/how-to-dynamically-link-libraries-in-command-line/31574504#31574504", "title": "How to Dynamically link libraries in command line?", "body": "<p>You have to add the boost directory to the <code>%LIB%</code> environment variable, for example</p>\n\n<pre><code>set LIB=C:\\boost\\boost_1_57_0\\stage\\lib;%LIB%\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 2097442, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/ca18f475ee1495a02604517d7cd829cc?s=128&d=identicon&r=PG", "display_name": "Neo Mosaid", "link": "https://stackoverflow.com/users/2097442/neo-mosaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1278, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1437601478, "creation_date": 1437599247, "last_edit_date": 1437601478, "question_id": 31573993, "link": "https://stackoverflow.com/questions/31573993/how-to-dynamically-link-libraries-in-command-line", "title": "How to Dynamically link libraries in command line?", "body": "<p>I have been struggling with this issue for a long time now, lets say i take notepad++ and write some quick c++ code using boost library \nand i use visual studio <strong>Developer Command Prompt for VS2013</strong> to compile with command prompt, I always get some linker errors like :</p>\n\n<p><code>LINK : fatal error LNK1104: cannot open file 'libboost_system-vc120-mt-s-1_58.lib'</code></p>\n\n<p>but if i create an empty project in visual studio, add boost include and lib directories , the project will be built successfully. Apparently in command line the linking is static not dynamic.</p>\n\n<p>my question is <strong>How to Dynamically link libraries in command line ?</strong> </p>\n"}, {"tags": ["c++", "qt", "indexing"], "comments": [{"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 1, "creation_date": 1437605591, "post_id": 31573946, "comment_id": 51105616, "body": "I believe that the answer to the duplicated question is questionable at best... The comment from The Paramagnetic Croissant in the other question is probably a better answer. This is one of the many annoying poor design decision in qt. For the record, try to not learn from Qt and do  use signed and unsigned properly."}], "answers": [{"comments": [{"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 1, "creation_date": 1437599467, "post_id": 31573971, "comment_id": 51102986, "body": "<code>int</code> is only guaranteed to be at least 16k, not 2 billion. Besides that, <code>size_t</code> is not limited to 4 billion on most current desktop computers - and even phones are starting to enter the 64 bit era!"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "reply_to_user": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 0, "creation_date": 1437599589, "post_id": 31573971, "comment_id": 51103052, "body": "@gha.st:  I don&#39;t think Qt is built on any platform that uses a 16 bit <code>int</code>."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 0, "creation_date": 1437599622, "post_id": 31573971, "comment_id": 51103068, "body": "@gha.st It doesn&#39;t matter what <code>int</code> is guaranteed to be, since Qt supports a finite number of platforms, and none of them have 16 bit ints. It&#39;s a done deal, no &quot;ifs&quot; or &quot;buts&quot; about it. Moreover, <code>Qt</code> will simply not work on anything with 16 bit ints. It&#39;ll limp along at best, with lots of broken functionality. I&#39;ve tried it once and it wasn&#39;t pretty. I had to do a grep replace of <code>int</code> with <code>int32_t</code> to get it working. Again, Qt&#39;s (and C++&#39;s) collections make little sense with such large item counts, so <code>int</code> is, from a practical point of view, perfectly adequate."}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 1, "creation_date": 1437606093, "post_id": 31573971, "comment_id": 51105763, "body": "It&#39;s not only about 2^32 vs 2^31. Checking if an <code>unsigned</code> is a valid index is easy ( <code>i &lt; size()</code> vs  <code>i &gt;=0 &amp;&amp; i &lt; size()</code>).  Moreover, using <code>int</code> where <code>unsigned</code> is the logically correct choice often hides subtle bugs, due to signed-to-unsigned implicit conversion (unless you use <code>signed int</code> everywhere in your application). I disagree that <code>Qt&#39;s (and C++&#39;s) collections make little sense with such large item counts,</code>, I can see use cases for a 4Gb <code>QByteArray</code> (won&#39;t use QByteArray because it&#39;s too hard to prevent COW, but it works properly with the STL containers)."}, {"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 1, "creation_date": 1437637147, "post_id": 31573971, "comment_id": 51115306, "body": "I have used STL containers with significantly more than 4 GB for previous projects - and they work just fine. And explaining away a bad design choice of a multi-platform toolkit by saying that it is not <i>that</i> multi-platform is really funny ;D"}, {"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1437639021, "post_id": 31573971, "comment_id": 51116294, "body": "In my opinion it matters from a logical point of view. If I want to access some data it&#39;s natural for me to use an unsigned index because in an array negative index have not meaning (ok, they can represent indices from the end of the array, like Mathematica, but this is not the case). Int is more error prone, and I don&#39;t agree to use negative indices as return value when some error occurs. There are better error handling methods in C++. Due to this I wanted to know if there was some reason for this choiche that I don&#39;t understand."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "reply_to_user": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 1, "creation_date": 1437884701, "post_id": 31573971, "comment_id": 51214087, "body": "@gha.st: why is it funny that Qt doesn&#39;t target platforms that can&#39;t reasonably support its functionality? It seems like that would be a complete waste of time and effort."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1437599172, "creation_date": 1437599172, "answer_id": 31573971, "question_id": 31573946, "link": "https://stackoverflow.com/questions/31573946/qvector-qlist-etc-why-index-is-int-and-not-size-t/31573971#31573971", "title": "QVector, QList etc.. why index is int and not size_t", "body": "<p>It's an arbitrary choice. The negative numbers are not valid indices when used to access elements. Sometimes they may have special meaning when used for methods other than direct element access.</p>\n\n<p>Normally it doesn't matter that you can only access 2 billion items instead of 4 billion. If you're anywhere near that number of items, you should be using something else for your container anyway.</p>\n"}], "owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "closed_date": 1437601960, "accepted_answer_id": 31573971, "answer_count": 1, "score": 3, "last_activity_date": 1437599172, "creation_date": 1437599029, "question_id": 31573946, "link": "https://stackoverflow.com/questions/31573946/qvector-qlist-etc-why-index-is-int-and-not-size-t", "closed_reason": "Duplicate", "title": "QVector, QList etc.. why index is int and not size_t", "body": "<p>I'm using some Qt container, like <code>QList</code> and <code>QVector</code>, and I've noticed that the index for accessing data is defined as <code>int</code> instead that <code>size_t</code>. I've always seen <code>size_t</code> in STL, Boost and other containers, so I'd like to know why Qt does not use it. Is there some meaning for negative numbers regarding these containers?</p>\n"}, {"tags": ["c++", "eclipse", "macos", "gdb", "osx-yosemite"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 4546710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H2Nuj_UHaRA/AAAAAAAAAAI/AAAAAAAAAH4/vbpZCysNnhU/photo.jpg?sz=128", "display_name": "remynaps", "link": "https://stackoverflow.com/users/4546710/remynaps"}, "is_accepted": false, "score": 1, "last_activity_date": 1437644187, "creation_date": 1437644187, "answer_id": 31583539, "question_id": 31573928, "link": "https://stackoverflow.com/questions/31573928/mac-os-x-yosemite-c-eclipse-error-error-while-launching-command-gdb-versi/31583539#31583539", "title": "Mac OS X Yosemite C++ Eclipse error: &quot;Error while launching command: gdb --version&quot;", "body": "<p>Seems like brew was unable to find gdb in its default search location.\nThe line 'Searching Taps...' means that brew is searching other git repositories for the software you are trying to install. </p>\n\n<p>In this case it found two repositories that contain something useful.</p>\n\n<p>homebrew/dupes/gdb and Caskroom/cask/macgdbp</p>\n\n<p>homebrew/dupes/gdb would be the one you need as this is the gdb version apple used for xcode before it switched to other tools.</p>\n\n<p>This site has a really good tutorial for installing gdb using either brew or macports <a href=\"http://ntraft.com/installing-gdb-on-os-x-mavericks/\" rel=\"nofollow\">http://ntraft.com/installing-gdb-on-os-x-mavericks/</a></p>\n\n<p>I used this command to try to install gdb.</p>\n\n<pre><code>brew install homebrew/dupes/gdb\n</code></pre>\n\n<p>this should produce the following output</p>\n\n<pre><code>Installing gdb from homebrew/homebrew-dupes\nDownloading http://ftpmirror.gnu.org/gdb/gdb-7.9.1.tar.xz\n\n./configure --prefix=/usr/local/Cellar/gdb/7.9.1 --with-system-readline --with-lzma --with-python=/usr\nmake\nconfig.status: creating Makefile\nconfig.status: creating testsuite/Makefile\nconfig.status: creating config.h\nconfig.status: executing default commands**strong text**\nmake: *** [all] Error 2\n</code></pre>\n\n<p>The installation process failed on my macbook. This was most likely due to me using the os x 10.11 beta. But it might also be because the gdb version on brew does not work well with yosemite and higher. If this is the case you could try the macports install using the above tutorial.</p>\n\n<p>I can't currently use macports because my os x version. but if you are using yosemite it should be fine.</p>\n"}], "owner": {"reputation": 31, "user_id": 5144937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/546235f3d0388d5ebc0f14954480f29f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Johnson", "link": "https://stackoverflow.com/users/5144937/adam-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1328, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437644187, "creation_date": 1437598972, "last_edit_date": 1495541653, "question_id": 31573928, "link": "https://stackoverflow.com/questions/31573928/mac-os-x-yosemite-c-eclipse-error-error-while-launching-command-gdb-versi", "title": "Mac OS X Yosemite C++ Eclipse error: &quot;Error while launching command: gdb --version&quot;", "body": "<p>I am following a C++ Eclipse tutorial and learning how to debug. I filled in the sections of the Debug Configurations window as it said in the tutorial and clicked 'Debug'.\nI get the error \"Error while launching command: gdb --version\". I found a similar post here: <a href=\"https://stackoverflow.com/questions/21082234/mac-c-eclipse-cannot-debug-error-while-launching-command-gdb-version\">Mac C++/eclipse cannot debug: Error while launching command: gdb --version</a></p>\n\n<p>and there the user said he already had GDB installed. I tried to install it using the instructions at this link: <a href=\"http://www.patosai.com/blog/post/installing-gdb-on-mac-os-x-yosemite\" rel=\"nofollow noreferrer\">http://www.patosai.com/blog/post/installing-gdb-on-mac-os-x-yosemite</a></p>\n\n<p>and when I entered the first command \"brew install gdb\" I got the following in my terminal:</p>\n\n<p>Error: No available formula for gdb</p>\n\n<p>==> Searching formulae...</p>\n\n<p>cgdb   gdbm   pgdbf</p>\n\n<p>==> Searching taps...</p>\n\n<p>homebrew/dupes/gdb     Caskroom/cask/macgdbp</p>\n\n<p>I think there may have been a problem there because when I entered the final command of the \"Installing GDB on Mac OS X Yosemite\" tutorial above: \"codesign -s gdb-cert /usr/local/bin/gdb\" it said \"no such file or directory.</p>\n\n<p>Can anyone see where I've made an error please? Thanks :)</p>\n"}, {"tags": ["c++", "multithreading", "image", "qt", "signals-slots"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1437599309, "post_id": 31573857, "comment_id": 51102911, "body": "You&#39;ll really need to post a test case for this, since I can&#39;t reproduce it at all. Remember: single file."}, {"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1437599826, "post_id": 31573857, "comment_id": 51103188, "body": "Damn... I can try, but since the whole stuff depends on SQL connection delays, etc..., I bet the problem will disappear as soon as the delays are removed"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1437600076, "post_id": 31573857, "comment_id": 51103331, "body": "Some other code is writing over memory it doesn&#39;t own and destroys the image data. You can easily add delays and things like that to your test case, but they will prove immaterial. Instead of depending on delays, insert explicit synchronization primitives to synchronize the worker thread with the main thread."}], "answers": [{"tags": [], "owner": {"reputation": 343, "user_id": 4068296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BYt8u.png?s=128&g=1", "display_name": "Roger Figueroa Quintero", "link": "https://stackoverflow.com/users/4068296/roger-figueroa-quintero"}, "is_accepted": false, "score": 0, "last_activity_date": 1443496699, "last_edit_date": 1443496699, "creation_date": 1443249655, "answer_id": 32794415, "question_id": 31573857, "link": "https://stackoverflow.com/questions/31573857/corrupt-qimage-after-a-signal-slot-call-between-two-different-threads/32794415#32794415", "title": "Corrupt QImage after a signal/slot call between two different threads", "body": "<p>Ok, o that the image is not corrupted you should ensure the following:each data containing the structure that are sending must have copy constructor, avoids sending data pointer and if you do it sure that these reside in memory heap, the connection type for these cases is Qt::QueuedConnection, the label on establish the image that you think should be configured as follows:</p>\n\n<pre><code>label-&gt;setBackgroundRole(QPalette::Base);\nlabel-&gt;setSizePolicy(QSizePolicy::Ignored, QSizePolicy::Ignored);\nlabel-&gt;setScaledContents(true);\n</code></pre>\n\n<p>the slot where the image or comes your structure should look like this, in my case with opencv and QT is:</p>\n\n<pre><code>void interfaz::actImagenFromVideo(cv::Mat myImage)\n{\nQImage image(myImage.data,myImage.cols, myImage.rows, myImage.step, QImage::Format_RGB888 );\nlabel-&gt;setPixmap(QPixmap::fromImage(image.rgbSwapped()));\n}\n</code></pre>\n\n<p>he run function of your QThread should look something like:</p>\n\n<pre><code>void THREAD::run()\n{\n\n while(true){\n {\n QMutexLocker locker(&amp;mutex);\n if (stopped) {\n  stopped = false;\n  break;\n  }\n  }\n\n  cap&gt;&gt;videoIn;\n  emit image_ready(videoIn.clone()); //the use of cv::Mat::clone() is very   important in openCV\n\n  }\n\n }\n</code></pre>\n"}], "owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 661, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443496699, "creation_date": 1437598678, "question_id": 31573857, "link": "https://stackoverflow.com/questions/31573857/corrupt-qimage-after-a-signal-slot-call-between-two-different-threads", "title": "Corrupt QImage after a signal/slot call between two different threads", "body": "<p>I am sending a QImage via a signal/slot mechanism, between two threads (a background DB thread and a GUI thread). The GUI slot receives a corrupt image (some pixels are randomly corrupt). I have done this already, and never had any issue. What could be wrong?</p>\n\n<p>The programm is too complex to be included here, but here is some relevant information:</p>\n\n<ol>\n<li>The sending thread (DB) is a regular QThread, with an event loop, running a DataBaseInterface QObject class which was moved to this thread</li>\n<li>The signal/slot connection was done after the moveToThread, so each object is in its final thread. This means that explicitely using QueuedConnection makes no difference as this is already the case.</li>\n<li><p>The QImage is not sent directly in the signal/slot parameters, but within a struct which contains other stuff (three QVectors). This struct was registered using:</p>\n\n<pre><code>qRegisterMetaType&lt;MyStruct&gt;(\"MyStruct\");\n</code></pre></li>\n<li><p>The QImage was not created using an external buffer, but with the (width, height, Format) constructor. So the image buffer is maintained internally and thus implicitely shared</p></li>\n<li>If I save the image to disk in the DB thread just after emitting the signal, it is good. If I save it just at the beginning of the slot, it is corrupt.</li>\n</ol>\n\n<p>Any idea?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "performance", "vector", "std"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1437598322, "post_id": 31573756, "comment_id": 51102414, "body": "<code>array</code> compiles faster and is standard layout. <code>tuple</code> is a mess."}], "answers": [{"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 4, "last_activity_date": 1437599312, "last_edit_date": 1437599312, "creation_date": 1437598643, "answer_id": 31573849, "question_id": 31573756, "link": "https://stackoverflow.com/questions/31573756/should-i-use-a-vector-of-tuple-or-vector-of-array/31573849#31573849", "title": "Should I use a vector of tuple or vector of array?", "body": "<p>You do not need any features of <code>std::tuple</code> here, so go with the most standard tool that works. And that is <code>std::array</code>.</p>\n\n<p>(Or some <code>using ... = std::array;</code> or <code>struct {std::array};</code> with a nice name.)</p>\n\n<p>Concerning performance, you would have to measure. But I am pretty sure that <code>std::array</code> is at least as fast as <code>std::tuple</code>, but most likely equally fast as both do all their work at compile time.</p>\n"}], "owner": {"reputation": 740, "user_id": 4524860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-Z7TV8IXJjiw/AAAAAAAAAAI/AAAAAAAAABA/hedLPR9Xebw/photo.jpg?sz=128", "display_name": "asdfasdf", "link": "https://stackoverflow.com/users/4524860/asdfasdf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 31573849, "answer_count": 1, "score": 2, "last_activity_date": 1437599458, "creation_date": 1437598293, "last_edit_date": 1437599458, "question_id": 31573756, "link": "https://stackoverflow.com/questions/31573756/should-i-use-a-vector-of-tuple-or-vector-of-array", "title": "Should I use a vector of tuple or vector of array?", "body": "<p>I'm trying to have a vector of points. How should I construct my vector?</p>\n\n<pre><code>std::vector&lt;std::array&lt;double, 3&gt; &gt; listA;\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>std::vector&lt;std::tuple&lt;double, double, double&gt; &gt; listB;\n</code></pre>\n\n<p>Is there any performance advantage if I choose one vs the other?</p>\n"}, {"tags": ["java", "android", "c++", "java-native-interface", "native"], "comments": [{"owner": {"reputation": 3761, "user_id": 980521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7QlFy.png?s=128&g=1", "display_name": "ecle", "link": "https://stackoverflow.com/users/980521/ecle"}, "edited": false, "score": 0, "creation_date": 1437619294, "post_id": 31573726, "comment_id": 51108956, "body": "Does the so file <code>&#47;home&#47;..&#47;app&#47;src&#47;main&#47;obj&#47;local&#47;arm64-v8a&#47;libb.so</code> exist?"}, {"owner": {"reputation": 1, "user_id": 5145394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaf1280ebf5c35e322bd08ba3a276ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Nanoha", "link": "https://stackoverflow.com/users/5145394/ken-nanoha"}, "reply_to_user": {"reputation": 3761, "user_id": 980521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7QlFy.png?s=128&g=1", "display_name": "ecle", "link": "https://stackoverflow.com/users/980521/ecle"}, "edited": false, "score": 0, "creation_date": 1437668025, "post_id": 31573726, "comment_id": 51137477, "body": "Yes, libb is present in all the obj/local + libs/ABI folders, I even tried to push it manually onto the device&#39;s folders but it still could not find it."}, {"owner": {"reputation": 6517, "user_id": 3615879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCDbt.jpg?s=128&g=1", "display_name": "Simon Marquis", "link": "https://stackoverflow.com/users/3615879/simon-marquis"}, "edited": false, "score": 0, "creation_date": 1440258889, "post_id": 31573726, "comment_id": 52203948, "body": "A <code>arm64</code> library will only work on abi-compatible devices like the Nexus9"}], "owner": {"reputation": 1, "user_id": 5145394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaf1280ebf5c35e322bd08ba3a276ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Nanoha", "link": "https://stackoverflow.com/users/5145394/ken-nanoha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1437598184, "creation_date": 1437598184, "question_id": 31573726, "link": "https://stackoverflow.com/questions/31573726/android-jni-unable-to-communicate-between-native-application-layer-in-64-bit", "title": "Android JNI - Unable to communicate between native &amp; application layer in 64-bit Lollipop", "body": "<p>I am having an issue regarding being able to reach a shared object file when I tried to build my application. I am unable to link the native .so file from application. </p>\n\n<p>The .so file is a 64-bit library and I'm trying to get it to work with Lollipop. Its' 32-bit counterpart works fine on Lollipop. I verified that there is nothing wrong with the .so file because when it is linked natively it works fine. However, when I try to reach that file via the application it was failed to be loaded correctly. </p>\n\n<p>E/art     ( 2964): dlopen(\"/data/app/../lib/arm64/liba.so\", RTLD_LAZY) failed: dlopen failed: could not load library \"/home/../app/src/main/obj/local/arm64-v8a/libb.so\" needed by \"/data/app/../lib/arm64/liba.so\"; caused by library \"/home/../app/src/main/obj/local/arm64-v8a/libb.so\" not found</p>\n"}, {"tags": ["c#", "c++", "visual-studio"], "answers": [{"tags": [], "owner": {"reputation": 3903, "user_id": 220068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9d5c08fe6fa0893bc8f46328e454a7b?s=128&d=identicon&r=PG", "display_name": "Russ", "link": "https://stackoverflow.com/users/220068/russ"}, "is_accepted": false, "score": 1, "last_activity_date": 1437599075, "creation_date": 1437599075, "answer_id": 31573952, "question_id": 31573624, "link": "https://stackoverflow.com/questions/31573624/setting-up-a-project-for-release-in-visual-studio-2013/31573952#31573952", "title": "Setting up a project for release in visual studio 2013", "body": "<p>Adding the dll as a reference DOES NOT include the dll with your project--you are simply telling your project to use the library for your code.  The dll will need to be installed on all computers that run your application, for your application to use the dll.</p>\n\n<p>If the dll also uses three files (as you specified), then those files must also be included, and be installed in the expected path.</p>\n\n<p>Presuming you have redistribution rights on the dll you mention, you can include the dll in your project.  Be sure to set the \"copy\" property as \"copy always\" or \"copy if newer\" and change the reference to use the copy that ends up in you bin folder.   Then you only need to be sure to include that dll and install it in the same folder as your application.</p>\n"}], "owner": {"reputation": 21, "user_id": 3420488, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ce780ed59f0c123a8194d70a32bc2d81?s=128&d=identicon&r=PG&f=1", "display_name": "Blazerhawk", "link": "https://stackoverflow.com/users/3420488/blazerhawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437599075, "creation_date": 1437597782, "question_id": 31573624, "link": "https://stackoverflow.com/questions/31573624/setting-up-a-project-for-release-in-visual-studio-2013", "title": "Setting up a project for release in visual studio 2013", "body": "<p>I'm working on a C# project that is nearing release. As part of this, I have started building the project and testing it on another machine. This has revealed some odd problems. My biggest concern, though, is that my project is failing to run. I can do some basic things, but when I try to use my projects primary functionality it crashes. Using Visual Studio, I was able to determine the exception that was causing the crash. </p>\n\n<p>Essentially, I'm getting a FileNotFoundException on the dll that contains most of my project's functional code. I'm not sure if I've made an error in adding the dll to my project, or if there's a problem in one of the files in the dll.</p>\n\n<p>The dll was added as a reference using the <strong>Project</strong> -> <strong>Add Reerences</strong> feature of the user interface.</p>\n\n<p>The dll contains three files which contain absolute file paths (these are for #import statements). Example follows.</p>\n\n<pre><code>#import \"C:\\Users\\Me\\Documents\\Projects\\MyProject\\Delegates\\bin\\MyDelegate.tlb\" raw_interfaces_only\n</code></pre>\n\n<p>My hang up is I'm not exactly sure what I'm doing wrong here. I suspect that those import statements are causing problems, but I'm not exactly sure how to fix them if they in fact are the problem. This is my first c#/c++ project so any help would be appreciated.</p>\n"}, {"tags": ["c++", "qt", "qlistwidget"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 3381057, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d1d8f93dea0f2f7a0a019cbdf811e10?s=128&d=identicon&r=PG&f=1", "display_name": "Evan B", "link": "https://stackoverflow.com/users/3381057/evan-b"}, "edited": false, "score": 0, "creation_date": 1438113671, "post_id": 31573762, "comment_id": 51313658, "body": "When I do that I get errors: C2061: syntax error: identifier &#39;QListWidgetItem&#39; error: C2511: &#39;void Dialog::on_listWidget_Fav_1_itemClicked(QListWidgetItem *)&#39; : overloaded member function not found in &#39;Dialog&#39;"}, {"owner": {"reputation": 73, "user_id": 3381057, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d1d8f93dea0f2f7a0a019cbdf811e10?s=128&d=identicon&r=PG&f=1", "display_name": "Evan B", "link": "https://stackoverflow.com/users/3381057/evan-b"}, "edited": false, "score": 0, "creation_date": 1438114145, "post_id": 31573762, "comment_id": 51313978, "body": "I get the same errors if I just make a new project with a list widget and create the slot &quot;itemclicked&quot; and try to run."}, {"owner": {"reputation": 73, "user_id": 3381057, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d1d8f93dea0f2f7a0a019cbdf811e10?s=128&d=identicon&r=PG&f=1", "display_name": "Evan B", "link": "https://stackoverflow.com/users/3381057/evan-b"}, "edited": false, "score": 1, "creation_date": 1438114869, "post_id": 31573762, "comment_id": 51314369, "body": "I am idiot. I needed to include QListWidgetItem in dialog.h"}], "tags": [], "owner": {"reputation": 1554, "user_id": 2606757, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/435bacfa694744ecd187cbc68c619540?s=128&d=identicon&r=PG", "display_name": "Dreamcooled", "link": "https://stackoverflow.com/users/2606757/dreamcooled"}, "is_accepted": true, "score": 3, "last_activity_date": 1437598303, "creation_date": 1437598303, "answer_id": 31573762, "question_id": 31573531, "link": "https://stackoverflow.com/questions/31573531/qt-c-how-can-i-get-the-string-data-that-is-linked-to-the-index-when-i-click/31573762#31573762", "title": "Qt C++ | how can I get the string data that is linked to the index when I click an item in a QListWidget?", "body": "<p>Since you're using <code>QListWidget</code> instead of <code>QListView</code> you should also use the signal <code>itemClicked(QListWidgetItem*)</code> instead of <code>clicked(const QModelIndex &amp;)</code>.</p>\n\n<pre><code>void Dialog::on_list_Favorites_2_itemClicked(QListWidgetItem* item)\n{\n    qDebug() &lt;&lt; item-&gt;text();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2057, "user_id": 2231098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e13eb8b89352b54a72a7b9bec2a9a9d2?s=128&d=identicon&r=PG&f=1", "display_name": "hyun", "link": "https://stackoverflow.com/users/2231098/hyun"}, "is_accepted": false, "score": 1, "last_activity_date": 1437621760, "creation_date": 1437621760, "answer_id": 31577641, "question_id": 31573531, "link": "https://stackoverflow.com/questions/31573531/qt-c-how-can-i-get-the-string-data-that-is-linked-to-the-index-when-i-click/31577641#31577641", "title": "Qt C++ | how can I get the string data that is linked to the index when I click an item in a QListWidget?", "body": "<p>You can use below function for this case.</p>\n\n<pre><code>QListWidgetItem * QListWidget::itemFromIndex(const QModelIndex &amp; index) const\n</code></pre>\n\n<p>And then, the text of item can get using by <code>QString QListWidgetItem::text() const</code></p>\n\n<pre><code>void Dialog::on_list_Favorites_2_clicked(const QModelIndex &amp;index)\n{\n    QListWidgetItem* pItem = m_listWidget-&gt;itemFromIndex( index );\n    Q_ASSERT( pItem );\n    if ( pItem )\n    {\n        QString itemName = pItem-&gt;text();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 3381057, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d1d8f93dea0f2f7a0a019cbdf811e10?s=128&d=identicon&r=PG&f=1", "display_name": "Evan B", "link": "https://stackoverflow.com/users/3381057/evan-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 31573762, "answer_count": 2, "score": 0, "last_activity_date": 1437621760, "creation_date": 1437597446, "question_id": 31573531, "link": "https://stackoverflow.com/questions/31573531/qt-c-how-can-i-get-the-string-data-that-is-linked-to-the-index-when-i-click", "title": "Qt C++ | how can I get the string data that is linked to the index when I click an item in a QListWidget?", "body": "<p>I have this slot and I want to be able to use the string that is at the index being passed through. How can I get to it? </p>\n\n<pre><code>void Dialog::on_list_Favorites_2_clicked(const QModelIndex &amp;index)\n{\n\n}\n</code></pre>\n"}, {"tags": ["c++", "floating-accuracy"], "comments": [{"owner": {"reputation": 5185, "user_id": 2540407, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70244e2142d529ec009d23422d404ba1?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2540407/michael"}, "edited": false, "score": 1, "creation_date": 1437597763, "post_id": 31573514, "comment_id": 51102116, "body": "Yes, your code verbatim should print true."}, {"owner": {"reputation": 230, "user_id": 1792302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a40f97f46d35e933a4bf42239651a68?s=128&d=identicon&r=PG&f=1", "display_name": "ydobonebi", "link": "https://stackoverflow.com/users/1792302/ydobonebi"}, "edited": false, "score": 0, "creation_date": 1437597857, "post_id": 31573514, "comment_id": 51102167, "body": "probably, but can you guarantee that they will never have any arithmetic done with them? I would compare them with epsilon and a degree of error allowed. floating point numbers are a bit strange if you don&#39;t understand how they are encoded."}, {"owner": {"reputation": 381, "user_id": 2693292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/liu7R.jpg?s=128&g=1", "display_name": "jshamble", "link": "https://stackoverflow.com/users/2693292/jshamble"}, "reply_to_user": {"reputation": 230, "user_id": 1792302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a40f97f46d35e933a4bf42239651a68?s=128&d=identicon&r=PG&f=1", "display_name": "ydobonebi", "link": "https://stackoverflow.com/users/1792302/ydobonebi"}, "edited": false, "score": 0, "creation_date": 1437598517, "post_id": 31573514, "comment_id": 51102525, "body": "@QuinnRoundy I guarantee that I will not have any arithmetic ops. I&#39;m really just trying to see if floating points are viable to be used as keys in an if else block; this is just a base case / sanity check."}, {"owner": {"reputation": 230, "user_id": 1792302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a40f97f46d35e933a4bf42239651a68?s=128&d=identicon&r=PG&f=1", "display_name": "ydobonebi", "link": "https://stackoverflow.com/users/1792302/ydobonebi"}, "edited": false, "score": 0, "creation_date": 1437599527, "post_id": 31573514, "comment_id": 51103023, "body": "@Zinusoidal Not all things are compared simply with (a == b) Check out this for ways to compare floats: <a href=\"http://www.cygnus-software.com/papers/comparingfloats/Comparing%20floating%20point%20numbers.htm\" rel=\"nofollow noreferrer\">cygnus-software.com/papers/comparingfloats/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 36371, "user_id": 1180785, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/UjU0z.png?s=128&g=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/1180785/dave"}, "edited": false, "score": 0, "creation_date": 1437598703, "post_id": 31573673, "comment_id": 51102610, "body": "I think it&#39;s also worth pointing out that (provided you&#39;re on a IEEE 754 system) if you do the <i>same</i> operations to two values, they will still compare the same. i.e. <code>((1+1)&#47;3)==((1+1)&#47;3)</code>. That&#39;s because (unless you&#39;re using ffast-math), the computer is required to round correctly to the least-significant-bit for all individual operations. In fact, that means that you can even expect <code>((1+1)&#47;3)==((2+2)&#47;6)</code>. But ((1+1.1)/3) may not be equal to an equivalent ((2+2.2)/6), because rounding can occur during the <code>+</code> <i>and</i> <code>&#47;</code> in that case."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1437599202, "post_id": 31573673, "comment_id": 51102861, "body": "&quot;... NaN&quot; is guaranteed to NEVER be equal to anything&quot; ... &quot;all comparisons except <code>!=</code> will be false ...&quot;  +1"}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 3, "last_activity_date": 1437598591, "last_edit_date": 1437598591, "creation_date": 1437597977, "answer_id": 31573673, "question_id": 31573514, "link": "https://stackoverflow.com/questions/31573514/floating-point-comparison-specific/31573673#31573673", "title": "Floating Point comparison specific", "body": "<p>Yes, the compiler should consistently translate floating point constants that are identical to the same value - if not, it's a bug in the compiler [which of course is not impossible]. However, as soon as you do ANYTHING ELSE to the value (such as reading it from a file including <code>cin</code>) or do simple math (add 1.0, then subtract 1.0), the value is not guaranteed to be the same any longer.</p>\n\n<p>As pointed out, the value \"Not A Number\" or \"NaN\" is guaranteed to NEVER be equal to anything, and all comparisons except <code>!=</code> will be <code>false</code>, no matter what it is compared to - this is part of the specification for floating point. But all other constants, as long as you are JUST using a constant to assign to a variable, it should remain the same throughout the code. </p>\n\n<p>Of course, you can't rely on TWO DIFFERENT compilers coming up with the same exact value from the same source-code [many times they will, but sometimes they simply will do some different rounding of the last bit, or something like that which causes differences]</p>\n"}], "owner": {"reputation": 381, "user_id": 2693292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/liu7R.jpg?s=128&g=1", "display_name": "jshamble", "link": "https://stackoverflow.com/users/2693292/jshamble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 2, "accepted_answer_id": 31573673, "answer_count": 1, "score": 1, "last_activity_date": 1528952696, "creation_date": 1437597401, "last_edit_date": 1528952696, "question_id": 31573514, "link": "https://stackoverflow.com/questions/31573514/floating-point-comparison-specific", "title": "Floating Point comparison specific", "body": "<p>I have a specific question about floating point comparisons. I know that it's not recommended to use the == comparison due to precision issues, but in this specific case, I am wondering if, in all cases / compilers, this statement will hold true?</p>\n\n<pre><code>float a = 1.02f;\nfloat b = 1.02f;\n\nif(a == b)\n{\n   print(true);\n}\nelse\n{\n   print(false);\n}\n</code></pre>\n\n<p>In other words, if I assign floating point numbers exactly, with no addition, subtraction, demotion, or promotion, will this always hold true?</p>\n"}, {"tags": ["c++", "stl", "priority-queue"], "answers": [{"comments": [{"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "reply_to_user": {"reputation": 4541, "user_id": 1042926, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/aeee80d498fe83c40d7df1635cd405fe?s=128&d=identicon&r=PG", "display_name": "RATHI", "link": "https://stackoverflow.com/users/1042926/rathi"}, "edited": false, "score": 0, "creation_date": 1437602793, "post_id": 31573739, "comment_id": 51104524, "body": "@RATHI I&#39;ve updated the answer to address your second question. However, please keep in mind that adding an unrelated question to your original one is frowned upon on SO - the second one should have been a separate question."}], "tags": [], "owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "is_accepted": true, "score": 4, "last_activity_date": 1437605101, "last_edit_date": 1437605101, "creation_date": 1437598238, "answer_id": 31573739, "question_id": 31573502, "link": "https://stackoverflow.com/questions/31573502/priority-queue-in-c-with-custom-class-and-lambda-expression/31573739#31573739", "title": "priority queue in C++ with custom class and lambda expression", "body": "<p>You shouldn't ignore warnings issued by the compiler:</p>\n\n<pre><code>warning C4715: 'compare::operator()' : not all control paths return a value\n</code></pre>\n\n<p>That's because <code>else false;</code> doesn't return anything, it just evaluates the expression <code>false</code> and discards the result. It should be <code>else return false;</code>.</p>\n\n<hr>\n\n<p>Of course, the simpler alternative would be to just say <code>return a.first &lt; b.first;</code>.</p>\n\n<hr>\n\n<p>In reply to your updated question: </p>\n\n<p>Using a lambda here won't buy you that much, since you need to specify both the type of the functor as a template argument to <code>std::priority_queue</code>, and the functor itself as an argument to the constructor when initializing <code>heap</code> (in the version using <code>compare</code>, the functor was default-constructed; lambdas are not default-constructible).</p>\n\n<p>But, since you asked, here it is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;queue&gt;\n#include &lt;vector&gt;\n\nstruct data\n{\n   int first;\n   int second;\n};\n\nint main()\n{\n   auto cmp = [](const data&amp; a, const data&amp; b) { return a.first &lt; b.first; };\n\n   // For Visual C++ 2013 and beyond:\n   // std::vector&lt;data&gt; temp = {{5, 19}, {2, 7}, {90, 9}, {12, 6}};\n   // std::priority_queue&lt;data, std::vector&lt;data&gt;, decltype(cmp)&gt; heap{cmp, std::move(temp)};\n\n   // For Visual C++ 2012 (doesn't support list-initialization for non-aggregates):\n   data temp[] = {{5, 19}, {2, 7}, {90, 9}, {12, 6}};\n   std::priority_queue&lt;data, std::vector&lt;data&gt;, decltype(cmp)&gt; heap(std::begin(temp), std::end(temp), cmp);\n\n   while(!heap.empty())\n   {\n      std::cout &lt;&lt; heap.top().first &lt;&lt; '\\n';\n      heap.pop();\n   }\n}\n</code></pre>\n\n<p>I've made several modifications to your original code; take them as suggestions for improvement, in terms of both correctness (<code>const</code>) and efficiency.</p>\n"}, {"comments": [{"owner": {"reputation": 1152, "user_id": 4761877, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PdJG-0u7rLc/AAAAAAAAAAI/AAAAAAAAAFk/POj3rkBvbf0/photo.jpg?sz=128", "display_name": "Timothy Murphy", "link": "https://stackoverflow.com/users/4761877/timothy-murphy"}, "edited": false, "score": 1, "creation_date": 1437598852, "post_id": 31573813, "comment_id": 51102693, "body": "alternatively, just <code>return a.first &lt; b.first;</code>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1437599539, "post_id": 31573813, "comment_id": 51103030, "body": "Because it shouldn&#39;t be a compile error. &quot;Flowing off the end of a function is equivalent to a return with no value; this results in undefined behavior in a value-returning function.&quot; VS does tell you that <code>operator&lt;</code> is invalid though, which is quite helpful!"}, {"owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "edited": false, "score": 0, "creation_date": 1437602092, "post_id": 31573813, "comment_id": 51104209, "body": "Thanks for your comment. Yes, I found this <a href=\"http://stackoverflow.com/questions/1610030/why-can-you-return-from-a-non-void-function-without-returning-a-value-without-pr\">SO answer</a> that confirms your statement. I expected and would prefer a compilation error rather than a warning."}], "tags": [], "owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "is_accepted": false, "score": 2, "last_activity_date": 1437602370, "last_edit_date": 1495541334, "creation_date": 1437598483, "answer_id": 31573813, "question_id": 31573502, "link": "https://stackoverflow.com/questions/31573502/priority-queue-in-c-with-custom-class-and-lambda-expression/31573813#31573813", "title": "priority queue in C++ with custom class and lambda expression", "body": "<p>Your compare function is missing a <code>return</code> before the <code>false</code>. This should work:</p>\n\n<pre><code>class compare{\npublic:\n    bool operator()(data &amp;a, data &amp;b)\n    {\n        if (a.first &lt; b.first) \n            return true;\n        else \n            return false;\n    }\n};\n</code></pre>\n\n<p>VS gives a compilation warning but not an error. As Barry points out, this is not an error. See this SO answer, <a href=\"https://stackoverflow.com/a/1610454/3154588\">https://stackoverflow.com/a/1610454/3154588</a>, for more details. (I still contend this should be a compilation error, as having a code path that does not return a value, would always be wrong--at least for all of the code I have written!)</p>\n"}], "owner": {"reputation": 4541, "user_id": 1042926, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/aeee80d498fe83c40d7df1635cd405fe?s=128&d=identicon&r=PG", "display_name": "RATHI", "link": "https://stackoverflow.com/users/1042926/rathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2096, "favorite_count": 1, "accepted_answer_id": 31573739, "answer_count": 2, "score": 1, "last_activity_date": 1486994009, "creation_date": 1437597358, "last_edit_date": 1486994009, "question_id": 31573502, "link": "https://stackoverflow.com/questions/31573502/priority-queue-in-c-with-custom-class-and-lambda-expression", "title": "priority queue in C++ with custom class and lambda expression", "body": "<p>I am learning how to use STL in C++. I am trying to implement a heap using <code>std::priority_queue</code>. Here is my attempt:</p>\n\n<pre><code>#include&lt;vector&gt;\n#include&lt;algorithm&gt;\n#include&lt;iostream&gt;\n#include&lt;queue&gt;\n#include&lt;stack&gt;\n#include&lt;functional&gt;\nusing namespace std;\n\nstruct data {\n    int first;\n    int second;\n};\n\nclass compare {\npublic:\n    bool operator()(data &amp;a ,data &amp;b)\n    {\n         if(a.first &lt; b.first) return true;\n         else false;\n    }\n};\n\nint main()\n{   \n    priority_queue &lt;data , vector&lt;data&gt;, compare&gt; heap;\n    data temp2[] = { {5,19},{2,7},{90,9},{12,6} };\n\n    for(int i = 0; i &lt; 4; ++i)\n    {       \n       heap.push(temp2[i]);\n    }\n\n    while(heap.empty() == false)\n    {\n        cout &lt;&lt; heap.top().first &lt;&lt; endl;;\n        heap.pop();\n    }       \n}\n</code></pre>\n\n<p>When I run this code on visual studio 2012. it crashes while pushing the second element. Error is below:</p>\n\n<pre><code>Program: C:\\WINDOWS\\system32\\MSVCP110D.dll\nFile: c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\algorithm\nLine: 2463\nExpression: invalid operator&lt;\n</code></pre>\n\n<p>but when I run the same code in ideone, it works but the output is wrong. <a href=\"http://ideone.com/Mfwjfy\" rel=\"nofollow noreferrer\">Ideone link</a></p>\n\n<p>1.<strong>Can someone please point out where I am going wrong?</strong></p>\n\n<p>adding one more question in this same question:</p>\n\n<p>2.<strong>How to write the lambda expression of this rather using the compare function?</strong></p>\n"}, {"tags": ["c++", "windows", "compiler-errors", "mingw", "sublimetext"], "comments": [{"owner": {"reputation": 3277, "user_id": 3087952, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/DijUj.png?s=128&g=1", "display_name": "nonsensation", "link": "https://stackoverflow.com/users/3087952/nonsensation"}, "edited": false, "score": 0, "creation_date": 1437597561, "post_id": 31573396, "comment_id": 51102000, "body": "dont you need the <a href=\"http://stackoverflow.com/a/12046210/3087952\"><code>-o</code> flag to compile your object files into an exe</a>?"}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "reply_to_user": {"reputation": 3277, "user_id": 3087952, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/DijUj.png?s=128&g=1", "display_name": "nonsensation", "link": "https://stackoverflow.com/users/3087952/nonsensation"}, "edited": false, "score": 0, "creation_date": 1437597880, "post_id": 31573396, "comment_id": 51102177, "body": "I know, I just have a template, because for SFML I need this style. When changing it to <code>-o main.exe</code> I get the same result"}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "reply_to_user": {"reputation": 3277, "user_id": 3087952, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/DijUj.png?s=128&g=1", "display_name": "nonsensation", "link": "https://stackoverflow.com/users/3087952/nonsensation"}, "edited": false, "score": 0, "creation_date": 1437597973, "post_id": 31573396, "comment_id": 51102219, "body": "Actually a <code>main.exe</code> is being created. I crashes just like <code>a.exe</code>, though."}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "reply_to_user": {"reputation": 3277, "user_id": 3087952, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/DijUj.png?s=128&g=1", "display_name": "nonsensation", "link": "https://stackoverflow.com/users/3087952/nonsensation"}, "edited": false, "score": 0, "creation_date": 1437598148, "post_id": 31573396, "comment_id": 51102310, "body": "I also can&#39;t google the error code, because google doesn&#39;t accept numbers and special characters"}, {"owner": {"reputation": 156, "user_id": 6142156, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YD-JjNDaB_g/AAAAAAAAAAI/AAAAAAAAFNs/2xJjyecA0xs/photo.jpg?sz=128", "display_name": "manudicri", "link": "https://stackoverflow.com/users/6142156/manudicri"}, "edited": false, "score": 0, "creation_date": 1532947703, "post_id": 31573396, "comment_id": 90149751, "body": "did you solve it?"}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "reply_to_user": {"reputation": 156, "user_id": 6142156, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YD-JjNDaB_g/AAAAAAAAAAI/AAAAAAAAFNs/2xJjyecA0xs/photo.jpg?sz=128", "display_name": "manudicri", "link": "https://stackoverflow.com/users/6142156/manudicri"}, "edited": false, "score": 0, "creation_date": 1532951560, "post_id": 31573396, "comment_id": 90152230, "body": "@DiCri I switched to Linux. One of the best decisions of my life"}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "edited": false, "score": 0, "creation_date": 1532951594, "post_id": 31573396, "comment_id": 90152259, "body": "Also, I am using CMake now"}], "owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1437596996, "creation_date": 1437596996, "question_id": 31573396, "link": "https://stackoverflow.com/questions/31573396/sublime-text-3-not-working-with-mingw-and-c11", "title": "Sublime Text 3 not working with mingw and C++11", "body": "<p>I've setup Sublime Text 3 with mingw by making my own build system:</p>\n\n<pre><code>{\n    \"cmd\": \"mingw32-make\",\n    \"working_dir\" : \"$file_path\"\n}\n</code></pre>\n\n<p>I then have a <code>Makefile</code> in the same directory as the sourcefiles which looks like this:</p>\n\n<pre><code>all:\n    g++ -c main.cpp\n    g++ main.o\n    main.exe\n</code></pre>\n\n<p>for a basic project with just 1 file.</p>\n\n<p>Everything works, like I want, a file called <code>main.exe</code> is being created in that directory and it is being executed in the Sublime Text Console.</p>\n\n<p>As soon as I add the parameter <code>-std=c++11</code> or <code>-std=c++0x</code> to enable C++11, something really weird happens. Instead of the <code>main.exe</code> a file called <code>a.exe</code> is being created. When I change <code>main.exe</code> to <code>a.exe</code> in the <code>Makefile</code>, the program gets executed, but crashes shortly after (<code>a.exe stopped working</code>).\nAnd this is what it says in the Sublime Console:</p>\n\n<blockquote>\n  <p>makefile:2: recipe for target 'all' failed</p>\n  \n  <p>mingw32-make: *** [all] Error -1073741819</p>\n  \n  <p>[Finished in 3.5s with exit code 2]</p>\n  \n  <p>[cmd: mingw32-make]</p>\n  \n  <p>[dir: F:\\Projects old\\WIP\\Programming\\encryption]</p>\n  \n  <p>[path: C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files\\Common Files\\Microsoft Shared\\Windows Live;C:\\Program Files (x86)\\Common Files\\Microsoft Shared\\Windows Live;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\Skype\\Phone\\;C:\\Program Files (x86)\\Windows Live\\Shared;C:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\120\\Tools\\Binn\\;F:\\Programs\\CMake\\bin;F:\\mingw\\mingw32\\bin;F:\\Programs\\Git\\cmd;C:\\Program Files (x86)\\QuickTime\\QTSystem\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;F:\\Programs\\CMake\\bin]</p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n\n<p>Thank you for your help!</p>\n\n<p>PS: In the <code>mingw32\\build-info.txt</code> it says <code>gcc version 4.8.4</code></p>\n\n<p>PPS: <code>F:\\Projects old\\WIP\\Programming\\encryption</code> is the path of the C++ project</p>\n"}, {"tags": ["c++", "xml", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1437597379, "post_id": 31573210, "comment_id": 51101896, "body": "Works for me, OpenCV 300 and VS 2013. You&#39;re probably messing things up elsewhere in your code. Does it works correctly if you use YML extension?"}, {"owner": {"reputation": 23, "user_id": 5145229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026a0ab7c0a5fd290ce1c99a1bd92a58?s=128&d=identicon&r=PG&f=1", "display_name": "mjr_lzr", "link": "https://stackoverflow.com/users/5145229/mjr-lzr"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1437598238, "post_id": 31573210, "comment_id": 51102368, "body": "Nope, same issue.  Earlier in the code I am reading from an XML file, but I&#39;m not sure how that would affect writing to XML/YML files at all."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1437598343, "post_id": 31573210, "comment_id": 51102427, "body": "Try to post a small sample code that will reproduce your error."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1437599820, "post_id": 31573210, "comment_id": 51103185, "body": "except that you&#39;re not initializing imageSize.height, the code works as expected for me."}, {"owner": {"reputation": 23, "user_id": 5145229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026a0ab7c0a5fd290ce1c99a1bd92a58?s=128&d=identicon&r=PG&f=1", "display_name": "mjr_lzr", "link": "https://stackoverflow.com/users/5145229/mjr-lzr"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1437601261, "post_id": 31573210, "comment_id": 51103885, "body": "Figured it out.  One of the other projects in my solution was the wrong platform, and changing that to the correct one fixed the problem.   Thanks for your help!"}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 5145229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026a0ab7c0a5fd290ce1c99a1bd92a58?s=128&d=identicon&r=PG&f=1", "display_name": "mjr_lzr", "link": "https://stackoverflow.com/users/5145229/mjr-lzr"}, "is_accepted": true, "score": 0, "last_activity_date": 1437601673, "creation_date": 1437601673, "answer_id": 31574585, "question_id": 31573210, "link": "https://stackoverflow.com/questions/31573210/opencv-writing-to-xml-incorrectly-nodes-repeating/31574585#31574585", "title": "OpenCV writing to XML incorrectly-- nodes repeating", "body": "<p>It was an issue with the platform I was using.  In my solution one of the other projects had the incorrect platform.  Fixing that fixed the problem.</p>\n"}], "owner": {"reputation": 23, "user_id": 5145229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026a0ab7c0a5fd290ce1c99a1bd92a58?s=128&d=identicon&r=PG&f=1", "display_name": "mjr_lzr", "link": "https://stackoverflow.com/users/5145229/mjr-lzr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 31574585, "answer_count": 1, "score": 0, "last_activity_date": 1437601673, "creation_date": 1437596312, "last_edit_date": 1437599185, "question_id": 31573210, "link": "https://stackoverflow.com/questions/31573210/opencv-writing-to-xml-incorrectly-nodes-repeating", "title": "OpenCV writing to XML incorrectly-- nodes repeating", "body": "<p>I'm writing to an XML fle in OpenCV and I'm running into an issue where the nodes are being written incorrectly.  My code:</p>\n\n<pre><code>FileStorage fs(s.outputFileName, FileStorage::WRITE);  \n\nfs &lt;&lt; \"camera_matrix\" &lt;&lt; cameraMatrix;          \nfs &lt;&lt; \"distCoeffs\" &lt;&lt; distCoeffs;       \nfs &lt;&lt; \"image_width\" &lt;&lt; imageSize.width;    \nfs &lt;&lt; \"image_height\" &lt;&lt; imageSize.height;\n\nfs.release();\n</code></pre>\n\n<p><code>cameraMatrix</code> and <code>distCoeffs</code> are both Mat objects. </p>\n\n<p>My XML output file looks like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;opencv_storage&gt;\n&lt;camera_matrix type_id=\"opencv-matrix\"&gt;\n   &lt;rows&gt;3&lt;/rows&gt;\n   &lt;cols&gt;3&lt;/cols&gt;\n   &lt;dt&gt;d&lt;/dt&gt;\n   &lt;data&gt;\n    4.6490822605835838e+003 0. 1.4075000000000000e+003 0.\n    4.6490822605835838e+003 9.3950000000000000e+002 0. 0. 1  &lt;/data&gt;&lt;/camera_matrix&gt;\n&lt;camera_matrix&gt;distCoeffs&lt;/camera_matrix&gt;\n&lt;camera_matrix type_id=\"opencv-matrix\"&gt;\n   &lt;rows&gt;5&lt;/rows&gt;\n   &lt;cols&gt;1&lt;/cols&gt;\n   &lt;dt&gt;d&lt;/dt&gt;\n   &lt;data&gt;\n    -1.1104540491479253e-001 3.2257882031809664e+000 0. 0.\n    -3.2884118325204533e+001&lt;/data&gt;&lt;/camera_matrix&gt;\n&lt;image_width&gt;2816&lt;/image_width&gt;\n&lt;image_width&gt;image_height&lt;/image_width&gt;\n&lt;image_width&gt;1880&lt;/image_width&gt;\n&lt;/opencv_storage&gt;\n</code></pre>\n\n<p>For some reason instead of storing the <code>distCoeffs</code> Mat object as a node with the name <code>&lt;distCoeffs&gt;</code>, it stores it with the name <code>&lt;camera_matrix&gt;</code>, and instead of storing the integer <code>image_height</code> under the node name <code>&lt;image_height&gt;</code> it is stored under <code>&lt;image_width&gt;</code>.  Why would this be happening?  I took a look at the <a href=\"http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html\" rel=\"nofollow\">OpenCV documentation</a> but couldn't find what I am doing wrong.  Using OpenCV 3.0.0 with Visual Studio 2013.</p>\n\n<p>Edit:  I am able to reproduce the error with this test code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;opencv2/core.hpp&gt;\n#include &lt;iostream&gt;\n\n\nusing namespace cv;\nusing namespace std;\n\nstatic void saveCameraParams(Mat c, Mat d);\nint main(int argc, char** argv)\n{\n    Mat cameraMatrix = Mat(3, 3, CV_64F, cvScalar(0.));\n    Mat distCoeffs = Mat(5, 1, CV_64F, cvScalar(0.));\n    saveCameraParams(cameraMatrix, distCoeffs);\n\n}\nstatic void saveCameraParams(Mat cameraMatrix, Mat distCoeffs)\n    {\n        Size imageSize;\n        imageSize.width = 3;\n        imageSize.width = 4;\n        FileStorage fs(\"test_out.xml\", FileStorage::WRITE);\n\n        fs &lt;&lt; \"camera_matrix\" &lt;&lt; cameraMatrix;\n\n        fs &lt;&lt; \"distCoeffs\" &lt;&lt; distCoeffs;\n\n        fs &lt;&lt; \"image_width\" &lt;&lt; imageSize.width;\n\n        fs &lt;&lt; \"image_height\" &lt;&lt; imageSize.height;\n\n        fs.release();\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "active-directory"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1437602490, "post_id": 31573186, "comment_id": 51104387, "body": "The NetGroupEnum() function returns all groups, not those groups that a particular user or computer belongs to.  Which are you trying to do?  Also, you say you can find this information while offline &quot;using various tools&quot; but what is an example of a tool that does this?"}, {"owner": {"reputation": 5340, "user_id": 324827, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ed7f53f5feab686252b126d0cb4a1459?s=128&d=identicon&r=PG", "display_name": "TCS", "link": "https://stackoverflow.com/users/324827/tcs"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1437604683, "post_id": 31573186, "comment_id": 51105318, "body": "@HarryJohnston - updated my question. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 5340, "user_id": 324827, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ed7f53f5feab686252b126d0cb4a1459?s=128&d=identicon&r=PG", "display_name": "TCS", "link": "https://stackoverflow.com/users/324827/tcs"}, "edited": false, "score": 0, "creation_date": 1438091122, "post_id": 31573546, "comment_id": 51298053, "body": "Sorry it took me a while to answer. For some reason this function always returns &quot;None&quot; (!?!?). My computer belongs to a global security group (checked with gpresult)."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 0, "last_activity_date": 1437597484, "creation_date": 1437597484, "answer_id": 31573546, "question_id": 31573186, "link": "https://stackoverflow.com/questions/31573186/netgroupenum-when-offline/31573546#31573546", "title": "NetGroupEnum() when offline", "body": "<p>It sounds like you want <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa370610.aspx\" rel=\"nofollow\">NetQueryDisplayInformation</a> with level = 3 to retrieve <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa370682.aspx\" rel=\"nofollow\">group information</a>.</p>\n\n<p>This will retrieve locally-cached information when possible, so they can work when the computer is offline (and even when online, typically give faster response that <code>NetGroupEnum</code> anyway).</p>\n"}], "owner": {"reputation": 5340, "user_id": 324827, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ed7f53f5feab686252b126d0cb4a1459?s=128&d=identicon&r=PG", "display_name": "TCS", "link": "https://stackoverflow.com/users/324827/tcs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1437604663, "creation_date": 1437596232, "last_edit_date": 1437604663, "question_id": 31573186, "link": "https://stackoverflow.com/questions/31573186/netgroupenum-when-offline", "title": "NetGroupEnum() when offline", "body": "<p>I want to get the groups the local machine belongs to in the domain.\nThe function <code>NetGroupEnum()</code> returns these groups, but <strong>only</strong> when the computer is online.</p>\n\n<p>The problem is what do I do when I am <strong>offline</strong>?</p>\n\n<p>I know the information is available because I can find it using various tools, but I don't know how they're doing it.</p>\n\n<p>I've been looking for quite some time, doesn't anyone know how?</p>\n\n<p><strong>Important:</strong> I don't want to use WMI.</p>\n\n<p>Also, a solution in C# is also okay, but WINAPI is much more preferable.</p>\n\n<p>EDIT: To be more specific, I am trying to find out which security groups the local machine belongs to. I can see it using gpresult.exe even when I am offline.</p>\n"}, {"tags": ["c++", "regex", "macos", "boost"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1437596390, "post_id": 31573031, "comment_id": 51101264, "body": "Move <code>-lboost_regex</code> to the end of the command line. Problem solved."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1437596502, "post_id": 31573031, "comment_id": 51101329, "body": "Specifically see <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix/24675715#24675715\">this answer</a> on that linked duplicate"}, {"owner": {"reputation": 1490, "user_id": 3707564, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60104882193f0b67e860f3aa5332f399?s=128&d=identicon&r=PG&f=1", "display_name": "user40780", "link": "https://stackoverflow.com/users/3707564/user40780"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1437597157, "post_id": 31573031, "comment_id": 51101767, "body": "eh... moving -lboost_regex to the end still does not solve the problem....."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1437597246, "post_id": 31573031, "comment_id": 51101822, "body": "did you move the rest too (-lboost_regex -lgurobi_c++ -lgurobi60)? And check their interdependencies as the linked answer explains? If so, I can undupe-vote this"}, {"owner": {"reputation": 27360, "user_id": 188414, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b1b63800db11f27930af1301b2c62223?s=128&d=identicon&r=PG", "display_name": "the_mandrill", "link": "https://stackoverflow.com/users/188414/the-mandrill"}, "edited": false, "score": 1, "creation_date": 1437597323, "post_id": 31573031, "comment_id": 51101867, "body": "Have you definitely built the boost_regex library for the x86_64 architecture? (rather than just i386)"}, {"owner": {"reputation": 1490, "user_id": 3707564, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60104882193f0b67e860f3aa5332f399?s=128&d=identicon&r=PG&f=1", "display_name": "user40780", "link": "https://stackoverflow.com/users/3707564/user40780"}, "edited": false, "score": 0, "creation_date": 1437597581, "post_id": 31573031, "comment_id": 51102009, "body": "I haven&#39;t specifically built it for x86_64 architecture. I just do ./bootstrap.sh ./b2 install . Do you know how could I explicitly build it for x86_64? Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 1490, "user_id": 3707564, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60104882193f0b67e860f3aa5332f399?s=128&d=identicon&r=PG&f=1", "display_name": "user40780", "link": "https://stackoverflow.com/users/3707564/user40780"}, "edited": false, "score": 0, "creation_date": 1437608887, "post_id": 31575652, "comment_id": 51106476, "body": "by looking at the boost building manual... it seems i can&#39;t find a way to specifically build boost with libstdc++...."}], "tags": [], "owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "is_accepted": false, "score": 5, "last_activity_date": 1437607240, "creation_date": 1437607240, "answer_id": 31575652, "question_id": 31573031, "link": "https://stackoverflow.com/questions/31573031/boost-regex-built-failed-on-macox/31575652#31575652", "title": "boost regex built failed on MacOX", "body": "<p>I suspect that you have more than one thing going on here; moving <code>-lboost_regex</code> should solve some of them.</p>\n\n<p>I suspect that the main problem you have is that you've built part of your program (the boost libraries, probably) with libc++, and the rest with libstdc++.</p>\n\n<p>Your build command explicitly says <code>-stdlib=libstdc++</code>, but the error message mentions <code>std::__1::....</code>, which is where things live in libc++.</p>\n"}], "owner": {"reputation": 1490, "user_id": 3707564, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60104882193f0b67e860f3aa5332f399?s=128&d=identicon&r=PG&f=1", "display_name": "user40780", "link": "https://stackoverflow.com/users/3707564/user40780"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437607240, "creation_date": 1437595723, "question_id": 31573031, "link": "https://stackoverflow.com/questions/31573031/boost-regex-built-failed-on-macox", "title": "boost regex built failed on MacOX", "body": "<p>On Linux machine, my code could build successfully.</p>\n\n<p>However, on my Mac, the same command cannot build unless I take out this part:</p>\n\n<pre><code>void split_is(const std::string &amp;s, string delim_regex, std::vector&lt;std::string&gt; &amp;elems) {\n    // Terribly slow and inefficient, sorry. Should probably fix this at some point\n    boost::algorithm::split_regex(elems, s, regex(delim_regex));\n    std::vector&lt;std::string&gt; non_zero_elems;\n    for(int e = 0; e &lt; elems.size(); e++){\n        if (elems[e].length() &gt; 0){\n            non_zero_elems.push_back(elems[e]);\n        }\n    }\n    elems = non_zero_elems; }\n</code></pre>\n\n<p>The command I used is:</p>\n\n<pre><code>    g++ -lboost_regex -lgurobi_c++ -lgurobi60 -stdlib=libstdc++ -lpthread\n    -lm -Wall -m64 -fPIE -fexceptions -frounding-math -O2 -I/Library/gurobi604/mac64/include/ -I/usr/local/include/ -L/Library/gurobi604/mac64/lib/ -L/usr/local/lib/ main.cpp tools.cpp treeofdevil.cpp solver.cpp periodicfunction.cpp  -o ising.exe /usr/local/lib/libboost_regex.a\n</code></pre>\n\n<p>Does anyone know what might possibly go wrong? Thank you.</p>\n\n<p>The error I get is:</p>\n\n<pre><code>    Undefined symbols for architecture x86_64:\n      \"boost::match_results&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt; &gt; &gt; &gt;::maybe_assign(boost::match_results&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt; &gt; &gt; &gt; const&amp;)\", referenced from:\n          boost::re_detail::perl_matcher&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt; &gt; &gt;, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::match_prefix() in tools-9bd02e.o\n          boost::re_detail::perl_matcher&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt; &gt; &gt;, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::match_match() in tools-9bd02e.o\n      \"boost::re_detail::perl_matcher&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt; &gt; &gt;, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::construct_init(boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, boost::regex_constants::_match_flags)\", referenced from:\n          boost::re_detail::perl_matcher&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt; &gt; &gt;, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::perl_matcher(__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt;, __gnu_cxx::__normal_iterator&lt;char const*, std::string&gt;, boost::match_results&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt;, std::allocator&lt;boost::sub_match&lt;__gnu_cxx::__normal_iterator&lt;char const*, std::string&gt; &gt; &gt; &gt;&amp;, boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, boost::regex_constants::_match_flags, __gnu_cxx::__normal_iterator&lt;char const*, std::string&gt;) in tools-9bd02e.o\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::compare(char const*) const\", referenced from:\n          unsigned int boost::re_detail::find_sort_syntax&lt;boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;, char&gt;(boost::re_detail::cpp_regex_traits_implementation&lt;char&gt; const*, char*) in libboost_regex.a(instances.o)\n          char const* boost::re_detail::re_is_set_member&lt;char const*, char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt;, unsigned int&gt;(char const*, char const*, boost::re_detail::re_set_long&lt;unsigned int&gt; const*, boost::re_detail::regex_data&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, bool) in libboost_regex.a(instances.o)\n          char* boost::re_detail::re_is_set_member&lt;char*, char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt;, unsigned int&gt;(char*, char*, boost::re_detail::re_set_long&lt;unsigned int&gt; const*, boost::re_detail::regex_data&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, bool) in libboost_regex.a(instances.o)\n      \"std::__1::__vector_base_common&lt;true&gt;::__throw_length_error() const\", referenced from:\n          void std::__1::vector&lt;boost::re_detail::recursion_info&lt;boost::match_results&lt;char const*, std::__1::allocator&lt;boost::sub_match&lt;char const*&gt; &gt; &gt; &gt;, std::__1::allocator&lt;boost::re_detail::recursion_info&lt;boost::match_results&lt;char const*, std::__1::allocator&lt;boost::sub_match&lt;char const*&gt; &gt; &gt; &gt; &gt; &gt;::__push_back_slow_path&lt;boost::re_detail::recursion_info&lt;boost::match_results&lt;char const*, std::__1::allocator&lt;boost::sub_match&lt;char const*&gt; &gt; &gt; &gt; const&gt;(boost::re_detail::recursion_info&lt;boost::match_results&lt;char const*, std::__1::allocator&lt;boost::sub_match&lt;char const*&gt; &gt; &gt; &gt; const&amp;) in libboost_regex.a(instances.o)\n          std::__1::vector&lt;boost::sub_match&lt;char const*&gt;, std::__1::allocator&lt;boost::sub_match&lt;char const*&gt; &gt; &gt;::vector(std::__1::vector&lt;boost::sub_match&lt;char const*&gt;, std::__1::allocator&lt;boost::sub_match&lt;char const*&gt; &gt; &gt; const&amp;) in libboost_regex.a(instances.o)\n          std::__1::vector&lt;boost::sub_match&lt;char const*&gt;, std::__1::allocator&lt;boost::sub_match&lt;char const*&gt; &gt; &gt;::insert(std::__1::__wrap_iter&lt;boost::sub_match&lt;char const*&gt; const*&gt;, unsigned long, boost::sub_match&lt;char const*&gt; const&amp;) in libboost_regex.a(instances.o)\n          std::__1::enable_if&lt;(__is_forward_iterator&lt;boost::sub_match&lt;char const*&gt;*&gt;::value) &amp;&amp; (is_constructible&lt;boost::sub_match&lt;char const*&gt;, std::__1::iterator_traits&lt;boost::sub_match&lt;char const*&gt;*&gt;::reference&gt;::value), void&gt;::type std::__1::vector&lt;boost::sub_match&lt;char const*&gt;, std::__1::allocator&lt;boost::sub_match&lt;char const*&gt; &gt; &gt;::assign&lt;boost::sub_match&lt;char const*&gt;*&gt;(boost::sub_match&lt;char const*&gt;*, boost::sub_match&lt;char const*&gt;*) in libboost_regex.a(instances.o)\n          std::__1::vector&lt;bool, std::__1::allocator&lt;bool&gt; &gt;::assign(unsigned long, bool const&amp;) in libboost_regex.a(instances.o)\n          std::__1::vector&lt;bool, std::__1::allocator&lt;bool&gt; &gt;::reserve(unsigned long) in libboost_regex.a(instances.o)\n          void std::__1::vector&lt;std::__1::pair&lt;bool, boost::re_detail::re_syntax_base*&gt;, std::__1::allocator&lt;std::__1::pair&lt;bool, boost::re_detail::re_syntax_base*&gt; &gt; &gt;::__push_back_slow_path&lt;std::__1::pair&lt;bool, boost::re_detail::re_syntax_base*&gt; const&gt;(std::__1::pair&lt;bool, boost::re_detail::re_syntax_base*&gt; const&amp;) in libboost_regex.a(instances.o)\n          ...\n      \"std::__1::__vector_base_common&lt;true&gt;::__throw_out_of_range() const\", referenced from:\n          boost::re_detail::basic_regex_parser&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::parse_open_paren() in libboost_regex.a(instances.o)\n          boost::re_detail::basic_regex_parser&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::parse_perl_extension() in libboost_regex.a(instances.o)\n      \"std::__1::__basic_string_common&lt;true&gt;::__throw_length_error() const\", referenced from:\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::lookup_collatename(char const*, char const*) const in libboost_regex.a(instances.o)\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::lookup_classname_imp(char const*, char const*) const in libboost_regex.a(instances.o)\n          boost::re_detail::basic_regex_parser&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::fail(boost::regex_constants::error_type, long, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, long) in libboost_regex.a(instances.o)\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::lookup_classname(char const*, char const*) const in libboost_regex.a(instances.o)\n      \"std::__1::locale::use_facet(std::__1::locale::id&amp;) const\", referenced from:\n          boost::re_detail::cpp_regex_traits_base&lt;char&gt;::imbue(std::__1::locale const&amp;) in libboost_regex.a(instances.o)\n          boost::cpp_regex_traits&lt;char&gt;::toi(char const*&amp;, char const*, int) const in libboost_regex.a(instances.o)\n          boost::shared_ptr&lt;boost::re_detail::cpp_regex_traits_implementation&lt;char&gt; const&gt; boost::re_detail::create_cpp_regex_traits&lt;char&gt;(std::__1::locale const&amp;) in libboost_regex.a(instances.o)\n      \"std::__1::ios_base::getloc() const\", referenced from:\n          boost::cpp_regex_traits&lt;char&gt;::toi(char const*&amp;, char const*, int) const in libboost_regex.a(instances.o)\n      \"std::logic_error::logic_error(char const*)\", referenced from:\n          boost::match_results&lt;char const*, std::__1::allocator&lt;boost::sub_match&lt;char const*&gt; &gt; &gt;::raise_logic_error() in libboost_regex.a(instances.o)\n      \"std::logic_error::logic_error(char const*)\", referenced from:\n          boost::re_detail::perl_matcher&lt;char const*, std::__1::allocator&lt;boost::sub_match&lt;char const*&gt; &gt;, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::construct_init(boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, boost::regex_constants::_match_flags) in libboost_regex.a(instances.o)\n      \"std::logic_error::logic_error(std::logic_error const&amp;)\", referenced from:\n          void boost::throw_exception&lt;std::invalid_argument&gt;(std::invalid_argument const&amp;) in libboost_regex.a(instances.o)\n          void boost::throw_exception&lt;std::logic_error&gt;(std::logic_error const&amp;) in libboost_regex.a(instances.o)\n          boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;std::logic_error&gt; &gt;::rethrow() const in libboost_regex.a(instances.o)\n          boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;std::logic_error&gt; &gt;::clone_impl(boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;std::logic_error&gt; &gt; const&amp;, boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;std::logic_error&gt; &gt;::clone_tag) in libboost_regex.a(instances.o)\n          boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;std::logic_error&gt; &gt;::clone_impl(boost::exception_detail::error_info_injector&lt;std::logic_error&gt; const&amp;) in libboost_regex.a(instances.o)\n          boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;std::invalid_argument&gt; &gt;::rethrow() const in libboost_regex.a(instances.o)\n          boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;std::invalid_argument&gt; &gt;::clone_impl(boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;std::invalid_argument&gt; &gt; const&amp;, boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;std::invalid_argument&gt; &gt;::clone_tag) in libboost_regex.a(instances.o)\n          ...\n      \"std::runtime_error::runtime_error(char const*)\", referenced from:\n          boost::object_cache&lt;boost::re_detail::cpp_regex_traits_base&lt;char&gt;, boost::re_detail::cpp_regex_traits_implementation&lt;char&gt; &gt;::get(boost::re_detail::cpp_regex_traits_base&lt;char&gt; const&amp;, unsigned long) in libboost_regex.a(instances.o)\n      \"std::runtime_error::runtime_error(std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;)\", referenced from:\n          void boost::re_detail::raise_error&lt;boost::regex_traits_wrapper&lt;boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; &gt;(boost::regex_traits_wrapper&lt;boost::regex_traits&lt;char, ...\nboost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::transform_primary(char const*, char const*) const in libboost_regex.a(instances.o)\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::lookup_collatename(char const*, char const*) const in libboost_regex.a(instances.o)\n          boost::re_detail::basic_regex_creator&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::append_set(boost::re_detail::basic_char_set&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, mpl_::bool_&lt;false&gt;*) in libboost_regex.a(instances.o)\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::append(char const*)\", referenced from:\n          boost::re_detail::basic_regex_parser&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::fail(boost::regex_constants::error_type, long, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, long) in libboost_regex.a(instances.o)\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::append(char const*, unsigned long)\", referenced from:\n          boost::re_detail::basic_regex_parser&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::fail(boost::regex_constants::error_type, long, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, long) in libboost_regex.a(instances.o)\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::append(unsigned long, char)\", referenced from:\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::transform(char const*, char const*) const in libboost_regex.a(instances.o)\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::assign(char const*, unsigned long)\", referenced from:\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::transform_primary(char const*, char const*) const in libboost_regex.a(instances.o)\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::assign(unsigned long, char)\", referenced from:\n          char const* boost::re_detail::re_is_set_member&lt;char const*, char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt;, unsigned int&gt;(char const*, char const*, boost::re_detail::re_set_long&lt;unsigned int&gt; const*, boost::re_detail::regex_data&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, bool) in libboost_regex.a(instances.o)\n          char* boost::re_detail::re_is_set_member&lt;char*, char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt;, unsigned int&gt;(char*, char*, boost::re_detail::re_set_long&lt;unsigned int&gt; const*, boost::re_detail::regex_data&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, bool) in libboost_regex.a(instances.o)\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::insert(std::__1::__wrap_iter&lt;char const*&gt;, char)\", referenced from:\n          boost::re_detail::basic_regex_creator&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::append_set(boost::re_detail::basic_char_set&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt; const&amp;, mpl_::bool_&lt;false&gt;*) in libboost_regex.a(instances.o)\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::reserve(unsigned long)\", referenced from:\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::transform(char const*, char const*) const in libboost_regex.a(instances.o)\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::__grow_by(unsigned long, unsigned long, unsigned long, unsigned long, unsigned long, unsigned long)\", referenced from:\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::transform_primary(char const*, char const*) const in libboost_regex.a(instances.o)\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::basic_string(std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;)\", referenced from:\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::lookup_collatename(char const*, char const*) const in libboost_regex.a(instances.o)\n          boost::cpp_regex_traits&lt;char&gt;::catalog_name(std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;) in libboost_regex.a(instances.o)\n          boost::cpp_regex_traits&lt;char&gt;::get_catalog_name() in libboost_regex.a(instances.o)\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::error_string(boost::regex_constants::error_type) const in libboost_regex.a(instances.o)\n          boost::re_detail::basic_regex_parser&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::parse(char const*, char const*, unsigned int) in libboost_regex.a(instances.o)\n          boost::re_detail::basic_regex_parser&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::fail(boost::regex_constants::error_type, long) in libboost_regex.a(instances.o)\n          boost::re_detail::basic_regex_parser&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::parse_extended() in libboost_regex.a(instances.o)\n          ...\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::~basic_string()\", referenced from:\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::transform_primary(char const*, char const*) const in libboost_regex.a(instances.o)\n          boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::transform(char const*, char const*) const in libboost_regex.a(instances.o)\n          .....const in libboost_regex.a(instances.o)\n          boost::basic_regex&lt;char, boost::regex_traits&lt;char, boost::cpp_regex_traits&lt;char&gt; &gt; &gt;::imbue(std::__1::locale) in libboost_regex.a(instances.o)\n          boost::cpp_regex_traits&lt;char&gt;::imbue(std::__1::locale) in libboost_regex.a(instances.o)\n          boost::shared_ptr&lt;boost::re_detail::cpp_regex_traits_implementation&lt;char&gt; const&gt; boost::re_detail::create_cpp_regex_traits&lt;char&gt;(std::__1::locale const&amp;) in libboost_regex.a(instances.o)\n          boost::object_cache&lt;boost::re_detail::cpp_regex_traits_base&lt;char&gt;, boost::re_detail::cpp_regex_traits_implementation&lt;char&gt; &gt;::do_get(boost::re_detail::cpp_regex_traits_base&lt;char&gt; const&amp;, unsigned long) in libboost_regex.a(instances.o)\n          unsigned long std::__1::__tree&lt;std::__1::__value_type&lt;boost::re_detail::cpp_regex_traits_base&lt;char&gt;, std::__1::__list_iterator&lt;std::__1::pair&lt;boost::shared_ptr&lt;boost::re_detail::cpp_regex_traits_implementation&lt;char&gt; const&gt;, boost::re_detail::cpp_regex_traits_base&lt;char&gt; const*&gt;, void*&gt; &gt;, std::__1::__map_value_compare&lt;boost::re_detail::cpp_regex_traits_base&lt;char&gt;, std::__1::__value_type&lt;boost::re_detail::cpp_regex_traits_base&lt;char&gt;, std::__1::__list_iterator&lt;std::__1::pair&lt;boost::shared_ptr&lt;boost::re_detail::cpp_regex_traits_implementation&lt;char&gt; const&gt;, boost::re_detail::cpp_regex_traits_base&lt;char&gt; const*&gt;, void*&gt; &gt;, std::__1::less&lt;boost::re_detail::cpp_regex_traits_base&lt;char&gt; &gt;, true&gt;, std::__1::allocator&lt;std::__1::__value_type&lt;boost::re_detail::cpp_regex_traits_base&lt;char&gt;, std::__1::__list_iterator&lt;std::__1::pair&lt;boost::shared_ptr&lt;boost::re_detail::cpp_regex_traits_implementation&lt;char&gt; const&gt;, boost::re_detail::cpp_regex_traits_base&lt;char&gt; const*&gt;, void*&gt; &gt; &gt; &gt;::__erase_unique&lt;boost::re_detail::cpp_regex_traits_base&lt;char&gt; &gt;(boost::re_detail::cpp_regex_traits_base&lt;char&gt; const&amp;) in libboost_regex.a(instances.o)\n          ...\n      \"std::__1::locale::operator=(std::__1::locale const&amp;)\", referenced from:\n          boost::re_detail::cpp_regex_traits_base&lt;char&gt;::imbue(std::__1::locale const&amp;) in libboost_regex.a(instances.o)\n          boost::shared_ptr&lt;boost::re_detail::cpp_regex_traits_implementation&lt;char&gt; const&gt; boost::re_detail::create_cpp_regex_traits&lt;char&gt;(std::__1::locale const&amp;) in libboost_regex.a(instances.o)\n      \"std::__1::collate&lt;char&gt;::id\", referenced from:\n          boost::re_detail::cpp_regex_traits_base&lt;char&gt;::imbue(std::__1::locale const&amp;) in libboost_regex.a(instances.o)\n          boost::shared_ptr&lt;boost::re_detail::cpp_regex_traits_implementation&lt;char&gt; const&gt; boost::re_detail::create_cpp_regex_traits&lt;char&gt;(std::__1::locale const&amp;) in libboost_regex.a(instances.o)\n      \"std::__1::ios_base::init(void*)\", referenced from:\n          boost::cpp_regex_traits&lt;char&gt;::toi(char const*&amp;, char const*, int) const in libboost_regex.a(instances.o)\n      \"std::__1::ios_base::clear(unsigned int)\", referenced from:\n          boost::cpp_regex_traits&lt;char&gt;::toi(char const*&amp;, char const*, int) const in libboost_regex.a(instances.o)\n      \"std::__1::numpunct&lt;char&gt;::id\", referenced from:\n          boost::cpp_regex_traits&lt;char&gt;::toi(char const*&amp;, char const*, int) const in libboost_regex.a(instances.o)\n      \"std::__1::basic_ios&lt;char, std::__1::char_traits&lt;char&gt; &gt;::~basic_ios()\", referenced from:\n          boost::cpp_regex_traits&lt;char&gt;::toi(char const*&amp;, char const*, int) const in libboost_regex.a(instances.o)\n      \"typeinfo for std::__1::basic_streambuf&lt;char, std::__1::char_traits&lt;char&gt; &gt;\", referenced from:\n          typeinfo for boost::re_detail::parser_buf&lt;char, std::__1::char_traits&lt;char&gt; &gt; in libboost_regex.a(instances.o)\n      \"vtable for std::__1::basic_istream&lt;char, std::__1::char_traits&lt;char&gt; &gt;\", referenced from:\n          boost::cpp_regex_traits&lt;char&gt;::toi(char const*&amp;, char const*, int) const in libboost_regex.a(instances.o)\n      NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\n    ld: symbol(s) not found for architecture x86_64\n    clang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n"}, {"tags": ["c++", "backtracking"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1437598514, "post_id": 31573020, "comment_id": 51102522, "body": "So a path finding algorithm?"}, {"owner": {"reputation": 67, "user_id": 5128914, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/363463ab7830af269bc8023ed4a70516?s=128&d=identicon&r=PG&f=1", "display_name": "Caladbolgll", "link": "https://stackoverflow.com/users/5128914/caladbolgll"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1437599260, "post_id": 31573020, "comment_id": 51102891, "body": "@Michael Dorgan: It has some common, but not necessarily. I only specify the starting point, but the ending point can be anywhere in the grid."}, {"owner": {"reputation": 1099, "user_id": 722634, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fece74c7785ec500d6c3fe8068f23616?s=128&d=identicon&r=PG", "display_name": "ceorron", "link": "https://stackoverflow.com/users/722634/ceorron"}, "edited": false, "score": 0, "creation_date": 1437602457, "post_id": 31573020, "comment_id": 51104371, "body": "The most common and likely clearest way is to use a recursive algorithm when you want backtracking. This way at every function call you have a new set of state related to the problem you are trying to solve. If that function solves the problem. Great. If not then it either moves forward (calling itself again) or pops from the stack (backtracking) signaling to itself that the problem remains unsolved (i.e. try a different route). Look into (simple) recursive divide and conquer algorithms about graphs or grids to get the idea."}, {"owner": {"reputation": 67, "user_id": 5128914, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/363463ab7830af269bc8023ed4a70516?s=128&d=identicon&r=PG&f=1", "display_name": "Caladbolgll", "link": "https://stackoverflow.com/users/5128914/caladbolgll"}, "reply_to_user": {"reputation": 1099, "user_id": 722634, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fece74c7785ec500d6c3fe8068f23616?s=128&d=identicon&r=PG", "display_name": "ceorron", "link": "https://stackoverflow.com/users/722634/ceorron"}, "edited": false, "score": 0, "creation_date": 1437742531, "post_id": 31573020, "comment_id": 51171668, "body": "@ceorron: The pseudocode above IS already a recursive algorithm, using a stack to store all successful branches."}], "owner": {"reputation": 67, "user_id": 5128914, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/363463ab7830af269bc8023ed4a70516?s=128&d=identicon&r=PG&f=1", "display_name": "Caladbolgll", "link": "https://stackoverflow.com/users/5128914/caladbolgll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1437596352, "creation_date": 1437595679, "last_edit_date": 1437596352, "question_id": 31573020, "link": "https://stackoverflow.com/questions/31573020/backtracking-algorithm-for-cell-connections-in-a-grid", "title": "Backtracking algorithm for cell connections in a grid", "body": "<p>The explanation might be confusing or long (or both), so please let me know if there needs to be any clarification.\nI am currently designing a backtracking algorithm to find a solution for something similar to what a game of \"snake\" looks like.</p>\n\n<p>The program will start with a 2D grid, where some of the cells are inaccessible (like an obstacle). The program then proceeds with a backtracking algorithm to connect <code>int x</code> sequence of cells into a string-like group, then repeats this process until all <code>int y</code> accessible cells in the grid are connected into <code>y / x</code> groups. There are no cases where <code>y</code> is indivisible by <code>x</code>.</p>\n\n<p>To determine the cost of the group, there are certain priority on the direction of the connection. For simplification, I will only use 3 connection types, <code>double horizontal</code>, <code>double vertical</code>, and <code>double diagonal</code>, where <code>horizontal</code> has the lowest cost and <code>diagonal</code> has the highest.</p>\n\n<p>I've spent numerous days on trying to come up with different backtracking algorithms, but none of them had worked so far.\nHere's a rough sketch of what I have(actual code has lots of custom class involved, so it may cause a lot of confusions):</p>\n\n<pre><code>String_c Grid::backtracking(int x, int y, int tot_pnl_needed, String_c &amp;str_orig){\n    bool branch_found = false;\n    String_c str_cur = str_orig;\n    // set cell (x,y) as occupied. OCCUPIED is an enum value\n    set_avail(x,y,OCCUPIED);\n    str_cur.push_cell(x,y);\n    if (str_cur.is_complete()) {\n        return str_cur;\n    }\n    String_c str_tmp;\n    std::priority_queue&lt;String_c, std::vector&lt;String_c&gt;, compareString&gt; queue;\n    // if the neighboring cell is available, create a branch\n    if (is_available(x+1, y)){ // right side\n        tmp_str = backtracking(x+1, y, tot_pnl_needed-1, str_cur); \n        if (tmp_str == failed){ // assume that \"failed\" is a special String_c object. == operator is overloaded.\n            set_avail(x+1,y,AVAILABLE); // AVAIL is an enum value\n            tmp_str.pop_cell();\n        }\n        else{\n            branch_found = true;\n            queue.push(&amp;tmp_str);\n        }\n    }\n    // copy this selection code above for each different direction\n    if (branch_found) {\n        while (!queue.empty()) {\n            // push all branches into the stack, which is a parameter of Grid class\n            stack.push(queue.pop());\n        }\n    else return failed;\nreturn stack.top();\n</code></pre>\n\n<p>This is a pseudo code for the minimum backtracking algorithm required. In actual program, if the algorithm hits <code>branch_found == false</code> at the end, it needs to flip the sequence of the String_c, then continue the backtracking until it finds no branch again. Again, after one backtracking algorithm is finished, it will be called again until all cells are occupied.</p>\n\n<p>One thing to be noted is that even if a String_c is completed and is pushed to the stack, it may be reverted later if none of its branch had found a solution.</p>\n\n<p>This is the first time attempting to program a backtracking algorithm, so it was really stressful even to come up with this (which still fails...)\nIf you are the expert at this matter, I would greatly appreciate your help.</p>\n"}, {"tags": ["c++", "excel", "libxl"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1437595631, "post_id": 31572924, "comment_id": 51100780, "body": "do the failing cells always have the same excel types as the working ones? what are they?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1437596289, "post_id": 31572924, "comment_id": 51101189, "body": "whoops. my bad, sorry. not encountered this type of problem in that case. feel free to delete if you want to avoid the clutter - i&#39;ll do the same."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5214860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9683e03a800923becbfc77d8c4682da?s=128&d=identicon&r=PG", "display_name": "XKO", "link": "https://stackoverflow.com/users/5214860/xko"}, "is_accepted": false, "score": 0, "last_activity_date": 1439294183, "last_edit_date": 1439294183, "creation_date": 1439291740, "answer_id": 31940303, "question_id": 31572924, "link": "https://stackoverflow.com/questions/31572924/libxl-randomly-but-consistantly-fails-to-read-a-string-or-number-from-a-xls/31940303#31940303", "title": "LibXL randomly (but consistantly) fails to read a string or number from a .XLS", "body": "<p>I am not sure which version of the DLL you are using.</p>\n\n<p>For the integer reading problem, you may try</p>\n\n<pre><code>double num = y-&gt;readNum(x.row, x.col);\n</code></pre>\n\n<p>Seems I experienced the same problem before.</p>\n\n<p>Similar trial to change the string type.</p>\n"}], "owner": {"reputation": 447, "user_id": 3496058, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3919012fe4657753661eb1bcfa9b3b00?s=128&d=identicon&r=PG&f=1", "display_name": "HumbleWebDev", "link": "https://stackoverflow.com/users/3496058/humblewebdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 507, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439294183, "creation_date": 1437595352, "question_id": 31572924, "link": "https://stackoverflow.com/questions/31572924/libxl-randomly-but-consistantly-fails-to-read-a-string-or-number-from-a-xls", "title": "LibXL randomly (but consistantly) fails to read a string or number from a .XLS", "body": "<p>Okay, here's the thing:</p>\n\n<p>I've been developing this program for quite a while now. Its function is to search, read, and organize data from various xls files.</p>\n\n<p>Everything compiles and works for the most part except for one thing:\nFor some reason, sometimes libXL just <strong>WILL NOT</strong> read a string or integer from\na cell for that .xls file. And I say randomly because it only appears random,\nbut <strong>EVERYTIME</strong> I run the program, it consistently fails for the same files at the\nsame cells.</p>\n\n<p>I know this because I've rigged the code to inform me when it failed to read the string or the number (\"errortype::invalid_string\", \"errortype::num==0\")</p>\n\n<p>This program is written in <strong>c++, windows 7, Visual Studio Express 2013</strong></p>\n\n<p>Here's a code snippet from my <em>getval()</em> function</p>\n\n<pre><code>std::string getval(cell x, libxl::Sheet* y){\nstd::string header= \"none\";\n\nif (y-&gt;cellType(x.row, x.col) == libxl::CELLTYPE_EMPTY)\n    header = \"none\";\n\nelse if (y-&gt;cellType(x.row, x.col) == libxl::CELLTYPE_BLANK)\n    header = \"none\";\n\nelse if (y-&gt;cellType(x.row, x.col) == libxl::CELLTYPE_STRING){\n    if (info_level &gt; 2)std::cout &lt;&lt; \"\\n\" &lt;&lt; \"Getting value from cell: (\" &lt;&lt; x.row &lt;&lt; \", \" &lt;&lt; x.col &lt;&lt; \")\";\n\n    const wchar_t* s = y-&gt;readStr(x.row, x.col);\n\n    if (s){\n        std::wstring w = std::wstring(s);\n        header = std::string(w.begin(), w.end());\n    }\n    else\n        header = \"errortype::invalid_string\";\n\n}\n\nelse if (y-&gt;cellType(x.row, x.col) == libxl::CELLTYPE_NUMBER){\n    long long num = 0;\n    num = y-&gt;readNum(x.row, x.col);\n    //int res = int(num);\n\n    if (num != 0){\n        std::stringstream ss;\n        ss &lt;&lt; num;\n        header = ss.str();\n    }\n    else\n        header = \"errortype::num==0\";\n\n}\n\nelse if (y-&gt;cellType(x.row, x.col) == libxl::CELLTYPE_BOOLEAN)\n    header = \"errortype::celltype_bool\";\n\nelse if (y-&gt;cellType(x.row, x.col) == libxl::CELLTYPE_ERROR)\n    header = \"errortype::celltype_error\";\n\n\n\n    return header;}\n</code></pre>\n\n<p>If anyone has some insight as to why this might be happening, it's much appreciated. If you require more information to solve the problem, I'll gladly provide it. </p>\n"}, {"tags": ["c++", "visual-c++", "gcc"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 4, "creation_date": 1437595689, "post_id": 31572915, "comment_id": 51100817, "body": "Methinks Linux vs Windows is a total red herring. The real issue will be GCC vs Visual Studio. And given that you&#39;re using a really old version of VS, I won&#39;t be surprised if it&#39;s a bug. However, what version of GCC are you using? You didn&#39;t specify that, and maybe it&#39;s even older."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1437595925, "post_id": 31572915, "comment_id": 51100957, "body": "Anyhow my guess is the two <code>~A</code> generated by the (unspecified) <code>func</code> must be (1) the in-function local copy of <code>b</code> being dtord and (2) the <i>passed</i> rvalue temporary copy of <code>b</code> being dtord. The important question would be whether this still happens in newer versions of VS, not a 7-year-old one!"}, {"owner": {"reputation": 1340, "user_id": 3312772, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/72099df70072c33488c4d4f53cae8d97?s=128&d=identicon&r=PG&f=1", "display_name": "instance", "link": "https://stackoverflow.com/users/3312772/instance"}, "edited": false, "score": 0, "creation_date": 1437596075, "post_id": 31572915, "comment_id": 51101051, "body": "I doubt if the second Output (in VS) is correct? Conceptually shouldn&#39;t be, as far as i know. Ok, just to point out one more thing in your statement, why would copy constructor vanishes ~A, it shhouldn&#39;t? Correct me if i am wrong, it &#39;s as a result of destructor call not constructor call."}, {"owner": {"reputation": 981, "user_id": 3900879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YtmWq.png?s=128&g=1", "display_name": "Rusty Shackleford", "link": "https://stackoverflow.com/users/3900879/rusty-shackleford"}, "edited": false, "score": 1, "creation_date": 1437596075, "post_id": 31572915, "comment_id": 51101050, "body": "Out of curiosity... if you change <code>func(A a)</code> to <code>func(B b)</code>, do you get consistent results between GCC and VS?  Just wondering if the slicing is the cause of the difference in behavior."}, {"owner": {"reputation": 1340, "user_id": 3312772, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/72099df70072c33488c4d4f53cae8d97?s=128&d=identicon&r=PG&f=1", "display_name": "instance", "link": "https://stackoverflow.com/users/3312772/instance"}, "edited": false, "score": 0, "creation_date": 1437596167, "post_id": 31572915, "comment_id": 51101107, "body": "@Equality7-2521i doubt slicing would show such behavior, also in mentioned classes slicing won&#39;t come in picture as both classes are identical in structure."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 5, "creation_date": 1437596290, "post_id": 31572915, "comment_id": 51101192, "body": "Can you show what MSVC does when the copy constructor of <code>A</code> prints something? My guess is that there somehow is an extra temporary in MSVC used to implement the slicing."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1437596347, "post_id": 31572915, "comment_id": 51101228, "body": "I&#39;m interested in whether slicing explains the misimplementation, but I&#39;m a lot more interested in whether a decently modern version of VS fixes it. I don&#39;t have a copy... yet?"}, {"owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "edited": false, "score": 2, "creation_date": 1437596530, "post_id": 31572915, "comment_id": 51101345, "body": "By the way MSVC2013 agrees with MSVC2008"}, {"owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1437597009, "post_id": 31572915, "comment_id": 51101674, "body": "By running the code with the debugger the impression I get is that the observation of @BaummitAugen is right."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1437599156, "post_id": 31572915, "comment_id": 51102837, "body": "Looking forward to a test of the question posed by Baum mit Augen (unless that&#39;s exactly what marom did! I can&#39;t be sure). Also curious whether the brand new VS2015 exhibits this too."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1340, "user_id": 3312772, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/72099df70072c33488c4d4f53cae8d97?s=128&d=identicon&r=PG&f=1", "display_name": "instance", "link": "https://stackoverflow.com/users/3312772/instance"}, "edited": false, "score": 0, "creation_date": 1437599341, "post_id": 31572915, "comment_id": 51102929, "body": "@instance not sure what you are talking about, this code is definitely slicing (an <code>A</code> is created by value from a <code>B</code>)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1437599917, "post_id": 31572915, "comment_id": 51103257, "body": "@underscore_d If you wait for me to test this, you&#39;ll wait in vain. I do not own any Microsoft compilers."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1437600675, "post_id": 31572915, "comment_id": 51103632, "body": "Do you get the same extra destructor from the code <code>{ A a = b; }</code> and <code>{ A a(b); }</code>  ?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1437600846, "post_id": 31572915, "comment_id": 51103701, "body": "@BaummitAugen I meant just anyone, not specifically you. I too am unlikely to acquire VS any time soon."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1437662371, "post_id": 31572915, "comment_id": 51132979, "body": "Running the code <a href=\"http://webcompiler.cloudapp.net/\" rel=\"nofollow noreferrer\">here</a> I don&#39;t get the effect you see.  Looks like this is fixed in version 19 of the compiler, which I think is MSVC2015.  As a later version of the product seems to have fixed the bug, I&#39;m not sure what good a bug report would do you."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1437663604, "post_id": 31572915, "comment_id": 51134076, "body": "@Yakk Funny... I was just going to comment that I ran the code there and I did get the effect described by the OP."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1437665881, "post_id": 31572915, "comment_id": 51135902, "body": "@bogdan interesting.  My slight variation didn&#39;t cause it to happen.  I added <code>A(A const&amp;){ std::cout &lt;&lt; &quot;copyA&quot;; }</code> and the effect goes away.  Puzzling."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1437666229, "post_id": 31572915, "comment_id": 51136167, "body": "@Yakk Yes, that was mentioned by the OP: a user-provided copy constructor makes the problem go away. I also verified that explicitly defaulting the copy constructor still causes the issue. So, it looks like the defaulted constructor triggers the effect."}], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1437602547, "post_id": 31574338, "comment_id": 51104414, "body": "For ref, what would be the best way for VS users to report this to MS? The only guide I found on a quick search requires installing the Feedback extension: <a href=\"https://connect.microsoft.com/VisualStudio/content/content.aspx?ContentID=26698\" rel=\"nofollow noreferrer\">connect.microsoft.com/VisualStudio/content/&hellip;</a> Things only start to get interesting around #8."}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 2, "creation_date": 1437614660, "post_id": 31574338, "comment_id": 51107836, "body": "No extension required; just go to <a href=\"https://connect.microsoft.com/VisualStudio/\" rel=\"nofollow noreferrer\">Microsoft Connect</a> and click &quot;Submit a Bug.&quot;  Thanks for reporting the issue!"}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "reply_to_user": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 1, "creation_date": 1438630221, "post_id": 31574338, "comment_id": 51518321, "body": "@JamesMcNellis Looks like this was reported before: <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/757354/c-destructor-is-called-twice-on-temporary-created-object\" rel=\"nofollow noreferrer\">connect.microsoft.com/VisualStudio/feedback/details/757354/&hellip;</a>&zwnj;&#8203;. Unfortunately, the issue is marked as <code>Deferred</code>. Any idea if there are any plans for fixing this? It could cause some subtle portability issues."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 5, "last_activity_date": 1437600650, "creation_date": 1437600650, "answer_id": 31574338, "question_id": 31572915, "link": "https://stackoverflow.com/questions/31572915/spurious-c-destructor-call-under-visual-studio-2008-absent-under-gcc/31574338#31574338", "title": "Spurious C++ destructor call under Visual Studio 2008 (absent under GCC)", "body": "<p>The comments suggest that MSVC 2008 uses a temporary that g++ doesn't, to pass the parameter. If so, this is a bug. From C++03 [dcl.init]/12:</p>\n\n<blockquote>\n  <p>The initialization that occurs in argument passing, function return, throwing an exception (15.1), handling an exception (15.3), and brace-enclosed initializer lists (8.5.1) is called <em>copy-initialization</em> and is equivalent to the form\n  <code>T x = a;</code></p>\n</blockquote>\n\n<p>Now here is the crucial bit.  In <code>T x = a;</code>, if <code>a</code> is <em>not</em> a <code>T</code> or derived from <code>T</code>, then that is equivalent to <code>T x = T(a);</code>, and an extra temporary is conceptually used. (This temporary is eligible for copy-elision).</p>\n\n<p>However, if <code>a</code> is a <code>T</code> or derived from <code>T</code>, then there must not be an extra temporary.It is the same as <code>T x(a);</code>.</p>\n\n<p>In this question's code, since <code>B</code> derives from <code>A</code>, there must not be a temporary.</p>\n\n<p>The supporting text in C++03 is under [dcl.init]/14 (I have highlighted the parts relevant to this question's code sample):</p>\n\n<blockquote>\n  <p>If the destination type is a (possibly cv-qualified) class type:</p>\n  \n  <ul>\n  <li>If the class is an aggregate (8.5.1), and the initializer is a brace-enclosed list, see 8.5.1.</li>\n  <li>If the initialization is direct-initialization, or if it is copy-initialization where the cv-unqualified version of the source type is the same class as, <strong>or a derived class of</strong>, the class of the destination, constructors are considered. The applicable constructors are enumerated (13.3.1.3), and the best one is chosen through overload resolution (13.3). <strong>The constructor so selected is called to initialize the object, with the initializer expression(s) as its argument(s)</strong>. If no constructor applies, or the overload resolution is ambiguous, the initialization is ill-formed.</li>\n  <li><strong>Otherwise</strong> (i.e., for the remaining copy-initialization cases), user-defined conversion sequences that can convert from the source type to the destination type or (when a conversion function is used) to a derived class thereof are enumerated as described in 13.3.1.4, and the best one is chosen through overload resolution (13.3). If the conversion cannot be done or is ambiguous, the initialization is ill-formed. The function selected is called with the initializer expression as its argument; if the function is a constructor, <strong>the call initializes a temporary</strong> of the destination type. The result of the call (which is the temporary for the constructor case) is then used to direct-initialize, according to the rules above, the object that is the destination of the copy-initialization. In certain cases, an imple-\n  mentation is permitted to eliminate the copying inherent in this direct-initialization by constructing the intermediate result directly into the object being initialized; see 12.2, 12.8.</li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 658, "user_id": 2948126, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/efcdff5dc9a345a1f2f971813fa1a0ac?s=128&d=identicon&r=PG&f=1", "display_name": "ScarletPumpernickel", "link": "https://stackoverflow.com/users/2948126/scarletpumpernickel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 2, "accepted_answer_id": 31574338, "answer_count": 1, "score": 12, "last_activity_date": 1437600650, "creation_date": 1437595327, "last_edit_date": 1437597924, "question_id": 31572915, "link": "https://stackoverflow.com/questions/31572915/spurious-c-destructor-call-under-visual-studio-2008-absent-under-gcc", "title": "Spurious C++ destructor call under Visual Studio 2008 (absent under GCC)", "body": "<p>Take the following (contrived) class hierarchy that prints to the console from the constructors and destructors:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A { \npublic:\n  A() { std::cout &lt;&lt; \"A\"; }\n  ~A() { std::cout &lt;&lt; \"~A\"; } \n};\n\nclass B : public A { \npublic:   \n  B() { std::cout &lt;&lt; \"B\"; }\n  ~B() { std::cout &lt;&lt; \"~B\"; } \n};\n\nvoid func(A a) { }\n\nint main() {   \n  B b;\n  func(b);\n  std::cout &lt;&lt; \"X\";\n  return 0; \n}\n</code></pre>\n\n<p>Compiled under linux with gcc, it prints <code>AB~AX~B~A</code> as expected (the <code>~A</code> printed before <code>X</code> is a result of the pass-by-value to <code>func</code> which creates a copy that is destructed when the function returns). </p>\n\n<p>But compiled under windows with VS2008 it prints <code>AB~A~AX~B~A</code> - where does the extra <code>~A</code> come from? It vanishes if the copy xtor is explicitly defined <code>A(A&amp; that) {};</code> or if the destructor is declared virtual (as it should be, arguably).</p>\n"}, {"tags": ["c++", "linux", "arm", "spi", "ioctl"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5145208, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y5YEKmVOC1Q/AAAAAAAAAAI/AAAAAAAAGsc/sKUxApXmsEI/photo.jpg?sz=128", "display_name": "Phil Mills", "link": "https://stackoverflow.com/users/5145208/phil-mills"}, "edited": false, "score": 1, "creation_date": 1438032278, "post_id": 31611592, "comment_id": 51271654, "body": "Looks like this is somewhere close to the root cause.  I changed my code to wrap the Linux SPI file include in an &quot;extern C&quot; directive and that seems to have corrected the behavior."}], "tags": [], "owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "is_accepted": true, "score": 2, "last_activity_date": 1437743890, "creation_date": 1437743890, "answer_id": 31611592, "question_id": 31572738, "link": "https://stackoverflow.com/questions/31572738/spi-ioc-messagen-macro-giving-me-fits/31611592#31611592", "title": "SPI_IOC_MESSAGE(N) macro giving me fits", "body": "<p>I suspect the problem might lie in this particular nugget buried in the macro soup:</p>\n\n<pre><code>...sizeof(char[...tr.size()...])...\n</code></pre>\n\n<p>Noting that Linux code is exclusively C, the C standard (I have C99 draft n1256 here) states for the <code>sizeof</code> operator that an expression operand is <em>unevaluated</em>, and the result is a constant, <em>unless</em> the type of the operand is a variable-length array, in which case it is evaluated and the result is an integer.</p>\n\n<p>The C++ standard (C++11 draft n3242), however, does not seem to give any condition under which the operand is evaluated, and only states the result is a constant.</p>\n\n<p>Thus it looks like this may be one of the corners where C and C++ differ, and compiling one as the other leads to undefined behaviour. In that case, I think the choice is either just hacking up your own version of the macro, or having a separate external C function that wraps it.</p>\n"}], "owner": {"reputation": 53, "user_id": 5145208, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y5YEKmVOC1Q/AAAAAAAAAAI/AAAAAAAAGsc/sKUxApXmsEI/photo.jpg?sz=128", "display_name": "Phil Mills", "link": "https://stackoverflow.com/users/5145208/phil-mills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6420, "favorite_count": 1, "accepted_answer_id": 31611592, "answer_count": 1, "score": 4, "last_activity_date": 1438032750, "creation_date": 1437594689, "last_edit_date": 1438032750, "question_id": 31572738, "link": "https://stackoverflow.com/questions/31572738/spi-ioc-messagen-macro-giving-me-fits", "title": "SPI_IOC_MESSAGE(N) macro giving me fits", "body": "<p>I'm having trouble getting a SPI program I'm working on to behave correctly and it seems to be some issue with the SPI_IOC_MESSAGE(N) macro.</p>\n\n<p>Here's sample code that DOESN'T work (ioctl returns EINVAL (22) ):</p>\n\n<pre><code>std::vector&lt;spi_ioc_transfer&gt; tr;\n&lt;code that fills tr with 1+ transfers&gt;\n// Hand the transmission(s) off to the SPI driver\nif (tr.size() &gt; 0)\n{\n    int ret = ioctl(fd, SPI_IOC_MESSAGE(tr.size()), tr.data());\n    if (ret &lt; 1)\n    {\n         int err = errno;\n    }\n}\n</code></pre>\n\n<p>My test code right now is creating a vector of length 1.\nIf I explicitly change the code to:</p>\n\n<pre><code>int ret = ioctl(fd, SPI_IOC_MESSAGE( 1 ), tr.data());\n</code></pre>\n\n<p>...then ioctl(...) succeeds and my bits go down the pipe.\nLooking at the expansion of the SPI_IOC_MESSAGE macro in Eclipse, I don't see why this isn't happy.</p>\n\n<p>Suggestions?</p>\n\n<p>I'm cross-compiling for Linux/ARM (Beaglebone Black) from a 64-bit Linux VM, but that I can't see that affecting the macro.</p>\n\n<p>EDIT:\nHere are the two macro expansions out of the C pre-processor</p>\n\n<pre><code>int ret = ioctl(fd, (((1U) &lt;&lt; (((0 +8)+8)+14)) | ((('k')) &lt;&lt; (0 +8)) | (((0)) &lt;&lt; 0) | ((((sizeof(char[((((tr.size())*(sizeof (struct spi_ioc_transfer))) &lt; (1 &lt;&lt; 14)) ? ((tr.size())*(sizeof (struct spi_ioc_transfer))) : 0)])))) &lt;&lt; ((0 +8)+8))), tr.data());\n</code></pre>\n\n<p>and the literal:</p>\n\n<pre><code>int ret = ioctl(fd, (((1U) &lt;&lt; (((0 +8)+8)+14)) | ((('k')) &lt;&lt; (0 +8)) | (((0)) &lt;&lt; 0) | ((((sizeof(char[((((1)*(sizeof (struct spi_ioc_transfer))) &lt; (1 &lt;&lt; 14)) ? ((1)*(sizeof (struct spi_ioc_transfer))) : 0)])))) &lt;&lt; ((0 +8)+8))), tr.data());\n</code></pre>\n\n<p>Absolutely hideous, but I don't see anything surprising in how <code>tr.size()</code> would be getting used there.</p>\n\n<p><strong>Edit to include what seems to be the answer</strong></p>\n\n<pre><code>#ifdef __cplusplus /* If this is a C++ compiler, use C linkage */\nextern \"C\" {\n#endif\n#include &lt;linux/spi/spidev.h&gt;\n#ifdef __cplusplus /* If this is a C++ compiler, use C linkage */\n}\n#endif\n</code></pre>\n\n<p>Wrapping the linux SPI include file in an \"extern C\" instructs the system to treat that section as plain old C, and that seems to let me call <code>SPI_IOC_MESSAGE( tr.size() )</code> or <code>SPI_IOC_MESSAGE( an_int )</code> and have the correct thing happen (verified with GDB stepthrough and a signal analyzer).</p>\n"}, {"tags": ["c++", "winapi", "dll"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1437594607, "post_id": 31572659, "comment_id": 51100157, "body": "<code>_T(moduleName.c_str())</code> ?"}, {"owner": {"reputation": 445, "user_id": 922421, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0444f6544b2e4df295089a643fd1403b?s=128&d=identicon&r=PG", "display_name": "sskanitk", "link": "https://stackoverflow.com/users/922421/sskanitk"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1437594836, "post_id": 31572659, "comment_id": 51100287, "body": "Yeah - removed the _T everywhere .... still getting 0.0.0.0"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1437594888, "post_id": 31572659, "comment_id": 51100320, "body": "It&#39;s more fun to parse the PE format, using the DLL handle you get at initialization as base address for the image. If instead you want easier code, then use e.g. <code>std::vector</code> rather than <code>new</code>-ing a byte array. For example, if the value query fails the current code leaks memory."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1437595098, "post_id": 31572659, "comment_id": 51100438, "body": "Check Properties/Details for that dll.  Maybe it is 0.0.0.0.  Try making your own DLL with the details filled in and see what you get.  You can always check it first using Properties/Details."}, {"owner": {"reputation": 445, "user_id": 922421, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0444f6544b2e4df295089a643fd1403b?s=128&d=identicon&r=PG", "display_name": "sskanitk", "link": "https://stackoverflow.com/users/922421/sskanitk"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1437595123, "post_id": 31572659, "comment_id": 51100453, "body": "@Cheersandhth.-Alf - I should have mentioned - I am not too familiar with WinAPI programming. Can you elaborate a bit ... ? Do you mean I should pass \\VarFileInfo\\Translation to VerQueryValue() func and parse the results ... ?"}, {"owner": {"reputation": 445, "user_id": 922421, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0444f6544b2e4df295089a643fd1403b?s=128&d=identicon&r=PG", "display_name": "sskanitk", "link": "https://stackoverflow.com/users/922421/sskanitk"}, "reply_to_user": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1437595166, "post_id": 31572659, "comment_id": 51100488, "body": "@cup The Properties -&gt; Details -&gt; File Version has a correct value (not 0.0.0.0) ...."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1437595572, "post_id": 31572659, "comment_id": 51100735, "body": "@Cheersandhth.-Alf: FYI, you do not need to parse the PE format at all. Once the DLL is loaded, you can use <code>(Find|Load|Lock)Resource()</code> and <code>SizeofResource()</code> to access the version resource directly and make a copy of it into a temp memory buffer, and then you can pass that buffer to <code>VerQueryValue()</code>. This only works when querying for <code>VS_FIXEDFILEINFO</code> though, as <code>GetFileVersionInfo()</code> performs data patch-ups that <code>VerQueryValue()</code> requires when querying other fields, so this approach would crash without those patch-ups in place."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1437595662, "post_id": 31572659, "comment_id": 51100796, "body": "@RemyLebeau: I think that if you just call resource functions then at least do that in assembly language."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1437595716, "post_id": 31572659, "comment_id": 51100832, "body": "@Cheersandhth.-Alf: I use this approach all the time in C++ to retrieve <code>VS_FIXEDFILEINFO</code> without using <code>GetFileVersionInfo()</code>, it works fine without resorting to writing assembly code."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1437595755, "post_id": 31572659, "comment_id": 51100851, "body": "@RemyLebeau: If it works fine then you haven&#39;t used a sufficiently low level of abstraction. Just FYI."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1437595859, "post_id": 31572659, "comment_id": 51100912, "body": "@Cheersandhth.-Alf: I have no clue what you are talking about. And what makes you think I&#39;m not using any abstraction to invoke this kind of code?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1437595970, "post_id": 31572659, "comment_id": 51100982, "body": "@RemyLebeau: I think you have misunderstood something. :)"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1437618799, "post_id": 31572659, "comment_id": 51108861, "body": "@Remy Appears to be a rather weak attempt at humour. He&#39;s winding you up for reasons unclear."}], "answers": [{"comments": [{"owner": {"reputation": 445, "user_id": 922421, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0444f6544b2e4df295089a643fd1403b?s=128&d=identicon&r=PG", "display_name": "sskanitk", "link": "https://stackoverflow.com/users/922421/sskanitk"}, "edited": false, "score": 0, "creation_date": 1437598498, "post_id": 31572855, "comment_id": 51102512, "body": "Aah - dwFileVersionMS &amp; dwFileVersionLS 0- that worked! Thanks a lot @Remy-Lebeau ! And I should probably go sit in a corner for a while now :-/"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 445, "user_id": 922421, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0444f6544b2e4df295089a643fd1403b?s=128&d=identicon&r=PG", "display_name": "sskanitk", "link": "https://stackoverflow.com/users/922421/sskanitk"}, "edited": false, "score": 0, "creation_date": 1437598905, "post_id": 31572855, "comment_id": 51102717, "body": "@sskanitk: Probably yes, because the answer you linked to already was using <code>dwFileVersionMS</code> and <code>dwFileVersionLS</code>.  Well, you learned how easy it is to break a working answer, and probably won&#39;t make the same exact mistake again ;)"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1437595068, "creation_date": 1437595068, "answer_id": 31572855, "question_id": 31572659, "link": "https://stackoverflow.com/questions/31572659/getting-dll-version-from-within-the-dll-programmatically-in-c-again/31572855#31572855", "title": "Getting DLL Version from within the DLL Programmatically in C++ - Again", "body": "<p>You are printing out the <code>ProductVersion</code> fields when you should be printing out the <code>FileVersion</code> fields instead:</p>\n\n<pre><code>printf(\"Version is %d.%d.%d.%d\",\n                 HIWORD(fileInfo-&gt;dwFileVersionMS),\n                 LOWORD(fileInfo-&gt;dwFileVersionMS),\n                 HIWORD(fileInfo-&gt;dwFileVersionLS),\n                 LOWORD(fileInfo-&gt;dwFileVersionLS));\n</code></pre>\n\n<p>Also, your code is leaking the <code>verInfo</code> array if <code>GetFileVersionInfo()</code> or <code>VerQueryValue()</code> fail.</p>\n"}], "owner": {"reputation": 445, "user_id": 922421, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0444f6544b2e4df295089a643fd1403b?s=128&d=identicon&r=PG", "display_name": "sskanitk", "link": "https://stackoverflow.com/users/922421/sskanitk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "accepted_answer_id": 31572855, "answer_count": 1, "score": 0, "last_activity_date": 1468610773, "creation_date": 1437594453, "last_edit_date": 1495541684, "question_id": 31572659, "link": "https://stackoverflow.com/questions/31572659/getting-dll-version-from-within-the-dll-programmatically-in-c-again", "title": "Getting DLL Version from within the DLL Programmatically in C++ - Again", "body": "<p>Tried out the answers from MSDN forum &amp; the answer mentioned in thread - <a href=\"https://stackoverflow.com/questions/940707/how-do-i-programatically-get-the-version-of-a-dll-or-exe-file\">How do I programmatically get the version of a DLL or EXE file?</a> - but I always get version number as \"0.0.0.0\"</p>\n\n<p>Right Click my DLL -> Properties -> Details -> File Version has correct value.\nThe EXE that loads my DLL does not version info - but not sure if that would matter.</p>\n\n<p>My code is below (as part of the dll)-> </p>\n\n<pre><code>   std::string moduleName     = \"&lt;full absolute path to DLL that this code is part of&gt;\";\n   DWORD  zero                = 0;\n   uint32 verInfoLen          = 0;\n   BYTE   *verInfo            = NULL;\n   VS_FIXEDFILEINFO *fileInfo = NULL;\n   uint32 len                 = 0;\n\n   /* Get the size of FileVersionInfo structure */\n   verInfoLen = GetFileVersionInfoSize(moduleName.c_str(), &amp;zero);\n   if (verInfoLen == 0) {\n      printf(\"GetFileVersionInfoSize() Failed!\");\n      return;\n   }\n\n   /* Get FileVersionInfo structure */\n   verInfo = new BYTE[verInfoLen];\n   if (!GetFileVersionInfo(moduleName.c_str(), zero, verInfoLen, verInfo)) {\n      printf(\"GetFileVersionInfo Failed!\");\n      return;\n   }\n\n   /* Query for File version details. */\n   if (!VerQueryValue(verInfo, \"\\\\\", (LPVOID *)&amp;fileInfo, &amp;len)) {\n      printf(\"VerQueryValue Failed!\");\n      return;\n   }\n\n   /* None of the above func calls fail - but both printf below print all zeros */\n   printf(\"Version is %d.%d.%d.%d\",\n                     (fileInfo-&gt;dwProductVersionMS &gt;&gt; 16) &amp; 0xff,\n                     (fileInfo-&gt;dwProductVersionMS &gt;&gt;  0) &amp; 0xff,\n                     (fileInfo-&gt;dwProductVersionLS &gt;&gt; 16) &amp; 0xff,\n                     (fileInfo-&gt;dwProductVersionLS &gt;&gt;  0) &amp; 0xff);\n\n   printf(\"Version is %d.%d.%d.%d\",\n                     HIWORD(fileInfo-&gt;dwProductVersionMS),\n                     LOWORD(fileInfo-&gt;dwProductVersionMS),\n                     HIWORD(fileInfo-&gt;dwProductVersionLS),\n                     LOWORD(fileInfo-&gt;dwProductVersionLS));\n</code></pre>\n\n<p>Any help appreciated !</p>\n"}, {"tags": ["c++", "cplex"], "answers": [{"comments": [{"owner": {"reputation": 1695, "user_id": 2108433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d734ef97ea8fececa4988dcc738f2e1d?s=128&d=identicon&r=PG", "display_name": "TimChippingtonDerrick", "link": "https://stackoverflow.com/users/2108433/timchippingtonderrick"}, "edited": false, "score": 0, "creation_date": 1437634580, "post_id": 31574839, "comment_id": 51113864, "body": "This is a plain C++ I/O question, doesn&#39;t seem related to CPLEX at all other than purely incidentally?"}, {"owner": {"reputation": 33, "user_id": 4071057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ccbb16125c66b01bcf78c4f7a28710?s=128&d=identicon&r=PG&f=1", "display_name": "Deanna1125", "link": "https://stackoverflow.com/users/4071057/deanna1125"}, "reply_to_user": {"reputation": 1695, "user_id": 2108433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d734ef97ea8fececa4988dcc738f2e1d?s=128&d=identicon&r=PG", "display_name": "TimChippingtonDerrick", "link": "https://stackoverflow.com/users/2108433/timchippingtonderrick"}, "edited": false, "score": 0, "creation_date": 1437714293, "post_id": 31574839, "comment_id": 51155895, "body": "@TimChippingtonDerrick, thanks for your comment. It would be a pure C++ I/O question if I just asked help on how to read a numeric matrix from a text file into a 2D array or vector. As I stated in my question title, I was searching for solution than can directly read the matrix into IloNumArray2 data type in CPLEX. Noted that my solution above is only a  work-around, i.e. not solving the problem I stated in my question."}], "tags": [], "owner": {"reputation": 33, "user_id": 4071057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ccbb16125c66b01bcf78c4f7a28710?s=128&d=identicon&r=PG&f=1", "display_name": "Deanna1125", "link": "https://stackoverflow.com/users/4071057/deanna1125"}, "is_accepted": false, "score": 0, "last_activity_date": 1437602749, "creation_date": 1437602749, "answer_id": 31574839, "question_id": 31572309, "link": "https://stackoverflow.com/questions/31572309/fail-to-read-numeric-matrix-without-including-data-in-square-brackets-from-a-t/31574839#31574839", "title": "Fail to read numeric matrix (without including data in square brackets) from a text file to CPLEX IloNumArray2", "body": "<p>I figured out a workaround method, which first used a 2D vector to store the matrix read from the text file. Then, simply copy (assign values of) that 2D vector to IloNumArray2. Modified reading data function code is given below:</p>\n\n<pre><code>void readToIloNumArray(IloEnv env, const char* fileName, IloNumArray2&amp; iloNum2dArray)\n{\n    ifstream inFile(fileName); \n    if(!inFile) \n    {\n        cerr &lt;&lt; \"ERROR: could not open data file '\" &lt;&lt; fileName &lt;&lt;endl;\n        exit(1);\n    }\n\n    vector&lt;vector&lt;double&gt; &gt; vectorMatrix;\n    string line; \n\n    while(getline(inFile, line))  // read a line \n    {\n        vector&lt;double&gt; rowData;\n        istringstream iss(line); \n        double number; \n        while(iss &gt;&gt; number)  // extract numbers from line\n        {\n            rowData.push_back(number); \n        }\n        vectorMatrix.push_back(rowData); \n    }\n\n    // Now assign  values (copy) vectorMatrix to IloNumArray2\n    for(int i = 0; i &lt; vectorMatrix.size(); i++)\n    {\n        iloNum2dArray.add(IloNumArray(env)); \n        for(int j = 0; j &lt; vectorMatrix[0].size(); j++)\n        {\n            iloNum2dArray[i].add(vectorMatrix[i][j]);\n        }\n    }\n\n    /// for debug\n    //cout &lt;&lt; \"IloNum2dArray:\" &lt;&lt; iloNum2dArray &lt;&lt; endl; \n    cout &lt;&lt; \"Successfully read file \" &lt;&lt; fileName &lt;&lt; \"!\" &lt;&lt; endl;\n    inFile.close();\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4071057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ccbb16125c66b01bcf78c4f7a28710?s=128&d=identicon&r=PG&f=1", "display_name": "Deanna1125", "link": "https://stackoverflow.com/users/4071057/deanna1125"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1437602749, "creation_date": 1437593292, "last_edit_date": 1437599748, "question_id": 31572309, "link": "https://stackoverflow.com/questions/31572309/fail-to-read-numeric-matrix-without-including-data-in-square-brackets-from-a-t", "title": "Fail to read numeric matrix (without including data in square brackets) from a text file to CPLEX IloNumArray2", "body": "<p>I am using CPLEX C++ concert library to model some mixed integer problem. When it comes to reading data from external text file. I have been always using the template operator >> to read numeric values from a text file in the format of [x, y, z, ...] (likewise, [  [x1, y1, c1, ...], [x2, y2, c2, ...], ...] for a 2D case). This way is fine. However, in order to make my code more generic, I wanted to write a function which can read a numeric matrix without formatted using square brackets (i.e. pure numeric matrix, see example below) from a text file into a IloNumArray2 directly.</p>\n\n<p>Below it a sample data text file I used, called \"test.txt\":</p>\n\n<p>0.51  3.71  0.23<br>\n0.90  3.71  0.24<br>\n1.30  3.71  0.24<br>\n1.45  3.34  0.18<br>\n2.15  3.77  0.15            </p>\n\n<p>Note that this matrix could have any number of columns (usually 2 or 3), you may know the total number of rows ahead of time. Let's suppose we know the total number of rows. I give my reading data function and partial code in main.cpp where I called that reading data function as follows. </p>\n\n<pre><code>void readToIloNumArray(IloEnv env, const char* fileName, IloNumArray2&amp; iloNum2dArray)\n    {\n        std::ifstream inFile(fileName); \n        if(!inFile) \n        {\n            std::cerr &lt;&lt; \"ERROR: could not open data file '\" &lt;&lt; fileName &lt;&lt;endl;\n            exit(1);\n        }\n\n        IloNumArray rowData(env);  // to store each line of data \n        std::string line; \n        int i = 0; \n\n        while(std::getline(inFile, line))  // read a line of data as a string\n        {\n            std::istringstream iss(line); \n            double number; \n            rowData.clear();    // to clear the 1-d array before reading new data to it\n\n            while(iss &gt;&gt; number)  // extract numbers from line\n            {\n                rowData.add(number); \n            }\n\n            // This is how I add each rowData (an IloNumArray) to the final iloNum2dArray (an IloNumArray2) \n            iloNum2dArray[i] = rowData;\n\n            // output iloNum2dArray[i] to make sure it contains the correct data\n            cout &lt;&lt; iloNum2dArray[i] &lt;&lt; endl;  // yes, results is correct\n\n            // by changing the index i, I ensure that the next line of data is stored as a new row in iloNum2Array \n            i++; \n        }\n\n        // make sure that the number of lines read from the text file is actually equal to its known actual size\n        cout &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; endl;  // YES\n        // SOMEHOW, each row of iloNum2dArray just simply repeats the last row of the input text file\n        cout &lt;&lt; iloNum2dArray &lt;&lt; endl; \n        cout &lt;&lt; \"Successfully read file \" &lt;&lt; fileName &lt;&lt; \"!\" &lt;&lt; endl;\n        inFile.close();\n    }\n\n#include &lt;ilcplex/ilocplex.h&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n\nint main(int argc, char **argv)\n{ \n    IloEnv env;\n    IloNumArray2 IloMatrix(env, n);\n\n    // call the reading data function defined above\n    readToIloNumArray(env, \"test.txt\", IloMatrix); \n\n    // output IloMatrix to see if it contains the original matrix in the test.txt\n    cout &lt;&lt; \"IloMatrix = \" &lt;&lt; IloMatrix &lt;&lt; endl;  // NO, IloMatrix repeats the last line for n times        // do other process \n    ...\n}\n</code></pre>\n\n<p>My question is why the final IloMatrix doesn't contain the original matrix specified in the test.txt file, but repeating the last line of data of the test.txt for n times? (shown as below)</p>\n\n<p>2.15  3.77  0.15<br>\n2.15  3.77  0.15<br>\n2.15  3.77  0.15<br>\n2.15  3.77  0.15<br>\n2.15  3.77  0.15</p>\n"}, {"tags": ["c++", "visual-studio", "window", "sdl-2"], "comments": [{"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "edited": false, "score": 0, "creation_date": 1437592527, "post_id": 31571897, "comment_id": 51098957, "body": "This code compiles without warnigs? SDL_Quit has no parentheses."}, {"owner": {"reputation": 61, "user_id": 5134293, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-y218QpfR97o/AAAAAAAAAAI/AAAAAAAAAHo/C_tymFD5f38/photo.jpg?sz=128", "display_name": "Nasir  Jones", "link": "https://stackoverflow.com/users/5134293/nasir-jones"}, "reply_to_user": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "edited": false, "score": 0, "creation_date": 1437592682, "post_id": 31571897, "comment_id": 51099057, "body": "that is correct, this code compiles without any errors"}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "edited": false, "score": 1, "creation_date": 1437592844, "post_id": 31571897, "comment_id": 51099157, "body": "Maybe you are compiling without any warnings, but SDL_Quit; is simple a statement with no effect. Also, if it was correctly called, you would call it twice, which is not good (once in the <code>main</code>, second time in the <code>close</code> functions). Last thing: <code>close</code> is not a good name for a function, since there is same named function in standard library."}, {"owner": {"reputation": 657, "user_id": 5112385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f42c254b48902f4d5eb38a662ca7fa?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Martin", "link": "https://stackoverflow.com/users/5112385/matt-martin"}, "edited": false, "score": 2, "creation_date": 1437593266, "post_id": 31571897, "comment_id": 51099417, "body": "Your &quot;else&quot; in main appears to be in the wrong place. The current code will only call <code>SDL_Delay</code> if initialization <i>fails</i>. Writing <code>if(!...)</code> appears to complicate the code; try using positive <code>if</code>s and using <code>else</code>s."}], "answers": [{"tags": [], "owner": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "is_accepted": false, "score": 2, "last_activity_date": 1437592427, "creation_date": 1437592427, "answer_id": 31572038, "question_id": 31571897, "link": "https://stackoverflow.com/questions/31571897/window-closes-too-fast/31572038#31572038", "title": "Window closes too fast", "body": "<p>You only initialized the Video sub-system; you need to initialize the Timer sub-system if you want to use <code>SDL_Delay</code> and other time-related functions.</p>\n\n<p>Change your <code>SDL_Init(SDL_INIT_VIDEO)</code> to <code>SDL_Init(SDL_INIT_VIDEO | SDL_INIT_TIMER)</code></p>\n"}, {"tags": [], "owner": {"reputation": 379, "user_id": 5121918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LHw0a.png?s=128&g=1", "display_name": "jrsmolley", "link": "https://stackoverflow.com/users/5121918/jrsmolley"}, "is_accepted": false, "score": 2, "last_activity_date": 1437593263, "last_edit_date": 1437593263, "creation_date": 1437592933, "answer_id": 31572213, "question_id": 31571897, "link": "https://stackoverflow.com/questions/31571897/window-closes-too-fast/31572213#31572213", "title": "Window closes too fast", "body": "<p>Your first line should be...</p>\n\n<pre><code>if (init())\n</code></pre>\n\n<p>calling 'if (!init())' continues to the rest of the code only if init() fails.\nI think the window briefly appears because in init(), the window is created, but the rest of your code (including timing) is skipped and the window closes right away.</p>\n\n<p>I would revise to:</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n    if( init()) {\n\n        //other code executes if init() is successful\n        SDL_Delay(5000);\n    }\n\n    else {\n        cout &lt;&lt; \"Failed to initialize!\";\n    }\n\n    close();\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "is_accepted": true, "score": 1, "last_activity_date": 1437596069, "creation_date": 1437596069, "answer_id": 31573130, "question_id": 31571897, "link": "https://stackoverflow.com/questions/31571897/window-closes-too-fast/31573130#31573130", "title": "Window closes too fast", "body": "<p>Here you have the code that works, with all the suggestions from comments and other answers:</p>\n\n<pre><code>#include &lt;SDL.h&gt;\n#include &lt;iostream&gt;\n\nint const s_height = 300;\nint const s_width  = 400;\n\nSDL_Window  *new_window  = NULL;\nSDL_Surface *new_surface = NULL;\nSDL_Surface *new_image   = NULL;\n\nusing namespace std;\n\nbool init(void) {\n    if (SDL_Init(SDL_INIT_VIDEO | SDL_INIT_TIMER) &lt; 0) {\n        cout &lt;&lt; \"couldn't initialize\" &lt;&lt; endl;\n        return false;\n    }\n    new_window = SDL_CreateWindow(\"SDL Tutorial 2\", \n                                  SDL_WINDOWPOS_UNDEFINED, \n                                  SDL_WINDOWPOS_UNDEFINED, \n                                  s_width, \n                                  s_height, \n                                  SDL_WINDOW_SHOWN\n    );\n    if (new_window == NULL) {\n        cout &lt;&lt; \"there's no window\" &lt;&lt; endl;\n        return false;\n    }\n\n    new_surface = SDL_GetWindowSurface(new_window);\n    if (new_surface == NULL) {\n        cout &lt;&lt; \"there's no surface\" &lt;&lt; endl;\n        return false;\n    }\n    return true;\n}\n\nbool load_media(void) {\n    new_image = SDL_LoadBMP(\"SDL Tutorial 2/hello_world.bmp\");\n    if (new_image == NULL) {\n        cout &lt;&lt; \"couldn't load image\" &lt;&lt; endl;\n        return false;\n    }\n    return true;\n}\n\nvoid finish(void) {\n    if (new_image) {\n        SDL_FreeSurface(new_image);\n    }\n    if (new_window) {\n        SDL_DestroyWindow(new_window);\n    }\n    SDL_Quit();\n}\n\nint main(int argc, char *argv[]) {\n    if (init()) {\n        if (load_media()) {\n            SDL_BlitSurface(new_image, NULL, new_surface, NULL);\n            SDL_UpdateWindowSurface(new_window);\n            SDL_Delay(5000);\n            finish();\n        } else {\n            cout &lt;&lt; \"FAILED to Load Media!\" &lt;&lt; endl;\n        }\n    } else {\n        cout &lt;&lt; \"FAILED to Initialize!\" &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5134293, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-y218QpfR97o/AAAAAAAAAAI/AAAAAAAAAHo/C_tymFD5f38/photo.jpg?sz=128", "display_name": "Nasir  Jones", "link": "https://stackoverflow.com/users/5134293/nasir-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 31573130, "answer_count": 3, "score": 2, "last_activity_date": 1437596069, "creation_date": 1437591992, "last_edit_date": 1437595499, "question_id": 31571897, "link": "https://stackoverflow.com/questions/31571897/window-closes-too-fast", "title": "Window closes too fast", "body": "<p>So I want this code to create a window with an image on it <em>(hello world)</em> and then quit after 5 seconds using SDL2, visual studio, and c++. I thought it should be simple enough. I wrote out the code and when I built it there were no errors, however the problem is that the window quits as soon as it's created. I thought intially that adding SDL_Delay(5000) would cause the desired effect but I guess it didn't work that way. Can anyone tell me as to why this is?</p>\n\n<pre><code>#include &lt;SDL.h&gt;\n#include &lt;iostream&gt;\n\nbool init();\nbool load_media();\nvoid close();\nconst int s_height = 300;\nconst int s_width = 400;\n\nSDL_Window* new_window = NULL;\nSDL_Surface* new_surface = NULL;\nSDL_Surface* new_image = NULL;\n\nusing namespace std;\n\nbool init()\n{\n    bool success = true;\n    if (SDL_Init(SDL_INIT_VIDEO) &lt; 0)\n    {\n        cout &lt;&lt; \"couldn't initialize\" &lt;&lt; endl;\n        success = false;\n    }\n    else\n    {\n        new_window = SDL_CreateWindow(\n            \"SDL Tutorial 2\", \n            SDL_WINDOWPOS_UNDEFINED, \n            SDL_WINDOWPOS_UNDEFINED, \n            s_width, \n            s_height, \n            SDL_WINDOW_SHOWN);\n        if (new_window == NULL)\n        {\n            cout &lt;&lt; \"there's no window\" &lt;&lt; endl;\n            success = false;\n        }\n        else\n        {\n            new_surface = SDL_GetWindowSurface(new_window);\n        }\n\n    }\n    return success;\n}\n\nbool load_media()\n{\n    bool success = true;\n    new_image = SDL_LoadBMP(\"SDL Tutorial 2/hello_world.bmp\");\n    if (new_image == NULL)\n    {\n        cout &lt;&lt; \"couldn't load image\" &lt;&lt; endl;\n        success = false;\n    }\n    return success;\n}\n\nvoid close()\n{\n    SDL_FreeSurface(new_image);\n    SDL_DestroyWindow(new_window);\n    SDL_Quit;\n\n}\n\n\nint main(int argc, char *argv[])\n{\n    if (!init())\n    {\n        cout &lt;&lt; \"FAILED to Initialize!\" &lt;&lt; endl;\n        if (!load_media())\n        {\n            cout &lt;&lt; \"FAILED to Load Media!\" &lt;&lt; endl;\n        }\n        else\n        {\n            SDL_BlitSurface(new_image, NULL, new_surface, NULL);\n            SDL_UpdateWindowSurface(new_window);\n            SDL_Delay(5000);\n            SDL_Quit;\n        }\n    }\n\nclose();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "permissions", "directory", "osx-yosemite"], "comments": [{"owner": {"reputation": 3764, "user_id": 544057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a87a44d905cfb69a4cbc8f4a60359d4?s=128&d=identicon&r=PG", "display_name": "rholmes", "link": "https://stackoverflow.com/users/544057/rholmes"}, "edited": false, "score": 0, "creation_date": 1437592187, "post_id": 31571861, "comment_id": 51098741, "body": "Are you running as a privileged (root) user?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1437592309, "post_id": 31571861, "comment_id": 51098813, "body": "It&#39;s confusing when you say &quot;it still won&#39;t create <code>&#47;bar</code>&quot;. You didn&#39;t ask for that. Neither do the permissions on <code>&#47;foo</code> matter there :)"}, {"owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "reply_to_user": {"reputation": 3764, "user_id": 544057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a87a44d905cfb69a4cbc8f4a60359d4?s=128&d=identicon&r=PG", "display_name": "rholmes", "link": "https://stackoverflow.com/users/544057/rholmes"}, "edited": false, "score": 0, "creation_date": 1437592382, "post_id": 31571861, "comment_id": 51098856, "body": "@rholmes Well, I am making a VST plugin and that runs in a VST host called Ableton Live.  Perhaps that&#39;s the problem and I need to Google about Ableton&#39;s VST permissions"}, {"owner": {"reputation": 3764, "user_id": 544057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a87a44d905cfb69a4cbc8f4a60359d4?s=128&d=identicon&r=PG", "display_name": "rholmes", "link": "https://stackoverflow.com/users/544057/rholmes"}, "edited": false, "score": 0, "creation_date": 1437592502, "post_id": 31571861, "comment_id": 51098941, "body": "Perhaps... I would think that you&#39;d want to store data in a writable location in that case..."}, {"owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1437592515, "post_id": 31571861, "comment_id": 51098944, "body": "@sehe Sorry, I mean it won&#39;t create <code>&#47;foo&#47;bar</code> whether or not <code>&#47;foo</code> exists already.  HTH"}, {"owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "reply_to_user": {"reputation": 3764, "user_id": 544057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a87a44d905cfb69a4cbc8f4a60359d4?s=128&d=identicon&r=PG", "display_name": "rholmes", "link": "https://stackoverflow.com/users/544057/rholmes"}, "edited": false, "score": 0, "creation_date": 1437592604, "post_id": 31571861, "comment_id": 51099005, "body": "@rholmes I probably need to research more.  I&#39;ll have a Google"}], "owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1437598029, "creation_date": 1437591857, "last_edit_date": 1437598029, "question_id": 31571861, "link": "https://stackoverflow.com/questions/31571861/cannot-create-a-directory-in-os-x-with-boostfilesystem", "title": "Cannot create a Directory in OS X with boost::filesystem", "body": "<p>I want to create a Directory on OS X using boost::filesystem.  Here is my code:</p>\n\n<pre><code>  boost::filesystem::path p(\"/foo/bar\");\n\n  const char* path = p.c_str();\n  boost::filesystem::path dir(path);\n  if(boost::filesystem::create_directory(dir))\n  {\n    std::cerr&lt;&lt; \"Directory Created: \"&lt;&lt;p&lt;&lt;std::endl;\n  }\n</code></pre>\n\n<p>Every time I get the <code>Directory Created: \"/foo/bar\"</code> but nothing is created.  I tried also to made the foo directory manually and set the permissions to <code>\"Read &amp; Write\"</code> for everyone but it still won't create <code>/bar</code>.</p>\n\n<p>Any help would be great</p>\n\n<p>EDIT:</p>\n\n<p>I just wrote a command line app that successfully creates the desired directory.  My issue must be related to permissions and the VST/ DAW (Ableton Live) - see comments.</p>\n\n<p>I'll report the solution when I find it</p>\n"}, {"tags": ["c++", "opencv", "python-sphinx", "doxygen", "documentation-generation"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1437592712, "post_id": 31571849, "comment_id": 51099072, "body": "The Sphinx says it is a Python documentation tool.  I know Doxygen can parse C++ language."}, {"owner": {"reputation": 1198, "user_id": 4412026, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-UJHZih4Newk/AAAAAAAAAAI/AAAAAAAAAOE/X7eCJSyV8BE/photo.jpg?sz=128", "display_name": "Ali Mirzaei", "link": "https://stackoverflow.com/users/4412026/ali-mirzaei"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1437593299, "post_id": 31571849, "comment_id": 51099440, "body": "Exactly this is my problem. But I am wondering how is the c++ version of OpenCV documented using Sphinx!!"}, {"owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "edited": false, "score": 0, "creation_date": 1437672693, "post_id": 31571849, "comment_id": 51140375, "body": "This is an excellent, but perhaps a little broad, question. It prompted me to ask <a href=\"http://stackoverflow.com/questions/31594254/why-did-opencv-3-change-its-documentation-tool-from-sphinx-to-doxygen\" title=\"why did opencv 3 change its documentation tool from sphinx to doxygen\">stackoverflow.com/questions/31594254/&hellip;</a>. As for how OpenCV2 is documented with sphinx, it uses the sphinx c++ domain, and is relatively straightforward to follow in the cmake build scheme."}], "answers": [{"tags": [], "owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "is_accepted": false, "score": 12, "last_activity_date": 1554028973, "last_edit_date": 1554028973, "creation_date": 1437810976, "answer_id": 31624282, "question_id": 31571849, "link": "https://stackoverflow.com/questions/31571849/what-are-the-main-differences-of-sphinx-and-doxygen/31624282#31624282", "title": "What are the main differences of Sphinx and Doxygen?", "body": "<p>This answer addresses point 2 of your question.</p>\n\n<p>Yes, doxygen partly has those features.</p>\n\n<ul>\n<li>You can have <a href=\"http://www.doxygen.nln/manual/formulas.html\" rel=\"nofollow noreferrer\">math formulas</a>, that can be rendered either through a local Latex install, or through MathJax, a Javascript rendering library. As with Latex, these can be either \"embedded\" into text, or as a separate unit in the text flow.</li>\n<li>It also includes a <a href=\"http://www.doxygen.nl/manual/searching.html\" rel=\"nofollow noreferrer\">search engine</a>.</li>\n<li>You can easily <a href=\"http://www.doxygen.nl/manual/commands.html#cmdimage\" rel=\"nofollow noreferrer\">include images</a>.</li>\n</ul>\n\n<p>For example, the two lines below will add the same image both in html and latex generated output:</p>\n\n<pre><code>  \\image latex my_image.png \"My image\" width=10cm\n  \\image html my_image.png \"My image\" width=10cm\n</code></pre>\n\n<p>I think I recall that in html, caption and width are ignored ? But Doxygen is really flexible, so if the command above isn't enough, you can just add them as html code:</p>\n\n<pre><code>&lt;img src=\"my_image.png\"  ...additional html attributes...&gt;\n</code></pre>\n\n<p>Doxygen supports also a lot of <a href=\"http://www.doxygen.nl/manual/htmlcmds.html\" rel=\"nofollow noreferrer\">regular html commands</a> that you can directly include in your comment block.</p>\n\n<p>I have no experience with Sphinx other than building Opencv manual, but what I can add about Doxygen (that I use on a day to day basis) is that it is really flexible, but this doesn't mean it's always the best choice. Pages can get cluttered and if the comment additional code is badly designed, it can get in your way.</p>\n\n<p>For completeness, one the best showcases of what doxygen can do (besides the Doxygen web site of course), is the <a href=\"http://eigen.tuxfamily.org/dox/\" rel=\"nofollow noreferrer\">Eigen library</a>. Take a look.</p>\n"}], "owner": {"reputation": 1198, "user_id": 4412026, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-UJHZih4Newk/AAAAAAAAAAI/AAAAAAAAAOE/X7eCJSyV8BE/photo.jpg?sz=128", "display_name": "Ali Mirzaei", "link": "https://stackoverflow.com/users/4412026/ali-mirzaei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18448, "favorite_count": 2, "closed_date": 1516352524, "answer_count": 1, "score": 24, "last_activity_date": 1586265530, "creation_date": 1437591805, "last_edit_date": 1586265530, "question_id": 31571849, "link": "https://stackoverflow.com/questions/31571849/what-are-the-main-differences-of-sphinx-and-doxygen", "closed_reason": "Opinion-based", "title": "What are the main differences of Sphinx and Doxygen?", "body": "<p>I want to prepare a documentation for a collection of projects, modules and libraries in the field of computer vision (mostly written in c++). To this end I had a look on <em>OpenCV</em> documentation and as you may know <em>OpenCV</em> 2.4.x documentation is based on <a href=\"https://sphinx-doc.org/\" rel=\"nofollow noreferrer\"><em>Sphinx</em></a> and It was the exact solution that I was seeking for. the nice features of Sphinx are:</p>\n\n<ol>\n<li><strong>Hierarchical structure</strong> of modules in semantic point of view. For example <em>Kalman Filter</em> is a child of <em>Motion Analysis and Object Tracking</em> module</li>\n<li>You can add <strong>images</strong> and also mathematics <strong>formulas</strong> </li>\n<li>Pretty good embedded <strong>search engine</strong></li>\n</ol>\n\n<p>But I realized that the c++ version of OpenCV3.0 is documented based on <a href=\"https://www.doxygen.nl/\" rel=\"nofollow noreferrer\"><em>Doxygen</em></a> and I don't know why! because it is not as interesting as <em>Sphinx</em>.\nI know that <em>Doxygen</em> can compile your code and extract your comments which is an useful feature. I also know that there are libraries (like <em>breathe</em>) which could act as a bridge between <em>Doxygen</em> and <em>Sphinx</em>.</p>\n\n<p><strong>Now my questions are:</strong> </p>\n\n<ol>\n<li>Are <em>Sphinx</em> and <em>Doxygen</em> alternatives of each other or they could be used alongside? </li>\n<li>Does <em>Doxygen</em> have the mentioned features of <em>Sphinx</em>? </li>\n<li>Which documentation engine (<em>Sphinx</em>, <em>Doxygen</em> or other engines) do you prefer for my problem?</li>\n</ol>\n"}, {"tags": ["c++", "ternary-operator"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1437591572, "post_id": 31571690, "comment_id": 51098359, "body": "Yes, use parentheses and the comma operator."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 6, "creation_date": 1437591665, "post_id": 31571690, "comment_id": 51098426, "body": "Rule of thumb: Don&#39;t use <code>?:</code> for control flow."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1437591764, "post_id": 31571690, "comment_id": 51098499, "body": "Or avoid it, to make it readable (even you are questioning the usage of the comma operator)"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1437591999, "post_id": 31571690, "comment_id": 51098635, "body": "Just replace it with <code>if</code>-<code>else</code>. Problem solved and readability improved."}], "answers": [{"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1437591946, "post_id": 31571812, "comment_id": 51098604, "body": "This is a strange example, because you have no side effects in your comma operands. Your code is equivalent to <code>int x = 0 ? 3 : 5;</code>. And why <code>printf</code> in a C++ question?"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1437592455, "post_id": 31571812, "comment_id": 51098911, "body": "@ChristianHackl what&#39;s wrong with not having any side effects? It&#39;s still an expression (so it demonstrates the answer to OP&#39;s question), isn&#39;t it? As to <code>printf</code>, <a href=\"http://yosefk.com/c++fqa/io.html\" rel=\"nofollow noreferrer\">it&#39;s far superior to trying to shift a stream to the left</a>."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1437592824, "post_id": 31571812, "comment_id": 51099138, "body": "Side effects are the only reason to use the comma operator in the first place."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1437592992, "post_id": 31571812, "comment_id": 51099235, "body": "@ChristianHackl if you follow the piece of good advice above (about avoiding utterly and unnecessarily &quot;clever&quot; code), then side effects are yet another reason <i>not to use</i> the comma operator. Anyway, whether or not they are a reason \u2013 my example still answers what OP was asking about."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1437593127, "post_id": 31571812, "comment_id": 51099320, "body": "I don&#39;t get it. Did you deliberately post an example in which the comma operator is meaningless just to stress the fact that one should not use it for control flow?"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1437593163, "post_id": 31571812, "comment_id": 51099351, "body": "@ChristianHackl no, I posted one without side effects in order to make the example as simple as possible."}], "tags": [], "owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "is_accepted": false, "score": 1, "last_activity_date": 1437591699, "creation_date": 1437591699, "answer_id": 31571812, "question_id": 31571690, "link": "https://stackoverflow.com/questions/31571690/can-i-use-more-than-one-instruction-in-the-second-or-third-operand-of-the-ternar/31571812#31571812", "title": "Can I use more than one instruction in the second or third operand of the ternary operator?", "body": "<p>If by \"instruction\" (which isn't even a thing when it comes to C++'s wording), you mean \"expression\", then sure: parentheses and the comma operator to the rescue!</p>\n\n<p>SSCCE:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nint main()\n{\n    int x = (1, 0) ? 2, 3 : (4, 5);\n    printf(\"%d\\n\", x); // prints 5\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1738, "user_id": 650350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fccb6495899a661e1bda75dff937ac4b?s=128&d=identicon&r=PG", "display_name": "Mathew", "link": "https://stackoverflow.com/users/650350/mathew"}, "edited": false, "score": 0, "creation_date": 1437592123, "post_id": 31571841, "comment_id": 51098707, "body": "Note, as noted in comment on original question, that the parentheses are essential, specifically around the third argument to the ternary operator. Without them, everything after the first comma gets interpreted as following the ternary rather than part of it. See <a href=\"http://stackoverflow.com/questions/9189522/something-we-found-when-using-comma-in-condition-ternary-operator\" title=\"something we found when using comma in condition ternary operator\">stackoverflow.com/questions/9189522/&hellip;</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5106417"}, "is_accepted": true, "score": 0, "last_activity_date": 1437591772, "creation_date": 1437591772, "answer_id": 31571841, "question_id": 31571690, "link": "https://stackoverflow.com/questions/31571690/can-i-use-more-than-one-instruction-in-the-second-or-third-operand-of-the-ternar/31571841#31571841", "title": "Can I use more than one instruction in the second or third operand of the ternary operator?", "body": "<p>Yes take a look at the following example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int x,y,z;\n    double d = 2.5;\n\n\n    auto f = (d == 2.2) ? (x=5,y=10,z=0,2000) : (x=15,y=0,z=20,1000);\n\n    std::cout &lt;&lt; x &lt;&lt; \" \" &lt;&lt; y &lt;&lt; \" \" &lt;&lt; z &lt;&lt; \" \" &lt;&lt; f &lt;&lt; std::endl;\n\n\n    std::cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>Not so clean so would suggest doing it more readable.</p>\n"}, {"tags": [], "owner": {"reputation": 187, "user_id": 5090805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6af55c13c60b9e4da54cea9f75e2c9d0?s=128&d=identicon&r=PG", "display_name": "Tyler", "link": "https://stackoverflow.com/users/5090805/tyler"}, "is_accepted": false, "score": 0, "last_activity_date": 1437591967, "creation_date": 1437591967, "answer_id": 31571889, "question_id": 31571690, "link": "https://stackoverflow.com/questions/31571690/can-i-use-more-than-one-instruction-in-the-second-or-third-operand-of-the-ternar/31571889#31571889", "title": "Can I use more than one instruction in the second or third operand of the ternary operator?", "body": "<p>There is a discussion about the ternary operator at <a href=\"http://www.cplusplus.com/forum/articles/14631/\" rel=\"nofollow\">http://www.cplusplus.com/forum/articles/14631/</a> that talks about this. There are some examples in the comments of the discussion showing usage for function calls and multiple ops in the ternary operator. Though, for clarity's sake, it may be best to not do too many things at once in the ternary operator - that can get hard to read pretty quick.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 5145029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a93bf8ca9de7575c9bdc33c061833d72?s=128&d=identicon&r=PG&f=1", "display_name": "Erd\u0151s Andr&#225;s", "link": "https://stackoverflow.com/users/5145029/erd%c5%91s-andr%c3%a1s"}, "is_accepted": false, "score": 0, "last_activity_date": 1437593945, "creation_date": 1437593945, "answer_id": 31572495, "question_id": 31571690, "link": "https://stackoverflow.com/questions/31571690/can-i-use-more-than-one-instruction-in-the-second-or-third-operand-of-the-ternar/31572495#31572495", "title": "Can I use more than one instruction in the second or third operand of the ternary operator?", "body": "<p>Thanks for these fast and useful answers!</p>\n\n<p>So I programming Arduino in C++, and it is the full example code:</p>\n\n<pre><code>void setup() {\n  Serial.begin(115200);\n  bool b = false;\n  int val = 0;\n\n  b ? func1() : (func2(), val = 2);\n\n  Serial.println(val);\n}\n\nvoid loop() {}\n\nvoid func1 (){\n     Serial.println(\"func1\");\n}\n\nvoid func2 (){\n    Serial.println(\"func2\");  \n}\n</code></pre>\n\n<p>When I learned from this answers, how can I use brackets, and commas correctly, I got these errors:</p>\n\n<pre><code>sketch_jul22a.ino: In function 'void setup()':\nsketch_jul22a:8: error: second operand to the conditional operator is of type 'void', but the third operand is neither a throw-expression nor of type 'void'\nsecond operand to the conditional operator is of type 'void', but the third operand is neither a throw-expression nor of type 'void'\n</code></pre>\n\n<p>I used int type functions instead of void type, and the problem is solved:</p>\n\n<pre><code>int func1 (){\n     Serial.println(\"func1\");\n     return 0;\n}\n\nint func2 (){\n    Serial.println(\"func2\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5145029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a93bf8ca9de7575c9bdc33c061833d72?s=128&d=identicon&r=PG&f=1", "display_name": "Erd\u0151s Andr&#225;s", "link": "https://stackoverflow.com/users/5145029/erd%c5%91s-andr%c3%a1s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 31571841, "answer_count": 4, "score": 0, "last_activity_date": 1437593945, "creation_date": 1437591344, "last_edit_date": 1437591722, "question_id": 31571690, "link": "https://stackoverflow.com/questions/31571690/can-i-use-more-than-one-instruction-in-the-second-or-third-operand-of-the-ternar", "title": "Can I use more than one instruction in the second or third operand of the ternary operator?", "body": "<p>Can I make something very similar, like this?</p>\n\n<pre><code>question ? func1(), val=5 : func2()\n</code></pre>\n\n<p>I'd like to put more then one instruction on the first or second parameter's place.\nIs it solvable?</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "answers": [{"comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 2, "creation_date": 1437591578, "post_id": 31571727, "comment_id": 51098366, "body": "Implicitly defining the implicitly declared copy ctor as defaulted (instead of deleted) in the presence of a user-declared dtor is deprecated. So one shouldn&#39;t rely on the behaviour in the OP."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 4, "last_activity_date": 1437591447, "creation_date": 1437591447, "answer_id": 31571727, "question_id": 31571676, "link": "https://stackoverflow.com/questions/31571676/autogenerated-default-move-constructor-with-declared-destructor/31571727#31571727", "title": "Autogenerated default move constructor with declared destructor", "body": "<p>The initialization uses the implicitly defined <strong>copy</strong> constructor. In general a move will always fall back to a copy when the move constructor or move assignment operator cannot be used for some reason, since the copy constructor and copy assignment operator are always declared (although they can be deleted under some circumstances).</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 3, "last_activity_date": 1437591920, "creation_date": 1437591920, "answer_id": 31571876, "question_id": 31571676, "link": "https://stackoverflow.com/questions/31571676/autogenerated-default-move-constructor-with-declared-destructor/31571876#31571876", "title": "Autogenerated default move constructor with declared destructor", "body": "<p>Brian's answer already explains why your code compiles. To properly check that move ctor is supressed just put a non copyable object into your class, for example <code>std::unique_ptr</code>:</p>\n\n<pre><code>class C\n{\npublic:\n    ~C() { std::cout &lt;&lt; \"Called C:~C\" &lt;&lt; std::endl; }\n\nprivate:\n    std::string v;\n    std::unique_ptr&lt;char&gt; p;\n};\n</code></pre>\n\n<p>Now gcc 5.1.0 produces this error:</p>\n\n<blockquote>\n  <p>error: use of deleted function \u2018C::C(const C&amp;)\u2019\n       C c2 = std::move(c1);</p>\n</blockquote>\n"}], "owner": {"reputation": 2015, "user_id": 707769, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/PQ3mR.jpg?s=128&g=1", "display_name": "MirkoBanchi", "link": "https://stackoverflow.com/users/707769/mirkobanchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 31571727, "answer_count": 2, "score": 1, "last_activity_date": 1437591920, "creation_date": 1437591302, "question_id": 31571676, "link": "https://stackoverflow.com/questions/31571676/autogenerated-default-move-constructor-with-declared-destructor", "title": "Autogenerated default move constructor with declared destructor", "body": "<p>C++11 Standard specifies that auto generated move constructors should not be generated for classes declaring destructors, but the following\ncode snippet builds and runs correctly:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass C\n{\npublic:\n    ~C() { std::cout &lt;&lt; \"Called C:~C\" &lt;&lt; std::endl; }\n\nprivate:\n    std::string v;\n};\n\n\nint main()\n{\n    C c1;\n    C c2 = std::move(c1);\n\n    return 0;\n}\n</code></pre>\n\n<p>I can build with <code>clang</code> 4.2.1 and <code>gcc</code> 4.4.3. Am i missing something?</p>\n"}, {"tags": ["c++", "linker", "shared-libraries", "static-libraries"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1437591289, "post_id": 31571515, "comment_id": 51098182, "body": "<code>run</code> is a non-static member function and will require an instance of <code>A</code> to invoke."}], "answers": [{"comments": [{"owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "edited": false, "score": 0, "creation_date": 1437597626, "post_id": 31572371, "comment_id": 51102033, "body": "&quot;If you have an instance of class B then it was created in the static library or something linked to the static library.&quot; Here you mean if I have instance of class B in my main program? First of all, this static library is NOT linked with main program. This is completely seperated program/project. So, in my main program I have only definitions of methods. I know that I can&#39;t have instance of class A because of that virtual execute method. Let&#39;s try another way. Would it be simpler if I have shared library instead of static?"}, {"owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "edited": false, "score": 0, "creation_date": 1437597743, "post_id": 31572371, "comment_id": 51102105, "body": "I believe that then I could load lib file into main, create instance of class B and I could call method execute on class B, since class B inherits class A?"}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "reply_to_user": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "edited": false, "score": 0, "creation_date": 1437599316, "post_id": 31572371, "comment_id": 51102916, "body": "This is not Java (or any of the other interpreted languages) There is no such thing as a class loader. When  you create a B, you <i>MUST</i> have the declaration of B available, which means if B is declared in the static library you can only create it in the static library or in code that is already linked to the static library."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "reply_to_user": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "edited": false, "score": 0, "creation_date": 1437599419, "post_id": 31572371, "comment_id": 51102961, "body": "It is extremely rare for you to have to load a dynamic library &quot;by hand&quot;.  That happens automatically for you because your code is linked against the library."}, {"owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "edited": false, "score": 0, "creation_date": 1437600189, "post_id": 31572371, "comment_id": 51103376, "body": "So, it is not posible for me to link static library (in which is class B) to link with my main program. Let me explaine what am I doing. I&#39;m doing program for testing algorithms. I have program my_program which is main program. User can install this program and then he can creates projects. Lets sa that he creates project Sorting with algorithm BubbleSort. This execute method is actually a implementation ob BubbleSort. What is then, by your opinion the best approach for this? Can I create shared lib with class B and then create instance of class B and call run?"}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "reply_to_user": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "edited": false, "score": 0, "creation_date": 1437602320, "post_id": 31572371, "comment_id": 51104311, "body": "OK you&#39;ve found one of the rare cases in which you do need to load a dynamic library by hand.  However the algorithm to be tested must be in the dynamic library (so it can be loaded at run time rather than hardwired into the program at link time.)  This is moving beyond the scope of your original question so I suggest that 1) you research dynamically loading libraries and calling methods on those libraries. 2) write some code based on your research, then 3) if it doesn&#39;t work come back and ask a different question here."}, {"owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "edited": false, "score": 0, "creation_date": 1437602507, "post_id": 31572371, "comment_id": 51104393, "body": "Ok. Thank you for your pointers. Since your answer answers my question, I will accept it. Thank you."}], "tags": [], "owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "is_accepted": true, "score": 1, "last_activity_date": 1437593496, "creation_date": 1437593496, "answer_id": 31572371, "question_id": 31571515, "link": "https://stackoverflow.com/questions/31571515/load-method-from-shared-library-which-calls-method-that-is-implemented-in-childr/31572371#31572371", "title": "Load method from shared library which calls method that is implemented in children class", "body": "<p>The short answer:  It works the way you want it to.</p>\n\n<p>The long answer: Class B is defined in the static library.  If you have an instance of class B then it was created in the static library or something linked to the static library.</p>\n\n<p>Because this class has a virtual method, each instance includes a pointer to a vtable (a hidden table of pointers to the actual implementations of the virtual methods.)   This vtable is generated in the static library and the pointer in the actual B object points to it.  Thus when the method in class A calls execute, it finds the vtable via the pointer in the object itself and calls the method via an offset into the vtable.   Thus it is using the vtable in the static lilbrary and ends up in the execute method as defined in the static library.</p>\n"}], "owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 31572371, "answer_count": 1, "score": 0, "last_activity_date": 1437593496, "creation_date": 1437590714, "question_id": 31571515, "link": "https://stackoverflow.com/questions/31571515/load-method-from-shared-library-which-calls-method-that-is-implemented-in-childr", "title": "Load method from shared library which calls method that is implemented in children class", "body": "<p>I know that is title a little confusing but let me explain:</p>\n\n<p>I have class A like this:</p>\n\n<pre><code>class A : public Parent\n{\npublic:\n    //other methods and stuff\n    void run() \n    {\n         execute(arr, size_of_array);\n    }\n\n    virtual void execute(int tab[], int size) = 0;\n};\n</code></pre>\n\n<p>And I have class B which implements this method execute like this:</p>\n\n<pre><code>class B : public A\n{\npublic:\n    void execute(int tab[], int size)\n    {\n        //do something here\n    }\n};\n</code></pre>\n\n<p>Class B is in static library, class A is in dynamic library.\nIn main program I want to load symbol \"run\" and call this method, so that this method will call execute function from that static library. Is this possible?\nI suppose that I need somehow to link this static library to shared library so there won't be any undefined references?</p>\n\n<p>I'm a little stuck here so I would appreciate any help. Thanks</p>\n"}, {"tags": ["c++", "visual-studio-2010", "dll"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1437591166, "post_id": 31571499, "comment_id": 51098099, "body": "You did not compile <i>all</i> the code that gets linked into the DLL with /MT.  Forgetting to rebuild libraries is the standard mistake.  Using /MT with DLL projects is a very, very, very bad idea.  That crash is normal.   /MT was meant for very simple single-executable projects that you want to deploy by just copying a single file.  No point to it whatsoever when you have to copy multiple files anyway."}, {"owner": {"reputation": 31, "user_id": 5015157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gRg63.jpg?s=128&g=1", "display_name": "WatchdogReset", "link": "https://stackoverflow.com/users/5015157/watchdogreset"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1437645287, "post_id": 31571499, "comment_id": 51120309, "body": "Thank you for the answer. I have the crash when I compile with /MD. You are telling me that this will be a better solution to compile with MD and deliver the dependencies too ?"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5015157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gRg63.jpg?s=128&g=1", "display_name": "WatchdogReset", "link": "https://stackoverflow.com/users/5015157/watchdogreset"}, "is_accepted": true, "score": 0, "last_activity_date": 1437988939, "creation_date": 1437988939, "answer_id": 31649335, "question_id": 31571499, "link": "https://stackoverflow.com/questions/31571499/the-mt-option-static-link-for-msvcr100-dll-dependency-does-not-work-with-visu/31649335#31649335", "title": "The /MT option (static link for MSVCR100.dll dependency) does not work with Visual Studio", "body": "<p>Thanks @Hans Passant he was right, I was linking using another DLL where the dependencies msvcp100d.dll and msvcr100d.dll present.\nSo even with a static compilation of my DLL I still need the others DLL. \nI'll deliver with these DLL in release mode.</p>\n"}], "owner": {"reputation": 31, "user_id": 5015157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gRg63.jpg?s=128&g=1", "display_name": "WatchdogReset", "link": "https://stackoverflow.com/users/5015157/watchdogreset"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "accepted_answer_id": 31649335, "answer_count": 1, "score": 1, "last_activity_date": 1437988939, "creation_date": 1437590656, "question_id": 31571499, "link": "https://stackoverflow.com/questions/31571499/the-mt-option-static-link-for-msvcr100-dll-dependency-does-not-work-with-visu", "title": "The /MT option (static link for MSVCR100.dll dependency) does not work with Visual Studio", "body": "<p>I am using a DLL that I compile with MSVC9 (Visual Studio 10 C++).\nThere is a dependency on msvcp100d.dll and msvcr100d.dll.</p>\n\n<p>I would to make a static link in order to use my DLL standalone . To do so I use /MT instead of /MD option in my makefile.</p>\n\n<p>Howewer when I check with dumpbin or dependency walker the dependency are still present, the msvcp100d.dll and msvcr100d.dll seems to be still dynamically linked.</p>\n\n<p>Another thing that seems to be related, if I use the DLL through VS I have no problem, If I use another program I have a crash - it seems to be releated !</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["c++", "c++14", "cout"], "comments": [{"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1437590682, "post_id": 31571430, "comment_id": 51097759, "body": "std::wcout doesn&#39;t work if you are trying to write text that cannot be represented in your default locale."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1437590805, "post_id": 31571430, "comment_id": 51097851, "body": "C++ does not have a usable Unicode support. If you need (non trivial) Unicode handling, use a dedicated library like <a href=\"http://site.icu-project.org/\" rel=\"nofollow noreferrer\">ICU</a>. (Yes, you can get something done with <code>std::string</code> on non-Windows and <code>wstring</code> on Windows, but meh)."}, {"owner": {"reputation": 637, "user_id": 4470210, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh5.googleusercontent.com/-GCfTfvdL808/AAAAAAAAAAI/AAAAAAAAAEo/-5NpRkzO3PM/photo.jpg?sz=128", "display_name": "Fran&#231;ois-Marie Arouet", "link": "https://stackoverflow.com/users/4470210/fran%c3%a7ois-marie-arouet"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1437590944, "post_id": 31571430, "comment_id": 51097946, "body": "@BaummitAugen It seems to be working with UTF-8"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 1, "creation_date": 1437590967, "post_id": 31571430, "comment_id": 51097963, "body": "Console ouput issues are very system dependend.  Are you working with windows in console mode ?"}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 1, "creation_date": 1437591071, "post_id": 31571430, "comment_id": 51098034, "body": "very relevant: <a href=\"http://stackoverflow.com/questions/8168997/using-char16-t-and-char32-t-in-i-o\" title=\"using char16 t and char32 t in i o\">stackoverflow.com/questions/8168997/&hellip;</a>"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1437591082, "post_id": 31571430, "comment_id": 51098049, "body": "@Fran&#231;ois-MarieArouet Yes, on non-Windows systems you can usually safe and print utf8 in a normal <code>std::string</code>. But try something like making an existing string like &quot;Fu&#223;ball&quot; uppercase and you will know what I mean."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1437591143, "post_id": 31571430, "comment_id": 51098081, "body": "Relevant: <a href=\"http://stackoverflow.com/questions/402283/stdwstring-vs-stdstring\" title=\"stdwstring vs stdstring\">stackoverflow.com/questions/402283/stdwstring-vs-stdstring</a>"}, {"owner": {"reputation": 637, "user_id": 4470210, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh5.googleusercontent.com/-GCfTfvdL808/AAAAAAAAAAI/AAAAAAAAAEo/-5NpRkzO3PM/photo.jpg?sz=128", "display_name": "Fran&#231;ois-Marie Arouet", "link": "https://stackoverflow.com/users/4470210/fran%c3%a7ois-marie-arouet"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1437591505, "post_id": 31571430, "comment_id": 51098320, "body": "@BaummitAugen Thanks for the link, but why doesn&#39;t <code>std::wcout &lt;&lt; z &lt;&lt; &#39;\\n&#39;;</code> work in my snippet?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 3, "creation_date": 1437591658, "post_id": 31571430, "comment_id": 51098420, "body": "@Fran&#231;ois-MarieArouet Maybe the console Coliru uses only supporting utf-8, as it is a Linux system? Maybe something else. Doing non-ASCII stuff portably yourself in C++ is hard."}], "answers": [{"tags": [], "owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "is_accepted": true, "score": 6, "last_activity_date": 1437619716, "last_edit_date": 1437619716, "creation_date": 1437618507, "answer_id": 31577195, "question_id": 31571430, "link": "https://stackoverflow.com/questions/31571430/im-trying-to-print-a-chinese-character-using-the-types-wchar-t-char16-t-and-ch/31577195#31577195", "title": "I&#39;m trying to print a Chinese character using the types wchar_t, char16_t and char32_t, to no avail.", "body": "<p>Since you're running your test on a Linux system, source code is UTF-8, which is why <code>x</code> and <code>y</code> are the same thing. Those bytes are shunted, unmodified, into the standard output by <code>std::cout &lt;&lt; x</code> and <code>std::cout &lt;&lt; y</code>, and when you view the web page (or when you look at the linux terminal), you see the character as you expected.</p>\n\n<p><code>std::wcout &lt;&lt; z</code> will print if you do two things:</p>\n\n<pre><code>std::ios::sync_with_stdio(false);\nstd::wcout.imbue(std::locale(\"en_US.utf8\"));\n</code></pre>\n\n<p>without unsynching from C, GNU libstdc++ goes through C IO streams, which can never print a wide char after printing a narrow char on the same stream. LLVM libc++ appears to work even synched, but of course still needs the imbue to tell the stream how to convert the wide chars to the bytes it sends into the standard output.</p>\n\n<p>To print <code>b</code> and <code>a</code>, you will have to convert them to wide or narrow; even with <code>wbuffer_convert</code> setting up a char32_t stream is a lot of work. It would look like this:</p>\n\n<pre><code>std::wstring_convert&lt;std::codecvt_utf8&lt;char32_t&gt;, char32_t&gt; conv32;\nstd::cout &lt;&lt; conv32.to_bytes(a) &lt;&lt; '\\n';\n</code></pre>\n\n<p>Putting it all together: <a href=\"http://coliru.stacked-crooked.com/a/a809c38e21cc1743\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/a809c38e21cc1743</a></p>\n"}], "owner": {"reputation": 637, "user_id": 4470210, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh5.googleusercontent.com/-GCfTfvdL808/AAAAAAAAAAI/AAAAAAAAAEo/-5NpRkzO3PM/photo.jpg?sz=128", "display_name": "Fran&#231;ois-Marie Arouet", "link": "https://stackoverflow.com/users/4470210/fran%c3%a7ois-marie-arouet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1999, "favorite_count": 3, "accepted_answer_id": 31577195, "answer_count": 1, "score": 5, "last_activity_date": 1437619716, "creation_date": 1437590439, "question_id": 31571430, "link": "https://stackoverflow.com/questions/31571430/im-trying-to-print-a-chinese-character-using-the-types-wchar-t-char16-t-and-ch", "title": "I&#39;m trying to print a Chinese character using the types wchar_t, char16_t and char32_t, to no avail.", "body": "<p>I'm trying to print the Chinese character <code>\u4e2d</code> using the types <code>wchar_t</code>, <code>char16_t</code> and <code>char32_t</code>, without success (<a href=\"http://coliru.stacked-crooked.com/a/4a23e9922c5506c1\">live example</a>)</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main()\n{\n    char x[] = \"\u4e2d\";            // Chinese character with unicode point U+4E2D\n    char y[] = u8\"\u4e2d\";\n    wchar_t z = L'\u4e2d';\n    char16_t b = u'\\u4e2d';\n    char32_t a = U'\\U00004e2d';\n\n    std::cout &lt;&lt; x &lt;&lt; '\\n';     // Ok\n    std::cout &lt;&lt; y &lt;&lt; '\\n';     // Ok\n    std::wcout &lt;&lt; z &lt;&lt; '\\n';    // ?? \n    std::cout &lt;&lt; a &lt;&lt; '\\n';     // prints the decimal number (20013) corresponding to the unicode point U+4E2D\n    std::cout &lt;&lt; b &lt;&lt; '\\n';     //             \"                    \"                   \"\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1437591294, "post_id": 31571402, "comment_id": 51098186, "body": "Just change <code>i</code> type to unsigned or signed int."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 10, "last_activity_date": 1437590814, "last_edit_date": 1495539928, "creation_date": 1437590814, "answer_id": 31571539, "question_id": 31571402, "link": "https://stackoverflow.com/questions/31571402/infinite-loop-in-a-for-from-0-to-255-with-unsigned-char-counter/31571539#31571539", "title": "Infinite loop in a for from 0 to 255 with unsigned char counter", "body": "<p><code>i</code> is an <code>unsigned char</code>  which typically has a range of [0,255].  In you for loop you are going until <code>i &lt;= 255</code>.  When <code>i</code> is 255 you add <code>1</code> to it and it wraps back around to <code>0</code> which is  <code>&lt;= 255</code> so the loop continues.  This is called <a href=\"https://stackoverflow.com/questions/16056758/c-c-unsigned-integer-overflow\">unsigned integer overflow</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 379, "user_id": 5121918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LHw0a.png?s=128&g=1", "display_name": "jrsmolley", "link": "https://stackoverflow.com/users/5121918/jrsmolley"}, "is_accepted": false, "score": 3, "last_activity_date": 1437591598, "last_edit_date": 1437591598, "creation_date": 1437590971, "answer_id": 31571574, "question_id": 31571402, "link": "https://stackoverflow.com/questions/31571402/infinite-loop-in-a-for-from-0-to-255-with-unsigned-char-counter/31571574#31571574", "title": "Infinite loop in a for from 0 to 255 with unsigned char counter", "body": "<p>The range of an <code>unsigned char</code> is <code>[0 to 255]</code> inclusive; telling the for loop to continue if i is less than or equal to 255 causes it to increment i once more, and it wraps from 255 back to 0 (looping forever). You can use a <code>short</code> or <code>int</code> instead to avoid the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1524640576, "post_id": 31571754, "comment_id": 87048533, "body": "That&#39;s not saving memory of course. Though +1 but it&#39;s the only answer showing how to avoid the cast to char-type"}, {"owner": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1524643140, "post_id": 31571754, "comment_id": 87050037, "body": "@sehe does not the standard say that <code>int</code> must be larger than <code>char</code>?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1524643394, "post_id": 31571754, "comment_id": 87050188, "body": "That&#39;s not relevant. Casting changes the <i>type</i>, not just the range: <code>for (int i = 0; i&lt;=255; ++i) std::cout &lt;&lt; i &lt;&lt; &quot; &quot;;</code> doesn&#39;t do what <code>for (int i = 0; i&lt;=255; ++i) std::cout &lt;&lt; static_cast&lt;unsigned char&gt;(i) &lt;&lt; &quot; &quot;;</code> does! Having the loop-var of the right types avoids the cast."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1524643582, "post_id": 31571754, "comment_id": 87050282, "body": "Oh you meant about &quot;saving memory&quot;? In practice it&#39;ll be a register, and it&#39;s unlikely that the compiler will emit code such that 8 bits of the register can be used for &quot;something else&quot;. Compilers try to emit code that <i>runs</i> optimally, not &quot;minimize number of bits strictly depended on&quot; (that might actually make it run slow)."}], "tags": [], "owner": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "is_accepted": false, "score": 2, "last_activity_date": 1437591855, "last_edit_date": 1437591855, "creation_date": 1437591528, "answer_id": 31571754, "question_id": 31571402, "link": "https://stackoverflow.com/questions/31571402/infinite-loop-in-a-for-from-0-to-255-with-unsigned-char-counter/31571754#31571754", "title": "Infinite loop in a for from 0 to 255 with unsigned char counter", "body": "<p>Your loop variable is overflowing.</p>\n\n<p><code>255</code> is the max value of <code>unsigned char</code>. <code>i++</code> then overflows it, and the language standard says it must become <code>0</code> again. The loop will never get to <code>256</code> which is when the loop condition says it should terminate.</p>\n\n<p>Change i to <code>unsigned int</code> or alternatively, if you really want to save memory, just do:</p>\n\n<pre><code>for(unsigned char i = 0; ; i++) {\n    //operations\n    if (i == 255)\n        break;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "is_accepted": false, "score": 1, "last_activity_date": 1437591612, "creation_date": 1437591612, "answer_id": 31571788, "question_id": 31571402, "link": "https://stackoverflow.com/questions/31571402/infinite-loop-in-a-for-from-0-to-255-with-unsigned-char-counter/31571788#31571788", "title": "Infinite loop in a for from 0 to 255 with unsigned char counter", "body": "<p>Just to add onto the other answers. You're using a <code>char</code> as an integer only here. This is extremely confusing (and misleading) to readers. Stick to datatypes that \"make sense\" with the data that is being used. Whatever memory you're saving my making it a <code>char</code> instead of an <code>int</code> or <code>short</code> is so infinitesimally small that it will never matter. </p>\n\n<p>If you're interested in types that work well with binary, however, I suggest you look at some documentation for <a href=\"http://www.nongnu.org/avr-libc/user-manual/group__avr__stdint.html\" rel=\"nofollow\"><code>&lt;stdint.h&gt;</code></a> .</p>\n"}, {"tags": [], "owner": {"reputation": 1105, "user_id": 646210, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/osWJG.jpg?s=128&g=1", "display_name": "paper.plane", "link": "https://stackoverflow.com/users/646210/paper-plane"}, "is_accepted": false, "score": 1, "last_activity_date": 1437598499, "last_edit_date": 1437598499, "creation_date": 1437598181, "answer_id": 31573725, "question_id": 31571402, "link": "https://stackoverflow.com/questions/31571402/infinite-loop-in-a-for-from-0-to-255-with-unsigned-char-counter/31573725#31573725", "title": "Infinite loop in a for from 0 to 255 with unsigned char counter", "body": "<p>You loop iterator i is unsigned char, which can hold up to 1 byte or 8 bits. That means the range is 0 to 255(2^8 - 1). And the loop works as desired until i=255 but then in the next iteration it fails when i=255++, i.e. 256 which exceeds the upper limit of the range, it wraps back to 0 [Just google out the datatypes and their ranges, also read about signed/unsigned, unsigned bit etc] so again it starts increment of i up to 255 and so on. Hence it becomes an infinite loop.</p>\n\n<p>To solve the issue just make i capable of holding the number 256, i.e allocate one more bit to it, but we don't have any primitive datatype of size 9 bits so we take the immediate bigger datatype i.e. a short and bingo your loop works absolutely fine. </p>\n\n<p>Hope this clarifies..</p>\n"}, {"tags": [], "owner": {"reputation": 9560, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "is_accepted": false, "score": 3, "last_activity_date": 1485554730, "creation_date": 1485554730, "answer_id": 41903775, "question_id": 31571402, "link": "https://stackoverflow.com/questions/31571402/infinite-loop-in-a-for-from-0-to-255-with-unsigned-char-counter/41903775#41903775", "title": "Infinite loop in a for from 0 to 255 with unsigned char counter", "body": "<p>You're facing an unsigned integer overflow. No matter what you do to an <code>unsigned int</code>, it's always going to be less than or equal to its maximum value (255). You can instead use a larger integer data type for the loop index. If you'd <em>still</em> rather use an <code>unsigned char</code>, a <code>while</code> loop will work:</p>\n\n<pre><code>unsigned char uc = 0;\ndo {\n  // stuff it in here\n} while (uc++ &lt; std::numeric_limits&lt;unsigned char&gt;::max());\n</code></pre>\n"}], "owner": {"reputation": 633, "user_id": 3456657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/039c7dc8cf1c6b1a68de7f1813e9676d?s=128&d=identicon&r=PG&f=1", "display_name": "Tavy", "link": "https://stackoverflow.com/users/3456657/tavy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4546, "favorite_count": 0, "accepted_answer_id": 31571539, "answer_count": 6, "score": 1, "last_activity_date": 1569501381, "creation_date": 1437590350, "last_edit_date": 1569501381, "question_id": 31571402, "link": "https://stackoverflow.com/questions/31571402/infinite-loop-in-a-for-from-0-to-255-with-unsigned-char-counter", "title": "Infinite loop in a for from 0 to 255 with unsigned char counter", "body": "<p>I want to print all numbers in [0, 255], but this loop doesn't stop. Why?</p>\n\n<pre><code>for(unsigned char i = 0; i &lt;= 255; i++)\n{   \n    cout &lt;&lt; (int) i &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 4675006, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kxmai.jpg?s=128&g=1", "display_name": "Karpov", "link": "https://stackoverflow.com/users/4675006/karpov"}, "edited": false, "score": 1, "creation_date": 1437596834, "post_id": 31571436, "comment_id": 51101554, "body": "Works perfectly! Thanks for the advice re WebEngine."}], "tags": [], "owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "is_accepted": true, "score": 2, "last_activity_date": 1437590451, "creation_date": 1437590451, "answer_id": 31571436, "question_id": 31571346, "link": "https://stackoverflow.com/questions/31571346/with-c-use-qwebview-to-display-html-text-rather-than-a-web-page-somewhere-on/31571436#31571436", "title": "With C++, use QWebView to display HTML text, rather than a web page somewhere on the web", "body": "<p>The method you are looking for is called <a href=\"http://doc.qt.io/qt-5/qwebview.html#setHtml\" rel=\"nofollow\">setHtml()</a>.</p>\n\n<p>That said, at this point you should be considering switching to <a href=\"http://doc.qt.io/qt-5/qwebenginepage.html\" rel=\"nofollow\">WebEngine</a>, since Qt WebKit is a deprecated module.  WebEngine also has a <a href=\"http://doc.qt.io/qt-5/qwebenginepage.html#setHtml\" rel=\"nofollow\">setHtml()</a> method.</p>\n"}], "owner": {"reputation": 363, "user_id": 4675006, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kxmai.jpg?s=128&g=1", "display_name": "Karpov", "link": "https://stackoverflow.com/users/4675006/karpov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 31571436, "answer_count": 1, "score": 0, "last_activity_date": 1437590496, "creation_date": 1437590178, "last_edit_date": 1437590496, "question_id": 31571346, "link": "https://stackoverflow.com/questions/31571346/with-c-use-qwebview-to-display-html-text-rather-than-a-web-page-somewhere-on", "title": "With C++, use QWebView to display HTML text, rather than a web page somewhere on the web", "body": "<p>Is it possible to programmaticaly create a (long) string of HTML text and then load it in a <code>QWebView</code> widget?</p>\n\n<p>I'd like to be able to do something like:</p>\n\n<pre><code>void WebBrowser::SetText(string sText)\n{\n   ui-&gt;webView-&gt;setText(QString::fromUtf8(sText.c_str()));\n}\n</code></pre>\n\n<p>but then of course the code above doesn't work because webView doesn't have a setText member function.</p>\n\n<p>(I'm aware I could simply display HTML text in a label but I'd like to have some of functionality of <code>QWebView</code> to do things such as hypertext links to pages on the web, etc.)</p>\n"}, {"tags": ["c++", "linux", "pipe", "cat"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 2, "creation_date": 1437590127, "post_id": 31571281, "comment_id": 51097384, "body": "just read from standard input, that&#39;s where <code>|</code> pipes the data."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1437595774, "post_id": 31571281, "comment_id": 51100860, "body": "Just for the record, it&#39;s more normal to put filenames on the command line.  Then your program can work even on filenames that contain newlines.  (Yes, that&#39;s possible.  No, it&#39;s not common or a good idea.)  But then you can say  <code>.&#47;myprog *.c</code>).  Some programs do have an option to read filenames from stdin, for use with <code>find ... | myprog</code>, but you can always <code>find ... -exec myprog {} +</code>, now that find has the <code>+</code> feature for exec.  There&#39;s always <code>... | xargs -d&#39;\\n&#39; myprog</code>."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5045928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5976d2ead53fc2e087e928d5b005c6?s=128&d=identicon&r=PG&f=1", "display_name": "Onpetcow", "link": "https://stackoverflow.com/users/5045928/onpetcow"}, "edited": false, "score": 0, "creation_date": 1437590659, "post_id": 31571420, "comment_id": 51097743, "body": "Thank you very much! I am new to both Linux and C++ so I didn&#39;t know about the echo code. That worked really well."}, {"owner": {"reputation": 16621, "user_id": 319741, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b625972bd759abcd3de0d2283617a1b7?s=128&d=identicon&r=PG", "display_name": "Scott C Wilson", "link": "https://stackoverflow.com/users/319741/scott-c-wilson"}, "reply_to_user": {"reputation": 33, "user_id": 5045928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5976d2ead53fc2e087e928d5b005c6?s=128&d=identicon&r=PG&f=1", "display_name": "Onpetcow", "link": "https://stackoverflow.com/users/5045928/onpetcow"}, "edited": false, "score": 0, "creation_date": 1437590978, "post_id": 31571420, "comment_id": 51097967, "body": "The way to say &quot;thank you&quot; on Stackoverflow is to press the upward pointing triangle.  You should also mark one of these answers as correct by clicking the check mark."}], "tags": [], "owner": {"reputation": 16621, "user_id": 319741, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b625972bd759abcd3de0d2283617a1b7?s=128&d=identicon&r=PG", "display_name": "Scott C Wilson", "link": "https://stackoverflow.com/users/319741/scott-c-wilson"}, "is_accepted": false, "score": 2, "last_activity_date": 1437590402, "creation_date": 1437590402, "answer_id": 31571420, "question_id": 31571281, "link": "https://stackoverflow.com/questions/31571281/piping-filename-from-standard-input-in-linux-into-c/31571420#31571420", "title": "Piping filename from standard input in linux into c++", "body": "<p>When you do <code>cat filename | executable</code> you are not sending the name of the file to your executable, but its contents.  If you wish to send the name, use <code>echo filename | executable</code> or <code>executable filename</code>.  Then you can process <code>argc</code> and <code>argv</code> as usual, and do the normal file reading you are showing in your example code.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5045928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5976d2ead53fc2e087e928d5b005c6?s=128&d=identicon&r=PG&f=1", "display_name": "Onpetcow", "link": "https://stackoverflow.com/users/5045928/onpetcow"}, "edited": false, "score": 0, "creation_date": 1437590679, "post_id": 31571425, "comment_id": 51097755, "body": "Thanks for your help! It was far more straightforward than I was trying to make it as most things are."}, {"owner": {"reputation": 33, "user_id": 5045928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5976d2ead53fc2e087e928d5b005c6?s=128&d=identicon&r=PG&f=1", "display_name": "Onpetcow", "link": "https://stackoverflow.com/users/5045928/onpetcow"}, "edited": false, "score": 0, "creation_date": 1437671035, "post_id": 31571425, "comment_id": 51139394, "body": "What type of command line in a linux terminal would you use to pipe the file name through? I have been trying to use &quot;cat filename | program&quot; but it doesn&#39;t seem to read the file properly."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "reply_to_user": {"reputation": 33, "user_id": 5045928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5976d2ead53fc2e087e928d5b005c6?s=128&d=identicon&r=PG&f=1", "display_name": "Onpetcow", "link": "https://stackoverflow.com/users/5045928/onpetcow"}, "edited": false, "score": 0, "creation_date": 1437673516, "post_id": 31571425, "comment_id": 51140843, "body": "No, you want <code>echo filename</code>.  &quot;cat&quot; prints the contents of the file.  &quot;echo&quot; prints the string &quot;f-i-l-e-n-a-m-e&quot;."}], "tags": [], "owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "is_accepted": true, "score": 1, "last_activity_date": 1437590410, "creation_date": 1437590410, "answer_id": 31571425, "question_id": 31571281, "link": "https://stackoverflow.com/questions/31571281/piping-filename-from-standard-input-in-linux-into-c/31571425#31571425", "title": "Piping filename from standard input in linux into c++", "body": "<p>All you need to do is read from stdin into a variable (e.g. \"fname\"):</p>\n\n<pre><code>int main () {\n  string fname;\n  cin &gt;&gt; fname\n  ifstream myfile;\n  myfile.open (fname);\n  if (myfile.is_open() ) {   \n    while ( getline (myfile, line) ) {\n      ...\n</code></pre>\n\n<p>To accomodate <em>either</em> \"pipe the name\" or \"use argc/argv\" (as many *nix commands do):</p>\n\n<pre><code>int main (int argc, char *argv[]) {\n  string fname;\n  if (argc == 1) {\n    cin &gt;&gt; fname\n  }\n  else {\n    fname = argv[1];\n  }\n  ifstream myfile;\n  myfile.open (fname);\n  if (myfile.is_open() ) {   \n    while ( getline (myfile, line) ) {\n      ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5045928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5976d2ead53fc2e087e928d5b005c6?s=128&d=identicon&r=PG&f=1", "display_name": "Onpetcow", "link": "https://stackoverflow.com/users/5045928/onpetcow"}, "edited": false, "score": 0, "creation_date": 1437596504, "post_id": 31571569, "comment_id": 51101331, "body": "How does istream differ from ifstream? Would the method that I used to read the file have to change at all?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 33, "user_id": 5045928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5976d2ead53fc2e087e928d5b005c6?s=128&d=identicon&r=PG&f=1", "display_name": "Onpetcow", "link": "https://stackoverflow.com/users/5045928/onpetcow"}, "edited": false, "score": 0, "creation_date": 1437596758, "post_id": 31571569, "comment_id": 51101501, "body": "It differs insofar, you could use a reference to <code>std::cin</code> or <code>std::ifstream</code> transparently, and don&#39;t need to care, how the stream was actually instantiated."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1437590951, "creation_date": 1437590951, "answer_id": 31571569, "question_id": 31571281, "link": "https://stackoverflow.com/questions/31571281/piping-filename-from-standard-input-in-linux-into-c/31571569#31571569", "title": "Piping filename from standard input in linux into c++", "body": "<p>You're actually unclear, if you want to read the file from <code>std::cin</code> as it would be supplied by</p>\n\n<pre><code>cat filename | executable\n</code></pre>\n\n<p>or if you actually get the filename to be opened passed from <code>std::cin</code>.</p>\n\n<p>Most likely you want to have an optional command line parameter (passed to <code>int main(int argc, char* argv[])</code>), and have your reading code rely to a <code>std::istream</code> input source, rather than <code>std::cin</code> or <code>std::ifstream</code> hardcoded.</p>\n"}], "owner": {"reputation": 33, "user_id": 5045928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5976d2ead53fc2e087e928d5b005c6?s=128&d=identicon&r=PG&f=1", "display_name": "Onpetcow", "link": "https://stackoverflow.com/users/5045928/onpetcow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1721, "favorite_count": 0, "accepted_answer_id": 31571425, "answer_count": 3, "score": 0, "last_activity_date": 1437590951, "creation_date": 1437590005, "question_id": 31571281, "link": "https://stackoverflow.com/questions/31571281/piping-filename-from-standard-input-in-linux-into-c", "title": "Piping filename from standard input in linux into c++", "body": "<p>I want to be able to write a line in a terminal (as below) that takes a text file in the same directory and inputs its name into an executable file. </p>\n\n<pre><code>cat fileName | executable\n</code></pre>\n\n<p>I want to be able to read the fileName into c++ code. I already have a code that accesses the lines and reads through the file, it is just receiving fileName from the standard input. </p>\n\n<p>Is there a line of code or a function to read the fileName into a c++ program and store it as a string? I am currently using the below code to read through each line of the text file.</p>\n\n<pre><code>ifstream myfile; \nmyfile.open(fileName.c_str());\n\nif( myfile.is_open() )\n{   \n    while ( getline (myfile ,line) )\n    {\n                  ......\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml", "qt5.5"], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1437594961, "creation_date": 1437594961, "answer_id": 31572825, "question_id": 31571220, "link": "https://stackoverflow.com/questions/31571220/qwidget-application-w-qml-and-registered-types/31572825#31572825", "title": "QWidget Application w/QML and Registered Types", "body": "<p>QML component names must begin with capital letters:</p>\n\n<pre><code>qmlRegisterSingletonType&lt;MyUtils&gt;(\"MyUtilities\", 1, 0, \"Myutils\",\n                                  &amp;MyUtils::MyUtilsProvider);\n</code></pre>\n\n<p>and thus</p>\n\n<pre><code>text: Myutils.doSomething()\n</code></pre>\n"}], "owner": {"reputation": 2167, "user_id": 552613, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W4tCs.gif?s=128&g=1", "display_name": "Addy", "link": "https://stackoverflow.com/users/552613/addy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 1, "accepted_answer_id": 31572825, "answer_count": 1, "score": 3, "last_activity_date": 1437600181, "creation_date": 1437589792, "last_edit_date": 1592644375, "question_id": 31571220, "link": "https://stackoverflow.com/questions/31571220/qwidget-application-w-qml-and-registered-types", "title": "QWidget Application w/QML and Registered Types", "body": "<p>I have a QWidget application that makes use of QML. I have a class that I'm using to expose some of our organizations utility functions.</p>\n<p>I have boiled the problem down to the following code (I'll explain my problem below the code):</p>\n<p>First, here is the <code>main.cpp</code> file (I've excluded most of the <code>includes</code> for brevity):</p>\n<pre><code>#include &quot;main.h&quot;\n\nint main(int argc, char *argv[])\n{\n    QApplication app(argc, argv);\n\n    MainWindow window;\n    window.show();\n\n    return app.exec();\n}\n</code></pre>\n<p>Here is the included <code>main.h</code>:</p>\n<pre><code>class MyUtils : public QObject\n{\n    Q_OBJECT\n\npublic:\n    MyUtils(QObject* parent = nullptr)\n        : QObject(parent)\n    {\n    }\n\n    virtual ~MyUtils() = default;\n\n    Q_INVOKABLE QString doSomething()\n    {\n        return QString(&quot;I did something!&quot;);\n    }\n\n    static QObject* MyUtilsProvider(QQmlEngine *engine, QJSEngine *scriptEngine)\n    {\n        Q_UNUSED(engine)\n        Q_UNUSED(scriptEngine)\n\n        qDebug() &lt;&lt; &quot;MyUtils Invoked!&quot;;\n        return new MyUtils();\n    }\n};\n\nclass MyView : public QQuickWidget\n{\n    Q_OBJECT\n\npublic:\n    MyView(QWidget* parent = nullptr)\n        : QQuickWidget(parent)\n    {\n        setResizeMode(QQuickWidget::SizeRootObjectToView);\n        setSource(QUrl(&quot;qrc:/main.qml&quot;));\n    }\n\n    virtual ~MyView() = default;\n};\n\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\n    QTabWidget   _tabView;\n\npublic:\n    MainWindow(QWidget * parent = 0)\n        : QMainWindow(parent)\n    {\n        qmlRegisterSingletonType&lt;MyUtils&gt;(&quot;MyUtilities&quot;, 1, 0, &quot;myutils&quot;, &amp;MyUtils::MyUtilsProvider);\n        setCentralWidget(&amp;_tabView);\n        _tabView.addTab(new MyView(), &quot;Tab 1&quot;);\n    }\n};\n</code></pre>\n<p>And last, here is my QML file:</p>\n<pre><code>import QtQuick 2.1\nimport MyUtilities 1.0\n\nRectangle\n{\n    Text\n    {\n        text: myutils.doSomething()\n        anchors.centerIn: parent\n    }\n}\n</code></pre>\n<p>What I am trying to do is register the <code>MyUtils</code> class as a singleton that I can then include in my QML and use. The problem is that when I run this, I get the following message from the Application's output:</p>\n<blockquote>\n<p>QML debugging is enabled. Only use this in a safe environment.</p>\n<p>Qml debugging is enabled. Only use this in a safe environment!</p>\n<p>qrc:/main.qml:8: ReferenceError: myutils is not defined</p>\n</blockquote>\n<p>I have tried putting <code>qmlRegisterSingletonType</code> in <code>main()</code>, before the instantiation of the <code>QApplication</code> object (and in various other places for giggles) but so far I have not been able to get this to work.</p>\n<p>I have noticed that if I put a breakpoint or <code>qDebug()</code> message in the <code>MyUtils::MyUtilsProvider</code> method, it never gets called. This leads me to think that maybe my <code>MyView</code> class is using a different <code>QQmlEngine</code> object than the one in which the <code>qmlRegisterSingletonType</code> is registering the singleton with. But if that's the case, then I don't know how to get that engine to then pass to the <code>MyView</code> constructor.</p>\n<p>Can someone please tell me what I am doing wrong and how I can get this to work?</p>\n<p>Thank you!</p>\n"}, {"tags": ["c++", "constructor", "abstract-class", "language-lawyer", "static-analysis"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1437590305, "post_id": 31571202, "comment_id": 51097518, "body": "@DieterL&#252;cking: The destructor is not virtual, why should it appear in the vtable? Besides, the vtable should have one entry for <code>interface_function</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1437591286, "post_id": 31571202, "comment_id": 51098179, "body": "@DieterL&#252;cking: Would the &quot;optimizing away&quot; occur at the &quot;no optimization&quot; (or Debug) setting?"}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1437590698, "post_id": 31571353, "comment_id": 51097774, "body": "So to eliminate generation of the constructor, should I use the idiom of declaring private constructors and destructors?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1437590852, "post_id": 31571353, "comment_id": 51097891, "body": "@ThomasMatthews: if you declare the constructor/destructor private, the compiler <i>shouldn&#39;t</i> allow you to instantiate objects of a derived class, unless you declare it a friend to give it access to those private members. In many cases, however, this is purely theoretical--by default, many compilers don&#39;t enforce access restrictions on elided members."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1437592472, "post_id": 31571353, "comment_id": 51098921, "body": "@JerryCoffin: What exactly are those cases? Which compiler would not generate a diagnostic for <code>class Base { private: Base() {} }; class Derived : public Base {}; int main() { Derived d; }</code>?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1437594376, "post_id": 31571353, "comment_id": 51100014, "body": "@ChristianHackl: I probably worded things poorly. I&#39;m not sure any compiler has ever let that specific case by, but at least some older compilers have been lax about vaguely similar restrictions. I wasn&#39;t trying to say: &quot;your compiler will probably allow this even though it&#39;s not legal&quot; nearly as much as: &quot;avoid this, even if your compiler doesn&#39;t stop you from doing it.&quot;"}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 1, "last_activity_date": 1437590219, "creation_date": 1437590219, "answer_id": 31571353, "question_id": 31571202, "link": "https://stackoverflow.com/questions/31571202/what-is-compiler-generated-constructor-for-abstract-class-no-data-members/31571353#31571353", "title": "What is Compiler Generated constructor for abstract class no data members", "body": "<p>The compiler at least theoretically synthesizes a constructor even in this case. Even though you can't create an instance of this class, the constructor will be invoked in the process of creating a derived class (that overrides <code>interface_function</code>, so it can be instantiated).</p>\n\n<p>Given that this is basically a pure interface class, the constructor probably won't do anything, so most compilers will probably optimize it out (quite possibly even when you don't tell it to optimize the code).</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1437590627, "creation_date": 1437590627, "answer_id": 31571496, "question_id": 31571202, "link": "https://stackoverflow.com/questions/31571202/what-is-compiler-generated-constructor-for-abstract-class-no-data-members/31571496#31571496", "title": "What is Compiler Generated constructor for abstract class no data members", "body": "<blockquote>\n  <ol>\n  <li>Are any constructors generated by the compiler?</li>\n  </ol>\n</blockquote>\n\n<p>Yes. Several. First, from [class.ctor]:</p>\n\n<blockquote>\n  <p>A <em>default</em> constructor for a class X is a constructor of class X that either has no parameters or else each\n  parameter that is not a function parameter pack has a default argument. If there is no user-declared constructor\n  for class X, a non-explicit constructor having no parameters is implicitly declared as defaulted (8.4).\n  An implicitly-declared default constructor is an inline public member of its class. A defaulted default\n  constructor for class X is defined as deleted if:</p>\n</blockquote>\n\n<p>Several bullet points follow, none of which apply. So we have the equivalent of:</p>\n\n<pre><code>My_Interface() = default;\n</code></pre>\n\n<p>Then, from [class.copy]:</p>\n\n<blockquote>\n  <p>If the class definition does not explicitly declare a copy constructor, a non-explicit one is declared implicitly. If the class definition declares a move constructor or move assignment operator, the implicitly declared copy\n  constructor is defined as deleted; otherwise, it is defined as defaulted (8.4).</p>\n</blockquote>\n\n<p>So we have:</p>\n\n<pre><code>My_Interface(const My_Interface&amp;) = default;\n</code></pre>\n\n<p>Also:</p>\n\n<blockquote>\n  <p>If the definition of a class X does not explicitly declare a move constructor, a non-explicit one will be implicitly\n  declared as defaulted if and only if<br>\n  (9.1) \u2014 X does not have a user-declared copy constructor,<br>\n  (9.2) \u2014 X does not have a user-declared copy assignment operator,<br>\n  (9.3) \u2014 X does not have a user-declared move assignment operator, and<br>\n  (9.4) \u2014 X does not have a user-declared destructor.</p>\n</blockquote>\n\n<p>So we also have:</p>\n\n<pre><code>My_Interface(My_Interface&amp;&amp; ) = default;\n</code></pre>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>If a constructor is generated, what would it's content be?</li>\n  </ol>\n</blockquote>\n\n<p>All three are generated, all three are <code>= default;</code></p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>If a constructor is generated, would it be eliminated by an optimization level?</li>\n  </ol>\n</blockquote>\n\n<p>None of the three constructors are <em>trivial</em> because <code>My_Interface</code> has a virtual function. As such, at the very least, the vtable will need to be initialized/copied. So <em>something</em> will have to happen, even if there aren't any members to initialize/copy/move. </p>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1437591786, "post_id": 31571502, "comment_id": 51098514, "body": "1) Is this still valid for versions prior to C++11?  2) My understanding is a virtual table is not required."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1437592546, "post_id": 31571502, "comment_id": 51098967, "body": "@ThomasMatthews: Virtual tables are an implementation concept, not a language concept. The standard does not mention them."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1437592591, "post_id": 31571502, "comment_id": 51098995, "body": "@ThomasMatthews, I don&#39;t have access to the C++03 standards. I am going to guess that the answer to your question is &quot;yes&quot;. It make sense to me that the compiler generate a default constructor. A virtual table is definitely required. How can dynamic dispatch be accomplished without that?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1437591113, "last_edit_date": 1437591113, "creation_date": 1437590661, "answer_id": 31571502, "question_id": 31571202, "link": "https://stackoverflow.com/questions/31571202/what-is-compiler-generated-constructor-for-abstract-class-no-data-members/31571502#31571502", "title": "What is Compiler Generated constructor for abstract class no data members", "body": "<p>Q1. Are any constructors generated by the compiler?</p>\n\n<p>Answer: Yes. From the C++11 Standard:</p>\n\n<blockquote>\n  <p><strong>12.1 Constructors</strong></p>\n  \n  <p>5 A <em>default</em> constructor for a class <code>X</code> is a constructor of class <code>X</code> that can be called without an argument. If\n  there is no user-declared constructor for class <code>X</code>, a constructor having no parameters is implicitly declared\n  as defaulted (8.4). An implicitly-declared default constructor is an <code>inline public</code> member of its class.</p>\n</blockquote>\n\n<p>I don't see anything in the standard that answers the other two questions. However, in your case, since there is a <code>virtual</code> member function, the default constructor must, at least, set the virtual table of the object.</p>\n"}], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 31571353, "answer_count": 3, "score": 1, "last_activity_date": 1437591113, "creation_date": 1437589740, "question_id": 31571202, "link": "https://stackoverflow.com/questions/31571202/what-is-compiler-generated-constructor-for-abstract-class-no-data-members", "title": "What is Compiler Generated constructor for abstract class no data members", "body": "<p>I'm running a static analysis tool and getting an error because an abstract class, with no data members, has no constructors.</p>\n\n<p>Given an abstract class with no data members:</p>\n\n<pre><code>class My_Interface\n{\n  public:\n    virtual void interface_function(void) = 0;\n};\n</code></pre>\n\n<ol>\n<li>Are any constructors generated by the compiler?</li>\n<li>If a constructor is generated, what would it's content be?</li>\n<li>If a constructor is generated, would it be eliminated by an\noptimization level?</li>\n</ol>\n\n<p>The rule documentation in the static analysis says:<br>\n<em>If you do not write at least one constructor in a class, the compiler will\nwrite a public constructor for you by default. This rule detects if you\ndo not declare at least one constructor.</em>  </p>\n\n<p>The rule documentation references Scott Meyers, \"Effective C++: 55 Specific Ways to Improve your Programs and Design\", third edition.</p>\n\n<p>My understanding is that the compiler will not generate constructors for the above case.  </p>\n\n<p><strong>Edit 1:</strong><br>\nThis is not a duplicate of many constructor questions because:  </p>\n\n<ol>\n<li>This one has no data members.</li>\n<li>This is not asking if a constructor is necessary, but what happens\nwhen a constructor is not provided.  </li>\n<li>This is C++ language.</li>\n</ol>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1437589089, "post_id": 31570965, "comment_id": 51096772, "body": "Where did you implement <code>~Queue()</code>?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 2, "creation_date": 1437589114, "post_id": 31570965, "comment_id": 51096790, "body": "<code>~Queue()</code> does not appear to be defined. Did you define it?"}, {"owner": {"reputation": 89, "user_id": 2558430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9243a6291e7243267d34e82d383ee1?s=128&d=identicon&r=PG", "display_name": "joaomlap", "link": "https://stackoverflow.com/users/2558430/joaomlap"}, "edited": false, "score": 0, "creation_date": 1437589682, "post_id": 31570965, "comment_id": 51097122, "body": "That was the error, I did ~Queue(){}; but because I didn&#39;t do any changes in main it was still giving me the same error."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 2558430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9243a6291e7243267d34e82d383ee1?s=128&d=identicon&r=PG", "display_name": "joaomlap", "link": "https://stackoverflow.com/users/2558430/joaomlap"}, "edited": false, "score": 0, "creation_date": 1437589384, "post_id": 31571012, "comment_id": 51096949, "body": "It was that, I even did that but because I didn&#39;t do any changes with main it was compiling the same code as before."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 5, "last_activity_date": 1437589150, "creation_date": 1437589150, "answer_id": 31571012, "question_id": 31570965, "link": "https://stackoverflow.com/questions/31570965/undefined-reference-to-template-class-destructor/31571012#31571012", "title": "Undefined reference to template class destructor", "body": "<pre><code>~Queue();\n</code></pre>\n\n<p>is not the same as</p>\n\n<pre><code>~Queue() {};\n</code></pre>\n\n<p>the second implements <code>~Queue</code>, the first just declares it.</p>\n\n<p>You declared a <code>~Queue</code>, but defined it nowhere.  Your main destroys a <code>Queue</code>, which implicitly calls <code>~Queue</code>.  The linker tries to find it, finds it nowhere, and gives you an error.</p>\n"}, {"tags": [], "owner": {"reputation": 9481, "user_id": 1244013, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/mJu1P.jpg?s=128&g=1", "display_name": "Kevin Le - Khnle", "link": "https://stackoverflow.com/users/1244013/kevin-le-khnle"}, "is_accepted": false, "score": 1, "last_activity_date": 1437589406, "creation_date": 1437589406, "answer_id": 31571093, "question_id": 31570965, "link": "https://stackoverflow.com/questions/31570965/undefined-reference-to-template-class-destructor/31571093#31571093", "title": "Undefined reference to template class destructor", "body": "<p>In C++, there's a clear distinction between declaration and definition.  In your header file, the destructor ~Queue() is declared.  But the destructor ~Queue's definition is nowhere to be found.  The compile actually was successful but the linker will complaint if it can not find the implementation of your destructor in this case.   </p>\n"}], "owner": {"reputation": 89, "user_id": 2558430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9243a6291e7243267d34e82d383ee1?s=128&d=identicon&r=PG", "display_name": "joaomlap", "link": "https://stackoverflow.com/users/2558430/joaomlap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2173, "favorite_count": 0, "closed_date": 1437589550, "accepted_answer_id": 31571012, "answer_count": 2, "score": 2, "last_activity_date": 1437589406, "creation_date": 1437589008, "last_edit_date": 1495542587, "question_id": 31570965, "link": "https://stackoverflow.com/questions/31570965/undefined-reference-to-template-class-destructor", "closed_reason": "Duplicate", "title": "Undefined reference to template class destructor", "body": "<p>I had a problem with my template class Queue which I had been implementing the functions in a implementation file, so I saw <a href=\"https://stackoverflow.com/questions/8752837/undefined-reference-to-template-class-constructor\">this</a> answer and resolved to do the implementation in the header file:</p>\n\n<p>Queue.hpp</p>\n\n<pre><code>#ifndef QUEUE_HPP\n#define QUEUE_HPP\n\n#include \"Instruction.hpp\"\n#include  \"MicroblazeInstruction.hpp\"\n\n#include &lt;memory&gt;\n#include &lt;list&gt;\n\ntemplate&lt;typename T&gt;\nclass Queue{\npublic:\n    Queue(unsigned int max): maxSize{max} {};\n    ~Queue();\n\n    std::list&lt;T&gt; getQueue(){\n        return queue;\n    };\n\n    void push(T obj){\n        if(queue.size() &lt; maxSize){\n            queue.push_front(obj);\n        }\n        else{\n            queue.pop_back();\n            queue.push_front(obj);\n        }\n    };\n\nprivate:\n    Queue(const Queue&amp;);\n    Queue&amp; operator=(const Queue&amp;);\n    unsigned int maxSize;\n    std::list&lt;T&gt; queue;\n};\n\n\n#endif\n</code></pre>\n\n<p>And I call this function from my main:</p>\n\n<pre><code>#include \"icm/icmCpuManager.hpp\"\n#include \"Instruction.hpp\"\n#include \"MicroblazeInstruction.hpp\"\n#include \"CpuManager.hpp\"\n#include \"File.hpp\"\n#include \"Utils.hpp\"\n#include \"MbInstructionDecode.hpp\"\n#include \"Queue.hpp\"\n#include \"PatternDetector.hpp\"\n\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n#include &lt;sstream&gt;\n#include &lt;cstdint&gt;\n#include &lt;memory&gt;\n\nint main(int argc, char *argv[]){\n    ...\n\n    // Create pointer to microblaze instruction\n    std::shared_ptr&lt;MicroblazeInstruction&gt; newMbInstruction;\n\n    // Maximum pattern size\n    const unsigned int maxPatternSize = 300;\n\n    // Creating the Queue\n    Queue&lt;std::shared_ptr&lt;MicroblazeInstruction&gt;&gt; matchingQueue(maxPatternSize);    \n\n    ...\n}\n</code></pre>\n\n<p>And I still have this compilation error:</p>\n\n<pre><code># Linking Platform faith.exe\ng++ ./CpuManager.o ./Instruction.o ./File.o ./Utils.o ./MicroblazeInstruction.o ./MbInstructionDecode.o ./PatternDetector.o ./main.o -m32 -LC:\\Imperas/bin/Windows32 -lRuntimeLoader -o faith.exe\n./main.o:main.cpp:(.text.startup+0x552): undefined reference to `Queue&lt;std::shared_ptr&lt;MicroblazeInstruction&gt; &gt;::~Queue()'\n./main.o:main.cpp:(.text.startup+0x83a): undefined reference to `Queue&lt;std::shared_ptr&lt;MicroblazeInstruction&gt; &gt;::~Queue()'\nc:/mingw/mingw32/bin/../lib/gcc/i686-w64-mingw32/4.7.0/../../../../i686-w64-mingw32/bin/ld.exe: ./main.o: bad reloc address 0x0 in section `.ctors'\ncollect2.exe: error: ld returned 1 exit status\nmakefile:24: recipe for target 'faith.exe' failed\nmake: *** [faith.exe] Error 1\n</code></pre>\n\n<p>I don't know why is this happening if I already specified the implementation functions in the header file, what do I have to do with the destructor?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 4, "creation_date": 1437588042, "post_id": 31570646, "comment_id": 51096123, "body": "The C standard does not make any guarantees for code like this."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 5, "creation_date": 1437588172, "post_id": 31570646, "comment_id": 51096199, "body": "A function pointer and a void* are distinct (incompatible) types, use inline assembly"}, {"owner": {"reputation": 1002, "user_id": 4905637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5ce2af8214323986fb6f7568482e48?s=128&d=identicon&r=PG&f=1", "display_name": "Dleep", "link": "https://stackoverflow.com/users/4905637/dleep"}, "edited": false, "score": 0, "creation_date": 1437588173, "post_id": 31570646, "comment_id": 51096201, "body": "basically your question is if a function pointer is a simple pointer or actually a double pointer in disguise?"}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1437588283, "post_id": 31570646, "comment_id": 51096274, "body": "opcodes makes more sense than &amp;opcodes, but the address itself should be the same and since you are casting it to a different pointer type, the type of the address also shouldn&#39;t matter."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1437588433, "post_id": 31570646, "comment_id": 51096362, "body": "Check out this post: <a href=\"http://stackoverflow.com/questions/31504984/executing-shellcode-segmentation-fault?noredirect=1#comment50975960_31504984\" title=\"executing shellcode segmentation fault\">stackoverflow.com/questions/31504984/&hellip;</a> . Might help."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1437588452, "post_id": 31570646, "comment_id": 51096373, "body": "The compiler and/or runtime may place the data in <code>opcodes</code> in memory that is marked &#39;not executable&#39;.  You may not be able to do what you&#39;re attempting to do.  It&#39;s all inherently unportable."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1437588704, "post_id": 31570646, "comment_id": 51096548, "body": "C does not define behavior for converting a void pointer or an object pointer to a function pointer, therefore your program exhibits undefined behavior, even if it never performs a function call via the converted pointer."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1437589228, "post_id": 31570646, "comment_id": 51096848, "body": "C may be compiled for Harvard architectures."}, {"owner": {"reputation": 187, "user_id": 4812957, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8f86977dd7413222c45aa1aa7cf11d54?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4812957/joe"}, "edited": false, "score": 0, "creation_date": 1437589300, "post_id": 31570646, "comment_id": 51096891, "body": "@DieterL&#252;cking Inline assembly and the opcodes are the same."}, {"owner": {"reputation": 187, "user_id": 4812957, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8f86977dd7413222c45aa1aa7cf11d54?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4812957/joe"}, "reply_to_user": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1437589316, "post_id": 31570646, "comment_id": 51096897, "body": "@JSF I&#39;m confused with what you said... I&#39;m asking in the thread if I&#39;m pointing to an address that is a pointer to opcodes or if I&#39;m pointing directly to opcodes."}, {"owner": {"reputation": 187, "user_id": 4812957, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8f86977dd7413222c45aa1aa7cf11d54?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4812957/joe"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1437589328, "post_id": 31570646, "comment_id": 51096907, "body": "@PSkocik This isn&#39;t my question."}, {"owner": {"reputation": 187, "user_id": 4812957, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8f86977dd7413222c45aa1aa7cf11d54?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4812957/joe"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1437589331, "post_id": 31570646, "comment_id": 51096909, "body": "@JonathanLeffler I disable the protection in the compilation."}, {"owner": {"reputation": 187, "user_id": 4812957, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8f86977dd7413222c45aa1aa7cf11d54?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4812957/joe"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1437589718, "post_id": 31570646, "comment_id": 51097142, "body": "@JohnBollinger Must I use an int? And I call the function in the last line, fp();"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1437589827, "post_id": 31570646, "comment_id": 51097216, "body": "@Joe,  Sorry, inline assembly is something the compiler/assembler handles and makes part of the executable code.   The &#39;opcodes&#39; is just some data in the heap. (usually not allowed to execute on the heap)"}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1437589835, "post_id": 31570646, "comment_id": 51097221, "body": "@Joe, either way (with or without the &amp;) you are pointing directly to the opcodes.  There is no pointer to pointer involved.  I just double checked with gcc -S of your code with and without the &amp; that doesn&#39;t matter.  The generated code (.s file) is identical with or without the &amp; in the C source code."}, {"owner": {"reputation": 187, "user_id": 4812957, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8f86977dd7413222c45aa1aa7cf11d54?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4812957/joe"}, "reply_to_user": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1437590885, "post_id": 31570646, "comment_id": 51097912, "body": "@JSF I know the compiler optimize the executable, but I insist, I want know what I&#39;m doing."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1437591072, "post_id": 31570646, "comment_id": 51098036, "body": "@Joe, no, using <code>int</code> changes nothing.  C does not provide any defined way to execute data.  As others have suggested, this is what inline assembly is for, if your compiler provides such a facility."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1437591088, "post_id": 31570646, "comment_id": 51098056, "body": "Cast to <code>void(*)()</code>."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1437591291, "post_id": 31570646, "comment_id": 51098183, "body": "@Joe, I had optimization off.  This is not an optimization I am describing.  The meaning of your code really is the same with or without that &amp;.  &amp;opcodes does not imply the creation of a temporary holding the address opcodes.  opcodes itself is an address and &amp;opcodes is that same address but with a weird type."}, {"owner": {"reputation": 187, "user_id": 4812957, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8f86977dd7413222c45aa1aa7cf11d54?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4812957/joe"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1437591301, "post_id": 31570646, "comment_id": 51098192, "body": "@JohnBollinger lol, in all systems the exploits are made with C and opcodes :/ But ok... strange"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1437591396, "post_id": 31570646, "comment_id": 51098257, "body": "@Joe yes, they are. And they all are built upon undefined behavior."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1437591566, "post_id": 31570646, "comment_id": 51098357, "body": "@Joe, C does not provide any <i>defined</i> way.  Exploits that follow the route you describe rely on triggering undefined behavior that in practice happens to favor the attacker at least some of the time.  That doesn&#39;t make them reliable.  It does make such vectors something that compilers and operating systems try to disable, which is an independent reason why you should not rely on executing data as code."}, {"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1437591664, "post_id": 31570646, "comment_id": 51098425, "body": "@Joe <a href=\"https://stackoverflow.com/questions/18476002/execute-binary-machine-code-from-c\">This</a> might be useful if you&#39;re using GCC. However, this is very compiler specific."}, {"owner": {"reputation": 187, "user_id": 4812957, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8f86977dd7413222c45aa1aa7cf11d54?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4812957/joe"}, "edited": false, "score": 0, "creation_date": 1437593687, "post_id": 31570646, "comment_id": 51099660, "body": "Ok, guys. It&#39;s a bad practice. This runs but you say the standard don&#39;t accept this. Ok, it&#39;s useful, but I&#39;m asking another issue."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1437595524, "post_id": 31571582, "comment_id": 51100708, "body": "I would say they very well have an answer: <b>don&#39;t do it!</b> They just call it a bit more friendly: <i>undefined behaviour</i>. And, no: UB does not vary, that would be <i>implementation defined</i>. Once UB is invoked, there is no use in investigating further."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1437590991, "creation_date": 1437590991, "answer_id": 31571582, "question_id": 31570646, "link": "https://stackoverflow.com/questions/31570646/need-chars-to-void-function-its-address/31571582#31571582", "title": "Need chars to void function its address?", "body": "<p>Perhaps.</p>\n\n<p>The C standard nor the C++ standard have an answer to this. For both of them, it's Undefined Behavior. It might vary from implementation to implementation, if it's even possible.</p>\n\n<p>If you give us a specific compiler, we might be able to answer it.</p>\n"}], "owner": {"reputation": 187, "user_id": 4812957, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8f86977dd7413222c45aa1aa7cf11d54?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4812957/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1437590991, "creation_date": 1437587958, "question_id": 31570646, "link": "https://stackoverflow.com/questions/31570646/need-chars-to-void-function-its-address", "title": "Need chars to void function its address?", "body": "<p>Need I specify the address of the char array opcodes (&amp;opcodes)? I'm casting to a void pointer, then I see indeed specify again the address (fp points address to opcodes -> points to opcodes).</p>\n\n<pre><code>char opcodes[] = \"\\x41\\x41...\";\n\nvoid main()\n{\n    void(*fp) (void);\n    fp = (void *)&amp;opcodes; // opcodes or &amp;opcodes\n    fp();\n}\n</code></pre>\n"}, {"tags": ["c++", "header-files", "libraries", "point-cloud-library", "point-clouds"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 3831467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e26012610888998a6b308c680586df?s=128&d=identicon&r=PG&f=1", "display_name": "user3831467", "link": "https://stackoverflow.com/users/3831467/user3831467"}, "is_accepted": true, "score": 0, "last_activity_date": 1437755554, "creation_date": 1437755554, "answer_id": 31615543, "question_id": 31570623, "link": "https://stackoverflow.com/questions/31570623/pcl-no-such-file-or-directory/31615543#31615543", "title": "PCl No such file or directory", "body": "<p>The visualization tutorial is outdated, so if you get this error, look at the actual documentation for help.</p>\n"}], "owner": {"reputation": 33, "user_id": 3831467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e26012610888998a6b308c680586df?s=128&d=identicon&r=PG&f=1", "display_name": "user3831467", "link": "https://stackoverflow.com/users/3831467/user3831467"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 31615543, "answer_count": 1, "score": 0, "last_activity_date": 1437755554, "creation_date": 1437587883, "question_id": 31570623, "link": "https://stackoverflow.com/questions/31570623/pcl-no-such-file-or-directory", "title": "PCl No such file or directory", "body": "<p>When I try to build a file that involves PCL, I get this error next to each line where I try to include a PCL file. I have tried moving the files into the same directory, but I still get the same error.</p>\n"}, {"tags": ["c++", "visual-c++", "stdmap"], "comments": [{"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 1, "creation_date": 1437590588, "post_id": 31570422, "comment_id": 51097704, "body": "As far as i know this assertion occurs when you free unallocated memory, can you identify the source of the problem when you go back in the call stack?"}, {"owner": {"reputation": 109, "user_id": 2962242, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1393070870/picture?type=large", "display_name": "Ben", "link": "https://stackoverflow.com/users/2962242/ben"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1437602378, "post_id": 31570422, "comment_id": 51104335, "body": "As I said it happens when I add the same geometry, shader and material a second time but with other properties. This calls my function &quot;submitToRenderQueue&quot; and at the end of this function (last curly bracket) it seems to do something that it shouldn&#39;t. In the call stack it sais that it calls [External Code] and then some other stuff. Here&#39;s a screenshot: <a href=\"http://fs1.directupload.net/images/150722/i3aq5vz2.png\" rel=\"nofollow noreferrer\">fs1.directupload.net/images/150722/i3aq5vz2.png</a>"}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1437692600, "post_id": 31570422, "comment_id": 51150551, "body": "I would add debug output to the constructor of your objects and then compare the addresses with the one that gets deleted."}, {"owner": {"reputation": 109, "user_id": 2962242, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1393070870/picture?type=large", "display_name": "Ben", "link": "https://stackoverflow.com/users/2962242/ben"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1437704263, "post_id": 31570422, "comment_id": 51153576, "body": "I found out that the problem was caused by using pointers as key in the map. I changed that and it works now. I&#39;ll update my initial post ;-)"}], "owner": {"reputation": 109, "user_id": 2962242, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1393070870/picture?type=large", "display_name": "Ben", "link": "https://stackoverflow.com/users/2962242/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1437704348, "creation_date": 1437587374, "last_edit_date": 1437704348, "question_id": 31570422, "link": "https://stackoverflow.com/questions/31570422/adding-entries-to-map-block-type-is-valid-phead-nblockuse", "title": "Adding entries to map: _Block_Type_Is_Valid (pHead-&gt;nBlockUse)", "body": "<p><strong>Update</strong></p>\n\n<p>The problem was caused by using pointers as key for the maps. As it seems that doesn't really work :-D</p>\n\n<p><strong>Original Post</strong></p>\n\n<p>I want to store calls to my renderer and then render them in sorted order. I thought it would be a good idea to have a map taking a shader as argument and a map of &lt; SomeKey, SomeOtherMap > as value. At the end of this there would be a vector of properties. </p>\n\n<p>I tried it with the following code:</p>\n\n<pre><code>/* Typedefs */\ntypedef std::vector&lt; Properties &gt; PropertiesLayerOpaque;\ntypedef std::map&lt; GeometryPtr, PropertiesLayerOpaque &gt; GeometryLayerOpaque;\ntypedef std::map&lt; MaterialPtr, GeometryLayerOpaque &gt; MaterialLayerOpaque;\ntypedef std::map&lt; ShaderPtr, MaterialLayerOpaque &gt; QueueOpaque;\n\nvoid RenderQueue::submitToRenderQueue(GeometryPtr geometry, Properties properties, GLfloat distanceToCamera, bool opaque)\n{\n    if (opaque){\n        MaterialLayerOpaque &amp;matLayer = _renderQueueOpaque[geometry-&gt;getMaterial()-&gt;getShader()];\n        GeometryLayerOpaque &amp;geomLayer = matLayer[geometry-&gt;getMaterial()];\n        PropertiesLayerOpaque &amp;propertiesLayer = geomLayer[geometry];\n        propertiesLayer.push_back(properties);\n    }\n}\n</code></pre>\n\n<p>Shaders, Materials and Geometry are shared_ptr because I work with them everywhere in my project. The properties are added by value since they should be unique and basically define the call to the renderer.</p>\n\n<p>Now to my problem: This code works fine until I add the same model (with the same shader, material and geometry but different properties) a second time. \nThe call is added but at the end of the function I get the following Error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7axtp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7axtp.png\" alt=\"error message\"></a></p>\n\n<p>I don't really get these maps as it seems, so I really appreciate your help ... Thank you so much! </p>\n"}, {"tags": ["c++", "c", "ascii"], "comments": [{"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1437588078, "post_id": 31570396, "comment_id": 51096140, "body": "Simple google search and this <a href=\"http://www.cs.trincoll.edu/~crypto/historical/caesar.html\" rel=\"nofollow noreferrer\">link</a> help you. Why have you asked before searching ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1437596548, "post_id": 31570396, "comment_id": 51101360, "body": "Code has additional issues if <code>k &lt; 0</code>.  Suggest <code>k %= 26; if (k &lt; 0) k += 26;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1437596274, "post_id": 31570580, "comment_id": 51101181, "body": "This will have trouble with <code>k&lt;0</code>.  But maybe OP does not care about that."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1437597009, "post_id": 31570580, "comment_id": 51101675, "body": "Note: <code>c = &#39;a&#39; + (c % &#39;z&#39;) - 1</code> is only doing a <code>c -= (&#39;z&#39;-&#39;a&#39;+1)</code> or <code>c -= 26</code>.  IMO, one of these 2 would be clearer."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1437589005, "last_edit_date": 1437589005, "creation_date": 1437587789, "answer_id": 31570580, "question_id": 31570396, "link": "https://stackoverflow.com/questions/31570396/wrapping-chars-in-caesar-cipher-encode/31570580#31570580", "title": "Wrapping chars in caesar cipher encode", "body": "<p>Lets make a couple changes to the code and it is easier to see what is going on</p>\n\n<pre><code>for(int i = 0; i &lt; n; i++){\n    int c = s[i];\n    if(c &gt;= 'a' &amp;&amp; c &lt;= 'z'){\n        c += k;\n        if( c &gt; 'z'){\n            c = 'a' + (c % 'z') - 1; // wrapping from z to a?\n        }\n    }\n    else if(c &gt;= 'A' &amp;&amp; c &lt;= 'Z'){\n        c += k;\n        if(c &gt; 'Z'){\n            c = 'A' + (c % 'Z') - 1;\n        }\n    }\n    cout &lt;&lt; (char)c;\n}\n</code></pre>\n\n<p>So in <code>c = 'a' + (c % 'z') - 1;</code> if <code>c</code> is larger than <code>z</code> then we mod <code>c</code> by <code>z</code>(122) to get how many characters from <code>a</code> we need to go.  The same thing is going on with the upper case letters.  I am subtracting one here as we are starting at <code>a</code> instead of the character before <code>a</code> like you original code does.</p>\n"}], "owner": {"reputation": 384, "user_id": 3801406, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/dcaa4596dfcbd114ed233ac0182042f9?s=128&d=identicon&r=PG&f=1", "display_name": "bittterbotter", "link": "https://stackoverflow.com/users/3801406/bittterbotter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 1, "accepted_answer_id": 31570580, "answer_count": 1, "score": -1, "last_activity_date": 1437589005, "creation_date": 1437587302, "question_id": 31570396, "link": "https://stackoverflow.com/questions/31570396/wrapping-chars-in-caesar-cipher-encode", "title": "Wrapping chars in caesar cipher encode", "body": "<p>Can anyone please explain me how this wrapping of chars between a-to-z and A-to-Z happening in Caesar shift code?</p>\n\n<pre><code>k %= 26;\n\nfor(int i = 0; i &lt; n; i++){\n    int c = s[i];\n    if(c &gt;= 'a' &amp;&amp; c &lt;= 'z'){\n        c += k;\n        if( c &gt; 'z'){\n            c = 96 + (c % 122); // wrapping from z to a?\n        }\n    }\n    else if(c &gt;= 'A' &amp;&amp; c &lt;= 'Z'){\n        c += k;\n        if(c &gt; 'Z'){\n            c = 64 + (c % 90);\n        }\n    }\n    cout &lt;&lt; (char)c;\n}\n</code></pre>\n\n<p>K is amount of shift and c is a char of string s.</p>\n\n<p>Is there any better way to do the same?</p>\n"}, {"tags": ["c++", "winapi", "mouse", "createwindow"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1437591114, "post_id": 31570365, "comment_id": 51098069, "body": "It sounds like your main window isn&#39;t calling <code>SetFocus</code> when it gets a mouse click."}], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 1411345, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/beb1dce513375adacd02594bfc0aa124?s=128&d=identicon&r=PG", "display_name": "a1s2d3f4", "link": "https://stackoverflow.com/users/1411345/a1s2d3f4"}, "edited": false, "score": 0, "creation_date": 1437618629, "post_id": 31570683, "comment_id": 51108812, "body": "This works, clicking with the mouse no longer &quot;activates&quot; the child window. Though now I still have to figure out how to allow me to select the child window text and then click in some other area of the parent window to reactivate it. WM_KILLFOCUS is sent to the parent window just before it loses focus (as I click inside one of the child windows). And SetFocus(hWnd); gets it right back."}, {"owner": {"reputation": 1575, "user_id": 1593297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zsi4O.jpg?s=128&g=1", "display_name": "Beta Carotin", "link": "https://stackoverflow.com/users/1593297/beta-carotin"}, "reply_to_user": {"reputation": 455, "user_id": 1411345, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/beb1dce513375adacd02594bfc0aa124?s=128&d=identicon&r=PG", "display_name": "a1s2d3f4", "link": "https://stackoverflow.com/users/1411345/a1s2d3f4"}, "edited": false, "score": 0, "creation_date": 1437630758, "post_id": 31570683, "comment_id": 51112057, "body": "@a1s2d3f4 If you only want to reactivate he main window only when you click it, simply handle the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms645607%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">WM_LBUTTONDOWN</a> message to set the focus."}, {"owner": {"reputation": 1575, "user_id": 1593297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zsi4O.jpg?s=128&g=1", "display_name": "Beta Carotin", "link": "https://stackoverflow.com/users/1593297/beta-carotin"}, "reply_to_user": {"reputation": 455, "user_id": 1411345, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/beb1dce513375adacd02594bfc0aa124?s=128&d=identicon&r=PG", "display_name": "a1s2d3f4", "link": "https://stackoverflow.com/users/1411345/a1s2d3f4"}, "edited": false, "score": 1, "creation_date": 1437682542, "post_id": 31570683, "comment_id": 51146130, "body": "@a1s2d3f4 I edited the comment into my answer, please accept it."}], "tags": [], "owner": {"reputation": 1575, "user_id": 1593297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zsi4O.jpg?s=128&g=1", "display_name": "Beta Carotin", "link": "https://stackoverflow.com/users/1593297/beta-carotin"}, "is_accepted": true, "score": 2, "last_activity_date": 1568913739, "last_edit_date": 1568913739, "creation_date": 1437588101, "answer_id": 31570683, "question_id": 31570365, "link": "https://stackoverflow.com/questions/31570365/win32-c-how-do-i-re-focus-on-parent-window-after-clicking-in-a-child-window/31570683#31570683", "title": "Win32: C++: How do I re-focus on Parent Window after clicking in a child window?", "body": "<p>Handle the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646282%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\"><code>WM_KILLFOCUS</code></a> message in the window procedure of the window you want to focus, and restore the focus using the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646312%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\"><code>SetFocus</code></a> function.</p>\n\n<p>If you want to focus the window when it is clicked, handle the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms645607%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\"><code>WM_LBUTTONDOWN</code></a> message.</p>\n\n<pre><code>LRESULT CALLBACK MyWndProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)\n{\n    // Restore the focus when it was lost.\n    if (Msg == WM_KILLFOCUS) {\n        SetFocus(hWnd);\n        // Msg was handled, return zero.\n        return 0;\n    }\n    // Or when the window is clicked.\n    if (Msg == WM_LBUTTONDOWN) {\n        SetFocus(hWnd);\n        // Msg was handled, return zero.\n        return 0;\n    }\n    return DefWindowProc(hWnd, Msg, wParam, lParam);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1444905111, "creation_date": 1444905111, "answer_id": 33146165, "question_id": 31570365, "link": "https://stackoverflow.com/questions/31570365/win32-c-how-do-i-re-focus-on-parent-window-after-clicking-in-a-child-window/33146165#33146165", "title": "Win32: C++: How do I re-focus on Parent Window after clicking in a child window?", "body": "<pre><code>case WM_KEYDOWN:\n    SetFocus(Parent_Hwnd);\n    return SendMessage(Parent_Hwnd,WM_KEYDOWN,wParam,lParam);\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 1411345, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/beb1dce513375adacd02594bfc0aa124?s=128&d=identicon&r=PG", "display_name": "a1s2d3f4", "link": "https://stackoverflow.com/users/1411345/a1s2d3f4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2386, "favorite_count": 0, "accepted_answer_id": 31570683, "answer_count": 2, "score": 0, "last_activity_date": 1568913739, "creation_date": 1437587162, "question_id": 31570365, "link": "https://stackoverflow.com/questions/31570365/win32-c-how-do-i-re-focus-on-parent-window-after-clicking-in-a-child-window", "title": "Win32: C++: How do I re-focus on Parent Window after clicking in a child window?", "body": "<p>In my Win32 CPP program, I have defined some Child Window to display various text strings using something like:</p>\n\n<pre><code>hnd_to_this_ch_window = CreateWindow( \n                        L\"EDIT\",L\"Some initial text\", WS_VISIBLE | WS_CHILD | ES_LEFT,  \n                        position_of_this_window_X,              \n                        position_of_this_window_Y,\n                        TEXTOUT_DEFAULT_WIDTH,          \n                        TEXTOUT_DEFAULT_HEIGHT, \n                        handle_to_my_parent_window, NULL,                        \n                        hinstance_variable_used_by_create_window, \n                        NULL )\n</code></pre>\n\n<p>My problem is that if I click with my mouse to select the text in one of such child windows (to, say, copy it somewhere), the focus of the application goes to this child window and so any keypresses which used to be handled through my main windows CALLBACK (with case WM_KEYDOWN:) are now captured into the child window, where they appear as inputted characters. What magic function do I call to have the focus go back to the parent (so that my WM_KEYDOWN) can work again? I was hoping I could just click on the main Window's title bar and that would take it back to normal, but that isn't working (because, obviously, my program is lacking some extra logic).</p>\n"}, {"tags": ["c++", "pointers", "reference"], "comments": [{"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 3, "creation_date": 1437587197, "post_id": 31570337, "comment_id": 51095648, "body": "ISO C++11 does not allow conversion from string literal to &#39;char *&#39;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1437587325, "post_id": 31570337, "comment_id": 51095703, "body": "Please grab some book, before asking something &#39;advanced&#39;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1437587329, "post_id": 31570337, "comment_id": 51095705, "body": "Why is this tagged as C?  References do not exist in C."}, {"owner": {"reputation": 650, "user_id": 5061723, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/812dfad842a1c235d23f5ab4d7f6ff9d?s=128&d=identicon&r=PG&f=1", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/5061723/isaiah"}, "edited": false, "score": 0, "creation_date": 1437587428, "post_id": 31570337, "comment_id": 51095754, "body": "Stupid ui, meant to mark as duplicate, press enter, and I send a flag that I didn&#39;t meant to send....."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1437587582, "post_id": 31570337, "comment_id": 51095852, "body": "if <code>ptr</code> is <code>void*</code>, then <code>&amp;ptr</code> is <code>void**</code>. It doesn&#39;t really make much sense to cast that to <code>char*</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1437588103, "post_id": 31570337, "comment_id": 51096153, "body": "I&#39;m not totally familiar with C++, however this line: &#39;np = &quot;aaaaaaaaaaaaaaaaa&quot;;&#39;, in C, would not work.  Suggest: strcpy( np, &quot;aaaaaaaaaaaaaaaaa&quot; );"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 5144720, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c06347cde45cac5922b28b1cf28afe2?s=128&d=identicon&r=PG&f=1", "display_name": "Michal", "link": "https://stackoverflow.com/users/5144720/michal"}, "edited": false, "score": 0, "creation_date": 1437588153, "post_id": 31570394, "comment_id": 51096187, "body": "Yeah, sure it works and thank you for answering, but still as i said i cannot really change the way the function takes arguments and how i declare ptr."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "reply_to_user": {"reputation": 167, "user_id": 5144720, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c06347cde45cac5922b28b1cf28afe2?s=128&d=identicon&r=PG&f=1", "display_name": "Michal", "link": "https://stackoverflow.com/users/5144720/michal"}, "edited": false, "score": 0, "creation_date": 1437589280, "post_id": 31570394, "comment_id": 51096881, "body": "@Michal then you <i>can&#39;t</i> pass by reference and your question does not make any sense. Note: this does not require any changes to the caller!"}], "tags": [], "owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "is_accepted": false, "score": 2, "last_activity_date": 1437587297, "creation_date": 1437587297, "answer_id": 31570394, "question_id": 31570337, "link": "https://stackoverflow.com/questions/31570337/passing-pointer-by-reference-cannot-change-value/31570394#31570394", "title": "Passing pointer by reference\u2014cannot change value", "body": "<p>Your function declaration needs to pass the pointer by reference, like this:</p>\n\n<pre><code>void f(char *&amp;p) {...}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1437587552, "post_id": 31570452, "comment_id": 51095826, "body": "not to mention that there&#39;s no pass-by-reference in C."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1437587749, "post_id": 31570452, "comment_id": 51095934, "body": "although the initial sentence might be a bit misleading, this answer displays the correct syntax for both C and C++, so why the down vote?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1437587771, "post_id": 31570452, "comment_id": 51095950, "body": "@TheParamagneticCroissant Removed that part."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1437590961, "post_id": 31570452, "comment_id": 51097959, "body": "He was &quot;passing a pointer by reference&quot; in the C sense of that phrase (what that phrase would have meant before C++ was invented).  That kind of C code can be used in C++, but that terminology for describing the code has been made incorrect (even in C) by the existence of C++.  Rather, he is passing a <code>something**</code> in disguise as a <code>char*</code> and needed to use the disguised <code>something**</code> by casting it again."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1437591784, "post_id": 31570452, "comment_id": 51098513, "body": "@JSF Yes, and what? That doesn&#39;t change the point of using a reference. That passing that address is wrong then, doesn&#39;t  solve the primary problem, that the address isn&#39;t <i>returned</i>."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 4, "last_activity_date": 1437589350, "last_edit_date": 1437589350, "creation_date": 1437587445, "answer_id": 31570452, "question_id": 31570337, "link": "https://stackoverflow.com/questions/31570337/passing-pointer-by-reference-cannot-change-value/31570452#31570452", "title": "Passing pointer by reference\u2014cannot change value", "body": "<blockquote>\n  <p>The problem is that after I pass the pointer by reference and change its value, after leaving the function, the value of original pointer doesn't change.</p>\n</blockquote>\n\n<p>You aren't passing by reference. This would need to have a function signature like </p>\n\n<pre><code>void f(char *&amp;p){\n          // ^\n</code></pre>\n\n<p>Your code as is only changes a value parameter copy of <code>p</code>:</p>\n\n<pre><code>p = np;    \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 5144720, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c06347cde45cac5922b28b1cf28afe2?s=128&d=identicon&r=PG&f=1", "display_name": "Michal", "link": "https://stackoverflow.com/users/5144720/michal"}, "edited": false, "score": 0, "creation_date": 1437589848, "post_id": 31570892, "comment_id": 51097228, "body": "The &quot;aaaaaaaaaaa&quot; was just an example, inside this function i will get different strings, that i need to get outside this function! But I bielieve You&#39;re right! Right not if i am testing outside in locals says following thing: &quot;0x001ecc72 {ConsoleApplication.exe!&#39;string&#39;}&quot;aaaaaaaaaa&quot;&quot;. So it seems to work. Thank You!"}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "reply_to_user": {"reputation": 167, "user_id": 5144720, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c06347cde45cac5922b28b1cf28afe2?s=128&d=identicon&r=PG&f=1", "display_name": "Michal", "link": "https://stackoverflow.com/users/5144720/michal"}, "edited": false, "score": 0, "creation_date": 1437590318, "post_id": 31570892, "comment_id": 51097524, "body": "Yes, I knew the &quot;aaaaaaaaaaaaaaaaa&quot; in your question was just a simplification of what you really wanted, and the &quot;aaaaaaaaaaaaaaaaa&quot; in my answer was just a copy from your question.  I think you now understand the key portion of the answer, which is casting back to a ** and assigning through that cast.  Passing a pointer by reference is a very specific C++ thing very different from what you are doing.  So using that phrase and a C++ tag on C question led to answers you did not want."}, {"owner": {"reputation": 167, "user_id": 5144720, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c06347cde45cac5922b28b1cf28afe2?s=128&d=identicon&r=PG&f=1", "display_name": "Michal", "link": "https://stackoverflow.com/users/5144720/michal"}, "edited": false, "score": 0, "creation_date": 1437590447, "post_id": 31570892, "comment_id": 51097608, "body": "Yes, I do. Thank You again!"}], "tags": [], "owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "is_accepted": true, "score": 1, "last_activity_date": 1437589092, "last_edit_date": 1437589092, "creation_date": 1437588775, "answer_id": 31570892, "question_id": 31570337, "link": "https://stackoverflow.com/questions/31570337/passing-pointer-by-reference-cannot-change-value/31570892#31570892", "title": "Passing pointer by reference\u2014cannot change value", "body": "<p>Your question is unclear, so I need to guess at the question.  My guess of the question is you cannot change the signature nor call of the function</p>\n\n<pre><code>void f(char* p);\n...\nvoid *ptr;\nf((char *)&amp;ptr);\n</code></pre>\n\n<p>And you want to change the body of f, so it will change ptr to point to the literal within the body of f.  If I guessed the question right, the answer would be:</p>\n\n<pre><code>void f(char* p)\n{\n   *((char**)(p)) = \"aaaaaaaaaaaaaaaaa\";\n}\n</code></pre>\n\n<p>If I didn't guess the question correctly, please ask more clearly.</p>\n\n<p>In the call you have cast a void** to a char*, dropping a level of indirection, then inside the function you cast that level of indirection back in, and at the same time change the ultimate target from void to char.  It isn't all as bizarre as it seems (or I would have guessed differently at your question).  Casting things to/from char* may help with aliasing issues (when otherwise the compiler could optimize the whole operation out of existence).  So maybe your question is part of something legitimate.  But it is ugly enough there must be a better way.</p>\n"}], "owner": {"reputation": 167, "user_id": 5144720, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c06347cde45cac5922b28b1cf28afe2?s=128&d=identicon&r=PG&f=1", "display_name": "Michal", "link": "https://stackoverflow.com/users/5144720/michal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "closed_date": 1437680847, "accepted_answer_id": 31570892, "answer_count": 3, "score": -2, "last_activity_date": 1437589350, "creation_date": 1437587039, "last_edit_date": 1437587530, "question_id": 31570337, "link": "https://stackoverflow.com/questions/31570337/passing-pointer-by-reference-cannot-change-value", "closed_reason": "Duplicate", "title": "Passing pointer by reference\u2014cannot change value", "body": "<p>I've read many topics about passing pointers to a function by reference, but I couldn't really find an answer. The problem is that after I pass the pointer by reference and change its value, after leaving the function, the value of original pointer doesn't change. I am really stuck with it. Please help me! You're my only hope!</p>\n\n<p>Btw. the code i pasted is the same as the code I need to work on, and I cannot really change the calling of the function.\nCode:</p>\n\n<pre><code>void f(char *p){\n    char *np = new char(100);\n    np = \"aaaaaaaaaaaaaaaaa\";\n    p = np;\n}\n</code></pre>\n\n<p>And calling of this function:</p>\n\n<pre><code>void *ptr;\nf((char *)&amp;ptr);\n</code></pre>\n\n<p>I will be very thankful for any help!</p>\n"}, {"tags": ["c++", "fstream", "ofstream"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1437587062, "post_id": 31570278, "comment_id": 51095561, "body": "Please <b><a href=\"https://stackoverflow.com/posts/31570278/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 31, "user_id": 5050865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b152e175d6bb2106cd9b65545e0f82?s=128&d=identicon&r=PG&f=1", "display_name": "jeeboe", "link": "https://stackoverflow.com/users/5050865/jeeboe"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1437588855, "post_id": 31570278, "comment_id": 51096628, "body": "did you read the second paragraph of my question?"}, {"owner": {"reputation": 31, "user_id": 5050865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b152e175d6bb2106cd9b65545e0f82?s=128&d=identicon&r=PG&f=1", "display_name": "jeeboe", "link": "https://stackoverflow.com/users/5050865/jeeboe"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1437588918, "post_id": 31570278, "comment_id": 51096668, "body": "just look at the last function on the bottom of all the code... and just in case you so happen to need the rest of the code to help you then you look at it."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5050865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b152e175d6bb2106cd9b65545e0f82?s=128&d=identicon&r=PG&f=1", "display_name": "jeeboe", "link": "https://stackoverflow.com/users/5050865/jeeboe"}, "edited": false, "score": 0, "creation_date": 1437588172, "post_id": 31570439, "comment_id": 51096197, "body": "Thank you for pointing that out but it did not affect the negative condition of my program which still fails to save to my text file."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 2, "last_activity_date": 1437587416, "creation_date": 1437587416, "answer_id": 31570439, "question_id": 31570278, "link": "https://stackoverflow.com/questions/31570278/difficulties-with-saving-a-text-file-using-ofstream/31570439#31570439", "title": "Difficulties with saving a text file using ofstream", "body": "<p><strong>You are trying t open your file twice:</strong></p>\n\n<pre><code>ofstream saveFile(fileName.c_str()); // this opens the file\n\nsaveFile.open(fileName.c_str()); // so does this\n</code></pre>\n\n<p><em>That will put the file in an error state so no writing will happen.</em></p>\n\n<p><strong>Just do this:</strong></p>\n\n<pre><code>ofstream saveFile(fileName.c_str()); // this opens the file\n</code></pre>\n\n<p><em>And that should work.</em></p>\n\n<p><strong>Or else you can do this:</strong></p>\n\n<pre><code>ofstream saveFile; // this does not open the file\n\nsaveFile.open(fileName.c_str()); // but this does\n</code></pre>\n\n<p><em>And that should work too.</em></p>\n"}], "owner": {"reputation": 31, "user_id": 5050865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b152e175d6bb2106cd9b65545e0f82?s=128&d=identicon&r=PG&f=1", "display_name": "jeeboe", "link": "https://stackoverflow.com/users/5050865/jeeboe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1437587416, "creation_date": 1437586844, "question_id": 31570278, "link": "https://stackoverflow.com/questions/31570278/difficulties-with-saving-a-text-file-using-ofstream", "title": "Difficulties with saving a text file using ofstream", "body": "<p>Right now my problem seems to be focused on the saveFile function.</p>\n\n<p>I will post the entire program here, so dont be ired when see a whole bunch of code... just look at the saveFile function at the bottom... I am posting all the code JUST IN CASE it will help you help me solve my problem.</p>\n\n<p>Now for defining the apparent problem to you all: I can edit the file throughout the life of the console app with the updateSale function as I run it, but when I use the saveFile function and put in 'y' to save, the differences that are visible after using the updateSales function DO NOT get saved to the actual sales file called \"salespeople.txt\" and I do not understand why.</p>\n\n<p>this is what the salespeople.txt looks like:\nSchrute 25000</p>\n\n<p>Halpert 20000</p>\n\n<p>Vance 19000</p>\n\n<p>Hudson 17995.5</p>\n\n<p>Bernard 14501.5</p>\n\n<p>now here is the program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n\n\nusing namespace std;\n//variables--------------------------------------------------------\n\n\nint lineCount = 0;\n//prototypes-------------------------------------------------------\nint getIndexLargest(string[], double[]);\nvoid displaySalesPeople(string[], double[]);\nbool readSalesFile(string[], double[]);\nvoid updateSales(string[], double[]);\nint saveFile(string, string[], double[], int);\n\nint main()\n{\n    string fileName;\n    int arrayLength;\n    ifstream readSales;\n    string salesPersonName[5];\n    double saleAmount[5];\n\n\n    bool flag = false;\n\n    int options;\n    do\n    {\n\n        cout &lt;&lt; \"1) Open sales person file. \"&lt;&lt; endl;\n        cout &lt;&lt; \"2) Display sales person information. \"&lt;&lt; endl;\n        cout &lt;&lt; \"3) Update sales. \" &lt;&lt; endl;\n        cout &lt;&lt; \"4) Get best sales person. \" &lt;&lt; endl;\n        cout &lt;&lt; \"5) Exit. \" &lt;&lt; endl;\n\n        cout &lt;&lt; \"Please enter a number 1-5 to select an option.\" &lt;&lt;endl;\n        cin &gt;&gt; options;\n\n\n        if(options == 1)\n        {\n            flag = readSalesFile(salesPersonName, saleAmount);\n\n        }\n        else if(options == 2)\n        {\n            if(flag == false)\n            {\n                cout &lt;&lt; \"Please open sales file before selecting this option. Try again\" &lt;&lt; endl;\n            }\n            else\n                displaySalesPeople(salesPersonName, saleAmount);\n\n        }\n        else if(options == 3)\n        {\n            if(flag == false)\n            {\n                cout &lt;&lt; \"Please open sales file before selecting this option. Try again\" &lt;&lt; endl;\n            }\n            else\n                updateSales(salesPersonName, saleAmount);\n        }\n        else if(options == 4)\n        {\n            if(flag == false)\n            {\n                cout &lt;&lt; \"Please open sales file before selecting this option. Try again\" &lt;&lt; endl;\n            }\n            getIndexLargest(salesPersonName, saleAmount);\n        }\n        else if(options == 5)\n        {\n\n            char choice;\n            cout &lt;&lt; \"Enter character y to save... anything else will exit without saving: \" &lt;&lt; endl;\n            cin &gt;&gt; choice;\n            if(choice == 'y')\n            {\n\n                saveFile(fileName, salesPersonName, saleAmount, arrayLength);\n                cout &lt;&lt; \"File saved. \" &lt;&lt; endl;\n            }\n            else\n            {\n                cout &lt;&lt; \"closing program\" &lt;&lt; endl;\n            }\n        }\n    }\n    while(options != 5);\n    return 0;\n\n}\n\n\n//functions---------------------------------\nbool readSalesFile(string salesPersonName[], double saleAmount[])\n{\n    bool flag = false;\n    ifstream readSales;\n\n    string fileName;\n\n    cout &lt;&lt; \"Please enter the path to your sales people file: \";\n    getline(cin, fileName);\n    readSales.open(fileName.c_str());\n\n    while(readSales.fail())\n    {\n        cout &lt;&lt; \"Failed. Please enter the path to your sales file again: \";\n        getline(cin, fileName);\n        readSales.open(fileName.c_str());\n    }\n    if(readSales.good())\n    {\n\n        flag = true;\n        cout &lt;&lt; lineCount;\n\n        string name = \" \";\n        double amount =0.00;\n        int i = 0;\n        while(!readSales.eof())\n        {\n            readSales &gt;&gt; name;\n            readSales &gt;&gt; amount;\n            salesPersonName[i] = name;\n            saleAmount[i] = amount;\n            i++;\n\n        }\n        for(i = 0; i &lt; 5; i++)\n        {\n            cout &lt;&lt; \"Sales person name: \" &lt;&lt; salesPersonName[i] &lt;&lt; endl;\n            cout &lt;&lt; \"Sale amount: $\" &lt;&lt; saleAmount[i] &lt;&lt; endl;\n     }\n\n     readSales.close();\n    }\n\n\n\n\n\n\n\n    readSales.close();\n    return flag;\n}\n\nvoid displaySalesPeople(string salesPersonName[], double saleAmount[])\n{\n\n    for(int i = 0; i &lt; 5; i++)\n    {\n        cout &lt;&lt; \"Sales person name: \" &lt;&lt; salesPersonName[i] &lt;&lt; endl;\n        cout &lt;&lt; \"Sale amount: $\" &lt;&lt; saleAmount[i] &lt;&lt; endl;\n    }\n\n}\nvoid updateSales(string salesPersonName[], double saleAmount[])\n{\n    bool flag = false;\n\n    string findName;\n    double moneyAmount;\n\n    cout &lt;&lt; \"Enter name of sales person you want to modify: \" &lt;&lt; endl;\n    cin &gt;&gt; findName;\n\n    for(int i = 0; i &lt; 5; i++)\n    {\n        if(findName == salesPersonName[i])\n        {\n            cout &lt;&lt; \"Enter the sale amount you would like to modify: \" &lt;&lt; endl;\n            cin &gt;&gt; moneyAmount;\n            saleAmount[i] += moneyAmount;\n            cout &lt;&lt; saleAmount[i] &lt;&lt; endl;\n\n            flag = true;\n        }\n\n\n    }\n    if(flag == false)\n    {\n        cout &lt;&lt; \" name not found\" &lt;&lt; endl;\n    }\n\n}\n\nint getIndexLargest(string salesPersonName[], double saleAmount[])\n{\n    ifstream readSales;\n    while(!readSales.eof())\n    {\n        double largestSale = 0.00;\n        string largestSalesPerson;\n        int i = 0;\n\n\n\n        lineCount++;\n        readSales &gt;&gt; salesPersonName[i];\n        readSales &gt;&gt; saleAmount[i];\n        if(saleAmount[i] &gt; largestSale)\n        {\n            largestSale = saleAmount[i];\n            largestSalesPerson = salesPersonName[i];\n        }\n        cout &lt;&lt; \"Best sales person : \"&lt;&lt; largestSalesPerson &lt;&lt; \" $\" &lt;&lt;setprecision(2)&lt;&lt;fixed&lt;&lt; largestSale &lt;&lt; endl;\n\n    }\n}\nint saveFile(string fileName, string salesPersonName[], double saleAmount[], int arrayLength)\n{\n\n    ofstream saveFile(fileName.c_str());\n\n    saveFile.open(fileName.c_str());\n\n    for(int i = 0; i &lt; 5; i++)\n    {\n        saveFile &lt;&lt; salesPersonName[i] &lt;&lt; \" \" &lt;&lt; saleAmount[i] &lt;&lt; endl;\n    }\n\n    saveFile.close();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 0, "creation_date": 1437587074, "post_id": 31570191, "comment_id": 51095576, "body": "You keep saying pointer instead of array, but I don&#39;t think it means what you think it means. You were never using arrays, you were using a value that, probably, means how many elements there are in a column and in a row. And you replaced that value with a pointer. What are you trying to do?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1437587180, "post_id": 31570191, "comment_id": 51095644, "body": "What is the point of your change?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5085342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b88e20edcaabd3a0cde20290e0bff225?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Mangal", "link": "https://stackoverflow.com/users/5085342/vivek-mangal"}, "is_accepted": false, "score": 0, "last_activity_date": 1437587299, "creation_date": 1437587299, "answer_id": 31570395, "question_id": 31570191, "link": "https://stackoverflow.com/questions/31570191/how-to-access-elements-by-using-pointer-instead-of-array/31570395#31570395", "title": "How to access elements by using pointer instead of array", "body": "<p>I think you are passing constants 5 and 3 as arguments which causes this error.\nyou can't pass constant value as it is by reference.Try passing 5 and 3 by storing them in a variable.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 5122834, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/2e396f78b921cee95ba2d0cb80b47070?s=128&d=identicon&r=PG&f=1", "display_name": "Pewds", "link": "https://stackoverflow.com/users/5122834/pewds"}, "edited": false, "score": 0, "creation_date": 1437588237, "post_id": 31570447, "comment_id": 51096247, "body": "So I don&#39;t need to make any change to my initial version since it&#39;s already correct?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 65, "user_id": 5122834, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/2e396f78b921cee95ba2d0cb80b47070?s=128&d=identicon&r=PG&f=1", "display_name": "Pewds", "link": "https://stackoverflow.com/users/5122834/pewds"}, "edited": false, "score": 0, "creation_date": 1437588451, "post_id": 31570447, "comment_id": 51096371, "body": "@Pewds if the usage of totalRow and totalEl is correct then the function is correct."}, {"owner": {"reputation": 65, "user_id": 5122834, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/2e396f78b921cee95ba2d0cb80b47070?s=128&d=identicon&r=PG&f=1", "display_name": "Pewds", "link": "https://stackoverflow.com/users/5122834/pewds"}, "edited": false, "score": 0, "creation_date": 1437588655, "post_id": 31570447, "comment_id": 51096511, "body": "Hi vlad, I have this error: <code>a value of type &quot;int **&quot; cannot be used to initialize an entity of type &quot;int *&quot;</code> at  <code>int *q = p</code>. Is there something wrong with your code?"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1437588341, "last_edit_date": 1437588341, "creation_date": 1437587435, "answer_id": 31570447, "question_id": 31570191, "link": "https://stackoverflow.com/questions/31570191/how-to-access-elements-by-using-pointer-instead-of-array/31570447#31570447", "title": "How to access elements by using pointer instead of array", "body": "<p>First of all it is obvious that this statement in the function </p>\n\n<pre><code>arr[i] = &amp;totalCol [0];\n</code></pre>\n\n<p>is wrong. It does not make sense.</p>\n\n<p>You declared the function</p>\n\n<pre><code>int** constructSparseMatrix(int *totalRow, int *totalCol, int totalEl);\n</code></pre>\n\n<p>as having the first and second parameters as pointers but are trying to pass integer literals 5 and 3 to it in the call</p>\n\n<pre><code>int** arr = constructSparseMatrix(5,3,totalEl);\n</code></pre>\n\n<p>You could write for example</p>\n\n<pre><code>int totalRow = 5;\nint totalCol = 3;\n</code></pre>\n\n<p>//...</p>\n\n<pre><code>int** arr = constructSparseMatrix( &amp;totalRow, &amp;totalCol, totalEl );\n</code></pre>\n\n<p>But I do not see a sense to declare these parameters like pointers because they are in fact constants within the function that is they are not changed.</p>\n\n<p>And the variable names confuse the reader. For example I would expect that <code>totalRow</code> is used within the function in statement</p>\n\n<pre><code>int** arr = new int*[totalRow];\n</code></pre>\n\n<p>instead of <code>totalEl</code></p>\n\n<p>If you want to use pointers within the function then the function can look like</p>\n\n<pre><code>int** constructSparseMatrix( int totalRow, int totalCol, int totalEl ) \n{\n    int** arr = new int*[totalEl];\n\n    for ( int **p = arr; p &lt; arr + totalEl; ++p ) \n    {\n        *p = new int[totalCol];\n        for ( int *q = *p; q &lt; *p + totalCol; ++q ) \n        {\n            if ( q == *p + totalCol - 1 ) \n            {\n                *q = rand () % 101;\n            } \n            else \n            {\n                *q = rand () % totalRow + 1;\n            }\n        }\n    }\n\n    return arr;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5122834, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/2e396f78b921cee95ba2d0cb80b47070?s=128&d=identicon&r=PG&f=1", "display_name": "Pewds", "link": "https://stackoverflow.com/users/5122834/pewds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 31570447, "answer_count": 2, "score": -1, "last_activity_date": 1437588341, "creation_date": 1437586565, "question_id": 31570191, "link": "https://stackoverflow.com/questions/31570191/how-to-access-elements-by-using-pointer-instead-of-array", "title": "How to access elements by using pointer instead of array", "body": "<p>I've this piece of code which is working by now(at least):</p>\n\n<pre><code>int** constructSparseMatrix(int totalRow, int totalCol, int totalEl) {\n    int** arr = new int*[totalEl];\n    //int x = 0;\n    for(int i = 0; i &lt; totalEl; i++) {\n        arr[i] = new int[totalCol];\n        for (int k = 0; k &lt; totalCol; k++) {\n            if(k == totalCol - 1) {\n                arr[i][totalCol - 1] = rand () % 101;\n            } else {\n                arr[i][k] = rand () % totalRow + 1;\n            }\n        }\n    }\n    return arr;\n}\n</code></pre>\n\n<p>and I'm trying to access the element inside by using pointer instead of array and here is my try:</p>\n\n<pre><code>int** constructSparseMatrix(int *totalRow, int *totalCol, int totalEl) {\n    int** arr = new int*[totalEl];\n    //int x = 0;\n    for(int i = 0; i &lt; totalEl; i++) {\n        arr[i] = &amp;totalCol [0];\n        for (int k = 0; k &lt; *totalCol; k++) {\n            if(k == *totalCol - 1) {\n                arr[i][*totalCol - 1] = rand () % 101;\n            } else {\n                arr[i][k] = rand () % *totalRow + 1;\n            }\n        }\n    }\n    return arr;\n}\n</code></pre>\n\n<p>But when I initialize the same way as the working function:</p>\n\n<pre><code>int** arr = constructSparseMatrix(5,3,totalEl);\n</code></pre>\n\n<p>then I receive this error:</p>\n\n<pre><code>argument of type \"int\" is incompatible with parameter of type \"int *\"\n</code></pre>\n\n<p>First of all, is my conversion from array to pointer version coded properly? If it's correct, how can I initialize it to avoid above error?</p>\n"}, {"tags": ["c++", "design-patterns", "circular-dependency"], "comments": [{"owner": {"reputation": 4261, "user_id": 2893496, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/WMdEs.png?s=128&g=1", "display_name": "v010dya", "link": "https://stackoverflow.com/users/2893496/v010dya"}, "edited": false, "score": 0, "creation_date": 1437585329, "post_id": 31569731, "comment_id": 51094523, "body": "Couldn&#39;t you make a helper class, which does both updates, and when you need to update, you call the object of it. In constructor it would take a pointer to two other objects and do updates in a manner that is consistent."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1437587165, "post_id": 31569731, "comment_id": 51095634, "body": "You could try an event based approach: Put user interactions into a event and send that to all viewers, and each viewer is filtering for the events it&#39;s interested in."}], "answers": [{"tags": [], "owner": {"reputation": 1999, "user_id": 2866898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c3f789c8dff46eed3cfa22ee7abc00?s=128&d=identicon&r=PG", "display_name": "Arkanosis", "link": "https://stackoverflow.com/users/2866898/arkanosis"}, "is_accepted": false, "score": 2, "last_activity_date": 1437585463, "creation_date": 1437585463, "answer_id": 31569858, "question_id": 31569731, "link": "https://stackoverflow.com/questions/31569731/mutual-update-between-two-classes-of-same-superclass/31569858#31569858", "title": "Mutual update between two classes of same superclass", "body": "<p>Isn't the information to be shared between viewers visible in a <code>Viewer</code>, that is, in the base class? If so, then a abstract <code>Viewer</code> needs to know how to update from another abstract <code>Viewer</code> but there's no need for each concrete <code>Viewer</code> such as <code>PatternViewer</code> or <code>MeshViewer</code> to know about another concrete <code>Viewer</code> \u2014 in other word, there's no need for a circular dependency.</p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1437586432, "creation_date": 1437586432, "answer_id": 31570148, "question_id": 31569731, "link": "https://stackoverflow.com/questions/31569731/mutual-update-between-two-classes-of-same-superclass/31570148#31570148", "title": "Mutual update between two classes of same superclass", "body": "<p>The standard pattern for this case is MVC (Model, View, Controller).</p>\n\n<p>With this pattern, neither viewer knows about the other at all. The data that's shared between the views is in the Model. When a viewer needs to update something, it updates the model (though if you're really following MVC, the views should just display output, and input should come from the controllers).</p>\n\n<p>Along with the raw data, the model keeps a list of all current views on the data. When the model gets updated, it propagates the change(s) out to all the views.</p>\n\n<p>Note that there are many variations on MVC. A few eliminate the \"controller\" part in favor of something closer to what you're doing: with the Views doing both input and output (but still moving the common data into a Model).</p>\n"}], "owner": {"reputation": 550, "user_id": 354722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f3038cad221663a6f50f86c142b85e1?s=128&d=identicon&r=PG", "display_name": "Moos Hueting", "link": "https://stackoverflow.com/users/354722/moos-hueting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1437586432, "creation_date": 1437585066, "question_id": 31569731, "link": "https://stackoverflow.com/questions/31569731/mutual-update-between-two-classes-of-same-superclass", "title": "Mutual update between two classes of same superclass", "body": "<p>I have an OpenGL application with two main parts (viewers), with a main loop as follows:</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n    gp::viewers::PatternViewer pViewer;\n    gp::viewers::MeshViewer mViewer;\n\n    while (!pViewer.shouldClose() &amp;&amp; !mViewer.shouldClose())\n    {\n        pViewer.makeCurrent();\n        pViewer.mainLoop();\n        pViewer.swap();\n\n        mViewer.makeCurrent();\n        mViewer.mainLoop();\n        mViewer.swap();\n\n        glfwWaitEvents();\n    }\n\n    glfwTerminate();\n\n    return 0;\n\n}\n</code></pre>\n\n<p>It happens that a user interaction with one viewer should propagate a change to the other viewer. My gut instinct says to update the loop as follows:</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n    gp::viewers::PatternViewer pViewer;\n    gp::viewers::MeshViewer mViewer;\n\n    while (!pViewer.shouldClose() &amp;&amp; !mViewer.shouldClose())\n    {\n        pViewer.makeCurrent();\n        pViewer.mainLoop();\n        pViewer.swap();\n\n        mViewer.makeCurrent();\n        mViewer.mainLoop();\n        mViewer.swap();\n\n        // UPDATE HERE\n        mViewer.update(pViewer);\n        pViewer.update(mViewer);\n\n        glfwWaitEvents();\n    }\n\n    glfwTerminate();\n\n    return 0;\n\n}\n</code></pre>\n\n<p>But in that case, PatternViewer needs to know about MeshViewer, and MeshViewer needs to know about PatternViewer - a circular dependency. Moreover, it isn't clear if mViewer.update(pViewer) should update pViewer with whatever updates are available from mViewer, or vice versa. It seems to me that it should be the former - mViewer should know what updates to propagate, not pViewer.</p>\n\n<p>It should be mentioned that PatternViewer and MeshViewer both inherit from abstract superclass Viewer.</p>\n\n<p>Is there any way of resolving this circular dependency? Is there an accepted way/design pattern for handling this case?</p>\n"}, {"tags": ["c++", "templates", "c++11", "template-argument-deduction"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1437585716, "post_id": 31569716, "comment_id": 51094761, "body": "This has <i>poof</i> written all over it."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1437586109, "post_id": 31569716, "comment_id": 51094991, "body": "<code>Q</code> isn&#39;t in a deduced context. But why on earth are you doing this?"}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1437586427, "post_id": 31569716, "comment_id": 51095182, "body": "@Captain O.  I don&#39;t understand!"}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1437586571, "post_id": 31569716, "comment_id": 51095272, "body": "@T.C.  Well we have this home grown smart pointer class, and a very large legacy codebase.  We have to manually downcast in a 100,000 places.  I&#39;m overhauling the class and thought I&#39;d make it implicitly downcast.  I don&#39;t want it to implicit upcast.  I didn&#39;t think this was a bad idea.  Is it?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1437587025, "post_id": 31569716, "comment_id": 51095547, "body": "I can see the use case for an <code>operator CFoo&lt;Q&gt;()</code>, though it might be easier to use a converting constructor instead. What you are currently doing is absolutely a bad idea. That C-style cast is a <code>reinterpret_cast</code> plus a <code>const_cast</code>, hint, hint..."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1437587110, "post_id": 31569716, "comment_id": 51095601, "body": "@johnnycrash Don&#39;t add answers to the questions."}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1437587177, "post_id": 31569716, "comment_id": 51095641, "body": "@Barry, darn.  Should I take it out?"}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 0, "creation_date": 1437587251, "post_id": 31569716, "comment_id": 51095675, "body": "@TC, well I wanted to ensure that I went the highest performance route.  I figured, probably incorrectly, that creating temporary objects all over the place would be slower.  Is this what you mean by a converting constructor?"}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 0, "creation_date": 1437593835, "post_id": 31569716, "comment_id": 51099742, "body": "Can someone tell me what &quot;this has poof written all over it means?&quot;  I still don&#39;t get it."}], "answers": [{"comments": [{"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 0, "creation_date": 1437586806, "post_id": 31570089, "comment_id": 51095405, "body": "YOU ROCK!  Now, can you fix c++ so in version c++20 we take this awesome template filtering functionality and make it SIMPLE."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 0, "creation_date": 1437586854, "post_id": 31570089, "comment_id": 51095440, "body": "@johnnycrash What&#39;s C++20?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1437587104, "post_id": 31570089, "comment_id": 51095596, "body": "This solves the deduction problem, but the bigger problem with OP&#39;s code is that virtually any use of the returned reference causes UB."}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 0, "creation_date": 1437587120, "post_id": 31570089, "comment_id": 51095605, "body": "@Barry, c++20 doesn&#39;t exist yet, other than in my head.  Its where c++ expands and simplifies SFINAE."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1437587439, "post_id": 31570089, "comment_id": 51095761, "body": "@T.C. Very good point, I get carried away with template puzzles sometimes. Updated my answer."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1437587675, "post_id": 31570089, "comment_id": 51095900, "body": "In C++1z, we have <code>template&lt;class Q&gt; requires std::is_base_of&lt;T,Q&gt;{}() CFoo(CFoo&lt;Q&gt; const&amp;) {}</code> which is marginally clearer than the conversion constructor example above."}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 0, "creation_date": 1437587695, "post_id": 31570089, "comment_id": 51095909, "body": "Well it&#39;s a smart pointer class.  The const cast is because I stole the code from our smart pointer to constant.  So would the code be as big a problem if we eliminated const from the question?"}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1437587809, "post_id": 31570089, "comment_id": 51095976, "body": "@Yakk.  I think that is going in the right direction.  Whenever I try to code in other languages without c++ templates I don&#39;t care how crazy they look, I need the power.  My one pitiful gripe is that C++ seems a bit verbose right now in this area."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1437587423, "last_edit_date": 1495540507, "creation_date": 1437586212, "answer_id": 31570089, "question_id": 31569716, "link": "https://stackoverflow.com/questions/31569716/sfinae-to-enable-cast-operator-only-from-derived-to-base-class/31570089#31570089", "title": "SFINAE to enable cast operator only from derived to base class", "body": "<p>According to [temp.deduct.conv]:</p>\n\n<blockquote>\n  <p>Template argument deduction is done by comparing the return type of the conversion function template (call\n  it P) with the type that is required as the result of the conversion (call it A; see 8.5, 13.3.1.5, and 13.3.1.6\n  for the determination of that type) as described in 14.8.2.5.</p>\n</blockquote>\n\n<p>In the simple case:</p>\n\n<pre><code>template &lt;class Q&gt;\noperator CFoo&lt;Q&gt;&amp; const;\n</code></pre>\n\n<p>That's straightforward, we try to deduce <code>CFoo&lt;Q&gt;&amp;</code> against <code>CFoo&lt;A&gt;&amp;</code>. There's other rules in that section, but ultimately that deduction succeeds with <code>Q == A</code>.</p>\n\n<p>Both of your other attempts fail for the same reason. I'll pick the simpler one:</p>\n\n<pre><code>template &lt;class Q&gt;\noperator typename std::enable_if&lt;1, CFoo&lt;Q&gt;&amp;&gt;::type const;\n</code></pre>\n\n<p>Here, we're trying to deduce <code>typename std::enable_if&lt;1, CFoo&lt;Q&gt;&amp;&gt;::type</code>. This is a non-deduced context (it's a <em>nested-name-specifier</em>  of a type that was specified using a <em>qualified-id</em>), so deduction fails. So this conversion function won't be considered, so the assignment fails as no conversion is found.</p>\n\n<p>You need the return type to be a deduced context, so the SFINAE has to go here:</p>\n\n<pre><code>template &lt;class Q,\n          typename = std::enable_if_t&lt;std::is_base_of&lt;Q, T&gt;::value&gt;&gt;\noperator CFoo&lt;Q&gt;&amp; const;\n</code></pre>\n\n<p>That way, we have something to deduce (<code>CFoo&lt;Q&gt;&amp;</code>) - and the deduction can succeed (if <code>Q</code> is a base of <code>T</code>):</p>\n\n<pre><code>CFoo&lt;A&gt;&amp; a = b; // OK\nCFoo&lt;int&gt;&amp; i = b; // deduction failure on Q, so there's no viable conversion function\n                  // so this is an error\n</code></pre>\n\n<hr />\n\n<p>That said, while I got carried away with solving template puzzles, as <a href=\"https://stackoverflow.com/questions/31569716/sfinae-to-enable-cast-operator-only-from-derived-to-base-class/31570089?noredirect=1#comment51095596_31570089\">T.C.</a> points out, this really isn't a good solution because:</p>\n\n<pre><code>return *(CFoo&lt;Q&gt;*)this;\n</code></pre>\n\n<p>just does a <code>reinterpret_cast</code> (and a <code>const_cast</code>) so it really cannot possibly be doing anything reasonable and you will almost certainly (unless <code>CFoo</code> is trivial) end up with undefined behavior by trying to access its members with the wrong type. </p>\n\n<p>You probably instead want to add a conversion <em>constructor</em> rather than a conversion <em>function</em>:</p>\n\n<pre><code>template &lt;typename Q,\n          typename = std::enable_if_t&lt;std::is_base_of&lt;T, Q&gt;::value&gt;&gt;\nCFoo(CFoo&lt;Q&gt; const&amp; ) { }\n</code></pre>\n\n<p>That way, when you do:</p>\n\n<pre><code>CFoo&lt;A&gt; a = b; // a is not a reference anymore\n</code></pre>\n\n<p>You are constructing a <em>new</em> object that will necessarily be valid. </p>\n"}], "owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 895, "favorite_count": 1, "accepted_answer_id": 31570089, "answer_count": 1, "score": 2, "last_activity_date": 1437587423, "creation_date": 1437585034, "last_edit_date": 1437587083, "question_id": 31569716, "link": "https://stackoverflow.com/questions/31569716/sfinae-to-enable-cast-operator-only-from-derived-to-base-class", "title": "SFINAE to enable cast operator only from derived to base class", "body": "<p>I have a class template <code>CFoo&lt;T&gt;</code>. I want to allow implicit casts to other instantiations of <code>CFoo</code>, but only for those whose template argument is a base class of <code>T</code>. </p>\n\n<p>I tried to use SFINAE, but neither of my attempts worked on any compiler I tried (VC 2012 or gcc):</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;class T&gt; class CFoo {\npublic:\n    template &lt;class Q&gt;  operator\n     // typename std::enable_if&lt;std::is_base_of&lt;Q, T&gt;::value, CFoo&lt;Q&gt;&amp;&gt;::type   // SHOULD WORK?\n     // typename std::enable_if&lt;1, CFoo&lt;Q&gt;&amp;&gt;::type                              // SHOULD WORK?\n     CFoo&lt;Q&gt;&amp;  // compiles, but doesn't restrict on Q like I want\n     () const {\n        return *(CFoo&lt;Q&gt;*)this;\n    }\n};\n\nclass A {};\nclass B : public A {};\n\nint main(int argc, char* argv[])\n{\n    CFoo&lt;B&gt; b;\n    CFoo&lt;A&gt;&amp; a = b;\n    return 0;\n}\n</code></pre>\n\n<p>Why don't either of the commented out attempts at SFINAE work here? In both cases I just get an error for an invalid initialization of <code>a</code>, as if my operator didn't get called. </p>\n"}, {"tags": ["python", "c++", "syntax-error", "swig", "build-error"], "comments": [{"owner": {"reputation": 1115, "user_id": 2196304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9f4yn.jpg?s=128&g=1", "display_name": "KymikoLoco", "link": "https://stackoverflow.com/users/2196304/kymikoloco"}, "edited": false, "score": 0, "creation_date": 1437585214, "post_id": 31569607, "comment_id": 51094450, "body": "ITPP_EXPORT may not be defined for SWIG, since you are not using the -includeall flag"}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "reply_to_user": {"reputation": 1115, "user_id": 2196304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9f4yn.jpg?s=128&g=1", "display_name": "KymikoLoco", "link": "https://stackoverflow.com/users/2196304/kymikoloco"}, "edited": false, "score": 0, "creation_date": 1437585229, "post_id": 31569607, "comment_id": 51094460, "body": "The answer I provided will most likely get you a bit further, but probably not all the way. An important thing to know is that SWIG does not recurse headers, so all header must appear in the correct order in your .i file. Try to find some examples in here. @KymikoLoco yes, exports are not understood by SWIG"}, {"owner": {"reputation": 1115, "user_id": 2196304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9f4yn.jpg?s=128&g=1", "display_name": "KymikoLoco", "link": "https://stackoverflow.com/users/2196304/kymikoloco"}, "edited": false, "score": 0, "creation_date": 1437585388, "post_id": 31569607, "comment_id": 51094556, "body": "I didn&#39;t realize it didn&#39;t understand them at all, good to know."}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 5144595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e90b1f8e3d41c05fb1bd74d8cd10ac8?s=128&d=identicon&r=PG&f=1", "display_name": "majorpain1588", "link": "https://stackoverflow.com/users/5144595/majorpain1588"}, "edited": false, "score": 0, "creation_date": 1437585778, "post_id": 31569724, "comment_id": 51094785, "body": "Thanks!  Adding that #define seemed to do the trick once I got it in the right place in the .i file."}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "reply_to_user": {"reputation": 179, "user_id": 5144595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e90b1f8e3d41c05fb1bd74d8cd10ac8?s=128&d=identicon&r=PG&f=1", "display_name": "majorpain1588", "link": "https://stackoverflow.com/users/5144595/majorpain1588"}, "edited": false, "score": 0, "creation_date": 1437585899, "post_id": 31569724, "comment_id": 51094852, "body": "Your welcome. The SWIG compiler is pretty picky when it comes to passing headers. When you start wrapping you own stuff, it reveals any inconsistent inclusion of headers."}], "tags": [], "owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "is_accepted": true, "score": 2, "last_activity_date": 1437585056, "creation_date": 1437585056, "answer_id": 31569724, "question_id": 31569607, "link": "https://stackoverflow.com/questions/31569607/swig-syntax-error/31569724#31569724", "title": "SWIG Syntax Error", "body": "<p>Exports are not understood by SWIG</p>\n\n<p>I usually add a</p>\n\n<pre><code>#define ITPP_EXPORT\n</code></pre>\n\n<p>in your .i file after the inclusion of the C/C++ headers and before you include them using</p>\n\n<pre><code>%include \"Someheader.h\"\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 5144595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e90b1f8e3d41c05fb1bd74d8cd10ac8?s=128&d=identicon&r=PG&f=1", "display_name": "majorpain1588", "link": "https://stackoverflow.com/users/5144595/majorpain1588"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1064, "favorite_count": 0, "accepted_answer_id": 31569724, "answer_count": 1, "score": 1, "last_activity_date": 1437585056, "creation_date": 1437584652, "question_id": 31569607, "link": "https://stackoverflow.com/questions/31569607/swig-syntax-error", "title": "SWIG Syntax Error", "body": "<p>I'm trying to compile some SWIG bindings from a wireless communications library (<a href=\"http://www.yonch.com/wireless\" rel=\"nofollow\">http://www.yonch.com/wireless</a>) that also uses the IT++ library.  I am using SWIG version 2.0.11 on Ubuntu 14.04.</p>\n\n<p>This is the error I am getting when trying to build:</p>\n\n<p><code>/usr/include/itpp/base/binary.h:162: Error: Syntax error in input(1)</code></p>\n\n<p>Here is line 162 from binary.h:</p>\n\n<p><code>ITPP_EXPORT std::ostream &amp;operator&lt;&lt;(std::ostream &amp;output, const bin &amp;inbin);</code></p>\n\n<p>If the rest of that file is needed it can be found here: <a href=\"http://montecristo.co.it.pt/itpp/binary_8h_source.html\" rel=\"nofollow\">http://montecristo.co.it.pt/itpp/binary_8h_source.html</a></p>\n\n<p>This is the SWIG command line call that is being used:</p>\n\n<p><code>/usr/bin/swig -c++ -python -I/home/user/anaconda/include/python2.7 -I../../../include -I/usr/include -I../../../bindings/itpp -I../../../bindings/itpp/.. -DHAVE_CONFIG_H -o base_sparse.cpp ../../../bindings/itpp/base_sparse.i</code></p>\n\n<p>I have almost no experience with SWIG and can't seem to see what about the code would be causing that syntax error. Any insights would be greatly appreciated!</p>\n"}, {"tags": ["c++", "qt", "qabstractitemmodel"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1437587170, "post_id": 31569424, "comment_id": 51095639, "body": "Side note: A model should never hold any references to the view, since it is perfectly valid to use a model with zero views, as well as with &quot;views&quot; that don&#39;t subclass <code>QAbstractItemView</code>. The <code>deleteComponent</code> method belongs somewhere outside of the model class. Most likely, you should subclass <code>QTreeView</code>."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1437587406, "post_id": 31569424, "comment_id": 51095740, "body": "I&#39;d also <code>Q_ASSERT(child_index.isValid())</code>, since it doesn&#39;t have to be valid."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1437587564, "post_id": 31569424, "comment_id": 51095839, "body": "What is the call stack when it crashes? You probably shouldn&#39;t be calling <code>deleteComponent</code> while any view code you don&#39;t have control over is on the call stack."}, {"owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1437593710, "post_id": 31569424, "comment_id": 51099673, "body": "Update: upon further inspection, the crash happens somewhere between the call to <code>beginRemoveRows</code> and the call to <code>delete_child</code>.  There are several calls to <code>projectModel::parent()</code> during the remove-rows process, and it is one of these where it finally crashes.  I suspect I have a <code>QModelIndex</code> stored somewhere that is becoming invalidated during this process.  Thanks for your help so far, @KubaOber."}, {"owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1437770024, "post_id": 31569424, "comment_id": 51187974, "body": "The call stack is useless in this case because the invalid QModelIndex wasn&#39;t invoked until long after the model structure changed.  By that time, the offending function had already returned and disappeared from the call stack.  This was an especially difficult bug to fix for that reason."}], "answers": [{"comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1437587982, "post_id": 31570324, "comment_id": 51096091, "body": "<i>&quot;which models support persistent indices&quot;</i> Actually, all models. If a model fails  to update its persistent indexes it&#39;s a bug in the model."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1437592668, "post_id": 31570324, "comment_id": 51099049, "body": "@peppe Since the documentation doesn&#39;t say that they are optional, you&#39;d think they are not. But not all models support them. It&#39;s a &quot;bug&quot; in the sense that nobody bothered implementing them. Qt&#39;s views don&#39;t use them, so it&#39;s not a big deal if you limit yourself to those."}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1437593297, "post_id": 31570324, "comment_id": 51099438, "body": "Sorry, what do you mean with that? Which models &quot;don&#39;t support&quot; them?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1437593455, "post_id": 31570324, "comment_id": 51099521, "body": "@peppe AFAIK, <code>QStandardItemModel</code> does, and that&#39;s it. SQL models don&#39;t, and these are the ones that really could use them - thus you can&#39;t re-sort an SQL table model while preserving selections :( Simple models like <code>QStringListModel</code> don&#39;t either IIRC. Qt&#39;s old model-view system needs a serious looking after, but I&#39;ve been too busy to take any of it up."}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1437598386, "post_id": 31570324, "comment_id": 51102452, "body": "I think what you&#39;re trying to say is that SQL models don&#39;t support &quot;layout changed&quot; notifications (such as sorting), instead they just reset themselves because they need to run a different SQL query. But this doesn&#39;t mean they don&#39;t support persistent indexes -- they do. For instance QSqlTableModel supports row insertion, which means the persistent indexes <i>do</i> get updated."}, {"owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "edited": false, "score": 3, "creation_date": 1437600482, "post_id": 31570324, "comment_id": 51103518, "body": "I think this fixed it.  I had a few objects that were storing <code>QModelIndex</code>s as member variables, so possibly they became invalidated when the model structure changed.  I got rid of those member indices and so far I haven&#39;t had any crashes.  The problem was intermittent to begin with, so I&#39;m not 100% it&#39;s fixed.  Will mark as solved anyway.  Thanks @KubaOber."}, {"owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "edited": false, "score": 3, "creation_date": 1437770366, "post_id": 31570324, "comment_id": 51188139, "body": "Another update: I consider my problem officially solved now.  There were two main causes: one, I was changing the structure of the model externally, without notifying the model, and second, I was storing QModelIndexes in objects where they outlived the actual indexes that they represented.  On top of that, some of those objects were being leaked (not part of <i>this</i> problem, but a problem none the less).  I feel like I should quit my job and go work at McDonalds."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "edited": false, "score": 1, "creation_date": 1437770509, "post_id": 31570324, "comment_id": 51188219, "body": "@Carlton We all have to learn somehow. Good job on nailing down the other problems!"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 9, "last_activity_date": 1491224922, "last_edit_date": 1491224922, "creation_date": 1437586989, "answer_id": 31570324, "question_id": 31569424, "link": "https://stackoverflow.com/questions/31569424/qmodelindex-becomes-invalid-when-removing-rows/31570324#31570324", "title": "QModelIndex becomes invalid when removing rows", "body": "<p>This is fully expected.</p>\n\n<p>Non-persistent indices are valid until you change the structure of the model. A structural change is any change that is signaled <em>other</em> than by emitting <code>dataChanged</code>.</p>\n\n<p>Structural changes must be considered barriers to index lifetime: you must discard any non-persistent indices held from before a structural change.</p>\n\n<p>Depending on where <code>deleteComponent</code> is called, likely what happens is that the caller holds some indices, the <code>deleteComponent</code> invalidates them all, and you're in undefined behavior territory from there onwards.</p>\n\n<p>You need to use persistent indices if you want them to stay valid over structural changes, and even then they'll only be valid if the given item still exists. If you're using your own model, you need to explicitly support persistent indices, and the users of your model must use them.</p>\n"}], "owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1857, "favorite_count": 0, "accepted_answer_id": 31570324, "answer_count": 1, "score": 5, "last_activity_date": 1491224922, "creation_date": 1437584076, "question_id": 31569424, "link": "https://stackoverflow.com/questions/31569424/qmodelindex-becomes-invalid-when-removing-rows", "title": "QModelIndex becomes invalid when removing rows", "body": "<p>I'm subclassing <code>QAbstractItemModel</code> to display items in a <code>QTreeView</code>, and within this subclass (<code>projectModel</code>), I have a function to delete the currently-selected index in the tree view.  <code>Component</code> is the class used to represent all the members of the model:</p>\n\n<pre><code>void\nprojectModel::deleteComponent()\n{\n    QModelIndex child_index = _treeview-&gt;selectionModel()-&gt;currentIndex();\n    Component* child = static_cast&lt;Component*&gt;(child_index.internalPointer());\n\n    Component* parent = child-&gt;Parent();\n    QModelIndex parent_index = createIndex(parent-&gt;row(), 0, parent);\n\n    int row = child-&gt;row();\n\n    beginRemoveRows(parent_index, row, row);\n    parent-&gt;delete_child(child);\n    endRemoveRows();\n}\n</code></pre>\n\n<p>The parent and child indicies and raw pointers are good just before the call to <code>beginRemoveRows</code>; debugger shows that they point to the correct item and its parent.  However, the program crashes after calling <code>beginRemoveRows</code>.  Specifically, it crashes in  <code>projectModel::parent()</code>:</p>\n\n<pre><code>QModelIndex\nprojectModel::parent(const QModelIndex &amp;index) const\n{    \n    if (!index.isValid())\n        return QModelIndex();\n\n    Component* item = getItem(index);        //Fails to cast index internal pointer to a valid Component*\n    Component* parentItem = item-&gt;Parent();\n\n    if (parentItem == _rootnode)\n        return QModelIndex();\n\n    return createIndex(parentItem-&gt;row(), 0, parentItem);\n}\n</code></pre>\n\n<p>When I break on the crash and examine the debugger output, it shows that the variable <code>item</code> in the <code>parent()</code> function is garbage.  Somehow it looks like my <code>QModelIndex</code> gets corrupted between the call to <code>deleteComponent</code> and the call to <code>parent</code>.  Is there anything blatantly wrong with what I'm doing, or is the problem perhaps more subtle?</p>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "edited": false, "score": 0, "creation_date": 1437584569, "post_id": 31569401, "comment_id": 51094069, "body": "I read somewhere that you are supposed to pass built in types by value for optimum efficiency."}, {"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "reply_to_user": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "edited": false, "score": 0, "creation_date": 1437584746, "post_id": 31569401, "comment_id": 51094179, "body": "@StraightLine Interesting. Any sources? I guessed that for variables in general, but what about this bunch that are constant? Can they be put somewhere in a fast access memory and have better performance than actually sending 65K copies of them?"}, {"owner": {"reputation": 2907, "user_id": 714967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18f3d9bcf8ec28c43f47f98cfc60c031?s=128&d=identicon&r=PG", "display_name": "pQB", "link": "https://stackoverflow.com/users/714967/pqb"}, "edited": false, "score": 0, "creation_date": 1437585068, "post_id": 31569401, "comment_id": 51094375, "body": "Some optimizations depends on the compute capability of your device. You can exploit the 64KB of constant memory. You can also arrange all the constant values in an array and tell the compiler that this memory space will remains constant."}], "answers": [{"comments": [{"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1437585529, "post_id": 31569726, "comment_id": 51094641, "body": "Im running in a quite decent Tesla 40K GPU. So you feel that its better to just pass around 20 input parameters to the kernel as <code>int const1x</code>? Rather than &quot;forcing&quot; the GPU to use an specific memory? (if you can even do this)."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "reply_to_user": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 3, "creation_date": 1437585820, "post_id": 31569726, "comment_id": 51094806, "body": "I wouldn&#39;t pass forty scalars by value, I would pass them in a struct by value, but yes, the compiler knows best and there is no better way to do it. Actually, there is a better way for integer constants which might have a limited range of values - make them template parameters and instantiate different kernel versions. The compiler will do a lot of useful optimisations when the constants are known at compile time"}, {"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1437585982, "post_id": 31569726, "comment_id": 51094908, "body": "WOW thanks! (smart compiler). Could you please (of you don&#39;t mind) add a couple of links or code snippets of how you could pass the struct by value or make the templates? Apologize, still learning and everything feels a bit overwhelming."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "reply_to_user": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1437591367, "post_id": 31569726, "comment_id": 51098241, "body": "@AnderBiguri: I&#39;ve made an edit with some crude examples that might get you started. That is about the best I can do."}, {"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1437592400, "post_id": 31569726, "comment_id": 51098867, "body": "Thats excelent actually. Thank you very much, your effort is greatly appreciated! keep on with the good work"}, {"owner": {"reputation": 7772, "user_id": 150884, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5vmQJ.jpg?s=128&g=1", "display_name": "hertzsprung", "link": "https://stackoverflow.com/users/150884/hertzsprung"}, "edited": false, "score": 0, "creation_date": 1567786539, "post_id": 31569726, "comment_id": 102081078, "body": "I didn&#39;t realise that <code>const</code> kernel arguments would be put into constant memory.  Is this mentioned somewhere in the CUDA documentation, do you know?"}], "tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": true, "score": 17, "last_activity_date": 1437591289, "last_edit_date": 1495541303, "creation_date": 1437585059, "answer_id": 31569726, "question_id": 31569401, "link": "https://stackoverflow.com/questions/31569401/fastest-or-most-elegant-way-of-passing-constant-arguments-to-a-cuda-kernel/31569726#31569726", "title": "Fastest (or most elegant) way of passing constant arguments to a CUDA kernel", "body": "<p>Just pass them by value. The compiler will automagically put them in the optimal place to facilitate cached broadcast to all threads in each block - either shared memory in compute capability 1.x devices, or constant memory/constant cache in compute capability >= 2.0 devices.</p>\n\n<p>For example, if you had a long list of arguments to pass to the kernel, a struct passed by value is a clean way to go:</p>\n\n<pre><code>struct arglist {\n    float magicfloat_1;\n    float magicfloat_2;\n    //......\n    float magicfloat_19;\n    int magicint1;\n    //......\n};\n\n__global__ void kernel(...., const arglist args)\n{\n    // you get the idea\n}\n</code></pre>\n\n<p>[standard disclaimer: written in browser, not real code, caveat emptor]</p>\n\n<p>If it turned out one of your <code>magicint</code> actually only took one of a small number of values which you know beforehand, then templating is an extremely powerful tool:</p>\n\n<pre><code>template&lt;int magiconstant1&gt;\n__global__ void kernel(....)\n{\n    for(int i=0; i &lt; magconstant1; ++i) {\n       // .....\n    }\n}\n\ntemplate kernel&lt;3&gt;(....);\ntemplate kernel&lt;4&gt;(....);\ntemplate kernel&lt;5&gt;(....);\n</code></pre>\n\n<p>The compiler is smart enough to recognise <code>magconstant</code> makes the loop trip known at compile time and will automatically unroll the loop for you. Templating is a <a href=\"https://stackoverflow.com/a/6179580/681865\">very powerful technique</a> for building fast, flexible codebases and you would be well advised to accustom yourself with it if you haven't already done so.</p>\n"}], "owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3242, "favorite_count": 6, "accepted_answer_id": 31569726, "answer_count": 1, "score": 12, "last_activity_date": 1437591289, "creation_date": 1437584007, "last_edit_date": 1437585370, "question_id": 31569401, "link": "https://stackoverflow.com/questions/31569401/fastest-or-most-elegant-way-of-passing-constant-arguments-to-a-cuda-kernel", "title": "Fastest (or most elegant) way of passing constant arguments to a CUDA kernel", "body": "<p>Lets say I want a CUDA kernel that needs to do lots of stuff, but there are dome parameters that are constant to all the kernels. this arguments are passed to the main program as an input, so they can not be defined in a <code>#DEFINE</code>.</p>\n\n<p>The kernel will run multiple times (around 65K) and it needs those parameters (and some other inputs) to do its maths.</p>\n\n<p>My question is: whats the fastest (or else, the most elegant) way of passing these constants to the kernels? </p>\n\n<p>The constants are 2 or 3 element length <code>float*</code> or <code>int*</code> arrays. They will be around 5~10 of these.</p>\n\n<hr>\n\n<p><strong>toy example</strong>: 2 constants <code>const1</code> and <code>const2</code></p>\n\n<pre><code>__global__ void kernelToyExample(int inputdata, ?????){\n        value=inputdata*const1[0]+const2[1]/const1[2];\n}\n</code></pre>\n\n<p>is it better</p>\n\n<pre><code>__global__ void kernelToyExample(int inputdata, float* const1, float* const2){\n        value=inputdata*const1[0]+const2[1]/const1[2];\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>__global__ void kernelToyExample(int inputdata, float const1x, float const1y, float const1z, float const2x, float const2y){\n        value=inputdata*const1x+const2y/const1z;\n}\n</code></pre>\n\n<p>or maybe declare them in some global read only memory and let the kernels read from there? If so, L1, L2, global? Which one?</p>\n\n<p>Is there a better way I don't know of?</p>\n\n<p>Running on a Tesla K40.</p>\n"}, {"tags": ["c++", "xml", "boost", "boost-propertytree"], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 103, "user_id": 5144623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x8iCl.jpg?s=128&g=1", "display_name": "Javier Buzano", "link": "https://stackoverflow.com/users/5144623/javier-buzano"}, "edited": false, "score": 0, "creation_date": 1437596254, "post_id": 31571253, "comment_id": 51101163, "body": "Note the documentation link :) Boost documentation is frequently terse, but patient."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 10, "last_activity_date": 1437589901, "creation_date": 1437589901, "answer_id": 31571253, "question_id": 31569365, "link": "https://stackoverflow.com/questions/31569365/how-to-manually-create-a-boost-ptree-with-xml-attributes/31571253#31571253", "title": "How to manually create a boost ptree with XML attributes?", "body": "<p>You use the \"fake\" node <code>&lt;xmlattr&gt;</code>: <a href=\"http://www.boost.org/doc/libs/1_46_1/doc/html/boost_propertytree/parsers.html#boost_propertytree.parsers.xml_parser\" rel=\"noreferrer\">http://www.boost.org/doc/libs/1_46_1/doc/html/boost_propertytree/parsers.html#boost_propertytree.parsers.xml_parser</a></p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/e5ff3fb2e6bc2d22\" rel=\"noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/property_tree/ptree.hpp&gt;\n#include &lt;boost/property_tree/xml_parser.hpp&gt;\n#include &lt;iostream&gt;\n\nusing boost::property_tree::ptree;\n\nint main() {\n\n    ptree pt;\n    pt.push_back(ptree::value_type(\"pi\", ptree(\"3.14159\")));\n    pt.put(\"pi.&lt;xmlattr&gt;.id\", \"pi_0\");\n\n    write_xml(std::cout, pt);\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;pi id=\"pi_0\"&gt;3.14159&lt;/pi&gt;\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 5144623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x8iCl.jpg?s=128&g=1", "display_name": "Javier Buzano", "link": "https://stackoverflow.com/users/5144623/javier-buzano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2904, "favorite_count": 2, "accepted_answer_id": 31571253, "answer_count": 1, "score": 9, "last_activity_date": 1437589901, "creation_date": 1437583909, "last_edit_date": 1437587423, "question_id": 31569365, "link": "https://stackoverflow.com/questions/31569365/how-to-manually-create-a-boost-ptree-with-xml-attributes", "title": "How to manually create a boost ptree with XML attributes?", "body": "<p>I've been using boost libraries to parse XML files and I have to create a ptree manually. I need to add an XML attribute to the ptree.  This is what the boost documentation suggests:</p>\n\n<pre><code>ptree pt;\npt.push_back(ptree::value_type(\"pi\", ptree(\"3.14159\")));\n</code></pre>\n\n<p>That adds a element with content, but I also need to add an attribute to the element.</p>\n\n<p>The code above produces:\n</p>\n\n<pre><code>&lt;pi&gt;3.14&lt;/pi&gt;\n</code></pre>\n\n<p>I need to add something like this: \n</p>\n\n<pre><code>&lt;pi id=\"pi_0\"&gt;3.14&lt;/pi&gt; \n</code></pre>\n\n<p>What do I need to change, to add the attribute <code>id=\"pi_0\"</code>?</p>\n"}, {"tags": ["c++", "class", "containers", "keyboard-events"], "comments": [{"owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1437586005, "post_id": 31569353, "comment_id": 51094924, "body": "What type is used to store <code>key.keysym.mod</code> and <code>key.keysym.sym</code>? Can you have them occupy different bits of a <code>long</code> (e.g. <code>key.keysym.mod &lt;&lt; 16 + key.keysym.sym</code>)and then use <code>long</code>&#39;s standard less-than comparator to store all the combinations in the same map?"}, {"owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1437586330, "post_id": 31569353, "comment_id": 51095120, "body": "If so it&#39;d be pretty easy to wrap an interface around the map that just translated (mod, sym) -&gt; long before doing anything with the map."}, {"owner": {"reputation": 1711, "user_id": 2415237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/dNPmt.png?s=128&g=1", "display_name": "Chemistpp", "link": "https://stackoverflow.com/users/2415237/chemistpp"}, "reply_to_user": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1437586595, "post_id": 31569353, "comment_id": 51095289, "body": "I guess according to SDL&#39;s page that the sym value is an integer but all it says is that it is a standard enum.  The mod value is Uint16 and there seems to be less than 256 so it&#39;s possible."}], "answers": [{"comments": [{"owner": {"reputation": 1711, "user_id": 2415237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/dNPmt.png?s=128&g=1", "display_name": "Chemistpp", "link": "https://stackoverflow.com/users/2415237/chemistpp"}, "edited": false, "score": 0, "creation_date": 1437594273, "post_id": 31570648, "comment_id": 51099965, "body": "Is it possible to combine this with what I am currently trying.  Where I define a operator&lt; for the struct which just holds the pressed keys code and mods as separate variables?  I tried to do this, but to reassign keys using [] then it keeps complaining I need to define some [] operator.    I could use the normal insert function into the ordered map, but apparently that doesn&#39;t let me reassign the functions later."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 1711, "user_id": 2415237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/dNPmt.png?s=128&g=1", "display_name": "Chemistpp", "link": "https://stackoverflow.com/users/2415237/chemistpp"}, "edited": false, "score": 0, "creation_date": 1437595327, "post_id": 31570648, "comment_id": 51100587, "body": "What exactly is the error message (compile time, right?) ? Is lookup using find working?"}, {"owner": {"reputation": 1711, "user_id": 2415237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/dNPmt.png?s=128&g=1", "display_name": "Chemistpp", "link": "https://stackoverflow.com/users/2415237/chemistpp"}, "edited": false, "score": 0, "creation_date": 1437597638, "post_id": 31570648, "comment_id": 51102040, "body": "I think I solved it.  I had a forward decleration of struct key when I declared my struct in the class.  The problem is that it wasn&#39;t part of Input and my struct is a public member of input.  So I can either make the struct a non member struct or forward declare struct from within the class."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": true, "score": 2, "last_activity_date": 1437587961, "creation_date": 1437587961, "answer_id": 31570648, "question_id": 31569353, "link": "https://stackoverflow.com/questions/31569353/data-structure-for-keyboardevents-c/31570648#31570648", "title": "Data Structure for KeyBoardEvents C++", "body": "<p>Add the meta keys to your maps key type:</p>\n\n<pre><code>struct Shortcut {\n bool shift;\n bool alt;\n // ...\n KeySym sym;\n struct Hasher {\n  // some hash algorithm\n };\n // also add equality operator\n};\n\nusing ShortcutsMap = unordered_map&lt;Shortcut, function&lt;void(void)&gt;, Shortcut::Hash&gt;;\n</code></pre>\n\n<p>Or, map the set of active / pressed keys to functions;</p>\n\n<pre><code>using ShortcutsMap = unordered_map&lt;unordered_set&lt;Key&gt;, function&lt;void(void)&gt;&gt;;\n</code></pre>\n\n<p>You need some <code>Key</code> class then, which is capable of holding every pressed key (including meta keys).</p>\n"}], "owner": {"reputation": 1711, "user_id": 2415237, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/dNPmt.png?s=128&g=1", "display_name": "Chemistpp", "link": "https://stackoverflow.com/users/2415237/chemistpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 31570648, "answer_count": 1, "score": 0, "last_activity_date": 1437595997, "creation_date": 1437583885, "last_edit_date": 1437595997, "question_id": 31569353, "link": "https://stackoverflow.com/questions/31569353/data-structure-for-keyboardevents-c", "title": "Data Structure for KeyBoardEvents C++", "body": "<p>I am working on an input system as part of a tutorial I am watching, and much to my google searching, I find only one method online for handling input via a switch statement in your application loop.  </p>\n\n<p>I can't find examples where the tutorial really takes in mod keys like shift, alt and ctrl.  I found enough that I can properly pull what the current mods are but I can not find a convenient way to achieve what I would like to do.</p>\n\n<p>My plan was to have an input class that is part of an application class.  The input can be passed to the window and game objects so that way I have a single input state system for the entire program. I wanted register callback functions from within the game or the window as necessary, and the only way I know how is via <code>&lt;functional&gt;</code>.  I thought I could have a <code>std::map&lt;key scancode,std::function&lt;void()&gt;&gt;</code> sort of situation.  However, since I need to account for modding of the key, is there a way to generate a unique key value combined of scancode and mods, for example <code>a</code>, <code>shift + a</code> and <code>ctrl+a</code>?</p>\n\n<p>Right now my solution I think is a bit hacked as I would need to have a unique <code>std::map</code> set for each modifier combination.  </p>\n\n<p>Current Registration (minus implementation of inserting the key/func pair into the map), but I would essentially need an individual map for each <code>if</code> block below.  Is there a better way to manage this?</p>\n\n<pre><code>void Register(SDL_KeyboardEvent key, std::function&lt;void()&gt; func ) {\n\n    if( !( key.keysym.sym == SDLK_LSHIFT || key.keysym.sym == SDLK_RSHIFT || key.keysym.sym == SDLK_LCTRL || key.keysym.sym == SDLK_RCTRL || key.keysym.sym == SDLK_LALT || key.keysym.sym == SDLK_RALT )) {\n\n        if( (( key.keysym.mod &amp; ( KMOD_LSHIFT | KMOD_RSHIFT )) &gt; 0 ) &amp;&amp; (( key.keysym.mod &amp; ( KMOD_LCTRL | KMOD_RCTRL )) &gt; 0 ) &amp;&amp; (( key.keysym.mod &amp; ( KMOD_LALT | KMOD_RALT ))  &gt; 0  )) {\n            std::cout &lt;&lt; \"Ctrl + Alt + Shift + \" &lt;&lt; key.keysym.sym  &lt;&lt; std::endl;\n        }\n        else if ( (( key.keysym.mod &amp; ( KMOD_LSHIFT |  KMOD_RSHIFT )) &gt; 0 ) &amp;&amp; (( key.keysym.mod &amp; ( KMOD_LCTRL | KMOD_RCTRL )) &gt; 0 )) {\n            std::cout &lt;&lt; \"Shift + Ctrl + \" &lt;&lt; key.keysym.sym &lt;&lt; std::endl;\n        }\n        else if ( (( key.keysym.mod &amp; ( KMOD_LSHIFT |  KMOD_RSHIFT )) &gt; 0 ) &amp;&amp; (( key.keysym.mod &amp; ( KMOD_LALT | KMOD_RALT ))  &gt; 0 )) {\n            std::cout &lt;&lt; \"Shift + Alt + \" &lt;&lt; key.keysym.sym &lt;&lt; std::endl;\n        }\n        else if ( (( key.keysym.mod &amp; ( KMOD_LCTRL | KMOD_RCTRL )) &gt; 0 ) &amp;&amp; (( key.keysym.mod &amp; ( KMOD_LALT | KMOD_RALT ))  &gt; 0 )) {\n            std::cout &lt;&lt; \"Ctrl + Alt + \" &lt;&lt; key.keysym.sym &lt;&lt; std::endl;\n        }\n        else if (( key.keysym.mod &amp; ( KMOD_LSHIFT |  KMOD_RSHIFT )) &gt; 0 ) {\n            std::cout &lt;&lt; \"Shift + \" &lt;&lt; key.keysym.sym &lt;&lt; std::endl;\n        }\n        else if (( key.keysym.mod &amp; ( KMOD_LALT | KMOD_RALT )) &gt; 0 ) {\n            std::cout &lt;&lt; \"Alt + \" &lt;&lt; key.keysym.sym &lt;&lt; std::endl;\n        }\n        else if (( key.keysym.mod &amp; ( KMOD_LCTRL | KMOD_RCTRL )) &gt; 0 ) {\n            std::cout &lt;&lt; \"Ctrl + \" &lt;&lt; key.keysym.sym &lt;&lt; std::endl;\n        }\n        else {\n            std::cout &lt;&lt; \"Unmodded \" &lt;&lt; key.keysym.sym &lt;&lt; \" MODS: \" &lt;&lt; key.keysym.mod &lt;&lt; std::endl;\n        }\n\n    }\n}\n</code></pre>\n\n<p>Currently:</p>\n\n<pre><code>std::map&lt;key,std::function&lt;void()&gt;&gt; Callbacks;\n\nstruct key {\n    SDL_Scancode code;\n    Uint16       kmod;\n\n    bool operator&lt;( const key &amp; okey) const {\n        return std::tie( code,kmod ) &lt; std::tie( okey.code,okey.kmod );\n    }\n};\n\nvoid Input::RegCallBack(SDL_Scancode k, Uint16 kmod, std::function&lt;void()&gt; func) {\nkey tkey; \ntkey.code = k;\ntkey.kmod = kmod;\n\nCallbacks[tkey] = func;  //Does not like this.\n\nreturn;\n}\n</code></pre>\n\n<p>Intellisense error is:</p>\n\n<blockquote>\n  <p>Error: no instance of overloaded function \"std::map&lt;_Kty,_Ty,_Pr,_Alloc>::insert [with _Kty=key,_Ty=std::function,_Pr=std::less,_Alloc=std::allocator>>]\" matches the argument list argument types are:( std::pair>)</p>\n  \n  <p>object type is: std::map, std::less, std::allocator>>> </p>\n</blockquote>\n\n<p>And the following is from the compiler output</p>\n\n<pre><code>1&gt;------ Build started: Project: 3D Game Tut, Configuration: Debug Win32 ------\n1&gt;Build started 7/22/2015 3:31:55 PM.\n1&gt;InitializeBuildStatus:\n1&gt;  Creating \"Debug\\3D Game Tut.unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\n1&gt;ClCompile:\n1&gt;  Input.cpp\n1&gt;c:\\users\\frizzlefry\\documents\\visual studio 2012\\projects\\3d game tut\\3d game tut\\input.cpp(65): error C2679: binary '[' : no operator found which takes a right-hand operand of type 'Input::key' (or there is no acceptable conversion)\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\map(173): could be 'std::function&lt;_Fty&gt; &amp;std::map&lt;_Kty,_Ty&gt;::operator [](key &amp;&amp;)'\n1&gt;          with\n1&gt;          [\n1&gt;              _Fty=void (void),\n1&gt;              _Kty=key,\n1&gt;              _Ty=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\map(190): or       'std::function&lt;_Fty&gt; &amp;std::map&lt;_Kty,_Ty&gt;::operator [](const key &amp;)'\n1&gt;          with\n1&gt;          [\n1&gt;              _Fty=void (void),\n1&gt;              _Kty=key,\n1&gt;              _Ty=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;          while trying to match the argument list '(std::map&lt;_Kty,_Ty&gt;, Input::key)'\n1&gt;          with\n1&gt;          [\n1&gt;              _Kty=key,\n1&gt;              _Ty=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;  Generating Code...\n1&gt;  Compiling...\n1&gt;  Game.cpp\n1&gt;c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\utility(201): error C2079: 'std::pair&lt;_Ty1,_Ty2&gt;::first' uses undefined struct 'key'\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty1=const key,\n1&gt;              _Ty2=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(498) : see reference to class template instantiation 'std::pair&lt;_Ty1,_Ty2&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty1=const key,\n1&gt;              _Ty2=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(593) : see reference to class template instantiation 'std::_Tree_node&lt;_Value_type,_Voidptr&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Value_type=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Voidptr=void *\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(592) : while compiling class template member function 'std::_Tree_node&lt;_Value_type,_Voidptr&gt; *&amp;std::_Tree_val&lt;_Val_types&gt;::_Left(std::_Tree_node&lt;_Value_type,_Voidptr&gt; *)'\n1&gt;          with\n1&gt;          [\n1&gt;              _Value_type=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Voidptr=void *,\n1&gt;              _Val_types=std::_Tree_simple_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(864) : see reference to function template instantiation 'std::_Tree_node&lt;_Value_type,_Voidptr&gt; *&amp;std::_Tree_val&lt;_Val_types&gt;::_Left(std::_Tree_node&lt;_Value_type,_Voidptr&gt; *)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Value_type=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Voidptr=void *,\n1&gt;              _Val_types=std::_Tree_simple_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(766) : see reference to class template instantiation 'std::_Tree_val&lt;_Val_types&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Val_types=std::_Tree_simple_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(884) : see reference to class template instantiation 'std::_Tree_alloc&lt;_Al_has_storage,_Alloc_types&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Al_has_storage=false,\n1&gt;              _Alloc_types=std::_Tree_base_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(996) : see reference to class template instantiation 'std::_Tree_buy&lt;_Ty,_Alloc&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Alloc=std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(1029) : see reference to class template instantiation 'std::_Tree_comp&lt;_Pr_has_storage,_Traits&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Pr_has_storage=false,\n1&gt;              _Traits=std::_Tmap_traits&lt;key,std::function&lt;void (void)&gt;,std::less&lt;key&gt;,std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;,false&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\map(67) : see reference to class template instantiation 'std::_Tree&lt;_Traits&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Traits=std::_Tmap_traits&lt;key,std::function&lt;void (void)&gt;,std::less&lt;key&gt;,std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;,false&gt;\n1&gt;          ]\n1&gt;          c:\\users\\frizzlefry\\documents\\visual studio 2012\\projects\\3d game tut\\3d game tut\\input.h(21) : see reference to class template instantiation 'std::map&lt;_Kty,_Ty&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Kty=key,\n1&gt;              _Ty=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;  Generating Code...\n1&gt;  Compiling...\n1&gt;  KApp.cpp\n1&gt;c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\utility(201): error C2079: 'std::pair&lt;_Ty1,_Ty2&gt;::first' uses undefined struct 'key'\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty1=const key,\n1&gt;              _Ty2=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(498) : see reference to class template instantiation 'std::pair&lt;_Ty1,_Ty2&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty1=const key,\n1&gt;              _Ty2=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(593) : see reference to class template instantiation 'std::_Tree_node&lt;_Value_type,_Voidptr&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Value_type=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Voidptr=void *\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(592) : while compiling class template member function 'std::_Tree_node&lt;_Value_type,_Voidptr&gt; *&amp;std::_Tree_val&lt;_Val_types&gt;::_Left(std::_Tree_node&lt;_Value_type,_Voidptr&gt; *)'\n1&gt;          with\n1&gt;          [\n1&gt;              _Value_type=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Voidptr=void *,\n1&gt;              _Val_types=std::_Tree_simple_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(864) : see reference to function template instantiation 'std::_Tree_node&lt;_Value_type,_Voidptr&gt; *&amp;std::_Tree_val&lt;_Val_types&gt;::_Left(std::_Tree_node&lt;_Value_type,_Voidptr&gt; *)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Value_type=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Voidptr=void *,\n1&gt;              _Val_types=std::_Tree_simple_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(766) : see reference to class template instantiation 'std::_Tree_val&lt;_Val_types&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Val_types=std::_Tree_simple_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(884) : see reference to class template instantiation 'std::_Tree_alloc&lt;_Al_has_storage,_Alloc_types&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Al_has_storage=false,\n1&gt;              _Alloc_types=std::_Tree_base_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(996) : see reference to class template instantiation 'std::_Tree_buy&lt;_Ty,_Alloc&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Alloc=std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(1029) : see reference to class template instantiation 'std::_Tree_comp&lt;_Pr_has_storage,_Traits&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Pr_has_storage=false,\n1&gt;              _Traits=std::_Tmap_traits&lt;key,std::function&lt;void (void)&gt;,std::less&lt;key&gt;,std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;,false&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\map(67) : see reference to class template instantiation 'std::_Tree&lt;_Traits&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Traits=std::_Tmap_traits&lt;key,std::function&lt;void (void)&gt;,std::less&lt;key&gt;,std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;,false&gt;\n1&gt;          ]\n1&gt;          c:\\users\\frizzlefry\\documents\\visual studio 2012\\projects\\3d game tut\\3d game tut\\input.h(21) : see reference to class template instantiation 'std::map&lt;_Kty,_Ty&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Kty=key,\n1&gt;              _Ty=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;  Generating Code...\n1&gt;  Compiling...\n1&gt;  Source.cpp\n1&gt;c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\utility(201): error C2079: 'std::pair&lt;_Ty1,_Ty2&gt;::first' uses undefined struct 'key'\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty1=const key,\n1&gt;              _Ty2=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(498) : see reference to class template instantiation 'std::pair&lt;_Ty1,_Ty2&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty1=const key,\n1&gt;              _Ty2=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(593) : see reference to class template instantiation 'std::_Tree_node&lt;_Value_type,_Voidptr&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Value_type=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Voidptr=void *\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(592) : while compiling class template member function 'std::_Tree_node&lt;_Value_type,_Voidptr&gt; *&amp;std::_Tree_val&lt;_Val_types&gt;::_Left(std::_Tree_node&lt;_Value_type,_Voidptr&gt; *)'\n1&gt;          with\n1&gt;          [\n1&gt;              _Value_type=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Voidptr=void *,\n1&gt;              _Val_types=std::_Tree_simple_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(864) : see reference to function template instantiation 'std::_Tree_node&lt;_Value_type,_Voidptr&gt; *&amp;std::_Tree_val&lt;_Val_types&gt;::_Left(std::_Tree_node&lt;_Value_type,_Voidptr&gt; *)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Value_type=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Voidptr=void *,\n1&gt;              _Val_types=std::_Tree_simple_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(766) : see reference to class template instantiation 'std::_Tree_val&lt;_Val_types&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Val_types=std::_Tree_simple_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(884) : see reference to class template instantiation 'std::_Tree_alloc&lt;_Al_has_storage,_Alloc_types&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Al_has_storage=false,\n1&gt;              _Alloc_types=std::_Tree_base_types&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(996) : see reference to class template instantiation 'std::_Tree_buy&lt;_Ty,_Alloc&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty=std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;,\n1&gt;              _Alloc=std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\xtree(1029) : see reference to class template instantiation 'std::_Tree_comp&lt;_Pr_has_storage,_Traits&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Pr_has_storage=false,\n1&gt;              _Traits=std::_Tmap_traits&lt;key,std::function&lt;void (void)&gt;,std::less&lt;key&gt;,std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;,false&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 11.0\\vc\\include\\map(67) : see reference to class template instantiation 'std::_Tree&lt;_Traits&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Traits=std::_Tmap_traits&lt;key,std::function&lt;void (void)&gt;,std::less&lt;key&gt;,std::allocator&lt;std::pair&lt;const key,std::function&lt;void (void)&gt;&gt;&gt;,false&gt;\n1&gt;          ]\n1&gt;          c:\\users\\frizzlefry\\documents\\visual studio 2012\\projects\\3d game tut\\3d game tut\\input.h(21) : see reference to class template instantiation 'std::map&lt;_Kty,_Ty&gt;' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Kty=key,\n1&gt;              _Ty=std::function&lt;void (void)&gt;\n1&gt;          ]\n1&gt;  Generating Code...\n1&gt;\n1&gt;Build FAILED.\n1&gt;\n1&gt;Time Elapsed 00:00:02.70\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n"}, {"tags": ["c++", "c++14", "boost-hana"], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 1104754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3eddbb3c2598249d3f331190e10e09f?s=128&d=identicon&r=PG", "display_name": "Daniel Doubleday", "link": "https://stackoverflow.com/users/1104754/daniel-doubleday"}, "edited": false, "score": 0, "creation_date": 1437730269, "post_id": 31603945, "comment_id": 51164034, "body": "That was easy :-) Thank you very much Louis! That was the missing link. Maybe it would be worth to add a section to your great documentation. When you know it it&#39;s easy to find in the examples but it&#39;s easy to miss since in the docs everything is auto and only the factory functions are used. Great work really!"}, {"owner": {"reputation": 2976, "user_id": 627587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7225df5b0728daa170646a5c5a4bfda?s=128&d=identicon&r=PG", "display_name": "Louis Dionne", "link": "https://stackoverflow.com/users/627587/louis-dionne"}, "reply_to_user": {"reputation": 173, "user_id": 1104754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3eddbb3c2598249d3f331190e10e09f?s=128&d=identicon&r=PG", "display_name": "Daniel Doubleday", "link": "https://stackoverflow.com/users/1104754/daniel-doubleday"}, "edited": false, "score": 0, "creation_date": 1437752200, "post_id": 31603945, "comment_id": 51178542, "body": "No problem! I&#39;m preparing a rather large update for the library following the formal Boost review, and this will be documented better."}], "tags": [], "owner": {"reputation": 2976, "user_id": 627587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7225df5b0728daa170646a5c5a4bfda?s=128&d=identicon&r=PG", "display_name": "Louis Dionne", "link": "https://stackoverflow.com/users/627587/louis-dionne"}, "is_accepted": true, "score": 2, "last_activity_date": 1437720412, "creation_date": 1437720412, "answer_id": 31603945, "question_id": 31569149, "link": "https://stackoverflow.com/questions/31569149/create-hana-tuple-with-unmovable-noncopyable-types/31603945#31603945", "title": "Create hana tuple with unmovable / noncopyable types", "body": "<p>You can use the <code>hana::_tuple&lt;...&gt;</code> type almost exactly as <code>std::tuple</code>. \nHence, the following works:</p>\n\n<pre><code>#include &lt;boost/hana/integral_constant.hpp&gt;\n#include &lt;boost/hana/tuple.hpp&gt;\n#include &lt;tuple&gt;\n#include &lt;type_traits&gt;\nnamespace hana = boost::hana;\n\n\nstruct NonMoveable\n{\n    NonMoveable() = default;\n    NonMoveable(const NonMoveable&amp; other) = delete;\n\n    int val;\n};\n\nstruct Simple { int val; };\n\ntemplate &lt;typename ...CompT&gt;\nstruct HanaContainer\n{\n    template &lt;int I&gt;\n    auto&amp; getComponent()\n    {\n        return components[hana::int_&lt;I&gt;];\n    }\n\n    hana::_tuple&lt;CompT...&gt; components;\n};\n\nint main()\n{\n    HanaContainer&lt;Simple&gt; simpleHanaC;\n    static_assert(std::is_same&lt;Simple&amp;, decltype(simpleHanaC.getComponent&lt;0&gt;())&gt;::value, \"\");\n\n    HanaContainer&lt;NonMoveable&gt; nonmoveableHanaC;\n    static_assert(std::is_same&lt;NonMoveable&amp;, decltype(nonmoveableHanaC.getComponent&lt;0&gt;())&gt;::value, \"\");\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 1104754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3eddbb3c2598249d3f331190e10e09f?s=128&d=identicon&r=PG", "display_name": "Daniel Doubleday", "link": "https://stackoverflow.com/users/1104754/daniel-doubleday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 31603945, "answer_count": 1, "score": 1, "last_activity_date": 1437720412, "creation_date": 1437583352, "last_edit_date": 1437620242, "question_id": 31569149, "link": "https://stackoverflow.com/questions/31569149/create-hana-tuple-with-unmovable-noncopyable-types", "title": "Create hana tuple with unmovable / noncopyable types", "body": "<p>I'm trying to wrap my head around the great boost::hana and try to figure out how to translate some old school tuple code.</p>\n\n<p>Maybe it's a bit special but I have types that are neither copyable nor moveable and want to pack them in a container. Think policy design ...</p>\n\n<p>I guess I'm just not getting how to create a hana tuple in the value world. The way I'm trying doesn't work because <code>make&lt;Tuple&gt;(CompT{}...)</code> needs types that are either copyable or at least moveable.</p>\n\n<p>So most likely this is just not the way to do it. Or is this a limitation of hana?</p>\n\n<p>Thanks!</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct NonMoveable\n{\n    NonMoveable() = default;\n    NonMoveable(const NonMoveable&amp; other) = delete;\n\n    int val;\n};\n\nstruct Simple { int val; };\n\ntemplate &lt;typename ...CompT&gt;\nstruct OldSchoolContainer\n{\n    template &lt;int I&gt;\n    auto&amp; getComponent()\n    {\n        return std::get&lt;I&gt;(components);\n    }\n\n    std::tuple&lt;CompT...&gt; components;\n};\n\ntemplate &lt;typename ...CompT&gt;\nstruct HanaContainer\n{\n    using Args_t = decltype(make&lt;Tuple&gt;(CompT{}...));\n\n    template &lt;int I&gt;\n    auto&amp; getComponent()\n    {\n        return components[int_&lt;I&gt;];\n    }\n\n    Args_t components;\n};\n\nint main()\n{\n    OldSchoolContainer&lt;Simple&gt; simpleOsc;\n    static_assert(std::is_same&lt;Simple&amp;, decltype(simpleOsc.getComponent&lt;0&gt;())&gt;::value, \"\");\n\n    HanaContainer&lt;Simple&gt; simpleHanaC;\n    static_assert(std::is_same&lt;Simple&amp;, decltype(simpleHanaC.getComponent&lt;0&gt;())&gt;::value, \"\");\n\n\n    OldSchoolContainer&lt;NonMoveable&gt; nonmoveableOsc;\n    static_assert(std::is_same&lt;NonMoveable&amp;, decltype(nonmoveableOsc.getComponent&lt;0&gt;())&gt;::value, \"\");\n\n    // !!! this does not compile because hana's tuple closure needs to either move or copy\n    HanaContainer&lt;NonMoveable&gt; nonmoveableHanaC;\n    static_assert(std::is_same&lt;NonMoveable&amp;, decltype(nonmoveableHanaC.getComponent&lt;0&gt;())&gt;::value, \"\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "qt", "winapi"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1437583611, "post_id": 31569078, "comment_id": 51093524, "body": "Well, there is only one relevant parameter, and you are not displaying it or logging it?"}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 5, "creation_date": 1437583632, "post_id": 31569078, "comment_id": 51093534, "body": "You might want to include FizeSize in the warning message to verify if you&#39;re assumptions about it are correct."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 2, "creation_date": 1437598426, "post_id": 31569078, "comment_id": 51102476, "body": "You should also double-check the error code; the code as posted isn&#39;t reliable in that respect.  You need to retrieve the error code first, stick it in a variable, and only then construct your warning message."}], "owner": {"reputation": 55, "user_id": 5018855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5152fdb6e4e7c87797580deea71f2fb?s=128&d=identicon&r=PG&f=1", "display_name": "legitberg", "link": "https://stackoverflow.com/users/5018855/legitberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1146, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1437583136, "creation_date": 1437583136, "question_id": 31569078, "link": "https://stackoverflow.com/questions/31569078/virtual-alloc-failing-with-code-87-invalid-parameter", "title": "Virtual Alloc failing with code 87 - Invalid parameter", "body": "<p>following code is working on some PCs, while on other giving error 87 - invalid parameter, what can be wrong?</p>\n\n<pre><code>FileSize = dwDllSize;\nbuffer = VirtualAlloc ( NULL, FileSize, MEM_COMMIT | MEM_RESERVE, PAGE_READWRITE );\n\nif ( !buffer )\n{\n    QMessageBox::warning(NULL,QString(\"VirtualAlloc failed!\"),QString::number(GetLastError()));\n    return -1;\n}\n</code></pre>\n\n<p>I'm checking for size 0, and file is not bigger than ~200kb.</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "concurrency", "stl"], "comments": [{"owner": {"reputation": 16147, "user_id": 465677, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/42efa1dc57699f422d929bc4c6fd5ac9?s=128&d=identicon&r=PG", "display_name": "CouchDeveloper", "link": "https://stackoverflow.com/users/465677/couchdeveloper"}, "edited": false, "score": 0, "creation_date": 1437584619, "post_id": 31569065, "comment_id": 51094097, "body": "Why don&#39;t you use synchronisation primitives, like mutex with which you could define some sort of &quot;critical section&quot;?"}, {"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "reply_to_user": {"reputation": 16147, "user_id": 465677, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/42efa1dc57699f422d929bc4c6fd5ac9?s=128&d=identicon&r=PG", "display_name": "CouchDeveloper", "link": "https://stackoverflow.com/users/465677/couchdeveloper"}, "edited": false, "score": 0, "creation_date": 1437584947, "post_id": 31569065, "comment_id": 51094312, "body": "Firstly, critical sections/mutex are slow as hell in my nanospeed routines. Secondly, i just don&#39;t need it in this question, in my function <code>Close()</code> i  only wait for thread to complete. Possibly, this may be executed from any thread in my application, including <code>m_thread</code> itself."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 1, "creation_date": 1437588085, "post_id": 31569065, "comment_id": 51096147, "body": "Just a note: <code>if(m_thread.joinable()) m_thread.join();</code> could theoretically result in an exception of type <code>std::system_error</code> and code <code>invalid_argument</code> if, after <code>m_thread.joinable()</code> is evaluated but before <code>m_thread.join()</code> is executed, <code>m_thread</code> finishes executing and is joined by a third thread. Also note that operations on <code>std::thread</code> objects are not synchronized, so this whole business of different threads accessing the same <code>m_thread</code> is inherently risky."}, {"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1437599026, "post_id": 31569065, "comment_id": 51102768, "body": "@bogdan so isn&#39;t where any solution to safely call <code>join()</code> without <code>try..catch</code>..?"}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1437600415, "post_id": 31569065, "comment_id": 51103485, "body": "Even if catching exceptions, there are no guarantees with your code. It&#39;s difficult to give a solution without knowing what your exact requirements are for the semantics of <code>Close()</code> in the presence of multiple threads (that&#39;s a separate question). If you really want several threads to wait concurrently for the background thread to finish, you&#39;ll need a proper synchronization mechanism to do that reliably - a <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\"><code>std::condition_variable</code></a> or a <a href=\"http://en.cppreference.com/w/cpp/thread/shared_future\" rel=\"nofollow noreferrer\"><code>std::shared_future</code></a>, for example."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1437600638, "post_id": 31569065, "comment_id": 51103611, "body": "If you actually only want one thread to wait, and, once one is waiting, the others can just skip, then an <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic_flag\" rel=\"nofollow noreferrer\"><code>std::atomic_flag</code></a> may be enough, and it&#39;s guaranteed to be pretty much the fastest you can get."}], "answers": [{"comments": [{"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1437584043, "post_id": 31569139, "comment_id": 51093765, "body": "Correct, although, sharing variables across several threads <b>is not safe</b> due to heap caching."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1437583312, "creation_date": 1437583312, "answer_id": 31569139, "question_id": 31569065, "link": "https://stackoverflow.com/questions/31569065/determine-if-code-is-running-in-specific-thread/31569139#31569139", "title": "Determine if code is running in specific thread", "body": "<p>I believe you want to use <a href=\"http://en.cppreference.com/w/cpp/thread/get_id\" rel=\"nofollow\">std::this_thread::get_id</a> and compare its result to the result of <a href=\"http://en.cppreference.com/w/cpp/thread/thread/get_id\" rel=\"nofollow\">std::thread::get_id</a> (of your \"background\" thread). Or have some thread local variables (perhaps storing these at start of thread, etc.).</p>\n"}, {"comments": [{"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1437585070, "post_id": 31569272, "comment_id": 51094379, "body": "What makes you think <code>joinable()</code> will not return true if called on the current thread of execution?"}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "reply_to_user": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1437585250, "post_id": 31569272, "comment_id": 51094475, "body": "@Joker <code>m_thread.join();</code>, however, will throw an exception if <code>m_thread</code> is the current thread of execution - an <code>std::system_error</code> with a code <code>resource_deadlock_would_occur</code> - so you won&#39;t have deadlock."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1437585346, "post_id": 31569272, "comment_id": 51094534, "body": "@bogdan How, could that routine actually execute from within the thread, if the thread has already finished execution, to make it return <code>true</code>?"}, {"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1437585429, "post_id": 31569272, "comment_id": 51094579, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 <code>m_thread</code> operation itself is a long-term process which may decide to stop itself with shared <code>Close()</code> function described in my question. It&#39;s pretty usual case. Or you don&#39;t understand threading?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1437585539, "post_id": 31569272, "comment_id": 51094648, "body": "@Joker Sorry, I was wrong about <code>joinable()</code>. Will remove that from the answer."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 4, "last_activity_date": 1437585589, "last_edit_date": 1437585589, "creation_date": 1437583645, "answer_id": 31569272, "question_id": 31569065, "link": "https://stackoverflow.com/questions/31569065/determine-if-code-is-running-in-specific-thread/31569272#31569272", "title": "Determine if code is running in specific thread", "body": "<blockquote>\n  <p>Can i determine in my <code>Close()</code> function if it is running in my background thread, to skip \"joining\"?</p>\n</blockquote>\n\n<p>Yes, you can use the <a href=\"http://en.cppreference.com/w/cpp/thread/get_id\" rel=\"nofollow\"><code>std::this_thread::get_id()</code></a> function and compare with <code>m_thread.get_id()</code> to determine if the routine runs within the same <code>std::thread</code> instance.</p>\n"}, {"comments": [{"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 3, "creation_date": 1437583791, "post_id": 31569292, "comment_id": 51093637, "body": "What if <code>Close()</code> called within <code>m_thread</code> context? It will join for itself and this should be dealock?"}, {"owner": {"reputation": 585, "user_id": 4029982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pOqLvSdH_AI/AAAAAAAAAAI/AAAAAAAAAA8/e_uysdlSU5k/photo.jpg?sz=128", "display_name": "Dawid", "link": "https://stackoverflow.com/users/4029982/dawid"}, "reply_to_user": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1437597707, "post_id": 31569292, "comment_id": 51102083, "body": "@Joker According to standard, 30.3.1.5 thread members, <code>join</code> requires thread to be &#39;joinable&#39; and will detect situation when <code>this-&gt;get_id() == std::this_thread::get_id()</code> - will throw an exception meaning <code>resource_deadlock_would_occur</code>"}], "tags": [], "owner": {"reputation": 93, "user_id": 3629375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a32a2791ae854cf9d440a139d6b33c?s=128&d=identicon&r=PG&f=1", "display_name": "Radon", "link": "https://stackoverflow.com/users/3629375/radon"}, "is_accepted": false, "score": -4, "last_activity_date": 1437583713, "creation_date": 1437583713, "answer_id": 31569292, "question_id": 31569065, "link": "https://stackoverflow.com/questions/31569065/determine-if-code-is-running-in-specific-thread/31569292#31569292", "title": "Determine if code is running in specific thread", "body": "<p>You should use <code>if(m_thread.joinable()) m_thread.join();</code>. Never heard that it is unsafe.</p>\n"}], "owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1617, "favorite_count": 0, "accepted_answer_id": 31569272, "answer_count": 3, "score": 3, "last_activity_date": 1437601093, "creation_date": 1437583093, "last_edit_date": 1437601093, "question_id": 31569065, "link": "https://stackoverflow.com/questions/31569065/determine-if-code-is-running-in-specific-thread", "title": "Determine if code is running in specific thread", "body": "<p>In my application i run background operation using this snippet:</p>\n\n<pre><code>m_thread = std::thread(&amp;MyClass::BackOp, this);\n</code></pre>\n\n<p>Sometimes different threads (including <code>m_thread</code> itself, possibly) in my application call function <code>Close()</code> which waits for background thread to complete its operation:</p>\n\n<pre><code>if(m_thread.joinable()) m_thread.join();\n</code></pre>\n\n<p>And this is unsafe behaviour, if i am right, it may cause <em>deadlock</em>. </p>\n\n<p>Can i determine in my <code>Close()</code> function text, if it is running in my background thread, to skip \"joining\"? </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "qt", "qml", "undefined-reference"], "answers": [{"tags": [], "owner": {"reputation": 1472, "user_id": 1784242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/227e25a94746cb18c48454ffb0855c99?s=128&d=identicon&r=PG", "display_name": "rbtLong", "link": "https://stackoverflow.com/users/1784242/rbtlong"}, "is_accepted": false, "score": 0, "last_activity_date": 1438288469, "last_edit_date": 1438288469, "creation_date": 1437582998, "answer_id": 31569035, "question_id": 31569034, "link": "https://stackoverflow.com/questions/31569034/qt5-undefined-reference-to-qdeclarativedebuggingenablerqdeclarativedebugginge/31569035#31569035", "title": "Qt5 undefined reference to `QDeclarativeDebuggingEnabler::QDeclarativeDebuggingEnabler()&#39;", "body": "<p>It turns out that for some reason this line was causing all the trouble:</p>\n\n<pre><code>#include &lt;QtDeclarative/QDeclarativeView&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 1967968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Feus.jpg?s=128&g=1", "display_name": "Kai Schubert", "link": "https://stackoverflow.com/users/1967968/kai-schubert"}, "is_accepted": false, "score": 0, "last_activity_date": 1486983711, "creation_date": 1486983711, "answer_id": 42202465, "question_id": 31569034, "link": "https://stackoverflow.com/questions/31569034/qt5-undefined-reference-to-qdeclarativedebuggingenablerqdeclarativedebugginge/42202465#42202465", "title": "Qt5 undefined reference to `QDeclarativeDebuggingEnabler::QDeclarativeDebuggingEnabler()&#39;", "body": "<p>Remember there is a difference between QtQuick1 and QtQuick2 when enabling debugging:</p>\n\n<p>QtQuick1</p>\n\n<pre><code>#include &lt;QtDeclarative/qdeclarativedebug.h&gt;\nQDeclarativeDebuggingEnabler enabler;\n</code></pre>\n\n<p>QtQuick2 </p>\n\n<pre><code>#include &lt;QQmlDebuggingEnabler&gt;\nQQmlDebuggingEnabler enabler;\n</code></pre>\n\n<p>Since you are using Qt5.4 and QtQuick2 is arround since Qt5 I think, that might be the issue. </p>\n"}], "owner": {"reputation": 1472, "user_id": 1784242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/227e25a94746cb18c48454ffb0855c99?s=128&d=identicon&r=PG", "display_name": "rbtLong", "link": "https://stackoverflow.com/users/1784242/rbtlong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1162, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1486983711, "creation_date": 1437582998, "last_edit_date": 1438367792, "question_id": 31569034, "link": "https://stackoverflow.com/questions/31569034/qt5-undefined-reference-to-qdeclarativedebuggingenablerqdeclarativedebugginge", "title": "Qt5 undefined reference to `QDeclarativeDebuggingEnabler::QDeclarativeDebuggingEnabler()&#39;", "body": "<p>Suddenly had this problem... </p>\n\n<pre><code>classitem.o: In function `__static_initialization_and_destruction_0':\n/../../Qt/5.4/gcc_64/include/QtDeclarative/qdeclarativedebug.h:50: undefined reference to `QDeclarativeDebuggingEnabler::QDeclarativeDebuggingEnabler()'\ncollect2: error: ld returned 1 exit status\nmake: *** [MedJournal] Error 1\n09:29:05: The process \"/usr/bin/make\" exited with code 2.\n</code></pre>\n\n<p>went as far as stripping the QObject class from the object, but still got the same error.</p>\n"}, {"tags": ["c++", "lambda"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1437582117, "post_id": 31568655, "comment_id": 51092633, "body": "Normally function-like objects are passed by value. Copying them should be extremely cheap. If your objects are not like this, you are probably doing something not entirely right."}], "answers": [{"comments": [{"owner": {"reputation": 11286, "user_id": 3928385, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3HdfL.png?s=128&g=1", "display_name": "Ishamael", "link": "https://stackoverflow.com/users/3928385/ishamael"}, "edited": false, "score": 2, "creation_date": 1437582230, "post_id": 31568738, "comment_id": 51092706, "body": "I suspect that OP just shortened it, and in reality the lambda does more."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 11286, "user_id": 3928385, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3HdfL.png?s=128&g=1", "display_name": "Ishamael", "link": "https://stackoverflow.com/users/3928385/ishamael"}, "edited": false, "score": 4, "creation_date": 1437582307, "post_id": 31568738, "comment_id": 51092751, "body": "@Ishamael Then OP should put what OP wants to do in the question so that I don&#39;t have to guess."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "reply_to_user": {"reputation": 11286, "user_id": 3928385, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3HdfL.png?s=128&g=1", "display_name": "Ishamael", "link": "https://stackoverflow.com/users/3928385/ishamael"}, "edited": false, "score": 1, "creation_date": 1437641055, "post_id": 31568738, "comment_id": 51117596, "body": "As @Ishamael said, I stripped the code to it&#39;s simplest form. The lambda does much more than call <code>g()</code> and <code>g()</code> has arguments and return a result. You are right @Barry, I should have made it explicit so that the lambda isn&#39;t optimized out in the answers."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1437582135, "creation_date": 1437582135, "answer_id": 31568738, "question_id": 31568655, "link": "https://stackoverflow.com/questions/31568655/how-to-pass-a-c-functor-rvalue-reference-to-a-capture-of-a-lambda/31568738#31568738", "title": "How to pass a c++ functor rvalue reference to a capture of a lambda ?", "body": "<p>You are constructing a lambda that accepts no arguments and returns nothing. But you already have such a functor: <code>g</code>!. You should just <em>forward</em> it:</p>\n\n<pre><code>template&lt;class Function&gt;\nvoid f(Function&amp;&amp; g) {\n    h(..., std::forward&lt;Function&gt;(g));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1437594245, "post_id": 31568748, "comment_id": 51099942, "body": "Note that here, you do a copy/move of the original <code>g</code>. see <a href=\"http://stackoverflow.com/questions/31410209/perfectly-capturing-a-perfect-forwarder-universal-reference-in-a-lambda/31410880#31410880\">perfectly-capturing-a-perfect-forwarder-universal-reference-&zwnj;&#8203;in-a-lambda</a>"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1437602249, "post_id": 31568748, "comment_id": 51104280, "body": "@Jarod42 That was my intention."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 1, "creation_date": 1437641986, "post_id": 31568748, "comment_id": 51118195, "body": "See @Dieter&#39;s answer if one needs an equivalent solution that works with c++11"}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 2, "last_activity_date": 1437582613, "last_edit_date": 1437582613, "creation_date": 1437582163, "answer_id": 31568748, "question_id": 31568655, "link": "https://stackoverflow.com/questions/31568655/how-to-pass-a-c-functor-rvalue-reference-to-a-capture-of-a-lambda/31568748#31568748", "title": "How to pass a c++ functor rvalue reference to a capture of a lambda ?", "body": "<p>If you capture <code>g</code> by reference, that is, with the syntax <code>&amp;g</code> shown in your snippet, no copy will be performed. This is the preferred way. You should only copy if the lambda might be called after <code>f</code> finishes, which potentially implies a destruction of the object <code>g</code> refers to.<br>\nIn that case, forwarding could be cheaper though:</p>\n\n<pre><code>template&lt;class Function&gt;\nvoid f(Function&amp;&amp; g) {\n    h(\u2026, [g=std::forward&lt;Function&gt;(g)] {g();});\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 1, "creation_date": 1437642191, "post_id": 31569297, "comment_id": 51118337, "body": "This answer has the benefit to work with c++11. The answer of @Columbo requires c++14. I picked his answer as valid answer because it&#39;s the new standard way to do it. But I&#39;ll use your answer until I switch to c++14. Your contribution was helpful."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1437642631, "post_id": 31569297, "comment_id": 51118646, "body": "AFAICS, This way has no benefit compared to @chmikes original approach whatsoever. First of all, you <code>move</code> when you should <code>forward</code>. Secondly, <code>f</code> is captured by reference, and its lifetime doesn&#39;t exceed <code>g</code>&#39;s, so actually <code>f</code> is superfluous."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1437732633, "post_id": 31569297, "comment_id": 51165511, "body": "@columbo Apparently my compiler (4.9.2) requires that <code>f</code> is passed by reference. This code works. Not sure of the difference it would make to use <code>forward</code>."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1437737431, "post_id": 31569297, "comment_id": 51168417, "body": "@chmike \u2026what about <code>g</code> being an lvalue reference to some object that&#39;s to be used after <code>f</code> is called? Remember, the parameter is a forwarding reference, not an rvalue one. And yeah, of course this code - after fixing the aforementioned bug - works, but introducing <code>f</code> serves no purpose at all. One could just capture <code>g</code> by reference and that&#39;s it."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 1, "last_activity_date": 1437583721, "creation_date": 1437583721, "answer_id": 31569297, "question_id": 31568655, "link": "https://stackoverflow.com/questions/31568655/how-to-pass-a-c-functor-rvalue-reference-to-a-capture-of-a-lambda/31569297#31569297", "title": "How to pass a c++ functor rvalue reference to a capture of a lambda ?", "body": "<p>You might do this:</p>\n\n<pre><code>template&lt;class Function&gt;\nvoid f(Function&amp;&amp; g) {\n    Function f(std::move(g));\n    int additional = 0;\n    h(..., [&amp;f, additional](){f(additional);});\n}\n</code></pre>\n"}], "owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2068, "favorite_count": 0, "accepted_answer_id": 31568748, "answer_count": 3, "score": 6, "last_activity_date": 1437583721, "creation_date": 1437581812, "question_id": 31568655, "link": "https://stackoverflow.com/questions/31568655/how-to-pass-a-c-functor-rvalue-reference-to-a-capture-of-a-lambda", "title": "How to pass a c++ functor rvalue reference to a capture of a lambda ?", "body": "<p>I have the following function</p>\n\n<pre><code>template&lt;class Function&gt;\nvoid f(Function&amp;&amp; g) {\n    h(..., [&amp;g](){g();});\n}\n</code></pre>\n\n<p>It's a function <code>f</code> accepting a function, a lambda or a functor as argument. Inside it calls the function <code>h</code> to which I pass a lambda as argument that is calling <code>g</code> and receives <code>g</code> by capture.</p>\n\n<ol>\n<li>Should I pass <code>g</code> or <code>&amp;g</code> in the capture field of the lambda ?</li>\n<li>Will the functor be copied with the above code ?</li>\n</ol>\n"}, {"tags": ["c++", "c++11", "visual-c++", "visual-studio-2013"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1437581818, "post_id": 31568625, "comment_id": 51092426, "body": "Are you compling in 64 bit mode?  That is not the default in VS"}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1437582754, "post_id": 31568625, "comment_id": 51093015, "body": "Also note that these kind of experiments are not conclusive on all platforms; Linux, for example, will not fail on allocations larger than the available free memory size -- only when it&#39;s accessed will it be paged in, potentially forcing the OOM killer to stop a process in order to fulfill the paging request when it happens."}, {"owner": {"reputation": 37, "user_id": 5041286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517f60f94927e0a11a9d9e7364a52675?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Bogdan", "link": "https://stackoverflow.com/users/5041286/robert-bogdan"}, "edited": false, "score": 0, "creation_date": 1437582768, "post_id": 31568625, "comment_id": 51093021, "body": "I actually had forgotten to configure my test project to output in 64-bit mode, and just thought I had because my main project was in 64-bit..."}, {"owner": {"reputation": 37, "user_id": 5041286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517f60f94927e0a11a9d9e7364a52675?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Bogdan", "link": "https://stackoverflow.com/users/5041286/robert-bogdan"}, "edited": false, "score": 0, "creation_date": 1437582842, "post_id": 31568625, "comment_id": 51093075, "body": "So that was a major derp. Sorry, and thank you. (As for Cameron&#39;s point, I did know that was true, which is why when testing on my Mac I forced it to actually load the memory. This was just preliminary testing. But thank you as well, as that&#39;s a valid point.)"}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1437582949, "post_id": 31568625, "comment_id": 51093127, "body": "Right, sorry, I hadn&#39;t read the last paragraph before I wrote the comment ;-) But do note that <code>1ULL &lt;&lt; 31</code> bytes is 4GB, not 2."}, {"owner": {"reputation": 37, "user_id": 5041286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517f60f94927e0a11a9d9e7364a52675?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Bogdan", "link": "https://stackoverflow.com/users/5041286/robert-bogdan"}, "edited": false, "score": 0, "creation_date": 1437583267, "post_id": 31568625, "comment_id": 51093331, "body": "Is that true? Isn&#39;t <code>1ULL&lt;&lt;31</code> = 2^31?"}], "owner": {"reputation": 37, "user_id": 5041286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517f60f94927e0a11a9d9e7364a52675?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Bogdan", "link": "https://stackoverflow.com/users/5041286/robert-bogdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 403, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1437581745, "creation_date": 1437581745, "question_id": 31568625, "link": "https://stackoverflow.com/questions/31568625/maximum-heap-program-size", "title": "Maximum heap (program?) size", "body": "<p>I need to take in and process very large image buffers for a program I'm writing, so I ran a few quick tests to see approximately the maximum amount of heap storage I can use for my program.</p>\n\n<p>Running the below code produces no errors.</p>\n\n<pre><code>uint64_t sz = 1; sz &lt;&lt;= 30;\nuint8_t *test = new uint8_t[sz];\nstd::cout &lt;&lt; \"size is \" &lt;&lt; sz &lt;&lt; \" bytes.\\n\";\ndelete[] test;\n</code></pre>\n\n<p>However, if I left shift sz by 31 instead of 30, or if I create two test arrays with the above size, I receive a std::bad_alloc exception.</p>\n\n<p>This seems to indicate that I can use a maximum of ~1GB of heap space, despite having a 64 bit system with 8GB of RAM. Is there a reason for this? Is this an alterable value? As my tags indicate, I'm runnings Windows and using Visual Studio. Ideally, I'd like to load as much of the buffer into RAM as possible without incurring swapping.</p>\n\n<p>(As an aside, on my Mac running Yosemite, I can not only allocate this amount of heap storage, but can even write to it in short increments to force it all to <em>actually</em> be allocated (not just set aside by malloc) and subsequently read from it. Activity monitor reports 1, 2, 4, 8, 16... GB of RAM in use by the program, though the vast majority is compressed.)</p>\n"}, {"tags": ["c++", "optimization", "vector", "vectorization"], "comments": [{"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1437581544, "post_id": 31568515, "comment_id": 51092246, "body": "What exactly is a vectorized call? Are you asking if <code>for_each</code> uses multiple threads?"}, {"owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 0, "creation_date": 1437581581, "post_id": 31568515, "comment_id": 51092264, "body": "Are you referring to SIMD instructions?"}, {"owner": {"reputation": 332, "user_id": 2712152, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/5288d64f17831422136fcd8c6014c8a7?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2712152/shubham"}, "edited": false, "score": 0, "creation_date": 1437581588, "post_id": 31568515, "comment_id": 51092272, "body": "For example I am incrementing the elements by 5 in a function"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 2, "creation_date": 1437582041, "post_id": 31568515, "comment_id": 51092576, "body": "Experimentally, the answer is &quot;maybe&quot;. So it cannot be answered in general. If it was &quot;no, never&quot;, that would have been an answer, but in some cases some compilers will do it (<a href=\"http://goo.gl/6JVihX\" rel=\"nofollow noreferrer\">proof</a>)."}], "answers": [{"comments": [{"owner": {"reputation": 1579, "user_id": 2720901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2dc8cb39d5823e5b3dcec25a6ca29ea?s=128&d=identicon&r=PG&f=1", "display_name": "zam", "link": "https://stackoverflow.com/users/2720901/zam"}, "edited": false, "score": 0, "creation_date": 1437678455, "post_id": 31568730, "comment_id": 51143837, "body": "To further generalize: if function call is not inlined, it&#39;s still possible to vectorize such loops by using #pragma omp declare simd on function declaration - which is also known as &quot;SIMD enabled function&quot; technique. Unfortunately this technique does only work in some versions of Intel compiler or in compilers supporting standard of OpenMP4.0."}], "tags": [], "owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "is_accepted": false, "score": 2, "last_activity_date": 1437582102, "creation_date": 1437582102, "answer_id": 31568730, "question_id": 31568515, "link": "https://stackoverflow.com/questions/31568515/vectorize-function-calls-on-each-element-of-a-vector/31568730#31568730", "title": "Vectorize function calls on each element of a vector", "body": "<p>In general, no.</p>\n\n<p><code>std::for_each</code> is simply a wrapper around a loop.</p>\n\n<p>However, with optimizations on, it's quite likely that the call to <code>std::for_each</code> is inlined, and for simple functions, likely that the function call for each element is inlined too.</p>\n\n<p>Once everything is inlined, it's as if the loop had been written by hand; in such a case, the question becomes \"will the compiler vectorize a loop doing simple arithmetic\"; and that's entirely up to the compiler.</p>\n\n<p>In order for this to happen, the compiler needs to know that the target architecture supports SIMD instructions, and may or may not vectorize depending on the optimization level, whether the number of iterations is constant or not, whether the number of iterations is known to be a multiple of 4, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1437586190, "post_id": 31569153, "comment_id": 51095033, "body": "All of this is completely platform-specific. And unncessary. You can just do <code>&amp;myVec[0]</code>, which is guaranteed to work."}], "tags": [], "owner": {"reputation": 93, "user_id": 3629375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a32a2791ae854cf9d440a139d6b33c?s=128&d=identicon&r=PG&f=1", "display_name": "Radon", "link": "https://stackoverflow.com/users/3629375/radon"}, "is_accepted": false, "score": -2, "last_activity_date": 1437583363, "creation_date": 1437583363, "answer_id": 31569153, "question_id": 31568515, "link": "https://stackoverflow.com/questions/31568515/vectorize-function-calls-on-each-element-of-a-vector/31569153#31569153", "title": "Vectorize function calls on each element of a vector", "body": "<p>Assuming you are asking about std::vector, the answer is no. std::vector is a wrapper around a array, but it accesses those memory blocks indirectly. However you can take the row pointer like so <code>myVec.begin()._Ptr</code> and work with it inside the loop. declaring method with noalias helps, like so <code>__declspec(noalias)</code>. The second part of the question is answered by Cameron. If the function gets inlined and architecture supports vectorized data, compiler should vectorize the data now.</p>\n"}], "owner": {"reputation": 332, "user_id": 2712152, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/5288d64f17831422136fcd8c6014c8a7?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2712152/shubham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1437583363, "creation_date": 1437581459, "question_id": 31568515, "link": "https://stackoverflow.com/questions/31568515/vectorize-function-calls-on-each-element-of-a-vector", "title": "Vectorize function calls on each element of a vector", "body": "<p>When we call a function for each element in a vector using for_each are the calls vectorized or not?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1437581473, "post_id": 31568448, "comment_id": 51092198, "body": "what are you concerned with then?"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 6, "last_activity_date": 1437581388, "creation_date": 1437581388, "answer_id": 31568490, "question_id": 31568448, "link": "https://stackoverflow.com/questions/31568448/c-static-meaning-for-variables-in-global-scope/31568490#31568490", "title": "C++ - static meaning for variables in global scope", "body": "<p>Aside from the translation unit visibility that you already mention, there is no difference.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1437581495, "creation_date": 1437581495, "answer_id": 31568533, "question_id": 31568448, "link": "https://stackoverflow.com/questions/31568448/c-static-meaning-for-variables-in-global-scope/31568533#31568533", "title": "C++ - static meaning for variables in global scope", "body": "<blockquote>\n  <p>Aren't global variables \"static\" anyway?</p>\n</blockquote>\n\n<p>Global variables are indeed placed in static memory. However, they are global in all translation units, so linker sees their names.</p>\n\n<blockquote>\n  <p>is there any difference between this code? [...]</p>\n</blockquote>\n\n<p>If you decide to link your first code with another translation unit that has <code>var1</code>, you are going to get a link error. Your second code would compile correctly, even if <code>var1</code> in the other translation unit is global.</p>\n\n<blockquote>\n  <p>I know that the static variable will not be accessible from any other translation unit, but that's not really what I'm concerned with.</p>\n</blockquote>\n\n<p>Internal or external scope is the only difference. One could argue that it is a misuse of the keyword <code>static</code>, but that is the way it is in the C standard.</p>\n"}], "owner": {"reputation": 535, "user_id": 1639427, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c60552143017b175abeb3bb3ab806a93?s=128&d=identicon&r=PG", "display_name": "Steve Dell", "link": "https://stackoverflow.com/users/1639427/steve-dell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 31568533, "answer_count": 2, "score": 2, "last_activity_date": 1437581495, "creation_date": 1437581285, "last_edit_date": 1437581431, "question_id": 31568448, "link": "https://stackoverflow.com/questions/31568448/c-static-meaning-for-variables-in-global-scope", "title": "C++ - static meaning for variables in global scope", "body": "<p>What is the significance of defining a variable as static when you define it in the global scope? Aren't global variables \"static\" anyway?</p>\n\n<p>i.e: is there any difference between this code? :</p>\n\n<pre><code>int var1 = 0;\nint main()\n{\n    return var1;\n}\n\nstatic int var1 = 0;\nint main()\n{\n    return var1;\n}\n</code></pre>\n\n<p>I know that the static variable will not be accessible from any other translation unit, but that's not really what I'm concerned with.</p>\n"}, {"tags": ["python", "c++", "cython"], "answers": [{"comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1437652710, "post_id": 31585601, "comment_id": 51125308, "body": "Please add some explanation"}, {"owner": {"reputation": 590, "user_id": 3854029, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/6kMnx.png?s=128&g=1", "display_name": "rohanp", "link": "https://stackoverflow.com/users/3854029/rohanp"}, "edited": false, "score": 0, "creation_date": 1437660073, "post_id": 31585601, "comment_id": 51131048, "body": "Thank you! I realize what I did wrong now; A_f, m, and n were all python objects. I needed to convert them to cython objects before releasing the GIL."}], "tags": [], "owner": {"reputation": 17717, "user_id": 691867, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86cad22e6f9100c801c56c099872bbc2?s=128&d=identicon&r=PG", "display_name": "colinfang", "link": "https://stackoverflow.com/users/691867/colinfang"}, "is_accepted": true, "score": 1, "last_activity_date": 1437649690, "creation_date": 1437649690, "answer_id": 31585601, "question_id": 31568303, "link": "https://stackoverflow.com/questions/31568303/cython-function-returning-pointer-without-gil-error/31585601#31585601", "title": "Cython function returning pointer without GIL error", "body": "<p>Try this</p>\n\n<pre><code>cpdef svd(A_f, int m, int n):\n\n    cdef double *S_p\n\n    cdef double[:] abc = A_f\n\n    with nogil:\n          S_p = _svd(abc , m, n)\n</code></pre>\n"}], "owner": {"reputation": 590, "user_id": 3854029, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/6kMnx.png?s=128&g=1", "display_name": "rohanp", "link": "https://stackoverflow.com/users/3854029/rohanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 31585601, "answer_count": 1, "score": 1, "last_activity_date": 1437649690, "creation_date": 1437580880, "last_edit_date": 1437581250, "question_id": 31568303, "link": "https://stackoverflow.com/questions/31568303/cython-function-returning-pointer-without-gil-error", "title": "Cython function returning pointer without GIL error", "body": "<p>I dont understand why this does not compile. _svd returns a double*, and I am assigning it to a double*. </p>\n\n<p>Error Message: Coercion from Python not allowed without the GIL</p>\n\n<pre><code>cpdef svd(A_f, m, n):\n    cdef double *S_p\n\n    with nogil:\n        S_p = _svd(A_f, m, n)\n\n    return &lt;double[:min(m, n)]&gt; S_p\n\ncdef double* _svd(double[:] A_f, int m, int n) nogil:\n    #code removed bc it is long\n</code></pre>\n\n<p>Edit: It works with the GIL, but I want to call it without the GIL.</p>\n"}, {"tags": ["c++", "math", "julian-date"], "comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1437580515, "post_id": 31568028, "comment_id": 51091556, "body": "Also, what does <code>J-M = R</code> mean? Is just a typo, and you really meant <code>R = J + M</code>, or is it anything else?"}, {"owner": {"reputation": 1105, "user_id": 646210, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/osWJG.jpg?s=128&g=1", "display_name": "paper.plane", "link": "https://stackoverflow.com/users/646210/paper-plane"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1437580534, "post_id": 31568028, "comment_id": 51091574, "body": "My bad, I should have written &#39;simple&#39; instead of optimized. I don&#39;t need optimized way in terms of performance but I need less number of statements."}, {"owner": {"reputation": 1105, "user_id": 646210, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/osWJG.jpg?s=128&g=1", "display_name": "paper.plane", "link": "https://stackoverflow.com/users/646210/paper-plane"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1437580615, "post_id": 31568028, "comment_id": 51091624, "body": "No I need J+M only, Btw +/- anything is fine"}, {"owner": {"reputation": 1293, "user_id": 3878168, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/39TS0.jpg?s=128&g=1", "display_name": "Yay295", "link": "https://stackoverflow.com/users/3878168/yay295"}, "edited": false, "score": 1, "creation_date": 1437581474, "post_id": 31568028, "comment_id": 51092199, "body": "Time arithmetic is not this easy. You have to deal with leap years, leap days, and leap seconds."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1437585924, "post_id": 31568028, "comment_id": 51094868, "body": "But what is a 18 digits Julian timestamp ? AFAIK a Julian date is simply a continuous count of days and fractions since noon Universal Time on January 1, 4713 BCE (on the proleptic Julian calendar). I know how to do calculations on Julian days, add them any number of days, minutes or seconds, convert them to and from current gregorian calendar, but I <b>do not know what is a 18 digits Julian timestamp</b>"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 1293, "user_id": 3878168, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/39TS0.jpg?s=128&g=1", "display_name": "Yay295", "link": "https://stackoverflow.com/users/3878168/yay295"}, "edited": false, "score": 0, "creation_date": 1437586030, "post_id": 31568028, "comment_id": 51094944, "body": "@Yay295 : that&#39;s the reason why the Julian day was invented :-) and julian date does not deal with leap seconds."}, {"owner": {"reputation": 498, "user_id": 4770772, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-ZCz4Xn2SdIE/AAAAAAAAAAI/AAAAAAAAAB8/jS4fTOAHdW4/photo.jpg?sz=128", "display_name": "Gerard Ashton", "link": "https://stackoverflow.com/users/4770772/gerard-ashton"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1437601599, "post_id": 31568028, "comment_id": 51104006, "body": "@SergeBallesta some interpretations of Julian day include leap seconds, but the leap second is confined to the day in which it occurs. In that particular day, a second represents the fraction 1/86401 of a day, instead of the usual 1/86400. This is done in the Standards of Fundamental Astronomy software libraries."}], "answers": [{"comments": [{"owner": {"reputation": 6953, "user_id": 4541045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdfffa01cff641ad93fa459b26d3cdb4?s=128&d=identicon&r=PG&f=1", "display_name": "ti7", "link": "https://stackoverflow.com/users/4541045/ti7"}, "edited": false, "score": 0, "creation_date": 1437602868, "post_id": 31574503, "comment_id": 51104551, "body": "A double should be more than adequate to contain the date! Those suckers are good for 53 digits <a href=\"https://stat.ethz.ch/R-manual/R-devel/library/base/html/zMachine.html\" rel=\"nofollow noreferrer\">stat.ethz.ch/R-manual/R-devel/library/base/html/zMachine.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 6953, "user_id": 4541045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdfffa01cff641ad93fa459b26d3cdb4?s=128&d=identicon&r=PG&f=1", "display_name": "ti7", "link": "https://stackoverflow.com/users/4541045/ti7"}, "edited": false, "score": 0, "creation_date": 1437603362, "post_id": 31574503, "comment_id": 51104775, "body": "Correction: wow, what an accurate number number .. doubles are good for 53 <i>binary</i> digits - check out the Rmpfr library for that sort of precision"}, {"owner": {"reputation": 1105, "user_id": 646210, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/osWJG.jpg?s=128&g=1", "display_name": "paper.plane", "link": "https://stackoverflow.com/users/646210/paper-plane"}, "edited": false, "score": 0, "creation_date": 1437615215, "post_id": 31574503, "comment_id": 51107956, "body": "Thanks @Gerand, Since M is in minute so it should be divided by 1440 to get the number of days, isn&#39;t it? I suppose 86400 was a typo. I am not familiar with Julian arithmetic, please let me know if it is otherwise."}, {"owner": {"reputation": 498, "user_id": 4770772, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-ZCz4Xn2SdIE/AAAAAAAAAAI/AAAAAAAAAB8/jS4fTOAHdW4/photo.jpg?sz=128", "display_name": "Gerard Ashton", "link": "https://stackoverflow.com/users/4770772/gerard-ashton"}, "edited": false, "score": 0, "creation_date": 1437616712, "post_id": 31574503, "comment_id": 51108306, "body": "Yes, 86400 was a typo. It should be 1440. I&#39;ll edit the answer for any future readers."}], "tags": [], "owner": {"reputation": 498, "user_id": 4770772, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-ZCz4Xn2SdIE/AAAAAAAAAAI/AAAAAAAAAB8/jS4fTOAHdW4/photo.jpg?sz=128", "display_name": "Gerard Ashton", "link": "https://stackoverflow.com/users/4770772/gerard-ashton"}, "is_accepted": false, "score": 0, "last_activity_date": 1437616787, "last_edit_date": 1437616787, "creation_date": 1437601356, "answer_id": 31574503, "question_id": 31568028, "link": "https://stackoverflow.com/questions/31568028/how-to-compute-julian-arithmetic/31574503#31574503", "title": "How to compute julian arithmetic", "body": "<p>I will suppose paper plane's question, combined with paper plane's comment at 22 July, 15:55Z, is correct. I endorse Serge Ballesta's comment about the definition of a Julian date.</p>\n\n<p>J = Julian date, for example, it is currently 2457226.38645800000. Neither a double float nor a long integer can hold that many digits, so I suppose this must be a character string. </p>\n\n<p>M = integer indicating a number of minutes to be added to J.</p>\n\n<p>Your first task is to figure out how precise your result must be, and what range of dates you must cover. If you don't require precision better than a few microseconds, you could separate J into two integers, the whole number part and the fraction part. Then convert the number of minutes into days by dividing M by 1440. Then add the result to the fraction part of J. Next, handle any carry that might happen between the fraction part and the whole number part. Then assign to a string the whole number part, the decimal point, the fraction part, and right-pad with enough digits to make 18 digits alltogether.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1437633870, "creation_date": 1437633870, "answer_id": 31579953, "question_id": 31568028, "link": "https://stackoverflow.com/questions/31568028/how-to-compute-julian-arithmetic/31579953#31579953", "title": "How to compute julian arithmetic", "body": "<p>The common usage is to store Julian dates in a double. According to <a href=\"https://en.wikipedia.org/wiki/Julian_day\" rel=\"nofollow\">Julian day on wikipedia</a>, Julian day for January 1, 2000 12:00 UT is 2,451,545. So we need about 7 decimal digits do process the day. Since a double has a precision of about 13 decimal digits, we are still left with 6 decimal digits for the fraction of a day. As a day contains 86400 seconds, a Julian day contained in a float can represent all dates since noon on January 1, 4713 BC, in proleptic Julian calendar with a precision of at least one second.</p>\n\n<p>And as the Julian Period (same reference) is *a chronological interval of 7980 years beginning 4713 BC, it can still represent about 2000 years starting from now.</p>\n\n<p>So you should just convert your timestamp to a double, add it <code>(double) M / 1440.</code> and you get the new Julian timestamp.</p>\n\n<p>If you later want to convert a Julian day in our Gregorian calendar you just have to use the difference with January 1, 2000 12:00 UT which is 2,451,545</p>\n"}], "owner": {"reputation": 1105, "user_id": 646210, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/osWJG.jpg?s=128&g=1", "display_name": "paper.plane", "link": "https://stackoverflow.com/users/646210/paper-plane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1437633870, "creation_date": 1437580161, "last_edit_date": 1437580652, "question_id": 31568028, "link": "https://stackoverflow.com/questions/31568028/how-to-compute-julian-arithmetic", "title": "How to compute julian arithmetic", "body": "<p>I have problem where I need to find the difference between a 18-digit current julian-timestamp and a constant amount of minutes and the result should be a 18-digit julian timestamp again.</p>\n\n<p>Now I have the lib provided api to get the 18-digit current julian-timestamp, but I am not able to find a simple way to compute the rest.</p>\n\n<pre><code>J = 18-digit current julian-timestamp; /* this I have */\nM = an integer, which indicates the number of minutes elapsed.\n\nJ-M = R is a 18-digit julian-timestamp\n</code></pre>\n\n<p>Please suggest an simplified way to compute R.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 7, "creation_date": 1437580281, "post_id": 31568021, "comment_id": 51091377, "body": "Why are you looking for another way if you already have something that works? What would that other way need to add?"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 3, "creation_date": 1437580331, "post_id": 31568021, "comment_id": 51091422, "body": "What problem are you trying to solve?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5106417"}, "edited": false, "score": 0, "creation_date": 1437580347, "post_id": 31568021, "comment_id": 51091434, "body": "Because its always nice to learn more and see different solutions to solve 1 problem"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1437580526, "post_id": 31568021, "comment_id": 51091565, "body": "Yes but it&#39;s also completely infeasible unless you have a clear set of requirements. In short, you haven&#39;t told us what the &quot;problem&quot; is. Without constraints, it is impossible to answer your question."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1437580629, "post_id": 31568021, "comment_id": 51091636, "body": "First you say <code>call the virtual base method from derived</code>, then you say <code>call Y from the base outside of the derived class</code>. Which is it?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5106417"}, "edited": false, "score": 0, "creation_date": 1437581098, "post_id": 31568292, "comment_id": 51091972, "body": "Dude this is nice. I didn&#39;t actually know you could do ptr-&gt;CLASS::METHOD(). Cheers that was exactly what i was looking for"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1437586323, "post_id": 31568292, "comment_id": 51095115, "body": "<code>void main( )</code> and <code>system( &quot;PAUSE&quot; );</code>?"}, {"owner": {"reputation": 4404, "user_id": 1404233, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/440a530b3332c7b30930939c8961c897?s=128&d=identicon&r=PG", "display_name": "Will Custode", "link": "https://stackoverflow.com/users/1404233/will-custode"}, "edited": false, "score": 0, "creation_date": 1437586455, "post_id": 31568292, "comment_id": 51095201, "body": "Haha, I beg pardon on grounds that it is irrelevant to the answer."}], "tags": [], "owner": {"reputation": 4404, "user_id": 1404233, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/440a530b3332c7b30930939c8961c897?s=128&d=identicon&r=PG", "display_name": "Will Custode", "link": "https://stackoverflow.com/users/1404233/will-custode"}, "is_accepted": true, "score": 0, "last_activity_date": 1437580851, "creation_date": 1437580851, "answer_id": 31568292, "question_id": 31568021, "link": "https://stackoverflow.com/questions/31568021/is-there-another-way-to-call-base-method-from-derived-which-is-virtual/31568292#31568292", "title": "Is there another way to call Base method from derived which is virtual", "body": "<p>Regardless of <strong>why</strong> you want to do this, you can achieve the same thing using this alternate syntax. You simply add some resolution syntax to the dereferencing of the variable (the same can be achieved with non-pointers dereferenced by the <code>.</code> operator)</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass A\n{\npublic:\n    virtual void X( )\n    {\n        cout &lt;&lt; \"A::X()\\n\";\n    }\n\n    virtual void Y( )\n    {\n        cout &lt;&lt; \"A::Y()\\n\";\n    }\n};\n\nclass B : public A\n{\npublic:\n    virtual void X( )\n    {\n        cout &lt;&lt; \"B::X()\\n\";\n    }\n\n    virtual void Y( )\n    {\n        cout &lt;&lt; \"B::Y()\\n\";\n    }\n};\n\nvoid main( )\n{\n    B* xb = new B( );\n\n    A* xa = xb;\n\n    xb-&gt;X( );\n    xb-&gt;Y( );\n\n    xa-&gt;X( );\n    xa-&gt;Y( );\n\n    xb-&gt;A::X( );\n    xb-&gt;A::Y( );\n\n    system( \"PAUSE\" );\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5106417"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 31568292, "answer_count": 1, "score": 0, "last_activity_date": 1441186139, "creation_date": 1437580127, "last_edit_date": 1441186139, "question_id": 31568021, "link": "https://stackoverflow.com/questions/31568021/is-there-another-way-to-call-base-method-from-derived-which-is-virtual", "title": "Is there another way to call Base method from derived which is virtual", "body": "<p>I was wondering if there is another way to call the virtual base method from derived instead of:</p>\n\n<pre><code>void Y() //is virtual in base\n{\n   Base::Y();\n}\n</code></pre>\n\n<p>If this is a duplicate, I'm sorry.</p>\n"}, {"tags": ["c++", "memory-management", "memory-leaks", "heap-memory"], "comments": [{"owner": {"reputation": 167, "user_id": 5032146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a49c71710697f57160060e3e203bb29?s=128&d=identicon&r=PG&f=1", "display_name": "Satish Chalasani", "link": "https://stackoverflow.com/users/5032146/satish-chalasani"}, "edited": false, "score": 1, "creation_date": 1437580127, "post_id": 31567939, "comment_id": 51091257, "body": "It is not a good practice and may result in unexpected behavior when large chunks of memory without getting deleted. If you don&#39;t want to manage your self, then use boost::unique_ptr. It will get deleted by itself."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 5, "creation_date": 1437580142, "post_id": 31567939, "comment_id": 51091270, "body": "Sounds like you would be happier with a garbage collected language, but you are probably using dynamic memory allocation when you really just don&#39;t need to."}, {"owner": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1437580321, "post_id": 31567939, "comment_id": 51091413, "body": "@crashmstr : Indeed."}, {"owner": {"reputation": 123, "user_id": 4825204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HvrZbZ64s2Q/AAAAAAAAAAI/AAAAAAAAAJM/YbL74OqOVq4/photo.jpg?sz=128", "display_name": "Blake McConnell", "link": "https://stackoverflow.com/users/4825204/blake-mcconnell"}, "edited": false, "score": 0, "creation_date": 1437580667, "post_id": 31567939, "comment_id": 51091662, "body": "Does it really take that much more time to free your dynamic allocations?"}, {"owner": {"reputation": 123, "user_id": 4417296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92398ce291a76603fbbeb02ee7b24f3b?s=128&d=identicon&r=PG&f=1", "display_name": "pkdc", "link": "https://stackoverflow.com/users/4417296/pkdc"}, "edited": false, "score": 1, "creation_date": 1437580946, "post_id": 31567939, "comment_id": 51091857, "body": "I am just curious, thanks for answering! So it is bad practice not freeing the dynamically allocated memory. I will read about the shared_ptr and unique_ptr."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 167, "user_id": 5032146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a49c71710697f57160060e3e203bb29?s=128&d=identicon&r=PG&f=1", "display_name": "Satish Chalasani", "link": "https://stackoverflow.com/users/5032146/satish-chalasani"}, "edited": false, "score": 0, "creation_date": 1437589139, "post_id": 31567939, "comment_id": 51096804, "body": "@SatishChalasani: Why would it be <i>undefined behaviour</i>? And why <code>boost::unique_ptr</code> and not <code>std::unique_ptr</code>?"}, {"owner": {"reputation": 167, "user_id": 5032146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a49c71710697f57160060e3e203bb29?s=128&d=identicon&r=PG&f=1", "display_name": "Satish Chalasani", "link": "https://stackoverflow.com/users/5032146/satish-chalasani"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1437614598, "post_id": 31567939, "comment_id": 51107819, "body": "@ChristianHackl if the dynamic allocation is within a iterating loop and each time  a large size is allocated and if the iteration is done many times, system may run into swap and may run out of memory. It is std::unique_ptr. Depending on the implementation, system could go on swap or if swapping is not allowed then it could just terminate.."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1437638138, "post_id": 31567939, "comment_id": 51115834, "body": "if operating system should allow for allocated memory not being returned to system, you&#39;ll end with a out of resources in your operating system sooner (than later).  Of course you can leave memory allocated.  Operating System will do it for you."}], "answers": [{"tags": [], "owner": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "is_accepted": false, "score": 9, "last_activity_date": 1437580048, "creation_date": 1437580048, "answer_id": 31567987, "question_id": 31567939, "link": "https://stackoverflow.com/questions/31567939/not-deleting-dynamically-allocated-memory-and-let-it-get-free-by-the-os-after-pr/31567987#31567987", "title": "Not deleting dynamically allocated memory and let it get free by the OS after programme termination", "body": "<p>The short answer is yes, you can, the long answer is <em>possibly</em> you better <strong>not</strong> do that: if your code needs to be refactored and turned into a library, you are delivering a considerable amount of <strong>technical debt</strong> to the person who is going to do that job, which could be you.</p>\n\n<p>Furthermore, if you have a real, hard-to-find memory leak (not a memory leak caused by you intentionally not freeing long-living objects) it's going to be quite time consuming to debug it with valgrind due to a considerable amount of noise and false positives.</p>\n\n<p>Have a look at <code>std::shared_ptr</code> and <code>std::unique_ptr</code>. The latter has no overhead.</p>\n"}, {"tags": [], "owner": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "is_accepted": false, "score": 3, "last_activity_date": 1437583300, "creation_date": 1437583300, "answer_id": 31569137, "question_id": 31567939, "link": "https://stackoverflow.com/questions/31567939/not-deleting-dynamically-allocated-memory-and-let-it-get-free-by-the-os-after-pr/31569137#31569137", "title": "Not deleting dynamically allocated memory and let it get free by the OS after programme termination", "body": "<p>Most sane OS release all memory and local resources own by the process upon termination (the OS may do it in lazy manner, or reduce their share counter, but it does not matter much on the question). So, it is safe to skip releasing those resources.</p>\n\n<p>However, it is very bad habit, and you gain almost nothing. If you found releasing object takes long time (like walking in a very long list of objects), you should refine your code and choose a better algorithm.</p>\n\n<p>Also, although the OS will release all local resources, there are exceptions like shared memory and global space semaphore, which you are required to release them explicitly.</p>\n"}, {"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1437638318, "post_id": 31570780, "comment_id": 51115934, "body": "What!!! avoid using dynamic memory?  what the hell are you recommending here?  The only reason you can have to do that is not knowing how to use it.  Java is completely based on dynamic memory.  What are you talking about?  Cannot do but downvote you, sorry."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1437642696, "post_id": 31570780, "comment_id": 51118699, "body": "@LuisColorado: Java is a different language. You are arguing against a well-established, universally accepted C++ guideline here. Do you have authorative sources for your claims?"}, {"owner": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "edited": false, "score": 0, "creation_date": 1437643924, "post_id": 31570780, "comment_id": 51119449, "body": "The &#39;unless you really need it&#39; is indeed quite common. Let alone the lifecycle and ownership, the stack space is limited, if you have large piece of data you eventually need to resolve dynamic allocation, or have someone else did it for you in some kind of collection."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "edited": false, "score": 0, "creation_date": 1437644815, "post_id": 31570780, "comment_id": 51119998, "body": "@Calvin: Well, obviously when I argue against unnecessary dynamic allocation, I do not intend avoiding std::vector et al. I argue against the beginners mistake of newing everything in C++ just because Java has garbage collection :) Smart pointers mitigate this problem somewhat, but do not solve it."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "edited": false, "score": 0, "creation_date": 1437645210, "post_id": 31570780, "comment_id": 51120261, "body": "@Calvin: How often you need to allocate dynamically depends mostly on your application domain. In any case, it should be a concious choice, not the default."}, {"owner": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "edited": false, "score": 0, "creation_date": 1437645235, "post_id": 31570780, "comment_id": 51120275, "body": "I see, that make sense."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1437685418, "post_id": 31570780, "comment_id": 51147721, "body": "@ChristianHackl, you are arguing about not using dynamic memory in C++ .... It&#39;s like telling people not to use the <code>+</code> operator in programs.  I have authoritative references on using dinamyc memory in <b>K&amp;R</b> and <b>Stroustrup</b>.  Not using dynamic memory is like recommending not using arithmetic at all."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1437717858, "post_id": 31570780, "comment_id": 51157230, "body": "@LuisColorado: You missed the &quot;unless you really need it&quot; part, which pretty much invalidates all your comments because they are based on a false premise."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1437718267, "post_id": 31570780, "comment_id": 51157396, "body": "@LuisColorado: speaking of Stroustrup, you might want to read his C++ FAQ on &quot;How do I deal with memory leaks&quot;. Then read again my answer and explain how what I recommend differs from his answer. <a href=\"http://www.stroustrup.com/bs_faq2.html#memory-leaks\" rel=\"nofollow noreferrer\">stroustrup.com/bs_faq2.html#memory-leaks</a>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1437743111, "post_id": 31570780, "comment_id": 51172064, "body": "@ChristianHackl, memory leaks is not what we are discussing.  I don&#39;t say dynamic memory is not subject to this kind of problems.... I&#39;m talking about your assert of avoiding as much as possible (unconditionally) using dynamic memory."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1437746842, "post_id": 31570780, "comment_id": 51174891, "body": "@LuisColorado: How you equate &quot;as much as possible&quot; with &quot;unconditionally&quot; is beyond me. Yes, it is true that you should avoid dynamic allocation in C++ <b>as much as possible</b>. No, it is nonsense that you should <b>unconditionally</b> avoid it. Because &quot;as much as possible&quot; implies that there exists a &quot;not possible&quot;. That &quot;not possible&quot; is the case when an object needs to outlive its declaration scope and cannot be copied. You then have to allocate it dynamically. Your comment is either a straw man or a language problem."}], "tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": false, "score": -1, "last_activity_date": 1437588789, "last_edit_date": 1437588789, "creation_date": 1437588396, "answer_id": 31570780, "question_id": 31567939, "link": "https://stackoverflow.com/questions/31567939/not-deleting-dynamically-allocated-memory-and-let-it-get-free-by-the-os-after-pr/31570780#31570780", "title": "Not deleting dynamically allocated memory and let it get free by the OS after programme termination", "body": "<p>First of all, the number one rule in C++ is:</p>\n\n<p><strong>Avoid dynamic allocation unless you really need it!</strong></p>\n\n<p>Don't use <code>new</code> lightly; not even if it's safely wrapped in <code>std::make_unique</code> or <code>std::make_shared</code>. The standard way to create an instance of a type in C++ is:</p>\n\n<p><code>T t;</code></p>\n\n<p>In C++, you need dynamic allocation only if an object should outlive the scope in which it was originally created.</p>\n\n<p><em>If</em> and only if you need to dynamically allocate an object, consider using <code>std::shared_ptr</code> or <code>std::unique_ptr</code>. Those will deallocate automatically when the object is no longer needed.</p>\n\n<p>Second, </p>\n\n<blockquote>\n  <p>is it ok to skip deleting them at the end of the programme, in order\n  to make the code run faster?</p>\n</blockquote>\n\n<p>Absolutely not, because of the <em>\"in order to make the code run faster\"</em> part. This would be premature optimisation.</p>\n\n<hr>\n\n<p>Those are the basic points.</p>\n\n<p>However, you still have to consider what constitutes a \"real\", or bad memory leak. </p>\n\n<p>Here is a bad memory leak:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int count;\n    std::cin &gt;&gt; count;\n    for (int i = 0; i &lt; count; ++i)\n    {\n        int* memory = new int[100];\n    }\n}\n</code></pre>\n\n<p>This is not bad because the memory is \"lost forever\"; any remotely modern operating system will clean everything up for you once the process has gone (see Kerrek SB's answer in your linked question).</p>\n\n<p>It is bad because memory consumption is not constant when it could be; it will unnecessarily grow with user input.</p>\n\n<p>Here is another bad memory leak:</p>\n\n<pre><code>void OnButtonClicked()\n{\n    std::string* s = new std::string(\"my\"); // evil!\n    label-&gt;SetText(*s + \" label\");\n}\n</code></pre>\n\n<p>This piece of (imaginary and slightly contrived) code will make memory consumption grow with every button click. The longer the program runs, the more memory it will take.</p>\n\n<p>Now compare this with:</p>\n\n<pre><code>int main()\n{\n    int* memory = new memory[100];\n}\n</code></pre>\n\n<p>In this case, memory consumption is constant; it does not depend on user input and will not become bigger the longer the program runs. While stupid for such a tiny test program, there <em>are</em> situations in C++ where deliberately not deallocating makes sense. </p>\n\n<p>Singleton comes to mind. A very good way to implement Singleton in C++ is to create the instance dynamically and never delete it; this avoids all order-of-destruction issues (e.g. <code>SettingsManager</code> writing to <code>Log</code> in its destructor when <code>Log</code> was already destroyed). When the operating system clears the memory, no more code is executed and you are safe.</p>\n\n<p>Chances are that you will never run into a situation where it's a good idea to avoid deallocation. But be wary of \"always\" and \"never\" rules in software engineering, especially in C++. Good memory management is much harder than matching every <code>new</code> with a <code>delete</code>.</p>\n"}], "owner": {"reputation": 123, "user_id": 4417296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92398ce291a76603fbbeb02ee7b24f3b?s=128&d=identicon&r=PG&f=1", "display_name": "pkdc", "link": "https://stackoverflow.com/users/4417296/pkdc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1437588789, "creation_date": 1437579917, "last_edit_date": 1495535059, "question_id": 31567939, "link": "https://stackoverflow.com/questions/31567939/not-deleting-dynamically-allocated-memory-and-let-it-get-free-by-the-os-after-pr", "title": "Not deleting dynamically allocated memory and let it get free by the OS after programme termination", "body": "<p>I have read this question and answer \n<a href=\"https://stackoverflow.com/questions/6727383/dynamically-allocated-memory-after-program-termination\">dynamically allocated memory after program termination</a>,\nand I want to know if it is okay to NOT delete dynamically allocated memory and let it get freed by the OS after programme termination.\nSo, if I have allocated some memory for objects that I need thoughout the programme, is it ok to skip deleting them at the end of the programme, in order to make the code run faster?</p>\n"}, {"tags": ["c++", "string", "struct"], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 3857017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0377154997e9eb82aea4a1058f026a62?s=128&d=identicon&r=PG&f=1", "display_name": "user3857017", "link": "https://stackoverflow.com/users/3857017/user3857017"}, "edited": false, "score": 0, "creation_date": 1437580458, "post_id": 31568007, "comment_id": 51091515, "body": "The issue with dropping the pointer is that I need to pass a Node* type to the recursive function that starts at the root of the BST and just links the new node where needed. Also, the function that reads in the data and the recursive function are inside of a class, one public and one private. I could do that, but I&#39;d have to rewrite/restructure a lot of my existing code."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 255, "user_id": 3857017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0377154997e9eb82aea4a1058f026a62?s=128&d=identicon&r=PG&f=1", "display_name": "user3857017", "link": "https://stackoverflow.com/users/3857017/user3857017"}, "edited": false, "score": 0, "creation_date": 1437580533, "post_id": 31568007, "comment_id": 51091572, "body": "@user3857017 Well, there&#39;s nothing in your post to suggest you need to use pointers."}, {"owner": {"reputation": 255, "user_id": 3857017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0377154997e9eb82aea4a1058f026a62?s=128&d=identicon&r=PG&f=1", "display_name": "user3857017", "link": "https://stackoverflow.com/users/3857017/user3857017"}, "edited": false, "score": 0, "creation_date": 1437580726, "post_id": 31568007, "comment_id": 51091702, "body": "Fair, I guess I shouldn&#39;t assume that is known. The algorithm(s) I&#39;m using for the BST are from a book of mine that implements the BST using a lot of pointers for adding, deleting, etc. Rather than just doing so by explicit assignments as data is read in. I&#39;ll edit the OP to reflect the &quot;need&quot; for pointers."}, {"owner": {"reputation": 255, "user_id": 3857017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0377154997e9eb82aea4a1058f026a62?s=128&d=identicon&r=PG&f=1", "display_name": "user3857017", "link": "https://stackoverflow.com/users/3857017/user3857017"}, "edited": false, "score": 0, "creation_date": 1437581485, "post_id": 31568007, "comment_id": 51092208, "body": "Actually, it wasn&#39;t as much rewriting as I thought it would be. Thanks for the solid answer and explanation!"}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 2, "last_activity_date": 1437580095, "creation_date": 1437580095, "answer_id": 31568007, "question_id": 31567904, "link": "https://stackoverflow.com/questions/31567904/c-string-copying-error-to-struct-pointer-data-fields/31568007#31568007", "title": "c++ String copying error to struct pointer data fields", "body": "<p>You are not initializing <code>temp</code> to anything useful before you attempt to use it. </p>\n\n<pre><code>Node* temp = NULL;\n\ntemp-&gt;first = first; // oops! temp is NULL!\n</code></pre>\n\n<p>It would be easier to drop the pointers entirely:</p>\n\n<pre><code>Node copyfunc(std::string first, std::string last, std::string phone)\n{\n    Node temp = {first, last, phone};\n    return temp;\n}\n</code></pre>\n\n<p>You should also consider passing the parameters by <code>const</code> reference instead of value. Or just drop the function completely and initialize the <code>Node</code> where needed:</p>\n\n<pre><code>Node newStruct = {first, last, phone};\ncout &lt;&lt; newStruct.first &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 3857017, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0377154997e9eb82aea4a1058f026a62?s=128&d=identicon&r=PG&f=1", "display_name": "user3857017", "link": "https://stackoverflow.com/users/3857017/user3857017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 31568007, "answer_count": 1, "score": 0, "last_activity_date": 1437580888, "creation_date": 1437579801, "last_edit_date": 1437580888, "question_id": 31567904, "link": "https://stackoverflow.com/questions/31567904/c-string-copying-error-to-struct-pointer-data-fields", "title": "c++ String copying error to struct pointer data fields", "body": "<p>I'm currently writing a program that uses a binary search tree to store names and phone numbers (phonebook basically). I've done this before with an AVL tree, and it works fine. I have decided to switch my methods up for this implementation and not just copy/paste the logic and format of the last one. In doing so I've run into a weird error and I have no idea why it's happening. At first I thought my problem was in the way I returned a struct pointer, but it is actually in my string copying.</p>\n\n<p>I've written a very basic program that only shows the copy function that returns the structure, which are then used to recursively fill the BST with the data (which is read in from a file).</p>\n\n<p>Here is the shortened example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstruct Node\n{\n    std::string first;\n    std::string last;\n    std::string phone;\n};\n\nNode* copyfunc(std::string first, std::string last, std::string phone)\n{\n    Node* temp = NULL;\n\n    temp-&gt;first = first;\n    temp-&gt;last = last;\n    temp-&gt;phone = phone;\n\n    return temp;\n}\n\nint main()\n{\n    std::string first, last, phone;\n    first = \"Jenny\";\n    last = \"Something\";\n    phone = \"8675309\";\n\n    Node* newStruct = NULL;\n\n    newStruct = copyfunc(first, last, phone);\n\n    cout &lt;&lt; newStruct-&gt;first &lt;&lt; endl;\n    cout &lt;&lt; newStruct-&gt;last &lt;&lt; endl;\n    cout &lt;&lt; newStruct-&gt;phone &lt;&lt; endl;\n\n    cout &lt;&lt; \"Never to be seen again...\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Now, I've tried using VS2013 debugger to find out where the issue is, and it happens on the first copy: \"temp->first = first;\". It breaks with an access violation warning and then opens the xstrings (header?) and points to the section: (line 2245)</p>\n\n<pre><code>if (this-&gt;_Myres &lt; _Newsize)\n    _Copy(_Newsize, this-&gt;_Mysize); // reallocate to grow\"\n</code></pre>\n\n<p>I'm just guessing, but from what I can gather it seems to me that it's failing in creating the new string to fit the old strings length.</p>\n\n<p>The program (both the example and real one) will compile, they just hang at the point of reaching the copy function.</p>\n\n<p>All input is appreciated, thanks!</p>\n\n<p>EDIT: The reason I use pointers for my structures is due to the way the algorithms I'm using are written. The functions that actually link the nodes together in the BST accept a Node* type rather than a Node object.\nEx: recursiveInsert(Node* root, Node* newNodeToAdd);</p>\n"}, {"tags": ["c++", "c++11", "matrix", "multidimensional-array"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1437580573, "post_id": 31567900, "comment_id": 51091596, "body": "There are either too many possible answers, or good answers would be too long for this format. Please add details to narrow the answer set or to isolate an issue that can be answered in a few paragraphs."}, {"owner": {"reputation": 1293, "user_id": 3878168, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/39TS0.jpg?s=128&g=1", "display_name": "Yay295", "link": "https://stackoverflow.com/users/3878168/yay295"}, "edited": false, "score": 0, "creation_date": 1437580772, "post_id": 31567900, "comment_id": 51091732, "body": "I would use three vectors. One to store the row names, one to store the column names, and one to store the distance values."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1437593851, "post_id": 31567900, "comment_id": 51099754, "body": "@barry I thought that it may be a famous problem as many people who work in the Machine Learning field may face it before. However, I will see if I can provide more details.. thanks"}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 3629375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a32a2791ae854cf9d440a139d6b33c?s=128&d=identicon&r=PG&f=1", "display_name": "Radon", "link": "https://stackoverflow.com/users/3629375/radon"}, "is_accepted": true, "score": 1, "last_activity_date": 1437581600, "creation_date": 1437581600, "answer_id": 31568567, "question_id": 31567900, "link": "https://stackoverflow.com/questions/31567900/standard-and-efficient-map-between-objects/31568567#31568567", "title": "standard and efficient map between objects", "body": "<p>You can create two dimensional vector like so</p>\n\n<pre><code>std::vector&lt;std::vector&lt;float&gt; &gt; table(N, std::vector&lt;float&gt;(N));\n</code></pre>\n\n<p>don`t forget to initialize it like this, it reserves memory for N members, so it does not need to reallocate all the members then you are adding more. And does not fragment the memory.\nyou can access its members like so</p>\n\n<pre><code>table[1][2] = 2.01;\n</code></pre>\n\n<p>it does not uses copy constructors all the time because vector index operator returns a reference to a member;\nso it is pretty efficient if N does not need to change.</p>\n"}], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 31568567, "answer_count": 1, "score": 1, "last_activity_date": 1437581600, "creation_date": 1437579791, "question_id": 31567900, "link": "https://stackoverflow.com/questions/31567900/standard-and-efficient-map-between-objects", "title": "standard and efficient map between objects", "body": "<p>I am working on clustering problem where I have something called <em>distance matrix</em>. This distance matrix is something like:\n<a href=\"https://i.stack.imgur.com/opXCp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/opXCp.png\" alt=\"Distance Matrix\"></a></p>\n\n<ol>\n<li>the number of nodes(g) are N (dynamic)</li>\n<li>This matrix is Symmetric (dist[i,j]==dist[j,i])</li>\n<li>g1,g2,.... are object (they contain strings , integers and may even more..)</li>\n<li>I want to be able to reach any value by simple way like dist[4][3] or even more clear way like dist(g1,g5) (here g1 and g5 may be some kind of pointer or reference)</li>\n<li>many std algorithm will be applied on this distance matrix like min, max, accumulate ..etc</li>\n<li>preferably but not mandatory, I would like not to use boost or other 3rd party libraries </li>\n</ol>\n\n<p>What is the best standard way to declare this matrix.</p>\n"}, {"tags": ["javascript", "c++", "emscripten"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 3906269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2o1a1.jpg?s=128&g=1", "display_name": "rsacchettini", "link": "https://stackoverflow.com/users/3906269/rsacchettini"}, "is_accepted": false, "score": 0, "last_activity_date": 1593149849, "creation_date": 1593149849, "answer_id": 62588638, "question_id": 31567870, "link": "https://stackoverflow.com/questions/31567870/emscripten-emmake-generating-js-files/62588638#62588638", "title": "Emscripten: emmake generating .js files", "body": "<p>I am not sure about the usage of emcmake or emmake directly but worked on a CMAKE based C++ project, a main executable, that used be compiled to an x86_64 executable on linux, and that I converted to emscriptem in order to deploy it on an Nginx server.</p>\n<h2>CMAKE cross compilation + target platform and ouput = Toolchain File + linker flags + compiler flags</h2>\n<p>openjpeg.jp2 project is a CMAKE C/C++ program.</p>\n<p>Here you are trying to cross compile a C/C++ lib or executable from your <strong>host</strong> <strong>linux</strong> <strong>x86</strong> with <strong>GCC</strong> for instance, could also be <strong>Windows</strong> + <strong>Visual</strong> <strong>C++ compiler.</strong></p>\n<h3>Toolchain file</h3>\n<p>You need a <strong>CMAKE toolchain file</strong> that's gonna tell CMAKE how to use emscriptem tools including the emscriptem compiler, and linker that produce JS or WebAssembly.</p>\n<ul>\n<li>Get an Emscriptem cmake toolchain file example here linux GCC x86:\n<a href=\"https://gist.github.com/romatou18/9f631147b5b26f980ab9669c375a6e3f\" rel=\"nofollow noreferrer\">https://gist.github.com/romatou18/9f631147b5b26f980ab9669c375a6e3f</a></li>\n</ul>\n<h3>Compiler flags</h3>\n<ul>\n<li>When using a CMAKE project refer to the CMakeLists.txt file in order to find/apply/modify the compiler and linker flags based on debug/release build types selected i.e. the GCC build flag for the openjpeg.jp2 project:</li>\n</ul>\n<p>example of compiler flags:\n<a href=\"https://github.com/uclouvain/openjpeg/blob/172c8ae5cf230ff74b5814daf29e5b577aa30a9b/CMakeLists.txt#L200\" rel=\"nofollow noreferrer\">https://github.com/uclouvain/openjpeg/blob/172c8ae5cf230ff74b5814daf29e5b577aa30a9b/CMakeLists.txt#L200</a></p>\n<p>Again I do not know the specifics of emmake/emcmake but if your project is CMAKE based, the toolchain file should tell CMAKE all that it needs to know to compile your program.</p>\n<h3>Emscriptem Linker flags : choose Native JS or WebAssembly output</h3>\n<p>CMakelists.txt that specifies emscriptem linker flags and selects either JS or WebAssembly as an output based on the <strong>JS_ONLY</strong> option:</p>\n<pre><code>cmake_minimum_required(VERSION 3.6)\nmessage( &quot;Current dir: ${CMAKE_CURRENT_LIST_DIR}&quot; )\n\n#make sure it is all static\nSET(CMAKE_FIND_LIBRARY_SUFFIXES &quot;.a&quot;)\nSET(BUILD_SHARED_LIBRARIES OFF)\n\noption(JS_ONLY &quot;Compiles to native JS (No WASM)&quot; OFF)\n\nadd_executable( myProgram main.cpp)\ntarget_link_libraries( myProgram ${API_LIB})\ntarget_compile_features(myProgram PRIVATE cxx_std_14)\n\n\nif(JS_ONLY)\n  message(STATUS &quot;Setting compilation target to native JavaScript&quot;)\n  set(CMAKE_EXECUTABLE_SUFFIX &quot;.js&quot;)\n  set_target_properties(myProgram PROPERTIES LINK_FLAGS &quot;--emrun -s EXPORTED_FUNCTIONS='[_main]'&quot;)\nelse(JS_ONLY)\n  message(STATUS &quot;Setting compilation target to WASM&quot;)\n  set(CMAKE_EXECUTABLE_SUFFIX &quot;.wasm.js&quot;)\n  set_target_properties(myProgram PROPERTIES LINK_FLAGS &quot;--emrun -s WASM=1 -s BINARYEN_METHOD='native-wasm' -s EXPORTED_FUNCTIONS='[_main]' -s NO_EXIT_RUNTIME=1 -s EXTRA_EXPORTED_RUNTIME_METHODS=['ccall']&quot;)\nendif(JS_ONLY)\n\n#- Compiling to emscriptem/js output: PROPERTIES LINK_FLAGS set to --emrun -s \n\n#- Compiling to emscriptem/WASM =&gt; webAssembly output: PROPERTIES LINK_FLAGS set to --emrun -s WASM=1 -s BINARYEN_METHOD='native-wasm'\n\n\n</code></pre>\n<p><strong>Note</strong>\nWebAssembly is the lowest output level you will get with EmscriptEm, should be a more compact that JS in theory.</p>\n<h2>Customising the Cmakelist.txt</h2>\n<p>On this specific project, reuse the example CMakeLists.txt i gave above and customise it:</p>\n<ul>\n<li>Setup your emscriptem target like mentioned above with the link flag on the emscriptem target</li>\n</ul>\n<pre><code>set_target_properties(... PROPERTIES LINK_FLAGS &quot;--emrun -s &lt;emscript em link flags as described above&gt;)\n</code></pre>\n<ul>\n<li>Configure release build compiler flags for the release build C AND OR C++ depending on the source language(s) of the project, C flags example below:</li>\n</ul>\n<pre><code>set(CMAKE_C_FLAGS_DEBUG &quot;-O0 -ggdb -Wall -Wunused-variable -Wno-unused-parameter -fno-inline ... etc ...etc ...&quot;)\nset(CMAKE_C_FLAGS_RELEASE &quot;-O2 -Wno-format-security -Wno-format-nonliteral -Wall -Wunused-variable -Wno-unused-parameter&quot;)\nset(CMAKE_C_FLAGS &quot;${CMAKE_C_FLAGS} [+ optional extra flags for both here...]&quot;\n</code></pre>\n<h2>Running the cmake config</h2>\n<p>Now is the time to use the toolchain file:</p>\n<ul>\n<li>Run cmake using the desired build type and specify the toolchain file that tells CMAKE how to use emscriptem, TAKEN from the gist above:</li>\n</ul>\n<pre><code>cmake -DCMAKE_BUILD_TYPE:string=&quot;Release&quot; -DCMAKE_TOOLCHAIN_FILE=Toolchain-Emscripten.cmake src/&quot;\n</code></pre>\n<p>Replace the src/ by the source directory.</p>\n<p>I have not tried running this on the openjpeg project but I think this should put your on the right track. Iterate on this until it work. I have a working lib and exec using exactly this, no more ;-)</p>\n<p>Again this is a CMAKE based project it looks nicely designed and looks modular, therefore I would stick with using CMAKE + cross compilation toolchain file and leave the details of make/emmake to ... CMAKE, unless you really have no other choice.</p>\n<p>Hope this helps!</p>\n<p>Romain</p>\n"}], "owner": {"reputation": 2569, "user_id": 2661831, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ocSOj.jpg?s=128&g=1", "display_name": "Josiah", "link": "https://stackoverflow.com/users/2661831/josiah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1522, "favorite_count": 3, "answer_count": 1, "score": 12, "last_activity_date": 1593149849, "creation_date": 1437579698, "last_edit_date": 1437580036, "question_id": 31567870, "link": "https://stackoverflow.com/questions/31567870/emscripten-emmake-generating-js-files", "title": "Emscripten: emmake generating .js files", "body": "<p>According to the <a href=\"http://kripken.github.io/emscripten-site/docs/compiling/Building-Projects.html\" rel=\"noreferrer\">Emscripten Docs</a></p>\n\n<blockquote>\n  <p>Make generates linked LLVM bitcode. It does not automatically generate JavaScript during linking because all the files must be compiled using the same optimizations and compiler options \u2014 and it makes sense to do this in the final conversion from bitcode to JavaScript.</p>\n</blockquote>\n\n<p>Which is great and what I want to do. However, running Emscripten to compile the <a href=\"https://github.com/uclouvain/openjpeg\" rel=\"noreferrer\">openjpeg .jp2 library</a> generates 4 uncompressed (<code>-O0</code>) .js files in the 5-6mb range, and three identical bytecode <code>.so</code> files of 514kb, which don't seem to contain the code I need. When I run them through <code>emcc</code> they come out as 141kb, without a <code>_main</code> function or anything recognizable, and don't behave the same as the other <code>.js</code> files.</p>\n\n<p><strong>What do I need to change to generate correct bytecode with the <code>emmake</code> command rather than .js files?</strong></p>\n\n<p><code>emcmake cmake</code> completes ok and then <code>emmake make</code> works, but I don't have the option to try various optimizations or any of the options <code>emcc</code> would normally give.</p>\n\n<p>I'm attempting this compilation on Lubuntu 15.04 in a vbox under Win 8. This is my first emscripten project other than the tutorials. I'm also not very familiar with c or c++ or compilation in general (though I can compile this project into Linux applications with no problems).</p>\n\n<p>I'm aware of <a href=\"https://github.com/kripken/j2k.js\" rel=\"noreferrer\">j2k.js</a>, but I'm looking for obj_compress, not obj_decompress.</p>\n"}, {"tags": ["c++", "unit-testing", "googletest"], "answers": [{"tags": [], "owner": {"reputation": 8171, "user_id": 4332059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xs05E.png?s=128&g=1", "display_name": "Old Fox", "link": "https://stackoverflow.com/users/4332059/old-fox"}, "is_accepted": true, "score": 2, "last_activity_date": 1437580655, "creation_date": 1437580655, "answer_id": 31568217, "question_id": 31567766, "link": "https://stackoverflow.com/questions/31567766/using-gtest-how-return-different-values-in-on-call/31568217#31568217", "title": "Using Gtest how return different values in ON_CALL?", "body": "<p>Yes there is a way, change your code to:</p>\n\n<pre><code>ON_CALL(mock, foo())\n       .WillByDefault(ReturnPointee(&amp;f));\n</code></pre>\n\n<p>Read more about <code>ReturnPointee</code> <a href=\"https://code.google.com/p/googlemock/wiki/CookBook\" rel=\"nofollow\">in this link</a> (in the <code>Returning Live Values from Mock Methods</code> section)</p>\n"}], "owner": {"reputation": 65, "user_id": 5144336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4194ab8bc5fecf2e6b322a02f20237fe?s=128&d=identicon&r=PG&f=1", "display_name": "kovlet", "link": "https://stackoverflow.com/users/5144336/kovlet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 960, "favorite_count": 0, "accepted_answer_id": 31568217, "answer_count": 1, "score": 3, "last_activity_date": 1437580655, "creation_date": 1437579419, "question_id": 31567766, "link": "https://stackoverflow.com/questions/31567766/using-gtest-how-return-different-values-in-on-call", "title": "Using Gtest how return different values in ON_CALL?", "body": "<p>Is it possible to return different values using ON_CALL WillByDefault?\nfor example</p>\n\n<pre><code>class FooMock {\n  MOCK_METHOD0(foo, int());\n}\n\nvoid bar()\n{\n  FooMock mock;\n  int f = 0;\n  ON_CALL(mock, foo()).WillByDefault(Return(f));\n  EXPECT_TRUE(f==mock.foo()); // this is correct\n  f++;\n  EXPECT_TRUE(f==mock.foo()); // it is failed, because ON_CALL returns f=0\n}\n</code></pre>\n\n<p>Does exists some way to return new value of variable?</p>\n"}, {"tags": ["c++", "crash"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 5144315, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/26fcd7e9060ce65a664446feb8174d39?s=128&d=identicon&r=PG&f=1", "display_name": "Nauman Shakir", "link": "https://stackoverflow.com/users/5144315/nauman-shakir"}, "edited": false, "score": 0, "creation_date": 1437616450, "post_id": 31568767, "comment_id": 51108245, "body": "so what should I have to do to run the program correctly as I am a beginner."}], "tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": false, "score": 1, "last_activity_date": 1437582213, "creation_date": 1437582213, "answer_id": 31568767, "question_id": 31567748, "link": "https://stackoverflow.com/questions/31567748/my-c-program-is-crashing-when-i-call-a-method-from-a-class-instance-here-is-the/31568767#31568767", "title": "My C program is crashing when I call a method from a class instance here is the code", "body": "<pre><code> char *enc;\n    strcpy(enc,en.EncryptString(\"It is C's Lounge!! \"));\n</code></pre>\n\n<p>You don't provide any space for the copy - enc doesn't point anywhere. </p>\n"}, {"tags": [], "owner": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "is_accepted": false, "score": 0, "last_activity_date": 1437731844, "creation_date": 1437731844, "answer_id": 31607545, "question_id": 31567748, "link": "https://stackoverflow.com/questions/31567748/my-c-program-is-crashing-when-i-call-a-method-from-a-class-instance-here-is-the/31607545#31607545", "title": "My C program is crashing when I call a method from a class instance here is the code", "body": "<p>You never allocate any memory.</p>\n\n<p>When you say</p>\n\n<pre><code>char *foo;\n</code></pre>\n\n<p>You tell the compiler that you want to store a memory address to some data somewhere, but <em>not</em> that you also want to store some data. Your class stores two pointers (<code>int *k</code> and <code>char *temp</code>) that never get any memory assigned to them, and so does your main function with <code>char *enc</code>. This can never work.</p>\n\n<p>In C and C++, there are two modes of memory allocation: one is <em>stack-based</em> allocation, where you declare variable names in a function, and the compiler or the runtime will automatically allocate and release memory for you; the other is <em>heap-based</em> allocation, where you use <code>malloc</code> or <code>new</code> to allocate memory at run time, and must <em>manually</em> release that memory again with <code>delete</code> or <code>free</code>.</p>\n\n<p>A pointer is \"just\" a stack-allocated variable that contains the <em>address</em> of another memory location. If you don't assign any value to a pointer, it points to invalid memory, and whatever you try to do with it will fail. To fix your program, you must make sure that every pointer points to valid memory. If you want it to point to a stack-based variable, you use the address-of operator:</p>\n\n<pre><code>int val = 4;\nint *pointer_to_val = &amp;val;\n/* the pointer_to_val variable now holds the address of the val variable */\n</code></pre>\n\n<p>If you don't want it to point to a stack-allocated variable, you must allocate the memory yourself.</p>\n\n<p>In C++, heap memory is allocated with the <code>new</code> operator, like so:</p>\n\n<pre><code>ClassType *instance = new ClassType(arg1, arg2)\n</code></pre>\n\n<p>where <code>ClassType</code> is the type of the class you're creating an instance of, <code>instance</code> is the pointer where you want to store the address of the instance you've just created, and <code>arg1</code> and <code>arg2</code> are arguments to the <code>ClassType</code> constructor that you want to run.</p>\n\n<p>When you no longer need the allocated memory, you use <code>delete</code> to release the memory:</p>\n\n<pre><code>delete instance;\n</code></pre>\n\n<p>Alternatively, you can also use the C-style <code>malloc</code> and <code>free</code> functions. These are not operators; they are functions which return the address of the allocated memory. They do not work for C++ class instances (since you do not run the constructor over the returned memory), but if you want to run a pure-C program, they're all you have. With malloc, you do as follows:</p>\n\n<pre><code>char* string = malloc(size);\n</code></pre>\n\n<p>where <code>string</code> is the pointer for which you want to allocate memory, and <code>size</code> is the number of bytes you want the system to allocate for you. Once you're ready using the memory, you release it with free:</p>\n\n<pre><code>free(string);\n</code></pre>\n\n<p>When calling <code>delete</code> or <code>free</code>, it is not necessary to specify the size of the object (the system remembers that for you). Note, however, that you must make sure to <em>always</em> use <code>delete</code> for memory allocated with <code>new</code>, and to <em>always</em> use <code>free</code> for memory allocated with <code>malloc</code>. Mixing the two will result in undefined behaviour and possibly a crash.</p>\n"}], "owner": {"reputation": 75, "user_id": 5144315, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/26fcd7e9060ce65a664446feb8174d39?s=128&d=identicon&r=PG&f=1", "display_name": "Nauman Shakir", "link": "https://stackoverflow.com/users/5144315/nauman-shakir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1437731844, "creation_date": 1437579377, "last_edit_date": 1437584184, "question_id": 31567748, "link": "https://stackoverflow.com/questions/31567748/my-c-program-is-crashing-when-i-call-a-method-from-a-class-instance-here-is-the", "title": "My C program is crashing when I call a method from a class instance here is the code", "body": "<p>here is the class that I am using.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include &lt;string.h&gt;\nclass EnDe{\n\n    private:\n        int *k;\n        char *temp;\n\n    public:\n\n        char * EncryptString(char *str);                         \n        char * DecryptString(char *str);       \n         EnDe(int *key);};\n EnDe::EnDe(int *key){\n\n    k=key;\n}\n\nchar * EnDe::EncryptString(char *str){\n\n    int t=2;\n    t=(int)k[1]*(int)2;\n    for (int i=0;i&lt;strlen(str);i++){\n        temp[i]=str[i]+k[0]-k[2]+2-k[1]+k[3]+t;     \n\n\n    }\n    char alp=k[0]*57;\n    for (int y=strlen(str);y&lt;strlen(str)+9;y++){    //--*\n        temp[y]=alp+y;                  //--*\n    }\n    temp[(strlen(str)+9)]='\\0';     //--*\n    return temp;\n\n}\n\nchar * EnDe::DecryptString(char *str){\n\n    int t=2;\n    t=k[1]*2;\n\n    for (int i=0;i&lt;strlen(str);i++){\n\n        temp[i]=str[i]-t-k[3]+k[1]-2+k[2]-k[0];  \n\n    }\n\n        temp[(strlen(str)-9)]='\\0';\n    return temp;\n\n}\n</code></pre>\n\n<p>And here is the main program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"EnDe.h\"\n\nint main(void){\n\n    char *enc;\n\n    char op;\n\n    printf(\"\\nE to encrypt and D to decrypt\");\n\n    int opi[4]={1,2,9,1};   \n\n    EnDe en(opi);\n\n    strcpy(enc,en.EncryptString(\"It is C's Lounge!! \"));\n\n    printf(\"Encrypted :  %s\",enc);\n\n    return 0;\n}\n</code></pre>\n\n<p>Something is wrong with en.EncryptString function</p>\n\n<p>when I run the program it stops working giving error and on removing strcpy(enc,en.EncryptString(\"It is C's Lounge!! \")); it runs. I want this problem to be resolved.</p>\n"}, {"tags": ["c++", "stl", "set", "comparator"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1437580016, "post_id": 31567710, "comment_id": 51091175, "body": "Do you have to use a function pointer?  A <a href=\"http://stackoverflow.com/questions/356950/c-functors-and-their-uses\">functor</a> can make this easier."}, {"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1437580058, "post_id": 31567710, "comment_id": 51091209, "body": "@NathanOliver A functor is fine."}], "answers": [{"comments": [{"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "edited": false, "score": 0, "creation_date": 1437599908, "post_id": 31568119, "comment_id": 51103250, "body": "So simple. I probably should have come up with that on my own."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1437580416, "creation_date": 1437580416, "answer_id": 31568119, "question_id": 31567710, "link": "https://stackoverflow.com/questions/31567710/container-of-sets-using-non-default-comparison-predicate/31568119#31568119", "title": "Container of sets using non-default comparison predicate", "body": "<p>Since you can use a functor then you should be able to use:</p>\n\n<pre><code>struct Compare\n{\n    bool operator () (int lhs, int rhs) { return lhs - 10 &lt; rhs; }\n};\n\n\nint main()\n{\n    std::map&lt;int, std::set&lt;int, Compare&gt; &gt; data;\n}\n</code></pre>\n\n<p>Each new set created in the map would be default constructed with the type specified in the template parameters.</p>\n"}, {"comments": [{"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "edited": false, "score": 0, "creation_date": 1437581252, "post_id": 31568171, "comment_id": 51092085, "body": "See <a href=\"http://stackoverflow.com/questions/31567710/container-of-sets-using-non-default-comparison-predicate/31568201#comment51092074_31568201\" title=\"container of sets using non default comparison predicate\">stackoverflow.com/questions/31567710/&hellip;</a>"}], "tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 0, "last_activity_date": 1437580528, "creation_date": 1437580528, "answer_id": 31568171, "question_id": 31567710, "link": "https://stackoverflow.com/questions/31567710/container-of-sets-using-non-default-comparison-predicate/31568171#31568171", "title": "Container of sets using non-default comparison predicate", "body": "<p>Not sure why haven't you tried expanding your stub into a full example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;map&gt;\n\ntypedef std::set&lt;int,bool(*)(int,int)&gt; Set;\ntypedef std::map&lt;std::string, Set&gt; Map;\n\nbool f(int a, int b){ return a&lt;b;}\nbool g(int a, int b){ return a&gt;b;}\n\nint main() {\nMap m;\nm[\"f\"] = Set(&amp;f);\nm[\"g\"] = Set(&amp;g);\nfor(int i = -5; i &lt; 5; ++i) {\n    m[\"f\"].insert(i);\n    m[\"g\"].insert(i);\n}\nfor(Set::iterator i = m[\"f\"].begin(); i != m[\"f\"].end(); ++i){std::cout &lt;&lt; *i &lt;&lt; \" \";}\nstd::cout &lt;&lt; \"\\n\";\nfor(Set::iterator i = m[\"g\"].begin(); i != m[\"g\"].end(); ++i){std::cout &lt;&lt; *i &lt;&lt; \" \";}\nstd::cout &lt;&lt; \"\\n\";\nreturn 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>-5 -4 -3 -2 -1 0 1 2 3 4\n4 3 2 1 0 -1 -2 -3 -4 -5 \n</code></pre>\n\n<p>Live: <a href=\"http://ideone.com/D2qIHO\" rel=\"nofollow\">http://ideone.com/D2qIHO</a></p>\n\n<p>I see absolutely no problem in making a map of sets with custom comparers.</p>\n"}, {"comments": [{"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "edited": false, "score": 0, "creation_date": 1437581236, "post_id": 31568201, "comment_id": 51092074, "body": "That works, but I&#39;d like to avoid using the copy assignment operator. Seems like a waste to construct two <code>set</code>s and do a copy instead of just doing on construction and no copy. Plus, then I have to have a bunch of extra logic to determine whether a particular access is creating a new set or just adding something to an already existing one."}, {"owner": {"reputation": 195, "user_id": 3501669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af54e3de72dd49cf087173434c09d8d?s=128&d=identicon&r=PG&f=1", "display_name": "edflanders", "link": "https://stackoverflow.com/users/3501669/edflanders"}, "reply_to_user": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "edited": false, "score": 0, "creation_date": 1437581967, "post_id": 31568201, "comment_id": 51092521, "body": "Ah. Well, as long as you&#39;re using the same comparison function for all the sets, then NathanOliver&#39;s answer of a default-constructible function object will do the trick."}], "tags": [], "owner": {"reputation": 195, "user_id": 3501669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3af54e3de72dd49cf087173434c09d8d?s=128&d=identicon&r=PG&f=1", "display_name": "edflanders", "link": "https://stackoverflow.com/users/3501669/edflanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1437580617, "creation_date": 1437580617, "answer_id": 31568201, "question_id": 31567710, "link": "https://stackoverflow.com/questions/31567710/container-of-sets-using-non-default-comparison-predicate/31568201#31568201", "title": "Container of sets using non-default comparison predicate", "body": "<p>I might be misunderstanding the question, but you can just add keys the normal way, and construct the sets any way you want:</p>\n\n<pre><code>bool Cmp(int, int);\ntypedef std::set&lt;int,bool(*)(int,int)&gt; MySet;\ntypedef std::map&lt;int, MySet&gt; MyMap;\n...\nMyMap m;\nm[1] = MySet(Cmp);\n</code></pre>\n"}], "owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1588, "favorite_count": 0, "accepted_answer_id": 31568119, "answer_count": 3, "score": 1, "last_activity_date": 1437580617, "creation_date": 1437579274, "question_id": 31567710, "link": "https://stackoverflow.com/questions/31567710/container-of-sets-using-non-default-comparison-predicate", "title": "Container of sets using non-default comparison predicate", "body": "<p>I would like to create a <code>std::map&lt;T1, std::set&lt;T2&gt; &gt;</code> where the <code>set</code>s use a non-default comparator. For example, if I were declaring the <code>set</code> on its own, I would declare it as:</p>\n\n<pre><code>std::set&lt;int,bool(*)(int,int)&gt; s (fn_pt);\n</code></pre>\n\n<p>where <code>fn_pt</code> is a function pointer. In my example, when I add a new key to the <code>std::map</code>, I would like the set to be constructed with that non-default comparator. Is such a thing possible?</p>\n\n<p>To further complicate things, my compiler does not support C++11, so I can only accept a solution that does not require C++11; however, if there is a C++11 way of doing this, I would be interested in seeing that as well.</p>\n"}, {"tags": ["c++", "macos", "video-toolbox"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1437582825, "post_id": 31567639, "comment_id": 51093061, "body": "If you change the H264 profile does it have any effect?"}, {"owner": {"reputation": 2340, "user_id": 927438, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mB0T5.jpg?s=128&g=1", "display_name": "NadavRub", "link": "https://stackoverflow.com/users/927438/nadavrub"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1437590815, "post_id": 31567639, "comment_id": 51097858, "body": "Unfortunately, no, it has no affect"}, {"owner": {"reputation": 2340, "user_id": 927438, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mB0T5.jpg?s=128&g=1", "display_name": "NadavRub", "link": "https://stackoverflow.com/users/927438/nadavrub"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1438022147, "post_id": 31567639, "comment_id": 51266065, "body": "I have ended up using libx264 instead of the VideoToolBox"}, {"owner": {"reputation": 653, "user_id": 2807286, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/672c6809e7980980488c74f36d73564a?s=128&d=identicon&r=PG&f=1", "display_name": "PR Singh", "link": "https://stackoverflow.com/users/2807286/pr-singh"}, "edited": false, "score": 0, "creation_date": 1507640201, "post_id": 31567639, "comment_id": 80283033, "body": "@NadavRub how was the synchronization??,i achieved good quality but speed is slow(fraction of seconds)"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11094070, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6ekgJ5dOA_M/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPYdrqrZfnq1g4TZ2H_bDIRuidP0Q/mo/photo.jpg?sz=128", "display_name": "xin xin Fang", "link": "https://stackoverflow.com/users/11094070/xin-xin-fang"}, "is_accepted": false, "score": 0, "last_activity_date": 1550729439, "creation_date": 1550729439, "answer_id": 54800373, "question_id": 31567639, "link": "https://stackoverflow.com/questions/31567639/osx-videotoolbox-compression-session/54800373#54800373", "title": "OSX, VideoToolbox, Compression Session", "body": "<p>There is another factor you need to care about, after the VTCompressionSession is created, you need to set your frame timestamp correctly in VTCompressionSessionEncodeFrame.</p>\n"}], "owner": {"reputation": 2340, "user_id": 927438, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mB0T5.jpg?s=128&g=1", "display_name": "NadavRub", "link": "https://stackoverflow.com/users/927438/nadavrub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1495, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1550729439, "creation_date": 1437579103, "last_edit_date": 1592644375, "question_id": 31567639, "link": "https://stackoverflow.com/questions/31567639/osx-videotoolbox-compression-session", "title": "OSX, VideoToolbox, Compression Session", "body": "<h2>Environment</h2>\n<ul>\n<li>OSX Yosemite</li>\n<li>xcode 6.4</li>\n<li>C++</li>\n</ul>\n<h2>Use-case</h2>\n<p>Given a h264 GOP consisting of a single Key-Frame and multiple corresponding Delta Frames, decode the GOP, and then, encode a single <strong>4.2Mbit</strong> Key-frame</p>\n<h2>Problem description</h2>\n<p>I am able to decode the GOP and encode the Key-Frame, however, the resulting Key-Frame is of a low quality ( low bit-rate ), that is, although I specifically set the bit-rate to 4.2Mbit ( this can be seen in the code snap bellow ), Having in mind I need only a <strong>single Key-Frame</strong>, Is there any way to setup the VideoToolBox Encoder to output a high bit-rate Key-frame ?</p>\n<pre><code>const CMVideoCodecType  fourcc  = (CMVideoCodecType)CMVideoFormatDescriptionGetCodecType(fmt);\n\n// Else, generate a h264 KeyFrame\n\nCFObjectSmartPtr&lt; CFMutableDictionaryRef &gt;  dictEncSpec;\ndictEncSpec.Attach(CFDictionaryCreateMutable(NULL, 0, &amp;kCFTypeDictionaryKeyCallBacks, &amp;kCFTypeDictionaryValueCallBacks));\n//dictEncSpec.Attach(CFDictionaryCreateMutable(NULL, 0, 0, 0));\n// CFDictionarySetNumVal(dictEncSpec, kVTVideoEncoderSpecification_RequireHardwareAcceleratedVideoEncoder, TRUE);\nCFDictionarySetValue(dictEncSpec, kVTCompressionPropertyKey_ProfileLevel, kVTProfileLevel_H264_High_3_2);\n// CFDictionarySetValue(dictEncSpec, kVTCompressionPropertyKey_RealTime, kCFBooleanTrue);\n\n// CFDictionarySetValue(dictEncSpec, kVTCompressionPropertyKey_H264EntropyMode, kVTH264EntropyMode_CABAC);\n\nCFDictionarySetNumVal(dictEncSpec, kVTCompressionPropertyKey_AverageBitRate, 4200000);\nCFDictionarySetNumVal(dictEncSpec, kVTCompressionPropertyKey_Quality, 1.0f);\nCFDictionarySetNumVal(dictEncSpec, kVTCompressionPropertyKey_MaxFrameDelayCount, 0);\nCFDictionarySetNumVal(dictEncSpec, kVTCompressionPropertyKey_MaxKeyFrameIntervalDuration, 1);\nCFDictionarySetNumVal(dictEncSpec, kVTCompressionPropertyKey_ExpectedDuration, 1);\nCFDictionarySetNumVal(dictEncSpec, kVTCompressionPropertyKey_ExpectedFrameRate, 10);\n// CFDictionarySetNumVal(dictEncSpec, kVTCompressionPropertyKey_SourceFrameCount, 1);\nCFDictionarySetNumVal(dictEncSpec, kVTVideoEncoderSpecification_EnableHardwareAcceleratedVideoEncoder, TRUE);\n\nCFObjectSmartPtr&lt; VTCompressionSessionRef &gt; sessionCompression;\nstatus = VTCompressionSessionCreate(0, res.width, res.height, fourcc, (CFDictionaryRef)dictEncSpec, 0, 0, CompressionCallback, &amp;ctx, &amp;sessionCompression);\nif (noErr != status)\n    return HRESULT_FROM_ERRNO(status);\nif (noErr != (status = VTCompressionSessionEncodeFrame(sessionCompression, ctx.yuvFrame, timestamp, timestamp, 0, 0, 0)))\n    return HRESULT_FROM_ERRNO(status);\nif(noErr != (status = VTCompressionSessionCompleteFrames(sessionCompression, timestamp)))\n    return HRESULT_FROM_ERRNO(status);\nif (0 == ctx.keyFrame) {\n    assert(false);\n    return E_UNEXPECTED;\n}\n</code></pre>\n<p><strong>ctx.keyFrame</strong> Ends up to be of a very low quality</p>\n"}, {"tags": ["c++", "macros"], "comments": [{"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1437578997, "post_id": 31567543, "comment_id": 51090446, "body": "You can&#39;t declare a variable inside an <code>if</code> statement."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 7, "creation_date": 1437579258, "post_id": 31567543, "comment_id": 51090632, "body": "@KABoissonneault Are you sure?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1437579819, "post_id": 31567543, "comment_id": 51091029, "body": "What code do you get when you manually expand the macro?  Does it compile?  What do you need to do to get it to compile?"}, {"owner": {"reputation": 303, "user_id": 5140782, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d82db70e2e14792ce50f71defb2a5e3c?s=128&d=identicon&r=PG&f=1", "display_name": "TLOlczyk", "link": "https://stackoverflow.com/users/5140782/tlolczyk"}, "edited": false, "score": 0, "creation_date": 1437579997, "post_id": 31567543, "comment_id": 51091163, "body": "Stay away from macros. Bjarne says macros are evil. He put in a lot of features just so you have a good chance to avoit using macros."}, {"owner": {"reputation": 303, "user_id": 5140782, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d82db70e2e14792ce50f71defb2a5e3c?s=128&d=identicon&r=PG&f=1", "display_name": "TLOlczyk", "link": "https://stackoverflow.com/users/5140782/tlolczyk"}, "edited": false, "score": 0, "creation_date": 1437580053, "post_id": 31567543, "comment_id": 51091203, "body": "Surprisingly yes you cannot declare a variable in the predicate of an if statement."}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1437580190, "post_id": 31567543, "comment_id": 51091305, "body": "You could do something like: #define IF(type, x) { type val; if(val = xl) ... } ... IF(int, rand())"}], "answers": [{"comments": [{"owner": {"reputation": 392, "user_id": 3008853, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a17176dd4da8639fd299ca227e6241e7?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin", "link": "https://stackoverflow.com/users/3008853/marcin"}, "edited": false, "score": 0, "creation_date": 1437599322, "post_id": 31567835, "comment_id": 51102919, "body": "This resolution don&#39;t works becouse I always get &quot;val=1&quot;."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1437579595, "creation_date": 1437579595, "answer_id": 31567835, "question_id": 31567543, "link": "https://stackoverflow.com/questions/31567543/create-new-value-in-c-macro-int-val-rand/31567835#31567835", "title": "Create new value in C++ macro &quot;int val = rand()&quot;", "body": "<p>I belive the problem is that you are wrapping the variable decleration in <code>()</code>.  If I remove the parentheses then the code compiles:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n\nbool printIf(int line, bool val)\n{\n  std::cout &lt;&lt; \"Line: \" &lt;&lt; line &lt;&lt; std::endl;\n  return val;\n}\n\n#define IF(x) if( x ? printIf(__LINE__, true) : printIf(__LINE__, false) )\n\nint main()\n{\n  srand(time(NULL));\n  //int val;\n  //IF (val = rand())\n  IF(int val = rand())\n  {\n    std::cout &lt;&lt; \"val = \" &lt;&lt; val &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Line: 18\nval = 1\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/54398be5c234de23\" rel=\"nofollow\">Live Example</a></p>\n"}], "owner": {"reputation": 392, "user_id": 3008853, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a17176dd4da8639fd299ca227e6241e7?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin", "link": "https://stackoverflow.com/users/3008853/marcin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437579595, "creation_date": 1437578837, "question_id": 31567543, "link": "https://stackoverflow.com/questions/31567543/create-new-value-in-c-macro-int-val-rand", "title": "Create new value in C++ macro &quot;int val = rand()&quot;", "body": "<p>I'm trying to create C++ macro which can do something while condition under \"if\" is checking.</p>\n\n<p>My macro works in most cases, but I have problem when under if is created temporary value. Of course I can move creating of new value before \"IF\", but it is bothersome is I have to do in many places in code.</p>\n\n<p>It is possible to get work \"IF(int val = rand())\"?</p>\n\n<p>This code have no sense, but shows my problem.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n\nbool printIf(int line, bool val)\n{\n  std::cout &lt;&lt; \"Line: \" &lt;&lt; line &lt;&lt; std::endl;\n  return val;\n}\n\n#define IF(x) if( (x) ? printIf(__LINE__, true) : printIf(__LINE__, false) )\n\nint main()\n{\n  srand(time(NULL));\n  //int val;\n  //IF (val = rand())\n  IF(int val = rand())\n  {\n    std::cout &lt;&lt; \"val = \" &lt;&lt; val &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>Errors while compilation:</p>\n\n<pre><code>$ g++ main.cpp &amp;&amp; ./a.out\nmain.cpp: In function \u2018int main()\u2019:\nmain.cpp:18:6: error: expected primary-expression before \u2018int\u2019\n   IF(int val = rand())\n      ^\nmain.cpp:11:20: note: in definition of macro \u2018IF\u2019\n #define IF(x) if( (x) ? printIf(__LINE__, true) : printIf(__LINE__, false) )\n                    ^\nmain.cpp:18:6: error: expected \u2018)\u2019 before \u2018int\u2019\n   IF(int val = rand())\n      ^\nmain.cpp:11:20: note: in definition of macro \u2018IF\u2019\n #define IF(x) if( (x) ? printIf(__LINE__, true) : printIf(__LINE__, false) )\n                    ^\nmain.cpp:22:1: error: expected \u2018)\u2019 before \u2018}\u2019 token\n }\n ^\nmain.cpp:22:1: error: expected primary-expression before \u2018}\u2019 token\n</code></pre>\n"}, {"tags": ["c++", "codeblocks", "libcurl"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 1679922, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74415440b66ee51e72bbce64e714c8ea?s=128&d=identicon&r=PG", "display_name": "Dilushan", "link": "https://stackoverflow.com/users/1679922/dilushan"}, "edited": false, "score": 0, "creation_date": 1437587868, "post_id": 31570346, "comment_id": 51096014, "body": "Thanks for pointing out my silly mistake. That fixed my issue"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 3, "last_activity_date": 1437587075, "creation_date": 1437587075, "answer_id": 31570346, "question_id": 31567457, "link": "https://stackoverflow.com/questions/31567457/libcurl-automatically-replacing-line-feed-with-line-feed-carriage-return/31570346#31570346", "title": "libcurl automatically replacing line feed with line feed + carriage return", "body": "<p>libburl is not the culprit, but underlying system library is. Because Windows has a notion of binary files where no conversion should occur, and text files where end of lines are represented as CrLf (<code>\\r\\n</code>) on disk and only <code>\\n</code> in C or C++.</p>\n\n<p>And the fix is quite easy : simply use <code>b</code> (for binary) in mode string in <code>open</code> :</p>\n\n<pre><code>pFile = fopen (\"myfile.png\",\"wb\");\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 1679922, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/74415440b66ee51e72bbce64e714c8ea?s=128&d=identicon&r=PG", "display_name": "Dilushan", "link": "https://stackoverflow.com/users/1679922/dilushan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 31570346, "answer_count": 1, "score": 1, "last_activity_date": 1437587075, "creation_date": 1437578638, "question_id": 31567457, "link": "https://stackoverflow.com/questions/31567457/libcurl-automatically-replacing-line-feed-with-line-feed-carriage-return", "title": "libcurl automatically replacing line feed with line feed + carriage return", "body": "<p>As title says when downloading something and saving libcurl replacing all the LF with LF + CR. It is fine for the text documents. But for binary it is a disaster. I already tried </p>\n\n<pre><code>curl_easy_setopt(curl, CURLOPT_CRLF, 0L);\n</code></pre>\n\n<p>How to disable this thing. I'm running on windows and curl 7.40.0</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;curl/curl.h&gt;\n\nusing namespace std;\n\nCURL *curl;\nCURLcode res;\n\nsize_t file_write_callback(char *ptr, size_t size, size_t nmemb, void *userdata)\n{\n    fwrite(ptr,size,nmemb,(FILE *)userdata);\n    return nmemb;\n}\n\nint main(void)\n{\n    FILE * pFile;\n    pFile = fopen (\"myfile.png\",\"w\");\n\n    curl = curl_easy_init();\n    curl_easy_setopt(curl, CURLOPT_URL, \"http://www.dilushan.tk/Media/128px_feed.png\");\n    curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);\n\n    if (pFile!=NULL)\n    {\n        curl_easy_setopt(curl, CURLOPT_WRITEDATA, pFile);\n        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, file_write_callback);\n        res = curl_easy_perform(curl);\n    }\n    fclose (pFile);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "multimap"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 2, "creation_date": 1437578879, "post_id": 31567283, "comment_id": 51090362, "body": "Implement <code>operator==</code> for <code>Foo</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1437581528, "post_id": 31567283, "comment_id": 51092233, "body": "You are trying to compare two <code>Foo</code>s for equality.  No map of any kind has anything to do with it. Besides, you are not using the multimap right. You have a key at hand, and then go ahead and perform a linear search for that key."}], "answers": [{"tags": [], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "is_accepted": true, "score": 2, "last_activity_date": 1437584360, "last_edit_date": 1495535627, "creation_date": 1437581568, "answer_id": 31568559, "question_id": 31567283, "link": "https://stackoverflow.com/questions/31567283/multimap-no-match-for-operator/31568559#31568559", "title": "Multimap no match for operator==", "body": "<p>Define the equality function for <code>Foo</code>s:</p>\n\n<pre><code>bool operator==(const Foo&amp; a, const Foo&amp; b) {\n    // return whether Foos are equal\n}\n</code></pre>\n\n<p>If you define that one, you'll also want to define <code>!=</code> for completeness:</p>\n\n<pre><code>bool operator=!(const Foo&amp; a, const Foo&amp; b) { return !operator==(a,b); }\n</code></pre>\n\n<p>Also, as per <a href=\"https://stackoverflow.com/questions/31567283/multimap-no-match-for-operator/31568559#comment51092233_31567283\">n.m.'s comment</a>, given that you have a <code>multimap</code> you should take advantage of it:</p>\n\n<pre><code>void Bar::find_and_erase(const unsigned long var1, const Foo&amp; var2)\n{\n    auto its = m_map.equal_range(var1);\n    for (auto it = its.first; it != its.second; ++it) {\n        if (it.second == var2) {\n            m_map.erase(it);\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1779, "user_id": 5031233, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/2a71ce927c21d822e74578204225e2d8?s=128&d=identicon&r=PG&f=1", "display_name": "waas1919", "link": "https://stackoverflow.com/users/5031233/waas1919"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 31568559, "answer_count": 1, "score": 0, "last_activity_date": 1437584360, "creation_date": 1437578214, "last_edit_date": 1437581439, "question_id": 31567283, "link": "https://stackoverflow.com/questions/31567283/multimap-no-match-for-operator", "title": "Multimap no match for operator==", "body": "<p>I have this <code>multimap</code> inside a <code>Bar class</code>, with an <code>unsigned long</code> and a reference to the <code>Foo class</code>.</p>\n\n<pre><code>class Bar\n{\n//etc.\n        struct map_sort\n        {\n            bool operator()(const unsigned long&amp; e1, const unsigned long&amp; e2) const\n            {\n                return (e2 &lt; e1);\n            }\n        };\n\n    std::multimap&lt;const unsigned long,const Foo&amp;, map_sort&gt; m_map;\n\n    find_and_erase(const unsigned long var1, const Foo&amp; var2);\n}\n</code></pre>\n\n<p>And now I want to retrieve all the values from the multimap and erase some.</p>\n\n<pre><code>void Bar::find_and_erase(const unsigned long var1, const Foo&amp; var2)\n{\n    auto it = m_map.begin();\n\n    for (it=m_map.begin(); it!=m_map.end(); ++it)\n    {\n        const unsigned long first = (*it).first;\n        const Foo&amp; second = (*it).second;\n        if((first == var1) &amp;&amp; (second == var2)) //&lt;----ERROR No Match for operator==\n            m_map.erase(it);\n    }\n}\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>How can I compare the <code>(second == var2)</code> ? </p>\n\n<p>(What I want is to find all entries from a multimap, and delete the ones on the <code>find_and_erase()</code> function, that matches the function argument. Don't know if there is an easier solution for this)</p>\n"}, {"tags": ["c++", "swig"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1437680934, "post_id": 31567231, "comment_id": 51145212, "body": "Can you flesh out your example to be a MCVE please? I&#39;m not quite sure what&#39;s not working for you."}, {"owner": {"reputation": 1554, "user_id": 2606757, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/435bacfa694744ecd187cbc68c619540?s=128&d=identicon&r=PG", "display_name": "Dreamcooled", "link": "https://stackoverflow.com/users/2606757/dreamcooled"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1437744015, "post_id": 31567231, "comment_id": 51172777, "body": "@Flexo I restructured the question. If it&#39;s still unclear to you, please point out exactly which aspects are unclear to you."}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1437944000, "post_id": 31567231, "comment_id": 51230253, "body": "Convert between Python-Integers and instances of that class. Do you want to keep a list of live instances of a given class? This sort of contradicts the whole point of SWIG. What would make sense was to copy the functionality of SWIG_NewPointerObj and the SWIG_init and operate on some dynamic type information."}, {"owner": {"reputation": 1554, "user_id": 2606757, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/435bacfa694744ecd187cbc68c619540?s=128&d=identicon&r=PG", "display_name": "Dreamcooled", "link": "https://stackoverflow.com/users/2606757/dreamcooled"}, "edited": false, "score": 0, "creation_date": 1437944810, "post_id": 31567231, "comment_id": 51230498, "body": "Oopps, I guess I was a bit unclear. If there&#39;s an <b>out</b>-Typemap available for the passed <code>typeName</code> it should be applied (one way). I don&#39;t need to convert it back. I updated the question accordingly."}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1438034687, "post_id": 31567231, "comment_id": 51272714, "body": "Okay. SWIG_NewPointerObj uses the info to find the correct typemap and this includes the ones that you have made yourself. What I usually do is to shared typemaps between multiple libraries - shared objects. This is discussed under advanced topics in the SWIG user guide. It is pretty cool, when you have multiple libraries interfacing each other."}], "owner": {"reputation": 1554, "user_id": 2606757, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/435bacfa694744ecd187cbc68c619540?s=128&d=identicon&r=PG", "display_name": "Dreamcooled", "link": "https://stackoverflow.com/users/2606757/dreamcooled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 917, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1437944698, "creation_date": 1437578090, "last_edit_date": 1437944698, "question_id": 31567231, "link": "https://stackoverflow.com/questions/31567231/swig-swig-newpointerobj-and-typemaps", "title": "Swig: SWIG_NewPointerObj and Typemaps", "body": "<p>I'm working on a Qt-Application and I use Swig to generate Python Bindings for my Public API.</p>\n\n<p>I trying to implement signal/slots in SWIG and also embedding python into my final app. In the end it always boils down to a simple function, which SWIG seems to miss or I haven't found yet:</p>\n\n<p><code>PyObject* createPyObject(QString typeName, bool passOwnership, void* obj)</code></p>\n\n<h2>Requirements</h2>\n\n<p>The function should create a PyObject from the passed <code>obj</code>. Whereas <code>typeName</code> is the type of the instance to which <code>obj</code> points to and <code>passOwnership</code> specifies whether or not the object should be owned by the Python Interpreter afterwards. The function should:  </p>\n\n<ol>\n<li>Apply the <strong>out</strong>-Typemap for the passed type, if it exists</li>\n<li>Otherwise wrap the object as a \"Swig Proxy Object of Type ...\" if possible</li>\n<li>And if that's also not possible it should return a \"Swig Object of Type ...\"</li>\n</ol>\n\n<h2>Example</h2>\n\n<p>Let's say I have three classes:  </p>\n\n<ul>\n<li><code>class A1</code> for which I have a <strong>out</strong>-Typemap to convert from instances of this class to  <em>Python-Integers</em>.</li>\n<li><code>class A2</code> for which I have a <strong>out</strong>-Typemap to convert from instances of this class to <em>Python-Tuples</em>.</li>\n<li><code>class B</code> which I have wrapped using a SWIG Interface file</li>\n<li><code>class C</code> which is completely unknown to SWIG.</li>\n</ul>\n\n<p>then the <code>createPyObject</code> should</p>\n\n<ul>\n<li>return a <code>PyIntObject*</code> if it's invoked like <code>createPyObj(\"A1\",true,new A1())</code></li>\n<li>return a <code>PyTupleObject*</code> if it's invoked like <code>createPyObj(\"A2\",true,new A2())</code></li>\n<li>return a <code>proxy of &lt;Swig Object of Type 'B*'&gt;</code> if it's invoked like <code>createPyObj(\"B\",true,new B())</code></li>\n<li>return a <code>Swig Object of Type 'C*'</code> if it's invoked like <code>createPyObj(\"C\",true,new C())</code></li>\n</ul>\n\n<p>So to summarize: \nI want the returned PyObject to be constructed like as if it was a return value of a function which was wrapped using a SWIG interface file.</p>\n\n<h2>My current implementation</h2>\n\n<pre><code>PyObject* createPyObject(QString typeName, bool passOwnership, void* obj) {\n\n    typeName += \" *\"; //Pointer symbol\n    swig_type_info* info = SWIG_TypeQuery(typeName.toStdString().c_str());\n\n    if (info == nullptr) return nullptr;\n\n    return SWIG_NewPointerObj(obj, info, passOwnership ? SWIG_POINTER_OWN : 0);\n}\n</code></pre>\n\n<p>This works fine for types which require no typemap and are known to SWIG (Point 2 in the Requirements). But it doesn't work for types which require a typemap.</p>\n\n<p><strong>Could you provide me with a correct implementation of  <code>createPyObject</code> ?</strong> By correct I mean, one that meets all the requirements listed above.</p>\n"}, {"tags": ["c++", "macros"], "comments": [{"owner": {"reputation": 1784, "user_id": 5088165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c54064a4903efcc8bbb27c502f04c693?s=128&d=identicon&r=PG", "display_name": "Panwen Wang", "link": "https://stackoverflow.com/users/5088165/panwen-wang"}, "edited": false, "score": 0, "creation_date": 1437577914, "post_id": 31567134, "comment_id": 51089607, "body": "when I remove line `a++;\\`, everything goes all right, it prints 024."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1437578053, "post_id": 31567134, "comment_id": 51089724, "body": "It appears outside any valid scope for expression statements. I&#39;d recommend to preprocess your code with <code>-E</code> and see what&#39;s the actual result."}, {"owner": {"reputation": 3277, "user_id": 3087952, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/DijUj.png?s=128&g=1", "display_name": "nonsensation", "link": "https://stackoverflow.com/users/3087952/nonsensation"}, "edited": false, "score": 0, "creation_date": 1437588342, "post_id": 31567134, "comment_id": 51096300, "body": "You can use a <code>static</code> variable in a function if you want to keep incrementing <code>a</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1784, "user_id": 5088165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c54064a4903efcc8bbb27c502f04c693?s=128&d=identicon&r=PG", "display_name": "Panwen Wang", "link": "https://stackoverflow.com/users/5088165/panwen-wang"}, "edited": false, "score": 0, "creation_date": 1437578691, "post_id": 31567286, "comment_id": 51090225, "body": "OK, that&#39;s the difference between C++ and a script lang. Expression must be inside a function. Thx."}], "tags": [], "owner": {"reputation": 650, "user_id": 5061723, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/812dfad842a1c235d23f5ab4d7f6ff9d?s=128&d=identicon&r=PG&f=1", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/5061723/isaiah"}, "is_accepted": false, "score": 7, "last_activity_date": 1437579045, "last_edit_date": 1437579045, "creation_date": 1437578222, "answer_id": 31567286, "question_id": 31567134, "link": "https://stackoverflow.com/questions/31567134/c-variable-does-not-name-a-type-in-macro/31567286#31567286", "title": "c++ variable does not name a type in macro", "body": "<p>Look at the expansion of the macro:</p>\n\n<p><code>F(nn)</code> becomes</p>\n\n<pre><code>int tnn(int, int);\na++;\nint tnn(int i, int j) {\n  return i * j;\n}\n</code></pre>\n\n<p>The variable 'a' is being incremented <strong><em>outside</em></strong> a function which is a syntax error.</p>\n\n<p>Like the other answer said, you cannot execute statements wherever you please; statements must be inside a function in order to be valid.</p>\n\n<p>There are a few things that can go in the <em>global scope</em>:</p>\n\n<ol>\n<li>Namespace declaration and definitions</li>\n<li>Global variable <strong>declarations</strong></li>\n<li>Function prototypes and definitions</li>\n<li>Template and class declarations and definitions</li>\n<li>Preprocessor directives</li>\n</ol>\n\n<p>Things that must be in function scope:</p>\n\n<ol>\n<li>Control statements such as if and for</li>\n<li>Labels</li>\n<li>Function <strong>calls</strong></li>\n</ol>\n\n<p>Finally, the above lists are not all inclusive.</p>\n"}, {"comments": [{"owner": {"reputation": 650, "user_id": 5061723, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/812dfad842a1c235d23f5ab4d7f6ff9d?s=128&d=identicon&r=PG&f=1", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/5061723/isaiah"}, "edited": false, "score": 0, "creation_date": 1437578763, "post_id": 31567501, "comment_id": 51090269, "body": "Nice answr -- you&#39;re more thorough than I was"}], "tags": [], "owner": {"reputation": 303, "user_id": 5140782, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d82db70e2e14792ce50f71defb2a5e3c?s=128&d=identicon&r=PG&f=1", "display_name": "TLOlczyk", "link": "https://stackoverflow.com/users/5140782/tlolczyk"}, "is_accepted": true, "score": 6, "last_activity_date": 1437580282, "last_edit_date": 1437580282, "creation_date": 1437578725, "answer_id": 31567501, "question_id": 31567134, "link": "https://stackoverflow.com/questions/31567134/c-variable-does-not-name-a-type-in-macro/31567501#31567501", "title": "c++ variable does not name a type in macro", "body": "<p>Your macro ( in the nn case) expands to:</p>\n\n<pre><code>int a=0;\n\nint tnn(int, int); a ++; int tnn(int i, int j)  {\n    return i*j;\n}\n\nint main() {\n int b = tnn(3, 8);\n std::cout &lt;&lt; a &lt;&lt; b;\n}\n</code></pre>\n\n<p>There is no <em>global scope</em> in C++. That is only in scripting languages.\nExecution order is an initialization library-- something like crt0.s which \nconstructs your run time envioronment. Then initialize global variables ( this part can get very complicated ) then run main.</p>\n\n<p>You statement fails simply because you cannot put arbitrariy executable code where the macro is expanded.</p>\n\n<p>PS: Bjarne says don't use macros. In fact he create const, inline and to some degree templates so that you can avoid macros. <strong>Macros are evil!!!!</strong></p>\n"}], "owner": {"reputation": 1784, "user_id": 5088165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c54064a4903efcc8bbb27c502f04c693?s=128&d=identicon&r=PG", "display_name": "Panwen Wang", "link": "https://stackoverflow.com/users/5088165/panwen-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1319, "favorite_count": 2, "accepted_answer_id": 31567501, "answer_count": 2, "score": 3, "last_activity_date": 1437580282, "creation_date": 1437577831, "question_id": 31567134, "link": "https://stackoverflow.com/questions/31567134/c-variable-does-not-name-a-type-in-macro", "title": "c++ variable does not name a type in macro", "body": "<p>Have this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint a=0;\n\n#define F(f) \\\n  int t##f(int, int);\\\n  a ++;\\\n  int t##f(int i, int j)  \n\nF(nn) {\n    return i*j;\n}\n\nint main() {\n int b = tnn(3, 8);\n std::cout &lt;&lt; a &lt;&lt; b;\n}\n</code></pre>\n\n<p>Got error when compiling:</p>\n\n<pre><code>7:3: error: 'a' does not name a type\n10:1: note: in expansion of macro 'F'\n</code></pre>\n\n<p>Why isn't <code>a</code> visible in macro at the position it expands?</p>\n"}, {"tags": ["c++", "time"], "answers": [{"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 3, "last_activity_date": 1437577992, "creation_date": 1437577992, "answer_id": 31567196, "question_id": 31567131, "link": "https://stackoverflow.com/questions/31567131/clock-gettime-function-outputting-incorrect-time/31567196#31567196", "title": "Clock_gettime() function outputting incorrect time", "body": "<p><code>timespec::tv_nsec</code> is an integer type, so if <code>BILLION</code> is also an integer type then:</p>\n\n<pre><code>( stop.tv_nsec - start.tv_nsec )\n    / BILLION;\n</code></pre>\n\n<p>will truncate to zero. If the <code>tv_sec</code> values are the same you get a zero difference.</p>\n\n<p>Try:</p>\n\n<pre><code>double( stop.tv_nsec - start.tv_nsec )\n    / BILLION;\n</code></pre>\n\n<p>That will perform the division with a <code>double</code> type.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4973007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 31567196, "answer_count": 1, "score": 1, "last_activity_date": 1437577992, "creation_date": 1437577830, "question_id": 31567131, "link": "https://stackoverflow.com/questions/31567131/clock-gettime-function-outputting-incorrect-time", "title": "Clock_gettime() function outputting incorrect time", "body": "<p>I am trying to get the runtime of the following code using the clock_gettime function. However when I am running the code I am receiving a time of 0.0000 every time it runs. I have output the start and stop time individually also and I am receiving the exact same answer.</p>\n\n<pre><code>struct timespec start, stop;\ndouble accum;\n\nif( clock_gettime( CLOCK_REALTIME, &amp;start) == -1 ) {\n  perror( \"clock gettime\" );\n  exit( EXIT_FAILURE );\n}\n\nint src = 1, final_ret = 0;\nfor (int t = 0; t &lt; rows - 1; t += pyramid_height)\n{\n    int temp = src;\n    src = final_ret;\n    final_ret = temp;\n\n    // Calculate this for the kernel argument...\n    int arg0 = MIN(pyramid_height, rows-t-1);\n    int theHalo = HALO;\n\n    // Set the kernel arguments.\n    clSetKernelArg(cl.kernel(kn), 0,  sizeof(cl_int), (void*) &amp;arg0);\n    clSetKernelArg(cl.kernel(kn), 1,  sizeof(cl_mem), (void*) &amp;d_gpuWall);\n    clSetKernelArg(cl.kernel(kn), 2,  sizeof(cl_mem), (void*) &amp;d_gpuResult[src]);\n    clSetKernelArg(cl.kernel(kn), 3,  sizeof(cl_mem), (void*) &amp;d_gpuResult[final_ret]);\n    clSetKernelArg(cl.kernel(kn), 4,  sizeof(cl_int), (void*) &amp;cols);\n    clSetKernelArg(cl.kernel(kn), 5,  sizeof(cl_int), (void*) &amp;rows);\n    clSetKernelArg(cl.kernel(kn), 6,  sizeof(cl_int), (void*) &amp;t);\n    clSetKernelArg(cl.kernel(kn), 7,  sizeof(cl_int), (void*) &amp;borderCols);\n    clSetKernelArg(cl.kernel(kn), 8,  sizeof(cl_int), (void*) &amp;theHalo);\n    clSetKernelArg(cl.kernel(kn), 9,  sizeof(cl_int) * (cl.localSize()), 0);\n    clSetKernelArg(cl.kernel(kn), 10, sizeof(cl_int) * (cl.localSize()), 0);\n    clSetKernelArg(cl.kernel(kn), 11, sizeof(cl_mem), (void*) &amp;d_outputBuffer);\n    cl.launch(kn);\n}\n\nif( clock_gettime( CLOCK_REALTIME, &amp;stop) == -1 ) {\n  perror( \"clock gettime\" );\n  exit( EXIT_FAILURE );\n}\nprintf( \"%lf\\n\", stop.tv_sec ); \n printf( \"%lf\\n\", start.tv_sec );  \naccum = ( stop.tv_sec - start.tv_sec )\n      + ( stop.tv_nsec - start.tv_nsec )\n        / BILLION;\nprintf( \"%lf\\n\", accum );\n</code></pre>\n\n<p>Any advice on what I'm doing wrong is much appreciated</p>\n"}]