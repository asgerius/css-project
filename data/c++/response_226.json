[{"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1557360043, "post_id": 56050448, "comment_id": 98742210, "body": "<i>However when i try to use another data type it does not compile.</i>  -- What is the exact error?  Also using <code>typeid</code> when you&#39;re supposed to be using templates seems to me a huge design flaw.  You&#39;re defeating the whole purpose of templates by using <code>typeid</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1557360400, "post_id": 56050448, "comment_id": 98742268, "body": "Your <code>display</code> function lies.  The declaration says it returns a <code>DataType</code> object, but there are no <code>return</code> statements inside the function.  I recommend either changing the return type to <code>void</code> or returning a <code>DataType</code> object."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1557360594, "post_id": 56050448, "comment_id": 98742298, "body": "You should not have <code>if</code> statement based on data type.  Instead, you should require that <code>operator&lt;&lt;</code> be defined for the <code>DataType</code>.  Otherwise, you&#39;ll have to keep changing your List template for each data type.  See <code>std::list</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1557361041, "post_id": 56050448, "comment_id": 98742371, "body": "To add to my first comment, I am betting that your usage of<code>typeid</code> is what is causing the issue.  If the template argument is <code>std::string</code>, and you have code in your template function body that has any code assuming the type is <code>int</code>, then that will not compile.  Templates don&#39;t work that way -- it requires more sophistication (std::enable_if, template specialization) if you are trying to filter out or have different behavior based on template type.  Or do as Thomas Matthews suggests -- if the type doesn&#39;t compile, then it doesn&#39;t satisfy the requirements for your template."}], "owner": {"reputation": 1, "user_id": 11472794, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303969212974835/picture?type=large", "display_name": "Zach Ellis", "link": "https://stackoverflow.com/users/11472794/zach-ellis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557359831, "creation_date": 1557359831, "question_id": 56050448, "link": "https://stackoverflow.com/questions/56050448/how-to-get-code-to-compile-with-payroll-datatype-intemplate-works-with-integers", "title": "How to get code to compile with PayRoll Datatype intemplate? Works with integers", "body": "<p>I can get the code to compile and work properly with integers, however when i try to use another data type it does not compile. Using templates</p>\n\n<p>It appears to be an issue with the display function but no matter what i try it does not work.\n i have included the main file and the SUList file for reference. the integer block of code works and compiles and prints fine, but whwn implementing another datatype the program will not compile and work as it should.</p>\n\n<p>it seems to be an issue with the display function that i also reference a payroll function with a printcheck function that works properly when seperatly tested. </p>\n\n<pre><code>'''`'''\n// Implementation file for the SUList Class\n#include \"SUList.h\"\n#include \"PayRoll.h\"\n#include \"SUStack.h\"\n#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\nusing namespace std;\n\n\n\ntemplate &lt;class DataType&gt;\nDataType SUList&lt;DataType&gt;::display()\n{\n    int a;\n   // PayRoll myList;\n\n    int num = size();\n    if (num == 0)\n    {\n        throw \"List is empty...\\n\";\n    }\n    if(typeid(DataType) == typeid(a))\n    {\n        for(int i=1; i&lt;=num; i++)\n        {\n            std::cout &lt;&lt; head-&gt;data &lt;&lt; std::endl;\n            head = head-&gt;next;\n        }\n    }\n    if(typeid(DataType) == typeid(PayRoll))\n    {\n        //myList.printCheck();\n    }\n}\n\n\n\n\n\n\n\n\n\nMain.cpp\n\n#include&lt;iostream&gt;\n#include \"SUList.h\"\n#include \"SUStack.h\"\n#include \"SUQueue.h\"\n#include \"PayRoll.h\"\n#include \"SUStack.cpp\"\n#include \"SUList.cpp\"\n#include \"SUQueue.cpp\"\n\nint main(){\n  SUList&lt;int&gt; myList;\n  SUList&lt;PayRoll&gt; pList;\n  SUStackList&lt;PayRoll&gt; pStackList;\n\n  /**\n   * Test the SUList using ints\n */  \n\n  myList.putFront(1);\n  myList.putFront(6);\n  myList.putFront(2);\n  myList.putBack(4);\n  myList.putBack(5);\n  myList.putFront(3);\n\n  myList.display();\n\n  std::cout &lt;&lt; \"++++++++++++\" &lt;&lt; std::endl;\n\n  /**\n   * Test the SUList using PayRoll\n   */\n\n  pList.putFront(PayRoll(\"Bob\", 20, 35));\n  pList.putFront(PayRoll(\"Alice\", 10, 35));\n  pList.putBack(PayRoll(\"Charlie\", 25, 35));\n  pList.putBack(PayRoll(\"Diana\", 10, 35));\n  pList.putFront(PayRoll(\"Eve\", 30, 35));\n\n // pList.display();\n\n\n  return 0;`\n</code></pre>\n"}, {"tags": ["c++", "function", "if-statement", "menu", "arduino"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 2, "creation_date": 1557359042, "post_id": 56050370, "comment_id": 98742030, "body": "That opening block comment should end in <code>*&#47;</code> shouldn&#39;t it? The syntax highlighting is all off. I&#39;d fix it, but I don&#39;t want to risk that somehow being the cause of the error (although I don&#39;t think it could possibly be)."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1557359605, "post_id": 56050370, "comment_id": 98742117, "body": "Also are you missing a brace for <code>if (entrada == 3) {</code>, because afterwards you reset <code>entrada = 0</code> then check if it&#39;s 9..."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 2, "creation_date": 1557361610, "post_id": 56050370, "comment_id": 98742476, "body": "Please expand upon &quot;won&#39;t work&quot; -- does it not compile? Does it give a run-time error? Does it make your computer explode? Some other malfunction?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1557364140, "post_id": 56050370, "comment_id": 98742940, "body": "What&#39;s up with the indentation?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11472762, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2h2EKU6vDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcExRJ7FPm_Tfk5DELZOfqY5ZWmeA/mo/photo.jpg?sz=128", "display_name": "Nathan de Oliveira", "link": "https://stackoverflow.com/users/11472762/nathan-de-oliveira"}, "edited": false, "score": 0, "creation_date": 1557442019, "post_id": 56050473, "comment_id": 98776653, "body": "Thanks! I&#39;ll fix it and share the results!"}, {"owner": {"reputation": 3, "user_id": 11472762, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2h2EKU6vDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcExRJ7FPm_Tfk5DELZOfqY5ZWmeA/mo/photo.jpg?sz=128", "display_name": "Nathan de Oliveira", "link": "https://stackoverflow.com/users/11472762/nathan-de-oliveira"}, "edited": false, "score": 0, "creation_date": 1557442059, "post_id": 56050473, "comment_id": 98776666, "body": "Abou the echo, i was supposed to comment it. I used it for debugging and forgot to erase it from the example code. My mistake"}, {"owner": {"reputation": 3, "user_id": 11472762, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2h2EKU6vDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcExRJ7FPm_Tfk5DELZOfqY5ZWmeA/mo/photo.jpg?sz=128", "display_name": "Nathan de Oliveira", "link": "https://stackoverflow.com/users/11472762/nathan-de-oliveira"}, "edited": false, "score": 0, "creation_date": 1557442116, "post_id": 56050473, "comment_id": 98776674, "body": "And... yeah, i forgot to end that &quot;if (entrada == 3)&quot; statement ... thanks lol"}, {"owner": {"reputation": 1594, "user_id": 8968982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989aff3283ccc8807e254f3b44574806?s=128&d=identicon&r=PG&f=1", "display_name": "GMc", "link": "https://stackoverflow.com/users/8968982/gmc"}, "reply_to_user": {"reputation": 3, "user_id": 11472762, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2h2EKU6vDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcExRJ7FPm_Tfk5DELZOfqY5ZWmeA/mo/photo.jpg?sz=128", "display_name": "Nathan de Oliveira", "link": "https://stackoverflow.com/users/11472762/nathan-de-oliveira"}, "edited": false, "score": 0, "creation_date": 1557443312, "post_id": 56050473, "comment_id": 98776914, "body": "No problem - hopefully this has helped you call the other function. If so, can you please accept the answer? Thanks"}], "tags": [], "owner": {"reputation": 1594, "user_id": 8968982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989aff3283ccc8807e254f3b44574806?s=128&d=identicon&r=PG&f=1", "display_name": "GMc", "link": "https://stackoverflow.com/users/8968982/gmc"}, "is_accepted": true, "score": 2, "last_activity_date": 1557362443, "last_edit_date": 1557362443, "creation_date": 1557360079, "answer_id": 56050473, "question_id": 56050370, "link": "https://stackoverflow.com/questions/56050370/issues-when-calling-functions-through-if-statement/56050473#56050473", "title": "Issues when calling functions through IF Statement", "body": "<p>I think your problem is here:</p>\n\n<pre><code>    if (entrada == 3) {\n      Seria1.write(\"AT+ADDR?\");\n      entrada = 0;\n    if (entrada == 9) {\n\n      nome();\n\n      }\n    if (entrada == 4) {\n</code></pre>\n\n<p>Basically if entrada == 3, then you enter this block where you potentially call nome().</p>\n\n<p>However, if entrada == 3, it can not possibly be equal to nine. Further, you reset entrada to 0 just before testing if it is 9. So there is no way entrada can be 9 and thus no way for nome to be called.</p>\n\n<p>Probably you intended for the code to read like this:</p>\n\n<pre><code>    if (entrada == 3) {\n      Seria1.write(\"AT+ADDR?\");\n      entrada = 0;\n    }                // The previous if statement was not ended.\n    if (entrada == 9) {\n\n      nome();\n\n    }\n    if (entrada == 4) {\n</code></pre>\n\n<p>You will need to remove a closing brace from further down in the code.</p>\n\n<p>Also, I noted that you have this:</p>\n\n<pre><code>    if (entrada == 4) {\n        char comando[] = \"AT+NAME=\";\n        Serial.println (\"Digite o nome do dispositivo desejado\");\n        while(!Serial.available() ){\n        }\n          int nome = Serial.read();             // See below\n          Seria1.write (comando + nome);\n          entrada = 0;\n        }\n      }\n</code></pre>\n\n<p>Usually it is not a good idea to use the same name for a variable and other purposes (i.e. the nome() function). In this case it is probably OK, but it could get confusing later - especially if this block of code got larger and you needed to call the nome() function from within it.</p>\n\n<p>Lastly, the echo == line of code does not do anything. Is that what you intended?</p>\n\n<pre><code>  if (entrada == 1) \n  { \n    echo == entrada;      // This is a non-operation. Did you mean for it to be something else?\n    padrao();\n\n    }\n</code></pre>\n\n<p>I hope this helps with your project. :-)</p>\n"}], "owner": {"reputation": 3, "user_id": 11472762, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2h2EKU6vDCk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcExRJ7FPm_Tfk5DELZOfqY5ZWmeA/mo/photo.jpg?sz=128", "display_name": "Nathan de Oliveira", "link": "https://stackoverflow.com/users/11472762/nathan-de-oliveira"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1557383084, "accepted_answer_id": 56050473, "answer_count": 1, "score": -3, "last_activity_date": 1557362443, "creation_date": 1557358942, "question_id": 56050370, "link": "https://stackoverflow.com/questions/56050370/issues-when-calling-functions-through-if-statement", "closed_reason": "Not suitable for this site", "title": "Issues when calling functions through IF Statement", "body": "<p>I'm finishing a project for a customer. Basically it's a interactive menu where he can send AT commands for a bluetooth module in a easier way. </p>\n\n<p>The code is working at the first function (\"padrao\"). It sends the AT command properly. (also, ignore the missing part of the code)</p>\n\n<p>The problem is: \nThe only function able to be called by IF statement is \"padrao\". Any other function wont work. What can i change to solve the problem?\nThanks in advance!</p>\n\n<p>Tried to use SWITCH and CASE instead, but couldn't call any function like this...</p>\n\n<p>(i left only one of the remaining functions for comparison. tell me if any of you guys need the rest of the code)</p>\n\n<pre><code>\n/* Menu interativo para comandos dos m\u00f3dulos Bluetooth HC-05, HC-06, HC-08, HM-10, etc.\n *  Nathan - 29/04/2019\n *  \n\n#include &lt;SoftwareSerial.h&gt;\n#define rx 3\n#define tx 4\n\nSoftwareSerial Seria1(rx, tx); // Declara os pinos utilizados para a comunica\u00e7\u00e3o serial\nint entrada = 0 ;\nint echo;\n\nvoid setup () {\n  Serial.begin(9600); // Inicia a comunica\u00e7\u00e3o serial a 9600 bauds\n  Seria1.begin(9600); // Inicia a interface serial de software a 9600 bauds\n  Serial.println(\"Interface de testes Bluetooth ver. 0.1\");\n  Serial.println(\"Escolha uma op\u00e7\u00e3o pelo terminal serial\");\n  Serial.println(\"1. Redefinir o m\u00f3dulo para as configura\u00e7\u00f5es de f\u00e1brica\");\n  Serial.println(\"2. Reset\");\n  Serial.println(\"3. Verificar o endere\u00e7o do m\u00f3dulo\");\n  Serial.println(\"4. Verificar o nome do m\u00f3dulo [como ser\u00e1 reconhecido]\");\n  Serial.println(\"5. Mudar o nome do m\u00f3dulo\");\n\n  //Teste da vari\u00e1vel \"entrada\". Debug apenas.\n  //Serial.println(entrada);\n\n  pinMode (LED_BUILTIN, OUTPUT);\n}\n\nvoid loop () {\nif (Serial.available()){\n    entrada = Serial.parseInt();\n    delay(100);\n\n  if (entrada == 1) \n  { \n    echo == entrada;\n    padrao();\n\n    }\n    if (entrada == 2) {\n      Seria1.write(\"AT+RST\");\n      entrada = 0;\n    }\n    if (entrada == 3) {\n      Seria1.write(\"AT+ADDR?\");\n      entrada = 0;\n    if (entrada == 9) {\n\n      nome();\n\n      }\n    if (entrada == 4) {\n        char comando[] = \"AT+NAME=\";\n        Serial.println (\"Digite o nome do dispositivo desejado\");\n        while(!Serial.available() ){\n        }\n          int nome = Serial.read();\n          Seria1.write (comando + nome);\n          entrada = 0;\n        }\n      }\n      if (entrada == 5) {\n        Seria1.write (\"AT+ROLE=0\");\n        entrada = 0;\n        }\n       if (entrada == 6) {\n        Seria1.write (\"AT+ROLE=1\");\n        entrada = 0;\n      }\n        if (entrada == 7) {\n        Seria1.write (\"AT+PSWD?\");\n        entrada = 0;\n        }\n        if (entrada == 8) {\n        Seria1.write (\"AT+STATE?\");\n        entrada = 0;\n        }\n    }\n}\n\nvoid padrao() {\n\n    digitalWrite(LED_BUILTIN,LOW); \n    Serial.println(\"Deseja resetar o dispositivo para as configura\u00e7\u00f5es padr\u00e3o?\");\n    Serial.println(\"Digite '1' para prosseguir\");\n    int resposta = Serial.parseInt();\n    while (resposta != 1) {\n      if (resposta == 1) {\n        break;\n      }\n      }\n    {\n      delay(1000);\n      Seria1.write(\"AT+ORGL\");\n      Serial.print(\"Comando enviado!\");\n      entrada = 0;\n    }\n}\nvoid nome() {\n        delay(100);\n        Serial.write(\"O nome do dispositivo \u00e9:\");\n        Seria1.write(\"AT+NAME?\");\n        //debug\n        Serial.print(\"teste\");\n        entrada = 0;\n}\n\n</code></pre>\n"}, {"tags": ["c++", "optimization", "valarray"], "comments": [{"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1557358545, "post_id": 56050322, "comment_id": 98741918, "body": "Did you compile with optimizations on VS2015?"}, {"owner": {"reputation": 163, "user_id": 11472661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbb4511afe9ecdc6087ea23f00fa21c2?s=128&d=identicon&r=PG&f=1", "display_name": "dilbert", "link": "https://stackoverflow.com/users/11472661/dilbert"}, "reply_to_user": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1557358604, "post_id": 56050322, "comment_id": 98741929, "body": "I used Release platform on VS and -O2 optimisation for g++"}, {"owner": {"reputation": 2055, "user_id": 10733631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z9f47Aj3ez4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j0jfocyr5e1Wd0v4q8aluK_b7B5Q/mo/photo.jpg?sz=128", "display_name": "Dmytro Dadyka", "link": "https://stackoverflow.com/users/10733631/dmytro-dadyka"}, "edited": false, "score": 2, "creation_date": 1557362240, "post_id": 56050322, "comment_id": 98742585, "body": "Look at this answer. <a href=\"https://stackoverflow.com/a/6851413/11472661\">stackoverflow.com/a/6851413/11472661</a> ."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 5, "creation_date": 1557361390, "post_id": 56050447, "comment_id": 98742434, "body": "I read an article about how <code>valarray</code> never quite had the performance that it was intended to have, in any compiler, so as a result, MSVC never bothered to optimize it, because it was always slow regardless."}, {"owner": {"reputation": 2055, "user_id": 10733631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z9f47Aj3ez4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j0jfocyr5e1Wd0v4q8aluK_b7B5Q/mo/photo.jpg?sz=128", "display_name": "Dmytro Dadyka", "link": "https://stackoverflow.com/users/10733631/dmytro-dadyka"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 3, "creation_date": 1557361984, "post_id": 56050447, "comment_id": 98742549, "body": "I looked in the GNU <code>valarray</code>  implementation. In this implementation, a template proxy object is returned and real calculations only occur when assigning. Performance is only slightly below the explicit use of cycles. Looks like it\u2019s still possible to get effective <code>valarray</code>."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 3, "creation_date": 1557381565, "post_id": 56050447, "comment_id": 98746923, "body": "<a href=\"https://developercommunity.visualstudio.com/content/problem/308961/stdvalarray.html\" rel=\"nofollow noreferrer\">developercommunity.visualstudio.com/content/problem/308961/&hellip;</a> for MS reply to a bug report."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1557434867, "post_id": 56050447, "comment_id": 98774447, "body": "@DmytroDadyka: You misunderstand. Microsoft&#39;s claim was that even with the optimizations in GNU, the <code>valarray</code> was only very slightly faster than the naive version, and still significantly slower than assembly using the desired commands."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1557435421, "post_id": 56050447, "comment_id": 98774647, "body": "<a href=\"https://www.quora.com/Why-does-nobody-seem-to-use-std-valarray/answer/Daniel-N%C3%A4slund\" rel=\"nofollow noreferrer\">quora.com/Why-does-nobody-seem-to-use-std-valarray/answer/&hellip;</a> Reading this, I vaguely remember that the problem was that users would make copies too often by accident, which completely negated the performance gains.  Now that we have move constructors, that may or may not be better."}], "tags": [], "owner": {"reputation": 2055, "user_id": 10733631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z9f47Aj3ez4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j0jfocyr5e1Wd0v4q8aluK_b7B5Q/mo/photo.jpg?sz=128", "display_name": "Dmytro Dadyka", "link": "https://stackoverflow.com/users/10733631/dmytro-dadyka"}, "is_accepted": true, "score": 21, "last_activity_date": 1557393110, "last_edit_date": 1557393110, "creation_date": 1557359830, "answer_id": 56050447, "question_id": 56050322, "link": "https://stackoverflow.com/questions/56050322/why-is-valarray-so-slow-on-visual-studio-2015/56050447#56050447", "title": "Why is valarray so slow on Visual Studio 2015?", "body": "<blockquote>\n  <p>Am I doing everything right?</p>\n</blockquote>\n\n<p>You're doing everything right. The problem is in the Visual Studio <code>std::valarray</code> implementation.</p>\n\n<blockquote>\n  <p>Why is <code>std::valarray</code> not working as needed on Visual&nbsp;Studio&nbsp;2015?</p>\n</blockquote>\n\n<p>Just open the implementation of any <code>valarray</code> operator, for example <code>operator+</code>. You will see something like (after macro expansion):</p>\n\n<pre><code>   template&lt;class _Ty&gt; inline\n      valarray&lt;_Ty&gt; operator+(const valarray&lt;_Ty&gt;&amp; _Left,\n         const valarray&lt;_Ty&gt;&amp; _Right)\n   {\n      valarray&lt;TYPE&gt; _Ans(_Left.size());\n      for (size_t _Idx = 0; _Idx &lt; _Ans.size(); ++_Idx)\n         _Ans[_Idx] = _Left[_Idx] + _Right[_Idx];\n      return (_Ans)\n   }\n</code></pre>\n\n<p>As you can see, a new object is created in which the result of the operation is copied. There really is no optimization. I do not know why, but it is a fact. It looks like in Visual Studio, <code>std::valarray</code> was added for compatibility only.</p>\n\n<p>For comparison, consider the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.7.3/libstdc++/api/a01573_source.html\" rel=\"noreferrer\">GNU implementation</a>. As you can see, each <a href=\"https://github.com/gcc-mirror/gcc/blob/046ae677a4675ceffb3f028e09ae52a7801a7422/libstdc%2B%2B-v3/include/std/valarray#L1151\" rel=\"noreferrer\">operator</a> returns the template class <a href=\"https://github.com/gcc-mirror/gcc/blob/41d6b10e96a1de98e90a7c0378437c3255814b16/libstdc%2B%2B-v3/include/bits/valarray_after.h#L163\" rel=\"noreferrer\">_Expr</a> which contains only the <a href=\"https://github.com/gcc-mirror/gcc/blob/41d6b10e96a1de98e90a7c0378437c3255814b16/libstdc%2B%2B-v3/include/bits/valarray_after.h#L204\" rel=\"noreferrer\">operation</a>, but does not contain data. The real computation is performed in the <a href=\"https://github.com/gcc-mirror/gcc/blob/046ae677a4675ceffb3f028e09ae52a7801a7422/libstdc%2B%2B-v3/include/std/valarray#L834\" rel=\"noreferrer\">assignment operator</a> and more specifically in the <a href=\"https://github.com/gcc-mirror/gcc/blob/41d6b10e96a1de98e90a7c0378437c3255814b16/libstdc%2B%2B-v3/include/bits/valarray_array.tcc#L142\" rel=\"noreferrer\">__valarray_copy</a> function. Thus, until you perform assignment, all actions are performed on the proxy object <code>_Expr</code>. Only once <code>operator=</code> is called, is the operation stored in <code>_Expr</code> performed in a single loop. This is the reason why you get such good results with g++.</p>\n\n<blockquote>\n  <p>How can I solve the problem?</p>\n</blockquote>\n\n<p>You need to find a suitable  <code>std::valarray</code> implementation on the internet or you can write your own. You can use the GNU implementation as an example.</p>\n"}], "owner": {"reputation": 163, "user_id": 11472661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbb4511afe9ecdc6087ea23f00fa21c2?s=128&d=identicon&r=PG&f=1", "display_name": "dilbert", "link": "https://stackoverflow.com/users/11472661/dilbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "accepted_answer_id": 56050447, "answer_count": 1, "score": 16, "last_activity_date": 1557393110, "creation_date": 1557358489, "last_edit_date": 1557392956, "question_id": 56050322, "link": "https://stackoverflow.com/questions/56050322/why-is-valarray-so-slow-on-visual-studio-2015", "title": "Why is valarray so slow on Visual Studio 2015?", "body": "<p>To speed up the calculations in my library, I decided to use the <code>std::valarray</code> class. The <a href=\"https://en.cppreference.com/w/cpp/numeric/valarray\" rel=\"noreferrer\">documentation</a> says:</p>\n\n<blockquote>\n  <p>std::valarray and helper classes are defined to be free of certain\n  forms of aliasing, thus allowing operations on these classes to be\n  optimized similar to the effect of the keyword restrict in the C\n  programming language. In addition, functions and operators that take\n  valarray arguments are allowed to return proxy objects to make it\n  possible for the compiler to optimize an expression such as v1 = a * v2\n  + v3; as a single loop that executes v1[i] = a * v2[i] + v3[i]; avoiding any temporaries or multiple passes.</p>\n</blockquote>\n\n<p>This is exactly what I need. And it works as described in the documentation when I use the g++ compiler. I have developed a simple example to test the <code>std::valarray</code> performance:</p>\n\n<pre><code>void check(std::valarray&lt;float&gt;&amp; a)\n{\n   for (int i = 0; i &lt; a.size(); i++)\n      if (a[i] != 7)\n         std::cout &lt;&lt; \"Error\" &lt;&lt; std::endl;\n}\n\nint main()\n{\n   const int N = 100000000;\n   std::valarray&lt;float&gt; a(1, N);\n   std::valarray&lt;float&gt; c(2, N);\n   std::valarray&lt;float&gt; b(3, N);\n   std::valarray&lt;float&gt; d(N);\n\n   auto start = std::chrono::system_clock::now();\n   d = a + b * c;\n   auto end = std::chrono::system_clock::now();\n\n   std::cout &lt;&lt; \"Valarr optimized case: \"\n      &lt;&lt; (end - start).count() &lt;&lt; std::endl;\n\n   check(d);\n\n   // Optimal single loop case\n   start = std::chrono::system_clock::now();\n   for (int i = 0; i &lt; N; i++)\n      d[i] = a[i] + b[i] * c[i];\n   end = std::chrono::system_clock::now();\n   std::cout &lt;&lt; \"Optimal case: \" &lt;&lt; (end - start).count() &lt;&lt; std::endl;\n\n   check(d);\n   return 0;\n}\n</code></pre>\n\n<p>On g++ I got:</p>\n\n<pre><code>Valarr optimized case: 1484215\nOptimal case: 1472202\n</code></pre>\n\n<p>It seems that all operations <code>d = a + b * c;</code> are really placed in one cycle, which simplifies the code while maintaining performance. However, this does not work when I use Visual&nbsp;Studio&nbsp;2015. For the same code, I get:</p>\n\n<pre><code>Valarr optimized case: 6652402\nOptimal case: 1766699\n</code></pre>\n\n<p>The difference is almost four times; there is no optimization! Why is <code>std::valarray</code> not working as needed on Visual&nbsp;Studio&nbsp;2015? Am I doing everything right? How can I solve the problem without abandoning <code>std::valarray</code>?</p>\n"}, {"tags": ["c++", "makefile", "g++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1557356955, "post_id": 56050146, "comment_id": 98741605, "body": "We would obviously need to see your makefile in order to help. And if you want to learn how to use make, the place you need to go is the GNU Make documentation."}, {"owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "edited": false, "score": 0, "creation_date": 1557357026, "post_id": 56050146, "comment_id": 98741629, "body": "@NeilButterworth I put link there. I used everything from there to test,"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1557357097, "post_id": 56050146, "comment_id": 98741648, "body": "We don&#39;t do links. Post the content of your makefile inline with your question."}, {"owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "edited": false, "score": 0, "creation_date": 1557357185, "post_id": 56050146, "comment_id": 98741667, "body": "@NeilButterworth I added to the question"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1557357311, "post_id": 56050146, "comment_id": 98741690, "body": "You will get that error if you invoke make in a directory that doesn&#39;t contain a makefile. Please investigate the concept of &quot;current working directory&quot;."}, {"owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "edited": false, "score": 0, "creation_date": 1557357437, "post_id": 56050146, "comment_id": 98741728, "body": "It is in the same directory as the files are. I can compile them in command line. but makefile doesn&#39;t work."}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1557357820, "post_id": 56050146, "comment_id": 98741799, "body": "<i>&quot;It is in the same directory as the files are.&quot;</i> Presumably &quot;It&quot; here is the makefile. That&#39;s good. Next, is your commend line in the same directory as well. That is, if you type <code>ls</code> does it list makefile (and the source files)? Finally what is the name of the makefile? Is it one that <code>make</code> automatically identifiers? Bonus question: are there any other files there that <code>make</code> might identify as a makefile before noticing the one that you mean for it to use."}, {"owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "reply_to_user": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1557358002, "post_id": 56050146, "comment_id": 98741827, "body": "@dmckee yes, I am in the same directory as makefile and other files are. I typed <code>ls</code> it shows: <code>makefile.rtf</code> is it the correct format? the name is <code>makefile.rtf</code>"}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 2, "creation_date": 1557358102, "post_id": 56050146, "comment_id": 98741841, "body": "<i>&quot;makefile.rtf&quot;</i> That&#39;s your problem. Two problems, really. One that is not a name that <code>make</code> likes and two <code>make</code> is expecting a plain text file not rich text. You can force <code>make</code> to use any file with the <code>-f</code> option, but it is going to care about the format even then."}, {"owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "reply_to_user": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1557358316, "post_id": 56050146, "comment_id": 98741880, "body": "@dmckee which format should i use for makefile <code>.txt</code> ? What do you mean by it is not a name that <code>make</code> likes? which name shall i use?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1557358325, "post_id": 56050146, "comment_id": 98741882, "body": "The standard names for makefiles are <code>makefile</code> and <code>Makefile</code>.  No extension.  Some <code>make</code>s will look for others as well, but it&#39;s best to stick with one of the standard names unless you know exactly why it&#39;s to your advantage to do otherwise.  The <i>format</i> should be plain text, but that&#39;s an orthogonal issue."}, {"owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1557358436, "post_id": 56050146, "comment_id": 98741894, "body": "@JohnBollinger probably that&#39;s the issue, how can i create a file without any extension?"}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1557358446, "post_id": 56050146, "comment_id": 98741896, "body": "And your makefile should be in plain text (i.e. what you would mark <code>.txt</code> if you were using an extension), but old-school unixers didn&#39;t need no steenkin file extensions."}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1557358528, "post_id": 56050146, "comment_id": 98741913, "body": "@Sarah What kind of system are you working on? If you&#39;re on a system that demands extensions your make probably expects <code>.txt</code>, but ... that&#39;s not very common these days."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1557358636, "post_id": 56050146, "comment_id": 98741938, "body": "Use a better editor?  Seriously, although some editors and utilities will suggest or even automatically add extensions, there is normally a way to configure file dialogs not to do that.  And if you can&#39;t figure that out, then you certainly should be able to rename the file after the fact to remove the extension."}, {"owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "reply_to_user": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1557358658, "post_id": 56050146, "comment_id": 98741943, "body": "@dmckee it is mac"}, {"owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "edited": false, "score": 0, "creation_date": 1557358786, "post_id": 56050146, "comment_id": 98741965, "body": "the issue is solved. as you said, i used the plain text file. Thanks dmckee, and johnBollinger"}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1557358812, "post_id": 56050146, "comment_id": 98741969, "body": "Great. Unless you are using System 9 or earlier you are actually running a unix box and can use all those old tools exactly as they are meant to be used. No file extensions are needed. As an aside I prefer to install X11 and run an x-term to using the terminal program, but that&#39;s a detail."}, {"owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "reply_to_user": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1557358958, "post_id": 56050146, "comment_id": 98741998, "body": "@dmckee thanks for help"}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "is_accepted": false, "score": 0, "last_activity_date": 1557358916, "creation_date": 1557358916, "answer_id": 56050367, "question_id": 56050146, "link": "https://stackoverflow.com/questions/56050146/issue-with-building-makefile/56050367#56050367", "title": "Issue with building makefile", "body": "<p>The issue was about <code>makefile</code> format. Initially it was <code>makefile.rtf</code>. Following comments I changed it to plain text (No extension) and the issue solved. </p>\n"}], "owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1557358916, "creation_date": 1557356756, "last_edit_date": 1557357371, "question_id": 56050146, "link": "https://stackoverflow.com/questions/56050146/issue-with-building-makefile", "title": "Issue with building makefile", "body": "<p>I am trying to build a simple makefile for <code>c++</code> using <code>g++</code>. Even a simple makefile is not working on my computer (MacOS X). \nI followed this <a href=\"http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/\" rel=\"nofollow noreferrer\">tutorial</a> \nCreate the same files and makefile. I just replaced <code>CC=gcc</code> to <code>CXX=g++</code>, in makefile2. I am using c++ format for files. \nI can compile it with <code>g++</code>, (in command line)</p>\n\n<p>But when I try to make it by \"make\" command I get the following error. </p>\n\n<blockquote>\n  <p>make: *** No targets specified and no makefile found.  Stop.</p>\n</blockquote>\n\n<p>Format and directory are correct. \nAny help is appreciated.</p>\n\n<p>Here is makefile:</p>\n\n<pre><code>CXX=g++\nCFLAGS=-I.\n\nhellomake: hellomake.o hellofunc.o\n    $(CXX) -o hellomake hellomake.o hellofunc.o \n</code></pre>\n\n<p><strong>\"hellomake.cpp\" :</strong></p>\n\n<pre><code>#include \"hellomake.h\"\n\nint main() {\n    // call a function in another file\n    myPrintHelloMake();\n\n    return(0);\n}\n</code></pre>\n\n<p><strong>hellofunc.cpp</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"hellomake.h\"\n\nvoid myPrintHelloMake(void) {\n\n    printf(\"Hello makefiles!\\n\");\n\n    return;\n}\n</code></pre>\n\n<p><strong>hellomake.h</strong></p>\n\n<pre><code>/*\n example include file\n */\n\nvoid myPrintHelloMake(void);\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-asio", "asio"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1557357062, "post_id": 56050105, "comment_id": 98741643, "body": "do you need a command line option on msvc to enable coroutines?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7452260, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Y1jga.png?s=128&g=1", "display_name": "ImpossibleMushroom", "link": "https://stackoverflow.com/users/7452260/impossiblemushroom"}, "edited": false, "score": 0, "creation_date": 1557358107, "post_id": 56050204, "comment_id": 98741843, "body": "Thank you, that worked perfectly and the documentation link was very helpful! I am surprised I couldn&#39;t find something on that through all my Google searches and documentation reading."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 13, "user_id": 7452260, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Y1jga.png?s=128&g=1", "display_name": "ImpossibleMushroom", "link": "https://stackoverflow.com/users/7452260/impossiblemushroom"}, "edited": false, "score": 0, "creation_date": 1557358731, "post_id": 56050204, "comment_id": 98741953, "body": "@ImpossibleMushroom I only knew where to look because I happened to read some of the new ASIO source code yesterday as I want to use co_routines to simplify our production code too."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 1, "last_activity_date": 1557357267, "creation_date": 1557357267, "answer_id": 56050204, "question_id": 56050105, "link": "https://stackoverflow.com/questions/56050105/boostasioco-spawn-is-undefined-in-msvc/56050204#56050204", "title": "boost::asio::co_spawn is undefined in MSVC", "body": "<p>boost.asio has preprocessor code to detect the capabilities of the compiler and only turn on coroutine support if the compiler supports it.</p>\n\n<p>For MSVC, I think you will need to add the compiler flag <code>/await</code> to the compiler command line option list.</p>\n\n<p>reference: <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/await-enable-coroutine-support?view=vs-2019\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/build/reference/await-enable-coroutine-support?view=vs-2019</a></p>\n"}], "owner": {"reputation": 13, "user_id": 7452260, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Y1jga.png?s=128&g=1", "display_name": "ImpossibleMushroom", "link": "https://stackoverflow.com/users/7452260/impossiblemushroom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 56050204, "answer_count": 1, "score": 0, "last_activity_date": 1557357267, "creation_date": 1557356419, "question_id": 56050105, "link": "https://stackoverflow.com/questions/56050105/boostasioco-spawn-is-undefined-in-msvc", "title": "boost::asio::co_spawn is undefined in MSVC", "body": "<p>I am attempting to create a TCP server using boost.asio and following the examples you use co_spawn to start the listener function in a new thread. </p>\n\n<p>When I try to use <code>boost::asio::co_spawn</code> Microsoft Visual Studios tells me it is undefined, I have included all files the <a href=\"https://www.boost.org/doc/libs/1_70_0/doc/html/boost_asio/example/cpp17/coroutines_ts/echo_server.cpp\" rel=\"nofollow noreferrer\">boost example</a> does.</p>\n\n<p>TcpServer.h</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include &lt;boost/asio/co_spawn.hpp&gt;\n#include &lt;boost/asio/detached.hpp&gt;\n#include &lt;boost/asio/io_context.hpp&gt;\n#include &lt;boost/asio/ip/tcp.hpp&gt;\n#include &lt;boost/asio/signal_set.hpp&gt;\n#include &lt;boost/asio/write.hpp&gt;\n#include &lt;boost/asio/coroutine.hpp&gt;\n\nusing namespace boost::asio;\n\nclass TcpServer\n{\npublic:\n    TcpServer(int port);\n    ~TcpServer();\nprivate:\n\n};\n</code></pre>\n\n<p>TcpServer.cpp</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"TcpServer.h\"\n\n\n/*\n    Create a TcpServer on a given port\n*/\nTcpServer::TcpServer(int port)\n{\n    io_context ioCtx(1);\n\n    /* E0020    identifier \"co_spawn\" is undefined  */\n    co_spawn();\n}\n\n\nTcpServer::~TcpServer()\n{\n}\n</code></pre>\n\n<p>The above code tells me that <code>co_spawn</code> is undefined, I have searched other name spaces and checked for alternative functions and there is none. I thought maybe it was outdated documentation but the <code>boost.asio</code> reference for version <code>1.70.1</code> still lists <code>co_spawn</code> as a free function. See <a href=\"https://www.boost.org/doc/libs/1_70_0/doc/html/boost_asio/reference/co_spawn.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>I am using\nBoost: 1.70.1\nMicrosoft Visual Studio 2017: v15.9.7</p>\n"}, {"tags": ["c++", "performance", "validation"], "comments": [{"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 6, "creation_date": 1557356436, "post_id": 56050083, "comment_id": 98741496, "body": "Unless the input is automated and that needs to be validated, it&#39;s always going to be the human that&#39;s the performance issue, not the code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1557356823, "post_id": 56050083, "comment_id": 98741578, "body": "Also, the C++ iostream library is not intended to be used interactively. As its name suggests, its a library for reading streams, not human user input."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1557357069, "post_id": 56050083, "comment_id": 98741644, "body": "But seriously, writing yourself a library of common input routines can save you a tonne of repeated code and programming and debugging time. Probably worth the time invested."}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 2, "creation_date": 1557357173, "post_id": 56050083, "comment_id": 98741665, "body": "50 separate copies of similar code.  Discover a logic error.  Have fun!  Or: 10 library functions, a bug in one, fix it, QA, done.  Maintenance for the inline version is a nightmare."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1557357254, "post_id": 56050083, "comment_id": 98741683, "body": "Play around with templates a bit and that 10 library functions can probably be two or three."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 3, "creation_date": 1557357391, "post_id": 56050083, "comment_id": 98741712, "body": "As with all <i>optimization</i> questions, don&#39;t try to optimize anything until you have an actual profiler output that says the code is a bottleneck. Also, any code that deals primarily with validating user input is going to be limited by the user, not by the code. Profile, get actual data that indicates a bottleneck in code, and then and only then start worrying about how to optimize it."}], "answers": [{"tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": true, "score": 4, "last_activity_date": 1557357528, "last_edit_date": 1557357528, "creation_date": 1557357199, "answer_id": 56050197, "question_id": 56050083, "link": "https://stackoverflow.com/questions/56050083/c-how-much-performance-impact-can-programming-an-input-validation-function-ha/56050197#56050197", "title": "C++: How much performance impact can programming an input validation function have versus inlining it each time?", "body": "<p><strong>Don't try to inline it yourself. The performance benefit is negligible.</strong> You might get even worse performance: you'll get a bigger binary, which means that there'll be more cache misses when the CPU loads code.</p>\n\n<p><strong>Reason 1: The compiler knows best.</strong> Here's a handy rule of thumb: <strong>If a function is worth inlining, the compiler will inline it.</strong> Functions that are bigger or more expensive are less likely to get inlined, <strong>and that's ok.</strong> If inlining a function only makes it 0.05% faster, why inline it?</p>\n\n<p><strong>Reason 2: not inlining big functions can make code faster.</strong> This seems a bit counter-intuitive, but consider this: the smaller the program, the more likely it is that you can fit the most-used parts in the CPU's cache. For big programs, loading code into the cache before running it may slow things down. By packaging things into functions, you make the resulting machine code smaller, and therefore <em>more likely to fit in the cache.</em></p>\n\n<p><strong>Reason 3: The speedup is negligible.</strong> The example code that you provided is relatively expensive. Input/Output operations are generally pretty expensive, and <code>std::istream&amp;</code> uses a lot of virtual functions (which themselves are relatively expensive to call). And the slowest part? <strong>You're asking input from a human.</strong> Asking a human for input is (quite literally) a couple billion times slower than making a function call.  </p>\n\n<p><strong>Reason 4: fixing bugs is a lot harder if you manually inline stuff.</strong> Let's say you discover a mistake in one of the validation functions. If you wrote it as a function, it's easy to fix: change the function, and you're done. But if you inlined the code, fixing it becomes a lot harder. You'll have to find all the places you used that validation code, and fix it individually in each section.  </p>\n"}], "owner": {"reputation": 77, "user_id": 11418143, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZFK2ngttyHs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfubuqHImHhz36f0ZqA3ML5XX_FrA/mo/photo.jpg?sz=128", "display_name": "Carl Artino", "link": "https://stackoverflow.com/users/11418143/carl-artino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "closed_date": 1557358222, "accepted_answer_id": 56050197, "answer_count": 1, "score": 1, "last_activity_date": 1557357528, "creation_date": 1557356257, "question_id": 56050083, "link": "https://stackoverflow.com/questions/56050083/c-how-much-performance-impact-can-programming-an-input-validation-function-ha", "closed_reason": "Opinion-based", "title": "C++: How much performance impact can programming an input validation function have versus inlining it each time?", "body": "<p>Maybe a simple question, but if I'm writing a decently large amount of code in which the user is continuously inputting data, and I'm constantly validating this data, is there any efficiency advantage or disadvantage to delegating input validation to a specific function? Obviously it's going to be better to look at and understand, but I'm speaking strictly optimization.</p>\n\n<p>For example, if the user is inputting an int, this can be pretty easily done. But what if they're also inputting floats or doubles? Would it still be advantageous to split this in three different validation functions or even to template one function for all three? Or is the difference maybe all so small that it hardly matters at all?</p>\n\n<p>As an example, here's the simplest integer validation. It's used roughly four times in my current project, but I've had others where I'm using it upwards of 10+ times.</p>\n\n<pre><code>    bool loopFlag = true;\n    int choice = 0;\n\n    do\n    {\n        std::cin &gt;&gt; choice;\n        if (std::cin.fail() || restChoice &gt; NUMHFCS || restChoice &lt;= 0)\n        {\n            std::cout &lt;&lt; \"Invalid choice. Number must be between 1 and 8.\" \n            &lt;&lt; std::endl;\n            std::cin.clear();\n            std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(),'\\n');\n        }\n        else\n        {\n            loopFlag = false;\n        }\n    }\n    while (loopFlag);\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1557355457, "post_id": 56049971, "comment_id": 98741258, "body": "Are you using a vector class from a 3rd party library or implementing your own? Do you need help with the math? Or just with implementing it in code?"}, {"owner": {"reputation": 1, "user_id": 7523787, "user_type": "registered", "profile_image": "https://graph.facebook.com/1791695331094910/picture?type=large", "display_name": "Ghof Rane", "link": "https://stackoverflow.com/users/7523787/ghof-rane"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1557355592, "post_id": 56049971, "comment_id": 98741288, "body": "yes i need help with math pleaase"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1557355660, "post_id": 56049971, "comment_id": 98741302, "body": "This website is for questions about computer programming. I suggest you consult a calculus text book or use google to find a more appropriate site."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 2, "creation_date": 1557355708, "post_id": 56049971, "comment_id": 98741314, "body": "I&#39;m voting to close this question as off-topic because the OP is asking for help with mathematics not programming."}, {"owner": {"reputation": 1, "user_id": 7523787, "user_type": "registered", "profile_image": "https://graph.facebook.com/1791695331094910/picture?type=large", "display_name": "Ghof Rane", "link": "https://stackoverflow.com/users/7523787/ghof-rane"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1557355811, "post_id": 56049971, "comment_id": 98741345, "body": "yes i know but i need informations in math for implementing it"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1557355836, "post_id": 56049971, "comment_id": 98741354, "body": "Then you should find a website that is about math. Figure out how to do the calculations by hand before trying to write any code."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1557356781, "post_id": 56049971, "comment_id": 98741571, "body": "Perhaps <a href=\"https://math.stackexchange.com/help/asking\">math.stackexchange.com</a> is a better fit. Yes I linked to the Asking help page. It&#39;s the best place to start if you aren&#39;t familiar with Mathematics."}], "owner": {"reputation": 1, "user_id": 7523787, "user_type": "registered", "profile_image": "https://graph.facebook.com/1791695331094910/picture?type=large", "display_name": "Ghof Rane", "link": "https://stackoverflow.com/users/7523787/ghof-rane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557355318, "creation_date": 1557355318, "question_id": 56049971, "link": "https://stackoverflow.com/questions/56049971/how-can-i-get-the-coordinates-of-vector-from-point-abd-it-is-orientation-angle", "title": "how can i get the coordinates of vector from point abd it is orientation angle", "body": "<p><a href=\"https://i.stack.imgur.com/M6QC7.png\" rel=\"nofollow noreferrer\">image</a></p>\n\n<p>Ihave two points with known coordinates \n<strong>i (xi ,yi )\nk(xk,yk)</strong></p>\n\n<p>I want to get a Vector fk in <a href=\"https://i.stack.imgur.com/M6QC7.png\" rel=\"nofollow noreferrer\">image</a> containing a coordinate  to find the angle between two vectors of orientation of target k  (fk) and( ki). I know my beginning coordinates k , angle of rotation of target k  and distance fom k to point i .\n<strong>how can i get the coordinates of vector fk  and angle beween the two vectors in written red</strong></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1557354008, "post_id": 56049737, "comment_id": 98740931, "body": "You have the right idea. Look up <code>std::getline</code> and <code>std::istringstream</code> at <a href=\"https://en.cppreference.com/w/cpp/language\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557364388, "post_id": 56049737, "comment_id": 98742992, "body": "You should discuss this with your teacher. That&#39;s what they&#39;re there for."}], "answers": [{"tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": false, "score": 1, "last_activity_date": 1557355441, "last_edit_date": 1557355441, "creation_date": 1557354609, "answer_id": 56049876, "question_id": 56049737, "link": "https://stackoverflow.com/questions/56049737/is-there-a-way-to-read-from-a-text-file-and-store-individual-data-as-different-v/56049876#56049876", "title": "is there a way to read from a text file and store individual data as different variables?", "body": "<p>If you're reading in from an input stream, you can basically do it like this:</p>\n\n<pre><code>struct User {\n    std::string name;\n    int pin;\n    int amnt;\n};\nUser read_user(std::istream&amp; stream) {\n    User user;\n    // Reads in the username (this assumes the username doesn't contain a space)\n    stream &gt;&gt; user.name; \n    // Reads in the pin as an integer\n    stream &gt;&gt; user.pin;\n    stream.ignore(2); //Ignore the extra space and dollar sign\n    // Reads in the dollar amount as an integer\n    stream &gt;&gt; user.amnt; \n    // Returns the user\n    return user;\n}\n</code></pre>\n\n<p>This will allow you to read from <code>std::cin</code> or from a filestream, and will return a user with the name, the pin, and the amount. </p>\n\n<p>We can read in multiple users like this. Basically, we just call <code>read</code> multiple times. </p>\n\n<pre><code>std::vector&lt;User&gt; read_users(std::istream&amp; stream, int n) {\n    std::vector&lt;User&gt; users; \n    for(int i = 0; i &lt; n; i++) {\n        users.push_back(read_user(stream)); \n    }\n    return users; \n}\n</code></pre>\n\n<p>This will read in as many users as you'd like. </p>\n\n<h3>Reading in all the users in a file</h3>\n\n<p>We can also read in all the users in a file. </p>\n\n<pre><code>std::vector&lt;User&gt; read_all_users(std::istream&amp; stream) {\n    std::vector&lt;User&gt; users; \n    while(true) // Checks that there's stuff left in the stream\n    {\n        User u = read_user(stream); // Try reading a user\n        if(not stream) break; // If there was nothing left to read, exit\n        users.push_back(u); \n    }\n    return users; \n}\n</code></pre>\n\n<h3>Example usage:</h3>\n\n<p>We're going to open a file called <code>users.txt</code>, and read all of them in. Then, we'll print out the name, pin, and account balance of each user. </p>\n\n<pre><code>int main() {\n    std::ifstream user_file(\"users.txt\"); \n    std::vector&lt;User&gt; users = read_all_users(user_file); \n\n    // This prints out the name, pin, and balance of each user\n    for(User&amp; user : users) {\n        std::cout &lt;&lt; \"Name: \" &lt;&lt; user.name &lt;&lt; '\\n';\n        std::cout &lt;&lt; \"Pin: \" &lt;&lt; user.pin &lt;&lt; '\\n';\n        std::cout &lt;&lt; \"Amnt: \" &lt;&lt; user.amnt &lt;&lt; '\\n';\n    }\n    // Do stuff with the list of users\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11472315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9bb8fc2911770b15af5eb6ba08487c9?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/11472315/dylan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1557362334, "creation_date": 1557353781, "last_edit_date": 1557362334, "question_id": 56049737, "link": "https://stackoverflow.com/questions/56049737/is-there-a-way-to-read-from-a-text-file-and-store-individual-data-as-different-v", "title": "is there a way to read from a text file and store individual data as different variables?", "body": "<p>I'm working on this program:</p>\n\n<blockquote>\n  <p>Create a program that will emulate an ATM machine. You must create a class named \u201cATM\u201d that will have member functions that will:</p>\n  \n  <ol>\n  <li><p>Create a greeting on the screen,</p></li>\n  <li><p>Ask the user for a four digit pin,</p>\n  \n  <p>a) an external file named \u201cpin\u201d must contain the following four pins and owner names and balances:</p>\n  \n  <p>Larry     1234  $200</p>\n  \n  <p>Moe       5678  $350</p>\n  \n  <p>Lucy      0007  $600</p>\n  \n  <p>Shirley   9876  $535</p>\n  \n  <p>b) the pin input by the user must match one of the stored pins to allow access to transactions.</p>\n  \n  <p>c) after 3 unsuccessful attempts, tell the user that their account is frozen and they must contact customer service.</p></li>\n  <li><p>After successful input of a pin, greet the user using their name.</p></li>\n  <li><p>Create a screen asking the user if they want to withdraw or deposit money or view their balance.</p></li>\n  <li><p>Initialize the beginning machine balance of $500. Track the balance based on deposits and withdraws.</p></li>\n  <li><p>Do not allow the user to withdraw more money than is currently in the machine.</p></li>\n  <li><p>Limit the amount of money withdrawn to $400.</p></li>\n  <li><p>The program must run on a continuous loop.</p></li>\n  </ol>\n</blockquote>\n\n<p>I cant figure out how to do 2b and 3. I think that I should create 4 different objects for the 4 different people, 1 line per object, then separate the name, pin, and balance within the object, but I'm not quite sure how to do that.</p>\n\n<p>I think I should use something like <code>getline()</code> on a loop to separate the lines into the 4 objects then use <code>fin &gt;&gt; name &gt;&gt; pin &gt;&gt; balance;</code> to distinguish the <code>name</code>, <code>pin</code>, and <code>balance</code>, but I cant figure it out.</p>\n\n<p>If I'm doing it all wrong then I would really appreciate a nudge in the right direction.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1557353888, "post_id": 56049652, "comment_id": 98740891, "body": "The type of <code>input</code> is <code>char</code>, so it will get a single character from the input. That makes it simple to test whether it represents a number. No need for <code>isNum</code> -- just call <code>isdigit</code> directly, once. If you change it to be <code>std::string</code>, that will fix that error, but then <code>i = input</code> won&#39;t make sense."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 0, "last_activity_date": 1557403469, "last_edit_date": 1557403469, "creation_date": 1557354304, "answer_id": 56049828, "question_id": 56049652, "link": "https://stackoverflow.com/questions/56049652/inputting-both-ints-and-str-and-storing-them-into-two-separate-lists/56049828#56049828", "title": "Inputting both ints and str and storing them into two separate lists", "body": "<p>That's not that easy ... But I'd let the stream do the work of deciding if it's an <code>int</code> or a <code>string</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;list&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nint main()  // no parameters required for our program\n{\n    std::list&lt;std::string&gt; strings;\n    std::list&lt;int&gt; numbers;\n\n    int num;\n    do {\n        std::string str;\n        if (std::cin &gt;&gt; num) {  // try to read an integer if that fails, num will be 0\n            numbers.push_front(num);\n        }\n        else if (std::cin.clear(), std::cin &gt;&gt; str) { // reset the streams flags because\n            strings.push_front(str);                  // we only get here if trying to\n            num = 42;  // no, don't exit              // extract an integer failed.\n        }\n    } while (std::cin &amp;&amp; num != 0);  // as long as the stream is good and num not 0\n\n    strings.sort();\n\n    std::cout &lt;&lt; \"\\nStrings:\\n\";\n    for (auto const &amp;s : strings)\n        std::cout &lt;&lt; s &lt;&lt; '\\n';\n    std::cout.put('\\n');\n\n    numbers.sort();\n\n    std::cout &lt;&lt; \"Numbers:\\n\";\n    for (auto const &amp;n : numbers)\n        std::cout &lt;&lt; n &lt;&lt; '\\n';\n    std::cout.put('\\n');\n}\n</code></pre>\n\n<h3>Sample Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>foo\n5\nbar\n3\naleph\n2\naga\n1\n0\n\nStrings:\naga\naleph\nbar\nfoo\n\nNumbers:\n0\n1\n2\n3\n5\n</code></pre>\n\n<p>Just a few things about your code:</p>\n\n<ul>\n<li>Avoid <code>using namespace std;</code> because it spills out the entire namespace std into the global namespace.</li>\n<li>Declare your variables as close to where they're needed.</li>\n<li>Use range-based <code>for</code>-loops where possible. Easier to write, easier to read.</li>\n</ul>\n"}], "owner": {"reputation": 57, "user_id": 11472545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2740cb72c9dd2364d1ac0842ace6d67?s=128&d=identicon&r=PG&f=1", "display_name": "need_halp", "link": "https://stackoverflow.com/users/11472545/need-halp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 56049828, "answer_count": 1, "score": 1, "last_activity_date": 1557403469, "creation_date": 1557353226, "last_edit_date": 1557353390, "question_id": 56049652, "link": "https://stackoverflow.com/questions/56049652/inputting-both-ints-and-str-and-storing-them-into-two-separate-lists", "title": "Inputting both ints and str and storing them into two separate lists", "body": "<p>User inputs <code>int</code>s and <code>string</code>s and program stores them into two separate lists in C++.</p>\n\n<p>I get an error on <code>if (isNum(input))</code> - invalid arguments; could not convert input from char to string.</p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nbool isNum(string s)\n{\n    for (int i = 0; i &lt; s.length(); i++)\n        if (isdigit(s[i]) == false)\n            return false;\n    return true;\n}\n\nint main(int argv, char* argc[])\n{\n    int i;\n    string str;\n    list&lt;int&gt; l;\n    list&lt;string&gt; s;\n    char input;\n\n    do {\n        cin &gt;&gt; input;\n        if (isNum(input))\n        {\n            i = input;\n            l.push_front(i);\n        }\n        else\n        {\n            str = input;\n            s.push_back(str);\n        }\n\n        l.push_back(i);\n        s.push_back(str);\n\n    } while (i != 0);\n\n    l.sort();\n\n    list&lt;int&gt;::const_iterator iter;\n    for (iter = l.begin(); iter != l.end(); iter++)\n        cout &lt;&lt; (*iter) &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "stack", "expression", "grammar", "bnf"], "comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1557354358, "post_id": 56049620, "comment_id": 98740996, "body": "I do not understand, to be able to put an expression in a stack (following postfix or prefix notation typically) you already validated the expression, and the &quot;( &#39;)&#39; disappeared. Else you &#39;stack&#39; is not a stack as in an execution but just a collection to memorize the items in the order they was read, without even knowing what each item is."}], "answers": [{"tags": [], "owner": {"reputation": 1247, "user_id": 388398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9bd10eedb6c17c1604a7cadefed6b02?s=128&d=identicon&r=PG", "display_name": "Jon Guiton", "link": "https://stackoverflow.com/users/388398/jon-guiton"}, "is_accepted": false, "score": 0, "last_activity_date": 1557354932, "creation_date": 1557354932, "answer_id": 56049917, "question_id": 56049620, "link": "https://stackoverflow.com/questions/56049620/how-can-i-use-a-stack-to-validate-if-an-expression-or-assignment-with-bnf-in-c/56049917#56049917", "title": "How can I use a stack to validate if an expression or assignment with BNF in C++?", "body": "<p>You want this :-</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Shunting-yard_algorithm\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Shunting-yard_algorithm</a></p>\n\n<p>This will convert your infix expression with brackets to a postfix expression on \na stack that you can evaluate. If the shunting fails then the expression is invalid\ni.e. with appropriate checks you can catch x=3+((-+) as a malformed expression.</p>\n"}], "owner": {"reputation": 1, "user_id": 11472521, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qbVnw9rlfII/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehfcEdORpsWiGm82-ENr3bF4hTGw/mo/photo.jpg?sz=128", "display_name": "DiiividerKng", "link": "https://stackoverflow.com/users/11472521/diiividerkng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1557354932, "creation_date": 1557352958, "question_id": 56049620, "link": "https://stackoverflow.com/questions/56049620/how-can-i-use-a-stack-to-validate-if-an-expression-or-assignment-with-bnf-in-c", "title": "How can I use a stack to validate if an expression or assignment with BNF in C++?", "body": "<p>I have tokenized with a space delimiter into a vector and then I have made it into stack. I want to use the stack to validate whether the expression or assignment is correct. </p>\n\n<p>assignment shall have the form:\nid = exp;\nexpression shall have the form:\nid op id {op id} -- any length as long as pairs of op and id are added\nA parenthesis pair may be used to group any id op id combination. Therefore:\nid op (id op id) op id AND id op id op (id op id) -- valid expressions </p>\n"}, {"tags": ["c++", "windows", "freeglut", "codelite"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1557353926, "post_id": 56049576, "comment_id": 98740908, "body": "<a href=\"https://stackoverflow.com/a/28787243/6401656\">stackoverflow.com/a/28787243/6401656</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1557363603, "post_id": 56049576, "comment_id": 98742850, "body": "<code>undefined reference to _imp___</code> normally means that you included headers specifying the functions will be in a DLL/shared object, but you linked against a normal library.  I see from the rest of freeglut_std.h that it does actually offer the option to use either DLL or static libraries, maybe you used the DLL option.  You could try adding <code>-DFREEGLUT_STATIC</code> to the compilation command and doing a full rebuild;  or try linking against DLL import libraries instead of against static libraries"}, {"owner": {"reputation": 221, "user_id": 7402032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d32d42bba6f34f098c24c7f5205213a9?s=128&d=identicon&r=PG&f=1", "display_name": "DR. Palson_PH.d", "link": "https://stackoverflow.com/users/7402032/dr-palson-ph-d"}, "edited": false, "score": 0, "creation_date": 1557366291, "post_id": 56049576, "comment_id": 98743378, "body": "Should have mentioned that I tried this, I will update the question."}], "owner": {"reputation": 221, "user_id": 7402032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d32d42bba6f34f098c24c7f5205213a9?s=128&d=identicon&r=PG&f=1", "display_name": "DR. Palson_PH.d", "link": "https://stackoverflow.com/users/7402032/dr-palson-ph-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557366490, "creation_date": 1557352695, "last_edit_date": 1557366490, "question_id": 56049576, "link": "https://stackoverflow.com/questions/56049576/multiple-undefined-reference-errors-when-linking-freeglut-and-codelite-mingw32", "title": "Multiple undefined reference errors when linking freeglut and codelite (minGW32 c++)", "body": "<p>While trying to install (if that's the right word) opengl onto my codelite IDE to create c++ opengl programs, I have run into multiple undefined reference errors in the freeglut_std.h file as well as well known functions like glutMainLoop() are also \"undefined\". </p>\n\n<p>So I have actually found the function definitions in the freeglut_std.h file and I have tried messing with the header file to make sure that there is no false conditions causing my definitions not to be created. (like making #if true ..... #endif (so that the code will for sure run)). I have experience in C but have never linked files like this before. Going through several webpages like: <a href=\"https://www.ntu.edu.sg/home/ehchua/programming/opengl/HowTo_OpenGL_C.html\" rel=\"nofollow noreferrer\">https://www.ntu.edu.sg/home/ehchua/programming/opengl/HowTo_OpenGL_C.html</a> , <a href=\"https://www.transmissionzero.co.uk/computing/using-glut-with-mingw/\" rel=\"nofollow noreferrer\">https://www.transmissionzero.co.uk/computing/using-glut-with-mingw/</a> I linked my files. (Also note, that this question has been asked before however most posts had different solutions that didn't work for me)</p>\n\n<p>So here is how codelite is compling my files (with not erroneous code) :</p>\n\n<pre><code>C:/mingw-w64/i686-7.3.0-posix-dwarf-rt_v5-rev0/mingw32/bin/g++.exe  -c  \"C:/Users/admin/Documents/codelite/workspaces/c_plus_plus/cpp_openGL/main.cpp\" -g -O0 -Wall -I\"C:\\mingw-w64\\i686-7.3.0-posix-dwarf-rt_v5-rev0\\mingw32\\include\"  -o ./Debug/main.cpp.o -I. -I.\nC:/mingw-w64/i686-7.3.0-posix-dwarf-rt_v5-rev0/mingw32/bin/g++.exe -o ./Debug/cpp_openGL @\"cpp_openGL.txt\" -L.   -m32 -static-libgcc -static-libstdc++ -static -lpthread -L\"C:\\mingw-w64\\i686-7.3.0-posix-dwarf-rt_v5-rev0\\mingw32\\lib\" -Wl,--subsystem,windows -lfreeglut -lopengl32 -lglu32\nmingw32-make.exe[1]: Leaving directory 'C:/Users/admin/Documents/codelite/workspaces/c_plus_plus/cpp_openGL'\n====0 errors, 0 warnings====\n\n</code></pre>\n\n<p>However for something like this (actual test code):</p>\n\n<pre><code>\n/*\n * GL01Hello.cpp: Test OpenGL C/C++ Setup\n */\n\n#include &lt;windows.h&gt;  // For MS Windows\n#include &lt;GL/glut.h&gt;  // GLUT, includes glu.h and gl.h\n\n/* Handler for window-repaint event. Call back when the window first appears and\n   whenever the window needs to be re-painted. */\nvoid display() {\n   glClearColor(0.0f, 0.0f, 0.0f, 1.0f); // Set background color to black and opaque\n   glClear(GL_COLOR_BUFFER_BIT);         // Clear the color buffer\n\n   // Draw a Red 1x1 Square centered at origin\n   glBegin(GL_QUADS);              // Each set of 4 vertices form a quad\n      glColor3f(1.0f, 0.0f, 0.0f); // Red\n      glVertex2f(-0.5f, -0.5f);    // x, y\n      glVertex2f( 0.5f, -0.5f);\n      glVertex2f( 0.5f,  0.5f);\n      glVertex2f(-0.5f,  0.5f);\n   glEnd();\n\n   glFlush();  // Render now\n}\n\n/* Main function: GLUT runs as a console application starting at main()  */\nint main(int argc, char** argv) {\n   glutInit(&amp;argc, argv);                 // Initialize GLUT\n   glutCreateWindow(\"OpenGL Setup Test\"); // Create a window with the given title\n   glutInitWindowSize(320, 320);   // Set the window's initial width &amp; height\n   glutInitWindowPosition(50, 50); // Position the window's initial top-left corner\n   glutDisplayFunc(display); // Register display callback handler for window re-paint\n   glutMainLoop();          // Enter the infinitely event-processing loop\n   return 0;\n}\n</code></pre>\n\n<p>I get the following errors:</p>\n\n<pre><code>./Debug/main.cpp.o: In function `glutInit_ATEXIT_HACK':\nC:/mingw-w64/i686-7.3.0-posix-dwarf-rt_v5-rev0/mingw32/include/GL/freeglut_std.h:623: undefined reference to `_imp____glutInitWithExit@12'\n./Debug/main.cpp.o: In function `glutCreateWindow_ATEXIT_HACK':\nC:/mingw-w64/i686-7.3.0-posix-dwarf-rt_v5-rev0/mingw32/include/GL/freeglut_std.h:625: undefined reference to `_imp____glutCreateWindowWithExit@8'\n./Debug/main.cpp.o: In function `glutCreateMenu_ATEXIT_HACK':\nC:/mingw-w64/i686-7.3.0-posix-dwarf-rt_v5-rev0/mingw32/include/GL/freeglut_std.h:627: undefined reference to `_imp____glutCreateMenuWithExit@8'\n./Debug/main.cpp.o: In function `main':\nC:/Users/admin/Documents/codelite/workspaces/c_plus_plus/cpp_openGL/main.cpp:32: undefined reference to `_imp__glutInitWindowSize@8'\nC:/Users/admin/Documents/codelite/workspaces/c_plus_plus/cpp_openGL/main.cpp:33: undefined reference to `_imp__glutInitWindowPosition@8'\nC:/Users/admin/Documents/codelite/workspaces/c_plus_plus/cpp_openGL/main.cpp:34: undefined reference to `_imp__glutDisplayFunc@4'\nC:/Users/admin/Documents/codelite/workspaces/c_plus_plus/cpp_openGL/main.cpp:35: undefined reference to `_imp__glutMainLoop@0'\ncollect2.exe: error: ld returned 1 exit status\n====7 errors, 0 warnings====\n\n</code></pre>\n\n<p>The file that it is complain about is freeglut_std.h, the following is copied from the file:</p>\n\n<pre><code>#if defined(_WIN32) &amp;&amp; !defined(GLUT_DISABLE_ATEXIT_HACK) &amp;&amp; !defined(__WATCOMC__)\nFGAPI void FGAPIENTRY __glutInitWithExit(int *argcp, char **argv, void (__cdecl *exitfunc)(int));\nFGAPI int FGAPIENTRY __glutCreateWindowWithExit(const char *title, void (__cdecl *exitfunc)(int));\nFGAPI int FGAPIENTRY __glutCreateMenuWithExit(void (* func)(int), void (__cdecl *exitfunc)(int));\n#ifndef FREEGLUT_BUILDING_LIB\n#if defined(__GNUC__)\n#define FGUNUSED __attribute__((unused))\n#else\n#define FGUNUSED\n#endif\nstatic void FGAPIENTRY FGUNUSED glutInit_ATEXIT_HACK(int *argcp, char **argv) { __glutInitWithExit(argcp, argv, exit); }//&lt;--has problem with\n#define glutInit glutInit_ATEXIT_HACK\nstatic int FGAPIENTRY FGUNUSED glutCreateWindow_ATEXIT_HACK(const char *title) { return __glutCreateWindowWithExit(title, exit); }//&lt;--has problem with\n#define glutCreateWindow glutCreateWindow_ATEXIT_HACK\nstatic int FGAPIENTRY FGUNUSED glutCreateMenu_ATEXIT_HACK(void (* func)(int)) { return __glutCreateMenuWithExit(func, exit); } //&lt;--has problem with\n#define glutCreateMenu glutCreateMenu_ATEXIT_HACK\n#endif\n#endif\n\n#ifdef __cplusplus\n    }\n#endif\n</code></pre>\n\n<p>Note that I could get rid the 3-undefined references with:</p>\n\n<pre><code>#define GLUT_DISABLE_ATEXIT_HACK\n</code></pre>\n\n<p>However the remaining errors still exist.</p>\n\n<p>A final note in freeglut_std.h the following lines exist (are these not definitions)</p>\n\n<pre><code>FGAPI void    FGAPIENTRY glutInit( int* pargc, char** argv );\nFGAPI void    FGAPIENTRY glutInitWindowPosition( int x, int y );\nFGAPI void    FGAPIENTRY glutInitWindowSize( int width, int height );\nFGAPI void    FGAPIENTRY glutInitDisplayMode( unsigned int displayMode );\nFGAPI void    FGAPIENTRY glutInitDisplayString( const char* displayMode );\n</code></pre>\n\n<p>And something must be working since it doesn't complain about </p>\n\n<pre><code>glutinit(param...)\nglutCreateWindow(param...)\n</code></pre>\n\n<p><strong>UPDATE</strong><br>\nI should let you guys know that I have a freeglut.dll file saved in the same location as my application. However that shouldn't matter because I also tried a static build white I used <code>-DFREEGLUT_STATIC</code> in the complier command, and linked <code>-lfreeglut_static</code> This had the same result, except the <code>_imp_</code> part of the error was gone. </p>\n\n<p>So in short I am bamboozled here, Any help is always greatly appreciated.<br>\n(p.s. please spare me mods). </p>\n"}, {"tags": ["c++", "templates", "metaprogramming"], "answers": [{"comments": [{"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1557355835, "post_id": 56049648, "comment_id": 98741352, "body": "I love the idea of making this recursive. Nice."}], "tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": true, "score": 2, "last_activity_date": 1557353738, "last_edit_date": 1557353738, "creation_date": 1557353194, "answer_id": 56049648, "question_id": 56049410, "link": "https://stackoverflow.com/questions/56049410/c-how-can-i-improve-this-bit-of-template-meta-program-to-give-back-the-array-i/56049648#56049648", "title": "C++ How can I improve this bit of template meta-program to give back the array including the size?", "body": "<p>We're going to change the function so that it takes a <code>const T (&amp;)[size]</code> for each input, and the return type is going to be <code>decltype(auto)</code>. Using <code>decltype(auto)</code> prevents the return from decaying into a value, preserving things like references to arrays. </p>\n\n<p>Updated function:</p>\n\n<pre><code>template &lt;typename T, size_t N1, size_t N2, size_t N3, size_t N4&gt;\nconstexpr decltype(auto) choose_literal(const char (&amp;psz)[N1], const wchar_t (&amp;wsz)[N2], const char16_t (&amp;u16z)[N3], const char32_t (&amp;u32z)[N4]) {\n    if constexpr (std::is_same&lt;T, char&gt;())\n        return psz;\n    if constexpr (std::is_same&lt;T, wchar_t&gt;())\n        return wsz;\n    if constexpr (std::is_same&lt;T, char16_t&gt;())\n        return u16z;\n    if constexpr (std::is_same&lt;T, char32_t&gt;())\n        return u32z;\n}\n</code></pre>\n\n<p>In main, we can assign the result to something of type <code>auto&amp;&amp;</code>:</p>\n\n<pre><code>#define LITERAL(T,x) choose_literal&lt;T&gt;(x, L##x,  u##x, U##x)\n\nint main() {\n    constexpr auto&amp;&amp; literal = LITERAL(char, \"hello\");  \n    return sizeof(literal); // Returns 6\n}\n</code></pre>\n\n<h3>Potential simplification</h3>\n\n<p>We can simplify the <code>choose_literal</code> function by making it recursive, that way it can be expanded for any number of types. This works without any changes to the <code>LITERAL</code> macro. </p>\n\n<pre><code>template&lt;class T, class Char, size_t N, class... Rest&gt;\nconstexpr decltype(auto) choose_literal(const Char(&amp;result)[N], Rest const&amp;... rest) {\n    if constexpr(std::is_same_v&lt;T, Char&gt;)\n        return result; \n    else\n        return choose_literal&lt;T&gt;(rest...);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1557355827, "post_id": 56049702, "comment_id": 98741350, "body": "I love the idea of making this recursive. Nice."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 4, "last_activity_date": 1557357607, "last_edit_date": 1557357607, "creation_date": 1557353560, "answer_id": 56049702, "question_id": 56049410, "link": "https://stackoverflow.com/questions/56049410/c-how-can-i-improve-this-bit-of-template-meta-program-to-give-back-the-array-i/56049702#56049702", "title": "C++ How can I improve this bit of template meta-program to give back the array including the size?", "body": "<p>A little bit of constexpr recursion magic allows you to return a <code>string_view</code> of the appropriate type.</p>\n\n<pre><code>#include &lt;string_view&gt;\n#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename T, class Choice, std::size_t N, class...Rest&gt;\nconstexpr auto choose_literal(Choice(&amp; choice)[N], Rest&amp;...rest)\n{\n    using const_char_type = Choice;\n\n    using char_type = std::remove_const_t&lt;const_char_type&gt;;\n\n    if constexpr (std::is_same_v&lt;T, char_type&gt;)\n    {\n        constexpr auto extent = N;\n        return std::basic_string_view&lt;char_type&gt;(choice, extent - 1);\n    }\n    else\n    {\n        return choose_literal&lt;T&gt;(rest...);\n    }\n}\n\nint main()\n{\n    auto clit = choose_literal&lt;char&gt;(\"hello\", L\"hello\");\n    std::cout &lt;&lt; clit;\n\n    auto wclit = choose_literal&lt;wchar_t&gt;(\"hello\", L\"hello\");\n    std::wcout &lt;&lt; wclit;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/4roZ_O\" rel=\"nofollow noreferrer\">https://godbolt.org/z/4roZ_O</a></p>\n\n<p>If it were me, I'd probably want to wrap this and other functions into a constexpr class which offers common services like printing the literal in the correct form depending on the stream type, and creating the correct kind of string from the literal.</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;string_view&gt;\n#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n\ntemplate &lt;typename T, class Choice, std::size_t N, class...Rest&gt;\nconstexpr auto choose_literal(Choice(&amp; choice)[N], Rest&amp;...rest)\n{\n    using const_char_type = Choice;\n\n    using char_type = std::remove_const_t&lt;const_char_type&gt;;\n\n    if constexpr (std::is_same_v&lt;T, char_type&gt;)\n    {\n        constexpr auto extent = N;\n        return std::basic_string_view&lt;char_type&gt;(choice, extent - 1);\n    }\n    else\n    {\n        return choose_literal&lt;T&gt;(rest...);\n    }\n}\n\ntemplate&lt;class...Choices&gt;\nstruct literal_chooser\n{\n    constexpr literal_chooser(Choices&amp;...choices)\n    : choices_(choices...)\n    {}\n\n    template&lt;class T&gt;\n    constexpr auto choose() \n    {\n        auto invoker = [](auto&amp;...choices)\n        {\n            return choose_literal&lt;T&gt;(choices...);\n        }; \n\n        return std::apply(invoker, choices_);\n    }\n\n    std::tuple&lt;Choices&amp;...&gt; choices_;\n};\n\ntemplate&lt;class Char, class...Choices&gt;\nstd::basic_ostream&lt;Char&gt;&amp; operator&lt;&lt;(std::basic_ostream&lt;Char&gt;&amp; os, literal_chooser&lt;Choices...&gt; chooser)\n{\n    return os &lt;&lt; chooser.template choose&lt;Char&gt;();\n}\n\ntemplate&lt;class Char, class...Choices&gt;\nstd::basic_string&lt;Char&gt; to_string(literal_chooser&lt;Choices...&gt; chooser)\n{\n    auto sview = chooser.template choose&lt;Char&gt;();\n    return std::basic_string&lt;Char&gt;(sview.data(), sview.size());\n}\n\n\nint main()\n{\n    auto lit = literal_chooser(\"hello\", L\"hello\");\n\n    std::cout &lt;&lt; lit &lt;&lt; std::endl;\n    std::wcout &lt;&lt; lit &lt;&lt; std::endl;\n\n    auto s1 = to_string&lt;char&gt;(lit);\n    auto s2 = to_string&lt;wchar_t&gt;(lit);\n\n    std::cout &lt;&lt; s1 &lt;&lt; std::endl;\n    std::wcout &lt;&lt; s2 &lt;&lt; std::endl;   \n}\n</code></pre>\n\n<p>The use of the reference argument type <code>Choices&amp;</code> is important. C++ string literals are references to arrays of const <code>Char</code>. Passing by value would result in the literal being decayed into a pointer, which would lose information about the extent of the array.</p>\n\n<p>we can add other services, written in terms of the literal_chooser:</p>\n\n<pre><code>template&lt;class Char, class...Choices&gt;\nconstexpr std::size_t size(literal_chooser&lt;Choices...&gt; chooser)\n{\n    auto sview = chooser.template choose&lt;Char&gt;();\n    return sview.size();\n}\n</code></pre>\n"}], "owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 56049648, "answer_count": 2, "score": 4, "last_activity_date": 1557357607, "creation_date": 1557351572, "last_edit_date": 1557356692, "question_id": 56049410, "link": "https://stackoverflow.com/questions/56049410/c-how-can-i-improve-this-bit-of-template-meta-program-to-give-back-the-array-i", "title": "C++ How can I improve this bit of template meta-program to give back the array including the size?", "body": "<p>I've got a utility called <code>choose_literal</code> which chooses a literal string encoded as <code>char*, wchar_*, char8_t*, char16_t*, char32_t*</code> depending on the desired type (the choice).</p>\n\n<p>It looks like this:</p>\n\n<pre><code>    template &lt;typename T&gt;\n    constexpr auto choose_literal(const char * psz, const wchar_t * wsz, const CHAR8_T * u8z, const char16_t * u16z, const char32_t * u32z) {\n        if constexpr (std::is_same_v&lt;T, char&gt;)\n            return psz;\n        if constexpr (std::is_same_v&lt;T, wchar_t&gt;)\n            return wsz;\n    #ifdef char8_t\n        if constexpr (std::is_same_v&lt;T, char8_t&gt;)\n            return u8z;\n    #endif\n        if constexpr (std::is_same_v&lt;T, char16_t&gt;)\n            return u16z;\n        if constexpr (std::is_same_v&lt;T, char32_t&gt;)\n            return u32z;\n    }\n</code></pre>\n\n<p>I supply a little preprocessor macro to make this work w/o having to type each of those string encodings manually:</p>\n\n<pre><code>// generates the appropriate character literal using preprocessor voodoo\n// usage: LITERAL(char-type, \"literal text\")\n#define LITERAL(T,x) details::choose_literal&lt;T&gt;(x, L##x, u8##x, u##x, U##x)\n</code></pre>\n\n<p>This of course only works for literal strings which can be encoded in the target format by the compiler - but something like an empty string can be, as can ASCII characters (i.e. a-z, 0-9, etc., which have representations in all of those encodings).</p>\n\n<p>e.g. here's a trivial bit of code that will return the correct empty-string given a valid character type 'T':</p>\n\n<pre><code>template &lt;typename T&gt;\nconstexpr const T * GetBlank() {\n    return LITERAL(T, \"\");\n}\n</code></pre>\n\n<p>This is great as far as it goes, and it works well enough in my code.</p>\n\n<p>What I'd like to do is to refactor this such that I get back the character-array including its size, as if I'd written something like:</p>\n\n<pre><code>const char blank[] = \"\";\n</code></pre>\n\n<p>or </p>\n\n<pre><code>const wchar_t blank[] = L\"\";\n</code></pre>\n\n<p>Which allows the compiler to know the length of the string-literal, not just its address.</p>\n\n<p>My <code>choose_literal&lt;T&gt;(str)</code> returns only the <code>const T *</code> rather than the <code>const T (&amp;)[size]</code> which would be ideal.</p>\n\n<p><em>In general I'd love to be able to pass such entities around intact - rather than have them devolve into just a pointer.</em></p>\n\n<p>But in this specific case, is there a technique you might point me towards that allows me to declare a struct with a data-member for the desired encoding which then also knows its array-length?</p>\n"}, {"tags": ["android", "c++", "sqlite", "android-sqlite"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1557352256, "post_id": 56049329, "comment_id": 98740437, "body": "Double check the path especially the Android permissions."}, {"owner": {"reputation": 3, "user_id": 4020493, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001229837788/picture?type=large", "display_name": "Akash Sethiya", "link": "https://stackoverflow.com/users/4020493/akash-sethiya"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1557425501, "post_id": 56049329, "comment_id": 98770481, "body": "android create the database file inside data/databases directory and I am passing that path to use that database file."}], "owner": {"reputation": 3, "user_id": 4020493, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001229837788/picture?type=large", "display_name": "Akash Sethiya", "link": "https://stackoverflow.com/users/4020493/akash-sethiya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557351087, "creation_date": 1557351087, "question_id": 56049329, "link": "https://stackoverflow.com/questions/56049329/how-to-use-sqlite-from-cpp-library-in-android", "title": "How to use SQLite from Cpp Library in android?", "body": "<p>I am working on an android project where the core is written in CPP (Let's say project-name: Testcpp). the Testcpp project uses SQLiteCpp, but after linking my cpp project to android, gradle builds all the dependent libraries of Testcpp. But when I run my application I am getting error <strong>Disk I/O Failed</strong> Exception. I have set the PRAGMA <strong>journal_mode=OFF, synchronous=OFF and auto vacuum=2</strong>. But everytime when I tried to insert the bulk data, the app is crashing. \nAny suggestions how to tackle this error.</p>\n"}, {"tags": ["c++", "arrays", "templates", "overload-resolution"], "comments": [{"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1557351178, "post_id": 56049232, "comment_id": 98740096, "body": "Is there any reason why you need to use raw arrays? You wouldn&#39;t have this problem if you used <code>std::array</code>."}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "reply_to_user": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1557423670, "post_id": 56049232, "comment_id": 98769631, "body": "life is full of legacy code."}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1557423768, "post_id": 56049232, "comment_id": 98769675, "body": "Huh. You don&#39;t say."}], "answers": [{"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1557361410, "post_id": 56049270, "comment_id": 98742437, "body": "This works because 0L will bind to a long in preference to an int? This will work in the specific case of selecting one of two overload categories, but in the general case we&#39;ll run out of types :)"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 2, "last_activity_date": 1557350785, "creation_date": 1557350785, "answer_id": 56049270, "question_id": 56049232, "link": "https://stackoverflow.com/questions/56049232/is-there-a-way-to-force-this-ambiguity-away/56049270#56049270", "title": "Is there a way to force this ambiguity away?", "body": "<blockquote>\n  <p>Is there a technique I can use to force the compiler to discount the 1st version of my function (no known bounds) when the bounds is known?</p>\n</blockquote>\n\n<p>What about adding a level of indirection?</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::size_t GetLength (const T * psz, int)\n { /* compute size w/o knowing what upper bound may be */ }\n\ntemplate &lt;typename T, size_t size&gt;\nstd::size_t GetLength (const T(&amp;psz)[size], long)\n { /* we know the upper bound */ }\n\ntemplate &lt;typename T&gt;\nstd::size_t GetLength (T const &amp; t)\n { GetLength(t, 0L); }\n</code></pre>\n\n<p>Adding an unused different parameter (<code>int</code> or <code>long</code>) you can select the preferred version.</p>\n"}, {"comments": [{"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1557351895, "post_id": 56049328, "comment_id": 98740331, "body": "d&#39;oh - I had no idea that is_array could distinguish off a T!"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 1, "creation_date": 1557353229, "post_id": 56049328, "comment_id": 98740713, "body": "Ok, fixed now. But I had to get the extent separately, not in the usual <code>T(&amp;psz)[size]</code> way."}], "tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": true, "score": 1, "last_activity_date": 1557353120, "last_edit_date": 1557353120, "creation_date": 1557351083, "answer_id": 56049328, "question_id": 56049232, "link": "https://stackoverflow.com/questions/56049232/is-there-a-way-to-force-this-ambiguity-away/56049328#56049328", "title": "Is there a way to force this ambiguity away?", "body": "<p>We could use type traits:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\n   // If T is an array \n   template&lt;\n       typename T,\n       typename std::enable_if &lt;\n       std::is_array&lt;T&gt;{},\n       size_t\n       &gt; ::type Extent = std::extent&lt;T&gt;::value\n   &gt;\n   size_t GetLength(const T&amp; t)\n   {\n       return Extent;\n   }\n\n   // If T is not an array \n   template&lt;typename T,\n       typename std::enable_if &lt;\n       !std::is_array&lt;T&gt;{},\n       size_t\n       &gt; ::type = 0\n   &gt;\n   size_t GetLength(const T&amp; t)\n   {\n       return {};\n   }\n\n   int main()\n   {\n       int arr[5]{};\n       GetLength(arr); // calls first\n\n       //decay to pointer\n       auto val = arr;\n       GetLength(val); // calls second\n   }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1557357033, "post_id": 56050148, "comment_id": 98741631, "body": "Thank you!  This is extremely cool.  I&#39;ve got loads of contexts where I&#39;m struggling to add a &quot;rank&quot; system to enforce a ranking of overloads, essentially.  I can&#39;t use this in this particular context of choose_literal, but I can use this elsewhere I&#39;m certain."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1557357380, "post_id": 56050148, "comment_id": 98741707, "body": "If you adopt my string_view version of choose_literal (see other question), you won&#39;t need it anyway. string_view has a <code>.size()</code> method. I&#39;ll update the other answer."}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1557357690, "post_id": 56050148, "comment_id": 98741768, "body": "<code>string_view</code> is very cool - and long overdue.  OTOH, I have reams of legacy code that is performant and is expressed using char_type arrays and interfaces.  This code is explicitly to support such legacy code.  New code, or refactored code, definitely should use <code>string_view</code>."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1557357713, "post_id": 56050148, "comment_id": 98741773, "body": "@Mordachai do you mean that you can&#39;t use it because you don&#39;t have access to boost, or because the actual problem domain is more complex?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 1, "creation_date": 1557357800, "post_id": 56050148, "comment_id": 98741794, "body": "@Mordachai I see. <code>std::string_view</code> (or <code>boost::string_view</code>) is <code>constexpr</code>-enabled. It performs exactly as fast as a literal char array."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 1, "creation_date": 1557358493, "post_id": 56050148, "comment_id": 98741907, "body": "@Mordachai updated with non-boost version if that helps."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1557358434, "last_edit_date": 1557358434, "creation_date": 1557356771, "answer_id": 56050148, "question_id": 56049232, "link": "https://stackoverflow.com/questions/56049232/is-there-a-way-to-force-this-ambiguity-away/56050148#56050148", "title": "Is there a way to force this ambiguity away?", "body": "<p>If you have access to a recent version of boost, you can use the incredibly powerful HOF library (stands for higher order functions).</p>\n\n<p>One of the functions I use most to simplify code path selection based on argument type is the function <code>first_of</code>.</p>\n\n<p>The way this works is that you give it a list of template function objects (or lambdas) in the order you want the compiler to try them. The first legal function object in the list is selected.</p>\n\n<p>example:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;boost/hof.hpp&gt;\n#include &lt;cstring&gt;\n#include &lt;utility&gt;\n#include &lt;iostream&gt;\n\n// a function to compute length from a pointer. For exposition, \n// I have only considered char pointers but any number of overloads will work.\ntemplate&lt;class T&gt; \nstd::size_t \nstring_pointer_length(T*p)\n{\n    // for exposition\n    return std::strlen(p);\n}\n\n// a function to compute string length from a literal\ntemplate&lt;class T, std::size_t N&gt; \nconstexpr \nstd::size_t literal_string_length(T (&amp;s)[N])\n{\n    return N - 1;\n}\n\n// The generic GetLength function which takes any kind of string\ntemplate &lt;typename T&gt;\nstd::size_t GetLength(T&amp;&amp; str) \n{ \n    // select the FIRST legal choice of the following lambdas and invoke...\n    return boost::hof::first_of(\n        [](auto&amp;&amp;s) BOOST_HOF_RETURNS(literal_string_length(s)),\n        [](auto&amp;&amp;s) BOOST_HOF_RETURNS(string_pointer_length(s))\n    )(str);\n}\n\n\nint main()\n{\n    static const auto lit = \"hello\";\n    auto plit = std::addressof(lit[0]);\n\n    auto n = GetLength(lit);\n    auto n2 = GetLength(plit);\n\n    std::cout &lt;&lt; n &lt;&lt; \", \" &lt;&lt; n2 &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The macro <code>BOOST_HOF_RETURNS</code> saves us having to spell out the lambdas like this:</p>\n\n<pre><code>    return boost::hof::first_of(\n        [](auto&amp;&amp;s) -&gt; decltype(literal_string_length(s)) { return literal_string_length(s); },\n        [](auto&amp;&amp;s) BOOST_HOF_RETURNS(string_pointer_length(s))\n    )(str);\n</code></pre>\n\n<p>If you're not able to use boost.hof, writing our own replacement is surprisingly trivial:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;cstring&gt;\n#include &lt;tuple&gt;\n#include &lt;utility&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;class T&gt; \nstd::size_t \nstring_pointer_length(T*p)\n{\n    // for exposition\n    return std::strlen(p);\n}\n\ntemplate&lt;class T, std::size_t N&gt; \nconstexpr \nstd::size_t literal_string_length(T (&amp;s)[N])\n{\n    return N - 1;\n}\n\ntemplate&lt;class...Args, class This, class...Others&gt;\nconstexpr auto try_these(std::tuple&lt;Args...&gt; args, This _this, Others...others)\n{\n    if constexpr (std::is_invocable_v&lt;This, Args...&gt;)\n    {\n        return std::apply(_this, args);\n    }\n    else\n    {\n        return try_these(args, others...);\n    }\n}\n\nstruct invoke_string_pointer_length\n{\n    template&lt;class S&gt;\n    constexpr auto operator()(S&amp;&amp; s) const -&gt; decltype(string_pointer_length(s)) \n    { return string_pointer_length(s); }\n};\n\nstruct invoke_literal_string_length\n{\n    template&lt;class S&gt;\n    constexpr auto operator()(S&amp;&amp; s) const -&gt; decltype(literal_string_length(s)) \n    { return literal_string_length(s); }\n};\n\ntemplate &lt;typename T&gt;\nstd::size_t GetLength(T&amp;&amp; str) \n{ \n    return try_these(std::forward_as_tuple(std::forward&lt;T&gt;(str)), \n        invoke_literal_string_length(), \n        invoke_string_pointer_length());\n}\n\n\nint main()\n{\n    static const auto lit = \"hello\";\n    auto plit = std::addressof(lit[0]);\n\n    auto n = GetLength(lit);\n    auto n2 = GetLength(plit);\n\n    std::cout &lt;&lt; n &lt;&lt; \", \" &lt;&lt; n2 &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 56049328, "answer_count": 3, "score": 0, "last_activity_date": 1557358434, "creation_date": 1557350576, "question_id": 56049232, "link": "https://stackoverflow.com/questions/56049232/is-there-a-way-to-force-this-ambiguity-away", "title": "Is there a way to force this ambiguity away?", "body": "<p>I'd like to supply two forms of a <code>GetLength(psz)</code> style function - one that doesn't know an upper bounds, and one that does:</p>\n\n<pre><code>template &lt;typename T&gt;\nsize_t GetLength(const T * psz) { /* compute size w/o knowing what upper bound may be */ }\n\ntemplate &lt;typename T, size_t size&gt;\nsize_t GetLength(const T(&amp;psz)[size]) { /* we know the upper bound */ }\n</code></pre>\n\n<p>I'd like that this not be ambiguous.  I want the array-sized version to be chosen when the argument is an array of known size.  I want the unbounded version chosen when the argument is just a pointer, not a known fixed array.</p>\n\n<p>I'd also offer a 3rd version which explicitly takes the upper bounds as an argument, without templated size deduction, for passing that info in from an outer context which has otherwise lost the ability to deduce that from its local arguments.</p>\n\n<p><strong>Is there a technique I can use to force the compiler to discount the 1st version of my function (no known bounds) when the bounds is known?</strong></p>\n"}, {"tags": ["c++", "qt"], "owner": {"reputation": 41, "user_id": 11305506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98ab49660ca7e98b6a3a2390e130609e?s=128&d=identicon&r=PG&f=1", "display_name": "holyris", "link": "https://stackoverflow.com/users/11305506/holyris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1557365076, "answer_count": 0, "score": 1, "last_activity_date": 1557388398, "creation_date": 1557350110, "last_edit_date": 1557388398, "question_id": 56049152, "link": "https://stackoverflow.com/questions/56049152/qstackedlayout-setalignment-function-does-nothing", "closed_reason": "Duplicate", "title": "QStackedLayout setAlignment function does nothing", "body": "<p>hope you're doing well.</p>\n\n<p>I'm trying to right align two widgets contained in a QStackedLayout.\nThe two widgets are resize to be square, so they don't take all the place in the layout. </p>\n\n<p>I tried :</p>\n\n<pre><code>stacked_layout-&gt;setAlignment(widget1, Qt::AlignRight)\n</code></pre>\n\n<p>I also tried to resize the QStackedLayout itself with setGeometry, but it doesn't resize well.</p>\n\n<blockquote>\n  <p>Place the QProgressBar in a container (i.e. QWidget) that allows it to be centered with an additional layout.</p>\n</blockquote>\n\n<p>doesn't work either. Or maybe I didn't understand the answer. The only item that can be add to a QStackedLayout is QWidget. And \"an additional layout\" isn't clear either.</p>\n\n<p>Here's what you could do to reproduce the problem  </p>\n\n<pre><code>QStackedLayout *stacked_layout = new QStackedLayout();    \nQLabel *label = new QLabel(QPixmap(\"image\")); \nstacked_layout-&gt;addWidget(label);\nlabel-&gt;setFixedSize(label-&gt;size().height(), label-&gt;size().height());\nstacked_layout-&gt;setAlignment(label, Qt::AlignRight);\n</code></pre>\n\n<p>The label should be align to the right but it does absolutely nothing.</p>\n\n<p>Any idea please ?</p>\n"}, {"tags": ["c++", "for-loop", "vector"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1557349687, "post_id": 56049036, "comment_id": 98739575, "body": "I  imagine these are typos: <code>vector&lt;float&gt; x_range[size], y_range[size], z_range[size];</code>. You need <code>vector&lt;float&gt; x_range(size), y_range(size), z_range(size);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 8215939, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-X08OJuisQ8A/AAAAAAAAAAI/AAAAAAAAAAs/ymoI8QfDsEo/photo.jpg?sz=128", "display_name": "Danny Diaz", "link": "https://stackoverflow.com/users/8215939/danny-diaz"}, "edited": false, "score": 0, "creation_date": 1557350477, "post_id": 56049098, "comment_id": 98739840, "body": "Thank you for explaining that. I had no idea. I really appreciate your help!!! Ive been trying to fixe it for 2 hours."}], "tags": [], "owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "is_accepted": false, "score": 2, "last_activity_date": 1557349806, "creation_date": 1557349806, "answer_id": 56049098, "question_id": 56049036, "link": "https://stackoverflow.com/questions/56049036/error-expression-must-have-integral-or-unscoped-enum-type-when-incrementally-fi/56049098#56049098", "title": "error: expression must have integral or unscoped enum type when incrementally filling in vectors", "body": "<p>The problem stems from this line:</p>\n\n<pre><code>vector&lt;float&gt; x_range[size], y_range[size], z_range[size];\n</code></pre>\n\n<p><code>vector&lt;float&gt; x_range[size]</code> declares an <strong>array of</strong> vectors, instead of a single vector, due to the square brackets <code>[]</code>. Unfortunately, since <code>size</code> is not a compile-time constant, this is non-standard behavior, called Variable-Length Arrays, and your compiler is allowing it only as a quirk.</p>\n\n<p>Due to this, every <code>x_range[i]</code> is <em>itself</em> a <code>vector&lt;float&gt;</code>, and not simply a <code>float</code>.</p>\n\n<p>You probably want  <code>vector&lt;float&gt; x_range(size);</code>, which declares a single vector with a specific size.</p>\n"}], "owner": {"reputation": 315, "user_id": 8215939, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-X08OJuisQ8A/AAAAAAAAAAI/AAAAAAAAAAs/ymoI8QfDsEo/photo.jpg?sz=128", "display_name": "Danny Diaz", "link": "https://stackoverflow.com/users/8215939/danny-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557349806, "creation_date": 1557349473, "question_id": 56049036, "link": "https://stackoverflow.com/questions/56049036/error-expression-must-have-integral-or-unscoped-enum-type-when-incrementally-fi", "title": "error: expression must have integral or unscoped enum type when incrementally filling in vectors", "body": "<p>I am trying to fill arrays starting at initial values (location in xyz space) and move forward in the space by a discrete step to fill a 3d box. </p>\n\n<p>I can't find a solution to this error message applied to something similar anywhere. Most of the answers to similar question involve some sort of syntax error. Maybe mine is too, I am still relatively new to C and C++. </p>\n\n<p>I have tried casting i to an int while indexing into x_array and it just throws any even more cryptic error: </p>\n\n<pre><code>error: no operator \"=\" matches these operands operand types are: std::vector&lt;float, std::allocator&lt;float&gt;&gt; = float\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>atom_box build_box(\n          vector&lt;xyz_coords&gt; all_atom_coords, vector&lt;string&gt; all_atom_names, vector&lt;float&gt; box_origin_coords,\n          map&lt;string, float&gt; p_charge_map, map &lt;string, float&gt; solv_access_map,\n          int box_size = 20, const int channels = 7, float voxel = 1.0)\n{\n  float x1,x2, y1,y2, z1,z2; // first and last values of the box\n  const int  x_dim = box_size, y_dim = box_size, z_dim = box_size;\n  atom_box box(channels, x_dim, y_dim, z_dim);\n  map&lt;char,int&gt; atom_chann_map = {  {'N', 0}, {'C', 1}, {'O', 2}, {'S', 3}, {'H', 4}  };\n\n  float delta =  box_size/2.0;\n  //cout &lt;&lt; \"Delta: \" &lt;&lt; delta &lt;&lt; endl;\n\n  x1 = box_origin_coords[0] - delta; x2 = box_origin_coords[0] + delta;\n  y1 = box_origin_coords[1] - delta; y2 = box_origin_coords[1] + delta;\n  z1 = box_origin_coords[2] - delta; z2 = box_origin_coords[2] + delta;\n\n  int size = (x2 - x1)/voxel + 1;\n  vector&lt;float&gt; x_range[size], y_range[size], z_range[size];\n\n  for (float i = 0, x = x1, y = y1, z = z1;\n       i &lt; size;\n       i++, x += voxel, y += voxel, z += voxel)\n  {\n    x_range[i] = x; y_range[i] = y; z_range[i] = z;\n  }\n\n  return box;\n}\n</code></pre>\n"}, {"tags": ["c++", "thread-safety", "circular-buffer"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1557349412, "post_id": 56048952, "comment_id": 98739477, "body": "Sure that&#39;s possible. Better explain what&#39;s not working with your implementation to get helped."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1557349632, "post_id": 56048952, "comment_id": 98739554, "body": "It seems reasonable (and actually a very good effort for someone 6 days into their career). There&#39;s a few issues - you have some public member functions (<code>size</code>, <code>empty</code>, <code>full</code>) which require locking also - you cannot access those variables in a threadsafe manner without locking (or making them atomic in someway). Remember when you do add locks, that <code>get</code>&#39;s call to <code>empty</code> should not lock a second time - you probably want a private <code>empty_no_lock()</code> which <code>get</code> calls which doesn&#39;t add a lock."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1557473010, "post_id": 56048952, "comment_id": 98784099, "body": "@MikeVine &quot;<i>should not lock a second time</i>&quot; ...or a recursive lock"}], "answers": [{"comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1557350069, "post_id": 56049092, "comment_id": 98739687, "body": "The tracking of <code>_full</code> is necessary if you want to differentiate a full vs an empty buffer - in both those cases head == tail. What he&#39;s done works (although it pretty nasty to read."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1557350376, "post_id": 56049092, "comment_id": 98739800, "body": "@MikeVine good point, I should&#39;ve through about that a bit more. fixed, thanks again!"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1557430515, "post_id": 56049092, "comment_id": 98772709, "body": "@SolomonSlow There is an implicit conversion from array to pointer <a href=\"http://eel.is/c++draft/conv.array#1\" rel=\"nofollow noreferrer\">&#91;conv.array&#93;/1</a> but that only means an array <i>can</i> be converted, not that arrays always are converted. The reason why arrays are effectively passed by reference lies in <a href=\"http://eel.is/c++draft/dcl.fct#5\" rel=\"nofollow noreferrer\">&#91;dcl.fct&#93;/5</a>. If a function parameter is declared to be of array type, the type of the parameter is implicitly adjusted to be a pointer type instead. Note that this affects the type of the function itself, it has nothing to do with whether or not an argument happens to name an array\u2026"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1557438533, "post_id": 56049092, "comment_id": 98775787, "body": "!! I guess my problem is, I <i>still</i> keep thinking of C++ as &quot;C with extra features.&quot; I&#39;ve got to break that habit !!"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1557438796, "post_id": 56049092, "comment_id": 98775871, "body": "@SolomonSlow in this case, it&#39;s exactly the same in C though\u2026 ;)"}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": true, "score": 4, "last_activity_date": 1557350514, "last_edit_date": 1557350514, "creation_date": 1557349789, "answer_id": 56049092, "question_id": 56048952, "link": "https://stackoverflow.com/questions/56048952/is-it-possible-to-implement-a-thread-safe-circular-bufffer-that-consists-of-arra/56049092#56049092", "title": "Is it possible to implement a thread safe circular bufffer that consists of arrays?", "body": "<p>First of all, be aware that if anyone uses the <code>size()</code>, <code>empty()</code>, or <code>full()</code> methods of an instance of this class template while someone else is concurrently using <code>get()</code>, <code>put()</code>, or <code>reset()</code>, you will end up with undefined behavior. <code>size()</code> or <code>empty()</code> will also have to lock the mutex because they read the values of objects (<code>full_</code>, <code>head_</code>, and <code>tail_</code>) that may potentially be modified concurrently. Apart from that, it would seem to me that <code>put()</code> always writes something, even if the queue is full. That's probably not what one would typically want.</p>\n\n<p>Based on your description, I assume the problem you're asking about has to do with trying to create, e.g., a <code>circular_buffer&lt;float[4]&gt;</code>. Think about what the <code>get()</code> method would turn into if you substitute the type <code>float[4]</code> for <code>T</code>:</p>\n\n<pre><code>float get()[4] { \u2026 }\n</code></pre>\n\n<p>You end up with a function returning an array. Functions are not allowed to return arrays <a href=\"http://eel.is/c++draft/dcl.fct#11\" rel=\"nofollow noreferrer\">[dcl.fct]/11</a>.* That's why you end up with a compiler error as soon as you'd call the <code>get()</code> method on such a <code>circular_buffer</code>. Use, e.g., <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a> instead: <code>circular_buffer&lt;std::array&lt;float, 4&gt;&gt;</code>.</p>\n\n<p>*) I believe this is most likely for historical reasons. The way array types were designed to behave when passed to functions in C was such that arrays would effectively end up being passed by reference; there is no good way for a function to return an array by reference, and returning by value would be inconsistent with how they are passed in. Thus, it's probably best to just disallow arrays to be returned at all&hellip;</p>\n"}], "owner": {"reputation": 89, "user_id": 10388855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WeekRcjMQOE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPWVqSYDa4kU6Z9_zIrPXomvmUdQw/mo/photo.jpg?sz=128", "display_name": "cheesemas46", "link": "https://stackoverflow.com/users/10388855/cheesemas46"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 56049092, "answer_count": 1, "score": 1, "last_activity_date": 1557350514, "creation_date": 1557348992, "last_edit_date": 1557350357, "question_id": 56048952, "link": "https://stackoverflow.com/questions/56048952/is-it-possible-to-implement-a-thread-safe-circular-bufffer-that-consists-of-arra", "title": "Is it possible to implement a thread safe circular bufffer that consists of arrays?", "body": "<p>I am trying to implement a circular buffer that utilizes mutex in order to be thread safe. I have been using the following code:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\n#include &lt;memory&gt;\n#include &lt;mutex&gt;\n\ntemplate &lt;class T&gt;\nclass circular_buffer {\npublic:\n    explicit circular_buffer(size_t size) :\n        buf_(std::unique_ptr&lt;T[]&gt;(new T[size])),\n        max_size_(size)\n    {\n\n    }\n\n    void put(T item)\n    {\n        std::lock_guard&lt;std::mutex&gt; lock(mutex_);\n\n        buf_[head_] = item;\n\n        if (full_)\n        {\n            tail_ = (tail_ + 1) % max_size_;\n        }\n\n        head_ = (head_ + 1) % max_size_;\n\n        full_ = head_ == tail_;\n    }\n\n    T get()\n    {\n        std::lock_guard&lt;std::mutex&gt; lock(mutex_);\n\n        if (empty())\n        {\n            return T();\n        }\n\n        //Read data and advance the tail (we now have a free space)\n        auto val = buf_[tail_];\n        full_ = false;\n        tail_ = (tail_ + 1) % max_size_;\n\n        return val;\n    }\n\n    void reset()\n    {\n        std::lock_guard&lt;std::mutex&gt; lock(mutex_);\n        head_ = tail_;\n        full_ = false;\n    }\n\n    bool empty() const\n    {\n        //if head and tail are equal, we are empty\n        return (!full_ &amp;&amp; (head_ == tail_));\n    }\n\n    bool full() const\n    {\n        //If tail is ahead the head by 1, we are full\n        return full_;\n    }\n\n    size_t capacity() const\n    {\n        return max_size_;\n    }\n\n    size_t size() const\n    {\n        size_t size = max_size_;\n\n        if (!full_)\n        {\n            if (head_ &gt;= tail_)\n            {\n                size = head_ - tail_;\n            }\n            else\n            {\n                size = max_size_ + head_ - tail_;\n            }\n        }\n\n        return size;\n    }\n\nprivate:\n    std::mutex mutex_;\n    std::unique_ptr&lt;T[]&gt; buf_;\n    size_t head_ = 0;\n    size_t tail_ = 0;\n    const size_t max_size_;\n    bool full_ = 0;\n};\n\n</code></pre>\n\n<p>The problem with this code is that I cannot seem to get it to work with arrays of floats. I am getting a function returns array error (from the get function). I am not entirely sure how to fix this (tried passing in an array and using get() function to point that array, but this didn't work either). Sorry if this question is a bit abstract, I am honestly completely in over my head on this one (first job as dev and literally my 6 days into job they're having me make a very complex radar mapping app). Let me know if you need any clarifications on anything.</p>\n\n<p>edit: Thanks everyone! Michael's answer worked, and thanks for the suggestions.  I honestly feel like I'm drowning over my head right now so all the tips are extremely helpful!</p>\n"}, {"tags": ["c++", "mpi"], "comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 1, "creation_date": 1557351843, "post_id": 56048697, "comment_id": 98740314, "body": "You are mixing communicators with root rank. In your snippet, there is only one communicator and it is <code>MPI_COMM_WORLD</code>. All the ranks of the communicator must invoke <code>MPI_Bcast()</code> with the <b>same</b> root rank, and I suspect that is not the case in your program, and hence the undefined behavior. Please upload a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> if you need more help."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1557391174, "post_id": 56048697, "comment_id": 98751542, "body": "@GillesGouaillardet Yes, sorry for the confusion about communicators and ranks. My problem is, all ranks are trying to broadcast data. Firstly, each one sends single broadcast (in <code>broadcastOwnVectorToOtherCommunicators()</code>), secondly every rank tries to receive broadcasts from all other ranks (<code>receiveBroadcastsFromOtherCommunicators()</code>). Multiple brodcasts are being exchanged at the same time. I&#39;ll edit the question to try and clear it up."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1557391715, "post_id": 56048697, "comment_id": 98751851, "body": "And yes, all broadcasts are received. e.g. process with rank <code>3</code> will send one broadcast and receive total of 3 broadcasts from <code>0</code>, <code>1</code> and <code>2</code>. But the received data is mixed up, as if the <code>rank</code> argument in <code>MPI_Bcast</code> was ignored."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1557393078, "post_id": 56048697, "comment_id": 98752654, "body": "Once again, you are likely misusing <code>MPI_Bcast()</code>. All the ranks of the communicator must invoke the collective subroutine with the same <code>root</code> argument. I can only confirm it if you edit your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1557395759, "post_id": 56048697, "comment_id": 98754242, "body": "@GillesGouaillardet What is missing from Complete example? <code>main()</code>? PBS file for <code>qsub</code>? I could refactor it to avoid classes to try to simplify it? I&#39;m trying to explain that all processes will call <code>MPI_Bcast</code> with the given <code>root</code> <i>eventually</i>. All processes will <b>at some point</b> call it with <code>root == 0</code>, with <code>root == 1</code>, etc. If this is not allowed, that&#39;s all I&#39;m asking about."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1557397295, "post_id": 56048697, "comment_id": 98755112, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> can at the very least be compiled and ran."}], "answers": [{"tags": [], "owner": {"reputation": 1153, "user_id": 11345381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3322e1e397dd7f2626bd3b7280585b1?s=128&d=identicon&r=PG&f=1", "display_name": "rtoijala", "link": "https://stackoverflow.com/users/11345381/rtoijala"}, "is_accepted": false, "score": 1, "last_activity_date": 1558624385, "creation_date": 1558624385, "answer_id": 56278277, "question_id": 56048697, "link": "https://stackoverflow.com/questions/56048697/is-it-wrong-to-call-mpi-bcast-several-times/56278277#56278277", "title": "Is it wrong to call MPI_Bcast several times?", "body": "<p>Quoting the MPI 3.1 standard (section 5.12):</p>\n\n<blockquote>\n  <p>All processes must call collective operations (blocking and nonblocking)\n  in the same order per communicator. In particular, once a process calls\n  a collective operation, all other processes in the communicator must\n  eventually call the same collective operation, and no\n  other collective operation with the same communicator in between.</p>\n</blockquote>\n\n<p>Combine this with section 5.4:</p>\n\n<blockquote>\n  <p>If comm is an intracommunicator, MPI_BCAST broadcasts a message from\n  the process with rank root to all processes of the group, itself\n  included. It is called by all members of the group using the same\n  arguments for comm and root.</p>\n</blockquote>\n\n<p>I interpret these two sections to mean that you must call <code>MPI_Bcast</code> and similar collective communication functions in the same order with the same arguments on all processes. Calling with different root values is invalid.</p>\n\n<p>I believe <code>MPI_Allgather</code> is more suited to the communication you seem to want. It gathers equal amounts of data from all processes and copies it to each process.</p>\n"}], "owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1558624385, "creation_date": 1557347848, "last_edit_date": 1557653152, "question_id": 56048697, "link": "https://stackoverflow.com/questions/56048697/is-it-wrong-to-call-mpi-bcast-several-times", "title": "Is it wrong to call MPI_Bcast several times?", "body": "<p>I'm trying to implement Matrix-Vector multiplication using MPI (i.e. <code>nxn</code> matrix multiplied by <code>nx1</code> vector).</p>\n\n<p>Originally, I decided to use multiple <code>MPI_Bcast</code> calls (before I noticed <code>MPI_AllGather</code>...) and I stumbled upon some strange behaviour. Apparently, data can be received no matter what rank is passed to <code>MPI_Bcast</code> call.</p>\n\n<p>Part of the code used (the functions are called right after each other, so sending broadcast is before receiving broadcasts). Prints are just for debugging purposes, where I know testing data is of length 2:</p>\n\n<pre><code>class Processor\n{\npublic:\n    Processor(int rank, int communicatorSize);\n\nprivate:\n    void broadcastOwnVectorToOtherRanks();\n    void receiveBroadcastsFromOtherRanks();\n    //...\n\n    int ownRank;\n    int communicatorSize;\n    std::vector&lt;int&gt; ownVectorPart;\n    std::vector&lt;int&gt; totalVector;\n    //...\n};\n\nvoid Processor::broadcastOwnVectorToOtherRanks()\n{\n    //ownVectorPart is correctly filled before this function call\n    std::printf(\"Own data in vector %d %d\\n\", ownVectorPart[0], ownVectorPart[1]);\n    MPI_Bcast(ownVectorPart.data(), ownVectorPart.size(), MPI_INT, ownRank, MPI_COMM_WORLD);\n}\n\nvoid Processor::receiveBroadcastsFromOtherCommunicators()\n{\n    for (int rank = 0; rank &lt; communicatorSize; ++rank)\n    {\n        if (rank == ownRank)\n        {\n            totalVector.insert(totalVector.end(), ownVectorPart.begin(), ownVectorPart.end());\n        }\n        else\n        {\n            std::vector&lt;int&gt; buffer(ownVectorPart.size());\n            MPI_Bcast(buffer.data(), ownVectorPart.size(), MPI_INT, rank, MPI_COMM_WORLD);\n            std::printf(\"Received from process with rank %d: %d %d\\n\", rank, buffer[0], buffer[1]);\n            totalVector.insert(totalVector.end(), buffer.begin(), buffer.end());\n        }\n    }\n}\n</code></pre>\n\n<p>Outcome (sorted by rank):</p>\n\n<pre><code>[0] Own data in vector 0 1\n[0] Received from communicator 1: 6 7\n[0] Received from communicator 2: 4 5\n[0] Received from communicator 3: 2 3\n[1] Own data in vector 2 3\n[1] Received from communicator 0: 0 1\n[1] Received from communicator 2: 4 5\n[1] Received from communicator 3: 6 7\n[2] Own data in vector 4 5\n[2] Received from communicator 0: 0 1\n[2] Received from communicator 1: 2 3\n[2] Received from communicator 3: 6 7\n[3] Own data in vector 6 7\n[3] Received from communicator 0: 4 5\n[3] Received from communicator 1: 2 3\n[3] Received from communicator 2: 0 1\n</code></pre>\n\n<hr>\n\n<p>As you can see, in process with rank 0 and 3 data received is different than data sent. For example, process with rank <code>0</code> received data from rank <code>3</code>, even though it is expecting data from process <code>1</code>.</p>\n\n<p>It seems to me that rank is disregarded when receiving broadcast data, and MPI assigns data as it comes, whether it was from expected rank or not.</p>\n\n<p>Why does <code>MPI_Bcast</code> receive data from process with rank <code>3</code>, when rank passed as argument is <code>1</code>? Is calling <code>MPI_Bcast</code> multiple times at the same time an undefined behaviour? Or is there a bug in my code?</p>\n"}, {"tags": ["java", "android", "c++", "qt", "shared-libraries"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1557347890, "post_id": 56048683, "comment_id": 98738885, "body": "Why the C++ tag?"}, {"owner": {"reputation": 1739, "user_id": 1219052, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2LXbb.png?s=128&g=1", "display_name": "Jimson Kannanthara James", "link": "https://stackoverflow.com/users/1219052/jimson-kannanthara-james"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1557348764, "post_id": 56048683, "comment_id": 98739230, "body": "because the app is c++ (QT), java part is just a bootstrapper. See ShellActivity extends QtActivity and all the lib loading is done by QT framework and the application logic is also c++ as well."}], "owner": {"reputation": 1739, "user_id": 1219052, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2LXbb.png?s=128&g=1", "display_name": "Jimson Kannanthara James", "link": "https://stackoverflow.com/users/1219052/jimson-kannanthara-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557348612, "creation_date": 1557347777, "last_edit_date": 1557348612, "question_id": 56048683, "link": "https://stackoverflow.com/questions/56048683/unsatisfiedlinkerror-libcrypto-so-1-0-0", "title": "UnsatisfiedLinkError libcrypto.so.1.0.0", "body": "<p>In newer Android versions, the application is failing to start with UnsatisfiedLinkError exception.\nIt looks like the <code>org.qtproject.qt5.android.QtNative.loadBundledLibraries</code> is trying to load the versioned library but is not able to!</p>\n\n<p>Since my <code>app.shell.ShellActivity.onCreate()</code> is not loading the lib directly (shown below there is <strong>no</strong> <code>system.load</code> in there), I don't have any idea how to tackle this lib loading failure.</p>\n\n<pre><code>public class ShellActivity extends QtActivity {\n@Override\npublic void onCreate(Bundle savedInstanceState) {\nsuper.onCreate(savedInstanceState);\n\n    if (running) {\n        Log.e(TAG, \"An instance of this activity is already running!\");\n        setResult(-2);\n        finish();\n        System.exit(-2);\n        return;\n    }\n    running = true;\n}\n}\n</code></pre>\n\n<p>The lib is configured in .pro as shown below,</p>\n\n<pre><code>app_android: contains(ANDROID_TARGET_ARCH,armeabi-v7a) {\nLIBS += -L$$PWD/lib/android/ -lcrypto -lssl\nANDROID_EXTRA_LIBS = \n$$PWD/lib/android/libcrypto.so \n$$PWD/lib/android/libssl.so\n}\n\nCONFIG += app_android\n</code></pre>\n\n<p>Please note that the application is running fine in other lower android versions, (tested on 4.4, and 5.1) but failing on Android 9.0 (Pie).</p>\n\n<p><code>objdump output</code></p>\n\n<p><code>libcrypto.so</code></p>\n\n<pre><code>file format elf32-little\nNEEDED libdl.so\nNEEDED libc.so\nSONAME libcrypto.so\n</code></pre>\n\n<p><code>libapp.so</code></p>\n\n<pre><code>file format elf32-little\n\n  NEEDED               libz.so\n  NEEDED               libcrypto.so\n  NEEDED               libssl.so\n  NEEDED               libQt5Quick.so\n  NEEDED               libQt5Multimedia.so\n  NEEDED               libQt5Svg.so\n  NEEDED               libQt5Widgets.so\n  NEEDED               libQt5Gui.so\n  NEEDED               libQt5Qml.so\n  NEEDED               libQt5Network.so\n  NEEDED               libQt5Sql.so\n  NEEDED               libQt5SerialPort.so\n  NEEDED               libQt5AndroidExtras.so\n  NEEDED               libQt5Core.so\n  NEEDED               libGLESv2.so\n  NEEDED               libgnustl_shared.so\n  NEEDED               liblog.so\n  NEEDED               libdl.so\n  NEEDED               libstdc++.so\n  NEEDED               libm.so\n  NEEDED               libc.so\n  SONAME               libshell.so\n</code></pre>\n\n<p>The stacktrace is as shown below. Any idea how to solve it?</p>\n\n<pre><code>05-08 14:29:26.513 26065-26065/app.shell W/System: ClassLoader referenced unknown path:\n05-08 14:29:26.704 26065-26065/app.shell W/System.err: java.lang.reflect.InvocationTargetException\n05-08 14:29:26.705 26065-26065/app.shell W/System.err: at java.lang.reflect.Method.invoke(Native Method)\nat org.qtproject.qt5.android.bindings.QtLoader.loadApplication(QtLoader.java:241)\nat org.qtproject.qt5.android.bindings.QtLoader.startApp(QtLoader.java:676)\nat org.qtproject.qt5.android.bindings.QtActivityLoader.onCreate(QtActivityLoader.java:183)\nat org.qtproject.qt5.android.bindings.QtActivity.onCreateHook(QtActivity.java:266)\nat org.qtproject.qt5.android.bindings.QtActivity.onCreate(QtActivity.java:273)\nat app.shell.ShellActivity.onCreate(ShellActivity.java:41)\nat android.app.Activity.performCreate(Activity.java:7326)\nat android.app.Activity.performCreate(Activity.java:7317)\nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1271)\n05-08 14:29:26.706 26065-26065/app.shell W/System.err: at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3066)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3229)\nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1926)\nat android.os.Handler.dispatchMessage(Handler.java:106)\nat android.os.Looper.loop(Looper.java:214)\nat android.app.ActivityThread.main(ActivityThread.java:6981)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1445)\nCaused by: java.lang.UnsatisfiedLinkError: dlopen failed: library \"libcrypto.so.1.0.0\" not found\nat java.lang.Runtime.load0(Runtime.java:928)\nat java.lang.System.load(System.java:1633)\nat org.qtproject.qt5.android.QtNative.loadBundledLibraries(QtNative.java:209)\nat org.qtproject.qt5.android.QtActivityDelegate.loadApplication(QtActivityDelegate.java:599)\n... 22 more\n</code></pre>\n\n<p>There were some solutions proposed at <a href=\"https://stackoverflow.com/questions/33103867/unsatisfiedlinkerror-libcrypto-so-1-0-0-not-found\">SO</a>, but that is to patch the .so file with new SONAME. In this case my SONAME inside the elf is unversioned. If i hex edit and add version to it, i guess either it would break the app which is already working on older android versions, or altogether corrupt the .so loading/reloc.</p>\n\n<p>Any idea why eventhough the so is unversioned newer android is trying to load versioned one?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 11, "creation_date": 1557345698, "post_id": 56048209, "comment_id": 98737939, "body": "I have a hard time imagining a good reason for using <code>int *x, *y, *z;</code> over <code>int x, y, z;</code> here."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1557346228, "post_id": 56048209, "comment_id": 98738167, "body": "Why complicate things with either <code>list[i].Coordinates::operator=(rhs.list[i]);</code> or getters and setters when you can write <code>list[i] = rhs.list[i];</code>? (Which, not by coincidence, is the whole point of overloading the assignment operation.)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1557346720, "post_id": 56048209, "comment_id": 98738359, "body": "<code>CoordinatesList</code> will also need a copy constructor and a destructor to satisfy the <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">Rule of Three</a>, and once you have the copy constructor written and working, you can take advantage of the <a href=\"https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom\">Copy and Swap Idiom</a> to make <code>operator=</code> staggeringly simple."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1557346731, "post_id": 56048209, "comment_id": 98738364, "body": "Why would you inherit <code>Coordinates</code> in <code>CoordinatesList</code>? A list of <code>Coordinates</code> is a kind of  <code>Coordinates</code> in the same way that an apple cart is a kind of apple."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1557346961, "post_id": 56048209, "comment_id": 98738471, "body": "Piggy-backing on @molbdnilo &#39;s comment. When you are considering inheritance, apply the <a href=\"https://stackoverflow.com/questions/56860/what-is-an-example-of-the-liskov-substitution-principle\">Liskov Substitution Principle</a>. LSP is a great quick filter. If it checks out, it&#39;s worth it to investigate further. If it doesn&#39;t, don&#39;t use inheritance."}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1557347123, "post_id": 56048209, "comment_id": 98738540, "body": "The difference between the two assignment operators is that the first one return a reference to <code>this</code> and the other one returns a copy. Other than that, the result is the same. I also agree that the whole thing can be simplified. Remove pointers, and use <code>std::vector</code> instead of CoordinateList."}], "answers": [{"tags": [], "owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "is_accepted": false, "score": 1, "last_activity_date": 1557347310, "creation_date": 1557347310, "answer_id": 56048587, "question_id": 56048209, "link": "https://stackoverflow.com/questions/56048209/confused-about-the-different-between-these-two-assignment-operators/56048587#56048587", "title": "Confused about the different between these two assignment operators", "body": "<p><code>using CL = CoordinatesList;</code> to save on typing.</p>\n\n<p>The difference is that one returns a reference, one returns a copy. \nThe idiomatic way is to return a reference to <code>*this</code>, so use this one:\n<code>CL&amp; operator=(const CL&amp; rhs){/*...*/ return *this;}</code>\nNote that having both versions defined will result in a compiler error because functions cannot differ only by their return values.</p>\n\n<p><strong>Usage of <code>operator=</code>:</strong></p>\n\n<pre><code>CL a = CL(&lt;args&gt;);// (1)\nCL b,c;\nb = a; // (2)\nb.operator=(a); //(3)\nc = b = a; // (4)\nc.operator=(b.operator=(a)); // (5)\n</code></pre>\n\n<p>(1) Does <strong>not</strong> call any <code>CL::operator=</code> but a constructor <code>CL::CL(&lt;args&gt;)</code>. An object is being created, so a constructor must be called no matter the equal sign.</p>\n\n<p>(2) Is only syntactic sugar for (3). Calls <code>CL::operator=</code> and discards any returned value. </p>\n\n<p>(4) Again, its only syntactic sugar for (5). First the right <code>operator=</code> is evaluated and the returned value is passed to the left <code>operator=</code> as its argument. In this case having <code>operator=</code> returning a copy will indeed make a copy. That's the reason why the second option is preferred as it does not incur this additional and unneeded cost. Also this should be a good explanation for why  the function returns anything at all, if it returned <code>void</code> then this syntax would not be possible.</p>\n"}], "owner": {"reputation": 85, "user_id": 11327435, "user_type": "registered", "profile_image": "https://graph.facebook.com/2332678793451674/picture?type=large", "display_name": "ZAX9732", "link": "https://stackoverflow.com/users/11327435/zax9732"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1557347310, "creation_date": 1557345638, "question_id": 56048209, "link": "https://stackoverflow.com/questions/56048209/confused-about-the-different-between-these-two-assignment-operators", "title": "Confused about the different between these two assignment operators", "body": "<p>I have the following class which is called CoordinatesList. It contains a dynamic array of Coordinates, where each coordinate has 3 integers; x,y, and z.\nIn the class CoordinatesList, I have two different member operator=, I am slightly confused about what is the difference between them? </p>\n\n<p>Will it work the same if I inherited the class coordinates in the class CoordinatesList</p>\n\n<pre><code>class Coordinates {//this is a complete class, do not modify it.\npublic:\n    Coordinates() {\n        x = new int; y = new int; z = new int;\n        *x = *z = *y = 0;\n    }\n    Coordinates(int _x, int _y, int _z) {\n        x = new int; y = new int; z = new int;\n        *x = _x;\n        *z = _y;\n        *y = _z;\n    }\n    Coordinates(const Coordinates&amp; rhs) { // copy constructor\n        x = new int; y = new int; z = new int;\n        *x = *(rhs.x);\n        *y = *(rhs.y);\n        *z = *(rhs.z);\n    }\n    ~Coordinates() {\n        delete x; delete y; delete z;\n    }\n    void operator=(const Coordinates&amp; rhs) {//simplified operator=\n        *x = *(rhs.x);\n        *y = *(rhs.y);\n        *z = *(rhs.z);\n    }\n    int getx() const { return *x; }\n    int gety() const { return *y; }\n    int getz() const { return *z; }\n    void setx(int _x) { *x = _x; }\n    void sety(int _y) { *y = _y; }\n    void setz(int _z) { *z = _z; }\n    friend ostream&amp; operator&lt;&lt; (ostream&amp; out, const Coordinates&amp; rhs) {\n    out &lt;&lt; \"[\" &lt;&lt; *(rhs.x) &lt;&lt; \",\" &lt;&lt; *(rhs.y) &lt;&lt; \",\" &lt;&lt; *(rhs.z) &lt;&lt; \"]\" &lt;&lt; endl;\n    return out;\n    }\n\nprivate:\n    int *x, *y, *z;\n}; //--------------------------------------------------------------\n\n\n\nclass CoordinatesList {\npublic:\n\n    /*CoordinatesList &amp;  operator=(const CoordinatesList &amp;rhs)\n    {\n\n        if (size != rhs.size)\n        {\n            delete[] list;\n            size = rhs.size;\n            list = new Coordinates[size];\n        }\n        for (int i = 0; i &lt; size; i++)\n        {\n            list[i].Coordinates::operator=(rhs.list[i]);\n        }\n        return *this;\n\n    } */\n\n    CoordinatesList operator=(const CoordinatesList &amp; rhs) \n    {\n\n        //check if sizes are differernt\n        if (size != rhs.size) \n        {   \n            delete[] list; //this calls ~coordinates \n            size = rhs.size; \n            list = new Coordinates[size]; \n        }\n        //copy content      \n        for (int i = 0; i &lt; size; i++) {\n            //list[i] = rhs.list[i]; \n//will work as operator= is defined for Coordinates\n            list[i].setx(rhs.list[i].getx());\n            list[i].sety(rhs.list[i].gety());\n            list[i].setz(rhs.list[i].getz());\n        }\n        return *this; \n    }\n    private:\n    Coordinates * list;\n    int size;\n};\n</code></pre>\n"}, {"tags": ["c++", "linux", "memory"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557345572, "post_id": 56048135, "comment_id": 98737900, "body": "With ASLR in effect, why would you expect a certain variable to be in a predictable place between different runs of the application?"}, {"owner": {"reputation": 1, "user_id": 11471946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e56ffc6721f226e90af2062088ba563?s=128&d=identicon&r=PG&f=1", "display_name": "confused_linux_memory", "link": "https://stackoverflow.com/users/11471946/confused-linux-memory"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557346336, "post_id": 56048135, "comment_id": 98738204, "body": "I didn&#39;t say there were different runs of the application. I said I ran main once and reader multiple times."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8224909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b225a2c63b1701e649056b223ad40cb9?s=128&d=identicon&r=PG&f=1", "display_name": "Bui Quang Minh", "link": "https://stackoverflow.com/users/8224909/bui-quang-minh"}, "is_accepted": false, "score": 0, "last_activity_date": 1614332459, "creation_date": 1614332459, "answer_id": 66383377, "question_id": 56048135, "link": "https://stackoverflow.com/questions/56048135/process-vm-readv-returning-random-values/66383377#66383377", "title": "Process_vm_readv Returning Random Values", "body": "<p>With <code>std::cout &lt;&lt; reinterpret_cast&lt;long&gt;(local.iov_base) &lt;&lt; std::endl;</code>, you actually print out the address of buffer, which is why it looks like random value.</p>\n<p>This should solve your problem<br />\n<code>std::cout &lt;&lt; *reinterpret_cast&lt;long*&gt;(local.iov_base) &lt;&lt; std::endl;</code></p>\n"}], "owner": {"reputation": 1, "user_id": 11471946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e56ffc6721f226e90af2062088ba563?s=128&d=identicon&r=PG&f=1", "display_name": "confused_linux_memory", "link": "https://stackoverflow.com/users/11471946/confused-linux-memory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1614332459, "creation_date": 1557345287, "question_id": 56048135, "link": "https://stackoverflow.com/questions/56048135/process-vm-readv-returning-random-values", "title": "Process_vm_readv Returning Random Values", "body": "<p>I am trying to use the <a href=\"http://man7.org/linux/man-pages/man2/process_vm_readv.2.html\" rel=\"nofollow noreferrer\">process_vm_readv systemcall</a> to read a value from another Linux process. When attempting to read a magic number at a known location, I receive a random value.</p>\n\n<p>I have tried writing two simple programs to see if I can get it working but I have failed. I have checked my return values and they succeed every time, I just left it out to make the code clearer.</p>\n\n<p>Main File (to read from)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const long val = 0xDEADBEEF;\n\nint main(int argc, char** argv) {\n    std::cin.get(); // keep process running so I can read from it\n}\n</code></pre>\n\n<p>Reader</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(int argc, char** argv) {\n    pid_t pid = strol(argv[1], NULL, 10);\n    constexpr bufferLen = sizeof(long);\n    char buffer[bufferLen] { 0 };\n    struct iovec local, remote;\n    local.iov_base = buffer;\n    local.iov_len = bufferLen;\n    remote.iov_base = reinterpret_cast&lt;void*&gt;(0x603120);\n    remote.iov_len = bufferLen;\n    ssize_t bytesRead = process_vm_readv(pid, &amp;local, 1, &amp;remote, 1, 0);\n    std::cout &lt;&lt; reinterpret_cast&lt;long&gt;(local.iov_base) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I have used objdump to find that the correct address of 'val' is 0x603120. I also printed out the address of it and tried the same, just to be sure.</p>\n\n<p>I expect to print out 0xDEADBEEF (well the base 10 version of it) but what happens is that it prints out different values every time 'reader' is called, even when running it against the same 'main' program; the 'main' program shouldn't have anything in .data changing since it is just waiting for input so I am confused what I am doing wrong.</p>\n"}, {"tags": ["c++", "raspberry-pi", "raspberry-pi3", "raspbian"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1557345740, "post_id": 56048030, "comment_id": 98737955, "body": "Assertions like that are designed to catch memory corruption.  You almost certainly have a buffer overflow or something similar somewhere.  See <a href=\"https://stackoverflow.com/questions/2987207/why-do-i-get-a-c-malloc-assertion-failure\" title=\"why do i get a c malloc assertion failure\">stackoverflow.com/questions/2987207/&hellip;</a> for an almost exactly-the-same question."}, {"owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "edited": false, "score": 0, "creation_date": 1557346812, "post_id": 56048030, "comment_id": 98738395, "body": "It&#39;s impossible to tell from the provided code, but most likely you have a bug with dynamic memory corruption - you write to a <code>malloc</code>ated block past its end, or before its beginning, or use a block that&#39;s been <code>free</code>d."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1557347349, "post_id": 56048030, "comment_id": 98738654, "body": "I think there is a problem with how you are using the library. I suggest you move the two lines, <code>RTIMUSettings *settings = new RTIMUSettings(&quot;mpu9150&quot;); RTIMU *imu = RTIMU::createIMU(settings);</code> into the <code>main()</code> and that you modify them to be <code>RTIMUSettings settings = RTIMUSettings(&quot;mpu9150&quot;); RTIMU *imu = RTIMU::createIMU(&amp;settings);</code>"}, {"owner": {"reputation": 1, "user_id": 11396908, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-98W1xUuGM-M/AAAAAAAAAAI/AAAAAAAABp4/Oe9DaR6oYZQ/photo.jpg?sz=128", "display_name": "Nathan Herrington", "link": "https://stackoverflow.com/users/11396908/nathan-herrington"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 1, "creation_date": 1557349727, "post_id": 56048030, "comment_id": 98739594, "body": "@RichardChambers That worked. Thanks for the help. Now I just have to figure out how to work around a segmentation fault."}], "owner": {"reputation": 1, "user_id": 11396908, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-98W1xUuGM-M/AAAAAAAAAAI/AAAAAAAABp4/Oe9DaR6oYZQ/photo.jpg?sz=128", "display_name": "Nathan Herrington", "link": "https://stackoverflow.com/users/11396908/nathan-herrington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "closed_date": 1557347157, "answer_count": 0, "score": 0, "last_activity_date": 1557360547, "creation_date": 1557344844, "last_edit_date": 1557360547, "question_id": 56048030, "link": "https://stackoverflow.com/questions/56048030/error-malloc-c2406-sysmalloc-assertion-when-using-rtimu-library", "closed_reason": "Duplicate", "title": "Error malloc.c:2406: sysmalloc: Assertion when using RTIMU library", "body": "<p>I am very new with software and have gotten an error that I have never seen before. </p>\n\n<pre><code>untitled: malloc.c:2406: sysmalloc: Assertion `(old_top == initial_top (av) \n&amp;&amp; old_size == 0) || ((unsigned long) (old_size) &gt;= MINSIZE &amp;&amp; prev_inuse \n(old_top) &amp;&amp; ((unsigned long) old_end &amp; (pagesize - 1)) == 0)' failed.\n</code></pre>\n\n<p>I don't know what causes this error, so I tried finding where the file was stored on my Raspberry Pi, and no results came up.</p>\n\n<p>I've checked around the internet and only found people saying to try using <code>-fsanitize=address</code> which I tried, but with no success. This attempt gave me a new error <code>==1167==ASan runtime does not come first in initial library list; you should either link runtime to your application or manually preload it with LD_PRELOAD.</code></p>\n\n<p>I opted to rebuild the file removing that change and it returned to the first error.</p>\n\n<p>Sorry about how messy this software is, I don't like deleting code so I just comment it out until I get the whole project working,</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;wiringPi.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;softPwm.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pid.h&gt;\n#include &lt;pid.cpp&gt;\n#include &lt;RTIMULib/RTIMULib/RTIMULib.h&gt;\n\nusing namespace std;\n\nclass PID;\nclass RTIMUSettings;\n\nPID leftMotorPID = PID{50.0, 100.0, 0.0, 1.0, 1.0, 1.0};\nPID rightMotorPID = PID{50.0, 100.0, 0.0, 1.0, 1.0, 1.0};\n\nRTIMUSettings *settings = new RTIMUSettings(\"mpu9150\");\nRTIMU *imu = RTIMU::createIMU(settings);\n\ndouble speedLeft = 14;\ndouble speedRight = 14;\n\nint main()\n{\n    int sampleCount = 0;\n    int sampleRate = 0;\n    uint64_t rateTimer;\n    uint64_t displayTimer;\n    uint64_t now;\n    wiringPiSetupGpio();\n    pinMode(21, PWM_OUTPUT);\n    pinMode(22, PWM_OUTPUT);\n    softPwmCreate (21, 14, 100);\n    softPwmCreate (22, 14, 100);\n    if (imu == NULL) {\n        printf(\"No IMU found\\n\");\n        exit(1);\n    }\n\n    imu-&gt;IMUInit();\n\n     rateTimer = displayTimer = RTMath::currentUSecsSinceEpoch();\n\n    //  now just process data\n\n    while (1) {\n        //  poll at the rate recommended by the IMU\n\n        usleep(imu-&gt;IMUGetPollInterval() * 1000);\n\n        while (imu-&gt;IMURead()) {\n            RTIMU_DATA imuData = imu-&gt;getIMUData();\n            sampleCount++;\n\n            now = RTMath::currentUSecsSinceEpoch();\n\n            //  display 10 times per second\n\n            if ((now - displayTimer) &gt; 10000) {\n                printf(\"Sample rate %d: %s\\r\", sampleRate, RTMath::displayDegrees(\"\", imuData.fusionPose));\n                displayTimer = now;\n            }\n\n            //  update rate every second\n\n            if ((now - rateTimer) &gt; 1000000) {\n                sampleRate = sampleCount;\n                sampleCount = 0;\n                rateTimer = now;\n            }\n        }\n    }\n\n    while (1 == 1){\n//      cout &lt;&lt; \"speedLeft\";\n//      cin &gt;&gt; speedLeft;\n//      cout &lt;&lt; \"speedRight\";\n//      cin &gt;&gt; speedRight;\n        softPwmWrite(21, speedLeft);\n        softPwmWrite(22, speedRight);\n\n        delay(100);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This code is just supposed to read the values from my sense hat and allow me to change the outputs from the GPIO pins. It has been able to build in the past but it can't anymore.</p>\n\n<p><strong>Edit:</strong> I've gotten some comments that link me to another post. When I try using <code>valgrind</code>, it says that there are <code>==1195== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 6 from 3)</code>.</p>\n\n<p>It is likely I am misreading this but from what I can see, I don't think I am. I tried using the <code>fsanitize=address</code> and that only gave me the new error that I referenced earlier.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1557345432, "post_id": 56047959, "comment_id": 98737852, "body": "Depends on what kind of settings you have."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1557660727, "post_id": 56047959, "comment_id": 98832553, "body": "Are you asking specifically about using qt features (which features)?  or simply about using C++ classes?"}], "answers": [{"tags": [], "owner": {"reputation": 5378, "user_id": 2110683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33179a1918a5d90f47cde062fab10ff4?s=128&d=identicon&r=PG", "display_name": "Dimitry Ernot", "link": "https://stackoverflow.com/users/2110683/dimitry-ernot"}, "is_accepted": false, "score": 3, "last_activity_date": 1557345762, "creation_date": 1557345762, "answer_id": 56048242, "question_id": 56047959, "link": "https://stackoverflow.com/questions/56047959/how-to-send-variables-between-classes-in-qt/56048242#56048242", "title": "How to send variables between classes in Qt", "body": "<p>Use signals/slots mechanism to share values between two <code>QObject</code>.</p>\n\n<p>For example: </p>\n\n<p>The following code allows yout to send the value in a <code>QLineEdit</code> to another widget by clicking on a button:</p>\n\n<pre><code>class Widget1: public QWidget\n{\n    Q_OBJECT\npublic:\n    Widget1(): QWidget(),\n        message(new QLineEdit())\n    {\n        QPushButton* button = new QPushButton(\"Send msg\", this);\n        connect(button, &amp;QPushButton::clicked, this, [=]() { emit this-&gt;sendMsg(message-&gt;text());}); // When you click on the button, it will emit the signal sendMsg\n\n        QVBoxLayout* layout = new QVBoxLayout(this);\n        layout-&gt;addWidget(message);\n        layout-&gt;addWidget(button);\n    }\nprivate:\n    QLineEdit* message;\nsignals:\n    void sendMsg(QString const&amp; msg);\n};\n</code></pre>\n\n<pre><code>class Widget2: public QWidget\n{\n    Q_OBJECT\npublic:\n    Widget2(): QWidget(),\n        display(new QLabel(\"Nothing to display\", this))\n    {\n        QVBoxLayout* layout = new QVBoxLayout(this);\n        layout-&gt;addWidget(display);\n    }\nprivate:\n    QLabel* display;\npublic slots:\n    void receive(QString const&amp; message)\n    {\n        display-&gt;setText(message); // When called, display the message in the label\n    }\n};\n</code></pre>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    QApplication app(argc, argv);\n\n    QWidget* mainWidget = new QWidget();\n    QHBoxLayout* layout = new QHBoxLayout(mainWidget);\n\n    Widget1* w1 = new Widget1();\n    Widget2* w2 = new Widget2();\n    layout-&gt;addWidget(w1);\n    layout-&gt;addWidget(w2);\n\n    // When the signal sendMsg is emitted, call the slot receive\n    QObject::connect(w1, &amp;Widget1::sendMsg, w2, &amp;Widget2::receive);\n\n    mainWidget-&gt;show();\n    return app.exec();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "is_accepted": false, "score": 2, "last_activity_date": 1557346979, "last_edit_date": 1557346979, "creation_date": 1557346501, "answer_id": 56048414, "question_id": 56047959, "link": "https://stackoverflow.com/questions/56047959/how-to-send-variables-between-classes-in-qt/56048414#56048414", "title": "How to send variables between classes in Qt", "body": "<p>There are multiple ways to achieve this. \nFor example you can provide the public Getter Methods in your dialog for provide value to the public and use them directly in the MainWindow to read those.</p>\n\n<p>Or you can use Signals/Slots as stated above. \nOne example with Signal/Slots:\nThe SettingsWindow <strong>emits textEdit(QString) signal</strong> if Dialog Accepted, and MainWindow receives this signal via <strong>on_textEdit(QString) slot</strong> and writes it to its own text field:</p>\n\n<p>SettingsWindow reading text input and emitting signal textEdit(QString):\n<a href=\"https://i.stack.imgur.com/m90Cc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m90Cc.png\" alt=\"enter image description here\"></a></p>\n\n<p>MainWindow receiving signal via slot on_textEdit(QString):\n<a href=\"https://i.stack.imgur.com/Klvjz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Klvjz.png\" alt=\"enter image description here\"></a></p>\n\n<p>And this is the code:</p>\n\n<p><strong>maindow.h</strong></p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = nullptr);\n    ~MainWindow();\n\nprivate slots:\n    void on_pushButton_clicked();\n    void on_textEdited(QString txt);\n\nprivate:\n    Ui::MainWindow *ui;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p><strong>mainwindow.cpp</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n#include \"settingsdialog.h\"\n#include &lt;memory&gt;\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\nvoid MainWindow::on_pushButton_clicked()\n{\n    auto dlg = new SettingsDialog{this};\n    connect(dlg, &amp;SettingsDialog::textEdit, this, &amp;MainWindow::on_textEdited);\n    dlg-&gt;setAttribute(Qt::WA_DeleteOnClose);\n    dlg-&gt;show();\n}\n\nvoid MainWindow::on_textEdited(QString txt)\n{\n    ui-&gt;textEdit-&gt;setText(txt);\n}\n</code></pre>\n\n<p><strong>settingsdialog.h</strong></p>\n\n<pre><code>#ifndef SETTINGSDIALOG_H\n#define SETTINGSDIALOG_H\n\n#include &lt;QDialog&gt;\n\nnamespace Ui {\nclass SettingsDialog;\n}\n\nclass SettingsDialog : public QDialog\n{\n    Q_OBJECT\n\npublic:\n    explicit SettingsDialog(QWidget *parent = nullptr);\n    ~SettingsDialog();\n\nsignals:\n    void textEdit(QString txt);\n\nprivate slots:\n    void on_buttonBox_accepted();\n\nprivate:\n    Ui::SettingsDialog *ui;\n};\n\n#endif // SETTINGSDIALOG_H\n</code></pre>\n\n<p><strong>settingsdialog.cpp</strong></p>\n\n<pre><code>#include \"settingsdialog.h\"\n#include \"ui_settingsdialog.h\"\n\nSettingsDialog::SettingsDialog(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::SettingsDialog)\n{\n    ui-&gt;setupUi(this);\n}\n\nSettingsDialog::~SettingsDialog()\n{\n    delete ui;\n}\n\nvoid SettingsDialog::on_buttonBox_accepted()\n{\n   emit textEdit(ui-&gt;textEdit-&gt;toPlainText());\n}\n</code></pre>\n\n<p><a href=\"https://doc.qt.io/qt-5/signalsandslots.html\" rel=\"nofollow noreferrer\">More about Signal/Slots</a></p>\n"}], "owner": {"reputation": 31, "user_id": 10468721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/293f5282f9f20f3a4ca1fdc2f4b93d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Umbra", "link": "https://stackoverflow.com/users/10468721/umbra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570357554, "creation_date": 1557344538, "last_edit_date": 1570357554, "question_id": 56047959, "link": "https://stackoverflow.com/questions/56047959/how-to-send-variables-between-classes-in-qt", "title": "How to send variables between classes in Qt", "body": "<p>I have a problem. I created two classes in my Qt project. One as the main window, and second as the settings dialog. My idea is to send the values from \"Settings\" to \"MainWindow\" (like from one TextEdit to another) but unfortunately, I have no idea how to do it. It's confusing me. I have read similar topics on the internet but none of them gives me a clear answer. Can someone help me understand the way how can I do it via example?</p>\n\n<p>I have no useful code to place it here, so I will put the part of the source code and headers of mine.</p>\n\n<p><strong>mainwindow.cpp</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    [...]\n}\n</code></pre>\n\n<p><strong>mainwindow.h</strong></p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;       \n#include \"settings.h\"\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = nullptr);\n    ~MainWindow()\n    [...]\nprivate:\n    Ui::MainWindow *ui;\n    [...]\n};\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p><strong>settings.cpp</strong></p>\n\n<pre><code>#include \"settings.h\"\n#include \"ui_settings.h\"\n#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nSettings::Settings(QWidget *parent) :\n   QDialog(parent),\n    ui(new Ui::Settings)\n{\n    ui-&gt;setupUi(this);\n}\n</code></pre>\n\n<p><strong>settings.h</strong></p>\n\n<pre><code>#ifndef SETTINGS_H\n#define SETTINGS_H\n\n#include &lt;QDialog&gt;\n\nnamespace Ui {\nclass Settings;\n}\n\n\nclass Settings : public QDialog\n{\n    Q_OBJECT\n\npublic:\n    explicit Settings(QWidget *parent = nullptr);\n    ~Settings();\n    [...]\nprivate:\n    Ui::Settings *ui;\n    [...]\n};\n#endif // SETTINGS_H\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n"}, {"tags": ["c++", "http", "curl"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557345072, "post_id": 56047948, "comment_id": 98737725, "body": "<code>curl-config --cflags</code> and <code>curl-config --libs</code> gives you the flags you need to provide to the compiler and linker (respectively) when building with the cURL library. You do not use any of those flags when building your application."}, {"owner": {"reputation": 820, "user_id": 5266970, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh6.googleusercontent.com/-QyW2o-USkFs/AAAAAAAAAAI/AAAAAAAAG-8/BfSj9988i5M/photo.jpg=k-s128", "display_name": "greg", "link": "https://stackoverflow.com/users/5266970/greg"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557345289, "post_id": 56047948, "comment_id": 98737813, "body": "<code>g++ -std=c++17 main.cpp curl-config --cflags curl-config --libs</code> so I should call this when building with <code>g++</code>? This raises unsupported option and no such file error s"}, {"owner": {"reputation": 820, "user_id": 5266970, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh6.googleusercontent.com/-QyW2o-USkFs/AAAAAAAAAAI/AAAAAAAAG-8/BfSj9988i5M/photo.jpg=k-s128", "display_name": "greg", "link": "https://stackoverflow.com/users/5266970/greg"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1557345923, "post_id": 56047948, "comment_id": 98738036, "body": "I add these to my <code>~&#47;.bash_profile</code>?"}, {"owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "edited": false, "score": 1, "creation_date": 1557347459, "post_id": 56047948, "comment_id": 98738701, "body": "Rather than cluttering up your .bash_profile, I&#39;d recommend creating a makefile, and set up your specific -I and -L paths there."}, {"owner": {"reputation": 820, "user_id": 5266970, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh6.googleusercontent.com/-QyW2o-USkFs/AAAAAAAAAAI/AAAAAAAAG-8/BfSj9988i5M/photo.jpg=k-s128", "display_name": "greg", "link": "https://stackoverflow.com/users/5266970/greg"}, "edited": false, "score": 0, "creation_date": 1557347779, "post_id": 56047948, "comment_id": 98738832, "body": "Thanks I will do this <code>g++ Main.cpp -I&#47;usr&#47;local&#47;Cellar&#47;curl&#47;7.64.1&#47;include -L&#47;usr&#47;local&#47;Cellar&#47;curl&#47;7.64.1&#47;lib -lcurl -lldap -lz &amp;&amp; .&#47;a.out</code> this appears to work. I should be okay to write and compile my program in <code>c++</code>? It appears this API works with both languages."}, {"owner": {"reputation": 820, "user_id": 5266970, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh6.googleusercontent.com/-QyW2o-USkFs/AAAAAAAAAAI/AAAAAAAAG-8/BfSj9988i5M/photo.jpg=k-s128", "display_name": "greg", "link": "https://stackoverflow.com/users/5266970/greg"}, "reply_to_user": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "edited": false, "score": 0, "creation_date": 1557349966, "post_id": 56047948, "comment_id": 98739667, "body": "@user888379 I&#39;ve added an example makefile let me know what you think"}, {"owner": {"reputation": 422, "user_id": 5975842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea7a9edae7429a03c76b073b1fd6a8e?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistree", "link": "https://stackoverflow.com/users/5975842/chemistree"}, "edited": false, "score": 1, "creation_date": 1557353410, "post_id": 56047948, "comment_id": 98740768, "body": "Simply run <code>g++ -std=c++17 main.cpp $(curl-config --cflags) $(curl-config --libs)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "edited": false, "score": 1, "creation_date": 1557355783, "post_id": 56049124, "comment_id": 98741338, "body": "Looks pretty good. One problem is that your command doesn&#39;t produce &#39;main&#39;, it produces &#39;a.out&#39;. I would change it to something like &quot;$(CXX) main.cpp -I/usr/local/Cellar/curl/7.64.1/include -L/usr/local/Cellar/curl/7.64.1/lib -lcurl -lldap -lz -o main&quot; and remove the &quot;&amp;&amp; a.out&quot;. make is very powerful. Once you start getting more comfortable with it, your command can become more like: &quot;$(CXX) $^ -I/usr/local/Cellar/curl/7.64.1/include -L/usr/local/Cellar/curl/7.64.1/lib -lcurl -lldap -lz -o $@&quot;. Have fun!"}], "tags": [], "owner": {"reputation": 820, "user_id": 5266970, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh6.googleusercontent.com/-QyW2o-USkFs/AAAAAAAAAAI/AAAAAAAAG-8/BfSj9988i5M/photo.jpg=k-s128", "display_name": "greg", "link": "https://stackoverflow.com/users/5266970/greg"}, "is_accepted": false, "score": 0, "last_activity_date": 1557350586, "last_edit_date": 1557350586, "creation_date": 1557349987, "answer_id": 56049124, "question_id": 56047948, "link": "https://stackoverflow.com/questions/56047948/compiling-and-linking-curl-easy-interface-with-c/56049124#56049124", "title": "Compiling and Linking curl easy interface with C++", "body": "<p>Use a makefile instead call <code>make</code> on the command line and you're good to go</p>\n\n<pre><code># *****************************************************\n# Variables to control Makefile operation\n\nCXX = g++\n\n# ****************************************************\n# Targets needed to bring the executable up to date\n\nmain: main.cpp\n    $(CXX) main.cpp -I/usr/local/Cellar/curl/7.64.1/include -L/usr/local/Cellar/curl/7.64.1/lib -lcurl -lldap -lz &amp;&amp; ./a.out\n</code></pre>\n"}], "owner": {"reputation": 820, "user_id": 5266970, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh6.googleusercontent.com/-QyW2o-USkFs/AAAAAAAAAAI/AAAAAAAAG-8/BfSj9988i5M/photo.jpg=k-s128", "display_name": "greg", "link": "https://stackoverflow.com/users/5266970/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557350586, "creation_date": 1557344491, "last_edit_date": 1557346623, "question_id": 56047948, "link": "https://stackoverflow.com/questions/56047948/compiling-and-linking-curl-easy-interface-with-c", "title": "Compiling and Linking curl easy interface with C++", "body": "<p><strong>Context</strong></p>\n\n<p>Attempting to run this <a href=\"https://curl.haxx.se/libcurl/c/curl_easy_init.html\" rel=\"nofollow noreferrer\">curl_easy_init - Start a libcurl easy session</a> in my C++ program. The curl library has a large selection of APIs including <a href=\"https://curl.haxx.se/libcurl/c/simplepost.html\" rel=\"nofollow noreferrer\">simple post</a> and many others for, but I'm stuck on getting my compiling and linking step configured correctly. I looked to the <a href=\"https://curl.haxx.se/libcurl/c/libcurl-tutorial.html\" rel=\"nofollow noreferrer\">curl websites tutorial</a> for guidance on compiling and linking this library to my program, but still still facing this error.</p>\n\n<p><em>curl is located here</em></p>\n\n<pre><code>\u1d3e\u1d0b\u1d39\u0274 Master Red \u25b0 \u25d3 \u25d3 \u25d3 \u25d3 \u25d3 \u25d3 \n\n&gt; curl-config --cflags\n-I/usr/local/Cellar/curl/7.64.1/include\n</code></pre>\n\n<p><em>curl libraries include</em></p>\n\n<pre><code>\u1d3e\u1d0b\u1d39\u0274 Master Red \u25b0 \u25d3 \u25d3 \u25d3 \u25d3 \u25d3 \u25d3 \n\n&gt; curl-config --libs\n-L/usr/local/Cellar/curl/7.64.1/lib -lcurl -lldap -lz\n</code></pre>\n\n<p><em>Even after adding to my include path, still get the same error.</em></p>\n\n<pre><code># c++ curl support for the g++ compiler\n# curl-config --cflags\nCPLUS_INCLUDE_PATH=\"/usr/local/Cellar/curl/7.64.1/include:${CPLUS_INCLUDE_PATH}\"\n# curl-config --libs which include -lcurl -lldap -lz\nCPLUS_INCLUDE_PATH=\"/usr/local/Cellar/curl/7.64.1/lib:${CPLUS_INCLUDE_PATH}\"\nexport CPLUS_INCLUDE_PATH\n</code></pre>\n\n<hr>\n\n<p><strong>Error</strong></p>\n\n<pre><code>\u1d3e\u1d0b\u1d39\u0274 Master Red \u25b0 \u25d3 \u25d3 \u25d3 \u25d3 \u25d3 \u25d3 \n\n&gt; g++ -std=c++17 main.cpp &amp;&amp; ./a.out\nUndefined symbols for architecture x86_64:\n  \"_curl_easy_cleanup\", referenced from:\n      _main in main-9d2f7a.o\n  \"_curl_easy_init\", referenced from:\n      _main in main-9d2f7a.o\n  \"_curl_easy_perform\", referenced from:\n      _main in main-9d2f7a.o\n  \"_curl_easy_setopt\", referenced from:\n      _main in main-9d2f7a.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<hr>\n\n<p><strong>Source</strong></p>\n\n<pre><code>#include &lt;curl/curl.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    CURL *curl = curl_easy_init();\n    if(curl) {\n        CURLcode res;\n        curl_easy_setopt(curl, CURLOPT_URL, \"http://example.com\");\n        res = curl_easy_perform(curl);\n        curl_easy_cleanup(curl);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "language-lawyer", "signed", "integer-overflow"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1557359009, "post_id": 56047702, "comment_id": 98742015, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/193060/discussion-on-question-by-chqrlie-is-there-some-meaningful-statistical-data-to-j\">moved to chat</a>."}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "edited": false, "score": 3, "creation_date": 1557359609, "post_id": 56047702, "comment_id": 98742118, "body": "The reason C says signed integer overflow is undefined is that some CPUs use &quot;2&#39;s complement&quot;, some use &quot;1&#39;s compliment&quot;, some use &quot;sign and magnitude&quot;; and for all the cases overflow could cause anything (e.g. CPUs like MIPS have &quot;trap on overflow&quot;). In other words it&#39;s about portability and not optimisation."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1557366654, "post_id": 56047702, "comment_id": 98743445, "body": "Exactly. The only &#39;meaningful statistic&#39; anybody needs is that ones-complement and sign-magnitude computers exist."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1557378995, "post_id": 56047702, "comment_id": 98746063, "body": "@user207421: Yes, that&#39;s a good question, to which the answer seems to be <i>no longer</i>. Hence the current proposal to remove support for non two&#39;s complement representations: <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2330.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n2330.pdf</a>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "edited": false, "score": 0, "creation_date": 1557379170, "post_id": 56047702, "comment_id": 98746107, "body": "@Brendan: ones&#39; complement architecture are a thing of the past. MIPS&#39; trap on overflow is selectable."}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "edited": false, "score": 1, "creation_date": 1557434484, "post_id": 56047702, "comment_id": 98774308, "body": "@chqrlie: C is also a thing from the past (47 years old now). There&#39;s a lot of design decisions that made sense back then that don&#39;t make sense anymore but continue to exist because change would break too much existing software."}], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1557732648, "post_id": 56048480, "comment_id": 98848806, "body": "Yes. Producing an incorrectly value is a serious issue, and a correct looking value is more problematic. In many cases there is no expectation on the result so any printed value might be taken seriously. That could even cause security vulnerabilities."}], "tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 7, "last_activity_date": 1557346806, "creation_date": 1557346806, "answer_id": 56048480, "question_id": 56047702, "link": "https://stackoverflow.com/questions/56047702/is-there-some-meaningful-statistical-data-to-justify-keeping-signed-integer-arit/56048480#56048480", "title": "Is there some meaningful statistical data to justify keeping signed integer arithmetic overflow undefined?", "body": "<p>Not quite an example of optimization, but one useful consequence of undefined behaviour is <code>-ftrapv</code> command line switch of GCC/clang. It inserts code which crashes your program on integer overflow.</p>\n\n<p>It won't work on unsigned integers, in accordance with the idea that unsigned overflow is intentional.</p>\n\n<p>The Standard's wording on signed integer overflow ensures that people won't write overflowing code on purpose, so <code>ftrapv</code> is a useful tool to discover unintentional overflow.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1557379487, "post_id": 56050559, "comment_id": 98746199, "body": "Your 2&#39;s complement specific way has different semantics: it will return <code>INT_MAX</code> for negative values of <code>a</code> less than <code>-b</code>."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1557381825, "post_id": 56050559, "comment_id": 98747014, "body": "@chqrlie I must have misunderstood the function&#39;s requirements. I assumed as we were clamping to positive numbers that in input would guaranteed to be positive."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1557382125, "post_id": 56050559, "comment_id": 98747124, "body": "The silly example function only tests for positive overflow because <code>b</code> is intrinsically positive, but <code>a</code> can have a negative value. It is just an example, and your <code>sum_max</code> version is a correct way to achieve the goal in a portable manner, but I have seen legacy code use the test I posted, which was never correct but <i>just worked</i> until about 10 years ago."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1557382229, "post_id": 56050559, "comment_id": 98747177, "body": "As a side note, C++ just recently removed the alternative representations of signed integers. two&#39;s complement is now the only supported one."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 3, "creation_date": 1557382834, "post_id": 56050559, "comment_id": 98747408, "body": "@chqrlie That is true as of c++20, but I didn&#39;t mention it because overflowing signed integers remains UB for all the previously mentioned reasons around optimisation. I didn&#39;t want to give the wrong impression that the legacy code will become OK. It won&#39;t."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 2, "last_activity_date": 1557360932, "creation_date": 1557360932, "answer_id": 56050559, "question_id": 56047702, "link": "https://stackoverflow.com/questions/56047702/is-there-some-meaningful-statistical-data-to-justify-keeping-signed-integer-arit/56050559#56050559", "title": "Is there some meaningful statistical data to justify keeping signed integer arithmetic overflow undefined?", "body": "<p>The answer is actually in your question:</p>\n\n<blockquote>\n  <p>Yet most CPUs implement signed arithmetics with defined semantics</p>\n</blockquote>\n\n<p>I can't think of a CPU that you can buy today that does not use twos-compliment arithmetic for signed integers, but that wasn't always the case.</p>\n\n<p>The C language was invented in 1972. Back then, IBM 7090 mainframes still existed. Not all computers were twos-compliment.</p>\n\n<p>To have defined the language (and overflow behaviour) around 2s-compliment would have been prejudicial to code generation on machines that weren't.</p>\n\n<p>Furthermore, as it has already been said, specifying that signed overflow is to be UB allows the compiler to produce better code, because it can discount code paths that result from signed overflow, assuming that this will never happen.</p>\n\n<p>If I understand correctly that it's intended to clamp the sum of a and b to 0....INT_MAX without wraparound, I can think of two ways to write this function in a compliant way.</p>\n\n<p>First, the inefficient general case that will work on all cpus:</p>\n\n<pre><code>int sum_max(int a, unsigned char b) {\n    if (a &gt; std::numeric_limits&lt;int&gt;::max() - b)\n        return std::numeric_limits&lt;int&gt;::max();\n    else\n        return a + b;\n}\n</code></pre>\n\n<p>Second, the surprisingly efficient 2s-compliment specific way:</p>\n\n<pre><code>int sum_max2(int a, unsigned char b) {\n    unsigned int buffer;\n    std::memcpy(&amp;buffer, &amp;a, sizeof(a));\n    buffer += b;\n    if (buffer &gt; std::numeric_limits&lt;int&gt;::max())\n        buffer = std::numeric_limits&lt;int&gt;::max();\n    std::memcpy(&amp;a, &amp;buffer, sizeof(a));\n    return a;\n}\n</code></pre>\n\n<p>Resulting assembler can be seen here: <a href=\"https://godbolt.org/z/F42IXV\" rel=\"nofollow noreferrer\">https://godbolt.org/z/F42IXV</a></p>\n"}, {"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1557369213, "post_id": 56051070, "comment_id": 98743940, "body": "&quot;x + 10 &gt; x holds true now&quot; - no it doesn&#39;t. It could format your hard disk if x happens to equal INT_MAX-5."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1557381055, "post_id": 56051070, "comment_id": 98746718, "body": "Very informative answer (the blog is a good read indeed). Since all these optimisations are only possible for signed operands, the conclusion is counter-intuitive: using <code>size_t</code> index values for many computations should lead to less efficient code because of modulo arithmetics semantics. This is a good argument to include <code>ssize_t</code> in the C Standard, or some unsigned type without modulo arithmetics."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1557382723, "post_id": 56051070, "comment_id": 98747365, "body": "fascinating. nice find."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 4, "creation_date": 1557394895, "post_id": 56051070, "comment_id": 98753718, "body": "@immibis I meant it holds true for all valid code. UB is not valid code."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1557395154, "post_id": 56051070, "comment_id": 98753870, "body": "@chqrlie I&#39;ve heard on cppcon prominent members of the standard committee acknowledging that unsigned size was a mistake in hindsight. The same thing about the wraparound behavior of unsigned (I would have been better for normal types to have UB on overflow and to have separate types with wraparound behavior for when you explicitly need that)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1557438392, "post_id": 56051070, "comment_id": 98775746, "body": "@bolov The compiler is allowed to assume it&#39;s true, but it&#39;s not required to, so you can&#39;t."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1557442125, "post_id": 56051070, "comment_id": 98776675, "body": "@immibis no, it is required by the standard. Just like it is required by the standard to assume a pointer that is dereferenced is not null."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1557444662, "post_id": 56051070, "comment_id": 98777164, "body": "@bolov Really? The compiler is <i>required</i> to assume that <code>i + 10 &gt; i</code> is true? So <code>int i = INT_MAX; if(i + 10 &gt; i) printf(&quot;hello!\\n&quot;);</code> is <i>required</i> to print &quot;hello!\\n&quot; and is not allowed to format my hard disk?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1557446854, "post_id": 56051070, "comment_id": 98777623, "body": "@immibis you are not getting it. Yes!! the compiler is required to assume that <code>i + 10 &gt; i</code> so it will generate code that is valid only when <code>i &lt; INT_MAX  - 10</code>. For then <code>i &gt;= INT_MAX</code> the code is not valid, the standard does not mandate any behavior, and the compiler can generate code making the assumption <code>i &lt; INT_MAX</code>. For invalid code - undefined behavior anything can happen because the compiler isn&#39;t required to generate any kind of behavior."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1557447075, "post_id": 56051070, "comment_id": 98777659, "body": "@bolov It is also allowed to generate code where <code>i + 10 &gt; i</code> evaluates to false in this case."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1557447158, "post_id": 56051070, "comment_id": 98777681, "body": "@immibis honestly it&#39;s like talking to a wall"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1557447218, "post_id": 56051070, "comment_id": 98777693, "body": "I know right? &quot;With UB you get C/C++ signed integers to behave arithmetically as you would expect mathematically.&quot; is pretty clearly defining UB."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1557447977, "post_id": 56051070, "comment_id": 98777823, "body": "@immibis do you see how the compiler transforms <code>x + 10 &gt;= x;</code> into <code>mov     eax, 1</code>? That&#39;s precisely because it can assume <code>x + 10 &gt;= x</code> will always be true (and I say it again for the last time: <b>for valid code</b>)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1557448279, "post_id": 56051070, "comment_id": 98777884, "body": "The compiler can assume that. The programmer can&#39;t."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1557448585, "post_id": 56051070, "comment_id": 98777941, "body": "@immibis ... are you trolling? 1st: when were we talking about the programmer? All the discussion, the entire post and comments are about what the compiler can assume (and what can optimize in consequence). 2nd also the programmer can assume that on valid code <code>x + 10 &gt;= x</code>. ........."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1557448854, "post_id": 56051070, "comment_id": 98777980, "body": "@bolov The programmer has to know whether <code>x + 10 &gt;= x</code> would be true on a compiler that had defined overflow behaviour, in order to know whether the code is valid. They can&#39;t reason &quot;this code is valid therefore I know <code>x &lt;= INT_MAX+10</code>&quot;. They have to reason &quot;<code>x &lt;= INT_MAX+10</code> because of something else, therefore this code is valid.&quot;"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1557449204, "post_id": 56051070, "comment_id": 98778036, "body": "@immibis you are doing this on purpose at this point. You are moving the discussion away from the original problem. My statement is &quot;the compiler will assume that, for valid code, <code>x + 10 &gt;= x</code> will always be true - this is mandated by the standard - so the compiler can optimize the expression to <code>true</code>&quot;. That was always my statement. That&#39;s what I am debating (and what you contested initially). You want to talk now about how the programmer must make sure he doesn&#39;t write code that has UB and therefore is invalid, that&#39;s another discussion."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1557450114, "post_id": 56051070, "comment_id": 98778184, "body": "You did not say &quot;the compiler will assume that ...&quot; - you simply said &quot;...&quot; which is a statement of fact, not a statement of an assumption that if not true will break things."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1557450894, "post_id": 56051070, "comment_id": 98778302, "body": "I think I finally see your point. Yes, I did not say &quot;the compiler&quot; and initially didn&#39;t say &quot;for valid code&quot;. I thought however that it is understood, as we are talking exclusively about what the compiler can do with given code. It looks to me now that you took &quot;x + 1 &gt;= 1 will always be true&quot; as a statement meaning &quot;whenever you see <code>x + 1 &gt;= 1</code> in a C code you, the programmer, can rest assure that it will always be true&quot;. That was never my intention and I think that from the context of the post is clear what I am talking about. I apologise from assuming malicious intent."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1557586443, "post_id": 56051070, "comment_id": 98819209, "body": "&quot;Trolling&quot; and talking past each others are often horribly like the other."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 22, "last_activity_date": 1607158354, "last_edit_date": 1607158354, "creation_date": 1557366059, "answer_id": 56051070, "question_id": 56047702, "link": "https://stackoverflow.com/questions/56047702/is-there-some-meaningful-statistical-data-to-justify-keeping-signed-integer-arit/56051070#56051070", "title": "Is there some meaningful statistical data to justify keeping signed integer arithmetic overflow undefined?", "body": "<p>I don't know about studies and statistics, but yes, there are definitely optimizations taking this into account that compilers actually do. And yes, they are very important (tldr loop vectorization for example).</p>\n<p>Besides the compiler optimizations, there is another aspect to be taken into account. With UB you get C/C++ signed integers to behave arithmetically as you would expect mathematically. For instance <code>x + 10 &gt; x</code> holds true now (for valid code of course), but would not on a wrap-around behavior.</p>\n<p>I've found an excellent article <a href=\"https://kristerw.blogspot.com/2016/02/how-undefined-signed-overflow-enables.html\" rel=\"nofollow noreferrer\">How undefined signed overflow enables optimizations in GCC</a> from Krister Walfridsson\u2019s blog listing some optimizations that take signed overflow UB into account. The following examples are from it. I am adding c++ and assembly examples to them.</p>\n<p>If the optimizations look too simple, uninteresting or unimpactful, remember that these optimization are just steps in a much much larger chain of optimizations. And the butterfly effect does happen as a seemingly unimportant optimization at an earlier step can trigger a much more impactful optimization at a later step.</p>\n<p>If the examples look nonsensical (who would write <code>x * 10 &gt; 0</code>) keep in mind that you can very easily get to this kind of examples in C and C++ with constants, macros, templates. Besides the compiler can get to this kind of examples when applying transformations and optimizations in its IR.</p>\n<h1>Signed integer expression simplification</h1>\n<ul>\n<li><p>Eliminate multiplication in comparison with 0</p>\n<blockquote>\n<pre><code>(x * c) cmp 0   -&gt;   x cmp 0 \n</code></pre>\n</blockquote>\n<pre><code>bool foo(int x) { return x * 10 &gt; 0 }\n</code></pre>\n<pre><code>foo(int):\n        test    edi, edi\n        setg    al\n        ret\n</code></pre>\n</li>\n<li><p>Eliminate division after multiplication</p>\n<blockquote>\n<p>(x * c1) / c2   -&gt;   x * (c1 / c2) if c1 is divisible by c2</p>\n</blockquote>\n<pre><code>int foo(int x) { return (x * 20) / 10; }\n</code></pre>\n<pre><code>foo(int):\n        lea     eax, [rdi+rdi]\n        ret\n</code></pre>\n</li>\n</ul>\n<ul>\n<li><p>Eliminate negation</p>\n<blockquote>\n<p>(-x) / (-y)     -&gt;   x / y</p>\n</blockquote>\n<pre class=\"lang-cpp prettyprint-override\"><code>int foo(int x, int y) { return (-x) / (-y); }\n</code></pre>\n<pre><code>foo(int, int):\n        mov     eax, edi\n        cdq\n        idiv    esi\n        ret\n</code></pre>\n</li>\n</ul>\n<ul>\n<li><p>Simplify comparisons that are always true or false</p>\n<blockquote>\n<pre><code>x + c &lt; x       -&gt;   false\nx + c &lt;= x      -&gt;   false\nx + c &gt; x       -&gt;   true\nx + c &gt;= x      -&gt;   true\n</code></pre>\n</blockquote>\n<pre class=\"lang-cpp prettyprint-override\"><code>bool foo(int x) { return x + 10 &gt;= x; }\n</code></pre>\n<pre><code>foo(int):\n        mov     eax, 1\n        ret\n</code></pre>\n</li>\n<li><p>Eliminate negation in comparisons</p>\n<pre><code>(-x) cmp (-y)   -&gt;   y cmp x\n</code></pre>\n<pre class=\"lang-cpp prettyprint-override\"><code>bool foo(int x, int y) { return -x &lt; -y; }\n</code></pre>\n<pre><code>foo(int, int):\n        cmp     edi, esi\n        setg    al\n        ret\n</code></pre>\n</li>\n<li><p>Reduce magnitude of constants</p>\n<blockquote>\n<pre><code>x + c &gt; y       -&gt;   x + (c - 1) &gt;= y\nx + c &lt;= y      -&gt;   x + (c - 1) &lt; y\n</code></pre>\n</blockquote>\n<pre><code>bool foo(int x, int y) { return x + 10 &lt;= y; }\n</code></pre>\n<pre><code>foo(int, int):\n        add     edi, 9\n        cmp     edi, esi\n        setl    al\n        ret\n</code></pre>\n</li>\n</ul>\n<ul>\n<li><p>Eliminate constants in comparisons</p>\n<blockquote>\n<pre><code>(x + c1) cmp c2         -&gt;   x cmp (c2 - c1)\n(x + c1) cmp (y + c2)   -&gt;   x cmp (y + (c2 - c1)) if c1 &lt;= c2\n</code></pre>\n</blockquote>\n<blockquote>\n<p>The second transformation is only valid if c1 &lt;= c2, as it would\notherwise introduce an overflow when y has the value INT_MIN.</p>\n</blockquote>\n<pre class=\"lang-cpp prettyprint-override\"><code>bool foo(int x) { return x + 42 &lt;= 11; }\n</code></pre>\n<pre><code>foo(int):\n        cmp     edi, -30\n        setl    al\n        ret\n</code></pre>\n</li>\n</ul>\n<h1>Pointer arithmetic and type promotion</h1>\n<blockquote>\n<p>If an operation does not overflow, then we will get the same result if\nwe do the operation in a wider type. This is often useful when doing\nthings like array indexing on 64-bit architectures \u2014 the index\ncalculations are typically done using 32-bit int, but the pointers are\n64-bit, and the compiler may generate more efficient code when signed\noverflow is undefined by promoting the 32-bit integers to 64-bit\noperations instead of generating type extensions.</p>\n<p>One other aspect of this is that undefined overflow ensures that a[i]\nand a[i+1] are adjacent. This improves analysis of memory accesses for\nvectorization etc.</p>\n</blockquote>\n<p>This is a very important optimization as loop vectorization one of the most efficient and effective optimization algorithms.</p>\n<p>This is an example when changing an index from an unsigned index to a signed improves the generated assembly:</p>\n<h2>Unsigned version</h2>\n<pre><code>#include &lt;cstddef&gt;\n\nauto foo(int* v, std::size_t start)\n{\n    int sum = 0;\n\n    for (std::size_t i = start; i &lt; start + 4; ++i)\n        sum += v[i];\n\n    return sum;\n}\n</code></pre>\n<p>With unsigned the case where <code>start + 4</code> wraps around must be taken into account and a branch is generated to deal with this case (branches are bad for performance):</p>\n<pre class=\"lang-asm prettyprint-override\"><code>; gcc on x64 with -march=skylake\n\nfoo1(int*, unsigned long):\n        cmp     rsi, -5\n        ja      .L3\n        vmovdqu xmm0, XMMWORD PTR [rdi+rsi*4]\n        vpsrldq xmm1, xmm0, 8\n        vpaddd  xmm0, xmm0, xmm1\n        vpsrldq xmm1, xmm0, 4\n        vpaddd  xmm0, xmm0, xmm1\n        vmovd   eax, xmm0\n        ret\n.L3:\n        xor     eax, eax\n        ret\n</code></pre>\n<pre class=\"lang-asm prettyprint-override\"><code>; clang on x64 with -march=skylake\n\nfoo1(int*, unsigned long):                             # @foo1(int*, unsigned long)\n        xor     eax, eax\n        cmp     rsi, -4\n        jae     .LBB0_2\n        vpbroadcastq    xmm0, qword ptr [rdi + 4*rsi + 8]\n        vpaddd  xmm0, xmm0, xmmword ptr [rdi + 4*rsi]\n        vpshufd xmm1, xmm0, 85                  # xmm1 = xmm0[1,1,1,1]\n        vpaddd  xmm0, xmm0, xmm1\n        vmovd   eax, xmm0\n.LBB0_2:\n        ret\n</code></pre>\n<p>As a side note, using a narrower type would result in even worst assembly, inhibiting the use of SSE vectorized instructions:</p>\n<pre><code>#include &lt;cstddef&gt;\n\nauto foo(int* v, unsigned start)\n{\n    int sum = 0;\n\n    for (unsigned i = start; i &lt; start + 4; ++i)\n        sum += v[i];\n\n    return sum;\n}\n</code></pre>\n<pre class=\"lang-asm prettyprint-override\"><code>; gcc on x64 with -march=skylake\n\nfoo(int*, unsigned int):\n        cmp     esi, -5\n        ja      .L3\n        mov     eax, esi\n        mov     eax, DWORD PTR [rdi+rax*4]\n        lea     edx, [rsi+1]\n        add     eax, DWORD PTR [rdi+rdx*4]\n        lea     edx, [rsi+2]\n        add     eax, DWORD PTR [rdi+rdx*4]\n        lea     edx, [rsi+3]\n        add     eax, DWORD PTR [rdi+rdx*4]\n        ret\n.L3:\n        xor     eax, eax\n        ret\n</code></pre>\n<pre class=\"lang-asm prettyprint-override\"><code>; clang on x64 with -march=skylake\n\nfoo(int*, unsigned int):                              # @foo(int*, unsigned int)\n        xor     eax, eax\n        cmp     esi, -5\n        ja      .LBB0_3\n        mov     ecx, esi\n        add     esi, 4\n        mov     eax, dword ptr [rdi + 4*rcx]\n        lea     rdx, [rcx + 1]\n        cmp     rdx, rsi\n        jae     .LBB0_3\n        add     eax, dword ptr [rdi + 4*rcx + 4]\n        add     eax, dword ptr [rdi + 4*rcx + 8]\n        add     eax, dword ptr [rdi + 4*rcx + 12]\n.LBB0_3:\n        ret\n</code></pre>\n<h2>Signed version</h2>\n<p>Using a signed index however results in nice vectorized branchless code:</p>\n<pre><code>#include &lt;cstddef&gt;\n\nauto foo(int* v, std::ptrdiff_t start)\n{\n    int sum = 0;\n\n    for (std::ptrdiff_t i = start; i &lt; start + 4; ++i)\n        sum += v[i];\n\n    return sum;\n}\n</code></pre>\n<pre class=\"lang-asm prettyprint-override\"><code>; gcc on x64 with -march=skylake\n\nfoo(int*, long):\n        vmovdqu xmm0, XMMWORD PTR [rdi+rsi*4]\n        vpsrldq xmm1, xmm0, 8\n        vpaddd  xmm0, xmm0, xmm1\n        vpsrldq xmm1, xmm0, 4\n        vpaddd  xmm0, xmm0, xmm1\n        vmovd   eax, xmm0\n        ret\n</code></pre>\n<pre class=\"lang-asm prettyprint-override\"><code>; clang on x64 with -march=skylake\n\nfoo(int*, long):                              # @foo(int*, long)\n        vpbroadcastq    xmm0, qword ptr [rdi + 4*rsi + 8]\n        vpaddd  xmm0, xmm0, xmmword ptr [rdi + 4*rsi]\n        vpshufd xmm1, xmm0, 85                  # xmm1 = xmm0[1,1,1,1]\n        vpaddd  xmm0, xmm0, xmm1\n        vmovd   eax, xmm0\n        ret\n</code></pre>\n<p>Vectorized instruction are still used when using a narrower signed type:</p>\n<pre><code>#include &lt;cstddef&gt;\n\nauto foo(int* v, int start)\n{\n    int sum = 0;\n\n    for (int i = start; i &lt; start + 4; ++i)\n        sum += v[i];\n\n    return sum;\n}\n</code></pre>\n<pre class=\"lang-asm prettyprint-override\"><code>; gcc on x64 with -march=skylake\n\nfoo(int*, int):\n        movsx   rsi, esi\n        vmovdqu xmm0, XMMWORD PTR [rdi+rsi*4]\n        vpsrldq xmm1, xmm0, 8\n        vpaddd  xmm0, xmm0, xmm1\n        vpsrldq xmm1, xmm0, 4\n        vpaddd  xmm0, xmm0, xmm1\n        vmovd   eax, xmm0\n        ret\n</code></pre>\n<pre class=\"lang-asm prettyprint-override\"><code>; clang on x64 with -march=skylake\n\nfoo(int*, int):                              # @foo(int*, int)\n        movsxd  rax, esi\n        vpbroadcastq    xmm0, qword ptr [rdi + 4*rax + 8]\n        vpaddd  xmm0, xmm0, xmmword ptr [rdi + 4*rax]\n        vpshufd xmm1, xmm0, 85                  # xmm1 = xmm0[1,1,1,1]\n        vpaddd  xmm0, xmm0, xmm1\n        vmovd   eax, xmm0\n        ret\n</code></pre>\n<h1>Value range calculations</h1>\n<blockquote>\n<p>The compiler keeps track of the variables' range of possible values at\neach point in the program, i.e. for code such as</p>\n<pre><code>int x = foo();\nif (x &gt; 0) {\n  int y = x + 5;\n  int z = y / 4;\n</code></pre>\n<p>it determines that x has the range <code>[1, INT_MAX]</code> after the\nif-statement, and can thus determine that y has the range <code>[6, INT_MAX]</code> as overflow is not allowed. And the next line can be\noptimized to <code>int z = y &gt;&gt; 2;</code> as the compiler knows that y is\nnon-negative.</p>\n</blockquote>\n<pre><code>auto foo(int x)\n{\n    if (x &lt;= 0)\n        __builtin_unreachable();\n    \n    return (x + 5) / 4;\n}\n</code></pre>\n<pre><code>foo(int):\n        lea     eax, [rdi+5]\n        sar     eax, 2\n        ret\n</code></pre>\n<blockquote>\n<p>The undefined overflow helps optimizations that need to compare two\nvalues (as the wrapping case would give possible values of the form\n<code>[INT_MIN, (INT_MIN+4)]</code> or <code>[6, INT_MAX]</code> that prevents all useful\ncomparisons with <code>&lt;</code> or <code>&gt;</code>), such as</p>\n<ul>\n<li>Changing comparisons <code>x&lt;y</code> to true or false if the ranges for <code>x</code> and <code>y</code> does not overlap</li>\n<li>Changing <code>min(x,y)</code> or <code>max(x,y)</code> to <code>x</code> or <code>y</code> if the ranges do not overlap</li>\n<li>Changing <code>abs(x)</code> to <code>x</code> or <code>-x</code> if the range does not cross <code>0</code></li>\n<li>Changing <code>x/c</code> to <code>x&gt;&gt;log2(c)</code> if <code>x&gt;0</code> and the constant <code>c</code> is a power of <code>2</code></li>\n<li>Changing <code>x%c</code> to <code>x&amp;(c-1)</code> if <code>x&gt;0</code> and the constant <code>c</code> is a power of <code>2</code></li>\n</ul>\n</blockquote>\n<h1>Loop analysis and optimization</h1>\n<blockquote>\n<p>The canonical example of why undefined signed overflow helps loop\noptimizations is that loops like</p>\n<pre><code>for (int i = 0; i &lt;= m; i++)\n</code></pre>\n<p>are guaranteed to terminate for undefined overflow. This helps\narchitectures that have specific loop instructions, as they do in\ngeneral not handle infinite loops.</p>\n<p>But undefined signed overflow helps many more loop optimizations. All\nanalysis such as determining number of iteration, transforming\ninduction variables, and keeping track of memory accesses are using\neverything in the previous sections in order to do its work. In\nparticular, <strong>the set of loops that can be vectorized are severely\nreduced when signed overflow is allowed</strong>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": false, "score": 5, "last_activity_date": 1557423090, "creation_date": 1557423090, "answer_id": 56064692, "question_id": 56047702, "link": "https://stackoverflow.com/questions/56047702/is-there-some-meaningful-statistical-data-to-justify-keeping-signed-integer-arit/56064692#56064692", "title": "Is there some meaningful statistical data to justify keeping signed integer arithmetic overflow undefined?", "body": "<p>Here's an actual little benchmark, bubble sort. I've compared timings without/with <code>-fwrapv</code> (which means the overflow is UB/not UB). Here are the results (seconds):</p>\n\n<pre><code>                   -O3     -O3 -fwrapv    -O1     -O1 -fwrapv\nMachine1, clang    5.2     6.3            6.8     7.7\nMachine2, clang-8  4.2     7.8            6.4     6.7\nMachine2, gcc-8    6.6     7.4            6.5     6.5\n</code></pre>\n\n<p>As you can see, the not-UB (<code>-fwrapv</code>) version is almost always slower, the largest difference is pretty big, 1.85x.</p>\n\n<p>Here's the code. Note, that I intentionally chose an implementation, which should produce a larger difference for this test.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid bubbleSort(int *a, long n) {\n        bool swapped;\n        for (int i = 0; i &lt; n-1; i++) {\n                swapped = false;\n                for (int j = 0; j &lt; n-i-1; j++) {\n                        if (a[j] &gt; a[j+1]) {\n                                int t = a[j];\n                                a[j] = a[j+1];\n                                a[j+1] = t;\n                                swapped = true;\n                        }\n                }\n\n                if (!swapped) break;\n        }\n}\n\nint main() {\n        int a[8192];\n\n        for (int j=0; j&lt;100; j++) {\n                for (int i=0; i&lt;8192; i++) {\n                        a[i] = rand();\n                }\n\n                bubbleSort(a, 8192);\n        }\n}\n</code></pre>\n"}], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 6, "accepted_answer_id": 56051070, "answer_count": 4, "score": 37, "last_activity_date": 1607158354, "creation_date": 1557343350, "last_edit_date": 1557343879, "question_id": 56047702, "link": "https://stackoverflow.com/questions/56047702/is-there-some-meaningful-statistical-data-to-justify-keeping-signed-integer-arit", "title": "Is there some meaningful statistical data to justify keeping signed integer arithmetic overflow undefined?", "body": "<p>The C Standard explicitly specifies signed integer overflow as having <strong>undefined behavior</strong>. Yet most CPUs implement signed arithmetics with defined semantics for overflow (except maybe for division overflow: <code>x / 0</code> and <code>INT_MIN / -1</code>).</p>\n\n<p>Compilers writers have been taking advantage of the <em>undefinedness</em> of such overflows to add more aggressive optimisations that tend to break legacy code in very subtle ways. For example this code may have worked on older compilers but does not anymore on current versions of <code>gcc</code> and <code>clang</code>:</p>\n\n<pre><code>/* Tncrement a by a value in 0..255, clamp a to positive integers.\n   The code relies on 32-bit wrap-around, but the C Standard makes\n   signed integer overflow undefined behavior, so sum_max can now \n   return values less than a. There are Standard compliant ways to\n   implement this, but legacy code is what it is... */\nint sum_max(int a, unsigned char b) {\n    int res = a + b;\n    return (res &gt;= a) ? res : INT_MAX;\n}\n</code></pre>\n\n<p>Is there hard evidence that these optimisations are worthwhile? Are there comparative studies documenting the actual improvements on real life examples or even on classical benchmarks?</p>\n\n<p>I came up with this question as I was watching this: <a href=\"https://www.youtube.com/watch?v=AeEwxtEOgH0\" rel=\"noreferrer\">C++Now 2018: John Regehr \u201cClosing Keynote: Undefined Behavior and Compiler Optimizations\u201d</a></p>\n\n<p>I am tagging <strong>c</strong> and <strong>c++</strong> as the problem is similar in both languages but the answers might be different.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1557343062, "post_id": 56047593, "comment_id": 98736840, "body": "What do you mean by <code>type in get line</code>?"}, {"owner": {"reputation": 552, "user_id": 11038454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118900695ae8e562f696c0dd14feb0d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/11038454/tony"}, "edited": false, "score": 0, "creation_date": 1557343508, "post_id": 56047593, "comment_id": 98737053, "body": "Honestly, I don&#39;t understand what you want to do..."}, {"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1557343630, "post_id": 56047593, "comment_id": 98737117, "body": "Hi, Is there a particular reason the template has to be a member function template, rather than a class template?"}, {"owner": {"reputation": 469, "user_id": 4824854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SPhK8fI7Ih8/AAAAAAAAAAI/AAAAAAAACnc/0BBhoF9bSXg/photo.jpg?sz=128", "display_name": "Sandburg", "link": "https://stackoverflow.com/users/4824854/sandburg"}, "edited": false, "score": 0, "creation_date": 1557344645, "post_id": 56047593, "comment_id": 98737530, "body": "And what about tag dispatch, a notion of template programming?"}], "answers": [{"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 0, "last_activity_date": 1557343536, "creation_date": 1557343536, "answer_id": 56047745, "question_id": 56047593, "link": "https://stackoverflow.com/questions/56047593/find-type-for-a-template-by-some-kind-of-identifier-or-int/56047745#56047745", "title": "Find type for a template by some kind of identifier or int", "body": "<p>Do you mean, split declaration in two?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;int i&gt; struct id_type;\ntemplate&lt;int i&gt; using id_type_t = typename id_type&lt;i&gt;::type;\ntemplate&lt;&gt; struct id_type&lt;ID1&gt; { using type = int; }\n\ntemplate&lt;int i&gt; id_type_t&lt;i&gt; get();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 552, "user_id": 11038454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118900695ae8e562f696c0dd14feb0d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/11038454/tony"}, "edited": false, "score": 0, "creation_date": 1557347810, "post_id": 56047756, "comment_id": 98738851, "body": "Can you give me a scenario of how to use this? I am not quiet understand..."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 552, "user_id": 11038454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118900695ae8e562f696c0dd14feb0d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/11038454/tony"}, "edited": false, "score": 0, "creation_date": 1557349123, "post_id": 56047756, "comment_id": 98739386, "body": "What do you not understand? I mean, the syntax OP wanted <code>Test::get&lt;ID2&gt;()</code> works with both my examples."}, {"owner": {"reputation": 552, "user_id": 11038454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118900695ae8e562f696c0dd14feb0d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/11038454/tony"}, "edited": false, "score": 0, "creation_date": 1557355312, "post_id": 56047756, "comment_id": 98741234, "body": "What I don&#39;t understand is the whole purpose of doing so. So if you can give me an example of how your code beneficial from doing the whole thing will be great appreciate!"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 552, "user_id": 11038454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118900695ae8e562f696c0dd14feb0d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/11038454/tony"}, "edited": false, "score": 0, "creation_date": 1557368963, "post_id": 56047756, "comment_id": 98743887, "body": "I don&#39;t understand the purpose either. I really have no idea of what OP want to do with <code>Test::get&lt;ID2&gt;()</code>. All I know is that OP want that syntax to work with enum and specialization."}, {"owner": {"reputation": 65, "user_id": 7843648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7141c98c651914a98b718efa74686139?s=128&d=identicon&r=PG&f=1", "display_name": "Marc L&#252;hr", "link": "https://stackoverflow.com/users/7843648/marc-l%c3%bchr"}, "edited": false, "score": 0, "creation_date": 1557392654, "post_id": 56047756, "comment_id": 98752412, "body": "The C++17 solution (most bottom) works out best but only when everything in in one compile unit, because the auto deduction is not known in other units (I&#39;m not familiar if its possible to declare it in a header file)."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 65, "user_id": 7843648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7141c98c651914a98b718efa74686139?s=128&d=identicon&r=PG&f=1", "display_name": "Marc L&#252;hr", "link": "https://stackoverflow.com/users/7843648/marc-l%c3%bchr"}, "edited": false, "score": 0, "creation_date": 1557407521, "post_id": 56047756, "comment_id": 98760767, "body": "@MarcL&#252;hr templates are usually implemented in header files. The exception to the rule is specialization, but indeed the return type deduction require to put it in a header. Just don&#39;t forget to mark it inline."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 2, "last_activity_date": 1557408651, "last_edit_date": 1557408651, "creation_date": 1557343589, "answer_id": 56047756, "question_id": 56047593, "link": "https://stackoverflow.com/questions/56047593/find-type-for-a-template-by-some-kind-of-identifier-or-int/56047756#56047756", "title": "Find type for a template by some kind of identifier or int", "body": "<p>I'll explain first my preferred way to do this kind of stuff. I usually try to avoid enum since almost everytime you need additional data, and with enum you're stuck writing that data elsewhere. For example, that elsewhere may be in template specialization.</p>\n\n<p>I would rather use types:</p>\n\n<pre><code>struct ID1 {\n    static constexpr auto default_value = 42; \n};\n\nstruct ID2 {\n    static constexpr auto default_value = 0.12; \n};\n</code></pre>\n\n<p>Then drop the specialization and use the data provided in the types:</p>\n\n<pre><code>struct Test {\n    template&lt;typename T&gt;\n    static auto get() {\n        // or maybe call a static member function\n        return T::default_value;\n    }\n};\n\nint main()\n{\n  std::cout &lt;&lt; Test::get&lt;ID2&gt;() &lt;&lt; std::endl;\n  std::cout &lt;&lt; Test::get&lt;ID1&gt;() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<hr>\n\n<p>But there is a way to make your design work and avoid writing that type using return type deduction:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nenum {\n    ID1,\n    ID2,\n};\n\nstruct Test {\n    // to be deduced -------v\n    template&lt;auto I&gt; static auto get();\n    //       ^--- (optional change)\n    //            Have the enum type deduce as well\n};\n\ntemplate&lt;&gt; auto Test::get&lt;ID1&gt;()\n{\n  return 43;   \n}\n\ntemplate&lt;&gt; auto Test::get&lt;ID2&gt;()\n{\n  return 0.12;   \n}\n\nint main()\n{\n  std::cout &lt;&lt; Test::get&lt;ID2&gt;() &lt;&lt; std::endl;\n  std::cout &lt;&lt; Test::get&lt;ID1&gt;() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/xywyfR\" rel=\"nofollow noreferrer\">See it compiling on compiler explorer</a>.</p>\n\n<p>You could also revert back to <code>int</code> as the enum template parameter be stay compatible with C++14:</p>\n\n<pre><code>template&lt;int I&gt; static auto get();\n//       ^------ reverted it back to int\n</code></pre>\n\n<p>But using C++17 and auto template parameters, you can have multiple enum without value conflict:</p>\n\n<pre><code>enum struct A {\n    Value1, Value2\n};\n\nenum struct B {\n    Value1\n};\n\n// Different with C++17 auto template parameter\n// not possible with C++14\ntemplate&lt;&gt; auto Test::get&lt;A::Value1&gt;()\n{\n  return 43;   \n}\n\ntemplate&lt;&gt; auto Test::get&lt;B::Value1&gt;()\n{\n  return 0.12;   \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1557344457, "post_id": 56047855, "comment_id": 98737447, "body": "The OP wants to define <code>ID1</code> and <code>ID2</code> as tokens of the <code>enum</code>."}, {"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1557345178, "post_id": 56047855, "comment_id": 98737768, "body": "There is no need of the enum"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1557345256, "post_id": 56047855, "comment_id": 98737798, "body": "We are not in a place to make that decision for them."}, {"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1557347554, "post_id": 56047855, "comment_id": 98738747, "body": "When somebody asks something may be there is a wrong approach, due to misanderstanding of something. This is one of the reasons for making a question. The questioner will evaluate if that is the case or not. If you do it instead of him it means that you know already what is in his mind that usually is a difficult thing do do."}, {"owner": {"reputation": 65, "user_id": 7843648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7141c98c651914a98b718efa74686139?s=128&d=identicon&r=PG&f=1", "display_name": "Marc L&#252;hr", "link": "https://stackoverflow.com/users/7843648/marc-l%c3%bchr"}, "edited": false, "score": 0, "creation_date": 1557383835, "post_id": 56047855, "comment_id": 98747808, "body": "Using only the typedefs was my first attempt but when I have two IDs, for example both int it gets ambiguous"}], "tags": [], "owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "is_accepted": false, "score": 1, "last_activity_date": 1557344356, "last_edit_date": 1557344356, "creation_date": 1557344049, "answer_id": 56047855, "question_id": 56047593, "link": "https://stackoverflow.com/questions/56047593/find-type-for-a-template-by-some-kind-of-identifier-or-int/56047855#56047855", "title": "Find type for a template by some kind of identifier or int", "body": "<p>I suppose you wanted this ?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntypedef int ID1;\ntypedef double ID2;\n\nclass Test\n{\npublic:\n    template&lt;typename T&gt; static T get();\n};\n\ntemplate&lt;&gt; int Test::get&lt;ID1&gt;()\n{\n  return 43;   \n}\n\ntemplate&lt;&gt; double Test::get&lt;ID2&gt;()\n{\n  return 0.12;   \n}\n\nint main()\n{\n  std::cout &lt;&lt; Test::get&lt;ID2&gt;() &lt;&lt; std::endl;\n  std::cout &lt;&lt; Test::get&lt;ID1&gt;() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The idea is that if the data type is known at compile time, then there is no need to write the number in order to select the kind of data.\nThe data type itself is sufficient in order to do the job.</p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 7843648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7141c98c651914a98b718efa74686139?s=128&d=identicon&r=PG&f=1", "display_name": "Marc L&#252;hr", "link": "https://stackoverflow.com/users/7843648/marc-l%c3%bchr"}, "is_accepted": false, "score": 2, "last_activity_date": 1557393517, "creation_date": 1557393517, "answer_id": 56056146, "question_id": 56047593, "link": "https://stackoverflow.com/questions/56047593/find-type-for-a-template-by-some-kind-of-identifier-or-int/56056146#56056146", "title": "Find type for a template by some kind of identifier or int", "body": "<p>I found a way using parts of the other answers and show the implementation here:</p>\n\n<p>central header file to define all Ids and types. <strong>decltype</strong> helps finding the return type. Using <strong>auto</strong> here leads me to the problem that when I declare the method here for the specific type, would not match the template declaration</p>\n\n<pre><code>//Test.hpp\nstruct ID1 {\n    int value; \n};\n\nstruct ID2 {\n    double value; \n};\n\nstruct Test {\n    template&lt;typename T&gt; static decltype(T::value) get();\n};\n</code></pre>\n\n<p>Then I have the definition of the get function (which can also be in separate compilation units)</p>\n\n<pre><code>#include \"Test.hpp\"\ntemplate&lt;&gt; int Test::get&lt;ID1&gt;()\n{\n    return 43;\n}\n\ntemplate&lt;&gt; double Test::get&lt;ID2&gt;()\n{\n    return 0.12;\n}\n\n</code></pre>\n\n<p>and a main that uses them</p>\n\n<pre><code>#include \"Test.hpp\"\nint main()\n{\n  std::cout &lt;&lt; Test::get&lt;ID2&gt;() &lt;&lt; std::endl;\n  std::cout &lt;&lt; Test::get&lt;ID1&gt;() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This is pretty much taken the answers from George Kourtis and Guillaume Racicot together and put another bit in myself.</p>\n"}], "owner": {"reputation": 65, "user_id": 7843648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7141c98c651914a98b718efa74686139?s=128&d=identicon&r=PG&f=1", "display_name": "Marc L&#252;hr", "link": "https://stackoverflow.com/users/7843648/marc-l%c3%bchr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 56047756, "answer_count": 4, "score": 2, "last_activity_date": 1557408651, "creation_date": 1557342933, "last_edit_date": 1557392165, "question_id": 56047593, "link": "https://stackoverflow.com/questions/56047593/find-type-for-a-template-by-some-kind-of-identifier-or-int", "title": "Find type for a template by some kind of identifier or int", "body": "<p>I'm trying write e generic component that handle data, identified currently by an enum. The data can be of different types but one id is only of one type.</p>\n\n<p>What I'm trying to achieve is to specialize the template somewhere in my code base and call a function by their identifier only, like</p>\n\n<pre><code>Test::get&lt;ID2&gt;()\n</code></pre>\n\n<p>What works in the code below including the type. Is there a simple/smart way to avoid writing the type in get line?</p>\n\n<p>I tried to use a typedef for the identification, buy of course that gets directly resolved to the primitive type and the two template specializations are ambiguous. If there is no good C++ way, I can still use code generation to solve that but I hope for a better solution.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntypedef int ID1_t;\ntypedef double ID2_t;\n\nenum  {\n    ID1,\n    ID2,\n};\n\nclass Test\n{\npublic:\n    template&lt;int I, typename T&gt; static T get();\n};\n\ntemplate&lt;&gt; int Test::get&lt;ID1&gt;()\n{\n  return 43;   \n}\n\ntemplate&lt;&gt; double Test::get&lt;ID2&gt;()\n{\n  return 0.12;   \n}\n\nint main()\n{\n  std::cout &lt;&lt; Test::get&lt;ID2, ID2_t&gt;() &lt;&lt; std::endl;\n  std::cout &lt;&lt; Test::get&lt;ID1, ID1_t&gt;() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>EDIT (a bit more Background):\nI'm writing a central to use component to get data (like an int) and set data to in with a notification mechanism to inform all needed places.\nIts central defined but de-central implemented, that the interface is the same for all uses but the implementation can be in an own source file.\nThat reduces dependencies between components a lot but also gives a strong typed data exchange.</p>\n\n<p>For example:</p>\n\n<p>Lets say we have data written in a FLASH memory at production time, having configuration data stored in an EEPROM or FRAM and also some volatile data in RAM variables that will be forgotten on power cycle.</p>\n\n<p>Lets take a volume value for a loudspeaker that can be changed somehow. I just want to put the value into the system:</p>\n\n<pre><code>auto volume = 55; //(constant here but is in real decoded from SPI)\nCentralDataStorage::set&lt;Volume&gt;(volume);\n</code></pre>\n\n<p>I don't want to make a dependency to the physical storage here.\nThan I want a component that is responsible to store the value as well as return the value on request. So it implements the set and get method but only for the id <strong>Volume</strong>.</p>\n\n<p>Another Component the one that actually set the volume into the amplifier, gets a notification and uses the get method from the Central interface which is implemented somewhere this component does not know.</p>\n\n<pre><code>auto volume = CentralDataStorage::get&lt;Volume&gt;();\n</code></pre>\n\n<p>Everything is known at compile time and needs to be type safe.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 11411338, "user_type": "registered", "profile_image": "https://graph.facebook.com/660534971061544/picture?type=large", "display_name": "Innocent Smile", "link": "https://stackoverflow.com/users/11411338/innocent-smile"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557343222, "post_id": 56047555, "comment_id": 98736920, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 add tow matrix with any size up to 100*100"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1557343390, "post_id": 56047555, "comment_id": 98737000, "body": "Please read <a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">Why should I not #include &lt;bits/stdc++.h&gt;?</a>. Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> reproducing your problem as required here."}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1557344272, "post_id": 56047555, "comment_id": 98737378, "body": "The code is very hard to read without proper indentation."}, {"owner": {"reputation": 1, "user_id": 11411338, "user_type": "registered", "profile_image": "https://graph.facebook.com/660534971061544/picture?type=large", "display_name": "Innocent Smile", "link": "https://stackoverflow.com/users/11411338/innocent-smile"}, "reply_to_user": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1557344876, "post_id": 56047555, "comment_id": 98737631, "body": "It has been modified @Gilles-PhilippePaill&#233; Paill&#233;"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1557348818, "post_id": 56047555, "comment_id": 98739256, "body": "Parse or read the input into a numerical matrix.  Add the matrices.  Output the result maxtrix in the given format."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1557348959, "post_id": 56047555, "comment_id": 98739317, "body": "BTW, you should pass the string as <code>const</code> reference, so the compiler doesn&#39;t make a copy."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1557349677, "post_id": 56047555, "comment_id": 98739569, "body": "I suggest you split up functionality into 1) reading a matrix; 2) adding two matrices; and 3) printing a matrix.  Don&#39;t try to do everything in one function."}, {"owner": {"reputation": 1, "user_id": 11411338, "user_type": "registered", "profile_image": "https://graph.facebook.com/660534971061544/picture?type=large", "display_name": "Innocent Smile", "link": "https://stackoverflow.com/users/11411338/innocent-smile"}, "edited": false, "score": 0, "creation_date": 1557351045, "post_id": 56047555, "comment_id": 98740041, "body": "can writ the cod?"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1562381787, "post_id": 56910122, "comment_id": 100365966, "body": "Why not <code>[](const std::string&amp; str) -&gt; float { return stof(str); }</code> to avoid the shadowing of <code>s</code> (on lines <code>22</code> &amp; <code>33</code>)? Also a note about using <code>double</code> instead of <code>float</code> in any circumstance where precision is needed. (but good job with the approach)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1562382634, "post_id": 56910122, "comment_id": 100366067, "body": "Additionally, adequate spacing would greatly help the readability of your code. Is there really a need to put multiple declarations on a single line? <code>std::string::iterator start = s.begin(); std::string::iterator posSemicolon{};</code> or to have lines sprawl for <code>221</code> characters?"}, {"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1562396537, "post_id": 56910122, "comment_id": 100367594, "body": "@David. Thank you for the recommendations. I updated the code. @All; Davids comments refer to old code that is no longer visible."}], "tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": false, "score": 1, "last_activity_date": 1562398211, "last_edit_date": 1562398211, "creation_date": 1562369409, "answer_id": 56910122, "question_id": 56047555, "link": "https://stackoverflow.com/questions/56047555/i-want-to-add-two-matrices-of-string-type-the-user-will-not-enter-the-number-of/56910122#56910122", "title": "I want to add two matrices of String type. The user will not enter the number of rows or columns. The user will enter the array only", "body": "<p>I will present one possible solution (out of 42 million options :-)  </p>\n\n<p>The idea is to use an Object Oriented approach. So, a class with data and methods.</p>\n\n<p>The data is the required vector of vector of float. And the methods are extraction and addition. For debug purposes, there is also an overwrite of the inserter operator. </p>\n\n<p>Please note: The tricky part is parsing the input string. Especially with white spaces that could be everywhere. For ease of use, I defined a regex for a float value. The  regex_token_iterator will extract the sub matches and copy those into a column. And this until the next \";\". Looks complex, but is easy to understand in the end.</p>\n\n<p>I put many comments in the code, which makes it a little bit lengthy. Anyway, it will help to understand better.</p>\n\n<p>The main function will look very simple then . . .</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Based on the recomendation of David C. Rankin, I updated the source code:</p>\n\n<ul>\n<li>Modify variable names to make them more readable</li>\n<li>Changed base data type from float to double</li>\n<li>Add more white spaces and line breaks for a better text structure</li>\n<li>Put in more comments</li>\n<li>New size check for addition operator</li>\n</ul>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;regex&gt;\n\n// Our test data (raw string) . We could of course also read from a file or from std::cin or any istream\nstd::istringstream testData(\nR\"#(   [   1 2    3 ; 4 5 6 7  ]\n[   7  8   9;    10  11 12]\n)#\");\n\n\nstruct Matrix\n{\n    // The data of our matrix\n    std::vector&lt;std::vector&lt;double&gt;&gt; data{};\n\n    // Overloading the extractor operator &gt;&gt; for our Matrix class\n    friend std::istream&amp; operator &gt;&gt; (std::istream&amp; is, Matrix&amp; m) {\n        // Read a complete line\n        std::string line; \n        getline(is, line);\n\n        // Define a regex that matches any double number\n        std::regex re(\"([-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?)\");\n\n        // Set iterators. \n        // \"Start\" will be set to begin() or one past the end of the next semicolon \n        std::string::iterator start = line.begin(); \n        // Position of semincolon or end()\n        std::string::iterator posSemicolon{};\n\n        // Read all rows and columns\n        do {\n            // Set the end iterator for this loop run to the position of the semicolon (or end() )\n            posSemicolon = std::find(start, line.end(), ';');\n\n            // Add a new row\n            m.data.emplace_back(std::vector&lt;double&gt;());\n\n            // Read a complete line with doubles and put that as column values in the current row\n            std::transform(\n                std::sregex_token_iterator(start, posSemicolon, re, 1), // Search for text that matches the regex\n                std::sregex_token_iterator(),                           // Search until the end (posSemicolon)\n                std::back_inserter(*(std::prev(m.data.end()))),         // Put this data into the columns of the current row \n                // Convert the string matched by the regex, into a double\n                [](const std::string&amp; stringAsDouble) -&gt; double { return stod(stringAsDouble); }\n            );   \n\n            // In case there is more input, \n            if (posSemicolon != line.end()) {\n                // then continue tokenizing in the next loop run past the semicolon \n                start = posSemicolon + 1;\n            }\n        } while (posSemicolon != line.end());\n        return is;\n    }\n\n    // For debug output purposes. Copy the data of the matrix to std::cout\n    friend std::ostream&amp; operator &lt;&lt; (std::ostream &amp; os, const Matrix &amp; m) {\n        std::for_each(\n            m.data.begin(),                           // Iterate over all rows\n            m.data.end(), \n            [&amp;os](const std::vector&lt;double&gt; &amp; row) {  // Do for all rows \n                std::copy(                            // Copy data to ostream (print)\n                    row.begin(),                      // Iterate ove all columns for this row  \n                    row.end(), \n                    std::ostream_iterator&lt;double&gt;(os, \" \")); // Print\n                std::cout &lt;&lt; '\\n';                    // Line break after printing a row\n            }  \n        );\n        return os;\n    }\n\n    // Overload of the addition operator\n    friend Matrix operator +(Matrix &amp; m1, Matrix &amp; m2) {\n        // Define an empty matrix\n        Matrix result{};\n\n        // To be on the safe side, we will resize the destination matrix size \n        // to maximum values of both matrices\n        // Get the max number of rows ofrom both m1 and m2\n        const size_t maxRowSize = std::max(m1.data.size(), m2.data.size());\n\n        // Set number of rows in resulting Matrix\n        result.data.resize(maxRowSize);\n\n        // Get the maximum number of columns in any of the 2 metrices m1 or m2\n        const size_t maxColumnSize = std::max(\n            std::max_element(\n                m1.data.begin(),    // Iterate over all rows of Matrix m1\n                m1.data.end(), \n                [](const std::vector&lt;double&gt; &amp; dv1_1, const std::vector&lt;double&gt; &amp; dv1_2) {\n                    return dv1_1.size() &lt; dv1_2.size(); \n                }\n            )-&gt;size(),\n            std::max_element(\n                m2.data.begin(),   // Iterate over all rows of Matrix m1\n                m2.data.end(), \n                [](const std::vector&lt;double&gt; &amp; dv2_1, const std::vector&lt;double&gt; &amp; dv2_2) {\n                    return dv2_1.size() &lt; dv2_2.size(); \n                }\n            )-&gt;size()\n        );\n\n        // Iterate over all matrix elements\n        // For all rows \n        for (size_t row = 0; row &lt; maxRowSize; ++row) {\n\n            // Resize the the number of columns in the target matrix\n            result.data[row].resize(maxColumnSize);\n\n            // Now iterate over all columns in that row\n            for (size_t col = 0; col &lt; maxColumnSize; ++col) {\n\n                // And add the values. First check for valid row and column indices\n                double m1Value = ((row &lt; m1.data.size()) &amp;&amp; (col &lt; m1.data[row].size())) ? m1.data[row][col] : 0.0;\n                double m2Value = ((row &lt; m2.data.size()) &amp;&amp; (col &lt; m2.data[row].size())) ? m2.data[row][col] : 0.0;\n                result.data[row][col] = m1Value + m2Value;\n            }\n        }\n        return result;\n    }\n};\n\nint main()\n{\n    // Define some matrices\n    Matrix m1, m2, m3;\n\n    // Read the test data. You can also read from std::cin or from a file\n    testData &gt;&gt; m1 &gt;&gt; m2;\n\n    // Add the Matrices\n    m3 = m1 + m2;\n\n    // Show result\n    std::cout &lt;&lt; \"Matrix 1:\\n\" &lt;&lt; m1 &lt;&lt; \"\\nMatrix 2:\\n\" &lt;&lt; m2 &lt;&lt; \"\\nMatrix3 = Matrix1 + Matrix2:\\n\" &lt;&lt; m3;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11411338, "user_type": "registered", "profile_image": "https://graph.facebook.com/660534971061544/picture?type=large", "display_name": "Innocent Smile", "link": "https://stackoverflow.com/users/11411338/innocent-smile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562398211, "creation_date": 1557342773, "last_edit_date": 1557346587, "question_id": 56047555, "link": "https://stackoverflow.com/questions/56047555/i-want-to-add-two-matrices-of-string-type-the-user-will-not-enter-the-number-of", "title": "I want to add two matrices of String type. The user will not enter the number of rows or columns. The user will enter the array only", "body": "<p>How do I add two matrices of String type? The user will not enter the number of rows or columns. The user will enter the array only. For example, for the input <code>[5 4-1; 2 1 4] + [3 -5 2.5; 1 2 3]</code>, the output should be <code>[8 -1 1.5; 3 3 7]</code> \nwhats the error in stof function and the add?\nthis is my code:</p>\n\n<pre><code>//define a stm fucntion to convert string to matrix\nvector &lt;vector &lt;float&gt; &gt; stm(string mat1)\n{\n    //now let us build the matrix1 by iterating over the string mat1\n    //we will break the string over the point where we \";\"\n    vector &lt;vector &lt;float&gt; &gt; matrix1;\n    int index1 = 0;\n    for (float i = 0; i &lt; mat1.length(); i++)\n    {\n        string temp = \" \";\n        while (mat1[i] != ';')\n        {\n            temp += mat1[i];\n            //now the temp string contains the elements of first row\n            //now we will break this at point where we get \" \" (spaces)\n            for (float j = 0; j &lt; temp.length(); j++)\n            {\n                string num1;\n                int index2 = 0;\n                while (temp[j] != ' ')\n                {\n                    num1 += temp[j];\n                    //ntf is number to be filled at that position\n                    j++;\n                }\n                float ntf = stof(num1);\n                matrix1[index1][index2] = ntf;\n                index2++;\n            }\n            i++;\n        }\n        index1++;\n    }\n    return matrix1;\n}\n\nint main()\n{\n    string mat1; cin &gt;&gt; mat1;\n    string mat2; cin &gt;&gt; mat2;\n    vector &lt;vector &lt;float&gt; &gt; matrix1, matrix2;\n    matrix1 = stm(mat1);\n    matrix2 = stm(mat2);\n    //now let us write a code to add the two matrices;\n    vector &lt;float&gt; add;\n    for (float i = 0; i &lt; matrix1.size(); i++)\n    {\n        for (float j = 0; j &lt; matrix1[0].size(); j++)\n        {\n            add[i][j] = matrix1[i][j] + matrix2[i][j];\n        }\n    }\n    for (float i = 0; i &lt; add.size(); i++)\n    {\n        for (float j = 0; j &lt; add[0].size(); j++)\n        {\n            cout &lt;&lt; add[i][j] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n    return 0;\n\n</code></pre>\n\n<p>this is an example \ninput</p>\n\n<blockquote>\n<pre><code> [5 4 -1;3 2 1]+[1 2 3;5 4 8]\n</code></pre>\n</blockquote>\n\n<p>output </p>\n\n<blockquote>\n<pre><code>[6 6 2;8 6 9]\n</code></pre>\n</blockquote>\n"}, {"tags": ["c++", "openssl", "sha-3"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1557345025, "post_id": 56047535, "comment_id": 98737706, "body": "Ubuntu 16.04 uses OpenSSL 1.0.2g, which I don&#39;t believe has sha3 support."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1557345383, "post_id": 56047535, "comment_id": 98737842, "body": "OpenSSL 1.1.1 <a href=\"https://www.openssl.org/docs/man1.1.1/man3/EVP_MD_CTX_new.html\" rel=\"nofollow noreferrer\">doesn&#39;t even appear to have <code>EVP_MD_CTX_create()</code></a>.  It looks like it&#39;s been replaced with <code>EVP_MD_CTX_new()</code>.  So I really have to question your compilation environment."}, {"owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "edited": false, "score": 0, "creation_date": 1557345783, "post_id": 56047535, "comment_id": 98737979, "body": "I think you are confused. There is no support for SHA3 in OpenSSL 1.0.2. It was first added in OpenSSL 1.1.1 (heres the change log entry <a href=\"https://github.com/openssl/openssl/blob/5c3f1e34b559c9b4372bf48aab63b61a6cd5edbb/CHANGES#L561-L562\" rel=\"nofollow noreferrer\">github.com/openssl/openssl/blob/&hellip;</a>)"}, {"owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1557345830, "post_id": 56047535, "comment_id": 98738002, "body": "@AndrewHenle EVP_MD_CTX_create() does exist in OpenSSL 1.1.1 but it is a macro for EVP_MD_CTX_new()"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "edited": false, "score": 0, "creation_date": 1557346647, "post_id": 56047535, "comment_id": 98738318, "body": "@MattCaswell Thanks for that bit of data.  You&#39;d think the &quot;<b>HISTORY</b>  The <code>EVP_MD_CTX_create()</code> and <code>EVP_MD_CTX_destroy()</code> functions were renamed to <code>EVP_MD_CTX_new()</code> and <code>EVP_MD_CTX_free()</code> in OpenSSL 1.1.0, respectively.&quot; in the documentation might mention that...  :-/"}, {"owner": {"reputation": 71, "user_id": 7005200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d935338bb731a0f2ba72f90b0830ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Ruiyu Zhu", "link": "https://stackoverflow.com/users/7005200/ruiyu-zhu"}, "edited": false, "score": 0, "creation_date": 1557348251, "post_id": 56047535, "comment_id": 98739028, "body": "I extracted the code  from this question(<a href=\"https://stackoverflow.com/questions/51144505/generate-sha-3-hash-in-c-using-openssl-library\" title=\"generate sha 3 hash in c using openssl library\">stackoverflow.com/questions/51144505/&hellip;</a>)."}], "owner": {"reputation": 71, "user_id": 7005200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d935338bb731a0f2ba72f90b0830ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Ruiyu Zhu", "link": "https://stackoverflow.com/users/7005200/ruiyu-zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 755, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557348212, "creation_date": 1557342676, "last_edit_date": 1557348212, "question_id": 56047535, "link": "https://stackoverflow.com/questions/56047535/how-to-generate-sha3-with-openssl-1-1-1a", "title": "How to generate SHA3 with openssl 1.1.1a", "body": "<p>Edit: I extracted the SHA3 code from this question(<a href=\"https://stackoverflow.com/questions/51144505/generate-sha-3-hash-in-c-using-openssl-library\">Generate SHA-3 hash in C++ using OpenSSL library</a>) and SHA3 is in the openssl 1.0.2q(but not 1.0.2r) version.</p>\n\n<p>I am trying to generate SHA3 with the openssl library. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;openssl/evp.h&gt;\nunsigned int SHALEN=32;\nvoid sha3(unsigned char *digest, const unsigned char *message, size_t message_len)\n{\n    EVP_MD_CTX *mdctx;\n    mdctx = EVP_MD_CTX_create();\n    EVP_DigestInit_ex(mdctx, EVP_sha3_256(), NULL);\n    EVP_DigestUpdate(mdctx, message, message_len);\n    EVP_DigestFinal_ex(mdctx, digest, &amp;SHALEN);\n    EVP_MD_CTX_destroy(mdctx);\n}\nint main()\n{\n    unsigned char digest[32];\n    unsigned char message[32];\n    for(int i=0;i&lt;32;i++)\n        message[i]=0;\n    sha3(digest,message,32);\n}\n</code></pre>\n\n<p>The above code works on my personal Mac (with openssl 1.0.2q 2018Nov) but not on the server(Ubuntu 16.04, openssl version=1.1.1a). When compiled with </p>\n\n<pre><code>  g++ test.cpp -lcrypto \n</code></pre>\n\n<p>It gives</p>\n\n<pre><code>/tmp/ccXTFrzC.o: In function `sha3(unsigned char*, unsigned char const*, unsigned long)':\ntest.cpp:(.text+0x1e): undefined reference to `EVP_sha3_256'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I looked up the openssl manual but it is not very helpful. Is there anything I missed here? Thanks in advance.</p>\n\n<p>BTW, I am advised not to downgrade openssl to solve the problem.</p>\n"}, {"tags": ["c++", "linear-algebra", "eigen", "eigen3", "eigenvalue"], "comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 2, "creation_date": 1557349631, "post_id": 56047470, "comment_id": 98739552, "body": "I don&#39;t know Eigen. But QR decomposition doesn&#39;t give you the eigenvalues. It needs further processing to get eigenvalues from QR decomposition. It&#39;s just the case that the product of diagonal is the determinant (because R is triangular, and Q has a determinant of plus/minus one)."}, {"owner": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1557350259, "post_id": 56047470, "comment_id": 98739745, "body": "@geza: You&#39;re right. Probably ought to delete this question."}], "answers": [{"tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": true, "score": 3, "last_activity_date": 1557600245, "creation_date": 1557600245, "answer_id": 56093290, "question_id": 56047470, "link": "https://stackoverflow.com/questions/56047470/confused-about-eigen-qr-decomposition/56093290#56093290", "title": "Confused about Eigen QR decomposition", "body": "<p>As @geza pointed out, the <code>R</code> matrix of a QR decomposition will (in general) not contain the Eigenvalues of the original matrix, life would be too easy if that was the case :)</p>\n\n<p>To your other problem, if you want to reconstruct <code>A</code> from <code>Q</code> and <code>R</code> you need to only look at the upper triangular part of <code>QR.matrixQR()</code></p>\n\n<pre><code>Eigen::Matrix&lt;Real, Eigen::Dynamic, Eigen::Dynamic&gt;\n              R = QR.matrixQR().triangularView&lt;Eigen::Upper&gt;();\n</code></pre>\n\n<p>Besides that, I'd suggest being careful with using <code>auto</code> in combination with expression-templates (nothing severely wrong in your case, except that <code>Rdiag</code> is evaluated at least twice).</p>\n\n<p>Also, using <code>long double</code> is barely a good idea on modern CPUs. First make sure that the algorithms you use are numerically stable and if precision really is an issue, consider using arbitrary precision floats (like MPFR).</p>\n"}], "owner": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1319, "favorite_count": 0, "accepted_answer_id": 56093290, "answer_count": 1, "score": 4, "last_activity_date": 1557600245, "creation_date": 1557342369, "last_edit_date": 1557348149, "question_id": 56047470, "link": "https://stackoverflow.com/questions/56047470/confused-about-eigen-qr-decomposition", "title": "Confused about Eigen QR decomposition", "body": "<p>I am confused about Eigen's QR decomposition. My understanding is that the matrix <code>Q</code> is stored implicitly as a sequence of Householder transformations, and that the matrix <code>R</code> is stored as an upper triangular matrix, and that the diagonal of <code>R</code> contains the eigenvalues of <code>A</code> (at least up to phase, which is all I care about).</p>\n\n<p>However, I wrote the following program which computes the eigenvalues of a matrix <code>A</code> via two different methods, one using the <code>Eigen::EigenSolver</code>, and the other using <code>QR</code>. I know that my <code>QR</code> method is returning the wrong results, and that the <code>EigenSolver</code> method is returning the correct results.</p>\n\n<p>What am I misunderstanding here?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;Eigen/Dense&gt;\n\nint main()\n{\n    using Real = long double;\n    long n = 2;\n    Eigen::Matrix&lt;Real, Eigen::Dynamic, Eigen::Dynamic&gt; A(n,n);\n\n    for(long i = 0; i &lt; n; ++i) {\n        for (long j = 0; j &lt; n; ++j) {\n            A(i,j) = Real(1)/Real(i+j+1);\n        }\n    }\n\n    auto QR = A.householderQr();\n\n    auto Rdiag = QR.matrixQR().diagonal().cwiseAbs();\n    auto [min, max] = std::minmax_element(Rdiag.begin(), Rdiag.end());\n    std::cout &lt;&lt; \"\\u03BA\\u2082(A) = \" &lt;&lt; (*max)/(*min) &lt;&lt; \"\\n\";\n\n    std::cout &lt;&lt; \"\\u2016A\\u2016\\u2082 via QR = \" &lt;&lt; (*max) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Diagonal of R =\\n\" &lt;&lt; Rdiag &lt;&lt; \"\\n\";\n\n\n    // dblcheck:\n\n    Eigen::SelfAdjointEigenSolver&lt;decltype(A)&gt; eigensolver(A);\n    if (eigensolver.info() != Eigen::Success) {\n        std::cout &lt;&lt; \"Something went wrong.\\n\";\n        return 1;\n    }\n    auto absolute_eigs = eigensolver.eigenvalues().cwiseAbs();\n    auto [min1, max1] = std::minmax_element(absolute_eigs.begin(), absolute_eigs.end());\n    std::cout &lt;&lt; \"\\u03BA\\u2082(A) via eigensolver = \" &lt;&lt; (*max1)/(*min1) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"\\u2016A\\u2016\\u2082 via eigensolver = \" &lt;&lt; (*max1) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"The absolute eigenvalues of A via eigensolver are:\\n\" &lt;&lt; absolute_eigs &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>\u03ba\u2082(A) = 15\n\u2016A\u2016\u2082 via QR = 1.11803\nDiagonal of R =\n  1.11803\n0.0745356\n\u03ba\u2082(A) via eigensolver = 19.2815\n\u2016A\u2016\u2082 via eigensolver = 1.26759\nThe absolute eigenvalues of A via eigensolver are:\n0.0657415\n  1.26759\n</code></pre>\n\n<p>Other info:</p>\n\n<ul>\n<li>Cloned eigen from the head:</li>\n</ul>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ hg log | more\nchangeset:   11993:20cbc6576426\ntag:         tip\ndate:        Tue May 07 16:44:55 2019 -0700\nsummary:     Fix AVX512 &amp; GCC 6.3 compilation\n</code></pre>\n\n<ul>\n<li><p>Occurs when compiled with g++-8, g++-9, and Apple Clang, with and without <code>-ffast-math</code>. I obtain the same wrong result with <code>Eigen::FullPivHouseholderQR</code>.</p></li>\n<li><p>I also looked into the source <code>HouseholderQR.h</code>, and they compute the determinant via <code>m_qr.diagonal().prod()</code>, which makes me feel somewhat more confident that I'm using the API correctly. Taking the product of the eigenvalues from the EigenSolver returns the same values as <code>QR.absDeterminant()</code>.</p></li>\n<li><p>The following code snippet <em>does not return the original matrix A</em>:</p></li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Eigen::Matrix&lt;Real, Eigen::Dynamic, Eigen::Dynamic&gt; R = QR.matrixQR();\nEigen::Matrix&lt;Real, Eigen::Dynamic, Eigen::Dynamic&gt; Q = QR.householderQ();\nstd::cout &lt;&lt; \"Q*R = \\n\" &lt;&lt; Q*R &lt;&lt; \"\\n\";\n</code></pre>\n\n<ul>\n<li><p>I checked that <code>Q</code> has all the requisite properties: Q^-1 = Q^T, Q^TQ = I, and |det(Q)| = 1.</p></li>\n<li><p>I've also verified that <code>QR.householderQ().transpose()*QR.matrixQR()</code> is not equal <code>A</code>; although one column is correct and another is wrong. </p></li>\n</ul>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 4, "creation_date": 1557342430, "post_id": 56047436, "comment_id": 98736567, "body": "Is probably related to your locale settings, as the decimal separator (dot or comma) is language dependent."}], "answers": [{"tags": [], "owner": {"reputation": 5378, "user_id": 2110683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33179a1918a5d90f47cde062fab10ff4?s=128&d=identicon&r=PG", "display_name": "Dimitry Ernot", "link": "https://stackoverflow.com/users/2110683/dimitry-ernot"}, "is_accepted": true, "score": 2, "last_activity_date": 1557343310, "creation_date": 1557343310, "answer_id": 56047696, "question_id": 56047436, "link": "https://stackoverflow.com/questions/56047436/qinputdialog-displays-a-comma-instead-of-a-dot-for-getdouble/56047696#56047696", "title": "QInputDialog displays a comma instead of a dot for getDouble()", "body": "<p>It depends on the <code>QLocale</code> settings of your current system. If you use an instance of <code>QInputDialog</code> rather than the static method, you can set the <code>QLocale</code> setting yourself (without changing the value for the whole application).</p>\n\n<p>For example:</p>\n\n<pre><code>QInputDialog* dialog = new QInputDialog();\ndialog-&gt;setInputMode(QInputDialog::DoubleInput);\ndialog-&gt;setLocale(QLocale(QLocale::English, QLocale::UnitedKingdom)); // Will use a dot\ndialog-&gt;exec();\nqDebug() &lt;&lt; dialog-&gt;doubleValue();\n\ndialog-&gt;setLocale(QLocale(QLocale::French, QLocale::France)); // Will use a comma\ndialog-&gt;exec();\nqDebug() &lt;&lt; dialog-&gt;doubleValue();\n</code></pre>\n\n<p>See the Qt <a href=\"https://doc.qt.io/qt-5/qinputdialog.html\" rel=\"nofollow noreferrer\">documentation</a> to configure the <code>QInputDialog</code> (the range, title, etc.)</p>\n"}, {"tags": [], "owner": {"reputation": 444, "user_id": 2772805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7N6Ln.jpg?s=128&g=1", "display_name": "PBrockmann", "link": "https://stackoverflow.com/users/2772805/pbrockmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1618347002, "creation_date": 1618347002, "answer_id": 67082207, "question_id": 56047436, "link": "https://stackoverflow.com/questions/56047436/qinputdialog-displays-a-comma-instead-of-a-dot-for-getdouble/67082207#67082207", "title": "QInputDialog displays a comma instead of a dot for getDouble()", "body": "<p>Same problem with PyQt. Haven't been able to specify setLocale. So I had to define it from a QInputDialog()</p>\n<pre><code>    #value, okPressed = QInputDialog.getDouble(self, &quot;Get scale value&quot;,&quot;Value:&quot;, self.scaleValue, 0, 100, 1)\n    # --&gt; get comma instead of dot\n    dialog = QInputDialog()\n    dialog.setInputMode(QInputDialog.DoubleInput)\n    dialog.setLocale(QLocale(QLocale.English, QLocale.UnitedStates))\n    dialog.setLabelText(&quot;Value : &quot;)\n    dialog.setDoubleMinimum(0)\n    dialog.setDoubleMaximum(100)\n    dialog.setDoubleStep(1)\n    dialog.setDoubleDecimals(2)\n    dialog.setDoubleValue(self.scaleValue)\n    dialog.setWindowTitle(&quot;Get scale value&quot;)\n    okPressed = dialog.exec_()\n    if okPressed:\n        self.scaleValue = dialog.doubleValue()\n    else:\n        return\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11471604, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5BpuKluu71g/AAAAAAAAAAI/AAAAAAAAAjc/sCuwDyWJoMA/photo.jpg?sz=128", "display_name": "\u0411\u0430\u0442\u0440\u0430\u0434\u0437 \u0421\u0430\u043d\u0430\u043a\u043e\u0435\u0432", "link": "https://stackoverflow.com/users/11471604/%d0%91%d0%b0%d1%82%d1%80%d0%b0%d0%b4%d0%b7-%d0%a1%d0%b0%d0%bd%d0%b0%d0%ba%d0%be%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 56047696, "answer_count": 2, "score": 2, "last_activity_date": 1618347002, "creation_date": 1557342248, "last_edit_date": 1557343471, "question_id": 56047436, "link": "https://stackoverflow.com/questions/56047436/qinputdialog-displays-a-comma-instead-of-a-dot-for-getdouble", "title": "QInputDialog displays a comma instead of a dot for getDouble()", "body": "<p>I use for input of decimal number in Qt <code>QInputDialog::getDouble()</code>. For some reason by default outputs instead of a point a comma though in tutorials shows a point.</p>\n\n<p>Can you tell me what it is or can the new versions only use a comma? The dot refuses keyboard</p>\n\n<pre><code>double test = QInputDialog::getDouble(this, \"Error!\", \"Write from 0 to 1!\", 0.0, -2147483647, 2147483647, 3, &amp;ok );\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/oBjRz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oBjRz.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "excel", "vba"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557342133, "post_id": 56047363, "comment_id": 98736460, "body": "Are you familiar with the process how to register and interfaceing  a DLL for use in VBA ? If yes what did you do to do so? If you don&#39;t have a registration you might be interested about <a href=\"https://en.wikipedia.org/wiki/Side-by-side_assembly\" rel=\"nofollow noreferrer\">Side by Side assemblies</a>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557342802, "post_id": 56047363, "comment_id": 98736710, "body": "Did you remember to ship the compiler runtime (aka the Visual Studio redistributables) along with your program? Without the runtime libraries your program cannot run properly. That goes for <i>any</i> compiler, not just VS."}, {"owner": {"reputation": 1, "user_id": 11471812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ccfb4866cea955c129734f47e5c7a78?s=128&d=identicon&r=PG&f=1", "display_name": "Ruixin", "link": "https://stackoverflow.com/users/11471812/ruixin"}, "edited": false, "score": 0, "creation_date": 1557405775, "post_id": 56047363, "comment_id": 98759781, "body": "I am not a programmer by training, unfortunately not able to digest the reference you gave. It&#39;s actually a very simple DLL trying to perform some intensive simulations which take too long to do in VBA."}, {"owner": {"reputation": 1, "user_id": 11471812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ccfb4866cea955c129734f47e5c7a78?s=128&d=identicon&r=PG&f=1", "display_name": "Ruixin", "link": "https://stackoverflow.com/users/11471812/ruixin"}, "edited": false, "score": 0, "creation_date": 1557418568, "post_id": 56047363, "comment_id": 98767346, "body": "Tried the Visual Studio redistributables, and it&#39;s not working."}, {"owner": {"reputation": 1, "user_id": 11471812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ccfb4866cea955c129734f47e5c7a78?s=128&d=identicon&r=PG&f=1", "display_name": "Ruixin", "link": "https://stackoverflow.com/users/11471812/ruixin"}, "edited": false, "score": 0, "creation_date": 1557424363, "post_id": 56047363, "comment_id": 98769958, "body": "resolved, using dependency walker and find two DLL need to be add to sysWOW64."}], "owner": {"reputation": 1, "user_id": 11471812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ccfb4866cea955c129734f47e5c7a78?s=128&d=identicon&r=PG&f=1", "display_name": "Ruixin", "link": "https://stackoverflow.com/users/11471812/ruixin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557382234, "creation_date": 1557341892, "last_edit_date": 1557382234, "question_id": 56047363, "link": "https://stackoverflow.com/questions/56047363/c-dll-for-excel-not-able-to-work-on-other-computer", "title": "C++ DLL for Excel not able to work on other computer", "body": "<p>I built a C++ DLL, to be called from Excel-VBA, using Visual Studio 2017.  It works well on my computer with the DLL built by debug mode. When I try to use it on another computer without VS, it gives a run time <code>error 53 - file not found</code>. After some research on the web, I have tried to built the DLL under release mode. Now I'm getting run time <code>error 53 - file not found</code> on my pc with VS. The error message on the other computer is run time 'error 453 - cannot find DLL entry point'.</p>\n"}, {"tags": ["c++", "clang-format"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1557340984, "post_id": 56047103, "comment_id": 98735948, "body": "For what it&#39;s worth, <code>long *b = ...;</code> is C-style declaration. <code>long* b = ...;</code> is C++ style declaration."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557341036, "post_id": 56047103, "comment_id": 98735981, "body": "if you are using version control then one version is worse than the other. What if you add a <code>std::vector&lt;double&gt;</code> ? Then all lines in the block will have to change, just saying..."}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557341232, "post_id": 56047103, "comment_id": 98736073, "body": "@user463035818 Don&#39;t tell me that. It&#39;s a legacy code style of my company that I must use in new code too."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557341401, "post_id": 56047103, "comment_id": 98736142, "body": "oh in that case I am really sorry for you."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1557342581, "post_id": 56047103, "comment_id": 98736627, "body": "Can&#39;t you change the style when you have clang-format? (Or convince some people)"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1557342933, "post_id": 56047103, "comment_id": 98736772, "body": "@JVApen I try it, but unsuccessfully at this moment."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1557343363, "post_id": 56047103, "comment_id": 98736990, "body": "Once you are at the same wave length about the advantages compared to disadvantages, you can get a lot of change. I&#39;ve managed to change the braces"}], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 529, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557340674, "creation_date": 1557340674, "question_id": 56047103, "link": "https://stackoverflow.com/questions/56047103/clang-format-align-consecutive-declarations-ignoring", "title": "clang-format: align consecutive declarations ignoring *", "body": "<p>Using clang-format style options</p>\n\n<pre><code>AlignConsecutiveDeclarations: true\nPointerAlignment: \"Right\"\n</code></pre>\n\n<p>I get the following code style</p>\n\n<pre><code>int         aaaa = 12;\nlong        *b = nullptr;\nstd::string ccc = \"23\";\n</code></pre>\n\n<p>How to set clang-format style options so I get the following code style, consecutive declarations there are aligned by the variable names ignoring asterisk?</p>\n\n<pre><code>int         aaaa = 12;\nlong       *b = nullptr;\nstd::string ccc = \"23\";\n</code></pre>\n"}, {"tags": ["c++", "linux", "caching", "x86", "userspace"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1557339465, "post_id": 56046771, "comment_id": 98735269, "body": "C++ <i>usually</i> operates at a much higher level than this. This is not something you are usually supposed to concern yourself with as far as the language is concerned."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1557339984, "post_id": 56046771, "comment_id": 98735510, "body": "<i>g++ complains about it is not being declared.</i> \u2013 <code>#include &lt;asm&#47;cachectl.h&gt;</code>?"}, {"owner": {"reputation": 1326, "user_id": 3180006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EiLOs.jpg?s=128&g=1", "display_name": "Filip Dimitrovski", "link": "https://stackoverflow.com/users/3180006/filip-dimitrovski"}, "edited": false, "score": 2, "creation_date": 1557341456, "post_id": 56046771, "comment_id": 98736165, "body": "Use <code>_mm_clflush</code> from <code>emmintrin.h</code> and keep in mind the flush make take time."}, {"owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1557343076, "post_id": 56046771, "comment_id": 98736847, "body": "@Jesper, the <i>language</i> isn&#39;t concerned about performance, but real implementations are, and this user is, so I&#39;m not sure that is relevant."}, {"owner": {"reputation": 63, "user_id": 6100056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804ff3f9e380a2908578adfdad7de7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Hoda Aghaeikhouzani", "link": "https://stackoverflow.com/users/6100056/hoda-aghaeikhouzani"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557344825, "post_id": 56046771, "comment_id": 98737604, "body": "@JesperJuhl, Thanks. I&#39;m not concerning about the language. I&#39;m measuring the performance of some computation on x86 vs ARM. In the ARM version data is not cached, while it is cached on the x86 version. So, I need to flush those cache line to have fair comparison."}, {"owner": {"reputation": 63, "user_id": 6100056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804ff3f9e380a2908578adfdad7de7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Hoda Aghaeikhouzani", "link": "https://stackoverflow.com/users/6100056/hoda-aghaeikhouzani"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1557344949, "post_id": 56046771, "comment_id": 98737671, "body": "@Swordfish, Thanks! when I include this header file, I receive the following error: fatal error: asm/cachectl.h: No such file or directory"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1557345149, "post_id": 56046771, "comment_id": 98737755, "body": "then <code>cachectl()</code> is not available for your platform."}, {"owner": {"reputation": 63, "user_id": 6100056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804ff3f9e380a2908578adfdad7de7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Hoda Aghaeikhouzani", "link": "https://stackoverflow.com/users/6100056/hoda-aghaeikhouzani"}, "reply_to_user": {"reputation": 1326, "user_id": 3180006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EiLOs.jpg?s=128&g=1", "display_name": "Filip Dimitrovski", "link": "https://stackoverflow.com/users/3180006/filip-dimitrovski"}, "edited": false, "score": 2, "creation_date": 1557345180, "post_id": 56046771, "comment_id": 98737769, "body": "@FilipDimitrovski, Thanks! I tried _mm_clflush from x86intrin.h. It compiled correctly, but the timing results are the same. I&#39;m starting to be suspicious that x86 prefetcher does a pretty good job. Although I cannot prove it."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1557418951, "post_id": 56046771, "comment_id": 98767522, "body": "It&#39;s impossible to answer this question without showing the whole code."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1557419208, "post_id": 56046771, "comment_id": 98767629, "body": "We need also to know the processor on which you&#39;re running code and the exact command used to compile it."}], "answers": [{"comments": [{"owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "edited": false, "score": 0, "creation_date": 1557343686, "post_id": 56047716, "comment_id": 98737145, "body": "If you are flushing a large number of cache lines, you may want to change it to use <code>clflushopt</code> (if your processor supports it), with an <code>sfence</code> following all of the flushes."}, {"owner": {"reputation": 63, "user_id": 6100056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804ff3f9e380a2908578adfdad7de7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Hoda Aghaeikhouzani", "link": "https://stackoverflow.com/users/6100056/hoda-aghaeikhouzani"}, "edited": false, "score": 0, "creation_date": 1557345515, "post_id": 56047716, "comment_id": 98737883, "body": "Thanks. Removed the __force, and it compiled. But the results are the same. As I mentioned above I&#39;m starting to be suspicious that x86 prefetcher does a pretty good job."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1557355190, "post_id": 56047716, "comment_id": 98741204, "body": "This would be an even better answer if you pointed out that <code>_mm_clflush</code> should be used instead.  And that <code>asm volatile</code> means it&#39;s definitely not optimized away."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 63, "user_id": 6100056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804ff3f9e380a2908578adfdad7de7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Hoda Aghaeikhouzani", "link": "https://stackoverflow.com/users/6100056/hoda-aghaeikhouzani"}, "edited": false, "score": 0, "creation_date": 1557355748, "post_id": 56047716, "comment_id": 98741332, "body": "@HodaAghaeikhouzani: HW prefetch does work very well for sequential access, but it can&#39;t keep up with touching 1 <code>int</code> per cache line or something, with a 64-byte stride.  If you&#39;re actual code goes a lot slower than that, like several clock cycles per cache line, then yes it might well keep up even from DRAM."}, {"owner": {"reputation": 63, "user_id": 6100056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804ff3f9e380a2908578adfdad7de7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Hoda Aghaeikhouzani", "link": "https://stackoverflow.com/users/6100056/hoda-aghaeikhouzani"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1557419399, "post_id": 56047716, "comment_id": 98767706, "body": "@PeterCordes, Thanks! The code is sequential accesses to a big array, and that&#39;s why flushing caches won&#39;t affect the latency."}], "tags": [], "owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "is_accepted": true, "score": 2, "last_activity_date": 1557343424, "creation_date": 1557343424, "answer_id": 56047716, "question_id": 56046771, "link": "https://stackoverflow.com/questions/56046771/how-to-flush-a-range-of-address-in-cpu-cache/56047716#56047716", "title": "How to flush a range of address in CPU cache?", "body": "<p>The second one flushes the memory containing the pointer <code>__p</code>, which is on the stack, which is why it doesn\u2019t have the effect you want.</p>\n\n<p>The problem with the first one is that it uses the macro <code>__force</code>, which is defined in the Linux kernel and is unneeded here. (<a href=\"https://stackoverflow.com/questions/53120610/what-does-the-attribute-force-do\">What does the __attribute__((force)) do?</a>)</p>\n\n<p>If you remove <code>__force</code>, it will do what you want.</p>\n\n<p>(You should also change it to avoid using the variable name <code>__p</code>, which is a reserved identifier.)</p>\n"}], "owner": {"reputation": 63, "user_id": 6100056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804ff3f9e380a2908578adfdad7de7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Hoda Aghaeikhouzani", "link": "https://stackoverflow.com/users/6100056/hoda-aghaeikhouzani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 1, "accepted_answer_id": 56047716, "answer_count": 1, "score": 5, "last_activity_date": 1557343424, "creation_date": 1557339139, "question_id": 56046771, "link": "https://stackoverflow.com/questions/56046771/how-to-flush-a-range-of-address-in-cpu-cache", "title": "How to flush a range of address in CPU cache?", "body": "<p>I want to test the performance of a userspace program in linux running on x86. To calculate the performance, it is necessary for me to flush specific cache lines to memory (make sure those lines are invalidated and upon the next request there will be a cache miss).</p>\n\n<p>I've already seen suggestions using cacheflush(2) which supposed to be a system call, yet g++ complains about it is not being declared. Also, I cannot use clflush_cache_range which apparently can be invoked only within a kernel program. \nRight now what I tried to do is to use the following code:</p>\n\n<pre><code>static inline void clflush(volatile void *__p)\n{\n    asm volatile(\"clflush %0\" : \"+m\" (*(volatile char __force *)__p));\n}\n</code></pre>\n\n<p>But this gives the following error upon compilation:</p>\n\n<p>error: expected primary-expression before \u2018volatile\u2019</p>\n\n<p>Then I changed it as follows:</p>\n\n<pre><code>static inline void clflush(volatile void *__p)\n{\n    asm volatile(\"clflush %0\" :: \"m\" (__p));\n}\n</code></pre>\n\n<p>It compiled successfully, but the timing results did not change. I'm suspicious if the compiler removed it for the purpose of optimization.\nDose anyone has any idea how can I solve this problem?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557338570, "post_id": 56046559, "comment_id": 98734832, "body": "Your problem isn&#39;t <i>wrong formatting</i> but <a href=\"https://www.google.com/search?q=c%2B%2B+%E2%80%9CComparison+between+signed+and+unsigned+integer+expressions%E2%80%9D+site:stackoverflow.com&amp;rlz=1C1CHBF_deDE833DE833&amp;sa=X&amp;ved=2ahUKEwiatoKkwYziAhUt6KYKHSsBCGIQrQIoBDACegQIBRAM&amp;biw=1600&amp;bih=789\" rel=\"nofollow noreferrer\">lack of research</a>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1557338855, "post_id": 56046559, "comment_id": 98734977, "body": "<code>x =+ 3</code>?? That is most likely your problem. I am sure you meant <code>x += 3</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557338965, "post_id": 56046559, "comment_id": 98735030, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, the title, unfortunately, doesn&#39;t describe the real problem."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1557338966, "post_id": 56046559, "comment_id": 98735031, "body": "<i><code>int x</code></i> <i>~&gt;</i> <code>std::size_t x</code>"}], "owner": {"reputation": 1, "user_id": 11471628, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RJ5554YiCxU/AAAAAAAAAAI/AAAAAAAAAcc/qJ2iGO6Hfsc/photo.jpg?sz=128", "display_name": "Nathaniel Dunlap", "link": "https://stackoverflow.com/users/11471628/nathaniel-dunlap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1557338357, "answer_count": 0, "score": 0, "last_activity_date": 1557338231, "creation_date": 1557338231, "question_id": 56046559, "link": "https://stackoverflow.com/questions/56046559/adding-to-string-from-array-comparison-between-signed-and-unsigned-integer-exp", "closed_reason": "Duplicate", "title": "Adding to string from array. &quot;Comparison between signed and unsigned integer expressions&quot;", "body": "<p>Sorry if this is formatted wrong, first post.</p>\n\n<p>I'm creating a code that finds the amino acids coded by a string of mRNA. Array codon stores the codon chart that shows what nucleotides make what amino acid, array hold stores numbers based on the nucleic acid, and string acid stores the amino acid chain. My issue is in lines 26-49. The code completes normally, but doesn't print anything on line 49. What should I change? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;boost/algorithm/string.hpp&gt;\nusing namespace std;\n\nint main() {\nstring mRNA, acids;\nint hold[3];\n\ncout&lt;&lt;\"Enter mRNA strand. (Ex. AUG CCA UUG)\\n\";\ngetline(cin, mRNA);\n\nboost::erase_all(mRNA, \" \");\ncout&lt;&lt;mRNA&lt;&lt;endl&lt;&lt;\"length: \"&lt;&lt;mRNA.length()&lt;&lt;endl;\n\nint codonNum = (mRNA.length() - (mRNA.length() % 3)) / 3;\ncout&lt;&lt;codonNum&lt;&lt;\" codons\\n\";\n\nstring codon[4][4][4] = {\n    { {\"Phe \", \"Phe \", \"Leu \", \"Leu \"}, {\"Ser \", \"Ser \", \"Ser \", \"Ser \"}, {\"Tyr \", \"Tyr \", \"STOP \", \"STOP \"}, {\"Cys \", \"Cys \", \"STOP \", \"Trp \"} },\n    { {\"Leu \", \"Leu \", \"Leu \", \"Leu \"}, {\"Pro \", \"Pro \", \"Pro \", \"Pro \"}, {\"His \", \"His \", \"Gin \", \"Gin \"}, {\"Arg \", \"Arg \", \"Arg \", \"Arg \"} },\n    { {\"Ile \", \"Ile \", \"Ile \", \"Met \"}, {\"Thr \", \"Thr \", \"Thr \", \"Thr \"}, {\"Asn \", \"Asn \", \"Lys \", \"Lys \"}, {\"Ser \", \"Ser \", \"Arg \", \"Arg \"} },\n    { {\"Val \", \"Val \", \"Val \", \"Val \"}, {\"Ala \", \"Ala \", \"Ala \", \"Ala \"}, {\"Asp \", \"Asp \", \"Glu \", \"Glu \"}, {\"Gly \", \"Gly \", \"Gly \", \"Gly \"} }\n};\n\nfor (int x = 1; x &lt;= (mRNA.length() - (mRNA.length() % 3)); x =+ 3){\n    for (int y = 0; y &lt;= 2; y++){\n        switch (mRNA[x+y]){\n        case 'U': hold[y] = 0;\n        break;\n        case 'C': hold[y] = 1;\n        break;\n        case 'A': hold[y] = 2;\n        break;\n        case 'G': hold[y] = 3;\n        break;\n        case 'u': hold[y] = 0;\n        break;\n        case 'c': hold[y] = 1;\n        break;\n        case 'a': hold[y] = 2;\n        break;\n        case 'g': hold[y] = 3;\n        break;\n        }\n        acids += codon[hold[0]][hold[1]][hold[2]];\n    }\n}\ncout&lt;&lt;\"Sequence: \"&lt;&lt;acids;\n\n/* for (int x = 0; x &lt;= 3; x++) {\n    for (int y = 0; y &lt;= 3; y++) {\n        for (int z = 0; z &lt;= 3; z++) {\n            cout&lt;&lt;codon[x][y][z];\n        }\n        cout&lt;&lt;endl;\n    }\n    cout&lt;&lt;endl;\n} */\n\nreturn 0;\n}\n</code></pre>\n\n<p>It should print out a string like \"Pro Leu\" from string acids on line 49.</p>\n"}, {"tags": ["c++", "oop", "sdl-2"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1557338591, "post_id": 56046546, "comment_id": 98734844, "body": "Stay clear of the crystal meth meth method."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1557339184, "post_id": 56046546, "comment_id": 98735135, "body": "@xpnimi Have you considered actually <i>learning</i> C++ (it takes a couple of years) rather than just following random youtube tutorials?"}, {"owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557341667, "post_id": 56046546, "comment_id": 98736254, "body": "@JesperJuhl I am trying to learning c++ on the side, and i think it is a good exercise to port code from one language to an other - its not a random yt video at all. But thanks anyway."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "edited": false, "score": 0, "creation_date": 1557338675, "post_id": 56046619, "comment_id": 98734880, "body": "Yes I tried that, but where exactly doese the virtual keyword go? only to Trait.h update??"}, {"owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "edited": false, "score": 0, "creation_date": 1557338786, "post_id": 56046619, "comment_id": 98734940, "body": "if I add <code>virtual</code> to the Trait update function, the velocity update func still doesn&#39;t get called."}, {"owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "edited": false, "score": 1, "creation_date": 1557339599, "post_id": 56046619, "comment_id": 98735328, "body": "got it working, the velocity update func has to be declared the same way as the traits velocity func."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "edited": false, "score": 2, "creation_date": 1557340265, "post_id": 56046619, "comment_id": 98735642, "body": "@xpnimi yes it does. And in C++11 and later, you can (and should) mark a descendant class method as <code>override</code> to let the compiler validate whether the descendant method actually overrides a base class method or not: <code>void update(void) override;</code> Without the <code>override</code>, no such validation is performed, which is why you missed that mistake when you first added <code>virtual</code>"}, {"owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1557341269, "post_id": 56046619, "comment_id": 98736084, "body": "@RemyLebeau how can I pass an Entity to any trait of the traits vector inside the entity update func loop? If I add Entity.h to Trait.h I get quite a lot of errors, and I think it is a conflict because both classes refer to themselves ..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "edited": false, "score": 1, "creation_date": 1557342739, "post_id": 56046619, "comment_id": 98736679, "body": "@xpnimi You would indeed have to change the <code>Trait::update()</code> method to take an <code>Entity*</code> as input, so that <code>Velocity::update()</code> can then do the same. But then you run into a classic circular reference problem, which is solved by using pointers (which you already are) and <a href=\"https://en.cppreference.com/w/cpp/language/class#Forward_declaration\" rel=\"nofollow noreferrer\">forward declarations</a> (which is what you are missing)."}, {"owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1557412464, "post_id": 56046619, "comment_id": 98763738, "body": "@RemyLebeau Thank you - that helped a lot, got it working!"}], "tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": true, "score": 3, "last_activity_date": 1557338482, "creation_date": 1557338482, "answer_id": 56046619, "question_id": 56046546, "link": "https://stackoverflow.com/questions/56046546/how-to-store-child-classes-in-vector-and-override-parent-function/56046619#56046619", "title": "How to store child classes in vector and override parent function", "body": "<blockquote>\n  <p>I want to create many different classes which inherit from <code>Trait</code> and store them in the vector. I want to call the subclasses update function and not the original <code>Trait</code> update function.</p>\n</blockquote>\n\n<p>To get what you want, use a <code>virtual</code> method:</p>\n\n<pre><code>virtual void update( void );\n</code></pre>\n\n<p>For more details, I suggest that you study about polymorphism and virtual functions.</p>\n"}], "owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 56046619, "answer_count": 1, "score": -1, "last_activity_date": 1557338482, "creation_date": 1557338175, "question_id": 56046546, "link": "https://stackoverflow.com/questions/56046546/how-to-store-child-classes-in-vector-and-override-parent-function", "title": "How to store child classes in vector and override parent function", "body": "<p>I am trying to code the js super-mario-series from the great YouTube channel \"meth meth method\" in c++ and SDL2.</p>\n\n<p>Now I am stuck on Episode 04 - <a href=\"https://www.youtube.com/watch?v=1rBOUyRGQuU\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=1rBOUyRGQuU</a></p>\n\n<p>I am trying to create an <code>Entity</code> class which has a vector of a <code>Trait</code> class. I want to create many different classes which inherit from <code>Trait</code> and store them in the vector. I want to call the subclasses update function and not the original Trait update function.</p>\n\n<pre><code>// -- Entity.h -----------------------------------\n\nclass Entity {\nprivate:\n    Vec2 vel;\n    std::vector&lt;Trait*&gt; traits;\n\npublic:\n    Vec2 pos;\n    // Constructor &amp; Destructor\n    Entity(void);   \n    ~Entity(void);\n\n    void addTrait(Trait* nTrait);\n\n    void update();\n};\n\n// -- Entity.cpp -----------------------------------\n\nvoid Entity::addTrait(Trait* newTrait) { \n    this-&gt;traits.push_back( newTrait );\n}\n\nvoid Entity::update() {\n\n    for ( Trait* trait : this-&gt;traits ) {\n        trait-&gt;update(  );\n    }    \n}\n\n</code></pre>\n\n<pre><code>// -- Trait.h -----------------------------------\nclass Trait {\nprivate:\n    std::string name;\npublic:\n    // Constructor &amp; Destructor\n    Trait(std::string aname );\n    ~Trait(void);\n\n    void update( void );\n};\n// -- Trait.cpp -----------------------------------\nvoid Trait::update(  ) {\n    printf(\"Trait update\\n\");\n}\n</code></pre>\n\n<p>And a Velocity.h sub-classs from Trait</p>\n\n<pre><code>// -- Velocity.h -----------------------------------\nclass Velocity : public Trait {\nprivate:\npublic:\n    // Constructor &amp; Destructor\n    Velocity(std::string aname);\n    ~Velocity(void);\n\n    void update(Entity *entity);\n};\n// -- Velocity.cpp -----------------------------------\nvoid Velocity::update(Entity *entity ) {\n    printf(\"Velocity update\\n\");\n    entity-&gt;setPos(0, 0);\n}\n</code></pre>\n\n<p>I tried many different Version, and got different errors. Now I got it working, bit when I add a velocity trait to an entity and call the update method of the entity (which loops through all traits) only the update function gets called from the parent Trait class (which prints \"Trait Update\" and not \"Velocity Update\").</p>\n\n<p>main.cpp</p>\n\n<pre><code>    Entity *mario = new Entity();\n\n    mario-&gt;setPos( 64, 180 );\n    mario-&gt;setVel(  2, -2 );\n\n    Velocity* velTrait = new Velocity(\"velocity\");\n    mario-&gt;addTrait(velTrait);\n\n    mario-&gt;update();\n\n</code></pre>\n\n<p>And a second Question is, that I want to give the velocity update function a pointer to the entity, so that I can change the entities position etc ...</p>\n"}, {"tags": ["c++", "code-generation", "atomic", "compiler-optimization", "volatile"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 4, "creation_date": 1557339152, "post_id": 56046501, "comment_id": 98735113, "body": "I&#39;m not sure we can answer the question of why the compiler fails to perform some specific optimization that would rarely be used. I assume that sane programmers think carefully when writing any line of code that invokes atomic operations, and would not write code like this."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 3, "creation_date": 1557343557, "post_id": 56046501, "comment_id": 98737082, "body": "GCC&#39;s TODO list: <a href=\"https://gcc.gnu.org/wiki/Atomic/GCCMM/Optimizations\" rel=\"nofollow noreferrer\">gcc.gnu.org/wiki/Atomic/GCCMM/Optimizations</a>"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1557375181, "post_id": 56046501, "comment_id": 98745087, "body": "@o11c Funny, I was told that compiler writers don&#39;t know how to implement consume semantics, but the GCC team just correctly described how!"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1557375308, "post_id": 56046501, "comment_id": 98745105, "body": "@Brian &quot;programmers think carefully&quot; is a (non) argument that can be used in any redundant computation and any code. They wouldn&#39;t optimize redundant operations or empty loop. But reality isn&#39;t so simple and real world code is not written with all the information available. Library code in particular needs to assume the worst."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557375645, "post_id": 56046501, "comment_id": 98745171, "body": "@JesperJuhl &quot;If you don&#39;t care about atomicity, then don&#39;t use atomics_&quot; Who suggested that we don&#39;t care about atomicity? &quot;<i>And how do you know that a load is unnecessary?</i>&quot; The same ways you know a load of any other non volatile variable is unnecessary. Because it&#39;s clearly redundant or even unused. &quot;<i>If some hardware changed the value of a register or memory location via DMA</i>&quot; <b>Why do you believe that non volatile atomics can be safely used for memory mapped registers or DMA?</b> What suggests that in the std or in std related discussion?"}, {"owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1557378417, "post_id": 56046501, "comment_id": 98745901, "body": "implementations may use <code>volatile</code> to force loads and stores to use memory (for visibility). Then the lack of optimization is just a side effect"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1557379734, "post_id": 56046501, "comment_id": 98746266, "body": "@LWimsey What do you mean? What would happen if they didn&#39;t &quot;force loads and stores to use memory (for visibility)&quot;? Visibility of what specifically?"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 2, "creation_date": 1557380407, "post_id": 56046501, "comment_id": 98746476, "body": "@LWimsey, considering the GCC document linked above, the induction is in the other direction. Atomic operations are implemented as functions that have unknown side effects. So atomic behave as if they were volatile qualified."}, {"owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1557448261, "post_id": 56046501, "comment_id": 98777881, "body": "@curiousguy Atomic operations must become visible to other cores. One (simple) way a <code>std::atomic</code> implementation can achieve that is with <code>volatile</code>. For example, on <code>X86</code>, load/store operations to <code>volatile int</code> are usually equivalent to their <code>std::atomic&lt;int&gt;</code> (mo_relaxed) counterparts. Without <code>volatile</code>, the compiler might keep a store local to the CPU (ie. in a register) and no other core would observe it. I am not saying <code>volatile</code> is required; an implementation may have an different approach to get the same result (eg. <code>gcc</code>, see link above)."}, {"owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1557448941, "post_id": 56046501, "comment_id": 98777994, "body": "@Oliv  The document is about one implementation, <code>gcc</code>, which treats all atomic operations as full compiler barriers; as such, it has the same limitations as volatile qualified operations; ie. 2 relaxed atomic operations (on different variables) will not be re-ordered even though the memory model allows that. An optimal implementation needs to know the full set of rules of the memory model."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1557450379, "post_id": 56046501, "comment_id": 98778233, "body": "@LWimsey 1) I agree that a volatile word variable is a proper impl of relaxed loads/stores. 2) I disagree here: &quot;<i>the compiler might keep a store local to the CPU (ie. in a register)</i>&quot; correct w/o volatile the impl may not immediately write to memory for each relaxed store, now how is that a bug?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1557459060, "post_id": 56046501, "comment_id": 98779725, "body": "@LWimsey In the presence of infinite loops with only mo_relaxed ops, you are right if you want the impl to make stores globally visible in finite time, which is a Good Thing but not strictly required (not a &quot;shall&quot; in standardese). So technically a compiler is allowed to keep a store to an atomic object &quot;in a register&quot; forever (in a purely computational function). The only time it shall make it visible is when a release operation is done. This is ridiculously perverse behavior and not acceptable QoI."}], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 1, "answer_count": 0, "score": 6, "last_activity_date": 1557340038, "creation_date": 1557337968, "last_edit_date": 1557340038, "question_id": 56046501, "link": "https://stackoverflow.com/questions/56046501/why-are-unnecessary-atomic-loads-not-optimized-away", "title": "Why are unnecessary atomic loads not optimized away?", "body": "<p>Let's consider this trivial code:</p>\n\n<pre><code>#include &lt;atomic&gt;\n\nstd::atomic&lt;int&gt; a;\nvoid f(){\n    for(int k=0;k&lt;100;++k)\n        a.load(std::memory_order_relaxed);\n}\n</code></pre>\n\n<p>MSVC, Clang and GCC all perform 100 loads of a, while it seems obvious it could have been optimized away. I expected the function <code>f</code> to be a nop (See generated code <a href=\"https://godbolt.org/z/7Cq2EW\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<p>Actually, I expected this code generation for a volatile atomic:</p>\n\n<pre><code>volatile std::atomic&lt;int&gt; va;\nvoid g(){\n    for(int k=0;k&lt;100;++k)\n        va.load(std::memory_order_relaxed);\n}\n</code></pre>\n\n<p>Why do compilers not optimize away unnecessary atomic loads?</p>\n"}, {"tags": ["c++", "warnings", "qt-creator", "compiler-warnings", "parentheses"], "comments": [{"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 1, "creation_date": 1557337438, "post_id": 56046331, "comment_id": 98734275, "body": "<code>==</code> Cannot be chained together."}, {"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "reply_to_user": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 1, "creation_date": 1557337728, "post_id": 56046331, "comment_id": 98734405, "body": "@Quimby <a href=\"https://ideone.com/2mwZBQ\" rel=\"nofollow noreferrer\">Sure it can.</a> :)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1557337768, "post_id": 56046331, "comment_id": 98734425, "body": "To fix, add the parentheses as suggested. \ud83d\ude09"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1557337996, "post_id": 56046331, "comment_id": 98734548, "body": "<a href=\"https://stackoverflow.com/questions/15208831/check-to-see-if-all-variable-are-equal-to-the-same-value-in-c\">Possible duplicate</a>"}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "reply_to_user": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1557338252, "post_id": 56046331, "comment_id": 98734692, "body": "@TrebledJ Ok,yes technically correct. But not in a useful way (apart from bools), so I would say it&#39;s the same as chaining of <code>cout&lt;&lt;x&lt;&lt;y&lt;&lt;z;</code> or <code>a+b+c+d</code>."}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 7328332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fdxit.jpg?s=128&g=1", "display_name": "idzireit", "link": "https://stackoverflow.com/users/7328332/idzireit"}, "edited": false, "score": 0, "creation_date": 1557338192, "post_id": 56046402, "comment_id": 98734654, "body": "To expand on r5ha&#39;s solution and follow user463035818 advice coding in a language is a language.  so if your trying to figure out if you have tic tac toe one could say to themselves  &quot; if this square is equal (==) to this square and (&amp;&amp;) that square is equal (==) to this square then tic-tac-toe. Might not help you to look at it that way but sure helps me.  I break down the sentence in regular language then tr to apply it to coding language"}, {"owner": {"reputation": 51, "user_id": 5657187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7928a300fa3bc547e4e9c87cf049ed83?s=128&d=identicon&r=PG&f=1", "display_name": "David Dalcino", "link": "https://stackoverflow.com/users/5657187/david-dalcino"}, "edited": false, "score": 2, "creation_date": 1557338685, "post_id": 56046402, "comment_id": 98734884, "body": "In the statement <code>a==b==c</code>, a==b returns a Boolean value, which is then compared against c. If c is some non-boolean type, and there is an implicit conversion between a bool and that type, it will be converted and then compared to c. In this case, <code>a==b</code> turns into a 1 or a 0, since c is a char, which is treated as an integer. That&#39;s the case on x86, at least; I think this might be undefined behavior."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 51, "user_id": 5657187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7928a300fa3bc547e4e9c87cf049ed83?s=128&d=identicon&r=PG&f=1", "display_name": "David Dalcino", "link": "https://stackoverflow.com/users/5657187/david-dalcino"}, "edited": false, "score": 0, "creation_date": 1557340737, "post_id": 56046402, "comment_id": 98735826, "body": "@DavidDalcino: Actually you are correct on the grouping and I wasn&#39;t. Pity you didn&#39;t write this in the answers section!"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1557347771, "post_id": 56046402, "comment_id": 98738828, "body": "Re: &quot;mind the parentheses&quot; -- the parentheses aren&#39;t needed. <code>&amp;&amp;</code> binds more tightly than <code>||</code> (just as <code>*</code> binds more tightly than <code>+</code> in arithmetic expressions), so <code>(a &amp;&amp; b) || (c &amp;&amp; d)</code> is no different semantically (although it&#39;s noisier) than <code>a &amp;&amp; b || c &amp;&amp; d</code>."}], "tags": [], "owner": {"reputation": 333, "user_id": 912044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6e3dc8778b9f7157e454c691ba68b3ba?s=128&d=identicon&r=PG", "display_name": "r5ha", "link": "https://stackoverflow.com/users/912044/r5ha"}, "is_accepted": false, "score": 3, "last_activity_date": 1557337577, "last_edit_date": 1557337577, "creation_date": 1557337536, "answer_id": 56046402, "question_id": 56046331, "link": "https://stackoverflow.com/questions/56046331/how-to-fix-suggest-parentheses-around-comparison-in-operand-of/56046402#56046402", "title": "How to fix suggest parentheses around comparison in operand of &#39;==&#39;", "body": "<p><code>==</code> operator in C++ doesn't work like that. It only allows two operands, which means constructions like <code>a == b == c</code> will not work as you'd expect. Rewrite the condition in a form <code>(a == b &amp;&amp; b == c)</code> instead (and mind the parentheses).</p>\n"}, {"tags": [], "owner": {"reputation": 1247, "user_id": 388398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9bd10eedb6c17c1604a7cadefed6b02?s=128&d=identicon&r=PG", "display_name": "Jon Guiton", "link": "https://stackoverflow.com/users/388398/jon-guiton"}, "is_accepted": false, "score": 1, "last_activity_date": 1557338321, "creation_date": 1557338321, "answer_id": 56046590, "question_id": 56046331, "link": "https://stackoverflow.com/questions/56046331/how-to-fix-suggest-parentheses-around-comparison-in-operand-of/56046590#56046590", "title": "How to fix suggest parentheses around comparison in operand of &#39;==&#39;", "body": "<p>You can do it like this</p>\n\n<pre><code>if ((config_atual[6]==config_atual[7] &amp;&amp; config_atual[7]==config_atual[8]) ||\n    (config_atual[1]==config_atual[4] &amp;&amp; config_atual[4]==config_atual[7]) ||\n    (config_atual[2]==config_atual[4] &amp;&amp; config_atual[4]==config_atual[6]))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1557340708, "last_edit_date": 1557340708, "creation_date": 1557340354, "answer_id": 56047038, "question_id": 56046331, "link": "https://stackoverflow.com/questions/56046331/how-to-fix-suggest-parentheses-around-comparison-in-operand-of/56047038#56047038", "title": "How to fix suggest parentheses around comparison in operand of &#39;==&#39;", "body": "<p>The expression <code>config_atual[6]==config_atual[7]==config_atual[8]</code> is <em>grouped</em> as <code>(config_atual[6]==config_atual[7])==config_atual[8]</code>. The part in parentheses is either <code>true</code> or <code>false</code> which is implicitly converted to an <code>int</code> type (or the type of <code>config_atual[8]</code> is that's wider than an <code>int</code>) prior to a second comparison; i.e. <code>config_atual[8]=={1, 0}</code>, where I've used what's in <code>{}</code> to indicate the possibilities. That <em>probably</em> ends up as <code>false</code>.</p>\n\n<p>Occasionally the chaining of <code>==</code> in this manner is useful. But in your case it isn't, and you need to write the expression in a different way;</p>\n\n<p><code>config_atual[6]==config_atual[7] &amp;&amp; config_atual[7]==config_atual[8]</code></p>\n\n<p>is one such way.</p>\n"}, {"tags": [], "owner": {"reputation": 716, "user_id": 1040943, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0731dfa3479a09ef4a43462e0d987f8d?s=128&d=identicon&r=PG", "display_name": "Telenoobies", "link": "https://stackoverflow.com/users/1040943/telenoobies"}, "is_accepted": false, "score": 0, "last_activity_date": 1557355924, "creation_date": 1557355924, "answer_id": 56050039, "question_id": 56046331, "link": "https://stackoverflow.com/questions/56046331/how-to-fix-suggest-parentheses-around-comparison-in-operand-of/56050039#56050039", "title": "How to fix suggest parentheses around comparison in operand of &#39;==&#39;", "body": "<pre><code>if (((config_atual[6]==config_atual[7])==config_atual[8]) || \n    ((config_atual[1]==config_atual[4])==config_atual[7]) || \n    ((config_atual[2]==config_atual[4])==config_atual[6]))\n{\n   if (config_atual[7]=='X')\n       cout &lt;&lt; \"O Jogador ganhou!\" &lt;&lt; endl;\n   else if (config_atual[7]=='O')\n       cout &lt;&lt; \"O Computador ganhou!\" &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11471553, "user_type": "registered", "profile_image": "https://graph.facebook.com/2577422992285607/picture?type=large", "display_name": "Pedro Calhau", "link": "https://stackoverflow.com/users/11471553/pedro-calhau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1649, "favorite_count": 0, "accepted_answer_id": 56047038, "answer_count": 4, "score": 0, "last_activity_date": 1557355924, "creation_date": 1557337265, "last_edit_date": 1557337688, "question_id": 56046331, "link": "https://stackoverflow.com/questions/56046331/how-to-fix-suggest-parentheses-around-comparison-in-operand-of", "title": "How to fix suggest parentheses around comparison in operand of &#39;==&#39;", "body": "<p>I have a code like</p>\n\n<pre><code>if (config_atual[6]==config_atual[7]==config_atual[8] || \n    config_atual[1]==config_atual[4]==config_atual[7] || \n    config_atual[2]==config_atual[4]==config_atual[6])\n{\n   if (config_atual[7]=='X')\n       cout &lt;&lt; \"O Jogador ganhou!\" &lt;&lt; endl;\n   else if (config_atual[7]=='O')\n       cout &lt;&lt; \"O Computador ganhou!\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>about a tic-tac-toe game, and whenever I try to compile this line of code, which verifies three of the win conditions (assuming indexes 0,1,2 for first line, 3,4,5 for second and 6,7,8 for last) I get this warning :</p>\n\n<pre><code>suggest parentheses around comparison in operand of '==' [-Wparentheses]\n</code></pre>\n\n<p>Which I don't understand. What I am doing wrong, <code>config_atual</code> is a char array that contains the present configuration of the playing board.</p>\n\n<p>What does this warning mean, and how can I correct it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557337155, "post_id": 56046268, "comment_id": 98734127, "body": "Don&#39;t use the constructor body to initialize members. Use the initialization list."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1557337209, "post_id": 56046268, "comment_id": 98734155, "body": "Did you <code>#include &lt;string&gt;</code> in User.h?"}, {"owner": {"reputation": 3, "user_id": 11471559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqOf-LIxJow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_JlbkTp3EdVTEu6DkGpiFHLdj8g/mo/photo.jpg?sz=128", "display_name": "Surge", "link": "https://stackoverflow.com/users/11471559/surge"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1557337316, "post_id": 56046268, "comment_id": 98734206, "body": "@Fran&#231;oisAndrieux yes it has #ifndef USER_H, #define USER_H, #include &lt;string&gt;"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 5, "creation_date": 1557337320, "post_id": 56046268, "comment_id": 98734208, "body": "<a href=\"https://wandbox.org/permlink/AJOA2ettRFAnm872\" rel=\"nofollow noreferrer\">cannot reproduce</a> (after fixing includes and <code>string</code> vs <code>std::string</code>) please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557337370, "post_id": 56046268, "comment_id": 98734227, "body": "<a href=\"http://coliru.stacked-crooked.com/a/2a82fa6ea8a30472\" rel=\"nofollow noreferrer\">No repro</a>"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1557337778, "post_id": 56046268, "comment_id": 98734432, "body": "I don&#39;t see any <code>#include</code> lines above. So this is not testable as is. Can you make sure the above represents exactly your problem (I should be able to copy and past the code above into files and do <code>g++ User.cpp</code>). If I have to make assumptions then I may be solving the wrong problem."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1557337403, "post_id": 56046358, "comment_id": 98734245, "body": "this would not explain the error OP reports, or OP reports the wrong fragment of the full error message"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1557337419, "post_id": 56046358, "comment_id": 98734263, "body": "This answer is incomplete. Please explain what the cause of the problem is or how this solution fixes it."}, {"owner": {"reputation": 3, "user_id": 11471559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqOf-LIxJow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_JlbkTp3EdVTEu6DkGpiFHLdj8g/mo/photo.jpg?sz=128", "display_name": "Surge", "link": "https://stackoverflow.com/users/11471559/surge"}, "edited": false, "score": 0, "creation_date": 1557338378, "post_id": 56046358, "comment_id": 98734744, "body": "@Jucky Dettinger thank you that resolved that error. However now the compiler gives this error now. main.cpp:(.text+0xf8): undefined reference to `User::User(std::string, std::string, std::string, std::string, std::string)&#39;  And also to each of the functions"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3, "user_id": 11471559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqOf-LIxJow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_JlbkTp3EdVTEu6DkGpiFHLdj8g/mo/photo.jpg?sz=128", "display_name": "Surge", "link": "https://stackoverflow.com/users/11471559/surge"}, "edited": false, "score": 0, "creation_date": 1557338805, "post_id": 56046358, "comment_id": 98734949, "body": "@Surge That&#39;s why we&#39;re requiring a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> here. Do so next time asking please."}, {"owner": {"reputation": 18, "user_id": 10913910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ead3e781573a325c5390a094995e80?s=128&d=identicon&r=PG&f=1", "display_name": "Jucky Dettinger", "link": "https://stackoverflow.com/users/10913910/jucky-dettinger"}, "reply_to_user": {"reputation": 3, "user_id": 11471559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqOf-LIxJow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_JlbkTp3EdVTEu6DkGpiFHLdj8g/mo/photo.jpg?sz=128", "display_name": "Surge", "link": "https://stackoverflow.com/users/11471559/surge"}, "edited": false, "score": 0, "creation_date": 1557346580, "post_id": 56046358, "comment_id": 98738297, "body": "@Surge Now you have to define that function or else you&#39;ll keep getting that error. BTW if people want to downvote my answer for giving you the right answer, I could care less."}], "tags": [], "owner": {"reputation": 18, "user_id": 10913910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ead3e781573a325c5390a094995e80?s=128&d=identicon&r=PG&f=1", "display_name": "Jucky Dettinger", "link": "https://stackoverflow.com/users/10913910/jucky-dettinger"}, "is_accepted": true, "score": -4, "last_activity_date": 1557337362, "creation_date": 1557337362, "answer_id": 56046358, "question_id": 56046268, "link": "https://stackoverflow.com/questions/56046268/prototype-for-constructor-does-not-match-in-class/56046358#56046358", "title": "Prototype for constructor does not match in class", "body": "<p>Change:</p>\n\n<pre><code>User(string cUsername, string cPassword, string cEmail, string cFirstName, string cLastName);\n\nUser::User(string cUsername, string cPassword, string cEmail, string cFirstName, string cLastName) {\n\nusername = cUsername;\npassword = cPassword;\nemail = cEmail;\nfirstName = cFirstName;\nlastName = cLastName;   \n}\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>User(std::string cUsername, std::string cPassword, std::string cEmail, std::string cFirstName, std::string cLastName);\n\nUser::User(std::string cUsername, std::string cPassword, std::string cEmail, std::string cFirstName, std::string cLastName) {\n   username  = cUsername;\n   password  = cPassword;\n   email     = cEmail;\n   firstName = cFirstName;\n   lastName  = cLastName;   \n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11471559, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqOf-LIxJow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_JlbkTp3EdVTEu6DkGpiFHLdj8g/mo/photo.jpg?sz=128", "display_name": "Surge", "link": "https://stackoverflow.com/users/11471559/surge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 56046358, "answer_count": 1, "score": -2, "last_activity_date": 1557338711, "creation_date": 1557337026, "last_edit_date": 1557338711, "question_id": 56046268, "link": "https://stackoverflow.com/questions/56046268/prototype-for-constructor-does-not-match-in-class", "title": "Prototype for constructor does not match in class", "body": "<p>Hi there so I am very new to c++, and tried to make a simple program that takes in a few variables through the constructor, then some functions to change those values. However I am getting...</p>\n\n<blockquote>\n  <p>[Error] prototype for 'User::User(std::string, std::string, std::string, std::string, std::string)' does not match any in class 'User'.</p>\n</blockquote>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"User.h\"\nusing namespace std;\nint main() {\n\n// Simulates a current existing user\nUser u1(\"PizzaLover\", \"ilovepizza\", \"pizzaLover@gmail.com\", \"Tony\", \"Stark\");\n\n// Allows user to change their current username\nu1.changeUsername();\n\n// Allows user to change their current password\nu1.changePassword();\n\n// Allows user to change their current name\nu1.changeName();\n\n// Allows user to view their general account details\nu1.printUserDetails();\n\nreturn 0;\n</code></pre>\n\n<p>} </p>\n\n<p><strong>User.h</strong></p>\n\n<pre><code>#ifndef USER_H\n#define USER_H\n#include &lt;string&gt;\nclass User {\n\nprivate:\n    std::string username;\n    std::string password;\n    std::string email;\n    std::string firstName;\n    std::string lastName;\n\npublic:\n    User(string cUsername, string cPassword, string cEmail, string cFirstName, string cLastName);\n    void printUserDetails(); // this allows the user to view their account details\n    void changeUsername(); // this allows the user to change their username\n    void changePassword(); // this allows the user to change their password\n    void changeEmail(); // this allows the user to change their email\n    void changeName(); // this allows the user to change their name\n    };\n</code></pre>\n\n<p><strong>User.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string&gt;\n#include \"User.h\"\nusing namespace std;\nUser::User(string cUsername, string cPassword, string cEmail, string cFirstName, string cLastName) {\n\nusername = cUsername;\npassword = cPassword;\nemail = cEmail;\nfirstName = cFirstName;\nlastName = cLastName;   \n}\n\ncout &lt;&lt; endl;\ncout &lt;&lt; \"- - - - - - - - - - - - -\" &lt;&lt; endl;\ncout &lt;&lt; \"Username:\\t\" &lt;&lt; username &lt;&lt; endl;\ncout &lt;&lt; \"Password:\\t\" &lt;&lt; password &lt;&lt; endl;\ncout &lt;&lt; \"Email:\\t\" &lt;&lt; email &lt;&lt; endl;\ncout &lt;&lt; \"Name:\\t\" &lt;&lt; firstName &lt;&lt; \" \" &lt;&lt; lastName &lt;&lt; endl; \ncout &lt;&lt; \"- - - - - - - - - - - - -\" &lt;&lt; endl;\n}\n\nvoid User::changeUsername() {\n\nstring newUserName;\n\ncout &lt;&lt; endl;\ncout &lt;&lt; \"Your current username is: \" &lt;&lt; username &lt;&lt; endl;\ncout &lt;&lt; \"Please input your new desired username: \";\ncin &gt;&gt; newUserName;\n\nif(username != newUserName) {\n\n    username = newUserName;\n    cout &lt;&lt; \"Your username has been successfully changed.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Your new username is now: \" &lt;&lt; username &lt;&lt; endl;\n}\n\nelse {\n    cout &lt;&lt; \"Your name is already set to that, next time try a new name.\" &lt;&lt; \nendl;\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "wxwidgets"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 6, "creation_date": 1557336812, "post_id": 56046142, "comment_id": 98733945, "body": "Debugger.  Use a debugger.  A debugger will help you step through your program and allows you to <i>watch</i> values in variables.  Often, using a debugger is faster than posting to StackOverflow and waiting for somebody to inspect or debug your program for you."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1557336915, "post_id": 56046142, "comment_id": 98733997, "body": "If you are allergic to debuggers, you may want to implement a <i>log file</i>.  Open a file and print to it at various points in your program (printing to the console with a windowing program is a little more difficult).  You may want to prefix the log messages with a time stamp."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1557337054, "post_id": 56046142, "comment_id": 98734076, "body": "I recommend using nested <code>switch</code> statements.  IMHO, processing menu selections with <code>switch</code> is more readable.  Easy to read programs have fewer defects."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1557337279, "post_id": 56046142, "comment_id": 98734193, "body": "When the User selects the menu item <code>New Game</code>, the framework calls <code>FenRPS::newGame</code>.  Your <code>newGame()</code> method sets the text in a label and returns, <i>nothing else happens</i>."}, {"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "edited": false, "score": 1, "creation_date": 1557337836, "post_id": 56046142, "comment_id": 98734466, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\">What is a debugger and how can it help me diagnose problems?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 0, "last_activity_date": 1557337604, "creation_date": 1557337604, "answer_id": 56046415, "question_id": 56046142, "link": "https://stackoverflow.com/questions/56046142/how-to-fix-my-non-starting-little-game-app/56046415#56046415", "title": "How to fix my non-starting little game app?", "body": "<p>You need to move the game playing code out of the <code>wxFrame</code> constructor and into the <code>newGame()</code> event handler.  </p>\n\n<p>The <code>wxFrame</code> constructor is called once, when creating the window (frame).  The primary purpose of this constructor is to place all the widgets and initialize them.  </p>\n\n<p>When the User selects \"New Game\" from the Menu, the Menu object sends out an event.  Your <code>newGame()</code> method is set up to receive this event.  Thus, your program should have code in this method to create and and start a new game.</p>\n"}], "owner": {"reputation": 3, "user_id": 11471454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cS9jlS5IYYA/AAAAAAAAAAI/AAAAAAAAABE/ZxeWWy4yezw/photo.jpg?sz=128", "display_name": "Benval", "link": "https://stackoverflow.com/users/11471454/benval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1557338917, "accepted_answer_id": 56046415, "answer_count": 1, "score": -2, "last_activity_date": 1557337604, "creation_date": 1557336515, "question_id": 56046142, "link": "https://stackoverflow.com/questions/56046142/how-to-fix-my-non-starting-little-game-app", "closed_reason": "Needs details or clarity", "title": "How to fix my non-starting little game app?", "body": "<p>I have to do a little game for my school, and I'm stuck in my program. When I launch the app it's working fine, but when I want to start a new game by the menubar, it says that the game is starting, but it isn't. I think the program is stuck in my FenRPS::newGame() function, but I don't know how to fix it.</p>\n\n<pre><code>FenRPS::FenRPS() : wxFrame( NULL, wxID_ANY, \"Rock\u2013paper\u2013scissors\", \nwxDefaultPosition, wxSize(607,650), wxCAPTION|wxCLOSE_BOX|wxCLIP_CHILDREN )\n{\n  this-&gt;SetBackgroundColour( wxColor( 240,240,240 ));\n  this-&gt;SetIcon( wxIcon( AppRPS::Icone_xpm ));\n\n  //================ MENU ================\n  wxMenuItem*  item;\n\n  #define Item( menu, fctEvenement, texte, aide )                  \\\n      item = menu-&gt;Append( wxID_ANY, texte, aide );                \\\n      menu-&gt;Bind( wxEVT_MENU, fctEvenement, this, item-&gt;GetId() );\n  #define Separateur( menu )    menu-&gt;AppendSeparator();\n\n  menuGame = new wxMenu;\n    Item( menuGame, newGame, \"&amp;New Game\", \"Create a new game\" );\n    Separateur( menuGame );\n    Item( menuGame, exit, \"Exit\", \"Exit the game\" );\n  menuAbout = new wxMenu;\n    Item( menuAbout, about, \"&amp;About\", \"Display app informations\" );\n\n  menuBar = new wxMenuBar;\n  menuBar-&gt;Append( menuGame, \"&amp;Game\" );\n  menuBar-&gt;Append( menuAbout, \"&amp;About\" );\n  this-&gt;SetMenuBar( menuBar );\n\n  //=============== BOUTONS ==============\n  rock_png = new wxStaticBitmap(this, wxID_ANY, wxBitmap(\"img/rock.png\", \nwxBITMAP_TYPE_PNG), wxPoint(54,400), wxSize(128,128));\n    buttonRock.Create( this, wxID_ANY, \"R O C K\", wxPoint(54,538), wxSize(128,50));\n    buttonRock.Bind( wxEVT_BUTTON, playedRock, this );\n  paper_png = new wxStaticBitmap(this, wxID_ANY, \nwxBitmap(\"img/paper.png\", wxBITMAP_TYPE_PNG), wxPoint(236,400), wxSize(128,128));\n    buttonPaper.Create( this, wxID_ANY, \"P A P E R\", wxPoint(236,538), wxSize(128,50));\n    buttonPaper.Bind( wxEVT_BUTTON, playedPaper, this );\n  scissors_png = new wxStaticBitmap(this, wxID_ANY, \nwxBitmap(\"img/scissors.png\", wxBITMAP_TYPE_PNG), wxPoint(418,400), wxSize(128,128));\n    buttonScissors.Create( this, wxID_ANY, \"S C I S S O R S\", wxPoint(418,538), wxSize(128,50));\n    buttonScissors.Bind( wxEVT_BUTTON, playedScissors, this );\n\n  stTextBox = new wxStaticText;\n stTextBox-&gt;Create( this, wxID_ANY, \"\\nWelcome in the Rock-Paper-Scissors game\\n\\n\\n\\nNo game is in progress\", wxPoint(10,10), wxSize(580,364), wxALIGN_CENTRE_HORIZONTAL);\n  stTextBox-&gt;SetBackgroundColour( *wxLIGHT_GREY );\n  stTextBox-&gt;SetFont( wxFont( wxFontInfo(12).FaceName(\"Arial\").Bold()));\n\n  if( hasPlayed )\n  {\n    srand(time(0));\n    choiceBot = (rand()%3)+1;\n    message &lt;&lt; \"Round n\u00b0\" &lt;&lt; nbrRound &lt;&lt; \"\\n\";\n    stTextBox-&gt;SetLabel( message );\n\n    if (choicePlayer == 1 &amp;&amp; choiceBot == 1) message &lt;&lt; message &lt;&lt; \"Equality\\n\\n\\n\";\n   else if (choicePlayer == 1 &amp;&amp; choiceBot == 2)\n   {\n        message &lt;&lt; message &lt;&lt; \"Round lost, the bot has made 'paper'\\n\\n\\n\";\n    scoreBot++;\n}\nelse if (choicePlayer == 1 &amp;&amp; choiceBot == 3)\n{\n    message &lt;&lt; message &lt;&lt; \"Round win, the bot had made 'scissors'\\n\\n\\n\";\n    scorePlayer++;\n}\nelse if (choicePlayer == 2 &amp;&amp; choiceBot == 1)\n{\n    message &lt;&lt; message &lt;&lt; \"Round win, the bot had made 'rock'\\n\\n\\n\";\n    scorePlayer++;\n}\nelse if (choicePlayer == 2 &amp;&amp; choiceBot == 2) message &lt;&lt; message &lt;&lt; \"Equality\\n\\n\\n\";\nelse if (choicePlayer == 2 &amp;&amp; choiceBot == 3)\n{\n    message &lt;&lt; message &lt;&lt; \"Round lost, the bot has made 'scissors'\\n\\n\\n\";\n    scoreBot++;\n}\nelse if (choicePlayer == 3 &amp;&amp; choiceBot == 1)\n{\n    message &lt;&lt; message &lt;&lt; \"Round lost, the bot has made 'rock'\\n\\n\\n\";\n    scoreBot++;\n}\nelse if (choicePlayer == 3 &amp;&amp; choiceBot == 2)\n{\n    message &lt;&lt; message &lt;&lt; \"Round win, the bot had made 'paper'\\n\\n\\n\";\n    scorePlayer++;\n}\nelse if (choicePlayer == 3 &amp;&amp; choiceBot == 3) message &lt;&lt; message &lt;&lt; \"Equality\\n\\n\\n\";\nstTextBox-&gt;SetLabel( message );\nnbrRound++;\nhasPlayed = false;\n}\n\n  if( nbrRound &gt; 5 )\n  {\n    message &lt;&lt; \"The game is over\\n\\n\"\n        &lt;&lt; \"Score :\\n\"\n        &lt;&lt; \"&gt;&gt; Player     : \" &lt;&lt; scorePlayer\n        &lt;&lt; \"\\n&gt;&gt; Computer : \" &lt;&lt; scoreBot;\nif (scoreBot == scorePlayer)\n    message &lt;&lt; message &lt;&lt; \"Equality. Try again\\n\";\nelse if (scoreBot &gt; scorePlayer)\n    message &lt;&lt; message &lt;&lt; \"You lost, you'll be luckier next time\\n\";\nelse if (scorePlayer &gt; scoreBot)\n    message &lt;&lt; message &lt;&lt; \"You won, congratulations !\\n\";\nstTextBox-&gt;SetLabel( message );\nwxSleep(2);\n  }\n}\n\nFenRPS::~FenRPS() {}\n\nvoid FenRPS::playedRock( wxCommandEvent&amp; )     { choicePlayer = 1; hasPlayed = true; }\nvoid FenRPS::playedPaper( wxCommandEvent&amp; )    { choicePlayer = 2; hasPlayed = true; }\nvoid FenRPS::playedScissors( wxCommandEvent&amp; ) { choicePlayer = 3; hasPlayed = true; }\nvoid FenRPS::newGame( wxCommandEvent&amp; )\n{\n  stTextBox-&gt;SetLabel( \"\\nThe game is starting...\" );\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "loops"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1557336614, "post_id": 56046134, "comment_id": 98733851, "body": "You are missing parts of the code. Also, have you stepped through this in your debugger to see what is happening for yourself?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1557336640, "post_id": 56046134, "comment_id": 98733863, "body": "Put <code>circuit = line[num]</code> in the while loop"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1557338149, "post_id": 56046134, "comment_id": 98734631, "body": "<code>circuit = line[num];</code> is a one time assignment. It does <i>not</i> establish a <i>relationship</i> between <code>circuit</code> and <code>line[num]</code>. So when you update <code>line</code> or <code>num</code> later, that does <i>not</i> change <code>circuit</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1557339371, "post_id": 56046134, "comment_id": 98735220, "body": "Create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 0, "last_activity_date": 1557337078, "last_edit_date": 1557337078, "creation_date": 1557336666, "answer_id": 56046186, "question_id": 56046134, "link": "https://stackoverflow.com/questions/56046134/my-c-array-value-dont-want-to-change-it-output-infinite-loop/56046186#56046186", "title": "My c++ array value don&#39;t want to change, it output infinite loop", "body": "<p>In your loop, you never update <code>circuit</code>. So it will forever loop with the same character and execute the same if-branch ! </p>\n\n<p>It\u2019s not either clear if <code>num</code> is initialized somewhere. Furthermore, it\u2019s not clear how you\u2019ll find the end of your array. </p>\n\n<p>So better make line a <code>string</code> and consider a loop like:</p>\n\n<pre><code>for (int i=0; num&lt;line.size(); i++) {\n    circuit=line[i];\n    ...\n}\n</code></pre>\n\n<p>And please do not go backward in the index: so i for exploring the chars and num for the sum</p>\n"}, {"tags": [], "owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "is_accepted": true, "score": 0, "last_activity_date": 1557336768, "creation_date": 1557336768, "answer_id": 56046208, "question_id": 56046134, "link": "https://stackoverflow.com/questions/56046134/my-c-array-value-dont-want-to-change-it-output-infinite-loop/56046208#56046208", "title": "My c++ array value don&#39;t want to change, it output infinite loop", "body": "<p>You declare <code>circuit = line[num];</code> and then update num but you don't change the value of circuit which is already defined. In your if statements you can do <code>circuit = line[num++];</code>, do </p>\n\n<pre><code>num++;\ncircuit = curcuit[num]\n</code></pre>\n\n<p>Or keep what you have and put curcuit = curcuit[num] at the very top of your while loop before any of the conditionals are met. </p>\n\n<p>`</p>\n"}], "owner": {"reputation": 63, "user_id": 11286365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2506ec55b577a12b0b17cc29e699f65b?s=128&d=identicon&r=PG", "display_name": "Enchant3d", "link": "https://stackoverflow.com/users/11286365/enchant3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 56046208, "answer_count": 2, "score": -1, "last_activity_date": 1557337078, "creation_date": 1557336464, "question_id": 56046134, "link": "https://stackoverflow.com/questions/56046134/my-c-array-value-dont-want-to-change-it-output-infinite-loop", "title": "My c++ array value don&#39;t want to change, it output infinite loop", "body": "<p>Normally, if line[num] is '>', it must add 1 to num to pass to the next character of the array and must output the corresponding character, but instead it infinitely output the sign '>'. Why?</p>\n\n<pre><code>//part of the code\nline[] = {'&gt;', '&gt;', '#'};\ncircuit = line[num];\n    while(true)\n    {\n        if(circuit == '&gt;')\n        {\n            num++; //add 1 to num\n            cout &lt;&lt; circuit;\n\n        } else if(circuit == '&lt;')\n        {\n            num--; //substract 1 to num\n            cout &lt;&lt; circuit;\n\n        } else if(circuit == '#')\n        {\n            break;\n        }\n</code></pre>\n\n<p>also num is 0.</p>\n"}, {"tags": ["c++", "rust", "traits", "c++-concepts"], "comments": [{"owner": {"reputation": 53952, "user_id": 2408867, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/994y9.jpg?s=128&g=1", "display_name": "Lukas Kalbertodt", "link": "https://stackoverflow.com/users/2408867/lukas-kalbertodt"}, "edited": false, "score": 9, "creation_date": 1557335377, "post_id": 56045846, "comment_id": 98733227, "body": "To acknowledge this up front: I know this question is in danger of being closed as &quot;too broad&quot;. And if the vast majority of you think so, well so be it. <i>But</i>: I think the question is still fine for this site (it&#39;s a fairly specific question about two features) <i>and</i> I don&#39;t think it&#39;s useful to break this question into multiple sub-questions."}, {"owner": {"reputation": 53952, "user_id": 2408867, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/994y9.jpg?s=128&g=1", "display_name": "Lukas Kalbertodt", "link": "https://stackoverflow.com/users/2408867/lukas-kalbertodt"}, "edited": false, "score": 1, "creation_date": 1557336180, "post_id": 56045846, "comment_id": 98733625, "body": "To those casting &quot;too broad&quot; CVs in record time: could someone elaborate how you think this question could be asked in a better way? Some tips on what you would accept as a good question?"}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 3, "creation_date": 1557336410, "post_id": 56045846, "comment_id": 98733740, "body": "I was one of them and I think this kind of question is just not really constructive, cannot be answered properly and in general it does not fit SO&#39;s format very well.  I&#39;d like to see a detailed comparison of the above mentioned features of the two languages -- as an article somewhere perhaps, but not as a short answer.  I think @Shepmaster&#39;s <a href=\"https://meta.stackoverflow.com/questions/251328\">link</a> sums this up pretty well"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1557336484, "post_id": 56045846, "comment_id": 98733781, "body": "I voted to close because I don&#39;t think that questions like &quot;why is feature X in language Y like/different from feature A in language B&quot;  are good or worthwhile questions. We have different languages because different people have or like different ways of thinking about things."}, {"owner": {"reputation": 53952, "user_id": 2408867, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/994y9.jpg?s=128&g=1", "display_name": "Lukas Kalbertodt", "link": "https://stackoverflow.com/users/2408867/lukas-kalbertodt"}, "edited": false, "score": 2, "creation_date": 1557336551, "post_id": 56045846, "comment_id": 98733818, "body": "Thanks for your answers! @NeilButterworth Note that I didn&#39;t ask <i>why</i> they are different, though. I just asked for the factual differences."}, {"owner": {"reputation": 269539, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 4, "creation_date": 1557336584, "post_id": 56045846, "comment_id": 98733832, "body": "<i>how you think this question could be asked in a better way</i> \u2014 right now, it appears that any answerer would have to be quite expert in Rust and C++. For example, you off-handedly mention &quot;Rust&#39;s associated types and consts&quot;, but a C++ expert might not know all the details of such. This means that the pool of qualified people will be <i>very</i> small. It&#39;s possible that if you describe all the specifics of the technology you know, the question may be easier."}, {"owner": {"reputation": 269539, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 0, "creation_date": 1557337063, "post_id": 56045846, "comment_id": 98734082, "body": "Random responses from the web: <a href=\"https://news.ycombinator.com/item?id=9275597\" rel=\"nofollow noreferrer\">HN</a>; <a href=\"https://www.reddit.com/r/rust/comments/9jtzir/c_gets_concepts_aka_traits/\" rel=\"nofollow noreferrer\">Reddit</a>; <a href=\"https://users.rust-lang.org/t/how-to-design-good-concepts-and-use-them-well-c/9136?u=shepmaster\" rel=\"nofollow noreferrer\">URLO</a>"}, {"owner": {"reputation": 269539, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 9, "creation_date": 1557337432, "post_id": 56045846, "comment_id": 98734272, "body": "As a relevant parallel question, <a href=\"https://stackoverflow.com/q/28123453/155423\">What is the difference between traits in Rust and typeclasses in Haskell?</a> has a score of 130 at the moment and is relatively well viewed."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 269539, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 0, "creation_date": 1557348462, "post_id": 56045846, "comment_id": 98739114, "body": "@Shepmaster I think questions with a very small pool of people qualified to answer are probably the ones most in need of being asked and answered on a site like this."}, {"owner": {"reputation": 269539, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1557348894, "post_id": 56045846, "comment_id": 98739292, "body": "@KyleStrand note that I don\u2019t say <i>anything</i> about if the question is on topic or not. In fact, in another comment I provide evidence of similar questions that are apparently on topic and well-received. I also didn\u2019t vote to close. OP <b>asked</b> for ways to improve the question and that\u2019s what that comment is about. My own interactions with Lukas have shown me that they know about Rust; they can use that knowledge to \u201creach across\u201d to experienced C++ developers who don\u2019t have as deep of Rust knowledge and improve the chances of a good answer."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 269539, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 0, "creation_date": 1557349098, "post_id": 56045846, "comment_id": 98739375, "body": "@Shepmaster Yes, and I was a bit surprised by your comment immediately prior to mine, but now I understand the last sentence of your first comment better."}, {"owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 0, "creation_date": 1557349376, "post_id": 56045846, "comment_id": 98739466, "body": "I feel like there&#39;s a lot of baggage to the statement &quot;In Rust, the main tool for abstraction are traits&quot;. I assume you&#39;re using <i>abstraction</i> in a very narrow sense (obviously, functions, <code>for</code> loops, <code>struct</code>s and lifetimes are also abstractions) but I&#39;m not sure what specific kind of abstraction you&#39;re talking about, possibly because I also don&#39;t really understand C++ concepts so I don&#39;t understand in what context one would want to compare them."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1557937654, "post_id": 56045846, "comment_id": 98937059, "body": "What exactly do you mean when you say &quot;zero-overhead&quot; and &quot;zero cost&quot;? That is, which factors do you intend to be considered? Which should not be considered? For example, a C++ template can have a ton of space overhead, as each instantiation takes up space in the executable. An abstract class, on the other hand, permits code sharing, potentially reducing executable size. Does that mean space is not a concern for you? (Or, if &quot;zero&quot; is not that important, maybe drop those phrases from the question?)"}, {"owner": {"reputation": 53952, "user_id": 2408867, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/994y9.jpg?s=128&g=1", "display_name": "Lukas Kalbertodt", "link": "https://stackoverflow.com/users/2408867/lukas-kalbertodt"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1557938156, "post_id": 56045846, "comment_id": 98937293, "body": "@JaMiT I agree, mentioning those isn&#39;t really helpful. I edited the question to remove those."}], "answers": [{"comments": [{"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1557390859, "post_id": 56055342, "comment_id": 98751354, "body": "I have made this answer as exhaustive as possible; if there are any issues, please let me know."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 1, "creation_date": 1557391193, "post_id": 56055342, "comment_id": 98751557, "body": "&quot;Structural Typing is better a bridging 3rd party libraries&quot; - Only if the requirements are formulated in a way that the type can be adapted. If there&#39;s a requirement to be able to call a <code>read</code> member on a type, but the library only provides <code>Read</code>, there&#39;s very little you can do. The Rust <code>impl</code> blocks can adapt."}, {"owner": {"reputation": 53952, "user_id": 2408867, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/994y9.jpg?s=128&g=1", "display_name": "Lukas Kalbertodt", "link": "https://stackoverflow.com/users/2408867/lukas-kalbertodt"}, "edited": false, "score": 0, "creation_date": 1557391960, "post_id": 56055342, "comment_id": 98751977, "body": "I&#39;ve been wondering something else about C++ concepts, but I don&#39;t know if the question even makes sense or should be answered here. So Rust&#39;s trait solver is often described as &quot;basically Prolog&quot;. I wonder if some similar kind of logic needs to be done inside C++ compiler now or if concepts don&#39;t require that for some reason. Sorry again if this question is vague and maybe not useful."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 53952, "user_id": 2408867, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/994y9.jpg?s=128&g=1", "display_name": "Lukas Kalbertodt", "link": "https://stackoverflow.com/users/2408867/lukas-kalbertodt"}, "edited": false, "score": 1, "creation_date": 1557400673, "post_id": 56055342, "comment_id": 98756869, "body": "@LukasKalbertodt: There is no Hindley Milner type inference ongoing with C++ concepts; so no."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 1, "creation_date": 1557400816, "post_id": 56055342, "comment_id": 98756940, "body": "@SebastianRedl: Sure. However that&#39;s the difference between always needing an adapter struct (Rust) vs only needing an adapter struct to smooth away differences (C++). Furthermore, using free functions rather than member functions allows only needing to add one function (<code>read</code> here, which delegates to <code>Read</code>)."}, {"owner": {"reputation": 491, "user_id": 5282385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f909f7c0f578c26cc98852294a416cc?s=128&d=identicon&r=PG", "display_name": "Ralf Jung", "link": "https://stackoverflow.com/users/5282385/ralf-jung"}, "edited": false, "score": 1, "creation_date": 1557948214, "post_id": 56055342, "comment_id": 98941749, "body": "Is there anything in C++ that can be compared to other kinds of associated items, such as associated constants or associated types?"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 491, "user_id": 5282385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f909f7c0f578c26cc98852294a416cc?s=128&d=identicon&r=PG", "display_name": "Ralf Jung", "link": "https://stackoverflow.com/users/5282385/ralf-jung"}, "edited": false, "score": 2, "creation_date": 1557988368, "post_id": 56055342, "comment_id": 98951925, "body": "@RalfJung: In C++ this would static member variables (const ones) and nested typedefs or nested classes."}], "tags": [], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "is_accepted": false, "score": 27, "last_activity_date": 1557390821, "creation_date": 1557390821, "answer_id": 56055342, "question_id": 56045846, "link": "https://stackoverflow.com/questions/56045846/what-are-the-similarities-and-differences-between-cs-concepts-and-rusts-trai/56055342#56055342", "title": "What are the similarities and differences between C++&#39;s concepts and Rust&#39;s traits?", "body": "<p><em>Disclaimer: I have not yet used concepts, all I know about them was gleaned from the various proposals and cppreference, so take this answer with a grain of salt.</em></p>\n\n<h3>Run-Time Polymorphism</h3>\n\n<p>Rust Traits are used both for Compile-Time Polymorphism and, sometimes, Run-Time Polymorphism; Concepts are only about Compile-Time Polymorphism.</p>\n\n<h3>Structural vs Nominal.</h3>\n\n<p>The greatest difference between Concepts and Traits is that Concepts use <em>structural typing</em> whereas Traits use <em>nominal typing</em>:</p>\n\n<ul>\n<li>In C++ a type never explicitly satisfies a Concept; it may \"accidentally\" satisfy it if it happens to satisfy all requirements.</li>\n<li>In Rust a specific syntactic construct <code>impl Trait for Type</code> is used to explicitly indicates that a type implements a Trait.</li>\n</ul>\n\n<p>There are a number of consequences; in general Nominal Typing is better from a maintainability point of view -- adding a requirement to a Trait -- whereas Structural Typing is better a bridging 3rd party libraries -- a type from library A can satisfy a Concept from library B without them being aware of each other.</p>\n\n<h3>Constraints</h3>\n\n<p>Traits are mandatory:</p>\n\n<ul>\n<li>No method can be called on a variable of a generic type without this type being required to implement a trait providing the method.</li>\n</ul>\n\n<p>Concepts are entirely optional:</p>\n\n<ul>\n<li>A method can be called on a variable of a generic type without this type being required to satisfy any Concept, or being constrained in any way.</li>\n<li>A method can be called on a variable of a generic type satisfying a Concept (or several) without that method being specified by any Concept or Constraint.</li>\n<li>Constraints (see note) can be entirely ad-hoc, and specify requirements without using a named Concept; and once again, they are entirely optional.</li>\n</ul>\n\n<p><em>Note: a Constraint is introduced by a <code>requires</code> clause and specifies either ad-hoc requirements or requirements based on Concepts.</em></p>\n\n<h3>Requirements</h3>\n\n<p>The set of expressible requirements is different:</p>\n\n<ul>\n<li>Concepts/Constraints work by substitution, so allow the whole breadth of the languages; requirements include: nested types/constants/variables, methods, fields, ability to be used as an argument of another function/method, ability to used as a generic argument of another type, and combinations thereof.</li>\n<li>Traits, by contrast, only allow a small set of requirements: associated types/constants, and methods.</li>\n</ul>\n\n<h3>Overload Selection</h3>\n\n<p>Rust has no concept of ad-hoc overloading, overloading only occurs by Traits and specialization is not possible yet.</p>\n\n<p>C++ Constraints can be used to \"order\" overloads from least specific to most specific, so the compiler can automatically select the most specific overload for which requirements are satisfied.</p>\n\n<p><em>Note: prior to this, either SFINAE or tag-dispatching would be used in C++ to achieve the selection; calisthenics were required to work with open-ended overload sets.</em></p>\n\n<h3>Disjunction</h3>\n\n<p><em>How to use this feature is not quite clear to me yet.</em></p>\n\n<p>The requirement mechanisms in Rust are purely additive (conjunctions, aka <code>&amp;&amp;</code>), in contrast, in C++ <code>requires</code> clauses can contain disjunctions (aka <code>||</code>).</p>\n"}], "owner": {"reputation": 53952, "user_id": 2408867, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/994y9.jpg?s=128&g=1", "display_name": "Lukas Kalbertodt", "link": "https://stackoverflow.com/users/2408867/lukas-kalbertodt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3384, "favorite_count": 10, "answer_count": 1, "score": 47, "last_activity_date": 1557938106, "creation_date": 1557335372, "last_edit_date": 1557938106, "question_id": 56045846, "link": "https://stackoverflow.com/questions/56045846/what-are-the-similarities-and-differences-between-cs-concepts-and-rusts-trai", "title": "What are the similarities and differences between C++&#39;s concepts and Rust&#39;s traits?", "body": "<p>In Rust, the main tool for abstraction are <em>traits</em>. In C++, there are two tools for abstractions: abstract classes and templates. To get rid of some of the disadvantages of using templates (e.g. hard to read error messages), C++ introduced <em>concepts</em> which are <a href=\"https://en.cppreference.com/w/cpp/language/constraints\" rel=\"noreferrer\">\"named sets of requirements\"</a>. </p>\n\n<p>Both features <em>seem</em> to be fairly similar: </p>\n\n<ul>\n<li>Defining a trait/concept is done by listing requirements. </li>\n<li>Both can be used to bound/restrict generic/template type parameters.</li>\n<li>Rust traits and C++ templates with concepts are both monomorphized (I know Rust traits can also be used with dynamic dispatch, but that's a different story). </li>\n</ul>\n\n<p>But from what I understand, there are also notable differences. For example, C++'s concepts seem to define a set of expressions that have to be valid instead of listing function signatures. But there is a lot of different and confusing information out there (maybe because concepts only land in C++20?). That's why I'd like to know: <strong>what exactly are the differences between and the similarities of C++'s concepts and Rust's traits?</strong></p>\n\n<p>Are there features that are only offered by either concepts or traits? E.g. what about Rust's associated types and consts? Or bounding a type by multiple traits/concepts? </p>\n"}, {"tags": ["c++", "plugins", "streaming", "point-clouds", "paraview"], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 4051271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UL3ic.png?s=128&g=1", "display_name": "Bastien Jacquet", "link": "https://stackoverflow.com/users/4051271/bastien-jacquet"}, "is_accepted": false, "score": 0, "last_activity_date": 1557731529, "last_edit_date": 1557731529, "creation_date": 1557396933, "answer_id": 56057173, "question_id": 56045793, "link": "https://stackoverflow.com/questions/56045793/paraview-live-point-cloud-visualization-plugin/56057173#56057173", "title": "ParaView: Live point cloud visualization plugin", "body": "<p>In the code of <a href=\"https://github.com/Kitware/VeloView\" rel=\"nofollow noreferrer\">VeloView</a> (which basically is a bundled ParaView+LidarPlugin), the timesteps of ParaView is changed by the main code, not the Lidar Plugin.\nWe advice you to start from VeloView code, which is much closer to your goal.\nIf you really want to start from scratch within ParaView, you need to increment this requested timestep yourself.</p>\n\n<p>Newest version of VeloView (unreleased) uses the same mechanism as ParaView \u201cLiveSource\u201d plugin (available in 5.6+), where the plugin tells ParaView to set a QtTimer that will automatically increment the available and requested timesteps.</p>\n\n<p><code>request-&gt;Set(vtkStreamingDemandDrivenPipeline::CONTINUE_EXECUTING(), 1);</code> relates to another mechanism that will run request Data multiple time, but won\u2019t take care of updating the requested timestep.</p>\n\n<p>Best,</p>\n\n<p>Bastien Jacquet</p>\n\n<p>VeloView project leader</p>\n"}], "owner": {"reputation": 26, "user_id": 5382328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8acc0b123dc6c102066e05d356e98445?s=128&d=identicon&r=PG&f=1", "display_name": "jared ", "link": "https://stackoverflow.com/users/5382328/jared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557731529, "creation_date": 1557335193, "question_id": 56045793, "link": "https://stackoverflow.com/questions/56045793/paraview-live-point-cloud-visualization-plugin", "title": "ParaView: Live point cloud visualization plugin", "body": "<p>I am writing a ParaView version 5.1.2 plugin in C++ to visualize point cloud data produced by a LiDAR sensor. I noticed that Velodyne has an open source ParaView custom application to visualize their LiDAR data called Veloview. I tweaked some of their code to start but I am stuck now.</p>\n\n<p>So far I wrote a reader that takes a pcap file and renders a point cloud that can be played back frame by frame. I also wrote a ParaView source that listens on a port and captures udp packets and after they are captured uses the reader to split them into frames and visualize the PC. </p>\n\n<p>Now I would like to take live udp packets and render the point cloud in real time as each frame is completed.</p>\n\n<p>I am having trouble accomplishing this because of the ParaView plugin structure. Currently, my reader displays a frame when the method RequestData is called. My method looks something like this.</p>\n\n<pre><code>int RequestData(vtkInformation *request, vtkInformationVector **inputVector, vtkInformationVector *outputVector){\n\nvtkPolyData* output = vtkPolyData::GetData(outputVector);\n  vtkInformation* info = outputVector-&gt;GetInformationObject(0);\n\n  int timestep = 0;\n\n  if (info-&gt;Has(vtkStreamingDemandDrivenPipeline::UPDATE_TIME_STEP()))\n  {\n    double timeRequest = info-&gt;Get(vtkStreamingDemandDrivenPipeline::UPDATE_TIME_STEP());\n    int length = info-&gt;Length(vtkStreamingDemandDrivenPipeline::TIME_STEPS());\n\n    timestep = static_cast&lt;int&gt;(floor(timeRequest + 0.5));\n  }\n\n  this-&gt;Open();\n\n  // GetFrame returns a vtkSmartPointer&lt;vtkPolyData&gt; that is the frame\n  output-&gt;ShallowCopy(this-&gt;GetFrame(timestep));\n\n  this-&gt;Close();\n\n  return 1;\n}\n</code></pre>\n\n<p>The RequestData method is called every time the timestep is updated in the ParaView gui. Then the frame from that timestep is copied into the outputVector. </p>\n\n<p>I am not sure how to implement this with live data because in that circumstance the RequestData method is not called because no timesteps are requested. I saw there is a way to keep RequestData executing by using CONTINUE_EXECUTING() in this way.</p>\n\n<pre><code>request-&gt;Set(vtkStreamingDemandDrivenPipeline::CONTINUE_EXECUTING(), 1);\n</code></pre>\n\n<p>But I do not know if that is supposed to be used to visualize live data.</p>\n\n<p>For now I am interested in simply reading live packets and throwing them away as soon as their frame is rendered. Does anyone know how I can achieve this?</p>\n"}, {"tags": ["c++", "c++11", "preprocessor", "preprocessor-directive"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1557335260, "post_id": 56045652, "comment_id": 98733163, "body": "1. <code>CAT_2</code> and <code>_helper</code> are never used. 2. <code>#define delete</code> makes the program ill-formed; defining keywords as macro names is not allowed."}, {"owner": {"reputation": 1492, "user_id": 1163149, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/e82699a9bc7b3d16633237a8f261ec84?s=128&d=identicon&r=PG", "display_name": "lufthansa747", "link": "https://stackoverflow.com/users/1163149/lufthansa747"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1557335709, "post_id": 56045652, "comment_id": 98733373, "body": "I know it is technically against the standard but is there a hack i can do to get it to work? Lets assume removing the #define delete is not possible"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1557335822, "post_id": 56045652, "comment_id": 98733428, "body": "Looks like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> to me. Why do you need this?"}, {"owner": {"reputation": 1492, "user_id": 1163149, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/e82699a9bc7b3d16633237a8f261ec84?s=128&d=identicon&r=PG", "display_name": "lufthansa747", "link": "https://stackoverflow.com/users/1163149/lufthansa747"}, "edited": false, "score": 0, "creation_date": 1557336122, "post_id": 56045652, "comment_id": 98733587, "body": "updated to hopefully address your concern"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1557340862, "post_id": 56045652, "comment_id": 98735876, "body": "&quot;<i>I realize removing the &quot;#define delete&quot; would solve the problem but I need this define there</i>&quot; - why? Is there a reason you are not simply overloading the <a href=\"https://en.cppreference.com/w/cpp/memory/new/operator_new\" rel=\"nofollow noreferrer\">new operator</a> and <a href=\"https://en.cppreference.com/w/cpp/memory/new/operator_delete\" rel=\"nofollow noreferrer\">delete operator</a> instead?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1557342782, "post_id": 56045652, "comment_id": 98736698, "body": "@RemyLebeau I assume the reason is that once inside <code>operator delete</code>, you no longer have access to the source file &amp; line where the <code>delete</code> expression is."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1557343037, "post_id": 56045652, "comment_id": 98736828, "body": "@Angew probably so, though that can be solved by having the operator extract the return address from the call stack and then compare that to the compiler&#39;s debug output to figure out the source file and line number."}, {"owner": {"reputation": 1492, "user_id": 1163149, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/e82699a9bc7b3d16633237a8f261ec84?s=128&d=identicon&r=PG", "display_name": "lufthansa747", "link": "https://stackoverflow.com/users/1163149/lufthansa747"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1599716048, "post_id": 56045652, "comment_id": 112860246, "body": "@RemyLebeau sorry for the late response but your assumption is correct. The issue with the solution you propose is that I cant have the file and line number print out during the execution. I have a setup such that when i shutdown my program it runs my memory leak checker and if it finds any leaks prints out the file/line number of the new call. I have already overloaded the new/delete operator to take in file/line number, I use the macro to ensure the user doesn&#39;t have to add <b>LINE</b>, <b>FILE</b> to every new/delete call"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1599717401, "post_id": 56045652, "comment_id": 112860674, "body": "@lufthansa747 &quot;<i>The issue with the solution you propose is that I cant have the file and line number print out during the execution.</i>&quot; - you can, if your compiler saves the debug info in a file that you can load at runtime."}, {"owner": {"reputation": 1492, "user_id": 1163149, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/e82699a9bc7b3d16633237a8f261ec84?s=128&d=identicon&r=PG", "display_name": "lufthansa747", "link": "https://stackoverflow.com/users/1163149/lufthansa747"}, "edited": false, "score": 0, "creation_date": 1599718324, "post_id": 56045652, "comment_id": 112860951, "body": "fair, was trying to avoid that type of solution. But its a valid approach. The macro approach seemed a little cleaner and easier to me"}], "answers": [{"comments": [{"owner": {"reputation": 3728, "user_id": 152043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7fe904771aa932cb3ab37553916c45?s=128&d=identicon&r=PG", "display_name": "Michael Speer", "link": "https://stackoverflow.com/users/152043/michael-speer"}, "edited": false, "score": 1, "creation_date": 1557337372, "post_id": 56046102, "comment_id": 98734230, "body": "macros that include their own name do not reexpand it on their own. they&#39;re doing it here because he passes it through a number of other macro expansions in the nested CATs. his macro doesn&#39;t expand to &quot;ThisShouldNotshowUp&quot;, but &quot;MyCustomDelete(&quot;main.c&quot;, 10), delete&quot;. if the macro had been &quot;#define delete delete&quot; it would not loop in any way, and would just leave &quot;delete&quot;. He certainly can&#39;t special case a token macro to expand differently however. If he were using a function like macro, something might be possible, but that wouldn&#39;t capture the array deletes"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 3728, "user_id": 152043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7fe904771aa932cb3ab37553916c45?s=128&d=identicon&r=PG", "display_name": "Michael Speer", "link": "https://stackoverflow.com/users/152043/michael-speer"}, "edited": false, "score": 0, "creation_date": 1557337608, "post_id": 56046102, "comment_id": 98734353, "body": "@MichaelSpeer Even this <code>delete</code> does not re-expand; the problem is not in any looping, it&#39;s in <code>MyCustomDelete</code> not being syntactically valid where <code>delete</code> is used to mark a function deleted."}, {"owner": {"reputation": 3728, "user_id": 152043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7fe904771aa932cb3ab37553916c45?s=128&d=identicon&r=PG", "display_name": "Michael Speer", "link": "https://stackoverflow.com/users/152043/michael-speer"}, "edited": false, "score": 0, "creation_date": 1557338196, "post_id": 56046102, "comment_id": 98734659, "body": "Most definitely. I just wanted to ensure that the information on how macros expand was accurate."}], "tags": [], "owner": {"reputation": 3183, "user_id": 3025453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecaade2979d70e6fa61d1f8bca6f27e1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Karcher", "link": "https://stackoverflow.com/users/3025453/michael-karcher"}, "is_accepted": false, "score": 6, "last_activity_date": 1557336337, "creation_date": 1557336337, "answer_id": 56046102, "question_id": 56045652, "link": "https://stackoverflow.com/questions/56045652/c-stop-preprocessor-macro-expansion/56046102#56046102", "title": "C++ Stop Preprocessor Macro Expansion", "body": "<p>You have no chance in creating a preprocessing token that is the name of an object-like macro from expanding a macro. The relevant section of n3337 is <code>[cpp.rescan]</code>. I quote a shortened part of the first paragraph in it.</p>\n\n<blockquote>\n  <p>After all parameters in the replacement list have been substituted and <code>#</code> and <code>##</code> processing has taken place [...]. Then the resulting preprocessing token sequence is rescanned [...] for more macro names to replace.</p>\n</blockquote>\n\n<p>Nonwithstanding the problem, that <code>delete</code> is technically forbidden to be a macro name, there is no way to prevent the macro name to be recognized while rescanning.</p>\n\n<p>You probably mixed up the fact that <code>##</code> operator does use it's <em>parameters</em> without expansion with the idea that the <em>result</em> of <code>##</code> doesn't undergo macro expansion.</p>\n"}, {"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 3, "last_activity_date": 1557336904, "creation_date": 1557336904, "answer_id": 56046240, "question_id": 56045652, "link": "https://stackoverflow.com/questions/56045652/c-stop-preprocessor-macro-expansion/56046240#56046240", "title": "C++ Stop Preprocessor Macro Expansion", "body": "<p>What you're trying to do is not possible, as <a href=\"https://stackoverflow.com/a/56046102/1782465\">Michael Karcher's answer</a> states: <code>#define delete</code> already makes the program ill-formed, and expanding an object-like macro (outside its own expansion) cannot be avoided.</p>\n\n<p>However, for your particular use case detailed in the question, a workaround is possible. You could put your <code>#define delete</code> into a header file (let's call it <code>debug_delete.hxx</code>), like this:</p>\n\n<pre><code>#ifdef delete\n# undef delete\n#endif\n#define delete MyCustomDelete(__FILE__, __LINE__), delete\n</code></pre>\n\n<p>Then, create another header file (let's call it <code>normal_delete.hxx</code>):</p>\n\n<pre><code>#ifdef delete\n# undef delete\n#endif\n</code></pre>\n\n<p>Note in particular that there is no mechanism in these headers to prevent multiple inclusion; in fact, we want them includable an arbitrary number of times.</p>\n\n<p>Then, wrap code which must use <code>= delete;</code> in appropriate <code>#include</code> directives:</p>\n\n<pre><code>class A {\n#include \"normal_delete.hxx\"\n    A() = delete;\n#include \"debug_delete.hxx\"\n    ~A() { delete p; }\n};\n</code></pre>\n\n<p>(Yes, it's ugly, but what you're doing is sort of ugly in the first place, so ugly code may be required to make it work).</p>\n"}, {"comments": [{"owner": {"reputation": 1492, "user_id": 1163149, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/e82699a9bc7b3d16633237a8f261ec84?s=128&d=identicon&r=PG", "display_name": "lufthansa747", "link": "https://stackoverflow.com/users/1163149/lufthansa747"}, "edited": false, "score": 1, "creation_date": 1557344941, "post_id": 56046523, "comment_id": 98737663, "body": "The issue with this is it require the coder to remember to use this delete macro"}], "tags": [], "owner": {"reputation": 3728, "user_id": 152043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7fe904771aa932cb3ab37553916c45?s=128&d=identicon&r=PG", "display_name": "Michael Speer", "link": "https://stackoverflow.com/users/152043/michael-speer"}, "is_accepted": false, "score": 0, "last_activity_date": 1557338076, "creation_date": 1557338076, "answer_id": 56046523, "question_id": 56045652, "link": "https://stackoverflow.com/questions/56045652/c-stop-preprocessor-macro-expansion/56046523#56046523", "title": "C++ Stop Preprocessor Macro Expansion", "body": "<p>Presumably you want to use a macro so you can turn on and off your delete tracking. If you're only using this on your source, and not trying to rig it up to transform existing C++, you could use a function-like macro in order to effect the optional tracking that you desire.</p>\n\n<pre><code>#define TRACK_DELETES 0\n#if TRACK_DELETES\n  #define DELETE( a ) \\\n    do { MyCustomDelete( __FILE__, __LINE__ ); delete (a); } while (0)\n  #define DELETEALL( a ) \\\n    do { MyCustomDelete( __FILE__, __LINE__ ); delete [] (a); } while (0)\n#else\n  #define DELETE( a ) do { delete (a) ; } while(0)\n  #define DELETEALL( a ) do { delete [] (a) ; } while(0)\n#endif\n\nint main(){\n\n  DELETE( A );\n  DELETEALL( B );\n\n  return 0;\n}\n</code></pre>\n\n<p>See if this does what you want with TRACK_DELETES set to 0 or 1 under <code>gcc -E</code>.</p>\n\n<p>You'll want to leave the bare <code>delete</code> keyword alone so it can be used appropriately.</p>\n"}], "owner": {"reputation": 1492, "user_id": 1163149, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/e82699a9bc7b3d16633237a8f261ec84?s=128&d=identicon&r=PG", "display_name": "lufthansa747", "link": "https://stackoverflow.com/users/1163149/lufthansa747"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 0, "accepted_answer_id": 56046240, "answer_count": 3, "score": 6, "last_activity_date": 1557342361, "creation_date": 1557334659, "last_edit_date": 1557336097, "question_id": 56045652, "link": "https://stackoverflow.com/questions/56045652/c-stop-preprocessor-macro-expansion", "title": "C++ Stop Preprocessor Macro Expansion", "body": "<p>Here is my example code <a href=\"https://godbolt.org/z/VKgKik\" rel=\"nofollow noreferrer\">https://godbolt.org/z/VKgKik</a></p>\n\n<pre><code>#define delete MyCustomDelete(__FILE__, __LINE__), delete\n\n#define CAT(X,Y) CAT2(X,Y)\n#define CAT2(X,Y) X##Y\n#define CAT_3(X,Y,Z) CAT(X,CAT(Y,Z))    \n\n\nclass A {\n    A() = CAT_3(de,le,te);\n};\n</code></pre>\n\n<p>The godbolt example is setup to display the preprocessor output. The goal is that at the end of the preprocessor pass i want the output code to be</p>\n\n<pre><code>class A {\n    A() = delete;\n};\n</code></pre>\n\n<p>currently \"ThisShouldNotshowUp\" is displayed there instead. I thought the use of the ## operator would stop the preprocessor from reexpanding but it did not.</p>\n\n<p>I realize removing the \"#define delete\" would solve the problem but I need this define there. The reason I have created a macro with the same name as delete is because I want to be able to track the news and deletes, and If a memory leak occurs I can see what line of code aloced it. This macro thus means I can continue to use the keyword delete in my code and the File and line numbers get filled in for free. As far as i know there is no other way to achieve this functionailty except by defined a delete macro. This is the crux of the problem. The delete macro has given me a powerful debug tool however it has removed a useful language feature for me to use.</p>\n"}, {"tags": ["c++", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1557334909, "post_id": 56045613, "comment_id": 98732997, "body": "What is XS? What relationship does it have with X1...XN?"}, {"owner": {"reputation": 4897, "user_id": 1113997, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0b81915021f87732e45938efc6942947?s=128&d=identicon&r=PG", "display_name": "ghostrider", "link": "https://stackoverflow.com/users/1113997/ghostrider"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1557335114, "post_id": 56045613, "comment_id": 98733096, "body": "@MaxLanghof there can be None - what I want is to avoid having to add a template constructor with x1,x2,x3 - another one with x1,x2,x3,x4 etc"}], "answers": [{"tags": [], "owner": {"reputation": 14813, "user_id": 141502, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/zgvfq.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/141502/daniel"}, "is_accepted": false, "score": 8, "last_activity_date": 1557335155, "creation_date": 1557335155, "answer_id": 56045784, "question_id": 56045613, "link": "https://stackoverflow.com/questions/56045613/variadic-templates-in-c-11-and-class-constructors/56045784#56045784", "title": "Variadic templates in C++ 11 and class constructors", "body": "<p>You can't have a variadic number of fields d_x1, d_x2, ...; but that can be worked around by using <code>std::tuple</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;memory&gt;\n#include &lt;tuple&gt;\n\ntemplate&lt; typename T, typename... XS &gt;\nclass MyClass\n{\n    std::shared_ptr&lt;T&gt; d_track;\n    std::tuple&lt;std::shared_ptr&lt;XS&gt;...&gt; d_xs;\npublic:\n\n    MyClass( std::shared_ptr&lt; T &gt; track ,\n             std::shared_ptr&lt; XS &gt;... xs ) ;\n};\n\ntemplate&lt; typename T, typename... XS &gt;\nMyClass&lt; T, XS... &gt;::MyClass( std::shared_ptr&lt; T &gt; track ,\n                              std::shared_ptr&lt; XS &gt;... xs)\n    : d_track( track ) , d_xs( xs... )\n{\n}\n</code></pre>\n"}], "owner": {"reputation": 4897, "user_id": 1113997, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0b81915021f87732e45938efc6942947?s=128&d=identicon&r=PG", "display_name": "ghostrider", "link": "https://stackoverflow.com/users/1113997/ghostrider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1557335157, "creation_date": 1557334529, "last_edit_date": 1557335157, "question_id": 56045613, "link": "https://stackoverflow.com/questions/56045613/variadic-templates-in-c-11-and-class-constructors", "title": "Variadic templates in C++ 11 and class constructors", "body": "<p>I am new to using C++ templates, in general and came across variadic templates and was wondering if there might be suitable for my need. </p>\n\n<p>I have this code and is working fine :</p>\n\n<pre><code>template&lt; typename T, typename X1, typename X2 &gt;\nclass MyClass\n{\n    public :\n\n    MyClass( std::shared_ptr&lt; T &gt; track ,\n             std::shared_ptr&lt; X1 &gt; x1   ,\n             std::shared_ptr&lt; X2 &gt; x2   ) ;\n}\n\ntemplate&lt; typename T, typename X1, typename X2 &gt;\nMyClass &lt; T,X1,X2 &gt;::MyClass( std::shared_ptr&lt; T &gt; track ,\n                              std::shared_ptr&lt; X1 &gt; x1   ,\n                              std::shared_ptr&lt; X2 &gt; x2   ) : d_track( track ) , d_x1( x1), d_x2( x2 )\n</code></pre>\n\n<p>but let's say I want to make it more generic - meaning that X1,X2 can be a random number - e.g. I can have X3 and X4. I want to avoid duplicating the  constructor for all different cases I might have as they are unknown as of yet - is variadic templates a solution to that? </p>\n\n<p>In draft code, what I mean is something like :</p>\n\n<pre><code>template&lt; typename T, typename... XS &gt;\nMyClass &lt; T,???? &gt;::MyClass( std::shared_ptr&lt; T &gt; track ,\n                              std::shared_ptr&lt; ?? &gt; x1   ,\n                              std::shared_ptr&lt; ?? &gt; x2   ,\n                              .......) : \n</code></pre>\n\n<p>But I don't know how to express the relationship between XS and all X1...XN so that in essence when I construct my class like I do now :</p>\n\n<pre><code>MyClass&lt; T, X1, X2 &gt; local(.....)\n</code></pre>\n\n<p>this will keep working, even when I pass X3,X4 etc.</p>\n\n<p>Not sure if that's possible though.</p>\n"}, {"tags": ["c++", "arrays", "stdcopy"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1557333874, "post_id": 56045325, "comment_id": 98732492, "body": "I&#39;d recommend you should use a <code>std::vector&lt;int&gt;</code> instead of raw pointers."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1557333975, "post_id": 56045325, "comment_id": 98732538, "body": "@yes It is unclear what you are trying to achieve in the while loop."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1557334134, "post_id": 56045325, "comment_id": 98732606, "body": "imagine you have a phone book full of addresses of houses.. except there aren&#39;t any houses built on those lots and you tell someone to go sleep in one of the bedrooms at that address.   Not going to get much sleep"}, {"owner": {"reputation": 1324, "user_id": 7231449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4GZN.jpg?s=128&g=1", "display_name": "acarlstein", "link": "https://stackoverflow.com/users/7231449/acarlstein"}, "edited": false, "score": 0, "creation_date": 1557337584, "post_id": 56045325, "comment_id": 98734338, "body": "You can use <code>vector&lt;int&gt; tab = { 1, 2, 3, 4, 5};</code>, <code>std::array&lt;int, 5&gt; tab = {1, 2, 3 , 4, 5};</code>, <code>int* tab = new int[5]{1, 2, 3, 4, 5};</code>. I would advice vectors so you can do <code>std::copy_n(tab.being(), index, tab1.begin());</code> or <code>std:copy(std::begin(tab), std::end(tab) + index, std::being(tab1));</code> or <code>std::copy_n(tab.being(), index, tab1.begin());</code> . After all, you are doing <code>C++</code>, not <code>C</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10749626, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2O57u356mSc/AAAAAAAAAAI/AAAAAAAAAGo/xmYWhWLoNz0/photo.jpg?sz=128", "display_name": "lyes ", "link": "https://stackoverflow.com/users/10749626/lyes"}, "edited": false, "score": 0, "creation_date": 1557333767, "post_id": 56045359, "comment_id": 98732452, "body": "sorry i edited my post, tab is initialized and i want to copy its content to tab1."}, {"owner": {"reputation": 5, "user_id": 10749626, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2O57u356mSc/AAAAAAAAAAI/AAAAAAAAAGo/xmYWhWLoNz0/photo.jpg?sz=128", "display_name": "lyes ", "link": "https://stackoverflow.com/users/10749626/lyes"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557334580, "post_id": 56045359, "comment_id": 98732831, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 but the problem is not tab cause i can print its content by calling print function, the problem is tab1, tab1 is declared as a pointer so can i do  <code>std::copy(tab,tab+index,tab1);</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 5, "user_id": 10749626, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2O57u356mSc/AAAAAAAAAAI/AAAAAAAAAGo/xmYWhWLoNz0/photo.jpg?sz=128", "display_name": "lyes ", "link": "https://stackoverflow.com/users/10749626/lyes"}, "edited": false, "score": 0, "creation_date": 1557334685, "post_id": 56045359, "comment_id": 98732885, "body": "@lyes Well, <i>undefined behavior</i> is <i><b>undefined</b></i>, that means anything can happen."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 5, "user_id": 10749626, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2O57u356mSc/AAAAAAAAAAI/AAAAAAAAAGo/xmYWhWLoNz0/photo.jpg?sz=128", "display_name": "lyes ", "link": "https://stackoverflow.com/users/10749626/lyes"}, "edited": false, "score": 0, "creation_date": 1557334708, "post_id": 56045359, "comment_id": 98732898, "body": "@lyes you missed to intialize them, do you understand the problem or not ? I think you imagine to have arrays like I say in my answer"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 5, "user_id": 10749626, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2O57u356mSc/AAAAAAAAAAI/AAAAAAAAAGo/xmYWhWLoNz0/photo.jpg?sz=128", "display_name": "lyes ", "link": "https://stackoverflow.com/users/10749626/lyes"}, "edited": false, "score": 0, "creation_date": 1557338180, "post_id": 56045359, "comment_id": 98734648, "body": "@lyes I edited my answer with a corrected version of your code (as I can understand what you wanted)"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 3, "last_activity_date": 1557339327, "last_edit_date": 1557339327, "creation_date": 1557333580, "answer_id": 56045359, "question_id": 56045325, "link": "https://stackoverflow.com/questions/56045325/getting-segmentation-fault-when-copying-arrays-using-stdcopy/56045359#56045359", "title": "getting segmentation fault when copying arrays using std::copy", "body": "<p>(before your edition)</p>\n\n<blockquote>\n  <p>getting segmentation fault when copying arrays using std::copy</p>\n</blockquote>\n\n<p>The problem appears before the <code>std::copy</code></p>\n\n<p>Having</p>\n\n<blockquote>\n<pre><code> int *tab;\n int *tab1;\n ...\n tab[i] = tab1[i];\n</code></pre>\n</blockquote>\n\n<p><em>tab</em> and <em>tab1</em> are not initialized, they do not point to a block of memory used as an array, so the behavior is undefined (a segmentation fault in your case) each time they are dereferenced</p>\n\n<p>Concerning the code about <em>number</em> you probably wanted something like</p>\n\n<pre><code>int tab[20];\nint tab1[20]\n</code></pre>\n\n<p>Warning in </p>\n\n<blockquote>\n<pre><code> for(int i=1;i&lt;=index;i++){\n</code></pre>\n</blockquote>\n\n<p>it seems you suppose the first index of an array is 1, while it is 0</p>\n\n<hr>\n\n<p>A proposal from your code (after your edition) removing undefined behaviors, more some other changes, I commented the modifications.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt; \n#include &lt;cstring&gt;\n\nusing namespace std;\n\nvoid print(const int *tab, const int &amp;nbr){\n  for(int i = 0; i&lt;nbr;i++){\n    cout &lt;&lt; tab[i] &lt;&lt; ' '; // add a space to separate numbers \n  }\n\n  cout &lt;&lt; endl;\n}\n\nint main()\n{\n  int number;\n\n  do { // your case it typically a \"do while\"\n    // print moved inside to clearly indicate the expected input\n    // even after a number invalid\n    // and also request a  number &gt; 0 else no sence after\n    cout &lt;&lt; \"enter a number between 1 and 20!\" &lt;&lt; endl;\n    if (!(cin &gt;&gt; number)) { // detect the error else if a non number you loop forever\n      cerr &lt;&lt; \"invalid input\" &lt;&lt; endl;\n      cin.clear(); // clear the error\n\n      // bypass invalid input\n      string s;\n\n      if (! (cin &gt;&gt; s)) {\n        // EOF !\n        return -1;\n      }\n      number = 0; // to reloop\n    }\n  } while ((number &gt; 20) || (number &lt;= 0));\n\n  int * tab = new int[number]; // added missing initialization\n  int * tab1 = new int[number]; // added missing initialization\n\n  for (int index = 0; index &lt; number; ++index) {\n    tab[0] = 1;\n    for(int i=1; i&lt;=index; i++) {\n      tab[i] = i;\n    }\n    print(tab,index);\n    std::copy(tab, tab+index, tab1);\n  }\n\n  // free resources\n  delete [] tab;\n  delete [] tab1;\n\n  return 0;\n}\n</code></pre>\n\n<p>Compilation and execution :</p>\n\n<pre><code>pi@raspberrypi:/tmp $ g++ -pedantic -Wextra -Wall cp.cc\npi@raspberrypi:/tmp $ ./a.out\nenter a number between 1 and 20!\naze\ninvalid input\nenter a number between 1 and 20!\n-1\nenter a number between 1 and 20!\n21\nenter a number between 1 and 20!\n20\n\n1 \n1 1 \n1 1 2 \n1 1 2 3 \n1 1 2 3 4 \n1 1 2 3 4 5 \n1 1 2 3 4 5 6 \n1 1 2 3 4 5 6 7 \n1 1 2 3 4 5 6 7 8 \n1 1 2 3 4 5 6 7 8 9 \n1 1 2 3 4 5 6 7 8 9 10 \n1 1 2 3 4 5 6 7 8 9 10 11 \n1 1 2 3 4 5 6 7 8 9 10 11 12 \n1 1 2 3 4 5 6 7 8 9 10 11 12 13 \n1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 \n1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \n1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \n1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \n1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 \npi@raspberrypi:/tmp $ \n</code></pre>\n\n<p>However in</p>\n\n<blockquote>\n<pre><code>for (int index = 0; index &lt; number; ++index) {\n  tab[0] = 1;\n  for(int i=1; i&lt;=index; i++) {\n    tab[i] = i;\n  }\n  print(tab,index);\n  std::copy(tab, tab+index, tab1);\n}\n</code></pre>\n</blockquote>\n\n<p><em>tab</em> is initialized a lot of times for nothing, it is enough to initialize each entry only one time</p>\n\n<p><code>std::copy(tab, tab+index, tab1);</code> is useless because <em>tab1</em> is never used.</p>\n\n<p>It is possible to remove all concerning <em>tab1</em> and to just have :</p>\n\n<pre><code>tab[0] = 1;\nfor (int index = 1; index &lt; number; ++index) {\n  tab[index] = index;\n  print(tab,index);\n}\n</code></pre>\n\n<p>An execution under <em>valgrind</em> to check memory accesses and leaks (<em>tab1</em> removed) :</p>\n\n<pre><code>pi@raspberrypi:/tmp $ valgrind ./a.out\n==16633== Memcheck, a memory error detector\n==16633== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\n==16633== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info\n==16633== Command: ./a.out\n==16633== \nenter a number between 1 and 20!\n10\n1 \n1 1 \n1 1 2 \n1 1 2 3 \n1 1 2 3 4 \n1 1 2 3 4 5 \n1 1 2 3 4 5 6 \n1 1 2 3 4 5 6 7 \n1 1 2 3 4 5 6 7 8 \n==16633== \n==16633== HEAP SUMMARY:\n==16633==     in use at exit: 0 bytes in 0 blocks\n==16633==   total heap usage: 4 allocs, 4 frees, 22,312 bytes allocated\n==16633== \n==16633== All heap blocks were freed -- no leaks are possible\n==16633== \n==16633== For counts of detected and suppressed errors, rerun with: -v\n==16633== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 6 from 3)\npi@raspberrypi:/tmp $ \n</code></pre>\n\n<p>Also note you miss to print the last element in <em>print</em></p>\n\n<blockquote>\n<pre><code>for(int i = 0; i&lt;nbr;i++){\n</code></pre>\n</blockquote>\n\n<p>can be</p>\n\n<pre><code>for(int i = 0; i&lt;=nbr;i++){\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 10749626, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2O57u356mSc/AAAAAAAAAAI/AAAAAAAAAGo/xmYWhWLoNz0/photo.jpg?sz=128", "display_name": "lyes ", "link": "https://stackoverflow.com/users/10749626/lyes"}, "edited": false, "score": 0, "creation_date": 1557334108, "post_id": 56045392, "comment_id": 98732597, "body": "tab[0] is initialized, just forgot this line, it&#39;s why i start indexing at 1, the array is declared as a pointer , you mean i can&#39;t start populating it directly ?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5, "user_id": 10749626, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2O57u356mSc/AAAAAAAAAAI/AAAAAAAAAGo/xmYWhWLoNz0/photo.jpg?sz=128", "display_name": "lyes ", "link": "https://stackoverflow.com/users/10749626/lyes"}, "edited": false, "score": 0, "creation_date": 1557334184, "post_id": 56045392, "comment_id": 98732637, "body": "@lyes, Yes, you can. I missed that."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1557334303, "last_edit_date": 1557334303, "creation_date": 1557333717, "answer_id": 56045392, "question_id": 56045325, "link": "https://stackoverflow.com/questions/56045325/getting-segmentation-fault-when-copying-arrays-using-stdcopy/56045392#56045392", "title": "getting segmentation fault when copying arrays using std::copy", "body": "<p>Problems I see:</p>\n\n<ol>\n<li><p>You haven't allocated memory for <code>tab</code> and <code>tab1</code> before using them as though they point to valid memory. That causes undefined behavior.</p></li>\n<li><p><strike>\nYou don't have any code for populating <code>tab</code> with data. Copying from <code>tab</code> to <code>tab1</code> does not make sense without that.\n</strike> The updated code initializes <code>tab</code>.</p></li>\n</ol>\n"}], "owner": {"reputation": 5, "user_id": 10749626, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2O57u356mSc/AAAAAAAAAAI/AAAAAAAAAGo/xmYWhWLoNz0/photo.jpg?sz=128", "display_name": "lyes ", "link": "https://stackoverflow.com/users/10749626/lyes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557339327, "creation_date": 1557333413, "last_edit_date": 1557334165, "question_id": 56045325, "link": "https://stackoverflow.com/questions/56045325/getting-segmentation-fault-when-copying-arrays-using-stdcopy", "title": "getting segmentation fault when copying arrays using std::copy", "body": "<p>i'm trying to carry out a pascal triangle, and i need to copy an array to an other, i'm currently using the copy function but getting the famous segmentation fault. </p>\n\n<p>here is my code:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;algorithm&gt; \n    #include &lt;cstring&gt;\n\n    using namespace std;\n\n    void print(const int *tab, const int &amp;nbr){\n        for(int i = 0; i&lt;nbr;i++){\n          cout &lt;&lt; tab[i];\n         }\n\n        cout &lt;&lt; endl;\n     }\n\n\n     int main()\n     {\n       int *tab;\n       int *tab1;\n       int index = 0;\n       cout &lt;&lt; \"enter a number less than or equal to 20!\" &lt;&lt; endl;\n       int number = 40;\n       while(number &gt; 20){\n         cin &gt;&gt; number;\n         cout &lt;&lt; endl;\n       }\n\n       int a = 1;\n\n       while(index &lt; number){\n         tab[0] = 1;\n         for(int i=1;i&lt;=index;i++){\n            tab[i] = i;\n         }\n         print(tab,index);\n         std::copy(tab,tab+index,tab1);\n         index++;\n       }\n\n       return 0;\n     }\n</code></pre>\n\n<p>I'm  getting the same error with memcpy function , can anyone</p>\n"}, {"tags": ["c++", "parsing", "boost", "boost-spirit-x3"], "answers": [{"comments": [{"owner": {"reputation": 972, "user_id": 1399018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/208d20e9ea683b8d38e22165eef7d6a6?s=128&d=identicon&r=PG", "display_name": "codingdave", "link": "https://stackoverflow.com/users/1399018/codingdave"}, "edited": false, "score": 0, "creation_date": 1557956362, "post_id": 56136377, "comment_id": 98944898, "body": "Thank you for this answer. You mention x3::symbols but unfortunately dont show an example how to use it. It took me some time to understand what the sample does, very impressive. I dont need to tackle such a difficult situation. The only thing I need is to be able to modify or substitute a symbols parser which only constitutes a part of a line. So <code>line_parser = char_+|parser_foo|symbols_parser;</code> and I only get the keywords of symbols_parser with the constructor of my parser."}], "tags": [], "owner": {"reputation": 3425, "user_id": 3621421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995874e8bbb9cf8df99e63de231709cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Kniazev", "link": "https://stackoverflow.com/users/3621421/nikita-kniazev"}, "is_accepted": false, "score": 1, "last_activity_date": 1557858049, "creation_date": 1557858049, "answer_id": 56136377, "question_id": 56045313, "link": "https://stackoverflow.com/questions/56045313/x3-modify-parser-at-runtime/56136377#56136377", "title": "x3 modify parser at runtime", "body": "<p>You cannot change the parser at runtime <em>(except a DSO trick I described under your other question <a href=\"https://stackoverflow.com/a/56135824/3621421\">https://stackoverflow.com/a/56135824/3621421</a>)</em>, but you can make your parser context-sensitive via semantic actions and/or stateful parsers (like <code>x3::symbols</code>).</p>\n\n<p>The state for semantic actions (or probably for your custom parser) can also be stored in a parser context. <em>However, usually I see that folks use global or function local variables for this purpose.</em></p>\n\n<p>A simple example:</p>\n\n<pre><code>#include &lt;boost/spirit/home/x3.hpp&gt;\n#include &lt;iostream&gt;\n\nnamespace x3 = boost::spirit::x3;\n\nint main()\n{\n    char const* s = \"sep=,\\n1,2,3\", * e = s + std::strlen(s);\n    auto p = \"sep=\" &gt;&gt; x3::with&lt;struct sep_tag, char&gt;('\\0')[\n         x3::char_[([](auto&amp; ctx) { x3::get&lt;struct sep_tag&gt;(ctx) = _attr(ctx); })] &gt;&gt; x3::eol\n      &gt;&gt; x3::int_ % x3::char_[([](auto&amp; ctx) { _pass(ctx) = x3::get&lt;struct sep_tag&gt;(ctx) == _attr(ctx); })]\n    ];\n    if (parse(s, e, p) &amp;&amp; s == e)\n        std::cout &lt;&lt; \"OK\\n\";\n    else\n        std::cout &lt;&lt; \"Failed\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 972, "user_id": 1399018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/208d20e9ea683b8d38e22165eef7d6a6?s=128&d=identicon&r=PG", "display_name": "codingdave", "link": "https://stackoverflow.com/users/1399018/codingdave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557858049, "creation_date": 1557333376, "question_id": 56045313, "link": "https://stackoverflow.com/questions/56045313/x3-modify-parser-at-runtime", "title": "x3 modify parser at runtime", "body": "<p>I wonder if it is possible to change the parser at runtime given it does not change the compound attribute.</p>\n\n<p>Lets say I want to be able to modify at runtime the character of my parser that detects whether I have to join a line from <code>;</code> to <code>~</code>. Both are just characters and since the c++ types and the template instantiations dont vary (in both cases we are talking about a <code>char</code>) I think there must be some way, but I dont find it. So is this possible?</p>\n\n<p>My concrete situation is that I am calling the X3 parser via C++/CLI and have the need that the character shall be adjustable from .NET. I hope the following example is enough to be able to understand my problem.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/1cc2f2836dbfaa46\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/1cc2f2836dbfaa46</a></p>\n\n<p>Kind regards</p>\n"}, {"tags": ["c++", "cmake", "linker", "g++", "clang++"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1557335197, "post_id": 56045295, "comment_id": 98733141, "body": "The multiple repeated  <code>--whole-archive</code> options are ignored. It&#39;s the same as in <code>target_link_libraries(v8jni log -Wl,--whole-archive  v8_inspector  v8_base  v8_snapshot  v8_libplatform  v8_libsampler  v8_libbase         -Wl,--no-whole-archive)</code>. The option sets a flag, it counts for all libraries after, up until <code>no</code>. <code>The link command is</code> - the link command is not full, it doesn&#39;t start with a command (probably <code>ld</code> or <code>gcc</code>), these are only flags."}, {"owner": {"reputation": 2120, "user_id": 897889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9e7cdf593132404f23da6936f69339a?s=128&d=identicon&r=PG", "display_name": "wukong", "link": "https://stackoverflow.com/users/897889/wukong"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1557339868, "post_id": 56045295, "comment_id": 98735456, "body": "@KamilCuk Thanks the full link command is updated. and I don&#39;t think the multiple <code>whole-archive</code> is the cause of the problem."}, {"owner": {"reputation": 2120, "user_id": 897889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9e7cdf593132404f23da6936f69339a?s=128&d=identicon&r=PG", "display_name": "wukong", "link": "https://stackoverflow.com/users/897889/wukong"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1557342092, "post_id": 56045295, "comment_id": 98736436, "body": "@KamilCuk linker command is updated, the multiple whole-archive is fixed, still the same result. I&#39;m getting crazy now."}], "answers": [{"tags": [], "owner": {"reputation": 2120, "user_id": 897889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9e7cdf593132404f23da6936f69339a?s=128&d=identicon&r=PG", "display_name": "wukong", "link": "https://stackoverflow.com/users/897889/wukong"}, "is_accepted": false, "score": 0, "last_activity_date": 1557349873, "last_edit_date": 1557349873, "creation_date": 1557349318, "answer_id": 56049000, "question_id": 56045295, "link": "https://stackoverflow.com/questions/56045295/static-library-convert-to-a-shared-lib-symbols-are-hidden/56049000#56049000", "title": "static library convert to a shared lib symbols are hidden?", "body": "<p>I might know the answer, I suspect the root cause is the <code>.hidden</code> in the object file</p>\n\n<pre><code>cpu-arm.o:     file format elf32-littlearm\n\nSYMBOL TABLE:\n00000000 l    df *ABS*  00000000 cpu-arm.cc\n00000000 l    d  .text._ZN2v88internal11CpuFeatures11FlushICacheEPvj    00000000 .text._ZN2v88internal11CpuFeatures11FlushICacheEPvj\n00000000 g     F .text._ZN2v88internal11CpuFeatures11FlushICacheEPvj    00000010 .hidden _ZN2v88internal11CpuFeatures11FlushICacheEPvj\n00000000         *UND*  00000000 __aeabi_unwind_cpp_pr0\n</code></pre>\n\n<p>The <code>nm</code>'s output is a miss leading.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/11329734/what-does-hidden-mean-in-the-output-of-output-objdump-t\">What does &quot;.hidden&quot; mean in the output of output objdump -t?</a></p>\n"}, {"tags": [], "owner": {"reputation": 2120, "user_id": 897889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9e7cdf593132404f23da6936f69339a?s=128&d=identicon&r=PG", "display_name": "wukong", "link": "https://stackoverflow.com/users/897889/wukong"}, "is_accepted": true, "score": 0, "last_activity_date": 1557373276, "creation_date": 1557373276, "answer_id": 56051840, "question_id": 56045295, "link": "https://stackoverflow.com/questions/56045295/static-library-convert-to-a-shared-lib-symbols-are-hidden/56051840#56051840", "title": "static library convert to a shared lib symbols are hidden?", "body": "<p>For anyone encounters the problem, there is a switch in v8's build script</p>\n\n<p>v8/gni/v8.gni</p>\n\n<pre><code>if ((is_posix || is_fuchsia) &amp;&amp; (v8_enable_backtrace || v8_monolithic)) {\n  v8_remove_configs += [ \"//build/config/gcc:symbol_visibility_hidden\" ]\n  v8_add_configs += [ \"//build/config/gcc:symbol_visibility_default\" ]\n}\n</code></pre>\n\n<p>so we need set <code>v8_enable_backtrace=true</code> when compiling v8, problem resolved.</p>\n"}], "owner": {"reputation": 2120, "user_id": 897889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9e7cdf593132404f23da6936f69339a?s=128&d=identicon&r=PG", "display_name": "wukong", "link": "https://stackoverflow.com/users/897889/wukong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 56051840, "answer_count": 2, "score": 0, "last_activity_date": 1557373276, "creation_date": 1557333317, "last_edit_date": 1557343911, "question_id": 56045295, "link": "https://stackoverflow.com/questions/56045295/static-library-convert-to-a-shared-lib-symbols-are-hidden", "title": "static library convert to a shared lib symbols are hidden?", "body": "<p>I am trying to link v8's static library to a shared library using the following cmake command</p>\n\n<pre><code>add_library(v8jni SHARED ${THIRDPARTY_LIB_PATH}/shared/v8jni.cpp)\ntarget_link_libraries(v8jni log\n        -Wl,--whole-archive v8_inspector\n        v8_base\n        v8_snapshot\n        v8_libplatform\n        v8_libsampler\n        v8_libbase\n        -Wl,--no-whole-archive)\n</code></pre>\n\n<p><code>libv8jni.so</code> is generated successfully. But it's useless because all the <code>v8</code> function are marked as local. </p>\n\n<pre><code>nm -C libv8_base.a | grep v8::HandleScope\n00000000 T v8::HandleScope::Initialize(v8::Isolate*)\n00000000 T v8::HandleScope::CreateHandle(v8::internal::NeverReadOnlySpaceObject*, unsigned int)\n00000000 T v8::HandleScope::CreateHandle(v8::internal::Isolate*, unsigned int)\n00000000 T v8::HandleScope::NumberOfHandles(v8::Isolate*)\n00000000 T v8::HandleScope::HandleScope(v8::Isolate*)\n00000000 T v8::HandleScope::HandleScope(v8::Isolate*)\n00000000 T v8::HandleScope::~HandleScope()\n00000000 T v8::HandleScope::~HandleScope()\n00000000 T v8::HandleScope::operator delete[](void*, unsigned int)\n00000000 T v8::HandleScope::operator delete(void*, unsigned int)\n00000000 T v8::HandleScope::operator new[](unsigned int)\n00000000 T v8::HandleScope::operator new(unsigned int)\n         U v8::HandleScope::CreateHandle(v8::internal::Isolate*, unsigned int)\n         U v8::HandleScope::HandleScope(v8::Isolate*)\n         U v8::HandleScope::~HandleScope()\n         U v8::HandleScope::HandleScope(v8::Isolate*)\n         U v8::HandleScope::~HandleScope()\n</code></pre>\n\n<p>whereas <code>nm -C libv8jni.so |</code> gives me the following output. </p>\n\n<p>Please note the symbol type is <code>t</code> not <code>T</code>, means they only be accessed locally.</p>\n\n<pre><code>nm -C libv8jni.so| grep v8::HandleScope\n000c0b48 t v8::HandleScope::Initialize(v8::Isolate*)\n000c0c32 t v8::HandleScope::CreateHandle(v8::internal::NeverReadOnlySpaceObject*, unsigned int)\n000c0c0c t v8::HandleScope::CreateHandle(v8::internal::Isolate*, unsigned int)\n000c0c08 t v8::HandleScope::NumberOfHandles(v8::Isolate*)\n000c0b3c t v8::HandleScope::HandleScope(v8::Isolate*)\n000c0b3c t v8::HandleScope::HandleScope(v8::Isolate*)\n000c4ad4 t v8::HandleScope::~HandleScope()\n000c4ad4 t v8::HandleScope::~HandleScope()\n000c0c02 t v8::HandleScope::operator delete[](void*, unsigned int)\n000c0bfc t v8::HandleScope::operator delete(void*, unsigned int)\n000c0bf6 t v8::HandleScope::operator new[](unsigned int)\n000c0bf0 t v8::HandleScope::operator new(unsigned int)\n</code></pre>\n\n<p><code>v8jni.cpp</code> is very simple</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;jni.h&gt;\n#include &lt;android/log.h&gt;\n#include &lt;assert.h&gt;\n\nstatic const char* LOG_TAG = \"v8jni\";\n\nextern \"C\" jint JNI_OnLoad(JavaVM *vm, void *reserved)\n{\n    JNIEnv* env = NULL;\n    jint result = -1;\n\n    __android_log_print(ANDROID_LOG_INFO, LOG_TAG, \"JNI_OnLoad\");\n\n   if (vm-&gt;GetEnv((void **) &amp;env, JNI_VERSION_1_4) != JNI_OK) {\n       __android_log_print(ANDROID_LOG_ERROR, LOG_TAG, \"GetEnv Failed!\");\n       return result;\n   }\n\n   assert(env != nullptr &amp;&amp; \"env is nullptr\");\n\n   return JNI_VERSION_1_4;\n}\n</code></pre>\n\n<p>The link command as follows, it's a test script.</p>\n\n<pre><code>+ rm ../../../.././build/intermediates/cmake/debug/obj/armeabi-v7a/libv8jni.so\n+ /Users/leoliu/Library/Android/sdk/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/clang++ -v --target=armv7-none-linux-androideabi --gcc-toolchain=/Users/leoliu/Library/Android/sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64 --sysroot=/Users/leoliu/Library/Android/sdk/ndk-bundle/sysroot -fPIC -isystem /Users/leoliu/Library/Android/sdk/ndk-bundle/sysroot/usr/include/arm-linux-androideabi -D__ANDROID_API__=15 -g -DANDROID -march=armv7-a -mfloat-abi=softfp -mfpu=vfpv3-d16 -std=c++11 --sysroot /Users/leoliu/Library/Android/sdk/ndk-bundle/platforms/android-15/arch-arm -L/Users/leoliu/Library/Android/sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/armeabi-v7a -shared -Wl,-soname,libv8jni.so -o ../../../../build/intermediates/cmake/debug/obj/armeabi-v7a/libv8jni.so CMakeFiles/v8jni.dir/src/main/cpp/thirdparty/shared/v8jni.cpp.o -llog -Wl,--whole-archive ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_inspector.a ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_base.a ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_snapshot.a ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_libplatform.a ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_libsampler.a ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_libbase.a -Wl,--no-whole-archive -latomic -lm /Users/leoliu/Library/Android/sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++.a\nAndroid clang version 5.0.300080  (based on LLVM 5.0.300080)\nTarget: armv7-none-linux-android\nThread model: posix\nInstalledDir: /Users/leoliu/Library/Android/sdk/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin\nFound candidate GCC installation: /Users/leoliu/Library/Android/sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x\nSelected GCC installation: /Users/leoliu/Library/Android/sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x\nCandidate multilib: thumb;@thumb\nCandidate multilib: armv7-a;@armv7\nCandidate multilib: armv7-a/thumb;@armv7@thumb\nCandidate multilib: .;\nSelected multilib: armv7-a;@armv7\n \"/Users/leoliu/Library/Android/sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/../../../../arm-linux-androideabi/bin/ld\" --sysroot=/Users/leoliu/Library/Android/sdk/ndk-bundle/platforms/android-15/arch-arm -X --eh-frame-hdr -m armelf_linux_eabi -shared -o ../../../../build/intermediates/cmake/debug/obj/armeabi-v7a/libv8jni.so /Users/leoliu/Library/Android/sdk/ndk-bundle/platforms/android-15/arch-arm/usr/lib/../lib/crtbegin_so.o -L/Users/leoliu/Library/Android/sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/armeabi-v7a -L/Users/leoliu/Library/Android/android-ndk-r16b/toolchains/llvm/prebuilt/darwin-x86_64/lib64/clang/5.0.300080/lib/linux/arm -L/Users/leoliu/Library/Android/sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/armv7-a -L/Users/leoliu/Library/Android/sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/../../../../arm-linux-androideabi/lib/../lib/armv7-a -L/Users/leoliu/Library/Android/sdk/ndk-bundle/platforms/android-15/arch-arm/usr/lib/../lib -L/Users/leoliu/Library/Android/sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/../../../../arm-linux-androideabi/lib/armv7-a -L/Users/leoliu/Library/Android/sdk/ndk-bundle/platforms/android-15/arch-arm/usr/lib -soname libv8jni.so CMakeFiles/v8jni.dir/src/main/cpp/thirdparty/shared/v8jni.cpp.o -llog --whole-archive ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_inspector.a ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_base.a ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_snapshot.a ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_libplatform.a ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_libsampler.a ../../../../src/main/cpp/thirdparty/library/static/armeabi-v7a/libv8_libbase.a --no-whole-archive -latomic -lm /Users/leoliu/Library/Android/sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++.a -lstdc++ -lm -lgcc -ldl -lc -lgcc -ldl /Users/leoliu/Library/Android/sdk/ndk-bundle/platforms/android-15/arch-arm/usr/lib/../lib/crtend_so.o\n+ nm -C ../../../.././build/intermediates/cmake/debug/obj/armeabi-v7a/libv8jni.so\n+ grep v8::HandleScope\n000c0b48 t v8::HandleScope::Initialize(v8::Isolate*)\n000c0c32 t v8::HandleScope::CreateHandle(v8::internal::NeverReadOnlySpaceObject*, unsigned int)\n000c0c0c t v8::HandleScope::CreateHandle(v8::internal::Isolate*, unsigned int)\n000c0c08 t v8::HandleScope::NumberOfHandles(v8::Isolate*)\n000c0b3c t v8::HandleScope::HandleScope(v8::Isolate*)\n000c0b3c t v8::HandleScope::HandleScope(v8::Isolate*)\n000c4ad4 t v8::HandleScope::~HandleScope()\n000c4ad4 t v8::HandleScope::~HandleScope()\n000c0c02 t v8::HandleScope::operator delete[](void*, unsigned int)\n000c0bfc t v8::HandleScope::operator delete(void*, unsigned int)\n000c0bf6 t v8::HandleScope::operator new[](unsigned int)\n000c0bf0 t v8::HandleScope::operator new(unsigned int)\n</code></pre>\n\n<p>Any possible reason causing the problem? Thanks in advance.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557333373, "post_id": 56045290, "comment_id": 98732268, "body": "Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> reproducing the problem as required here please."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 10874248, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bsaOPE5B7wM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYwDZw2x9ovoCYoNMS-bKk9rAIOJw/mo/photo.jpg?sz=128", "display_name": "Vlad Poncea", "link": "https://stackoverflow.com/users/10874248/vlad-poncea"}, "edited": false, "score": 0, "creation_date": 1557333611, "post_id": 56045331, "comment_id": 98732378, "body": "How can I declare a multidimensional vector?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 91, "user_id": 10874248, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bsaOPE5B7wM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYwDZw2x9ovoCYoNMS-bKk9rAIOJw/mo/photo.jpg?sz=128", "display_name": "Vlad Poncea", "link": "https://stackoverflow.com/users/10874248/vlad-poncea"}, "edited": false, "score": 2, "creation_date": 1557333823, "post_id": 56045331, "comment_id": 98732472, "body": "@VladPoncea You can perform some research. This topic is exceptionally well-trodden."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1557333446, "creation_date": 1557333446, "answer_id": 56045331, "question_id": 56045290, "link": "https://stackoverflow.com/questions/56045290/invalid-use-of-non-static-data-member-error/56045331#56045331", "title": "Invalid use of non-static data member error", "body": "<p>You can't use a runtime variable to set array dimensions like that.</p>\n\n<p>Even if you could, the array (a member variable) is created before the constructor runs!</p>\n\n<p>So everything about this is impossible.</p>\n\n<p>Try a vector instead, so that you can resize it as you need.</p>\n"}], "owner": {"reputation": 91, "user_id": 10874248, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bsaOPE5B7wM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYwDZw2x9ovoCYoNMS-bKk9rAIOJw/mo/photo.jpg?sz=128", "display_name": "Vlad Poncea", "link": "https://stackoverflow.com/users/10874248/vlad-poncea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1557334481, "creation_date": 1557333300, "last_edit_date": 1557334481, "question_id": 56045290, "link": "https://stackoverflow.com/questions/56045290/invalid-use-of-non-static-data-member-error", "title": "Invalid use of non-static data member error", "body": "<p>I was solving a problem and got stuck into this error in a class.</p>\n\n<blockquote>\n  <p>invalid use of non-static data member 'nr_piste'</p>\n  \n  <p>bool HardDisk[nr_piste][nr_sectoare];</p>\n  \n  <p>invalid use of non-static data member 'nr_sectoare'</p>\n  \n  <p>bool HardDisk[nr_piste][nr_sectoare];</p>\n</blockquote>\n\n<p>Here is the code:</p>\n\n<pre><code>    class hard{\n      public:\n        int nr_piste, nr_sectoare, clusteri_ocupati;\n        hard(){\n            in &gt;&gt; nr_piste &gt;&gt; nr_sectoare &gt;&gt; clusteri_ocupati;\n        }\n        bool HardDisk[nr_piste][nr_sectoare];\n        void insert(){\n            int pista, sector;\n            for (int i = 0; i &lt; nr_piste; i++){\n                for (int j = 0; j &lt; nr_sectoare; j++){\n                    HardDisk[i][j] = 0;\n                }\n            }\n            for (int i = 0; i &lt; nr_piste; i++){\n                for (int j = 0; j &lt; nr_sectoare; j++){\n                    in &gt;&gt; pista &gt;&gt; sector;\n                    HardDisk[pista][sector] = 1;\n                }\n            }\n        }\n    };\n</code></pre>\n\n<p>I tried using putting the variables in private and that didn't work.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2012", "stdafx.h"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1557333081, "post_id": 56045119, "comment_id": 98732141, "body": "stdafx.h is the precompiled header file.  It must be #included in the .cpp file that takes advantage of it, and be the very first #include, never by a .h file.  Hard to guess how this could have built properly before, but we can&#39;t the #includes used by utils.cpp.  The file that it is actually complaining about."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 2, "creation_date": 1557333556, "post_id": 56045119, "comment_id": 98732355, "body": "unrelated: Visual Studio 2012 is outdated by 5 years now. Consider upgrading to Visual Sudio 2017 or 2019. The Community Edition is free of charge."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1557337408, "post_id": 56045119, "comment_id": 98734249, "body": "I&#39;d consider using APIs that are windows 7 and newer... but that&#39;s me"}, {"owner": {"reputation": 31, "user_id": 7158314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea64f7a464b8c71b643d9e388b40018?s=128&d=identicon&r=PG&f=1", "display_name": "Gytis Bernotas", "link": "https://stackoverflow.com/users/7158314/gytis-bernotas"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1557349830, "post_id": 56045119, "comment_id": 98739623, "body": "@HansPassant if I understood you correctly, I shouldn&#39;t include the precompiled header file in a header file (.h), but rather #include it only in the source (.cpp) files? Also, what did you mean by &#39;..., never by a .h file&#39;?"}], "owner": {"reputation": 31, "user_id": 7158314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea64f7a464b8c71b643d9e388b40018?s=128&d=identicon&r=PG&f=1", "display_name": "Gytis Bernotas", "link": "https://stackoverflow.com/users/7158314/gytis-bernotas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 478, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557333492, "creation_date": 1557332618, "last_edit_date": 1557333492, "question_id": 56045119, "link": "https://stackoverflow.com/questions/56045119/fatal-error-with-afxv-w32-h-windows-h-already-included", "title": "Fatal error with afxv_w32.h: WINDOWS.H already included", "body": "<p>I am trying to build and run an old (and quite large (approx. 100+ source and header files)) VS project. It was originally compiled using VS2012 and Windows 7, so I am using the same set-up (in fact, both Win 7 and 10). I am new to VS, so please bear with me. My problem is that that it fails to build with this fatal error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\atlmfc\\include\\afxv_w32.h(16):\nfatal error C1189: #error :  WINDOWS.H already included.\nMFC apps must not #include &lt;windows.h&gt; (utils.cpp)```\n</code></pre>\n\n<p>I found that many people have had this problem. For example,</p>\n\n<ul>\n<li><a href=\"http://forums.codeguru.com/showthread.php?298569-MFC-and-windows-h\" rel=\"nofollow noreferrer\">CodeGuru</a></li>\n<li><a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/660d063e-837f-4ed9-abdf-9df468240651/fatal-error-c1189-error-windowsh-already-included?forum=vcgeneral\" rel=\"nofollow noreferrer\">MSDN</a></li>\n<li><a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/fb709a16-be1c-432b-9d30-cb64e3a7771c/fatal-error-c1189-error-windowsh-already-included-mfc-apps-must-not-include?forum=vcgeneral\" rel=\"nofollow noreferrer\">MSDN</a></li>\n</ul>\n\n<p>However, I could not find a solution that worked for me. First of all, as far as I am aware, <code>windows.h</code> is not included by our written code, but rather by the <code>afxv_w32.h</code> file. I have a <code>utils.h</code> file that hosts useful function prototypes, which includes a <code>stdafx.h</code> file (below). Through \"Show includes\" option I found that <code>stdafx.h</code> includes <code>afxwin.h</code>, which ends up with an inclusion of <code>afxv_w32.h</code> with the mentioned error; however, it seems the error is not raised at all times. For example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1&gt;  Note: including file: i:\\hmcdeliverables\\sourcecode\\processor\\utils.h\n1&gt;  Note: including file:  i:\\hmcdeliverables\\sourcecode\\processor\\stdafx.h\n1&gt;  Note: including file:   C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\atlmfc\\include\\afxwin.h\n1&gt;  Note: including file:    C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\atlmfc\\include\\afx.h\n1&gt;  Note: including file:     C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\new.h\n1&gt;  Note: including file:      C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\crtdefs.h\n1&gt;  Note: including file:     C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\atlmfc\\include\\afxver_.h\n1&gt;  Note: including file:      C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\atlmfc\\include\\afxv_w32.h\n1&gt;  Note: including file:       C:\\Program Files (x86)\\Windows Kits\\8.0\\Include\\um\\winsdkver.h\n1&gt;  Note: including file:        C:\\Program Files (x86)\\Windows Kits\\8.0\\Include\\shared\\winapifamily.h\n1&gt;  Note: including file:       C:\\Program Files (x86)\\Windows Kits\\8.0\\Include\\shared\\sdkddkver.h\n1&gt;  Note: including file:       C:\\Program Files (x86)\\Windows Kits\\8.0\\Include\\um\\windows.h\n1&gt;  Note: including file:       C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\excpt.h\n1&gt;  Note: including file:         C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\crtdefs.h\n.\n.    Some lines later...\n.\n\n1&gt;  Note: including file: i:\\hmcdeliverables\\sourcecode\\processor\\utils.h\n1&gt;  Note: including file:  i:\\hmcdeliverables\\sourcecode\\processor\\stdafx.h\n1&gt;  Note: including file:   C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\atlmfc\\include\\afxwin.h\n1&gt;  Note: including file:    C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\atlmfc\\include\\afx.h\n1&gt;  Note: including file:     C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\new.h\n1&gt;  Note: including file:      C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\crtdefs.h\n1&gt;  Note: including file:     C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\atlmfc\\include\\afxver_.h\n1&gt;  Note: including file:      C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\atlmfc\\include\\afxv_w32.h\n1&gt;  C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\atlmfc\\include\\afxv_w32.h(16): fatal error C1189: #error :  WINDOWS.H already included.  MFC apps must not #include &lt;windows.h&gt;\n</code></pre>\n\n<p><code>utils.h</code> is being used in many files of this project; however, I use the guard </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#pragma once\n</code></pre>\n\n<p>to process it only once (if I understood this correctly). A snippet from the \"utils.h\":</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#pragma once\n\n#include \"stdafx.h\"\n#include &lt;string&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;cstdint&gt;\n</code></pre>\n\n<p>My stdafx.h file:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// stdafx.h : include file for standard system include files,\n// or project specific include files that are used frequently,\n// but are changed infrequently\n\n#pragma once\n\n#ifndef _SECURE_ATL\n#define _SECURE_ATL 1\n#endif\n\n#ifndef VC_EXTRALEAN\n#define VC_EXTRALEAN        // Exclude rarely-used stuff from Windows headers\n#endif\n\n// Modify the following defines if you have to target a platform prior to the ones specified below.\n// Refer to MSDN for the latest info on corresponding values for different platforms.\n#ifndef WINVER              // Allow use of features specific to Windows XP or later.\n#define WINVER 0x0501       // Change this to the appropriate value to target other versions of Windows.\n#endif\n\n#ifndef _WIN32_WINNT        // Allow use of features specific to Windows XP or later.                   \n#define _WIN32_WINNT 0x0501 // Change this to the appropriate value to target other versions of Windows.\n#endif                      \n\n#ifndef _WIN32_WINDOWS      // Allow use of features specific to Windows 98 or later.\n#define _WIN32_WINDOWS 0x0410 // Change this to the appropriate value to target Windows Me or later.\n#endif\n\n#ifndef _WIN32_IE           // Allow use of features specific to IE 6.0 or later.\n#define _WIN32_IE 0x0600    // Change this to the appropriate value to target other versions of IE.\n#endif\n\n#define _ATL_CSTRING_EXPLICIT_CONSTRUCTORS  // some CString constructors will be explicit\n\n// turns off MFC's hiding of some common and often safely ignored warning messages\n#define _AFX_ALL_WARNINGS\n\n#include &lt;afxwin.h&gt;         // MFC core and standard components\n#include &lt;afxext.h&gt;         // MFC extensions\n\n\n#include &lt;afxdisp.h&gt;        // MFC Automation classes\n\n\n\n#ifndef _AFX_NO_OLE_SUPPORT\n#include &lt;afxdtctl.h&gt;       // MFC support for Internet Explorer 4 Common Controls\n#endif\n#ifndef _AFX_NO_AFXCMN_SUPPORT\n#include &lt;afxcmn.h&gt;         // MFC support for Windows Common Controls\n#endif // _AFX_NO_AFXCMN_SUPPORT\n\n#ifdef _UNICODE\n#if defined _M_IX86\n#pragma comment(linker,\"/manifestdependency:\\\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='x86' publicKeyToken='6595b64144ccf1df' language='*'\\\"\")\n#elif defined _M_IA64\n#pragma comment(linker,\"/manifestdependency:\\\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='ia64' publicKeyToken='6595b64144ccf1df' language='*'\\\"\")\n#elif defined _M_X64\n#pragma comment(linker,\"/manifestdependency:\\\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='amd64' publicKeyToken='6595b64144ccf1df' language='*'\\\"\")\n#else\n#pragma comment(linker,\"/manifestdependency:\\\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\\\"\")\n#endif\n#endif\n</code></pre>\n\n<p>Where should I check or change to resolve this issue? Let me know if more info is required.</p>\n"}, {"tags": ["c++", "algorithm", "iterator", "declaration"], "comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1557334326, "post_id": 56045041, "comment_id": 98732700, "body": "that&#39;s why the keyword <code>auto</code> was invented."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1557332935, "post_id": 56045095, "comment_id": 98732068, "body": "Or just <code>auto</code> it."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1557334245, "post_id": 56045095, "comment_id": 98732668, "body": "Even simpler: <code>auto it = std::max_element(contours.begin(), contours.end(),                            [](const auto&amp; p1,                                const auto&amp; p2)                              { return p1.size() &lt; p2.size(); });</code>"}, {"owner": {"reputation": 717, "user_id": 1538798, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4080ee7fd3a078df0936c9f2a86247f5?s=128&d=identicon&r=PG", "display_name": "user1538798", "link": "https://stackoverflow.com/users/1538798/user1538798"}, "edited": false, "score": 0, "creation_date": 1557361998, "post_id": 56045095, "comment_id": 98742552, "body": "thanks for the great help....guys... just started out using lamda function in programming..."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1557332943, "last_edit_date": 1557332943, "creation_date": 1557332545, "answer_id": 56045095, "question_id": 56045041, "link": "https://stackoverflow.com/questions/56045041/compile-error-with-using-lamda-function-with-max-element/56045095#56045095", "title": "Compile Error with using lamda function with max_element", "body": "<p>You are using an object of the type</p>\n\n<pre><code>std::vector&lt;std::vector &lt;cv::Point2i&gt;&gt; contours;\n</code></pre>\n\n<p>in the <code>std::max_element</code> algorithm</p>\n\n<p>So the iterator shall correspond to that container. That is</p>\n\n<pre><code>std::vector&lt;std::vector &lt;cv::Point2i&gt;&gt;::iterator it = std::max_element( /*...*/ );\n</code></pre>\n\n<p>Or it would be even simpler to write</p>\n\n<pre><code>auto it = std::max_element(contours.begin(), contours.end(),\n                           [](const std::vector&lt;cv::Point2i&gt;&amp; p1, \n                              const std::vector&lt;cv::Point2i&gt;&amp; p2)\n                              { return p1.size()&lt; p2.size(); });\n</code></pre>\n\n<p>as <strong>@melpomene</strong> pointed out in a comment.</p>\n"}], "owner": {"reputation": 717, "user_id": 1538798, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4080ee7fd3a078df0936c9f2a86247f5?s=128&d=identicon&r=PG", "display_name": "user1538798", "link": "https://stackoverflow.com/users/1538798/user1538798"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 56045095, "answer_count": 1, "score": 1, "last_activity_date": 1557334046, "creation_date": 1557332328, "last_edit_date": 1557334046, "question_id": 56045041, "link": "https://stackoverflow.com/questions/56045041/compile-error-with-using-lamda-function-with-max-element", "title": "Compile Error with using lamda function with max_element", "body": "<p>I am trying to write some code to find the contour with the maximum size in a std::vector of contour.</p>\n\n<p>I have the following error </p>\n\n<pre><code>error: conversion from \u2018__gnu_cxx::__normal_iterator&lt;std::vector&lt;cv::Point_&lt;int&gt; &gt;*, std::vector&lt;std::vector&lt;cv::Point_&lt;int&gt; &gt; &gt; &gt;\u2019 to non-scalar type\n\u2018std::vector&lt;cv::Point_&lt;int&gt; &gt;::iterator {aka __gnu_cxx::__normal_iterator&lt;cv::Point_&lt;int&gt;*, std::vector&lt;cv::Point_&lt;int&gt; &gt; &gt;}\u2019 requested\n    std::vector&lt;cv::Point2i&gt;::iterator it = std::max_element(contours.begin(), contours.end()\n</code></pre>\n\n<p>Below is my code</p>\n\n<pre><code>std::vector&lt;std::vector &lt;cv::Point2i&gt;&gt; contours;\nstd::vector&lt;cv::Vec4i&gt; hierarchy;\n\ncv::findContours(rImg, contours, hierarchy,CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE, cv::Point(0, 0));\ncv::Mat blank = cv::Mat::zeros(frame.size(), CV_8UC3);\ncv::RNG rng;\n\nstd::vector&lt;cv::Point2i&gt;::iterator it = std::max_element(contours.begin(), contours.end(),\n                                                        [](const std::vector&lt;cv::Point2i&gt;&amp; p1, \n                                                        const std::vector&lt;cv::Point2i&gt;&amp; p2)\n                                                        { return p1.size()&lt; p2.size(); });\n\n\nstd::vector&lt;std::vector&lt;cv::Point2i&gt; &gt; contourV;\ncontourV.push_back(it);\n</code></pre>\n\n<p>Would like to know what is wrong and how to correct them</p>\n"}, {"tags": ["c++", "string", "type-conversion", "integer"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6916228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/308d84c51c4ada2b02a87c6dd23b7c6f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Gupta", "link": "https://stackoverflow.com/users/6916228/a-gupta"}, "edited": false, "score": 0, "creation_date": 1557736459, "post_id": 56045289, "comment_id": 98850603, "body": "I would be grateful if you tell me why is this answer downvoted ? Thanks."}], "tags": [], "owner": {"reputation": 11, "user_id": 6916228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/308d84c51c4ada2b02a87c6dd23b7c6f?s=128&d=identicon&r=PG&f=1", "display_name": "A. Gupta", "link": "https://stackoverflow.com/users/6916228/a-gupta"}, "is_accepted": false, "score": -1, "last_activity_date": 1557333299, "creation_date": 1557333299, "answer_id": 56045289, "question_id": 56044934, "link": "https://stackoverflow.com/questions/56044934/i-am-currently-trying-to-save-a-set-of-integers-in-a-int-array-by-redefining-st/56045289#56045289", "title": "I am currently trying to save a set of integers in a int array, by redefining string into numbers, then store it in the array", "body": "<p>So, you want to segregate numbers and characters into different arrays.\nIn if block, you are checking for characters, so, I suspect stoi() wouldn't work.\nBetter typecast it to an integer.</p>\n\n<pre><code>int temp[10];\n\nif (datainput[n] == ('0') || ...) {\n            temp[n] = int(datainput[n]);\n        }\n</code></pre>\n\n<p>This way your temp array would contain the numbers.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 11119570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G6qCN.jpg?s=128&g=1", "display_name": "theDev", "link": "https://stackoverflow.com/users/11119570/thedev"}, "edited": false, "score": 0, "creation_date": 1557345966, "post_id": 56045440, "comment_id": 98738049, "body": "Thank you for your input! I have applied some of the changes you suggested, and it is steps in the right direction. Also highly appreciate the other methods which will make the code easier. Resetting the strings and integer seemed to fix the stacking problem, but I am still stuck on getting all the numbers stacked into the array, and the conversion of the string to a number. I will browse through the code you posted and see if I further can solve my problem. :-)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 81, "user_id": 11119570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G6qCN.jpg?s=128&g=1", "display_name": "theDev", "link": "https://stackoverflow.com/users/11119570/thedev"}, "edited": false, "score": 0, "creation_date": 1557346177, "post_id": 56045440, "comment_id": 98738146, "body": "@Daniel it would be helpful if you would edit your question to show the actual input you are typing in, and what the expected result should look like."}, {"owner": {"reputation": 81, "user_id": 11119570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G6qCN.jpg?s=128&g=1", "display_name": "theDev", "link": "https://stackoverflow.com/users/11119570/thedev"}, "edited": false, "score": 0, "creation_date": 1557347995, "post_id": 56045440, "comment_id": 98738934, "body": "I have added 3 examples, which should produce the same result."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 81, "user_id": 11119570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G6qCN.jpg?s=128&g=1", "display_name": "theDev", "link": "https://stackoverflow.com/users/11119570/thedev"}, "edited": false, "score": 0, "creation_date": 1557351524, "post_id": 56045440, "comment_id": 98740209, "body": "@Daniel I updated my answer. There was an error in my first example, which I have fixed."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1557351814, "last_edit_date": 1557351814, "creation_date": 1557333891, "answer_id": 56045440, "question_id": 56044934, "link": "https://stackoverflow.com/questions/56044934/i-am-currently-trying-to-save-a-set-of-integers-in-a-int-array-by-redefining-st/56045440#56045440", "title": "I am currently trying to save a set of integers in a int array, by redefining string into numbers, then store it in the array", "body": "<p>I see quite a few issues with your code.</p>\n\n<ul>\n<li><p>Prior to C++11, <code>while (datainput[n])</code> has <em>undefined behavior</em> once <code>n</code> reaches the end of the string.</p></li>\n<li><p>The way you are checking for numeric digits can be greatly simplified using <code>std::isdigit()</code>, or even just a simple range check using the <code>&gt;=</code> and <code>&lt;=</code> operators.</p></li>\n<li><p>You are not correctly accounting for numbers that are separated by other characters, or when the last number in the string is at the very end of the string.</p></li>\n<li><p>The statement <code>c &gt;&gt; myray[raycount];</code> needs to be changed to <code>myray[raycount] = c;</code> instead.  And you are not breaking your loop if <code>raycount</code> reaches the max capacity of <code>myray[]</code>.</p></li>\n<li><p>You are not resetting <code>str3</code> back to an blank string after converting it with <code>std::stoi()</code>.  You just keep appending new digits to the end of previous digits with no break in between numbers.</p></li>\n</ul>\n\n<p>With that said, try something more like this instead:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    string datainput, str3;\n    cin &gt;&gt; datainput;\n\n    int myray[10];\n    int raycount = 0;\n\n    bool gettingDigits = false;\n\n    for (int n = 0; n &lt; datainput.size(); ++n)\n    {\n        char ch = datainput[n];\n\n        //if (isdigit(ch))\n        if (ch &gt;= '0' &amp;&amp; ch &lt;= '9')\n        {\n            if (!gettingDigits)\n            {\n                str3 = \"\";\n                gettingDigits = true;\n            }\n\n            str3 += ch;\n        }\n        else\n        {\n            if (gettingDigits)\n            {\n                myray[raycount] = stoi(str3);\n                raycount++;\n                str3 = \"\";\n                gettingDigits = false;\n                if (raycount == 10) break;\n            }\n        }\n    }\n\n    if (gettingDigits &amp;&amp; (raycount &lt; 10))\n    {\n        myray[raycount] = stoi(str3);\n        raycount++;\n    }\n\n    for (int n = 0; n &lt; raycount; ++n)\n        cout &lt;&lt; myray[n] &lt;&lt; endl;\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/x5YKAZ\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p>Alternatively:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    string datainput, str3;\n    cin &gt;&gt; datainput;\n\n    int myray[10];\n    int raycount = 0;\n\n    string::size_type start = datainput.find_first_of(\"0123456789\");\n    string::size_type end;\n\n    while (start != string::npos)\n    {\n        end = datainput.find_first_not_of(\"0123456789\", start+1);\n        if (end == string::npos)\n        {\n            str3 = datainput.substr(start);\n            myray[raycount] = stoi(str3);\n            raycount++;\n            break;\n        }\n\n        str3 = datainput.substr(start, end-start);\n        myray[raycount] = stoi(str3);\n        raycount++;\n        if (raycount == 10) break;\n\n        start = datainput.find_first_of(\"0123456789\", end+1);\n    }\n\n    for (int n = 0; n &lt; raycount; ++n)\n        cout &lt;&lt; myray[n] &lt;&lt; endl;\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/mNrLkx\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 81, "user_id": 11119570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G6qCN.jpg?s=128&g=1", "display_name": "theDev", "link": "https://stackoverflow.com/users/11119570/thedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 56045440, "answer_count": 2, "score": 0, "last_activity_date": 1557351814, "creation_date": 1557331927, "last_edit_date": 1557347960, "question_id": 56044934, "link": "https://stackoverflow.com/questions/56044934/i-am-currently-trying-to-save-a-set-of-integers-in-a-int-array-by-redefining-st", "title": "I am currently trying to save a set of integers in a int array, by redefining string into numbers, then store it in the array", "body": "<p>I am trying to convert input text/numbers (string), which will include any characters, but I want to separate the numbers from the characters and store them into an integer array, once it is converted from a string.</p>\n\n<p>I believe the problem is where the string is converting to an integer by use of <code>stoi()</code>, but I cannot seem to spot the problem.</p>\n\n<p>Currently, the code accepts any input and turns it into a string, the string is then checked character by character, and all the numbers without separation with comma or space is added together, once a comma or space, or any other character separates the number, the number as a whole is added to the array, and then continues to check the string for more numbers.</p>\n\n<p>Any ideas?\nInput Example1: 12, 13, 15\n    Input Example2: 12 13 15\n        Input Example3: 12ab13cd15ef</p>\n\n<p>Result in integer array: 0[12] 1[13] 2[15]\nThese numbers will be used in the specific order, by using the numbers within the array. </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nint main()\n{\n    string datainput, str1, str3;\n    cin &gt;&gt; datainput;\n    int n = 0, raycount = 0, c;\n    int myray[10];\n    while (datainput[n])\n    {\n        if (datainput[n] == ('0') || datainput[n] == ('1') || datainput[n] == ('2') || datainput[n] == ('3') || datainput[n] == ('4') ||\n            datainput[n] == ('5') || datainput[n] == ('6') || datainput[n] == ('7') || datainput[n] == ('8') || datainput[n] == ('9'))\n        {\n            str1 = datainput[n];\n            str3 += str1;\n        }\n        else\n        {\n            c= stoi(str3);\n            c &gt;&gt; myray[raycount];\n            raycount++;\n        }\n        n++;\n    }\n    cout &lt;&lt; myray[0] &lt;&lt; endl;\n    cout &lt;&lt; myray[1] &lt;&lt; endl;\n    cout &lt;&lt; myray[2] &lt;&lt; endl;\n    cout &lt;&lt; myray[3] &lt;&lt; endl;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "constructor", "c++17", "std-filesystem"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 5, "creation_date": 1557331720, "post_id": 56044729, "comment_id": 98731569, "body": "Can you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 0, "creation_date": 1557332508, "post_id": 56044729, "comment_id": 98731908, "body": "This is more of a guess, but try the fs::append() method."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1557348401, "post_id": 56044729, "comment_id": 98739094, "body": "&quot;Using the debugger&quot; That may very well be your issue. How the path data is stored within the class is implementation specific, and may be hinding things from you. You should make sure this is reproducible through the class&#39; interface (i.e. print the concatenated path to the console)"}, {"owner": {"reputation": 454, "user_id": 4502198, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-W1UpugF1JVY/AAAAAAAAAAI/AAAAAAAAAIo/f_JGBlIcztc/photo.jpg?sz=128", "display_name": "TheBeardedQuack", "link": "https://stackoverflow.com/users/4502198/thebeardedquack"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1557388854, "post_id": 56044729, "comment_id": 98750275, "body": "@rustyx Please see the above edit for a complete example. @Mansoor As you suggested I&#39;ve also tested <code>path::append()</code> and this gives the same result @Frank In making the edited example I&#39;ve removed all layers of abstraction, and I&#39;ve also tested outside of the debugger when built in release mode. Still no difference."}, {"owner": {"reputation": 454, "user_id": 4502198, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-W1UpugF1JVY/AAAAAAAAAAI/AAAAAAAAAIo/f_JGBlIcztc/photo.jpg?sz=128", "display_name": "TheBeardedQuack", "link": "https://stackoverflow.com/users/4502198/thebeardedquack"}, "edited": false, "score": 0, "creation_date": 1557389975, "post_id": 56044729, "comment_id": 98750905, "body": "Sorry, missed the <code>#include</code>s in the MCVE, should now compile, although M.M good spot on that bug :)"}], "answers": [{"tags": [], "owner": {"reputation": 454, "user_id": 4502198, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-W1UpugF1JVY/AAAAAAAAAAI/AAAAAAAAAIo/f_JGBlIcztc/photo.jpg?sz=128", "display_name": "TheBeardedQuack", "link": "https://stackoverflow.com/users/4502198/thebeardedquack"}, "is_accepted": true, "score": 1, "last_activity_date": 1557389882, "creation_date": 1557389882, "answer_id": 56055060, "question_id": 56044729, "link": "https://stackoverflow.com/questions/56044729/stdfilesystempathoperator-args-not-working-as-expected/56055060#56055060", "title": "`std::filesystem::path::operator/(/*args*/)` not working as expected", "body": "<p>I'd like to give thanks to @rustyx and @Frank for their suggestions, following this advice has led me to discover a bug in the way I create the initial string that gets passed to the path constructor (Also @M.M who found the exact bug while I was typing this answer)</p>\n\n<p>I created a function (that is in use in my class) <code>std::string ExpandPath(const std::string&amp; path)</code> which uses the Windows API to expand any environment variables in a path and return a string. This string is generated from a <code>char*</code> and a count, that count includes the null byte so when creating an string using the constructor variant <code>std::string(char* cstr, size_t len)</code> this includes the null byte in the string itself.</p>\n\n<p>Because I was using the debugger to interrogate the variables it reads C-style strings and stops at the null byte. In my original example I also use <code>printf()</code> as I just happen to prefer this function for output, but again this stops printing at the null byte. If I change the output to use <code>std::cout</code> I can see that the output has the expected path but with an extra space their (the null byte being printed as a space). Using <code>std::cout</code> I see that my paths result as the following with each append:</p>\n\n<pre><code>Path = C:\\Users\\Me\\Desktop\\Devices\nPath = C:\\Users\\Me\\Desktop\\Devices \\12345\nPath = C:\\Users\\Me\\Desktop\\Devices \\12345\\#Bake.json\n</code></pre>\n\n<hr>\n\n<h3>Summary:</h3>\n\n<p>Bug in <strong>my</strong> <code>ExpandPath()</code> where</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>  return std::string{buffer.get(), setBufferLen};\n</code></pre>\n\n<p>Should be</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>  return std::string{buffer.get(), setBufferLen - 1};\n</code></pre>\n"}], "owner": {"reputation": 454, "user_id": 4502198, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-W1UpugF1JVY/AAAAAAAAAAI/AAAAAAAAAIo/f_JGBlIcztc/photo.jpg?sz=128", "display_name": "TheBeardedQuack", "link": "https://stackoverflow.com/users/4502198/thebeardedquack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 56055060, "answer_count": 1, "score": 2, "last_activity_date": 1557389960, "creation_date": 1557331136, "last_edit_date": 1592644375, "question_id": 56044729, "link": "https://stackoverflow.com/questions/56044729/stdfilesystempathoperator-args-not-working-as-expected", "title": "`std::filesystem::path::operator/(/*args*/)` not working as expected", "body": "<p>I have a class with an initialiser list in the constructor where one of the fields I'm initialising is a <code>std::filesystem::path</code> but it doesn't seem to be initialising to the expected value.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>MyClass::MyClass(\n    unsigned int deviceSerial,\n    const std::string&amp; processName\n) :\n    deviceSerial(deviceSerial),\n    processName(processName),\n    configFilePath(GetBasePath() / std::to_string(deviceSerial) / (&quot;#&quot; + processName + &quot;.json&quot;))\n{\n    /* Parameter checks */\n}\n</code></pre>\n<p>Using the debugger I can see that <code>GetBasePath()</code> is returning exactly what I expect (returns <code>std::filesystem::path</code> with correct path) but the <code>/</code> operator doesn't seem to be having an effect. Once inside the body of the constructor I can see that <code>configFilePath</code> is setup to the result of <code>GetBasePath()</code> without the extra info appended.</p>\n<p>I'm using MSVS-2019, I have the C++ language standard set to C++17 and in debug mode I have all optimisations disabled.</p>\n<p>I have also tested the following in the body of the class and I still see <code>path</code> as simply the result of <code>GetBasePath()</code> and the extra items are not being appended.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>{\n    auto path = GetBasePath();             // path = &quot;C:/Users/Me/Desktop/Devices&quot;\n    path /= std::to_string(deviceSerial);  // path = &quot;C:/Users/Me/Desktop/Devices&quot;\n    path /= (&quot;#&quot; + processName + &quot;.json&quot;); // path = &quot;C:/Users/Me/Desktop/Devices&quot;\n}\n</code></pre>\n<p>On a slight side note I also tried the above test with <code>+=</code> instead of <code>/=</code> and I still see the same results.</p>\n<h1>Edit</h1>\n<p>As requested, below is a minimal complete and verifiable example.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;Windows.h&gt;\n#include &lt;cstdio&gt;\n#include &lt;filesystem&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n\nstd::string ExpandPath(const std::string &amp;str) {\n  auto reqBufferLen = ExpandEnvironmentStrings(str.c_str(), nullptr, 0);\n\n  if (reqBufferLen == 0) {\n    throw std::system_error((int)GetLastError(), std::system_category(),\n                            &quot;ExpandEnvironmentStrings() failed.&quot;);\n  }\n\n  auto buffer = std::make_unique&lt;char[]&gt;(reqBufferLen);\n  auto setBufferLen =\n      ExpandEnvironmentStrings(str.c_str(), buffer.get(), reqBufferLen);\n\n  if (setBufferLen != reqBufferLen - 1) {\n    throw std::system_error((int)GetLastError(), std::system_category(),\n                            &quot;ExpandEnvironmentStrings() failed.&quot;);\n  }\n\n  return std::string{buffer.get(), setBufferLen};\n}\n\nint main() {\n  unsigned int serial = 12345;\n  std::string procName = &quot;Bake&quot;;\n\n  std::filesystem::path p(ExpandPath(&quot;%USERPROFILE%\\\\Desktop\\\\Devices&quot;));\n  std::printf(&quot;Path = %s\\n&quot;, p.string().c_str());\n  // p = C:\\Users\\Me\\Desktop\\Devices\n\n  p /= std::to_string(serial);\n  std::printf(&quot;Path = %s\\n&quot;, p.string().c_str());\n  // p = C:\\Users\\Me\\Desktop\\Devices\n\n  p /= &quot;#&quot; + procName + &quot;.json&quot;;\n  std::printf(&quot;Path = %s\\n&quot;, p.string().c_str());\n  // p = C:\\Users\\Me\\Desktop\\Devices\n\n  std::getchar();\n}\n\nI've also used this example and tested with `p.append()` and got the same result.\n</code></pre>\n"}, {"tags": ["c++", "mergesort", "inversion"], "comments": [{"owner": {"reputation": 11, "user_id": 11040107, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IHRRm5jB6d4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOg0taK03kuQXC-l4pBWxfuiILppQ/mo/photo.jpg?sz=128", "display_name": "SunshengGu", "link": "https://stackoverflow.com/users/11040107/sunshenggu"}, "edited": false, "score": 0, "creation_date": 1557331157, "post_id": 56044717, "comment_id": 98731330, "body": "Additional info: An inversion happens when the i&#39;th element is greater than the j&#39;th element, where i&lt;j. For example, say the vector is {1,3,5,2}, then there are 2 inversions: {3,2} and {5,2}. The countNsort function keeps recursing and dividing the vector until the length of the subvector is only one element. The countNsortSplit function performs merge sort to sort and count the number of inversions."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1557331305, "post_id": 56044717, "comment_id": 98731401, "body": "You&#39;re calling <i>undefined behavior</i> here <code>merge[k]</code> you must first resize the vector before you can access it with the indexing operator. Also don&#39;t put additional information in comments. You always can <a href=\"https://stackoverflow.com/posts/56044717/edit\">edit</a> your question."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1557332542, "post_id": 56044717, "comment_id": 98731927, "body": "Hint: A <code>std::vector</code> is zero size when initialized. To add elements: <code>push_back</code> or <code>emplace_back</code>. For fixed-size: <code>std::array</code>."}, {"owner": {"reputation": 25661, "user_id": 430766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee7e736eeb33c4b03d4a5e6e813a9abc?s=128&d=identicon&r=PG", "display_name": "bitmask", "link": "https://stackoverflow.com/users/430766/bitmask"}, "edited": false, "score": 1, "creation_date": 1557332777, "post_id": 56044717, "comment_id": 98732012, "body": "Recommend running such programs with asan or valgrind. They sometimes catch the problem much earlier, before the segfault actually manifests. YMMV"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1557338721, "last_edit_date": 1557338721, "creation_date": 1557334779, "answer_id": 56045688, "question_id": 56044717, "link": "https://stackoverflow.com/questions/56044717/getting-a-segmentation-fault-11-when-finding-number-of-inversions-using-merge/56045688#56045688", "title": "Getting a &quot;Segmentation fault: 11&quot; when finding number of inversions using mergesort in C++", "body": "<p>There are multiple problems in you code:</p>\n\n<ul>\n<li>You do not define the destination vector with the proper size</li>\n<li>You do not test if <code>i</code> or <code>j</code> have reached to size of the <code>left</code> and <code>right</code> vectors respectively.</li>\n<li>The initializer for vector <code>a</code> in <code>main()</code> has an invalid syntax.</li>\n</ul>\n\n<p>Note that you do not need to pass the vector sizes to <code>countNsort</code> and <code>countNsortSplit</code>.</p>\n\n<p>Here is a corrected version:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nstruct returnVal {\n    int count;\n    vector&lt;int&gt; sorted_array;\n};\n\nreturnVal countNsortMerge(vector&lt;int&gt; left, vector&lt;int&gt; right) {\n    int leftSize = left.size();\n    int rightSize = right.size();\n    int n = leftSize + rightSize;\n    int count = 0;\n    vector&lt;int&gt; merge(n);\n    int i = 0;\n    int j = 0;\n    for (int k = 0; k &lt; n; k++) {\n        if (i &lt; leftSize &amp;&amp; (j == rightSize || left[i] &lt; right[j])) {\n            merge[k] = left[i++];\n        } else {\n            merge[k] = right[j++];\n            // increment count by the # of remaining elements in left\n            count += leftSize - i;\n        }\n    }\n    returnVal output;\n    output.sorted_array = merge;\n    output.count = count;\n    return output;\n}\n\nreturnVal countNsort(vector&lt;int&gt; a) {\n    int n = a.size();\n    if (n &lt;= 1) {\n        returnVal output;\n        output.sorted_array = a;\n        output.count = 0;\n        return output;\n    } else {\n        int half = n / 2;\n        vector&lt;int&gt; b(a.begin(), a.begin() + half);\n        vector&lt;int&gt; c(a.begin() + half, a.begin() + n);\n        returnVal left = countNsort(b);\n        returnVal right = countNsort(c);\n        returnVal result = countNsortMerge(left.sorted_array, right.sorted_array);\n        result.count += left.count + right.count;\n        return result;\n    }\n}\n\nint main() {\n    //int values[] = { 1, 3, 5, 2 };\n    //int values[] = { 2, 1 };\n    int values[] = { 1, 3, 5, 2, 4, 6 };\n    vector&lt;int&gt; a(values, values + sizeof values / sizeof *values);\n    returnVal result = countNsort(a);\n    cout &lt;&lt; result.count &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Note however that it would be more efficient and idiomatic to sort the vector in place and return the inversion count:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nsize_t countNsortMerge(std::vector&lt;int&gt;&amp; a, size_t start, size_t middle, size_t end) {\n    std::vector&lt;int&gt; temp(a.begin() + start, a.begin() + middle);\n    size_t i = 0;\n    size_t leftSize = middle - start;\n    size_t j = middle;\n    size_t count = 0;\n    for (size_t k = start; k &lt; end; k++) {\n        if (i &lt; leftSize &amp;&amp; (j == end || temp[i] &lt; a[j])) {\n            a[k] = temp[i++];\n        } else {\n            a[k] = a[j++];\n            // increment count by the # of remaining elements in left\n            count += leftSize - i;\n        }\n    }\n    return count;\n}\n\nsize_t countNsort(std::vector&lt;int&gt;&amp; a, size_t start, size_t end) {\n    if (end - start &lt;= 1) {\n        return 0;\n    } else {\n        size_t middle = start + (end - start) / 2;\n        size_t leftCount = countNsort(a, start, middle);\n        size_t rightCount = countNsort(a, middle, end);\n        return leftCount + rightCount + countNsortMerge(a, start, middle, end);\n    }\n}\n\nint main() {\n    //int values[] = { 1, 3, 5, 2 };\n    //int values[] = { 2, 1 };\n    int values[] = { 1, 3, 5, 2, 4, 6 };\n    std::vector&lt;int&gt; a(values, values + sizeof values / sizeof *values);\n    size_t result = countNsort(a, 0, a.size());\n    std::cout &lt;&lt; result &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11040107, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IHRRm5jB6d4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOg0taK03kuQXC-l4pBWxfuiILppQ/mo/photo.jpg?sz=128", "display_name": "SunshengGu", "link": "https://stackoverflow.com/users/11040107/sunshenggu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557338721, "creation_date": 1557331104, "last_edit_date": 1557338676, "question_id": 56044717, "link": "https://stackoverflow.com/questions/56044717/getting-a-segmentation-fault-11-when-finding-number-of-inversions-using-merge", "title": "Getting a &quot;Segmentation fault: 11&quot; when finding number of inversions using mergesort in C++", "body": "<p>I am writing a C++ program that finds the number of inversions in a vector using merge sort. An inversion happens when the <code>i</code>'th element is greater than the <code>j</code>'th element, where <code>i &lt; j</code>. For example, say the vector is <code>{ 1, 3, 5, 2 }</code>, then there are 2 inversions: <code>{3,2}</code> and <code>{5,2}</code>.\nThe <code>countNsort</code> function keeps recursing and dividing the vector until the length of the subvector is only one element. The <code>countNsortSplit</code> function performs merge sort to sort and count the number of inversions. </p>\n\n<p>I tried:</p>\n\n<ol>\n<li>Different ways of initializing the input vector. <code>vector&lt;int&gt; a{2,1};</code>, <code>vector&lt;int&gt; a; a={2,1};</code>, and <code>vector&lt;int&gt; a(2); a={2,1};</code>.</li>\n<li>Different ways of splitting the input vector into subvectors. <code>vector&lt;int&gt; c(a.begin()+half, a.begin()+n);</code> and <code>vector&lt;int&gt; c(a.begin()+half, a.end());</code>, where n is the size of the vector. </li>\n<li>Different IDEs. Atoms gives me this: <code>bash: line 1: 13763 Segmentation fault: 11  /tmp/cpp.out [Finished in 20.57s]</code>, CodeBlocks gives me this: <code>error: expected expression</code> for this line: <code>a={2,1}:</code>. </li>\n</ol>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct returnVal {\n    int count;\n    vector&lt;int&gt; sorted_array;\n};\n\nreturnVal countNsortSplit(vector&lt;int&gt; left, vector&lt;int&gt; right, int n) {\n    returnVal output;\n    int count = 0;\n    vector&lt;int&gt; merge;\n    int i = 0;\n    int j = 0;\n    for (int k = 0; k &lt; n; k++) {\n        if (left[i] &lt; right[j]) {\n            merge[k] = left[i];\n            i++;\n        } else {\n            merge[k] = right[j];\n            j++;\n            // increment count by the # of remaining elements in left\n            count += left.size()-i;\n        }\n    }\n    output.sorted_array = merge;\n    output.count = count;\n    return output;\n}\n\nreturnVal countNsort(vector&lt;int&gt; a, int n) {\n    returnVal output;\n    if (n == 1) {\n        output.sorted_array = a;\n        output.count = 0;\n        return output;\n    } else {\n        returnVal left;\n        returnVal right;\n        returnVal split;\n        int half = n / 2;\n        vector&lt;int&gt; b(a.begin(), a.begin() + half);\n        vector&lt;int&gt; c(a.begin() + half, a.begin() + n);\n        left = countNsort(b, half);\n        right = countNsort(c, n - half); // need n-n/2 in case of odd length\n        split = countNsortSplit(left.sorted_array, right.sorted_array, n);\n        output.sorted_array = split.sorted_array;\n        output.count = left.count + right.count + split.count;\n        return output;\n    }\n}\n\nint main() {\n    vector&lt;int&gt; a(2);\n    //a = {1,3,5,2};\n    //a = {1,3,5,2,4,6};\n    a = {2, 1};\n    returnVal result;\n    result = countNsort(a, a.size());\n    cout &lt;&lt; result.count &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "atom-editor", "linter"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1557331844, "post_id": 56044711, "comment_id": 98731614, "body": "Consider running your <code>g++</code> command on the command line. Make that right first. Then configure your IDE"}, {"owner": {"reputation": 369, "user_id": 8760639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ff3c5361cb77e0edf2b6017152bfed?s=128&d=identicon&r=PG&f=1", "display_name": "user-2147482565", "link": "https://stackoverflow.com/users/8760639/user-2147482565"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1557332761, "post_id": 56044711, "comment_id": 98732005, "body": "@BasileStarynkevitch what do you mean by this sorry? I can use &#39;g++ brownian_bridge_min.cpp -o brownian_bridge_min.o -I include/ -std=c++2a&#39; to compile if I add a main() function"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1557332923, "post_id": 56044711, "comment_id": 98732063, "body": "You forgot <code>-g -Wall</code>  as options to your <code>g++</code>  command"}, {"owner": {"reputation": 369, "user_id": 8760639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ff3c5361cb77e0edf2b6017152bfed?s=128&d=identicon&r=PG&f=1", "display_name": "user-2147482565", "link": "https://stackoverflow.com/users/8760639/user-2147482565"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1557333227, "post_id": 56044711, "comment_id": 98732193, "body": "@BasileStarynkevitch yes I did sorry. But do you know how to get rid of this warning on atom? I know I can still compile the file from g++ since I&#39;m actually supplying the include headers, but I want the error to be gone on my editor"}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1557336148, "post_id": 56044711, "comment_id": 98733603, "body": "The <code>linter-gcc</code> warning is accurate: the header file is not being referenced by path correctly. The package is functioning correctly, and this is not a config issue, but rather a code issue."}, {"owner": {"reputation": 369, "user_id": 8760639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ff3c5361cb77e0edf2b6017152bfed?s=128&d=identicon&r=PG&f=1", "display_name": "user-2147482565", "link": "https://stackoverflow.com/users/8760639/user-2147482565"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1557339076, "post_id": 56044711, "comment_id": 98735086, "body": "@MattSchuchard oh right, I thought changing the settings in the &#39;GCC Include Paths&#39; made linter-gcc look for the include files when writing?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 13104602, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhpI_LU6UzeCA3QLr7wWuNuKuqQgRY0M-wqVuxDYw=k-s128", "display_name": "Edson Manoel", "link": "https://stackoverflow.com/users/13104602/edson-manoel"}, "is_accepted": false, "score": 0, "last_activity_date": 1607985473, "creation_date": 1607985473, "answer_id": 65297521, "question_id": 56044711, "link": "https://stackoverflow.com/questions/56044711/header-files-not-found-in-atom-editor-for-c/65297521#65297521", "title": "Header files not found in Atom editor for C++", "body": "<p><a href=\"https://github.com/AtomLinter/linter-gcc/issues/61\" rel=\"nofollow noreferrer\">https://github.com/AtomLinter/linter-gcc/issues/61</a></p>\n<blockquote>\n<p>You have to add the project root to your include directories. If you\nsimply copy and paste the linter-gcc command into the terminal, you'll\nsee the same error. The solution is to add the path to your include\npaths to the GCC Include paths setting. So if you have in your project\nroot a folder called include that contains your header files, you need\nti write ./include in your GCC Include paths settings.\nGenerally, it's good practice to put your header files in a folder\ncalled include in your project root. Then you can simply write\n./include in your GCC Include paths setting so the compiler finds the\nheader files.</p>\n</blockquote>\n<p>In sumary, try to put only ./include in your gcc-linter package settings, in both fields for includes:\n<a href=\"https://i.stack.imgur.com/X5FbJ.png\" rel=\"nofollow noreferrer\">gcc-linter settings</a></p>\n<p>After that, go back to your file and click cntrl+s or just save it again. It will run the linter again and the issue will be gone (maybe you did not run the linter again after adding the includes as you showed in your comment, so that is why you kept seeing the error)</p>\n"}], "owner": {"reputation": 369, "user_id": 8760639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ff3c5361cb77e0edf2b6017152bfed?s=128&d=identicon&r=PG&f=1", "display_name": "user-2147482565", "link": "https://stackoverflow.com/users/8760639/user-2147482565"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 799, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1607985473, "creation_date": 1557331090, "last_edit_date": 1557331711, "question_id": 56044711, "link": "https://stackoverflow.com/questions/56044711/header-files-not-found-in-atom-editor-for-c", "title": "Header files not found in Atom editor for C++", "body": "<p>I'm trying to use the Atom editor for writing C++ code. I want to use the linter-gcc package, but I keep getting the error that it cannot find my header files.</p>\n\n<p>I have tried going into the linter-gcc settings and adding in the GCC Include Paths the following:</p>\n\n<pre><code>-/, ./, ./include\n</code></pre>\n\n<p>Here are my linter-gcc settings currently:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nH31b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nH31b.png\" alt=\"linter-gcc settings\"></a></p>\n\n<p>and you can see here the editor where the issue arises and on the left is the directory I'm working in</p>\n\n<p><a href=\"https://i.stack.imgur.com/WlEee.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WlEee.png\" alt=\"editor\"></a></p>\n"}, {"tags": ["c++", "right-to-left", "conditional-operator", "associativity", "left-to-right"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1557331031, "post_id": 56044648, "comment_id": 98731265, "body": "Why would you expect <code>8</code>? Only one of the two branches execute, not both."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557331062, "post_id": 56044648, "comment_id": 98731283, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/operator_precedence</a> , <a href=\"https://en.cppreference.com/book/operator_precedence\" rel=\"nofollow noreferrer\">en.cppreference.com/book/operator_precedence</a>"}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 8494948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898f0cb444f4542c93a244ff19dd1c72?s=128&d=identicon&r=PG&f=1", "display_name": "Tulsi", "link": "https://stackoverflow.com/users/8494948/tulsi"}, "edited": false, "score": 0, "creation_date": 1557331496, "post_id": 56044789, "comment_id": 98731483, "body": "That means associativity rule apply only if ( there is another opaertor of same precedence present in expression, ) otherwise not."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 6, "last_activity_date": 1557331680, "last_edit_date": 1557331680, "creation_date": 1557331326, "answer_id": 56044789, "question_id": 56044648, "link": "https://stackoverflow.com/questions/56044648/how-does-associativity-of-operator-work-during-evaluation-of-expression/56044789#56044789", "title": "How does associativity of operator work during evaluation of expression?", "body": "<p>Associativity tells you what happens if you have multiple instances of the same operator in a row. For example,</p>\n\n<pre><code>f() - g() - h()\n</code></pre>\n\n<p>parses as</p>\n\n<pre><code>(f() - g()) - h()\n</code></pre>\n\n<p>and not</p>\n\n<pre><code>f() - (g() - h())\n</code></pre>\n\n<p>because <code>-</code> is left associative, not right associative.</p>\n\n<p>None of this has anything to do with evaluation order, which determines which function is called first.</p>\n\n<p>As for <code>?:</code> being right associative, it means</p>\n\n<pre><code>a ? b : c ? d : e\n</code></pre>\n\n<p>parses as</p>\n\n<pre><code>a ? b : (c ? d : e)\n</code></pre>\n\n<p>(This makes slightly more sense if you think of <code>?...:</code> as a single operator.)</p>\n\n<p>However, <code>?:</code> guarantees left-to-right evaluation: The first operand is always evaluated first, then exactly one of the other operands (depending on the truth value of the first result).</p>\n\n<hr>\n\n<p>In your example,</p>\n\n<pre><code>c=a&gt;b? a=a*2: a=a+3\n</code></pre>\n\n<p>(please never put assignments inside <code>?:</code> like that in real code) is parsed as</p>\n\n<pre><code>c = ((a&gt;b) ? (a=a*2) : (a=a+3))\n</code></pre>\n\n<p>This is entirely due to precedence, not associativity (we don't have multiple identical operators next to each other here).</p>\n\n<p><code>a&gt;b</code> is evaluated first (yielding <code>false</code>), which causes <code>a=a+3</code> to be evaluated (yielding <code>4</code>), which is then assigned to <code>c</code>.</p>\n"}], "owner": {"reputation": 149, "user_id": 8494948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898f0cb444f4542c93a244ff19dd1c72?s=128&d=identicon&r=PG&f=1", "display_name": "Tulsi", "link": "https://stackoverflow.com/users/8494948/tulsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 56044789, "answer_count": 1, "score": 0, "last_activity_date": 1557332641, "creation_date": 1557330906, "last_edit_date": 1557332641, "question_id": 56044648, "link": "https://stackoverflow.com/questions/56044648/how-does-associativity-of-operator-work-during-evaluation-of-expression", "title": "How does associativity of operator work during evaluation of expression?", "body": "<p>I was learning precedence rule in C++. In which conditional operator is said to have Right to Left associativity. \nI interpret this as evaluation of expression start from right and proceed to left. \nSo, for the below code-</p>\n\n<pre><code>int a=1, b=2, c;\nc=a&gt;b? a=a*2: a=a+3;\ncout&lt;&lt;c&lt;&lt;\" \"&lt;&lt;a;\n</code></pre>\n\n<p>I assume output as</p>\n\n<pre><code>8 8\n</code></pre>\n\n<p>But actual output is </p>\n\n<pre><code>4 4\n</code></pre>\n\n<p>I don't understand how actually this associativity works, because from the above output it seems to me conditional operator have left to right associativity. </p>\n"}, {"tags": ["c++", "string", "operator-overloading", "string-literals", "user-defined-literals"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1557330614, "post_id": 56044454, "comment_id": 98731061, "body": "Why didn&#39;t you just try to compile it to determine if it is valid?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1557330658, "post_id": 56044454, "comment_id": 98731082, "body": "@JesperJuhl To be fair, it&#39;s not because code compiles that it is valid."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1557330834, "post_id": 56044454, "comment_id": 98731167, "body": "@Fran&#231;oisAndrieux Of course not (as I know you know I know). But it would have let OP add the additional info: &quot;it compiles&quot; or &quot;it doesn&#39;t compile with this error: ...&quot; . And doing some basic testing yourself (like &quot;does this even compile?&quot;) is a good habit to get into."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1557341908, "post_id": 56044454, "comment_id": 98736347, "body": "They (not me) probably thought you did not do enough research before asking the question. That is a bit subjective."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1557330416, "post_id": 56044472, "comment_id": 98730969, "body": "Welcome back Vlad!"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1557330526, "post_id": 56044472, "comment_id": 98731016, "body": "@Bathsheba Thanks. I&#39;m glad to meet you.:)"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1557330564, "post_id": 56044472, "comment_id": 98731036, "body": "Or you could just write <code>a += &quot;Hello&quot;   &quot; &quot; &quot;World&quot;</code> or even ``a += &quot;Hello World&quot;`, if you are feeling adventurous."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1557330600, "post_id": 56044472, "comment_id": 98731054, "body": "@DanM. You are right but the question is about the operator +."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1557330600, "post_id": 56044472, "comment_id": 98731055, "body": "@bruno: It has hidden depths. Note that if <code>a += b</code> really was replaced with <code>a = a + b</code>, then the code would compile."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1557330623, "post_id": 56044472, "comment_id": 98731067, "body": "@DanM.: How about <code>a += &quot;Hello&quot;s + &quot;&quot; + &quot;World&quot;</code>?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1557330823, "post_id": 56044472, "comment_id": 98731162, "body": "@bruno or just no code at all since you never use <code>a</code> :P"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1557332200, "last_edit_date": 1557332200, "creation_date": 1557330312, "answer_id": 56044472, "question_id": 56044454, "link": "https://stackoverflow.com/questions/56044454/is-this-string-addition-a-valid-expression/56044472#56044472", "title": "Is this string addition a valid expression?", "body": "<p>This is not a valid expression because there is no operator + for string literals</p>\n\n<pre><code>\"Hello\" + \" \"+\"World\n</code></pre>\n\n<p>(more precisely for pointers because in expressions string literals with rare exceptions are converted to pointers to their first symbols.)</p>\n\n<p>Instead you could write</p>\n\n<pre><code>std::string a; \n( ( a += \"Hello\" ) += \" \" ) += \"World\";\n</code></pre>\n\n<p>But it would be more readable if to write</p>\n\n<pre><code>a += \"Hello\";\na += \" \";\na += \"World\";\n</code></pre>\n\n<p>Or as <strong>@Bathsheba</strong> pointed out in a (valuable) comment to my answer you could use a user-defined string literal the following way</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    using namespace std::string_literals;\n    std::string a; \n    a += \"Hello\"s + \" \" + \"World\";\n\n    std::cout &lt;&lt; a &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>As for this statement</p>\n\n<pre><code>a += \"Hello\" + name +\"World\";\n</code></pre>\n\n<p>then it can be rewriten using the operators defined for the class <code>std::basic_string</code></p>\n\n<pre><code>template&lt;class charT, class traits, class Allocator&gt;\nbasic_string&lt;charT, traits, Allocator&gt;\noperator+(const charT* lhs, const basic_string&lt;charT, traits, Allocator&gt;&amp; rhs);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>template&lt;class charT, class traits, class Allocator&gt;\nbasic_string&lt;charT, traits, Allocator&gt;\noperator+(basic_string&lt;charT, traits, Allocator&gt;&amp;&amp; lhs, const charT* rhs);\n</code></pre>\n\n<p>like</p>\n\n<pre><code>a += operator +( operator +( \"Hello\", name ), \"World\" ); \n</code></pre>\n\n<p>For example</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::string a;\n    std::string name = \"Old\";\n\n    a += operator +( operator +( \"Hello \", name ), \" World\" ); \n\n    std::cout &lt;&lt; a &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Take into account that each operator returns an object of the type <code>std::basic_string</code> for which the <code>operator +</code> is defined. That is in each call of the operators there is present an object of the type <code>std::basic_string</code> as an argument.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1557330725, "last_edit_date": 1557330725, "creation_date": 1557330372, "answer_id": 56044490, "question_id": 56044454, "link": "https://stackoverflow.com/questions/56044454/is-this-string-addition-a-valid-expression/56044490#56044490", "title": "Is this string addition a valid expression?", "body": "<p>The expression <code>a += \"Hello\" + \" \" + \"World\"</code> is <em>grouped</em> as <code>a += (\"Hello\" + \" \" + \"World\")</code>.</p>\n\n<p>The right hand side is a set of 3 <code>const char[]</code> literals. These decay to <code>const char*</code> pointers when applied to binary addition. Since you can't add pointers, the compiler is required to issue a diagnostic.</p>\n\n<p>(Note that the ostensibly equivalent expression <code>a = a + \"Hello\" + \" \" + \"World\"</code> is compilable.)</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 1513962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b5cba8a56b893d8f9189264cff18c05?s=128&d=identicon&r=PG", "display_name": "ash007", "link": "https://stackoverflow.com/users/1513962/ash007"}, "edited": false, "score": 0, "creation_date": 1557331015, "post_id": 56044503, "comment_id": 98731260, "body": "Why does the second example compiles ?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 31, "user_id": 1513962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b5cba8a56b893d8f9189264cff18c05?s=128&d=identicon&r=PG", "display_name": "ash007", "link": "https://stackoverflow.com/users/1513962/ash007"}, "edited": false, "score": 0, "creation_date": 1557331466, "post_id": 56044503, "comment_id": 98731474, "body": "@ash007 <a href=\"https://softwareengineering.stackexchange.com/q/254984/17853\">It&#39;s a language feature</a>, albeit a little-known one."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1557330773, "last_edit_date": 1557330773, "creation_date": 1557330408, "answer_id": 56044503, "question_id": 56044454, "link": "https://stackoverflow.com/questions/56044454/is-this-string-addition-a-valid-expression/56044503#56044503", "title": "Is this string addition a valid expression?", "body": "<p>The compound assignment operator <code>+=</code> doesn't come into it.</p>\n\n<p>You can use <code>+=</code> with <code>std::string</code> because <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator%2B%3D\" rel=\"nofollow noreferrer\">it defines the relevant overload</a>, but it only gets <em>one</em> argument.</p>\n\n<p>And you've tried to pass, as that argument, an expression constructed by <code>+</code>ing multiple string literals. This will not compile.</p>\n\n<p>Some alternatives, in this toy case, which may inspire a solution for whatever is your real case:</p>\n\n<h3>Option 1</h3>\n\n<pre><code>// Multiple calls to +=\nstd::string a;\na += \"Hello\";\na += \" \";\na += \"World\";\n</code></pre>\n\n<h3>Option 2</h3>\n\n<pre><code>// String literal concatenation!\nstd::string a; \na += \"Hello\" \" \" \"World\";\n</code></pre>\n\n<h3>Option 3</h3>\n\n<pre><code>// Repeated std::string concat\nstd::string a;\na += std::string(\"Hello\") + \" \" + \"World\";\n</code></pre>\n\n<h3>Option 4</h3>\n\n<pre><code>// Same\nusing namespace std::string_literals;\nstd::string a; \na += \"Hello\"s + \" \" + \"World\";\n</code></pre>\n\n<h3>Option 5</h3>\n\n<pre><code>// Don't bother\nstd::string a;\na += \"Hello World\";\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 1513962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b5cba8a56b893d8f9189264cff18c05?s=128&d=identicon&r=PG", "display_name": "ash007", "link": "https://stackoverflow.com/users/1513962/ash007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 56044472, "answer_count": 3, "score": 1, "last_activity_date": 1557332200, "creation_date": 1557330259, "last_edit_date": 1557331137, "question_id": 56044454, "link": "https://stackoverflow.com/questions/56044454/is-this-string-addition-a-valid-expression", "title": "Is this string addition a valid expression?", "body": "<p>I was curious if the compound assignment operators are valid for multiple parameters. My guess is += will have no side-effect but may not be the same case with \"-=\".</p>\n\n<pre><code>std::string a; \na += \"Hello\" + \" \"+\"World\"; // doesn't compile\nstd::string name = \"Old\";\na += \"Hello\" + name +\"World\"; // compiles\n</code></pre>\n"}, {"tags": ["c#", "c++", "dll", "v8", "node-gyp"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1557334038, "post_id": 56044428, "comment_id": 98732569, "body": "Taking advantage of a [ComVisible] C# class requires <a href=\"https://docs.microsoft.com/en-us/cpp/preprocessor/hash-import-directive-cpp\" rel=\"nofollow noreferrer\">writing COM code</a>.  Have a look at the UnmanagedExports nuget package, okayish for simple functions like this."}, {"owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "edited": false, "score": 0, "creation_date": 1557334289, "post_id": 56044428, "comment_id": 98732681, "body": "In your case you&#39;re trying to make application (.exe) exported. I&#39;m not sure this is really what you want to do. Normally one would create a c# library and export that. I also dont like COM. I&#39;ve provided you an example with CLR wrapping, what I normally use occasionaly when I need this kind of conversion."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 11057115, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2xuVPTlmRIg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO9E0nrJS6rg97dkGp4ydl93X1clg/mo/photo.jpg?sz=128", "display_name": "Matias Demare", "link": "https://stackoverflow.com/users/11057115/matias-demare"}, "edited": false, "score": 0, "creation_date": 1557338078, "post_id": 56045251, "comment_id": 98734597, "body": "Thanks! I&#39;m gonna try this. What compiler / IDE are you using?"}, {"owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "reply_to_user": {"reputation": 33, "user_id": 11057115, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2xuVPTlmRIg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO9E0nrJS6rg97dkGp4ydl93X1clg/mo/photo.jpg?sz=128", "display_name": "Matias Demare", "link": "https://stackoverflow.com/users/11057115/matias-demare"}, "edited": false, "score": 0, "creation_date": 1557344238, "post_id": 56045251, "comment_id": 98737361, "body": "For this example VS 2017"}, {"owner": {"reputation": 33, "user_id": 11057115, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2xuVPTlmRIg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO9E0nrJS6rg97dkGp4ydl93X1clg/mo/photo.jpg?sz=128", "display_name": "Matias Demare", "link": "https://stackoverflow.com/users/11057115/matias-demare"}, "edited": false, "score": 0, "creation_date": 1557753867, "post_id": 56045251, "comment_id": 98860127, "body": "Cool! I tried it out and it worked Also, searching for Marshaling, I came across the edge.js node module, which would allow me to use my c# dll directly from js Thanks for your help!"}], "tags": [], "owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "is_accepted": true, "score": 0, "last_activity_date": 1557333862, "last_edit_date": 1557333862, "creation_date": 1557333154, "answer_id": 56045251, "question_id": 56044428, "link": "https://stackoverflow.com/questions/56044428/importing-a-class-from-a-c-dll-into-a-c-app/56045251#56045251", "title": "Importing a class from a c# dll into a c++ app", "body": "<p>I normally do this kind of stuff by creating a static C++ CLR Wrapper Lib.</p>\n\n<p>These are the steps I'm normally using (although I don't use it very often):</p>\n\n<p>Here minimal example with using Visual Studio:</p>\n\n<p><strong>1. Create managed C# .NET library Project</strong></p>\n\n<p>Let name it <strong>HelloLibManaged</strong> \n   with one file <strong>Hello.cs</strong> and following content:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\n\nnamespace HelloLibManaged\n{\n    public class Hello\n    {\n        public void Print()\n        {\n            System.Console.WriteLine(\"Hello from Managed Lib\");\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Build this lib with x86 or x64</strong> , just dont Any CPU</p>\n\n<p><strong>2. Create a new C++ CLR static lib project</strong> within same solution.\n   Let's name it <strong>HelloLibCpp</strong></p>\n\n<ul>\n<li><p>Add a reference to <strong>HelloLibManaged</strong> project via Project->Add Reference</p></li>\n<li><p>Remove automatic created existing .h/.cpp files from Project, and create these 2 files:</p></li>\n</ul>\n\n<p><strong>HelloUnmanaged.h</strong></p>\n\n<pre><code>#pragma once\n\nnamespace hello_managed {\n\n    class Hello\n    {\n    public:\n        void Print();\n    };\n}\n</code></pre>\n\n<p>and</p>\n\n<p><strong>HelloUnmanaged.cpp</strong>:</p>\n\n<pre><code>#include \"HelloUnmanaged.h\"\n\nnamespace hello_managed\n{\n\n    void Hello::Print()\n    {\n        HelloLibManaged::Hello^ hello = gcnew HelloLibManaged::Hello();\n        hello-&gt;Print();\n    }\n\n}\n</code></pre>\n\n<p>Und Project Properties -> General  specify static lib.\nIn the <strong>Build settings specify x86 / x64</strong> - use the <strong>same build type as building Managed lib from Step 1.</strong></p>\n\n<p>Now you can build the dll and use it in your other unmanaged C++ projects.</p>\n\n<p>For more advanced stuff, like return types and methods with parameters you have to do Type-Marshalling between managed/unmanaged code. There are many resources online with more information about Type-Conversion between managed/unmanaged code. Keyword: <strong>Marshaling</strong>.</p>\n"}], "owner": {"reputation": 33, "user_id": 11057115, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2xuVPTlmRIg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO9E0nrJS6rg97dkGp4ydl93X1clg/mo/photo.jpg?sz=128", "display_name": "Matias Demare", "link": "https://stackoverflow.com/users/11057115/matias-demare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 56045251, "answer_count": 1, "score": 0, "last_activity_date": 1575240837, "creation_date": 1557330150, "last_edit_date": 1575240837, "question_id": 56044428, "link": "https://stackoverflow.com/questions/56044428/importing-a-class-from-a-c-dll-into-a-c-app", "title": "Importing a class from a c# dll into a c++ app", "body": "<p>I need to import a dll made in c# from c++\nAll the examples I found import a single function from a dll, but as far as I know, you cannot export a single function from c# without exporting the whole class (I'm a bit of a c# newbie though)</p>\n\n<p>I am using node gyp to compile it (I'm building a node module for my web app using v8)</p>\n\n<p>Here is my c# code:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>using System;\nusing System.IO;\nusing System.Runtime.InteropServices;\n\n[ComVisible(true)]\npublic class Hello \n{\n    public static void Main() \n    {\n        Console.WriteLine(\"Hello World!\");\n        string createText = \"Hello World\" + Environment.NewLine;\n        File.WriteAllText(\".\\\\asd.txt\", createText);\n    }\n}\n</code></pre>\n\n<p>And this is my c++ header file:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef ASDLIB_H\n#define ASDLIB_H\n#define ASD_IMPORT __declspec(dllimport)\n#define STDCALL __stdcall\n\nclass ASD_IMPORT Hello{\n    public:\n         STDCALL static void ASD_IMPORT Main();\n};\n\n#endif // ASDLIB_H\n</code></pre>\n"}, {"tags": ["c++", "makefile", "cmake", "toolchain"], "comments": [{"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1557347965, "post_id": 56044265, "comment_id": 98738918, "body": "Run <code>make -d</code> and see why make is deciding to re-build the cmake files."}, {"owner": {"reputation": 1010, "user_id": 1054746, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62f7d3d32ef8347ae649aabbd9d2f627?s=128&d=identicon&r=PG", "display_name": "amfcosta", "link": "https://stackoverflow.com/users/1054746/amfcosta"}, "reply_to_user": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1557397260, "post_id": 56044265, "comment_id": 98755087, "body": "on start, make calls that cmake command I listed above (it is on one of the first targets). And that cmake call does checks and reconfigures the project."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1557415331, "post_id": 56044265, "comment_id": 98765447, "body": "I don&#39;t understand what you&#39;re saying.  Are you using the makefiles generated by cmake and that is re-running cmake?  Or are you running your own makefile, that has a rule that invokes cmake?"}, {"owner": {"reputation": 1010, "user_id": 1054746, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62f7d3d32ef8347ae649aabbd9d2f627?s=128&d=identicon&r=PG", "display_name": "amfcosta", "link": "https://stackoverflow.com/users/1054746/amfcosta"}, "reply_to_user": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1557437463, "post_id": 56044265, "comment_id": 98775416, "body": "CMake automatically adds a &quot;check&quot; target that does that."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1557497355, "post_id": 56044265, "comment_id": 98796686, "body": "OK.  So if you run <code>make -d</code> as I suggested in the first comment, it will tell you why make decides that it needs to re-run cmake.  It will print a ton of output, so you want to redirect it to a file, but look for the invocation of the cmake and backtract from there and it will say which files were deemed to be &quot;newer&quot;; these are the files make used to decide that it needed to re-run this recipe and invoke cmake."}], "owner": {"reputation": 1010, "user_id": 1054746, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62f7d3d32ef8347ae649aabbd9d2f627?s=128&d=identicon&r=PG", "display_name": "amfcosta", "link": "https://stackoverflow.com/users/1054746/amfcosta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557329768, "creation_date": 1557329568, "last_edit_date": 1557329768, "question_id": 56044265, "link": "https://stackoverflow.com/questions/56044265/identify-why-cmake-is-re-configured-every-time-a-source-file-is-changed", "title": "Identify why CMake is re-configured every time a source file is changed", "body": "<p>I have a big project and for some reason CMake configure is being run every time a source file is changed. Is there a simple way to identify why the reconfigure was triggered?</p>\n\n<p>The command that make calls and does the reconfigure is the following: </p>\n\n<pre><code> cmake -H/home/ME/BIG_PROJECT -B/home/ME/BIG_PROJECT/build --check-build-system CMakeFiles/Makefile.cmake 0\n</code></pre>\n\n<p>When there are no changes, that command does nothing.</p>\n"}, {"tags": ["c++", "c-preprocessor"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1557328596, "post_id": 56043930, "comment_id": 98729936, "body": "suggestion: Let us know what you actually want to use this for so we can tell you how to do it without macros"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557328666, "post_id": 56043930, "comment_id": 98729980, "body": "btw this line alone does not produce any error. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1557335837, "post_id": 56044014, "comment_id": 98733442, "body": "Re: &quot;<code>defined()</code> only works in <code>#if</code>&quot; -- indeed. And the code could be written with <code>#if defined(X_DEFINED)</code> as well as with <code>#ifdef X_DEFINED</code>."}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 10, "last_activity_date": 1557328767, "creation_date": 1557328767, "answer_id": 56044014, "question_id": 56043930, "link": "https://stackoverflow.com/questions/56043930/define-a-macro-with-definedx/56044014#56044014", "title": "Define a macro with defined(X)", "body": "<p><code>defined()</code> only works in <code>#if</code> and similar preprocessor directives.</p>\n\n<p>You want something like this:</p>\n\n<pre><code>#ifdef X_DEFINED\n#define GET_X(x) DEFAULT_X\n#else\n#define GET_X(x) x\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "is_accepted": false, "score": 2, "last_activity_date": 1557328847, "creation_date": 1557328847, "answer_id": 56044042, "question_id": 56043930, "link": "https://stackoverflow.com/questions/56043930/define-a-macro-with-definedx/56044042#56044042", "title": "Define a macro with defined(X)", "body": "<p>You need to define 2 different macros, depending on whether <code>X_DEFINED</code> is defined:</p>\n\n<pre><code>#ifdef X_DEFINED\n#   define GET_X(x) x\n#else\n#   define GET_X(x) DEFAULT_X\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1557328882, "creation_date": 1557328882, "answer_id": 56044054, "question_id": 56043930, "link": "https://stackoverflow.com/questions/56043930/define-a-macro-with-definedx/56044054#56044054", "title": "Define a macro with defined(X)", "body": "<p>Sloppy speaking you are mixing runtime stuff (evaluation of a ternary operator) with stuff that happens even before compilation (preprocessor). You can use <code>#ifdef</code> instead:</p>\n\n<pre><code>#ifdef X_DEFINED\n    #define GET_X(x) DEFAULT_X\n#else\n    #define GET_X(x) x\n#endif\n</code></pre>\n"}], "owner": {"reputation": 3281, "user_id": 1624277, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Qdnwb.png?s=128&g=1", "display_name": "e271p314", "link": "https://stackoverflow.com/users/1624277/e271p314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 56044014, "answer_count": 3, "score": 2, "last_activity_date": 1557328882, "creation_date": 1557328500, "last_edit_date": 1557328713, "question_id": 56043930, "link": "https://stackoverflow.com/questions/56043930/define-a-macro-with-definedx", "title": "Define a macro with defined(X)", "body": "<p>Here is a macro I want to use, if <code>X_DEFINED</code> is defined it will be evaluated to DEFAULT_X otherwise it will be evaluated to <code>x</code></p>\n\n<pre><code>#define GET_X(x) (defined(X_DEFINED) ? DEFAULT_X : x)\n</code></pre>\n\n<p>It doesn't compile, with the error</p>\n\n<pre><code>error: 'X_DEFINED' was not declared in this scope\n</code></pre>\n\n<p>Any suggestions? I want to be able to select between a parameter and a global variable based on if <code>X_DEFINED</code> was defined or not</p>\n"}, {"tags": ["c++", "vector", "netbeans-11"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1557328575, "post_id": 56043862, "comment_id": 98729922, "body": "Can&#39;t tell without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Maybe you forgot <code>#include &lt;initializer_list&gt;</code>. Maybe you didn&#39;t specify that you want C++11 or above. Maybe it&#39;s a known compiler bug, but you didn&#39;t mention the compiler. Ideally you would write &quot;This code produces this error on this compiler. Is the compiler right in refusing the code according to this standard?&quot;"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1557329116, "post_id": 56043862, "comment_id": 98730251, "body": "What are the c++ standard versions used in Netbeans and used in the OSXterminal?"}], "owner": {"reputation": 3, "user_id": 11470887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67475a1bd68a6c91d22d94508a90ccbe?s=128&d=identicon&r=PG&f=1", "display_name": "jaysun_n", "link": "https://stackoverflow.com/users/11470887/jaysun-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557494937, "creation_date": 1557328317, "last_edit_date": 1557494937, "question_id": 56043862, "link": "https://stackoverflow.com/questions/56043862/why-do-i-get-different-results-compiling-on-osx-terminal-and-netbeans", "title": "Why do I get different results compiling on OSX terminal and Netbeans", "body": "<p>I have inherited some C++ code and am trying to migrate it to the Netbeans 11 IDE for easier debugging. It compiles fine in the OSX terminal, but gives the following error when compiling in Netbeans:</p>\n\n<pre><code>In file included from BOF_Model.cpp:38: ./IM.cpp:53:9: error: expected expression\nWiHm = { 4.71, 0.33, 0.52, 0.066 }; // the weight percentage of component i in metal\n</code></pre>\n\n<p>It expects an expression after the equals sign, but I don't understand why the given list is not valid. WiHm is declared earlier in the code as:</p>\n\n<pre><code>// Include Statements\n#include &lt;vector&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\n// IM Values\ndouble MHm;\nstd::vector&lt;double&gt; WiHm (static_cast&lt;int&gt; (4), 0);\ndouble Sulphur;\n...\n\nvoid initIM()\n{\n    //MHm = 170.0; // the amount of hot metal charged to the process (tonne)\n    WiHm = { 4.71, 0.33, 0.52, 0.066 }; // the weight percentage of component i in metal\n    //Sulphur = 0.015; // (mass%) sulphur content in iron\n...\n}\n</code></pre>\n\n<p>In the makefile, the following appears:</p>\n\n<pre><code># Use GNU++ libraries for additional features\nCPPSTD=gnu++0x\n</code></pre>\n\n<p>I have now switched both compilers to c++11, and that has fixed this issue, but a few others persist. Thanks</p>\n"}, {"tags": ["c++", "opengl", "quaternions", "glm-math"], "comments": [{"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1557329217, "post_id": 56043730, "comment_id": 98730299, "body": "Can you elaborate on what you do with the quaternion and where the extreme change happens? Btw, in the case of dot product -1, you cannot choose an arbitrary axis. The axis has to be perpendicular to the direction."}, {"owner": {"reputation": 362, "user_id": 10905379, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-svfiSEjcgZs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNxD3rH-OiZ3-bNsgbmDHdZuaXDrQ/mo/photo.jpg?sz=128", "display_name": "Lenny White", "link": "https://stackoverflow.com/users/10905379/lenny-white"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1557330265, "post_id": 56043730, "comment_id": 98730886, "body": "@NicoSchertler: Right, thanks! Would this be a better way to calculate that axis <code>perpAxis = cross(vec3(1, 0, 0), sourceForward)</code>?  So basically I convert the quaternion to 4x4 rotation matrix and feed it to GPU to rotate the source object and all it&#39;s vertices with that rotation matrix."}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1557330425, "post_id": 56043730, "comment_id": 98730972, "body": "Yes, that would be better. Although you should check if the direction lies on the x-axis. Is this used in a CCD framework? Obviously, if you need a bone to turn around completely, it is ambiguous what path it would take. Usually, these situations are avoided since only small movements are required from the previous solution."}, {"owner": {"reputation": 362, "user_id": 10905379, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-svfiSEjcgZs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNxD3rH-OiZ3-bNsgbmDHdZuaXDrQ/mo/photo.jpg?sz=128", "display_name": "Lenny White", "link": "https://stackoverflow.com/users/10905379/lenny-white"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1557330692, "post_id": 56043730, "comment_id": 98731097, "body": "@NicoSchertler: No I use FABRIK algorithm. I think even if I&#39;ll end up not needing to have the bones turn around at such an angle, I would still like to know how to handle such cases, i.e. applying dampening for when the angle approaches 180 degrees."}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 2, "creation_date": 1557331018, "post_id": 56043730, "comment_id": 98731261, "body": "As far as I know, there is no way because there must inevitably be a point where orientation switches. Smooth vector fields on a sphere (for which you basically search a flowline) must contain at least one singularity (hairy ball theorem). If you don&#39;t want the orientation to behave weirdly at the source direction, you will need two, which is exactly what you get (one at the source direction, one at the opposite direction)."}, {"owner": {"reputation": 362, "user_id": 10905379, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-svfiSEjcgZs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNxD3rH-OiZ3-bNsgbmDHdZuaXDrQ/mo/photo.jpg?sz=128", "display_name": "Lenny White", "link": "https://stackoverflow.com/users/10905379/lenny-white"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1557872918, "post_id": 56043730, "comment_id": 98909530, "body": "@NicoSchertler: Could I ask, what would be a good way to change the point where the orientation switches? If say I wanted to have it at the object&#39;s up direction, how would I do that with a quaternion?"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1557877298, "post_id": 56043730, "comment_id": 98910501, "body": "I haven&#39;t figured out a complete solution, but your rotation would have an axis that lies in the bisector between source direction and up direction. From the available paths on the sphere, you would need to find the one where your target direction lies on and return the according rotation. But I doubt that you really want to do this."}], "owner": {"reputation": 362, "user_id": 10905379, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-svfiSEjcgZs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNxD3rH-OiZ3-bNsgbmDHdZuaXDrQ/mo/photo.jpg?sz=128", "display_name": "Lenny White", "link": "https://stackoverflow.com/users/10905379/lenny-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557328644, "creation_date": 1557327899, "last_edit_date": 1557328644, "question_id": 56043730, "link": "https://stackoverflow.com/questions/56043730/facing-target-object-using-quaternion-rotations", "title": "Facing target object using quaternion rotations", "body": "<p>I would like to build on top of this <a href=\"https://stackoverflow.com/questions/12435671/quaternion-lookat-function?noredirect=1&amp;lq=1]\">question</a> about rotating an object towards specific target with quaternions. My particular use case would be to orient a joint in 3d space towards another or a target point, as the stepping stone for implementing inverse kinematics.</p>\n\n<p>I use <code>glm</code> math library to calculate dot and cross products. I also use its defined structs, <code>vec3</code> and <code>quat</code>.</p>\n\n<p>Here is the relevant code:</p>\n\n<pre><code>quat AxisAngleToQuat(float angle, vec3 axis) {\n    quat myquat = quat(cos(angle/2), axis.x*sin(angle/2), axis.y*sin(angle/2), axis.z*sin(angle/2));\n    return myquat;\n}\n\nvec3 direction = normalize(targetPos-sourcePos);\nfloat dotProduct = dot(sourceForward, direction);\nfloat angle = acos(dotProduct);\nvec3 axis = normalize(cross(sourceForward, direction));\n\nquat myquat;\n//Handle special case where dotProduct is 1\nif (Math.Abs(dotProduct-1.0f) &lt; 0.000001f) {\n    myquat = quat(1, 0, 0, 0); //create identity quaternion\n}\n\n//Handle special case where dotProduct is -1\nelse if (Math.Abs(dotProduct+1.0f) &lt; 0.000001f) {\n    vec3 arbitraryAxis = vec3(0, 1, 0); //we can choose global up as the arbitrary axis\n    myquat = AxisAngleToQuat((float)M_PI, arbitraryAxis);\n}\nelse {\n    myquat = AxisAngleToQuat(angle, axis);\n}\n</code></pre>\n\n<p>Now after implementing this and handling all special cases, there's still a problem. When the <code>angle</code> comes close to <code>180</code> degrees (we get close to source object's original backwards direction <code>-sourceForward</code>), small changes in angle (small translations of target object) result in extreme changes to the source object orientation's. </p>\n\n<p>My question is why does this happen and what can we do dampen this effect?</p>\n"}, {"tags": ["c++", "templates", "c++17"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1557327839, "post_id": 56043656, "comment_id": 98729444, "body": "if <code>size</code> is only determined at runtime you cannot return a <code>std::array&lt;double,size&gt;</code> for <code>std::array</code> the size must be known at compile time.... unless you can do all the computation at compile time"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1557327898, "post_id": 56043656, "comment_id": 98729481, "body": "btw return type should be <code>std::array&lt;T,size&gt;</code> not <code>T</code> i suppose"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557327932, "post_id": 56043656, "comment_id": 98729509, "body": "are <code>lower</code>,<code>upper</code> and <code>num</code> known at compile time?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1557328247, "post_id": 56043656, "comment_id": 98729706, "body": "Can I direct you to the <a href=\"https://stackoverflow.com/q/388242/2069064\">Definitive C++ book guide and list</a>?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1557328649, "post_id": 56043656, "comment_id": 98729973, "body": "Which of <code>size</code> or <code>num</code> is the number of elements you want?"}, {"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 0, "creation_date": 1557329194, "post_id": 56043656, "comment_id": 98730290, "body": "If you can determine the size at compile time, then use <code>std::array</code>.  Otherwise, just use <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>, which is about the same as a Python list."}], "answers": [{"comments": [{"owner": {"reputation": 1199, "user_id": 2403819, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e2a67993748e1104299bea8d86656a65?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/2403819/jon"}, "edited": false, "score": 0, "creation_date": 1557366907, "post_id": 56044023, "comment_id": 98743481, "body": "This is a great solution, thank you.  Unfortunately I just realized there is no <code>push_back()</code> function for <code>std::array</code> that will allow me to populate an array one element at a time.  As a result, it looks like I will need to use <code>std::vector</code> instead.  I was hoping to use array to keep the arrays down to the minimum size, but it does not look like that will be possible."}, {"owner": {"reputation": 2853, "user_id": 626796, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4b13deba744c5599a43e06f52af13366?s=128&d=identicon&r=PG", "display_name": "Tharwen", "link": "https://stackoverflow.com/users/626796/tharwen"}, "reply_to_user": {"reputation": 1199, "user_id": 2403819, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e2a67993748e1104299bea8d86656a65?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/2403819/jon"}, "edited": false, "score": 0, "creation_date": 1557391644, "post_id": 56044023, "comment_id": 98751811, "body": "@Jon You could use an iterator for similar behaviour"}, {"owner": {"reputation": 1199, "user_id": 2403819, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e2a67993748e1104299bea8d86656a65?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/2403819/jon"}, "reply_to_user": {"reputation": 2853, "user_id": 626796, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4b13deba744c5599a43e06f52af13366?s=128&d=identicon&r=PG", "display_name": "Tharwen", "link": "https://stackoverflow.com/users/626796/tharwen"}, "edited": false, "score": 0, "creation_date": 1557408797, "post_id": 56044023, "comment_id": 98761516, "body": "@Tharwen, can you give an example of how that is done.  I can see examples of how an iterator can be used to display the existing contents of an array, but I do not know how to use it to populate an std::array one value at a time, up to the max amount."}, {"owner": {"reputation": 2853, "user_id": 626796, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4b13deba744c5599a43e06f52af13366?s=128&d=identicon&r=PG", "display_name": "Tharwen", "link": "https://stackoverflow.com/users/626796/tharwen"}, "edited": false, "score": 0, "creation_date": 1557415556, "post_id": 56044023, "comment_id": 98765601, "body": "Declare the iterator first with <code>auto it = arr.begin()</code>, then instead of <code>push_back(value)</code> you can write <code>*it = value; it++</code>. The main difference is that it&#39;s possible go past the end of the array and crash the program but since you already know how many elements you&#39;re inserting that shouldn&#39;t be a problem"}], "tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 4, "last_activity_date": 1557329335, "last_edit_date": 1557329335, "creation_date": 1557328801, "answer_id": 56044023, "question_id": 56043656, "link": "https://stackoverflow.com/questions/56043656/create-a-c-template-function-that-will-return-an-stdarray-of-a-specific-size/56044023#56044023", "title": "Create a C++ template function that will return an std::array of a specific size", "body": "<p>If you (correctly) pass the array size as a template parameter, you don't need it as one of the function arguments, so:</p>\n\n<pre><code>template &lt;size_t size&gt;\nauto linspace(double lower, double upper) -&gt; std::array&lt;int, size&gt;\n{\n    std::array&lt;int, size&gt; arr{};\n    //populate the array ...\n    return arr;\n}\n</code></pre>\n\n<p>Since you're using c++14, you can get rid of the return value altogether, and have a prototype like:</p>\n\n<pre><code>template &lt;size_t size&gt;\nauto linspace(double lower, double upper)\n</code></pre>\n\n<p>Then you can use it like this:</p>\n\n<pre><code>auto arr = linspace&lt;1&gt;(0, 1);\n\nfor(auto a : arr)\n{\n    std::cout &lt;&lt; a &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 1199, "user_id": 2403819, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e2a67993748e1104299bea8d86656a65?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/2403819/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 1, "accepted_answer_id": 56044023, "answer_count": 1, "score": 2, "last_activity_date": 1557329335, "creation_date": 1557327663, "question_id": 56043656, "link": "https://stackoverflow.com/questions/56043656/create-a-c-template-function-that-will-return-an-stdarray-of-a-specific-size", "title": "Create a C++ template function that will return an std::array of a specific size", "body": "<p>I am creating a function titled <code>linspase</code> with C++17 with the following input structure <code>linspace(double upper, double lower, int size)</code>.  The function should create <code>size</code> evenly spaced numbers between <code>lower</code> and <code>upper</code>.  Programming this function is easy; however, I want it to create an <code>std::array&lt;double, size&gt;</code> where the function will determine the array size from the function call and pass back the data type <code>std::array&lt;double, size&gt;</code>.  I know templates are the only way to do this, but I am not sure how to build the template.  In a general pseudo code I think it looks something like this.</p>\n\n<pre><code>template &lt;typedef T, size_t size&gt;\nT linspace(double lower, double upper, int num)\n{\n    /* ... Function meat goes here to create arr of size \n           num of evenly space numbers between lower and upper\n    */     \n    return arr\n}\n</code></pre>\n\n<p>However, I know this template declaration is not right and I am not sure what it is supposed to look like.  To be clear, I want it to return an <code>std:;array</code> of a specific size, not an <code>std::vector</code>.</p>\n"}, {"tags": ["c++", "winapi", "window", "access-token"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1557331242, "post_id": 56043589, "comment_id": 98731365, "body": "what you mean under <i>recover all privileges</i> ? enumerate all privileges with name, attributes or what ? <i>from a username</i> - from concrete process (say current) session, etc ?"}, {"owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1557336800, "post_id": 56043589, "comment_id": 98733941, "body": "I want to list all the privileges with the name and whether they are enabled or disabled...."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1557344050, "post_id": 56043589, "comment_id": 98737299, "body": "so in what is your problem?  get token, query <i>TokenPrivileges</i>, you got array of <i>LUID_AND_ATTRIBUTES Privileges</i>. walk by array (<i>PrivilegeCount</i> element in it). for convert luid to redable name - <i>LsaLookupPrivilegeName</i>"}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "edited": false, "score": 0, "creation_date": 1557389698, "post_id": 56052865, "comment_id": 98750762, "body": "thank you for your example so if I want to know the privileges in relation to a domain name , I replace the method GetProcess () with the domain name?  And I repeat the code for all the privileges?"}, {"owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "edited": false, "score": 0, "creation_date": 1557391801, "post_id": 56052865, "comment_id": 98751888, "body": "The function LookupPrivilegeValue return always false with  error NO SUCH PRIVILEGE , do you know where it can come from?"}, {"owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "reply_to_user": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "edited": false, "score": 0, "creation_date": 1557392095, "post_id": 56052865, "comment_id": 98752061, "body": "which privilege did you pass in?"}, {"owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "edited": false, "score": 0, "creation_date": 1557392272, "post_id": 56052865, "comment_id": 98752169, "body": "I solved the mistake because I was passing SE_ASSIGNPRIMARYTOKEN_NAME and doing SeAssignPrimaryTokenPrivilege it works.... and if I want to know the privileges in relation to a domain name , I replace the method GetProcess () with the domain name? And I repeat the code for all the privileges?"}, {"owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "reply_to_user": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "edited": false, "score": 1, "creation_date": 1557394127, "post_id": 56052865, "comment_id": 98753274, "body": "When a user logs on, the system produces an access token that contains a list of the user&#39;s privileges. The example is for the current user. And if you want to get another domain user&#39;s privileges, you need to use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winbase/nf-winbase-logonusera\" rel=\"nofollow noreferrer\">LogonUser</a> to get the token handle.(But this cannot log on to a remote computer)"}, {"owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "edited": false, "score": 0, "creation_date": 1557395583, "post_id": 56052865, "comment_id": 98754141, "body": "Ok but for the function LogonUserA(lpzUsername, lpszDomain,lpszPassword,dwLogonType,dwLogonProvider,phToken)&zwnj;&#8203;, UserName is my name Domain is domain name but what password should I put?"}, {"owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "reply_to_user": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "edited": false, "score": 0, "creation_date": 1557395733, "post_id": 56052865, "comment_id": 98754225, "body": "&quot;<i>A pointer to a null-terminated string that specifies the plaintext password for the user account specified by lpszUsername.</i>&quot; The logon password of the username."}, {"owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "reply_to_user": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "edited": false, "score": 0, "creation_date": 1557396383, "post_id": 56052865, "comment_id": 98754602, "body": "Well, did you mean which <code>dwLogonType</code> to select? It depends, read the document and select one."}, {"owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "edited": false, "score": 0, "creation_date": 1557399544, "post_id": 56052865, "comment_id": 98756239, "body": "I use a current user, my problem is solved, Thank you for your answers and your help"}], "tags": [], "owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "is_accepted": true, "score": 3, "last_activity_date": 1557454593, "last_edit_date": 1557454593, "creation_date": 1557380456, "answer_id": 56052865, "question_id": 56043589, "link": "https://stackoverflow.com/questions/56043589/how-to-recover-privileges-with-gettokeninformation-c/56052865#56052865", "title": "How to recover privileges with GetTokenInformation () ? c++", "body": "<p>You could try the code below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;tchar.h&gt;\n\nBOOL CheckWindowsPrivilege(const TCHAR *Privilege)\n{\n    /* Checks for Privilege and returns True or False. */\n    LUID luid;\n    PRIVILEGE_SET privs;\n    HANDLE hProcess;\n    HANDLE hToken;\n    hProcess = GetCurrentProcess();\n    if (!OpenProcessToken(hProcess, TOKEN_QUERY, &amp;hToken)) return FALSE;\n    if (!LookupPrivilegeValue(NULL, Privilege, &amp;luid)) return FALSE;\n    privs.PrivilegeCount = 1;\n    privs.Control = PRIVILEGE_SET_ALL_NECESSARY;\n    privs.Privilege[0].Luid = luid;\n    privs.Privilege[0].Attributes = SE_PRIVILEGE_ENABLED;\n    BOOL bResult;\n    PrivilegeCheck(hToken, &amp;privs, &amp;bResult);\n    return bResult;\n}\n\nint wmain(void)\n{\n    if (!CheckWindowsPrivilege(SE_ASSIGNPRIMARYTOKEN_NAME))\n    {\n        wprintf(L\"I do not have SeAssignPrimaryTokenPrivilege!\\n\");\n        return 1;\n    }\n    wprintf(L\"I do have SeAssignPrimaryTokenPrivilege!\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>And then call the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/SecAuthZ/enabling-and-disabling-privileges-in-c--\" rel=\"nofollow noreferrer\"><code>SetPrivilege</code></a>(not the win32 api but the function from the MSDN example)</p>\n"}], "owner": {"reputation": 241, "user_id": 8632386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104279ac6b6fcffcad290e7c5ec43dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom13000", "link": "https://stackoverflow.com/users/8632386/tom13000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 56052865, "answer_count": 1, "score": 0, "last_activity_date": 1557454593, "creation_date": 1557327430, "question_id": 56043589, "link": "https://stackoverflow.com/questions/56043589/how-to-recover-privileges-with-gettokeninformation-c", "title": "How to recover privileges with GetTokenInformation () ? c++", "body": "<p>I would like to recover all privileges from a username. For example privileges : \"SE_ASSIGN_PRIMARY_TOKEN_PRIVILEGE\", \"SE_AUDIT_PRIVILEGE\", \"SE_DEBUG_PRIVILEGE\"... I searched on the microsoft documentation and I found GetTokenInformation()\n<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/securitybaseapi/nf-securitybaseapi-gettokeninformation\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/api/securitybaseapi/nf-securitybaseapi-gettokeninformation</a> but I do not understand how to access all the privileges and see the value of this privilege. \nWould anyone already use this method with an example or how to proceed please?</p>\n"}, {"tags": ["c++", "boost", "build"], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 6483524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eeb6ee7ec0f01f1d68bb7a9f2ffa34f?s=128&d=identicon&r=PG&f=1", "display_name": "Tiger4Hire", "link": "https://stackoverflow.com/users/6483524/tiger4hire"}, "is_accepted": false, "score": 0, "last_activity_date": 1577464944, "creation_date": 1577464944, "answer_id": 59503622, "question_id": 56043333, "link": "https://stackoverflow.com/questions/56043333/how-do-i-build-boost-1-70-0-without-enabling-exceptions/59503622#59503622", "title": "How do I build boost 1.70.0 without enabling exceptions?", "body": "<p>I think the answer is to build using a custom \"b2\" command. For example, to build the math library under linux, without exceptions. Obviously if you are building under MSVC you need to use MS-style flags.<br>\nNot all libraries build binaries, so you need to add these to your own build as well. Also, bare in mind not all libraries support no-exceptions.</p>\n\n<pre><code>./b2 cxxflags=\"-fno-exceptions -DBOOST_NO_EXCEPTIONS\" --with-system\n</code></pre>\n\n<p>to see which libraries are built</p>\n\n<pre><code>./b2 --show-libraries\n</code></pre>\n\n<p>see <a href=\"https://stackoverflow.com/questions/4714289/boost-libraries-build-only-what-i-need\">here</a> for more generic advice for custom building problems.</p>\n"}], "owner": {"reputation": 1736, "user_id": 11483, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pJpfG.jpg?s=128&g=1", "display_name": "hatcat", "link": "https://stackoverflow.com/users/11483/hatcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577464944, "creation_date": 1557326578, "question_id": 56043333, "link": "https://stackoverflow.com/questions/56043333/how-do-i-build-boost-1-70-0-without-enabling-exceptions", "title": "How do I build boost 1.70.0 without enabling exceptions?", "body": "<p>I have upgraded to Boost 1.70.0, and built the binaries using bootstrap and b2, and inserted this into our codebase, but unfortunately I'm getting plenty of linker errors about the absence of one function: boost::throw_exception(class stdext::exception const &amp;).</p>\n\n<p>I've spotted BOOST_EXCEPTION_DISABLE and BOOST_NO_EXCEPTIONS as preprocessor tests in the source, but I don't know how to amend the build configuration to ensure the linker doesn't look for this symbol. I've tried defining each of these symbols at the top of each source file, to no avail, so I imagine building the boost binaries introduced this dependency.</p>\n\n<p>This hasn't been a problem before, so I suspect the prior versions were built in a cunning way to disable exception use. However, nobody in the studio can recall this.</p>\n"}, {"tags": ["c++", "visual-studio", "debugging"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1557327198, "post_id": 56043266, "comment_id": 98729059, "body": "A guess : you have a break point at <code>return eventQuests;</code> which is triggered when execution reaches that point. This break happens before the expression is evaluated Then, when you continue execution the expression is evaluated and crashes, causing a break at that same line. Edit : If this is what is happening, since returning a <code>std::set</code> of integers is crashing, I suspect you have UB elsewhere in the program that is manifesting here."}, {"owner": {"reputation": 3298, "user_id": 3394884, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LqQhR.png?s=128&g=1", "display_name": "kuskmen", "link": "https://stackoverflow.com/users/3394884/kuskmen"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1557327621, "post_id": 56043266, "comment_id": 98729326, "body": "No matter where I put the breakpoint it is hit twice (I put it outside of the loop just to be on the safe side that I don&#39;t mess anything when counting how many times it hit)."}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 1, "creation_date": 1557327680, "post_id": 56043266, "comment_id": 98729364, "body": "What happens if you delete the <code>for</code> loop and return only the empty set? Is <code>player</code> valid? What expection is thrown? VS can be set to break on throws and you can inspect whole stack at that moment."}, {"owner": {"reputation": 3298, "user_id": 3394884, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LqQhR.png?s=128&g=1", "display_name": "kuskmen", "link": "https://stackoverflow.com/users/3394884/kuskmen"}, "edited": false, "score": 0, "creation_date": 1557328869, "post_id": 56043266, "comment_id": 98730097, "body": "I&#39;ve rebuilt the core and now &quot;mysterious&quot; behavior is gone, my guess is since I am working with dynamic linking some old symbols from previous debugging sessions are confusing vs&#39;s debugger, but this is really a blind guess."}], "answers": [{"comments": [{"owner": {"reputation": 3298, "user_id": 3394884, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LqQhR.png?s=128&g=1", "display_name": "kuskmen", "link": "https://stackoverflow.com/users/3394884/kuskmen"}, "edited": false, "score": 0, "creation_date": 1557328932, "post_id": 56043765, "comment_id": 98730143, "body": "I&#39;ve rebuilt the core and I no longer have this behavior, wish I could reproduce it and see with my own eyes what you mean (if this was the case), it really sounds silly. And yes, I suppose I did not express myself right, I really do mean breakpoint hit twice rather than function being called twice, but the exceptions confused me."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 2, "last_activity_date": 1557328013, "creation_date": 1557328013, "answer_id": 56043765, "question_id": 56043266, "link": "https://stackoverflow.com/questions/56043266/function-is-called-twice-from-the-same-thread-for-the-same-object-with-the-same/56043765#56043765", "title": "Function is called twice from the same thread for the same object with the same call stack", "body": "<p>Most likely the function is not actually called twice. You are just drawing the wrong conclusion from hitting the same breakpoint twice.</p>\n\n<p>Visual Studio allows you to inspect the assembly code near your breakpoint, default is <code>Ctrl+Alt+D</code> I believe. In there you will see a mix of assembly instructions (what your CPU actually does) and the debugging information of \"which line(s) of code did the following instruction(s) originate from\".</p>\n\n<p>What I expect you will see there is that the <code>return eventQuests;</code> line is associated to two blocks of assembly instructions, with another block of instructions in between. You will first hit the breakpoint in the first group of instructions, then the second group will execute (e.g. associated to the loop, or the closing brace) and then the breakpoint is hit once more due to the second group. Yes, that sounds pretty dumb but the debugging information that MSVC outputs is not the best I've seen.</p>\n\n<p>Another simple way to check would be to insert a print statement (like <code>std::cout &lt;&lt; \"Hi\" &lt;&lt; std::endl</code>) before the return and check whether you get one or two printouts. Unless you get two printouts, your conclusion of actually entering the function more than once is wrong.</p>\n"}], "owner": {"reputation": 3298, "user_id": 3394884, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LqQhR.png?s=128&g=1", "display_name": "kuskmen", "link": "https://stackoverflow.com/users/3394884/kuskmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1557328013, "creation_date": 1557326330, "last_edit_date": 1557326689, "question_id": 56043266, "link": "https://stackoverflow.com/questions/56043266/function-is-called-twice-from-the-same-thread-for-the-same-object-with-the-same", "title": "Function is called twice from the same thread for the same object with the same call stack", "body": "<h2>Background</h2>\n\n<p>I am debugging one open source project I am willing to join and learn C++. Then I tried extending some functionality needed for one of the issues over there and I stumbled on interesting case (never seen something like this in my life).</p>\n\n<h2>Source code</h2>\n\n<pre><code>QuestSet Player::GetQuestForEvent(uint16 eventId) const\n{\n    QuestSet eventQuests; // QuestSet is typedef for std::set&lt;uint32&gt;\n\n    for (uint8 i = 0; i &lt; MAX_QUEST_LOG_SIZE; ++i)\n    {\n        uint32 questId = GetQuestSlotQuestId(i);\n        if (questId == 0)\n            continue;\n\n        QuestStatusMap::const_iterator qs_itr = m_QuestStatus.find(questId);\n        if (qs_itr == m_QuestStatus.end())\n            continue;\n\n        QuestStatusData const&amp; qs = qs_itr-&gt;second;\n\n        Quest const* qinfo = sObjectMgr-&gt;GetQuestTemplate(questId);\n        if (!qinfo)\n            continue;\n\n        if (qinfo-&gt;GetEventIdForQuest() == eventId)\n            eventQuests.insert(questId);\n    }\n\n    return eventQuests; &lt;--- breakpoint here\n}\n</code></pre>\n\n<p>I noticed that my server crash with </p>\n\n<blockquote>\n  <p>Unhandled exception at 0x00007FFE1BE6A388 (KernelBase.dll) in worldserver.exe: 0xC0000005: Access violation.</p>\n</blockquote>\n\n<p>followed by this log from my server</p>\n\n<blockquote>\n  <p>C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.20.27508\\include\\xtree(240) : Assertion failed: map/set iterators in range are from different containers</p>\n</blockquote>\n\n<p>So I've put breakpoint on the aforementioned place and I noticed that the function is called twice. I know uploading pictures might not be the best option but its the best explanation in this case in my opinion so take a look.</p>\n\n<h2>Screenshots</h2>\n\n<ul>\n<li><p>first breakpoint hit\n<a href=\"https://i.stack.imgur.com/ENpMm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ENpMm.png\" alt=\"first breakpoint hit\"></a></p></li>\n<li><p>second breakpoint hit (notice events window from diagnostic tools window)\n<a href=\"https://i.stack.imgur.com/6GqI6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6GqI6.png\" alt=\"second breakpoint hit\"></a></p></li>\n</ul>\n\n<p>This is the only place in the project where this function is being called.</p>\n\n<pre><code>void OnLogin(Player* player, bool /*firstLogin*/) override\n{\n    QuestSet eventQuests = player-&gt;GetQuestForEvent(1);\n    /*std::for_each(eventQuests.begin(), eventQuests.end(), [&amp;player](uint32 questId)\n    {\n        player-&gt;AbandonQuest(questId);\n    });*/\n}\n</code></pre>\n\n<p>I know it sounds silly but I am out of suggestions, could you please point me into the right direction, understanding why this breakpoint is hit twice most likely will fix the exceptions aswell.</p>\n\n<h2>Troubleshooting:</h2>\n\n<ul>\n<li>project is built in Debug configuration</li>\n<li>callstack, thread and <code>this</code> object are all the same through both hits.</li>\n</ul>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 4, "creation_date": 1557326127, "post_id": 56043168, "comment_id": 98728417, "body": "<code>int dest</code> isn&#39;t an array or pointer, so you can&#39;t do <code>dest[k]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3047, "user_id": 10388629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/My8T3.png?s=128&g=1", "display_name": "Pika the Master of the Whales", "link": "https://stackoverflow.com/users/10388629/pika-the-master-of-the-whales"}, "is_accepted": true, "score": 0, "last_activity_date": 1557327222, "creation_date": 1557327222, "answer_id": 56043532, "question_id": 56043168, "link": "https://stackoverflow.com/questions/56043168/the-expression-must-have-an-object-pointer-type/56043532#56043532", "title": "the expression must have an object pointer type", "body": "<p>This statement:</p>\n\n<pre><code>newNode-&gt;dest[k] = m;\n</code></pre>\n\n<p>is illegal because <code>dest</code> was declared as an <code>int</code>. You can't use <code>operator[]</code> on an integer.</p>\n\n<p>You have two main options to fix this:</p>\n\n<ul>\n<li>Write <code>newNode-&gt;dest = m;</code> if you want to change the value of <code>newNode-&gt;dest</code> to <code>m</code>, or</li>\n<li>Change <code>dest</code> to an integer array if you want multiple values to be held in it.</li>\n</ul>\n"}], "owner": {"reputation": 19, "user_id": 10721955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vNktb4JFUCc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hrYogHakxmY4klYr0jG0nDx6yKPA/mo/photo.jpg?sz=128", "display_name": "Aimin", "link": "https://stackoverflow.com/users/10721955/aimin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 56043532, "answer_count": 1, "score": 0, "last_activity_date": 1557327222, "creation_date": 1557326016, "last_edit_date": 1557326165, "question_id": 56043168, "link": "https://stackoverflow.com/questions/56043168/the-expression-must-have-an-object-pointer-type", "title": "the expression must have an object pointer type", "body": "<p>This is a piece of code for my project. I have such a program and I have a problem with filling an array in the graph. I think that the problem with new, but I don't understand what exactly. There is an error:\nthe expression must have an object pointer type and I don't know what to do with it. I'm a beginner in C++ </p>\n\n<p>I tried to use a . instead of -> but it was wrong</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstring&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n\nusing namespace std;\n\nconst int k = 3;\nconst int N = 1000;\n\nstruct Graph\n{\n  struct Node *head[N];\n};\n\nstruct Node\n{\n  int dest;\n  int age;\n  string name;\n  string surname;\n  struct Node *next;\n};\n\n\ntypedef Node* nodePtr;\n\nstruct Graph* createGraph(int );\nvoid printGraph(struct Graph*);\nvoid searchFor( int prefer[2*k][k], struct Graph* graph);\nvoid createArray(struct Graph*, int arr[2*k][k]);\nbool Preferences(int pref[2 * k][k], int w, int m, int m1);\n\nint main()\n{\n  int n;\n  int array[2 * k][k];\n  cout &lt;&lt; \"How many persons u want to have?\" &lt;&lt; endl;\n  cin &gt;&gt; n;\n\n  struct Graph *graph = createGraph(n);\n\n  printGraph(graph);\n  createArray(graph,array);\n  searchFor(array, graph);\n\n  return 0;\n}\n\nstruct Graph* createGraph( int n)\n{\n  int i,temp,j;\n  int b = n / 2;\n  int k, x = 0;\n\n  struct Graph *graph = new Graph;\n\n  for (i = 0; i &lt; N; i++)\n  {\n    graph-&gt;head[i] = NULL;\n  }\n\n  srand(time(NULL));\n\n  for (i = 0; i &lt; n; i++)\n  {\n\n    struct Node *newNode = new Node;\n    for ( k = 0; k &lt; b; k++)\n    {\n        int m = b;\n        newNode-&gt;dest[k] = m;// here\n        b++;\n    }\n\n    for (int l = b; l &lt; n; l++)\n    {\n\n        newNode-&gt;dest[l] = x; //here\n        x++;\n    }\n\n\n    for (int z = 0; z &lt; b; z++)\n    {\n        if (z &lt; b)\n        {\n            j = rand() % n + b;\n            temp = newNode-&gt;dest[z];\n            newNode-&gt;dest[z] = temp;\n        }\n        else\n        {\n            j = rand() % b + 0;\n        }\n    }\n    newNode-&gt;age = rand() % 90 + 1;\n    newNode-&gt;name = 'A' +(rand()%26);\n    newNode-&gt;surname = newNode-&gt;name = 'A' + (rand() % 26);\n\n    newNode-&gt;next = graph-&gt;head[i];\n\n    graph-&gt;head[i] = newNode;\n  }\n\n  return graph;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "qt", "embedded"], "answers": [{"tags": [], "owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "is_accepted": false, "score": 0, "last_activity_date": 1557823531, "creation_date": 1557823531, "answer_id": 56126334, "question_id": 56043157, "link": "https://stackoverflow.com/questions/56043157/send-data-lwip-stm32-pc/56126334#56126334", "title": "send data lwip STM32 PC", "body": "<p>What is the value you put in the <code>tcp_bind</code> function call? This should be the port you are listening on. It would be best if you would use a port over 1024 because of the privileged access needed on normal systems with operating systems.</p>\n"}], "owner": {"reputation": 11, "user_id": 9158272, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868442600133062/picture?type=large", "display_name": "Emrah Duatepe", "link": "https://stackoverflow.com/users/9158272/emrah-duatepe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557823531, "creation_date": 1557325982, "last_edit_date": 1557328600, "question_id": 56043157, "link": "https://stackoverflow.com/questions/56043157/send-data-lwip-stm32-pc", "title": "send data lwip STM32 PC", "body": "<p>I am trying to send or receive data from STM32f(via raw lwip) to computer.\nI connected stm32f device to modem and send \"ping\" and it is ok.dhcp in lwip have got the ip number from modem.And I would like to use QT Creature to send data to STM32 via lwip(connected modem).I dont know what my port number is.What will I write in this codes as port number.</p>\n\n<p>Could you offer me a way,what will I do.\nAlso, is it possible if I connect the stm32f device directly to computer and communication?</p>\n\n<pre><code>tcpSocket-&gt;connectToHost(QHostAddress(\"192.168.1.30\"),portnumber);\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "recursion"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557325476, "post_id": 56042958, "comment_id": 98728015, "body": "Note it&#39;s called <i>dimension</i> not <i>dimention</i>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557325924, "post_id": 56042958, "comment_id": 98728287, "body": "does it have to be recursive?"}, {"owner": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557326019, "post_id": 56042958, "comment_id": 98728355, "body": "Fixed the spelling! No it doesn&#39;t have to be recursive but I can&#39;t find a clean example of a non-recursive fix to this."}, {"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 1, "creation_date": 1557326579, "post_id": 56042958, "comment_id": 98728703, "body": "try flatten it to one dimension. makes most stuff easier."}, {"owner": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "reply_to_user": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 0, "creation_date": 1557329991, "post_id": 56042958, "comment_id": 98730729, "body": "@skeller the matrix is a very awkward byte array where each dimension has it&#39;s own bit-stride. I am trying to copy this to a Eigen matrix which you&#39;re right, can be flattened."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557327228, "post_id": 56043309, "comment_id": 98729079, "body": "Works like a charm! Thank you very much! Recursion is horrible. I&#39;m going to add your code to my post :)"}, {"owner": {"reputation": 14930, "user_id": 395718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f1323cdc2a70698b5275082bf6e61184?s=128&d=identicon&r=PG", "display_name": "Dialecticus", "link": "https://stackoverflow.com/users/395718/dialecticus"}, "reply_to_user": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 1, "creation_date": 1557327313, "post_id": 56043309, "comment_id": 98729127, "body": "@parkywolfy Don&#39;t add code that is already there on the page. Accepting the answer is the way that Stack Overflow works. When we see that green checkmark we know that it is you who accepted this answer."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557327398, "post_id": 56043309, "comment_id": 98729186, "body": "@perkywolfy yes, &quot;add your code to my post&quot; if you mean your question, then please dont do it. Questions are for questions and asnwers are for answers. Your question is fine as is, if you add this code to your question it will be a bad question, and my answer will be superfluous"}, {"owner": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557327985, "post_id": 56043309, "comment_id": 98729530, "body": "@user463035818 Alright then, I would like to reformat your code to be even more clear and attach it to this post for people to find. Would be best to do that in a comment? Or somewhere else? Thanks again for the answer."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557328061, "post_id": 56043309, "comment_id": 98729576, "body": "@parkywolfy imho the best would be to take the code and post a new answer (and dont forget to give credits ;), because this is my formatting style and, sorry, I dont think I would accept an edit that changes the style substantially (you could edit my answer, in case you dont know, or are you missing the privilege... dont remember...)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557328315, "post_id": 56043309, "comment_id": 98729757, "body": "@parkywolfy you can answer your own question, and I&#39;d be fine with you &quot;stealing&quot; my code, thats why I put it here, as long as you properly give credits"}, {"owner": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557329668, "post_id": 56043309, "comment_id": 98730569, "body": "@user463035818 thanks for the info! I&#39;ll see what suits best. I wouldn&#39;t want to take any credit away from you."}, {"owner": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557330255, "post_id": 56043309, "comment_id": 98730881, "body": "@user463035818 also what did you mean by &quot;actually not called &quot;matrix&quot;&quot; in your answer?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 1, "creation_date": 1557331166, "post_id": 56043309, "comment_id": 98731334, "body": "@parkywolfy strictly speaking a matrix has two dimensions. A structure with more dimensions would rather be called tensor, which is a generalisation of the concept of  matrices to n dimensions"}, {"owner": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557331698, "post_id": 56043309, "comment_id": 98731555, "body": "@user463035818 this could be why I couldn&#39;t find an answer before. thank you."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 1, "creation_date": 1557336889, "post_id": 56043309, "comment_id": 98733987, "body": "@parkywolfy I felt something was missing from the answer, I added something on how to flatten the multi dimensions. Btw I warned you ;) I feel pain seeing the <code>{</code> on the next line, so I really didnt feel like accepting your edit. I mean its a matter of taste, but it definitely isnt mine"}, {"owner": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557420948, "post_id": 56043309, "comment_id": 98768369, "body": "@user463035818 awesome, I&#39;ll need to check that out sometime."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 6, "last_activity_date": 1557336756, "last_edit_date": 1557336756, "creation_date": 1557326480, "answer_id": 56043309, "question_id": 56042958, "link": "https://stackoverflow.com/questions/56042958/iterating-over-an-n-dimensional-matrix-with-variable-dimension-sizes-in-c/56043309#56043309", "title": "Iterating over an N-dimensional matrix with variable dimension sizes in C++", "body": "<p>If I understand correctly you want to iterate all elements of the \"n-dimensional matrix\" (actually not called \"matrix\") and need a way to get all indices. I would start with something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nstruct multi_index {\n    std::vector&lt;size_t&gt; dimensions;\n    std::vector&lt;size_t&gt; current;\n    multi_index(std::vector&lt;size_t&gt; dim) : dimensions(dim), current(dim.size()) {}\n    void print() {\n        for (const auto&amp; e : current) std::cout &lt;&lt; e &lt;&lt; \" \";\n        std::cout &lt;&lt; \"\\n\";\n    }\n    bool increment() {        \n        for (size_t i=0;i&lt;dimensions.size();++i) {\n            current[i] += 1;\n            if (current[i] &gt;= dimensions[i]) {\n                current[i] = 0;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    }\n};\n\n\nint main() {\n    multi_index x{{1,2,3}};\n    do {\n        x.print();\n    } while (x.increment());    \n}\n</code></pre>\n\n<p>And then adpapt it to the specific needs. Eg the vectors could probably be <code>std::array</code>s and depening on the actual container you probably want an easy way to access the element in the container without having to write <code>data[ x[0] ][ x[1] ][ x[2] ]</code>. </p>\n\n<p>Note that often it is better to flatten the data into a one dimensional data structure and then just map the indices. Especially when the dimensions are fixed you can benefit from data locality. While the above lets you write a single loop to iterate through all dimensions you then need the reverse mapping, ie many indices to a flat index. The following is not thoroughly tested, but just to outline the idea:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;utility&gt;\ntemplate &lt;typename T&gt;\nstruct multi_dim_array {\n    std::vector&lt;T&gt; data;\n    std::vector&lt;size_t&gt; dimensions;\n    multi_dim_array(std::vector&lt;size_t&gt; dim) {\n        size_t total = 1;\n        for (const auto&amp; d : dim) total *= d;\n        data.resize(total);\n    }\n    T&amp; get(std::initializer_list&lt;int&gt; index) {\n        return data[flatten_index(index)];\n    }\n    size_t flatten_index(std::initializer_list&lt;int&gt; index) {\n        size_t flat = 0;\n        size_t sub_size = 1;\n        for (auto x = std::make_pair(0u,index.begin());\n             x.first &lt; dimensions.size() &amp;&amp; x.second != index.end();\n             ++x.first, ++x.second) {\n            flat += (*x.second) * sub_size;\n            sub_size *= dimensions[x.first];\n        }\n        return flat;\n    }\n};\nint main(){\n    multi_dim_array&lt;int&gt; x{{2,2,3}};\n    x.get({1,1,1}) = 5;\n}\n</code></pre>\n\n<p>Once you store the multidimensional data in a flat array/vector writing a simple loop to iterate all elements should be straightforward.</p>\n\n<p>PS: to be honest I didn't bother to find the problem in your code, recursion makes me dizzy :P</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557330527, "post_id": 56044349, "comment_id": 98731017, "body": "This doesn&#39;t solve my issue because I want to visit each element once, not just &quot;count the times each element has been visited&quot;. I also can not use the output of your algorithm since it goes out of the scope of the dimensions when I want to access each element using the counter as a coordinate."}, {"owner": {"reputation": 349, "user_id": 2855231, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8eed2820cc092b69597c6304e5d5692f?s=128&d=identicon&r=PG", "display_name": "Rudy Barbieri", "link": "https://stackoverflow.com/users/2855231/rudy-barbieri"}, "reply_to_user": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557386825, "post_id": 56044349, "comment_id": 98749212, "body": "it will visit each element only once, if not, counters art the end should have a different value"}, {"owner": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557404444, "post_id": 56044349, "comment_id": 98758999, "body": "This answer does not even visit each element once, look at your output. The algorithm should generate every permutation of numbers starting with {0, 0, 0} and ending with {0, 3, 3}."}, {"owner": {"reputation": 349, "user_id": 2855231, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8eed2820cc092b69597c6304e5d5692f?s=128&d=identicon&r=PG", "display_name": "Rudy Barbieri", "link": "https://stackoverflow.com/users/2855231/rudy-barbieri"}, "reply_to_user": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "edited": false, "score": 0, "creation_date": 1557479451, "post_id": 56044349, "comment_id": 98787077, "body": "Ok I havne&#39;t fully understood your question"}], "tags": [], "owner": {"reputation": 349, "user_id": 2855231, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8eed2820cc092b69597c6304e5d5692f?s=128&d=identicon&r=PG", "display_name": "Rudy Barbieri", "link": "https://stackoverflow.com/users/2855231/rudy-barbieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1557329877, "creation_date": 1557329877, "answer_id": 56044349, "question_id": 56042958, "link": "https://stackoverflow.com/questions/56042958/iterating-over-an-n-dimensional-matrix-with-variable-dimension-sizes-in-c/56044349#56044349", "title": "Iterating over an N-dimensional matrix with variable dimension sizes in C++", "body": "<p>I'm not sure I understood the question. If you want to visit each element of the multidimensional array once, the following code should do the job (counters in my case count the times each element has been visited so, at the end count, should be equal to dimensionSizes): </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void print_counter(std::vector&lt;int&gt;&amp; counters)\n{\n    for (unsigned int i = 0; i &lt; counters.size(); ++i)\n        std::cout &lt;&lt; counters[i] &lt;&lt; \" \";\n    std::cout &lt;&lt; std::endl;\n}\n\nvoid iterate_over_n_dimensions(std::vector&lt;int&gt;&amp; counters,  std::vector&lt;int&gt; dimensionSizes,    int currentDimension)\n{\n    for (long i = 0; i &lt; dimensionSizes[currentDimension]; i++)\n    {\n        counters[currentDimension] ++;\n        print_counter(counters);\n    }\n    if (currentDimension + 1 != dimensionSizes.size())\n    {\n        iterate_over_n_dimensions(counters,\n            dimensionSizes,\n            currentDimension + 1);\n    }\n}\n\n\n\nint main(int argc, const char * argv[])\n{\n    std::vector&lt;int&gt; dimensionSizes = { 1, 4, 4 };\n    std::vector&lt;int&gt; counters(dimensionSizes.size(), 0);\n\n    iterate_over_n_dimensions(counters, dimensionSizes, 0);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>1 0 0\n1 1 0\n1 2 0\n1 3 0\n1 4 0\n1 4 1\n1 4 2\n1 4 3\n1 4 4\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10186451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da77f19f1e9de372763a4c80aa1e674?s=128&d=identicon&r=PG&f=1", "display_name": "parkywolfy", "link": "https://stackoverflow.com/users/10186451/parkywolfy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "accepted_answer_id": 56043309, "answer_count": 2, "score": 4, "last_activity_date": 1557336756, "creation_date": 1557325350, "last_edit_date": 1557325959, "question_id": 56042958, "link": "https://stackoverflow.com/questions/56042958/iterating-over-an-n-dimensional-matrix-with-variable-dimension-sizes-in-c", "title": "Iterating over an N-dimensional matrix with variable dimension sizes in C++", "body": "<p>I am trying to iterate over an n-dimensional matrix where each dimension of the matrix also has a variable size.</p>\n\n<p>I specifically want to have each elements multi-dimensional coordinate, like a <code>for loop</code> gives you <code>i</code> to access an element in an array.</p>\n\n<p>I want to basically re-create a nested for loop like the following code with recursion where I could put any different kind of numbers into <code>dimensionSize</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::vector&lt;int&gt; dimensionSize = {1, 4, 4};\n\nfor (int i = 0; i &lt; dimensionSize [0]; i++)\n{\n    for (int j = 0; j &lt; dimensionSize [1]; j++)\n    {\n        for (int k = 0; k &lt; dimensionSize [2]; k++)\n        {\n            std::cout &lt;&lt; i &lt;&lt; \" \" &lt;&lt; j &lt;&lt; \" \" &lt;&lt; k &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre>\n\n<p>The results of this nested loop are...</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>0 0 0\n0 0 1\n0 0 2\n0 0 3\n0 1 0\n0 1 1\n0 1 2\n0 1 3\n0 2 0\n0 2 1\n0 2 2\n0 2 3\n0 3 0\n0 3 1\n0 3 2\n0 3 3\n</code></pre>\n\n<p>So far all of the examples/solutions I've found on traversing n-dimensional matrices in C++ have been really messy code and also for fixed dimension sizes e.g. 9x9x9 or 3x3x3.</p>\n\n<p>However my matrix could be 1x256x513x3 or all kinds of sizes.</p>\n\n<p>I currently have the following function which is close to getting what I want however it's got one problem.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void iterate_over_n_dimensions (std::vector&lt;int&gt;&amp; counters,\n                                std::vector&lt;int&gt; dimensionSizes, \n                                int currentDimension)\n{\n    for (long i = 0; i &lt; dimensionSizes [currentDimension]; i++)\n    {\n        print_counter (counters);\n\n        if (currentDimension + 1 != dimensionSizes.size())\n        {\n            iterate_over_n_dimensions (counters, \n                                       dimensionSizes, \n                                       currentDimension + 1);\n        }\n\n        counters [currentDimension] ++;\n        counters [currentDimension] %= dimensionSizes [currentDimension];\n    }\n}\n</code></pre>\n\n<p>Run with the following...</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(int argc, const char * argv[])\n{\n    std::vector&lt;int&gt; dimensionSizes = {1, 4, 4};\n    std::vector&lt;int&gt; counters(dimensionSizes.size(), 0);\n\n    iterate_over_n_dimensions (counters, dimensionSizes, 0);\n\n    return 0;\n}\n\n</code></pre>\n\n<p>The results of this recursive function are...</p>\n\n<pre><code>0 0 0 \n0 0 0 \n0 0 0 \n0 0 1 \n0 0 2 \n0 0 3 \n0 1 0 \n0 1 0 \n0 1 1 \n0 1 2 \n0 1 3 \n0 2 0 \n0 2 0 \n0 2 1 \n0 2 2 \n0 2 3 \n0 3 0 \n0 3 0 \n0 3 1 \n0 3 2 \n0 3 3 \n</code></pre>\n\n<p>You can see, the output repeats itself every time a nested for loop is completed! The repetitions at...</p>\n\n<pre><code>0 1 0 \n0 2 0 \n0 3 0 \n</code></pre>\n\n<p>This problem gets worse the more dimensions I add. \nFor examples a matrix of 1x4x4x2 repeats every time it completes it's 4th dimensional loop and more in other places.</p>\n\n<p>If anyone could suggest a solution that is as cleanly written as my current function I would really appreciate it!</p>\n\n<p>Right now I'm going to have to implement a massive switch statement with lots of for loops and capping the number of dimensions at 5 or so.</p>\n"}, {"tags": ["c++", "multithreading", "mutex"], "comments": [{"owner": {"reputation": 43, "user_id": 11223020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30bea69d11ab315b7858b461a72c137a?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin", "link": "https://stackoverflow.com/users/11223020/marcin"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1557325095, "post_id": 56042718, "comment_id": 98727756, "body": "@MarekR I have added more code for more context."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1557326189, "post_id": 56042718, "comment_id": 98728461, "body": "Off topic: <code>if (y &lt; 12) { isAboveTheLine = true; } else if(y &gt;= 12) { isAboveTheLine = false; }</code> can be written as <code>isAboveTheLine = y &lt; 12;</code>, etc."}, {"owner": {"reputation": 1358, "user_id": 5357986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rea6W.jpg?s=128&g=1", "display_name": "Oliort", "link": "https://stackoverflow.com/users/5357986/oliort"}, "edited": false, "score": 0, "creation_date": 1557331785, "post_id": 56042718, "comment_id": 98731600, "body": "Off topic: also do not additionaly check in <code>else if</code> exactly the opposite you checked in <code>if</code>. <code>else {...}</code> will be enough."}], "answers": [{"tags": [], "owner": {"reputation": 1358, "user_id": 5357986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rea6W.jpg?s=128&g=1", "display_name": "Oliort", "link": "https://stackoverflow.com/users/5357986/oliort"}, "is_accepted": true, "score": 2, "last_activity_date": 1557338000, "last_edit_date": 1557338000, "creation_date": 1557328919, "answer_id": 56044069, "question_id": 56042718, "link": "https://stackoverflow.com/questions/56042718/a-proper-way-to-use-mutex-in-c-ncurses-project/56044069#56044069", "title": "A proper way to use mutex in c++ ncurses project?", "body": "<p>If answer your question directly, I would use <a href=\"http://www.cplusplus.com/reference/condition_variable/condition_variable/\" rel=\"nofollow noreferrer\"><code>condition_variable</code></a> for that. Wait until free place for a ball appears (count of balls in the upper part becomes less than ball count limit). Notify other threads when a ball leaves the limited-ball-number area:</p>\n\n<pre><code>std::mutex m;\nstd::condition_variable cv;\nint counter = 2;\n\nvoid ballFunction(int a)\n{   \n    int nr = a;\n    while (shared-&gt;balls[nr]-&gt;bounceCounter &lt; 5)\n    {\n        usleep(50000);\n\n        bool previousIsAbove = shared-&gt;balls[nr]-&gt;isAboveTheLine;\n        shared-&gt;balls[nr]-&gt;updateBall();\n        // check if state changed\n        if (previousIsAbove == shared-&gt;balls[nr]-&gt;isAboveTheLine) continue;\n\n        if(previousIsAbove) // ball went down the line\n        {           \n            std::unique_lock&lt;std::mutex&gt; locker(m);\n            counter++;\n            cv.notify_one();\n        }\n        else\n        {\n            std::unique_lock&lt;std::mutex&gt; locker(m);\n            cv.wait(locker, [&amp;](){return !run || counter &gt; 0;});\n            if (!run) return;\n            counter--;\n        }\n    }\n\n    shared-&gt;balls[nr]-&gt;x = -1;\n    shared-&gt;balls[nr]-&gt;y = -1;\n}\n</code></pre>\n\n<p>But the code has much more issues and I will explain the most crucial.</p>\n\n<p>First of all your <code>counter</code> is a non-static local variable inside the <code>ballFunction()</code>. All <code>ballFunction</code> callers will have their own version of <code>counter</code>, but you want ot use it as one single shared variable for all threads. Put it outside the <code>ballFunction()</code>. Also you initialize it with <code>2</code> so I assume you want to use it as a number of free places above the line. But you increment it when the ball goes above the line and check it against '2' and '3'. Do the opposite - decrement free places count when the ball goes up over the line and check to be more than <code>0</code> before decrementing and letting the ball go up further.</p>\n\n<p>Assuming you fixed that, you still read/write the <code>counter</code> value without any critical section handling and thread synchronisation. That could lead to data races and is <em>undefined behaviour (not a program)</em>. Work with shared data in thread-safe way only. For example if you use <code>mutex</code> to synchronize threads (like in this case), access it only \"under locked mutex\" to limit number of threads simultaneously working with shared data to one. If you decide to use <code>atomic</code> instead - do the <em>check + increment/decrement</em> only with <a href=\"https://en.cppreference.com/w/cpp/atomic/atomic_compare_exchange\" rel=\"nofollow noreferrer\">CAS (compare &amp; swap) atomic operation</a>. </p>\n\n<p>The same is for <code>run</code> (you access it from different threads too, at least make it <code>volatile</code>). Note: do not forget to notify threads when you set your <code>run</code> to <code>false</code> (I assume you do that in <code>exit()</code>) if you use my code.</p>\n\n<p>You increment the count of balls up the line every iteration for every ball that entered the upper part. Do that only at the moment of crossing the line (I do that by checking where the ball was before updating its position and where it is after that, you can also save it from previous iteration to avoid double-check).</p>\n\n<p>I didn't touch issues of readability, style etc., only main multithreading and logic issues.</p>\n\n<p>PS:</p>\n\n<blockquote>\n  <p>New balls are also appearing endlessly</p>\n</blockquote>\n\n<p>because you spawn them endlessly here:</p>\n\n<pre><code>while(run) {\n    window-&gt;addBall();\n    threads.push_back(std::thread(ballFunction, i));\n    i++;\n    sleep(1);\n}\n</code></pre>\n\n<p>I don't know what you want your program to do instead.</p>\n"}], "owner": {"reputation": 43, "user_id": 11223020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30bea69d11ab315b7858b461a72c137a?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin", "link": "https://stackoverflow.com/users/11223020/marcin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 56044069, "answer_count": 1, "score": 3, "last_activity_date": 1557342042, "creation_date": 1557324464, "last_edit_date": 1557342042, "question_id": 56042718, "link": "https://stackoverflow.com/questions/56042718/a-proper-way-to-use-mutex-in-c-ncurses-project", "title": "A proper way to use mutex in c++ ncurses project?", "body": "<p>I can't find a way to write a good condition(s) to solve my problem. As you can see on an included image there is a line in a middle of a screen and balls are endlessly going up and down and disappearing after some time. New balls are also appearing endlessly.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6yCUT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6yCUT.png\" alt=\"my image\"></a></p>\n\n<p>My task is to use mutex so that only N balls (2 or 3) can be above the line and the rest are waiting for their turn.</p>\n\n<p>I have tried a few options, here is the most recent one. It probably doesn't make much sense but I have no other ideas for the moment:</p>\n\n<p>Fragment from ball.cpp:</p>\n\n<pre><code>Ball::Ball(int nr)\n{\n    this-&gt;nr = nr;\n    changeDirection();\n    this-&gt;x = 40;\n    this-&gt;y = 24;\n    this-&gt;lastX = 0;\n    this-&gt;lastY = 0;\n    this-&gt;bounceCounter = 0;\n    this-&gt;isAboveTheLine = false;\n}\n</code></pre>\n\n<p>........</p>\n\n<pre><code>if(y &lt; 12) {\n    isAboveTheLine = true;\n}\nelse if(y &gt;= 12) {\n    isAboveTheLine = false;\n}\n</code></pre>\n\n<p>And from main.cpp:</p>\n\n<pre><code>std::mutex m;\n\nvoid ballFunction(int a)\n{   \n    int counter = 2;\n    int nr = a;\n    while (run &amp;&amp; shared-&gt;balls[nr]-&gt;bounceCounter &lt; 5)\n    {\n        usleep(50000);\n\n        shared-&gt;balls[nr]-&gt;updateBall();\n\n        if(shared-&gt;balls[nr]-&gt;isAboveTheLine == true) {         \n            counter++;\n        }\n        else if(shared-&gt;balls[nr]-&gt;isAboveTheLine == false) {\n            counter--;\n        }\n\n        if(counter &gt;= 3) {\n            m.lock();\n        }\n        else if (counter&lt;2) {\n            m.unlock();\n        }\n    }\n\n    shared-&gt;balls[nr]-&gt;x = -1;\n    shared-&gt;balls[nr]-&gt;y = -1;\n}\n</code></pre>\n\n<hr>\n\n<p>Edit: I have added int main():</p>\n\n<pre><code>int main() {\n    srand(time(NULL));\n\n    window = new Window();\n\n    int i = 0;\n\n    std::vector&lt;std::thread&gt; threads;\n\n    std::thread threadWindow(updateWindow2);\n    std::thread threadExit(exit);\n\n    while(run) {\n        window-&gt;addBall();\n        threads.push_back(std::thread(ballFunction, i));\n        i++;\n        sleep(1);\n    }\n\n    threadWindow.join();\n    threadExit.join();\n\n    for(int j=2; j&lt;i+2; j++) {\n        threads[j].join();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It doesn't work at all. Am I going in a right direction or do I need a different approach?</p>\n"}, {"tags": ["c++", "string", "pointers"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 9, "creation_date": 1557323190, "post_id": 56042282, "comment_id": 98726499, "body": "Turn to the page in your book about C strings and <code>strcpy</code>, then abandon this approach and use <code>std::string</code>."}, {"owner": {"reputation": 213, "user_id": 4658722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458552d45a23942bebbdbeeb1538e6cd?s=128&d=identicon&r=PG", "display_name": "user74200", "link": "https://stackoverflow.com/users/4658722/user74200"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557323333, "post_id": 56042282, "comment_id": 98726587, "body": "I know about std::string, but can&#39;t use it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1557323340, "post_id": 56042282, "comment_id": 98726594, "body": "Why can&#39;t you use it?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1557323428, "post_id": 56042282, "comment_id": 98726649, "body": "What do you think would be the difference if you used <code>malloc</code>?"}, {"owner": {"reputation": 213, "user_id": 4658722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458552d45a23942bebbdbeeb1538e6cd?s=128&d=identicon&r=PG", "display_name": "user74200", "link": "https://stackoverflow.com/users/4658722/user74200"}, "edited": false, "score": 0, "creation_date": 1557323475, "post_id": 56042282, "comment_id": 98726685, "body": "Its an assignment in which i cant use the standard library."}, {"owner": {"reputation": 213, "user_id": 4658722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458552d45a23942bebbdbeeb1538e6cd?s=128&d=identicon&r=PG", "display_name": "user74200", "link": "https://stackoverflow.com/users/4658722/user74200"}, "edited": false, "score": 0, "creation_date": 1557323518, "post_id": 56042282, "comment_id": 98726715, "body": "No difference, im just wondering if theres a way to do it with new."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1557323546, "post_id": 56042282, "comment_id": 98726728, "body": "@user74200 Library restrictions should be mentioned in the question. If you&#39;re not allowed the standard library, you&#39;re going to have to write your own string copying function (which is a very common homework exercise...)."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1557323634, "post_id": 56042282, "comment_id": 98726786, "body": "@user74200 <i>I know about std::string, but can&#39;t use it</i> -- <code>std::string</code> has been a part of standard C++ for 21 years now.  That is an entire generation.  By not using it, all you&#39;re learning is how to write unsafe C++ code."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1557323910, "post_id": 56042282, "comment_id": 98726957, "body": "<code>s=&quot;abcdef&quot;;</code> simply leaks the memory you allocated on the other line by reassigning the pointer. (And it&#39;s not supposed to compile since C++11 due to the const difference.)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557324083, "post_id": 56042282, "comment_id": 98727076, "body": "If it&#39;s an assignment then you have been surely given sufficient course material to accomplish the task and, if not, then you should discuss it with your teacher."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1557324102, "post_id": 56042282, "comment_id": 98727093, "body": "You might get more helpful answers if you said what your assignment <i>is</i> rather than asking about the problems with your proposed solution. (See <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">&quot;The &#39;XY&#39; problem</a>.)"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1557324005, "post_id": 56042316, "comment_id": 98727015, "body": "<code>strncpy</code> is often promoted as a safer <code>strcpy</code> but it sucks for copying c strings too. It doesn&#39;t guarantee null termination in case your array is too small. It also fills the rest of the array (the remaining space after the copy) with additional null terminators, which can be a big deal for large buffers. It does guard against buffer overflow but there are other ways of preventing overflows. In my opinion, it&#39;s best to avoid the whole family of functions."}], "tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 1, "last_activity_date": 1557323263, "creation_date": 1557323263, "answer_id": 56042316, "question_id": 56042282, "link": "https://stackoverflow.com/questions/56042282/filling-char-pointer-correctly/56042316#56042316", "title": "Filling char pointer correctly", "body": "<p>Once you've allocated the memory for this string, you could use <a href=\"http://www.cplusplus.com/reference/cstring/strcpy/\" rel=\"nofollow noreferrer\"><code>strcpy</code></a> to populate it:</p>\n\n<pre><code>strcpy(s, \"abcdef\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 7, "last_activity_date": 1557324827, "last_edit_date": 1557324827, "creation_date": 1557324060, "answer_id": 56042594, "question_id": 56042282, "link": "https://stackoverflow.com/questions/56042282/filling-char-pointer-correctly/56042594#56042594", "title": "Filling char pointer correctly", "body": "<p>This sequence of statements</p>\n\n<pre><code>char* s = new char[150];\ns=\"abcdef\";\n</code></pre>\n\n<p>results in a memory leak because at first a memory was allocated and its address was assigned to the pointer <code>s</code> and then the pointer was reassigned with the address of the string literal <code>\"abcdef\"</code>. And moreover string literals in C++ (opposite to C) have types of constant character arrays.</p>\n\n<p>If you allocated a memory for a string then you should copy a string in the memory either by using the C standard function <code>strcpy</code> or C standard function <code>strncpy</code>.</p>\n\n<p>For example</p>\n\n<pre><code>char* s = new char[150];\nstd::strcpy( s, \"abcdef\" );\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>const size_t N = 150;\nchar* s = new char[N];\nstd::strncpy( s, \"abcdef\", N );\ns[N-1] = '\\0';\n</code></pre>\n\n<p>Or even the following way</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\nint main()\n{\n    const size_t N = 150;\n    char *s = new char[N]{ '\\0' };\n\n    std::strncpy( s, \"abcdef\", N - 1 );\n\n    std::cout &lt;&lt; s &lt;&lt; '\\n';\n\n    delete []s;\n}\n</code></pre>\n\n<p>In any case it is better just to use the standard class <code>std::string</code>.</p>\n\n<pre><code>std::string s( \"abcdef\" );\n</code></pre>\n\n<p>or for example</p>\n\n<pre><code>std::string s;\ns.assign( \"abcdef\" );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1557325372, "post_id": 56042685, "comment_id": 98727954, "body": "What&#39;s the difference between your <code>strcpyX</code> and the library function <code>std::strcpy</code>?  Why reinvent the wheel?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1557325425, "post_id": 56042685, "comment_id": 98727993, "body": "The library version, <code>strcpy()</code>, may be optimized for the target platform; your&#39;s isn&#39;t."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1557326093, "post_id": 56042685, "comment_id": 98728396, "body": "@ThomasMatthews if you read the comments, this is what the post is asking for, a replacement for the standard <code>strcpy()</code>. I know the Standard Library is optimized and blah blah. That is not what the post is about. It appears to be a class assignment."}], "tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 3, "last_activity_date": 1557324369, "creation_date": 1557324369, "answer_id": 56042685, "question_id": 56042282, "link": "https://stackoverflow.com/questions/56042282/filling-char-pointer-correctly/56042685#56042685", "title": "Filling char pointer correctly", "body": "<p>The basic procedure for creating a memory area for a string and then filling it without using the Standard Library in C++ is as follows:</p>\n\n<ul>\n<li>create the appropriate sized memory area with <code>new</code></li>\n<li>use a loop to copy characters from a string into the new area</li>\n</ul>\n\n<p>So the source code would look like:</p>\n\n<pre><code>// function to copy a zero terminated char string to a new char string.\n// loop requires a zero terminated char string as the source.\nchar *strcpyX (char *dest, const char *source)\n{\n    char *destSave = dest;   // save copy of the destination address to return\n\n    while (*dest++ = *source++);   // copy characters up to and including zero terminator.\n\n    return destSave;  // return destination pointer per standard library strcpy()\n}\n\n\n// somewhere in your code\n\nchar *s1 = new char [150];\n\nstrcpyX (s1, \"abcdef\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1557326181, "post_id": 56043121, "comment_id": 98728455, "body": "See also: <code>strcat</code>, <code>strchr</code>, <code>strncpy</code> and <code>strncat</code>."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 2, "last_activity_date": 1557325880, "creation_date": 1557325880, "answer_id": 56043121, "question_id": 56042282, "link": "https://stackoverflow.com/questions/56042282/filling-char-pointer-correctly/56043121#56043121", "title": "Filling char pointer correctly", "body": "<p>Given a character array:  </p>\n\n<pre><code>char * s = new char [256];\n</code></pre>\n\n<p>Here's how to fill the <strong>pointer</strong>:</p>\n\n<pre><code>std::fill(&amp;s, &amp;s + sizeof(s), 0);\n</code></pre>\n\n<p>Here's how to <strong>fill</strong> the <strong>array</strong>:  </p>\n\n<pre><code>std::fill(s, s+256, '\\0');\n</code></pre>\n\n<p>Here's how to <strong>assign</strong> or <strong>copy text</strong> into the <strong>array</strong>:  </p>\n\n<pre><code>std::strcpy(s, \"Hello\");\n</code></pre>\n\n<p>You could also use <code>std::copy</code>:  </p>\n\n<pre><code>static const char text[] = \"World\";\nstd::copy(text, text + sizeof(text), s);\n</code></pre>\n\n<p>Remember that a pointer, array and C-Style string are different concepts and objects.</p>\n\n<p><strong>Edit 1: Prefer <code>std::string</code></strong><br>\nIn C++, prefer to use <code>std::string</code> for text rather than character arrays.</p>\n\n<pre><code>std::string s;\ns = \"abcdef\";\nstd::cout &lt;&lt; s &lt;&lt; \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 4658722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458552d45a23942bebbdbeeb1538e6cd?s=128&d=identicon&r=PG", "display_name": "user74200", "link": "https://stackoverflow.com/users/4658722/user74200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1557325880, "creation_date": 1557323137, "last_edit_date": 1557324202, "question_id": 56042282, "link": "https://stackoverflow.com/questions/56042282/filling-char-pointer-correctly", "title": "Filling char pointer correctly", "body": "<p>I have a char pointer:</p>\n\n<pre><code>char* s = new char[150];\n</code></pre>\n\n<p>Now how do i fill it? This:</p>\n\n<pre><code>s=\"abcdef\";\n</code></pre>\n\n<p>Gives warning about deprecation of conversion between string literal and <code>char*</code>, but generally works.</p>\n\n<p>This:</p>\n\n<pre><code>char* s = new[150](\"abcdef\");\n</code></pre>\n\n<p>Does not work, gives an error.</p>\n\n<p>How to do this properly? Note that I want the memory allocation to have 150*sizeof(char) bytes and contain \"abcdef\". I know about malloc, but is it possible to do with new?</p>\n\n<p>Its for an assignment where i cant use the standard library.</p>\n"}, {"tags": ["c++", "carriage-return", "clang-format"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1557322985, "post_id": 56042174, "comment_id": 98726372, "body": "Can you show us an example of this happening?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1557323494, "post_id": 56042174, "comment_id": 98726699, "body": "You could try <code>clang-format-7</code> instead. A lot of bugs have been fixed in it."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1557324330, "post_id": 56042174, "comment_id": 98727245, "body": "<code>CR</code> is line ending used by old Mac (up to version 9), Commodore and so on. Looks like something was incorrectly configured or your file initially didn&#39;t used uniform line endings (Windows <code>CRLF</code> and Linux/unix <code>LF</code>) and as a result some auto detection mechanism in clang-format has failed. Try unify line endings first (preferable by configuring git). Then check options in clang-format."}], "owner": {"reputation": 39, "user_id": 1249235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2a0c18847d99de7b78dfa82e939fec?s=128&d=identicon&r=PG", "display_name": "ads1690", "link": "https://stackoverflow.com/users/1249235/ads1690"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557342930, "creation_date": 1557322823, "last_edit_date": 1557342930, "question_id": 56042174, "link": "https://stackoverflow.com/questions/56042174/clang-format-adds-extra-carriage-return-every-run", "title": "clang-format adds extra carriage return every run", "body": "<p>I recently ran clang-format on all our source code. I noticed that in some comment blocks, clang-format added carriage returns on every iteration. </p>\n\n<p>They show up as <code>Cr</code> when I view them in bitbucket as a diff and <code>^M</code> when I do a <code>cat file.hpp -A</code>. Right now I have 6 <code>Cr</code>s in a file which did not have any before in that line. I am running <code>clang-format-6.0</code> on an Ubuntu 16.04 machine.</p>\n\n<p>Any thoughts on why this is going on and how to prevent it from changing every time?</p>\n\n<p>UPDATE: Example from a header block\nHere's a piece of text from a header block</p>\n\n<pre><code>  /**\n  *\n\n  ^M^M^M^M^M^M^M^M^M^M\n  CHANGE HISTORY:\n  ^M^M^M^M^M^M^M^M^M^M\n\n  */\n</code></pre>\n"}, {"tags": ["c++", "compiler-errors", "arduino", "unions"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1557323268, "post_id": 56042093, "comment_id": 98726545, "body": "Does Arduino or any library you might be using have a Converter class? The AVR compiler in C++98 mode seems perfectly happy with this code."}, {"owner": {"reputation": 1975, "user_id": 5392438, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa9081c7a8a8420b63267663f22f6010?s=128&d=identicon&r=PG&f=1", "display_name": "x13", "link": "https://stackoverflow.com/users/5392438/x13"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1557323560, "post_id": 56042093, "comment_id": 98726736, "body": "@ThomasJager I am not using any libraries, and changing the name of the union does not change the outcome. I am using Arduino IDE the default programmer is AVRISP mkll."}], "answers": [{"tags": [], "owner": {"reputation": 1975, "user_id": 5392438, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa9081c7a8a8420b63267663f22f6010?s=128&d=identicon&r=PG&f=1", "display_name": "x13", "link": "https://stackoverflow.com/users/5392438/x13"}, "is_accepted": false, "score": 0, "last_activity_date": 1557476732, "last_edit_date": 1557476732, "creation_date": 1557476185, "answer_id": 56073408, "question_id": 56042093, "link": "https://stackoverflow.com/questions/56042093/c-union-with-functions-arduino-compiler-error-cannot-be-overloaded/56073408#56073408", "title": "C++ Union with functions, Arduino compiler error &quot;cannot be overloaded&quot;", "body": "<p>Solution: Don't try to do what i did on arduino if it does not work.</p>\n\n<p>I found that if i remove all functions inside the union except one it will compile if that function has the parameter list (uint8_t data[]) but not when i add any second parameter to the parameter list, and i have no idea why.</p>\n\n<p>Much of the different issues i'm running into seem undocumented, so i'm going to abandon the union functions and take the easy but less elegant solution of placing the functions outside of the union and defining the union members as public, like this:</p>\n\n<pre><code>static union {\n    float floatValue;\n    uint32_t uint32Value;\n    uint16_t uint16Value;\n    uint8_t inValue[4];\n};\n\nfloat bytesToFloat(uint8_t data[]){\n    inValue[ 0 ] = data[ 3 ];\n    inValue[ 1 ] = data[ 2 ];\n    inValue[ 2 ] = data[ 1 ];\n    inValue[ 3 ] = data[ 0 ];\n    return floatValue;\n}\nuint32_t bytesToUint32(uint8_t data[]){\n    inValue[ 0 ] = data[ 3 ];\n    inValue[ 1 ] = data[ 2 ];\n    inValue[ 2 ] = data[ 1 ];\n    inValue[ 3 ] = data[ 0 ];\n    return uint32Value;\n}\nuint16_t bytesToUint16(uint8_t data[]){\n    inValue[ 0 ] = data[ 1 ];\n    inValue[ 1 ] = data[ 0 ];\n    return uint16Value;\n}\n\nvoid setup() {\n    uint8_t t1[4] = {0x0A, 0xC3, 0x53, 0x48}; //180573000\n    cout &lt;&lt; bytesToUint32(t1) &lt;&lt; endl;\n    uint8_t t2[2] = {0x07, 0xE3}; //2019\n    cout &lt;&lt; bytesToUint16(t2) &lt;&lt; endl;\n    uint8_t t3 = 0x05; //5\n    cout &lt;&lt; t3 * 1 &lt;&lt; endl;\n    cout.precision(5);\n    uint8_t t4[9][4] = {\n            {0x3F, 0x7F, 0xCC, 0x8C}, //0.99921\n            {0x3D, 0x21, 0x43, 0x00}, //0.039371\n            {0x3B, 0x92, 0x07, 0xDF}, //0.0044565\n            {0xBD, 0x21, 0xBE, 0x6E}, //-0.039488\n            {0x3F, 0x7F, 0xAE, 0x7E}, //0.99876\n            {0x3C, 0xF9, 0x64, 0x38}, //0.030443\n            {0xBB, 0x55, 0x26, 0x18}, //-0.0032524\n            {0xBC, 0xFA, 0xA3, 0x24}, //-0.030595\n            {0x3F, 0x7F, 0xE0, 0xFC}, //0.99953\n    };\n    for (int i = 0; i &lt; 9; i++) {\n        cout &lt;&lt; bytesToFloat(t4[ i ]) &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1975, "user_id": 5392438, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa9081c7a8a8420b63267663f22f6010?s=128&d=identicon&r=PG&f=1", "display_name": "x13", "link": "https://stackoverflow.com/users/5392438/x13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557476732, "creation_date": 1557322535, "last_edit_date": 1557472713, "question_id": 56042093, "link": "https://stackoverflow.com/questions/56042093/c-union-with-functions-arduino-compiler-error-cannot-be-overloaded", "title": "C++ Union with functions, Arduino compiler error &quot;cannot be overloaded&quot;", "body": "<p>I am writing a library for an Arduino and am now stuck at converting a byte array which is in the wrong endian-ness to a float, uint32 oruint16.</p>\n\n<p>I have gotten working code where i use memcpy to copy an array that is reversed for the correct endianness to the memory of a float, but now i found that <code>union { uint8_t bytes[4]; float result; }</code> is a quick and efficient way to do the same but using less resources.</p>\n\n<p>The concept i made runs on my PC (C++14 on windows 10 using cygwin), but it won't compile in the Arduino IDE for my Arduino because <code>'float Converter::ToFloat(uint8_t*)' cannot be overloaded</code> and i have no idea where the compiler gets the idea that i'm overloading anything.</p>\n\n<pre><code>union Converter {\n  float ToFloat(uint8_t data[]) {\n    inValue[0] = data[3];\n    inValue[1] = data[2];\n    inValue[2] = data[1];\n    inValue[3] = data[0];\n    return floatOutValue;\n  };\n  uint32_t ToUint32(uint8_t data[]) {\n    inValue[0] = data[3];\n    inValue[1] = data[2];\n    inValue[2] = data[1];\n    inValue[3] = data[0];\n    return uint32OutValue;\n  };\n  uint32_t ToUint16(uint8_t data[]) {\n    inValue[0] = data[1];\n    inValue[1] = data[0];\n    return uint16OutValue;\n  };\nprivate:\n  uint8_t inValue[4];\n  float floatOutValue;\n  uint32_t uint32OutValue;\n  uint16_t uint16OutValue;\n};\n\nvoid setup() {\n  uint8_t t1[4] = {0x0A, 0xC3, 0x53, 0x48}; //180573000\n  Converter converter;\n  Serial.println(converter.ToUint32(t1));\n  uint8_t t2[2] = {0x07, 0xE3}; //2019\n  Serial.println(converter.ToUint16(t2));\n  uint8_t t3 = 0x05; //5\n  Serial.println(t3 * 1);\n  uint8_t t4[9][4] = {\n    {0x3F, 0x7F, 0xCC, 0x8C}, //0.99921\n    {0x3D, 0x21, 0x43, 0x00}, //0.039371\n    {0x3B, 0x92, 0x07, 0xDF}, //0.0044565\n    {0xBD, 0x21, 0xBE, 0x6E}, //-0.039488\n    {0x3F, 0x7F, 0xAE, 0x7E}, //0.99876\n    {0x3C, 0xF9, 0x64, 0x38}, //0.030443\n    {0xBB, 0x55, 0x26, 0x18}, //-0.0032524\n    {0xBC, 0xFA, 0xA3, 0x24}, //-0.030595\n    {0x3F, 0x7F, 0xE0, 0xFC}, //0.99953\n  };\n  for (int i = 0; i &lt; 9; i++) {\n    Serial.println(converter.ToFloat(t4[i]));\n  }\n}\n</code></pre>\n\n<p>So, why does this code not compile for an Arduino, but runs perfectly on windows 10 with the right outputs?\nWhat does the compiler error really mean?</p>\n"}, {"tags": ["c++", "c++11", "templates", "clang++"], "comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1557323600, "post_id": 56041900, "comment_id": 98726766, "body": "Using g++ (gcc 6.3) there is no warning even with <code>-pedantic -Wall -Wextra</code>, and there are no linker error / compilation warning without <code>template class Derived&lt;int&gt;;</code>"}, {"owner": {"reputation": 356, "user_id": 6060352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b64Kk.jpg?s=128&g=1", "display_name": "lochsh", "link": "https://stackoverflow.com/users/6060352/lochsh"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1557323763, "post_id": 56041900, "comment_id": 98726873, "body": "@bruno Thanks, good to know.  The linker error is dependent on the linker, but my understanding is that many linkers will struggle to link the templated class without explicit instantiation.  See here for more info <a href=\"http://www.cs.technion.ac.il/users/yechiel/c++-faq/separate-template-class-defn-from-decl.html\" rel=\"nofollow noreferrer\">cs.technion.ac.il/users/yechiel/c++-faq/&hellip;</a>  As for the warnings, these are not part of the C++ standard and it does not surprise me that gcc does not have this warning.  Unfortunately I cannot solve my problem by changing compilers and would like to understand why it is happening."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1557324294, "post_id": 56041900, "comment_id": 98727220, "body": "If adding <code>template class Derived&lt;int&gt;;</code> it must be placed into a unique source file, not in the header included by several sources"}, {"owner": {"reputation": 356, "user_id": 6060352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b64Kk.jpg?s=128&g=1", "display_name": "lochsh", "link": "https://stackoverflow.com/users/6060352/lochsh"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1557324504, "post_id": 56041900, "comment_id": 98727382, "body": "It is in a source file, not a header. I will update my question to make it clearer"}, {"owner": {"reputation": 356, "user_id": 6060352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b64Kk.jpg?s=128&g=1", "display_name": "lochsh", "link": "https://stackoverflow.com/users/6060352/lochsh"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1557324647, "post_id": 56041900, "comment_id": 98727484, "body": "As I said above, I am not using g++."}], "answers": [{"comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1557324342, "post_id": 56042498, "comment_id": 98727257, "body": "Using g++ <code>template class Derived&lt;int&gt;;</code> must be present only one times, I mean in one of the sources (or none) but not in the header included by several sources. Declaring it <i>extern</i> in the header included several times works (while it is defined in one source of course)"}, {"owner": {"reputation": 356, "user_id": 6060352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b64Kk.jpg?s=128&g=1", "display_name": "lochsh", "link": "https://stackoverflow.com/users/6060352/lochsh"}, "edited": false, "score": 0, "creation_date": 1557327287, "post_id": 56042498, "comment_id": 98729106, "body": "@HAL9000 The explicit instantiation is in the source file, not the header.  See edit to question.  Adding an extern declaration in the header doesn&#39;t remove the warning for me.  Does it work for you with clang and <code>-Wweak-template-vtables</code>?"}, {"owner": {"reputation": 356, "user_id": 6060352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b64Kk.jpg?s=128&g=1", "display_name": "lochsh", "link": "https://stackoverflow.com/users/6060352/lochsh"}, "edited": false, "score": 0, "creation_date": 1557328224, "post_id": 56042498, "comment_id": 98729692, "body": "Can you explain the reasoning for adding the extern declaration?  I would have thought it would result in &quot;Explicit specialisation after instantiation&quot; compiler errors in general."}, {"owner": {"reputation": 1599, "user_id": 9948091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JANyt.png?s=128&g=1", "display_name": "HAL9000", "link": "https://stackoverflow.com/users/9948091/hal9000"}, "edited": false, "score": 0, "creation_date": 1557329420, "post_id": 56042498, "comment_id": 98730418, "body": "if you have the <code>extern</code> keyword, you tell the compile that one of the source-files will explicitly instantiate the template, so there is no need for the compiler to implicitly instantiate it in every source file. (limited to those template parameters used with the <code>extern</code> declaration)"}, {"owner": {"reputation": 356, "user_id": 6060352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b64Kk.jpg?s=128&g=1", "display_name": "lochsh", "link": "https://stackoverflow.com/users/6060352/lochsh"}, "edited": false, "score": 0, "creation_date": 1557331682, "post_id": 56042498, "comment_id": 98731549, "body": "Thanks for writing more info. I don&#39;t want to put the implementation in the header as it causes unnecessary bloat. I wonder if you are right about the warning -- my understanding of it was similar to that of -Wweak-vtables, where there&#39;s no way for the compiler to choose a TU to place the vtable due to all virtuals being inline, so it puts a copy in every TU that uses the class instead. More info here <a href=\"https://stackoverflow.com/a/23749273/6060352\">stackoverflow.com/a/23749273/6060352</a> These clang tests suggest my interpretation is right <a href=\"https://github.com/llvm-mirror/clang/blob/master/test/SemaCXX/warn-weak-vtables.cpp#L62\" rel=\"nofollow noreferrer\">github.com/llvm-mirror/clang/blob/master/test/SemaCXX/&hellip;</a>"}, {"owner": {"reputation": 356, "user_id": 6060352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b64Kk.jpg?s=128&g=1", "display_name": "lochsh", "link": "https://stackoverflow.com/users/6060352/lochsh"}, "edited": false, "score": 0, "creation_date": 1557337026, "post_id": 56042498, "comment_id": 98734056, "body": "I wonder if this is an example of this clang bug <a href=\"https://bugs.llvm.org/show_bug.cgi?id=18733\" rel=\"nofollow noreferrer\">bugs.llvm.org/show_bug.cgi?id=18733</a> it would certainly explain a lot"}], "tags": [], "owner": {"reputation": 1599, "user_id": 9948091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JANyt.png?s=128&g=1", "display_name": "HAL9000", "link": "https://stackoverflow.com/users/9948091/hal9000"}, "is_accepted": false, "score": 3, "last_activity_date": 1557330512, "last_edit_date": 1557330512, "creation_date": 1557323811, "answer_id": 56042498, "question_id": 56041900, "link": "https://stackoverflow.com/questions/56041900/why-does-explicit-template-instantiation-result-in-weak-template-vtables-warning/56042498#56042498", "title": "Why does explicit template instantiation result in weak-template-vtables warning when there are out-of-line virtuals?", "body": "<p>Does the line <code>template class Derived&lt;int&gt;;</code> exist in a header-file, which again is included in multiple source-files?</p>\n\n<p>In that case the, vtable and methods of class <code>Derived&lt;int&gt;</code> will exist in multiple object-files. And the linker has to figure out what to do with those multiple copies. </p>\n\n<p>How the compiler and linker is supposed resolve this according to the c++ standard, i am not sure of. But typically I don't care since the copies should normally look the same.</p>\n\n<p>But to avoid this issue, you should put <code>extern template class Derived&lt;int&gt;;</code> in the header file, and <code>template class Derived&lt;int&gt;;</code> in exactly 1 compile unit (aka. source-file)</p>\n\n<p>EDIT (to reflect your split of the code into \"file.hpp\" and \"file.cpp\"):</p>\n\n<p>I have played a little bit with clang-6 (I that is the latest version I have)</p>\n\n<p>To me the warning is of the type \"If you do X, Y will happen\". But it doesn't mean y has happened.</p>\n\n<p>In this case Y is multiple vtables and that will only happen if you put <code>template class Derived&lt;int&gt;;</code> in multiple source files, which you dont't do.</p>\n\n<p>The warning gets triggered for each <code>template class Derived&lt;int&gt;;</code> in your sources, so if you only see one warning, there will be only one vtable.</p>\n\n<p>But there is a way to get rid of the warning: Do not have explicit instantiation, and rely on the compiler to instantiate the class implicitly.</p>\n\n<p>For that you have to put all of your template definition in the header file. So move the definitions:</p>\n\n<pre><code>template&lt;typename T&gt;\nbool Derived&lt;T&gt;::func(void) {return true;}\n\ntemplate&lt;typename T&gt;\nDerived&lt;T&gt;::Derived(void) {}\n</code></pre>\n\n<p>into the header file, and remove <code>extern template class Derived&lt;int&gt;;</code> and \n<code>template class Derived&lt;int&gt;;</code></p>\n"}, {"tags": [], "owner": {"reputation": 356, "user_id": 6060352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b64Kk.jpg?s=128&g=1", "display_name": "lochsh", "link": "https://stackoverflow.com/users/6060352/lochsh"}, "is_accepted": true, "score": 5, "last_activity_date": 1603649212, "last_edit_date": 1603649212, "creation_date": 1557338813, "answer_id": 56046699, "question_id": 56041900, "link": "https://stackoverflow.com/questions/56041900/why-does-explicit-template-instantiation-result-in-weak-template-vtables-warning/56046699#56046699", "title": "Why does explicit template instantiation result in weak-template-vtables warning when there are out-of-line virtuals?", "body": "<p>EDIT: I do not think this is a bug in Clang, but instead a consequence of a requirement of the Itanium C++ ABI: <a href=\"https://itanium-cxx-abi.github.io/cxx-abi/abi.html#vague-itemplate\" rel=\"nofollow noreferrer\">https://itanium-cxx-abi.github.io/cxx-abi/abi.html#vague-itemplate</a> This section is referenced in the Clang source in <code>RecordLayoutBuilder.cpp</code> in <code>computeKeyFunction</code>:</p>\n<blockquote>\n<p>Template instantiations don't have key functions per Itanium C++ ABI 5.2.6. Same behaviour as GCC.</p>\n</blockquote>\n<p>The Itanium specification says that class template instantiations will be stored in a COMDAT section in the object file. COMDAT sections are used to store multiple definitions of the same object, which can then be unified at link-time. If the template was compiled the way I expected in my answer, with a key function anchoring it to a specific translation unit, then that wouldn't be compliant with this ABI.</p>\n<p>I do think the warning is unhelpful, but as it's not part of -Wall or -Wextra I don't mind so much.</p>\n<p>(Original post below)</p>\n<p>I'm inclined to believe that this is due to a bug in Clang, reported here: <a href=\"https://bugs.llvm.org/show_bug.cgi?id=18733\" rel=\"nofollow noreferrer\">https://bugs.llvm.org/show_bug.cgi?id=18733</a></p>\n<p>Reposting content here in case the link breaks:</p>\n<blockquote>\n<p><b>Rafael \u00c1vila de Esp\u00edndola 2014-02-05 00:00:19 PST</b></p>\n<p>Given</p>\n</blockquote>\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T&gt;\nclass foo {\n  virtual ~foo() {}\n};\n\nextern template class foo&lt;int&gt;;\ntemplate class foo&lt;int&gt;;\n</code></pre>\n<blockquote>\n<p>clang warns:</p>\n</blockquote>\n<pre><code>test.cpp:6:23: warning: explicit template instantiation 'foo&lt;int&gt;' will emit a vtable in every translation unit [-Wweak-template-vtables]\nextern template class foo&lt;int&gt;;\n                      ^\n1 warning generated.\n</code></pre>\n<blockquote>\n<p>note that the warning points to the explicit template instantiation declaration, but is triggered by the definition. This should probably be checking if the definition is in a header. In a .cpp file there is only one translation unit that sees it.</p>\n<p><b>Comment 1 David Faure 2016-02-13 12:21:27 PST</b></p>\n<p>Yes, this false positive is indeed annoying. Thanks for reporting it. Clang developers: thanks for fixing it :-)</p>\n</blockquote>\n<p>I'd be grateful for anyone else's opinion, but I agree with the bug reporter that this warning seems bogus in this case.</p>\n<p>Although the last comment on the bug report refers to it as fixed, the bug is still listed with status &quot;new&quot;, so I do not believe it is fixed.</p>\n"}], "owner": {"reputation": 356, "user_id": 6060352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b64Kk.jpg?s=128&g=1", "display_name": "lochsh", "link": "https://stackoverflow.com/users/6060352/lochsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 854, "favorite_count": 0, "accepted_answer_id": 56046699, "answer_count": 2, "score": 9, "last_activity_date": 1603649212, "creation_date": 1557321870, "last_edit_date": 1557327154, "question_id": 56041900, "link": "https://stackoverflow.com/questions/56041900/why-does-explicit-template-instantiation-result-in-weak-template-vtables-warning", "title": "Why does explicit template instantiation result in weak-template-vtables warning when there are out-of-line virtuals?", "body": "<p>[Edited to show split between .cpp and hpp]</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// file.hpp\nclass Base {\n public:\n    virtual ~Base(void);\n    Base(void);\n    Base(const Base&amp;) = default;\n};\n\ntemplate&lt;typename T&gt;\nclass Derived: public Base {\n public:\n    Derived(void);\n    bool func(void);\n};\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// file.cpp\n#include \"file.hpp\"\n\nBase::~Base(void) {}\nBase::Base(void) {}\n\ntemplate&lt;typename T&gt;\nbool Derived&lt;T&gt;::func(void) {return true;}\n\ntemplate&lt;typename T&gt;\nDerived&lt;T&gt;::Derived(void) {}\n\n// required to avoid linker errors when using `Derived` elsewhere\ntemplate class Derived&lt;int&gt;;\n</code></pre>\n\n<p>The last line causes the following compiler warning in Clang v8.0 <code>warning: explicit template instantiation 'Derived&lt;int&gt;' will emit a vtable in every translation unit [-Wweak-template-vtables]</code></p>\n\n<p>My understanding is that because <code>Base</code> has at least one out-of-line virtual method, the vtables for all classes here would be anchored to this translation unit, hence <a href=\"http://vhttps://llvm.org/docs/CodingStandards.html#provide-a-virtual-method-anchor-for-classes-in-headers\" rel=\"nofollow noreferrer\">this guidance</a> in the LLVM coding standard. <strong>So why is this warning being generated?</strong></p>\n\n<p>See on Godbolt here with specific compiler version I'm using: <a href=\"https://godbolt.org/z/Kus4bq\" rel=\"nofollow noreferrer\">https://godbolt.org/z/Kus4bq</a></p>\n\n<p>Every similar question I find on SO is for classes with no out-of-line virtual methods so I have not been able to find an answer.</p>\n"}, {"tags": ["c++", "inheritance", "copy-constructor", "deep-copy", "assignment-operator"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1557321858, "post_id": 56041851, "comment_id": 98725619, "body": "Please show code instead of describing it."}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 3, "last_activity_date": 1557322488, "creation_date": 1557322488, "answer_id": 56042075, "question_id": 56041851, "link": "https://stackoverflow.com/questions/56041851/how-base-class-members-gets-copied-in-inheritance-when-we-copy-assign-derived-cl/56042075#56042075", "title": "How Base class members gets copied in inheritance when we copy/assign derived class objects?", "body": "<blockquote>\n  <p>How the members of base class will be copied</p>\n</blockquote>\n\n<p>Since there's no explicit copy constructor, one will be generated by the compiler.  It will in turn call/generate copy constructors for the data members of the base class.  At the end, builtin types (<code>int</code>, <code>float</code>, pointers! <em>etc</em> are simply copied), types with copy constructors can copy themselves, any other type will generate a compile time error. </p>\n"}], "owner": {"reputation": 544, "user_id": 1039936, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fO39L.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/1039936/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557322968, "creation_date": 1557321741, "last_edit_date": 1557322968, "question_id": 56041851, "link": "https://stackoverflow.com/questions/56041851/how-base-class-members-gets-copied-in-inheritance-when-we-copy-assign-derived-cl", "title": "How Base class members gets copied in inheritance when we copy/assign derived class objects?", "body": "<p>I have following scenario:</p>\n\n<p>I have an Abstract base class with \nno copy constructor \nno assignment operator\nhas some data members </p>\n\n<p>a derived class (derived from above base class)\nhas assignment operator\nhas some data members</p>\n\n<p>How the members of base class will be copied when we copy a derived class object to another existing derived class object. \nI understand as we have an assignment operator defined for derived class which copies derived class members but how base class members will be copied, will it be through default assignment operator?</p>\n"}, {"tags": ["c++", "string", "unicode", "unicode-string"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 4, "creation_date": 1557321685, "post_id": 56041789, "comment_id": 98725519, "body": "Did you change the code page of the console to unicode?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1557321869, "post_id": 56041789, "comment_id": 98725622, "body": "<a href=\"https://en.wikipedia.org/wiki/Code_page_850\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Code_page_850</a>"}, {"owner": {"reputation": 463, "user_id": 6547518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GOYs6.jpg?s=128&g=1", "display_name": "Ben_LCDB", "link": "https://stackoverflow.com/users/6547518/ben-lcdb"}, "edited": false, "score": 0, "creation_date": 1606384065, "post_id": 56041789, "comment_id": 114949744, "body": "This question is treated as a duplicate but it links to a C question (not C++).."}], "owner": {"user_type": "does_not_exist", "display_name": "user10546991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1557335733, "answer_count": 0, "score": 2, "last_activity_date": 1557321514, "creation_date": 1557321514, "question_id": 56041789, "link": "https://stackoverflow.com/questions/56041789/stdwcout-why-is-the-printed-character-not-the-same-as-the-input", "closed_reason": "Duplicate", "title": "std::wcout, why is the printed character not the same as the input?", "body": "<p>While attempting to print \"\u00e9\" with std::wcout the output console instead prints \"\u00da\" </p>\n\n<p><a href=\"https://www.utf8-chartable.de/unicode-utf8-table.pl\" rel=\"nofollow noreferrer\">https://www.utf8-chartable.de/unicode-utf8-table.pl</a> using this website I tried to print \"\u00e9\" using both L\"\u00e9\" or it's character code 0x00E9 but I always endup with the \"\u00da\" character instead, std::cout &lt;&lt; \"\u00e9\" also produces the same output</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    // Prints the weird U\n    std::wcout &lt;&lt; static_cast&lt;wchar_t&gt;(0x00E9);\n    // Also prints the weird U\n    std::wcout &lt;&lt; L\"\u00e9\";\n    // Also prints the weird U\n    std::cout &lt;&lt; \"\u00e9\";\n    return 0;\n}\n</code></pre>\n\n<p>`</p>\n\n<p>So, can anyone point me to what I am doing wrong ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1557321614, "post_id": 56041755, "comment_id": 98725462, "body": "What about <a href=\"https://en.cppreference.com/w/cpp/io/basic_istream/seekg\" rel=\"nofollow noreferrer\"><code>std::istream::seekg()</code></a>?"}, {"owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1557321667, "post_id": 56041755, "comment_id": 98725504, "body": "@Scheff And just pass my pos in to seekg? Would I need istream::read() too?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1557321784, "post_id": 56041755, "comment_id": 98725579, "body": "No you need to pass <code>pos * sizeof( MyStruct )</code> and you read into struct, assuming your struct is POD or alike"}, {"owner": {"reputation": 1453, "user_id": 2018010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fwCYF.gif?s=128&g=1", "display_name": "magras", "link": "https://stackoverflow.com/users/2018010/magras"}, "edited": false, "score": 1, "creation_date": 1557321887, "post_id": 56041755, "comment_id": 98725640, "body": "<code>std::fstream</code> does not support file mapping, so you have to use <code>read()</code> or something similar in any case."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1557321899, "post_id": 56041755, "comment_id": 98725651, "body": "<code>seekg()</code> can be used to position the &quot;read head&quot; of stream. It counts in bytes. To read a number of bytes, <a href=\"https://en.cppreference.com/w/cpp/io/basic_istream/read\" rel=\"nofollow noreferrer\"><code>std::istream::read()</code></a> comes in mind."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1557322094, "post_id": 56041755, "comment_id": 98725782, "body": "This all has its limitations. It probably will work if file writer and reader is the same program. I would be afraid about packing of <code>struct</code> and endianess (not an issue if limited to one platform) but it depends a bit on how paranoid you are. ;-)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1557322209, "post_id": 56041755, "comment_id": 98725867, "body": "More about this: <a href=\"https://isocpp.org/wiki/faq/serialization\" rel=\"nofollow noreferrer\">Serialization and Unserialization</a>."}], "answers": [{"comments": [{"owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "edited": false, "score": 0, "creation_date": 1557323253, "post_id": 56041963, "comment_id": 98726536, "body": "Could you please elaborate on it breaking aliasing?"}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "reply_to_user": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "edited": false, "score": 0, "creation_date": 1557324222, "post_id": 56041963, "comment_id": 98727181, "body": "@user997112 To my understanding the above code is illegal because <code>myStruct</code> does not point to a object of <code>MyStruct</code> type and C++ forbids two pointers of different types to point to the same memory. There is a an exception for the type <code>char*</code>, which can point to objects of other types. But as far as I am aware, this works only one-way. So <code>MyStruct*</code> cannot point to <code>char</code> objects. <a href=\"https://stackoverflow.com/a/7005988\">This answer</a> contains relevant quotes from the standard  that I think should support my claim."}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "reply_to_user": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "edited": false, "score": 0, "creation_date": 1557324363, "post_id": 56041963, "comment_id": 98727274, "body": "Also <a href=\"https://en.cppreference.com/w/cpp/language/reinterpret_cast\" rel=\"nofollow noreferrer\">here</a> are rules for valid <code>reinterpret_cast</code>s (not the standard). In particular the Type Aliasing paragraph states the expections too and  <code>MyStruct</code> is not one of them. But if anyone with better knowledge can clear this out I would be grateful."}, {"owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "edited": false, "score": 0, "creation_date": 1557325892, "post_id": 56041963, "comment_id": 98728267, "body": "Thanks! I&#39;m just waiting for a process to finish and then I will try the above. I won&#39;t forget to accept your answer later"}, {"owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "edited": false, "score": 0, "creation_date": 1557325994, "post_id": 56041963, "comment_id": 98728331, "body": "I assume that if(file.eof()) isn&#39;t actually required? Is that effectively just asserting the while loop didn&#39;t break prematurely?"}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "reply_to_user": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "edited": false, "score": 1, "creation_date": 1557326550, "post_id": 56041963, "comment_id": 98728686, "body": "@user997112 <code>read</code> returns <code>*this</code> and calls <code>this-&gt;setstate()</code>. The <code>ifstream</code> is then converted to bool. if the read fails for any reason it sets <code>failbit</code> and possibly others. Which make <code>ifstream</code> object false -&gt; loop breaks. Checking the <code>eofbit</code> means that the loop broke because the file ended -&gt; all structs were successfully read. If the <code>eofbit</code> is not set then all structs were <b>not</b> read. &quot;Is that effectively just asserting the while loop didn&#39;t break prematurely?&quot; Yes. Also this code assumes that the file size is multiple of <code>sizeof(MyStruct)</code>."}], "tags": [], "owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "is_accepted": true, "score": 1, "last_activity_date": 1557323027, "last_edit_date": 1557323027, "creation_date": 1557322094, "answer_id": 56041963, "question_id": 56041755, "link": "https://stackoverflow.com/questions/56041755/read-binary-bytes-beginning-at-position-n-within-ifstream/56041963#56041963", "title": "Read binary bytes beginning at position N within ifstream?", "body": "<pre><code>#include &lt;fstream&gt;\n\nstruct MyStruct{};\nint main()\n{\n    std::ifstream file(\"test.txt\", std::ifstream::binary);\n    MyStruct ms;\n    //Evaluates to false if anything wrong happened.\n    while(file.read(reinterpret_cast&lt;char*&gt;(&amp;ms),sizeof ms))\n    {\n        // Do whatever with my struct\n    }\n    if(file.eof())\n        ;//Successfully iterated over the whole file\n}\n</code></pre>\n\n<p>Please be sure not to do something like this:</p>\n\n<pre><code>char buffer[sizeof(MyStruct)];\nfile.read(buffer,sizeof(MyStruct));\n//...\nMyStruct* myStruct = reinterpret_cast&lt;MyStruct*&gt;(buffer);\n</code></pre>\n\n<p>It will likely work, but it breaks the aliasing rule and is undefined behaviour. If you truly need a buffer ( e.g. for small files it might be faster to read the whole file into the memory first and then iterate over that buffer) then the correct way is:</p>\n\n<pre><code>char buffer[sizeof(MyStruct)];\nfile.read(buffer,sizeof(MyStruct));\n//...\nMyStruct myStruct;\nstd::memcpy(&amp;myStruct,buffer,sizeof myStruct);\n</code></pre>\n"}], "owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 56041963, "answer_count": 1, "score": 1, "last_activity_date": 1557323027, "creation_date": 1557321394, "last_edit_date": 1557322391, "question_id": 56041755, "link": "https://stackoverflow.com/questions/56041755/read-binary-bytes-beginning-at-position-n-within-ifstream", "title": "Read binary bytes beginning at position N within ifstream?", "body": "<p>I am writing an unknown number of structs to a binary file and then reinterpret_cast-ing the bytes back to the struct. I know how to write the bytes.</p>\n\n<p>I am unsure how to iterate over the binary file. I would like to use std::ifstream. At some point I must need to increment a file pointer/index by sizeof(struct) bytes, but the only examples (of reading binary in to structs) I could find online were writing N structs and then reading N structs, they were not looping over the file, incrementing any file index.</p>\n\n<p>Pseudo code of what I would like to achieve is:</p>\n\n<pre><code>std::ifstream file(\"test.txt\", std::ifstream::binary);\n\nconst size_t fileLength = file.size();\nsize_t pos = 0;\nwhile(pos &lt; fileLength)\n{\n    MyStruct* ms = &amp;(reinterpret_cast&lt;MyStruct&amp;&gt;(&amp;file[pos]));\n\n    // Do whatever with my struct\n\n    pos += sizeof(MyStruct);\n}\n</code></pre>\n\n<p>UPDATE:</p>\n\n<p>My struct is POD</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 605, "user_id": 7413747, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CPWIY.jpg?s=128&g=1", "display_name": "oybek", "link": "https://stackoverflow.com/users/7413747/oybek"}, "edited": false, "score": 1, "creation_date": 1557320505, "post_id": 56041392, "comment_id": 98724718, "body": "Better use <code>operator &gt;&gt;</code>, it will be something like <code>fin &gt;&gt; sm[i].name</code>, the rest you can read using loops"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1557320629, "post_id": 56041392, "comment_id": 98724815, "body": "You should never use <code>%s</code> in general. In this case it&#39;s not just a buffer overflow waiting to happen, it&#39;s also a type error: <code>%s</code> takes a <code>char *</code>, not a <code>std::string *</code>."}], "owner": {"reputation": 132, "user_id": 6543699, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7461aec292d557e60bde380cb9d61e32?s=128&d=identicon&r=PG&f=1", "display_name": "st_dec", "link": "https://stackoverflow.com/users/6543699/st-dec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1557320501, "answer_count": 0, "score": 0, "last_activity_date": 1557320339, "creation_date": 1557320339, "question_id": 56041392, "link": "https://stackoverflow.com/questions/56041392/how-to-parse-string-from-file-to-struct-using-sscanf", "closed_reason": "Duplicate", "title": "How to parse string from file to struct using sscanf?", "body": "<p>I have following struct definition:</p>\n\n<pre><code>struct Sportsman\n{\n    string name;\n    double points[7];\n    double avr_point; \n};\n</code></pre>\n\n<p>I want to read following file content to array of structs:</p>\n\n<pre><code>Petrov 4,9 5,3 5,0 5,0 4,9 5,3 5,5\nIvanov 6,0 5,9 5,9 5,7 5,7 5,8 5,9\n</code></pre>\n\n<p>This is how I tried:</p>\n\n<pre><code>ifstream fin(\"sportsman.txt\");\nstring line;\nint i = 0;\nwhile (getline(fin, line))\n{\n    sscanf(line.c_str(), \"%s %lf %lf %lf %lf %lf %lf %lf\", &amp;sm[i].name, &amp;sm[i].points[0], &amp;sm[i].points[1], &amp;sm[i].points[2], &amp;sm[i].points[3],\n                          &amp;sm[i].points[4], &amp;sm[i].points[5], &amp;sm[i].points[6], &amp;sm[i].points[7]);\n    i++;\n}\n</code></pre>\n\n<p>But struct field \"name\" doesn't fill properly. It looks like first four characters are ignored and I get only part \"ov\" for \"Petrov\" and \"Ivanov\", while points are fine.</p>\n\n<p>So, how should I use sscanf and %s to read names in correct way?</p>\n"}, {"tags": ["c++", "function-pointers"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1557320589, "post_id": 56041383, "comment_id": 98724787, "body": "please include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and the complete error message. btw why do you use a function pointer? There is only a single function that you can possibly assign to <code>Command::check</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1557325876, "post_id": 56041383, "comment_id": 98728254, "body": "&quot;ERROR&quot; is not a useful problem description."}, {"owner": {"reputation": 1, "user_id": 8688133, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9dUVJIzaR18/AAAAAAAAAAI/AAAAAAAAAIM/PggpDqLJa-0/photo.jpg?sz=128", "display_name": "Mario Rollino", "link": "https://stackoverflow.com/users/8688133/mario-rollino"}, "edited": false, "score": 0, "creation_date": 1557415761, "post_id": 56041383, "comment_id": 98765743, "body": "ERROR is that don&#39;t compile"}, {"owner": {"reputation": 1, "user_id": 8688133, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9dUVJIzaR18/AAAAAAAAAAI/AAAAAAAAAIM/PggpDqLJa-0/photo.jpg?sz=128", "display_name": "Mario Rollino", "link": "https://stackoverflow.com/users/8688133/mario-rollino"}, "edited": false, "score": 0, "creation_date": 1557415858, "post_id": 56041383, "comment_id": 98765812, "body": "In real I have many function that depends on &quot;If&quot; constructor"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8688133, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9dUVJIzaR18/AAAAAAAAAAI/AAAAAAAAAIM/PggpDqLJa-0/photo.jpg?sz=128", "display_name": "Mario Rollino", "link": "https://stackoverflow.com/users/8688133/mario-rollino"}, "edited": false, "score": 0, "creation_date": 1557387897, "post_id": 56043131, "comment_id": 98749753, "body": "your solution don&#39;t compile on cpp.sh with c++11 or c++14"}, {"owner": {"reputation": 1, "user_id": 8688133, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9dUVJIzaR18/AAAAAAAAAAI/AAAAAAAAAIM/PggpDqLJa-0/photo.jpg?sz=128", "display_name": "Mario Rollino", "link": "https://stackoverflow.com/users/8688133/mario-rollino"}, "edited": false, "score": 0, "creation_date": 1557474182, "post_id": 56043131, "comment_id": 98784647, "body": "Great!!! That&#39;s works. My compiler don&#39;t recognize using .. but all right. It&#39;s possible to eliminate the call function  ?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 1, "user_id": 8688133, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9dUVJIzaR18/AAAAAAAAAAI/AAAAAAAAAIM/PggpDqLJa-0/photo.jpg?sz=128", "display_name": "Mario Rollino", "link": "https://stackoverflow.com/users/8688133/mario-rollino"}, "edited": false, "score": 0, "creation_date": 1557474979, "post_id": 56043131, "comment_id": 98784996, "body": "@MarioRollino Yes you can eliminate the call - all it does is <code>(this-&gt;*(i-&gt;check))(i-&gt;pattern, result)</code> - but I personally find it difficult to decode member-pointer-dereferencing code."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 1, "user_id": 8688133, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9dUVJIzaR18/AAAAAAAAAAI/AAAAAAAAAIM/PggpDqLJa-0/photo.jpg?sz=128", "display_name": "Mario Rollino", "link": "https://stackoverflow.com/users/8688133/mario-rollino"}, "edited": false, "score": 0, "creation_date": 1557475122, "post_id": 56043131, "comment_id": 98785070, "body": "@MarioRollino If your compiler doesn&#39;t support the <code>using</code> from &quot;new&quot; standards (C++11 is almost a decate old), use <code>typedef</code>. (See edit.)"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 2, "last_activity_date": 1557475035, "last_edit_date": 1557475035, "creation_date": 1557325915, "answer_id": 56043131, "question_id": 56041383, "link": "https://stackoverflow.com/questions/56041383/call-method-from-a-function-pointer/56043131#56043131", "title": "call method from a function pointer", "body": "<p><code>check</code> is not a static member of <code>Command</code> - it's a member of <code>*i</code> - so you should use the normal member access syntax, <code>i-&gt;check</code>.<br>\nAlso, the <code>If</code> instance you can call the member function on is <code>*this</code>.  </p>\n\n<pre><code>(this-&gt;*(i-&gt;check))(i-&gt;pattern, result)\n</code></pre>\n\n<p>Note that the outer parentheses in <code>(this-&gt;*(i-&gt;check))</code> are required while the inner ones aren't, but I think the inner parentheses make it slightly more readable.</p>\n\n<p>You can increase the readability further with a type alias, a function, and a range loop:</p>\n\n<pre><code>class If\n{\npublic:\n    using CommandFunction = bool (If::*)(const string&amp;, const string&amp;);\n    // Alternative: typedef bool (If::*CommandFunction)(const string&amp;, const string&amp;);\n    struct Command {\n        string pattern;\n        CommandFunction check;\n    };\n    If() {\n        Command command;\n        command.check = &amp;If::check_true;\n        m_commands.push_back(command);\n    }\n    bool call(CommandFunction f, const string&amp; a, const string&amp; b)\n    {\n        return (this-&gt;*f)(a, b);\n    }\n    int modify() {\n        string result;\n        for (const auto&amp; i: m_commands) {\n            if (call(i.check, i.pattern, result)) \n                return EXIT_SUCCESS;\n        }\n        return EXIT_FAILURE;\n    }\n    bool check_true(const string&amp; pattern, const string&amp; value) { return true; }\nprivate:\n    vector&lt;Command&gt; m_commands;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8688133, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9dUVJIzaR18/AAAAAAAAAAI/AAAAAAAAAIM/PggpDqLJa-0/photo.jpg?sz=128", "display_name": "Mario Rollino", "link": "https://stackoverflow.com/users/8688133/mario-rollino"}, "edited": false, "score": 0, "creation_date": 1557387936, "post_id": 56043595, "comment_id": 98749772, "body": "your solution don&#39;t compile on cpp.sh with c++11 or c++14"}, {"owner": {"reputation": 1, "user_id": 8688133, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9dUVJIzaR18/AAAAAAAAAAI/AAAAAAAAAIM/PggpDqLJa-0/photo.jpg?sz=128", "display_name": "Mario Rollino", "link": "https://stackoverflow.com/users/8688133/mario-rollino"}, "edited": false, "score": 0, "creation_date": 1557476594, "post_id": 56043595, "comment_id": 98785707, "body": "(this-&gt;*(i-&gt;check))(i-&gt;patter, result) works. Thanks"}], "tags": [], "owner": {"reputation": 1599, "user_id": 9948091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JANyt.png?s=128&g=1", "display_name": "HAL9000", "link": "https://stackoverflow.com/users/9948091/hal9000"}, "is_accepted": false, "score": 0, "last_activity_date": 1557327444, "creation_date": 1557327444, "answer_id": 56043595, "question_id": 56041383, "link": "https://stackoverflow.com/questions/56041383/call-method-from-a-function-pointer/56043595#56043595", "title": "call method from a function pointer", "body": "<p>There are two issues with your code (apart from the missing <code>#include</code>s and <code>std::</code>-prefixes)</p>\n\n<p>First you are trying to use the class member <code>Command::check</code>, but there are (possibly) multiple <code>Command</code>-objects, each with their own <code>check</code>-member. You have to specify which <code>Command</code> object you want to access.</p>\n\n<p>Since you are looping through a vector of <code>Command</code>-objects using the <code>i</code>-iterator, I assume you want to access the <code>check-member</code> of whatever <code>i</code> is referencing. Like this: <code>i-&gt;check</code></p>\n\n<p>Second: <code>check</code> is pointing to the method  <code>check_true</code>, which is a member of class <code>If</code>. That means when calling <code>check_true</code> you also have to specify which <code>If</code> object the method should act upon (the member <code>check</code> does not contain that information)</p>\n\n<p>Typically that means when calling <code>check_true</code> directly you do it like this:</p>\n\n<pre><code>a.check_true(..) // `a` is of type `class If`\n</code></pre>\n\n<p>or\n    b->check_true(..) // <code>b</code> is of type <code>class If *</code></p>\n\n<p>when doing it indirectly through a function pointer (in your case <code>i-&gt;check</code>) you do it like this:</p>\n\n<pre><code>a.*(i-&gt;check)(...) // `a` is of type `class If`\n</code></pre>\n\n<p>or   </p>\n\n<pre><code>b-&gt;*(i-&gt;check)(...) // `b` is of type `class If *`\n</code></pre>\n\n<p>But you are calling it like this: </p>\n\n<pre><code>(i)-&gt;*.... \n</code></pre>\n\n<p>and <code>i</code> is not a pointer to an <code>If</code> object, but a reference to a <code>Command</code> object. </p>\n\n<p>Since you are doing all this inside <code>If::modify()</code>, I also assume <code>(i-&gt;check)(..)</code> should act upon the same <code>If</code>-object as <code>modify()</code> is currently acting upon. So the corrected function call should be:</p>\n\n<pre><code>this-&gt;*(i-&gt;check)(i-&gt;pattern, result)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8688133, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9dUVJIzaR18/AAAAAAAAAAI/AAAAAAAAAIM/PggpDqLJa-0/photo.jpg?sz=128", "display_name": "Mario Rollino", "link": "https://stackoverflow.com/users/8688133/mario-rollino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1557475035, "creation_date": 1557320294, "last_edit_date": 1557392459, "question_id": 56041383, "link": "https://stackoverflow.com/questions/56041383/call-method-from-a-function-pointer", "title": "call method from a function pointer", "body": "<p>I can not compile with c++11 . I can write in another form, but I want this code with the correction only on line ERROR, or I want a solution with non static check2 function .</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\nclass If {\n            public:\n                struct Command {\n                    string pattern;\n                    bool (If::*check)(const string&amp;, const string&amp;);\n                    function&lt;bool(const string&amp;, const string&amp;)&gt; check2;\n                };\n                If() {\n                        Command command;\n                        command.check = &amp;If::check_true;\n                        command.check2 = this-&gt;check2_true;\n                        m_commands.push_back(command);\n                }\n                int modify() {\n                    string result;\n                    for (auto i = m_commands.begin(), end = m_commands.end(); i != end; ++i) {\n                        if (((i)-&gt;*(Command::check))(i-&gt;pattern, result)) return EXIT_SUCCESS; // ERROR\n                        if (this-&gt;*(i-&gt;check2)(i-&gt;pattern, result)) return EXIT_SUCCESS; // OK but i don't wont static function\n                    }\n                    return EXIT_FAILURE;\n                }\n                bool check_true(const string&amp; pattern, const string&amp; value) { return true; }\n                static bool check2_true(const string&amp; pattern, const string&amp; value) { return true; }\n            private:\n                vector&lt;Command&gt; m_commands;\n        };\n</code></pre>\n\n<p>ERROR: \n     if (((i)->*(Command::check))(i->pattern, result)) return EXIT_SUCCESS;</p>\n\n<p>no static:\n     bool check2_true(const string&amp; pattern, const string&amp; value) { return true; }</p>\n\n<p>Thank all</p>\n"}, {"tags": ["c++", "arrays", "string", "function", "multidimensional-array"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1557320270, "post_id": 56041314, "comment_id": 98724557, "body": "<i><code>void fillEmployees(string names[50], int salaries[50][4], int N);</code></i> That&#39;s not how you call a function in c++. You probably want to read a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good book</a>."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1557320483, "post_id": 56041314, "comment_id": 98724704, "body": "The line <code>void fillEmployees(string names[50], int salaries[50][4], int N);</code> is a function declaration, not a call of the function.    To fix, you will need to create arrays/variables to pass, then call the function using CORRECT SYNTAX.     (Voting to close question, as this is essentially a glorified typo)."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1557320607, "post_id": 56041314, "comment_id": 98724803, "body": "@J.Z What are the magic numbers 50 and 4? Indices in C++ start from 0. You do not call the function.  The header &lt;array&gt; is redundant."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1557320649, "post_id": 56041314, "comment_id": 98724831, "body": "It&#39;s probably just as well that the code doesn&#39;t call the function, as the function has an &quot;off by one&quot; error when reading to the asrrays, and will exhibit undefined behaviour if given a value of <code>N</code> that is <code>50</code> or more."}, {"owner": {"reputation": 31, "user_id": 11470240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08be15384b2c0d24db50d4cb342e4d90?s=128&d=identicon&r=PG&f=1", "display_name": "J.Z", "link": "https://stackoverflow.com/users/11470240/j-z"}, "edited": false, "score": 0, "creation_date": 1557320737, "post_id": 56041314, "comment_id": 98724896, "body": "The 50 is supposed to represent the max number of employees and the 4 is supposed to represent the 4 quarters which the salaries of the employees will be under"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557323234, "post_id": 56042267, "comment_id": 98726526, "body": "Not sure you count as a beginner, Vlad!"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557323271, "post_id": 56042267, "comment_id": 98726547, "body": "@LightnessRacesinOrbit I never worked as a C++ programmer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1557324057, "post_id": 56042267, "comment_id": 98727062, "body": "Many here didn&#39;t, but you have a <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> gold badge - close enough."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1557323109, "creation_date": 1557323109, "answer_id": 56042267, "question_id": 56041314, "link": "https://stackoverflow.com/questions/56041314/calling-a-function-that-fills-in-an-array-in-my-main-is-not-working/56042267#56042267", "title": "Calling a function that fills in an array in my main is not working", "body": "<p>We, beginners, should help each other.:)</p>\n\n<p>There are many errors in your program.</p>\n\n<p>For starters the header <code>&lt;array&gt;</code> is redundant in your program because neither declaration from the header is used.</p>\n\n<p>You should not use magic numbers (50 and 4) as in the function declaration</p>\n\n<pre><code>void fillEmployees(string names[50], int salaries[50][4], int N) {\n</code></pre>\n\n<p>Indices of arrays (and standard containers) start from 0.</p>\n\n<p>The function <code>fillEmployees</code> is not called in the program.</p>\n\n<p>This is a function declaration in main not its call</p>\n\n<pre><code>void fillEmployees(string names[50], int salaries[50][4], int N);\n</code></pre>\n\n<p>You have to declare a container where you will store information about employees.</p>\n\n<p>I could suggest the following solution.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;utility&gt;\n#include &lt;array&gt;\n#include &lt;vector&gt;\n\nconst size_t MAX_NUMBER_OF_EMPLOYEES = 50;\nconst size_t NUMBER_OF_QUATERS = 4;\n\nusing CompanyStuff = std::vector&lt;std::pair&lt;std::string, std::array&lt;int, NUMBER_OF_QUATERS&gt;&gt;&gt;;\n\nvoid fillEmployees( CompanyStuff &amp;employees )\n{\n    for ( CompanyStuff::size_type i = 0; i &lt; employees.size(); i++ )\n    {\n        std::cout &lt;&lt; \"Please enter the name of the employee #\" &lt;&lt; i + 1 &lt;&lt; \": \";\n        std::getline( std::cin, employees[i].first );\n\n        std::cout &lt;&lt; \"and his salaries throughout the \" &lt;&lt; NUMBER_OF_QUATERS &lt;&lt; \" quarters: \";\n        for ( int &amp;salary : employees[i].second ) std::cin &gt;&gt; salary;\n\n        std::cin.ignore( std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n' );\n    }\n}\n\nstd::ostream &amp; displayCompanyStuff( const std::string &amp;nameOfCompany, const CompanyStuff &amp;employees, std::ostream &amp;os = std::cout )\n{\n    os &lt;&lt; \"\\nThe company name: \" &lt;&lt; nameOfCompany &lt;&lt; '\\n';\n    os &lt;&lt; \"Employees:\\n\";\n\n    for ( const auto &amp;employee : employees )\n    {\n        os &lt;&lt; '\\t' &lt;&lt; employee.first &lt;&lt; \": \";\n        for ( const auto &amp;salary : employee.second ) os &lt;&lt; salary &lt;&lt; ' ';\n        os &lt;&lt; '\\n';\n    }\n\n    return os;\n}\n\nint main()\n{\n    std::string nameOfCompany; \n    size_t numberOfEmployees;\n\n    std::cout &lt;&lt; \"Enter the name of the company and its number of employees: \";\n\n    if ( not std::getline( std::cin, nameOfCompany ) ) \n    {\n        nameOfCompany = \"Unknown\";\n    }\n\n    if ( not ( std::cin &gt;&gt; numberOfEmployees ) or ( MAX_NUMBER_OF_EMPLOYEES &lt; numberOfEmployees ) ) \n    {\n        numberOfEmployees = MAX_NUMBER_OF_EMPLOYEES;\n    }        \n\n    std::cin.ignore( std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n' );\n\n\n    CompanyStuff employees( numberOfEmployees );\n\n    fillEmployees( employees );\n\n    displayCompanyStuff( nameOfCompany, employees );\n}\n</code></pre>\n\n<p>The program output might look the following way</p>\n\n<pre><code>Enter the name of the company and its number of employees: The bset company\n2\nPlease enter the name of the employee #1: Peter\nand his salaries throughout the 4 quarters: 3500 3500 3500 3500\nPlease enter the name of the employee #2: Bob\nand his salaries throughout the 4 quarters: 4000 4000 4000 4000\n\nThe company name: The best company\nEmployees:\n    Peter: 3500 3500 3500 3500 \n    Bob: 4000 4000 4000 4000 \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11470240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08be15384b2c0d24db50d4cb342e4d90?s=128&d=identicon&r=PG&f=1", "display_name": "J.Z", "link": "https://stackoverflow.com/users/11470240/j-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1557323573, "creation_date": 1557320090, "last_edit_date": 1557323573, "question_id": 56041314, "link": "https://stackoverflow.com/questions/56041314/calling-a-function-that-fills-in-an-array-in-my-main-is-not-working", "title": "Calling a function that fills in an array in my main is not working", "body": "<p>I need to create functions and then use them and call them in main. The function is not being called, so what is my mistake? </p>\n\n<p>When the code was in main, it worked perfectly and without a hitch, but when I took it out of main and put it in a function, it no longer worked and I think the function is not being called correctly.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;array&gt;\nusing namespace std;\n\nvoid fillEmployees(string names[50], int salaries[50][4], int N) {\n\n    for (int i = 1; i &lt;= N; i++) {\n        cout &lt;&lt; \"Please enter the name and salaries of employee \" &lt;&lt; i &lt;&lt; \" throughout the four quarters: \";\n        cin &gt;&gt; names[i];\n        for (int quarters = 0; quarters &lt; 4; quarters++)\n            cin &gt;&gt; salaries[N][quarters];\n    }\n}\n\nint main() {\n\n    string nameOfCompany;\n    int N;\n\n    cout &lt;&lt; \"Enter the name of the company and its number of employees: \";\n    cin &gt;&gt; nameOfCompany &gt;&gt; N;\n\n    void fillEmployees(string names[50], int salaries[50][4], int N);\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>What I want to happen is that after I enter the company name and its no. of employees, I want the program to ask me to enter the employees' names and salaries.\nSo I could really use some guidance and if you could please tell me where did I fall short.</p>\n"}, {"tags": ["python", "c++", "tensorflow", "swig", "pybind11"], "comments": [{"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 0, "creation_date": 1557378442, "post_id": 56041225, "comment_id": 98745904, "body": "See the first answer to <a href=\"https://stackoverflow.com/questions/21637732/how-to-pass-list-of-structs-to-c-in-swig-python%5D\">this</a>. You can do things like <code>reinterpret_cast&lt;Tensor*&gt;(SWIG_Python_GetSwigThis(theTensor)&zwnj;&#8203;)</code>, but as with any use of <code>reinterpret_cast</code> you should definitely verify the pointer you&#39;re casting is what you think it is"}, {"owner": {"reputation": 5281, "user_id": 1028138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/cacbc58817a6b78919f4a44e8d269b15?s=128&d=identicon&r=PG", "display_name": "sunmat", "link": "https://stackoverflow.com/users/1028138/sunmat"}, "reply_to_user": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 0, "creation_date": 1557411600, "post_id": 56041225, "comment_id": 98763186, "body": "Actually some more digging made me find that the Tensor python class is defined in framework/ops.py so it&#39;s not a C++ class exposed &quot;as is&quot; to Python by SWIG."}], "owner": {"reputation": 5281, "user_id": 1028138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/cacbc58817a6b78919f4a44e8d269b15?s=128&d=identicon&r=PG", "display_name": "sunmat", "link": "https://stackoverflow.com/users/1028138/sunmat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 358, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1557319812, "creation_date": 1557319812, "question_id": 56041225, "link": "https://stackoverflow.com/questions/56041225/how-to-convert-python-tf-tensor-into-c-tensor-using-pybind11", "title": "How to convert python tf.Tensor into C++ Tensor using pybind11", "body": "<p>I am developing a Python library in C++ using pybind11. This library is meant to be used with deep learning packages like TensorFlow, so some of the functions it exposes take TensorFlow objects as argument, and in particular <code>tf.Tensor</code> instances. At C++ level, these functions are defined with the following prototype:</p>\n\n<pre><code>void f(const py11::object&amp; theTensor) {\n   ...\n}\n</code></pre>\n\n<p>I'm looking for a way to get the C++ <code>tensorflow::Tensor</code> wrapped by the <code>py11::object</code> that is being passed.</p>\n\n<p>My understanding of TensorFlow is that it uses SWIG to create the Python wrapper to the C++ interface. However, I couldn't find where the <code>tf.Tensor</code> wrapper is defined, and I'm not familiar with the way SWIG exposes C++ classes as Python classes.</p>\n\n<p>I should be able to retrieve a <code>PyObject*</code> pointer from the <code>py11::object</code> using <code>theTensor.ptr()</code>, but then I don't know how to convert this into a pointer to a C++ Tensor object.</p>\n"}, {"tags": ["c++", "coding-style"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1557318907, "post_id": 56040888, "comment_id": 98723719, "body": "Who are &quot;we&quot;, and by whom are &quot;we&quot; advised?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1557319021, "post_id": 56040888, "comment_id": 98723787, "body": "Yes we should declare it const."}], "answers": [{"tags": [], "owner": {"reputation": 4268, "user_id": 8057071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd83e2355a947ce3a6d3969fc21594?s=128&d=identicon&r=PG", "display_name": "Sathiraumesh", "link": "https://stackoverflow.com/users/8057071/sathiraumesh"}, "is_accepted": false, "score": 4, "last_activity_date": 1557319019, "creation_date": 1557319019, "answer_id": 56040987, "question_id": 56040888, "link": "https://stackoverflow.com/questions/56040888/is-it-common-to-declare-const-pointers-in-c/56040987#56040987", "title": "Is it common to declare const pointers in C++?", "body": "<p>Yeah, it's a good practice because it avoids you from changing your reference unintentionally. It is possible that you can change the value of a variable somewhere in your code not knowingly adding <code>const</code>  make sure the variables valued doesn't get changed anywhere.</p>\n"}, {"comments": [{"owner": {"reputation": 1305, "user_id": 10955302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d217869ed810b306ce55f8cf5b6fbbfd?s=128&d=identicon&r=PG&f=1", "display_name": "embedc", "link": "https://stackoverflow.com/users/10955302/embedc"}, "edited": false, "score": 0, "creation_date": 1557319231, "post_id": 56040990, "comment_id": 98723922, "body": "It just seems that C++ developers don&#39;t follow this rule in case of pointers, don&#39;t they?"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 0, "creation_date": 1557319251, "post_id": 56040990, "comment_id": 98723934, "body": "Also when passed to a function, a pointer is just copied so there&#39;s real need to make it <code>const</code>. You don&#39;t see many <code>const int</code>s as function parameters either."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557320169, "post_id": 56040990, "comment_id": 98724503, "body": "@user463035818 - A weak T in my keyboard. I need a new one"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1557320272, "post_id": 56040990, "comment_id": 98724561, "body": "@StoryTeller here you can have some fresh t&#39;s from me tttttttttttttttttttttt ;)"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 8, "last_activity_date": 1557320157, "last_edit_date": 1557320157, "creation_date": 1557319027, "answer_id": 56040990, "question_id": 56040888, "link": "https://stackoverflow.com/questions/56040888/is-it-common-to-declare-const-pointers-in-c/56040990#56040990", "title": "Is it common to declare const pointers in C++?", "body": "<p>A pointer <em>is</em> an object.</p>\n\n<p>If you wish to prevent modification of the value held by the pointer, i.e. to make it hold only a single address within its lifetime, then yes make it const. The same considerations that apply for any other object type also apply here.</p>\n\n<p>I suspect the reason you may not see it much is that the declarator syntax in C++ kinda makes this uncomfortable to type. Not to mention that whether or not the <em>pointee</em> is const is usually far more important.</p>\n"}, {"comments": [{"owner": {"reputation": 1305, "user_id": 10955302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d217869ed810b306ce55f8cf5b6fbbfd?s=128&d=identicon&r=PG&f=1", "display_name": "embedc", "link": "https://stackoverflow.com/users/10955302/embedc"}, "edited": false, "score": 0, "creation_date": 1557319280, "post_id": 56041011, "comment_id": 98723958, "body": "The question is &quot;Is it common to declare const pointers in C++?&quot;"}, {"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "reply_to_user": {"reputation": 1305, "user_id": 10955302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d217869ed810b306ce55f8cf5b6fbbfd?s=128&d=identicon&r=PG&f=1", "display_name": "embedc", "link": "https://stackoverflow.com/users/10955302/embedc"}, "edited": false, "score": 1, "creation_date": 1557319309, "post_id": 56041011, "comment_id": 98723976, "body": "@embedc The question is: shouldn&#39;t we declare it const?"}], "tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 3, "last_activity_date": 1557319538, "last_edit_date": 1557319538, "creation_date": 1557319095, "answer_id": 56041011, "question_id": 56040888, "link": "https://stackoverflow.com/questions/56040888/is-it-common-to-declare-const-pointers-in-c/56041011#56041011", "title": "Is it common to declare const pointers in C++?", "body": "<p>A pointer is just a variable containing an address, but in the end it is a variable like any other.</p>\n\n<p>You should make a pointer <code>const</code> for the same reasons you make a simple <code>int</code> <code>const</code>. So you if have good reasons to have a normal variable <code>const</code> then for the same reasons you should also aim at having <code>const</code> pointers.</p>\n\n<p>It is pretty common (and I would add, good practice) in the C++ community to declare <code>const</code> pointers to <code>const</code> data.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1557321015, "last_edit_date": 1557321015, "creation_date": 1557319589, "answer_id": 56041158, "question_id": 56040888, "link": "https://stackoverflow.com/questions/56040888/is-it-common-to-declare-const-pointers-in-c/56041158#56041158", "title": "Is it common to declare const pointers in C++?", "body": "<blockquote>\n  <p>Is it common to declare const pointers in C++?</p>\n</blockquote>\n\n<p>It is not quite as common as non-const pointers (not to be confused with pointer to const vs pointer to non-const; just to be clear). Pointers are typically used as an iterator for an array. Iteration requires modification of the iterator.</p>\n\n<p>But it is not unheard of either.</p>\n\n<blockquote>\n<pre><code>T* const pObject = new T();\n</code></pre>\n</blockquote>\n\n<p>Any decent coding style would primarily advice against using a bare owning pointer.</p>\n\n<blockquote>\n  <p>So when we declare pointer to an object/variable that isn't going to be reassigned we should declare it const</p>\n</blockquote>\n\n<p>It is quite rare for a pointer to not be reassigned at some point. Unless you need the ability to point to null, it is often advisable to use a reference when you don't need reassignment.</p>\n\n<p>Even in the case where you do need a pointer and don't need reassignment, preferring const objects instead of non-const is only marginally useful style guide. It mostly makes significant difference in cases that are now replaced by <code>constexpr</code> (which makes the variable implicitly const). As such, many don't follow, or might not even be aware of such style.</p>\n\n<p>However, feel free to follow the style if you so prefer.</p>\n"}], "owner": {"reputation": 1305, "user_id": 10955302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d217869ed810b306ce55f8cf5b6fbbfd?s=128&d=identicon&r=PG&f=1", "display_name": "embedc", "link": "https://stackoverflow.com/users/10955302/embedc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1557321015, "creation_date": 1557318745, "last_edit_date": 1557320704, "question_id": 56040888, "link": "https://stackoverflow.com/questions/56040888/is-it-common-to-declare-const-pointers-in-c", "title": "Is it common to declare const pointers in C++?", "body": "<p>C++ style guides strongly advise that one should declare objects as const if we don't intend to modify them. It follows that when we declare a pointer to an object/variable that isn't going to be reassigned we should declare it const:</p>\n\n<pre><code>T* const pObject = new T();\n</code></pre>\n\n<p>It just seems that C++ developers usually don't follow this rule in case of pointers, do they?</p>\n"}, {"tags": ["c++", "scope", "compilation", "declaration", "stdstring"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557318538, "post_id": 56040771, "comment_id": 98723499, "body": "You need to put types for the parameters here; <code>void timeConversion(hour, minute, amPmCheck)</code> and move the whole function definition before <code>main()</code>."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 4, "creation_date": 1557318615, "post_id": 56040771, "comment_id": 98723550, "body": "You should get a <a href=\"https://stackoverflow.com/a/388282\">book</a>. It will greatly speed up your learning progress."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1557318710, "post_id": 56040771, "comment_id": 98723600, "body": "<code>string time</code> rename <code>time</code> to something else. The name <code>time</code> is already taken. For example use <code>timestr</code>."}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 0, "creation_date": 1557318716, "post_id": 56040771, "comment_id": 98723606, "body": "Please learn the type system of C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1557318947, "post_id": 56040771, "comment_id": 98723741, "body": "The compiler actually tells you exactly what is happening: <code>&#39;std::string time&#39; redeclared as different kind of symbol</code> followed by <code>previous declaration &#39;time_t time(time_t*)&#39;</code> . So the identifier <code>time</code> was already used for some other purpose. For the future, please read compiler error messages VERY carefully. They used to be quite cryptic, bit the modern compilers got much better at it."}], "answers": [{"tags": [], "owner": {"reputation": 652, "user_id": 11224588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2898ec4197f20a99d75710d96ad85c3?s=128&d=identicon&r=PG&f=1", "display_name": "Diodacus", "link": "https://stackoverflow.com/users/11224588/diodacus"}, "is_accepted": false, "score": 0, "last_activity_date": 1557319105, "creation_date": 1557319105, "answer_id": 56041016, "question_id": 56040771, "link": "https://stackoverflow.com/questions/56040771/how-to-resolve-declaration-errors/56041016#56041016", "title": "How to resolve declaration errors", "body": "<p>There are few issues here, first:</p>\n\n<ul>\n<li>change</li>\n</ul>\n\n<p><code>void timeConversion(hour, minute, amPmCheck)</code></p>\n\n<p>to</p>\n\n<p><code>void timeConversion(string &amp; hour, string &amp; minute, string &amp; amPmCheck)</code></p>\n\n<p>if you want to deal with function parameters</p>\n\n<ul>\n<li>or change the same function (in your case better option) to:</li>\n</ul>\n\n<p><code>void timeConversion()</code></p>\n\n<p>since you are dealing with global variables anyway.</p>\n\n<ul>\n<li>put <code>timeConversion</code> function before <code>main</code> or use pre-declaration like this:</li>\n</ul>\n\n<p><code>void timeConversion();</code></p>\n\n<p>also before <code>main</code> function.</p>\n\n<p>PS. Please read good book about C++.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1557320096, "last_edit_date": 1557320096, "creation_date": 1557319183, "answer_id": 56041036, "question_id": 56040771, "link": "https://stackoverflow.com/questions/56040771/how-to-resolve-declaration-errors/56041036#56041036", "title": "How to resolve declaration errors", "body": "<p>For starters there is no need to declare these variables as namespace variables.</p>\n\n<pre><code>string time, hour, minute, amPm, miltime;\n\nchar amPmCheck;\n</code></pre>\n\n<p>They should be declared as local variables if the function <code>main</code>.</p>\n\n<p>And there are no declarations of variables <code>colon</code> and <code>space</code>.</p>\n\n<p>This statement </p>\n\n<pre><code>amPm = time.substr(space, back);\n</code></pre>\n\n<p>does not make sense. The variable <code>amPm</code> is declared as having type <code>char</code> instead of the type <code>std::string</code>.</p>\n\n<p>The function declaration</p>\n\n<pre><code>void timeConversion(hour, minute, amPmCheck)\n</code></pre>\n\n<p>is wrong. You did not specify the types of the function parameters.</p>\n\n<p>Statements like this</p>\n\n<pre><code>    if(int(hour) == 12)\n</code></pre>\n\n<p>does not make sense. You have to use at least the standard function <code>std::stoi</code> to convert an object of type <code>std::string</code> to an object of type <code>int</code>.</p>\n\n<p>In the statement</p>\n\n<pre><code>hour.assign('00');\n</code></pre>\n\n<p>there is used a multibyte char literal. It seems you mean double quotes</p>\n\n<pre><code>hour.assign(\"00\");\n</code></pre>\n\n<p>The same is valid for the statement</p>\n\n<pre><code>hour.insert(0, '0');\n</code></pre>\n\n<p>This statement</p>\n\n<pre><code>hour.assign(12+int(hour));\n</code></pre>\n\n<p>also does not make sense.</p>\n\n<p>There are too many errors in your code. </p>\n\n<p>You should at first read the documentation of the class <code>std::basic_string</code> to know how to use its nethods.</p>\n\n<p>And do not use the derictive</p>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p>It can be the reason of the error of conflicted declarations. \nSee for example the error message of your compiler</p>\n\n<pre><code>main.cpp:15:8: error: 'std::string time' redeclared as different kind of symbol\n string time, hour, minute, amPm miltime;\n        ^~~~\nIn file included from /usr/include/pthread.h:24:0,\n                 from /usr/include/x86_64-linux-gnu/c++/6/bits/gthr-default.h:35,\n                 from /usr/include/x86_64-linux-gnu/c++/6/bits/gthr.h:148,\n                 from /usr/include/c++/6/ext/atomicity.h:35,\n                 from /usr/include/c++/6/bits/ios_base.h:39,\n                 from /usr/include/c++/6/ios:42,\n                 from /usr/include/c++/6/ostream:38,\n                 from /usr/include/c++/6/iostream:39,\n                 from main.cpp:10:\n/usr/include/time.h:192:15: note: previous declaration 'time_t time(time_t*)'\n extern time_t time (time_t *__timer) __THROW;\n               ^~~~\n</code></pre>\n\n<p>Use instead qualified names for standard names declared in the namespace <code>std</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 11065550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fef0b4a5807bfea5f86f41f144577ccf?s=128&d=identicon&r=PG&f=1", "display_name": "Cynderias", "link": "https://stackoverflow.com/users/11065550/cynderias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1557320096, "creation_date": 1557318398, "question_id": 56040771, "link": "https://stackoverflow.com/questions/56040771/how-to-resolve-declaration-errors", "title": "How to resolve declaration errors", "body": "<p>I am attempting to run a code that takes a user inputted standard time and convert it to military time. For the user input, the hours can be typed as one or two digits, and AM/PM can be typed in any way. Given that, the code I have is as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstring time, hour, minute, amPm, miltime;\n\nchar amPmCheck;\n\nint main()\n{\n\n    cout&lt;&lt;\"Enter time:\\n\";\n\n    cin&gt;&gt;time;\n\n    colon = time.find(':');\n\n    space = time.find (' ');\n\n    hour = time.substr(0, colon);\n\n    minute = time.substr(colon + 1, space);\n\n    amPm = time.substr(space, back);\n\n    amPmCheck = amPm[0];\n\n    timeConversion(hour, minute, amPmCheck);\n\n    return 0;\n}\n\n\nvoid timeConversion(hour, minute, amPmCheck)\n{\n    if(amPmCheck == 'a'||'A')\n    {\n        if(int(hour) == 12)\n        {\n            hour.assign('00');\n        }\n        else if (int(hour) &lt;= 9)\n        {\n            hour.insert(0, '0');\n        }\n    }\n    else\n        if(int(hour) &lt; 12)\n        {\n            hour.assign(12+int(hour));\n        }\n\n    miltime = hour + minute\n\n    cout&lt;&lt; \"Corresponding military time is\", miltime;\n}\n</code></pre>\n\n<p>However when attempting to compile the code, I get the following errors from my chosen compiler:</p>\n\n<pre><code>main.cpp:50:25: warning: multi-character character constant [-Wmultichar]\n             hour.assign('00');\n                         ^~~~\nmain.cpp:15:8: error: 'std::string time' redeclared as different kind of symbol\n string time, hour, minute, amPm miltime;\n        ^~~~\nIn file included from /usr/include/pthread.h:24:0,\n                 from /usr/include/x86_64-linux-gnu/c++/6/bits/gthr-default.h:35,\n                 from /usr/include/x86_64-linux-gnu/c++/6/bits/gthr.h:148,\n                 from /usr/include/c++/6/ext/atomicity.h:35,\n                 from /usr/include/c++/6/bits/ios_base.h:39,\n                 from /usr/include/c++/6/ios:42,\n                 from /usr/include/c++/6/ostream:38,\n                 from /usr/include/c++/6/iostream:39,\n                 from main.cpp:10:\n/usr/include/time.h:192:15: note: previous declaration 'time_t time(time_t*)'\n extern time_t time (time_t *__timer) __THROW;\n               ^~~~\nmain.cpp:44:21: error: variable or field 'timeConversion' declared void\n void timeConversion(hour, minute, amPmCheck)\n                     ^~~~\nmain.cpp:44:35: error: 'amPmCheck' was not declared in this scope\n void timeConversion(hour, minute, amPmCheck)\n                                   ^~~~~~~~~\n</code></pre>\n\n<p>I am still relatively new to programming, so any information on what my mistakes are and what the simplest way to fix them is would be appreciated.</p>\n"}, {"tags": ["c++", "visual-studio", "cmake"], "comments": [{"owner": {"reputation": 1200, "user_id": 9298910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819944a4b6fdd239fcefe369a25a129?s=128&d=identicon&r=PG&f=1", "display_name": "Lehks", "link": "https://stackoverflow.com/users/9298910/lehks"}, "edited": false, "score": 0, "creation_date": 1557327253, "post_id": 56040567, "comment_id": 98729092, "body": "Have you linked the Vendor projects to MyProject using target_link_libraries()?"}, {"owner": {"reputation": 1200, "user_id": 9298910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819944a4b6fdd239fcefe369a25a129?s=128&d=identicon&r=PG&f=1", "display_name": "Lehks", "link": "https://stackoverflow.com/users/9298910/lehks"}, "edited": false, "score": 0, "creation_date": 1557327475, "post_id": 56040567, "comment_id": 98729236, "body": "And, although it is not part of your question, I want to point out that include_directories() should not be used. If CURL is properly set up in CMake (which I do not know, I have never used it), then target_link_libraries() should take care of the include directories. Imo, this is a great talk about CMake in general and also why you should not use include_directories(): <a href=\"https://www.youtube.com/watch?v=bsXLMQ6WgIk\" rel=\"nofollow noreferrer\">youtube.com/watch?v=bsXLMQ6WgIk</a>"}, {"owner": {"reputation": 62, "user_id": 9776840, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GfKgQ9PbLUU/AAAAAAAAAAI/AAAAAAAAAHY/W6xMWAMi1Is/photo.jpg?sz=128", "display_name": "Skulaurun Mrusal", "link": "https://stackoverflow.com/users/9776840/skulaurun-mrusal"}, "reply_to_user": {"reputation": 1200, "user_id": 9298910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819944a4b6fdd239fcefe369a25a129?s=128&d=identicon&r=PG&f=1", "display_name": "Lehks", "link": "https://stackoverflow.com/users/9298910/lehks"}, "edited": false, "score": 0, "creation_date": 1557328195, "post_id": 56040567, "comment_id": 98729672, "body": "@Lehks Ok, thanks I will look at it."}], "answers": [{"tags": [], "owner": {"reputation": 1826, "user_id": 3209308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93292fb1163754198282b1141791f84a?s=128&d=identicon&r=PG&f=1", "display_name": "ap-osd", "link": "https://stackoverflow.com/users/3209308/ap-osd"}, "is_accepted": true, "score": 1, "last_activity_date": 1566797207, "creation_date": 1566797207, "answer_id": 57652196, "question_id": 56040567, "link": "https://stackoverflow.com/questions/56040567/cmake-visual-studio-project-setup/57652196#57652196", "title": "CMake &amp; Visual Studio project setup", "body": "<p>To link to a 3rd party library you will need to specify the path and name of the library. </p>\n\n<blockquote>\n  <p>I have some experience with linking libraries in visual studio's\n  solutions, but I don't know how to do it in CMake.</p>\n</blockquote>\n\n<p>CMake <code>link_directories</code> maps to VS <code>Properties-&gt;Linker-&gt;General-&gt;Additional Library Directories</code></p>\n\n<p>CMake <code>target_link_libraries</code> maps to VS <code>Properties-&gt;Linker-&gt;Input-&gt;Additional Dependencies</code></p>\n\n<blockquote>\n  <p>I'm new to CMake and don't know how to do it.</p>\n</blockquote>\n\n<p>Take a look at <a href=\"https://cognitivewaves.wordpress.com/cmake-and-visual-studio\" rel=\"nofollow noreferrer\">CMake and Visual Studio</a> which explains CMake in the context of Visual Studio with an example.</p>\n"}], "owner": {"reputation": 62, "user_id": 9776840, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GfKgQ9PbLUU/AAAAAAAAAAI/AAAAAAAAAHY/W6xMWAMi1Is/photo.jpg?sz=128", "display_name": "Skulaurun Mrusal", "link": "https://stackoverflow.com/users/9776840/skulaurun-mrusal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 57652196, "answer_count": 1, "score": 3, "last_activity_date": 1566797207, "creation_date": 1557317646, "question_id": 56040567, "link": "https://stackoverflow.com/questions/56040567/cmake-visual-studio-project-setup", "title": "CMake &amp; Visual Studio project setup", "body": "<p>I'm writing my own minecraft launcher in c++ with Visual Studio 2019 IDE. I want it to be a cross-platform project. I decided to use CMake for this, but I have some problems with third party libraries.</p>\n\n<p><strong>FILE STRUCTURE</strong></p>\n\n<pre><code>root\n|---MyProject\n|   |---build\n|   |   |---Debug\n|   |   |---Release\n|   |---include\n|   |   |---MyProject.hpp\n|   |---src\n|   |   |---MyProject.cpp\n|   |   |---CMakeLists.txt\n|   |---CMakeLists.txt\n|---Vendor\n|   |---CURL\n|   |   |--- // source downloaded from https://curl.haxx.se/download/curl-7.64.1.tar.gz\n|   |---CMakeLists.txt\n|---CMakeLists.txt\n</code></pre>\n\n<p>I have some experience with linking libraries in visual studio's solutions, but I don't know how to do it in CMake.</p>\n\n<p>I have two folders:</p>\n\n<ol>\n<li>My project (which I'm working on) folder with all the .cpp and .hpp files.</li>\n<li>Vendor folder for all the third party libs.</li>\n</ol>\n\n<p>I want to link CMake projects in 'Vendor' to 'MyProject' to be able to use it in 'MyProject.cpp' and build it.</p>\n\n<p>Example usage:</p>\n\n<p>'MyProject.hpp':</p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\n#inlcude \"curl/curl.h\"\n</code></pre>\n\n<p>'MyProject.cpp':</p>\n\n<pre><code>int main() {\n    // Hello World\n    std::cout &lt;&lt; \"Hello world\" &lt;&lt; std::endl;\n    // Some Curl stuff\n    CURL* curl;\n    ...\n}\n</code></pre>\n\n<p>I tried something like this:</p>\n\n<pre><code>add_subdirectory(\"Vendor/CURL\")\ninclude_directories(\"Vendor/CURL/include\")\n</code></pre>\n\n<p>I'm new to CMake and don't know how to do it...\nI was googling it for more than one hour, but I didn't find anything.\nBTW: Sorry for my english.</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "profiling"], "comments": [{"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1557316670, "post_id": 56040040, "comment_id": 98722440, "body": "I think ProcMon tool will be helpful to you. <a href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/procmon\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/sysinternals/downloads/procmon</a>"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1557317692, "post_id": 56040040, "comment_id": 98723019, "body": "It&#39;s not reliable unless the process is being debugged. You might want to use PSAPI for taking snapshots."}, {"owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "edited": false, "score": 0, "creation_date": 1557349717, "post_id": 56040040, "comment_id": 98739589, "body": "What are going to do with that information, by the way? So the DLL creates threads and consumes resources.  Presumably it needs them to work..."}, {"owner": {"reputation": 177, "user_id": 3274999, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hPUK0.jpg?s=128&g=1", "display_name": "Kasun", "link": "https://stackoverflow.com/users/3274999/kasun"}, "reply_to_user": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1557373112, "post_id": 56040040, "comment_id": 98744660, "body": "@Mayur thanks for the link. I have already tried procmon, proc explorer, proc debug. As michael mention, after couple of test runs i have realized that procmon does not reliable log all the threads. Some of the threads were missing from the log files and some had different thread ids in event log when comparing with the process explorer."}, {"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1557385278, "post_id": 56040040, "comment_id": 98748449, "body": "As Seva has already mentioned about API hooking, that would be helpful. In API Hooking you need to catch create thread API whenever it is called log it in the file and pass that call to the kernel."}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 3274999, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hPUK0.jpg?s=128&g=1", "display_name": "Kasun", "link": "https://stackoverflow.com/users/3274999/kasun"}, "edited": false, "score": 0, "creation_date": 1557372895, "post_id": 56048999, "comment_id": 98744638, "body": "Thanks for the suggestion. But can you elaborate bit more ?"}], "tags": [], "owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "is_accepted": false, "score": 2, "last_activity_date": 1557416487, "last_edit_date": 1557416487, "creation_date": 1557349309, "answer_id": 56048999, "question_id": 56040040, "link": "https://stackoverflow.com/questions/56040040/how-to-check-whether-new-threads-created-inside-third-party-dll-in-visual-c-ap/56048999#56048999", "title": "How to check whether new threads created inside third party DLL in visual c++ application", "body": "<p>Have the app hook the CreateThread API in its startup code, preferably before the DLLs initialize. This is deep magic though; you gotta know exactly what you're doing.</p>\n\n<p>EDIT: if you have to ask, you're probably not up to the task. Proceed at your own risk.</p>\n\n<p>The general idea would go: use the disassembler to see the first few commands of <code>CreateThread()</code> in a running process. In the main exe code, patch the memory of CreateThread to insert a JMP command to your own trampoline function. Write a trampoline in assembly that would call your own hook function, maybe repeat some commands from the patched portion, and jump back to the unpatched portion of CreateThread().</p>\n\n<p>This is not meant for production - only for running the executable on your own machine, with a known version of CreateThread, since it would depend on the contents of CreateThread. In a way, the application becomes its own debugger, but this is not a debugger the DLL can easily notice.</p>\n\n<p>For patching the executable part of the process memory, you might have to adjust the memory protection flags, it won't be writable by default.</p>\n\n<p>Naturally, you'd have to mind the bitness.</p>\n\n<p>Alternatively, you can patch the beginning of CreateThread to cause an exception (INT 3 for example) and use a vectored exception handler to catch that. Win32 API functions have a 2 byte NOP in the beginning, just enough to patch.</p>\n\n<p>EDIT: tried the VEH approach, it seems cleaner. Now, on my machine, the first command of CreateThread is <code>MOV EDI, EDI</code> - that's effectively a 2 byte no-op, perfect for patching. So the exception handler goes:</p>\n\n<pre><code>LONG NTAPI OnExc(_EXCEPTION_POINTERS* Exc)\n{\n    if (Exc-&gt;ExceptionRecord-&gt;ExceptionCode == EXCEPTION_BREAKPOINT)\n    { //Feel free to add an extra check for exception address\n      //Just in case there are rogue INT 3's elsewhere\n\n        wprintf(L\"Yay, thread created\\n\");\n        //Not a good idea to do I/O from the exception handler :)\n\n        //Continue from the next command after INT 3\n        Exc-&gt;ContextRecord-&gt;Eip++; \n        return EXCEPTION_CONTINUE_EXECUTION;\n    }\n    else\n        return EXCEPTION_CONTINUE_SEARCH;\n}\n</code></pre>\n\n<p>And the hooking code goes:</p>\n\n<pre><code>AddVectoredExceptionHandler(1, OnExc);\n\nHMODULE hKernel32 = GetModuleHandle(L\"kernel32.dll\");\nunsigned char* pCreateThread = (unsigned char*)GetProcAddress(hKernel32, \"CreateThread\");\n\n//Allow writing to the memory block where CreateThread is\nMEMORY_BASIC_INFORMATION mi;\nVirtualQuery(pCreateThread, &amp;mi, sizeof mi);\nDWORD dw;\nVirtualProtect(mi.BaseAddress, mi.RegionSize, PAGE_EXECUTE_READWRITE, &amp;dw);\n\n//Check if the first two bytes are indeed MOV EDI, EDI\nif (pCreateThread[0] == 0x8b &amp;&amp; pCreateThread[1] == 0xff)\n{\n    //And patch!\n    pCreateThread[0] = 0xcc; //Replace with INT 3 \n    pCreateThread[1] = 0x90; //Replace with NOP\n}\n</code></pre>\n\n<p>That's it, hooked. Feel free to test it by calling <code>_beginthread</code> or <code>_beginthreadex</code> - but not under the debugger. The debugger would catch and process INT 3 before the exception handler does.</p>\n\n<p>This is all 32-bit code. Haven't even looked at what the Win64 equivalent would be like.</p>\n\n<p>There are other dimensions to the job that I didn't cover. Specifically, if the DLL in question is loaded statically, <strong>and</strong> it creates thread(s) in its startup code, <strong>and</strong> if the hook is installed in [Win]main(), then the hook won't catch <em>those</em> threads. Since this is your project, I have no way of checking that.</p>\n\n<p>Another avenue of enhancement - if you want to catch the result of thread creation (e. g. the thread ID), this technique alone won't do. You'd need to hook not just the entry point of CreateThread, but also the exit.</p>\n"}], "owner": {"reputation": 177, "user_id": 3274999, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hPUK0.jpg?s=128&g=1", "display_name": "Kasun", "link": "https://stackoverflow.com/users/3274999/kasun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557416487, "creation_date": 1557315859, "question_id": 56040040, "link": "https://stackoverflow.com/questions/56040040/how-to-check-whether-new-threads-created-inside-third-party-dll-in-visual-c-ap", "title": "How to check whether new threads created inside third party DLL in visual c++ application", "body": "<p>I am currently struggling with a problem of verifying whether new threads created inside a dll file we call from our code in visual c++ application. Preferably i wanted see resource consumption and call stacks if there are any threads created inside the dlls. I need this to happen in running application not in debugging mode. Do any of you know how we can approach to solve this ?</p>\n"}, {"tags": ["c++", "regex", "qt", "regex-group", "qregularexpression"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1557315949, "post_id": 56040034, "comment_id": 98722061, "body": "Why regex? See <a href=\"https://www.qtcentre.org/threads/31522-Qt-way-of-getting-parsing-style-attributes-from-html-tags-local-file-batch\" rel=\"nofollow noreferrer\">a non-regex approach here</a>. An <a href=\"https://stackoverflow.com/questions/32082181/how-to-get-xml-attributes-with-this-syntax-using-qt-dom\">SO thread</a> here. A more generic: <a href=\"https://stackoverflow.com/questions/49223317/how-to-parse-an-html-file-with-qt\">How to parse an HTML file with QT?</a>"}, {"owner": {"reputation": 235, "user_id": 5037068, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9ec3424345713065a0e84e4b80489fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Maluna34", "link": "https://stackoverflow.com/users/5037068/maluna34"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1557317543, "post_id": 56040034, "comment_id": 98722938, "body": "It&#39;s because I use this in a QSyntaxHighlighter ^^"}], "answers": [{"comments": [{"owner": {"reputation": 235, "user_id": 5037068, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9ec3424345713065a0e84e4b80489fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Maluna34", "link": "https://stackoverflow.com/users/5037068/maluna34"}, "edited": false, "score": 1, "creation_date": 1557326094, "post_id": 56041984, "comment_id": 98728397, "body": "Thanks for your help. But here I still have to loop using the regex engine (QRegularExpressionMatchIterator) and we can&#39;t have all the attributes in the different capture groups of one match. Is that correct ?"}], "tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 1, "last_activity_date": 1557322477, "last_edit_date": 1557322477, "creation_date": 1557322170, "answer_id": 56041984, "question_id": 56040034, "link": "https://stackoverflow.com/questions/56040034/match-nested-capture-groups-with-quantifiers-using-qregularexpression/56041984#56041984", "title": "Match nested capture groups with quantifiers using QRegularExpression", "body": "<p><a href=\"https://regex101.com/r/o3T8cu/1\" rel=\"nofollow noreferrer\">This expression</a> might help you to simply capture those attributes and it is not bounded from left and right:</p>\n\n<pre><code>([A-z]+)(=\\x22)([A-z]+)(\\x22)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/NOXEV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NOXEV.png\" alt=\"enter image description here\"></a></p>\n\n<h3>Graph</h3>\n\n<p>This graph shows how the expression would work and you can visualize other expressions in this <a href=\"https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24\" rel=\"nofollow noreferrer\">link</a>, if you wish to know: </p>\n\n<p><a href=\"https://i.stack.imgur.com/ycaDn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ycaDn.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>If you would like to add additional boundaries to it, which you might want to do so, you can further extend it, maybe to something <a href=\"https://regex101.com/r/UwjdDq/1/\" rel=\"nofollow noreferrer\">similar to</a>:</p>\n\n<pre><code>(?:^&lt;p )?([A-z]+)(=\\x22)([A-z]+)(\\x22)\n</code></pre>\n\n<h3>Test for RegEx</h3>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const regex = /(?:^&lt;p )?([A-z]+)(=\\x22)([A-z]+)(\\x22)/gm;\r\nconst str = `&lt;p attributeA=\"foo\" attributeB=\"bar\" attributeC=\"baz\" attributeD=\"qux\"&gt;&lt;/p&gt;`;\r\nlet m;\r\n\r\nwhile ((m = regex.exec(str)) !== null) {\r\n    // This is necessary to avoid infinite loops with zero-width matches\r\n    if (m.index === regex.lastIndex) {\r\n        regex.lastIndex++;\r\n    }\r\n    \r\n    // The result can be accessed through the `m`-variable.\r\n    m.forEach((match, groupIndex) =&gt; {\r\n        console.log(`Found match, group ${groupIndex}: ${match}`);\r\n    });\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 235, "user_id": 5037068, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9ec3424345713065a0e84e4b80489fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Maluna34", "link": "https://stackoverflow.com/users/5037068/maluna34"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557543641, "creation_date": 1557315832, "last_edit_date": 1557543641, "question_id": 56040034, "link": "https://stackoverflow.com/questions/56040034/match-nested-capture-groups-with-quantifiers-using-qregularexpression", "title": "Match nested capture groups with quantifiers using QRegularExpression", "body": "<p>I'm trying to get with a QRegularExpression all attributes of an xml tag in the different captured groups. I use a regex matching the tags and I manage to get the capture groups containing the attribute value but with a quantifier, I get only the last one.</p>\n\n<p>I use this regex : </p>\n\n<pre><code>&lt;[a-z]+(?: [a-z]+=(\"[^\"]*\"))*&gt;\n</code></pre>\n\n<p>And I would like to get \"a\" and \"b\" with this text : </p>\n\n<pre><code>&lt;p a=\"a\" b=\"b\"&gt;\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const QString text { \"&lt;p a=\\\"a\\\" b=\\\"b\\\"&gt;\" };\nconst QRegularExpression pattern { \"&lt;[a-z]+(?: [a-z]+=(\\\"[^\\\"]*\\\"))*&gt;\" };\n\nQRegularExpressionMatchIterator it = pattern.globalMatch(text);\nwhile (it.hasNext())\n{\n    const QRegularExpressionMatch match = it.next();\n\n    qDebug() &lt;&lt; \"Match with\" &lt;&lt; match.lastCapturedIndex() + 1 &lt;&lt; \"captured groups\";\n    for (int i { 0 }; i &lt;= match.lastCapturedIndex(); ++i)\n        qDebug() &lt;&lt; match.captured(i);\n}\n</code></pre>\n\n<p>And the output :</p>\n\n<pre><code>Match with 2 captured groups\n\"&lt;p a=\\\"a\\\" b=\\\"b\\\"&gt;\"\n\"\\\"b\\\"\"\n</code></pre>\n\n<p>Is it possible to get multiple capture groups with the quantifier <code>*</code> or have I to iterate using <code>QRegularExpressionMatchIterator</code> with a specific regex on the string literals?</p>\n"}, {"tags": ["android", "c++", "android-ndk", "cameraapi2"], "answers": [{"comments": [{"owner": {"reputation": 372, "user_id": 2941286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e46e569f0b344bbfa21f57c2d7e12d10?s=128&d=identicon&r=PG&f=1", "display_name": "jaraujo", "link": "https://stackoverflow.com/users/2941286/jaraujo"}, "edited": false, "score": 0, "creation_date": 1557380427, "post_id": 56049461, "comment_id": 98746486, "body": "Forgot to mention I am using a Samsung Galaxy s9. I was trying to achiveve this since another user online mentioned that he had used the Android NDK to capture jpegs at 30 Hz on an S7, so I am believing it should be possible :) I should also clarify that I am not interested in previewing this image, but just capture it. I am thinking that there could be something in the capture session settings that is not well configured? One thing that puzzles me is the amount of frames being skipped, so I am most likely doing something wrong.."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "reply_to_user": {"reputation": 372, "user_id": 2941286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e46e569f0b344bbfa21f57c2d7e12d10?s=128&d=identicon&r=PG&f=1", "display_name": "jaraujo", "link": "https://stackoverflow.com/users/2941286/jaraujo"}, "edited": false, "score": 0, "creation_date": 1557412758, "post_id": 56049461, "comment_id": 98763892, "body": "You can try burst capture, at certain resolutions it can deliver 30 FPS, but usually for short session."}], "tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": false, "score": 1, "last_activity_date": 1557412821, "last_edit_date": 1557412821, "creation_date": 1557351888, "answer_id": 56049461, "question_id": 56039897, "link": "https://stackoverflow.com/questions/56039897/android-ndk-camera-sample-jpeg-at-30-hz/56049461#56049461", "title": "Android NDK Camera Sample JPEG at 30 Hz", "body": "<p>Many camera devices cannot produce 30 jpeg images per second. That's why the camera API explicitly sets YUV (or private) format for preview or video. Few devices are capable of creating 30 Jpegs per second. That's why typical video recording session involves h246 or vp8 encoders.</p>\n"}], "owner": {"reputation": 372, "user_id": 2941286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e46e569f0b344bbfa21f57c2d7e12d10?s=128&d=identicon&r=PG&f=1", "display_name": "jaraujo", "link": "https://stackoverflow.com/users/2941286/jaraujo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557412821, "creation_date": 1557315382, "last_edit_date": 1557380455, "question_id": 56039897, "link": "https://stackoverflow.com/questions/56039897/android-ndk-camera-sample-jpeg-at-30-hz", "title": "Android NDK Camera Sample JPEG at 30 Hz", "body": "<p>I have been using <a href=\"https://github.com/googlesamples/android-ndk/tree/master/camera\" rel=\"nofollow noreferrer\">the Android NDK Camera sample</a> and with it one is able to read the frames with format <code>AIMAGE_FORMAT_YUV_420_888</code> by using <a href=\"https://github.com/googlesamples/android-ndk/blob/master/camera/basic/src/main/cpp/camera_engine.cpp#L157\" rel=\"nofollow noreferrer\">the <code>yuvreader_</code> inside DrawFrame</a> at 30 Hz. I validated that 30 Hz is achieved by recording the timestamp in each image and printing it. I am using a Samsung Galaxy S9.</p>\n\n<p>I was now trying to obtain JPEG images instead of the YUV ones also at 30 Hz but have not yet succeed and was wondering if someone could help. </p>\n\n<p>From what I understood, the capture session in this sample creates a request for both \"preview\" and a \"still capture\", where the <a href=\"https://github.com/googlesamples/android-ndk/blob/master/camera/basic/src/main/cpp/camera_engine.cpp#L99\" rel=\"nofollow noreferrer\">yuv is used for preview and jpeg is used for the still capture</a>. What I have done was to set the <code>jpgReader_</code> as the preview one as well, and then I checked in the timestamp of the frames captured in the ImageCallback <a href=\"https://github.com/googlesamples/android-ndk/blob/master/camera/basic/src/main/cpp/image_reader.cpp#L83\" rel=\"nofollow noreferrer\">here</a> (I commented out the step of writing to file, and just called AImage_delete(image) to clean the buffer instead). However, the result I get is frames with intervals of 33, 66, 99 and 133 ms, quite evenly distributed, so many frames often get skipped. </p>\n\n<p>Any ideas of what the problem could be?</p>\n"}, {"tags": ["c++", "c++11", "move"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1557315883, "post_id": 56039847, "comment_id": 98722035, "body": "Moves do nothing for primitive types. Try your test with a class with well-defined moved-from state, such as <code>std::unique_ptr</code>."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1557325360, "post_id": 56040305, "comment_id": 98727949, "body": "<code>std::move</code> doesn&#39;t steal anything. It doesn&#39;t even move. It just gives you an rvalue. It is conventional move ctors/assignment ops that may steal stuff."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1557325500, "post_id": 56040305, "comment_id": 98728033, "body": "@LightnessRacesinOrbit One can think of it as giving &quot;permission to steal&quot;. The recipient is not required to steal, but they have permission to do so. (As you noted, it formally converts the object to an rvalue, but the main thing about rvalues in this context is that they are temporary and therefore stealable.)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1557326073, "post_id": 56040305, "comment_id": 98728388, "body": "@RaymondChen That&#39;s right."}, {"owner": {"reputation": 631, "user_id": 2057014, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d1958eadc7b381d4e81e174be61cfd3e?s=128&d=identicon&r=PG", "display_name": "getsoubl", "link": "https://stackoverflow.com/users/2057014/getsoubl"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1557387363, "post_id": 56040305, "comment_id": 98749467, "body": "@RaymondChen extactly that you described  in details , I meant with the phrase &quot;steal&quot;"}], "tags": [], "owner": {"reputation": 631, "user_id": 2057014, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d1958eadc7b381d4e81e174be61cfd3e?s=128&d=identicon&r=PG", "display_name": "getsoubl", "link": "https://stackoverflow.com/users/2057014/getsoubl"}, "is_accepted": false, "score": 0, "last_activity_date": 1557321526, "last_edit_date": 1557321526, "creation_date": 1557316754, "answer_id": 56040305, "question_id": 56039847, "link": "https://stackoverflow.com/questions/56039847/what-is-difference-between-stdmove-and-pass-by-reference-in-c/56040305#56040305", "title": "What is difference between std::move and pass by reference in C++?", "body": "<p>Reference create an alias of the varialbe that is passed. Move is something different. Move \"steals\" the value that a variable holds.\nFor example if you have </p>\n\n<pre><code>  void foo(void)\n  {\n     std::shared_ptr&lt;int&gt; p = std::make_shared&lt;int&gt;();\n    std::shared_ptr&lt;int&gt; ps = std::move(p);//after execution p has expired\n    std::cout &lt;&lt; \"count:\" &lt;&lt; ps.use_count() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"count:\" &lt;&lt; p.use_count() &lt;&lt; std::endl;\n    std::shared_ptr&lt;int&gt; ps2 = ps;// simple copy,after executuion the reference count \n                                 // is 2 \n    std::cout &lt;&lt; \"count:\" &lt;&lt; ps2.use_count() &lt;&lt; std::endl;\n  }\n</code></pre>\n\n<p>When this routine will be executed the ps shared pointer will steal the value of the p and p will be espired.\nBut when the ps2 is  defined , the content of the ps will be copied to this and reference count will be increased . The new value will be 2.</p>\n"}, {"tags": [], "owner": {"reputation": 716, "user_id": 1040943, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0731dfa3479a09ef4a43462e0d987f8d?s=128&d=identicon&r=PG", "display_name": "Telenoobies", "link": "https://stackoverflow.com/users/1040943/telenoobies"}, "is_accepted": false, "score": 1, "last_activity_date": 1557356308, "creation_date": 1557356308, "answer_id": 56050095, "question_id": 56039847, "link": "https://stackoverflow.com/questions/56039847/what-is-difference-between-stdmove-and-pass-by-reference-in-c/56050095#56050095", "title": "What is difference between std::move and pass by reference in C++?", "body": "<p>Move() gives ownership to your new object. It is useful in multi-threading where you want to pass the ownership of a mutex to a lock.</p>\n\n<p>Pass by reference is a way of passing objects between functions by creating an alias. </p>\n"}], "owner": {"reputation": 128, "user_id": 4045265, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-OZYL7bbylfI/AAAAAAAAAAI/AAAAAAAAAyU/Ewk4LJ--o9o/photo.jpg?sz=128", "display_name": "arjun jawalkar", "link": "https://stackoverflow.com/users/4045265/arjun-jawalkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "closed_date": 1557363125, "answer_count": 2, "score": 0, "last_activity_date": 1557356308, "creation_date": 1557315215, "last_edit_date": 1557324945, "question_id": 56039847, "link": "https://stackoverflow.com/questions/56039847/what-is-difference-between-stdmove-and-pass-by-reference-in-c", "closed_reason": "Duplicate", "title": "What is difference between std::move and pass by reference in C++?", "body": "<p>I feel pass by reference and a move has a same result. In the below example both move semantic and pass by reference has same outcome. I was assuming when we use move semantics the ownership is passed on the the function and in main the variable does not hold any value.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nvoid move_function(int&amp;&amp; a)\n{\n    cout&lt;&lt;\"a:\"&lt;&lt;a&lt;&lt;endl;\n    a++;\n    cout&lt;&lt;\"a:\"&lt;&lt;a&lt;&lt;endl;\n}\n\nvoid function(int&amp; val)\n{\n    val++;\n    cout&lt;&lt;\"val:\"&lt;&lt;val&lt;&lt;endl;;\n}\n\nint main()\n{\n    int a = 100;\n    move_function(move(a));\n    cout&lt;&lt;\"main a:\"&lt;&lt;a&lt;&lt;endl;\n    function(a);\n    cout&lt;&lt;\"main a:\"&lt;&lt;a&lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>can someone give me some light on my confusion. Where has my understanding about move gone wrong?</p>\n"}, {"tags": ["c++", "floating-point"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557314869, "post_id": 56039679, "comment_id": 98721484, "body": "all your code is only to make sure two floats that are not exactly the same are considered the same, hence I dont understand what else did you expect... What is the question? The one you asked you already answered yourself"}, {"owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1557315011, "post_id": 56039679, "comment_id": 98721569, "body": "@user463035818 as you can see that both float variables (a &amp; b) hold different values, but the output printed by the code is &#39;same&#39; instead of &#39;different&#39;."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557315126, "post_id": 56039679, "comment_id": 98721626, "body": "well, thats the whole purpose of that <code>cmpf</code> function. maybe your misunderstanding is this: When do you compare floats that are exactly the same you will get <code>true</code> from comparing them via <code>==</code>, it just almost never happens that two floating point values resulting from calcuations are exactly the same. Then often you still need to have a way to say &quot;ok they are not exactly the same, but within some acceptable error I can consider them to be the same&quot;"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1557315221, "post_id": 56039679, "comment_id": 98721690, "body": "It is wholly dependent on context. Sometimes comparing with an additive tolerance is appropriate, sometimes a multiplicative one is better. Sometimes <code>==</code> will do the job. You need to study your algorithm and how the errors, if any, will accumulate. The linked duplicate is a good starting point."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557315364, "post_id": 56039679, "comment_id": 98721769, "body": "@user463035818: Another myth I&#39;m afraid especially under IEEE754."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557315397, "post_id": 56039679, "comment_id": 98721781, "body": "You wrote a function that returns <code>true</code>, and then you are asking why it returns <code>true</code> instead of <code>false</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1557315449, "post_id": 56039679, "comment_id": 98721816, "body": "@user463035818: <code>1 - 1.0 &#47; 3 - 1.0 &#47; 3 - 1.0 &#47; 3</code> is perhaps a better one."}, {"owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557315714, "post_id": 56039679, "comment_id": 98721953, "body": "@L.F. Where did you see the function always returns true?"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557315786, "post_id": 56039679, "comment_id": 98721985, "body": "@PankajKumarThapa Nowhere did I see the function always returns true ;-) I mean you wrote a function <code>cmpf</code> so that <code>cmpf(a, b)</code> returns <code>true</code>, and then you are asking why it returns <code>true</code> instead of <code>false</code>."}, {"owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557316023, "post_id": 56039679, "comment_id": 98722097, "body": "@L.F. if you see the float variables values, you see different values. With these information, &#39;different&#39; should be printed and not &#39;same&#39;."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557316097, "post_id": 56039679, "comment_id": 98722132, "body": "@PankajKumarThapa In case you still don&#39;t understand, you wrote a function <code>cmpf</code> so that <code>cmpf(a, b)</code> returns <code>true</code> when <code>a</code> are <code>b</code> are close but different values, and then you are asking why it returns <code>true</code> instead of <code>false</code>. What&#39;s the next point I need to clarify? ;-)"}, {"owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557316221, "post_id": 56039679, "comment_id": 98722195, "body": "@L.F. okay. I got your point. My question is how can I get &#39;different&#39; with the same input values (a = 1.012345679, b = 1.012345678)?"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557316299, "post_id": 56039679, "comment_id": 98722239, "body": "@PankajKumarThapa But you just said that <code>a</code> and <code>b</code> are different values yourself in your last comment ;-)"}, {"owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557316305, "post_id": 56039679, "comment_id": 98722245, "body": "@L.F. if I give a = 1.01234567, b = 1.01234564, then I get different. Please check there are 8 digits after decimal. If I increase one more digit after decimal, then the whole comparison goes for a toss."}, {"owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557316407, "post_id": 56039679, "comment_id": 98722311, "body": "@L.F. don&#39;t get confused. by same I meant the same input data with different values in the variables. :D"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557316431, "post_id": 56039679, "comment_id": 98722323, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: This question is not a duplicate of <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">that question</a>. Please do not promiscuously mark questions as duplicates."}, {"owner": {"reputation": 424, "user_id": 7447144, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-J-K4puYGydM/AAAAAAAAAAI/AAAAAAAAAN4/PL1ncd-0stY/photo.jpg?sz=128", "display_name": "Arno Bozo", "link": "https://stackoverflow.com/users/7447144/arno-bozo"}, "edited": false, "score": 0, "creation_date": 1557317651, "post_id": 56039679, "comment_id": 98723001, "body": "You use float type. It only records 7 digits. So a and b are the same. You can see it if you <code>cout &lt;&lt; a-b</code>. You can see more difference if you define a b and cmpf with var as double."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1557317913, "post_id": 56039679, "comment_id": 98723128, "body": "The most important thing to keep in mind when you&#39;re thinking about floating-point operations is that floating-point numbers <b>are not like real numbers</b>, and all of the intuition about decimal numbers that you&#39;ve developed over your lifetime will mislead you."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1557344962, "post_id": 56039679, "comment_id": 98737680, "body": "FWIW, the exact values <code>1.012345679</code> and <code>1.012345678</code>, when stored as floats, are both stored as the approximated value <code>1.01234567165374755859375</code>, so <b>when stored as floats, they are the exact same values</b>. They <b>should</b> return <code>&quot;same&quot;</code>, even without the <code>EPSILON_VALUE</code>. Note that your epsilon is below the precision a float can give anyway. Also, when you subtract nearly equal values, you should expect <a href=\"https://en.wikipedia.org/wiki/Loss_of_significance\" rel=\"nofollow noreferrer\"><i>catastrophic cancellation</i></a>, which can be a problem too."}], "answers": [{"comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1557318162, "post_id": 56040270, "comment_id": 98723279, "body": "The most precise thing is to not use floating numbers at all. Use integers and fractions."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1557318212, "post_id": 56040270, "comment_id": 98723320, "body": "@MichaelChourdakis: How do you compute a square root or a cosine with integers or fractions?"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1557318379, "post_id": 56040270, "comment_id": 98723409, "body": "You don&#39;t. If your calculations include real numbers, you have lost precision anyway. The idea is to avoid floating point variables when you can, for example in one of my projects, music duration is expressed with a fraction, not a floating point number. Btw the comment was for the question but i misclicked. Your answer is correct."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1557319435, "post_id": 56040270, "comment_id": 98724054, "body": "@EricPostpischil - there are techniques for computing the &quot;integer square root&quot;  (for a positive integral value <code>x</code>, this is the largest positive integral value <code>y</code> such that <code>y * y &lt;= x</code>) using only integral operations - no floating point.    Fractions (aka rational values) can be represented using a pair of integers, and operations on the pair.     That said, I disagree with advice to not use floating point at all - like anything in software development, floating point has its uses."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1557322232, "post_id": 56040270, "comment_id": 98725880, "body": "@MichaelChourdakis: \u201cYou don\u2019t\u201d is not an acceptable solution for many algorithms. Any VR, AR, or physics modeling needs square roots and trigonometric functions. Much scientific and mathematical work needs those and other mathematical functions which are not sufficiently served with integer or rational arithmetic. Dismissing floating-point is not practical."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1557345491, "post_id": 56040270, "comment_id": 98737875, "body": "@Eric: &quot;How do you compute a square root or a cosine with integers or fractions?&quot; Huh? That is possible. It is slow, but both my BigDecimal as well as my BigRational can do it. And how? The same (or similar) way it is done for FP, just not in hardware."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1557346447, "post_id": 56040270, "comment_id": 98738248, "body": "@RudyVelthuis: With integer arithmetic, what is the square root of two? How is that more precise than with floating-point? With rational arithmetic, what is the cosine of 4/5?"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1557348529, "post_id": 56040270, "comment_id": 98739143, "body": "@Eric: I didn&#39;t say plain integer arithmetic, I said BigRational or Bigdecimal. With precision set to 128, BigDecimal will produce: <code>1.4142135623730950488016887242096980785696718753769480731766&zwnj;&#8203;797379</code>. Source code for BigDecimal.Sqrt: <a href=\"https://github.com/rvelthuis/DelphiBigNumbers/blob/master/Source/Velthuis.BigDecimals.pas#L2260\" rel=\"nofollow noreferrer\">github.com/rvelthuis/DelphiBigNumbers/blob/master/Source/&hellip;</a>, a simple Newton\u2013Raphson algorithm. BigRational (not fully functional at the moment) uses a continued fraction algorithm. All these use (fractions of) integers."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1557348752, "post_id": 56040270, "comment_id": 98739224, "body": "@RudyVelthuis: Remember the context here\u2014 Michael Chourdakis\u2019s comment to use integers or fractions. Using BigDecimal is floating-point arithmetic, regardless of whether it is implemented with integers. The issue is that integer or rational arithmetic is inadequate for many tasks for which floating-point is suitable."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1557348761, "post_id": 56040270, "comment_id": 98739228, "body": "With integers: BigDecimal consists of a BigInteger and a scale. The BigInteger is scaled as necessary (by powers of 10), the integer square root is calculated and the result is scaled back (rounding where appropriate)."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1557348808, "post_id": 56040270, "comment_id": 98739251, "body": "@RudyVelthuis: See that \u201cscale\u201d you write of in BigDecimal? That is the \u201cfloating\u201d of floating-point. It is not integer arithmetic. It is floating-point arithmetic."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1557348933, "post_id": 56040270, "comment_id": 98739308, "body": "@Eric: it is possible using (continued) fractions (which are fractions of -- usually small -- integers). Integers are used where appropriate. It isn&#39;t fast, though."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1557349025, "post_id": 56040270, "comment_id": 98739342, "body": "@Eric: basically, it is all integer arithmetic. But you also ruled out fractions (of integers). It is possible with them."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1557349105, "post_id": 56040270, "comment_id": 98739379, "body": "FWIW, BigDecimals could work with a fixed scale. But they would be pretty wasteful. The square root algorithm used is the integer square root algorithm as implemented in BigInteger."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1557349196, "post_id": 56040270, "comment_id": 98739411, "body": "@RudyVelthuis: <b>What</b> is possible? Remember the context\u2014Michael Chourdakis\u2019s comment to use integers or fractions, to be the \u201cmost precise.\u201d But an approximation with continued fractions is not inherently more precise than floating-point. And if it is not faster or otherwise more efficient, what is the point? My questions about integer and rational arithmetic illustrate that there are certain mathematical limitations to <b>any</b> fixed-size arithmetic, and integers and fractions are neither suitable for various work nor the \u201cmost precise.\u201d"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1557349399, "post_id": 56040270, "comment_id": 98739471, "body": "@Eric: Fractions can be far more precise than IEEE-754 FP. And continued fractions are very precise, actually, especially when continuously used as fractions, and not converted to FP."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1557349493, "post_id": 56040270, "comment_id": 98739504, "body": "@RudyVelthuis: The information content of 32 bits cannot exceed 32 bits."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1557349631, "post_id": 56040270, "comment_id": 98739551, "body": "@Eric: duh! But multiple 32 bit integers can contain far more info. Who restricted this to 32 bits?"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1557351238, "post_id": 56040270, "comment_id": 98740115, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/193057/discussion-between-eric-postpischil-and-rudy-velthuis\">continue this discussion in chat</a>."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1557351716, "post_id": 56040270, "comment_id": 98740265, "body": "@Eric: I am going to bed. But thanks for the invitation."}, {"owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "edited": false, "score": 0, "creation_date": 1557376331, "post_id": 56040270, "comment_id": 98745337, "body": "So with all above discussion, I can conclude that there is no straight-forward way to solve this. We have to deal with such problems when working with float, double. Grrrrr!!!!"}], "tags": [], "owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 6, "last_activity_date": 1557316943, "last_edit_date": 1557316943, "creation_date": 1557316626, "answer_id": 56040270, "question_id": 56039679, "link": "https://stackoverflow.com/questions/56039679/compare-two-float-variables-in-c/56040270#56040270", "title": "Compare two float variables in C++", "body": "<p>There is no general solution for comparing floating-point numbers that contain errors from previous operations. The code that must be used is application-specific. So, to get a proper answer, you must describe your situation more specifically.</p>\n\n<p>The underlying problem is that performing a correct computation using incorrect data is in general impossible. If you want to compute some function of two exact mathematical values <em>x</em> and <em>y</em> but the only data you have is some inexactly computed values <code>x</code> and <code>y</code>, it is generally impossible to compute the exactly correct result. For example, suppose you want to know what the sum, <em>x</em>+<i>y</i>, is, but you only know <code>x</code> is 3 and <code>y</code> is 4, but you do not know what the true, exact <em>x</em> and <em>y</em> are. Then you cannot compute <em>x</em>+<i>y</i>.</p>\n\n<p>If you know that <code>x</code> and <code>y</code> are <strong>approximately</strong> <em>x</em> and <em>y</em>, then you can compute an approximation of <em>x</em>+y by adding <code>x</code> and <code>y</code>. The works when the function being computed (<code>+</code> in this example) has a reasonable derivative: Slightly changing the inputs of a function with a reasonable derivative slightly changes its outputs. This fails when the function you want to compute has a discontinuity or a large derivative. For example, if you want to compute the square root of <em>x</em> (in the real domain) using an approximation <code>x</code> but <code>x</code> might be negative due to previous rounding errors, then computing <code>sqrt(x)</code> may produce an exception. Similarly, comparing for inequality or order is a discontinuous function: A slight change in inputs can change the answer completely (from false to true or vice-versa).</p>\n\n<p>The common bad advice is to compare with a \u201ctolerance\u201d. This method trades false negatives (incorrect rejections of numbers that would satisfy the comparison if the exact mathematical values were compared) for false positives (incorrect acceptance of numbers that would not satisfy the comparison).</p>\n\n<p>Whether or not an applicable can tolerate false acceptance depends on the application. Therefore, there is no general solution.</p>\n\n<p>The level of tolerance to set, and even the nature by which it is calculated, depend on the data, the errors, and the previous calculations. So, even when it is acceptable to compare with a tolerance, the amount of tolerance to use and how to calculate it depend on the application. There is no general solution.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1557364044, "post_id": 56050814, "comment_id": 98742915, "body": "Just blindly throwing more bits at the problem is not a solution"}, {"owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "edited": false, "score": 0, "creation_date": 1557376245, "post_id": 56050814, "comment_id": 98745320, "body": "Why should I use double when not required. I am able to get the execution using float too, but due to precision, I am struggling. The same will be with the double when storing bigger. Is there any straight-forward solution to this?"}, {"owner": {"reputation": 716, "user_id": 1040943, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0731dfa3479a09ef4a43462e0d987f8d?s=128&d=identicon&r=PG", "display_name": "Telenoobies", "link": "https://stackoverflow.com/users/1040943/telenoobies"}, "edited": false, "score": 0, "creation_date": 1557413632, "post_id": 56050814, "comment_id": 98764387, "body": "Your problem comes from the fact that you need higher precision types. It make sense to use a data type which uses more bits. Care to explain why you are reluctant to use a different type?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1557611502, "post_id": 56050814, "comment_id": 98825069, "body": "&quot;because floats have 7 digit precision&quot; --&gt; not always. Sample counter example: Both 8589973, 8589974 and covert to 8589974.0f"}], "tags": [], "owner": {"reputation": 716, "user_id": 1040943, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0731dfa3479a09ef4a43462e0d987f8d?s=128&d=identicon&r=PG", "display_name": "Telenoobies", "link": "https://stackoverflow.com/users/1040943/telenoobies"}, "is_accepted": false, "score": -3, "last_activity_date": 1557363596, "creation_date": 1557363596, "answer_id": 56050814, "question_id": 56039679, "link": "https://stackoverflow.com/questions/56039679/compare-two-float-variables-in-c/56050814#56050814", "title": "Compare two float variables in C++", "body": "<p>It's because floats have 7 digit precision.\nIf you want better precision you need to use double or long double.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1557576067, "creation_date": 1557576067, "answer_id": 56090144, "question_id": 56039679, "link": "https://stackoverflow.com/questions/56039679/compare-two-float-variables-in-c/56090144#56090144", "title": "Compare two float variables in C++", "body": "<blockquote>\n  <p>The output: same although both the float variables hold different values.</p>\n</blockquote>\n\n<p>\"float variables hold different values.\" is unfounded.</p>\n\n<p><code>same</code> was printed because values <code>a,b</code> are the same even if the initialization constants differ. </p>\n\n<hr>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">Typical <code>float</code></a> is 32-bits and can represent about 2<sup>32</sup> different values such as 1.0, 1024.0, 0.5, 0.125.  These values are all of the form: +/- some_integer*2<sup>some_integer</sup></p>\n\n<p><code>1.012345679</code> and <code>1.012345678</code> are <em>not</em> in that <code>float</code> set. <a href=\"https://stackoverflow.com/questions/56039679/compare-two-float-variables-in-c#comment98737680_56039679\">@Rudy Velthuis</a>.</p>\n\n<pre><code>1.012345 67165374755859375 // `float` member\n1.012345 678\n1.012345 679\n1.012345 790863037109375   // `float` member\n</code></pre>\n\n<hr>\n\n<p>Similar applies for <code>double</code>, yet with more precision - commonly 64 bits.</p>\n\n<p><code>1.012345679</code> and <code>1.012345678</code> are <em>not</em> in that <code>double</code> set either</p>\n\n<pre><code>1.012345 67799999997106397131574340164661407470703125    // `double` member\n1.012345 678\n1.012345 6780000001931085762407747097313404083251953125  // `double` member\n...\n1.012345 6789999998317597373898024670779705047607421875  // `double` member\n1.012345 679\n1.012345 67900000005380434231483377516269683837890625    // `double` member\n</code></pre>\n\n<hr>\n\n<p>It can be thought of as 2 steps of rounding.  Code <code>1.012345679</code> is rounded to the nearest <code>double</code> 1.01234567900000005380434231483377516269683837890625.  Then the assignment rounds the <code>double</code> to the nearest <code>float</code> 1.01234567165374755859375.</p>\n\n<pre><code>float a = 1.012345679;\n// 'a' has the value of 1.01234567165374755859375\n</code></pre>\n\n<p>Likewise for <code>b</code>. Code <code>1.012345678</code> is rounded to the nearest <code>double</code> 1.01234567799999997106397131574340164661407470703125.  Then the assignment rounds the <code>double</code> to the nearest <code>float</code> 1.01234567165374755859375.</p>\n\n<pre><code>flaot b = 1.012345678;\n// 'b' has the value of 1.01234567165374755859375\n</code></pre>\n\n<p><code>a</code> and <code>b</code> have the same value.</p>\n"}], "owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 56090144, "answer_count": 3, "score": 1, "last_activity_date": 1557576067, "creation_date": 1557314719, "question_id": 56039679, "link": "https://stackoverflow.com/questions/56039679/compare-two-float-variables-in-c", "title": "Compare two float variables in C++", "body": "<p>I have read multiple articles regarding floating point variables comparison, but failed to understand and get the required knowledge from those articles. So, here I am posting this question.</p>\n\n<p>What is the good way to compare two float variables?\nBelow is the code snippet:</p>\n\n<pre><code>#define EPSILON_VALUE 0.0000000000000001\n\nbool cmpf(float A, float B)\n{\n  return (fabs(A - B) &lt; EPSILON_VALUE);\n}\n\nint main()\n{\n  float a = 1.012345679, b = 1.012345678;\n\n  if(cmpf(a, b))cout&lt;&lt;\"same\"&lt;&lt;endl;\n  else cout&lt;&lt;\"different\"&lt;&lt;endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>The output: <code>same</code> although both the float variables hold different values.</p>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1557314826, "post_id": 56039652, "comment_id": 98721459, "body": "<code>typename LabelType::template label_type&lt;int&gt;</code>"}, {"owner": {"reputation": 21, "user_id": 11344784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BfC2fADJCdk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc_pFlrveSZ99AOHOYGw_wlfaseeQ/mo/photo.jpg?sz=128", "display_name": "aqtth", "link": "https://stackoverflow.com/users/11344784/aqtth"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1557315272, "post_id": 56039652, "comment_id": 98721716, "body": "That solved the problem, thank you very much!"}], "owner": {"reputation": 21, "user_id": 11344784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BfC2fADJCdk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc_pFlrveSZ99AOHOYGw_wlfaseeQ/mo/photo.jpg?sz=128", "display_name": "aqtth", "link": "https://stackoverflow.com/users/11344784/aqtth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1557315277, "answer_count": 0, "score": 2, "last_activity_date": 1557314644, "creation_date": 1557314644, "question_id": 56039652, "link": "https://stackoverflow.com/questions/56039652/how-to-define-a-vector-of-a-templated-using-member-of-a-templated-class", "closed_reason": "Duplicate", "title": "How to define a vector of a templated using member of a templated class?", "body": "<p>The compiler (<code>g++-7</code>) emits an error when compiling the following code:</p>\n\n<pre><code>#include &lt;vector&gt;\n\ntemplate&lt;typename MetricType, typename DataType&gt;\nclass Label {\n  public:\n    using metric_type = Label&lt;MetricType, int&gt;;\n\n    template&lt;typename LabelDataType&gt; using label_type = Label&lt;MetricType, LabelDataType&gt;;\n  // ...\n};\n\ntemplate&lt;typename LabelType&gt;\nclass Raptor {\n  public:\n    std::vector&lt;typename LabelType::metric_type&gt; works;\n\n    std::vector&lt;typename LabelType::label_type&lt;int&gt; &gt; throws_an_error;\n};\n\nint main() {\n  Raptor&lt;Label&lt;int, int&gt; &gt; raptor;\n  return 0;\n}\n</code></pre>\n\n<p>The error message is</p>\n\n<pre><code>main.cpp:17:53: error: template argument 1 is invalid\n     std::vector&lt;typename LabelType::label_type&lt;int&gt; &gt; throws_an_error;\n                                                     ^\nmain.cpp:17:53: error: template argument 2 is invalid\nmake[2]: *** [CMakeFiles/bin.dir/build.make:63: CMakeFiles/bin.dir/main.cpp.o] Error 1\nmake[1]: *** [CMakeFiles/Makefile2:73: CMakeFiles/bin.dir/all] Error 2\nmake: *** [Makefile:84: all] Error 2\n</code></pre>\n\n<p>I tried giving the <code>std::vector</code> an empty struct as the second template argument, but the error message stays the same.</p>\n\n<p>I have no idea what this error message means and how to make this code compile.\nEspecially I'm confused, because the field <code>works</code> does not produce any errors, also when commenting the errorneous field out, but the types <code>metric_type</code> and <code>label_type&lt;int&gt;</code> are equal.</p>\n"}, {"tags": ["c++", "matrix", "directx", "multiplication", "directxmath"], "comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1557350023, "post_id": 56039614, "comment_id": 98739680, "body": "What compiler and update are you using?"}, {"owner": {"reputation": 687, "user_id": 1707828, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/9h7iz.png?s=128&g=1", "display_name": "nat1707828", "link": "https://stackoverflow.com/users/1707828/nat1707828"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1557353140, "post_id": 56039614, "comment_id": 98740683, "body": "I&#39;m using  Visual Studio Community 2017 (15.9.11)"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1557359067, "post_id": 56039614, "comment_id": 98742034, "body": "How are you looking at the results? If I use <code>printf</code> with <code>%f</code>, it outputs reasonable outputs."}, {"owner": {"reputation": 687, "user_id": 1707828, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/9h7iz.png?s=128&g=1", "display_name": "nat1707828", "link": "https://stackoverflow.com/users/1707828/nat1707828"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1557362166, "post_id": 56039614, "comment_id": 98742580, "body": "mmm that&#39;s strange. I&#39;ve included the code I am using to output the results, but I see the same values within the Local variable table when debugging (so would have thought it not related to the output process?)."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 1, "creation_date": 1557383495, "post_id": 56039614, "comment_id": 98747669, "body": "Generally the best way to output an <code>XMMATRIX</code> is to use <code>XMStoreFloat4x4</code> and then use the <code>XMFLOAT4X4</code> structure to print out the elements. There could well be a compiler bug with all the SIMD to memory and back and forth you are doing..."}], "answers": [{"comments": [{"owner": {"reputation": 687, "user_id": 1707828, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/9h7iz.png?s=128&g=1", "display_name": "nat1707828", "link": "https://stackoverflow.com/users/1707828/nat1707828"}, "edited": false, "score": 0, "creation_date": 1557397187, "post_id": 56053653, "comment_id": 98755056, "body": "Yup that fixes it, thank you for taking the time to work that out! I&#39;ve reported the bug through the process you suggested."}], "tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 2, "last_activity_date": 1557384394, "creation_date": 1557384394, "answer_id": 56053653, "question_id": 56039614, "link": "https://stackoverflow.com/questions/56039614/directxxmmatrix-multiplication-incorrect-after-function-pass-c/56053653#56053653", "title": "DirectX::XMMATRIX Multiplication incorrect after function pass (C++)", "body": "<p><strong>TL;DR: This is a compiler bug likely due to bad code-generation.</strong></p>\n\n<p>The weird output happens only when using the x86 (32-bit) compiler, not when using the x64 (64-bit) native compiler. I tried a few different ways of outputting the results, and they are consistently weird for x86 but correct for x64.</p>\n\n<ul>\n<li><p>It seems to happen in both Debug and Release (optimized) configurations, and with both <code>/fp:fast</code> and <code>/fp:precise</code>.</p></li>\n<li><p>This does <em>not</em> happen with x64 native code or with x86 if you use <code>/arch:IA32</code>.</p></li>\n<li><p>I'm able to reproduce the same issue with VS 2017 (15.9.11) as well as VS 2019 (16.0.3).</p></li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;DirectXMath.h&gt;\n\nusing namespace DirectX;\n\nclass Model {\npublic:\n    XMMATRIX MatrixMult(XMMATRIX test) {\n        XMMATRIX result = test * XMMatrixIdentity();\n        return result;\n    }\nprivate:\n};\n\nint main() {\n\n    Model m;\n\n    XMMATRIX result1 = XMMatrixIdentity() * XMMatrixIdentity(); //returns identity\n    XMMATRIX result2 = m.MatrixMult(XMMatrixIdentity()); //doesn't return identity\n    int height = 4;\n    int width = 4;\n\n    //Output results\n#if 0\n    XMFLOAT4X4 mat[2];\n    XMStoreFloat4x4(&amp;mat[0], result1);\n    XMStoreFloat4x4(&amp;mat[1], result2);\n\n    //for each result\n    for (int res = 0; res &lt; 2; ++res) {\n        //for each row\n        for (int i = 0; i &lt; height; ++i)\n        {\n            printf(\"%f %f %f %f\\n\",\n                mat[res].m[i][0], mat[res].m[i][1], mat[res].m[i][2], mat[res].m[i][3]);\n        }\n    }\n#elif 0\n    XMFLOAT4X4 mat[2];\n    XMStoreFloat4x4(&amp;mat[0], result1);\n    XMStoreFloat4x4(&amp;mat[1], result2);\n\n    //for each result\n    for (int res = 0; res &lt; 2; ++res) {\n        //for each row\n        for (int i = 0; i &lt; height; ++i)\n        {\n            //for each column\n            for (int j = 0; j &lt; width; ++j)\n            {\n                std::cout &lt;&lt; mat[res].m[i][j] &lt;&lt; ' ';\n            }\n            std::cout &lt;&lt; std::endl;\n        }\n        std::cout &lt;&lt; \"\\n\";\n    }\n#else\n    XMMATRIX results[2] = { result1, result2 };\n\n    //for each result\n    for (int res = 0; res &lt; 2; ++res) {\n        //for each row\n        for (int i = 0; i &lt; height; ++i)\n        {\n            //for each column\n            for (int j = 0; j &lt; width; ++j)\n            {\n                if (j == 0) {\n                    std::cout &lt;&lt; XMVectorGetX(results[res].r[i]) &lt;&lt; ' ';\n                }\n                else if (j == 1) {\n                    std::cout &lt;&lt; XMVectorGetY(results[res].r[i]) &lt;&lt; ' ';\n                }\n                else if (j == 2) {\n                    std::cout &lt;&lt; XMVectorGetZ(results[res].r[i]) &lt;&lt; ' ';\n                }\n                else if (j == 3) {\n                    std::cout &lt;&lt; XMVectorGetW(results[res].r[i]) &lt;&lt; ' ';\n                }\n            }\n            std::cout &lt;&lt; std::endl;\n        }\n        std::cout &lt;&lt; \"\\n\";\n    }\n#endif\n\n    return 0;\n    }\n</code></pre>\n\n<p>You should use <strong>Help -> Send Feedback -> Report a Problem...</strong> to report the bug. Be sure to mention it applies to both VS 2017 and VS 2019.</p>\n"}], "owner": {"reputation": 687, "user_id": 1707828, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/9h7iz.png?s=128&g=1", "display_name": "nat1707828", "link": "https://stackoverflow.com/users/1707828/nat1707828"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 56053653, "answer_count": 1, "score": 0, "last_activity_date": 1560463394, "creation_date": 1557314466, "last_edit_date": 1560463394, "question_id": 56039614, "link": "https://stackoverflow.com/questions/56039614/directxxmmatrix-multiplication-incorrect-after-function-pass-c", "title": "DirectX::XMMATRIX Multiplication incorrect after function pass (C++)", "body": "<p>I am having some trouble understanding why I am getting different results when multiplying two DirectX 4x4 matrices together, depending on whether the multiplication is performed within a class function or not. </p>\n\n<p>Using identity matrices as an example, the values of result1 and result2 end up being different using the following code. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;DirectXMath.h&gt;\n\nusing namespace DirectX;\n\nclass Model {\npublic:\n    XMMATRIX MatrixMult(XMMATRIX test) {\n        XMMATRIX result = test * XMMatrixIdentity();\n        return result;\n    }\nprivate:\n};\n\nint main() {\n\n    Model m;\n\n    XMMATRIX result1 = XMMatrixIdentity() * XMMatrixIdentity(); //returns identity\n    XMMATRIX result2 = m.MatrixMult(XMMatrixIdentity()); //doesn't return identity\n    int height = 4;\n    int width = 4;\n\n    //Output results\n    XMMATRIX results[2] = { result1, result2 };\n\n    //for each result\n    for (int res = 0; res &lt; 2; ++res) {\n        //for each row\n        for (int i = 0; i &lt; height; ++i)\n        {\n            //for each column\n            for (int j = 0; j &lt; width; ++j)\n            {\n                if (j == 0) {\n                    std::cout &lt;&lt; XMVectorGetX(results[res].r[i]) &lt;&lt; ' ';\n                }\n                else if (j == 1) {\n                    std::cout &lt;&lt; XMVectorGetY(results[res].r[i]) &lt;&lt; ' ';\n                }\n                else if (j == 2) {\n                    std::cout &lt;&lt; XMVectorGetZ(results[res].r[i]) &lt;&lt; ' ';\n                }\n                else if (j == 3) {\n                    std::cout &lt;&lt; XMVectorGetW(results[res].r[i]) &lt;&lt; ' ';\n                }\n            }\n            std::cout &lt;&lt; std::endl;\n        }\n        std::cout &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n    }\n</code></pre>\n\n<p>It actually looks like in result2, the expected result starts in row 3 of the matrix? (Output below)</p>\n\n<pre><code>//result1\n1 0 0 0\n0 1 0 0\n0 0 1 0\n0 0 0 1\n\n//result2\n8.2597e-39 -1.07374e+08 -1.07374e+08 -1.07374e+08\n-1.07374e+08 -1.07374e+08 -1.07374e+08 -1.07374e+08\n1 0 0 0\n0 1 0 0\n</code></pre>\n\n<p>I know through passing the array as a function I am making a copy of it, but I wouldn't have thought that would make a difference here.</p>\n\n<p>Any help would be greatly appreciated!</p>\n"}, {"tags": ["c++", "emscripten"], "comments": [{"owner": {"reputation": 3796, "user_id": 4661625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd0caf54e0766c83f04f51f881303b?s=128&d=identicon&r=PG&f=1", "display_name": "Bumsik Kim", "link": "https://stackoverflow.com/users/4661625/bumsik-kim"}, "edited": false, "score": 0, "creation_date": 1557314978, "post_id": 56039587, "comment_id": 98721542, "body": "How did you override and wrap the function? Please provide what exactly you did in the code."}, {"owner": {"reputation": 58, "user_id": 4806940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-t7iXyQRaq8o/AAAAAAAAAAI/AAAAAAAACl8/H_JWTMziHQI/photo.jpg?sz=128", "display_name": "deggen", "link": "https://stackoverflow.com/users/4806940/deggen"}, "reply_to_user": {"reputation": 3796, "user_id": 4661625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd0caf54e0766c83f04f51f881303b?s=128&d=identicon&r=PG&f=1", "display_name": "Bumsik Kim", "link": "https://stackoverflow.com/users/4661625/bumsik-kim"}, "edited": false, "score": 0, "creation_date": 1557316614, "post_id": 56039587, "comment_id": 98722413, "body": "@BumsikKim thanks for the reply. I added the code."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1557477711, "post_id": 56039587, "comment_id": 98786216, "body": "@deggen I&#39;ve updated my answer with a corrected explanation of what&#39;s happening under the hood and a couple of ways that can be used to trace C++ calls to <code>malloc</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "is_accepted": true, "score": 4, "last_activity_date": 1557477611, "last_edit_date": 1557477611, "creation_date": 1557328843, "answer_id": 56044038, "question_id": 56039587, "link": "https://stackoverflow.com/questions/56039587/how-to-override-c-malloc-free-in-javascript-emscripten/56044038#56044038", "title": "How to override c++ malloc/free in javascript (emscripten)?", "body": "<p><strong>Short answer</strong>: your attempt at wrapping <code>malloc</code>/<code>free</code> doesn't work because the <code>Module</code> object that <em>exposes</em> Emscripten's implementation of <code>malloc()</code>/<code>free()</code> are <em>not</em> the entry-points called by native C++ code. However, with a little bit of hackery, there are ways you <em>can</em> trace those calls.</p>\n\n<hr>\n\n<h2>Why Your Overrides Don't Work</h2>\n\n<p>I think the answer you quote might be better worded as: the <em>emulation</em> of C++'s <code>malloc()</code> and <code>free()</code> calls is exposed in <code>Module._malloc()</code> and <code>Module._free()</code>, but these are <em>not</em> the entry-points called by converted C++ code.</p>\n\n<p><strong>Note</strong>: I will generally only talk of <code>malloc</code> for the remainder of this answer, but essentially everything that applies to <code>malloc</code> also applies to <code>free</code>.</p>\n\n<p>I'll leave all the gory details of how Emscripten handles <code>malloc()</code> to later, but in brief:</p>\n\n<ul>\n<li><p>Using \"standard settings\", Emscripten compiles a C++ program to <code>a.out.js</code>.</p></li>\n<li><p>A large chunk of this file creates an <code>asm</code> object. This contains all the converted C++ code (e.g. the JavaScript implementation of <code>_main()</code>) <em>and</em> JavaScript versions of C++ library functions (in particular, <code>_malloc()</code>).</p></li>\n<li><p>The converted C++ code (within <code>asm</code>) makes direct reference to the internal library functions (also within <code>asm</code>).</p></li>\n<li><p>References to the C++ functions and many of the library functions (in particular <code>_main</code>, <code>_malloc</code> and <code>_free</code>) are exposed as properties of the <code>asm</code> object. They are <em>also</em> exposed as properties of the <code>Module</code> object and exist as standalone variables.</p></li>\n</ul>\n\n<p>So, original C++ code will <em>only</em> call the internal implementation of <code>_malloc()</code> defined within the <code>asm</code> block of code. The rest of the Emscripten framework, and any additional JavaScript code can also call this function via any of the exposed references: <code>_malloc</code>, <code>Module._malloc</code> (or <code>Module['_malloc']</code>) and <code>asm._malloc</code> (or <code>asm['_malloc']</code>).</p>\n\n<p>Therefore, if you replace any or all of <code>_malloc</code>, <code>Module._malloc</code> or <code>asm._malloc</code> with \"wrapped\" versions, this will only affect calls made from the rest of the Emscripten framework or additional JavaScript code. It will <em><strong>not</strong></em> affect the calls made from converted C++ code.</p>\n\n<hr>\n\n<h2>Ways of Tracing Calls to <code>_malloc()</code>/<code>_free()</code></h2>\n\n<h3>1. The Official Way</h3>\n\n<p>Before we get into some low-level hackery I should mention that Emscripten has a <strong>Tracing API</strong> built-in which (according to their help page) \"<em>provides some useful capabilities to better see what is going on inside of your application, in particular with respect to memory usage</em>\".</p>\n\n<p>I've not tried to use it, but for serious debugging work, this is probably the way to go. However, it seems to need some \"up-front\" effort expending (you need to set up a separate process to receive trace messages from the application under test), so it may be \"overkill\" for some situations.</p>\n\n<p>If you want to pursue this, the official documentation <a href=\"https://emscripten.org/docs/api_reference/trace.h.html\" rel=\"nofollow noreferrer\">can be found here</a> and <a href=\"https://pspdfkit.com/blog/2019/debug-emscripten-with-tracing/\" rel=\"nofollow noreferrer\">this blog post</a> describes how one company used the Tracing API to their advantage (I have no affiliation: that page just turned up in search results).</p>\n\n<h3>2. Hacking It</h3>\n\n<p>As noted above, the problem is that the calls made by converted C++ calls are to internal functions within the <code>asm</code> object, and so are not affected by any wrappers we might create at the \"outside\" level. After some investigation, I have devised two ways of overcoming this problem. As both are a little \"hacky\", purists may want to look away...</p>\n\n<p>First, let's start with a small piece of code to serve as our test-bed (adapted from that found on the <a href=\"https://emscripten.org/docs/getting_started/Tutorial.html#tutorial\" rel=\"nofollow noreferrer\">Emscripten Tutorial</a> page):</p>\n\n<p><strong><code>hello.c</code></strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n  char* msg = malloc(1234321) ;\n  strcpy( msg, \"Hello, world!\" ) ;\n  printf( \"%s\\n\", msg ) ;\n  free( msg ) ;\n  return 0;\n}\n</code></pre>\n\n<p><em>Note</em>: The number <code>1234321</code> was chosen simply to aid searching the generated JavaScript file. This happily compiles and runs as expected:</p>\n\n<pre><code>C:\\Program Files\\Emscripten\\Test&gt;emcc hello.c\n\nC:\\Program Files\\Emscripten\\Test&gt;node a.out.js\nHello, world!\n</code></pre>\n\n<p>We will now create the following JavaScript file to \"wrap\" <code>malloc</code> and <code>free</code>:</p>\n\n<p><strong><code>traceMalloc.js</code></strong></p>\n\n<pre><code>Module={\n  'preRun': function() {\n    // Edit below or make an option to selectively wrap malloc/free.\n    if( true ) {\n      console.log( 'Wrapping malloc/free' ) ;\n      var real_malloc = _malloc ;\n      Module['_malloc'] = asm['_malloc'] = _malloc = function( size ) {\n        console.log( '_malloc( ' + size + ' )' ) ;\n        var result = real_malloc.apply( null, arguments ) ;\n        console.log( '&lt;--- ' + result ) ;\n        return result ;\n      }\n      var real_free = _free ;\n      Module['_free'] = asm['_free'] = _free = function( ptr ) {\n        console.log( '_free( ' + ptr + ' )' ) ;\n        var result = real_free.apply( null, arguments ) ;\n        console.log( '&lt;--- ' + result ) ;\n        return result ;\n      }\n      // Hack 2b: invoke semi-permanent code added to emscripten.py\n      //asm.wrapMallocFree();        }\n  }\n}\n</code></pre>\n\n<p>The <a href=\"https://emscripten.org/docs/api_reference/module.html?highlight=prerun#Module.preRun\" rel=\"nofollow noreferrer\"><code>Module['preRun']</code></a> is a way of getting our code executed shortly before the main entry-point. Inside the function, we save a reference to the \"real\" <code>_malloc</code> routine and then create a new function that calls the original, wrapped in trace-messages. The new function replaces all three \"external\" references to the original <code>_malloc</code>.</p>\n\n<p>(For now, ignore the two commented-out lines near the bottom: they will be used later).</p>\n\n<p>If we compile and run this (using the <a href=\"https://emscripten.org/docs/tools_reference/emcc.html#emcc-pre-js\" rel=\"nofollow noreferrer\"><code>--pre-js</code> option</a> to tell Emscripten to include our piece of JavaScript in the output <code>a.out.js</code> file), we have, as the OP found, only limited success:</p>\n\n<pre><code>C:\\Program Files\\Emscripten\\Test&gt;emcc --pre-js traceMalloc.js hello.c\n\nC:\\Program Files\\Emscripten\\Test&gt;node a.out.js\nWrapping malloc/free\n_malloc( 42 )\n&lt;--- 5251080\n_malloc( 5 )\n&lt;--- 5251128\nHello, world!\n</code></pre>\n\n<p>There are two calls to <code>_malloc</code> from somewhere in the Emscripten framework, but the one we're interested in \u2013 the one from our C code \u2013 has not been traced.</p>\n\n<h3>2a. One-Shot Hack</h3>\n\n<p>If we examine the <code>a.out.js</code> file, we will find the following snippet, which is the start of our C code converted to JavaScript:</p>\n\n<pre><code>function _main() {\n var $0 = 0, $1 = 0, $2 = 0, $3 = 0, $4 = 0, $fred = 0, $vararg_buffer = 0, label = 0, sp = 0;\n sp = STACKTOP;\n STACKTOP = STACKTOP + 16|0; if ((STACKTOP|0) &gt;= (STACK_MAX|0)) abort();\n $vararg_buffer = sp;\n $0 = 0;\n $1 = (_malloc(1234321)|0);\n</code></pre>\n\n<p>The problem being that the call to <code>_malloc</code> references the <em>internal</em> function, not our overridden one. To fix this, we can <strong>edit</strong> <code>a.out.js</code> to add the following two lines at the top of <code>_main()</code>:</p>\n\n<pre><code>function _main() {\n _malloc = asm._malloc;\n _free = asm._free;\n</code></pre>\n\n<p>This replaces the internal properties <code>_malloc</code> and <code>_free</code> with references to <em>public</em> versions held by the <code>asm</code> object (which have been, by now, replaced with our \"wrapped\" versions). Although this might seem somewhat circular, it works (the wrapped versions have already stored a reference to the <em>real</em> <code>malloc</code> function so they still call that, and <em>not</em> the reference we've just overwritten).</p>\n\n<p>If we now re-run the <code>a.out.js</code> file (<em><strong>without</strong></em> rebuilding):</p>\n\n<pre><code>C:\\Program Files\\Emscripten\\Test&gt;node a.out.js\nWrapping malloc/free\n_malloc( 42 )\n&lt;--- 5251080\n_malloc( 5 )\n&lt;--- 5251128\n_malloc( 1234321 )\n&lt;--- 5251144\nHello, world!\n_free( 5251144 )\n&lt;--- undefined\n</code></pre>\n\n<p>We can now see that the original C calls to <code>malloc</code> and <code>free</code> are being traced. While this works, and is easy to apply, the changes will be lost the next time we run <code>emcc</code> so we would have to re-apply the fix every time.</p>\n\n<h3>2b. Hacking the Framework</h3>\n\n<p>Instead of editing the generated <code>a.out.js</code> each time, it is possible to edit a <em>small</em> part of one file in the Emscripten framework to get a \"fix\" that only needs to be applied once.</p>\n\n<blockquote>\n  <p><strong>Warning</strong></p>\n  \n  <p>If you adopt this method keep an original copy of the file to be modified. Also, while I <em>believe</em> my suggested modification to be safe, I have not tested it beyond what was needed for this answer. Use with due caution!</p>\n</blockquote>\n\n<p>The file in question is <code>emscripten\\1.35.0\\emscripten.py</code> off the main installation directory (at least under Windows).  Presumably the middle part of the path will change with different versions of Emscripten. There are two changes needed, probably best shown using the output of the <code>fc</code> command:</p>\n\n<pre><code>C:\\Program Files\\Emscripten\\emscripten\\1.35.0&gt;fc emscripten.py.original emscripten.py\nComparing files emscripten.py.original and EMSCRIPTEN.PY\n***** emscripten.py.original\n    exports = []\n    for export in all_exported:\n***** EMSCRIPTEN.PY\n    exports = []\n    all_exported.append('wrapMallocFree')                 &lt;--- Add this line\n    for export in all_exported:\n*****\n\n***** emscripten.py.original\n// EMSCRIPTEN_START_FUNCS\nfunction stackAlloc(size) {\n***** EMSCRIPTEN.PY\n// EMSCRIPTEN_START_FUNCS\nfunction wrapMallocFree() {                              &lt;--- Add these lines\n  console.log( 'wrapMallocFree()' ) ;                    &lt;--- Add these lines\n  _malloc = asm._malloc ;                                &lt;--- Add these lines\n  _free = asm._free ;                                    &lt;--- Add these lines\n}                                                        &lt;--- Add these lines\nfunction stackAlloc(size) {\n*****\n</code></pre>\n\n<p>In my copy, the first change is at line 680 and the second at line 964. The first change tells the framework to export the function <code>wrapMallocFree</code> from the <code>asm</code> object; the second change defines the function that will be exported. As can be seen, this simply executes the same two lines as we manually edited in section <strong>2a</strong> (along with an entirely optional trace-line, to show the activation has happened).</p>\n\n<p>To make use of this change we also need to un-comment the call to our new function in <code>traceMalloc.js</code> so it reads:</p>\n\n<pre><code>        return result ;\n      }\n      // Hack 2b: invoke semi-permanent code added to emscripten.py\n      asm.wrapMallocFree();        }\n  }\n}\n</code></pre>\n\n<p>Now, we <strong>can</strong> re-build and re-run the code <strong>and</strong> see all calls traced without manual editing of <code>a.out.js</code>:</p>\n\n<pre><code>C:\\Program Files\\Emscripten\\Test&gt;emcc --pre-js traceMalloc.js hello.c\n\nC:\\Program Files\\Emscripten\\Test&gt;node a.out.js\nWrapping malloc/free\nwrapMallocFree()\n_malloc( 42 )\n&lt;--- 5251080\n_malloc( 5 )\n&lt;--- 5251128\n_malloc( 1234321 )\n&lt;--- 5251144\nHello, world!\n_free( 5251144 )\n&lt;--- undefined\n</code></pre>\n\n<p>As the <code>if( true ) ...</code> bit of <code>traceMalloc.js</code> suggests, we can leave the changes to <code>emscripten.py</code> in place and selectively turn on or off tracing of <code>malloc</code> and <code>free</code>. When not used, the only effect is that <code>asm</code> exports one more function (<code>wrapMallocFree</code>) which will never get called. From what I can see of the rest of that file, this should not cause any problem (nothing else will know it's there). Even if your C/C++ code were to contain a function called <code>wrapMallocFree</code>, because such names are prefixed with an underscore (<code>main</code> becomes <code>_main</code> etc.), there should be no clash.</p>\n\n<p>Obviously, should you switch to a different version of Emscripten, you would need to re-apply the same (or similar) changes.</p>\n\n<hr>\n\n<h2>All the Gory Details</h2>\n\n<p>As promised, some details of what's happening with <code>malloc</code> inside Emscripten's generated code.</p>\n\n<h3>Things get 'iffy'</h3>\n\n<p>As noted above, a very large chunk of the generated <code>a.out.js</code> (about 60% for the test program) consists of the creation of an <code>asm</code> object. This code is bracketed by <code>EMSCRIPTEN_START_ASM</code> and <code>EMSCRIPTEN_END_ASM</code> and at a fairly high level looks like:</p>\n\n<pre><code>// EMSCRIPTEN_START_ASM\nvar asm = (function(global, env, buffer) {\n\n   ...\n\n   function _main() {\n      ...\n      $1 = (_malloc(1234321)|0);\n      ...\n   }\n\n   ...\n\n   function _malloc($bytes) {\n      ...\n      return ($mem$0|0);\n   }\n\n   ...\n\n   return { ... _malloc: _malloc, ... };\n})\n// EMSCRIPTEN_END_ASM\n(Module.asmGlobalArg, Module.asmLibraryArg, buffer);\n</code></pre>\n\n<p>The object <code>asm</code> is defined using the <a href=\"https://en.wikipedia.org/wiki/Immediately_invoked_function_expression\" rel=\"nofollow noreferrer\">immediately invoked function expression (IIFE) pattern</a>. Essentially, the whole block defines an anonymous function which is immediately executed. The result of executing that function is what is assigned to the object <code>asm</code>. This execution happens at the time the above code is encountered. The main point of an \"IIFE\" is that variables/functions defined <em>within</em> that anonymous function are only visible to the code within that function. All the \"outside world\" sees is whatever that function returns (which is assigned to <code>asm</code>).</p>\n\n<p>Of interest to us, we see definitions of both <code>_main</code> (converted C code) and <code>_malloc</code> (Emscripten's implementation of a memory allocator). Because of the way JavaScript/IIFEs work, when executing the code in <code>_main</code>, it's call to <code>_malloc</code> will always refer to this internal version of <code>_malloc</code>.</p>\n\n<p>The return value of the IIFE is an object with a number of properties. It so happens that the names of the properties of this object happen to be the <em>same</em> as the names of objects/functions within the anonymous function. While this might appear confusing, no ambiguity is involved. The returned object (assigned to <code>asm</code>) has a property called <code>_malloc</code>. The <em>value</em> of that property is set equal to the <em>value</em> of the internal object <code>_malloc</code> (the definition of a function essentially creates a property/object that references the \"block of code\" that is the body of the function. This reference can be manipulated like all other references).</p>\n\n<h3>Definition of <code>Module</code></h3>\n\n<p>Shortly after the construction we have the following block of code:</p>\n\n<pre><code>var _free = Module[\"_free\"] = asm[\"_free\"];\nvar _main = Module[\"_main\"] = asm[\"_main\"];\nvar _i64Add = Module[\"_i64Add\"] = asm[\"_i64Add\"];\nvar _memset = Module[\"_memset\"] = asm[\"_memset\"];\nvar runPostSets = Module[\"runPostSets\"] = asm[\"runPostSets\"];\nvar _malloc = Module[\"_malloc\"] = asm[\"_malloc\"];\n</code></pre>\n\n<p>For <em>selected</em> properties of the newly-created <code>asm</code> object, this does two things: <strong>(a)</strong> it creates properties in a second object (<code>Module</code>) which reference the same thing as the property of <code>asm</code> does, and <strong>(b)</strong> it creates some global variables which also reference those properties. The global variables are for use by other parts of the Emscripten framework; the <code>Module</code> object is for use by other JavaScript code that might be added to the Emscripten-generated code.</p>\n\n<h3>All Roads Lead to <code>_malloc</code></h3>\n\n<p>At this point, we have the following:</p>\n\n<ul>\n<li><p>There is a block of code, defined within the anonymous function used to create <code>asm</code>, that provides Emscripten's implementation/emulation of C/C++'s <code>_malloc</code> function. This code is the \"real malloc\". It should be noted that this code \"exists\" more-or-less independently of whatever objects/properties (if any) \"reference\" it.</p></li>\n<li><p>There is an internal object of the IIFE called <code>_malloc</code> that <em>currently</em> references the above code. Calls to <code>malloc()</code> made by the original C/C++ code will be made using the value of this object.</p></li>\n<li><p>The object <code>asm</code> has a property called <code>_malloc</code> that <em>also</em> currently references the above block of code.</p></li>\n<li><p>The object <code>Module</code> <em>also</em> has a property called <code>_malloc</code> that currently references the above block of code.</p></li>\n<li><p>There is a global object <code>_malloc</code>. Unsurprisingly, it <em>also</em> references the above block of code.</p></li>\n</ul>\n\n<p>At this point, using <code>_malloc</code> (global-scope), <code>Module._malloc</code> (or <code>Module['_malloc']</code>, <code>asm._malloc</code> or <code>_malloc</code> (within the IIFE used to build <code>asm</code>) will <em><strong>all</strong></em> end up at the same block of code \u2013 the \"real\" implementation of <code>malloc()</code>.</p>\n\n<p>When the following snippet of code is executed (within a <code>function</code> context):</p>\n\n<pre><code>      var real_malloc = _malloc ;\n      Module['_malloc'] = asm['_malloc'] = _malloc = function( size ) {\n        console.log( '_malloc( ' + size + ' )' ) ;\n        var result = real_malloc.apply( null, arguments ) ;\n        console.log( '&lt;--- ' + result ) ;\n        return result ;\n      }\n</code></pre>\n\n<p>then several things happen:</p>\n\n<ul>\n<li><p>A copy of the original value of the (global) object <code>_malloc</code> is made (<code>real_malloc</code>). This, as we saw above, holds a reference to the \"real\" block of code that implements <code>malloc()</code>. While this <em>happens to be the same value</em> as the IIFE-internal object <code>_malloc</code>, there is no connection between the two. If/when the value of the IIFE-internal <code>_malloc</code> is changed, it will <strong>not</strong> affect the value held in <code>real_malloc</code>.</p></li>\n<li><p>A new (anonymous) function is created. It contains a call to the \"real\" implementation of <code>malloc()</code> (using the object <code>real_malloc</code> created above) as well as some log-messages to trace the call.</p></li>\n<li><p>References to this new function are stored in the three \"outside\" objects we mentioned above: <code>_malloc</code> (global-scope), <code>Module._malloc</code> and <code>asm._malloc</code>. The IIFE-internal object <code>_malloc</code> is still left pointing at the \"real implementation\" of <code>malloc()</code>.</p></li>\n</ul>\n\n<p>We are now at the stage the OP got to: <em>external</em> calls to <code>malloc()</code> (made from the Emscripten framework or other bits of JavaScript code) will be funneled through the \"wrapper\" functions and can be traced. Calls made from converted C/C++ code \u2013 which use the IIFE-internal object <code>_malloc</code> \u2013 are still directed to the \"real\" implementation and are not traced.</p>\n\n<p>When the following is executed <em><strong>within the context of the anonymous IIFE function</strong></em>:</p>\n\n<pre><code>_malloc = asm._malloc ;\n</code></pre>\n\n<p>Then (and only then) will the IIFE-internal object <code>_malloc</code> be changed. By the time this is executed, it's new value (<code>asm._malloc</code>) is referencing our \"wrapper\" function. At that point <em><strong>all four</strong></em> variants of the \"references-to-malloc\" are pointing at our \"wrapper\" function. That function still has access (via the variable <code>real_malloc</code>) to the \"real\" implementation of <code>malloc()</code> so now, whenever <em><strong>any</strong></em> part of the code calls <code>malloc()</code>, that call passes through our wrapper function so the call can be traced.</p>\n"}], "owner": {"reputation": 58, "user_id": 4806940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-t7iXyQRaq8o/AAAAAAAAAAI/AAAAAAAACl8/H_JWTMziHQI/photo.jpg?sz=128", "display_name": "deggen", "link": "https://stackoverflow.com/users/4806940/deggen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "accepted_answer_id": 56044038, "answer_count": 1, "score": 2, "last_activity_date": 1557477611, "creation_date": 1557314384, "last_edit_date": 1557316584, "question_id": 56039587, "link": "https://stackoverflow.com/questions/56039587/how-to-override-c-malloc-free-in-javascript-emscripten", "title": "How to override c++ malloc/free in javascript (emscripten)?", "body": "<p>I override the Module._malloc and Module._free in Javascript(emscripten) by wrapping the original function and just adding Console.log to display memory address, size and total allocated memory.</p>\n\n<p>I discovered that the new function only catches Javascript calls to Module._malloc and Module._free, and it does not catch c++ level calls to malloc() and free(). I would like to know why.</p>\n\n<p>Based on Mr. Ofria's answer here <a href=\"https://stackoverflow.com/a/34057348/4806940\">https://stackoverflow.com/a/34057348/4806940</a>, Module._malloc and Module._free are the converted equivalent code of c++'s malloc() and free().</p>\n\n<p>I am using emscripten 1.35.0</p>\n\n<p>Edit: Heres how i wrapped the function in javascript</p>\n\n<pre><code>var _defaultMalloc = Module._malloc;\nvar _defaultFree = Module._free;\n\nvar _totalMemoryUsed = 0;\nvar _mallocTracker = {};\nModule._malloc = function(size) {\n   _totalMemoryUsed += size;\n   var ptr = _defaultMalloc(size)\n   _mallocTracker[ptr] = size;\n\n   console.log(\"MALLOC'd @\" + ptr + \" \" + size + \" bytes -- TOTAL USED \" + _totalMemoryUsed + \" bytes\");\n   return ptr;\n}\n\nModule._free = function(ptr) {\n   var size = _mallocTracker[ptr];\n   _totalMemoryUsed -= size;\n\n   console.log(\"FREE'd @\" + ptr + \" \" + size + \" bytes -- TOTAL USED \" + _totalMemoryUsed + \" bytes\");\n   return _defaultFree(ptr);\n}\n</code></pre>\n"}, {"tags": ["c++", "stb-image"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 3, "creation_date": 1557314252, "post_id": 56039401, "comment_id": 98721146, "body": "Try changing <code>int data[...]</code> to <code>unsigned char data[...]</code> (or better <code>uint8_t</code> from <code>stdint.h</code>). The manual seems to suggest it expects components packed together as bytes (&quot;Each pixel contains &#39;comp&#39; channels of data stored interleaved with 8-bits per channel, in the following order: 1=Y, 2=YA, 3=RGB, 4=RGBA.&quot;)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 3, "creation_date": 1557314286, "post_id": 56039401, "comment_id": 98721164, "body": "I recently answered another question about <code>stbi_write</code>. I believe your mistake is <code>int data[w * h * channels_num];</code> IMHO, it must be <code>unsigned char data[w * h * channels_num];</code>. (The other Q/A: <a href=\"https://stackoverflow.com/a/55760080/7478597\">SO: how can I write pixel color data to a bmp image file with stb_image?</a>) Btw. you are using a <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">VLA</a> which might be supported as extension of your compiler - it&#39;s not standard C++. (Use a <code>std::vector</code> instead.)"}, {"owner": {"reputation": 49, "user_id": 4270469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7e634d47ff9ae75b3f73ceeeca2553?s=128&d=identicon&r=PG&f=1", "display_name": "gui2one", "link": "https://stackoverflow.com/users/4270469/gui2one"}, "edited": false, "score": 0, "creation_date": 1557315434, "post_id": 56039401, "comment_id": 98721806, "body": "Yes !! this was the issue , I changed int data[] to unsigned char data [ ] and that did the trick. Thanks a lot"}], "answers": [{"comments": [{"owner": {"reputation": 552, "user_id": 11038454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118900695ae8e562f696c0dd14feb0d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/11038454/tony"}, "edited": false, "score": 0, "creation_date": 1557314827, "post_id": 56039644, "comment_id": 98721461, "body": "Sorry typo. should be w * sizeof(int). Just changed it."}, {"owner": {"reputation": 49, "user_id": 4270469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7e634d47ff9ae75b3f73ceeeca2553?s=128&d=identicon&r=PG&f=1", "display_name": "gui2one", "link": "https://stackoverflow.com/users/4270469/gui2one"}, "edited": false, "score": 0, "creation_date": 1557315354, "post_id": 56039644, "comment_id": 98721760, "body": "No I think you&#39;re mistaken, this form seems to be for stbi_write_png"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1557315380, "post_id": 56039644, "comment_id": 98721775, "body": "<i>int data[w * h * channels_num]; is ok</i> Really? This is not what I found in the doc. of this function in github: <a href=\"https://github.com/nothings/stb/blob/master/stb_image_write.h\" rel=\"nofollow noreferrer\">stb_image_write.h</a>: <i>Each pixel contains &#39;comp&#39; channels of data stored interleaved with 8-bits per channel</i>. Oops. I just realize that @Botje cited the exact same sentence... ;-)"}], "tags": [], "owner": {"reputation": 552, "user_id": 11038454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118900695ae8e562f696c0dd14feb0d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/11038454/tony"}, "is_accepted": false, "score": 0, "last_activity_date": 1557316431, "last_edit_date": 1557316431, "creation_date": 1557314612, "answer_id": 56039644, "question_id": 56039401, "link": "https://stackoverflow.com/questions/56039401/stb-image-write-issue/56039644#56039644", "title": "stb image write issue", "body": "<p>=============== This part was not accurate. please see my solution part below ====</p>\n\n<p>int data[w * h * channels_num]; is ok, that's not the reason you failed.</p>\n\n<p>Change this line</p>\n\n<pre><code>stbi_write_jpg(\"jpg_test_.jpg\", w, h, channels_num, data, 100);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>stbi_write_jpg(\"jpg_test_.jpg\", w, h, channels_num, data, w * sizeof(int));\n</code></pre>\n\n<p>You will get what you want.\nThe last parameters, I believe it is stride. If so, stride means the offset between two lines. Based on your question, I assume you have 128 X 128 X 32bit color. Then stride will be w * sizeof(int).</p>\n\n<p>If NOT, let me know.</p>\n\n<p>Sorry I was in a hurry to rush to a meeting.</p>\n\n<p><strong>============ This part is the solution part ====</strong></p>\n\n<p>Yes, </p>\n\n<pre><code>int data[w * h * channels_num]; \n</code></pre>\n\n<p>should be </p>\n\n<pre><code>unsigned char data[w * h * channels_num];\n</code></pre>\n\n<p>Plus, </p>\n\n<pre><code>stbi_write_jpg(\"jpg_test_.jpg\", w, h, channels_num, data, 100);\n</code></pre>\n\n<p>should be changed to </p>\n\n<pre><code>stbi_write_jpg(\"jpg_test_.jpg\", w, h, channels_num, data, w * channels_num);\n</code></pre>\n\n<p>Full solution</p>\n\n<pre><code>void save_image(int w, int h, int channels_num)\n{\n    unsigned char data[w * h * channels_num];\n\n    int index = 0;\n    for (int j = h - 1; j &gt;= 0; --j)\n    {\n        for (int i = 0; i &lt; w; ++i)\n        {\n            data[index++] = (unsigned char)(255.0 * i / w);\n            data[index++] = (unsigned char)(255.0 * j / h);\n            data[index++] = (unsigned char)(255.0 * 0.2);\n        }\n    }\n\n    stbi_write_jpg(\"jpg_test_.jpg\", w, h, channels_num, data, w * channels_num);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 4270469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7e634d47ff9ae75b3f73ceeeca2553?s=128&d=identicon&r=PG&f=1", "display_name": "gui2one", "link": "https://stackoverflow.com/users/4270469/gui2one"}, "is_accepted": false, "score": 1, "last_activity_date": 1557315641, "creation_date": 1557315641, "answer_id": 56039984, "question_id": 56039401, "link": "https://stackoverflow.com/questions/56039401/stb-image-write-issue/56039984#56039984", "title": "stb image write issue", "body": "<p>The question was answered in the comments. \nI had to replace : \n int data[]\nby : \n unsigned char data[];</p>\n"}], "owner": {"reputation": 49, "user_id": 4270469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7e634d47ff9ae75b3f73ceeeca2553?s=128&d=identicon&r=PG&f=1", "display_name": "gui2one", "link": "https://stackoverflow.com/users/4270469/gui2one"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4371, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557316431, "creation_date": 1557313821, "last_edit_date": 1557313896, "question_id": 56039401, "link": "https://stackoverflow.com/questions/56039401/stb-image-write-issue", "title": "stb image write issue", "body": "<p>I am trying to write a simple image file to disk using stb_image_write.\nI use the simplest test case : a 128 by 128 pixels RGB image.</p>\n\n<p>I found this example online, and the guy seems to say that it works fine, plus it looks exactly like what I have been writing for 2 hours : </p>\n\n<pre><code>void save_image(int w, int h, int channels_num)\n{\n\n    int data[w * h * channels_num];\n\n     int index = 0;\n     for (int j = h - 1; j &gt;= 0; --j)\n     {\n      for (int i = 0; i &lt; w; ++i)\n      {\n       float r = (float)i / (float)w;\n       float g = (float)j / (float)h;\n       float b = 0.2f;\n       int ir = int(255.0 * r);\n       int ig = int(255.0 * g);\n       int ib = int(255.0 * b);\n\n       data[index++] = ir;\n       data[index++] = ig;\n       data[index++] = ib;\n      }\n     }\n\n    stbi_write_jpg(\"jpg_test_.jpg\", w, h, channels_num, data, 100);\n}\n\nsave_image(128, 128, 3);\n\n</code></pre>\n\n<p>The result should be a nice color gradient, but all I can get is a valid file with some vertical red, green, blue and black lines. Dimensions of the image are ok though.\nI really don't find the solution here.\nI am on linux Jessie. Could there be 'endianess' issue or something like that?</p>\n"}, {"tags": ["c++", "std-function"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1557314286, "post_id": 56039381, "comment_id": 98721165, "body": "What&#39;s inside &quot;//...stuff to keep track of number of transitions and add transition to the list&quot;? Please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 5, "creation_date": 1557314522, "post_id": 56039381, "comment_id": 98721294, "body": "I had a quick look in your repo and spotted that <code>realloc</code> was hiding behind that comment. Don&#39;t use C&#39;s memory management in C++; it does not agree with object construction and destruction. Take your own word for it - &quot;All this manual memory management seems silly&quot; - and use <code>std::vector</code>. (I&#39;m not posting this as an answer because I&#39;m not sure that it is.)"}, {"owner": {"reputation": 97, "user_id": 8807512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16411b2f860f2c383e81cbd1e4832b15?s=128&d=identicon&r=PG&f=1", "display_name": "JRVeale", "link": "https://stackoverflow.com/users/8807512/jrveale"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1557314818, "post_id": 56039381, "comment_id": 98721454, "body": "Thanks @molbdnilo, I had the same thought when you asked me what was hidden. I&#39;ve updated the question accordingly. I&#39;ll see if it works with <code>std::vector</code>s and post an answer if it does."}, {"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1557315115, "post_id": 56039381, "comment_id": 98721623, "body": "Can you run it with a debugger, so you could post a stacktrace and the thrown exception/ the error message?"}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 8807512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16411b2f860f2c383e81cbd1e4832b15?s=128&d=identicon&r=PG&f=1", "display_name": "JRVeale", "link": "https://stackoverflow.com/users/8807512/jrveale"}, "is_accepted": false, "score": 0, "last_activity_date": 1557317822, "creation_date": 1557317822, "answer_id": 56040612, "question_id": 56039381, "link": "https://stackoverflow.com/questions/56039381/run-time-exceptions-when-using-stdfunctions-why-do-they-not-point-to-valid-co/56040612#56040612", "title": "Run-time exceptions when using std::functions. Why do they not point to valid code?", "body": "<p>Big thank you to @molbdnilo for reminding me to create Minimal, Complete, and Verifiable examples and pointing out the likely cause, which is now confirmed.</p>\n\n<p>It turns out the issue was with the use of a Transition pointer and <code>realloc</code> to keep a list of the fsm's transitions in a very C way rather than using a <code>std::vector&lt;Transition&gt;</code> (much more C++). I'd flagged this initially as poor practice, but hadn't considered the effect it may have had.</p>\n\n<p>I haven't gone into understanding the full details of why using <code>realloc</code> has messed up my <code>std::function</code>s, but I can certainly see the vagueries of where this issue comes from.</p>\n\n<p>Having updated the library to use a <code>std::vector</code> instead, everything works perfectly.</p>\n\n<p>If anyone would like to provide a real explanation of the issue with using <code>realloc</code> in this case I'd be very interested to hear it! (I'd certainly mark it as an answer!)</p>\n"}], "owner": {"reputation": 97, "user_id": 8807512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16411b2f860f2c383e81cbd1e4832b15?s=128&d=identicon&r=PG&f=1", "display_name": "JRVeale", "link": "https://stackoverflow.com/users/8807512/jrveale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1557317822, "creation_date": 1557313728, "last_edit_date": 1557314675, "question_id": 56039381, "link": "https://stackoverflow.com/questions/56039381/run-time-exceptions-when-using-stdfunctions-why-do-they-not-point-to-valid-co", "title": "Run-time exceptions when using std::functions. Why do they not point to valid code?", "body": "<p>I am working on putting together a library to enable easy implementation of Finite State Machines.</p>\n\n<p>My library is based upon <a href=\"https://github.com/jonblack/arduino-fsm\" rel=\"nofollow noreferrer\">arduino-fsm</a>, a library that achieves this by defining Fsm, State and Transition objects. arduino-fsm uses raw function pointers to set the functions that States and Transitions will call (functions that cover what to do when: entering a state, in a state, exiting a state, making a particular state transition). This library allows very intuitive state machine definition. However, it's use of raw function pointers means that an Fsm can't usefully be an instance variable of an object (raw function pointers can't point to non-static member functions, and static member functions can't access instance variables - making it impossible to have multiple different parent objects of the same class running different instances of the same Fsm.</p>\n\n<p>My implementation replaces the use of raw function pointers with <code>std::function</code>s to define the States' and Transitions' functions in order to allow this (following answers to <a href=\"https://stackoverflow.com/questions/55513790/understanding-error-with-taking-address-of-non-static-member-to-form-pointer-to\">this question</a>).</p>\n\n<p>I appear to be falling at the first hurdle, however. I'm having runtime exceptions that my stack backtrace shows are due to my <code>std::function</code>s not pointing to valid code (<a href=\"https://docs.espressif.com/projects/esp-idf/en/latest/api-guides/fatal-errors.html#instrfetchprohibited\" rel=\"nofollow noreferrer\">reference</a>). I can't figure out why this is happening though.</p>\n\n<p>The full code is <a href=\"https://github.com/JRVeale/arduino-fsm/tree/use-std-functions/function-fsm-example\" rel=\"nofollow noreferrer\">here</a>, but I'll attempt to describe the code in short and the issue more clearly below.</p>\n\n<hr>\n\n<p>The library defines the struct FunctionState and class FunctionFsm (FunctionFsm also defines the struct Transition).</p>\n\n<p>FunctionState holds three <code>std::function</code>s called <code>on_enter</code>, <code>on_state</code> and <code>on_exit</code>. The functions they point to are called whenever the FunctionState is first entered, is active and is left, respectively.</p>\n\n<p>FunctionFsm has functions to setup the fsm's transitions, to run the state machine, and to trigger transitions between states. It tracks the current state, and keeps a list of Transitions that define the state machine.</p>\n\n<p>Transitions hold pointers to the state they move from and the state they move to, and 'event' integer (which allows particular Transitions to be triggered) and a std::function that points to a function to be called in that transition (after the first state's exit function is called).</p>\n\n<p>In all, <code>std::function</code>s are used to tell each state what it's three functions are and to tell transitions what function it should use. (If no action is required for any particular state function or transition, the <code>std::function</code> may be set to <code>nullptr</code> - and the library will handle it appropriately.)</p>\n\n<hr>\n\n<p>My simple example appears to fail in the fsm's setup, when it defines the first transition for the state machine.</p>\n\n<p>Important bits from FunctionFsm in the library:</p>\n\n<pre><code>struct Transition {\n  FunctionState* state_from;\n  FunctionState* state_to;\n  int event;\n  std::function&lt;void()&gt; on_transition;\n};\n\nTransition create_transition(FunctionState* state_from,\n                             FunctionState* state_to,\n                             int event,\n                             std::function&lt;void()&gt; on_transition){\n  Transition t;\n  t.state_from = state_from;\n  t.state_to = state_to;\n  t.event = event;\n  t.on_transition = on_transition;\n\n  return t;\n}\n\nvoid add_transition(FunctionState* state_from,\n                    FunctionState* state_to,\n                    int event,\n                    std::function&lt;void()&gt; on_transition){\n  if(state_from == NULL || state_to == NULL) return;\n\n  Transition transition = FunctionFsm::create_transition(state_from,\n                                                         state_to,\n                                                         event,\n                                                         on_transition);\n  //stuff to keep track of number of transitions and add transition to the list\n  //m_transitions is just a Transition*, manual memory management copied\n  //like-for-like from arduino-fsm (which doesn't use stdlib features)\n  m_transitions = (Transition*) realloc (m_transitions,\n                                         (m_num_transitions + 1)\n                                          * sizeof(Transition));\n  m_transitions[m_num_transitions] = transition;\n  m_num_transitions++;\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>char a = 'a';\nchar b = 'b';\n\n//state functions\nvoid a_on_enter(){ Serial.print(\"Entering a: \"); }\nvoid a_on(){ Serial.print(a); }\nvoid a_on_exit(){ Serial.println(\" - exitting a. \"); }\nvoid a_on_trans_b(){ Serial.println(\"Moving from a to b.\"); }\n\nvoid b_on_enter(){ Serial.print(\"Entering b: \"); }\nvoid b_on(){ Serial.print(b); }\nvoid b_on_exit(){ Serial.println(\" - exitting b. \"); }\nvoid b_on_trans_a(){ Serial.println(\"Moving from b to a.\"); }\n\n//states\nFunctionState state_a(&amp;a_on_enter, &amp;a_on, &amp;a_on_exit);\nFunctionState state_b(&amp;b_on_enter, &amp;b_on, &amp;b_on_exit);\n\n//fsm    \nFunctionFsm fsm(&amp;state_a);  //state_a is initial state\n\n//...\n\n//add transitions\nfsm.add_transition(&amp;state_a, &amp;state_b, TOGGLE_SWITCH, &amp;a_on_trans_b);//crashes here\nfsm.add_transition(&amp;state_b, &amp;state_a, TOGGLE_SWITCH, &amp;b_on_trans_a);\n\n//... code to run fsm, and trigger transitions as appropriate (hasn't had a chance to run yet)\n</code></pre>\n\n<p>I note that the crash is occurring on the first attempt to give a std::function a value, which shows that I'm handling it wrong somewhere in the library functions... But I really can't understand it. I don't think the function itself has been called anywhere, it's just that a std::function has assigned it?</p>\n\n<p>The error itself is certainly <a href=\"https://docs.espressif.com/projects/esp-idf/en/latest/api-guides/fatal-errors.html#instrfetchprohibited\" rel=\"nofollow noreferrer\">this</a> (as my microcontroller tells me it is) - I just can't figure out why...</p>\n\n<p>I had wondered if I was asking too much of implicit conversion by providing functions that called for <code>std::function&lt;void()&gt;</code> with raw function pointers, but my testing shows no improvement if I explicitly create std::functions and then pass those instead.</p>\n\n<p>I also worried about whether I'm passing my functions by reference or by value, but I don't think that makes a difference here either.</p>\n\n<hr>\n\n<p>If anyone with more experience using <code>std::function</code> has any helpful suggestions, I'd be really grateful. I'm quite stuck and don't know how to move forward from here.</p>\n"}, {"tags": ["c++", "stdmap", "std-pair", "emplace"], "owner": {"reputation": 1356, "user_id": 605794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b7c58a37507632eb1d31120a0818ab39?s=128&d=identicon&r=PG", "display_name": "greenback", "link": "https://stackoverflow.com/users/605794/greenback"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1557313690, "creation_date": 1557313690, "question_id": 56039366, "link": "https://stackoverflow.com/questions/56039366/map-emplace-with-value-having-private-constructor-results-in-c2664-vc-12-0-c", "title": "Map emplace with value having private constructor results in C2664 (VC 12.0; C++11)", "body": "<p>The following code compiles without error in Visual Studio 2015 (VC 14.0; C++14):</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;map&gt;\n#include &lt;memory&gt;\n\nclass Caller;\nclass SomeClass\n{\nprivate:\n    friend class Caller;\n\n    SomeClass(std::string&amp; arg1, std::string&amp; arg2)\n    :\n    m_arg1(arg1),\n    m_arg2(arg2)\n    { }\n\n    std::string m_arg1;\n    std::string m_arg2;\n};\n\ntypedef std::shared_ptr&lt;SomeClass&gt; SomeClassPtr;\n\nclass Caller\n{\npublic:\n    void PopulateMap()\n    {\n        std::string key(\"test\");\n        m_map.emplace(key, new SomeClass { std::string(\"1\"), std::string(\"2\") });\n    }\n\nprivate:\n    std::map&lt;std::string, SomeClassPtr&gt; m_map;\n};\n\nint main()\n{\n    Caller caller;\n    caller.PopulateMap();\n    return 0;\n}\n</code></pre>\n\n<p>However, downgrading to Visual Studio 2013 (VC 12.0; C++11) results in C2664:</p>\n\n<pre><code>c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\xmemory0(600): error C2664: 'std::pair&lt;const _Kty,_Ty&gt;::pair(const std::pair&lt;const _Kty,_Ty&gt; &amp;)' : cannot convert argument 2 from 'SomeClass *' to 'const SomeClassPtr &amp;'\n1&gt;          with\n1&gt;          [\n1&gt;              _Kty=std::string\n1&gt;  ,            _Ty=SomeClassPtr\n1&gt;          ]\n1&gt;          Reason: cannot convert from 'SomeClass *' to 'const SomeClassPtr'\n1&gt;          Constructor for class 'std::shared_ptr&lt;SomeClass&gt;' is declared 'explicit'\n...\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/43434691/stdmap-emplace-fails-with-explicit-constructor\">This post</a> suggests that the problem is that the value argument to std::pair is not explicitly constructable.</p>\n\n<p>The workaround is to forward the arguments as follows:</p>\n\n<pre><code>m_map.emplace(std::piecewise_construct,\n    std::forward_as_tuple(key),\n    std::forward_as_tuple(new SomeClass(std::string(\"1\"), std::string(\"2\"))));\n</code></pre>\n\n<p>I now understand why the VC 12.0 example fails, but what part of the standard is being exploited in the original (VC 14.0) example for it to compile? </p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B#32-bit_and_64-bit_versions\" rel=\"nofollow noreferrer\">Wikipedia</a> says Visual Studio 2015 has \"improved support\" for C++ 14/17:\n<a href=\"https://devblogs.microsoft.com/cppblog/c111417-features-in-vs-2015-rtm/\" rel=\"nofollow noreferrer\">https://devblogs.microsoft.com/cppblog/c111417-features-in-vs-2015-rtm/</a></p>\n"}, {"tags": ["c++", "validation", "c++11", "templates"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557313421, "post_id": 56039230, "comment_id": 98720673, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the problem as required here."}, {"owner": {"reputation": 21, "user_id": 2013904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c77f5396c4ba3f6a33b96718788ea3?s=128&d=identicon&r=PG", "display_name": "user2013904", "link": "https://stackoverflow.com/users/2013904/user2013904"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1557313897, "post_id": 56039230, "comment_id": 98720970, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I&#39;ve added when I call the function, is this now satisfactory?"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1557314267, "post_id": 56039230, "comment_id": 98721153, "body": "I don&#39;t understand this use case. Is it always <code>T == string</code> or can <code>T</code> be something different?"}, {"owner": {"reputation": 21, "user_id": 2013904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c77f5396c4ba3f6a33b96718788ea3?s=128&d=identicon&r=PG", "display_name": "user2013904", "link": "https://stackoverflow.com/users/2013904/user2013904"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1557314382, "post_id": 56039230, "comment_id": 98721211, "body": "@ThomasSablik T could be an integer or double for example"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1557314440, "post_id": 56039230, "comment_id": 98721252, "body": "not sure if this actually is the question, but you do not need the unused parameter, you just cannot use template parameter deduction then, you&#39;d need to call it as <code>check_input&lt;string&gt;(&quot;please enter the name&quot;);</code>"}, {"owner": {"reputation": 21, "user_id": 2013904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c77f5396c4ba3f6a33b96718788ea3?s=128&d=identicon&r=PG", "display_name": "user2013904", "link": "https://stackoverflow.com/users/2013904/user2013904"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1557314719, "post_id": 56039230, "comment_id": 98721403, "body": "@user463035818 Yeah I have now implemented this thanks to the user melpomene&#39;s answer"}], "answers": [{"comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1557314104, "post_id": 56039434, "comment_id": 98721074, "body": "You can also <code>auto exp_name = check_input&lt;decltype(model_type)&gt;(&quot;Please enter the experiment name:&quot;);</code>"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1557314162, "last_edit_date": 1557314162, "creation_date": 1557313961, "answer_id": 56039434, "question_id": 56039230, "link": "https://stackoverflow.com/questions/56039230/using-template-function-for-generic-input-validation/56039434#56039434", "title": "Using template function for generic input validation", "body": "<blockquote>\n  <p>which throws an error: 'input': undeclared identifier</p>\n</blockquote>\n\n<p>That's because <code>input</code> is defined inside the loop, but your code tries to use it outside (<code>return input;</code>).</p>\n\n<p>Possible fix:</p>\n\n<pre><code>    for (;;)\n    {\n        cout &lt;&lt; message &lt;&lt; endl;\n        T input;\n        if (cin &gt;&gt; input) {\n            return input;\n        }\n        // handle input errors\n        ...\n    }\n</code></pre>\n\n<blockquote>\n  <p>Will having the unused model parameter force the input variable to be of the same type?</p>\n</blockquote>\n\n<p>Yes. There is only a single <code>T</code> template parameter, so each instantiation of <code>check_input</code> will use the same type for its first argument and return value.</p>\n\n<p>Template type deduction will use the type of the first argument to determine <code>T</code>.</p>\n\n<blockquote>\n  <p>(also is this bad programming practice to have an unused parameter?)</p>\n</blockquote>\n\n<p>Yes. You could just leave it out and call the function as </p>\n\n<pre><code>auto exp_name = check_input&lt;string&gt;(\"Please enter the experiment name:\");\n</code></pre>\n\n<p>Instead of relying on type deduction from an (otherwise unused) argument, just have the user pass the type directly.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1557314286, "creation_date": 1557314286, "answer_id": 56039542, "question_id": 56039230, "link": "https://stackoverflow.com/questions/56039230/using-template-function-for-generic-input-validation/56039542#56039542", "title": "Using template function for generic input validation", "body": "<p>You return <code>input</code> outside of the <code>for</code> loops scope, while you are declaring it inside.</p>\n\n<p>Just move the declartion outside of the loop.  </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nT check_input(T model_input, string message)\n{\n    T input; // will it make the input type the same type as model input used in the arg?\n    for (;;)\n    {\n        cout &lt;&lt; message &lt;&lt; endl;\n        cin &gt;&gt; input;\n        // if valid input then for loop breaks\n        if (cin.fail())\n        {\n            // prompts that there was an error with the input and then loops again\n            cin.clear();\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n            cout &lt;&lt; \"Invalid input, please try again\" &lt;&lt; endl;\n        }\n        else\n        {\n            break;\n        }\n    }\n    return input; \n}\n\nint main () \n{\n    string model_type = \"exp\";\n    string exp_name = check_input(model_type, \"Please enter the experiment name:\");\n}\n</code></pre>\n\n<p>See live demo <a href=\"http://coliru.stacked-crooked.com/a/659f82ae8c4ccfda\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 21, "user_id": 2013904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c77f5396c4ba3f6a33b96718788ea3?s=128&d=identicon&r=PG", "display_name": "user2013904", "link": "https://stackoverflow.com/users/2013904/user2013904"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 56039434, "answer_count": 2, "score": -1, "last_activity_date": 1557314310, "creation_date": 1557313246, "last_edit_date": 1557314310, "question_id": 56039230, "link": "https://stackoverflow.com/questions/56039230/using-template-function-for-generic-input-validation", "title": "Using template function for generic input validation", "body": "<p>I want to create a function that will loop until a user enters the correct input type. I'm new to using templates, but I imagine if I want to validate a general type then a template function would be the correct tool to use. I want the function to keep asking the user to enter an input until the type matches the model type.</p>\n\n<p>So this is my attempt so far (which throws an error: 'input': undeclared identifier)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>using namespace std;\n\ntemplate &lt;typename T&gt;\nT check_input(T model_input, string message)\n{\n    for (;;)\n    {\n        cout &lt;&lt; message &lt;&lt; endl;\n        T input; // will it make the input type the same type as model input used in the arg?\n        cin &gt;&gt; input;\n        // if valid input then for loop breaks\n        if (cin.fail())\n        {\n            // prompts that there was an error with the input and then loops again\n            cin.clear();\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n            cout &lt;&lt; \"Invalid input, please try again\" &lt;&lt; endl;\n        }\n        else\n        {\n            break;\n        }\n    }\n    return input; \n}\n</code></pre>\n\n<p>usage:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>string model_type = \"exp\";\nstring exp_name = check_input(model_type, \"Please enter the experiment name:\");\n\n</code></pre>\n\n<p>Will having the unused model parameter force the input variable to be of the same type?\n(also is this bad programming practice to have an unused parameter?)</p>\n\n<p>Is there a more elegant way to write a general validation check loop?</p>\n\n<p>EDIT: Why is the undeclared identifier error occurring on line with \"return input;\"?</p>\n"}, {"tags": ["c++", "3d", "computational-geometry", "mesh", "cgal"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 3841173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715c8adccff22da52270aa0d3734909e?s=128&d=identicon&r=PG&f=1", "display_name": "Mael", "link": "https://stackoverflow.com/users/3841173/mael"}, "is_accepted": true, "score": 1, "last_activity_date": 1559634530, "last_edit_date": 1559634530, "creation_date": 1557735045, "answer_id": 56108160, "question_id": 56039040, "link": "https://stackoverflow.com/questions/56039040/how-can-i-simplify-a-specific-region-of-3d-mesh-using-cgal/56108160#56108160", "title": "how can I simplify a specific region of 3d mesh using CGAL", "body": "<p>You can constrain some edges such that they will not be removed by passing an edge --> bool map in argument.</p>\n\n<p>See the named parameter is_constrained_edge_map in the <a href=\"https://doc.cgal.org/latest/Surface_mesh_simplification/group__PkgSurfaceMeshSimplificationRef.html#ga5f51d0ea2897f3c22e870279cfb4bd41\" rel=\"nofollow noreferrer\">documentation of the edge_collapse() function</a> and <a href=\"https://doc.cgal.org/latest/Surface_mesh_simplification/Surface_mesh_simplification_2edge_collapse_constrain_sharp_edges_8cpp-example.html\" rel=\"nofollow noreferrer\">this CGAL example</a> for an example of usage. In your case, you would just loop over the edges of your regions and constrain them.</p>\n"}], "owner": {"reputation": 70, "user_id": 3019180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33cfb4eb3d17c228279d1f786a124fb?s=128&d=identicon&r=PG&f=1", "display_name": "user3019180", "link": "https://stackoverflow.com/users/3019180/user3019180"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 56108160, "answer_count": 1, "score": 1, "last_activity_date": 1559634530, "creation_date": 1557312711, "question_id": 56039040, "link": "https://stackoverflow.com/questions/56039040/how-can-i-simplify-a-specific-region-of-3d-mesh-using-cgal", "title": "how can I simplify a specific region of 3d mesh using CGAL", "body": "<p>I'm using CGAL <a href=\"https://doc.cgal.org/4.13.1/Surface_mesh_simplification/classEdgeCollapseSimplificationVisitor.html\" rel=\"nofollow noreferrer\">Surface Mesh Simplification</a> to simplify 3d mesh from .off file was read as Linear_cell_complex_for_combinatorial_map and undo the edges collapsing (simplification) using  <a href=\"https://github.com/afabri/cgal/blob/SMS-undo_example-GF/Surface_mesh_simplification/examples/Surface_mesh_simplification/undo_edge_collapse_surface_mesh.cpp\" rel=\"nofollow noreferrer\">undo_edge_collapse_surface_mesh</a>.</p>\n\n<p>How to do the simplification and undo processes within specific selected region on the mesh. </p>\n\n<p>any recommendations ,please?</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557311749, "post_id": 56038727, "comment_id": 98719685, "body": "What language is this? <code>main()</code> without a return type is C89, in which things like <code>#include &lt;iostream&gt;</code> don&#39;t exist."}, {"owner": {"reputation": 1, "user_id": 11286320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6681c30aa66ed2be559d4cff662d5f45?s=128&d=identicon&r=PG&f=1", "display_name": "Gaia", "link": "https://stackoverflow.com/users/11286320/gaia"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557311791, "post_id": 56038727, "comment_id": 98719705, "body": "Oh It&#39;s C++ sorry for not mentiong that"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557311823, "post_id": 56038727, "comment_id": 98719732, "body": "In C++ you should use <code>int main()</code>."}, {"owner": {"reputation": 1, "user_id": 11286320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6681c30aa66ed2be559d4cff662d5f45?s=128&d=identicon&r=PG&f=1", "display_name": "Gaia", "link": "https://stackoverflow.com/users/11286320/gaia"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557311863, "post_id": 56038727, "comment_id": 98719758, "body": "Okay now there is int main() but the error is still there"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557312183, "post_id": 56038727, "comment_id": 98719937, "body": "What compiler are you using? Which version?"}, {"owner": {"reputation": 1, "user_id": 11286320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6681c30aa66ed2be559d4cff662d5f45?s=128&d=identicon&r=PG&f=1", "display_name": "Gaia", "link": "https://stackoverflow.com/users/11286320/gaia"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1557312215, "post_id": 56038727, "comment_id": 98719959, "body": "I&#39;m using Dev-C++ 5.9.2"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1557312291, "post_id": 56038727, "comment_id": 98720002, "body": "@CappellatoMatteo That&#39;s an IDE not a compiler."}, {"owner": {"reputation": 181, "user_id": 5788871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60a6f7e364aa9dad313b3e3af69a22eb?s=128&d=identicon&r=PG&f=1", "display_name": "An\u017ee ", "link": "https://stackoverflow.com/users/5788871/an%c5%bee"}, "edited": false, "score": 0, "creation_date": 1557312301, "post_id": 56038727, "comment_id": 98720004, "body": "I don&#39;t think ScambioMappa does what you wanted it to do. Currently it just copies out of range ([g][g]) element into out of range element ;) Also <code>bool MatriceA[g][g]</code> doesn&#39;t look like a proper signature to me."}, {"owner": {"reputation": 970, "user_id": 436315, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e9904c972d63e5323131a2c50e757975?s=128&d=identicon&r=PG", "display_name": "Jim Grant", "link": "https://stackoverflow.com/users/436315/jim-grant"}, "edited": false, "score": 0, "creation_date": 1557312395, "post_id": 56038727, "comment_id": 98720062, "body": "I&#39;ve noticed that you are assigning the variable <code>g</code> to 20 but then overwriting this with user input, but then throughout the code, treating it as though it still has a value of 20 in it! I presume the locally declared <code>g</code> will override the globally assigned <code>g</code> which means if someone enters the value of 10, then most of your code will be writing to memory that isn&#39;t part of the array."}, {"owner": {"reputation": 181, "user_id": 5788871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60a6f7e364aa9dad313b3e3af69a22eb?s=128&d=identicon&r=PG&f=1", "display_name": "An\u017ee ", "link": "https://stackoverflow.com/users/5788871/an%c5%bee"}, "edited": false, "score": 0, "creation_date": 1557312703, "post_id": 56038727, "comment_id": 98720247, "body": "Also this might be useful post if you are copying the array: <a href=\"https://stackoverflow.com/questions/3699152/what-is-the-fastest-portable-way-to-copy-an-array-in-c\" title=\"what is the fastest portable way to copy an array in c\">stackoverflow.com/questions/3699152/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "is_accepted": false, "score": 3, "last_activity_date": 1557312756, "creation_date": 1557312756, "answer_id": 56039057, "question_id": 56038727, "link": "https://stackoverflow.com/questions/56038727/i-cannot-convert-a-2d-array-whit-bool-to-a-void-2d-array-boolfor-game-of-li/56039057#56039057", "title": "I cannot convert a &#39;2D array whit bool&#39; to a &#39;void 2D array bool&#39;(for game of life)", "body": "<p><strong>TL;DR</strong>: your code is ill-formed.\nYour compiler accepts some ill-formed parts of your code as an extension,\nbut that in turn triggers other ill-formed constructs.</p>\n\n<hr>\n\n<p>Your code included the following line:</p>\n\n<pre><code>const int g = 20;\n</code></pre>\n\n<p>Later, in the <code>main</code> function, your code included the following line:</p>\n\n<pre><code>int g;\n</code></pre>\n\n<p>The latter <em>shadows</em> the former.\nThen you attempted to declare an array:</p>\n\n<pre><code>bool MatriceA[g][g];\n</code></pre>\n\n<p>In C++,\nthe dimension of an array shall be a constant expression.\nHere, <code>g</code> is a variable that is not a constant expression.\nVariable-length arrays are not permitted in C++.\nTherefore,\nyour code is ill-formed.</p>\n\n<hr>\n\n<p>Since you are using the Dev-C++ <em>IDE</em>,\nyou are probably using the GCC <em>compiler</em>. \nGCC accepts variable-length arrays as an extension.\nBut then, you code doesn't compile either.</p>\n\n<p>Your functions accept <code>bool MatriceA[g][g]</code> as a function parameter.\nAt that time, <code>const int g = 20;</code> is in effect.\nTherefore, your function parameter is really <code>bool MatriceA[20][20]</code>,\nwhich is really <code>bool (*MatriceA)[20]</code> because of function parameter decay\n(see the Stack Overflow question <a href=\"https://stackoverflow.com/q/1461432\">What is array decaying?</a>).</p>\n\n<p>Then you are calling the function with a variable-length array.\nThis is not allowed.\nTherefore, your code is rejected.</p>\n"}, {"tags": [], "owner": {"reputation": 1247, "user_id": 388398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9bd10eedb6c17c1604a7cadefed6b02?s=128&d=identicon&r=PG", "display_name": "Jon Guiton", "link": "https://stackoverflow.com/users/388398/jon-guiton"}, "is_accepted": false, "score": 0, "last_activity_date": 1557312893, "creation_date": 1557312893, "answer_id": 56039105, "question_id": 56038727, "link": "https://stackoverflow.com/questions/56038727/i-cannot-convert-a-2d-array-whit-bool-to-a-void-2d-array-boolfor-game-of-li/56039105#56039105", "title": "I cannot convert a &#39;2D array whit bool&#39; to a &#39;void 2D array bool&#39;(for game of life)", "body": "<p>You are calling your function cambiotoMappa with two parameters, MatriceA and MatriceB</p>\n\n<pre><code>cambiamentoMappa(MatriceA, MatriceB);         /* Two actual parameters */\n</code></pre>\n\n<p>But your function accepts only one parameter</p>\n\n<pre><code>void cambiamentoMappa(bool MatriceA[g][g])    /* One formal parameter */\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11286320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6681c30aa66ed2be559d4cff662d5f45?s=128&d=identicon&r=PG&f=1", "display_name": "Gaia", "link": "https://stackoverflow.com/users/11286320/gaia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1557320729, "creation_date": 1557311682, "last_edit_date": 1557320729, "question_id": 56038727, "link": "https://stackoverflow.com/questions/56038727/i-cannot-convert-a-2d-array-whit-bool-to-a-void-2d-array-boolfor-game-of-li", "title": "I cannot convert a &#39;2D array whit bool&#39; to a &#39;void 2D array bool&#39;(for game of life)", "body": "<p>When I put my functions inside the main it say that:\n73  44  C:\\Users\\Gaia\\OneDrive\\Documents\\Gameoflife.cpp [Error] cannot convert 'bool (<em>)[g]' to 'bool (</em>)[20]' for argument '1' to 'void cambiamentoMappa(bool (<em>)[20])'\n74  39  C:\\Users\\Gaia\\OneDrive\\Documents\\Gameoflife.cpp [Error] cannot convert 'bool (</em>)[g]' to 'bool (<em>)[20]' for argument '1' to 'void ScambioMappa(bool (</em>)[20], bool (*)[20])'</p>\n\n<p>I've searched up this error but found nothing and I haven't learned how to fix this in school</p>\n\n<p>It should launch and start showing the Game of Life map evolving</p>\n"}, {"tags": ["c++", "std", "c++17"], "comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 2, "creation_date": 1557312069, "post_id": 56038711, "comment_id": 98719873, "body": "What is the type of <code>t</code>? <code>void</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1557318172, "post_id": 56038762, "comment_id": 98723285, "body": "You could place the result in a variant of all possible return types and respect the type system."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1557318234, "post_id": 56038762, "comment_id": 98723332, "body": "@rubenvb And what would you do with said variant? Perhaps use some kind of visitor to access its value? Erm..."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 1, "creation_date": 1557319833, "post_id": 56038762, "comment_id": 98724313, "body": "Yes perhaps. Depending on the operation. It&#39;s a functional transformation or reduction in a sense."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1557311814, "creation_date": 1557311814, "answer_id": 56038762, "question_id": 56038711, "link": "https://stackoverflow.com/questions/56038711/why-must-stdvisit-have-a-single-return-type/56038762#56038762", "title": "Why must std::visit have a single return type?", "body": "<p>Although each \"implementation\" is a different overload, and could thus have a different return type, at some point you will need a common point of access and that common point of access will need a single return type, because the selected variant type is only known at runtime.</p>\n\n<p>It is common convention with a visitor to perform that logic inside the <code>visit</code> code; indeed, the very purpose of <code>std::visit</code> is to do all that magic for you and abstract away the runtime type switching.</p>\n\n<p>Otherwise, you would basically be stuck reimplementing <code>std::visit</code> at the callsite.</p>\n\n<p>It's tempting to think that this could all be fixed using templates: after all, you've used generic lambdas so all these overloads are autonomously instantiated, so why can't the return type just be \"known\"? Again, it's only known at runtime, so that's no good to ya. There must be some static way of delivering the visitation result to the callsite.</p>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 8, "last_activity_date": 1557315127, "last_edit_date": 1592644375, "creation_date": 1557314709, "answer_id": 56039676, "question_id": 56038711, "link": "https://stackoverflow.com/questions/56038711/why-must-stdvisit-have-a-single-return-type/56039676#56039676", "title": "Why must std::visit have a single return type?", "body": "<p>The return type of <code>std::visit</code> depends only on the types of the visitor and the variant passed to it. That's simply how the C++ type system works.</p>\n<p>If you want <code>std::visit</code> to return a value, that value needs to have a type at compile-time already, because all variables and expressions have a static type in C++.</p>\n<p>The fact that you pass a <code>Variant(4.5)</code> (so &quot;clearly the visit would return a double&quot;) in that particular line doesn't allow the compiler to bend the rules of the type system - the <code>std::visit</code> return <em>type</em> simply cannot change based on the variant <em>value</em> that you pass, and it's impossible to decide on exactly one return type only from the <em>type</em> of the visitor and the <em>type</em> of the variant. Everything else would have extremely weird consequences.</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Type_system#Static_type_checking\" rel=\"noreferrer\">This</a> wikipedia article actually discusses basically the exact situation/question you have, just with an <code>if</code> instead of the more elaborate <code>std::visit</code> version:</p>\n<blockquote>\n<p>For example, consider a program containing the code:</p>\n<pre><code>if &lt;complex test&gt; then &lt;do something&gt; else &lt;signal that there is a type error&gt;\n</code></pre>\n<p>Even if the expression  always evaluates to true at run-time, most type checkers will reject the program as ill-typed, because it is difficult (if not impossible) for a static analyzer to determine that the else branch will not be taken.</p>\n</blockquote>\n<hr />\n<p>If you want the returned type to be &quot;variant-ish&quot;, you have to stick with <code>std::variant</code>. For example, you could still do:</p>\n<pre><code>auto rotateTypes = [](auto&amp;&amp; variant) {\n  return std::visit(\n    [](auto&amp;&amp; arg) -&gt; std::variant&lt;int, float, double&gt; {\n      using T = std::decay_t&lt;decltype(arg)&gt;;\n      if constexpr (std::is_same_v&lt;T, int&gt;) {\n        return float(arg);\n      } else if (std::is_same_v&lt;T, float&gt;) {\n        return double(arg);\n      } else {\n        return int(arg);\n      }\n    },\n  variant);\n};\n</code></pre>\n<p>The deduced return type of <code>std::visit</code> then is <code>std::variant&lt;int, float, double&gt;</code> - as long as you don't decide on one type, you must stay within a variant (or within separate template instantiations). You cannot &quot;trick&quot; C++ into giving up static typing with an identity-visitor on a variant.</p>\n"}], "owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1471, "favorite_count": 0, "accepted_answer_id": 56039676, "answer_count": 2, "score": 7, "last_activity_date": 1557315127, "creation_date": 1557311617, "question_id": 56038711, "link": "https://stackoverflow.com/questions/56038711/why-must-stdvisit-have-a-single-return-type", "title": "Why must std::visit have a single return type?", "body": "<p>While playing around with <code>std::variant</code> and <code>std::visit</code> the following question came up:</p>\n\n<p>Consider the following code:</p>\n\n<pre><code>using Variant = std::variant&lt;int, float, double&gt;;\n\nauto lambda = [](auto&amp;&amp; variant) {\n  std::visit(\n    [](auto&amp;&amp; arg) {\n      using T = std::decay_t&lt;decltype(arg)&gt;;\n      if constexpr (std::is_same_v&lt;T, int&gt;) {\n        std::cout &lt;&lt; \"int\\n\";\n      } else if (std::is_same_v&lt;T, float&gt;) {\n        std::cout &lt;&lt; \"float\\n\";\n      } else {\n        std::cout &lt;&lt; \"double\\n\";\n      }\n    },\n  variant);\n};\n</code></pre>\n\n<p>It works fine as the following examples show:</p>\n\n<pre><code>lambda(Variant(4.5));    // double\nlambda(Variant(4.f));    // float\nlambda(Variant(4));      // int\n</code></pre>\n\n<p>Then why does the following fail:</p>\n\n<pre><code>using Variant = std::variant&lt;int, float, double&gt;;\n\nauto lambda = [](auto&amp;&amp; variant) {\n  std::visit([](auto&amp;&amp; arg) { return arg; }, variant);\n};\n\nauto t = lambda(Variant(4.5));\n</code></pre>\n\n<p>due to the static assertion</p>\n\n<pre><code>static_assert failed due to requirement '__all&lt;is_same_v&lt;int\n      (*)(__value_visitor&lt;(lambda at main.cc:25:7)&gt; &amp;&amp;,\n      __base&lt;std::__1::__variant_detail::_Trait::_TriviallyAvailable, int, float,\n      double&gt; &amp;), float (*)(__value_visitor&lt;(lambda at main.cc:25:7)&gt; &amp;&amp;,\n      __base&lt;std::__1::__variant_detail::_Trait::_TriviallyAvailable, int, float,\n      double&gt; &amp;)&gt;, is_same_v&lt;int (*)(__value_visitor&lt;(lambda at main.cc:25:7)&gt; &amp;&amp;,\n      __base&lt;std::__1::__variant_detail::_Trait::_TriviallyAvailable, int, float,\n      double&gt; &amp;), double (*)(__value_visitor&lt;(lambda at main.cc:25:7)&gt; &amp;&amp;,\n      __base&lt;std::__1::__variant_detail::_Trait::_TriviallyAvailable, int, float,\n      double&gt; &amp;)&gt; &gt;::value' \"`std::visit` requires the visitor to have a single\n      return type.\"\n</code></pre>\n\n<p><code>std::visit</code> can obviously deduce the type of <code>arg</code> as the successful example shows. Then why the requirement to have a single return type?</p>\n\n<p>Compiler is <code>Apple LLVM version 10.0.1 (clang-1001.0.46.4)</code> but <code>gcc version 8.3.0</code> fails with a similar error.</p>\n"}, {"tags": ["java", "c++", "eclipse", "java-native-interface", "windows-10"], "comments": [{"owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 0, "creation_date": 1557328495, "post_id": 56038628, "comment_id": 98729875, "body": "Quick look at the tutorial seems to indicate that it was designed for linux or cygwin running on windows. Is this what you are doing, or are you running directly on windows? Pretty sure executing a makefile on windows (without cygwin) will fail no matter how hard you try."}, {"owner": {"reputation": 136, "user_id": 11469309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d7c6bbb078276babcaeac5e08591ed?s=128&d=identicon&r=PG&f=1", "display_name": "Moshe", "link": "https://stackoverflow.com/users/11469309/moshe"}, "reply_to_user": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 0, "creation_date": 1557332918, "post_id": 56038628, "comment_id": 98732062, "body": "I&#39;m doing only the part  &quot;JNI in Eclipse&quot;.  Do you think that this part was also designed for  linux or cygwin running on windows?"}, {"owner": {"reputation": 136, "user_id": 11469309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d7c6bbb078276babcaeac5e08591ed?s=128&d=identicon&r=PG&f=1", "display_name": "Moshe", "link": "https://stackoverflow.com/users/11469309/moshe"}, "reply_to_user": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 0, "creation_date": 1557333504, "post_id": 56038628, "comment_id": 98732323, "body": "@Alain And do you think this tutorial is good enough for what I&#39;m trying to do? <a href=\"https://www.bogotobogo.com/cplusplus/eclipse_CDT_JNI_MinGW_64bit.php\" rel=\"nofollow noreferrer\">bogotobogo.com/cplusplus/eclipse_CDT_JNI_MinGW_64bit.php</a>"}, {"owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 0, "creation_date": 1557334296, "post_id": 56038628, "comment_id": 98732687, "body": "Using JNI involves compiling C++ code and Windows doesn&#39;t come with a C++ compiler. Hard to tell about the tutorial since I don&#39;t know how much programming you have done and how much time you are willing to invest. Give it a try. Another option if you expect to do lots of programming in the future and have the time now would be to get some linux box (look at Virtualbox) and do your work on it. Longer startup time (maybe) but less trouble in the long run. With cygwin or minGW you&#39;ll constantly be tripping on issues related to paths (spaces in directory name, where is the root, etc.)"}, {"owner": {"reputation": 136, "user_id": 11469309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d7c6bbb078276babcaeac5e08591ed?s=128&d=identicon&r=PG&f=1", "display_name": "Moshe", "link": "https://stackoverflow.com/users/11469309/moshe"}, "reply_to_user": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 0, "creation_date": 1557338258, "post_id": 56038628, "comment_id": 98734695, "body": "I&#39;m trying this tutorial but I&#39;m stuck because something there confuses me.  The title of that tutorial and the the first and third title says &quot;CDT&quot;.  But in the first part of the tutorial (&quot;Install&quot;), it seems like the first install is eclipse for java and the second install is cdt plugin for that eclipse.   I also don&#39;t understand that part &quot;Eclipse Setup&quot;. Because it says &quot;Put the source code&quot; but I don&#39;t understand which source code, and how can I do it now if the &quot;Creating Java Project&quot; comes after it."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1557352332, "post_id": 56038628, "comment_id": 98740461, "body": "These tools easily get confused when the paths have spaces (w.g. <code>Program Files</code>). The easy fix is to copy your <b>jdk</b> to say <code>CL\\ProgramData\\jdk</code>."}, {"owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 0, "creation_date": 1557413973, "post_id": 56038628, "comment_id": 98764619, "body": "Still haven&#39;t read the tutorial, so what follows may be wrong, but still: CDT contains the C/C++ development tools. Eclipse has lots of options as far as installing is concerned. From your original post it looks like you already have CDT installed so you can skip this part of the tutorial. As for the source code/project issue, it is possible in Eclipse to create a new project and specify an existing directory for the project location, in which case all the files become part of the project. I suspect this is what the tutorial is asking you to do."}, {"owner": {"reputation": 136, "user_id": 11469309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d7c6bbb078276babcaeac5e08591ed?s=128&d=identicon&r=PG&f=1", "display_name": "Moshe", "link": "https://stackoverflow.com/users/11469309/moshe"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1557414454, "post_id": 56038628, "comment_id": 98764907, "body": "@AlexCohn and then where do I need to update the path to the new path?   And also, where do you recommend me to put that &quot;CL&quot; folder?"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1557416139, "post_id": 56038628, "comment_id": 98765995, "body": "<code>CL</code> was a typo. I wanted to say <code>c:\\ProgramData\\jdk</code>. And you wrote that this path you <i>wrote in the makefile (&quot;C:\\Program Files (x86)\\Java\\jdk1.8.0_212\\include&quot;).</i>"}, {"owner": {"reputation": 136, "user_id": 11469309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d7c6bbb078276babcaeac5e08591ed?s=128&d=identicon&r=PG&f=1", "display_name": "Moshe", "link": "https://stackoverflow.com/users/11469309/moshe"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1557416924, "post_id": 56038628, "comment_id": 98766458, "body": "@AlexCohn I tried it and when I try to build the target &quot;all&quot;, I get on the console : &quot;make: *** No rule to make target <code>HelloJNI.c&#39;, needed by </code>HelloJNI.o&#39;.  Stop.&quot;"}, {"owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 0, "creation_date": 1557420531, "post_id": 56038628, "comment_id": 98768209, "body": "Looks like the message <code>make</code> would give if it didn&#39;t find <code>HelloJNI.c</code>. Are you sure the file is there, with the right upper/lower cases? Also you can right click on a HelloJNI in Eclipse and select <code>refresh</code>. It shouldn&#39;t  be necessary but it won&#39;t hurt."}, {"owner": {"reputation": 136, "user_id": 11469309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d7c6bbb078276babcaeac5e08591ed?s=128&d=identicon&r=PG&f=1", "display_name": "Moshe", "link": "https://stackoverflow.com/users/11469309/moshe"}, "edited": false, "score": 0, "creation_date": 1557420853, "post_id": 56038628, "comment_id": 98768327, "body": "Update: I realized that I was trying to do it on cpp file, when in the makefile it says C file (and also in the tutorial. So I started the tutorial that in my original post (not the one in the comments). everything went well until the point of building the &quot;all&quot; target- because in the tutorial, the second line that should be printed to the console is &quot;javah -classpath ../bin HelloJNI&quot; and it doesn&#39;t print that line to my console."}, {"owner": {"reputation": 136, "user_id": 11469309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d7c6bbb078276babcaeac5e08591ed?s=128&d=identicon&r=PG&f=1", "display_name": "Moshe", "link": "https://stackoverflow.com/users/11469309/moshe"}, "edited": false, "score": 0, "creation_date": 1557421164, "post_id": 56038628, "comment_id": 98768477, "body": "And also, the main problem is that when I run it, even though it does print &quot;Hello World!&quot;, I see error in the &quot;Problems&quot; tab  &quot;make: *** No rule to make target `all&#39;.  Stop.&quot;"}], "owner": {"reputation": 136, "user_id": 11469309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d7c6bbb078276babcaeac5e08591ed?s=128&d=identicon&r=PG&f=1", "display_name": "Moshe", "link": "https://stackoverflow.com/users/11469309/moshe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 676, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557421222, "creation_date": 1557311321, "last_edit_date": 1557421222, "question_id": 56038628, "link": "https://stackoverflow.com/questions/56038628/eclipse-error-make-no-rule-to-make-target-all-stop", "title": "Eclipse error: &quot;make: *** No rule to make target `all&#39;. Stop.&quot;", "body": "<h1>Background for the question</h1>\n\n<p>When I studied CS in the university, we had to build a CBIR project with C (and we got C++ file that does all the \"hard work\" of image processing). </p>\n\n<p>Now I'm trying to create this project in Java. </p>\n\n<p>I didn't know how to implement in Java some of the things in that C++ file, so I decided to use JNI and call that file from my Java program. </p>\n\n<p>I'm using this tutorial for JNI:\n<a href=\"https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html#zz-2.6\" rel=\"nofollow noreferrer\">https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html#zz-2.6</a></p>\n\n<h2>Development Environment</h2>\n\n<p>+Eclipse IDE for Java Developers (32 bit),  Version: 2018-09 (4.9.0).</p>\n\n<p>+CDT plugin for Eclipse</p>\n\n<p>+Windows 10 64 bit (I use eclipse 32-bit because at some point, the 64-bit eclipse couldn't open and the solution was to use 32-bit eclipse)</p>\n\n<h1>The problem</h1>\n\n<p>When I do this part of the tutorial:</p>\n\n<blockquote>\n  <p>Right-click on the \"makefile\" \u21d2 Make Targets \u21d2 Create \u21d2 In \"Target Name\", >enter \"all\". Repeat to create a target \"clean\".</p>\n  \n  <p>Run the makefile for the target \"all\", by right-click on the makefile \u21d2 Make >Targets \u21d2 Build \u21d2 Select the target \"all\" \u21d2 Build</p>\n</blockquote>\n\n<p>It seems like it's working well.</p>\n\n<p>But when I run the program (as was advised in \"Step 5: Run the Java JNI Program\"), although the program prints to the console what I wanted,after it finished running, Eclipse show me:</p>\n\n<pre><code>Unresolved inclusion: &lt;jni.h&gt;\n</code></pre>\n\n<p>in both the c++ file and the header file. </p>\n\n<p>And I checked and I do have jni.h file in the path that I wrote in the makefile (\"C:\\Program Files (x86)\\Java\\jdk1.8.0_212\\include\").</p>\n\n<p>Also, I would like to know how to compile after my next changes to the cpp/h files.</p>\n\n<h1>Edit:</h1>\n\n<p>Now I noticed that before running the program, there is a Warning in the \"Problems\" tab:</p>\n\n<blockquote>\n  <p>Invalid project path: Include path not found (Program Files >(x86)\\Java\\jdk1.8.0_212\\include).</p>\n</blockquote>\n\n<p>But I don't understand why it's written as \"Program Files\" instead of \"C\\Program Files\".</p>\n\n<h1>Edit2:</h1>\n\n<p>I created a new project in the hope that it will solve the problem.\nWhen I did \"build\" to the target \"all\", I got the error:</p>\n\n<pre><code>make: *** No rule to make target `all'.  Stop.\n</code></pre>\n\n<p>I saw that someone suggested to check \"Generate Makefiles automatically\" (In Project properties -> C/C++ Build) but when I did it, I saw on the console \"nothing to build for project CBIR2\"</p>\n\n<p>So I did again \"build\" to the target \"all\" and in some \"magical\" way, that error disappeared.</p>\n\n<p>Then it seemed like the run is ok (even though the running time is very long) , but when I checked the \"Problems\" tab, I saw again the error:</p>\n\n<pre><code>make: *** No rule to make target `all'.  Stop.\n</code></pre>\n\n<p>So I did again \"build\" to the target \"all\" and that error disappeared . </p>\n\n<p>But obviously something is wrong here if I get that error every time that I run the program, and also before the first time that I run the program.</p>\n\n<h1>makefile</h1>\n\n<pre><code># Define a variable for classpath\nCLASS_PATH = ../bin\n\n# Define a virtual path for .class in the bin directory\nvpath %.class $(CLASS_PATH)\n\nall : SPImageProc.dll\n\n# $@ matches the target, $&lt; matches the first dependency\nSPImageProc.dll : SPImageProc.o\n    gcc -Wl,--add-stdcall-alias -shared -o $@ $&lt;\n\n# $@ matches the target, $&lt; matches the first dependency\nSPImageProc.o : SPImageProc.cpp SPImageProc.h\n    gcc -I\"C:\\Program Files (x86)\\Java\\jdk1.8.0_212\\include\" -I\"C:\\Program Files (x86)\\Java\\jdk1.8.0_212\\include\\win32\" -c $&lt; -o $@\n\n# $* matches the target filename without the extension\nSPImageProc.h : SPImageProc.class\n    javah -classpath $(CLASS_PATH) $*\n\nclean :\n    rm SPImageProc.h SPImageProc.o SPImageProc.dll\n</code></pre>\n\n<h1>SPImageProc.cpp</h1>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;stdio.h&gt;\n#include \"SPImageProc.h\"\n\nJNIEXPORT void JNICALL Java_SPImageProc_saySPImageProc(JNIEnv *env, jobject thisObj) {\n   printf(\"SPImageProc 333!\\n\");\n   return;\n}\n</code></pre>\n\n<h1>SPImageProc.h</h1>\n\n<pre><code>/* DO NOT EDIT THIS FILE - it is machine generated */\n#include &lt;jni.h&gt;\n/* Header for class SPImageProc */\n\n#ifndef _Included_SPImageProc\n#define _Included_SPImageProc\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n/*\n * Class:     SPImageProc\n * Method:    saySPImageProc\n * Signature: ()V\n */\nJNIEXPORT void JNICALL Java_SPImageProc_saySPImageProc\n  (JNIEnv *, jobject);\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre>\n\n<h1>CBIR.java</h1>\n\n<pre><code>public class CBIR {\n\n\n\n\n   public static void main(String[] args) {\n\n      SPImageProc.example();\n   }\n}\n</code></pre>\n\n<h1>SPImageProc.java</h1>\n\n<pre><code>\npublic class SPImageProc {\n\n    static {\n        System.loadLibrary(\"SPImageProc\"); // SPImageProc.dll\n    }\n\n\n    // Declare native method\n    private native void saySPImageProc();\n\n\n\n    public static void example() {\n\n\n        // Allocate an instance and invoke the native method\n        new SPImageProc().saySPImageProc();  \n    }\n}\n\n</code></pre>\n"}, {"tags": ["c++", "windows", "qt", "mingw-w64"], "comments": [{"owner": {"reputation": 201, "user_id": 10140763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94f8003a56b7e0435cc49bb9e9262f3?s=128&d=identicon&r=PG&f=1", "display_name": "Turtle10000", "link": "https://stackoverflow.com/users/10140763/turtle10000"}, "edited": false, "score": 0, "creation_date": 1557311295, "post_id": 56038590, "comment_id": 98719416, "body": "Sorry for reposting. I deleted my first attempt because I thought the error was elsewhere, but it wasn&#39;t, so now posted again."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1557311440, "post_id": 56038590, "comment_id": 98719489, "body": "Does it open one terminal for all commands that is kept open or one terminal per command?"}, {"owner": {"reputation": 201, "user_id": 10140763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94f8003a56b7e0435cc49bb9e9262f3?s=128&d=identicon&r=PG&f=1", "display_name": "Turtle10000", "link": "https://stackoverflow.com/users/10140763/turtle10000"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1557311518, "post_id": 56038590, "comment_id": 98719541, "body": "@nwp each call opens a new terminal and they close once the command terminates"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1557311536, "post_id": 56038590, "comment_id": 98719555, "body": "It probably makes sense to transition to <code>QProcess</code> so you know of what happens to the processes you spawn instead of having to guess if they were successful. It also bypasses the console problem."}, {"owner": {"reputation": 201, "user_id": 10140763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94f8003a56b7e0435cc49bb9e9262f3?s=128&d=identicon&r=PG&f=1", "display_name": "Turtle10000", "link": "https://stackoverflow.com/users/10140763/turtle10000"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1557311801, "post_id": 56038590, "comment_id": 98719713, "body": "I&#39;ll have a look, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 201, "user_id": 10140763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94f8003a56b7e0435cc49bb9e9262f3?s=128&d=identicon&r=PG&f=1", "display_name": "Turtle10000", "link": "https://stackoverflow.com/users/10140763/turtle10000"}, "edited": false, "score": 0, "creation_date": 1557312977, "post_id": 56038866, "comment_id": 98720431, "body": "I&#39;m fiddling around with it, currently it crashes at <code>start(program)</code>, probably because I don&#39;t get the hang of the parent object yet. I will try further and let you know. Static execution with <code>QProcess::execute(...)</code> works but lacks the return of the output."}, {"owner": {"reputation": 208, "user_id": 5773101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5415c99bb6d02e3c87cd2c74ada1098?s=128&d=identicon&r=PG&f=1", "display_name": "Gasteizko", "link": "https://stackoverflow.com/users/5773101/gasteizko"}, "reply_to_user": {"reputation": 201, "user_id": 10140763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94f8003a56b7e0435cc49bb9e9262f3?s=128&d=identicon&r=PG&f=1", "display_name": "Turtle10000", "link": "https://stackoverflow.com/users/10140763/turtle10000"}, "edited": false, "score": 0, "creation_date": 1557314263, "post_id": 56038866, "comment_id": 98721151, "body": "Where i put <code>QObject *parent;</code> is to remark to use your parent object, maybe the QMainWindow. So you must initialize the <code>new QProcess(&lt;yourQObject*&gt;)</code>"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1557314955, "post_id": 56038866, "comment_id": 98721530, "body": "driverquery.exe is a console application. By default running this via <code>CreateProcessW</code> with standard I/O redirected to pipes will still allocate a console and create a window, unless steps are taken to suppress the console window (i.e. the <code>CREATE_NO_WINDOW</code> creation flag) or to hide it using the process <code>STARTUPINFO</code>. Does <code>QProcess</code> suppress or hide the console window by default when standard I/O is redirected?"}, {"owner": {"reputation": 208, "user_id": 5773101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5415c99bb6d02e3c87cd2c74ada1098?s=128&d=identicon&r=PG&f=1", "display_name": "Gasteizko", "link": "https://stackoverflow.com/users/5773101/gasteizko"}, "edited": false, "score": 1, "creation_date": 1557315288, "post_id": 56038866, "comment_id": 98721726, "body": "I edited to show you how to do with a console cmd.exe"}, {"owner": {"reputation": 201, "user_id": 10140763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94f8003a56b7e0435cc49bb9e9262f3?s=128&d=identicon&r=PG&f=1", "display_name": "Turtle10000", "link": "https://stackoverflow.com/users/10140763/turtle10000"}, "edited": false, "score": 0, "creation_date": 1557318906, "post_id": 56038866, "comment_id": 98723717, "body": "@Gasteizko it works, but it still opens command windows. Now they are empty instead of showing the output, but they are still there."}, {"owner": {"reputation": 208, "user_id": 5773101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5415c99bb6d02e3c87cd2c74ada1098?s=128&d=identicon&r=PG&f=1", "display_name": "Gasteizko", "link": "https://stackoverflow.com/users/5773101/gasteizko"}, "edited": false, "score": 0, "creation_date": 1557319824, "post_id": 56038866, "comment_id": 98724306, "body": "I tested and I did not have that behaviour."}], "tags": [], "owner": {"reputation": 208, "user_id": 5773101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5415c99bb6d02e3c87cd2c74ada1098?s=128&d=identicon&r=PG&f=1", "display_name": "Gasteizko", "link": "https://stackoverflow.com/users/5773101/gasteizko"}, "is_accepted": true, "score": 2, "last_activity_date": 1557315261, "last_edit_date": 1557315261, "creation_date": 1557312163, "answer_id": 56038866, "question_id": 56038590, "link": "https://stackoverflow.com/questions/56038590/how-to-hide-windows-terminal-opened-in-qt-app/56038866#56038866", "title": "How to hide windows Terminal opened in Qt app?", "body": "<p>You can do it by using the <code>QProcess</code> class:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    QObject *parent;\n    ...\n    QString program = \"driverquery\";\n\n    QProcess *myProcess = new QProcess(parent);\n    myProcess-&gt;start(program);\n    if (myProcess-&gt;waitForStarted(-1)) {\n        while(myProcess-&gt;waitForReadyRead(-1)) {\n            getGui()-&gt;txtOutput-&gt;append( myProcess-&gt;readAllStandardOutput() );\n       }\n    }\n    // else report error or whatever\n</code></pre>\n\n<p>In the case of using a command application, you can do the following:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    QObject *parent;\n    ...\n    QString program = \"driverquery\";\n\n    QProcess *myProcess = new QProcess(parent);\n    QString command = QString(\"cmd.exe %1 \\\"%2 \\\"\").arg(\" /C \").arg(program);\n    myProcess-&gt;start(command);\n    if (myProcess-&gt;waitForStarted(-1)) {\n        while(myProcess-&gt;waitForReadyRead(-1)) {\n            getGui()-&gt;txtOutput-&gt;append( myProcess-&gt;readAllStandardOutput() );\n       }\n    }\n    // else report error or whatever\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 10140763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94f8003a56b7e0435cc49bb9e9262f3?s=128&d=identicon&r=PG&f=1", "display_name": "Turtle10000", "link": "https://stackoverflow.com/users/10140763/turtle10000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 0, "accepted_answer_id": 56038866, "answer_count": 1, "score": 1, "last_activity_date": 1557315261, "creation_date": 1557311229, "question_id": 56038590, "link": "https://stackoverflow.com/questions/56038590/how-to-hide-windows-terminal-opened-in-qt-app", "title": "How to hide windows Terminal opened in Qt app?", "body": "<p>First of all, there are similar questions but I think it's a different question because the Windows terminal appears only when I call <code>system()</code> and not when the app is launching in general.</p>\n\n<p>I have a program with a gui written in C++ with Qt and built in qmake with a <code>.pro</code> file, using MinGW compiler. OS is Windows 10 in a virtual box.</p>\n\n<p>I wrote the code in Ubuntu where it works as intended (no OS terminal visible at all), but now I am testing it in Windows. My Problem is that whenever I call <code>system()</code> or similar in my code to execute another program (supposedly in the background), Windows opens a cmd terminal in front of my gui. I have lots of these calls in my program and therefore there are lots of these windows popping up and disappearing while it runs.</p>\n\n<p>I set main() to WinMain() and removed console from the qmake config, but that did not show any effect.</p>\n\n<p>My <code>.pro</code> file (removed comments):</p>\n\n<pre><code>QT       += core gui\n\nCONFIG -= console\nQMAKE_CXXFLAGS += -std=c++11\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = regionfind-gui\nTEMPLATE = app\n\nDEFINES += QT_DEPRECATED_WARNINGS\n\nSOURCES += \\\n        main.cpp \\\n        regionfind.cpp \\\n        sagacmd.cpp\n\nHEADERS += \\\n        regionfind.h \\\n        sagacmd.h \\\n        processingsteps.h\nFORMS += \\\n        regionfind.ui\n\nRESOURCES += \\\n        images.qrc\n</code></pre>\n\n<p>Build command (generated from QtCreator):</p>\n\n<p><code>C:\\Qt\\Qt5.12.3\\5.12.3\\mingw73_64\\bin\\qmake.exe C:\\Users\\dev\\Documents\\regionfind-gui\\regionfind-gui.pro -spec win32-g++ &amp;&amp; C:/Qt/Qt5.12.3/Tools/mingw730_64/bin/mingw32-make.exe qmake_all</code></p>\n\n<p>How do I get rid of these terminal windows? They do not open when the command does not have any output, but I can't suppress the general output or similar because in some cases I'm storing the output and printing it into my gui, using the following code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>array&lt;char, 128&gt; buffer;\nstring result = getDescription(getStep()) + command + \"\\n\";\nunique_ptr&lt;FILE, decltype(&amp;pclose) &gt; pipe(popen(command.c_str(), \"r\"), pclose);\nif(!pipe) throw std::runtime_error(\"popen() failed\");\nwhile (fgets(buffer.data(), buffer.size(), pipe.get()) != nullptr)  {\n result += checkOutput(buffer.data());\n getGui()-&gt;txtOutput-&gt;append(QString::fromStdString(removeNewlineAtEnd(buffer.data())));\n getGui()-&gt;txtOutput-&gt;repaint();\n cout &lt;&lt; buffer.data() &lt;&lt; flush;;\n}\n</code></pre>\n\n<p>Examples: <code>system(\"mkdir C:\\\\Users\\dev\\\\Documents\\\\testfolder\")</code> does not open a window (no output) but <code>system(\"driverquery\")</code> does.</p>\n"}]