[{"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 3006, "user_id": 4307644, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5a0ad436fd74b40a789d43682b223205?s=128&d=identicon&r=PG", "display_name": "MeetTitan", "link": "https://stackoverflow.com/users/4307644/meettitan"}, "edited": false, "score": 3, "creation_date": 1442447406, "post_id": 32620538, "comment_id": 53091337, "body": "Could you use <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow noreferrer\">vectors</a>?"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 4, "creation_date": 1442447479, "post_id": 32620538, "comment_id": 53091358, "body": "If the order of the elements is not important, you can just overwrite the deleted item with the last one and decrement the length."}], "answers": [{"comments": [{"owner": {"reputation": 1653, "user_id": 3909000, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4c62e62bb586ceb167170d907ddaaf9b?s=128&d=identicon&r=PG&f=1", "display_name": "CBHacking", "link": "https://stackoverflow.com/users/3909000/cbhacking"}, "edited": false, "score": 0, "creation_date": 1442447930, "post_id": 32620586, "comment_id": 53091465, "body": "Note that you shouldn&#39;t mix <code>realloc</code> with <code>new&#47;new[]</code> or <code>delete&#47;delete[]</code>. You should instead use <code>malloc</code> or <code>calloc</code> and <code>free</code>. You can safely use <code>new</code> and <code>delete</code> with objects whose pointers are in an array created with <code>malloc</code> - that is, you can mix allocators within a given codebase - but you must not mix them on any particular allocation."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 1653, "user_id": 3909000, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4c62e62bb586ceb167170d907ddaaf9b?s=128&d=identicon&r=PG&f=1", "display_name": "CBHacking", "link": "https://stackoverflow.com/users/3909000/cbhacking"}, "edited": false, "score": 0, "creation_date": 1442448070, "post_id": 32620586, "comment_id": 53091502, "body": "Indeed there is no allocation mixed since <code>delete</code> is called on an element of the array but the OP should take care of allocating <code>array</code> with <code>calloc</code>/<code>malloc</code>."}, {"owner": {"reputation": 1653, "user_id": 3909000, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4c62e62bb586ceb167170d907ddaaf9b?s=128&d=identicon&r=PG&f=1", "display_name": "CBHacking", "link": "https://stackoverflow.com/users/3909000/cbhacking"}, "edited": false, "score": 0, "creation_date": 1442449305, "post_id": 32620586, "comment_id": 53091768, "body": "Right, just wanted to make sure they knew not to use <code>new</code> and <code>delete[]</code> with an array that they&#39;ll want to call <code>realloc</code> on. Huh.. now I&#39;m wondering if there&#39;s an equivalent of <code>realloc</code> for <code>new</code>/<code>delete</code>..."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1442459784, "post_id": 32620586, "comment_id": 53094198, "body": "There is not an equivalent of <code>realloc()</code>, but you can resize a std::vector."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 1, "last_activity_date": 1442447685, "creation_date": 1442447685, "answer_id": 32620586, "question_id": 32620538, "link": "https://stackoverflow.com/questions/32620538/removing-elements-in-an-array-c/32620586#32620586", "title": "removing elements in an array, c++", "body": "<p>A C++ solution should be to use a <code>std::vector</code> or <code>std::array</code> and forget about everything (possibly storing smart pointers, eg <code>std::unique_ptr&lt;T&gt;</code>).</p>\n\n<p>If you really want to go the hard way you could setup things like these:</p>\n\n<ul>\n<li>find element to remove (index <code>i</code>)</li>\n<li>if <code>i == LENGTH_OF_ARRAY - 1</code> do nothing, otherwise swap element at <code>i</code> and at <code>LENGTH_OF_ARRAY - 1</code> so that the element to be removed is in last position</li>\n<li>call <code>delete array[LENGTH_OF_ARRAY - 1]</code> to destroy last element</li>\n<li>call <code>array = realloc(array, (LENGTH_OF_ARRAY - 1) * sizeof(array[0]))</code> to release memory in the array for removed element, and update <code>LENGTH_OF_ARRAY</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1442460079, "creation_date": 1442460079, "answer_id": 32622099, "question_id": 32620538, "link": "https://stackoverflow.com/questions/32620538/removing-elements-in-an-array-c/32622099#32622099", "title": "removing elements in an array, c++", "body": "<p>Without changing your data structures, the solution is to copy each element after the one you remove over the previous element of the array.  This is more efficient for a linked list.  With an array allocated by <code>new[]</code>, you would not reallocate anything, but you could resize a <code>vector</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5314307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc2c38982195c7e7f8e3af3e0079dde?s=128&d=identicon&r=PG&f=1", "display_name": "b.h.789", "link": "https://stackoverflow.com/users/5314307/b-h-789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442460079, "creation_date": 1442447289, "question_id": 32620538, "link": "https://stackoverflow.com/questions/32620538/removing-elements-in-an-array-c", "title": "removing elements in an array, c++", "body": "<p>I have an array of sockets (pfd[nfd].fd). I also have an array of pointers (event_tracking* track[10]). If there comes a point in my code where I try and receive data from a socket that is closed I would like to remove that array element in both arrays and then shift the arrays to fill the empty spot. </p>\n\n<pre><code> for(j=1; j&lt;nfd; j++) {\n        if(pfd[j].revents&amp;POLLIN) {  \n\n            char* p = track.receive_datagram();\n\n            if (p == 0) { \n            delete track[j-1];\n            //Delete element in pfd[nfd].fd\n            //Reorder elements of track array\n            //Reorder elements of pfd array\n            }\n\n        }\n  }\n</code></pre>\n\n<p>I know you can call the delete operator to call the destructor for track but I'm not sure how to reorder the elements in the array now that one is missing? Or how to delete and reorder the pfd array?</p>\n\n<p>Any help would be appreciated! I can't find any examples of deleting and reordering arrays in my text. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "edited": false, "score": 0, "creation_date": 1442450674, "post_id": 32620393, "comment_id": 53092046, "body": "<code>i&lt;input.length()</code> in the for loop is incorrect.  Length of <code>chars[]</code> should be used."}], "answers": [{"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 5, "creation_date": 1442446494, "post_id": 32620408, "comment_id": 53091154, "body": "Read The Friendly Manual"}, {"owner": {"reputation": 23, "user_id": 4534388, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/7c8e5bf212171bebfaf7fefbadc1a3a3?s=128&d=identicon&r=PG&f=1", "display_name": "QifengSun", "link": "https://stackoverflow.com/users/4534388/qifengsun"}, "edited": false, "score": 0, "creation_date": 1442446669, "post_id": 32620408, "comment_id": 53091195, "body": "sorry for the uncompleted code, i type using namespace std; on the top. so every time i use replace i should add #include &lt;algorithm&gt; in the header?"}, {"owner": {"reputation": 23, "user_id": 4534388, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/7c8e5bf212171bebfaf7fefbadc1a3a3?s=128&d=identicon&r=PG&f=1", "display_name": "QifengSun", "link": "https://stackoverflow.com/users/4534388/qifengsun"}, "edited": false, "score": 0, "creation_date": 1442446821, "post_id": 32620408, "comment_id": 53091225, "body": "also do i have to place input in front of the replace? like input.replace(); but every time add it, it doesn&#39;t gave the right output"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 23, "user_id": 4534388, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/7c8e5bf212171bebfaf7fefbadc1a3a3?s=128&d=identicon&r=PG&f=1", "display_name": "QifengSun", "link": "https://stackoverflow.com/users/4534388/qifengsun"}, "edited": false, "score": 0, "creation_date": 1442446887, "post_id": 32620408, "comment_id": 53091234, "body": "Which book are you using, @QifengSun? The good ones explain this early on. (I didn&#39;t say to write <code>input.replace()</code>, did I?)"}, {"owner": {"reputation": 23, "user_id": 4534388, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/7c8e5bf212171bebfaf7fefbadc1a3a3?s=128&d=identicon&r=PG&f=1", "display_name": "QifengSun", "link": "https://stackoverflow.com/users/4534388/qifengsun"}, "edited": false, "score": 0, "creation_date": 1442446953, "post_id": 32620408, "comment_id": 53091244, "body": "Programming: Principles and Practice Using C++: Vectors and Arrays Bjarne Stroustrup By Bjarne Stroustrup May 29, 2014"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 6, "last_activity_date": 1442446400, "creation_date": 1442446400, "answer_id": 32620408, "question_id": 32620393, "link": "https://stackoverflow.com/questions/32620393/why-i-got-replace-was-not-declared-in-this-scope-error/32620408#32620408", "title": "why i got \u2018replace\u2019 was not declared in this scope error?", "body": "<p>You didn't <code>#include &lt;algorithm&gt;</code>, and you didn't write <code>std::replace</code>.</p>\n\n<p>The documentation is your friend.</p>\n"}], "owner": {"reputation": 23, "user_id": 4534388, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/7c8e5bf212171bebfaf7fefbadc1a3a3?s=128&d=identicon&r=PG&f=1", "display_name": "QifengSun", "link": "https://stackoverflow.com/users/4534388/qifengsun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2248, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1442446400, "creation_date": 1442446250, "last_edit_date": 1442446329, "question_id": 32620393, "link": "https://stackoverflow.com/questions/32620393/why-i-got-replace-was-not-declared-in-this-scope-error", "title": "why i got \u2018replace\u2019 was not declared in this scope error?", "body": "<p>I wanna to use replace for my code to detect palindrome, and this is part of it</p>\n\n<pre><code>cout&lt;&lt;isPalindrome(\"Won't I panic in a pit now?\")&lt;&lt;endl;\n\nbool PalindromeFinder::isPalindrome(string input){\n\n    char chars[] = {' ' , '\\'' , '?' , '!' , ','};\n\n    for (int i=0; i&lt;input.length(); i++) {\n        replace(input.begin(), input.end(), chars[i], '\\0');\n\n\n    }\n</code></pre>\n\n<p>it give me the proper result which is wontipanicinapitnow</p>\n\n<p>but when when i run the function it gave me \u2018replace\u2019 was not declared in this scope. any suggestion?</p>\n"}, {"tags": ["c++", "xcode", "header", "eigen", "include-path"], "answers": [{"tags": [], "owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "is_accepted": false, "score": 1, "last_activity_date": 1442460966, "creation_date": 1442460966, "answer_id": 32622190, "question_id": 32620380, "link": "https://stackoverflow.com/questions/32620380/successfully-included-file-now-dealing-with-semantics-issues/32622190#32622190", "title": "Successfully Included File, now dealing with semantics issues", "body": "<p>You generally want to include the <code>Core</code> file, not the individual <code>.h</code> files, i.e.</p>\n\n<pre><code>#include &lt;Eigen/Core&gt;\n</code></pre>\n\n<p>There are exceptions, but again, you won't be including the <code>.h</code> files, those are used internally. Additionally, it appears that your include path points to the <code>./Eigen/src/</code> directory. You want to move it up two directories so that when you write <code>#include &lt;Eigen/Core&gt;</code> it finds the <code>Core</code> file correctly. The files that you'll most likely include are the extension-less ones in the Eigen directory.</p>\n"}], "owner": {"reputation": 677, "user_id": 5299149, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh6.googleusercontent.com/-610uudJP_8U/AAAAAAAAAAI/AAAAAAAAD4E/l5gyXwDnsrM/photo.jpg?sz=128", "display_name": "Maria-Andersado", "link": "https://stackoverflow.com/users/5299149/maria-andersado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442460966, "creation_date": 1442446164, "question_id": 32620380, "link": "https://stackoverflow.com/questions/32620380/successfully-included-file-now-dealing-with-semantics-issues", "title": "Successfully Included File, now dealing with semantics issues", "body": "<p>Earlier I asked for help in including an external library called Eigen in xcode 4. I finally managed to get it to include the header file I wanted to use, Array, by going to build phases, link binary with libraries, and then adding the sub-folder within the Eigen archive where Array.h was located, Core. I also added the filepath to Core's parent directory, src, in header search paths. </p>\n\n<p>When I finally managed to add the line of code <code>#include &lt;Core/Array.h&gt;</code> without it getting highlighted as an error, I ran the application (which worked previously) and XCode said that the build failed, with the error messages citing semantic issues. I checked the error message and they include, \"Uknown identifier 'Array'\" in a file named Array.h. </p>\n\n<p>All of the header files are in src and according to the Eigen website, they are all that's needed to use Eigen with c++. I've attempted to reformat the binary links so they go to src instead of Core, and adjusting the buildpath to lead to the parent directory of src, ensuring that all header files can now be accessed, but I'm still getting semantics issues. Does anyone have a solution to this? </p>\n"}, {"tags": ["c++", "templates", "c++11", "variadic"], "comments": [{"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1442445839, "post_id": 32620155, "comment_id": 53090965, "body": "Compiles in VS2015, both return false"}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "reply_to_user": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1442446092, "post_id": 32620155, "comment_id": 53091033, "body": "I didn&#39;t expect that.  But the first line should definitely evaluate to true (that&#39;s what GCC 5.1.0 gives)."}, {"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1442447357, "post_id": 32620155, "comment_id": 53091326, "body": "I haven&#39;t really researched why yet, but the fact this compiles here (second line too) means the compilers are quite different. That&#39;s to be expected. Both return false at the moment."}, {"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1442448132, "post_id": 32620155, "comment_id": 53091517, "body": "Ok, first one down... in the code you posted, change std::false_type to std::true_type in the declaration of Test, then the first line DOES return true;"}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "reply_to_user": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1442448453, "post_id": 32620155, "comment_id": 53091583, "body": "But we must use std::false_type there, because that default specialization is reached only if <code>decltype(std::declval&lt;T&amp;&gt;().foo(std::declval&lt;Arg&gt;())</code> cannot be evaluated, i.e. <code>A::foo</code> does that not have that particular <code>Arg</code> as argument (which means <code>Test&lt;A,Arg&gt;::value</code> must evaluate to false).  I really do think VS2015 is bugged in its output here.  But as for compiling/not compiling the second line, I don&#39;t know if it is GCC or VS2015 that is buggy."}, {"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "edited": false, "score": 0, "creation_date": 1442451841, "post_id": 32620155, "comment_id": 53092326, "body": "Your Test struct returns true even if the signature does not match on my system. Change Test&lt;A, int&gt;::value to Test&lt;A, char&gt;::value and check it out for yourself."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "reply_to_user": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "edited": false, "score": 0, "creation_date": 1442452573, "post_id": 32620155, "comment_id": 53092511, "body": "@bku_drytt   Because char is convertible to int (but yeah, that should be avoided too, which is a separate problem).  Use <code>Test&lt;A, std::string&gt;::value</code>, and it will evaluate to false."}, {"owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "edited": false, "score": 0, "creation_date": 1562365353, "post_id": 32620155, "comment_id": 100363937, "body": "I had a different bug while trying to implement the exact same functionality and arrived to this question :)"}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 6, "last_activity_date": 1442466273, "creation_date": 1442466273, "answer_id": 32622921, "question_id": 32620155, "link": "https://stackoverflow.com/questions/32620155/parameter-pack-with-default-template-argument/32622921#32622921", "title": "Parameter pack with default template argument", "body": "<p>You want</p>\n\n<pre><code>template &lt;typename T, typename, typename... Args&gt; \nstruct Check : std::false_type {};\n\ntemplate &lt;typename T, typename... Args&gt;\nstruct Check&lt;T, void_t&lt;decltype(std::declval&lt;T&amp;&gt;().foo(std::declval&lt;Args&gt;()...))&gt;, Args...&gt;\n    : std::true_type {};\n</code></pre>\n\n<p>You want the primary template to provide the default case - which is false, and the partial specialization to supply the true case. When you write two partial specializations, both are viable, and there's no ordering between the two, so it ends up being ambiguous</p>\n\n<p>And this is just reimplementing a more constrained version of <a href=\"http://en.cppreference.com/w/cpp/experimental/is_detected\" rel=\"noreferrer\"><code>std::experimental::is_detected</code></a>.</p>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1218, "favorite_count": 2, "accepted_answer_id": 32622921, "answer_count": 1, "score": 6, "last_activity_date": 1442466273, "creation_date": 1442444594, "question_id": 32620155, "link": "https://stackoverflow.com/questions/32620155/parameter-pack-with-default-template-argument", "title": "Parameter pack with default template argument", "body": "<p>In this code, I'm trying to generalize <code>Test</code> from using <code>Arg</code> to using <code>Args...</code>.  The problem is the default template argument.  What I have below compiles, except when I uncomment the commented-out line in main():</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nstruct A {\n    void foo(int) const {}\n    void foo(int, bool, char) const {}\n};\n\ntemplate &lt;typename...&gt; struct voider { using type = void; };\n\ntemplate &lt;typename... Ts&gt;\nusing void_t = typename voider&lt;Ts...&gt;::type;\n\ntemplate &lt;typename T, typename Arg, typename = void_t&lt;T&gt;&gt;\nstruct Test : std::false_type {};\n\ntemplate &lt;typename T, typename Arg&gt;\nstruct Test&lt;T, Arg, void_t&lt;decltype(std::declval&lt;T&amp;&gt;().foo(std::declval&lt;Arg&gt;()))&gt;&gt; :\n    std::true_type {};\n\n// Trying to generalize Test with Args... instead of Arg\ntemplate &lt;typename T, typename, typename... Args&gt; struct Check;\n\ntemplate &lt;typename T, typename... Args&gt;\nstruct Check&lt;T, void_t&lt;T&gt;, Args...&gt; : std::false_type {};\n\ntemplate &lt;typename T, typename... Args&gt;\nstruct Check&lt;T, void_t&lt;decltype(std::declval&lt;T&amp;&gt;().foo(std::declval&lt;Args&gt;()...))&gt;, Args...&gt;\n    : std::true_type {};\n\ntemplate &lt;typename T, typename... Args&gt;\nusing CheckArgs = Check&lt;T, void_t&lt;T&gt;, Args...&gt;;\n\nint main() {\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; Test&lt;A, int&gt;::value &lt;&lt; '\\n';  // true\n//  std::cout &lt;&lt; CheckArgs&lt;A, int, bool, char&gt;::value &lt;&lt; '\\n';  // ambiguous\n}\n</code></pre>\n\n<p>The last line in main() is ambiguous.  Firstly, why is it ambiguous, while the first line in main() is not?  And secondly, how to fix the code so that the last line in main will compile (it is supposed to evaluate to true since int, bool, char are arguments of A::foo)?</p>\n"}, {"tags": ["c++", "string", "for-loop"], "comments": [{"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 9, "creation_date": 1442443605, "post_id": 32619969, "comment_id": 53090375, "body": "Don&#39;t use magic numbers!!"}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1442444222, "post_id": 32619969, "comment_id": 53090535, "body": "I don&#39;t understand your question. What do you mean by &quot;it only saves the new string inside the if statement&quot;? All your strings are declared outside of the <code>if</code> and <code>for</code> blocks, so they will retain the value even after these blocks have been executed."}], "answers": [{"comments": [{"owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "edited": false, "score": 0, "creation_date": 1442444402, "post_id": 32620079, "comment_id": 53090582, "body": "These are also &quot;magic&quot; numbers but chars instead of their decimal values... What about capitals?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "edited": false, "score": 1, "creation_date": 1442444507, "post_id": 32620079, "comment_id": 53090626, "body": "@Gombat <code>&#39;a&#39;</code> and <code>&#39;z&#39;</code> are characters in the Latin alphabet, not magic numbers. This only handles lowercase because generalising it isn&#39;t part of the question."}, {"owner": {"reputation": 41, "user_id": 5344343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5470e50c6d3286bda84ef3b6207df71?s=128&d=identicon&r=PG&f=1", "display_name": "gps", "link": "https://stackoverflow.com/users/5344343/gps"}, "edited": false, "score": 0, "creation_date": 1442446092, "post_id": 32620079, "comment_id": 53091032, "body": "&#39;str&#39; is not empty  std::string str=&quot;am73$$ore r0ma!!!&quot; the copy_str has to only contain the letters. I added symbols to check if code works."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 41, "user_id": 5344343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5470e50c6d3286bda84ef3b6207df71?s=128&d=identicon&r=PG&f=1", "display_name": "gps", "link": "https://stackoverflow.com/users/5344343/gps"}, "edited": false, "score": 0, "creation_date": 1442447837, "post_id": 32620079, "comment_id": 53091444, "body": "@gps You&#39;re assigning to what would be the elements of <code>copy_str</code>, but <code>copy_str</code> is empty."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 2, "last_activity_date": 1442444140, "creation_date": 1442444140, "answer_id": 32620079, "question_id": 32619969, "link": "https://stackoverflow.com/questions/32619969/how-do-i-save-a-string-outside-of-for-loop-in-c/32620079#32620079", "title": "how do i save a string outside of for loop in C++", "body": "<p>The program is undefined since you're assigning to non-existent elements of an empty string.<br>\nAssigning to an element that doesn't exist does not make the string longer, it's invalid.<br>\nSince the program is undefined, anything can happen.</p>\n\n<p>You can use <code>push_back</code> to expand the result:</p>\n\n<pre><code>if(str[i] &gt;= 'a' &amp;&amp; str[i] &lt;= 'z')\n{\n    copy_str.push_back(str[i]);\n}\n</code></pre>\n\n<p>or <code>+=</code>:</p>\n\n<pre><code>if(str[i] &gt;= 'a' &amp;&amp; str[i] &lt;= 'z')\n{\n    copy_str += str[i];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "is_accepted": false, "score": 4, "last_activity_date": 1442475127, "last_edit_date": 1442475127, "creation_date": 1442444316, "answer_id": 32620104, "question_id": 32619969, "link": "https://stackoverflow.com/questions/32619969/how-do-i-save-a-string-outside-of-for-loop-in-c/32620104#32620104", "title": "how do i save a string outside of for loop in C++", "body": "<p>You should use <code>isalpha</code>, see <a href=\"http://www.cplusplus.com/reference/cctype/isalpha/\" rel=\"nofollow\">here</a>.</p>\n\n<p><code>copy_str</code> is uninitialized and you initialize only the positions where your if statement inside the loop is fulfilled. Add single chars using <code>+=</code>. </p>\n\n<pre><code>std::string src = \"am73$$ore r0ma!!!\";\n\nstd::string dst; // empty string\n\nfor ( size_t i = 0; i &lt; src.size(); i++ )\n{\n    if ( isalpha(src[i]) ){ dst += src[i]; }\n}\nstd::cout &lt;&lt; dst &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5344343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5470e50c6d3286bda84ef3b6207df71?s=128&d=identicon&r=PG&f=1", "display_name": "gps", "link": "https://stackoverflow.com/users/5344343/gps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442475127, "creation_date": 1442443480, "last_edit_date": 1442445564, "question_id": 32619969, "link": "https://stackoverflow.com/questions/32619969/how-do-i-save-a-string-outside-of-for-loop-in-c", "title": "how do i save a string outside of for loop in C++", "body": "<p>I am trying to write program that takes a string with symbols and numbers and only saves the alphabet, discarding everything else. I tried with a str.erase but I thought it was easier to use loop. Assuming everything is lower case,it works beautifully.copy_str should save the new string without the symbols, to see if it was done I displayed it. When it is inside the if-it shows correct string, but when I display it outside the for loop-nothing. :/<br>\nhere is my code:</p>\n\n<pre><code>    int main()\n{\n string str=\"am73$$ore r0ma!!!\";\n\n\n int size_str=str.size();\n string copy_str;\n for(int i=0;str[i]!='\\0';i++)\n {\n    if((str[i]&gt;=97) &amp;&amp; (str[i]&lt;123))\n    {\n        copy_str[i]=str[i];\n        cout&lt;&lt;copy_str[i];\n    }\n }\n cout&lt;&lt;copy_str;\n</code></pre>\n"}, {"tags": ["c++", "string", "algorithm", "palindrome"], "comments": [{"owner": {"reputation": 9484, "user_id": 1327235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92c96d4ad697e78400e312fe40b23dc?s=128&d=identicon&r=PG", "display_name": "Juan Lopes", "link": "https://stackoverflow.com/users/1327235/juan-lopes"}, "edited": false, "score": 0, "creation_date": 1442443633, "post_id": 32619945, "comment_id": 53090381, "body": "Please, describe the problem. &quot;getting largest palindrome&quot; isn&#39;t enough."}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 0, "creation_date": 1442443651, "post_id": 32619945, "comment_id": 53090384, "body": "&quot;input.erase(cha) == cleanString&quot; are you sure you want to be doing double equals here."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 3, "creation_date": 1442450073, "post_id": 32619945, "comment_id": 53091926, "body": "char cha = input[cha]??? input.erase(cha) == cleanString;??? I guess  this is not a real copy/paste of your code."}], "answers": [{"tags": [], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1442444354, "last_edit_date": 1442444354, "creation_date": 1442444014, "answer_id": 32620056, "question_id": 32619945, "link": "https://stackoverflow.com/questions/32619945/c-getting-largest-palindrome/32620056#32620056", "title": "C++ Getting largest palindrome", "body": "<p>You are using <code>string.erase()</code> incorrectly.<br>\n<a href=\"http://en.cppreference.com/w/cpp/string/basic_string/erase\" rel=\"nofollow\">Read at the documentation.</a>  </p>\n\n<p><code>string.erase()</code> expects either <strong>iterators</strong>, or <strong>indexes</strong>.<br>\nYou are mistakenly giving it a char which is promoted to an integer and then used as an index.  </p>\n"}, {"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1442447856, "last_edit_date": 1442447856, "creation_date": 1442447247, "answer_id": 32620529, "question_id": 32619945, "link": "https://stackoverflow.com/questions/32619945/c-getting-largest-palindrome/32620529#32620529", "title": "C++ Getting largest palindrome", "body": "<p>Instead of writing faulty loops, all you need are two functions to remove characters and reverse a string.</p>\n\n<p>To erase characters from a <code>std::string</code>, you should use <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow\">std::remove_if</a>:</p>\n\n<pre><code>input.erase(std::remove_if(input.begin(), input.end(), [](char c) \n                          { return ::ispunct(c) || isspace(c);}), input.end());  \n</code></pre>\n\n<p><a href=\"http://ideone.com/honLzh\" rel=\"nofollow\">Live Example</a></p>\n\n<p>Similarly, to reverse a string, you can use <a href=\"http://en.cppreference.com/w/cpp/algorithm/reverse\" rel=\"nofollow\">std::reverse</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 0, "last_activity_date": 1442462631, "last_edit_date": 1442462631, "creation_date": 1442458909, "answer_id": 32621954, "question_id": 32619945, "link": "https://stackoverflow.com/questions/32619945/c-getting-largest-palindrome/32621954#32621954", "title": "C++ Getting largest palindrome", "body": "<p>Make a tmp buffer the size of your input string.  Track input character position in your input string, and output character position in your output buffer.</p>\n\n<p>This is how you'd do it in C.</p>\n\n<pre><code>#include &lt;string.h&gt; // for size_t\n#include &lt;ctype.h&gt;  // for isalnum\n\n// caller allocates output buffer large as large as input.\n// length could be a function parameter, since caller needs to know it anyway.\nsize_t clean_string(char *out, const char* in)\n{\n    size_t inpos=0, outpos=0;\n    while (in[inpos] != '\\0') {\n        char c = in[inpos++];\n        if (isalnum(c)) // &lt;-- put in whatever logic you want here\n            out[outpos++] = c;\n    }\n    out[outpos] = '\\0';\n    return outpos;\n}\n</code></pre>\n\n<p>This is dead simple, and only ever copies a character once.  It's also arguably easy to read and understand.  There's a good argument to be made for C++ string classes taking care of making sure you never forget the trailing <code>'\\0'</code>, though.</p>\n\n<p>Erasing a character in the middle of a string has to copy all the following characters over by one.  You're shooting yourself in the foot with C++ by using slow operations probably without realizing, because you just see the <code>input.erase()</code> funcion call, not the loop.</p>\n"}], "owner": {"reputation": 21, "user_id": 5344337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b72a68ecda1454ef295cebb465950e?s=128&d=identicon&r=PG&f=1", "display_name": "toxicknight6", "link": "https://stackoverflow.com/users/5344337/toxicknight6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1442462631, "creation_date": 1442443315, "last_edit_date": 1442443426, "question_id": 32619945, "link": "https://stackoverflow.com/questions/32619945/c-getting-largest-palindrome", "title": "C++ Getting largest palindrome", "body": "<p>I am trying to get this function to work, it is supposed to take the input string and then change it to all lowercase and then get rid of all of the spaces and punctuation, but I cannot get it to work... I have a part towards the end that is commented out and I do not think that I need it, but I cannot tell...if anyone has any insight on this help would be appreciated!</p>\n\n<pre><code>bool PalindromeFinder::isPalindrome(string input) {\n//TODO define isPalindrome with the desired functionality\n// make new string without the spaces and special characters\n//isSpace and isPunct if space or thing then omit to make it a clean string\n//need to store largest palindrome so far that was found\n\n// make a string cleanString\nstring cleanString = \"\";\n\n//make the string all lowercase\ntransform(input.begin(), input.end(), input.begin(), ::tolower);\n\n    for ( int i=0; i &lt;= input.length(); i++) {\n        char cha = input[cha];\n\n        // now, if there is punctuation or a space, then remove it\n        if (ispunct(cha) || isspace(cha)) {\n            //remove the punctuation or space\n            input.erase(cha) == cleanString;\n        }\n    }\n\n\n//        for ( int i=1; i &lt;= input.length(); i++){\n//            // check to make sure there are no spaces or punctuation\n//        if (!ispunct(cha) &amp;&amp; !isspace(cha))\n//        {\n//            //if there isnt then build the word...ex) e &gt; ex &gt; exa &gt; exam\n//            input += cha;\n//\n//            //this line is for testing\n//            cout &lt;&lt; \"This is my clean string: \" &lt;&lt; input &lt;&lt; endl;\n//\n//        }\n//\n//\n//    }\n\n\n//make a empty string to use as a template\n    string revString = \"\";\n\n// for all of the chars in the string, reverse them\n    for (int i = cleanString.length()-1; i &gt;= 0; i--)\n    {\n        // use this to access array index\n        // add the letters back\n        revString += cleanString[i];\n    }\n\n// now check and make sure that it equals each other...\nif (cleanString == revString)\n{\n    // if it does, return true\n    return true;\n}\n    //otherwise return false\nelse return false;\n}\n</code></pre>\n"}, {"tags": ["c++", "math"], "comments": [{"owner": {"reputation": 42687, "user_id": 3191599, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ETGIY.jpg?s=128&g=1", "display_name": "Nate Barbettini", "link": "https://stackoverflow.com/users/3191599/nate-barbettini"}, "edited": false, "score": 0, "creation_date": 1442444530, "post_id": 32619920, "comment_id": 53090631, "body": "Does <a href=\"http://www.cplusplus.com/reference/cstdlib/abs/\" rel=\"nofollow noreferrer\">abs()</a> work?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1442444801, "post_id": 32619920, "comment_id": 53090700, "body": "Aside: you should review the pitfalls of using <code>pow</code> with integer types."}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1442444866, "post_id": 32619920, "comment_id": 53090733, "body": "Why should a negative <code>pointb</code> make the expression invalid? The formula only results in complex numbers if the <i>discriminant</i> is negative."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1442451562, "post_id": 32619920, "comment_id": 53092259, "body": "You could change to <code>complex&lt;double&gt;</code> instead of floats"}], "answers": [{"comments": [{"owner": {"reputation": 1404, "user_id": 1592481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/745cdde33a0435d5ef8065b97894ca39?s=128&d=identicon&r=PG", "display_name": "rpsml", "link": "https://stackoverflow.com/users/1592481/rpsml"}, "edited": false, "score": 0, "creation_date": 1442478217, "post_id": 32619975, "comment_id": 53101164, "body": "Actually, when the determinant is negative there is a solution in the complex plane. In this case you use <code>complex&lt;double&gt;</code> to obtain the result. It will have a real and an imaginary components."}], "tags": [], "owner": {"reputation": 15147, "user_id": 2947592, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q6DU8.jpg?s=128&g=1", "display_name": "wvdz", "link": "https://stackoverflow.com/users/2947592/wvdz"}, "is_accepted": true, "score": 1, "last_activity_date": 1442509502, "last_edit_date": 1442509502, "creation_date": 1442443513, "answer_id": 32619975, "question_id": 32619920, "link": "https://stackoverflow.com/questions/32619920/quadratic-equation-negative-discriminant-in-c/32619975#32619975", "title": "Quadratic equation: negative discriminant in C++", "body": "<p>To use the absolute value you can use <a href=\"http://www.cplusplus.com/reference/cstdlib/abs/\" rel=\"nofollow\"><code>abs()</code></a> from the <code>&lt;cstdlib&gt;</code> header.</p>\n\n<p>However, as I learned it, if the discriminant is negative, it simply means that there is no solution.</p>\n\n<p>So it might be better solution to just add an <code>if</code> clause to only execute that part of the formula if the discrimant is positive.</p>\n\n<p>In more advanced maths, the square root of a negative number does have an answer in the complex plane. To obtain this result, you can use the datatype <code>complex&lt;double&gt;</code> and use the overloaded version of <code>sqrt()</code> that takes a complex number. </p>\n"}], "owner": {"reputation": 25, "user_id": 5344322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39517033088c25931defb285a6a4271a?s=128&d=identicon&r=PG&f=1", "display_name": "TomShoe", "link": "https://stackoverflow.com/users/5344322/tomshoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "accepted_answer_id": 32619975, "answer_count": 1, "score": 2, "last_activity_date": 1442517466, "creation_date": 1442443133, "last_edit_date": 1442444486, "question_id": 32619920, "link": "https://stackoverflow.com/questions/32619920/quadratic-equation-negative-discriminant-in-c", "title": "Quadratic equation: negative discriminant in C++", "body": "<p>I'm sorry if this question is very simple, but I'm new to C++. I'm designing a program that calculates 2 roots using the quadratic formula. However, my program doesn't work when my discriminant is a negative number. </p>\n\n<pre><code>#define _USE_MATH_DEFINES // for C++\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int pointa;\n    int pointb;\n    int pointc;\n    int discriminant1;\n    float root1;\n    float root2;\n\n    cout &lt;&lt; \"Please enter a, b and c: \";\n    cin &gt;&gt; pointa;\n    cin &gt;&gt; pointb;\n    cin &gt;&gt; pointc;\n\n    discriminant1 = (pow(pointb, 2)) - (4 * pointa * pointc);\n\n    root1 = (-(pointb) + sqrt(discriminant1)) / (2 * pointa);\n    root2 = (-(pointb) - sqrt(discriminant1)) / (2 * pointa);\n\n    cout &lt;&lt; \"Root1 :\" &lt;&lt; root1 &lt;&lt; endl;\n    cout &lt;&lt; \"Root2 :\" &lt;&lt; root2 &lt;&lt; endl;\n    return 0;\n</code></pre>\n\n<p>The main problem is the input for <code>pointb</code>. Is there any way to force <code>pointb</code> to become a positive number when squaring the input, much like adding parentheses in a TI-84? When inputting a number like -1, it causes the whole formula to become invalid.</p>\n"}, {"tags": ["c++", "opengl", "sdl"], "comments": [{"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 2, "creation_date": 1442454246, "post_id": 32619763, "comment_id": 53092933, "body": "You&#39;re creating a core profile context (<code>SDL_GL_CONTEXT_PROFILE_CORE</code>), More than half of the OpenGL calls you use are deprecated, and not supported in the core profile. All the matrix stack functionality, immediate mode drawing, etc., is unavailable in the core profile."}], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 4567911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cCE3gKmcyP8/AAAAAAAAAAI/AAAAAAAAAEA/zGA-0ERM278/photo.jpg?sz=128", "display_name": "Damilola Fagoyinbo", "link": "https://stackoverflow.com/users/4567911/damilola-fagoyinbo"}, "edited": false, "score": 0, "creation_date": 1442530279, "post_id": 32635005, "comment_id": 53130932, "body": "Hi @amitp Thanks for the help, i&#39;ve made the changes you suggested but i still get a blank black screen, i still can&#39;t figure out what ive done wrong"}], "tags": [], "owner": {"reputation": 1095, "user_id": 1609116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba217329d6dcda9d355393cd82c6405?s=128&d=identicon&r=PG", "display_name": "amitp", "link": "https://stackoverflow.com/users/1609116/amitp"}, "is_accepted": true, "score": 4, "last_activity_date": 1442505847, "last_edit_date": 1495541716, "creation_date": 1442505847, "answer_id": 32635005, "question_id": 32619763, "link": "https://stackoverflow.com/questions/32619763/sdl2-opengl-black-window-on-mac/32635005#32635005", "title": "SDL2 + Opengl Black Window on Mac", "body": "<p>As <a href=\"https://stackoverflow.com/users/3530129/reto-koradi\">Reto Koradi</a> said, it's a version mismatch. OpenGL has gone through lots of changes over the decades, and the \u201ccore\u201d profile disables older features that you and LazyFoo are using.</p>\n\n<p>LazyFoo page 50 uses OpenGL 2.1 features, but your code is specifying that you'll only use core 4.1 features. Remove these lines:</p>\n\n<pre><code>SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);\nSDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 4);\nSDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);\n</code></pre>\n\n<p>to make your code run. However it will only produce a blank red screen. Remove this line:</p>\n\n<pre><code>glEnable(GL_DEPTH_TEST);\n</code></pre>\n\n<p>to get the green quad to show up on the screen:</p>\n\n<p><a href=\"https://i.stack.imgur.com/km04L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/km04L.png\" alt=\"SDL Tutorial\"></a></p>\n\n<p>Alternatively, if you want to use the depth buffer, leave that <code>glEnable</code> line in, and change your <code>glClear</code> to:</p>\n\n<pre><code>glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n</code></pre>\n\n<p>Check out <a href=\"http://lazyfoo.net/tutorials/SDL/51_SDL_and_modern_opengl/\" rel=\"nofollow noreferrer\">LazyFoo page 51</a> to see how things are written in a more modern  OpenGL. It's completely different! You have to write shaders, implement rotation yourself, put all the vertices into buffers. I learned OpenGL back with the old features and am now having to re-learn everything\u2026</p>\n"}, {"tags": [], "owner": {"reputation": 188, "user_id": 4567911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cCE3gKmcyP8/AAAAAAAAAAI/AAAAAAAAAEA/zGA-0ERM278/photo.jpg?sz=128", "display_name": "Damilola Fagoyinbo", "link": "https://stackoverflow.com/users/4567911/damilola-fagoyinbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1443190092, "creation_date": 1443190092, "answer_id": 32784076, "question_id": 32619763, "link": "https://stackoverflow.com/questions/32619763/sdl2-opengl-black-window-on-mac/32784076#32784076", "title": "SDL2 + Opengl Black Window on Mac", "body": "<p>i forgot to mention that i was using eclipse, i tried the exact same code on eclipse and it works beautifully well, but im still concerned, why it works on xcode but not on eclipse, thanks anyways</p>\n"}], "owner": {"reputation": 188, "user_id": 4567911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cCE3gKmcyP8/AAAAAAAAAAI/AAAAAAAAAEA/zGA-0ERM278/photo.jpg?sz=128", "display_name": "Damilola Fagoyinbo", "link": "https://stackoverflow.com/users/4567911/damilola-fagoyinbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1513, "favorite_count": 0, "accepted_answer_id": 32635005, "answer_count": 2, "score": 1, "last_activity_date": 1443190092, "creation_date": 1442442241, "question_id": 32619763, "link": "https://stackoverflow.com/questions/32619763/sdl2-opengl-black-window-on-mac", "title": "SDL2 + Opengl Black Window on Mac", "body": "<p>i am trying to use SDL2 and OpenGL on mac osx yosemite, i have followed the example on SDL page and also the example from Lazy Foo's Page <a href=\"http://lazyfoo.net/tutorials/SDL/50_SDL_and_opengl_2/index.php\" rel=\"nofollow\">http://lazyfoo.net/tutorials/SDL/50_SDL_and_opengl_2/index.php</a> but everytime i run the code, i get the same result, a blank window with black background, i have searched on google for a while now, but ive still not gotten any solution, i'd appreciate any help</p>\n\n<p>Below is my code</p>\n\n<pre><code>/*\n * Main.cpp\n *\n *  Created on: Sep 15, 2015\n *      Author: Damian-Machine\n */\n#include &lt;OpenGL/gl.h&gt;\n#include &lt;OpenGL/glu.h&gt;\n#include&lt;SDL.h&gt;\n#include&lt;SDL_opengl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include&lt;iostream&gt;\n#define SCREEN_WIDTH 640\n#define SCREEN_HEIGHT 480\n\nbool init();\n\nbool initGL();\n\nvoid handleKeys(unsigned char key, int x, int y);\n\nvoid update();\n\nvoid render();\n\nvoid close();\n\nSDL_Window *gWindow = NULL;\n\nSDL_GLContext gContext;\n\nbool gRenderQuad = true;\n\nint main(){\n    SDL_Event e;\n    bool quit = false;\n    if(!init()){\n        printf(\"Failed to initialize!\\n\");\n        return 0;\n    }\n    SDL_StartTextInput();\n\n\n    while(!quit){\n        while(SDL_PollEvent(&amp;e) !=0){\n            if(e.type == SDL_QUIT){\n                quit = true;\n            }else if (e.type == SDL_TEXTINPUT){\n                int x = 0, y = 0;\n                SDL_GetMouseState(&amp;x, &amp;y);\n                handleKeys(e.text.text[0], x, y);\n            }\n\n        }\n\n        render();\n    }\n\n    SDL_StopTextInput();\n\n    close();\n}\n\nbool init(){\n    bool success = true;\n    if(SDL_Init(SDL_INIT_VIDEO) &lt; 0){\n        printf(\"SDL could not initialize! SDL Error: %s\\n\", SDL_GetError());\n        success = false;\n    }else{\n        printf(\"SDL Opengl context created successfully\\n\");\n        SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);\n        SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 4);\n        SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);\n\n\n        printf(\"Checking failed status: %s\\n\", SDL_GetError());\n\n        //Create window\n        gWindow = SDL_CreateWindow( \"SDL Tutorial\", SDL_WINDOWPOS_UNDEFINED,\n                SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_OPENGL);\n\n        //std::cout &lt;&lt; \"OpenGL version \" &lt;&lt; glGetString\u200b(GL_VERSION\u200b) &lt;&lt; std::endl;\n      //std::cout &lt;&lt; \"GLSL version \" &lt;&lt; glGetString\u200b(GL_SHADING_LANGUAGE_VERSION\u200b\u200b) &lt;&lt; std::endendl;\n        if( gWindow == NULL )\n        {\n            printf( \"Window could not be created! SDL Error: %s\\n\", SDL_GetError() );\n            success = false;\n        }else { //Create context\n            gContext = SDL_GL_CreateContext( gWindow );\n            if( gContext == NULL ) {\n                printf( \"OpenGL context could not be created! SDL Error: %s\\n\", SDL_GetError() );\n                success = false;\n            } else { //Use Vsync\n                if( SDL_GL_SetSwapInterval( 1 ) &lt; 0 ) {\n                    printf( \"Warning: Unable to set VSync! SDL Error: %s\\n\", SDL_GetError() );\n                } //Initialize OpenGL\n                if( !initGL() ) {\n                    printf( \"Unable to initialize OpenGL!\\n\" ); success = false;\n                }\n            }\n        }\n    }\n    return success;\n}\n\nbool initGL(){\n    bool success = true;\n\n    GLenum error = GL_NO_ERROR;\n    glViewport(0, 0, SCREEN_WIDTH,SCREEN_HEIGHT);\n    glEnable(GL_BLEND);\n    glEnable(GL_DEPTH_TEST);\n\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n\n    error = glGetError();\n    if(error != GL_NO_ERROR){\n        printf(\"Error initializing OpenGL! %s\\n\", gluErrorString(error));\n        success = false;\n    }\n\n    glShadeModel(GL_SMOOTH);\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n\n\n    error = glGetError();\n    if(error != GL_NO_ERROR){\n        printf(\"Error initializing OpenGL %s\\n\", gluErrorString(error));\n        success = false;\n    }\n\n    glClearColor(1.f, 0.f, 0.f, 1.f);\n\n    error = glGetError();\n    if(error != GL_NO_ERROR){\n        printf(\"Error initializing OpenGL %s\\n\", gluErrorString(error));\n        success = false;\n    }\n    return success;\n}\n\nvoid handleKeys( unsigned char key, int x, int y ) {\n    //Toggle quad\n    if( key == 'q' )\n    {\n        gRenderQuad = !gRenderQuad;\n    }\n}\n\nvoid update(){\n\n}\n\nvoid render(){\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    if(gRenderQuad){\n        glRotatef(0.4f,0.0f,1.0f,0.0f);    // Rotate The cube around the Y axis\n        glRotatef(0.2f,1.0f,1.0f,1.0f);\n        glColor3f(0.0f,1.0f,0.0f);\n        glBegin(GL_QUADS);\n            glVertex2f( -0.5f, -0.5f );\n            glVertex2f( 0.5f, -0.5f );\n            glVertex2f( 0.5f, 0.5f );\n            glVertex2f( -0.5f, 0.5f );\n        glEnd();\n    }\n    SDL_GL_SwapWindow(gWindow);\n}\n\nvoid close(){\n    SDL_GL_DeleteContext(gContext);\n    SDL_DestroyWindow(gWindow);\n    gWindow = NULL;\n    SDL_Quit();\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "service", "registry", "createprocess"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1442443439, "post_id": 32619698, "comment_id": 53090316, "body": "Most likely problem: you&#39;re writing to a part of the registry that has separate 32-bit and 64-bit views.  (Note that you&#39;re launching the script as a 32-bit process.)"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1442443489, "post_id": 32619698, "comment_id": 53090330, "body": "Calling stuff from <code>SysWOW64</code> is running them under <i>WoW64</i>, are you sure you&#39;re checking the 32 bit (not 64 bit) registry for changes?"}, {"owner": {"reputation": 45, "user_id": 3294868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa2acadc12c04cb1251ea7c9e260f283?s=128&d=identicon&r=PG&f=1", "display_name": "user3294868", "link": "https://stackoverflow.com/users/3294868/user3294868"}, "edited": false, "score": 0, "creation_date": 1442503459, "post_id": 32619698, "comment_id": 53117001, "body": "Thanks guys, had no idea there was a %systemroot%\\syswow64\\regedit that was different than regedit"}], "owner": {"reputation": 45, "user_id": 3294868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa2acadc12c04cb1251ea7c9e260f283?s=128&d=identicon&r=PG&f=1", "display_name": "user3294868", "link": "https://stackoverflow.com/users/3294868/user3294868"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1442441788, "creation_date": 1442441788, "last_edit_date": 1592644375, "question_id": 32619698, "link": "https://stackoverflow.com/questions/32619698/cant-get-a-service-to-modify-the-registry-using-createprocess-on-a-script", "title": "Can&#39;t get a Service to modify the Registry using CreateProcess on a Script", "body": "<p>-I have a Service running under Local System (no desktop interaction)</p>\n<p>-I have a .js Script that makes a simple registry change in HKLM\\software\\ ...</p>\n<p>Snipet:</p>\n<pre><code>try{\nvar WshShell = new ActiveXObject(&quot;WScript.Shell&quot;);\nregvalue = WshShell.ExpandEnvironmentStrings(regvalue);\nWshShell.RegWrite(regkey, regvalue, regtype);\n}\n</code></pre>\n<p>-The script modifies the registry successfully when run through command prompt and double clicked</p>\n<p>-The script also produces a text file upon completion. Either a &quot;success.txt&quot;, or an &quot;error.txt&quot; in the case that WshShell.RegWrite() &quot;catches&quot;</p>\n<p>This is how I am calling the script in the service (only hard coding for testing)</p>\n<pre><code>STARTUPINFO si = { sizeof(STARTUPINFO) };\nsi.cb = sizeof(si);\nsi.dwFlags = STARTF_USESHOWWINDOW;\nsi.wShowWindow = SW_HIDE;\nPROCESS_INFORMATION pi;\nbool bRes = false;\nTCHAR appCmdLine[] = TEXT(&quot;C:\\\\Windows\\\\SysWOW64\\\\wscript.exe //NOLOGO C:/Test/testpatchHKLM.js&quot;);\nbRes = CreateProcess(NULL, appCmdLine, NULL, NULL, TRUE, CREATE_NO_WINDOW, NULL, NULL, &amp;si, &amp;pi);\n</code></pre>\n<p><strong>The CreateProcess returns true, the success text file is created by the script, but the registry remains unmodified.</strong></p>\n<p><em>Notes: 1) Sending the first parameter as NULL was mentioned in lots of other places, in fact that's the only way I got the script to successfully run.\n2) the script has no UI or interaction with the user\n3) shellexecute was producing the same behavior</em></p>\n<p>I know there are a million easier ways to accomplish this, but my goal is to get THIS method working</p>\n<p>I'm assuming it's something like wscript.exe not having permissions, but I shouldn't have to get the usertoken and runas since the service is creating the process...</p>\n"}, {"tags": ["c++", "makefile"], "answers": [{"tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": false, "score": 3, "last_activity_date": 1442444093, "last_edit_date": 1442444093, "creation_date": 1442441285, "answer_id": 32619604, "question_id": 32619478, "link": "https://stackoverflow.com/questions/32619478/c-makefile-not-creating-a-necessary-o-file/32619604#32619604", "title": "C++ makefile not creating a necessary .o file", "body": "<p>Your <code>testtrie.o</code> rule:</p>\n\n<pre><code>testtrie.o: prog3.cc trie.h trie.cc link.h link.cc node.h node.cc\n    g++ $(OPTS) prog3.cc\n</code></pre>\n\n<p>Does not actually build <code>testtrie.o</code>, it builds <code>prog3.o</code>.</p>\n\n<p>(It also has several prerequisite source files which it doesn't actually use, unless you're doing some unhealthy things with, e.g., <code>#include</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": true, "score": 1, "last_activity_date": 1442441370, "creation_date": 1442441370, "answer_id": 32619616, "question_id": 32619478, "link": "https://stackoverflow.com/questions/32619478/c-makefile-not-creating-a-necessary-o-file/32619616#32619616", "title": "C++ makefile not creating a necessary .o file", "body": "<p>That is because your executable (<em>testtrie</em>) depends on <em>testtrie.o</em>.</p>\n\n<p>By default, a compiler (g++ in our case), when compiling a source file (e.g. <em>src.cc</em>) if <em>-o</em> is not given the output object file will match the source file name, so it will be <em>src.o</em>. Your <em>testtrie.o</em> target is never generated; instead <em>prog3.o</em> is:</p>\n\n<pre><code>testtrie.o: prog3.cc trie.h trie.cc link.h link.cc node.h node.cc\n    g++ $(OPTS) prog3.cc\n</code></pre>\n\n<p>Modify the command to:</p>\n\n<pre><code>    g++ $(OPTS) -o $@ prog3.cc\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "is_accepted": false, "score": 1, "last_activity_date": 1442441442, "creation_date": 1442441442, "answer_id": 32619626, "question_id": 32619478, "link": "https://stackoverflow.com/questions/32619478/c-makefile-not-creating-a-necessary-o-file/32619626#32619626", "title": "C++ makefile not creating a necessary .o file", "body": "<p>The rule for the target <code>testtrie.o</code> should build a <code>testtrie.o</code> file like this:</p>\n\n<pre><code>testtrie.o: prog3.cc trie.h trie.cc link.h link.cc node.h node.cc\n    g++ $(OPTS) prog3.cc -o testtrie.o\n</code></pre>\n\n<p>You can also add an <a href=\"http://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html\" rel=\"nofollow\">automatic variable</a> <code>$@</code> to make it recognize the output filename based on the target name:</p>\n\n<pre><code>testtrie.o: prog3.cc trie.h trie.cc link.h link.cc node.h node.cc\n    g++ $(OPTS) prog3.cc -o $@\n</code></pre>\n\n<p>Both version will have the same effect. Also, <strong>remember to correct the remaining targets in the same way</strong>.</p>\n"}], "owner": {"reputation": 33, "user_id": 5344253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c67cd9e87984a012a4aefa27dd73d7c?s=128&d=identicon&r=PG&f=1", "display_name": "mrkawa", "link": "https://stackoverflow.com/users/5344253/mrkawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1499, "favorite_count": 0, "accepted_answer_id": 32619616, "answer_count": 3, "score": 2, "last_activity_date": 1442444093, "creation_date": 1442440713, "question_id": 32619478, "link": "https://stackoverflow.com/questions/32619478/c-makefile-not-creating-a-necessary-o-file", "title": "C++ makefile not creating a necessary .o file", "body": "<p>The following is my makefile for compiling a few basic C++ files into an executable:</p>\n\n<pre><code>OBJ= node.o link.o trie.o testtrie.o\nOPTS= -g -c -Wall -Werror\n\ntesttrie: $(OBJ)\n        g++ -o testtrie $(OBJ)\n\ntesttrie.o: prog3.cc trie.h trie.cc link.h link.cc node.h node.cc\n        g++ $(OPTS) prog3.cc\n\ntrie.o: trie.cc trie.h\n        g++ $(OPTS) trie.cc\n\nlink.o: link.cc link.h\n        g++ $(OPTS) link.cc\n\nnode.o: node.cc node.h\n        g++ $(OPTS) node.cc\n\nclean:\n        rm -f *.o *~\n</code></pre>\n\n<p>However, when I run <code>make</code>, upon trying to compile prog3.cc, it says:</p>\n\n<blockquote>\n  <p>g++: testtrie.o: No such file or directory.</p>\n</blockquote>\n\n<p>I cannot for the life of me figure out why it doesn't make testtrie.o...</p>\n\n<p>Thanks in advance for your help!</p>\n"}, {"tags": ["c++", "spell-checking", "spelling"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1442441074, "post_id": 32619444, "comment_id": 53089583, "body": "You may expand your dictionary into list of words with something like <code>aspell -d en dump master | aspell -l en expand &gt; my.dict</code> to build your trie."}, {"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 1, "creation_date": 1442441150, "post_id": 32619444, "comment_id": 53089614, "body": "This is usually best done with a sorted wordlist, not a dictionary. By taking advantage of sorting, you can find the spot in the sorted list that begins with blu... and each new letter has <code>log(N)</code> lookup and without any memory bloat trying to expand this stuff out with substrings, etc. The further you get into the word, the faster it gets, but it&#39;s never too slow."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1442441882, "post_id": 32619444, "comment_id": 53089866, "body": "Questions asking us to recommend or find a book, tool, <b>software library</b>, tutorial or other off-site resource are off-topic for Stack Overflow."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1442441985, "post_id": 32619444, "comment_id": 53089901, "body": "Are you sure you&#39;ve implemented the trie correctly? Looks to me you can build the tree in <i>O(n)</i> (with <i>n</i> the size of the dictionary (counting characters), and <i>O(n)</i> to lookup a string. But with O(1) update time when a new characters is given: you simply need to keep track of the <i>active node</i>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1442442172, "post_id": 32619444, "comment_id": 53089951, "body": "@screwnut: you can turn your question from looking for dictionary tool, into something to retrieve all word with derivatives from <code>&#47;usr&#47;share&#47;dict&#47;words</code>"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1442442266, "post_id": 32619444, "comment_id": 53089983, "body": "Furthermore there are a lot of algorithms in natural language processing that can turn a word into it&#39;s plular quite effectively."}, {"owner": {"reputation": 1315, "user_id": 1300177, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4996dd0400f07c6dd5776f5498c04aea?s=128&d=identicon&r=PG", "display_name": "screwnut", "link": "https://stackoverflow.com/users/1300177/screwnut"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1442443056, "post_id": 32619444, "comment_id": 53090201, "body": "@Jarod42, I&#39;ve followed your first suggestion and was able to move forward. Thanks."}, {"owner": {"reputation": 1315, "user_id": 1300177, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4996dd0400f07c6dd5776f5498c04aea?s=128&d=identicon&r=PG", "display_name": "screwnut", "link": "https://stackoverflow.com/users/1300177/screwnut"}, "reply_to_user": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1442443103, "post_id": 32619444, "comment_id": 53090223, "body": "@VoidStar I will explore that option."}, {"owner": {"reputation": 1315, "user_id": 1300177, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4996dd0400f07c6dd5776f5498c04aea?s=128&d=identicon&r=PG", "display_name": "screwnut", "link": "https://stackoverflow.com/users/1300177/screwnut"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1442443147, "post_id": 32619444, "comment_id": 53090238, "body": "@Captain Oblivious I&#39;m not looking for a recommendation based on feelings or personal preference. I have a clear cut use case with a clear cut yes/no/alternate-approach answer."}, {"owner": {"reputation": 1315, "user_id": 1300177, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4996dd0400f07c6dd5776f5498c04aea?s=128&d=identicon&r=PG", "display_name": "screwnut", "link": "https://stackoverflow.com/users/1300177/screwnut"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1442443270, "post_id": 32619444, "comment_id": 53090264, "body": "@CommuSoft What you describe is exactly what I do."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1442443423, "post_id": 32619444, "comment_id": 53090312, "body": "@screwnut Irrelevant. Requests to recommend a library are off-topic regardless if you&#39;re asking for personal opinions or not."}], "owner": {"reputation": 1315, "user_id": 1300177, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4996dd0400f07c6dd5776f5498c04aea?s=128&d=identicon&r=PG", "display_name": "screwnut", "link": "https://stackoverflow.com/users/1300177/screwnut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "closed_date": 1442738137, "answer_count": 0, "score": 3, "last_activity_date": 1442440574, "creation_date": 1442440574, "question_id": 32619444, "link": "https://stackoverflow.com/questions/32619444/is-there-a-spelling-library-that-recognizes-incomplete-words", "closed_reason": "Not suitable for this site", "title": "Is there a spelling library that recognizes incomplete words?", "body": "<p>My use case is the following: given a string, recognize all valid words starting at the beginning of the string. For example:</p>\n\n<pre><code>blueberryqqq\n</code></pre>\n\n<p>should output:</p>\n\n<pre><code>blue\nblueberry\n</code></pre>\n\n<p>To do that, I have a dictionary structure that uses a <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow\"><code>trie&lt;char&gt;</code></a>. For example, if my dictionary consists only of the two words above, it would like this:</p>\n\n<pre><code>b-&gt;l-&gt;u-&gt;e-&gt;\\0\n          -&gt;b-&gt;e-&gt;r-&gt;r-&gt;y-&gt;\\0\n</code></pre>\n\n<p>When I investigate my input string, the spell-checking process can tell me, as I go from letter to letter whether:</p>\n\n<ol>\n<li>I'm on the path to a valid word</li>\n<li>I have found a valid word</li>\n<li>I am not on the path to a valid word</li>\n</ol>\n\n<p>Note that these are flags and both <code>1</code> and <code>2</code> can be true at the same time. With that approach, I can efficiently find both <code>blue</code> and <code>blueberry</code> in one go and stop trying immediately when I reach the <code>y</code>. Continuing with the example, here's what happens as I go from letter to letter:</p>\n\n<pre><code>b:1, l:1, u:1, e:1|2, b:1, e:1, r:1, r:1, y:2\n</code></pre>\n\n<p>When I see <code>1|2</code>, I know that \"blue\" is valid word but I also know to keep going further down the string because my dictionary tells me there are more words possible. Once I reach the <code>y</code>, I stop. Quite efficient as I visit each letter only once for all valid words and I stop spell-checking as soon as the dictionary tells me there is no point in going further. Perfect!</p>\n\n<p><strong>My problem</strong> is that my dictionary trie is built from /usr/share/dict/words  and that file does not contain the plural form of \"bluberry\" which is \"blueberries\" and in general won't contain all the \"derivatives\" of all the words. So if the input string is <code>blueberriesqqq</code>, I will only get <code>blue</code> as valid.</p>\n\n<p>If I were to use a spell-checking library like <code>aspell</code> or <code>hunspell</code>, <em>as far I as I can tell</em>, I would need to spellcheck all sub-strings individually! e.g. <code>b</code>, <code>bl</code>, <code>blu</code>, etc. Quite inefficient! Not only that, but I wouldn't know when to stop checking. e.g. How do I know there aren't any words that start with <code>blueberriesqq</code>?</p>\n\n<p>So, my question becomes: is there a spell-checking library out there that would accommodate my use case?</p>\n\n<p>Note that spelling suggestions wouldn't cut it. Passing <code>blueb</code> to aspell does not return any spelling suggestions which start with <code>blueb</code>. Thus, I would end my search even though there is still the possibility of more valid words down the line.</p>\n"}, {"tags": ["c++", "arrays", "c++11", "stl", "stdarray"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1442440474, "post_id": 32619384, "comment_id": 53089334, "body": "You have uninitialized <code>int*</code> in your first snippet..."}, {"owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "edited": false, "score": 1, "creation_date": 1442440519, "post_id": 32619384, "comment_id": 53089360, "body": "You should not dereference uninitialized pointers. in the second snippet, it isn&#39;t <code>int*</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1442440546, "post_id": 32619384, "comment_id": 53089371, "body": "Out of bound access is UB, and <i>&quot;working&quot;</i> is a valid UB."}], "answers": [{"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 2, "last_activity_date": 1442440724, "creation_date": 1442440724, "answer_id": 32619486, "question_id": 32619384, "link": "https://stackoverflow.com/questions/32619384/2-dimensional-stdarray-woes/32619486#32619486", "title": "2-Dimensional std::array woes", "body": "<p>The first snippet doesn't work because you are accessing random memory locations. You declared (essentially) a bidimensional array of (uninitialized) pointers, and in your code you are dereferencing them, which is undefined behavior and very likely to cause a segfault (you are trying to write on random memory locations, which are most likely non mapped in the current virtual address space).</p>\n\n<p>The second snippet is fine; reversing the two indexes is wrong, but you don't get any error because no explicit bound checking is performed by <code>std::array</code> (or by the compiler on the underlying C arrays). What happens when you get to the invalid index (4 on the first index) is technically still undefined behavior; in practice, you are probably overwriting unrelated variables on the stack, and the program keeps on going by chance.</p>\n"}, {"comments": [{"owner": {"reputation": 146, "user_id": 3014905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c2ae16f7816a555e7e15752c60744e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Sammaron", "link": "https://stackoverflow.com/users/3014905/sammaron"}, "edited": false, "score": 0, "creation_date": 1442441490, "post_id": 32619491, "comment_id": 53089726, "body": "Thanks, this helped. For the record, I was using int pointers because you can&#39;t tell if a regular integer is uninitialized, and I thought I could maybe avoid using a wrapper class by utilizing <code>nullptr</code> to identify uninitialized pointers."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 1, "last_activity_date": 1442440745, "creation_date": 1442440745, "answer_id": 32619491, "question_id": 32619384, "link": "https://stackoverflow.com/questions/32619384/2-dimensional-stdarray-woes/32619491#32619491", "title": "2-Dimensional std::array woes", "body": "<pre><code>// This is undefined behavior too\nint* array[4][5];\n*(array[0][0]) = 0;\n\n// This is also undefined behavior, and for the same reason\nint *cell;\n*cell = 0;\n</code></pre>\n\n<p>If you want to use the object a pointer points to, you have to make it point at an actual object; e.g. by assigning the address of a valid object to it, or creating a brand new object (e.g. with <code>new</code>) and assigning it to the pointer.</p>\n\n<p>Not knowing your ultimate goal, using pointers looked like a very strange design choice; switching to an array of <code>int</code> is probably right.</p>\n"}], "owner": {"reputation": 146, "user_id": 3014905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c2ae16f7816a555e7e15752c60744e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Sammaron", "link": "https://stackoverflow.com/users/3014905/sammaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 32619486, "answer_count": 2, "score": -4, "last_activity_date": 1442440745, "creation_date": 1442440285, "question_id": 32619384, "link": "https://stackoverflow.com/questions/32619384/2-dimensional-stdarray-woes", "title": "2-Dimensional std::array woes", "body": "<p>I thought I liked the idea of std::array from C++11, but it looks like it has some quarks. I found this out because the following code gives a segmentation fault:</p>\n\n<pre><code>#include&lt;array&gt;\n#include&lt;iostream&gt;\n\nint main() {\n        std::array&lt;std::array&lt;int*, 5&gt;, 4&gt; sum;\n\n        //Initialize sum array\n        std::cout &lt;&lt; sum.size() &lt;&lt; \" \" &lt;&lt; sum[0].size() &lt;&lt; \"\\n\";\n        for (size_t i = 0; i &lt; sum.size(); i++) {\n                for (size_t j = 0; j &lt; sum[0].size(); j++) {\n                        if (i == 0 || j == 0)\n                                *(sum[i][j]) = 0;\n                        else\n                                sum[i][j] = nullptr;\n                }\n        }\n\n    return 0;\n}\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>4 5\nSegmentation fault (core dumped)\n</code></pre>\n\n<p><code>sum.size()</code> returns 4, as expected, and <code>sum[0].size()</code> returns <code>5</code>, as expected; IE it seems like we have an array with 4 rows and 5 columns. However, I get a segmentation fault when I try to execute this program (as shown above). <a href=\"http://cpptruths.blogspot.com/2011/10/multi-dimensional-arrays-in-c11.html\" rel=\"nofollow\" title=\"Hello, I&#39;m frustrated!\">This link</a> suggests that reversing the order of the way I access my array (as in change <code>sum[i][j]</code> to <code>sum[j][i]</code>) should work, but I also get a seg-fault then too. This made me think I might have been doing something wrong with my pointers (I'm a little rusty with my C++), so I changed sum to be an array of integers, so it read as follows:</p>\n\n<pre><code>#include&lt;array&gt;\n#include&lt;iostream&gt;\n\nint main() {\n        std::array&lt;std::array&lt;int, 5&gt;, 4&gt; sum;\n\n        //Initialize sum array\n        std::cout &lt;&lt; sum.size() &lt;&lt; \" \" &lt;&lt; sum[0].size() &lt;&lt; \"\\n\";\n        for (size_t i = 0; i &lt; sum.size(); i++) {\n                for (size_t j = 0; j &lt; sum[0].size(); j++) {\n                        if (i == 0 || j == 0)\n                                sum[i][j] = 0; //works as sum[j][i] too!!!\n                        else\n                                sum[i][j] = 1;\n\n        std::cout &lt;&lt; sum[i][j];\n                }\n     std::cout &lt;&lt; \"\\n\";\n        }\n\n        std::cout &lt;&lt; \"here\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>Which works, and outputs:</p>\n\n<pre><code>4 5\n00000\n01111\n01111\n01111\nhere\n</code></pre>\n\n<p>However, I'm confused, because if I switch the <code>sum[i][j]</code>'s to <code>sum[j][i]</code>'s, it also works and outputs the same thing! I would expect to get a seg-fault when I try <code>sum[5][0]</code> during the final iteration of the inner loop the first time that it is run! I am now willing to call myself hella confused. What is going on?</p>\n\n<p><strong>Extra info:</strong> I am using g++ 4.8.4 with the -std=c++11 flag set.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 174, "user_id": 5104827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86e2f7136e0aeef576d7842039b628d3?s=128&d=identicon&r=PG&f=1", "display_name": "jchamp", "link": "https://stackoverflow.com/users/5104827/jchamp"}, "edited": false, "score": 0, "creation_date": 1442440242, "post_id": 32619330, "comment_id": 53089231, "body": "Have you tried testing it yourself?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1442440245, "post_id": 32619330, "comment_id": 53089234, "body": "What did you observe, when running that code?"}], "answers": [{"tags": [], "owner": {"reputation": 906, "user_id": 1465153, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/be797b4ecadeda85e294669440a4efc0?s=128&d=identicon&r=PG", "display_name": "Anachronist", "link": "https://stackoverflow.com/users/1465153/anachronist"}, "is_accepted": false, "score": 1, "last_activity_date": 1442440377, "creation_date": 1442440377, "answer_id": 32619403, "question_id": 32619330, "link": "https://stackoverflow.com/questions/32619330/does-this-while-condition-read-the-line/32619403#32619403", "title": "Does this while condition read the line?", "body": "<p>In order for the condition to be evaluated, getline() must be executed, and that execution, if successful would have to read the text from the stream and store it in readLine. Have you tried it? </p>\n"}], "owner": {"reputation": 11, "user_id": 4505409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9ff4a5632af165f2cbe68f0e2d6c2463?s=128&d=identicon&r=PG&f=1", "display_name": "TheMrDrake", "link": "https://stackoverflow.com/users/4505409/themrdrake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1442440377, "creation_date": 1442440055, "question_id": 32619330, "link": "https://stackoverflow.com/questions/32619330/does-this-while-condition-read-the-line", "title": "Does this while condition read the line?", "body": "<p>I reading this book and it had this while statement condition,</p>\n\n<pre><code>while(!inFile.getline(readLine, MAX_CHARACTERS, '\\n').eof())\n</code></pre>\n\n<p>I know what the condition means, I just want to know if it reads the line and stores it into my variable, and therefore don't have to use inFile.getline another time to get the same line? </p>\n\n<p>In other words I don't want to re-read the same line twice or even skip a line.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "is_accepted": false, "score": 0, "last_activity_date": 1442440676, "last_edit_date": 1442440676, "creation_date": 1442439936, "answer_id": 32619294, "question_id": 32619206, "link": "https://stackoverflow.com/questions/32619206/using-sqlite3-in-visual-c/32619294#32619294", "title": "Using sqlite3 in visual c++", "body": "<p>This:</p>\n\n<pre><code>sqlite3_exec(db, sql, callback, 0, &amp;zErrMsg);\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>sqlite3_exec(db, sql, &amp;testingSqlite::callback, 0, &amp;zErrMsg);\n</code></pre>\n\n<p>The latter is the correct \"member of\" syntax. If you ever could use the former, it was nonstandard (some compilers did allow it).\nThat said, it won't work either because the function signature does not indicate it can be a member function. </p>\n\n<p>Instead, you can use the \"void *\" of the parameter list.</p>\n\n<p>That is, you must create something like</p>\n\n<pre><code>int callback(void *o, int argc, char **argv, char **cname)\n{\n testingSqlite op* = reinterpret_cast&lt;testingSqlite *&gt;(o);\n\n\n return op-&gt;callback( argc, argv, cname );\n}\n</code></pre>\n\n<p>This means your callback in tesingSqlite doesn't take the void *</p>\n\n<p>You also provide c style callback as the function pointer, not your member function. You also must provide the 'this' pointer as the 4th parameter (it becomes the void * when it calls you back), like:</p>\n\n<pre><code>sqlite3_exec( db, sql, callback, this, &amp;zErrMsg );\n</code></pre>\n"}], "owner": {"reputation": 112, "user_id": 4871749, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1103151869700119/picture?type=large", "display_name": "ibadia", "link": "https://stackoverflow.com/users/4871749/ibadia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 750, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1442440676, "creation_date": 1442439558, "question_id": 32619206, "link": "https://stackoverflow.com/questions/32619206/using-sqlite3-in-visual-c", "title": "Using sqlite3 in visual c++", "body": "<p>I am using visual studio 2015 and i want to use sqlite3 with it, i have managed to integrate sqlite3 into it, but i can only use it through native c style, i cannot use sqlite using classes as we do in c++. There is a table test in my database which contain values (id int , id1 int , name string)\nFor example this program runs fine</p>\n\n<pre><code>void forprinting(string a)\n{\n    cout  &lt;&lt; a&lt;&lt;\"\\n\";\n}\n int callback(void *NotUsed, int argc, char **argv, char **azColName) {\n    int i;\n    string testing;\n    string test2;\n       for (i = 0; i&lt;argc; i++) \n       {\n          testing = testing + azColName[i];//irrelevant\n          test2 += argv[i];\n       }\n    forprinting(test2);\n    printf(\"\\n\");\n    return 0;\n}\n\n\n\nint main()\n{\n    char *zErrMsg = 0;\n    sqlite3 *db;\n    int rc;\n    rc = sqlite3_open(\"DATA.db\", &amp;db);\n    char *data;\n    const char *sql;\n    sql = \"SELECT * FROM test;\";\n    sqlite3_exec(db, sql, callback, 0, &amp;zErrMsg);\n     sqlite3_close(db);\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>The output of this program is  0 0 test\nwhich is fine but when i try to implement the same logic using classes i get the error here</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\nusing namespace std;\nvoid forprinting(string a) {\n    cout &lt;&lt; a &lt;&lt; \"\\n\";\n} \nclass testingSqlite {\n    public :\n    int callback(void *NotUsed, int argc, char **argv, char **azColName) {\n        int i;\n        string testing;\n        string test2;\n        for (i = 0; i&lt;argc; i++) {\n\n            testing = testing + azColName[i];\n            test2 += argv[i];\n        }\n        forprinting(test2);\n        printf(\"\\n\");\n        return 0;\n    }\n    void initiate() {\n        char *zErrMsg = 0;\n        sqlite3 *db;\n        int rc;\n        rc = sqlite3_open(\"DATA.db\", &amp;db);\n        char *data;\n        const char *sql;\n        sql = \"SELECT * FROM test;\";\n        sqlite3_exec(db, sql, callback, 0, &amp;zErrMsg);\n        sqlite3_close(db);\n\n    }\n};\nint main()\n{\n    testingSqlite test1;\n    test1.initiate();\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>I know its a bad practice to define functions in class but i was in hurry. And it is giving </p>\n\n<pre><code>Error C3867 'testingSqlite::callback': non-standard syntax; use '&amp;' to create a pointer to member\n\n\n\nError (active)      argument of type \"int (testingSqlite::*)(void *NotUsed, int argc, char **argv, char **azColName)\" is incompatible with parameter of type \"int (*)(void *, int, char **, char **)\"\n</code></pre>\n\n<p>I tried to change the function arguments to fix it but nothing yet works.</p>\n"}, {"tags": ["c++", "qt", "state-machine"], "comments": [{"owner": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "edited": false, "score": 1, "creation_date": 1442472397, "post_id": 32619103, "comment_id": 53098117, "body": "Problem can be because QStateMachine inhereted from QState class. QState class in consturctor can accept parent state, therefore, &quot;this&quot; pointer is a parent state for QStateMachine."}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1470255717, "last_edit_date": 1470255717, "creation_date": 1442500465, "answer_id": 32633027, "question_id": 32619103, "link": "https://stackoverflow.com/questions/32619103/why-a-nested-qstatemachine-inside-subclass-of-qstate-with-this-pointer-in-constr/32633027#32633027", "title": "Why a nested QStateMachine inside subclass of QState with this pointer in constructor causes that an outer state machine can&#39;t make a transition?", "body": "<p>You're trying to modify a state machine's statechart from a state's event handler. That's not supported by the state machine. Since <code>QStateMachine</code> is-a <code>QState</code>, by adding it as a child you're modifying the statechart.</p>\n\n<p>When <code>onEntry</code> is called, the statechart looks as follows:<br>\n<img src=\"https://i.stack.imgur.com/dfzRU.png\" alt=\"statechart before\"><br>\nDuring <code>onEntry</code>, you change it to something resembling the following. The <code>machine</code> is not an initial state, it's just a dangling, useless state.  Even if it weren't dangling, it'd still be unusable as it was added during a state transition.<br>\n<img src=\"https://i.stack.imgur.com/AECiO.png\" alt=\"statechart after\"></p>\n\n\n\n<p>Since <code>QStateMachine</code> is a <code>QState</code>, when you make it a direct child of a state it becomes a substate of that state. If all you want is to use the state as a container for the state machine, you can insert an intervening non-state object between the parent and the state.</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/statemachine-nested-32619103\n#include &lt;QtCore&gt;\n\nstruct OuterState : QState\n{\n   QStateMachine * machine { nullptr };\n   virtual void onEntry(QEvent *) Q_DECL_OVERRIDE\n   {\n      // through an intervening container\n      auto container = new QObject(this);\n      machine = new QStateMachine(container);\n   }\n   OuterState(QState * parent = 0) : QState(parent) {}\n};\n</code></pre>\n\n<p>Finally, the pseudo-synchronous code that invokes <code>processEvents</code> is unnecessary. You can do things when states are entered, etc. Recall that since a signal is an invokable method just like a slot is, you can connect signals to signals. In fact, since all you want to achieve is an unconditional transition, you might as well use one.</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n   QCoreApplication a(argc, argv);\n\n   // create outer state machine with all states\n   QStateMachine outerStateMachine;\n   OuterState state1 { &amp;outerStateMachine };\n   QFinalState state2 { &amp;outerStateMachine };\n   state1.addTransition(&amp;state2);\n   outerStateMachine.setInitialState(&amp;state1);\n   outerStateMachine.start();\n\n   a.connect(&amp;state1, &amp;QState::entered, []{ qDebug() &lt;&lt; \"state1 entered\"; });\n   a.connect(&amp;state2, &amp;QState::entered, []{ qDebug() &lt;&lt; \"state2 entered\"; });\n   a.connect(&amp;state2, &amp;QState::entered, qApp, &amp;QCoreApplication::quit);\n   return a.exec();\n}\n</code></pre>\n\n<p>The above is, more or less, how self-contained test cases should look: single file, no fluff and verbosity that detracts from the issue at hand.</p>\n"}], "owner": {"reputation": 13541, "user_id": 738811, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/eade85893a434f5aa157fbb7d3d52dfe?s=128&d=identicon&r=PG", "display_name": "scdmb", "link": "https://stackoverflow.com/users/738811/scdmb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 0, "accepted_answer_id": 32633027, "answer_count": 1, "score": 2, "last_activity_date": 1470255717, "creation_date": 1442439058, "question_id": 32619103, "link": "https://stackoverflow.com/questions/32619103/why-a-nested-qstatemachine-inside-subclass-of-qstate-with-this-pointer-in-constr", "title": "Why a nested QStateMachine inside subclass of QState with this pointer in constructor causes that an outer state machine can&#39;t make a transition?", "body": "<p>There is a state machine (called the outer). This machine has two states - first and the final. First state is custom implemented. Inside the first state there is created another state machine (called the inner) which in this example does nothing.</p>\n\n<p>Outer state machine with two states:</p>\n\n<pre><code>  #include &lt;QDebug&gt;\n  #include &lt;QCoreApplication&gt;\n  #include &lt;QTimer&gt;\n  #include &lt;custom_outer_state.hpp&gt;\n  #include &lt;QFinalState&gt;\n  #include \"a.hpp\"\n\n  class Functor\n  {\n  public:\n     void operator()()\n     {\n        // just emits a signal\n        TestObject outerTestObject;\n\n        // create outer state machine with all states\n        QStateMachine outerStateMachine;\n        CustomOuterState *state1 = new CustomOuterState();\n        QFinalState *state2 = new QFinalState();\n        state1-&gt;addTransition(&amp;outerTestObject, SIGNAL(testObjectSignal()), state2);\n        outerStateMachine.addState(state1);\n        outerStateMachine.addState(state2);\n        outerStateMachine.setInitialState(state1);\n        outerStateMachine.start();\n\n        // process state machine transitions\n        QCoreApplication::processEvents();\n        qDebug() &lt;&lt; &amp;outerStateMachine &lt;&lt; \": Outer state machine first state \" &lt;&lt;  outerStateMachine.configuration();\n        outerTestObject.testObjectSignal();\n        QCoreApplication::processEvents();\n        qDebug() &lt;&lt; &amp;outerStateMachine &lt;&lt; \": Outer state machine second state \" &lt;&lt;  outerStateMachine.configuration();\n     }\n  };\n\n  int main(int argc, char *argv[])\n  {\n    QCoreApplication app(argc, argv);\n    QTimer::singleShot(0, Functor());\n    return QCoreApplication::exec();\n  }\n</code></pre>\n\n<p>And custom state:</p>\n\n<pre><code>  #ifndef CUSTOM_OUTER_STATE_H\n  #define CUSTOM_OUTER_STATE_H\n\n  #include &lt;QState&gt;\n  #include &lt;QStateMachine&gt;\n\n  class CustomOuterState : public QState\n  {\n     Q_OBJECT\n  public:\n     virtual void onEntry(QEvent * event)\n     {\n        // create inner state machine\n        machine = new QStateMachine();\n        /*\n         * some operations with the machine\n         */\n     }\n  private:\n     QStateMachine* machine;\n  };\n\n  #endif\n</code></pre>\n\n<p>And test object which just emits a signal:</p>\n\n<pre><code>  #ifndef A_H\n  #define A_H\n\n  #include &lt;QObject&gt;\n\n  class TestObject : public QObject\n  {\n     Q_OBJECT\n  signals:\n     void testObjectSignal();\n  };\n\n  #endif\n</code></pre>\n\n<p>So this code works as expected - the outer state machine goes from the first state to the final:</p>\n\n<pre><code>  QStateMachine(0x7fffc00f0a20) : Outer state machine first state  QSet(CustomOuterState(0xe0a380) ) \n  QStateMachine(0x7fffc00f0a20) : Outer state machine second state  QSet(QFinalState(0xe0a460) )\n</code></pre>\n\n<p>But with a little change inside the custom state - passing <code>this</code> (which is a subclass of <code>QState</code>) to the inner state machine constructor</p>\n\n<pre><code>  -        machine = new QStateMachine();\n  +        machine = new QStateMachine(this);\n</code></pre>\n\n<p>results that the <strong>outer</strong> state machine doesn't want to make a transition - it stays in the first state although the transition signal was sent</p>\n\n<pre><code>  QStateMachine(0x7fff219edcb0) : Outer state machine first state  QSet(CustomOuterState(0x1fc4380) ) \n  QStateMachine(0x7fff219edcb0) : Outer state machine second state  QSet(CustomOuterState(0x1fc4380) )\n</code></pre>\n\n<p>The solution is simple - just delete the inner state machine and everything works. But the question is why the bad thing happens. </p>\n\n<p>So, why adding <code>this</code> which is a subclass of <code>QState</code> to the <strong>inner</strong> state machine constructor results so that the <strong>outer</strong> state machine doesn't want to make a transition?</p>\n"}, {"tags": ["c++", "xcode", "include", "libraries", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1442440206, "post_id": 32619005, "comment_id": 53089215, "body": "All those... images... will be lost, in time, like tears... in... rain. Time... to summarize."}, {"owner": {"reputation": 677, "user_id": 5299149, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh6.googleusercontent.com/-610uudJP_8U/AAAAAAAAAAI/AAAAAAAAD4E/l5gyXwDnsrM/photo.jpg?sz=128", "display_name": "Maria-Andersado", "link": "https://stackoverflow.com/users/5299149/maria-andersado"}, "edited": false, "score": 0, "creation_date": 1442441820, "post_id": 32619005, "comment_id": 53089847, "body": "When I select &quot;header search paths&quot; that box doesn&#39;t pop up. Showing the dropdown menu gives me the options &quot;debug&quot; and &quot;release&quot; which let me add things, but not in the way seen in your image. Should I put the path in one of those?"}, {"owner": {"reputation": 1304, "user_id": 2289400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kzgpa.jpg?s=128&g=1", "display_name": "eosterberg", "link": "https://stackoverflow.com/users/2289400/eosterberg"}, "edited": false, "score": 0, "creation_date": 1442443450, "post_id": 32619005, "comment_id": 53090323, "body": "Double click on the right side should give you option to add into both at the same time if I remember correctly."}], "tags": [], "owner": {"reputation": 1304, "user_id": 2289400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kzgpa.jpg?s=128&g=1", "display_name": "eosterberg", "link": "https://stackoverflow.com/users/2289400/eosterberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1442438701, "creation_date": 1442438701, "answer_id": 32619005, "question_id": 32618920, "link": "https://stackoverflow.com/questions/32618920/attempting-to-include-a-library-in-xcode-file-not-found/32619005#32619005", "title": "Attempting to include a Library in Xcode, file not found", "body": "<p>Sounds like you are missing header search paths:</p>\n\n<p><img src=\"https://i.stack.imgur.com/97V2L.jpg\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 677, "user_id": 5299149, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh6.googleusercontent.com/-610uudJP_8U/AAAAAAAAAAI/AAAAAAAAD4E/l5gyXwDnsrM/photo.jpg?sz=128", "display_name": "Maria-Andersado", "link": "https://stackoverflow.com/users/5299149/maria-andersado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4433, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442438701, "creation_date": 1442438367, "question_id": 32618920, "link": "https://stackoverflow.com/questions/32618920/attempting-to-include-a-library-in-xcode-file-not-found", "title": "Attempting to include a Library in Xcode, file not found", "body": "<p>I'm trying to create a program that uses a lot of linear algebra and OpenGL, and a colleague of mine recommended that I use the Eigen library to make things a lot simpler. After downloading and extracting the library off of Eigen's official website and I clicked on the project, found the \"Link Binary with Libraries\" option, went into to the folder that resulted from the unarchiving (eigen-eigen-bdd17ee3b1b3), and then found the Eigen folder. This folder contains all of the header files. </p>\n\n<p>The library showed up on the sidebar, and when I go into the correct sub-folder the header files were all there too. According to the Eigen website, you only need the header files for the includes to work, but no matter how I set up the filepath in the include statement, even if what I can physically see what I'm including on the sidebar, XCode tells me it can't find the file. I'm using an older version of XCode 4. Any advice?</p>\n"}, {"tags": ["c++", "conways-game-of-life"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1442439084, "post_id": 32618909, "comment_id": 53088724, "body": "how do you update the grid? If i remember right, you have to have two grids in memory, the old one and the updated one so that you are counting the old neighbors and not the already updated ones"}], "answers": [{"tags": [], "owner": {"reputation": 3162, "user_id": 174650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2e55d51549d77eee5e6eb14d57ecfe5?s=128&d=identicon&r=PG", "display_name": "Marius", "link": "https://stackoverflow.com/users/174650/marius"}, "is_accepted": true, "score": 0, "last_activity_date": 1442489588, "creation_date": 1442489588, "answer_id": 32629321, "question_id": 32618909, "link": "https://stackoverflow.com/questions/32618909/counting-neighboring-cells-for-conways-game-of-life-in-c/32629321#32629321", "title": "Counting neighboring cells for Conway&#39;s Game of Life in C++", "body": "<p>As @AlexD pointed out, <code>i&lt;row+1</code> should be <code>i&lt;=row+1</code> which would explain your answer.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4584619"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2164, "favorite_count": 0, "accepted_answer_id": 32629321, "answer_count": 1, "score": 1, "last_activity_date": 1442489588, "creation_date": 1442438323, "last_edit_date": 1442438891, "question_id": 32618909, "link": "https://stackoverflow.com/questions/32618909/counting-neighboring-cells-for-conways-game-of-life-in-c", "title": "Counting neighboring cells for Conway&#39;s Game of Life in C++", "body": "<p>I am trying to write a count neighbor method for Conway's game of life. If a dead cell is neighbored by 2 or 3 living cells, it should come alive. However, my code is not correctly counting all the neighbors. If i give the input coordinates (10, 10), (10, 11), (10, 12) which would produce </p>\n\n<pre><code>   ***\n</code></pre>\n\n<p>the program will print the next generation as </p>\n\n<pre><code>    *\n    *\n</code></pre>\n\n<p>with coordinates at (10, 11) and (11, 11). However, there should also be a point at (9,11). I know that the problem occurs in this function and that for point (9,11) the function is not counting 3 neighbors.   </p>\n\n<pre><code>int Life::neighbor_count (int row, int col)\n{\n  int i, j;\n  int count=0;\n  for(i=row-1; i&lt;row+1; i++){\n    for (j=col-1; j&lt;=col+1; j++){\n      count +=grid[i][j];//increase the count is neighbor is alive\n    }\n  }\n  count -=grid [row][col];//reduce count, since cell is not its own neighbor\n  return count;\n}\n</code></pre>\n"}, {"tags": ["c++", "boolean-expression"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 5, "creation_date": 1442438390, "post_id": 32618884, "comment_id": 53088412, "body": "There is no language C/C++. If that was asked in the interview, you should look for a different job. However, logical operators are explained in every C(++) book."}, {"owner": {"reputation": 2741, "user_id": 866104, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a3861ea6213ff2a02cd97480d1e8f393?s=128&d=identicon&r=PG", "display_name": "Michelle", "link": "https://stackoverflow.com/users/866104/michelle"}, "edited": false, "score": 6, "creation_date": 1442438403, "post_id": 32618884, "comment_id": 53088422, "body": "1 is due to short-circuit evaluation."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1442438716, "post_id": 32618884, "comment_id": 53088566, "body": "2 is due to a float and a double (5.2) not having the same representation, and also comparing real numbers for equality is likely to fail. Plenty of SO questions here about this."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1442438965, "post_id": 32618884, "comment_id": 53088676, "body": "And 3 is because <code>static</code>."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 1, "creation_date": 1442439125, "post_id": 32618884, "comment_id": 53088744, "body": "3: The incrementation operator doesn&#39;t have any idea about how you are going to use the resulting value. So it will, of course, execute the increment, as always. It is irrelevant, if you use it in a <code>return</code> or anywhere else. If the expression is evaluated, an increment happens. Period. And since <code>x</code> is static, the increment is permanent."}, {"owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1442439173, "post_id": 32618884, "comment_id": 53088762, "body": "@juanchopanza Is it? It is simply because of the post increment operator used in the return statement."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1442439300, "post_id": 32618884, "comment_id": 53088822, "body": "3 is because <code>static int x = 0;</code> is only executed once, not on every function call."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "edited": false, "score": 1, "creation_date": 1442439338, "post_id": 32618884, "comment_id": 53088836, "body": "@REACHUS Maybe you misunderstood the &quot;question&quot;. OP is surprised the return value isn&#39;t always 0. It is incremented by one each time the function it called. That is because <code>static</code>. Or one could say &quot;because C++&quot;."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1442439467, "post_id": 32618884, "comment_id": 53088891, "body": "@juanchopanza I think you misunderstood it. The OP is aware of the <code>static</code> part, but thought that the incrementation was &quot;never executed&quot; because it&#39;s inside a return statement."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1442439822, "post_id": 32618884, "comment_id": 53089038, "body": "@mastov I wouldn&#39;t assume that OP is aware of either of those things."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1442439954, "post_id": 32618884, "comment_id": 53089104, "body": "1) because of lazy evaluation, you have <code>a &amp;&amp; b || c</code>, <code>a</code> is True, <code>b</code> is True -&gt; <code>a &amp;&amp; b</code> is True, so the result will be True no matter what <code>c</code>  value is, so it&#39;s not evaluated(executed); 2) by default if a real number is specified its type is <i>double</i> (8bytes), you declared your var as _float_(4bytes) - loss of precision (in debug mode you&#39;d see its value: 5.1999998); 3) because of <code>static</code> each time <code>n</code> will be called it will return a the value returned by its last call + 1 (first call returns 0)."}], "answers": [{"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 3, "last_activity_date": 1442440604, "last_edit_date": 1442440604, "creation_date": 1442439745, "answer_id": 32619248, "question_id": 32618884, "link": "https://stackoverflow.com/questions/32618884/some-questions-about-evaluation-order-and-comparison/32619248#32619248", "title": "some questions about evaluation order and comparison", "body": "<p>Next time, when you have multiple questions, please ask them separately.</p>\n\n<p><strong>Answer to question 1:</strong></p>\n\n<p>Several things:</p>\n\n<ol>\n<li><p>Both the <code>&amp;&amp;</code> and <code>||</code> operators force left-to-right evaluation<sup>1</sup>, and both introduce a <em>sequence point</em>; the left-hand operand will be evaluated and all side effects will be applied before the right-hand operand is evaluated;</p></li>\n<li><p>Both the <code>&amp;&amp;</code> and <code>||</code> operators <em>short circuit</em> - if the value of the expression can be determined from the left-hand side operand, then the right-hand side operand will not be evaluated;</p>\n\n<ul>\n<li>in the expression <code>a || b</code>, <code>b</code> will not be evaluated if <code>a</code> is non-zero;</li>\n<li>in the expression <code>a &amp;&amp; b</code>, <code>b</code> will not be evaluated if <code>a</code> is zero;</li>\n</ul></li>\n<li><p><code>&amp;&amp;</code> has higher precedence than <code>||</code>, so <code>a || b &amp;&amp; c</code> is parsed as <code>a || (b &amp;&amp; c)</code>;</p></li>\n<li><p><code>x++</code> evaluates to the current value of <code>x</code>, and as a <em>side effect</em> increments <code>x</code>;</p></li>\n<li><p><code>++x</code> evaluates to the current value of <code>x</code> plus 1, and as a <em>side effect</em> increments <code>x</code>.  </p></li>\n</ol>\n\n<p>So, the expression</p>\n\n<pre><code>++i &amp;&amp; ++j || ++k\n</code></pre>\n\n<p>is <em>parsed</em> as</p>\n\n<pre><code>(++i &amp;&amp; ++j) || ++k\n</code></pre>\n\n<p>and <em>evaluated</em> as follows:</p>\n\n<ol>\n<li><code>++i</code> is evaluated; the result is <code>-2</code> which is not zero, so:</li>\n<li><code>++j</code> is evaluated; the result is <code>3</code>, so:</li>\n<li>both <code>-2</code> and <code>3</code> are non-zero, so:</li>\n<li><code>++i &amp;&amp; ++j</code> evaluates to 1, so:</li>\n<li><code>++k</code> is not evaluated at all.  </li>\n</ol>\n\n<p><strong>Answer to question 2:</strong></p>\n\n<p>Again, several issues:</p>\n\n<ol>\n<li><p>Most floating point values cannot be represented <em>exactly</em>; they are stored as approximations (you can't fit an infinite number of values into a finite number of bits);</p></li>\n<li><p>The floating-point constant expression <code>5.2</code> has type <code>double</code>, not <code>float</code>; to make it <code>float</code>, you would use a <code>f</code> suffix - <code>5.2f</code>;</p></li>\n<li><p><code>float</code> and <code>double</code> have different representations (double devotes more bits to both the exponent and fraction), so they will store different approximations for the same values, which is why the <code>==</code> comparison didn't work.  </p></li>\n<li><p>Because of this, you should not use <code>==</code> to compare floating-point values; usually, you will take the difference between the two values and make sure that it's smaller than some epsilon value (bearing in mind that the epsilon value depends on magnitude).  </p></li>\n</ol>\n\n<p><strong>Answer to question 3:</strong></p>\n\n<p>You are returning the result of the <em>expression</em> <code>x++</code>, but the expression still has the side effect of incrementing <code>x</code> (and the side effect is applied before the end of the <code>return</code> statement).  </p>\n\n<p><hr>\n<sup>1.  Most operators in C do <em>not</em> force a specific order of evaluation - given an expression like <code>a + b * c</code>, each of <code>a</code>, <code>b</code>, and <code>c</code> may be evaluated <em>in any order</em>.  The <em>result</em> of <code>b * c</code> must be known before it can be added to the result of <code>a</code>, but that doesn't mean that either <code>b</code> or <code>c</code> must be <em>evaluated</em> before <code>a</code>.<br>\n</sup></p>\n"}, {"tags": [], "owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "is_accepted": false, "score": 1, "last_activity_date": 1442439762, "last_edit_date": 1495541271, "creation_date": 1442439762, "answer_id": 32619253, "question_id": 32618884, "link": "https://stackoverflow.com/questions/32618884/some-questions-about-evaluation-order-and-comparison/32619253#32619253", "title": "some questions about evaluation order and comparison", "body": "<blockquote>\n  <ol>\n  <li>C and C++ operate on short-circuit logic.</li>\n  </ol>\n</blockquote>\n\n<p>Consider the following:</p>\n\n<pre><code>bool myBool = (1 || 0+6*4);\n</code></pre>\n\n<p><code>myBool</code> will evaluate as soon as it can. In this case, it will evaluate to true because the left argument in the <code>||</code> is true. It stops evaluating immediately. Same goes for <code>&amp;&amp;</code>. This is why it's idiomatic to add the more likely fail case on the left-side of boolean operators.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>It is false because floats cannot be represented perfectly by binary.</li>\n  </ol>\n</blockquote>\n\n<p>In this case, it would actually evaluate to true. However, consider the following example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n   double i = 0.1;\n   double total = 0.0;\n   for(int j = 0; j &lt; 10000; j++) {\n      total+=i;\n   }\n\n   // total = 0.1*10000 = 1000... right?\n\n   std::cout &lt;&lt; std::boolalpha &lt;&lt; \"total == 1000.0 ? \" &lt;&lt; (total == 1000.0) &lt;&lt; std::endl;\n\n   return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/pGQny9\" rel=\"nofollow noreferrer\">Here</a>'s the output of the above program. Comparing floats and doubles is a tricky thing in computing. Be careful doing it.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Because it is static, it will be increment before return and remain its static value each  time the function is called.</li>\n  </ol>\n</blockquote>\n\n<p>I won't get into this too much because it's outlined quite nicely in <a href=\"https://stackoverflow.com/questions/246564/what-is-the-lifetime-of-a-static-variable-in-a-c-function\">this question about lifetime of static variables</a>. Essentially something that is <code>static</code> lives as long as the program regardless of visibility.</p>\n"}, {"tags": [], "owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1442440296, "last_edit_date": 1495541271, "creation_date": 1442440296, "answer_id": 32619387, "question_id": 32618884, "link": "https://stackoverflow.com/questions/32618884/some-questions-about-evaluation-order-and-comparison/32619387#32619387", "title": "some questions about evaluation order and comparison", "body": "<h2>Question number 1:</h2>\n\n<p>The <code>&amp;&amp;</code> operator has precedence over <code>||</code>, so it will be evaluated first. Both terms (<code>++i</code> and <code>++j</code>) have pre-increment, so first they are increased to -2 and 3 respectively, then they are ANDed. In C++, 0 is <code>false</code> and everything else is <code>true</code>. In this case, both terms are <code>true</code> (that is, non-zero), so the <code>&amp;&amp;</code> returns <code>true</code>. Now it's time to test <code>true || ++k</code>. Here, an optimization kicks in: since <code>true || anything</code> will always be <code>true</code>, the compiler doesn't even test the expression. That is, it doesn't execute it. And <code>k</code> is not incremented. That's why it is a very bad habit to have the code inside if-statements do something - you can't be sure it will be run, depending on the condition. If you <em>need</em> it to run, make sure it is not put there or it could be optimized away.</p>\n\n<h2>Question number 2:</h2>\n\n<p>Floating point arithmetics is tricky - representing a number exactly is often not possible, and the numbers that are really used are just a very close approximation - close enough that it looks like it works, but if you go checking every small bit you notice that numbers aren't what they look like. By default, a number is treated as a <code>double</code>. A <code>double</code> and a <code>float</code>, though they look the same, are not the same. This has already been covered here: <a href=\"https://stackoverflow.com/questions/1839422/strange-output-in-comparison-of-float-with-float-literal\">strange output in comparison of float with float literal</a>. And I really recommend to read one of the linked articles, this one: <a href=\"http://docs.sun.com/source/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">\"What Every Computer Scientist Should Know About Floating-Point Arithmetic\"</a></p>\n\n<h2>Question number 3:</h2>\n\n<p>You are right that the returned value is 0 (the first time!), but then you think that instruction is split in two parts, the first of which being a <code>return</code>, which should cause the second one (the increment) to be skipped. No, it doesn't work like that. The increment is executed in any case. Post increment works like this: make a copy, increase the original, return the copy. Whatever called the post-increment sees the original value, but the increment <em>does</em> take place. And since <code>x</code> is <code>static</code>, the value will be kept, so that the next time the function <code>n()</code> is called, the initial value of <code>x</code> will be 1. And then 2, 3, and so on.</p>\n"}], "owner": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 32619248, "answer_count": 3, "score": -4, "last_activity_date": 1442440604, "creation_date": 1442438226, "last_edit_date": 1442438360, "question_id": 32618884, "link": "https://stackoverflow.com/questions/32618884/some-questions-about-evaluation-order-and-comparison", "title": "some questions about evaluation order and comparison", "body": "<p>In a C/C++ interview test I found some questions which I have not answered correctly, I used Visual C++ to check the results, I hope you can help me to understand them :</p>\n\n<p>1)</p>\n\n<pre><code>int i=-3, j=2, k=0, m;\nm = ++i &amp;&amp; ++j || ++k; // k not incremented why ???\ncout &lt;&lt; i &lt;&lt; \" \" &lt;&lt; j &lt;&lt; \" \" &lt;&lt; k &lt;&lt; \" \" &lt;&lt; m; // -2 3 0 1 why it's not -2 3 1 1 !!!\n</code></pre>\n\n<p>=> why k is not incremented especially there is a ++ before it ? and I want to know the order in executing such line, I couldn't do this in debug mode.</p>\n\n<p>Can you please give me a rule to follow to evaluate such expressions where there is stuff like ++variable or variable++ Thank you</p>\n\n<p>2) why this comparison is false ?</p>\n\n<pre><code>float a = 5.2;\nif(a == 5.2) // false\n{}\n</code></pre>\n\n<p>when I add a float cast to 5.2 it works....</p>\n\n<p>3)</p>\n\n<pre><code>int n()\n{\n    static int x = 0;\n    return x++;\n}\n</code></pre>\n\n<p>=> I thought that we always return 0 because I thought the compiler will translate \"return x++\" to : return x; x++; then we will never execute the incrementation...</p>\n"}, {"tags": ["c++", "optimization", "language-agnostic"], "comments": [{"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1442438272, "post_id": 32618848, "comment_id": 53088344, "body": "Out of a guess I suppose it isn&#39;t a technical term.."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1442438386, "post_id": 32618848, "comment_id": 53088410, "body": "I suppose you could contrive some example where, before <code>auto</code>, you might make an improper assumption about a return type, resulting in an overly expensive and altogether needless type conversion. That would be a pessimization."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1442438450, "post_id": 32618848, "comment_id": 53088445, "body": "Related post: <a href=\"http://stackoverflow.com/questions/15875252/premature-optimization-and-premature-pessimization-related-to-c-coding-standar\" title=\"premature optimization and premature pessimization related to c coding standar\">stackoverflow.com/questions/15875252/&hellip;</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1442439991, "post_id": 32618848, "comment_id": 53089118, "body": "Opposite of &quot;optimize* - make the code less performant."}, {"owner": {"reputation": 1873, "user_id": 9312988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4v6AL.jpg?s=128&g=1", "display_name": "Puddle", "link": "https://stackoverflow.com/users/9312988/puddle"}, "edited": false, "score": 0, "creation_date": 1545405327, "post_id": 32618848, "comment_id": 94620737, "body": "wow, a question not directly related to code, and no white night has came to explain the rules of the site and try shut it down. incredible."}], "answers": [{"tags": [], "owner": {"reputation": 442, "user_id": 2924704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54c474f3ba2be80dff1225d62de2de73?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kotenko", "link": "https://stackoverflow.com/users/2924704/roman-kotenko"}, "is_accepted": false, "score": 5, "last_activity_date": 1442438493, "creation_date": 1442438493, "answer_id": 32618955, "question_id": 32618848, "link": "https://stackoverflow.com/questions/32618848/what-is-pessimization/32618955#32618955", "title": "What is pessimization?", "body": "<p>You could have just looked it up in a dictionary, such as <a href=\"https://en.wiktionary.org/wiki/pessimize\" rel=\"noreferrer\">this page</a>, which says:</p>\n\n<blockquote>\n  <p>pessimize (verb):</p>\n  \n  <p>(transitive) To make (something) less efficient, such as a computer program.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1442438608, "post_id": 32618966, "comment_id": 53088513, "body": "Most code is less than optimal by some standard. I think the crucial point is that it is less optimal than it could be, with no gain."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1442439200, "post_id": 32618966, "comment_id": 53088776, "body": "@juanchopanza Neither word is considered to be an absolute. Optimized code isn&#39;t usually perfectly optimal, it&#39;s just supposed to be more efficient than non-optimized."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1442439410, "post_id": 32618966, "comment_id": 53088864, "body": "@juanchopanza: Added more verbiage (pessimising the brevity of the post) and explaining in more detail the distinction [at least that&#39;s the intended effect]"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1442439677, "post_id": 32618966, "comment_id": 53088982, "body": "@Barmar Agreed. I didn&#39;t mean to imply there is a hard definition for &quot;optimal&quot;. The general idea is that you make something that can only make things worse, for reasonable definitions of worse (less efficient, harder to read, harder to test, even longer to type...)"}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 13, "last_activity_date": 1468690066, "last_edit_date": 1468690066, "creation_date": 1442438518, "answer_id": 32618966, "question_id": 32618848, "link": "https://stackoverflow.com/questions/32618848/what-is-pessimization/32618966#32618966", "title": "What is pessimization?", "body": "<p>It's mostly a play on words, a pessimist is the opposite of an optimist. And pessimisation is writing less than optimal code.</p>\n\n<p>Both compilers and the programmer can pessimise code by having bad constructs that for example copy things when it isn't required. The <code>auto</code> keyword will at the very least ensure that you get the \"closest type\", so there is no (unnecessary) type conversion.</p>\n\n<p>Note that pessimisation is when there is no BENEFIT to the code being \"not optimal\":</p>\n\n<p>It is  not pessimisation \"if we spent six months optimising this, it would run 0.5% faster\". Unless it's a requirement to be 0.5% faster, spending six months on it is probably a waste of time.</p>\n\n<p>Also, required functionality, such as security, is not pessimisation: \"The code is slower than it possibly could be because we made it secure\". </p>\n\n<p>A debug build is mot \"pessimal\" because it has asserts to catch <code>NULL</code> pointer dereferences and checking the index of array accesses, etc. As long as those asserts and checks are written such that they \"disappear\" when you enable the release mode. [and if your code is running a nuclear power-plant, you probably don't want crashes EVER, see \"security\" above]</p>\n\n<p>An old example I've seen is this C-string loop:</p>\n\n<pre><code>char str [large_number] = \"... several kilobytes of text (read from file) ... \";\n\nfor(char *p = str; p &lt; str+strlen(str); p++)\n{\n   ... do stuff with p ... \n}\n</code></pre>\n\n<p>If <code>do stuff with p</code> is sufficiently complex, the compiler won't realize that <code>strlen</code> is a constant value, and will perform <code>strlen</code> every iteration of the loop. The loop will run MUCH faster if we did:</p>\n\n<pre><code>for(char *p = str, *e = str+strlen(str); p &lt; e; p++)\n{\n   ... do stuff with p ... \n}\n</code></pre>\n\n<p>[Not an example of <code>auto</code>, I'm afraid]</p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 8, "last_activity_date": 1442880317, "creation_date": 1442880317, "answer_id": 32706366, "question_id": 32618848, "link": "https://stackoverflow.com/questions/32618848/what-is-pessimization/32706366#32706366", "title": "What is pessimization?", "body": "<p>Pessimizing implies a little more than just giving performance that isn't the best it could be.</p>\n\n<p>In general, it's doing something, typically in the interest of improving performance, that actually hurts performance instead. Although not absolutely required, there's frequently the implication that the result is actually worse than if you'd just done something simple and obvious.</p>\n\n<p>In this case, using <code>auto</code> to specify the type of the variable is simple and obvious--and regardless of whether it's precisely optimum, it establishes a baseline level of performance. When/if you specify the type explicitly, you basically just end up with two choices: explicitly define the same type <code>auto</code> would have deduced (getting exactly the same performance), or specifying some other type (in which case there are really only two possibilities: it won't work at all, or it'll do some sort of conversion that almost inevitably hurts performance).</p>\n\n<p>Summary: pessimization isn't usually just \"getting less that optimal performance\". It's usually \"doing extra work (possibly in the hope of improving performance) that actually hurts performance.\"</p>\n"}], "owner": {"reputation": 2879, "user_id": 1624629, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/28cf9a21f11f48c5dad051dd40260972?s=128&d=identicon&r=PG", "display_name": "DaBrain", "link": "https://stackoverflow.com/users/1624629/dabrain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5315, "favorite_count": 3, "accepted_answer_id": 32618966, "answer_count": 3, "score": 13, "last_activity_date": 1468690066, "creation_date": 1442438060, "last_edit_date": 1495541854, "question_id": 32618848, "link": "https://stackoverflow.com/questions/32618848/what-is-pessimization", "title": "What is pessimization?", "body": "<p>There is a comment on the question <a href=\"https://stackoverflow.com/questions/32510183/can-the-use-of-c11s-auto-improve-performance\">Can the use of C++11's <code>auto</code> improve performance?</a> that scored many votes and suggests \u201cmakes it less likely to unintentionally pessimize\u201d as an answer. I've never noticed this term before. I guess it is somehow the opposite of optimization.</p>\n\n<p>Can anyone give a more detailed definition?\nWhat does it mean in the context of programming? How would pessimized code look like?</p>\n"}, {"tags": ["c++", "iterator"], "comments": [{"owner": {"reputation": 822, "user_id": 1938552, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/961457bc769068768b2e2a20a37c40d2?s=128&d=identicon&r=PG", "display_name": "haael", "link": "https://stackoverflow.com/users/1938552/haael"}, "reply_to_user": {"reputation": 2801, "user_id": 2877058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMUyx.jpg?s=128&g=1", "display_name": "WhiteViking", "link": "https://stackoverflow.com/users/2877058/whiteviking"}, "edited": false, "score": 0, "creation_date": 1442439112, "post_id": 32618691, "comment_id": 53088740, "body": "Clang says: no known conversion from &#39;std::vector&lt;B&gt;&#39; to &#39;std::initializer_list&lt;B&gt;&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 1, "creation_date": 1442438198, "post_id": 32618859, "comment_id": 53088299, "body": "I thought of that, too. But that won&#39;t work for <code>A&lt;int&gt; a ({1, 2, 3});</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1442438797, "post_id": 32618859, "comment_id": 53088605, "body": "@mastov: You may create a specific overload for <code>std::initializer_list</code>. Edited and live Demo added."}, {"owner": {"reputation": 822, "user_id": 1938552, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/961457bc769068768b2e2a20a37c40d2?s=128&d=identicon&r=PG", "display_name": "haael", "link": "https://stackoverflow.com/users/1938552/haael"}, "edited": false, "score": 0, "creation_date": 1442439340, "post_id": 32618859, "comment_id": 53088837, "body": "Is there any reason why the template constructor doesn&#39;t accept initializer_list?"}, {"owner": {"reputation": 24673, "user_id": 2567683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1022957737/picture?type=large", "display_name": "Nikos Athanasiou", "link": "https://stackoverflow.com/users/2567683/nikos-athanasiou"}, "reply_to_user": {"reputation": 822, "user_id": 1938552, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/961457bc769068768b2e2a20a37c40d2?s=128&d=identicon&r=PG", "display_name": "haael", "link": "https://stackoverflow.com/users/1938552/haael"}, "edited": false, "score": 0, "creation_date": 1442439475, "post_id": 32618859, "comment_id": 53088897, "body": "@haael initializer lists have no type"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1442439505, "post_id": 32618859, "comment_id": 53088914, "body": "As Brian wrote: <i>This is because a braced-init-list is not an expression and does not have a type</i>."}, {"owner": {"reputation": 822, "user_id": 1938552, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/961457bc769068768b2e2a20a37c40d2?s=128&d=identicon&r=PG", "display_name": "haael", "link": "https://stackoverflow.com/users/1938552/haael"}, "edited": false, "score": 0, "creation_date": 1442440107, "post_id": 32618859, "comment_id": 53089171, "body": "OK, the version with template constructor and initializer_list accepts even raw arrays, so I guess it&#39;s the correct answer."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1442439095, "last_edit_date": 1442439095, "creation_date": 1442438117, "answer_id": 32618859, "question_id": 32618691, "link": "https://stackoverflow.com/questions/32618691/c-class-initializable-from-any-sequence-type/32618859#32618859", "title": "C++ class initializable from any sequence type", "body": "<p>With template constructor:</p>\n\n<pre><code>template&lt;typename B&gt;\nclass A\n{\npublic:\n    template &lt;typename T&gt;\n    A(T&amp;&amp; arglist)\n    {\n        for (auto&amp;&amp; b : arglist) {\n            init_members(b);\n        }\n    }\n\n    // overload for initializer_list\n    A(std::initializer_list&lt;B&gt; arglist) {\n        for (auto&amp;&amp; b : arglist) {\n            init_members(b);\n        }  \n    }\n\n};\n</code></pre>\n\n<p>You got error if <code>T</code> doesn't provide <code>begin</code>/<code>end</code> and if content is not convertible to <code>B</code>.</p>\n\n<p>You may use SFINAE to restrict allowed type <code>T</code> and so having error to call site instead of inside your constructor in case of misuse.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/1a52a7080cf7c775\" rel=\"nofollow\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 822, "user_id": 1938552, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/961457bc769068768b2e2a20a37c40d2?s=128&d=identicon&r=PG", "display_name": "haael", "link": "https://stackoverflow.com/users/1938552/haael"}, "edited": false, "score": 0, "creation_date": 1442440436, "post_id": 32618874, "comment_id": 53089325, "body": "Works in C++11 when I change enable_if_t to enable_if, but doesn&#39;t accept initializer_list."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 3, "last_activity_date": 1442438184, "creation_date": 1442438184, "answer_id": 32618874, "question_id": 32618691, "link": "https://stackoverflow.com/questions/32618691/c-class-initializable-from-any-sequence-type/32618874#32618874", "title": "C++ class initializable from any sequence type", "body": "<p>You need a template parameter for the type that <code>A::A</code> accepts. You should use SFINAE to disable this constructor if <code>Seq</code> is not a suitable sequence type; otherwise you will have issues with it winning overload resolution over the copy constructor.</p>\n\n<pre><code>template &lt;typename Seq,\n          typename = std::enable_if_t&lt;\n            std::is_convertible&lt;decltype(*std::declval&lt;Seq&gt;().begin()), B&gt;::value &amp;&amp;\n            std::is_convertible&lt;decltype(*std::declval&lt;Seq&gt;().end()), B&gt;::value&gt;&gt;\nA(Seq arglist) {\n    for (B b : arglist) {\n        init_members(b);\n    }\n}\n</code></pre>\n\n<p>Also consider using <code>const Seq&amp;</code> instead of <code>Seq</code>, and <code>const B&amp; b</code> or <code>auto&amp;&amp; b</code> instead of <code>B b</code>, to avoid potentially expensive copies.</p>\n\n<p>If you want it to work with a <em>braced-init-list</em> too, you must add a <em>separate</em> <code>std::initializer_list</code> constructor. This is because a <em>braced-init-list</em> is <strong>not an expression</strong> and <strong>does not have a type;</strong> it is essentially always a special case.</p>\n"}], "owner": {"reputation": 822, "user_id": 1938552, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/961457bc769068768b2e2a20a37c40d2?s=128&d=identicon&r=PG", "display_name": "haael", "link": "https://stackoverflow.com/users/1938552/haael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 32618859, "answer_count": 2, "score": 2, "last_activity_date": 1442439095, "creation_date": 1442437517, "last_edit_date": 1442438780, "question_id": 32618691, "link": "https://stackoverflow.com/questions/32618691/c-class-initializable-from-any-sequence-type", "title": "C++ class initializable from any sequence type", "body": "<p>I want a class that can be initialized from any sequence, that means from any type that has methods begin() and end() returning iterators.</p>\n\n<pre><code>template&lt;typename B&gt;\nclass A\n{\npublic:\n    A(any_sequence_type&lt;B&gt; arglist)\n    {\n        for(B b : arglist)\n            init_members(b);\n    }\n}\n</code></pre>\n\n<p>I want the following to compile:</p>\n\n<pre><code>A&lt;int&gt; a = {1, 2, 3};\nA&lt;int&gt; b = std::vector&lt;int&gt;();\nA&lt;Something&gt; c = MyClassWithBeginAndEnd();\n</code></pre>\n\n<p>Is it possible?</p>\n\n<p>EDIT:</p>\n\n<p>Suggested solutions with template constructor don't work.\nGCC says: template argument deduction/substitution failed: couldn't deduce template parameter \u2018T\u2019.\nClang says: candidate template ignored: couldn't infer template argument 'T'.</p>\n\n<p>If I explicitly cast the initializer, things start to work, though.</p>\n\n<pre><code>A a = A({B(), B(), B()}); // does not work\nA a = (std::initializer_list&lt;B&gt;){B(), B(), B()}; // works\n</code></pre>\n\n<p>Why is that?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1442438638, "post_id": 32618959, "comment_id": 53088530, "body": "Ok thanks. Can you suggest how I do that, or is it not simple?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1442439234, "post_id": 32618959, "comment_id": 53088796, "body": "@NeilKirk looks like you need to validate input, call <code>setg()</code> with proper positions and return first parameter."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 0, "last_activity_date": 1442438504, "creation_date": 1442438504, "answer_id": 32618959, "question_id": 32618644, "link": "https://stackoverflow.com/questions/32618644/seekg-doesnt-work-when-using-istream-with-custom-streambuf/32618959#32618959", "title": "seekg doesn&#39;t work when using istream with custom streambuf", "body": "<p><code>std::basic_streambuf::seekpos</code> by default returns <code>pos_type(off_type(-1))</code> according to <a href=\"http://en.cppreference.com/w/cpp/io/basic_streambuf/pubseekpos\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/io/basic_streambuf/pubseekpos</a></p>\n\n<p><code>istream::seekg()</code> in order threats that as error condition, so you need to override that function in your class <code>vectorwrapbuf</code> and return actual position.</p>\n"}], "owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 32618959, "answer_count": 1, "score": 0, "last_activity_date": 1442438504, "creation_date": 1442437304, "question_id": 32618644, "link": "https://stackoverflow.com/questions/32618644/seekg-doesnt-work-when-using-istream-with-custom-streambuf", "title": "seekg doesn&#39;t work when using istream with custom streambuf", "body": "<p>I'm trying to use a stream in order to read from a vector of existing data.</p>\n\n<pre><code>// http://stackoverflow.com/questions/8815164/c-wrapping-vectorchar-with-istream\ntemplate&lt;typename CharT, typename TraitsT = std::char_traits&lt;CharT&gt; &gt;\nclass vectorwrapbuf : public std::basic_streambuf&lt;CharT, TraitsT&gt;\n{\npublic:\n    vectorwrapbuf(std::vector&lt;CharT&gt; &amp;vec)\n    {\n        this-&gt;setg(&amp;vec[0], &amp;vec[0], &amp;vec[0] + vec.size());\n    }\n};\n\nint main()\n{\n    vector&lt;char&gt; data(100, 1);\n    vectorwrapbuf&lt;char&gt; databuf(data);\n    std::istream file(&amp;databuf);\n    file.exceptions(std::istream::failbit | std::istream::badbit);\n    file.seekg(10); // throws\n}\n</code></pre>\n\n<p>However when I call <code>seekg</code> it throws an exception (or reports error normally if not using exceptions). Why is this? 10 is within the 100 chars of input data.</p>\n\n<p>Code needs to work with both C++11 and before compilers.</p>\n\n<p>Live example:\n<a href=\"http://ideone.com/PfpW0o\" rel=\"nofollow\">http://ideone.com/PfpW0o</a></p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 356, "user_id": 619609, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/878ae9861da8d9fa3e1f26fb63e25863?s=128&d=identicon&r=PG&f=1", "display_name": "Anorflame", "link": "https://stackoverflow.com/users/619609/anorflame"}, "edited": false, "score": 0, "creation_date": 1442439768, "post_id": 32618571, "comment_id": 53089020, "body": "just pointing out that in the &#39;for&#39; loop, it should be i &lt; this-&gt;size() and not &lt;="}], "answers": [{"tags": [], "owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "is_accepted": true, "score": 2, "last_activity_date": 1442439106, "last_edit_date": 1592644375, "creation_date": 1442439106, "answer_id": 32619117, "question_id": 32618571, "link": "https://stackoverflow.com/questions/32618571/strange-qmetaobject-error/32619117#32619117", "title": "Strange QMetaObject error", "body": "<p>QList is not derived from QObject.</p>\n<p>First google result of &quot;error: 'staticMetaObject' is not a member of&quot;:\n<a href=\"http://www.setnode.com/blog/qt-staticmetaobject-is-not-a-member-of/\" rel=\"nofollow noreferrer\">Link</a></p>\n<blockquote>\n<p>What this is saying is that QTreeWidgetItem does not inherit from QObject, meaning that your own, singly-inherited class also does not inherit from QObject. Inheriting from QObject is one of the prerequisites to using the Q_OBJECT macro, which, if you're anything like me, you automatically insert into any Qt GUI related class.</p>\n<p>If you're not using any of the meta object stuff in your subclass, such as signals/slots or properties, just take out the Q_OBJECT macro. If you need to use signals and slots, you'll need to make your subclass multiply-inherit from QObject as well. If you take this route, remember that &quot;Multiple Inheritance Requires QObject to Be First&quot;, otherwise you'll get either the same error as above, or something along the lines of &quot;YourClass inherits from two QObject subclasses&quot; from the moc.</p>\n</blockquote>\n<p>Replace <code>QTreeWidgetItem</code> with <code>QList</code> and there you go.</p>\n"}], "owner": {"reputation": 1407, "user_id": 2094257, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/VwrSj.jpg?s=128&g=1", "display_name": "user2094257", "link": "https://stackoverflow.com/users/2094257/user2094257"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "accepted_answer_id": 32619117, "answer_count": 1, "score": 0, "last_activity_date": 1442439106, "creation_date": 1442437095, "question_id": 32618571, "link": "https://stackoverflow.com/questions/32618571/strange-qmetaobject-error", "title": "Strange QMetaObject error", "body": "<p>I have a class \"RegistrationList\" that keeps a list of pointers to  three different types of registrations.  I have a function calculateFees() that should return the total registration fees for one of the registration types.  I am supposed to use the QT meta object system to check the list for instances of a particular type of registration but when I run the program I get the following error:</p>\n\n<p>C:\\Qt\\Qt5.3.0\\Tools\\QtCreator\\bin\\build-a2-q1-Desktop_Qt_5_3_0_MinGW_32bit-Debug\\debug\\moc_registrationlist.cpp:63: error: 'staticMetaObject' is not a member of 'QList'\n     { &amp;QList::staticMetaObject, qt_meta_stringdata_RegistrationList.data,\n        ^</p>\n\n<p>My code for the calculateFees function:</p>\n\n<pre><code>double RegistrationList::totalFees(QString t) {\n    double total = 0.00;\n    for (int i = 0; i &lt;= this-&gt;size(); ++i) {\n        if (attendeeList.at(i)-&gt;metaObject()-&gt;className() == t)\n            total += this-&gt;at(i)-&gt;calculateFee();\n    }\n    return total;\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "class"], "comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1442436948, "post_id": 32618470, "comment_id": 53087655, "body": "Replace member <code>char* str;</code> with <code>std::string str;</code>."}, {"owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 2, "creation_date": 1442436991, "post_id": 32618470, "comment_id": 53087684, "body": "@MaximEgorushkin: That would probably defeat the point of the exercise"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "edited": false, "score": 1, "creation_date": 1442437302, "post_id": 32618470, "comment_id": 53087828, "body": "@Claudiu Silly exercises lead to less skilled programmers in 1st place! C++ is C++, and defeating it&#39;s strength and capabilities is the wrong teaching track. I just hate that!"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1442437424, "post_id": 32618470, "comment_id": 53087892, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: I respectfully disagree. This student is clearly confused about some of the fundamentals of the language, and the way to clear up that confusion is by doing tedious exercises like this, not paving it over with a ready-made structure like <code>std::string</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 1, "creation_date": 1442437637, "post_id": 32618470, "comment_id": 53088004, "body": "@Beta So what should we tell them actually? Usage of <code>char*</code> in c++ is blatantly wrong, unless you have some very exceptional exotic use cases?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 1, "creation_date": 1442439816, "post_id": 32618470, "comment_id": 53089037, "body": "@Beta - No, tedious exercises with raw pointers are just a waste of time. The students&#39; and our. Learn how to do things the proper way first, and then maybe, maybe, check what happens under the hood."}], "answers": [{"tags": [], "owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "is_accepted": false, "score": 0, "last_activity_date": 1442436998, "creation_date": 1442436998, "answer_id": 32618524, "question_id": 32618470, "link": "https://stackoverflow.com/questions/32618470/c-substring-from-string/32618524#32618524", "title": "C++ substring from string", "body": "<p>Your function <code>Substr</code> returns the address of a local variable <code>substr</code> indirectly by storing a pointer to it in the return value <code>MyString</code> object. It's invalid to dereference a pointer to a local variable once it has gone out of scope.</p>\n\n<p>I suggest you decide whether your class wraps an external string, or owns its own string data, in which case you will need to copy the input string to a member buffer.</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1442452989, "creation_date": 1442452989, "answer_id": 32621208, "question_id": 32618470, "link": "https://stackoverflow.com/questions/32618470/c-substring-from-string/32621208#32621208", "title": "C++ substring from string", "body": "<p>Have to walk this through to explain what's going wrong properly so bear with me.</p>\n\n<pre><code>int main() {\n    char str[] = {\"hi, I'm a string\"};\n</code></pre>\n\n<p>Allocated a temporary array of 17 characters (16 letters plus a the terminating null), placed the characters \"hi, I'm a string\" in it, and ended it off with a null. Temporary means what it sound like. When the function ends, <code>str</code> is gone. Anything pointing at <code>str</code> is now pointing at garbage. It may shamble on for a while and give some semblance of life before it is reused and overwritten, but really it's a zombie and can only be trusted to kill your program and eat its brains.</p>\n\n<pre><code>    MyString myStr = MyString(str);\n</code></pre>\n\n<p>Creates myStr, another temporary variable. Called the constructor with the array of characters. So let's take a look at the constructor:</p>\n\n<pre><code>MyString(char* str2create){\n    str = str2create;\n}\n</code></pre>\n\n<p>Take a pointer to a character, in this case it will have a pointer to the first element of main's <code>str</code>. This pointer will be assigned to MyString's <code>str</code>. There is no copying of the \"hi, I'm a string\". Both mains's <code>str</code> and MyString's <code>str</code>point to the same place in memory. This is a dangerous condition because alterations to one will affect the other. If one <code>str</code> goes away, so goes the other. If one <code>str</code> is overwritten, so too is the other.</p>\n\n<p>What the constructor should do is:</p>\n\n<pre><code>MyString(char* str2create){\n    size_t len = strlen(str2create); // \n    str = new char[len+1]; // create appropriately sized buffer to hold string\n                           // +1 to hold the null\n    strcpy(str, str2create); // copy source string to MyString\n}\n</code></pre>\n\n<p>A few caveats: This is really really easy to break. Pass in a str2create that never ends, for example, and the strlen will go spinning off into unassigned memory and the results will be unpredictable. </p>\n\n<p>For now we'll assume no one is being particularly malicious and will only enter good values, but this has been shown to be really bad assumption  in the real world.</p>\n\n<p>This also forces a requirement for a destructor to release the memory used by <code>str</code></p>\n\n<pre><code>virtual ~MyString(){\n    delete[] str;\n}\n</code></pre>\n\n<p>It also adds a requirement for copy and move constructors and copy and move assignment operators to avoid violating the <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow\">Rule of Three/Five</a>.</p>\n\n<p>Back to OP's Code...</p>\n\n<p><code>str</code> and <code>myStr</code> point at the same place in memory, but this isn't bad yet. Because this program is a trivial one, it never becomes a problem. <code>myStr</code> and <code>str</code> both expire at the same point and neither are modified again.</p>\n\n<pre><code>myStr.Print();\n</code></pre>\n\n<p>Will print correctly because nothing has changed in <code>str</code> or <code>myStr</code>.</p>\n\n<pre><code>    MyString myStr1 = myStr.Substr(10, 7);\n</code></pre>\n\n<p>Requires us to look at MyString::Substr to see what happens.</p>\n\n<pre><code>MyString Substr(int index2start, int length) {\n    char substr[length];\n</code></pre>\n\n<p>Creates a temporary character array of size length. First off, this is non-standard C++. It won't compile under a lot of compilers, do just don't do this in the first place. Second, it's temporary. When the function ends, this value is garbage. Don't take any pointers to <code>substr</code> because it won't be around long enough to use them. Third, no space was reserved for the terminating null. This string will be a buffer overrun waiting to happen.</p>\n\n<pre><code>    int i = 0;\n    while(i &lt; length) {\n        substr[i] = str[index2start + i];\n        i++;\n    }\n</code></pre>\n\n<p>OK that's pretty good. Copy from source to destination. What it is missing is the null termination so users of the char array knows when it ends.</p>\n\n<pre><code>    cout&lt;&lt;substr&lt;&lt;endl; // prints normal string\n</code></pre>\n\n<p>And that buffer overrun waiting to happen? Just happened. Whups. You got unlucky because it looks like it worked rather than crashing and letting you know that it didn't. Must have been a null in memory at exactly the right place.</p>\n\n<pre><code>    return MyString(substr);\n</code></pre>\n\n<p>And this created a new MyString that points to <code>substr</code>. Right before <code>substr</code> hit the end of the function and died. This new MyString points to garbage almost instantly.</p>\n\n<pre><code>}\n</code></pre>\n\n<p>What Substr should do:</p>\n\n<pre><code>MyString Substr(int index2start, int length)\n{\n    std::unique_ptr&lt;char[]&gt; substr(new char[length + 1]);\n    // unique_ptr is probably paranoid overkill, but if something does go \n    // wrong, the array's destruction is virtually guaranteed\n    int i = 0;\n    while (i &lt; length)\n    {\n        substr[i] = str[index2start + i];\n        i++;\n    }\n    substr[length] = '\\0';// null terminate\n    cout&lt;&lt;substr.get()&lt;&lt;endl; // get() gets the array out of the unique_ptr\n    return MyString(substr.get()); // google \"copy elision\" for more information \n                                   // on this line.\n}\n</code></pre>\n\n<p>Back in OP's code, with the return  to the main function that which was <code>substr</code> starts to be reused and overwritten.</p>\n\n<pre><code>cout&lt;&lt;myStr1.str&lt;&lt;endl;\n</code></pre>\n\n<p>Prints <code>myStr1.str</code> and already we can see some of it has been reused and destroyed. </p>\n\n<pre><code>cout&lt;&lt;\"here is the substring I've done:\"&lt;&lt;endl;\nmyStr1.Print();\n</code></pre>\n\n<p>More death, more destruction, less string.</p>\n\n<p>Things to not do in the future:</p>\n\n<p>Sharing pointers where data should have been copied.</p>\n\n<p>Pointers to temporary data.</p>\n\n<p>Not null terminating strings.</p>\n"}], "owner": {"reputation": 129, "user_id": 4690545, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6352004250f4ce3cfbd44c7f402c7b72?s=128&d=identicon&r=PG&f=1", "display_name": "snowfinch27", "link": "https://stackoverflow.com/users/4690545/snowfinch27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "accepted_answer_id": 32621208, "answer_count": 2, "score": -1, "last_activity_date": 1442452989, "creation_date": 1442436823, "question_id": 32618470, "link": "https://stackoverflow.com/questions/32618470/c-substring-from-string", "title": "C++ substring from string", "body": "<p>I'm pretty new to C++ and I'm need to create MyString class, and its method to create new MyString object from another's substring, but chosen substring changes while class is being created and when I print it with my method. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\nusing namespace std;\n\nclass MyString {\npublic:\n    char* str;\n\n    MyString(char* str2create){\n        str = str2create;\n    }\n\n    MyString Substr(int index2start, int length) {\n        char substr[length];\n        int i = 0;\n        while(i &lt; length) {\n            substr[i] = str[index2start + i];\n            i++;\n        }\n        cout&lt;&lt;substr&lt;&lt;endl; // prints normal string\n        return MyString(substr);\n    }\n\n    void Print() {\n        cout&lt;&lt;str&lt;&lt;endl;\n    }\n};\n\nint main() {\n    char str[] = {\"hi, I'm a string\"};\n    MyString myStr = MyString(str);\n    myStr.Print();\n\n    MyString myStr1 = myStr.Substr(10, 7);\n    cout&lt;&lt;myStr1.str&lt;&lt;endl;\n    cout&lt;&lt;\"here is the substring I've done:\"&lt;&lt;endl;\n    myStr1.Print();\n\n    return 0;\n}\n</code></pre>\n\n<p>And here is the output:</p>\n\n<blockquote>\n  <p>hi, I'm a string</p>\n  \n  <p>string</p>\n  \n  <p>stri</p>\n  \n  <p>here is the substring I've done:</p>\n  \n  <p>\u0432\u2122\u00a6</p>\n</blockquote>\n"}, {"tags": ["c++", "numpy", "hdf5", "stride"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1442438180, "post_id": 32618460, "comment_id": 53088289, "body": "There is no languag C/C++/Objective-C. Each is a language of its own rights. Do not add tags for unrelated languages."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1442438244, "post_id": 32618460, "comment_id": 53088324, "body": "I&#39;m using the C and C++ APIs, so those were the tags I used. Objective-C is not tagged."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1442438260, "post_id": 32618460, "comment_id": 53088337, "body": "The code is definitively not C."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1442438326, "post_id": 32618460, "comment_id": 53088379, "body": "OK, but the functions from the HDF5 API I am using are specifically from the published C API."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1442438395, "post_id": 32618460, "comment_id": 53088415, "body": "I removed the reference to Objective-C in an edit."}], "owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1442438368, "creation_date": 1442436790, "last_edit_date": 1442438368, "question_id": 32618460, "link": "https://stackoverflow.com/questions/32618460/specify-the-memory-stride-data-when-storing-a-buffer-via-hdf5-s-c-c-api", "title": "Specify the memory stride data when storing a buffer via HDF5\u2019s C/C++ API", "body": "<p>I\u2019ve used HDF5 from Python, via <code>h5py</code>, quite a bit \u2013 I am spoiled by its smooth integration with NumPy. Now, from C/C++-land, I am trying to save and load image data in HDF5 stores, and I am having trouble figuring out how to specify the stride of the image data.</p>\n\n<p>Reading and writing the dimensional data \u2013 the matrix shape, in Python \u2013 is straightforward; I read it like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>constexpr std::size_t NDIMS = 3;\nhid_t space_id = H5Dget_space(dataset_id);\nhsize_t dims[NDIMS];\nH5Sget_simple_extent_dims(space_id, dims, NULL);\n</code></pre>\n\n<p>\u2026 and write it similarly (for an image instance <code>input</code>):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>constexpr std::size_t NDIMS = 3;\nhsize_t dims[NDIMS] = { static_cast&lt;hsize_t&gt;(input.dim(0)),\n                        static_cast&lt;hsize_t&gt;(input.dim(1)),\n                        static_cast&lt;hsize_t&gt;(input.dim(2)) };\n/// first arg here is rank (aka NDIMS)\nhid_t space_id      = H5Screate_simple(NDIMS, dims, NULL);\n</code></pre>\n\n<p>\u2026 the HDF5 code samples I can find are either completely trivial examples \u2013 where the data being written or read is very small and of a known size \u2013 or extremely advanced and above my current pay-grade, like e.g. the <code>h5py</code> or <code>tables</code> source. I am looking for a straightforward example of how one maps matrix stride data to the HDF5 API. </p>\n"}, {"tags": ["c++", "c", "linux", "sockets"], "comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1442436946, "post_id": 32618411, "comment_id": 53087653, "body": "It may be useful to write a C function to receive and cast that pointer  (as you have), and compile it into its own .o file.  Then use your C++ to cast the pointer, and also call your C function.  Link everything.  Set a breakpoint in the C, so that when it hits, both your C++ and C code are interpreting the same data at the same time.  It could provide a clue as to what&#39;s going wrong."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442437126, "post_id": 32618411, "comment_id": 53087742, "body": "Are you sure that the client and server machines will be running the same version of the same o/s and will have the same hardware type?  If not, you probably need to use a portable mechanism for encoding the data (but if it is a school project, you may be able to get away with the assumption).  The troubles include &#39;what if one machine is big-endian and the other little-endian?&#39;, and &#39;what if the machines have different sizes for some of the types?&#39;, and &#39;what if the new version of the o/s has different fields compared to the old version?&#39;.  There are other possible problems too."}, {"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442437202, "post_id": 32618411, "comment_id": 53087786, "body": "@JonathanLeffler: Yes, Client and server are both using same version, same OS and running on same box."}, {"owner": {"reputation": 134, "user_id": 3470630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53ffcadf9aa396bb5596dc63e2e5a466?s=128&d=identicon&r=PG", "display_name": "TezlaCoil", "link": "https://stackoverflow.com/users/3470630/tezlacoil"}, "edited": false, "score": 1, "creation_date": 1442437331, "post_id": 32618411, "comment_id": 53087841, "body": "2 things to consider: Are your C and C++ compilers packing the structures the same? Try a <code>sizeof(ETHERNET_DIAGNOSTIC_INFO)</code> on both sides of the link, and make sure they match. Are your C and C++ compilers treating the types as the same size? <code>unsigned long</code> on your server might have a different size than your client. Creates great fun when serializing/deserializing values coming from a non-x86 architecture."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442437356, "post_id": 32618411, "comment_id": 53087858, "body": "&quot;I removed the C++ guard&quot;. Why?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1442437469, "post_id": 32618411, "comment_id": 53087917, "body": "@kadina: that simplifies things magnificently; it allows you to ignore the possible problems I postulated."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442437513, "post_id": 32618411, "comment_id": 53087947, "body": "&quot;Yes, Client and server are both using same version&quot;. Of what? One is using a C compiler and the other is using a C++ compiler."}, {"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1442437612, "post_id": 32618411, "comment_id": 53087992, "body": "@n.m. - I added C++ guard. But result remains the same."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1442437912, "post_id": 32618411, "comment_id": 53088144, "body": "Even if running ont the same platform, using proper serialization and a well-defined format will avoid many future problems. Just think if you recompile one or decide to use the software on different machines or use a proper class in C++ for the object data. For most applications, the overhead is negligible, including many (modern) embedded platforms. Note that you should use at least <code>stdint.h</code> types throughout the fields."}, {"owner": {"reputation": 4121, "user_id": 19674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5057291c386d12733d4123a1e277384e?s=128&d=identicon&r=PG", "display_name": "Jon Trauntvein", "link": "https://stackoverflow.com/users/19674/jon-trauntvein"}, "edited": false, "score": 0, "creation_date": 1442438090, "post_id": 32618411, "comment_id": 53088234, "body": "Even if they are running on the same box, they may not be compatible because of different compiler options."}], "answers": [{"comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1442437392, "post_id": 32618621, "comment_id": 53087878, "body": "I did read the question quickly, but I believe he said he tried this and it is not working.  He also seeks to know why it is not working."}, {"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "edited": false, "score": 0, "creation_date": 1442437762, "post_id": 32618621, "comment_id": 53088069, "body": "Yes. I tried and it is not working and also reinterpret_cast should be as below. ETHERNET_DIAGNOSTIC_INFO* NewPtr = reinterpret_cast&lt;ETHERNET_DIAGNOSTIC_INFO *&gt;(buffer)"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1442437933, "post_id": 32618621, "comment_id": 53088153, "body": "Sorry, you&#39;ve overlooked just too many things that <a href=\"http://stackoverflow.com/a/32618763/119527\">fukanchik mentioned</a> which are extremely important to consider."}, {"owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "reply_to_user": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "edited": false, "score": 0, "creation_date": 1442437937, "post_id": 32618621, "comment_id": 53088158, "body": "@kadina Yes, I made a mistake there. Try out the two other things I mentioned. Check the byte order and try packing it with byte fields."}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 1, "creation_date": 1442438050, "post_id": 32618621, "comment_id": 53088218, "body": "In general, it&#39;s tempting fate to expect the binary representation of structures to be exportable from one build and imported into another build.  Between padding and vtables, byte ordering, and other factors, you can make it happen, but the solution will almost always be brittle and non-portable."}, {"owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1442438107, "post_id": 32618621, "comment_id": 53088243, "body": "@JonathonReinhart Like what? I mentioned the byte order, I mentioned the packing. The only thing I did not mention was that you might not have received all the data as <code>recv()</code> has no guarantee that it will read it all."}, {"owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "reply_to_user": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1442438308, "post_id": 32618621, "comment_id": 53088365, "body": "@RussSchultz I would disagree. If you send the data <code>49, 12, 17, 97, 634, 1</code> from one device then it will arrive the same way on the receiving end. Making sure that it does end up in that order and with the same number of bytes per value is naturally then assumed performed. I never intended to imply that it would be always easy."}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1442440998, "post_id": 32618621, "comment_id": 53089557, "body": "Yes, bytes can be reliably sent across the wire or written to a file.   The transformation to/from the binary representation and the virtual representation, however, cannot be relied upon unless you do the transformation yourself.  In other words, reading/writing a struct (no matter if you&#39;ve asked the compiler to &quot;pack&quot; it) will always be fraught with sudden breakage if you rely upon the tools to do something specific if isn&#39;t in any specification."}, {"owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "edited": false, "score": 0, "creation_date": 1442447438, "post_id": 32618621, "comment_id": 53091350, "body": "That is indeed true. However, that is not what he asked for."}], "tags": [], "owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "is_accepted": false, "score": -1, "last_activity_date": 1442437825, "last_edit_date": 1442437825, "creation_date": 1442437231, "answer_id": 32618621, "question_id": 32618411, "link": "https://stackoverflow.com/questions/32618411/can-we-typecast-buffer-into-c-structure-on-client-when-server-is-sending-data/32618621#32618621", "title": "Can we typecast buffer into C++ structure on client when server is sending data as c structure?", "body": "<p>Yes, you can as the buffer is just the byte representation of the struct sent by the other side. After you have handled the byte order, you can just cast the buffer pointer to a pointer of the type of your struct.</p>\n\n<p>In C++ you can write for example <code>ETHERNET_DIAGNOSTIC_INFO* NewPtr = reinterpret_cast&lt;ETHERNET_DIAGNOSTIC_INFO*&gt;(buffer);</code>\nThis will do what you want unless you run an older C++ compiler not capable of understanding C++11 syntax. However, depending on your compiler the error might arrive from padding the data. </p>\n\n<p>If you define bit fields and pack the struct on both sides you will be fine though. Ask if you need help, but google is your friend.</p>\n\n<blockquote>\n  <blockquote>\n    <p>I doubt that we can not typecast buffer into C++ structure on client when server is sending data as c structure. Is it correct?</p>\n  </blockquote>\n</blockquote>\n\n<p>EDIT:\nYou can cast any binary data generated by any programming language into a readable piece of code in your program. After all, it is all about bits and bytes. So you can cast any data from any program to any data in any other program. Could you quickly print the sizeof(ETHERNET_DIAGNOSTIC_INFO) on both sides and see if they match?</p>\n"}, {"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1442437875, "post_id": 32618763, "comment_id": 53088128, "body": "I inevitably end up writing a <code>recv_exact()</code> function that does this loop generically."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1442438034, "post_id": 32618763, "comment_id": 53088204, "body": "Especially consider the advice here that recommends using ASN or <a href=\"https://github.com/google/protobuf\" rel=\"nofollow noreferrer\">protobuf</a>. You don&#39;t really want to marshal <code>struct</code>s directly."}], "tags": [], "owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "is_accepted": true, "score": 8, "last_activity_date": 1442437947, "last_edit_date": 1442437947, "creation_date": 1442437777, "answer_id": 32618763, "question_id": 32618411, "link": "https://stackoverflow.com/questions/32618411/can-we-typecast-buffer-into-c-structure-on-client-when-server-is-sending-data/32618763#32618763", "title": "Can we typecast buffer into C++ structure on client when server is sending data as c structure?", "body": "<p>There are multiple problems with this approach:</p>\n\n<ol>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Endianness\">Endianness</a> might be different between server and client machine</p>\n\n<p>You then need to deserealize numbers and <code>time_t</code>'s.</p></li>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\">Structure packing</a> might be different between code compiled on server (c++) and on client (C)</p>\n\n<p>You then need to use a protocol to send data, like binary ASN, protobuf or many others.</p></li>\n<li><p><code>if(recv(sockfd, rxbuf, sizeof(ETHERNET_DIAGNOSTIC_INFO), 0) &gt; 0)</code>\nthere is no guarantee <code>recv</code> will read exactly <code>sizeof(ETHERNET_DIAGNOSTIC_INFO)</code> bytes.</p>\n\n<p>You need to wrap this into <code>while</code> loop (<strong>code is sample and might be non-compilable</strong>):</p></li>\n</ol>\n\n<p>.</p>\n\n<pre><code>int left = sizeof(ETHERNET_DIAGNOSTIC_INFO);\nchar *ptr = rxbuf;\nint rd;\n\nwhile(left&gt;0)\n{\n    rd=recv(sockfd, ptr, left, 0);\n    if(rd==0)\n    {\n        if(left&gt;0) return SOCKET_CLOSED_PREMATURELY;\n        else return SOCKET_DONE;\n    } else if(rd==-1 &amp;&amp; errno==EAGAIN) {\n        //do again\n        continue; \n    } else if(rd==-1 &amp;&amp; errno!=EAGAIN) {\n       return SOCKET_ERROR;\n    }\n    left = left - rd;\n    ptr=ptr+rd;\n}\n</code></pre>\n\n<p>The proper way to send binary data is to use protobuf or apache thrift, or ASN or invent something yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 4121, "user_id": 19674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5057291c386d12733d4123a1e277384e?s=128&d=identicon&r=PG", "display_name": "Jon Trauntvein", "link": "https://stackoverflow.com/users/19674/jon-trauntvein"}, "is_accepted": false, "score": 2, "last_activity_date": 1442437991, "creation_date": 1442437991, "answer_id": 32618829, "question_id": 32618411, "link": "https://stackoverflow.com/questions/32618411/can-we-typecast-buffer-into-c-structure-on-client-when-server-is-sending-data/32618829#32618829", "title": "Can we typecast buffer into C++ structure on client when server is sending data as c structure?", "body": "<p>You can probably do it but are likely to run into serious significant issues in trying:</p>\n\n<ul>\n<li>Different compilers and compiler settings will pack and align structures differently in order to optimise for the particular processor architecture.  There is absolutely no guarantee that the members of a structure will lay out exactly next to each other unless you play with pragmas. </li>\n<li>Different processors will use different byte orders for things like integers and floating point values.  If you are going to exchange data between a client and server (or vice versa) it behooves you to explicitly define the byte order and then make both sides conform to that definition regardless of the native order.  </li>\n<li>Values like unsigned long will have different sizes based upon the processor architecture targeted by the compiler.  In order to reliably exchange data, you will need to explicitly define the size of the values that will be transferred.</li>\n</ul>\n\n<p>For these reasons, I prefer to write functions (or methods) that will explicitly pack and unpack messages as they are exchanged.  By doing so, you will be subjected to much fewer seemingly mysterious errors. </p>\n"}, {"tags": [], "owner": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "is_accepted": false, "score": 1, "last_activity_date": 1442438515, "last_edit_date": 1442438515, "creation_date": 1442438157, "answer_id": 32618866, "question_id": 32618411, "link": "https://stackoverflow.com/questions/32618411/can-we-typecast-buffer-into-c-structure-on-client-when-server-is-sending-data/32618866#32618866", "title": "Can we typecast buffer into C++ structure on client when server is sending data as c structure?", "body": "<p>A number of possible explanations spring to mind:</p>\n\n<ul>\n<li>Different packing of <code>ETHERNET_DIAGNOSTIC_INFO</code> between a C <code>struct</code> and a C++ <code>struct</code>.</li>\n<li>(less likely) Different alignments of <code>rxbuf</code> (you don't show where this pointer comes from). There are no guarantees in C or C++ that reading a <code>int</code> or <code>long</code> that does not lie on natural boundary (e.g. 4-byte aligned) yields correct results.</li>\n<li>That your C and C++ compilers are compiling against different ABIs (e.g. 32-bit and 64-bit respectively).  Note that <code>sizeof(time_t) == 4</code> on a 32-bit platform and <code>8</code> on many 64-bit platforms.</li>\n</ul>\n\n<p>All of these issues point in the same direction: Mapping a <code>struct</code> onto a wire data layout like this is really non-portable and problematic. </p>\n\n<p>If you really insist on doing it you'll need to do the following:</p>\n\n<ul>\n<li>Use <code>#pragma pack</code> directives (or better: if using a C++11 compiler <code>__attribute__ ((__packed__)))</code>. Even then, you can get surprises.</li>\n<li>Decide which byte-ordering you intend using and byte-swap all multi-byte values with <code>htons()</code> and friends. The convention is for multi-byte quantities to be big-endian over TCP/IP.</li>\n<li>Ensure the buffer you call <code>recv()</code> with is aligned - probably to a 4-byte boundary.</li>\n</ul>\n\n<p>A more robust approach is to read the input buffer as a stream of bytes, reconstructing any multi-byte fields as required. </p>\n"}], "owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1096, "favorite_count": 0, "accepted_answer_id": 32618763, "answer_count": 4, "score": 6, "last_activity_date": 1442438515, "creation_date": 1442436563, "question_id": 32618411, "link": "https://stackoverflow.com/questions/32618411/can-we-typecast-buffer-into-c-structure-on-client-when-server-is-sending-data", "title": "Can we typecast buffer into C++ structure on client when server is sending data as c structure?", "body": "<p>I have server, client processes written in C named as NetworkServer.c and NetworkClient.c and these 2 are communicating using linux sockets. When client sends a request as below to get ethernet statistics,</p>\n\n<pre><code>// rxbuf - character array of 128K\n// ETHERNET_DIAGNOSTIC_INFO - structure typedefed\nrecv(sockfd, rxbuf, sizeof(ETHERNET_DIAGNOSTIC_INFO), 0)\n</code></pre>\n\n<p>server fills the data in to rxbuf (as ETHERNET_DIAGNOSTIC_INFO because server also uses the same copy of header file where this structure is defined) and sends the data. Once client receives, it will typecast as below to get the data.</p>\n\n<pre><code>ETHERNET_DIAGNOSTIC_INFO *info = (ETHERNET_DIAGNOSTIC_INFO *) rxbuf;\n</code></pre>\n\n<p>the structure is defined in NetworkDiag.h as below.</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\ntypedef struct ETHERNET_DIAGNOSTIC_INFO\n{\n    uint32_t             cmdId; \n    unsigned long        RxCount[MAX_SAMPLES];\n    unsigned long        TxCount[MAX_SAMPLES];\n    time_t               TimeStamp[MAX_SAMPLES] ;\n    char                 LanIpAddress[20];\n    char                 LanMacAddress[20];\n    char                 WanIpAddress[20];\n    char                 LanDefaultGateway[20];\n    char                 LanSubnetMask[20];\n    char                 LanLease[5000];\n}ETHERNET_DIAGNOSTIC_INFO;\n</code></pre>\n\n<p>This is working fine.</p>\n\n<p>Now there is a requirement that I need to create a c++ file which should work as client (I removed client C file and server should remain as c file). I defined header file for the structure definition as below.</p>\n\n<pre><code>struct ETHERNET_DIAGNOSTIC_INFO\n{\n    uint32_t             cmdId; \n    unsigned long        RxCount[MAX_SAMPLES];\n    unsigned long        TxCount[MAX_SAMPLES];\n    time_t               TimeStamp[MAX_SAMPLES] ;\n    char                 LanIpAddress[20];\n    char                 LanMacAddress[20];\n    char                 WanIpAddress[20];\n    char                 LanDefaultGateway[20];\n    char                 LanSubnetMask[20];\n    char                 LanLease[5000];\n};\n</code></pre>\n\n<p>basically I removed the C++ guard and typedef and using the below code in client.cpp file to get the result from server.</p>\n\n<pre><code>if(recv(sockfd, rxbuf, sizeof(ETHERNET_DIAGNOSTIC_INFO), 0) &gt; 0)\n{\n    ETHERNET_DIAGNOSTIC_INFO *info = reinterpret_cast&lt;ETHERNET_DIAGNOSTIC_INFO *&gt; (rxbuf);\n}\n</code></pre>\n\n<p>I am not getting the correct results. The values in the structure are misplaced (some values are correct but lot of values are misplaced). I tried 'C' type casting also but no use.</p>\n\n<p>I doubt that we can not typecast buffer into C++ structure on client when server is sending data as c structure. Is it correct? Can any one please let me know how to solve this issue?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "edited": false, "score": 1, "creation_date": 1442436635, "post_id": 32618403, "comment_id": 53087509, "body": "Your program can only have one main() function, you have two. Your error is telling you that."}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1442436844, "post_id": 32618403, "comment_id": 53087607, "body": "You should not copy the assigment text verbatim, but describe concisely what you do and what is wrong."}, {"owner": {"reputation": 915, "user_id": 2016450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9IKl.jpg?s=128&g=1", "display_name": "mrunion", "link": "https://stackoverflow.com/users/2016450/mrunion"}, "edited": false, "score": 0, "creation_date": 1442437364, "post_id": 32618403, "comment_id": 53087862, "body": "You want two programs -- generate and thresh -- right? Then you need to run g++ twice, once for each program."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1442537813, "post_id": 32618403, "comment_id": 53132860, "body": "Look at the errors, then add the include files for the types you missed."}, {"owner": {"reputation": 25, "user_id": 3325133, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3fcbde16361b4c1c56da4a4a17f17821?s=128&d=identicon&r=PG&f=1", "display_name": "user3325133", "link": "https://stackoverflow.com/users/3325133/user3325133"}, "edited": false, "score": 0, "creation_date": 1442538792, "post_id": 32618403, "comment_id": 53133060, "body": "So I fixed it by putting an #include &lt;fstream&gt; and now both files compile fine.  How do I create a Makefile for both of my cpp files to generate executables?  Also for the first program generate.cpp, is supposed to generate a file with random numbers but I don&#39;t see any files under my directory.  How can I fix this???"}, {"owner": {"reputation": 25, "user_id": 3325133, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3fcbde16361b4c1c56da4a4a17f17821?s=128&d=identicon&r=PG&f=1", "display_name": "user3325133", "link": "https://stackoverflow.com/users/3325133/user3325133"}, "edited": false, "score": 0, "creation_date": 1442543321, "post_id": 32618403, "comment_id": 53133986, "body": "I got makefile and my cpp files to compile but does anyone know how to run the executable file created (generate and thresh) so I can test to see if the program runs correctly?"}], "answers": [{"tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 1, "last_activity_date": 1442438395, "creation_date": 1442438395, "answer_id": 32618929, "question_id": 32618403, "link": "https://stackoverflow.com/questions/32618403/compiling-two-programs-fails/32618929#32618929", "title": "Compiling two programs fails", "body": "<p>As @mrunion pointed out, you should replace</p>\n\n<p><code>g++ generate.cpp thresh.cpp</code></p>\n\n<p>with <code>g++ generate.cpp</code></p>\n\n<p>and  <code>g++ thresh.cpp</code></p>\n\n<p>By the way, if you do these back to back, you'll overwrite your executable.  An improvement would be:</p>\n\n<p><code>g++ generate.cpp -o generate</code></p>\n\n<p>and</p>\n\n<p><code>g++ thresh.cpp -o thresh</code></p>\n"}], "owner": {"reputation": 25, "user_id": 3325133, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3fcbde16361b4c1c56da4a4a17f17821?s=128&d=identicon&r=PG&f=1", "display_name": "user3325133", "link": "https://stackoverflow.com/users/3325133/user3325133"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1442537096, "creation_date": 1442436543, "last_edit_date": 1442537096, "question_id": 32618403, "link": "https://stackoverflow.com/questions/32618403/compiling-two-programs-fails", "title": "Compiling two programs fails", "body": "<p>For an assignment I have written two programs. \nOne for generating a file of random integers, the other for counting integers less than a specified threshold.\nYou can find the actual assignment texts below the code I've posted.</p>\n\n<p>When compiling g++ generate.cpp -o generate, I get this error:</p>\n\n<pre><code>    z1755294@hopper:~/assign2$ g++ generate.cpp -o generate\ngenerate.cpp: In function \u2018bool writeRand(int, int, int, const char*)\u2019:\ngenerate.cpp:12:31: error: variable \u2018std::ofstream fout\u2019 has initializer but incomplete type\n         ofstream fout ( fname );\n</code></pre>\n\n<p>When I compile g++ thresh.cpp -o thresh, I get this error:</p>\n\n<pre><code>    z1755294@hopper:~/assign2$ g++ thresh.cpp -o thresh\nthresh.cpp: In function \u2018int main()\u2019:\nthresh.cpp:19:16: error: variable \u2018std::ifstream fin\u2019 has initializer but incomplete type\n  ifstream fin( fname.c_str() );\n</code></pre>\n\n<p>Can anyone help me  fix my code to get it working?  Also I need to create a Makefile for my project since I have multiple executables?</p>\n\n<p>Thanks so much...kinda stuck on what to do.</p>\n\n<hr>\n\n<p>This is my code:</p>\n\n<p>generate.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;  // re. atoi\n\nusing std::cout;\nusing std::endl;\nusing std::cerr;\nusing std::ifstream;\nusing std::ofstream;\n\nbool writeRand ( const int ranSeed, const int maxVal, const int numVals, const char* fname )\n{\n        ofstream fout ( fname );\n        if ( fout )\n        {\n                srand ( ranSeed );\n                for ( int i=0; i &lt; numVals; ++ i )\n                        fout &lt;&lt; rand () % (maxVal+1) &lt;&lt; endl;\n                fout.close ();\n                return true;\n        }\n        //else\n        return false;\n}\n\nint main ( int argc, char* argv [] )\n{\n        if (argc !=5 )\n        {\n                cerr &lt;&lt; \"Usage: \" &lt;&lt; argv[0] &lt;&lt; \"ranSeed maxVal numVals outFileName\" &lt;&lt; endl;\n                return -1;\n        }\n\n        const int ranSeed = atoi(argv[1]);\n        const int maxVal = atoi(argv[2]);\n        const int numVals = atoi(argv[3]);\n        const char* fname = argv[4];\n\n        if ( ranSeed &lt;= 0 || maxVal &lt;= 0 || numVals &lt;= 0 )\n        {\n                cerr &lt;&lt; \"Invalid negative or zero numbers on command line....Try again...\" &lt;&lt; endl;\n                return -1;\n        }\n\n        if ( writeRand( ranSeed, maxVal, numVals, fname ) )\n                cout &lt;&lt; \"ranSeed = \" &lt;&lt; ranSeed &lt;&lt; \", maxVal = \" &lt;&lt; maxVal &lt;&lt; \", numVals = \" &lt;&lt; numVals\n                &lt;&lt; \"\\nfame \" &lt;&lt; fname &lt;&lt; \" was created ok ...\" &lt;&lt; endl;\n        else\n                cout &lt;&lt; \"There was a problem creating file \" &lt;&lt; fname &lt;&lt; \" ...\" &lt;&lt; endl;\n}\n</code></pre>\n\n<hr>\n\n<p>thresh.cpp </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt; // re. atoi\n\nusing std::cout;\nusing std::endl;\nusing std::cin;\nusing std::ifstream;\nusing std::string;\nusing std::flush;\n\nint main ()\n{\n        //prompt and take in the desired file name\n        cout &lt;&lt; \"Enter name of file (for example randNums.txt): \" &lt;&lt; flush;\n        string fname;\n        getline( cin, fname );\n\n        //then can open file\n        ifstream fin( fname.c_str() );\n        if( fin )\n        {\n                int max, count = 0, below = 0, val = 0;\n                string line;\n                while( true )\n                {\n                        cout &lt;&lt; \"Enter the threshold value: \" &lt;&lt; flush;\n                        getline( cin,line );\n                        max = atoi( line.c_str() );\n\n                        if( max &gt; 0 ) break;\n                        cout &lt;&lt; \"Try again with value &gt; 0 \\n\";\n                }\n\n                while( getline( fin, line) )\n                {\n                        val = atoi( line.c_str() );\n                        ++count;\n\n                        if( val &lt; max ) ++below;\n                }\n                fin.close();\n\n                cout &lt;&lt; below &lt;&lt; \" of \" &lt;&lt; count &lt;&lt; \" values in file '\"\n                     &lt;&lt; fname &lt;&lt; \"' are less than \" &lt;&lt; max &lt;&lt; '\\n';\n\n                max = val+1; //last value (in file) + 1\n                count = 0, below = 0;\n                fin.open( fname.c_str() );\n                while( getline( fin, line ) )\n                {\n                        int val = atoi( line.c_str() );\n                        ++count;\n\n                        if( val &lt; max ) ++below;\n                }\n\n                fin.close();\n\n                cout &lt;&lt; below &lt;&lt; \" of \" &lt;&lt; count &lt;&lt; \" values in file '\"\n                     &lt;&lt; fname &lt;&lt; \"' are less than \" &lt;&lt; max &lt;&lt; '\\n';\n\n        }\n        else\n cout &lt;&lt; \"There was an error opening file \" &lt;&lt; fname &lt;&lt; '\\n';\n\n\n        cout &lt;&lt; \"Please 'Enter' to continue/exit...\" &lt;&lt; flush;\n        cin.get();\n        return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Assignments</strong></p>\n\n<p><strong>generate</strong></p>\n\n<p>Create a program called \"generate\" which generates a file of random integers.\nThis program takes four command line arguments. They are, in order</p>\n\n<p>*A random number seed. This is an integer value explained below.\n*A maximum value. The random values should be less than this maximum. This value is an integer.\n*The number of values to be generated\n*The name of an output file to store the values</p>\n\n<p>If the command line arguments are not given, the program should give a brief message on proper usage and then exit. The integer values on the comand line should all be checked for negative values. If a negative value is given, the program should print an error message and exit.\nRandom number generation</p>\n\n<p>The rand() function, found in  returns a random positive integer every time it is called.  The srand(int) function takes an integer called the random number seed which is used to initialize the random number generator. Subsequent calls to rand() produce a random sequence which is uniquely tied to its seed. Typically in a program, srand() is called once, while rand() is called multiple times.</p>\n\n<p>A common technique for producing random numbers of a particular size is to use the remainder of divding rand() by the maximum upper bound.</p>\n\n<p><strong>thresh</strong></p>\n\n<p>Create a program called thresh which should ask the user for a file name and an integer threshold value. The program should then count the number of values in the file less than the threshold and report the results. </p>\n\n<p>For example, 43 of 300 values in mydatafile are less than 17\nThis program should not use command line arguments. Rather, needed values should be obtained by prompting the user. </p>\n\n<p>When asking for the threshold value, if the user inputs a negative value, the program should print an error and loop on the request until a proper value is obtained.</p>\n\n<p>If the input file does not exist, an error message should be printed and the program should exit.</p>\n\n<p><strong><em>Hints:</em></strong>  </p>\n\n<p>Test your programs with small values that can be checked by hand. For example, create a file of 20 values less than 10.  A particularly good test of thresh is to use the last value of the data file as a threshold value. Then use the last value plus one as a threshold value.  </p>\n\n<p>**A Makefile is required as part of your submission.  If the project has multiple executables, you should have a default makefile rule to build all of the executables.  You should have a rule to clear out the project to a pristine state.  Your Makefile should use appropriate variables.</p>\n"}, {"tags": ["c++", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "edited": false, "score": 0, "creation_date": 1442436431, "post_id": 32618324, "comment_id": 53087393, "body": "Are you sure your code compiles? You are trying to initialize A (the array in main()) with a non-constant value."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "edited": false, "score": 1, "creation_date": 1442436817, "post_id": 32618324, "comment_id": 53087597, "body": "@bku_drytt <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Variable-Length.html</a> - not really valid C++, but valid C99 and GCC accepts it in C++. Clang accepts it for POD types in C++."}, {"owner": {"reputation": 2000, "user_id": 5229124, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/367d67b55f083e09a5262cdf1a66bb90?s=128&d=identicon&r=PG", "display_name": "Luke Xu", "link": "https://stackoverflow.com/users/5229124/luke-xu"}, "edited": false, "score": 0, "creation_date": 1442436846, "post_id": 32618324, "comment_id": 53087611, "body": "Using an array for a linked list defeats the purpose."}, {"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "reply_to_user": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1442437256, "post_id": 32618324, "comment_id": 53087814, "body": "@mastov I see, thanks for that link."}], "answers": [{"comments": [{"owner": {"reputation": 64, "user_id": 4594794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e24296d6032cac19a6431c209382568?s=128&d=identicon&r=PG&f=1", "display_name": "funkysidd", "link": "https://stackoverflow.com/users/4594794/funkysidd"}, "edited": false, "score": 0, "creation_date": 1442437576, "post_id": 32618575, "comment_id": 53087969, "body": "I don&#39;t think you even need the to pass <code>index</code> to insert nodes at the end of the list. All you need to do is <code>while (tmp-&gt;next!=NULL)</code>. You are right about the point about memory leaks."}, {"owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "reply_to_user": {"reputation": 64, "user_id": 4594794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e24296d6032cac19a6431c209382568?s=128&d=identicon&r=PG&f=1", "display_name": "funkysidd", "link": "https://stackoverflow.com/users/4594794/funkysidd"}, "edited": false, "score": 0, "creation_date": 1442437681, "post_id": 32618575, "comment_id": 53088031, "body": "Exactly, you don&#39;t have to pass <code>index</code>, I wanted to point errors in the current version of code though."}, {"owner": {"reputation": 27, "user_id": 5344043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/777342ce01ee3df496e316a281eb4da7?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/5344043/rohit"}, "edited": false, "score": 0, "creation_date": 1442474858, "post_id": 32618575, "comment_id": 53099351, "body": "well it ran... but i do have to allocate new node to the next pointer to make it run... And i am not getting this memory leak thing ..  can you explain...  And i am doing array of linked lists here so i have to to make that array...."}, {"owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "edited": false, "score": 0, "creation_date": 1442475512, "post_id": 32618575, "comment_id": 53099682, "body": "Yes, you have to allocate new node but in your example you are doing it twice. The memory leak can be caused if you attach a <code>next</code> pointer for a given node for the second time. You won&#39;t be able to deallocate the node then, which will cause the memory leak. You really don&#39;t need an array - when you&#39;ll analyze your code you&#39;ll see you use only its item at index 0 (<code>A[0]</code>)."}, {"owner": {"reputation": 27, "user_id": 5344043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/777342ce01ee3df496e316a281eb4da7?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/5344043/rohit"}, "edited": false, "score": 0, "creation_date": 1442479069, "post_id": 32618575, "comment_id": 53101650, "body": "Ok .. I got the new node problem in my code... But can you pls help me with this memory leak thing , and is there  any site where i can read about it in deapth ..."}, {"owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "edited": false, "score": 0, "creation_date": 1442479247, "post_id": 32618575, "comment_id": 53101740, "body": "Valgrind is one the best tools available out there, refer to this tutorial: <a href=\"http://valgrind.org/docs/manual/QuickStart.html\" rel=\"nofollow noreferrer\">valgrind.org/docs/manual/QuickStart.html</a> and start with some simple examples of memory leaks: <a href=\"http://www.ibm.com/developerworks/aix/library/au-toughgame/\" rel=\"nofollow noreferrer\">ibm.com/developerworks/aix/library/au-toughgame</a>"}], "tags": [], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "is_accepted": true, "score": 0, "last_activity_date": 1442437807, "last_edit_date": 1442437807, "creation_date": 1442437103, "answer_id": 32618575, "question_id": 32618324, "link": "https://stackoverflow.com/questions/32618324/c-data-structures-wrong-output-linked-lists/32618575#32618575", "title": "C++ data structures wrong output (linked lists)", "body": "<p>In your <code>insertnodes()</code> you are passing a <strong>double pointer</strong> <code>node** arrayhead</code>, thus, by dereferncing it later, you are overwriting the current value of <code>next</code> pointer, which will later cause memory leak in your program.</p>\n\n<p>What you should do instead is create a temporary variable <code>node* tmp</code> which you will change when the <code>index</code> decreases. Then, you don't need to allocate a new node to the next pointer, because <strong>you already have a pointer you want to attach as <code>next</code></strong>.</p>\n\n<p>The fixed code would look like this:</p>\n\n<pre><code>void insertnodes(node** arrayhead, int index, node* ptr) {\n    index = index - 1;\n    node* tmp = *arrayhead;\n    while (index--) {\n        tmp = tmp-&gt;next;\n    }\n    tmp-&gt;next = ptr;\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> This is completely useless:</p>\n\n<pre><code>int n = 4;\nnode *A[n] ;\n\nfor ( int i = 0 ; i &lt; n ; i++){\n    A[i] = NULL ;\n}\n</code></pre>\n\n<p>All you need to create a linked list is a single node (e.g. list's head).</p>\n\n<hr>\n\n<p>But as this is a linked list, you don't need to pass index really. All you need is a <code>head</code>, over which you could iterate until you find <code>node-&gt;next</code> which will be <code>NULL</code> - this is the place you need to insert your new node at (this is how it's typically done).</p>\n"}], "owner": {"reputation": 27, "user_id": 5344043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/777342ce01ee3df496e316a281eb4da7?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/5344043/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "accepted_answer_id": 32618575, "answer_count": 1, "score": 1, "last_activity_date": 1548426241, "creation_date": 1442436163, "last_edit_date": 1548426241, "question_id": 32618324, "link": "https://stackoverflow.com/questions/32618324/c-data-structures-wrong-output-linked-lists", "title": "C++ data structures wrong output (linked lists)", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n\nusing namespace std;\n\ntypedef struct node{\n    int size;\n    char* name;\n    node* next;\n}node;\n\nvoid insertnodes( node** arrayhead , int index , node* ptr){\n\n    index = index - 1 ;\n    while ( index--){\n\n        *arrayhead = (*arrayhead)-&gt;next;\n    }\n    (*arrayhead)-&gt;next = new node; \n    (*arrayhead)-&gt;next = ptr;   \n}\n\n\nint main(){\n    int n = 4;\n    node *A[n] ;\n\n    for ( int i = 0 ; i &lt; n ; i++){\n        A[i] = NULL ;\n    }\n\n    A[0] = new node; \n\n    A[0]-&gt;size = 10;\n    A[0]-&gt;name = new char;\n    A[0]-&gt;name = \"gunna\";\n    A[0]-&gt;next = NULL;\n    //cout &lt;&lt; A[0]-&gt;name &lt;&lt; endl;\n\n\n    node* ptr = new node ;\n    ptr-&gt;size = 10;\n    ptr-&gt;name = new char;\n    ptr-&gt;name = \"param\";\n    ptr-&gt;next = NULL;\n\n\n    insertnodes(&amp;A[0] , 1 , ptr);\n\n    node* ptrr = new node ;\n    ptrr-&gt;size = 10;\n    ptrr-&gt;name = new char;\n    ptrr-&gt;name = \"sidd\";\n    ptrr-&gt;next = NULL;\n    insertnodes(&amp;A[0] , 2 , ptrr);\n\n    cout &lt;&lt; A[0]-&gt;name &lt;&lt; endl;\n    cout &lt;&lt; A[0]-&gt;next-&gt;name;\n\n\n\n}\n</code></pre>\n\n<p>It should have to print  \"gunna\" and \"param\" . </p>\n\n<p>but it is giving \"param\" and \"sidd\" as output. </p>\n\n<p>I don'nt know where i am going wrong . I have tried a lot of things but i am still confused \nPls help ... \nI am using code blocks to compile this program ..</p>\n"}, {"tags": ["c++", "visual-studio-2013"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1442436079, "post_id": 32618261, "comment_id": 53087228, "body": "What do you mean by invalid operator?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1442436497, "post_id": 32618261, "comment_id": 53087428, "body": "Why do you need to write operator this way? Do you want to achieve specific order?"}, {"owner": {"reputation": 77, "user_id": 1546060, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1051f6601436f3fbab2bd1567cf0d74a?s=128&d=identicon&r=PG", "display_name": "user1546060", "link": "https://stackoverflow.com/users/1546060/user1546060"}, "edited": false, "score": 0, "creation_date": 1442436821, "post_id": 32618261, "comment_id": 53087598, "body": "When I&#39;m running the program it crashes - &quot;Debug Assertion Failed!&quot; c:\\windows\\system32\\MSCP120D.dll c:\\Program Files\\Microsoft Visual Studio 12.0\\VC\\include\\xtree line 2010 Expression: invalid operator&lt;"}, {"owner": {"reputation": 77, "user_id": 1546060, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1051f6601436f3fbab2bd1567cf0d74a?s=128&d=identicon&r=PG", "display_name": "user1546060", "link": "https://stackoverflow.com/users/1546060/user1546060"}, "edited": false, "score": 0, "creation_date": 1442436904, "post_id": 32618261, "comment_id": 53087637, "body": "It doesnt compile unless you specify the less operator.  It needs it because I&#39;m using an object as a key"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 1546060, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1051f6601436f3fbab2bd1567cf0d74a?s=128&d=identicon&r=PG", "display_name": "user1546060", "link": "https://stackoverflow.com/users/1546060/user1546060"}, "edited": false, "score": 0, "creation_date": 1442437240, "post_id": 32618334, "comment_id": 53087802, "body": "Thank you sir I you are a legend"}], "tags": [], "owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "is_accepted": true, "score": 7, "last_activity_date": 1442437031, "last_edit_date": 1442437031, "creation_date": 1442436227, "answer_id": 32618334, "question_id": 32618261, "link": "https://stackoverflow.com/questions/32618261/c-map-sometimes-throws-invalid-operator/32618334#32618334", "title": "C++ map sometimes throws invalid operator&lt;", "body": "<p>It's not allowed to have both <code>a &lt; b</code> and <code>b &lt; a</code> So if you operator returns true for pair of elements it should return false for them in inversed orders. Now consider pairs (0, 1) and (1, 0)</p>\n\n<p>The easiest way to write operator (if you don't care about specific order) is to reuse pair's <code>operator&lt;</code></p>\n\n<pre><code>return std::tie(a.x, a.y) &lt; std::tie(b.x, b.y);\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 1546060, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1051f6601436f3fbab2bd1567cf0d74a?s=128&d=identicon&r=PG", "display_name": "user1546060", "link": "https://stackoverflow.com/users/1546060/user1546060"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 32618334, "answer_count": 1, "score": 1, "last_activity_date": 1442437031, "creation_date": 1442435956, "question_id": 32618261, "link": "https://stackoverflow.com/questions/32618261/c-map-sometimes-throws-invalid-operator", "title": "C++ map sometimes throws invalid operator&lt;", "body": "<pre><code>struct vector_nodes_less\n{\n    inline bool operator()(const Vector2i&amp; a, const Vector2i&amp; b) const\n    {\n        if (a.x == b.x &amp;&amp; a.y == b.y) return false;\n        if (a.x &lt; b.x &amp;&amp; a.y &lt; b.y) return true;\n        if (a.x &gt; b.x &amp;&amp; a.y &gt; b.y) return false;       \n        return (a.x &lt; b.x || a.y &lt; b.y);\n    }\n};\n\ntypedef std::map &lt;Vector2i, node*, vector_nodes_less&gt; vector_nodes;\n</code></pre>\n\n<p>When I do operations with the above type it throws invalid operator&lt;.</p>\n\n<p>It happens when the keys (0,0) (0,1) and I perform an operation on a (1,0) vector key.</p>\n\n<p>I understand I need to have weak strict ordering but my function should be OK shouldnt it?  </p>\n\n<p>Any help would be most welcome as this is slowing me down.</p>\n\n<p>Regards</p>\n\n<p>Sam</p>\n"}, {"tags": ["c++", "c++11", "unordered-map", "c++-standard-library"], "comments": [{"owner": {"reputation": 525, "user_id": 2267430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/edadf4dc3a10fb4a81545f2b3e3c5963?s=128&d=identicon&r=PG", "display_name": "Coffee_lover", "link": "https://stackoverflow.com/users/2267430/coffee-lover"}, "edited": false, "score": 0, "creation_date": 1442436000, "post_id": 32618260, "comment_id": 53087188, "body": "I may be missing something very trivial but bear with me as i am only a beginner in C++."}, {"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 3, "creation_date": 1442436579, "post_id": 32618260, "comment_id": 53087470, "body": "Please paste your code as text."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1442436582, "post_id": 32618260, "comment_id": 53087473, "body": "For a start copy paste the code here, don&#39;t post an image."}, {"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 1, "creation_date": 1442436780, "post_id": 32618260, "comment_id": 53087577, "body": "I don&#39;t see why you are surprised. <code>unordered_map</code>s are unordered, they can come out in any order"}, {"owner": {"reputation": 525, "user_id": 2267430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/edadf4dc3a10fb4a81545f2b3e3c5963?s=128&d=identicon&r=PG", "display_name": "Coffee_lover", "link": "https://stackoverflow.com/users/2267430/coffee-lover"}, "reply_to_user": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 0, "creation_date": 1442438323, "post_id": 32618260, "comment_id": 53088378, "body": "@zch   sorry i tried posting this in text but there was a formatting problem"}], "answers": [{"comments": [{"owner": {"reputation": 525, "user_id": 2267430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/edadf4dc3a10fb4a81545f2b3e3c5963?s=128&d=identicon&r=PG", "display_name": "Coffee_lover", "link": "https://stackoverflow.com/users/2267430/coffee-lover"}, "edited": false, "score": 0, "creation_date": 1442438419, "post_id": 32618511, "comment_id": 53088433, "body": "thanks, i thought that it is unlike map in a way that it keeps the insertion order..."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 525, "user_id": 2267430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/edadf4dc3a10fb4a81545f2b3e3c5963?s=128&d=identicon&r=PG", "display_name": "Coffee_lover", "link": "https://stackoverflow.com/users/2267430/coffee-lover"}, "edited": false, "score": 2, "creation_date": 1442439267, "post_id": 32618511, "comment_id": 53088812, "body": "You are welcome @Coffee_lover. It&#39;s not something trivial, that&#39;s why I upvoted your question. However, you didn&#39;t do the same for my answer...It&#39;s not good enough? I mean you saw something bad about it? Maybe my edit will improve the answer! :)"}, {"owner": {"reputation": 525, "user_id": 2267430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/edadf4dc3a10fb4a81545f2b3e3c5963?s=128&d=identicon&r=PG", "display_name": "Coffee_lover", "link": "https://stackoverflow.com/users/2267430/coffee-lover"}, "edited": false, "score": 0, "creation_date": 1442454312, "post_id": 32618511, "comment_id": 53092950, "body": "i am sorry, was caught up in the mpi work that i almost forgot but i did accepted it as answer."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 3, "last_activity_date": 1442439249, "last_edit_date": 1495535223, "creation_date": 1442436950, "answer_id": 32618511, "question_id": 32618260, "link": "https://stackoverflow.com/questions/32618260/why-the-output-shows-file-2-first/32618511#32618511", "title": "Why the output shows file 2 first?", "body": "<p>The order of the elements of an <code>std::unordered_map</code> is <strong><em>not</em></strong> stable, which explains your output.</p>\n\n<p>Read this <a href=\"https://stackoverflow.com/a/13622590/2411320\">answer</a> for more and how to read the elements. Also next time search before asking a question and of course (almost) never post images of code, but use code tags.</p>\n\n<p>From the <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\">ref</a>:</p>\n\n<blockquote>\n  <p>Internally, the elements are not sorted in any particular order, but organized into buckets.</p>\n</blockquote>\n"}], "owner": {"reputation": 525, "user_id": 2267430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/edadf4dc3a10fb4a81545f2b3e3c5963?s=128&d=identicon&r=PG", "display_name": "Coffee_lover", "link": "https://stackoverflow.com/users/2267430/coffee-lover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "closed_date": 1442524529, "accepted_answer_id": 32618511, "answer_count": 1, "score": 1, "last_activity_date": 1442515783, "creation_date": 1442435955, "last_edit_date": 1592644375, "question_id": 32618260, "link": "https://stackoverflow.com/questions/32618260/why-the-output-shows-file-2-first", "closed_reason": "Duplicate", "title": "Why the output shows file 2 first?", "body": "<p><a href=\"https://i.stack.imgur.com/bCzHp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bCzHp.png\" alt=\"My Data structure\" /></a></p>\n<p><em>Context</em>: I need this data structure to find the keywords of a particular file at a node. So the map is having file name and vector to store the keywords of that file.This is basically a small code i am using in mpi to find relationship between files at different nodes in  a parallel fashion.</p>\n"}, {"tags": ["c++", "algorithm", "backtracking"], "comments": [{"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 0, "creation_date": 1442435685, "post_id": 32617961, "comment_id": 53087035, "body": "It should be possible to get rid of the <code>memset</code> calls in your backtrack function. Also of the <code>memcpy</code> before each recursive call."}, {"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "edited": false, "score": 0, "creation_date": 1443667979, "post_id": 32617961, "comment_id": 53588263, "body": "I wrote a js implementation of my optimal strategy to force myself to make the rules explicit, because I thought my answer was still a bit vague. The code managed to solve the 3 examples with only 38, 1 and 4 recursions, and a total execution time of a few milliseconds. It was quite complicated though, so I don&#39;t think I could have implemented every idea during a job interview. But rule 3 alone would probably get you under the time limit."}, {"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "edited": false, "score": 1, "creation_date": 1443670358, "post_id": 32617961, "comment_id": 53588774, "body": "Apparently this is based on the game &quot;Flood It&quot; but the rule that clicking 2 in the example will also connect the 0 underneath the 2 is different. Maybe you should change the title to something like &quot;Minimum number of clicks to solve Flood-It-like puzzle&quot;, so that people can more easily find your question?"}], "answers": [{"comments": [{"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 0, "creation_date": 1442437204, "post_id": 32618359, "comment_id": 53087788, "body": "I would also try the A* algorithm on a graph where each node is a matrix. For example, you would have an edge from the picture on the left to that on the right.  For the heuristic, use the number of distinct colors remaining - 1. I think this should help prune a lot of possibilities, and is admissible on first thought."}, {"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 0, "creation_date": 1442443991, "post_id": 32618359, "comment_id": 53090477, "body": "A potentially better heuristic: number of cells not part of the cluster containing the top left cell. This would cause it to click on a white cell in the next move in the example, while the previous heuristic would allow multiple options, like the blue or pink cell. Then it would click on a 5, and then any order is allowed. This provides the correct answer of 10 on the example, but for larger examples it can be inadmissible. Maybe work with clusters of cells. The idea is to favor converting as most cells in one shot as possible. Maybe someone else can finish this idea."}, {"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "reply_to_user": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 0, "creation_date": 1442454834, "post_id": 32618359, "comment_id": 53093073, "body": "@IVlad I think the trick is to look at the game as &quot;9 colors you can click&quot; instead of &quot;19 squares you can click&quot;. This greatly reduces the number of combinations."}], "tags": [], "owner": {"reputation": 30866, "user_id": 1139393, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4f7f66aa636f33c3e5784d3581213ba8?s=128&d=identicon&r=PG", "display_name": "Peter de Rivaz", "link": "https://stackoverflow.com/users/1139393/peter-de-rivaz"}, "is_accepted": true, "score": 5, "last_activity_date": 1442436368, "creation_date": 1442436368, "answer_id": 32618359, "question_id": 32617961, "link": "https://stackoverflow.com/questions/32617961/minimum-number-of-clicks-to-solve-flood-it-like-puzzle/32618359#32618359", "title": "Minimum number of clicks to solve Flood-It-like puzzle", "body": "<h2>High level improvement</h2>\n\n<p>Note that the cells are either their original colour, or the last selected colour.</p>\n\n<p>This means that we can represent the current state of the board by means of 20 bits (marking for each of the 4*5 cells whether they contain the original colour), and a number in the range 0 to 9 giving the last colour chosen.</p>\n\n<p>This results in a maximum of 10 million states to explore.  The backtracking function can avoid having to recurse if it reaches a state that has already been visited.  I would expect this change to make your solution considerably faster. </p>\n\n<h2>Low level improvement</h2>\n\n<p>Representing the state by a 20bit mask and the last colour also makes the state a lot quicker to update and restore as only 2 numbers need to be changed instead of memcpy of the whole board.</p>\n"}, {"tags": [], "owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "is_accepted": false, "score": 3, "last_activity_date": 1443668173, "last_edit_date": 1443668173, "creation_date": 1442453248, "answer_id": 32621233, "question_id": 32617961, "link": "https://stackoverflow.com/questions/32617961/minimum-number-of-clicks-to-solve-flood-it-like-puzzle/32621233#32621233", "title": "Minimum number of clicks to solve Flood-It-like puzzle", "body": "<p>If you think of the 4x5 board as \"19 squares you can click on\", that suggests there are 19! or 121,645,100,408,832,000 combinations to check. However, there are a number of optimisations that can drastically reduce the number of combinations to only a few dozen:</p>\n\n<h3>observations about the game strategy</h3>\n\n<ul>\n<li>Clicking on different squares with the same colour has the same effect. So the board should be seen as \"9 colours (or less) you can click on\".</li>\n<li>Adjacent squares with the same colour should be seen as groups; they always act together. In the example below, the three white squares at the bottom right form such a group.</li>\n<li>It only makes sense to click on a colour that is adjacent to the corner group. In step one of the example below, only clicking on a pink, green, orange or white square makes sense.</li>\n<li>When several uniquely-coloured groups (where only one group has a certain colour) are adjacent to the corner group, the order in which they are clicked is unimportant. In the example below, after 5 and 3 have been clicked, any order of clicking 4, 7, 8 and 9 will have the same result.</li>\n<li>When all groups of a certain colour are adjacent to the corner group, they can be seen as uniquely-coloured groups; exactly one click per colour is needed to connect them. In the example below, after clicking 5 and 3, the two pink squares and the two green squares become two uniquely-coloured groups</li>\n<li>When the board has only uniquely-coloured groups, the number of necessary clicks equals the number of unconnected groups. In the example below, after clicking 5 and 3, exactly eight more clicks are necessary.</li>\n<li>If there is exactly one unconnected group that has the same colour as the corner group, and they are separated by more than one other group, the group can be seen as a uniquely-coloured group.</li>\n<li>Reducing the number of clicks means connecting several groups at once. This can be done when several same-coloured groups are adjacent to the corner group (as when clicking 1 or 2 in step 3 of the example below), or by clicking a group which separates the corner group from a group with the same colour (as happens in steps 1 and 2 in the example).</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/rMAiy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rMAiy.png\" alt=\"monochrome game - example 3 start\"></a></p>\n\n<h3>Algorithm based on optimal strategy</h3>\n\n<p>A recursive algorithm based on an optimal strategy using the rules listed above, goes through these steps for every recursion:</p>\n\n<blockquote>\n  <ol>\n  <li>If only uniquely-coloured groups are left, the number of clicks equals the number of unconnected groups; return this number.</li>\n  <li>If a group with the same colour as the corner-group is separated from it by only one other group, click this other group and recurse. If several options exist, try all of them.</li>\n  <li>If one or more uniquely-coloured groups (or all groups of certain colours) are adjacent to the corner group, click them all in any order. Then re-evaluate the board from step 1.</li>\n  <li>Try clicking every colour adjacent to the corner group and recurse.</li>\n  </ol>\n</blockquote>\n\n<p>A Javascript implementation of a brute-force algorithm needed tens of millions of recursions for example 1 and 3 in the question, with an execution time far above the 8 second limit. After implementing the optimisations described above, example 1 was solved with <strong>just 38 recursions</strong>, and an execution time of a few milliseconds. Examples 2 and 3 were even quicker.</p>\n"}], "owner": {"reputation": 635, "user_id": 5039996, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38ea82cfbd404266e5f1937c32d6aa64?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/5039996/felipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1204, "favorite_count": 3, "accepted_answer_id": 32618359, "answer_count": 2, "score": 10, "last_activity_date": 1443718043, "creation_date": 1442434870, "last_edit_date": 1443718043, "question_id": 32617961, "link": "https://stackoverflow.com/questions/32617961/minimum-number-of-clicks-to-solve-flood-it-like-puzzle", "title": "Minimum number of clicks to solve Flood-It-like puzzle", "body": "<p>I have grid N \u00d7 M in which each cell is coloured with one colour. </p>\n\n<p>When the player clicks on any cell of the grid of colour \u03b1, the cell in the top-leftmost corner of the grid, of colour \u03b2, receives the colour \u03b1, but not only it: all those cells which are connected to the source by paths which use only the colours \u03b1 or \u03b2 also receive the colour \u03b1. </p>\n\n<p>The connection between cells should be considered only in the horizontal and vertical directions to form the paths. For example, when the player clicks on the cell highlighted in the figure to the left, the grid receives the colouring of the figure to the right. The goal of the game is to make the grid monochromatic.</p>\n\n<p><a href=\"https://i.stack.imgur.com/1onNv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1onNv.jpg\" alt=\"Click\"></a><a href=\"https://i.stack.imgur.com/bAFSF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bAFSF.jpg\" alt=\"Result\"></a></p>\n\n<p><strong>Input Description</strong></p>\n\n<blockquote>\n  <p>The first line of the input consists of 2 integers N and M (1 \u2264 N \u2264 4, 1 \u2264 M \u2264 5), which represent respectively the number of lines and the number of columns of the grid. The N lines following describe the initial configuration of the grid, representing each colour by an integer between 0 and 9. The input does not consist of any other line.</p>\n</blockquote>\n\n<p><strong>Output Description</strong></p>\n\n<blockquote>\n  <p>Print a line containing a single integer that represents the minimum number of clicks that the player must do in order to make the grid monochromatic.</p>\n</blockquote>\n\n<p><strong>Input Sample</strong></p>\n\n<blockquote>\n  <p>1:</p>\n  \n  <blockquote>\n    <p>4 5<br>\n    01234<br>\n    34567<br>\n    67890<br>\n    90123</p>\n  </blockquote>\n  \n  <p>2:</p>\n  \n  <blockquote>\n    <p>4 5<br>\n    01234<br>\n    12345<br>\n    23456<br>\n    34567    </p>\n  </blockquote>\n  \n  <p>3:</p>\n  \n  <blockquote>\n    <p>4 5<br>\n    00162<br>\n    30295<br>\n    45033<br>\n    01837</p>\n  </blockquote>\n</blockquote>\n\n<p><strong>Output Sample</strong></p>\n\n<blockquote>\n  <p>1:</p>\n  \n  <blockquote>\n    <p>12</p>\n  </blockquote>\n  \n  <p>2:</p>\n  \n  <blockquote>\n    <p>7</p>\n  </blockquote>\n  \n  <p>3:</p>\n  \n  <blockquote>\n    <p>10</p>\n  </blockquote>\n</blockquote>\n\n<p>I'm trying to find a solution with backtracking (Because of the time limit of 8 seconds and small size of the grid). But it is taking time limit exceeded. Some people just made it on 0 secs.</p>\n\n<p>There is some other algorithm to solve this ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX 5\n#define INF 999999999\n\ntypedef int signed_integer;\n\nsigned_integer n,m,mink;\nbool vst[MAX][MAX];\n\nsigned_integer flood_path[4][2] = {\n    {-1,0},\n    {1,0},\n    {0,1},\n    {0,-1}\n};\n\n//flood and paint all possible cells... the root is (i,j)\nsigned_integer flood_and_paint(signed_integer cur_grid[MAX][MAX],signed_integer i, signed_integer j, signed_integer beta, signed_integer alpha, signed_integer colors[]){\n    //invalid cell\n    if (vst[i][j] || i &lt; 0 || i &gt;= n || j &lt; 0 || j &gt;= m)\n        return 0;\n\n    //mark existent colors\n    colors[cur_grid[i][j]] = 1;\n\n    //only alpha and beta colors counts\n    if (cur_grid[i][j] != beta &amp;&amp; cur_grid[i][j] != alpha)\n        return 0;\n\n    //mark (i,j) as visited and change its color\n    vst[i][j] = true;\n    cur_grid[i][j] = alpha;\n\n    //floodit !\n    signed_integer ret = 1;\n    for (signed_integer k = 0; k &lt; 4; k++)\n        ret += flood_and_paint(cur_grid,i + flood_path[k][0], j + flood_path[k][1], beta, alpha, colors);\n\n    //how many cells change\n    return ret;\n}\n\nvoid backtrack(signed_integer cur_grid[MAX][MAX],signed_integer k,signed_integer _cont, signed_integer alpha) {\n    //bigger number of clicks for this solution ? ... getting back\n    if(k &gt;= mink)\n        return;\n\n    signed_integer colors[10];\n    memset(vst, false, sizeof(vst));\n    memset(colors, 0, sizeof(colors));\n\n    signed_integer beta = cur_grid[0][0];\n    signed_integer cont = flood_and_paint(cur_grid, 0, 0, beta, alpha, colors);\n\n    //there are alpha colors to change and no beta colors to change\n    colors[alpha] = 1;\n    colors[beta]  = 0;\n\n    //all squares on same color\n    if (cont == n * m) {\n        mink = k;\n        return;\n    }\n\n    //this solution is equals to another ? ... getting back\n    if (cont == _cont)\n        return;\n\n    ++k;//new click\n\n    //copy this matrix and backtrack\n    signed_integer copy[MAX][MAX];\n    for (signed_integer c = 0; c &lt; 10; ++c){\n        if (colors[c] &amp;&amp; c != cur_grid[0][0]) {\n            memcpy(copy, cur_grid,n*m*sizeof(signed_integer));\n            backtrack(copy,k,cont,c);\n        }\n    }\n}\n\nvoid cleanBuffer(){\n     while (getchar() != '\\n');\n}\n\nint main(void) {\n    signed_integer grid[MAX][MAX];\n    scanf(\"%d %d\",&amp;n,&amp;m);\n    for (signed_integer i = 0; i &lt; n; ++i) {\n        cleanBuffer();\n        for (signed_integer j = 0; j &lt; m; ++j){\n            grid[i][j] = getchar() - '0';\n        }\n    }\n    mink = INF;\n    backtrack(grid,0, 0, grid[0][0]);\n    printf(\"%d\\n\",mink);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "rsa", "crypto++"], "comments": [{"owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "edited": false, "score": 0, "creation_date": 1442435887, "post_id": 32617932, "comment_id": 53087132, "body": "Nobody can realistically answer your question because you have provided absolutely no information about how client and server are actually communicating, nor how that communication is implemented in the code."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1442436984, "post_id": 32617932, "comment_id": 53087678, "body": "Yes, there are standards for serializing keys. For one example, see <a href=\"http://tools.ietf.org/html/rfc3447\" rel=\"nofollow noreferrer\">RFC 3447</a> appendix A.1.1 (and, since it uses ASN.1, one of the standard references on ASN.1)."}], "answers": [{"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1442502303, "post_id": 32619236, "comment_id": 53116198, "body": "You should add additional information to your question; and <i>not</i> as an answer. Do so by clicking <i>Edit</i>. (And don&#39;t post additional information as a comment, either)."}], "tags": [], "owner": {"reputation": 666, "user_id": 5339180, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec7a87ded73862f4599d86c43da80327?s=128&d=identicon&r=PG&f=1", "display_name": "V. Panchenko", "link": "https://stackoverflow.com/users/5339180/v-panchenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1442445815, "last_edit_date": 1442445815, "creation_date": 1442439702, "answer_id": 32619236, "question_id": 32617932, "link": "https://stackoverflow.com/questions/32617932/how-to-exchange-public-keys/32619236#32619236", "title": "How to exchange public keys?", "body": "<p>Follow code is very simple class-wrapper for Crypto++ RSA algorithm:</p>\n\n<p>EncoderRSA.h</p>\n\n<pre><code>class EncoderRSA\n{\n    public:\n        EncoderRSA();\n        void keyGeneration();\n        void substitutePublicKey(Integer e, Integer n);\n        Integer encode(std::string plainText);\n        std::string decode(Integer cypher);\n        Integer getE();\n        Integer getN();\n    private:\n        AutoSeededRandomPool prng;\n        RSA::PublicKey publicKey;   // For encrypt plain text\n        RSA::PrivateKey privateKey; // For decrypt plain text\n};\n</code></pre>\n\n<p>EncoderRSA.cpp</p>\n\n<pre><code>void EncoderRSA::keyGeneration() {\n    InvertibleRSAFunction params;\n    params.GenerateRandomWithKeySize(this-&gt;prng, 3072);\n\n    RSA::PrivateKey privateKey(params);\n    RSA::PublicKey publicKey(params);\n\n    //because you can't do:    this-&gt;privateKey(params);\n    this-&gt;privateKey = privateKey;\n    this-&gt;publicKey = publicKey;\n}\n\nvoid EncoderRSA::substitutePublicKey(Integer e, Integer n) {\n    this-&gt;publicKey.Initialize(n, e);\n}\n\nInteger EncoderRSA::encode(std::string plainText) {\n    Integer m((const byte*)plainText.data(), plainText.size());\n    Integer c = this-&gt;publicKey.ApplyFunction(m);\n    return c;\n}\n\nstd::string EncoderRSA::decode(Integer cypher) {\n    Integer r = this-&gt;privateKey.CalculateInverse(this-&gt;prng, cypher);\n\n    std::string decoded;\n    size_t req = r.MinEncodedSize();\n    decoded.resize(req);\n\n    r.Encode((byte*)decoded.data(), decoded.size());\n\n    return decoded;\n}\n\nInteger EncoderRSA::getE() {\n    return this-&gt;publicKey.GetPublicExponent();\n}\n\nInteger EncoderRSA::getN() {\n    return this-&gt;publicKey.GetModulus();\n}\n</code></pre>\n\n<p>Server must generate it's own keys (public and private), save it, save it's own public key (if exactly: PublicExponent and PublicModulus) separately (in <code>Integer</code> variables), get public key from Client, replace own public key by Client's public key.</p>\n\n<p>The same about the Client.</p>\n"}, {"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 1, "last_activity_date": 1442503857, "last_edit_date": 1489756485, "creation_date": 1442503857, "answer_id": 32634373, "question_id": 32617932, "link": "https://stackoverflow.com/questions/32617932/how-to-exchange-public-keys/32634373#32634373", "title": "How to exchange public keys?", "body": "<blockquote>\n  <p>... how I can get client's public key on server side and server's public key on client side?</p>\n</blockquote>\n\n<p>That is known as the <a href=\"https://www.google.com/search?q=key+distribution+problem\" rel=\"nofollow noreferrer\">key distribution problem</a>. It may (or may not be) manageable on a small scale, but its a very thorny problem when you scale it up.</p>\n\n<p>The answer(s) depend on your particular instance problem, and that looks like a N-way chat program. There's really too much to the problem to answer on a programming site like Stack Overflow.</p>\n\n<p>Maybe you should read up on the problem, including Multi-party or Group Diffie-Hellman schemes. Also think about what you want to happen when a member leaves a group. Then ask targeted questions on the <a href=\"https://security.stackexchange.com/\">Information Security Stack Exchange</a>.</p>\n"}], "owner": {"reputation": 666, "user_id": 5339180, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec7a87ded73862f4599d86c43da80327?s=128&d=identicon&r=PG&f=1", "display_name": "V. Panchenko", "link": "https://stackoverflow.com/users/5339180/v-panchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1442523982, "creation_date": 1442434755, "last_edit_date": 1442523982, "question_id": 32617932, "link": "https://stackoverflow.com/questions/32617932/how-to-exchange-public-keys", "title": "How to exchange public keys?", "body": "<p>I have Client and Server, and want to have encrypt communication channel between them.\nThis is some simple code to generate public and private keys:</p>\n\n<pre><code>    RSA::PrivateKey privateKey;\n    privateKey.Initialize()\n\n    ///////////////////////////////////////\n    // Generate Parameters\n    InvertibleRSAFunction params;\n    params.GenerateRandomWithKeySize(this-&gt;rng, 3072);\n\n    ///////////////////////////////////////\n    // Generated Parameters\n    const Integer&amp; n = params.GetModulus();\n    const Integer&amp; p = params.GetPrime1();\n    const Integer&amp; q = params.GetPrime2();\n    const Integer&amp; d = params.GetPrivateExponent();\n    const Integer&amp; e = params.GetPublicExponent();\n\n    params.\n\n    ///////////////////////////////////////\n    // Dump\n    cout &lt;&lt; \"RSA Parameters:\" &lt;&lt; endl;\n    cout &lt;&lt; \" n: \" &lt;&lt; n &lt;&lt; endl;\n    cout &lt;&lt; \" p: \" &lt;&lt; p &lt;&lt; endl;\n    cout &lt;&lt; \" q: \" &lt;&lt; q &lt;&lt; endl;\n    cout &lt;&lt; \" d: \" &lt;&lt; d &lt;&lt; endl;\n    cout &lt;&lt; \" e: \" &lt;&lt; e &lt;&lt; endl;\n    cout &lt;&lt; endl;\n\n    ///////////////////////////////////////\n    // Create Keys\n    RSA::PrivateKey privateKey(params);\n    RSA::PublicKey publicKey(params);\n</code></pre>\n\n<p>But how I can get client's public key on server side and server's public key on client side? may be exist more simple way than serialize public key in file, send file, receive file on the other side and deserialize it?</p>\n\n<p>Class <code>Chat</code> have <code>DataTransferingInterface</code> instance, which point to <code>Server</code> or <code>Client</code> (it depends on whether the user has selected on the start). \nSome code for understanding:</p>\n\n<p>Class Chat:</p>\n\n<pre><code>class Chat : public OwnerServerInterface, public OwnerClientInterface\n    public:\n        //a lot of methods\n    protected:\n        virtual void handshakeServerSide(int clientSocket, void *objectForSaveIn, void *dataToSend);\n        virtual void handshakeClientSide(int serverSocket, void *objectForSaveIn, void *dataToSend);\n    private:\n        DataTransferingInterface* interface;\n</code></pre>\n\n<p>In methods <code>handshakeServerSide()</code> and <code>handshakeClientSide()</code> Server's <code>Chat</code> instance and Client's <code>Chat</code> instance make the handshake (data exchanging). In this methods server must send it's own public key, and get the client's public key. But how to do it?</p>\n"}, {"tags": ["c++", "string", "text", "newline"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1442434427, "post_id": 32617823, "comment_id": 53086351, "body": "Looping through and checking for newlines and changing if next not newline?"}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 2, "creation_date": 1442434446, "post_id": 32617823, "comment_id": 53086359, "body": "<code>std::regex_replace</code>"}, {"owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "edited": false, "score": 0, "creation_date": 1442434544, "post_id": 32617823, "comment_id": 53086422, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2896600/how-to-replace-all-occurrences-of-a-character-in-string\">How to replace all occurrences of a character in string?</a>"}, {"owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "edited": false, "score": 0, "creation_date": 1442434561, "post_id": 32617823, "comment_id": 53086428, "body": "is this C or C++? If C++, why not <code>std::string</code>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "edited": false, "score": 1, "creation_date": 1442434891, "post_id": 32617823, "comment_id": 53086622, "body": "@ventsyv: If you read the question, you&#39;d see that this one does not ask to replace ALL occurrences"}, {"owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "edited": false, "score": 0, "creation_date": 1442434986, "post_id": 32617823, "comment_id": 53086674, "body": "My bad, I misunderstood the question."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1442435009, "post_id": 32617823, "comment_id": 53086685, "body": "The most interesting to me is which company it is where programmers are asked to implement various user-hostile things like this, expending energy on that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "reply_to_user": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1442435181, "post_id": 32617823, "comment_id": 53086772, "body": "@mastov, OMG! Dont ever use regex! Especially for custom text processing logic."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1442435292, "post_id": 32617823, "comment_id": 53086825, "body": "This seems like a pretty straightforward process to implement using basic string manipulation.  Whatever mental process you used to create your examples, just code that up."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 3, "creation_date": 1442435514, "post_id": 32617823, "comment_id": 53086943, "body": "@AlekDepler what&#39;s your concern with using <code>regex</code>? Performance?"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 2, "creation_date": 1442435671, "post_id": 32617823, "comment_id": 53087025, "body": "WARNING: do <i>not</i> try to make any modifications of this C string: <code>char* some_text = &quot;part1\\n\\npart2\\npart3&quot;;</code>. - it&#39;s <i>read-only</i>; on many platforms writing to it will die with an access violation!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "reply_to_user": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 0, "creation_date": 1442436498, "post_id": 32617823, "comment_id": 53087429, "body": "@mattnewport, I just often have situations when 1km-long regular expression (written by someone else when dinosaurs were still alive) is &quot;doing something&quot; and you are acting like Sherlock Holmes trying to understand it&#39;s logic. Besides this, there some compatibility issues on different platforms."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 0, "creation_date": 1442437189, "post_id": 32617823, "comment_id": 53087777, "body": "@AlekDepler regexes, like any tool, can be abused but as of C++11 they are standardized in C++ (so there shouldn&#39;t be any cross platform differences) and for many uses they are much simpler (and likely more efficient) than custom code. This particular problem is simple enough that a regex may not be much simpler than the direct solution though."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "edited": false, "score": 0, "creation_date": 1442436116, "post_id": 32618086, "comment_id": 53087240, "body": "Nice one. I think this is the easiest way."}], "tags": [], "owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "is_accepted": false, "score": 2, "last_activity_date": 1442435670, "last_edit_date": 1442435670, "creation_date": 1442435331, "answer_id": 32618086, "question_id": 32617823, "link": "https://stackoverflow.com/questions/32617823/the-way-to-strip-newline-characters/32618086#32618086", "title": "The way to strip newline characters", "body": "<p>This function may works for your case, just manually check and replace single <code>\\n</code> with <code>space</code>. There may have better option like <a href=\"http://www.cplusplus.com/reference/regex/regex_replace/\" rel=\"nofollow\">regex_replace</a>.</p>\n\n<pre><code>void rep(char ch[])\n{\n    int cnt = 0;\n    int i;\n    for(i=0; ch[i]!='\\0'; i++)\n    {\n        if(ch[i]=='\\n')\n            cnt++;\n        else if(cnt==1)\n        {\n            ch[i-1]=' ';\n            cnt=0;\n        }\n        else\n            cnt=0;\n    }\n    if(cnt==1)\n        ch[i-1]=' ';\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14802, "user_id": 800123, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/bZMq5.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/800123/jack"}, "edited": false, "score": 2, "creation_date": 1442436500, "post_id": 32618129, "comment_id": 53087431, "body": "I like this kind of ASCII art to explain the regex."}], "tags": [], "owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "is_accepted": false, "score": 3, "last_activity_date": 1442436221, "last_edit_date": 1442436221, "creation_date": 1442435485, "answer_id": 32618129, "question_id": 32617823, "link": "https://stackoverflow.com/questions/32617823/the-way-to-strip-newline-characters/32618129#32618129", "title": "The way to strip newline characters", "body": "<p>The following regular expression detects single occurrences of newlines:</p>\n\n<pre><code>([^\\n]|^)\\n([^\\n]|$)\n\n|-------|\nno newline before\n(either other character or beginning of string)\n\n        |--|\n       newline\n\n           |--------|\n        no newline after\n   (either other character or end of string)\n</code></pre>\n\n<p>You can use that regular expression in <code>std::regex_replace</code> in order to replace those single newlines by spaces (and keeping the matched character before and after the newline by adding <code>$1</code> and <code>$2</code>):</p>\n\n<pre><code>std::string testString(\"\\n123\\n\\n456\\n789\");\nstd::regex e(\"([^\\n]|^)\\n([^\\n]|$)\");\nstd::cout &lt;&lt; std::regex_replace(testString, e, \"$1 $2\") &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "is_accepted": false, "score": 2, "last_activity_date": 1442435562, "last_edit_date": 1442435562, "creation_date": 1442435520, "answer_id": 32618143, "question_id": 32617823, "link": "https://stackoverflow.com/questions/32617823/the-way-to-strip-newline-characters/32618143#32618143", "title": "The way to strip newline characters", "body": "<p>Since it was tagged as C++, I'll treat it as such. Obviously this could be solved with a regex but it's equally trivial enough (as described) not to <em>require</em> one.</p>\n\n<pre><code>std::string s = \"your\\n\\nstring\\nhere\\n\";\nsize_t n = -1, len = s.length();\n    while ((n = s.find('\\n', n+1)) != std::string::npos)\n        if ((n == 0 &amp;&amp; s[n+1] != '\\n') || (n == len &amp;&amp; s[n-1] != '\\n') ||\n            (n != 0 &amp;&amp; n != len &amp;&amp; s[n-1] != '\\n' &amp;&amp; s[n+1] != '\\n'))\n            s[n] = ' ';\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1534, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1442499772, "creation_date": 1442434332, "last_edit_date": 1442499772, "question_id": 32617823, "link": "https://stackoverflow.com/questions/32617823/the-way-to-strip-newline-characters", "title": "The way to strip newline characters", "body": "<p>Let's say we have a long string with multiple newline characters:</p>\n\n<pre><code>char const* some_text = \"part1\\n\\npart2\\npart3\";\n</code></pre>\n\n<p>Now the task is to replace all '\\n' characters with spaces if it appears only once between text parts, and at the same time leave all '\\n' characters if it appears more than once. In other words:</p>\n\n<pre><code>\"123\\n456\" =&gt; \"123 456\"\n\"123\\n\\n456\" =&gt; \"123\\n\\n456\"\n\"123\\n\\n456\\n789\" =&gt; \"123\\n\\n456 789\"\n</code></pre>\n\n<p>What is the best way to do this?</p>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1442441566, "post_id": 32617779, "comment_id": 53089756, "body": "Just a few lines above that piece of code, in the sentence &quot;Declare an addrinfo object&quot;, is a link that reads &quot;addrinfo&quot;. You didn&#39;t consider clicking it to see if it could lead to anything useful?"}], "answers": [{"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 7, "last_activity_date": 1442434456, "creation_date": 1442434456, "answer_id": 32617853, "question_id": 32617779, "link": "https://stackoverflow.com/questions/32617779/can-someone-explain-this-code-with-structs-please-trying-to-learn-winsock-2/32617853#32617853", "title": "Can someone explain this code with structs please? (trying to learn Winsock 2)", "body": "<p>It's a C-style way of declaring a variable as an instance of a struct. <code>addrinfo</code> is the struct that's defined elsewhere, and <code>result</code> is a pointer to an instance of one. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms737530%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\">Here is the actual definition of addrinfo</a></p>\n\n<p>In modern C++, the following is equivalent:</p>\n\n<pre><code>addrinfo* result = NULL; // nullptr in C++11 and beyond\naddrinfo* ptr = NULL; // nullptr in C++11 and beyond\naddrinfo  hints;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1442435973, "post_id": 32617898, "comment_id": 53087175, "body": "This appears to be an appropriate answer to the user&#39;s question!"}], "tags": [], "owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "is_accepted": true, "score": 3, "last_activity_date": 1442434618, "creation_date": 1442434618, "answer_id": 32617898, "question_id": 32617779, "link": "https://stackoverflow.com/questions/32617779/can-someone-explain-this-code-with-structs-please-trying-to-learn-winsock-2/32617898#32617898", "title": "Can someone explain this code with structs please? (trying to learn Winsock 2)", "body": "<p><code>struct addrinfo</code> is a standard data structure to contain network address information. It is defined by e.g. POSIX, aka <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/basedefs/netdb.h.html\" rel=\"nofollow\">SingleUnix</a>. You get it by including <code>netdb.h</code> or your OS' equivalent. Its fields are (at least):</p>\n\n<pre><code>int               ai_flags      Input flags. \nint               ai_family     Address family of socket. \nint               ai_socktype   Socket type. \nint               ai_protocol   Protocol of socket. \nsocklen_t         ai_addrlen    Length of socket address. \nstruct sockaddr  *ai_addr       Socket address of socket. \nchar             *ai_canonname  Canonical name of service  location. \nstruct addrinfo  *ai_next       Pointer to next in list. \n</code></pre>\n\n<p><code>struct addrinfo *result = NULL, *ptr = NULL, hints;</code></p>\n\n<p><code>result</code> and <code>ptr</code> are pointers to <code>struct addrinfo</code>. <code>hints</code> is a stack-allocated <code>struct addrinfo</code>.</p>\n\n<p>The Windows Socket API is a pure C API hence it uses C conventions. Structure variables in C must be declared explictly with <code>struct</code>. You cannot leave off the <code>struct</code> as in C++. They are also not initialized, hence the <code>memset()</code>^W<code>ZeroMemory()</code></p>\n"}], "owner": {"reputation": 727, "user_id": 920920, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/dad6b3ea86e9c99fbd03e9c23ff45ee0?s=128&d=identicon&r=PG", "display_name": "Alex G", "link": "https://stackoverflow.com/users/920920/alex-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 32617898, "answer_count": 2, "score": 2, "last_activity_date": 1442434618, "creation_date": 1442434176, "question_id": 32617779, "link": "https://stackoverflow.com/questions/32617779/can-someone-explain-this-code-with-structs-please-trying-to-learn-winsock-2", "title": "Can someone explain this code with structs please? (trying to learn Winsock 2)", "body": "<p>I have typically seen structs of the form</p>\n\n<pre><code>struct Employee {\nint age;\nchar* name;\n}\n</code></pre>\n\n<p>I was looking at Microsoft's \"Getting Started\" for Winsock 2, and saw this:</p>\n\n<pre><code>struct addrinfo *result = NULL,\n                    *ptr = NULL,\n                    hints;\n\nZeroMemory( &amp;hints, sizeof(hints) );\nhints.ai_family = AF_UNSPEC;\nhints.ai_socktype = SOCK_STREAM;\nhints.ai_protocol = IPPROTO_TCP;\n</code></pre>\n\n<p>What kind of struct is this? I figure the name of the struct is <code>addrinfo</code>, but then what type are <code>*result</code>, <code>*ptr</code>, or <code>hints</code>?</p>\n\n<p>Also, how is <code>hints</code> given a <code>.ai_family/socktype/protocol</code> when it never was coded previously?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 4, "creation_date": 1442433903, "post_id": 32617678, "comment_id": 53086047, "body": "Basic rule of zero violation."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1442433918, "post_id": 32617678, "comment_id": 53086057, "body": "If they are copied using the copy constructor that probably accounts for the difference."}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1442434004, "post_id": 32617678, "comment_id": 53086122, "body": "The &quot;wierd&quot;  bit is because you are missing the copy constructor and assignment operators for the new iterator class.  Read rule of three and rule of zero"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1442434596, "post_id": 32617678, "comment_id": 53086442, "body": "If the wrapped container can contain duplicate elements, <code>operator!=</code> is wrong."}, {"owner": {"reputation": 1244, "user_id": 606961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/V8mtj.png?s=128&g=1", "display_name": "cardiff space man", "link": "https://stackoverflow.com/users/606961/cardiff-space-man"}, "edited": false, "score": 0, "creation_date": 1442435596, "post_id": 32617678, "comment_id": 53086988, "body": "Shouldn&#39;t the end_ object be a different state than begin_ ?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1442437536, "post_id": 32617678, "comment_id": 53087958, "body": "Adding to everything which is being said, it puzzles me to see how underlying iterator is dereferenced and it&#39;s object copied on every operation! I would expect this to happen only when wrapper iterator is dereferenced."}, {"owner": {"reputation": 1244, "user_id": 606961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/V8mtj.png?s=128&g=1", "display_name": "cardiff space man", "link": "https://stackoverflow.com/users/606961/cardiff-space-man"}, "reply_to_user": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1442438507, "post_id": 32617678, "comment_id": 53088477, "body": "@ SergeyA me too :) There is no value to this exercise if the iterator that results cannot be used with std::find (the representative of a lot of other algorithms). The code for using the legacy API as is is not that ugly. Maybe some RAII would be valuable (pace @Puppy) instead of implementing an iterator."}], "answers": [{"comments": [{"owner": {"reputation": 1244, "user_id": 606961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/V8mtj.png?s=128&g=1", "display_name": "cardiff space man", "link": "https://stackoverflow.com/users/606961/cardiff-space-man"}, "edited": false, "score": 1, "creation_date": 1442435660, "post_id": 32617744, "comment_id": 53087018, "body": "The &#39;Iterator&#39; might not be a pointer and therefore not suitable as the argument of shared_ptr."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "reply_to_user": {"reputation": 1244, "user_id": 606961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/V8mtj.png?s=128&g=1", "display_name": "cardiff space man", "link": "https://stackoverflow.com/users/606961/cardiff-space-man"}, "edited": false, "score": 0, "creation_date": 1442437608, "post_id": 32617744, "comment_id": 53087990, "body": "Doesn&#39;t need to be a pointer. Worst comes to worst, you can just <code>shared_ptr&lt;unique_ptr&lt;T, freaky_deleter&gt;&gt;</code>."}, {"owner": {"reputation": 2857, "user_id": 997527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8d85e69468a00b418516425577e313d0?s=128&d=identicon&r=PG", "display_name": "Mac", "link": "https://stackoverflow.com/users/997527/mac"}, "edited": false, "score": 0, "creation_date": 1442442498, "post_id": 32617744, "comment_id": 53090038, "body": "@Puppy how would you wrap that API then?"}], "tags": [], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": true, "score": 2, "last_activity_date": 1442434057, "creation_date": 1442434057, "answer_id": 32617744, "question_id": 32617678, "link": "https://stackoverflow.com/questions/32617678/design-of-c-iterator/32617744#32617744", "title": "design of C++ iterator", "body": "<p>This is a basic rule of zero violation. It occurred because instead of re-using resource handling components from the Standard library that do this job properly, you wrote your own incorrect resource handling. </p>\n\n<p>A simple example is what happens if the iterator is copied, which the Standard requires that it must be able to handle.</p>\n\n<p>You should implement virtually all resource handling in terms of the Standard library primitives. A simple shared pointer would trivially solve this issue.</p>\n"}], "owner": {"reputation": 2857, "user_id": 997527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8d85e69468a00b418516425577e313d0?s=128&d=identicon&r=PG", "display_name": "Mac", "link": "https://stackoverflow.com/users/997527/mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 32617744, "answer_count": 1, "score": 1, "last_activity_date": 1442434057, "creation_date": 1442433800, "question_id": 32617678, "link": "https://stackoverflow.com/questions/32617678/design-of-c-iterator", "title": "design of C++ iterator", "body": "<p>I am working with a legacy API that has to be called like this:</p>\n\n<pre><code>Iterator iter = IteratorCreate();\nwhile (iter)\n{\n    Object obj = IteratorGet(iter);\n\n    //do stuff\n\n    IteratorNext(iter);\n}\nIteratorDelete(iter);\n</code></pre>\n\n<p>I was wondering if I could wrap it into c++ iterators, so after googling a bit I saw that I could build something like this:</p>\n\n<pre><code>class MyIterator {\npublic:\n    MyIterator(int id)\n    {\n        m_iter = IteratorCreate();\n        m_obj = IteratorGet(m_iter);\n        std::cout &lt;&lt; m_obj &lt;&lt; \" enhanced \" &lt;&lt; this &lt;&lt; std::endl;\n    }\n\n    MyIterator()\n    {\n        std::cout &lt;&lt; m_obj &lt;&lt; \" default \" &lt;&lt; this &lt;&lt; std::endl;\n    }\n\n    bool operator!=(const MyIterator&amp; other)\n    {\n        return (m_obj != other.m_obj);\n    }\n\n    const MyIterator&amp; operator++()\n    {\n        IteratorNext(m_iter);\n        m_obj = IteratorGet(m_iter);\n        return *this;\n    }\n\n    CNeoPersist* operator*()\n    {\n        if (m_iter)\n            return m_obj;\n        else\n            return nullptr;\n    }\n\n    ~MyIterator()\n    {\n        std::cout &lt;&lt; m_iter &lt;&lt; \" \" &lt;&lt; this &lt;&lt; std::endl;\n    }\n\nprivate:\n    CIterator* m_iter = nullptr;\n    CNeoPersist* m_obj = nullptr;\n};\n\nclass MyContainer\n{\npublic:\n\n    MyIterator begin() const { return begin_; }\n    MyIterator end() const { return end_; }\n    MyContainer(int id) : begin_(id), end_() {}\n\nprivate:\nMyIterator begin_;\nMyIterator end_;\n};\n</code></pre>\n\n<p>Which seems to kind of work, but I was wondering if there a better way of doing it. Also, while debugging it I saw something \"weird\", the constructors get called 2 times, but destructors get called 4 times:</p>\n\n<pre><code>0000006B27633D98 enhanced 0000006B22DFF858\n0000000000000000 default 0000006B22DFF868\n\n0000000000000000 0000006B22DFF8C8\n0000006B267FE510 0000006B22DFF898\n0000000000000000 0000006B22DFF868\n0000006B267FE510 0000006B22DFF858\n</code></pre>\n\n<p>Why is that?</p>\n"}, {"tags": ["c++", "opencv", "image-processing"], "owner": {"reputation": 8741, "user_id": 1924375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c999552c8c5ac5bdbe3cb0d0e219f76f?s=128&d=identicon&r=PG", "display_name": "user1924375", "link": "https://stackoverflow.com/users/1924375/user1924375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442433735, "creation_date": 1442433735, "question_id": 32617664, "link": "https://stackoverflow.com/questions/32617664/object-tracking-delay-color-tracking-opencv", "title": "Object tracking delay color tracking OpenCV", "body": "<p>I am trying to detect colored balls like ps3 move controller balls from 2 mt distance.I have 10 camera in same room hanging from the ceiling.Room is dark and balls have led inside.I have 4-5 balls.(red,blue,green,yellow,pink). I want track their position with opencv.Whats the right mehtod for doing this in opencv ? Can u give link , example for this ?</p>\n\n<p>I use this code but i have delay problem.When i comment // my trackFilteredObject line there is no lag.But when using this code i have lot latency.I cant understand why happening because my normal cpu usage ~%15 ram usage 6.3GB/15GB (%40) when run this code cpu usage ~20-23 ram usage 6.4GB . I think its not about cpu-ram performance.What am i doing wrong ?</p>\n\n<p>Video: <a href=\"https://www.youtube.com/watch?v=_BKtJpPrkO4\" rel=\"nofollow\">https://www.youtube.com/watch?v=_BKtJpPrkO4</a> (You can see lag in first 10 sec.After 10 sen i comment tracking codes.)</p>\n\n<p>Note:Kamerasayisi mean cameracount My Track Function:</p>\n\n<pre><code>void trackFilteredObject(Object theObject,Mat threshold,Mat HSV, Mat &amp;cameraFeed){\n    //max number of objects to be detected in frame\n    const int FRAME_WIDTH = 5120;\nconst int FRAME_HEIGHT = 480;\n\n    const int MAX_NUM_OBJECTS=50;\n//minimum and maximum object area\nconst int MIN_OBJECT_AREA = 10*10;\nconst int MAX_OBJECT_AREA = FRAME_HEIGHT*FRAME_WIDTH/1.5;\n    vector &lt;Object&gt; objects;\n\n    Mat temp;\n    threshold.copyTo(temp);\n    //these two vectors needed for output of findContours\n    vector&lt; vector&lt;Point&gt; &gt; contours;\n    vector&lt;Vec4i&gt; hierarchy;\n    //find contours of filtered image using openCV findContours function\n    findContours(temp,contours,hierarchy,CV_RETR_CCOMP,CV_CHAIN_APPROX_SIMPLE );\n    //use moments method to find our filtered object\n    double refArea = 0;\n    bool objectFound = false;\n    if (hierarchy.size() &gt; 0) {\n        int numObjects = hierarchy.size();\n        //if number of objects greater than MAX_NUM_OBJECTS we have a noisy filter\n        if(numObjects&lt;MAX_NUM_OBJECTS){\n            for (int index = 0; index &gt;= 0; index = hierarchy[index][0]) {\n\n                Moments moment = moments((cv::Mat)contours[index]);\n                double area = moment.m00;\n\n        //if the area is less than 20 px by 20px then it is probably just noise\n        //if the area is the same as the 3/2 of the image size, probably just a bad filter\n        //we only want the object with the largest area so we safe a reference area each\n                //iteration and compare it to the area in the next iteration.\n                if(area&gt;MIN_OBJECT_AREA){\n\n                    Object object;\n\n                    object.setXPos(moment.m10/area);\n                    object.setYPos(moment.m01/area);\n                    object.setType(theObject.getType());\n                    object.setColor(theObject.getColor());\n\n                    objects.push_back(object);\n\n                    objectFound = true;\n\n                }else objectFound = false;\n            }\n            //let user know you found an object\n            if(objectFound ==true){\n                //draw object location on screen\n                drawObject(objects,cameraFeed,temp,contours,hierarchy);}\n\n        }else putText(cameraFeed,\"TOO MUCH NOISE! ADJUST FILTER\",Point(0,50),1,2,Scalar(0,0,255),2);\n    }       \n}\n};\n</code></pre>\n\n<p>Main Code:</p>\n\n<pre><code>       void Run()\n    {\n\n\n        int w, h;\n\n        _fps = 30;\n        IplImage *pCapImage[kameraSayisi];\n        IplImage *pDisplayImage;\n        PBYTE pCapBuffer = NULL;\n        // Create camera instance\n        for(int i = 0; i &lt; kameraSayisi; i++)\n        {\n            _cam[i] = CLEyeCreateCamera(_cameraGUID[i], _mode, _resolution, _fps);\n            if(_cam[i] == NULL) return;\n            // Get camera frame dimensions\n            CLEyeCameraGetFrameDimensions(_cam[i], w, h);\n            // Create the OpenCV images\n            pCapImage[i] = cvCreateImage(cvSize(w, h), IPL_DEPTH_8U, 1);\n\n            // Set some camera parameters\n            CLEyeSetCameraParameter(_cam[i], CLEYE_GAIN, 0);\n            CLEyeSetCameraParameter(_cam[i], CLEYE_EXPOSURE, 511);\n\n            // Start capturing\n            CLEyeCameraStart(_cam[i]);\n\n\n        }\n        pDisplayImage = cvCreateImage(cvSize(w*kameraSayisi / 2, h * kameraSayisi/4 ), IPL_DEPTH_8U  ,1);\n\n        if(_cam == NULL)        return;\n\n  int iLastX = -1; \n int iLastY = -1;\n\n\n\n  //Capture a temporary image from the camera\n    //program\n    bool trackObjects = true;\n    bool useMorphOps = true;\n\n        Mat HSV;\n  //Create a black image with the size as the camera output\n Mat imgLines;\n  // imgLines = Mat::zeros( cvarrToMat(image).size(), CV_8UC3 );;\n Mat threshold;\n    //x and y values for the location of the object\n    int x=0, y=0;\n    bool calibrationMode = false;\n    if(calibrationMode){\n        //create slider bars for HSV filtering\n        createTrackbars();\n    }\n\n        // image capturing loop\n        while(_running)\n        {\n\n            PBYTE pCapBuffer;\n            // Capture camera images\n            for(int i = 0; i &lt; kameraSayisi; i++)\n            {\n                cvGetImageRawData(pCapImage[i], &amp;pCapBuffer);\n                CLEyeCameraGetFrame(_cam[i], pCapBuffer, (i==0)?2000:0);\n\n            }\n\n            // Display stereo image\n                for(int i = 0; i &lt; kameraSayisi; i++)\n                {\n                    cvSetImageROI(pDisplayImage, cvRect(w * (i%4) ,i/4 * h, w, h));\n                    cvCopy(pCapImage[i], pDisplayImage);\n                }\n                cvResetImageROI(pDisplayImage);\n\n            Mat imgOriginal;\n            Mat imgConverted = cvarrToMat(pDisplayImage);\n            if(calibrationMode==true)\n            {\n\n            //need to find the appropriate color range values\n            // calibrationMode must be false\n\n            //if in calibration mode, we track objects based on the HSV slider values.\n                //cvtColor(imgOriginal,imgOriginal,CV_BayerRG2RGB);\n                cvtColor(imgConverted,imgOriginal,CV_BayerGB2BGR);\n                cvtColor(imgOriginal,HSV,CV_BGR2HSV);\n                inRange(HSV,Scalar(H_MIN,S_MIN,V_MIN),Scalar(H_MAX,S_MAX,V_MAX),threshold);\n                morphOps(threshold);\n                imshow(_windowName + 'T',threshold);\n\n            //the folowing for canny edge detec         \n                /// Create a matrix of the same type and size as src (for dst)\n                dst.create( imgOriginal.size(), src.type() );\n                /// Convert the image to grayscale\n                cvtColor( imgOriginal, src_gray, CV_BGR2GRAY );\n                /// Create a window\n                namedWindow( window_name, CV_WINDOW_AUTOSIZE );\n                /// Create a Trackbar for user to enter threshold\n            //  createTrackbar( \"Min Threshold:\", window_name, &amp;lowThreshold, max_lowThreshold, CannyThreshold );\n                /// Show the image\n                Object a = Object(H_MIN,S_MIN,V_MIN,H_MAX,S_MAX,V_MAX);\n                trackFilteredObject(a,threshold,HSV,imgOriginal);\n        }\n\n            else{\n\n            //we can use their member functions/information\n            Object blue(\"blue\"), yellow(\"yellow\"), red(\"red\"), orange(\"orange\"),white(\"white\");\n                cvtColor(imgConverted,imgOriginal,CV_BayerGB2BGR);\n            //first find blue objects\n            cvtColor(imgOriginal,HSV,CV_RGB2HSV);\n            inRange(HSV,blue.getHSVmin(),blue.getHSVmax(),threshold);\n            morphOps(threshold);\n\n            //then yellows\n            inRange(HSV,yellow.getHSVmin(),yellow.getHSVmax(),threshold);\n\n            //then reds\n\n            inRange(HSV,red.getHSVmin(),red.getHSVmax(),threshold);\n\n            //then white\n\n            inRange(HSV,white.getHSVmin(),white.getHSVmax(),threshold);\n\n                //then orange\n\n            inRange(HSV,orange.getHSVmin(),orange.getHSVmax(),threshold);\n        trackFilteredObject(yellow,threshold,HSV,imgOriginal);\n                trackFilteredObject(white,threshold,HSV,imgOriginal);\n            trackFilteredObject(red,threshold,HSV,imgOriginal);\n            trackFilteredObject(blue,threshold,HSV,imgOriginal);\n            trackFilteredObject(orange,threshold,HSV,imgOriginal);\n\n            }\n        //delay 10ms so that screen can refresh.\n        //image will not appear without this waitKey() command\n                if (cvWaitKey(30) == 27) //wait for 'esc' key press for 30ms. If 'esc' key is pressed, break loop\n             {\n                    cout &lt;&lt; \"esc key is pressed by user\" &lt;&lt; endl;\n                    break; \n             }\n\n        //  cvShowImage(_windowName, image);\n            imshow(_windowName,imgOriginal);\n        }\n            for(int i = 0; i &lt; kameraSayisi; i++)\n        {\n            // Stop camera capture\n            CLEyeCameraStop(_cam[i]);\n            // Destroy camera object\n            CLEyeDestroyCamera(_cam[i]);\n            // Destroy the allocated OpenCV image\n            cvReleaseImage(&amp;pCapImage[i]);\n            _cam[i] = NULL;\n        }\n\n    }\n</code></pre>\n"}, {"tags": ["c++", "qt", "memory-leaks"], "comments": [{"owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "edited": false, "score": 0, "creation_date": 1442435228, "post_id": 32617659, "comment_id": 53086793, "body": "I&#39;m using Visual Leak detector 2.4RC2 in Qt Creator 3.5.0. It doesn&#39;t detect any memory leaks."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "edited": false, "score": 0, "creation_date": 1442435579, "post_id": 32617659, "comment_id": 53086978, "body": "Does that suggest that QtCreator is suppressing Visual Leak detector reporting the memory leak then?"}, {"owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "edited": false, "score": 0, "creation_date": 1442436437, "post_id": 32617659, "comment_id": 53087396, "body": "I&#39;m not sure, but I&#39;m on windows anyway, but also Qt 5.5. Maybe it&#39;s a qt bug in your built."}], "answers": [{"comments": [{"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 1, "creation_date": 1442506228, "post_id": 32634034, "comment_id": 53118837, "body": "Done, and it still only leaks 4 bytes, so no big issue. I have resolved this by creating a suppression file, and just ignoring the issue"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1442502992, "creation_date": 1442502992, "answer_id": 32634034, "question_id": 32617659, "link": "https://stackoverflow.com/questions/32617659/qt-how-to-properly-clean-up-qsettings-to-prevent-memory-leak/32634034#32634034", "title": "QT: how to properly clean up QSettings to prevent memory leak?", "body": "<p>It's a Qt bug, but you don't know yet if it's important or not. Check if you can make <em>more</em> memory leak. Do this whole thing 1000 times in a loop and if it leaks 1000 <code>int</code>s, you should definitely file a bug report. Otherwise it'll have low priority.</p>\n\n<blockquote>\n  <p>How can I properly clean up to prevent this memory leak?</p>\n</blockquote>\n\n<p>You already are properly cleaning up. It's C++ and RAII classes, you shouldn't have to do anything. It's not C.</p>\n"}], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 826, "favorite_count": 0, "accepted_answer_id": 32634034, "answer_count": 1, "score": 2, "last_activity_date": 1442502992, "creation_date": 1442433720, "question_id": 32617659, "link": "https://stackoverflow.com/questions/32617659/qt-how-to-properly-clean-up-qsettings-to-prevent-memory-leak", "title": "QT: how to properly clean up QSettings to prevent memory leak?", "body": "<p>I have written the following small exemplar test case which simply writes a single key/value into a <code>QSettings</code> object (using <strong>Qt 5.5</strong>): </p>\n\n<pre><code>#include &lt;QSettings&gt;\n\nint main()\n{\n    QSettings settings(\"/tmp/settings.ini\", QSettings::IniFormat);\n\n    std::string data = \"world\";\n    QByteArray arr(data.c_str(), data.size());\n\n    settings.setValue(\"hello\", arr);\n    return 0;\n}\n</code></pre>\n\n<p>I have compiled it as follows:</p>\n\n<pre><code>$ g++ main.cpp -I${QTDIR}/include -I${QTDIR}/include/QtCore -fpic \\\n        -L${QTDIR}/lib -Wl,-R -Wl,\"$QTDIR/lib\" -lQt5Core -o test\n</code></pre>\n\n<p>Running it produces no <code>stdout</code>/<code>stderr</code> output, as expected</p>\n\n<pre><code>$ ./test\n</code></pre>\n\n<p>However, we can see that it worked as expected by looking at the <code>\"settings.ini\"</code> file it created:</p>\n\n<pre><code>$ cat /tmp/settings.ini \n[General]\nhello=@ByteArray(world)\n</code></pre>\n\n<p>However, running it though <code>valgrind</code> reports a <strong>memory leak</strong>:</p>\n\n<pre><code>$ valgrind --quiet --leak-check=full ./test\n\n==2148== 4 bytes in 1 blocks are definitely lost in loss record 1 of 4\n==2148==    at 0x4C2B0E0: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2148==    by 0x4EC4CA1: qrand() (in ${QTDIR}/lib/libQt5Core.so.5.5.0)\n==2148==    by 0x5012CC3: ??? (in ${QTDIR}/lib/libQt5Core.so.5.5.0)\n==2148==    by 0x4FE6291: QFile::open(QFlags&lt;QIODevice::OpenModeFlag&gt;) (in ${QTDIR}/lib/libQt5Core.so.5.5.0)\n==2148==    by 0x5013350: QTemporaryFile::open(QFlags&lt;QIODevice::OpenModeFlag&gt;) (in ${QTDIR}/lib/libQt5Core.so.5.5.0)\n==2148==    by 0x505CA7D: ??? (in ${QTDIR}/lib/libQt5Core.so.5.5.0)\n==2148==    by 0x505DE8C: ??? (in ${QTDIR}/lib/libQt5Core.so.5.5.0)\n==2148==    by 0x4FF5A3B: QLockFile::tryLock(int) (in ${QTDIR}/lib/libQt5Core.so.5.5.0)\n==2148==    by 0x503DE80: ??? (in ${QTDIR}/lib/libQt5Core.so.5.5.0)\n==2148==    by 0x503F0C8: QSettings::~QSettings() (in ${QTDIR}/lib/libQt5Core.so.5.5.0)\n==2148==    by 0x400E72: main (in /home/steve/test)\n==2148== \n</code></pre>\n\n<p>As can be seen this is originating in the <code>QSettings</code> destructor. </p>\n\n<p><strong><code>QSettings::sync()</code>:</strong></p>\n\n<p>Note that calling <code>settings.sync()</code> makes no difference to the memory leak, all it does is move the leak to originate from within <code>sync()</code>, rather than the destructor.</p>\n\n<p>This is to be expected, since the <a href=\"http://doc.qt.io/qt-5/qsettings.html#sync\" rel=\"nofollow\">documentation</a> states that <code>sync()</code> is called from the destructor.</p>\n\n<p><strong>Question:</strong></p>\n\n<p>How can I properly clean up to prevent this memory leak?</p>\n"}, {"tags": ["java", "c++", "c", "batch-file"], "comments": [{"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1442433274, "post_id": 32617470, "comment_id": 53085705, "body": "This is an OS dependent behavior. Is this Windows, Linux, OS X ?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1442433320, "post_id": 32617470, "comment_id": 53085729, "body": "On Linux use inotify."}, {"owner": {"reputation": 36, "user_id": 4597828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7767eecfbd2a1bed44ecd352a8a534a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Lockyear", "link": "https://stackoverflow.com/users/4597828/ben-lockyear"}, "edited": false, "score": 0, "creation_date": 1442433637, "post_id": 32617470, "comment_id": 53085887, "body": "Thats the thing, i&#39;m helping this school decide there op there gonna use and they will need a lot of file actions like this, and i was also thinking iNotify on linux, although they preferably would like to use windows."}, {"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1442434027, "post_id": 32617470, "comment_id": 53086135, "body": "To me, it seems key to make the solution efficient if your specification that a lot of file actions like this will occur is significant, it appears to require interactive (immediate) feedback to the user and should be light on system resources. To me that suggests a service in Windows or a daemon in Linux, for which I&#39;d choose C++. For Windows that involves reading the journal of the filesystem or ReadDirectoryChangesW (though, be warned, the latter does miss notifications occasionally - reading the journal never misses). However, you MUST pin down the OS - there are no good portable answers"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1442645459, "post_id": 32617470, "comment_id": 53176347, "body": "on Linux, run a &#39;cron&#39; entry that triggers a bash script on a regular basis, where the script checks if the file exists at the destination. and if it does, kill the cron entry and trigger the desired executable]"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1442433291, "creation_date": 1442433291, "answer_id": 32617533, "question_id": 32617470, "link": "https://stackoverflow.com/questions/32617470/cause-a-batch-file-to-be-opened-upon-a-file-being-moved-to-a-specific-file/32617533#32617533", "title": "Cause a batch file to be opened upon a file being moved to a specific file", "body": "<p>For a portable solution, your program would need to read the contents of the directory in question every X number of seconds and see if a new file appears in the listing that didn't appear the last time you checked.  If you find one, run the desired action.</p>\n\n<p>Some OS's have special hooks to detect when the contents of a directory changes.  You'd need to look up the OS documentation to see how that works, and such a solution would probably require C or C++.</p>\n"}, {"tags": [], "owner": {"reputation": 1872, "user_id": 5321349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1fef66e782bb5aa72a77908887f574?s=128&d=identicon&r=PG&f=1", "display_name": "Cinnam", "link": "https://stackoverflow.com/users/5321349/cinnam"}, "is_accepted": false, "score": 0, "last_activity_date": 1442434006, "last_edit_date": 1442434006, "creation_date": 1442433603, "answer_id": 32617622, "question_id": 32617470, "link": "https://stackoverflow.com/questions/32617470/cause-a-batch-file-to-be-opened-upon-a-file-being-moved-to-a-specific-file/32617622#32617622", "title": "Cause a batch file to be opened upon a file being moved to a specific file", "body": "<p>Java solution would involve watching a directory for changes using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/WatchService.html\" rel=\"nofollow\"><code>WatchService</code></a>.</p>\n\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/notification.html\" rel=\"nofollow\">https://docs.oracle.com/javase/tutorial/essential/io/notification.html</a> for details.</p>\n\n<blockquote>\n  <p>The java.nio.file package provides a file change notification API, called the Watch Service API. This API enables you to register a directory (or directories) with the watch service. When registering, you tell the service which types of events you are interested in: file creation, file deletion, or file modification. When the service detects an event of interest, it is forwarded to the registered process.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2379, "user_id": 4070433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e6d54f1e802f6641a82ec60bb6053610?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4070433/paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1442454250, "last_edit_date": 1442454250, "creation_date": 1442453878, "answer_id": 32621303, "question_id": 32617470, "link": "https://stackoverflow.com/questions/32617470/cause-a-batch-file-to-be-opened-upon-a-file-being-moved-to-a-specific-file/32621303#32621303", "title": "Cause a batch file to be opened upon a file being moved to a specific file", "body": "<p>\nWith batch, you can do with <code>IF EXIST</code> statement of a specific file destination with in a infinite loop with <code>timeout</code> spacing.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-vb prettyprint-override\"><code>@echo off\n\nset \"indice=filename.txt\"\n\n:loop\nIF EXIST %indice% goto MyCommand\n\nREM /T n in seconds\n@timeout /T 60 /nobreak &gt;NUL\ngoto loop\n\n:MyCommand\n\nfake-command\n\nset /p M=job done! go to loop?(y/n):\nif /I [%M:~0,1%]==[y] (goto loop) else (exit /b 0)\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 4597828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7767eecfbd2a1bed44ecd352a8a534a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Lockyear", "link": "https://stackoverflow.com/users/4597828/ben-lockyear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1442454250, "creation_date": 1442433065, "question_id": 32617470, "link": "https://stackoverflow.com/questions/32617470/cause-a-batch-file-to-be-opened-upon-a-file-being-moved-to-a-specific-file", "title": "Cause a batch file to be opened upon a file being moved to a specific file", "body": "<p>Is it possible to cause a batch file to open and run code when a file is moved to a specific destination. Any language that this can be done in is fine, I am fairly fluent in most languages.</p>\n\n<p>Eg. If i moved a file to Downloads, a notification would popup saying 'please don't move files here' and moves the file to another file.</p>\n"}, {"tags": ["c++", "heap", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 1, "creation_date": 1442432937, "post_id": 32617378, "comment_id": 53085530, "body": "<code>something = &quot;test&quot;</code> This is not *copy <code>&quot;test&quot;</code> into <code>something</code>, but *let test point to the address of the string constant <code>&quot;test&quot;</code>. You only re-assign the pointer. The <code>delete[]</code> tries to free the static string. Enable warnings, because it should trigger one!"}, {"owner": {"reputation": 1263, "user_id": 2325279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xkrmf.jpg?s=128&g=1", "display_name": "Petr Vep\u0159ek", "link": "https://stackoverflow.com/users/2325279/petr-vep%c5%99ek"}, "edited": false, "score": 0, "creation_date": 1442432993, "post_id": 32617378, "comment_id": 53085556, "body": "something = &quot;test&quot;;  -- This will make something pointer point at string constant.  Original value of something is lost.  Then when you delete something, you do not delete the char[10] you allocated but attempt to delete the string constant and things go wrong..."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1442433010, "creation_date": 1442433010, "answer_id": 32617452, "question_id": 32617378, "link": "https://stackoverflow.com/questions/32617378/c-dynamic-memory-error/32617452#32617452", "title": "C++ Dynamic Memory Error", "body": "<pre><code>something = \"test\";\n</code></pre>\n\n<p>assigns your pointer to an address allocated using a static storage allocated literal. Your original pointer allocated dynamically gets lost.</p>\n\n<p>To copy contents, use <a href=\"http://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow\"><code>std::copy()</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1362, "user_id": 1366027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8113fc570a09e03414126d8cda5f971c?s=128&d=identicon&r=PG", "display_name": "pcarter", "link": "https://stackoverflow.com/users/1366027/pcarter"}, "is_accepted": false, "score": 0, "last_activity_date": 1442433113, "creation_date": 1442433113, "answer_id": 32617481, "question_id": 32617378, "link": "https://stackoverflow.com/questions/32617378/c-dynamic-memory-error/32617481#32617481", "title": "C++ Dynamic Memory Error", "body": "<p>You need to use strcpy to copy \"test\" into your array.</p>\n\n<pre><code>strcpy(something, \"test\"); // or even better user strncpy\n</code></pre>\n\n<p>Instead, you have:</p>\n\n<pre><code>something = \"test\";\n</code></pre>\n\n<p>The code about overwrites the pointer stored in the something variable with a new address. The address of a compiler generated string constant. Then delete [] is acting on this new address that doesn't point to the dynamically allocated memory returned by new.</p>\n"}, {"tags": [], "owner": {"reputation": 1769, "user_id": 974040, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/483eaae1aa0c673b91e343ac04f7b1ac?s=128&d=identicon&r=PG", "display_name": "Michael Conlen", "link": "https://stackoverflow.com/users/974040/michael-conlen"}, "is_accepted": true, "score": 1, "last_activity_date": 1442433181, "creation_date": 1442433181, "answer_id": 32617495, "question_id": 32617378, "link": "https://stackoverflow.com/questions/32617378/c-dynamic-memory-error/32617495#32617495", "title": "C++ Dynamic Memory Error", "body": "<p>In this case <code>something</code> is a pointer to character. In the second line you change the value of <code>something</code> to point to the first character of \"test\" rather than what you expect, which is to place \"test\" in the memory pointed to by <code>something</code>. </p>\n\n<p>When you <code>delete</code> you're trying to delete the memory that \"test\" is in, which read only memory. </p>\n\n<p>In general you should consider using <code>std::string</code> with <code>C++</code>. If you're using <code>char *</code> for some other reason look at <code>strcpy</code> and <code>strncpy</code></p>\n"}], "owner": {"reputation": 120, "user_id": 4498537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-R9wQm23vtNU/AAAAAAAAAAI/AAAAAAAAAFI/UWu9YVrCCI4/photo.jpg?sz=128", "display_name": "ChrisK", "link": "https://stackoverflow.com/users/4498537/chrisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 32617495, "answer_count": 3, "score": -1, "last_activity_date": 1442433181, "creation_date": 1442432735, "question_id": 32617378, "link": "https://stackoverflow.com/questions/32617378/c-dynamic-memory-error", "title": "C++ Dynamic Memory Error", "body": "<p>This is my code</p>\n\n<pre><code>int main()\n{\n    char *something = new char[10];\n    something = \"test\";\n\n    cout &lt;&lt; something;\n\n    delete[] something;\n    return 0;\n}\n</code></pre>\n\n<p>When I debug it it opens the application and gives me an error window saying Debug Assertion Failed: _CrtlsValidHeapPointer(block)</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 4, "creation_date": 1442432412, "post_id": 32617276, "comment_id": 53085222, "body": "Change <code>continue</code> to <code>break</code>."}], "answers": [{"comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1442433010, "post_id": 32617402, "comment_id": 53085565, "body": "OP also forgot to <code>break</code> the <code>case</code>."}, {"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1442433905, "post_id": 32617402, "comment_id": 53086050, "body": "You are correct, so I&#39;ve added a reference for them to use, as it is not their original question."}, {"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "edited": false, "score": 0, "creation_date": 1442436111, "post_id": 32617402, "comment_id": 53087238, "body": "You should accept answers if they have been helpful to you. Glad I could help."}], "tags": [], "owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "is_accepted": true, "score": 2, "last_activity_date": 1442433865, "last_edit_date": 1442433865, "creation_date": 1442432824, "answer_id": 32617402, "question_id": 32617276, "link": "https://stackoverflow.com/questions/32617276/how-can-i-go-to-the-first-while-loop-if-the-answer-is-n-in-this-code/32617402#32617402", "title": "How can i go to the first while loop if the answer is &#39;N&#39; in this code:", "body": "<p>In a loop, <code>continue</code> tells the loop to perform the next iteration of the loop, skipping the rest of the code in the loop.</p>\n\n<p>In a loop, <code>break</code> tells the loop to exit the loop, even if the condition to end the loop has not been satisfied.</p>\n\n<p>Since your <code>while</code> loop's condition is <code>true</code>, it will never end; your two possible choices cannot cause the loop to exit.</p>\n\n<p>Therefore, your solution is to change <code>continue</code> to <code>break</code>, as @R_Kapp said in his comment.</p>\n\n<pre><code>while (true) {\n    cout &lt;&lt; \"Add another record? (Y/N): \";  cin &gt;&gt; ch;\n    if (ch == 'Y')\n        m1.addrecord();\n    else if (ch == 'N')\n        break; // This is changed from `continue` to `break`\n}\n</code></pre>\n\n<p>As user @LogicStuff points out, you are also missing a <code>break</code> statement at the end of your cases, in your <code>switch</code> statement. Since this is not part of the question, you'll have to look into it yourself.</p>\n\n<p>Please view this link for further reference on <code>switch</code> statements:\n<a href=\"http://en.cppreference.com/w/cpp/language/switch\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/switch</a></p>\n"}], "owner": {"reputation": 15, "user_id": 5340272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4273384586d5e7ee2d29c52589f506f?s=128&d=identicon&r=PG&f=1", "display_name": "Rana", "link": "https://stackoverflow.com/users/5340272/rana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 32617402, "answer_count": 1, "score": -1, "last_activity_date": 1442433865, "creation_date": 1442432333, "last_edit_date": 1442432505, "question_id": 32617276, "link": "https://stackoverflow.com/questions/32617276/how-can-i-go-to-the-first-while-loop-if-the-answer-is-n-in-this-code", "title": "How can i go to the first while loop if the answer is &#39;N&#39; in this code:", "body": "<pre><code>while (true)\n{\n    cout &lt;&lt; \"1- Add record\" &lt;&lt; endl;\n    cout &lt;&lt; \"2- List records\" &lt;&lt; endl;\n    cout &lt;&lt; \"Select your choise: \";   cin &gt;&gt; n;\n    switch (n) {\n    case 1:      m1.addrecord(); \n        while (true) {\n            cout &lt;&lt; \"Add another record? (Y/N): \";  cin &gt;&gt; ch;\n            if (ch == 'Y')\n                m1.addrecord();\n            else if (ch == 'N')\n                continue;\n            }\n    case 2:     m1.listrecords(); \n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qhash", "qset"], "comments": [{"owner": {"reputation": 2039, "user_id": 2266412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TvyMj.jpg?s=128&g=1", "display_name": "Max Go", "link": "https://stackoverflow.com/users/2266412/max-go"}, "edited": false, "score": 2, "creation_date": 1442433421, "post_id": 32617181, "comment_id": 53085780, "body": "it seems the error &quot;/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:103:5: error: no matching function for call to \u2018qHash(const WMathTest::Tag&amp;)\u2019&quot; appears because you defines qHash as &quot;inline uint qHash(const WMathTest::Tag &amp;tag, uint seed)&quot;, but QSet expects it to be defined as &quot;inline uint qHash(const WMathTest::Tag &amp;tag)&quot;"}, {"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "reply_to_user": {"reputation": 2039, "user_id": 2266412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TvyMj.jpg?s=128&g=1", "display_name": "Max Go", "link": "https://stackoverflow.com/users/2266412/max-go"}, "edited": false, "score": 0, "creation_date": 1442433702, "post_id": 32617181, "comment_id": 53085934, "body": "I obtain similiar errors also with <code>inline uint qHash(const WMathTest::Tag &amp;tag){return qHash(tag.getText());}</code> I&#39;ve used both of them as I&#39;ve seen in documentation <a href=\"http://doc.qt.io/qt-5/qhash.html#qhash\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qhash.html#qhash</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1442440480, "post_id": 32618565, "comment_id": 53089338, "body": "In my function I&#39;ve replaced <code>return qHash(tag.getText());</code> with <code>return qHash(tag.getText(), 0xa3e);</code> and I obtain the same error. In documentation there&#39;s written that I can declare <code>uint qHash(const K &amp;key);</code> and I&#39;ve seen that the <code>qHash</code> for <code>QString</code> is declared as <code>uint qt_hash(const QString &amp;key) Q_DECL_NOTHROW</code> so I don&#39;t see any programming error in my code, but obviously there&#39;s one because it does not work, even if I do what you said (that I&#39;ve already done before). It seems according to <code>qhash.h</code> that I don&#39;t need to specify the seed for a QString because there&#39;s a default one."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1442509359, "post_id": 32618565, "comment_id": 53120632, "body": "@Jepessen have you declared it with a default value for the seed? You should."}, {"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1442509434, "post_id": 32618565, "comment_id": 53120680, "body": "Yes I&#39;ve declared the function with a default value"}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": true, "score": 7, "last_activity_date": 1442438123, "last_edit_date": 1442438123, "creation_date": 1442437090, "answer_id": 32618565, "question_id": 32617181, "link": "https://stackoverflow.com/questions/32617181/qset-error-with-qhash-and-custom-class/32618565#32618565", "title": "QSet: error with qHash and custom class", "body": "<p>A hash is an unary function (one argument only) and it is a function in mathematical sense (returns same value for specific argument and will return valid value for complete set of arguments).</p>\n\n<p>Hash function has one important condition which has to be always meet to be working properly: if two objects are considered as equal then hash values for this objects HAVE TO be also equal. So for example if you what case insensitive container where strings are the key, you have to provide case insensitive hash function.</p>\n\n<p>Please note that additional argument for <a href=\"http://doc.qt.io/qt-5/qhash.html#qHashx\" rel=\"noreferrer\">qHash functions you are see in documentation</a>: <code>seed</code> always has a default value! So this function can be called with single argument! This argument is just an option which gives you a chance to tweak hash function when you are building custom hash function for a complex type.</p>\n\n<p>Fix your code like this:</p>\n\n<pre><code>inline uint qHash(const WMathTest::Tag &amp;tag) {\n    return qHash(tag.getText(), 0xa03f); // arbitrary value\n}\n</code></pre>\n\n<p>or like this:</p>\n\n<pre><code>inline uint qHash(const WMathTest::Tag &amp;tag, uint seed = 0) {\n    return qHash(tag.getText(), seed^0xa03f);\n}\n</code></pre>\n\n<p>In case of more complex type hash function could look like this (example why seed can be useful):</p>\n\n<pre><code>inline uint qHash(const DoubleStringValue &amp;tag, uint seed = 0) {\n    return qHash(tag.firstText(), seed^0xa03f)^qHash(tag.secondText(), seed^0x17a317a3);\n}\n</code></pre>\n\n<p>Note that this way if there are two <code>DoubleStringValue</code> objects where <code>firstText</code> and <code>secondText</code> are flipped the hash value for both of them will be different.</p>\n\n<p>I recommend reading some documentation about how containers with hash functions work, and why they are faster than alternative solutions (for example red\u2013black tree). </p>\n"}, {"tags": [], "owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "is_accepted": false, "score": 5, "last_activity_date": 1442566385, "creation_date": 1442566385, "answer_id": 32647797, "question_id": 32617181, "link": "https://stackoverflow.com/questions/32617181/qset-error-with-qhash-and-custom-class/32647797#32647797", "title": "QSet: error with qHash and custom class", "body": "<p>I've found the solution by myself. Obviously it was my error but not related to my qHash implementation.</p>\n\n<p>I've done an error in <code>operator==</code> declaration:</p>\n\n<pre><code>bool operator==(const Tag &amp;other);\n</code></pre>\n\n<p>Declaration misses the <code>const</code> qualifier. It should be</p>\n\n<pre><code>bool operator==(const Tag &amp;other) const;\n</code></pre>\n"}], "owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5133, "favorite_count": 0, "accepted_answer_id": 32618565, "answer_count": 2, "score": 3, "last_activity_date": 1442566385, "creation_date": 1442432021, "question_id": 32617181, "link": "https://stackoverflow.com/questions/32617181/qset-error-with-qhash-and-custom-class", "title": "QSet: error with qHash and custom class", "body": "<p>I want to create a <code>QSet&lt;Tag&gt;</code> that I want to use inside my program. <code>Tag</code> is my custom class.</p>\n\n<p>When I build the code I obtain gcc errors regarding the <code>qHash</code> overloading:</p>\n\n<pre><code>Exercise.cpp.o\nIn file included from /opt/Qt/5.5/gcc_64/include/QtCore/qglobal.h:74:0,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/qchar.h:37,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/qstring.h:41,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/QString:1,\n                 from /src/wmathtest/LaTeXText.h:4,\n                 from /src/wmathtest/Exercise.h:4,\n                 from /src/wmathtest/Exercise.cpp:1:\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h: In instantiation of \u2018uint qHash(const T&amp;, uint) [with T = WMathTest::Tag; uint = unsigned int]\u2019:\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:952:32:   required from \u2018QHash&lt;Key, T&gt;::Node** QHash&lt;Key, T&gt;::findNode(const Key&amp;, uint*) const [with Key = WMathTest::Tag; T = QHashDummyValue; QHash&lt;Key, T&gt;::Node = QHashNode&lt;WMathTest::Tag, QHashDummyValue&gt;; uint = unsigned int]\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:808:36:   required from \u2018QHash&lt;Key, T&gt;::iterator QHash&lt;Key, T&gt;::insert(const Key&amp;, const T&amp;) [with Key = WMathTest::Tag; T = QHashDummyValue]\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qset.h:188:94:   required from \u2018QSet&lt;T&gt;::iterator QSet&lt;T&gt;::insert(const T&amp;) [with T = WMathTest::Tag]\u2019\n/src/wmathtest/Exercise.cpp:22:22:   required from here\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:103:5: error: no matching function for call to \u2018qHash(const WMathTest::Tag&amp;)\u2019\n     Q_DECL_NOEXCEPT_EXPR(noexcept(qHash(t)))\n     ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:103:5: note: candidates are:\nIn file included from /opt/Qt/5.5/gcc_64/include/QtCore/qset.h:37:0,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/QSet:1,\n                 from /src/wmathtest/Tag.h:5,\n                 from /src/wmathtest/Exercise.h:5,\n                 from /src/wmathtest/Exercise.cpp:1:\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:65:52: note: constexpr uint qHash(char, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(char key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:65:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018char\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:66:52: note: constexpr uint qHash(uchar, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(uchar key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:66:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018uchar {aka unsigned char}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:67:52: note: constexpr uint qHash(signed char, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(signed char key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:67:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018signed char\u2019\nIn file included from /opt/Qt/5.5/gcc_64/include/QtCore/qset.h:37:0,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/QSet:1,\n                 from /src/wmathtest/Tag.h:5,\n                 from /src/wmathtest/Exercise.h:5,\n                 from /src/wmathtest/Exercise.cpp:1:\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:68:52: note: constexpr uint qHash(ushort, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(ushort key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:68:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018ushort {aka short unsigned int}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:69:52: note: constexpr uint qHash(short int, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(short key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:69:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018short int\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:70:52: note: constexpr uint qHash(uint, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(uint key, uint seed = 0) Q_DECL_NOTHROW { return key ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:70:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018uint {aka unsigned int}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:71:52: note: constexpr uint qHash(int, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(int key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:71:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018int\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:72:52: note: constexpr uint qHash(ulong, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(ulong key, uint seed = 0) Q_DECL_NOTHROW\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:72:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018ulong {aka long unsigned int}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:78:52: note: constexpr uint qHash(long int, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(long key, uint seed = 0) Q_DECL_NOTHROW { return qHash(ulong(key), seed); }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:78:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018long int\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:79:52: note: constexpr uint qHash(quint64, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(quint64 key, uint seed = 0) Q_DECL_NOTHROW\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:79:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018quint64 {aka long long unsigned int}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:83:52: note: constexpr uint qHash(qint64, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(qint64 key, uint seed = 0) Q_DECL_NOTHROW { return qHash(quint64(key), seed); }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:83:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018qint64 {aka long long int}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:84:42: note: uint qHash(float, uint)\n Q_CORE_EXPORT Q_DECL_CONST_FUNCTION uint qHash(float key, uint seed = 0) Q_DECL_NOTHROW;\n                                          ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:84:42: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018float\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:85:42: note: uint qHash(double, uint)\n Q_CORE_EXPORT Q_DECL_CONST_FUNCTION uint qHash(double key, uint seed = 0) Q_DECL_NOTHROW;\n                                          ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:85:42: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018double\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:87:42: note: uint qHash(long double, uint)\n Q_CORE_EXPORT Q_DECL_CONST_FUNCTION uint qHash(long double key, uint seed = 0) Q_DECL_NOTHROW;\n                                          ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:87:42: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018long double\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:89:52: note: constexpr uint qHash(QChar, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(const QChar key, uint seed = 0) Q_DECL_NOTHROW { return qHash(key.unicode(), seed); }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:89:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018QChar\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:90:41: note: uint qHash(const QByteArray&amp;, uint)\n Q_CORE_EXPORT Q_DECL_PURE_FUNCTION uint qHash(const QByteArray &amp;key, uint seed = 0) Q_DECL_NOTHROW;\n                                         ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:90:41: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018const QByteArray&amp;\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:91:41: note: uint qHash(const QString&amp;, uint)\n Q_CORE_EXPORT Q_DECL_PURE_FUNCTION uint qHash(const QString &amp;key, uint seed = 0) Q_DECL_NOTHROW;\n                                         ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:91:41: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018const QString&amp;\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:92:41: note: uint qHash(const QStringRef&amp;, uint)\n Q_CORE_EXPORT Q_DECL_PURE_FUNCTION uint qHash(const QStringRef &amp;key, uint seed = 0) Q_DECL_NOTHROW;\n                                         ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:92:41: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018const QStringRef&amp;\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:93:41: note: uint qHash(const QBitArray&amp;, uint)\n Q_CORE_EXPORT Q_DECL_PURE_FUNCTION uint qHash(const QBitArray &amp;key, uint seed = 0) Q_DECL_NOTHROW;\n                                         ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:93:41: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018const QBitArray&amp;\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:94:41: note: uint qHash(QLatin1String, uint)\n Q_CORE_EXPORT Q_DECL_PURE_FUNCTION uint qHash(QLatin1String key, uint seed = 0) Q_DECL_NOTHROW;\n                                         ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:94:41: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018QLatin1String\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:98:32: note: template&lt;class T&gt; uint qHash(const T*, uint)\n template &lt;class T&gt; inline uint qHash(const T *key, uint seed = 0) Q_DECL_NOTHROW\n                                ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:98:32: note:   template argument deduction/substitution failed:\nIn file included from /opt/Qt/5.5/gcc_64/include/QtCore/qglobal.h:74:0,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/qchar.h:37,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/qstring.h:41,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/QString:1,\n                 from /src/wmathtest/LaTeXText.h:4,\n                 from /src/wmathtest/Exercise.h:4,\n                 from /src/wmathtest/Exercise.cpp:1:\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:103:5: note:   mismatched types \u2018const T*\u2019 and \u2018WMathTest::Tag\u2019\n     Q_DECL_NOEXCEPT_EXPR(noexcept(qHash(t)))\n     ^\nsrc/wmathtest/CMakeFiles/wmathtest.dir/build.make:146: recipe for target 'src/wmathtest/CMakeFiles/wmathtest.dir/Exercise.cpp.o' failed\nmake[2]: *** [src/wmathtest/CMakeFiles/wmathtest.dir/Exercise.cpp.o] Error 1\nCMakeFiles/Makefile2:160: recipe for target 'src/wmathtest/CMakeFiles/wmathtest.dir/all' failed\nmake[1]: *** [src/wmathtest/CMakeFiles/wmathtest.dir/all] Error 2\nMakefile:76: recipe for target 'all' failed\n    Exercise.cpp.o\nIn file included from /opt/Qt/5.5/gcc_64/include/QtCore/qglobal.h:74:0,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/qchar.h:37,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/qstring.h:41,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/QString:1,\n                 from /wmathtest/LaTeXText.h:4,\n                 from /src/wmathtest/Exercise.h:4,\n                 from /wmathtest/Exercise.cpp:1:\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h: In instantiation of \u2018uint qHash(const T&amp;, uint) [with T = WMathTest::Tag; uint = unsigned int]\u2019:\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:952:32:   required from \u2018QHash&lt;Key, T&gt;::Node** QHash&lt;Key, T&gt;::findNode(const Key&amp;, uint*) const [with Key = WMathTest::Tag; T = QHashDummyValue; QHash&lt;Key, T&gt;::Node = QHashNode&lt;WMathTest::Tag, QHashDummyValue&gt;; uint = unsigned int]\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:808:36:   required from \u2018QHash&lt;Key, T&gt;::iterator QHash&lt;Key, T&gt;::insert(const Key&amp;, const T&amp;) [with Key = WMathTest::Tag; T = QHashDummyValue]\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qset.h:188:94:   required from \u2018QSet&lt;T&gt;::iterator QSet&lt;T&gt;::insert(const T&amp;) [with T = WMathTest::Tag]\u2019\n/wmathtest/Exercise.cpp:22:22:   required from here\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:103:5: error: no matching function for call to \u2018qHash(const WMathTest::Tag&amp;)\u2019\n     Q_DECL_NOEXCEPT_EXPR(noexcept(qHash(t)))\n     ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:103:5: note: candidates are:\nIn file included from /opt/Qt/5.5/gcc_64/include/QtCore/qset.h:37:0,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/QSet:1,\n                 from /wmathtest/Tag.h:5,\n                 from /wmathtest/Exercise.h:5,\n                 from /wmathtest/Exercise.cpp:1:\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:65:52: note: constexpr uint qHash(char, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(char key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:65:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018char\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:66:52: note: constexpr uint qHash(uchar, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(uchar key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:66:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018uchar {aka unsigned char}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:67:52: note: constexpr uint qHash(signed char, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(signed char key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:67:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018signed char\u2019\nIn file included from /opt/Qt/5.5/gcc_64/include/QtCore/qset.h:37:0,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/QSet:1,\n                 from /home/daniele/projects/wmathtestgenerator/src/wmathtest/Tag.h:5,\n                 from /Exercise.h:5,\n                 from /wmathtest/Exercise.cpp:1:\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:68:52: note: constexpr uint qHash(ushort, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(ushort key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:68:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018ushort {aka short unsigned int}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:69:52: note: constexpr uint qHash(short int, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(short key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:69:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018short int\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:70:52: note: constexpr uint qHash(uint, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(uint key, uint seed = 0) Q_DECL_NOTHROW { return key ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:70:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018uint {aka unsigned int}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:71:52: note: constexpr uint qHash(int, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(int key, uint seed = 0) Q_DECL_NOTHROW { return uint(key) ^ seed; }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:71:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018int\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:72:52: note: constexpr uint qHash(ulong, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(ulong key, uint seed = 0) Q_DECL_NOTHROW\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:72:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018ulong {aka long unsigned int}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:78:52: note: constexpr uint qHash(long int, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(long key, uint seed = 0) Q_DECL_NOTHROW { return qHash(ulong(key), seed); }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:78:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018long int\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:79:52: note: constexpr uint qHash(quint64, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(quint64 key, uint seed = 0) Q_DECL_NOTHROW\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:79:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018quint64 {aka long long unsigned int}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:83:52: note: constexpr uint qHash(qint64, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(qint64 key, uint seed = 0) Q_DECL_NOTHROW { return qHash(quint64(key), seed); }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:83:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018qint64 {aka long long int}\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:84:42: note: uint qHash(float, uint)\n Q_CORE_EXPORT Q_DECL_CONST_FUNCTION uint qHash(float key, uint seed = 0) Q_DECL_NOTHROW;\n                                          ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:84:42: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018float\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:85:42: note: uint qHash(double, uint)\n Q_CORE_EXPORT Q_DECL_CONST_FUNCTION uint qHash(double key, uint seed = 0) Q_DECL_NOTHROW;\n                                          ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:85:42: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018double\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:87:42: note: uint qHash(long double, uint)\n Q_CORE_EXPORT Q_DECL_CONST_FUNCTION uint qHash(long double key, uint seed = 0) Q_DECL_NOTHROW;\n                                          ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:87:42: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018long double\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:89:52: note: constexpr uint qHash(QChar, uint)\n Q_DECL_CONST_FUNCTION Q_DECL_CONSTEXPR inline uint qHash(const QChar key, uint seed = 0) Q_DECL_NOTHROW { return qHash(key.unicode(), seed); }\n                                                    ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:89:52: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018QChar\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:90:41: note: uint qHash(const QByteArray&amp;, uint)\n Q_CORE_EXPORT Q_DECL_PURE_FUNCTION uint qHash(const QByteArray &amp;key, uint seed = 0) Q_DECL_NOTHROW;\n                                         ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:90:41: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018const QByteArray&amp;\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:91:41: note: uint qHash(const QString&amp;, uint)\n Q_CORE_EXPORT Q_DECL_PURE_FUNCTION uint qHash(const QString &amp;key, uint seed = 0) Q_DECL_NOTHROW;\n                                         ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:91:41: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018const QString&amp;\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:92:41: note: uint qHash(const QStringRef&amp;, uint)\n Q_CORE_EXPORT Q_DECL_PURE_FUNCTION uint qHash(const QStringRef &amp;key, uint seed = 0) Q_DECL_NOTHROW;\n                                         ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:92:41: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018const QStringRef&amp;\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:93:41: note: uint qHash(const QBitArray&amp;, uint)\n Q_CORE_EXPORT Q_DECL_PURE_FUNCTION uint qHash(const QBitArray &amp;key, uint seed = 0) Q_DECL_NOTHROW;\n                                         ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:93:41: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018const QBitArray&amp;\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:94:41: note: uint qHash(QLatin1String, uint)\n Q_CORE_EXPORT Q_DECL_PURE_FUNCTION uint qHash(QLatin1String key, uint seed = 0) Q_DECL_NOTHROW;\n                                         ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:94:41: note:   no known conversion for argument 1 from \u2018const WMathTest::Tag\u2019 to \u2018QLatin1String\u2019\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:98:32: note: template&lt;class T&gt; uint qHash(const T*, uint)\n template &lt;class T&gt; inline uint qHash(const T *key, uint seed = 0) Q_DECL_NOTHROW\n                                ^\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:98:32: note:   template argument deduction/substitution failed:\nIn file included from /opt/Qt/5.5/gcc_64/include/QtCore/qglobal.h:74:0,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/qchar.h:37,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/qstring.h:41,\n                 from /opt/Qt/5.5/gcc_64/include/QtCore/QString:1,\n                 from /home/daniele/projects/wmathtestgenerator/src/wmathtest/LaTeXText.h:4,\n                 from /home/daniele/projects/wmathtestgenerator/src/wmathtest/Exercise.h:4,\n                 from /thtest/Exercise.cpp:1:\n/opt/Qt/5.5/gcc_64/include/QtCore/qhash.h:103:5: note:   mismatched types \u2018const T*\u2019 and \u2018WMathTest::Tag\u2019\n     Q_DECL_NOEXCEPT_EXPR(noexcept(qHash(t)))\n     ^\nsrc/wmathtest/CMakeFiles/wmathtest.dir/build.make:146: recipe for target 'src/wmathtest/CMakeFiles/wmathtest.dir/Exercise.cpp.o' failed\nmake[2]: *** [src/wmathtest/CMakeFiles/wmathtest.dir/Exercise.cpp.o] Error 1\nCMakeFiles/Makefile2:160: recipe for target 'src/wmathtest/CMakeFiles/wmathtest.dir/all' failed\nmake[1]: *** [src/wmathtest/CMakeFiles/wmathtest.dir/all] Error 2\nMakefile:76: recipe for target 'all' failed\n</code></pre>\n\n<p>I've created the class, the <code>operator==</code> and the <code>qHash</code> for the class. Then I've created a <code>typedef</code> for the class but this does not work.</p>\n\n<p>What I'm doing wrong?</p>\n\n<p>Tag.h</p>\n\n<pre><code>#ifndef WMATHTEST_TAG_H_\n#define WMATHTEST_TAG_H_\n\n#include &lt;QString&gt;\n#include &lt;QSet&gt;\n\nnamespace WMathTest {\n\nclass Tag {\n\npublic:\n\n    Tag() = default;\n    Tag(const QString &amp;text);\n    Tag(const Tag &amp;tag) = default;\n    virtual ~Tag() = default;\n    void setText(const QString &amp;text);\n    const QString&amp; getText() const;\n    bool operator==(const Tag &amp;other);\n\nprivate:\n\nQString m_text;\n};\n\n} // namespace WMathTest\n\n\ninline uint qHash(const WMathTest::Tag &amp;tag, uint seed) {\n    return qHash(tag.getText(), seed);\n}\n\ntypedef QSet&lt;WMathTest::Tag&gt; TagList;\n\n#endif // !WMATHTEST_TAG_H_\n</code></pre>\n\n<p>Tag.cpp</p>\n\n<pre><code>#include \"wmathtest/Tag.h\"\n\nnamespace WMathTest {\n\n///////////////////////////////////////////////////////////////////////////////\n// PUBLIC SECTION                                                            //\n///////////////////////////////////////////////////////////////////////////////\n\nTag::Tag(const QString &amp;text) :\n    m_text(text) {\n\n}\n\nvoid Tag::setText(const QString &amp;text) {\n    m_text = text;\n}\n\nconst QString&amp; Tag::getText() const {\n    return m_text;\n}\n\nbool Tag::operator==(const Tag &amp;other) {\n    return m_text == other.m_text;\n}\n\n} // namespace WMathTest\n</code></pre>\n\n<p>Exercise.h</p>\n\n<pre><code>#ifndef WMATHTEST_EXERCISE_H_\n#define WMATHTEST_EXERCISE_H_\n\n#include \"wmathtest/LaTeXText.h\"\n#include \"wmathtest/Tag.h\"\n#include &lt;QString&gt;\n\nnamespace WMathTest {\n\nclass Exercise {\n\npublic:\n\n    Exercise() = default;\n    virtual ~Exercise() = default;\n    void setID(const QString &amp;id);\n    void setProblem(const LaTeXText &amp;problem);\n    void setSolution(const LaTeXText &amp;solution);\n    void addArgumentTag(const Tag &amp;tag);\n    void addArgumentTag(const QString &amp;tag);\n    QString getID() const;\n    LaTeXText getProblem() const;\n    LaTeXText getSolution() const;\n    const TagList&amp; getArgumentTagList() const;\n\nprivate:\n\n    QString m_id;\n    LaTeXText m_problem;\n    LaTeXText m_solution;\n    TagList m_tagList;\n};\n\n} // namespace WMathTest\n\n#endif // !WMATHTEST_EXERCISE_H_\n</code></pre>\n\n<p>Exercise.cpp</p>\n\n<pre><code>#include \"wmathtest/Exercise.h\"\n\nnamespace WMathTest {\n\n///////////////////////////////////////////////////////////////////////////////\n// PUBLIC SECTION                                                            //\n///////////////////////////////////////////////////////////////////////////////\n\nvoid Exercise::setID(const QString &amp;id) {\n    m_id = id;\n}\n\nvoid Exercise::setProblem(const LaTeXText &amp;problem) {\n    m_problem = problem;\n}\n\nvoid Exercise::setSolution(const LaTeXText &amp;solution) {\n    m_solution = solution;\n}\n\nvoid Exercise::addArgumentTag(const Tag &amp;tag) {\n    m_tagList.insert(tag);\n}\n\nvoid Exercise::addArgumentTag(const QString &amp;tag) {\n    m_tagList.insert(Tag(tag));\n}\n\nQString Exercise::getID() const {\n    return m_id;\n}\n\nLaTeXText Exercise::getProblem() const {\n    return m_problem;\n}\n\nLaTeXText Exercise::getSolution() const {\n    return m_solution;\n}\n\nconst TagList&amp; Exercise::getArgumentTagList() const {\n    return m_tagList;\n}\n\n} // namespace WMathTest\n</code></pre>\n"}, {"tags": ["c++", "opencv", "pca"], "answers": [{"tags": [], "owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "is_accepted": true, "score": 2, "last_activity_date": 1442439692, "last_edit_date": 1592644375, "creation_date": 1442439692, "answer_id": 32619233, "question_id": 32617150, "link": "https://stackoverflow.com/questions/32617150/does-cvpca-opencv-calculate-covariance-matrix-of-data-itself-or-we-should-p/32619233#32619233", "title": "Does cv::PCA (openCV) calculate covariance matrix of data itself? or we should pass covarince matrix to it?", "body": "<p><code>cv::PCA</code> does compute the covariance matrix itself.</p>\n<p>See the <a href=\"http://docs.opencv.org/master/d3/d8d/classcv_1_1PCA.html#a50ad1a87273a258055a331d5a4c63ce4\" rel=\"nofollow noreferrer\">doc</a>:</p>\n<p>For the default constructor:</p>\n<blockquote>\n<p>The default constructor initializes an empty PCA structure. The other constructors initialize the structure and call PCA::operator()().</p>\n</blockquote>\n<p>But in your linked code example, they use the other constructor.\nFor the <code>operator()</code>:</p>\n<blockquote>\n<p>performs PCA</p>\n<p>The operator performs PCA of the supplied dataset. It is safe to reuse the same PCA structure for multiple datasets. That is, if the structure has been previously used with another dataset, the existing internal data is reclaimed and the new eigenvalues, eigenvectors , and mean are allocated and computed.</p>\n<p>The computed eigenvalues are sorted from the largest to the smallest and the corresponding eigenvectors are stored as eigenvectors rows.</p>\n</blockquote>\n"}], "owner": {"reputation": 33, "user_id": 5330594, "user_type": "registered", "profile_image": "https://graph.facebook.com/872354542832810/picture?type=large", "display_name": "Ali Ghazi", "link": "https://stackoverflow.com/users/5330594/ali-ghazi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 32619233, "answer_count": 1, "score": 1, "last_activity_date": 1449717981, "creation_date": 1442431929, "last_edit_date": 1449717981, "question_id": 32617150, "link": "https://stackoverflow.com/questions/32617150/does-cvpca-opencv-calculate-covariance-matrix-of-data-itself-or-we-should-p", "title": "Does cv::PCA (openCV) calculate covariance matrix of data itself? or we should pass covarince matrix to it?", "body": "<p>I trying to make face recognition using principal component analysis(PCA) combine with support vector machine(SVM). but I'm confused of cv::pca! according to <a href=\"http://docs.opencv.org/master/d1/dee/tutorial_introduction_to_pca.html#gsc.tab=0\" rel=\"nofollow\">this doc</a> for calculating eigenvectors and eigenvalues we should first calculate covariance matrix of data, then calculate eigenvectors and eigenvalues from covarince matrix. in it's sample codes it does not calculate covariance matrix it just pass data to constructor. so does cv::pca calculate covarience matrix itself? or we should calculate it and pass it to cv::pca constroctor?\nfrom dimension of eigenvectors and eigenvalues I guess it does not calculate them. am I right?</p>\n"}, {"tags": ["c++", "file", "winapi", "directory"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1442432598, "post_id": 32617095, "comment_id": 53085326, "body": "Perhaps try a case-independent comparison."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1442436844, "post_id": 32617095, "comment_id": 53087609, "body": "If nothing else you&#39;ll always skip the last item in a folder because of where you&#39;re comparing against the search string."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1442443064, "post_id": 32617095, "comment_id": 53090204, "body": "NTFS is case-insensitive (and case-preserving). Replace <code>tmp.substr(found + 1) == inputSearch</code> with <code>lstrcmpiW( tmp.substr(found + 1).c_str(), inputSearch.c_str() ) == 0</code>, and fix the bug noted by Jonathan Potter."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1442448295, "post_id": 32617095, "comment_id": 53091550, "body": "Note that <code>file.cFileName</code> doesn&#39;t include directory. It can be, for example, &quot;yay.docx&quot;. You can just check <code>if(lstrcmpiW(file.cFileName, inputSearch.c_str())==0)</code> then print out your <code>tmp</code> variable which is the full path of the file."}], "owner": {"reputation": 187, "user_id": 4687571, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d691a9a74d0fd209a45f18893f310b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jaromando", "link": "https://stackoverflow.com/users/4687571/jaromando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442432429, "creation_date": 1442431775, "last_edit_date": 1442432429, "question_id": 32617095, "link": "https://stackoverflow.com/questions/32617095/drive-search-does-not-locate-docx-and-txt-files", "title": "Drive Search does not locate .docx and .txt files", "body": "<pre><code>void findFile(const std::wstring &amp;directory, wstring inputSearch)\n{ // , char *currDrives){ //function for algorithm to search your computer to find what you want to load\n\n    //wcout &lt;&lt; directory &lt;&lt; endl;\n\n    //cout &lt;&lt; \"In\" &lt;&lt; endl;\n\nwstring search = inputSearch;\n\nstd::wstring tmp = directory + L\"\\\\*\";\n\nsize_t found;\n\nWIN32_FIND_DATAW file;\nHANDLE search_handle = FindFirstFileW(tmp.c_str(), &amp;file);\nif (search_handle != INVALID_HANDLE_VALUE)\n{\n    std::vector&lt;std::wstring&gt; directories;\n\n    do\n    {\n        found = tmp.find_last_of(L\"/\\\\\");\n\n        if (tmp.substr(found + 1) == inputSearch) {\n\n            cout &lt;&lt; \"Found File\" &lt;&lt; endl;\n            continueSearching = false;\n            foundFilePath = tmp;\n\n        }\n\n        if (file.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY)\n        {\n            if ((!lstrcmpW(file.cFileName, L\".\")) || (!lstrcmpW(file.cFileName, L\"..\"))) {\n                continue;\n            }\n\n        }\n\n        tmp = directory + L\"\\\\\" + std::wstring(file.cFileName);\n        bruteForceComp++;\n        //std::wcout &lt;&lt; tmp &lt;&lt; std::endl;\n\n        if (file.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY)\n\n            directories.push_back(tmp);\n\n    } while (FindNextFileW(search_handle, &amp;file) &amp;&amp; continueSearching == true);\n\n    FindClose(search_handle);\n\n    for (std::vector&lt;std::wstring&gt;::iterator iter = directories.begin(), end = directories.end(); iter != end; ++iter) {\n\n        findFile(*iter, inputSearch);\n\n    }\n}\n\n}\n</code></pre>\n\n<p>We have this function that searches all sub-directories within a certain drive. We compare this to a search term that is inputted by the user. (The drive and the search term are the two parameters passed into the function) We locate .exe files fine and a bunch of other files, but when we try to locate a .docx or .txt file they do not appear. Any help with finding why would be appreciated. We're somewhat stumped.</p>\n\n<p>Thanks!</p>\n\n<p>foundFilePath is a static wstring by the way. It is where we store the matching path to the search term. Search term is inputted as word.exe or yay.docx also. </p>\n"}, {"tags": ["c++", "class", "variables"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1442430899, "post_id": 32616794, "comment_id": 53084425, "body": "All those Initialisations shown are nonsensical, unless you use <code>const</code> expressions."}], "answers": [{"tags": [], "owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "is_accepted": true, "score": 1, "last_activity_date": 1442431934, "last_edit_date": 1442431934, "creation_date": 1442431087, "answer_id": 32616909, "question_id": 32616794, "link": "https://stackoverflow.com/questions/32616794/c-updating-changing-variables-from-different-class-variables/32616909#32616909", "title": "C++ updating/changing variables from different class/variables", "body": "<p>If you add 55 to exp, only exp will be changed. </p>\n\n<p>You can write getters and setters and declare the member variables private:</p>\n\n<p>Player.h</p>\n\n<pre><code>#pragma once\nclass Player\n{\npublic:\n    Player();\n\n    void Init();\n\n    void addExp(const int additionalExp);\n    int getExp();\n\n    //... TODO add similar get/set methods for the other members...\n\nprivate:\n    int exp = 5;\n    int level = (exp / 5);\n    int attack = (10 + (level * 2));\n    int defense = (10 + (level * 2));\n    int speed = (10 + (level * 2));\n};\n</code></pre>\n\n<p>and add the method definitions:</p>\n\n<pre><code>#include \"Player.h\"\n\nPlayer::Player() {\n\n}\n\nvoid Player::Init() {\n    int exp = 5;\n    int level = (exp / 5);\n    int attack = (10 + (level * 2));\n    int defense = (10 + (level * 2));\n    int speed = (10 + (level * 2));\n}\n\nvoid Player::addExp(const int additionalExp) {\n    if ( additionalExp &lt; 0 ) return; // think about error handling or use \n                                     // unsigned for exp \n    exp += additionalExp;\n    level = exp / 50; // or something else, as you like. \n}\n\nint Player::getExp(){ return exp; }\n\n// ... TODO add definitions for the other get/set methods...\n</code></pre>\n\n<p>And use the <code>addExp()</code> method in your main.cpp. </p>\n\n<p>One benefit of having the member variables private is that you get more control in how they get manipulated. E.g. if you add <code>exp</code>, you can set <code>level</code> accordingly simultaneously. </p>\n"}], "owner": {"reputation": 21, "user_id": 5340202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76610408e0432c58108881dae081ced6?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/5340202/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 32616909, "answer_count": 1, "score": 0, "last_activity_date": 1442431934, "creation_date": 1442430591, "last_edit_date": 1442431633, "question_id": 32616794, "link": "https://stackoverflow.com/questions/32616794/c-updating-changing-variables-from-different-class-variables", "title": "C++ updating/changing variables from different class/variables", "body": "<p>I'm a noobie at C++ and I was making a game for practice on Visual Studios and I just couldn't figure out how to update stats when exp was added. I tried changing the player level by adding exp but when I add 55 exp the player remained at level 1 still.</p>\n\n<p>Main:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;windows.h&gt;\n    #include \"Game.h\"\n\nusing namespace std;\n\nvoid FalseLoad();\n\nint main() {\n    //Cool load intro\n    FalseLoad();\n    cout &lt;&lt; \"\\n \\n\";\n\n    Game::Game();\n\n    system(\"PAUSE\");\n\n    return 0;\n}\n\nvoid FalseLoad() {\n    int i = 0;\n    int start;\n\n    cout &lt;&lt; \"***Freelancer*** \\n \\n\";\n\n    system(\"PAUSE\");\n\n    while (i &lt;= 100){\n        cout &lt;&lt; \"Loading game... \" &lt;&lt; i &lt;&lt; \"% \\n\";\n        i++;\n        Sleep(110 - i);\n        if (i == 100) {\n                start = 0;\n        }\n    }\n}\n</code></pre>\n\n<p>Game.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Game.h\"\n\nusing namespace std;\n\nGame::Game() {\n    Player Player;\n\n    Player.Init();\n\n    cout &lt;&lt; Player.exp &lt;&lt; \" \" &lt;&lt; Player.level;\n    Player.exp += 55;\n    cout &lt;&lt; \" \" &lt;&lt; Player.exp &lt;&lt; \" \" &lt;&lt; Player.level &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>Game.h:</p>\n\n<pre><code>#pragma once\n#include \"Player.h\"\n\nclass Game {\npublic:\n    Game();\n};\n</code></pre>\n\n<p>Player.cpp:</p>\n\n<pre><code>#include \"Player.h\"\n\nPlayer::Player() {\n\n}\n\nvoid Player::Init() {\n    int exp = 5;\n    int level = (exp / 5);\n    int attack = (10 + (level * 2));\n    int defense = (10 + (level * 2));\n    int speed = (10 + (level * 2));\n}\n</code></pre>\n\n<p>Player.h:</p>\n\n<pre><code>#pragma once\nclass Player\n{\npublic:\n    Player();\n\n    void Init();\n\n    int exp = 5;\n    int level = (exp / 5);\n    int attack = (10 + (level * 2));\n    int defense = (10 + (level * 2));\n    int speed = (10 + (level * 2));\n\n};\n</code></pre>\n"}, {"tags": ["c++", "class", "pointers", "stl", "set"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1442430535, "post_id": 32616730, "comment_id": 53084202, "body": "<code>set</code> needs <code>&lt;</code> (by default), not <code>==</code>."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 3, "creation_date": 1442430574, "post_id": 32616730, "comment_id": 53084225, "body": "<code>set</code> compares its elements. If its elements are pointers, it thus compares the pointers, not the pointed objects."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1442430972, "post_id": 32616730, "comment_id": 53084461, "body": "You might have pointers to two equivalant <code>State</code> objects, but you don&#39;t have two <i>indentical</i> pointers."}], "answers": [{"comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1442430983, "post_id": 32616849, "comment_id": 53084467, "body": "This is correct but fails to explain the cause of the current problem."}, {"owner": {"reputation": 117, "user_id": 3935107, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b80a3aaf1df2acae05babbfcf7c5d4ff?s=128&d=identicon&r=PG&f=1", "display_name": "Roshan Krishnan", "link": "https://stackoverflow.com/users/3935107/roshan-krishnan"}, "edited": false, "score": 0, "creation_date": 1442432308, "post_id": 32616849, "comment_id": 53085158, "body": "This worked, thank you. I assume std::set is ordered and therefore uses &lt; for comparisons rather than ==?"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1442430971, "last_edit_date": 1442430971, "creation_date": 1442430825, "answer_id": 32616849, "question_id": 32616730, "link": "https://stackoverflow.com/questions/32616730/c-searching-a-stdset-of-pointers-to-class/32616849#32616849", "title": "C++: Searching a std::set of pointers to class", "body": "<p><code>std::set</code> requires strict ordering:</p>\n\n<pre><code>bool operator&lt;(const State &amp;lhs, const State &amp;rhs){\n    return std::tie(lhs.a, lhs.b) &lt; std::tie(rhs.a, rhs.b);\n}\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>int main() {\n    State s(5, 6);\n    State z(5, 6);\n    Node n(&amp;s);\n    std::set&lt;State&gt; states;\n    states.insert(s);\n    std::cout &lt;&lt; states.count(z);\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 3935107, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b80a3aaf1df2acae05babbfcf7c5d4ff?s=128&d=identicon&r=PG&f=1", "display_name": "Roshan Krishnan", "link": "https://stackoverflow.com/users/3935107/roshan-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 32616849, "answer_count": 1, "score": 0, "last_activity_date": 1442430971, "creation_date": 1442430408, "question_id": 32616730, "link": "https://stackoverflow.com/questions/32616730/c-searching-a-stdset-of-pointers-to-class", "title": "C++: Searching a std::set of pointers to class", "body": "<p>I asked a rather poorly formulated (and duly poorly received, whoops) question similar to this yesterday that I've had time to think about and better explain (and I also made some progress in attempting to figure out the issue), so here goes:</p>\n\n<p>I have a class <code>State</code> and a class <code>Node</code>. <code>Node</code> contains a pointer to a <code>State</code> as a member:</p>\n\n<pre><code>class State{\npublic:\n    int a;\n    int b;\n    State(int a1, int b1){\n        a = a1;\n        b = b1;\n    }\n};\n\nclass Node{\npublic:\n    State *s;\n    Node(State *s1){\n        s = s1;\n    }\n    Node(){\n        s = NULL;\n    }\n};\n\nint main() {\n    State *s = new State(5, 6);\n    State *z = new State(5, 6);\n    Node *n = new Node(s);\n    set&lt;State*&gt; states;\n    states.insert(s);\n    cout&lt;&lt;states.count(z);\n    return 0;\n}\n</code></pre>\n\n<p>You can see in <code>main</code> that I'm creating two identical pointers to <code>State</code>, inserting one into the set, and then using <code>state::count</code> (returns 1 for found, 0 for not found) to look for a <code>State</code> identical to <code>z</code> in <code>states</code>. This should return 1, but it returns 0. I thought at first this was because I needed to overload the comparator between <code>States</code>, but even after writing this function:</p>\n\n<pre><code>bool operator==(const State &amp;s1, const State &amp;s2){\n    if(s1.a == s2.a &amp;&amp; s1.b == s2.b)\n        return true;\n    else\n        return false;\n}\n</code></pre>\n\n<p>I'm returning 0. My next idea was because this was a set of pointers to <code>State</code> rather than the actual objects, and because of that my == overload was being bypassed. So I tried this:</p>\n\n<pre><code>int main() {\n    State *s = new State(5, 6);\n    State *z = new State(5, 6);\n    Node *n = new Node(s);\n    set&lt;State&gt; states;\n    states.insert(*s);\n    cout&lt;&lt;states.count(*z);\n    return 0;\n}\n</code></pre>\n\n<p>There's a running example of this here: <a href=\"http://ideone.com/iYQyBK\" rel=\"nofollow\">http://ideone.com/iYQyBK</a></p>\n\n<p>My idea was to have a set of <code>State</code> rather than pointers to <code>State</code> and then dereference the pointers to pass in, but unfortunately this new code gives me all sorts of ugly compilation errors which are very obscure and seem to have something to do with a failure during comparison, but I can't really tell what they mean. What's my best move here to get <code>set::count</code> to work properly (or to find some other way to check if a <code>State</code> is in my <code>set</code>)?</p>\n"}, {"tags": ["c++", "memory", "memory-management", "posix"], "comments": [{"owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "edited": false, "score": 0, "creation_date": 1442430624, "post_id": 32616715, "comment_id": 53084255, "body": "Do you allocate all the memory at once at the beginning? If yes: Is this necessary? If not: Did you try ringbuffers?"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1442430824, "post_id": 32616715, "comment_id": 53084376, "body": "yeah, a circular buffer is what you seem to need."}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "reply_to_user": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "edited": false, "score": 0, "creation_date": 1442431002, "post_id": 32616715, "comment_id": 53084476, "body": "@Gombat: I should have put this detail in the OP, but an earlier step in my processing chain requires that the entire buffer be in memory (as a contiguous block, as it gets passed to a C API) at once. Otherwise yes, a circular buffer would definitely be the right choice. The algorithm I refer to in the question is the conclusion to a pipeline of multiple processing steps; once it&#39;s done, I no longer need the data."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1442431640, "post_id": 32616715, "comment_id": 53084806, "body": "@JasonR You should edit this info into the question, it&#39;s important."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1442435295, "post_id": 32616715, "comment_id": 53086827, "body": "@JasonR: Can you be a bit more specific about what you are actually trying to achieve? How long does the whole calculation take, and is the system generally running low on memory, or are you just looking to &quot;reduce the number that shows up when you run <code>top</code>&quot;? [Yes, I realize I have already written an answer!]"}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1442437512, "post_id": 32616715, "comment_id": 53087946, "body": "@MatsPetersson: The entire calculation typically takes tens of seconds to single-digit minutes. I&#39;m not looking for huge performance increases, only trying to be a good citizen to others on the system. The target hardware platform typically has a very large amount of RAM available with swap disabled (not by my choice). This is more of a curiosity than an attempt to try to optimize my application in any way; I just wasn&#39;t aware if what I&#39;m proposing was even possible."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1442437841, "post_id": 32616715, "comment_id": 53088113, "body": "@JasonR: In that case, I have a feeling the gain with be minimal and &quot;not worht all the effort&quot;, which is my original answer. But I wanted to make sure that I wasn&#39;t missing something. There will be additional overhead, and if you have 25 billion items to calculate, even a single clock-cycle extra in each loop will add a few seconds to the execution time..."}], "answers": [{"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 5, "last_activity_date": 1442434700, "last_edit_date": 1442434700, "creation_date": 1442431955, "answer_id": 32617161, "question_id": 32616715, "link": "https://stackoverflow.com/questions/32616715/is-it-possible-to-partially-free-dynamically-allocated-memory-on-a-posix-system/32617161#32617161", "title": "Is it possible to partially free dynamically-allocated memory on a POSIX system?", "body": "<p>If your entire buffer has to be in memory at once, then you probably will not gain much from freeing it partially later. </p>\n\n<p>The main point on this post is basically to NOT tell you to do what you want to do, because the OS will not unnecessarily keep your application's memory in RAM if it's not actually needed. This is the difference between \"resident memory usage\" and \"virtual memory usage\". \"Resident\" is what is currently used and in RAM, \"virtual\" is the total memory usage of your application. And as long as your swap partition is large enough, \"virtual\" memory is pretty much a non-issue. [I'm assuming here that your system will not run out of virtual memory space, which is true in a 64-bit application, as long as you are not using hundreds of terabytes of virtual space!]</p>\n\n<p>If you still want to do that, and want to have some reasonable portability, I would suggest building a \"wrapper\" that behaves kind of like <code>std::vector</code> and allocates lumps of some megabytes (or perhaps a couple of gigabytes) of memory at a time, and then something like:</p>\n\n<pre><code> for (size_t i = 0; i &lt; buf.size(); ++i) {\n    do_algorithm(buf[i]);\n    buf.done(i);\n }\n</code></pre>\n\n<p>The <code>done</code> method will simply check if the value if <code>i</code> is (one element) past the end of the current buffer, and free it. [This should inline nicely, and produce very little overhead on the average loop - assuming elements are actually used in linear order, of course].</p>\n\n<p>I'd be very surprised if this gains you anything, unless <code>do_algorithm(buf[i])</code> takes quite some time (certainly many seconds, probably many minutes or even hours). And of course, it's only going to help if you actually have something else useful to do with that memory. And even then, the OS will reclaim memory that isn't actively used by swapping it out to disk, if the system is short of memory.</p>\n\n<p>In other words, if you allocate 100GB, fill it, leave it sitting without touching, it will eventually ALL be on the hard-disk rather than in RAM.</p>\n\n<p>Further, it is not at all unusual that the heap in the application retains freed memory, and that the OS does not get the memory back until the application exits - and certainly, if only parts of a larger allocation is freed, the runtime will not release it until the whole block has been freed. So, as stated at the beginning, I'm not sure how much this will actually help your application.</p>\n\n<p>As with everything regarding \"tuning\" and \"performance improvements\", you need to measure and compare a benchmark, and see how much it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 0, "creation_date": 1442434143, "post_id": 32617381, "comment_id": 53086191, "body": "There is no need for <code>MAP_FIXED</code> here, since you can create entire region using single <code>mmap()</code> call and then subsequently <code>unmap()</code> parts of it. <code>MAP_FIXED</code> is specified in POSIX, but there is no portable way to determine proper address for it. So <code>MAP_FIXED</code> adds portability issues and doesn&#39;t solve existing issues (you still need unportable anonymous mappings)."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 0, "creation_date": 1442434352, "post_id": 32617381, "comment_id": 53086310, "body": "@g-v Yes, I think I&#39;ve addressed that in the \u201cIf you allocate the entire memory upfront, \u2026\u201d part."}, {"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 0, "creation_date": 1442499539, "post_id": 32617381, "comment_id": 53114212, "body": "Yeah, I see. Just clarification related to portability."}], "tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": false, "score": 2, "last_activity_date": 1442433274, "last_edit_date": 1442433274, "creation_date": 1442432754, "answer_id": 32617381, "question_id": 32616715, "link": "https://stackoverflow.com/questions/32616715/is-it-possible-to-partially-free-dynamically-allocated-memory-on-a-posix-system/32617381#32617381", "title": "Is it possible to partially free dynamically-allocated memory on a POSIX system?", "body": "<p>If you can do without the convenience of <code>std::vector</code> (which won't give you much in this case anyway because you'll never want to copy / <code>return</code> / move that beast anyway), you can do your own memory handling.  Ask the operating system for entire pages of memory (via <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow\"><code>mmap</code></a>) and return them as appropriate (using <code>munmap</code>).  You can tell <code>mmap</code> via its fist argument and the optional <code>MAP_FIXED</code> flag to map the page at a particular address (which you must ensure to be not otherwise occupied, of course) so you can build up an area of contiguous memory.  If you allocate the entire memory upfront, then this is not an issue and you can do it with a single <code>mmap</code> and let the operating system choose a convenient place to map it.  In the end, this is what <code>malloc</code> does internally.  For platforms that don't have <code>sys/mman.h</code>, it's not difficult to fall back to using <code>malloc</code> if you can live with the fact that on those platforms, you won't return memory early.</p>\n\n<p>I'm suspecting that if your allocation sizes are always multiples of the page size, <code>realloc</code> will be smart enough not to copy any data. You'd have to try this out and see if it works (or consult your <code>malloc</code>'s documentation) on your particular target platform, though.</p>\n"}, {"tags": [], "owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "is_accepted": true, "score": 4, "last_activity_date": 1447413912, "last_edit_date": 1447413912, "creation_date": 1442433363, "answer_id": 32617554, "question_id": 32616715, "link": "https://stackoverflow.com/questions/32616715/is-it-possible-to-partially-free-dynamically-allocated-memory-on-a-posix-system/32617554#32617554", "title": "Is it possible to partially free dynamically-allocated memory on a POSIX system?", "body": "<blockquote>\n  <p>Is it possible to partially free dynamically-allocated memory on a POSIX system?</p>\n</blockquote>\n\n<p>You can not do it using <code>malloc()</code>/<code>realloc()</code>/<code>free()</code>.</p>\n\n<p>However, you can do it in a semi-portable way using <code>mmap()</code> and <code>munmap()</code>. The key point is that if you <code>munmap()</code> some page, <code>malloc()</code> can later use that page:</p>\n\n<ul>\n<li>create an anonymous mapping using <code>mmap()</code>;</li>\n<li>subsequently call <code>munmap()</code> for regions that you don't need anymore.</li>\n</ul>\n\n<p>The portability issues are:</p>\n\n<ul>\n<li>POSIX doesn't specify anonymous mappings. Some systems provide <code>MAP_ANONYMOUS</code> or <code>MAP_ANON</code> flag. Other systems provide special device file that can be mapped for this purpose. Linux provides both.</li>\n<li>I don't think that POSIX guarantees that when you <code>munmap()</code> a page, <code>malloc()</code> will be able to use it. But I think it'll work an all systems that have <code>mmap()</code>/<code>unmap()</code>.</li>\n</ul>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>If your memory region is so large that most pages surely will be written to swap, you will not loose anything by using file mappings instead of anonymous mappings. File mappings are specified in POSIX.</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 9199127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5710e3431b281aea2a9784564c7991?s=128&d=identicon&r=PG&f=1", "display_name": "Marcelo Pacheco", "link": "https://stackoverflow.com/users/9199127/marcelo-pacheco"}, "is_accepted": false, "score": 0, "last_activity_date": 1604349873, "creation_date": 1604349873, "answer_id": 64653071, "question_id": 32616715, "link": "https://stackoverflow.com/questions/32616715/is-it-possible-to-partially-free-dynamically-allocated-memory-on-a-posix-system/64653071#64653071", "title": "Is it possible to partially free dynamically-allocated memory on a POSIX system?", "body": "<p>mremap is probably what you need. As long as you're shifting whole pages, you can do a super fast realloc (actually the kernel would do it for you).</p>\n"}], "owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 32617554, "answer_count": 4, "score": 9, "last_activity_date": 1604349873, "creation_date": 1442430360, "last_edit_date": 1442431843, "question_id": 32616715, "link": "https://stackoverflow.com/questions/32616715/is-it-possible-to-partially-free-dynamically-allocated-memory-on-a-posix-system", "title": "Is it possible to partially free dynamically-allocated memory on a POSIX system?", "body": "<p>I have a C++ application where I sometimes require a large buffer of POD types (e.g. an array of 25 <strong>b</strong>illion <code>float</code>s) to be held in memory at once in a contiguous block. This particular memory organization is driven by the fact that the application makes use of some C APIs that operate on the data. Therefore, a different arrangement (such as a list of smaller chunks of memory like <code>std::deque</code> uses) isn't feasible.</p>\n\n<p>The application has an algorithm that is run on the array in a streaming fashion; think something like this:</p>\n\n<pre><code>std::vector&lt;float&gt; buf(&lt;very_large_size&gt;);\nfor (size_t i = 0; i &lt; buf.size(); ++i) do_algorithm(buf[i]);\n</code></pre>\n\n<p>This particular algorithm is the conclusion of a pipeline of earlier processing steps that have been applied to the dataset. Therefore, once my algorithm has passed over the <code>i</code>-th element in the array, the application no longer needs it. </p>\n\n<p>In theory, therefore, I could free that memory in order to reduce my application's memory footprint as it chews through the data. However, doing something akin to a <code>realloc()</code> (or a <code>std::vector&lt;T&gt;::shrink_to_fit()</code>) would be inefficient because my application would have to spend its time copying the unconsumed data to the new spot at reallocation time.</p>\n\n<p>My application runs on POSIX-compliant operating systems (e.g. Linux, OS X). Is there any interface by which I could ask the operating system to free only a specified region from the front of the block of memory? This would seem to be the most efficient approach, as I could just notify the memory manager that, for example, the first 2 GB of the memory block can be reclaimed once I'm done with it.</p>\n"}, {"tags": ["c++", "rotation", "maya", "matrix-multiplication", "fbx"], "comments": [{"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1442436224, "post_id": 32616697, "comment_id": 53087299, "body": "Does your definition of your coordinate system match that of Maya&#39;s? Do you need to account for different scaling factors? Are you constructing the headers of the FBX file appropriately for the proper version? Is your data alignment in your FBX file correct? There are so many questions that can be asked to try to answer your question with the little bit of information that you have provided. Also which OS, Compiler and IDE are you using?"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1442436354, "post_id": 32616697, "comment_id": 53087357, "body": "Another thing to take careful consideration of is the order in which you are applying matrix multiplications for your MVPM (Model View Projection Matrix). Order does matter since many matrix multiplications have no inverse."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1442436457, "post_id": 32616697, "comment_id": 53087406, "body": "Another thing to be careful of when using Euler Rotations in 3 Dimensions is the high possibility of Gimbal Lock! Be Aware of this when rotating an object across more than one axis in 3D. To avoid Gimbal Lock a better and more efficient solution is to use Quaternions."}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "reply_to_user": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1442437004, "post_id": 32616697, "comment_id": 53087694, "body": "Thanks for your comments Francis. I am reading an existing FBX (that Maya can open properly using the standard fbx import tool), create the associated joints hierarchy, and translate + rotate the joints as indicated in the FBX using the MFnTransform command (question edited with more code)."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1442472247, "post_id": 32616697, "comment_id": 53098052, "body": "No problem at all, I&#39;ve had some experience with FBX files, however I was doing the reverse. I was taking an FBX file from either Maya or 3DS Max and reading in the data and stripping out what I needed into my own parser for my own application. I&#39;m okay with code and getting better, but I understand a majority of the concepts and the math behind it. So if I feel that I can help in any way even if I&#39;m wrong but leads someone to a possible solution to their problem then that is all that matters. It is a continuous learning process and every bit of help helps."}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "reply_to_user": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1442488298, "post_id": 32616697, "comment_id": 53106999, "body": "I found out that there is a local_rotation property for each joint. Should this one be included in the Quaternion multiplication, and if yes where between pre-rot and post-rot ?"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1442552177, "post_id": 32616697, "comment_id": 53136172, "body": "To be honest I&#39;m not 100% sure but I&#39;m sure you should be able to find some documentation on Maya and these attributes on youtube. This may help you get started. <a href=\"https://www.youtube.com/results?search_query=Maya+local_rotation\" rel=\"nofollow noreferrer\">youtube.com/results?search_query=Maya+local_rotation</a>"}], "owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 683, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1442437843, "creation_date": 1442430270, "last_edit_date": 1442437843, "question_id": 32616697, "link": "https://stackoverflow.com/questions/32616697/import-fbx-file-issues-with-rotation-calculation", "title": "Import FBX file - Issues with rotation calculation", "body": "<p>I am currently writing a plugin to import fbx files into maya (I know there is already a plugin existing but I need to use it in my plugin).\nFor a given joint, I have a pre-rotation, a rotation and a post-rotation.\nIf I multiply all 3, the result is not the same than Maya is having when using the standard fbx import.<br>\nExample:</p>\n\n<pre><code>// Pre-Rotation:-90 x 15.5044 x 90\n// Rotation:-8.54572 x 1.07966 x -46.245\n// Post-Rotation:90 x -15.5044 x -90\n\n//    Maya standard FBX result (correct) -&gt; -2.106 x 8.814 x 88.132\n//    My result (error) -&gt; 23.89 x 40.8658 x 17.0975\n</code></pre>\n\n<p>I am using the standard MEulerRotation multiplication in Maya's API, but this doesn't seem to do the trick. What calculation could lead me to Maya's result ?</p>\n\n<p>This is my piece of code:</p>\n\n<pre><code>MEulerRotation prerot(-90 , 15.5044 , 90);\nMEulerRotation rotation(-8.54572 , 1.07966 , -46.245);\nMEulerRotation postrot(90 , -15.5044 , -90);\nrotFinal=prerot*rotation*postrot;\n\nMFnTransform t3(myJointObject);\nMQuaternion q;\nq=rotFinal;\nt3.setRotation(q); // -&gt; The result is different than the standard fbximport.\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2013", "geometry", "symbols"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1442430020, "post_id": 32616571, "comment_id": 53083902, "body": "Do you want to do this in a graphics window or in a terminal ? Either way you&#39;ll need an external library, such as nCurses for terminal manipulation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3449209"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1442430213, "post_id": 32616571, "comment_id": 53084005, "body": "@Quentin Please elaborate? I intend to do this on a console (if that makes any sense) What kind of an external library? and I have read some about nCurses here: <a href=\"http://www.linuxquestions.org/questions/programming-9/detecting-arrow-key-presses-in-c-c-166055/\" rel=\"nofollow noreferrer\">linuxquestions.org/questions/programming-9/&hellip;</a> If that&#39;s correct"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1442430404, "post_id": 32616571, "comment_id": 53084118, "body": "Then nCurses (PDCurses on Windows IIRC) is what you need. The documentation is <a href=\"http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/\" rel=\"nofollow noreferrer\">here</a>. <a href=\"http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/init.html#KEYPAD\" rel=\"nofollow noreferrer\"><code>keypad()</code></a> is what you need for arrow keys functionality."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3449209"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1442430639, "post_id": 32616571, "comment_id": 53084263, "body": "@Quentin keypad() will only allow on how to read the keys right? If so, I do know that but how do I draw them? That&#39;s the issue. Please help me with this!! :("}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1442430705, "post_id": 32616571, "comment_id": 53084304, "body": "They are Unicode characters, you can output them either as wide chars with <code>addwch()</code>, or as UTF-8 sequence with  <code>addstr()</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3449209"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1442430869, "post_id": 32616571, "comment_id": 53084404, "body": "@Quentin see my updated question? can you please show me how exactly to do it? Please? :3"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1442430948, "post_id": 32616571, "comment_id": 53084451, "body": "What is the result you get with that snippet ? On which terminal (console) ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3449209"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1442431105, "post_id": 32616571, "comment_id": 53084531, "body": "@Quentin I get nothing but a blank screen. VS2013? :$"}, {"owner": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "edited": false, "score": 3, "creation_date": 1442431745, "post_id": 32616571, "comment_id": 53084859, "body": "So you just want to print arrow <i>symbols</i> ? If that is the case, you should remove the part about <i>keys</i>. This probably has to do with encoding and/or font used in the terminal."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3449209"}, "reply_to_user": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "edited": false, "score": 0, "creation_date": 1442431903, "post_id": 32616571, "comment_id": 53084945, "body": "@Leiaz Thanks for replying, well yes but I want them to be printed in a sequence such that it makes a circle like Ive described in my question"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3449209"}, "edited": false, "score": 0, "creation_date": 1442436768, "post_id": 32618290, "comment_id": 53087571, "body": "This is exactly what I wanted, I know what to do next. Thankyouuu soo muchh!!"}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1442436886, "post_id": 32618290, "comment_id": 53087626, "body": "You can shorten your code by removing multiple couts. Like <code>cout &lt;&lt; setw(20) &lt;&lt; up &lt;&lt; endl &lt;&lt; endl &lt;&lt; endl &lt;&lt; setw(25);</code>"}, {"owner": {"reputation": 15601, "user_id": 5173426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9tQ1B.png?s=128&g=1", "display_name": "DirtyBit", "link": "https://stackoverflow.com/users/5173426/dirtybit"}, "edited": false, "score": 0, "creation_date": 1442437192, "post_id": 32618290, "comment_id": 53087778, "body": "@Undefined Im glad it helped :)"}], "tags": [], "owner": {"reputation": 15601, "user_id": 5173426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9tQ1B.png?s=128&g=1", "display_name": "DirtyBit", "link": "https://stackoverflow.com/users/5173426/dirtybit"}, "is_accepted": true, "score": 1, "last_activity_date": 1442437179, "last_edit_date": 1442437179, "creation_date": 1442436055, "answer_id": 32618290, "question_id": 32616571, "link": "https://stackoverflow.com/questions/32616571/printing-a-circle-using-arrow-symbols/32618290#32618290", "title": "Printing a circle using arrow symbols", "body": "<p>Good to see that effort. I have made a few changes and added a function to set the cursor position to the same line where you've printed <code>\u2192</code>. Try this:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;iomanip&gt;\n    #include &lt;windows.h&gt;\n    #include &lt;conio.h&gt;\n    using namespace std;\n    HANDLE console = GetStdHandle(STD_OUTPUT_HANDLE);\n    COORD CursorPosition;\n    void gotoXY(int, int);\n\n    int main(){\n    char left, right, up, down;\n    up = 24;\n    down = 25;\n    left = 27;\n    right = 26;\n    cout &lt;&lt; setw(20) &lt;&lt; up&lt;&lt; endl &lt;&lt; endl &lt;&lt; endl&lt;&lt; setw(25);\n    Sleep(1000);\n    cout &lt;&lt; right &lt;&lt; endl&lt;&lt; endl&lt;&lt; endl &lt;&lt; setw(20);\n    Sleep(1000);\n    cout &lt;&lt; down;\n    Sleep(1000);\n    cout &lt;&lt; endl;\n    gotoXY(0, 2 + (1));\n    cout &lt;&lt; setw(15) &lt;&lt; left&lt;&lt; endl;\n    _getch();\n    return 0;\n   }\n    void gotoXY(int x, int y)\n    {\n        CursorPosition.X = x;\n        CursorPosition.Y = y;\n        SetConsoleCursorPosition(console, CursorPosition);\n    }\n</code></pre>\n\n<blockquote>\n  <p>I admit it isn't that efficient either but it works and it should help\n  you understand/move forward better.</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3449209"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 964, "favorite_count": 0, "accepted_answer_id": 32618290, "answer_count": 1, "score": 2, "last_activity_date": 1534419233, "creation_date": 1442429811, "last_edit_date": 1534419233, "question_id": 32616571, "link": "https://stackoverflow.com/questions/32616571/printing-a-circle-using-arrow-symbols", "title": "Printing a circle using arrow symbols", "body": "<p>I have been struggling to draw a circle pattern using arrow symbols along with <code>delay();</code> or <code>Sleep();</code> like after printing <code>\u2191</code> it would delay for about a couple of seconds and then print  <code>\u2192</code> and so on.   which would give an impression of a <em>drawing circle</em>. Something like </p>\n\n<pre><code>        \u2191\n\n   \u2190         \u2192\n\n        \u2193\n</code></pre>\n\n<p>I have tried searching everywhere, and what I have found so far is <em>how to read the arrow keys</em> only or <a href=\"https://msdn.microsoft.com/en-us/library/ms646280%28VS.85%29.aspx\" rel=\"nofollow\">VM_KEYDOWN documentation</a>. Sadly that's not what I want. Please help? Ps. I know I haven't posted any \"Productive try\" and that's because I dont have any so don't get mad :X \nAny help would be greatly appreciated. :)</p>\n\n<p><strong>UPDATED:</strong>\nI tried to print the arrows with this failed attempt.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nint main() { \n    std::wstring s(L\"\u2190\u2192\u2191\u2193\"); \n    std::wcout &lt;&lt; s &lt;&lt; \"\\n\"; \n}\n</code></pre>\n\n<p><strong>UPDATED-2*</strong>\nSo I have managed to print the symbols with this:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n  char left,right,up,down;\n\n  up = 24;\n  down = 25;\n  left = 27;\n  right = 26;\n\n  cout &lt;&lt; up;\n  cout &lt;&lt; down;\n  cout &lt;&lt; left;\n  cout &lt;&lt; right;\n  cout &lt;&lt; \"\\n\";\n  system(\"PAUSE\");  \n  return 0;\n}\n</code></pre>\n\n<p>But now I need to know how to do it with a sequences as printed in above.</p>\n\n<p><strong>Working Attempt</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;windows.h&gt;\n\nusing namespace std;\nint main()\n{\n    char left, right, up, down;\n\n    up = 24;\n    down = 25;\n    left = 27;\n    right = 26;\n    cout &lt;&lt; setw(10);\n    cout &lt;&lt; up;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; setw(20);\n    Sleep(1000);\n    cout &lt;&lt; right;\n\n    cout &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; setw(10);\n    Sleep(1000);\n    cout &lt;&lt; down;\n    Sleep(1000);\n\n    cout &lt;&lt; left;\n\n    system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n\n<p>But this is clearly not accurate/efficient.</p>\n"}, {"tags": ["c++", "mfc", "treecontrol"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1442429669, "post_id": 32616429, "comment_id": 53083702, "body": "<i>&quot;.... with consist pointer of my object?&quot;</i> Did you mean to set item data like <a href=\"https://msdn.microsoft.com/en-us/library/ftcz4k70.aspx\" rel=\"nofollow noreferrer\">documented here</a>?"}, {"owner": {"reputation": 74, "user_id": 5059029, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-vj8f22k44uw/AAAAAAAAAAI/AAAAAAAAA6Y/3Ro7rHazIAE/photo.jpg?sz=128", "display_name": "\u0412\u0430\u043b\u0435\u043d\u0442\u0438\u043d \u0427\u0438\u043a\u0443\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/5059029/%d0%92%d0%b0%d0%bb%d0%b5%d0%bd%d1%82%d0%b8%d0%bd-%d0%a7%d0%b8%d0%ba%d1%83%d0%bd%d0%be%d0%b2"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1442429801, "post_id": 32616429, "comment_id": 53083769, "body": "Yes. Byt i don&#39;t see the way add pointer to my item"}], "answers": [{"comments": [{"owner": {"reputation": 74, "user_id": 5059029, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-vj8f22k44uw/AAAAAAAAAAI/AAAAAAAAA6Y/3Ro7rHazIAE/photo.jpg?sz=128", "display_name": "\u0412\u0430\u043b\u0435\u043d\u0442\u0438\u043d \u0427\u0438\u043a\u0443\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/5059029/%d0%92%d0%b0%d0%bb%d0%b5%d0%bd%d1%82%d0%b8%d0%bd-%d0%a7%d0%b8%d0%ba%d1%83%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1442430372, "post_id": 32616562, "comment_id": 53084097, "body": "My object is not constant. I want when I add an item in the tree, they consist text and I had the opportunity to call object"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 74, "user_id": 5059029, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-vj8f22k44uw/AAAAAAAAAAI/AAAAAAAAA6Y/3Ro7rHazIAE/photo.jpg?sz=128", "display_name": "\u0412\u0430\u043b\u0435\u043d\u0442\u0438\u043d \u0427\u0438\u043a\u0443\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/5059029/%d0%92%d0%b0%d0%bb%d0%b5%d0%bd%d1%82%d0%b8%d0%bd-%d0%a7%d0%b8%d0%ba%d1%83%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1442431250, "post_id": 32616562, "comment_id": 53084612, "body": "Sorry, then I don&#39;t understand your question.  Please re-state it more clearly."}, {"owner": {"reputation": 74, "user_id": 5059029, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-vj8f22k44uw/AAAAAAAAAAI/AAAAAAAAA6Y/3Ro7rHazIAE/photo.jpg?sz=128", "display_name": "\u0412\u0430\u043b\u0435\u043d\u0442\u0438\u043d \u0427\u0438\u043a\u0443\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/5059029/%d0%92%d0%b0%d0%bb%d0%b5%d0%bd%d1%82%d0%b8%d0%bd-%d0%a7%d0%b8%d0%ba%d1%83%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1442431562, "post_id": 32616562, "comment_id": 53084772, "body": "I apologize for the vagueness of the wording. I have trees and some object of my class. I made like add an element to the tree to consist text and the pointer of my object. I just want to later by clicking on the item to get some information contained in this object"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1442429791, "creation_date": 1442429791, "answer_id": 32616562, "question_id": 32616429, "link": "https://stackoverflow.com/questions/32616429/add-item-to-tree-control/32616562#32616562", "title": "Add item to tree control", "body": "<p>If you mean with <code>treeObject</code> as a pointer to <code>const</code> object, then only if <code>InsertItem</code> is a <code>const</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 1244, "user_id": 606961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/V8mtj.png?s=128&g=1", "display_name": "cardiff space man", "link": "https://stackoverflow.com/users/606961/cardiff-space-man"}, "is_accepted": true, "score": 2, "last_activity_date": 1442468941, "last_edit_date": 1442468941, "creation_date": 1442436701, "answer_id": 32618441, "question_id": 32616429, "link": "https://stackoverflow.com/questions/32616429/add-item-to-tree-control/32618441#32618441", "title": "Add item to tree control", "body": "<p>As @\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 suggests, <code>SetItemData</code> is the way to go. The type of the parameter should be <code>DWORD_PTR</code> allowing both 64-bit and 32-bit code to use the data as a pointer. You will have to cast the pointer. Read up on the methods of <code>CTreeCtrl</code> for more information.</p>\n"}], "owner": {"reputation": 74, "user_id": 5059029, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-vj8f22k44uw/AAAAAAAAAAI/AAAAAAAAA6Y/3Ro7rHazIAE/photo.jpg?sz=128", "display_name": "\u0412\u0430\u043b\u0435\u043d\u0442\u0438\u043d \u0427\u0438\u043a\u0443\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/5059029/%d0%92%d0%b0%d0%bb%d0%b5%d0%bd%d1%82%d0%b8%d0%bd-%d0%a7%d0%b8%d0%ba%d1%83%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 32618441, "answer_count": 2, "score": 0, "last_activity_date": 1466043409, "creation_date": 1442429324, "last_edit_date": 1442468879, "question_id": 32616429, "link": "https://stackoverflow.com/questions/32616429/add-item-to-tree-control", "title": "Add item to tree control", "body": "<p>I have an object of the my own class and <code>CTreeCtrl</code>.\nI have opportunity add items to <code>CTreeCtrl</code> like</p>\n\n<pre><code>hTree = treeObject-&gt;InsertItem(L\"All object\", TVI_ROOT);\n</code></pre>\n\n<p>This code add items with text. Have i opportunity to add items with consist pointer of my object?</p>\n"}, {"tags": ["c++", "node.js", "node.js-addon", "node.js-nan"], "comments": [{"owner": {"reputation": 15144, "user_id": 159388, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2891cf8a08784976cf1643f5009a4f59?s=128&d=identicon&r=PG", "display_name": "murgatroid99", "link": "https://stackoverflow.com/users/159388/murgatroid99"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1442433194, "post_id": 32616360, "comment_id": 53085668, "body": "@AlanStokes Thank you. I was looking for that tag."}], "answers": [{"tags": [], "owner": {"reputation": 4887, "user_id": 3580261, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/VgXGp.jpg?s=128&g=1", "display_name": "eljefedelrodeodeljefe", "link": "https://stackoverflow.com/users/3580261/eljefedelrodeodeljefe"}, "is_accepted": false, "score": 2, "last_activity_date": 1442435558, "creation_date": 1442435558, "answer_id": 32618151, "question_id": 32616360, "link": "https://stackoverflow.com/questions/32616360/how-do-i-check-whether-an-object-is-an-instance-of-a-constructor-in-nan-2/32618151#32618151", "title": "How do I check whether an object is an instance of a constructor in Nan 2?", "body": "<p>You can port it with that <a href=\"https://gist.github.com/thlorenz/7e9d8ad15566c99fd116\" rel=\"nofollow\">cool bash script</a> by Thorsten Lorenz.</p>\n\n<p>But basically the signature is </p>\n\n<pre><code>Nan::New(\\\\1)-&gt;HasInstance(\\\\2)\n</code></pre>\n\n<p>Or in v8 I think it's <a href=\"https://v8docs.nodesource.com/io.js-1.8/d4/da0/v8_8h_source.html\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 15144, "user_id": 159388, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2891cf8a08784976cf1643f5009a4f59?s=128&d=identicon&r=PG", "display_name": "murgatroid99", "link": "https://stackoverflow.com/users/159388/murgatroid99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474604995, "creation_date": 1442429054, "last_edit_date": 1474604995, "question_id": 32616360, "link": "https://stackoverflow.com/questions/32616360/how-do-i-check-whether-an-object-is-an-instance-of-a-constructor-in-nan-2", "title": "How do I check whether an object is an instance of a constructor in Nan 2?", "body": "<p>Nan 1.x had a function <code>NanHasInstance(Persistent&lt;FunctionTemplate&gt;&amp;, Handle&lt;Value&gt;)</code> to check whether an object is an instance of a constructor. However, that function was removed in nan 2.0, and there isn't an obvious replacement. Does nan still expose this functionality in some other way? If not, is there some other way to check it that is compatible across Node versions?</p>\n"}, {"tags": ["c++", "segmentation-fault", "valgrind", "iostream"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1442428989, "post_id": 32616206, "comment_id": 53083329, "body": "Did you somehow explicitly destroy <code>std::cout</code> (or any other <code>std::ostream</code> with static storage duration) or did anything else weird with it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1442429001, "post_id": 32616206, "comment_id": 53083336, "body": "Use functions returning a global, to ease the global initialization fiasco."}, {"owner": {"reputation": 1454, "user_id": 3667450, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/738e0d1c296674d8e2846549dbe202ff?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/3667450/shane"}, "edited": false, "score": 0, "creation_date": 1442429061, "post_id": 32616206, "comment_id": 53083362, "body": "I did call    <code>std::ofstream out(argv[2]); std::cout.rdbuf(out.rdbuf());</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1454, "user_id": 3667450, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/738e0d1c296674d8e2846549dbe202ff?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/3667450/shane"}, "edited": false, "score": 0, "creation_date": 1442429725, "post_id": 32616384, "comment_id": 53083734, "body": "Is there somewhere I can read about what happens before/after main()?"}, {"owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "reply_to_user": {"reputation": 1454, "user_id": 3667450, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/738e0d1c296674d8e2846549dbe202ff?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/3667450/shane"}, "edited": false, "score": 0, "creation_date": 1442466785, "post_id": 32616384, "comment_id": 53096009, "body": "After the main, look up <code>std::exit</code>, such as <a href=\"http://en.cppreference.com/w/cpp/utility/program/exit\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/program/exit</a>."}], "tags": [], "owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "is_accepted": true, "score": 2, "last_activity_date": 1442429131, "creation_date": 1442429131, "answer_id": 32616384, "question_id": 32616206, "link": "https://stackoverflow.com/questions/32616206/solving-valgrind-memory-error-not-pointing-to-my-code/32616384#32616384", "title": "Solving valgrind memory error not pointing to my code", "body": "<p>It is actually triggered by the exit: your main function finished its job and the program is in cleanup phase, such as calling destructors on global objects and closing streams.</p>\n\n<p>The bug itself is most likely somewhere earlier in your code, leaving the program in some invalid state that becomes an issue only at the end.</p>\n\n<hr>\n\n<p>In your comments you say that you change the <code>cout</code>'s stream buffer to your own thing. Did you set it back to the default afterwards?\nOtherwise, at the end of <code>main</code>, when the program tries to <code>flush</code> the <code>std::cout</code> it may access the stream buffer that does not exist anymore.</p>\n\n<p>See the example at: <a href=\"http://www.cplusplus.com/reference/ios/ios/rdbuf/\" rel=\"nofollow\">http://www.cplusplus.com/reference/ios/ios/rdbuf/</a></p>\n"}], "owner": {"reputation": 1454, "user_id": 3667450, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/738e0d1c296674d8e2846549dbe202ff?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/3667450/shane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 32616384, "answer_count": 1, "score": 1, "last_activity_date": 1442429323, "creation_date": 1442428652, "last_edit_date": 1442429323, "question_id": 32616206, "link": "https://stackoverflow.com/questions/32616206/solving-valgrind-memory-error-not-pointing-to-my-code", "title": "Solving valgrind memory error not pointing to my code", "body": "<p>Valgrind gives me this:</p>\n\n<pre><code>==26348== Invalid read of size 8\n==26348==    at 0x4EC3DA8: std::ostream::flush() (in /usr/lib64/libstdc++.so.6.0.19)\n==26348==    by 0x4E9E477: std::ios_base::Init::~Init() (in /usr/lib64/libstdc++.so.6.0.19)\n ==26348==    by 0x5684E58: __run_exit_handlers (in /lib64/libc-2.17.so)\n==26348==    by 0x5684EA4: exit (in /lib64/libc-2.17.so)\n==26348==    by 0x566DAFB: (below main) (in /lib64/libc-2.17.so)\n==26348==  Address 0xffefffd98 is just below the stack ptr.  To suppress, use: --workaround-gcc296-bugs=yes\n</code></pre>\n\n<p>How do I find where this bug is in my code if it does not point to any line?</p>\n\n<p>I compiled with g++ on a Linux instance in AWS.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Okay it seems that somehow I've left the program in an invalid state regarding the streams (thanks) after returning from main. I do make calls to</p>\n\n<pre><code>std::ifstream in(argv[1]);\nstd::cin.rdbuf(in.rdbuf());\n\nstd::ofstream out(argv[2]);\nstd::cout.rdbuf(out.rdbuf());\n</code></pre>\n\n<p>Is there anything I need to do here to clean up before returning from main?</p>\n"}, {"tags": ["c++", "winapi", "video", "directshow"], "comments": [{"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1442428087, "post_id": 32615892, "comment_id": 53082841, "body": "Rather than block the mutex while you read/write an entire block, you can synchronize only on the pointers to blocks. This could be lockless or with a crit-sec over a tiny data structure like a pointer queue."}, {"owner": {"reputation": 1837, "user_id": 82480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d7188b71bb68504ca7fc1c27195765a8?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/82480/christoph"}, "reply_to_user": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1442507649, "post_id": 32615892, "comment_id": 53119654, "body": "I am pretty sure that a Windows critical section cannot be used for IPC synchronisation; wrt the lockless implementation, I am unsure whether this would work on shared memory. I do not know what the semantics of atomic CAS are here ..."}, {"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1442507872, "post_id": 32615892, "comment_id": 53119770, "body": "This is going to work, and it looks like appropriate approach. Mutexes are easy to deal with and yes, you cannot use critical sections across process boundaries. BTW portions of this task were discussed multiple times, e.g. <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/ce717600-750b-46c0-8a63-31d65659740b/how-to-implement-a-source-filter-for-splitting-camera-video-based-on-viveks-vcam?forum=windowsdirectshowdevelopment\" rel=\"nofollow noreferrer\">here</a> or if you search for virtual dshow source + IPC, perhaps you can grab certain important details there as well."}, {"owner": {"reputation": 1837, "user_id": 82480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d7188b71bb68504ca7fc1c27195765a8?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/82480/christoph"}, "reply_to_user": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1442508804, "post_id": 32615892, "comment_id": 53120309, "body": "@RomanR. I interpret your answer as that there is no other solution that the shared memory/mutex approach I outlined in the question? Atm, my solution would be a triple buffer in shared memory like <a href=\"http://remis-thoughts.blogspot.de/2012/01/triple-buffering-as-concurrency_30.html\" rel=\"nofollow noreferrer\">remis-thoughts.blogspot.de/2012/01/&hellip;</a>, but I would not use atomics but a mutex for protecting the state flags. Btw, if you posted an answer instead a suggestion, I would accept it ..."}], "answers": [{"tags": [], "owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": true, "score": 1, "last_activity_date": 1442557377, "creation_date": 1442557377, "answer_id": 32645158, "question_id": 32615892, "link": "https://stackoverflow.com/questions/32615892/tee-passthrough-directshow-data-as-video-source/32645158#32645158", "title": "Tee/passthrough DirectShow data as video source", "body": "<p>The APIs work as you identified: a video capture application, such as Skype, is requesting video stream without interprocess communication in mind, there is no IPC involved to consume output generated in another process. Your challenge here is to provide this IPC yourself so that one application is generating the data, and then another extends existing API (virtual video source device) and picks existing data, then delivers as generated.</p>\n\n<p>With video, you have a relatively big stream of data and you are interested in avoiding its excessive copying. File mappings (AKA shared memory) are the right thing to do: you put bytes in one process and they are immediately visible in another. You can synchronize access to the data using names events and mutexes which both processes use collaboratively - to signal availability of new buffer of data, as indication that used buffer is no longer in use etc.</p>\n"}], "owner": {"reputation": 1837, "user_id": 82480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d7188b71bb68504ca7fc1c27195765a8?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/82480/christoph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 32645158, "answer_count": 1, "score": 4, "last_activity_date": 1442557387, "creation_date": 1442427606, "last_edit_date": 1442557387, "question_id": 32615892, "link": "https://stackoverflow.com/questions/32615892/tee-passthrough-directshow-data-as-video-source", "title": "Tee/passthrough DirectShow data as video source", "body": "<p>I have an application that gets video samples from a frame grabber card via DirectShow. The application then does some processing and sends the video signal over a network. I now want to duplicate this video signal such that another DirectShow-enabled software (like Skype) can use the original input signal, too.</p>\n\n<p>I know that you can create Tee filters in DirectShow like the one used to split a video signal for recording and preview. However, as I understand, this filter is only useful within a single graph, ie I cannot use it to forward the video from my process to eg Skype.</p>\n\n<p>I also know that I could write my own video source, but this would run in the process of the consuming application. The problem is that I cannot put the logic of my original application in such a video source filter.</p>\n\n<p>The only solution I could think of is my application writing the frames to a shared memory block and a video source filter reading it from there. Synchronisation would be done using a shared mutex or so. Could that work? I specifically do not like the synchronisation part?</p>\n\n<p>And more importantly, is there a better solution to solve this problem?</p>\n"}, {"tags": ["c++", "ostream"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 4, "creation_date": 1442427583, "post_id": 32615806, "comment_id": 53082578, "body": "There is no EOF in an output stream."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1442429463, "post_id": 32615806, "comment_id": 53083594, "body": "When you do a large write the stream writes the first buffer&#39;s worth, then the next, then the next, and so on."}, {"owner": {"reputation": 121, "user_id": 969868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896ad65219043c06eb94577a85949732?s=128&d=identicon&r=PG", "display_name": "Bob Brown", "link": "https://stackoverflow.com/users/969868/bob-brown"}, "edited": false, "score": 0, "creation_date": 1442517972, "post_id": 32615806, "comment_id": 53125387, "body": "What exactly do you mean by, there is no EOF in an output stream?   Why does my above code compile? sb.eof()"}], "owner": {"reputation": 121, "user_id": 969868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896ad65219043c06eb94577a85949732?s=128&d=identicon&r=PG", "display_name": "Bob Brown", "link": "https://stackoverflow.com/users/969868/bob-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1442427314, "creation_date": 1442427314, "question_id": 32615806, "link": "https://stackoverflow.com/questions/32615806/basic-streambuf-does-not-set-eof-bit-when-using-setp", "title": "basic_streambuf does not set eof bit when using setp", "body": "<p>I'm trying to use a std::ostream backed by a buffer that I own. </p>\n\n<p>When using setp to have the std::basic_streambuf to us my buffer, everything works fine expect that I would have expected the eof to be set when writing more bytes that were allocated for my buffer. The fail and bad bits are being set while the eof bit is not.</p>\n\n<p>Is this the expected behavior?</p>\n\n<p>If not, how can I get the eof bit to be set?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;streambuf&gt;\n\ntemplate &lt;typename char_type&gt;\nstruct OStreamBufWrapper : public std::basic_streambuf&lt;char_type, std::char_traits&lt;char_type&gt; &gt;\n{\n    OStreamBufWrapper(char_type* buffer, std::streamsize bufferLength)\n    {\n        // set the \"put\" pointer the start of the buffer and record its length.\n        this-&gt;setp(buffer, buffer + bufferLength);\n    }\n};\n\nint main(int argc, const char * argv[])\n{\n    int bufsize = 10;\n    char *buf = new char[bufsize];\n\n    OStreamBufWrapper&lt;char&gt; ost(buf, bufsize);\n    std::ostream sb(&amp;ost);\n\n    char i = 0;\n    while ( 1 )\n    {\n        sb.write(&amp;i, 1);\n\n        if (!sb.good())\n        {\n            if (sb.fail())\n                std::cout &lt;&lt; \"fail\\n\";\n            if (sb.bad())\n                std::cout &lt;&lt; \"bad\\n\";\n            if (sb.eof())\n                std::cout &lt;&lt; \"eof\\n\";\n\n            break;\n        }\n\n        i++;\n    }\n\n    delete [] buf;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "c++11", "concurrency", "qfuture"], "answers": [{"comments": [{"owner": {"reputation": 868, "user_id": 3367929, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5f06ec213df31bb3a61141cdc1f2222e?s=128&d=identicon&r=PG&f=1", "display_name": "Rames", "link": "https://stackoverflow.com/users/3367929/rames"}, "edited": false, "score": 0, "creation_date": 1442440538, "post_id": 32616598, "comment_id": 53089368, "body": "<code>waitForFinished()</code> method also waits for cancelation ( <a href=\"http://doc.qt.io/qt-4.8/qfuture.html#waitForFinished\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/qfuture.html#waitForFinished</a> ) that&#39;s why I was calling this method. However, as you mentioned, my <code>QFuture</code> cannot be canceled anyway."}], "tags": [], "owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "is_accepted": true, "score": 1, "last_activity_date": 1442429906, "creation_date": 1442429906, "answer_id": 32616598, "question_id": 32615805, "link": "https://stackoverflow.com/questions/32615805/assigning-to-running-qfuture/32616598#32616598", "title": "Assigning to running QFuture", "body": "<p>From <a href=\"http://doc.qt.io/qt-4.8/qtconcurrentrun.html\" rel=\"nofollow\">http://doc.qt.io/qt-4.8/qtconcurrentrun.html</a>:</p>\n\n<blockquote>\n  <p>Note that the QFuture returned by QtConcurrent::run() does not support\n  canceling, pausing, or progress reporting. The QFuture returned can\n  only be used to query for the running/finished status and the return\n  value of the function.</p>\n</blockquote>\n\n<p>Meaning that even if you wanted to, you couldn't cancel your QFuture. Also, even if cancelling was allowed, why would you cancel it and then wait for it to be finished?</p>\n\n<p>From <a href=\"http://doc.qt.io/qt-4.8/qthreadpool.html#expiryTimeout-prop\" rel=\"nofollow\">http://doc.qt.io/qt-4.8/qthreadpool.html#expiryTimeout-prop</a>:</p>\n\n<blockquote>\n  <p>Threads that are unused for a certain amount of time will expire. The\n  default expiry timeout is 30000 milliseconds (30 seconds). This can be\n  changed using setExpiryTimeout(). Setting a negative expiry timeout\n  disables the expiry mechanism.</p>\n</blockquote>\n\n<p>Since the threads started by <code>QtConcurrent::run()</code> are managed by the <code>QThreadPool</code> class, then assuming you didn't specify a negative expiry timeout, you should be able to <code>future = QtConcurrent::run(anotherFunciton);</code> without issue; the original thread would expire and it would exit. The efficiency of doing this, however, is questionable.</p>\n"}], "owner": {"reputation": 868, "user_id": 3367929, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5f06ec213df31bb3a61141cdc1f2222e?s=128&d=identicon&r=PG&f=1", "display_name": "Rames", "link": "https://stackoverflow.com/users/3367929/rames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 32616598, "answer_count": 1, "score": 1, "last_activity_date": 1442429906, "creation_date": 1442427314, "question_id": 32615805, "link": "https://stackoverflow.com/questions/32615805/assigning-to-running-qfuture", "title": "Assigning to running QFuture", "body": "<p>Can I assign another QFuture object to already running QFuture object? Like in the example below:</p>\n\n<pre><code> QFuture&lt;int&gt; future = QtConcurrent::run(function);\n future = QtConcurrent::run(anotherFunciton); //assume that future is still running at this point\n</code></pre>\n\n<p>I realize that this particular example doesn't make much sense, it's just for the sake of example. Is it safe to make such an assigment, assuming that the result of the first function doesn't interest me anymore? Or do I have to cancel it first? And if so, do I have to wait for cancelation to complete?</p>\n\n<pre><code> QFuture&lt;int&gt; future = QtConcurrent::run(function);\n future.cancel();\n future.waitForFinished(); //is waiting necessary?\n future = QtConcurrent::run(anotherFunciton);\n</code></pre>\n"}, {"tags": ["c++", "string", "byte", "recv"], "comments": [{"owner": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "edited": false, "score": 3, "creation_date": 1442426713, "post_id": 32615310, "comment_id": 53082104, "body": "You will have to parse the bytes you received.. get the first 4 bytes and convert to a numeric value <code>n</code> (<a href=\"http://stackoverflow.com/questions/17916394/converting-4-bytes-in-little-endian-order-into-an-unsigned-integer\">example of little endian to uint</a>). Afterwards, you should use this <code>n</code> to get the string. Since you mention 2 bytes per letter... is it a wchar? You can get the following <code>n</code> bytes and construct a <code>std::wstring</code> for example. Do you know the end symbol used? is it always the same? Will you receive more than one text at the time?"}, {"owner": {"reputation": 95, "user_id": 5343362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7884f5a87895f168ed5b7b1dff74b200?s=128&d=identicon&r=PG&f=1", "display_name": "Quentin M", "link": "https://stackoverflow.com/users/5343362/quentin-m"}, "reply_to_user": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "edited": false, "score": 0, "creation_date": 1442475558, "post_id": 32615310, "comment_id": 53099717, "body": "First thank for the quick answer. I do not know waht kind of data it is the just said bytes. The end symbol is two zeores, like the exemple : Example: to send or receive the \u201cxyz\u201d Unicode string, it must be wrapped into the following packet: i. Bytes [0:3] \u2013 integer 8 as the number of data bytes ii. Bytes [4:5] \u2013 \u2018x\u2019 in Unicode iii. Bytes [6:7] \u2013 \u2018y\u2019 in Unicode iv. Bytes [8:9] \u2013 \u2018z\u2019 in Unicode v. Bytes [10:11] \u2013 zeroes terminating the string vi. Total amount: 12 bytes  I will try to make a wstring and use wchar."}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 5343362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7884f5a87895f168ed5b7b1dff74b200?s=128&d=identicon&r=PG&f=1", "display_name": "Quentin M", "link": "https://stackoverflow.com/users/5343362/quentin-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1442560482, "creation_date": 1442560482, "answer_id": 32645989, "question_id": 32615310, "link": "https://stackoverflow.com/questions/32615310/c-client-recv-function-bytes-to-string/32645989#32645989", "title": "C++ - Client recv function - Bytes to string", "body": "<p>I modified a bit my code after reading some things on internet and to make it more clear :</p>\n\n<pre><code>void reception()\n{\n\n    wchar_t input[2048];\n    wstring message;\n    unsigned int data_receive;\n    if(data_receive = recv(sock,(char*) input, 2048, 0) != -1)\n    {\n        message = input;\n        std::wofstream fs(\"testout.txt\");\n        fs &lt;&lt; message &lt;&lt; std::flush;\n\n        //cout &lt;&lt; input[0]&lt;&lt;endl;\n\n        system(\"PAUSE\");\n    }\n}\n</code></pre>\n\n<p>Now I have a array of bytes I suppose but I do not know how to parse it.\nI think my input array is with UTF16.\nSee the array value : <a href=\"http://image.noelshack.com/fichiers/2015/38/1442493564-tableau.png\" rel=\"nofollow\">Array view</a></p>\n"}, {"tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": true, "score": 0, "last_activity_date": 1442564041, "creation_date": 1442564041, "answer_id": 32647057, "question_id": 32615310, "link": "https://stackoverflow.com/questions/32615310/c-client-recv-function-bytes-to-string/32647057#32647057", "title": "C++ - Client recv function - Bytes to string", "body": "<p>wendelbsilva already posted the answer, but it was in a comment.</p>\n\n<p>Do two <code>recv</code> calls. The first call for 4 bytes. Like so:</p>\n\n<pre><code>unsigned int len;\nassert(sizeof(len) == 4);\ndata_receive = recv(sock, &amp;len, 4);\n</code></pre>\n\n<p>Then you can read the real string.</p>\n\n<pre><code>std::vector&lt;wchar_t&gt; input(len+1);\nif(data_receive = recv(sock, input.data(), len) != -1)\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 5343362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7884f5a87895f168ed5b7b1dff74b200?s=128&d=identicon&r=PG&f=1", "display_name": "Quentin M", "link": "https://stackoverflow.com/users/5343362/quentin-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1772, "favorite_count": 0, "accepted_answer_id": 32647057, "answer_count": 2, "score": 1, "last_activity_date": 1442564041, "creation_date": 1442425509, "last_edit_date": 1442426794, "question_id": 32615310, "link": "https://stackoverflow.com/questions/32615310/c-client-recv-function-bytes-to-string", "title": "C++ - Client recv function - Bytes to string", "body": "<p>I am coming here because I have problem with the recv() function.\nI am trying to code a TC/IP client which will receive data from a server ( I have not acces to the server code, it is a .exe).\nI am able to connect and receive the data but then I can not use them.\nNormaly I should receive a string but in bytes code.</p>\n\n<pre><code>int main()\n{\n    WSADATA WSAData;\n    WSAStartup(MAKEWORD(2,0), &amp;WSAData);//Initialisation du DLL,MAKEWORD(2,0) pour dire que c'est la V2,adresse de la variable qui lance le DLL\n\n    string convert;\n\n    long succes;\n    SOCKADDR_IN sin;//info du socket\n\n    int sock, bytes_recieved, bytes_send;\n    char send_data[1024], recv_data[2048];\n\n    struct hostent *host;\n    struct sockaddr_in server_addr;\n\n    host = gethostbyname(\"127.0.0.1\");\n\n    if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1) {\n        perror(\"SocketError\");\n        exit(1);\n    }\n    server_addr.sin_family = AF_INET;\n    server_addr.sin_port = htons(50500);\n    server_addr.sin_addr = *((struct in_addr *) host-&gt;h_addr);\n    bzero(&amp;(server_addr.sin_zero), 8);\n\n\n    if (connect(sock, (struct sockaddr *) &amp;server_addr, sizeof(struct sockaddr))\n        == -1) {\n        perror(\"ConnectToError\");\n        exit(1);\n    }\n\n\n    //bytes_send = send(sock, a, strlen(a), 0);\n    //bytes_send = shutdown(sock, 1);\n\n\n    bytes_recieved = recv(sock, recv_data, 2048, 0);    recv_data[bytes_recieved] = '\\0';\n    printf(\"\\nRecieved data = %s \", recv_data);\n    cout &lt;&lt; endl &lt;&lt; endl;\n\n    shutdown(sock, 2);\n    system(\"PAUSE\");\n        WSACleanup();\n\n\n    return 0;\n    }\n</code></pre>\n\n<p>I have value into my array : Array value\nBut I do not know how to translate them into a string, it should follow the following order :</p>\n\n<p>[0:3] Size of the string</p>\n\n<p>[4:n-2] String, each letter on 2 bytes</p>\n\n<p>[n-1:n] End symbole</p>\n\n<p>Thank you for you help.</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "condition-variable"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1442426351, "post_id": 32615223, "comment_id": 53081852, "body": "Also <code>counter</code> needs to be atomic"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1442427007, "post_id": 32615223, "comment_id": 53082292, "body": "@RichardCritten No, it doesn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3078395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f78fa46be48b5d287c91b2c73236efdf?s=128&d=identicon&r=PG&f=1", "display_name": "user3078395", "link": "https://stackoverflow.com/users/3078395/user3078395"}, "edited": false, "score": 0, "creation_date": 1442434707, "post_id": 32615328, "comment_id": 53086506, "body": "Thanks, I didn&#39;t notice that :)!"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1442425572, "creation_date": 1442425572, "answer_id": 32615328, "question_id": 32615223, "link": "https://stackoverflow.com/questions/32615223/why-condition-variable-in-this-code-blocks/32615328#32615328", "title": "Why condition_variable in this code blocks?", "body": "<p>Let's add some annotation to your code:</p>\n\n<pre><code>void foo() {\n    std:: unique_lock&lt;std::mutex&gt;lck{ mtx };\n    // counter == 0\n    for (; counter &lt; 100; counter++) {\n        ...\n    }\n    // counter == 100\n    lck.unlock();\n    cv.notify_one(); // &lt;== notify here\n}\n</code></pre>\n\n<p>We're looping until <code>counter == 100</code>, at which point we notify <code>cv</code>. However, we are waiting for <code>counter == 99</code>, which is not true at the point when it gets notified. The only way for <code>wait()</code> to return in your code is for a spurious wakeup to happen right at the last iteration of the loop. </p>\n\n<p>Perhaps you meant to loop while <code>counter &lt; 99</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 3078395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f78fa46be48b5d287c91b2c73236efdf?s=128&d=identicon&r=PG&f=1", "display_name": "user3078395", "link": "https://stackoverflow.com/users/3078395/user3078395"}, "edited": false, "score": 0, "creation_date": 1442434763, "post_id": 32616230, "comment_id": 53086543, "body": "Thanks, your answer helped a lot ! :)"}, {"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "reply_to_user": {"reputation": 11, "user_id": 3078395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f78fa46be48b5d287c91b2c73236efdf?s=128&d=identicon&r=PG&f=1", "display_name": "user3078395", "link": "https://stackoverflow.com/users/3078395/user3078395"}, "edited": false, "score": 0, "creation_date": 1442435725, "post_id": 32616230, "comment_id": 53087058, "body": "You should accept either @Barry&#39;s answer or mine if your question has been answered."}], "tags": [], "owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "is_accepted": false, "score": 0, "last_activity_date": 1442428735, "creation_date": 1442428735, "answer_id": 32616230, "question_id": 32615223, "link": "https://stackoverflow.com/questions/32615223/why-condition-variable-in-this-code-blocks/32616230#32616230", "title": "Why condition_variable in this code blocks?", "body": "<pre><code>#include&lt;thread&gt;\n#include&lt;condition_variable&gt;\n#include&lt;mutex&gt;\n#include&lt;chrono&gt;\n#include &lt;iostream&gt;\nstd::condition_variable cv;\nstd::mutex mtx;\nint counter = 0;\n\nvoid foo() {\n    std:: unique_lock&lt;std::mutex&gt;lck{ mtx };\n    //counter += 99;\n    for (; counter &lt; 100; counter++) {                                // B\n        std::cout &lt;&lt; counter &lt;&lt; std::endl;\n        std::this_thread::sleep_for(std::chrono::milliseconds(20));\n    }\n    lck.unlock();\n    cv.notify_one();                                                  // C\n}\n</code></pre>\n\n<p>At the end of your loop (<strong>B</strong>), counter has a value of 100.</p>\n\n<pre><code>int main() {\n    std::thread th(&amp;foo);\n    {\n        std::unique_lock&lt;std::mutex&gt;lck{ mtx };\n        cv.wait(lck, [] {\n            return counter == 99;                                     // A\n        });\n    }\n\n    std::cout &lt;&lt; \"!!!!!\" &lt;&lt; std::endl;\n    th.join();\n}\n</code></pre>\n\n<p>Your condition to wake up the thread running <code>main()</code> is that <code>counter</code> has a value of 99 (<strong>A</strong>).</p>\n\n<p>Because you call <code>unlock()</code> after your loop is finished (<strong>C</strong>), the value of <code>counter</code> is 100. Your <code>std::condition_variable</code> will only wake up its the waiting thread when the value of <code>counter</code> is 99 (<strong>A</strong>). Therefore, unless there is a spurious wakeup in the waiting thread when <code>counter</code> has a value of 99 (which would cause the <code>std::condition_variable</code>'s condition to evaluate to <code>true</code>), your waiting thread will be stuck waiting forever.</p>\n\n<p>You can fix this by simply changing the <code>std::condition_variable</code>'s predicate as follows:</p>\n\n<pre><code>    {\n        std::unique_lock&lt;std::mutex&gt;lck{ mtx };\n        cv.wait(lck, [] {\n            return counter == 100; // CHANGED TO 100 FROM 99.\n        });\n    }\n</code></pre>\n\n<p>Or (the exclusive kind) by changing the condition in your <code>for()</code> loop as follows:</p>\n\n<pre><code>for (; counter &lt; 99; counter++) { // `counter &lt; 100` is now `counter &lt; 99`\n    std::cout &lt;&lt; counter &lt;&lt; std::endl;\n    std::this_thread::sleep_for(std::chrono::milliseconds(20));\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3078395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f78fa46be48b5d287c91b2c73236efdf?s=128&d=identicon&r=PG&f=1", "display_name": "user3078395", "link": "https://stackoverflow.com/users/3078395/user3078395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442428735, "creation_date": 1442425203, "last_edit_date": 1442425585, "question_id": 32615223, "link": "https://stackoverflow.com/questions/32615223/why-condition-variable-in-this-code-blocks", "title": "Why condition_variable in this code blocks?", "body": "<p>I'm new to condition variables and I wonder why this piece of code blocks after counter variable is equal to 99? \nDeleting the for loop and putting \"counter += 99\" instead makes the code work, does it have anything to do with sleep_for? Thanks for help :)</p>\n\n<pre><code>#include&lt;thread&gt;\n#include&lt;condition_variable&gt;\n#include&lt;mutex&gt;\n#include&lt;chrono&gt;\n#include &lt;iostream&gt;\nstd::condition_variable cv;\nstd::mutex mtx;\nint counter = 0;\n\nvoid foo() {\n    std:: unique_lock&lt;std::mutex&gt;lck{ mtx };\n    //counter += 99;\n    for (; counter &lt; 100; counter++) {\n        std::cout &lt;&lt; counter &lt;&lt; std::endl;\n        std::this_thread::sleep_for(std::chrono::milliseconds(20));\n    }\n    lck.unlock();\n    cv.notify_one();\n}\n\nint main() {\n    std::thread th(&amp;foo);\n    {\n        std::unique_lock&lt;std::mutex&gt;lck{ mtx };\n        cv.wait(lck, [] {\n            return counter == 99;\n        });\n    }\n\n    std::cout &lt;&lt; \"!!!!!\" &lt;&lt; std::endl;\n    th.join();\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1442425157, "post_id": 32615191, "comment_id": 53081111, "body": "So what is the question?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1442425304, "post_id": 32615191, "comment_id": 53081202, "body": "How come a static function is allowed to declare an <code>int</code>, even though ints aren&#39;t static?"}, {"owner": {"reputation": 5950, "user_id": 3991211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042922965/picture?type=large", "display_name": "Garr Godfrey", "link": "https://stackoverflow.com/users/3991211/garr-godfrey"}, "edited": false, "score": 2, "creation_date": 1442425397, "post_id": 32615191, "comment_id": 53081260, "body": "it&#39;s not true that static methods can only work with static variables and methods. They just cannot work on the object <i>this</i> instance, because it doesn&#39;t exist. It is free to create new instances or use instances passed in and call private methods if it is of the same class."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1442425424, "post_id": 32615191, "comment_id": 53081274, "body": "Why returning reference to local variable instead of by value ?"}, {"owner": {"reputation": 4975, "user_id": 3994425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f3f6d003abc63fb417f1c209d08b66?s=128&d=identicon&r=PG&f=1", "display_name": "Eldar Dordzhiev", "link": "https://stackoverflow.com/users/3994425/eldar-dordzhiev"}, "reply_to_user": {"reputation": 5950, "user_id": 3991211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042922965/picture?type=large", "display_name": "Garr Godfrey", "link": "https://stackoverflow.com/users/3991211/garr-godfrey"}, "edited": false, "score": 0, "creation_date": 1442425509, "post_id": 32615191, "comment_id": 53081327, "body": "@GarrGodfrey You should have written it as the answer."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1442425613, "post_id": 32615191, "comment_id": 53081390, "body": "<i><code>&#47;&#47; Ignore this problem.</code></i> Huh??, Why you&#39;re exposing code that shows that problem then?"}, {"owner": {"reputation": 1142, "user_id": 5180554, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/5OWnC.jpg?s=128&g=1", "display_name": "Alex Goft", "link": "https://stackoverflow.com/users/5180554/alex-goft"}, "edited": false, "score": 0, "creation_date": 1442426070, "post_id": 32615191, "comment_id": 53081651, "body": "its just a part of a question i got im my homework...."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1442427342, "post_id": 32615191, "comment_id": 53082451, "body": "@AlexGoft Anyway any person that seriously attempts to answer your question, can&#39;t ignore that problem. It&#39;s essential for getting it right. What you&#39;re asking actually is bogus, because there are serious misconceptions from your side, what <code>private</code> actually means in the context of a <code>static</code> scope. In short: You are barking up the wrong tree!"}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1442426259, "post_id": 32615315, "comment_id": 53081791, "body": "Maybe the overall better solution would be returning a <code>std::unique_ptr&lt;A&gt;</code> from the <code>create()</code> function (changing it&#39;s signature of course). Supposed the OP doesn&#39;t want a Singleton, that seems to become more consistent from a semantical point of view."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 3, "last_activity_date": 1442428012, "last_edit_date": 1442428012, "creation_date": 1442425531, "answer_id": 32615315, "question_id": 32615191, "link": "https://stackoverflow.com/questions/32615191/creating-objects-in-static-methods-with-private-constructors/32615315#32615315", "title": "creating objects in static methods with private constructors", "body": "<blockquote>\n  <p>Since a static method is not related to a specific instance, i don't understand how its possible to create an A object which has a private constructor.</p>\n</blockquote>\n\n<p>static method which is in A class definition, has access to private constructor. In case your sample:</p>\n\n<pre><code>static A&amp; create(int i)\n{\n    A a(i);\n    return a; // Ignore this problem.\n}\n</code></pre>\n\n<p>you are returning reference to local variable which is UB (is it the reason for your comment above?). Maybe you meant <code>static A create(int i)</code> or with <code>std::unique_ptr</code>: </p>\n\n<pre><code>static std::unique_ptr&lt;A&gt; create(int i) {\n    return std::unique_ptr&lt;A&gt;(new A(num));\n} \n</code></pre>\n\n<p>or a singleton (but name create() indicates its rather factory method):</p>\n\n<pre><code>static A&amp; create(int i)\n{\n    static A a(i);\n    return a; // Ignore this problem.\n}\n</code></pre>\n\n<blockquote>\n  <p>static methods can work only with static variables and methods. Aside to the fact that it is private, how come the constructor (is it a implicitly static?) can be called?</p>\n</blockquote>\n\n<p>as I said above, your static method has access to private methods of your class. Constructor is called because you are creating local variable on stack, its legal.</p>\n"}], "owner": {"reputation": 1142, "user_id": 5180554, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/5OWnC.jpg?s=128&g=1", "display_name": "Alex Goft", "link": "https://stackoverflow.com/users/5180554/alex-goft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2206, "favorite_count": 1, "accepted_answer_id": 32615315, "answer_count": 1, "score": -2, "last_activity_date": 1442428012, "creation_date": 1442425043, "question_id": 32615191, "link": "https://stackoverflow.com/questions/32615191/creating-objects-in-static-methods-with-private-constructors", "title": "creating objects in static methods with private constructors", "body": "<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nstruct A {\n    static A&amp; create(int i)\n    {\n        A a(i);\n        return a; // Ignore this problem.\n    }\n\n    void print() { cout&lt;&lt; _a &lt;&lt;endl; }\nprivate:\n    A(int i):_a(i){}\n    int _a;\n};\nint main()\n{\n    A&amp; a = A::create(2);\n    a.print();\n    return 0;\n}\n</code></pre>\n\n<p>I don't understand few things:</p>\n\n<ul>\n<li>Since a static method is not related to a specific instance, i don't\nunderstand how its possible to create an A object which has a private\nconstructor.</li>\n<li>static methods can work only with static variables and methods. Aside\nto the fact that it is private, how come the constructor (is it a\nimplicitly static?) can be called?</li>\n</ul>\n"}, {"tags": ["c++", "multithreading", "sockets", "winapi", "tcp"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5328520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29e3f506fa895ab849b11f7186aeea44?s=128&d=identicon&r=PG&f=1", "display_name": "N. Zazulin", "link": "https://stackoverflow.com/users/5328520/n-zazulin"}, "edited": false, "score": 0, "creation_date": 1442427365, "post_id": 32615334, "comment_id": 53082460, "body": "I will try to use std::thread and pass 2 agruments to thread (socket and IP address)."}, {"owner": {"reputation": 35, "user_id": 5328520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29e3f506fa895ab849b11f7186aeea44?s=128&d=identicon&r=PG&f=1", "display_name": "N. Zazulin", "link": "https://stackoverflow.com/users/5328520/n-zazulin"}, "edited": false, "score": 0, "creation_date": 1442428341, "post_id": 32615334, "comment_id": 53082975, "body": "Uhh, i dont understand. Did u say, that there is no way i pass address to thread?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 35, "user_id": 5328520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29e3f506fa895ab849b11f7186aeea44?s=128&d=identicon&r=PG&f=1", "display_name": "N. Zazulin", "link": "https://stackoverflow.com/users/5328520/n-zazulin"}, "edited": false, "score": 0, "creation_date": 1442428633, "post_id": 32615334, "comment_id": 53083143, "body": "@N.Zazulin, you should not pass addresses of local variables to the threads. Regardless of which management system you use for your threads, the address will mean nothing by the time the thread starts to execute - unless, of course, you are waiting for the thread to complete before leaving current scope. The drawback of native threads is that the ONLY thing they can receive is an address! So in order to pass anything to them, you need to allocate structure on the heap (using new, for instance) and pass the address of this structure. C++ threads do not have this limitation."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 35, "user_id": 5328520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29e3f506fa895ab849b11f7186aeea44?s=128&d=identicon&r=PG&f=1", "display_name": "N. Zazulin", "link": "https://stackoverflow.com/users/5328520/n-zazulin"}, "edited": false, "score": 0, "creation_date": 1442428643, "post_id": 32615334, "comment_id": 53083148, "body": "You can pass objects by value to those."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 0, "last_activity_date": 1442425598, "creation_date": 1442425598, "answer_id": 32615334, "question_id": 32614940, "link": "https://stackoverflow.com/questions/32614940/c-tcp-server-client-little-issue/32615334#32615334", "title": "C++ TCP server-client little issue", "body": "<p>There is only one argument to thread function in WINApi. And you have already INCORRECTLY used it for your socket - you are passing an address of local variable to the thread. By the time your thread is executing, this local variable will be lost, and something completely different will be living at this address. Following solutions are available:</p>\n\n<ul>\n<li>Prefferred solution. Ditch WinApi threads (which you are using incorrectly, btw. C++ programms should not use CreateThread, but instead beginthreadex_. Use C++ thread functions instead. This way you will get a way to pass arguments to thread function like you do for any other function, and you will not have to pass addresses (which you still will not be able to do!), or references.</li>\n<li>Worse solution. Pack all your arguments into the struct, allocate the struct on the heap and pass address of this struct. In the thread function unpack arguments and delete the struct.</li>\n</ul>\n"}], "owner": {"reputation": 35, "user_id": 5328520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29e3f506fa895ab849b11f7186aeea44?s=128&d=identicon&r=PG&f=1", "display_name": "N. Zazulin", "link": "https://stackoverflow.com/users/5328520/n-zazulin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 32615334, "answer_count": 1, "score": 2, "last_activity_date": 1442425598, "creation_date": 1442424174, "last_edit_date": 1442424480, "question_id": 32614940, "link": "https://stackoverflow.com/questions/32614940/c-tcp-server-client-little-issue", "title": "C++ TCP server-client little issue", "body": "<p>I have a TCP server and client. Server code part:</p>\n\n<pre><code>/*int Main()*/\nwhile(1)\n{\n    client_socket = accept (my_socket, (sockaddr *)&amp;client_addr, &amp;client_addrlen);\n\n\n    nclients++;\n\n    HOSTENT *my_host;\n    my_host = gethostbyaddr((char *)&amp;client_addr.sin_addr.S_un.S_addr, 4, AF_INET);\n    htons(client_addr.sin_port));\n    printf(\"Client name: %s\\n\", (my_host) ? my_host-&gt;h_name : \"\");\n    printf(\"Client IP: %s\\n\", inet_ntoa(client_addr.sin_addr)); //here is client IP\n\n    PRINTNUSERS;\n    DWORD threadID;\n    CreateThread(NULL, NULL, ClientFunc, &amp;client_socket, NULL, &amp;threadID);\n}\n</code></pre>\n\n<p>For each new client i want to create a new thread to handle it</p>\n\n<pre><code>DWORD WINAPI ClientFunc(LPVOID client_socket)\n{\nSOCKET Thread_sock;\nThread_sock = ((SOCKET *)client_socket)[0];\nSOCKADDR_IN Thread_addr;   //how can i connect thread IP with client IP\n/*send(), recv() operations*/\n}\n</code></pre>\n\n<p>I want to print Client IP in my thread. \nHow do i get Client IP address locating in <code>Thread_addr.sin_addr</code>structure. I have my Client IP address located on my <code>int main()</code>function, but how to connect it with thread? </p>\n"}, {"tags": ["c++", "macos", "c++11", "cmake", "clang"], "answers": [{"comments": [{"owner": {"reputation": 79438, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "edited": false, "score": 0, "creation_date": 1442428141, "post_id": 32615642, "comment_id": 53082871, "body": "If you&#39;re willing to possibly futz with experimental features you can turn on <code>-fmodules</code>, and this will tell you directly when you&#39;re trying to use a facility but haven&#39;t included the right header. For example here it would tell you you&#39;re using <code>accumulate</code> but have failed to <code>#include</code> the numeric header."}, {"owner": {"reputation": 79438, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "edited": false, "score": 0, "creation_date": 1442428144, "post_id": 32615642, "comment_id": 53082873, "body": "The reason I mention &#39;futzing&#39; with experimental features is that I recall that at one point one of the libc++ headers required one change to correct a mistake that was made modularizing them. I think I have a script or something somewhere that applies the appropriate patch. I don&#39;t know if Apple has updated the version they ship with Xcode yet."}], "tags": [], "owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "is_accepted": false, "score": 15, "last_activity_date": 1442426723, "creation_date": 1442426723, "answer_id": 32615642, "question_id": 32614922, "link": "https://stackoverflow.com/questions/32614922/os-x-clang-wont-use-c11-headers/32615642#32615642", "title": "OS X/Clang won&#39;t use c++11 headers", "body": "<p>Another friend provided the answer:</p>\n\n<p>In my bigger program (not here posted, obv.) Something had included <code>&lt;numeric&gt;</code> in some kind of hidden way. When I went to compile on OSX, it was no longer included. I had thought <code>&lt;algorithm&gt;</code> was the necessary component, but clearly it wasn't. So just my error.</p>\n"}], "owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4914, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1484640357, "creation_date": 1442424120, "last_edit_date": 1442515777, "question_id": 32614922, "link": "https://stackoverflow.com/questions/32614922/os-x-clang-wont-use-c11-headers", "title": "OS X/Clang won&#39;t use c++11 headers", "body": "<p>system info: OS X 10.10.5, Clang = Apple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn), cmake = 2.8.12.2</p>\n\n<p>Suppose I have some simple file, main.cpp:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;vector&gt;\n\n#include &lt;algorithm&gt;\n\nint main(void)\n{\n    std::vector&lt;int&gt; v{1, 2, 3, 4};\n\n    int sum = std::accumulate(v.begin(), v.end(), 0);\n\n    printf(\"Sum = %d\\n\", sum);\n    return 0;\n }\n</code></pre>\n\n<p>When I run \"clang++ -stdlib=libc++ -std=c++11 main.cpp\" I get error:</p>\n\n<blockquote>\n  <p>main.cpp:11:20: error: no member named 'accumulate' in namespace 'std'\n     int sum = std::accumulate(v.begin(), v.end(), 0);</p>\n</blockquote>\n\n<p>When I look, using an IDE (Qt Creator), I see that the included header is /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/algorithm </p>\n\n<p>when I look through my file system, I see that /usr/include/c++/4.2.1 exists with c++11 compliant headers. </p>\n\n<hr>\n\n<p>Next, I use cmake to control larger builds (the above is just an example setup).</p>\n\n<p>So here's a token CMakeLists.txt file for the above example:</p>\n\n<pre><code>project(c11Test)\ncmake_minimum_required(VERSION 2.8)\n\nset(CMAKE_VERBOSE_MAKEFILE ON)\n\nset(CMAKE_CXX_FLAGS \"-stdlib=libc++ -std=gnu++11\")\n\nadd_executable(${PROJECT_NAME} main.cpp)\n</code></pre>\n\n<p>Which, when I build, creates this output (excerpt):</p>\n\n<blockquote>\n  <p>[100%] Building CXX object CMakeFiles/c11Test.dir/main.cpp.o\n  /usr/bin/c++    -stdlib=libc++ -std=gnu++11   -o\n  CMakeFiles/c11Test.dir/main.cpp.o -c /Users/username/c11Test/main.cpp\n  /Users/username/c11Test/main.cpp:11:20: error: no member named\n  'accumulate' in namespace 'std'\n      int sum = std::accumulate(v.begin(), v.end(), 0);\n                ~~~~~^ 1 error generated.</p>\n</blockquote>\n\n<p>(<a href=\"http://pastebin.com/bad9tPvm\" rel=\"noreferrer\">whole output here</a>): </p>\n\n<p>I'm aware of <a href=\"https://stackoverflow.com/questions/14656856/getting-c11-compliant-compiler/14657009#14657009\">this post</a>, which seems to imply that all I need to do is just include these compiler flags. But that doesn't seem to work. </p>\n\n<p>Furthermore, I probably need to build this on a variety of OS X computers at different versions, so I really wonder if there's a general solution I'm overlooking here? </p>\n"}, {"tags": ["c++", "c++11", "boost", "boost-unit-test-framework"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1442424043, "post_id": 32614683, "comment_id": 53080533, "body": "<code>mkstemp</code> is not a C++ standard function. Have you tried <code>std=gnu++11</code> to get some extensions?"}, {"owner": {"reputation": 947, "user_id": 1556106, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/999c52ff11f9aa716769ab61a310fb45?s=128&d=identicon&r=PG", "display_name": "Jos&#233;", "link": "https://stackoverflow.com/users/1556106/jos%c3%a9"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1442424988, "post_id": 32614683, "comment_id": 53081016, "body": "@BoPersson Works. Put your comment as answer please. I thought that <code>std=c++11</code> and <code>std=gnu++11</code> was the same in a environment in which only gnu c++ is installed :c. Could you explain me please why this happens?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1442425149, "post_id": 32614683, "comment_id": 53081105, "body": "It was just a guess. The options are like &quot;strict C++ standard&quot; vs &quot;some Posix and stuff added&quot;. I don&#39;t know the exact details."}], "answers": [{"tags": [], "owner": {"reputation": 1190, "user_id": 1879042, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Vul6p.jpg?s=128&g=1", "display_name": "Anton Samsonov", "link": "https://stackoverflow.com/users/1879042/anton-samsonov"}, "is_accepted": true, "score": 3, "last_activity_date": 1442428427, "creation_date": 1442428427, "answer_id": 32616131, "question_id": 32614683, "link": "https://stackoverflow.com/questions/32614683/compilation-using-boost-test-unit-in-std-c11/32616131#32616131", "title": "Compilation using Boost Test Unit in std c++11", "body": "<p>Looks like it is a Cygwin thing. I could not reproduce it on OpenSUSE 13.2 i586 with Boost 1.54, but got the same result as yours on Cygwin Win32 with Boost 1.57. And, as <em>Bo Persson</em> suggested, also tried <code>std=gnu+11</code>.</p>\n\n<p>As the compiler sayd \u201cnot <em>declared</em>\u201d \u2014 even if you explicitly include <code>&lt;stdlib.h&gt;</code> which declares both <code>mkstemp</code> and <code>putenv</code>, \u2014 it seemed doubtful to me that it was all about C++ language extensions, but rather more like header file issue. Indeed, in Linux we have:</p>\n\n<pre><code>#if defined __USE_MISC || defined __USE_XOPEN_EXTENDED \\\n    || defined __USE_XOPEN2K8\n# ifndef __USE_FILE_OFFSET64\nextern int mkstemp (char *__template) __nonnull ((1)) __wur;\n# else\n#  ifdef __REDIRECT\nextern int __REDIRECT (mkstemp, (char *__template), mkstemp64)\n     __nonnull ((1)) __wur;\n#  else\n#   define mkstemp mkstemp64\n#  endif\n# endif\n# ifdef __USE_LARGEFILE64\nextern int mkstemp64 (char *__template) __nonnull ((1)) __wur;\n# endif\n#endif\n</code></pre>\n\n<p>But in Cygwin:</p>\n\n<pre><code>#ifndef __STRICT_ANSI__\n#ifndef _REENT_ONLY\nint _EXFUN(mkstemp,(char *));\n#endif\nint _EXFUN(_mkstemp_r, (struct _reent *, char *));\n#endif\n</code></pre>\n\n<p>Then I added a couple of <code>#undef</code>s to your program:</p>\n\n<pre><code>#undef __STRICT_ANSI__\n#undef _REENT_ONLY\n\n#define BOOST_TEST_MODULE My Test\n#include &lt;boost/test/included/unit_test.hpp&gt;\n\nBOOST_AUTO_TEST_CASE(first_test) {   int i = 1;   BOOST_CHECK(i == 1); }\n</code></pre>\n\n<p>And could compile it fine with <code>std=c++11</code>. I have no idea how incorrect and stupid this may be, but at least it produced very similar <em>exe</em> file that only differs by 20 bytes (aside from fingerprint).</p>\n"}], "owner": {"reputation": 947, "user_id": 1556106, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/999c52ff11f9aa716769ab61a310fb45?s=128&d=identicon&r=PG", "display_name": "Jos&#233;", "link": "https://stackoverflow.com/users/1556106/jos%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 32616131, "answer_count": 1, "score": 2, "last_activity_date": 1442428427, "creation_date": 1442423286, "last_edit_date": 1442423777, "question_id": 32614683, "link": "https://stackoverflow.com/questions/32614683/compilation-using-boost-test-unit-in-std-c11", "title": "Compilation using Boost Test Unit in std c++11", "body": "<p>I'm trying to compile a very simple program using Boost Test Unit</p>\n\n<pre><code>#define BOOST_TEST_MODULE My Test\n#include &lt;boost/test/included/unit_test.hpp&gt;\n\nBOOST_AUTO_TEST_CASE(first_test) {   int i = 1;   BOOST_CHECK(i == 1); }\n</code></pre>\n\n<p>If I compile this small program with no parameters,</p>\n\n<pre><code>g++ test1.cpp\n</code></pre>\n\n<p>there's no problem. But, if I try to use C++11 standard,</p>\n\n<pre><code>g++ test1.cpp -std=c++11\n</code></pre>\n\n<p>I get some errors:</p>\n\n<pre><code>In file included from /usr/include/boost/test/included/unit_test.hpp:19:0,\n                 from test1.cpp:2: /usr/include/boost/test/impl/debug.ipp: En la funci\u00f3n \u2018const char* boost::debug::{an\u00f3nimo}::prepare_gdb_cmnd_file(const boost::debug::dbg_startup_info&amp;)\u2019: /usr/include/boost/test/impl/debug.ipp:426:23: error: \u2018::mkstemp\u2019 no se ha declarado\n     fd_holder cmd_fd( ::mkstemp( cmd_file_name ) );\n                       ^ In file included from /usr/include/boost/test/included/unit_test.hpp:19:0,\n                 from test1.cpp:2: /usr/include/boost/test/impl/debug.ipp: En la funci\u00f3n \u2018bool boost::debug::attach_debugger(bool)\u2019: /usr/include/boost/test/impl/debug.ipp:863:34: error: \u2018::mkstemp\u2019 no se ha declarado\n     fd_holder init_done_lock_fd( ::mkstemp( init_done_lock_fn ) );\n                                  ^ In file included from /usr/include/boost/test/utils/runtime/cla/dual_name_parameter.hpp:19:0,\n                 from /usr/include/boost/test/impl/unit_test_parameters.ipp:31,\n                 from /usr/include/boost/test/included/unit_test.hpp:33,\n                 from test1.cpp:2: /usr/include/boost/test/utils/runtime/config.hpp: En la funci\u00f3n \u2018void boost::runtime::putenv_impl(boost::runtime::cstring, boost::runtime::cstring)\u2019: /usr/include/boost/test/utils/runtime/config.hpp:95:51: error: \u2018putenv\u2019 no se declar\u00f3 en este \u00e1mbito\n     putenv( const_cast&lt;char*&gt;( fs.str().c_str() ) );\n</code></pre>\n\n<p>(The compiler is in spanish) </p>\n\n<p>I'm using:</p>\n\n<ul>\n<li><p>Cygwin 64 bits</p></li>\n<li><p>Cygwin's Boost 1.59</p></li>\n<li><p>Cygwin's G++ 4.9.3</p></li>\n</ul>\n\n<p>Any help will be welcome. Thanks.\nJos\u00e9.-</p>\n"}, {"tags": ["c++", "c++11", "visual-studio-2013", "internal-compiler-error"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1442424125, "post_id": 32614636, "comment_id": 53080588, "body": "MSVC has issues with Expression SFINAE. Code looks fine to me."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1442424199, "post_id": 32614636, "comment_id": 53080625, "body": "<a href=\"http://blogs.msdn.com/b/vcblog/archive/2015/04/29/c-11-14-17-features-in-vs-2015-rc.aspx\" rel=\"nofollow noreferrer\">blogs.msdn.com/b/vcblog/archive/2015/04/29/&hellip;</a>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1442424333, "post_id": 32614636, "comment_id": 53080690, "body": "An ICE is never ok, it should reject the code if it believes the code is erroneous. Also, the code compiles with VS 2015."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1442424667, "post_id": 32614636, "comment_id": 53080853, "body": "@Barry Thanks for the sanity check. It seemed highly improbable, but I wasn&#39;t sure."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1442424760, "post_id": 32614636, "comment_id": 53080907, "body": "A language lawyer can&#39;t help you here. SFINAE for class template specializations is underspecified. See <a href=\"http://wg21.link/cwg2054\" rel=\"nofollow noreferrer\">CWG 2054</a>."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1442424860, "post_id": 32614636, "comment_id": 53080955, "body": "@T.C. Oh, darn. I suppose it&#39;s time to troll through the MSVC 2013 implementation of <code>is_constructible</code> then. I suppose it&#39;s a case of &quot;Ambiguous, but not a sane response to said ambiguity&quot; then."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1442432568, "post_id": 32614636, "comment_id": 53085316, "body": "It is not particularly important if other compilers accept some code or not, if you get internal compiler error, it&#39;s ALWAYS a compiler bug. We can then discuss whether the code is valid or not when the compiler gives an error message, but if it causes the compiler to completely bail out, it&#39;s a bug in the compiler. It should either produce an error or accept the code. If the behavious is undefined, the compiler is then allowed to produce code that crashes, fires missiled, returns 7, or behaves &quot;in some way that you expect&quot; - up to compiler to decide..."}], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1442423100, "creation_date": 1442423100, "last_edit_date": 1495541243, "question_id": 32614636, "link": "https://stackoverflow.com/questions/32614636/msvc-ice-when-partially-specializing-a-class-template-with-a-decltype-of-a-void", "title": "MSVC ICE when partially specializing a class template with a decltype of a void-cast expression?", "body": "<p><strong>Summary:</strong> is MSVC 2013 right to reject this MCVE following segment of code, even if it does do so in a less than desirable way?</p>\n\n<ul>\n<li>MSVC 2013, Update 5</li>\n<li>GCC 5.2.0</li>\n<li>Clang 3.7.0</li>\n</ul>\n\n<p>While attempting to create a type trait for checking the validity of brace constructing one type from a single other type</p>\n\n<pre><code>B b;\nA{b}; // &lt;-- whether this line would be valid code\n</code></pre>\n\n<p>which works in MSVC2013 by adapting code from <a href=\"https://stackoverflow.com/a/29251402/4892076\">this answer</a> in an attempt to work around MSVC's lack of expression SFINAE support. I have been receiving: </p>\n\n<blockquote>\n  <p>error C1001: An internal error has occurred in the compiler.  </p>\n</blockquote>\n\n<p>with the location</p>\n\n<blockquote>\n  <p>compiler file 'f:\\dd\\vctools\\compiler\\cxxfe\\sl\\p1\\c\\cast.c', line 725</p>\n</blockquote>\n\n<p>The MCVE below triggers this ICE, even under /Od:</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename Type, typename Arg, typename = void&gt;\nstruct isBraceConsructibleImpl\n    : public std::false_type{};\n\ntemplate &lt;typename Type, typename Arg&gt;\nstruct isBraceConsructibleImpl&lt;Type, Arg, decltype((void)Type{ std::declval&lt;Arg&gt;() }) &gt;\n    : public std::true_type{};\n\nint main(int, char**){}\n</code></pre>\n\n<p>As can be seen on <a href=\"http://coliru.stacked-crooked.com/a/676a94cbdf435fb9\" rel=\"nofollow noreferrer\">coliru</a>, gcc and clang are both fine with this (even under -O2). However, while an ICE is most certainly a bug in MSVC, the acceptance of said code by both gcc and clang is no guarantee that it is valid code in the end.  </p>\n\n<p>Removing the <code>Arg</code> from the template and replacing the <code>Arg</code> in the declval with <code>int</code> does not reproduce the error:  </p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename Type, typename = void&gt;\nstruct isBraceConsructibleImpl\n    : public std::false_type{};\n\ntemplate &lt;typename Type&gt;\nstruct isBraceConsructibleImpl&lt;Type, decltype((void)Type{ std::declval&lt;int&gt;() }) &gt;\n    : public std::true_type{};\n\nint main(int, char**){}\n</code></pre>\n\n<p>and gcc and clang are <a href=\"http://coliru.stacked-crooked.com/a/c700d7f276a1e5ed\" rel=\"nofollow noreferrer\">once again fine with it</a>.</p>\n\n<p><strong>Is MSVC is producing an ICE from valid code?</strong></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1442423669, "post_id": 32614626, "comment_id": 53080339, "body": "This is not a debugging service. What do you mean your erase is &quot;not working&quot;? Also format your code."}, {"owner": {"reputation": 1190, "user_id": 1879042, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Vul6p.jpg?s=128&g=1", "display_name": "Anton Samsonov", "link": "https://stackoverflow.com/users/1879042/anton-samsonov"}, "edited": false, "score": 1, "creation_date": 1442423928, "post_id": 32614626, "comment_id": 53080483, "body": "First of all, your <code>v</code> counter in <code>for</code> loop shadows <code>v</code> vector on function level; that is why <code>v.erase</code> is not accessible. Second, if you are allowed to use another container to detect duplicates, then why not just export the entire <code>std::vector&lt;int&gt;</code> into a <code>std::set&lt;int&gt;</code> while watching the result of each insertion, and adding all detected duplicated to yet another <code>std::set&lt;int&gt;</code>, and finally exporting the first set back to <code>std::vector&lt;int&gt;</code> except values in second <code>std::set&lt;int&gt;</code>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1442424271, "post_id": 32614626, "comment_id": 53080661, "body": "You&#39;re not using the <i>STL</i>, I removed the tag. Read the <a href=\"http://stackoverflow.com/tags/stl/info\">tag wiki</a> of <a href=\"https://stackoverflow.com/questions/tagged/stl\">stl</a>, it&#39;s not referring to what you think it actually is!"}], "answers": [{"comments": [{"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 0, "creation_date": 1442437287, "post_id": 32615140, "comment_id": 53087822, "body": "where is this other variable with the same name ?"}], "tags": [], "owner": {"reputation": 91, "user_id": 4975278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e443bc21762359df0d5e895331dea5d7?s=128&d=identicon&r=PG&f=1", "display_name": "Alvarey", "link": "https://stackoverflow.com/users/4975278/alvarey"}, "is_accepted": false, "score": 1, "last_activity_date": 1442424875, "creation_date": 1442424875, "answer_id": 32615140, "question_id": 32614626, "link": "https://stackoverflow.com/questions/32614626/remove-all-duplicate-values-from-a-vector/32615140#32615140", "title": "Remove all duplicate values from a vector?", "body": "<p>Your problem is that you define two variables with name v.</p>\n\n<pre><code>vector&lt;int&gt;v;\nfor(int v=0...\n</code></pre>\n\n<p>So you basically hide your vector with an int and the compiler tries to call erase() for int, which gives you error.</p>\n\n<p>Just change the name of one of these variables.</p>\n"}], "owner": {"reputation": 47, "user_id": 4784635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7943bf10ade4f014ad32c8d174261291?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/4784635/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1442439743, "creation_date": 1442423062, "last_edit_date": 1442439743, "question_id": 32614626, "link": "https://stackoverflow.com/questions/32614626/remove-all-duplicate-values-from-a-vector", "title": "Remove all duplicate values from a vector?", "body": "<p>Input: </p>\n\n<pre><code>1 1 2 2 3  \n</code></pre>\n\n<p>Desired Output: </p>\n\n<pre><code>3  \n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstring&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cassert&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n   vector&lt;int&gt; v;\n   vector&lt;int&gt;::iterator it;\n   // input variables\n   int input, a, arr[10000];\n   // input \n   cin &gt;&gt; input;\n   // comment all your loops, etc\n   for(int i = 0; i &lt; input ; i++){\n       cin &gt;&gt; a;\n       arr[i] = a;\n       v.push_back(a);\n   }\n\n   for(int j = 0; j &lt; input; j++){\n      int ch1 = arr[j];\n      for(int i = 0;i &lt; input; i++){\n         if(i == j){\n         }\n         else{\n            if(ch1 == arr[i]){\n            v.erase(std::remove(v.begin(), v.end(), ch1),v.end());\n            }\n            else{\n            }\n         }\n      }\n   }\n\n   for(it = v.begin(); it != v.end(); it++){\n       cout &lt;&lt; *it;\n   }\n\n  return 0;\n}\n</code></pre>\n\n<p><code>erase()</code> is not working here. </p>\n\n<p>How can I solve this problem?</p>\n"}, {"tags": ["c++", "iterator", "listiterator"], "comments": [{"owner": {"reputation": 2084, "user_id": 4436434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76Myg.png?s=128&g=1", "display_name": "BrunoLevy", "link": "https://stackoverflow.com/users/4436434/brunolevy"}, "edited": false, "score": 2, "creation_date": 1442423229, "post_id": 32614582, "comment_id": 53080078, "body": "The way standard libraries (like the STL) are designed is to have functions that take a couple of iterators as an argument: void f(list&lt;int&gt;::iterator begin, list&lt;int&gt;::iterator end) (I do not think you can avoid passing either &#39;end&#39; or the list as an argument)."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 4481962, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/974284749280335/picture?type=large", "display_name": "dani1999", "link": "https://stackoverflow.com/users/4481962/dani1999"}, "edited": false, "score": 0, "creation_date": 1442423377, "post_id": 32614679, "comment_id": 53080164, "body": "that i know to do but i need send only 1 iterator that point on begin"}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "reply_to_user": {"reputation": 93, "user_id": 4481962, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/974284749280335/picture?type=large", "display_name": "dani1999", "link": "https://stackoverflow.com/users/4481962/dani1999"}, "edited": false, "score": 1, "creation_date": 1442423522, "post_id": 32614679, "comment_id": 53080259, "body": "@dani1999 There is no way to know where the end of the list is if you only pass one iterator to your function. You need to either pass a pair of iterators, an iterator and a count, or a reference to the list itself."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "reply_to_user": {"reputation": 93, "user_id": 4481962, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/974284749280335/picture?type=large", "display_name": "dani1999", "link": "https://stackoverflow.com/users/4481962/dani1999"}, "edited": false, "score": 0, "creation_date": 1442424040, "post_id": 32614679, "comment_id": 53080531, "body": "@dani1999 so your requirements are impossible?"}, {"owner": {"reputation": 93, "user_id": 4481962, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/974284749280335/picture?type=large", "display_name": "dani1999", "link": "https://stackoverflow.com/users/4481962/dani1999"}, "edited": false, "score": 0, "creation_date": 1442424518, "post_id": 32614679, "comment_id": 53080772, "body": "i dont know i still check"}], "tags": [], "owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "is_accepted": false, "score": 2, "last_activity_date": 1442423264, "creation_date": 1442423264, "answer_id": 32614679, "question_id": 32614582, "link": "https://stackoverflow.com/questions/32614582/how-can-i-check-if-the-iterator-come-to-the-end-of-list/32614679#32614679", "title": "how can i check if the iterator come to the end of list?", "body": "<p>You need to pass a pair of iterators, one to the beginning and the other to the end of your list:</p>\n\n<pre><code>void f(list&lt;int&gt;::iterator first, list&lt;int&gt;::iterator last) {\n    for (; first != last; ++first) {\n        cout &lt;&lt; *first;\n    }\n}\n\n// In main()\nf(begin(mylist), end(mylist));\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4481962, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/974284749280335/picture?type=large", "display_name": "dani1999", "link": "https://stackoverflow.com/users/4481962/dani1999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1442423885, "creation_date": 1442422897, "last_edit_date": 1442423885, "question_id": 32614582, "link": "https://stackoverflow.com/questions/32614582/how-can-i-check-if-the-iterator-come-to-the-end-of-list", "title": "how can i check if the iterator come to the end of list?", "body": "<p>i have this code:\nand i want on the function run on all over the list and print it</p>\n\n<p>but i don't want to send the list to the function</p>\n\n<p>i want to send only the iterator</p>\n\n<p>but the problem it the on the \"for\" i cant do </p>\n\n<pre><code>it_mylist != it_mylist.end()\n</code></pre>\n\n<p>what can i do please?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n#include &lt;list&gt;\n\nvoid f(list&lt;int&gt;::iterator it_mylist)\n{       \n    for (; it_mylist != it_mylist.end(); ++it_mylist)\n    {\n        cout &lt;&lt; *it_mylist;\n    }  \n}\nvoid main()\n{   \n    list&lt;int&gt; mylist;\n    mylist.push_front(1); mylist.push_front(2); mylist.push_front(3); \n\n    list&lt;int&gt;::iterator it_mylist = mylist.begin();\n    f(it_mylist);  \n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 1, "creation_date": 1442422995, "post_id": 32614477, "comment_id": 53079941, "body": "I don&#39;t understand your question. What do you mean by &#39;scripts&#39;? C++ is a compiled language, not a scripting language. I&#39;m not familiar with codeblocks, can you describe how &quot;one would use codeblocks&quot; and perhaps people familiar with Visual Studio can help you achieve the same thing."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1442423104, "post_id": 32614477, "comment_id": 53080001, "body": "I guess OP wants to just write/open a cpp file and the make a runnable program with one click. This isn&#39;t how VS works."}, {"owner": {"reputation": 179, "user_id": 3952909, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e794a01e954cfa0840dcdbb19109b3d5?s=128&d=identicon&r=PG&f=1", "display_name": "Tomer8009", "link": "https://stackoverflow.com/users/3952909/tomer8009"}, "edited": false, "score": 0, "creation_date": 1442423436, "post_id": 32614477, "comment_id": 53080208, "body": "Deviantfan - true, that&#39;s exactly what I want, I guess I will just not use visual studio until I&#39;m going to make something bigger than a single script"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1442423472, "post_id": 32614477, "comment_id": 53080231, "body": "They are not &quot;scripts&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 4975, "user_id": 3994425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f3f6d003abc63fb417f1c209d08b66?s=128&d=identicon&r=PG&f=1", "display_name": "Eldar Dordzhiev", "link": "https://stackoverflow.com/users/3994425/eldar-dordzhiev"}, "is_accepted": true, "score": 0, "last_activity_date": 1442423253, "creation_date": 1442423253, "answer_id": 32614676, "question_id": 32614477, "link": "https://stackoverflow.com/questions/32614477/how-can-one-use-visual-studio-for-a-single-script-instead-for-a-whole-project-c/32614676#32614676", "title": "How can one use Visual Studio for a single script instead for a whole project? C++", "body": "<p>1) Create an empty project (<code>New -&gt; Project -&gt; Visual C++ -&gt; General -&gt; Empty project</code>).</p>\n\n<p>2) Right click your project in the <code>Solution Explorer</code> and add a new file (<code>Add -&gt; New Item -&gt; C++ File</code> and name it somehow (I always name it as <code>main.cpp</code>)</p>\n\n<p>3) Double click the file and here you go!</p>\n"}, {"comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 2, "creation_date": 1442423634, "post_id": 32614700, "comment_id": 53080321, "body": "...and it violates your own requirement of &quot;no project creation&quot;"}, {"owner": {"reputation": 4975, "user_id": 3994425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f3f6d003abc63fb417f1c209d08b66?s=128&d=identicon&r=PG&f=1", "display_name": "Eldar Dordzhiev", "link": "https://stackoverflow.com/users/3994425/eldar-dordzhiev"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1442423653, "post_id": 32614700, "comment_id": 53080331, "body": "@crashmstr It will compile the code. Do not confuse empty projects with empty solutions."}], "tags": [], "owner": {"reputation": 179, "user_id": 3952909, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e794a01e954cfa0840dcdbb19109b3d5?s=128&d=identicon&r=PG&f=1", "display_name": "Tomer8009", "link": "https://stackoverflow.com/users/3952909/tomer8009"}, "is_accepted": false, "score": -1, "last_activity_date": 1442423364, "creation_date": 1442423364, "answer_id": 32614700, "question_id": 32614477, "link": "https://stackoverflow.com/questions/32614477/how-can-one-use-visual-studio-for-a-single-script-instead-for-a-whole-project-c/32614700#32614700", "title": "How can one use Visual Studio for a single script instead for a whole project? C++", "body": "<p>I found the way, sorry for the dumb question.\nan answer in case somebody googles it - you need to open an empty project, and than in the project explorer menu right click and than click add, than add cpp file.</p>\n"}], "owner": {"reputation": 179, "user_id": 3952909, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e794a01e954cfa0840dcdbb19109b3d5?s=128&d=identicon&r=PG&f=1", "display_name": "Tomer8009", "link": "https://stackoverflow.com/users/3952909/tomer8009"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1442424643, "accepted_answer_id": 32614676, "answer_count": 2, "score": -1, "last_activity_date": 1442423364, "creation_date": 1442422560, "last_edit_date": 1442422926, "question_id": 32614477, "link": "https://stackoverflow.com/questions/32614477/how-can-one-use-visual-studio-for-a-single-script-instead-for-a-whole-project-c", "closed_reason": "Duplicate", "title": "How can one use Visual Studio for a single script instead for a whole project? C++", "body": "<p>I tried Visual Studio before, and really liked the looks and professionalism it has to it, and wanted to continue using it, but it turned out to be a big annoyance to study with, as I had to create a project and a program to test my scripts, so I left it.\n!but! today I saw this <a href=\"https://www.youtube.com/watch?v=FuK3Erbqofc\" rel=\"nofollow\">tutorial</a> and the guy in the video used Visual Studio like one would use codeblocks - how did he do it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4996, "user_id": 462639, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7019183695a9fbd1208d5f6e5fbc1794?s=128&d=identicon&r=PG", "display_name": "demonplus", "link": "https://stackoverflow.com/users/462639/demonplus"}, "edited": false, "score": 3, "creation_date": 1442422637, "post_id": 32614441, "comment_id": 53079746, "body": "Why do you start i and j from 1 and not from 0?"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1442422703, "post_id": 32614441, "comment_id": 53079774, "body": "<b>Try something simpler.</b> Print a row, not a whole pyramid. When that doesn&#39;t work, try printing numbers. When that doesn&#39;t work, look carefully at your <code>for</code> loop, and fix it."}, {"owner": {"reputation": 325, "user_id": 4523440, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1824a659899baa0c57cf0fe02ee9ed0e?s=128&d=identicon&r=PG&f=1", "display_name": "gloriousCatnip", "link": "https://stackoverflow.com/users/4523440/gloriouscatnip"}, "edited": false, "score": 0, "creation_date": 1442429657, "post_id": 32614441, "comment_id": 53083694, "body": "Now that I think about it, I really can&#39;t recall why I started with 1. I think it had something to do with the fact that I thought it would print an empty space, for some bizzare reason. I do know that computers count from the 0th index, btw."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1442423276, "post_id": 32614525, "comment_id": 53080108, "body": "Actually this not enough, second loop would print n-1 asterisks."}, {"owner": {"reputation": 325, "user_id": 4523440, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1824a659899baa0c57cf0fe02ee9ed0e?s=128&d=identicon&r=PG&f=1", "display_name": "gloriousCatnip", "link": "https://stackoverflow.com/users/4523440/gloriouscatnip"}, "edited": false, "score": 0, "creation_date": 1442424062, "post_id": 32614525, "comment_id": 53080547, "body": "Thank you so, so much! I have only programmed in C# and some higher-level languages (I have fiddled with js, python, ruby and so on), but I feel more comfortable with lower level programming languages."}], "tags": [], "owner": {"reputation": 4975, "user_id": 3994425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f3f6d003abc63fb417f1c209d08b66?s=128&d=identicon&r=PG&f=1", "display_name": "Eldar Dordzhiev", "link": "https://stackoverflow.com/users/3994425/eldar-dordzhiev"}, "is_accepted": true, "score": 2, "last_activity_date": 1442423449, "last_edit_date": 1442423449, "creation_date": 1442422736, "answer_id": 32614525, "question_id": 32614441, "link": "https://stackoverflow.com/questions/32614441/making-a-program-in-c-that-will-produce-a-triangle-with-stars-but-the-result/32614525#32614525", "title": "Making a program in c++ that will produce a triangle with stars, but the result is always 2 numbers off", "body": "<p>1) The loop <code>for (int i = 1; i &lt; len; i++)</code> iterates <code>len - 1</code> times. <code>i</code> have values in the range of <code>[1; len - 1]</code>.</p>\n\n<p>2) The loop <code>for (int j = 1; j &lt; i; ++j)</code> iterates <code>j - 1</code> times. <code>j</code> have values in the range of <code>[1; i - 1]</code>.</p>\n\n<p>That's why these function prints less asteriks. C style loops are tricky and are more powerful in comparison to, for example, Pascal loops. In order to fix that you need by initializing <code>i</code> and <code>j</code> with <code>0</code> or by replacing <code>&lt;</code> with <code>&lt;=</code>:</p>\n\n<pre><code>int makePyramid(int len=1) {\n    // A pyramid (or triangle) can not consist of less than 1 length.\n    if(len &lt; 1) {\n        cout &lt;&lt; \"does not make sense\" &lt;&lt; endl;\n    }\n    else {\n        // Go through the length\n        for(int i = 0; i &lt; len; ++i) {\n            // Make one star for each number in the last loop\n            for(int j = 0; j &lt;= i; ++j) {\n                cout &lt;&lt; \"*\";\n            }\n            // Makes a new line after the second loop is through\n            cout &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1442423189, "last_edit_date": 1442423189, "creation_date": 1442422787, "answer_id": 32614550, "question_id": 32614441, "link": "https://stackoverflow.com/questions/32614441/making-a-program-in-c-that-will-produce-a-triangle-with-stars-but-the-result/32614550#32614550", "title": "Making a program in c++ that will produce a triangle with stars, but the result is always 2 numbers off", "body": "<p>First loop you should either start from 0 or change condition to &lt;=</p>\n\n<pre><code>for( int i = 0; i &lt; len; ++i )\n</code></pre>\n\n<p>or this</p>\n\n<pre><code>for( int i = 1; i &lt;= len; ++i )\n</code></pre>\n\n<p>Though first one is more usual for C++ as commonly used to iterate over array indexes (from 0 to N-1). In your case it is irrelevant.</p>\n\n<p>In the second loop you have to change condition to <code>&lt;=</code> and start from the same number as i, so either:</p>\n\n<pre><code> for( int i = 0; i &lt; len; ++i )\n     for( int j = 0; j &lt;= i; ++j )\n</code></pre>\n\n<p>or</p>\n\n<pre><code> for( int i = 1; i &lt;= len; ++i )\n     for( int j = 1; j &lt;= i; ++j )\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 4523440, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1824a659899baa0c57cf0fe02ee9ed0e?s=128&d=identicon&r=PG&f=1", "display_name": "gloriousCatnip", "link": "https://stackoverflow.com/users/4523440/gloriouscatnip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1183, "favorite_count": 0, "accepted_answer_id": 32614525, "answer_count": 2, "score": 0, "last_activity_date": 1442423449, "creation_date": 1442422413, "last_edit_date": 1442422741, "question_id": 32614441, "link": "https://stackoverflow.com/questions/32614441/making-a-program-in-c-that-will-produce-a-triangle-with-stars-but-the-result", "title": "Making a program in c++ that will produce a triangle with stars, but the result is always 2 numbers off", "body": "<p>I am currently making a program that outputs a little triangle made off of stars (or asterisks) in c++, and I am facing some problems.</p>\n\n<p>It seems as though whenever I write something to the function, the compiler interprets it as that number, minus two - something I find very strange.</p>\n\n<pre><code>int makePyramid(int len=1) {\n    // A pyramid (or triangle) can not consist of less than 1 length.\n    if(len &lt; 1) {\n        cout &lt;&lt; \"does not make sense\" &lt;&lt; endl;\n    }\n    else {\n        // Go through the length\n        for(int i = 1; i &lt; len; ++i) {\n            // Make one star for each number in the last loop\n            for(int j = 1; j &lt; i; ++j) {\n                cout &lt;&lt; \"*\";\n            }\n            // Makes a new line after the second loop is through\n            cout &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n\n<p>Here is the function in question. As you can see, it should work - the first loop goes through the whole number and then goes to the next loop which prints one asterisks depending on the value of the number, and then it outputs a new line so it can get started on the next set of asterisks.</p>\n\n<p>Keep in mind that I am pretty new to C++, and I am using minGW in cmd (Windows 10) to compile the code.</p>\n"}, {"tags": ["c++", "dynamic-memory-allocation", "pointer-to-pointer", "pointer-to-array"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1442424202, "post_id": 32614424, "comment_id": 53080629, "body": "Removed <code>dynamic-arrays</code> tag: tag explicitly states that is is about data structures where elements can be added  or removed without explicity memory allocation."}, {"owner": {"reputation": 75, "user_id": 5241471, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb096a3f5b1163f3f8236595f2d9e1?s=128&d=identicon&r=PG", "display_name": "user5241471", "link": "https://stackoverflow.com/users/5241471/user5241471"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1442453766, "post_id": 32614424, "comment_id": 53092821, "body": "Thanks for the edit :-)"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 5241471, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb096a3f5b1163f3f8236595f2d9e1?s=128&d=identicon&r=PG", "display_name": "user5241471", "link": "https://stackoverflow.com/users/5241471/user5241471"}, "edited": false, "score": 0, "creation_date": 1442423255, "post_id": 32614621, "comment_id": 53080092, "body": "How to deallocate all the dynamically allocated memory?"}, {"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 1, "creation_date": 1442423278, "post_id": 32614621, "comment_id": 53080109, "body": "This code leaks if any but the first of the <code>new[]</code> expressions throw an exception (hence downvote until fixed). To fix this, use <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code> instead."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "reply_to_user": {"reputation": 75, "user_id": 5241471, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb096a3f5b1163f3f8236595f2d9e1?s=128&d=identicon&r=PG", "display_name": "user5241471", "link": "https://stackoverflow.com/users/5241471/user5241471"}, "edited": false, "score": 0, "creation_date": 1442423450, "post_id": 32614621, "comment_id": 53080217, "body": "@user5241471: First iterate, calling <code>delete[] my_array[i];</code>. Then <code>delete[] my_array</code>."}, {"owner": {"reputation": 75, "user_id": 5241471, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb096a3f5b1163f3f8236595f2d9e1?s=128&d=identicon&r=PG", "display_name": "user5241471", "link": "https://stackoverflow.com/users/5241471/user5241471"}, "edited": false, "score": 0, "creation_date": 1442423544, "post_id": 32614621, "comment_id": 53080272, "body": "In opposite direction, why?"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "reply_to_user": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 2, "creation_date": 1442423579, "post_id": 32614621, "comment_id": 53080292, "body": "@elyse: Point taken, but I don&#39;t want to throw exception handling (no pun intended) at a beginner who&#39;s still struggling with arrays."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "reply_to_user": {"reputation": 75, "user_id": 5241471, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb096a3f5b1163f3f8236595f2d9e1?s=128&d=identicon&r=PG", "display_name": "user5241471", "link": "https://stackoverflow.com/users/5241471/user5241471"}, "edited": false, "score": 0, "creation_date": 1442423601, "post_id": 32614621, "comment_id": 53080308, "body": "@user5241471: Try it with pencil and paper, and you&#39;ll see."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 1, "creation_date": 1442424410, "post_id": 32614621, "comment_id": 53080723, "body": "When you answer people&#39;s questions, you&#39;re supposed to <i>help</i> them, not just make things worse."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 1, "creation_date": 1442424843, "post_id": 32614621, "comment_id": 53080942, "body": "And this is making things tremendously worse. You&#39;re being lazy by not even addressing the problem. Which <i>you</i> have to address because you didn&#39;t re-use somebody else&#39;s solution. This code has crippling safety problems and should never be used by anybody, least of all a beginner who could never hope to address them competently."}, {"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 0, "creation_date": 1442429191, "post_id": 32614621, "comment_id": 53083435, "body": "@Beta why throw <code>new[]</code> at them instead of <code>std::vector</code>, then? <code>new[]</code> is not for beginners, and almost never used by good experienced C++ programmers."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "reply_to_user": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 0, "creation_date": 1442435180, "post_id": 32614621, "comment_id": 53086771, "body": "@elyse: Do I really have to point out that the question was about <code>new[]</code>? I know that some people prefer to teach beginners about the standard containers <i>instead of</i> dynamic structures; I prefer to teach them about dynamic structures <i>before</i> the standard containers (in the same way I&#39;d prefer to teach someone about fire before the internal combustion engine)."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1442438896, "post_id": 32614621, "comment_id": 53088647, "body": "@Beta: Except the ICE comes pre-packaged so they don&#39;t need to do anything to make it work safely, and all they can do with fire is set themselves on fire."}], "tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": true, "score": 3, "last_activity_date": 1442423049, "creation_date": 1442423049, "answer_id": 32614621, "question_id": 32614424, "link": "https://stackoverflow.com/questions/32614424/what-value-does-a-pointer-to-pointer-get-assigned-when-points-to-a-dynamically-a/32614621#32614621", "title": "What value does a pointer to pointer get assigned when points to a dynamically allocated memory?", "body": "<p>We assign to <code>my_array</code> the address of an array. The array contains pointers which can point to other arrays, but don't yet.</p>\n\n<p>Yes, we can do this:</p>\n\n<pre><code>int **my_array = new int*[10];\n\nfor(int i=0; i&lt;10; ++i)\n  my_array[i] = new int[13];\n\nmy_array[2][11] = 500;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 5241471, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb096a3f5b1163f3f8236595f2d9e1?s=128&d=identicon&r=PG", "display_name": "user5241471", "link": "https://stackoverflow.com/users/5241471/user5241471"}, "edited": false, "score": 0, "creation_date": 1442453690, "post_id": 32614855, "comment_id": 53092799, "body": "I am not introduced to std::vector yet. Thanks for the answer."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1442423901, "creation_date": 1442423901, "answer_id": 32614855, "question_id": 32614424, "link": "https://stackoverflow.com/questions/32614424/what-value-does-a-pointer-to-pointer-get-assigned-when-points-to-a-dynamically-a/32614855#32614855", "title": "What value does a pointer to pointer get assigned when points to a dynamically allocated memory?", "body": "<blockquote>\n  <p>What do we assign to <code>my_array</code> here?</p>\n</blockquote>\n\n<p>You can assign an <code>int*</code> to the elements of <code>my_array</code>. E.g.</p>\n\n<pre><code>my_array[0] = new int[20];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int i;\nmy_array[0] = &amp;i;\n</code></pre>\n\n<blockquote>\n  <p><code>my_array</code> is a pointer that points to what? </p>\n</blockquote>\n\n<p>It points to an an array of 10 <code>int*</code> objects.</p>\n\n<blockquote>\n  <p>Is there any way to iterate through <code>my_array</code> (the pointer) and set up a two-dimensional array of integers (and not int*)?</p>\n</blockquote>\n\n<p>Not sure what you are expecting to see here. An element of <code>my_array</code> can only be an <code>int*</code>. </p>\n\n<p>If you want <code>my_array</code> to be a pointer to a 2D array, you may use:</p>\n\n<pre><code>int (*my_array)[20] = new int[10][20];\n</code></pre>\n\n<p>Now you can use <code>my_array[0][0]</code> through <code>my_array[9][19]</code>.</p>\n\n<p><strong>PS</strong> If this is your attempt to understand pointers and arrays, it's all good. If you are trying to deploy this code in a working program, don't use raw arrays any more. Use <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>std::vector</code></a> or <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow\"><code>std::array</code></a>.</p>\n\n<p>For a 1D array, use:</p>\n\n<pre><code>// A 1D array with 10 elements.\nstd::vector&lt;int&gt; arr1(10);\n</code></pre>\n\n<p>For a 2D array, use:</p>\n\n<pre><code>// A 2D array with 10x20 elements.\nstd::vector&lt;std::vector&lt;int&gt;&gt; arr2(10, std::vector&lt;int&gt;(20)); \n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5241471, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb096a3f5b1163f3f8236595f2d9e1?s=128&d=identicon&r=PG", "display_name": "user5241471", "link": "https://stackoverflow.com/users/5241471/user5241471"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 32614621, "answer_count": 2, "score": 1, "last_activity_date": 1442424132, "creation_date": 1442422365, "last_edit_date": 1442424132, "question_id": 32614424, "link": "https://stackoverflow.com/questions/32614424/what-value-does-a-pointer-to-pointer-get-assigned-when-points-to-a-dynamically-a", "title": "What value does a pointer to pointer get assigned when points to a dynamically allocated memory?", "body": "<p>Consider the following case:</p>\n\n<pre><code>int **my_array = new int*[10];\n</code></pre>\n\n<ol>\n<li>What do we assign to my_array here?</li>\n<li><code>my_array</code> is a pointer that points to what?</li>\n<li>Is there any way to iterate through my_array (the pointer) and set up a two-dimensional array of integers (and not int*)?</li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1442422325, "post_id": 32614340, "comment_id": 53079555, "body": "They are two definitions of the same function (<code>int func(int)</code>), as explained in the paragraph you quoted. There&#39;s no way around that."}, {"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 1, "creation_date": 1442422341, "post_id": 32614340, "comment_id": 53079565, "body": "What are you trying to do? You are passing by value, so you won&#39;t change the original value in either case. You are just saying that the temporary value copied into the function won&#39;t change in the function. The caller would have no way to determine which one to call."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1442422738, "post_id": 32614340, "comment_id": 53079796, "body": "What part of &quot;although the parameter is a const inside the function, the compiler otherwise treats the definition [...] as if we had defined the parameter as a plain in&quot; is it that is unclear?"}], "answers": [{"tags": [], "owner": {"reputation": 2084, "user_id": 4436434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76Myg.png?s=128&g=1", "display_name": "BrunoLevy", "link": "https://stackoverflow.com/users/4436434/brunolevy"}, "is_accepted": true, "score": 1, "last_activity_date": 1442422634, "creation_date": 1442422634, "answer_id": 32614500, "question_id": 32614340, "link": "https://stackoverflow.com/questions/32614340/i-want-to-know-distinction-between-functions-taking-const-or-nonconst-parameters/32614500#32614500", "title": "I want to know distinction between functions taking const or nonconst parameters", "body": "<p>Parameter passed by value (like your int) are copied onto the stack,\nthen if your function takes a 'const int' as an argument, it does not change what can be done from outside the function (it justs forbids you from changing the value inside the function). Since the parameter is copied, a function that takes an int as an argument can be called on a const int (it will not modify the argument since it gets a copy).</p>\n\n<p>Since there is no difference 'seen from outside' of the function between the one that takes an int and a const int, there would be no reason for the compiler to choose one version or the other, this is why the C++ norm states that it is the same function.</p>\n\n<p>Now if you have a function that takes a reference f(int &amp;) and another one that takes a const reference f(const int&amp;), it is another story: then only the second one can be called with a const int argument like in:</p>\n\n<pre><code>const int x=5;\nf(x);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 5258801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a620080d2c729b24ad0559f4126ad22e?s=128&d=identicon&r=PG&f=1", "display_name": "AguThadeus", "link": "https://stackoverflow.com/users/5258801/aguthadeus"}, "is_accepted": false, "score": -1, "last_activity_date": 1442422835, "creation_date": 1442422835, "answer_id": 32614561, "question_id": 32614340, "link": "https://stackoverflow.com/questions/32614340/i-want-to-know-distinction-between-functions-taking-const-or-nonconst-parameters/32614561#32614561", "title": "I want to know distinction between functions taking const or nonconst parameters", "body": "<p>const just modifies how you access your variable it doesn't change its data type, as far as the compiler is concerned both of them are integers and that's how they are stored whether modifiable or not.</p>\n\n<p>The only workaround i see is to overload the function by changing the data type of your parameter, maybe long, double, byte etc..</p>\n"}], "owner": {"reputation": 5, "user_id": 5330031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f5f81ade038ebb56a3db33eda635f79?s=128&d=identicon&r=PG&f=1", "display_name": "redd", "link": "https://stackoverflow.com/users/5330031/redd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 32614500, "answer_count": 2, "score": 0, "last_activity_date": 1442422835, "creation_date": 1442422113, "question_id": 32614340, "link": "https://stackoverflow.com/questions/32614340/i-want-to-know-distinction-between-functions-taking-const-or-nonconst-parameters", "title": "I want to know distinction between functions taking const or nonconst parameters", "body": "<p>As I have seen from <code>C++ Primer,fourth edition</code>,</p>\n\n<blockquote>\n  <p><strong>\"What may be surprising, is that although the parameter is a const inside the function, the\n  compiler otherwise treats the definition of fcn as if we had defined the parameter as a plain int:\"</strong></p>\n</blockquote>\n\n<pre><code>void fcn(const int i) { /* fcn can read but not write to i */ }\n\nvoid fcn(int i) { /* ... */ } // error: redefines fcn(int)\n</code></pre>\n\n<p>So, if I want to define two functions as follows,</p>\n\n<pre><code>int func(const int i) { \n    return i;\n}\n\nint func(int i){\n    i++;\n    return i;\n}\n</code></pre>\n\n<p>Actually,they are two different functions,but when I compile it,there is a message:<code>error:redefinition of 'int func(int i)'</code>.Can I define them like this? Is there any alternative methods?</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1442422372, "post_id": 32614248, "comment_id": 53079581, "body": "I think this question is rather broad: sometimes you want a process to be greedy, but it is possible that you don&#39;t really care about the program&#39;s performance. Perhaps add a parameter to you program such that users can specify the number of threads themselves?"}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 1, "creation_date": 1442473246, "post_id": 32614248, "comment_id": 53098514, "body": "Don&#39;t forget to take a look at <code>std::async</code>. It gives you some more abstraction than raw threads. For real production code, I would use a task-based library, e.g. Intel TBB, Microsoft PPL or Apple GCD."}, {"owner": {"reputation": 473, "user_id": 3369588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5959e1f010856eb2261edcab1354a47d?s=128&d=identicon&r=PG", "display_name": "ductiletoaster", "link": "https://stackoverflow.com/users/3369588/ductiletoaster"}, "reply_to_user": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 0, "creation_date": 1442503096, "post_id": 32614248, "comment_id": 53116768, "body": "@Jens Good to know! Yeah right now this is just a little side project to get me back into C++... been messing around with multi-threading and CUDA programming. However, it is always good to think about the big picture!"}], "answers": [{"comments": [{"owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "edited": false, "score": 1, "creation_date": 1442422617, "post_id": 32614412, "comment_id": 53079735, "body": "<code>number of hardware cores - 1</code> is quite good in practice. Using all cores, most of time, is not good for the user."}, {"owner": {"reputation": 473, "user_id": 3369588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5959e1f010856eb2261edcab1354a47d?s=128&d=identicon&r=PG", "display_name": "ductiletoaster", "link": "https://stackoverflow.com/users/3369588/ductiletoaster"}, "edited": false, "score": 0, "creation_date": 1442422650, "post_id": 32614412, "comment_id": 53079755, "body": "That is a good point that it varies on the application/users needs. I like your suggestion about leaving at least one core for other work. I am assuming the OS is smart enough to know that if 8 threads are available and I &quot;allocate&quot; 6 then it will leave one core untouched?"}, {"owner": {"reputation": 12531, "user_id": 173347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dslxd.png?s=128&g=1", "display_name": "Cem Kalyoncu", "link": "https://stackoverflow.com/users/173347/cem-kalyoncu"}, "reply_to_user": {"reputation": 473, "user_id": 3369588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5959e1f010856eb2261edcab1354a47d?s=128&d=identicon&r=PG", "display_name": "ductiletoaster", "link": "https://stackoverflow.com/users/3369588/ductiletoaster"}, "edited": false, "score": 0, "creation_date": 1442422767, "post_id": 32614412, "comment_id": 53079813, "body": "@ductiletoaster Generally, both Linux and Windows swaps processing cores from time to time, for what I think to prevent overheating."}, {"owner": {"reputation": 473, "user_id": 3369588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5959e1f010856eb2261edcab1354a47d?s=128&d=identicon&r=PG", "display_name": "ductiletoaster", "link": "https://stackoverflow.com/users/3369588/ductiletoaster"}, "edited": false, "score": 0, "creation_date": 1442422838, "post_id": 32614412, "comment_id": 53079853, "body": "Also with regard to hardware_concurrency() I have other checks within the application but to simplify my example I left them out. However, it is an important point to make!"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1442450220, "post_id": 32614412, "comment_id": 53091951, "body": "When I needed to do something similar (back in the days before std::thread, so I used the OS&#39;s thread functions), I&#39;d utilize all the available cores but bump the priority down a tick to keep the computer responsive while using all the available spare CPU time.  I don&#39;t see a way to do that with std::thread, though.  (The user was able to limit the number of threads.)  Using <code>number_of_hardware_cores-1</code> fails if hardware_concurrency returns 0 or 1."}], "tags": [], "owner": {"reputation": 427, "user_id": 1283466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIHiq.jpg?s=128&g=1", "display_name": "Open Kastle", "link": "https://stackoverflow.com/users/1283466/open-kastle"}, "is_accepted": true, "score": 6, "last_activity_date": 1442422321, "creation_date": 1442422321, "answer_id": 32614412, "question_id": 32614248, "link": "https://stackoverflow.com/questions/32614248/using-all-available-threads-bad-practice/32614412#32614412", "title": "Using all available threads bad practice?", "body": "<p>I don't think there is a single correct best practice, how many cores an application should use depends on the user's preference.  There will be cases where a user wants an application to run as quickly as possible, and there will be cases where a user would prefer to multitask and not have an application bog down the machine.</p>\n\n<p>I faced a similar problem and decided to make the number of threads configurable so that the user could choose between speed and cpu resource availability.  I can think of at least one application that uses a similar configuration, so I don't think it is uncommon to let the user choose.</p>\n\n<p>If you are forced to pick for the user, I would suggest using the number of hardware cores - 1 to free up a thread for the user to perform other work on.</p>\n\n<p>Also keep in mind that <code>std::thread::hardware_concurrency()</code> is intended to be a hint and is allowed to return 0 if it can't make a determination.</p>\n"}], "owner": {"reputation": 473, "user_id": 3369588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5959e1f010856eb2261edcab1354a47d?s=128&d=identicon&r=PG", "display_name": "ductiletoaster", "link": "https://stackoverflow.com/users/3369588/ductiletoaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "accepted_answer_id": 32614412, "answer_count": 1, "score": 5, "last_activity_date": 1442422321, "creation_date": 1442421820, "question_id": 32614248, "link": "https://stackoverflow.com/questions/32614248/using-all-available-threads-bad-practice", "title": "Using all available threads bad practice?", "body": "<p>I recently started working with C++ again and wrote a simple test application that finds the best path through a matrix of integer values. To improve the performance of this application I implemented multi-threading using C++11 std::thread.</p>\n\n<pre><code>unsigned int threadCount = std::thread::hardware_concurrency();\nstd::vector&lt;std::thread&gt; threads;\nfor (unsigned int threadIndex = 0; threadIndex &lt; threadCount; threadIndex++) {\n        threads.push_back(std::thread(&amp;AltitudeMapPath::bestPath, this, threadCount, threadIndex));\n}\n\nfor (auto&amp; thread : threads) {\n    thread.join();\n}\n</code></pre>\n\n<p>As of right now I simply determine the total number of available threads and execute my test for each thread. This has worked fantastic but it got me thinking... </p>\n\n<p>Is it bad practice to try and use all available threads for a given system? Beyond just this simple example do production level applications, that are multi-threaded, try to grab as many threads as they can (or as the problem will allow) or should I not be so greedy?</p>\n\n<p>Thanks, </p>\n"}, {"tags": ["c++", "templates", "constructor", "arity"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1442421830, "post_id": 32614167, "comment_id": 53079273, "body": "There are still copy constructor..."}, {"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1442421879, "post_id": 32614167, "comment_id": 53079305, "body": "@Jarod No, it and the move constructor are marked as deleted.  There is only <b>one</b> constructor available."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1442422417, "post_id": 32614167, "comment_id": 53079611, "body": "@BrianRodriguez: I mean that deleted functions are part of overload <a href=\"http://coliru.stacked-crooked.com/a/2bae194578965da1\" rel=\"nofollow noreferrer\">Demo</a>."}, {"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1442422615, "post_id": 32614167, "comment_id": 53079734, "body": "@Jarod then is this just impossible?"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1442422627, "post_id": 32614167, "comment_id": 53079739, "body": "@BrianRodriguez It&#39;s possible if the types are known."}, {"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1442422730, "post_id": 32614167, "comment_id": 53079785, "body": "@Columbo Well, the types should <i>theoretically</i> be known statically (That&#39;s how I&#39;ll be using this).  Do you mean I&#39;d have to explicitly list the types when I try to deduce them?  That&#39;d kind of defeat my goal here..."}], "answers": [{"tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 3, "last_activity_date": 1442473545, "last_edit_date": 1442473545, "creation_date": 1442425625, "answer_id": 32615347, "question_id": 32614167, "link": "https://stackoverflow.com/questions/32614167/c-how-to-get-arity-of-a-constructor/32615347#32615347", "title": "c++ How to get arity of a constructor?", "body": "<p>If we make the following assumptions:</p>\n\n<ul>\n<li>The parameters are either fixed types or (entirely unrestricted!) catch-all parameters (not e.g. <code>std::basic_string&lt;CharT&gt;</code>)</li>\n<li>The parameters are MoveConstructible</li>\n</ul>\n\n<p>, then</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n\nnamespace detail {\n    template &lt;typename Ignore&gt;\n    struct anything {\n        template &lt;typename T,\n                  typename=std::enable_if_t&lt;not std::is_same&lt;Ignore, std::decay_t&lt;T&gt;&gt;{}&gt;&gt;\n        operator T&amp;&amp;();\n    };\n\n    template &lt;typename U, typename=void, typename... args&gt;\n    struct test : test&lt;U, void, args..., anything&lt;U&gt;&gt; {};\n    template &lt;typename U, typename... args&gt;\n    struct test&lt;U, std::enable_if_t&lt;std::is_constructible&lt;U, args...&gt;{}\n                                 &amp;&amp; sizeof...(args) &lt; 32&gt;, args...&gt;\n        : std::integral_constant&lt;std::size_t, sizeof...(args)&gt; {};\n    template &lt;typename U, typename... args&gt;\n    struct test&lt;U, std::enable_if_t&lt;sizeof...(args) == 32&gt;, args...&gt;\n        : std::integral_constant&lt;std::size_t, (std::size_t)-1&gt; {};\n}\n\ntemplate &lt;typename U&gt;\nusing ctor_arity = detail::test&lt;U, void&gt;;\n</code></pre>\n\n<p>\u2026should work as expected. <a href=\"http://coliru.stacked-crooked.com/a/908856137a988eb8\" rel=\"nofollow\"><strong>Demo</strong></a>.<br>\nNote that the above approach is easily translatable into C++11.</p>\n"}], "owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 1, "accepted_answer_id": 32615347, "answer_count": 1, "score": 4, "last_activity_date": 1442473545, "creation_date": 1442421523, "last_edit_date": 1442422410, "question_id": 32614167, "link": "https://stackoverflow.com/questions/32614167/c-how-to-get-arity-of-a-constructor", "title": "c++ How to get arity of a constructor?", "body": "<p>Given a template parameter class <code>T</code> that has a <strong>single</strong> constructor (<em>no copy or move constructor either</em>) and <strong>zero</strong> default arguments, is there some way to find the arity of <code>T(...)</code>?</p>\n\n<p>My attempts so far</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\ntemplate &lt;typename F&gt; struct function_arity;\n\ntemplate &lt;typename R, typename... Args&gt;\nstruct function_arity&lt;R (Args...)&gt;\n    : std::integral_constant&lt;std::size_t, sizeof...(Args)&gt; {};\n\ntemplate &lt;typename R, typename... Args&gt;\nstruct function_arity&lt;R (*)(Args...)&gt; : function_arity&lt;R (Args...)&gt; {};\n\ntemplate &lt;typename R, typename... Args&gt;\nstruct function_arity&lt;R (&amp;)(Args...)&gt; : function_arity&lt;R (Args...)&gt; {};\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct function_arity&lt;R (C::*)(Args...) const&gt; : function_arity&lt;R (Args...)&gt; {};\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct function_arity&lt;R (C::*)(Args...)&gt; : function_arity&lt;R (Args...)&gt; {};\n\ntemplate &lt;typename C&gt;\nstruct function_arity : function_arity&lt;decltype(&amp;C::operator())&gt; {};\n\nstruct no_copy { no_copy() = default; no_copy(const no_copy&amp;) = delete; };\nstruct no_move { no_move() = default; no_move(no_move&amp;&amp;) = delete; };\n\nstruct A : no_copy, no_move { A(int, float) { std::cout &lt;&lt; \"A!\\n\"; }; };\nstruct B : no_copy, no_move { B(double) { std::cout &lt;&lt; \"B!\\n\"; }; };\nstruct C : no_copy, no_move { C() { std::cout &lt;&lt; \"C!\\n\"; }; };\n\nint main()\n{\n    std::cout &lt;&lt; function_arity&lt;&amp;A::A&gt;::value &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "haskell", "ffi"], "comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 4, "creation_date": 1442421541, "post_id": 32614044, "comment_id": 53079095, "body": "How long are those strings? How many of them? Aren&#39;t you able to provide a small example that reproduces the issue?"}, {"owner": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "edited": false, "score": 2, "creation_date": 1442423173, "post_id": 32614044, "comment_id": 53080045, "body": "How is your data represented to start with?"}, {"owner": {"reputation": 59, "user_id": 5343241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb30f6788bb14e5a0c3d56377e8a90b9?s=128&d=identicon&r=PG&f=1", "display_name": "ooblahman", "link": "https://stackoverflow.com/users/5343241/ooblahman"}, "edited": false, "score": 0, "creation_date": 1442453028, "post_id": 32614044, "comment_id": 53092640, "body": "It&#39;s a standard type with 5 fields, and I&#39;m converting to/from strings to pass to a database client in C. I&#39;ve additionally tried allocating all at once with mallocBytes and there seems to be just as slow. Another datapoint is that GHC&#39;s profiling indicated that ~15 GBs were being allocated for this ~100MB set of data."}, {"owner": {"reputation": 59, "user_id": 5343241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb30f6788bb14e5a0c3d56377e8a90b9?s=128&d=identicon&r=PG&f=1", "display_name": "ooblahman", "link": "https://stackoverflow.com/users/5343241/ooblahman"}, "edited": false, "score": 0, "creation_date": 1442453098, "post_id": 32614044, "comment_id": 53092653, "body": "Also tried standard marshalling with newCString (above) and using Data.Vector.Storable to store a list of Storable chars."}, {"owner": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "edited": false, "score": 2, "creation_date": 1442503166, "post_id": 32614044, "comment_id": 53116815, "body": "Well it&#39;s hard to give advice about what you should do without any code, but one thing you definitely shouldn&#39;t do is process 100MB worth of <code>String</code>s, which will already account for at least 4GB of heap allocation."}], "answers": [{"tags": [], "owner": {"reputation": 37486, "user_id": 371753, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/znFEK.jpg?s=128&g=1", "display_name": "sclv", "link": "https://stackoverflow.com/users/371753/sclv"}, "is_accepted": false, "score": 0, "last_activity_date": 1457559466, "creation_date": 1457559466, "answer_id": 35903131, "question_id": 32614044, "link": "https://stackoverflow.com/questions/32614044/haskell-ffi-memory-allocation-performance-issue/35903131#35903131", "title": "Haskell FFI memory allocation performance issue", "body": "<p>As Reid Barton said in comments, if you have 100MB of strings, your allocation will be terrible to begin with, no matter what you do with it.</p>\n\n<p>Your slowdown isn't from the FFI, its from having 100MB of strings to begin with.</p>\n"}, {"tags": [], "owner": {"reputation": 448, "user_id": 4416280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c4e7c5ba681838526fb520fc8f36dec?s=128&d=identicon&r=PG&f=1", "display_name": "Zemyla", "link": "https://stackoverflow.com/users/4416280/zemyla"}, "is_accepted": false, "score": 0, "last_activity_date": 1488681314, "creation_date": 1488681314, "answer_id": 42603823, "question_id": 32614044, "link": "https://stackoverflow.com/questions/32614044/haskell-ffi-memory-allocation-performance-issue/42603823#42603823", "title": "Haskell FFI memory allocation performance issue", "body": "<p>You will probably have to make a custom data type, using a <a href=\"http://hackage.haskell.org/package/primitive-0.6.2.0/docs/Data-Primitive-ByteArray.html#t:MutableByteArray\" rel=\"nofollow noreferrer\"><code>MutableByteArray</code></a> allocated with <a href=\"http://hackage.haskell.org/package/primitive-0.6.2.0/docs/Data-Primitive-ByteArray.html#v:newAlignedPinnedByteArray\" rel=\"nofollow noreferrer\"><code>newAlignedPinnedByteArray</code></a>, and turned into something that can be passed to C with <a href=\"http://hackage.haskell.org/package/primitive-0.6.2.0/docs/Data-Primitive-ByteArray.html#v:mutableByteArrayContents\" rel=\"nofollow noreferrer\"><code>mutableByteArrayContents</code></a>.</p>\n\n<p>The alternative, if you can rewrite the C API you're interfacing with, is to give the C function a <code>FunPtr</code> which passes it a reasonable-sized chunk of the Haskell data you're working with at a time.</p>\n"}], "owner": {"reputation": 59, "user_id": 5343241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb30f6788bb14e5a0c3d56377e8a90b9?s=128&d=identicon&r=PG&f=1", "display_name": "ooblahman", "link": "https://stackoverflow.com/users/5343241/ooblahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1488681314, "creation_date": 1442421063, "last_edit_date": 1456122779, "question_id": 32614044, "link": "https://stackoverflow.com/questions/32614044/haskell-ffi-memory-allocation-performance-issue", "title": "Haskell FFI memory allocation performance issue", "body": "<p>I'm using an FFI to C to send medium-large amounts of data (~100MB) to a C program -- just a list of strings. However, all of the methods I've used seem to take unreasonable amounts of time (~10 sec). Upon profiling, it appears to be the actual memory allocation that takes time. I've tried: </p>\n\n<ul>\n<li>sending as regular strings (<code>newCString</code>) </li>\n<li>conversion to ByteStrings (<code>unsafeUseAsCString</code>)</li>\n<li>conversion to vector of chars (<code>unsafeWith &gt;&gt;= withForeignPtr ...</code>)</li>\n</ul>\n\n<p>What is the fastest way to send data across a C FFI? </p>\n"}, {"tags": ["c++", "dll", "command-line"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1442421141, "post_id": 32613985, "comment_id": 53078840, "body": "You need to copy these <code>char*</code> pointers explicitly. <code>std::copy()</code> is suitable to do so."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1442422798, "post_id": 32613985, "comment_id": 53079834, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Wouldn&#39;t it be simply UB if the original <code>argv</code> is not long enough to store the new number of <code>wchar_t*</code>s?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1442423201, "post_id": 32613985, "comment_id": 53080062, "body": "@Rostislav It&#39;s anyway unclear what the OPs asking for here. Trying to change the originally passed <code>argc</code> <code>argv</code> parameters without a reference won&#39;t work."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1442423623, "post_id": 32613985, "comment_id": 53080314, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Yes, unless they are only used in <code>MyMethod</code> and its callees. But it seems that OP is a bit lost, so it&#39;s all a moot point :)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1442425661, "post_id": 32613985, "comment_id": 53081424, "body": "You might be able to use <a href=\"http://stackoverflow.com/questions/24510167/what-is-the-command-line-at-getcommandline-and-at-winmain-api\">GetCommandLine</a> to retrieve the parameters."}], "answers": [{"comments": [{"owner": {"reputation": 832, "user_id": 4504368, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jL04v.jpg?s=128&g=1", "display_name": "Mohammad Sina Karvandi", "link": "https://stackoverflow.com/users/4504368/mohammad-sina-karvandi"}, "edited": false, "score": 0, "creation_date": 1442421618, "post_id": 32614054, "comment_id": 53079143, "body": "You might be right but after changing my method nothing happened ! (same as what it was before)"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 832, "user_id": 4504368, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jL04v.jpg?s=128&g=1", "display_name": "Mohammad Sina Karvandi", "link": "https://stackoverflow.com/users/4504368/mohammad-sina-karvandi"}, "edited": false, "score": 0, "creation_date": 1442422033, "post_id": 32614054, "comment_id": 53079384, "body": "@Sinaei Well, then more information is needed. Who calls <code>MyMethod</code>? Which function uses <code>argc</code> and <code>argv</code>? <code>MyMethod</code> itself or its caller?"}, {"owner": {"reputation": 832, "user_id": 4504368, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jL04v.jpg?s=128&g=1", "display_name": "Mohammad Sina Karvandi", "link": "https://stackoverflow.com/users/4504368/mohammad-sina-karvandi"}, "edited": false, "score": 0, "creation_date": 1442422360, "post_id": 32614054, "comment_id": 53079574, "body": "MyMethod and another methods use Argv and Argc but I assign it ! I don&#39;t thing this is problem .And MyMethod is calling from another cpp file ."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 832, "user_id": 4504368, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jL04v.jpg?s=128&g=1", "display_name": "Mohammad Sina Karvandi", "link": "https://stackoverflow.com/users/4504368/mohammad-sina-karvandi"}, "edited": false, "score": 1, "creation_date": 1442422629, "post_id": 32614054, "comment_id": 53079740, "body": "@Sinaei well, that really depends... What you do is assign the local copies of these variables and you don&#39;t modify the values for the caller of <code>MyMethod</code>. So if <code>MyMethod</code> calls some function with its own <code>argc</code> and <code>argv</code>, then it will be fine. The <i>caller</i> of <code>MyMethod</code> will not see any changes. The answer thus depends on who calls whom."}, {"owner": {"reputation": 832, "user_id": 4504368, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jL04v.jpg?s=128&g=1", "display_name": "Mohammad Sina Karvandi", "link": "https://stackoverflow.com/users/4504368/mohammad-sina-karvandi"}, "edited": false, "score": 0, "creation_date": 1442423413, "post_id": 32614054, "comment_id": 53080194, "body": "So its simple I completely remove any arguments and MyMethod comes like MyMethod() but its still the same effects !!! Do you know how can I completely print argv from main file to see what happens in exe file ?!"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 832, "user_id": 4504368, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jL04v.jpg?s=128&g=1", "display_name": "Mohammad Sina Karvandi", "link": "https://stackoverflow.com/users/4504368/mohammad-sina-karvandi"}, "edited": false, "score": 1, "creation_date": 1442423677, "post_id": 32614054, "comment_id": 53080345, "body": "Could you show your <code>main</code>? And the call to your <code>MyMethod</code>? Otherwise it&#39;s impossible to help"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 832, "user_id": 4504368, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jL04v.jpg?s=128&g=1", "display_name": "Mohammad Sina Karvandi", "link": "https://stackoverflow.com/users/4504368/mohammad-sina-karvandi"}, "edited": false, "score": 1, "creation_date": 1442425775, "post_id": 32614054, "comment_id": 53081489, "body": "@Sinaei Well, basically you actually expect 5 arguments, when giving it only 3 - &quot;-a&quot; and &quot;-b&quot; should be separate arguments. The easy fix is <code>int argc1 = 5;</code> and <code>wchar_t *argv1[5] = { L&quot;&quot; , L&quot;-a&quot;, L&quot;arg1&quot;, L&quot;-b&quot;,  L&quot;arg2&quot; };</code>. I will provide a slightly better way to do the same thing in my answer."}], "tags": [], "owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "is_accepted": true, "score": 2, "last_activity_date": 1442426321, "last_edit_date": 1442426321, "creation_date": 1442421122, "answer_id": 32614054, "question_id": 32613985, "link": "https://stackoverflow.com/questions/32613985/simulating-the-c-command-line-parameters-with-variables/32614054#32614054", "title": "Simulating the C++ Command-Line Parameters with Variables", "body": "<p>The first parameter to the main function is the name of the executable itself. \nFrom <a href=\"http://en.cppreference.com/w/cpp/language/main_function\" rel=\"nofollow\">cppreference</a>:</p>\n\n<blockquote>\n  <p>argv[0] is the pointer to the initial character of a null-terminated multibyte strings that represents the name used to invoke the program itself (or an empty string \"\" if this is not supported by the execution environment)</p>\n</blockquote>\n\n<p>If it's not used, you can just provide an empty string - so in your case you will have <code>argc1 = 3</code> and <code>argv1[3] = {L\"\", L\"-a arg1\",L\"-b arg2\" };</code></p>\n\n<hr>\n\n<p><strong>Edit</strong>\nI provided the simple fix in the comments. Here's a version which is slightly closer to C++11 and also doesn't use the unnecessary temporaries and assignment to <code>main</code>'s arguments</p>\n\n<pre><code>#include &lt;array&gt;\n\nbool ArgTranslate(int argc, wchar_t const* argv[])\n{\n    wchar_t const* Parm1 = nullptr;   \n    wchar_t const* Parm2 = nullptr;   \n\n    for (int i = 1; (i + 1) &lt; argc; i += 2)\n    {\n        if (wcscmp(argv[i], L\"-a\") == 0)\n            Parm1 = argv[i + 1];\n        else if (wcscmp(argv[i], L\"-b\") == 0)\n            Parm2 = argv[i + 1]; \n    }\n    if (!Parm1 || !Parm2)\n        return false;\n    else\n        return true;\n}\n\nint wmain(int argc, wchar_t* argv[])\n{\n    std::array&lt;wchar_t const*, 5&gt; args{L\"\" , L\"-a\", L\"arg1\", L\"-b\",  L\"arg2\"};\n\n    if (!ArgTranslate(static_cast&lt;int&gt;(args.size()), args.data()))\n    {\n        MessageBoxA(0, \"Error\", \"Not valid args\", 0);\n        return -1;\n    }\n    MessageBoxA(0, \"Valid\", \"It is valid\", 0);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 832, "user_id": 4504368, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jL04v.jpg?s=128&g=1", "display_name": "Mohammad Sina Karvandi", "link": "https://stackoverflow.com/users/4504368/mohammad-sina-karvandi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 1, "accepted_answer_id": 32614054, "answer_count": 1, "score": 1, "last_activity_date": 1442426321, "creation_date": 1442420838, "last_edit_date": 1495540321, "question_id": 32613985, "link": "https://stackoverflow.com/questions/32613985/simulating-the-c-command-line-parameters-with-variables", "title": "Simulating the C++ Command-Line Parameters with Variables", "body": "<p>I'm trying to convert a C++ source code to dll . For this I change <code>wmain</code> to <code>MyMethod</code> and change the Configuration Type of this source into a Dynamic Library (.dll) .</p>\n\n<p>Now MyMethod is like : </p>\n\n<pre><code>int MyMethod(int argc, wchar_t* argv[])\n{    }\n</code></pre>\n\n<p>After this I pass args to this file like :</p>\n\n<pre><code>   MyFile.exe -a arg1 -b \"arg2\"\n</code></pre>\n\n<p>Now I want to do the same way into dll manually so as someone describes <a href=\"https://stackoverflow.com/questions/10425743/converting-an-exe-to-dll-calling-the-main-function-manually\">here</a> I change my code to :</p>\n\n<pre><code>  int MyMethod(int argc, wchar_t* argv[])\n{\n    int argc1 = 2;\n    wchar_t *argv1[2] = { L\"-a arg1\",L\"-b arg2\" };\n    argc = argc1;\n    argv = argv1;\n}\n</code></pre>\n\n<p>But the above code doesn't have the same effects as Command-Line.</p>\n\n<p>What makes this code wrong ?!(I mean do the command-line assign variables something different ?) </p>\n\n<p><strong>Update 1 :</strong>\nMy wmain method is :</p>\n\n<pre><code>    int wmain(int argc, wchar_t* argv[])\n    {\n        int argc1 = 3;\n        wchar_t *argv1[3] = { L\"\" , L\"-a arg1\",L\"-b arg2\" };\n\n        argc = argc1;\n        argv = argv1;\n\n        if (!ArgTranslate(argc, argv))\n        {\n            MessageBoxA(0, \"Error\", \"Not valid args\", 0);\n            return -1;\n        }\n    MessageBoxA(0, \"Valid\", \"It is valid\", 0);\n    return 0;\n}\n\nbool ArgTranslate(int argc, wchar_t* argv[])\n{\n\n    wchar_t* Parm1= NULL;   \n    wchar_t* Parm2= NULL;   \n\n    for (int i = 1; (i &lt; argc) &amp;&amp; ((i + 1) &lt; argc); i += 2)\n    {\n        if (wcscmp(argv[i], L\"-a\") == 0)\n            Parm1 = argv[i + 1];\n        else if (wcscmp(argv[i], L\"-b\") == 0)\n            Parm2 = argv[i + 1]; \n    }\n    if (Parm1 == NULL || Parm2 == NULL)\n        return false;\n    else\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c++", "keyboard", "ncurses"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1442420900, "post_id": 32613912, "comment_id": 53078674, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/28944972/how-to-use-a-timer-in-c-to-force-input-within-a-given-time\">How to use a timer in C++ to force input within a given time?</a>"}, {"owner": {"reputation": 11, "user_id": 5342889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p0L8U.jpg?s=128&g=1", "display_name": "CookieMan", "link": "https://stackoverflow.com/users/5342889/cookieman"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1442422442, "post_id": 32613912, "comment_id": 53079634, "body": "The solution there seems a bit complicated and, more importantly, other  people are suggesting this may not work. I though about using a combinaison of <code>std::thread</code> and <code>std::cin</code> to capture input and calculate time simultaneously, but I am not sure how this could work."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5342889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p0L8U.jpg?s=128&g=1", "display_name": "CookieMan", "link": "https://stackoverflow.com/users/5342889/cookieman"}, "edited": false, "score": 0, "creation_date": 1442422218, "post_id": 32614179, "comment_id": 53079489, "body": "OK, thanks, I will look into that. This means that this solution would at least work on POSIX compliant systems."}, {"owner": {"reputation": 1244, "user_id": 606961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/V8mtj.png?s=128&g=1", "display_name": "cardiff space man", "link": "https://stackoverflow.com/users/606961/cardiff-space-man"}, "edited": false, "score": 0, "creation_date": 1442424201, "post_id": 32614179, "comment_id": 53080628, "body": "Low-level read plus poll() or select() on STDIN handle, with a timeout argument other than infinity?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1244, "user_id": 606961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/V8mtj.png?s=128&g=1", "display_name": "cardiff space man", "link": "https://stackoverflow.com/users/606961/cardiff-space-man"}, "edited": false, "score": 0, "creation_date": 1442424734, "post_id": 32614179, "comment_id": 53080887, "body": "@cardiffspaceman, polls/selects usually do not work on stdin, as it considered to be &#39;immediately available&#39; and poll always returns that the descriptior can be read."}, {"owner": {"reputation": 1244, "user_id": 606961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/V8mtj.png?s=128&g=1", "display_name": "cardiff space man", "link": "https://stackoverflow.com/users/606961/cardiff-space-man"}, "edited": false, "score": 0, "creation_date": 1442434927, "post_id": 32614179, "comment_id": 53086644, "body": "@SergeyA In my test it worked. It&#39;s what I&#39;ve used in a few casual programs, because I&#39;m used to using poll() to detect input in production code with slightly different I/O such as sockets and character drivers. The OP&#39;s immediate need is of course well handled by your answer."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1244, "user_id": 606961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/V8mtj.png?s=128&g=1", "display_name": "cardiff space man", "link": "https://stackoverflow.com/users/606961/cardiff-space-man"}, "edited": false, "score": 0, "creation_date": 1442436151, "post_id": 32614179, "comment_id": 53087258, "body": "@cardiffspaceman, sockets and character drivers are not files, so that is different. Having said that, I fully trust you that on your system you could poll on stdin"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1442421566, "creation_date": 1442421566, "answer_id": 32614179, "question_id": 32613912, "link": "https://stackoverflow.com/questions/32613912/c-how-to-wait-for-keyboard-input-for-a-limited-time/32614179#32614179", "title": "C++ How to wait for keyboard input for a limited time", "body": "<p>One way of doing this would be to use low-level read() (assuming you are on Posix) coupled together with timeout signal. Since read() will exit with EINTR after signal processing, you'd know you reached the timeout.</p>\n"}], "owner": {"reputation": 11, "user_id": 5342889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p0L8U.jpg?s=128&g=1", "display_name": "CookieMan", "link": "https://stackoverflow.com/users/5342889/cookieman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1516, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1442421566, "creation_date": 1442420604, "last_edit_date": 1495535223, "question_id": 32613912, "link": "https://stackoverflow.com/questions/32613912/c-how-to-wait-for-keyboard-input-for-a-limited-time", "title": "C++ How to wait for keyboard input for a limited time", "body": "<p>I want my console application to stop and wait for the user to press a key. If there is no keyboard input after a limited time, let us say 2 seconds, execution should resume.</p>\n\n<p>I know that no solution will be portable across all implementations, but are there at least simple solutions?</p>\n\n<p>Some posts like <a href=\"https://stackoverflow.com/questions/21257544/c-wait-for-user-input\">this one</a> or <a href=\"https://stackoverflow.com/questions/1449324/how-to-simulate-press-any-key-to-continue\">this one</a> deal with similar issues, but they don\u2019t seem to offer an answer to that specific problem.</p>\n\n<p>If I could use ncurses (which I can't), I would do something like this using the <code>getch()</code> and <code>timeout()</code> functions:</p>\n\n<pre><code>#include &lt;ncurses.h&gt;\nint main()\n{\n    initscr();          // Start curses mode\n    cbreak();           // Turn off line buffering\n    timeout(2000);      // Wait 2000 ms for user input\n    while (true) {\n        addstr(\"You have 2 sec. to press 'q', otherwise ...\\n\");\n        refresh();\n        int inKey = getch();\n        if (inKey == 'q') break;\n    }\n    endwin();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "directx", "hlsl", "directcompute"], "answers": [{"tags": [], "owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "is_accepted": false, "score": 2, "last_activity_date": 1444420238, "last_edit_date": 1444420238, "creation_date": 1444419696, "answer_id": 33045963, "question_id": 32613755, "link": "https://stackoverflow.com/questions/32613755/directcompute-shader-data-input-output/33045963#33045963", "title": "DirectCompute shader data input/output", "body": "<p>The register bindings declared in the shader correspond to the index in the binding array argument.  For example, if you call <code>CSSetShaderResources(7 /*StartSlot*/, 3 /*NumViews*/, viewArray);</code>, this will bind <code>viewArray[0]</code> to <code>register(t7)</code>, <code>viewArray[1]</code> to <code>register(t8)</code>, and <code>viewArray[2]</code> to <code>register(t9)</code>.  Note that if one of the elements of <code>viewArray</code> is <code>NULL</code>, that will effectively unbind the corresponding register slot.</p>\n\n<p>Note that in HLSL, omitting the explicit <code>register</code> binding will automatically assign registers starting from 0. And in the common case, <code>StartSlot</code> will be <code>0</code>, so you just need to make sure that the order of views in <code>viewArray</code> matches the declaration order in your shader.  Still, it's best practice to explicitly assign regsters and make sure they match your binding array, because if the HLSL compiler determines you don't need one of the declared views, it'll eliminate it and <em>won't</em> skip over its slot in implicit assignment.  For example:</p>\n\n<pre><code>StructuredBuffer&lt;float&gt; foo; // register(t0)\nStructuredBuffer&lt;float&gt; bar; // eliminated!\nStructuredBuffer&lt;float&gt; baz; // register(t1) // skipped over bar!\nRWStructuredBuffer&lt;float&gt; biz; // register(u0)\nvoid main()\n{\n    float x = foo[0];\n    if(x &lt; 0) x = 0;\n    else if(x &gt;= 0) x = 1;\n    else x = bar[0]; // branch never hit, compiler optimizes out the only use of bar!\n    biz[0] = x + baz[0];\n}\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 3458955, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bce028edb42b900df12db323f6160f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Ilia", "link": "https://stackoverflow.com/users/3458955/ilia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 725, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1444420238, "creation_date": 1442420110, "question_id": 32613755, "link": "https://stackoverflow.com/questions/32613755/directcompute-shader-data-input-output", "title": "DirectCompute shader data input/output", "body": "<p>I am learning DirectCompute and I am stuck with StructuredBufferes. The thing is I learned that to supply data to shader I need to use a View - SRV or UAV, depending on what I am trying to achieve. But code examples from Microsoft site do not explain, how does a view defined in C++ code correspond to a specific Buffer defined in shader code. However, there is a hlsl keyword I dont really understand - <code>register()</code>. In sample there were three bufferes:</p>\n\n<pre><code>    StructuredBuffer&lt;BuffType&gt; Buff0 : register(t0);\n    StructuredBuffer&lt;BuffType&gt; Buff1 : register(t1);\n    RWStructuredBuffer&lt;BuffType&gt; BuffOut : register(u0);\n</code></pre>\n\n<p>In C++ code the authors just set ComputeShader, 1 UAV, 2 SRV's and then call Context.Dispatch(,,) (assuming they have prepared all buffers and views before). So the question is - how do I understand that the particular SRV (there are two of them) provide data for the particaular StructuredBuffer? Is it controlled by register number(e.g. register(t0) is filled first, register(t1) - second). If yes, what if I want to provide data to second buffer first, and then fill the first one? I feel myself that I miss something very important, but in previous tutorials I used everything was a lot easier because of EffectVariales and <em>.GetVariableBy</em> methods.\nThanks in advance.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 5, "creation_date": 1442419668, "post_id": 32613362, "comment_id": 53077872, "body": "Did you try it? Did it work?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1442464859, "post_id": 32613362, "comment_id": 53095445, "body": "You&#39;ve defined a bunch of types. You haven&#39;t created any objects of those types. Once you have an object, as in <code>PickNMix obj;</code>, then you can indeed access its members, as in <code>obj.a2</code>"}, {"owner": {"reputation": 109, "user_id": 4396848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cfwTl.jpg?s=128&g=1", "display_name": "god of llamas", "link": "https://stackoverflow.com/users/4396848/god-of-llamas"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1442534302, "post_id": 32613362, "comment_id": 53132074, "body": "@IgorTandetnik oops mistake. I&#39;ve corrected it now."}, {"owner": {"reputation": 6526, "user_id": 540026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb2aed9fbb6016a505f168539ed26d59?s=128&d=identicon&r=PG", "display_name": "Keith", "link": "https://stackoverflow.com/users/540026/keith"}, "edited": false, "score": 0, "creation_date": 1442535797, "post_id": 32613362, "comment_id": 53132436, "body": "It works. See <a href=\"https://en.wikipedia.org/wiki/Mixin\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Mixin</a> for doing this with full blown classes."}], "owner": {"reputation": 109, "user_id": 4396848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cfwTl.jpg?s=128&g=1", "display_name": "god of llamas", "link": "https://stackoverflow.com/users/4396848/god-of-llamas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1442534379, "creation_date": 1442418819, "last_edit_date": 1442534379, "question_id": 32613362, "link": "https://stackoverflow.com/questions/32613362/pick-n-mix-structs", "title": "&quot;Pick &#39;n&#39; mix&quot; structs?", "body": "<p>Say I have structs A, B and C which all have different properties in them. Is it possible to make a \"pick 'n' mix struct\" via multiple inheritance and if so how do you later access a property from one of the inherited variables from the \"pick 'n' mix structs\"? e.g.:</p>\n\n<pre><code>struct A {int a1,a2};\nstruct B {int b1,b2};\nstruct C {int c1,c2};\nstruct PickNMix:A,B {int p1};\nPickNMix pnm;\nint x=pnm.a2 //&lt;--just an educated guess of the syntax but not sure at all about it...if it works it should return NULL\n</code></pre>\n\n<p>Also, is there a better/more efficient way of doing this sort of thing? If so, please explain.</p>\n"}, {"tags": ["c++", "object", "itk"], "answers": [{"tags": [], "owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "is_accepted": false, "score": 1, "last_activity_date": 1454431024, "last_edit_date": 1454431024, "creation_date": 1442433432, "answer_id": 32617569, "question_id": 32613334, "link": "https://stackoverflow.com/questions/32613334/difference-between-main-object-into-itk-4-8-toolkit/32617569#32617569", "title": "Difference between main Object into itk 4.8 toolkit", "body": "<p>The <a href=\"http://www.itk.org/Doxygen/html/classitk_1_1VectorImage.html\" rel=\"nofollow\"><code>itk::VectorImage</code></a> class is merely an image where each image pixel has a list of values associated with it rather than a single intensity value.</p>\n\n<p>I am not aware of any <code>itk::CovariantVectorImage</code> class or a similar class. </p>\n\n<p>The <a href=\"http://www.itk.org/Doxygen/html/classitk_1_1Vector.html\" rel=\"nofollow\"><code>itk::Vector</code></a> class represents a mathematical vector with magnitude and direction with operators and methods for vector addition, scalar multiplication, the inner product of two vectors, getting a vector's norm, and so forth. You can also perform linear transformations on them using methods in the <a href=\"http://www.itk.org/Doxygen/html/classitk_1_1AffineTransform.html\" rel=\"nofollow\"><code>itk::AffineTransform</code></a>, mainly the <code>TransformVector()</code> method. This is not related to C++'s <code>std::vector</code> container object, which is really a dynamic array data structure.</p>\n\n<p>The <a href=\"http://www.itk.org/Doxygen/html/classitk_1_1CovariantVector.html\" rel=\"nofollow\"><code>itk::CovariantVector</code></a> class is similar to <code>itk::Vector</code>, except it represents a <em>covector</em> rather than a <em>vector</em>. Covectors represent <code>n-1</code>-dimensional hyperplanes, (2D planes in the case of 3D space), and so their components transform in the opposite way that a vector's components do. <code>itk::AffineTransform</code>'s <code>TransformCovariantVector()</code> method will transform a <code>itk::CovariantVector</code> object according to covariant transformation laws.</p>\n\n<p>The <a href=\"http://www.itk.org/Doxygen/html/classitk_1_1SpatialObject.html\" rel=\"nofollow\"><code>itk::SpatialObject</code></a> class allows you to create objects that exist in physical <code>n</code>-dimension space such as boxes, ellipses, tubes, planes, and cylinders, and relate these objects through parent-child relationships. You can read Chapter 5 of the <a href=\"http://www.itk.org/ItkSoftwareGuide.pdf\" rel=\"nofollow\">ITK software manual</a> for more information on this topic.</p>\n"}], "owner": {"reputation": 182, "user_id": 3787526, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1c4f2656e1f99ef97e979c87ff223dbf?s=128&d=identicon&r=PG&f=1", "display_name": "enjoytech", "link": "https://stackoverflow.com/users/3787526/enjoytech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1454431024, "creation_date": 1442418719, "last_edit_date": 1442429102, "question_id": 32613334, "link": "https://stackoverflow.com/questions/32613334/difference-between-main-object-into-itk-4-8-toolkit", "title": "Difference between main Object into itk 4.8 toolkit", "body": "<p>Anyone can help me to understand the difference among itk 4.8 data object. What are the difference between Vector Image, CovariantVector Image and Spatial Objects?</p>\n"}, {"tags": ["c++", "shared-ptr", "unordered-set"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1442418823, "post_id": 32613304, "comment_id": 53077295, "body": "You need to understand what it means for two shared pointers to be &quot;equal&quot;."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1442418904, "post_id": 32613304, "comment_id": 53077369, "body": "You should not specialize <code>std::hash</code> not for <b>your</b> type..."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1442418927, "post_id": 32613304, "comment_id": 53077382, "body": "Comparison operators for <code>shared_ptr</code> compare pointer values; the actual objects pointed to are not compared."}], "answers": [{"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 6, "last_activity_date": 1442419924, "last_edit_date": 1442419924, "creation_date": 1442418832, "answer_id": 32613368, "question_id": 32613304, "link": "https://stackoverflow.com/questions/32613304/find-a-value-in-an-unordered-set-of-shared-ptr/32613368#32613368", "title": "Find a value in an unordered_set of shared_ptr", "body": "<p>You stored a <em>pointer</em> to an integer. When you look up items in the set, you're not comparing the (pointed-to) integer, but the pointer itself.</p>\n\n<p>When you allocate a <em>new</em> pointer to a <em>new</em> integer object for the search, it won't compare equal, because it's a different integer object (even though it stores the same value).</p>\n\n<p>Your options are:</p>\n\n<ol>\n<li><p>don't store pointers to integers in your set, just store the integers directly.</p>\n\n<p>Then, your key is <code>42</code>, and searching for <code>42</code> will find it, because the integers are compared by value</p></li>\n<li><p>store pointers and use a custom hash and comparator to compare the <em>pointed-at integers</em> instead of the pointers.</p>\n\n<p>You shouldn't (try to) pollute <code>std</code> namespace with your hash specialization, and it's not sufficient anyway (the hash is used for bucket lookup, but keys are still compared with <code>KeyEqual</code> inside the bucket). Just specify them <em>for your container</em>.</p></li>\n</ol>\n\n<p>Example code for #2:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;memory&gt;\n#include &lt;unordered_set&gt;\n\nstruct Deref {\n    struct Hash {\n        template &lt;typename T&gt;\n        std::size_t operator() (std::shared_ptr&lt;T&gt; const &amp;p) const {\n            return std::hash&lt;T&gt;()(*p);\n        }\n    };\n    struct Compare {\n        template &lt;typename T&gt;\n        size_t operator() (std::shared_ptr&lt;T&gt; const &amp;a,\n                           std::shared_ptr&lt;T&gt; const &amp;b) const {\n            return *a == *b;\n        }\n    };\n};\n\nint main() {\n    std::unordered_set&lt;std::shared_ptr&lt;int&gt;&gt; sp;\n    auto p = std::make_shared&lt;int&gt;(42);\n    sp.insert(p);\n    assert(sp.find(p) != sp.end()); // same pointer works\n    assert(sp.find(std::make_shared&lt;int&gt;(42)) == sp.end()); // same value doesn't\n\n    // with the correct hash &amp; key comparison, both work\n    std::unordered_set&lt;std::shared_ptr&lt;int&gt;, Deref::Hash, Deref::Compare&gt; spd;\n    spd.insert(p);\n    assert(spd.find(p) != spd.end());\n    assert(spd.find(std::make_shared&lt;int&gt;(42)) != spd.end());\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 1, "last_activity_date": 1442419250, "creation_date": 1442419250, "answer_id": 32613520, "question_id": 32613304, "link": "https://stackoverflow.com/questions/32613304/find-a-value-in-an-unordered-set-of-shared-ptr/32613520#32613520", "title": "Find a value in an unordered_set of shared_ptr", "body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/operator_cmp\" rel=\"nofollow\">here</a>:</p>\n\n<blockquote>\n  <p>Note that the comparison operators for shared_ptr simply compare pointer values; the actual objects pointed to are not compared. </p>\n</blockquote>\n\n<p>So <code>found</code> will be true only if <code>shared_ptr</code> points to same object:</p>\n\n<pre><code>typedef std::shared_ptr&lt;int&gt; IntPtr;\n\nstd::unordered_set&lt;IntPtr&gt; s;\nIntPtr p = std::make_shared&lt;int&gt;(42);\ns.insert(p);\n\nbool found = s.find(p) != s.end();\ncout&lt;&lt;std::boolalpha&lt;&lt;found&lt;&lt;endl; // true\n</code></pre>\n"}], "owner": {"reputation": 11900, "user_id": 558892, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7889628f70248130adcbf4802e00c8d8?s=128&d=identicon&r=PG", "display_name": "Deqing", "link": "https://stackoverflow.com/users/558892/deqing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2296, "favorite_count": 1, "accepted_answer_id": 32613368, "answer_count": 2, "score": 3, "last_activity_date": 1442419924, "creation_date": 1442418618, "question_id": 32613304, "link": "https://stackoverflow.com/questions/32613304/find-a-value-in-an-unordered-set-of-shared-ptr", "title": "Find a value in an unordered_set of shared_ptr", "body": "<p>I'd like to find a value in unordered_set, but failed:</p>\n\n<pre><code>typedef std::shared_ptr&lt;int&gt; IntPtr;\n\nstd::unordered_set&lt;IntPtr&gt; s;\ns.insert(std::make_shared&lt;int&gt;(42));\n\nbool found = s.find(std::make_shared&lt;int&gt;(42)) != s.end();\ncout&lt;&lt;std::boolalpha&lt;&lt;found&lt;&lt;endl; // false\n</code></pre>\n\n<p>Had tried following but still not working.</p>\n\n<pre><code>namespace std {\n  template &lt;&gt; struct hash&lt;IntPtr&gt; {\n    size_t operator()(const IntPtr&amp; x) const noexcept {\n      return std::hash&lt;int&gt;()(*x);\n    }\n  };\n}\n</code></pre>\n\n<p>Any idea how to make it works?</p>\n"}, {"tags": ["c++", "foreach"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 2, "creation_date": 1442418801, "post_id": 32613215, "comment_id": 53077280, "body": "This isn&#39;t a duplicate of that! The VS-specific &quot;for each&quot; syntax isn&#39;t in the linked question."}, {"owner": {"reputation": 77, "user_id": 5183995, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e836b1dff16346507ec58d614ff22833?s=128&d=identicon&r=PG&f=1", "display_name": "user1532265", "link": "https://stackoverflow.com/users/5183995/user1532265"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1442419156, "post_id": 32613215, "comment_id": 53077516, "body": "Exactly!  Boys! read things before answering."}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 1, "creation_date": 1442419392, "post_id": 32613215, "comment_id": 53077691, "body": "Oh, don&#39;t take it personally please - there are a lot of questions here and it&#39;s easy to make mistakes."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1442419532, "post_id": 32613215, "comment_id": 53077787, "body": "Sorry @MegumiBear: you wrote that you were learning the syntax of the language, and wrote some stuff that looked like pseudocode a teacher might have written. I had no idea that stuff actually compiles on VS."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 5183995, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e836b1dff16346507ec58d614ff22833?s=128&d=identicon&r=PG&f=1", "display_name": "user1532265", "link": "https://stackoverflow.com/users/5183995/user1532265"}, "edited": false, "score": 0, "creation_date": 1442419229, "post_id": 32613318, "comment_id": 53077569, "body": "This is the answer! Thanks crashmstr"}, {"owner": {"reputation": 4295, "user_id": 1916893, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/XTlc8.png?s=128&g=1", "display_name": "TobiMcNamobi", "link": "https://stackoverflow.com/users/1916893/tobimcnamobi"}, "edited": false, "score": 0, "creation_date": 1442474723, "post_id": 32613318, "comment_id": 53099276, "body": "Wow. I use VS for years (if not decades) now and this feature is available since VS 2005 at least. I guess that back then it seemed like a good idea to offer a for-each. But then the committee decided to make a range based for a simple &quot;for&quot;."}], "tags": [], "owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "is_accepted": true, "score": 4, "last_activity_date": 1442418661, "creation_date": 1442418661, "answer_id": 32613318, "question_id": 32613215, "link": "https://stackoverflow.com/questions/32613215/basic-c-for-each-loop/32613318#32613318", "title": "Basic c++ : for-each loop", "body": "<p>This is a non-standard microsoft extension for C++ and C++/CLI</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms177202.aspx\" rel=\"nofollow\">for each, in</a></p>\n\n<blockquote>\n  <p>Iterates through an array or collection. This non-standard keyword is available in both C++/CLI and native C++ projects. However, its use is not recommended. Consider using a standard Range-based for Statement (C++) instead.</p>\n</blockquote>\n"}], "owner": {"reputation": 77, "user_id": 5183995, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e836b1dff16346507ec58d614ff22833?s=128&d=identicon&r=PG&f=1", "display_name": "user1532265", "link": "https://stackoverflow.com/users/5183995/user1532265"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 32613318, "answer_count": 1, "score": 0, "last_activity_date": 1442474098, "creation_date": 1442418358, "last_edit_date": 1442474098, "question_id": 32613215, "link": "https://stackoverflow.com/questions/32613215/basic-c-for-each-loop", "title": "Basic c++ : for-each loop", "body": "<p>I have been learning C++ for a couple of weeks, and am sorry for my basic question but this question seems too hard to find its answers to in google or on this SO site. \nI am learning to code modern C++ in VS 2015  and I can do something like this (my friend's code)</p>\n\n<pre><code>for each (int i in vectorOfInt)\n{\n   // do something\n}\n</code></pre>\n\n<p>But after searching a lot from this \n<a href=\"http://en.cppreference.com/\" rel=\"nofollow\">http://en.cppreference.com/</a></p>\n\n<p>I still can't find its syntax. I asked him and he said, his teacher wrote so.\nIs it part of C++? Since when it becomes available? As I can't find it in my latest C++ book (Bjarne's) also.</p>\n"}, {"tags": ["c++", "c", "function"], "comments": [{"owner": {"reputation": 1436, "user_id": 1598979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3597e916b9b9aa4cde34763a1cab001d?s=128&d=identicon&r=PG", "display_name": "Kmeixner", "link": "https://stackoverflow.com/users/1598979/kmeixner"}, "edited": false, "score": 0, "creation_date": 1442418503, "post_id": 32613167, "comment_id": 53077054, "body": "Could you paste the exact error you are getting?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1442418542, "post_id": 32613167, "comment_id": 53077089, "body": "Please show the full code."}, {"owner": {"reputation": 1, "user_id": 5343074, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046962351982917/picture?type=large", "display_name": "Farah Syazwani", "link": "https://stackoverflow.com/users/5343074/farah-syazwani"}, "reply_to_user": {"reputation": 1436, "user_id": 1598979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3597e916b9b9aa4cde34763a1cab001d?s=128&d=identicon&r=PG", "display_name": "Kmeixner", "link": "https://stackoverflow.com/users/1598979/kmeixner"}, "edited": false, "score": 1, "creation_date": 1442419076, "post_id": 32613167, "comment_id": 53077477, "body": "@Kmeixner 125\t8\tC:\\Users\\Unit ICT PPDHL\\Desktop\\New folder\\chawan.c\t[Error] conflicting types for &#39;calculatePrice&#39;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442419181, "post_id": 32613167, "comment_id": 53077528, "body": "Declare function <code>double calculatePrice(char cust)</code> before using it to get rid of &quot;conflicting types for &#39;calculatePrice&#39;&quot;"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1442419355, "post_id": 32613167, "comment_id": 53077666, "body": "<code>scanf(&quot;%s&quot;, &amp;m[counter]-&gt;Mname);</code> is very unlikely to be correct, and <code>(strcmp(code, &quot;C2&quot;)) || (strcmp(code, &quot;C3&quot;)) || (strcmp(code, &quot;C5&quot;))</code> is 0 only if <code>code</code> is equal to all three strings at once."}, {"owner": {"reputation": 1, "user_id": 5343074, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046962351982917/picture?type=large", "display_name": "Farah Syazwani", "link": "https://stackoverflow.com/users/5343074/farah-syazwani"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442419402, "post_id": 32613167, "comment_id": 53077697, "body": "@chux did u mean to declare that function out of the main?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1442419610, "post_id": 32613167, "comment_id": 53077829, "body": "You have not posted the full code, is there a function prototype? If not it&#39;s a &quot;forward reference&quot; and the compiler will make assumptions which in this case (there is a <code>double</code>) will be incorrect."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442419611, "post_id": 32613167, "comment_id": 53077833, "body": "Yes, declare (or define) the function <i>before</i> <code>main()</code>."}, {"owner": {"reputation": 1, "user_id": 5343074, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046962351982917/picture?type=large", "display_name": "Farah Syazwani", "link": "https://stackoverflow.com/users/5343074/farah-syazwani"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442419887, "post_id": 32613167, "comment_id": 53078006, "body": "@chux owwwhhhh yess! it&#39;s working. thank you so much!! xDD"}], "answers": [{"comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1442419070, "post_id": 32613293, "comment_id": 53077475, "body": "The error you mention would cause undefined behavior, but why would it cause the (presumably) compiler error the OP complains about? If this is C (and not C++, based on <code>struct data</code>), the code should still compile even with this error."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1442419297, "post_id": 32613293, "comment_id": 53077623, "body": "@R_Kapp the latest compilers compare format type with argument?"}, {"owner": {"reputation": 1, "user_id": 5343074, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046962351982917/picture?type=large", "display_name": "Farah Syazwani", "link": "https://stackoverflow.com/users/5343074/farah-syazwani"}, "edited": false, "score": 0, "creation_date": 1442419312, "post_id": 32613293, "comment_id": 53077635, "body": "@WeatherVane it still has an error eventhough i changed the &quot;%s&quot; to &quot; %c&quot;. :(("}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1442419375, "post_id": 32613293, "comment_id": 53077676, "body": "C isn&#39;t strongly typed, though... even if the comparison is made, my understanding is that you&#39;d get a compiler warning, and not an error."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1442419387, "post_id": 32613293, "comment_id": 53077685, "body": "Perhaps you have several errors. See @chux comment above."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1442419014, "last_edit_date": 1442419014, "creation_date": 1442418585, "answer_id": 32613293, "question_id": 32613167, "link": "https://stackoverflow.com/questions/32613167/error-conflicting-types-for-function-calculateprice/32613293#32613293", "title": "Error conflicting types for function calculatePrice", "body": "<p>In that function <code>calculatePrice</code></p>\n\n<pre><code>printf(\"Enter size of cup : \");\nscanf(\"%s\", size);\n\nprintf(\"Enter topping : \");\nscanf(\"%s\", top);\n</code></pre>\n\n<p>are asking for string input, but the target type is <code>char</code>.</p>\n\n<p>Should be</p>\n\n<pre><code>printf(\"Enter size of cup : \");\nscanf(\" %c\", &amp;size);\n\nprintf(\"Enter topping : \");\nscanf(\" %c\", &amp;top);\n</code></pre>\n\n<p>Notice the space before <code>%c</code> which will clean off whitespace left after the previous input.</p>\n\n<p>Also please be aware that <code>char code[4]</code> can only accept 3 characters. It's a dangerous way to do things as you don't restrict the input length.</p>\n"}], "owner": {"reputation": 1, "user_id": 5343074, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046962351982917/picture?type=large", "display_name": "Farah Syazwani", "link": "https://stackoverflow.com/users/5343074/farah-syazwani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442419014, "creation_date": 1442418227, "question_id": 32613167, "link": "https://stackoverflow.com/questions/32613167/error-conflicting-types-for-function-calculateprice", "title": "Error conflicting types for function calculatePrice", "body": "<p>I wrote this coding, then it said that there is an error about [Error] conflicting types for 'calculatePrice'.  I dont know why it appeared to be an error. Can anyone please help me to correct this error? :((</p>\n\n<pre><code>void Add(struct data* m[])//, struct data* s)\n{\n    char cust, choice1, choice2;\n    int i, counter = 0;\n    double totPrice = 0.00;\n\n\n    do\n    {           \n        printf(\"Member(M) / Student(S) / Regular Customer(R)?\");\n        scanf(\"%c\", &amp;cust);\n\n        printf(\"Enter name: \");\n        scanf(\"%s\", &amp;m[counter]-&gt;Mname);\n\n        printf(\"Enter phone number : \");\n        scanf(\"%s\", &amp;m[counter]-&gt;MphoneNum);\n\n        printf(\"Enter id : \");\n        scanf(\"%s\", &amp;m[counter]-&gt;Mid);\n\n        printf(\"Enter address\");\n        scanf(\"%s\", &amp;m[counter]-&gt;Maddress);\n\n        printf(\"Enter e-mail : \");\n        scanf(\"%s\", &amp;m[counter]-&gt;mail);\n\n        do\n        {\n        /*  totPrice +=*/ calculatePrice(cust);\n\n            printf(\"Wanna add another order?\");\n            scanf(\"%s\", choice1);\n        }           \n        while(choice1 == 'Y');\n\n\n        counter++;\n        m[counter]-&gt;payment = totPrice;\n\n        printf(\"Wanna add another customer?\");\n        scanf(\"%s\", choice2);\n    }\n\n    while(choice2 == 'Y');  \n}\n\ndouble calculatePrice(char cust)\n{\n    char code[4], size, top;\n    double discount, drPrice, topPrice, price;\n\n    if(cust == 'M')\n    //searchMember(&amp;m, &amp;s); \n        discount = 0.8;         \n\n    else if(cust == 'S')\n        discount = 0.85;\n\n    else if(cust == 'R')\n        discount = 0.0;\n\n\n    printf(\"Enter the order's code :\");\n    scanf(\"%s\", code);\n\n    printf(\"Enter size of cup : \");\n    scanf(\"%s\", size);\n\n    printf(\"Enter topping : \");\n    scanf(\"%s\", top);\n\n    if((strcmp(code, \"T1\")) || (strcmp(code, \"T2\")) || (strcmp(code, \"T3\")) ||(strcmp(code, \"T4\")) || (strcmp(code, \"T5\")) == 0)\n    {\n        if(size == 'R')\n            drPrice = 4.90;\n        else\n            drPrice = 5.90;\n    }\n\n    else if((strcmp(code, \"CH1\")) || (strcmp(code, \"CH2\")) || (strcmp(code, \"CH3\")) || (strcmp(code, \"CH4\")) || (strcmp(code, \"CH5\")) == 0)\n    {\n        if(size == 'R')\n            drPrice = 6.90;\n        else\n            drPrice = 7.90;\n    }\n\n    else if((strcmp(code, \"C2\")) || (strcmp(code, \"C3\")) || (strcmp(code, \"C5\")) == 0)\n        drPrice = 5.90;     \n\n    else if((strcmp(code, \"S1\")) || (strcmp(code, \"S2\")) || (strcmp(code, \"S5\")) || (strcmp(code, \"S7\")) || (strcmp(code, \"S9\")) == 0)\n        drPrice = 6.90;\n\n    else if((strcmp(code, \"S3\")) || (strcmp(code, \"S4\")) || (strcmp(code, \"S6\")) || (strcmp(code, \"S8\")) || (strcmp(code, \"S10\")) || (strcmp(code, \"S11\")) == 0)\n        drPrice = 5.90; //check harga balik\n\n    else if((strcmp(code, \"C1\")) == 0)\n        drPrice = 3.90;\n\n    else if((strcmp(code, \"C4\")) == 0)\n        drPrice = 4.90;\n\n    if(top == 'B' || top == 'G' || top == 'J' || top == 'P' || top == 'A')\n        topPrice = 0.60;\n\n    else if(top == 'X')\n        topPrice = 0.00;\n\n    price = discount * (topPrice + drPrice);\n\n    return price; //return value\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1442422921, "last_edit_date": 1442422921, "creation_date": 1442421613, "answer_id": 32614192, "question_id": 32613166, "link": "https://stackoverflow.com/questions/32613166/how-not-to-override-some-member-variables-if-some-condition-is-set-on-parent-cla/32614192#32614192", "title": "How not to override some member variables if some condition is set on Parent class?", "body": "<p>inIf you want to prevent those variables being overwritten in derived classes make them <code>private</code> and provide <code>protected</code> getter/setter functions:</p>\n\n<pre><code>class B {\nprotected:\n\n   int getA() const { return a; }\n   void seta(int x) {\n       if(condition) {\n           throw std::runtime_error(\"Cannot set a\");\n       }\n       a = x;\n   }\n\nprivate:\n   int a;\n   int b;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1240, "user_id": 3585575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W47ui.png?s=128&g=1", "display_name": "KyleKnoepfel", "link": "https://stackoverflow.com/users/3585575/kyleknoepfel"}, "is_accepted": false, "score": 0, "last_activity_date": 1442422035, "last_edit_date": 1442422035, "creation_date": 1442421726, "answer_id": 32614224, "question_id": 32613166, "link": "https://stackoverflow.com/questions/32613166/how-not-to-override-some-member-variables-if-some-condition-is-set-on-parent-cla/32614224#32614224", "title": "How not to override some member variables if some condition is set on Parent class?", "body": "<p>If you find that you have to conditionally inherit some data members and not others, then you probably need to rethink your design.  In general, data members should be private...even data members of base classes.</p>\n\n<p>I know of no way to conditionally inherit data members.  Your best option would be to do something like:</p>\n\n<pre><code>class B {...};\nclass D1 : public B { int a; ... };\nclass D2 : public B { int a; int b; ... };    \n\nenum class Option { OneArg, TwoArgs };\n\nstd::unique_ptr&lt;B&gt; make_b(Option const opt)\n{\n   std::unique_ptr&lt;B&gt; b;\n   switch(opt) {\n   case(Option::OneArg):  b = std::make_unique&lt;D1&gt;(...some args...); break;\n   case(Option::TwoArgs): b = std::make_unique&lt;D2&gt;(...some args...); break;\n   }\n   return std::move(b);\n}\n</code></pre>\n\n<p>This way, the derived classes have the private data members they need, and you conditionally construct the <em>derived</em> type, NOT the base type.</p>\n\n<p>Not sure if this meets your need, but the bottomline is this: data members should be reserved for derived types; and those data members should be private, at that.  Base classes should serve as interfaces--you should run the other way if you feel the need to start putting function implementation inside of them.</p>\n"}], "owner": {"reputation": 399, "user_id": 1109516, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/3a69ea2e6ff0eab6da2b5de9f435dcac?s=128&d=identicon&r=PG", "display_name": "snr", "link": "https://stackoverflow.com/users/1109516/snr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1442422921, "creation_date": 1442418223, "question_id": 32613166, "link": "https://stackoverflow.com/questions/32613166/how-not-to-override-some-member-variables-if-some-condition-is-set-on-parent-cla", "title": "How not to override some member variables if some condition is set on Parent class?", "body": "<p>I have class C which has some variables which is present on Parent class B.</p>\n\n<p>In the normal scenario I have to override some of variables in the child class C.</p>\n\n<p>Now my question is how I can force the child class not to override the variables in a Parent class?</p>\n\n<pre><code>class B\n{\n  protected:\n\n   int a;\n   int b;\n };\n\nclass C: B\n{\n   void somefunc()  \n   {\n      //I have to prevent this overriding if some condition is set on class B\n      a = 10;\n   }\n};\n</code></pre>\n"}, {"tags": ["c++", "string", "is-empty"], "answers": [{"comments": [{"owner": {"reputation": 249, "user_id": 4592520, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c362fd37c32b17ea32a4bd4989f0bac6?s=128&d=identicon&r=PG&f=1", "display_name": "cmehmen", "link": "https://stackoverflow.com/users/4592520/cmehmen"}, "edited": false, "score": 0, "creation_date": 1442417987, "post_id": 32612959, "comment_id": 53076704, "body": "even when i do not initialize the filename to &quot; &quot;, it is still stuck and doesn&#39;t re-promt until a char is typed"}, {"owner": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "reply_to_user": {"reputation": 249, "user_id": 4592520, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c362fd37c32b17ea32a4bd4989f0bac6?s=128&d=identicon&r=PG&f=1", "display_name": "cmehmen", "link": "https://stackoverflow.com/users/4592520/cmehmen"}, "edited": false, "score": 0, "creation_date": 1442418719, "post_id": 32612959, "comment_id": 53077223, "body": "try using <code>getline()</code> function with <code>std::cin</code> instead of <code>&gt;&gt;</code> operator."}], "tags": [], "owner": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "is_accepted": false, "score": 2, "last_activity_date": 1442417611, "creation_date": 1442417611, "answer_id": 32612959, "question_id": 32612816, "link": "https://stackoverflow.com/questions/32612816/c-ask-user-for-file-name-if-they-enter-nothing-how-do-i-correctly-re-prompt/32612959#32612959", "title": "C++ ask user for file name, if they enter nothing how do i correctly re-prompt", "body": "<p>Your while loop with checking emptiness will not be executed (even a single time) as you initialized <code>fileName</code> with <code>\" \"</code> (so it's <strong>not empty</strong>). Use <code>do...while()</code> or simply do not initialize <code>std::string</code> (there is no need for it.)</p>\n"}, {"tags": [], "owner": {"reputation": 689, "user_id": 662593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e745cd82e8f6f2832568ee8a67e61661?s=128&d=identicon&r=PG", "display_name": "StahlRat", "link": "https://stackoverflow.com/users/662593/stahlrat"}, "is_accepted": true, "score": 2, "last_activity_date": 1442419552, "creation_date": 1442419552, "answer_id": 32613608, "question_id": 32612816, "link": "https://stackoverflow.com/questions/32612816/c-ask-user-for-file-name-if-they-enter-nothing-how-do-i-correctly-re-prompt/32613608#32613608", "title": "C++ ask user for file name, if they enter nothing how do i correctly re-prompt", "body": "<p>Try to use getline instead of operator&lt;&lt; like this;</p>\n\n<pre><code>while (fileName.empty())\n{\n  cout &lt;&lt; \"Enter file name: \";\n  char c[255];\n  cin.getline(c, 255);\n  fileName = string(c);\n}\n</code></pre>\n\n<p>ps: Just noticed comment from  @DawidPi with the same suggestion :)</p>\n"}], "owner": {"reputation": 249, "user_id": 4592520, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c362fd37c32b17ea32a4bd4989f0bac6?s=128&d=identicon&r=PG&f=1", "display_name": "cmehmen", "link": "https://stackoverflow.com/users/4592520/cmehmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1744, "favorite_count": 0, "accepted_answer_id": 32613608, "answer_count": 2, "score": 0, "last_activity_date": 1442419552, "creation_date": 1442417213, "question_id": 32612816, "link": "https://stackoverflow.com/questions/32612816/c-ask-user-for-file-name-if-they-enter-nothing-how-do-i-correctly-re-prompt", "title": "C++ ask user for file name, if they enter nothing how do i correctly re-prompt", "body": "<p>creating a program that will prompt user until the given file exist, so far if the file exist it re-prompts them. but when i prompt the user for a file name, and they decide to press enter all i get is white space until i enter characters. how would it be possible to re-promt when user decides to enter nothing.</p>\n\n<pre><code>  while(fileName.empty())/*********************/\n            {\n            cout&lt;&lt;\"Enter file name: \";\n            cin&gt;&gt; fileName;\n            }\n</code></pre>\n\n<h2>^attempt of re-prompting when given an empty string^</h2>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n        string line;\n        ifstream inData;\n        ofstream outData;\n        string fileName = \" \";\n        char digit;\n        float num[1000];\n        float sum[10];\n        int num_count;\n        int  i = 0;\n        float user_num,tot,result;\n\n\n/*Program will ask user for file name, read the file\nsum the first 3 numbers of the file, then will prompt\nthe user for a fourth number in which it will sum all\nnumbers and print the average*/\n\n\n        while(fileName.empty())/*********************/\n        {\n        cout&lt;&lt;\"Enter file name: \";\n        cin&gt;&gt; fileName;\n        }\n\n        inData.open(fileName.c_str());\n        /*outData.open(fileName.c_str());*/\n\n        while(!inData.is_open())\n        {\n        cout&lt;&lt;\"Please enter a valid file name or path: \";\n        cin&gt;&gt;fileName;\n        inData.open(fileName.c_str());\n        }\n\n\n        if (inData.is_open())\n         {\n            while (inData.good())\n            {\n                inData &gt;&gt; digit;\n                num[i] = digit - '0';\n                i++;\n                num_count = i - 1;\n            }\n        inData.close();\n\n\n\n        cout&lt;&lt;\"Enter fourth number: \";\n        cin&gt;&gt; user_num;\n        num[3] = user_num;\n\n\n        for(int a = 0; a &lt;= 3; a++)\n        {\n            tot += num[a];\n        }\n\n\n        result = tot/4.0;\n\n        cout&lt;&lt;\"The average of the four numbers is: \"&lt;&lt;result&lt;&lt;'\\n';\n\n        }\n\n        return 0;\n}\n</code></pre>\n\n<p>here is my test file</p>\n\n<p>jim.txt</p>\n\n<pre><code>2 44 3\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "data-structures"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1442416952, "post_id": 32612696, "comment_id": 53076075, "body": "ditch the pointer the parent."}, {"owner": {"reputation": 169, "user_id": 4881119, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2b10cdf18445b49539e8e4382e0659b?s=128&d=identicon&r=PG&f=1", "display_name": "SuperHeroY", "link": "https://stackoverflow.com/users/4881119/superheroy"}, "edited": false, "score": 0, "creation_date": 1442416989, "post_id": 32612696, "comment_id": 53076100, "body": "I am learning how SO works and I don&#39;t understand why my question is downvoted, can someone please explain?"}, {"owner": {"reputation": 169, "user_id": 4881119, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2b10cdf18445b49539e8e4382e0659b?s=128&d=identicon&r=PG&f=1", "display_name": "SuperHeroY", "link": "https://stackoverflow.com/users/4881119/superheroy"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1442417037, "post_id": 32612696, "comment_id": 53076132, "body": "@StoryTeller: What I lose if I do that?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1442417049, "post_id": 32612696, "comment_id": 53076144, "body": "Your Q2 is out of order for SO. It asks for people to do your work for you. Either actual coding or research."}, {"owner": {"reputation": 169, "user_id": 4881119, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2b10cdf18445b49539e8e4382e0659b?s=128&d=identicon&r=PG&f=1", "display_name": "SuperHeroY", "link": "https://stackoverflow.com/users/4881119/superheroy"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1442417118, "post_id": 32612696, "comment_id": 53076183, "body": "@StoryTeller: Thanks"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1442417165, "post_id": 32612696, "comment_id": 53076214, "body": "You don&#39;t really need a pointer to the parent, you <i>do</i> however need a pointer to the next sibling in the list."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 1, "creation_date": 1442418318, "post_id": 32612696, "comment_id": 53076928, "body": "To get meaningful answers, you&#39;d need to show why you&#39;re making the claims you do. There are excellent AVL tree libraries in open source (see e.g. <a href=\"http://savannah.gnu.org/projects/avl\" rel=\"nofollow noreferrer\">savannah.gnu.org/projects/avl</a>) that will show you balance only needs 2 bits (libraries usually use 1 byte). No parent pointer is necessary. Additionally, it seems to be a consensus opinion that red-black trees are simpler and have slightly higher average performance (avl lookups are a bit faster, but insertion/deletion is slower, and these dominate in many applications). E.g. java libs use red-black trees in sources I&#39;ve looked at."}, {"owner": {"reputation": 169, "user_id": 4881119, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2b10cdf18445b49539e8e4382e0659b?s=128&d=identicon&r=PG&f=1", "display_name": "SuperHeroY", "link": "https://stackoverflow.com/users/4881119/superheroy"}, "reply_to_user": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1442418897, "post_id": 32612696, "comment_id": 53077357, "body": "@Gene: Thanks for the library"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1442420931, "post_id": 32612696, "comment_id": 53078691, "body": "If you don&#39;t need to delete nodes (except at the end when you delete all of them), you can keep all the nodes in an array (or a C++ <code>std::vector&lt;avl_node&gt;</code>, to get convenient append of new nodes with realloc when needed).  Then your pointer fields only need to hold an array index, which can be 16 or 32 bits.  Alternatively, if you can do memory allocation in the low 4GB, they can be real pointers but still only 4B.  (The Linux x32 ABI works this way: CPU in 64bit mode, register-call ABI, but pointers are 32b.  <a href=\"https://sourceware.org/glibc/wiki/x32\" rel=\"nofollow noreferrer\">sourceware.org/glibc/wiki/x32</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1442419502, "post_id": 32613248, "comment_id": 53077765, "body": "skiplist : <a href=\"https://github.com/nmmmnu/HM3/blob/master/skiplist.h\" rel=\"nofollow noreferrer\">github.com/nmmmnu/HM3/blob/master/skiplist.h</a>. note this skiplist is bit specialized and can not be used without rewriting at least the part for compare / store pairs."}], "tags": [], "owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1442419693, "last_edit_date": 1442419693, "creation_date": 1442418452, "answer_id": 32613248, "question_id": 32612696, "link": "https://stackoverflow.com/questions/32612696/self-balancing-avl-tree-with-low-memory-usage/32613248#32613248", "title": "Self Balancing AVL Tree with low memory usage?", "body": "<p>I has similar project and I did similar aesearch to yours.</p>\n\n<p>My answer is based on pure technical side, no to the AVL algorithm.</p>\n\n<p>You can try pack the struct/class. Despate what everyone say, this will not hurt performance on x86 machines.</p>\n\n<p>Edit:<br>\nyou definitely need to remove pointer to the parent. Instead of top node, Wrap everything in a master class.</p>\n\n<p>Then you probably be able to pack balance in 2 bytes, but it will reduce the overal size of the tree.</p>\n\n<p>Then at some point you probably find that standard (linux) malloc allocate lots of additional space. This can be fixed with jemalloc. However, jemalloc performance is slower than standard malloc.</p>\n\n<p>If you want, you can try google's tcmalloc. Its performance is bteer thanstandard malloc and  mem usage is on the middle between standard malloc andbjemalloc. However tcmalloc is considered beta or unstable.</p>\n\n<p>I also will suggest If you can, store data directly inside your tree node, e.g. do not use pointer. This will save 8 bytes and one additional allocation.</p>\n\n<p>As final node, please do check std::map and std::set - those are red black trees and working extremly well.</p>\n\n<p>Please do check skip lists. I will add comment to my implementation later. My skip list have performance similar to std::map (bit slower, I can not do good comparisson), but memory usage is 20 - 30% better.</p>\n"}], "owner": {"reputation": 169, "user_id": 4881119, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2b10cdf18445b49539e8e4382e0659b?s=128&d=identicon&r=PG&f=1", "display_name": "SuperHeroY", "link": "https://stackoverflow.com/users/4881119/superheroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "closed_date": 1442418569, "accepted_answer_id": 32613248, "answer_count": 1, "score": 0, "last_activity_date": 1442419693, "creation_date": 1442416829, "last_edit_date": 1442417066, "question_id": 32612696, "link": "https://stackoverflow.com/questions/32612696/self-balancing-avl-tree-with-low-memory-usage", "closed_reason": "Needs more focus", "title": "Self Balancing AVL Tree with low memory usage?", "body": "<p>A Self Balancing AVL Tree is usually implemented with a list. Each node contains:</p>\n\n<pre><code>pointer to parent (8 bytes on 64 bit apps)\npointer to left child (8 bytes on 64 bit apps)\npointer to right child (8 bytes on 64 bit apps)\nbalance (4 bytes)\n\npointer to the data struct (8 bytes on 64 bit apps)\n</code></pre>\n\n<p>Because the data are aligned in memory we need <code>40 bytes</code> per item.</p>\n\n<p>In my application I need <strong>a)</strong> extremely fast lookup, <strong>b)</strong> very fast insert and <strong>c)</strong> low memory usage.</p>\n\n<p><strong>Q</strong>: Is it possible to reduce the memory usage of the Self Balancing AVL Tree data structure?</p>\n"}, {"tags": ["c++", "qt", "winapi"], "comments": [{"owner": {"reputation": 1324, "user_id": 5075760, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bd79762b2995633ed649ee95711ab20c?s=128&d=identicon&r=PG&f=1", "display_name": "PBS", "link": "https://stackoverflow.com/users/5075760/pbs"}, "edited": false, "score": 0, "creation_date": 1442421055, "post_id": 32612627, "comment_id": 53078788, "body": "Could it be that you&#39;re not running an event loop for the native window?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1324, "user_id": 5075760, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bd79762b2995633ed649ee95711ab20c?s=128&d=identicon&r=PG&f=1", "display_name": "PBS", "link": "https://stackoverflow.com/users/5075760/pbs"}, "edited": false, "score": 0, "creation_date": 1442421430, "post_id": 32612627, "comment_id": 53079035, "body": "@PBS: Qt dispatches native window messages already. When you&#39;re using a <code>QGuiApplication</code> you cannot not have a message loop."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 1324, "user_id": 5075760, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bd79762b2995633ed649ee95711ab20c?s=128&d=identicon&r=PG&f=1", "display_name": "PBS", "link": "https://stackoverflow.com/users/5075760/pbs"}, "edited": false, "score": 0, "creation_date": 1442421448, "post_id": 32612627, "comment_id": 53079049, "body": "@PBS Qt runs a native message loop and the <code>GetMessage</code> call has a <code>NULL</code> <code>hWnd</code>. Qt&#39;s event loop will dispatch all messages, to all windows running in a given thread. What you say would only apply if <code>Qt</code> called <code>GetMessage</code> with a non-null <code>hWnd</code>. Besides that quirk, it&#39;s not even possible to &quot;run&quot; an event loop for a certain native window only."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1442421578, "post_id": 32612627, "comment_id": 53079115, "body": "&quot;It seems to be related to this&quot; No, that&#39;s an unrelated issue."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1442421670, "post_id": 32612627, "comment_id": 53079171, "body": "It&#39;s a Qt bug. An answer would contain a workaround. It&#39;s supposed to work."}, {"owner": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "edited": false, "score": 0, "creation_date": 1442472820, "post_id": 32612627, "comment_id": 53098310, "body": "If you want to work with native windows, did you set AA_NativeWindows flag?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "edited": false, "score": 0, "creation_date": 1442480752, "post_id": 32612627, "comment_id": 53102653, "body": "@Milovidov No, I suppose it goes to the <code>widget </code>? I will try that."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "edited": false, "score": 0, "creation_date": 1442485992, "post_id": 32612627, "comment_id": 53105725, "body": "@Milovidov: The <a href=\"http://doc.qt.io/qt-5/qt.html#ApplicationAttribute-enum\" rel=\"nofollow noreferrer\">AA_NativeWindows</a> flag <i>&quot;ensures that widgets have native windows&quot;</i>. It is used when you want all of your widgets to be backed by native windows. It has no effect, when you&#39;re creating a native window and create a widget container for it."}, {"owner": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1442490263, "post_id": 32612627, "comment_id": 53108084, "body": "@IInspectable theoretically, yes. But in practice windows environment can change concrete window behaviour. Flag AA_NativeWindows change windows environment around window in container."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "edited": false, "score": 0, "creation_date": 1442490967, "post_id": 32612627, "comment_id": 53108465, "body": "@Milovidov Setting <code>AA_NativeWindows</code> on the container widget causes a crash somewhere deep inside Qt. Guess I have to use <code>QOpenGLWidget</code> and port everything over."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "edited": false, "score": 0, "creation_date": 1442494130, "post_id": 32612627, "comment_id": 53110400, "body": "@Milovidov: Are you suggesting, that the documentation is wrong? Or are you just promoting cargo-cult programming practices (<i>&quot;Hey, this worked for me, although I don&#39;t know why. Give it a try!&quot;</i>)."}, {"owner": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1442495042, "post_id": 32612627, "comment_id": 53110993, "body": "@IInspectable where I say, that documentation Is wrong? In documentation nothing about AA_NativeWindows flag in window container paragraph and this flag can really can affect to native win32 windows event looping, therefore can affect to native window, that integrated to QWidget."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "edited": false, "score": 0, "creation_date": 1442496088, "post_id": 32612627, "comment_id": 53111694, "body": "@Milovidov: The windows event loop in Qt <b>never</b> accesses this particular application attribute. Consequently, it doesn&#39;t change message handling. Unless you have specific information, don&#39;t just sprout out guesstimates, that were poorly contrived."}, {"owner": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1442496377, "post_id": 32612627, "comment_id": 53111891, "body": "@IInspectable man, just understand, if you will use this attribute, this will change event looping in Windows OS, because many windows will be created, and Qt application will handle these events, including resize events. This flag change environment for window in container and can affect to him bihaviour,"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "edited": false, "score": 1, "creation_date": 1442497233, "post_id": 32612627, "comment_id": 53112549, "body": "@Milovidov: You <b>cannot</b> change event looping in Windows, and Qt doesn&#39;t. It simply retrieves messages, and dispatches them. Like any Windows application does. The number of windows does not make the least bit of a difference. Whatever <i>&quot;changes environment for window in container&quot;</i> is supposed to mean, it&#39;s made up. Either provide specific information (which you cannot), or just let it rest (a viable option)."}, {"owner": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1442497479, "post_id": 32612627, "comment_id": 53112722, "body": "@IInspectable imagine two states - with once win32 window and with five win32 windows. Is win32 event loop will be different for these states?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "edited": false, "score": 0, "creation_date": 1442497599, "post_id": 32612627, "comment_id": 53112803, "body": "@Milovidov: No. Both scenarios call <code>GetMessage</code> and <code>DispatchMessage</code>. The latter knows, where the message should go. Not the least bit of a difference. You don&#39;t seem to have answered a whole lot of <a href=\"https://stackoverflow.com/questions/tagged/winapi\">winapi</a> questions, and it appears you don&#39;t have the background to really know, how a Windows application (and a Qt-application on Windows) works. You are just guessing along. This isn&#39;t very helpful."}, {"owner": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1442497812, "post_id": 32612627, "comment_id": 53112955, "body": "@IInspectable the state machine of event looping of course not changing, but count of events and possible interwindows communication via windows events can be. This Is windows environment."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "edited": false, "score": 0, "creation_date": 1442497962, "post_id": 32612627, "comment_id": 53113053, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/89923/discussion-between-iinspectable-and-milovidov\">continue this discussion in chat</a>."}], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3370, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1442431397, "creation_date": 1442416628, "last_edit_date": 1495540308, "question_id": 32612627, "link": "https://stackoverflow.com/questions/32612627/embedding-a-native-window-in-qt", "title": "Embedding a native window in Qt", "body": "<p>I am trying to put a WinApi window into a Qt user interface for legacy reasons. It seems fairly straightforward:</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    HWND hwnd = CreateWindow(L\"STATIC\", L\"Testwindow\", 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    QWidget *widget = QWidget::createWindowContainer(QWindow::fromWinId((WId)hwnd));\n    ui-&gt;horizontalLayout-&gt;addWidget(widget);\n}\n</code></pre>\n\n<p>The WinApi window correctly appears inside the Qt window, however, resizing only works sometimes, leaving an ugly half resized window behind and I get this warning 4 times every second or so:</p>\n\n<blockquote>\n  <p>QWindowsWindow::setGeometryDp: Unable to set geometry 366x366+20+285 on QWindow/''. Resulting geometry:  116x0+8+30 (frame: 0, 0, 0, 0, custom margin: 0, 0, 0, 0, minimum size: 0x0, maximum size: 16777215x16777215).</p>\n</blockquote>\n\n<p>It seems to be related to <a href=\"https://stackoverflow.com/questions/22494839/qt-adding-custom-widget-to-a-layout\">this</a>, which appearently has a solution which was never posted.</p>\n\n<p>The resizing problem looks somewhat like <a href=\"https://stackoverflow.com/questions/6547131/qt-window-resize-problem\">this</a>, but I am using a layout hierarchy as suggested and the problem persists.</p>\n\n<p>There seems to be an <a href=\"https://stackoverflow.com/questions/28786172/qt5-qwidgetcreate-with-win32-hwnd-embedding-not-longer-working-after-port-fr\">alternative way to embed a native window</a> using <code>QWidget::create(native_handle)</code>, but that one crashes on me.</p>\n\n<p>How do I embed a native window in Qt so that it works correctly with resizing and has no <code>QWindowsWindow::setGeometryDp</code> issues?</p>\n\n<p>Platform is Windows 7 with Qt 5.5.0 on VS 2013.</p>\n"}, {"tags": ["java", "c#", "c++", "dll"], "owner": {"reputation": 91, "user_id": 5333331, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70304d04e840eba5ec188071efff13d9?s=128&d=identicon&r=PG&f=1", "display_name": "ThisDude", "link": "https://stackoverflow.com/users/5333331/thisdude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442416049, "creation_date": 1442416049, "question_id": 32612401, "link": "https://stackoverflow.com/questions/32612401/trying-to-convert-a-java-jna-call-to-c-dll-call", "title": "Trying to Convert a Java JNA call to C# DLL Call", "body": "<p>I have a Java DLL call through JNA, now i'm trying to convert it to C#...\nI've been trying to convert the structure call to C# and i think i'm making it work little by little until i get to this Codes..</p>\n\n<p>Original Call:</p>\n\n<pre><code>bool GetQuotes(int, double*, double*)\n</code></pre>\n\n<p>JNa Converted Call:</p>\n\n<pre><code>byte GetQuotes(int BusConnectorID, DoubleBuffer Buf1, DoubleBuffer Buf2);\nbyte GetQuotes(int BusConnectorID, DoubleByReference Buf1, DoubleByReference Buf2);\n</code></pre>\n\n<p>And, these calls also looks confusing to me, even though i can convert char* to Pointer name in C#</p>\n\n<p>Original Codes:</p>\n\n<pre><code>int CreateConnection(int, char*)\nbool GetConnectionName(int, BYTE, char[256])\nchar GetConnectionsCount(int)\nDWORD GetDataSize(int)\n</code></pre>\n\n<p>JNA Converted Codes:</p>\n\n<pre><code>@deprecated\nint CreateConnection(int BusConnectorID, ByteBuffer ConnectionName);\nint CreateConnection(int BusConnectorID, Pointer ConnectionName);\n@Deprecated \nbyte GetConnectionName(int BusConnectorID, byte ConnectionNumber, Pointer ConnectionName);\nbyte GetConnectionsCount(int BusConnectorID);\nbyte GetConnectionName(int BusConnectorID, byte ConnectionNumber, ByteBuffer ConnectionName);\n}\nbyte GetConnectionName(int BusConnectorID, byte ConnectionNumber, Pointer ConnectionName);\nint GetDataSize(int BusConnectorID);\n</code></pre>\n\n<p>I'm really confused about converting this to C# call as there is none of the equivalent i could see online...</p>\n\n<p>The Codes and the JNA/Java Converted Codes are listed respectively..</p>\n\n<p><strong>I want to make them work on C# code..</strong></p>\n\n<p>I'm using this to call the DLL code in C#.</p>\n\n<pre><code>[DllImport(\"ipclib.dll\", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Ansi, ExactSpelling = false)]\n    public static extern bool Functions(int types);\n</code></pre>\n\n<p>Thanks for Taking your time..</p>\n"}, {"tags": ["c++", "qt", "macros", "c-preprocessor", "moc"], "comments": [{"owner": {"reputation": 42096, "user_id": 592323, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5df027e3c31ae3b8755c0ea377f951a0?s=128&d=identicon&r=PG", "display_name": "leemes", "link": "https://stackoverflow.com/users/592323/leemes"}, "edited": false, "score": 0, "creation_date": 1442416360, "post_id": 32612309, "comment_id": 53075666, "body": "I guess it doesn&#39;t change anything, but you could try <code>Q_SIGNAL</code> instead of <code>signals</code>... AFAIK moc doesn&#39;t expand macros very well. It does to some extent, but since it doesn&#39;t stick to the standard, I always avoided them in headers of QObject derived classes."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1442421865, "post_id": 32612309, "comment_id": 53079301, "body": "This seems like an X-Y problem to me. The first paragraph of your question should be much more elaborate. Please explain what exactly are you trying to do. What is your class hierarchy, what objects have what properties, where are the template classes, and why do you need all this. The &quot;for the record&quot; paragraph is a part of that, but still doesn&#39;t provide enough information."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1442426073, "post_id": 32612309, "comment_id": 53081655, "body": "I&#39;m also not sure what you mean by &quot;QML does not allow connections/property bindings to objects outside of the main thread&quot;"}, {"owner": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1442429199, "post_id": 32612309, "comment_id": 53083439, "body": "@KubaOber Attempting to connect/bind/invoke from QML to a C++ <code>QObject</code> running in a non-main thread results in &quot;Illegal attempt to connect to ____ that is in a different thread than the QML engine&quot;."}, {"owner": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1442429797, "post_id": 32612309, "comment_id": 53083766, "body": "@KubaOber I have <code>QObject</code> derived types in multiple threads, many of which have QML representations (i.e. QML types that can display the data these instances carry), however I can&#39;t bind to any of their properties due to the above flaw - so I create proxy objects in the main thread which allows the two to communicate."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1442452805, "post_id": 32612309, "comment_id": 53092585, "body": "@cmannett85 &quot;Illegal attempt to connect to ____ that is in a different thread than the QML engine&quot; Admittedly, that&#39;s a stupid shortcoming. How did I not run into that yet I&#39;m not sure, I guess I was lucky. Live and learn. Thanks for making me aware of that."}, {"owner": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "reply_to_user": {"reputation": 42096, "user_id": 592323, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5df027e3c31ae3b8755c0ea377f951a0?s=128&d=identicon&r=PG", "display_name": "leemes", "link": "https://stackoverflow.com/users/592323/leemes"}, "edited": false, "score": 0, "creation_date": 1442500110, "post_id": 32612309, "comment_id": 53114615, "body": "@leemes <code>Q_SIGNAL</code> did indeed work, make it an answer and I&#39;ll accept it."}, {"owner": {"reputation": 42096, "user_id": 592323, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5df027e3c31ae3b8755c0ea377f951a0?s=128&d=identicon&r=PG", "display_name": "leemes", "link": "https://stackoverflow.com/users/592323/leemes"}, "edited": false, "score": 0, "creation_date": 1443307027, "post_id": 32612309, "comment_id": 53442679, "body": "@cmannett85 Glad I could help. Sorry that I wrote the full answer so late, but I had no time before."}], "answers": [{"comments": [{"owner": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "edited": false, "score": 0, "creation_date": 1442429431, "post_id": 32614442, "comment_id": 53083578, "body": "<code>Sy_test</code> is just example code to experiment with the macros, non of this threadsafe, nor was it meant to be.  I&#39;ve already written proxies that fully forward all properties, <code>Q_INVOKABLE</code> methods, and public slots - but the whole point of this exercise was to reduce all the associated boiler plate that comes with that."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "edited": false, "score": 0, "creation_date": 1442452738, "post_id": 32614442, "comment_id": 53092575, "body": "@cmannett85 You need one proxy class that can forward from any other class. A universal one :) OK, challenge accepted."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1442422420, "creation_date": 1442422420, "answer_id": 32614442, "question_id": 32612309, "link": "https://stackoverflow.com/questions/32612309/using-a-macro-to-create-qobject-derived-classes/32614442#32614442", "title": "Using a macro to create QObject derived classes", "body": "<p>The vagaries of <code>moc</code> aside, your wrapper is not thread-safe. The property getter is not invoked from the correct thread. So I don't see any point of the wrapper. You might as well use the wrapped class directly from QML, not the wrapper.</p>\n\n<p>To be thread-safe, your wrapper should be caching the wrapped property's value, so that the reads always happen from the local copy.</p>\n\n<p>At that point you might as well write a fully dynamic wrapper that thread-safely forwards <em>all</em> properties from the wrapped object. Using the metaobject system you can generate everything on the fly - the copies of the property values, etc. As far as properties go, you can copy the entire binary descriptor as your wrapper pretends to have the same properties.</p>\n"}, {"comments": [{"owner": {"reputation": 1742, "user_id": 1079430, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6bf00489520e8f013752bac52318def2?s=128&d=identicon&r=PG", "display_name": "GuyGizmo", "link": "https://stackoverflow.com/users/1079430/guygizmo"}, "edited": false, "score": 0, "creation_date": 1463418115, "post_id": 32802676, "comment_id": 62045427, "body": "Thanks for this! I was wondering how I could use macros to generate signals, and the obvious way to do it simply doesn&#39;t work."}], "tags": [], "owner": {"reputation": 42096, "user_id": 592323, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5df027e3c31ae3b8755c0ea377f951a0?s=128&d=identicon&r=PG", "display_name": "leemes", "link": "https://stackoverflow.com/users/592323/leemes"}, "is_accepted": true, "score": 5, "last_activity_date": 1443306611, "creation_date": 1443306611, "answer_id": 32802676, "question_id": 32612309, "link": "https://stackoverflow.com/questions/32612309/using-a-macro-to-create-qobject-derived-classes/32802676#32802676", "title": "Using a macro to create QObject derived classes", "body": "<p><code>moc</code> doesn't like macros very well. It expands them to some degree, but it fails when they get complicated\u00b9.</p>\n\n<p>You can try to replace <code>signals:</code> with <code>public:</code>\u00b2 (i.e. manually expanding the <code>signals</code> macro), andtell moc that you want the function to be a signal by putting <code>Q_SIGNAL</code> in front of the function declaration.</p>\n\n<p><strong>Replace</strong></p>\n\n<pre><code>signals:\\\n    void Notifier( Type value );\\\n</code></pre>\n\n<p><strong>with</strong></p>\n\n<pre><code>public:\\\n    Q_SIGNAL void Notifier( Type value );\\\n</code></pre>\n\n<hr>\n\n<p><sub>\n\u00b9: for some definition of <em>complicated</em>... I don't know when it fails, but I ran into some different problems in the past. From my experience my guess is that moc has problems when a macro body contains another macro, like <code>signals</code> in your example. But this is just a guess - maybe the kind of macros moc fails at is something else.\n</sub></p>\n\n<p><sub>\n\u00b2: Before Qt 5, that used to be <code>protected</code>.\n</sub></p>\n"}, {"tags": [], "owner": {"reputation": 3839, "user_id": 2164788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fe81c74a9d59c63214ab00fb9698c9?s=128&d=identicon&r=PG", "display_name": "evilruff", "link": "https://stackoverflow.com/users/2164788/evilruff"}, "is_accepted": false, "score": 0, "last_activity_date": 1467840976, "creation_date": 1467840976, "answer_id": 38234185, "question_id": 32612309, "link": "https://stackoverflow.com/questions/32612309/using-a-macro-to-create-qobject-derived-classes/38234185#38234185", "title": "Using a macro to create QObject derived classes", "body": "<p>There is an excellent piece of code, you can google for qmltricks, it has everything you need as a good start.</p>\n\n<p>You will need just one header. There is a room for extend to support read only properties or custom getters/setters.. but I would suggest to hae a look. I cant find an original.page now, saw a presentation on last Qt Summit, you probably can check qt site for hands-on materials. </p>\n\n<p>Below a link on a github, there are several versions around available.</p>\n\n<p><a href=\"https://github.com/Cavewhere/lib-qt-qml-tricks/blob/master/include/QQmlHelpers\" rel=\"nofollow\">https://github.com/Cavewhere/lib-qt-qml-tricks/blob/master/include/QQmlHelpers</a></p>\n"}], "owner": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 2, "accepted_answer_id": 32802676, "answer_count": 3, "score": 5, "last_activity_date": 1467840976, "creation_date": 1442415817, "last_edit_date": 1467793683, "question_id": 32612309, "link": "https://stackoverflow.com/questions/32612309/using-a-macro-to-create-qobject-derived-classes", "title": "Using a macro to create QObject derived classes", "body": "<p>I'm trying to simplify (i.e. get rid of loads of boilerplate code) the creation of <code>QObject</code> wrapper classes that forward property access of other <code>QObject</code> derived classes.</p>\n\n<p>To start small, I'm just trying it with one property:</p>\n\n<pre><code>// Sy_test.h - The wrapped class\nclass Sy_test : public QObject\n{\n    Q_OBJECT\n    Q_PROPERTY( bool prop READ getProp WRITE setProp NOTIFY propChanged )\n\npublic:\n    Sy_test( QObject* parent = nullptr ) :\n        QObject{ parent },\n        prop_{ false } {}\n\n    bool getProp() const { return prop_; }\n\npublic slots:\n    void setProp( bool value )\n    {\n        if ( value != prop_ ) {\n            prop_ = value;\n            emit propChanged( prop_ );\n        }\n    }\n\nsignals:\n    void propChanged( bool value );\n\nprivate:\n    bool prop_;\n};\n\n// Sy_proxy.h - The wrapper generator\n#define SY_PROXYPROPERTY( Type, Name, Getter, Setter, Notifier )\\\nprivate:\\\n    Q_PROPERTY( Type Name READ Getter WRITE Setter NOTIFY Notifier )\\\n\\\npublic:\\\n    Type Getter() const { return target_-&gt;Getter(); }\\\n\\\npublic slots:\\\n    void Setter( Type value ) { target_-&gt;Setter( value ); }\\\n\\\nsignals:\\\n    void Notifier( Type value );\\\n\\\nprivate:\\\n    void setConnection()\\\n    {\\\n        connect( target_, &amp;std::remove_pointer&lt; decltype( target_ ) &gt;::type::Notifier,\\\n                 this,    &amp;std::remove_pointer&lt; decltype( this    ) &gt;::type::Notifier );\\\n    }\n\n#define SY_PROXY( ProxyName, TargetType, Prop1 )\\\nclass ProxyName : public QObject\\\n{\\\n    Q_OBJECT \\\n    Prop1 \\\n\\\npublic:\\\n    ProxyName( TargetType* target ) :\\\n        target_{ target }\\\n    {\\\n        setConnection();\\\n    }\\\n\\\n    virtual ~ProxyName() {}\\\n\\\nprivate:\\\n    TargetType* target_;\\\n};\n\n// This should create a Sy_test wrapper class called Sy_testProxy\nSY_PROXY( Sy_testProxy,\n          Sy_test,\n          SY_PROXYPROPERTY( bool, prop, getProp, setProp, propChanged ) )\n</code></pre>\n\n<p>So the <code>SY_PROXY</code> macro should create a class called <code>Sy_testProxy</code> that carries a copy of the <code>Sy_test::prop</code> property with implementations that just forward requests/signals.</p>\n\n<p>And it <em>almost</em> does.  Looking at the post-preprocessor output (I'm using g++, so the .ii files), I can see the <code>Sy_testProxy</code> class is built and it's of the same form as the <code>Sy_test</code> class.  However, I get an error:</p>\n\n<pre><code>../CppTest/Sy_proxy.h:47: Error: NOTIFY signal 'propChanged' of property 'prop' does not exist in class Sy_testProxy.\nmake: *** [moc_Sy_proxy.cpp] Error 1\n</code></pre>\n\n<p>So it looks like the <code>moc</code> is failing to parse my macro magic; although I'm not sure where as clearly the <code>SY_PROXY</code> macro is present (the error is coming from a class called <code>Sy_testProxy</code>), and <code>SY_PROXYPROPERTY</code> must be valid too (as the <code>moc</code> must have read the <code>Q_PROPERTY</code> macro from it).  Can anyone see where I've gone wrong?</p>\n\n<p>For the record: I hate macros like everyone else, but I've fell into using them due to the <code>moc</code>'s aversion to templates and <code>QObject</code> virtual inheritance.  This investigation was triggered because I had a collection of instances performing heavy calculations in a separate thread, but they drive QML representations.  However QML does not allow connections/property bindings to objects outside of the main thread, so I've been forced into creating proxy object that live in the main thread.  If anyone has a better idea, I'm very open to them!</p>\n"}, {"tags": ["c++", "opengl", "lighting", "shadow-mapping"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 1770317, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bca9a5ac4624acbaff55ff5733ebdc58?s=128&d=identicon&r=PG", "display_name": "Radu", "link": "https://stackoverflow.com/users/1770317/radu"}, "edited": false, "score": 0, "creation_date": 1443423752, "post_id": 32805307, "comment_id": 53470646, "body": "<code>{ GL_TEXTURE_CUBE_MAP_NEGATIVE_Y, math::vec3( 0.0f, 1.0, 0.0f), math::vec3(0.0f, 0.0f, -1.0f) }</code>"}], "tags": [], "owner": {"reputation": 139, "user_id": 1770317, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bca9a5ac4624acbaff55ff5733ebdc58?s=128&d=identicon&r=PG", "display_name": "Radu", "link": "https://stackoverflow.com/users/1770317/radu"}, "is_accepted": false, "score": 0, "last_activity_date": 1443336356, "creation_date": 1443336356, "answer_id": 32805307, "question_id": 32612284, "link": "https://stackoverflow.com/questions/32612284/opengl-rendering-point-light-with-cube-shadow-map/32805307#32805307", "title": "OpenGL - Rendering point light with cube shadow map?", "body": "<p>These problems were caused by inverted Y's on cubemaps.</p>\n\n<p>I used:</p>\n\n<pre><code>{ GL_TEXTURE_CUBE_MAP_POSITIVE_Y, math::vec3( 0.0f,-1.0, 0.0f), math::vec3(0.0f, 0.0f, 1.0f) },\n{ GL_TEXTURE_CUBE_MAP_NEGATIVE_Y, math::vec3( 0.0f, 1.0, 0.0f), math::vec3(0.0f, 0.0f, 1.0f) },\n</code></pre>\n\n<p>for setting up the shadow cubemap and:</p>\n\n<pre><code>vL.y *= -1.0;\n</code></pre>\n\n<p>inside computeShadowFactor() before sampling the shadow cubemap texture.</p>\n\n<p>Note: My +Z axis goes into the monitor - left hand coordinate system.</p>\n"}], "owner": {"reputation": 139, "user_id": 1770317, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bca9a5ac4624acbaff55ff5733ebdc58?s=128&d=identicon&r=PG", "display_name": "Radu", "link": "https://stackoverflow.com/users/1770317/radu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443336356, "creation_date": 1442415745, "last_edit_date": 1442575526, "question_id": 32612284, "link": "https://stackoverflow.com/questions/32612284/opengl-rendering-point-light-with-cube-shadow-map", "title": "OpenGL - Rendering point light with cube shadow map?", "body": "<p>I'm having trouble rendering cube shadow map. Negative and positive seem to be reversed and I can't figure out why. Tried to reverse targets and directions, but I get event weirder output.</p>\n\n<p>Code:</p>\n\n<pre><code>// init\nglGenTextures(1, &amp;mShadowCubeTex);\nglBindTexture(GL_TEXTURE_CUBE_MAP, mShadowCubeTex);\nfor(int i = 0; i &lt; 6; i++)\n  glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, GL_DEPTH_COMPONENT24, SHADOW_WIDTH, SHADOW_WIDTH, 0, GL_DEPTH_COMPONENT, GL_FLOAT, NULL);\n/* + filters + wrapping */\nglTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_COMPARE_MODE, GL_COMPARE_REF_TO_TEXTURE);\nglTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_COMPARE_FUNC, GL_LEQUAL);\n\nglGenFramebuffers(1, &amp;mShadowFbo);\nglBindFramebuffer(GL_FRAMEBUFFER, mShadowFbo);\nglDrawBuffer(GL_NONE);\nglReadBuffer(GL_NONE);\nglFramebufferTexture(GL_FRAMEBUFFER, GL_DEPTH_COMPONENT, mShadowCubeTex, 0);\nglBindFramebuffer(GL_FRAMEBUFFER, 0);\n\n// render\nstatic const struct {\n  GLenum eTarget;\n  vec3   vDirection;\n  vec3   vUp;\n} oPointLightConfigs[6] = {\n  { GL_TEXTURE_CUBE_MAP_POSITIVE_X, vec3( 1.0f, 0.0, 0.0f), vec3(0.0f, 1.0f, 0.0f) },\n  { GL_TEXTURE_CUBE_MAP_NEGATIVE_X, vec3(-1.0f, 0.0, 0.0f), vec3(0.0f, 1.0f, 0.0f) },\n  { GL_TEXTURE_CUBE_MAP_POSITIVE_Y, vec3( 0.0f, 1.0, 0.0f), vec3(0.0f, 0.0f,-1.0f) },\n  { GL_TEXTURE_CUBE_MAP_NEGATIVE_Y, vec3( 0.0f,-1.0, 0.0f), vec3(0.0f, 0.0f, 1.0f) },\n  { GL_TEXTURE_CUBE_MAP_POSITIVE_Z, vec3( 0.0f, 0.0, 1.0f), vec3(0.0f, 1.0f, 0.0f) },\n  { GL_TEXTURE_CUBE_MAP_NEGATIVE_Z, vec3( 0.0f, 0.0,-1.0f), vec3(0.0f, 1.0f, 0.0f) }\n};\n\n// shadow pass\nfor(int i = 0; i &lt; 6; i++)\n{\n  glBindFramebuffer(target, mShadowFbo);\n  glViewport(0, 0, SHADOW_WIDTH, SHADOW_WIDTH);\n  glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, oPointLightConfigs[i].eTarget, mShadowCubeTex, 0);\n\n  glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);\n  glDrawBuffer(GL_NONE);\n  glReadBuffer(GL_NONE);\n  glCullFace(GL_FRONT);\n  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n  for(CModel* pModel : mModels)\n  {\n    if(pModel-&gt;hasOption(NO_SHADOW_CAST))\n    {\n      mNullProgram-&gt;use(); // no color output\n\n      mat4 M = pModel-&gt;getModelMatrix();\n      mat4 V = lookAt(pPointLight-&gt;getPosition(), oPointLightConfigs[i].vDirection, oPointLightConfigs[i].vUp);\n      mat4 P = mCamera-&gt;getProjectionMatrix();\n\n      pNullProgram-&gt;set(\"MVP\", P * V * M);\n\n      pModel-&gt;draw();\n    }\n  }\n}\n\n// color pass\nglBindFramebuffer(GL_FRAMEBUFFER, 0);\nglColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);\nglDrawBuffer(GL_BACK);\nglReadBuffer(GL_BACK);\nglClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\npLightProgram-&gt;use();\n\nglActiveTexture(GL_TEXTURE6); \nglBindTexture(GL_TEXTURE_2D, mShadowCubeTex);\n\npLightProgram-&gt;set(\"V\", mCamera-&gt;getViewMatrix());\npLightProgram-&gt;set(\"P\", mCamera-&gt;getProjectionMatrix());\n\n/* set program light uniforms */\n\nfor(CModel* pModel : mModels)\n{\n  pLightProgram-&gt;set(\"M\", pModel-&gt;getModelMatrix());\n\n  pModel-&gt;draw()\n}\n\n\n// lighting fragment shader\nfloat computeShadowFactor(in samplerCube sShadowMap, in vec3 vL) {\n  /* vL = vLightPosition - vVertexPosition */\n  vec3 vLAbs = abs(vL);\n  float fNear = 0.1;\n  float fFar  = 1000.0;\n  float fDepth = max(vLAbs.x, max(vLAbs.y, vLAbs.z));\n  fDepth = ((fFar + fNear) / (fFar - fNear)) - ((2.0 * fFar * fNear) / (fFar - fNear)) / fDepth;\n  fDepth = (fDepth + 1.0) * 0.5;\n\n  float fShadow = texture(sShadowMap, -vL).r; /* -vL = vVertexPosition - vLightPosition */\n  if(fDepth &gt; fShadow) \n    return 0.0;\n  return 1.0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/H8H8M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H8H8M.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/thMGr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/thMGr.png\" alt=\"enter image description here\"></a></p>\n\n<p>Update:</p>\n\n<p>I added + oPointLightConfigs[i].vDirection to...</p>\n\n<pre><code>V = lookat(pPointLight-&gt;mPosition, pPointLight-&gt;mPosition + oPointLightConfigs[i].vDirection, oPointLightConfigs[i].vUp);\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2MC6b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2MC6b.png\" alt=\"enter image description here\"></a></p>\n\n<p>At least now I get one shadow(instead of 6). But it's somehow reversed and the Y axis has no shadow. When the shadow passes from one cubemap face to another it get interrupted. Any hints?</p>\n"}, {"tags": ["c++", "googlemock"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1442415890, "post_id": 32612237, "comment_id": 53075310, "body": "Is that real code, copy-pasted from the file you&#39;re compiling?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 4, "creation_date": 1442415993, "post_id": 32612237, "comment_id": 53075409, "body": "It looks that <code>MOCK_CONST_METHOD0</code> is parsed as a member function name, not a macro, make sure the includes are correct"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1442416060, "post_id": 32612237, "comment_id": 53075457, "body": "Also make sure <code>Xyz</code> has a virtual destructor."}, {"owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1442416826, "post_id": 32612237, "comment_id": 53075974, "body": "@PiotrSkotnicki - you were correct - there was a missing #include &quot;gmock.h&quot;. Feel free to post that as answer. Sorry to waste everyone&#39;s time, but I have been banging my head against this for hours :-("}], "answers": [{"comments": [{"owner": {"reputation": 4560, "user_id": 149212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1048a09b7e2cb23e6339c8d334b0421?s=128&d=identicon&r=PG", "display_name": "Matt Hulse", "link": "https://stackoverflow.com/users/149212/matt-hulse"}, "edited": false, "score": 0, "creation_date": 1454529636, "post_id": 32613061, "comment_id": 58090113, "body": "FYI: I found that I got this same error when I tried to MOCK_METHOD11.  GMock doesn&#39;t support more than 10 parameters in a mocked method.  See <a href=\"http://stackoverflow.com/q/15539169/149212\">stackoverflow.com/q/15539169/149212</a>."}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 10, "last_activity_date": 1442417932, "creation_date": 1442417932, "answer_id": 32613061, "question_id": 32612237, "link": "https://stackoverflow.com/questions/32612237/google-mock-compile-error-error-function-name-is-not-a-type/32613061#32613061", "title": "Google mock compile error (error: \u2018&lt;function name&gt;\u2019 is not a type)", "body": "<p>The below error message:</p>\n\n<pre><code>error: \u2018vPrintStatus\u2019 is not a type\n</code></pre>\n\n<p>indicates that <code>MOCK_CONST_METHOD0(vPrintStatus, void());</code> was parsed by a compiler as a declaration of a member function, named <code>MOCK_CONST_METHOD0</code>, taking two parameters, one of <em>type</em> <code>vPrintStatus</code> (hence the error), and another being a function pointer type (<code>void(*)()</code> after adjustment). Clearly, this means that the definition of macro <code>MOCK_CONST_METHOD0</code> is not visible to the translation unit the mock declaration is part of. Make sure you have included <code>&lt;gmock/gmock.h&gt;</code> to that file.</p>\n"}, {"comments": [{"owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 0, "creation_date": 1575662716, "post_id": 57826214, "comment_id": 104654745, "body": "Get yourself normal font (like Iosevka etc) or syntax aware editor/IDE"}], "tags": [], "owner": {"reputation": 1977, "user_id": 1757491, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/0L1fU.jpg?s=128&g=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/1757491/travis"}, "is_accepted": false, "score": 0, "last_activity_date": 1567790690, "last_edit_date": 1567790690, "creation_date": 1567790135, "answer_id": 57826214, "question_id": 32612237, "link": "https://stackoverflow.com/questions/32612237/google-mock-compile-error-error-function-name-is-not-a-type/57826214#57826214", "title": "Google mock compile error (error: \u2018&lt;function name&gt;\u2019 is not a type)", "body": "<p>I had a similar issues and it turns out I was trying to use:</p>\n\n<p>MOCK_CONST_METHODO instead of </p>\n\n<p>MOCK_CONST_METHOD0 (zero works much better the O)</p>\n"}], "owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6129, "favorite_count": 0, "accepted_answer_id": 32613061, "answer_count": 2, "score": 9, "last_activity_date": 1567790690, "creation_date": 1442415593, "last_edit_date": 1442415804, "question_id": 32612237, "link": "https://stackoverflow.com/questions/32612237/google-mock-compile-error-error-function-name-is-not-a-type", "title": "Google mock compile error (error: \u2018&lt;function name&gt;\u2019 is not a type)", "body": "<p>My actual code (class name changed, some cut, as it is company confidential, but there is only one compiler error, so what I cut should not be affecting things)</p>\n\n<pre><code>class Xyz\n{\npublic:\n   virtual void vPrintStatus() const;  \n};\n</code></pre>\n\n<p>and its mock  </p>\n\n<pre><code>class MockXyz : public Xyz\n{\n public:\n    MOCK_CONST_METHOD0(vPrintStatus,\n            void());\n};\n</code></pre>\n\n<p>Which gives me a compiler error : <code>error: \u2018vPrintStatus\u2019 is not a type</code></p>\n\n<p>#includes, etc are OK. The compiler is obviously finding <code>vPrintStatus</code>, as, if I change it to something undefined:</p>\n\n<pre><code>MOCK_CONST_METHOD0(independence,\n                void());\n</code></pre>\n\n<p>I get <code>error: \u2018independence\u2019 has not been declared</code>.</p>\n\n<p>So, the compiler finds <code>vPrintStatus</code> and appears to know its type (or, at least, what type it is not). </p>\n\n<p>I am sure that I am following the syntax for <code>MOCK_CONST_METHOD0</code> - the mock macro shoudl be expecting a function name, not a type, as its first parameter.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2013", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 3, "creation_date": 1442415996, "post_id": 32612210, "comment_id": 53075411, "body": "The problem is related to graphics interop applications that are being run on an Optimus laptop.  Your laptop is using the Intel graphics device.  When an OpenGL or D3D context gets created, it is being created on the intel device.  You can force this to happen instead on the CUDA device (which is needed for proper CUDA/graphics interop) using one of several methods, one of which is to create an <a href=\"http://docs.nvidia.com/cuda/optimus-developer-guide/index.html#applications-with-graphics-interoperability\" rel=\"nofollow noreferrer\">application profile</a> in the NVIDIA display control panel."}, {"owner": {"reputation": 13, "user_id": 5342777, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207906164559898/picture?type=large", "display_name": "Lucas Lattari", "link": "https://stackoverflow.com/users/5342777/lucas-lattari"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1442416555, "post_id": 32612210, "comment_id": 53075795, "body": "It worked. Thank you!"}, {"owner": {"reputation": 1105, "user_id": 1089788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHSff.jpg?s=128&g=1", "display_name": "McLeary", "link": "https://stackoverflow.com/users/1089788/mcleary"}, "edited": false, "score": 0, "creation_date": 1442418426, "post_id": 32612210, "comment_id": 53076998, "body": "Promote this comment to an answer."}], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 2, "last_activity_date": 1442425513, "creation_date": 1442425513, "answer_id": 32615311, "question_id": 32612210, "link": "https://stackoverflow.com/questions/32612210/cuda-7-5-and-visual-studio-2013-some-examples-work-but-other-returns-cudaerror/32615311#32615311", "title": "Cuda 7.5 and Visual Studio 2013: Some examples work, but other returns cudaErrorDevicesUnavailable", "body": "<p>Most modern windows laptops with an Intel CPU that include an NVIDIA \"discrete\" GPU also use Intel \"integrated\" graphics in a cooperative arrangement, which NVIDIA brands <a href=\"http://www.nvidia.com/object/optimus_technology.html\" rel=\"nofollow\">Optimus</a>.</p>\n\n<p>The basic idea is that the NVIDIA GPU will perform some graphics tasks, in some situations, but other tasks, perhaps in other situations, will be performed by the Intel graphics.</p>\n\n<p>Typically, ordinary CUDA applications will run normally in this scenario.  The CUDA GPU is properly detected, and the CUDA runtime handles everything that is CUDA related on the NVIDIA GPU.</p>\n\n<p>Graphics tasks that have no bearing on CUDA will also run either on the Intel or the NVIDIA device, according to an Optimus heuristic, the details of which are not relevant here.</p>\n\n<p>However, for applications that use some form of graphics \"Interop\" with CUDA, some modification of the Optimus heuristic may be necessary.  CUDA/graphics interop <a href=\"http://docs.nvidia.com/cuda/optimus-developer-guide/index.html#applications-with-graphics-interoperability\" rel=\"nofollow\">requires</a> that the CUDA \"context\" and graphics \"context\" both be established on the NVIDIA GPU (for the purposes of this question, where only one NVIDIA GPU is present).  If the graphics context is established first, and no consideration is given to this, then the graphics context may be established on the Intel device, and the CUDA graphics interop will fail in that scenario.</p>\n\n<p>The solution is to force the graphics context to be established on the NVIDIA device for such applications, and the NVIDIA display driver control panel affords a mechanism (<a href=\"http://www.nvidia.com/object/profiles.html\" rel=\"nofollow\">\"profiles\"</a>) to make that happen.</p>\n"}], "owner": {"reputation": 13, "user_id": 5342777, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207906164559898/picture?type=large", "display_name": "Lucas Lattari", "link": "https://stackoverflow.com/users/5342777/lucas-lattari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 0, "accepted_answer_id": 32615311, "answer_count": 1, "score": 1, "last_activity_date": 1442425513, "creation_date": 1442415536, "last_edit_date": 1442419952, "question_id": 32612210, "link": "https://stackoverflow.com/questions/32612210/cuda-7-5-and-visual-studio-2013-some-examples-work-but-other-returns-cudaerror", "title": "Cuda 7.5 and Visual Studio 2013: Some examples work, but other returns cudaErrorDevicesUnavailable", "body": "<p>I have installed recently CUDA 7.5 and Visual Studio 2013 in Windows 8.1. After testing examples, it worked perfectly for some, such as Mandelbrot or matrixMul. However, testing examples such as Marching Cubes and Bilateral Filtering, I'm getting the following error: </p>\n\n<p><strong><em>\"CUDA Runtime API error 46: all CUDA-capable devices are busy or unavailable\"</em></strong></p>\n\n<p>I've tested \"deviceQuery\" and it worked. Also, I'm using CUDA in a ASUS notebook with Geforce GT630m. I've tried setting the compute mode to DEFAULT, but it didn't make any difference. </p>\n"}, {"tags": ["c++", "sse", "simd", "memory-alignment", "avx"], "comments": [{"owner": {"reputation": 2169, "user_id": 1071362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7ed34168c4b43cbfe73558fd148aff1?s=128&d=identicon&r=PG", "display_name": "anorm", "link": "https://stackoverflow.com/users/1071362/anorm"}, "edited": false, "score": 5, "creation_date": 1442415878, "post_id": 32612190, "comment_id": 53075304, "body": "A bit off topic, but remember to use <code>delete []</code> when deleting something allocated with <code>new []</code>."}, {"owner": {"reputation": 538, "user_id": 2950316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7716c1ef06d41777a5dee35a8116c2e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2950316/alexander"}, "edited": false, "score": 1, "creation_date": 1442416580, "post_id": 32612190, "comment_id": 53075810, "body": "did you try  _mm_malloc instead of new?"}, {"owner": {"reputation": 4964, "user_id": 556899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0620f543129132d44fef456b3ab31a39?s=128&d=identicon&r=PG", "display_name": "stgatilov", "link": "https://stackoverflow.com/users/556899/stgatilov"}, "edited": false, "score": 3, "creation_date": 1442418245, "post_id": 32612190, "comment_id": 53076876, "body": "I guess a simple summary would be <i>because new/malloc return 16-byte aligned pointer on x64; it&#39;s enough for SSE, but AVX needs 32-byte alignment</i>."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1442418602, "post_id": 32612190, "comment_id": 53077140, "body": "Relevant: <a href=\"http://stackoverflow.com/questions/12055822/compilation-of-a-simple-c-program-using-sse-intrinsics/12055862#12055862\" title=\"compilation of a simple c program using sse intrinsics\">stackoverflow.com/questions/12055822/&hellip;</a> (addresses 16 byte SSE alignment but answers are easily adapted for 32 byte AVX alignment)."}, {"owner": {"reputation": 4964, "user_id": 556899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0620f543129132d44fef456b3ab31a39?s=128&d=identicon&r=PG", "display_name": "stgatilov", "link": "https://stackoverflow.com/users/556899/stgatilov"}, "edited": false, "score": 1, "creation_date": 1442420351, "post_id": 32612190, "comment_id": 53078318, "body": "Perhaps this is interesting too: <a href=\"http://stackoverflow.com/questions/16376942/best-cross-platform-method-to-get-aligned-memory\" title=\"best cross platform method to get aligned memory\">stackoverflow.com/questions/16376942/&hellip;</a>"}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1493629748, "post_id": 32612190, "comment_id": 74476783, "body": "can you try align it yourself, e.g. allocate 128 bytes and make second pointer points whatever you need inside larger buffer? Just to see if it will work."}], "answers": [{"tags": [], "owner": {"reputation": 538, "user_id": 2950316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7716c1ef06d41777a5dee35a8116c2e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2950316/alexander"}, "is_accepted": false, "score": 6, "last_activity_date": 1442416823, "creation_date": 1442416823, "answer_id": 32612692, "question_id": 32612190, "link": "https://stackoverflow.com/questions/32612190/how-to-solve-the-32-byte-alignment-issue-for-avx-load-store-operations/32612692#32612692", "title": "How to solve the 32-byte-alignment issue for AVX load/store operations?", "body": "<p>There are the two intrinsics for memory management.\n _mm_malloc operates like a standard malloc, but it takes an additional parameter that specifies the desired alignment. In this case, a 32 byte alignment. When this allocation method is used, memory must be freed by the corresponding _mm_free call.</p>\n\n<pre><code>float *a = static_cast&lt;float*&gt;(_mm_malloc(sizeof(float) * ss , 32));\n...\n_mm_free(a);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4964, "user_id": 556899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0620f543129132d44fef456b3ab31a39?s=128&d=identicon&r=PG", "display_name": "stgatilov", "link": "https://stackoverflow.com/users/556899/stgatilov"}, "edited": false, "score": 0, "creation_date": 1442417890, "post_id": 32612833, "comment_id": 53076635, "body": "Could you please explain why you prefer POSIX-only function over platform independent <code>_mm_malloc</code>?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1442418594, "post_id": 32612833, "comment_id": 53077134, "body": "Isn&#39;t <code>_mm_malloc</code> an informally-supported, un-standardized Intel extension? How could that be more platform independent than POSIX?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 4964, "user_id": 556899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0620f543129132d44fef456b3ab31a39?s=128&d=identicon&r=PG", "display_name": "stgatilov", "link": "https://stackoverflow.com/users/556899/stgatilov"}, "edited": false, "score": 0, "creation_date": 1442418961, "post_id": 32612833, "comment_id": 53077415, "body": "@stgatilov: The main advantage is that you can free them with <code>free</code>.  If you have code that works with any alignment, but is faster with 32B alignment, then you can do an aligned alloc where convenient, so usually you&#39;re getting the fast case.  Also, <code>aligned_alloc</code> is ISO C11, so it should be available everywhere (when compilers catch up, anyway).  There&#39;s only one major non-POSIX x86 OS, so I guess you&#39;re thinking of MSVC.  Does it not have either of those functions?  I assumed MSVC would support as much of POSIX as they easily could, just not the system calls that don&#39;t map to Windows."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 3, "creation_date": 1442419134, "post_id": 32612833, "comment_id": 53077509, "body": "@Useless: If you&#39;re using <code>_mm_whatever</code> intrinsics for SSE / AVX / other instructions, you will also have <code>_mm_malloc</code> available.  If keeping your aligned allocs separate from your unaligned allocs isn&#39;t a problem, or you can just use <code>_mm_malloc</code> / <code>_mm_free</code> everywhere in your program, and don&#39;t interact with any libraries that allocate or free anything, then that&#39;s a valid option, too."}, {"owner": {"reputation": 2035, "user_id": 2750396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EgeP0.png?s=128&g=1", "display_name": "romeric", "link": "https://stackoverflow.com/users/2750396/romeric"}, "edited": false, "score": 1, "creation_date": 1442419737, "post_id": 32612833, "comment_id": 53077910, "body": "@PeterCordes <code>aligned_alloc</code> looks best of the lot to me. Is there any general consensus on which one, one should use?"}, {"owner": {"reputation": 4964, "user_id": 556899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0620f543129132d44fef456b3ab31a39?s=128&d=identicon&r=PG", "display_name": "stgatilov", "link": "https://stackoverflow.com/users/556899/stgatilov"}, "edited": false, "score": 0, "creation_date": 1442420043, "post_id": 32612833, "comment_id": 53078121, "body": "@PeterCordes: I&#39;m afraid MSVC is still not compatible. They have mostly abandoned compatibility with C standard. As for C++, <code>aligned_alloc</code> is <a href=\"http://stackoverflow.com/a/29247842/556899\">not there</a>. Personally I mostly use C++ because I like templates =)"}, {"owner": {"reputation": 2035, "user_id": 2750396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EgeP0.png?s=128&g=1", "display_name": "romeric", "link": "https://stackoverflow.com/users/2750396/romeric"}, "reply_to_user": {"reputation": 4964, "user_id": 556899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0620f543129132d44fef456b3ab31a39?s=128&d=identicon&r=PG", "display_name": "stgatilov", "link": "https://stackoverflow.com/users/556899/stgatilov"}, "edited": false, "score": 0, "creation_date": 1442420959, "post_id": 32612833, "comment_id": 53078710, "body": "@stgatilov I solely use C++ too and suffices to say, I&#39;m having no issue compiling <code>aligned_alloc</code> with  <code>gcc 4.8.4</code> without <code>#define</code>-ing any macros, from the link you posted. If I am right, this seems to be a <a href=\"http://en.cppreference.com/w/c/memory/aligned_alloc\" rel=\"nofollow noreferrer\">permanent feature</a> in C++ as well."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 2035, "user_id": 2750396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EgeP0.png?s=128&g=1", "display_name": "romeric", "link": "https://stackoverflow.com/users/2750396/romeric"}, "edited": false, "score": 0, "creation_date": 1442421224, "post_id": 32612833, "comment_id": 53078894, "body": "@romeric: That link is for C11, not C++11.  Note the <code>&#47;c&#47;</code> in the URL, not <code>&#47;cpp</code>.  If you ever need to port your code to MSVC, there&#39;s probably a similar function you can use with an <code>#ifdef</code>.  I think <code>aligned_alloc</code> is probably the best choice, as long as it&#39;s not too new for any compilers you care about supporting."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1493624542, "post_id": 32612833, "comment_id": 74475215, "body": "Since you mention C++17: alignas+dynamic allocation was finally fixed there."}, {"owner": {"reputation": 753, "user_id": 460756, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/4CcwH.jpg?s=128&g=1", "display_name": "matejk", "link": "https://stackoverflow.com/users/460756/matejk"}, "edited": false, "score": 0, "creation_date": 1564736755, "post_id": 32612833, "comment_id": 101136882, "body": "@PeterCordes: Thanks for this answer. Do you know if it is possible somehow to create aligned vector of basic types like <code>std::vector&lt;double&gt;</code> with a built-in allocator or similar? Something like <code>std::vector&lt;double, alignas(32)&gt;</code>?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 753, "user_id": 460756, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/4CcwH.jpg?s=128&g=1", "display_name": "matejk", "link": "https://stackoverflow.com/users/460756/matejk"}, "edited": false, "score": 1, "creation_date": 1564737197, "post_id": 32612833, "comment_id": 101137119, "body": "@matejk: I&#39;m not sure if you have to write your own allocator or if there&#39;s already a template allocator you can customize.  I&#39;m totally unimpressed with C++ as far as alignment support for dynamic allocation, or exposing efficient <code>realloc</code> or <code>calloc</code> for std::vector to take advantage of.  It&#39;s also just ridiculous how bad it is, and that it took until C++17 for <code>new __m256[]</code> to even work.  I don&#39;t get WTF is so hard about making alignment a template parameter that becomes part of the type.  And even C is missing a portable aligned <code>realloc</code> or <code>calloc</code>, AFAIK."}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 22, "last_activity_date": 1570642025, "last_edit_date": 1570642025, "creation_date": 1442417259, "answer_id": 32612833, "question_id": 32612190, "link": "https://stackoverflow.com/questions/32612190/how-to-solve-the-32-byte-alignment-issue-for-avx-load-store-operations/32612833#32612833", "title": "How to solve the 32-byte-alignment issue for AVX load/store operations?", "body": "<p>The standard allocators normally only align to <code>alignof(max_align_t)</code>, which is often 16B, e.g. <code>long double</code> in the x86-64 System V ABI.  But in some 32-bit ABIs it's only 8B, so it's not even sufficient for dynamic allocation of aligned <code>__m128</code> vectors and you'll need to go beyond simply calling <code>new</code> or <code>malloc</code>.</p>\n\n<p>Static and automatic storage are easy: use <code>alignas(32) float arr[N];</code></p>\n\n<p><strong>C++17 provides aligned <code>new</code></strong> for aligned dynamic allocation that's compatible with <code>delete</code>:<br>\n<strong><code>float * arr = new (std::align_val_t(32)) float[numSteps];</code></strong><br>\nSee documentation for <a href=\"https://en.cppreference.com/w/cpp/memory/new/operator_new\" rel=\"noreferrer\"><code>new</code>/<code>new[]</code></a> and <a href=\"https://en.cppreference.com/w/cpp/memory/new/align_val_t\" rel=\"noreferrer\"><code>std::align_val_t</code></a></p>\n\n<p>Other options for dynamic allocation are mostly <strong>compatible with <code>malloc</code>/<code>free</code>, <em>not</em> <code>new</code>/<code>delete</code></strong>:</p>\n\n<ul>\n<li><p><strong><a href=\"http://en.cppreference.com/w/cpp/memory/c/aligned_alloc\" rel=\"noreferrer\"><code>std::aligned_alloc</code></a></strong>: ISO C++17.  <strong>major downside: size must be a multiple of alignment</strong>.  This braindead requirement makes it inappropriate for allocating a 64B cache-line aligned array of an unknown number of <code>float</code>s, for example.  Or especially a 2M-aligned array to take advantage of <a href=\"https://www.kernel.org/doc/Documentation/vm/transhuge.txt\" rel=\"noreferrer\">transparent hugepages</a>.</p>\n\n<p>The C version of <a href=\"http://en.cppreference.com/w/c/memory/aligned_alloc\" rel=\"noreferrer\"><code>aligned_alloc</code></a> was added in ISO C11.  It's available in some but not all C++ compilers.  As noted on the cppreference page, the C11 version wasn't required to fail when size isn't a multiple of alignment (it's undefined behaviour), so many implementations provided the obvious desired behaviour as an \"extension\".  <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2072.htm\" rel=\"noreferrer\">Discussion is underway to fix this</a>, but for now I can't really recommend <code>aligned_alloc</code> as a portable way to allocate arbitrary-sized arrays.</p>\n\n<p>Also, commenters report it's unavailable in MSVC++.  See <a href=\"https://stackoverflow.com/questions/16376942/best-cross-platform-method-to-get-aligned-memory\">best cross-platform method to get aligned memory</a> for a viable <code>#ifdef</code> for Windows.  But AFAIK there are no Windows aligned-allocation functions that produce pointers compatible with standard <code>free</code>.</p></li>\n<li><p><strong><a href=\"http://man7.org/linux/man-pages/man3/posix_memalign.3.html\" rel=\"noreferrer\"><code>posix_memalign</code></a></strong>: Part of POSIX 2001, not any ISO C or C++ standard.  Clunky prototype/interface compared to <code>aligned_alloc</code>.  I've seen gcc generate reloads of the pointer because it wasn't sure that stores into the buffer didn't modify the pointer.  (Since <code>posix_memalign</code> is passed the address of the pointer.)  So if you use this, copy the pointer into another C++ variable that hasn't had its address passed outside the function.</p></li>\n</ul>\n\n<p></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\nint posix_memalign(void **memptr, size_t alignment, size_t size);  // POSIX 2001\nvoid *aligned_alloc(size_t alignment, size_t size);                // C11 (and ISO C++17)\n</code></pre>\n\n<ul>\n<li><strong><code>_mm_malloc</code></strong>: Available on any platform where <code>_mm_whatever_ps</code> is available, but <strong>you can't pass pointers from it to <code>free</code></strong>.  On many C and C++ implementations <code>_mm_free</code> and <code>free</code> are compatible, but it's not guaranteed to be portable.  (And unlike the other two, it will fail at run-time, not compile time.)  On MSVC on Windows, <code>_mm_malloc</code> uses <a href=\"https://msdn.microsoft.com/en-us/library/8z34s9c6.aspx\" rel=\"noreferrer\"><code>_aligned_malloc</code></a>, which is not compatible with <code>free</code>; it crashes in practice.</li>\n</ul>\n\n<hr>\n\n<p>In C++11 and later: use <code>alignas(32) float avx_array[1234]</code> as the first member of a struct/class member (or on a plain array directly) so static and automatic storage objects of that type will have 32B alignment. <a href=\"http://en.cppreference.com/w/cpp/types/aligned_storage\" rel=\"noreferrer\"><code>std::aligned_storage</code> documentation</a> has an example of this technique to explain what <code>std::aligned_storage</code> does.</p>\n\n<p>This doesn't actually work for dynamically-allocated storage (like a <code>std::vector&lt;my_class_with_aligned_member_array&gt;</code>), see <a href=\"https://stackoverflow.com/questions/12942548/making-stdvector-allocate-aligned-memory\">Making std::vector allocate aligned memory</a>.</p>\n\n<p>In C++17, there might be a way to use aligned new for <code>std::vector</code>.  TODO: find out how.</p>\n\n<hr>\n\n<p>And finally, the last option is so bad it's not even part of the list: allocate a larger buffer and add do <code>p+=31; p&amp;=~31ULL</code> with appropriate casting.  Too many drawbacks (hard to free, wastes memory) to be worth discussing, since aligned-allocation functions are available on every platform that support Intel <code>_mm256</code> intrinsics.  But there are even library functions that will help you do this, IIRC.</p>\n\n<p>The requirement to use <code>_mm_free</code> instead of <code>free</code> probably exists to for the possibility of implementing <code>_mm_malloc</code> on top of a plain old <code>malloc</code> using this technique.</p>\n\n\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2035, "user_id": 2750396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EgeP0.png?s=128&g=1", "display_name": "romeric", "link": "https://stackoverflow.com/users/2750396/romeric"}, "edited": false, "score": 0, "creation_date": 1442441037, "post_id": 32615148, "comment_id": 53089574, "body": "@romeric from more to less"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1442424905, "creation_date": 1442424905, "answer_id": 32615148, "question_id": 32612190, "link": "https://stackoverflow.com/questions/32612190/how-to-solve-the-32-byte-alignment-issue-for-avx-load-store-operations/32615148#32615148", "title": "How to solve the 32-byte-alignment issue for AVX load/store operations?", "body": "<p>You'll need aligned allocators.</p>\n\n<p>But there isn't a reason you can't bundle them up:</p>\n\n<pre><code>template&lt;class T, size_t align&gt;\nstruct aligned_free {\n  void operator()(T* t)const{\n    ASSERT(!(uint_ptr(t) % align));\n    _mm_free(t);\n  }\n  aligned_free() = default;\n  aligned_free(aligned_free const&amp;) = default;\n  aligned_free(aligned_free&amp;&amp;) = default;\n  // allow assignment from things that are\n  // more aligned than we are:\n  template&lt;size_t o,\n    std::enable_if_t&lt; !(o % align) &gt;* = nullptr\n  &gt;\n  aligned_free( aligned_free&lt;T, o&gt; ) {}\n};\ntemplate&lt;class T&gt;\nstruct aligned_free&lt;T[]&gt;:aligned_free&lt;T&gt;{};\n\ntemplate&lt;class T, size_t align=1&gt;\nusing mm_ptr = std::unique_ptr&lt; T, aligned_free&lt;T, align&gt; &gt;;\ntemplate&lt;class T, size_t align&gt;\nstruct aligned_make;\ntemplate&lt;class T, size_t align&gt;\nstruct aligned_make&lt;T[],align&gt; {\n  mm_ptr&lt;T, align&gt; operator()(size_t N)const {\n    return mm_ptr&lt;T, align&gt;(static_cast&lt;T*&gt;(_mm_malloc(sizeof(T)*N, align)));\n  }\n};\ntemplate&lt;class T, size_t align&gt;\nstruct aligned_make {\n  mm_ptr&lt;T, align&gt; operator()()const {\n    return aligned_make&lt;T[],align&gt;{}(1);\n  }\n};\ntemplate&lt;class T, size_t N, size_t align&gt;\nstruct aligned_make&lt;T[N], align&gt; {\n  mm_ptr&lt;T, align&gt; operator()()const {\n    return aligned_make&lt;T[],align&gt;{}(N);\n  }\n}:\n// T[N] and T versions:\ntemplate&lt;class T, size_t align&gt;\nauto make_aligned()\n-&gt; std::result_of_t&lt;aligned_make&lt;T,align&gt;()&gt;\n{\n  return aligned_make&lt;T,align&gt;{}();\n}\n// T[] version:\ntemplate&lt;class T, size_t align&gt;\nauto make_aligned(size_t N)\n-&gt; std::result_of_t&lt;aligned_make&lt;T,align&gt;(size_t)&gt;\n{\n  return aligned_make&lt;T,align&gt;{}(N);\n}\n</code></pre>\n\n<p>now <code>mm_ptr&lt;float[], 4&gt;</code> is a unique pointer to an array of <code>float</code>s that is 4 byte aligned.  You create it via <code>make_aligned&lt;float[], 4&gt;(20)</code>, which creates 20 floats 4-byte aligned, or <code>make_aligned&lt;float[20], 4&gt;()</code> (compile-time constant only in that syntax).  <code>make_aligned&lt;float[20],4&gt;</code> returns <code>mm_ptr&lt;float[],4&gt;</code> not <code>mm_ptr&lt;float[20],4&gt;</code>.</p>\n\n<p>A <code>mm_ptr&lt;float[], 8&gt;</code> can move-construct a <code>mm_ptr&lt;float[],4&gt;</code> but not vice-versa, which I think is nice.</p>\n\n<p><code>mm_ptr&lt;float[]&gt;</code> can take any alignment, but guarantees none.</p>\n\n<p>Overhead, like with a <code>std::unique_ptr</code>, is basically zero per pointer.  Code overhead can be minimized by aggressive <code>inline</code>ing.</p>\n"}], "owner": {"reputation": 2035, "user_id": 2750396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EgeP0.png?s=128&g=1", "display_name": "romeric", "link": "https://stackoverflow.com/users/2750396/romeric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7574, "favorite_count": 6, "accepted_answer_id": 32612833, "answer_count": 3, "score": 16, "last_activity_date": 1592459436, "creation_date": 1442415478, "last_edit_date": 1592459436, "question_id": 32612190, "link": "https://stackoverflow.com/questions/32612190/how-to-solve-the-32-byte-alignment-issue-for-avx-load-store-operations", "title": "How to solve the 32-byte-alignment issue for AVX load/store operations?", "body": "<p>I am having alignment issue while using <code>ymm</code> registers, with some snippets of code that seems fine to me. Here is a minimal working example:</p>\n\n<pre><code>#include &lt;iostream&gt; \n#include &lt;immintrin.h&gt;\n\ninline void ones(float *a)\n{\n     __m256 out_aligned = _mm256_set1_ps(1.0f);\n     _mm256_store_ps(a,out_aligned);\n}\n\nint main()\n{\n     size_t ss = 8;\n     float *a = new float[ss];\n     ones(a);\n\n     delete [] a;\n\n     std::cout &lt;&lt; \"All Good!\" &lt;&lt; std::endl;\n     return 0;\n}\n</code></pre>\n\n<p>Certainly, <code>sizeof(float)</code> is <code>4</code> on my architecture (<a href=\"http://ark.intel.com/products/64590/Intel-Xeon-Processor-E5-2650-20M-Cache-2_00-GHz-8_00-GTs-Intel-QPI\" rel=\"noreferrer\">Intel(R) Xeon(R) CPU E5-2650 v2 @ 2.60GHz</a>) and I'm compiling with <code>gcc</code> using <code>-O3 -march=native</code> flags. Of course the error goes away with unaligned memory access i.e. specifying <code>_mm256_storeu_ps</code>. I also do not have this problem on <code>xmm</code> registers, i.e. </p>\n\n<pre><code>inline void ones_sse(float *a)\n{\n     __m128 out_aligned = _mm_set1_ps(1.0f);\n     _mm_store_ps(a,out_aligned);\n}\n</code></pre>\n\n<p>Am I doing anything foolish? what is the work-around for this?</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 1, "creation_date": 1442417016, "post_id": 32612608, "comment_id": 53076117, "body": "thanks for your answer but it does not answer my question. I am talking about the conflict between Runtime libaries and the static libraries of OpenCV. As, you can find a lot of literature which says that the runtime libraries should not be confused with the dll libraries of a software etc."}], "tags": [], "owner": {"reputation": 57, "user_id": 3957575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ilWy.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3957575/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1442416585, "creation_date": 1442416585, "answer_id": 32612608, "question_id": 32612157, "link": "https://stackoverflow.com/questions/32612157/runtime-libraries-and-static-libraries-of-opencv/32612608#32612608", "title": "Runtime libraries and Static libraries of OpenCV", "body": "<p>As I understand it, the difference between dynamic linked libraries (dll) and static libraries is that static libraries are always compiled into your code and therefore loaded in memory statically with the executable, whereas dlls are loaded in memory as needed and need not be compiled into your code as long as their functions are properly referenced.</p>\n\n<p>What seems to be happening in your case is that your static libraries are re-defining some functions that are already defined in the included dll and/or expecting functions from the dll that it does not contain.</p>\n\n<p>Depending on the licencing and your needs, I have found that it is best practice when using external libraries to use dll's as they can (often) be updated without recompiling your code, which makes patching a simpler task.</p>\n"}, {"comments": [{"owner": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1442519501, "post_id": 32628343, "comment_id": 53126168, "body": "So, if I use Static libraries of OpenCV then, somehow I am bound to use static runtime libraries of C++ too...is it so?? But that will increase the size of executable, isn&#39;t it? And, why there is a confusion to the compiler in the first place? When I have already specified in the VS settings that I want to use <code>&#47;Md</code> for runtime then, why is it checking the static runtime also of C++?? Is the reason of conflict is the fact I have specified to use <code>Md</code> runtime and the Static OpenCV libraries have already attached Static runtime libraries of C++?"}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "reply_to_user": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1442520888, "post_id": 32628343, "comment_id": 53126901, "body": "Yes. If the OpenCV libraries have already been built with the static runtime libraries, then you will have to use them as well. The compile switches /MD etc just add some instructions such that the linker knows which libraries to link in, so if there are two, then there is an error. It doesn&#39;t &quot;force&quot; one over the other (I think it affects some other code generation as well). So yes, the reason for the conflict is that you specify /MD and the OpenCV libraries have specified /MT."}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "reply_to_user": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1442523123, "post_id": 32628343, "comment_id": 53128067, "body": "@user2756695. On the file size, yes the static libraries will make the exe bigger, but it could make the total size of all the binaries (exe and dll) smaller."}, {"owner": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1442576784, "post_id": 32628343, "comment_id": 53149082, "body": "did not understand your last comment. Which total size (i mean, which exe and dll) are you mentioning in the comment above?"}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "reply_to_user": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "edited": false, "score": 0, "creation_date": 1442577215, "post_id": 32628343, "comment_id": 53149349, "body": "@user2756695. I mean the file size being the exe size you were concerned about being large."}], "tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": true, "score": 0, "last_activity_date": 1442509697, "last_edit_date": 1442509697, "creation_date": 1442486443, "answer_id": 32628343, "question_id": 32612157, "link": "https://stackoverflow.com/questions/32612157/runtime-libraries-and-static-libraries-of-opencv/32628343#32628343", "title": "Runtime libraries and Static libraries of OpenCV", "body": "<p><strong>Some background</strong></p>\n\n<p>The <a href=\"https://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx\" rel=\"nofollow\"><code>/MT</code> and <code>/MD</code></a> with their debug equivalents (<code>/xxd</code>) link in the C++ runtime differently.</p>\n\n<ul>\n<li><code>/MD</code> links to the dll version of the C++ runtime</li>\n<li><code>/MT</code> to the static library version (i.e. what is required of the C++ runtime in linked into your binary)</li>\n</ul>\n\n<p><em>Note: the versions above are multi-threaded, historically there where single-threaded versions as well but these have fallen away.</em></p>\n\n<p><strong>The errors</strong></p>\n\n<p>You are getting these errors because the options are being mixed and hence there are multiple definitions for symbols - one from the dll's import library and one from the static library. Which one should the linker choose? It is unable to determine an outcome given the conflict, hence the errors.</p>\n\n<blockquote>\n  <p>... which runtime library option should be selected if I want to link few openCV libraries statically and few dynamically...?</p>\n</blockquote>\n\n<p>Don't mix them. It causes errors such as these that you are dealing with. The general advice with linking C++ (and C code) is to be consistent with respect to how the runtime is linked in.</p>\n\n<p>I generally go further to detail that there should be a consistency between the linking of all libraries, either all static or all dynamic (sure they can be mixed, but this should not be done without a deep understanding of the memory and resource issues involved - generally it is not worth the risk).</p>\n"}], "owner": {"reputation": 592, "user_id": 2756695, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/659a06cb4e1498925de293ac62c66b88?s=128&d=identicon&r=PG&f=1", "display_name": "user2756695", "link": "https://stackoverflow.com/users/2756695/user2756695"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2261, "favorite_count": 0, "accepted_answer_id": 32628343, "answer_count": 2, "score": 2, "last_activity_date": 1442509697, "creation_date": 1442415403, "last_edit_date": 1495535222, "question_id": 32612157, "link": "https://stackoverflow.com/questions/32612157/runtime-libraries-and-static-libraries-of-opencv", "title": "Runtime libraries and Static libraries of OpenCV", "body": "<p>I have posted two question before about static and dynamic libaries and got satisfactory responses. But still there are some missing links. </p>\n\n<p>I am able to solve my problem but I did not understand the complete concept.</p>\n\n<p><strong>Concept to be understand:</strong> Through the response in my previous <a href=\"https://stackoverflow.com/questions/32562242/static-and-dynamic-linking-in-visual-studio\">question </a>, I realized that I do not have static libraries of OpenCV, so I installed them. Now, I have static libraries of OpenCV in Windows 7. </p>\n\n<p>I made a simple program as given below to test the functionalityof static libraries of OpenCV.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"opencv\\highgui.h\"\n#include \"opencv2\\core\\core.hpp\"\n#include \"opencv2\\imgproc\\imgproc.hpp\"\n\nint main()\n{\n    cv::Mat image(100, 500, CV_8SC3, Scalar(0,0,255));\n    std::cout &lt;&lt; \"\\nstatic Libs test\"&lt;&lt;std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>For the linking of above code, I have used the static libraries of OpenCV.</p>\n\n<p><strong>Real Question:</strong> The above code gets compiled, linked and run without any issue if I choose <code>Multi-threaded Debug (/MTd)</code> runtime libraries in Visual Studio. But if I choose <code>Multi-threaded Debug DLL (/MDd)</code> runtime libraries then, there are a lot of erros which look like following (I have not included all the errors): </p>\n\n<pre><code>Error   1   error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MTd_StaticDebug' doesn't match value 'MDd_DynamicDebug' in Source.obj \nError   22  error LNK2005: \"public: __cdecl std::_Container_base12::_Container_base12(void)\" (??0_Container_base12@std@@QEAA@XZ) already defined in opencv_core2411d.lib(alloc.obj)\n</code></pre>\n\n<p>I just want to understand the reason of such conflict between the DLL runtime libraries of C++ and Static libraries of OpenCV. After choosing <code>Multi-threaded Debug (/MTd)</code>, are the C++ libraries are also getting linked statically?</p>\n\n<p>And lastly, which runtime library option should be selected if I want to link few openCV libraries statically and few dynamically (situation might seem awkward but just asking)?</p>\n"}, {"tags": ["java", "c++", "opencv"], "comments": [{"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 1, "creation_date": 1442415496, "post_id": 32612058, "comment_id": 53075007, "body": "What doesn&#39;t work? What&#39;s the error? Please be more verbose on what&#39;s the actual problem!"}, {"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 2, "creation_date": 1442415688, "post_id": 32612058, "comment_id": 53075150, "body": "<a href=\"http://docs.opencv.org/java/\" rel=\"nofollow noreferrer\">JavaDocs</a>"}, {"owner": {"reputation": 306, "user_id": 3315775, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b0ce633859d84b7ec3c6408ee8bde59?s=128&d=identicon&r=PG&f=1", "display_name": "ju ho", "link": "https://stackoverflow.com/users/3315775/ju-ho"}, "edited": false, "score": 1, "creation_date": 1442829129, "post_id": 32612058, "comment_id": 53227666, "body": "The line predicted.&lt;Float&gt;at(i,0) = knn.find_nearest(sample, K); has most definitely to be wrong. There is now function &lt;Float&gt;at in object Mat. Also there is no &quot;evaluate function&quot;. Another thing is where does the prediction Mat belong to?In java you can not just put it in the end of the class. Thanks=)"}], "answers": [{"comments": [{"owner": {"reputation": 1364, "user_id": 4848006, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/uFXUI.jpg?s=128&g=1", "display_name": "Neji Soltani", "link": "https://stackoverflow.com/users/4848006/neji-soltani"}, "edited": false, "score": 1, "creation_date": 1517327575, "post_id": 43384119, "comment_id": 84045815, "body": "if you copy an answer from an other site you should link the <a href=\"http://answers.opencv.org/question/89927/how-to-use-knearest-in-java/\" rel=\"nofollow noreferrer\">source</a>"}], "tags": [], "owner": {"reputation": 9, "user_id": 7701817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432016c908a1a447d9e429f03ac817d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tejash L", "link": "https://stackoverflow.com/users/7701817/tejash-l"}, "is_accepted": false, "score": -2, "last_activity_date": 1492060932, "creation_date": 1492060932, "answer_id": 43384119, "question_id": 32612058, "link": "https://stackoverflow.com/questions/32612058/java-opencv-find-k-nearest-neighbor-c-to-java-conversion/43384119#43384119", "title": "java OpenCV find k nearest neighbor c++ to java conversion", "body": "<p>The following code is for finding the digits</p>\n\n<p>here's some code to try:</p>\n\n<pre><code>import org.opencv.core.*;\nimport org.opencv.imgproc.*;\nimport org.opencv.imgcodecs.Imgcodecs;\nimport org.opencv.ml.*;\nimport org.opencv.utils.*;\nimport java.util.*;\n\n\nclass SimpleSample {\nstatic{ System.loadLibrary(Core.NATIVE_LIBRARY_NAME); }\n\npublic static void main(String[] args) {\n    // samples/data/digits.png, have a look at it.\n    Mat digits = Imgcodecs.imread(\"digits.png\", 0);\n    // setup train/test data:\n    Mat trainData = new Mat(),\n        testData = new Mat();\n    List&lt;Integer&gt; trainLabs = new ArrayList&lt;Integer&gt;(),\n        testLabs = new ArrayList&lt;Integer&gt;();\n    // 10 digits a 5 rows:\n    for (int r=0; r&lt;50; r++) { \n        // 100 digits per row:\n        for (int c=0; c&lt;100; c++) {\n            // crop out 1 digit:\n            Mat num = digits.submat(new Rect(c*20,r*20,20,20));\n            // we need float data for knn:\n            num.convertTo(num, CvType.CV_32F);\n            // 50/50 train/test split:\n            if (c % 2 == 0) {\n                // for opencv ml, each feature has to be a single row:\n                trainData.push_back(num.reshape(1,1));\n                // add a label for that feature (the digit number):\n                trainLabs.add(r/5);\n            } else {\n                testData.push_back(num.reshape(1,1));\n                testLabs.add(r/5);\n            }\n        }                \n    }\n\n    // make a Mat of the train labels, and train knn:\n    KNearest knn = KNearest.create();\n    knn.train(trainData, Ml.ROW_SAMPLE, Converters.vector_int_to_Mat(trainLabs));\n    // now test predictions:\n    for (int i=0; i&lt;testData.rows(); i++)\n    {\n        Mat one_feature = testData.row(i);\n        int testLabel = testLabs.get(i);\n\n        Mat res = new Mat();\n        float p = knn.findNearest(one_feature, 1, res);\n        System.out.println(testLabel + \" \" + p + \" \" + res.dump());\n    }\n\n    //// hmm, the 'real world' test case probably looks more like this:\n    //// make sure, you follow the very same preprocessing steps used in the train phase:\n    //  Mat one_feature = Imgcodecs.imread(\"one_digit.png\", 0);\n    //  Mat feature; one_feature.convertTo(feature, CvTypes.CV_32F);\n    //  Imgproc.resize(feature, feature, Size(20,20));\n    //  int predicted = knn.findNearest(feature.reshape(1,1), 1);\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 3315775, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5b0ce633859d84b7ec3c6408ee8bde59?s=128&d=identicon&r=PG&f=1", "display_name": "ju ho", "link": "https://stackoverflow.com/users/3315775/ju-ho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1337, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492060932, "creation_date": 1442415193, "last_edit_date": 1442829176, "question_id": 32612058, "link": "https://stackoverflow.com/questions/32612058/java-opencv-find-k-nearest-neighbor-c-to-java-conversion", "title": "java OpenCV find k nearest neighbor c++ to java conversion", "body": "<p>I am trying to find the k nearest neighbors with the Knn classifier in OpenCV.\nI found this C++ Code:</p>\n\n<pre><code>class atsKNN{\npublic :\nvoid knn(cv::Mat&amp; trainingData, cv::Mat&amp; trainingClasses, cv::Mat&amp; testData, cv::Mat&amp; testClasses, int K) \n{\n    cv::KNearest knn(trainingData, trainingClasses, cv::Mat(), false, K);\n    cv::Mat predicted(testClasses.rows, 1, CV_32F);\n    for(int i = 0; i &lt; testData.rows; i++) {\n            const cv::Mat sample = testData.row(i);\n            predicted.at&lt;float&gt;(i,0) = knn.find_nearest(sample, K);\n    }\n\n    float percentage = evaluate(predicted, testClasses) * 100;\n    cout &lt;&lt; \"K Nearest Neighbor Evaluated Accuracy = \" &lt;&lt; percentage &lt;&lt; \"%\" &lt;&lt; endl;\n    prediction = predicted;\n}\nvoid showplot(cv::Mat testData)\n{\n    plot_binary(testData, prediction, \"Predictions Backpropagation\");\n}\nprivate:\ncv::Mat prediction;\n\n};\n</code></pre>\n\n<p>The comments mention it works really good but i am having problems Converting it to Java. There is no Documentation for Java. I tried using a C++ to Java Converter but the resulting Code does not work.</p>\n\n<p>here is the code it produced:</p>\n\n<pre><code>public class atsKNN\n{\npublic final void knn(cv.Mat trainingData, cv.Mat trainingClasses, cv.Mat testData, cv.Mat testClasses, int K)\n{\n    cv.KNearest knn = new cv.KNearest(trainingData, trainingClasses, cv.Mat(), false, K);\n    cv.Mat predicted = new cv.Mat(testClasses.rows, 1, CV_32F);\n    for (int i = 0; i &lt; testData.rows; i++)\n    {\n            final cv.Mat sample = testData.row(i);\n            predicted.&lt;Float&gt;at(i,0) = knn.find_nearest(sample, K);\n    }\n\n    float percentage = evaluate(predicted, testClasses) * 100;\n    System.out.print(\"K Nearest Neighbor Evaluated Accuracy = \");\n    System.out.print(percentage);\n    System.out.print(\"%\");\n    System.out.print(\"\\n\");\n    prediction = predicted;\n}\npublic final void showplot(cv.Mat testData)\n{\n    plot_binary(testData, prediction, \"Predictions Backpropagation\");\n}\nprivate cv.Mat prediction = new cv.Mat();\n\n}\n</code></pre>\n\n<p>edit:\nThe line predicted.at(i,0) = knn.find_nearest(sample, K); has most definitely to be wrong.\nThere is now function at in object Mat.\nAlso there is no \"evaluate function\".\nAnother thing is where does the prediction Mat belong to?In java you can not just put it in the end of the class.\nThanks=)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1442415593, "post_id": 32611973, "comment_id": 53075071, "body": "Make your question valid first please. You can read <a href=\"http://stackoverflow.com/help/mcve\">here</a> how. Also it&#39;s always hard to tell, why you&#39;re getting a WA with an online code judge, because their inner workings aren&#39;t disclosed."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1442415613, "post_id": 32611973, "comment_id": 53075089, "body": "You have to rethink your algorithm. For <code>X X X 2</code> (X &gt;= 2), you may cut the whole chain of 2 to have <code>X -1- X -1- X</code>, so answer is 2 not 3 as your answer."}, {"owner": {"reputation": 1019, "user_id": 4451655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1339842f91d69517894f82289a924762?s=128&d=identicon&r=PG&f=1", "display_name": "Saeed Jassani", "link": "https://stackoverflow.com/users/4451655/saeed-jassani"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1442415847, "post_id": 32611973, "comment_id": 53075277, "body": "@Jarod42 is sorting necessary to get the answer right?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1442416177, "post_id": 32611973, "comment_id": 53075533, "body": "I don&#39;t have the solution yet, but I think it is a correct method to sort first."}], "answers": [{"tags": [], "owner": {"reputation": 1324, "user_id": 5075760, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bd79762b2995633ed649ee95711ab20c?s=128&d=identicon&r=PG&f=1", "display_name": "PBS", "link": "https://stackoverflow.com/users/5075760/pbs"}, "is_accepted": true, "score": 1, "last_activity_date": 1442494072, "last_edit_date": 1442494072, "creation_date": 1442419137, "answer_id": 32613471, "question_id": 32611973, "link": "https://stackoverflow.com/questions/32611973/chain-of-doughnut-codechef/32613471#32613471", "title": "Chain of doughnut - codechef", "body": "<p>You have the following operations, each of which can be used to link two chains together:</p>\n\n<ol>\n<li>Cut a chain (>=3) in the middle (0 less chains)</li>\n<li>Cut a chain (>=2) at the end (1 less chain)</li>\n<li>Cut a single donut (2 less chains)</li>\n</ol>\n\n<p>An optimal solution never needs to use (1), thus the objective is to make sure that as many operations as possible are (3)s, the rest being (2)s. The obvious best way to do this is to repeatedly cut a donut from the end of the smallest chain and use it to stick together the biggest two chains. This is the reason for sorting the chains. Even so, it might be faster to make the lengths into a heap, and only extract the minimum element as many times as we need to.</p>\n\n<p>Now to the question: your algorithm only uses operation (3) on single donuts, but doesn't try to make more single donuts by cutting donuts from the end of the smallest chain. And so as Jarod42 points out, with\ncounterexample, it isn't optimal.</p>\n\n<hr>\n\n<p>I should also point out that your use of VLAs</p>\n\n<pre><code>int A[c];\n</code></pre>\n\n<p>is an non-standard extension. To be strict, you should use <code>std::vector</code> instead.</p>\n\n<hr>\n\n<p>For completeness, here's an example:</p>\n\n<pre><code>std::sort(A.begin(), A.end());\n\nint smallest_index = 0;\nint cuts = 0;\n\nwhile (M &gt; 1)\n{\n    int smallest = A[smallest_index];\n    if (smallest &lt;= M - 2)\n    {\n        // Obliterate the smallest chain, using all its donuts to link other chains\n        smallest_index++;\n        M -= smallest + 1;\n        cuts += smallest;\n    }\n    else\n    {\n        // Cut M - 2 donuts from the smallest chain - linking the other chains into one.\n        // Now there are two chains, requiring one more cut to link\n        cuts += M - 1;\n        break;\n    }\n}\n\nreturn cuts;\n</code></pre>\n\n<p>(<em>disclaimer:</em> only tested on the sample data, may fail in corner-cases or not work at all.)</p>\n"}], "owner": {"reputation": 1019, "user_id": 4451655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1339842f91d69517894f82289a924762?s=128&d=identicon&r=PG&f=1", "display_name": "Saeed Jassani", "link": "https://stackoverflow.com/users/4451655/saeed-jassani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 32613471, "answer_count": 1, "score": -3, "last_activity_date": 1442494072, "creation_date": 1442414956, "last_edit_date": 1442415640, "question_id": 32611973, "link": "https://stackoverflow.com/questions/32611973/chain-of-doughnut-codechef", "title": "Chain of doughnut - codechef", "body": "<p>I am trying to solve <a href=\"https://www.codechef.com/problems/DONUTS/\" rel=\"nofollow\">this</a> problem since last two days. I am not getting the correct results. \nThe solutions which are accepted are sorting the number of chains first. I didn't understand why they do it.\nJust the first task is correct. For Second task the answer is wrong and for third time limit exceeds. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main() {\nint t;\ncin&gt;&gt;t;\nwhile(t--) {\n    long n=0;\n    int f=0,c=0,cuts=0;\n    cin&gt;&gt;n&gt;&gt;c;\n    int toJoint=c-1;\n    int A[c];\n    for (int i =0;i&lt;c;i++)\n        cin&gt;&gt;A[i];\n    if (c&gt;2){\n        for (int i =0;i&lt;c;i++) {\n            if (A[i]==1) {\n                f++;\n                cuts++;\n                toJoint-=2;\n                if(toJoint&lt;=1) break;\n            }\n        }\n        if (toJoint&gt;0){\n            if (f==0) cout&lt;&lt;toJoint&lt;&lt;endl;\n            else cout&lt;&lt;(cuts+toJoint)&lt;&lt;endl;\n        }\n        else cout&lt;&lt;cuts&lt;&lt;endl;\n    }\n    else if (c==1) cout&lt;&lt;0&lt;&lt;endl;       \n    else cout&lt;&lt;++cuts&lt;&lt;endl;\n}\nreturn 0;\n} \n</code></pre>\n"}, {"tags": ["c++", "string", "binary"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1442415290, "post_id": 32611897, "comment_id": 53074888, "body": "Yes, <code>std::string s(data.begin(), data.end());</code> Or if you already have a string: <code>s.assign(data.begin(), data.end());</code>"}], "answers": [{"tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": false, "score": 0, "last_activity_date": 1442415185, "creation_date": 1442415185, "answer_id": 32612056, "question_id": 32611897, "link": "https://stackoverflow.com/questions/32611897/get-a-text-from-a-binary-vector/32612056#32612056", "title": "Get a text from a binary vector", "body": "<p>From <a href=\"http://www.cplusplus.com/reference/string/string/string/\" rel=\"nofollow\">http://www.cplusplus.com/reference/string/string/string/</a>.</p>\n\n<p>Use <code>std::String s(data.begin(), data.end());</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2169, "user_id": 1071362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7ed34168c4b43cbfe73558fd148aff1?s=128&d=identicon&r=PG", "display_name": "anorm", "link": "https://stackoverflow.com/users/1071362/anorm"}, "is_accepted": false, "score": 1, "last_activity_date": 1442415228, "creation_date": 1442415228, "answer_id": 32612073, "question_id": 32611897, "link": "https://stackoverflow.com/questions/32611897/get-a-text-from-a-binary-vector/32612073#32612073", "title": "Get a text from a binary vector", "body": "<p>Use the 6th form of <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow\"><code>std::string</code></a>'s constructor:</p>\n\n<pre><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    std::vector&lt;unsigned char&gt; data{'a', 'b', 'c'};\n    std::string str(data.begin(), data.end());\n    std::cout &lt;&lt; str &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><a href=\"http://cpp.sh/6rzf\" rel=\"nofollow\">Live demo here</a></p>\n"}], "owner": {"reputation": 353, "user_id": 2283710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8kXa4.jpg?s=128&g=1", "display_name": "w00drow", "link": "https://stackoverflow.com/users/2283710/w00drow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1442415600, "answer_count": 2, "score": 0, "last_activity_date": 1442415228, "creation_date": 1442414742, "question_id": 32611897, "link": "https://stackoverflow.com/questions/32611897/get-a-text-from-a-binary-vector", "closed_reason": "Duplicate", "title": "Get a text from a binary vector", "body": "<p>I have a </p>\n\n<pre><code>std::vector&lt;unsigned char&gt; data;\n</code></pre>\n\n<p>which contains a binary read file.</p>\n\n<p>If I write it to</p>\n\n<pre><code>std::ofstream outputFile(\"file\", std::ios_base::binary);\n</code></pre>\n\n<p>I'll see a regular text in it. Then I can read it into std::string which will conatain the text.\nIs it possible to copy vector directly to string with the same result?</p>\n"}, {"tags": ["c++", "linux", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 8647, "user_id": 426305, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VYTU1.jpg?s=128&g=1", "display_name": "deimus", "link": "https://stackoverflow.com/users/426305/deimus"}, "is_accepted": true, "score": 0, "last_activity_date": 1442415898, "last_edit_date": 1442415898, "creation_date": 1442415589, "answer_id": 32612234, "question_id": 32611844, "link": "https://stackoverflow.com/questions/32611844/vikit-common-installation-failed-raspberry-pi-2-b/32612234#32612234", "title": "Vikit_common - Installation failed - Raspberry Pi 2 B", "body": "<p>Apparently you have an incorrect <code>cmake</code> configuration</p>\n\n<p>A quick <code>gcc 4.6.3</code> man says</p>\n\n<blockquote>\n  <p>-march=</p>\n  \n  <p>This specifies the name of the target ARM architecture. GCC uses this name to determine what kind of instructions it can use when\n  generating assembly code. This option can be used in conjunction with\n  or instead of the `-mcpu=' option. Permissable names are: <strong>\u2018armv2\u2019, \u2018armv2a\u2019, \u2018armv3\u2019, \u2018armv3m\u2019, \u2018armv4\u2019,\u2018armv4t\u2019, \u2018armv5\u2019, \u2018armv5t\u2019, \u2018armv5e\u2019, \u2018armv5te\u2019, \u2018armv6\u2019, \u2018armv6j\u2019, \u2018armv6t2\u2019,\u2018armv6z\u2019, \u2018armv6zk\u2019, \u2018armv6-m\u2019, \u2018armv7\u2019, \u2018armv7-a\u2019, \u2018armv7-r\u2019, \u2018armv7-m\u2019,\u2018iwmmxt\u2019, \u2018iwmmxt2\u2019, \u2018ep9312\u2019</strong></p>\n</blockquote>\n\n<p>Firstly looks like you have a wrong value for <code>-march</code>.</p>\n\n<p>So check your <code>cmake</code> configuration</p>\n"}], "owner": {"reputation": 27, "user_id": 5325342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-51bFfU0rKYs/AAAAAAAAAAI/AAAAAAAABf0/_j2VMSyYQ3I/photo.jpg?sz=128", "display_name": "Martin", "link": "https://stackoverflow.com/users/5325342/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 2, "accepted_answer_id": 32612234, "answer_count": 1, "score": 1, "last_activity_date": 1442494059, "creation_date": 1442414616, "question_id": 32611844, "link": "https://stackoverflow.com/questions/32611844/vikit-common-installation-failed-raspberry-pi-2-b", "title": "Vikit_common - Installation failed - Raspberry Pi 2 B", "body": "<p>I'm working an a project of drone and I'm having an issue with my Raspberry Pi 2 B. When I'm trying to install <a href=\"https://github.com/uzh-rpg/rpg_svo/wiki/Installation:-Plain-CMake-(No-ROS)\" rel=\"nofollow\">vikit_common</a>, I've this on screen :</p>\n\n<blockquote>\n  <p>pi@raspberrypi ~/workspace/rpg_vikit/vikit_common/build $ cmake ..</p>\n</blockquote>\n\n<pre><code>-- Eigen found (include: /usr/include/eigen3)\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/pi/workspace/rpg_vikit/vikit_common/build\npi@raspberrypi ~/workspace/rpg_vikit/vikit_common/build $ make\n[  7%] Building CXX object CMakeFiles/vikit_common.dir/src/atan_camera.cpp.o\ncc1plus: error: bad value (native) for -march switch\ncc1plus: error: unrecognized command line option \u2018-mmmx\u2019\ncc1plus: error: unrecognized command line option \u2018-msse\u2019\ncc1plus: error: unrecognized command line option \u2018-msse\u2019\ncc1plus: error: unrecognized command line option \u2018-msse2\u2019\ncc1plus: error: unrecognized command line option \u2018-msse3\u2019\ncc1plus: error: unrecognized command line option \u2018-mssse3\u2019\ncc1plus: error: bad value (native) for -march switch\ncc1plus: error: unrecognized command line option \u2018-mmmx\u2019\ncc1plus: error: unrecognized command line option \u2018-msse\u2019\ncc1plus: error: unrecognized command line option \u2018-msse\u2019\ncc1plus: error: unrecognized command line option \u2018-msse2\u2019\ncc1plus: error: unrecognized command line option \u2018-msse3\u2019\ncc1plus: error: unrecognized command line option \u2018-mssse3\u2019\nCMakeFiles/vikit_common.dir/build.make:57: recipe for target 'CMakeFiles/vikit_common.dir/src/atan_camera.cpp.o' failed\nmake[2]: *** [CMakeFiles/vikit_common.dir/src/atan_camera.cpp.o] Error 1\nCMakeFiles/Makefile2:168: recipe for target 'CMakeFiles/vikit_common.dir/all' failed\nmake[1]: *** [CMakeFiles/vikit_common.dir/all] Error 2\nMakefile:116: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n\n<p>I have Cmake installed (sudo apt-get cmake), Gcc (4.6.3) and OpenCV.</p>\n\n<p>How can I solve the problem ?</p>\n"}, {"tags": ["python", "c++", "swig"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1442510415, "post_id": 32611832, "comment_id": 53121214, "body": "Tell us more about your function. Does it return anything? Is the reference argument used only for output, or for input as well?"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 1969768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/039d0995762cff1199f8b3eff7ccc6e1?s=128&d=identicon&r=PG", "display_name": "cswuyg", "link": "https://stackoverflow.com/users/1969768/cswuyg"}, "is_accepted": false, "score": 0, "last_activity_date": 1452586795, "last_edit_date": 1592644375, "creation_date": 1452586795, "answer_id": 34738599, "question_id": 32611832, "link": "https://stackoverflow.com/questions/32611832/how-to-pass-unsigned-int-reference-to-from-python-to-c-using-swig/34738599#34738599", "title": "how to pass unsigned int reference to from python to C++ using swig?", "body": "<p>Yes\uff0cyou should add typemaps.</p>\n<h1>example:</h1>\n<ul>\n<li><p>export.i:<br />\n%module my_mod<br />\n%include &quot;typemaps.i&quot;<br />\n%apply unsigned int &amp;OUTPUT {unsigned int&amp;};    <strong>//this map you output</strong><br />\n%include &quot;export.h&quot;</p>\n</li>\n<li><p>export.h<br />\nvoid get(unsigned int a, unsigned int&amp; b);</p>\n</li>\n<li><p>test<br />\nprint(my_mod.get(10))</p>\n</li>\n</ul>\n"}], "owner": {"reputation": 991, "user_id": 1090446, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/814f47d43c3cd6203b4a965b27be362f?s=128&d=identicon&r=PG", "display_name": "shd", "link": "https://stackoverflow.com/users/1090446/shd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 532, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452586795, "creation_date": 1442414585, "question_id": 32611832, "link": "https://stackoverflow.com/questions/32611832/how-to-pass-unsigned-int-reference-to-from-python-to-c-using-swig", "title": "how to pass unsigned int reference to from python to C++ using swig?", "body": "<p>I am using swig, which is wrapping one of my C++ function:</p>\n\n<pre><code>get(unsigned int a, unsigned int &amp;b);\n</code></pre>\n\n<p>but i am failing to call this function from python, the error i get is TypeError that it should be unsigned int&amp;</p>\n\n<p>how call to this function from python ? should i add something special to the .i file ?</p>\n"}, {"tags": ["c++", "gcc", "boost", "android-ndk", "boost-spirit-qi"], "answers": [{"comments": [{"owner": {"reputation": 2842, "user_id": 126225, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0e19cc71f571c2360fb9394f251383ef?s=128&d=identicon&r=PG", "display_name": "Hans Malherbe", "link": "https://stackoverflow.com/users/126225/hans-malherbe"}, "edited": false, "score": 0, "creation_date": 1442474849, "post_id": 32614231, "comment_id": 53099345, "body": "Thanks, I&#39;ll try your recommendations. I&#39;ve added the semantic action to the code snippet to complete the parser."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2842, "user_id": 126225, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0e19cc71f571c2360fb9394f251383ef?s=128&d=identicon&r=PG", "display_name": "Hans Malherbe", "link": "https://stackoverflow.com/users/126225/hans-malherbe"}, "edited": false, "score": 0, "creation_date": 1442479032, "post_id": 32614231, "comment_id": 53101626, "body": "I still had to add some stuff there :/ See the updated answer with a fixed grammar. Consider keeping the rules static/shared (they can be const). Also note, it looks like you&#39;re doing macro expansion but very (very!!) inefficiently. Look at <a href=\"http://stackoverflow.com/questions/9404558/a/9405546?s=3|0.4015#9405546\">this very flexible sample</a>, this <a href=\"http://stackoverflow.com/questions/17112494/a/17126962#17126962\">simple one using spirit</a>, the same <a href=\"http://stackoverflow.com/questions/17112494/a/17128601#17128601\">not using spirit</a>."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2842, "user_id": 126225, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0e19cc71f571c2360fb9394f251383ef?s=128&d=identicon&r=PG", "display_name": "Hans Malherbe", "link": "https://stackoverflow.com/users/126225/hans-malherbe"}, "edited": false, "score": 0, "creation_date": 1442479110, "post_id": 32614231, "comment_id": 53101675, "body": "In case you really wanted to reuse the template <b>and</b> be efficient, <a href=\"http://stackoverflow.com/a/28521682/85371\">this answer uses Spirit + ICL to parse templates</a> that can be very efficiently expanded repeatedly."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1442507351, "last_edit_date": 1442507351, "creation_date": 1442421748, "answer_id": 32614231, "question_id": 32611682, "link": "https://stackoverflow.com/questions/32611682/simple-boostspirit-grammar-sigsegv-on-android/32614231#32614231", "title": "Simple boost::spirit grammar SIGSEGV on Android", "body": "<p>Of course errors can be fixed. <strike>You do not show the grammar</strike> See <strong>Update</strong> You show a lot of parser expressions with unknowns, though, so there's no way we could even start to reason about your code.</p>\n\n<p>One thing that <strong>does</strong> stand out is the (ab)use of <code>auto</code>, though.</p>\n\n<p>A quick google should point you at ~6 questions on SO that warn about this.</p>\n\n<blockquote>\n  <p><strong>You can not use <code>auto</code> with Spirit's expression templates</strong>. In all but the very very trivial cases (unparameterized stateless terminals) this leads directly to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><strong>Undefined Behaviour</strong></a></p>\n</blockquote>\n\n<p>Try using</p>\n\n<ul>\n<li><code>qi::rule&lt;&gt;</code> to contain/group the expressions</li>\n<li><code>boost::spirit::copy</code> or <code>boost::proto::deep_copy</code></li>\n</ul>\n\n<p><strong>UPDATE</strong></p>\n\n<p>To the edited question: indeed the grammar crashed due to undefined behaviour (if this ever \"appeared to work\", you were just (un)lucky!).</p>\n\n<p>Here's a fixed version, as a bonus I removed the <code>action&lt;&gt;</code> thing replacing it with existing Phoenix mechanisms and attribute propagation.</p>\n\n<p>You may want to study the changes side-by-side to find out exactly what I changed.</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/67ab4be694c7555d\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/spirit/include/phoenix.hpp&gt;\n\nstruct part {\n    part(std::string s=\"\") : _value(std::move(s)) {}\n    virtual ~part() { }\n    virtual void do_print(std::ostream&amp; os) const = 0;\n  protected:\n    std::string _value;\n};\n\nstruct property_part : part { \n    using part::part; \n    void do_print(std::ostream&amp; os) const { os &lt;&lt; \"{{=\" &lt;&lt; _value &lt;&lt; \"}}\"; }\n};\nstruct text_part     : part { \n    using part::part; \n    void do_print(std::ostream&amp; os) const { os &lt;&lt; \"'\" &lt;&lt; _value &lt;&lt; \"'\"; }\n};\n\nstd::vector&lt;std::shared_ptr&lt;part&gt;&gt; parse(const std::string&amp; source) {\n    namespace qi = boost::spirit::qi;\n    namespace px = boost::phoenix;\n    using boost::spirit::ascii::char_;\n    using qi::lit;\n\n    typedef std::shared_ptr&lt;part&gt; pptr;\n    qi::rule&lt;std::string::const_iterator, pptr()&gt; prop_g, text_g;\n\n    // this is ok: purely stateless expression template\n    prop_g = lit(\"{{=\")\n        &gt;&gt; *char_(' ')\n        &gt;&gt; qi::as_string [ +~char_(\"} \") ] [ qi::_val = px::construct&lt;pptr&gt;(px::new_&lt;property_part&gt;(qi::_1)) ]\n        &gt;&gt; *char_(' ')\n        &gt;&gt; \"}}\"\n        ;\n\n    text_g = qi::as_string [ +~char_('{') ] [ qi::_val = px::construct&lt;pptr&gt;(px::new_&lt;text_part&gt;(qi::_1)) ];\n\n    std::vector&lt;pptr&gt; parts;\n    qi::parse(source.begin(), source.end(), -text_g &gt;&gt; +(prop_g &gt;&gt; text_g), parts);\n\n    return parts;\n}\n\nint main() {\n    auto result = parse(\"My book is about {{= this-is-a-(bogus)-property-part }} else entirely {{=byebye}}\");\n    assert(result.size() == 4);\n\n    for(auto item : result)\n        item-&gt;do_print(std::cout);\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>'My book is about '{{=this-is-a-(bogus)-property-part}}' else entirely '{{=byebye}}\n</code></pre>\n"}], "owner": {"reputation": 2842, "user_id": 126225, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0e19cc71f571c2360fb9394f251383ef?s=128&d=identicon&r=PG", "display_name": "Hans Malherbe", "link": "https://stackoverflow.com/users/126225/hans-malherbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 32614231, "answer_count": 1, "score": 1, "last_activity_date": 1442507351, "creation_date": 1442414239, "last_edit_date": 1442474776, "question_id": 32611682, "link": "https://stackoverflow.com/questions/32611682/simple-boostspirit-grammar-sigsegv-on-android", "title": "Simple boost::spirit grammar SIGSEGV on Android", "body": "<p>The parser</p>\n\n<pre><code>        namespace qi = boost::spirit::qi;\n\n        template&lt;typename T&gt;\n        class action\n        {\n        public:\n            action(std::vector&lt;std::shared_ptr&lt;part&gt;&gt;&amp; parts) : m_parts{ parts } {}\n\n            void operator()(const std::vector&lt;char&gt;&amp; cc, qi::unused_type, qi::unused_type) const\n            {\n                std::string s(cc.begin(), cc.end());\n                if (s.length() &gt; 0) {\n                    auto p = new T(s);\n                    m_parts.push_back(std::shared_ptr&lt;part&gt;(p));\n                }\n            }\n        private:\n            std::vector&lt;std::shared_ptr&lt;part&gt;&gt;&amp; m_parts;\n        };\n\n        std::vector&lt;std::shared_ptr&lt;part&gt;&gt; parse(const std::string&amp; source) {\n            namespace ascii = boost::spirit::ascii;\n\n            using ascii::char_;\n            using qi::lit;\n\n            std::vector&lt;std::shared_ptr&lt;part&gt;&gt; parts;\n\n            auto prop_g = lit(\"{{=\")\n                &gt;&gt; *char_(' ')\n                &gt;&gt; (*(char_ - char_(\"} \")))[action&lt;property_part&gt;(parts)]\n                &gt;&gt; *char_(' ')\n                &gt;&gt; \"}}\"\n                ;\n            auto text_g = (+(char_ - '{'))[action&lt;text_part&gt;(parts)];\n            auto g = -text_g &gt;&gt; +(prop_g &gt;&gt; text_g);\n\n            qi::parse(source.begin(), source.end(), g);\n            return parts;\n        }\n</code></pre>\n\n<p>causes a fault on the qi::parse call when testing on a Kitkat device. The fault happens before any semantic action is called. The same code works on Xcode 6/iOS 8.4 and VS 2015. We're using Boost 1.59.</p>\n\n<p>We could replace Spirit with Bison implying an extra build step, or use Clang with the Android NDK, getting us off the beaten path.</p>\n\n<p>Can this fault be fixed with build configuration or are there other options we could explore?</p>\n"}, {"tags": ["c++", "qt", "arm", "qt-creator", "cross-compiling"], "comments": [{"owner": {"reputation": 4252, "user_id": 1113139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d875f6bb3d484f227b68a7b2923de948?s=128&d=identicon&r=PG", "display_name": "yegorich", "link": "https://stackoverflow.com/users/1113139/yegorich"}, "edited": false, "score": 0, "creation_date": 1442503214, "post_id": 32611657, "comment_id": 53116844, "body": "Don&#39;t know about Arch Linux. Perhaps you&#39;re better off with Debian and <a href=\"https://debian-handbook.info/browse/jessie/sect.manipulating-packages-with-dpkg.html#sect.multi-arch\" rel=\"nofollow noreferrer\">multi-arch</a> support:"}, {"owner": {"reputation": 726, "user_id": 2404492, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1f48bd538551d73b9e0a2122b6ae06d?s=128&d=identicon&r=PG", "display_name": "Alexandr Zarubkin", "link": "https://stackoverflow.com/users/2404492/alexandr-zarubkin"}, "reply_to_user": {"reputation": 4252, "user_id": 1113139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d875f6bb3d484f227b68a7b2923de948?s=128&d=identicon&r=PG", "display_name": "yegorich", "link": "https://stackoverflow.com/users/1113139/yegorich"}, "edited": false, "score": 0, "creation_date": 1442507114, "post_id": 32611657, "comment_id": 53119366, "body": "@yegorich Do you mean I need to install Debian on ARM computer <b>and</b> on my build machine, then enable multi-arch to use prebuilt ARM binaries from repository on my build machine?"}, {"owner": {"reputation": 4252, "user_id": 1113139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d875f6bb3d484f227b68a7b2923de948?s=128&d=identicon&r=PG", "display_name": "yegorich", "link": "https://stackoverflow.com/users/1113139/yegorich"}, "edited": false, "score": 0, "creation_date": 1442558396, "post_id": 32611657, "comment_id": 53138448, "body": "Yes. Take a look at this <a href=\"https://github.com/visionsystemsgmbh/vsdebootstrap\" rel=\"nofollow noreferrer\">project</a>. It describes debootstrap method, i.e. the way to create a basic Debian root file system."}, {"owner": {"reputation": 4252, "user_id": 1113139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d875f6bb3d484f227b68a7b2923de948?s=128&d=identicon&r=PG", "display_name": "yegorich", "link": "https://stackoverflow.com/users/1113139/yegorich"}, "edited": false, "score": 0, "creation_date": 1442558915, "post_id": 32611657, "comment_id": 53138746, "body": "Another approach would be to take <a href=\"http://buildroot.org/\" rel=\"nofollow noreferrer\">Buildroot</a>. It takes more time to create your root file system, but you&#39;re much more flexible in altering it and you are independent in host Linux distribution, i.e. you can keep Arch Linux. It also integrates bootloader, kernel and your own software building."}, {"owner": {"reputation": 4252, "user_id": 1113139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d875f6bb3d484f227b68a7b2923de948?s=128&d=identicon&r=PG", "display_name": "yegorich", "link": "https://stackoverflow.com/users/1113139/yegorich"}, "edited": false, "score": 0, "creation_date": 1442559037, "post_id": 32611657, "comment_id": 53138809, "body": "For completeness take a look at this <a href=\"http://stackoverflow.com/questions/22255466/angstrom-archlinux-yocto-buildroot-choose-os-for-embeded-x86/22267616#22267616\">thread</a> too."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1444398666, "post_id": 32611657, "comment_id": 53900746, "body": "There should be spec file in the ARM Qt 5.5.0 that you can point an x86 <i>qmake</i> to.  Checkout the <a href=\"http://doc.qt.io/qt-5/qmake-advanced-usage.html\" rel=\"nofollow noreferrer\">advanced usage</a> as you may have a different compiler name on the host as opposed to the target.  You need to a cross gcc to match the target floating point.  Your Ubuntu has several ARM cross compilers, so it should be easy to find a match for the target."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 10830469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X7BjJ.jpg?s=128&g=1", "display_name": "Chorus", "link": "https://stackoverflow.com/users/10830469/chorus"}, "is_accepted": false, "score": 1, "last_activity_date": 1549566991, "creation_date": 1549566991, "answer_id": 54580680, "question_id": 32611657, "link": "https://stackoverflow.com/questions/32611657/using-qt-arm-prebuilt-binaries-to-cross-compile/54580680#54580680", "title": "Using Qt ARM prebuilt binaries to cross-compile", "body": "<p>Depending on how much memory you have on your ARM board you could consider to compile directly on your board. You then have to install the dev package of Qt. </p>\n\n<p>On the Orange Pi One board I can even run Qt Creator directly on the board. On smaller boards which don't have a HDMI output I run a VNC server and use the Qt Creator running on the board by a window on my host computer which is connected to the board over Wifi.</p>\n\n<p>On even smaller boards I usually create my own image using buildroot which is very comfortable and supports development and cross-compilation using Qt Creator on the host machine.</p>\n\n<p>Hope this helps. </p>\n"}], "owner": {"reputation": 726, "user_id": 2404492, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1f48bd538551d73b9e0a2122b6ae06d?s=128&d=identicon&r=PG", "display_name": "Alexandr Zarubkin", "link": "https://stackoverflow.com/users/2404492/alexandr-zarubkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1170, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1549566991, "creation_date": 1442414177, "last_edit_date": 1442414687, "question_id": 32611657, "link": "https://stackoverflow.com/questions/32611657/using-qt-arm-prebuilt-binaries-to-cross-compile", "title": "Using Qt ARM prebuilt binaries to cross-compile", "body": "<p>I have a small ARM board with Arch Linux ARM distro. There are ARM Qt 5.5.0 binaries available in the repositories.</p>\n\n<p>I want to cross-compile a program using Qt for that board on my Ubuntu Trusty x86_64 virtual machine. Do I need to cross-compile Qt from source first or there is a way to reuse prebuilt ARM binaries?</p>\n\n<p>I mean, when I try to set a Qt kit in Qt Creator, it wants me to point to qmake executable. And ARM executable isn't, well, <em>executable</em> on my build machine. So it seems I need to build Qt in order to get qmake. But then it comes with its own set of libraries and I'm not sure I can replace them.</p>\n"}, {"tags": ["c++", "eclipse", "makefile", "cmake"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1442415747, "post_id": 32611284, "comment_id": 53075199, "body": "When I make a <code>Makefile</code> project I don&#39;t need to play with any settings. I generate the <code>Makefile</code> (I use autotools but should not change anything). Then I open the Makefile in the editor and on the right window I select the <code>Outline</code> tab. Then just select and add the <i>make targets</i> you want (usually all, clean, install and uninstall). Then switch to the <code>Make Target</code> tab (next to the <code>Outline</code> tab) and I&#39;m done. Double click on the <i>make targets</i> to compile/clean/install etc."}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1442476200, "post_id": 32611284, "comment_id": 53100062, "body": "I&#39;m not sure I understand what you mean. Opening the Makefile in the editor and selecting Outline tab? I am still having problems."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1442479579, "post_id": 32611284, "comment_id": 53101953, "body": "Here is a picture: <a href=\"http://ibin.co/2FwQJIsO5bkU\" rel=\"nofollow noreferrer\">ibin.co/2FwQJIsO5bkU</a> the <code>Outline</code> tab is on the right. If it&#39;s not there you can open it using <code>Window-&gt;Show View-&gt;Outline</code> from the menu. Then Right-click on the make targets you want and select &quot;Add Make Target&quot; from the little popup. The Make targets appear in the <code>Make Target</code> tab.If its not there open it using <code>Window-&gt;Show View-&gt;Make Target</code> from the menu."}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1442502205, "post_id": 32611284, "comment_id": 53116133, "body": "Ok Thanks. I finally solved it. The following must be specified in the build directory  ${workspace_loc:/proj/build} . I don&#39;t know why the variable PROJECT_LOC doesn&#39;t work when it points to right location and also I don&#39;t see where workspace_loc is defined? In Linked Resources, I see the variable WORKSPACE_LOC defined but only when this is in lower case this works. I don&#39;t understand it."}], "answers": [{"comments": [{"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1442475694, "post_id": 32612167, "comment_id": 53099799, "body": "This still does not work for me unfortunately. It states &quot;No targets specified and no makefile found. Stop&quot;."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1442477051, "post_id": 32612167, "comment_id": 53100542, "body": "So where&#39;s your Makefile actually placed?"}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1442477888, "post_id": 32612167, "comment_id": 53101000, "body": "My makefile is in the build directory inside the project directory. The absolute address would be like /home/user/Documents/My_proj_/build. I even tried entering the full address into the fields but it&#39;s still telling me that there is no makefile found. Strange"}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1442479620, "post_id": 32612167, "comment_id": 53101977, "body": "I have actually solved it. In the build directory I Must specify ${workspace_loc:/proj/build} and not use PROJECT_LOC. This I don&#39;t understand as where is this workspace_loc variable defined? Under Linked Resources, I see variables defined in Capital Letters and PROJECT_LOC should work?"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1442415418, "creation_date": 1442415418, "answer_id": 32612167, "question_id": 32611284, "link": "https://stackoverflow.com/questions/32611284/using-custom-made-makefile-in-eclipse/32612167#32612167", "title": "Using custom-made makefile in Eclipse", "body": "<p>It's just enough to untick the <code>Generate Makefiles automatically</code>, and specify the <code>Build directory</code>.</p>\n\n<p>Also note that </p>\n\n<pre><code> make $(PROJECT_LOC)/build/Makefile\n</code></pre>\n\n<p>actually takes <code>$(PROJECT_LOC)/build/Makefile</code> as target (hence the error you see). If you want to specify a particular Makefile use the <code>-f</code> option:</p>\n\n<pre><code> make -f $(PROJECT_LOC)/build/Makefile\n</code></pre>\n"}], "owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1056, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1442415418, "creation_date": 1442413187, "question_id": 32611284, "link": "https://stackoverflow.com/questions/32611284/using-custom-made-makefile-in-eclipse", "title": "Using custom-made makefile in Eclipse", "body": "<p>If this question is not suitable here, please let me know.</p>\n\n<p>I am trying to set up an environment in Eclipse to use a custom-built makefile generated by cmake instead of the built-in builders in eclipse. I have tried all the recommended settings but there is still no joy. </p>\n\n<p>I create a new project with New->C++ Project->Makefile project->Empty Project and changed the location from default to the location where my project is.</p>\n\n<p>In project->Properties->C/C++Build, I un-tick the \"use default build command\" and put the path where my makefile is. I also un-tick \"Generate Makefiles automatically\". </p>\n\n<p><a href=\"https://i.stack.imgur.com/Cu0mT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cu0mT.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have tried many different commands but I am receiving errors like \"No rule to make target '/Makefile'. Stop\"</p>\n\n<p>I am surely missing out on something. If anyone has any knowledge about how to do this it would be much appreciated. Thanks.</p>\n"}, {"tags": ["c++", "express", "directx-9"], "comments": [{"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1442413853, "post_id": 32611273, "comment_id": 53073743, "body": "I think you should be able to use DX9 even if you have installed DX11 SDK, they are usually backward compatible. You can also use the new DX11 functions, but limit your code to DX9 features."}, {"owner": {"reputation": 13, "user_id": 5342719, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153590322372346/picture?type=large", "display_name": "Rob Hope", "link": "https://stackoverflow.com/users/5342719/rob-hope"}, "edited": false, "score": 0, "creation_date": 1442414054, "post_id": 32611273, "comment_id": 53073933, "body": "Nothing just had a look online to try and find info is there a big diffence between them if i start learning with direct x 11 will it be hard to use direct x 9 at college"}, {"owner": {"reputation": 13, "user_id": 5342719, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153590322372346/picture?type=large", "display_name": "Rob Hope", "link": "https://stackoverflow.com/users/5342719/rob-hope"}, "edited": false, "score": 0, "creation_date": 1442414711, "post_id": 32611273, "comment_id": 53074466, "body": "Thanks i wasn&#39;t sure never used direct x before :)"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1442430041, "post_id": 32611273, "comment_id": 53083913, "body": "You didn&#39;t say which version of Visual C++ Express you are using? Also not that using Direct3D 9 will require using a lot of deprecated stuff like D3DX9, XNAMath, etc. Too bad the course isn&#39;t using Direct3D 11."}], "answers": [{"tags": [], "owner": {"reputation": 362, "user_id": 3284729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ca8976e38c941cb7aeb76eed52ec80f?s=128&d=identicon&r=PG", "display_name": "Thief", "link": "https://stackoverflow.com/users/3284729/thief"}, "is_accepted": true, "score": 0, "last_activity_date": 1442414731, "creation_date": 1442414731, "answer_id": 32611890, "question_id": 32611273, "link": "https://stackoverflow.com/questions/32611273/can-i-use-direct-x-9-in-c-express-when-i-have-direct-x-11/32611890#32611890", "title": "Can i use Direct x 9 in c++ express when i have direct x 11", "body": "<p>Yes, you can use direct-x 9 in Visual Studio Express C++.</p>\n\n<p>You will need to have the correct Direct-X SDK installed, your course should have given you instructions on that. Make sure you install the SDK they ask you to, or code examples they give you may not compile.</p>\n"}], "owner": {"reputation": 13, "user_id": 5342719, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153590322372346/picture?type=large", "display_name": "Rob Hope", "link": "https://stackoverflow.com/users/5342719/rob-hope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 32611890, "answer_count": 1, "score": -1, "last_activity_date": 1442414731, "creation_date": 1442413159, "question_id": 32611273, "link": "https://stackoverflow.com/questions/32611273/can-i-use-direct-x-9-in-c-express-when-i-have-direct-x-11", "title": "Can i use Direct x 9 in c++ express when i have direct x 11", "body": "<p>Hi i've got direct x 11 installed and a college course ive just started are using direct x 9. Is there a way to use direct x9 in visual studio express c++ thatnks :)</p>\n"}, {"tags": ["c++", "unordered-map"], "comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1442412920, "post_id": 32611144, "comment_id": 53073048, "body": "The types are missing in your question..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 35010, "user_id": 703016, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6daa32d7171f74efb1b663c6edc32e3b?s=128&d=identicon&r=PG&f=1", "display_name": "user703016", "link": "https://stackoverflow.com/users/703016/user703016"}, "edited": false, "score": 0, "creation_date": 1442413133, "post_id": 32611144, "comment_id": 53073214, "body": "@AnastasiyaAsadullayeva I wonder how you would hash that."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1442413176, "post_id": 32611144, "comment_id": 53073251, "body": "@Quentin Check out the edit on the question. The types were literally not visible."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1442413268, "post_id": 32611144, "comment_id": 53073315, "body": "@SimonKraemer oh, my bad. It makes sense now :)"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 4, "creation_date": 1442413288, "post_id": 32611144, "comment_id": 53073336, "body": "How are you going to use the <code>unordered_map</code> once the files have been read?"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1442413386, "post_id": 32611144, "comment_id": 53073404, "body": "How about using a struct + union?"}, {"owner": {"reputation": 4355, "user_id": 127602, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a29866b9845a2910f23c1a6ef7ece0f7?s=128&d=identicon&r=PG", "display_name": "Zaid Amir", "link": "https://stackoverflow.com/users/127602/zaid-amir"}, "edited": false, "score": 0, "creation_date": 1442413552, "post_id": 32611144, "comment_id": 53073514, "body": "And how will you know how to cast the keys and values once your map is populated? You could use <code>void*</code> though I personally don&#39;t like it as it can get messy pretty easily."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1442414553, "post_id": 32611144, "comment_id": 53074347, "body": "Sounds like you need some sort of type erasure on the map. But without context, I can&#39;t be any more specific :)"}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1442464786, "post_id": 32611144, "comment_id": 53095423, "body": "Anastasiya Asadullayeva&#39;s suggestion of <code>boost::variant</code> is solid.  In the <code>unordered_map</code>, you could use one as the key, and a <code>vector</code> thereof as the value.  To hash, write you own function that switches on the key&#39;s <code>.which()</code> value (a 0 based index of the type stored), extract the value of that type and hash it using the Standard Library <code>std::hash</code> functions for integers and strings."}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 3174578, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/6e5bce3211fb89111e6d87f2d7f5e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Yind", "link": "https://stackoverflow.com/users/3174578/yind"}, "edited": false, "score": 0, "creation_date": 1442415699, "post_id": 32611414, "comment_id": 53075165, "body": "Basically I will ready a file, the file with tell me the type of data i&#39;m reading and the I will have to store that data in an unordered_map, the keys can be int8, int16, int32, and the values can be int8, int16, int32, string. I will create an unordered map for each set of values so if the set i&#39;m reading is int32, string, it will create an unordered_map for that."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 195, "user_id": 3174578, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/6e5bce3211fb89111e6d87f2d7f5e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Yind", "link": "https://stackoverflow.com/users/3174578/yind"}, "edited": false, "score": 0, "creation_date": 1442415974, "post_id": 32611414, "comment_id": 53075389, "body": "Yes but once you have this <code>unordered_map</code> how are you going to use it?"}, {"owner": {"reputation": 195, "user_id": 3174578, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/6e5bce3211fb89111e6d87f2d7f5e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Yind", "link": "https://stackoverflow.com/users/3174578/yind"}, "edited": false, "score": 0, "creation_date": 1442416159, "post_id": 32611414, "comment_id": 53075524, "body": "I will iterate another lists and get the values from the ordered_maps, I will know what type of data I&#39;m using for the key and use that to generate a JSON string as result"}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 195, "user_id": 3174578, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/6e5bce3211fb89111e6d87f2d7f5e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Yind", "link": "https://stackoverflow.com/users/3174578/yind"}, "edited": false, "score": 0, "creation_date": 1442417099, "post_id": 32611414, "comment_id": 53076176, "body": "According to what you say going by parametric polymorphism and encapsulate all the behavior inside a <code>template&lt;typename K, typename V&gt;</code> should be the best solution"}, {"owner": {"reputation": 195, "user_id": 3174578, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/6e5bce3211fb89111e6d87f2d7f5e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Yind", "link": "https://stackoverflow.com/users/3174578/yind"}, "edited": false, "score": 0, "creation_date": 1442417213, "post_id": 32611414, "comment_id": 53076237, "body": "I added more context of the problem above. but I will research about the template. thank you!"}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1442464108, "post_id": 32611414, "comment_id": 53095232, "body": "The code presented under &quot;Parametric Polymorphism&quot; isn&#39;t a good fit as the types aren&#39;t known until after the file &quot;header&quot; has been read: some non-templated header parsing code could then call one of many instantiations for processing the rest of the file, but an issue is there&#39;s no particular reason to think &quot;many&quot; is going to be sensibly small - e.g. there are LOTS of permutations of types possible given 10 fields...."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 2, "last_activity_date": 1442413532, "creation_date": 1442413532, "answer_id": 32611414, "question_id": 32611144, "link": "https://stackoverflow.com/questions/32611144/c-unordered-map-especify-types-on-runtime/32611414#32611414", "title": "C++ unordered_map especify types on runtime", "body": "<p>What are you going to store inside the map and how are you going to choose it?</p>\n\n<p>There are two practical solution to your problem:</p>\n\n<h3>Parametric Polymorphism</h3>\n\n<p>This is how you should try to solve your problem in the first place. By keeping the arguments of your <code>unordered_map</code> generic.</p>\n\n<p>This is mostly done by having a structure like</p>\n\n<pre><code>class Reader {\n  virtual void readFile(const std::string&amp; name) = 0;\n};\n\ntemplate&lt;typename K, typename V&gt;\nclass RealReader {\nprivate:\n  std::unordered_map&lt;K,V&gt; data;\n\npublic:\n  void readFile(const std::string&amp; name) override {\n    K key = // read key;\n    V value = // read value\n    data[key] = value;\n  }\n};\n</code></pre>\n\n<h3>Subtype Polymorphism</h3>\n\n<p>Define your own <code>Key</code> and/or <code>Value</code> classes so that you can define a <code>std::unordered_map&lt;Key*,Value*&gt;</code> and then subtype these custom types with your required types.</p>\n\n<p>Without knowing how these are going to be used it's difficult to tell what's best.</p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 3174578, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/6e5bce3211fb89111e6d87f2d7f5e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Yind", "link": "https://stackoverflow.com/users/3174578/yind"}, "is_accepted": true, "score": 1, "last_activity_date": 1442568264, "creation_date": 1442568264, "answer_id": 32648450, "question_id": 32611144, "link": "https://stackoverflow.com/questions/32611144/c-unordered-map-especify-types-on-runtime/32648450#32648450", "title": "C++ unordered_map especify types on runtime", "body": "<p>I ended up using a self defined type and void * for the data.</p>\n\n<p>So I set the type of the var in the struct and the data for it.</p>\n\n<p>Here is the result: </p>\n\n<pre><code>struct fieldVariant {\n    char type;\n    void * data;\n    fieldVariant(char _type, void * _data) {\n        type = _type;\n        data = _data;\n    }\n};\nstruct fieldHash {\n    inline size_t operator()(const fieldVariant * val) const\n    {\n        unsigned long h = 0;\n        unsigned long varSize = 0;\n        switch (val-&gt;type) {\n            case INT8:\n                varSize = 1;\n                break;\n            case INT16:\n                varSize = 2;\n                break;\n            case INT32:\n                varSize = 4;\n                break;\n            case INT64:\n                varSize = 8;\n                break;\n            case INT128:\n                varSize = 16;\n                break;\n            case CHAR2:\n                varSize = ((string *)val-&gt;data)-&gt;length();\n                break;\n        }\n\n        for (int i=0; i &lt; varSize; i++)\n            h = 5 * h + *(char *)(val-&gt;data + i);\n        return size_t(h);\n    }\n};\n\n\nstruct fieldEql {\n    inline bool operator()(const fieldVariant *s1,const fieldVariant *s2) const {\n        unsigned long varSize = 0;\n        switch (s1-&gt;type) {\n            case INT8:\n                varSize = 1;\n                break;\n            case INT16:\n                varSize = 2;\n                break;\n            case INT32:\n                varSize = 4;\n                break;\n            case INT64:\n                varSize = 8;\n                break;\n            case INT128:\n                varSize = 16;\n                break;\n            case CHAR2:\n                return *((string *)s1-&gt;data) == *((string *)s2-&gt;data);\n        }\n        return memcmp(s1-&gt;data, s2-&gt;data, varSize) == 0;\n    }\n};\n\nunordered_map&lt;fieldVariant *, fieldVariant *, fieldHash, fieldEql&gt; data;\nvoid add(fieldVariant * key, fieldVariant * value) {data[key] = value;};\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 3174578, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/6e5bce3211fb89111e6d87f2d7f5e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Yind", "link": "https://stackoverflow.com/users/3174578/yind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 32648450, "answer_count": 2, "score": 0, "last_activity_date": 1442601319, "creation_date": 1442412873, "last_edit_date": 1442416912, "question_id": 32611144, "link": "https://stackoverflow.com/questions/32611144/c-unordered-map-especify-types-on-runtime", "title": "C++ unordered_map especify types on runtime", "body": "<p>Is there any way that I could define an <code>unordered_map&lt;*,*&gt;</code> var and depending a case or other redefine it with the appropriate types?</p>\n\n<p>I'm reading some binaries files and the format is different for each so depending the formats it can by <code>&lt;int, string&gt;, &lt;short, string&gt;, &lt;int, int&gt;, etc..</code></p>\n\n<p>The only way I can think of is to define it <code>&lt;char *, char *&gt;</code> but I would have to define the hashing and other thing to work like that.</p>\n\n<p>Is there any other option?</p>\n\n<p><strong>EDIT. ADD MORE CONTEXT FOR THE PROBLEM:</strong></p>\n\n<p>I will iterate another lists and get the values from the ordered_maps, I will know what type of data I'm using for the key and use that to generate a JSON string as result.</p>\n\n<p>For more context the format of the files are like these:</p>\n\n<pre><code>INT number of fields to use. Example: 3\n-- now there is a for from 1 to 3 as we have 3 fields\nCHAR type of data (1 = int8, 2 = int16, 3 = int32, 4=string)\nSTRING name of the field\nSTRING alias of the field\n-- end for\n-- now I do a while not EOF\n    -- for each field\n        read value from file (int8, int16, int32, string) depending the type of field\n        first item of the for will be the KEY\n        if item != first add the value to an unoredered_map using the first as key\n    -- end for\n-- end while\n</code></pre>\n"}, {"tags": ["c++", "qt", "quazip"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 4869590, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9a1ccb14bfc6ab1317fed0db2fb15ae?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/4869590/isaac"}, "edited": false, "score": 0, "creation_date": 1442475607, "post_id": 32612544, "comment_id": 53099744, "body": "It works, thank you! But how am I supposed to know that qt has it owns implementation of zlib?"}, {"owner": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "reply_to_user": {"reputation": 115, "user_id": 4869590, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9a1ccb14bfc6ab1317fed0db2fb15ae?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/4869590/isaac"}, "edited": false, "score": 0, "creation_date": 1442476321, "post_id": 32612544, "comment_id": 53100140, "body": "@Isaac Qt don&#39;t have own implementation of zlib. In $$[QTDIR]\\Src\\qtbase\\src\\3rdparty\\zlib located zlib version, that Qt use. #include &lt;QtLib/zlib.h&gt; work just such as alias to zlib.h."}, {"owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "edited": false, "score": 0, "creation_date": 1472580336, "post_id": 32612544, "comment_id": 65805652, "body": "Fantastic, fixed that for me.  Other unresolved symbols, but this was great.  Thanks @Milovidov."}, {"owner": {"reputation": 1350, "user_id": 919155, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/90bf6a3dc0a54d71e7c480b1ae1df9ed?s=128&d=identicon&r=PG", "display_name": "Damien", "link": "https://stackoverflow.com/users/919155/damien"}, "edited": false, "score": 0, "creation_date": 1493115529, "post_id": 32612544, "comment_id": 74264595, "body": "I think it was a compiler mismatch between my windows path an qtcreator. Working now by compiling everything from command line."}], "tags": [], "owner": {"reputation": 1625, "user_id": 1967661, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/32659e79c7bdcabade3eae9f8180a817?s=128&d=identicon&r=PG", "display_name": "synacker", "link": "https://stackoverflow.com/users/1967661/synacker"}, "is_accepted": true, "score": 5, "last_activity_date": 1442476816, "last_edit_date": 1442476816, "creation_date": 1442416398, "answer_id": 32612544, "question_id": 32611058, "link": "https://stackoverflow.com/questions/32611058/compile-quazip-under-windows-8-1-and-qt-creator/32612544#32612544", "title": "Compile quazip under windows 8.1 and qt creator", "body": "<ol>\n<li>Download quazip source from <a href=\"http://quazip.sourceforge.net/\" rel=\"noreferrer\">quzip site</a></li>\n<li>Open by Qt Creator quazip.pri</li>\n<li>Replace all strings #include \"zlib.h\" or \"#include &lt; zlib.h>\"</li>\n</ol>\n\n<p>to</p>\n\n<pre><code>#include &lt;QtZlib/zlib.h&gt;\n</code></pre>\n\n<ol start=\"4\">\n<li>Build project and run unit tests.</li>\n</ol>\n"}], "owner": {"reputation": 115, "user_id": 4869590, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9a1ccb14bfc6ab1317fed0db2fb15ae?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/4869590/isaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1444, "favorite_count": 0, "accepted_answer_id": 32612544, "answer_count": 1, "score": 2, "last_activity_date": 1525362707, "creation_date": 1442412660, "last_edit_date": 1525362707, "question_id": 32611058, "link": "https://stackoverflow.com/questions/32611058/compile-quazip-under-windows-8-1-and-qt-creator", "title": "Compile quazip under windows 8.1 and qt creator", "body": "<p>I'm new and trying to use Quazip under qt 5.5. So I just downloaded project sources from <a href=\"http://quazip.sourceforge.net/\" rel=\"nofollow\">http://quazip.sourceforge.net/</a> and opened .pro file. When I try to build project I 've got multiple errors:</p>\n\n<pre><code>C1083: Cannot open include file: 'zlib.h': No such file or directory\n</code></pre>\n\n<p>To avoid building zlib on windows I just installed (from here: <a href=\"http://gnuwin32.sourceforge.net/packages/zlib.htm\" rel=\"nofollow\">http://gnuwin32.sourceforge.net/packages/zlib.htm</a>) complete pack for windows in C:\\GnuWin32. Then I added this line in .pro file:</p>\n\n<pre><code>INCLUDEPATH += C:\\GnuWin32\\include\n</code></pre>\n\n<p>This generated another error: </p>\n\n<pre><code>Cannot open include file: 'unistd.h': No such file or directory\n</code></pre>\n\n<p>But changing this line </p>\n\n<pre><code>#if 1           /* HAVE_UNISTD_H -- this line is updated by ./configure */\n</code></pre>\n\n<p>into this fixed the problem.</p>\n\n<pre><code>#if HAVE_UNISTD_H\n</code></pre>\n\n<p>Unfortunately now I get 25 unresolved external symbols, some of them:</p>\n\n<pre><code>quaadler32.obj:-1: error: LNK2019: unresolved external symbol adler32 referenced in function \"public: virtual unsigned int __cdecl QuaAdler32::calculate(class QByteArray const &amp;)\" (?calculate@QuaAdler32@@UEAAIAEBVQByteArray@@@Z)\nquacrc32.obj:-1: error: LNK2019: unresolved external symbol crc32 referenced in function \"public: virtual unsigned int __cdecl QuaCrc32::calculate(class QByteArray const &amp;)\" (?calculate@QuaCrc32@@UEAAIAEBVQByteArray@@@Z)\nunzip.obj:-1: error: LNK2001: unresolved external symbol crc32\nquagzipfile.obj:-1: error: LNK2019: unresolved external symbol gzopen referenced in function \"private: void * __cdecl QuaGzipFilePrivate::open(class QString const &amp;,char const *)\" (?open@QuaGzipFilePrivate@@AEAAPEAXAEBVQString@@PEBD@Z)\nquaziodevice.obj:-1: error: LNK2019: unresolved external symbol deflateInit_ referenced in function \"public: virtual bool __cdecl QuaZIODevice::open(class QFlags&lt;enum QIODevice::OpenModeFlag&gt;)\" (?open@QuaZIODevice@@UEAA_NV?$QFlags@W4OpenModeFlag@QIODevice@@@@@Z)\nquaziodevice.obj:-1: error: LNK2019: unresolved external symbol inflate referenced in function \"protected: virtual __int64 __cdecl QuaZIODevice::readData(char *,__int64)\" (?readData@QuaZIODevice@@MEAA_JPEAD_J@Z)\n</code></pre>\n\n<p>I tries adding this line:</p>\n\n<pre><code>LIBS += -LC:\\GnuWin32\\lib\n</code></pre>\n\n<p>But that didn't solve the problem. WHat is the easiest way to use Quazip under Qt? </p>\n"}, {"tags": ["c++", "performance", "qt", "qgraphicsscene"], "answers": [{"comments": [{"owner": {"reputation": 690, "user_id": 3660508, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/60b587f91e8135acfb08c08ea13196b1?s=128&d=identicon&r=PG&f=1", "display_name": "honiahaka10", "link": "https://stackoverflow.com/users/3660508/honiahaka10"}, "edited": false, "score": 0, "creation_date": 1442479806, "post_id": 32611348, "comment_id": 53102092, "body": "OKay, thank you i will now try to figure out, how QImage works. I found this project which seems to be mostly that what i want <a href=\"http://www.swharden.com/blog/2013-06-03-realtime-image-pixelmap-from-numpy-array-data-in-qt/\" rel=\"nofollow noreferrer\">image</a> I just need to figure out how i can do this in c++. But this will only answer half of my question: Why do itemAt() not work?"}], "tags": [], "owner": {"reputation": 186, "user_id": 5342731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a241009bc9d3193b83c1e3065586b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/5342731/jonathan"}, "is_accepted": true, "score": 2, "last_activity_date": 1442413367, "creation_date": 1442413367, "answer_id": 32611348, "question_id": 32611057, "link": "https://stackoverflow.com/questions/32611057/qgraphicsscene-itemat-only-returns-zero-and-whole-scene-is-slow/32611348#32611348", "title": "QGraphicsScene.itemAt() only returns zero and whole scene is slow", "body": "<p>400x400 'dot matrix' is up to 16000 dots, or up to 2500 characters, which quite big.\nThe QGraphicsScene is designed to handle a small number of large shapes, and was probably not designed to handle this many shapes. Using it in this way to create thousands of identical tiny 'pixel' objects is incredibly inefficent.</p>\n\n<p>Could you create a 400x400 bitmap(QBitmap?) instead, and set the individual pixels that you want?</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1442414684, "creation_date": 1442414684, "answer_id": 32611873, "question_id": 32611057, "link": "https://stackoverflow.com/questions/32611057/qgraphicsscene-itemat-only-returns-zero-and-whole-scene-is-slow/32611873#32611873", "title": "QGraphicsScene.itemAt() only returns zero and whole scene is slow", "body": "<p>You are supposed to be using a <code>QGraphicsPixmapItem</code> instead of an array of dots!</p>\n"}], "owner": {"reputation": 690, "user_id": 3660508, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/60b587f91e8135acfb08c08ea13196b1?s=128&d=identicon&r=PG&f=1", "display_name": "honiahaka10", "link": "https://stackoverflow.com/users/3660508/honiahaka10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 32611348, "answer_count": 2, "score": 0, "last_activity_date": 1442414684, "creation_date": 1442412660, "last_edit_date": 1442414638, "question_id": 32611057, "link": "https://stackoverflow.com/questions/32611057/qgraphicsscene-itemat-only-returns-zero-and-whole-scene-is-slow", "title": "QGraphicsScene.itemAt() only returns zero and whole scene is slow", "body": "<p>I am trying to create a dot matrix in a QGraphicsScene. I have a button, which fills a 2d-array with random numbers and than i will paint a pixel on every position where the array has a 0.\nNow, when I wants to generate the matrix again i want to check every pixel and array-field whether they are empty or not. If the pixel is empty and the array not, i want to set a pixel. If there is a pixel but the array is empty i want to remove the pixel. Now the problem is, the function itemAt() always returns 0 even if i can clearly see existen pixels.\nWhat is my problem?</p>\n\n<pre><code>//creating the scene in the constructor\nQPainter MyPainter(this);\nscene = new QGraphicsScene(this);\nui.graphicsView-&gt;setScene(scene);\n\n//generating matrix\nvoid MaReSX_ClickDummy::generate(void)\n{\n    QGraphicsItem *item;\n    int x, y;\n    for(x=0; x&lt; 400; x++)\n    {\n        for(y=0; y&lt;400; y++)\n        {\n            dataArray[x][y] = rand()%1001;\n        }\n    }\n\n    for(x=0; x &lt; 400; x++)\n    {\n        for(y=0; y&lt;400; y++)\n        {\n            item = scene-&gt;itemAt(x, y, QTransform());//supposed to check whether there is already a pixel on that place but always returns zero\n            if(dataArray[x][y] == 0 &amp;&amp; item == 0)\n                scene-&gt;addEllipse(x, y, 1, 1);\n            //does not work\n            else if(dataArray[x][y] != 0 &amp;&amp; item != 0)\n                scene-&gt;removeItem(item);\n        }\n    }\n}\n</code></pre>\n\n<p>Also the generating of the matrix is very slow. Since the matrix is supposed to show realtime data later, it should run as fast as possible. (and the scene will be bigger than 400*400 pixels like now). Any ideas how to improve the code?</p>\n\n<p>And can somebody explain what the third parameter of itemAt() is supposed to do?</p>\n\n<p>Thank you!</p>\n"}]