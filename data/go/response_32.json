[{"tags": ["google-app-engine", "go", "interface", "google-cloud-datastore"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 2828554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7da6d94ae3f7a8bee4eb74d766bf0e1c?s=128&d=identicon&r=PG", "display_name": "CristianMR", "link": "https://stackoverflow.com/users/2828554/cristianmr"}, "edited": false, "score": 0, "creation_date": 1440070466, "post_id": 32106434, "comment_id": 52126740, "body": "Well, I think your are right. Do you know how to access to the original stored data? In the google developers console, at the datastore, the showed value of permissions is: {&quot;properties&quot;:{&quot;5127067817476096&quot;:{&quot;entityValue&quot;:{&quot;propertie&zwnj;&#8203;s&quot;:{&quot;canInviteAssist&zwnj;&#8203;ants&quot;:{&quot;booleanValue&zwnj;&#8203;&quot;:true,&quot;indexed&quot;:fal&zwnj;&#8203;se},&quot;showsOnMessages&zwnj;&#8203;&quot;:{&quot;booleanValue&quot;:tr&zwnj;&#8203;ue,&quot;indexed&quot;:false},&zwnj;&#8203;&quot;canInviteOrganizers&zwnj;&#8203;&quot;:........ ........ I&#39;m searching a way to do this."}], "tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": true, "score": 0, "last_activity_date": 1440022064, "creation_date": 1440022064, "answer_id": 32106434, "question_id": 32106231, "link": "https://stackoverflow.com/questions/32106231/convert-string-data-to-struct-inserted-on-java-appengine-objectify-readed-on/32106434#32106434", "title": "Convert string data to struct: Inserted on Java AppEngine (Objectify), readed on Go AppEngine", "body": "<p>You can't, you have to create a decoder for that format.</p>\n\n<p>You could use json or something.</p>\n"}], "owner": {"reputation": 3, "user_id": 2828554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7da6d94ae3f7a8bee4eb74d766bf0e1c?s=128&d=identicon&r=PG", "display_name": "CristianMR", "link": "https://stackoverflow.com/users/2828554/cristianmr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 32106434, "answer_count": 1, "score": 0, "last_activity_date": 1475211565, "creation_date": 1440021000, "last_edit_date": 1475211565, "question_id": 32106231, "link": "https://stackoverflow.com/questions/32106231/convert-string-data-to-struct-inserted-on-java-appengine-objectify-readed-on", "title": "Convert string data to struct: Inserted on Java AppEngine (Objectify), readed on Go AppEngine", "body": "<p><strong>The Intro</strong>  </p>\n\n<p>Hi there, I am doing a module on Go AppEngine and I have problems reading some models, that have nested models inside. The model is Party, and what I want is Permissions. But, when I get Party from datastore, Permissions struct field is of type string. </p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>//And when I do fmt.Println(party.Permissions) show this:\n\n%!(EXTRA string=jjrz\ufffd\u0013\u00105878654076715008 *\ufffd\ufffdjjrz\u000fshowOnMessages \n*\u0010z\u0013canInviteAssistants *\u0010z\u0013canInviteOrganizers *\u0010z\fcanEditEvent \n*\u0010zroleName *\u000b   organizerz\u000fisAdmin *\u0010\ufffdz\ufffd\u0013\u00104709220381360128 \n*\ufffd\ufffdjjrz\u000fshowOnMessages *\u0010z\u0013canInviteAssistants *\u0010z\u0013canInviteOrganizers \n*\u0010z\fcanEditEvent *\u0010zroleName *ownerz\u000fisAdmin *\u0010\ufffd\ufffd\n</code></pre>\n\n<p>What is that string? There is a way to get the original struct?  </p>\n\n<p><strong>The Models</strong> </p>\n\n<p>Go </p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>type Party struct {\n  Name string `datastore:\"name\"`\n  Permissions string `datastore:\"permissions\"`\n}\n\ntype PartyPermission struct {\n  isAdmin bool\n  canInviteOrganizers bool\n  canInviteAssistants bool\n  canEditParty bool\n  showOnMessages bool\n  roleName string\n}\n</code></pre>\n\n<p>Java  </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class Party implements Cloneable, Serializable {\n\n    @Id\n    private Long id;\n\n    private String name;\n\n    private Map&lt;String, PartyPermission&gt; permissions;\n\n    // constructor ...\n\n    // getters, setters, etc\n}\n\npublic class PartyPermission implements Serializable {\n\n    private static final long serialVersionUID = 3019266092062869643L;\n\n    private boolean isAdmin;\n\n    private boolean canInviteOrganizers;\n\n    private boolean canInviteAssistants;\n\n    private boolean canEditEvent;\n\n    private boolean showsOnMessages;\n\n    private String roleName;\n\n    // constructor\n\n    // getters, setters, etc\n\n}\n</code></pre>\n\n<p><strong>What I've tried</strong></p>\n\n<p>I started with go, on monday 10, and I don't recognize what could be that string. I think that maybe that string was an interface and I could convert that string to an interface, and then to what I really wish, map[string]PartyPermission. So, reflection:</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>func (p *Party) GetPermissions() (map[string]PartyPermission) {\n\n  iPermissions := reflect.ValueOf(p.Permissions).Interface()\n\n  return iPermissions.(map[string]PartyPermission)  \n}\n</code></pre>\n\n<p>That compiles great, but Go said that string couldn't be converted to another thing. Something like:</p>\n\n<pre><code>interface conversion: interface is string, not map[string]packName.PartyPermission\n</code></pre>\n\n<p>Thanks for your time.</p>\n"}, {"tags": ["mysql", "go"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1439997851, "post_id": 32099294, "comment_id": 52093759, "body": "What DB driver are you using? Popular Go DB drivers often don&#39;t support <code>IN</code> queries very well."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 5169425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb96340d8476bf8b7ddd391a9f0f85f7?s=128&d=identicon&r=PG&f=1", "display_name": "Brainhash", "link": "https://stackoverflow.com/users/5169425/brainhash"}, "edited": false, "score": 0, "creation_date": 1440000799, "post_id": 32099873, "comment_id": 52095714, "body": "another option would be to populate temporary table to keep &#39;IN&#39; list and then use this table in the query (either join or IN subquery).  This way you are not bounded too much handling varying size of IN list."}, {"owner": {"reputation": 593, "user_id": 1351792, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/750ce24f442f49822e30776706ee0e7e?s=128&d=identicon&r=PG", "display_name": "Oriam", "link": "https://stackoverflow.com/users/1351792/oriam"}, "edited": false, "score": 0, "creation_date": 1440014269, "post_id": 32099873, "comment_id": 52103607, "body": "ok, just another question, here:        params := []interface{} { &quot;aValue&quot;, 3, 4, 6, 9 }    I need to add dynamically those values, I not even know how many they are going to be"}, {"owner": {"reputation": 5298, "user_id": 12606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e1086eadc88de1e47fbffca9a73fd82?s=128&d=identicon&r=PG", "display_name": "Stuart Carnie", "link": "https://stackoverflow.com/users/12606/stuart-carnie"}, "edited": false, "score": 0, "creation_date": 1440107938, "post_id": 32099873, "comment_id": 52149419, "body": "you would need to generate a string of ?&#39;s for the IN clause matching the number of IDs you need"}], "tags": [], "owner": {"reputation": 5298, "user_id": 12606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e1086eadc88de1e47fbffca9a73fd82?s=128&d=identicon&r=PG", "display_name": "Stuart Carnie", "link": "https://stackoverflow.com/users/12606/stuart-carnie"}, "is_accepted": true, "score": 2, "last_activity_date": 1439998325, "creation_date": 1439998325, "answer_id": 32099873, "question_id": 32099294, "link": "https://stackoverflow.com/questions/32099294/issue-with-sql-query-in-go/32099873#32099873", "title": "Issue with sql query in GO", "body": "<p>The issue is that the single <code>?</code> is not expanded into the <code>SELECT</code> statement (like a string replace), but as a single string value <code>3,4,5,6</code></p>\n\n<p>You need to expand each value of the <code>IN</code> clause as such:</p>\n\n<pre><code>params := []interface{} { \"aValue\", 3, 4, 6, 9 }\nstmt, err := o.database.Prepare(\"SELECT * FROM tableX WHERE `A`= ? AND `B` IN ( ?, ?, ?, ? )\")\ndefer stmt.Close()\nrows, err := stmt.Query(params...)\n</code></pre>\n\n<p>To make your life easier, you can use a package like <a href=\"http://jmoiron.github.io/sqlx/#inQueries\" rel=\"nofollow\">sqlx</a>, which has better support for parameterized <code>IN</code> queries</p>\n"}], "owner": {"reputation": 593, "user_id": 1351792, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/750ce24f442f49822e30776706ee0e7e?s=128&d=identicon&r=PG", "display_name": "Oriam", "link": "https://stackoverflow.com/users/1351792/oriam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 32099873, "answer_count": 1, "score": 0, "last_activity_date": 1439998325, "creation_date": 1439996822, "question_id": 32099294, "link": "https://stackoverflow.com/questions/32099294/issue-with-sql-query-in-go", "title": "Issue with sql query in GO", "body": "<p>I have a really simple mysql table, with 3 columns, A, B and C.</p>\n\n<p>A and B are keys.</p>\n\n<p>I have a GO app and I'm trying to retrieve data from db. With other queries works like a charm, but with this one it doesn't:</p>\n\n<pre><code>aParam := \"aValue\"\nbParam := \"3,4,6,9\"\nstmt, err := o.database.Prepare(\"SELECT * FROM tableX WHERE `A`= ? AND `B` IN ( ? )\")\ndefer stmt.Close()\nrows, err := stmt.Query(aParam, bParam)\nfor rows.Next() {\n...\n}\n</code></pre>\n\n<p>If I replace the second ? for the values, it works perfect:</p>\n\n<pre><code>stmt, err := o.database.Prepare(\"SELECT * FROM tableX WHERE `A`= ? AND `B` IN ( 3,4,6,9 )\")\n</code></pre>\n\n<p>I also tried with this (it doesn't work):</p>\n\n<pre><code>stmt, err := o.database.Prepare(\"SELECT * FROM tableX WHERE `A`= ? AND `B` IN ( \" + bParam +\" )\")\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 4, "creation_date": 1439998335, "post_id": 32099288, "comment_id": 52094073, "body": "Be careful that Go maps are not thread-safe. You must protect your map from concurrent access by multiple goroutines by using a synchronization primitive, such as a mutex. Otherwise, behaviour is pretty much undefined."}], "answers": [{"tags": [], "owner": {"reputation": 6265, "user_id": 3387925, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mtLre.jpg?s=128&g=1", "display_name": "Mayank Patel", "link": "https://stackoverflow.com/users/3387925/mayank-patel"}, "is_accepted": true, "score": 4, "last_activity_date": 1440004896, "last_edit_date": 1440004896, "creation_date": 1439997827, "answer_id": 32099665, "question_id": 32099288, "link": "https://stackoverflow.com/questions/32099288/go-channels-why-two-different-outputs/32099665#32099665", "title": "Go channels: why two different outputs?", "body": "<p>Your results makes perfect sense. As go routine run independent of each other, you would never know when go routine will start executing. As soon as line </p>\n\n<pre><code>m[2] = \"Second Value\"\n</code></pre>\n\n<p>is executed it will be reflected on your main go routine.</p>\n\n<p>Hence when above line is executed between first and second print of your program you see result as</p>\n\n<pre><code>1-First Value\n2-Second Value\n3-Second Value\n4-Second Value\n</code></pre>\n\n<p>When it is not you see other one. Before third print you ensure that other go routine is finished.</p>\n\n<p>Just to clear it even more if you modify your program a little bit like</p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"time\"\n\nfunc main() {\n    m := make(map[int]string)\n    m[2] = \"First Value\"\n    c := make(chan bool)\n    go func() {\n        m[2] = \"Second Value\"\n        c &lt;- true\n    }()\n    time.Sleep(time.Second)\n    fmt.Printf(\"1-%s\\n\", m[2])\n    fmt.Printf(\"2-%s\\n\", m[2])\n    _ = &lt;-c\n    fmt.Printf(\"3-%s\\n\", m[2])\n    fmt.Printf(\"4-%s\\n\", m[2])\n}\n</code></pre>\n\n<p><kbd><a href=\"http://play.golang.org/p/w-l2xgKXgO\" rel=\"nofollow\">Playground</a></kbd></p>\n\n<p>You will most probably get the following output</p>\n\n<pre><code>1-Second Value\n2-Second Value\n3-Second Value\n4-Second Value\n</code></pre>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 8981, "user_id": 71444, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2101d75ccd71c5dfb984991a7ba53b9b?s=128&d=identicon&r=PG", "display_name": "harm", "link": "https://stackoverflow.com/users/71444/harm"}, "is_accepted": false, "score": 2, "last_activity_date": 1439998232, "creation_date": 1439998232, "answer_id": 32099828, "question_id": 32099288, "link": "https://stackoverflow.com/questions/32099288/go-channels-why-two-different-outputs/32099828#32099828", "title": "Go channels: why two different outputs?", "body": "<p>You code actually only makes sure that the third and the forth prints display the second value. When you change the channel to have a buffer of 1 it doesn't really change anything.</p>\n\n<p>So let's look at the first case. You have an unbuffered channel.\nThe go routine you fire off changes the content of the map. But you have no idea when the scheduler will run it. That is why sometimes you see one result and an other time the other result. \nThe call: <code>_ = &lt;-c</code> will ensure that the go routine has ran. Because this call will block until the go routine actually wrote something on the channel. That's why you will never see 'First value' in the last 2 prints.</p>\n\n<p>When you use a buffered channel the only thing that will change is that the go routine will immediately exit after writing to the channel. Nothing else (read it on <a href=\"https://golang.org/doc/effective_go.html#channels\" rel=\"nofollow\">Effective Go</a>).</p>\n"}], "owner": {"reputation": 977, "user_id": 1419809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0Plto.jpg?s=128&g=1", "display_name": "Pauli", "link": "https://stackoverflow.com/users/1419809/pauli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 32099665, "answer_count": 2, "score": 4, "last_activity_date": 1440004896, "creation_date": 1439996811, "question_id": 32099288, "link": "https://stackoverflow.com/questions/32099288/go-channels-why-two-different-outputs", "title": "Go channels: why two different outputs?", "body": "<p>I'm trying to understand channels in Go. Here is a code example:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    m := make(map[int]string)\n    m[2] = \"First Value\"\n    c := make(chan bool)\n    go func() {\n        m[2] = \"Second Value\"\n        c &lt;- true\n    }()\n    fmt.Printf(\"1-%s\\n\", m[2])\n    fmt.Printf(\"2-%s\\n\", m[2])\n    _ = &lt;-c\n    fmt.Printf(\"3-%s\\n\", m[2])\n    fmt.Printf(\"4-%s\\n\", m[2])\n}\n</code></pre>\n\n<p>Sometimes the output of the above code was (result 1):</p>\n\n<pre><code>1-First Value\n2-First Value\n3-Second Value\n4-Second Value\n</code></pre>\n\n<p>but sometimes I got (result 2):</p>\n\n<pre><code>1-First Value\n2-Second Value\n3-Second Value\n4-Second Value\n</code></pre>\n\n<p>After changing <code>c := make(chan bool)</code> to <code>c := make(chan bool, 1)</code>, the same occurred: sometimes result 1, sometimes result 2.</p>\n\n<p>Why?</p>\n"}, {"tags": ["types", "go"], "comments": [{"owner": {"reputation": 1667, "user_id": 359660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73a63c1f44ef127e609753975421ef7f?s=128&d=identicon&r=PG", "display_name": "LanceH", "link": "https://stackoverflow.com/users/359660/lanceh"}, "edited": false, "score": 0, "creation_date": 1439997617, "post_id": 32099195, "comment_id": 52093585, "body": "There is also the assignment of something of varying type to a variable, which will have to be an interface that handles any methods that foo will eventually call.  So foo will have to be definied as &#39;var foo InterfaceType = Factory(&quot;Foo&quot;)&#39; or some such.  See <a href=\"https://golang.org/doc/effective_go.html#interfaces_and_types\" rel=\"nofollow noreferrer\">golang.org/doc/effective_go.html#interfaces_and_types</a> for more on interfaces as well as the above on reflection."}, {"owner": {"reputation": 11, "user_id": 5243986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8edbb9f285ce4cb9af960c6b138b044?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitar Georgievski", "link": "https://stackoverflow.com/users/5243986/dimitar-georgievski"}, "reply_to_user": {"reputation": 1667, "user_id": 359660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73a63c1f44ef127e609753975421ef7f?s=128&d=identicon&r=PG", "display_name": "LanceH", "link": "https://stackoverflow.com/users/359660/lanceh"}, "edited": false, "score": 0, "creation_date": 1440001625, "post_id": 32099195, "comment_id": 52096157, "body": "Yes, my post looks like a duplicate of the [<a href=\"http://stackoverflow.com/questions/10210188/instance-new-type-golang]\" title=\"instance new type golang%5d\">stackoverflow.com/questions/10210188/instance-new-type-gola&zwnj;&#8203;ng]</a>. I think I&#39;ll probably use the suggestion from that post - maintain a map that keeps track of the Types that should be used in the application."}], "owner": {"reputation": 11, "user_id": 5243986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8edbb9f285ce4cb9af960c6b138b044?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitar Georgievski", "link": "https://stackoverflow.com/users/5243986/dimitar-georgievski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "closed_date": 1440001465, "answer_count": 0, "score": 1, "last_activity_date": 1439996621, "creation_date": 1439996621, "question_id": 32099195, "link": "https://stackoverflow.com/questions/32099195/dynamically-instantiate-a-type-in-golang", "closed_reason": "Duplicate", "title": "Dynamically instantiate a Type in Golang", "body": "<p>From what I've seen this is probably not possible at the moment in Golang, but I'll ask this question anyway.</p>\n\n<p>Given this Type </p>\n\n<pre><code>type Foo struct {\n  ....\n}\n</code></pre>\n\n<p>I would like to be able to instantiate this type, using reflection for instance, just by using its name \"Foo\".</p>\n\n<p>Something along these lines</p>\n\n<pre><code>foo := New(\"Foo\")\n</code></pre>\n\n<p>Is it possible?</p>\n"}, {"tags": ["go", "decode"], "comments": [{"owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "edited": false, "score": 0, "creation_date": 1439990674, "post_id": 32096647, "comment_id": 52088054, "body": "It would be a great help if you quote exact rules for parsing from the specification. Ideally, substitute <code>&#47;&#47; how do I handle this?</code> with <code>&#47;&#47; get the lower byte, ...</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2021, "user_id": 2325264, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9a5b28c1bf706b9138017bf0fd23ac45?s=128&d=identicon&r=PG", "display_name": "eric chiang", "link": "https://stackoverflow.com/users/2325264/eric-chiang"}, "edited": false, "score": 0, "creation_date": 1439996569, "post_id": 32098368, "comment_id": 52092803, "body": "awesome, thanks!. It&#39;s the <code>n -= 0x80 &lt;&lt; shift</code> that was really tripping me up"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 2, "last_activity_date": 1439996732, "last_edit_date": 1439996732, "creation_date": 1439994552, "answer_id": 32098368, "question_id": 32096647, "link": "https://stackoverflow.com/questions/32096647/variable-length-twos-complement-to-int64/32098368#32098368", "title": "Variable length two&#39;s complement to int64", "body": "<p>Easier to understand if you read the bytes from the end:</p>\n\n<ul>\n<li>You don't have to shift the last byte</li>\n<li>Left-shift the last byte by 8 (8 bits in a byte)</li>\n<li>Left-shift the 2nd last byte by 16</li>\n<li>...</li>\n<li>And from the first byte only use 7 bits, the leftmost bit is special.</li>\n</ul>\n\n<p>The leftmost bit of the first byte <code>b[0]&amp;080</code> tells if you have to add an offset to the result. The offset to be optionally added is <code>-1</code> multiplied by the number your input would mean by having this one bit set and all others being <code>0</code>, that is <code>-1 * (1 &lt;&lt; (len(b)*8 - 1)) = 0x80 &lt;&lt; (len(b)*8 - 8)</code>.</p>\n\n<p><strong>Examples. If input is...</strong></p>\n\n<ul>\n<li>1 byte:<br>\n<code>int64(b[0]&amp;0x7f) - int64(b[0]&amp;0x80)</code></li>\n<li>2 bytes:<br>\n<code>int64(b[0]&amp;0x7f)&lt;&lt;8 + int64(b[1]) - int64(b[0]&amp;0x80)&lt;&lt;8</code></li>\n<li>3 bytes:<br>\n<code>int64(b[0]&amp;0x7f)&lt;&lt;16 + int64(b[1])&lt;&lt;8 + int64(b[2]) - int64(b[0]&amp;0x80)&lt;&lt;16</code></li>\n</ul>\n\n<p>All these cases can be covered with a nice loop.</p>\n\n<p>Here's a compact implementation (try it on the <kbd><a href=\"http://play.golang.org/p/zUMAapNZbe\" rel=\"nofollow\">Go Playground</a></kbd>):</p>\n\n<pre><code>func ParseInt(b []byte) (int64, error) {\n    if len(b) &gt; 8 {\n        return 0, errors.New(\"value does not fit in a int64\")\n    }\n\n    var n int64\n    for i, v := range b {\n        shift := uint((len(b) - i - 1) * 8)\n        if i == 0 &amp;&amp; v&amp;0x80 != 0 {\n            n -= 0x80 &lt;&lt; shift\n            v &amp;= 0x7f\n        }\n        n += int64(v) &lt;&lt; shift\n    }\n    return n, nil\n}\n</code></pre>\n"}], "owner": {"reputation": 2021, "user_id": 2325264, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9a5b28c1bf706b9138017bf0fd23ac45?s=128&d=identicon&r=PG", "display_name": "eric chiang", "link": "https://stackoverflow.com/users/2325264/eric-chiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 32098368, "answer_count": 1, "score": 1, "last_activity_date": 1439996732, "creation_date": 1439990259, "last_edit_date": 1439995449, "question_id": 32096647, "link": "https://stackoverflow.com/questions/32096647/variable-length-twos-complement-to-int64", "title": "Variable length two&#39;s complement to int64", "body": "<p>I'm attempting to write a Go program to parse ans.1 BER two's complement integer encoding. However, the integer can have either 1, 2, 3 or 4 byte length encoding (depending on its size).</p>\n\n<p>According to the specification (<a href=\"http://www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf\" rel=\"nofollow\">http://www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf</a>) the leftmost bit is always the complement.</p>\n\n<p>What's a clean way to do this?</p>\n\n<pre><code>func ParseInt(b []byte) (int64, error) {\n    switch len(b) {\n    case 1:\n        // this works\n        return int64(b[0]&amp;0x7f) - int64(b[0]&amp;0x80), nil\n    case 2:\n        // left most byte of b[0] is -32768\n    case 3:\n        // left most byte of b[0] is -8388608\n    case 4:\n        // left most byte of b[0] is -2147483648 (and so on for 5, 6, 7, 8)\n    case 5:\n    case 6:\n    case 7:\n    case 8:\n    default:\n        return 0, errors.New(\"value does not fit in a int64\")\n    }\n}\n\n\nParseInt([]byte{0xfe})       // should return (-2, nil)\nParseInt([]byte{0xfe, 0xff}) // should return (-257, nil)\nParseInt([]byte{0x01, 0x00}) // should return (256, nil)\n</code></pre>\n"}, {"tags": ["json", "go"], "answers": [{"tags": [], "owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "is_accepted": true, "score": 3, "last_activity_date": 1439990296, "last_edit_date": 1495542771, "creation_date": 1439990296, "answer_id": 32096662, "question_id": 32096306, "link": "https://stackoverflow.com/questions/32096306/json-decoding-in-go-changes-the-object-type/32096662#32096662", "title": "JSON decoding in Go changes the object type?", "body": "<p>You should use pointer instead of struct:</p>\n\n<pre><code>func CreateObject() interface{} {\n    return &amp;MyType{} // here\n}\n\n...\n\n// This causes a panic\nx := obj.(*MyType) // and there\nfmt.Println(x.Name)\n</code></pre>\n\n<p>Enjoy: <a href=\"http://play.golang.org/p/vJjaQlq_vh\" rel=\"nofollow noreferrer\">http://play.golang.org/p/vJjaQlq_vh</a></p>\n\n<p>If you want to read more about it, consider the following thread: <a href=\"https://stackoverflow.com/questions/31960996/golang-fails-to-parse-json-for-reflection-created-object/31962240\">golang fails to parse json for reflection created object</a></p>\n"}], "owner": {"reputation": 63, "user_id": 1918569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54758cab874882d813c5e4bce91ca3f9?s=128&d=identicon&r=PG", "display_name": "Andrew Stock", "link": "https://stackoverflow.com/users/1918569/andrew-stock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 32096662, "answer_count": 1, "score": 2, "last_activity_date": 1439991845, "creation_date": 1439989359, "last_edit_date": 1439991845, "question_id": 32096306, "link": "https://stackoverflow.com/questions/32096306/json-decoding-in-go-changes-the-object-type", "title": "JSON decoding in Go changes the object type?", "body": "<p>I am trying to  build a library that can read multiple different types of objects out of JSON files (the actual library pulls them out of couchdb, but for the purposes of this it's loading them from json).</p>\n\n<p>My library doesn't know anything about the concrete type of object being loaded, hence the \"CreateObject()\" call below (which is satisfied by an interface in the real code).</p>\n\n<p>I'm having a problem that when I try to cast the object created by the CreateObject() call back to my concrete type (MyType in the example) I'm getting a panic: </p>\n\n<pre><code>panic: interface conversion: interface is map[string]interface {}, not main.MyType\n</code></pre>\n\n<p>I'd like to know where I'm going wrong here, or whether there's another more go-like way I should be approaching this problem. If I was doing it in Java I'd be using generics and would expect it to be straightforward.</p>\n\n<p>Note that if I comment out the json.NewDecoder... line then the code works (prints out a blank line, as expected). This implies something is happening in the Decode operation.</p>\n\n<p>Runnable example follows:</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"strings\"\n)\n\ntype MyType struct {\n    Name string `json:\"name\"`\n    Age  int32  `json:\"age\"`\n}\n\nfunc CreateObject() interface{} {\n    return MyType{}\n}\n\nfunc LoadJsonData() interface{} {\n    obj := CreateObject()\n    jsonStr := `{\"name\":\"Person\", \"age\":30}`\n    json.NewDecoder(strings.NewReader(jsonStr)).Decode(&amp;obj)\n\n    return obj\n}\n\nfunc main() {\n\n    obj := LoadJsonData()\n\n    // This works for some reason\n    // y := obj.(map[string]interface{})\n    // fmt.Println(y[\"name\"])\n\n    // This causes a panic\n    x := obj.(MyType)\n    fmt.Println(x.Name)\n}\n</code></pre>\n\n<p><kbd><a href=\"https://play.golang.org/p/aflCQ_zkhJ\" rel=\"nofollow\">Playground</a></kbd></p>\n"}, {"tags": ["go", "ibm-cloud", "devops"], "comments": [{"owner": {"reputation": 13257, "user_id": 248922, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b55c30cff18b13e2176c1359654ebf1c?s=128&d=identicon&r=PG&f=1", "display_name": "RickyA", "link": "https://stackoverflow.com/users/248922/rickya"}, "edited": false, "score": 0, "creation_date": 1439986786, "post_id": 32093418, "comment_id": 52085070, "body": "Looks like $GOROOT is not set for that bash session. Add <code>echo $GOROOT</code> before your <code>go test</code> to see if it is."}, {"owner": {"reputation": 412, "user_id": 1188214, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a472369f11015925af0e882429d30c1?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1188214/patrick"}, "reply_to_user": {"reputation": 13257, "user_id": 248922, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b55c30cff18b13e2176c1359654ebf1c?s=128&d=identicon&r=PG&f=1", "display_name": "RickyA", "link": "https://stackoverflow.com/users/248922/rickya"}, "edited": false, "score": 0, "creation_date": 1439990310, "post_id": 32093418, "comment_id": 52087723, "body": "It returns nothing for both $GOPATH and $GOROOT. When I try execute <code>&#47;usr&#47;bin&#47;go</code>, the following is returned: <code>_build.sh: line 6: &#47;usr&#47;bin&#47;go: No such file or directory</code>"}, {"owner": {"reputation": 13257, "user_id": 248922, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b55c30cff18b13e2176c1359654ebf1c?s=128&d=identicon&r=PG&f=1", "display_name": "RickyA", "link": "https://stackoverflow.com/users/248922/rickya"}, "edited": false, "score": 0, "creation_date": 1440063385, "post_id": 32093418, "comment_id": 52122136, "body": "do you have go installed in <code>&#47;usr&#47;bin&#47;go</code>?"}, {"owner": {"reputation": 412, "user_id": 1188214, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a472369f11015925af0e882429d30c1?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1188214/patrick"}, "reply_to_user": {"reputation": 13257, "user_id": 248922, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b55c30cff18b13e2176c1359654ebf1c?s=128&d=identicon&r=PG&f=1", "display_name": "RickyA", "link": "https://stackoverflow.com/users/248922/rickya"}, "edited": false, "score": 0, "creation_date": 1440065995, "post_id": 32093418, "comment_id": 52123893, "body": "So far the &#39;test commands&#39; install Go, set the environment variables and I&#39;m currently stuck at getting godep working such that <code>go test</code> may run the tests. Is this the correct approach towards getting the tests to run?"}, {"owner": {"reputation": 1471, "user_id": 307681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1594d12477526fb4cce0223be9f0f077?s=128&d=identicon&r=PG", "display_name": "Wieland", "link": "https://stackoverflow.com/users/307681/wieland"}, "edited": false, "score": 0, "creation_date": 1499462532, "post_id": 32093418, "comment_id": 76935014, "body": "@Patrick Have you managed to make this work? In particular, how did you install Go?"}], "answers": [{"tags": [], "owner": {"reputation": 421, "user_id": 3964588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1fbaa0386909e297a7d3a40e7efd4cb?s=128&d=identicon&r=PG&f=1", "display_name": "crjenkins89", "link": "https://stackoverflow.com/users/3964588/crjenkins89"}, "is_accepted": false, "score": 1, "last_activity_date": 1458740217, "creation_date": 1458740217, "answer_id": 36179755, "question_id": 32093418, "link": "https://stackoverflow.com/questions/32093418/devops-services-tests-not-working-in-bluemix-hub-jazz-with-go/36179755#36179755", "title": "DevOps Services tests not working in BlueMix/hub.jazz with Go", "body": "<p>That's correct.  There are only certain tools pre-installed in the enviroment that runs the jobs.  You can find them here: <a href=\"https://hub.jazz.net/docs/deploy_var/#resources\" rel=\"nofollow\">https://hub.jazz.net/docs/deploy_var/#resources</a> - Everything else would have to be installed each time the job is run.</p>\n"}], "owner": {"reputation": 412, "user_id": 1188214, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a472369f11015925af0e882429d30c1?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1188214/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1499544432, "creation_date": 1439981430, "last_edit_date": 1439997689, "question_id": 32093418, "link": "https://stackoverflow.com/questions/32093418/devops-services-tests-not-working-in-bluemix-hub-jazz-with-go", "title": "DevOps Services tests not working in BlueMix/hub.jazz with Go", "body": "<p>I'm trying to run tests on my software as it's about to be deployed via git to blueMix. Currently the pipeline is 'build stage' -> 'deploy stage', and now I'm trying to implement the 'test stage' in the middle of that process.</p>\n\n<p>My test stage has a test job, and the <code>Tester Type</code> is <code>simple</code>. The command I have currently is:</p>\n\n<pre><code>#!/bin/bash\n# invoke tests here\ngo test\n</code></pre>\n\n<p>, however the test stage fails and returns: </p>\n\n<pre><code>_build.sh: line 3: go: command not found\nBuild step 'Execute shell' marked build as failure\n</code></pre>\n\n<p>Evidently go isn't installed at the testing stage. Do I get the test server to install Go on each new git push to test it, or am I sorely mistaken?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["go", "exec", "stdout", "stderr"], "comments": [{"owner": {"reputation": 2505, "user_id": 1929635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/adQln.png?s=128&g=1", "display_name": "boaz_shuster", "link": "https://stackoverflow.com/users/1929635/boaz-shuster"}, "edited": false, "score": 1, "creation_date": 1439979205, "post_id": 32092275, "comment_id": 52079835, "body": "ummm.. for some reason, i cannot reproduce your problem. I always get TEST1 TEST2 TEST3"}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "reply_to_user": {"reputation": 2505, "user_id": 1929635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/adQln.png?s=128&g=1", "display_name": "boaz_shuster", "link": "https://stackoverflow.com/users/1929635/boaz-shuster"}, "edited": false, "score": 0, "creation_date": 1439979403, "post_id": 32092275, "comment_id": 52079947, "body": "@bshuster13 I can reproduce that on Ubuntu 14.04."}, {"owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "edited": false, "score": 4, "creation_date": 1439990851, "post_id": 32092275, "comment_id": 52088199, "body": "Please look at this: <a href=\"http://stackoverflow.com/questions/4497817/save-stdout-stderr-and-stdoutstderr-synchronously\" title=\"save stdout stderr and stdoutstderr synchronously\">stackoverflow.com/questions/4497817/&hellip;</a>"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 2, "creation_date": 1440001407, "post_id": 32092275, "comment_id": 52096055, "body": "In general you can&#39;t since many operating systems will buffer standard output (especially if it&#39;s not connected to a terminal) but leave standard error unbuffered. I don&#39;t know of an OS agnostic way to change the buffering (e.g. FreeBSD has <a href=\"https://www.freebsd.org/cgi/man.cgi?query=stdbuf\" rel=\"nofollow noreferrer\"><code>stdbuf</code>(1)</a>)."}, {"owner": {"reputation": 1031, "user_id": 1107514, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/36ef13d2c481eec643c6298213d70f21?s=128&d=identicon&r=PG", "display_name": "Leonid Shagabutdinov", "link": "https://stackoverflow.com/users/1107514/leonid-shagabutdinov"}, "edited": false, "score": 0, "creation_date": 1440071271, "post_id": 32092275, "comment_id": 52127252, "body": "I&#39;ve tried to prepend commands with <code>stdbuf -o 0 -e 0</code> on Arch Linux and got the same results. Is there any way to tell OS do not to buffer results or to emulate terminal behaviour from go?  OS specific way to do this will be okay."}, {"owner": {"reputation": 1031, "user_id": 1107514, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/36ef13d2c481eec643c6298213d70f21?s=128&d=identicon&r=PG", "display_name": "Leonid Shagabutdinov", "link": "https://stackoverflow.com/users/1107514/leonid-shagabutdinov"}, "edited": false, "score": 0, "creation_date": 1440799836, "post_id": 32092275, "comment_id": 52439601, "body": "Seems, there is really strange issue, because it is not working even in bash:   <code>$ bash -c &quot;echo TEST1; echo TEST2 1&gt;&amp;2; echo TEST3&quot; &gt; &gt;(sed &quot;s&#47;^&#47;out: &#47;&quot;) 2&gt; &gt;(sed &quot;s&#47;^&#47;err: &#47;&quot; &gt;&amp;2)</code> gives same random results; I give up..."}], "answers": [{"comments": [{"owner": {"reputation": 1031, "user_id": 1107514, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/36ef13d2c481eec643c6298213d70f21?s=128&d=identicon&r=PG", "display_name": "Leonid Shagabutdinov", "link": "https://stackoverflow.com/users/1107514/leonid-shagabutdinov"}, "edited": false, "score": 0, "creation_date": 1442476555, "post_id": 32621724, "comment_id": 53100258, "body": "The problem is that stdout and stderr can produce one program and there is no way to setup pause between stdout and stderr message in that program; e.g. instead of <code>&quot;bash&quot;, &quot;-c&quot;</code> could be another program that produce both of stdout and stderr."}, {"owner": {"reputation": 4248, "user_id": 1832966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbc5a2b0d0f59c23c20aafce9309773?s=128&d=identicon&r=PG", "display_name": "Kyle Lemons", "link": "https://stackoverflow.com/users/1832966/kyle-lemons"}, "reply_to_user": {"reputation": 1031, "user_id": 1107514, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/36ef13d2c481eec643c6298213d70f21?s=128&d=identicon&r=PG", "display_name": "Leonid Shagabutdinov", "link": "https://stackoverflow.com/users/1107514/leonid-shagabutdinov"}, "edited": false, "score": 0, "creation_date": 1442682171, "post_id": 32621724, "comment_id": 53187537, "body": "@Leo Standard output and error are like pipes of water flowing from your subcommand to your program.  If you put something in both pipes at nearly the same time, there is no guarantee that they will reach you in the same order.  The solution above is as good as you can get without modifying the target, as it stores them in the order you receive them.  You need to handle the case where things are slightly out of order in your program."}, {"owner": {"reputation": 1031, "user_id": 1107514, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/36ef13d2c481eec643c6298213d70f21?s=128&d=identicon&r=PG", "display_name": "Leonid Shagabutdinov", "link": "https://stackoverflow.com/users/1107514/leonid-shagabutdinov"}, "edited": false, "score": 0, "creation_date": 1442850531, "post_id": 32621724, "comment_id": 53241897, "body": "Therefore mutex locking provide much better ordering than without locking. Order was wrong only three times out of twenty tries of my machine, so I think it is best that it is possible to do with pipes... I just wondering how can default go implementation of CombinedOutput works (<a href=\"http://golang.org/src/os/exec/exec.go?s=10901:10947#L404\" rel=\"nofollow noreferrer\">golang.org/src/os/exec/exec.go?s=10901:10947#L404</a>), because they just assign bytes.Buffer that should behave exactly as writer with mutex. Am I missing something?"}], "tags": [], "owner": {"reputation": 4248, "user_id": 1832966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbc5a2b0d0f59c23c20aafce9309773?s=128&d=identicon&r=PG", "display_name": "Kyle Lemons", "link": "https://stackoverflow.com/users/1832966/kyle-lemons"}, "is_accepted": false, "score": 1, "last_activity_date": 1442457184, "creation_date": 1442457184, "answer_id": 32621724, "question_id": 32092275, "link": "https://stackoverflow.com/questions/32092275/go-receive-os-cmd-stdout-and-stderr-in-order/32621724#32621724", "title": "Go: receive os.cmd stdout and stderr in order", "body": "<p>There is no \"order\" with the command that you're executing.  They're parallel pipes, and as such they're effectively concurrent in the same way that two goroutines are concurrent.  You can certainly store them in the order you receive them and tag them with their source by making use of channels or a mutex.  In order to make the output not random with your synthetic example, you need to add a bit of a pause.  I have used this method successfully with real commands, however:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"os/exec\"\n    \"sync\"\n)\n\nvar (\n    result = \"\"\n)\n\ntype write struct {\n    source string\n    data   string\n}\n\ntype writer struct {\n    source string\n\n    mu     *sync.Mutex\n    writes *[]write\n}\n\nfunc (w *writer) Write(bytes []byte) (int, error) {\n    w.mu.Lock()\n    defer w.mu.Unlock()\n    *w.writes = append(*w.writes, write{\n            source: w.source,\n            data:   string(bytes),\n    })\n    return len(bytes), nil\n}\n\nfunc main() {\n    cmd := exec.Command(\"bash\", \"-c\", \"echo TEST1; sleep .1; echo TEST2 1&gt;&amp;2; sleep .1; echo TEST3\")\n\n    var mu sync.Mutex\n    var writes []write\n\n    cmd.Stderr = &amp;writer{\n            source: \"STDERR\",\n            mu:     &amp;mu,\n            writes: &amp;writes,\n    }\n    cmd.Stdout = &amp;writer{\n            source: \"STDOUT\",\n            mu:     &amp;mu,\n            writes: &amp;writes,\n    }\n\n    err := cmd.Start()\n    if err != nil {\n            log.Fatal(err)\n    }\n\n    err = cmd.Wait()\n    if err != nil {\n            log.Fatal(err)\n    }\n\n    fmt.Printf(\"%q\\n\", writes)\n}\n</code></pre>\n\n<p>will produce</p>\n\n<pre><code>[{\"STDOUT\" \"TEST1\\n\"} {\"STDERR\" \"TEST2\\n\"} {\"STDOUT\" \"TEST3\\n\"}]\n</code></pre>\n"}], "owner": {"reputation": 1031, "user_id": 1107514, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/36ef13d2c481eec643c6298213d70f21?s=128&d=identicon&r=PG", "display_name": "Leonid Shagabutdinov", "link": "https://stackoverflow.com/users/1107514/leonid-shagabutdinov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1236, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1442457184, "creation_date": 1439978274, "question_id": 32092275, "link": "https://stackoverflow.com/questions/32092275/go-receive-os-cmd-stdout-and-stderr-in-order", "title": "Go: receive os.cmd stdout and stderr in order", "body": "<p>I need to execute subcommand from go and process it stdout and stderr separately, with keeping order of ouput that comes to stdin/stdout. I've tried several differents ways, but could not achieve the correct order of output; following code shows that ouput handling order is absolutely random:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"os/exec\"\n)\n\nvar (\n    result = \"\"\n)\n\ntype writer struct {\n    result string\n    write  func(bytes []byte)\n}\n\nfunc (writer *writer) Write(bytes []byte) (int, error) {\n    writer.result += string(bytes) // process result later\n    result += string(bytes)\n    return len(bytes), nil\n}\n\nfunc main() {\n    cmd := exec.Command(\"bash\", \"-c\", \"echo TEST1; echo TEST2 1&gt;&amp;2; echo TEST3\")\n\n    stderr := &amp;writer{}\n    cmd.Stderr = stderr\n\n    stdout := &amp;writer{}\n    cmd.Stdout = stdout\n\n    err := cmd.Start()\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    err = cmd.Wait()\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    fmt.Println(result)\n}\n</code></pre>\n\n<p>With several runs code can output following:</p>\n\n<pre><code>$ go run main.go\nTEST1\nTEST3\nTEST2\n</code></pre>\n\n<p>I expect following result in all cases:</p>\n\n<pre><code>$ go run main.go\nTEST1\nTEST2\nTEST3\n</code></pre>\n\n<p>I can not call cmd.CombinedOutput because I need to process stdout/stderr separately and in realtime.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1440000474, "post_id": 32089693, "comment_id": 52095611, "body": "In general you want to do as <a href=\"http://stackoverflow.com/a/32090969/55504\">@kostya suggests</a> and make an <code>io.Reader</code> that modifies the input (e.g. a <a href=\"https://godoc.org/golang.org/x/text/transform/#NewReader\" rel=\"nofollow noreferrer\"><code>transform.NewReader</code></a> can do arbitrary transformations). However, if you wanted to rely on undocumented <code>bufio.Peek</code> behaviour and if the modification doesn&#39;t alter the length, you could muck directly with the <code>[]byte</code> returned by <code>Peek</code>. It&#39;d be ugly and fragile though."}], "answers": [{"tags": [], "owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "is_accepted": false, "score": 2, "last_activity_date": 1439974916, "creation_date": 1439974916, "answer_id": 32090969, "question_id": 32089693, "link": "https://stackoverflow.com/questions/32089693/modyfication-of-bufio-in-golang/32090969#32090969", "title": "Modyfication of bufio in golang", "body": "<p>Two ideas how to do it:</p>\n\n<ol>\n<li><p>Create your own Reader implementation that wraps an bufio.Reader and implements replacing logic (you will have to count number of read bytes).</p></li>\n<li><p>Call io.Pipe, pass the returned PipeReader to NewRequest and start a separate goroutine that will read data from a file, modify it and write to the returned PipeWriter.</p></li>\n</ol>\n\n<p>Hope this makes sense.</p>\n"}], "owner": {"reputation": 117, "user_id": 4265851, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/da5bfa8bac1a386107870f5a273502ce?s=128&d=identicon&r=PG&f=1", "display_name": "lubom", "link": "https://stackoverflow.com/users/4265851/lubom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1439974916, "creation_date": 1439971040, "question_id": 32089693, "link": "https://stackoverflow.com/questions/32089693/modyfication-of-bufio-in-golang", "title": "Modyfication of bufio in golang", "body": "<p>I reading big file and sending this file by http POST.\nI use bufio.</p>\n\n<p>And now I want to modify one of first line of this file, how to do it ?</p>\n\n<pre><code>f := bufio.NewReaderSize(os.Stdin, 65536)\nbufPart, err := f.Peek(65536))\n//how to modify bufPart(f) ?\n...\nreq, err := http.NewRequest(\"POST\", url, f)\n</code></pre>\n"}, {"tags": ["go", "garbage-collection"], "comments": [{"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1439969566, "post_id": 32085892, "comment_id": 52073419, "body": "Bet this is fine, and GC certainly cleans up eventually, but <code>requestURI = strconv.AppendInt(append(requestURI, &#39;,&#39;), int64(id), 10)</code> is the temporary-less version you might be thinking of."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439999636, "post_id": 32085892, "comment_id": 52095032, "body": "If you ever get &quot;X amount of \u2026 variables floating in memory forever&quot; (without holding a reference to them somewhere) then you&#39;ve found a bug in the garbage collector."}], "answers": [{"tags": [], "owner": {"reputation": 106867, "user_id": 13663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92f0c7fe372960ea92560487665a8720?s=128&d=identicon&r=PG", "display_name": "Will Hartung", "link": "https://stackoverflow.com/users/13663/will-hartung"}, "is_accepted": true, "score": 1, "last_activity_date": 1439954434, "creation_date": 1439954434, "answer_id": 32085977, "question_id": 32085892, "link": "https://stackoverflow.com/questions/32085892/do-variables-in-a-loop-get-garbage-collected-or-do-they-stay-in-memory/32085977#32085977", "title": "Do variables in a loop get garbage collected or do they stay in memory?", "body": "<p>They'll get GC'd as any references to them are lost with each iteration.</p>\n"}], "owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 32085977, "answer_count": 1, "score": 1, "last_activity_date": 1439954434, "creation_date": 1439953640, "question_id": 32085892, "link": "https://stackoverflow.com/questions/32085892/do-variables-in-a-loop-get-garbage-collected-or-do-they-stay-in-memory", "title": "Do variables in a loop get garbage collected or do they stay in memory?", "body": "<p>Does the variable in this bit of code get garbage collected after the loop finishes or do I have X amount of <code>sSteamId</code> variables floating in memory forever?</p>\n\n<p>If it does, how can I do this more efficiently? I only need <code>sSteamId</code> long enough to convert an <code>int</code> to a <code>string</code> and then append it to a <code>byte</code>, then it's no longer needed</p>\n\n<pre><code>for _, id := range steamIds {\n        sSteamId := strconv.Itoa(id)\n        requestURI = append(requestURI, \",\"+sSteamId...)\n}\n</code></pre>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 1278, "user_id": 2036231, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nYM74.png?s=128&g=1", "display_name": "Jose Bagatelli", "link": "https://stackoverflow.com/users/2036231/jose-bagatelli"}, "edited": false, "score": 0, "creation_date": 1439957889, "post_id": 32085288, "comment_id": 52068696, "body": "Can anyone at least present some comments about the down votes? Would like to understand why my question is not relevant or unclear?"}, {"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 1, "creation_date": 1439973317, "post_id": 32085288, "comment_id": 52075726, "body": "Your question is ok, I doubt you will get any comments about down votes. Don&#39;t let them bother you. Welcome to StackOverflow ;)"}], "answers": [{"tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": true, "score": 4, "last_activity_date": 1439950093, "creation_date": 1439950093, "answer_id": 32085427, "question_id": 32085288, "link": "https://stackoverflow.com/questions/32085288/marshal-float64-onto-json-in-go/32085427#32085427", "title": "Marshal float64 onto json in Go", "body": "<p>Short version, you can't.</p>\n\n<p>Long version? create your own type!</p>\n\n<pre><code>type FloatString float64\n\nfunc (fs FloatString) MarshalJSON() ([]byte, error) {\n    vs := strconv.FormatFloat(float64(fs), 'f', 2, 64)\n    return []byte(`\"` + vs + `\"`), nil\n}\n\nfunc (fs *FloatString) UnmarshalJSON(b []byte) error {\n    if b[0] == '\"' {\n        b = b[1 : len(b)-1]\n    }\n    f, err := strconv.ParseFloat(string(b), 64)\n    *fs = FloatString(f)\n    return err\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/43lQKggtgl\" rel=\"nofollow\"><kbd>playground</kbd></a></p>\n"}], "owner": {"reputation": 1278, "user_id": 2036231, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nYM74.png?s=128&g=1", "display_name": "Jose Bagatelli", "link": "https://stackoverflow.com/users/2036231/jose-bagatelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 0, "accepted_answer_id": 32085427, "answer_count": 1, "score": 1, "last_activity_date": 1439950093, "creation_date": 1439949096, "question_id": 32085288, "link": "https://stackoverflow.com/questions/32085288/marshal-float64-onto-json-in-go", "title": "Marshal float64 onto json in Go", "body": "<p>I have a <code>struct</code> in go which contains a <code>float64</code> field. However when I marshal the value of this field onto a json object it gives me a exponential number.\nBased on my research on people with similar issues here, I understand that in json objects it will be number and in go it will be a float64, however I don't quite understand how to read the actual number and not a float64.\nHere's a sample of my code.</p>\n\n<p><a href=\"http://play.golang.org/p/pR1B2oBKw2\" rel=\"nofollow\">http://play.golang.org/p/pR1B2oBKw2</a></p>\n\n<p>It shows a string and a float64 both with the same values and all I want is the float64 to be dislpayed correctly on my json object.\nI have found similar questions on this forum but none of them seems to have a straight forward answer. They all seems to be workarounds to me and are related to unmarshaling an object and not the other way around.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 2530, "user_id": 1153227, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/073b4ec28e5d044afae98d52a980fd8b?s=128&d=identicon&r=PG", "display_name": "Omn", "link": "https://stackoverflow.com/users/1153227/omn"}, "reply_to_user": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1439929515, "post_id": 32081808, "comment_id": 52059998, "body": "@evanmcdonnal Why would you infer that? I&#39;m asking about the best/fastest way to do a general operation. I don&#39;t see the problem with my question."}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1439930670, "post_id": 32081808, "comment_id": 52060609, "body": "If I&#39;m trying to parse a given input as efficiently as possible it usually helps to know what that input is. Why would I infer that? Because you omitted the relevant information."}, {"owner": {"reputation": 2530, "user_id": 1153227, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/073b4ec28e5d044afae98d52a980fd8b?s=128&d=identicon&r=PG", "display_name": "Omn", "link": "https://stackoverflow.com/users/1153227/omn"}, "reply_to_user": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1439941843, "post_id": 32081808, "comment_id": 52064789, "body": "@evanmcdonnal Ok, well I&#39;ve clarified that I am asking about any arbitrary string."}], "answers": [{"comments": [{"owner": {"reputation": 2530, "user_id": 1153227, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/073b4ec28e5d044afae98d52a980fd8b?s=128&d=identicon&r=PG", "display_name": "Omn", "link": "https://stackoverflow.com/users/1153227/omn"}, "edited": false, "score": 0, "creation_date": 1439929659, "post_id": 32081891, "comment_id": 52060076, "body": "Thanks, I&#39;m guessing this avoids allocating those extra strings between the Join and Field calls?"}], "tags": [], "owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "is_accepted": true, "score": 67, "last_activity_date": 1560779619, "last_edit_date": 1560779619, "creation_date": 1439929138, "answer_id": 32081891, "question_id": 32081808, "link": "https://stackoverflow.com/questions/32081808/strip-all-whitespace-from-a-string/32081891#32081891", "title": "Strip all whitespace from a string", "body": "<p>Here is some benchmarks on a few different methods for stripping all whitespace characters from a string: (<a href=\"http://www.gutenberg.org/cache/epub/2264/pg2264.txt\" rel=\"noreferrer\">source data</a>):</p>\n\n<pre>\nBenchmarkSpaceMap-8                     2000       1100084 ns/op      221187 B/op          2 allocs/op\nBenchmarkSpaceFieldsJoin-8              1000       2235073 ns/op     2299520 B/op         20 allocs/op\nBenchmarkSpaceStringsBuilder-8          2000        932298 ns/op      122880 B/op          1 allocs/op\n</pre>\n\n<ul>\n<li><code>SpaceMap</code>: uses <a href=\"https://golang.org/pkg/strings/#Map\" rel=\"noreferrer\"><code>strings.Map</code></a>; gradually increases the amount of allocated space as more non-whitespace characters are encountered</li>\n<li><code>SpaceFieldsJoin</code>: <a href=\"https://golang.org/pkg/strings/#Fields\" rel=\"noreferrer\"><code>strings.Fields</code></a> and <a href=\"https://golang.org/pkg/strings/#Join\" rel=\"noreferrer\"><code>strings.Join</code></a>; generates a lot of intermediate data</li>\n<li><code>SpaceStringsBuilder</code> uses <a href=\"https://golang.org/pkg/strings/#Builder\" rel=\"noreferrer\"><code>strings.Builder</code></a>; performs a single allocation, but may grossly overallocate if the source string is mainly whitespace.</li>\n</ul>\n\n\n\n<pre><code>package main_test\n\nimport (\n    \"strings\"\n    \"unicode\"\n    \"testing\"\n)\n\nfunc SpaceMap(str string) string {\n    return strings.Map(func(r rune) rune {\n        if unicode.IsSpace(r) {\n            return -1\n        }\n        return r\n    }, str)\n}\n\nfunc SpaceFieldsJoin(str string) string {\n    return strings.Join(strings.Fields(str), \"\")\n}\n\nfunc SpaceStringsBuilder(str string) string {\n    var b strings.Builder\n    b.Grow(len(str))\n    for _, ch := range str {\n        if !unicode.IsSpace(ch) {\n            b.WriteRune(ch)\n        }\n    }\n    return b.String()\n}\n\nfunc BenchmarkSpaceMap(b *testing.B) {\n    for n := 0; n &lt; b.N; n++ {\n        SpaceMap(data)\n    }\n}\n\nfunc BenchmarkSpaceFieldsJoin(b *testing.B) {\n    for n := 0; n &lt; b.N; n++ {\n        SpaceFieldsJoin(data)\n    }\n}\n\nfunc BenchmarkSpaceStringsBuilder(b *testing.B) {\n    for n := 0; n &lt; b.N; n++ {\n        SpaceStringsBuilder(data)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2754, "user_id": 1621232, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4ca2ea1416fa3dc15d1037e6502ac4da?s=128&d=identicon&r=PG", "display_name": "Nicolas Marshall", "link": "https://stackoverflow.com/users/1621232/nicolas-marshall"}, "is_accepted": false, "score": 1, "last_activity_date": 1439995584, "last_edit_date": 1439995584, "creation_date": 1439930527, "answer_id": 32082217, "question_id": 32081808, "link": "https://stackoverflow.com/questions/32081808/strip-all-whitespace-from-a-string/32082217#32082217", "title": "Strip all whitespace from a string", "body": "<p>From <a href=\"http://rosettacode.org/wiki/Strip_a_set_of_characters_from_a_string#Go\" rel=\"nofollow\">rosettacode.org</a> :</p>\n\n<p>You can find this kind of function :</p>\n\n<pre><code>func stripChars(str, chr string) string {\n    return strings.Map(func(r rune) rune {\n        if strings.IndexRune(chr, r) &lt; 0 {\n            return r\n        }\n        return -1\n    }, str)\n}\n</code></pre>\n\n<p>So, simply replacing <code>chr</code> by <code>\" \"</code> here should be enough to do the trick and remove the whitespaces.</p>\n\n<p>Beware that there are other kind of whitespaces defined by unicode (like line break, nbsp, ...), and you might also want to get rid of those (especially if you're working with external data you don't really have control over)</p>\n\n<p>This would be done that way:</p>\n\n<pre><code>func stripSpaces(str string) string {\n    return strings.Map(func(r rune) rune {\n        if unicode.IsSpace(r) {\n            // if the character is a space, drop it\n            return -1\n        }\n        // else keep it in the string\n        return r\n    }, str)\n}\n</code></pre>\n\n<p>Then simply apply to your string. Hope it works, didn't test.</p>\n"}, {"comments": [{"owner": {"reputation": 2530, "user_id": 1153227, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/073b4ec28e5d044afae98d52a980fd8b?s=128&d=identicon&r=PG", "display_name": "Omn", "link": "https://stackoverflow.com/users/1153227/omn"}, "edited": false, "score": 7, "creation_date": 1448212108, "post_id": 33851518, "comment_id": 55479553, "body": "This doesn&#39;t answer the question correctly. I was not looking for the &quot;most simplest&quot; way to remove just spaces. I was looking for the fastest general method to remove ALL whitespace."}, {"owner": {"reputation": 1683, "user_id": 4736556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/X10dc.png?s=128&g=1", "display_name": "jshapy8", "link": "https://stackoverflow.com/users/4736556/jshapy8"}, "edited": false, "score": 2, "creation_date": 1478636858, "post_id": 33851518, "comment_id": 68235777, "body": "stringvar = strings.Replace(randomString, &quot; &quot;, &quot;&quot;, -1)"}, {"owner": {"reputation": 256, "user_id": 1054633, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4613fb23759ace5f29897621d58eaadc?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/1054633/ben"}, "edited": false, "score": 5, "creation_date": 1552481594, "post_id": 33851518, "comment_id": 97024913, "body": "This does not strip other whitespace like newlines and tabs."}, {"owner": {"reputation": 158, "user_id": 5649239, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S4dHP.jpg?s=128&g=1", "display_name": "mchar", "link": "https://stackoverflow.com/users/5649239/mchar"}, "edited": false, "score": 1, "creation_date": 1561120650, "post_id": 33851518, "comment_id": 99970360, "body": "<code>strings.Replace()</code> works with regex as well. This one removes all tabs and newlines:  <code>strings.Replace(str, &quot;\\t&quot;, &quot;&quot;, -1)</code> <code>strings.Replace(str, &quot;\\n&quot;, &quot;&quot;, -1)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12861522"}, "edited": false, "score": 0, "creation_date": 1582513964, "post_id": 33851518, "comment_id": 106790910, "body": "what is the -1 for?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12861522"}, "edited": false, "score": 0, "creation_date": 1582514013, "post_id": 33851518, "comment_id": 106790918, "body": "what about any whitespace, not just &quot; &quot;, what about tabs, etc"}, {"owner": {"reputation": 131, "user_id": 2508369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59da862bd55176b14531351b1bd2b763?s=128&d=identicon&r=PG", "display_name": "stondo", "link": "https://stackoverflow.com/users/2508369/stondo"}, "edited": false, "score": 0, "creation_date": 1599084865, "post_id": 33851518, "comment_id": 112667801, "body": "If n &lt; 0, there is no limit on the number of replacements. that&#39;s what -1 means"}, {"owner": {"reputation": 3383, "user_id": 21435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vl2cz.jpg?s=128&g=1", "display_name": "Bruno Rijsman", "link": "https://stackoverflow.com/users/21435/bruno-rijsman"}, "edited": false, "score": 0, "creation_date": 1600321779, "post_id": 33851518, "comment_id": 113051726, "body": "You can also use ReplaceAll to remove the need to pass in the -1 parameter."}], "tags": [], "owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "is_accepted": false, "score": 57, "last_activity_date": 1608115879, "last_edit_date": 1608115879, "creation_date": 1448165612, "answer_id": 33851518, "question_id": 32081808, "link": "https://stackoverflow.com/questions/32081808/strip-all-whitespace-from-a-string/33851518#33851518", "title": "Strip all whitespace from a string", "body": "<p>I found the simplest way would be to use <a href=\"https://golang.org/pkg/strings/#ReplaceAll\" rel=\"noreferrer\">strings.ReplaceAll</a> like so:</p>\n<pre><code>randomString := &quot;  hello      this is a test&quot;\nfmt.Println(strings.ReplaceAll(randomString, &quot; &quot;, &quot;&quot;))\n\n&gt;hellothisisatest\n</code></pre>\n<p><a href=\"https://play.golang.org/p/EEKNqz2PBeL\" rel=\"noreferrer\">Playground</a></p>\n"}], "owner": {"reputation": 2530, "user_id": 1153227, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/073b4ec28e5d044afae98d52a980fd8b?s=128&d=identicon&r=PG", "display_name": "Omn", "link": "https://stackoverflow.com/users/1153227/omn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66899, "favorite_count": 6, "accepted_answer_id": 32081891, "answer_count": 3, "score": 44, "last_activity_date": 1608115879, "creation_date": 1439928885, "last_edit_date": 1510328551, "question_id": 32081808, "link": "https://stackoverflow.com/questions/32081808/strip-all-whitespace-from-a-string", "title": "Strip all whitespace from a string", "body": "<p>What is the fastest way to strip all whitespace from some arbitrary string in Go.</p>\n\n<p>I am chaining two function from the string package:</p>\n\n<pre><code>response = strings.Join(strings.Fields(response),\"\")\n</code></pre>\n\n<p>Anyone have a better way to do this?</p>\n"}, {"tags": ["go", "swig"], "answers": [{"comments": [{"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1440313416, "post_id": 32164022, "comment_id": 52215345, "body": "Did you mean <code>UTF16FromString</code>? You left a <code>P</code> in there."}, {"owner": {"reputation": 1179, "user_id": 35084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1c0201e3f1435eaab02c803a33c52ae?s=128&d=identicon&r=PG", "display_name": "brunoqc", "link": "https://stackoverflow.com/users/35084/brunoqc"}, "edited": false, "score": 0, "creation_date": 1440422712, "post_id": 32164022, "comment_id": 52252302, "body": "It works if I use <code>Hello(SwigcptrLPCWSTR(unsafe.Pointer(&amp;p)))</code>"}], "tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": true, "score": 2, "last_activity_date": 1440314589, "last_edit_date": 1440314589, "creation_date": 1440312929, "answer_id": 32164022, "question_id": 32081171, "link": "https://stackoverflow.com/questions/32081171/how-to-use-lpcwstr-with-go-and-swig/32164022#32164022", "title": "How to use LPCWSTR with Go and Swig?", "body": "<p>I suspect the issue you're seeing is because what you're passing into SWIG is a double pointer instead of just a pointer, i.e. <code>wchar_t**</code> instead of just <code>wchar_t*</code>.</p>\n\n<p>I think this comes about because you call <code>UTF16PtrFromString</code> which takes the address of the UTF16 string and then subsequently call <code>unsafe.Pointer(p)</code> which I think again takes the address of its input.</p>\n\n<p>From the go source code:</p>\n\n<pre><code>func UTF16PtrFromString(s string) (*uint16) {\n    a := UTF16FromString(s)\n    return &amp;a[0]\n}\n</code></pre>\n\n<p>So I think if you instead use:</p>\n\n<pre><code>func main() {\n    p, err := syscall.UTF16FromString(\"test\") // Note the subtle change here\n    if err != nil {\n        panic(err)\n    }\n    Hello(SwigcptrLPCWSTR(unsafe.Pointer(p)))\n}\n</code></pre>\n\n<p>It should work as intended.</p>\n"}], "owner": {"reputation": 1179, "user_id": 35084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1c0201e3f1435eaab02c803a33c52ae?s=128&d=identicon&r=PG", "display_name": "brunoqc", "link": "https://stackoverflow.com/users/35084/brunoqc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 32164022, "answer_count": 1, "score": 4, "last_activity_date": 1440314589, "creation_date": 1439926571, "question_id": 32081171, "link": "https://stackoverflow.com/questions/32081171/how-to-use-lpcwstr-with-go-and-swig", "title": "How to use LPCWSTR with Go and Swig?", "body": "<p>I'm trying to use a C library with Go using Swig. This is simplified code, I know I can use cgo but I need to use a function with a LPCWSTR argument with Swig.</p>\n\n<p>I saw on <a href=\"https://github.com/AllenDang/w32/blob/c92a5d7c8fed59d96a94905c1a4070fdb79478c9/typedef.go\" rel=\"nofollow\">https://github.com/AllenDang/w32/blob/c92a5d7c8fed59d96a94905c1a4070fdb79478c9/typedef.go</a> that <code>LPCWSTR</code> is the equivalent of <code>*uint16</code> so <code>syscall.UTF16PtrFromString()</code> seems to be what I need but I get an exception when I run the code.</p>\n\n<p>I'm wondering if I'm supposed to use <code>SwigcptrLPCWSTR</code> or not.</p>\n\n<p>libtest.c</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n\n#include \"libtest.h\"\n\n__stdcall void hello(const LPCWSTR s)\n{\n    printf(\"hello: %ls\\n\", s);\n}\n</code></pre>\n\n<p>libtest.h</p>\n\n<pre><code>#ifndef EXAMPLE_DLL_H\n#define EXAMPLE_DLL_H\n\n#include &lt;windows.h&gt;\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n#ifdef BUILDING_EXAMPLE_DLL\n#define EXAMPLE_DLL __declspec(dllexport)\n#else\n#define EXAMPLE_DLL __declspec(dllimport)\n#endif\n\nvoid __stdcall EXAMPLE_DLL hello(const LPCWSTR s);\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif\n</code></pre>\n\n<p>I build the lib and the DLL with :</p>\n\n<pre><code>gcc -c -DBUILDING_EXAMPLE_DLL libtest.c\ngcc -shared -o libtest.dll libtest.o -Wl,--out-implib,libtest.a\n</code></pre>\n\n<p>main.swig</p>\n\n<pre><code>%module main\n\n%{\n#include \"libtest.h\"\n%}\n\n%include \"windows.i\"\n%include \"libtest.h\"\n</code></pre>\n\n<p>main.go</p>\n\n<pre><code>package main\n\nimport (\n    \"syscall\"\n    \"unsafe\"\n)\n\nfunc main() {\n    p, err := syscall.UTF16PtrFromString(\"test\")\n    if err != nil {\n        panic(err)\n    }\n    Hello(SwigcptrLPCWSTR(unsafe.Pointer(p)))\n}\n</code></pre>\n\n<p>trace</p>\n\n<pre><code>Exception 0xc0000005 0x0 0xffffffffffffffff 0x7ffcc761f2e1\nPC=0x7ffcc761f2e1\nsignal arrived during external code execution\n\nmain._Cfunc__wrap_hello_main_90cec49f7d68ac58(0xc082002110)\n        _/D_/lpcwstr/go/_obj/_cgo_gotypes.go:53 +0x38\nmain.Hello(0x500028, 0xc082002120)\n        _/D_/lpcwstr/go/_obj/main.go:63 +0x3c\nmain.main()\n        D:/lpcwstr/go/main.go:9 +0x96\n\ngoroutine 17 [syscall, locked to thread]:\nruntime.goexit()\n        c:/go/src/runtime/asm_amd64.s:1696 +0x1\nrax     0x6c007400690074\nrbx     0x6c007400690074\nrcx     0x7ffffffe\nrdi     0x24fd73\nrsi     0x7\nrbp     0x24fb00\nrsp     0x24fa00\nr8      0xffffffffffffffff\nr9      0x7ffcc75d0000\nr10     0x0\nr11     0x200\nr12     0xffffffff\nr13     0x24fd60\nr14     0x10\nr15     0x6264403a\nrip     0x7ffcc761f2e1\nrflags  0x10202\ncs      0x33\nfs      0x53\ngs      0x2b\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 0, "creation_date": 1439923353, "post_id": 32080227, "comment_id": 52056571, "body": "&quot;go programming language errors&quot; brought up this blog: <a href=\"https://blog.golang.org/errors-are-values\" rel=\"nofollow noreferrer\">blog.golang.org/errors-are-values</a>"}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1439923383, "post_id": 32080227, "comment_id": 52056583, "body": "Not a very good topic here. It&#39;s purely a design decision. It is subjective value that some developers hold. It is reflected in the language design. Joel Spolsky has a good blog on the topic and if you watch early presentations about Go done by Robert Pike he touches on it as well."}, {"owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "edited": false, "score": 0, "creation_date": 1439923388, "post_id": 32080227, "comment_id": 52056587, "body": "I understand your concern but it is impossible to answer your &quot;question&quot; and be in a line with stackoverflow guidelines. It is just too subjective. What I propose instead is for you is to summarize 5-7 major points &quot;why it is good&quot; from the tutorials you had read and watch and write down why you disagree."}, {"owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "edited": false, "score": 0, "creation_date": 1439923594, "post_id": 32080227, "comment_id": 52056704, "body": "Basically, the starting point is incorrect. &quot;why I have to add these lines after everything I do&quot; - no, you have not. Nobody enforces you to write them if you are not interested in the result. If you do, write them. But you are interested, right?"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439928688, "post_id": 32080227, "comment_id": 52059551, "body": "&quot;[\u2026] add these lines[\u2026] Why does this not happen automatically?&quot; Because it&#39;s neither sufficient (you just continue on after printing) nor the only thing wanted (outside of <code>main</code> I rarely want to print errors)."}, {"owner": {"reputation": 4421, "user_id": 3759007, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7e4b340203ea76ae1e9e1110fce0b343?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3759007/alex"}, "edited": false, "score": 0, "creation_date": 1439939963, "post_id": 32080227, "comment_id": 52064288, "body": "Thank you for your answers."}], "answers": [{"comments": [{"owner": {"reputation": 4421, "user_id": 3759007, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7e4b340203ea76ae1e9e1110fce0b343?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3759007/alex"}, "edited": false, "score": 0, "creation_date": 1439928322, "post_id": 32080378, "comment_id": 52059364, "body": "Thank you I will read further."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 1, "last_activity_date": 1439944639, "last_edit_date": 1495541389, "creation_date": 1439923557, "answer_id": 32080378, "question_id": 32080227, "link": "https://stackoverflow.com/questions/32080227/how-can-i-further-my-understanding-of-why-go-handles-errors-the-way-it-does/32080378#32080378", "title": "How can I further my understanding of why Go handles errors the way it does?", "body": "<p>I wanted this to be a comment, but there are too many links:</p>\n\n<p><a href=\"http://blog.golang.org/error-handling-and-go\" rel=\"nofollow noreferrer\">Blog post: Error handling and Go</a></p>\n\n<p><a href=\"https://golang.org/doc/effective_go.html#errors\" rel=\"nofollow noreferrer\">Effective Go: Errors</a></p>\n\n<p><a href=\"https://stackoverflow.com/a/30178766/1705598\">SO Answer: Error returns</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/15397419/go-handling-multiple-errors-elegantly\">SO Question: Go \u2014 handling multiple errors elegantly?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/28409118/more-terse-error-handling-in-go\">SO Question: More terse error handling in Go</a></p>\n\n<p><a href=\"https://blog.golang.org/errors-are-values\" rel=\"nofollow noreferrer\">Blog post: Errors are values</a></p>\n\n<p><a href=\"https://codereview.stackexchange.com/questions/100525/a-minimal-version-control-system\">Code Review Question: A minimal version control system</a></p>\n\n<p>Function that returns an \"error handler\" function with context:</p>\n\n<pre><code>func ger(ctxt string) func(string, error) error {\n    return func(msg string, err error) error {\n        return fmt.Errorf(\"%s : %s : %v\", ctxt, msg, err)\n    }\n}\n\n// And using it:\ner := ger(\"Handling cmd\")\ner(\"Add\", err)\n</code></pre>\n\n<p>...the list goes on, use Google and SO search.</p>\n"}], "owner": {"reputation": 4421, "user_id": 3759007, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7e4b340203ea76ae1e9e1110fce0b343?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3759007/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 1, "closed_date": 1439928611, "accepted_answer_id": 32080378, "answer_count": 1, "score": -3, "last_activity_date": 1439944639, "creation_date": 1439923044, "question_id": 32080227, "link": "https://stackoverflow.com/questions/32080227/how-can-i-further-my-understanding-of-why-go-handles-errors-the-way-it-does", "closed_reason": "Opinion-based", "title": "How can I further my understanding of why Go handles errors the way it does?", "body": "<p>I have Googled \"Golang errors\", \"Go error handling\", \"Go errors\" and \"Go error verbose\" to see what other people say on the subject, and also to read on some tutorials online.</p>\n\n<p>I have also watched YouTube videos like these: <a href=\"https://www.youtube.com/watch?v=Ph4eYD7Bgek\" rel=\"nofollow\">https://www.youtube.com/watch?v=Ph4eYD7Bgek</a></p>\n\n<p>But I still can not understand why I have to add these lines after everything I do:</p>\n\n<pre><code>if err != nil {\n    fmt.Println(err)\n}\n</code></pre>\n\n<p>Why does this not happen automatically? And I still cannot understand why this way is better than try, catch. I come from a PHP background, and in PHP, I almost never did error checking, every time something went wrong it logged stuff automatically, so why do I have to this manually on Go? What are the benefits? I really want to \"Go\" 100% about learning this language, but it feels so wrong to write the same code over and over again. It goes against what I have learned about programming, to not repeat yourself.</p>\n\n<p>How can I understand this more? What is the reason and benefits of this? Maybe I would understand if someone came with examples of some situations why this way of handling error is the best way, and not try catch, and this way is better than not checking at all, like I did in PHP.</p>\n\n<p>And I have already read on the official website of Go. And various other tutorials online such as:</p>\n\n<p><a href=\"https://gobyexample.com/\" rel=\"nofollow\">https://gobyexample.com/</a></p>\n\n<p>Video tutorial by Oreilly.</p>\n\n<p>Video tutorial from Pluralsight.</p>\n"}, {"tags": ["go", "apiblueprint"], "comments": [{"owner": {"reputation": 147, "user_id": 3499844, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/gSj37.jpg?s=128&g=1", "display_name": "Love Bisaria", "link": "https://stackoverflow.com/users/3499844/love-bisaria"}, "reply_to_user": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1439946620, "post_id": 32079674, "comment_id": 52065852, "body": "not sure about your question."}], "answers": [{"tags": [], "owner": {"reputation": 1057, "user_id": 221706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d200a17dd269fd4001bacb11662dab4b?s=128&d=identicon&r=PG", "display_name": "kylef", "link": "https://stackoverflow.com/users/221706/kylef"}, "is_accepted": false, "score": 0, "last_activity_date": 1448536210, "creation_date": 1448536210, "answer_id": 33937100, "question_id": 32079674, "link": "https://stackoverflow.com/questions/32079674/while-generating-output-html-using-md-file-and-template-file-using-apiblueprint/33937100#33937100", "title": "While generating output.html using md file and template file using apiblueprint, the generated file is empty", "body": "<p>I'd recommend you take a look at <a href=\"https://github.com/danielgtaylor/aglio\" rel=\"nofollow\">aglio</a>, an API Blueprint renderer which can render your API Blueprint as HTML.</p>\n\n<pre><code>$ npm install -g aglio\n$ aglio -i input.apib -o output.html\n</code></pre>\n\n<p>This should do everything you need.</p>\n"}], "owner": {"reputation": 147, "user_id": 3499844, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/gSj37.jpg?s=128&g=1", "display_name": "Love Bisaria", "link": "https://stackoverflow.com/users/3499844/love-bisaria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1448536210, "creation_date": 1439921348, "question_id": 32079674, "link": "https://stackoverflow.com/questions/32079674/while-generating-output-html-using-md-file-and-template-file-using-apiblueprint", "title": "While generating output.html using md file and template file using apiblueprint, the generated file is empty", "body": "<p>I went through following steps:</p>\n\n<ol>\n<li>Install go and add $GOPATH env variable to a new empty directory.</li>\n<li>Install snowcrash. Parses markdown file according to apiblueprint\nspec.</li>\n<li><p>Install mercurial. On a Mac using homebrew use: brew install hg</p></li>\n<li><p>Install these Go modules:</p></li>\n<li><p><code>go get bitbucket.org/pkg/inflect</code></p></li>\n<li><p><code>go get github.com/hashicorp/go-version</code></p></li>\n<li><p><code>go get github.com/russross/blackfriday</code></p></li>\n<li><p>symlink this repo's generator directory to $GOPATH/src/generator</p></li>\n<li><p>Run the html generator:</p>\n\n<p>a. <code>cd $GOPATH/src/generator/main</code></p>\n\n<p>b. <code>go run main.go -spec ~/projects/repo/filename.md -template ~/projects/repo/filename.tmpl -out test.html</code></p></li>\n</ol>\n"}, {"tags": ["performance", "go", "pprof", "heap-profiling"], "answers": [{"comments": [{"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1441031104, "post_id": 32299161, "comment_id": 52502207, "body": "Welcome to SO! It&#39;s a great site with people helping each other. Personally, I&#39;m a profiler-skeptic, instead beating the drum for <a href=\"http://stackoverflow.com/a/378024/23771\"><i>random pausing</i></a>. For example, in Bradfitz&#39;s example, the first thing he finds costs 95% of time. What I would do is wrap a loop around the top level code so it takes enough time to manually sample. I would make sure I saw the problem on 2 or more samples. Each sample would have a 95% chance of seeing the problem, so it wouldn&#39;t take many samples. Then I would fix it and afterward measure the speedup."}, {"owner": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "edited": false, "score": 0, "creation_date": 1592549206, "post_id": 32299161, "comment_id": 110470322, "body": "I am pretty sure that neither the talk nor the github contain any information on how to interpret the output of <a href=\"http://localhost:6060/debug/pprof/heap?debug=1\" rel=\"nofollow noreferrer\">localhost:6060/debug/pprof/heap?debug=1</a>.   Please point specifically the time of the talk or the line in the github where this is mentioned."}, {"owner": {"reputation": 208, "user_id": 4123716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb43fc8e331b08706c439643b56e390?s=128&d=identicon&r=PG", "display_name": "Dustin", "link": "https://stackoverflow.com/users/4123716/dustin"}, "reply_to_user": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "edited": false, "score": 0, "creation_date": 1592691302, "post_id": 32299161, "comment_id": 110517280, "body": "@DraifKroneg Around <a href=\"https://www.youtube.com/watch?v=xxDZuPEgbBU&amp;feature=youtu.be&amp;t=1475\" rel=\"nofollow noreferrer\">youtube.com/watch?v=xxDZuPEgbBU&amp;feature=youtu.be&amp;t=1475</a> they generate a memoryprofile from running a test and store that data to prof.mem. They then process that file with go tool pprof. The output of localhost:6060/debug/pprof/heap?debug=1 is in the same format as the prof.mem file, so the same process of using the tool to dive into it applies.  I personally find dumping the output to SVG and viewing that in a browser (as Brad does) is the easiest way to understand the output. Directly reading the prof.mem file format sounds not fun, I&#39;d stick to the tooling."}], "tags": [], "owner": {"reputation": 208, "user_id": 4123716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb43fc8e331b08706c439643b56e390?s=128&d=identicon&r=PG", "display_name": "Dustin", "link": "https://stackoverflow.com/users/4123716/dustin"}, "is_accepted": false, "score": 2, "last_activity_date": 1440954758, "creation_date": 1440954758, "answer_id": 32299161, "question_id": 32078061, "link": "https://stackoverflow.com/questions/32078061/how-to-interpret-pprof-output/32299161#32299161", "title": "How to interpret pprof output?", "body": "<p>Bradfitz does a great talk on how to profile go programs using tools such as pprof.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=xxDZuPEgbBU&amp;feature=youtu.be\" rel=\"nofollow\">https://www.youtube.com/watch?v=xxDZuPEgbBU&amp;feature=youtu.be</a></p>\n\n<p>Here's the info from the talk on his github:</p>\n\n<p><a href=\"https://github.com/bradfitz/talk-yapc-asia-2015/blob/master/talk.md\" rel=\"nofollow\">https://github.com/bradfitz/talk-yapc-asia-2015/blob/master/talk.md</a></p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 1172, "user_id": 4063955, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4e673d7ec4fee43318e34d690606ca7c?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Hunt", "link": "https://stackoverflow.com/users/4063955/anthony-hunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9977, "favorite_count": 3, "answer_count": 1, "score": 9, "last_activity_date": 1518090147, "creation_date": 1439916167, "last_edit_date": 1439969496, "question_id": 32078061, "link": "https://stackoverflow.com/questions/32078061/how-to-interpret-pprof-output", "title": "How to interpret pprof output?", "body": "<p>I'm trying to profile an application written in go which apparently uses about 256 virtual memory (checked using <code>ps aux</code>). I'm trying to use <a href=\"https://golang.org/pkg/net/http/pprof/\" rel=\"noreferrer\">pprof</a> package and see what functions allocate/consume most of the memory but the results make no sense to me. <code>pprof top</code> seems to list only the runtime functions. Can someone help me understand this data?</p>\n\n<pre><code>ps aux |grep android\nroot      4584  3.4  0.1 500244 29536 pts/1    Sl+  17:21   0:38 ./android -logtostderr\n</code></pre>\n\n<p>go tool pprof <a href=\"http://localhost:6060/debug/pprof/heap\" rel=\"noreferrer\">http://localhost:6060/debug/pprof/heap</a></p>\n\n<pre><code>/pprof.localhost:6060.inuse_objects.inuse_space.008.pb.gz\nEntering interactive mode (type \"help\" for commands)\n(pprof) top\n512.19kB of 512.19kB total (  100%)\nDropped 19 nodes (cum &lt;= 2.56kB)\n      flat  flat%   sum%        cum   cum%\n  512.19kB   100%   100%   512.19kB   100%  runtime.malg\n         0     0%   100%   512.19kB   100%  runtime.mcommoninit\n         0     0%   100%   512.19kB   100%  runtime.mpreinit\n         0     0%   100%   512.19kB   100%  runtime.rt0_go\n         0     0%   100%   512.19kB   100%  runtime.schedinit\n(pprof) \n</code></pre>\n\n<p><a href=\"http://localhost:6060/debug/pprof/heap?debug=1\" rel=\"noreferrer\">http://localhost:6060/debug/pprof/heap?debug=1</a></p>\n\n<pre><code>heap profile: 3: 49632 [3: 49632] @ heap/1048576\n1: 49152 [1: 49152] @ 0x412c62 0x411bc9 0x6fd8c8 0x649c40 0x5497e6 0x409ad2 0x43615f 0x4669c1\n#   0x6fd8c8    html.init+0xe8          /usr/local/gosrc/src/html/entity.go:2154\n#   0x649c40    html/template.init+0x70     /usr/local/gosrc/src/html/template/url.go:105\n#   0x5497e6    net/http/pprof.init+0x56    /usr/local/gosrc/src/net/http/pprof/pprof.go:239\n#   0x409ad2    main.init+0x92          /root/go/src/github.com/ginkoob/devmg/local/android/local.go:236\n#   0x43615f    runtime.main+0x27f      /usr/local/gosrc/src/runtime/proc.go:100\n\n1: 384 [1: 384] @ 0x43d0e7 0x4317ef 0x437700 0x4372a9 0x464182\n#   0x43d0e7    runtime.malg+0x27       /usr/local/gosrc/src/runtime/proc1.go:2172\n#   0x4317ef    runtime.mpreinit+0x1f       /usr/local/gosrc/src/runtime/os1_linux.go:197\n#   0x437700    runtime.mcommoninit+0x100   /usr/local/gosrc/src/runtime/proc1.go:114\n#   0x4372a9    runtime.schedinit+0x79      /usr/local/gosrc/src/runtime/proc1.go:57\n#   0x464182    runtime.rt0_go+0x132        /usr/local/gosrc/src/runtime/asm_amd64.s:109\n\n1: 96 [1: 96] @ 0x449005 0x46a114 0x468625 0x467e71 0x4069d5 0x436190 0x4669c1\n#   0x46a114    golang.org/x/mobile/gl.DoWork+0x54  /root/go/src/golang.org/x/mobile/gl/work.go:82\n#   0x468625    golang.org/x/mobile/app.main+0x1d5  /root/go/src/golang.org/x/mobile/app/x11.go:65\n#   0x467e71    golang.org/x/mobile/app.Main+0x21   /root/go/src/golang.org/x/mobile/app/app.go:22\n#   0x4069d5    main.main+0x75              /root/go/src/github.com/ginkoob/devmg/local/android/local.go:65\n#   0x436190    runtime.main+0x2b0          /usr/local/gosrc/src/runtime/proc.go:111\n\n0: 0 [0: 0] @ 0x449005 0x6529f5 0x652936 0x64e2c4 0x54932e 0x549540 0x5222aa 0x523b0d 0x52457e 0x521d6e 0x4669c1\n#   0x6529f5    runtime/pprof.writeGoroutineStacks+0x45 /usr/local/gosrc/src/runtime/pprof/pprof.go:514\n#   0x652936    runtime/pprof.writeGoroutine+0x46   /usr/local/gosrc/src/runtime/pprof/pprof.go:505\n#   0x64e2c4    runtime/pprof.(*Profile).WriteTo+0xd4   /usr/local/gosrc/src/runtime/pprof/pprof.go:236\n#   0x54932e    net/http/pprof.handler.ServeHTTP+0x37e  /usr/local/gosrc/src/net/http/pprof/pprof.go:199\n#   0x549540    net/http/pprof.Index+0x200      /usr/local/gosrc/src/net/http/pprof/pprof.go:211\n#   0x5222aa    net/http.HandlerFunc.ServeHTTP+0x3a /usr/local/gosrc/src/net/http/server.go:1422\n#   0x523b0d    net/http.(*ServeMux).ServeHTTP+0x17d    /usr/local/gosrc/src/net/http/server.go:1699\n#   0x52457e    net/http.serverHandler.ServeHTTP+0x19e  /usr/local/gosrc/src/net/http/server.go:1862\n#   0x521d6e    net/http.(*conn).serve+0xbee        /usr/local/gosrc/src/net/http/server.go:1361\n\n\n# runtime.MemStats\n# Alloc = 2701264\n# TotalAlloc = 2701264\n# Sys = 7145720\n# Lookups = 18\n# Mallocs = 19841\n# Frees = 0\n# HeapAlloc = 2701264\n# HeapSys = 3637248\n# HeapIdle = 262144\n# HeapInuse = 3375104\n# HeapReleased = 0\n# HeapObjects = 19841\n# Stack = 557056 / 557056\n# MSpan = 28896 / 32768\n# MCache = 4832 / 16384\n# BuckHashSys = 1443979\n# NextGC = 4194304\n# PauseNs = [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]\n# NumGC = 0\n# EnableGC = true\n# DebugGC = false\n</code></pre>\n\n<p><a href=\"http://localhost:6060/debug/pprof/goroutine?debug=1\" rel=\"noreferrer\">http://localhost:6060/debug/pprof/goroutine?debug=1</a></p>\n\n<pre><code>goroutine profile: total 31\n1 @ 0x652ba8 0x652983 0x64e2c4 0x54932e 0x549540 0x5222aa 0x523b0d 0x52457e 0x521d6e 0x4669c1\n#   0x652ba8    runtime/pprof.writeRuntimeProfile+0xb8  /usr/local/gosrc/src/runtime/pprof/pprof.go:545\n#   0x652983    runtime/pprof.writeGoroutine+0x93   /usr/local/gosrc/src/runtime/pprof/pprof.go:507\n#   0x64e2c4    runtime/pprof.(*Profile).WriteTo+0xd4   /usr/local/gosrc/src/runtime/pprof/pprof.go:236\n#   0x54932e    net/http/pprof.handler.ServeHTTP+0x37e  /usr/local/gosrc/src/net/http/pprof/pprof.go:199\n#   0x549540    net/http/pprof.Index+0x200      /usr/local/gosrc/src/net/http/pprof/pprof.go:211\n#   0x5222aa    net/http.HandlerFunc.ServeHTTP+0x3a /usr/local/gosrc/src/net/http/server.go:1422\n#   0x523b0d    net/http.(*ServeMux).ServeHTTP+0x17d    /usr/local/gosrc/src/net/http/server.go:1699\n#   0x52457e    net/http.serverHandler.ServeHTTP+0x19e  /usr/local/gosrc/src/net/http/server.go:1862\n#   0x521d6e    net/http.(*conn).serve+0xbee        /usr/local/gosrc/src/net/http/server.go:1361\n\n1 @ 0x436573 0x444ce4 0x444242 0x46871a 0x467e71 0x4069d5 0x436190 0x4669c1\n#   0x46871a    golang.org/x/mobile/app.main+0x2ca  /root/go/src/golang.org/x/mobile/app/x11.go:61\n#   0x467e71    golang.org/x/mobile/app.Main+0x21   /root/go/src/golang.org/x/mobile/app/app.go:22\n#   0x4069d5    main.main+0x75              /root/go/src/github.com/nme/devmg/local/android/local.go:65\n#   0x436190    runtime.main+0x2b0          /usr/local/gosrc/src/runtime/proc.go:111\n\n1 @ 0x4669c1\n\n1 @ 0x436573 0x436634 0x436378 0x4669c1\n#   0x436573    runtime.gopark+0x163        /usr/local/gosrc/src/runtime/proc.go:186\n#   0x436634    runtime.goparkunlock+0x54   /usr/local/gosrc/src/runtime/proc.go:191\n#   0x436378    runtime.forcegchelper+0xb8  /usr/local/gosrc/src/runtime/proc.go:152\n\n1 @ 0x436573 0x436634 0x42630d 0x4669c1\n#   0x436573    runtime.gopark+0x163        /usr/local/gosrc/src/runtime/proc.go:186\n#   0x436634    runtime.goparkunlock+0x54   /usr/local/gosrc/src/runtime/proc.go:191\n#   0x42630d    runtime.bgsweep+0x14d       /usr/local/gosrc/src/runtime/mgcsweep.go:67\n\n1 @ 0x436573 0x436634 0x41e04a 0x4669c1\n#   0x436573    runtime.gopark+0x163        /usr/local/gosrc/src/runtime/proc.go:186\n#   0x436634    runtime.goparkunlock+0x54   /usr/local/gosrc/src/runtime/proc.go:191\n#   0x41e04a    runtime.runfinq+0xaa        /usr/local/gosrc/src/runtime/mfinal.go:154\n\n1 @ 0x436573 0x444ce4 0x444242 0x4691e7 0x4669c1\n#   0x4691e7    golang.org/x/mobile/app.pump.func1+0x527    /root/go/src/golang.org/x/mobile/app/app.go:138\n\n1 @ 0x436573 0x436634 0x40d611 0x40ccfb 0x4acb57 0x4669c1\n#   0x4acb57    github.com/golang/glog.(*loggingT).flushDaemon+0x67 /root/go/src/github.com/golang/glog/glog.go:882\n\n1 @ 0x4173be 0x45142e 0x4669c1\n#   0x4173be    runtime.notetsleepg+0x4e    /usr/local/gosrc/src/runtime/lock_futex.go:203\n#   0x45142e    runtime.timerproc+0xde      /usr/local/gosrc/src/runtime/time.go:209\n\n1 @ 0x436573 0x444ce4 0x444242 0x533327 0x4669c1\n#   0x533327    net/http.(*persistConn).readLoop+0xac7  /usr/local/gosrc/src/net/http/transport.go:983\n\n1 @ 0x436573 0x43069e 0x42fb60 0x4cd99a 0x4cda06 0x4d158c 0x4ef94d 0x5254d1 0x524853 0x524716 0x524daf 0x408e1c 0x4669c1\n#   0x42fb60    net.runtime_pollWait+0x60           /usr/local/gosrc/src/runtime/netpoll.go:157\n#   0x4cd99a    net.(*pollDesc).Wait+0x3a           /usr/local/gosrc/src/net/fd_poll_runtime.go:73\n#   0x4cda06    net.(*pollDesc).WaitRead+0x36           /usr/local/gosrc/src/net/fd_poll_runtime.go:78\n#   0x4d158c    net.(*netFD).accept+0x27c           /usr/local/gosrc/src/net/fd_unix.go:408\n#   0x4ef94d    net.(*TCPListener).AcceptTCP+0x4d       /usr/local/gosrc/src/net/tcpsock_posix.go:254\n#   0x5254d1    net/http.tcpKeepAliveListener.Accept+0x41   /usr/local/gosrc/src/net/http/server.go:2138\n#   0x524853    net/http.(*Server).Serve+0xb3           /usr/local/gosrc/src/net/http/server.go:1887\n#   0x524716    net/http.(*Server).ListenAndServe+0x136     /usr/local/gosrc/src/net/http/server.go:1877\n#   0x524daf    net/http.ListenAndServe+0x8f            /usr/local/gosrc/src/net/http/server.go:1967\n#   0x408e1c    main.main.func1+0x3c                /root/go/src/github.com/nme/devmg/local/android/local.go:40\n\n1 @ 0x436573 0x43069e 0x42fb60 0x4cd99a 0x4cda06 0x4cf74a 0x4e3c34 0x5c0c39 0x5c14aa 0x4b0cee 0x4b5b43 0x49e028 0x49a8d0 0x49b173 0x49cf47 0x4669c1\n#   0x42fb60    net.runtime_pollWait+0x60                       /usr/local/gosrc/src/runtime/netpoll.go:157\n#   0x4cd99a    net.(*pollDesc).Wait+0x3a                       /usr/local/gosrc/src/net/fd_poll_runtime.go:73\n#   0x4cda06    net.(*pollDesc).WaitRead+0x36                       /usr/local/gosrc/src/net/fd_poll_runtime.go:78\n#   0x4cf74a    net.(*netFD).Read+0x23a                         /usr/local/gosrc/src/net/fd_unix.go:232\n#   0x4e3c34    net.(*conn).Read+0xe4                           /usr/local/gosrc/src/net/net.go:132\n#   0x5c0c39    bufio.(*Reader).fill+0x1e9                      /usr/local/gosrc/src/bufio/bufio.go:97\n#   0x5c14aa    bufio.(*Reader).ReadByte+0x7a                       /usr/local/gosrc/src/bufio/bufio.go:229\n#   0x4b0cee    golang.org/x/net/websocket.hybiFrameReaderFactory.NewFrameReader+0xbe   /root/go/src/golang.org/x/net/websocket/hybi.go:126\n#   0x4b5b43    golang.org/x/net/websocket.Codec.Receive+0x183              /root/go/src/golang.org/x/net/websocket/websocket.go:315\n#   0x49e028    golang.org/x/net/websocket.(Codec).Receive-fm+0x58          /root/go/src/github.com/nme/socks/ws.go:420\n#   0x49a8d0    github.com/nme/socks.(*WSConn).execute+0x210            /root/go/src/github.com/nme/socks/ws.go:389\n#   0x49b173    github.com/nme/socks.(*WSConn).receiveMessage+0x203         /root/go/src/github.com/nme/socks/ws.go:420\n#   0x49cf47    github.com/nme/socks.(*WSConn).Setup.func3+0x117            /root/go/src/github.com/nme/socks/ws.go:221\n\n1 @ 0x436573 0x436634 0x40d611 0x40ccfb 0x4080af 0x406fd8 0x4092e7 0x46937f 0x4669c1\n#   0x4080af    main.startSocks+0x3bf           /root/go/src/github.com/nme/devmg/local/android/local.go:151\n#   0x406fd8    main.startClient+0x5d8          /root/go/src/github.com/nme/devmg/local/android/local.go:82\n#   0x4092e7    main.main.func2+0x227           /root/go/src/github.com/nme/devmg/local/android/local.go:64\n#   0x46937f    golang.org/x/mobile/app.main.func1+0x6f /root/go/src/golang.org/x/mobile/app/x11.go:51\n\n1 @ 0x436573 0x444ce4 0x444242 0x533c4c 0x4669c1\n#   0x533c4c    net/http.(*persistConn).writeLoop+0x40c /usr/local/gosrc/src/net/http/transport.go:1016\n\n1 @ 0x436573 0x436634 0x40d182 0x40ccfb 0x408f63 0x4669c1\n#   0x408f63    main.main.func2.1+0x73  /root/go/src/github.com/nme/devmg/local/android/local.go:47\n\n1 @ 0x436573 0x444ce4 0x444242 0x49dcee 0x4669c1\n#   0x49dcee    github.com/nme/socks.(*WSConn).Setup.func4+0x86e    /root/go/src/github.com/nme/socks/ws.go:256\n\n1 @ 0x436573 0x444ce4 0x444242 0x49c7a5 0x4669c1\n#   0x49c7a5    github.com/nme/socks.SetKeepAlive.func1+0x215   /root/go/src/github.com/nme/socks/ws.go:32\n\n1 @ 0x436573 0x436634 0x40d611 0x40ccfb 0x4072c6 0x4669c1\n#   0x4072c6    main.WaitCmd+0xc6   /root/go/src/github.com/nme/devmg/local/android/local.go:95\n\n1 @ 0x436573 0x444ce4 0x444242 0x4998aa 0x4669c1\n#   0x4998aa    github.com/nme/socks.(*Router).ListenAndServe+0x91a /root/go/src/github.com/nme/socks/ws.go:124\n\n1 @ 0x436573 0x444ce4 0x444242 0x49a173 0x4669c1\n#   0x49a173    github.com/nme/socks.(*WSConn).Setup+0x753  /root/go/src/github.com/nme/socks/ws.go:186\n\n1 @ 0x436573 0x436634 0x40d611 0x40ccfb 0x49b3ea 0x4669c1\n#   0x49b3ea    github.com/nme/socks.(*Nic).Dial.func1+0x9a /root/go/src/github.com/nme/socks/conn.go:34\n\n3 @ 0x436573 0x444ce4 0x444242 0x49cd50 0x4669c1\n#   0x49cd50    github.com/nme/socks.(*Router).ListenAndServe.func1+0x590   /root/go/src/github.com/nme/socks/ws.go:96\n\n1 @ 0x436573 0x43069e 0x42fb60 0x4cd99a 0x4cda06 0x4cf74a 0x4e3c34 0x51a734 0x581f7d 0x5c0c39 0x5c1aaa 0x5c1b23 0x6285f1 0x628360 0x515496 0x51d83f 0x5218a7 0x4669c1\n#   0x42fb60    net.runtime_pollWait+0x60           /usr/local/gosrc/src/runtime/netpoll.go:157\n#   0x4cd99a    net.(*pollDesc).Wait+0x3a           /usr/local/gosrc/src/net/fd_poll_runtime.go:73\n#   0x4cda06    net.(*pollDesc).WaitRead+0x36           /usr/local/gosrc/src/net/fd_poll_runtime.go:78\n#   0x4cf74a    net.(*netFD).Read+0x23a             /usr/local/gosrc/src/net/fd_unix.go:232\n#   0x4e3c34    net.(*conn).Read+0xe4               /usr/local/gosrc/src/net/net.go:132\n#   0x51a734    net/http.(*liveSwitchReader).Read+0xa4      /usr/local/gosrc/src/net/http/server.go:219\n#   0x581f7d    io.(*LimitedReader).Read+0xbd           /usr/local/gosrc/src/io/io.go:427\n#   0x5c0c39    bufio.(*Reader).fill+0x1e9          /usr/local/gosrc/src/bufio/bufio.go:97\n#   0x5c1aaa    bufio.(*Reader).ReadSlice+0x21a         /usr/local/gosrc/src/bufio/bufio.go:328\n#   0x5c1b23    bufio.(*Reader).ReadLine+0x53           /usr/local/gosrc/src/bufio/bufio.go:357\n#   0x6285f1    net/textproto.(*Reader).readLineSlice+0x81  /usr/local/gosrc/src/net/textproto/reader.go:55\n#   0x628360    net/textproto.(*Reader).ReadLine+0x40       /usr/local/gosrc/src/net/textproto/reader.go:36\n#   0x515496    net/http.ReadRequest+0xb6           /usr/local/gosrc/src/net/http/request.go:653\n#   0x51d83f    net/http.(*conn).readRequest+0x32f      /usr/local/gosrc/src/net/http/server.go:633\n#   0x5218a7    net/http.(*conn).serve+0x727            /usr/local/gosrc/src/net/http/server.go:1319\n\n1 @ 0x436573 0x43069e 0x42fb60 0x4cd99a 0x4cda06 0x4cf74a 0x4e3c34 0x51a734 0x581f7d 0x5c0c39 0x5c0e5c 0x51d7cb 0x5218a7 0x4669c1\n#   0x42fb60    net.runtime_pollWait+0x60       /usr/local/gosrc/src/runtime/netpoll.go:157\n#   0x4cd99a    net.(*pollDesc).Wait+0x3a       /usr/local/gosrc/src/net/fd_poll_runtime.go:73\n#   0x4cda06    net.(*pollDesc).WaitRead+0x36       /usr/local/gosrc/src/net/fd_poll_runtime.go:78\n#   0x4cf74a    net.(*netFD).Read+0x23a         /usr/local/gosrc/src/net/fd_unix.go:232\n#   0x4e3c34    net.(*conn).Read+0xe4           /usr/local/gosrc/src/net/net.go:132\n#   0x51a734    net/http.(*liveSwitchReader).Read+0xa4  /usr/local/gosrc/src/net/http/server.go:219\n#   0x581f7d    io.(*LimitedReader).Read+0xbd       /usr/local/gosrc/src/io/io.go:427\n#   0x5c0c39    bufio.(*Reader).fill+0x1e9      /usr/local/gosrc/src/bufio/bufio.go:97\n#   0x5c0e5c    bufio.(*Reader).Peek+0xcc       /usr/local/gosrc/src/bufio/bufio.go:132\n#   0x51d7cb    net/http.(*conn).readRequest+0x2bb  /usr/local/gosrc/src/net/http/server.go:629\n#   0x5218a7    net/http.(*conn).serve+0x727        /usr/local/gosrc/src/net/http/server.go:1319\n\n1 @ 0x436573 0x436634 0x42051b 0x4669c1\n#   0x436573    runtime.gopark+0x163        /usr/local/gosrc/src/runtime/proc.go:186\n#   0x436634    runtime.goparkunlock+0x54   /usr/local/gosrc/src/runtime/proc.go:191\n#   0x42051b    runtime.backgroundgc+0x8b   /usr/local/gosrc/src/runtime/mgc.go:894\n\n4 @ 0x436573 0x421717 0x4669c1\n#   0x436573    runtime.gopark+0x163        /usr/local/gosrc/src/runtime/proc.go:186\n#   0x421717    runtime.gcBgMarkWorker+0xf7 /usr/local/gosrc/src/runtime/mgc.go:1283\n</code></pre>\n\n<p>4584 is the PID of the application.\ncat /proc/4584/status </p>\n\n<pre><code>Name:   android\nState:  S (sleeping)\nTgid:   4584\nNgid:   0\nPid:    4584\nPPid:   2776\nTracerPid:  0\nUid:    0   0   0   0\nGid:    0   0   0   0\nFDSize: 256\nGroups: 0 \nNStgid: 4584\nNSpid:  4584\nNSpgid: 4584\nNSsid:  2776\nVmPeak:   631316 kB\nVmSize:   573976 kB\nVmLck:         0 kB\nVmPin:         0 kB\nVmHWM:     30060 kB\nVmRSS:     29344 kB\nVmData:   487492 kB\nVmStk:       136 kB\nVmExe:      6704 kB\nVmLib:     13404 kB\nVmPTE:       288 kB\nVmPMD:        20 kB\nVmSwap:        0 kB\nThreads:    10\nSigQ:   3/62942\nSigPnd: 0000000000000000\nShdPnd: 0000000000000000\nSigBlk: 0000000000000000\nSigIgn: 0000000000000000\nSigCgt: ffffffffffc1feff\nCapInh: 0000000000000000\nCapPrm: 0000003fffffffff\nCapEff: 0000003fffffffff\nCapBnd: 0000003fffffffff\nSeccomp:    0\nCpus_allowed:   f\nCpus_allowed_list:  0-3\nMems_allowed:   00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000001\nMems_allowed_list:  0\nvoluntary_ctxt_switches:    531158\nnonvoluntary_ctxt_switches: 13254\n</code></pre>\n"}, {"tags": ["javascript", "html", "go"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 2, "creation_date": 1439906402, "post_id": 32074087, "comment_id": 52045489, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/10381296/best-way-to-get-child-nodes\">best way to get child nodes</a>"}], "answers": [{"comments": [{"owner": {"reputation": 521, "user_id": 5142896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a6bbe0b8d0b678f1fb3b95493d42e8?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/5142896/conor"}, "edited": false, "score": 0, "creation_date": 1439907616, "post_id": 32074680, "comment_id": 52046475, "body": "A good approach but unfortunately I will not know the content of the list or size, which makes this solution limited."}], "tags": [], "owner": {"reputation": 11133, "user_id": 4275347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CdbsN.jpg?s=128&g=1", "display_name": "Michael Laszlo", "link": "https://stackoverflow.com/users/4275347/michael-laszlo"}, "is_accepted": false, "score": 0, "last_activity_date": 1439906690, "creation_date": 1439906690, "answer_id": 32074680, "question_id": 32074087, "link": "https://stackoverflow.com/questions/32074087/access-child-elements-generated-by-a-template/32074680#32074680", "title": "Access child elements generated by a template", "body": "<p>After retrieving the list element with <code>document.getElementById('myList')</code> and assigning it to <code>list</code>, you can retrieve its children with <code>list.getElementById(n)</code> where <code>n</code> is the <code>id</code>. (Or you could continue to use <code>document.getElementById</code> if the element IDs are unique in the document, as they are supposed to be.)</p>\n\n<p>Demonstration:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function print(s) {\r\n  document.write(s + '&lt;br /&gt;');\r\n}\r\n\r\nvar list = document.getElementById('myList');\r\nfor (var i = 1; i &lt;= 3; ++i) {\r\n  var child = list.getElementById(i);\r\n  print(child.innerHTML);\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"myList\"&gt;\r\n  &lt;div id=\"1\"&gt; one &lt;/div&gt;\r\n  &lt;div id=\"2\"&gt; two &lt;/div&gt;\r\n  &lt;div id=\"3\"&gt; three &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 521, "user_id": 5142896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a6bbe0b8d0b678f1fb3b95493d42e8?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/5142896/conor"}, "edited": false, "score": 1, "creation_date": 1439907651, "post_id": 32074780, "comment_id": 52046507, "body": "I forgot about getElementsByTagName, I&#39;m sure this will work just great!"}], "tags": [], "owner": {"reputation": 51168, "user_id": 1790982, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N1ywU.png?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/1790982/pete"}, "is_accepted": true, "score": 0, "last_activity_date": 1439906932, "creation_date": 1439906932, "answer_id": 32074780, "question_id": 32074087, "link": "https://stackoverflow.com/questions/32074087/access-child-elements-generated-by-a-template/32074780#32074780", "title": "Access child elements generated by a template", "body": "<p>You could use <code>getElementsByTagName</code>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var listElement = document.getElementById(\"myList\");\r\nvar listElements = listElement.getElementsByTagName('div'); // could also use listElement.children;\r\n\r\nfor (i = 0; i &lt; listElements.length; i++) {\r\n  alert(listElements[i].id);\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"myList\"&gt;\r\n  &lt;div id=\"1\"&gt;&lt;/div&gt;\r\n  &lt;div id=\"2\"&gt;&lt;/div&gt;\r\n  &lt;div id=\"3\"&gt;&lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Or just <code>children</code>:</p>\n\n<pre><code>var listElements = listElement.children;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3071, "user_id": 2979435, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c3fac4fcf2b4ae7f3f5a96164b34958e?s=128&d=identicon&r=PG", "display_name": "deFreitas", "link": "https://stackoverflow.com/users/2979435/defreitas"}, "is_accepted": false, "score": 0, "last_activity_date": 1439907121, "creation_date": 1439907121, "answer_id": 32074872, "question_id": 32074087, "link": "https://stackoverflow.com/questions/32074087/access-child-elements-generated-by-a-template/32074872#32074872", "title": "Access child elements generated by a template", "body": "<p>You can try it with <a href=\"http://www.w3schools.com/jsref/met_element_queryselectorall.asp\" rel=\"nofollow\">document.querySelector</a>, works fine with <code>all browsers</code> and <code>ie 9</code></p>\n\n<p><a href=\"http://jsfiddle.net/deFreitas/2fejd5ff/\" rel=\"nofollow\">See a demo on jsfiddle</a></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var listItems = document.querySelectorAll(\"#myList .list-item\");\r\n  for(var i=0; i &lt; listItems.length; i++){\r\n    console.info(listItems[i].id);\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"myList\"&gt;\r\n  &lt;div class=\"list-item\" id=\"1\" &gt;item 1&lt;/div&gt;\r\n  &lt;div class=\"list-item\" id=\"2\" &gt;item 2&lt;/div&gt;\r\n  &lt;div class=\"list-item\" id=\"3\" &gt;item 3&lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 521, "user_id": 5142896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a6bbe0b8d0b678f1fb3b95493d42e8?s=128&d=identicon&r=PG&f=1", "display_name": "Conor", "link": "https://stackoverflow.com/users/5142896/conor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 32074780, "answer_count": 3, "score": 1, "last_activity_date": 1439907121, "creation_date": 1439905196, "last_edit_date": 1439906883, "question_id": 32074087, "link": "https://stackoverflow.com/questions/32074087/access-child-elements-generated-by-a-template", "title": "Access child elements generated by a template", "body": "<p>In my application I'm generating HTML with a Go template. I pass a list to a template that resembles this:</p>\n\n<pre><code>&lt;div id=\"myList\"&gt;\n {{ Loop }}\n   &lt;div id=\"{{.loopIndex}}\"&gt;\n {{ End loop }}\n&lt;/div&gt;\n</code></pre>\n\n<p>I now want to access the individual children in JavaScript according to ID. These are not 'elements', so I can't use the HTML DOM getAttribute() method, or access element.id.</p>\n\n<p>I want to do something like this:</p>\n\n<pre><code>  var listElement = document.getElementById(\"myList\");\n  var listElements = listElement.childNodes;\n\n  for (i=0; i &lt; listElements.length; i++) {\n     alert(listElements[i].id);\n  }\n</code></pre>\n\n<p>How would I do this? Is there any way to convert the objects in my list to DOM Elements? The example I gave is a lot simpler than my actual code, but it would follow the same approach, I imagine.</p>\n"}, {"tags": ["go", "interface", "slice"], "answers": [{"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 2, "last_activity_date": 1483004528, "last_edit_date": 1483004528, "creation_date": 1439907063, "answer_id": 32074838, "question_id": 32073755, "link": "https://stackoverflow.com/questions/32073755/use-a-function-with-a-scalar-or-slice/32074838#32074838", "title": "Use a function with a scalar or slice", "body": "<h3>Your approach, corrected</h3>\n\n<p>The problem in your case is if you pass a slice to your <code>T_conv()</code> function, inside <code>T_conv()</code> it will be the first element of the <code>T</code> slice parameter. The passed slice will not be identical to <code>T</code>. So if you want to make it work, then you have to use <a href=\"https://golang.org/ref/spec#Type_assertions\" rel=\"nofollow noreferrer\">Type assertion</a> to obtain the <code>[]float64</code> from <code>T[0]</code>, and iterate over that.</p>\n\n<p>Something like this: <a href=\"http://play.golang.org/p/7nFb5tGtE0\" rel=\"nofollow noreferrer\">Go Playground</a></p>\n\n<pre><code>func T_conv(T ...interface{}) []interface{} {\n    if len(T) == 0 {\n        return []interface{}{}\n    }\n\n    if f, ok := T[0].(float64); ok {\n        return []interface{}{f * 1.00024}\n    } else if fs, ok := T[0].([]float64); ok {\n        var r []interface{} = make([]interface{}, len(fs))\n        for i, v := range fs {\n            r[i] = v * 1.00024\n        }\n        return r\n    }\n\n    return nil\n}\n</code></pre>\n\n<p>But I recommend the following solution.</p>\n\n<h3>Recommended approach</h3>\n\n<p>Your input problem is a perfect use-case for a function with variadic parameters:</p>\n\n<pre><code>func Conv(in ...float64) []float64 {\n    out := make([]float64, len(in))\n    for i, v := range in {\n        out[i] = v * 1.00024\n    }\n    return out\n}\n</code></pre>\n\n<p><strong>Using it:</strong></p>\n\n<p>Note that you have to use <code>...</code> when passing a slice to it. Read more: <a href=\"https://golang.org/ref/spec#Passing_arguments_to_..._parameters\" rel=\"nofollow noreferrer\">Passing arguments to ... parameters</a>. You can even invoke it by enumerating the float numbers (without wrapping them in a slice).</p>\n\n<pre><code>v := Conv(1.0)\nfmt.Printf(\"Result: %v, type: %T\\n\", v, v)\n\nv = Conv([]float64{20.0, 21.0}...)\nfmt.Printf(\"Result: %v, type: %T\\n\", v, v)\n\nv = Conv(20.0, 21.0)\nfmt.Printf(\"Result: %v, type: %T\\n\", v, v)\n</code></pre>\n\n<p>Output (try it on the <a href=\"http://play.golang.org/p/KHEpdM5dGe\" rel=\"nofollow noreferrer\">Go Playground</a>):</p>\n\n<pre><code>Result: [1.00024], type: []float64\nResult: [20.0048 21.00504], type: []float64\nResult: [20.0048 21.00504], type: []float64\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5181506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tERfq.png?s=128&g=1", "display_name": "Jacques Grelet", "link": "https://stackoverflow.com/users/5181506/jacques-grelet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483004528, "creation_date": 1439904363, "last_edit_date": 1439905273, "question_id": 32073755, "link": "https://stackoverflow.com/questions/32073755/use-a-function-with-a-scalar-or-slice", "title": "Use a function with a scalar or slice", "body": "<p>I would like use the function T_conv with a float or a slice of float. \nThis example works with float as argument of T_conv:</p>\n\n<pre><code>func T_conv(T ...interface{}) []interface{} {\n    var r []interface{} = make([]interface{}, len(T))\n    for i, v := range T {\n        fmt.Printf(\"Ind: %d Result: %v, type: %T\\n\", i, v, v)\n        r[i] = v.(float64) * 1.00024\n    }\n    return r\n}\n\nfunc main() {\n    v := T_conv(20.0)\n    fmt.Printf(\"Result: %v, type: %T\\n\", v, v)\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/YhdFoXyY_e\" rel=\"nofollow\">http://play.golang.org/p/YhdFoXyY_e</a></p>\n\n<p>but fail at runtime with a slice as argument:</p>\n\n<pre><code>func main() {\n    v := T_conv([]float64{20.0, 21.0})\n    fmt.Printf(\"Result: %v, type: %T\\n\", v, v)\n}\n</code></pre>\n\n<p>result:<br>\nInd: 0 Result: [20 21], type: []float64<br>\npanic: interface conversion: interface is []float64, not float64</p>\n\n<p><a href=\"http://play.golang.org/p/3DP96EamxW\" rel=\"nofollow\">http://play.golang.org/p/3DP96EamxW</a></p>\n"}, {"tags": ["xml", "dictionary", "struct", "go"], "comments": [{"owner": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "edited": false, "score": 0, "creation_date": 1439904503, "post_id": 32073642, "comment_id": 52043997, "body": "Can you provide your data structures?"}, {"owner": {"reputation": 2040, "user_id": 441739, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76000397999476e51ba926813ddde09c?s=128&d=identicon&r=PG", "display_name": "Jon L.", "link": "https://stackoverflow.com/users/441739/jon-l"}, "reply_to_user": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "edited": false, "score": 0, "creation_date": 1439904628, "post_id": 32073642, "comment_id": 52044086, "body": "@RoninDev, they&#39;re pretty large, so I&#39;ll provide snippets of each"}, {"owner": {"reputation": 2040, "user_id": 441739, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76000397999476e51ba926813ddde09c?s=128&d=identicon&r=PG", "display_name": "Jon L.", "link": "https://stackoverflow.com/users/441739/jon-l"}, "reply_to_user": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "edited": false, "score": 0, "creation_date": 1439905733, "post_id": 32073642, "comment_id": 52044938, "body": "@RoninDev, updated w/ basic sample XML. I can&#39;t include the Go structs themselves as they were generated programmatically, so running them down would take more time than I really have available right now."}, {"owner": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "edited": false, "score": 1, "creation_date": 1439906631, "post_id": 32073642, "comment_id": 52045699, "body": "Have you tried <code>xslt</code> instead golang solution? Maybe it will fit better"}, {"owner": {"reputation": 2040, "user_id": 441739, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76000397999476e51ba926813ddde09c?s=128&d=identicon&r=PG", "display_name": "Jon L.", "link": "https://stackoverflow.com/users/441739/jon-l"}, "reply_to_user": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "edited": false, "score": 0, "creation_date": 1439907671, "post_id": 32073642, "comment_id": 52046525, "body": "@RoninDev, there&#39;s programmatic transformation that has to occur as well, such as RSA decryption of several values, generated unique strings, etc. Due to those wrinkles, I didn&#39;t go w/ XSLT. It would&#39;ve been a great fit for straight-up mapping/transformation though, I agree"}, {"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 1, "creation_date": 1439912350, "post_id": 32073642, "comment_id": 52050044, "body": "The most important thing is the two structs need to have the same structure to map. Else, I&#39;m thinking interface{} is the key. This is a <a href=\"https://medium.com/code-zen/dynamically-creating-instances-from-key-value-pair-map-and-json-in-go-feef83ab9db2\" rel=\"nofollow noreferrer\">blog post</a> that might give some idea."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 1, "creation_date": 1439921066, "post_id": 32073642, "comment_id": 52055298, "body": "Sounds like what you&#39;re doing is reasonable. You could separate out creating some subobjects into distinct functions. Also worth knowing, if you don&#39;t, that compound literals can be nested and can create struct pointers not just structs: <a href=\"http://play.golang.org/p/y7WZ2iX4Pc\" rel=\"nofollow noreferrer\">play.golang.org/p/y7WZ2iX4Pc</a>"}], "owner": {"reputation": 2040, "user_id": 441739, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76000397999476e51ba926813ddde09c?s=128&d=identicon&r=PG", "display_name": "Jon L.", "link": "https://stackoverflow.com/users/441739/jon-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 563, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439906215, "creation_date": 1439904021, "last_edit_date": 1439906215, "question_id": 32073642, "link": "https://stackoverflow.com/questions/32073642/golang-map-data-from-one-complex-struct-to-another", "title": "Golang - map data from one complex struct to another", "body": "<p>I'm using Go structs to represent two structurally different XML documents.\nOne XML document is the source of the data being processed, and the other XML document is the target that the source should map into.</p>\n\n<p>I have both XML documents mapped out in Go structs already, and both know how to marshal/unmarshal an XML structure.</p>\n\n<p>So currently I'm typing out each path in each struct, to map fields from the source, into fields in the target.</p>\n\n<p>Is there a quicker way to perhaps initialize a new Target instance, using some sort of shorthand to ease the mapping of data? Keeping in mind these are complex nested structures, so a pattern I can follow \"to the depths\" would be excellent.</p>\n\n<p>EDIT: Adding sample XML data structures</p>\n\n<p>The Go structs that represent these XML structures are pretty much a one-to-one representation of the XML structure, where each level of nesting is a new struct type. The structs were generated programmatically and are quite spread out, so it would take excessive effort to represent the data structures here (I'm short on time).</p>\n\n<p>SOURCE data file - reaches up to 8 nested elements deep. There can be multiple  elements, each of which will generate a new separate \"TARGET\" instance.</p>\n\n<pre><code>&lt;orders&gt;\n  &lt;order order=no=\"111222333\"&gt;\n    &lt;customer&gt;\n      &lt;customer-no&gt;555444333&lt;/customer-no&gt;\n      &lt;customer-email&gt;test@test.com&lt;/customer-email&gt;\n      &lt;billing-address&gt;\n        &lt;first-name&gt;Test&lt;/first-name&gt;\n        &lt;last-name&gt;User&lt;/last-name&gt;\n      &lt;/billing-address&gt;\n    &lt;/customer&gt;\n    &lt;product-lineitems&gt;\n      &lt;product-lineitem&gt;\n        &lt;product-id&gt;SomeProductSku&lt;/product-id&gt;\n        &lt;product-name&gt;SomeProductName&lt;/product-name&gt;\n        &lt;base-price&gt;40.00&lt;/base-price&gt;\n        &lt;quantity&gt;1&lt;/quantity&gt;\n      &lt;/product-lineitem&gt;\n    &lt;/product-lineitems&gt;\n  &lt;/order&gt;\n&lt;/orders&gt;\n</code></pre>\n\n<p>TARGET data file - reaches up to 10 nested elements deep</p>\n\n<pre><code>&lt;OrderCreateRequest orderType=\"SALES\" requestId=\"bcHcsiaagLwM6aaadnXz7ifXZL\"&gt;\n    &lt;Order customerOrderId=\"111222333\" levelOfService=\"REGULAR\"&gt;\n        &lt;Customer customerId=\"555444333\"&gt;\n            &lt;Name&gt;\n                &lt;LastName&gt;User&lt;/LastName&gt;\n                &lt;FirstName&gt;Test&lt;/FirstName&gt;\n            &lt;/Name&gt;\n            &lt;EmailAddress&gt;test@test.com&lt;/EmailAddress&gt;\n        &lt;/Customer&gt;\n        &lt;OrderItems&gt;\n            &lt;OrderItem id=\"item_0_1\" webLineId=\"1\"&gt;\n                &lt;ItemId&gt;SomeProductSku&lt;/ItemId&gt;\n                &lt;Quantity&gt;1&lt;/Quantity&gt;\n                &lt;Description&gt;\n                    &lt;Description&gt;SomeProductName&lt;/Description&gt;\n                &lt;/Description&gt;\n                &lt;Pricing&gt;\n                    &lt;Merchandise&gt;\n                        &lt;UnitPrice&gt;40.00&lt;/UnitPrice&gt;\n                    &lt;/Merchandise&gt;\n                &lt;/Pricing&gt;\n            &lt;/OrderItem&gt;\n        &lt;/OrderItems&gt;\n    &lt;/Order&gt;\n&lt;/OrderCreateRequest&gt;\n</code></pre>\n\n<p>EDIT 2: I'm also trying to solve for type mappings not matching up. Currently I'm casting each value type as I assign it, which makes me thing I'm really going about this the wrong way.\nThe XML&lt;->struct representations are already built, so if it's just a matter of me needing to somehow initialize the Target struct using something like map[string]{interface{}} or whatever, let me know. Been quite awhile since I last looked at Go, so I'm certain I'm missing some better solution here</p>\n"}, {"tags": ["time", "go"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439909494, "post_id": 32066978, "comment_id": 52047911, "body": "BTW, you probably want to use 15 for HH to get a 24 hour clock (3PM=15)."}], "answers": [{"tags": [], "owner": {"reputation": 6265, "user_id": 3387925, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mtLre.jpg?s=128&g=1", "display_name": "Mayank Patel", "link": "https://stackoverflow.com/users/3387925/mayank-patel"}, "is_accepted": true, "score": 4, "last_activity_date": 1439888008, "last_edit_date": 1439888008, "creation_date": 1439885506, "answer_id": 32067013, "question_id": 32066978, "link": "https://stackoverflow.com/questions/32066978/go-best-way-to-get-time-in-format-of-yyyymmwddhhmmss/32067013#32067013", "title": "Go: Best way to get time in format of YYYYMMWDDHHMMSS", "body": "<pre><code>package main\n\nimport \"fmt\"\nimport \"strconv\"\nimport \"time\"\n\nfunc main() {\n    fmt.Println(\"Hello, playground\")\n    t := time.Now()\n    time := t.Format(\"20060102030405\")\n    time = time[:6] + strconv.Itoa(int(t.Weekday())) + time[6:]\n    fmt.Println(time)\n}\n</code></pre>\n\n<p>Try it on the <kbd><a href=\"https://play.golang.org/p/d_5Zv0CyFI\" rel=\"nofollow\">Go playground</a></kbd></p>\n"}], "owner": {"reputation": 107, "user_id": 5141019, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fc929e8e8da518d6cf4ce1a946fdf043?s=128&d=identicon&r=PG&f=1", "display_name": "Priyaranjan", "link": "https://stackoverflow.com/users/5141019/priyaranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 32067013, "answer_count": 1, "score": 3, "last_activity_date": 1439888008, "creation_date": 1439885385, "question_id": 32066978, "link": "https://stackoverflow.com/questions/32066978/go-best-way-to-get-time-in-format-of-yyyymmwddhhmmss", "title": "Go: Best way to get time in format of YYYYMMWDDHHMMSS", "body": "<p>I have a PHP API that takes time in format of YYYYMMWDDHHMMSS. Here W is weekday(Sunday=0, Monday = 1 ...). I am trying to generate the it like following:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"time\"\n\nfunc main() {\n    fmt.Println(\"Hello, playground\")\n    t := time.Now()\n    time := t.Format(\"20060102030405\")\n    fmt.Println(time)\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/Tdamoxi3bE\" rel=\"nofollow\">http://play.golang.org/p/Tdamoxi3bE</a></p>\n\n<p>But it does not have weekday in it and i couldn't find any format to get from time.Format.\nIs there any way to get the desired result from time.Format() or any other go \napi.</p>\n"}, {"tags": ["http", "go", "httprequest"], "answers": [{"tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 1, "last_activity_date": 1439881613, "creation_date": 1439881613, "answer_id": 32065770, "question_id": 32065280, "link": "https://stackoverflow.com/questions/32065280/use-of-close-in-http-request/32065770#32065770", "title": "Use of Close in http Request", "body": "<p>The http.Request type is not safe for concurrent use anyway</p>\n\n<p>Setting Request.Close to true or false does not interfere with concurrent requests as your code has undefined behaviour anyway if you use a Request concurrently.</p>\n"}], "owner": {"reputation": 21, "user_id": 4558381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c98ab15015f8f59d15ba67f768b279c?s=128&d=identicon&r=PG&f=1", "display_name": "Dev Dev", "link": "https://stackoverflow.com/users/4558381/dev-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439881613, "creation_date": 1439880053, "question_id": 32065280, "link": "https://stackoverflow.com/questions/32065280/use-of-close-in-http-request", "title": "Use of Close in http Request", "body": "<p>what is concurrent relation of Close boolean field in http.Request{} \nWhat is the impact of setting it to true or false ? Will it hamper concurrent requests ?</p>\n"}, {"tags": ["mysql", "time", "go"], "answers": [{"tags": [], "owner": {"reputation": 771, "user_id": 4515252, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--02zX_AQuqM/AAAAAAAAAAI/AAAAAAAAK64/PpH7Pn2gzSg/photo.jpg?sz=128", "display_name": "Adam Vincze", "link": "https://stackoverflow.com/users/4515252/adam-vincze"}, "is_accepted": true, "score": 1, "last_activity_date": 1439873966, "creation_date": 1439873966, "answer_id": 32063841, "question_id": 32062947, "link": "https://stackoverflow.com/questions/32062947/golang-action-on-specific-days-of-the-week-ie-every-friday/32063841#32063841", "title": "golang action on specific days of the week (ie. every Friday)", "body": "<p>this might work for you: <a href=\"http://play.golang.org/p/UGnV8kPrA3\" rel=\"nofollow\">http://play.golang.org/p/UGnV8kPrA3</a></p>\n\n<p>as you are dealing with instances in time, the end date is semantically the date before the time instance <code>2015-10-14T00:00:00</code> + 1 day</p>\n"}], "owner": {"reputation": 23, "user_id": 3034917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a563785753715b58fe64342c6d3ad7e7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark-Green", "link": "https://stackoverflow.com/users/3034917/dark-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "accepted_answer_id": 32063841, "answer_count": 1, "score": -1, "last_activity_date": 1439873966, "creation_date": 1439867749, "question_id": 32062947, "link": "https://stackoverflow.com/questions/32062947/golang-action-on-specific-days-of-the-week-ie-every-friday", "title": "golang action on specific days of the week (ie. every Friday)", "body": "<p>I need to get a specific day of the week inbetween a period such as for every sunday between 2015-08-17 to 2015-10-14 so I've end up with this.</p>\n\n<pre><code>    onDate, err := time.Parse(dateFormat, startDate)\n    if err != nil {\n        logr.Println(err)\n    }\n\n    offDate, err := time.Parse(dateFormat, stopDate)\n    if err != nil {\n        logr.Println(err)\n    }\n\n    weekday := onDate.Weekday()\n\n    getDay := int(weekday)\n\n    a := onDate.YearDay()\n    b := offDate.YearDay()\n\n    var date string\n    var z time.Time\n\n// Sundaytime1 is entered in the browser and will always be the same\n    if sundayTime1 != \"\" &amp;&amp; getDay == 0 {\n        for a &lt;= b {\n            z := onDate.AddDate(0, 0, 7)\n            date := time.Parse(dateFormat, z)\n\n            fmt.Println(onDate)\n            _, err = que.Exec(studyID, msgid, date, sundayTime1, 0, 0)\n            if err != nil {\n                fmt.Println(err)\n            }\n            fmt.Println(\"I'm a Sunday!\")\n            a = a + 7\n\n        }\n    }\n</code></pre>\n\n<p>This does increment the day by on but it only does it once so it returns <code>2015-08-23 00:00:00 +0000 UTC</code> repeatedly. and i can't seem to get it to only return <code>2015-08-23</code> but it does only perform a database entry for every Sunday between the time. but its the wrong date and it shouldn't include the time. The downside being i have one of these for every possible starting day of the week. Is there a better way to handle this and how i only get <code>2015-08-23</code> without the time.</p>\n"}, {"tags": ["postgresql", "go", "generate-series"], "comments": [{"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1439867089, "post_id": 32062568, "comment_id": 52023981, "body": "What are the types of max_id and min_id?"}, {"owner": {"reputation": 401, "user_id": 3050598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yxA9u.png?s=128&g=1", "display_name": "ekiyanov", "link": "https://stackoverflow.com/users/3050598/ekiyanov"}, "reply_to_user": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1439867511, "post_id": 32062568, "comment_id": 52024085, "body": "they are integers and they are valid"}, {"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1439867777, "post_id": 32062568, "comment_id": 52024148, "body": "there are many integer types in Go: int, uint, int64, etc. My wild guess is that postgresql driver doesn&#39;t support all of them. Try using int64."}, {"owner": {"reputation": 401, "user_id": 3050598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yxA9u.png?s=128&g=1", "display_name": "ekiyanov", "link": "https://stackoverflow.com/users/3050598/ekiyanov"}, "reply_to_user": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1439870290, "post_id": 32062568, "comment_id": 52024714, "body": "didn&#39;t help. I&#39;ll update initial post with a more code"}], "answers": [{"comments": [{"owner": {"reputation": 1628, "user_id": 1110949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e14f7f3562334dd045b4208055c231?s=128&d=identicon&r=PG", "display_name": "steevee", "link": "https://stackoverflow.com/users/1110949/steevee"}, "reply_to_user": {"reputation": 401, "user_id": 3050598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yxA9u.png?s=128&g=1", "display_name": "ekiyanov", "link": "https://stackoverflow.com/users/3050598/ekiyanov"}, "edited": false, "score": 0, "creation_date": 1440003808, "post_id": 32072586, "comment_id": 52097404, "body": "@ekiyanov no problem!"}], "tags": [], "owner": {"reputation": 1628, "user_id": 1110949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e14f7f3562334dd045b4208055c231?s=128&d=identicon&r=PG", "display_name": "steevee", "link": "https://stackoverflow.com/users/1110949/steevee"}, "is_accepted": true, "score": 8, "last_activity_date": 1439902723, "last_edit_date": 1439902723, "creation_date": 1439901249, "answer_id": 32072586, "question_id": 32062568, "link": "https://stackoverflow.com/questions/32062568/placeholders-in-the-postgres-query-for-generate-series-returns-unknown/32072586#32072586", "title": "Placeholders in the Postgres query for generate_series returns unknown", "body": "<p>Try breaking your query apart. You'll see the first part works fine:</p>\n\n<pre><code>db.QueryRow(\"SELECT $1+trunc(random()*$2) as test\", 10, 5)\n</code></pre>\n\n<p>This probably works because <code>$1</code> and <code>$2</code> are used with mathematical operators (and/or because <code>trunc()</code> and <code>random()</code> both return numbers), so postgres can infer the data type.</p>\n\n<p>So it looks like it's the <code>generate_series()</code> parameters that aren't being properly determined. Postgres <em>can</em> infer data types based on parameters, e.g.</p>\n\n<pre><code>if err := db.QueryRow(\"SELECT trunc($1,2) as test\", 1.4343).Scan(&amp;output); err != nil {panic(err)}\n// output = 1.43\n</code></pre>\n\n<p><em>However</em>, if it's a polymorphic function ambiguity can arise and it will fail, e.g.</p>\n\n<pre><code>if err := db.QueryRow(\"SELECT trunc($1) as test\", 1.4343).Scan(&amp;output); err != nil {panic(err)}\n// panic: pq: function trunc(unknown) is not unique\n</code></pre>\n\n<p>To avoid ambiguity, explicitly cast parameters in your prepared statement, like: <code>generate_series($3::int,$4::int)</code></p>\n"}], "owner": {"reputation": 401, "user_id": 3050598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yxA9u.png?s=128&g=1", "display_name": "ekiyanov", "link": "https://stackoverflow.com/users/3050598/ekiyanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1235, "favorite_count": 0, "accepted_answer_id": 32072586, "answer_count": 1, "score": 2, "last_activity_date": 1439902723, "creation_date": 1439864573, "last_edit_date": 1439902236, "question_id": 32062568, "link": "https://stackoverflow.com/questions/32062568/placeholders-in-the-postgres-query-for-generate-series-returns-unknown", "title": "Placeholders in the Postgres query for generate_series returns unknown", "body": "<p>I try to make a query with placeholders like this</p>\n\n<pre><code>database.Query(\"select login,displayname from (select distinct $1+trunc(random()*$2)::integer as id from generate_series($3,$4) g ) r join users using(id) limit 10\",min_id,max_id-min_id,min_id,max_id)\n</code></pre>\n\n<p>It throws me an error:</p>\n\n<pre><code>pq: function generate_series(unknown, unknown) is not unique\n</code></pre>\n\n<p>Then I find a solution to format query as a string </p>\n\n<pre><code>query:=fmt.Sprintf(\"select login,displayname from (select distinct %v+trunc(random()*%v)::integer as id from generate_series(%v,%v) g ) r join users using(id) limit 10\",min_id,max_id-min_id,min_id,max_id)\n</code></pre>\n\n<p>and it works.</p>\n\n<p>I'd like to make it work in a right way, but I don't understand why it doesn't. </p>\n\n<p>Updated:</p>\n\n<pre><code>var min_id int64\nvar max_id int64\nerr:=_database.QueryRow(\"select min(id),max(id) from users\").Scan(&amp;min_id, &amp;max_id)\nif err!=nil { \n    log.Panicf(\"Failed to get min and max %v\",err.Error())\n    return\n}\n\nvar rows *sql.Rows\n\nquery:=fmt.Sprintf(\"select login,displayname from (select distinct %v+trunc(random()*%v)::integer as id from generate_series(%v,%v) g ) r join users using(id) limit 10\",min_id,max_id-min_id,min_id,max_id)\nlog.Printf(query)\nrows,err=_database.Query(\"select login,displayname from (select distinct $1+trunc(random()*$2)::integer as id from generate_series($3,$4) g ) r join users using(id) limit 10\",min_id,max_id-min_id,min_id,max_id)\nif err!=nil {\n    log.Panicf(\"failed to get random entries: %v\",err)\n}\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 644, "user_id": 5184187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cc11d3b8b01c4dd37217a1aa631fb01?s=128&d=identicon&r=PG&f=1", "display_name": "Jianjian Yang", "link": "https://stackoverflow.com/users/5184187/jianjian-yang"}, "edited": false, "score": 0, "creation_date": 1439864041, "post_id": 32062493, "comment_id": 52023310, "body": "the environment is  windows 64,  go 1.5rc1"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 4, "creation_date": 1439878096, "post_id": 32062493, "comment_id": 52027160, "body": "<code>go run a.go</code> is slow because it compiles the code and then runs it. Try using <code>go build</code> or <code>go install</code> which will produce an executable binary (<code>a.exe</code>). Now try to run this .exe file, and you will see the result printed immediately."}, {"owner": {"reputation": 17031, "user_id": 630170, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f84ed0f2e84f265fe601871043ff1228?s=128&d=identicon&r=PG", "display_name": "kumarharsh", "link": "https://stackoverflow.com/users/630170/kumarharsh"}, "edited": false, "score": 7, "creation_date": 1486103773, "post_id": 32062493, "comment_id": 71210756, "body": "No idea why this question has so many downvotes. Yes, it&#39;s a little unspecific, but <code>go run</code> is indeed very slow on Windows, even the newest versions. I think @Zan Lynx&#39;s second part of the answer is the reason for it."}, {"owner": {"reputation": 4783, "user_id": 2939061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NoM9S.gif?s=128&g=1", "display_name": "quasoft", "link": "https://stackoverflow.com/users/2939061/quasoft"}, "edited": false, "score": 0, "creation_date": 1519411168, "post_id": 32062493, "comment_id": 84915152, "body": "If you have Git bash installed, just use that instead of Powershell or Command prompt and it will run almost instantly."}, {"owner": {"reputation": 4783, "user_id": 2939061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NoM9S.gif?s=128&g=1", "display_name": "quasoft", "link": "https://stackoverflow.com/users/2939061/quasoft"}, "edited": false, "score": 2, "creation_date": 1521703045, "post_id": 32062493, "comment_id": 85845987, "body": "Antivirus programs with real-time protection are also potential candidates for slowing it down. That turned out to be the problem in my case."}], "answers": [{"comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1439870439, "post_id": 32062786, "comment_id": 52024749, "body": "I suspect that the compile time impact for such a simple program between 1.4 and 1.5 is almost immeasurable. The impact is likely to do with the Windows command line, but without any further information (has the OP run 1.4? was it better?) these are just guesses."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": true, "score": 4, "last_activity_date": 1439866510, "creation_date": 1439866510, "answer_id": 32062786, "question_id": 32062493, "link": "https://stackoverflow.com/questions/32062493/golang-is-slow-in-windows/32062786#32062786", "title": "golang is slow in Windows", "body": "<p>I believe that <code>go run</code> compiles the code and then runs it. Go 1.5 is known to be much slower at compiling. (Read the release notes) The devs have converted it all to Go code but haven't optimized it for Go yet.</p>\n\n<p>Also Go uses POSIX style disk and network operations. I don't believe anyone has optimized Go for completion ports and Windows asynch IO.</p>\n"}], "owner": {"reputation": 644, "user_id": 5184187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cc11d3b8b01c4dd37217a1aa631fb01?s=128&d=identicon&r=PG&f=1", "display_name": "Jianjian Yang", "link": "https://stackoverflow.com/users/5184187/jianjian-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2796, "favorite_count": 0, "closed_date": 1439872607, "accepted_answer_id": 32062786, "answer_count": 1, "score": 5, "last_activity_date": 1439878035, "creation_date": 1439863994, "last_edit_date": 1439878035, "question_id": 32062493, "link": "https://stackoverflow.com/questions/32062493/golang-is-slow-in-windows", "closed_reason": "Needs details or clarity", "title": "golang is slow in Windows", "body": "<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println(\"Hello world\")\n}\n</code></pre>\n\n<p>The command is <code>go run a.go</code>.<br>\nThis code need 4~5s in windows. </p>\n"}, {"tags": ["go", "build"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 6, "creation_date": 1439858430, "post_id": 32061750, "comment_id": 52022143, "body": "<code>go install</code> and/or <code>go build -i</code>; they will install dependant packages that in future won&#39;t get rebuilt unless changed. A plain <code>go build</code> will rebuild changed dependant packages but won&#39;t save the results."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1439859063, "post_id": 32061750, "comment_id": 52022262, "body": "This is exactly what <code>go install</code> is for."}, {"owner": {"reputation": 22921, "user_id": 229753, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f443a82ac96270394a6965323142601b?s=128&d=identicon&r=PG", "display_name": "Tobu", "link": "https://stackoverflow.com/users/229753/tobu"}, "edited": false, "score": 0, "creation_date": 1439869265, "post_id": 32061750, "comment_id": 52024462, "body": "<code>go build -x</code> tells me the time is spent rebuilding the tiny program. Dependencies are cached okay."}, {"owner": {"reputation": 22921, "user_id": 229753, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f443a82ac96270394a6965323142601b?s=128&d=identicon&r=PG", "display_name": "Tobu", "link": "https://stackoverflow.com/users/229753/tobu"}, "edited": false, "score": 0, "creation_date": 1439873287, "post_id": 32061750, "comment_id": 52025422, "body": "<code>go install</code> with no arguments works, thank you! (but not <code>build -i</code>). At this point I was looking into <code>go list</code> formats, makedepends and continuous building."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 1, "creation_date": 1439875691, "post_id": 32061750, "comment_id": 52026264, "body": "See this answer for <a href=\"http://stackoverflow.com/a/30612612/1705598\">What does go build build?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 99684, "user_id": 149482, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cb6a2b464b7190c48e4f148a0e51d13a?s=128&d=identicon&r=PG", "display_name": "Matt Joiner", "link": "https://stackoverflow.com/users/149482/matt-joiner"}, "is_accepted": true, "score": 1, "last_activity_date": 1439872756, "last_edit_date": 1439872756, "creation_date": 1439871697, "answer_id": 32063481, "question_id": 32061750, "link": "https://stackoverflow.com/questions/32061750/go-build-rebuilds-unnecessarily/32063481#32063481", "title": "`go build` rebuilds unnecessarily", "body": "<p>I wrote a <a href=\"https://github.com/anacrolix/godo\" rel=\"nofollow\">tool</a> that happens to solve this as a side effect. <code>go build</code> alone will not check if the executable it's producing is already up to date. <code>go install</code> does, and if you tweak it to install to a location of your choice, then you'll get the desired result, similar to <code>go build</code>.</p>\n\n<p>You can see the behaviour you describe by doing something like this:</p>\n\n<pre><code>$ go get -d github.com/anacrolix/missinggo/cmd/nop\n$ time go run \"$GOPATH\"/src/github.com/anacrolix/missinggo/cmd/nop/*.go\n\nreal    0m0.176s\nuser    0m0.142s\nsys     0m0.048s\n</code></pre>\n\n<p>That's on a warm run. <code>go run</code> will link on every invocation, just as <code>go build</code> would. Note that <code>github.com/anacrolix/missinggo/cmd/nop</code> is an program that does absolutely nothing.</p>\n\n<p>Here's invoking the same package, using my tool, godo:</p>\n\n<pre><code>$ time godo github.com/anacrolix/missinggo/cmd/nop\n\nreal    0m0.073s\nuser    0m0.029s\nsys     0m0.033s\n</code></pre>\n\n<p>For larger programs, the difference should be more pronounced.</p>\n\n<p>So in summary, your standard tooling option is to use <code>go install</code>, or an alternative like godo.</p>\n"}, {"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 7, "last_activity_date": 1510864121, "last_edit_date": 1510864121, "creation_date": 1509792033, "answer_id": 47109826, "question_id": 32061750, "link": "https://stackoverflow.com/questions/32061750/go-build-rebuilds-unnecessarily/47109826#47109826", "title": "`go build` rebuilds unnecessarily", "body": "<p><code>go build</code> and <code>go install</code> will soon (Go 1.10, Q1 2018) be much faster: see <a href=\"https://groups.google.com/forum/#!msg/golang-dev/qfa3mHN4ZPA/X2UzjNV1BAAJ\" rel=\"noreferrer\">this thread</a> and <a href=\"https://tip.golang.org/doc/go1.10\" rel=\"noreferrer\">this</a> draft document.</p>\n\n<blockquote>\n  <p>The go command now maintains a cache of built packages and other small metadata (<a href=\"https://golang.org/cl/68116\" rel=\"noreferrer\">CL 68116</a> and <a href=\"https://golang.org/cl/75473\" rel=\"noreferrer\">CL 75473</a>). The cache defaults to the operating system-defined user cache directory but can be moved by setting <code>$GOCACHE</code>.<br>\n  Run \"<code>go env GOCACHE</code>\" to see the current effective setting. Right now the go command never deletes anything from the cache. If the cache gets too big, run \"<code>go clean -cache</code>\" instead of deleting the directory. That command will preserve the cache's <code>log.txt</code> file. In a few weeks I'll ask people to post their <code>log.txt</code> files to a Github issue so that we can evaluate cache size management approaches.</p>\n  \n  <p>The main effect of the build cache is that commands like \"<code>go test</code>\" and \"<code>go build</code>\" run fast and do incremental builds always, reusing past build steps as aggressively as possible.<br>\n  You do not have to use \"<code>go test -i</code>\" or \"<code>go build -i</code>\" or \"<code>go install</code>\" just to get fast incremental builds. We will not have to teach new users those workarounds anymore. Everything will just be fast.</p>\n</blockquote>\n\n<p>Note that <code>go install</code> won't installs dependencies of the named packages: see \"<a href=\"https://stackoverflow.com/a/47109875/6309\">What does <code>go build</code> build?</a>\".</p>\n"}], "owner": {"reputation": 22921, "user_id": 229753, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f443a82ac96270394a6965323142601b?s=128&d=identicon&r=PG", "display_name": "Tobu", "link": "https://stackoverflow.com/users/229753/tobu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3879, "favorite_count": 2, "accepted_answer_id": 32063481, "answer_count": 2, "score": 2, "last_activity_date": 1510864121, "creation_date": 1439857573, "question_id": 32061750, "link": "https://stackoverflow.com/questions/32061750/go-build-rebuilds-unnecessarily", "title": "`go build` rebuilds unnecessarily", "body": "<p>go build and go run are very slow on a tiny program I have (cgo invocations in particular).  I'd like go to cache the binary so that it only rebuilds when the source is newer.  I would use a simple Makefile with a % rule, but the language designers claim that go's build support doesn't need Makefiles.</p>\n\n<p>Is there another alternative I've overlooked?  Does the go community prefer another build system, maybe hash-based instead, for caching and reusing build products?</p>\n"}, {"tags": ["function", "go"], "answers": [{"tags": [], "owner": {"reputation": 11133, "user_id": 4275347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CdbsN.jpg?s=128&g=1", "display_name": "Michael Laszlo", "link": "https://stackoverflow.com/users/4275347/michael-laszlo"}, "is_accepted": true, "score": 4, "last_activity_date": 1439849677, "last_edit_date": 1439849677, "creation_date": 1439849277, "answer_id": 32060475, "question_id": 32060348, "link": "https://stackoverflow.com/questions/32060348/can-you-explain-parameters-between-func-keyword-and-function-name/32060475#32060475", "title": "Can you explain parameters between func keyword and function name?", "body": "<p>These two functions are <a href=\"https://golang.org/ref/spec#Method_declarations\" rel=\"nofollow\">methods</a> because they are associated with receivers. In each method declaration, <code>(dec *Decoder)</code> describes the receiver. If you have a <code>*Decoder</code> called <code>decoder</code>, you call <code>Buffered</code> on it like this:</p>\n\n<pre><code>reader := decoder.Buffered()\n</code></pre>\n\n<p>Take a look at the <a href=\"https://tour.golang.org/methods/1\" rel=\"nofollow\">the Go tutorial lesson</a> on this topic.</p>\n"}], "owner": {"reputation": 1650, "user_id": 112665, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ede42efc0b10828ce9bb934793c8bb03?s=128&d=identicon&r=PG", "display_name": "Barry", "link": "https://stackoverflow.com/users/112665/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 32060475, "answer_count": 1, "score": 0, "last_activity_date": 1439849985, "creation_date": 1439848540, "last_edit_date": 1439849985, "question_id": 32060348, "link": "https://stackoverflow.com/questions/32060348/can-you-explain-parameters-between-func-keyword-and-function-name", "title": "Can you explain parameters between func keyword and function name?", "body": "<p>I'm new to the language and so far what I have read doesn't explain what is happening here.</p>\n\n<p>I was looking at <a href=\"http://golang.org/pkg/encoding/json/#Decoder\" rel=\"nofollow\">JSON decoding</a>.</p>\n\n<p>Here is a function in the package:</p>\n\n<pre><code>func (dec *Decoder) Decode(v interface{}) error\n</code></pre>\n\n<p>There is similar notation here:</p>\n\n<pre><code>func (dec *Decoder) Buffered() io.Reader\n</code></pre>\n\n<p>How do these functions access the <code>(dec *Decoder)</code>? Given that the second function has no parameters, I am guessing this is not something that must be passed directly in the function call but something similar? </p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 5, "creation_date": 1439845490, "post_id": 32059342, "comment_id": 52018134, "body": "BTW, your <a href=\"http://research.swtch.com/names\" rel=\"nofollow noreferrer\">overly verbose variable names</a> and merge semantics makes it hard to read and you have an O(n&#215;m) algorithm where you could use a <a href=\"https://play.golang.org/p/JGfq_QmtvA\" rel=\"nofollow noreferrer\">O(n+m) one</a>."}, {"owner": {"reputation": 21289, "user_id": 532430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/uAwnB.png?s=128&g=1", "display_name": "thwd", "link": "https://stackoverflow.com/users/532430/thwd"}, "edited": false, "score": 0, "creation_date": 1439849670, "post_id": 32059342, "comment_id": 52019839, "body": "Use polymorphism. Is to say, interfaces."}, {"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1439862956, "post_id": 32059342, "comment_id": 52023070, "body": "<code>aSliceDestination *[]RequestObject</code> should probably be a map in the first place."}, {"owner": {"reputation": 287, "user_id": 4270770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff66d6ac9684b8e70a1156ec4c778b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Asticode", "link": "https://stackoverflow.com/users/4270770/asticode"}, "edited": false, "score": 0, "creation_date": 1439881746, "post_id": 32059342, "comment_id": 52028968, "body": "Thanks a lot guys, all your answers were very helpful :)"}], "answers": [{"comments": [{"owner": {"reputation": 287, "user_id": 4270770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff66d6ac9684b8e70a1156ec4c778b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Asticode", "link": "https://stackoverflow.com/users/4270770/asticode"}, "edited": false, "score": 0, "creation_date": 1439881276, "post_id": 32060685, "comment_id": 52028706, "body": "Thanks a lot for the answer, this is a smart move indeed :)"}, {"owner": {"reputation": 287, "user_id": 4270770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff66d6ac9684b8e70a1156ec4c778b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Asticode", "link": "https://stackoverflow.com/users/4270770/asticode"}, "edited": false, "score": 0, "creation_date": 1439883226, "post_id": 32060685, "comment_id": 52029866, "body": "I&#39;m having problem implementing your solution, I&#39;ve edited my question, can you check it out ? :)"}], "tags": [], "owner": {"reputation": 21289, "user_id": 532430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/uAwnB.png?s=128&g=1", "display_name": "thwd", "link": "https://stackoverflow.com/users/532430/thwd"}, "is_accepted": true, "score": 4, "last_activity_date": 1439972864, "last_edit_date": 1495540681, "creation_date": 1439850251, "answer_id": 32060685, "question_id": 32059342, "link": "https://stackoverflow.com/questions/32059342/go-merging-2-functions-whose-only-difference-is-the-arguments-type/32060685#32060685", "title": "Go - Merging 2 functions whose only difference is the arguments type", "body": "<p>Define an interface:</p>\n\n<pre><code>type Keyer interface {\n    Key() int // or whatever type the Key field has\n}\n</code></pre>\n\n<p>Then implement the interface on both types:</p>\n\n<pre><code>func (r RequestObject) Key() int {\n    return r.Key\n}\n\nfunc (r ResponseObject) Key() int {\n    return r.Key\n}\n</code></pre>\n\n<p>And rewrite your function to take this interface (and not use hungarian notation and endlessly long variable names):</p>\n\n<pre><code>func mergeKeyers(dst *[]Keyer, src []Keyer) {\n    for _, s := range src {\n        f := -1\n        for i, d := range *dst {\n            if s.Key() == d.Key() {\n                f = i\n                break\n            }\n        }\n        if f == -1 {\n            *dst = append(*dst, s)\n        }\n    }\n}\n</code></pre>\n\n<p>Also, take into account Dave C's comment:</p>\n\n<blockquote>\n  <p>you have an O(n\u00d7m) algorithm where you could use a O(n+m) one.</p>\n</blockquote>\n\n<p>I'll leave it up to you to optimize your code in that way.</p>\n\n<hr>\n\n<p>Edit to address your second question:</p>\n\n<p>The types <code>*[]RequestObject</code> and <code>*[]Keyer</code> are distinct and not interchangeable. What you need to do is convert your slice of RequestObjects to a slice of Keyers.</p>\n\n<p>This is as easy as iterating over the <code>[]RequestObject</code> and assigning each entry to a new entry in a value of type <code>[]Keyer</code>.</p>\n\n<p>See also these answers:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/12753805/type-converting-slices-of-interfaces-in-go\">Type converting slices of interfaces in go</a></li>\n<li><a href=\"https://stackoverflow.com/questions/11924196/convert-between-slices-of-different-types\">Convert between slices of different types</a></li>\n</ul>\n"}], "owner": {"reputation": 287, "user_id": 4270770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff66d6ac9684b8e70a1156ec4c778b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Asticode", "link": "https://stackoverflow.com/users/4270770/asticode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 32060685, "answer_count": 1, "score": 2, "last_activity_date": 1439972864, "creation_date": 1439844157, "last_edit_date": 1439883572, "question_id": 32059342, "link": "https://stackoverflow.com/questions/32059342/go-merging-2-functions-whose-only-difference-is-the-arguments-type", "title": "Go - Merging 2 functions whose only difference is the arguments type", "body": "<p>I have those 2 almost exact functions :</p>\n\n<p><em>Number 1</em>:</p>\n\n<pre><code>func mergeSlicesOfRequestObjects(aSliceDestination *[]RequestObject, aSliceSource []RequestObject) {\nfor _, oSliceSourceItem := range aSliceSource {\n    // Get current key\n    iIndexSourceItemFound := -1\n    for iIndexAttribute, oSliceDestinationItem := range *aSliceDestination {\n        if oSliceSourceItem.Key == oSliceDestinationItem.Key {\n            iIndexSourceItemFound = iIndexAttribute\n            break\n        }\n    }\n\n    // Update attribute\n    if iIndexSourceItemFound == -1 {\n        *aSliceDestination = append(*aSliceDestination, oSliceSourceItem)\n    }\n}\n}\n</code></pre>\n\n<p><em>Number 2:</em></p>\n\n<pre><code>func mergeSlicesOfResponseObjects(aSliceDestination *[]ResponseObject, aSliceSource []ResponseObject) {\nfor _, oSliceSourceItem := range aSliceSource {\n    // Get current key\n    iIndexSourceItemFound := -1\n    for iIndexAttribute, oSliceDestinationItem := range *aSliceDestination {\n        if oSliceSourceItem.Key == oSliceDestinationItem.Key {\n            iIndexSourceItemFound = iIndexAttribute\n            break\n        }\n    }\n\n    // Update attribute\n    if iIndexSourceItemFound == -1 {\n        *aSliceDestination = append(*aSliceDestination, oSliceSourceItem)\n    }\n}\n}\n</code></pre>\n\n<p>As you can see the only difference is the struct type of the arguments of the functions.</p>\n\n<p>So here is my question : is there any way to merge those 2 functions into one ? </p>\n\n<p>I've tried using interfaces but I can't figure it out...</p>\n\n<p>Thanks for all the answer in advance :)</p>\n\n<p>Cheers</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I've implemented thwd answer but I'm getting errors. Here's what I've done:</p>\n\n<pre><code>type Request struct {\n    Headers         []RequestObject\n}\n\ntype RequestObject {\n    Key string\n}\n\ntype Keyer interface {\n    GetKey() string\n}\n\nfunc (oRequestObject RequestObject) GetKey() string {\n    return oRequestObject.Key\n}\n\nfunc mergeKeyers(aDst *[]Keyer, aSrc []Keyer) {\n    // Logic\n}\n\nfunc test() {\n    // rDst and rSrc are Request struct\n    mergeKeyers(&amp;rDst.Headers, rSrc.Headers)\n}\n</code></pre>\n\n<p>And I'm getting the following errors when executing <em>test()</em>:</p>\n\n<pre><code>cannot use &amp;rDst.Headers (type *[]RequestObject) as type *[]Keyer in argument to mergeKeyers\ncannot use rSrc.Headers (type []RequestObject) as type []Keyer in argument to mergeKeyers\n</code></pre>\n\n<p>Any idea why ?</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439835929, "post_id": 32057197, "comment_id": 52013325, "body": "Thanks for the reply, where in the documentation can I see the version that&#39;s implemented at the package level, or did I miss it."}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "reply_to_user": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439836038, "post_id": 32057197, "comment_id": 52013374, "body": "@Datsik here&#39;s a link to it in the normal docs <a href=\"http://golang.org/pkg/net/http/#Get\" rel=\"nofollow noreferrer\">golang.org/pkg/net/http/#Get</a> from there you can also click the method to go to the actual source <a href=\"http://golang.org/src/net/http/client.go?s=9055:9103#L265\" rel=\"nofollow noreferrer\">golang.org/src/net/http/client.go?s=9055:9103#L265</a> here&#39;s the clients get <a href=\"http://golang.org/pkg/net/http/#Client.Get\" rel=\"nofollow noreferrer\">golang.org/pkg/net/http/#Client.Get</a>"}], "tags": [], "owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "is_accepted": true, "score": 3, "last_activity_date": 1439842576, "last_edit_date": 1439842576, "creation_date": 1439835879, "answer_id": 32057197, "question_id": 32057142, "link": "https://stackoverflow.com/questions/32057142/how-come-i-can-use-a-packages-method-when-it-says-it-belongs-to-a-different-type/32057197#32057197", "title": "How come I can use a packages method when it says it belongs to a different type?", "body": "<p>Those are two different versions of the method. In one case; <code>http.Get</code> it's defined at the package level, this works much like a static method in C# or Java. In the other it has a receiver of type <code>http.Client</code> it's more like an instance method on that type in C# or Java. The type <code>http.Client</code> is as you'd expect in the same package.</p>\n\n<p>package level get:\n<a href=\"http://golang.org/pkg/net/http/#Get\" rel=\"nofollow\">http://golang.org/pkg/net/http/#Get</a></p>\n\n<pre><code> func Get(url string) (resp *Response, err error)\n    //^ absence of receiver = package scoped\n    //^ uppercase method name so it is 'exported' which is about like public\n</code></pre>\n\n<p>client receiver get:\n<a href=\"http://golang.org/pkg/net/http/#Client.Get\" rel=\"nofollow\">http://golang.org/pkg/net/http/#Client.Get</a></p>\n\n<pre><code>   func (c *Client) Get(url string) (resp *Response, err error)\n        //^ this is the receiver\n</code></pre>\n"}], "owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 32057197, "answer_count": 1, "score": 0, "last_activity_date": 1439842576, "creation_date": 1439835690, "question_id": 32057142, "link": "https://stackoverflow.com/questions/32057142/how-come-i-can-use-a-packages-method-when-it-says-it-belongs-to-a-different-type", "title": "How come I can use a packages method when it says it belongs to a different type?", "body": "<p>Sorry for the horrible horrible title, first off if anybody can offer an edit for a better title after reading my question please, submit it, I'm pretty bad with my terminology at the moment. </p>\n\n<p>So, simple question:</p>\n\n<p>Reading through the <code>net/http</code> package on how to make <code>http.Get</code> requests and it says all I have to do is </p>\n\n<p><code>resp, err := http.Get(blah)</code></p>\n\n<p>Ok fair enough so scrolling down the list to see what parameters this <code>Get</code> function took, I couldn't find it directly under the functions of the http package</p>\n\n<p>So scrolling down I find a <code>Get</code> method under <code>type Client</code> </p>\n\n<p>So how come I don't have to first <code>http.Client</code> then make my <code>Get</code> request to that? Just a little confused. Thanks for any help. </p>\n"}, {"tags": ["function", "go", "return-type"], "comments": [{"owner": {"reputation": 5884, "user_id": 382971, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4cb6e2345be385ba57460c200dce2ff7?s=128&d=identicon&r=PG", "display_name": "Mateusz Jagie\u0142\u0142o", "link": "https://stackoverflow.com/users/382971/mateusz-jagie%c5%82%c5%82o"}, "edited": false, "score": 0, "creation_date": 1439834993, "post_id": 32056944, "comment_id": 52012769, "body": "I&#39;ve used reflect.TypeOf for determining type of the return."}, {"owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "edited": false, "score": 1, "creation_date": 1439835222, "post_id": 32056944, "comment_id": 52012890, "body": "What are you trying to do? returning <code>time.Time</code> is the right way, unless you need a string then you can return <code>time.Now().String()</code> or call <code>.Format(...)</code>."}, {"owner": {"reputation": 1406, "user_id": 5114938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d86da9d18d258110186a0cd8659b7f?s=128&d=identicon&r=PG&f=1", "display_name": "Sleafar", "link": "https://stackoverflow.com/users/5114938/sleafar"}, "edited": false, "score": 2, "creation_date": 1439835440, "post_id": 32056944, "comment_id": 52013017, "body": "It is working correctly, why do you have doubts? Btw. the correct way to find out the type is the documentation: <a href=\"http://golang.org/pkg/time/#Now\" rel=\"nofollow noreferrer\">golang.org/pkg/time/#Now</a>"}, {"owner": {"reputation": 5884, "user_id": 382971, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4cb6e2345be385ba57460c200dce2ff7?s=128&d=identicon&r=PG", "display_name": "Mateusz Jagie\u0142\u0142o", "link": "https://stackoverflow.com/users/382971/mateusz-jagie%c5%82%c5%82o"}, "reply_to_user": {"reputation": 1406, "user_id": 5114938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d86da9d18d258110186a0cd8659b7f?s=128&d=identicon&r=PG&f=1", "display_name": "Sleafar", "link": "https://stackoverflow.com/users/5114938/sleafar"}, "edited": false, "score": 0, "creation_date": 1439841297, "post_id": 32056944, "comment_id": 52016054, "body": "@Sleafar: why doubts? I think that functions can return just few types of data: int, float, strings etc. time.Time() is actually abstract for me. Thanks for pointing at manual. At this moment I know what they&#39;re writing there. :)"}], "answers": [{"comments": [{"owner": {"reputation": 5884, "user_id": 382971, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4cb6e2345be385ba57460c200dce2ff7?s=128&d=identicon&r=PG", "display_name": "Mateusz Jagie\u0142\u0142o", "link": "https://stackoverflow.com/users/382971/mateusz-jagie%c5%82%c5%82o"}, "edited": false, "score": 0, "creation_date": 1439841499, "post_id": 32057096, "comment_id": 52016151, "body": "As I mentioned in above comment, I think that return type of a function could be just int, float, string etc. If time.Time is completly correct, then I don&#39;t have any questions."}], "tags": [], "owner": {"reputation": 7800, "user_id": 1144203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e9563e87ef7289e475f9ffdf6e61081c?s=128&d=identicon&r=PG", "display_name": "ivan.sim", "link": "https://stackoverflow.com/users/1144203/ivan-sim"}, "is_accepted": true, "score": 3, "last_activity_date": 1439837093, "last_edit_date": 1439837093, "creation_date": 1439835537, "answer_id": 32057096, "question_id": 32056944, "link": "https://stackoverflow.com/questions/32056944/go-function-returns-datetime/32057096#32057096", "title": "Go - function returns datetime", "body": "<p>Unless the caller of your function is expecting a string (like a UI) and intending to do string manipulation on returned value (which doesn't make much sense in the context of datetime), you should just return <code>time.Time</code>. Otherwise, your caller will have no access to the provided time-related functions like <code>time.After()</code>, <code>time.Before()</code>, <code>time.Equal()</code> etc.</p>\n"}], "owner": {"reputation": 5884, "user_id": 382971, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4cb6e2345be385ba57460c200dce2ff7?s=128&d=identicon&r=PG", "display_name": "Mateusz Jagie\u0142\u0142o", "link": "https://stackoverflow.com/users/382971/mateusz-jagie%c5%82%c5%82o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 1, "accepted_answer_id": 32057096, "answer_count": 1, "score": 1, "last_activity_date": 1439837093, "creation_date": 1439834887, "question_id": 32056944, "link": "https://stackoverflow.com/questions/32056944/go-function-returns-datetime", "title": "Go - function returns datetime", "body": "<p>I'm learning go language and I try create a function returns datetime.</p>\n\n<p>Already I've code that works (<a href=\"http://play.golang.org/p/Ey11tXtNmH\" rel=\"nofollow\">look online at play.golang.org</a>):</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc getDatetime() time.Time {\n    return time.Now()\n}\n\nfunc main() {\n    fmt.Println(getDatetime())\n}\n</code></pre>\n\n<p>But! I really don't know is it correct. My doubt is about type of a return of a getDatetime function (<strong>time.Time</strong>). Should it be string or something else?</p>\n\n<hr>\n\n<p>Btw: sorry for simple question, I'm python developer since few years.</p>\n"}, {"tags": ["go", "cmd"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439829820, "post_id": 32055364, "comment_id": 52010018, "body": "There is no &quot;output pointer&quot;, perhaps you mean cursor position. A terminal prints a stream of output bytes. A linefeed (NL, <code>\\n</code>, Ctrl+J) causes it to return to column zero and move to the next line. A carrage return (CR, <code>\\r</code>, Ctrl+M) causes it to return to column zero. If you want to do anything more fancy you need to use something that queries the terminal capabilities to figure out the control codes it will respond to."}], "answers": [{"tags": [], "owner": {"reputation": 26843, "user_id": 208997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/250e219125d8bff1f03e6faea950f218?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/208997/simon"}, "is_accepted": true, "score": 2, "last_activity_date": 1439829680, "creation_date": 1439829680, "answer_id": 32055571, "question_id": 32055364, "link": "https://stackoverflow.com/questions/32055364/changing-value-of-printed-line/32055571#32055571", "title": "Changing value of printed line", "body": "<p>To do anything more than changing the current line, as you noticed, <code>\\r</code> won't work. The solution is to set your terminal in a different mode which allow more control. However, this is painful to do by hand. Luckily, there are libraries out there that makes it easy. A very famous one is <a href=\"https://en.wikipedia.org/wiki/Ncurses\" rel=\"nofollow\">ncurses</a>.</p>\n\n<p>For Go, <a href=\"https://github.com/jroimartin/gocui\" rel=\"nofollow\">GoCUI</a> looks great. It should give you all the power you need with a nice interface.</p>\n"}], "owner": {"reputation": 215, "user_id": 3698624, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/2875386f2772c39fbfc6149282c86748?s=128&d=identicon&r=PG&f=1", "display_name": "user3698624", "link": "https://stackoverflow.com/users/3698624/user3698624"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 32055571, "answer_count": 1, "score": 1, "last_activity_date": 1439829680, "creation_date": 1439828985, "question_id": 32055364, "link": "https://stackoverflow.com/questions/32055364/changing-value-of-printed-line", "title": "Changing value of printed line", "body": "<p>in my go-application which is cli-based I Need to update some values which are already printed. I already found a stackoverflow-question where I got to know that with <code>\\r</code> the \"Output-pointer\" points to the first char of the former line, therefore overriding it. But multiple <code>\\r</code>s arent working...\nSo how do I update e.g. the second line I printed.\nExample:</p>\n\n<pre><code>#Id    #Name    #pwr    #dB\n0      Name     unkn    -34\n</code></pre>\n\n<p>And I want to update those values without printing new lines</p>\n\n<pre><code>#Id    #Name    #pwr    #dB\n0      NewName  45      -34\n</code></pre>\n"}, {"tags": ["go", "docker", "containers"], "owner": {"reputation": 5294, "user_id": 315046, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/074b5aae0a564bb72dc210c9c63abd87?s=128&d=identicon&r=PG", "display_name": "Peter Teoh", "link": "https://stackoverflow.com/users/315046/peter-teoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1439826213, "creation_date": 1439826213, "question_id": 32054462, "link": "https://stackoverflow.com/questions/32054462/error-during-compilation-installation-of-libcontainer-due-to-custom-build-kern", "title": "Error during compilation / installation of libcontainer due to custom-build kernel", "body": "<p>I did a git clone of master at libcontainer and then followed through the CONTRIBUTING.md guide.</p>\n\n<pre><code>./update-vendor.sh\ngo get -d ./...\nmake direct-build\n# Run the tests\nmake direct-test-short | egrep --color 'FAIL|$'\n# Run all the test\nmake direct-test | egrep --color 'FAIL|$'\n</code></pre>\n\n<p>THe output of \"make direct-build\" gives:</p>\n\n<pre><code>    go build -v . ./apparmor ./cgroups ./cgroups/fs ./cgroups/systemd ./configs ./configs/validate ./criurpc ./devices ./integration ./label ./netlink ./nsenter ./nsinit ./seccomp ./selinux ./stacktrace ./system ./user ./utils ./xattr\n    github.com/docker/libcontainer/cgroups/systemd\n&lt;xxxxx&gt;\n    # github.com/docker/libcontainer/cgroups/systemd\n    /sda10/gopath/src/github.com/docker/libcontainer/cgroups/systemd/apply_systemd.go:87: not enough arguments in call to theConn.StartTransientUnit\n    /sda10/gopath/src/github.com/docker/libcontainer/cgroups/systemd/apply_systemd.go:102: not enough arguments in call to theConn.StopUnit\n    /sda10/gopath/src/github.com/docker/libcontainer/cgroups/systemd/apply_systemd.go:121: not enough arguments in call to theConn.StartTransientUnit\n    /sda10/gopath/src/github.com/docker/libcontainer/cgroups/systemd/apply_systemd.go:130: not enough arguments in call to theConn.StopUnit\n    /sda10/gopath/src/github.com/docker/libcontainer/cgroups/systemd/apply_systemd.go:201: not enough arguments in call to theConn.StartTransientUnit\n    /sda10/gopath/src/github.com/docker/libcontainer/cgroups/systemd/apply_systemd.go:272: not enough arguments in call to theConn.StopUnit\n    _/home/tthtlc/libcontainer/label\n    # _/home/tthtlc/libcontainer/cgroups/systemd\n    cgroups/systemd/apply_systemd.go:87: not enough arguments in call to theConn.StartTransientUnit\n    cgroups/systemd/apply_systemd.go:102: not enough arguments in call to theConn.StopUnit\n    cgroups/systemd/apply_systemd.go:121: not enough arguments in call to theConn.StartTransientUnit\n    cgroups/systemd/apply_systemd.go:130: not enough arguments in call to theConn.StopUnit\n    cgroups/systemd/apply_systemd.go:201: not enough arguments in call to theConn.StartTransientUnit\n    cgroups/systemd/apply_systemd.go:272: not enough arguments in call to theConn.StopUnit\n    make: *** [direct-build] Error 2\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>go get github.com/tools/godep\ngo get -d github.com/google/cadvisor\n</code></pre>\n\n<p>All returned without errors. Likely cause is \"docker -d\" daemon not starting up.</p>\n\n<p>More details:</p>\n\n<pre><code>docker version\nClient version: 1.7.0-dev\nClient API version: 1.19\nGo version (client): go1.4.2\nGit commit (client): 5e06332\nOS/Arch (client): linux/amd64\nFATA[0000] Get http:///var/run/docker.sock/v1.19/version: dial unix /var/run/docker.sock: permission denied. Are you trying to connect to a TLS-enabled daemon without TLS? \n</code></pre>\n\n<p>\"docker -d\" is not able to succeed because my linux kernel is custom build (4.2.0-rc4+, and CONFIG_AUFS_FS is completely absent from my config tree option as it has been deprecated and removed).</p>\n\n<p>Any ideas on how to proceed?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 7, "creation_date": 1439825413, "post_id": 32054113, "comment_id": 52007368, "body": "The for loop is copying the item from <code>GlobalMe.Members</code>. Instead, do for <code>i := range GlobalMe.Members</code> and update <code>GlobalMe.Members[i]</code> (or take a pointer, <code>member := &amp;GlobalMe.Members[i]</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 8296, "user_id": 216488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c510f6396aac23ff75e25f50cf3014d6?s=128&d=identicon&r=PG", "display_name": "Caleb", "link": "https://stackoverflow.com/users/216488/caleb"}, "is_accepted": true, "score": 1, "last_activity_date": 1439854649, "creation_date": 1439854649, "answer_id": 32061369, "question_id": 32054113, "link": "https://stackoverflow.com/questions/32054113/update-to-global-variables-member-not-reflecting-in-global-variable/32061369#32061369", "title": "update to global variable&#39;s member not reflecting in global variable", "body": "<p>If you have:</p>\n\n<pre><code>type SomeMemberType struct {\n  SomeProperty string\n}\n\ntype SomeType struct {\n  Members []SomeMemberType\n}\n\nvar GlobalMe SomeType\n</code></pre>\n\n<p>Simply change <code>SomeType</code> to:</p>\n\n<pre><code>type SomeType struct {\n  Members []*SomeMemberType\n}\n</code></pre>\n\n<p>People often find this unintuitive, but it usually makes sense when you deal\nwith more basic types:</p>\n\n<pre><code>xs := []int{1,2,3}\nfor _, x := range xs {\n  x = 4\n}\n// xs is still {1,2,3}\n</code></pre>\n\n<p>This actually doesn't compile, but if it did <code>xs</code> wouldn't change. If you wanted \nto modify the original you'd have to do:</p>\n\n<pre><code>xs := []int{1,2,3}\nfor i := range xs {\n  xs[i] = 4\n}\n// xs is now {4,4,4}\n</code></pre>\n\n<p>This behavior is common in most programming languages. Go is just a little more explicit about it by doing the same thing for structs. (So if you want java-like behavior use pointers)</p>\n"}], "owner": {"reputation": 6987, "user_id": 816415, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6718587772b15f57b3e7923aee8420ea?s=128&d=identicon&r=PG", "display_name": "gextra", "link": "https://stackoverflow.com/users/816415/gextra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 32061369, "answer_count": 1, "score": -1, "last_activity_date": 1439854649, "creation_date": 1439825077, "question_id": 32054113, "link": "https://stackoverflow.com/questions/32054113/update-to-global-variables-member-not-reflecting-in-global-variable", "title": "update to global variable&#39;s member not reflecting in global variable", "body": "<p>First of all, I am new to Go, so I guess it is obvious to me there is some proper way of doing what I am trying to achieve here. </p>\n\n<p>The issue I am having is that the following code will not print \"blah\" when I run test(). Instead if prints a nil, even if main() was executed first. How come updating of a Global variable's member property does not get reflected on itself at a different function ?</p>\n\n<pre><code>var GlobalMe SomeType\n\nfunc main() {\n    for _,member := range GlobalMe.Members {\n        member.SomeProperty = \"blah\"\n    }\n    test()\n}\n\nfunc test() {\n    for _,member := range GlobalMe.Members {\n        fmt.Println(\"value:\", member.SomeProperty)\n    }\n}\n</code></pre>\n"}, {"tags": ["arrays", "go", "int", "slice"], "comments": [{"owner": {"reputation": 881, "user_id": 276186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5627ef10f7577e6994bc424aa830f2?s=128&d=identicon&r=PG", "display_name": "PerroVerd", "link": "https://stackoverflow.com/users/276186/perroverd"}, "edited": false, "score": 1, "creation_date": 1439818192, "post_id": 32051653, "comment_id": 52002570, "body": "If the array has always 3 positions you can use the fmt.Sprintf(&quot;%d%d%d&quot;, array[0], array[1], array[2])"}], "answers": [{"comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 2, "creation_date": 1439822511, "post_id": 32051775, "comment_id": 52005452, "body": "Well, OP asked for an array, not a slice ;-) And your solution fails for integers &gt;= 10 ;-)"}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1439824199, "post_id": 32051775, "comment_id": 52006591, "body": "@Volker my initial version <i>does</i> work with arrays since <code>for range</code> doesn&#39;t care. As for <code>sn &gt;= 10</code> case, see edit :P"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1439834453, "post_id": 32051775, "comment_id": 52012492, "body": "@Ainar-G I was joking. Your solution was perfectly fine (But the question was pretty strange.)"}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1439835747, "post_id": 32051775, "comment_id": 52013220, "body": "@Volker I know it was a joke. I just played along :)"}], "tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": true, "score": 6, "last_activity_date": 1439824144, "last_edit_date": 1439824144, "creation_date": 1439818341, "answer_id": 32051775, "question_id": 32051653, "link": "https://stackoverflow.com/questions/32051653/concatenate-ints-inside-array-golang-golang/32051775#32051775", "title": "Concatenate ints inside array golang - GoLang", "body": "<p>The same way you would in any other language:</p>\n\n<pre><code>s := []int{1, 2, 3}\nn := 0\nfor _, sn := range s {\n    n *= 10\n    n += sn\n}\n</code></pre>\n\n<p>Playground: <a href=\"http://play.golang.org/p/SSemwbJuTz\" rel=\"nofollow\">http://play.golang.org/p/SSemwbJuTz</a>.</p>\n\n<p><strong>Edit:</strong> if you're planning to work with more that just single-digit numbers, the loop is a bit trickier:</p>\n\n<pre><code>for _, sn := range s {\n    shift := 10\n    for shift &lt; sn {\n        shift *= 10\n    }\n    n *= shift\n    n += sn\n}\n</code></pre>\n\n<p>This works with inputs like <code>[]int{1, 23, 456}</code>: <a href=\"http://play.golang.org/p/h1xsu9vtmP\" rel=\"nofollow\">http://play.golang.org/p/h1xsu9vtmP</a>.</p>\n\n<p>Look out for the <a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow\">integer overflow</a> though.</p>\n"}, {"comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1439820287, "post_id": 32051959, "comment_id": 52003993, "body": "It&#39;d be much wiser to first work with bytes and only convert to <code>string</code> at the end. Otherwise you may generate a lot of garbage strings in the process."}], "tags": [], "owner": {"reputation": 6265, "user_id": 3387925, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mtLre.jpg?s=128&g=1", "display_name": "Mayank Patel", "link": "https://stackoverflow.com/users/3387925/mayank-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1439818878, "creation_date": 1439818878, "answer_id": 32051959, "question_id": 32051653, "link": "https://stackoverflow.com/questions/32051653/concatenate-ints-inside-array-golang-golang/32051959#32051959", "title": "Concatenate ints inside array golang - GoLang", "body": "<p>If you want to have result as string </p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"strconv\"\n\nfunc main() {\n    fmt.Println(\"Hello, playground\")\n    a := []int{1, 2, 3,4}\n    s := \"\"\n    for _, c := range a {\n        s += strconv.Itoa(c)\n    }\n    fmt.Println(s)\n}\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 2147751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e580f6ab14ac6ca552f30ace3599ff89?s=128&d=identicon&r=PG", "display_name": "Kipz", "link": "https://stackoverflow.com/users/2147751/kipz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 32051775, "answer_count": 2, "score": -3, "last_activity_date": 1439824144, "creation_date": 1439817980, "question_id": 32051653, "link": "https://stackoverflow.com/questions/32051653/concatenate-ints-inside-array-golang-golang", "title": "Concatenate ints inside array golang - GoLang", "body": "<p>I have an array with 3 positions, imagine it has the number 5 in all of them.</p>\n\n<pre><code>[5 5 5]\n</code></pre>\n\n<p>how can I pass it to a var in a way that it stays 555? just like this.</p>\n\n<pre><code>n:= 555 \n</code></pre>\n"}, {"tags": ["go", "constants"], "comments": [{"owner": {"reputation": 862, "user_id": 2678118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8c9089c857968dac40943476ff8cbf7?s=128&d=identicon&r=PG", "display_name": "Evert Heylen", "link": "https://stackoverflow.com/users/2678118/evert-heylen"}, "edited": false, "score": 2, "creation_date": 1439815682, "post_id": 32050310, "comment_id": 52000867, "body": "I have thought about your question, but I&#39;m afraid you are either asking for the impossible (types aren&#39;t sets, no sets in Go) or the question isn&#39;t clear enough. What are you actually trying to achieve?"}], "answers": [{"comments": [{"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1439819562, "post_id": 32050848, "comment_id": 52003502, "body": "If you&#39;re using <code>minComparison</code> and <code>maxComparision</code> as actual values, they also increment <code>iota</code>, and then you should rather use <code>&lt;</code> and <code>&gt;</code> only instead of <code>&lt;=</code> and <code>&gt;=</code>."}, {"owner": {"reputation": 249309, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "reply_to_user": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1439819704, "post_id": 32050848, "comment_id": 52003592, "body": "I debated that and went back and forth, since they&#39;re technically invalid. I left it as &lt;= in case it were later changed to &quot;minLogic = AND&quot;. That way the undefined case could become defined (and the values could be recovered) without creating a subtle bug."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 1, "creation_date": 1439820244, "post_id": 32050848, "comment_id": 52003957, "body": "Then I would rather use <code>EQUAL Op = iota - 1</code> and <code>maxComparison Op = iota - 2</code>, and <code>AND Op = iota - 3</code> and <code>maxLogic = iota - 4</code>. It may be less readable but &quot;more&quot; correct."}, {"owner": {"reputation": 41, "user_id": 3322014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00192c4b33825c570bc2c913cf67f7e7?s=128&d=identicon&r=PG&f=1", "display_name": "pritz", "link": "https://stackoverflow.com/users/3322014/pritz"}, "edited": false, "score": 0, "creation_date": 1439831834, "post_id": 32050848, "comment_id": 52011092, "body": "Right now, even I have them together as a single set of constants (Op). But with that, when ever I create compExpr or  logExpr, I gotta check for op.IsCompare() and op.IsLogic() respectively. Is there a way where I can declare the type of op in filterExpr as either LogOp or CompOp ??"}, {"owner": {"reputation": 41, "user_id": 3322014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00192c4b33825c570bc2c913cf67f7e7?s=128&d=identicon&r=PG&f=1", "display_name": "pritz", "link": "https://stackoverflow.com/users/3322014/pritz"}, "reply_to_user": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1439832171, "post_id": 32050848, "comment_id": 52011293, "body": "@icza <code>EQUAL Op = iota - 1</code> , <code>maxComparison Op = iota - 2</code> , <code>AND Op = iota - 3</code> and <code>maxLogic = iota - 4</code> ..  Can yu brief on how would these help ?"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 41, "user_id": 3322014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00192c4b33825c570bc2c913cf67f7e7?s=128&d=identicon&r=PG&f=1", "display_name": "pritz", "link": "https://stackoverflow.com/users/3322014/pritz"}, "edited": false, "score": 0, "creation_date": 1439850289, "post_id": 32050848, "comment_id": 52020025, "body": "@pritz It&#39;s just an alternative definition of <code>minXXX</code> and <code>maxXXX</code> constants."}], "tags": [], "owner": {"reputation": 249309, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "is_accepted": true, "score": 6, "last_activity_date": 1439834643, "last_edit_date": 1439834643, "creation_date": 1439815712, "answer_id": 32050848, "question_id": 32050310, "link": "https://stackoverflow.com/questions/32050310/extending-constants-in-golang/32050848#32050848", "title": "Extending constants in Golang", "body": "<p><code>CompOp</code> and <code>LogOp</code> are not sets of the same type. They cannot be combined this way. If they could, they would conflict anyway, since both <code>EQUAL</code> and <code>AND</code> are both 0 (since they're the first <code>iota</code> in their blocks). You will need another design.</p>\n\n<p>The most common design would be to combine all the operators into a single <code>const</code> block, and then provide functions like <code>IsCompare()</code> or <code>IsLogic()</code> to distinguish them if that's necessary. See <code>os.IsExist()</code> and <code>os.IsPermission()</code> as a template.</p>\n\n<p>Here's one way that I might implement it. It wastes a few values for min/max, but it keeps the code very simple to read and easy to update.</p>\n\n<p><a href=\"http://play.golang.org/p/jH14oETyDr\" rel=\"nofollow\">Playground</a></p>\n\n<pre><code>const (\n    // Comparison operators\n    minComparison Op = iota\n    EQUAL\n    NOT_EQUAL\n    maxComparison\n\n    // Logic operators\n    minLogic\n    AND\n    OR\n    maxLogic\n)\n\nfunc IsComparsion(op Op) bool {\n    return op &gt;= minComparison &amp;&amp; op &lt;= maxComparison\n}\n\nfunc IsLogic(op Op) bool {\n    return op &gt;= minLogic &amp;&amp; op &lt;= maxLogic\n}\n</code></pre>\n\n<hr>\n\n<p>But can you treat the different kinds of ops as types? Yeah, you can, and maybe it'll work better for you. For example, consider (<a href=\"http://play.golang.org/p/q5x8AjE_mS\" rel=\"nofollow\">playground</a>):</p>\n\n<pre><code>type Op interface {\n    isOp()\n}\n\ntype CompOp byte\n\nconst (\n    EQUAL CompOp = iota\n    NOT_EQUAL\n)\n\nfunc (op CompOp) isOp() {}\n\ntype LogOp byte\n\nconst (\n    AND LogOp = iota\n    OR\n)\n\nfunc (op LogOp) isOp() {}\n\nfunc doOpThingBasedOnValue(op Op) {\n    switch op {\n    case EQUAL:\n        println(\"passed equal\")\n    case AND:\n        println(\"passed and\")\n    }\n}\n\nfunc doOpThingBasedOnType(op Op) {\n    switch op.(type) {\n    case CompOp:\n        println(\"passed a comp\")\n    case LogOp:\n        println(\"passed a logic\")\n    }\n}\n</code></pre>\n\n<p>So maybe that's even closer to what you're thinking of. Note that even though both <code>AND</code> and <code>EQUAL</code> are \"0\", as an interface, they are distinguishable, so we can switch on them like you'd want. Go is cool that way.</p>\n"}], "owner": {"reputation": 41, "user_id": 3322014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00192c4b33825c570bc2c913cf67f7e7?s=128&d=identicon&r=PG&f=1", "display_name": "pritz", "link": "https://stackoverflow.com/users/3322014/pritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 32050848, "answer_count": 1, "score": 1, "last_activity_date": 1439834643, "creation_date": 1439814149, "last_edit_date": 1439831535, "question_id": 32050310, "link": "https://stackoverflow.com/questions/32050310/extending-constants-in-golang", "title": "Extending constants in Golang", "body": "<p>Here's my requirement: I have 2 sets of constants. I want to form a third set which is nothing but a union of the above 2 sets. How do I achieve that? </p>\n\n<pre><code>type CompOp byte\n\nconst (\n    EQUAL CompOp = iota\n    NOT_EQUAL\n)\n\ntype LogOp byte\n\nconst (\n    AND LogOp = iota\n    OR\n)\n</code></pre>\n\n<p>I want a third set, say Operator </p>\n\n<pre><code>type Op {CompOp, LogOp}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>var Op = CompOp + LogOp\n</code></pre>\n\n<p>But neither of the above 2 ways work. How do I achieve this requirement?</p>\n\n<p>The above is important to me I'm trying to achieve this :</p>\n\n<pre><code>type logExpr struct { \n    expr Expression\n    op LogOp \n}  \n\ntype compExpr struct { \n    expr Expression\n    op CompOp \n} \n\ntype filterExpr struct { \n    expr Expression\n    op Op \n}\n</code></pre>\n"}, {"tags": ["unit-testing", "go"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1439804121, "post_id": 32046192, "comment_id": 51993876, "body": "I think you will have to unroll the invocation yourself by running go test on each package and stopping the loop. I doubt there is a flag to do what you want."}], "answers": [{"comments": [{"owner": {"reputation": 1125, "user_id": 4224724, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XMleNi8A3cE/AAAAAAAAAAI/AAAAAAAACzU/_LZ3Rgct8Xk/photo.jpg?sz=128", "display_name": "Danver Braganza", "link": "https://stackoverflow.com/users/4224724/danver-braganza"}, "edited": false, "score": 4, "creation_date": 1439819323, "post_id": 32047481, "comment_id": 52003331, "body": "Your second suggestion still runs all the tests, but just doesn&#39;t print them out."}, {"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "reply_to_user": {"reputation": 1125, "user_id": 4224724, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XMleNi8A3cE/AAAAAAAAAAI/AAAAAAAACzU/_LZ3Rgct8Xk/photo.jpg?sz=128", "display_name": "Danver Braganza", "link": "https://stackoverflow.com/users/4224724/danver-braganza"}, "edited": false, "score": 1, "creation_date": 1439823910, "post_id": 32047481, "comment_id": 52006407, "body": "To be honest I haven&#39;t tested it with <code>go test</code> but if it is implemented in the same way as other Unix utilities it should be terminated via SIGPIPE on the first occurence of FAILED."}, {"owner": {"reputation": 4530, "user_id": 2361497, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ce788c4eb1189394cfe46a6e40a4dd11?s=128&d=identicon&r=PG", "display_name": "Vitaly Isaev", "link": "https://stackoverflow.com/users/2361497/vitaly-isaev"}, "edited": false, "score": 0, "creation_date": 1475355714, "post_id": 32047481, "comment_id": 66914184, "body": "@kostya I have never heared about this tehnique of IPC... thanx"}], "tags": [], "owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "is_accepted": false, "score": -4, "last_activity_date": 1439805327, "creation_date": 1439805327, "answer_id": 32047481, "question_id": 32046192, "link": "https://stackoverflow.com/questions/32046192/stop-on-first-test-failure-with-go-test/32047481#32047481", "title": "Stop on first test failure with `go test`", "body": "<p>To speed-up the build phase you can run</p>\n\n<pre><code>go test -i several/packages/...\n</code></pre>\n\n<p>before the tests to build and install packages that are dependencies of the test.</p>\n\n<p>To stop after the first failure you can use something like</p>\n\n<pre><code>go test several/packages/... | grep FAILED | head -n 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2041, "user_id": 1333724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acc5cea42dca926af89f94eb56fbbdbb?s=128&d=identicon&r=PG", "display_name": "maxm", "link": "https://stackoverflow.com/users/1333724/maxm"}, "edited": false, "score": 1, "creation_date": 1577727275, "post_id": 46433832, "comment_id": 105238995, "body": "explaining the downvotes: there are better ways to propagate failures in go tests, like <code>t.Fatal()</code>. With <code>t.Fatal</code> test execution will stop immediately and you can pair it with <code>-failfast</code> to actually stop all tests"}, {"owner": {"reputation": 2041, "user_id": 1333724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acc5cea42dca926af89f94eb56fbbdbb?s=128&d=identicon&r=PG", "display_name": "maxm", "link": "https://stackoverflow.com/users/1333724/maxm"}, "edited": false, "score": 0, "creation_date": 1577727322, "post_id": 46433832, "comment_id": 105239015, "body": "also if you <code>os.Exit(1)</code> when testing with something like <code>go test .&#47;...</code> I think you&#39;ll only stop one process not the entire test execution. So there are really very few times you actually want to use <code>os.Exit(1)</code> in a test"}], "tags": [], "owner": {"reputation": 1686, "user_id": 1149097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-CgNHgOPLb4w/AAAAAAAAAAI/AAAAAAAACNM/K54VtcEdyik/photo.jpg?sz=128", "display_name": "ryboe", "link": "https://stackoverflow.com/users/1149097/ryboe"}, "is_accepted": false, "score": -5, "last_activity_date": 1506452056, "creation_date": 1506452056, "answer_id": 46433832, "question_id": 32046192, "link": "https://stackoverflow.com/questions/32046192/stop-on-first-test-failure-with-go-test/46433832#46433832", "title": "Stop on first test failure with `go test`", "body": "<p>Use <a href=\"https://golang.org/pkg/os/#Exit\" rel=\"nofollow noreferrer\">os.Exit(1)</a>.</p>\n\n<pre><code>func TestFoo(t *testing.T) {\n    if err := foo(); err != nil {\n        t.Errorf(\"foo failed: %v\", err) // Mark the test as failed.\n        os.Exit(1) // Cancel any further tests.\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4336, "user_id": 819651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b3b2801b397b45b57b784c83b6274e22?s=128&d=identicon&r=PG", "display_name": "Lu&#237;s Soares", "link": "https://stackoverflow.com/users/819651/lu%c3%ads-soares"}, "edited": false, "score": 0, "creation_date": 1580202669, "post_id": 51996283, "comment_id": 106010790, "body": "nothing happens in my case. using <code>go version go1.12.1 darwin&#47;amd64</code> running with <code>go test -failfast .&#47;...</code>"}], "tags": [], "owner": {"reputation": 486, "user_id": 440316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d461f9218bdc42347fb23a080e713?s=128&d=identicon&r=PG", "display_name": "gao", "link": "https://stackoverflow.com/users/440316/gao"}, "is_accepted": true, "score": 35, "last_activity_date": 1618013673, "last_edit_date": 1618013673, "creation_date": 1535073943, "answer_id": 51996283, "question_id": 32046192, "link": "https://stackoverflow.com/questions/32046192/stop-on-first-test-failure-with-go-test/51996283#51996283", "title": "Stop on first test failure with `go test`", "body": "<p>Go 1.10 add a new flag <code>failfast</code> to go test:</p>\n<p>The new go test <code>-failfast</code> flag disables running additional tests after any test fails. Note that tests running in parallel with the failing test are allowed to complete.</p>\n<p><a href=\"https://golang.org/doc/go1.10\" rel=\"nofollow noreferrer\">https://golang.org/doc/go1.10</a></p>\n<p>However, note this does not work <em>across</em> packages: <a href=\"https://github.com/golang/go/issues/33038\" rel=\"nofollow noreferrer\">https://github.com/golang/go/issues/33038</a></p>\n<p>Here's a workaround:</p>\n<pre><code>for s in $(go list ./...); do if ! go test -failfast -v -p 1 $s; then break; fi; done\n</code></pre>\n"}], "owner": {"reputation": 99684, "user_id": 149482, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cb6a2b464b7190c48e4f148a0e51d13a?s=128&d=identicon&r=PG", "display_name": "Matt Joiner", "link": "https://stackoverflow.com/users/149482/matt-joiner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11122, "favorite_count": 1, "accepted_answer_id": 51996283, "answer_count": 3, "score": 30, "last_activity_date": 1618013673, "creation_date": 1439801314, "question_id": 32046192, "link": "https://stackoverflow.com/questions/32046192/stop-on-first-test-failure-with-go-test", "title": "Stop on first test failure with `go test`", "body": "<p>How do I have <code>go test several/packages/...</code> stop after the first test failure?</p>\n\n<p>It takes some time to build and execute the rest of the tests, despite already having something to work with.</p>\n"}, {"tags": ["go", "split"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 6, "creation_date": 1439787162, "post_id": 32042989, "comment_id": 51986083, "body": "What is a &quot;real line break&quot;? When is a &quot;\\n&quot; an &quot;unreal&quot; line break?"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 6, "creation_date": 1439788100, "post_id": 32042989, "comment_id": 51986303, "body": "Depending on the operating system (and/or file format) a line break is either <code>\\n</code>, or it&#39;s <code>\\r\\n</code>, or it&#39;s <code>\\r</code>. There is nothing to &quot;differentiate&quot;; that byte (or byte pair in the case of <code>\\r\\n</code>) <i>is</i> the line break. If instead you happen to mean the &quot;\\&quot; character followed by &quot;n&quot;, you could write that in Go as <code>&quot;\\\\n&quot;</code> or a backquoted literal string (which I can&#39;t figure out how to show properly in SO&#39;s markdown)."}], "answers": [{"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 20, "last_activity_date": 1439864384, "creation_date": 1439864384, "answer_id": 32062543, "question_id": 32042989, "link": "https://stackoverflow.com/questions/32042989/go-lang-differentiate-n-and-line-break/32062543#32062543", "title": "Go lang differentiate &quot;\\n&quot; and line break", "body": "<p>There is no distinction between a \"real\" and an \"unreal\" line break.</p>\n\n<p>If you're using a Unix-like system, the end of a line in a text file is denoted by the LF or <code>'\\n'</code> character. You cannot have a <code>'\\n'</code> character in the middle of a line.</p>\n\n<p>A string in memory can contain as many <code>'\\n'</code> characters as you like. The string <code>\"foo\\nbar\\n\"</code>, when written to a text file, will create two lines, <code>\"foo\"</code> and <code>\"bar\"</code>.</p>\n\n<p>There is no effective difference between</p>\n\n<pre><code>fmt.Println(\"foo\")\nfmt.Println(\"bar\")\n</code></pre>\n\n<p>and</p>\n\n<pre><code>fmt.Printf(\"foo\\nbar\\n\")\n</code></pre>\n\n<p>Both print the same sequence of 2 lines, as does this:</p>\n\n<pre><code>fmt.Println(\"foo\\nbar\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 276, "user_id": 903870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUi8B.jpg?s=128&g=1", "display_name": "deoren", "link": "https://stackoverflow.com/users/903870/deoren"}, "edited": false, "score": 0, "creation_date": 1585837914, "post_id": 42793954, "comment_id": 107908901, "body": "I wanted something I could use to convert all EOL occurrences to <code>&lt;br&gt;</code> to format messages for submission to Microsoft Teams (via webhook request). Your answer helped me solve the issue.  In case it is helpful, a modified/working function from a project I use is provided via Go Playground link below. I can&#39;t speak to its correctness as I&#39;ve not fully tested it yet.  <a href=\"https://play.golang.org/p/LQU5rO1I7Bw\" rel=\"nofollow noreferrer\">play.golang.org/p/LQU5rO1I7Bw</a>"}], "tags": [], "owner": {"reputation": 585, "user_id": 514863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c147458a09b0b4c8fe7d6eebff94ec7f?s=128&d=identicon&r=PG", "display_name": "Mal Curtis", "link": "https://stackoverflow.com/users/514863/mal-curtis"}, "is_accepted": false, "score": 25, "last_activity_date": 1489516602, "creation_date": 1489516602, "answer_id": 42793954, "question_id": 32042989, "link": "https://stackoverflow.com/questions/32042989/go-lang-differentiate-n-and-line-break/42793954#42793954", "title": "Go lang differentiate &quot;\\n&quot; and line break", "body": "<p>It's possible that your \"\\n\" is actually the escaped version of a line break character. You can replace these with real line breaks by searching for the escaped version and replacing with the non escaped version:</p>\n\n<p><code>strings.Replace(sourceStr, `\\n`, \"\\n\", -1)</code></p>\n\n<p>Since string literals inside backticks can be written over multiple lines, Go escapes any line break characters it sees.</p>\n"}], "owner": {"reputation": 461, "user_id": 2619657, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9c2f7569cfae6b5d8f115a9e137af216?s=128&d=identicon&r=PG", "display_name": "Rain Lee", "link": "https://stackoverflow.com/users/2619657/rain-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61850, "favorite_count": 2, "accepted_answer_id": 32062543, "answer_count": 2, "score": 5, "last_activity_date": 1489516602, "creation_date": 1439787016, "last_edit_date": 1473009915, "question_id": 32042989, "link": "https://stackoverflow.com/questions/32042989/go-lang-differentiate-n-and-line-break", "title": "Go lang differentiate &quot;\\n&quot; and line break", "body": "<p>I am trying read certain string output generated by linux command by the following code: </p>\n\n<pre><code>out, err := exec.Command(\"sh\", \"-c\", cmd).Output()\n</code></pre>\n\n<p>The above out is of <code>[]byte</code> type, how can I differentiate the \"\\n\" character contained in line content with the real line break? I tried     </p>\n\n<pre><code>strings.Split(output, \"\\n\")\n</code></pre>\n\n<p>and</p>\n\n<pre><code>bufio.NewScanner(strings.NewReader(output))\n</code></pre>\n\n<p>but they both split the whole string buffer whenever seeing a \"\\n\" character.</p>\n\n<p>OK, to clarify, an \"unreal\" break is a \"\\n\" character contained in a string as follows, \n<code>\nPrint first result: \"123;\\n234;\\n\"\nPrint second result: \"456;\\n\"\n</code></p>\n\n<p>The whole output is one big multi-line string, it may also contain some other quoted strings, and I am processing the whole string output in my go program, but I can't control the command output and add a back slash before the \"\\n\" character.</p>\n\n<p>Further clarify: I meant to process byte sequence which contains string of strings, and want to preserve the \"<code>\\n</code>\" contained in the inner string and use the the outer layer \"<code>\\n</code>\" to break lines. So for the following byte sequence:</p>\n\n<pre><code>First line: \"test1\"\nSecond line: \"123;\\n234;\\n345;\"\nThird line: \"456;\\n567;\"\nFourth line: \"test4\"\n</code></pre>\n\n<p>I want to get 3 lines when processing the whole sequence, instead of getting 7 total lines. It's a old project, but I remember I can use Python to directly get 3 lines using syntax like \"<code>for line in f</code>\", and print the content of second inner string instead of rendering it.</p>\n"}, {"tags": ["json", "go"], "answers": [{"comments": [{"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 1, "creation_date": 1439815728, "post_id": 32043015, "comment_id": 52000901, "body": "Thank you, I originally had just this but I didn&#39;t realize I had to call it by my struct name kind of thing so I was using the Json names I was doing <code>data.appnews</code> instead of data.AppNews` but regardless you helped me realize that. Thanks!"}], "tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": true, "score": 2, "last_activity_date": 1439787198, "creation_date": 1439787198, "answer_id": 32043015, "question_id": 32042767, "link": "https://stackoverflow.com/questions/32042767/with-go-golang-how-can-i-unmarshal-data-into-a-struct-and-then-call-specific/32043015#32043015", "title": "With Go (golang) how can I Unmarshal data into a struct, and then call specific fields from the struct?", "body": "<p>The data fits the struct just fine, no need for <code>map[string]GetAppNews</code>.</p>\n\n<p><code>type JsonResponse map[string]GetAppNews</code> should just be <code>GetAppNews</code>.</p>\n\n<p><a href=\"http://play.golang.org/p/wESFM5y70z\" rel=\"nofollow\"><kbd>playground</kbd></a></p>\n"}], "owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 32043015, "answer_count": 1, "score": 0, "last_activity_date": 1439828038, "creation_date": 1439785483, "last_edit_date": 1439828038, "question_id": 32042767, "link": "https://stackoverflow.com/questions/32042767/with-go-golang-how-can-i-unmarshal-data-into-a-struct-and-then-call-specific", "title": "With Go (golang) how can I Unmarshal data into a struct, and then call specific fields from the struct?", "body": "<p>I'm trying to do an API request to get some information from steams public API (this is mainly for learning Go and just learning how to deal with Json / API requests) I have gotten this code so far:</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"io/ioutil\"\n    \"net/http\"\n    \"strconv\"\n)\n\ntype SteamAPI struct {\n    APIKey string\n}\n\ntype GetAppNews struct {\n    AppNews struct {\n        AppId     int `json:\"appid\"`\n        NewsItems []struct {\n            Gid           int    `json:\"gid\"`\n            Title         string `json:\"title\"`\n            Url           string `json:\"url\"`\n            IsExternalUrl bool   `json:\"is_external_url\"`\n            Author        string `json:\"author\"`\n            Contents      string `json:\"contents\"`\n            Feedlabel     string `json:\"feedlabel\"`\n            Date          int    `json:\"date\"`\n        } `json:\"newsitems\"`\n    } `json:\"appnews\"`\n}\n\ntype JsonResponse map[string]GetAppNews\n\nfunc (s SteamAPI) GetNewsForApp(appid, count, maxlength int) error {\n    sAppid := strconv.Itoa(appid)\n    sCount := strconv.Itoa(count)\n    sMaxlength := strconv.Itoa(maxlength)\n\n    resp, err := http.Get(\"http://api.steampowered.com/ISteamNews/GetNewsForApp/v0002/?appid=\" + sAppid + \"&amp;count=\" + sCount + \"&amp;maxlength=\" + sMaxlength + \"&amp;format=json\")\n    if err != nil {\n        return err\n    }\n\n    defer resp.Body.Close()\n\n    body, err := ioutil.ReadAll(resp.Body)\n    if err != nil {\n        return err\n    }\n\n    var jsonReturn JsonResponse\n\n    json.Unmarshal(body, &amp;jsonReturn)\n\n    fmt.Println(jsonReturn)\n\n    return nil\n\n}\n\nfunc main() {\n        Tester := SteamAPI{\"\"}\n\n        Tester.GetNewsForApp(440, 3, 300)\n}\n</code></pre>\n\n<p>Things seem to work, alright, I guess but its not formatting it the way I would expect it to Unmarshal. It prints out like this: </p>\n\n<p><code>map[appnews:{{0 []}}]</code></p>\n\n<p>You can click <a href=\"http://api.steampowered.com/ISteamNews/GetNewsForApp/v0002/?appid=440&amp;count=3&amp;maxlength=300&amp;format=json\" rel=\"nofollow\">here</a> to see exactly what the format of the JSON response looks like, if anybody could tell me what I have done wrong with my struct, in the end I expect to be able to go something like:</p>\n\n<p><code>fmt.Println(blah[\"appnews\"][\"appid\"])</code> and it would return <code>440</code>.</p>\n\n<p>Thats all I really got to go off of, if you need anymore specific information let me know! Thanks for the help!</p>\n"}, {"tags": ["opengl", "graphics", "go", "opengl-es"], "comments": [{"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1439788885, "post_id": 32041914, "comment_id": 51986494, "body": "added an answer with few hints. what about some example image and a bit info about scene ... how far are your objects from camera and each other..."}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 1, "creation_date": 1439848686, "post_id": 32041914, "comment_id": 52019516, "body": "Where&#39;s the fighting? If this were depth fighting, you&#39;d see strips of one of those sprites intersecting with strips from the other and would not be able to distinguish a clear image. They&#39;d literally be fighting each other for the right to be drawn ;)"}], "answers": [{"comments": [{"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1439790933, "post_id": 32043081, "comment_id": 51987170, "body": "How can it be z-fighting if the depth test is disabled?"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "reply_to_user": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1439791040, "post_id": 32043081, "comment_id": 51987202, "body": "@RetoKoradi good point and that is why I added the blend stuff ... but that does not mean that the OP does not have problems with Z-fighting too (while enabled)"}, {"owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 0, "creation_date": 1439809712, "post_id": 32043081, "comment_id": 51997113, "body": "Added some images for clarification.  So should depth test be enabled even if this is only a 2d scene? When i enable depth test I get &quot;blocks&quot; surrounding my images and does not seem to help."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "reply_to_user": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 0, "creation_date": 1439810153, "post_id": 32043081, "comment_id": 51997399, "body": "@efel if I get it right you can solve this <code>flickering</code> by enabling Depth test and adding 3th coordinate (<code>z</code>) and assign different <code>z</code> to each object (for example z=1.0,1.01,1.02,1.03,...). as you do not use perspective the scene stay unchanged ... unless the flickering is not caused by wrong primitive geometry passing or something like that ..."}], "tags": [], "owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "is_accepted": false, "score": 1, "last_activity_date": 1486394875, "last_edit_date": 1495540409, "creation_date": 1439787717, "answer_id": 32043081, "question_id": 32041914, "link": "https://stackoverflow.com/questions/32041914/opengl-3-3-z-fighting-ortho-2d-view/32043081#32043081", "title": "opengl 3.3 z-fighting ortho 2d view", "body": "<ol>\n<li><p><strong>This could be Z fighting</strong></p>\n\n<p><strong>the usual causes are:</strong></p>\n\n<ul>\n<li>fragments are at the same Z-coordinate or closer then accuracy of Z-coordinate</li>\n<li>fragments are too far from <strong>perspective</strong> camera with perspective projection the more far you are from <strong>Z near</strong> the less accuracy</li>\n</ul>\n\n<p><strong>some ways to fix this:</strong></p>\n\n<ul>\n<li>change size/position of overlapped surfaces slightly</li>\n<li>use more bits for Z-Buffer (Depth)</li>\n<li>use linear or logarithmic Z-buffer</li>\n<li>increase <strong>Z-near</strong> or decrease <strong>Z-far</strong> or both for perspective projection you can <a href=\"https://stackoverflow.com/a/28020934/2521214\">combine more frustrums</a> to get high definition Z range</li>\n<li>sometimes helps to use <code>glDepthFunc(GL_LEQUAL)</code></li>\n</ul></li>\n<li><p><strong>This could be an issue with Blending.</strong></p>\n\n<p>as you use Blending you need to render a bit differently. To render transparency correctly you must Z-sort the scene otherwise artifacts can occur. If you got too much dense geometry of transparent objects or objects near them (many polygon edges near). In addition Z-fighting creates a magnitude higher artifacts with blending.</p>\n\n<p><strong>some ways to fix this:</strong></p>\n\n<ol>\n<li><p>Z sorting can be partially done by multi pass rendering + Depth test + switching front face</p>\n\n<p>so first render all solids and then render Z-sorted transparent objects with front face set to the side not facing camera. Then render the same objects with front face set for side facing camera. You need to use depth test for this!!!. This way you do not need to sort all polygons of scene just the transparent objects. Results are not 100% correct for complex transparent geometries but the results are usually good enough (especially for dynamic scenes). This is how the output from this looks like</p>\n\n<p><img src=\"https://i.stack.imgur.com/ppjoJ.png\" alt=\"example\"></p>\n\n<p>it is a glass cup a bit messed up visually by selected blending function for this case because darker pixels means 2 layers of glass on purpose it is not a bug. Therefore the opening looks like the front/back faces are swapped</p></li>\n<li><p>use less dense geometry for transparent objects</p></li>\n<li>get rid of Z-fighting issues</li>\n</ol></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 0, "creation_date": 1439835910, "post_id": 32050333, "comment_id": 52013311, "body": "I think this is the answer. Will need to test this when I get home.  But since I&#39;m storing everything inside a hash and iterating through it, the iteration is in random order. I remember reading somewhere that Golang hash maps are now randomized when iterating. I will mark this answer tonight. Thanks !"}], "tags": [], "owner": {"reputation": 6020, "user_id": 4052193, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6062c93ce987aa90ac59d06e758f03b6?s=128&d=identicon&r=PG&f=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/4052193/columbo"}, "is_accepted": true, "score": 2, "last_activity_date": 1439814220, "creation_date": 1439814220, "answer_id": 32050333, "question_id": 32041914, "link": "https://stackoverflow.com/questions/32041914/opengl-3-3-z-fighting-ortho-2d-view/32050333#32050333", "title": "opengl 3.3 z-fighting ortho 2d view", "body": "<p>It definitely isn't depth fighting if you have depth testing disabled as shown in the code snippet.</p>\n\n<p>\"I package all vertices, uvs(sprite atlas), translation, rotation, etc in one big package sent to vertex shader.\" - You need to look into the order that you add your sprites. Perhaps it's inconsistent for some reason.</p>\n"}], "owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 1, "accepted_answer_id": 32050333, "answer_count": 2, "score": 0, "last_activity_date": 1486394875, "creation_date": 1439777916, "last_edit_date": 1439809611, "question_id": 32041914, "link": "https://stackoverflow.com/questions/32041914/opengl-3-3-z-fighting-ortho-2d-view", "title": "opengl 3.3 z-fighting ortho 2d view", "body": "<p>I'm having some issues with z fighting while drawing simple 2d textured quads using opengl. The symptoms are both objects moving at the same speed and one on top of another but periodically one can see through the other and vice versa - sort of like a \"flickering\". I assume this is indeed z fighting.  </p>\n\n<p>I have turned off Depth Testing and have the following as well:</p>\n\n<pre><code>gl.Disable(gl.DEPTH_TEST)\ngl.DepthFunc(gl.LESS)\ngl.Enable(gl.BLEND)\ngl.BlendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA)\n</code></pre>\n\n<p>My view and ortho matrices are as follows:</p>\n\n<p>I have tried to set the near and far distances much greater ( like range of 50000 but still no help)</p>\n\n<pre><code>Projection := mathgl.Ortho(0.0, float32(width), float32(height), 0.0, -5.0, 5.0)\n\n\n\n\nView := mathgl.LookAt(0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0)\n</code></pre>\n\n<p>The only difference with my opengl process is that instead of a drawelements call for each individual object, I package all vertices, uvs(sprite atlas), translation, rotation, etc in one big package sent to vertex shader.</p>\n\n<p>Does anyone have remedies for 2d z fighting?</p>\n\n<p>edit:</p>\n\n<p>i'm adding some pictures to further describe the scenario:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Z22vB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z22vB.png\" alt=\"img1\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/K6Uw4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K6Uw4.png\" alt=\"img2\"></a></p>\n\n<p>These images are taken a few seconds apart from each other. They are simply texture moving from left to right. As they move; you see from the image, that one sprite over-lapse the other and vice versa back and forth etc very fast.</p>\n\n<p>Also note that my images (sprites) are pngs that have a transparent background to them..</p>\n"}, {"tags": ["arrays", "dictionary", "go", "slice"], "answers": [{"comments": [{"owner": {"reputation": 1079, "user_id": 3591723, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/226c74589745a877b4dbd474fb66951e?s=128&d=identicon&r=PG&f=1", "display_name": "user3591723", "link": "https://stackoverflow.com/users/3591723/user3591723"}, "edited": false, "score": 1, "creation_date": 1439797565, "post_id": 32040525, "comment_id": 51990108, "body": "Just to add a little bit to this answer if you know what the data structure is going to be beforehand it is even better/more idiomatic to use a <code>struct</code> combined with <a href=\"http://golang.org/pkg/encoding/json/\" rel=\"nofollow noreferrer\"><code>encoding&#47;json</code></a> package to deal with json in Go"}], "tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": false, "score": 2, "last_activity_date": 1439763875, "creation_date": 1439763875, "answer_id": 32040525, "question_id": 32040488, "link": "https://stackoverflow.com/questions/32040488/appending-non-slice-to-map-of-slices/32040525#32040525", "title": "appending non slice to map of slices", "body": "<ol>\n<li>You need to use <code>map[string]interface{}</code> instead.</li>\n<li>Also you don't need to copy your slices.</li>\n</ol>\n\n<p>Example with <code>map[string]interface{}</code>:</p>\n\n<pre><code>name := \"John\"\nid := \"1234\"\nl, d := []string{\"123\", \"456\"}, []string{\"789\", \"987\"}\nc := map[string]interface{}{\n    \"d\":    d,\n    \"l\":    l,\n    \"test\": name,\n    \"id\":   id,\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/Ke1lWpb6y3\" rel=\"nofollow\"><kbd>playground</kbd></a></p>\n"}], "owner": {"reputation": 305, "user_id": 3342213, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/787dca87f677ecd27581651d9f0443c0?s=128&d=identicon&r=PG&f=1", "display_name": "KNgu", "link": "https://stackoverflow.com/users/3342213/kngu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439763875, "creation_date": 1439763497, "question_id": 32040488, "link": "https://stackoverflow.com/questions/32040488/appending-non-slice-to-map-of-slices", "title": "appending non slice to map of slices", "body": "<p>My current code is this:</p>\n\n<pre><code>name := \"John\"\nid := \"1234\"\nc := make(map[string][]string)\n\nc[\"d\"] = make([]string, len(d))\nc[\"l\"] = make([]string, len(l))\n\ncopy(c[\"d\"], d)\ncopy(c[\"l\"], l)\nc[\"test\"] = name\nc[\"id\"] = id\n</code></pre>\n\n<p>Assuming d &amp; l are both []string. Go does not let me do this. Is there a way where I would be able to achieve a JSON like this: </p>\n\n<p>{\n    \"name\": \"John\",\n    \"id\": \"1234\",\n    \"d\": [\n        123,\n        456\n    ],\n    \"l\": [\n        123,\n        456\n    ]\n}</p>\n"}, {"tags": ["google-app-engine", "go", "polymer"], "comments": [{"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1439806841, "post_id": 32040244, "comment_id": 51995526, "body": "How do you stop your local appengine server? Do you explicitly stop it at all (before the restart)?"}, {"owner": {"reputation": 873, "user_id": 307862, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/722274c13fd9a66e3d1fc70dca23c0a7?s=128&d=identicon&r=PG", "display_name": "anthony", "link": "https://stackoverflow.com/users/307862/anthony"}, "reply_to_user": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1439814610, "post_id": 32040244, "comment_id": 52000184, "body": "I explicitly stop it with <code>Control + C</code>. I&#39;m getting the <code>Apply all pending transactions and saving the datastore</code> message."}, {"owner": {"reputation": 873, "user_id": 307862, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/722274c13fd9a66e3d1fc70dca23c0a7?s=128&d=identicon&r=PG", "display_name": "anthony", "link": "https://stackoverflow.com/users/307862/anthony"}, "reply_to_user": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1439819909, "post_id": 32040244, "comment_id": 52003737, "body": "The datastore is being saved to the same location every time, and it&#39;s definitely being deleted on system shutdown (the data persists rebooting the goapp server). My only goal is to change the datastore location."}], "answers": [{"comments": [{"owner": {"reputation": 873, "user_id": 307862, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/722274c13fd9a66e3d1fc70dca23c0a7?s=128&d=identicon&r=PG", "display_name": "anthony", "link": "https://stackoverflow.com/users/307862/anthony"}, "edited": false, "score": 0, "creation_date": 1439827657, "post_id": 32053119, "comment_id": 52008724, "body": "I&#39;ve tried this already. Look at my post after <i>Edit</i>. I specify the datastore, but it complains about not finding my <code>github.com&#47;gorilla&#47;mux</code> package. In fact, if I start commenting out my imports, it can&#39;t find any of them. They are all located in <code>go_appengine&#47;gopath&#47;src</code>, which is where they should be. Just tried to build on Windows 7 with <code>dev_appserver.py</code>, and I&#39;m getting the same problem."}, {"owner": {"reputation": 873, "user_id": 307862, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/722274c13fd9a66e3d1fc70dca23c0a7?s=128&d=identicon&r=PG", "display_name": "anthony", "link": "https://stackoverflow.com/users/307862/anthony"}, "edited": false, "score": 0, "creation_date": 1439827835, "post_id": 32053119, "comment_id": 52008828, "body": "<code>goapp serve</code> builds everything just fine, but there aren&#39;t any flags to specify the datastore location. Somehow <code>dev_appserver.py</code> can&#39;t find packages in <code>gopath&#47;src</code>. Which is puzzling since goapp is just a wrapper around it."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 873, "user_id": 307862, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/722274c13fd9a66e3d1fc70dca23c0a7?s=128&d=identicon&r=PG", "display_name": "anthony", "link": "https://stackoverflow.com/users/307862/anthony"}, "edited": false, "score": 0, "creation_date": 1439830055, "post_id": 32053119, "comment_id": 52010162, "body": "@anthony Your edit shows that you provided the db file and the <code>.yaml</code> <i>files</i>, not the db file and the app <i>folder</i>. Please try that."}, {"owner": {"reputation": 873, "user_id": 307862, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/722274c13fd9a66e3d1fc70dca23c0a7?s=128&d=identicon&r=PG", "display_name": "anthony", "link": "https://stackoverflow.com/users/307862/anthony"}, "edited": false, "score": 0, "creation_date": 1439832126, "post_id": 32053119, "comment_id": 52011265, "body": "Ah, I see. Okay, I tried it by specifying the folder only, and I&#39;m getting the same result: <code>&#47;var&#47;folders&#47;04&#47;3hxnpxc15wj2k4v40lkdncd00000gn&#47;T&#47;tmpkcQYnFap&zwnj;&#8203;pengine-go-bin&#47;backe&zwnj;&#8203;nd.go:13: can&#39;t find import: &quot;github.com&#47;gorilla&#47;mux&quot;</code> I appended the first post to show my imports. It doesn&#39;t crash until it gets past all the standard library imports (which it finds apparently)."}, {"owner": {"reputation": 873, "user_id": 307862, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/722274c13fd9a66e3d1fc70dca23c0a7?s=128&d=identicon&r=PG", "display_name": "anthony", "link": "https://stackoverflow.com/users/307862/anthony"}, "edited": false, "score": 0, "creation_date": 1439832292, "post_id": 32053119, "comment_id": 52011356, "body": "Also, I tried to build the <code>frontend</code> by itself, and it builds just fine. Even if I leave <code>app.yaml</code> in the path. Still builds. So, it seems to me that my imports are the issue for some reason. Not sure where I&#39;m supposed to move them though."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 873, "user_id": 307862, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/722274c13fd9a66e3d1fc70dca23c0a7?s=128&d=identicon&r=PG", "display_name": "anthony", "link": "https://stackoverflow.com/users/307862/anthony"}, "edited": false, "score": 0, "creation_date": 1439853866, "post_id": 32053119, "comment_id": 52021047, "body": "@anthony <code>goapp</code> sets the <code>GOROOT</code> and <code>GOPATH</code> environment variables. You should do that to point them into folders inside your SDK&#39;s <code>gopath</code> and <code>goroot</code> folders if you don&#39;t use <code>goapp</code>."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 3, "last_activity_date": 1439829933, "last_edit_date": 1439829933, "creation_date": 1439822091, "answer_id": 32053119, "question_id": 32040244, "link": "https://stackoverflow.com/questions/32040244/local-gae-datastore-is-empty-after-restart-on-osx/32053119#32053119", "title": "Local GAE Datastore is empty after restart on OSX", "body": "<p>You have to pass the name of the <em>file</em> to be used as the persisted datastore, <em>not</em> a folder.</p>\n\n<p>And next provide the <em>folder</em> of your app (which contains <code>app.yaml</code>). Don't mix the 2. So it should be something like:</p>\n\n<pre><code>dev_appserver.py --datastore_path=~/my_app/my_app.db ~/go_apps/my_app\n</code></pre>\n\n<p>Details can be found here:</p>\n\n<p><a href=\"https://cloud.google.com/appengine/docs/go/tools/devserver?hl=en##Go_Using_the_Datastore\" rel=\"nofollow\">The Go Development Server / Using the Datastore</a></p>\n\n<p><strong>Notes:</strong></p>\n\n<p>The default datastore file is in the temp folder, and your OS-X most likely clears that on system restart, that's why it is not preserved for you. On the other hand Windows 7 for example does not clear the temp folder on system restarts.</p>\n"}, {"comments": [{"owner": {"reputation": 2254, "user_id": 1003650, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b653616a592b8bdc296b0abf6207a71?s=128&d=identicon&r=PG", "display_name": "Venantius", "link": "https://stackoverflow.com/users/1003650/venantius"}, "edited": false, "score": 0, "creation_date": 1523286455, "post_id": 32062571, "comment_id": 86486243, "body": "You might want to mark your question as answered since you seem to have figured this out :)"}], "tags": [], "owner": {"reputation": 873, "user_id": 307862, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/722274c13fd9a66e3d1fc70dca23c0a7?s=128&d=identicon&r=PG", "display_name": "anthony", "link": "https://stackoverflow.com/users/307862/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1439864578, "creation_date": 1439864578, "answer_id": 32062571, "question_id": 32040244, "link": "https://stackoverflow.com/questions/32040244/local-gae-datastore-is-empty-after-restart-on-osx/32062571#32062571", "title": "Local GAE Datastore is empty after restart on OSX", "body": "<p>Got it up and running by adding both <code>GOPATH</code> and <code>GOROOT</code> environment variables to my .bash_profile. In total, these three paths (first path was already set) are needed for it to run:</p>\n\n<pre><code># Add Google AppEngine path\nexport PATH=/Users/anthony/go_appengine:$PATH\n\n# GOPATH\nexport GOPATH=/Users/anthony/go_appengine/gopath\nexport PATH=$PATH:$GOPATH\n\n# GOROOT\nexport GOROOT=/Users/anthony/go_appengine/goroot\nexport PATH=$PATH:$GOROOT\n</code></pre>\n\n<p>This command is called from inside the project folder (mine resides outside of the appengine folder) for it to launch:</p>\n\n<pre><code>dev_appserver.py --datastore_path data/datastore.db  dispatch.yaml backend/app.yaml frontend/app.yaml\n</code></pre>\n\n<p>Notice that the <code>.yaml</code> files are still there. It builds fine with them, and probably builds fine without them if you don't need a <code>dispatch.yaml</code> file.</p>\n\n<p><strong>Thanks @icza for the direction. Wanted to organize the steps in a post for easier reading.</strong></p>\n"}], "owner": {"reputation": 873, "user_id": 307862, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/722274c13fd9a66e3d1fc70dca23c0a7?s=128&d=identicon&r=PG", "display_name": "anthony", "link": "https://stackoverflow.com/users/307862/anthony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 32062571, "answer_count": 2, "score": 2, "last_activity_date": 1439877089, "creation_date": 1439761567, "last_edit_date": 1439877089, "question_id": 32040244, "link": "https://stackoverflow.com/questions/32040244/local-gae-datastore-is-empty-after-restart-on-osx", "title": "Local GAE Datastore is empty after restart on OSX", "body": "<p>I'm building a Google App Engine application with a Go backend + Polymer frontend. As a result, I'm using a dispatch.yaml file to serve both at the same time.</p>\n\n<p>The problem I'm facing is that the datastore is empty when I restart my computer. I've tested this on both OSX 10.9.5 and 10.10.4. Both exhibit the same response upon a system reboot. Windows 7, however, seems to hold on to the data.</p>\n\n<p>The documentation suggests that data should persist, since I'm not explicitly calling a clear. It's not. I've tried to set the datastore location myself using this:</p>\n\n<pre><code>dev_appserver.py --datastore_path=~/go_apps/data ~/go_apps/my_app\n</code></pre>\n\n<p>I'm receiving this error:</p>\n\n<pre><code>google.appengine.tools.devappserver2.errors.AppConfigNotFoundError: \"/Users/anthony/go_apps/my_app is a directory but does not contain app.yaml or app.yml\n</code></pre>\n\n<p>Obviously, since I'm using a dispatch.yaml file, it wouldn't. So, since the <code>backend</code>, which handles the data, does have an <code>app.yaml</code> file, I try to set it there. I use this command:</p>\n\n<pre><code>dev_appserver.py --datastore_path=~/go_apps/data ~/go_apps/my_app/backend\n</code></pre>\n\n<p>That doesn't seem to work either, as I get this error:</p>\n\n<pre><code>sqlite3.OperationalError: unable to open database file\n</code></pre>\n\n<p>Okay? Well, not sure where to turn now. From what I could gather from other posts, that data is stored temporarily. But, I can't seem to set a custom, non-temporary location for the data. So, now I'm populating a datastore every time I reboot, which seems ridiculous.</p>\n\n<p><strong>* Edit *</strong></p>\n\n<p>I've tried the following, which seems like it tries to launch the app, and creates a <code>datastore.db</code> file at the correct location:</p>\n\n<pre><code>dev_appserver.py --datastore_path ~/go_apps/my_app/data/datastore.db  ~/go_apps/my_app/dispatch.yaml ~/go_apps/my_app/backend/app.yaml ~/go_apps/my_app/frontend/app.yaml\n</code></pre>\n\n<p>However, I'm getting a weird error now:</p>\n\n<pre><code>/var/folders/04/3hxnpxc15wj2k4v40lkdncd00000gn/T/tmpkcQYnFappengine-go-bin/backend.go:13: can't find import: \"github.com/gorilla/mux\"\n</code></pre>\n\n<p>Does Go build to that folder temporarily? That import is definitely available, and always builds fine calling <code>goapp serve</code>.</p>\n\n<p>Here is what my imports look like on <code>backend.go</code></p>\n\n<pre><code>import (\n    //standard library\n    \"fmt\"\n    \"net/http\"\n    \"time\"\n    \"log\"\n\n    //third party\n    \"github.com/gorilla/mux\"\n    \"github.com/gorilla/securecookie\"\n    \"github.com/dgrijalva/jwt-go\"\n    \"golang.org/x/crypto/bcrypt\"\n\n    //my imports\n    \"github.com/section14/go_polymer_comm_pkg/controller\"\n)\n</code></pre>\n"}, {"tags": ["json", "http", "go", "error-handling"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1439763700, "post_id": 32039334, "comment_id": 51981538, "body": "The custom handler approach (as per that blog post)\u2014with a <code>func(w http.ResponseWriter, r *http.Request) error</code> signature is certainly a good way to go. You could return <code>&amp;HTTPError{err, code}</code> or a <code>&amp;JSONError{err, code}</code> and have <code>ServeHTTP</code> inspect and render appropriately."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 1019804, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/724e036335f17f41538259fc330dd237?s=128&d=identicon&r=PG", "display_name": "Soroush Khosravi", "link": "https://stackoverflow.com/users/1019804/soroush-khosravi"}, "edited": false, "score": 1, "creation_date": 1538477595, "post_id": 32039461, "comment_id": 92147790, "body": "Thanks man. Nice idea. It also works with gin framework as well."}], "tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": false, "score": 16, "last_activity_date": 1439755903, "creation_date": 1439755903, "answer_id": 32039461, "question_id": 32039334, "link": "https://stackoverflow.com/questions/32039334/terminate-http-request-via-header-error-code-return-or-json-response/32039461#32039461", "title": "Terminate http request via header error code return or JSON response", "body": "<p>Something like this:</p>\n\n<pre><code>func badReq(w http.ResponseWriter, isJson bool, err string) {\n    if !isJson {\n        http.Error(w, err, http.StatusBadRequest)\n        return\n    }\n    w.Header().Set(\"Content-Type\", \"application/json\")\n    w.WriteHeader(http.StatusBadRequest)\n    fmt.Fprintf(w, `{\"result\":\"\",\"error\":%q}`, err)\n}\n\n\n\nhttp.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n    if !ok {\n        badReq(w, true, \"no valid var\")\n        return\n    }\n})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "is_accepted": true, "score": 6, "last_activity_date": 1439764110, "creation_date": 1439764110, "answer_id": 32040551, "question_id": 32039334, "link": "https://stackoverflow.com/questions/32039334/terminate-http-request-via-header-error-code-return-or-json-response/32040551#32040551", "title": "Terminate http request via header error code return or JSON response", "body": "<p>The custom handler approach (as per that blog post)\u2014with a <code>func(w http.ResponseWriter, r *http.Request) error</code> signature is certainly a good way to go. You could return <code>&amp;HTTPError{err, code}</code> or a <code>&amp;JSONError{err, code}</code> and have <code>ServeHTTP</code> inspect and render appropriately. e.g.</p>\n\n<pre><code>type Handler struct {\n    h func(http.ResponseWriter, *http.Request) error\n}\n\nfunc (h Handler) ServeHTTP(w http.ResponseWriter, r *http.Request) {\n    // Execute the handler function\n    err := h.h(w, r)\n    if err != nil {\n        switch e := err.(type) {\n        case *HTMLError:\n             // Render a HTML response, calling e.Err and e.Code\n        case *JSONError:\n             // Render a JSON response\n        default:\n             // Handle all other 'generic' errors you don't inspect\n        }\n    }\n}\n\ntype HTMLError struct {\n    Err error\n    Code int\n}\n\nfunc (e *HTMLError) Error() string {\n    return e.Err.Error()\n}\n\ntype JSONError struct {\n    Err error\n    Code int\n}\n\nfunc (e *JSONError) Error() string {\n    return e.Err.Error()\n}\n\nfunc SomeHandler(w http.ResponseWriter, r *http.Request) error {\n    // examine incoming params\n    if !ok {\n        // Your returns are also enforced here - avoiding subtle bugs\n        return &amp;HTTPError{errors.New(\"No good!\"), http.StatusBadRequest}\n    }\n}\n</code></pre>\n\n<p>Small plug: I <a href=\"http://elithrar.github.io/article/http-handler-error-handling-revisited/\" rel=\"noreferrer\">wrote a blog post</a> about ways to centralise error handling with handlers that is similar to the example above.</p>\n"}], "owner": {"reputation": 43, "user_id": 5232884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06189e955a90423ca879b0db0e66e202?s=128&d=identicon&r=PG&f=1", "display_name": "Jean", "link": "https://stackoverflow.com/users/5232884/jean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9476, "favorite_count": 1, "accepted_answer_id": 32040551, "answer_count": 2, "score": 3, "last_activity_date": 1494071225, "creation_date": 1439755071, "last_edit_date": 1495535479, "question_id": 32039334, "link": "https://stackoverflow.com/questions/32039334/terminate-http-request-via-header-error-code-return-or-json-response", "title": "Terminate http request via header error code return or JSON response", "body": "<p>How can I call multiple error return functions from a Handlefunc?</p>\n\n<p>I have found something similar to what I need in this link:\n<a href=\"https://stackoverflow.com/questions/31293314/golang-terminating-or-aborting-an-http-request\">Golang: terminating or aborting an HTTP request</a>.</p>\n\n<p>So, in some cases, I need to return error response with HTTP error code, like below (code taken from link above):</p>\n\n<pre><code>http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n   // examine incoming params\n   if !ok {\n   http.Error(w, `Invalid input params!`, http.StatusBadRequest) \n   return\n          }\n\n   // Do normal API serving\n})\n</code></pre>\n\n<p>However, in some cases I need to return a JSON response to the web client:</p>\n\n<pre><code>http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n    // examine incoming params\n    if !ok {\n        w.Header().Set(\"Content-Type\", \"application/json\")\n        w.WriteHeader(http.StatusBadRequest)\n        str := `{\"Result\":\"\",\"Error\":\"No valide Var\"}`\n        fmt.Fprint(w, str)\n        return\n    }\n\n    // Do normal API serving\n})\n</code></pre>\n\n<p>Question is: I want to place the error handling part in a seperate error function and passing what type of error I want to present as a function parameter/method. However I don't know, how to do it semantically.</p>\n\n<p>So, in the gist:</p>\n\n<pre><code> if isJsonError {\n    //call HTTP function to serve JSON error\n   }\n if isHTTPError {\n   //call HTTP function to serve an HTTP error\n}\n</code></pre>\n\n<p>How can I do that semantically? Sorry in advance, if I'm not being clear. Thank you!</p>\n\n<p>P.S.: I've also read the following blogpost :\n<a href=\"http://blog.golang.org/error-handling-and-go\" rel=\"nofollow noreferrer\">http://blog.golang.org/error-handling-and-go</a></p>\n\n<p>There is a section there called \"Simplifying repetitive error handling\" - and it's cool but I need to simplify multiple repetitive error handling and I can't figure out how to.</p>\n"}, {"tags": ["go", "timeout", "http-status-codes"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439759862, "post_id": 32038440, "comment_id": 51980631, "body": "Most likely unrelated to your problem, but you have a data race appending to <code>cr</code>. You cannot write the same variable from multiple goroutines without synchronization. You may want to build/run with the <a href=\"https://blog.golang.org/race-detector\" rel=\"nofollow noreferrer\">race detector</a>."}, {"owner": {"reputation": 5041, "user_id": 4288305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-SabTTMIHSb8/AAAAAAAAAAI/AAAAAAAAAjQ/EmdFmLWi2MY/photo.jpg?sz=128", "display_name": "Integralist", "link": "https://stackoverflow.com/users/4288305/integralist"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439760403, "post_id": 32038440, "comment_id": 51980764, "body": "Thanks for the comment. I will look to utilise channels instead + I&#39;ll investigate that race detector :-)"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1439774741, "post_id": 32038440, "comment_id": 51983568, "body": "If the client call returns an error, there is no status code, because there was no complete http request. There&#39;s not much you can do with an error at that point, but in go1.5 a client.Timeout will at least return a better message in an net.Error."}, {"owner": {"reputation": 680, "user_id": 1592264, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/78dbfab1c2716de55b960f00a5c868ce?s=128&d=identicon&r=PG", "display_name": "Ggicci", "link": "https://stackoverflow.com/users/1592264/ggicci"}, "edited": false, "score": 0, "creation_date": 1439787598, "post_id": 32038440, "comment_id": 51986192, "body": "Will <a href=\"https://github.com/golang/go/issues/9405\" rel=\"nofollow noreferrer\">this</a> help?"}, {"owner": {"reputation": 5041, "user_id": 4288305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-SabTTMIHSb8/AAAAAAAAAAI/AAAAAAAAAjQ/EmdFmLWi2MY/photo.jpg?sz=128", "display_name": "Integralist", "link": "https://stackoverflow.com/users/4288305/integralist"}, "edited": false, "score": 0, "creation_date": 1439792285, "post_id": 32038440, "comment_id": 51987659, "body": "Seems 1.5 is overdue its release date (as of August 17th 2015). I&#39;ll have to hold out to see if that indeed resolves the issue."}], "answers": [{"comments": [{"owner": {"reputation": 1141, "user_id": 2268807, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2e3bba058d67754cee5d2188a4b5004?s=128&d=identicon&r=PG", "display_name": "circuitry", "link": "https://stackoverflow.com/users/2268807/circuitry"}, "edited": false, "score": 0, "creation_date": 1458942539, "post_id": 32061649, "comment_id": 60088380, "body": "the downvote is for posting an hour long video. where is the answer?"}], "tags": [], "owner": {"reputation": 1209, "user_id": 83879, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5c4e03b2704fefb2529a2d63c744145f?s=128&d=identicon&r=PG", "display_name": "golliher", "link": "https://stackoverflow.com/users/83879/golliher"}, "is_accepted": false, "score": 1, "last_activity_date": 1439856820, "creation_date": 1439856820, "answer_id": 32061649, "question_id": 32038440, "link": "https://stackoverflow.com/questions/32038440/how-to-handle-http-timeout-errors-and-accessing-status-codes-in-golang/32061649#32061649", "title": "How to handle HTTP timeout errors and accessing status codes in golang", "body": "<p>If you want to fan out then aggregate results and you want specific timeout behavior the net/http package isn't giving you, then you may want to use goroutines and channels.  </p>\n\n<p>I just watched this video today and it will walk you through exactly those scenarios using the concurrency features of Go.  Plus, the speaker Rob Pike is quite the authority -- he explains it much better than I could.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=f6kdp27TYZs\" rel=\"nofollow\">https://www.youtube.com/watch?v=f6kdp27TYZs</a></p>\n"}, {"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 3, "creation_date": 1440439736, "post_id": 32180642, "comment_id": 52262895, "body": "Don&#39;t grok around in error strings at <i>best</i> it&#39;s incredible fragile; the error string is <i>not</i> part of any API. The <a href=\"https://golang.org/pkg/net/#Error\" rel=\"nofollow noreferrer\"><code>net.Error</code> interface</a> defines the <code>Timeout</code> method for this."}, {"owner": {"reputation": 5041, "user_id": 4288305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-SabTTMIHSb8/AAAAAAAAAAI/AAAAAAAAAjQ/EmdFmLWi2MY/photo.jpg?sz=128", "display_name": "Integralist", "link": "https://stackoverflow.com/users/4288305/integralist"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1440607854, "post_id": 32180642, "comment_id": 52347055, "body": "@Dave C thanks for the comment but I&#39;m not sure how what you&#39;ve suggested works. The error I get back from client.Get is a string. It has no methods. So nothing to query"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1440608991, "post_id": 32180642, "comment_id": 52347697, "body": "It&#39;s not just a string, it&#39;s an <code>error</code>. You through away everything but the formatted result string with by calling your check function with <code>err.Error()</code>. Instead you should attempt a type assertion and other checks. Only if all that doesn&#39;t work should you a) submit a bug report about a non-testable error and b) as an ugly work-around (with a big warning comment) <i>maybe</i> grep around in the string (or change the code you&#39;re calling to return a testable error and submit that as a change request upstream)."}, {"owner": {"reputation": 5041, "user_id": 4288305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-SabTTMIHSb8/AAAAAAAAAAI/AAAAAAAAAjQ/EmdFmLWi2MY/photo.jpg?sz=128", "display_name": "Integralist", "link": "https://stackoverflow.com/users/4288305/integralist"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1442663073, "post_id": 32180642, "comment_id": 53181144, "body": "By the way I finally got around to trying out type assertion checking (<code>err.(net.Error)</code>) and it seems that the the type of the error is *url.Error and not net.Error and so I couldn&#39;t use that <code>; panic: interface conversion: *url.Error is not net.Error: missing method Temporary</code>"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1442674169, "post_id": 32180642, "comment_id": 53184769, "body": "A <a href=\"https://golang.org/pkg/net/url/#Error\" rel=\"nofollow noreferrer\"><code>url.Error</code></a> contains an <code>Err error</code> field with an underlying error (if any). It&#39;s also used almost exclusively for URL parsing errors in which case it would never be a timeout. (e.g. something like <code>if e, ok := err.(net.Error); ok &amp;&amp; e.Timeout() {&#47;*\u2026network timeout\u2026*&#47;}</code> would correctly say it&#39;s not a network timeout related error.)"}], "tags": [], "owner": {"reputation": 5041, "user_id": 4288305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-SabTTMIHSb8/AAAAAAAAAAI/AAAAAAAAAjQ/EmdFmLWi2MY/photo.jpg?sz=128", "display_name": "Integralist", "link": "https://stackoverflow.com/users/4288305/integralist"}, "is_accepted": true, "score": -3, "last_activity_date": 1440413930, "creation_date": 1440413930, "answer_id": 32180642, "question_id": 32038440, "link": "https://stackoverflow.com/questions/32038440/how-to-handle-http-timeout-errors-and-accessing-status-codes-in-golang/32180642#32180642", "title": "How to handle HTTP timeout errors and accessing status codes in golang", "body": "<p>The Go 1.5 release solved this issue by being more specific about the type of error it has handled.</p>\n\n<p>So if you see this example <a href=\"https://github.com/Integralist/Go-Requester/blob/master/requester.go#L38\" rel=\"nofollow\">https://github.com/Integralist/Go-Requester/blob/master/requester.go#L38</a> you'll see that I'm able to apply a regex pattern to the error message to decipher if the error was indeed a timeout or not</p>\n\n<pre><code>status := checkError(err.Error())\n\nfunc checkError(msg string) int {\n    timeout, _ := regexp.MatchString(\"Timeout\", msg)\n\n    if timeout {\n        return 408\n    }\n\n  return 500\n}\n</code></pre>\n"}], "owner": {"reputation": 5041, "user_id": 4288305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-SabTTMIHSb8/AAAAAAAAAAI/AAAAAAAAAjQ/EmdFmLWi2MY/photo.jpg?sz=128", "display_name": "Integralist", "link": "https://stackoverflow.com/users/4288305/integralist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3429, "favorite_count": 1, "accepted_answer_id": 32180642, "answer_count": 2, "score": 7, "last_activity_date": 1440413930, "creation_date": 1439749338, "question_id": 32038440, "link": "https://stackoverflow.com/questions/32038440/how-to-handle-http-timeout-errors-and-accessing-status-codes-in-golang", "title": "How to handle HTTP timeout errors and accessing status codes in golang", "body": "<p>I have some code (see below) written in Go which is supposed to \"fan-out\" HTTP requests, and collate/aggregate the details back.</p>\n\n<blockquote>\n  <p>I'm new to golang and so expect me to be a nOOb and my knowledge to be limited</p>\n</blockquote>\n\n<p>The output of the program is currently something like:</p>\n\n<pre><code>{\n    \"Status\":\"success\",\n    \"Components\":[\n        {\"Id\":\"foo\",\"Status\":200,\"Body\":\"...\"},\n        {\"Id\":\"bar\",\"Status\":200,\"Body\":\"...\"}, \n        {\"Id\":\"baz\",\"Status\":404,\"Body\":\"...\"}, \n        ...\n    ]\n}\n</code></pre>\n\n<p>There is a local server running that is purposely slow (sleeps for 5 seconds and then returns a response). But I have other sites listed (see code below) that sometime trigger an error as well (if they error, then that's fine).</p>\n\n<p>The problem I have at the moment is how best to handle these errors, and specifically the \"timeout\" related errors; in that I'm not sure how to recognise if a failure is a timeout or some other error?</p>\n\n<p>At the moment I get a blanket error back all the time:</p>\n\n<pre><code>Get http://localhost:8080/pugs: read tcp 127.0.0.1:8080: use of closed network connection\n</code></pre>\n\n<p>Where <code>http://localhost:8080/pugs</code> will generally be the url that failed (hopefully by timeout!). But as you can see from the code (below), I'm not sure how to determine the error code is related to a timeout nor how to access the status code of the response (I'm currently just blanket setting it to <code>404</code> but obviously that's not right - if the server was to error I'd expect something like a <code>500</code> status code and obviously I'd like to reflect that in the aggregated response I send back).</p>\n\n<p>The full code can be seen below. Any help appreciated.</p>\n\n<pre><code>    package main\n\n    import (\n            \"encoding/json\"\n            \"fmt\"\n            \"io/ioutil\"\n            \"net/http\"\n            \"sync\"\n            \"time\"\n    )\n\n    type Component struct {\n            Id  string `json:\"id\"`\n            Url string `json:\"url\"`\n    }\n\n    type ComponentsList struct {\n            Components []Component `json:\"components\"`\n    }\n\n    type ComponentResponse struct {\n            Id     string\n            Status int\n            Body   string\n    }\n\n    type Result struct {\n            Status     string\n            Components []ComponentResponse\n    }\n\n    var overallStatus string = \"success\"\n\n    func main() {\n            var cr []ComponentResponse\n            var c ComponentsList\n\n            b := []byte(`{\"components\":[{\"id\":\"local\",\"url\":\"http://localhost:8080/pugs\"},{\"id\":\"google\",\"url\":\"http://google.com/\"},{\"id\":\"integralist\",\"url\":\"http://integralist.co.uk/\"},{\"id\":\"sloooow\",\"url\":\"http://stevesouders.com/cuzillion/?c0=hj1hfff30_5_f&amp;t=1439194716962\"}]}`)\n\n            json.Unmarshal(b, &amp;c)\n\n            var wg sync.WaitGroup\n\n            timeout := time.Duration(1 * time.Second)\n            client := http.Client{\n                    Timeout: timeout,\n            }\n\n            for i, v := range c.Components {\n                    wg.Add(1)\n\n                    go func(i int, v Component) {\n                            defer wg.Done()\n\n                            resp, err := client.Get(v.Url)\n\n                            if err != nil {\n                                fmt.Printf(\"Problem getting the response: %s\\n\", err)\n\n                                cr = append(cr, ComponentResponse{\n                                    v.Id,\n                                    404,\n                                    err.Error(),\n                                })\n                            } else {\n                                    defer resp.Body.Close()\n                                    contents, err := ioutil.ReadAll(resp.Body)\n                                    if err != nil {\n                                            fmt.Printf(\"Problem reading the body: %s\\n\", err)\n                                    }\n\n                                    cr = append(cr, ComponentResponse{\n                                            v.Id,\n                                            resp.StatusCode,\n                                            string(contents),\n                                    })\n                            }\n                    }(i, v)\n            }\n            wg.Wait()\n\n            j, err := json.Marshal(Result{overallStatus, cr})\n            if err != nil {\n                    fmt.Printf(\"Problem converting to JSON: %s\\n\", err)\n                    return\n            }\n\n            fmt.Println(string(j))\n    }\n</code></pre>\n"}, {"tags": ["go", "redis", "publish-subscribe"], "answers": [{"comments": [{"owner": {"reputation": 72977, "user_id": 95944, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SprKq.jpg?s=128&g=1", "display_name": "Richard Knop", "link": "https://stackoverflow.com/users/95944/richard-knop"}, "edited": false, "score": 0, "creation_date": 1439745427, "post_id": 32037845, "comment_id": 51976523, "body": "Thanks. I guess I should stick to RabbitMQ then."}, {"owner": {"reputation": 39563, "user_id": 3160475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8989da0a2c491338617b07df53e60c?s=128&d=identicon&r=PG", "display_name": "Itamar Haber", "link": "https://stackoverflow.com/users/3160475/itamar-haber"}, "reply_to_user": {"reputation": 72977, "user_id": 95944, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SprKq.jpg?s=128&g=1", "display_name": "Richard Knop", "link": "https://stackoverflow.com/users/95944/richard-knop"}, "edited": false, "score": 0, "creation_date": 1439745653, "post_id": 32037845, "comment_id": 51976598, "body": "Granted - you should also review Redis&#39; creator (Salvatore Sanfilippo) latest project, Disque, that is geared exactly for what you need (i.e. a distributed message queue): <a href=\"https://github.com/antirez/disque\" rel=\"nofollow noreferrer\">github.com/antirez/disque</a>"}, {"owner": {"reputation": 72977, "user_id": 95944, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SprKq.jpg?s=128&g=1", "display_name": "Richard Knop", "link": "https://stackoverflow.com/users/95944/richard-knop"}, "edited": false, "score": 0, "creation_date": 1439817453, "post_id": 32037845, "comment_id": 52002054, "body": "It doesn&#39;t seem to be production ready. But yes I know about disque."}, {"owner": {"reputation": 39563, "user_id": 3160475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8989da0a2c491338617b07df53e60c?s=128&d=identicon&r=PG", "display_name": "Itamar Haber", "link": "https://stackoverflow.com/users/3160475/itamar-haber"}, "reply_to_user": {"reputation": 72977, "user_id": 95944, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SprKq.jpg?s=128&g=1", "display_name": "Richard Knop", "link": "https://stackoverflow.com/users/95944/richard-knop"}, "edited": false, "score": 0, "creation_date": 1439835163, "post_id": 32037845, "comment_id": 52012864, "body": "@RichardKnop they said the same about Linux ;)"}], "tags": [], "owner": {"reputation": 39563, "user_id": 3160475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8989da0a2c491338617b07df53e60c?s=128&d=identicon&r=PG", "display_name": "Itamar Haber", "link": "https://stackoverflow.com/users/3160475/itamar-haber"}, "is_accepted": false, "score": 2, "last_activity_date": 1439745306, "creation_date": 1439745306, "answer_id": 32037845, "question_id": 32037803, "link": "https://stackoverflow.com/questions/32037803/redis-pub-sub-ack-nack/32037845#32037845", "title": "Redis Pub/Sub Ack/Nack", "body": "<p>No, Redis' PubSub does not guarantee delivery nor does it limit the number of possible subscribers who'll get the message.</p>\n"}, {"comments": [{"owner": {"reputation": 72977, "user_id": 95944, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SprKq.jpg?s=128&g=1", "display_name": "Richard Knop", "link": "https://stackoverflow.com/users/95944/richard-knop"}, "edited": false, "score": 1, "creation_date": 1439817505, "post_id": 32039335, "comment_id": 52002092, "body": "Thanks. This is what I ended up using, works as expected. I only needed this as an extra option for a broker for people who don&#39;t/can&#39;t use RabbitMQ with my library but AMQP is the standard."}], "tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": true, "score": 4, "last_activity_date": 1439755082, "creation_date": 1439755082, "answer_id": 32039335, "question_id": 32037803, "link": "https://stackoverflow.com/questions/32037803/redis-pub-sub-ack-nack/32039335#32039335", "title": "Redis Pub/Sub Ack/Nack", "body": "<p>Redis PubSub is more like a broadcast mechanism.</p>\n\n<p>if you want queues, you can use <a href=\"http://redis.io/commands/blpop\" rel=\"nofollow\">BLPOP</a> along with <a href=\"http://redis.io/commands/rpush\" rel=\"nofollow\">RPUSH</a> to get the same interraction.  Keep in mind, RabbitMQ does all sorts of other stuff that are not really there in Redis.  But if you looking for simple job scheduling / request handling style, this will work just fine.</p>\n"}, {"tags": [], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "is_accepted": false, "score": 1, "last_activity_date": 1598921252, "creation_date": 1598921252, "answer_id": 63679899, "question_id": 32037803, "link": "https://stackoverflow.com/questions/32037803/redis-pub-sub-ack-nack/63679899#63679899", "title": "Redis Pub/Sub Ack/Nack", "body": "<p>Redis streams (now, with Redis 5.0) support acknowledgment of tasks as they are completed by a group.</p>\n<p><a href=\"https://redis.io/topics/streams-intro\" rel=\"nofollow noreferrer\">https://redis.io/topics/streams-intro</a></p>\n"}], "owner": {"reputation": 72977, "user_id": 95944, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SprKq.jpg?s=128&g=1", "display_name": "Richard Knop", "link": "https://stackoverflow.com/users/95944/richard-knop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5011, "favorite_count": 0, "accepted_answer_id": 32039335, "answer_count": 3, "score": 5, "last_activity_date": 1598921252, "creation_date": 1439745062, "question_id": 32037803, "link": "https://stackoverflow.com/questions/32037803/redis-pub-sub-ack-nack", "title": "Redis Pub/Sub Ack/Nack", "body": "<p>Is there a concept of acknowledgements in Redis Pub/Sub?</p>\n\n<p>For example, when using RabbitMQ, I can have two workers running on separate machines and when I publish a message to the queue, only one of the workers will ack/nack it and process the message.</p>\n\n<p>However I have discovered with Redis Pub/Sub, both workers will process the message.</p>\n\n<p>Consider this simple example, I have this go routine running on two different machines/clients:</p>\n\n<pre><code>go func() {\n    for {\n        switch n := pubSubClient.Receive().(type) {\n        case redis.Message:\n            process(n.Data)\n        case redis.Subscription:\n            if n.Count == 0 {\n                return\n            }\n        case error:\n            log.Print(n)\n        }\n    }\n}()\n</code></pre>\n\n<p>When I publish a message:</p>\n\n<pre><code>conn.Do(\"PUBLISH\", \"tasks\", \"task A\")\n</code></pre>\n\n<p>Both go routines will receive it and run the process function.</p>\n\n<p>Is there a way of achieving similar behaviour to RabbitMQ? E.g. first worker to ack the message will be the only one to receive it and process it.</p>\n"}, {"tags": ["c++", "go"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1439741232, "post_id": 32037148, "comment_id": 51975187, "body": "why are you using the escape character instead of the NUL terminator? Also, why does the Go variant even <i>need</i> any terminator? Aren&#39;t Go&#39;s strings aware of their length? Also, if you had googled &quot;convert string to integer golang&quot;, you would have trivially found out about <a href=\"https://golang.org/pkg/strconv/#ParseInt\" rel=\"nofollow noreferrer\"><code>strconv.ParseInt()</code></a>\u2026"}, {"owner": {"reputation": 3214, "user_id": 753177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6170482ed9f92c8f61b91d91772cf764?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/753177/john"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1439741549, "post_id": 32037148, "comment_id": 51975301, "body": "You&#39;re right (I wasn&#39;t aware of not  needing the terminator, however).  I didn&#39;t think the solution would be so embarrassingly simple.  Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "is_accepted": true, "score": 3, "last_activity_date": 1439741375, "creation_date": 1439741375, "answer_id": 32037214, "question_id": 32037148, "link": "https://stackoverflow.com/questions/32037148/converting-a-c-snippet-to-golang/32037214#32037214", "title": "Converting a C++ snippet to Golang", "body": "<p>You can accomplish this rather easily using <a href=\"https://godoc.org/strconv#ParseUint\" rel=\"nofollow\"><code>strconv.ParseUint</code></a>:</p>\n\n<pre><code>reqStr := \"jfd0jifdgfa\"\nif len(reqStr) &lt;= 1 {\n  panic(\"reqStr not long enough\")\n}\nrequestId, err := strconv.ParseUint(reqStr[len(reqStr) - 2:], 16, 64)\nif err != nil {\n  panic(err)\n}\n</code></pre>\n\n<p>Keep in mind that final two characters of <code>reqStr</code> must be valid hex characters, otherwise the above code will panic.</p>\n"}], "owner": {"reputation": 3214, "user_id": 753177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6170482ed9f92c8f61b91d91772cf764?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/753177/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 831, "favorite_count": 0, "accepted_answer_id": 32037214, "answer_count": 1, "score": -3, "last_activity_date": 1439741375, "creation_date": 1439740973, "question_id": 32037148, "link": "https://stackoverflow.com/questions/32037148/converting-a-c-snippet-to-golang", "title": "Converting a C++ snippet to Golang", "body": "<p>I'm trying to covert the following C++ snippet to Golang, but I'm not having any luck getting the syntax correct.  Here's what the C++ snippet looks like:\n</p>\n\n<pre><code>v8::String::Utf8Value reqStringObj(args[1]);\nconst char *reqString = *reqStringObj;\n\nchar hex[3] = {reqString[strlen(reqString) - 2], reqString[strlen(reqString) - 1], '\\0'};\nunsigned char requestId = (unsigned char)strtoul (hex, 0, 16);\nprintf(\"requestId is: %d\\n\", requestId);\n</code></pre>\n\n<p>Here's what I have so far via the Go version:\n</p>\n\n<pre><code>reqStr := \"somerandomstringthatihave\"\nhex := []uint8{reqStr[len(reqStr)-2], reqStr[len(reqStr)-1], '\\u0027'}\n\nrequestId := ?????\n</code></pre>\n\n<p>I'm not exactly sure how to convert the casted <code>strtoul</code> function noted in the C++ function to make it work in the same way via the Go version.  Any ideas?</p>\n"}, {"tags": ["string", "go", "slice"], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 3342213, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/787dca87f677ecd27581651d9f0443c0?s=128&d=identicon&r=PG&f=1", "display_name": "KNgu", "link": "https://stackoverflow.com/users/3342213/kngu"}, "edited": false, "score": 0, "creation_date": 1439743692, "post_id": 32037076, "comment_id": 51975961, "body": "Thanks it works! Can you clarify on what situations would requirement to make copies? All I am doing is building the map and using the JSON, nothing else."}, {"owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "reply_to_user": {"reputation": 305, "user_id": 3342213, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/787dca87f677ecd27581651d9f0443c0?s=128&d=identicon&r=PG&f=1", "display_name": "KNgu", "link": "https://stackoverflow.com/users/3342213/kngu"}, "edited": false, "score": 0, "creation_date": 1439764071, "post_id": 32037076, "comment_id": 51981617, "body": "@KNgu: you only need to copy your slices if you want a snapshot of your variables to be stored in the map (i.e. if you make changes to <code>d</code> or <code>l</code> after you add them to the map, you don&#39;t want the changes to be reflected in the map)."}], "tags": [], "owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "is_accepted": true, "score": 4, "last_activity_date": 1439740538, "creation_date": 1439740538, "answer_id": 32037076, "question_id": 32036992, "link": "https://stackoverflow.com/questions/32036992/multilevel-slices-with-string-indexes/32037076#32037076", "title": "multilevel slices with string indexes", "body": "<p>What you would like to have would no longer be a slice, but a map of slices. You can get the desired results using the following code:</p>\n\n<pre><code>c := make(map[string][]string)\nc[\"d\"] = d\nc[\"l\"] = l\n</code></pre>\n\n<p>Depending on your usage, you may want to <a href=\"https://godoc.org/builtin#copy\" rel=\"nofollow\">make copies</a> of <code>d</code> and <code>l</code>, instead of using them directly in the map:</p>\n\n<pre><code>c := make(map[string][]string)\nc[\"d\"] = make([]string, len(d))\nc[\"l\"] = make([]string, len(l))\ncopy(c[\"d\"], d)\ncopy(c[\"l\"], l)\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 3342213, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/787dca87f677ecd27581651d9f0443c0?s=128&d=identicon&r=PG&f=1", "display_name": "KNgu", "link": "https://stackoverflow.com/users/3342213/kngu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 32037076, "answer_count": 1, "score": -1, "last_activity_date": 1439740538, "creation_date": 1439739939, "question_id": 32036992, "link": "https://stackoverflow.com/questions/32036992/multilevel-slices-with-string-indexes", "title": "multilevel slices with string indexes", "body": "<p>I have a code that looks like this:</p>\n\n<pre><code>var c [][]string\n\nc = append(c, d)\nc = append(c, l)\n</code></pre>\n\n<p>Assuming that both d and l are []strings. This works, however it would return something like this:</p>\n\n<p>[[\"0241025570\",\"0241025571\",\"1102182000\"],[\"0241025570\",\"0241025571\",\"1102182000\"]]</p>\n\n<p>How would it be possible to structure it to look like this:</p>\n\n<p>[\"d\": [\"0241025570\",\"0241025571\",\"1102182000\"], \"l\":[\"0241025570\",\"0241025571\",\"1102182000\"]]</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439727866, "post_id": 32034673, "comment_id": 51970971, "body": "If the answer to your previous question is not correct don&#39;t duplicate the question but comment on the answer there and/or edit the question."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 2, "creation_date": 1439729561, "post_id": 32034673, "comment_id": 51971420, "body": "This is <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">an X/Y question</a>, you&#39;re asking how to do Y (muck with the output of a debugging function) when you should be doing X (duplicating an <code>io.ReadCloser</code>). The answer to this question is &quot;you don&#39;t&quot;."}, {"owner": {"reputation": 1260, "user_id": 840419, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/94d4a370033a41eea3288ed269784339?s=128&d=identicon&r=PG", "display_name": "Sanath Ballal", "link": "https://stackoverflow.com/users/840419/sanath-ballal"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1439730298, "post_id": 32034673, "comment_id": 51971630, "body": "@dave-c, I don&#39;t see this as a duplicate as the other question was how to &quot;retain&quot; the body.  Here I am trying to ignore the garbage and extract only what I need. I am a beginner in Go. Any help is highly appreciated. Thanks."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439732778, "post_id": 32034673, "comment_id": 51972322, "body": "Very strictly speaking it isn&#39;t a duplicate; however this question only exists because of a poor answer to the other question (and close reasons are limited). It is not something that anyone should do. Don&#39;t use a debug function that isn&#39;t appropriate."}], "answers": [{"tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": false, "score": 2, "last_activity_date": 1439756532, "creation_date": 1439756532, "answer_id": 32039547, "question_id": 32034673, "link": "https://stackoverflow.com/questions/32034673/go-lang-gin-how-to-extract-only-the-body-and-ignore-other-garbage-from-htt/32039547#32039547", "title": "Go Lang - Gin : How to extract only the body (and ignore other garbage) from httputil.DumpRequest", "body": "<p>You don't use <code>httputil.DumpRequest</code> for that, that's a debug function.</p>\n\n<p>Assuming you want to parse json you can do something like this:</p>\n\n<pre><code>defer c.Request.Body.Close()\nvar data yourDataType\nif err := json.NewDecoder(c.Request.Body).Decode(&amp;data); err != nil {\n    // handle error\n}\n// handle data\n</code></pre>\n"}], "owner": {"reputation": 1260, "user_id": 840419, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/94d4a370033a41eea3288ed269784339?s=128&d=identicon&r=PG", "display_name": "Sanath Ballal", "link": "https://stackoverflow.com/users/840419/sanath-ballal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1439756532, "creation_date": 1439725232, "last_edit_date": 1439731766, "question_id": 32034673, "link": "https://stackoverflow.com/questions/32034673/go-lang-gin-how-to-extract-only-the-body-and-ignore-other-garbage-from-htt", "title": "Go Lang - Gin : How to extract only the body (and ignore other garbage) from httputil.DumpRequest", "body": "<p>I know that you can get the body content from </p>\n\n<pre><code>ioutil.ReadAll(c.Request.Body)\n</code></pre>\n\n<p>But using httputil.DumpRequest</p>\n\n<p><code>dump, err := httputil.DumpRequest(c.Request, true)</code></p>\n\n<p>will give the body contents along with other  values, the body content in the end.</p>\n\n<blockquote>\n  <p>Content type: application/json IP: 127.0.0.1:36846 header token:  Content length: 76 Request Method: POST Request URL: /signup Body: \n  POST /signup HTTP/1.1\n  Host: 127.0.0.1:8080\n  Accept: <em>/</em>\n  Accept-Encoding: gzip,deflate\n  Accept-Language: en-US,en;q=0.8\n  Connection: keep-alive\n  Content-Type: application/json\n  Origin: chrome-extension://hgmloofddffdnphfgcellkdfbfbjeloo\n  User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.101 Safari/537.36\n  {\"fname\":\"aFirstName\", \"lname\":\"aLName\", \"email\":\"test@test.com\", \"password\":\"123\"}</p>\n</blockquote>\n\n<p>Is there an efficient way I can get only the body content from httputil.DumpRequest()? i.e In this case only</p>\n\n<blockquote>\n  <p>{\"fname\":\"aFirstName\", \"lname\":\"aLName\", \"email\":\"test@test.com\", \"password\":\"123\"}</p>\n</blockquote>\n"}, {"tags": ["go", "controller", "revel"], "comments": [{"owner": {"reputation": 1310, "user_id": 1620475, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4b458c624ee03d12a1b065d0e4b50bf5?s=128&d=identicon&r=PG", "display_name": "freemanpolys", "link": "https://stackoverflow.com/users/1620475/freemanpolys"}, "edited": false, "score": 0, "creation_date": 1558123385, "post_id": 32033369, "comment_id": 99010412, "body": "@bertzziz, do you find a solution ? I&#39;m trying to do same thing."}], "answers": [{"tags": [], "owner": {"reputation": 1209, "user_id": 83879, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5c4e03b2704fefb2529a2d63c744145f?s=128&d=identicon&r=PG", "display_name": "golliher", "link": "https://stackoverflow.com/users/83879/golliher"}, "is_accepted": false, "score": 0, "last_activity_date": 1439721132, "creation_date": 1439721132, "answer_id": 32034083, "question_id": 32033369, "link": "https://stackoverflow.com/questions/32033369/inherit-controller-from-module-in-revel-framework/32034083#32034083", "title": "Inherit Controller From Module in Revel Framework", "body": "<p>I am not an authority, but I will make a few observations that might help even though I do not have a complete answer for you.</p>\n\n<p>The first thing about your question that struck me is the use of the term \"inherit\" --  Go does not support inheritance.  It does support embedding.   I might have written the question subject as \"Reuse controller from module in Revel framework. </p>\n\n<p>Second, I wonder if you are trying to reuse a Revel module between two separate Revel applications or if you are trying to reuse code from a module in two separate parts of <em>one</em> Revel application that just happens to have a front end and a back end.   A quick read of the reveal framework makes me think modules were designed for the former, not the latter.</p>\n\n<p>Third, I wonder if perhaps you are confusing files with packages.  It was not obvious to me when learning Go that one package can span multiple files.. if the same declaration of \"package controller\" exists in two files such as db.go and app.go, they are still in the same package.</p>\n"}], "owner": {"reputation": 3288, "user_id": 274058, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9FT6X.jpg?s=128&g=1", "display_name": "bertzzie", "link": "https://stackoverflow.com/users/274058/bertzzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1439721132, "creation_date": 1439715192, "last_edit_date": 1439715502, "question_id": 32033369, "link": "https://stackoverflow.com/questions/32033369/inherit-controller-from-module-in-revel-framework", "title": "Inherit Controller From Module in Revel Framework", "body": "<p>I am trying to use a shared controller from a module in my app, but I'm not really sure how to do it. Here's what I want to do:</p>\n\n<ol>\n<li>I have two revel apps, a frontend and backend app. The frontend app is used to show the user-facing site, and the backend app is for admin stuffs.</li>\n<li>I created a special controller to connect to database as per the <a href=\"https://revel.github.io/samples/booking.html\" rel=\"nofollow\">booking sample</a>.</li>\n<li>I want both the frontend and backend app to use the same controller, to minimize redundancy.</li>\n</ol>\n\n<p>From the sample, when you want to have one controller database, it roughly translate to this:</p>\n\n<pre><code>type DBController {\n     *revel.Controller\n}\n\ntype App {\n    DBController\n}\n</code></pre>\n\n<p>This works when I want to have only 1 app, but when I want to share the controller to another app, I can't import <code>DBController</code> to the app. </p>\n\n<h2>Things I've Tried</h2>\n\n<p>I tried moving <code>DBController</code> to its own package, and then importing that and inherit from it directly:</p>\n\n<pre><code>// in db.go\npackage controllers\n\n// import and stuffs\n\ntype DBController {\n    *revel.Controller\n}\n\n// in app.go\npackage controllers\nimport (\n    dbc \"site.com/modules/controllers\"\n)\n\ntype App struct {\n    dbc.DBController\n    // *dbc.DBController\n}\n</code></pre>\n\n<p>This gives me a panic error stating that the route is not found:</p>\n\n<pre><code>panic: Route validation error (in /app/path/routes:7):\n       revel/controller: failed to find controller App\n</code></pre>\n\n<p>in both inheriting with and without pointer.</p>\n\n<p>I've also tried Revel's <a href=\"https://revel.github.io/manual/modules.html\" rel=\"nofollow\">module</a>, with the same code, but different directory and importing via config:</p>\n\n<pre><code>// app.conf\nmodules.dbcontroller=site.com/modules/dbcontroller\n</code></pre>\n\n<p>And then in <code>app.go</code>:</p>\n\n<pre><code>type App struct {\n    DBController\n}\n</code></pre>\n\n<p>But it still didn't work with the same error as before. I'm pretty convinced that the right route is by using module, since the documentation said (emphasis mine):</p>\n\n<blockquote>\n  <p>Modules are packages that can be plugged into an application. <strong>They allow sharing of controllers</strong>, views, assets, and other code between multiple Revel applications or from third-party sources.</p>\n  \n  <p>A module should have the same layout as a Revel application\u2019s layout. The \u201chosting\u201d application will merge it in as follows:</p>\n  \n  <ol>\n  <li>Any templates in module/app/views will be added to the Template Loader search path</li>\n  <li><strong>Any controllers in module/app/controllers will be treated as if they were in your application</strong>.</li>\n  </ol>\n  \n  <p>etc..</p>\n</blockquote>\n\n<p>But I'm not sure how I can share and derive my controller from here.</p>\n\n<h1>TL; DR</h1>\n\n<p>How do I share controller in Revel so that I can inherit a controller from other module, roughly like:</p>\n\n<pre><code>import dbc \"site.com/modules/dbcontroller\"\n\ntype App struct {\n    dbc.DBController\n}\n</code></pre>\n\n<p>so that <code>DBController</code> can be used with several revel apps? Thank you very much.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1439729200, "post_id": 32032050, "comment_id": 51971329, "body": "Have you looked at gorilla/mux? <a href=\"http://www.gorillatoolkit.org/pkg/mux\" rel=\"nofollow noreferrer\">gorillatoolkit.org/pkg/mux</a> - handles route parameters easily."}], "answers": [{"comments": [{"owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "edited": false, "score": 0, "creation_date": 1439756669, "post_id": 32032520, "comment_id": 51979767, "body": "Not sure why this was downvoted, while regexp aren&#39;t exactly fast in Go, this is a perfectly valid answer."}], "tags": [], "owner": {"reputation": 1183, "user_id": 2959387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459784500061e41da68ed5af11f92183?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant Thakkar", "link": "https://stackoverflow.com/users/2959387/prashant-thakkar"}, "is_accepted": false, "score": 7, "last_activity_date": 1439722825, "last_edit_date": 1439722825, "creation_date": 1439706986, "answer_id": 32032520, "question_id": 32032050, "link": "https://stackoverflow.com/questions/32032050/how-do-i-parse-urls-in-the-format-of-id-123-not-foo-bar/32032520#32032520", "title": "How do I parse URLs in the format of /id/123 not ?foo=bar", "body": "<p>You can try using regular expression as follow:</p>\n\n<pre><code>import \"regexp\"\n\nre, _ := regexp.Compile(\"/id/(.*)\")\nvalues := re.FindStringSubmatch(path)\nif len(values) &gt; 0 {\n    fmt.Println(\"ID : \", values[1])\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1914, "user_id": 433327, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/018e3018fba33be8c1f8198065af6f14?s=128&d=identicon&r=PG", "display_name": "Dustin Graham", "link": "https://stackoverflow.com/users/433327/dustin-graham"}, "edited": false, "score": 0, "creation_date": 1506574145, "post_id": 32034168, "comment_id": 79877162, "body": "That is useful and relevant, but a FYI catch, it will also match /id/123/456 returning 456 which wasn&#39;t what I expected."}], "tags": [], "owner": {"reputation": 1209, "user_id": 83879, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5c4e03b2704fefb2529a2d63c744145f?s=128&d=identicon&r=PG", "display_name": "golliher", "link": "https://stackoverflow.com/users/83879/golliher"}, "is_accepted": true, "score": 15, "last_activity_date": 1439721822, "creation_date": 1439721822, "answer_id": 32034168, "question_id": 32032050, "link": "https://stackoverflow.com/questions/32032050/how-do-i-parse-urls-in-the-format-of-id-123-not-foo-bar/32034168#32034168", "title": "How do I parse URLs in the format of /id/123 not ?foo=bar", "body": "<p>In your example /id/123 is a <em>path</em> and you can get the \"123\" part by using Base from the path module.</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"path\"\n)\n\nfunc main() {\n    fmt.Println(path.Base(\"/id/123\"))\n}\n</code></pre>\n\n<p>For easy reference, here's the docs on the path module.  <a href=\"http://golang.org/pkg/path/#example_Base\">http://golang.org/pkg/path/#example_Base</a></p>\n"}, {"comments": [{"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439733436, "post_id": 32034967, "comment_id": 51972528, "body": "Updated my question sorry"}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439734115, "post_id": 32034967, "comment_id": 51972776, "body": "I checked that package but it seemed to only parse the string query in the second example of my post and not the first, could you give me an example? I must have been doing something wrong"}, {"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "reply_to_user": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439753732, "post_id": 32034967, "comment_id": 51978950, "body": "@Datsik answer edited! Also, check out @gollipher &#39;s answer. You can use the <code>path</code> package with <code>url.Parse(path).Path</code> instead of writing <code>getFirstParam</code> function here."}], "tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": false, "score": 3, "last_activity_date": 1439754064, "last_edit_date": 1439754064, "creation_date": 1439727424, "answer_id": 32034967, "question_id": 32032050, "link": "https://stackoverflow.com/questions/32032050/how-do-i-parse-urls-in-the-format-of-id-123-not-foo-bar/32034967#32034967", "title": "How do I parse URLs in the format of /id/123 not ?foo=bar", "body": "<p>Here is a simple solution that works for URLs with the same structure as yours (you can improve to suit those with other structures)</p>\n\n<pre><code>package main\n\nimport (\n       \"fmt\"\n       \"net/url\"\n)\n\nvar path = \"http://localhost:8080/id/123\"\n\nfunc getFirstParam(path string) (ps string) {\n\n     // ignore first '/' and when it hits the second '/'\n     // get whatever is after it as a parameter\n     for i := 1; i &lt; len(path); i++ {\n         if path[i] == '/' {\n            ps = path[i+1:]\n         }\n     }\n     return\n}\n\nfunc main() {\n\n     u, _ := url.Parse(path)\n     fmt.Println(u.Path)                // -&gt; \"/id/123\"\n\n     fmt.Println(getFirstParam(u.Path)) // -&gt; \"123\"\n}\n</code></pre>\n\n<p>Or, as @gollipher suggested, use the <code>path</code> package</p>\n\n<pre><code>import \"path\"\n\nfunc main() {\n    u, _ := url.Parse(path)\n    ps := path.Base(u.Path)\n}\n</code></pre>\n\n<p>With this method it's faster than regex, provided you know before hand the structure of the URL you are getting.</p>\n"}], "owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13841, "favorite_count": 1, "accepted_answer_id": 32034168, "answer_count": 3, "score": 12, "last_activity_date": 1602831490, "creation_date": 1439701950, "last_edit_date": 1602831490, "question_id": 32032050, "link": "https://stackoverflow.com/questions/32032050/how-do-i-parse-urls-in-the-format-of-id-123-not-foo-bar", "title": "How do I parse URLs in the format of /id/123 not ?foo=bar", "body": "<p>I'm trying to parse an URL like:</p>\n<p><a href=\"http://example.com/id/123\" rel=\"nofollow noreferrer\">http://example.com/id/123</a></p>\n<p>I've read through the <code>net/url</code> docs but it seems like it only parses strings like</p>\n<p><a href=\"http://example.com/blah?id=123\" rel=\"nofollow noreferrer\">http://example.com/blah?id=123</a></p>\n<p>How can I parse the ID so I end up with the value of the id in the first example?</p>\n<p>This is not one of my own routes but a http string returned from an openid request.</p>\n"}, {"tags": ["unit-testing", "go", "package"], "answers": [{"tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": false, "score": 0, "last_activity_date": 1439701871, "creation_date": 1439701871, "answer_id": 32032043, "question_id": 32030684, "link": "https://stackoverflow.com/questions/32030684/golang-test-for-sub-directories-fails/32032043#32032043", "title": "golang test for sub directories fails", "body": "<p>You need to run <code>go get -t ./...</code> first to get all test deps.</p>\n\n<p>From the <a href=\"https://tip.golang.org/cmd/go/#hdr-Download_and_install_packages_and_dependencies\" rel=\"nofollow\"><code>go test -h</code></a>:</p>\n\n<blockquote>\n  <p>The -t flag instructs get to also download the packages required to\n  build the tests for the specified packages.</p>\n</blockquote>\n"}], "owner": {"reputation": 2144, "user_id": 3103732, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ddea83f3d0a1cde074665d4c1382c3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Dany", "link": "https://stackoverflow.com/users/3103732/dany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439701871, "creation_date": 1439684690, "question_id": 32030684, "link": "https://stackoverflow.com/questions/32030684/golang-test-for-sub-directories-fails", "title": "golang test for sub directories fails", "body": "<p>In my use case I am setting up a single go test which runs all _test.go in all packages in the project folder. I tried to achieve this using <code>$go test ./...</code> from the src folder of the project</p>\n\n<pre><code> /project-name\n       /src\n          /mypack\n             /dao\n             /util\n</code></pre>\n\n<p>When I try to run the test it is asking to install the packages which are used in the imported packages. For example if I import \"github.com/go-sql-driver/mysql\", it might have used another package github.com/golang/protobuf/proto. I did not manually import the proto package. The application runs without manually importing the inner package. But when I run the tests it fails. But individual package test succeeded.  Do I have to install all the packages in the <code>$go test ./...</code> error manually?</p>\n\n<p>Could anyone help me on this?</p>\n"}, {"tags": ["go", "system-calls"], "comments": [{"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1439683197, "post_id": 32030522, "comment_id": 51962616, "body": "Could you actually post the stacktrace? Also, what environment/OS are you running under?"}, {"owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "edited": false, "score": 4, "creation_date": 1439683225, "post_id": 32030522, "comment_id": 51962620, "body": "What OS are you using? <code>syscall.Sysinfo_t</code> is only defined for Linux."}, {"owner": {"reputation": 489, "user_id": 2767589, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55c5f62f85b89680eefba5bca5feaca3?s=128&d=identicon&r=PG", "display_name": "Bogdan", "link": "https://stackoverflow.com/users/2767589/bogdan"}, "edited": false, "score": 0, "creation_date": 1439683295, "post_id": 32030522, "comment_id": 51962629, "body": "Oh, I feel stupid, thank you. I was trying to use it on OSX. Is there a way to do this on OSX?"}, {"owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "edited": false, "score": 0, "creation_date": 1439683527, "post_id": 32030522, "comment_id": 51962668, "body": "@Bogdan: There&#39;s no built-in support for what you&#39;re trying to do. You may find this library useful: <a href=\"https://github.com/shirou/gopsutil\" rel=\"nofollow noreferrer\">github.com/shirou/gopsutil</a>"}, {"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1439683539, "post_id": 32030522, "comment_id": 51962671, "body": "One way would be to run the code under a docker container that either has  Go installed in it so you can run <code>go run</code> or build a linux binary that can run on linux and run it in the docker container"}, {"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 0, "creation_date": 1439684919, "post_id": 32030522, "comment_id": 51962869, "body": "According to Go&#39;s <a href=\"https://golang.org/pkg/syscall/\" rel=\"nofollow noreferrer\">syscall doc</a> this package is &quot;locked down&quot;. You can try using <code>os</code> which is an interface to the package."}, {"owner": {"reputation": 1760, "user_id": 3369324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LBmEb.png?s=128&g=1", "display_name": "Cel Skeggs", "link": "https://stackoverflow.com/users/3369324/cel-skeggs"}, "reply_to_user": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "edited": false, "score": 0, "creation_date": 1441651376, "post_id": 32030522, "comment_id": 52752381, "body": "@TimCooper could you add your comment as an answer?"}], "owner": {"reputation": 489, "user_id": 2767589, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55c5f62f85b89680eefba5bca5feaca3?s=128&d=identicon&r=PG", "display_name": "Bogdan", "link": "https://stackoverflow.com/users/2767589/bogdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1573, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1439683164, "creation_date": 1439682832, "last_edit_date": 1439683164, "question_id": 32030522, "link": "https://stackoverflow.com/questions/32030522/using-syscall-in-go", "title": "Using Syscall in Go", "body": "<p>I am trying to make a very simple script that will pull System uptime and a few other things using system calls in Go. This is some sample code that just will not compile:</p>\n\n<pre><code>package main\nimport \"syscall\"\nfunc main(){ \n    var info1 = new(syscall.Sysinfo_t) \n    var info2 = syscall.Sysinfo_t{}\n}\n</code></pre>\n\n<p>It keeps giving me an error saying <code>undefined: syscall.Sysinfo_t</code>. What's wrong?</p>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 1506, "user_id": 8689709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd57855e7bff23fbca35abc8ddc0073?s=128&d=identicon&r=PG", "display_name": "Bill Zelenko", "link": "https://stackoverflow.com/users/8689709/bill-zelenko"}, "edited": false, "score": 0, "creation_date": 1534423509, "post_id": 32030407, "comment_id": 90706014, "body": "This question is a duplicate, but this question has better wording."}], "answers": [{"comments": [{"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "reply_to_user": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "edited": false, "score": 0, "creation_date": 1439683004, "post_id": 32030486, "comment_id": 51962594, "body": "Sorry it&#39;s actually &quot;struct tags&quot;. Edited!"}], "tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": true, "score": 3, "last_activity_date": 1439683058, "last_edit_date": 1439683058, "creation_date": 1439682355, "answer_id": 32030486, "question_id": 32030407, "link": "https://stackoverflow.com/questions/32030407/struct-for-json-objects-in-go/32030486#32030486", "title": "Struct for JSON objects in GO", "body": "<p>They are <strong>struct tags</strong> used in Marshal'ing Go struct into JSON. In JSON, unlike Go, fields are in lowercase strings. Therefore, most use cases would be</p>\n\n<pre><code>type List struct {\n    ID   string `json:\"id\"`\n    Name string `json:\"name\"`\n}\n</code></pre>\n\n<p>In JSON</p>\n\n<pre><code>{\n  \"id\": \"some id\",\n  \"name\": \"some name\"\n}\n</code></pre>\n\n<p>See post <a href=\"https://medium.com/code-zen/rest-apis-server-in-go-and-redis-66e9cb80a71b\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 326, "user_id": 524370, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0ca9cd5c39011be8f736147b72bbf6d9?s=128&d=identicon&r=PG", "display_name": "nJoshi", "link": "https://stackoverflow.com/users/524370/njoshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1439746920, "accepted_answer_id": 32030486, "answer_count": 1, "score": 0, "last_activity_date": 1439683058, "creation_date": 1439681619, "question_id": 32030407, "link": "https://stackoverflow.com/questions/32030407/struct-for-json-objects-in-go", "closed_reason": "Duplicate", "title": "Struct for JSON objects in GO", "body": "<p>I'm learning GO and when defining structs for working with JSON like below.</p>\n\n<pre><code>type List struct {\n    ID   string `datastore:\"-\"`\n    Name string\n}\n</code></pre>\n\n<p>I see that there is this text in between ` sign. I have not been able to find an explanation what that signifies.</p>\n\n<p>Things seem to work even without those.</p>\n"}, {"tags": ["methods", "struct", "go", "dependency-injection"], "comments": [{"owner": {"reputation": 197, "user_id": 1295863, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7d891db1c3cffd1c11b393d6d6816f97?s=128&d=identicon&r=PG", "display_name": "THUNDERGROOVE", "link": "https://stackoverflow.com/users/1295863/thundergroove"}, "edited": false, "score": 0, "creation_date": 1439682299, "post_id": 32030169, "comment_id": 51962477, "body": "If it&#39;s actually test code then there&#39;s really no namespace cluttering happening.  pie-o-pah&#39;s answer doesn&#39;t look half bad, if you&#39;re still worried about it."}, {"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 0, "creation_date": 1439828361, "post_id": 32030169, "comment_id": 52009165, "body": "Seems like you are familiar with javascript&#39;s injection pattern. In Go, managing dependencies are more similar to Python&#39;s modules."}], "answers": [{"tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": false, "score": 6, "last_activity_date": 1439681921, "creation_date": 1439681921, "answer_id": 32030444, "question_id": 32030169, "link": "https://stackoverflow.com/questions/32030169/define-method-of-struct-inside-function/32030444#32030444", "title": "Define method of struct inside function", "body": "<p>The idiomatic Go would be to use <strong>package</strong> for namespacing.</p>\n\n<pre><code>package mock \n\ntype MockDatabase struct {}\n\nfunc (m *mockDatabase) Foo() {}\n</code></pre>\n\n<p>In the main code, you can call from the package</p>\n\n<pre><code>package main\n\nimport (\n        \"path/to/mock\"\n)\n\nvar m = New(mock.MockDatabase)\n\nfunc baz() {\n        m.Foo()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": false, "score": 2, "last_activity_date": 1439828540, "creation_date": 1439828540, "answer_id": 32055221, "question_id": 32030169, "link": "https://stackoverflow.com/questions/32030169/define-method-of-struct-inside-function/32055221#32055221", "title": "Define method of struct inside function", "body": "<p>Directly - no. And honestly, I think that pie-o-pah answered your question. <strong>But.</strong> If you still want to do it your way for some reason, you can do it with a little bit of boilerplate wrapping and clever use of closures:</p>\n\n<pre><code>type I interface {\n    Foo()\n}\n\ntype ExtendableI struct {\n    foo func()\n}\n\nfunc (i ExtendableI) Foo() {\n    i.foo()\n}\n\nfunc main() {\n    type MyI int\n    myI := MyI(42)\n    foo := func() {\n        fmt.Println(myI) // Close over myI making it work like a method.\n    }\n    ei := ExtendableI{foo: foo}\n    useI(ei) // useI needs an I.\n}\n</code></pre>\n\n<p>Playground: <a href=\"http://play.golang.org/p/G2HKhjb5fk\" rel=\"nofollow\">http://play.golang.org/p/G2HKhjb5fk</a>.</p>\n"}], "owner": {"reputation": 1759, "user_id": 1512962, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/EfW0L.png?s=128&g=1", "display_name": "Anonymous Penguin", "link": "https://stackoverflow.com/users/1512962/anonymous-penguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3461, "favorite_count": 1, "answer_count": 2, "score": 7, "last_activity_date": 1439828540, "creation_date": 1439679310, "question_id": 32030169, "link": "https://stackoverflow.com/questions/32030169/define-method-of-struct-inside-function", "title": "Define method of struct inside function", "body": "<p>I have this code</p>\n\n<pre><code>func baz() {\n    type mockDatabase struct{}\n\n    //\n    //  More code\n    //\n}\n</code></pre>\n\n<p>I want to define a method of <code>mockDatabase</code>, so the full code would look like this:</p>\n\n<pre><code>func baz() {\n    type mockDatabase struct{}\n\n    func (m *mockDatabase) Foo() {\n        // Implement function here\n    }\n\n    //\n    //  More code\n    //\n}\n</code></pre>\n\n<p>The reason I want to do this is I'm injecting a dependency into a function, and I want to create a \"mock object\" to inject into the function (the function takes an interface as an argument and the mock object will implement the interface).</p>\n\n<p>I could create the struct outside, but it seems more logical to declare the struct locally to decrease namespace clutter, especially when these mock objects will only be used once. Am I missing something here? Is it better practice to define it outside the test function so it's not long? What should I do here?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 8, "creation_date": 1439665825, "post_id": 32028287, "comment_id": 51958168, "body": "Putting binaries into a <code>cmd</code> folder is just a convention. The go tool doesn&#39;t treat <code>cmd</code> special."}, {"owner": {"reputation": 881, "user_id": 926823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/XyiYN.jpg?s=128&g=1", "display_name": "amirhosseinab", "link": "https://stackoverflow.com/users/926823/amirhosseinab"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1439889085, "post_id": 32028287, "comment_id": 52033415, "body": "Hi @vansimke, could you help me about this?"}], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439727605, "post_id": 32034571, "comment_id": 51970905, "body": "The Go <code>cmd</code> convention has nothing to do with camlistor&#39;s build."}, {"owner": {"reputation": 1209, "user_id": 83879, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5c4e03b2704fefb2529a2d63c744145f?s=128&d=identicon&r=PG", "display_name": "golliher", "link": "https://stackoverflow.com/users/83879/golliher"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439727803, "post_id": 32034571, "comment_id": 51970947, "body": "It was explicitly cited by the author of the post in the OP&#39;s question.   As such is it not worth studying in trying to understand the cmd convention that author is promoting?   I don&#39;t understand the down vote."}, {"owner": {"reputation": 881, "user_id": 926823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/XyiYN.jpg?s=128&g=1", "display_name": "amirhosseinab", "link": "https://stackoverflow.com/users/926823/amirhosseinab"}, "edited": false, "score": 0, "creation_date": 1439833975, "post_id": 32034571, "comment_id": 52012215, "body": "@golliher Thanks for your information about <code>cmd</code> folder, could you help me about the second part of my question - the best practice and common ways for organizing project files"}, {"owner": {"reputation": 1209, "user_id": 83879, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5c4e03b2704fefb2529a2d63c744145f?s=128&d=identicon&r=PG", "display_name": "golliher", "link": "https://stackoverflow.com/users/83879/golliher"}, "reply_to_user": {"reputation": 881, "user_id": 926823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/XyiYN.jpg?s=128&g=1", "display_name": "amirhosseinab", "link": "https://stackoverflow.com/users/926823/amirhosseinab"}, "edited": false, "score": 1, "creation_date": 1439834600, "post_id": 32034571, "comment_id": 52012578, "body": "@amirhosseinab You are welcome. I am glad if I was able to help.   While I felt qualified to answer the first part, I am in fact still a learner myself and do not feel qualified to try and give you a general best practice for organizing Go projects. I am sorry. I suspect it is a subjective thing.  For a CLI application I used a framework called <a href=\"https://github.com/spf13/cobra\" rel=\"nofollow noreferrer\">github.com/spf13/cobra</a> and so I followed its patterns and used Hugo&#39;s source code to help instruct me (<a href=\"https://github.com/spf13/hugo\" rel=\"nofollow noreferrer\">github.com/spf13/hugo</a>)  if i were writing a Revel application, I suspect the organization would be different (<a href=\"http://revel.github.io\" rel=\"nofollow noreferrer\">revel.github.io</a>)."}, {"owner": {"reputation": 1209, "user_id": 83879, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5c4e03b2704fefb2529a2d63c744145f?s=128&d=identicon&r=PG", "display_name": "golliher", "link": "https://stackoverflow.com/users/83879/golliher"}, "edited": false, "score": 0, "creation_date": 1439891958, "post_id": 32034571, "comment_id": 52035423, "body": "This may have the answer to the second part of your question.  <a href=\"http://stackoverflow.com/questions/9985559/organizing-a-multiple-file-go-project\" title=\"organizing a multiple file go project\">stackoverflow.com/questions/9985559/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1209, "user_id": 83879, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5c4e03b2704fefb2529a2d63c744145f?s=128&d=identicon&r=PG", "display_name": "golliher", "link": "https://stackoverflow.com/users/83879/golliher"}, "is_accepted": false, "score": 2, "last_activity_date": 1456742506, "last_edit_date": 1456742506, "creation_date": 1439724587, "answer_id": 32034571, "question_id": 32028287, "link": "https://stackoverflow.com/questions/32028287/cmd-folder-for-organizing-project-files-in-go/32034571#32034571", "title": "Cmd folder for organizing project files in Go", "body": "<p>The author of the <a href=\"https://medium.com/@benbjohnson/structuring-applications-in-go-3b04be4ff091\" rel=\"nofollow\">post you cite</a>  explicitly says the Camlistore application introduced him to the cmd convention.</p>\n\n<p>If you look at the source code to <a href=\"http://camlistore.org\" rel=\"nofollow\">Camlistore</a> you will notice that project uses a custom system for building, namely \"make.go\".  </p>\n\n<p>cmd is special only because the Camlistore project uses \"go run make.go\" to build and make.go is aware of how to build targets in the cmd directory.    Or in the more general case, cmd is special only if you use a build system that treats it as special.  </p>\n"}, {"tags": [], "owner": {"reputation": 1485, "user_id": 2407681, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lyshf.jpg?s=128&g=1", "display_name": "lfree", "link": "https://stackoverflow.com/users/2407681/lfree"}, "is_accepted": false, "score": 7, "last_activity_date": 1531955274, "last_edit_date": 1531955274, "creation_date": 1496392254, "answer_id": 44324299, "question_id": 32028287, "link": "https://stackoverflow.com/questions/32028287/cmd-folder-for-organizing-project-files-in-go/44324299#44324299", "title": "Cmd folder for organizing project files in Go", "body": "<h3>So what about this 'cmd' folder?</h3>\n\n<p>The <a href=\"https://medium.com/@benbjohnson/structuring-applications-in-go-3b04be4ff091\" rel=\"noreferrer\">post</a> has already made it clear, to summarise:   </p>\n\n<blockquote>\n  <ol>\n  <li>It's not a magic nor standard in Go. It's just a convention.   </li>\n  <li>You can have multiple binaries when putting them into a sub-folder which is not possible in the root folder.</li>\n  <li>By making you taking your binary as a client instead of a host or portal of your application, it can drives you to the so-called 'library-driven-development' way of architecting your program. This separation 'helps you make a cleaner abstraction' and more common of you code logic.</li>\n  </ol>\n</blockquote>\n\n<h3>And what is the best practice for structuring project files in Go that support source files, projects binaries, 3rd party packages and unit tests.</h3>\n\n<p>I'm not sure about the best practice. The official documents have many hints about the project files structuring. <del>On my personal practice, besides the <strong><code>cmd</code></strong> folder for the binaries, I<br>\n1. Group source files into packages(sub-folders) inside the <strong><code>src</code></strong> folder,<br>\n2. Copy 3rd party packages to the <strong>vendor</strong> folder;<br>\n3. Place unit tests files side by side with its target source file.\n</del></p>\n\n<p>These links may be helpful:  </p>\n\n<blockquote>\n  <p><a href=\"https://talks.golang.org/2014/organizeio.slide#1\" rel=\"noreferrer\">Organizing Go code</a><br>\n  <a href=\"https://blog.golang.org/organizing-go-code\" rel=\"noreferrer\">The Go Blog: Organizing Go code</a><br>\n  <a href=\"https://blog.golang.org/package-names\" rel=\"noreferrer\">The Go Blog: Package names</a><br>\n  <a href=\"https://github.com/golang-standards/project-layout\" rel=\"noreferrer\">golang-standards/project-layout</a></p>\n</blockquote>\n"}], "owner": {"reputation": 881, "user_id": 926823, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/XyiYN.jpg?s=128&g=1", "display_name": "amirhosseinab", "link": "https://stackoverflow.com/users/926823/amirhosseinab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10010, "favorite_count": 4, "answer_count": 2, "score": 18, "last_activity_date": 1531955274, "creation_date": 1439665501, "last_edit_date": 1439916491, "question_id": 32028287, "link": "https://stackoverflow.com/questions/32028287/cmd-folder-for-organizing-project-files-in-go", "title": "Cmd folder for organizing project files in Go", "body": "<p>I have searched for a solution for organizing Go files in a project and found <a href=\"https://medium.com/@benbjohnson/structuring-applications-in-go-3b04be4ff091\" rel=\"noreferrer\">this post</a>. I wonder what the role of the <code>cmd</code> folder is, that was used in the 2nd section of that post. Is it a magic word for the Go compiler?\nOn the other hand I was reading the <a href=\"https://golang.org/doc/code.html\" rel=\"noreferrer\">Go documentation</a> and there is nothing about a <code>cmd</code> folder in there.</p>\n\n<p>So what about this folder? And what is the best practice for structuring project files in Go that support source files, projects binaries, 3rd party packages and unit tests.</p>\n"}, {"tags": ["csv", "go"], "comments": [{"owner": {"reputation": 19967, "user_id": 193634, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cca18087b325346d5007ccbc3bdddb6e?s=128&d=identicon&r=PG", "display_name": "Rosdi Kasim", "link": "https://stackoverflow.com/users/193634/rosdi-kasim"}, "edited": false, "score": 1, "creation_date": 1439661506, "post_id": 32027590, "comment_id": 51956749, "body": "How slow is &#39;terribly slow&#39;? What is the file size of the csv file you are testing? Because the word &#39;slow&#39; is subjective..."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1439661860, "post_id": 32027590, "comment_id": 51956863, "body": "Assuming the calculation is dependant only on the current record (e.g. you don&#39;t need to total all values of a column, or sort, or somesuch) don&#39;t suck in the whole file into memory but instead operate on each record as it it&#39;s read, the write it out. Avoid things like <code>ioutil.ReadAll</code> when you can instead operate on a stream. In any case, unless you&#39;re swapping (due to using too much memory) you&#39;re likely IO bound."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1439662676, "post_id": 32027590, "comment_id": 51957168, "body": "Also, make sure to check for errors!! E.g. <a href=\"https://play.golang.org/p/CBzz4lImW2\" rel=\"nofollow noreferrer\">play.golang.org/p/CBzz4lImW2</a>"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439663158, "post_id": 32027590, "comment_id": 51957322, "body": "Also, if this the entire program (i.e. if it&#39;s not a part of a larger program) it makes more sense not to muck with file names but just read from <code>os.Stdin</code> and write to <code>os.Stdout</code> and let the shell handle opening files (or using direct output/input from/to other programs!) for you."}], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 2, "creation_date": 1439667217, "post_id": 32028082, "comment_id": 51958554, "body": "A faster implementation using <code>bufio.Scanner</code> and <code>bytes.LastIndex</code> might look something like <a href=\"https://play.golang.org/p/SYG9dQV-ir\" rel=\"nofollow noreferrer\">this</a>. It&#39;s ~3x faster than <code>encoding&#47;csv</code> but that&#39;s at the expense of a lot of the error checking and flexibility that <code>encoding&#47;csv</code> provides."}], "tags": [], "owner": {"reputation": 2574, "user_id": 2400074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7f72f3deeb98881d01cd00ceb7545d8?s=128&d=identicon&r=PG", "display_name": "Nick Keets", "link": "https://stackoverflow.com/users/2400074/nick-keets"}, "is_accepted": false, "score": 1, "last_activity_date": 1439664112, "creation_date": 1439664112, "answer_id": 32028082, "question_id": 32027590, "link": "https://stackoverflow.com/questions/32027590/efficient-read-and-write-csv-in-go/32028082#32028082", "title": "Efficient read and write CSV in Go", "body": "<p><code>encoding/csv</code> is indeed very slow on big files, as it performs a lot of allocations. Since your format is so simple I recommend using <code>strings.Split</code> instead which is much faster.</p>\n\n<p>If even that is not fast enough you can consider implementing the parsing yourself using <code>strings.IndexByte</code> which is implemented in assembly: <a href=\"http://golang.org/src/strings/strings_decl.go?s=274:310#L1\" rel=\"nofollow\">http://golang.org/src/strings/strings_decl.go?s=274:310#L1</a></p>\n\n<p>Having said that, you should also reconsider using <code>ReadAll</code> if the file is larger than your memory.</p>\n"}, {"tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": true, "score": 19, "last_activity_date": 1549487339, "last_edit_date": 1549487339, "creation_date": 1439665511, "answer_id": 32028290, "question_id": 32027590, "link": "https://stackoverflow.com/questions/32027590/efficient-read-and-write-csv-in-go/32028290#32028290", "title": "Efficient read and write CSV in Go", "body": "<p>You're loading the file in memory first then processing it, that can be slow with a big file.</p>\n\n<p>You need to loop and call <code>.Read</code> and process one line at a time.</p>\n\n<pre><code>func processCSV(rc io.Reader) (ch chan []string) {\n    ch = make(chan []string, 10)\n    go func() {\n        r := csv.NewReader(rc)\n        if _, err := r.Read(); err != nil { //read header\n            log.Fatal(err)\n        }\n        defer close(ch)\n        for {\n            rec, err := r.Read()\n            if err != nil {\n                if err == io.EOF {\n                    break\n                }\n                log.Fatal(err)\n\n            }\n            ch &lt;- rec\n        }\n    }()\n    return\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/GoRVXp05cm\" rel=\"noreferrer\"><kbd>playground</kbd></a></p>\n\n<p>//note it's roughly based on DaveC's comment.</p>\n"}, {"tags": [], "owner": {"reputation": 4142, "user_id": 3765905, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xkm1p.png?s=128&g=1", "display_name": "BoltzmannBrain", "link": "https://stackoverflow.com/users/3765905/boltzmannbrain"}, "is_accepted": false, "score": 6, "last_activity_date": 1439737075, "last_edit_date": 1495541321, "creation_date": 1439737075, "answer_id": 32036450, "question_id": 32027590, "link": "https://stackoverflow.com/questions/32027590/efficient-read-and-write-csv-in-go/32036450#32036450", "title": "Efficient read and write CSV in Go", "body": "<p>This is essentially <a href=\"https://stackoverflow.com/users/55504/dave-c\">Dave C</a>'s answer from the comments sections:</p>\n\n<pre><code>package main\n\nimport (\n  \"encoding/csv\"\n  \"log\"\n  \"os\"\n  \"strconv\"\n)\n\nfunc main() {\n  // setup reader\n  csvIn, err := os.Open(\"./path/to/datafile.csv\")\n  if err != nil {\n    log.Fatal(err)\n  }\n  r := csv.NewReader(csvIn)\n\n  // setup writer\n  csvOut, err := os.Create(\"./where/to/write/resultsfile.csv\"))\n  if err != nil {\n    log.Fatal(\"Unable to open output\")\n  }\n  w := csv.NewWriter(csvOut)\n  defer csvOut.Close()\n\n  // handle header\n  rec, err := r.Read()\n  if err != nil {\n    log.Fatal(err)\n  }\n  rec = append(rec, \"score\")\n  if err = w.Write(rec); err != nil {\n    log.Fatal(err)\n  }\n\n  for {\n    rec, err = r.Read()\n    if err != nil {\n      if err == io.EOF {\n        break\n      }\n      log.Fatal(err)\n    }\n\n    // get float value\n    value := rec[1]\n    floatValue, err := strconv.ParseFloat(value, 64)\n    if err != nil {\n      log.Fatal(\"Record, error: %v, %v\", value, err)\n    }\n\n    // calculate scores; THIS EXTERNAL METHOD CANNOT BE CHANGED\n    score := calculateStuff(floatValue)\n\n    scoreString := strconv.FormatFloat(score, 'f', 8, 64)\n    rec = append(rec, scoreString)\n\n    if err = w.Write(rec); err != nil {\n      log.Fatal(err)\n    }\n  w.Flush()\n  }\n}\n</code></pre>\n\n<p>Note of course the logic is all jammed into <code>main()</code>, better would be to split it into several functions, but that's beyond the scope of this question.</p>\n"}], "owner": {"reputation": 4142, "user_id": 3765905, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xkm1p.png?s=128&g=1", "display_name": "BoltzmannBrain", "link": "https://stackoverflow.com/users/3765905/boltzmannbrain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25392, "favorite_count": 8, "accepted_answer_id": 32028290, "answer_count": 3, "score": 11, "last_activity_date": 1549487339, "creation_date": 1439661233, "last_edit_date": 1439735930, "question_id": 32027590, "link": "https://stackoverflow.com/questions/32027590/efficient-read-and-write-csv-in-go", "title": "Efficient read and write CSV in Go", "body": "<p>The Go code below reads in a 10,000 record CSV (of timestamp <code>times</code> and float <code>values</code>), runs some operations on the data, and then writes the original values to another CSV along with an additional column for <code>score</code>. However it is terribly slow (i.e. hours, but most of that is <code>calculateStuff()</code>) and I'm curious if there are any inefficiencies in the CSV reading/writing I can take care of.</p>\n\n<pre><code>package main\n\nimport (\n  \"encoding/csv\"\n  \"log\"\n  \"os\"\n  \"strconv\"\n)\n\nfunc ReadCSV(filepath string) ([][]string, error) {\n  csvfile, err := os.Open(filepath)\n\n  if err != nil {\n    return nil, err\n  }\n  defer csvfile.Close()\n\n  reader := csv.NewReader(csvfile)\n  fields, err := reader.ReadAll()\n\n  return fields, nil\n}\n\nfunc main() {\n  // load data csv\n  records, err := ReadCSV(\"./path/to/datafile.csv\")\n  if err != nil {\n    log.Fatal(err)\n  }\n\n  // write results to a new csv\n  outfile, err := os.Create(\"./where/to/write/resultsfile.csv\"))\n  if err != nil {\n    log.Fatal(\"Unable to open output\")\n  }\n  defer outfile.Close()\n  writer := csv.NewWriter(outfile)\n\n  for i, record := range records {\n    time := record[0]\n    value := record[1]\n\n    // skip header row\n    if i == 0 {\n      writer.Write([]string{time, value, \"score\"})\n      continue\n    }\n\n    // get float values\n    floatValue, err := strconv.ParseFloat(value, 64)\n    if err != nil {\n      log.Fatal(\"Record: %v, Error: %v\", floatValue, err)\n    }\n\n    // calculate scores; THIS EXTERNAL METHOD CANNOT BE CHANGED\n    score := calculateStuff(floatValue)\n\n    valueString := strconv.FormatFloat(floatValue, 'f', 8, 64)\n    scoreString := strconv.FormatFloat(prob, 'f', 8, 64)\n    //fmt.Printf(\"Result: %v\\n\", []string{time, valueString, scoreString})\n\n    writer.Write([]string{time, valueString, scoreString})\n  }\n\n  writer.Flush()\n}\n</code></pre>\n\n<p>I'm looking for help making this CSV read/write template code as fast as possible. For the scope of this question we need not worry about the <code>calculateStuff</code> method.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 0, "creation_date": 1439682498, "post_id": 32027000, "comment_id": 51962516, "body": "My <a href=\"https://medium.com/code-zen/rest-apis-server-in-go-and-redis-66e9cb80a71b\" rel=\"nofollow noreferrer\">post</a> on creating a REST web service in JSON is useful."}], "answers": [{"tags": [], "owner": {"reputation": 1691, "user_id": 4803192, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/2dd1e87601f8ded02fcb4e3e142c671c?s=128&d=identicon&r=PG&f=1", "display_name": "ThreeAccents", "link": "https://stackoverflow.com/users/4803192/threeaccents"}, "is_accepted": false, "score": 3, "last_activity_date": 1439657707, "creation_date": 1439657707, "answer_id": 32027025, "question_id": 32027000, "link": "https://stackoverflow.com/questions/32027000/creating-a-simple-json-response-go/32027025#32027025", "title": "Creating a simple Json response GO", "body": "<p>I found my error I passed in a function instead of an object to the types I created:</p>\n\n<pre><code>d := Data(fruits, vegetables)\np := Payload(d)\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>d := Data{fruits, vegetables}\np := Payload{d}\n</code></pre>\n"}], "owner": {"reputation": 1691, "user_id": 4803192, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/2dd1e87601f8ded02fcb4e3e142c671c?s=128&d=identicon&r=PG&f=1", "display_name": "ThreeAccents", "link": "https://stackoverflow.com/users/4803192/threeaccents"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1439672152, "creation_date": 1439657533, "last_edit_date": 1439672152, "question_id": 32027000, "link": "https://stackoverflow.com/questions/32027000/creating-a-simple-json-response-go", "title": "Creating a simple Json response GO", "body": "<p>I'm looking at a tutorial for creating REST API's with GO. I'm trying to build a web server and serve up a simple json response:</p>\n\n<pre><code>package main\n\nimport(\n    \"encoding/json\"\n    \"fmt\"\n    \"net/http\"\n)\n\ntype Payload struct {\n    Stuff Data\n}\n\ntype Data struct {\n    Fruit Fruits\n    Veggies Vegetables\n}\n\ntype Fruits map[string]int\ntype Vegetables map[string]int\n\nfunc serveRest(w http.ResponseWriter, r *http.Request) {\n    response, err := getJsonResponse()\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Fprintf(w, string(response))\n}\n\nfunc main() {\n    http.HandleFunc(\"/\", serveRest)\n    http.ListenAndServe(\"localhost:7200\", nil)\n}\n\nfunc getJsonResponse() ([]byte, error){\n    fruits := make(map[string]int)\n    fruits[\"Apples\"] = 25\n    fruits[\"Oranges\"] = 11\n\n    vegetables := make(map[string]int)\n    vegetables[\"Carrots\"] = 21\n    vegetables[\"Peppers\"] = 0\n\n    d := Data(fruits, vegetables)\n    p := Payload(d)\n\n    return json.MarshalIndent(p, \"\", \"  \") \n}\n</code></pre>\n\n<p>When I run this code I get the error:</p>\n\n<pre><code>too many arguments to conversion to Data: Data(fruits, vegetables)\n</code></pre>\n\n<p>I don't understand why its throwing that error since its expecting 2 arguments and I'm passing in 2 arguments. This is my first day trying GO so maybe I'm missing some concept or something.</p>\n"}, {"tags": ["reflection", "go"], "comments": [{"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 1, "creation_date": 1439682740, "post_id": 32026009, "comment_id": 51962554, "body": "Go is a compiled language. Meaning everything is done at that time."}, {"owner": {"reputation": 2695, "user_id": 59321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/847cb754fbd710f4be4d21bf09b2efd1?s=128&d=identicon&r=PG", "display_name": "Gurpartap Singh", "link": "https://stackoverflow.com/users/59321/gurpartap-singh"}, "edited": false, "score": 0, "creation_date": 1439693887, "post_id": 32026009, "comment_id": 51964116, "body": "It&#39;s a completely valid question to ask for someone who doesn&#39;t know. Why the -1?"}], "answers": [{"comments": [{"owner": {"reputation": 579, "user_id": 1027467, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/594c29c61ddc19f99241d167a3982961?s=128&d=identicon&r=PG", "display_name": "Nedo", "link": "https://stackoverflow.com/users/1027467/nedo"}, "edited": false, "score": 0, "creation_date": 1491298454, "post_id": 32026277, "comment_id": 73478492, "body": "In Java, you can certainly manipulate the byte code of the class at runtime. The <a href=\"http://asm.ow2.org/\" rel=\"nofollow noreferrer\">ASM</a> framework can manipulate existing classes or create new ones, add constructors, fields, etc."}], "tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": true, "score": 7, "last_activity_date": 1439652834, "creation_date": 1439652834, "answer_id": 32026277, "question_id": 32026009, "link": "https://stackoverflow.com/questions/32026009/golang-add-a-property-to-a-struct-at-runtime/32026277#32026277", "title": "Golang. Add a property to a struct at runtime", "body": "<p>No it is not possible.</p>\n\n<p>Not even with Java or C++ syntax instead of valid Go.</p>\n"}], "owner": {"reputation": 79, "user_id": 5230467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52105564ca3c45daae839c5c35028745?s=128&d=identicon&r=PG&f=1", "display_name": "findly", "link": "https://stackoverflow.com/users/5230467/findly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1617, "favorite_count": 1, "accepted_answer_id": 32026277, "answer_count": 1, "score": 5, "last_activity_date": 1439657833, "creation_date": 1439651215, "last_edit_date": 1439657833, "question_id": 32026009, "link": "https://stackoverflow.com/questions/32026009/golang-add-a-property-to-a-struct-at-runtime", "title": "Golang. Add a property to a struct at runtime", "body": "<pre><code>class type User {\n    name string\n}\n</code></pre>\n\n<p>Is it possible to add a field <code>age</code> at runtime?</p>\n"}, {"tags": ["intellij-idea", "go", "intellij-plugin"], "answers": [{"tags": [], "owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "is_accepted": true, "score": 0, "last_activity_date": 1439753356, "creation_date": 1439753356, "answer_id": 32039057, "question_id": 32024956, "link": "https://stackoverflow.com/questions/32024956/intellij-with-golang-throws-illegalargumentexception/32039057#32039057", "title": "IntelliJ with Golang throws IllegalArgumentException", "body": "<p>The alpha version of the plugin doesn't require you to compile it.</p>\n\n<p>Please follow the instructions in the readme, <a href=\"https://github.com/go-lang-plugin-org/go-lang-idea-plugin/#pre-release-builds\" rel=\"nofollow\">https://github.com/go-lang-plugin-org/go-lang-idea-plugin/#pre-release-builds</a>, and you should be able to install it just fine. </p>\n\n<blockquote>\n  <p>1) Follow the instructions from here <a href=\"https://www.jetbrains.com/idea/help/managing-enterprise-plugin-repositories.html\" rel=\"nofollow\">https://www.jetbrains.com/idea/help/managing-enterprise-plugin-repositories.html</a></p>\n  \n  <p>2) Paste the url for the version you desire:</p>\n  \n  <ul>\n  <li>alpha: <a href=\"https://plugins.jetbrains.com/plugins/alpha/5047\" rel=\"nofollow\">https://plugins.jetbrains.com/plugins/alpha/5047</a></li>\n  <li>nightly: <a href=\"https://plugins.jetbrains.com/plugins/nightly/5047\" rel=\"nofollow\">https://plugins.jetbrains.com/plugins/nightly/5047</a></li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 215, "user_id": 3698624, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/2875386f2772c39fbfc6149282c86748?s=128&d=identicon&r=PG&f=1", "display_name": "user3698624", "link": "https://stackoverflow.com/users/3698624/user3698624"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 32039057, "answer_count": 1, "score": 0, "last_activity_date": 1439753356, "creation_date": 1439643586, "question_id": 32024956, "link": "https://stackoverflow.com/questions/32024956/intellij-with-golang-throws-illegalargumentexception", "title": "IntelliJ with Golang throws IllegalArgumentException", "body": "<p>I am encountering the following Problem:\nWhen I try to add the Go-SDK to my Project, and select the GOROOT-Path (C:\\Lib\\Go), I get an <code>IllegalArgumentException</code>.</p>\n\n<p>I googled it, and lots of People are encountering this issue.\nOne solution would be the Installation of a later golang-plugin for IntelliJ which is currently in the Alpha, but however when I download the source from github and open it in IntelliJ, I get lots of Errors, so I am unable to build it and create an executble jar-plugin. I think all dependencies should be directly in the Project integrated?!</p>\n\n<p>Do you know other Solutions, or maybe an IDE with similiar Features like IntelliJ.</p>\n"}, {"tags": ["pointers", "go"], "answers": [{"tags": [], "owner": {"reputation": 6235, "user_id": 622060, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/59aeda6ad8dea5965841953391441d7d?s=128&d=identicon&r=PG", "display_name": "Per Johansson", "link": "https://stackoverflow.com/users/622060/per-johansson"}, "is_accepted": false, "score": 0, "last_activity_date": 1439641870, "creation_date": 1439641870, "answer_id": 32024727, "question_id": 32024660, "link": "https://stackoverflow.com/questions/32024660/go-function-to-write-to-an-interface/32024727#32024727", "title": "go - function to write to an interface{}", "body": "<p>dest is still of type <code>interface{}</code>. You have to cast it during the assignment as well:</p>\n\n<pre><code>*dest.(*int) = 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 4448081, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-0QFPcPx0lFU/AAAAAAAAAAI/AAAAAAAAABM/PTJrMGLetp0/photo.jpg?sz=128", "display_name": "aslanides", "link": "https://stackoverflow.com/users/4448081/aslanides"}, "edited": false, "score": 0, "creation_date": 1439642799, "post_id": 32024743, "comment_id": 51951215, "body": "Great answer. Thanks :)"}, {"owner": {"reputation": 1815, "user_id": 4155956, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ea0d3923ae412e2e921df82b6108ed9?s=128&d=identicon&r=PG", "display_name": "samix73", "link": "https://stackoverflow.com/users/4155956/samix73"}, "edited": false, "score": 0, "creation_date": 1503138544, "post_id": 32024743, "comment_id": 78499020, "body": "what if dest has an unknown type"}, {"owner": {"reputation": 862, "user_id": 2678118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8c9089c857968dac40943476ff8cbf7?s=128&d=identicon&r=PG", "display_name": "Evert Heylen", "link": "https://stackoverflow.com/users/2678118/evert-heylen"}, "reply_to_user": {"reputation": 1815, "user_id": 4155956, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ea0d3923ae412e2e921df82b6108ed9?s=128&d=identicon&r=PG", "display_name": "samix73", "link": "https://stackoverflow.com/users/4155956/samix73"}, "edited": false, "score": 0, "creation_date": 1503154900, "post_id": 32024743, "comment_id": 78504052, "body": "@samix73 I don&#39;t understand your question, the function already takes an <code>interface{}</code> which is about as unknown as it gets in Go"}, {"owner": {"reputation": 1815, "user_id": 4155956, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ea0d3923ae412e2e921df82b6108ed9?s=128&d=identicon&r=PG", "display_name": "samix73", "link": "https://stackoverflow.com/users/4155956/samix73"}, "edited": false, "score": 0, "creation_date": 1503296130, "post_id": 32024743, "comment_id": 78538338, "body": "@evertheylen I mean what if I use this function to handle too many types, we can&#39;t define a switch case for every single type passed to this function"}, {"owner": {"reputation": 862, "user_id": 2678118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8c9089c857968dac40943476ff8cbf7?s=128&d=identicon&r=PG", "display_name": "Evert Heylen", "link": "https://stackoverflow.com/users/2678118/evert-heylen"}, "reply_to_user": {"reputation": 1815, "user_id": 4155956, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ea0d3923ae412e2e921df82b6108ed9?s=128&d=identicon&r=PG", "display_name": "samix73", "link": "https://stackoverflow.com/users/4155956/samix73"}, "edited": false, "score": 0, "creation_date": 1503302018, "post_id": 32024743, "comment_id": 78541459, "body": "@samix73 I don&#39;t really see your point. In a typed language like Go, you simply can&#39;t do much with <code>dest</code> if you don&#39;t know it&#39;s type."}], "tags": [], "owner": {"reputation": 862, "user_id": 2678118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8c9089c857968dac40943476ff8cbf7?s=128&d=identicon&r=PG", "display_name": "Evert Heylen", "link": "https://stackoverflow.com/users/2678118/evert-heylen"}, "is_accepted": true, "score": 6, "last_activity_date": 1439641929, "creation_date": 1439641929, "answer_id": 32024743, "question_id": 32024660, "link": "https://stackoverflow.com/questions/32024660/go-function-to-write-to-an-interface/32024743#32024743", "title": "go - function to write to an interface{}", "body": "<p>In this piece of code (btw, you don't need the parens around <code>dest</code>), you are basically forgetting the type once you enter a case:</p>\n\n<pre><code>func foo(dest interface{}) {\n    switch dest.(type) {\n    case *int:\n        fmt.Println(\"got int\")\n        *dest = 1\n    // handle other cases...\n    }\n}\n</code></pre>\n\n<p>That is, dest is still of type interface{} according to the compiler, and that makes <code>*dest = 1</code> wrong.</p>\n\n<p>You <em>could</em> use more type assertions like this...</p>\n\n<pre><code>func foo(dest interface{}) {\n    switch dest.(type) {\n    case *int:\n        fmt.Println(\"got int\")\n        *dest.(*int) = 1\n        // handle other cases...\n    }\n}\n</code></pre>\n\n<p>...but a switch that actually 'remembers' the type would be much better (from <a href=\"https://golang.org/doc/effective_go.html#type_switch\">Effective Go</a>)</p>\n\n<pre><code>func foo(dest interface{}) {\n    switch dest := dest.(type) {\n    case *int:\n        fmt.Println(\"got int\")\n        *dest = 1\n    // handle other cases...\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 862, "user_id": 2678118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8c9089c857968dac40943476ff8cbf7?s=128&d=identicon&r=PG", "display_name": "Evert Heylen", "link": "https://stackoverflow.com/users/2678118/evert-heylen"}, "edited": false, "score": 1, "creation_date": 1505666781, "post_id": 45790614, "comment_id": 79495463, "body": "I see what you mean now. However, this smells a whole lot like you just want generics :)"}], "tags": [], "owner": {"reputation": 1815, "user_id": 4155956, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ea0d3923ae412e2e921df82b6108ed9?s=128&d=identicon&r=PG", "display_name": "samix73", "link": "https://stackoverflow.com/users/4155956/samix73"}, "is_accepted": false, "score": 0, "last_activity_date": 1503297194, "creation_date": 1503297194, "answer_id": 45790614, "question_id": 32024660, "link": "https://stackoverflow.com/questions/32024660/go-function-to-write-to-an-interface/45790614#45790614", "title": "go - function to write to an interface{}", "body": "<p>This question seems a bit old, but I have come along a more general way to handle this using reflection, it's not as fast as other solutions but it works with any other types you pass to the function</p>\n\n<pre><code>func foo(dest interface{}) {\n    destVal := reflect.ValueOf(dest)\n    val := reflect.ValueOf(1)\n    if destVal.Kind() == reflect.Ptr &amp;&amp; destVal.Elem().Kind() == val.Kind() {\n        if destElem := destVal.Elem(); destElem.CanSet() {\n            destElem.Set(val)\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/VoNuHf14LD\" rel=\"nofollow noreferrer\">example</a></p>\n"}], "owner": {"reputation": 117, "user_id": 4448081, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-0QFPcPx0lFU/AAAAAAAAAAI/AAAAAAAAABM/PTJrMGLetp0/photo.jpg?sz=128", "display_name": "aslanides", "link": "https://stackoverflow.com/users/4448081/aslanides"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 2, "accepted_answer_id": 32024743, "answer_count": 3, "score": 1, "last_activity_date": 1503297194, "creation_date": 1439641273, "question_id": 32024660, "link": "https://stackoverflow.com/questions/32024660/go-function-to-write-to-an-interface", "title": "go - function to write to an interface{}", "body": "<p>I want to pass a pointer to something into a function, without knowing its type at compile time, have the function write to it. Here's what I thought would work:</p>\n\n<pre><code>func foo(dest interface{}) {\n    switch (dest).(type) {\n    case *int:\n        fmt.Println(\"got int\")\n        *dest = 1\n    // handle other cases...\n    }\n}\n</code></pre>\n\n<p>However, calling this with an <code>*int</code> input</p>\n\n<pre><code>func main() {\n    bar := 2\n    foo(&amp;bar)\n    fmt.Println(bar) // expect 1\n}\n</code></pre>\n\n<p>yields the compiler error</p>\n\n<p><code>invalid indirect of dest (type interface {})</code>.</p>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 53111, "user_id": 41596, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e3d742bdb6a1937a032125eef40aa874?s=128&d=identicon&r=PG", "display_name": "alexn", "link": "https://stackoverflow.com/users/41596/alexn"}, "edited": false, "score": 1, "creation_date": 1439630259, "post_id": 32023229, "comment_id": 51948209, "body": "In this particular case, would it not be better to store the user in  the database and send the email in another process, at a later time? You could have a &quot;status&quot; column on user that indicates if a message has been sent successfully or not. It would seem that you want to store the user even if the email is not (yet) sent."}], "answers": [{"tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": false, "score": 1, "last_activity_date": 1439630398, "creation_date": 1439630398, "answer_id": 32023347, "question_id": 32023229, "link": "https://stackoverflow.com/questions/32023229/using-transactions-in-go/32023347#32023347", "title": "Using transactions in Go", "body": "<p>There is no \"transaction\" in Go. The better you can do is to take the steps in the right order:</p>\n\n<ol>\n<li>Insert the user in the database</li>\n<li>If the insertion failed, return</li>\n<li>Send the email</li>\n<li>If the email failed, remove the user</li>\n</ol>\n\n<p>That said, generally speaking, there is no need to go to step 4. The common approach to this problem is to have a \"I didn't get the verification email, please send another.\" button somewhere along your registration/login pages. You can't even be sure that your email arrived even if you sent it correctly: it could be filtered by the anti-spam, deleted by a missclick, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "is_accepted": false, "score": 1, "last_activity_date": 1439638197, "last_edit_date": 1439638197, "creation_date": 1439630506, "answer_id": 32023361, "question_id": 32023229, "link": "https://stackoverflow.com/questions/32023229/using-transactions-in-go/32023361#32023361", "title": "Using transactions in Go", "body": "<p>I think that first of all you have to ask yourself why can you get a database/email sending error. If your database is unreliable and 2% of the time the insert fails, then may be you have to chose some other database. If the problem is that database failed, then you have to worry about way more problems than just a couple of unsend emails.</p>\n\n<p>If the database is reliable and the problem is with sending email because you use some 3rd party provider and sometimes the API fails, than you can use something like</p>\n\n<pre><code>for {\n   if err = sendVerificationEmail(&amp;u); err != nil {\n      WriteServerError(w, err)\n   } else {\n      break\n   }\n}\n</code></pre>\n\n<p>Another approach is to save information about the emails that should be saved in a database and use another process (which runs every X seconds) to check for all unsend emails and send them. Once the email is send, remove the entry from the table.</p>\n"}, {"tags": [], "owner": {"reputation": 363, "user_id": 91401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f994f446a5cb6f77c50a40844e45a58?s=128&d=identicon&r=PG", "display_name": "James Aguilar", "link": "https://stackoverflow.com/users/91401/james-aguilar"}, "is_accepted": false, "score": 0, "last_activity_date": 1439655589, "creation_date": 1439655589, "answer_id": 32026714, "question_id": 32023229, "link": "https://stackoverflow.com/questions/32023229/using-transactions-in-go/32026714#32026714", "title": "Using transactions in Go", "body": "<p>It's best to just add the user to the database in an unverified state. You can clean them out a few weeks later if they never verify. </p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 3481137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b379e72c26ef59423e95ca24b1821ad8?s=128&d=identicon&r=PG&f=1", "display_name": "gigovich", "link": "https://stackoverflow.com/users/3481137/gigovich"}, "is_accepted": false, "score": 0, "last_activity_date": 1439720271, "creation_date": 1439720271, "answer_id": 32033975, "question_id": 32023229, "link": "https://stackoverflow.com/questions/32023229/using-transactions-in-go/32033975#32033975", "title": "Using transactions in Go", "body": "<p>You can use database transaction for this.</p>\n\n<ol>\n<li>Begin transaction.</li>\n<li>Insert new user.</li>\n<li>Try to send email.</li>\n<li>If ok, commit transaction.</li>\n<li>Else rollback</li>\n</ol>\n\n<p>Sample code:</p>\n\n<pre><code>package main\n\nimport (\n    \"database/sql\"\n    _ \"github.com/lib/pq\"\n    \"log\"\n    \"net/smtp\"\n)\n\nfunc main() {\n    db, err := sql.Open(\"postgres\", \"user=user dbname=postgres\")\n    if err != nil {\n        log.Fatal(err)\n        return\n    }\n    defer db.Close()\n\n    tnx, err := db.Begin()\n    if err != nil {\n        log.Fatal(err)\n        return\n    }\n\n    user := \"test\"\n    password := \"testpassword\"\n    res, err := tnx.Exec(\"INSERT INTO users(login, password) VALUES (?, ?)\", user, value)\n    if err != nil {\n        log.Fatal(err)\n        err := tnx.Rollback()\n        if err != log.Fatal(err) {\n            log.Fatal(err)\n        }\n        return\n    }\n\n    err := smtp.SendMail(\n        \"smpt.google.com\", smtp.Auth{}, \"test@from.com\",\n        []string{\"test@to.com\"}, []byte(\"Hello\"))\n    if err != nil {\n        log.Fatal(err)\n        err := tnx.Rollback()\n        if err != log.Fatal(err) {\n            log.Fatal(err)\n        }\n        return\n    }\n    err := tnx.Commit()\n    if err != nil {\n        log.Fatal(err)\n        return\n    }\n}\n</code></pre>\n\n<p>Yes, you can catch deadlock or database connection lost when commit transaction, but this is so rare case, you don't worry about it. Or if you want 100% success guarantee, use temporary user creation scheme.</p>\n"}], "owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1439720271, "creation_date": 1439629367, "last_edit_date": 1439630139, "question_id": 32023229, "link": "https://stackoverflow.com/questions/32023229/using-transactions-in-go", "title": "Using transactions in Go", "body": "<p>When a user registers, my app does two things - it adds the user to the database and it sends a verification email:</p>\n\n<pre><code>...\nerr := collection(\"users\").Insert(&amp;u);\nif err != nil {\n    WriteServerError(w, err)\n    return\n}\n\nif err = sendVerificationEmail(&amp;u); err != nil {\n    WriteServerError(w, err)\n}\n...\n</code></pre>\n\n<p>I wouldn't want to add the user to the database if the email does not get sent nor would I want to send the email if the user didn't get added to the database (the latter is of course taken care of with the code blocks in this order).</p>\n\n<p>Assuming Go supports transactions, is it worth bothering with for something like this? If so then could someone give me some pointers as to how I would convert this code above?</p>\n\n<p>I could use nested statements but this could get very ugly.</p>\n"}, {"tags": ["regex", "url", "go"], "answers": [{"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 3, "last_activity_date": 1439620342, "creation_date": 1439620342, "answer_id": 32022216, "question_id": 32022200, "link": "https://stackoverflow.com/questions/32022200/regular-expression-to-validate-in-url/32022216#32022216", "title": "Regular expression to validate &#39;/&#39; in URL", "body": "<p>Why not adding that case as an alternative:</p>\n\n<pre><code>\"^/$|(/(home|about)/(|[a-zA-Z0-9]+)$)\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "is_accepted": false, "score": 1, "last_activity_date": 1439620407, "creation_date": 1439620407, "answer_id": 32022225, "question_id": 32022200, "link": "https://stackoverflow.com/questions/32022200/regular-expression-to-validate-in-url/32022225#32022225", "title": "Regular expression to validate &#39;/&#39; in URL", "body": "<p>You seem to want optional groups:</p>\n\n<pre><code>\"^/(home|about)?(/[a-zA-Z0-9]+)?$\"\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/l-j3OBm7FZ\" rel=\"nofollow\">Demonstration</a></p>\n"}], "owner": {"reputation": 2144, "user_id": 3103732, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ddea83f3d0a1cde074665d4c1382c3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Dany", "link": "https://stackoverflow.com/users/3103732/dany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 32022216, "answer_count": 2, "score": 0, "last_activity_date": 1439621459, "creation_date": 1439620196, "question_id": 32022200, "link": "https://stackoverflow.com/questions/32022200/regular-expression-to-validate-in-url", "title": "Regular expression to validate &#39;/&#39; in URL", "body": "<p>I am writing a web application in golang. I am using regular expression to validate the URL. But I am not able to include '/' in the URL validation.</p>\n\n<pre><code>var validPath = regexp.MustCompile(\"^/(home|about)/(|[a-zA-Z0-9]+)$\")\n</code></pre>\n\n<p>The above URL takes '/home/', '/about/' but could not make for '/'.</p>\n\n<p>Could anyone please help me on this?</p>\n"}, {"tags": ["string", "go", "println"], "answers": [{"comments": [{"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 3, "creation_date": 1439614564, "post_id": 32021634, "comment_id": 51945357, "body": "(<code>Printf</code> would be fine, with a <code>\\n</code> added to the format string)"}, {"owner": {"reputation": 49, "user_id": 2713086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ea5fb75befc997d55bc920628d4ec4c?s=128&d=identicon&r=PG&f=1", "display_name": "user2713086", "link": "https://stackoverflow.com/users/2713086/user2713086"}, "edited": false, "score": 0, "creation_date": 1439615330, "post_id": 32021634, "comment_id": 51945463, "body": "Yes, as hobbs stated, the fmt.Printf() did the trick! fmt.Println() just printed the specifiers and not their values. Thanks!"}], "tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": true, "score": 3, "last_activity_date": 1439654877, "last_edit_date": 1439654877, "creation_date": 1439614232, "answer_id": 32021634, "question_id": 32021599, "link": "https://stackoverflow.com/questions/32021599/golang-adding-spaces-after-strings-by-default/32021634#32021634", "title": "golang adding spaces after strings by default?", "body": "<p>Use \"Printf\" function with format string instead.</p>\n\n<pre><code>fmt.Printf(\"string %s, integer %d, anything %v\\n\", \"hello\", 1, struct {}{})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185, "user_id": 2147751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e580f6ab14ac6ca552f30ace3599ff89?s=128&d=identicon&r=PG", "display_name": "Kipz", "link": "https://stackoverflow.com/users/2147751/kipz"}, "is_accepted": false, "score": 2, "last_activity_date": 1439639656, "creation_date": 1439639656, "answer_id": 32024450, "question_id": 32021599, "link": "https://stackoverflow.com/questions/32021599/golang-adding-spaces-after-strings-by-default/32024450#32024450", "title": "golang adding spaces after strings by default?", "body": "<p>Try it like this</p>\n\n<pre><code>func main() {\n    fmt.Println(\"With\",\"Space\")\n    fmt.Printf(\"%s%s\\n\",\"No\",\"Space\")\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/H-otSYDEN4\" rel=\"nofollow\">example</a></p>\n"}, {"tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": false, "score": 2, "last_activity_date": 1439655092, "creation_date": 1439655092, "answer_id": 32026629, "question_id": 32021599, "link": "https://stackoverflow.com/questions/32021599/golang-adding-spaces-after-strings-by-default/32026629#32026629", "title": "golang adding spaces after strings by default?", "body": "<p>If you want something that works like println, where you don't have to put %v markers, then fmt.Print does the job.</p>\n\n<p>it doesn't add spaces between arguments, and also doesn't add a newline.</p>\n\n<p>for example:</p>\n\n<p><code>fmt.Print(\"a\",\"b\",\"c\",\"\\n\")</code></p>\n\n<p>prints:\nabc</p>\n"}], "owner": {"reputation": 49, "user_id": 2713086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ea5fb75befc997d55bc920628d4ec4c?s=128&d=identicon&r=PG&f=1", "display_name": "user2713086", "link": "https://stackoverflow.com/users/2713086/user2713086"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2830, "favorite_count": 0, "accepted_answer_id": 32021634, "answer_count": 3, "score": 1, "last_activity_date": 1439655092, "creation_date": 1439613854, "question_id": 32021599, "link": "https://stackoverflow.com/questions/32021599/golang-adding-spaces-after-strings-by-default", "title": "golang adding spaces after strings by default?", "body": "<p>I'm learning Go and one annoyance I have with it is when i use fmt.Println it adds a space after every argument passed (even variables). Is there a way to remove this space so it only adds a space if I add one in quotes?</p>\n"}, {"tags": ["mysql", "go", "rfc3339"], "answers": [{"tags": [], "owner": {"reputation": 1125, "user_id": 4224724, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XMleNi8A3cE/AAAAAAAAAAI/AAAAAAAACzU/_LZ3Rgct8Xk/photo.jpg?sz=128", "display_name": "Danver Braganza", "link": "https://stackoverflow.com/users/4224724/danver-braganza"}, "is_accepted": true, "score": 2, "last_activity_date": 1439617050, "creation_date": 1439617050, "answer_id": 32021907, "question_id": 32021400, "link": "https://stackoverflow.com/questions/32021400/how-come-i-cannot-parse-an-already-rfc3339-string-back-to-a-rfc3339-string/32021907#32021907", "title": "How come I cannot parse an already RFC3339 string back to a RFC3339 string?", "body": "<p>It looks like your database driver returns times in a format that's not in RFC3339. Instead of using </p>\n\n<pre><code>timeStamp, err := time.Parse(time.RFC3339, sTimeStamp)\n</code></pre>\n\n<p>try using</p>\n\n<pre><code>timeStamp, err := time.Parse(\"2006-01-02 15:04:05\", sTimeStamp)\n</code></pre>\n\n<p>An important thing to remember is that the database itself is not going to store raw strings at all, RFC3339 or otherwise. It has its own internal representation of time, and when you query for it, the value you get depends on how that db wishes to reperesent it to you. In this case, it's chosen a somewhat different format, which the format string I've pasted above (the one that starts with \"2006-01-02...\") should fix. And yes, in Go, date format strings look like dates themselves.</p>\n"}], "owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "accepted_answer_id": 32021907, "answer_count": 1, "score": 0, "last_activity_date": 1439617050, "creation_date": 1439611357, "question_id": 32021400, "link": "https://stackoverflow.com/questions/32021400/how-come-i-cannot-parse-an-already-rfc3339-string-back-to-a-rfc3339-string", "title": "How come I cannot parse an already RFC3339 string back to a RFC3339 string?", "body": "<p>I'm storing a variable into a MySQL database with the field type of <code>VARCHAR(255)</code> like this:</p>\n\n<p><code>ts, err := time.Parse(time.RFC3339, nonce[0:20])</code></p>\n\n<p>which works great and shows up like this: </p>\n\n<p><a href=\"https://i.stack.imgur.com/z9H4Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z9H4Y.png\" alt=\"pic1\"></a></p>\n\n<p>Then when I need to get it from the database I do this:</p>\n\n<pre><code>rows, err := db.Query(\"SELECT nonce, time FROM noncestore WHERE endpoint=?\", endpoint)\n\n        var sTimeStamp, nonceHolder string\n        for rows.Next() {\n                err = rows.Scan(&amp;nonceHolder, &amp;sTimeStamp)\n                errCheck(err)\n\nGives error//&gt;&gt; timeStamp, err := time.Parse(time.RFC3339, sTimeStamp)\n                errCheck(err)\n\n                if timeStamp == ts &amp;&amp; nonceHolder == s {\n                        return errors.New(\"Nonce already used\")\n                }\n\n                if now.Sub(timeStamp) &lt; *maxNonceAge {\n                        _, err := db.Query(\"INSERT INTO noncestore SET nonce=?, time=?, endpoint=?\", nonceHolder, sTimeStamp, endpoint)\n                        errCheck(err)\n                }\n        }\n</code></pre>\n\n<p>The line noted above gives me this error:</p>\n\n<pre><code>2015/08/14 21:56:18 http: panic serving [::1]:49663: Failed: parsing time \"2015-08-15 03:56:00\" as \"2006-01-02T15:04:05Z07:00\": cannot parse \" 03:56:00\" as \"T\"\n</code></pre>\n\n<p>How come it is able to convert it to <code>RFC3339</code> and store it in the database, but when it comes time to get it and format it back to <code>RFC3339</code> so that I can use in my if statement I get an error?</p>\n"}, {"tags": ["linux", "ubuntu", "go", "document"], "comments": [{"owner": {"reputation": 74715, "user_id": 471272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jSlyx.gif?s=128&g=1", "display_name": "tchrist", "link": "https://stackoverflow.com/users/471272/tchrist"}, "edited": false, "score": 0, "creation_date": 1439604430, "post_id": 32020794, "comment_id": 51943817, "body": "You mean something you can print out to read offline?"}, {"owner": {"reputation": 13026, "user_id": 2125837, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/760b6ec2b6e1cba2b0218178425f4cde?s=128&d=identicon&r=PG", "display_name": "xpt", "link": "https://stackoverflow.com/users/2125837/xpt"}, "reply_to_user": {"reputation": 74715, "user_id": 471272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jSlyx.gif?s=128&g=1", "display_name": "tchrist", "link": "https://stackoverflow.com/users/471272/tchrist"}, "edited": false, "score": 0, "creation_date": 1439604734, "post_id": 32020794, "comment_id": 51943859, "body": "no, browse local copy offline."}, {"owner": {"reputation": 1244, "user_id": 1670474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dsYue.jpg?s=128&g=1", "display_name": "dannypaz", "link": "https://stackoverflow.com/users/1670474/dannypaz"}, "reply_to_user": {"reputation": 74715, "user_id": 471272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jSlyx.gif?s=128&g=1", "display_name": "tchrist", "link": "https://stackoverflow.com/users/471272/tchrist"}, "edited": false, "score": 1, "creation_date": 1439609263, "post_id": 32020794, "comment_id": 51944568, "body": "@tchrist that&#39;s opinion and a matter of interpretation. Online could also mean &#39;connected&#39;, and Offline meaning &#39;disconnected&#39;, which would be referring to the internet connection."}, {"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 74715, "user_id": 471272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jSlyx.gif?s=128&g=1", "display_name": "tchrist", "link": "https://stackoverflow.com/users/471272/tchrist"}, "edited": false, "score": 0, "creation_date": 1439614800, "post_id": 32020794, "comment_id": 51945386, "body": "@tchrist so when there&#39;s no wifi around and my laptop says it&#39;s offline, does it mean to tell me that it&#39;s no longer a computer? I know you&#39;re too smart to believe something so absurd."}, {"owner": {"reputation": 1244, "user_id": 1670474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dsYue.jpg?s=128&g=1", "display_name": "dannypaz", "link": "https://stackoverflow.com/users/1670474/dannypaz"}, "reply_to_user": {"reputation": 74715, "user_id": 471272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jSlyx.gif?s=128&g=1", "display_name": "tchrist", "link": "https://stackoverflow.com/users/471272/tchrist"}, "edited": false, "score": 1, "creation_date": 1439614809, "post_id": 32020794, "comment_id": 51945387, "body": "@tchrist It&#39;s not my opinion, it is the definition of &#39;Off-line&#39;. You&#39;ve provided an inaccurate statement that undermines OP, when they are, by definition, correct."}, {"owner": {"reputation": 74715, "user_id": 471272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jSlyx.gif?s=128&g=1", "display_name": "tchrist", "link": "https://stackoverflow.com/users/471272/tchrist"}, "edited": false, "score": 0, "creation_date": 1439640354, "post_id": 32020794, "comment_id": 51950602, "body": "@daanypaz Your definition is merely your opinion. Anybody can make anything up."}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 1, "creation_date": 1439828833, "post_id": 32020794, "comment_id": 52009424, "body": "OP, how did you install Go? What does <code>go version</code> print? Does <code>godoc -http=:6060</code> work if you get a fresh release from golang.org?"}, {"owner": {"reputation": 13026, "user_id": 2125837, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/760b6ec2b6e1cba2b0218178425f4cde?s=128&d=identicon&r=PG", "display_name": "xpt", "link": "https://stackoverflow.com/users/2125837/xpt"}, "edited": false, "score": 0, "creation_date": 1439942694, "post_id": 32020794, "comment_id": 52064987, "body": "updated OP. So you think the problem is the evarlast ppa?"}], "answers": [{"tags": [], "owner": {"reputation": 397892, "user_id": 95592, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/utY5u.jpg?s=128&g=1", "display_name": "Matthew Rankin", "link": "https://stackoverflow.com/users/95592/matthew-rankin"}, "is_accepted": true, "score": 12, "last_activity_date": 1440184766, "last_edit_date": 1592644375, "creation_date": 1440184766, "answer_id": 32147865, "question_id": 32020794, "link": "https://stackoverflow.com/questions/32020794/offline-document-for-go-golang/32147865#32147865", "title": "offline document for go/golang", "body": "<p>According to <a href=\"https://golang.org/doc/install/source#tools\" rel=\"noreferrer\">Installing Go from source</a>:</p>\n<blockquote>\n<p>The source code for several Go tools (including <a href=\"http://godoc.org/golang.org/x/tools/cmd/godoc\" rel=\"noreferrer\">godoc</a>) is kept in the <a href=\"https://godoc.org/golang.org/x/tools\" rel=\"noreferrer\">go.tools repository</a>. To install all of them, run the go get command:</p>\n<p><code>$ go get golang.org/x/tools/cmd/...</code></p>\n<p>Or if you just want to install a specific command (godoc in this case):</p>\n<p><code>$ go get golang.org/x/tools/cmd/godoc</code></p>\n<p>To install these tools, the go get command requires that <a href=\"https://golang.org/doc/install/source#git\" rel=\"noreferrer\">Git</a> be installed locally.</p>\n<p>You must also have a workspace (GOPATH) set up; see <a href=\"https://golang.org/doc/code.html\" rel=\"noreferrer\">How to Write Go Code</a> for the details.</p>\n<p>Note: The go command will install the godoc binary to $GOROOT/bin (or $GOBIN) and the cover and vet binaries to $GOROOT/pkg/tool/$GOOS_$GOARCH. You can access the latter commands with &quot;go tool cover&quot; and &quot;go tool vet&quot;.</p>\n</blockquote>\n<p>Based on that information, have you tried:</p>\n<ol>\n<li>Installing <code>godoc</code> using <code>$ go get golang.org/x/tools/cmd/godoc</code></li>\n<li>Verifying Git is installed using <code>$ git --version</code></li>\n<li>Verifying the GOPATH using <code>$ echo $GOPATH</code></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 13026, "user_id": 2125837, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/760b6ec2b6e1cba2b0218178425f4cde?s=128&d=identicon&r=PG", "display_name": "xpt", "link": "https://stackoverflow.com/users/2125837/xpt"}, "edited": false, "score": 3, "creation_date": 1468941906, "post_id": 38462019, "comment_id": 64329271, "body": "<i>Sigh</i>, I appreciate your enthusiasm, but please at least read the question -- &quot;<i>I thought it would be golang-doc but it is actually not</i>&quot;"}], "tags": [], "owner": {"reputation": 27, "user_id": 6609227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1KT3BWhBhtM/AAAAAAAAAAI/AAAAAAAAACU/pVgRS8nQeNc/photo.jpg?sz=128", "display_name": "einstein liao", "link": "https://stackoverflow.com/users/6609227/einstein-liao"}, "is_accepted": false, "score": 1, "last_activity_date": 1468940800, "last_edit_date": 1468940800, "creation_date": 1468940140, "answer_id": 38462019, "question_id": 32020794, "link": "https://stackoverflow.com/questions/32020794/offline-document-for-go-golang/38462019#38462019", "title": "offline document for go/golang", "body": "<p>you can install pkg:</p>\n\n<pre><code>sudo apt-get install golang-doc\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 630, "user_id": 5485232, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/cz2UJ.jpg?s=128&g=1", "display_name": "Bryon", "link": "https://stackoverflow.com/users/5485232/bryon"}, "is_accepted": false, "score": 19, "last_activity_date": 1528524605, "last_edit_date": 1528524605, "creation_date": 1528524304, "answer_id": 50771402, "question_id": 32020794, "link": "https://stackoverflow.com/questions/32020794/offline-document-for-go-golang/50771402#50771402", "title": "offline document for go/golang", "body": "<p>I am not sure the answer marked as correct is actually the correct answer - I could not access the golang documentation offline using that at least.</p>\n\n<p>This works for me on a Mac. I have not tested it on Ubuntu.</p>\n\n<p>If you have godoc installed, run the following command:</p>\n\n<pre><code>godoc -http=:6060\n</code></pre>\n\n<p>Then open a browser with the following URL: \n<a href=\"http://127.0.0.1:6060/pkg/\" rel=\"noreferrer\">http://127.0.0.1:6060/pkg/</a> </p>\n\n<p>Or <a href=\"http://127.0.0.1:6060/\" rel=\"noreferrer\">http://127.0.0.1:6060/</a> to see the first page of the golang web site.</p>\n\n<p>All of the doco from the gloang web site will then be available to you.</p>\n"}], "owner": {"reputation": 13026, "user_id": 2125837, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/760b6ec2b6e1cba2b0218178425f4cde?s=128&d=identicon&r=PG", "display_name": "xpt", "link": "https://stackoverflow.com/users/2125837/xpt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11413, "favorite_count": 2, "accepted_answer_id": 32147865, "answer_count": 3, "score": 22, "last_activity_date": 1528524605, "creation_date": 1439604288, "last_edit_date": 1521299058, "question_id": 32020794, "link": "https://stackoverflow.com/questions/32020794/offline-document-for-go-golang", "title": "offline document for go/golang", "body": "<p>Is there any Ubuntu go offline document package that I can install so that I can read the package docs for Go offline?</p>\n\n<p>I thought it would be <code>golang-doc</code> but it is actually not -- there aren't any Go package docs in it. </p>\n\n<p>Then I research further and tried </p>\n\n<pre><code>godoc -http=:6060\n</code></pre>\n\n<p>but visiting <a href=\"http://127.0.0.1:6060/pkg/\" rel=\"noreferrer\">http://127.0.0.1:6060/pkg/</a> gives me </p>\n\n<p><code>lstat /usr/lib/go/doc: no such file or directory</code></p>\n\n<p>How to read the Go package docs offline?</p>\n\n<p>PS. My Ubuntu and golang-go package:</p>\n\n<pre><code>$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 15.04\nRelease:        15.04\nCodename:       vivid\n\n$ apt-cache policy golang-go\ngolang-go:\n  Installed: 2:1.4.2\n  Candidate: 2:1.4.2\n  Version table:\n *** 2:1.4.2 0\n        500 http://ppa.launchpad.net/evarlast/golang1.4/ubuntu/ vivid/main amd64\n</code></pre>\n"}, {"tags": ["url", "go", "escaping"], "answers": [{"tags": [], "owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "is_accepted": false, "score": 2, "last_activity_date": 1439601200, "creation_date": 1439601200, "answer_id": 32020566, "question_id": 32020033, "link": "https://stackoverflow.com/questions/32020033/how-can-i-unescape-a-urls-host/32020566#32020566", "title": "How can I unescape a url&#39;s host?", "body": "<p>You can use <code>url.QueryUnescape</code> to decode entities <code>%hh</code> back to the characters:</p>\n\n<pre><code>package main\n\nimport (\n  \"fmt\"\n  \"net/url\"\n  \"strings\"\n)\n\nfunc fixHost(link string) string {\n  if strings.HasPrefix(link, \"http://\") {\n    p := strings.Index(link[7:], \"/\")\n    if -1 != p {\n      host, _ := url.QueryUnescape(link[7:7+p])\n      return \"http://\" + host + link[7+p:]\n    }\n  }\n  return link\n}\n\nfunc main() {\n  fmt.Println(fixHost(\"http://shitenonions%2elibsyn%2ecom/rss\"))\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5208455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb74b9a3cd24fecee5479104aca534f6?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Opolony", "link": "https://stackoverflow.com/users/5208455/justin-opolony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1439601200, "creation_date": 1439595104, "question_id": 32020033, "link": "https://stackoverflow.com/questions/32020033/how-can-i-unescape-a-urls-host", "title": "How can I unescape a url&#39;s host?", "body": "<p>I have the following URL I'm trying to process:</p>\n\n<pre><code>http://shitenonions%2elibsyn%2ecom/rss\n</code></pre>\n\n<p>When I try to create a url out of it in Go, I get the following error:</p>\n\n<pre><code>panic: parse http://shitenonions%2elibsyn%2ecom/rss: hexadecimal escape in host\n</code></pre>\n\n<p>How can I fix this URL so it can be parsed correctly?  I have a large set of URLs and several of them have this problem.</p>\n\n<p>I thought about URL decoding it, but I'm worried that if I do that, it might be incorrect to url decode items besides the host name.</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": true, "score": 4, "last_activity_date": 1439593281, "creation_date": 1439593281, "answer_id": 32019795, "question_id": 32019777, "link": "https://stackoverflow.com/questions/32019777/check-if-point-is-in-rectangle/32019795#32019795", "title": "Check if point is in rectangle", "body": "<p><a href=\"https://golang.org/pkg/image/#Point.In\" rel=\"nofollow\">It\u2019s on <code>Point</code>, not <code>Rectangle</code>:</a></p>\n\n<pre><code>if p.In(r) {\n    \u2026\n}\n</code></pre>\n"}], "owner": {"reputation": 8149, "user_id": 616644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wVwGC.png?s=128&g=1", "display_name": "Rick Smith", "link": "https://stackoverflow.com/users/616644/rick-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 32019795, "answer_count": 1, "score": 5, "last_activity_date": 1439593281, "creation_date": 1439593172, "question_id": 32019777, "link": "https://stackoverflow.com/questions/32019777/check-if-point-is-in-rectangle", "title": "Check if point is in rectangle", "body": "<p>I have an <code>image.Point</code> and an <code>image.Rectangle</code>.  I'd like to know how to check if the point is in the rectangle.  I know that I can manually check with:</p>\n\n<pre><code>p := image.Point{}\nr := image.Rect{}\n\nif r.Min.X &lt;= p.X &amp;&amp; p.X &lt; r.Max.X &amp;&amp; r.Min.Y &lt;= p.Y &amp;&amp; p.Y &lt; r.Max.Y {\n    // Point is in the rectangle!\n}\n</code></pre>\n\n<p>But that is a pain!  Is there a better way to do this?  I can't find a <code>Contains()</code> in the <a href=\"https://golang.org/pkg/image/#Rectangle\" rel=\"noreferrer\">documentation</a>.</p>\n"}, {"tags": ["go", "cassandra"], "comments": [{"owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "edited": false, "score": 0, "creation_date": 1439630739, "post_id": 32019700, "comment_id": 51948309, "body": "I would have said that the package is broken, but I successfully installed it right now on my machine. Try to do a <code>go get -u</code> in case it really was broken and got fixed in the meantime."}, {"owner": {"reputation": 261, "user_id": 2636324, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/639550655/picture?type=large", "display_name": "Aaron Kenny", "link": "https://stackoverflow.com/users/2636324/aaron-kenny"}, "reply_to_user": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "edited": false, "score": 0, "creation_date": 1439632346, "post_id": 32019700, "comment_id": 51948699, "body": "Figured out the problem... I was using an old version of Go. I feel stupid :("}, {"owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "edited": false, "score": 0, "creation_date": 1439633370, "post_id": 32019700, "comment_id": 51948924, "body": "Happens to us all one time or another..."}], "answers": [{"tags": [], "owner": {"reputation": 261, "user_id": 2636324, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/639550655/picture?type=large", "display_name": "Aaron Kenny", "link": "https://stackoverflow.com/users/2636324/aaron-kenny"}, "is_accepted": false, "score": 0, "last_activity_date": 1439632388, "creation_date": 1439632388, "answer_id": 32023563, "question_id": 32019700, "link": "https://stackoverflow.com/questions/32019700/installing-gocql-error/32023563#32023563", "title": "Installing gocql error", "body": "<p>Figured out the problem... I was using an old version of Go. I feel stupid :( \u2013</p>\n"}], "owner": {"reputation": 261, "user_id": 2636324, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/639550655/picture?type=large", "display_name": "Aaron Kenny", "link": "https://stackoverflow.com/users/2636324/aaron-kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1439632388, "creation_date": 1439592613, "last_edit_date": 1439628547, "question_id": 32019700, "link": "https://stackoverflow.com/questions/32019700/installing-gocql-error", "title": "Installing gocql error", "body": "<p>Hello folks I'm trying to '$ go get github.com/gocql/gocql' to install on a Ubuntu AWS box. Any advice at all much appreciated.</p>\n\n<p>I'm logging in as ubuntu@some.ip.adre.ss</p>\n\n<p>general file structure is</p>\n\n<pre><code>/home/ubuntu\n/home/ubuntu/go\n/home/ubuntu/cassandra\n</code></pre>\n\n<p>-</p>\n\n<pre><code>$ go get github.com/gocql/gocql\n# github.com/gocql/gocql\nsrc/github.com/gocql/gocql/conn.go:137:19: error: reference to undefined identifier \u2018tls.DialWithDialer\u2019\n   conn, err = tls.DialWithDialer(dialer, \"tcp\", addr, cfg.tlsConfig)\n               ^\nsrc/github.com/gocql/gocql/frame.go:242:23: error: reference to undefined identifier \u2018sync.Pool\u2019\n var framerPool = sync.Pool{\n                   ^\nsrc/github.com/gocql/gocql/frame.go:242:27: error: expected \u2018;\u2019 or newline after top level declaration\n var framerPool = sync.Pool{\n                       ^\nsrc/github.com/gocql/gocql/frame.go:248:2: error: expected declaration\n  },\n  ^\n</code></pre>\n\n<p>My golang setup is...</p>\n\n<pre><code>$ go env\nGOARCH=\"amd64\"\nGOBIN=\"\"\nGOCHAR=\"6\"\nGOEXE=\"\"\nGOHOSTARCH=\"amd64\"\nGOHOSTOS=\"linux\"\nGOOS=\"linux\"\nGOPATH=\"/home/ubuntu/go\"\nGORACE=\"\"\nGOROOT=\"/usr\"\nGOTOOLDIR=\"/usr/pkg/tool/linux_amd64\"\nTERM=\"dumb\"\nCC=\"gcc\"\nGOGCCFLAGS=\"-g -O2 -fPIC -m64 -pthread\"\nCXX=\"g++\"\nCGO_ENABLED=\"1\"\n</code></pre>\n\n<p>My Java details are:</p>\n\n<pre><code>$ java -version\njava version \"1.8.0_51\"\nJava(TM) SE Runtime Environment (build 1.8.0_51-b16)\nJava HotSpot(TM) 64-Bit Server VM (build 25.51-b03, mixed mode)\n</code></pre>\n\n<p>Cassandra:</p>\n\n<pre><code>home/ubuntu/cassandra/bin$ ./cqlsh\nConnected to Test Cluster at localhost:9160.\n[cqlsh 4.1.1 | Cassandra 2.0.16 | CQL spec 3.1.1 | Thrift protocol 19.39.0]\nUse HELP for help.\ncqlsh&gt; \n</code></pre>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 5086822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/853c6f82008ed7b4728c143159e206f1?s=128&d=identicon&r=PG", "display_name": "Zhuharev", "link": "https://stackoverflow.com/users/5086822/zhuharev"}, "is_accepted": false, "score": 2, "last_activity_date": 1439587738, "creation_date": 1439587738, "answer_id": 32018921, "question_id": 32018577, "link": "https://stackoverflow.com/questions/32018577/go-select-channels-and-collect-results/32018921#32018921", "title": "Go select channels and collect results", "body": "<p>all results collected this line <code>output &lt;- results</code></p>\n\n<pre><code>case res &lt;- results:\n    outstanding--\n    output &lt;- results\n</code></pre>\n\n<p>this part of snippet is wrong, because then the double recieved chanel.</p>\n\n<p>Must be:</p>\n\n<pre><code>case res &lt;- results:\n    outstanding--\n    output &lt;- res\n</code></pre>\n"}], "owner": {"reputation": 764, "user_id": 1398066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/213b36a51eaf5c87bf8a7db78176770b?s=128&d=identicon&r=PG", "display_name": "P&#233;ter Szakszon", "link": "https://stackoverflow.com/users/1398066/p%c3%a9ter-szakszon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439619573, "creation_date": 1439586038, "last_edit_date": 1439619573, "question_id": 32018577, "link": "https://stackoverflow.com/questions/32018577/go-select-channels-and-collect-results", "title": "Go select channels and collect results", "body": "<p>Here's the code snippet:</p>\n\n<pre><code>for !done &amp;&amp; outstanding &gt; 0 {\n  select {\n  case signals := &lt;- input:\n    outstanding++\n    go func() { results &lt;- FFT(signals) }()\n  case res &lt;- results:\n    outstanding--\n    output &lt;- results\n  case &lt;- ctx.Done():\n    done = true\n  }\n}\n</code></pre>\n\n<p><a href=\"https://www.youtube.com/watch?v=3EW1hZ8DVyw&amp;t=16m53s\" rel=\"nofollow\">In this video</a> Richard Fliam says that:</p>\n\n<blockquote>\n  <p>In this code snippet we're farming out some work to multiple cores for FFTs. When cancellation is done on all outstanding results are collected and sent <strong>before</strong> the function returns. If we did not collect the results in this case we would have a memory leak. You can see that's because I'm not selecting against the Done context in that go func.</p>\n</blockquote>\n\n<p>But when there are some outstanding results (the outstanding variable is greater than zero) and the operation is cancelled then the done variable is set to true and then the condition of the for loop would evaluate to false, so the outstanding results would not be collected.</p>\n\n<p>Why does he say that the outstanding results are collected <strong>before</strong> the the function returns?</p>\n\n<p>I'm new to go. Maybe I don't understand something fundamental concept.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>IMO the outstanding results would always be collected if the condition of the for loop was the following:</p>\n\n<pre><code>// logical OR instead of AND\nfor !done || outstanding &gt; 0 { ... }\n</code></pre>\n\n<p>Because when the operation is cancelled and there are still some outstanding results the condition of the for loop would evaluate to true. If all outstanding results arrive the for loop will end.</p>\n"}, {"tags": ["file-io", "go", "gzip"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1439586017, "post_id": 32018130, "comment_id": 51939638, "body": "In addition to what <a href=\"http://stackoverflow.com/a/32018378/55504\">@JimB says</a>,  you&#39;re mis-using <code>Read</code>. You need to pass it an allocated slice you want it to put bytes into, you pass a nil slice (<code>len(fileContents)</code> == 0 so you&#39;re asking for zero bytes)."}], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 3, "creation_date": 1439586119, "post_id": 32018569, "comment_id": 51939676, "body": "It&#39;s also important to note that <code>Read</code> can return after reading fewer bytes. If you need to read the fully byte slice passed in use <a href=\"https://golang.org/pkg/io/#ReadFull\" rel=\"nofollow noreferrer\"><code>io.ReadFull</code></a>; if you want the full contents use <a href=\"https://golang.org/pkg/io/ioutil/#ReadAll\" rel=\"nofollow noreferrer\"><code>ioutil.ReadAll</code></a> (but avoid that unless you really need to pre-read the entire contents)."}, {"owner": {"reputation": 1662, "user_id": 786821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f73f56fed713342efd1038eba8b1f05e?s=128&d=identicon&r=PG", "display_name": "SunSparc", "link": "https://stackoverflow.com/users/786821/sunsparc"}, "edited": false, "score": 0, "creation_date": 1439586877, "post_id": 32018569, "comment_id": 51939996, "body": "I did end up using <code>ioutil.ReadAll</code>. But I was still curious about why the gzip <code>Read</code> was not working. This helps me understand. It would be helpful if this was mentioned on the <a href=\"http://golang.org/pkg/compress/gzip/#Reader.Read\" rel=\"nofollow noreferrer\">doc page</a>. But I suppose it would be assumed knowledge if I had a better understanding of <code>io.Reader</code>."}], "tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": true, "score": 4, "last_activity_date": 1439586520, "last_edit_date": 1439586520, "creation_date": 1439586011, "answer_id": 32018569, "question_id": 32018130, "link": "https://stackoverflow.com/questions/32018130/golang-why-does-the-compress-gzip-read-function-not-read-file-contents/32018569#32018569", "title": "Golang: Why does the compress/gzip Read function not read file contents?", "body": "<p><a href=\"http://golang.org/pkg/io/#Reader\" rel=\"nofollow\"><code>io.Reader.Read</code></a> will only read up to <code>len(b)</code> bytes. Since your <code>fileContents</code> is nil, its length is 0. Allocate some space for it to read into:</p>\n\n<pre><code>fileContents := make([]byte, 1024) // Read by 1 KiB.\nbytesRead, err := zipReader.Read(fileContents)\nif err != nil {\n    fmt.Println(\"[ERROR] Reading gzip file:\", err)\n}\nfileContents = fileContents[:bytesRead]\n</code></pre>\n\n<p>If you want to read the whole file, you'll have to either use <code>Read</code> several times, or use things like <a href=\"https://golang.org/pkg/io/ioutil/#ReadAll\" rel=\"nofollow\"><code>ioutil.ReadAll</code></a> (which may be bad for big files).</p>\n"}], "owner": {"reputation": 1662, "user_id": 786821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f73f56fed713342efd1038eba8b1f05e?s=128&d=identicon&r=PG", "display_name": "SunSparc", "link": "https://stackoverflow.com/users/786821/sunsparc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2194, "favorite_count": 0, "accepted_answer_id": 32018569, "answer_count": 1, "score": 1, "last_activity_date": 1439586520, "creation_date": 1439583970, "last_edit_date": 1439585267, "question_id": 32018130, "link": "https://stackoverflow.com/questions/32018130/golang-why-does-the-compress-gzip-read-function-not-read-file-contents", "title": "Golang: Why does the compress/gzip Read function not read file contents?", "body": "<p>I made a text file, that I then compressed with <code>gzip</code>. I then run the following <code>go</code> program to read the contents of that compressed file.</p>\n\n<pre><code>package main\n\nimport (\n    \"compress/gzip\"\n    \"fmt\"\n    \"os\"\n)\n\nfunc main() {\n    handle, err := os.Open(\"zipfile.gz\")\n    if err != nil {\n        fmt.Println(\"[ERROR] File Open:\", err)\n    }\n    defer handle.Close()\n\n    zipReader, err := gzip.NewReader(handle)\n    if err != nil {\n        fmt.Println(\"[ERROR] New gzip reader:\", err)\n    }\n    defer zipReader.Close()\n\n    var fileContents []byte\n    bytesRead, err := zipReader.Read(fileContents)\n    if err != nil {\n        fmt.Println(\"[ERROR] Reading gzip file:\", err)\n    }\n    fmt.Println(\"[INFO] Number of bytes read from the file:\", bytesRead)\n    fmt.Printf(\"[INFO] Uncompressed contents: '%s'\\n\", fileContents)\n}\n</code></pre>\n\n<p>The response that I get is the following:</p>\n\n<pre><code>$ go run zipRead.go\n[INFO] Number of bytes read from the file: 0\n[INFO] Uncompressed contents: ''\n</code></pre>\n\n<p>Why am I not getting any contents from the file?</p>\n\n<p>I have created zip files on both OS X and Ubuntu. I have build this <code>go</code> program on both OS X and Ubuntu with the same result.</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439575068, "post_id": 32016057, "comment_id": 51934404, "body": "That&#39;s what I thought but if you look at the revisions on GH then the author of the code made a change to this specifically. See the latest revision here: <a href=\"https://gist.github.com/bsphere/8369aca6dde3e7b4392c/revisions\" rel=\"nofollow noreferrer\">gist.github.com/bsphere/8369aca6dde3e7b4392c/revisions</a>"}, {"owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439575159, "post_id": 32016057, "comment_id": 51934443, "body": "Also do you know how I would implement this package when creating a new user?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 1, "creation_date": 1439575745, "post_id": 32016057, "comment_id": 51934741, "body": "The change makes no sense, since it&#39;s no longer valid Go. It&#39;s easy to verify by compiling it. I wouldn&#39;t put much faith in a random chunk of code off a blog post."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439575773, "post_id": 32016057, "comment_id": 51934759, "body": "I have no idea what you mean by &quot;implement this package when creating a new user&quot;."}, {"owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439576142, "post_id": 32016057, "comment_id": 51934955, "body": "I&#39;m only testing it - what I mean by implement is how do create a new User with a <code>created_at</code> field with the timestamp as a value."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439576838, "post_id": 32016057, "comment_id": 51935356, "body": "@tommyd456: Ah, I see. Added an example of created a <code>*Timestamp</code> inline."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 4, "last_activity_date": 1439583184, "last_edit_date": 1439583184, "creation_date": 1439574983, "answer_id": 32016057, "question_id": 32015364, "link": "https://stackoverflow.com/questions/32015364/timestamps-in-golang/32016057#32016057", "title": "Timestamps in Golang", "body": "<p>Your code has a typo. You can't dereference a non-pointer, so you need to make GetBSON a pointer receiver (or you could remove the indirects to <code>t</code>, since the value of <code>t</code> isn't changed by the method). </p>\n\n<pre><code>func (t *Timestamp) GetBSON() (interface{}, error) {\n</code></pre>\n\n<p>To set a <code>*Timestamp</code> value inline, you need to have a <code>*time.Time</code> to convert.</p>\n\n<pre><code>now := time.Now()\nu := User{\n    Name:      \"Bob\",\n    CreatedAt: (*Timestamp)(&amp;now),\n}\n</code></pre>\n\n<p>Constructor and a helper functions like <code>New()</code> and <code>Now()</code> may come in handy for this as well.</p>\n"}, {"comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1439580019, "post_id": 32017210, "comment_id": 51936937, "body": "You cannot take the address of a function return (<code>&amp;time.Now()</code>) nor can you take the address of a conversion (<code>&amp;timestamp.Timestamp(time.Now())</code>). That line isn&#39;t valid Go."}, {"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1439586402, "post_id": 32017210, "comment_id": 51939811, "body": "@JimB you&#39;re right. I was too quick. That part removed thanks."}], "tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": false, "score": 0, "last_activity_date": 1439586374, "last_edit_date": 1439586374, "creation_date": 1439579536, "answer_id": 32017210, "question_id": 32015364, "link": "https://stackoverflow.com/questions/32015364/timestamps-in-golang/32017210#32017210", "title": "Timestamps in Golang", "body": "<p>You cannot refer to an indirection of something that is not a pointer variable.</p>\n\n<pre><code>var a int = 3         // a = 3\nvar A *int = &amp;a       // A = 0x10436184\nfmt.Println(*A == a)  // true, both equals 3\nfmt.Println(*&amp;a == a) // true, both equals 3\nfmt.Println(*a)       // invalid indirect of a (type int)\n</code></pre>\n\n<p><strong>Thus, you can not reference the address of <code>a</code> with <code>*a</code>.</strong></p>\n\n<p>Looking at where the error happens:</p>\n\n<pre><code>func (t Timestamp) GetBSON() (interface{}, error) {\n        // t is a variable type Timestamp, not type *Timestamp (pointer)\n\n        // so this is not possible at all, unless t is a pointer variable\n        // and you're trying to dereference it to get the Timestamp value\n        if time.Time(*t).IsZero() {\n                return nil, nil\n        }\n        // so is this\n        return time.Time(*t), nil\n}\n</code></pre>\n"}], "owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12758, "favorite_count": 1, "accepted_answer_id": 32016057, "answer_count": 2, "score": 3, "last_activity_date": 1439586374, "creation_date": 1439572292, "last_edit_date": 1439573069, "question_id": 32015364, "link": "https://stackoverflow.com/questions/32015364/timestamps-in-golang", "title": "Timestamps in Golang", "body": "<p>Trying to get this approach to timestamps working in my application: <a href=\"https://gist.github.com/bsphere/8369aca6dde3e7b4392c#file-timestamp-go\" rel=\"nofollow\">https://gist.github.com/bsphere/8369aca6dde3e7b4392c#file-timestamp-go</a></p>\n\n<p>Here it is:</p>\n\n<pre><code>package timestamp\n\nimport (\n    \"fmt\"\n    \"labix.org/v2/mgo/bson\"\n    \"strconv\"\n    \"time\"\n)\n\ntype Timestamp time.Time\n\nfunc (t *Timestamp) MarshalJSON() ([]byte, error) {\n    ts := time.Time(*t).Unix()\n    stamp := fmt.Sprint(ts)\n\n    return []byte(stamp), nil\n}\n\nfunc (t *Timestamp) UnmarshalJSON(b []byte) error {\n    ts, err := strconv.Atoi(string(b))\n    if err != nil {\n        return err\n    }\n\n    *t = Timestamp(time.Unix(int64(ts), 0))\n\n    return nil\n}\n\nfunc (t Timestamp) GetBSON() (interface{}, error) {\n    if time.Time(*t).IsZero() {\n        return nil, nil\n    }\n\n    return time.Time(*t), nil\n}\n\nfunc (t *Timestamp) SetBSON(raw bson.Raw) error {\n    var tm time.Time\n\n    if err := raw.Unmarshal(&amp;tm); err != nil {\n        return err\n    }\n\n    *t = Timestamp(tm)\n\n    return nil\n}\n\nfunc (t *Timestamp) String() string {\n    return time.Time(*t).String()\n}\n</code></pre>\n\n<p>and the article that goes with it: <a href=\"https://medium.com/coding-and-deploying-in-the-cloud/time-stamps-in-golang-abcaf581b72f\" rel=\"nofollow\">https://medium.com/coding-and-deploying-in-the-cloud/time-stamps-in-golang-abcaf581b72f</a></p>\n\n<p>However, I'm getting the following error:</p>\n\n<pre><code>core/timestamp/timestamp.go:31: invalid indirect of t (type Timestamp)                                                                                                                                                     \ncore/timestamp/timestamp.go:35: invalid indirect of t (type Timestamp)\n</code></pre>\n\n<p>My relevant code looks like this:</p>\n\n<pre><code>import (\n    \"github.com/path/to/timestamp\"\n)\n\ntype User struct {\n    Name        string\n    Created_at  *timestamp.Timestamp  `bson:\"created_at,omitempty\" json:\"created_at,omitempty\"`\n} \n</code></pre>\n\n<p>Can anyone see what I'm doing wrong?</p>\n\n<p><strong>Related question</strong>\nI can't see how to implement this package either. Do I create a new User model something like this?</p>\n\n<pre><code>u := User{Name: \"Joe Bloggs\", Created_at: timestamp.Timestamp(time.Now())}\n</code></pre>\n"}, {"tags": ["go", "decimal", "floating-point-conversion"], "comments": [{"owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "edited": false, "score": 0, "creation_date": 1439561570, "post_id": 32011181, "comment_id": 51926666, "body": "Not really an answer, but if you&#39;re willing to try go1.5 you can look into <a href=\"https://github.com/golang/go/blob/master/src/math/big/float.go\" rel=\"nofollow noreferrer\">big.Float</a>"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 3, "creation_date": 1439563200, "post_id": 32011181, "comment_id": 51927734, "body": "I don&#39;t have time to format this into an answer (if you start walking through the code, you can see why), but converting a float64 to a string is basically the same operation, since the string representation is base 10. You can walk through the conversion starting at <a href=\"http://golang.org/src/strconv/ftoa.go\" rel=\"nofollow noreferrer\">strconv.AppendFloat</a>, which has all the math. TLDR; using strconv isn&#39;t really that bad."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1439563514, "post_id": 32011181, "comment_id": 51927939, "body": "Oh, and if you want to see how the <code>fmt</code> package converts that to e+ notation, look for <code>fotmatFloat</code> in <code>fmt&#47;format.go</code>."}], "answers": [{"comments": [{"owner": {"reputation": 448, "user_id": 4742941, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/03597e35f96065ea034b3baaeb27f908?s=128&d=identicon&r=PG&f=1", "display_name": "leylandski", "link": "https://stackoverflow.com/users/4742941/leylandski"}, "edited": false, "score": 0, "creation_date": 1439799446, "post_id": 32020642, "comment_id": 51991100, "body": "Precision is the main reason I am going through all this trouble. Is the error margin when doing this the same as when using regular floats?"}, {"owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "reply_to_user": {"reputation": 448, "user_id": 4742941, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/03597e35f96065ea034b3baaeb27f908?s=128&d=identicon&r=PG&f=1", "display_name": "leylandski", "link": "https://stackoverflow.com/users/4742941/leylandski"}, "edited": false, "score": 0, "creation_date": 1439813944, "post_id": 32020642, "comment_id": 51999775, "body": "As you see the precision is about 10^-17 for the coefficient."}], "tags": [], "owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "is_accepted": false, "score": 0, "last_activity_date": 1439602312, "creation_date": 1439602312, "answer_id": 32020642, "question_id": 32011181, "link": "https://stackoverflow.com/questions/32011181/how-do-i-convert-a-float64-stored-as-base-2-to-a-coefficient-and-exponent-in-b/32020642#32020642", "title": "How do I convert a float64 (stored as base-2) to a coefficient and exponent in base-10?", "body": "<p>It may be not 100% precise, but you can use Log10:</p>\n\n<pre><code>package main\n\nimport (\n  \"fmt\"\n  \"math\"\n)\n\nfunc parts(v float64) (float64, int) {\n  e := math.Floor(math.Log10(v))\n  c := v / math.Pow(10, e)\n  return c, int(e)\n}\n\nfunc main() {\n  c, e := parts(1348.234e134)\n  fmt.Printf(\"%v * 10^%v\", c, e) // 1.3482339999999997 * 10^137\n}\n</code></pre>\n"}], "owner": {"reputation": 448, "user_id": 4742941, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/03597e35f96065ea034b3baaeb27f908?s=128&d=identicon&r=PG&f=1", "display_name": "leylandski", "link": "https://stackoverflow.com/users/4742941/leylandski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 541, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1439602312, "creation_date": 1439558615, "question_id": 32011181, "link": "https://stackoverflow.com/questions/32011181/how-do-i-convert-a-float64-stored-as-base-2-to-a-coefficient-and-exponent-in-b", "title": "How do I convert a float64 (stored as base-2) to a coefficient and exponent in base-10?", "body": "<p>I'm looking for an algorithm that takes a 64-bit floating point number and outputs an exponent and coefficient so the input can be represented in the form <code>float64 input = coefficient * 10 ^ exponent</code>.</p>\n\n<p>Supposedly this is 'not trivial', and many implementations of accurate decimal formats for Golang (which doesn't have a built-in decimal type) have some kind of hack for it like converting to a string and parsing that. While that solution does work in the packages I've seen, it just seems 'proper' to do it the mathematical/computer science-y way.</p>\n"}, {"tags": ["sql", "sql-server", "go", "database-connection"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1439557458, "post_id": 32010749, "comment_id": 51923862, "body": "Shared Memory protocol is enabled ?  Named Pipes protocol is enabled ?  <a href=\"http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/\" rel=\"nofollow noreferrer\">blog.sqlauthority.com/2009/05/21/&hellip;</a>"}, {"owner": {"reputation": 811, "user_id": 3566771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ccf73cc27323f292279d2698b3b51c?s=128&d=identicon&r=PG&f=1", "display_name": "Jahirul Islam Bhuiyan", "link": "https://stackoverflow.com/users/3566771/jahirul-islam-bhuiyan"}, "edited": false, "score": 0, "creation_date": 1439558107, "post_id": 32010749, "comment_id": 51924281, "body": "this may help <a href=\"https://github.com/denisenkom/go-mssqldb\" rel=\"nofollow noreferrer\">github.com/denisenkom/go-mssqldb</a>"}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 3, "creation_date": 1439577378, "post_id": 32010749, "comment_id": 51935676, "body": "If you&#39;re getting the error when you try to connect with the GUI management studio then there is a problem with your mssql setup your code looks fine, I&#39;d make sure you have mssql setup properly."}], "answers": [{"comments": [{"owner": {"reputation": 13026, "user_id": 2125837, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/760b6ec2b6e1cba2b0218178425f4cde?s=128&d=identicon&r=PG", "display_name": "xpt", "link": "https://stackoverflow.com/users/2125837/xpt"}, "edited": false, "score": 1, "creation_date": 1472482768, "post_id": 39008249, "comment_id": 65757462, "body": "Thanks a lot @RichardChambers. Appreciate your comprehensive answer to give people like me an easy start."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 13026, "user_id": 2125837, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/760b6ec2b6e1cba2b0218178425f4cde?s=128&d=identicon&r=PG", "display_name": "xpt", "link": "https://stackoverflow.com/users/2125837/xpt"}, "edited": false, "score": 0, "creation_date": 1472511729, "post_id": 39008249, "comment_id": 65771372, "body": "@xpt, you are welcome. Since the moderators failed your edit, I have put it back. Thank you for taking the time to attempt an update on what you found."}, {"owner": {"reputation": 164, "user_id": 664422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2a3b0627abc616f9a92684639312496?s=128&d=identicon&r=PG", "display_name": "eremmel", "link": "https://stackoverflow.com/users/664422/eremmel"}, "edited": false, "score": 1, "creation_date": 1563889539, "post_id": 39008249, "comment_id": 100844911, "body": "I was not able to connect to SQL server instance on the same host with SSO. I found <a href=\"https://github.com/denisenkom/go-mssqldb/issues/177#issuecomment-258572674\" rel=\"nofollow noreferrer\">here</a> that adding <code>ServerSPN=MSSQLSvc&#47;127.0.0.1:49878;</code> resolves the issue. This is in combination with telegraf. It might already be solved in the latest go module (not distrubuted with telegraf yet)."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 164, "user_id": 664422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2a3b0627abc616f9a92684639312496?s=128&d=identicon&r=PG", "display_name": "eremmel", "link": "https://stackoverflow.com/users/664422/eremmel"}, "edited": false, "score": 0, "creation_date": 1563896673, "post_id": 39008249, "comment_id": 100849280, "body": "@eremmel according to <a href=\"https://blogs.technet.microsoft.com/fort_sql/2012/07/03/sql-server-ports/\" rel=\"nofollow noreferrer\">blogs.technet.microsoft.com/fort_sql/2012/07/03/&hellip;</a> the port number of 49878 is a dynamic TCP port used for named instances. You can also create a static, known port for a particular instance. Do you know if telegraf is using port 49878 as a static port for an SQL Server instance? Does the <code>ServerSPN=MSSQLSvc&#47;127.0.0.1:49878;</code> create a Service Principal Name for the named SQL Server instance on the localhost at that port number?"}], "tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 15, "last_activity_date": 1472511678, "last_edit_date": 1472511678, "creation_date": 1471480652, "answer_id": 39008249, "question_id": 32010749, "link": "https://stackoverflow.com/questions/32010749/go-with-sql-server-driver-is-unable-to-connect-successfully-login-fail/39008249#39008249", "title": "Go with SQL Server driver is unable to connect successfully, login fail", "body": "<p>I want to share my experience working out a simple demo Go language database program using SQL Server Express 2008. I believe that the following lessons learned will apply to any SQL Server version from 2008 and later.</p>\n\n<p>My SQL Server Express was previously installed with the <code>default</code> instance rather than a <code>named</code> instance. It was also installed to use Windows Authentication. Both of these settings were required by other development work that I do. The other work that I do uses SQL Server Express on the same PC as the application as a local database engine. I was expecting to be able to use Windows Authentication with SQL Server in my Go application.</p>\n\n<p>Looking for a driver and a small sample program to use with a local SQL Server and Go, this question came up in my search. I thought to add a bit of additional information and a sample program to help others to get started and learn from my mistakes. I also found <a href=\"http://bsilverstrim.blogspot.com/2015/08/golang-and-mssql-databases-example.html\" rel=\"noreferrer\">this article GoLang and MSSQL Databases: An Example</a> helpful especially after making sufficient mistakes that I understood it better.</p>\n\n<p>The final version of my test program is as follows:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"database/sql\"\n     _ \"github.com/denisenkom/go-mssqldb\"     // the underscore indicates the package is used\n)    \n\nfunc main() {\n    fmt.Println(\"starting app\")\n\n    // the user needs to be setup in SQL Server as an SQL Server user.\n    // see create login and the create user SQL commands as well as the\n    // SQL Server Management Studio documentation to turn on Hybrid Authentication\n    // which allows both Windows Authentication and SQL Server Authentication.\n    // also need to grant to the user the proper access permissions.\n    // also need to enable TCP protocol in SQL Server Configuration Manager.\n    //\n    // you could also use Windows Authentication if you specify the fully qualified\n    // user id which would specify the domain as well as the user id.\n    // for instance you could specify \"user id=domain\\\\user;password=userpw;\".\n\n    condb, errdb := sql.Open(\"mssql\", \"server=localhost;user id=gouser;password=g0us3r;\")\n    if errdb  != nil {\n        fmt.Println(\"  Error open db:\", errdb.Error())\n    }\n\n    defer condb.Close()\n\n    errdb = condb.Ping()\n    if errdb != nil {\n        log.Fatal(errdb)\n    }\n\n    // drop the database if it is there so we can recreate it\n    // next we will recreate the database, put a table into it,\n    // and add a few rows.\n    _, errdb = condb.Exec(\"drop database mydbthing\")\n    if errdb != nil {\n        fmt.Println(\"  Error Exec db: drop db - \", errdb.Error())\n    }\n\n    _, errdb = condb.Exec(\"create database mydbthing\")\n    if errdb  != nil {\n        fmt.Println(\"  Error Exec db: create db - \", errdb.Error())\n    }\n\n    _, errdb = condb.Exec(\"use  mydbthing\")\n    if errdb  != nil {\n        fmt.Println(\"  Error Exec db: using db - \", errdb.Error())\n    }\n\n    _, errdb = condb.Exec(\"create table junky (one int, two int)\")\n    if errdb  != nil {\n        fmt.Println(\"  Error Exec db: create table - \", errdb.Error())\n    }\n\n    _, errdb = condb.Exec(\"insert into junky (one, two) values (101, 201)\")\n    if errdb  != nil {\n        fmt.Println(\"  Error Exec db: insert table 1 - \", errdb.Error())\n    }\n    _, errdb = condb.Exec(\"insert into junky (one, two) values (102, 202)\")\n    if errdb  != nil {\n        fmt.Println(\"  Error Exec db: insert table 2 - \", errdb.Error())\n    }\n    _, errdb = condb.Exec(\"insert into junky (one, two) values (103, 203)\")\n    if errdb  != nil {\n        fmt.Println(\"  Error Exec db: insert table 3 - \", errdb.Error())\n    }\n\n    // Now that we have our database lets read some records and print them.\n    var (\n        one  int\n        two  int\n    )\n\n    // documentation about a simple query and results loop is at URL\n    // http://go-database-sql.org/retrieving.html\n    // we use Query() and not Exec() as we expect zero or more rows to\n    // be returned. only use Query() if rows may be returned.\n    fmt.Println (\"  Query our table for the three rows we inserted.\")\n    rows, errdb := condb.Query (\"select one, two from junky\")\n    defer rows.Close()\n    for rows.Next() {\n        err:= rows.Scan (&amp;one, &amp;two)\n        if err != nil {\n            fmt.Println(\"  Error Query db: select - \", err.Error())\n        } else {\n            fmt.Printf(\"    - one %d and two %d\\n\", one, two)\n        }\n    }\n    rows.Close()\n\n    errdb = rows.Err()\n    if errdb != nil {\n        fmt.Println(\"  Error Query db: processing rows - \", errdb.Error())\n    }\n\n    fmt.Println(\"ending app\")\n}\n</code></pre>\n\n<p>The first time the above application is run once the necessary changes to SQL Server settings are made, it will generate the following output. Since the database does not exist the first time the program is run, you will see the error message printed. However subsequent times it is run the database will exist and the error message when the database is dropped exist will not be output.</p>\n\n<pre><code>starting app\n  Error Exec db: drop db -  mssql: Cannot drop the database 'mydbthing', because it does not exist or you do not have permission.\n  Query our table for the three rows we inserted.\n    - one 101 and two 201\n    - one 102 and two 202\n    - one 103 and two 203\nending app\n</code></pre>\n\n<p><strong>Installing the SQL Server Driver package</strong></p>\n\n<p>The first thing I had to do was to find a database driver package that would work with SQL Server. Several stackoverflow postings recommended <code>github.com/denisenkom/go-mssqldb</code> so that is what used.</p>\n\n<p>In order to use the <code>github.com/denisenkom/go-mssqldb</code> package I had to first retrieve it from the github repository using <code>go get github.com/denisenkom/go-mssqldb</code> from the command shell window created by running <code>Git Shell</code>.</p>\n\n<p><code>Git Shell</code> is the github shell that is installed as part of installing Git. I found that I had to run the <code>go get</code> command in the <code>Git Shell</code> in order for the <code>go</code> command to find the <code>git</code> application and access the github repository. When I tried to run the <code>go get</code> command from a normal command shell I saw an error message indicating that the <code>git</code> command could not be found.</p>\n\n<p>After installing the <code>go-mssqldb</code> package I was able to run my sample application and kept running into a runtime error from the <code>Open()</code>. The output from my application was the following:</p>\n\n<pre><code>starting app\n\nError Exec db: create db -  Unable to open tcp connection with host 'localhost:1433': dial tcp 127.0.0.1:1433: connectex: No connection could be made because the target machine actively refused it.\n\nending app\n</code></pre>\n\n<p><strong>Enabling TCP connections for SQL Server</strong></p>\n\n<p>After some searching I found a number of different sites which all indicated that the error meant that my SQL Server instance was not configured for TCP/IP. The various postings indicated I needed to use the <code>Sql Server Configuration Manager</code> to enable TCP/IP.</p>\n\n<p>What I discovered is that there are actually two places where TCP/IP needs to be enabled. One was <code>Client Protocols</code> and that was indeed already enabled. However the other was <code>Protocols for MSSQLSERVER</code> and in that one TCP/IP was disabled. So I enabled TCP/IP in the <code>Protocols for MSSQLSERVER</code> section, then restarted the SQL Server service using the Service utility of the Administrative Tools from the Control Panel.\n<a href=\"https://i.stack.imgur.com/sFnbN.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sFnbN.png\" alt=\"Using SQL Server Configuration Manager to enable TCP\"></a></p>\n\n<p>However I was still having problems with any kind of a query after using <code>sql.Open()</code>. I was seeing application output that was some variation of the following. The error message was the same however when function calls had errors could change from one run to the next. I tried changing the connection string specified in the <code>sql.Open()</code> with no results other than different error messages.</p>\n\n<pre><code>starting app\n  Error Exec db: create db -  driver: bad connection\n  Error Exec db: create table -  driver: bad connection\nending app\n</code></pre>\n\n<p>Poking around further I found this note in the github repository:</p>\n\n<blockquote>\n  <p>Known Issues</p>\n  \n  <p>SQL Server 2008 and 2008 R2 engine cannot handle login records when\n  SSL encryption is not disabled. To fix SQL Server 2008 R2 issue,\n  install SQL Server 2008 R2 Service Pack 2. To fix SQL Server 2008\n  issue, install Microsoft SQL Server 2008 Service Pack 3 and Cumulative\n  update package 3 for SQL Server 2008 SP3. More information:\n  <a href=\"http://support.microsoft.com/kb/2653857\" rel=\"noreferrer\">http://support.microsoft.com/kb/2653857</a></p>\n</blockquote>\n\n<p>So I downloaded the updates which I never actually installed. While waiting on the download, I poked around more and found the folder containing the actual SQL Server executable along with the <code>Log</code> folder containing a series of files <code>ERRORLOG</code>, <code>ERRORLOG.1</code>, etc.</p>\n\n<p><strong>SQL Server logs indicate SQL Server user required</strong></p>\n\n<p>Looking in the <code>ERRORLOG</code> file I found an error log of SQL Server with the following logs which provided the next piece of the puzzle:</p>\n\n<pre><code>2016-08-15 22:56:22.41 Server      SQL Server is now ready for client connections. This is an informational message; no user action is required.\n2016-08-15 23:55:47.51 Logon       Error: 18456, Severity: 14, State: 58.\n2016-08-15 23:55:47.51 Logon       Login failed for user 'rchamber'. Reason: An attempt to login using SQL authentication failed. Server is configured for Windows authentication only. [CLIENT: 127.0.0.1]\n2016-08-15 23:55:47.61 Logon       Error: 18456, Severity: 14, State: 58.\n2016-08-15 23:55:47.61 Logon       Login failed for user 'rchamber'. Reason: An attempt to login using SQL authentication failed. Server is configured for Windows authentication only. [CLIENT: ::1]\n2016-08-15 23:55:47.62 Logon       Error: 18456, Severity: 14, State: 58.\n2016-08-15 23:55:47.62 Logon       Login failed for user 'rchamber'. Reason: An attempt to login using SQL authentication failed. Server is configured for Windows authentication only. [CLIENT: 127.0.0.1]\n</code></pre>\n\n<p>I then realized that the Go SQL Server driver was not using Windows Authentication but instead was using SQL Server Authentication. I had tried to use Windows Authentication by specifying an empty <code>user id=</code> however that did not seem to work. So using the <code>sqlcmd</code> utility, I created an SQL Server user.</p>\n\n<pre><code>1&gt; create login gouser with password='g0us3r';\n2&gt; go\n1&gt; create user gouser for login gouser;\n2&gt; go\n</code></pre>\n\n<p>Next I downloaded and installed the Microsoft SQL Server Management Studio. This is a different utility from the SQL Server Configuration Manager. Using this I did two things: (1) turned on SQL Server Authentication as well as Windows Authentication and (2) provided the necessary permissions for my new SQL Server user <code>gouser</code>. This utility also provided a nice user interface to browse the SQL Server and its various databases.</p>\n\n<p>Make sure that the SQL user you create has sufficient permissions so that it can be used to connect to SQL Server and create a database.</p>\n\n<p><strong>Some Considerations for Using Windows Authentication</strong></p>\n\n<p>After further research I found that I could actually use Windows Authentication however the completely qualified user id and its password must be provided. For an environment using Active Directory with a domain name of \"AD\" the fully qualified user id would be \"AD\\userid\" and for the local host would be \"\\userid\". I am still researching on being able to automatically use the credentials of the currently logged in user.</p>\n\n<p>After still further research and find assistance from the Go driver developers, Windows Authentication with the current should be possible if the <code>sql.Open()</code> does not include the user information meaning \"user id=;password=;\" should not be specified.</p>\n\n<p>However this form of automatic Windows Authentication against the current user is only allowed if the SQL Server instance is using Kerberos with a valid Service Principal Name (SPN). If you perform a restart on your instance of SQL Server and you see the following log in your ERRORLOG file, SQL Server was not able to initialize with Kerberos.</p>\n\n<blockquote>\n  <p>2016-08-23 18:32:16.77 Server The SQL Server Network Interface library\n  could not register the Service Principal Name (SPN) for the SQL Server\n  service. Error: 0x54b, state: 3. Failure to register an SPN may cause\n  integrated authentication to fall back to NTLM instead of Kerberos.\n  This is an informational message. Further action is only required if\n  Kerberos authentication is required by authentication policies.</p>\n</blockquote>\n\n<p>See also <a href=\"https://support.microsoft.com/en-us/kb/909801\" rel=\"noreferrer\">How to make sure that you are using Kerberos authentication when you create a remote connection to an instance of SQL Server 2005</a> which provides some additional information as well using the <code>setspn</code> command to correct the problem.</p>\n\n<p>See also <a href=\"https://blogs.technet.microsoft.com/mdegre/2009/11/08/the-sql-network-interface-library-was-unable-to-register-spn/\" rel=\"noreferrer\">The SQL Network Interface library was unable to register SPN</a>.</p>\n\n<p><strong>About Trusted Windows Authentication</strong> (Updated as per request from @Richard by @xpt)</p>\n\n<p>Windows Authentication is logging into SQL Server with Windows credential without specifying a user id and password. This is called trusted connection for <code>sqlcmd</code> or <code>ODBC</code>; or called Single-Sign-On for <code>go-mssqldb</code> Go driver package.</p>\n\n<p>From <code>go-mssqldb</code>'s readme in github,</p>\n\n<blockquote>\n  <p>\"user id\" - enter the SQL Server Authentication user id or the Windows\n  Authentication user id in the DOMAIN\\User format. On Windows, if user\n  id is empty or missing Single-Sign-On is used.</p>\n</blockquote>\n\n<p>So I tried the following two ways with my SQL Server 2008 R2 and both are just working fine:</p>\n\n<pre><code>condb, errdb := sql.Open(\"mssql\", \"server=MyServer;user id=;password=DONTCARE;\")\ncondb, errdb := sql.Open(\"mssql\", \"server=MyServer;user id=;password=;\")\n</code></pre>\n\n<p>Note that using server=localhost would fail, as it is important to have the correct host name, from that name the driver is building the SQL Server kerberos Service Principal Name (SPN) and that name must match SQL Server's. I used a proper Service Principal Name (SPN) with my test so it works.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lJacD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lJacD.png\" alt=\"SQL Server Management Studio enabling SQL Authentication\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/6Gb44.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/6Gb44.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 89, "user_id": 5134170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de754dd8279d58e1ce15d8a1c726b47?s=128&d=identicon&r=PG&f=1", "display_name": "rahele", "link": "https://stackoverflow.com/users/5134170/rahele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9424, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1541210012, "creation_date": 1439557158, "last_edit_date": 1471491145, "question_id": 32010749, "link": "https://stackoverflow.com/questions/32010749/go-with-sql-server-driver-is-unable-to-connect-successfully-login-fail", "title": "Go with SQL Server driver is unable to connect successfully, login fail", "body": "<p>I am trying to use Microsoft SQL Server with a Go program to connect to a database in SQL server and read some data from the database.</p>\n\n<p>However when I use <code>err=db.ping()</code> it causes an error which says: </p>\n\n<blockquote>\n  <p>login failed for user 'sakhaloo'</p>\n</blockquote>\n\n<p>I downloaded the zip file of the driver package from this directory: <code>github.com/denisenkom/go-mssqldb</code> then I copy the files within the zipped file and paste them in the following address : <code>C:\\Go\\src\\github.com\\denisenkom\\go-mssqldb</code> </p>\n\n<p>Another problem is when I try to open my SQL database with SQL Server 2014 Management Studio it doesn't accept my user name or password, actually it causes this error when I enter my username and password: </p>\n\n<blockquote>\n  <p>A connection was successfully established with the server, but then an\n  error occurred during the login process. (provider: Shared Memory\n  Provider, error: 0-no process is on the other end of the\n  pipe.)(Microsoft SQL Server, Error:233)</p>\n</blockquote>\n\n<p>i don't know what is wrong with all this process.</p>\n\n<p>This is my code:</p>\n\n<pre><code>package main\nimport (\n   //_ \"code.google.com/p/odbc\"\n    _ \"github.com/denisenkom/go-mssqldb\"\n    \"database/sql\"\n    \"fmt\"\n    \"log\"\n    //\"github.com/astaxie/beedb\"\n   // \"github.com/weigj/go-odbc\"\n)\n\nvar (\n    uName, pass string\n    p *Person\n)\n\ntype Person struct {\n    userName string\n    passWord string\n    Email string\n}\n\nfunc main() {\n    db, err := sql.Open(\"mssql\", \"server=SAKHALOO-PC;user id=sakhaloo;password=hoollehayerazi;database=webApp\" )\n    if err != nil {\n        log.Fatal(err) \n    }\n    defer db.Close()\n    err = db.Ping()\n    if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Println(\"Please enter your full name &amp; password:\")\n    fmt.Scanln(&amp;uName, &amp;pass)\n    row := db.QueryRow(\"SELECT username, password, email FROM user WHERE username=? and password=?\", uName, pass)\n    fmt.Println(row)\n    p := new(Person)\n    err = row.Scan(&amp;p.userName, &amp;p.passWord, &amp;p.Email)\n    fmt.Printf(\"%s , %s , %s \\n\", p.userName, p.passWord, p.Email)\n    fmt.Printf(\"Hi %s, your email address is : %s\", uName, p.Email)\n}\n</code></pre>\n"}, {"tags": ["http", "go", "get", "timeout"], "answers": [{"tags": [], "owner": {"reputation": 8296, "user_id": 216488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c510f6396aac23ff75e25f50cf3014d6?s=128&d=identicon&r=PG", "display_name": "Caleb", "link": "https://stackoverflow.com/users/216488/caleb"}, "is_accepted": true, "score": 5, "last_activity_date": 1439554269, "creation_date": 1439554269, "answer_id": 32009786, "question_id": 32009531, "link": "https://stackoverflow.com/questions/32009531/program-halts-after-successive-timeout-while-performing-get-request/32009786#32009786", "title": "Program halts after successive timeout while performing GET request", "body": "<p>The default behavior of the http client is to block forever. Set a timeout when you create the client: (<a href=\"http://godoc.org/net/http#Client\" rel=\"noreferrer\">http://godoc.org/net/http#Client</a>)</p>\n\n<pre><code>func main() {\n    client := http.Client{\n        Timeout: time.Second * 30,\n    }\n    res, err := client.Get(\"http://www.google.com\")\n    if err != nil {\n        panic(err)\n    }\n    fmt.Println(res)\n}\n</code></pre>\n\n<p>After 30 seconds <code>Get</code> will return an error.</p>\n"}], "owner": {"reputation": 421, "user_id": 2873262, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5f8b8419c1469cda8acef2c3a8546d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Sunil", "link": "https://stackoverflow.com/users/2873262/sunil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 32009786, "answer_count": 1, "score": 1, "last_activity_date": 1439642688, "creation_date": 1439553487, "last_edit_date": 1439642688, "question_id": 32009531, "link": "https://stackoverflow.com/questions/32009531/program-halts-after-successive-timeout-while-performing-get-request", "title": "Program halts after successive timeout while performing GET request", "body": "<p>I'm making a crawler that fetches html, css and js pages. The crawler is a typical one with 4 go-routines running concurrently to fetch the resources. To study, I've been using 3 test sites. The crawler works fine and shows program completion log while testing two of them. </p>\n\n<p>In the 3rd website however, there are too many timeouts happening while fetching css links. This eventually causes my program to stop. It fetches the links but after 20+ successive timeouts, the program stops showing log. Basically it halts. I don't think it's problem with Event log console. </p>\n\n<p>Do I need to handle timeouts separately ? I'm not posting the full code because it won't relate to conceptual answer that I'm seeking. However the code goes something like this :</p>\n\n<pre><code>for {\n    site, more := &lt;-sites\n    if more {\n        url, err := url.Parse(site)\n        if err != nil {\n            continue\n        }\n        response, error := http.Get(url.String())\n\n        if error != nil {\n            fmt.Println(\"There was an error with Get request: \", error.Error())\n            continue\n        }\n\n        // Crawl function\n    }\n}\n</code></pre>\n"}, {"tags": ["go", "go-gin"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1439733228, "post_id": 32008680, "comment_id": 51972463, "body": "<a href=\"https://play.golang.org/p/N_553jVAIX\" rel=\"nofollow noreferrer\">play.golang.org/p/N_553jVAIX</a> shows several variations of duplicating an <code>io.ReadCloser</code> in an HTTP handler. The details of what is being done to the body and the expected size would be needed to pick between them."}], "answers": [{"tags": [], "owner": {"reputation": 2879, "user_id": 4335588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gNlDI.jpg?s=128&g=1", "display_name": "Thellimist", "link": "https://stackoverflow.com/users/4335588/thellimist"}, "is_accepted": false, "score": 0, "last_activity_date": 1439642550, "creation_date": 1439642550, "answer_id": 32024827, "question_id": 32008680, "link": "https://stackoverflow.com/questions/32008680/how-to-use-context-request-body-and-retain-it/32024827#32024827", "title": "How to use Context.Request.Body and retain it?", "body": "<p>You could copy req.Body inside your middleware. Check out <a href=\"http://golang.org/pkg/io/#TeeReader\" rel=\"nofollow\">io.TeeReader</a> + <a href=\"http://golang.org/pkg/bytes/#Buffer\" rel=\"nofollow\">bytes.Buffer</a>. </p>\n\n<p>As far as I know you can't directly copy an io.Reader so you must copy it while you read it then assign the copied one back to <code>c.Request.Body</code> to be able to use it for <code>c.Bind</code></p>\n\n<p>I'm not sure but maybe <a href=\"https://godoc.org/code.google.com/p/rog-go/exp/deepcopy\" rel=\"nofollow\">this</a> can make things easier.</p>\n"}, {"tags": [], "owner": {"reputation": 703, "user_id": 3521313, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/MqjzI.jpg?s=128&g=1", "display_name": "transistor", "link": "https://stackoverflow.com/users/3521313/transistor"}, "is_accepted": false, "score": 6, "last_activity_date": 1510773710, "creation_date": 1510773710, "answer_id": 47315632, "question_id": 32008680, "link": "https://stackoverflow.com/questions/32008680/how-to-use-context-request-body-and-retain-it/47315632#47315632", "title": "How to use Context.Request.Body and retain it?", "body": "<p>What Thellimist said, but in more words.</p>\n\n<p>You need to \"catch and restore\" the Body.\nThe Body is a buffer, that means that once you read it, its gone. So, if you catch it and \"put it back\", you can access it again.</p>\n\n<p>Check this answer, I think this is what you are looking for:\n<a href=\"https://stackoverflow.com/a/47295689/3521313\">https://stackoverflow.com/a/47295689/3521313</a></p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 4349318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c5139fb0dd28746d05291a6f3d4137?s=128&d=identicon&r=PG", "display_name": "Noel Ruault", "link": "https://stackoverflow.com/users/4349318/noel-ruault"}, "is_accepted": false, "score": 0, "last_activity_date": 1559091131, "last_edit_date": 1592644375, "creation_date": 1559090579, "answer_id": 56351690, "question_id": 32008680, "link": "https://stackoverflow.com/questions/32008680/how-to-use-context-request-body-and-retain-it/56351690#56351690", "title": "How to use Context.Request.Body and retain it?", "body": "<p>If you want to use the body content multiple times and you're also using gin-gonic, I think the <code>ShouldBindBodyWith</code> function is what you're looking for.</p>\n<blockquote>\n<p>ShouldBindBodyWith is similar with ShouldBindWith, but it stores the request body into the context, and reuse when it is called again.</p>\n<p>NOTE: This method reads the body before binding. So you should use ShouldBindWith for better performance if you need to call only once.</p>\n</blockquote>\n<p>References:</p>\n<ul>\n<li><a href=\"https://github.com/gin-gonic/gin/issues/1078\" rel=\"nofollow noreferrer\">https://github.com/gin-gonic/gin/issues/1078</a></li>\n<li><a href=\"https://godoc.org/github.com/gin-gonic/gin#Context.ShouldBindBodyWith\" rel=\"nofollow noreferrer\">https://godoc.org/github.com/gin-gonic/gin#Context.ShouldBindBodyWith</a></li>\n</ul>\n"}], "owner": {"reputation": 1260, "user_id": 840419, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/94d4a370033a41eea3288ed269784339?s=128&d=identicon&r=PG", "display_name": "Sanath Ballal", "link": "https://stackoverflow.com/users/840419/sanath-ballal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22808, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1608906164, "creation_date": 1439550702, "last_edit_date": 1608906164, "question_id": 32008680, "link": "https://stackoverflow.com/questions/32008680/how-to-use-context-request-body-and-retain-it", "title": "How to use Context.Request.Body and retain it?", "body": "<p>I am trying to write a middleware where I will be doing a json schema validation against the request body. After the validation, I need to use the request body again. But I am not able to figure out how this can be done. I referred <a href=\"https://stackoverflow.com/questions/31911579/gin-golang-empty-req-body\">this post</a>\nand found a way to access the body. But once the request body is used, I need that available to my next function.</p>\n<p>Here is the sample code:</p>\n<pre><code>package main\nimport (\n        &quot;fmt&quot;\n        &quot;io/ioutil&quot;\n        &quot;net/http&quot;\n        &quot;github.com/gin-gonic/gin&quot;\n        //&quot;github.com/xeipuuv/gojsonschema&quot;\n)\n\nfunc middleware() gin.HandlerFunc {\n return func(c *gin.Context) {\n    //Will be doing json schema validation here\n\n    body := c.Request.Body\n    x, _ := ioutil.ReadAll(body)\n\n    fmt.Printf(&quot;%s \\n&quot;, string(x))\n\n    fmt.Println(&quot;I am a middleware for json schema validation&quot;)\n\n    c.Next()\n    return\n }\n}    \n\ntype E struct {\n Email    string\n Password string\n}\n\nfunc test(c *gin.Context) {\n //data := &amp;E{}\n //c.Bind(data)\n //fmt.Println(data)   //prints empty as json body is already used\n \n body := c.Request.Body\n x, _ := ioutil.ReadAll(body)\n\n fmt.Printf(&quot;body is: %s \\n&quot;, string(x))\n c.JSON(http.StatusOK, c)\n}\n\nfunc main() {\n router := gin.Default()\n\n router.Use(middleware())\n\n router.POST(&quot;/test&quot;, test)\n\n //Listen and serve\n router.Run(&quot;127.0.0.1:8080&quot;)\n}\n</code></pre>\n<p>Current output:</p>\n<pre><code>{\n    &quot;email&quot;: &quot;test@test.com&quot;,\n    &quot;password&quot;: &quot;123&quot;\n} \n\nI am a middleware for json schema validation\nbody is: \n</code></pre>\n<p>Expected output:</p>\n<pre><code>{\n    &quot;email&quot;: &quot;test@test.com&quot;,\n    &quot;password&quot;: &quot;123&quot;\n} \nI am a middleware for json schema validation\nbody is: {\n    &quot;email&quot;: &quot;test@test.com&quot;,\n    &quot;password&quot;: &quot;123&quot;\n}\n</code></pre>\n"}, {"tags": ["ssl", "go"], "comments": [{"owner": {"reputation": 1698, "user_id": 3778742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad62c6ebfd4440c951edde151cb76714?s=128&d=identicon&r=PG&f=1", "display_name": "alexsmn", "link": "https://stackoverflow.com/users/3778742/alexsmn"}, "edited": false, "score": 2, "creation_date": 1439547552, "post_id": 32007671, "comment_id": 51917886, "body": "yes it is, have a look <a href=\"https://golang.org/src/crypto/tls/conn.go#L844\" rel=\"nofollow noreferrer\">golang.org/src/crypto/tls/conn.go#L844</a>"}, {"owner": {"reputation": 21289, "user_id": 532430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/uAwnB.png?s=128&g=1", "display_name": "thwd", "link": "https://stackoverflow.com/users/532430/thwd"}, "edited": false, "score": 2, "creation_date": 1439553352, "post_id": 32007671, "comment_id": 51921213, "body": "Check the docs beneath <a href=\"http://golang.org/pkg/net/#Conn\" rel=\"nofollow noreferrer\"><code>net.Conn</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5067859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093dac404ead422a03641264ce1e6ed0?s=128&d=identicon&r=PG&f=1", "display_name": "xiaobao wei", "link": "https://stackoverflow.com/users/5067859/xiaobao-wei"}, "edited": false, "score": 0, "creation_date": 1439549542, "post_id": 32007811, "comment_id": 51919014, "body": "Is &quot;Concurrent calls to either Write or Read&quot; and &quot;Concurrent calls to Write and Read&quot; the same?"}, {"owner": {"reputation": 47141, "user_id": 1643939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mww2p.png?s=128&g=1", "display_name": "nemo", "link": "https://stackoverflow.com/users/1643939/nemo"}, "reply_to_user": {"reputation": 37, "user_id": 5067859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093dac404ead422a03641264ce1e6ed0?s=128&d=identicon&r=PG&f=1", "display_name": "xiaobao wei", "link": "https://stackoverflow.com/users/5067859/xiaobao-wei"}, "edited": false, "score": 0, "creation_date": 1439595484, "post_id": 32007811, "comment_id": 51942404, "body": "<code>Write</code> and <code>Read</code> are independent so they do not interfere with each other. <code>Write</code> and <code>Write</code> / <code>Read</code> and <code>Read</code> are safe."}], "tags": [], "owner": {"reputation": 47141, "user_id": 1643939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mww2p.png?s=128&g=1", "display_name": "nemo", "link": "https://stackoverflow.com/users/1643939/nemo"}, "is_accepted": false, "score": 3, "last_activity_date": 1439547792, "creation_date": 1439547792, "answer_id": 32007811, "question_id": 32007671, "link": "https://stackoverflow.com/questions/32007671/is-the-tls-conn-goroutine-safe-in-golang/32007811#32007811", "title": "is the tls.Conn &quot;goroutine safe&quot; in golang?", "body": "<p>Input and output are <a href=\"https://code.google.com/p/go/source/browse/src/crypto/tls/conn.go?name=go1.4#53\" rel=\"nofollow\">separated</a> so they should not interfere. Concurrent calls to either <a href=\"https://code.google.com/p/go/source/browse/src/crypto/tls/conn.go?name=go1.4#849\" rel=\"nofollow\"><code>Write</code></a> or <a href=\"https://code.google.com/p/go/source/browse/src/crypto/tls/conn.go?name=go1.4#896\" rel=\"nofollow\"><code>Read</code></a> are guarded by a mutex lock.</p>\n\n<p>Therefore, yes they are safe to be called in a concurrent manner.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 5067859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093dac404ead422a03641264ce1e6ed0?s=128&d=identicon&r=PG&f=1", "display_name": "xiaobao wei", "link": "https://stackoverflow.com/users/5067859/xiaobao-wei"}, "edited": false, "score": 0, "creation_date": 1439780251, "post_id": 32009032, "comment_id": 51984609, "body": "But, it is \u201cc.in.Lock()\u201d in the Read function, the source code is <a href=\"https://code.google.com/p/go/source/browse/src/crypto/tls/conn.go?name=go1.4#896\" rel=\"nofollow noreferrer\">c.in.Lock()</a>!"}], "tags": [], "owner": {"reputation": 6265, "user_id": 3387925, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mtLre.jpg?s=128&g=1", "display_name": "Mayank Patel", "link": "https://stackoverflow.com/users/3387925/mayank-patel"}, "is_accepted": false, "score": 3, "last_activity_date": 1439791170, "last_edit_date": 1439791170, "creation_date": 1439551906, "answer_id": 32009032, "question_id": 32007671, "link": "https://stackoverflow.com/questions/32007671/is-the-tls-conn-goroutine-safe-in-golang/32009032#32009032", "title": "is the tls.Conn &quot;goroutine safe&quot; in golang?", "body": "<p>tls Read and write are independent of each other.</p>\n\n<p>Read and Write uses seperate mutex in and out respectedly.</p>\n\n<p>Snippet from the source code</p>\n\n<pre><code>func (c *Conn) Write(b []byte) (int, error) {\n    if err := c.Handshake(); err != nil {\n        return 0, err\n    }\n\n    c.out.Lock()\n    defer c.out.Unlock()\n    .\n    .\n}\n\nfunc (c *Conn) Read(b []byte) (int, error) {\n    if err := c.Handshake(); err != nil {\n        return 0, err\n    }\n\n    if len(b) == 0 {\n    // Put this after Handshake, in case people were calling\n    // Read(nil) for the side effect of the Handshake.\n    return\n    }\n\n    c.in.Lock()\n    defer c.in.Unlock()\n    .\n    .\n}\n</code></pre>\n\n<p>Thus </p>\n\n<ol>\n<li><p>You can write and read concurrently.</p></li>\n<li><p>You can do multiple read concurrently but only one read will happen at a time.</p></li>\n<li><p>You can do multiple write concurrently but only one write will happen at a time.</p></li>\n</ol>\n"}], "owner": {"reputation": 37, "user_id": 5067859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093dac404ead422a03641264ce1e6ed0?s=128&d=identicon&r=PG&f=1", "display_name": "xiaobao wei", "link": "https://stackoverflow.com/users/5067859/xiaobao-wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1439791170, "creation_date": 1439547371, "question_id": 32007671, "link": "https://stackoverflow.com/questions/32007671/is-the-tls-conn-goroutine-safe-in-golang", "title": "is the tls.Conn &quot;goroutine safe&quot; in golang?", "body": "<p>I have a question:\nCan I <strong>tls.read</strong> a tls connection in one goroutine, while the other goroutine is calling <strong>tls.write</strong>?\nthe code may like this:</p>\n\n<pre><code>func main() {\n        tlsConn := tls.Conn\n        go func() {\n                tlsConn.read(...)\n        }()\n        go func() {\n                tlsConn.write(...)\n        }()\n}\n</code></pre>\n"}, {"tags": ["struct", "go"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 2, "creation_date": 1439546743, "post_id": 32007158, "comment_id": 51917378, "body": "None is &quot;right&quot; and each one does something different. Have a closer look at <a href=\"http://golang.org/doc/effective_go.html\" rel=\"nofollow noreferrer\">golang.org/doc/effective_go.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1439546817, "post_id": 32007355, "comment_id": 51917444, "body": "Nit. new(T) returns a pointer to a zero value of T while &amp;T{1} produces a non-zero."}], "tags": [], "owner": {"reputation": 99, "user_id": 4666524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tb7SI.jpg?s=128&g=1", "display_name": "hotzenplotz", "link": "https://stackoverflow.com/users/4666524/hotzenplotz"}, "is_accepted": true, "score": 1, "last_activity_date": 1439546620, "last_edit_date": 1439546620, "creation_date": 1439546293, "answer_id": 32007355, "question_id": 32007158, "link": "https://stackoverflow.com/questions/32007158/struct-initialization-and-method-declaration-in-go/32007355#32007355", "title": "Struct initialization and method declaration in Go", "body": "<ol>\n<li>allocation</li>\n</ol>\n\n<p>new and &amp;T{size:1} returns *T</p>\n\n<p>T{size:1} return T</p>\n\n<blockquote>\n  <p>The built-in function new takes a type T, allocates storage for a variable of that type at run time, and returns a value of type *T pointing to it. The variable is initialized as described in the section on initial values.</p>\n</blockquote>\n\n<p>2.</p>\n\n<blockquote>\n  <p>The method set of any other named type T consists of all methods with receiver type T. The method set of the corresponding pointer type *T is the set of all methods with receiver *T or T (that is, it also contains the method set of T).</p>\n</blockquote>\n\n<p>var pt *T</p>\n\n<p>var t T</p>\n\n<blockquote>\n  <p>func (r *T) area() int</p>\n</blockquote>\n\n<p>you can use pt.area() or t.area()</p>\n\n<blockquote>\n  <p>func (r T) area() int</p>\n</blockquote>\n\n<p>you can use t.area(), can't use pt.area()</p>\n\n<p>usually we use func(r *T) area() int</p>\n"}, {"comments": [{"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439577997, "post_id": 32014614, "comment_id": 51935968, "body": "What would var newAnimal Animal do?"}, {"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "reply_to_user": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439586520, "post_id": 32014614, "comment_id": 51939856, "body": "<code>var a Animal</code> is a declaration of a variable to hold a value of type <code>Animal</code>"}], "tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": false, "score": 1, "last_activity_date": 1439570010, "last_edit_date": 1439570010, "creation_date": 1439569509, "answer_id": 32014614, "question_id": 32007158, "link": "https://stackoverflow.com/questions/32007158/struct-initialization-and-method-declaration-in-go/32014614#32014614", "title": "Struct initialization and method declaration in Go", "body": "<p>Here are different examples:</p>\n\n<pre><code>type Animal struct {\n    Legs      int\n    Kingdom   string\n    Carnivore bool\n}\n</code></pre>\n\n<p><strong>Initialization by reference</strong></p>\n\n<p>Return the pointer to the struct</p>\n\n<pre><code>var tiger = &amp;Animal{4, \"mammalia\", true}\n\nfmt.Println(tiger.Kingdom) // print \"mammalia\"\n\nfunc changeKingdom(a *Animal) {\n    a.Kingdom = \"alien\"    // modify original struct\n}\n\nchangeKingdom(tiger) \nfmt.Println(tiger.Kingdom) // print \"alien\"\n</code></pre>\n\n<p><strong>Constructor <code>New</code> Initializaiton</strong></p>\n\n<p>Return a pointer with zero-ed values</p>\n\n<pre><code>var xAnimal = New(Animal)\n\nfmt.Println(xAnimal.Kingdom)   // print \"\"\nfmt.Println(xAnimal.Legs)      // print 0\nfmt.Println(xAnimal.carnivore) // print false\n\nchangeKingdom(xAnimal)\nfmt.Println(xAnimal.Kingdom)   // print \"alien\"\n</code></pre>\n\n<p><strong>Initialization by value (copy)</strong></p>\n\n<p>Return a separate copy of the original struct</p>\n\n<pre><code>var giraffe = Animal{4, \"mammalia\", false}\n\nfmt.Println(giraffe.Kingdom) // print \"mammalia\"\n\nfunc changeKingdom(a Animal) {\n    a.Kingdom = \"extraterrestrial\"\n}\n\nchangeKingdom(giraffe)\nfmt.Println(giraffe) // print \"mammalia\"\n</code></pre>\n\n<p>More often you'll deal with pointers when using structs than the copies.</p>\n"}], "owner": {"reputation": 992, "user_id": 4390525, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/wH2fY.jpg?s=128&g=1", "display_name": "xuanzhui", "link": "https://stackoverflow.com/users/4390525/xuanzhui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 32007355, "answer_count": 2, "score": -1, "last_activity_date": 1439570010, "creation_date": 1439545732, "last_edit_date": 1439545966, "question_id": 32007158, "link": "https://stackoverflow.com/questions/32007158/struct-initialization-and-method-declaration-in-go", "title": "Struct initialization and method declaration in Go", "body": "<p>I am new of Go, and pretty curious of structs. Let's define a struct <code>T</code></p>\n\n<pre><code>type T struct {\n    size int\n}\n</code></pre>\n\n<ol>\n<li><p>I have seen different types of struct initialization. What are the differences?</p>\n\n<pre><code>new(T)     // 1\nT{size:1}  // 2\n&amp;T{size:1} // 3\n</code></pre></li>\n<li><p>And the two types of method declarations:</p>\n\n<pre><code>func (r *T) area() int // 1\nfunc (r T) area() int  // 2\n</code></pre>\n\n<p>What should be the right way?</p></li>\n</ol>\n"}, {"tags": ["struct", "go", "initialization", "slice"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1439546387, "post_id": 32006411, "comment_id": 51917149, "body": "I think that this may be a bad approach. What if the order of fields changes? What if the fields are added/removed? I&#39;d suggest always using the explicit form (i.e. <code>T{A: s[0], B: s[1], &#47;* ... *&#47;}</code>)."}, {"owner": {"reputation": 37, "user_id": 5119757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c25ea3fe337c6b1923b2ec240e12b4?s=128&d=identicon&r=PG&f=1", "display_name": "hiqluid", "link": "https://stackoverflow.com/users/5119757/hiqluid"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 1, "creation_date": 1439548250, "post_id": 32006411, "comment_id": 51918287, "body": "It probably is and that&#39;s why it isn&#39;t possible in the first place. It just made me wonder."}], "answers": [{"tags": [], "owner": {"reputation": 17491, "user_id": 901827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86a6acccf7e8dbe398ebda4f8524ed50?s=128&d=identicon&r=PG", "display_name": "LinearZoetrope", "link": "https://stackoverflow.com/users/901827/linearzoetrope"}, "is_accepted": false, "score": 0, "last_activity_date": 1439544099, "creation_date": 1439544099, "answer_id": 32006615, "question_id": 32006411, "link": "https://stackoverflow.com/questions/32006411/initializing-a-struct-with-slice-data/32006615#32006615", "title": "Initializing a struct with slice data", "body": "<p>The only way this really can be done is using unsafe and <code>copy</code> as you allude to, but even then you're liable to run into alignment issues. The other \"compact\" way is to use <code>reflect</code> and a for loop over the fields, but that's going to be slow and not very idiomatic.</p>\n\n<p>The only other possible way is to perhaps introduce your own syntax and write a generator script to be invoked by <code>go generate</code>, which will autoconvert <code>Struct{slice...}</code> into <code>Struct{slice[0], slice[1] ... , slice[n] }</code> where <code>n</code> is the number of fields, but you'll have to roll that on your own.</p>\n"}, {"comments": [{"owner": {"reputation": 17491, "user_id": 901827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86a6acccf7e8dbe398ebda4f8524ed50?s=128&d=identicon&r=PG", "display_name": "LinearZoetrope", "link": "https://stackoverflow.com/users/901827/linearzoetrope"}, "edited": false, "score": 0, "creation_date": 1439544274, "post_id": 32006663, "comment_id": 51915744, "body": "I was going to mention this, but his example was already in a <code>newStats</code> method so I figured it was redundant."}], "tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": false, "score": 0, "last_activity_date": 1439544233, "creation_date": 1439544233, "answer_id": 32006663, "question_id": 32006411, "link": "https://stackoverflow.com/questions/32006411/initializing-a-struct-with-slice-data/32006663#32006663", "title": "Initializing a struct with slice data", "body": "<p>In addition to Jsor's suggestions, you could create a <code>NewStats</code> method that take an elliptic argument and use it instead of you first example. </p>\n\n<p>Its not idiomatic either, but you would reduce clutter in the code and have to write the ugly part only once...</p>\n"}], "owner": {"reputation": 37, "user_id": 5119757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c25ea3fe337c6b1923b2ec240e12b4?s=128&d=identicon&r=PG&f=1", "display_name": "hiqluid", "link": "https://stackoverflow.com/users/5119757/hiqluid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1439544233, "creation_date": 1439543506, "question_id": 32006411, "link": "https://stackoverflow.com/questions/32006411/initializing-a-struct-with-slice-data", "title": "Initializing a struct with slice data", "body": "<p>Golang has the three dot operator (...) which dumps each element of a slice as its own argument when used with a function call, but it seems that a similar mechanic can't be used with a struct initializer.</p>\n\n<p>Is there a way to reduce code clutter by not accessing every element in a slice when initializing a struct? </p>\n\n<p>Is it possible to append a value to a initialized struct one by one or access an index of some sort inside a for loop?</p>\n\n<p>(I suppose it would be possible to access the direct memory location of a initialized struct - but I'd prefer not to do that)</p>\n\n<p>The following doesn't work: (syntax error)</p>\n\n<pre><code>type Stats struct {\n    Total uint64\n\n    ICMP uint64\n\n    UDP uint64\n    TCP uint64\n\n    FTP  uint64\n    HTTP uint64\n    MAIL uint64\n    P2P  uint64\n}\n\nfunc newStats(slice [][]byte) *Stats {\n    var tmp [8]uint64\n    var err error\n\n    for i, val := range slice {\n        tmp[i], err = strconv.ParseUint(string(val), 10, 32)\n        if err != nil {\n             // Handle error\n        }\n    }\n\n    return &amp;Stats{tmp...} // Syntax error\n}\n</code></pre>\n\n<p>Neither does this: (of course)</p>\n\n<pre><code>return &amp;Stats{\n    for{ &lt;code&gt; }\n}\n</code></pre>\n\n<p>This works, but I'd hope for a idiomatic, faster way, without syntax copying</p>\n\n<pre><code>return &amp;Stats{\n    tmp[0],\n    tmp[1],\n    tmp[2],\n    tmp[3],\n    tmp[4],\n    tmp[5],\n    tmp[6],\n    tmp[7],\n}\n</code></pre>\n"}, {"tags": ["html", "go", "go-templates", "go-gin"], "answers": [{"tags": [], "owner": {"reputation": 36869, "user_id": 102371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/262d914b9ff3f5b7f599de600cf463a8?s=128&d=identicon&r=PG", "display_name": "John Weldon", "link": "https://stackoverflow.com/users/102371/john-weldon"}, "is_accepted": true, "score": 1, "last_activity_date": 1459021966, "creation_date": 1459021966, "answer_id": 36240153, "question_id": 32005459, "link": "https://stackoverflow.com/questions/32005459/same-code-but-different-results-using-gin-go-template/36240153#36240153", "title": "same code but different results using gin + go-template", "body": "<p>This is a bug in Go, and has been <a href=\"https://go-review.googlesource.com/#/c/14336/\" rel=\"nofollow\">slated to be fixed in 1.7</a> as of March 2016 (Also <a href=\"https://go-review.googlesource.com/#/c/14335/\" rel=\"nofollow\">partially addressed</a> in 1.6)</p>\n"}], "owner": {"reputation": 1392, "user_id": 875813, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e5551e3dcee79c2c29842dd7f56ca2d?s=128&d=identicon&r=PG", "display_name": "Miaonster", "link": "https://stackoverflow.com/users/875813/miaonster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 982, "favorite_count": 0, "accepted_answer_id": 36240153, "answer_count": 1, "score": 10, "last_activity_date": 1489451789, "creation_date": 1439540518, "last_edit_date": 1489451789, "question_id": 32005459, "link": "https://stackoverflow.com/questions/32005459/same-code-but-different-results-using-gin-go-template", "title": "same code but different results using gin + go-template", "body": "<p><strong>Basic information</strong></p>\n\n<ul>\n<li>Go version: go1.4.2 darwin/amd64</li>\n<li>Operating System: Mac OS X 10.10.5</li>\n</ul>\n\n<p>I'm working on a small Web project written based on <strong>go</strong> and <strong>gin</strong>. Here is my golang code. After running <code>go run test.go</code> we have a web server, which is listening on 8089.</p>\n\n<p><strong>Golang test.go</strong></p>\n\n<pre><code>package main\n\nimport \"github.com/gin-gonic/gin\"\nimport \"net/http\"\n\nfunc main() {\n    router := gin.Default()\n    router.LoadHTMLGlob(\"templates/*\")\n    router.GET(\"/index\", func(c *gin.Context) {\n        c.HTML(http.StatusOK, \"index.html\", gin.H{\n            \"scheme\": \"http\",\n            \"domain\": \"meican.loc\",\n        })\n    })\n    router.Run(\":8089\") // listen and serve on 0.0.0.0:8089\n}\n</code></pre>\n\n<p>The html code generated in back-end should contain a template used by front-end javascript engine (Let's say Angular.js). </p>\n\n<p>So the template code is in <code>script</code> tag, just like this:</p>\n\n<p><strong>Part of templates/index.html</strong></p>\n\n<pre><code>&lt;script type=\"text/template\" charset=\"utf-8\"&gt;\n  &lt;div data=\"{{.scheme}}://{{.domain}}/qr\"&gt;&lt;/div&gt;\n  &lt;div data=\"{{.scheme}}://{{.domain}}/qr\"&gt;&lt;/div&gt; &lt;!-- problem here --&gt;\n&lt;/script&gt;\n</code></pre>\n\n<p>When <code>{{.domain}}</code> is used at the second time, I got different result. I refreshed the browser and checked out the source code. Then I got this:</p>\n\n<p><strong>Browser source code result</strong></p>\n\n<pre><code>&lt;script type=\"text/template\" charset=\"utf-8\"&gt;\n  &lt;div data=\"http://meican.loc/qr\"&gt;&lt;/div&gt;\n  &lt;div data=\"http://\"meican.loc\"/qr\"&gt;&lt;/div&gt;  &lt;!-- problems here --&gt;\n&lt;/script&gt;\n</code></pre>\n\n<p>The second <code>div</code> has 2 extra double quotes.</p>\n\n<p>Why this happens? And how to resolve this problem?</p>\n"}, {"tags": ["amazon-web-services", "go", "docker", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 1286, "user_id": 1071090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/vdLa6.jpg?s=128&g=1", "display_name": "Peter Hommel", "link": "https://stackoverflow.com/users/1071090/peter-hommel"}, "edited": false, "score": 0, "creation_date": 1439531253, "post_id": 32002938, "comment_id": 51909029, "body": "Did you try it on you machine with docker? May simply be some dependency of the package, that is present on your machine, but missing in the docker image you used in elastic beanstalk."}, {"owner": {"reputation": 39151, "user_id": 2291321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24a41cddd8faf69e3fbd0a778ba6fedf?s=128&d=identicon&r=PG&f=1", "display_name": "ydaetskcoR", "link": "https://stackoverflow.com/users/2291321/ydaetskcor"}, "edited": false, "score": 0, "creation_date": 1439556146, "post_id": 32002938, "comment_id": 51922910, "body": "Can you post your Dockerfile too?"}, {"owner": {"reputation": 735, "user_id": 2536700, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ac04fd32567ed44ddeaca257bcd6806?s=128&d=identicon&r=PG", "display_name": "Chris W", "link": "https://stackoverflow.com/users/2536700/chris-w"}, "reply_to_user": {"reputation": 39151, "user_id": 2291321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24a41cddd8faf69e3fbd0a778ba6fedf?s=128&d=identicon&r=PG&f=1", "display_name": "ydaetskcoR", "link": "https://stackoverflow.com/users/2291321/ydaetskcor"}, "edited": false, "score": 0, "creation_date": 1439577060, "post_id": 32002938, "comment_id": 51935487, "body": "@ydaetskcoR I don&#39;t have a dockerfile. I think Elastic beanstalk takes care it for you. Maybe I should create one."}], "answers": [{"tags": [], "owner": {"reputation": 48205, "user_id": 2989261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03110b84c83464a58832d4d55ff4542?s=128&d=identicon&r=PG", "display_name": "Rico", "link": "https://stackoverflow.com/users/2989261/rico"}, "is_accepted": false, "score": 0, "last_activity_date": 1439585666, "creation_date": 1439585666, "answer_id": 32018500, "question_id": 32002938, "link": "https://stackoverflow.com/questions/32002938/go-docker-im-able-to-run-a-go-web-server-when-using-stdlib-when-i-use-custo/32018500#32018500", "title": "Go &amp; Docker: I&#39;m able to run a go web server when using stdlib, when I use custom packages errors occur", "body": "<p>You need a <code>Dockerfile</code> or/and <code>Dockerrun.aws.json</code> for your environment as per the <a href=\"http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_docker_image.html\" rel=\"nofollow\">documentation</a></p>\n\n<p><strong>Dockerfile</strong></p>\n\n<pre><code>FROM FROM golang:1.3-onbuild\n\nEXPOSE 3000\n\nCMD [\"go run &lt;your.go.file&gt;\"]\n</code></pre>\n\n<p><strong>Dockerrun.aws.json</strong></p>\n\n<pre><code>{\n  \"AWSEBDockerrunVersion\": \"1\",\n  \"Image\": {\n    \"Name\": \"golang:1.3-onbuild\",   # &lt;-- don't need this if you are using a Dockerfile\n    \"Update\": \"true\"\n  },\n  \"Ports\": [\n    {\n      \"ContainerPort\": \"3000\"\n    }\n  ],\n  \"Logging\": \"/var/log/go\"\n}\n</code></pre>\n\n<p>Using the <code>eb</code> command line to deploy ?</p>\n"}], "owner": {"reputation": 735, "user_id": 2536700, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ac04fd32567ed44ddeaca257bcd6806?s=128&d=identicon&r=PG", "display_name": "Chris W", "link": "https://stackoverflow.com/users/2536700/chris-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1578656759, "creation_date": 1439530448, "last_edit_date": 1578656759, "question_id": 32002938, "link": "https://stackoverflow.com/questions/32002938/go-docker-im-able-to-run-a-go-web-server-when-using-stdlib-when-i-use-custo", "title": "Go &amp; Docker: I&#39;m able to run a go web server when using stdlib, when I use custom packages errors occur", "body": "<p>Note the code works perfectly fine when I'm running the code on my laptop. </p>\n\n<p>The following two groups of code will run on my laptop. However the second group (which uses my custom package) doesn't work on Elastic Beanstalk running docker. </p>\n\n<p><strong>Standard Lib only</strong></p>\n\n<pre><code>import (\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"3000\"\n    }\n    http.ListenAndServe(\":\"+port, nil)\n}\n</code></pre>\n\n<p><strong>Uses Custom Package</strong></p>\n\n<pre><code>import (\n    \"os\"\n\n    \"github.com/sim/handlers\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"3000\"\n    }\n    handlers.ServeAndHandle(port) // wrapper of ListenAndServe\n}\n</code></pre>\n\n<p><strong>Error Messages</strong>:</p>\n\n<pre><code>Failed to build Docker image aws_beanstalk/staging-app: andlers: exit status 128 [0mtime=\"2015-08-14T05:08:17Z\" level=\"info\" msg=\"The command [/bin/sh -c go-wrapper download] returned a non-zero code: 1\" . Check snapshot logs for details.\n\n2015-08-14 01:08:15 UTC-0400    WARN    Failed to build Docker image aws_beanstalk/staging-app, retrying...\n</code></pre>\n\n<p><strong>cron.yaml</strong></p>\n\n<pre><code>version: 1\ncron: \n  - name: \"task1\"\n    url: \"/scheduled\"\n    schedule: \"* * * * *\"\n</code></pre>\n"}, {"tags": ["mysql", "go", "openid"], "answers": [{"comments": [{"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439555201, "post_id": 32005076, "comment_id": 51922345, "body": "Thanks for the reply. I&#39;m at work now, I&#39;ll let you know how it turns out when I get home. Is this just some of the stuff you see or do you expect it to work now? Also do I need to init the db variable in each file I need to use it, or just export it so its global"}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439555857, "post_id": 32005076, "comment_id": 51922749, "body": "Also I was under the impression I had to &quot;new&quot; the SimpleDiscoveryInfo or else I wouldn&#39;t be able to get a reference to it"}, {"owner": {"reputation": 481, "user_id": 2967113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5d72f96279c46ac2639cfdc34753bc42?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Lagergren", "link": "https://stackoverflow.com/users/2967113/eric-lagergren"}, "reply_to_user": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 1, "creation_date": 1439562079, "post_id": 32005076, "comment_id": 51926985, "body": "@Datsik once global per package and you can take the address (getting s pointer to, so essentially a reference) of pretty much anything using &amp;. Keep in mind if it&#39;s already a pointer you&#39;ll receive the address of the pointer in memory."}], "tags": [], "owner": {"reputation": 481, "user_id": 2967113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5d72f96279c46ac2639cfdc34753bc42?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Lagergren", "link": "https://stackoverflow.com/users/2967113/eric-lagergren"}, "is_accepted": false, "score": 0, "last_activity_date": 1439539127, "creation_date": 1439539127, "answer_id": 32005076, "question_id": 32002070, "link": "https://stackoverflow.com/questions/32002070/how-can-i-implement-my-own-interface-for-openid-that-uses-a-mysql-database-inste/32005076#32005076", "title": "How can I implement my own interface for OpenID that uses a MySQL Database instead of In memory storage", "body": "<p>Ok. First off, I don't believe you that the code compiles.</p>\n\n<p>Let's look at some mistakes, shall we?</p>\n\n<pre><code>db, err := sql.Open(\"mysql\", \"dbconnectinfo\")\n</code></pre>\n\n<p>This line opens a database connection. It should only be used once, preferably inside an <code>init()</code> function. For example,</p>\n\n<pre><code>var db *sql.DB\n\nfunc init() {\n    var err error\n\n    // Now the db variable above is automagically set to the left value (db)\n    // of sql.Open and the \"var err error\" above is the right value (err)\n    db, err = sql.Open(\"mysql\", \"root@tcp(127.0.0.1:3306)\")\n    if err != nil {\n        panic(err)\n    }\n}\n</code></pre>\n\n<p>Bang. Now you're connected to your MySQL database.</p>\n\n<p>Now what?</p>\n\n<p>Well this (from Get) is gross:</p>\n\n<pre><code>db, err := sql.Query(\"mysql\", \"db:connectinfo\")\n    errCheck(err)\n\n    var sdi = new(SimpleDiscoveredInfo)\n    err = db.QueryRow(\"SELECT opendpoint, oplocalid, claimedid FROM discovery_cache WHERE id=?\", id).Scan(&amp;sdi)\n    errCheck(err)\n</code></pre>\n\n<p>Instead, it should be this:</p>\n\n<pre><code>// No need for a pointer...\nvar sdi SimpleDiscoveredInfo\n\n// Because we take the address of 'sdi' right here (inside Scan)\n// And that's a useless (and potentially problematic) layer of indirection.\n// Notice how I dropped the other \"db, err := sql.Query\" part? We don't\n// need it because we've already declared \"db\" as you saw in the first\n// part of my answer.\nerr := db.QueryRow(\"SELECT ...\").Scan(&amp;sdi)\nif err != nil {\n    panic(err)\n}\n\n// Return the address of sdi, which means we're returning a pointer\n// do wherever sdi is inside the heap.\nreturn &amp;sdi\n</code></pre>\n\n<p>Up next is this:</p>\n\n<pre><code>  /*\n       db, err := sql.Query(\"mysql\", \"db:connectinfo\")\n         errCheck(err)\n         rows, err := db.Query(\"SELECT opendpoint, oplocalid, claimedid FROM discovery_cache\")\n         errCheck(err)\n\n       was unsure what to do here because I'm not sure how to \n       return the info properly \n    */\n</code></pre>\n\n<p>If you've been paying attention, we can drop the first <code>sql.Query</code> line.</p>\n\n<p>Great, now we just have:</p>\n\n<p><code>rows, err := db.Query(\"SELECT ...\")</code></p>\n\n<p>So, why don't you do what you did inside the <code>Accept</code> method and parse the rows using <code>for rows.Next()...</code> ?</p>\n"}], "owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 469, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439539127, "creation_date": 1439524830, "question_id": 32002070, "link": "https://stackoverflow.com/questions/32002070/how-can-i-implement-my-own-interface-for-openid-that-uses-a-mysql-database-inste", "title": "How can I implement my own interface for OpenID that uses a MySQL Database instead of In memory storage", "body": "<p>So I'm trying to use the OpenID package for Golang, located here: <a href=\"https://github.com/yohcop/openid-go\" rel=\"nofollow\">https://github.com/yohcop/openid-go</a></p>\n\n<p>In the <code>_example</code> it says that it uses in memory storage for storing the nonce/discoverycache information and that it will not free the memory and that I should implement my own version of them using some sort of database.</p>\n\n<p>My database of choice is MySQL, I have tried to implement what I thought was correct (but is not, does not give me any compile errors, but crashes on runtime)</p>\n\n<p>My DiscoveryCache.go is as such:</p>\n\n<pre><code>package openid\n\nimport (\n    \"database/sql\"\n    \"log\"\n    //\"time\"\n\n    _ \"github.com/go-sql-driver/mysql\"\n    \"github.com/yohcop/openid-go\"\n)\n\ntype SimpleDiscoveredInfo struct {\n    opEndpoint, opLocalID, claimedID string\n}\n\nfunc (s *SimpleDiscoveredInfo) OpEndpoint() string { return s.opEndpoint }\nfunc (s *SimpleDiscoveredInfo) OpLocalID() string  { return s.opLocalID }\nfunc (s *SimpleDiscoveredInfo) ClaimedID() string  { return s.claimedID }\n\ntype SimpleDiscoveryCache struct{}\n\nfunc (s SimpleDiscoveryCache) Put(id string, info openid.DiscoveredInfo) {\n    /*\n       db, err := sql.Query(\"mysql\", \"db:connectinfo\")\n         errCheck(err)\n         rows, err := db.Query(\"SELECT opendpoint, oplocalid, claimedid FROM discovery_cache\")\n         errCheck(err)\n\n       was unsure what to do here because I'm not sure how to \n       return the info properly \n    */\n\n    log.Println(info)\n}\n\nfunc (s SimpleDiscoveryCache) Get(id string) openid.DiscoveredInfo {\n    db, err := sql.Query(\"mysql\", \"db:connectinfo\")\n    errCheck(err)\n\n    var sdi = new(SimpleDiscoveredInfo)\n    err = db.QueryRow(\"SELECT opendpoint, oplocalid, claimedid FROM discovery_cache WHERE id=?\", id).Scan(&amp;sdi)\n    errCheck(err)\n\n    return sdi\n\n}\n</code></pre>\n\n<p>And my Noncestore.go\n    package openid</p>\n\n<pre><code>import (\n    \"database/sql\"\n    \"errors\"\n    \"flag\"\n    \"fmt\"\n    \"time\"\n\n    _ \"github.com/go-sql-driver/mysql\"\n)\n\nvar maxNonceAge = flag.Duration(\"openid-max-nonce-age\",\n    60*time.Second,\n    \"Maximum accepted age for openid nonces. The bigger, the more\"+\n        \"memory is needed to store used nonces.\")\n\ntype SimpleNonceStore struct{}\n\nfunc (s *SimpleNonceStore) Accept(endpoint, nonce string) error {\n\n    db, err := sql.Open(\"mysql\", \"dbconnectinfo\")\n    errCheck(err)\n\n    if len(nonce) &lt; 20 || len(nonce) &gt; 256 {\n        return errors.New(\"Invalid nonce\")\n    }\n\n    ts, err := time.Parse(time.RFC3339, nonce[0:20])\n    errCheck(err)\n\n    rows, err := db.Query(\"SELECT * FROM noncestore\")\n    defer rows.Close()\n\n    now := time.Now()\n    diff := now.Sub(ts)\n\n    if diff &gt; *maxNonceAge {\n        return fmt.Errorf(\"Nonce too old: %ds\", diff.Seconds())\n    }\n\n    d := nonce[20:]\n\n    for rows.Next() {\n        var timeDB, nonce string\n        err := rows.Scan(&amp;nonce, &amp;timeDB)\n        errCheck(err)\n\n        dbTime, err := time.Parse(time.RFC3339, timeDB)\n        errCheck(err)\n\n        if dbTime == ts &amp;&amp; nonce == d {\n            return errors.New(\"Nonce is already used\")\n        }\n        if now.Sub(dbTime) &lt; *maxNonceAge {\n            _, err := db.Query(\"INSERT INTO noncestore SET nonce=?, time=?\", &amp;nonce, dbTime)\n            errCheck(err)\n        }\n    }\n\n    return nil\n\n}\n\nfunc errCheck(err error) {\n    if err != nil {\n        panic(\"We had an error!\" + err.Error())\n    }\n}\n</code></pre>\n\n<p>Then I try to use them in my main file as:</p>\n\n<pre><code>import _\"github.com/mysqlOpenID\"\n\nvar nonceStore = &amp;openid.SimpleNonceStore{}\nvar discoveryCache = &amp;openid.SimpleDiscoveryCache{}\n</code></pre>\n\n<p>I get no compile errors but it crashes</p>\n\n<p>I'm sure you'll look at my code and go what the hell (I'm fairly new and only have a week or so experience with Golang so please feel free to correct anything)</p>\n\n<p>Obviously I have done something wrong, I basically looked at the NonceStore.go and DiscoveryCache.go on the github for OpenId, replicated it, but replaced the map with database <code>insert</code> and <code>select</code> functions</p>\n\n<p>IF anybody can point me in the right direction on how to implement this properly that would be much appreciated, thanks! If you need anymore information please ask.</p>\n"}, {"tags": ["github", "go"], "comments": [{"owner": {"reputation": 197, "user_id": 1295863, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7d891db1c3cffd1c11b393d6d6816f97?s=128&d=identicon&r=PG", "display_name": "THUNDERGROOVE", "link": "https://stackoverflow.com/users/1295863/thundergroove"}, "edited": false, "score": 0, "creation_date": 1439683096, "post_id": 32001482, "comment_id": 51962603, "body": "When forking something, I like to keep it in the path you&#39;d get if you <code>go get</code> the project.  Of course it depends on the project, but if the project uses more than one package, you&#39;ll be stuck rewriting import paths."}], "answers": [{"comments": [{"owner": {"reputation": 4142, "user_id": 3765905, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xkm1p.png?s=128&g=1", "display_name": "BoltzmannBrain", "link": "https://stackoverflow.com/users/3765905/boltzmannbrain"}, "edited": false, "score": 0, "creation_date": 1439520606, "post_id": 32001496, "comment_id": 51906205, "body": "Where should I run this from? Was cloning the anomalizer repo necessary?"}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 2, "last_activity_date": 1439529199, "last_edit_date": 1439529199, "creation_date": 1439520373, "answer_id": 32001496, "question_id": 32001482, "link": "https://stackoverflow.com/questions/32001482/use-a-go-github-repo/32001496#32001496", "title": "Use a Go GitHub repo", "body": "<p>To fetch remote packages, run the <code>go get</code> command. Because the <code>go get</code> command automatically fetches dependencies and does not fetch a package that already have have, you can run</p>\n\n<pre><code>go get github.com/lytics/anomalyzer \n</code></pre>\n\n<p>to get everything setup including the <code>github.com/drewlanenga/govector</code> package.</p>\n"}], "owner": {"reputation": 4142, "user_id": 3765905, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xkm1p.png?s=128&g=1", "display_name": "BoltzmannBrain", "link": "https://stackoverflow.com/users/3765905/boltzmannbrain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 32001496, "answer_count": 1, "score": -2, "last_activity_date": 1439529199, "creation_date": 1439520277, "question_id": 32001482, "link": "https://stackoverflow.com/questions/32001482/use-a-go-github-repo", "title": "Use a Go GitHub repo", "body": "<p>I have Go installed, setup, and running hello world; I followed <a href=\"https://golang.org/doc/code.html\" rel=\"nofollow\">these directions</a>. My workspace is organized as follows:</p>\n\n<pre><code>gocode/\n    bin/\n    pkg/\n    src/\n        github.com/\n            my_username/\n                hello/\n                    hello.go\n            anomalyzer/\n                algorithms.go\n                ...\n                README.md\n</code></pre>\n\n<p>I would like to start using Go code from a forked GitHub repo, <a href=\"https://github.com/lytics/anomalyzer\" rel=\"nofollow\">lytics/anomalyzer</a>. How can I do this? I forked the repo and setup a local clone in <code>github.com/anomalyzer/</code> as shown above. But from the <code>github.com/anomalyzer/</code> dir I try <code>go install</code> and get the error message <code>algorithms.go:5:2: cannot find package \"github.com/drewlanenga/govector\" in any of: ...(lists my GOPATH)</code>. It looks like I need to also clone the <code>github.com/drewlanenga/govector</code>, do I? Is there an automated way to get all the package dependencies?</p>\n"}, {"tags": ["mysql", "go"], "comments": [{"owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "edited": false, "score": 0, "creation_date": 1439517798, "post_id": 32001109, "comment_id": 51905662, "body": "Could you please post a bit more code that demonstrates the issue?"}, {"owner": {"reputation": 1125, "user_id": 4224724, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XMleNi8A3cE/AAAAAAAAAAI/AAAAAAAACzU/_LZ3Rgct8Xk/photo.jpg?sz=128", "display_name": "Danver Braganza", "link": "https://stackoverflow.com/users/4224724/danver-braganza"}, "edited": false, "score": 0, "creation_date": 1439518378, "post_id": 32001109, "comment_id": 51905770, "body": "Maybe you should be using <a href=\"https://golang.org/pkg/net/http/#Request.FormValue\" rel=\"nofollow noreferrer\">golang.org/pkg/net/http/#Request.FormValue</a>, if you are sure that there&#39;s only ever going to be one value for each key."}], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 2, "last_activity_date": 1439521020, "last_edit_date": 1439521020, "creation_date": 1439519398, "answer_id": 32001382, "question_id": 32001109, "link": "https://stackoverflow.com/questions/32001109/golang-set-a-maps-key-as-a-variable-for-its-value/32001382#32001382", "title": "Golang set a maps key as a variable for its value", "body": "<p>An HTML form can have multiple values for a single key. This is why the request form field is defined to be a map of string slices. The <a href=\"http://godoc.org/net/http#Request.Form\" rel=\"nofollow\">request Form</a> is declared as</p>\n\n<pre><code> Form url.Values\n</code></pre>\n\n<p>and <a href=\"http://godoc.org/net/url#Values\" rel=\"nofollow\">url.Values</a> is declared as</p>\n\n<pre><code>  type Values map[string][]string\n</code></pre>\n\n<p>You can access the first value for a key using:</p>\n\n<pre><code>   var value string\n   if values := req.Form[key]; len(values) &gt; 0 {\n      value = values[0]\n   }\n</code></pre>\n\n<p>The <a href=\"http://godoc.org/net/url#Values.Get\" rel=\"nofollow\">url.Values Get</a> helper method simplifies this code to:</p>\n\n<pre><code>   value := req.Form.Get(key)\n</code></pre>\n\n<p>The <a href=\"https://golang.org/pkg/net/http/#Request.FormValue\" rel=\"nofollow\">http.Request FormValue</a> helper method simplifies it a bit more:</p>\n\n<pre><code>  value := req.FormValue(key)\n</code></pre>\n\n<p>You iterate through keys and values using:</p>\n\n<pre><code>  for key, values := range req.Form {\n     for _, value := range values {\n         fmt.Println(key, value)\n     }\n  }\n</code></pre>\n\n<p>If you want to iterate over the first value for a key, then use this code:</p>\n\n<pre><code> for key, values := range req.Form {\n    if len(values) &gt; 0 {\n       value := values[0]\n       fmt.Println(key, value)\n    }\n }\n</code></pre>\n\n<p>Before accessing req.Form, call <a href=\"http://godoc.org/net/http#Request.ParseForm\" rel=\"nofollow\">req.ParseForm</a> to parse the query string and request body. </p>\n"}], "owner": {"reputation": 23, "user_id": 3034917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a563785753715b58fe64342c6d3ad7e7?s=128&d=identicon&r=PG&f=1", "display_name": "Dark-Green", "link": "https://stackoverflow.com/users/3034917/dark-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2044, "favorite_count": 0, "accepted_answer_id": 32001382, "answer_count": 1, "score": 2, "last_activity_date": 1439521020, "creation_date": 1439516911, "question_id": 32001109, "link": "https://stackoverflow.com/questions/32001109/golang-set-a-maps-key-as-a-variable-for-its-value", "title": "Golang set a maps key as a variable for its value", "body": "<p>I need to go through an html forms input values and place them into an mysql datbase. Which I'm currently using <code>r.Form</code> to get a map. So that i don't have to use <code>r.Form.Get(\"date\")</code> for each which works but when i try to put the values into a database. It compiles just fine but i get <code>sql: converting argument #0's type: unsupported type []string, a slice</code> after i click submit in the browser. I can get around this by doing </p>\n\n<pre><code>`date := strings.Join(m[\"date\"], \"\")`\n</code></pre>\n\n<p>but doing that for 30+ values especially since some of the submited values will be created from previous database entries using html templates. If i have to change or add more later seems like there must be a more efficient way I've seen <code>for key, val := range m {}</code> but unfortunately I've only been doing this for about a week and i can't figure out how to keep the values and change the variable they get set to after each iteration. So that after</p>\n\n<pre><code>for key, val := range m {\nx := m[key]\n}\n</code></pre>\n\n<p>so that it will put out the equivalent </p>\n\n<pre><code>keyname := keyvalue\n</code></pre>\n\n<p>changing the keyname each time to be the same as the keyname in the map ie</p>\n\n<pre><code>date := 2015-8-13\ntime := 18:56:11\n</code></pre>\n\n<p>or if there's an easier way around this error then to create a varible for each one.</p>\n"}, {"tags": ["performance", "opengl", "go", "glsl", "shader"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1439514457, "post_id": 32000604, "comment_id": 51904874, "body": "<i>&quot;they end up switching back and fourth(one disappears than appears again, etc) at their individual translated locations.&quot;</i> Sounds like z-fighting. What are the coordinates of the quads? Make sure they are not the exact same distance away from the camera (or disable depth test)."}, {"owner": {"reputation": 3059, "user_id": 2428407, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76fdba35cfb51f3d55dcef8262b13126?s=128&d=identicon&r=PG", "display_name": "vesan", "link": "https://stackoverflow.com/users/2428407/vesan"}, "edited": false, "score": 0, "creation_date": 1439517754, "post_id": 32000604, "comment_id": 51905652, "body": "I don&#39;t think you can draw 2 quads with different textures in one draw call, unless your fragment shader has some way of knowing which texture to apply to which quad."}, {"owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 0, "creation_date": 1439519417, "post_id": 32000604, "comment_id": 51905967, "body": "Drawing the same texture, but I have uv coords for each one if they were different.  It is a sprite atlas"}, {"owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 0, "creation_date": 1439520900, "post_id": 32000604, "comment_id": 51906274, "body": "Depth testing is off... Also the objects are not on top of each other."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1439535195, "post_id": 32000604, "comment_id": 51910670, "body": "what do you mean you pass data as <code>(as uniform variables)</code> you can change uniforms only prior rendering the whole thing so you can not switch textures outside shader (as you draw all at once)..."}, {"owner": {"reputation": 636, "user_id": 3223328, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/6dSg3.jpg?s=128&g=1", "display_name": "DanceIgel", "link": "https://stackoverflow.com/users/3223328/danceigel"}, "edited": false, "score": 0, "creation_date": 1439538666, "post_id": 32000604, "comment_id": 51912439, "body": "Can you post your rendering method with the call of <code>glDrawElements&#47;Arrays</code>? As Spektre mentioned, you can set uniform variables only once before doing the rendering call and then again and render again."}, {"owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 0, "creation_date": 1439553805, "post_id": 32000604, "comment_id": 51921475, "body": "Sorry I had a typo, I am passing them in as &quot;in&quot; variables to the vertex shader.  Packing all vertices in the scene, translation, scale, rotate, uv, color, etc into different &quot;in&quot; variables per draw for WHOLE scene each time. This is done because of better performance of drawing lots of objects (no draw call for each object)."}], "answers": [{"comments": [{"owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 0, "creation_date": 1439553496, "post_id": 32003842, "comment_id": 51921298, "body": "Sorry I edited my post to explain more of what i&#39;m doing. So i&#39;m passing one huge texture atlas and breaking it out into different uv coords per picture inside that atlas."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "reply_to_user": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 0, "creation_date": 1439556021, "post_id": 32003842, "comment_id": 51922828, "body": "@efel in that case its OK... When I tried to compile your shader you got errors in vertex shader: <code>0(24) : error C1008: undefined variable &quot;translationMatrix&quot; 0(25) : error C1008: undefined variable &quot;scaleMatrix&quot; 0(26) : error C1008: undefined variable &quot;rotationMatrix&quot;</code> they should be also passed as uniforms. therefore it does not link and you are rendering with fixed function instead (unless you did not post the whole shader ...)"}, {"owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 0, "creation_date": 1439558241, "post_id": 32003842, "comment_id": 51924369, "body": "the vertex shader is not full as it would be a lot to type... I have helper method that handle matrices for T-R-S in the vertex shader.  I tried to ease the confusion with putting &quot;...&quot; to signify that parts of the code were missing"}], "tags": [], "owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "is_accepted": false, "score": 0, "last_activity_date": 1439535022, "last_edit_date": 1439535022, "creation_date": 1439534683, "answer_id": 32003842, "question_id": 32000604, "link": "https://stackoverflow.com/questions/32000604/opengl-trouble-passing-all-data-into-shader-at-once/32003842#32003842", "title": "OpenGL - trouble passing ALL data into shader at once", "body": "<p><strong>You have just single <code>sampler2D</code></strong></p>\n\n<ul>\n<li>which means you have just single texture at your disposal</li>\n<li>regardless on how many of them you bind.</li>\n<li>If you really need to pass the data as single block</li>\n<li>then you should add sampler per each texture you got</li>\n<li>not sure how many objects/textures you have</li>\n<li>but you are limited by gfx hw limit on texture units with this way of data passing</li>\n<li>also you need to add another value to your data telling which primitive use which texture unit</li>\n<li>and inside fragment then select the right texture sampler ...</li>\n</ul>\n\n<p>You should add stuff like this:</p>\n\n<pre><code>// vertex\nin int usedtexture;\nout int txr;\n\nvoid main()\n {\n txr=usedtexture;\n }\n\n// fragment\nuniform sampler2D myTextureSampler0;\nuniform sampler2D myTextureSampler1;\nuniform sampler2D myTextureSampler2;\nuniform sampler2D myTextureSampler3;\nin vec2 UV;\nin int txr;\nout vec4 color;\nvoid main\n {\n      if (txr==0) color = texture2D( myTextureSampler0, UV ).rgba;\n else if (txr==1) color = texture2D( myTextureSampler1, UV ).rgba;\n else if (txr==2) color = texture2D( myTextureSampler2, UV ).rgba;\n else if (txr==3) color = texture2D( myTextureSampler3, UV ).rgba;\n else color=vec4(0.0,0.0,0.0,0.0);\n }\n</code></pre>\n\n<p><strong>This way of passing is not good for these reasons:</strong></p>\n\n<ul>\n<li>number of used textures is limited to HW texture units limit</li>\n<li>if your rendering would need additional textures like normal/shininess/light maps</li>\n<li>then you need more then 1 texture per object type and your limit is suddenly divided by 2,3,4...</li>\n<li>You need <code>if/switch</code> statements inside fragment which can slow things down considerably</li>\n<li>Yes you can do it brunch less but then you would need to access all textures all the time increasing heat stress on gfx without reason...</li>\n</ul>\n\n<p><strong>This kind of passing is suitable for</strong></p>\n\n<ul>\n<li>all textures inside single image (as you mentioned texture atlas)</li>\n<li>which can be faster this way and reasonable for scenes with small number of object types (or materials) but large object count...</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "is_accepted": true, "score": 0, "last_activity_date": 1439583796, "creation_date": 1439583796, "answer_id": 32018095, "question_id": 32000604, "link": "https://stackoverflow.com/questions/32000604/opengl-trouble-passing-all-data-into-shader-at-once/32018095#32018095", "title": "OpenGL - trouble passing ALL data into shader at once", "body": "<p>Since I needed more input on this matter, I linked this page to reddit and someone was able to help me with one response! Anyways the reddit link is here:</p>\n\n<p><a href=\"https://www.reddit.com/r/opengl/comments/3gyvlt/opengl_passing_all_scene_data_into_shader_each/\" rel=\"nofollow\">https://www.reddit.com/r/opengl/comments/3gyvlt/opengl_passing_all_scene_data_into_shader_each/</a></p>\n\n<p>The issue of seeing two individual textures/quads after passing all vertices as one data structure over to vertex shader was because my element indices were off.  I needed to determine the correct index of each set of vertices for my 2 triangle(quad) objects.  Simply had to do something like this:</p>\n\n<pre><code>        vertexInfo.Elements = append(vertexInfo.Elements, uint32(idx*4), uint32(idx*4+1), uint32(idx*4+2), uint32(idx*4), uint32(idx*4+2), uint32(idx*4+3))\n</code></pre>\n"}], "owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "accepted_answer_id": 32018095, "answer_count": 2, "score": 0, "last_activity_date": 1439583796, "creation_date": 1439512497, "last_edit_date": 1439582098, "question_id": 32000604, "link": "https://stackoverflow.com/questions/32000604/opengl-trouble-passing-all-data-into-shader-at-once", "title": "OpenGL - trouble passing ALL data into shader at once", "body": "<p>I'm trying to display textures on quads (2 triangles) using opengl 3.3</p>\n\n<p>Drawing a texture on a quad works great; however when I have ONE textures (sprite atlas) but using 2 quads(objects) to display different parts of the atlas. When in draw loop, they end up switching back and fourth(one disappears than appears again, etc) at their individual translated locations.</p>\n\n<p>The way I'm drawing this is not the standard DrawElements for each quad(or object) but I package all quads, uv, translations, etc send them up to the shader as one big chunk (as \"in\" variables): Vertex shader:</p>\n\n<pre><code> #version 330 core\n\n// Input vertex data, different for all executions of this shader.\nin vec3 vertexPosition_modelspace;\nin vec3 vertexColor;\nin vec2 vertexUV;\nin vec3 translation;\nin vec4 rotation;\nin vec3 scale;\n// Output data ; will be interpolated for each fragment.\nout vec2 UV;\n// Output data ; will be interpolated for each fragment.\nout vec3 fragmentColor;\n// Values that stay constant for the whole mesh.\nuniform mat4 MVP;\n\n...\n\nvoid main(){\n\n\n    mat4 Model = mat4(1.0);\n\n    mat4 t = translationMatrix(translation);\n    mat4 s = scaleMatrix(scale);\n    mat4 r = rotationMatrix(vec3(rotation), rotation[3]);\n\n    Model *= t * r * s;\n\n\n    gl_Position = MVP * Model * vec4 (vertexPosition_modelspace,1); //* MVP;\n\n    // The color of each vertex will be interpolated\n    // to produce the color of each fragment\n    fragmentColor = vertexColor;\n\n    // UV of the vertex. No special space for this one.\n    UV = vertexUV;\n\n}\n</code></pre>\n\n<p>Is the vertex shader working as I think it would with a large chunk of data - that it draws each segment passed up as uniform individually because it does not seem like it?  Is my train of thought correct on this?</p>\n\n<p>For completeness this is my fragment shader:</p>\n\n<pre><code>#version 330 core\n\n// Interpolated values from the vertex shaders\nin vec3 fragmentColor;\n\n// Interpolated values from the vertex shaders\nin vec2 UV;\n\n// Ouput data\nout vec4 color;\n\n// Values that stay constant for the whole mesh.\nuniform sampler2D myTextureSampler;\n\nvoid main()\n{\n\n    // Output color = color of the texture at the specified UV\n    color = texture2D( myTextureSampler, UV ).rgba;\n\n}\n</code></pre>\n\n<p>A request for more information was made so I will put how i bind this data up to the vertex shader.  The following code is just one I use for my translations. I have more for color, rotation, scale, uv, etc:</p>\n\n<pre><code>gl.BindBuffer(gl.ARRAY_BUFFER, tvbo)\ngl.BufferData(gl.ARRAY_BUFFER, len(data.Translations)*4, gl.Ptr(data.Translations), gl.DYNAMIC_DRAW)\ntAttrib := uint32(gl.GetAttribLocation(program, gl.Str(\"translation\\x00\")))\ngl.EnableVertexAttribArray(tAttrib)\ngl.VertexAttribPointer(tAttrib, 3, gl.FLOAT, false, 0, nil)\n</code></pre>\n\n<p>...</p>\n\n<pre><code>gl.DrawElements(gl.TRIANGLES, int32(len(elements)), gl.UNSIGNED_INT, nil)\n</code></pre>\n"}, {"tags": ["user-interface", "go", "textbox", "size", "gxui"], "comments": [{"owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "edited": false, "score": 3, "creation_date": 1439512704, "post_id": 32000415, "comment_id": 51904441, "body": "this belongs on the issue tracker."}, {"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1439515856, "post_id": 32000415, "comment_id": 51905228, "body": "as the web developed mush, html/css/js/mvc framework is the best GUI system now. i&#39;d rather to running a local http server background and do the GUI with browser."}, {"owner": {"reputation": 7245, "user_id": 953732, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8115344be80362b14eb47e29c44c61e?s=128&d=identicon&r=PG", "display_name": "ThePiachu", "link": "https://stackoverflow.com/users/953732/thepiachu"}, "reply_to_user": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1439571947, "post_id": 32000415, "comment_id": 51932841, "body": "@JiangYD It&#39;s not ideal to expose a web frontend for an application relying on high security."}, {"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1439628297, "post_id": 32000415, "comment_id": 51947801, "body": "front mean just front"}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 3905094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d32cb071f62e54f057e1d635974594?s=128&d=identicon&r=PG", "display_name": "jeremie payet", "link": "https://stackoverflow.com/users/3905094/jeremie-payet"}, "is_accepted": false, "score": 0, "last_activity_date": 1442016866, "creation_date": 1442016866, "answer_id": 32533844, "question_id": 32000415, "link": "https://stackoverflow.com/questions/32000415/go-gxui-how-to-set-textbox-size/32533844#32533844", "title": "Go GXUI - how to set TextBox size?", "body": "<p>Did you try goroutine ? </p>\n\n<pre><code>go func(){\n    driver.Call(func(){\n        textBox.SetSize(math.Size{W: 300, H: 300})\n    })\n}()\n</code></pre>\n"}], "owner": {"reputation": 7245, "user_id": 953732, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8115344be80362b14eb47e29c44c61e?s=128&d=identicon&r=PG", "display_name": "ThePiachu", "link": "https://stackoverflow.com/users/953732/thepiachu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1442016866, "creation_date": 1439511086, "question_id": 32000415, "link": "https://stackoverflow.com/questions/32000415/go-gxui-how-to-set-textbox-size", "title": "Go GXUI - how to set TextBox size?", "body": "<p>I'm currently trying to figure out how to set a Go GXUI TextBox size. I tried:</p>\n\n<pre><code>textBox := theme.CreateTextBox()\ntextBox.SetText(\"\")\ntextBox.SetSize(math.Size{W: 300, H: 300})\n</code></pre>\n\n<p>But it doesn't appear to be working - I'm getting a narrow rectangular bar instead. When I change the text, it expands downwards, but not to the sides.</p>\n"}, {"tags": ["go", "cryptography", "rsa", "pkcs#15"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5225960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e780bd60fd1d613d1ee315ece8cb5d3?s=128&d=identicon&r=PG&f=1", "display_name": "im_ferris", "link": "https://stackoverflow.com/users/5225960/im-ferris"}, "edited": false, "score": 2, "creation_date": 1439533360, "post_id": 32003341, "comment_id": 51909863, "body": "<b>UPDATE:</b> Fixed base64 decode issue, needed two extra &#39;=&#39; at the end, since base64 must be divisible by 4. <a href=\"http://play.golang.org/p/sNXV4lTlI9\" rel=\"nofollow noreferrer\">http://play.golang.org/p/sNXV4lTlI9</a>"}, {"owner": {"reputation": 1668, "user_id": 311358, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b2b51e4cceb4a0c1609b81815001b69?s=128&d=identicon&r=PG", "display_name": "xrl", "link": "https://stackoverflow.com/users/311358/xrl"}, "edited": false, "score": 0, "creation_date": 1439533844, "post_id": 32003341, "comment_id": 51910048, "body": "Good catch, I totally forgot to decode the base64. Here&#39;s a useful function: <a href=\"https://github.com/gudTECH/scamp-go/blob/master/scamp/ticket.go#L26-L39\" rel=\"nofollow noreferrer\">github.com/gudTECH/scamp-go/blob/master/scamp/ticket.go#L26-&zwnj;&#8203;L39</a>"}, {"owner": {"reputation": 1668, "user_id": 311358, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b2b51e4cceb4a0c1609b81815001b69?s=128&d=identicon&r=PG", "display_name": "xrl", "link": "https://stackoverflow.com/users/311358/xrl"}, "edited": false, "score": 1, "creation_date": 1439534251, "post_id": 32003341, "comment_id": 51910223, "body": "I posted an update playground example with the base64 decoding"}], "tags": [], "owner": {"reputation": 31, "user_id": 5225960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e780bd60fd1d613d1ee315ece8cb5d3?s=128&d=identicon&r=PG&f=1", "display_name": "im_ferris", "link": "https://stackoverflow.com/users/5225960/im-ferris"}, "is_accepted": false, "score": 3, "last_activity_date": 1439532467, "last_edit_date": 1495541676, "creation_date": 1439532467, "answer_id": 32003341, "question_id": 31999971, "link": "https://stackoverflow.com/questions/31999971/verifying-signature-of-payload-in-go/32003341#32003341", "title": "Verifying signature of payload in Go", "body": "<p>Though I couldn't get it to work, I suspect the issue is that you'll need to convert the sig from base64 into bytes via the base64 encoding. See this example here:</p>\n\n<p><a href=\"http://play.golang.org/p/bzpD7Pa9mr\" rel=\"nofollow noreferrer\">http://play.golang.org/p/bzpD7Pa9mr</a> (especially lines 23 to 28, where they have to encode the sig from bytes to base64 string to print it, then feed the byte version into the sig check, indicating that you have to use the byte version and not base64 string)</p>\n\n<p>Which I stumbled across on this post:\n<a href=\"https://stackoverflow.com/questions/20655702/signing-and-decoding-with-rsa-sha-in-go\">Signing and decoding with RSA-SHA in GO</a></p>\n\n<p>I've found that golang generally expects bytes everywhere in byte encoding. I tried to decode your sig string from base64 to bytes however, even after replacing the '-' with '+' and the '_' with '/' it still won't work, for reasons unknown to me:</p>\n\n<p><a href=\"http://play.golang.org/p/71IiV2z_t8\" rel=\"nofollow noreferrer\">http://play.golang.org/p/71IiV2z_t8</a></p>\n\n<p>At the very least this seems to indicate that maybe your sig is bad? If it isn't valid base64? I think if you can find a way to solve this the rest should work!</p>\n"}, {"comments": [{"owner": {"reputation": 1668, "user_id": 311358, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b2b51e4cceb4a0c1609b81815001b69?s=128&d=identicon&r=PG", "display_name": "xrl", "link": "https://stackoverflow.com/users/311358/xrl"}, "edited": false, "score": 0, "creation_date": 1439850601, "post_id": 32060735, "comment_id": 52020122, "body": "Is there an easy way to verify the length of the signed value? Is it length encoded or something?"}], "tags": [], "owner": {"reputation": 76, "user_id": 5237010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d88108f864a691cc53acc2973f5f162?s=128&d=identicon&r=PG&f=1", "display_name": "The Answer Dude", "link": "https://stackoverflow.com/users/5237010/the-answer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1439850550, "creation_date": 1439850550, "answer_id": 32060735, "question_id": 31999971, "link": "https://stackoverflow.com/questions/31999971/verifying-signature-of-payload-in-go/32060735#32060735", "title": "Verifying signature of payload in Go", "body": "<p>I tried running your code and it doesn't look like your ticket is well formed. It's not long enough. Where did you get the value from?</p>\n\n<p>Double check that ticket -- that may just be enough to get you going.</p>\n"}], "owner": {"reputation": 1668, "user_id": 311358, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b2b51e4cceb4a0c1609b81815001b69?s=128&d=identicon&r=PG", "display_name": "xrl", "link": "https://stackoverflow.com/users/311358/xrl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3448, "favorite_count": 2, "accepted_answer_id": 32060735, "answer_count": 2, "score": 2, "last_activity_date": 1439850550, "creation_date": 1439507830, "last_edit_date": 1439534226, "question_id": 31999971, "link": "https://stackoverflow.com/questions/31999971/verifying-signature-of-payload-in-go", "title": "Verifying signature of payload in Go", "body": "<p>I am verifying the identity of the sender of a piece of data. I am provided the RSA public key in a PEM format and I know the data is passed through the SHA256 hashing function. The equivalent verification on the node.js platform:</p>\n\n<pre><code>Ticket.prototype.verify = function (ticket) {\n    if (!ticket) return null;\n\n    var pubkey = fs.readFileSync('/etc/SCAMP/auth/ticket_verify_public_key.pem');\n\n    var parts = ticket.split(',');\n\n    if (parts[0] != '1') return null;\n\n    var sig = new Buffer(parts.pop().replace(/-/g,'+').replace(/_/g,'/'), 'base64');\n\n    var valid = crypto.createVerify('sha256').update( new Buffer(parts.join(',')) ).verify( pubkey, sig )\n</code></pre>\n\n<p>Which can verify:</p>\n\n<pre><code>1,3063,21,1438783424,660,1+20+31+32+34+35+36+37+38+39+40+41+42+43+44+46+47+48+50+53+56+59+60+61+62+67+68+69+70+71+75+76+80+81+82+86+87+88+102+104+105+107+109+110+122+124,PcFNyWjoz_iiVMgEe8I3IBfzSlUcqUGtsuN7536PTiBW7KDovIqCaSi_8nZWcj-j1dfbQRA8mftwYUWMhhZ4DD78-BH8MovNVucbmTmf2Wzbx9bsI-dmUADY5Q2ol4qDXG4YQJeyZ6f6F9s_1uxHTH456QcsfNxFWh18ygo5_DVmQQSXCHN7EXM5M-u2DSol9MSROeBolYnHZyE093LgQ2veWQREbrwg5Fcp2VZ6VqIC7yu6f_xYHEvU0-ZsSSRMAMUmhLNhmFM4KDjl8blVgC134z7XfCTDDjCDiynSL6b-D-\n</code></pre>\n\n<p>by splitting on the last <code>,</code>. The left side of the split is the ticket data I care about, the right side is the signature which I need to verify before I can use the ticket data.</p>\n\n<p>I have tried to port the logic to go:</p>\n\n<pre><code>func TestSigVerification(t *testing.T) {\n    block, _ := pem.Decode(signingPubKey)\n    if block == nil {\n        t.Errorf(\"expected to block to be non-nil CERTIFICATE\", block)\n    }\n\n    key, err := x509.ParsePKIXPublicKey(block.Bytes)\n    if err != nil {\n        t.Errorf(\"could not parse PKIXPublicKey: `%s`\", key)\n    }\n\n    rsaPubKey, ok := key.(*rsa.PublicKey)\n    if !ok {\n        t.Errorf(\"couldn't cast to rsa.PublicKey!\")\n    }\n\n    ticket,_ := ParseTicketBytes(fullTicketBytes)\n\n    h := sha256.New()\n    h.Write(ticketBytes)\n    digest := h.Sum(nil)\n\n    err = rsa.VerifyPKCS1v15(rsaPubKey, crypto.SHA256, digest, ticket.Signature)\n    if err != nil {\n        t.Errorf(\"could not verify ticket: `%s` (digest: `%v`)\", err, digest )\n    }\n}\n</code></pre>\n\n<p>But I'm pretty sure <code>VerifyPKCS1v15</code> is not equivalent to node's <code>crypto.createVerify</code> and this test case fails. What should I be using? How can I use the public key to decrypt the signature and get the sha256? once I have the decrypted sha256 value I could just do a basic comparison with the sha256 I have generated.</p>\n\n<p>Here's a runnable playground example: <a href=\"http://play.golang.org/p/COx2OG-AiA\" rel=\"nofollow\">http://play.golang.org/p/COx2OG-AiA</a></p>\n"}, {"tags": ["amazon-web-services", "go", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 1397, "user_id": 1102395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cZCKT.png?s=128&g=1", "display_name": "Samar", "link": "https://stackoverflow.com/users/1102395/samar"}, "edited": false, "score": 0, "creation_date": 1439500588, "post_id": 31998410, "comment_id": 51900667, "body": "My guess is you might be missing any dotfiles/dirs (.ebextensions for example is a standard dot directory). I have not deployed golang app on eb before and this is just my guess. Event/error logs would have helped for us to give more information."}], "answers": [{"tags": [], "owner": {"reputation": 735, "user_id": 2536700, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ac04fd32567ed44ddeaca257bcd6806?s=128&d=identicon&r=PG", "display_name": "Chris W", "link": "https://stackoverflow.com/users/2536700/chris-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1439500636, "creation_date": 1439500636, "answer_id": 31998588, "question_id": 31998410, "link": "https://stackoverflow.com/questions/31998410/golang-aws-deployment-to-aws-elastic-beanstalk-not-working/31998588#31998588", "title": "Golang &amp; AWS: Deployment to AWS Elastic Beanstalk not working", "body": "<p>Silly me, I was zipping the folder instead of the contents of the folder. After zipping the contents of the folder, it worked for me. </p>\n"}], "owner": {"reputation": 735, "user_id": 2536700, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ac04fd32567ed44ddeaca257bcd6806?s=128&d=identicon&r=PG", "display_name": "Chris W", "link": "https://stackoverflow.com/users/2536700/chris-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1439500636, "creation_date": 1439499905, "question_id": 31998410, "link": "https://stackoverflow.com/questions/31998410/golang-aws-deployment-to-aws-elastic-beanstalk-not-working", "title": "Golang &amp; AWS: Deployment to AWS Elastic Beanstalk not working", "body": "<p>I setup a golang web server and used the sample web application that they provided. After the deployment I went to the URL of the webserver and it worked. </p>\n\n<p>I downloaded the sample application zip, unzipped it, rezipped it and upload the app and the deployment did not work. </p>\n\n<p>However if I reuploaded the original sample zip it WOULD work. Based on this it appears something is wrong with how I'm zipping the source code. Any ideas? </p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 2900, "user_id": 677373, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/597e00d0daa530370410a6bf5f3f0795?s=128&d=identicon&r=PG", "display_name": "sjmh", "link": "https://stackoverflow.com/users/677373/sjmh"}, "edited": false, "score": 6, "creation_date": 1439525587, "post_id": 31997807, "comment_id": 51907293, "body": "Is there anyway for the method on the embedded type to reference any fields on the struct that is embedding it?"}, {"owner": {"reputation": 654, "user_id": 2867339, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Ly1g1.jpg?s=128&g=1", "display_name": "Altenrion", "link": "https://stackoverflow.com/users/2867339/altenrion"}, "edited": false, "score": 0, "creation_date": 1471675918, "post_id": 31997807, "comment_id": 65451929, "body": "Reflection can be used, i gues. But there would be very import any to controll and check everyone call , because this way increase possibility of run time error unfortunatelly..."}, {"owner": {"reputation": 104432, "user_id": 53212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0fbce15f81d6308656931250db267a1?s=128&d=identicon&r=PG", "display_name": "thomasrutter", "link": "https://stackoverflow.com/users/53212/thomasrutter"}, "edited": false, "score": 0, "creation_date": 1503665612, "post_id": 31997807, "comment_id": 78722149, "body": "sjmh it&#39;s not possible to write a method that can reference fields in a struct in which its receiver is embedded, as such a syntax doesn&#39;t exist and there&#39;s no clear way it should behave when <i>not</i> embedded in such a struct."}, {"owner": {"reputation": 1715, "user_id": 8712494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iWUnn1PqAuw/AAAAAAAAAAI/AAAAAAAAAGQ/2OslFo_DLk4/photo.jpg?sz=128", "display_name": "Amin Shojaei", "link": "https://stackoverflow.com/users/8712494/amin-shojaei"}, "edited": false, "score": 0, "creation_date": 1602358430, "post_id": 31997807, "comment_id": 113697355, "body": "What a beautiful approach &lt;3"}], "tags": [], "owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "is_accepted": true, "score": 31, "last_activity_date": 1439497638, "creation_date": 1439497638, "answer_id": 31997807, "question_id": 31997753, "link": "https://stackoverflow.com/questions/31997753/reuse-a-function-across-multiple-structs-to-satisfy-an-interface/31997807#31997807", "title": "Reuse a function across multiple structs to satisfy an interface", "body": "<p>You can create a parent struct that is embedded by each of the animals that \"howl\". The parent struct implements the <code>Speak() string</code> method, which means <code>Wolf</code> and <code>Beagle</code> implement the <code>Animal</code> interface.</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype Animal interface {\n  Speak() string\n}\n\ntype Howlers struct {\n}\n\nfunc (h Howlers) Speak() string {\n  return \"HOWWWWWWWWL\"\n}\n\ntype Dog struct {}\n\nfunc (d Dog) Speak() string {\n  return \"Woof!\"\n}\n\ntype Wolf struct {\n    Howlers\n}\n\ntype Beagle struct {\n    Howlers\n}\n\ntype Cat struct {}\n\nfunc (c Cat) Speak() string {\n  return \"Meow\"\n}\n\nfunc main() {\n    var a Animal\n    a = Wolf{}\n    fmt.Println(a.Speak())\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/IMFnWdeweD\">https://play.golang.org/p/IMFnWdeweD</a></p>\n"}], "owner": {"reputation": 2900, "user_id": 677373, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/597e00d0daa530370410a6bf5f3f0795?s=128&d=identicon&r=PG", "display_name": "sjmh", "link": "https://stackoverflow.com/users/677373/sjmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7289, "favorite_count": 4, "accepted_answer_id": 31997807, "answer_count": 1, "score": 13, "last_activity_date": 1502746487, "creation_date": 1439497408, "last_edit_date": 1502746487, "question_id": 31997753, "link": "https://stackoverflow.com/questions/31997753/reuse-a-function-across-multiple-structs-to-satisfy-an-interface", "title": "Reuse a function across multiple structs to satisfy an interface", "body": "<p>Is there anyway that you can use the same function across multiple structs to satisfy an interface?</p>\n\n<p>For example:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype Animal interface {\n  Speak() string\n}\n\ntype Dog struct {}\n\nfunc (d Dog) Speak() string {\n  return \"Woof!\"\n}\n\ntype Wolf struct {}\n\nfunc (w Wolf) Speak() string {\n  return \"HOWWWWWWWWL\"\n}\n\ntype Beagle struct {}\n\nfunc (b Beagle) Speak() string {\n  return \"HOWWWWWWWWL\"\n}\n\ntype Cat struct {}\n\nfunc (c Cat) Speak() string {\n  return \"Meow\"\n}\n\nfunc main() {\n    var a Animal\n    a = Wolf{}\n    fmt.Println(a.Speak())\n}\n</code></pre>\n\n<p>Because Wolf and Beagle share the exact same function, is there anyway to write that function once, then share it between the two structs so that they both satisfy Animal?</p>\n"}, {"tags": ["google-app-engine", "go", "google-cloud-datastore"], "answers": [{"tags": [], "owner": {"reputation": 1039, "user_id": 1201422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b52a61797037f989c609529e16c414?s=128&d=identicon&r=PG", "display_name": "Chris Pushbullet", "link": "https://stackoverflow.com/users/1201422/chris-pushbullet"}, "is_accepted": false, "score": 1, "last_activity_date": 1440488158, "creation_date": 1440488158, "answer_id": 32198103, "question_id": 31997736, "link": "https://stackoverflow.com/questions/31997736/is-it-possible-to-use-pythons-property-classes-for-datastore-from-the-go-runtim/32198103#32198103", "title": "Is it possible to use Python&#39;s property classes for Datastore from the Go runtime?", "body": "<p>The golang datastore API supports list properties as far as I know.  So you should be able to have a property that is a <code>ndb.StringProperty(repeated=True)</code> in python and <code>[]string</code> in go and they should interoperate fine.</p>\n"}], "owner": {"reputation": 384, "user_id": 1835188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M582S.png?s=128&g=1", "display_name": "Lorenz Leutgeb", "link": "https://stackoverflow.com/users/1835188/lorenz-leutgeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475211619, "creation_date": 1439497351, "last_edit_date": 1475211619, "question_id": 31997736, "link": "https://stackoverflow.com/questions/31997736/is-it-possible-to-use-pythons-property-classes-for-datastore-from-the-go-runtim", "title": "Is it possible to use Python&#39;s property classes for Datastore from the Go runtime?", "body": "<p>I am using the Go runtime on GAE (Managed VMs) with Datastore. Just recently I found <a href=\"https://cloud.google.com/appengine/docs/python/datastore/typesandpropertyclasses\" rel=\"nofollow\">this</a> page that talks about Types and Property classes in connection with the Python runtime and Expando.</p>\n\n<p>I would like to use queries against <code>ListProperties</code> from Go. Is that possible? Of course I know that <a href=\"https://godoc.org/google.golang.org/appengine/datastore\" rel=\"nofollow\"><code>google.golang.org/appengine/datastore</code></a> does not expose this feature.</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 729, "user_id": 1170270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4e820bb65839d794953d401169ca66?s=128&d=identicon&r=PG", "display_name": "ttekin", "link": "https://stackoverflow.com/users/1170270/ttekin"}, "edited": false, "score": 0, "creation_date": 1455138178, "post_id": 31995368, "comment_id": 58360501, "body": "This does work - Thanks alot!!"}], "tags": [], "owner": {"reputation": 4076, "user_id": 1806763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GXLjI.png?s=128&g=1", "display_name": "JD D", "link": "https://stackoverflow.com/users/1806763/jd-d"}, "is_accepted": false, "score": 11, "last_activity_date": 1439489487, "last_edit_date": 1439489487, "creation_date": 1439488903, "answer_id": 31995368, "question_id": 31995367, "link": "https://stackoverflow.com/questions/31995367/passing-array-or-slice-into-variable-args-function-in-golang/31995368#31995368", "title": "passing array or slice into variable args function in golang", "body": "<p>Found a way to do this by appending the <code>...</code> to your slice when being passed in as an argument.</p>\n\n<p>For example, I was originally trying to call make the following call which was yielding the error:</p>\n\n<pre><code>filepath.Join(append(elems, basePath))\n</code></pre>\n\n<p>but I corrected it by appending <code>...</code> in the argument:</p>\n\n<pre><code>filepath.Join(append(elems, basePath)...)\n</code></pre>\n"}], "owner": {"reputation": 4076, "user_id": 1806763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GXLjI.png?s=128&g=1", "display_name": "JD D", "link": "https://stackoverflow.com/users/1806763/jd-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3926, "favorite_count": 0, "closed_date": 1439489537, "answer_count": 1, "score": 0, "last_activity_date": 1439489487, "creation_date": 1439488903, "question_id": 31995367, "link": "https://stackoverflow.com/questions/31995367/passing-array-or-slice-into-variable-args-function-in-golang", "closed_reason": "Duplicate", "title": "passing array or slice into variable args function in golang", "body": "<p>filepath.Join method takes in a <code>...string</code> argument but I have a <code>[]string</code> that I would like pass in.  When I attempt to do this I get the following error:</p>\n\n<pre><code>cannot use append(elems, spadePath) (type []string) as type string in argument to filepath.Join\n</code></pre>\n\n<p>Is there a way to convert between a []type and a ...type?</p>\n"}, {"tags": ["go", "ibm-cloud"], "comments": [{"owner": {"reputation": 1066, "user_id": 1116896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa0e7d89cbed7e3876a97aa9640f44a2?s=128&d=identicon&r=PG", "display_name": "Jake Peyser", "link": "https://stackoverflow.com/users/1116896/jake-peyser"}, "edited": false, "score": 3, "creation_date": 1439480783, "post_id": 31992564, "comment_id": 51890047, "body": "Have you tried looking at the logs? Using the cf cli, you can type <code>cf logs appName --recent</code>"}, {"owner": {"reputation": 412, "user_id": 1188214, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a472369f11015925af0e882429d30c1?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1188214/patrick"}, "reply_to_user": {"reputation": 1066, "user_id": 1116896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa0e7d89cbed7e3876a97aa9640f44a2?s=128&d=identicon&r=PG", "display_name": "Jake Peyser", "link": "https://stackoverflow.com/users/1116896/jake-peyser"}, "edited": false, "score": 0, "creation_date": 1439481583, "post_id": 31992564, "comment_id": 51890572, "body": "Hi, yes, it returns: &quot;ERR Instance (index 0) failed to start accepting connections&quot; which leads me to believe that the port is not being set correctly?"}, {"owner": {"reputation": 1066, "user_id": 1116896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa0e7d89cbed7e3876a97aa9640f44a2?s=128&d=identicon&r=PG", "display_name": "Jake Peyser", "link": "https://stackoverflow.com/users/1116896/jake-peyser"}, "edited": false, "score": 0, "creation_date": 1439481661, "post_id": 31992564, "comment_id": 51890634, "body": "This error can mean a number of things - essentially it&#39;s just saying your server never started. Can you post the full log output after your app finishes staging?"}, {"owner": {"reputation": 412, "user_id": 1188214, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a472369f11015925af0e882429d30c1?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1188214/patrick"}, "reply_to_user": {"reputation": 1066, "user_id": 1116896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa0e7d89cbed7e3876a97aa9640f44a2?s=128&d=identicon&r=PG", "display_name": "Jake Peyser", "link": "https://stackoverflow.com/users/1116896/jake-peyser"}, "edited": false, "score": 0, "creation_date": 1439481940, "post_id": 31992564, "comment_id": 51890835, "body": "Updated. There&#39;s lots of repetition in the error log, so I&#39;ve taken the bottom &#39;chunk&#39;. If you require more, please let me know. Thanks!"}, {"owner": {"reputation": 3551, "user_id": 3666413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZhRSt.jpg?s=128&g=1", "display_name": "Ram Vennam", "link": "https://stackoverflow.com/users/3666413/ram-vennam"}, "edited": false, "score": 2, "creation_date": 1439482989, "post_id": 31992564, "comment_id": 51891434, "body": "I deployed your code with successful results. Can you confirm you have a <code>Procfile</code>? I recommend you download the go starter code, and replace the <code>app.go</code> with your code."}, {"owner": {"reputation": 412, "user_id": 1188214, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a472369f11015925af0e882429d30c1?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1188214/patrick"}, "edited": false, "score": 0, "creation_date": 1439546168, "post_id": 31992564, "comment_id": 51917027, "body": "Ram, you are correct, it was indeed the procfile. How come it works with <code>web: gohelloworld</code> when nothing in the manifest or app.go references gohelloworld. Thank you for your help!"}, {"owner": {"reputation": 211, "user_id": 4714089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H67JK.jpg?s=128&g=1", "display_name": "jpapejr", "link": "https://stackoverflow.com/users/4714089/jpapejr"}, "reply_to_user": {"reputation": 3551, "user_id": 3666413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZhRSt.jpg?s=128&g=1", "display_name": "Ram Vennam", "link": "https://stackoverflow.com/users/3666413/ram-vennam"}, "edited": false, "score": 0, "creation_date": 1439692093, "post_id": 31992564, "comment_id": 51963863, "body": "@RamVennam you should submit your comment as an answer so he can accept it."}], "answers": [{"tags": [], "owner": {"reputation": 412, "user_id": 1188214, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a472369f11015925af0e882429d30c1?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1188214/patrick"}, "is_accepted": true, "score": 1, "last_activity_date": 1439563839, "creation_date": 1439563839, "answer_id": 32012919, "question_id": 31992564, "link": "https://stackoverflow.com/questions/31992564/bluemix-not-starting-due-to-health-check-timeout/32012919#32012919", "title": "BlueMix not starting due to health check timeout", "body": "<p>The above program I wrote is correct and runs as it should. The issue was that the procfile was not correctly set up. The procfile blueMix uses in its example Go program is <code>web: gohelloworld</code>.</p>\n\n<p><code>gohelloworld</code> can be found in the godeps/Godeps.json file, as the <code>ImportPath</code> value. So when generating your godep file, the generated value from <code>ImportPath</code> is the value you should place in your procfile.</p>\n\n<p>In my case, it should have been: <code>web: test</code>.</p>\n"}], "owner": {"reputation": 412, "user_id": 1188214, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a472369f11015925af0e882429d30c1?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/1188214/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "accepted_answer_id": 32012919, "answer_count": 1, "score": 2, "last_activity_date": 1439563839, "creation_date": 1439479830, "last_edit_date": 1439481894, "question_id": 31992564, "link": "https://stackoverflow.com/questions/31992564/bluemix-not-starting-due-to-health-check-timeout", "title": "BlueMix not starting due to health check timeout", "body": "<p>I'm using Go to try create a simple 'hello world'-eque script using IBM's BlueMix. I've been able to use their hello world script which runs fine, however upon writing my own it fails.</p>\n\n<p>I'm aware that you need to take the environment variable for the port, which is what I've done, however with this in place, the check is still unable to start the service.</p>\n\n<pre><code>package main\n\nimport (\n    \"io\"\n    \"net/http\"\n    \"log\"\n    \"os\"\n    \"fmt\"\n)\n\nconst (\n    DEFAULT_PORT = \"4001\"\n    DEFAULT_HOST = \"localhost\"\n)\n\nfunc HelloServer(w http.ResponseWriter, req *http.Request) {\n    io.WriteString(w, \"hello, world!\\n\")\n}\n\nfunc main() {\n    http.HandleFunc(\"/hello\", HelloServer)\n\n    var port string\n    if port = os.Getenv(\"VCAP_APP_PORT\"); len(port) == 0 {\n        port = DEFAULT_PORT\n    }\n\n    var host string\n    if host = os.Getenv(\"VCAP_APP_HOST\"); len(host) == 0 {\n        host = DEFAULT_HOST\n    }\n\n\n    log.Printf(\"Using host %v+\\n\", host)\n    log.Printf(\"Using port %v+\\n\", port)\n    fmt.Println(\"######\" + port)\n\n    err := http.ListenAndServe(host+\":\"+port, nil)\n    if err != nil {\n        log.Printf(\"ListenAndServe: \", err)\n    }\n}\n</code></pre>\n\n<p>Any help as to why this program is failing is greatly appreciated.</p>\n\n<p>-- update --</p>\n\n<p>The output of <code>cf logs app --recent</code> is:</p>\n\n<pre><code>2015-08-13T16:47:36.36+0100 [DEA/10]     OUT Removing crash for app with id ae803621-0b84-48d2-b3fd-6067053b40a6\n2015-08-13T16:47:36.36+0100 [DEA/10]     OUT Stopping app instance (index 0) with guid ae803621-0b84-48d2-b3fd-6067053b40a6\n2015-08-13T16:47:36.36+0100 [DEA/10]     OUT Stopped app instance (index 0) with guid ae803621-0b84-48d2-b3fd-6067053b40a6\n2015-08-13T16:53:38.29+0100 [DEA/87]     OUT Starting app instance (index 0) with guid ae803621-0b84-48d2-b3fd-6067053b40a6\n2015-08-13T16:54:02.13+0100 [DEA/87]     ERR Instance (index 0) failed to start accepting connections\n2015-08-13T16:54:02.18+0100 [API/0]      OUT App instance exited with guid ae803621-0b84-48d2-b3fd-6067053b40a6 payload: {\"cc_partition\"=&gt;\"default\", \"droplet\"=&gt;\"ae803621-0b84-48d2-b3fd-6067053b40a6\", \"version\"=&gt;\"2ed88562-d12c-4391-ae8f-5fd8475cc350\", \"instance\"=&gt;\"e4f99db81d194b1bb865a9e55f0a1d54\", \"index\"=&gt;0, \"reason\"=&gt;\"CRASHED\", \"exit_status\"=&gt;127, \"exit_description\"=&gt;\"failed to accept connections within health check timeout\", \"crash_timestamp\"=&gt;1439481242}\n2015-08-13T16:54:02.21+0100 [API/10]     OUT App instance exited with guid ae803621-0b84-48d2-b3fd-6067053b40a6 payload: {\"cc_partition\"=&gt;\"default\", \"droplet\"=&gt;\"ae803621-0b84-48d2-b3fd-6067053b40a6\", \"version\"=&gt;\"2ed88562-d12c-4391-ae8f-5fd8475cc350\", \"instance\"=&gt;\"e4f99db81d194b1bb865a9e55f0a1d54\", \"index\"=&gt;0, \"reason\"=&gt;\"CRASHED\", \"exit_status\"=&gt;127, \"exit_description\"=&gt;\"failed to accept connections within health check timeout\", \"crash_timestamp\"=&gt;1439481242}\n</code></pre>\n"}, {"tags": ["windows", "go", "dns"], "answers": [{"comments": [{"owner": {"reputation": 96, "user_id": 2093404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9c01450f25df29c12ffede3a44e3ac2?s=128&d=identicon&r=PG", "display_name": "Luis", "link": "https://stackoverflow.com/users/2093404/luis"}, "edited": false, "score": 0, "creation_date": 1439479823, "post_id": 31992298, "comment_id": 51889363, "body": "This currently returns an empty array for me for the connection that lists &quot;company.com&quot; as a DNS suffix"}], "tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": false, "score": 0, "last_activity_date": 1439479084, "last_edit_date": 1495535200, "creation_date": 1439479084, "answer_id": 31992298, "question_id": 31991479, "link": "https://stackoverflow.com/questions/31991479/how-to-retrieve-connection-specific-dns-suffix-for-interface-in-go/31992298#31992298", "title": "How to retrieve Connection-Specific DNS Suffix for Interface in Go?", "body": "<p>See: <a href=\"https://stackoverflow.com/questions/16512840/get-domain-name-from-ip-address-in-go\">similar question</a></p>\n\n<p>try net.LookupAddr for each IP you get from net.InterfaceAddrs\nassuming they reverse back correctly, they should end in your domain name.</p>\n"}], "owner": {"reputation": 96, "user_id": 2093404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9c01450f25df29c12ffede3a44e3ac2?s=128&d=identicon&r=PG", "display_name": "Luis", "link": "https://stackoverflow.com/users/2093404/luis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439479084, "creation_date": 1439477066, "question_id": 31991479, "link": "https://stackoverflow.com/questions/31991479/how-to-retrieve-connection-specific-dns-suffix-for-interface-in-go", "title": "How to retrieve Connection-Specific DNS Suffix for Interface in Go?", "body": "<p>I am on a windows machine and programming in Go. When I do an ipconfig I am able to see my machine's interfaces.</p>\n\n<p>Whenever I execute net.InterfaceAddrs() I get a bunch of IP addresses, and I know which one is the one I am looking for, but I want to be able to tell if those addresses belong to my domain. In the output of ipconfig I can tell this by reading the Connection-Specific DNS Suffix entry which has my \"company.com\" listed.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1439474882, "post_id": 31990342, "comment_id": 51885416, "body": "Where the tests are run, and where you install the binary are two different places, so they have different relative paths. Just print out the absolute <code>path</code> from each to see."}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 2, "creation_date": 1439474937, "post_id": 31990342, "comment_id": 51885454, "body": "Use full, not relative paths if you want things to be robust. Use env vars, flags or a config file to allow for overriding instead of hardcoding the path."}, {"owner": {"reputation": 4829, "user_id": 2754218, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6e87368666dbd25ad4288859d10fda55?s=128&d=identicon&r=PG", "display_name": "Jean Lebrument", "link": "https://stackoverflow.com/users/2754218/jean-lebrument"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1439475348, "post_id": 31990342, "comment_id": 51885746, "body": "@JimB I edited my OP to add the two absolute paths."}, {"owner": {"reputation": 4829, "user_id": 2754218, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6e87368666dbd25ad4288859d10fda55?s=128&d=identicon&r=PG", "display_name": "Jean Lebrument", "link": "https://stackoverflow.com/users/2754218/jean-lebrument"}, "reply_to_user": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1439475475, "post_id": 31990342, "comment_id": 51885845, "body": "@elithrar Could you please give me an example with env vars or config file ?"}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 1, "creation_date": 1439475620, "post_id": 31990342, "comment_id": 51885964, "body": "An example would be <code>keyPath := os.Getenv(&quot;KEY_PATH&quot;); if keyPath == &quot;&quot; { keyPath = &quot;some&#47;default&#47;path&quot; }&quot;</code> - the <a href=\"https://github.com/kelseyhightower/envconfig\" rel=\"nofollow noreferrer\">github.com/kelseyhightower/envconfig</a> library can help with this."}], "answers": [{"tags": [], "owner": {"reputation": 2911, "user_id": 702065, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae529fa78546d54e42c26bd3713946a2?s=128&d=identicon&r=PG", "display_name": "Johan Wikstr&#246;m", "link": "https://stackoverflow.com/users/702065/johan-wikstr%c3%b6m"}, "is_accepted": false, "score": 0, "last_activity_date": 1439475726, "creation_date": 1439475726, "answer_id": 31990907, "question_id": 31990342, "link": "https://stackoverflow.com/questions/31990342/unable-to-use-the-same-relative-path-in-my-program-and-my-unit-tests/31990907#31990907", "title": "Unable to use the same relative path in my program AND my unit tests", "body": "<p>The <code>go test ./...</code> command changes the current directory to <code>go/src/github.com/myaccount/myrepo/infrastructure</code> before running the tests in that directory. So all relative paths in the tests are relative to the <code>infrastructure</code> directory.</p>\n\n<p>A simple, robust way to allow testing would be to change the signature of your function.</p>\n\n<pre><code>func openKey(relPath string) ([]byte, error) {\n    if path, err := filepath.Abs(relPath); err != nil {\n        return nil, err\n    } \n\n    return ioutil.ReadFile(path)\n}\n</code></pre>\n\n<p>This gives you freedom to place key.rsa anywhere during testing, you can for example make a copy of it and store it in <code>infrastructure</code></p>\n\n<p>An even more elegant and robust way would be to use <code>io.Reader</code></p>\n\n<pre><code>func openKey(keyFile io.Reader) ([]byte, error) {\n    return ioutil.ReadAll(keyFile)\n}\n</code></pre>\n\n<p>since you can pass it a <code>strings.Reader</code> for testing. This means that you can test your code without having to rely on the filesystem at all. But that's probably overkill in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 4829, "user_id": 2754218, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6e87368666dbd25ad4288859d10fda55?s=128&d=identicon&r=PG", "display_name": "Jean Lebrument", "link": "https://stackoverflow.com/users/2754218/jean-lebrument"}, "edited": false, "score": 0, "creation_date": 1439536217, "post_id": 31991036, "comment_id": 51911221, "body": "Thanks for your help! I didn&#39;t know the 12factors manofesto, that&#39;s really a good article. After further researches I found another interesting article: <a href=\"http://peter.bourgon.org/go-in-production/\" rel=\"nofollow noreferrer\">peter.bourgon.org/go-in-production</a>"}], "tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": true, "score": 3, "last_activity_date": 1439476028, "creation_date": 1439476028, "answer_id": 31991036, "question_id": 31990342, "link": "https://stackoverflow.com/questions/31990342/unable-to-use-the-same-relative-path-in-my-program-and-my-unit-tests/31991036#31991036", "title": "Unable to use the same relative path in my program AND my unit tests", "body": "<p>First, you shouldn't use the same files when running your tests than when running your application in production. Because the test files are accessible to everyone that has access to the repository, which is a security fail.</p>\n\n<p>As said in the comments, the problem is that when running your tests, the working directory is these of the source code (in fact, go copy the whole bunch into a temp directory prior to running the tests), while when you run the program for real, the working directory is the one you are running the command from, hence the wrong relative path.</p>\n\n<p>What I would advise is to use a configuration option to get a the file from which load your file (or a base directory to use with your paths). Either using an environment variable (I strongly encourage you to do that, see the <a href=\"http://12factor.net/\" rel=\"nofollow\">12factors manofesto</a> for details), a configuration file, a command-line flag, etc.</p>\n"}], "owner": {"reputation": 4829, "user_id": 2754218, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6e87368666dbd25ad4288859d10fda55?s=128&d=identicon&r=PG", "display_name": "Jean Lebrument", "link": "https://stackoverflow.com/users/2754218/jean-lebrument"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 2, "accepted_answer_id": 31991036, "answer_count": 2, "score": 3, "last_activity_date": 1439476028, "creation_date": 1439474375, "last_edit_date": 1439475307, "question_id": 31990342, "link": "https://stackoverflow.com/questions/31990342/unable-to-use-the-same-relative-path-in-my-program-and-my-unit-tests", "title": "Unable to use the same relative path in my program AND my unit tests", "body": "<p>In my Go Project I use a function that opens a specific file and returns its content. The file is stored in another directory but still inside my project directory.</p>\n\n<pre><code>package infrastructure\n\nfunc openKey() ([]byte, error) {\n    if path, err := filepath.Abs(\"../security/key.rsa\"); err != nil {\n        return nil, err\n    } \n\n    return ioutil.ReadFile(path)\n}\n</code></pre>\n\n<p>This function works if I call it from a unit test. But if I call the same function in my program, I've this error: </p>\n\n<blockquote>\n  <p>2015/08/13 15:47:54 open\n  /me/go/src/github.com/myaccount/security/key.rsa: no such file\n  or directory</p>\n</blockquote>\n\n<p>The correct absolute path of the file is: </p>\n\n<blockquote>\n  <p>/me/go/src/github.com/myaccount/<strong>myrepo</strong>/security/key.rsa</p>\n</blockquote>\n\n<p>Both code that use the <code>openKey</code> function (from my program and unit test) are in the same package: <code>infrastructure</code></p>\n\n<p>Here is how I execute my program: </p>\n\n<blockquote>\n  <p>go install &amp;&amp; ../../../../bin/myproject</p>\n</blockquote>\n\n<p>And how I execute my unit tests: </p>\n\n<blockquote>\n  <p>go test ./... </p>\n</blockquote>\n\n<p>And finally the directory structure of my project:</p>\n\n<pre><code>go/src/github.com/myaccount/myrepo/: \n- main.go\n- security:\n    - key.rsa // The file that I want to open\n    - ...\n- infrastructure\n    - openFile.go // The file with the func `openKey``\n    - server.go // The file with the func that call the func `openKey`\n    - openFile_test.go // The unit test that calls the func `openKey`\n</code></pre>\n\n<p><strong>Edit:</strong> </p>\n\n<p>Here are the absolute paths of where the binary of my program is located: </p>\n\n<blockquote>\n  <p>/Users/me/Documents/De\u0301veloppement/Jean/go/bin</p>\n</blockquote>\n\n<p>And where my unit tests are located: </p>\n\n<blockquote>\n  <p>/var/folders/tj/8ywtc7pj3rs_j0y6zzldwh5h0000gn/T/go-build221890578/github.com/myaccount/myrepo/infrastructure/_test</p>\n</blockquote>\n\n<p>Any suggestion?<br>\nThanks!</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439472897, "post_id": 31989677, "comment_id": 51883955, "body": "Thanks for this. I&#39;ve asked a similar question recently and should have realised it applies to this too."}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 9, "creation_date": 1439473721, "post_id": 31989677, "comment_id": 51884588, "body": "It&#39;s worth noting that <code>c.Email</code> will also be <code>nil</code> if the JSON file has <code>&quot;email&quot;: null</code>. <a href=\"http://play.golang.org/p/zOG3qAd0jP\" rel=\"nofollow noreferrer\">play.golang.org/p/zOG3qAd0jP</a>"}, {"owner": {"reputation": 33451, "user_id": 3011380, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/oN76M.jpg?s=128&g=1", "display_name": "zangw", "link": "https://stackoverflow.com/users/3011380/zangw"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1522814353, "post_id": 31989677, "comment_id": 86292576, "body": "@Ainar-G, maybe you could find another answer from this <a href=\"https://stackoverflow.com/questions/36601367/golang-json-field-set-to-null-vs-field-not-there\" title=\"golang json field set to null vs field not there\">stackoverflow.com/questions/36601367/&hellip;</a>"}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 18, "last_activity_date": 1522814837, "last_edit_date": 1522814837, "creation_date": 1439472576, "answer_id": 31989677, "question_id": 31989595, "link": "https://stackoverflow.com/questions/31989595/detect-if-json-file-has-field/31989677#31989677", "title": "Detect if JSON file has field", "body": "<p>Change <code>Config</code> to</p>\n\n<pre><code>type Config struct {\n  Site   Site\n  Email  *Email\n}\n</code></pre>\n\n<p>Use <code>c.Email != nil</code> to test if email is specified as a string value in the JSON file.  If <code>c.Email == nil</code>, then email is not specified or <code>null</code>.</p>\n\n<p><a href=\"http://play.golang.org/p/xi43WEe4dp\" rel=\"noreferrer\">playground example</a></p>\n"}], "owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8541, "favorite_count": 1, "accepted_answer_id": 31989677, "answer_count": 1, "score": 5, "last_activity_date": 1522814837, "creation_date": 1439472357, "question_id": 31989595, "link": "https://stackoverflow.com/questions/31989595/detect-if-json-file-has-field", "title": "Detect if JSON file has field", "body": "<p>My app reads settings from a config file:</p>\n\n<pre><code>file, _ := os.Open(\"config.json\")\nconfig := config.Config{}\nerr := json.NewDecoder(file).Decode(&amp;config)\nif err != nil {\n    //handle err\n}\n</code></pre>\n\n<p>My JSON config file looks something like this:</p>\n\n<pre><code>{\n    \"site\" : {\n        \"url\" : \"https://example.com\"\n    },\n    \"email\" : {\n        \"key\" : \"abcde\"\n    }\n}\n</code></pre>\n\n<p>My structs are:</p>\n\n<pre><code>type Site struct {\n    Url  string\n}\n\ntype Email struct {\n    Key  string\n}\n\ntype Config struct {\n    Site   Site\n    Email  Email\n}\n</code></pre>\n\n<p>I would like the option of removing the <code>email</code> field from the JSON file to indicate that no email account will be used so:</p>\n\n<pre><code>{\n    \"site\" : {\n        \"url\" : \"https://example.com\"\n    }\n}\n</code></pre>\n\n<p>How do I detect if a specific field exists in the JSON file in Go so something on the lines of:</p>\n\n<pre><code>if (Email field found in JSON file) {\n    output \"You want to receive emails\"\n} else {\n    output \"No emails for you!\"\n}\n</code></pre>\n"}, {"tags": ["go", "keyword", "identifier"], "answers": [{"comments": [{"owner": {"reputation": 2084, "user_id": 1093710, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c2c2a8067de0b33d2733bc4225568af?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1093710/sridhar"}, "edited": false, "score": 0, "creation_date": 1439468029, "post_id": 31987867, "comment_id": 51880259, "body": "This may be. But  &quot;Package builtin provides documentation for Go&#39;s predeclared identifiers. The items documented here are not actually in package builtin but their descriptions here allow godoc to present documentation for the language&#39;s special identifiers.&quot;"}, {"owner": {"reputation": 2084, "user_id": 1093710, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c2c2a8067de0b33d2733bc4225568af?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1093710/sridhar"}, "edited": false, "score": 0, "creation_date": 1439468185, "post_id": 31987867, "comment_id": 51880365, "body": "Perhaps the question should be re-titled &quot;Why are Go&#39;s predeclared identifiers not reserved?&quot;."}, {"owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "reply_to_user": {"reputation": 2084, "user_id": 1093710, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c2c2a8067de0b33d2733bc4225568af?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1093710/sridhar"}, "edited": false, "score": 0, "creation_date": 1439468322, "post_id": 31987867, "comment_id": 51880473, "body": "The point is that identifier can be redefined by shadowing. I never tried it, but I&#39;m confident you cannot define a <code>func len</code> but that you can define a <code>var len</code>."}, {"owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "reply_to_user": {"reputation": 2084, "user_id": 1093710, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c2c2a8067de0b33d2733bc4225568af?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1093710/sridhar"}, "edited": false, "score": 0, "creation_date": 1439468394, "post_id": 31987867, "comment_id": 51880521, "body": "I was wrong, turns out that you actually <i>can</i> define a <code>func len</code>. See <a href=\"http://play.golang.org/p/-gqQVDkvXY\" rel=\"nofollow noreferrer\">play.golang.org/p/-gqQVDkvXY</a>"}, {"owner": {"reputation": 2084, "user_id": 1093710, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c2c2a8067de0b33d2733bc4225568af?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1093710/sridhar"}, "edited": false, "score": 0, "creation_date": 1439468815, "post_id": 31987867, "comment_id": 51880793, "body": "I initially thought maybe you&#39;re able to do that because your len() has no arguments. But can also shadow len(s []byte). See <a href=\"http://play.golang.org/p/CZztd0g6s7\" rel=\"nofollow noreferrer\">play.golang.org/p/CZztd0g6s7</a>"}, {"owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "reply_to_user": {"reputation": 2084, "user_id": 1093710, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c2c2a8067de0b33d2733bc4225568af?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1093710/sridhar"}, "edited": false, "score": 0, "creation_date": 1439469106, "post_id": 31987867, "comment_id": 51881009, "body": "There is no overloading in Go, so my method effectively override the builtin <code>len</code> method. See <a href=\"http://play.golang.org/p/X_7YBw4nw1\" rel=\"nofollow noreferrer\">play.golang.org/p/X_7YBw4nw1</a>"}, {"owner": {"reputation": 2084, "user_id": 1093710, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c2c2a8067de0b33d2733bc4225568af?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1093710/sridhar"}, "edited": false, "score": 0, "creation_date": 1439469308, "post_id": 31987867, "comment_id": 51881150, "body": "Sorry don&#39;t get it - what&#39;s that supposed to exhibit. It doesn&#39;t run."}, {"owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "reply_to_user": {"reputation": 2084, "user_id": 1093710, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c2c2a8067de0b33d2733bc4225568af?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1093710/sridhar"}, "edited": false, "score": 0, "creation_date": 1439469440, "post_id": 31987867, "comment_id": 51881249, "body": "That&#39;s the point: when you define a function named <code>len</code>, the builtin function isn&#39;t accessible anymore. As a generality, I won&#39;t use any predefined name in my code, excepted <code>new</code> which builtin I never used."}, {"owner": {"reputation": 2084, "user_id": 1093710, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c2c2a8067de0b33d2733bc4225568af?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1093710/sridhar"}, "edited": false, "score": 0, "creation_date": 1439469512, "post_id": 31987867, "comment_id": 51881292, "body": "Ok I get it. Good one."}], "tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": true, "score": 4, "last_activity_date": 1439467842, "creation_date": 1439467842, "answer_id": 31987867, "question_id": 31987772, "link": "https://stackoverflow.com/questions/31987772/why-are-new-and-make-not-reserved-keywords/31987867#31987867", "title": "Why are &#39;new&#39; and &#39;make&#39; not reserved keywords?", "body": "<p>That's because <code>new</code> and <code>make</code> aren't really keywords, but built-in functions.</p>\n\n<p>If you examine the <a href=\"https://golang.org/ref/spec#Keywords\" rel=\"nofollow\">full list of the reserved keywords</a>, you won't see <code>len</code> or <code>cap</code> either...</p>\n"}, {"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 2, "last_activity_date": 1594811422, "last_edit_date": 1594811422, "creation_date": 1439477224, "answer_id": 31991552, "question_id": 31987772, "link": "https://stackoverflow.com/questions/31987772/why-are-new-and-make-not-reserved-keywords/31991552#31991552", "title": "Why are &#39;new&#39; and &#39;make&#39; not reserved keywords?", "body": "<p>In short: because <strong>using <a href=\"https://golang.org/ref/spec#Predeclared_identifiers\" rel=\"nofollow noreferrer\">predeclared identifiers</a> in your own declarations don't make your code <em>ambiguous</em>.</strong></p>\n<hr />\n<p><code>new</code> and <code>make</code> are builtin functions, amongst many others. See the full list in the doc of the <a href=\"https://golang.org/pkg/builtin/\" rel=\"nofollow noreferrer\"><code>builtin</code></a> package.</p>\n<p><a href=\"https://golang.org/ref/spec#Keywords\" rel=\"nofollow noreferrer\">Keywords</a> are a carefully chosen small set of reserved words. You cannot use keywords as identifiers because that could make interpreting your source <em>ambiguous</em>.</p>\n<p>Builtin functions are special functions: you can use them without any imports, and they may have varying parameter and return list. You are allowed to declare functions or variables with the names of the builtin functions because your code <em>will still remain unambiguous</em>: your identifier in scope will &quot;win&quot;.</p>\n<p>If you would use a keyword as an identifier, you couldn't reach your entity because an attempt to refer to it by its name would always mean the <em>keyword</em> and not your identifier.</p>\n<p>See this dirty example of using the predeclared identifiers of the builtin function <code>make</code> and the builtin type <code>int</code> (not recommended for production code)  (try it on the <a href=\"http://play.golang.org/p/cZGSMkr70X\" rel=\"nofollow noreferrer\">Go Playground</a>):</p>\n<pre><code>make := func() string {\n    return &quot;hijacked&quot;\n}\n\nint := make()    // Completely OK, variable 'int' will be a string\nfmt.Println(int) // Prints &quot;hijacked&quot;\n</code></pre>\n<p>If you could use keywords as identifiers, even interpreting declarations would cause headache to the compiler: what would the following mean?</p>\n<ul>\n<li><code>func()</code> - is it calling your function named <code>func</code> or is it a function <em>type</em> with no params and no return types?</li>\n<li><code>import()</code> - is it a grouped import declaration (and importing nothing) or calling our function named <code>import</code>?</li>\n<li>...</li>\n</ul>\n"}], "owner": {"reputation": 2084, "user_id": 1093710, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c2c2a8067de0b33d2733bc4225568af?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1093710/sridhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 31987867, "answer_count": 2, "score": 1, "last_activity_date": 1594811422, "creation_date": 1439467580, "last_edit_date": 1495542610, "question_id": 31987772, "link": "https://stackoverflow.com/questions/31987772/why-are-new-and-make-not-reserved-keywords", "title": "Why are &#39;new&#39; and &#39;make&#39; not reserved keywords?", "body": "<p>With syntax highlighting enabled, it's distracting while reading code like <a href=\"https://stackoverflow.com/questions/12990338/cannot-convert-string-to-interface\">answer to this question</a> with new used as a variable name. </p>\n\n<p>I'm trying to think of a reason why only a subset of keywords would be reserved and can't come up with a good one.</p>\n\n<p>Edit: Alternate title for this question:</p>\n\n<p>Why are Go's predeclared identifiers not reserved ?</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439468156, "post_id": 31987955, "comment_id": 51880344, "body": "Why _ and why do you wrap it like (*SimpleDiscoveredInfo)(nil) ?"}, {"owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "reply_to_user": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439468260, "post_id": 31987955, "comment_id": 51880425, "body": "When implementating an interface, doing <code>var _ interfaceName = (*structName)(nil)</code> verifies that your type implements the interface without allocating more space."}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 1, "creation_date": 1439468314, "post_id": 31987955, "comment_id": 51880465, "body": "Thanks for the reply, I&#39;m in bed now if it works in the morning I&#39;ll check this as answer!"}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439526606, "post_id": 31987955, "comment_id": 51907514, "body": "hey I posted a similar question here: <a href=\"http://stackoverflow.com/q/32002070/2128168\">stackoverflow.com/q/32002070/2128168</a> if you&#39;re able to help there as well! :) thanks again"}], "tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": true, "score": 3, "last_activity_date": 1439468361, "last_edit_date": 1439468361, "creation_date": 1439468067, "answer_id": 31987955, "question_id": 31987769, "link": "https://stackoverflow.com/questions/31987769/interface-struct-does-not-implement-x-wrong-type-or-method-not-sure-why-i-am/31987955#31987955", "title": "Interface/Struct &quot;Does not implement X, Wrong type or Method, not sure why I am getting this error", "body": "<p><code>SimpleDiscoveredInfo</code> doesn't implement the interface's methods, you need something like this:</p>\n\n<pre><code>func (sdi *SimpleDiscoveredInfo) OpEndpoint() string { return sdi.opEndpoint }\nfunc (sdi *SimpleDiscoveredInfo) OpLocalID() string  { return sdi.opLocalID }\nfunc (sdi *SimpleDiscoveredInfo) ClaimedID() string  { return sdi.claimedID }\n\nvar _ openid.DiscoveredInfo = (*SimpleDiscoveredInfo)(nil)\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/qVTTKfhNHu\" rel=\"nofollow\">http://play.golang.org/p/qVTTKfhNHu</a></p>\n\n<p>For </p>\n\n<pre><code>controllers/register/register.go:78: cannot use discoveryCache (type *SimpleDiscoveryCache) as type openid.DiscoveryCache in argument to openid.Verify:\n    *SimpleDiscoveryCache does not implement openid.DiscoveryCache (wrong type for Put method)\n        have Put(string, DiscoveredInfo)\n        want Put(string, openid.DiscoveredInfo)\n</code></pre>\n\n<p>Your types need to return <code>openid.DiscoveredInfo</code> not <code>DiscoveredInfo</code>.</p>\n"}], "owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1992, "favorite_count": 0, "accepted_answer_id": 31987955, "answer_count": 1, "score": 2, "last_activity_date": 1439468361, "creation_date": 1439467572, "question_id": 31987769, "link": "https://stackoverflow.com/questions/31987769/interface-struct-does-not-implement-x-wrong-type-or-method-not-sure-why-i-am", "title": "Interface/Struct &quot;Does not implement X, Wrong type or Method, not sure why I am getting this error", "body": "<p>Hi guys fairly new to Golang, I understand that interfaces are kind of like contracts that guarantee that certain things will operate a certain way, thats cool and all, and if I make a local copy of it I can basically re-write how it operates (From what I understand, please correct me if I'm wrong)</p>\n\n<p>Here is what I have so far</p>\n\n<pre><code>package register\n\nimport (\n    \"log\"\n    \"net/http\"\n\n\n    \"github.com/yohcop/openid-go\"\n)\n\nvar nonceStore = &amp;openid.SimpleNonceStore{\n    Store: make(map[string][]*openid.Nonce)}\nvar discoveryCache = &amp;SimpleDiscoveryCache{}\n\ntype DiscoveredInfo interface {\n    OpEndpoint() string\n    OPLocalID() string\n    ClaimedID() string\n}\n\ntype SimpleDiscoveredInfo struct {\n    opEndpoint, opLocalID, claimedID string\n}\n\ntype SimpleDiscoveryCache map[string]DiscoveredInfo\n\nfunc (s *SimpleDiscoveryCache) Put(id string, info DiscoveredInfo) {\n    db := common.ConnectDB()\n\n    rows, err := db.Query(\"INSERT INTO discovery_cache SET id=?, opendpoint=?, oplocalid=?, claimedid=?\",\n        id, info.OpEndpoint(), info.OPLocalID(), info.ClaimedID())\n\n    if err != nil {\n        panic(\"Error: \" + err.Error())\n    }\n\n    log.Println(rows)\n}\n\nfunc (s *SimpleDiscoveryCache) Get(id string) DiscoveredInfo {\n    db := common.ConnectDB()\n\n    rows, err := db.Query(\"SELECT FROM discovery_cache WHERE id=?\", id)\n    if err != nil {\n        panic(\"Error: \" + err.Error())\n    }\n\n    log.Println(rows)\n\n    var opEndpoint, opLocalID, claimedID string\n\n    for rows.Next() {\n        err := rows.Scan(&amp;opEndpoint, &amp;opLocalID, &amp;claimedID)\n        if err != nil {\n            panic(\"Help!\")\n        }\n    }\n\n    return &amp;SimpleDiscoveredInfo{\n        opEndpoint, opLocalID, claimedID,\n    }\n\n}\n\nfunc DiscoverHandler(w http.ResponseWriter, r *http.Request) {\n    url, err := openid.RedirectURL(\"http://steamcommunity.com/openid\", \"http://localhost:1337/login/return\", \"http://localhost\")\n\n    if err != nil {\n        http.Error(w, \"Failed to login\", 500)\n    }\n\n    http.Redirect(w, r, url, 303)\n}\n\nfunc CallbackHandler(w http.ResponseWriter, r *http.Request) {\n\n    fullUrl := \"http://localhost:1337\" + r.URL.String()\n    id, err := openid.Verify(fullUrl, discoveryCache, nonceStore)\n    if err != nil {\n        http.Error(w, \"Failed\", 500)\n    }\n    log.Println(id)\n\n}\n</code></pre>\n\n<p>Basically I am trying to make my own <code>DiscoveryCache</code> so that it uses a database instead of memory for storage (as instructed to do by the Go-OpenID package located here: <a href=\"https://github.com/yohcop/openid-go\" rel=\"nofollow\">https://github.com/yohcop/openid-go</a></p>\n\n<p>The part I'm trying to recreate is located here: <a href=\"https://github.com/yohcop/openid-go/blob/master/discovery_cache.go\" rel=\"nofollow\">https://github.com/yohcop/openid-go/blob/master/discovery_cache.go</a></p>\n\n<p>Now I have done (what I assume) everything that should need doing to make this work, but I keep getting this error:</p>\n\n<pre><code>controllers/register/register.go:60: cannot use SimpleDiscoveredInfo literal (type *SimpleDiscoveredInfo) as type openid.DiscoveredInfo in return argument:\n    *SimpleDiscoveredInfo does not implement openid.DiscoveredInfo (missing ClaimedID method)\ncontrollers/register/register.go:78: cannot use discoveryCache (type *SimpleDiscoveryCache) as type openid.DiscoveryCache in argument to openid.Verify:\n    *SimpleDiscoveryCache does not implement openid.DiscoveryCache (wrong type for Put method)\n        have Put(string, DiscoveredInfo)\n        want Put(string, openid.DiscoveredInfo)\n</code></pre>\n\n<p>If anybody could inform me on what I have done wrong that would be much appreciated. Thanks! If you need any more information please let me know.</p>\n"}, {"tags": ["json", "go"], "answers": [{"tags": [], "owner": {"reputation": 2084, "user_id": 1093710, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c2c2a8067de0b33d2733bc4225568af?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1093710/sridhar"}, "is_accepted": true, "score": 2, "last_activity_date": 1439465736, "creation_date": 1439465736, "answer_id": 31987081, "question_id": 31987018, "link": "https://stackoverflow.com/questions/31987018/having-trouble-decoding-json-response/31987081#31987081", "title": "Having trouble decoding JSON response", "body": "<p>Field names need to begin with upper case character to be exported identifiers.</p>\n"}], "owner": {"reputation": 391, "user_id": 763298, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zf7rs.jpg?s=128&g=1", "display_name": "xhermit", "link": "https://stackoverflow.com/users/763298/xhermit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1439466704, "accepted_answer_id": 31987081, "answer_count": 1, "score": -1, "last_activity_date": 1439465736, "creation_date": 1439465562, "question_id": 31987018, "link": "https://stackoverflow.com/questions/31987018/having-trouble-decoding-json-response", "closed_reason": "Duplicate", "title": "Having trouble decoding JSON response", "body": "<p>This is my first attempt at Go and I feel I'm missing something important here. Trying to decode a JSON message from a webservice but the output I'm getting is:</p>\n\n<p>{response:{requests:[]}}</p>\n\n<p>All I'm really interested in is the data within the request node. My for-loop obviously isn't getting called because the array is empty. I feel like my structs need to be declared exactly as they appear in the webservice?</p>\n\n<p>Sample JSON:</p>\n\n<pre><code>{\n\"response\": {\n\"requests\": [\n{\n\"request\": {}\n},\n{\n\"request\": {\n  \"id\": 589748,\n  \"image_thumbnail\": \"\",\n  \"description\": \"Blah blah\",\n  \"status\": \"received\",\n  \"user\": \"test\"\n }\n}\n],\n\"count\": \"50\",\n\"benchmark\": 0.95516896247864,\n\"status\": {},\n\"debug\": {}\n}\n}\n\n\ntype Request struct {\n    id           int         `json:\"id\"`\n    description  string      `json:\"description\"`\n    user         string      `json:\"user\"`\n}\n\ntype Requests struct {\n    request      Request     `json:\"request\"`\n}\n\ntype Response struct {\n    requests     []Requests  `json:\"requests\"`\n }\n\n type RootObject struct {\n    response     Response    `json:\"response\"`  \n}\n\nurl := \"&lt;webservice&gt;\"\n\nreq, err := http.NewRequest(\"GET\", url, nil)\nreq.Header.Set(\"Content-Type\", \"application/json\")\n\nclient := &amp;http.Client{}\nresp, err := client.Do(req)\nif err != nil {\n    panic(err)\n}\n\ndefer resp.Body.Close()\n\nvar r RootObject\n\ndecoder := json.NewDecoder(resp.Body)\ndecoder.Decode(&amp;r)\n\n\nfmt.Printf(\"%+v\", r)\n\nfor _, req := range r.response.requests {\n    fmt.Printf(\"%d = %s\\n\", req.request.id, req.request.user)\n\n}\n</code></pre>\n"}, {"tags": ["go", "concurrency", "closures", "goroutine"], "comments": [{"owner": {"reputation": 123, "user_id": 3909412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c836ad23b71612e9cf538e2cb5b3406?s=128&d=identicon&r=PG&f=1", "display_name": "hkx_1030", "link": "https://stackoverflow.com/users/3909412/hkx-1030"}, "edited": false, "score": 0, "creation_date": 1439455638, "post_id": 31983275, "comment_id": 51872226, "body": "a channel as a param for the anonymous function can fix this, but any other solutions?"}, {"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1439456621, "post_id": 31983275, "comment_id": 51872850, "body": "This code is likely not thread safe. Why do you need to start a new goroutine here?"}, {"owner": {"reputation": 123, "user_id": 3909412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c836ad23b71612e9cf538e2cb5b3406?s=128&d=identicon&r=PG&f=1", "display_name": "hkx_1030", "link": "https://stackoverflow.com/users/3909412/hkx-1030"}, "reply_to_user": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1439456924, "post_id": 31983275, "comment_id": 51873014, "body": "to handle request in new coroutine, however, you are right, there&#39;s no need   to start a new goroutine"}, {"owner": {"reputation": 123, "user_id": 3909412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c836ad23b71612e9cf538e2cb5b3406?s=128&d=identicon&r=PG&f=1", "display_name": "hkx_1030", "link": "https://stackoverflow.com/users/3909412/hkx-1030"}, "reply_to_user": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1439457026, "post_id": 31983275, "comment_id": 51873076, "body": "but still, is there a way to change external variable&#39;s value inside a closure"}], "answers": [{"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 2, "last_activity_date": 1439458622, "last_edit_date": 1439458622, "creation_date": 1439457547, "answer_id": 31984202, "question_id": 31983275, "link": "https://stackoverflow.com/questions/31983275/how-to-change-external-variables-value-inside-a-goroutine-closure/31984202#31984202", "title": "How to change external variable&#39;s value inside a goroutine closure", "body": "<p>You have no guarantee to observe changes made to the value of a variable in another goroutine <em>without synchronization</em>. See <a href=\"https://golang.org/ref/mem\" rel=\"nofollow\">The Go Memory Model</a> for details.</p>\n\n<p>So if you want to change <code>ctx.Response.Status</code> in another goroutine, for this change to be guaranteed to be visible in the caller goroutine use synchronization.</p>\n\n<p>There are multiple synchronization primitives. You can use channels or the <a href=\"http://golang.org/pkg/sync/\" rel=\"nofollow\"><code>sync</code></a> package.</p>\n\n<h3>Using channels:</h3>\n\n<pre><code>ch := make(chan int)\n\ngo func() {\n    err = l.Save(file) \n    if err != nil {\n        ctx.Response.Status = 500\n        ctx.Response.Body = err\n    } else {\n        ctx.Response.Status = 204\n    }\n    ch &lt;- 0 // Signal that ctx is updated\n    // goroutine may do other works (not related to changing ctx)\n}()\n\n&lt;- ch // Wait for the goroutine to finish updating ctx\n</code></pre>\n\n<h3>Using <a href=\"http://golang.org/pkg/sync/#WaitGroup\" rel=\"nofollow\"><code>sync.WaitGroup</code></a>:</h3>\n\n<pre><code>var wg sync.WaitGroup\nwg.Add(1)\n\ngo func() {\n    err = l.Save(file) \n    if err != nil {\n        ctx.Response.Status = 500\n        ctx.Response.Body = err\n    } else {\n        ctx.Response.Status = 204\n    }\n    wg.Done() // Signal that ctx is updated\n    // goroutine may do other works (not related to changing ctx)\n}()\n\nwg.Wait() // Wait for the goroutine to finish updating ctx\n</code></pre>\n\n<h3>Using <a href=\"http://golang.org/pkg/sync/#Mutex\" rel=\"nofollow\"><code>sync.Mutex</code></a>:</h3>\n\n<pre><code>m := sync.Mutex{}\nm.Lock()\n\ngo func() {\n    err = l.Save(file) \n    if err != nil {\n        ctx.Response.Status = 500\n        ctx.Response.Body = err\n    } else {\n        ctx.Response.Status = 204\n    }\n    m.Unlock() // Signal that ctx is updated\n    // goroutine may do other works (not related to changing ctx)\n}()\n\nm.Lock() // Wait for the goroutine to finish updating ctx\n</code></pre>\n\n<p><strong>Note:</strong></p>\n\n<p>It is good practice to signal the completion (ctx update in your case) using <code>defer</code> so that if the started goroutine would end in some unexpected way (e.g. runtime panic), the caller goroutine would not get blocked forever. Note that however in this case the completion signal will only be sent at the end of the anonymous function (that's when deferred functions are executed).</p>\n"}], "owner": {"reputation": 123, "user_id": 3909412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c836ad23b71612e9cf538e2cb5b3406?s=128&d=identicon&r=PG&f=1", "display_name": "hkx_1030", "link": "https://stackoverflow.com/users/3909412/hkx-1030"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2612, "favorite_count": 2, "accepted_answer_id": 31984202, "answer_count": 1, "score": 2, "last_activity_date": 1439458622, "creation_date": 1439454974, "last_edit_date": 1439458257, "question_id": 31983275, "link": "https://stackoverflow.com/questions/31983275/how-to-change-external-variables-value-inside-a-goroutine-closure", "title": "How to change external variable&#39;s value inside a goroutine closure", "body": "<pre><code>func (this *l) PostUpload(ctx *Context) {\n\n    //ctx.Response.Status = 500\n\n    l, err := models.NewL(this.Config)\n    go func() {\n        err = l.Save(file) \n        if err != nil {\n            ctx.Response.Status = 500\n            ctx.Response.Body = err\n        } else {\n            ctx.Response.Status = 204\n        }\n    }()\n}\n</code></pre>\n\n<p>How to change <code>ctx.Response.Status</code> value inside the goroutine closure?</p>\n"}, {"tags": ["struct", "go"], "comments": [{"owner": {"reputation": 1698, "user_id": 3778742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad62c6ebfd4440c951edde151cb76714?s=128&d=identicon&r=PG&f=1", "display_name": "alexsmn", "link": "https://stackoverflow.com/users/3778742/alexsmn"}, "edited": false, "score": 0, "creation_date": 1439449699, "post_id": 31981592, "comment_id": 51868722, "body": "you mean struct embedding?"}], "answers": [{"comments": [{"owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439450108, "post_id": 31981736, "comment_id": 51868946, "body": "NIce approach - this should work for me. Going to try it now."}, {"owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439450211, "post_id": 31981736, "comment_id": 51869010, "body": "Side question: The field <code>User</code> in the <code>RegistrationRequest</code> - does it &quot;assume&quot; the type is <code>User</code> as nothing is defined."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439450312, "post_id": 31981736, "comment_id": 51869062, "body": "@tommyd456 Please read what <a href=\"http://golang.org/ref/spec#Struct_types\" rel=\"nofollow noreferrer\">embedding</a> is. When embedding, only the <i>type</i> is provided, but not the <i>name</i>. So <code>User</code> <i>is</i> the type. And fields of <code>User</code> are <i>promoted</i> to the embedder struct. But you can refer to the embedded value by using the type name."}, {"owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439450372, "post_id": 31981736, "comment_id": 51869094, "body": "I do know what embedding is. I&#39;ve always provided both and it seems to work but I will read up on that too. I&#39;m sure I&#39;ve seen examples that use name and type."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439450417, "post_id": 31981736, "comment_id": 51869119, "body": "@tommyd456 When you provide both the <i>name</i> and the <i>type</i>, that is not embedding, that is just declaring a field. That may also be good for you."}, {"owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439450455, "post_id": 31981736, "comment_id": 51869142, "body": "Oh ok - perhaps I don&#39;t know what embedding is then ha ha"}, {"owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "edited": false, "score": 0, "creation_date": 1439450670, "post_id": 31981736, "comment_id": 51869271, "body": "Regarding your last edit - pointers are required as I need to distinguish between JSON objects that don&#39;t contain the field <code>username</code> (for example) and JSON objects that do contain the field <code>username</code> but with a value <code>&quot;&quot;</code> - see an older question of mine here: <a href=\"http://stackoverflow.com/questions/31504975/validate-struct-field-if-it-exists\" title=\"validate struct field if it exists\">stackoverflow.com/questions/31504975/&hellip;</a>"}, {"owner": {"reputation": 2917, "user_id": 940939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04fbc97c3735bb1e24b90e1aa336aae?s=128&d=identicon&r=PG", "display_name": "Massimo Zerbini", "link": "https://stackoverflow.com/users/940939/massimo-zerbini"}, "edited": false, "score": 0, "creation_date": 1517400671, "post_id": 31981736, "comment_id": 84078705, "body": "You can simply clone the User field with this statement       u := req.User without creating it before"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 2917, "user_id": 940939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04fbc97c3735bb1e24b90e1aa336aae?s=128&d=identicon&r=PG", "display_name": "Massimo Zerbini", "link": "https://stackoverflow.com/users/940939/massimo-zerbini"}, "edited": false, "score": 0, "creation_date": 1517403137, "post_id": 31981736, "comment_id": 84080212, "body": "@MaxZerbini Yes, you may do so. The question stated there are already 2 variables <code>req</code> and <code>u</code>, and I was trying to mimic that."}, {"owner": {"reputation": 9254, "user_id": 1203844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WRK6P.jpg?s=128&g=1", "display_name": "Aritra Chakraborty", "link": "https://stackoverflow.com/users/1203844/aritra-chakraborty"}, "edited": false, "score": 0, "creation_date": 1579005198, "post_id": 31981736, "comment_id": 105616424, "body": "if RegistrationRequest contains common field from user will it overwrite or throw an error?"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 9254, "user_id": 1203844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WRK6P.jpg?s=128&g=1", "display_name": "Aritra Chakraborty", "link": "https://stackoverflow.com/users/1203844/aritra-chakraborty"}, "edited": false, "score": 1, "creation_date": 1579005399, "post_id": 31981736, "comment_id": 105616539, "body": "@AritraChakraborty Then you will have 2 of that field. E.g. if <code>RegistrationRequest</code> would also have an <code>Email string</code> field, <code>req</code> would have to <code>Email</code> fields: one referred to as <code>req.Email</code>, and the other as <code>req.User.Email</code>."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 25, "last_activity_date": 1471849843, "last_edit_date": 1471849843, "creation_date": 1439449875, "answer_id": 31981736, "question_id": 31981592, "link": "https://stackoverflow.com/questions/31981592/assign-struct-with-another-struct/31981736#31981736", "title": "Assign struct with another struct", "body": "<p>Using simple <a href=\"http://golang.org/ref/spec#Assignments\" rel=\"noreferrer\">assignment</a> you can't because even though the fields of <code>User</code> are a subset of <code>RegistrationRequest</code>, they are completely 2 different types, and <a href=\"http://golang.org/ref/spec#Assignability\" rel=\"noreferrer\">Assignability</a> rules don't apply.</p>\n\n<p>You could write a function which uses reflection (<a href=\"http://golang.org/pkg/reflect/\" rel=\"noreferrer\"><code>reflect</code></a> package), and would copy all the fields from <code>req</code> to <code>u</code>, but that is just ugly (and inefficient).</p>\n\n<p>Best would be to refactor your types, and <code>RegistrationRequest</code> could <a href=\"http://golang.org/ref/spec#Struct_types\" rel=\"noreferrer\">embed</a> <code>User</code>.</p>\n\n<p>Doing so if you have a value of type <code>RegistrationRequest</code> that means you already also have a value of <code>User</code>:</p>\n\n<pre><code>type User struct {\n    Email    *string\n    Username *string\n    Password *string\n    Name     string\n}\n\ntype RegistrationRequest struct {\n    User  // Embedding User type\n    Email2 *string\n}\n\nfunc main() {\n    req := RegistrationRequest{}\n    s := \"as@as.com\"\n    req.Email = &amp;s\n\n    s2 := \"testuser\"\n    req.Username = &amp;s2\n\n    u := User{}\n    u = req.User\n    fmt.Println(*u.Username, *u.Email)\n}\n</code></pre>\n\n<p>Output: (try it on the <a href=\"http://play.golang.org/p/tL_fPDe0UK\" rel=\"noreferrer\">Go Playground</a>)</p>\n\n<pre><code>testuser as@as.com\n</code></pre>\n\n<p>Also please note that since your structs contain pointers, when copying a <code>struct</code>, pointer values will be copied and not pointed values. I'm not sure why you need pointers here, would be best to just declare all fields to be non-pointers.</p>\n\n<p>Also note that embedding is not really a requirement, it just makes your types and their usage more smooth. <code>User</code> could just as well be an \"ordinary\" field of <code>RequistrationRequest</code>, e.g.:</p>\n\n<pre><code>type RegistrationRequest struct {\n    Usr User // This is just an ordinary field, not embedding\n    Email2 *string\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2454, "user_id": 1586025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9233950674b793e7d3d77bb219baaa52?s=128&d=identicon&r=PG", "display_name": "Joe Atzberger", "link": "https://stackoverflow.com/users/1586025/joe-atzberger"}, "edited": false, "score": 0, "creation_date": 1580181361, "post_id": 48541554, "comment_id": 106004308, "body": "This is much closer to what the OP requested.  Given the other answer, it might be useful to know whether copier works the same with embedded structs!"}], "tags": [], "owner": {"reputation": 71, "user_id": 5962930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c16dbf4e1892f984b5799e29758a08d?s=128&d=identicon&r=PG&f=1", "display_name": "Prasanna Mahajan", "link": "https://stackoverflow.com/users/5962930/prasanna-mahajan"}, "is_accepted": false, "score": 3, "last_activity_date": 1517399692, "creation_date": 1517399692, "answer_id": 48541554, "question_id": 31981592, "link": "https://stackoverflow.com/questions/31981592/assign-struct-with-another-struct/48541554#48541554", "title": "Assign struct with another struct", "body": "<p>You can use \"<a href=\"https://github.com/jinzhu/copier\" rel=\"nofollow noreferrer\">github.com/jinzhu/copier</a>\" package to Copy between structs containing same field name. This package uses reflection to do this.</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"  \n    \"github.com/jinzhu/copier\"\n)\n\ntype RegistrationRequest struct {\n    Email    *string\n    Email2   *string\n    Username *string\n    Password *string\n    Name     string\n}\n\ntype User struct {\n    Email    *string\n    Username *string\n    Password *string\n    Name     string\n}\n\nfunc main() {\n    user := new(User)\n    req := new(RegistrationRequest)\n    user.Email, user.Password, user.Username = new(string), new(string), new(string)\n    user.Name = \"John Doe\"\n    *user.Email = \"a@b.com\"\n    *user.Password = \"1234\"\n    *user.Username = \"johndoe\"\n    fmt.Println(\"User :\",user.Name, *user.Email, *user.Username, *user.Password)\n    copier.Copy(req, user)\n    fmt.Println(\"RegistrationRequest :\",req.Name, *req.Email, *req.Username, *req.Password)\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code> User : John Doe a@b.com johndoe 1234\n RegistrationRequest : John Doe a@b.com johndoe 1234\n</code></pre>\n"}], "owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24212, "favorite_count": 4, "accepted_answer_id": 31981736, "answer_count": 2, "score": 19, "last_activity_date": 1517399692, "creation_date": 1439449404, "last_edit_date": 1439641784, "question_id": 31981592, "link": "https://stackoverflow.com/questions/31981592/assign-struct-with-another-struct", "title": "Assign struct with another struct", "body": "<p>I have a RegistrationRequest struct:</p>\n\n<pre><code>type RegistrationRequest struct {\n    Email    *string\n    Email2   *string        \n    Username *string\n    Password *string\n    Name     string\n}\n</code></pre>\n\n<p>Where <code>Email2</code> is the email value entered again to verify that what the user entered is correct.</p>\n\n<p>I also have a User struct:</p>\n\n<pre><code>type User struct {\n    Email    *string\n    Username *string\n    Password *string\n    Name     string           \n}\n</code></pre>\n\n<p>Of course, there is no need to store <code>Email2</code> beyond registration.</p>\n\n<p>So I have two variables: <code>req</code> and <code>u</code> - one for each struct. Is it possible to assign the <code>req</code> struct into to the <code>u</code> struct so that all the common fields will exist in the <code>u</code> struct?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 1698, "user_id": 3778742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad62c6ebfd4440c951edde151cb76714?s=128&d=identicon&r=PG&f=1", "display_name": "alexsmn", "link": "https://stackoverflow.com/users/3778742/alexsmn"}, "edited": false, "score": 1, "creation_date": 1439449357, "post_id": 31980860, "comment_id": 51868505, "body": "I would say to create a application level function, that can be accessed from anywhere, and in the application just  return <code>store.Get(r, &quot;loggedIn&quot;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439457562, "post_id": 31982974, "comment_id": 51873397, "body": "This is fantastic! Quick question thugh, why do you return &quot;Session&quot; as type <code>interface{}</code>? Fairly new to golang and don&#39;t quite understand <code>interface{}</code> is it just a generic thing?"}, {"owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "reply_to_user": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439459271, "post_id": 31982974, "comment_id": 51874522, "body": "<code>interface{}</code> is the standard go way of meaning <code>any type</code>. It has it up and down sides. The point here is that my session store is basically a map with  <code>strings</code> as keys and <code>interface{}</code> as value, so I can put a boolean for the logged state, a string for the username, etc. And the <code>Session</code> helper return just that."}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1439467669, "post_id": 31982974, "comment_id": 51880044, "body": "I asked another question over at: <a href=\"http://stackoverflow.com/questions/31987769/interface-struct-does-not-implement-x-wrong-type-or-method-not-sure-why-i-am\" title=\"interface struct does not implement x wrong type or method not sure why i am\">stackoverflow.com/questions/31987769/&hellip;</a> if you are able to help out with your awesome Go knowledge!"}], "tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": true, "score": 1, "last_activity_date": 1439453842, "creation_date": 1439453842, "answer_id": 31982974, "question_id": 31980860, "link": "https://stackoverflow.com/questions/31980860/how-can-i-set-template-variables-from-my-middleware-or-session-variable/31982974#31982974", "title": "How can I set template variables from my middleware or session variable?", "body": "<p>The thing I did for my personal website was to add a <code>Session</code> helper available in my templates, and in this helper retrieve the session of the current request then check and return the requested key.</p>\n\n<p>Something like that:</p>\n\n<pre><code>func render(w http.ResponseWriter, r *http.Request, name string, data interface{}) {\n    t, err := template.New(name).Funcs(template.FuncMap{\n        \"Session\": func(name string) interface{} {\n            return sessions.GetSession(r).Get(name)\n        },\n    }).ParseFiles(...)\n}\n</code></pre>\n\n<p>You can see the full version here: <a href=\"https://github.com/elwinar/elwinar/blob/master/app/render.go\" rel=\"nofollow\">app/render.go</a></p>\n"}], "owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 31982974, "answer_count": 1, "score": 1, "last_activity_date": 1439453842, "creation_date": 1439446902, "question_id": 31980860, "link": "https://stackoverflow.com/questions/31980860/how-can-i-set-template-variables-from-my-middleware-or-session-variable", "title": "How can I set template variables from my middleware or session variable?", "body": "<p>I'm curious as to how I would set a template variable from a piece of middleware I have, this is my middleware:</p>\n\n<pre><code>func IsUserLoggedIn(router http.Handler) http.Handler {\n        return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n                log.Println(\"Checking if user is logged in\")\n\n                session, err := store.Get(r, \"loggedIn\")\n                if err != nil {\n                        http.Error(w, err.Error(), 500)\n                        return\n                }\n\n                // Perform some If Statements and set True/False\n                // Set Session Variables\n                session.Values[\"isLoggedIn\"] = true\n\n                // Save Session\n                session.Save(r, w)\n\n                // Set Template Variable\n                router.ServeHTTP(w, r)\n        })\n}\n</code></pre>\n\n<p>Then in my template for my main layout:</p>\n\n<pre><code>{{ define \"layout\" }}\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta name=\"description\" content=\"\"&gt;\n    &lt;meta name=\"keywords\" content=\"\"&gt;\n    &lt;meta name=\"author\" content=\"\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"/static/css/main.css\"&gt;\n    &lt;title&gt; {{ .Title }} &lt;/title&gt;\n\n  &lt;/head&gt;\n  &lt;body&gt;\n\n    {{ SET SOMETHING HERE TO SAY YOU'RE LOGGED IN }}\n    {{ GET THE SESSION VARIABLE AND SET ACCORDINGLY }}\n\n    {{ template \"body\" .}}\n\n\n  &lt;/body&gt;\n\n&lt;/html&gt;\n\n\n{{ end }}\n</code></pre>\n\n<p>Basically how can I access a session variable inside my template?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1439445561, "post_id": 31979777, "comment_id": 51866538, "body": "The Go project has moved to Github, so try <code>go get golang.org&#47;x&#47;tools&#47;cmd&#47;vet</code>."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1439449328, "post_id": 31979777, "comment_id": 51868478, "body": "I&#39;d recommend working with Go a regular user then using <code>sudo</code> to install the binaries, to minimize how often a command can damage your system."}, {"owner": {"reputation": 2203, "user_id": 773079, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f494bf18ea8fc96190a398ecee6deedc?s=128&d=identicon&r=PG", "display_name": "Pensu", "link": "https://stackoverflow.com/users/773079/pensu"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1439452951, "post_id": 31979777, "comment_id": 51870590, "body": "@Ainar-G Tried that, it&#39;s the same error."}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1439456834, "post_id": 31979777, "comment_id": 51872964, "body": "What does <code>go version</code> output?"}, {"owner": {"reputation": 2203, "user_id": 773079, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f494bf18ea8fc96190a398ecee6deedc?s=128&d=identicon&r=PG", "display_name": "Pensu", "link": "https://stackoverflow.com/users/773079/pensu"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1439456968, "post_id": 31979777, "comment_id": 51873044, "body": "@Ainar-G It&#39;s 1.2.1, should I upgrade to 1.4.2?"}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1439461033, "post_id": 31979777, "comment_id": 51875646, "body": "@Pensu Yes. vet tool is usually built for the latest Go version. This might be the issue."}, {"owner": {"reputation": 2203, "user_id": 773079, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f494bf18ea8fc96190a398ecee6deedc?s=128&d=identicon&r=PG", "display_name": "Pensu", "link": "https://stackoverflow.com/users/773079/pensu"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1439462295, "post_id": 31979777, "comment_id": 51876471, "body": "@Ainar-G okay, let me try that and get back! Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 2203, "user_id": 773079, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f494bf18ea8fc96190a398ecee6deedc?s=128&d=identicon&r=PG", "display_name": "Pensu", "link": "https://stackoverflow.com/users/773079/pensu"}, "is_accepted": true, "score": 0, "last_activity_date": 1439530752, "creation_date": 1439530752, "answer_id": 32002983, "question_id": 31979777, "link": "https://stackoverflow.com/questions/31979777/error-linux-amd64-bytes-a-not-a-package-file/32002983#32002983", "title": "Error: /linux_amd64/bytes.a: not a package file", "body": "<p>Okay, so the problem was I was using go 1.2.1, I upgraded it to 1.4.2 and everything is working fine now. Thanks, @Ainar-G for pointing it out.</p>\n"}], "owner": {"reputation": 2203, "user_id": 773079, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f494bf18ea8fc96190a398ecee6deedc?s=128&d=identicon&r=PG", "display_name": "Pensu", "link": "https://stackoverflow.com/users/773079/pensu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 32002983, "answer_count": 1, "score": -1, "last_activity_date": 1439530752, "creation_date": 1439441811, "question_id": 31979777, "link": "https://stackoverflow.com/questions/31979777/error-linux-amd64-bytes-a-not-a-package-file", "title": "Error: /linux_amd64/bytes.a: not a package file", "body": "<p>I am trying to install 'vet' tool using go get, and I am getting this error:</p>\n\n<pre><code>root@ubuntu:~/docker# go get code.google.com/p/go.tools/cmd/vet\n# code.google.com/p/go.tools/cmd/vet\n../go/src/code.google.com/p/go.tools/cmd/vet/asmdecl.go:10: import /root/go/pkg/linux_amd64/bytes.a: not a package file\n</code></pre>\n\n<p>I tried to find the solution on internet, couldn't find anything helpful. Could you guys please help me figure out what could be causing this? TIA.</p>\n"}, {"tags": ["go", "cryptography", "dsa"], "comments": [{"owner": {"reputation": 32193, "user_id": 2908724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xBJR.png?s=128&g=1", "display_name": "bishop", "link": "https://stackoverflow.com/users/2908724/bishop"}, "edited": false, "score": 2, "creation_date": 1439428858, "post_id": 31977860, "comment_id": 51861964, "body": "You might benefit from the <a href=\"https://golang.org/pkg/crypto/x509/#ParsePKIXPublicKey\" rel=\"nofollow noreferrer\">x509 function <code>ParsePKIXPublicKey</code></a>, as seen in <a href=\"https://golang.org/src/crypto/x509/x509_test.go\" rel=\"nofollow noreferrer\">this example starting at line 46</a>."}, {"owner": {"reputation": 1668, "user_id": 311358, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b2b51e4cceb4a0c1609b81815001b69?s=128&d=identicon&r=PG", "display_name": "xrl", "link": "https://stackoverflow.com/users/311358/xrl"}, "reply_to_user": {"reputation": 32193, "user_id": 2908724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xBJR.png?s=128&g=1", "display_name": "bishop", "link": "https://stackoverflow.com/users/2908724/bishop"}, "edited": false, "score": 0, "creation_date": 1439500461, "post_id": 31977860, "comment_id": 51900605, "body": "Thanks for that tip. It helped me make some progress on the issue."}], "owner": {"reputation": 1668, "user_id": 311358, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b2b51e4cceb4a0c1609b81815001b69?s=128&d=identicon&r=PG", "display_name": "xrl", "link": "https://stackoverflow.com/users/311358/xrl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 380, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1439427769, "creation_date": 1439427769, "question_id": 31977860, "link": "https://stackoverflow.com/questions/31977860/how-to-load-dsa-publickey-using-go-stdlib", "title": "How to load DSA PublicKey using go stdlib", "body": "<p>I have a PEM encoded DSA public key. I need this DSA key so I can verify incoming data. But I have yet to figure out how to load the key using go crypto library (I am not a crypto expert but from what I'm reading online, DSA is not a popular choice anymore).</p>\n\n<p>I can decode the PEM in to its bytes. Which, from what I understand, are DER-encoded ASN.1. How can I put the PEM blocks in to a golang <code>dsa.PublicKey</code>?</p>\n\n<p>Here's a runnable sample: <a href=\"http://play.golang.org/p/8Ma2qwhT31\" rel=\"nofollow\">http://play.golang.org/p/8Ma2qwhT31</a></p>\n\n<p>The code:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"encoding/pem\"\nimport \"encoding/asn1\"\nimport \"crypto/dsa\"\n\nvar signingPubKey = []byte(`-----BEGIN PUBLIC KEY-----\nMIICIDANBgkqhkiG9w0BAQEFAAOCAg0AMIICCAKCAgEApSmU3y4DzPhjnpOrdpPs\ncIosWJ4zSV8h02b0abLW6nk7cnb5jSwBZKLrryAlF4vs+cF1mtMYjX0QKtEYq2V6\nWVDnoXj3BeLYVbhsHuvxYmwXmAkNsSnhMfSCxsck9y6zuNeH0ovzBD90nISIJw+c\nVAnUt0dzc7YKjBqThHRAvi8HoGZlzB7Ryb8ePSW+Mfr4jcH3Mio5T0OH3HTavN6Y\nzpnohzQo0blwtwEXZOwrNPjQNrSigdPDrtvM32+hLTIJ75Z2NbIRLBjNlwznu7dQ\nAsb/AiPTHXihxCRDm+dH70dps5JfT5Zg9LKsPhANk6fNK3e4wdN89ybQsBaswp9h\nxzORVD3UiG4LuqP4LMCadjoEazShEiiveeRBgyiFlIldybuPwSq/gUuFveV5Jnqt\ntxNG6DnJBlIeYhVlA25XDMjxnJ3w6mi/pZyn9ZR9+hFic7Nm1ra7hRUoigfD/lS3\n3AsDoRLy0xZqCWGRUbkhlo9VjDxo5znjv870Td1/+fp9QzSaESPfFAUBFcykDXIU\nf1nVeKAkmhkEC9/jGF+VpUsuRV3pjjrLMcuI3+IimfWhWK1C56JJakfT3WB6nwY3\nA92g4fyVGaWFKfj83tTNL2rzMkfraExPEP+VGesr8b/QMdBlZRR4WEYG3ObD2v/7\njgOS2Ol4gq8/QdNejP5J4wsCAQM=\n-----END PUBLIC KEY-----`)\n\nfunc main() {\n    block, _ := pem.Decode(signingPubKey)\n    if block == nil {\n        fmt.Errorf(\"expected block to be non-nil\", block)\n        return\n    }\n\n    var pubkey dsa.PublicKey\n\n    _,err := asn1.Unmarshal(block.Bytes, &amp;pubkey)\n    if (err != nil ){\n        fmt.Errorf(\"could not unmarshall data: `%s`\", err)\n    }\n\n    fmt.Printf(\"public key param P: %d\\n\", pubkey.Parameters.P)\n    fmt.Printf(\"public key param Q: %d\\n\", pubkey.Parameters.Q)\n    fmt.Printf(\"public key param G: %d\\n\", pubkey.Parameters.G)\n    fmt.Printf(\"public key Y: %d\\n\", pubkey.Y)\n\n    fmt.Printf(\"done\")\n}\n</code></pre>\n\n<p>Which outputs nil for all values, so obviously the Unmarshal call isn't doing what I want (or something is wrong earlier in the pipeline).</p>\n"}]