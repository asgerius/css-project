[{"tags": ["audio", "go", "visualization"], "comments": [{"owner": {"reputation": 6501, "user_id": 859353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee0ed1d5c1b450c2c76651dd62f38c4?s=128&d=identicon&r=PG", "display_name": "jcbwlkr", "link": "https://stackoverflow.com/users/859353/jcbwlkr"}, "edited": false, "score": 0, "creation_date": 1426801417, "post_id": 29134214, "comment_id": 46531842, "body": "Maybe look at <a href=\"https://github.com/avelino/awesome-go#audiomusic\" rel=\"nofollow noreferrer\">github.com/avelino/awesome-go#audiomusic</a> specifically the one about PortAudio? Just a guess."}, {"owner": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "edited": false, "score": 0, "creation_date": 1426855229, "post_id": 29134214, "comment_id": 46551954, "body": "I think you need to research PulseAudio APIs (consumer level apps) and using Jack (for more advanced apps). More info <a href=\"http://linux-sound.org/\" rel=\"nofollow noreferrer\">linux-sound.org</a>, <a href=\"http://jackaudio.org/\" rel=\"nofollow noreferrer\">jackaudio.org</a>"}, {"owner": {"reputation": 2219, "user_id": 8608146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3B2gl.jpg?s=128&g=1", "display_name": "Phani Rithvij", "link": "https://stackoverflow.com/users/8608146/phani-rithvij"}, "edited": false, "score": 0, "creation_date": 1590750000, "post_id": 29134214, "comment_id": 109805141, "body": "updated link for what jcbwlkr commented <a href=\"https://github.com/avelino/awesome-go#audio-and-music\" rel=\"nofollow noreferrer\">github.com/avelino/awesome-go#audio-and-music</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1286, "user_id": 1071090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/vdLa6.jpg?s=128&g=1", "display_name": "Peter Hommel", "link": "https://stackoverflow.com/users/1071090/peter-hommel"}, "is_accepted": true, "score": 3, "last_activity_date": 1429692902, "creation_date": 1429692902, "answer_id": 29792419, "question_id": 29134214, "link": "https://stackoverflow.com/questions/29134214/audio-streaming-from-os/29792419#29792419", "title": "Audio Streaming from OS", "body": "<p>Have a look at the \"Graphics and Audio\" and \"Audio\" sections of <a href=\"http://go-lang.cat-v.org/library-bindings\" rel=\"nofollow\">http://go-lang.cat-v.org/library-bindings</a>.</p>\n\n<p>Especially the bindings to PortAudio (<a href=\"http://code.google.com/p/portaudio-go/\" rel=\"nofollow\">http://code.google.com/p/portaudio-go/</a>) and PulseAudio (<a href=\"https://github.com/moriyoshi/pulsego/\" rel=\"nofollow\">https://github.com/moriyoshi/pulsego/</a>) could be of use to you, being a linux guy.</p>\n"}, {"comments": [{"owner": {"reputation": 2219, "user_id": 8608146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3B2gl.jpg?s=128&g=1", "display_name": "Phani Rithvij", "link": "https://stackoverflow.com/users/8608146/phani-rithvij"}, "edited": false, "score": 0, "creation_date": 1590749934, "post_id": 32675936, "comment_id": 109805108, "body": "Is is able to record the system sound?"}], "tags": [], "owner": {"reputation": 1, "user_id": 4912582, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BBfS5Oc5KsQ/AAAAAAAAAAI/AAAAAAAAMIA/i1MKPD1TZ6E/photo.jpg?sz=128", "display_name": "Patrick Coleman", "link": "https://stackoverflow.com/users/4912582/patrick-coleman"}, "is_accepted": false, "score": 0, "last_activity_date": 1442724753, "creation_date": 1442724753, "answer_id": 32675936, "question_id": 29134214, "link": "https://stackoverflow.com/questions/29134214/audio-streaming-from-os/32675936#32675936", "title": "Audio Streaming from OS", "body": "<p>I know this is from a while ago, but if anyone else is wondering the same, I've been working on: <a href=\"https://github.com/padster/go-sound\" rel=\"nofollow\">https://github.com/padster/go-sound</a></p>\n\n<p>Sounds are modelled as channels of float samples (44.1khz, each sample in the range [-1, 1]), and you can process them, or e.g. play to speakers (currently via pulsego), write them to file or display on screen using openGL.</p>\n\n<p>There's also some experimental FFT code (Constant Q, which is similar) </p>\n"}, {"tags": [], "owner": {"reputation": 6836, "user_id": 146738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f0bbc82a5a09f4c1efffaa4ccec419b?s=128&d=identicon&r=PG", "display_name": "Simon Epskamp", "link": "https://stackoverflow.com/users/146738/simon-epskamp"}, "is_accepted": false, "score": 1, "last_activity_date": 1556394721, "creation_date": 1556394721, "answer_id": 55884344, "question_id": 29134214, "link": "https://stackoverflow.com/questions/29134214/audio-streaming-from-os/55884344#55884344", "title": "Audio Streaming from OS", "body": "<p>For playing back sound with golang you can use beep: <a href=\"http://github.com/faiface/beep\" rel=\"nofollow noreferrer\">http://github.com/faiface/beep</a> , see <a href=\"https://github.com/faiface/beep/wiki/Hello,-Beep!\" rel=\"nofollow noreferrer\">the tutorial</a>:</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>package main\n\nimport (\n    \"log\"\n    \"os\"\n    \"time\"\n\n    \"github.com/faiface/beep\"\n    \"github.com/faiface/beep/mp3\"\n    \"github.com/faiface/beep/speaker\"\n)\n\nfunc main() {\n    f, err := os.Open(\"../Lame_Drivers_-_01_-_Frozen_Egg.mp3\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    streamer, format, err := mp3.Decode(f)\n    if err != nil {\n        log.Fatal(err)\n    }\n    defer streamer.Close()\n\n    speaker.Init(format.SampleRate, format.SampleRate.N(time.Second/10))\n\n    done := make(chan bool)\n    speaker.Play(beep.Seq(streamer, beep.Callback(func() {\n        done &lt;- true\n    })))\n\n    &lt;-done\n}\n</code></pre>\n\n<p>For recording your computers audio (microphone), you could try this tutorial: <a href=\"https://medium.com/@valentijnnieman_79984/how-to-build-an-audio-streaming-server-in-go-part-1-1676eed93021\" rel=\"nofollow noreferrer\">https://medium.com/@valentijnnieman_79984/how-to-build-an-audio-streaming-server-in-go-part-1-1676eed93021</a> that uses the PortAudio bindings:</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>package main\nimport (\n \"encoding/binary\"\n \"github.com/gordonklaus/portaudio\"\n \"net/http\"\n)\n\nconst sampleRate = 44100\nconst seconds = 1\n\nfunc main() {\n portaudio.Initialize()\n defer portaudio.Terminate()\n buffer := make([]float32, sampleRate * seconds)\n stream, err := portaudio.OpenDefaultStream(1, 0, sampleRate,   len(buffer), func(in []float32) {\n  for i := range buffer {\n   buffer[i] = in[i]\n  }\n })\n\n if err != nil {\n   panic(err)\n }\n\n stream.Start()\n defer stream.Close()\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 3474574, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/91mcq.gif?s=128&g=1", "display_name": "facetiousfactorial", "link": "https://stackoverflow.com/users/3474574/facetiousfactorial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7520, "favorite_count": 0, "accepted_answer_id": 29792419, "answer_count": 3, "score": 7, "last_activity_date": 1556394721, "creation_date": 1426719258, "question_id": 29134214, "link": "https://stackoverflow.com/questions/29134214/audio-streaming-from-os", "title": "Audio Streaming from OS", "body": "<p>I would like to interface with the output of my computer's audio and generate a visualization of that audio with fft's. </p>\n\n<p>My question is \"Where do I get the audio output stream of my computer? Are there any useful libraries for this purpose?\" All the examples I've looked at stream from files, which isn't very useful to me.</p>\n\n<p>I'm hoping to work in golang and linux.</p>\n"}, {"tags": ["google-app-engine", "go", "google-cloud-datastore"], "comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 3, "creation_date": 1426717524, "post_id": 29133079, "comment_id": 46493327, "body": "There is no special formatting required for email addresses.  A string is  a string. Show your entity type declarations.  Use the datastore viewer to confirm that an entity exists with the given property."}, {"owner": {"reputation": 12822, "user_id": 87750, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9eb0c80f3b41463ed45f45584b065a9?s=128&d=identicon&r=PG", "display_name": "fredrik", "link": "https://stackoverflow.com/users/87750/fredrik"}, "edited": false, "score": 0, "creation_date": 1426727202, "post_id": 29133079, "comment_id": 46496177, "body": "Is it stored as a string or something else like byte slice?"}, {"owner": {"reputation": 87, "user_id": 3896454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa8a2a3498bf971dd352e14dfee74ce?s=128&d=identicon&r=PG", "display_name": "jjgames", "link": "https://stackoverflow.com/users/3896454/jjgames"}, "reply_to_user": {"reputation": 12822, "user_id": 87750, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9eb0c80f3b41463ed45f45584b065a9?s=128&d=identicon&r=PG", "display_name": "fredrik", "link": "https://stackoverflow.com/users/87750/fredrik"}, "edited": false, "score": 0, "creation_date": 1426775585, "post_id": 29133079, "comment_id": 46517073, "body": "@fredrik - &quot;AccountEmail&quot; is stored as a string."}, {"owner": {"reputation": 87, "user_id": 3896454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa8a2a3498bf971dd352e14dfee74ce?s=128&d=identicon&r=PG", "display_name": "jjgames", "link": "https://stackoverflow.com/users/3896454/jjgames"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1426775759, "post_id": 29133079, "comment_id": 46517181, "body": "@Thundercat - I have confirmed in datastore viewer that the &quot;users&quot; entity does exist and the property name &quot;AccountEmail&quot; exists."}, {"owner": {"reputation": 12822, "user_id": 87750, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9eb0c80f3b41463ed45f45584b065a9?s=128&d=identicon&r=PG", "display_name": "fredrik", "link": "https://stackoverflow.com/users/87750/fredrik"}, "edited": false, "score": 0, "creation_date": 1426776451, "post_id": 29133079, "comment_id": 46517717, "body": "are you sure there is no spaces or something? what output do you get if you do <code>fmt.Printf(&quot;%#v&quot;, users)</code> when you get it via the id?"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 3896454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa8a2a3498bf971dd352e14dfee74ce?s=128&d=identicon&r=PG", "display_name": "jjgames", "link": "https://stackoverflow.com/users/3896454/jjgames"}, "edited": false, "score": 0, "creation_date": 1426776693, "post_id": 29139922, "comment_id": 46517918, "body": "Your final point was the correct one in my case.  The data was coming in from a url parameter and there was a slight typo in the url which caused a difference I couldn&#39;t see visually.   Thank you"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 2, "last_activity_date": 1470724396, "last_edit_date": 1470724396, "creation_date": 1426753685, "answer_id": 29139922, "question_id": 29133079, "link": "https://stackoverflow.com/questions/29133079/how-do-i-query-an-appengine-datastore-with-an-email-address/29139922#29139922", "title": "How do I query an appengine datastore with an email address", "body": "<p>In order to find the user by email (<code>AccountEmail</code>), all of the following conditions must be true. Please check and ensure each \"test\" passes:</p>\n\n<ul>\n<li><p>An entity with property name <code>AccountEmail</code> must exists. Don't forget that the property name is case-sensitive. Note that the datastore name and the <code>struct</code> field name may be different, tags can be used to change it, e.g.</p>\n\n<p><code>AccountEmail string `datastore:\"email\"`</code></p></li>\n<li><p>The property must be indexed. Note that whether a property is indexed may vary from entity to entity, so you may have an entity where <code>AccountEmail</code> is indexed and another one where <code>AccountEmail</code> is not indexed.</p></li>\n<li><p><code>AccountEmail</code> must have a type <code>string</code>. I assume this is trivial and is so. But note that it is possible to save a property with the <code>User</code> type which is different from the <code>string</code> type and when you list entities in the Datastore viewer for example, the email will be displayed just like if it would be an email string, but obviously it is different.</p></li>\n<li><p>To find the user with <code>AccountEmail=\"email@address.com\"</code>, the value saved must be <code>\"email@address.com\"</code> exactly. Lower and upper case letters are different! Spaces (and all whitespace characters) matter! Please check if the saved value is exactly this as you will not see trailing spaces when printed for example, but they will cause a mismatch! Also some unicode characters have the same visual appearance (they look the same) but their unicode codepoint is not the same and will also cause a mismatch.</p></li>\n</ul>\n"}], "owner": {"reputation": 87, "user_id": 3896454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa8a2a3498bf971dd352e14dfee74ce?s=128&d=identicon&r=PG", "display_name": "jjgames", "link": "https://stackoverflow.com/users/3896454/jjgames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 1, "accepted_answer_id": 29139922, "answer_count": 1, "score": 1, "last_activity_date": 1473008037, "creation_date": 1426714195, "last_edit_date": 1473008037, "question_id": 29133079, "link": "https://stackoverflow.com/questions/29133079/how-do-i-query-an-appengine-datastore-with-an-email-address", "title": "How do I query an appengine datastore with an email address", "body": "<p>I am trying to lookup users in appengine datastore using their email address.  I'm using Go.</p>\n\n<p>This code finds no users.</p>\n\n<pre><code>var users []entity.User\nq := datastore.NewQuery(\"users\").Filter(\"AccountEmail =\", \"email@address.com\")\n_, err := q.GetAll(c, &amp;users)\n</code></pre>\n\n<p>If I change the query to lookup the user with the \"Id\" property instead it works fine.</p>\n\n<pre><code>var users []entity.User\nq := datastore.NewQuery(\"users\").Filter(\"Id\", \"185804764220139124118\")\n_, err := q.GetAll(c, &amp;users)\n</code></pre>\n\n<p>I've confirmed the property name and value for \"AccountEmail\" is correct.  \"AccountEmail\" It is indexed too.</p>\n\n<p>Is there some special formatting that needs to be done with an email address to get the query to work?</p>\n"}, {"tags": ["go", "append", "slice"], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426716173, "post_id": 29131708, "comment_id": 46492784, "body": "Note, do not just blindly do this unless you fully understand what is going on. This style of use of <code>append</code> to remove items is a bit of a hack/trick and part of that is so that it avoids (most) unnecessary copying. If you want/need efficient removal of items you likely want something other than simple slice (maybe just a map, or a combination of a <a href=\"https://code.google.com/p/rsc/source/browse/regexp/regmerge/sparse.go#14\" rel=\"nofollow noreferrer\">map and a slice</a> if you want ordering)."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 3, "last_activity_date": 1426709310, "creation_date": 1426709310, "answer_id": 29131708, "question_id": 29131529, "link": "https://stackoverflow.com/questions/29131529/assignment-to-a-new-variable-when-deleting-an-element-in-a-slice-yields-unexpect/29131708#29131708", "title": "Assignment to a new variable when deleting an element in a slice yields unexpected result", "body": "<p>The <code>append</code> function operates in-place when enough space is available. Slice away the capacity to avoid this behaviour:</p>\n\n<pre><code>y := append(x[:3:3],x[4:]...)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "is_accepted": false, "score": 1, "last_activity_date": 1426709663, "creation_date": 1426709663, "answer_id": 29131804, "question_id": 29131529, "link": "https://stackoverflow.com/questions/29131529/assignment-to-a-new-variable-when-deleting-an-element-in-a-slice-yields-unexpect/29131804#29131804", "title": "Assignment to a new variable when deleting an element in a slice yields unexpected result", "body": "<p>This is what happens, when you append, x is changed.</p>\n\n<pre><code>x = [1,2,3,  4,5,6,7, 8]\n    [1,2,3] [5,6,7,8] # 4th, 5th, 6th, 7th elements are changed\n     x[:3]    x[4:]\n\nx = [1,2,3,5,6,7,8,8]\n</code></pre>\n"}], "owner": {"reputation": 809, "user_id": 837017, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a39ae7e80e45b9129d82782c52aa4a3a?s=128&d=identicon&r=PG", "display_name": "cwadding", "link": "https://stackoverflow.com/users/837017/cwadding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 29131708, "answer_count": 2, "score": 3, "last_activity_date": 1426709663, "creation_date": 1426708643, "last_edit_date": 1426709337, "question_id": 29131529, "link": "https://stackoverflow.com/questions/29131529/assignment-to-a-new-variable-when-deleting-an-element-in-a-slice-yields-unexpect", "title": "Assignment to a new variable when deleting an element in a slice yields unexpected result", "body": "<p>I am seeing some unintended behaviour when trying to delete an element within a slice. Below is my code:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    x := []int{1,2,3,4,5,6,7,8}\n    y := append(x[:3],x[4:]...)\n    fmt.Println(x)\n    fmt.Println(y)\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/ALn3chTBIY\" rel=\"nofollow\">playground</a></p>\n\n<p>the output is:</p>\n\n<pre><code>[1 2 3 5 6 7 8 8]\n[1 2 3 5 6 7 8]\n</code></pre>\n\n<p>I would expect the output to be:</p>\n\n<pre><code>[1 2 3 4 5 6 7 8]\n[1 2 3 5 6 7 8]\n</code></pre>\n\n<p>Why is the result not what I expected?</p>\n\n<p>In other words since there is no assignment to change the value <code>x</code> I would expect it to have the same initialized value but for some reason it doesn't and has the same value as <code>y</code> with the last element duplicated. Is this a bug?</p>\n"}, {"tags": ["arrays", "multidimensional-array", "go", "slice"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426706017, "post_id": 29130423, "comment_id": 46487176, "body": "<a href=\"https://golang.org/ref/spec\" rel=\"nofollow noreferrer\">RTFM</a> on <a href=\"https://golang.org/ref/spec#Slice_types\" rel=\"nofollow noreferrer\">Slice</a> and <a href=\"https://golang.org/ref/spec#Struct_types\" rel=\"nofollow noreferrer\">Struct</a> and types as well as the <a href=\"https://blog.golang.org/slices\" rel=\"nofollow noreferrer\">Arrays, slices (and strings)</a> blog entry."}, {"owner": {"reputation": 16513, "user_id": 95642, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/36cf75fa7751ef674df65ab65cecd255?s=128&d=identicon&r=PG", "display_name": "Drew LeSueur", "link": "https://stackoverflow.com/users/95642/drew-lesueur"}, "edited": false, "score": 0, "creation_date": 1426718525, "post_id": 29130423, "comment_id": 46493684, "body": "Don&#39;t let the down votes get you down. Good luck on learning Go. I am learning it too."}], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426706402, "post_id": 29130740, "comment_id": 46487380, "body": "Note, you can do things like <code>var x [][]struct{x, y int}</code> but usually it&#39;s simpler to just define a struct type as shown."}], "tags": [], "owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "is_accepted": true, "score": 3, "last_activity_date": 1426708331, "last_edit_date": 1426708331, "creation_date": 1426705934, "answer_id": 29130740, "question_id": 29130423, "link": "https://stackoverflow.com/questions/29130423/how-do-i-define-a-slice-of-slices-containing-an-int-and-a-slice-of-strings-in-go/29130740#29130740", "title": "How do I define a slice of slices containing an int and a slice of strings in Go?", "body": "<p>Slice of T: <code>var x []T</code></p>\n\n<p>Slice of slice of T: <code>var x [][]T</code></p>\n\n<p>Slice of T1 and T2: You need to put T1 and T2 into a struct.</p>\n\n<p>So for: slice of (slices containing { int and a slice of strings } ).\nIt would usually be something like:</p>\n\n<pre><code>type foo struct {\n    i int\n    s []string\n}\nvar x [][]foo\n</code></pre>\n\n<p>But your example looks more like just a <code>[]foo</code>:</p>\n\n<pre><code>bar := []foo{\n    {1, []string{\"a\", \"b\", \"c\"}},\n    {2, []string{\"z\", \"x\", \"y\"}},\n}\nfmt.Println(\"bar:\", bar)\n// bar: [{1 [a b c]} {2 [z x y]}]\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/ebg91kzWPR\" rel=\"nofollow\"><kbd>Run on Playground</kbd></a> (also includes more examples)</p>\n"}], "owner": {"reputation": 1897, "user_id": 473368, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e24aa1cfabf417ef8833ea8721a66a8?s=128&d=identicon&r=PG", "display_name": "01AutoMonkey", "link": "https://stackoverflow.com/users/473368/01automonkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "accepted_answer_id": 29130740, "answer_count": 1, "score": -1, "last_activity_date": 1426708331, "creation_date": 1426704822, "question_id": 29130423, "link": "https://stackoverflow.com/questions/29130423/how-do-i-define-a-slice-of-slices-containing-an-int-and-a-slice-of-strings-in-go", "title": "How do I define a slice of slices containing an int and a slice of strings in Go?", "body": "<p>It would look something like this:</p>\n\n<p><code>[[1,[\"a\", \"b\", \"c\"]], [2,[\"z\", \"x\", \"y\"]]]</code></p>\n\n<p>Intuitively I would do something like [][]int[]string, but that's not valid: <code>syntax error: unexpected [, expecting semicolon or newline or }</code>, so how would I do it?</p>\n"}, {"tags": ["google-app-engine", "go"], "comments": [{"owner": {"reputation": 6412, "user_id": 272372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLzr8.png?s=128&g=1", "display_name": "Hanuman", "link": "https://stackoverflow.com/users/272372/hanuman"}, "edited": false, "score": 2, "creation_date": 1426695703, "post_id": 29127242, "comment_id": 46480630, "body": "Have you tried adding a custom handler and redirecting to the logout url?"}, {"owner": {"reputation": 938, "user_id": 264567, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EJgqq.png?s=128&g=1", "display_name": "frederix", "link": "https://stackoverflow.com/users/264567/frederix"}, "reply_to_user": {"reputation": 6412, "user_id": 272372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLzr8.png?s=128&g=1", "display_name": "Hanuman", "link": "https://stackoverflow.com/users/272372/hanuman"}, "edited": false, "score": 0, "creation_date": 1426695914, "post_id": 29127242, "comment_id": 46480766, "body": "That&#39;s a pretty easy option actually, but that means two redirects. Which I suppose isn&#39;t all that bad on a logout. I&#39;ll try that approach for now until someone offers up a better one."}], "answers": [{"tags": [], "owner": {"reputation": 11415, "user_id": 675311, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5e4575fdaacc879dc2199490417d170a?s=128&d=identicon&r=PG", "display_name": "bigblind", "link": "https://stackoverflow.com/users/675311/bigblind"}, "is_accepted": true, "score": 4, "last_activity_date": 1426718374, "last_edit_date": 1426718374, "creation_date": 1426717936, "answer_id": 29133954, "question_id": 29127242, "link": "https://stackoverflow.com/questions/29127242/gae-go-perform-additional-actions-on-logout/29133954#29133954", "title": "GAE Go perform additional actions on logout", "body": "<p>What you can do, is create your own logout handler, and redirect to the <code>user.LogoutURL</code>.</p>\n\n<pre><code>func logoutHandler(w http.ResponseWriter, r *http.Request) {\n    c := appengine.NewContext(r)\n    // do what you want to do here.\n    http.Redirect(w, r, users.LogoutURL(c))\n}\n</code></pre>\n"}], "owner": {"reputation": 938, "user_id": 264567, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EJgqq.png?s=128&g=1", "display_name": "frederix", "link": "https://stackoverflow.com/users/264567/frederix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 29133954, "answer_count": 1, "score": 1, "last_activity_date": 1426718374, "creation_date": 1426695496, "question_id": 29127242, "link": "https://stackoverflow.com/questions/29127242/gae-go-perform-additional-actions-on-logout", "title": "GAE Go perform additional actions on logout", "body": "<p>When a user logs out of a GAE app via the user.LogoutURL path, I want to perform additional actions when they log out.</p>\n\n<p>How can I override that with a specific handler (like so: <a href=\"https://cloud.google.com/appengine/docs/go/users/#Go_User_authentication_in_Go\" rel=\"nofollow\">https://cloud.google.com/appengine/docs/go/users/#Go_User_authentication_in_Go</a>) and still perform the required logout actions? Or how can I detect a user is logging out and then perform the actions I want?</p>\n"}, {"tags": ["bash", "go", "command-line-interface"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 4, "creation_date": 1426690491, "post_id": 29125248, "comment_id": 46476711, "body": "Do those files differ? Because an exit status of <code>1</code> from diff means some differences were found not an error. <code>2</code> is error from <code>diff</code>. This is documented in the man page."}, {"owner": {"reputation": 45768, "user_id": 13227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9aa8ec2ad36bb9385a4a0f3840f65ae8?s=128&d=identicon&r=PG", "display_name": "Gary Willoughby", "link": "https://stackoverflow.com/users/13227/gary-willoughby"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1426691135, "post_id": 29125248, "comment_id": 46477181, "body": "Yes they are different and everything works fine in bash."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1426691771, "post_id": 29125248, "comment_id": 46477683, "body": "The log.Fatal* exits the program immediately when you see a non-0 exit status. You&#39;re not getting to where you print the output."}], "answers": [{"comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1426694582, "post_id": 29125807, "comment_id": 46479827, "body": "WaitStatus is the status code from wait, not just the exit code.  Use <code>ExitStatus()</code> to get the actual exit code, so it will be a 1 as documented, not 256."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1426694869, "post_id": 29125807, "comment_id": 46480042, "body": "@JimB where is this ExitStatus call? The API docs I have (and code completion) have nothing of this sort."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1426695257, "post_id": 29125807, "comment_id": 46480312, "body": "It&#39;s a method on WaitStatus: <a href=\"http://golang.org/pkg/syscall/#WaitStatus.ExitStatus\" rel=\"nofollow noreferrer\">golang.org/pkg/syscall/#WaitStatus.ExitStatus</a>"}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1426695527, "post_id": 29125807, "comment_id": 46480511, "body": "@JimB thanks I&#39;ll modify my answer for the sake of generations to come :)"}], "tags": [], "owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "is_accepted": true, "score": 6, "last_activity_date": 1426695653, "last_edit_date": 1592644375, "creation_date": 1426691802, "answer_id": 29125807, "question_id": 29125248, "link": "https://stackoverflow.com/questions/29125248/how-to-execute-diff-on-the-command-line-using-go/29125807#29125807", "title": "How to execute diff on the command line using Go?", "body": "<p>When you run a program with <code>exec</code>, you get an error if the exit code was not 0. From the doc:</p>\n<blockquote>\n<p>The returned error is nil if the command runs, has no problems copying stdin, stdout, and stderr, and exits with a zero exit status.</p>\n<p>If the command fails to run or doesn't complete successfully, the error is of type *ExitError. Other error types may be returned for I/O problems.</p>\n</blockquote>\n<p>So what happens here is that diff returns an error when the files are different, yet you treat it like a runtime error. Just change your code to reflect that it isn't. It's possible by checking the error.</p>\n<p>e.g. something like this:</p>\n<pre><code>    output, err := exec.Command(&quot;diff&quot;, &quot;-u&quot;, &quot;/tmp/revision-1&quot;, &quot;/tmp/revision-4&quot;).CombinedOutput()\n    if err != nil {\n           \n        switch err.(type) {\n        case *exec.ExitError:\n            // this is just an exit code error, no worries\n            // do nothing\n\n        default: //couldnt run diff\n            log.Fatal(err)\n        }\n    }\n</code></pre>\n<p>Also, I've changed it get <code>CombinedOutput</code>, so if any diff specific errors occured, you'll see stderr as well.</p>\n<p><strong>Note</strong> that you'll get a &quot;valid&quot; error even if one of the files doesn't exist. So you can check the <code>ExitError</code>'s exit code by doing something like this:</p>\n<pre><code>    switch e := err.(type) {\n    case *exec.ExitError:\n\n        // we can check the actual error code. This is not platform portable \n        if status, ok := e.Sys().(syscall.WaitStatus); ok {\n            // exit code 1 means theres a difference and is not an error\n            if status.ExitStatus() != 1 { \n                log.Fatal(err)\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 45768, "user_id": 13227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9aa8ec2ad36bb9385a4a0f3840f65ae8?s=128&d=identicon&r=PG", "display_name": "Gary Willoughby", "link": "https://stackoverflow.com/users/13227/gary-willoughby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 1, "accepted_answer_id": 29125807, "answer_count": 1, "score": 2, "last_activity_date": 1426695653, "creation_date": 1426690302, "question_id": 29125248, "link": "https://stackoverflow.com/questions/29125248/how-to-execute-diff-on-the-command-line-using-go", "title": "How to execute diff on the command line using Go?", "body": "<p>I'm having a problem using Ubuntu 14.04 and executing <code>diff</code> on the command line. Look at the following Go code:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"log\"\nimport \"os/exec\"\n\nfunc main() {\n    output, err := exec.Command(\"diff\", \"-u\", \"/tmp/revision-1\", \"/tmp/revision-4\").Output()\n    if err != nil {\n        log.Fatalln(err)\n    }\n\n    fmt.Println(string(output))\n}\n</code></pre>\n\n<p>If i execute this using <code>go run test.go</code> i get the following error:</p>\n\n<pre><code>2015/03/18 14:39:25 exit status 1\nexit status 1\n</code></pre>\n\n<p>So something is going wrong with <code>diff</code> and it's returning <code>1</code> as its exit code. Only the <code>diff</code> command seems to throw an error. If i use the <code>cat</code> or <code>wc</code> command, the code runs fine.</p>\n\n<p>Any ideas why <code>diff</code> doesn't work here but other commands do?</p>\n"}, {"tags": ["macos", "google-chrome", "go"], "answers": [{"comments": [{"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1426683111, "post_id": 29122461, "comment_id": 46471411, "body": "@YumYumYum ok, same kind of issue then. The second part of my answer describe a way to avoid the issue entirely."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 4, "creation_date": 1426683985, "post_id": 29122461, "comment_id": 46472028, "body": "@YumYumYum I stand by my answer: declare a <i>separate</i> variable of the right type, then use it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user285594"}, "edited": false, "score": 0, "creation_date": 1426712345, "post_id": 29122461, "comment_id": 46490921, "body": "I applied like you said in OSX 10.10.2 i have now new error: &quot;undefined: Cmd &quot; when i said <code>var cmd *Cmd;</code>"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 1, "creation_date": 1426712451, "post_id": 29122461, "comment_id": 46490972, "body": "@YumYumYum yes, the actual type is <code>*exec.Cmd</code> (<a href=\"http://golang.org/pkg/os/exec/#Cmd\" rel=\"nofollow noreferrer\">golang.org/pkg/os/exec/#Cmd</a>). I have edited the answer."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 2, "last_activity_date": 1426712431, "last_edit_date": 1495535056, "creation_date": 1426682743, "answer_id": 29122461, "question_id": 29122372, "link": "https://stackoverflow.com/questions/29122372/osx-10-10-2-cmd-start-undefined-showing/29122461#29122461", "title": "OSX 10.10.2 - cmd start undefined showing", "body": "<p>If your <code>cmd</code> variable is shadowing a <code>cmd</code> parameter in an enclosing function (not visible in the OP's question), then the <code>cmd := exec.Command</code> would declare a new <code>cmd</code> (<a href=\"http://golang.org/ref/spec#Short_variable_declarations\" rel=\"nofollow noreferrer\">short variable declaration form</a>) which wouldn't be visible outside of the <code>if/else</code> scope.</p>\n\n<p>The <a href=\"https://stackoverflow.com/users/285594/yumyumyum\">OP YumYumYum</a> confirms <a href=\"https://stackoverflow.com/questions/29122372/osx-10-10-2-cmd-start-undefined-showing/29122461?noredirect=1#comment46471229_29122461\">in the comments</a>:</p>\n\n<blockquote>\n  <p>I had this: <code>func main() { cmd := \"\";</code></p>\n</blockquote>\n\n<p>This is a short variable declaration associating the type string to <code>cmd</code>.<br>\nThat wouldn't work well with <a href=\"http://golang.org/pkg/os/exec/#Command\" rel=\"nofollow noreferrer\"><code>exec.Command() *exec.Cmd</code></a>, which returns a <code>*exec.Cmd</code>.</p>\n\n<p>If would be better to declare a <code>var cmdopen *exec.Cmd</code> (different name, just to be on the safe side) and instantiates it, in order to be sure that the <code>cmdopen</code> is from the expected type <code>*exec.Cmd</code>.</p>\n\n<pre><code>var cmdopen *exec.Cmd\nif myarch == \"386\" {\n    cmdopen = exec.Command(\"open\", \"-b\", \"com.google.Chrome\", \"--args\", \"--chrome-frame\", \"--kiosk\", url)\n} else {\n    cmdopen = exec.Command(\"open\", \"-b\", \"com.google.Chrome\", \"--args\", \"--chrome-frame\", \"--kiosk\", url)\n}\nerr := cmdopen.Start()\n</code></pre>\n\n<p>(note the use of '<code>=</code>' instead of '<code>:=</code>' in <code>cmdopen = exec.Command</code>)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user285594"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "accepted_answer_id": 29122461, "answer_count": 1, "score": 0, "last_activity_date": 1426712431, "creation_date": 1426682537, "last_edit_date": 1592644375, "question_id": 29122372, "link": "https://stackoverflow.com/questions/29122372/osx-10-10-2-cmd-start-undefined-showing", "title": "OSX 10.10.2 - cmd start undefined showing", "body": "<p>How to fix it? (OSX 10.10.2, go version go1.4.2 darwin/amd64)</p>\n<h3>Error:</h3>\n<blockquote>\n<p>cmd.Start undefined (type string has no field or method Start)</p>\n</blockquote>\n<h3>Code:</h3>\n<pre><code>  myos := runtime.GOOS;\n  myarch := runtime.GOARCH;\n  const url = &quot;http://localhsot:9090&quot;\n  if myarch == &quot;386&quot; {\n      cmd := exec.Command(&quot;open&quot;, &quot;-b&quot; , &quot;com.google.Chrome&quot;, &quot;--args&quot;, &quot;--chrome-frame&quot;, &quot;--kiosk&quot;, url);\n    } else {\n      cmd := exec.Command(&quot;open&quot;, &quot;-b&quot; , &quot;com.google.Chrome&quot;, &quot;--args&quot;, &quot;--chrome-frame&quot;, &quot;--kiosk&quot;, url);\n    }\n    err := cmd.Start();\n    if err != nil {\n      fmt.Println(&quot;failed&quot;);\n    } \n</code></pre>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426699097, "post_id": 29120949, "comment_id": 46482919, "body": "<a href=\"https://github.com/golang/go/wiki/CodeReviewComments#named-result-parameters\" rel=\"nofollow noreferrer\">Named returns</a> should normally be limited to helping make better/clearer godoc documentation or when you need to change return values in a deferred closure. Other than that they should be avoided."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426708067, "post_id": 29120949, "comment_id": 46488357, "body": "@DaveC I agree. I have included your comment in the answer for more visibility."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 10, "last_activity_date": 1426708045, "last_edit_date": 1495539952, "creation_date": 1426678408, "answer_id": 29120949, "question_id": 29120810, "link": "https://stackoverflow.com/questions/29120810/go-error-final-function-parameter-must-have-type/29120949#29120949", "title": "Go error: Final function parameter must have type", "body": "<p>If you are naming your return parameters, you must name <em>all</em> of them </p>\n\n<pre><code>(userRes Users, err error)\n</code></pre>\n\n<p>That way, <a href=\"https://golang.org/ref/spec#Return_statements\" rel=\"nofollow noreferrer\">return statements</a> can apply.</p>\n\n<p>As mentioned in <a href=\"https://golang.org/ref/spec#Function_types\" rel=\"nofollow noreferrer\">Function type</a>:</p>\n\n<blockquote>\n  <p>Within a list of parameters or results, the names (<code>IdentifierList</code>) must either <strong>all be present or all be absent</strong>.</p>\n</blockquote>\n\n<p>If you try to name one and not the other, as <a href=\"http://play.golang.org/p/HE3zYmd0-x\" rel=\"nofollow noreferrer\">in this example</a>, you will get:</p>\n\n<pre><code>func a() (b int, error) {\n    return 0, nil\n}\n# command-line-arguments\n/tmp/sandbox170113103/main.go:9: final function parameter must have type\n</code></pre>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/users/55504/dave-c\">Dave C</a> reminds us that:</p>\n\n<blockquote>\n  <p><a href=\"https://github.com/golang/go/wiki/CodeReviewComments#named-result-parameters\" rel=\"nofollow noreferrer\">Named returns</a> should normally be limited to helping make better/clearer godoc documentation or when you need to change return values in a deferred closure.<br>\n  Other than that they should be avoided.</p>\n</blockquote>\n"}], "owner": {"reputation": 2175, "user_id": 817571, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3eb3aee0450c2c335756206fe6ab70ed?s=128&d=identicon&r=PG", "display_name": "MIkCode", "link": "https://stackoverflow.com/users/817571/mikcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1304, "favorite_count": 1, "accepted_answer_id": 29120949, "answer_count": 1, "score": 2, "last_activity_date": 1426855636, "creation_date": 1426678036, "last_edit_date": 1495541342, "question_id": 29120810, "link": "https://stackoverflow.com/questions/29120810/go-error-final-function-parameter-must-have-type", "title": "Go error: Final function parameter must have type", "body": "<p>I have an issue with my function. I'm getting a </p>\n\n<pre><code>final function parameter must have type\n</code></pre>\n\n<p>For this method </p>\n\n<pre><code>func (s *BallotaApi) PostUser(c endpoints.Context,userReq Users) (userRes Users, error) {\n\n    c.Debugf(\"in the PostUser method\")\n\n    user := userManger.login(userReq)//return a Users Type \n\n    return user, nil\n</code></pre>\n\n<p>I read those threads but I can't figure out where I'm wrong. It looks like I declared everything.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21071507/can-you-declare-multiple-variables-at-once-in-go\">can-you-declare-multiple-variables-at-once-in-go</a> </p>\n\n<p><a href=\"https://stackoverflow.com/questions/25995539/go-function-declaration-syntax\">go-function-declaration-syntax</a></p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 13257, "user_id": 248922, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b55c30cff18b13e2176c1359654ebf1c?s=128&d=identicon&r=PG&f=1", "display_name": "RickyA", "link": "https://stackoverflow.com/users/248922/rickya"}, "edited": false, "score": 0, "creation_date": 1426675124, "post_id": 29119496, "comment_id": 46466363, "body": "Yeah, that is a pain. I normally create the latter structure on disk, and then symlink the go projects into the <code>GOPATH</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4081, "user_id": 242684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d73353bb2ecd4cd2a2bbeefe30116a7e?s=128&d=identicon&r=PG", "display_name": "Alec Mev", "link": "https://stackoverflow.com/users/242684/alec-mev"}, "edited": false, "score": 0, "creation_date": 1429174734, "post_id": 29120049, "comment_id": 47477876, "body": "I&#39;ve ended up doing what you&#39;re doing with Vagrant, but with Docker instead, which is a trivial task, actually. Cumbersome to setup for the first time, but works well."}, {"owner": {"reputation": 4081, "user_id": 242684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d73353bb2ecd4cd2a2bbeefe30116a7e?s=128&d=identicon&r=PG", "display_name": "Alec Mev", "link": "https://stackoverflow.com/users/242684/alec-mev"}, "edited": false, "score": 0, "creation_date": 1430380430, "post_id": 29120049, "comment_id": 48044361, "body": "Now that I&#39;ve spent some time dealing with Go, I still wasn&#39;t completely happy with with my workflow / resulting structure, so I began looking again. I was aware of various package managers, like <code>gpm</code> + <code>gvp</code>, <code>godep</code>, but they weren&#39;t quite cutting it. And then I found <a href=\"https://github.com/Masterminds/glide\" rel=\"nofollow noreferrer\"><code>glide</code></a>. Have been using it for a couple of days now, and it does exactly what I need: lets me store my sources wherever I want to, isolates the environment like <code>virtualenv</code> in Python, and, as an extra, provides a way to pinpoint dependencies (custom repo, branch, version). Good stuff."}], "tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": true, "score": 4, "last_activity_date": 1426676242, "last_edit_date": 1426676242, "creation_date": 1426675895, "answer_id": 29120049, "question_id": 29119496, "link": "https://stackoverflow.com/questions/29119496/storing-a-go-project-with-other-non-go-projects/29120049#29120049", "title": "Storing a Go project with other non-Go projects", "body": "<p>I had the same problem, and tried the following solutions (in chronological order):</p>\n\n<ul>\n<li><em>don't put you package in the <code>$GOPATH</code> and compile from your project directory</em>: that works while you have a single-package project. Anyway, go project should have a limited number of package\u2026 </li>\n<li><em>use a symlink from your project directory to your <code>$GOPATH</code></em>: it's really boring to have to symlink everytime you want to checkout a new project. More, the various tools asking for a package name (fmt, test, etc) won't find your package, unless you make the link the other way around, which is equally boring (even more, as it defies your git layout).</li>\n<li><em>add a <code>$GOPATH</code> entry for each project (like <code>$PATH</code>)</em>: even more boring than the previous solution, but mostly works. Even better if your poject layout is based on a <code>src/</code> directory.</li>\n<li><em>use vagrant and a dedicated <code>$GOPATH</code></em>: you can work as intended by golang, with the added complexity of having to ssh into the box. That's what I am doing now, as it have the benefits of vagrant as a bonus.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 4028, "user_id": 816892, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/203cadc8467e3add61b5cdcdfd224cf4?s=128&d=identicon&r=PG", "display_name": "Topo", "link": "https://stackoverflow.com/users/816892/topo"}, "is_accepted": false, "score": 3, "last_activity_date": 1426783990, "creation_date": 1426783990, "answer_id": 29150509, "question_id": 29119496, "link": "https://stackoverflow.com/questions/29119496/storing-a-go-project-with-other-non-go-projects/29150509#29150509", "title": "Storing a Go project with other non-Go projects", "body": "<p>This is a complicated issue and a huge headache, but what I did to solve this issue was to do it the other way around:</p>\n\n<pre><code>home/\n\u2514\u2500projects/\n  \u251cbin/\n  \u251cpkg/ \n  \u2514\u2500src/\n    \u2514\u2500some-organization/\n      \u251c\u2500some-go-project/\n      |  \u2514\u2500main.go\n      \u251c\u2500some-c-project/\n      \u2502 \u2514\u2500main.c\n      \u2514\u2500some-python-project/\n        \u2514\u2500main.py\n</code></pre>\n\n<p>And I use the go <code>bin</code> and <code>pkg</code> directories for binaries and libraries of all languages. The go layout is not bad, is just different and having your go code in a 'special' structure different from all your other code is kind of ugly so I prefer to adopt the go directory structure for all my projects.</p>\n\n<p>As an upside, you have all your software projects classified by repo hosting site and that is nice.</p>\n"}], "owner": {"reputation": 4081, "user_id": 242684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d73353bb2ecd4cd2a2bbeefe30116a7e?s=128&d=identicon&r=PG", "display_name": "Alec Mev", "link": "https://stackoverflow.com/users/242684/alec-mev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 1, "accepted_answer_id": 29120049, "answer_count": 2, "score": 3, "last_activity_date": 1426783990, "creation_date": 1426674328, "question_id": 29119496, "link": "https://stackoverflow.com/questions/29119496/storing-a-go-project-with-other-non-go-projects", "title": "Storing a Go project with other non-Go projects", "body": "<p>When it comes to code organization, Go seem to make an assumption, that it's the only language I'm going to use. However, I'd like to treat each Go project as a yet another isolated piece of software, and store it the same way as most programs were stored for decades now - in an arbitrary directory, containing no less and no more than what is needed to build and run it.</p>\n\n<p>What Go wants:</p>\n\n<pre><code>home/\n\u251c\u2500go/\n\u2502 \u2514\u2500src/\n\u2502   \u2514\u2500some-organization/\n\u2502     \u2514\u2500some-go-project/\n\u2502       \u2514\u2500main.go\n\u2514\u2500projects/\n  \u2514\u2500some-organization/\n    \u251c\u2500some-c-project/\n    \u2502 \u2514\u2500src/\n    \u2502   \u2514\u2500main.c\n    \u2514\u2500some-python-project/\n      \u2514\u2500src/\n        \u2514\u2500main.py\n</code></pre>\n\n<p>What I want:</p>\n\n<pre><code>home/\n\u2514\u2500projects/\n  \u2514\u2500some-organization/\n    \u251c\u2500some-c-project/\n    \u2502 \u2514\u2500src/\n    \u2502   \u2514\u2500main.c\n    \u251c\u2500some-python-project/\n    \u2502 \u2514\u2500src/\n    \u2502   \u2514\u2500main.py\n    \u2514\u2500some-go-project/\n      \u2514\u2500src/\n        \u2514\u2500main.go\n</code></pre>\n\n<p>Of course, nobody prevents me from structuring it my way, but I won't be able to build/install that project the intended way anymore. Doing something like <code>home/projects/some-organization/some-go-project/src/some-go-project/main.go</code> to address that is just too ugly to my liking.</p>\n\n<p>So what's the consensus here? How does Go community handle this? Back-to-make?</p>\n"}, {"tags": ["generics", "error-handling", "go"], "comments": [{"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 5, "creation_date": 1426667704, "post_id": 29117141, "comment_id": 46462185, "body": "Don&#39;t do it. Just write <code>if err != nil</code> a lot for a bit and it gets less annoying. If you write something where totally repetitive <code>err != nil</code>s constitute too much of your code, you can <a href=\"http://blog.golang.org/errors-are-values\" rel=\"nofollow noreferrer\">write helpers that assign the error somewhere</a>, or if some or all errors definitely sink the entire operation, write a panic-on-unrecoverable-error wrapper like <code>mustWrite</code> and then <code>recover</code> from the panic before it can get out of your package."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 2, "creation_date": 1426698606, "post_id": 29117141, "comment_id": 46482572, "body": "I&#39;d recommend you stop trying to fit &quot;language X&#39;s way of doing things&quot; into Go code. Go has explicit error handling everywhere and no true exceptions (panic/recover are not meant for the same thing as C++/Java exceptions). In particular, don&#39;t <b>ever</b> write a Go package that panic&#39;s on something like <code>os.Open</code> returning an <code>os.PathError</code>."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426875833, "post_id": 29117141, "comment_id": 46564624, "body": "Even if you ever find a place where you want to panic on errors, just <code>panic(err)</code>. The output on if unrecovered will be nearly the same but <code>recover</code> will get the original error rather than a string representation."}], "answers": [{"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 11, "last_activity_date": 1426856754, "last_edit_date": 1426856754, "creation_date": 1426667470, "answer_id": 29117207, "question_id": 29117141, "link": "https://stackoverflow.com/questions/29117141/writing-generics-function-without-generics/29117207#29117207", "title": "Writing generics function without generics", "body": "<p>One solution would be to <a href=\"https://docs.google.com/document/d/1V03LUfjSADDooDMhe-_K59EgpTEm3V8uvQRuNMAEnjg/edit\"><code>go generate</code></a> your <code>P()</code> function, one for each concrete type you need to work with.<br>\nSee examples in:</p>\n\n<ul>\n<li>\"<a href=\"http://htmlpreview.github.io/?http://www.onebigfluke.com/2014/12/generic-programming-go-generate.html\">Generic programming in Go using \"<code>go generate</code>\"</a>\".</li>\n<li>\"<a href=\"https://github.com/joeshaw/gengen\">joeshaw/gengen</a>\"</li>\n<li>\"<a href=\"https://github.com/cheekybits/genny\">cheekybits/genny</a>\"</li>\n<li>\"<a href=\"https://github.com/clipperhouse/gen\">clipperhouse/gen</a>\"</li>\n<li>\"<a href=\"https://medium.com/@motemen/achieving-type-generic-functions-in-go-without-using-reflections-40bc06111970\">Achieving type generic functions in Go, without using reflections</a>\"</li>\n</ul>\n\n<p>That would make calling those lib functions easier, since the concrete P () implementations generated would use the right type instead of interface{}.</p>\n"}, {"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 4, "last_activity_date": 1426667548, "creation_date": 1426667548, "answer_id": 29117230, "question_id": 29117141, "link": "https://stackoverflow.com/questions/29117141/writing-generics-function-without-generics/29117230#29117230", "title": "Writing generics function without generics", "body": "<p>What you want to do <em>would</em> require generics but as you already mentioned, Go does not support generic types. Therefore, you can't create a general function which would not lose the type.</p>\n\n<p>You have to create such a function for each type you want to support. Note that the standard library already contains some of these going under the name <code>MustXXX()</code>, which you can use out of the box, for example:</p>\n\n<p><a href=\"http://golang.org/pkg/text/template/#Must\" rel=\"nofollow\"><code>template.Must(t *Template, err error) *Template</code></a></p>\n\n<p>Or \"similar\" functions which suppress the <code>error</code> but if one still occurs, panics, for example:</p>\n\n<p><a href=\"http://golang.org/pkg/regexp/#MustCompile\" rel=\"nofollow\"><code>regexp.MustCompile(str string) *Regexp</code></a> (suppresses <code>error</code> but panics if <code>str</code> is not a valid regexp)</p>\n"}, {"tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": false, "score": 3, "last_activity_date": 1426671141, "creation_date": 1426671141, "answer_id": 29118376, "question_id": 29117141, "link": "https://stackoverflow.com/questions/29117141/writing-generics-function-without-generics/29118376#29118376", "title": "Writing generics function without generics", "body": "<p>If you plan on just panicking on errors <em>(bad idea)</em> or logging them, then just define a function to do so and use it. E.g.</p>\n\n<pre><code>func checkErr(err error) {\n    if err != nil {\n        log.Println(err)\n    }\n}\n\n// ...\n\nfunc foo() {\n    a, err := doA()\n    checkErr(err)\n    b, err := doB()\n    checkErr(err)\n    // etc.\n}\n</code></pre>\n\n<p>The user twotwotwo has already linked to the <a href=\"http://blog.golang.org/errors-are-values\" rel=\"nofollow\">Errors are values</a> article that shows more examples on how to make error handling less repetitive. But I would recommend just write the whole <code>if err != nil</code> thing, because in my experience every third error, if not second, requires some additional handling.</p>\n"}], "owner": {"reputation": 865, "user_id": 638893, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4a1f101fc45e599a70318e809d50ef72?s=128&d=identicon&r=PG", "display_name": "mheinzerling", "link": "https://stackoverflow.com/users/638893/mheinzerling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3042, "favorite_count": 6, "accepted_answer_id": 29117207, "answer_count": 3, "score": 14, "last_activity_date": 1570113502, "creation_date": 1426667209, "last_edit_date": 1570113502, "question_id": 29117141, "link": "https://stackoverflow.com/questions/29117141/writing-generics-function-without-generics", "title": "Writing generics function without generics", "body": "<p>I know that Go will not have generics in the future and there are some recommendations to replace them by other constructs. But with my example below I got stuck. </p>\n\n<pre><code>func P(any interface{}, err error) (interface{}) {\n    if err != nil {\n        panic(\"error: \"+ err.Error())\n    }\n    return any\n}\n</code></pre>\n\n<p>As you might guess, I'm trying to just fail on any error and want to put <code>P()</code> just around any function that is returning two results and the second is an error. This is working fine, but <code>any</code> is losing it's type information and is only an empty interface in the result.</p>\n\n<p>As I'm also calling lib functions I don't see a way to address this with Interfaces or Reflection.</p>\n\n<p>Any ideas? Am I totally on the wrong track or close to the goal?</p>\n"}, {"tags": ["go", "beego"], "answers": [{"tags": [], "owner": {"reputation": 459, "user_id": 307826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YiVIy.jpg?s=128&g=1", "display_name": "Stef K", "link": "https://stackoverflow.com/users/307826/stef-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1426922863, "last_edit_date": 1426922863, "creation_date": 1426705057, "answer_id": 29130511, "question_id": 29116862, "link": "https://stackoverflow.com/questions/29116862/filter-patterns-in-router/29130511#29130511", "title": "Filter patterns in router", "body": "<p>It seems that there is another point of insert for filters <code>beego.BeforeStatic</code> but it is not documented at <a href=\"http://beego.me/docs/mvc/controller/filter.md\" rel=\"nofollow\">http://beego.me/docs/mvc/controller/filter.md</a></p>\n\n<p>by looking the code at <a href=\"https://github.com/astaxie/beego/blob/master/router.go\" rel=\"nofollow\">https://github.com/astaxie/beego/blob/master/router.go</a>, these are the accepted positions when one can trigger the filter:</p>\n\n<pre><code>const (\n    // default filter execution points\n    BeforeStatic = iota\n    BeforeRouter\n    BeforeExec\n    AfterExec\n    FinishRouter\n)\n</code></pre>\n\n<p>so a valid call in order to trigger a filter for static files could be:</p>\n\n<p><code>beego.InsertFilter(\"/static/users/:userId([0-9]+)/private/*\", beego.BeforeStatic, controllers.ProtectPrivateUploads)</code></p>\n\n<p><strong>Update</strong></p>\n\n<p>The session object for the <code>beego.BeforeRouter</code> router position can be obtained using the following function:</p>\n\n<p><code>sess,_ := beego.GlobalSessions.SessionStart(ctx.ResponseWriter, ctx.Request)</code></p>\n\n<p>as a result a valid router and filter to protect content under <code>/static/</code> url would be:</p>\n\n<p>router:</p>\n\n<p><code>beego.InsertFilter(\"/static/users/:id([0-9]+)/private/*\", beego.BeforeStatic, controllers.ProtectPrivateUploads)</code></p>\n\n<p>filter:</p>\n\n<pre><code>var ProtectPrivateUploads = func(ctx *context.Context) {\n    sess,_ := beego.GlobalSessions.SessionStart(ctx.ResponseWriter, ctx.Request)\n    defer sess.SessionRelease(ctx.ResponseWriter)\n    ses := sess.Get(\"sessionid\")\n    if ses != nil {\n       // get user's id from the session and check if the user can access the requested URL\n}\n</code></pre>\n"}], "owner": {"reputation": 459, "user_id": 307826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YiVIy.jpg?s=128&g=1", "display_name": "Stef K", "link": "https://stackoverflow.com/users/307826/stef-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "accepted_answer_id": 29130511, "answer_count": 1, "score": 0, "last_activity_date": 1426922863, "creation_date": 1426665949, "last_edit_date": 1426922801, "question_id": 29116862, "link": "https://stackoverflow.com/questions/29116862/filter-patterns-in-router", "title": "Filter patterns in router", "body": "<p>For each user, the <a href=\"http://beego.me/\" rel=\"nofollow\">Beego</a> app creates a directory under <code>/static/users/</code> in the form of: <code>/static/users/USER_ID/private</code> and <code>/static/users/USER_ID/public</code>, where USER_ID the ID of each user.</p>\n\n<p>I want to protect the private files so that only the user owning them to be able to access with the use of Filters.</p>\n\n<p>The pattern in router is the following:</p>\n\n<p><code>beego.InsertFilter(\"/static/users/:userId([0-9]+)/private/*\", beego.BeforeRouter, controllers.ProtectPrivateUploads)</code></p>\n\n<p>and the filter function is the following:</p>\n\n<p><code>var ProtectPrivateUploads = func(ctx *context.Context) {\n    fmt.Println(\"Protecting content\")\n}</code></p>\n\n<p>the relevant URL has the following form:</p>\n\n<p><code>domain.com/static/users/USERID/private/123135645.png</code></p>\n\n<p>The problem is that the filter function does not get called at all so I am assuming that I must have done something wrong with the pattern in the router.</p>\n\n<p>Any ideas would be welcomed.</p>\n"}, {"tags": ["import", "go", "package"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1426654102, "post_id": 29114110, "comment_id": 46457220, "body": "See <a href=\"https://golang.org/doc/code.html#GOPATH\" rel=\"nofollow noreferrer\">golang.org/doc/code.html#GOPATH</a> and <a href=\"https://golang.org/cmd/go/#hdr-GOPATH_environment_variable\" rel=\"nofollow noreferrer\">golang.org/cmd/go/#hdr-GOPATH_environment_variable</a>"}], "answers": [{"tags": [], "owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "is_accepted": true, "score": 2, "last_activity_date": 1426652824, "creation_date": 1426652824, "answer_id": 29114139, "question_id": 29114110, "link": "https://stackoverflow.com/questions/29114110/golang-importing-issue/29114139#29114139", "title": "Golang Importing Issue", "body": "<p>You import from <code>GOPATH</code> level .. all of your packages should live there.</p>\n\n<p>For example, assuming your application is here:</p>\n\n<pre><code>$GOPATH/src/dtrinh100/app/\n</code></pre>\n\n<p>..and your package you wish to import is here:</p>\n\n<pre><code>$GOPATH/src/github.com/other/package\n</code></pre>\n\n<p>Your import would be:</p>\n\n<pre><code>import \"github.com/other/package\"\n</code></pre>\n\n<p>You should review the literature around what the <code>GOPATH</code> environment variable is all about. When beginning Go, it is important you understand its purpose and initially, you should place all of your projects/packages inside of the <code>GOPATH</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7514, "user_id": 1008837, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0f67dc852a25a639e13fafbec62eec69?s=128&d=identicon&r=PG&f=1", "display_name": "Pravin Mishra", "link": "https://stackoverflow.com/users/1008837/pravin-mishra"}, "is_accepted": false, "score": 0, "last_activity_date": 1426657132, "creation_date": 1426657132, "answer_id": 29114837, "question_id": 29114110, "link": "https://stackoverflow.com/questions/29114110/golang-importing-issue/29114837#29114837", "title": "Golang Importing Issue", "body": "<p>When you import a custom package, Go looks for its definition in each workspace listed in the GOPATH environment variable. Your custom package should be defined in a src subdirectory.</p>\n\n<p>If you keep your code in a source repository somewhere, then you should use the root of that source repository as your base path. For instance, if you have a GitHub account at <code>github.com/user</code>, that should be your base path.</p>\n\n<p>Note that you don't need to publish your code to a remote repository before you can build it. It's just a good habit to organize your code as if you will publish it someday. In practice you can choose any arbitrary path name, as long as it is unique to the standard library and greater Go ecosystem.</p>\n\n<p>You should use <code>github.com/user</code> as our base path. Create a directory inside your workspace in which to keep source code:</p>\n\n<pre><code>$ mkdir -p $GOPATH/src/github.com/user\n</code></pre>\n\n<p>You can look at <a href=\"https://golang.org/doc/code.html\" rel=\"nofollow\">How to Write Go Code</a> for more details. </p>\n"}], "owner": {"reputation": 607, "user_id": 2704875, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/d01a9368d31ce231b4de371504c2f878?s=128&d=identicon&r=PG&f=1", "display_name": "freetoplay", "link": "https://stackoverflow.com/users/2704875/freetoplay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 29114139, "answer_count": 2, "score": 0, "last_activity_date": 1426657132, "creation_date": 1426652667, "question_id": 29114110, "link": "https://stackoverflow.com/questions/29114110/golang-importing-issue", "title": "Golang Importing Issue", "body": "<p>I'm trying to use import a package for internal use, but I have been having some issues.<br>\nMy directory structure looks like this:</p>\n\n<pre><code>  app/\n    model/\n      file1.go\n      file2.go\n      ...\n    main.go\n</code></pre>\n\n<p>When I try to build the program, I get an error that looks something like this:</p>\n\n<pre><code>/usr/local/go/src/pkg/model (from $GOROOT)\n</code></pre>\n\n<p>I want to be able to call the model programs in any of my other programs in the app simply using:</p>\n\n<pre><code>import \"app/model\"\n</code></pre>\n\n<p>What are my options when it comes to doing this? </p>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 3244, "user_id": 687438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cabf9d1f557d1ebb90dbe683981aca6?s=128&d=identicon&r=PG", "display_name": "Martin Gallagher", "link": "https://stackoverflow.com/users/687438/martin-gallagher"}, "edited": false, "score": 0, "creation_date": 1426661071, "post_id": 29111777, "comment_id": 46459452, "body": "If I understand correctly, this is potentially solved by <a href=\"https://tools.ietf.org/html/rfc7386\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc7386</a> / <a href=\"https://github.com/martingallagher/go-jsonmp\" rel=\"nofollow noreferrer\">github.com/martingallagher/go-jsonmp</a>"}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 3324314, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4415c12aca1d3e05f9e427a60d65fa00?s=128&d=identicon&r=PG&f=1", "display_name": "fbjorn", "link": "https://stackoverflow.com/users/3324314/fbjorn"}, "edited": false, "score": 0, "creation_date": 1568961290, "post_id": 29111934, "comment_id": 102448581, "body": "But what to do if there&#39;s more attributes in incoming JSON, other than &quot;Space&quot; and &quot;Point&quot;? And I would like to modify only some of them and dump it back?"}], "tags": [], "owner": {"reputation": 7410, "user_id": 3257971, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/726800b78cc5fe1f7dd61906ffd0eb1e?s=128&d=identicon&r=PG&f=1", "display_name": "The user with no hat", "link": "https://stackoverflow.com/users/3257971/the-user-with-no-hat"}, "is_accepted": true, "score": 1, "last_activity_date": 1426636976, "creation_date": 1426636976, "answer_id": 29111934, "question_id": 29111777, "link": "https://stackoverflow.com/questions/29111777/is-it-possible-to-partially-decode-and-update-json-go/29111934#29111934", "title": "Is it possible to partially decode and update JSON? (go)", "body": "<p>It seems it's possible. </p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"log\"\n)\n\nfunc main() {\n    type Color struct {\n        Space string\n        Point json.RawMessage // delay parsing until we know the color space\n    }\n    type RGB struct {\n        R uint8\n        G uint8\n        B uint8\n    }\n    type YCbCr struct {\n        Y  uint8\n        Cb int8\n        Cr int8\n    }\n\n    var j = []byte(`\n        {\"Space\": \"YCbCr\", \"Point\": {\"Y\": 255, \"Cb\": 0, \"Cr\": -10}}`)\n    var colors Color\n    err := json.Unmarshal(j, &amp;colors)\n    if err != nil {\n        log.Fatalln(\"error:\", err)\n    }\n    colors.Space = \"no-space\"\n\n    b, err := json.Marshal(&amp;colors)\n    if err != nil {\n        panic(err)\n    }\n    fmt.Printf(\"b is now %s\", b)\n    return\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 118, "user_id": 5497430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sgWUB.jpg?s=128&g=1", "display_name": "Shinichi TAMURA", "link": "https://stackoverflow.com/users/5497430/shinichi-tamura"}, "is_accepted": false, "score": 0, "last_activity_date": 1599063417, "creation_date": 1599063417, "answer_id": 63709535, "question_id": 29111777, "link": "https://stackoverflow.com/questions/29111777/is-it-possible-to-partially-decode-and-update-json-go/63709535#63709535", "title": "Is it possible to partially decode and update JSON? (go)", "body": "<p>I know this is quite old question, but I learned combination of usual struct and <code>json.RawMessage</code> will do the job in the situation. Let me share.</p>\n<p>The point is: hold entire data into <code>raw</code> field, and use that for encoding/decoding. Other fields can be derived from there.</p>\n<pre class=\"lang-golang prettyprint-override\"><code>package main\n\nimport (\n    &quot;encoding/json&quot;\n    &quot;log&quot;\n)\n\ntype Color struct {\n    Space string\n    raw   map[string]json.RawMessage\n}\n\nfunc (c *Color) UnmarshalJSON(bytes []byte) error {\n    if err := json.Unmarshal(bytes, &amp;c.raw); err != nil {\n        return err\n    }\n    if space, ok := c.raw[&quot;Space&quot;]; ok {\n        if err := json.Unmarshal(space, &amp;c.Space); err != nil {\n            return err\n        }\n    }\n    return nil\n}\n\nfunc (c *Color) MarshalJSON() ([]byte, error) {\n    bytes, err := json.Marshal(c.Space)\n    if err != nil {\n        return nil, err\n    }\n    c.raw[&quot;Space&quot;] = json.RawMessage(bytes)\n    return json.Marshal(c.raw)\n}\n\nfunc main() {\n    before := []byte(`{&quot;Space&quot;: &quot;YCbCr&quot;, &quot;Point&quot;: {&quot;Y&quot;: 255, &quot;Cb&quot;: 0, &quot;Cr&quot;: -10}}`)\n    log.Println(&quot;before: &quot;, string(before))\n\n    // decode\n    color := new(Color)\n    err := json.Unmarshal(before, color)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // modify fields of interest\n    color.Space = &quot;RGB&quot;\n\n    // encode\n    after, err := json.Marshal(color)\n    if err != nil {\n        log.Fatal(err)\n    }\n    log.Println(&quot;after:  &quot;, string(after))\n}\n</code></pre>\n<p>The output should be like this:</p>\n<pre><code>2020/09/03 01:11:33 before:  {&quot;Space&quot;: &quot;YCbCr&quot;, &quot;Point&quot;: {&quot;Y&quot;: 255, &quot;Cb&quot;: 0, &quot;Cr&quot;: -10}}\n2020/09/03 01:11:33 after:   {&quot;Point&quot;:{&quot;Y&quot;:255,&quot;Cb&quot;:0,&quot;Cr&quot;:-10},&quot;Space&quot;:&quot;RGB&quot;}\n</code></pre>\n<p>NB: this doesn't preserve key order or indentations.</p>\n"}], "owner": {"reputation": 7410, "user_id": 3257971, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/726800b78cc5fe1f7dd61906ffd0eb1e?s=128&d=identicon&r=PG&f=1", "display_name": "The user with no hat", "link": "https://stackoverflow.com/users/3257971/the-user-with-no-hat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1318, "favorite_count": 1, "accepted_answer_id": 29111934, "answer_count": 2, "score": 2, "last_activity_date": 1599063417, "creation_date": 1426636046, "question_id": 29111777, "link": "https://stackoverflow.com/questions/29111777/is-it-possible-to-partially-decode-and-update-json-go", "title": "Is it possible to partially decode and update JSON? (go)", "body": "<p>I need to decode and update only a specific value of a json object. \nThe issue is that I don't know the full structure of the object. The encoding/json package  \"ignores\"/truncates the fields not provided in the struct so on encoding these fields are lost. \n  I'm wondering if it's possible to unmarshal only the structure I know, update it and then marshal it without to truncate/remove the unknown structure/information.</p>\n"}, {"tags": ["concurrency", "go", "channel"], "comments": [{"owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 2, "creation_date": 1426630678, "post_id": 29110710, "comment_id": 46450893, "body": "You don&#39;t really need the pointer .. channels themselves are what you might call &quot;reference types&quot; in Go. They aren&#39;t as light weight as a pointer .. but they are as light weight as a slice."}, {"owner": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "edited": false, "score": 0, "creation_date": 1426669224, "post_id": 29110710, "comment_id": 46462921, "body": "Sending channel ends through channels is termed &#39;mobile channels&#39; in some circles. It is subject to Milner&#39;s Pi Calculus (<a href=\"http://en.wikipedia.org/wiki/%CE%A0-calculus\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/%CE%A0-calculus</a>)."}], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 10, "last_activity_date": 1426631063, "last_edit_date": 1426631063, "creation_date": 1426630555, "answer_id": 29110765, "question_id": 29110710, "link": "https://stackoverflow.com/questions/29110710/send-channel-through-a-channel-with-go/29110765#29110765", "title": "Send channel through a channel with Go", "body": "<p>There is always some type associated with a channel. Let's assume that the type is <code>T</code>.  A channel of T is:</p>\n\n<pre><code>chan T\n</code></pre>\n\n<p>A pointer to a channel of T is:</p>\n\n<pre><code>*chan T\n</code></pre>\n\n<p>A channel of pointer to channel of T is:</p>\n\n<pre><code>chan *chan T\n</code></pre>\n\n<p>A function accepting the channel of pointer to channel of T is:</p>\n\n<pre><code>func f(c chan *chan T) { }\n</code></pre>\n\n<p>Because channels are reference types, you probably don't need to use a pointer. Try using</p>\n\n<pre><code> func (f c chan chan T) { }\n</code></pre>\n\n<p><kbd><a href=\"http://play.golang.org/p/uNCSI1-f7Z\" rel=\"noreferrer\">playground example</a></kbd></p>\n"}], "owner": {"reputation": 465, "user_id": 1574405, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90a33d9376a305df7a7ad7eafcdcf0bb?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1574405/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 1, "accepted_answer_id": 29110765, "answer_count": 1, "score": 2, "last_activity_date": 1426631063, "creation_date": 1426630266, "question_id": 29110710, "link": "https://stackoverflow.com/questions/29110710/send-channel-through-a-channel-with-go", "title": "Send channel through a channel with Go", "body": "<p>I'd like to send a pointer to a channel through a channel. Is it possible in Go? How to define function that accepts such channel?</p>\n\n<p>I tried:</p>\n\n<pre><code>func test() (chan *chan)\nfunc test() (chan chan)\n</code></pre>\n"}, {"tags": ["arrays", "pointers", "go"], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 4, "creation_date": 1426632051, "post_id": 29110508, "comment_id": 46451356, "body": "Notice that this only works if you don&#39;t change the capacity during slicing."}, {"owner": {"reputation": 7932, "user_id": 234523, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3cfba7708f878b22a101e4d0d1ddc91c?s=128&d=identicon&r=PG", "display_name": "grep", "link": "https://stackoverflow.com/users/234523/grep"}, "edited": false, "score": 0, "creation_date": 1426643309, "post_id": 29110508, "comment_id": 46454723, "body": "Neat. For symmetry, it could be <code>cap(a)-cap(a1)</code>"}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 4, "last_activity_date": 1426651843, "last_edit_date": 1426651843, "creation_date": 1426629486, "answer_id": 29110508, "question_id": 29110426, "link": "https://stackoverflow.com/questions/29110426/in-go-how-to-determine-offset-of-slice-within-an-array/29110508#29110508", "title": "In Go, how to determine offset of slice within an array?", "body": "<p>Here's one way to do it:</p>\n\n<pre><code>a := [...]int8{3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5, 8, 9, 7, 9, 3, 2}\na1 := a[3:14]\nfmt.Println(a1, \"has length\", len(a1), \"and offset\", cap(a)-cap(a1))\n</code></pre>\n\n<p>The expression <code>a[p:e]</code> returns a slice with capacity equal to <code>cap(a) - p</code>. Given the slice <code>a1</code> and backing array <code>a</code>, you can compute p as <code>p = cap(a) - cap(a1)</code></p>\n\n<p><kbd><a href=\"http://play.golang.org/p/23GQbuZxBQ\" rel=\"nofollow\">playground example</a></kbd></p>\n"}], "owner": {"reputation": 7932, "user_id": 234523, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3cfba7708f878b22a101e4d0d1ddc91c?s=128&d=identicon&r=PG", "display_name": "grep", "link": "https://stackoverflow.com/users/234523/grep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1477, "favorite_count": 0, "accepted_answer_id": 29110508, "answer_count": 1, "score": 1, "last_activity_date": 1426651843, "creation_date": 1426629225, "question_id": 29110426, "link": "https://stackoverflow.com/questions/29110426/in-go-how-to-determine-offset-of-slice-within-an-array", "title": "In Go, how to determine offset of slice within an array?", "body": "<p>I know that <code>a1</code> is a slice within array <code>a</code>. Is it possible to determine offset of <code>a1</code> with respect to beginning of <code>a</code> (basically emulating pointer arithmetics)?</p>\n\n<pre><code>a := [...]int8 {3,1,4,1,5,9,2,6,5,3,5,8,9,7,9,3,2}\na1 := a[3:14]\nfmt.Println(a1, \"has length\", len(a1), \"and offset\", /*offset(a1,a)*/)\n</code></pre>\n"}, {"tags": ["google-app-engine", "go", "socketexception", "gatling"], "comments": [{"owner": {"reputation": 10170, "user_id": 1916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487430ca3c1389e98a3c39c3910de8ef?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1916/greg"}, "edited": false, "score": 1, "creation_date": 1426621265, "post_id": 29106734, "comment_id": 46446060, "body": "Are you sure the limit isn&#39;t being hit on the machine you&#39;re running the load-test from?"}, {"owner": {"reputation": 2679, "user_id": 3081480, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UVerL.jpg?s=128&g=1", "display_name": "Kyle Chadha", "link": "https://stackoverflow.com/users/3081480/kyle-chadha"}, "reply_to_user": {"reputation": 10170, "user_id": 1916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487430ca3c1389e98a3c39c3910de8ef?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1916/greg"}, "edited": false, "score": 1, "creation_date": 1426626153, "post_id": 29106734, "comment_id": 46448745, "body": "That was it, thanks @Greg. Solved with &#39;echo limit maxfiles 100000 100000|sudo tee -a /etc/launchd.conf&#39; and restarting (up&#39;ing my ulimit -n). If you want to write that as an answer happy to give you credit."}], "owner": {"reputation": 2679, "user_id": 3081480, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UVerL.jpg?s=128&g=1", "display_name": "Kyle Chadha", "link": "https://stackoverflow.com/users/3081480/kyle-chadha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 695, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426630180, "creation_date": 1426616090, "last_edit_date": 1426630180, "question_id": 29106734, "link": "https://stackoverflow.com/questions/29106734/gatling-pressure-testing-of-gae-go-app-results-in-java-net-socketexception-too", "title": "Gatling Pressure Testing of GAE Go App Results in &#39;java.net.SocketException: Too many open files&#39;", "body": "<p>I'm pressuring testing my Go app deployed on GAE (10000 users ramped over 60 seconds, making 30 requests each) with Gatling (<a href=\"http://gatling.io/#/\" rel=\"nofollow\">http://gatling.io/#/</a>) and am seeing the following two errors:</p>\n\n<pre><code>---- Errors --------------------------------------------------------------------\n&gt; java.net.SocketException: Too many open files                    6132 (82.98%)\n&gt; java.net.SocketException: Too many open files in system          1248 (16.89%)\n\n---- Response Time Distribution ------------------------------------------------\n&gt; t &lt; 800 ms                                        301457 ( 97%)\n&gt; 800 ms &lt; t &lt; 1200 ms                                 908 (  0%)\n&gt; t &gt; 1200 ms                                          245 (  0%)\n&gt; failed                                              7390 (  2%)\n================================================================================\n</code></pre>\n\n<p>From what I understand this has to do with the VM configuration and could potentially be fixed by upping the limits on open files <code>ulimit -n &lt;value&gt;</code>.</p>\n\n<p>What I don't understand is -- how do I manage the GAE VM settings? There are some config options in dev console... but is there a way I can access the underlying VM itself? Or do I have to forego GAE for compute engine and setting up my own managed VMs?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["go", "truetype"], "comments": [{"owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 1, "creation_date": 1426624362, "post_id": 29105540, "comment_id": 46447785, "body": "Heh... funnily enough we were looking at this at my work last week. Each font has ascent and descent properties... overhang/underhang, etc. Basically, you need an API that gives you dimensions without the ascent.. so you can position it properly. Have a play with the <code>Extents</code> method in that API and the Ascent and Descent properties. I will provide a proper answer when I get a break today"}, {"owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 1, "creation_date": 1426628997, "post_id": 29105540, "comment_id": 46450118, "body": "Apoplogies - my terminology is off - Ascent and Descent relate to vertical positioning .. what you need is the Advance or Bounds of each character. I don&#39;t suppose you could share a full snippet using the <code>AdvanceWidth</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 566, "user_id": 4934782, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae4c1c1fd0fa82205af63dc62eeb347f?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/4934782/aaron"}, "edited": false, "score": 0, "creation_date": 1459828533, "post_id": 33789565, "comment_id": 60448738, "body": "Is it possible in Go to calculate the Ascent/Descent or a Bounding Rectangle for a string rendered in a truetype font?"}, {"owner": {"reputation": 421, "user_id": 576888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29e2f75737bf56c1b9690974576833ed?s=128&d=identicon&r=PG", "display_name": "kirhgoff", "link": "https://stackoverflow.com/users/576888/kirhgoff"}, "edited": false, "score": 2, "creation_date": 1472143435, "post_id": 33789565, "comment_id": 65644770, "body": "Thanks for good example. Can you explain these two lines: <code>iwidthf := int(float64(awidth) &#47; 64)</code> and <code>pt := freetype.Pt(i*250+(125-iwidthf&#47;2), 128)</code> - what are the constants there?"}], "tags": [], "owner": {"reputation": 1652, "user_id": 918176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2bdb37b11c35de00bb68359342a82f38?s=128&d=identicon&r=PG", "display_name": "user918176", "link": "https://stackoverflow.com/users/918176/user918176"}, "is_accepted": false, "score": 10, "last_activity_date": 1447877862, "creation_date": 1447877862, "answer_id": 33789565, "question_id": 29105540, "link": "https://stackoverflow.com/questions/29105540/aligning-text-in-golang-with-truetype/33789565#33789565", "title": "Aligning text in golang with Truetype", "body": "<p>As suggested by Simon the correct solution is to use AdvanceWidth:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uoMF6.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/uoMF6.png\" alt=\"enter image description here\"></a></p>\n\n<p>Crude example:</p>\n\n<pre><code>package main\n\nimport (\n    \"flag\"\n    \"fmt\"\n    \"io/ioutil\"\n    \"log\"\n    \"image\"\n    \"bufio\"\n    \"image/draw\"\n    \"image/png\"\n    \"image/color\"\n    \"github.com/golang/freetype/truetype\"\n    \"golang.org/x/image/font\"\n    \"github.com/golang/freetype\"\n    \"os\"\n)\n\nvar (\n    dpi      = flag.Float64(\"dpi\", 72, \"screen resolution in Dots Per Inch\")\n    fontfile = flag.String(\"fontfile\", \"/usr/share/fonts/liberation/LiberationSerif-Regular.ttf\", \"filename of the ttf font\")\n    hinting  = flag.String(\"hinting\", \"none\", \"none | full\")\n    size     = flag.Float64(\"size\", 125, \"font size in points\")\n    spacing  = flag.Float64(\"spacing\", 1.5, \"line spacing (e.g. 2 means double spaced)\")\n    wonb     = flag.Bool(\"whiteonblack\", false, \"white text on a black background\")\n    text     = string(\"JOJO\")\n)\n\n\nfunc main() {\n    flag.Parse()\n    fmt.Printf(\"Loading fontfile %q\\n\", *fontfile)\n    b, err := ioutil.ReadFile(*fontfile)\n    if err != nil {\n        log.Println(err)\n        return\n    }\n    f, err := truetype.Parse(b)\n    if err != nil {\n        log.Println(err)\n        return\n    }\n\n    // Freetype context\n    fg, bg := image.Black, image.White\n    rgba := image.NewRGBA(image.Rect(0, 0, 1000, 200))\n    draw.Draw(rgba, rgba.Bounds(), bg, image.ZP, draw.Src)\n    c := freetype.NewContext()\n    c.SetDPI(*dpi)\n    c.SetFont(f)\n    c.SetFontSize(*size)\n    c.SetClip(rgba.Bounds())\n    c.SetDst(rgba)\n    c.SetSrc(fg)\n    switch *hinting {\n    default:\n        c.SetHinting(font.HintingNone)\n    case \"full\":\n        c.SetHinting(font.HintingFull)\n    }\n\n    // Make some background\n\n    // Draw the guidelines.\n    ruler := color.RGBA{0xdd, 0xdd, 0xdd, 0xff}\n    for rcount := 0; rcount &lt; 4; rcount ++ {\n        for i := 0; i &lt; 200; i++ {\n            rgba.Set(250*rcount, i, ruler)\n        }\n    }\n\n    // Truetype stuff\n    opts := truetype.Options{}\n    opts.Size = 125.0\n    face := truetype.NewFace(f, &amp;opts)\n\n\n    // Calculate the widths and print to image\n    for i, x := range(text) {\n        awidth, ok := face.GlyphAdvance(rune(x))\n        if ok != true {\n            log.Println(err)\n            return\n        }\n        iwidthf := int(float64(awidth) / 64)\n        fmt.Printf(\"%+v\\n\", iwidthf)\n\n        pt := freetype.Pt(i*250+(125-iwidthf/2), 128)\n        c.DrawString(string(x), pt)\n        fmt.Printf(\"%+v\\n\", awidth)\n    }\n\n\n    // Save that RGBA image to disk.\n    outFile, err := os.Create(\"out.png\")\n    if err != nil {\n        log.Println(err)\n        os.Exit(1)\n    }\n    defer outFile.Close()\n    bf := bufio.NewWriter(outFile)\n    err = png.Encode(bf, rgba)\n    if err != nil {\n        log.Println(err)\n        os.Exit(1)\n    }\n    err = bf.Flush()\n    if err != nil {\n        log.Println(err)\n        os.Exit(1)\n    }\n    fmt.Println(\"Wrote out.png OK.\")\n\n\n}\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 885736, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e94d943cf7bc10419a53a22cde83e871?s=128&d=identicon&r=PG", "display_name": "technix", "link": "https://stackoverflow.com/users/885736/technix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4278, "favorite_count": 4, "answer_count": 1, "score": 14, "last_activity_date": 1447877862, "creation_date": 1426612521, "last_edit_date": 1426615749, "question_id": 29105540, "link": "https://stackoverflow.com/questions/29105540/aligning-text-in-golang-with-truetype", "title": "Aligning text in golang with Truetype", "body": "<p>I am trying to render some text on a png in a Golang project using freetype/truetype. As you can see from the attachment, I am trying to render 4 letters in columns - each letter centered in the column. Have used the truetype api to get bounds and widths of the glyphs but have been unable to convert these to give me an accurate offset for each glyph. For example with the <code>O</code> glyph, given the font I using. I get the following dimensions:</p>\n\n<p><code>Hmetric {AdvanceWidth:543 LeftSideBearing:36}\nBounds {XMin:0 YMin:-64 XMax:512 YMax:704}\nAdvance width: 512\n</code></p>\n\n<p>With the last dimension being returned from <a href=\"https://godoc.org/code.google.com/p/freetype-go/freetype/truetype#GlyphBuf\" rel=\"noreferrer\">GlyphBuf</a>.</p>\n\n<p>I rendered it using the following:</p>\n\n<p><code>size := 125.00\ntileOffset := (int(tileWidth) * i) + int(tileWidth/2)\npt := freetype.Pt(tileOffset, (imgH-newCharHeight)-int(size))\n</code></p>\n\n<p>How can I use the glyph dimensions returned by truetype to offset the letters correctly? I have tried using the <code>AdvanceWidth</code> as detailed <a href=\"https://code.google.com/p/plotinum/source/browse/vg/font.go\" rel=\"noreferrer\">in this plotinum</a> code (line 160) but that does not give me a consistent result across all glyphs.</p>\n\n<p><img src=\"https://i.stack.imgur.com/B1Jxa.png\" alt=\"Example of rendering\"></p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 4800, "user_id": 46871, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/H7vPm.jpg?s=128&g=1", "display_name": "tlehman", "link": "https://stackoverflow.com/users/46871/tlehman"}, "is_accepted": false, "score": 1, "last_activity_date": 1426612211, "last_edit_date": 1495542137, "creation_date": 1426612211, "answer_id": 29105431, "question_id": 29105275, "link": "https://stackoverflow.com/questions/29105275/golang-bolt-access-to-value/29105431#29105431", "title": "Golang bolt access to value", "body": "<p>Since Go is <a href=\"https://stackoverflow.com/a/1047491/46871\">lexically scoped</a>, you can assign <code>value_variable</code> inside the function you pass into <code>View</code>:</p>\n\n<pre><code>var value_variable []byte\n\n// Access data from within a read-only transactional block.\ndb.View(func(tx *bolt.Tx) error {\n    v := tx.Bucket([]byte(\"people\")).Get([]byte(\"john\"))\n    value_variable = v // &lt;----- ASSIGN IT HERE\n    fmt.Printf(\"John's last name is %s.\\n\", v)\n    return nil\n})\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3184670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e524e2f518dd67cddd0834fbad5bc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3184670", "link": "https://stackoverflow.com/users/3184670/user3184670"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1426612211, "creation_date": 1426611760, "question_id": 29105275, "link": "https://stackoverflow.com/questions/29105275/golang-bolt-access-to-value", "title": "Golang bolt access to value", "body": "<pre><code>var value_variable\n        // Access data from within a read-only transactional block.\n    db.View(func(tx *bolt.Tx) error {\n        v := tx.Bucket([]byte(\"people\")).Get([]byte(\"john\"))\n        fmt.Printf(\"John's last name is %s.\\n\", v)\n        return nil\n    })\n</code></pre>\n\n<p>How to assign john value to value_variable?</p>\n"}, {"tags": ["types", "interface", "go", "io"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426610286, "post_id": 29104154, "comment_id": 46439443, "body": "If you need something like that then define it in your own code/package. In many places the standard packages only define what they use/need rather than a complete set. As far as I can tell, <code>bufio.Reader</code> is the only thing in the standard packages that would implement your <code>RuneWriter</code> (and <code>bufio.Reader</code> has many other methods that are also not a part of any interface)."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426610598, "post_id": 29104154, "comment_id": 46439668, "body": "@DaveC: But shouldn&#39;t they define what they expect users will need rather than just what they themselves need?"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1426610674, "post_id": 29104154, "comment_id": 46439731, "body": "Not when that means guessing what any user anywhere might ever need. Interfaces are trivial to define as you need them. It would help nothing to have added <code>RuneWriter</code> to the io package."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426610895, "post_id": 29104154, "comment_id": 46439871, "body": "As I said, if you have a place in your code where you&#39;d like to call something like <code>WriteRune</code> you can either a) make your own interface and accept it as an argument or b) take an <code>io.Reader</code> argument and if a type assertion to your own interface fails then wrap it a <code>bufio.Reader</code>. Since bufio.Reader is the only thing in the standard packages that implements it (a) effectively just forces your callers to wrap in bufio.Reader (or their own version of something similar)."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426611184, "post_id": 29104154, "comment_id": 46440063, "body": "E.g. see stuff like <a href=\"https://golang.org/pkg/compress/flate/#NewReader\" rel=\"nofollow noreferrer\">compress/flate.NewReader</a> that does <a href=\"https://golang.org/src/compress/flate/inflate.go?s=15326:15399#L685\" rel=\"nofollow noreferrer\">just that</a>."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426615412, "post_id": 29104154, "comment_id": 46442730, "body": "@DaveC: Also, you&#39;re wrong about <code>bufio.Reader</code> being the only thing that implements it. <code>bytes.Buffer</code> also does. And those are the only things that implement <code>io.ByteWriter</code> as well. So why do they have <code>io.ByteWriter</code> but not <code>io.RuneWriter</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 1, "creation_date": 1426625430, "post_id": 29109255, "comment_id": 46448363, "body": "&quot;The Go authors have not seen a need for the RuneWriter interface.&quot; Well that&#39;s my question: why did they not see a need? &quot;It&#39;s not needed in the standard packages or in any of the subrepo packages that they maintain.&quot; But neither is ByteWriter."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1426625535, "post_id": 29109255, "comment_id": 46448425, "body": "Yes, I can define my own interface, but the beauty of having it in the standard library is that it makes third party libraries more compatible with each other than they would be if they all had to define their own."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 3, "creation_date": 1426625911, "post_id": 29109255, "comment_id": 46448609, "body": "But you don&#39;t have to use the same name for an interface to be compatible. I can do <code>type Foobar interface { Read([]byte) (int,error) }</code> and my Foobar interface fully inter-operates with <code>io.Reader</code> or anyone else&#39;s equivalent interface (e.g. I can make functions that take or return my interface and other can pass or assign to <code>io.Reader</code>). It&#39;s the method signature that is important not the interface itself."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4122236"}, "edited": false, "score": 1, "creation_date": 1426625913, "post_id": 29109255, "comment_id": 46448615, "body": "ByteWriter is used in four or five locations in the standard library."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 3, "creation_date": 1426626023, "post_id": 29109255, "comment_id": 46448681, "body": "Again, see examples of places in the standard library where they define ad-hoc interfaces themselves (like the compress packages example I gave earlier). It would be pointless to &quot;standardize&quot; the set of such interfaces."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4122236"}, "is_accepted": false, "score": 4, "last_activity_date": 1426627141, "last_edit_date": 1426627141, "creation_date": 1426624868, "answer_id": 29109255, "question_id": 29104154, "link": "https://stackoverflow.com/questions/29104154/why-is-there-no-runewriter-interface-in-gos-io-package/29109255#29109255", "title": "Why is there no RuneWriter interface in Go&#39;s io package?", "body": "<p>The Go authors define interfaces based on need. They do not define an interface for the purpose of filling out a grid of possible methods. This policy helps to keep the standard library small and simple.</p>\n\n<p>I think they concluded that there's little need for the the RuneWriter interface because they didn't need it in the standard packages or other packages that they maintain.</p>\n\n<p>There's been no demand for the interface outside of the Go team. There are no requests for the interface on the issue tracker, mail list, or the available recorded history for the irc channel.</p>\n\n<p>The other interfaces referenced in the question are used in the standard packages or other packages that the Go authors maintain.</p>\n\n<p>You can define the interface in your own package or code. This is a very useful feature that's somewhat unique to Go.</p>\n"}, {"tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 2, "last_activity_date": 1426657373, "creation_date": 1426657373, "answer_id": 29114890, "question_id": 29104154, "link": "https://stackoverflow.com/questions/29104154/why-is-there-no-runewriter-interface-in-gos-io-package/29114890#29114890", "title": "Why is there no RuneWriter interface in Go&#39;s io package?", "body": "<p>Just a small addition to Be Bop's answer:</p>\n\n<p>Interfaces are useful to define generic functions. E.g. <code>func f(foo interface { Foo() })</code> states something like \"I am function f and I'll do a proper job if you give me something I can Foo() with.\" </p>\n\n<p>Now consider interfaces like <code>RuneScanner</code>. A <code>RuneScanner</code> provides nontrivial methods, especially <code>UnreadRune</code> which cannot be easily simulated by \"lower level\" stuff.</p>\n\n<p>What would a <code>RuneWriter</code> interface be good for? Define a function <code>func g(rw RuneWriter)</code> which announces itself as \"Give me something I can write runes to and I'll do my job!\" ? But there is no real need as this can be simulated trivialy by standard means: Define it as <code>func g(r io.Writer)</code> and just use <code>fmt.Fprintf(r ...)</code> inside.\nIf you want to write runes you have to have the ability to write 1 to 6 (?) bytes anyway and that is what an <code>io.Writer</code> provides. So no need for a <code>RuneWriter</code>.</p>\n\n<p>Would it make code more readable or safer by introducing a <code>RuneWriter</code>? Probably not: A function <code>func g(rw RuneWriter)</code> clearly states that it only wishes to write <em>runes</em> to its argument. That's nice but not a really helpful for writing better programs. A rune is 1 to 6 bytes and the only additional promise that <code>g</code> makes is \"anything written to my argument will be a valid UTF-8 encoded stream\".  This is a very shallow promise.</p>\n"}], "owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1426657373, "creation_date": 1426608616, "question_id": 29104154, "link": "https://stackoverflow.com/questions/29104154/why-is-there-no-runewriter-interface-in-gos-io-package", "title": "Why is there no RuneWriter interface in Go&#39;s io package?", "body": "<p><a href=\"http://golang.org/pkg/io/\" rel=\"nofollow\">Go's <code>io</code> package</a> contains (among others) the following interfaces:</p>\n\n<pre><code>type ByteReader interface {\n        ReadByte() (c byte, err error)\n}\n\ntype ByteScanner interface {\n        ByteReader\n        UnreadByte() error\n}\n\ntype ByteWriter interface {\n        WriteByte(c byte) error\n}\n\ntype RuneReader interface {\n        ReadRune() (r rune, size int, err error)\n}\n\ntype RuneScanner interface {\n        RuneReader\n        UnreadRune() error\n}\n</code></pre>\n\n<p>But there is no <code>RuneWriter</code> interface:</p>\n\n<pre><code>type RuneWriter interface {\n        WriteRune(r rune) (size int, err error)\n}\n</code></pre>\n\n<p>Is there a reason that <code>RuneWriter</code> is missing?</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "is_accepted": false, "score": 2, "last_activity_date": 1426607623, "creation_date": 1426607623, "answer_id": 29103761, "question_id": 29103107, "link": "https://stackoverflow.com/questions/29103107/interface-reference-shows-weird-output/29103761#29103761", "title": "Interface reference shows weird output", "body": "<p>Regarding your first question - if you add <code>fmt.Println(reflect.TypeOf(s))</code> - you'll see that the output is not <code>Succer</code> but <code>*main.Combi</code>. </p>\n\n<p>Now, since it implements the <code>Error</code> interface and has <code>Error() string</code>- <code>Println</code> thinks it's a go error object and prints the output of its <code>Error</code> method.  </p>\n\n<p>Changing the <code>Error</code> method to anything else will stop <code>Println(s)</code> from printing \"Error\". But it won't print \"Success\" either.</p>\n"}, {"tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 3, "last_activity_date": 1426610322, "last_edit_date": 1426610322, "creation_date": 1426607700, "answer_id": 29103795, "question_id": 29103107, "link": "https://stackoverflow.com/questions/29103107/interface-reference-shows-weird-output/29103795#29103795", "title": "Interface reference shows weird output", "body": "<p><code>fmt.Println(s)</code> prints \"Error\" because <code>error</code> is special-cased in the <code>fmt</code> package</p>\n\n<pre><code>        switch v := p.arg.(type) {\n        case error:\n            handled = true\n            defer p.catchPanic(p.arg, verb)\n            p.printArg(v.Error(), verb, depth)\n            return\n\n        case Stringer:\n            handled = true\n            defer p.catchPanic(p.arg, verb)\n            p.printArg(v.String(), verb, depth)\n            return\n        }\n    }\n</code></pre>\n\n<p>The <code>fmt</code> package first checks if an object is a <code>Formatter</code>, <code>GoStringer</code>, <code>error</code>, or <code>Stringer</code> , in that order, to obtain a value to print.</p>\n\n<p>As for your last question, you have to use a variable, not just assign it. Printing them removes the error.</p>\n"}, {"tags": [], "owner": {"reputation": 702, "user_id": 1614036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57b80cdc7bd62ad727bd7cafdb7a0c9f?s=128&d=identicon&r=PG", "display_name": "Juan de Parras", "link": "https://stackoverflow.com/users/1614036/juan-de-parras"}, "is_accepted": false, "score": 0, "last_activity_date": 1426608125, "creation_date": 1426608125, "answer_id": 29103954, "question_id": 29103107, "link": "https://stackoverflow.com/questions/29103107/interface-reference-shows-weird-output/29103954#29103954", "title": "Interface reference shows weird output", "body": "<p>In your first question, if you want to print success with <code>s</code> call a <code>success</code> func:</p>\n\n<pre><code>fmt.Println(s.Success())\n</code></pre>\n\n<p>About the second question, <code>Go</code> compiler check unused variables, so only assign it without use it show compilation error</p>\n"}], "owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 29103795, "answer_count": 3, "score": 0, "last_activity_date": 1426678969, "creation_date": 1426606018, "last_edit_date": 1426678969, "question_id": 29103107, "link": "https://stackoverflow.com/questions/29103107/interface-reference-shows-weird-output", "title": "Interface reference shows weird output", "body": "<p>I am trying to understand Go's interface concept and create following code:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype Failer interface {\n    Error() string\n}\n\ntype Succer interface {\n    Success() string\n}\n\ntype Result interface {\n    Failer\n    Succer\n}\n\ntype Fail struct{}\n\nfunc (*Fail) Error() string {\n    return \"Error\"\n}\n\ntype Succ struct{}\n\nfunc (*Succ) Success() string {\n    return \"Success\"\n}\n\ntype Combi struct{}\n\nfunc (*Combi) Error() string {\n    return \"Error\"\n}\n\nfunc (*Combi) Success() string {\n    return \"Success\"\n}\n\nfunc main() {\n\n    var r Result\n    var s Succer\n\n    c := &amp;Combi{}\n    r = c\n    s = c\n    fmt.Println(r.Error())\n    fmt.Println(s)\n}\n</code></pre>\n\n<p>As output I've got</p>\n\n<pre><code>Error \nError\n</code></pre>\n\n<p>Why? I've expect as output error and success, because <code>s</code> it is the interface of type Succer, there is no error return as string.\nAnd when I change the main function like this:</p>\n\n<pre><code>func main() {\n\n    var r Result\n    var s Succer\n\n    c := &amp;Combi{}\n    r = c\n    s = c\n\n}\n</code></pre>\n\n<p>the compiler complain</p>\n\n<pre><code># command-line-arguments\n.\\sample1.go:42: r declared and not used\n.\\sample1.go:43: s declared and not used\n</code></pre>\n\n<p>Why? I assign variables <code>r</code> and <code>s</code> a reference.</p>\n"}, {"tags": ["mysql", "types", "casting", "go"], "comments": [{"owner": {"reputation": 7514, "user_id": 1008837, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0f67dc852a25a639e13fafbec62eec69?s=128&d=identicon&r=PG&f=1", "display_name": "Pravin Mishra", "link": "https://stackoverflow.com/users/1008837/pravin-mishra"}, "edited": false, "score": 2, "creation_date": 1426606012, "post_id": 29102725, "comment_id": 46436114, "body": "It&#39;s better to use a struct if you know the structure of your database."}, {"owner": {"reputation": 7514, "user_id": 1008837, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0f67dc852a25a639e13fafbec62eec69?s=128&d=identicon&r=PG&f=1", "display_name": "Pravin Mishra", "link": "https://stackoverflow.com/users/1008837/pravin-mishra"}, "edited": false, "score": 1, "creation_date": 1426606098, "post_id": 29102725, "comment_id": 46436181, "body": "Have you looked into this (<a href=\"http://stackoverflow.com/questions/17840963/create-a-map-in-golang-from-database-rows\" title=\"create a map in golang from database rows\">stackoverflow.com/questions/17840963/&hellip;</a>) question?"}, {"owner": {"reputation": 1926, "user_id": 1965994, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0a809780f2ca5a4c0d63404d5cfcc786?s=128&d=identicon&r=PG", "display_name": "g0c00l.g33k", "link": "https://stackoverflow.com/users/1965994/g0c00l-g33k"}, "reply_to_user": {"reputation": 7514, "user_id": 1008837, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0f67dc852a25a639e13fafbec62eec69?s=128&d=identicon&r=PG&f=1", "display_name": "Pravin Mishra", "link": "https://stackoverflow.com/users/1008837/pravin-mishra"}, "edited": false, "score": 0, "creation_date": 1426643905, "post_id": 29102725, "comment_id": 46454860, "body": "@PravinMishra Yes the answer for the question(<a href=\"http://stackoverflow.com/questions/17840963/create-a-map-in-golang-from-database-rows\" title=\"create a map in golang from database rows\">stackoverflow.com/questions/17840963/&hellip;</a>) is what I am doing right now, but my interface{} is all strings because I do a string(col) which I want to avoid as it defies the type concepts. Using struct is a valid alternative, if I can&#39;t do anything I will go with the struct alternative"}], "answers": [{"tags": [], "owner": {"reputation": 5488, "user_id": 1078890, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/Dqula.jpg?s=128&g=1", "display_name": "IamNaN", "link": "https://stackoverflow.com/users/1078890/iamnan"}, "is_accepted": true, "score": 3, "last_activity_date": 1427814298, "last_edit_date": 1495541177, "creation_date": 1427771966, "answer_id": 29360030, "question_id": 29102725, "link": "https://stackoverflow.com/questions/29102725/go-sql-driver-get-interface-column-values/29360030#29360030", "title": "Go SQL driver get interface{} column values", "body": "<p>See <a href=\"https://stackoverflow.com/questions/20271123/go-lang-sql-in-parameters\">this https://stackoverflow.com/questions/20271123/go-lang-sql-in-parameters</a> answer which my answer is based on. Using that you can do something like this:</p>\n\n<pre><code>var myMap = make(map[string]interface{})\nrows, err := db.Query(\"SELECT * FROM myTable\")\ndefer rows.Close()\nif err != nil {\n    log.Fatal(err)\n}\ncolNames, err := rows.Columns()\nif err != nil {\n    log.Fatal(err)\n}\ncols := make([]interface{}, len(colNames))\ncolPtrs := make([]interface{}, len(colNames))\nfor i := 0; i &lt; len(colNames); i++ {\n    colPtrs[i] = &amp;cols[i]\n}\nfor rows.Next() {\n    err = rows.Scan(colPtrs...)\n    if err != nil {\n        log.Fatal(err)\n    }\n    for i, col := range cols {\n        myMap[colNames[i]] = col\n    }\n    // Do something with the map\n    for key, val := range myMap {\n        fmt.Println(\"Key:\", key, \"Value Type:\", reflect.TypeOf(val))\n    }\n}\n</code></pre>\n\n<p>Using the reflect package you can then get the Type for each column as needed as demonstrated with the loop at the end.</p>\n\n<p>This is generic and will work with any table, number of columns etc.</p>\n"}, {"tags": [], "owner": {"reputation": 626, "user_id": 4001671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NexwL.png?s=128&g=1", "display_name": "philip mudenyo", "link": "https://stackoverflow.com/users/4001671/philip-mudenyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1597061965, "creation_date": 1597061965, "answer_id": 63340069, "question_id": 29102725, "link": "https://stackoverflow.com/questions/29102725/go-sql-driver-get-interface-column-values/63340069#63340069", "title": "Go SQL driver get interface{} column values", "body": "<p>AFter a long struggle i found out the solution. Check belowfunction that converts sql.RawBytes to Int64. This can be easily altered to fit any data type</p>\n<pre><code>func GetInt64ColumnValue(payload sql.RawBytes) (int64, error) {\n\ncontent := reflect.ValueOf(payload).Interface().(sql.RawBytes) // convert to bytes\ndata := string(content) //convert to string  \ni, err := strconv.ParseInt(data,10,64)  // convert to int or your preferred data type\n\nif err != nil {\n\n    log.Printf(&quot;got error converting %s to int error %s &quot;,data,err.Error())\n    return 0, err\n}\n\nreturn i, nil\n</code></pre>\n<p>}</p>\n"}], "owner": {"reputation": 1926, "user_id": 1965994, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0a809780f2ca5a4c0d63404d5cfcc786?s=128&d=identicon&r=PG", "display_name": "g0c00l.g33k", "link": "https://stackoverflow.com/users/1965994/g0c00l-g33k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3995, "favorite_count": 1, "accepted_answer_id": 29360030, "answer_count": 2, "score": 2, "last_activity_date": 1597061965, "creation_date": 1426605053, "question_id": 29102725, "link": "https://stackoverflow.com/questions/29102725/go-sql-driver-get-interface-column-values", "title": "Go SQL driver get interface{} column values", "body": "<p>I am trying to use go sql driver to read from database tables and I am converting the values to <code>[]map[string]interface{}</code>. The column name is the key of the map and the values are of <code>interface{}</code>. I am adding all the columns into an array. I am using the code sample for \"RawBytes\" at <a href=\"https://github.com/go-sql-driver/mysql/wiki/Examples\" rel=\"nofollow\">https://github.com/go-sql-driver/mysql/wiki/Examples</a> as an example to start with.</p>\n\n<p>However, in the example -all the column values are converted to <code>string</code> as follows,</p>\n\n<pre><code>// Fetch rows\nfor rows.Next() {\n    // get RawBytes from data\n    err = rows.Scan(scanArgs...)\n    if err != nil {\n        panic(err.Error()) // proper error handling instead of panic in your app\n    }\n\n    // Now do something with the data.\n    // Here we just print each column as a string.\n    var value string\n    for i, col := range values {\n        // Here we can check if the value is nil (NULL value)\n        if col == nil {\n            value = \"NULL\"\n        } else {\n            value = string(col) //ATTN : converted to string here\n        }\n        fmt.Println(columns[i], \": \", value)\n    }\n    fmt.Println(\"-----------------------------------\")\n}\n</code></pre>\n\n<p>Is there a way to retain it as <code>interface{}</code> so I can do the necessary type casting while using the columns from <code>[]map[string]interface{}</code></p>\n"}, {"tags": ["concurrency", "go", "channel"], "comments": [{"owner": {"reputation": 1599, "user_id": 2623893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/t40xu.png?s=128&g=1", "display_name": "kwolfe", "link": "https://stackoverflow.com/users/2623893/kwolfe"}, "edited": false, "score": 0, "creation_date": 1426612583, "post_id": 29101909, "comment_id": 46441038, "body": "Please let me know if this needs clarification..."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1426616422, "post_id": 29101909, "comment_id": 46443339, "body": "I&#39;ve read this a number of times, and still don&#39;t really know what you&#39;re asking for. I think you&#39;ve put the cart before the horse here. You defined some hierarchy of types, with somewhat confused responsibilities, and now you&#39;re trying to shoehorn in a concurrency pattern to make it work. Figure out how you&#39;re going to solve the concurrency problem first, and then work on the structure."}, {"owner": {"reputation": 1599, "user_id": 2623893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/t40xu.png?s=128&g=1", "display_name": "kwolfe", "link": "https://stackoverflow.com/users/2623893/kwolfe"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1426616920, "post_id": 29101909, "comment_id": 46443622, "body": "Okay, thank you for your input. I mainly just wanted to convey what I&#39;m trying to accomplish by showing the existing structure, mainly the Test struct. I need a way to tie together a slice of Test and ensure that at any given time, only n Prep functions are running at a time and n Validator functions are running at a time across all of them (whether they are a child or parent test. The main pattern I&#39;m looking to solve for is how to fan in (sending a function) and also retrieve the result of that function from the go routine it was on."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1426617701, "post_id": 29101909, "comment_id": 46444062, "body": "Starting from the premise that you can send an arbitrary function down a channel and somehow get the result from another goroutine is a problem (at least without requiring a specifically crafted closure).  Maybe this can be of help <a href=\"http://blog.golang.org/pipelines\" rel=\"nofollow noreferrer\">blog.golang.org/pipelines</a>? It covers fan-in, fan-out, bounded parallelism, etc."}], "answers": [{"tags": [], "owner": {"reputation": 1599, "user_id": 2623893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/t40xu.png?s=128&g=1", "display_name": "kwolfe", "link": "https://stackoverflow.com/users/2623893/kwolfe"}, "is_accepted": false, "score": 0, "last_activity_date": 1426715711, "creation_date": 1426715711, "answer_id": 29133434, "question_id": 29101909, "link": "https://stackoverflow.com/questions/29101909/concurrency-pattern-help-fan-in-and-return-result/29133434#29133434", "title": "Concurrency pattern help - Fan in and return result?", "body": "<p>Here is the solution I came up with. I am welcome to any criticism or better approach and will accept that answer. I created a private transport struct which contains my function and a channel in which to return the result on:</p>\n\n<pre><code>package conctest\n\nimport (\n    \"sync\"\n    \"time\"\n)\n\nfunc New() *ConcTest {\n    return &amp;ConcTest{nil, 1, 1, make(chan *prepperTransport), make(chan *validatorTransport), nil}\n}\n\ntype ConcTest struct {\n    Tests                []*Test\n    ConcurrentPreppers   int\n    ConcurrentValidators int\n\n    prepperChan   chan *prepperTransport\n    validatorChan chan *validatorTransport\n\n    testSync *sync.WaitGroup\n}\n\nfunc (ct *ConcTest) Run() {\n    // start up prepper workers\n    for i := 0; i &lt; ct.ConcurrentPreppers; i++ {\n        go func() {\n            for p := range ct.prepperChan {\n                time.Sleep(time.Second)\n                p.Result &lt;- p.Prepper()\n            }\n        }()\n    }\n\n    // start up validator workers\n    for i := 0; i &lt; ct.ConcurrentValidators; i++ {\n        go func() {\n            for v := range ct.validatorChan {\n                time.Sleep(time.Second)\n                v.Result &lt;- v.Validator()\n            }\n        }()\n    }\n\n    // start parent tests, child tests will be called recursively\n    ct.testSync = &amp;sync.WaitGroup{}\n    for _, t := range ct.Tests {\n        ct.testSync.Add(1)\n        go ct.runTest(t)\n    }\n\n    // wait for all tests to complete\n    ct.testSync.Wait()\n}\n\nfunc (ct *ConcTest) runTest(t *Test) {\n    // test is a pass until failure encountered\n    t.Pass = true\n\n    // run and wait for prep to finish\n    pt := &amp;prepperTransport{t.Prepper, make(chan PrepperResult)}\n    ct.prepperChan &lt;- pt\n    pr := &lt;-pt.Result\n\n    // return on prep failure\n    if pr != nil {\n        t.Pass = false\n        t.Errors = append(t.Errors, pr)\n        ct.testSync.Done()\n        return\n    }\n\n    // run the validator until pass or max runs reached\n    for {\n        // sleep for given frequency\n        time.Sleep(t.Frequency)\n\n        // send the validator to the queue\n        t.Runs++\n        vt := &amp;validatorTransport{t.Validator, make(chan ValidatorResult)}\n        ct.validatorChan &lt;- vt\n\n        // wait for validator response\n        vr := &lt;-vt.Result\n\n        // append error to the test\n        if vr.Error != nil {\n            t.Errors = append(t.Errors, vr.Error)\n        }\n\n        // break on pass\n        if vr.Pass {\n            break\n        }\n\n        // break on max attempts\n        if t.MaxRuns == t.Runs {\n            t.Pass = false\n            break\n        }\n    }\n\n    // break on validator failure\n    if !t.Pass {\n        ct.testSync.Done()\n        return\n    }\n\n    // run all children tests\n    for _, c := range t.Children {\n        ct.testSync.Add(1)\n        go ct.runTest(c)\n    }\n\n    ct.testSync.Done()\n    return\n}\n\ntype Prepper func() PrepperResult\ntype PrepperResult error\ntype prepperTransport struct {\n    Prepper Prepper\n    Result  chan PrepperResult\n}\n\ntype Validator func() ValidatorResult\ntype ValidatorResult struct {\n    Pass  bool\n    Error error\n}\ntype validatorTransport struct {\n    Validator Validator\n    Result    chan ValidatorResult\n}\n\ntype Test struct {\n    Convey    string\n    Details   string\n    Frequency time.Duration\n    MaxRuns   int\n\n    Prepper   Prepper\n    Validator Validator\n    Children  []*Test\n\n    Runs   int\n    Errors []error\n    Pass   bool\n}\n</code></pre>\n"}], "owner": {"reputation": 1599, "user_id": 2623893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/t40xu.png?s=128&g=1", "display_name": "kwolfe", "link": "https://stackoverflow.com/users/2623893/kwolfe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1426715711, "creation_date": 1426602917, "question_id": 29101909, "link": "https://stackoverflow.com/questions/29101909/concurrency-pattern-help-fan-in-and-return-result", "title": "Concurrency pattern help - Fan in and return result?", "body": "<p>I am writing up a quick concurrent integration testing package. I've already written the POC and now I'm trying to come up with a new pattern for it. I wish to adhere to the following rules for it:</p>\n\n<ul>\n<li>A test suite may have many tests </li>\n<li>A test suite must have n workers for running TestPreppers </li>\n<li>A test suite must have n workers for running TestValidators </li>\n<li>A test must pass prep before running validation </li>\n<li>A test may have many children </li>\n<li>A test must pass validation before running children tests</li>\n</ul>\n\n<p>Here is the structure:</p>\n\n<pre><code>package conctest\n\nfunc New() *TestSuite {\n    return &amp;TestSuite{nil, 1, 1, make(chan TestPrepper), make(chan TestValidator)}\n}\n\ntype TestSuite struct {\n    Tests                []*Test\n    ConcurrentPreppers   int\n    ConcurrentValidators int\n\n    prepperChan   chan TestPrepper\n    validatorChan chan TestValidator\n}\n\ntype TestPrepper func() error\ntype TestValidator func() ValidatorResult\n\ntype ValidatorResult struct {\n    Pass  bool\n    Error error\n}\n\ntype Test struct {\n    Convey    string\n    Details   string\n    Prepper   TestPrepper\n    Validator TestValidator\n    MaxRuns   int\n    Children  []*Test\n\n    runs   int\n    errors []error\n}\n</code></pre>\n\n<p>I'm having trouble coming up with a concurrency design that meets the requirements. I need to expose a method from TestSuite that is available to Test that will allow it to send its work to the TestSuites workers as well as return the result back to the Test.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 2, "creation_date": 1426596755, "post_id": 29099275, "comment_id": 46429471, "body": "This is a flaw in the design of <code>time.Duration</code>."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426608762, "post_id": 29099275, "comment_id": 46438347, "body": "Don&#39;t ignore errors and don&#39;t use <code>ParseDuration</code> for initialize <code>time.Duration</code> values. Use <code>d := 4 * time.Second</code> instead."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "reply_to_user": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 1, "creation_date": 1426608898, "post_id": 29099275, "comment_id": 46438436, "body": "@\u0440\u0430\u0439\u0442\u0444\u043e it&#39;s your understanding of types that is flawed. An added method wouldn&#39;t help (would it take/return float64, float32, int, int64??) and wouldn&#39;t look/read any better than a simple type conversion."}, {"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426609244, "post_id": 29099275, "comment_id": 46438685, "body": "@DaveC You&#39;re wrong. Dividing a duration by another one should never result in a duration. It&#39;s mathematically incorrect."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1426609816, "post_id": 29099275, "comment_id": 46439101, "body": "Most languages deal with <b>types</b> and do <i>not</i> deal with <b>units</b> or dimensional analysis. The fact that a (e.g.) a speed divided by time yields a length is irrelevant to typed languages and only relevant to a math language that understands units. As I said, if you don&#39;t understand this then you don&#39;t understand basic typed languages."}], "answers": [{"tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": true, "score": 3, "last_activity_date": 1426597271, "last_edit_date": 1426597271, "creation_date": 1426596256, "answer_id": 29099418, "question_id": 29099275, "link": "https://stackoverflow.com/questions/29099275/why-does-dividing-two-time-durations-in-go-result-in-another-time-duration/29099418#29099418", "title": "Why does dividing two time.durations in Go result in another time.duration?", "body": "<p>It is so because <code>time.Duration</code> is <code>int64</code>. See documentation of <a href=\"http://golang.org/pkg/time/#Duration\" rel=\"nofollow\">time package</a>. </p>\n\n<p>You make a division of 4000000000 (4s) by 4 (4ns) and you get 1000000000 (1s). You should look at the operations as they where integers not typed values. Type <code>Duration</code> make it look like a physical value but for division operation it is just a number.</p>\n"}, {"tags": [], "owner": {"reputation": 20703, "user_id": 2805033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TasHL.jpg?s=128&g=1", "display_name": "Ben Darnell", "link": "https://stackoverflow.com/users/2805033/ben-darnell"}, "is_accepted": false, "score": 5, "last_activity_date": 1426596773, "creation_date": 1426596773, "answer_id": 29099590, "question_id": 29099275, "link": "https://stackoverflow.com/questions/29099275/why-does-dividing-two-time-durations-in-go-result-in-another-time-duration/29099590#29099590", "title": "Why does dividing two time.durations in Go result in another time.duration?", "body": "<p>Mathematically, you're correct: dividing two time.Durations should result in a dimensionless quantity. But that's not how go's type system works. Any mathematical operation results in a value of the same type as the inputs. You'll have to explicitly cast the result of the division to an int64 to get an \"untyped\" quantity.</p>\n"}, {"tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 2, "last_activity_date": 1426596869, "creation_date": 1426596869, "answer_id": 29099620, "question_id": 29099275, "link": "https://stackoverflow.com/questions/29099275/why-does-dividing-two-time-durations-in-go-result-in-another-time-duration/29099620#29099620", "title": "Why does dividing two time.durations in Go result in another time.duration?", "body": "<p>There are no units attached to a <code>time.Duration</code>.  A <code>time.Duration</code> represents the physical concept of a duration (measured in seconds and having a unit) by providing a distinct type, namely the <code>time.Duration</code> type.  But technically it is just a <code>uint64</code>.</p>\n\n<p>If you try to attach actual units to types you'll enter unit-hell: What would a (time.Duration * time.Duration)/acceleration.Radial * mass.MetricTon be? Undefined most probably.</p>\n"}], "owner": {"reputation": 10253, "user_id": 270572, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZlhT7.jpg?s=128&g=1", "display_name": "Mike Dewar", "link": "https://stackoverflow.com/users/270572/mike-dewar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 867, "favorite_count": 1, "accepted_answer_id": 29099418, "answer_count": 3, "score": 5, "last_activity_date": 1426597271, "creation_date": 1426595847, "question_id": 29099275, "link": "https://stackoverflow.com/questions/29099275/why-does-dividing-two-time-durations-in-go-result-in-another-time-duration", "title": "Why does dividing two time.durations in Go result in another time.duration?", "body": "<p>I don't understand what it means to divide a <code>time.Duration</code> in Go. </p>\n\n<p>For example, this is super lovely:</p>\n\n<pre><code>d,_ := time.ParseDuration(\"4s\")\nfmt.Println(d/4)\n</code></pre>\n\n<p>print <code>1s</code>. Which is ace, because (naively) 4 seconds divided by 4 is 1 second. </p>\n\n<p>It gets a little confusing though when we find out that the 4 in the denominator has to be a duration. So although:</p>\n\n<pre><code>d1 := time.Duration(4)\nfmt.Println(d/d1)\n</code></pre>\n\n<p>also prints <code>1s</code>, we know that <code>d1</code> is actually <code>4ns</code> and I'm entirely unconvinced that 4 seconds divided by 4 nanoseconds is 1 second.</p>\n\n<p>I'm confused because a duration divided by duration should be dimensionless (I think, right?), whereas a duration divided by a dimensionless number should have units of time. </p>\n\n<p>And I know that type != unit, but I'm clearly misunderstanding something, or quite possibly a set of things. Any help to clear this up would be most appreciated! </p>\n\n<p>Here is a go playground of the above examples. <a href=\"https://play.golang.org/p/Ny2_ENRlX6\" rel=\"noreferrer\">https://play.golang.org/p/Ny2_ENRlX6</a>. And just for context, I'm trying to calculate the average time between events. I can fall back to using floats for seconds, but am trying to stay in <code>time.Duration</code> land. </p>\n"}, {"tags": ["intellij-idea", "go", "google-go-idea-plugin"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426608478, "post_id": 29098128, "comment_id": 46438128, "body": "IMO you are misusing <a href=\"https://golang.org/doc/code.html#GOPATH\" rel=\"nofollow noreferrer\">GOPATH</a>. If you just want to separate fetched stuff from your stuff then a single <a href=\"https://golang.org/doc/articles/go_command.html?h=GOPATH#tmp_3\" rel=\"nofollow noreferrer\"><code>GOPATH=&#47;path&#47;to&#47;fetched&#47;stuff:&#47;path&#47;to&#47;your&#47;own&#47;stuff</code></a> is all you need. See <code>go help gopath</code>."}, {"owner": {"reputation": 944, "user_id": 817019, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xhltk.jpg?s=128&g=1", "display_name": "snuk182", "link": "https://stackoverflow.com/users/817019/snuk182"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426611035, "post_id": 29098128, "comment_id": 46439968, "body": "@dave-c , will turn to this approach, if did not find a way to provide env codebase to session-narrowed GOPATH with IDEA plugin. I really don&#39;t need my code in a global GOPATH for now - it&#39;s ugly and even sometimes self-repeating (I&#39;ve started learning Golang a while ago, so had a bit of mess of little educational projects around)"}], "answers": [{"comments": [{"owner": {"reputation": 944, "user_id": 817019, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xhltk.jpg?s=128&g=1", "display_name": "snuk182", "link": "https://stackoverflow.com/users/817019/snuk182"}, "edited": false, "score": 1, "creation_date": 1436944979, "post_id": 29424259, "comment_id": 50819425, "body": "Indeed. Works as I expect since 0.9.371. Thanks!"}, {"owner": {"reputation": 3071, "user_id": 2979435, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c3fac4fcf2b4ae7f3f5a96164b34958e?s=128&d=identicon&r=PG", "display_name": "deFreitas", "link": "https://stackoverflow.com/users/2979435/defreitas"}, "edited": false, "score": 0, "creation_date": 1485381410, "post_id": 29424259, "comment_id": 70908523, "body": "@disniper ok, now can you explain me the steps to do it in intellij?"}, {"owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "reply_to_user": {"reputation": 3071, "user_id": 2979435, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c3fac4fcf2b4ae7f3f5a96164b34958e?s=128&d=identicon&r=PG", "display_name": "deFreitas", "link": "https://stackoverflow.com/users/2979435/defreitas"}, "edited": false, "score": 0, "creation_date": 1485391976, "post_id": 29424259, "comment_id": 70912187, "body": "@deFreitas as this question / answer are very old.  I recommend trying Gogland, the new JetBrains Go IDE, which is currently in private EAP, see: <a href=\"https://www.jetbrains.com/help/go/1.0/getting-started-with-gogland.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/go/1.0/getting-started-with-gogland.html</a>  As for the plugin itself, please see: <a href=\"https://github.com/go-lang-plugin-org/go-lang-idea-plugin/wiki/Documentation#changing-the-go-libraries-go-packages\" rel=\"nofollow noreferrer\">github.com/go-lang-plugin-org/go-lang-idea-plugin/wiki/&hellip;</a>"}, {"owner": {"reputation": 3151, "user_id": 2119946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae444ffe4d22b6b3bffb9114405f41d?s=128&d=identicon&r=PG", "display_name": "Faris Rayhan", "link": "https://stackoverflow.com/users/2119946/faris-rayhan"}, "edited": false, "score": 0, "creation_date": 1506072701, "post_id": 29424259, "comment_id": 79682370, "body": "awesome solution:)"}], "tags": [], "owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "is_accepted": true, "score": 4, "last_activity_date": 1428018148, "creation_date": 1428018148, "answer_id": 29424259, "question_id": 29098128, "link": "https://stackoverflow.com/questions/29098128/golang-idea-plugin-how-to-set-project-specific-gopath/29424259#29424259", "title": "golang-idea-plugin: how to set project-specific GOPATH?", "body": "<p>If you are using the latest version of the plugin <a href=\"https://github.com/go-lang-plugin-org/go-lang-idea-plugin#pre-release-builds\" rel=\"nofollow\">see the repository</a> then you are able to fully customize the GOPATH layout.\nYou can chose to have global entries, which are persisted for all your projects, or per project entries, which are project specific entries.\nYou can really be creative with the options.</p>\n"}], "owner": {"reputation": 944, "user_id": 817019, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xhltk.jpg?s=128&g=1", "display_name": "snuk182", "link": "https://stackoverflow.com/users/817019/snuk182"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6239, "favorite_count": 0, "accepted_answer_id": 29424259, "answer_count": 1, "score": 3, "last_activity_date": 1428018148, "creation_date": 1426592335, "question_id": 29098128, "link": "https://stackoverflow.com/questions/29098128/golang-idea-plugin-how-to-set-project-specific-gopath", "title": "golang-idea-plugin: how to set project-specific GOPATH?", "body": "<p>I'm trying to migrate from Goclipse dev environment to IDEA. Could not find a killing feature in golang-idea-plugin, that exists in Goclipse - each GO project automatically adds itself as a GOPATH item for Eclipse session, so I don't have to put it to global GOPATH manually. This is extremely useful, as I don't want to mix my local code with globally grabbed ones (I don't plan to share my code in any ways), plus several projects are distinguished from each other in their envs. But I did not found any kind of this feature in golang IDEA plugin, so my builds keep failing with follows:</p>\n\n<pre><code>cannot find package \"wnd/modules/network\" in any of:\nC:\\go\\src\\wnd\\modules\\network (from $GOROOT)\nc:\\gopath\\src\\wnd\\modules\\network (from $GOPATH)\n</code></pre>\n\n<p>Are there any cures for this within IDEA? </p>\n"}, {"tags": ["go", "panic"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426607720, "post_id": 29096916, "comment_id": 46437483, "body": "<a href=\"https://golang.org/pkg/fmt/#Scanln\" rel=\"nofollow noreferrer\">RTFM</a> <i>before</i> asking basic questions."}], "answers": [{"tags": [], "owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "is_accepted": true, "score": 7, "last_activity_date": 1426589146, "last_edit_date": 1426589146, "creation_date": 1426588803, "answer_id": 29096978, "question_id": 29096916, "link": "https://stackoverflow.com/questions/29096916/how-to-check-if-scanln-throws-an-error-in-golang/29096978#29096978", "title": "How to check if Scanln throws an error in Golang", "body": "<p><a href=\"https://golang.org/pkg/fmt/#Scanln\">Scanln returns values</a> ... <em>don't ignore them</em>.</p>\n\n<p>You're ignoring two important return values. The count of the scan and an error .. if there was one.</p>\n\n<pre><code>n, err := fmt.Scanln(&amp;inputs.A)\n</code></pre>\n\n<p>...will give you what you need to check. <code>err</code> will tell you that a newline was expected and wasn't found .. because you've tried to store the value in an <code>int</code> .. and it <a href=\"https://golang.org/src/fmt/scan.go#L1061\">errors when the last character in the available value isn't a newline</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 4558422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f600fa16cce9ca85f6d5fc009bdccf1e?s=128&d=identicon&r=PG", "display_name": "symfonian", "link": "https://stackoverflow.com/users/4558422/symfonian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1026, "favorite_count": 1, "accepted_answer_id": 29096978, "answer_count": 1, "score": -4, "last_activity_date": 1426589146, "creation_date": 1426588611, "question_id": 29096916, "link": "https://stackoverflow.com/questions/29096916/how-to-check-if-scanln-throws-an-error-in-golang", "title": "How to check if Scanln throws an error in Golang", "body": "<p>I am new to Go. I've been searching for answers and I know there really is one I just haven't found it. </p>\n\n<p>To better explain my question, here is my code:</p>\n\n<pre><code>func main() {\n\n    ...\n\n    inputs := new(Inputs)\n\n    fmt.Println(\"Input two numbers: \")\n\n    fmt.Scanln(&amp;inputs.A)\n    fmt.Scanln(&amp;inputs.B)\n\n    fmt.Println(\"Sum is:\", inputs.A + inputs.B)\n}\n</code></pre>\n\n<p>And here is my struct:</p>\n\n<pre><code>type Inputs struct {\n    A, B int\n}\n</code></pre>\n\n<p>If I will input '123' for Input A and another '123' for Input B, I will have an output of \"<strong><em>Sum is: 246</em></strong>\". But if I will mistakenly input <em>'123j'</em> , it will no longer work since A and B accept int(s) only. </p>\n\n<p>Now, how to catch the panic from <em>fmt.Scanln</em> or is there a way? Thanks in advance.</p>\n"}, {"tags": ["authentication", "go"], "answers": [{"comments": [{"owner": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "edited": false, "score": 0, "creation_date": 1426589408, "post_id": 29096858, "comment_id": 46424845, "body": "Thanks for the insight. I know that what I am asking would need to be part of some framework of sorts, or be it&#39;s own framework completely. I know there are web frameworks for go like revel and beego. If any of these had some sort of user auth it would be a instant yes to choose that framework over others. I might be thinking too much like a rubyist, and that go has a completely other approach to things, but I feel like this is a very common problem which could, and should, have a normalised solution."}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "reply_to_user": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "edited": false, "score": 0, "creation_date": 1426593421, "post_id": 29096858, "comment_id": 46427182, "body": "Revel and Beego, being &quot;kitchen sink&quot; frameworks, do provide [some[ built-in authentication. I would steer well clear of Beego due to its questionable security practices. Revel does things fairly differently from &#39;idiomatic&#39; Go, which makes using some libraries with it a little trickier.  Still, any &quot;normalised&quot; solution would only apply to a single framework and/or ORM combination. A cursory Google search does show up some libs that might (i.e. I have not used them) close your gap (<a href=\"https://github.com/apexskier/httpauth\" rel=\"nofollow noreferrer\">github.com/apexskier/httpauth</a>). Rails itself is much older than Go though, so it shouldn&#39;t be surprising"}], "tags": [], "owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "is_accepted": true, "score": 8, "last_activity_date": 1426588422, "creation_date": 1426588422, "answer_id": 29096858, "question_id": 29095603, "link": "https://stackoverflow.com/questions/29095603/user-authentication-system-in-go/29096858#29096858", "title": "User Authentication System in GO", "body": "<p>Short answer: no.</p>\n\n<p>Long answer: Ruby on Rails is a framework, Go is a language. Making a \"universal\" authentication system for Go would be a huge task and/or would have to be <em>very</em> opinionated by design, as most auth systems rely on a session store and/or database. Rails can do this (with libs. like Devise) because parts of the framework like ActiveRecord and ActionController provide an abstract API that Devise can talk to.</p>\n\n<p>For the most part, you'll need to tie together a few libraries to get what you need w/ Go. \"Gluing\" things together is a commonly preferred way to do things, and monolithic/kitchen sink frameworks aren't typically favoured.</p>\n\n<p>Some suggestions for libraries:</p>\n\n<ul>\n<li><a href=\"https://github.com/markbates/goth\">https://github.com/markbates/goth</a> (an OAuth/OAuth2 package)</li>\n<li><a href=\"http://www.gorillatoolkit.org/pkg/sessions\">http://www.gorillatoolkit.org/pkg/sessions</a> (user sessions)</li>\n<li><a href=\"https://godoc.org/golang.org/x/crypto/bcrypt\">https://godoc.org/golang.org/x/crypto/bcrypt</a> (password hashing)</li>\n<li><a href=\"https://goji.io/\">https://goji.io/</a> (a micro-framework [think: Sinatra-level] w/ a solid middleware API)</li>\n<li><a href=\"https://github.com/jmoiron/sqlx\">https://github.com/jmoiron/sqlx</a> (a convenience wrapper for Go's standard database/sql package)</li>\n<li><a href=\"http://www.gorillatoolkit.org/pkg/schema\">http://www.gorillatoolkit.org/pkg/schema</a> (a POST form to Go struct library)</li>\n</ul>\n\n<p>These won't give you distinct user types, write your queries for you, etc. I found writing my own \"two user level\" (regular vs. admin) auth to be fairly straightforward using server-side sessions, a single User table and a piece of HTTP middleware that wraps \"need auth\" routes and inspects the session, else it re-directs users to a login page (and saves the current URL for a re-direct after).</p>\n"}], "owner": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1949, "favorite_count": 4, "closed_date": 1426606259, "accepted_answer_id": 29096858, "answer_count": 1, "score": 5, "last_activity_date": 1426589618, "creation_date": 1426584847, "last_edit_date": 1592644375, "question_id": 29095603, "link": "https://stackoverflow.com/questions/29095603/user-authentication-system-in-go", "closed_reason": "Not suitable for this site", "title": "User Authentication System in GO", "body": "<h1>Does a pre-made user authentication system exist in Go?</h1>\n<p>I am coming from a Ruby background, and I would really like to see something similar to Ruby on Rails' <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\">device</a> which is a complete user management system. It takes care of everything from creating forms to hashing and salting passwords. It also takes care of storing data to the database, setting up sessions and more.</p>\n<p>I have found that there is package called <a href=\"https://github.com/markbates/goth\" rel=\"nofollow noreferrer\">goth</a> which allows for social logins (facebook, twitter ++) but it does not handle storage of the user credentials. It also does not allow for &quot;normal&quot; signup with email + password.</p>\n<p>All I can seem to find on this topic for Go is some tutorials on how to make your own basic, very unsafe, user login system.</p>\n<p>I would really love to see a system which takes care of the user auth as well as allows for social login via OAuth/OAuth2. Does anything like this exist?</p>\n<p>The solution I am after would most likely be part of, or a plugin for, a Go web framework.</p>\n<h2>Background</h2>\n<p>I am considering moving my Rails app over to a higher performance framework because my current rails app is using way to much RAM. Thus my eyes went to Go. However, without a solid user auth system I can't convert to Go. To make your own user auth system is not a very good practice.</p>\n"}, {"tags": ["ubuntu", "go", "ls", "pwd"], "comments": [{"owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "edited": false, "score": 1, "creation_date": 1426582530, "post_id": 29094410, "comment_id": 46420826, "body": "Works for me. You should check that the user running the program really have access to the wanted command: the user may not be the one you want/believe\u2026"}, {"owner": {"reputation": 1114, "user_id": 3897121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333fa0a2038028c44b8696869725b69d?s=128&d=identicon&r=PG", "display_name": "cyt", "link": "https://stackoverflow.com/users/3897121/cyt"}, "edited": false, "score": 2, "creation_date": 1426589254, "post_id": 29094410, "comment_id": 46424746, "body": "Check your environmental variable $PATH. It could have been changed in ~/.bashrc file. Otherwise, your code is working without errors."}, {"owner": {"reputation": 126, "user_id": 1057020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v1Kol.jpg?s=128&g=1", "display_name": "longuid", "link": "https://stackoverflow.com/users/1057020/longuid"}, "edited": false, "score": 0, "creation_date": 1426600563, "post_id": 29094410, "comment_id": 46432045, "body": "thanks! is my $PATH wrong, is work!"}, {"owner": {"reputation": 380, "user_id": 6307513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c8cc9dcc5e2a2956f7fdb6a6a7afb39?s=128&d=identicon&r=PG", "display_name": "Thomas Jay Rush", "link": "https://stackoverflow.com/users/6307513/thomas-jay-rush"}, "edited": false, "score": 0, "creation_date": 1494357636, "post_id": 29094410, "comment_id": 74791288, "body": "Why does no-one answer the obvious question here which is where is the &#39;go&#39; executable?"}, {"owner": {"reputation": 16516, "user_id": 1133291, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/538bd3553b7540f411a84101e4cbf294?s=128&d=identicon&r=PG", "display_name": "Gal Ben-Haim", "link": "https://stackoverflow.com/users/1133291/gal-ben-haim"}, "edited": false, "score": 0, "creation_date": 1512626503, "post_id": 29094410, "comment_id": 82336281, "body": "what is your $PATH? if you&#39;re still having problems try to print it from golang"}, {"owner": {"reputation": 1948, "user_id": 1924657, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gumlg.jpg?s=128&g=1", "display_name": "Bryce", "link": "https://stackoverflow.com/users/1924657/bryce"}, "edited": false, "score": 0, "creation_date": 1535078355, "post_id": 29094410, "comment_id": 90942731, "body": "How u run your code? <code>go build</code> or <code>go run</code> or <code>sudo go</code>? And check your go&#39;s owner."}], "answers": [{"tags": [], "owner": {"reputation": 7876, "user_id": 2777965, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/tQaGa.png?s=128&g=1", "display_name": "030", "link": "https://stackoverflow.com/users/2777965/030"}, "is_accepted": true, "score": 0, "last_activity_date": 1539186889, "creation_date": 1539186889, "answer_id": 52744286, "question_id": 29094410, "link": "https://stackoverflow.com/questions/29094410/unix-executable-files-not-found-in-path/52744286#52744286", "title": "Unix executable files not found in $PATH", "body": "<p>First I thought that the issue was caused because the code did not reside in <code>~/go/src/&lt;bitbucket.org&gt;/&lt;username&gt;/</code>, but it turns out that it will also run successful if it is executed from the home directory, i.e. <code>~/</code>. Probably, like already was mentioned in the comments, the commands <code>pwd</code> and <code>ls</code> were not in the path or the program was executed as another user.</p>\n"}], "owner": {"reputation": 126, "user_id": 1057020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v1Kol.jpg?s=128&g=1", "display_name": "longuid", "link": "https://stackoverflow.com/users/1057020/longuid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5961, "favorite_count": 1, "accepted_answer_id": 52744286, "answer_count": 1, "score": 6, "last_activity_date": 1539186889, "creation_date": 1426581103, "last_edit_date": 1592644375, "question_id": 29094410, "link": "https://stackoverflow.com/questions/29094410/unix-executable-files-not-found-in-path", "title": "Unix executable files not found in $PATH", "body": "<p>I have a problem when using Go. Here is my code:</p>\n<pre><code>package main\n\nimport (\n    &quot;fmt&quot;\n    &quot;os/exec&quot;\n)\n\nfunc main() {\n    output, err := exec.Command(&quot;pwd&quot;).Output()\n    fmt.Println(string(output), err)\n\n    output, err = exec.Command(&quot;ls&quot;, &quot;-l&quot;).Output()\n    fmt.Println(string(output), err)\n}\n</code></pre>\n<p>When I run this, I get the following errors.</p>\n<blockquote>\n<p>err exec: &quot;pwd&quot;: executable file not found in $PATH;</p>\n<p>err exec: &quot;ls&quot;: executable file not found in $PATH</p>\n</blockquote>\n<p>I'm using <code>Ubuntu 14.04</code>.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 2, "creation_date": 1426573997, "post_id": 29092658, "comment_id": 46417018, "body": "Fill it with what? Can you show us what you&#39;re trying to do that currently isn&#39;t working?"}, {"owner": {"reputation": 8147, "user_id": 2149741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374188e1ceb9d62123af4aece7c4ee4?s=128&d=identicon&r=PG", "display_name": "Jeremy West", "link": "https://stackoverflow.com/users/2149741/jeremy-west"}, "edited": false, "score": 0, "creation_date": 1426574249, "post_id": 29092658, "comment_id": 46417119, "body": "Or maybe you have some example data? You can&#39;t fill TableValue without creating a ResponseData object. What else do you want to go in there?"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 4675608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bnecFv9ciXs/AAAAAAAAAAI/AAAAAAAACZ4/G_LmsLaK8u4/photo.jpg?sz=128", "display_name": "Rishabh sharma", "link": "https://stackoverflow.com/users/4675608/rishabh-sharma"}, "edited": false, "score": 0, "creation_date": 1426575531, "post_id": 29092780, "comment_id": 46417608, "body": "I am filling like this     tr1 := &amp;dal.TabRow{ \t\t\t\t\t\t\tColName:&quot;V&quot;, \t\t\t\t\t\t\tColValue:&quot;G&quot;, \t\t\t\t\t\t\tColDataType:&quot;St&quot;, \t\t\t\t\t\t}                                                                           row1 := Rows{tr1,}  respdata := ResponseData{         DataType       : &quot;Table&quot;,         Component      : &quot;&quot;,         ParameterName  : &quot;&quot;,         ParameterValue : &quot;&quot;,         TableValue     : []Rows{row1,}, \t}                                                                                                                   This way I am getting error please correct me."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 7, "user_id": 4675608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bnecFv9ciXs/AAAAAAAAAAI/AAAAAAAACZ4/G_LmsLaK8u4/photo.jpg?sz=128", "display_name": "Rishabh sharma", "link": "https://stackoverflow.com/users/4675608/rishabh-sharma"}, "edited": false, "score": 0, "creation_date": 1426575919, "post_id": 29092780, "comment_id": 46417788, "body": "@Rishabhsharma did you change your type definition as I did in <a href=\"http://play.golang.org/p/7HFx0E2J3U\" rel=\"nofollow noreferrer\">play.golang.org/p/7HFx0E2J3U</a>?"}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 1, "last_activity_date": 1426574611, "last_edit_date": 1495540250, "creation_date": 1426574297, "answer_id": 29092780, "question_id": 29092658, "link": "https://stackoverflow.com/questions/29092658/variable-defined-in-golang/29092780#29092780", "title": "Variable defined in Golang", "body": "<p><a href=\"http://golang.org/doc/effective_go.html#slices\" rel=\"nofollow noreferrer\">Slices are reference type</a> (it is already a <a href=\"https://stackoverflow.com/a/21279292/6309\">kind of pointer</a>), so you don't need a pointer to a slice (<code>*[]Rows</code>).</p>\n\n<p>You can use a slice of slices though <code>TableValue []Rows</code>, with <code>Rows</code> being a slice of pointers to <code>TabRow</code>: <code>Rows []*TabRow</code>.</p>\n\n<pre><code>tr11 := &amp;TabRow{ColName: \"cname11\", ColValue: \"cv11\", ColDataType: \"cd11\"}\ntr12 := &amp;TabRow{ColName: \"cname12\", ColValue: \"cv12\", ColDataType: \"cd12\"}\nrow1 := Rows{tr11, tr12}\nrd := &amp;ResponseData{TableValue: []Rows{row1}}\nfmt.Printf(\"%+v\", rd )\n</code></pre>\n\n<p>See <a href=\"http://play.golang.org/p/7HFx0E2J3U\" rel=\"nofollow noreferrer\">this example</a>.</p>\n"}], "owner": {"reputation": 7, "user_id": 4675608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bnecFv9ciXs/AAAAAAAAAAI/AAAAAAAACZ4/G_LmsLaK8u4/photo.jpg?sz=128", "display_name": "Rishabh sharma", "link": "https://stackoverflow.com/users/4675608/rishabh-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 1, "closed_date": 1426583200, "answer_count": 1, "score": -1, "last_activity_date": 1426574611, "creation_date": 1426573789, "last_edit_date": 1426573903, "question_id": 29092658, "link": "https://stackoverflow.com/questions/29092658/variable-defined-in-golang", "closed_reason": "Duplicate", "title": "Variable defined in Golang", "body": "<p>I create a var of type</p>\n\n<pre><code>var RespData   []ResponseData\n\ntype ResponseData struct {\n   DataType       string      \n   Component      string      \n   ParameterName  string      \n   ParameterValue string      \n   TableValue     *[]Rows \n}\n\ntype TabRow struct {\n   ColName     string \n   ColValue    string \n   ColDataType string \n}\n\ntype Rows *[]TabRow\n</code></pre>\n\n<p>I want to fill <code>TableValue</code> of type <code>*[]Rows</code>.\nCan you please tell me with an example by assigning any values in the <code>TableValue</code>.</p>\n"}, {"tags": ["mysql", "go"], "comments": [{"owner": {"reputation": 504, "user_id": 2917573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0647b5305adc7ccd6cecd231525d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Zhube", "link": "https://stackoverflow.com/users/2917573/zhube"}, "edited": false, "score": 0, "creation_date": 1426708321, "post_id": 29090705, "comment_id": 46488514, "body": "You might find the following resource to be useful in your SQL + go adventures: <a href=\"http://go-database-sql.org/\" rel=\"nofollow noreferrer\">go-database-sql.org</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 5, "creation_date": 1426589246, "post_id": 29091002, "comment_id": 46424742, "body": "Correct. <code>?</code> is the parameter format used by mySQL, and <code>$1, $2, etc.</code> is the PostgreSQL format.  The OP should <b>NEVER</b> (ever!) use anything but parameterisation else they be subject to SQL injection attacks."}, {"owner": {"reputation": 277, "user_id": 1246215, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c7c02fbbbc46ed0378d533d3b016b64?s=128&d=identicon&r=PG", "display_name": "viablepath", "link": "https://stackoverflow.com/users/1246215/viablepath"}, "reply_to_user": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1426630029, "post_id": 29091002, "comment_id": 46450610, "body": "Thanks that helped a lot.  @elithrar am I doing the correct parameterization in my above example? Ex.        var userId = params[&quot;user&quot;]"}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1426635316, "post_id": 29091002, "comment_id": 46452441, "body": "The parameterisation I&#39;m talking about is in your SQL query - not your Go code. You should read <a href=\"http://blog.codinghorror.com/give-me-parameterized-sql-or-give-me-death/\" rel=\"nofollow noreferrer\">blog.codinghorror.com/&hellip;</a> to get a better understanding of what I mean and why you want to do it."}], "tags": [], "owner": {"reputation": 16513, "user_id": 95642, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/36cf75fa7751ef674df65ab65cecd255?s=128&d=identicon&r=PG", "display_name": "Drew LeSueur", "link": "https://stackoverflow.com/users/95642/drew-lesueur"}, "is_accepted": true, "score": 12, "last_activity_date": 1426564298, "creation_date": 1426564298, "answer_id": 29091002, "question_id": 29090705, "link": "https://stackoverflow.com/questions/29090705/passing-variable-to-golang-query/29091002#29091002", "title": "Passing Variable to GoLang Query", "body": "<p>I haven't used it, but looking at the docs, is this what you are after?</p>\n\n<pre><code>db.QueryRow(\"SELECT name FROM users WHERE id=?\", userId)\n</code></pre>\n\n<p>I assume it should replace the <code>?</code> with <code>userId</code> in a sql safe way.</p>\n\n<p><a href=\"http://golang.org/pkg/database/sql/#DB.Query\" rel=\"noreferrer\">http://golang.org/pkg/database/sql/#DB.Query</a></p>\n"}], "owner": {"reputation": 277, "user_id": 1246215, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c7c02fbbbc46ed0378d533d3b016b64?s=128&d=identicon&r=PG", "display_name": "viablepath", "link": "https://stackoverflow.com/users/1246215/viablepath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16056, "favorite_count": 1, "accepted_answer_id": 29091002, "answer_count": 1, "score": 7, "last_activity_date": 1426564298, "creation_date": 1426562047, "question_id": 29090705, "link": "https://stackoverflow.com/questions/29090705/passing-variable-to-golang-query", "title": "Passing Variable to GoLang Query", "body": "<p>first off let me say I'm a beginner (started a few days ago) with golang and am in the process of learning how to practically apply the language. My goal is to build a web Rest API that queries a database and provides data back to the user.</p>\n\n<p>I've been able to successfully create a simple API using martini (<a href=\"https://github.com/go-martini/martini\" rel=\"noreferrer\">https://github.com/go-martini/martini</a>) and connect to a MySQL database using <a href=\"https://github.com/go-sql-driver/mysql\" rel=\"noreferrer\">https://github.com/go-sql-driver/mysql</a>. My problem at the current moment is how to pass a variable param from the API request into my query. Here is my current code: </p>\n\n<pre><code>package main\n\nimport (\n    \"github.com/go-martini/martini\"\n    _ \"github.com/go-sql-driver/mysql\"\n    \"database/sql\"\n    \"fmt\"\n)\n\nfunc main() {\n\n  db, err := sql.Open(\"mysql\",\n    \"root:root@tcp(localhost:8889)/test\")\n\n  m := martini.Classic()\n\n  var str string\n\n  m.Get(\"/hello/:user\", func(params martini.Params) string {\n\n  var userId = params[\"user\"] \n\n  err = db.QueryRow(\n      \"select name from users where id = userId\").Scan(&amp;str)\n\n  if err != nil &amp;&amp; err != sql.ErrNoRows {\n    fmt.Println(err)\n  }\n\n  return \"Hello \" + str\n\n  })\n\n  m.Run()\n\n\n  defer db.Close()  \n\n}\n</code></pre>\n\n<p>As you can see my goal is to take the input variable (user) and insert that into a variable called userId. Then I'd like to query the database against that variable to fetch the name. Once that all works I'd like to respond back with the name of the user. </p>\n\n<p>Can anyone help? It would be much appreciated as I continue my journey to learn Go!</p>\n"}, {"tags": ["concurrency", "go", "channels"], "comments": [{"owner": {"reputation": 13244, "user_id": 317915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/86d01c87cc6f22c8445661b72b6b0d78?s=128&d=identicon&r=PG", "display_name": "topskip", "link": "https://stackoverflow.com/users/317915/topskip"}, "edited": false, "score": 1, "creation_date": 1426543481, "post_id": 29087538, "comment_id": 46408441, "body": "My gut feeling is that the order is just by coincidence. But I guess peterSO will prove me wrong."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1426544912, "post_id": 29087538, "comment_id": 46409002, "body": "Correct. This is a poor example of using channels, and doesn&#39;t even ping-pong (usually meaning a call+response) in any way."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 2, "creation_date": 1426545006, "post_id": 29087538, "comment_id": 46409042, "body": "It&#39;s not a coincidence, it&#39;s a side effect of the fact that very little happens besides the sending, and that printing takes longer than sending. when one sender sends and the channel clears, the other one is already ready with their own send, etc. It&#39;s a really bad example of channels as a sync mechanism, and if any of them was doing real work it wouldn&#39;t be that way."}], "answers": [{"tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 7, "last_activity_date": 1426545032, "creation_date": 1426545032, "answer_id": 29088141, "question_id": 29087538, "link": "https://stackoverflow.com/questions/29087538/ordering-of-senders-in-a-go-channel/29088141#29088141", "title": "Ordering of senders in a Go channel", "body": "<p>There is no synchronization between the <code>ping</code> and <code>pong</code> goroutines, therefore there is no guarantee that the responses will print in order.</p>\n\n<p>If you force the goroutines to race with GOMAXPROCS>1, you get random output:</p>\n\n<pre><code>pong\nping\nping\npong\nping\npong\nping\npong\npong\n</code></pre>\n\n<p>This isn't even an example of a \"ping-pong\", since there's is no call and response.</p>\n"}, {"tags": [], "owner": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "is_accepted": false, "score": 1, "last_activity_date": 1426627781, "last_edit_date": 1495541757, "creation_date": 1426627781, "answer_id": 29110074, "question_id": 29087538, "link": "https://stackoverflow.com/questions/29087538/ordering-of-senders-in-a-go-channel/29110074#29110074", "title": "Ordering of senders in a Go channel", "body": "<p>There was a <a href=\"https://stackoverflow.com/questions/29057210/does-the-goroutines-created-in-the-same-goroutines-execute-always-in-order/29060433#29060433\">related question</a> on the order of selection of messages entering a channel recently.</p>\n\n<p>The answer is that the order is <strong>normally non-deterministic</strong>. This is intentional.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4099632"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 29088141, "answer_count": 2, "score": 3, "last_activity_date": 1433756702, "creation_date": 1426542391, "last_edit_date": 1433756702, "question_id": 29087538, "link": "https://stackoverflow.com/questions/29087538/ordering-of-senders-in-a-go-channel", "title": "Ordering of senders in a Go channel", "body": "<p>Consider the ping pong example from <a href=\"http://www.golang-book.com/10/index.htm#section2\" rel=\"nofollow\">http://www.golang-book.com/10/index.htm#section2</a>.</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc pinger(c chan string) {\n    for i := 0; ; i++ {\n        c &lt;- \"ping\"\n    }\n}\n\nfunc ponger(c chan string) {\n    for i := 0; ; i++ {\n        c &lt;- \"pong\"\n    }\n}\n\nfunc printer(c chan string) {\n    for {\n        msg := &lt;- c\n        fmt.Println(msg)\n        time.Sleep(time.Second * 1)\n    }\n}\n\nfunc main() {\n    var c chan string = make(chan string)\n\n    go pinger(c)\n    go ponger(c)\n    go printer(c)\n\n    var input string\n    fmt.Scanln(&amp;input)\n}\n</code></pre>\n\n<p>The authors write:</p>\n\n<blockquote>\n  <p>\"The program will now take turns printing ping and pong.\"</p>\n</blockquote>\n\n<p>However, for this to be true, Go must decide on an order in which senders can send into a channel? Otherwise, there would be no guarantee that a ping would be sent before a pong (i.e. you can't get two pings, or two pongs in a row). How does this work?</p>\n"}, {"tags": ["memory", "types", "interface", "go"], "answers": [{"comments": [{"owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426543399, "post_id": 29087738, "comment_id": 46408410, "body": "Oh! How are they implemented currently??"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426543711, "post_id": 29087738, "comment_id": 46408535, "body": "No idea. Just take a look at the source. It is pure Go now."}], "tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 1, "last_activity_date": 1426543235, "creation_date": 1426543235, "answer_id": 29087738, "question_id": 29087450, "link": "https://stackoverflow.com/questions/29087450/how-are-interfaces-represented-in-go/29087738#29087738", "title": "How are interfaces represented in Go?", "body": "<p>Both are correct, r \"holds\" (tty, *os.File) and that is what the second article says. Note that Laws of Reflection is a bit more high-level and does not mention implementation details (which might change in each release) like discussed in the second article. The diagram of the second article read as follows: \"s contains schematically (b, *Binary). s is of type Stringer, its data is a Binary with value 200 and s's itable contains one method String and the other methods of Binary (or *Binary) are not represented in the itable and thus not accessible for s.</p>\n\n<p>Note that I think the actual implementation of interfaces in Go 1.4 is different from what the second article (Russ's?) states. \"</p>\n"}, {"comments": [{"owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426544057, "post_id": 29087784, "comment_id": 46408684, "body": "Wait...so I didn&#39;t totally get that, but are you saying that they&#39;re referring to different things? When the first article says r holds (tty, * os.File), that isn&#39;t the same as the interface type being referred to in the second article? What happens in casting? Is there a reference to a new itable created (and this must be easy right because an interface is a lightweight wrapper)"}, {"owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "reply_to_user": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426544578, "post_id": 29087784, "comment_id": 46408882, "body": "I have updated my answer. To answer your question about new itables: This is all happening at compile time. So yes, you will have a reference to a new itable when you cast.. but it won&#39;t happen entirely at runtime. They will be set up during program bootstrap (as dispatch tables are in other environments)."}], "tags": [], "owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "is_accepted": true, "score": 3, "last_activity_date": 1426544518, "last_edit_date": 1426544518, "creation_date": 1426543400, "answer_id": 29087784, "question_id": 29087450, "link": "https://stackoverflow.com/questions/29087450/how-are-interfaces-represented-in-go/29087784#29087784", "title": "How are interfaces represented in Go?", "body": "<p>The two articles are explaining a similar concept at two very different levels of granularity. As Volker said, \"Laws of Reflection\" is a basic overview of what is actually happening when you examine objects <em>via reflection</em>. Your second article is examining the dynamic dispatch properties of an interface (which, can be resolved via reflection as well) and how the runtime resolves them <em>at runtime</em>. </p>\n\n<blockquote>\n  <p>According to the second article, the variable r in the first extract should be (tty, io.Reader)</p>\n</blockquote>\n\n<p>Given that understanding, think of an interface at runtime as a \"wrapper object\". It exists to provide information about another object (the <code>itable</code> from your second article) to know where to jump to in the wrapped objects layout (implementation may differ between versions .. but the principle is basically the same for most languages).</p>\n\n<p>This is why calling <code>Read</code> on <code>r</code> works .. first it will check the <code>itable</code> and jump to the function that is laid out for the <code>os.File</code> type. If that was an interface .. you would be looking at another dereference and dispatch (which IIRC isn't applicable at all in Go).</p>\n\n<p>RE: Reflection - you're getting an easily digestible representation of this, in the form of a <code>(value, type)</code> pair (via the <code>reflect.ValueOf</code> and <code>reflect.TypeOf</code> methods).</p>\n"}], "owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1838, "favorite_count": 2, "accepted_answer_id": 29087784, "answer_count": 2, "score": 3, "last_activity_date": 1426544518, "creation_date": 1426542046, "question_id": 29087450, "link": "https://stackoverflow.com/questions/29087450/how-are-interfaces-represented-in-go", "title": "How are interfaces represented in Go?", "body": "<p>I'm reading through two articles right now and am a little confused.</p>\n\n<p>This article - <a href=\"http://blog.golang.org/laws-of-reflection\" rel=\"nofollow noreferrer\">http://blog.golang.org/laws-of-reflection</a> says </p>\n\n<pre><code>&gt; var r io.Reader\ntty, err := os.OpenFile(\"/dev/tty\", os.O_RDWR, 0)\nif err != nil {\n    return nil, err\n}\nr = tty\n</code></pre>\n\n<blockquote>\n  <p>r contains, schematically, the (value, type) pair, (tty, *os.File).\n  Notice that the type *os.File implements methods other than Read; even\n  though the interface value provides access only to the Read method,\n  the value inside carries all the type information about that value.</p>\n</blockquote>\n\n<p>This other article, says </p>\n\n<blockquote>\n  <p>In terms of our example, the itable for Stringer holding type Binary\n  lists the methods used to satisfy Stringer, which is just String:\n  Binary's other methods (Get) make no appearance in the itable.</p>\n</blockquote>\n\n<p><img src=\"https://i.stack.imgur.com/chcO3.png\" alt=\"enter image description here\"></p>\n\n<p>It feels like these two are in opposition. According to the second article, the variable r in the first extract should be (tty, io.Reader), as that is the static type of r. Instead, the article says that *os.File is the type of tty. If the second example were right, then the diagram in the first example should have all of the methods implemented by the Binary type.</p>\n\n<p>Where am I going wrong? </p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 1, "creation_date": 1426543802, "post_id": 29087241, "comment_id": 46408566, "body": "Critically: what do you want to do with that information?"}, {"owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "reply_to_user": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1426549554, "post_id": 29087241, "comment_id": 46410603, "body": "@elithrar need to be able to log it while program is running (for domain specific reasons )"}], "answers": [{"comments": [{"owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "edited": false, "score": 0, "creation_date": 1426549617, "post_id": 29087500, "comment_id": 46410617, "body": "Want to be able to log it while program is running for domain specific reasons"}], "tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 0, "last_activity_date": 1426542218, "creation_date": 1426542218, "answer_id": 29087500, "question_id": 29087241, "link": "https://stackoverflow.com/questions/29087241/finding-imports-and-dependencies-of-a-go-program/29087500#29087500", "title": "Finding imports and dependencies of a go program", "body": "<p>No, I don't think this is possible without the source in a reliable way. Go binaries on different platforms, compiled with different compilers may or may not have (or may not have in the future) these informations compiled in.</p>\n\n<p>But as Go programs are compiled anyway: Why not record this information while you do have access to the source code?</p>\n"}, {"tags": [], "owner": {"reputation": 3233, "user_id": 474545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/914c278e0eefbe4cd86f723c64d74a74?s=128&d=identicon&r=PG", "display_name": "icchanobot", "link": "https://stackoverflow.com/users/474545/icchanobot"}, "is_accepted": true, "score": 2, "last_activity_date": 1426566441, "creation_date": 1426566441, "answer_id": 29091273, "question_id": 29087241, "link": "https://stackoverflow.com/questions/29087241/finding-imports-and-dependencies-of-a-go-program/29091273#29091273", "title": "Finding imports and dependencies of a go program", "body": "<p>I don't think you can do it without using the go binary since go needs to analyze your source code.</p>\n\n<p>It's pretty easy to do but it must have access to go and your source code at run time. Heres a quick example:</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"os/exec\"\n)\n\nfunc main() {\n    cmd := exec.Command(\"go\", \"list\", \"-json\")\n    stdout, err := cmd.Output()\n    if err != nil {\n        println(err.Error())\n        return\n    }\n\n    var list GoList\n    err = json.Unmarshal(stdout, &amp;list)\n\n    for _, d := range list.Deps {\n        fmt.Printf(\" - %s\\n\", d)\n    }\n}\n\ntype GoList struct {\n    Dir        string\n    ImportPath string\n    Name       string\n    Target     string\n    Stale      bool\n    Root       string\n    GoFiles    []string\n    Imports    []string\n    Deps       []string\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "edited": false, "score": 0, "creation_date": 1427255167, "post_id": 29246449, "comment_id": 46699280, "body": "Thanks for this. In what situations would the CWD not be set to source dir? I.e is it safe to assume that this is the likely default for all users in dev mode? Would you allow users to set it somehow?"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "reply_to_user": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "edited": false, "score": 0, "creation_date": 1427256562, "post_id": 29246449, "comment_id": 46699652, "body": "I updated the answer to show how to get the imports for a specific path.  It is not safe to assume that the current working directory is the source directory, but I went with that assumption because the accepted answer also makes that assumption."}, {"owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "edited": false, "score": 0, "creation_date": 1427281758, "post_id": 29246449, "comment_id": 46711105, "body": "Ok thank you so much. And no matter what the source directory is set at,  you expecting all this to break inside a binary as Volkers answer suggests? ( I don&#39;t have a project ready to test this in a binary and might indeed abandon now that I appreciate more the go env situation -never used binaries before :("}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": false, "score": 2, "last_activity_date": 1427256356, "last_edit_date": 1427256356, "creation_date": 1427250567, "answer_id": 29246449, "question_id": 29087241, "link": "https://stackoverflow.com/questions/29087241/finding-imports-and-dependencies-of-a-go-program/29246449#29246449", "title": "Finding imports and dependencies of a go program", "body": "<p>The following code uses the <a href=\"http://godoc.org/go/build\" rel=\"nofollow\">go/build</a> to get the imports for the application in the current working directory.</p>\n\n<pre><code>p, err := build.Default.Import(\".\", \".\", 0)\nif err != nil {\n   // handle error\n}\nfor _, i := range p.Imports {\n   fmt.Println(i)\n}\n</code></pre>\n\n<p>You can build a list of all dependencies using a simple recursive function.</p>\n\n<p>To get the imports for a specific <code>path</code>, use:</p>\n\n<pre><code>p, err := build.Default.Import(path, \".\", 0)\nif err != nil {\n   // handle error\n}\nfor _, i := range p.Imports {\n   fmt.Println(i)\n}\n</code></pre>\n"}], "owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1171, "favorite_count": 0, "accepted_answer_id": 29091273, "answer_count": 3, "score": 0, "last_activity_date": 1427256356, "creation_date": 1426541243, "question_id": 29087241, "link": "https://stackoverflow.com/questions/29087241/finding-imports-and-dependencies-of-a-go-program", "title": "Finding imports and dependencies of a go program", "body": "<p>The <code>go list -json</code> command run from the command line will tell you the imports and dependencies of a go program ( in json format). Is there a way to get this information from within a go program I.e at runtime, either by running the 'go list' command somehow or another way?</p>\n"}, {"tags": ["go", "couchbase", "go-couchbase"], "comments": [{"owner": {"reputation": 3025, "user_id": 1183531, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7f5a8ecd70ee4917a62634d6f8225b37?s=128&d=identicon&r=PG", "display_name": "Hacking Life", "link": "https://stackoverflow.com/users/1183531/hacking-life"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426600875, "post_id": 29086913, "comment_id": 46432265, "body": "I did: vbmap smaller than vbucket list: 18119 vs. []"}], "answers": [{"comments": [{"owner": {"reputation": 3025, "user_id": 1183531, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7f5a8ecd70ee4917a62634d6f8225b37?s=128&d=identicon&r=PG", "display_name": "Hacking Life", "link": "https://stackoverflow.com/users/1183531/hacking-life"}, "edited": false, "score": 0, "creation_date": 1426692774, "post_id": 29119139, "comment_id": 46478462, "body": "Yes I was trying to connect to a memcached bucket. That&#39;s unfortunate it&#39;s not supported - Thanks for the answer"}, {"owner": {"reputation": 154, "user_id": 4476655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w1yQjZw-Hsk/AAAAAAAAAAI/AAAAAAAADGA/qpPQ9_ESvEU/photo.jpg?sz=128", "display_name": "Manik Taneja", "link": "https://stackoverflow.com/users/4476655/manik-taneja"}, "reply_to_user": {"reputation": 3025, "user_id": 1183531, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7f5a8ecd70ee4917a62634d6f8225b37?s=128&d=identicon&r=PG", "display_name": "Hacking Life", "link": "https://stackoverflow.com/users/1183531/hacking-life"}, "edited": false, "score": 1, "creation_date": 1427268423, "post_id": 29119139, "comment_id": 46703796, "body": "You could try with using the stubs in couchbase/gomemcached and see if that might work for you. Set the vbucket number to 0 in all your API calls."}], "tags": [], "owner": {"reputation": 154, "user_id": 4476655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w1yQjZw-Hsk/AAAAAAAAAAI/AAAAAAAADGA/qpPQ9_ESvEU/photo.jpg?sz=128", "display_name": "Manik Taneja", "link": "https://stackoverflow.com/users/4476655/manik-taneja"}, "is_accepted": true, "score": 1, "last_activity_date": 1426673231, "creation_date": 1426673231, "answer_id": 29119139, "question_id": 29086913, "link": "https://stackoverflow.com/questions/29086913/golang-couchbase-integration-throwing-errors-on-setting-getting/29119139#29119139", "title": "Golang Couchbase integration throwing errors on setting/getting", "body": "<p>You are probably trying to connect to a memcached bucket. go-couchbase doesn't support buckets of type memcached.</p>\n"}], "owner": {"reputation": 3025, "user_id": 1183531, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7f5a8ecd70ee4917a62634d6f8225b37?s=128&d=identicon&r=PG", "display_name": "Hacking Life", "link": "https://stackoverflow.com/users/1183531/hacking-life"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "accepted_answer_id": 29119139, "answer_count": 1, "score": 0, "last_activity_date": 1426673231, "creation_date": 1426539866, "question_id": 29086913, "link": "https://stackoverflow.com/questions/29086913/golang-couchbase-integration-throwing-errors-on-setting-getting", "title": "Golang Couchbase integration throwing errors on setting/getting", "body": "<p>Implementing <a href=\"https://github.com/couchbase/go-couchbase\" rel=\"nofollow\">https://github.com/couchbase/go-couchbase</a> </p>\n\n<p>However - no matter what I do - with various types of connections - I get errors when setting/getting keys. </p>\n\n<pre><code>vbmap smaller than vbucket list: 18119 vs. []\n</code></pre>\n\n<p>Code Example below (have tried many variations)</p>\n\n<pre><code>b, err := couchbase.GetBucket(\"http://somebucket:somepassword@myserver:8091/\",\n       \"default\", \"somebucket\")\nmf(err,\"con\")\n\nerr = b.Set(\"somekey\", 0, map[string]interface{}{\"x\": 1})\n  mf(err, \"set\")\n</code></pre>\n"}, {"tags": ["go", "dst"], "comments": [{"owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "edited": false, "score": 2, "creation_date": 1426532015, "post_id": 29084228, "comment_id": 46402287, "body": "First, use a current version (go1.4.2) of Go: <a href=\"http://golang.org/doc/install\" rel=\"nofollow noreferrer\">Getting Started</a>."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1426532262, "post_id": 29084228, "comment_id": 46402429, "body": "I&#39;d say using a more recent version of Go is the only answer, since times and calendars are a pretty hard problem in general, and we should prefer to use standard library functions over writing our own."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426532308, "post_id": 29084228, "comment_id": 46402450, "body": "<code>test.Sub( dur )</code> isn&#39;t legal, you probably meant <code>test.Add(-dur)</code>. A working <a href=\"http://play.golang.org/\" rel=\"nofollow noreferrer\">playground</a> link is helpful when including Go code. (Side note, use <code>dur := time.Minute</code> or <code>dur := 60 * time.Second</code>, etc rather than <code>time.ParseDuration</code> with constants)."}, {"owner": {"reputation": 109, "user_id": 4677561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3920e93144a407cdb3449fec6d6bef24?s=128&d=identicon&r=PG&f=1", "display_name": "hairy_marmite", "link": "https://stackoverflow.com/users/4677561/hairy-marmite"}, "edited": false, "score": 0, "creation_date": 1426532765, "post_id": 29084228, "comment_id": 46402675, "body": "your right. the test.Sub call got yoinked in my cutting and pasting wasn&#39;t supposed to be there...Thanks"}, {"owner": {"reputation": 109, "user_id": 4677561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3920e93144a407cdb3449fec6d6bef24?s=128&d=identicon&r=PG&f=1", "display_name": "hairy_marmite", "link": "https://stackoverflow.com/users/4677561/hairy-marmite"}, "edited": false, "score": 0, "creation_date": 1426532921, "post_id": 29084228, "comment_id": 46402755, "body": "thanks guys just checked with go 1.3.3 (also installed on my system  but debian still set up to use 1.0.2 by default) - as per my edit. Will be trying 1.4 and purge al the old versions. Thanks again."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 531643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1656d6f6699114805fb1958f8ae8a989?s=128&d=identicon&r=PG", "display_name": "SEngstrom", "link": "https://stackoverflow.com/users/531643/sengstrom"}, "edited": false, "score": 1, "creation_date": 1552425940, "post_id": 29085476, "comment_id": 97003320, "body": "Go uses data in the IANA format, but the bundled version that is (possibly) found at runtime is the last choice after trying environment and standard locations in the OS."}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 13, "last_activity_date": 1426534496, "creation_date": 1426534496, "answer_id": 29085476, "question_id": 29084228, "link": "https://stackoverflow.com/questions/29084228/daylight-saving-hours-in-golang/29085476#29085476", "title": "Daylight saving hours in Golang", "body": "<p>Go, like everybody else but Microsoft, uses the <a href=\"http://www.iana.org/time-zones\">IANA Time Zone Database</a> which has regular updates that are included in the current Go release.</p>\n\n<p>You used go1.0.3 which was released in March 2012 (<a href=\"http://golang.org/doc/devel/release.html\">Release History</a>). The British time zone data for 2015 was added later.</p>\n\n<p>ALWAYS use a current version of Go for time zone calculations. </p>\n"}], "owner": {"reputation": 109, "user_id": 4677561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3920e93144a407cdb3449fec6d6bef24?s=128&d=identicon&r=PG&f=1", "display_name": "hairy_marmite", "link": "https://stackoverflow.com/users/4677561/hairy-marmite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6296, "favorite_count": 2, "accepted_answer_id": 29085476, "answer_count": 1, "score": 6, "last_activity_date": 1552425903, "creation_date": 1426530212, "last_edit_date": 1495535214, "question_id": 29084228, "link": "https://stackoverflow.com/questions/29084228/daylight-saving-hours-in-golang", "title": "Daylight saving hours in Golang", "body": "<p>I have been designing a UI for a scheduling interface, where a user can set timers a number of hours into the future. I want to be able to handle daylight saving if possible, I thought it would be quite simple. Whilst checking out time.Time in the golang packages I ran into the following inconsistency, if that is what it is.</p>\n\n<pre><code>package main\n\nimport (\n   \"fmt\"\n   \"time\"\n)\n\n    func main(){\n        const timeFormat = \"2 Jan, 2006 3:04pm (MST)\"\n        test , err := time.Parse( timeFormat, \"25 Oct, 2015 1:59am (BST)\" )\n        fmt.Println( test , test.UTC() , err)\n        dur , _ := time.ParseDuration( \"1m\" )\n        test = test.Add( dur )\n        fmt.Println( test , test.UTC())\n\n        fmt.Println( \"--------------------\"  )\n\n        test , err = time.Parse( timeFormat, \"25 Oct, 2015 2:01am (BST)\" )\n        fmt.Println( test , test.UTC() , err)\n        test = test.Add( dur )\n        fmt.Println( test , test.UTC())\n\n        test = test.Sub( dur )\n        fmt.Println( test , test.UTC())\n     }   \n</code></pre>\n\n<p>I know that 2am on the 25 Oct 2015 in BST will should cause the clock to go back to 1am GMT (UTC). If I increment 1:59am BST by one minute the time does indeed switch to GMT.</p>\n\n<pre><code>2015-10-25 01:59:00 +0100 BST 2015-10-25 00:59:00 +0000 UTC &lt;nil&gt;\n2015-10-25 01:00:00 +0000 GMT 2015-10-25 01:00:00 +0000 UTC\n--------------------\n2015-10-25 02:01:00 +0000 BST 2015-10-25 02:01:00 +0000 UTC &lt;nil&gt;\n2015-10-25 02:02:00 +0000 BST 2015-10-25 02:02:00 +0000 UTC\n</code></pre>\n\n<p>However if I parse a time after 2am in BST I would expect it to switch to GMT just as incrementing the time over the transition would have. In case the transitional code was called by the Add routine I add a minute again but this also does not revert the time to GMT. </p>\n\n<p>I would have expected one of the following to occur</p>\n\n<p>a) for BST to always remain GMT+1</p>\n\n<p>b) to any time where BST is \"invalid\" to automatically change to the correct GMT time (invalid BST is between 2am after the last Sunday in October and 2am after the last Sunday in March the following year)</p>\n\n<p>c) an error to be thrown if a date is created within those dates with BST (and perhaps other daylight saving hours in other countries).</p>\n\n<p>Otherwise I'll have to check if a user enters a date in BST whether that date lies outside BST and adjust or force users to UTC times, which kind of defeats the object of having daylight saving functions built into the library. </p>\n\n<p>Whilst researching I spotted this <a href=\"https://www.youtube.com/watch?v=-5wpm-gesOY\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=-5wpm-gesOY</a>\nand have decided it is definitely not as simple as I had at first assumed...</p>\n\n<p>Any insight or a better way to handle daylight saving times would be appreciated.</p>\n\n<p>Using go version 1.0.2 on Debian Wheezy</p>\n\n<p>Edited: retried using go version 1.3.3 \nand got this output</p>\n\n<pre><code>2015-10-25 01:59:00 +0100 BST 2015-10-25 00:59:00 +0000 UTC &lt;nil&gt;\n2015-10-25 01:00:00 +0000 GMT 2015-10-25 01:00:00 +0000 UTC\n--------------------\n2015-10-25 01:00:00 +0000 GMT 2015-10-25 01:00:00 +0000 UTC &lt;nil&gt;\n2015-10-25 01:01:00 +0000 GMT 2015-10-25 01:01:00 +0000 UTC\n</code></pre>\n\n<p>So appears to work as I expected in later versions...\nHave also found this question\n<a href=\"https://stackoverflow.com/questions/2532729/daylight-saving-time-and-time-zone-best-practices?rq=1\">Daylight saving time and time zone best practices</a>\nSo will be giving it a thorough read.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 5, "creation_date": 1426529541, "post_id": 29083806, "comment_id": 46401019, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/14426366/what-is-an-idiomatic-way-of-representing-enums-in-golang\">What is an idiomatic way of representing enums in golang?</a>"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1426529914, "post_id": 29083806, "comment_id": 46401220, "body": "There&#39;s no way to enforce the value in Go, except via accessor methods to check the value for you."}], "answers": [{"comments": [{"owner": {"reputation": 10650, "user_id": 847869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uk4Ey.jpg?s=128&g=1", "display_name": "tomasz", "link": "https://stackoverflow.com/users/847869/tomasz"}, "edited": false, "score": 1, "creation_date": 1426531570, "post_id": 29084532, "comment_id": 46402065, "body": "This is probably best you can get. Will still allow you for <code>Cluster{a: 10}</code>, but at least would break on <code>x := 10; Cluster{a: x}</code>."}], "tags": [], "owner": {"reputation": 5808, "user_id": 659590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gacpu.jpg?s=128&g=1", "display_name": "Zikes", "link": "https://stackoverflow.com/users/659590/zikes"}, "is_accepted": true, "score": 8, "last_activity_date": 1426531209, "creation_date": 1426531209, "answer_id": 29084532, "question_id": 29083806, "link": "https://stackoverflow.com/questions/29083806/how-do-i-do-enums-in-golang/29084532#29084532", "title": "How do I do enums in golang?", "body": "<pre><code>type FooEnum int\n\nconst (\n  BlahFoo FooEnum = 1 &lt;&lt; iota\n  MooFoo\n)\n\ntype Cluster struct {\n  a FooEnum\n  b int\n}\n</code></pre>\n"}], "owner": {"reputation": 1579, "user_id": 1354514, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e83e6f559891e7489995dfa43e010fa3?s=128&d=identicon&r=PG", "display_name": "steve landiss", "link": "https://stackoverflow.com/users/1354514/steve-landiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3785, "favorite_count": 0, "accepted_answer_id": 29084532, "answer_count": 1, "score": 3, "last_activity_date": 1426531209, "creation_date": 1426528818, "question_id": 29083806, "link": "https://stackoverflow.com/questions/29083806/how-do-i-do-enums-in-golang", "title": "How do I do enums in golang?", "body": "<p>I have</p>\n\n<pre><code>const (\n  BlahFoo = 1 &lt;&lt; iota\n  MooFoo\n)\n</code></pre>\n\n<p>then</p>\n\n<pre><code>type Cluster struct {\n  a  int\n  b  int\n}\n</code></pre>\n\n<p>I want Cluster.a to only be BlahFoo or MooFoo</p>\n\n<p>How do I enforce that?</p>\n"}, {"tags": ["go", "arguments"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1426524533, "post_id": 29082382, "comment_id": 46397800, "body": "Go is a statically typed and compiled language. You have to define the arguments for your function in order for it to compile."}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 8, "creation_date": 1426524741, "post_id": 29082382, "comment_id": 46397944, "body": "Are you looking for <a href=\"http://golang.org/ref/spec#Function_types\" rel=\"nofollow noreferrer\">variadic functions</a>?"}, {"owner": {"reputation": 735, "user_id": 190833, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c214bae9cd1b284a7006c2d725392747?s=128&d=identicon&r=PG", "display_name": "FrontierPsycho", "link": "https://stackoverflow.com/users/190833/frontierpsycho"}, "edited": false, "score": 0, "creation_date": 1426556337, "post_id": 29082382, "comment_id": 46412319, "body": "I&#39;m not looking for variadic functions, no. JimB&#39;s answer covered me."}], "answers": [{"tags": [], "owner": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "is_accepted": true, "score": 3, "last_activity_date": 1426551443, "creation_date": 1426551443, "answer_id": 29089240, "question_id": 29082382, "link": "https://stackoverflow.com/questions/29082382/golang-equivalent-of-javascripts-arguments/29089240#29089240", "title": "Golang equivalent of JavaScript&#39;s arguments?", "body": "<p>Unlike JavaScript where a function can be called with extra arguments not included in the declaration, calls to Go functions must match the function signature.  So there isn't a need for the special <code>arguments</code> global.</p>\n\n<p>With that said, it is possible to write variadic functions that can take a variable number of arguments.  For example, the following function will accept a string followed by any number of integer arguments:</p>\n\n<pre><code>func foo(s string, args ...int) {\n    ...\n}\n</code></pre>\n\n<p>In the function body <code>args</code> will be an <code>[]int</code> slice, so you can determine how many arguments were passed with <code>len</code>, and iterate through them as you would with any other slice.</p>\n\n<p>If you want to accept arguments of any type, you can use the blank interface as the type:</p>\n\n<pre><code>func bar(args ...interface{}) {\n    ...\n}\n</code></pre>\n\n<p>Now <code>args</code> will be an <code>[]interface{}</code> slice.  You can unpack the values passed in using a <a href=\"http://golang.org/ref/spec#Type_assertions\" rel=\"nofollow\">type assertion</a> or <a href=\"http://golang.org/ref/spec#Type_switches\" rel=\"nofollow\">type switch</a>.</p>\n"}], "owner": {"reputation": 735, "user_id": 190833, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c214bae9cd1b284a7006c2d725392747?s=128&d=identicon&r=PG", "display_name": "FrontierPsycho", "link": "https://stackoverflow.com/users/190833/frontierpsycho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 29089240, "answer_count": 1, "score": 0, "last_activity_date": 1426551443, "creation_date": 1426524339, "question_id": 29082382, "link": "https://stackoverflow.com/questions/29082382/golang-equivalent-of-javascripts-arguments", "title": "Golang equivalent of JavaScript&#39;s arguments?", "body": "<p>Is there a golang way to get a function's runtime arguments?</p>\n\n<p>I'm asking because I'm trying to write a function that takes a function and a string, and then outputs the string and the runtime arguments. </p>\n"}, {"tags": ["go", "packages"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 1, "creation_date": 1426524508, "post_id": 29082150, "comment_id": 46397775, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/8231573/rand-package-error-in-go\">rand package error in Go</a>"}], "answers": [{"tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 9, "last_activity_date": 1426524395, "creation_date": 1426524395, "answer_id": 29082397, "question_id": 29082150, "link": "https://stackoverflow.com/questions/29082150/imported-and-not-used-error/29082397#29082397", "title": "imported and not used error", "body": "<p><code>Shape</code> is defined in the shape package. You have to reference it as <code>shape.Shape</code></p>\n"}], "owner": {"reputation": 978, "user_id": 79727, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wx7BQ.png?s=128&g=1", "display_name": "dvallejo", "link": "https://stackoverflow.com/users/79727/dvallejo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3742, "favorite_count": 0, "accepted_answer_id": 29082397, "answer_count": 1, "score": 3, "last_activity_date": 1426524395, "creation_date": 1426523649, "question_id": 29082150, "link": "https://stackoverflow.com/questions/29082150/imported-and-not-used-error", "title": "imported and not used error", "body": "<p>I can't figure out how to create a package and use it. I'm using liteid and go 1.4.2 but this is all reproduce-able from the command-line. I' able to create the shape package it seems but it doesn't load from the main package.</p>\n\n<pre><code>GOPATH=d:\\src\\teaching\\golang\nGOROOT=c:\\go\n\n+teaching\\golang\\pkg\n                  \\windows_386\n                    shape.a\n                \\src\n                  \\packages\n                    packages.go\n                  \\shape\n                    shape.go\n\ngo install shape  -&gt; generates shape.a\n\ngo build packages.go\n# packages\nd:\\src\\teaching\\golang\\src\\packages\\packages.go:5: imported and not used: \"shape\"\nd:\\src\\teaching\\golang\\src\\packages\\packages.go:8: undefined: Shape\nd:\\src\\teaching\\golang\\src\\packages\\packages.go:19: undefined: Circle\n</code></pre>\n\n<p>shape.go</p>\n\n<pre><code>package shape\n\nimport (\n    \"fmt\"\n)\n\nconst (\n    pi = float64(3.14)\n)\n\ntype Shape interface {\n    Area() float64\n}\n\ntype Circle struct {\n    x      int\n    y      int\n    radius int\n}\n\nfunc (c *Circle) Area() float64 {\n    return pi * float64(c.radius*c.radius)\n}\n\nfunc (c Circle) String() string {\n    return fmt.Sprintf(\"{x=%d, y=%d, radius=%d}\", c.x, c.y, c.radius)\n}\n</code></pre>\n\n<p>packages.go</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"shape\"\n)\n\nfunc calculateArea(shapes ...Shape) float64 {\n    sum := float64(0)\n\n    for _, v := range shapes {\n        sum += v.Area()\n    }\n\n    return sum\n}\n\nfunc main() {\n    circle := Circle{x: 1, y: 2, radius: 2}\n\n    fmt.Println(circle, circle.Area(), calculateArea(&amp;circle))\n}\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["javascript", "go"], "comments": [{"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 3, "creation_date": 1426518720, "post_id": 29080252, "comment_id": 46393721, "body": "Related or duplicate: <a href=\"http://stackoverflow.com/questions/28751637/referencing-go-array-in-javascript\">Referencing go array in javascript</a>"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 3, "creation_date": 1426520252, "post_id": 29080252, "comment_id": 46394858, "body": "Please read the linked question <i>and</i> the answers."}, {"owner": {"reputation": 29, "user_id": 3523066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f448d3f3f1784bb1166d20100264621?s=128&d=identicon&r=PG&f=1", "display_name": "Ezechiel", "link": "https://stackoverflow.com/users/3523066/ezechiel"}, "reply_to_user": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1426520317, "post_id": 29080252, "comment_id": 46394916, "body": "Great, thanks a lot (edit : i went through the answers and only seen the solution on second reading ;p)"}], "owner": {"reputation": 29, "user_id": 3523066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f448d3f3f1784bb1166d20100264621?s=128&d=identicon&r=PG&f=1", "display_name": "Ezechiel", "link": "https://stackoverflow.com/users/3523066/ezechiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426518515, "creation_date": 1426518515, "question_id": 29080252, "link": "https://stackoverflow.com/questions/29080252/use-variable-index-for-a-map-in-golang-template", "title": "Use variable index for a map in golang template", "body": "<p>I would like to use a js variable in a go block within a template.\nHere is where i set the variable :</p>\n\n<pre><code>{{ range $tourneyNo, $tourney := . }}\n    &lt;ul&gt;&lt;strong&gt;Num\u00e9ro du tournoi : {{ $tourneyNo }}&lt;/strong&gt;:&lt;/ul&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        var $selectedTourney = {{ $tourneyNo }}; // set $selectedTourney = the last $tourneyNo --let's say it is 209\n    &lt;/script&gt;\n{{ end }}\n</code></pre>\n\n<p>And here is how i would like to use it :</p>\n\n<pre><code>{{ with index . $selectedTourney}} // $selectedTourney should be replaced in the code by 209, as set before\n    {{.Name }}\n{{ end }}\n</code></pre>\n\n<p>The second part of the code is not working ; i want to get the element from . having the index defined previously in the $selectedTourney variable.</p>\n\n<p>The goal intended is that a list of tourneys is displayed, the user clicks on one of theses tourneys and the info about this tourney is displayed, using js, down on the same page.</p>\n\n<p>Thanks a lot for the help :D</p>\n"}, {"tags": ["go", "godoc"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4122236"}, "edited": false, "score": 0, "creation_date": 1426514796, "post_id": 29078473, "comment_id": 46390888, "body": "The zip option specifies the file system to serve, not where to write data. If the zip option is not specified, then godoc serves the directory tree $GOPATH.  If you are publishing your code publicly to bitbucket, github, etc, then use godoc.org to view your doc."}, {"owner": {"reputation": 23, "user_id": 4081042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f050ccb93713046e8c6953e3dae1ec3a?s=128&d=identicon&r=PG&f=1", "display_name": "George Meng", "link": "https://stackoverflow.com/users/4081042/george-meng"}, "edited": false, "score": 0, "creation_date": 1426514972, "post_id": 29078473, "comment_id": 46391013, "body": "Thanks for the quick update. So is there any options to generate documents like Javadoc, so we could host on a different server?"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 1, "creation_date": 1426515581, "post_id": 29078473, "comment_id": 46391463, "body": "Use <a href=\"http://www.gnu.org/software/wget/manual/html_node/Recursive-Download.html\" rel=\"nofollow noreferrer\">wget</a> to download from  <code>godoc -http=:5050</code>."}, {"owner": {"reputation": 23, "user_id": 4081042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f050ccb93713046e8c6953e3dae1ec3a?s=128&d=identicon&r=PG&f=1", "display_name": "George Meng", "link": "https://stackoverflow.com/users/4081042/george-meng"}, "edited": false, "score": 0, "creation_date": 1426520196, "post_id": 29078473, "comment_id": 46394824, "body": "OK, I will take a look at wget. Thank you guys!"}], "owner": {"reputation": 23, "user_id": 4081042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f050ccb93713046e8c6953e3dae1ec3a?s=128&d=identicon&r=PG&f=1", "display_name": "George Meng", "link": "https://stackoverflow.com/users/4081042/george-meng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512686588, "creation_date": 1426513789, "last_edit_date": 1512686588, "question_id": 29078473, "link": "https://stackoverflow.com/questions/29078473/godoc-no-match-found-error", "title": "godoc no match found error", "body": "<p>I am new to <code>Go</code> and am writing a test application and would like to document it. My application is in <code>GOHOME\\src\\myapp</code>.</p>\n\n<p>I could use the following command to start a server and use a browser to view the documents. This worked:</p>\n\n<pre><code>$ godoc -http=\":5050\"\n</code></pre>\n\n<p>However, I would like to generate HTML files and copy the files to a server so other people could read them. I tried:</p>\n\n<pre><code>$ godoc myapp -zip=\"1.zip\"\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$ godoc myapp -zip=\"1.zip\" -index=true\n</code></pre>\n\n<p>I always get the following error:</p>\n\n<blockquote>\n  <p>No match found.</p>\n</blockquote>\n\n<p>What should I do so that I can generate all document files?</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "edited": false, "score": 0, "creation_date": 1426511682, "post_id": 29077738, "comment_id": 46388754, "body": "so what would you recommend in replacement?  a shared <code>utils</code> file that contains all the shared methods within?"}, {"owner": {"reputation": 15253, "user_id": 456188, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ab34924e6d4e07371b890c5655c185a9?s=128&d=identicon&r=PG", "display_name": "Chris Pfohl", "link": "https://stackoverflow.com/users/456188/chris-pfohl"}, "reply_to_user": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "edited": false, "score": 0, "creation_date": 1426512170, "post_id": 29077738, "comment_id": 46389056, "body": "Also, my syntax is horribly off. I&#39;ve been away from Go for a little bit now :)"}, {"owner": {"reputation": 15253, "user_id": 456188, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ab34924e6d4e07371b890c5655c185a9?s=128&d=identicon&r=PG", "display_name": "Chris Pfohl", "link": "https://stackoverflow.com/users/456188/chris-pfohl"}, "reply_to_user": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "edited": false, "score": 0, "creation_date": 1426512193, "post_id": 29077738, "comment_id": 46389075, "body": "And on, just pass the function reference into the other library. That&#39;s no big deal."}, {"owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "edited": false, "score": 0, "creation_date": 1426512477, "post_id": 29077738, "comment_id": 46389277, "body": "I think this was just a design flaw on my part.  I initially thougt that maybe since it was in the main package, I could just do <code>DoSomething()</code> from lib.go, but nope.  The design that fits me best i think, was just moving <code>DoSomething()</code> to <code>utils&#47;utils.go</code> and doing a <code>utils.DoSomething()</code>"}, {"owner": {"reputation": 15253, "user_id": 456188, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ab34924e6d4e07371b890c5655c185a9?s=128&d=identicon&r=PG", "display_name": "Chris Pfohl", "link": "https://stackoverflow.com/users/456188/chris-pfohl"}, "reply_to_user": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "edited": false, "score": 0, "creation_date": 1426512546, "post_id": 29077738, "comment_id": 46389330, "body": "Ok, that&#39;s fine. Just as a future reference: <a href=\"http://play.golang.org/p/R6JWzPpWvr\" rel=\"nofollow noreferrer\">play.golang.org/p/R6JWzPpWvr</a>.  Passing funcs around is a pretty core part of Go, you should definitely learn to do it :) Although use the right tool for the job. A refactor is always nice."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1426525596, "post_id": 29077738, "comment_id": 46398547, "body": "Naming a package util <a href=\"http://blog.golang.org/package-names#TOC_5.\" rel=\"nofollow noreferrer\">is usually bad</a> and a sign you haven&#39;t thought out the relationship between functions and/or the parts of your program."}, {"owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1426526209, "post_id": 29077738, "comment_id": 46398964, "body": "@DaveC you&#39;re probably right.  i&#39;m still a new gopher trying to figure out how to lay out my projects, and how things work.  thanks for linking that.  i looked it over, and makes perfect sense"}], "tags": [], "owner": {"reputation": 15253, "user_id": 456188, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ab34924e6d4e07371b890c5655c185a9?s=128&d=identicon&r=PG", "display_name": "Chris Pfohl", "link": "https://stackoverflow.com/users/456188/chris-pfohl"}, "is_accepted": true, "score": 13, "last_activity_date": 1426512207, "last_edit_date": 1426512207, "creation_date": 1426511597, "answer_id": 29077738, "question_id": 29077678, "link": "https://stackoverflow.com/questions/29077678/how-do-i-access-functions-in-the-main-package/29077738#29077738", "title": "How do I access functions in the main package?", "body": "<p>Go's funtions are first-class.  Pass the named function <code>DoSomething</code> as a parameter to the lib function.</p>\n\n<p>You'd have a circular dependency if anything else was allowed to reference <code>main</code>.</p>\n\n<h2>lib.go</h2>\n\n<pre><code>package subpackage\n...\n\ntype Complete func()\n\nfunc Hello(complete Complete) {\n  fmt.Println(\"hello\")\n  complete()\n}\n</code></pre>\n\n<h2>main.go</h2>\n\n<pre><code>package main\n...\nfunc main() {\n  subpackage.Hello(DoSomethign)\n}\n\nfunc DoSomething() {\n  fmt.Println(\"done!\")\n}\n</code></pre>\n"}], "owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8090, "favorite_count": 1, "accepted_answer_id": 29077738, "answer_count": 1, "score": 9, "last_activity_date": 1426512207, "creation_date": 1426511414, "question_id": 29077678, "link": "https://stackoverflow.com/questions/29077678/how-do-i-access-functions-in-the-main-package", "title": "How do I access functions in the main package?", "body": "<p>Per the setup:</p>\n\n<pre><code>$GOPATH/\n  github.com/ddavison/project/\n    subpackage/\n      lib.go\n    main.go\n</code></pre>\n\n<h3>lib.go</h3>\n\n<pre><code>package subpackage\n...\nfunc Hello() {\n  fmt.Println(\"hello\")\n}\n</code></pre>\n\n<h3>main.go</h3>\n\n<pre><code>package main\n...\nfunc main() {\n  ...\n}\n\nfunc DoSomething() {\n  fmt.Println(\"done!\")\n}\n</code></pre>\n\n<p>From <strong>main.go</strong>, I know that I am able to call <code>lib.go</code>'s functions by doing</p>\n\n<pre><code>import \"github.com/ddavison/project/subpackage\"\nlib.Hello()\n</code></pre>\n\n<p>But how can I do the inverse, <strong>call a method from <code>main.go</code> from <code>lib.go</code></strong>?  How can I call <code>DoSomething()</code> from <code>lib.go</code>?</p>\n"}, {"tags": ["xml", "sorting", "struct", "go"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426525165, "post_id": 29074972, "comment_id": 46398247, "body": "It looks like you&#39;ve just blindly cut-n-pasted code from elsewhere without the slightest clue of what&#39;s going on. That approach just isn&#39;t going to work well for you no matter what you&#39;re doing."}], "answers": [{"comments": [{"owner": {"reputation": 1757, "user_id": 1909569, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0a02066c0046ce77af47b86c30cd720d?s=128&d=identicon&r=PG", "display_name": "Rogier Lommers", "link": "https://stackoverflow.com/users/1909569/rogier-lommers"}, "edited": false, "score": 0, "creation_date": 1426507117, "post_id": 29075205, "comment_id": 46385895, "body": "Thanks for your reply, but I am not able to sort in the first place :). Can you please have a look at my playground (<a href=\"http://play.golang.org/p/O6k9Km1l-C\" rel=\"nofollow noreferrer\">play.golang.org/p/O6k9Km1l-C</a>)? I don&#39;t know what to pass to the sort function."}], "tags": [], "owner": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "is_accepted": false, "score": 4, "last_activity_date": 1426503712, "creation_date": 1426503712, "answer_id": 29075205, "question_id": 29074972, "link": "https://stackoverflow.com/questions/29074972/sort-descending-struct-in-golang/29075205#29075205", "title": "Sort descending struct in golang", "body": "<p>If you have a <code>sort.Interface</code> implementation that sorts in ascending order, you can use the <a href=\"http://golang.org/pkg/sort/#Reverse\" rel=\"nofollow\"><code>sort.Reverse</code></a> function to produce a version that will sort in reverse.</p>\n\n<p>So if <code>data</code> implements <code>sort.Interface</code> and you have a call like:</p>\n\n<pre><code>sort.Sort(data)\n</code></pre>\n\n<p>Then you can switch to descending order by changing it to:</p>\n\n<pre><code>sort.Sort(sort.Reverse(data))\n</code></pre>\n\n<p>Internally, the sorter returned by <code>sort.Reverse</code> just proxies the <code>sort.Interface</code> method calls straight through with the exception of <code>Less</code> where it switches the two arguments.</p>\n"}, {"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426525114, "post_id": 29076341, "comment_id": 46398224, "body": "If you really want to do the sorting by on <code>ReadingListRecords</code> (or just on <code>[]Records</code> as VonC suggests, but definitely <i>not</i> on <code>[]ReadingListRecords</code> as you have it) you just need to change your <code>sort.Interface</code> methods to, you know, actually work with <code>ReadingListRecords</code>. E.g. len(a.Records); a.Record[i], a.Record[j], etc."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 6, "last_activity_date": 1480715023, "last_edit_date": 1495541886, "creation_date": 1426507402, "answer_id": 29076341, "question_id": 29074972, "link": "https://stackoverflow.com/questions/29074972/sort-descending-struct-in-golang/29076341#29076341", "title": "Sort descending struct in golang", "body": "<p>From <a href=\"http://play.golang.org/p/O6k9Km1l-C\" rel=\"nofollow noreferrer\">your example</a>, you are trying to sort the root element <code>&lt;records&gt;</code> instead of the sub-elements <code>&lt;record&gt;</code>.</p>\n\n<p><a href=\"http://play.golang.org/p/8oTCNG0-Di\" rel=\"nofollow noreferrer\">This example</a> works better, with:</p>\n\n<ul>\n<li><code>type ById []Record</code></li>\n<li><code>sort.Sort(sort.Reverse(ById(records.Records)))</code></li>\n</ul>\n\n<p>Your <code>Len()</code>, <code>Swap()</code> and <code>Less()</code> methods remain unchanged, but use as a receiver a <code>Record</code> instance instead of <code>Records</code>.</p>\n\n<p>Output:</p>\n\n<pre><code>{{ records} \n  [{{ record} 64321 http://golang.com} \n   {{ record} 3456 http://www.lommers.org/sampleurl} \n   {{ record} 4 http://www.this-is-my-url.com}]} \n</code></pre>\n\n<hr>\n\n<p>As I mention in \"<a href=\"https://stackoverflow.com/a/40667316/6309\">How to avoid re-implementing sort.Interface for similar golang structs</a>\", this changes with Go 1.8 and <a href=\"https://github.com/golang/go/commit/ad26bb5e3098cbfd7c0ad9a1dc9d38c92e50f06e\" rel=\"nofollow noreferrer\">commit ad26bb5</a>:</p>\n\n<p>You only define a <code>Less()</code> anonymous lambda</p>\n\n<pre><code>a := ById(records.Records)\nsort.Slice(a, func(i, j int) bool {\n    return a[i] &gt; a[j]\n})\n</code></pre>\n"}], "owner": {"reputation": 1757, "user_id": 1909569, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0a02066c0046ce77af47b86c30cd720d?s=128&d=identicon&r=PG", "display_name": "Rogier Lommers", "link": "https://stackoverflow.com/users/1909569/rogier-lommers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1715, "favorite_count": 1, "accepted_answer_id": 29076341, "answer_count": 2, "score": 1, "last_activity_date": 1480715023, "creation_date": 1426502960, "question_id": 29074972, "link": "https://stackoverflow.com/questions/29074972/sort-descending-struct-in-golang", "title": "Sort descending struct in golang", "body": "<p>Please see <a href=\"http://play.golang.org/p/O6k9Km1l-C\" rel=\"nofollow\">this playground</a>. What I want is quiet simple: I want to sort all \"records\" descending. I cannot figure out how. Reason is that my struct contains one or more records and I'm not sure how to handle that. (f.e. <a href=\"http://play.golang.org/p/OHCN9S4G-E\" rel=\"nofollow\">this</a> works fine)</p>\n"}, {"tags": ["string", "go"], "comments": [{"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 1, "creation_date": 1426493784, "post_id": 29071212, "comment_id": 46378696, "body": "I think <code>fmt.Sprintf</code> is the best way to go if you don&#39;t have any complex template processing to do."}, {"owner": {"reputation": 825, "user_id": 2278893, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Et28N.jpg?s=128&g=1", "display_name": "Akash Shinde", "link": "https://stackoverflow.com/users/2278893/akash-shinde"}, "reply_to_user": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1426494858, "post_id": 29071212, "comment_id": 46379148, "body": "yes,thanx for notifying :)"}], "answers": [{"comments": [{"owner": {"reputation": 825, "user_id": 2278893, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Et28N.jpg?s=128&g=1", "display_name": "Akash Shinde", "link": "https://stackoverflow.com/users/2278893/akash-shinde"}, "edited": false, "score": 0, "creation_date": 1426492676, "post_id": 29071287, "comment_id": 46378252, "body": "thanx,this is the simplest solution :)"}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 2, "last_activity_date": 1426494428, "last_edit_date": 1495539894, "creation_date": 1426489627, "answer_id": 29071287, "question_id": 29071212, "link": "https://stackoverflow.com/questions/29071212/implementing-dynamic-strings-in-golang/29071287#29071287", "title": "Implementing dynamic strings in golang", "body": "<p>You could consider the function <a href=\"http://golang.org/pkg/strings/#Replace\" rel=\"nofollow noreferrer\">strings.Replace</a></p>\n\n<pre><code>return Replace(studentName, \"? \", name, 1)\n</code></pre>\n\n<p>With '1', it replaces the first \"? \" it finds in <code>studentName</code>.<br>\nReplace returns a copy of <code>studentName</code>, with <code>\"? \"</code> substituted with <code>name</code>.</p>\n\n<p>This <em>strictly</em> respect the original question (global var with that exact content)</p>\n\n<hr>\n\n<p>Now, if you start changing the question, like for instance with a different content (a global variable <code>studentName := \"Hi %s ,Welcome\"</code>), <em>then</em> you could use <a href=\"https://golang.org/pkg/fmt/#Sprintf\" rel=\"nofollow noreferrer\"><code>fmt.Sprintf()</code></a> as in <a href=\"https://stackoverflow.com/users/1419891/425nesp\">425nesp</a>'s <a href=\"https://stackoverflow.com/a/29072087/6309\">answer</a>  </p>\n\n<pre><code>return fmt.Sprintf(studentName, name)\n</code></pre>\n\n<p>That would use the format 'verbs' <code>%s</code>, default format for string.</p>\n"}, {"tags": [], "owner": {"reputation": 1523, "user_id": 3791794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/378946c1efd33604a905ef2fd60839a1?s=128&d=identicon&r=PG&f=1", "display_name": "Simba", "link": "https://stackoverflow.com/users/3791794/simba"}, "is_accepted": false, "score": 0, "last_activity_date": 1426490147, "last_edit_date": 1426490147, "creation_date": 1426489825, "answer_id": 29071332, "question_id": 29071212, "link": "https://stackoverflow.com/questions/29071212/implementing-dynamic-strings-in-golang/29071332#29071332", "title": "Implementing dynamic strings in golang", "body": "<p>Assuming the global string is always the same you could do.</p>\n\n<pre><code>func returnName(name string) string {\n   buf := bytes.Buffer{}\n   buf.WriteString(\"Hi \")\n   buf.WriteString(name)\n   buf.WriteString(\", welcome\")\n   return buf.String()\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>func returnName(name string) string {\n   return \"Hi \" + name + \", welcome\"\n}\n</code></pre>\n\n<p>if the string is a dynamic template you could use the template package or a simple Replace if there wont be other <code>?</code> marks or Sprintf</p>\n"}, {"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 5, "last_activity_date": 1426491826, "last_edit_date": 1426491826, "creation_date": 1426490573, "answer_id": 29071518, "question_id": 29071212, "link": "https://stackoverflow.com/questions/29071212/implementing-dynamic-strings-in-golang/29071518#29071518", "title": "Implementing dynamic strings in golang", "body": "<p>If your input gets bigger (more complex) or if you need to substitute different values multiple times, then templates are more effective, cleaner and more flexible. Check out the <a href=\"http://golang.org/pkg/text/template/\" rel=\"nofollow\"><code>text/template</code></a> package.</p>\n\n<p>The <code>template</code> package parses your template once, builts a tree from it, and once you need to replace values, it builds the output on the fly.</p>\n\n<p>Take a look at this example:</p>\n\n<pre><code>const templ = `Hi {{.Name}}!\nWelcome {{.Place}}.\nPlease bring {{.ToBring}}\n`\n</code></pre>\n\n<p>You can parse such a template with this line:</p>\n\n<pre><code>t := template.Must(template.New(\"\").Parse(templ))\n</code></pre>\n\n<p>Prepare its input data either as a <code>struct</code> or as a <code>map</code>:</p>\n\n<pre><code>data := map[string]string{\n    \"Name\":    \"Bob\",\n    \"Place\":   \"Home\",\n    \"ToBring\": \"some beers\",\n}\n</code></pre>\n\n<p>And you can have the result with <a href=\"http://golang.org/pkg/text/template/#Template.Execute\" rel=\"nofollow\"><code>Template.Execute()</code></a>:</p>\n\n<pre><code>t.Execute(os.Stdout, data) // Prints result to the standard output\n</code></pre>\n\n<p><strong>Here's the complete, runnable example:</strong> (try it on the <a href=\"http://play.golang.org/p/N-cfFr9Gai\" rel=\"nofollow\">Go Playground</a>)</p>\n\n<pre><code>package main\n\nimport (\n    \"os\"\n    \"text/template\"\n)\n\nfunc main() {\n    data := map[string]string{\n        \"Name\":    \"Bob\",\n        \"Place\":   \"Home\",\n        \"ToBring\": \"some beers\",\n    }\n    t := template.Must(template.New(\"\").Parse(templ))\n    t.Execute(os.Stdout, data) // Prints result to the standard output\n\n    // Now change something:\n    data[\"Name\"] = \"Alice\"\n    data[\"ToBring\"] = \"a Teddy Bear\"\n    t.Execute(os.Stdout, data)\n}\n\nconst templ = `\nHi {{.Name}}!\nWelcome {{.Place}}.\nPlease bring {{.ToBring}}\n`\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Hi Bob!\nWelcome Home.\nPlease bring some beers\n\nHi Alice!\nWelcome Home.\nPlease bring a Teddy Bear\n</code></pre>\n\n<p><strong>Getting the result as a <code>string</code>:</strong></p>\n\n<p>If you want the result as a <code>string</code>, you can write the result to a <a href=\"http://golang.org/pkg/bytes/#Buffer\" rel=\"nofollow\"><code>bytes.Buffer</code></a> and get the <code>string</code> using the <code>Buffer.String()</code> method:</p>\n\n<pre><code>buf := bytes.Buffer{}\nt.Execute(&amp;buf, data)\nvar result string = buf.String()\n</code></pre>\n\n<p>Complete program (try it on the <a href=\"http://play.golang.org/p/HynTXtlL4_\" rel=\"nofollow\">Go Playground</a>):</p>\n\n<pre><code>package main\n\nimport (\n    \"bytes\"\n    \"fmt\"\n    \"text/template\"\n)\n\nfunc main() {\n    data := map[string]string{\n        \"Name\":    \"Bob\",\n        \"Place\":   \"Home\",\n        \"ToBring\": \"some beers\",\n    }\n    fmt.Print(Execute(data))\n}\n\nvar t = template.Must(template.New(\"\").Parse(templ))\n\nfunc Execute(data interface{}) string {\n    buf := bytes.Buffer{}\n    t.Execute(&amp;buf, data)\n    return buf.String()\n}\n\nconst templ = `\nHi {{.Name}}!\nWelcome {{.Place}}.\nPlease bring {{.ToBring}}\n`\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 1, "creation_date": 1426493744, "post_id": 29072087, "comment_id": 46378681, "body": "This is the simplest most obvious solution, unless a complex template is needed, there really isn&#39;t a reason not to choose this one, OP"}], "tags": [], "owner": {"reputation": 5024, "user_id": 1419891, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bb825cd3f1905f42c16408393480a65b?s=128&d=identicon&r=PG", "display_name": "425nesp", "link": "https://stackoverflow.com/users/1419891/425nesp"}, "is_accepted": true, "score": 9, "last_activity_date": 1426493147, "creation_date": 1426493147, "answer_id": 29072087, "question_id": 29071212, "link": "https://stackoverflow.com/questions/29071212/implementing-dynamic-strings-in-golang/29072087#29072087", "title": "Implementing dynamic strings in golang", "body": "<p>If you want to keep things simple, you can probably just use <code>fmt.Sprintf</code>.</p>\n\n<pre><code>studentName := fmt.Sprintf(\"Hi, %s! Welcome.\", name)\n</code></pre>\n\n<p>The <code>%s</code> part will get replaced by the value of <code>name</code>.</p>\n"}], "owner": {"reputation": 825, "user_id": 2278893, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Et28N.jpg?s=128&g=1", "display_name": "Akash Shinde", "link": "https://stackoverflow.com/users/2278893/akash-shinde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4261, "favorite_count": 2, "accepted_answer_id": 29072087, "answer_count": 4, "score": 3, "last_activity_date": 1426494428, "creation_date": 1426489316, "question_id": 29071212, "link": "https://stackoverflow.com/questions/29071212/implementing-dynamic-strings-in-golang", "title": "Implementing dynamic strings in golang", "body": "<p>I have following global string,</p>\n\n<pre><code>studentName := \"Hi ? ,Welcome\"\n</code></pre>\n\n<p>Now I want to take this string dynamically</p>\n\n<pre><code>func returnName(name string) string{\n    return studentName+name\n}\n</code></pre>\n\n<p>This function should return string as </p>\n\n<pre><code>Hi name,welcome.\n</code></pre>\n\n<p>string should take name from parameter,and return dynamic string.What is the best way to implement this in golang.</p>\n"}, {"tags": ["go", "type-conversion"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 2, "creation_date": 1426493282, "post_id": 29071186, "comment_id": 46378470, "body": "Usually that type is used as a pointer so normally <code>x := new(bytes.Buffer)</code> but you could also use it with <code>&amp;x</code> (e.g. <code>var x bytes.Buffer; fmt.Fprintln(&amp;x, &quot;Foo&quot;)</code>). You likely don&#39;t want to pass one by value like you have though! Then you&#39;d also use <code>case *bytes.Buffer</code> and <code>any.(*bytes.Buffer).String()</code> which should work as you&#39;d then be calling a pointer method on a pointer. However using <code>v := any.(type)</code> as in icza&#39;s answer is easier."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1426495506, "post_id": 29071186, "comment_id": 46379489, "body": "@DaveC Note that though in this case <code>any.(*bytes.Buffer).String()</code> will not work because the value passed is <i>not</i> a pointer therefore you can&#39;t obtain a pointer from it using type assertion. It would only work if the function would be called like this: <code>ToJson5(&amp;x))</code>."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "reply_to_user": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1426523678, "post_id": 29071186, "comment_id": 46397197, "body": "@icza, that&#39;s why I also mentioned using <code>&amp;x</code> and that passing a <code>bytes.Buffer</code> by value is a bad idea. Notice my use of the word &quot;then&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "edited": false, "score": 0, "creation_date": 1426489519, "post_id": 29071223, "comment_id": 46376980, "body": "ah I see, I never know about this XD"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 3, "last_activity_date": 1426489694, "last_edit_date": 1426489694, "creation_date": 1426489389, "answer_id": 29071223, "question_id": 29071186, "link": "https://stackoverflow.com/questions/29071186/how-to-convert-interface-to-bytes-buffer/29071223#29071223", "title": "How to convert interface{} to bytes.Buffer", "body": "<p>You can use a <a href=\"http://golang.org/ref/spec#Short_variable_declarations\" rel=\"nofollow\">Short variable declaration</a> in the <a href=\"http://golang.org/ref/spec#Type_switches\" rel=\"nofollow\">Type switch</a> to have the typed value in the <code>case</code> branches:</p>\n\n<pre><code>switch v := any.(type) {\ncase bytes.Buffer: // return as is\n    return v.String() // Here v is of type bytes.Buffer\n}\n</code></pre>\n\n<p>Try it on the <a href=\"http://play.golang.org/p/1Ghqr70Gw5\" rel=\"nofollow\">Go Playground</a>.</p>\n\n<p>Quoting form the spec:</p>\n\n<blockquote>\n  <p>The TypeSwitchGuard may include a short variable declaration. When that form is used, the variable is declared at the beginning of the implicit block in each clause. In clauses with a case listing exactly one type, the variable has that type; otherwise, the variable has the type of the expression in the TypeSwitchGuard.</p>\n</blockquote>\n"}], "owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5635, "favorite_count": 0, "accepted_answer_id": 29071223, "answer_count": 1, "score": 1, "last_activity_date": 1426493510, "creation_date": 1426489207, "question_id": 29071186, "link": "https://stackoverflow.com/questions/29071186/how-to-convert-interface-to-bytes-buffer", "title": "How to convert interface{} to bytes.Buffer", "body": "<p>How to convert <code>interface{}</code> to <code>bytes.Buffer</code>?</p>\n\n<p>Minimal <a href=\"http://play.golang.org/p/4WDoVq1EaM\" rel=\"nofollow\">example</a></p>\n\n<pre><code>package main\n\nimport (\n    \"bytes\"\n    \"fmt\"\n)\n\nfunc ToJson5(any interface{}) string {\n    if any == nil {\n        return `''`\n    }\n    switch any.(type) {\n    case bytes.Buffer: // return as is\n        return any.(bytes.Buffer).String()\n    // other types works fine\n    }\n    return ``\n}\n\nfunc main() {\n    x := bytes.Buffer{}\n    fmt.Println(ToJson5(x))\n}\n</code></pre>\n\n<p>The errors was:</p>\n\n<pre><code>main.go:14: cannot call pointer method on any.(bytes.Buffer)\nmain.go:14: cannot take the address of any.(bytes.Buffer)\n</code></pre>\n\n<p>When changed to <code>bytes.Buffer{}</code> (that I think less correct), the error was:</p>\n\n<pre><code>main.go:13: bytes.Buffer literal (type bytes.Buffer) is not a type\nmain.go:14: bytes.Buffer literal is not a type\n</code></pre>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": false, "score": 6, "last_activity_date": 1618883060, "last_edit_date": 1618883060, "creation_date": 1426474823, "answer_id": 29069016, "question_id": 29068939, "link": "https://stackoverflow.com/questions/29068939/append-a-byte-to-a-string/29069016#29069016", "title": "Append a byte to a string?", "body": "<p>Here are a few options:</p>\n<pre><code>// append byte as slice\nret += string([]byte{b})\n\n// append byte as rune\nret += string(rune(b))\n\n// convert string to byte slice, append byte to slice, convert back to string\nret = string(append([]byte(ret), b))\n</code></pre>\n<p>Benchmark to see which one is best.</p>\n<p>If you want to append more than one byte, then break the second option into multiple statements and append to the []byte:</p>\n<pre><code>buf := []byte(ret)    // convert string to byte slice\nbuf = append(buf, b)  // append byte to slice\nbuf = append(buf, b1) // append byte to slice\n... etc\nret = string(buf)     // convert back to string\n</code></pre>\n<p>If you want to append the rune <code>r</code>, then it's a little simpler:</p>\n<pre><code> ret += string(r)\n</code></pre>\n<p>Strings are immutable. The code above creates a new string that is a concatenation of the original string and a byte or rune.</p>\n"}, {"tags": [], "owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "is_accepted": true, "score": 7, "last_activity_date": 1426477912, "creation_date": 1426477912, "answer_id": 29069386, "question_id": 29068939, "link": "https://stackoverflow.com/questions/29068939/append-a-byte-to-a-string/29069386#29069386", "title": "Append a byte to a string?", "body": "<p>In addition to ThunderCats answer.. you could initialize a <code>bytes.Buffer</code> from a string ... allowing you to continue appending bytes as you see fit:</p>\n\n<pre><code>buff := bytes.NewBufferString(ret)\n\n// maybe buff.Grow(n) .. if you hit perf issues?\n\nbuff.WriteByte(b)\nbuff.WriteByte(b)\n\n// ...\n\nresult := buff.String()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 104432, "user_id": 53212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0fbce15f81d6308656931250db267a1?s=128&d=identicon&r=PG", "display_name": "thomasrutter", "link": "https://stackoverflow.com/users/53212/thomasrutter"}, "is_accepted": false, "score": 3, "last_activity_date": 1505284043, "creation_date": 1505284043, "answer_id": 46190271, "question_id": 29068939, "link": "https://stackoverflow.com/questions/29068939/append-a-byte-to-a-string/46190271#46190271", "title": "Append a byte to a string?", "body": "<p>It's a lot simpler than either of the other answers:</p>\n\n<pre><code>var ret string = \"test\"\nvar b byte = 'a'\nret += string(b)\n\n// returns \"testa\"\n</code></pre>\n\n<p>That is, you can just cast an integer to a string and it will treat the integer as a rune (byte is an integer type).  An then you can just concatenate the resulting string with <code>+</code></p>\n\n<p>Playground: <a href=\"https://play.golang.org/p/ktnUg70M-I\" rel=\"nofollow noreferrer\">https://play.golang.org/p/ktnUg70M-I</a></p>\n"}, {"tags": [], "owner": {"reputation": 908, "user_id": 3649496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59c95010d46812ccabe7eea947a090ab?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLearner", "link": "https://stackoverflow.com/users/3649496/infinitelearner"}, "is_accepted": false, "score": 0, "last_activity_date": 1598878719, "creation_date": 1598878719, "answer_id": 63671286, "question_id": 29068939, "link": "https://stackoverflow.com/questions/29068939/append-a-byte-to-a-string/63671286#63671286", "title": "Append a byte to a string?", "body": "<p>Another solution in Golang.</p>\n<pre><code>package main\n\n    import (\n    \n        &quot;fmt&quot;\n    )\n    \n    func main() {\n        byteArr := []byte{1,2,5,4}\n        stringStr := &quot;Test&quot;\n        output:= fmt.Sprintf(&quot;%v %v&quot;,byteArr,stringStr)\n        fmt.Println(&quot;Output: &quot;,output)\n    }\n</code></pre>\n<blockquote>\n<p>Output</p>\n</blockquote>\n<pre><code>Output:  [1 2 5 4] Test\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80955, "user_id": 1002260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5ec9c21c8d54825b04def7a41998d18d?s=128&d=identicon&r=PG", "display_name": "Steven Penny", "link": "https://stackoverflow.com/users/1002260/steven-penny"}, "is_accepted": false, "score": 0, "last_activity_date": 1618701705, "creation_date": 1618701705, "answer_id": 67143857, "question_id": 29068939, "link": "https://stackoverflow.com/questions/29068939/append-a-byte-to-a-string/67143857#67143857", "title": "Append a byte to a string?", "body": "<p>You can also use <code>strings.Builder</code>:</p>\n<pre><code>package main\nimport &quot;strings&quot;\n\nfunc main() {\n   var b strings.Builder\n   b.WriteByte('!')\n   println(b.String() == &quot;!&quot;)\n}\n</code></pre>\n<p><a href=\"https://golang.org/pkg/strings#Builder.WriteByte\" rel=\"nofollow noreferrer\">https://golang.org/pkg/strings#Builder.WriteByte</a></p>\n"}], "owner": {"reputation": 99684, "user_id": 149482, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cb6a2b464b7190c48e4f148a0e51d13a?s=128&d=identicon&r=PG", "display_name": "Matt Joiner", "link": "https://stackoverflow.com/users/149482/matt-joiner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9146, "favorite_count": 3, "accepted_answer_id": 29069386, "answer_count": 5, "score": 11, "last_activity_date": 1618883060, "creation_date": 1426474233, "question_id": 29068939, "link": "https://stackoverflow.com/questions/29068939/append-a-byte-to-a-string", "title": "Append a byte to a string?", "body": "<p>How do you append a byte to a string in Go?</p>\n\n<pre><code>var ret string\nvar b byte\nret += b\n\ninvalid operation: ret += b (mismatched types string and byte)\n</code></pre>\n"}, {"tags": ["google-app-engine", "go", "google-cloud-datastore"], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 3, "last_activity_date": 1426474284, "creation_date": 1426474284, "answer_id": 29068948, "question_id": 29068749, "link": "https://stackoverflow.com/questions/29068749/update-entity-from-appengine-getall-and-save-to-datastore/29068948#29068948", "title": "Update entity from appengine .GetAll and save to datastore", "body": "<p><a href=\"https://cloud.google.com/appengine/docs/go/datastore/reference#Query.GetAll\" rel=\"nofollow\">GetAll</a> returns the keys:</p>\n\n<pre><code>var userProfiles []UserProfile\nkeys, err := q.GetAll(c, &amp;userProfiles)\nif err != nil {\n    // handle error\n}\n</code></pre>\n\n<p>Update entities using the keys returned from GetAll:</p>\n\n<pre><code>userProfile[0].Email = \"test@example.com\"\n_, err = datastore.Put(c, keys[0], userProfile[0])\nif err != nil {\n    // handle error\n}\n</code></pre>\n"}], "owner": {"reputation": 938, "user_id": 264567, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EJgqq.png?s=128&g=1", "display_name": "frederix", "link": "https://stackoverflow.com/users/264567/frederix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 29068948, "answer_count": 1, "score": 2, "last_activity_date": 1475291333, "creation_date": 1426472790, "last_edit_date": 1475291333, "question_id": 29068749, "link": "https://stackoverflow.com/questions/29068749/update-entity-from-appengine-getall-and-save-to-datastore", "title": "Update entity from appengine .GetAll and save to datastore", "body": "<p>I have a model:</p>\n\n<pre><code>type UserProfile struct {\nUserID         string    `datastore:\"user_id\" json:\"user_id,omitempty\"`\nUsername       string    `datastore:\"username\" json:\"username,omitempty\"`\nStripUsername  string    `datastore:\"strip_username\" json:\"strip_username,omitempty\"`\nEmail          string    `datastore:\"email\" json:\"email,omitempty\"`\nLoginType      string    `datastore:\"login_type\" json:\"login_type,omitempty\"`\nCurrentSession string    `datastore:\"current_session\" json:\"current_session,omitempty\"`\nFBAcessToken   string    `datastore:\"fb_access_token\" json:\"fb_access_token,omitempty\"`\nCreated        time.Time `datastore:\"created\" json:\"-\"`\n}\n</code></pre>\n\n<p>And I perform a .GetAll to populate it:</p>\n\n<pre><code>// Skip a few steps here\n\nvar userProfiles []UserProfile\nq.GetAll(c, &amp;userProfiles)\n</code></pre>\n\n<p>Say I want to modify one of those entities:</p>\n\n<pre><code>userProfile[0].Email = \"test@example.com\"\n</code></pre>\n\n<p>I know I want to Put that entity like so:</p>\n\n<pre><code>k = datastore.Put(c, k, userProfile[0])\n</code></pre>\n\n<p>How do I get that initial key from userProfile[0] to call Put with?</p>\n"}, {"tags": ["input", "go", "ncurses"], "comments": [{"owner": {"reputation": 21722, "user_id": 357705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb8f635bfd71c18b91e1b0ed5d2ee9?s=128&d=identicon&r=PG", "display_name": "jimt", "link": "https://stackoverflow.com/users/357705/jimt"}, "edited": false, "score": 1, "creation_date": 1426463007, "post_id": 29067544, "comment_id": 46370612, "body": "Check out: <a href=\"http://stackoverflow.com/questions/12360597/send-stdin-keystrokes-to-channel-without-newline-required/\" title=\"send stdin keystrokes to channel without newline required\">stackoverflow.com/questions/12360597/&hellip;</a>"}, {"owner": {"reputation": 5024, "user_id": 1419891, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bb825cd3f1905f42c16408393480a65b?s=128&d=identicon&r=PG", "display_name": "425nesp", "link": "https://stackoverflow.com/users/1419891/425nesp"}, "edited": false, "score": 0, "creation_date": 1426494896, "post_id": 29067544, "comment_id": 46379160, "body": "Assuming you&#39;re not the same guy who posted on Google Groups, this link might be helpful. <a href=\"https://groups.google.com/forum/#!topic/golang-nuts/P_Hpy7tvf6Q\" rel=\"nofollow noreferrer\">groups.google.com/forum/#!topic/golang-nuts/P_Hpy7tvf6Q</a>"}, {"owner": {"reputation": 1, "user_id": 1291791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1226f83e49680def2e581c9637222273?s=128&d=identicon&r=PG", "display_name": "user1291791", "link": "https://stackoverflow.com/users/1291791/user1291791"}, "edited": false, "score": 0, "creation_date": 1426569875, "post_id": 29067544, "comment_id": 46415635, "body": "Thanks for the links.  I looked more into goncurses and as nifty as it might end up, it looks like there is no &quot;easy&quot; way to do this.  This is for a pet project and if I don&#39;t think I&#39;ll be able to share it if it relies on goncurses to function.  It would have been cool to build a neat interface in a term though."}], "owner": {"reputation": 1, "user_id": 1291791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1226f83e49680def2e581c9637222273?s=128&d=identicon&r=PG", "display_name": "user1291791", "link": "https://stackoverflow.com/users/1291791/user1291791"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426462556, "creation_date": 1426462556, "question_id": 29067544, "link": "https://stackoverflow.com/questions/29067544/read-user-input-dynamically-as-it-is-typed-in-golang", "title": "Read user input dynamically as it is typed in Golang", "body": "<p>I am trying to see if Go is capable of performing logic on user input as it is typed instead of waiting for a carriage return to begin processing.  I utilized NCurses to accomplish this with a small Python game but wasn't sure how to get NCurses functioning with Go.</p>\n\n<p>Right now, I'm using</p>\n\n<pre><code>    reader := bufio.NewReader(os.Stdin)\n    fmt.Print(\"Select: \")\n    text, _ := reader.ReadString('\\n')\n    text = strings.Trim(text, \"\\n\\r\")\n</code></pre>\n\n<p>but as I said, this does not process until the user hits enter.</p>\n\n<p>I would like to perform a check on whatever the user entered and eliminate the need for a carriage return; hitting one button is sufficient to generate a response.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 3, "creation_date": 1426460557, "post_id": 29067168, "comment_id": 46370039, "body": "For future reference, if you&#39;re asking about a panic then make sure to include the actual panic message."}, {"owner": {"reputation": 10925, "user_id": 723947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b898a5dde625380e861e3719e50a4c?s=128&d=identicon&r=PG", "display_name": "dyoo", "link": "https://stackoverflow.com/users/723947/dyoo"}, "edited": false, "score": 1, "creation_date": 1426460599, "post_id": 29067168, "comment_id": 46370051, "body": "See: <a href=\"https://blog.golang.org/go-maps-in-action\" rel=\"nofollow noreferrer\">blog.golang.org/go-maps-in-action</a> for an introduction to maps in Go."}], "answers": [{"tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 5, "last_activity_date": 1426460502, "creation_date": 1426460502, "answer_id": 29067261, "question_id": 29067168, "link": "https://stackoverflow.com/questions/29067168/what-is-the-cause-of-this-panic/29067261#29067261", "title": "What is the cause of this panic?", "body": "<p>You didn't tell us what the error message was!</p>\n\n<blockquote>\n  <p><a href=\"http://golang.org/ref/spec#Map_types\">Map types</a></p>\n  \n  <p>A new, empty map value is made using the built-in function make, which\n  takes the map type and an optional capacity hint as arguments:</p>\n\n<pre><code>make(map[string]int)\nmake(map[string]int, 100)\n</code></pre>\n</blockquote>\n\n<p>For example,</p>\n\n<pre><code>status := ValidationStatus{Passed: true, Errors: make(map[string]*ValidationError)}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "is_accepted": false, "score": 3, "last_activity_date": 1426460547, "creation_date": 1426460547, "answer_id": 29067268, "question_id": 29067168, "link": "https://stackoverflow.com/questions/29067168/what-is-the-cause-of-this-panic/29067268#29067268", "title": "What is the cause of this panic?", "body": "<p>Your map is <code>nil</code>. You simply need to initialize it. This is why most object initialization is hidden behind a function:</p>\n\n<pre><code>status := ValidationStatus{Passed: true, Errors: make(map[string]*ValidationError)}\n</code></pre>\n\n<p>..or, behind a function:</p>\n\n<pre><code>status := NewValidationStatus()\n\n// ...\n\nfunc NewValidationStatus() ValidationStatus {\n    return ValidationStatus{\n        Passed: true,\n        Errors: make(map[string]*ValidationError),\n    }\n}\n</code></pre>\n\n<p><kbd><a href=\"http://play.golang.org/p/jlb1uvnu-J\" rel=\"nofollow\">See it on the playground</a></kbd></p>\n"}], "owner": {"reputation": 4450, "user_id": 244681, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1a4b485cec22e791e894e1051dfde826?s=128&d=identicon&r=PG", "display_name": "JasonS", "link": "https://stackoverflow.com/users/244681/jasons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 29067261, "answer_count": 2, "score": 0, "last_activity_date": 1426460547, "creation_date": 1426459960, "question_id": 29067168, "link": "https://stackoverflow.com/questions/29067168/what-is-the-cause-of-this-panic", "title": "What is the cause of this panic?", "body": "<p>I am fairly new to Go, could someone help me diagnose this problem.</p>\n\n<pre><code>type ValidationStatus struct {\n    Passed bool\n    Errors map[string]*ValidationError\n}\n\n// ...\n\nstatus := ValidationStatus{Passed: true}\n\n// ...\n\nstatus.Passed = false\nfmt.Println(reflect.TypeOf(typeField.Name)) // string\nfmt.Println(reflect.TypeOf(validationError)) // *validation.ValidationError   \nstatus.Errors[typeField.Name] = validationError // Panic triggered here.\n</code></pre>\n\n<p><code>validationError</code> is defined in the validation package. This code is in the same file as the struct.</p>\n\n<p>This is the first time I have hit an issue like this, I think I may be using the map incorrectly but then I don't understand why this wouldn't cause a compile error so maybe a type issue? Any pointers to solve this would be much appreciated.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426459840, "post_id": 29066736, "comment_id": 46369850, "body": "If you have no fancy quoting rules to follow then something like <code>f := strings.Fields(x)</code> then <code>os.Exec</code>&#39;s <code>exec.Command(f[0], f[1:]...)</code> should work."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1426524440, "post_id": 29066736, "comment_id": 46397730, "body": "By the way, your example names the variable &quot;userInput&quot;\u2026 never pass user input directly to a shell (or otherwise &quot;run&quot; it) without doing strict checking/sanitation unless you like giving the current processes&#39; full permissions away to anyone that can provide it input."}], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1426523999, "post_id": 29072350, "comment_id": 46397438, "body": "Why directly muck with <code>LookPath</code>? Didn&#39;t you read the <a href=\"https://golang.org/pkg/os/exec/#Command\" rel=\"nofollow noreferrer\"><code>exec.Command</code> documentation</a> that clearly states it will do that for you when required?"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426524250, "post_id": 29072350, "comment_id": 46397614, "body": "Also, there is a difference between passing a new environment to <i>only</i> a child (via say setting <code>cmd.Env</code>) and setting the current processes&#39; environment (which will, by default, get inherited by all future child processes) with <code>os.Setenv</code>."}, {"owner": {"reputation": 5024, "user_id": 1419891, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bb825cd3f1905f42c16408393480a65b?s=128&d=identicon&r=PG", "display_name": "425nesp", "link": "https://stackoverflow.com/users/1419891/425nesp"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426560348, "post_id": 29072350, "comment_id": 46413272, "body": "Thanks, Dave C. No, I didn&#39;t read the <code>exec.Command</code> documentation."}], "tags": [], "owner": {"reputation": 5024, "user_id": 1419891, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bb825cd3f1905f42c16408393480a65b?s=128&d=identicon&r=PG", "display_name": "425nesp", "link": "https://stackoverflow.com/users/1419891/425nesp"}, "is_accepted": true, "score": 0, "last_activity_date": 1426560228, "last_edit_date": 1426560228, "creation_date": 1426494367, "answer_id": 29072350, "question_id": 29066736, "link": "https://stackoverflow.com/questions/29066736/given-an-arbitrary-string-how-can-i-shell-out-the-command-to-bash/29072350#29072350", "title": "Given an arbitrary string, how can I shell out the command to bash?", "body": "<p>Depending on how arbitrary and flexible your <code>userInput</code> string is, I might do something like this.</p>\n\n<pre><code>package main\n\nimport (\n    \"log\"\n    \"os\"\n    \"os/exec\"\n)\n\nfunc main() {\n    if err := os.Setenv(\"FOO\", \"bar\"); err != nil {\n        log.Println(err)\n    }\n\n    // As Dave C pointed out, exec.Command does this for you.\n    // goAbsPath, err := exec.LookPath(\"go\")\n    // if err != nil {\n    //   log.Println(err)\n    // }\n\n    // Pass whatever other arguments necessary.\n    cmd := exec.Command(\"go\", \"version\")\n    if err = cmd.Run(); err != nil {\n        log.Println(err)\n    }\n}\n</code></pre>\n\n<p>If nothing else, maybe <code>os.Setenv</code> and <code>exec.LookPath</code> might be useful to know about.</p>\n"}, {"tags": [], "owner": {"reputation": 826, "user_id": 3505816, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/515d6b58cb611ea9e404391e983a166d?s=128&d=identicon&r=PG&f=1", "display_name": "dastan", "link": "https://stackoverflow.com/users/3505816/dastan"}, "is_accepted": false, "score": 0, "last_activity_date": 1426565011, "creation_date": 1426565011, "answer_id": 29091103, "question_id": 29066736, "link": "https://stackoverflow.com/questions/29066736/given-an-arbitrary-string-how-can-i-shell-out-the-command-to-bash/29091103#29091103", "title": "Given an arbitrary string, how can I shell out the command to bash?", "body": "<p>I may write like this:  </p>\n\n<pre><code>cmd := exec.Command(cmdName, arg1, arg2, ..)   \ncmd.Env = append(cmd.Env, \"foo=bar\")\n\nerr = cmd.Start()\nif err != nil {\n    // log or something else\n}\n\nerr = cmd.Wait()\nif err != nil {\n    if exitErr, ok := err.(*exec.ExitError); ok {\n        if status, ok := exitErr.Sys().(syscall.WaitStatus); ok {\n            // handle err according to different status.ExitStatus()\n        }\n        // ...\n    }\n    // ...\n}\n// ...\n</code></pre>\n\n<p>Godoc explains quite well if you need more details.</p>\n"}], "owner": {"reputation": 25, "user_id": 1400296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb9f58086e20c6a51c78b43e1f683e6e?s=128&d=identicon&r=PG", "display_name": "jakedahn", "link": "https://stackoverflow.com/users/1400296/jakedahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 29072350, "answer_count": 2, "score": 0, "last_activity_date": 1426565011, "creation_date": 1426457149, "last_edit_date": 1426459980, "question_id": 29066736, "link": "https://stackoverflow.com/questions/29066736/given-an-arbitrary-string-how-can-i-shell-out-the-command-to-bash", "title": "Given an arbitrary string, how can I shell out the command to bash?", "body": "<p>I have a pretty basic golang question.</p>\n\n<p>Given an arbitrary string like <code>\"echo foo\"</code>, or <code>\"CGO_ENABLED=0 go build -o ./bin/echo -a main.go\"</code>, what is the idiomatic way to parse/run that command using <code>os/exec</code>?</p>\n\n<p>The way that I got this working seems pretty hacky, and I'm looking for a more idiomatic approach.</p>\n\n<pre><code>userInput = \"CGO_ENABLED=0 go build -o ./bin/echo -a main.go\"\ncommand := exec.Command(\"/bin/bash\", \"-c\", userInput)\nout, err := command.Output()\nif err != nil {\n    fmt.Println(err)\n }\n</code></pre>\n"}, {"tags": ["go", "goroutine"], "comments": [{"owner": {"reputation": 13244, "user_id": 317915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/86d01c87cc6f22c8445661b72b6b0d78?s=128&d=identicon&r=PG", "display_name": "topskip", "link": "https://stackoverflow.com/users/317915/topskip"}, "edited": false, "score": 2, "creation_date": 1426851595, "post_id": 29064946, "comment_id": 46549992, "body": "You should accept @Dave C&#39;s answer."}], "answers": [{"comments": [{"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 1, "creation_date": 1426447602, "post_id": 29065100, "comment_id": 46365981, "body": "Put another way, the &quot;missing information&quot; the question refers to is that unbuffered channel sends are <i>synchronous</i>: the sending goroutine goes to sleep until the other receives the value. If you want to look into how this happens, look for info on the goroutine scheduler (which is like the scheduler that governs threads in your operating system)."}, {"owner": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "edited": false, "score": 0, "creation_date": 1426501930, "post_id": 29065100, "comment_id": 46382936, "body": "Put another way, you&#39;ve discovered one of the great features of using Communicating Sequential Processes (CSP) that underpins the Go model: what you see is what you get in terms of &quot;this happens&quot; then &quot;that happens&quot;. This becomes especially useful when external i/o is involved - you don&#39;t have to write chains of callbacks. Just block; it&#39;s OK."}, {"owner": {"reputation": 23, "user_id": 4665688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2270e7c9ddd982728650fd3a11e3d47e?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4665688/james"}, "edited": false, "score": 0, "creation_date": 1426824185, "post_id": 29065100, "comment_id": 46538534, "body": "Where in the code does it say that you can&#39;t have ping call right after ping finished? Is it <i>impossible</i> ?"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 3, "creation_date": 1426828636, "post_id": 29065100, "comment_id": 46539609, "body": "The behaviour of unbuffered channels has been mentioned several times here. It&#39;s impossible since <code>table &lt;- ball</code> does not return until <i>after</i> <code>ball := &lt;- table</code> returns in the other go routine. By the time the first goroutine gets back through the for loop and tries to read again it has to wait for another, different channel send."}], "tags": [], "owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "is_accepted": false, "score": 7, "last_activity_date": 1465007907, "last_edit_date": 1465007907, "creation_date": 1426447274, "answer_id": 29065100, "question_id": 29064946, "link": "https://stackoverflow.com/questions/29064946/how-is-it-possible-that-go-routines-interleave-perfectly/29065100#29065100", "title": "How is it possible that go routines interleave perfectly?", "body": "<p>You're using a un-buffered channel and your two goroutines synchronize with it. With an un-buffered channel the channel write (<code>table &lt;- ball</code>) can only complete once someone somewhere has done a read (<code>&lt;-table</code>) so a single goroutine can never read the value it's writing. That's the whole point of this example.</p>\n"}, {"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 3, "creation_date": 1426523477, "post_id": 29077083, "comment_id": 46397063, "body": "Incorrect, re-read the code. The un-buffered channels are synchronized no matter how many threads are allowed."}, {"owner": {"reputation": 23, "user_id": 4665688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2270e7c9ddd982728650fd3a11e3d47e?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4665688/james"}, "edited": false, "score": 0, "creation_date": 1426824366, "post_id": 29077083, "comment_id": 46538572, "body": "This is the answer I was looking for... Whether it actually applies in the case of this specific code problem is currently unclear to me. I would expect that ping <i>could</i> get called right after ping, thus skipping a pong, but perhaps I am new to golang and thus possibly missing some undocumented nuance of the language."}, {"owner": {"reputation": 2854, "user_id": 41292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/939e50606775eea4b7589dd7aebbd8b3?s=128&d=identicon&r=PG", "display_name": "LenW", "link": "https://stackoverflow.com/users/41292/lenw"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426845745, "post_id": 29077083, "comment_id": 46546847, "body": "@DaveC edited with example output. I understand that the channels will always go from ping to pong (or vice versa) and never pong to pong or ping to ping due to the channel synchronisation."}, {"owner": {"reputation": 13244, "user_id": 317915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/86d01c87cc6f22c8445661b72b6b0d78?s=128&d=identicon&r=PG", "display_name": "topskip", "link": "https://stackoverflow.com/users/317915/topskip"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1426851524, "post_id": 29077083, "comment_id": 46549945, "body": "@LenW it&#39;s not so much the point which goroutine starts (ping or pong). The question is, why does a ping always follow a pong and never another ping. The correct answer has nothing to do with GOMAXPROCS. It is (as @Dave C correctly writes) the effect that <code>&lt;-</code> blocks until someone reads from the channel. Thus when pong blocks, ping is the only running goroutine left that can read from the channel."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "reply_to_user": {"reputation": 13244, "user_id": 317915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/86d01c87cc6f22c8445661b72b6b0d78?s=128&d=identicon&r=PG", "display_name": "topskip", "link": "https://stackoverflow.com/users/317915/topskip"}, "edited": false, "score": 0, "creation_date": 1426874445, "post_id": 29077083, "comment_id": 46563956, "body": "@topskip, exactly. The OP is only doing a grep count on the output and noticing that the pattern is always \u2026 ping, pong, ping, pong, \u2026 (without regard to if the first one is ping or pong) and the OP talks of interleaving. This has nothing what-so-ever to do with which starts first and how/when main will &quot;interfere&quot; to stop the game."}, {"owner": {"reputation": 2854, "user_id": 41292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/939e50606775eea4b7589dd7aebbd8b3?s=128&d=identicon&r=PG", "display_name": "LenW", "link": "https://stackoverflow.com/users/41292/lenw"}, "reply_to_user": {"reputation": 13244, "user_id": 317915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/86d01c87cc6f22c8445661b72b6b0d78?s=128&d=identicon&r=PG", "display_name": "topskip", "link": "https://stackoverflow.com/users/317915/topskip"}, "edited": false, "score": 0, "creation_date": 1426914926, "post_id": 29077083, "comment_id": 46575801, "body": "@topskip completely understood as above"}, {"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 1, "creation_date": 1465007802, "post_id": 29077083, "comment_id": 62734007, "body": "I agree with your observation that the output is nondeterministic (since it may start with a ping or a pong), but the question asks about &quot;perfect interleaving&quot; of the pings and pongs. So I think this answer doesn&#39;t answer the question in a useful way, even though what it says is technically correct."}, {"owner": {"reputation": 11620, "user_id": 1832301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dfe654f47e3de2384ffd4e2165c575c?s=128&d=identicon&r=PG", "display_name": "BraveNewCurrency", "link": "https://stackoverflow.com/users/1832301/bravenewcurrency"}, "edited": false, "score": 0, "creation_date": 1465016754, "post_id": 29077083, "comment_id": 62735384, "body": "I think your statement &quot;order of execution is not deterministic&quot; is misleading because it implies way too much. The output is <i>perfectly</i> deterministic except for one thing: the choice of the first player. The OP was asking why every ping has a pong, and that has nothing to do with <code>GOMAXPROCS</code>."}], "tags": [], "owner": {"reputation": 2854, "user_id": 41292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/939e50606775eea4b7589dd7aebbd8b3?s=128&d=identicon&r=PG", "display_name": "LenW", "link": "https://stackoverflow.com/users/41292/lenw"}, "is_accepted": true, "score": -5, "last_activity_date": 1426845679, "last_edit_date": 1495535642, "creation_date": 1426509692, "answer_id": 29077083, "question_id": 29064946, "link": "https://stackoverflow.com/questions/29064946/how-is-it-possible-that-go-routines-interleave-perfectly/29077083#29077083", "title": "How is it possible that go routines interleave perfectly?", "body": "<p>By default <a href=\"http://golang.org/pkg/runtime/#GOMAXPROCS\" rel=\"nofollow noreferrer\">GOMAXPROCS</a> is set to 1 and as a result you see this behaviour. If you increase GOMAXPROCS it will no longer be deterministic. </p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/29057210/does-the-goroutines-created-in-the-same-goroutines-execute-always-in-order\">this answer</a> for an example</p>\n\n<p>EDIT @DaveC disagrees however a simple test shows otherwise. The channels are synchonised yes, however the order of the goroutines executing is not. These are different concepts. Type in the above code, set GOMAXPROCS > 1 and run ...</p>\n\n<pre><code>\u279c  tmp  export GOMAXPROCS=2\n\u279c  tmp  go run balls.go\nping 1\npong 2\n\u279c  tmp  go run balls.go\npong 1\nping 2\n\u279c  tmp\n</code></pre>\n\n<p>As you can see above the goroutines order of execution is not deterministic</p>\n"}, {"tags": [], "owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "is_accepted": false, "score": 1, "last_activity_date": 1465007285, "creation_date": 1465007285, "answer_id": 37625755, "question_id": 29064946, "link": "https://stackoverflow.com/questions/29064946/how-is-it-possible-that-go-routines-interleave-perfectly/37625755#37625755", "title": "How is it possible that go routines interleave perfectly?", "body": "<p>According to this <a href=\"http://divan.github.io/posts/go_concurrency_visualize/\" rel=\"nofollow\">blog</a>:</p>\n\n<p>Goroutines would interleave perfectly for any number of players:</p>\n\n<blockquote>\n  <p>The answer is because Go runtime holds waiting <a href=\"https://github.com/golang/go/blob/master/src/runtime/chan.go#L34\" rel=\"nofollow\">FIFO queue for receivers</a> (goroutines ready to receive on the particular channel), and\n  in our case every player gets ready just after he passed the ball on\n  the table</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 4665688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2270e7c9ddd982728650fd3a11e3d47e?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4665688/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 29077083, "answer_count": 3, "score": 1, "last_activity_date": 1465007907, "creation_date": 1426446521, "question_id": 29064946, "link": "https://stackoverflow.com/questions/29064946/how-is-it-possible-that-go-routines-interleave-perfectly", "title": "How is it possible that go routines interleave perfectly?", "body": "<p>I'm surprised that go routines seem to interleave perfectly... After seeing this, I am starting to believe there's some missing information about the internals that I haven't learned about yet. Example:</p>\n\n<pre><code>$ go run x.go &gt; output\n$ grep ping output | wc -l\n404778\n$ grep pong output | wc -l\n404777\n$ cat x.go \npackage main\nimport (\n    \"fmt\"\n    \"time\"\n)\n\ntype Ball struct{ hits int }\n\nfunc main() {\n    table := make(chan *Ball)\n    go player(\"ping\", table)\n    go player(\"pong\", table)\n\n    table &lt;- new(Ball) // game on; toss the ball\n    time.Sleep(1 * time.Second)\n    &lt;-table // game over; grab the ball\n}\n\nfunc player(name string, table chan *Ball) {\n    for {\n        ball := &lt;-table\n        ball.hits++\n        fmt.Println(name, ball.hits)\n        //time.Sleep(1 * time.Millisecond)\n        table &lt;- ball\n    }\n}\n</code></pre>\n\n<p>However long you set the timeout in the player function (or remove it all together) you always get #ping == #ping +/- 1.</p>\n"}, {"tags": ["google-app-engine", "go"], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 4, "last_activity_date": 1426445500, "creation_date": 1426445500, "answer_id": 29064769, "question_id": 29064691, "link": "https://stackoverflow.com/questions/29064691/app-engine-read-local-file-in-go/29064769#29064769", "title": "app engine read local file in go", "body": "<p>App Engine applications run with CWD set to the root of the application (the directory containing app.yaml).  If your application has the directory structure</p>\n\n<pre><code>- APPNAME\n - files\n  - key.pem\n - app.yaml\n</code></pre>\n\n<p>then use the path <code>files/key.pem</code> to open the file.</p>\n\n<p>If the .pem file is part of your application's static data, then it's best to read the data from the file system.</p>\n"}], "owner": {"reputation": 2175, "user_id": 817571, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3eb3aee0450c2c335756206fe6ab70ed?s=128&d=identicon&r=PG", "display_name": "MIkCode", "link": "https://stackoverflow.com/users/817571/mikcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 1, "accepted_answer_id": 29064769, "answer_count": 1, "score": 2, "last_activity_date": 1426445500, "creation_date": 1426445082, "question_id": 29064691, "link": "https://stackoverflow.com/questions/29064691/app-engine-read-local-file-in-go", "title": "app engine read local file in go", "body": "<p>Im using go and cloud endpoints and  i have a pem file that im using him in  order to create signed URL.<br>\nWhen im running my app locally  and im providing  a full path to the  <strong>ioutil.ReadFile</strong> method   its working well.</p>\n\n<p>On the server i tried several option on server  like this  but i get file not found...</p>\n\n<pre><code>APPNAME/files/key.pem\n</code></pre>\n\n<ol>\n<li><p>What is the correct path to the file?</p></li>\n<li><p>Should i use memcached instead of <strong>ioutil.ReadFile</strong> for reading\nthe pem file ?</p></li>\n</ol>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 6519, "user_id": 613453, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0c744d4e2bee639d69f3e78f7daeba6d?s=128&d=identicon&r=PG", "display_name": "themihai", "link": "https://stackoverflow.com/users/613453/themihai"}, "edited": false, "score": 0, "creation_date": 1426448762, "post_id": 29064863, "comment_id": 46366391, "body": "I just want to skip one directory /package without to manually write <code>go test packagex</code> for each package I want to test.  Let&#39;s say you have 100 packages but you want to skip one . Does it make sense?"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "reply_to_user": {"reputation": 6519, "user_id": 613453, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0c744d4e2bee639d69f3e78f7daeba6d?s=128&d=identicon&r=PG", "display_name": "themihai", "link": "https://stackoverflow.com/users/613453/themihai"}, "edited": false, "score": 0, "creation_date": 1426460251, "post_id": 29064863, "comment_id": 46369961, "body": "@mihai I added a go list |grep -v example; or you could arrange to have the tests in that sub-dir skip themselves unless some condition is set. Or you could re-structure your directories such that the &quot;offending&quot; one is elsewhere (if it really is somehow different enough from the others)."}, {"owner": {"reputation": 7410, "user_id": 3257971, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/726800b78cc5fe1f7dd61906ffd0eb1e?s=128&d=identicon&r=PG&f=1", "display_name": "The user with no hat", "link": "https://stackoverflow.com/users/3257971/the-user-with-no-hat"}, "edited": false, "score": 0, "creation_date": 1426635691, "post_id": 29064863, "comment_id": 46452532, "body": "go test <code>go list .&#47;... | grep -v directoriesToSkip</code> doesn&#39;t skip &quot;directoriesToSkip&quot; if they  are subdirectories of the current directory."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "reply_to_user": {"reputation": 7410, "user_id": 3257971, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/726800b78cc5fe1f7dd61906ffd0eb1e?s=128&d=identicon&r=PG&f=1", "display_name": "The user with no hat", "link": "https://stackoverflow.com/users/3257971/the-user-with-no-hat"}, "edited": false, "score": 0, "creation_date": 1426636978, "post_id": 29064863, "comment_id": 46452929, "body": "@Theuserwithnohat did you look at the output of <code>go list .&#47;...</code> (or figure out/know what it does) before commenting? It lists <i>all</i> sub packages so as long as the regex matches any part of them then they will be skipped (due to <code>-v</code> inverting grep)."}, {"owner": {"reputation": 7410, "user_id": 3257971, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/726800b78cc5fe1f7dd61906ffd0eb1e?s=128&d=identicon&r=PG&f=1", "display_name": "The user with no hat", "link": "https://stackoverflow.com/users/3257971/the-user-with-no-hat"}, "edited": false, "score": 0, "creation_date": 1426888445, "post_id": 29064863, "comment_id": 46570506, "body": "Sorry for the previous comment. I tried the command  but I&#39;ve got an error from the directory I was trying to skip(that&#39;s the reason I was actually trying to skip it actually) thus the reason why I said it doesn&#39;t skips the directories.  Anyway I&#39;ve fixed it with the -e flag and it&#39;s all fine."}], "tags": [], "owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "is_accepted": true, "score": 37, "last_activity_date": 1426460160, "last_edit_date": 1426460160, "creation_date": 1426446082, "answer_id": 29064863, "question_id": 29064197, "link": "https://stackoverflow.com/questions/29064197/running-tests-and-skipping-some-packages/29064863#29064863", "title": "Running tests and skipping some packages", "body": "<p>Go test takes a list of packages to test on the command line (see <code>go help packages</code>) so you can test an arbitrary set of packages with a single invocation like so:</p>\n\n<p><code>go test import/path/to/mypackage import/path/to/mypackage/other import/path/to/mypackage/net</code></p>\n\n<p>Or, depending on your shell:</p>\n\n<p><code>go test import/path/to/mypackage{,/other,/net}</code></p>\n\n<hr>\n\n<p>You might be able to use interesting invocations of <code>go list</code> as the arguments (again, depending on your shell):</p>\n\n<pre><code>go test `go list`\n</code></pre>\n\n<p>Your comment says you want to skip one sub-directory so (depending on your shell) perhaps this:</p>\n\n<pre><code>go test `go list ./... | grep -v directoriesToSkip`\n</code></pre>\n\n<p>as with anything, if you do that a lot you could make a shell alias/whatever for it.</p>\n\n<hr>\n\n<p>If the reason you want to skip tests is, for example, that you have long/expensive tests that you often want to skip, than the tests themselves could/should check <a href=\"https://golang.org/pkg/testing/#Short\" rel=\"noreferrer\"><code>testing.Short()</code></a> and call <a href=\"https://golang.org/pkg/testing/#common.Skip\" rel=\"noreferrer\"><code>t.Skip()</code></a> as appropriate.</p>\n\n<p>Then you could run either:</p>\n\n<p><code>go test -short import/path/to/mypackage/...</code></p>\n\n<p>or from within the <code>mypackage</code> directory:</p>\n\n<p><code>go test -short ./...</code></p>\n\n<p>You can use things other <code>testing.Short()</code> to trigger skipping as well.</p>\n"}], "owner": {"reputation": 7410, "user_id": 3257971, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/726800b78cc5fe1f7dd61906ffd0eb1e?s=128&d=identicon&r=PG&f=1", "display_name": "The user with no hat", "link": "https://stackoverflow.com/users/3257971/the-user-with-no-hat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14023, "favorite_count": 1, "accepted_answer_id": 29064863, "answer_count": 1, "score": 20, "last_activity_date": 1552922873, "creation_date": 1426442392, "last_edit_date": 1552922873, "question_id": 29064197, "link": "https://stackoverflow.com/questions/29064197/running-tests-and-skipping-some-packages", "title": "Running tests and skipping some packages", "body": "<p>Is it possible to skip directories from testing. For example given the structure below is it possible to test mypackage, mypackage/other and mypackage/net but not mypackage/scripts?  I mean without to write a go test command for each (\ne.g. go test; go test net; go test other)</p>\n\n<pre><code>mypackage\nmypackage/net\nmypackage/other\nmypackage/scripts\n</code></pre>\n"}, {"tags": ["mongodb", "utf-8", "go", "mgo"], "comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 1, "creation_date": 1426452632, "post_id": 29063656, "comment_id": 46367633, "body": "Please show the type declarations for the _id and eventId fields."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4122236"}, "edited": false, "score": 1, "creation_date": 1426455882, "post_id": 29063656, "comment_id": 46368649, "body": "How are you writing the <code>thing.eventId</code> field to the database? The <code>eventId</code> field is ignored by the BSON encoder because the field is not exported."}, {"owner": {"reputation": 1085, "user_id": 3169138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wSAPm.jpg?s=128&g=1", "display_name": "byrnedo", "link": "https://stackoverflow.com/users/3169138/byrnedo"}, "edited": false, "score": 0, "creation_date": 1436182663, "post_id": 29063656, "comment_id": 50487078, "body": "did you get this problem sorted? I think I&#39;m having the same issue, see <a href=\"http://stackoverflow.com/questions/31244438/mgo-newobjectid-corrupt-on-insert\" title=\"mgo newobjectid corrupt on insert\">stackoverflow.com/questions/31244438/&hellip;</a>"}, {"owner": {"reputation": 690, "user_id": 2202797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dc3b490486e51a36f6dd827eb5013b12?s=128&d=identicon&r=PG", "display_name": "collinglass", "link": "https://stackoverflow.com/users/2202797/collinglass"}, "edited": false, "score": 0, "creation_date": 1436184688, "post_id": 29063656, "comment_id": 50488322, "body": "It was an outdated version of mgo on my buddies windows system."}], "answers": [{"comments": [{"owner": {"reputation": 690, "user_id": 2202797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dc3b490486e51a36f6dd827eb5013b12?s=128&d=identicon&r=PG", "display_name": "collinglass", "link": "https://stackoverflow.com/users/2202797/collinglass"}, "edited": false, "score": 0, "creation_date": 1426441414, "post_id": 29063797, "comment_id": 46363876, "body": "Maybe utf-8 isn&#39;t my issue. When I use my mac, the above snapshot would show all human readable characters. When the objects are created/used on the windows machine we get these weird characters. And this is on mongolab website."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426446783, "post_id": 29063797, "comment_id": 46365685, "body": "It&#39;s pretty obvious from <a href=\"http://docs.mongodb.org/manual/reference/object-id/\" rel=\"nofollow noreferrer\">the documentation</a> that they are using Go strings as just a collection of bytes and so I&#39;d expect &quot;interesting&quot; output if trying to print it as-is (e.g. without %x or %q formatting). That&#39;s perfectly <a href=\"http://blog.golang.org/strings\" rel=\"nofollow noreferrer\">legal in Go</a> (even though normally you&#39;d see <code>[]byte</code> used for this, the advantage of using <code>string</code> is that it&#39;s read-only)."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426446927, "post_id": 29063797, "comment_id": 46365728, "body": "If I was them and I wanted to use an underlying string type I&#39;d have made a custom <code>type ObjectIDType string</code> (but with a better name) to make it clearer that it&#39;s not a plain string."}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426447215, "post_id": 29063797, "comment_id": 46365830, "body": "@DaveC They <a href=\"http://godoc.org/gopkg.in/mgo.v2/bson#ObjectId\" rel=\"nofollow noreferrer\">define a custom type named ObjectId</a>."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426447439, "post_id": 29063797, "comment_id": 46365920, "body": "@ThunderCat d&#39;oh, I read over that too quickly, ignore my second comment :^)"}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": false, "score": 1, "last_activity_date": 1426444951, "last_edit_date": 1426444951, "creation_date": 1426440222, "answer_id": 29063797, "question_id": 29063656, "link": "https://stackoverflow.com/questions/29063656/golang-mgo-mongodb-bson-objectid-non-utf-8-error/29063797#29063797", "title": "Golang mgo MongoDB bson.ObjectId non utf-8 error", "body": "<p>The Unicode replacement character in the screenshot suggests that the application is treating object ids as UTF-8 encoded text. Object ids contain binary data, not UTF-8 encoded text.</p>\n\n<p>Use the <a href=\"http://godoc.org/gopkg.in/mgo.v2/bson#ObjectId.Hex\" rel=\"nofollow\">Hex</a> method to convert an object id to human readable text.  </p>\n\n<p>Use <a href=\"http://godoc.org/gopkg.in/mgo.v2/bson#ObjectIdHex\" rel=\"nofollow\">ObjectIdHex</a> to convert the hex string representation back to an object id. Be careful to protect the call to ObjectIdHex with <a href=\"http://godoc.org/gopkg.in/mgo.v2/bson#IsObjectIdHex\" rel=\"nofollow\">IsObjectIdHex</a>. </p>\n"}], "owner": {"reputation": 690, "user_id": 2202797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dc3b490486e51a36f6dd827eb5013b12?s=128&d=identicon&r=PG", "display_name": "collinglass", "link": "https://stackoverflow.com/users/2202797/collinglass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 952, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426446951, "creation_date": 1426439595, "last_edit_date": 1426446951, "question_id": 29063656, "link": "https://stackoverflow.com/questions/29063656/golang-mgo-mongodb-bson-objectid-non-utf-8-error", "title": "Golang mgo MongoDB bson.ObjectId non utf-8 error", "body": "<p>I'm developing in go on my Mac using mongo and mgo driver.</p>\n\n<p>Everything works great on my Mac. When my friend works on the same codebase from his windows machine, we get these weird non utf-8 bson.ObjectIds.</p>\n\n<p>Here is a screenshot from mongolab.com (a hosted mongo server)</p>\n\n<p><img src=\"https://i.stack.imgur.com/mz0DV.png\" alt=\"enter image description here\"></p>\n\n<p>My code simply uses:</p>\n\n<pre><code>thing.Id = bson.NewObjectId() \nthing.eventId = event.Id\n</code></pre>\n\n<p>Has anyone had this issue? Does anyone know how to deal with that</p>\n\n<p>Edit: All bson functions used in this codebase are:</p>\n\n<pre><code>thing.Id = bson.NewObjectId()\nthing.Id = bson.ObjectIdHex(id)\nidString = thing.Id.Hex()\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 5024, "user_id": 1419891, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bb825cd3f1905f42c16408393480a65b?s=128&d=identicon&r=PG", "display_name": "425nesp", "link": "https://stackoverflow.com/users/1419891/425nesp"}, "edited": false, "score": 0, "creation_date": 1426495546, "post_id": 29063123, "comment_id": 46379503, "body": "As Elwinar said, in this case it doesn&#39;t matter, but usually you put <code>defer foo.Close()</code> right after whatever resource you open. Otherwise, you might forget to call <code>Close</code> later."}], "answers": [{"comments": [{"owner": {"reputation": 13920, "user_id": 371228, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a4028c5dd749d198d7a8f2601d4afe07?s=128&d=identicon&r=PG", "display_name": "bdesham", "link": "https://stackoverflow.com/users/371228/bdesham"}, "edited": false, "score": 0, "creation_date": 1426438652, "post_id": 29063235, "comment_id": 46362819, "body": "Great. I\u2019m new to Go and it wasn\u2019t clear to me that the connection would be closed even if the application was killed."}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1434843196, "post_id": 29063235, "comment_id": 49952466, "body": "Note that in the case of database connections, it&#39;s not super critical to you <code>db.Close</code> the entire pool. Else catching a signal (SIGTERM) and running it before actually calling <code>os.Exit</code> is probably the &quot;safest&quot; way to go. Don&#39;t get too distracted by that if you&#39;re just starting out."}], "tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": true, "score": 6, "last_activity_date": 1426580655, "last_edit_date": 1426580655, "creation_date": 1426437532, "answer_id": 29063235, "question_id": 29063123, "link": "https://stackoverflow.com/questions/29063123/when-should-i-close-the-database-connection-in-this-simple-web-app/29063235#29063235", "title": "When should I close the database connection in this simple web app?", "body": "<p>In this particular case, I tend to say you don't even need to bother: the connection will be closed when the program end, so you won't leak anything.</p>\n\n<p>If you really need to close things properly, the simpler choice is to use a <a href=\"https://godoc.org/github.com/stretchr/graceful\" rel=\"nofollow\">graceful</a> server, and <code>defer</code> the resources closing.</p>\n\n<p>Or, if your use case is more complicated, do it by hand by catching <a href=\"https://godoc.org/os/signal\" rel=\"nofollow\">signals</a> and gracefully shutting down your own way (using a closing channel for example).</p>\n"}, {"tags": [], "owner": {"reputation": 704, "user_id": 3536948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/50341f59bb4c3c845eb159056357aaf0?s=128&d=identicon&r=PG&f=1", "display_name": "poopoothegorilla", "link": "https://stackoverflow.com/users/3536948/poopoothegorilla"}, "is_accepted": false, "score": 5, "last_activity_date": 1434839930, "creation_date": 1434839930, "answer_id": 30959543, "question_id": 29063123, "link": "https://stackoverflow.com/questions/29063123/when-should-i-close-the-database-connection-in-this-simple-web-app/30959543#30959543", "title": "When should I close the database connection in this simple web app?", "body": "<p>It is important to understand that <code>sql.Open()</code> does not open a connection to the database... <a href=\"http://golang.org/pkg/database/sql/#Open\" rel=\"noreferrer\">http://golang.org/pkg/database/sql/#Open</a></p>\n\n<blockquote>\n  <p>Open may just validate its arguments without creating a connection to the database. To verify that the data source name is valid, call Ping.</p>\n</blockquote>\n\n<p>Also it is important to understand that the driver handles the maintance of connections. So you will likely want to keep it open for the lifetime of your app.</p>\n\n<blockquote>\n  <p>The returned DB is safe for concurrent use by multiple goroutines and maintains its own pool of idle connections. Thus, the Open function should be called just once. It is rarely necessary to close a DB.</p>\n</blockquote>\n"}], "owner": {"reputation": 13920, "user_id": 371228, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a4028c5dd749d198d7a8f2601d4afe07?s=128&d=identicon&r=PG", "display_name": "bdesham", "link": "https://stackoverflow.com/users/371228/bdesham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3866, "favorite_count": 0, "accepted_answer_id": 29063235, "answer_count": 2, "score": 8, "last_activity_date": 1434839930, "creation_date": 1426436996, "question_id": 29063123, "link": "https://stackoverflow.com/questions/29063123/when-should-i-close-the-database-connection-in-this-simple-web-app", "title": "When should I close the database connection in this simple web app?", "body": "<p>I\u2019m writing a simple Go web application that uses PostgreSQL. My <code>main</code> function looks like</p>\n\n<pre><code>var db *sql.DB\n\nfunc main() {\n    var err error\n    db, err = sql.Open(\"postgres\", \"...\")\n    if err != nil {\n        log.Fatalf(\"Couldn't connect to the database: %v\", err)\n    }\n\n    http.HandleFunc(\"/whatever\", whateverHandler)\n    http.ListenAndServe(\"127.0.0.1:8080\", nil)\n}\n</code></pre>\n\n<p>It seems like I should be calling <code>Close()</code> on the database connection at some point, but when? This application serves forever (i.e. until I kill it with <code>^C</code>). If I put code after the <code>ListenAndServe</code> call it doesn\u2019t get run, because my <code>^C</code> has killed the entire application. Should my application be structured differently?</p>\n"}, {"tags": ["arrays", "go", "byte", "unsafe"], "comments": [{"owner": {"reputation": 27317, "user_id": 893693, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/yHFyJ.jpg?s=128&g=1", "display_name": "Stephan Dollberg", "link": "https://stackoverflow.com/users/893693/stephan-dollberg"}, "edited": false, "score": 0, "creation_date": 1426430660, "post_id": 29061764, "comment_id": 46360021, "body": "Do you need to do it using the unsafe package?"}, {"owner": {"reputation": 159, "user_id": 4673275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06fe0f333180734da76bee0c850ef4f1?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Fernandez", "link": "https://stackoverflow.com/users/4673275/mike-fernandez"}, "reply_to_user": {"reputation": 27317, "user_id": 893693, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/yHFyJ.jpg?s=128&g=1", "display_name": "Stephan Dollberg", "link": "https://stackoverflow.com/users/893693/stephan-dollberg"}, "edited": false, "score": 0, "creation_date": 1426431155, "post_id": 29061764, "comment_id": 46360160, "body": "not necessarily, but 1) I&#39;ve spent some hours with this problem and I would like to know the solution, 2) I need that the file (as analyzed with an hex editor) has the uint32 without extra load, 3) the solution should work also with float32. I will write both the program that writes the file and the program that reads the file (same OS)."}, {"owner": {"reputation": 27317, "user_id": 893693, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/yHFyJ.jpg?s=128&g=1", "display_name": "Stephan Dollberg", "link": "https://stackoverflow.com/users/893693/stephan-dollberg"}, "edited": false, "score": 0, "creation_date": 1426431545, "post_id": 29061764, "comment_id": 46360303, "body": "I see, for easy usage I would recommend the <code>Write</code> and <code>Read</code> methods of the <a href=\"https://godoc.org/encoding/binary#Write\" rel=\"nofollow noreferrer\"><code>binary</code></a> package. Given their usage of interfaces they might have some overhead."}], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 16, "last_activity_date": 1426433758, "last_edit_date": 1426433758, "creation_date": 1426432021, "answer_id": 29062148, "question_id": 29061764, "link": "https://stackoverflow.com/questions/29061764/golang-convert-uint32-or-any-built-in-type-to-byte-to-be-written-in-a-file/29062148#29062148", "title": "golang: convert uint32 (or any built-in type) to []byte (to be written in a file)", "body": "<p>Here's one way to do it:</p>\n\n<pre><code>h := (uint32)(((fh.year*100+fh.month)*100+fh.day)*100 + fh.h)\na := (*[4]byte)(unsafe.Pointer(&amp;h))[:]\n</code></pre>\n\n<p>Here's a breakdown of what's going on. The code</p>\n\n<pre><code>(*[4]byte)(unsafe.Pointer(&amp;h))\n</code></pre>\n\n<p>converts the uint32 pointer to a [4]byte pointer.  The</p>\n\n<pre><code>[:]\n</code></pre>\n\n<p>at the end creates a slice on the [4]byte.</p>\n\n<p>The code in the question interprets the uint32 as a <a href=\"http://godoc.org/reflect#SliceHeader\">slice header</a>. The resulting slice is not valid and <code>copy</code> faults. </p>\n\n<p>An alternative approach that does not use unsafe is to use the <a href=\"http://godoc.org/encoding/binary\">encoding/binary</a> package:</p>\n\n<pre><code>h := (uint32)(((fh.year*100+fh.month)*100+fh.day)*100 + fh.h)\na := make([]byte, 4)\nbinary.LittleEndian.PutUint32(a, h)\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 4673275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06fe0f333180734da76bee0c850ef4f1?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Fernandez", "link": "https://stackoverflow.com/users/4673275/mike-fernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14937, "favorite_count": 3, "accepted_answer_id": 29062148, "answer_count": 1, "score": 13, "last_activity_date": 1426435168, "creation_date": 1426429827, "question_id": 29061764, "link": "https://stackoverflow.com/questions/29061764/golang-convert-uint32-or-any-built-in-type-to-byte-to-be-written-in-a-file", "title": "golang: convert uint32 (or any built-in type) to []byte (to be written in a file)", "body": "<p>I'm trying to convert an <em>uint32</em> to a byte array (4 bytes) in Go using the <strong>unsafe</strong> library:</p>\n\n<pre><code>h := (uint32)(((fh.year*100+fh.month)*100+fh.day)*100 + fh.h)\na := make([]byte, unsafe.Sizeof(h))\ncopy(a, *(*[]byte)(unsafe.Pointer(&amp;h)))\n</code></pre>\n\n<p>The first two lines are correct, but then I get a runtime error ( <em>unexpected fault address</em> ) at the <em>copy</em> call.</p>\n\n<p>The next step would be to call <em>Write</em> </p>\n\n<pre><code>_, err = fi.Write(a)\n</code></pre>\n\n<p>to write the 4 bytes into a file.</p>\n\n<p>I've found other questions with a similar topic, but none with a working code. \nI'm also aware that <em>unsafe</em> is unsafe.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 21722, "user_id": 357705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb8f635bfd71c18b91e1b0ed5d2ee9?s=128&d=identicon&r=PG", "display_name": "jimt", "link": "https://stackoverflow.com/users/357705/jimt"}, "edited": false, "score": 1, "creation_date": 1426427702, "post_id": 29060922, "comment_id": 46359006, "body": "See <a href=\"http://stackoverflow.com/a/12361325/357705\">stackoverflow.com/a/12361325/357705</a>"}, {"owner": {"reputation": 1806, "user_id": 1290607, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YHMrJ.png?s=128&g=1", "display_name": "Bula", "link": "https://stackoverflow.com/users/1290607/bula"}, "reply_to_user": {"reputation": 21722, "user_id": 357705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb8f635bfd71c18b91e1b0ed5d2ee9?s=128&d=identicon&r=PG", "display_name": "jimt", "link": "https://stackoverflow.com/users/357705/jimt"}, "edited": false, "score": 0, "creation_date": 1426430188, "post_id": 29060922, "comment_id": 46359880, "body": "@jimt I guess that I will need to have a protocol in which I send a <code>\\n</code> to make the input work and at the same time discard it when reading it. For testing purposes whats the binary representation of newline? (a better way to phrase this question would be: what is the number that I need to include in my byte slice to have a newline) ?"}, {"owner": {"reputation": 21722, "user_id": 357705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb8f635bfd71c18b91e1b0ed5d2ee9?s=128&d=identicon&r=PG", "display_name": "jimt", "link": "https://stackoverflow.com/users/357705/jimt"}, "edited": false, "score": 0, "creation_date": 1426430328, "post_id": 29060922, "comment_id": 46359923, "body": "0x0a should do the trick."}, {"owner": {"reputation": 1806, "user_id": 1290607, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YHMrJ.png?s=128&g=1", "display_name": "Bula", "link": "https://stackoverflow.com/users/1290607/bula"}, "reply_to_user": {"reputation": 21722, "user_id": 357705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb8f635bfd71c18b91e1b0ed5d2ee9?s=128&d=identicon&r=PG", "display_name": "jimt", "link": "https://stackoverflow.com/users/357705/jimt"}, "edited": false, "score": 0, "creation_date": 1426431209, "post_id": 29060922, "comment_id": 46360182, "body": "@jimt check my new code. <code>b</code> only gets printed once."}, {"owner": {"reputation": 21722, "user_id": 357705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb8f635bfd71c18b91e1b0ed5d2ee9?s=128&d=identicon&r=PG", "display_name": "jimt", "link": "https://stackoverflow.com/users/357705/jimt"}, "edited": false, "score": 0, "creation_date": 1426431262, "post_id": 29060922, "comment_id": 46360200, "body": "<code>p := []byte{121,100,125,125,111,100,161,152, 0x0a}</code> Check out this example: <a href=\"http://play.golang.org/p/QMOPsPWF7t\" rel=\"nofollow noreferrer\">play.golang.org/p/QMOPsPWF7t</a> You can replace the <code>stdin</code> byte buffer with <code>os.Stdin</code> on your own system. The playground doesn&#39;t allow use of <code>os.Stdin</code>."}, {"owner": {"reputation": 21722, "user_id": 357705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb8f635bfd71c18b91e1b0ed5d2ee9?s=128&d=identicon&r=PG", "display_name": "jimt", "link": "https://stackoverflow.com/users/357705/jimt"}, "edited": false, "score": 0, "creation_date": 1426431526, "post_id": 29060922, "comment_id": 46360294, "body": "Or this one, if you don&#39;t like the use of strings as messages: <a href=\"http://play.golang.org/p/rhk8liXmJ4\" rel=\"nofollow noreferrer\">play.golang.org/p/rhk8liXmJ4</a>"}, {"owner": {"reputation": 1806, "user_id": 1290607, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YHMrJ.png?s=128&g=1", "display_name": "Bula", "link": "https://stackoverflow.com/users/1290607/bula"}, "reply_to_user": {"reputation": 21722, "user_id": 357705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb8f635bfd71c18b91e1b0ed5d2ee9?s=128&d=identicon&r=PG", "display_name": "jimt", "link": "https://stackoverflow.com/users/357705/jimt"}, "edited": false, "score": 0, "creation_date": 1426432251, "post_id": 29060922, "comment_id": 46360546, "body": "@jimt Right. Looking at your examples I modified the code above to have the newline at the end. I don&#39;t want the <code>read</code> to ever return hence the reason why I wrote the function as I did. The problem is that it doesn&#39;t reach  <code>give_func_write</code> and what&#39;s more it only prints <code>b</code> once although it should print it at every iteration of the loop. Is something blocking in this code? I really appreciate your go playground examples and I have used their principle to try to fix my code but it seems as if something is blocking?"}, {"owner": {"reputation": 21722, "user_id": 357705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb8f635bfd71c18b91e1b0ed5d2ee9?s=128&d=identicon&r=PG", "display_name": "jimt", "link": "https://stackoverflow.com/users/357705/jimt"}, "edited": false, "score": 0, "creation_date": 1426433550, "post_id": 29060922, "comment_id": 46360992, "body": "The code above writes the 3 bytes + &#39;\\n&#39; to stdin only once. So it stands to reason it&#39;s only read once. The goroutine you spin up at the top does this and then exits. Did you intend for it to have a loop?"}, {"owner": {"reputation": 1806, "user_id": 1290607, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YHMrJ.png?s=128&g=1", "display_name": "Bula", "link": "https://stackoverflow.com/users/1290607/bula"}, "reply_to_user": {"reputation": 21722, "user_id": 357705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cb8f635bfd71c18b91e1b0ed5d2ee9?s=128&d=identicon&r=PG", "display_name": "jimt", "link": "https://stackoverflow.com/users/357705/jimt"}, "edited": false, "score": 0, "creation_date": 1426435644, "post_id": 29060922, "comment_id": 46361747, "body": "@jimt it does indeed only write 4 bytes only once however the full code that should be executed, that is to print &#39;a&#39; and to run &#39;give_func_write`, doesn&#39;t execute even once."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426440912, "post_id": 29060922, "comment_id": 46363704, "body": "You should <b>never</b> write to std<i>in</i>."}, {"owner": {"reputation": 1806, "user_id": 1290607, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YHMrJ.png?s=128&g=1", "display_name": "Bula", "link": "https://stackoverflow.com/users/1290607/bula"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426533611, "post_id": 29060922, "comment_id": 46403134, "body": "@DaveC is this what&#39;s causing that code to not execute?"}, {"owner": {"reputation": 4183, "user_id": 124179, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/977471a7792cba5ccfbd569f77d805b8?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/124179/justin"}, "edited": false, "score": 0, "creation_date": 1429716724, "post_id": 29060922, "comment_id": 47732544, "body": "@bula did you get this to work ? Trying to build similar golang driver for erlang but getting &quot;Bad value on output port &#39;#{driver}&#39;&quot; on erlang side :-("}], "answers": [{"tags": [], "owner": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "is_accepted": true, "score": 7, "last_activity_date": 1567879705, "last_edit_date": 1567879705, "creation_date": 1426550191, "answer_id": 29089033, "question_id": 29060922, "link": "https://stackoverflow.com/questions/29060922/reading-from-stdin-in-golang/29089033#29089033", "title": "Reading from stdin in golang", "body": "<blockquote>\n  <p>I guess that I will need to have a protocol in which I send a \\n to\n  make the input work and at the same time discard it when reading it</p>\n</blockquote>\n\n<p>No, you don't. Stdin is line-buffered only if it's bound to terminal. You can run your program <code>prog &lt; /dev/zero</code> or <code>cat file | prog</code>.</p>\n\n<blockquote>\n  <p>bufio.NewWriter(os.Stdin).Write(p)</p>\n</blockquote>\n\n<p>You probably don't want to write to <code>stdin</code>. See \"<a href=\"https://stackoverflow.com/questions/7383803/writing-to-stdin-and-reading-from-stdout-unix-linux-c-programming\">Writing to stdin and reading from stdout</a>\" for details.</p>\n\n<p>Well, it's not particular clear for me what you're trying to achieve. I'm assuming, that you just want to read data from <code>stdin</code> by fixed-size chunks. Use <a href=\"http://golang.org/pkg/io/#ReadFull\" rel=\"nofollow noreferrer\">io.ReadFull</a> for this. Or if you want to use buffers, you can use <a href=\"http://golang.org/pkg/bufio/#Reader.Peek\" rel=\"nofollow noreferrer\">Reader.Peek</a> or <a href=\"http://golang.org/pkg/bufio/#Scanner\" rel=\"nofollow noreferrer\">Scanner</a> to ensure, that specific number of bytes is available. I've changed your program to demonstrate the usage of <code>io.ReadFull</code>:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"io\"\n    \"time\"\n)\n\nfunc main() {\n    input, output := io.Pipe()\n\n    go func() {\n        defer output.Close()\n        for _, m := range []byte(\"123456\") {\n            output.Write([]byte{m})\n            time.Sleep(time.Second)\n        }\n    }()\n\n    message := make([]byte, 3)\n    _, err := io.ReadFull(input, message)\n    for err == nil {\n        fmt.Println(string(message))\n        _, err = io.ReadFull(input, message)\n    }\n    if err != io.EOF {\n        panic(err)\n    }\n}\n</code></pre>\n\n<p>You can easily split it in two programs and test it that way. Just change <code>input</code> to <code>os.Stdin</code>.</p>\n"}], "owner": {"reputation": 1806, "user_id": 1290607, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YHMrJ.png?s=128&g=1", "display_name": "Bula", "link": "https://stackoverflow.com/users/1290607/bula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15208, "favorite_count": 1, "accepted_answer_id": 29089033, "answer_count": 1, "score": 2, "last_activity_date": 1567879705, "creation_date": 1426424840, "last_edit_date": 1426438811, "question_id": 29060922, "link": "https://stackoverflow.com/questions/29060922/reading-from-stdin-in-golang", "title": "Reading from stdin in golang", "body": "<p>I'm trying to read from Stdin in Golang as I'm trying to implement a driver for Erlang. I have the following code:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"os\"\n    \"bufio\"\n    \"time\"\n)\n\nfunc main() {\n    go func() { \n        stdout := bufio.NewWriter(os.Stdin) \n        p := []byte{121,100,125,'\\n'}\n        stdout.Write(p)\n        }()\n    stdin := bufio.NewReader(os.Stdin)\n    values := make([]byte,4,4)\n    for{\n        fmt.Println(\"b\")\n        if read_exact(stdin) &gt; 0 {\n            stdin.Read(values)\n            fmt.Println(\"a\")\n            give_func_write(values)\n        }else{\n            continue\n        }\n    }\n}\n\n\n\n\nfunc read_exact(r *bufio.Reader) int {\n    bits := make([]byte,3,3)\n    a,_ := r.Read(bits)\n    if a &gt; 0 {\n        r.Reset(r)\n        return 1\n    }\n    return -1\n}\n\nfunc give_func_write(a []byte) bool {\n    fmt.Println(\"Yahu\")\n    return true\n}\n</code></pre>\n\n<p>However it seems that the <code>give_func_write</code> is never reached. I tried to start a goroutine to write to standard input after 2 seconds to test this.</p>\n\n<p>What am I missing here?\nAlso the line <code>r.Reset(r)</code>. Is this valid in go? What I tried to achieve is simply restart the reading from the beginning of the file. Is there a better way?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>After having played around I was able to find that the code is stuck at <code>a,_ := r.Read(bits)</code> in the <code>read_exact</code> function</p>\n"}, {"tags": ["go", "goroutine"], "answers": [{"tags": [], "owner": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "is_accepted": false, "score": 9, "last_activity_date": 1426394846, "creation_date": 1426394846, "answer_id": 29057335, "question_id": 29057210, "link": "https://stackoverflow.com/questions/29057210/does-the-goroutines-created-in-the-same-goroutines-execute-always-in-order/29057335#29057335", "title": "Does the goroutines created in the same goroutines execute always in order?", "body": "<p>No, they are not guaranteed to run in order.  With <code>GOMAXPROCS=1</code> (the default) they appear to, but this is not guaranteed by the language spec.</p>\n\n<p>And when I run your program with <code>GOMAXPROCS=6</code>, the output is non-deterministic:</p>\n\n<pre><code>$ GOMAXPROCS=6 ./test\n2\n0\n1\n4\n3\n5\n6\n7\n8\n9\n...\n</code></pre>\n\n<p>On another run, the output was slightly different.</p>\n\n<p>If you want a set of sends on a channel to happen in order, the best solution would be to perform them from the same goroutine.</p>\n"}, {"tags": [], "owner": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "is_accepted": true, "score": 5, "last_activity_date": 1426421433, "creation_date": 1426421433, "answer_id": 29060433, "question_id": 29057210, "link": "https://stackoverflow.com/questions/29057210/does-the-goroutines-created-in-the-same-goroutines-execute-always-in-order/29060433#29060433", "title": "Does the goroutines created in the same goroutines execute always in order?", "body": "<p>What you observe as \"random\" behaviour is, more strictly, non-deterministic behaviour.</p>\n\n<p>To understand what is happening here, think about the behaviour of the channel. In this case, it has many goroutines trying to write into the channel, and just one goroutine reading out of the channel.</p>\n\n<p>The reading process is simply sequential and we can disregard it.</p>\n\n<p>There are many concurrent writing processes and they are competing to access a shared resource (the channel). The channel has to make choices about which message it will accept.</p>\n\n<p>When a Communicating Sequential Process (CSP) network makes a <strong><em>choice</em></strong>, it introduces <strong><em>non-determinism</em></strong>. In Go, there are two ways that this kind of choice happens:</p>\n\n<ul>\n<li>concurrent access to one of the ends of a channel, and</li>\n<li><code>select</code> statements.</li>\n</ul>\n\n<p>Your case is the first of these.</p>\n\n<p>CSP is an algebra that allows concurrent behaviours to be analysed and understood. A seminal publication on this is Roscoe and Hoare \"<em>The Laws of Occam Programming</em>\" <a href=\"https://www.cs.ox.ac.uk/files/3376/PRG53.pdf\" rel=\"noreferrer\">https://www.cs.ox.ac.uk/files/3376/PRG53.pdf</a> (similar ideas apply to Go also, although there are small differences).</p>\n\n<p>Surprisingly, the concurrent execution of goroutines is <em>fully deterministic</em>. It's <strong>only when choices are made</strong> that non-determinism comes in.</p>\n"}], "owner": {"reputation": 307, "user_id": 1306312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4623558095bc289745e22692ac49d7d8?s=128&d=identicon&r=PG", "display_name": "vzex", "link": "https://stackoverflow.com/users/1306312/vzex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 4, "accepted_answer_id": 29060433, "answer_count": 2, "score": 3, "last_activity_date": 1426421433, "creation_date": 1426393277, "question_id": 29057210, "link": "https://stackoverflow.com/questions/29057210/does-the-goroutines-created-in-the-same-goroutines-execute-always-in-order", "title": "Does the goroutines created in the same goroutines execute always in order?", "body": "<pre><code>package main\n\nfunc main() {\n        c:=make(chan int)\n        for i:=0; i&lt;=100;i++ {\n                i:=i\n                go func() {\n                        c&lt;-i\n                }() \n        }   \n        for {\n                b:=&lt;-c\n                println(b)\n                if b==100 {\n                        break\n                }   \n        }   \n}\n</code></pre>\n\n<p>The above code created 100 goroutines to insert num to channel c, so I just wonder that, will these goroutines execute in random orders? During my test, the output will always be 1 to 100</p>\n"}, {"tags": ["go", "cgo"], "answers": [{"comments": [{"owner": {"reputation": 9586, "user_id": 1000282, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/371832f83b79a41443fa50d3793b0cfd?s=128&d=identicon&r=PG", "display_name": "pepper_chico", "link": "https://stackoverflow.com/users/1000282/pepper-chico"}, "edited": false, "score": 0, "creation_date": 1426609207, "post_id": 29099977, "comment_id": 46438659, "body": "Besides it not being thread-safe, does it address the issue? I can&#39;t see how. My intent was to have a callback defined once, to be called from CGO in other packages. My current solution is described here: <a href=\"https://groups.google.com/d/msg/golang-nuts/HPk978cQdI8/PnC35ekmtukJ\" rel=\"nofollow noreferrer\">groups.google.com/d/msg/golang-nuts/HPk978cQdI8/PnC35ekmtukJ</a>"}], "tags": [], "owner": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "is_accepted": false, "score": 0, "last_activity_date": 1426597841, "creation_date": 1426597841, "answer_id": 29099977, "question_id": 29056808, "link": "https://stackoverflow.com/questions/29056808/how-to-reuse-a-go-callback-in-several-packages-from-c/29099977#29099977", "title": "How to reuse a Go callback in several packages from C?", "body": "<p>Here is an example, that will accept any go callback (not thread-safe).</p>\n\n<p>b.go:</p>\n\n<pre><code>package b\n\n// typedef void (*cbFunc) ();\n// void do_run(cbFunc);\n// void goCallback();\nimport \"C\"\n\n//export goCallback\nfunc goCallback() {\n    if goCallbackHolder != nil {\n        goCallbackHolder()\n    }\n}\n\nvar goCallbackHolder func()\n\nfunc Run(callback func()) {\n    goCallbackHolder = callback\n    C.do_run(C.cbFunc(C.goCallback))\n}\n</code></pre>\n\n<p>b.c:</p>\n\n<pre><code>#include \"_cgo_export.h\"\n\nvoid do_run(void (*callback)())\n{\n    callback();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9586, "user_id": 1000282, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/371832f83b79a41443fa50d3793b0cfd?s=128&d=identicon&r=PG", "display_name": "pepper_chico", "link": "https://stackoverflow.com/users/1000282/pepper-chico"}, "is_accepted": false, "score": 0, "last_activity_date": 1426732532, "last_edit_date": 1426732532, "creation_date": 1426640192, "answer_id": 29112411, "question_id": 29056808, "link": "https://stackoverflow.com/questions/29056808/how-to-reuse-a-go-callback-in-several-packages-from-c/29112411#29112411", "title": "How to reuse a Go callback in several packages from C?", "body": "<p>I couldn't make it to work in a simple fashion IMO.</p>\n\n<p>Given main package <code>X</code> that imports <code>Y</code> and <code>Z</code>, both having to call (from C source code) <code>F</code> declared in package <code>M</code>,</p>\n\n<p>I had to:</p>\n\n<ol>\n<li>Create a small wrapper <code>W1</code> for <code>F</code> in <code>Y</code> and export it to be called from <code>Y</code>'s C source.</li>\n<li>Create a small wrapper <code>W2</code> for <code>F</code> in <code>Z</code> and export it to be called from <code>Z</code>'s C source.</li>\n<li>In <code>Y</code> CGO CPPFLAGS define <code>-DCALLBACK=W1</code></li>\n<li>In <code>Z</code> CGO CPPFLAGS define <code>-DCALLBACK=W2</code></li>\n<li>From C source code, anywhere, I'm now able to refer to <code>F</code> as <code>CALLBACK</code> (yeah, internally it's all different stuff, which I refer to using a single name at one end to call a single function at the other end).</li>\n</ol>\n\n<p>This is convoluted, but it's working, although configuring such macros and producing little wrappers\nis not being ideal. If anyone could detail a simpler procedure I would be glad. Everything\nI tried ended up with duplicated symbols or non-visible declarations.</p>\n"}, {"comments": [{"owner": {"reputation": 9586, "user_id": 1000282, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/371832f83b79a41443fa50d3793b0cfd?s=128&d=identicon&r=PG", "display_name": "pepper_chico", "link": "https://stackoverflow.com/users/1000282/pepper-chico"}, "edited": false, "score": 0, "creation_date": 1427054339, "post_id": 29196372, "comment_id": 46610680, "body": "Dude, many thanks for this, I thought no one would answer this one. This is precisely what I was looking for, even though I have long experience with C, I didn&#39;t have the know-how of the linker flags you used."}, {"owner": {"reputation": 9586, "user_id": 1000282, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/371832f83b79a41443fa50d3793b0cfd?s=128&d=identicon&r=PG", "display_name": "pepper_chico", "link": "https://stackoverflow.com/users/1000282/pepper-chico"}, "edited": false, "score": 0, "creation_date": 1427054693, "post_id": 29196372, "comment_id": 46610800, "body": "Thanks, it&#39;s good for me to know codebases on this field at this moment since I&#39;m interfacing golang and c++14."}], "tags": [], "owner": {"reputation": 20703, "user_id": 2805033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TasHL.jpg?s=128&g=1", "display_name": "Ben Darnell", "link": "https://stackoverflow.com/users/2805033/ben-darnell"}, "is_accepted": true, "score": 3, "last_activity_date": 1427039181, "creation_date": 1427039181, "answer_id": 29196372, "question_id": 29056808, "link": "https://stackoverflow.com/questions/29056808/how-to-reuse-a-go-callback-in-several-packages-from-c/29196372#29196372", "title": "How to reuse a Go callback in several packages from C?", "body": "<p>I don't see a way to call a Go function across packages, but all cgo packages are linked into the same binary and can call each other. This means that you can export M.F to a C function in package M and call that C function from packages Y and Z.</p>\n\n<p>m/m.go:</p>\n\n<pre><code>package m\n\n// void F();\nimport \"C\"\nimport \"fmt\"\n\n//export F\nfunc F() {\n    fmt.Println(\"m.f\")\n}\n</code></pre>\n\n<p>m/m.h:</p>\n\n<pre><code>void m_f();\n</code></pre>\n\n<p>m/m.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"_cgo_export.h\"\n#include \"m.h\"\n\nvoid m_f() {\n    printf(\"m_f\\n\")\n    F();\n}\n</code></pre>\n\n<p>y/y.go:</p>\n\n<pre><code>package y\n\n// The LDFLAGS lines below are needed to prevent linker errors\n// since not all packages are present while building intermediate\n// packages. The darwin build tag is used as a proxy for clang\n// versus gcc because there doesn't seem to be a better way\n// to detect this.\n\n// #cgo darwin LDFLAGS: -Wl,-undefined -Wl,dynamic_lookup\n// #cgo !darwin LDFLAGS: -Wl,-unresolved-symbols=ignore-all\n// #include \"y.h\"\nimport \"C\"\n\nimport (\n    \"fmt\"\n    _ \"m\"\n)\n\nfunc Y() {\n    fmt.Println(\"y.Y\")\n    C.y()\n}\n</code></pre>\n\n<p>y/y.h:</p>\n\n<pre><code>void y();\n</code></pre>\n\n<p>y/y.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"../m/m.h\"\n\nvoid y() {\n    printf(\"y.C.y\\n\");\n    m_f();\n}\n</code></pre>\n"}], "owner": {"reputation": 9586, "user_id": 1000282, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/371832f83b79a41443fa50d3793b0cfd?s=128&d=identicon&r=PG", "display_name": "pepper_chico", "link": "https://stackoverflow.com/users/1000282/pepper-chico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 2, "accepted_answer_id": 29196372, "answer_count": 3, "score": 2, "last_activity_date": 1427039181, "creation_date": 1426388822, "last_edit_date": 1426732248, "question_id": 29056808, "link": "https://stackoverflow.com/questions/29056808/how-to-reuse-a-go-callback-in-several-packages-from-c", "title": "How to reuse a Go callback in several packages from C?", "body": "<p>Is there a way to build a Go + C application that:</p>\n\n<ul>\n<li>From main package X, import packages Y and Z.</li>\n<li>Package M exports a go callback F.</li>\n<li>Packages X and Y are both built with accompanying C files, both want\nto call F from C source code.</li>\n</ul>\n\n<p>Generally speaking I'm trying to figure out how to call a callback from accompanying C files in other modules which are used to build a final application. I coudn't figure out how to achieve this or something similar. I'm also interested in convoluted solutions.</p>\n"}, {"tags": ["go", "redis", "key-value"], "answers": [{"comments": [{"owner": {"reputation": 2144, "user_id": 3103732, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ddea83f3d0a1cde074665d4c1382c3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Dany", "link": "https://stackoverflow.com/users/3103732/dany"}, "edited": false, "score": 0, "creation_date": 1426390604, "post_id": 29056763, "comment_id": 46350963, "body": "Could you please explain why we use the range as 0, -1? And Is there any place where I can refer go examples for REDIS commands?"}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 1, "creation_date": 1426391230, "post_id": 29056763, "comment_id": 46351074, "body": "<a href=\"http://redis.io/commands\" rel=\"nofollow noreferrer\">redis.io/commands</a> - in this case, <code>0</code> is the start of the list and <code>-1</code> represents the last element of the list. The <code>-1</code> idiom is common amongst programming languages to represent the same thing."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4122236"}, "is_accepted": true, "score": 8, "last_activity_date": 1426388352, "creation_date": 1426388352, "answer_id": 29056763, "question_id": 29055843, "link": "https://stackoverflow.com/questions/29055843/how-to-get-a-value-which-is-a-list-from-redis-key-value-store-in-golang/29056763#29056763", "title": "How to get a value which is a list from redis key-value store in golang?", "body": "<p>Use <a href=\"http://redis.io/commands/lrange\" rel=\"noreferrer\">LRANGE</a> to get the elements of a list:</p>\n\n<pre><code>func GetValues(key string) []string {\n  value, err := redis.Strings(conn.Do(\"LRANGE\", key, 0, -1))\n  if err != nil {\n    log.Fatal(err)\n  }\n  return value\n}\n</code></pre>\n\n<p>The GET command gets the value of a string key. The GET command does not work on list keys.</p>\n"}], "owner": {"reputation": 2144, "user_id": 3103732, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ddea83f3d0a1cde074665d4c1382c3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Dany", "link": "https://stackoverflow.com/users/3103732/dany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4094, "favorite_count": 0, "accepted_answer_id": 29056763, "answer_count": 1, "score": 3, "last_activity_date": 1426388352, "creation_date": 1426378752, "last_edit_date": 1426379315, "question_id": 29055843, "link": "https://stackoverflow.com/questions/29055843/how-to-get-a-value-which-is-a-list-from-redis-key-value-store-in-golang", "title": "How to get a value which is a list from redis key-value store in golang?", "body": "<p>I am writing a function in golang to get the value from redis db by passing the key. The value is a list. I am using 'GET' redis command to get the value. But it is giving me error.</p>\n\n<p>You can find below the code,</p>\n\n<pre><code>func GetValue(key string) []string {\n    var value []string\n    var err error\n    value, err = redis.Strings(conn.Do(\"GET\", key))\n\n    if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Println(value)\n    return value\n}\n\nfunc RetrieveValue() {\n    keyType, _ := conn.Do(\"TYPE\", recentItemKey)\n    fmt.Println(\"Type\", keyType)\n\n    var results []string\n    results = GetValue(recentItemKey)\n\n    for _, val := range results {\n        fmt.Println(val)\n    }\n}\n</code></pre>\n\n<p>And the output is here,</p>\n\n<pre><code>Type list\n2015/03/14 19:09:12 WRONGTYPE Operation against a key holding the wrong kind of value\nexit status 1\n</code></pre>\n\n<p><strong>Version</strong></p>\n\n<pre><code>Go 1.4.2\nRedis-2.8.19\n</code></pre>\n\n<p><strong>Redis Go Library</strong></p>\n\n<pre><code>github.com/garyburd/redigo/redis\n</code></pre>\n\n<p>Could anyone help me on this.? Thank you</p>\n"}, {"tags": ["google-app-engine", "go"], "answers": [{"tags": [], "owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "is_accepted": true, "score": 2, "last_activity_date": 1426380056, "creation_date": 1426380056, "answer_id": 29055970, "question_id": 29054483, "link": "https://stackoverflow.com/questions/29054483/secure-way-to-use-pem-file-on-app-engin/29055970#29055970", "title": "Secure way to use pem file on app engin", "body": "<p>\"Static files\" <strong>are</strong> served to users, as <a href=\"https://cloud.google.com/appengine/docs/go/config/appconfig#Go_app_yaml_Static_file_handlers\" rel=\"nofollow\">https://cloud.google.com/appengine/docs/go/config/appconfig#Go_app_yaml_Static_file_handlers</a> makes it clear.  To quote from this URL:</p>\n\n<blockquote>\n  <p>If you have data files that need to be read by the application code,\n  the data files must be application files, and must not be matched by a\n  static file pattern.</p>\n</blockquote>\n\n<p>With this approach, you'll just upload the <code>.pem</code> together with the rest of your application and read it from your code as a local file.</p>\n"}], "owner": {"reputation": 2175, "user_id": 817571, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3eb3aee0450c2c335756206fe6ab70ed?s=128&d=identicon&r=PG", "display_name": "MIkCode", "link": "https://stackoverflow.com/users/817571/mikcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 29055970, "answer_count": 1, "score": 0, "last_activity_date": 1426380056, "creation_date": 1426368914, "question_id": 29054483, "link": "https://stackoverflow.com/questions/29054483/secure-way-to-use-pem-file-on-app-engin", "title": "Secure way to use pem file on app engin", "body": "<p>I want to implement a service that will return a signed URL to a client\nIm using this code as reference <a href=\"https://cloud.google.com/storage/docs/access-control#signing-code-go\" rel=\"nofollow\">signing-code-go</a> .</p>\n\n<p>Im thinking to  upload the file as use the app.yaml to serve it to the application only  something like that .</p>\n\n<pre><code>- url: /files\n static_dir: files\n</code></pre>\n\n<p>What will be the best and secure way to use the <strong>pem</strong> file inside the server? </p>\n"}, {"tags": ["go", "google-cloud-storage"], "answers": [{"tags": [], "owner": {"reputation": 2175, "user_id": 817571, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3eb3aee0450c2c335756206fe6ab70ed?s=128&d=identicon&r=PG", "display_name": "MIkCode", "link": "https://stackoverflow.com/users/817571/mikcode"}, "is_accepted": true, "score": 1, "last_activity_date": 1426503334, "creation_date": 1426503334, "answer_id": 29075094, "question_id": 29054298, "link": "https://stackoverflow.com/questions/29054298/cant-find-import-google-golang-org-cloud-storage/29075094#29075094", "title": "can&#39;t find import: &quot;google.golang.org/cloud/storage&quot;", "body": "<p>Google has change  thire repository and i missed it...</p>\n\n<p><a href=\"https://code.google.com/p/google-api-go-client/\" rel=\"nofollow\">google-api-go-client</a></p>\n\n<p>So the solution is  to do go get to that  and evrthing working fine.</p>\n\n<pre><code>go get -u google.golang.org/api/storage/v1\n</code></pre>\n"}], "owner": {"reputation": 2175, "user_id": 817571, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3eb3aee0450c2c335756206fe6ab70ed?s=128&d=identicon&r=PG", "display_name": "MIkCode", "link": "https://stackoverflow.com/users/817571/mikcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1464, "favorite_count": 0, "accepted_answer_id": 29075094, "answer_count": 1, "score": 1, "last_activity_date": 1426503334, "creation_date": 1426367718, "question_id": 29054298, "link": "https://stackoverflow.com/questions/29054298/cant-find-import-google-golang-org-cloud-storage", "title": "can&#39;t find import: &quot;google.golang.org/cloud/storage&quot;", "body": "<p>I want to work  with the cloud api <a href=\"https://github.com/GoogleCloudPlatform/gcloud-golang\" rel=\"nofollow\">gcloud-golang</a> so i did go get in the <strong>src folder</strong> </p>\n\n<pre><code>goapp get google.golang.org/cloud\n</code></pre>\n\n<p>I can \"see\" the library  in th liteIDE but i cant <strong>goapp serve</strong> </p>\n\n<p>Im getting this exception </p>\n\n<pre><code>/home/mik/go-programs/src/google.golang.org/cloud/storage/acl.go:21: can't find import: \"google.golang.org/api/storage/v1\"\n\n2015/03/14 23:13:37 Can't find package \"google.golang.org/api/googleapi\" in $GOPATH: cannot find package \"google.golang.org/api/googleapi\" in any of:\n    /home/mik/go_appengine/goroot/src/google.golang.org/api/googleapi (from $GOROOT)\n    /home/mik/go-programs/src/google.golang.org/api/googleapi (from $GOPATH)\n    /home/mik/goroot/pkg/src/google.golang.org/api/googleapi\n    /home/mik/go_appengine/src/google.golang.org/api/googleapi\n2015/03/14 23:13:37 Can't find package \"google.golang.org/api/storage/v1\" in $GOPATH: cannot find package \"google.golang.org/api/storage/v1\" in any of:\n    /home/mik/go_appengine/goroot/src/google.golang.org/api/storage/v1 (from $GOROOT)\n    /home/mik/go-programs/src/google.golang.org/api/storage/v1 (from $GOPATH)\n    /home/mik/goroot/pkg/src/google.golang.org/api/storage/v1\n    /home/mik/go_appengine/src/google.golang.org/api/storage/v1\n2015/03/14 23:13:37 go-app-builder: build timing: 5\u00d76g (223ms total), 0\u00d7gopack (0 total), 0\u00d76l (0 total)\n2015/03/14 23:13:37 go-app-builder: failed running 6g: exit status 1\n</code></pre>\n"}, {"tags": ["go", "go-html-template"], "comments": [{"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "edited": false, "score": 2, "creation_date": 1426350125, "post_id": 29050813, "comment_id": 46340279, "body": "Go has no exceptions.  You are ignoring errors by doing <code>t, _ := ...</code>."}], "answers": [{"comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 2, "creation_date": 1426384058, "post_id": 29051224, "comment_id": 46349880, "body": "Note that catching the error from <code>t.Execute</code> puts you in a tricky spot - it&#39;s too late to actually show the user an error since the http.ResponseWriter has already been written too.  The common way to deal with this is to create buffer pool that you write to (and if it fails, send a HTTP 500) and then <code>io.Copy(w, bufpool)</code> to write the executed template out."}], "tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": false, "score": 6, "last_activity_date": 1426362239, "last_edit_date": 1426362239, "creation_date": 1426350007, "answer_id": 29051224, "question_id": 29050813, "link": "https://stackoverflow.com/questions/29050813/why-a-un-closed-html-tag-make-the-html-template-not-rendering-in-go/29051224#29051224", "title": "Why a un-closed html tag make the html template not rendering in go?", "body": "<p>It is telling you about the error, you are just ignoring it.</p>\n\n<p>If you look at the error returned by Execute, it tells you that your html is bad.</p>\n\n<p>You should always check for errors.  Something like:</p>\n\n<pre><code>t, err := template.New(\"test\").Parse(ttxt)\nif err != nil { \n    ...do something with error...\n}\nerr = t.Execute(os.Stdout, nil) // w is a http.R\nif err != nil { \n    ...do something with error...\n}\n</code></pre>\n\n<p>Here it is (with error printing) on <a href=\"http://play.golang.org/p/kosi9FrjOY\" rel=\"nofollow\">Playground</a></p>\n\n<p>Here it is, fixed on <a href=\"http://play.golang.org/p/gWrJOpv2L4\" rel=\"nofollow\">Playground</a></p>\n"}, {"tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": false, "score": 3, "last_activity_date": 1426350399, "creation_date": 1426350399, "answer_id": 29051296, "question_id": 29050813, "link": "https://stackoverflow.com/questions/29050813/why-a-un-closed-html-tag-make-the-html-template-not-rendering-in-go/29051296#29051296", "title": "Why a un-closed html tag make the html template not rendering in go?", "body": "<p>The Go's template package provides method <a href=\"http://golang.org/pkg/html/template/#Must\" rel=\"nofollow\"><code>Must</code></a> that will make your program <a href=\"http://en.wikipedia.org/wiki/Fail-fast\" rel=\"nofollow\">fail fast</a> by panicking in case of such errors. You can free your code of some error checks, yet you will still be in control. </p>\n\n<pre><code>t := template.Must(template.parseFiles(\"template/index.tmpl\"))\n</code></pre>\n"}], "owner": {"reputation": 6945, "user_id": 2288944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/7qryD.jpg?s=128&g=1", "display_name": "armnotstrong", "link": "https://stackoverflow.com/users/2288944/armnotstrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1426362239, "creation_date": 1426347855, "last_edit_date": 1426349895, "question_id": 29050813, "link": "https://stackoverflow.com/questions/29050813/why-a-un-closed-html-tag-make-the-html-template-not-rendering-in-go", "title": "Why a un-closed html tag make the html template not rendering in go?", "body": "<p>I come to a very bothering problem, And it took me about an hour to figure what cause the problem, but I don't know why:</p>\n\n<p>I am using <code>html/template</code> to rending a web page and the code is like this:</p>\n\n<pre><code>t, _ := template.parseFiles(\"template/index.tmpl\")\n...\nt.Execute(w, modelView) // w is a http.ResponseWriter and modelView is a data struct.\n</code></pre>\n\n<p>But unconsciously, I made a mistake that leave a <code>&lt;textarea&gt;</code> tag  open:</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n        &lt;form id=\"batchAddUser\" class=\"form-inline\"&gt;\n        **this one**  --&gt;  &lt;textarea name=\"users\" value=\"\" row=3 placeholder=\"input username and password splited by space\"&gt;\n            &lt;button type=\"submit\" class=\"btn btn-success\" &gt;Add&lt;/button&gt;\n        &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And then Go gives no exception and other hint, but just give a blank page with nothing, and the status code is <code>200</code>.</p>\n\n<p>It toke effect to locate the problem since no information was offered, but why is that happen? How comes a un-colsed tag cause problem like that? And how to debug that? </p>\n"}, {"tags": ["go"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1467267"}, "edited": false, "score": 0, "creation_date": 1426331380, "post_id": 29048088, "comment_id": 46334762, "body": "Because the function expects a pointer (<code>*SA</code>) to a memory address. That&#39;s why <code>&amp;SA{}</code> works, because you give it a memory-address."}, {"owner": {"reputation": 437, "user_id": 2952763, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a368475adb5b26f532180d2b4a383aed?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/2952763/oleg"}, "edited": false, "score": 0, "creation_date": 1426331650, "post_id": 29048088, "comment_id": 46334824, "body": "Yes, but I asked why in the case of calling function GO does some underground (maybe puts obj from stack to heap and call with pointer). Maybe it can do the same things in the case of assignment, to store only pointer in interface variable?"}, {"owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "edited": false, "score": 2, "creation_date": 1426341106, "post_id": 29048088, "comment_id": 46337498, "body": "This <a href=\"http://golang.org/doc/faq#different_method_sets\" rel=\"nofollow noreferrer\">golang.org/doc/faq#different_method_sets</a> answers your question."}, {"owner": {"reputation": 437, "user_id": 2952763, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a368475adb5b26f532180d2b4a383aed?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/2952763/oleg"}, "edited": false, "score": 0, "creation_date": 1426353917, "post_id": 29048088, "comment_id": 46341591, "body": "Yes, yours link addresses my question entirely, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 2952763, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a368475adb5b26f532180d2b4a383aed?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/2952763/oleg"}, "edited": false, "score": 0, "creation_date": 1426335661, "post_id": 29048693, "comment_id": 46335862, "body": "Thanks. But I didn&#39;t ask about why is it error.I asked why it can&#39;t be dereferenced  var  i IA = SA{} automatically by GO compiler"}, {"owner": {"reputation": 15641, "user_id": 1567738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1065193e064ef75f6278754f7f02abb6?s=128&d=identicon&r=PG", "display_name": "Intermernet", "link": "https://stackoverflow.com/users/1567738/intermernet"}, "reply_to_user": {"reputation": 437, "user_id": 2952763, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a368475adb5b26f532180d2b4a383aed?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/2952763/oleg"}, "edited": false, "score": 1, "creation_date": 1426336904, "post_id": 29048693, "comment_id": 46336241, "body": "because <code>SA{}</code> doesn&#39;t satisfy the <code>IA</code> interface."}], "tags": [], "owner": {"reputation": 15641, "user_id": 1567738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1065193e064ef75f6278754f7f02abb6?s=128&d=identicon&r=PG", "display_name": "Intermernet", "link": "https://stackoverflow.com/users/1567738/intermernet"}, "is_accepted": false, "score": 2, "last_activity_date": 1426334615, "creation_date": 1426334615, "answer_id": 29048693, "question_id": 29048088, "link": "https://stackoverflow.com/questions/29048088/about-interfaces-in-go/29048693#29048693", "title": "About interfaces in Go", "body": "<p><code>func (this *SA) Method()</code> means that only a pointer to type <code>SA</code> (<code>*SA</code>) has the <code>Method()</code> method, therefore <code>var i IA = &amp;SA{}</code> fulfils the <code>IA</code> interface.</p>\n\n<p>If you change it to read <code>func (this SA) Method()</code> then <code>var i IA = SA{}</code> fulfils the interface, and not <code>var i IA = &amp;SA{}</code>.</p>\n\n<p><code>*SA</code> is not the same type as <code>SA</code>.</p>\n\n<p>Go provides some shortcuts for dealing with dereferencing method values (which is probably where the confusion is coming from)</p>\n\n<p>If you have a look at the <a href=\"https://golang.org/ref/spec#Method_values\" rel=\"nofollow\">Method Values section of the spec</a> you will see that:</p>\n\n<blockquote>\n  <p>a reference to a non-interface method with a value receiver using a pointer will automatically dereference that pointer</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>a reference to a non-interface method with a pointer receiver using an addressable value will automatically take the address of that value</p>\n</blockquote>\n\n<p>This is why <code>obj.Method()</code> works whether <code>obj</code> is an <code>*SA</code> or an <code>SA</code>.</p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 437, "user_id": 2952763, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a368475adb5b26f532180d2b4a383aed?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/2952763/oleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1426334615, "creation_date": 1426330477, "last_edit_date": 1426330856, "question_id": 29048088, "link": "https://stackoverflow.com/questions/29048088/about-interfaces-in-go", "title": "About interfaces in Go", "body": "<pre><code>type IA interface {\n    Method()\n}\n\ntype SA struct {\n}\n\nfunc (this *SA) Method() {\n\n}\n\n\nfunc main() {\n    var i IA = SA{} //error \n    var i IA = &amp;SA{} //ok\n    var obj = SA{}\n\n    obj.Method()//ok     \n\n}   \n</code></pre>\n\n<p>Could you explain why does GO automatically dereference in the case of calling function (<code>obj.Method()</code>) but in assignment to interface variable (<code>var i IA = SA{}</code>) it can't? </p>\n"}, {"tags": ["google-app-engine", "go"], "comments": [{"owner": {"reputation": 1728, "user_id": 1628065, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/uhAcU.png?s=128&g=1", "display_name": "drtf", "link": "https://stackoverflow.com/users/1628065/drtf"}, "edited": false, "score": 0, "creation_date": 1429539545, "post_id": 29047816, "comment_id": 47633041, "body": "appengine-1.9.19 uses go1.4.2 binaries so upgrading the package should be enough"}], "answers": [{"comments": [{"owner": {"reputation": 2388, "user_id": 1702703, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/SiO1s.png?s=128&g=1", "display_name": "Ramesh Lingappa", "link": "https://stackoverflow.com/users/1702703/ramesh-lingappa"}, "edited": false, "score": 0, "creation_date": 1426347973, "post_id": 29050744, "comment_id": 46339607, "body": "Thank you for answering, i indeed use goapp command for running  and deploying my application, but i use GoSublime for development , which i have configured to go build on file save, so now when i set the GOROOT to appengine sdk path, i get this error   &quot;go build runtime: darwin/amd64 must be bootstrapped using make.bash&quot;, any idea on this? i can compile go file now"}, {"owner": {"reputation": 2388, "user_id": 1702703, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/SiO1s.png?s=128&g=1", "display_name": "Ramesh Lingappa", "link": "https://stackoverflow.com/users/1702703/ramesh-lingappa"}, "edited": false, "score": 0, "creation_date": 1426349853, "post_id": 29050744, "comment_id": 46340200, "body": "i have got that issue fixed, so now source code is compiled with appengine go runtime , but still am getting the same issue"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 2388, "user_id": 1702703, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/SiO1s.png?s=128&g=1", "display_name": "Ramesh Lingappa", "link": "https://stackoverflow.com/users/1702703/ramesh-lingappa"}, "edited": false, "score": 0, "creation_date": 1426349963, "post_id": 29050744, "comment_id": 46340231, "body": "@Ramesh It is because you already have package objects compiled with Go 1.4.2. Remove all your package objects. If you can&#39;t tell which one is with 1.4.2, try deleting all, or download a new, fresh copy of the Go AppEngine SDK."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 3, "last_activity_date": 1426347443, "creation_date": 1426347443, "answer_id": 29050744, "question_id": 29047816, "link": "https://stackoverflow.com/questions/29047816/appengine-go-devserver-build-issue/29050744#29050744", "title": "Appengine Go devserver build issue", "body": "<p>The latest go version is 1.4.2, but the AppEngine Go SDK uses a bundled Go runtime with version 1.4.1!</p>\n\n<p>That means you can't use an \"external\" 1.4.2 Go library to compile your sources. If you develop an app for AppEngine in Go, you can't (shouldn't) even use any Go library except the one that is bundled in the Go AppEngine SDK!</p>\n\n<p>And in fact, you don't have to. The SDK contains a <code>goapp</code> command similar to the <code>go</code> tool with which you can run and test your app locally and you can deploy it to production environment. To run/test your app locally, use the <code>goapp serve</code> command, to deploy it to production environment, use the <code>goapp depploy</code> command.</p>\n\n<p>So what you should do is delete any package objects compiled with Go 1.4.2, and use only the <code>goapp</code> (part of the SDK) command to run/test/deploy your application.</p>\n\n<p>Note that you don't even have to install any package objects as the <code>goapp deploy</code> command uploads your app in <em>source</em> form and it is compiled into executable native binary on the appengine servers.</p>\n"}], "owner": {"reputation": 2388, "user_id": 1702703, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/SiO1s.png?s=128&g=1", "display_name": "Ramesh Lingappa", "link": "https://stackoverflow.com/users/1702703/ramesh-lingappa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 29050744, "answer_count": 1, "score": 3, "last_activity_date": 1426347443, "creation_date": 1426328573, "question_id": 29047816, "link": "https://stackoverflow.com/questions/29047816/appengine-go-devserver-build-issue", "title": "Appengine Go devserver build issue", "body": "<p>i have updated the go version from 1.4.1 to 1.4.2, and also now using appengine latest go sdk 1.9.18, when i try to run the existing project i get the following error , </p>\n\n<p><strong>google_appengine/goroot/pkg/darwin_amd64/appengine.a: object is [darwin amd64 go1.4.2 X:precisestack] expected [darwin amd64 go1.4.1 (appengine-1.9.18) X:precisestack]</strong></p>\n\n<p>i know its an problem with file build with existing version and trying to run with new version, may i know how can i fix this issue ?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "edited": false, "score": 0, "creation_date": 1426322466, "post_id": 29046963, "comment_id": 46332660, "body": "@Grzegorz\u017bur yes its exactly the total  length of all arrays"}, {"owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 1, "creation_date": 1426322898, "post_id": 29046963, "comment_id": 46332754, "body": "&quot;More efficient&quot; in what way? Performance or code size?"}, {"owner": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "reply_to_user": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 0, "creation_date": 1426323023, "post_id": 29046963, "comment_id": 46332772, "body": "Performance code size does not matter at least for this struct only which is a message that i serialize into a byte payload, to send over tcp"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1426353348, "post_id": 29046963, "comment_id": 46341397, "body": "Just to clarify for future readers, the idea is to change your <code>func (m *Message) ToByte() []byte</code> into <code>func (m *Message) ToByte(p []byte) []byte</code> and allow the caller to pass in a buffer which you append to. Callers can then optionally re-use the same buffer (or not). Several functions in the standard library operate like that as well (e.g. <a href=\"https://golang.org/pkg/hash/#Hash\" rel=\"nofollow noreferrer\"><code>hash.Hash</code></a>&#39;s <code>Sum</code> method)."}], "answers": [{"tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": false, "score": 2, "last_activity_date": 1426329534, "creation_date": 1426329534, "answer_id": 29047951, "question_id": 29046963, "link": "https://stackoverflow.com/questions/29046963/concat-byte-arrays/29047951#29047951", "title": "Concat byte arrays", "body": "<p>I looked carefully at that and made the following benchmarks.</p>\n\n<pre><code>package append\n\nimport \"testing\"\n\nfunc BenchmarkAppend(b *testing.B) {\n    as := 1000\n    a := make([]byte, as)\n    s := make([]byte, 0, b.N*as)\n    for i := 0; i &lt; b.N; i++ {\n        s = append(s, a...)\n    }\n}\n\nfunc BenchmarkCopy(b *testing.B) {\n    as := 1000\n    a := make([]byte, as)\n    s := make([]byte, 0, b.N*as)\n    for i := 0; i &lt; b.N; i++ {\n        copy(s[i*as:(i+1)*as], a)\n    }\n}\n</code></pre>\n\n<p>The results are</p>\n\n<pre><code>grzesiek@klapacjusz ~/g/s/t/append&gt; go test -bench . -benchmem\ntesting: warning: no tests to run\nPASS\nBenchmarkAppend 10000000           202 ns/op        1000 B/op          0 allocs/op\nBenchmarkCopy   10000000           201 ns/op        1000 B/op          0 allocs/op\nok      test/append 4.564s\n</code></pre>\n\n<p>If the <code>totalSize</code> is big enough then your code makes no memory allocations. It copies only the amount of bytes it needs to copy. It is perfectly fine.</p>\n"}, {"comments": [{"owner": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "edited": false, "score": 0, "creation_date": 1426332363, "post_id": 29048081, "comment_id": 46334987, "body": "thats neat i am faster than protobuf now thanks for the suggestion,  <code>BenchmarkMessageToByte            10000000               280 ns&#47;op</code> <code>BenchmarkMessageFromByte        10000000               293 ns&#47;op</code>"}, {"owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "reply_to_user": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "edited": false, "score": 1, "creation_date": 1426332832, "post_id": 29048081, "comment_id": 46335090, "body": "If you are interested in efficient serialization, you may want to have a look at: <a href=\"https://github.com/alecthomas/go_serialization_benchmarks\" rel=\"nofollow noreferrer\">github.com/alecthomas/go_serialization_benchmarks</a>"}], "tags": [], "owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "is_accepted": true, "score": 4, "last_activity_date": 1426331195, "last_edit_date": 1426331195, "creation_date": 1426330402, "answer_id": 29048081, "question_id": 29046963, "link": "https://stackoverflow.com/questions/29046963/concat-byte-arrays/29048081#29048081", "title": "Concat byte arrays", "body": "<p>Provided memory is already allocated, a sequence of x=append(x,a...) is rather efficient in Go.</p>\n\n<p>In your example, the initial allocation (make) probably costs more than the sequence of appends. It depends on the size of the fields. Consider the following benchmark:</p>\n\n<pre><code>package main\n\nimport (\n    \"testing\"\n)\n\nconst sizeTotal = 25\n\nvar res []byte // To enforce heap allocation\n\nfunc BenchmarkWithAlloc(b *testing.B) {\n\n    a := []byte(\"abcde\")\n\n    for i := 0; i &lt; b.N; i++ {\n        x := make([]byte, 0, sizeTotal)\n        x = append(x, a...)\n        x = append(x, a...)\n        x = append(x, a...)\n        x = append(x, a...)\n        x = append(x, a...)\n        res = x // Make sure x escapes, and is therefore heap allocated\n    }\n}\n\nfunc BenchmarkWithoutAlloc(b *testing.B) {\n\n    a := []byte(\"abcde\")\n    x := make([]byte, 0, sizeTotal)\n\n    for i := 0; i &lt; b.N; i++ {\n        x = x[:0]\n        x = append(x, a...)\n        x = append(x, a...)\n        x = append(x, a...)\n        x = append(x, a...)\n        x = append(x, a...)\n        res = x\n    }\n}\n</code></pre>\n\n<p>On my box, the result is:</p>\n\n<pre><code>testing: warning: no tests to run\nPASS\nBenchmarkWithAlloc      10000000               116 ns/op              32 B/op          1 allocs/op\nBenchmarkWithoutAlloc   50000000                24.0 ns/op             0 B/op          0 allocs/op\n</code></pre>\n\n<p>Systematically reallocating the buffer (even a small one) makes this benchmark at least 5 times slower.</p>\n\n<p>So your best hope to optimize this code it to make sure you do not reallocate a buffer for each packet you build. On the contrary, you should keep your buffer, and reuse it for each marshalling operation.</p>\n\n<p>You can reset a slice while keeping its underlying buffer allocated with the following statement:</p>\n\n<pre><code>x = x[:0]\n</code></pre>\n"}], "owner": {"reputation": 2325, "user_id": 1492051, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/07ecac667abb2bfa8d6698dc629bbb54?s=128&d=identicon&r=PG", "display_name": "FPGA", "link": "https://stackoverflow.com/users/1492051/fpga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2000, "favorite_count": 0, "accepted_answer_id": 29048081, "answer_count": 2, "score": 2, "last_activity_date": 1426333238, "creation_date": 1426321460, "last_edit_date": 1426333238, "question_id": 29046963, "link": "https://stackoverflow.com/questions/29046963/concat-byte-arrays", "title": "Concat byte arrays", "body": "<p>Can someone please point at a more efficient version of the following</p>\n\n<pre><code>    b:=make([]byte,0,sizeTotal)\n    b=append(b,size...)\n    b=append(b,contentType...)\n    b=append(b,lenCallbackid...)\n    b=append(b,lenTarget...)\n    b=append(b,lenAction...)\n    b=append(b,lenContent...)\n    b=append(b,callbackid...)\n    b=append(b,target...)\n    b=append(b,action...)\n    b=append(b,content...)\n</code></pre>\n\n<p>every variable is a byte slice apart from size <code>sizeTotal</code></p>\n\n<p><code>Update</code>:</p>\n\n<p>Code:</p>\n\n<pre><code>type Message struct {\n    size        uint32\n    contentType uint8\n    callbackId  string\n    target      string\n    action      string\n    content     string\n}\n\n\nvar res []byte\nvar b []byte = make([]byte,0,4096)\n\nfunc (m *Message)ToByte()[]byte{\n    callbackIdIntLen:=len(m.callbackId)\n    targetIntLen := len(m.target)\n    actionIntLen := len(m.action)\n    contentIntLen := len(m.content)\n    lenCallbackid:=make([]byte,4)\n    binary.LittleEndian.PutUint32(lenCallbackid, uint32(callbackIdIntLen))\n    callbackid := []byte(m.callbackId)\n    lenTarget := make([]byte,4)\n    binary.LittleEndian.PutUint32(lenTarget, uint32(targetIntLen))\n    target:=[]byte(m.target)\n    lenAction := make([]byte,4)\n    binary.LittleEndian.PutUint32(lenAction, uint32(actionIntLen))\n    action := []byte(m.action)\n    lenContent:= make([]byte,4)\n    binary.LittleEndian.PutUint32(lenContent, uint32(contentIntLen))\n    content := []byte(m.content)\n    sizeTotal:= 21+callbackIdIntLen+targetIntLen+actionIntLen+contentIntLen\n    size := make([]byte,4)\n    binary.LittleEndian.PutUint32(size, uint32(sizeTotal))\n    b=b[:0]\n    b=append(b,size...)\n    b=append(b,byte(m.contentType))\n    b=append(b,lenCallbackid...)\n    b=append(b,lenTarget...)\n    b=append(b,lenAction...)\n    b=append(b,lenContent...)\n    b=append(b,callbackid...)\n    b=append(b,target...)\n    b=append(b,action...)\n    b=append(b,content...)\n    res = b\n    return b\n}\n\nfunc FromByte(bytes []byte)(*Message){\n    size         :=binary.LittleEndian.Uint32(bytes[0:4])\n    contentType  :=bytes[4:5][0]\n    lenCallbackid:=binary.LittleEndian.Uint32(bytes[5:9])\n    lenTarget    :=binary.LittleEndian.Uint32(bytes[9:13])\n    lenAction    :=binary.LittleEndian.Uint32(bytes[13:17])\n    lenContent   :=binary.LittleEndian.Uint32(bytes[17:21])\n    callbackid   := string(bytes[21:21+lenCallbackid])\n    target:= string(bytes[21+lenCallbackid:21+lenCallbackid+lenTarget])\n    action:= string(bytes[21+lenCallbackid+lenTarget:21+lenCallbackid+lenTarget+lenAction])\n    content:=string(bytes[size-lenContent:size])\n    return &amp;Message{size,contentType,callbackid,target,action,content}\n}\n</code></pre>\n\n<p><code>Benchs</code>:</p>\n\n<pre><code>func BenchmarkMessageToByte(b *testing.B) {\n    m:=NewMessage(uint8(3),\"agsdggsdasagdsdgsgddggds\",\"sometarSFAFFget\",\"somFSAFSAFFSeaction\",\"somfasfsasfafsejsonzhit\")\n    for n := 0; n &lt; b.N; n++ {\n        m.ToByte()\n    }\n}\n\n\nfunc BenchmarkMessageFromByte(b *testing.B) {\n    m:=NewMessage(uint8(1),\"sagdsgaasdg\",\"soSASFASFASAFSFASFAGmetarget\",\"adsgdgsagdssgdsgd\",\"agsdsdgsagdsdgasdg\").ToByte()\n    for n := 0; n &lt; b.N; n++ {\n        FromByte(m)\n    }\n}\n\n\nfunc BenchmarkStringToByte(b *testing.B) {\n    for n := 0; n &lt; b.N; n++ {\n        _ = []byte(\"abcdefghijklmnoqrstuvwxyz\")\n    }\n}\n\nfunc BenchmarkStringFromByte(b *testing.B) {\n    s:=[]byte(\"abcdefghijklmnoqrstuvwxyz\")\n    for n := 0; n &lt; b.N; n++ {\n        _ = string(s)\n    }\n}\n\n\nfunc BenchmarkUintToByte(b *testing.B) {\n    for n := 0; n &lt; b.N; n++ {\n        i:=make([]byte,4)\n        binary.LittleEndian.PutUint32(i, uint32(99))\n    }\n}\n\nfunc BenchmarkUintFromByte(b *testing.B) {\n    i:=make([]byte,4)\n    binary.LittleEndian.PutUint32(i, uint32(99))\n    for n := 0; n &lt; b.N; n++ {\n        binary.LittleEndian.Uint32(i)\n    }\n}\n</code></pre>\n\n<p><strong>Bench results:</strong></p>\n\n<pre><code>   BenchmarkMessageToByte     10000000               280 ns/op\n   BenchmarkMessageFromByte   10000000               293 ns/op\n   BenchmarkStringToByte      50000000               55.1 ns/op\n   BenchmarkStringFromByte    50000000               49.7 ns/op\n   BenchmarkUintToByte        1000000000             2.14 ns/op\n   BenchmarkUintFromByte      2000000000             1.71 ns/op\n</code></pre>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "is_accepted": true, "score": 1, "last_activity_date": 1426313820, "creation_date": 1426313820, "answer_id": 29046068, "question_id": 29045823, "link": "https://stackoverflow.com/questions/29045823/how-to-use-parse-many-times-in-golangs-template/29046068#29046068", "title": "How to use parse many times in golang&#39;s template", "body": "<p><code>template.ParseFiles</code> can take multiple filenames as an argument, as per <a href=\"http://golang.org/pkg/html/template/#ParseFiles\" rel=\"nofollow\">http://golang.org/pkg/html/template/#ParseFiles</a></p>\n\n<blockquote>\n  <p>func ParseFiles(filenames ...string) (*Template, error)</p>\n</blockquote>\n\n<p>e.g.</p>\n\n<pre><code>t := template.New(\"base\")\nt, err := t.ParseFiles(\"header.html\", \"footer.html\", \"content.html\")\nif err != nil {\n    // handle the error\n}\n</code></pre>\n\n<p>There's a solid example on how to use html/template in the Go docs as well: <a href=\"http://golang.org/doc/articles/wiki/#tmp_6\" rel=\"nofollow\">http://golang.org/doc/articles/wiki/#tmp_6</a></p>\n"}], "owner": {"reputation": 33, "user_id": 4635969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/685271c4dc8833a16bd303b1a7e1860d?s=128&d=identicon&r=PG&f=1", "display_name": "DDanya", "link": "https://stackoverflow.com/users/4635969/ddanya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "accepted_answer_id": 29046068, "answer_count": 1, "score": 0, "last_activity_date": 1426313820, "creation_date": 1426311218, "question_id": 29045823, "link": "https://stackoverflow.com/questions/29045823/how-to-use-parse-many-times-in-golangs-template", "title": "How to use parse many times in golang&#39;s template", "body": "<p>i need help. Now to output pages I use multiple templates(1 example) and i want to use parse many times in one template(2 example)</p>\n\n<p>Example 1:</p>\n\n<pre><code>...\nt, err := template.ParseFiles(\"header.html\")\nt.Execute(wr, data)\nd, err := template.ParseFiles(\"content.html\")\nd.Execute(wr, datatwo)\n...\n</code></pre>\n\n<p>Example 2:</p>\n\n<pre><code>...\nt := template.New(\"blabla\")\nt.ParseFiles(\"header.html\")\nt.ParseFiles(\"content.html\")\nt.Execute(\"wr\", data)\n</code></pre>\n\n<p>P.S. I'm sorry, my english is very bad</p>\n"}, {"tags": ["string", "go"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4122236"}, "is_accepted": true, "score": 1, "last_activity_date": 1426310302, "creation_date": 1426310302, "answer_id": 29045741, "question_id": 29045707, "link": "https://stackoverflow.com/questions/29045707/iterate-lines-through-bulk-string-with-go/29045741#29045741", "title": "Iterate lines through bulk string with go", "body": "<p>Here's one way to do it:</p>\n\n<pre><code>var users []User\nfor _, l := range strings.Split(s, \"\\n\") {\n    f := strings.Fields(l)\n    if len(f) == 2 {\n        users = append(users, User{f[0], f[1]})\n    }\n}\n</code></pre>\n\n<p><kbd><a href=\"http://play.golang.org/p/bXGJ6VKylT\" rel=\"nofollow\">playground example</a></kbd></p>\n"}], "owner": {"reputation": 6945, "user_id": 2288944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/7qryD.jpg?s=128&g=1", "display_name": "armnotstrong", "link": "https://stackoverflow.com/users/2288944/armnotstrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 29045741, "answer_count": 1, "score": -1, "last_activity_date": 1426312948, "creation_date": 1426310008, "last_edit_date": 1426312948, "question_id": 29045707, "link": "https://stackoverflow.com/questions/29045707/iterate-lines-through-bulk-string-with-go", "title": "Iterate lines through bulk string with go", "body": "<p>I have a bulk of string that has two columns split by space, first columns is username and second column is password. I want to format that string to a slice of <code>User</code> struct</p>\n\n<p>The string is like this:</p>\n\n<pre><code> Bob qqweq\n Tom erwwe\n Andersen sadfadfs\n</code></pre>\n\n<p>The struct is simply like this:</p>\n\n<pre><code>type User struct{\n  Username string\n  Password string\n}\n</code></pre>\n\n<p>How to do that typically with go?</p>\n"}, {"tags": ["collections", "go", "garbage-collection", "runtime", "garbage"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1426303497, "post_id": 29045066, "comment_id": 46329602, "body": "I don&#39;t think that&#39;s guaranteed. I would see <code>runtime.GC()</code> more as a hint to the runtime to run the garbage collector right now; it can decide on its own whether that makes sense right now. This function probably becomes obsolete anyway with the new concurrent garbage collector."}, {"owner": {"reputation": 353, "user_id": 338097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/567022f7d68ab4ca041398c0d64315b6?s=128&d=identicon&r=PG", "display_name": "Alin Tomescu", "link": "https://stackoverflow.com/users/338097/alin-tomescu"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1426606469, "post_id": 29045066, "comment_id": 46436481, "body": "I am under the same impression, but I am wondering if there is a specification that can clarify the exact semantics the call should implement."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1426610227, "post_id": 29045066, "comment_id": 46439403, "body": "When in doubt, file an issue."}], "owner": {"reputation": 353, "user_id": 338097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/567022f7d68ab4ca041398c0d64315b6?s=128&d=identicon&r=PG", "display_name": "Alin Tomescu", "link": "https://stackoverflow.com/users/338097/alin-tomescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1184, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426303186, "creation_date": 1426303186, "question_id": 29045066, "link": "https://stackoverflow.com/questions/29045066/golang-runtime-gc-guarantees", "title": "Golang: runtime.GC guarantees", "body": "<p>Just wondering if there are any guarantees behind Go's <code>runtime.GC()</code> call. </p>\n\n<p>Is it always true that if there are unreferenced objects, then <code>runtime.GC()</code> will free them and that free space will be reflected in subsequent calls to <code>runtime.ReadMemStats()</code>?</p>\n\n<p>Cheers,</p>\n\n<p>Alin</p>\n"}, {"tags": ["sockets", "tcp", "go", "ip", "raw-ethernet"], "comments": [{"owner": {"reputation": 2422, "user_id": 202311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7408fce5260e98922355385680be0179?s=128&d=identicon&r=PG", "display_name": "IanB", "link": "https://stackoverflow.com/users/202311/ianb"}, "edited": false, "score": 0, "creation_date": 1442116500, "post_id": 29043283, "comment_id": 52948976, "body": "You should start by assigning the return value of <code>SerializeLayers</code> and checking for an error"}], "owner": {"reputation": 2354, "user_id": 3973051, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/594835486/picture?type=large", "display_name": "Jonathan Eustace", "link": "https://stackoverflow.com/users/3973051/jonathan-eustace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 793, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426290970, "creation_date": 1426287273, "last_edit_date": 1426290970, "question_id": 29043283, "link": "https://stackoverflow.com/questions/29043283/pcap-go-using-raw-sockets-checksum-calculation", "title": "PCAP Go using Raw Sockets Checksum Calculation", "body": "<p>I'm writing a frame/datagram/packet manipulation program which forwards frames from one source to another. I'm using the Go layers library to manipulate the frames. </p>\n\n<p>If I do not set the option to calculate checksums the SYN packet get's to the computer running this go code and it gets forwarded. However, I've changed the packet dstIP, srcIP while the checksum remains the same, the reciever never sends back a SYN ACK, I suspect this is because the checksum is now in error due to the change. </p>\n\n<p>But, the layers library includes an option called CalculateChecksum, which if I turn it on to be true the computer running this program gets the frame, but never transmits it to the receiver. </p>\n\n<p>This is my first time with RAW sockets, so I'm working on theories and no experience, any ideas?</p>\n\n<pre><code>package main\n\nimport (\n    \"code.google.com/p/gopacket\"\n    \"code.google.com/p/gopacket/layers\"\n    \"code.google.com/p/gopacket/pcap\"\n    \"fmt\"\n    \"net\"\n)\n\nfunc main() {\n\n    if handle, err := pcap.OpenLive(\"enp3s0\", 1600, true, 100); err != nil {\n        panic(err)\n    } else {\n        packetSource := gopacket.NewPacketSource(handle, handle.LinkType())\n        for packet := range packetSource.Packets() {\n\n            if ethLayer := packet.Layer(layers.LayerTypeEthernet); ethLayer != nil {\n\n                eth, _ := ethLayer.(*layers.Ethernet)\n                //eth.DstMAC, _ = net.ParseMAC(\"14:10:9f:d1:47:e5\")\n\n                eth.SrcMAC, _ = net.ParseMAC(\"98:90:96:a3:93:e0\")\n\n                if ipLayer := packet.Layer(layers.LayerTypeIPv4); ipLayer != nil {\n\n                    ip, _ := ipLayer.(*layers.IPv4)\n                    if ip.SrcIP.Equal(net.ParseIP(\"192.168.1.72\")) {\n                        fmt.Println(\"from cal\")\n                        //change the dst IP to something 192.168.1.65\n                        eth.DstMAC, _ = net.ParseMAC(\"00:90:F5:D6:02:FD\")\n                        ip.SrcIP = net.IP{192, 168, 1, 70}\n                        ip.DstIP = net.IP{192, 168, 1, 73}\n\n                    }\n                    if ip.SrcIP.Equal(net.ParseIP(\"192.168.1.73\")) {\n                        fmt.Println(\"from me\")\n                        //change the dst IP to something 192.168.1.65\n                        eth.DstMAC, _ = net.ParseMAC(\"AC:16:2D:49:69:4B\")\n                        ip.SrcIP = net.IP{192, 168, 1, 70}\n                        ip.DstIP = net.IP{192, 168, 1, 72}\n\n                    }\n\n                    if tcpLayer := packet.Layer(layers.LayerTypeTCP); tcpLayer != nil {\n\n                        tcp, _ := tcpLayer.(*layers.TCP)\n\n                        buf := gopacket.NewSerializeBuffer()\n                        opts := gopacket.SerializeOptions{}\n                        opts.FixLengths = true\n                        /* I WISH TO RE-COMPUTE CHECKSUMS HOWEVER WHEN THIS OPTION IS TRUE\n                           I NEVER TRANSMIT THE FRAME*/\n                        opts.ComputeChecksums = true\n                        gopacket.SerializeLayers(buf, opts,\n                            eth,\n                            ip,\n                            tcp,\n                            gopacket.Payload([]byte(tcp.LayerPayload())))\n                        packetData := buf.Bytes()\n\n                        handle.WritePacketData(buf)\n\n                    }\n\n                }\n\n            }\n\n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["json", "encoding", "go"], "comments": [{"owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "edited": false, "score": 0, "creation_date": 1426281400, "post_id": 29041789, "comment_id": 46324355, "body": "You are trying to unmarshal the data <code>y</code> into a pointer to <code>y</code>.  Your second argument to <code>Unmarshal</code> should be <code>&amp;data</code>, not <code>&amp;y</code>"}, {"owner": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "reply_to_user": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "edited": false, "score": 0, "creation_date": 1426281495, "post_id": 29041789, "comment_id": 46324406, "body": "Sorry that was a typo during copy+paste. Unmarshaling still fails :("}], "answers": [{"comments": [{"owner": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "edited": false, "score": 0, "creation_date": 1426281708, "post_id": 29042115, "comment_id": 46324512, "body": "Thank you very much sberry!"}], "tags": [], "owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "is_accepted": true, "score": 2, "last_activity_date": 1426281506, "creation_date": 1426281506, "answer_id": 29042115, "question_id": 29041789, "link": "https://stackoverflow.com/questions/29041789/reading-nested-json-data-with-golangs-encoding-json/29042115#29042115", "title": "Reading nested json data with golang&#39;s encoding/json", "body": "<p>This works for me (see comment to your question above) <kbd><a href=\"http://play.golang.org/p/mWy7OHRIzE\" rel=\"nofollow\"><strong>GoPlay</strong></a></kbd></p>\n\n<pre><code>type Data struct {\n    Ports struct {\n        Tcp []float64 `json:\"tcp\"`\n        Udp []float64 `json:\"udp\"`\n    } `json:\"ports\"`\n    Protocols []string `json:\"protocols\"`\n}\n\nfunc main() {\n    y := `{\n                \"ports\": {\n            \"udp\": [\n                1, \n                30\n            ], \n            \"tcp\": [\n                100, \n                1023\n            ]\n            }, \n            \"protocols\": [\n            \"tcp\", \n            \"udp\"\n            ]\n    }`\n    d := Data{}\n    err := json.Unmarshal([]byte(y), &amp;d)\n    if err != nil {\n        fmt.Println(\"Error:\", err.Error())\n    } else {\n        fmt.Printf(\"%#+v\", d)\n    }\n\n}\n</code></pre>\n\n<p><strong>OUTPUT</strong>  </p>\n\n<pre><code>main.Data{\n    Ports:struct { \n        Tcp []float64 \"json:\\\"tcp\\\"\";\n        Udp []float64 \"json:\\\"udp\\\"\" \n    }{\n        Tcp:[]float64{100, 1023},\n        Udp:[]float64{1, 30}\n    },\n    Protocols:[]string{\"tcp\", \"udp\"}\n}\n</code></pre>\n"}], "owner": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 29042115, "answer_count": 1, "score": 0, "last_activity_date": 1426281506, "creation_date": 1426280209, "last_edit_date": 1426281469, "question_id": 29041789, "link": "https://stackoverflow.com/questions/29041789/reading-nested-json-data-with-golangs-encoding-json", "title": "Reading nested json data with golang&#39;s encoding/json", "body": "<p>I can't get the correct definition for my structs to capture the nested <code>json</code> data saved in a variable. My code snippet is as below:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"encoding/json\"\n\ntype Data struct {\n    P string `json:\"ports\"`\n    Ports struct {\n         Portnums []int\n    }\n    Protocols []string `json:\"protocols\"`\n}\n\nfunc main() {\n        y := `{\n                \"ports\": {\n            \"udp\": [\n                1, \n                30\n            ], \n            \"tcp\": [\n                100, \n                1023\n            ]\n            }, \n            \"protocols\": [\n            \"tcp\", \n            \"udp\"\n            ]\n    }`\n    var data Data\n    e := json.Unmarshal([]byte(y), &amp;data)\n    if e == nil {\n        fmt.Println(data)\n    } else {\n        fmt.Println(\"Failed:\", e)\n    }\n\n}\n\n$ go run foo.go \nFailed: json: cannot unmarshal object into Go value of type string\n</code></pre>\n"}, {"tags": ["go", "idioms"], "comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 4, "creation_date": 1426279535, "post_id": 29041494, "comment_id": 46323559, "body": "From a performance standpoint I don&#39;t like it because it is adding a bunch of work through interface{} pointers that is pointless, aside from not having to write one copy of <code>In()</code> for each data type."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 2921477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a34721a7ac71f029a8706d83f2d60cc?s=128&d=identicon&r=PG&f=1", "display_name": "slavikm", "link": "https://stackoverflow.com/users/2921477/slavikm"}, "edited": false, "score": 0, "creation_date": 1426282669, "post_id": 29041709, "comment_id": 46324888, "body": "Of course I agree regarding performance but not all code has to be &quot;the most efficient&quot; and if I know that the slice size will be very small I would prefer not to be that verbose."}, {"owner": {"reputation": 73, "user_id": 2921477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a34721a7ac71f029a8706d83f2d60cc?s=128&d=identicon&r=PG&f=1", "display_name": "slavikm", "link": "https://stackoverflow.com/users/2921477/slavikm"}, "edited": false, "score": 0, "creation_date": 1426293070, "post_id": 29041709, "comment_id": 46327896, "body": "PS - I just ran a short test on my laptop and for 10,000,000 slice of strings it takes less than a second. Now, consider the use case of me trying to check if a value is not in a list of values. Now, your code suddenly becomes:  <code>in := false for _, value := range slice {     if value == var {         in = true         break     } } if !in {     doSomething() }</code>  Instead of: if !In(slice, val) {doSomething()}"}], "tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": false, "score": 8, "last_activity_date": 1426279820, "creation_date": 1426279820, "answer_id": 29041709, "question_id": 29041494, "link": "https://stackoverflow.com/questions/29041494/is-there-an-idiomatic-way-to-do-in-for-golang-slices/29041709#29041709", "title": "Is there an idiomatic way to do &quot;in&quot; for golang slices", "body": "<p>The idiomatic way, in go, for functions that can be expressed with a simple loop, to be implemented that way. Your method, for example, could be written that way:</p>\n\n<pre><code>for _, value := range slice {\n    if value == var {\n        doSomething()\n    }\n}\n</code></pre>\n\n<p>Obviously, it is somewhat more verbose, but that only if you try to <em>translate</em> <code>language or choice here</code> in go.</p>\n\n<p>The downside of doing reflection is that you botch performances without being that simpler than if you write your code to integrate to the search rather than simply considering it a condition.</p>\n"}, {"tags": [], "owner": {"reputation": 771, "user_id": 4515252, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--02zX_AQuqM/AAAAAAAAAAI/AAAAAAAAK64/PpH7Pn2gzSg/photo.jpg?sz=128", "display_name": "Adam Vincze", "link": "https://stackoverflow.com/users/4515252/adam-vincze"}, "is_accepted": false, "score": 0, "last_activity_date": 1426351647, "creation_date": 1426351647, "answer_id": 29051512, "question_id": 29041494, "link": "https://stackoverflow.com/questions/29041494/is-there-an-idiomatic-way-to-do-in-for-golang-slices/29051512#29051512", "title": "Is there an idiomatic way to do &quot;in&quot; for golang slices", "body": "<p>if you need a cheap way to check this (if you have to check it often) i would use a map for cheaper lookups. like this:</p>\n\n<pre><code>type Foo string\n\nvar sl []string\nvar m map[string]int\n\n//insert\nsl = append(sl, \"bar\")\nm[\"bar\"] += 1\n\n// delete ,e.g at position i\nm[sl[i]] -= 1\nsl[len(sl)-1], s[:len(sl)-1]\n\n\n//test\nif count := m[\"abc\"]; count&gt;0 {\n // \"abc\" in sl \n}\n</code></pre>\n\n<p>Of course both will add overhead if you change something in the slice. That would depend on your case.</p>\n\n<p>If your slice does not change, and you will do a lot of \"in\" testing you could build an easier map for that:</p>\n\n<pre><code>m := make(map[string]struct{}, len(sl))\nfor _, value := range sl {\n    m[value] = struct{}\n}\n\n//test \n\nif _, ok := m[\"abc\"]; ok {\n  // \"abc\" is in sl\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 2921477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a34721a7ac71f029a8706d83f2d60cc?s=128&d=identicon&r=PG&f=1", "display_name": "slavikm", "link": "https://stackoverflow.com/users/2921477/slavikm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "closed_date": 1426444783, "answer_count": 2, "score": 1, "last_activity_date": 1426351647, "creation_date": 1426278922, "question_id": 29041494, "link": "https://stackoverflow.com/questions/29041494/is-there-an-idiomatic-way-to-do-in-for-golang-slices", "closed_reason": "Duplicate", "title": "Is there an idiomatic way to do &quot;in&quot; for golang slices", "body": "<p>I would like to check if a value is in a slice of values. What is the best way to achieve this?\nSomething like the following:</p>\n\n<pre><code>if \"foo\" in []string{\"foo\", \"bar\"}...\n</code></pre>\n\n<p>I've written the following code but not sure how idiomatic it is (golang newbie):</p>\n\n<pre><code>// Convert a slice or array of a specific type to array of interface{}\nfunc ToIntf(s interface{}) []interface{} {\n    v := reflect.ValueOf(s)\n    // There is no need to check, we want to panic if it's not slice or array\n    intf := make([]interface{}, v.Len())\n    for i := 0; i &lt; v.Len(); i++ {\n        intf[i] = v.Index(i).Interface()\n    }\n    return intf\n}\nfunc In(s []interface{}, val interface{}) bool {\n    for _, v := range s {\n        if v == val {\n            return true\n        }\n    }\n    return false\n}\n</code></pre>\n\n<p>So, to use this, here is a test method I wrote.</p>\n\n<pre><code>func TestIn(t *testing.T) {\n    s := []string{\"foo\", \"bar\", \"kuku\", \"kiki\"}\n    for _, v := range s {\n        if !In(ToIntf(s), v) {\n            t.Error(\"Should be in\")\n        }\n    }\n    if In(ToIntf(s), \"foobar\") {\n        t.Error(\"Should not be in\")\n    }\n}\n</code></pre>\n"}, {"tags": ["go", "docker"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 4, "creation_date": 1426270277, "post_id": 29039031, "comment_id": 46318822, "body": "It&#39;s the way they are using the flag package. Many go programs use flags for list options like this, but there&#39;s no reason they can&#39;t use a quoted list, or comma delimited list."}], "answers": [{"tags": [], "owner": {"reputation": 3488, "user_id": 328504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c066fa1944f2b8cd2bf31c5ac1b54abd?s=128&d=identicon&r=PG", "display_name": "Ben Campbell", "link": "https://stackoverflow.com/users/328504/ben-campbell"}, "is_accepted": false, "score": 0, "last_activity_date": 1444601511, "creation_date": 1444601511, "answer_id": 33070660, "question_id": 29039031, "link": "https://stackoverflow.com/questions/29039031/docker-command-line-list-arguments/33070660#33070660", "title": "docker command line list arguments", "body": "<p>This is a way of passing multiple arguments to a program in Go but certainly not the only way. This is accomplished by defining a type that implements the <a href=\"https://golang.org/pkg/flag/#Value\" rel=\"nofollow\"><code>Value</code></a> interface. The <a href=\"https://golang.org/pkg/flag/\" rel=\"nofollow\"><code>flag</code></a> package on <a href=\"https://golang.org/pkg/flag/#Parse\" rel=\"nofollow\"><code>flag.Parse()</code></a> iterates though the argument list matching the name to a registered <a href=\"https://golang.org/pkg/flag/#Value\" rel=\"nofollow\"><code>Value</code></a> and calling the <code>Set(string)</code> function on the <a href=\"https://golang.org/pkg/flag/#Value\" rel=\"nofollow\"><code>Value</code></a>. You can use this to append each value of a given name to a slice.</p>\n\n<pre><code>type numList []int\n\nfunc (l *numList) String() string {\n   return \"[]\"\n}\n\nfunc (l *numList) Set(value string) error {\n    number, err := strconv.Atoi(value)\n\n    if err != nil {\n        return fmt.Errorf(\"Unable to parse number from value \\\"%s\\\"\", value)\n    }\n\n    *l = append(*l, number)\n    return nil\n}\n</code></pre>\n\n<p>This new type can be registered as a flag variable. In the following example the application takes n <code>num</code> command line arguments that are converted to an integer and added to a list. </p>\n\n<pre><code>var numbers numList\n\nfunc main() {\n    flag.Var(&amp;numbers, \"num\", \"A number to add to the summation\"\n    flag.Parse()\n\n    sum := 0\n    for _, num := range numbers {\n       sum += num\n    }\n\n    fmt.Printf(\"The sum of your flag arguments is %d.\\n\", sum)\n}\n</code></pre>\n\n<p>This could have been easily done with a string flag and have users pass a delimited list. There is no established convention within the Go language and each application can provide whatever implementation of best fit.</p>\n"}], "owner": {"reputation": 5876, "user_id": 2347677, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/1fWTO.png?s=128&g=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/2347677/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 813, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444601511, "creation_date": 1426269869, "question_id": 29039031, "link": "https://stackoverflow.com/questions/29039031/docker-command-line-list-arguments", "title": "docker command line list arguments", "body": "<p>When I am starting the docker daemon I am modifying the dns server so that the containers have a modified /etc/resolv.conf. Looking at the usage message I see:</p>\n\n<pre><code>$ docker --help\nUsage: docker [OPTIONS] COMMAND [arg...]\n\nA self-sufficient runtime for linux containers.\n\nOptions:\n  --api-enable-cors=false                    Enable CORS headers in the remote API\n  -b, --bridge=\"\"                            Attach containers to a prexisting network bridge\n                                             use 'none' to disable container networking\n  --bip=\"\"                                   Use this CIDR notation address for the network bridge's IP, not compatible with -b\n  -D, --debug=false                          Enable debug mode\n  -d, --daemon=false                         Enable daemon mode\n  --dns=[]                                   Force Docker to use specific DNS servers\n  --dns-search=[]                            Force Docker to use specific DNS search domains\n  -e, --exec-driver=\"native\"                 Force the Docker runtime to use a specific exec driver\n\n... etc ...\n</code></pre>\n\n<p>The --dns is what I want to pass, it shows a 'list' with the [], which after much trial and error I finally got this to work:</p>\n\n<pre><code>--dns 127.0.0.1 --dns 8.8.8.8\n</code></pre>\n\n<p>which deposits :</p>\n\n<pre><code>nameserver 127.0.0.1\nnameserver 8.8.8.8\n</code></pre>\n\n<p>in to the /etc/resolv.conf file.</p>\n\n<p>Is this the correct way to provide a list to docker (and presumably any go) program?</p>\n"}, {"tags": ["interface", "go"], "comments": [{"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1426271248, "post_id": 29039021, "comment_id": 46319334, "body": "So this (<a href=\"https://play.golang.org/p/J5bvaEtLbM\" rel=\"nofollow noreferrer\">play.golang.org/p/J5bvaEtLbM</a>) would illustrate your issue?"}, {"owner": {"reputation": 1034, "user_id": 2089648, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b29d87d89de9c1abac217464e57b191?s=128&d=identicon&r=PG", "display_name": "user2089648", "link": "https://stackoverflow.com/users/2089648/user2089648"}, "reply_to_user": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1426274116, "post_id": 29039021, "comment_id": 46320813, "body": "Somewhat. Comment the Shape() function of rock (it uses the circles one then). My issue would be to not get to the default section of the select, but to the cricle one as well if I pass a rock to DoesShape()"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1426274491, "post_id": 29039021, "comment_id": 46320992, "body": "So <a href=\"https://play.golang.org/p/rg_plLZMSM\" rel=\"nofollow noreferrer\">play.golang.org/p/rg_plLZMSM</a>: the <code>default:</code> section is there to illustrate that <code>Rock</code> is not detected as a <code>Circle</code> <code>Shaper</code> even though <code>Rock</code> has <code>Circle</code> as an anonymous field."}, {"owner": {"reputation": 1034, "user_id": 2089648, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b29d87d89de9c1abac217464e57b191?s=128&d=identicon&r=PG", "display_name": "user2089648", "link": "https://stackoverflow.com/users/2089648/user2089648"}, "reply_to_user": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1426275798, "post_id": 29039021, "comment_id": 46321655, "body": "Yes that would be the problem. How to get it to recognize the rock as a circle. (Which it embeds)."}], "answers": [{"comments": [{"owner": {"reputation": 1034, "user_id": 2089648, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b29d87d89de9c1abac217464e57b191?s=128&d=identicon&r=PG", "display_name": "user2089648", "link": "https://stackoverflow.com/users/2089648/user2089648"}, "edited": false, "score": 0, "creation_date": 1426322864, "post_id": 29040923, "comment_id": 46332748, "body": "In your example the circle knows about the rock, in which case i could also simply cast the interface to it&#39;s correct type. The problem is, that collision is in it&#39;s own library, without further knowledge of the objects that take the some shapes later."}], "tags": [], "owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "is_accepted": false, "score": 0, "last_activity_date": 1426276724, "creation_date": 1426276724, "answer_id": 29040923, "question_id": 29039021, "link": "https://stackoverflow.com/questions/29039021/golang-interface-cast-to-embedded-struct/29040923#29040923", "title": "Golang interface cast to embedded struct", "body": "<p>Not sure how off the mark this is, but posting it in case it helps you in any way.</p>\n\n<p><a href=\"http://play.golang.org/p/JYuIRqwHCm\" rel=\"nofollow\">http://play.golang.org/p/JYuIRqwHCm</a></p>\n"}, {"comments": [{"owner": {"reputation": 5024, "user_id": 1419891, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bb825cd3f1905f42c16408393480a65b?s=128&d=identicon&r=PG", "display_name": "425nesp", "link": "https://stackoverflow.com/users/1419891/425nesp"}, "edited": false, "score": 0, "creation_date": 1426302047, "post_id": 29041930, "comment_id": 46329417, "body": "Naming your interface <code>Shaper</code> instead of <code>IShaper</code> would probably be more idiomatic. Just sayin&#39;. :)"}, {"owner": {"reputation": 1034, "user_id": 2089648, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b29d87d89de9c1abac217464e57b191?s=128&d=identicon&r=PG", "display_name": "user2089648", "link": "https://stackoverflow.com/users/2089648/user2089648"}, "edited": false, "score": 0, "creation_date": 1426323035, "post_id": 29041930, "comment_id": 46332774, "body": "In this case I can not override the Collide function that get&#39;s called when two objects collide, which I need to be custom for objects embedding the shape circle."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 1034, "user_id": 2089648, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b29d87d89de9c1abac217464e57b191?s=128&d=identicon&r=PG", "display_name": "user2089648", "link": "https://stackoverflow.com/users/2089648/user2089648"}, "edited": false, "score": 0, "creation_date": 1426327857, "post_id": 29041930, "comment_id": 46333844, "body": "@user2089648 true: embedding (through an anonymous <i>field</i>) a type <code>A</code> within a type <code>B</code> doesn&#39;t make <code>B</code> an <code>A</code>. That means a different approach is required. If <code>Rock</code> implements <code>Collidable</code>, would at least your library call <code>Rock</code>&#39;s version of <code>Collide()</code>?"}, {"owner": {"reputation": 1034, "user_id": 2089648, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b29d87d89de9c1abac217464e57b191?s=128&d=identicon&r=PG", "display_name": "user2089648", "link": "https://stackoverflow.com/users/2089648/user2089648"}, "edited": false, "score": 0, "creation_date": 1426343060, "post_id": 29041930, "comment_id": 46338045, "body": "Type Rock has it&#39;s own version of Collide(), yes, but no version of DoesCollide() itself. However as Rock embedds Circle, it qualifies as a Collidable and Circle&#39;s version of DoesCollide() is called. However, DoesCollide then fails, because it can&#39;t cast the Argument &quot;c2 Collidable&quot; to a Circle."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 1034, "user_id": 2089648, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b29d87d89de9c1abac217464e57b191?s=128&d=identicon&r=PG", "display_name": "user2089648", "link": "https://stackoverflow.com/users/2089648/user2089648"}, "edited": false, "score": 0, "creation_date": 1426343135, "post_id": 29041930, "comment_id": 46338073, "body": "@user2089648 ok, so the all embedded approach isn&#39;t the right one here."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 0, "last_activity_date": 1426327287, "last_edit_date": 1426327287, "creation_date": 1426280760, "answer_id": 29041930, "question_id": 29039021, "link": "https://stackoverflow.com/questions/29039021/golang-interface-cast-to-embedded-struct/29041930#29041930", "title": "Golang interface cast to embedded struct", "body": "<p>If you are calling a legacy library which is not extensible (and cannot detect <code>Rock</code>, only <code>Circle</code>), there seems to be only one solution, pass a <code>Circle</code>.</p>\n\n<p>See <a href=\"https://play.golang.org/p/H3M-VuGVSm\" rel=\"nofollow\">this example</a>, where I use a non-anonymous field '<code>c</code>' for <code>Rock</code><br>\n(That means <code>Rock</code> has to implement the interface, which is a simple delegation to <code>Circle.Shape()</code>)</p>\n\n<pre><code>type Shaper interface {\n    Shape()\n}\n\ntype Circle struct{}\n\nfunc (c *Circle) Shape() {}\n\ntype Rock struct{ c *Circle }\n\nfunc (r *Rock) Shape() { r.Shape() }\n\nfunc DoesShape(s Shaper) {\n    fmt.Println(\"type:\", reflect.TypeOf(s))\n    switch st := s.(type) {\n    case *Circle:\n        fmt.Println(\"Shaper Circle %+v\", st)\n    default:\n        fmt.Println(\"Shaper unknown\")\n    }\n}\n\nfunc main() {\n    c := &amp;Circle{}\n    DoesShape(c)\n    r := &amp;Rock{c}\n    DoesShape(r.c)\n}\n</code></pre>\n\n<p>Then the output is:</p>\n\n<pre><code>type: *main.Circle\nShaper Circle %+v &amp;{}\ntype: *main.Circle\nShaper Circle %+v &amp;{}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1457, "user_id": 3193807, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4bee72a650d36b5841b4f6231a4e1d61?s=128&d=identicon&r=PG&f=1", "display_name": "scenia", "link": "https://stackoverflow.com/users/3193807/scenia"}, "edited": false, "score": 0, "creation_date": 1573074216, "post_id": 45530607, "comment_id": 103766871, "body": "I&#39;m wondering, if Circle itself implements Collider by having a method CollisionShape, wouldn&#39;t embedding an anonymous Circle make the Rock also implement Collider in an extension of your last example? This way, the OP could be solved simply by making Circle implement Collider and calling <code>c2.CollisionShape().(type)</code> instead of <code>c2.(type)</code> right away. Am I missing something? I feel the CollisionShape method is the essence of what makes your idea work."}], "tags": [], "owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "is_accepted": false, "score": 4, "last_activity_date": 1502098203, "last_edit_date": 1502098203, "creation_date": 1502011916, "answer_id": 45530607, "question_id": 29039021, "link": "https://stackoverflow.com/questions/29039021/golang-interface-cast-to-embedded-struct/45530607#45530607", "title": "Golang interface cast to embedded struct", "body": "<p>You are trying to use an object oriented design pattern with inheritance. This is not how to do this in Go. Beside, interface names end in 'able' in Java or equivalent object oriented languages. In Go the convention is to end interface names with 'er'. </p>\n\n<p>To answer your question about the Rock, I would suggest that all thing that can collide into another thing implements the method CollisonShape() returning a collison.Shaper (e.g. Circle) that you will use to test collison. Here <em>collison</em> is the name of your package.</p>\n\n\n\n<pre><code>// This interface is defined in the collison package.\n// Any object that may collide must implement that method.\ntype Collider interface {\n    CollisonShape() Shaper\n}\n\n// This function defined in the collison package \n// test if two Collider collide into each other.\nfunc Collide(c1, c2 Collider) bool {\n    shape1, shape2 := c1.CollisonShape(), c2.CollisonShape()\n    ...\n}\n\n// This is how you would define an object that can collide.\ntype Rock struct {\n    shape *collison.Circle\n    ...\n}\n// Implements the Collider interface.\n// The return type must be the same as in the interface.\nfunc (r *Rock) CollisonShape() collison.Shaper {\n    return r.shape\n}\n</code></pre>\n\n<p>As you see, we use a method to access the collison shape of the rock. This allow us to write </p>\n\n<pre><code>if collison.Collide(rock, spaceCraft) {...}\n</code></pre>\n\n<p>This answer your question on how to do get the collison Shape of Rock.</p>\n\n<p>If you want to avoid the call to the CollisonShape() method in the Collide() function, you will have to pass directly the collison.Shaper.</p>\n\n<p>The method Collide would be defined in the collison package as </p>\n\n<pre><code>func Collide(shape1, shape2 Shaper) bool {...}\n</code></pre>\n\n<p>You then would have to write</p>\n\n<pre><code>if collison.Collide(rock.shape, spacecraft.shape) {...}\n</code></pre>\n\n<p>This design would be slightly more efficient, but the price to pay is less readable code which is frown upon by experienced Go programmers. </p>\n\n<p>If you want Circle to be an embedded struct in rock you would then have to define it the following way. Embedding the shape saves allocation time for the Circle and some work for the GC.</p>\n\n<pre><code>type Rock struct {\n    shape collison.Circle\n    ....\n}\n\nif collison.Collide(&amp;rock.shape, &amp;spacecraft.shape) {...}\n</code></pre>\n\n<p>If you want to use an anonymous embedded struct, you then would have to write </p>\n\n<pre><code>type Rock struct {\n    Circle\n    ....\n}\n\nif collison.Collide(&amp;rock.Circle, &amp;spacecraft.Rectangle) {...}\n</code></pre>\n\n<p>As you see, the code gets less and less readable, and less convenient to use. The shape is not abstracted anymore. Using anonymous embedded struct should be limited to the very few cases where it really make sense. </p>\n\n<p>By using the initially suggested CollisonShape() method, you could easily change your Rock structure into this one without breaking any code.</p>\n\n<pre><code>type Rock struct {\n    shape collison.Circle\n    ...\n}\n\n\nfunc (r *Rock) CollisonShape() collison.Shaper {\n    return &amp;r.shape\n}\n</code></pre>\n\n<p>This now make the shape and embedded struct. The use of a method to get the shape decouples the internal implementation of Rock from the access to the shape. You can change the internal implementation of Rock without needing to change code in other places. </p>\n\n<p>This is one of the reason why Go doesn't support inheritence. It creates a very strong dependency and coupling between the base class and derived classes. Experience has shown that people often regret such coupling as the code evolves. Object composition is preferred and recommended and well supported by Go. </p>\n\n<p>If efficiency is your goal, every Collider should have one position which changes and a bounding box with a width and height that doesn't change. You can save a few operations using these values for the bounding box overlap test. But this is another story. </p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 2370732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaae15a0593e3456a202ea438fe22459?s=128&d=identicon&r=PG", "display_name": "Isaac To", "link": "https://stackoverflow.com/users/2370732/isaac-to"}, "is_accepted": false, "score": 0, "last_activity_date": 1544750793, "creation_date": 1544750793, "answer_id": 53772351, "question_id": 29039021, "link": "https://stackoverflow.com/questions/29039021/golang-interface-cast-to-embedded-struct/53772351#53772351", "title": "Golang interface cast to embedded struct", "body": "<p>I have solved a similar problem by slightly modifying the base class.  Not sure whether this is the solution you were looking for.</p>\n\n<pre><code>import \"fmt\"\n\ntype IShaper interface {\n    Shape()\n}\n\ntype Rect struct{}\n\nfunc (r *Rect) Shape() {}\n\ntype Circle struct{}\n\nfunc (c *Circle) GetCircle() *Circle { return c }\n\nfunc (c *Circle) Shape() {}\n\ntype Rock struct{ *Circle }\n\ntype ShapeWithCircle interface {\n    GetCircle() *Circle\n}\n\nfunc DoesShape(s IShaper) {\n    if sc, ok := s.(ShapeWithCircle); ok {\n        fmt.Printf(\"Shaper Circle %+v\\n\", sc.GetCircle())\n    } else {\n        fmt.Println(\"Shaper unknown\")\n    }\n}\n\nfunc main() {\n    DoesShape(&amp;Circle{})\n    DoesShape(&amp;Rock{&amp;Circle{}})\n    DoesShape(&amp;Rect{})\n}\n</code></pre>\n\n<p>That is, add a trivial function GetCircle() so that anything embedding a Circle has a function to get the (possibly embedded) circle.  Then anybody needing a circle can trivially write an interface (ShapeWithCircle here) allowing one to test whether GetCircle() is defined and, if so, call it to get the embedded circle.</p>\n\n<p>Play with it at <a href=\"https://play.golang.org/p/IDkjTPrG3Z5\" rel=\"nofollow noreferrer\">https://play.golang.org/p/IDkjTPrG3Z5</a> .</p>\n"}], "owner": {"reputation": 1034, "user_id": 2089648, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b29d87d89de9c1abac217464e57b191?s=128&d=identicon&r=PG", "display_name": "user2089648", "link": "https://stackoverflow.com/users/2089648/user2089648"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7451, "favorite_count": 2, "answer_count": 4, "score": 3, "last_activity_date": 1544750793, "creation_date": 1426269835, "question_id": 29039021, "link": "https://stackoverflow.com/questions/29039021/golang-interface-cast-to-embedded-struct", "title": "Golang interface cast to embedded struct", "body": "<p>I want to implement a collision library using the interface Collidable</p>\n\n<pre><code>type Collidable interface{\n    BoundingBox() (float64,float64,float64,float64)\n    FastCollisionCheck(c2 Collidable) bool\n    DoesCollide(c2 Collidable) bool\n    Collide(c2 Collidable)\n}\n</code></pre>\n\n<p>It has predefined shapes like.</p>\n\n<pre><code>type Circle struct{\nX,Y,Radius float64\n}\n</code></pre>\n\n<p>The idea is that I can do</p>\n\n<pre><code>type Rock struct{\n    collision.Circle\n    ....\n}\n</code></pre>\n\n<p>which then implements the interface Collidable, so I can pass it to a Spatial Hash Map (that expects a collidable). Only thing needed to do would be to override the Collide() function to my needs.</p>\n\n<p>However the functions in type circle can not handle the type rock, even tough it has a circle embedded.</p>\n\n<pre><code>func (c1 *Circle) DoesCollide(i Collidable) bool{\n    switch c2 := value.(type) {\n    case Circle:\n    //doesn't fire, as it is of type Rock (unknown in this package)\n    //Needed is something like\n    //if i_embeds_Circle then c2 := i_to_Circle \n    }\n}\n</code></pre>\n\n<p>Is this possible?\nIs there a better way?</p>\n"}, {"tags": ["unicode", "go", "whitespace"], "answers": [{"comments": [{"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 1, "creation_date": 1426276963, "post_id": 29040227, "comment_id": 46322247, "body": "So what is the white-box difference between calling <code>unicode.IsSpace()</code>, checking whether a character is in the Z category, and checking whether a character is in <code>Pattern_White_Space</code>? In other words, which characters are considered whitespace by one of these methods but not by another?"}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1426449913, "post_id": 29040227, "comment_id": 46366777, "body": "But the question is how is that different from checking whether a character is in the Z category or in <code>Pattern_White_Space</code>?"}], "tags": [], "owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "is_accepted": false, "score": 3, "last_activity_date": 1426280072, "last_edit_date": 1426280072, "creation_date": 1426274055, "answer_id": 29040227, "question_id": 29038314, "link": "https://stackoverflow.com/questions/29038314/determining-whitespace-in-go/29040227#29040227", "title": "Determining whitespace in Go", "body": "<p>The IsSpace function will first check if your <code>rune</code> is in the Latin1 char space.  If it is, it will use the space characters you listed to determine white-spacing.</p>\n\n<p>If not, <code>isExcludingLatin</code> (<a href=\"http://golang.org/src/unicode/letter.go?h=isExcludingLatin#L170\" rel=\"nofollow\">http://golang.org/src/unicode/letter.go?h=isExcludingLatin#L170</a>) is called which looks like:</p>\n\n<pre><code>   170  func isExcludingLatin(rangeTab *RangeTable, r rune) bool {\n   171      r16 := rangeTab.R16\n   172      if off := rangeTab.LatinOffset; len(r16) &gt; off &amp;&amp; r &lt;= rune(r16[len(r16)-1].Hi) {\n   173          return is16(r16[off:], uint16(r))\n   174      }\n   175      r32 := rangeTab.R32\n   176      if len(r32) &gt; 0 &amp;&amp; r &gt;= rune(r32[0].Lo) {\n   177          return is32(r32, uint32(r))\n   178      }\n   179      return false\n   180  }\n</code></pre>\n\n<p>The <code>*RangeTable</code> being passed in is <code>White_Space</code> which looks is defined here:</p>\n\n<p><a href=\"http://golang.org/src/unicode/tables.go?h=White_Space#L6069\" rel=\"nofollow\">http://golang.org/src/unicode/tables.go?h=White_Space#L6069</a></p>\n\n<pre><code>  6069  var _White_Space = &amp;RangeTable{\n  6070      R16: []Range16{\n  6071          {0x0009, 0x000d, 1},\n  6072          {0x0020, 0x0020, 1},\n  6073          {0x0085, 0x0085, 1},\n  6074          {0x00a0, 0x00a0, 1},\n  6075          {0x1680, 0x1680, 1},\n  6076          {0x2000, 0x200a, 1},\n  6077          {0x2028, 0x2029, 1},\n  6078          {0x202f, 0x202f, 1},\n  6079          {0x205f, 0x205f, 1},\n  6080          {0x3000, 0x3000, 1},\n  6081      },\n  6082      LatinOffset: 4,\n  6083  }\n</code></pre>\n\n<p>To answer your main question, the <code>IsSpace</code> check is not limited to Latin-1.</p>\n\n<p><strong>EDIT</strong><br>\nFor clarification, if the character you are testing is not in the Latin-1 charset, then the range table lookup is used.  The <code>Range16</code> values in the table represent ranges of 16bit numbers {Low, Hi, Stride}.  The <code>isExcludingLatin</code> will call <code>is16</code> with that range table sub-section (<code>R16</code>) and determine if the <code>rune</code> provided falls in any of the ranges after the index of <code>LatinOffset</code> (which is 4 in this case).</p>\n\n<p>So, that is checking these ranges:</p>\n\n<pre><code> {0x1680, 0x1680, 1},\n {0x2000, 0x200a, 1},\n {0x2028, 0x2029, 1},\n {0x202f, 0x202f, 1},\n {0x205f, 0x205f, 1},\n {0x3000, 0x3000, 1},\n</code></pre>\n\n<p>There are unicode code points for:</p>\n\n<p><a href=\"http://www.fileformat.info/info/unicode/char/1680/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/1680/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2000/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2000/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2001/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2001/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2002/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2002/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2003/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2003/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2004/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2004/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2005/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2005/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2006/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2006/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2007/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2007/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2008/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2008/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2009/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2009/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/200a/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/200a/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2028/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2028/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/2029/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/2029/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/202f/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/202f/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/205f/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/205f/index.htm</a>\n<a href=\"http://www.fileformat.info/info/unicode/char/3000/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/3000/index.htm</a></p>\n\n<p>All of the above are considers \"white space\"</p>\n"}], "owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4278, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1542705288, "creation_date": 1426267201, "last_edit_date": 1592644375, "question_id": 29038314, "link": "https://stackoverflow.com/questions/29038314/determining-whitespace-in-go", "title": "Determining whitespace in Go", "body": "<p>From the <a href=\"http://golang.org/pkg/unicode/#IsSpace\" rel=\"nofollow noreferrer\">documentation of Go's <code>unicode</code> package</a>:</p>\n<blockquote>\n<p><strong>func IsSpace</strong></p>\n<p><code>func IsSpace(r rune) bool</code></p>\n<p>IsSpace reports whether the rune is a space character as defined by Unicode's White Space property; in the Latin-1 space this is</p>\n<p><code>'\\t', '\\n', '\\v', '\\f', '\\r', ' ', U+0085 (NEL), U+00A0 (NBSP).</code></p>\n<p>Other definitions of spacing characters are set by category Z and property Pattern_White_Space.</p>\n</blockquote>\n<p>My question is: What does it mean that &quot;other definitions&quot; are set by the Z category and <code>Pattern_White_Space</code>? Does this mean that calling <code>unicode.IsSpace()</code>, checking whether a character is in the Z category, and checking whether a character is in <code>Pattern_White_Space</code> <strong>will all yield different results?</strong> If so, what are the differences? And why are there differences?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1467267"}, "edited": false, "score": 1, "creation_date": 1426267317, "post_id": 29038269, "comment_id": 46317230, "body": "Use <a href=\"http://golang.org/pkg/reflect/\" rel=\"nofollow noreferrer\">golang.org/pkg/reflect</a> to if it&#39;s the original user struct or the inherited one."}], "answers": [{"tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": false, "score": 1, "last_activity_date": 1426274627, "creation_date": 1426274627, "answer_id": 29040380, "question_id": 29038269, "link": "https://stackoverflow.com/questions/29038269/how-do-i-check-if-a-outer-type-is-a-type-of-inner-type/29040380#29040380", "title": "How do I check if a outer type is a type of inner type?", "body": "<p>Depending on you need, you have two main methods: <a href=\"https://godoc.org/reflect#TypeOf\" rel=\"nofollow\"><code>reflect.TypeOf</code></a>, and the <a href=\"https://golang.org/doc/effective_go.html#type_switch\" rel=\"nofollow\">type swtich</a>.</p>\n\n<p>You will use the first to compare the type of an interface with another one. Example:</p>\n\n<pre><code>if reflect.TypeOf(a) == reflect.TypeOf(b) {\n    doSomething()\n}\n</code></pre>\n\n<p>You will use the second to do a particular action given the type of an interface. Example:</p>\n\n<pre><code>switch a.(type) {\n    case User:\n        doSomething()\n    case Admin:\n        doSomeOtherThing()\n}\n</code></pre>\n"}], "owner": {"reputation": 4857, "user_id": 1394977, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/056b8ecb67eade75d571f20a7fb6e5aa?s=128&d=identicon&r=PG", "display_name": "Stephen Nguyen", "link": "https://stackoverflow.com/users/1394977/stephen-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426274627, "creation_date": 1426267042, "question_id": 29038269, "link": "https://stackoverflow.com/questions/29038269/how-do-i-check-if-a-outer-type-is-a-type-of-inner-type", "title": "How do I check if a outer type is a type of inner type?", "body": "<p>If I have different forms of user structs being passed around my application is there a way to check if that embedded struct is a type of the outer struct?</p>\n\n<pre><code>type (\n    user struct {\n        name  string\n        email string\n    }\n    admin struct {\n        user\n        level string\n    }\n)\n</code></pre>\n"}, {"tags": ["go", "beego"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1429809656, "post_id": 29035566, "comment_id": 47787089, "body": "Perhaps it was due to cut-n-pasting into SO, but please <a href=\"https://blog.golang.org/go-fmt-your-code\" rel=\"nofollow noreferrer\"><code>gofmt</code> all Go code</a>. In this case it would have made the type definitions much easier to read."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 1468211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59b6852f5409b256381843b146d1b090?s=128&d=identicon&r=PG", "display_name": "wuranbo", "link": "https://stackoverflow.com/users/1468211/wuranbo"}, "is_accepted": false, "score": 1, "last_activity_date": 1429793049, "creation_date": 1429793049, "answer_id": 29823845, "question_id": 29035566, "link": "https://stackoverflow.com/questions/29035566/how-to-load-database-records-into-sub-structs/29823845#29823845", "title": "How to load database records into sub structs?", "body": "<p><a href=\"https://github.com/astaxie/beego/issues/384\" rel=\"nofollow\">https://github.com/astaxie/beego/issues/384</a> has a relative talk, but it's Chinese.The key is below:</p>\n\n<pre><code>type User struct {\n  Id   int\n  Name string\n}\n\ntype Profile struct {\n  Id   int\n  Age  int\n}\n\nvar users []*User\nvar profiles []*Profile\nerr := o.Raw(`SELECT id, name, p.id, p.age FROM user\n    LEFT OUTER JOIN profile AS p ON p.id = profile_id WHERE id = ?`, 1).QueryRows(&amp;users, &amp;profiles)\n</code></pre>\n"}], "owner": {"reputation": 2337, "user_id": 600061, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bbac8bb4d3ffbceca42b09eb0729e63c?s=128&d=identicon&r=PG", "display_name": "Twisted1919", "link": "https://stackoverflow.com/users/600061/twisted1919"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1117, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1429793049, "creation_date": 1426258980, "question_id": 29035566, "link": "https://stackoverflow.com/questions/29035566/how-to-load-database-records-into-sub-structs", "title": "How to load database records into sub structs?", "body": "<p>Playing around with GO/Beego Framework and trying to query the database to load some records into a struct.</p>\n\n<p>Bellow is the important code: </p>\n\n<pre><code>type User struct {\n    UserId int64 `orm:\"pk\"`\n    FirstName string `orm:\"null\" valid:\"MinSize(2);MaxSize(150)\"`\n    LastName string `orm:\"null\" valid:\"MinSize(2);MaxSize(150)\"`\n    Email string `valid:\"Required;MinSize(2);MaxSize(150);Email\" required:\"true\" description:\"user email address\"`\n    Password string `valid:\"Required;MaxSize(60)\"  required:\"true\" description:\"user plain text password\" json:\"-\"`\n    AccessLevel uint64 `json:\"-\"`\n    AuthKey string `json:\"-\"`\n    Status int `json:\"-\"`\n    DateAdded time.Time `orm:\"-\" json:\"-\"`\n    LastUpdated time.Time `orm:\"-\" json:\"-\"`\n\n    // relations\n    Profile *UserProfile `orm:\"rel(one)\" json:\"-\"` // OneToOne relation\n}\n\ntype UserProfile struct {\n    UserId  int64 `orm:\"pk\"` // doesn't work without a PK, doesn't make sense, it's a fk...\n    Company string `orm:\"null\" valid:\"MinSize(2);MaxSize(150)\"`\n    VatNumber string `orm:\"null\" valid:\"MinSize(2);MaxSize(150)\"`\n    Website string `orm:\"null\" valid:\"MinSize(2);MaxSize(150)\"`\n    Phone string `orm:\"null\" valid:\"MinSize(2);MaxSize(150);Mobile\"`\n    Address1 string `orm:\"null\" valid:\"MinSize(2);MaxSize(255)\"`\n    Address2 string `orm:\"null\" valid:\"MinSize(2);MaxSize(255)\"`\n    City string `orm:\"null\" valid:\"MinSize(2);MaxSize(150)\"`\n    State string `orm:\"null\" valid:\"MinSize(2);MaxSize(150)\"`\n    Zip string `orm:\"null\" valid:\"MinSize(4);MaxSize(15)\"`\n    Country string `orm:\"null\" valid:\"MinSize(2);MaxSize(150)\"`\n    ConfirmationKey string `orm:\"null\" valid:\"Length(40)\" json:\"-\"`\n\n    // relations\n    User *User `orm:\"reverse(one)\" json:\"-\"` // Reverse relationship (optional)\n}\n\nfunc GetAllUsers() []User {\n    o := orm.NewOrm()\n    var users []User\n    sql := `\n    SELECT user.*, user_profile.* \n       FROM user\n       INNER JOIN user_profile ON user_profile.user_id = user.user_id \n    WHERE 1`\n    _, err := o.Raw(sql).QueryRows(&amp;users)\n    if err != nil {\n        beego.Error(err)\n    }\n    beego.Info(users)\n    return users\n}\n</code></pre>\n\n<p>Now the problem with above is that upon calling <code>GetAllUsers()</code> the embed struct from <code>User</code>, that is <code>Profile</code>, doesn't get populated, so how would i go so that embed structs are also populated?</p>\n\n<p>I have also tried to get the users with:</p>\n\n<pre><code>o.QueryTable(\"user\").Filter(\"status\", STATUS_ACTIVE).RelatedSel(\"Profile\").All(&amp;users)\n</code></pre>\n\n<p>which produces a sql query like:</p>\n\n<pre><code>SELECT T0.`user_id`, T0.`first_name`, T0.`last_name`, T0.`email`, T0.`password`, T0.`access_level`, T0.`auth_key`, T0.`status`, T0.`profile_id`, T1.`user_id`, T1.`company`, T1.`vat_number`, T1.`website`, T1.`phone`, T1.`address1`, T1.`address2`, T1.`city`, T1.`state`, T1.`zip`, T1.`country`, T1.`confirmation_key` FROM `user` T0 INNER JOIN `user_profile` T1 ON T1.`user_id` = T0.`profile_id` WHERE T0.`status` = ? LIMIT 1000\n</code></pre>\n\n<p>And i don't know from where it came up with the join on profile_id column since that doesn't even exists and i am not sure how to specify the right column to join, seems it takes it from the structure name. Also, i don't like the fact that there isn't a way to specify what to select.</p>\n\n<p>Any hint is highly appreciated, i am sure it's something simple that i miss.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["arrays", "go"], "answers": [{"comments": [{"owner": {"reputation": 705, "user_id": 3292304, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ce151acbd28ae71c472b961004b0a9f?s=128&d=identicon&r=PG", "display_name": "Razakhel", "link": "https://stackoverflow.com/users/3292304/razakhel"}, "edited": false, "score": 0, "creation_date": 1426252845, "post_id": 29031658, "comment_id": 46307482, "body": "Tanks for the tip, but it doesn&#39;t work either...  (cannot use grd_studentsList (type []ui.Grid) as type []ui.Control in argument to ui.NewSimpleGrid)"}, {"owner": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "edited": false, "score": 0, "creation_date": 1426296076, "post_id": 29031658, "comment_id": 46328504, "body": "So make <code>grd_studentsList</code> a <code>[]ui.Control</code>.  Assuming the Grid type conforms to the interface, the rest of the code should work."}], "tags": [], "owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "is_accepted": false, "score": 9, "last_activity_date": 1426247889, "creation_date": 1426247889, "answer_id": 29031658, "question_id": 29031625, "link": "https://stackoverflow.com/questions/29031625/golang-how-to-convert-an-array-to-a-list/29031658#29031658", "title": "Golang - How to &quot;convert&quot; an array ( [ ] ) to a list ( ... )?", "body": "<p>Try something like:</p>\n\n<pre><code>return ui.NewSimpleGrid(1, grd_studentsList...)\n                                           ^^^^\n</code></pre>\n\n<p>This is mentioned in the spec <a href=\"https://golang.org/ref/spec#Passing_arguments_to_..._parameters\" rel=\"noreferrer\">Passing arguments to ... parameters</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 4, "last_activity_date": 1426259336, "last_edit_date": 1495541181, "creation_date": 1426259336, "answer_id": 29035695, "question_id": 29031625, "link": "https://stackoverflow.com/questions/29031625/golang-how-to-convert-an-array-to-a-list/29035695#29035695", "title": "Golang - How to &quot;convert&quot; an array ( [ ] ) to a list ( ... )?", "body": "<blockquote>\n  <p>It it doesn't work either... </p>\n</blockquote>\n\n<pre><code>cannot use grd_studentsList (type `[]ui.Grid`) as type `[]ui.Control`\nin argument to `ui.NewSimpleGrid`\n</code></pre>\n\n<p>As I mentioned before (\"<a href=\"https://stackoverflow.com/a/29026469/6309\">What about memory layout means that <code>[]T</code> cannot be converted to <code>[]interface{}</code> in Go?</a>\"), you cannot convert implicitly <code>A[]</code> in <code>[]B</code>.</p>\n\n<p>You would need to copy first:</p>\n\n<pre><code>var controls []ui.Control = make([]ui.Control, len(grd_studentsList))\nfor i, gs := range grd_studentsList{\n    controls [i] = gs\n}\n</code></pre>\n\n<p>And then use the right slice (with the right type)</p>\n\n<pre><code> return ui.NewSimpleGrid(1, controls...)\n</code></pre>\n"}], "owner": {"reputation": 705, "user_id": 3292304, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ce151acbd28ae71c472b961004b0a9f?s=128&d=identicon&r=PG", "display_name": "Razakhel", "link": "https://stackoverflow.com/users/3292304/razakhel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2975, "favorite_count": 1, "accepted_answer_id": 29035695, "answer_count": 2, "score": 2, "last_activity_date": 1426259336, "creation_date": 1426247776, "question_id": 29031625, "link": "https://stackoverflow.com/questions/29031625/golang-how-to-convert-an-array-to-a-list", "title": "Golang - How to &quot;convert&quot; an array ( [ ] ) to a list ( ... )?", "body": "<p>I'm using the UI lib (<a href=\"https://github.com/andlabs/ui\" rel=\"nofollow\">https://github.com/andlabs/ui</a>) to make a program about students' groups.</p>\n\n<p>The ui.SimpleGrid allows a \"list\" of Control to be entered:</p>\n\n<pre><code>func NewSimpleGrid(nPerRow int, controls ...Control) SimpleGrid\n</code></pre>\n\n<p>I feel like in Java and other languages, it worked just as an array, which basically means that giving it one would work. However, this appears not to be the same in Go.</p>\n\n<pre><code>func initStudentsGrid(students ...Student) ui.SimpleGrid {\nvar i int\nvar grd_studentsList []ui.Grid\n\nfor i = 0; i &lt; len(students); i++ {\n    grd_student := ui.NewGrid()\n\n    grd_student.Add(ui.NewLabel(students[i].group), nil, ui.West, true, ui.LeftTop, true, ui.LeftTop, 1, 1)\n    grd_student.Add(ui.NewLabel(students[i].lastName), nil, ui.West, true, ui.LeftTop, true, ui.LeftTop, 1, 1)\n    grd_student.Add(ui.NewLabel(students[i].firstName), nil, ui.West, true, ui.LeftTop, true, ui.LeftTop, 1, 1)\n\n    grd_studentsList = append(grd_studentsList, grd_student)\n}\n\nreturn ui.NewSimpleGrid(1, grd_studentsList)\n</code></pre>\n\n<p>The program's not compiling because:</p>\n\n<blockquote>\n  <p>cannot use grd_studentsList (type []ui.Grid) as type ui.Control in argument to ui.NewSimpleGrid: []ui.Grid does not implement ui.Control (missing ui.containerHide method)</p>\n</blockquote>\n\n<p>Is there any way to do a kind of \"cast\" from an array to the required format, since it isn't possible to add the grids one by one (no append method on SimpleGrid)?</p>\n"}, {"tags": ["go", "type-conversion", "slice"], "comments": [{"owner": {"reputation": 11590, "user_id": 54467, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/RnwJd.jpg?s=128&g=1", "display_name": "Kaveh Shahbazian", "link": "https://stackoverflow.com/users/54467/kaveh-shahbazian"}, "edited": false, "score": 2, "creation_date": 1426250200, "post_id": 29031353, "comment_id": 46305632, "body": "By <code>type Card string</code> you are introducing an actual new type, not a type alias. <code>Card</code> is a new type which can have it&#39;s set of methods and behavior."}], "answers": [{"comments": [{"owner": {"reputation": 493, "user_id": 583056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4daaa21779c72f27207efed2e27c484f?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Donckels", "link": "https://stackoverflow.com/users/583056/fr%c3%a9d%c3%a9ric-donckels"}, "edited": false, "score": 1, "creation_date": 1426247495, "post_id": 29031445, "comment_id": 46303860, "body": "Still, I don&#39;t understand why a copy is needed (isn&#39;t there any way to avoid it?). There&#39;s still a missing connection in my understanding."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 493, "user_id": 583056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4daaa21779c72f27207efed2e27c484f?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Donckels", "link": "https://stackoverflow.com/users/583056/fr%c3%a9d%c3%a9ric-donckels"}, "edited": false, "score": 0, "creation_date": 1426251353, "post_id": 29031445, "comment_id": 46306435, "body": "@FDO, it&#39;s a copy because everything is go is a value. There&#39;s no way to make a variable, and assign a value without copying something, even if it&#39;s just a pointer."}], "tags": [], "owner": {"reputation": 47141, "user_id": 1643939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mww2p.png?s=128&g=1", "display_name": "nemo", "link": "https://stackoverflow.com/users/1643939/nemo"}, "is_accepted": false, "score": 1, "last_activity_date": 1426247245, "creation_date": 1426247245, "answer_id": 29031445, "question_id": 29031353, "link": "https://stackoverflow.com/questions/29031353/conversion-of-a-slice-of-string-into-a-slice-of-custom-type/29031445#29031445", "title": "Conversion of a slice of string into a slice of custom type", "body": "<blockquote>\n  <p>From the specs, it looks like []string is not the same underlying type as []Card, so the type conversion cannot occur. </p>\n</blockquote>\n\n<p>Exactly right. You have to convert it by looping and copying over each element, converting the type from <code>string</code> to <code>Card</code> on the way.</p>\n\n<blockquote>\n  <p>If it is the case, why is it so? Assuming, in a non-pet-example program, I have as input a slice of string, is there any way to \"cast\" it into a slice of Card, or do I have to create a new structure and copy the data into it? (Which I'd like to avoid since the functions I'll need to call will modify the slice content).</p>\n</blockquote>\n\n<p>Because conversions are always explicit and the designers felt that when a conversion implicitly involves a copy it should be made explicit as well.</p>\n"}, {"comments": [{"owner": {"reputation": 493, "user_id": 583056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4daaa21779c72f27207efed2e27c484f?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Donckels", "link": "https://stackoverflow.com/users/583056/fr%c3%a9d%c3%a9ric-donckels"}, "edited": false, "score": 0, "creation_date": 1426252099, "post_id": 29032922, "comment_id": 46306973, "body": "as I mentioned, this is a pet example, in my real setup, the <code>[]string</code> comes from an external source on which I have no control."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 493, "user_id": 583056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4daaa21779c72f27207efed2e27c484f?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Donckels", "link": "https://stackoverflow.com/users/583056/fr%c3%a9d%c3%a9ric-donckels"}, "edited": false, "score": 0, "creation_date": 1426252271, "post_id": 29032922, "comment_id": 46307072, "body": "@FDO Yes, I know, but if this is a pet example, in more complex examples there is even more reason to create proper types in the first place. Look at it as in this example you don&#39;t have the required input slice, just some data from which you can produce  the required input slice."}, {"owner": {"reputation": 493, "user_id": 583056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4daaa21779c72f27207efed2e27c484f?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Donckels", "link": "https://stackoverflow.com/users/583056/fr%c3%a9d%c3%a9ric-donckels"}, "edited": false, "score": 1, "creation_date": 1426252773, "post_id": 29032922, "comment_id": 46307440, "body": "I&#39;m not sure what you mean by this. The output of <code>strings.Split</code>, for instance, is a <code>[]string</code>. I created the type <code>Card</code> and <code>Hand</code> because I want &#39;methods&#39; for those types, and the output of <code>strings.Split</code> is used as input for those types and it seems a waste of time/cpu/code to just copy input in a new data structure.  Why would <code>[]string</code> and <code>[]Card</code> have a different memory layout ? (the <code>[]int32</code> and <code>[]byte</code> example is obvious, but in my case, it&#39;s not so obvious to me)"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 493, "user_id": 583056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4daaa21779c72f27207efed2e27c484f?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Donckels", "link": "https://stackoverflow.com/users/583056/fr%c3%a9d%c3%a9ric-donckels"}, "edited": false, "score": 1, "creation_date": 1426254222, "post_id": 29032922, "comment_id": 46308449, "body": "@FDO If you have a <code>[]string</code>, you need to manually build a <code>[]Card</code> from it. There is no &quot;easier&quot; way. You can create a helper <code>toCards()</code> function so you can use it everywhere you need it."}, {"owner": {"reputation": 493, "user_id": 583056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4daaa21779c72f27207efed2e27c484f?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Donckels", "link": "https://stackoverflow.com/users/583056/fr%c3%a9d%c3%a9ric-donckels"}, "edited": false, "score": 0, "creation_date": 1426254926, "post_id": 29032922, "comment_id": 46308963, "body": "Ok. Thank you. I&#39;m still trying to figure out the rationale behind this design choice, so if you have any article I could read, I&#39;d be very grateful."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 493, "user_id": 583056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4daaa21779c72f27207efed2e27c484f?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Donckels", "link": "https://stackoverflow.com/users/583056/fr%c3%a9d%c3%a9ric-donckels"}, "edited": false, "score": 0, "creation_date": 1426255853, "post_id": 29032922, "comment_id": 46309625, "body": "@FDO Added some links. Some are more general and targets <code>[]interface{}</code> but some reasoning mentioned there applies here too."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 11, "last_activity_date": 1426255697, "last_edit_date": 1495540383, "creation_date": 1426251658, "answer_id": 29032922, "question_id": 29031353, "link": "https://stackoverflow.com/questions/29031353/conversion-of-a-slice-of-string-into-a-slice-of-custom-type/29032922#29032922", "title": "Conversion of a slice of string into a slice of custom type", "body": "<p>The underlying type of <code>Card</code> might be the same as the underlying type of <code>string</code> (which is itself: <code>string</code>), but the underlying type of <code>[]Card</code> is not the same as the underlying type of <code>[]string</code> (and therefore the same applies to <code>Hand</code>).</p>\n\n<p>You cannot convert a slice of <code>T1</code> to a slice of <code>T2</code>, it's not a matter of what underlying types they have, if <code>T1</code> is not identical to <code>T2</code>, you just can't. Why? Because slices of different element types may have different memory layout (different size in memory). For example the elements of type <code>[]byte</code> occupy 1 byte each. The elements of <code>[]int32</code> occupy 4 bytes each. Obviously you can't just convert one to the other even if all values are in the range <code>0..255</code>.</p>\n\n<p>But back to the roots: if you need a slice of <code>Card</code>s, why do you create a slice of <code>string</code>s in the first place? You created the <em>type</em> <code>Card</code> because it is <em>not</em> a <code>string</code> (or at least not just a <code>string</code>). If so and you require <code>[]Card</code>, then create <code>[]Card</code> in the first place and all your problems go away:</p>\n\n<pre><code>value := []Card{\"a\", \"b\", \"c\"}\nfirstHand := NewHand(value)\nfmt.Println(firstHand)\n</code></pre>\n\n<p>Note that you are still able to initialize the slice of <code>Card</code> with <em>untyped</em> constant <code>string</code> <em>literals</em> because it can be used to initialize any type whose underlying type is <code>string</code>. If you want to involve typed <code>string</code> constants or non-constant expressions of type <code>string</code>, you need explicit conversion, like in the example below:</p>\n\n<pre><code>s := \"ddd\"\nvalue := []Card{\"a\", \"b\", \"c\", Card(s)}\n</code></pre>\n\n<p>If you have a <code>[]string</code>, you need to manually build a <code>[]Card</code> from it. There is no \"easier\" way. You can create a helper <code>toCards()</code> function so you can use it everywhere you need it.</p>\n\n<pre><code>func toCards(s []string) []Card {\n    c := make([]Card, len(s))\n    for i, v := range s {\n        c[i] = Card(v)\n    }\n    return c\n}\n</code></pre>\n\n<p>Some links for background and reasoning:</p>\n\n<p><a href=\"http://golang.org/ref/spec#Conversions\" rel=\"noreferrer\">Go Language Specification: Conversions</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/21325155/why-string-can-not-be-converted-to-interface-in-golang\">why []string can not be converted to []interface{} in golang</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/12990338/cannot-convert-string-to-interface\">Cannot convert []string to []interface {}</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/29026241/what-about-memory-layout-means-that-t-cannot-be-converted-to-interface-in-go\">What about memory layout means that []T cannot be converted to []interface in Go?</a></p>\n"}, {"comments": [{"owner": {"reputation": 493, "user_id": 583056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4daaa21779c72f27207efed2e27c484f?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Donckels", "link": "https://stackoverflow.com/users/583056/fr%c3%a9d%c3%a9ric-donckels"}, "edited": false, "score": 1, "creation_date": 1518072983, "post_id": 48554123, "comment_id": 84355885, "body": "That is an extremely interesting complimentary comment, I wish I could +1 more than once to increase its visibility."}], "tags": [], "owner": {"reputation": 17785, "user_id": 952648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c85487802cc06d71bf6b7d739685f4bd?s=128&d=identicon&r=PG", "display_name": "tom", "link": "https://stackoverflow.com/users/952648/tom"}, "is_accepted": false, "score": 9, "last_activity_date": 1517449480, "creation_date": 1517449480, "answer_id": 48554123, "question_id": 29031353, "link": "https://stackoverflow.com/questions/29031353/conversion-of-a-slice-of-string-into-a-slice-of-custom-type/48554123#48554123", "title": "Conversion of a slice of string into a slice of custom type", "body": "<p>There is no technical reason why conversion between slices whose elements have identical underlying types (such as <code>[]string</code> and <code>[]Card</code>) is forbidden. It was a specification decision to help avoid accidental conversions between unrelated types that by chance have the same structure.</p>\n\n<p>The safe solution is to copy the slice. However, it is possible to convert directly (without copying) using the <a href=\"https://golang.org/pkg/unsafe\" rel=\"noreferrer\">unsafe</a> package:</p>\n\n<pre><code>value := []string{\"a\", \"b\", \"c\"}\n// convert &amp;value (type *[]string) to *[]Card via unsafe.Pointer, then deref\ncards := *(*[]Card)(unsafe.Pointer(&amp;value))\nfirstHand := NewHand(cards)\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/tto57DERjYa\" rel=\"noreferrer\">https://play.golang.org/p/tto57DERjYa</a></p>\n\n<p>Obligatory warning from the package documentation:</p>\n\n<blockquote>\n  <p><code>unsafe.Pointer</code> allows a program to defeat the type system and read and write arbitrary memory. It should be used with extreme care.</p>\n</blockquote>\n\n<p>There was a <a href=\"https://groups.google.com/forum/#!topic/golang-nuts/YA-X2z05VMM\" rel=\"noreferrer\">discussion on the mailing list</a> about conversions and underlying types in 2011, and a <a href=\"https://github.com/golang/go/issues/18030\" rel=\"noreferrer\">proposal to allow conversion between recursively equivalent types</a> in 2016 which was declined \"until there is a more compelling reason\".</p>\n"}], "owner": {"reputation": 493, "user_id": 583056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4daaa21779c72f27207efed2e27c484f?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Donckels", "link": "https://stackoverflow.com/users/583056/fr%c3%a9d%c3%a9ric-donckels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6122, "favorite_count": 2, "accepted_answer_id": 29032922, "answer_count": 3, "score": 9, "last_activity_date": 1517449480, "creation_date": 1426246957, "question_id": 29031353, "link": "https://stackoverflow.com/questions/29031353/conversion-of-a-slice-of-string-into-a-slice-of-custom-type", "title": "Conversion of a slice of string into a slice of custom type", "body": "<p>I'm quite new to Go, so this might be obvious. The compiler does not allow the following code:\n(<a href=\"http://play.golang.org/p/3sTLguUG3l\" rel=\"noreferrer\">http://play.golang.org/p/3sTLguUG3l</a>)</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype Card string\ntype Hand []Card\n\nfunc NewHand(cards []Card) Hand {\n    hand := Hand(cards)\n    return hand\n}\n\nfunc main() {\n    value := []string{\"a\", \"b\", \"c\"}\n    firstHand := NewHand(value)\n    fmt.Println(firstHand)\n}\n</code></pre>\n\n<p>The error is:\n<code>/tmp/sandbox089372356/main.go:15: cannot use value (type []string) as type []Card in argument to NewHand</code></p>\n\n<p>From the specs, it looks like []string is not the same underlying type as []Card, so the type conversion cannot occur. </p>\n\n<p>Is it, indeed, the case, or did I miss something?</p>\n\n<p>If it is the case, why is it so? Assuming, in a non-pet-example program, I have as input a slice of string, is there any way to \"cast\" it into a slice of Card, or do I have to create a new structure and copy the data into it? (Which I'd like to avoid since the functions I'll need to call will modify the slice content).</p>\n"}, {"tags": ["intellij-idea", "go", "macros", "intellij-14"], "answers": [{"comments": [{"owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "edited": false, "score": 0, "creation_date": 1426276260, "post_id": 29031099, "comment_id": 46321890, "body": "no, my <code>gin</code>+<code>go fmt</code> program works just fine, the problem is the <code>reformat code</code> for go doesn&#39;t work as expected.."}, {"owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "reply_to_user": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "edited": false, "score": 0, "creation_date": 1430683103, "post_id": 29031099, "comment_id": 48154750, "body": "Then I think you have a different problem, reported here: <a href=\"https://github.com/go-lang-plugin-org/go-lang-idea-plugin/issues/1215\" rel=\"nofollow noreferrer\">github.com/go-lang-plugin-org/go-lang-idea-plugin/issues/121&zwnj;&#8203;5</a>"}], "tags": [], "owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "is_accepted": false, "score": 1, "last_activity_date": 1426246218, "creation_date": 1426246218, "answer_id": 29031099, "question_id": 29029258, "link": "https://stackoverflow.com/questions/29029258/setting-specific-macro-only-run-for-certain-file-extension-on-intellij/29031099#29031099", "title": "Setting specific macro only run for certain file extension on IntelliJ", "body": "<p>Try using the File Watcher plugin instead of macros to solve this issue: <a href=\"https://github.com/go-lang-plugin-org/go-lang-idea-plugin/issues/1324#issuecomment-75263115\" rel=\"nofollow\">https://github.com/go-lang-plugin-org/go-lang-idea-plugin/issues/1324#issuecomment-75263115</a></p>\n"}], "owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1426246218, "creation_date": 1426240471, "last_edit_date": 1426240860, "question_id": 29029258, "link": "https://stackoverflow.com/questions/29029258/setting-specific-macro-only-run-for-certain-file-extension-on-intellij", "title": "Setting specific macro only run for certain file extension on IntelliJ", "body": "<p>I have a <code>macro</code> on IntelliJ that format the code then save:</p>\n\n<p><img src=\"https://i.stack.imgur.com/0iCk0.png\" alt=\"formatted save\"></p>\n\n<p>I have assigned keyboard shortcut <code>Ctrl+S</code> to that macro:</p>\n\n<p><img src=\"https://i.stack.imgur.com/UTS0k.png\" alt=\"assigned shortcut\"></p>\n\n<p>This works well for <code>css</code>, <code>js</code>, and <code>html</code>.</p>\n\n<p>The problem is, the built-in <a href=\"https://github.com/go-lang-plugin-org/go-lang-idea-plugin\" rel=\"nofollow noreferrer\">go-lang-idea-plugin</a> gives different result from <a href=\"https://golang.org/cmd/gofmt/\" rel=\"nofollow noreferrer\"><code>gofmt</code></a> (formatter program that called by my auto-reload/auto-recompile program <a href=\"https://github.com/codegangsta/gin\" rel=\"nofollow noreferrer\"><code>gin</code></a> that runs when the sources changed/saved on disk) \nso the <code>ReformatCode</code> command for <code>.go</code> source code is useless. </p>\n\n<p>How to disable that macro only for <code>.go</code> file? So when I save using <code>Ctrl+S</code>, it only do <code>SaveAll</code>?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 64568, "user_id": 399317, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/28235d26ee007743c9d2150759d29139?s=128&d=identicon&r=PG", "display_name": "Kos", "link": "https://stackoverflow.com/users/399317/kos"}, "edited": false, "score": 4, "creation_date": 1426238587, "post_id": 29028512, "comment_id": 46298755, "body": "It&#39;s not idiomatic in Go. In Python you also use <code>self</code> rather than <code>this</code> or any other name because it&#39;s idiomatic."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426277833, "post_id": 29028512, "comment_id": 46322702, "body": "<code>this</code>, <code>self</code>, <code>me</code>, etc have never been descriptive or good identifiers and have always been a bad idea. If you&#39;re stuck in a language that requires you use one of them you have no choice. Go isn&#39;t such a language so use something descriptive and reasonable."}], "answers": [{"comments": [{"owner": {"reputation": 5024, "user_id": 1419891, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bb825cd3f1905f42c16408393480a65b?s=128&d=identicon&r=PG", "display_name": "425nesp", "link": "https://stackoverflow.com/users/1419891/425nesp"}, "edited": false, "score": 11, "creation_date": 1426299082, "post_id": 29028625, "comment_id": 46329004, "body": "What would be a good, non-generic, name to use in function definitions? In <code>func (p Person) Foo()</code>, <code>p</code> doesn&#39;t really seem any more descriptive than <code>this</code>."}, {"owner": {"reputation": 9874, "user_id": 1636314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656293120862f84aa3319979ca1bdb8c?s=128&d=identicon&r=PG", "display_name": "publysher", "link": "https://stackoverflow.com/users/1636314/publysher"}, "edited": false, "score": 0, "creation_date": 1426317962, "post_id": 29028625, "comment_id": 46331783, "body": "Genericity and descriptivity (?) are not the same. <code>p</code> is a non-generic choice, but <i>in itself</i> it is not very description. Its descriptiveness comes from the combination with its type."}, {"owner": {"reputation": 9113, "user_id": 146003, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/272ed3d9a5c9813ed1fad7ab8f512576?s=128&d=identicon&r=PG", "display_name": "Atmocreations", "link": "https://stackoverflow.com/users/146003/atmocreations"}, "edited": false, "score": 0, "creation_date": 1426487904, "post_id": 29028625, "comment_id": 46376398, "body": "I agree with 425nesp. The name of the variable is used to describe in one word the meaning of the value it holds. If it didn&#39;t, we could be using memory addresses instead. So the type doesn&#39;t really add any descriptiveness."}], "tags": [], "owner": {"reputation": 9874, "user_id": 1636314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656293120862f84aa3319979ca1bdb8c?s=128&d=identicon&r=PG", "display_name": "publysher", "link": "https://stackoverflow.com/users/1636314/publysher"}, "is_accepted": true, "score": 23, "last_activity_date": 1426238468, "creation_date": 1426238468, "answer_id": 29028625, "question_id": 29028512, "link": "https://stackoverflow.com/questions/29028512/go-this-keyword/29028625#29028625", "title": "Go &quot;this&quot;-keyword", "body": "<p>There is no <em>technical</em> reason not to do this.</p>\n\n<p>It does go against the general guidelines as explained <a href=\"https://github.com/golang/go/wiki/CodeReviewComments\">here</a>:</p>\n\n<blockquote>\n  <p>Don't use generic names such as \"me\", \"this\" or \"self\", identifiers typical of object-oriented languages that place more emphasis on methods as opposed to functions. </p>\n</blockquote>\n\n<p>I would also like to add that in languages that use <code>this</code> (or <code>self</code>), <code>this</code> is always a <em>pointer</em>. For method receivers in Go, this is not necessarily the case. </p>\n"}], "owner": {"reputation": 9113, "user_id": 146003, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/272ed3d9a5c9813ed1fad7ab8f512576?s=128&d=identicon&r=PG", "display_name": "Atmocreations", "link": "https://stackoverflow.com/users/146003/atmocreations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7720, "favorite_count": 3, "accepted_answer_id": 29028625, "answer_count": 1, "score": 20, "last_activity_date": 1544403874, "creation_date": 1426238072, "question_id": 29028512, "link": "https://stackoverflow.com/questions/29028512/go-this-keyword", "title": "Go &quot;this&quot;-keyword", "body": "<p>After diving into the docs I couldn't find the answer to my following question:</p>\n\n<p>Is there any reason against using <code>this</code> for referring to the current object as in the following example?</p>\n\n<pre><code>type MyStruct struct {\n  someField string\n}\n\nfunc (this MyStruct) getSomeField() string {\n  return this.someField\n}\n</code></pre>\n"}, {"tags": ["interface", "go", "language-design", "duck-typing", "memory-layout"], "answers": [{"comments": [{"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1426230574, "post_id": 29026469, "comment_id": 46295170, "body": "The last code part nails it: it would break type-safety <i>without</i> touching reflection. +1"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1426232518, "post_id": 29026469, "comment_id": 46295901, "body": "@icza Indeed. So it isn&#39;t <i>only</i> about memory allocation. It is also because at <i>compile</i> time, Go isn&#39;t able to detect that <code>sliceOfInterface[0]</code> (which is an <code>interface{}</code>) <code>= 1</code> is invalid. If only Go had some &quot;generic&quot; way to specify the type of <code>[]interface{}&lt;String&gt;</code> ;)"}, {"owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426268879, "post_id": 29026469, "comment_id": 46318135, "body": "wait, so I get the last part, it&#39;s similar to covariance of arrays right? You break type safety because you can now treat an integer as a string, when it can&#39;t be treated in that way. However, the part about N*sizeof(MyType) - in that case, MyType is STILL 2 words long, there are just two pointers"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426269035, "post_id": 29026469, "comment_id": 46318209, "body": "@praks5432 no, MyType is <i>not</i> 2 words long. Only an <code>interface{}</code> is two words long (as illustrated by the diagram in the answer)."}, {"owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426540813, "post_id": 29026469, "comment_id": 46407140, "body": "@VonC but that diagram represents a general interface no? There are still two pointers. In the interface{} case, one points to data and one points to the underlying type. In other interfaces, one points to a method table, one points to data??"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426541106, "post_id": 29026469, "comment_id": 46407283, "body": "@praks5432 the answer stands: in your case, <code>MyType</code> is <i>not</i> an interface. <code>interface{}</code>, or other interfaces, are two words long. Memory-wise, you still cannot pass from one to the other easily."}, {"owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426541292, "post_id": 29026469, "comment_id": 46407375, "body": "Wait..I don&#39;t get it. They&#39;re both two words long, so N*sizeof(MyType) === N*2. So really, what you&#39;re saying is regardless of the size (which is the same), under the hood, interface{} points to data and an underlying type(is this concrete), and the other case points to an itable instead. So you cannot convert. How does that play with the example you gave with strings and integers?"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426541466, "post_id": 29026469, "comment_id": 46407461, "body": "@praks5432 what &quot;other interfaces&quot; are you referring to?"}, {"owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426542076, "post_id": 29026469, "comment_id": 46407764, "body": "for example, type Reader interface {     Read(p []byte) (n int, err error) }"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1426542440, "post_id": 29026469, "comment_id": 46407939, "body": "Ok. And how <code>N*sizeof(MyType) === N*2</code>? All the answers here point out that the memory size isn&#39;t the same between an array of interface (any interface) and an array of non-interface type (like <code>MyType</code>)."}, {"owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426542610, "post_id": 29026469, "comment_id": 46408028, "body": "Wait. So does T refer to only non-interface type? What is a non-interface type? Can I convert []T to []interface if T is an interface type, as the underlying memory would look the same?"}, {"owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "reply_to_user": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1426542949, "post_id": 29026469, "comment_id": 46408209, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/73112/discussion-between-praks5432-and-vonc\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426543237, "post_id": 29026469, "comment_id": 46408326, "body": "@praks5432 I have to call it a day. I will follow your newest question (I didn&#39;t saw immediately): <a href=\"http://stackoverflow.com/q/29087450/6309\">stackoverflow.com/q/29087450/6309</a>"}, {"owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1426543361, "post_id": 29026469, "comment_id": 46408393, "body": "Thanks for the help Von! Much appreciated."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 4, "last_activity_date": 1426229950, "last_edit_date": 1592644375, "creation_date": 1426229639, "answer_id": 29026469, "question_id": 29026241, "link": "https://stackoverflow.com/questions/29026241/what-about-memory-layout-means-that-t-cannot-be-converted-to-interface-in-go/29026469#29026469", "title": "What about memory layout means that []T cannot be converted to []interface in Go?", "body": "<p>The article &quot;<a href=\"https://github.com/golang/go/wiki/InterfaceSlice\" rel=\"nofollow noreferrer\">InterfaceSlice</a>&quot; try to detail:</p>\n<blockquote>\n<p>A variable with type <code>[]interface{}</code> is not an interface! It is a slice whose element type happens to be <code>interface{}</code>. But even given this, one might say that the meaning is clear.</p>\n<p>Well, is it? A variable with type <code>[]interface{}</code> has a specific memory layout, known at compile time.</p>\n<p>Each <code>interface{}</code> takes up two words (one word for the type of what is contained, the other word for either the contained data or a pointer to it). As a consequence, a slice with length N and with type <code>[]interface{}</code> is backed by a chunk of data that is N*2 words long.</p>\n</blockquote>\n<p>See also &quot;<a href=\"https://stackoverflow.com/a/23148998/6309\">what is the meaning of <code>interface{}</code> in golang?</a>&quot;</p>\n<p><img src=\"https://i.stack.imgur.com/5c0TS.png\" alt=\"2 words\" /></p>\n<blockquote>\n<p>This is different than the chunk of data backing a slice with type <code>[]MyType</code> and the same length. Its chunk of data will be <code>N*sizeof(MyType)</code> words long.</p>\n<p>The result is that you cannot quickly assign something of type <code>[]MyType</code> to something of type <code>[]interface{}</code>; the data behind them just look different.</p>\n</blockquote>\n<p>&quot;<a href=\"https://stackoverflow.com/a/21325694/6309\">why <code>[]string</code> can not be converted to <code>[]interface{}</code> in Go</a>&quot; adds a good illustration:</p>\n<pre><code>// imagine this is possible\nvar sliceOfInterface = []interface{}(sliceOfStrings)\n// since it's array of interface{} now - we can do anything\n// let's put integer into the first position\nsliceOfInterface[0] = 1\n// sliceOfStrings still points to the same array, and now &quot;one&quot; is replaced by 1\nfmt.Println(strings.ToUpper(sliceOfStrings[0])) // BANG!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 1, "last_activity_date": 1426229729, "creation_date": 1426229729, "answer_id": 29026492, "question_id": 29026241, "link": "https://stackoverflow.com/questions/29026241/what-about-memory-layout-means-that-t-cannot-be-converted-to-interface-in-go/29026492#29026492", "title": "What about memory layout means that []T cannot be converted to []interface in Go?", "body": "<p>Read the blog article <a href=\"http://blog.golang.org/laws-of-reflection\" rel=\"nofollow\">The Laws of Reflection</a>, section <a href=\"http://blog.golang.org/laws-of-reflection#TOC_3.\" rel=\"nofollow\">The representation of an interface</a>.</p>\n\n<blockquote>\n  <p>A variable of interface type stores a pair: the concrete value assigned to the variable, and that value's type descriptor. To be more precise, the value is the underlying concrete data item that implements the interface and the type describes the full type of that item. </p>\n</blockquote>\n\n<p>So if you have a value of <code>[]T</code> (a slice of <code>T</code>) where <code>T</code> is not an interface, the elements of such a slice only stores values of type <code>T</code>, but it does not store the type information, it belongs to the slice type.</p>\n\n<p>If you have a value of type <code>[]inteface{}</code>, the elements of such a slice holds the concrete values <em>and</em> the type descriptors of those values.</p>\n\n<p>So elements in a <code>[]interface{}</code> require more info (more memory) than in a non-interface <code>[]T</code>. And if the occupied memory of those 2 slices are not the same, they cannot be just \"looked at\" differently (looked at as a differnet type). Producing one from the other requires additional work.</p>\n"}], "owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 1, "accepted_answer_id": 29026469, "answer_count": 2, "score": 1, "last_activity_date": 1426229950, "creation_date": 1426228583, "last_edit_date": 1495542816, "question_id": 29026241, "link": "https://stackoverflow.com/questions/29026241/what-about-memory-layout-means-that-t-cannot-be-converted-to-interface-in-go", "title": "What about memory layout means that []T cannot be converted to []interface in Go?", "body": "<p>So I've been reading these two articles and this answer </p>\n\n<p><a href=\"https://stackoverflow.com/questions/12990338/cannot-convert-string-to-interface\">Cannot convert []string to []interface {}</a> says that the memory layout needs to be changed. </p>\n\n<p><a href=\"http://jordanorelli.com/post/32665860244/how-to-use-interfaces-in-go\" rel=\"nofollow noreferrer\">http://jordanorelli.com/post/32665860244/how-to-use-interfaces-in-go</a> says that understanding the underlying memory makes answering this question easy, and</p>\n\n<p><a href=\"http://research.swtch.com/interfaces\" rel=\"nofollow noreferrer\">http://research.swtch.com/interfaces</a>, explains what is going on under the hood. </p>\n\n<p>But for the life of me I can't think of a reason, in terms of the implementation of interfaces as to why []T cannot be cast to []interface. </p>\n\n<p>So Why? </p>\n"}, {"tags": ["sorting", "go"], "answers": [{"comments": [{"owner": {"reputation": 10925, "user_id": 723947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b898a5dde625380e861e3719e50a4c?s=128&d=identicon&r=PG", "display_name": "dyoo", "link": "https://stackoverflow.com/users/723947/dyoo"}, "edited": false, "score": 1, "creation_date": 1426269022, "post_id": 29025814, "comment_id": 46318204, "body": "Another way to see why it&#39;s broken: consider the two statements <code>Stmt{&quot;first&quot;, []string{}}</code> and <code>Stmt{&quot;second&quot;, []string{}}</code>.  A proper comparator should say that either <code>first</code> is less than <code>second</code>, or vice-versa, but, crucially, not <i>both</i>, not unless you want the system to treat them indistinguishably.  The comparator you&#39;ve defined will say otherwise, so the <code>sort</code> can&#39;t give the results you want."}], "tags": [], "owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "is_accepted": false, "score": 7, "last_activity_date": 1426400550, "last_edit_date": 1426400550, "creation_date": 1426226516, "answer_id": 29025814, "question_id": 29025460, "link": "https://stackoverflow.com/questions/29025460/golang-sort-sort-random-output-and-is-wrong/29025814#29025814", "title": "golang sort.Sort random output and is wrong", "body": "<p>Your \"Less\" function is not transitive. That is, if A &lt; B and B &lt; C, then it must also hold that A &lt; C.</p>\n\n<p>You can't specify a partial order with a regular sort function and get sorted output. Instead, you need to implement a <a href=\"http://en.wikipedia.org/wiki/Topological_sorting\" rel=\"nofollow noreferrer\">topological sort</a>.</p>\n\n<p>Here's a simple implementation on your data (except that I removed the duplicate \"passwords\" entry).</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype Stmt struct {\n    Name  string\n    After []string\n}\n\nfunc topSort(ss []Stmt) []string {\n    after := map[string][]string{} // things that must come after\n    counts := map[string]int{}     // number unsatified preconditions\n    zc := map[string]struct{}{}    // things with zero count\n    for _, s := range ss {\n        for _, a := range s.After {\n            after[a] = append(after[a], s.Name)\n        }\n        counts[s.Name] = len(s.After)\n        if len(s.After) == 0 {\n            zc[s.Name] = struct{}{}\n        }\n    }\n\n    r := []string{}\n    for len(zc) &gt; 0 {\n        for n := range zc {\n            r = append(r, n)\n            for _, a := range after[n] {\n                counts[a]--\n                if counts[a] == 0 {\n                    zc[a] = struct{}{}\n                }\n            }\n            delete(zc, n)\n        }\n    }\n    return r\n}\n\nfunc main() {\n    stmts := []Stmt{\n        {Name: \"app\", After: []string{\"app_user\"}},\n        {Name: \"billingplan\", After: []string{}},\n        {Name: \"campaign\", After: []string{\"app_user\"}},\n        {Name: \"campaign_app\", After: []string{\"campaign\", \"app\"}},\n        {Name: \"campaign_ip\", After: []string{\"campaign\", \"ip\"}},\n        {Name: \"campaign_operator\", After: []string{\"campaign\", \"operator\"}},\n        {Name: \"campaign_sponsor\", After: []string{\"campaign\", \"sponsor\"}},\n        {Name: \"campaign_subscriberfilter\", After: []string{\"campaign\", \"subscriber_filters\"}},\n        {Name: \"campaign_url\", After: []string{\"campaign\", \"url\"}},\n        {Name: \"contentpartner\", After: []string{\"app_user\"}},\n        {Name: \"filter_criteria\", After: []string{\"campaign\", \"subscriber_filters\"}},\n        {Name: \"ip\", After: []string{\"app_user\"}},\n        {Name: \"mobile_registered\", After: []string{\"campaign\", \"app\"}},\n        {Name: \"operator\", After: []string{}},\n        {Name: \"passwords\", After: []string{\"app_user\"}},\n        {Name: \"publish_package\", After: []string{}},\n        {Name: \"role\", After: []string{}},\n        {Name: \"sponsor\", After: []string{\"app_user\"}},\n        {Name: \"subscriber_dbs\", After: []string{}},\n        {Name: \"subscriber_filters\", After: []string{\"subscriber_dbs\"}},\n        {Name: \"timezone\", After: []string{}},\n        {Name: \"url\", After: []string{\"app_user\"}},\n        {Name: \"app_user\", After: []string{}},\n        {Name: \"user_role\", After: []string{\"app_user\", \"role\"}},\n    }\n    r := topSort(stmts)\n    for _, s := range r {\n        fmt.Println(s)\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 715, "user_id": 1502538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qV1HB.png?s=128&g=1", "display_name": "kortschak", "link": "https://stackoverflow.com/users/1502538/kortschak"}, "edited": false, "score": 0, "creation_date": 1426394178, "post_id": 29046581, "comment_id": 46351532, "body": "I have posted my code, with some explanatory notes."}], "tags": [], "owner": {"reputation": 1364, "user_id": 791842, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e22db9b1ffd20305669ffe5676baca02?s=128&d=identicon&r=PG", "display_name": "sathishvj", "link": "https://stackoverflow.com/users/791842/sathishvj"}, "is_accepted": false, "score": 0, "last_activity_date": 1426318224, "creation_date": 1426318224, "answer_id": 29046581, "question_id": 29025460, "link": "https://stackoverflow.com/questions/29025460/golang-sort-sort-random-output-and-is-wrong/29046581#29046581", "title": "golang sort.Sort random output and is wrong", "body": "<p><em>This question was answered here: <a href=\"https://groups.google.com/forum/#!topic/golang-nuts/C_7JY1f3cSc\" rel=\"nofollow\">https://groups.google.com/forum/#!topic/golang-nuts/C_7JY1f3cSc</a>.  It was a more detailed and specific answer that I was able to immediately use.  Requested the person to update it here but he/she hasn't ... so putting it myself.</em></p>\n\n<hr>\n\n<p>Since I had a tarjan lying around. Here is the topological sort for that \ndata: </p>\n\n<p><a href=\"http://play.golang.org/p/SHagFMvuhl\" rel=\"nofollow\">http://play.golang.org/p/SHagFMvuhl</a> </p>\n\n<p>On Thu, 2015-03-12 at 22:47 -0700, Sathish VJ wrote: </p>\n\n<blockquote>\n  <p>In my case, I did check and there is that transitive nature in the \n  dependencies.   </p>\n  \n  <p>One specific thing I'm noting when I print out the debug statements is \n  that some comparisons are never happening.  For example, user_role is \n  never getting compared to role as of now.  Though at one point when \n  there were lesser elements, it was. </p>\n</blockquote>\n\n<p>sort.Sort will not make all comparisons. That would result in O(n^2) \ntime. </p>\n"}, {"comments": [{"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 0, "creation_date": 1426400759, "post_id": 29057228, "comment_id": 46352515, "body": "Directly implementing topological sort is a bit easier I think."}, {"owner": {"reputation": 715, "user_id": 1502538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qV1HB.png?s=128&g=1", "display_name": "kortschak", "link": "https://stackoverflow.com/users/1502538/kortschak"}, "reply_to_user": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 0, "creation_date": 1426461920, "post_id": 29057228, "comment_id": 46370388, "body": "There is the benefit in the OP&#39;s use case that specific directed cycles are identified, rather than just the presence of a cycle in the total graph. This means that if the client accidentally defines a cycle in the data, a specific error can be returned to narrow down the source of the error. I think this is probably a win."}], "tags": [], "owner": {"reputation": 715, "user_id": 1502538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qV1HB.png?s=128&g=1", "display_name": "kortschak", "link": "https://stackoverflow.com/users/1502538/kortschak"}, "is_accepted": true, "score": 1, "last_activity_date": 1426463500, "last_edit_date": 1426463500, "creation_date": 1426393508, "answer_id": 29057228, "question_id": 29025460, "link": "https://stackoverflow.com/questions/29025460/golang-sort-sort-random-output-and-is-wrong/29057228#29057228", "title": "golang sort.Sort random output and is wrong", "body": "<p>As mentioned by Anonymous, you need a topological sort for this. <a href=\"http://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm\" rel=\"nofollow\">Tarjan's strongly connected components algorithm</a> has the property that SCCs are returned in reverse topological sort order. This means it can be used as a topological sort algorithm.</p>\n\n<p>Here is an implementation of Tarjan's algorithm (runnable <a href=\"http://play.golang.org/p/j0A7zXATZE\" rel=\"nofollow\">here</a> and originally <a href=\"https://groups.google.com/d/msg/golang-nuts/C_7JY1f3cSc/pMVTWPi-ksoJ\" rel=\"nofollow\">posted</a> by me to the golang-nuts list) based on the pseudocode at wikipedia (more generally implemented <a href=\"https://godoc.org/github.com/gonum/graph/search#Tarjan\" rel=\"nofollow\">here</a> but using essentially the same underlying code):</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n)\n\ntype Stmt struct {\n    Name  string\n    After []string\n}\n\nfunc main() {\n    stmts := []Stmt{\n        {Name: \"app\", After: []string{\"app_user\"}},\n        {Name: \"billingplan\", After: []string{}},\n        {Name: \"campaign\", After: []string{\"app_user\"}},\n        {Name: \"campaign_app\", After: []string{\"campaign\", \"app\"}},\n        {Name: \"campaign_ip\", After: []string{\"campaign\", \"ip\"}},\n        {Name: \"campaign_operator\", After: []string{\"campaign\", \"operator\"}},\n        {Name: \"campaign_sponsor\", After: []string{\"campaign\", \"sponsor\"}},\n        {Name: \"campaign_subscriberfilter\", After: []string{\"campaign\", \"subscriber_filters\"}},\n        {Name: \"campaign_url\", After: []string{\"campaign\", \"url\"}},\n        {Name: \"contentpartner\", After: []string{\"app_user\"}},\n        {Name: \"filter_criteria\", After: []string{\"campaign\", \"subscriber_filters\"}},\n        {Name: \"ip\", After: []string{\"app_user\"}},\n        {Name: \"mobile_registered\", After: []string{\"campaign\", \"app\"}},\n        {Name: \"operator\", After: []string{}},\n        {Name: \"passwords\", After: []string{\"app_user\"}},\n        {Name: \"publish_package\", After: []string{}},\n        {Name: \"role\", After: []string{}},\n        {Name: \"passwords\", After: []string{\"app_user\"}},\n        {Name: \"sponsor\", After: []string{\"app_user\"}},\n        {Name: \"subscriber_dbs\", After: []string{}},\n        {Name: \"subscriber_filters\", After: []string{\"subscriber_dbs\"}},\n        {Name: \"timezone\", After: []string{}},\n        {Name: \"url\", After: []string{\"app_user\"}},\n        {Name: \"app_user\", After: []string{}},\n        {Name: \"user_role\", After: []string{\"app_user\", \"role\"}},\n    }\n\n    g := make(graph)\n    for _, s := range stmts {\n        g[s.Name] = after(s.After)\n    }\n\n    sorted, err := topoSort(g)\n    if err != nil {\n        log.Fatalf(\"could not sort: %v\", err)\n    }\n    for _, s := range sorted {\n        fmt.Println(s)\n    }\n}\n\nfunc topoSort(g graph) ([]string, error) {\n    sccs := tarjanSCC(g)\n    sorted := make([]string, len(sccs))\n    for i, s := range sccs {\n        if len(s) != 1 {\n            return nil, fmt.Errorf(\"found directed cycle: %q\", s)\n        }\n        sorted[i] = s[0]\n    }\n    return sorted, nil\n}\n\n// graph is an edge list representation of a directed graph.\ntype graph map[string]set\n\n// set is an string set.\ntype set map[string]struct{}\n\nfunc after(i []string) set {\n    if len(i) == 0 {\n        return nil\n    }\n    s := make(set)\n    for _, v := range i {\n        s[v] = struct{}{}\n    }\n    return s\n}\n\n// tarjanSCC returns a the strongly connected components of the\n// directed graph g.\nfunc tarjanSCC(g graph) [][]string {\n    t := tarjan{\n        g: g,\n\n        indexTable: make(map[string]int, len(g)),\n        lowLink:    make(map[string]int, len(g)),\n        onStack:    make(map[string]bool, len(g)),\n    }\n    for v := range t.g {\n        if t.indexTable[v] == 0 {\n            t.strongconnect(v)\n        }\n    }\n    return t.sccs\n}\n\n// tarjan implements Tarjan's strongly connected component finding\n// algorithm. The implementation is from the pseudocode at\n//\n// http://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm\n//\ntype tarjan struct {\n    g graph\n\n    index      int\n    indexTable map[string]int\n    lowLink    map[string]int\n    onStack    map[string]bool\n\n    stack []string\n\n    sccs [][]string\n}\n\n// strongconnect is the strongconnect function described in the\n// wikipedia article.\nfunc (t *tarjan) strongconnect(v string) {\n    // Set the depth index for v to the smallest unused index.\n    t.index++\n    t.indexTable[v] = t.index\n    t.lowLink[v] = t.index\n    t.stack = append(t.stack, v)\n    t.onStack[v] = true\n\n    // Consider successors of v.\n    for w := range t.g[v] {\n        if t.indexTable[w] == 0 {\n            // Successor w has not yet been visited; recur on it.\n            t.strongconnect(w)\n            t.lowLink[v] = min(t.lowLink[v], t.lowLink[w])\n        } else if t.onStack[w] {\n            // Successor w is in stack s and hence in the current SCC.\n            t.lowLink[v] = min(t.lowLink[v], t.indexTable[w])\n        }\n    }\n\n    // If v is a root node, pop the stack and generate an SCC.\n    if t.lowLink[v] == t.indexTable[v] {\n        // Start a new strongly connected component.\n        var (\n            scc []string\n            w   string\n        )\n        for {\n            w, t.stack = t.stack[len(t.stack)-1], t.stack[:len(t.stack)-1]\n            t.onStack[w] = false\n            // Add w to current strongly connected component.\n            scc = append(scc, w)\n            if w == v {\n                break\n            }\n        }\n        // Output the current strongly connected component.\n        t.sccs = append(t.sccs, scc)\n    }\n}\n\nfunc min(a, b int) int {\n    if a &lt; b {\n        return a\n    }\n    return b\n}\n</code></pre>\n\n<p>Note that running this code repeatedly will not result in the same strict ordering of output since a number of the paths are not definitively orderable relative to each other (this won't show up in the playground since the results are cached - you can see this though by wrapping the call to tarjanSCC).</p>\n\n<p>Although it may be easier to directly implement a topological sort, by using Tarjan's SCC algorithm, we are able to find the cause of a sort failure, for example <a href=\"http://play.golang.org/p/Cd3aX2sbTe\" rel=\"nofollow\">here</a> (cf with the same data <a href=\"http://play.golang.org/p/BkrBlxTUyn\" rel=\"nofollow\">here</a>).</p>\n"}], "owner": {"reputation": 1364, "user_id": 791842, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e22db9b1ffd20305669ffe5676baca02?s=128&d=identicon&r=PG", "display_name": "sathishvj", "link": "https://stackoverflow.com/users/791842/sathishvj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 0, "accepted_answer_id": 29057228, "answer_count": 3, "score": 0, "last_activity_date": 1426463500, "creation_date": 1426224481, "question_id": 29025460, "link": "https://stackoverflow.com/questions/29025460/golang-sort-sort-random-output-and-is-wrong", "title": "golang sort.Sort random output and is wrong", "body": "<p>I have a custom Sort function applied to a struct.  The full code is <a href=\"http://play.golang.org/p/khEKlzX2-s\" rel=\"nofollow\">here on play.golang.org</a>.</p>\n\n<pre><code>type Stmt struct {\n    Name  string\n    After []string\n}\n\nfunc sortStmts(stmts []Stmt) []Stmt {\n    sort.Sort(ByAfter(stmts))\n    return stmts\n}\n\ntype ByAfter []Stmt\n\nfunc (a ByAfter) Len() int      { return len(a) }\nfunc (a ByAfter) Swap(i, j int) { a[i], a[j] = a[j], a[i] }\nfunc (a ByAfter) Less(i, j int) bool {\n    isLess := true\n\n    //fmt.Printf(\"%s.%+v is being compared with %s.%+v\\n\", a[i].Name, a[i].After, a[j].Name, a[j].After)\n\n    for _, v := range a[i].After {\n        if a[j].Name == v {\n            isLess = false\n            break\n        }\n    }\n\n    if isLess {\n        //fmt.Printf(\"%s.%+v is Before %s.%+v\\n\", a[i].Name, a[i].After, a[j].Name, a[j].After)\n    } else {\n        //fmt.Printf(\"%s.%+v is After %s.%+v\\n\", a[i].Name, a[i].After, a[j].Name, a[j].After)\n    }\n\n    return isLess\n}\n</code></pre>\n\n<p>My purpose is to automatically create a set of sql create statements ordered properly so that dependent tables come first.</p>\n\n<p>So if <code>Stmt{Name: \"user_role\", After: []string{\"user\", \"role\"} }</code> is present, then in the ordered list <code>user_role</code> should be after both <code>user</code> and <code>role</code>.  </p>\n\n<p>This seemed to work fine for a bit until we started adding more values.  Only then did I go in and check and realize that I might have just got accidentally lucky the first time, but there really isn't any consistency.</p>\n\n<p>Is there something I'm doing wrong in the sort function that the results are random.  I'm particularly interested in seeing why the \"role\" item is not coming before the \"user_role\" item even though I've designated it user_role as coming after role.</p>\n"}, {"tags": ["go", "stripe-payments"], "answers": [{"tags": [], "owner": {"reputation": 26843, "user_id": 208997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/250e219125d8bff1f03e6faea950f218?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/208997/simon"}, "is_accepted": false, "score": 1, "last_activity_date": 1426224818, "creation_date": 1426224818, "answer_id": 29025531, "question_id": 29024198, "link": "https://stackoverflow.com/questions/29024198/attach-shipping-information-to-stripe-charge-using-go/29025531#29025531", "title": "Attach shipping information to Stripe Charge using Go", "body": "<p>I know nothing about Stripe's API but if you follow the fields of the struct, you find <code>Charge</code> \u279c <code>Source</code> \u279c <code>Card</code> \u279c <code>Address1, Address2, City, State, Zip, Country</code>. Is that what you are after?</p>\n"}, {"tags": [], "owner": {"reputation": 7146, "user_id": 714282, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mn1fb.jpg?s=128&g=1", "display_name": "Ansel Santosa", "link": "https://stackoverflow.com/users/714282/ansel-santosa"}, "is_accepted": true, "score": 1, "last_activity_date": 1426368372, "creation_date": 1426368372, "answer_id": 29054404, "question_id": 29024198, "link": "https://stackoverflow.com/questions/29024198/attach-shipping-information-to-stripe-charge-using-go/29054404#29054404", "title": "Attach shipping information to Stripe Charge using Go", "body": "<p>Answer from Stripe support.</p>\n\n<blockquote>\n  <p>Thanks for writing in about this, I'm happy to help! Unfortunately our\n  go bindings don't support that parameter at the moment which is why\n  you couldn't find it in the source. The temporary solution would be to\n  create the POST request yourself when you need to send the shipping\n  details along with the charge.</p>\n  \n  <p>I've forwarded this internally to make sure it gets addressed in the\n  future but unfortunately I don't have any timeline to share with you\n  at the moment. We are definitely open to a Pull Request from one of\n  our users so if that's something you'd feel comfortable building\n  yourself that would be awesome!</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 38571, "user_id": 1418457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16bebb36e0e28572a316ba0450e190d1?s=128&d=identicon&r=PG", "display_name": "onmyway133", "link": "https://stackoverflow.com/users/1418457/onmyway133"}, "is_accepted": false, "score": 0, "last_activity_date": 1556793076, "creation_date": 1556793076, "answer_id": 55950495, "question_id": 29024198, "link": "https://stackoverflow.com/questions/29024198/attach-shipping-information-to-stripe-charge-using-go/55950495#55950495", "title": "Attach shipping information to Stripe Charge using Go", "body": "<p>Here's how to use <code>ChargeParams</code> to include shipping infomation <a href=\"https://github.com/stripe/stripe-go/blob/master/charge/client_test.go\" rel=\"nofollow noreferrer\">https://github.com/stripe/stripe-go/blob/master/charge/client_test.go</a></p>\n\n<pre><code>charge, err := New(&amp;stripe.ChargeParams{\n    Amount:   stripe.Int64(11700),\n    Currency: stripe.String(string(stripe.CurrencyUSD)),\n    Source:   &amp;stripe.SourceParams{Token: stripe.String(\"src_123\")},\n    Shipping: &amp;stripe.ShippingDetailsParams{\n        Address: &amp;stripe.AddressParams{\n            Line1: stripe.String(\"line1\"),\n            City:  stripe.String(\"city\"),\n        },\n        Carrier: stripe.String(\"carrier\"),\n        Name:    stripe.String(\"name\"),\n    }\n})\n</code></pre>\n"}], "owner": {"reputation": 7146, "user_id": 714282, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mn1fb.jpg?s=128&g=1", "display_name": "Ansel Santosa", "link": "https://stackoverflow.com/users/714282/ansel-santosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 29054404, "answer_count": 3, "score": 2, "last_activity_date": 1556793076, "creation_date": 1426215715, "question_id": 29024198, "link": "https://stackoverflow.com/questions/29024198/attach-shipping-information-to-stripe-charge-using-go", "title": "Attach shipping information to Stripe Charge using Go", "body": "<p>I'm trying to create a new charge via the Go API. I have a shipping address and a payment token. But <a href=\"https://github.com/stripe/stripe-go/blob/920787c2ce10072919778f060e344fdcebe8a3f3/charge.go#L15-L25\" rel=\"nofollow\">the Go API doesn't seem to support sending the shipping address</a>. <a href=\"https://stripe.com/docs/api/go#create_charge\" rel=\"nofollow\">The documentation</a> indicates that it should support it but there isn't a direct mapping between the arguments described in the docs and the Go <code>ChargeParams</code> arguments and some are missing.</p>\n\n<pre><code>type ChargeParams struct {\n    Params\n    Amount                 uint64\n    Currency               Currency\n    Customer, Token        string\n    Desc, Statement, Email string\n    NoCapture              bool\n    Fee                    uint64\n    Fraud                  FraudReport\n    Source                 *SourceParams\n}\n</code></pre>\n\n<p>Is there some other way that I'm supposed to add the address that I'm missing?</p>\n"}, {"tags": ["mysql", "go"], "answers": [{"comments": [{"owner": {"reputation": 7430, "user_id": 2105930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e884c31250cf768e8b8261e31cd0821?s=128&d=identicon&r=PG", "display_name": "chowey", "link": "https://stackoverflow.com/users/2105930/chowey"}, "edited": false, "score": 0, "creation_date": 1426299678, "post_id": 29030287, "comment_id": 46329098, "body": "Great answer, very thorough. Thank you."}, {"owner": {"reputation": 7623, "user_id": 1505860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/168ccec72eee0530b818d44f3fedaacf?s=128&d=identicon&r=PG", "display_name": "Shlomi Noach", "link": "https://stackoverflow.com/users/1505860/shlomi-noach"}, "edited": false, "score": 1, "creation_date": 1428485843, "post_id": 29030287, "comment_id": 47177912, "body": "Noting down that while &quot;buffering is never a problem...whatever the query&quot;, locking is a problem, depending on the query. With unbuffered results locks will be in place for the duration of (application) processing, whereas with buffered results locks will be in place for the duration of network transmission; these could have a big difference."}], "tags": [], "owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "is_accepted": false, "score": 6, "last_activity_date": 1426243652, "creation_date": 1426243652, "answer_id": 29030287, "question_id": 29023902, "link": "https://stackoverflow.com/questions/29023902/unbuffered-result-set-in-mysql-golang-driver/29030287#29030287", "title": "Unbuffered result set in MySQL golang driver", "body": "<p>This concept of buffered/unbuffered queries in database client libraries is a bit misleading, because actually, buffering may occur on multiple levels. In general (i.e. not Go specific, and not MySQL specific), you have different kinds of buffers.</p>\n\n<ul>\n<li><p><strong>TCP socket buffers.</strong> The kernel associates a communication buffer to each socket. By default, the size of this buffer is dynamic and controlled by kernel parameters. Some clients can change those defaults to get more control and optimize. Purpose if this buffer is to regulate the traffic in the device queues and eventually, decrease the number of packets on the network.</p></li>\n<li><p><strong>Communication buffers.</strong> Database oriented protocols are generally based on a framing protocol, meaning that frames are defined to separate the logical packets in the TCP stream. Socket buffers do not guarantee that a complete logical packet (a frame) is available for reading. Extra communication buffers are therefore required to make sure the frames are complete when they are processed. They can also help to reduce the number of system calls. These buffers are managed by the low-level communication mechanism of the database client library.</p></li>\n<li><p><strong>Rows buffers.</strong> Some database clients choose to keep all the rows read from the server in memory, and let the application code browse the corresponding data structures. For instance, the PostgreSQL C client (libpq) does it. The MySQL C client leaves the choice to the developer (by calling mysql_use_result or mysql_store_result).</p></li>\n</ul>\n\n<p>Anyway, the Go driver you mention is not based on the MySQL C client (it is a pure Go driver). It uses only the two first kinds of buffers (sockets, and communication buffers). Row level buffering is not provided.</p>\n\n<p>There is one communication buffer per MySQL connection. Its size is a multiple of 4 KB. It will grow dynamically if the frames are large. In the MySQL protocol, each row is sent as a separate packet (in a frame), so the size of the communication buffer is directly linked to the largest rows received/sent by the client.</p>\n\n<p>The consequence is you can run a query returning a huge number of rows without saturating the memory, and still having good socket performance. With this driver, buffering is never a problem for the developer, whatever the query.</p>\n"}], "owner": {"reputation": 7430, "user_id": 2105930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e884c31250cf768e8b8261e31cd0821?s=128&d=identicon&r=PG", "display_name": "chowey", "link": "https://stackoverflow.com/users/2105930/chowey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1349, "favorite_count": 3, "answer_count": 1, "score": 5, "last_activity_date": 1426243652, "creation_date": 1426213637, "question_id": 29023902, "link": "https://stackoverflow.com/questions/29023902/unbuffered-result-set-in-mysql-golang-driver", "title": "Unbuffered result set in MySQL golang driver", "body": "<p>I have a large query and I want to process the result row-by-row using the <a href=\"https://github.com/go-sql-driver/mysql\" rel=\"noreferrer\">Go MySQL driver</a>. The query is very simple but it returns a huge number of rows.</p>\n\n<p>I have seen <code>mysql_use_result()</code> vs <code>mysqli_store_result()</code> at the C-API level. Is there an equivalent way to do an unbuffered query over a TCP connection, such as is used by the Go MySQL driver?</p>\n"}, {"tags": ["go", "exec"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 2, "creation_date": 1426210293, "post_id": 29022974, "comment_id": 46289541, "body": "That&#39;s a very shell specific thing you can&#39;t just exec <code>diff</code> and expect shell parsing of the arguments. You could exec <code>bash</code> (since <code>&lt;(command)</code> is a bash-ism) with a &quot;-c&quot; argument, or you could build Go <code>exec.Cmd</code>&#39;s for foo, bar, and diff and connect them up with pipes."}], "answers": [{"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 3, "last_activity_date": 1426210472, "creation_date": 1426210472, "answer_id": 29023409, "question_id": 29022974, "link": "https://stackoverflow.com/questions/29022974/go-exec-with-argument/29023409#29023409", "title": "go exec with &lt;(..) argument", "body": "<p>The <code>&lt;(echo foo)</code> syntax is interpreted by the shell, <code>sh</code> or <code>bash</code>. The function <code>exec.Command</code> does not invoke the shell on the arguments you provide, it directly executes a process. If you want to invoke the shell, then invoke the shell:</p>\n\n<pre><code>exec.Command(\"bash\", \"-c\", \"diff &lt;(echo foo) &lt;/echo bar)\")\n</code></pre>\n\n<p>In this example I use <code>bash</code> as on many systems, <code>sh</code> does not implement the <code>&lt;(cmd)</code> syntax. Try to use <code>sh</code> whenever possible to increase the portability of your applications.</p>\n"}, {"comments": [{"owner": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "edited": false, "score": 0, "creation_date": 1426218127, "post_id": 29023943, "comment_id": 46291617, "body": "One change that&#39;d make this a better answer would be to not hard code the the descriptor numbers in the diff command line.  Instead, call the Fd() method on the pipes and build the paths appropriately."}, {"owner": {"reputation": 43554, "user_id": 727643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIm6q.jpg?s=128&g=1", "display_name": "Stephen Weinberg", "link": "https://stackoverflow.com/users/727643/stephen-weinberg"}, "reply_to_user": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "edited": false, "score": 0, "creation_date": 1426244990, "post_id": 29023943, "comment_id": 46302424, "body": "When using Cmd.ExtraFiles, the FDs seen by the child are 3+i where i is the index of the file in the ExtraFiles slice. Hardcoding is the only way. <a href=\"http://golang.org/pkg/os/exec/#Cmd\" rel=\"nofollow noreferrer\">golang.org/pkg/os/exec/#Cmd</a>"}], "tags": [], "owner": {"reputation": 43554, "user_id": 727643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIm6q.jpg?s=128&g=1", "display_name": "Stephen Weinberg", "link": "https://stackoverflow.com/users/727643/stephen-weinberg"}, "is_accepted": true, "score": 4, "last_activity_date": 1426215094, "last_edit_date": 1426215094, "creation_date": 1426213988, "answer_id": 29023943, "question_id": 29022974, "link": "https://stackoverflow.com/questions/29022974/go-exec-with-argument/29023943#29023943", "title": "go exec with &lt;(..) argument", "body": "<p>FUZxxl's answer is simple, but it requires the use of bash. Bash is not really cross platform and as an interpreter is open to code injection. I will first describe a way to replicate this with Go, then describe the answer git uses.</p>\n\n<p>The &lt;(echo foo) does two things in bash. First, it creates a file descriptor to be passed to the command being called. The second thing it does is pass /dev/fd/n as an argument. For confirmation, try:</p>\n\n<pre><code>echo &lt;(echo foo) &lt;(echo bar)\n</code></pre>\n\n<p>Echo ignores the fds and just prints the file descriptor as a string.</p>\n\n<p>The following Go code will do something similar:</p>\n\n<pre><code>package main\n\nimport (\n    \"io\"\n    \"log\"\n    \"os\"\n    \"os/exec\"\n    \"strings\"\n)\n\nfunc main() {\n    cmd := exec.Command(\"diff\", \"/dev/fd/3\", \"/dev/fd/4\")\n\n    foo, err := readerFile(strings.NewReader(\"foo\\n\"))\n    if err != nil {\n        log.Fatal(err)\n    }\n    defer foo.Close()\n\n    bar, err := readerFile(strings.NewReader(\"bar\\n\"))\n    if err != nil {\n        log.Fatal(err)\n    }\n    defer bar.Close()\n\n    cmd.ExtraFiles = []*os.File{foo, bar}\n\n    cmd.Stdout = os.Stdout\n    cmd.Stderr = os.Stderr\n    err = cmd.Run()\n    if err != nil {\n        log.Fatal(err)\n    }\n}\n\nfunc readerFile(r io.Reader) (*os.File, error) {\n    reader, writer, err := os.Pipe()\n\n    if err != nil {\n        return nil, err\n    }\n\n    go func() {\n        io.Copy(writer, r)\n        writer.Close()\n    }()\n\n    return reader, nil\n}\n</code></pre>\n\n<p>Obviously, this will only work on Unix like systems and is therefore not very cross platform. It is immune to code injection though.</p>\n\n<hr>\n\n<h1>GIT's way</h1>\n\n<p>Git just makes temporary files and then compares them. This is extremely cross platform and immune to injections. Just use <a href=\"http://golang.org/pkg/io/ioutil/#TempFile\" rel=\"nofollow\">ioutil.TempFile</a> to create both the files and then run <code>exec.Command(\"diff\", file1, file2)</code>.</p>\n"}], "owner": {"reputation": 2847, "user_id": 196374, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a79d2677a47da29e3c2cb5d9a78944a1?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/196374/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 1, "accepted_answer_id": 29023943, "answer_count": 2, "score": 2, "last_activity_date": 1426215094, "creation_date": 1426207616, "question_id": 29022974, "link": "https://stackoverflow.com/questions/29022974/go-exec-with-argument", "title": "go exec with &lt;(..) argument", "body": "<p>I'm trying to get the equivalent using exec</p>\n\n<pre><code>diff &lt;(echo \"foo\") &lt;(echo \"bar\")\n</code></pre>\n\n<p>which produces:</p>\n\n<pre><code>1c1\n&lt; foo\n---\n&gt; bar\n</code></pre>\n\n<p>But when I try:</p>\n\n<pre><code>cmd := exec.Command(\"diff\", \"&lt;(echo foo)\", \"&lt;(echo bar)\")\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>exit status 2\ndiff: &lt;(echo foo): No such file or directory\ndiff: &lt;(echo bar): No such file or directory\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 26843, "user_id": 208997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/250e219125d8bff1f03e6faea950f218?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/208997/simon"}, "edited": false, "score": 13, "creation_date": 1426195723, "post_id": 29020523, "comment_id": 46284640, "body": "It&#39;s called <b>dereferencing</b> a pointer."}], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 5721436, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/tDzYV.jpg?s=128&g=1", "display_name": "McStuffins", "link": "https://stackoverflow.com/users/5721436/mcstuffins"}, "edited": false, "score": 1, "creation_date": 1554514053, "post_id": 29020534, "comment_id": 97793008, "body": "was confused which led me here :P"}], "tags": [], "owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "is_accepted": true, "score": 51, "last_activity_date": 1426195669, "creation_date": 1426195669, "answer_id": 29020534, "question_id": 29020523, "link": "https://stackoverflow.com/questions/29020523/how-to-cast-a-pointer-back-to-a-value-in-golang/29020534#29020534", "title": "How to &quot;cast&quot; a pointer back to a value in Golang?", "body": "<pre><code>var t *time.Time = &amp;time.Now()\nvar t2 time.Time = *t\n</code></pre>\n\n<p>Just like in C, <code>&amp;</code> means \"address of\" and assigns a pointer which is marked as <code>*T</code>. But <code>*</code> also means \"value of\", or dereferencing the pointer, and assigns the value.</p>\n\n<p>This is a bit off-topic, but IMO this dual use of <code>*</code> is partly what gets newbies in C and friends confused about pointers.</p>\n"}], "owner": {"reputation": 1751, "user_id": 3973406, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b2d94768947ebd5fd0f38ee5b3f472c5?s=128&d=identicon&r=PG&f=1", "display_name": "Dac0d3r", "link": "https://stackoverflow.com/users/3973406/dac0d3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16390, "favorite_count": 5, "accepted_answer_id": 29020534, "answer_count": 1, "score": 25, "last_activity_date": 1426195669, "creation_date": 1426195619, "question_id": 29020523, "link": "https://stackoverflow.com/questions/29020523/how-to-cast-a-pointer-back-to-a-value-in-golang", "title": "How to &quot;cast&quot; a pointer back to a value in Golang?", "body": "<p>I'm using time.Time as a pointer in one of my structs. Eg</p>\n\n<pre><code>type struct Example{\n    CreatedDate *time.Time\n}\n</code></pre>\n\n<p>I'm using the pointer, so I can pass nil to the struct, if no date exists.</p>\n\n<p>This does however pose a problem now, since I need to use the time.Since(then) function which does not accept the pointer as the parameter, but takes a time.Time instead.</p>\n\n<p>So...</p>\n\n<p>It's quite easy to put \"&amp;\" in front of a struct eg. &amp;time.Time, but if you have a pointer, how can you reverse it, back into eg. a type of time.Time?</p>\n\n<p>Eg. (does not work, but might give you an idea of what I mean)</p>\n\n<pre><code>var t *time.Time = &amp;time.Now()\nvar t2 time.Time = t.(time.Time)\n</code></pre>\n\n<p>I hope you can help. The question feels quite silly, since I can't find anything about it when googling. I get the feeling I'm just missing something here ;-)</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "edited": false, "score": 1, "creation_date": 1426194041, "post_id": 29019923, "comment_id": 46283922, "body": "Ok, but when I send this as a JSON object it is something completely different. I need a JSON object with one additional field."}, {"owner": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "edited": false, "score": 0, "creation_date": 1426194392, "post_id": 29019923, "comment_id": 46284057, "body": "No, I need <code>{&quot;name&quot;: &quot;mars&quot;, &quot;aphelion&quot;: &quot;12.123&quot;,..., &quot;mass&quot;: &quot;639e21&quot;}</code>, but your code will give me <code>{&quot;planet&quot;: {&quot;name&quot;: &quot;mars&quot;, &quot;aphelion&quot;: &quot;12.123&quot;,...,}, &quot;mass&quot;: &quot;639e21&quot;}</code>. That is the problem."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "edited": false, "score": 6, "creation_date": 1426194513, "post_id": 29019923, "comment_id": 46284091, "body": "@moose: no it doesn&#39;t. Planet needs to be anonymous in PlanetWithMass: <a href=\"http://play.golang.org/p/vfe9PJdVXy\" rel=\"nofollow noreferrer\">play.golang.org/p/vfe9PJdVXy</a>"}, {"owner": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1426198127, "post_id": 29019923, "comment_id": 46285718, "body": "@JimB That comment was important :-) Could you please add it to your answer? It was the reason why I did not get the result I wanted"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "edited": false, "score": 0, "creation_date": 1426198254, "post_id": 29019923, "comment_id": 46285768, "body": "@moose: I don&#39;t understand, it is in Simon&#39;s answer. He mentioned embedding twice, gave to links to the documentation, and provided an example."}, {"owner": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1426199151, "post_id": 29019923, "comment_id": 46286126, "body": "@JimB The problem was that I added <code>json:&quot;planets&quot;</code>. I simply had to remove this."}], "tags": [], "owner": {"reputation": 26843, "user_id": 208997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/250e219125d8bff1f03e6faea950f218?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/208997/simon"}, "is_accepted": true, "score": 22, "last_activity_date": 1426194821, "last_edit_date": 1426194821, "creation_date": 1426193339, "answer_id": 29019923, "question_id": 29019864, "link": "https://stackoverflow.com/questions/29019864/can-i-add-a-field-to-an-existing-struct-with-go/29019923#29019923", "title": "Can I add a field to an existing struct with Go?", "body": "<p>You could embed <code>Planet</code> into <code>PlanetWithMass</code>:</p>\n\n<pre><code>type PlanetWithMass struct {\n    Planet\n    Mass float64\n}\n</code></pre>\n\n<p>and do something like</p>\n\n<pre><code>marsWithMass := PlanetWithMass{\n    Planet: mars,\n    Mass: 639e21,\n}\n</code></pre>\n\n<p>For more info on embedding, see the <a href=\"https://golang.org/ref/spec#Struct_types\">Spec</a> and <a href=\"https://golang.org/doc/effective_go.html#embedding\">Effective Go</a>.</p>\n\n<p>\u279c <a href=\"http://play.golang.org/p/NuPIlrmYJM\">Playground</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7763318, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4kFtpru9e_w/AAAAAAAAAAI/AAAAAAAAABo/fZxUxv-x-Sg/photo.jpg?sz=128", "display_name": "kennedy kanyi", "link": "https://stackoverflow.com/users/7763318/kennedy-kanyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1619003385, "last_edit_date": 1619003385, "creation_date": 1546528174, "answer_id": 54024948, "question_id": 29019864, "link": "https://stackoverflow.com/questions/29019864/can-i-add-a-field-to-an-existing-struct-with-go/54024948#54024948", "title": "Can I add a field to an existing struct with Go?", "body": "<p>You can probably use <strong>map[string]string</strong> which will enable you to explicitly add as many sub keys as possible. NOTE: You will have to declare the struct first with one type</p>\n<p><code>type PlanetWithMass struct { Planet map[string]string }</code></p>\n<p>Then to add more fields, start by an instance of the struct</p>\n<pre><code>type PlanetWithMass struct {\n  Planet map[string]string\n}\n\nplanet := &amp;PlanetWithMass{} // instance of struct\n\nplanet.Planet = make(map[string]string) // declare field as a map[string]string\n\nplanet.Planet[&quot;Name&quot;] = &quot;Mercury&quot;\nplanet.Planet[&quot;Galaxy&quot;] = &quot;Milky Way&quot;\nplanet.Planet[&quot;Population&quot;] = &quot;7 Billion&quot;\nplanet.Planet[&quot;HasOceans&quot;] = &quot;Yes&quot;\n</code></pre>\n<p>Using this method, you can add several fields to the struct without the worry of using interfaces. It might be a round hack but it works!</p>\n"}], "owner": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10862, "favorite_count": 1, "accepted_answer_id": 29019923, "answer_count": 2, "score": 4, "last_activity_date": 1619003385, "creation_date": 1426193153, "last_edit_date": 1426194300, "question_id": 29019864, "link": "https://stackoverflow.com/questions/29019864/can-i-add-a-field-to-an-existing-struct-with-go", "title": "Can I add a field to an existing struct with Go?", "body": "<p>Suppose I have the struct</p>\n\n<pre><code>type Planet struct {\n    Name       string  `json:\"name\"`\n    Aphelion   float64 `json:\"aphelion\"`   // in million km\n    Perihelion float64 `json:\"perihelion\"` // in million km\n    Axis       int64   `json:\"Axis\"`       // in km\n    Radius     float64 `json:\"radius\"`\n}\n</code></pre>\n\n<p>as well as instances of this struct, e.g.</p>\n\n<pre><code>var mars = new(Planet)\nmars.Name = \"Mars\"\nmars.Aphelion = 249.2\nmars.Perihelion = 206.7\nmars.Axis = 227939100\nmars.Radius = 3389.5\n\nvar earth = new(Planet)\nearth.Name = \"Earth\"\nearth.Aphelion = 151.930\nearth.Perihelion = 147.095\nearth.Axis = 149598261\nearth.Radius = 6371.0\n\nvar venus = new(Planet)\nvenus.Name = \"Venus\"\nvenus.Aphelion = 108.939\nvenus.Perihelion = 107.477\nvenus.Axis = 108208000\nvenus.Radius = 6051.8\n</code></pre>\n\n<p>Now I want to add a field, e.g. <code>Mass</code> to all of those. How can I do that?</p>\n\n<p>At the moment, I define a new struct, e.g. <code>PlanetWithMass</code> and reassign all fields - field by field - to new instances of the <code>PlanetWithMass</code>.</p>\n\n<p>Is there a less verbose way to do it? A way which does not need adjustment when <code>Planet</code> changes?</p>\n\n<p>edit: I need this on a web server, where I have to send the struct as JSON, but with an additional field. Embedding does not solve this problem as it changes the resulting JSON.</p>\n"}, {"tags": ["go", "redis"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1426188523, "post_id": 29018464, "comment_id": 46281134, "body": "have you tried printing <code>infoL</code>  or the redis response directly?"}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 1, "creation_date": 1426189568, "post_id": 29018464, "comment_id": 46281678, "body": "sounds to me like the client is working against the wrong db number"}, {"owner": {"reputation": 16400, "user_id": 350542, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/024d1da9fad214ca44af8fcc649ebb86?s=128&d=identicon&r=PG", "display_name": "jayunit100", "link": "https://stackoverflow.com/users/350542/jayunit100"}, "edited": false, "score": 0, "creation_date": 1426192945, "post_id": 29018464, "comment_id": 46283392, "body": "iirc , my print debugging was not informative, but I can double check."}, {"owner": {"reputation": 16400, "user_id": 350542, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/024d1da9fad214ca44af8fcc649ebb86?s=128&d=identicon&r=PG", "display_name": "jayunit100", "link": "https://stackoverflow.com/users/350542/jayunit100"}, "edited": false, "score": 0, "creation_date": 1426254193, "post_id": 29018464, "comment_id": 46308425, "body": "is there any chance that this is related to changes from 2.6 -&gt; 2.8 ?"}], "answers": [{"tags": [], "owner": {"reputation": 7792, "user_id": 131264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67c4f2aed4839e9325dd58097aaa8eca?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/131264/alexander"}, "is_accepted": false, "score": 0, "last_activity_date": 1426266457, "creation_date": 1426266457, "answer_id": 29038097, "question_id": 29018464, "link": "https://stackoverflow.com/questions/29018464/redis-logging-query-outputs/29038097#29038097", "title": "Redis : Logging query outputs", "body": "<p>simpleredis runs a <code>SELECT [dbindex]</code> command before running the query.</p>\n\n<p>Does it work if you run <code>SELECT</code> before <code>LLEN</code>?</p>\n"}], "owner": {"reputation": 16400, "user_id": 350542, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/024d1da9fad214ca44af8fcc649ebb86?s=128&d=identicon&r=PG", "display_name": "jayunit100", "link": "https://stackoverflow.com/users/350542/jayunit100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426266457, "creation_date": 1426187965, "question_id": 29018464, "link": "https://stackoverflow.com/questions/29018464/redis-logging-query-outputs", "title": "Redis : Logging query outputs", "body": "<p>I have found that a redis application is returning, from its REST API (which uses a redis library), the <strong>wrong</strong> result (0, instead of 5).</p>\n\n<p>In my code for running this query via Go, I run:</p>\n\n<pre><code>println(\"LLEN HANDLER\")\ninfoL := HandleError(pool.Get(0).Do(\"LLEN\",\"xyz\")).(int64)\nlengthJSON := HandleError(json.MarshalIndent(infoL, \"\", \" \")).([]byte)\nprint(\"RETURN LEN = \"+string(lengthJSON))\nrw.Write(lengthJSON)\n</code></pre>\n\n<p>This returns 0.  </p>\n\n<p><strong>However, if I run the query from redis-cli (on slaves, or on master)</strong> </p>\n\n<pre><code>LLEN xyz\n</code></pre>\n\n<p>I get the <strong>correct</strong> result. The result is 5. </p>\n\n<p>In particular, I'm using <a href=\"https://github.com/xyproto/simpleredis\" rel=\"nofollow\">https://github.com/xyproto/simpleredis</a> , and I noticed that in the same app, all queries of the form:</p>\n\n<pre><code>list := simpleredis.NewList(pool, key)\n//members := HandleError(list.GetAll()).([]string)\nmembers := HandleError(list.GetLastN(4)).([]string)\n</code></pre>\n\n<p>work normally and return non-null data, which confirms that the network connectivity etc in the system is working.  </p>\n"}, {"tags": ["go", "haproxy", "martini"], "answers": [{"comments": [{"owner": {"reputation": 1984, "user_id": 290541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/92EyJ.jpg?s=128&g=1", "display_name": "blockcipher", "link": "https://stackoverflow.com/users/290541/blockcipher"}, "edited": false, "score": 0, "creation_date": 1426187711, "post_id": 29018219, "comment_id": 46280740, "body": "Thanks!  I think I was on the right track, but I didn&#39;t restart my service, which I think I had to do as simply refreshing the HAProxy config didn&#39;t work.  the <code>http-server-close</code> is working like a charm."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 1984, "user_id": 290541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/92EyJ.jpg?s=128&g=1", "display_name": "blockcipher", "link": "https://stackoverflow.com/users/290541/blockcipher"}, "edited": false, "score": 0, "creation_date": 1426187933, "post_id": 29018219, "comment_id": 46280854, "body": "@blockcipher: reloading haproxy leaves the original process running until all its active connections are closed. You need to fully stop haproxy, or the client and/or the server to make sure the connections get closed."}, {"owner": {"reputation": 19285, "user_id": 714112, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83b2bbbdc0f34ed6148dab188c6bb987?s=128&d=identicon&r=PG", "display_name": "Sridhar Sarnobat", "link": "https://stackoverflow.com/users/714112/sridhar-sarnobat"}, "edited": false, "score": 0, "creation_date": 1565894051, "post_id": 29018219, "comment_id": 101497064, "body": "Is there something similar to <code>http-server-close</code> for TCP?"}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 4, "last_activity_date": 1426187093, "creation_date": 1426187093, "answer_id": 29018219, "question_id": 29017581, "link": "https://stackoverflow.com/questions/29017581/haproxy-is-not-load-balancing-due-to-persistent-connections/29018219#29018219", "title": "HAProxy is not load balancing due to persistent connections", "body": "<p>HTTP/1.1 uses KeepAlive by default. Since the connections aren't closed, HAProxy can't balance the requests between different backends.</p>\n\n<p>You have a couple options:</p>\n\n<p>Force the connection to close after each request in your code. Setting <code>Request.Close = true</code> on either the client or the server will send a <code>Connection: close</code> header, telling both sides to close the tcp connection.</p>\n\n<p>Alternatively you could have HAPoxy alter the requests by setting <code>http-server-close</code> so the backend is closed after each request, or <code>http-close</code>to shutdown both sides after each request. </p>\n\n<p><code>http-server-close</code> is usually the best option, since that still maintains persistent connections for the client, while proxying each request individually.</p>\n"}], "owner": {"reputation": 1984, "user_id": 290541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/92EyJ.jpg?s=128&g=1", "display_name": "blockcipher", "link": "https://stackoverflow.com/users/290541/blockcipher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1919, "favorite_count": 0, "accepted_answer_id": 29018219, "answer_count": 1, "score": 2, "last_activity_date": 1426187093, "creation_date": 1426184927, "last_edit_date": 1426185366, "question_id": 29017581, "link": "https://stackoverflow.com/questions/29017581/haproxy-is-not-load-balancing-due-to-persistent-connections", "title": "HAProxy is not load balancing due to persistent connections", "body": "<p>We have a web server and a client, both written in go, that interact with each other.  We want HAProxy to load balance requests between several instance of the server, but it's not working.  The client will always connect to the same server while it's still up.</p>\n\n<p>If I look at the output of \"netstat -anp\", I can see that there is a persistent connection that was established between the client and the sever through HAProxy.  I tried setting the Connection Header in the response to \"close\", but that didn't work at all.</p>\n\n<p>Needless to say, I'm completely confused by this.  My first question is, is this a problem with the client, server, or HAProxy?  How does one force the client to disconnect?  Am I missing something regarding this?  Curl works fine, so I know that HAProxy does load balance, but curl also completely shuts down when finished, hence why I'm suspecting it's the persistent connection that's causing me issues since the client and server are long running.</p>\n\n<p>Just as an FYI, I'm using go-martini on the server.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["go", "nonblocking", "channels"], "comments": [{"owner": {"reputation": 1227, "user_id": 418772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/812e307892de3240c2b50a3e66295f84?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/418772/rob"}, "edited": false, "score": 0, "creation_date": 1426189812, "post_id": 29016118, "comment_id": 46281819, "body": "A send will either get buffered, blocked, timed out, or done.  Like JimB says: it&#39;s a data race to assume that you can&#39;t get blocked.  If you don&#39;t think that the sender is in the right state to send or the receiver in the right state to receive, then that&#39;s just an issue with the design of the protocol.  You could get state updates from the client about whether it thinks that it will accept the send."}, {"owner": {"reputation": 19, "user_id": 4663979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d39340dbb457389e0d868681fda76e?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Steep", "link": "https://stackoverflow.com/users/4663979/ian-steep"}, "reply_to_user": {"reputation": 1227, "user_id": 418772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/812e307892de3240c2b50a3e66295f84?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/418772/rob"}, "edited": false, "score": 0, "creation_date": 1426515012, "post_id": 29016118, "comment_id": 46391033, "body": "So the answer is &quot;No&quot;. There is no built in mechanism to do this. Thanks for verifying."}, {"owner": {"reputation": 1227, "user_id": 418772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/812e307892de3240c2b50a3e66295f84?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/418772/rob"}, "edited": false, "score": 0, "creation_date": 1426519605, "post_id": 29016118, "comment_id": 46394373, "body": "With the caveat that if you make the buffer large enough, and manage to never fill the buffer, you will never experience blocking in practice.  Never filling the buffer requires that the messages are always consumed in a timely manner; which is only guaranteed if the sender stops sending before the buffer is full.  If you think about it, then that&#39;s kind of like the sender &quot;blocking&quot; (refusing to send) because it knows that the receiver is full."}], "answers": [{"tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": false, "score": 7, "last_activity_date": 1426181027, "last_edit_date": 1426181027, "creation_date": 1426180720, "answer_id": 29016251, "question_id": 29016118, "link": "https://stackoverflow.com/questions/29016118/go-non-blocking-channel-send-test-for-failure-before-attempting-to-send/29016251#29016251", "title": "Go non-blocking channel send, test-for-failure before attempting to send?", "body": "<p>That would do no good in the general case, since you then have a race. After generating msg the channel may no longer be ready to send.</p>\n\n<p>If you need this pattern, you either need a second channel for signaling, </p>\n\n<pre><code>select {\n    case &lt;-ready:\n        msg := generateMsg()\n        messages &lt;- msg\n        fmt.Println(\"sent message\", msg)\n    default:\n        fmt.Println(\"no message sent\")\n}\n</code></pre>\n\n<p>or you can use a <a href=\"http://golang.org/pkg/sync/#Cond\" rel=\"noreferrer\"><code>sync.Cond</code></a></p>\n"}], "owner": {"reputation": 19, "user_id": 4663979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d39340dbb457389e0d868681fda76e?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Steep", "link": "https://stackoverflow.com/users/4663979/ian-steep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426181027, "creation_date": 1426180331, "question_id": 29016118, "link": "https://stackoverflow.com/questions/29016118/go-non-blocking-channel-send-test-for-failure-before-attempting-to-send", "title": "Go non-blocking channel send, test-for-failure before attempting to send?", "body": "<p>Is there a way to test for failure of a go channel send without actually attempting the send? The standard non-blocking send is like so:</p>\n\n<pre><code>msg := \"hi\"\nselect {\n    case messages &lt;- msg:\n        fmt.Println(\"sent message\", msg)\n    default:\n        fmt.Println(\"no message sent\")\n    }\n</code></pre>\n\n<p>The problem is that I need to have \"msg\" ready to send in order to test the channel.</p>\n\n<p>I would like to test to see if a send will fail in a way that does not require having \"msg\" ready for sending. </p>\n"}, {"tags": ["inheritance", "go"], "answers": [{"comments": [{"owner": {"reputation": 9113, "user_id": 146003, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/272ed3d9a5c9813ed1fad7ab8f512576?s=128&d=identicon&r=PG", "display_name": "Atmocreations", "link": "https://stackoverflow.com/users/146003/atmocreations"}, "edited": false, "score": 0, "creation_date": 1426175358, "post_id": 29014294, "comment_id": 46273413, "body": "Unfortunately, you cannot define fields in interfaces. Trying so results in <code>test.go:32: syntax error: unexpected name, expecting (</code> and  <code>test.go:33: non-declaration statement outside function body</code>"}, {"owner": {"reputation": 2258, "user_id": 3352025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RpFHA.jpg?s=128&g=1", "display_name": "Lye Fish", "link": "https://stackoverflow.com/users/3352025/lye-fish"}, "reply_to_user": {"reputation": 9113, "user_id": 146003, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/272ed3d9a5c9813ed1fad7ab8f512576?s=128&d=identicon&r=PG", "display_name": "Atmocreations", "link": "https://stackoverflow.com/users/146003/atmocreations"}, "edited": false, "score": 0, "creation_date": 1426175827, "post_id": 29014294, "comment_id": 46273729, "body": "@Atmocreations: Sorry, didn&#39;t change it to a struct. See the update. Though your error seems to come from running non-declaration code outside of a function, so it&#39;s not really related."}, {"owner": {"reputation": 9113, "user_id": 146003, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/272ed3d9a5c9813ed1fad7ab8f512576?s=128&d=identicon&r=PG", "display_name": "Atmocreations", "link": "https://stackoverflow.com/users/146003/atmocreations"}, "edited": false, "score": 0, "creation_date": 1426176075, "post_id": 29014294, "comment_id": 46273932, "body": "Okay thank you. How about the instantiation of such objects? Apparently, I cannot do this: <code>result := uploadResult{Code:&quot;someCode&quot;, Reason:&quot;This failed do to some reason&quot;}</code>"}, {"owner": {"reputation": 2258, "user_id": 3352025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RpFHA.jpg?s=128&g=1", "display_name": "Lye Fish", "link": "https://stackoverflow.com/users/3352025/lye-fish"}, "reply_to_user": {"reputation": 9113, "user_id": 146003, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/272ed3d9a5c9813ed1fad7ab8f512576?s=128&d=identicon&r=PG", "display_name": "Atmocreations", "link": "https://stackoverflow.com/users/146003/atmocreations"}, "edited": false, "score": 0, "creation_date": 1426176224, "post_id": 29014294, "comment_id": 46274014, "body": "@Atmocreations: Yeah, unfortunately the composite literal syntax requires an explicit struct syntax. <code>var ul uploadResult = uploadResult{     apiResult: apiResult{       Code: &quot;...some code...&quot;,       Reason: &quot;The description&quot;,     },     Filename: &quot;foo.txt&quot;,   }</code>  <a href=\"http://play.golang.org/p/8GLEbuqPGK\" rel=\"nofollow noreferrer\">play.golang.org/p/8GLEbuqPGK</a>"}, {"owner": {"reputation": 9113, "user_id": 146003, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/272ed3d9a5c9813ed1fad7ab8f512576?s=128&d=identicon&r=PG", "display_name": "Atmocreations", "link": "https://stackoverflow.com/users/146003/atmocreations"}, "edited": false, "score": 0, "creation_date": 1426176310, "post_id": 29014294, "comment_id": 46274085, "body": "And I actually don&#39;t want the <code>failExit</code> to be a member of <code>apiResult</code>"}, {"owner": {"reputation": 2258, "user_id": 3352025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RpFHA.jpg?s=128&g=1", "display_name": "Lye Fish", "link": "https://stackoverflow.com/users/3352025/lye-fish"}, "reply_to_user": {"reputation": 9113, "user_id": 146003, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/272ed3d9a5c9813ed1fad7ab8f512576?s=128&d=identicon&r=PG", "display_name": "Atmocreations", "link": "https://stackoverflow.com/users/146003/atmocreations"}, "edited": false, "score": 0, "creation_date": 1426176409, "post_id": 29014294, "comment_id": 46274143, "body": "@Atmocreations: Where should it be a member? You could redefine it on every struct that embeds <code>apiResult</code> I guess, but why?"}, {"owner": {"reputation": 9113, "user_id": 146003, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/272ed3d9a5c9813ed1fad7ab8f512576?s=128&d=identicon&r=PG", "display_name": "Atmocreations", "link": "https://stackoverflow.com/users/146003/atmocreations"}, "reply_to_user": {"reputation": 2258, "user_id": 3352025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RpFHA.jpg?s=128&g=1", "display_name": "Lye Fish", "link": "https://stackoverflow.com/users/3352025/lye-fish"}, "edited": false, "score": 0, "creation_date": 1426176616, "post_id": 29014294, "comment_id": 46274283, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/72857/discussion-between-atmocreations-and-lye-fish\">continue this discussion in chat</a>."}, {"owner": {"reputation": 9113, "user_id": 146003, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/272ed3d9a5c9813ed1fad7ab8f512576?s=128&d=identicon&r=PG", "display_name": "Atmocreations", "link": "https://stackoverflow.com/users/146003/atmocreations"}, "edited": false, "score": 0, "creation_date": 1426234337, "post_id": 29014294, "comment_id": 46296699, "body": "It should actually not be a member of something. I&#39;ve adapted your answer according to the results of our discussion. Now it works, thank you."}], "tags": [], "owner": {"reputation": 2258, "user_id": 3352025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RpFHA.jpg?s=128&g=1", "display_name": "Lye Fish", "link": "https://stackoverflow.com/users/3352025/lye-fish"}, "is_accepted": true, "score": 6, "last_activity_date": 1426234311, "last_edit_date": 1426234311, "creation_date": 1426175318, "answer_id": 29014294, "question_id": 29014215, "link": "https://stackoverflow.com/questions/29014215/interface-for-fields-in-golang/29014294#29014294", "title": "interface for fields in golang", "body": "<p>You should just be able to embed a struct with the common fields in the specific structs.</p>\n\n<p><strong><em>Live demo:</em></strong> <a href=\"http://play.golang.org/p/7Ju-r-yE1-\" rel=\"nofollow\">http://play.golang.org/p/7Ju-r-yE1-</a></p>\n\n<pre><code>type apiResult struct {\n  Code string `json:\"code\"`\n  Reason string `json:\"reason\"`\n}\n\nfunc failExit(result apiResult) {\n  fmt.Println(result.Reason)\n}\n\ntype uploadResult struct {\n  Filename string `json:\"filename\"`\n  apiResult // &lt;-- embedded\n}\n\nfunc main() {\n  var ul uploadResult\n  ul.Code = \"...some code...\"\n  ul.Reason = \"The description\"\n  ul.Filename = \"foo.txt\"\n\n  failExit(ul.apiResult)\n}\n</code></pre>\n\n<p>So there shouldn't really be any need for interfaces in this situation. Just embed the <code>apiResult</code> in whatever structs need it.</p>\n"}, {"tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": false, "score": 1, "last_activity_date": 1426179610, "last_edit_date": 1426179610, "creation_date": 1426176159, "answer_id": 29014636, "question_id": 29014215, "link": "https://stackoverflow.com/questions/29014215/interface-for-fields-in-golang/29014636#29014636", "title": "interface for fields in golang", "body": "<p>Long story short, Go interfaces don't allow fields to be declared because conceptually they deal with behavior not data. Fields are data. </p>\n\n<p>There's a couple of ways to go about what you want to do:</p>\n\n<p>Here's some examples on how to approach this:</p>\n\n<p>This one uses an interface to expose the APIResult fields as part of the apiResponse interface: \n<a href=\"http://play.golang.org/p/ONLzvqlP5R\" rel=\"nofollow\">http://play.golang.org/p/ONLzvqlP5R</a></p>\n\n<p>This one uses an interface to expose the APIResult as part of any Result struct that contains one:\n<a href=\"http://play.golang.org/p/NzxPHhDls_\" rel=\"nofollow\">http://play.golang.org/p/NzxPHhDls_</a></p>\n\n<p>On that note, you could solve this by using composition by having <code>APIResponse</code> be a struct that has the common fields and then any other struct that needs those fields exports the <code>APIResponse</code> struct.</p>\n\n<pre><code>type APIResult struct {\n    Code   string `json:\"code\"`\n    Reason string `json:\"reason\"`\n}\n\ntype UploadResult struct {\n  Filename string `json:\"filename\"`\n  APIResult\n}\n\nfunc failExit(result APIResult) {\n  fmt.Println(result.Reason)\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/k85vTJoFRn\" rel=\"nofollow\">http://play.golang.org/p/k85vTJoFRn</a></p>\n"}], "owner": {"reputation": 9113, "user_id": 146003, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/272ed3d9a5c9813ed1fad7ab8f512576?s=128&d=identicon&r=PG", "display_name": "Atmocreations", "link": "https://stackoverflow.com/users/146003/atmocreations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6916, "favorite_count": 4, "accepted_answer_id": 29014294, "answer_count": 2, "score": 5, "last_activity_date": 1426234311, "creation_date": 1426175086, "question_id": 29014215, "link": "https://stackoverflow.com/questions/29014215/interface-for-fields-in-golang", "title": "interface for fields in golang", "body": "<p>Let's say I have a struct which should be used as a result for an upload:</p>\n\n<pre><code>type uploadResult struct {\n  Filename string `json:\"filename\"`\n  Code string `json:\"code\"`\n  Reason string `json:\"reason\"`\n}\n</code></pre>\n\n<p>There will be other structs like this one, both having a field <code>Code</code> and another one called <code>Reason</code>. It would therefore be interesting to have something like a common interface (pseudo-go-code; this one doesn't work):</p>\n\n<pre><code>type apiResult interface {\n  Code string `json:\"code\"`\n  Reason string `json:\"reason\"`\n}\n</code></pre>\n\n<p>Because I would like to call a function which extracts some common fields, but only those that are common:</p>\n\n<pre><code>func failExit(result apiResult) {\n  fmt.Println(result.Reason)\n}\n</code></pre>\n\n<p>So how would I rewrite it so that it does what I'm expecting?</p>\n\n<p>Best regards</p>\n"}, {"tags": ["go", "scope", "package"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426186968, "post_id": 29010856, "comment_id": 46280393, "body": "Required reading: <a href=\"https://golang.org/doc/code.html\" rel=\"nofollow noreferrer\">How to Write Go Code</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426187033, "post_id": 29011057, "comment_id": 46280417, "body": "<code>go build</code> and/or <code>go install</code> are usually preferred once you have multiple *.go files, *_test.go files, build constraints, etc."}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 3, "last_activity_date": 1426167108, "last_edit_date": 1426167108, "creation_date": 1426166752, "answer_id": 29011057, "question_id": 29010856, "link": "https://stackoverflow.com/questions/29010856/how-do-i-import-definitions-from-another-file-in-a-go-program/29011057#29011057", "title": "How do I import definitions from another file in a Go program?", "body": "<blockquote>\n  <p><a href=\"http://golang.org/cmd/go/#hdr-Compile_and_run_Go_program\" rel=\"nofollow\">Compile and run Go program</a></p>\n  \n  <p>Usage:</p>\n\n<pre><code>go run [build flags] [-exec xprog] gofiles... [arguments...]\n</code></pre>\n  \n  <p>Run compiles and runs the main package comprising the named Go source\n  files. A Go source file is defined to be a file ending in a literal\n  \".go\" suffix.</p>\n</blockquote>\n\n<p>List all the <code>gofiles</code>,</p>\n\n<pre><code>go run main.go otherfile.go\n</code></pre>\n\n<p>Or, on Linux and other Unix-like systems, <code>*.go</code> is the wildcard for all <code>.go</code> files in the directory,</p>\n\n<pre><code>go run *.go\n</code></pre>\n"}], "owner": {"reputation": 26374, "user_id": 229792, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/NIE5f.jpg?s=128&g=1", "display_name": "jameshfisher", "link": "https://stackoverflow.com/users/229792/jameshfisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "closed_date": 1426201152, "accepted_answer_id": 29011057, "answer_count": 1, "score": 1, "last_activity_date": 1426167108, "creation_date": 1426166227, "question_id": 29010856, "link": "https://stackoverflow.com/questions/29010856/how-do-i-import-definitions-from-another-file-in-a-go-program", "closed_reason": "Duplicate", "title": "How do I import definitions from another file in a Go program?", "body": "<p>I have the following files:</p>\n\n<p><code>gopackage/main.go</code>:</p>\n\n<pre><code>package main\n\nfunc main () {\n  foo();\n}\n</code></pre>\n\n<p><code>gopackage/otherfile.go</code>:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc foo() {\n  fmt.Print(\"foo\\n\")\n}\n</code></pre>\n\n<p>Apparently, the reference to <code>foo</code> from <code>main.go</code> does not resolve to the definition of <code>foo</code> in <code>otherfile.go</code>:</p>\n\n<pre><code>&gt; go run main.go\n# command-line-arguments\n./main.go:4: undefined: foo\n</code></pre>\n\n<p>Why not? I have been told that all files in the same directory comprise a single package, which is a single scope.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 15253, "user_id": 456188, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ab34924e6d4e07371b890c5655c185a9?s=128&d=identicon&r=PG", "display_name": "Chris Pfohl", "link": "https://stackoverflow.com/users/456188/chris-pfohl"}, "edited": false, "score": 4, "creation_date": 1426167559, "post_id": 29010736, "comment_id": 46267582, "body": "Not enough information, there&#39;s a bunch of variables you haven&#39;t included.  Sounds like your url is wrong, or your method is wrong, though."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4563410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901385ef613380c66e439c020a1733b?s=128&d=identicon&r=PG&f=1", "display_name": "Kiruthika Hindraj", "link": "https://stackoverflow.com/users/4563410/kiruthika-hindraj"}, "edited": false, "score": 0, "creation_date": 1426221339, "post_id": 29012451, "comment_id": 46292404, "body": "apiUrl := &quot;<a href=\"https://upload.box.com/\" rel=\"nofollow noreferrer\">upload.box.com</a>&quot; \tresource := &quot;api/2.0/files/content&quot; \t \tdata := url.Values{} \tdata.Add(&quot;access_token&quot;, accessobj.Access_token) \tauthbear := &quot;Bearer &quot; \tauthbear += accessobj.Access_token"}], "tags": [], "owner": {"reputation": 840, "user_id": 1028939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61801c8fb992a44d5506b6a557831003?s=128&d=identicon&r=PG", "display_name": "MattyB", "link": "https://stackoverflow.com/users/1028939/mattyb"}, "is_accepted": false, "score": 0, "last_activity_date": 1426170461, "creation_date": 1426170461, "answer_id": 29012451, "question_id": 29010736, "link": "https://stackoverflow.com/questions/29010736/golang-code-to-upload-a-file-into-personal-box-account/29012451#29012451", "title": "Golang code to upload a file into personal box account", "body": "<p><code>urlStr</code> should be <code>https://upload.box.com/api/2.0/files/content</code></p>\n\n<p><a href=\"https://developers.box.com/docs/#files-upload-a-file\" rel=\"nofollow\">https://developers.box.com/docs/#files-upload-a-file</a></p>\n\n<p>As they show in the docs, you may want to try out your queries using <code>curl</code> first:</p>\n\n<pre><code>curl https://upload.box.com/api/2.0/files/content \\\n  -H \"Authorization: Bearer ACCESS_TOKEN\" -X POST \\\n  -F attributes='{\"name\":\"tigers.jpeg\", \"parent\":{\"id\":\"11446498\"}}' \\\n  -F file=@myfile.jpg\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4563410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901385ef613380c66e439c020a1733b?s=128&d=identicon&r=PG&f=1", "display_name": "Kiruthika Hindraj", "link": "https://stackoverflow.com/users/4563410/kiruthika-hindraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1426170461, "creation_date": 1426165859, "last_edit_date": 1426167605, "question_id": 29010736, "link": "https://stackoverflow.com/questions/29010736/golang-code-to-upload-a-file-into-personal-box-account", "title": "Golang code to upload a file into personal box account", "body": "<p>When I give this snippet of code in a golang program after recieving the access token:</p>\n\n<pre><code>f, err := ioutil.ReadFile(\"C:\\\\Users\\\\vembu\\\\Desktop\\\\hi.txt\")\nioutil.WriteFile(\"hi.txt\", f, 0x777)\nr, _ := http.NewRequest(\"POST\", urlStr, bytes.NewBuffer(f)) \nr.Header.Add(\"Authorization\", \"Bearer \"+accessobj.Access_token)\nr.Header.Add(\"attributes\", \"{\\\"name\\\":\\\"hi.txt\\\",\\\"parent\\\":{\\\"id\\\":\\\"3098791209\\\"}}\")r.Header.Add(\"file\", \"hi.txt\")\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>I face &amp;{405 Method Not Allowed 405 HTTP/1.1 1 1 map[Allow:[GET, OPTIONS, HEAD] Content-Type:[text/html;charset=UTF-8] Content-Length:[0] Date:[Thu, 12 Mar 2015 13:07:32 GMT] Age:[0] Connection:[keep-alive] Server:[ATS]] 0xc08200b8c0 0 [] false map[] 0xc08201f2b0 0xc082060980}\n</code></pre>\n\n<p>Can anyone please help me to solve the method to add the attributes and the file name to upload into the box account?</p>\n"}, {"tags": ["google-app-engine", "go", "google-cloud-storage", "google-cloud-platform"], "answers": [{"comments": [{"owner": {"reputation": 3234, "user_id": 2067919, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ee20c28be7254efecd50ce7a471b4876?s=128&d=identicon&r=PG", "display_name": "Karthic Rao", "link": "https://stackoverflow.com/users/2067919/karthic-rao"}, "edited": false, "score": 0, "creation_date": 1426169613, "post_id": 29011335, "comment_id": 46269163, "body": "Yes, i understood the log message , but couldnt figure out a call to obtain context.Context . Sad that the example code published doesnt work  like it is claimed on the page . @icza Can you please suggest an edit to the<code>handler</code> function in the link <a href=\"https://cloud.google.com/appengine/docs/go/googlecloudstorageclient/getstarted\" rel=\"nofollow noreferrer\">cloud.google.com/appengine/docs/go/googlecloudstorageclient/&zwnj;&#8203;&hellip;</a> to fix my issue . Im not able to use the suggested function with right formulation of  parameters to get it working ."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 3234, "user_id": 2067919, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ee20c28be7254efecd50ce7a471b4876?s=128&d=identicon&r=PG", "display_name": "Karthic Rao", "link": "https://stackoverflow.com/users/2067919/karthic-rao"}, "edited": false, "score": 1, "creation_date": 1426172949, "post_id": 29011335, "comment_id": 46271640, "body": "@KarthicRao Edited the code with how to fix it. Please check if it works."}, {"owner": {"reputation": 3234, "user_id": 2067919, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ee20c28be7254efecd50ce7a471b4876?s=128&d=identicon&r=PG", "display_name": "Karthic Rao", "link": "https://stackoverflow.com/users/2067919/karthic-rao"}, "edited": false, "score": 1, "creation_date": 1426179175, "post_id": 29011335, "comment_id": 46276077, "body": "Amazing ! Thank you it worked :) u made my day :) Google should update the page  , otherwise its a great inconvenience to everyone who is using it !"}, {"owner": {"reputation": 3234, "user_id": 2067919, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ee20c28be7254efecd50ce7a471b4876?s=128&d=identicon&r=PG", "display_name": "Karthic Rao", "link": "https://stackoverflow.com/users/2067919/karthic-rao"}, "edited": false, "score": 0, "creation_date": 1426181240, "post_id": 29011335, "comment_id": 46277235, "body": "the code is compiling good but the im getting the log as `Demo Failed&#39; .I just ran the write and read operation , they are not working , the write is not able to write into the bucket and obviously read no table to fetch it later"}, {"owner": {"reputation": 3234, "user_id": 2067919, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ee20c28be7254efecd50ce7a471b4876?s=128&d=identicon&r=PG", "display_name": "Karthic Rao", "link": "https://stackoverflow.com/users/2067919/karthic-rao"}, "edited": false, "score": 0, "creation_date": 1426181531, "post_id": 29011335, "comment_id": 46277377, "body": "here is the error on the <code>createFile</code> function ..... <code>createFile: unable to write data to bucket &quot;xxxx-87609.appspot.com&quot;, file &quot;demo-testfile-go&quot;: Post https:&#47;&#47;www.googleapis.com&#47;upload&#47;storage&#47;v1&#47;b&#47;xxxx-xxxx-876&zwnj;&#8203;09.appspot.com&#47;o?alt&zwnj;&#8203;=json&amp;projection=ful&zwnj;&#8203;l&amp;uploadType=multipa&zwnj;&#8203;rt: not an App Engine context</code>"}, {"owner": {"reputation": 3234, "user_id": 2067919, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ee20c28be7254efecd50ce7a471b4876?s=128&d=identicon&r=PG", "display_name": "Karthic Rao", "link": "https://stackoverflow.com/users/2067919/karthic-rao"}, "edited": false, "score": 0, "creation_date": 1426226295, "post_id": 29011335, "comment_id": 46293698, "body": "I have opened an issue on Google Cloud Platform Repo ,<a href=\"https://github.com/GoogleCloudPlatform/gcloud-golang/issues/118\" rel=\"nofollow noreferrer\">github.com/GoogleCloudPlatform/gcloud-golang/issues/118</a>  , please contribute when possible"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 5, "last_activity_date": 1426226391, "last_edit_date": 1426226391, "creation_date": 1426167549, "answer_id": 29011335, "question_id": 29010718, "link": "https://stackoverflow.com/questions/29010718/google-cloud-storage-client-app-error-using-go-runtime-google-app-engine/29011335#29011335", "title": "Google Cloud Storage Client App error using Go Runtime Google App Engine", "body": "<p>The error message clearly states that you try to pass a value of type <code>appengine.Context</code> where the expected type is <code>context.Context</code>.</p>\n\n<p>The <a href=\"http://godoc.org/golang.org/x/oauth2/google#AppEngineTokenSource\" rel=\"nofollow\"><code>google.AppEngineTokenSource()</code></a> function expects a value of type <a href=\"http://godoc.org/golang.org/x/net/context#Context\" rel=\"nofollow\"><code>context.Context</code></a> and not the one you pass (which is of type <code>appengine.Context</code>).</p>\n\n<p>You can create such <code>Context</code> with the function:</p>\n\n<p><a href=\"http://godoc.org/google.golang.org/cloud#NewContext\" rel=\"nofollow\"><code>cloud.NewContext(projID string, c *http.Client)</code></a></p>\n\n<p>This is how I would do it:</p>\n\n<pre><code>c := appengine.NewContext(r)\nhc := &amp;http.Client{}\nctx := cloud.NewContext(appengine.AppID(c), hc)\nhc.Transport = &amp;oauth2.Transport{\n    Source: google.AppEngineTokenSource(ctx, storage.ScopeFullControl),\n    Base:   &amp;urlfetch.Transport{Context: c},\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6120, "user_id": 752630, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/117edb11a37a9ee948002a3f68e54a2e?s=128&d=identicon&r=PG&f=1", "display_name": "mbonnin", "link": "https://stackoverflow.com/users/752630/mbonnin"}, "is_accepted": false, "score": 2, "last_activity_date": 1444066729, "creation_date": 1444066729, "answer_id": 32954596, "question_id": 29010718, "link": "https://stackoverflow.com/questions/29010718/google-cloud-storage-client-app-error-using-go-runtime-google-app-engine/32954596#32954596", "title": "Google Cloud Storage Client App error using Go Runtime Google App Engine", "body": "<p>You need to update from <code>appengine</code> to <code>google.golang.org/appengine</code> as described there: <a href=\"https://github.com/golang/oauth2/#app-engine\" rel=\"nofollow\">https://github.com/golang/oauth2/#app-engine</a></p>\n"}], "owner": {"reputation": 3234, "user_id": 2067919, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ee20c28be7254efecd50ce7a471b4876?s=128&d=identicon&r=PG", "display_name": "Karthic Rao", "link": "https://stackoverflow.com/users/2067919/karthic-rao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1398, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1444066729, "creation_date": 1426165803, "question_id": 29010718, "link": "https://stackoverflow.com/questions/29010718/google-cloud-storage-client-app-error-using-go-runtime-google-app-engine", "title": "Google Cloud Storage Client App error using Go Runtime Google App Engine", "body": "<p>Im trying the example code from <a href=\"https://cloud.google.com/appengine/docs/go/googlecloudstorageclient/getstarted\" rel=\"nofollow\">this link</a> and trying to do operations on \nGoogle Cloud Storage using Google Cloud Storage Client App from Go runtime , But the following part in the sample code is giving the error <strong><em>\"cannot use c (type \"appengine\".Context) as type context.Context in function argument:</em></strong> <strong><em>\"appengine\".Context does not implement context.Context (missing Deadline method)\"</em></strong></p>\n\n<pre><code>c := appengine.NewContext(r)\nhc := &amp;http.Client{\n    Transport: &amp;oauth2.Transport{\n        Source: google.AppEngineTokenSource(c, storage.ScopeFullControl),\n        Base:   &amp;urlfetch.Transport{Context: c},\n    },\n}\n</code></pre>\n\n<p>Whats the issue here ?? How can i solve this ??</p>\n"}, {"tags": ["postgresql", "go"], "comments": [{"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1426161531, "post_id": 29007972, "comment_id": 46263507, "body": "have you tried <code>?</code> and not <code>$1</code>"}, {"owner": {"reputation": 2987, "user_id": 2991206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/237c773c6b810707b5157d2d3301aae5?s=128&d=identicon&r=PG&f=1", "display_name": "robochat", "link": "https://stackoverflow.com/users/2991206/robochat"}, "reply_to_user": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 2, "creation_date": 1426161763, "post_id": 29007972, "comment_id": 46263660, "body": "It gives the same error (i.e. <code>syntax error at or near &quot;?&quot;</code>). Anyway, I thought that the pq module used <code>$1</code> ?"}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1426162383, "post_id": 29007972, "comment_id": 46264053, "body": "hmmm... can you try and make your query a single multi-line string using backticks? Not that I think it would matter but otherwise things seem okay, and it&#39;s a better practice in terms of GC pressure and cpu performance anyway."}], "answers": [{"comments": [{"owner": {"reputation": 2571, "user_id": 2422530, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/zlebS.jpg?s=128&g=1", "display_name": "Obi Wan - PallavJha", "link": "https://stackoverflow.com/users/2422530/obi-wan-pallavjha"}, "edited": false, "score": 0, "creation_date": 1560356137, "post_id": 29011245, "comment_id": 99712294, "body": "@Tino when you say <code>&quot;You&#39;re right about $1 and ?.&quot;</code>, what do you mean by it?"}, {"owner": {"reputation": 2571, "user_id": 2422530, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/zlebS.jpg?s=128&g=1", "display_name": "Obi Wan - PallavJha", "link": "https://stackoverflow.com/users/2422530/obi-wan-pallavjha"}, "edited": false, "score": 0, "creation_date": 1560356165, "post_id": 29011245, "comment_id": 99712309, "body": "I&#39;m stuck with the same problem."}, {"owner": {"reputation": 1224, "user_id": 5715546, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQGes.jpg?s=128&g=1", "display_name": "eyoeldefare", "link": "https://stackoverflow.com/users/5715546/eyoeldefare"}, "reply_to_user": {"reputation": 2571, "user_id": 2422530, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/zlebS.jpg?s=128&g=1", "display_name": "Obi Wan - PallavJha", "link": "https://stackoverflow.com/users/2422530/obi-wan-pallavjha"}, "edited": false, "score": 1, "creation_date": 1580199482, "post_id": 29011245, "comment_id": 106009323, "body": "@Obi Wan - PallavJha you have to specify its type"}], "tags": [], "owner": {"reputation": 406, "user_id": 2025063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6038b3edb863da54cd6beb243fbbfc3a?s=128&d=identicon&r=PG", "display_name": "Tino", "link": "https://stackoverflow.com/users/2025063/tino"}, "is_accepted": true, "score": 9, "last_activity_date": 1426167295, "creation_date": 1426167295, "answer_id": 29011245, "question_id": 29007972, "link": "https://stackoverflow.com/questions/29007972/golang-syntax-error-at-or-near-1-in-postgres/29011245#29011245", "title": "golang syntax error at or near &quot;$1&quot; in postgres", "body": "<p>You're right about <code>$1</code> and <code>?</code>.</p>\n\n<p>The reason why it complains about invalid syntax with <code>$1</code> is because of type cast. Put it like this:</p>\n\n<pre><code>rows, err := db.Query(\"select time, val from table where \" +\n                          \"time &gt;= extract(epoch from $1::timestamp with time zone)::int4 \" +\n                          \"and time &lt; extract(epoch from timestamp with time zone '2015-03-01 00:15:10')::int4 \" +\n                          \"order by time asc\",from)\n</code></pre>\n"}], "owner": {"reputation": 2987, "user_id": 2991206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/237c773c6b810707b5157d2d3301aae5?s=128&d=identicon&r=PG&f=1", "display_name": "robochat", "link": "https://stackoverflow.com/users/2991206/robochat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12494, "favorite_count": 0, "accepted_answer_id": 29011245, "answer_count": 1, "score": 9, "last_activity_date": 1426167295, "creation_date": 1426158063, "question_id": 29007972, "link": "https://stackoverflow.com/questions/29007972/golang-syntax-error-at-or-near-1-in-postgres", "title": "golang syntax error at or near &quot;$1&quot; in postgres", "body": "<p>I am trying to execute a query in go using the sql module.</p>\n\n<pre><code>var from string = \"2015-03-01 00:00:00\"    \nrows, err := db.Query(\"select time, val from table where \" +\n                              \"time &gt;= extract(epoch from timestamp with time zone $1)::int4 \" +\n                              \"and time &lt; extract(epoch from timestamp with time zone '2015-03-01 00:15:10')::int4 \" +\n                              \"order by time asc\",from)\n</code></pre>\n\n<p>However I get the error </p>\n\n<pre><code>pq: syntax error at or near \"$1\"\n</code></pre>\n\n<p>If I put in the epoch values directly then the query will work and the query works when I try it without any variables i.e. with the query hardcoded.\nSo what is the problem?</p>\n"}, {"tags": ["pointers", "go", "composite-literals"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426189002, "post_id": 29007904, "comment_id": 46281395, "body": "Pointers to slices (<code>*[]TabRow</code>) are rarely useful and usually a sign that the author doesn&#39;t understand <a href=\"https://blog.golang.org/slices\" rel=\"nofollow noreferrer\">slices</a> (which like maps are already a reference type). Further, <code>TableValue</code> ends up as a pointer to a pointer to a slice which doesn&#39;t seem desirable."}], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 4033630, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-8PVmhXNiob8/AAAAAAAAAAI/AAAAAAAAAFU/2wEOa8O7R-U/photo.jpg?sz=128", "display_name": "susheel chaudhary", "link": "https://stackoverflow.com/users/4033630/susheel-chaudhary"}, "edited": false, "score": 0, "creation_date": 1426572385, "post_id": 29008765, "comment_id": 46416455, "body": "In ResponseData,  TableValue is of type *[]Rows, not *Rows."}], "tags": [], "owner": {"reputation": 3269, "user_id": 429555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e970e0e5d130ae179f5cfa9b3079b76?s=128&d=identicon&r=PG", "display_name": "ferhat", "link": "https://stackoverflow.com/users/429555/ferhat"}, "is_accepted": false, "score": 2, "last_activity_date": 1426160339, "creation_date": 1426160339, "answer_id": 29008765, "question_id": 29007904, "link": "https://stackoverflow.com/questions/29007904/assigning-value-in-golang/29008765#29008765", "title": "Assigning value in Golang", "body": "<pre><code>func main() {\n\n    rowsList := []TabRow{\n        TabRow{\n            ColName:     \"col1\",\n            ColValue:    \"col1v\",\n            ColDataType: \"string\",\n        },\n        TabRow{\n            ColName:     \"col2\",\n            ColValue:    \"col2v\",\n            ColDataType: \"int\",\n        }}\n\n    rows := Rows(&amp;rowsList)\n\n    resp := ResponseData{\n        DataType:       \"json\",\n        Component:      \"backend\",\n        ParameterName:  \"test\",\n        ParameterValue: \"cases\",\n        TableValue:     &amp;rows,\n    }\n\n    fmt.Printf(\"%v\", resp)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 255, "user_id": 4033630, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-8PVmhXNiob8/AAAAAAAAAAI/AAAAAAAAAFU/2wEOa8O7R-U/photo.jpg?sz=128", "display_name": "susheel chaudhary", "link": "https://stackoverflow.com/users/4033630/susheel-chaudhary"}, "edited": false, "score": 0, "creation_date": 1426572218, "post_id": 29008769, "comment_id": 46416401, "body": "Here TableValue    is of type *[]Rows .How to assign the values for TableValue  ?"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 255, "user_id": 4033630, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-8PVmhXNiob8/AAAAAAAAAAI/AAAAAAAAAFU/2wEOa8O7R-U/photo.jpg?sz=128", "display_name": "susheel chaudhary", "link": "https://stackoverflow.com/users/4033630/susheel-chaudhary"}, "edited": false, "score": 0, "creation_date": 1426577290, "post_id": 29008769, "comment_id": 46418352, "body": "@susheelchaudhary You&#39;re right, I edited the answer to create that type exactly."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 4, "last_activity_date": 1426577256, "last_edit_date": 1426577256, "creation_date": 1426160346, "answer_id": 29008769, "question_id": 29007904, "link": "https://stackoverflow.com/questions/29007904/assigning-value-in-golang/29008769#29008769", "title": "Assigning value in Golang", "body": "<p><code>TableValue</code> is a pointer to <code>[]Rows</code> (slice of <code>Rows</code>).</p>\n\n<p><code>Rows</code> is a pointer to a <code>[]TabRow</code> (slice of <code>TabRow</code>). So you can create a <code>Rows</code> value with a <a href=\"http://golang.org/ref/spec#Composite_literals\" rel=\"nofollow\">slice literal</a>, and take <a href=\"http://golang.org/ref/spec#Address_operators\" rel=\"nofollow\">its address with <code>&amp;</code></a> so you have a pointer to <code>[]TabRow</code> - this will be of type <code>Rows</code>.</p>\n\n<p>And you can obtain a pointer to <code>[]Rows</code> by using another slice literal (which creates a <code>[]Rows</code>) and take its address which will be of type <code>*[]Rows</code> which is the type of <code>TableValue</code> so you can directly assign this to <code>ResponseData.TableValue</code>.</p>\n\n<p>So you could do it like this:</p>\n\n<pre><code>var tv1 Rows = &amp;[]TabRow{TabRow{\"name11\", \"value11\", \"type11\"},\n    TabRow{\"name12\", \"value12\", \"type12\"}}\nvar tv2 Rows = &amp;[]TabRow{TabRow{\"name21\", \"value21\", \"type21\"},\n    TabRow{\"name22\", \"value22\", \"type22\"}}\n\nvar TableValue *[]Rows = &amp;[]Rows{tv1, tv2}\n\nfmt.Println(TableValue)\nfor _, v := range *TableValue {\n    fmt.Println(v)\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&amp;[0x10436180 0x10436190]\n&amp;[{name11 value11 type11} {name12 value12 type12}]\n&amp;[{name21 value21 type21} {name22 value22 type22}]\n</code></pre>\n\n<p>Try it on the <a href=\"http://play.golang.org/p/aB3a8EFKDW\" rel=\"nofollow\">Go Playground</a>.</p>\n\n<p>In the slice literal where you specify the elements (of type <code>TabRow</code>), you can even leave out the type, and it becomes this:</p>\n\n<pre><code>var tv1 Rows = &amp;[]TabRow{{\"name11\", \"value11\", \"type11\"},\n    {\"name12\", \"value12\", \"type12\"}}\nvar tv2 Rows = &amp;[]TabRow{{\"name21\", \"value21\", \"type21\"},\n    {\"name22\", \"value22\", \"type22\"}}\n</code></pre>\n\n<p>And if you use <a href=\"http://golang.org/ref/spec#Short_variable_declarations\" rel=\"nofollow\">Short variable declaration</a>, you can even shorten it further (try it on <a href=\"http://play.golang.org/p/tlEX3NEsD5\" rel=\"nofollow\">Playground</a>):</p>\n\n<pre><code>tv1 := &amp;[]TabRow{{\"name11\", \"value11\", \"type11\"}, {\"name12\", \"value12\", \"type12\"}}\ntv2 := &amp;[]TabRow{{\"name21\", \"value21\", \"type21\"}, {\"name22\", \"value22\", \"type22\"}}\nTableValue := &amp;[]Rows{tv1, tv2}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5808, "user_id": 659590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gacpu.jpg?s=128&g=1", "display_name": "Zikes", "link": "https://stackoverflow.com/users/659590/zikes"}, "is_accepted": false, "score": 0, "last_activity_date": 1426178086, "creation_date": 1426178086, "answer_id": 29015343, "question_id": 29007904, "link": "https://stackoverflow.com/questions/29007904/assigning-value-in-golang/29015343#29015343", "title": "Assigning value in Golang", "body": "<p>You could simplify your structure thus:</p>\n\n<pre><code>type ResponseData struct {\n    DataType       string      \n    Component      string      \n    ParameterName  string      \n    ParameterValue string      \n    TableValue     []*TabRow \n}\ntype TabRow struct {\n    ColName     string \n    ColValue    string \n    ColDataType string \n}\n</code></pre>\n\n<p>You could then populate it with:</p>\n\n<pre><code>resp := ResponseData {\n    DataType: \"\",\n    Component: \"\",\n    ParameterName: \"\",\n    ParameterValue: \"\",\n    TableValue: []*TabRow{\n      &amp;TabRow{\"\",\"\",\"\"},\n      &amp;TabRow{\"\",\"\",\"\"},\n      &amp;TabRow{\"\",\"\",\"\"},\n    },\n}\n</code></pre>\n\n<p>And add a new TabRow with:</p>\n\n<pre><code>resp.TableValue = append(resp.TableValue, &amp;TabRow{\"\",\"\",\"\"})\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 4033630, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-8PVmhXNiob8/AAAAAAAAAAI/AAAAAAAAAFU/2wEOa8O7R-U/photo.jpg?sz=128", "display_name": "susheel chaudhary", "link": "https://stackoverflow.com/users/4033630/susheel-chaudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1578995363, "creation_date": 1426157878, "last_edit_date": 1578995363, "question_id": 29007904, "link": "https://stackoverflow.com/questions/29007904/assigning-value-in-golang", "title": "Assigning value in Golang", "body": "<p>I create a var of type </p>\n\n<pre><code>var RespData   []ResponseData\n</code></pre>\n\n<p>ResponseData is a structure as below:</p>\n\n<pre><code>type ResponseData struct {\n    DataType       string      \n    Component      string      \n    ParameterName  string      \n    ParameterValue string      \n    TableValue     *[]Rows \n}\ntype TabRow struct {\n    ColName     string \n    ColValue    string \n    ColDataType string \n}\ntype Rows *[]TabRow\n</code></pre>\n\n<p>I want to fill <code>TableValue</code> of type <code>*[]Rows</code>.</p>\n\n<p>Can you please tell me with an example by assigning any values in the <code>TableValue</code>.</p>\n"}, {"tags": ["go", "mgo", "objectid", "go-html-template"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1426187758, "post_id": 29007560, "comment_id": 46280768, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/28262392/bson-objectid-in-a-template\">bson.ObjectId in a template</a>"}], "answers": [{"comments": [{"owner": {"reputation": 996, "user_id": 4720042, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh4.googleusercontent.com/-HJtrEmnS3s8/AAAAAAAAAAI/AAAAAAAABUo/w4vFRFBUbqE/photo.jpg?sz=128", "display_name": "Gaurav Ojha", "link": "https://stackoverflow.com/users/4720042/gaurav-ojha"}, "edited": false, "score": 0, "creation_date": 1473415979, "post_id": 29011728, "comment_id": 66142748, "body": "Also, while generating a new Object ID, you could call bson.NewObjectId().Hex() and get the string only - in case you later want to insert that to a database and you use string type _id fields."}], "tags": [], "owner": {"reputation": 18455, "user_id": 2657550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d553accfca32636d96a8d5075e85d1?s=128&d=identicon&r=PG", "display_name": "Gustavo Niemeyer", "link": "https://stackoverflow.com/users/2657550/gustavo-niemeyer"}, "is_accepted": true, "score": 16, "last_activity_date": 1426169044, "last_edit_date": 1426169044, "creation_date": 1426168488, "answer_id": 29011728, "question_id": 29007560, "link": "https://stackoverflow.com/questions/29007560/mgo-convert-bson-objectid-to-stringhex-in-html-template/29011728#29011728", "title": "mgo convert bson.objectId to string(hex) in html template", "body": "<p>The <a href=\"http://gopkg.in/mgo.v2/bson#ObjectId\">bson.ObjectId</a> type offers a <a href=\"http://gopkg.in/mgo.v2/bson#ObjectId.Hex\">Hex</a> method that will return the hex representation you are looking for, and the <a href=\"http://golang.org/pkg/html/template\">template</a> package allows one to call arbitrary methods on values you have at hand, so there's no need to store that value in duplicity anywhere else as a string.</p>\n\n<p>This would work, for example:</p>\n\n<pre><code>&lt;td&gt;{{$value.Id.Hex}}&lt;/td&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 594, "user_id": 2303808, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/cNIwW.jpg?s=128&g=1", "display_name": "Sandun Priyanka", "link": "https://stackoverflow.com/users/2303808/sandun-priyanka"}, "is_accepted": false, "score": 0, "last_activity_date": 1475675100, "creation_date": 1475675100, "answer_id": 39875688, "question_id": 29007560, "link": "https://stackoverflow.com/questions/29007560/mgo-convert-bson-objectid-to-stringhex-in-html-template/39875688#39875688", "title": "mgo convert bson.objectId to string(hex) in html template", "body": "<p>you also can define struct as follows</p>\n\n<pre><code>type Data struct {\n    Id bson.ObjectId `json:\"id\" bson:\"_id,\"`\n    Content string `json:\"content\" bson:\"content\"`\n}\n</code></pre>\n\n<p>Then you can use <code>&lt;td&gt;{{$value.Id}}&lt;/td&gt;</code> when templating html</p>\n"}], "owner": {"reputation": 6945, "user_id": 2288944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/7qryD.jpg?s=128&g=1", "display_name": "armnotstrong", "link": "https://stackoverflow.com/users/2288944/armnotstrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12924, "favorite_count": 0, "accepted_answer_id": 29011728, "answer_count": 2, "score": 9, "last_activity_date": 1475675100, "creation_date": 1426156922, "last_edit_date": 1495540467, "question_id": 29007560, "link": "https://stackoverflow.com/questions/29007560/mgo-convert-bson-objectid-to-stringhex-in-html-template", "title": "mgo convert bson.objectId to string(hex) in html template", "body": "<p>I know this problem maybe duplicate to <a href=\"https://stackoverflow.com/questions/28262392/bson-objectid-in-a-template\">this one</a>. But it hasn't get a satisfied answer till now. And I really want to draw some attention to get a solution as soon as possible. So I beg you not to  close this issue unless you have the solution and answered it in the previous one :-)</p>\n\n<p>I will describe the issue for convince:</p>\n\n<p>I have a data structure that was stored in mongodb, as known, the <code>_id</code> of mongodb is a <code>bson.ObjectId</code> type, I could retrieve that with sort of like this:</p>\n\n<pre><code>type Data struct {\n    Id bson.ObjectId `bson:\"_id,omitempty\"`\n    Content string `bson:\"content\"`\n}\n</code></pre>\n\n<p>Then I got a slice of <code>Data</code> by finding with specific query condition, and use that slice in <code>http/template</code> to render for front-end view. In order to manipulate every item in the slice, I want to use the <code>Id</code> field, but When using that with: </p>\n\n<pre><code>{{range $key, $value := .DataSlice}}\n  &lt;td&gt;{{$value.Id}}&lt;/td&gt;\n{{end}}\n</code></pre>\n\n<p>That Only gives a sort of string like <code>ObjectIdHex(\"550146d1b51bc1c208d1924d\")</code> instead of <code>550146d1b51bc1c208d1924d</code> which is nice and easy to use. </p>\n\n<p>In the <a href=\"https://stackoverflow.com/questions/28262392/bson-objectid-in-a-template\">duplicate issue</a>. The op have said that He found a way to resolve this by \"adding a <code>Id_String</code>\" to the original data structure. But I really don't know how to do this? Is that mean assign it after retrieval ? Since I use a slice to store the data retrieved, And data in a slice couldn't be changed easily. It will be more complex to do that than do the job in the front-end using jquery. But doing that just depress me with my beloved Go :-(. </p>\n\n<p>So is There a better way to do that? </p>\n"}, {"tags": ["go", "yaml"], "answers": [{"tags": [], "owner": {"reputation": 3269, "user_id": 429555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e970e0e5d130ae179f5cfa9b3079b76?s=128&d=identicon&r=PG", "display_name": "ferhat", "link": "https://stackoverflow.com/users/429555/ferhat"}, "is_accepted": true, "score": 9, "last_activity_date": 1426156058, "creation_date": 1426156058, "answer_id": 29007264, "question_id": 29007036, "link": "https://stackoverflow.com/questions/29007036/how-to-unmarshal-yaml-in-go/29007264#29007264", "title": "How to unmarshal YAML in Go", "body": "<p>Change type declaration to this:    </p>\n\n<pre><code>type AppYAML struct {\n    Runtime       string              `yaml:\"runtime,omitempty\"`\n    Handlers      []map[string]string `yaml:\"handlers,omitempty\"`\n    Env_Variables map[string]string   `yaml:\"env_variables,omitempty\"`\n}\n</code></pre>\n"}], "owner": {"reputation": 7410, "user_id": 3257971, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/726800b78cc5fe1f7dd61906ffd0eb1e?s=128&d=identicon&r=PG&f=1", "display_name": "The user with no hat", "link": "https://stackoverflow.com/users/3257971/the-user-with-no-hat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9096, "favorite_count": 2, "accepted_answer_id": 29007264, "answer_count": 1, "score": 3, "last_activity_date": 1426156058, "creation_date": 1426155479, "question_id": 29007036, "link": "https://stackoverflow.com/questions/29007036/how-to-unmarshal-yaml-in-go", "title": "How to unmarshal YAML in Go", "body": "<p>I have a hard time to unmarshal this piece of YAML in Go. The error I'm getting is <code>cannot unmarshal !!seq into map[string][]map[string][]string</code>. I've tried all kind of maps with no success (map[string]string ; []map[string]string and so on)</p>\n\n<pre><code>import (\n    \"gopkg.in/yaml.v1\"\n    \"io/ioutil\"\n)\n\ntype AppYAML struct {\n    Runtime       string                           `yaml:\"runtime,omitempty\"`\n    Handlers      map[string][]map[string][]string `yaml:\"handlers,omitempty\"`\n    Env_Variables map[string]string                `yaml:\"env_variables,omitempty\"`\n}\n\nfunc main() {\n    s := `\nruntime: go\nhandlers:\n- url: /.*\n  runtime: _go_app\n  secure: always\nenv_variables:\n  something: 'test'\n`\n\n    var a AppYAML\n    if err = yaml.Unmarshal([]byte(s), &amp;a); err != nil {\n        log.Error(err)\n        return\n    }\n}\n</code></pre>\n"}, {"tags": ["windows", "go", "mingw"], "comments": [{"owner": {"reputation": 3818, "user_id": 1247113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zRMFj.png?s=128&g=1", "display_name": "rob74", "link": "https://stackoverflow.com/users/1247113/rob74"}, "edited": false, "score": 0, "creation_date": 1426153181, "post_id": 29006078, "comment_id": 46258306, "body": "erm... that&#39;s not an error, that&#39;s a warning ;) Is this really the reason why compilation fails?"}, {"owner": {"reputation": 585, "user_id": 514863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c147458a09b0b4c8fe7d6eebff94ec7f?s=128&d=identicon&r=PG", "display_name": "Mal Curtis", "link": "https://stackoverflow.com/users/514863/mal-curtis"}, "reply_to_user": {"reputation": 3818, "user_id": 1247113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zRMFj.png?s=128&g=1", "display_name": "rob74", "link": "https://stackoverflow.com/users/1247113/rob74"}, "edited": false, "score": 0, "creation_date": 1426153625, "post_id": 29006078, "comment_id": 46258544, "body": "You make a good point. That&#39;s the last line output before it reverts back to the command prompt, so execution definitely stops."}], "answers": [{"comments": [{"owner": {"reputation": 585, "user_id": 514863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c147458a09b0b4c8fe7d6eebff94ec7f?s=128&d=identicon&r=PG", "display_name": "Mal Curtis", "link": "https://stackoverflow.com/users/514863/mal-curtis"}, "edited": false, "score": 0, "creation_date": 1426192174, "post_id": 29010887, "comment_id": 46282992, "body": "Where did you get that information from? I&#39;m using the information at the <a href=\"https://github.com/golang/go/wiki/InstallFromSource#install-c-tools\" rel=\"nofollow noreferrer\">InstallFromSource</a> wiki page, but it&#39;s possible this could refer to master (i.e. 1.5) rather than 1.4.2. That page says &quot;On Windows, install gcc with MinGW&quot;"}, {"owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "reply_to_user": {"reputation": 585, "user_id": 514863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c147458a09b0b4c8fe7d6eebff94ec7f?s=128&d=identicon&r=PG", "display_name": "Mal Curtis", "link": "https://stackoverflow.com/users/514863/mal-curtis"}, "edited": false, "score": 0, "creation_date": 1426205386, "post_id": 29010887, "comment_id": 46288319, "body": "@MalCurtis: Take another look: <a href=\"https://github.com/golang/go/wiki/InstallFromSource#install-c-tools\" rel=\"nofollow noreferrer\">InstallFromSource</a>"}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 1, "last_activity_date": 1426166291, "creation_date": 1426166291, "answer_id": 29010887, "question_id": 29006078, "link": "https://stackoverflow.com/questions/29006078/dereferencing-type-punned-pointer-error-when-compiling-go-1-4-2/29010887#29010887", "title": "&quot;dereferencing type-punned pointer&quot; error when compiling Go 1.4.2", "body": "<p>Go for Windows uses <a href=\"http://tdm-gcc.tdragon.net/\" rel=\"nofollow\">TDM-GCC</a>, a compiler suite for 32- and 64-bit Windows based on the GNU toolchain.</p>\n\n<p>For example,</p>\n\n<pre><code>C:\\&gt;gcc --version\ngcc (tdm64-1) 4.9.2\n</code></pre>\n"}], "owner": {"reputation": 585, "user_id": 514863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c147458a09b0b4c8fe7d6eebff94ec7f?s=128&d=identicon&r=PG", "display_name": "Mal Curtis", "link": "https://stackoverflow.com/users/514863/mal-curtis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 2, "accepted_answer_id": 29010887, "answer_count": 1, "score": 1, "last_activity_date": 1426166291, "creation_date": 1426152826, "last_edit_date": 1426154409, "question_id": 29006078, "link": "https://stackoverflow.com/questions/29006078/dereferencing-type-punned-pointer-error-when-compiling-go-1-4-2", "title": "&quot;dereferencing type-punned pointer&quot; error when compiling Go 1.4.2", "body": "<p>I'm compiling Go from source on Windows with MinGW. When running <code>make.bat</code>, I get the following error:</p>\n\n<pre><code># Building C bootstrap tool.\ncmd/dist\ncmd/dist/windows.c: In function `errstr`:\ncmd/dist/windows.c:119: warning: deferencing type-punned pointer will break strict-aliasing rules\n</code></pre>\n\n<p>I'm not very experienced with compiling on Windows, and it appears like this issue isn't very common, as Google doesn't return anything for it specific to Go.</p>\n\n<p>Edit 1: Admittedly this is a warning, not an error. However a check in the code <code>if errorlevel 1 goto fail</code> appears to consider this output an error, and stops the progress of the script.</p>\n"}, {"tags": ["go", "dependencies", "packages"], "answers": [{"comments": [{"owner": {"reputation": 605, "user_id": 2422033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jAnBl.jpg?s=128&g=1", "display_name": "mquemazz", "link": "https://stackoverflow.com/users/2422033/mquemazz"}, "edited": false, "score": 0, "creation_date": 1426154624, "post_id": 29006574, "comment_id": 46259126, "body": "but this is not what I need, I know how to structure your code but what I am saying is how to remove a duplication of a library, not how to fetch that library, and I don&#39;t need to run go git because I am using IntelliJ Idea and I can fetch any library automatically"}, {"owner": {"reputation": 517, "user_id": 4571524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4263217cfc557061c3cbb5d506983022?s=128&d=identicon&r=PG&f=1", "display_name": "gdg", "link": "https://stackoverflow.com/users/4571524/gdg"}, "reply_to_user": {"reputation": 605, "user_id": 2422033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jAnBl.jpg?s=128&g=1", "display_name": "mquemazz", "link": "https://stackoverflow.com/users/2422033/mquemazz"}, "edited": false, "score": 0, "creation_date": 1426156670, "post_id": 29006574, "comment_id": 46260368, "body": "Sorry i don&#39;t get of what duplication are you talking about, when you build if you require a lib it will be included once, even if it&#39;s included in every sources and libs"}, {"owner": {"reputation": 605, "user_id": 2422033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jAnBl.jpg?s=128&g=1", "display_name": "mquemazz", "link": "https://stackoverflow.com/users/2422033/mquemazz"}, "edited": false, "score": 0, "creation_date": 1426157461, "post_id": 29006574, "comment_id": 46260853, "body": "okay look at your example, yourlibB is a package that uses libc, so forget about the project for a moment and look only at libB so in Lib B I will have this structure:     libB/       src/ gofiles.go , libC     Project A -&gt; src-&gt; libC,lbB,somgofiles.go  This is the structure"}, {"owner": {"reputation": 517, "user_id": 4571524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4263217cfc557061c3cbb5d506983022?s=128&d=identicon&r=PG&f=1", "display_name": "gdg", "link": "https://stackoverflow.com/users/4571524/gdg"}, "reply_to_user": {"reputation": 605, "user_id": 2422033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jAnBl.jpg?s=128&g=1", "display_name": "mquemazz", "link": "https://stackoverflow.com/users/2422033/mquemazz"}, "edited": false, "score": 1, "creation_date": 1426158676, "post_id": 29006574, "comment_id": 46261681, "body": "your example is wrong, src must be the root of all, imported libs are placed all in your GOPATH/src folder. In your example paths libB and libC are assumed as separated GOPATHs, and not GOPATH/src/libB and GOPATH/src/libC"}, {"owner": {"reputation": 517, "user_id": 4571524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4263217cfc557061c3cbb5d506983022?s=128&d=identicon&r=PG&f=1", "display_name": "gdg", "link": "https://stackoverflow.com/users/4571524/gdg"}, "reply_to_user": {"reputation": 605, "user_id": 2422033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jAnBl.jpg?s=128&g=1", "display_name": "mquemazz", "link": "https://stackoverflow.com/users/2422033/mquemazz"}, "edited": false, "score": 0, "creation_date": 1426159216, "post_id": 29006574, "comment_id": 46262030, "body": "Probably your misunderstanding derives from the intellij idea way to make projects. Give a try to <a href=\"https://github.com/visualfc/liteide\" rel=\"nofollow noreferrer\">LiteIDE</a> instead"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "reply_to_user": {"reputation": 605, "user_id": 2422033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jAnBl.jpg?s=128&g=1", "display_name": "mquemazz", "link": "https://stackoverflow.com/users/2422033/mquemazz"}, "edited": false, "score": 1, "creation_date": 1426188212, "post_id": 29006574, "comment_id": 46280968, "body": "@user2422033 if you insist on using non-standard (and broken) workspace layouts then you&#39;re on your own and you shouldn&#39;t expect help from the standard tools. In Go unique packages should have a unique location and a unique import path and then everything works as intended."}], "tags": [], "owner": {"reputation": 517, "user_id": 4571524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4263217cfc557061c3cbb5d506983022?s=128&d=identicon&r=PG&f=1", "display_name": "gdg", "link": "https://stackoverflow.com/users/4571524/gdg"}, "is_accepted": false, "score": 5, "last_activity_date": 1426154202, "creation_date": 1426154202, "answer_id": 29006574, "question_id": 29006070, "link": "https://stackoverflow.com/questions/29006070/using-libraries-in-golang/29006574#29006574", "title": "using libraries in Golang", "body": "<p>If you are talking about third-party libraries, in go is very simple to do that,\njust put the import in your source code, like:</p>\n\n<pre><code>import \"github.com/somepackage/somelib\"\n</code></pre>\n\n<p>and from the command line in your working directory run:</p>\n\n<pre><code>go get\n</code></pre>\n\n<p>the the source code of the libraries will be downloaded in the src directory of your $GOPATH.\nIf you want to create your own lib instead, just create the folder named as the lib in $GOPATH/src and put the code in this folder.</p>\n\n<p>The folders structure is:</p>\n\n<pre><code>$GOPATH/\nsrc/\n    github.com/\n        somepackage/\n            somelib/\n                somelib.go\n    yourlibB/\n        yourlibB.go -&gt; //import somelib here\n    yourlibC/\n        yourlibC.go -&gt; //import libB here\n    yourmainprogramA/\n        yourmainprogramA.go -&gt; //import somelib, libC and libB here\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 605, "user_id": 2422033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jAnBl.jpg?s=128&g=1", "display_name": "mquemazz", "link": "https://stackoverflow.com/users/2422033/mquemazz"}, "edited": false, "score": 0, "creation_date": 1426173324, "post_id": 29012481, "comment_id": 46271902, "body": "Trust me I know the structure but imagine that I didn&#39;t use LibB okay and I am using LibC, and everything is fine, and then I had a new use case for my project where I need to go get LibB, and LibB(which is a public Library on git hub let us say) it uses LibC implicitly because of some functionality that LibC provides ok, no I want to use LibB and LibC in my project, Now I have to possibilities: 1- remove LibC and use it indirectly from LibB. 2-keep it and then I will have a libs duplication, Is that correct ?"}, {"owner": {"reputation": 103, "user_id": 1723911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9449a5fac4e415ad9ead4984365ccfa?s=128&d=identicon&r=PG", "display_name": "snwight", "link": "https://stackoverflow.com/users/1723911/snwight"}, "edited": false, "score": 0, "creation_date": 1426182372, "post_id": 29012481, "comment_id": 46277827, "body": "The imported package (LibC in this example) will only appear once in your compiled Go executable, and once in your $GOPATH/src/github.com/LibC archive. You may import that 3rd party package in any number of implementation modules, only one instance of the compiled object will be added to your final executable Go program."}, {"owner": {"reputation": 605, "user_id": 2422033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jAnBl.jpg?s=128&g=1", "display_name": "mquemazz", "link": "https://stackoverflow.com/users/2422033/mquemazz"}, "edited": false, "score": 0, "creation_date": 1426284309, "post_id": 29012481, "comment_id": 46325493, "body": "Thank you This is all what I needed to hear, this little notice, that will appears once, the thing is I don&#39;t feel comfortable with the code seeing all that resource files as libs I am used to jars(because I come from a Java background) that&#39;s why it was odd for me a little bit, but yeah this is how things work in go and its fair enough"}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 9, "last_activity_date": 1426170546, "creation_date": 1426170546, "answer_id": 29012481, "question_id": 29006070, "link": "https://stackoverflow.com/questions/29006070/using-libraries-in-golang/29012481#29012481", "title": "using libraries in Golang", "body": "<p>In Go, there is no duplication of packages.</p>\n\n<p>First, you should read about Go workspaces in <a href=\"http://golang.org/doc/code.html\" rel=\"noreferrer\">How to Write Go Code</a>.</p>\n\n<p>From your question, your directory structure should look something like this:</p>\n\n<pre><code>gopath (gopath is the path of a directory in your $GOPATH list)\n\u251c\u2500\u2500 bin\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 projecta\n\u251c\u2500\u2500 pkg\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 linux_amd64\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 projecta\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 libb.a\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 libc.a\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 projecta\n     \u00a0\u00a0 \u251c\u2500\u2500 a.go\n     \u00a0\u00a0 \u251c\u2500\u2500 libb\n     \u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 b.go\n     \u00a0\u00a0 \u2514\u2500\u2500 libc\n     \u00a0\u00a0     \u2514\u2500\u2500 c.go\n</code></pre>\n\n<p>Where,</p>\n\n<p><code>gopath/src/projecta/a.go</code>:</p>\n\n<pre><code>package main\n\nimport (\n    \"projecta/libb\"\n    \"projecta/libc\"\n)\n\nfunc a() {\n    libb.B()\n    libc.C()\n}\n\nfunc main() { a() }\n</code></pre>\n\n<p><code>gopath/src/projecta/libb/b.go</code>:</p>\n\n<pre><code>package libb\n\nimport (\n    \"projecta/libc\"\n)\n\nfunc B() { libc.C() }\n</code></pre>\n\n<p><code>gopath/src/projecta/libc/c.go</code>:</p>\n\n<pre><code>package libc\n\nfunc C() {}\n</code></pre>\n"}], "owner": {"reputation": 605, "user_id": 2422033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jAnBl.jpg?s=128&g=1", "display_name": "mquemazz", "link": "https://stackoverflow.com/users/2422033/mquemazz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3274, "favorite_count": 3, "accepted_answer_id": 29012481, "answer_count": 2, "score": 3, "last_activity_date": 1426170546, "creation_date": 1426152786, "last_edit_date": 1426159962, "question_id": 29006070, "link": "https://stackoverflow.com/questions/29006070/using-libraries-in-golang", "title": "using libraries in Golang", "body": "<p>First of all and to be clear I come from the Java world, and I have been programming on go for a while and I really love it.</p>\n\n<p>I have a small question about the packaging system and the imports, if I am importing a library which uses another library and I am already using that library in my project, how can I eliminate the duplication(if its possible),</p>\n\n<p>in other words:\nA is a the main program, C and B are libraries, and then:\nC was added to A\nB uses C </p>\n\n<p>and then\nB was also added to A </p>\n\n<pre><code>AProject/\n    src/\n        LibC/\n            src/\n                somefiles.go\n        LibB/\n            src/\n                LibC\n                somefiles.go\n        app.go\n</code></pre>\n\n<p>So now I have two libraries of C one in A since the beginning and one in B because B is dependent on C.</p>\n\n<p>I know its a little bit confusing but in the Java world we have Ant and Maven and those build tools make it really easy to us to handle the dependencies.</p>\n\n<p>Any thoughts? </p>\n"}, {"tags": ["arrays", "struct", "go", "slice"], "answers": [{"comments": [{"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 5055, "user_id": 1903257, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/op6HW.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1903257/michael"}, "edited": false, "score": 1, "creation_date": 1463575122, "post_id": 29006008, "comment_id": 62122128, "body": "@Michael The <code>...</code> tells that you have a slice which you want to pass to be the value of the <i>variadic</i> parameter. <a href=\"https://golang.org/pkg/builtin/#append\" rel=\"nofollow noreferrer\"><code>append()</code></a> has a variadic parameter which is normally called by <i>enumerating</i> the elements, but in this case we call it by <i>having</i> the elements in a slice and <i>passing</i> that slice, and we want the elements of the slice to be the values of the variadic parameter (and we don&#39;t want the slice itself to be a single element for the variadic parameter)."}, {"owner": {"reputation": 281, "user_id": 3413528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pZJCW.png?s=128&g=1", "display_name": "Alec Istomin", "link": "https://stackoverflow.com/users/3413528/alec-istomin"}, "edited": false, "score": 0, "creation_date": 1585203033, "post_id": 29006008, "comment_id": 107680761, "body": "break from the loop, since you want to delete a single element ?"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 45, "last_activity_date": 1426153914, "last_edit_date": 1426153914, "creation_date": 1426152598, "answer_id": 29006008, "question_id": 29005825, "link": "https://stackoverflow.com/questions/29005825/how-to-remove-element-of-struct-array-in-loop-in-golang/29006008#29006008", "title": "How to remove element of struct array in loop in golang", "body": "<p>Quoting from the <a href=\"https://github.com/golang/go/wiki/SliceTricks\">Slice Tricks</a> page deleting the element at index <code>i</code>:</p>\n\n<pre><code>a = append(a[:i], a[i+1:]...)\n// or\na = a[:i+copy(a[i:], a[i+1:])]\n</code></pre>\n\n<p>Note that if you plan to delete elements from the slice you're currently looping over, that may cause problems. And it does if the element you remove is the current one (or a previous element already looped over) because after the deletion all subsequent elements are shifted, but the <code>range</code> loop does not know about this and will still increment the index and you skip one element.</p>\n\n<p>You can avoid this by using a downward loop:</p>\n\n<pre><code>for i := len(config.Applications) - 1; i &gt;= 0; i-- {\n    application := config.Applications[i]\n    // Condition to decide if current element has to be deleted:\n    if haveToDelete {\n        config.Applications = append(config.Applications[:i],\n                config.Applications[i+1:]...)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 517, "user_id": 4571524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4263217cfc557061c3cbb5d506983022?s=128&d=identicon&r=PG&f=1", "display_name": "gdg", "link": "https://stackoverflow.com/users/4571524/gdg"}, "is_accepted": false, "score": 6, "last_activity_date": 1426152714, "creation_date": 1426152714, "answer_id": 29006042, "question_id": 29005825, "link": "https://stackoverflow.com/questions/29005825/how-to-remove-element-of-struct-array-in-loop-in-golang/29006042#29006042", "title": "How to remove element of struct array in loop in golang", "body": "<p>You are getting this error because you are doing a loop over a slice with an inital range of X length that became X-n because you remove some elements during loop.</p>\n\n<p>If you want to delete an item at a specific index from a slice, you can do it this way:</p>\n\n<pre><code>sliceA = append(sliceA[:indexOfElementToRemove], sliceA[indexOfElementToRemove+1:]...)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6532619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ce5dbf98b241b37d4c4402824b166b5?s=128&d=identicon&r=PG&f=1", "display_name": "treigerm", "link": "https://stackoverflow.com/users/6532619/treigerm"}, "is_accepted": false, "score": 4, "last_activity_date": 1467468672, "creation_date": 1467468672, "answer_id": 38161077, "question_id": 29005825, "link": "https://stackoverflow.com/questions/29005825/how-to-remove-element-of-struct-array-in-loop-in-golang/38161077#38161077", "title": "How to remove element of struct array in loop in golang", "body": "<p>This question is a bit older but I haven't found another answer on StackOverflow which mentions the following trick from the <a href=\"https://github.com/golang/go/wiki/SliceTricks\" rel=\"nofollow\">Slice Tricks</a> to filter a list:  </p>\n\n<pre><code>b := a[:0]\nfor _, x := range a {\n    if f(x) {\n        b = append(b, x)\n    }\n}\n</code></pre>\n\n<p>So in this case a function which deletes certain elements could look like this:</p>\n\n<pre><code>func removeApplications(apps []Applications) []Applications {\n    filteredApps := apps[:0]\n    for _, app := apps {\n        if !removeApp {\n            filteredApps = append(filteredApps, app)\n        }\n    }\n    return filteredApps\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2555, "user_id": 8457803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o9dhW.jpg?s=128&g=1", "display_name": "Martin Prestone", "link": "https://stackoverflow.com/users/8457803/martin-prestone"}, "is_accepted": false, "score": 1, "last_activity_date": 1502622281, "creation_date": 1502622281, "answer_id": 45659666, "question_id": 29005825, "link": "https://stackoverflow.com/questions/29005825/how-to-remove-element-of-struct-array-in-loop-in-golang/45659666#45659666", "title": "How to remove element of struct array in loop in golang", "body": "<p>I think the simple way is    </p>\n\n<pre><code>var (\n  slice = []int{1,2,3,4,5}\n  pos int\n)\n    for _, i := range slice {\n        if i == 3 {\n            slice = append(slice[:pos], slice[pos+1:]...)\n            if pos &gt; 0 {\n                pos = pos - 1\n            }\n            continue\n        }\n        pos++\n    }\n</code></pre>\n\n<p>here is...\n<a href=\"https://play.golang.org/p/pK3B5Mii9k\" rel=\"nofollow noreferrer\">https://play.golang.org/p/pK3B5Mii9k</a></p>\n"}], "owner": {"reputation": 19574, "user_id": 350294, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/uPBSX.jpg?s=128&g=1", "display_name": "Alex Pliutau", "link": "https://stackoverflow.com/users/350294/alex-pliutau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23504, "favorite_count": 7, "answer_count": 4, "score": 20, "last_activity_date": 1502622281, "creation_date": 1426152042, "question_id": 29005825, "link": "https://stackoverflow.com/questions/29005825/how-to-remove-element-of-struct-array-in-loop-in-golang", "title": "How to remove element of struct array in loop in golang", "body": "<p><strong>Problem</strong></p>\n\n<p>I have array of structs:</p>\n\n<pre><code>type Config struct {\n  Applications []Application\n}\n</code></pre>\n\n<p>Note: Config - is a struct for json.Decode.</p>\n\n<pre><code>config = new(Config)\n_ = decoder.Decode(&amp;config)\n</code></pre>\n\n<p>In loop I have some condition and element deletion by key.</p>\n\n<pre><code>for i, application := range config.Applications {\n  if i == 1 {\n    config.Applications = _removeApplication(i, config.Applications)\n  }\n}\n\nfunc _removeApplication(i int, list []Application) []Application {\n  if i &lt; len(list)-1 {\n    list = append(list[:i], list[i+1:]...)\n  } else {\n    log.Print(list[i].Name)\n    list = list[:i]\n  }\n\n  return list\n}\n</code></pre>\n\n<p>But always I have \"out of range\" error. What is the best way to delete element by key from array of structs?</p>\n"}]