[{"tags": ["go", "workspace", "microservices"], "comments": [{"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 5, "creation_date": 1458182010, "post_id": 36049030, "comment_id": 59749579, "body": "If you put app into GOPATH and it will just work."}, {"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "reply_to_user": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 1, "creation_date": 1458205979, "post_id": 36049030, "comment_id": 59759162, "body": "As @kostya said, since Go has a dependency management relying on $GOPATH, I&#39;d put app/ into GOPATH. Otherwise, include the packages in posts/ and use relative imports."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 1254810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079b4c2397c620136ab055d9412f27d2?s=128&d=identicon&r=PG", "display_name": "ugurozgen", "link": "https://stackoverflow.com/users/1254810/ugurozgen"}, "is_accepted": false, "score": 2, "last_activity_date": 1458571461, "last_edit_date": 1458571461, "creation_date": 1458209044, "answer_id": 36057246, "question_id": 36049030, "link": "https://stackoverflow.com/questions/36049030/golang-workspaces-in-practice/36057246#36057246", "title": "Golang Workspaces In Practice", "body": "<p>just set GOPATH according to your go files:</p>\n\n<blockquote>\n  <p>GOPATH=$PROJECT_PATH/app/posts </p>\n</blockquote>\n\n<p>then put your source codes under</p>\n\n<blockquote>\n  <p>$PROJECT_PATH/app/posts/src/package</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1275, "user_id": 3044418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af7f92727ba68dfe3edd434be8ecb309?s=128&d=identicon&r=PG&f=1", "display_name": "Anfernee", "link": "https://stackoverflow.com/users/3044418/anfernee"}, "is_accepted": true, "score": 2, "last_activity_date": 1458575655, "last_edit_date": 1458575655, "creation_date": 1458228259, "answer_id": 36064890, "question_id": 36049030, "link": "https://stackoverflow.com/questions/36049030/golang-workspaces-in-practice/36064890#36064890", "title": "Golang Workspaces In Practice", "body": "<p>You can put app/ in $GOPATH/src. Then whenever you're ready to build, you specify the path of your source files, relative to where they are in GOPATH. </p>\n\n<p>For example:</p>\n\n<p>if your app source is in <code>$GOPATH/src/app/</code> and your .go files are in <code>$GOPATH/src/app/posts/</code> then you can build a source (lets say posts.go in app/posts/) with <code>go build $GOPATH/src/app/posts/posts.go</code> or better <code>go build posts/posts.go</code> with <code>app/</code> as your current working directory. </p>\n"}, {"tags": [], "owner": {"reputation": 10841, "user_id": 460417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a381152cd980d15f58e0016c996ab254?s=128&d=identicon&r=PG", "display_name": "Tommaso Barbugli", "link": "https://stackoverflow.com/users/460417/tommaso-barbugli"}, "is_accepted": false, "score": 7, "last_activity_date": 1518104848, "creation_date": 1518104848, "answer_id": 48689453, "question_id": 36049030, "link": "https://stackoverflow.com/questions/36049030/golang-workspaces-in-practice/48689453#48689453", "title": "Golang Workspaces In Practice", "body": "<p>Using a different GOPATH per project is a very good and simple approach. In my experience this also works better than <code>vendor</code> since you can also install binaries and keep them on different versions.</p>\n\n<p><a href=\"https://github.com/GetStream/vg\" rel=\"noreferrer\">vg</a> is a simple tool that helps managing workspaces, it integrates with your shell and detects automatically workspaces when you <code>cd</code> them.</p>\n\n<p>Disclaimer: I am one of the authors of the tool.</p>\n"}, {"tags": [], "owner": {"reputation": 770, "user_id": 2100305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8fc185f148ce14611ff3dbf19a1d68?s=128&d=identicon&r=PG", "display_name": "Alice Heaton", "link": "https://stackoverflow.com/users/2100305/alice-heaton"}, "is_accepted": false, "score": 4, "last_activity_date": 1543693797, "last_edit_date": 1592644375, "creation_date": 1543693797, "answer_id": 53574498, "question_id": 36049030, "link": "https://stackoverflow.com/questions/36049030/golang-workspaces-in-practice/53574498#53574498", "title": "Golang Workspaces In Practice", "body": "<p>As of Go 1.11, go now has <a href=\"https://golang.org/doc/go1.11#modules\" rel=\"nofollow noreferrer\">modules</a>. Amongst other things, modules enable you to have isolated source trees (with any number of packages and their own dependencies) outside of your <code>$GOPATH</code>.</p>\n<p>You create a new module by running <code>go mod init &lt;module name&gt;</code> (you must be outside of <code>$GOPATH/src</code> to do this). This will create a <code>go.mod</code> file in the current folder, and any <code>go</code> command you run in that folder (or any folder beneath) will use that folder as your project root.</p>\n<p>You can read more about using go modules as workspaces in this post: <a href=\"https://aliceh75.github.io/using-modules-for-workspaces-in-golang\" rel=\"nofollow noreferrer\">https://aliceh75.github.io/using-modules-for-workspaces-in-golang</a> (disclaimer: I wrote it), and you can read more about Go modules on the Go Modules Wiki:\n<a href=\"https://github.com/golang/go/wiki/Modules\" rel=\"nofollow noreferrer\">https://github.com/golang/go/wiki/Modules</a></p>\n"}], "owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 934, "favorite_count": 0, "accepted_answer_id": 36064890, "answer_count": 4, "score": 1, "last_activity_date": 1543696824, "creation_date": 1458171471, "last_edit_date": 1543696824, "question_id": 36049030, "link": "https://stackoverflow.com/questions/36049030/golang-workspaces-in-practice", "title": "Golang Workspaces In Practice", "body": "<p>According to the Go documentation they would like you to have a workspace that you should put all their projects in.<sup>1</sup> However, as far as I can tell, this all falls apart as soon as you want to make a project that does not use Go exclusively. </p>\n\n<p>Take a project where it is made up of many micoservices for example. Lets say that it is structured like this:</p>\n\n<pre><code>app/\n    authentication/ (Using rust)\n    users/ (Using NodeJS)\n    posts/ (Using Go)\n</code></pre>\n\n<p>Only one part of the app would be written in Go, and that part is nested in a subdirectory of the app. How would I apply the Go workspace philosophy to this situation?</p>\n\n<hr>\n\n<ol>\n<li><a href=\"https://golang.org/doc/code.html#Workspaces\" rel=\"nofollow noreferrer\">https://golang.org/doc/code.html#Workspaces</a></li>\n</ol>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 3343, "user_id": 442396, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2c7ec89489bfcad5a94119f7bd9a1abf?s=128&d=identicon&r=PG", "display_name": "Sentinel", "link": "https://stackoverflow.com/users/442396/sentinel"}, "edited": false, "score": 1, "creation_date": 1538413576, "post_id": 36044581, "comment_id": 92126179, "body": "And then restart VS Code once git installed."}, {"owner": {"reputation": 6454, "user_id": 2153777, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/L67zf.jpg?s=128&g=1", "display_name": "E235", "link": "https://stackoverflow.com/users/2153777/e235"}, "edited": false, "score": 1, "creation_date": 1562827948, "post_id": 36044581, "comment_id": 100501722, "body": "After you installed it, go to <code>System Properties</code> (<code>sysdm.cpl</code> from Run) -&gt; <code>Environment Variables</code> -&gt; edit <code>Path</code> from the <code>System variables</code> and add the path (<code>..\\Git\\bin</code>) of the installation folder of <code>git.exe</code>. See @Variety_Davids answer."}, {"owner": {"reputation": 1759, "user_id": 4417818, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100000126145913/picture?type=large", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/4417818/nilesh"}, "edited": false, "score": 1, "creation_date": 1589962105, "post_id": 36044581, "comment_id": 109497244, "body": "Why one should install complete <b>git</b> just to fetch repositories?"}, {"owner": {"reputation": 3761, "user_id": 142020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vKJEv.png?s=128&g=1", "display_name": "T0xicCode", "link": "https://stackoverflow.com/users/142020/t0xiccode"}, "reply_to_user": {"reputation": 1759, "user_id": 4417818, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100000126145913/picture?type=large", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/4417818/nilesh"}, "edited": false, "score": 0, "creation_date": 1590012059, "post_id": 36044581, "comment_id": 109524085, "body": "@Nilesh go downloads the source code of the dependencies through their declared version control system. If all your dependencies and your code were version controlled using mercurial instead, you wouldn&#39;t need git at all, just mercurial."}, {"owner": {"reputation": 1759, "user_id": 4417818, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100000126145913/picture?type=large", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/4417818/nilesh"}, "edited": false, "score": 0, "creation_date": 1590034361, "post_id": 36044581, "comment_id": 109529668, "body": "Yes I understand, go uses VCS to download source code. My question was <b>Why go-get cannot download source code without installation of git</b>. To develop simple project go enforces users to install VCS, this looks so opinionated to me!"}, {"owner": {"reputation": 3761, "user_id": 142020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vKJEv.png?s=128&g=1", "display_name": "T0xicCode", "link": "https://stackoverflow.com/users/142020/t0xiccode"}, "edited": false, "score": 0, "creation_date": 1590206003, "post_id": 36044581, "comment_id": 109599738, "body": "<code>go get</code> requires git <b>if and only if</b> at least one of your project&#39;s dependencies hosts their source code in a git repository. If none of your dependencies uses git, then go will happily work without git being required. Go get doesn&#39;t know how to download source code, but it knows how to call a VCS client that knows how to download source code in a standard fashion. By doing this, go avoided introducing another standard for how source code is distributed."}], "tags": [], "owner": {"reputation": 3761, "user_id": 142020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vKJEv.png?s=128&g=1", "display_name": "T0xicCode", "link": "https://stackoverflow.com/users/142020/t0xiccode"}, "is_accepted": true, "score": 37, "last_activity_date": 1458154567, "last_edit_date": 1458154567, "creation_date": 1458154473, "answer_id": 36044581, "question_id": 36044275, "link": "https://stackoverflow.com/questions/36044275/golang-go-get-command-showing-go-missing-git-command-error/36044581#36044581", "title": "golang &quot;go get&quot; command showing &quot;go: missing Git command&quot; error", "body": "<p><code>go get</code> requires git if any of the packages lives (and is being fetched) from a git repository. For Windows, you can install git from the <a href=\"https://git-scm.com/download/win\">git website</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 9490638, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xsNg9w_kIZ4/AAAAAAAAAAI/AAAAAAAAAGM/pbWMLJtt7OU/photo.jpg?sz=128", "display_name": "Variety_Davids", "link": "https://stackoverflow.com/users/9490638/variety-davids"}, "is_accepted": false, "score": 6, "last_activity_date": 1523539274, "last_edit_date": 1523539274, "creation_date": 1523538741, "answer_id": 49797526, "question_id": 36044275, "link": "https://stackoverflow.com/questions/36044275/golang-go-get-command-showing-go-missing-git-command-error/49797526#49797526", "title": "golang &quot;go get&quot; command showing &quot;go: missing Git command&quot; error", "body": "<p>The go get fetching of source code is done by using one of the following tools expected to be found on your system either git, svn, hg.</p>\n\n<p>Install git from this link <a href=\"https://git-scm.com/downloads\" rel=\"noreferrer\">https://git-scm.com/downloads</a></p>\n\n<p>After installing git you should navigate to the environment variables setting and add the path of git.exe(executable file) which is found in the bin. So the path should look like this \"C:\\Program Files\\Git\\bin\". Restart your IDE and the command should be working.</p>\n"}, {"comments": [{"owner": {"reputation": 19204, "user_id": 638471, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vSVkO.png?s=128&g=1", "display_name": "vbence", "link": "https://stackoverflow.com/users/638471/vbence"}, "edited": false, "score": 0, "creation_date": 1550599294, "post_id": 50197863, "comment_id": 96324709, "body": "OP is using windows."}], "tags": [], "owner": {"reputation": 455, "user_id": 3738751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IWssd.png?s=128&g=1", "display_name": "Pankaj Singh", "link": "https://stackoverflow.com/users/3738751/pankaj-singh"}, "is_accepted": false, "score": 3, "last_activity_date": 1525596762, "last_edit_date": 1525596762, "creation_date": 1525596283, "answer_id": 50197863, "question_id": 36044275, "link": "https://stackoverflow.com/questions/36044275/golang-go-get-command-showing-go-missing-git-command-error/50197863#50197863", "title": "golang &quot;go get&quot; command showing &quot;go: missing Git command&quot; error", "body": "<p>Install git.</p>\n\n<p>for Ubuntu, you can use the command</p>\n\n<pre><code>sudo apt-get install git\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19204, "user_id": 638471, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vSVkO.png?s=128&g=1", "display_name": "vbence", "link": "https://stackoverflow.com/users/638471/vbence"}, "edited": false, "score": 0, "creation_date": 1550599333, "post_id": 53872100, "comment_id": 96324739, "body": "OP is using windows."}], "tags": [], "owner": {"reputation": 1761, "user_id": 4813600, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/D3xtB.jpg?s=128&g=1", "display_name": "alamin", "link": "https://stackoverflow.com/users/4813600/alamin"}, "is_accepted": false, "score": 27, "last_activity_date": 1558586236, "last_edit_date": 1558586236, "creation_date": 1545321635, "answer_id": 53872100, "question_id": 36044275, "link": "https://stackoverflow.com/questions/36044275/golang-go-get-command-showing-go-missing-git-command-error/53872100#53872100", "title": "golang &quot;go get&quot; command showing &quot;go: missing Git command&quot; error", "body": "<h1>Locally</h1>\n\n<p>Installing git will solve the issue.</p>\n\n<ul>\n<li>for mac <code>brew install git</code></li>\n<li>for ubuntu <code>sudo apt-get install git</code></li>\n<li>for arch linux <code>pacman -S git</code></li>\n<li>for windows install git according to the instructions from the <code>git installation page</code>.</li>\n</ul>\n\n<h1>In Docker</h1>\n\n<p>If you are getting while running in building docker image then you should install git there. [I got this issue while building docker image]</p>\n\n<p>For Example: In my Dockerfile</p>\n\n<pre><code>FROM golang:alpine \nRUN apk add git\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 746, "user_id": 1392578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07c9a0c65de5f7e6e6abbed858dc3fc5?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/1392578/neil"}, "is_accepted": false, "score": 1, "last_activity_date": 1582225730, "creation_date": 1582225730, "answer_id": 60326980, "question_id": 36044275, "link": "https://stackoverflow.com/questions/36044275/golang-go-get-command-showing-go-missing-git-command-error/60326980#60326980", "title": "golang &quot;go get&quot; command showing &quot;go: missing Git command&quot; error", "body": "<p>If you're running this as a Jenkins pipeline script, start your Docker image like:</p>\n\n<pre><code>node('docker') {\n  docker.image('golang:1.14rc1-alpine3.11').inside(' -u 0') {\n    sh 'apk add curl'\n    ...\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 5726, "user_id": 2976830, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/OT27A.jpg?s=128&g=1", "display_name": "Yeahia2508", "link": "https://stackoverflow.com/users/2976830/yeahia2508"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72308, "favorite_count": 8, "accepted_answer_id": 36044581, "answer_count": 5, "score": 29, "last_activity_date": 1587626432, "creation_date": 1458153516, "question_id": 36044275, "link": "https://stackoverflow.com/questions/36044275/golang-go-get-command-showing-go-missing-git-command-error", "title": "golang &quot;go get&quot; command showing &quot;go: missing Git command&quot; error", "body": "<p>I'm new in go lang. Trying to import a go library using \"go get\" command but in cmd getting this error:</p>\n\n<pre><code>go: missing Git command. See https://golang.org/s/gogetcmd\npackage github.com/ttacon/chalk: exec: \"git\": executable file not found in  %PATH%\n</code></pre>\n\n<p><strong>My Go Env:</strong></p>\n\n<pre><code>set GOARCH=amd64\nset GOBIN=\nset GOEXE=.exe\nset GOHOSTARCH=amd64\nset GOHOSTOS=windows\nset GOOS=windows\nset GOPATH=F:\\Works\\Go\nset GORACE=\nset GOROOT=C:\\Go\nset GOTOOLDIR=C:\\Go\\pkg\\tool\\windows_amd64\nset GO15VENDOREXPERIMENT=1\nset CC=gcc\nset GOGCCFLAGS=-m64 -mthreads -fmessage-length=0\nset CXX=g++\nset CGO_ENABLED=1\n</code></pre>\n\n<p>What's wrong with my Go environment?</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": true, "score": 6, "last_activity_date": 1458151847, "creation_date": 1458151847, "answer_id": 36043703, "question_id": 36043575, "link": "https://stackoverflow.com/questions/36043575/what-is-the-difference-between-the-equality-operator-and-deepequals-in-go/36043703#36043703", "title": "What is the difference between the equality operator and deepEquals in go?", "body": "<p>The thing that you are missing is pointers. When doing a <code>==</code> on pointer, should you check the pointer value (two memory addresses) or the pointed value (two vars) ? And when comparing slices, or maps (both of which can be assimilated to a struct made of pointers) ?</p>\n\n<p>The decision of golang's authors was to do a strict comparison with the <code>==</code> operator, and to provide the <code>reflect.DeepEqual</code> method for those that want to compare the content of their slices.</p>\n\n<p>I personnally make an extensive use of <code>reflect.DeepEquals</code> in tests, as the output value of a function may be a pointer, but waht I really want to compare is the content of the output value.</p>\n"}], "owner": {"reputation": 2809, "user_id": 835058, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/bkxta.jpg?s=128&g=1", "display_name": "mogronalol", "link": "https://stackoverflow.com/users/835058/mogronalol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "accepted_answer_id": 36043703, "answer_count": 1, "score": 5, "last_activity_date": 1458151847, "creation_date": 1458151502, "question_id": 36043575, "link": "https://stackoverflow.com/questions/36043575/what-is-the-difference-between-the-equality-operator-and-deepequals-in-go", "title": "What is the difference between the equality operator and deepEquals in go?", "body": "<p>After reading <a href=\"https://golang.org/ref/spec#Comparison_operators\" rel=\"noreferrer\">the spec</a>, I have got:</p>\n\n<blockquote>\n  <p>Struct values are comparable if all their fields are comparable. Two struct values are equal if their corresponding non-blank fields are equal.</p>\n</blockquote>\n\n<p>This implies to me that doing <code>structA == structB</code> would mean that the values of each non-blank field in the struct would have <code>fieldA == fieldB</code> applied to it.  So why do we need a concept of a deep equals? Because if the struct has fields which are also structs, the information provided implies to me that those fields will be checked for equality using <code>==</code> also, so surely that would trigger traversal down the object graph anyway?</p>\n"}, {"tags": ["postgresql", "go"], "answers": [{"comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1458164768, "post_id": 36043723, "comment_id": 59743659, "body": "Alternatively, run <code>ssh</code> to set up the tunnel with forwarding on the other end, and then connect to that tunnel from your Go program: <a href=\"http://www.postgresql.org/docs/current/static/ssh-tunnels.html\" rel=\"nofollow noreferrer\">postgresql.org/docs/current/static/ssh-tunnels.html</a>"}], "tags": [], "owner": {"reputation": 1201, "user_id": 651028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6d5887835c21dace586b98180544c74e?s=128&d=identicon&r=PG", "display_name": "Sergei G", "link": "https://stackoverflow.com/users/651028/sergei-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1458151912, "creation_date": 1458151912, "answer_id": 36043723, "question_id": 36042528, "link": "https://stackoverflow.com/questions/36042528/golang-ssh-tunneling-connection-to-a-remote-postgres-db/36043723#36043723", "title": "Golang SSH tunneling connection to a remote postgres DB", "body": "<p>It is my understanding that you need to open connection to postgre database.  I don't know if a native postgre ssh tunneling support exists.  So, this answer about SSH tunneling to DB machine.</p>\n\n<p>I have not tested postgre this way, but I have had this model used in some proprietary server connections.</p>\n\n<p>The process goes like that:</p>\n\n<ol>\n<li>open ssh connection to db machine</li>\n<li>establish tunnel from local port to remote db port</li>\n<li>open db connection on local port</li>\n</ol>\n\n<p>You can accomplish #1 and #2 with ssh client like OpenSSH or putty.  You should probably do that 1st.  If external client works, then you can attempt to put it all into go language code without external SSH client.</p>\n\n<p>In go you would use</p>\n\n<p>\"golang.org/x/crypto/ssh\"</p>\n\n<p>package.</p>\n\n<p>There are tutorials out there how to use GO ssh tunneling.  Below is not a tested sample without error checking:</p>\n\n<pre><code>var buffer []byte\nvar err error\nbuffer, err = ioutil.ReadFile(sshKeyFile)\nvar key ssh.Signer\nkey, err = ssh.ParsePrivateKey(buffer)\nvar authMethod ssh.AuthMethod\nauthMethod = ssh.PublicKeys(key)\nsshConfig = &amp;ssh.ClientConfig{\n    User: \"user_id\",\n    Auth: []ssh.AuthMethod{authMethod},\n}\nconn, err := ssh.Dial(\"tcp\", endpoint, sshConfig)\n// open connection on postgre:\ndbConn, err = conn.Dial(\"tcp\", dbEndpoint)\n</code></pre>\n\n<p>The last line above is not exactly tunneling, but an TCP connection open to DB server.  You might be able to pass that connection into db library. If not, you would have to setup a tunnel.</p>\n"}], "owner": {"reputation": 1826, "user_id": 3765772, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3b49d13ba84f10dbe67af56729f9951?s=128&d=identicon&r=PG&f=1", "display_name": "R.J. Robinson", "link": "https://stackoverflow.com/users/3765772/r-j-robinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1545, "favorite_count": 2, "accepted_answer_id": 36043723, "answer_count": 1, "score": 0, "last_activity_date": 1458151912, "creation_date": 1458148454, "question_id": 36042528, "link": "https://stackoverflow.com/questions/36042528/golang-ssh-tunneling-connection-to-a-remote-postgres-db", "title": "Golang SSH tunneling connection to a remote postgres DB", "body": "<p>I have looked at various resources. I'm not sure how to accomplish this task. I can connect locally no problem, but I cannot connect to the remote easily. I need to pass on an RSA .pem key, and I'm not quite sure how to do this w/o forcing a connection unsecured </p>\n\n<pre><code>package main\n\nimport (\n    \"database/sql\"\n    \"fmt\"\n    \"os\"\n\n    _ \"github.com/lib/pq\"\n)\n\nvar (\n    dbUser  = os.Getenv(\"DB_USER\")\n    dbPass  = os.Getenv(\"DB_PASS\")\n    dbName  = os.Getenv(\"DB_NAME\")\n    dbHost  = os.Getenv(\"DB_HOST\")\n    dbPort  = os.Getenv(\"DB_PORT\")\n    sslMode = os.Getenv(\"SSLMODE\")\n)\n\n// ConnectDb is a short cut function that takes parameters through\n// CLI that returns a pointer to a sql.DB connection.\n// It takes no arguments.\nfunc ConnectDb() (*sql.DB, error) {\n\n    db, err := sql.Open(\"postgres\", getDbInfo())\n    CheckErr(err, \"Unable to connecto tthe DB\")\n\n    if err := db.Ping(); err != nil {\n        return nil, err\n    }\n\n    return db, nil\n}\n\nfunc getDbInfo() string {\n    var dbInfo string\n\n    if dbName != \"\" {\n        dbInfo += fmt.Sprintf(\"dbname=%s \", dbName)\n    } else {\n        dbInfo += fmt.Sprintf(\"dbname=%s \", \"development\")\n    }\n\n    // checks for nil value\n    if dbUser != \"\" {\n        dbInfo += fmt.Sprintf(\"dbuser=%s \", \"user\")\n    }\n\n    // checks for nil value\n    if dbPass != \"\" {\n        dbInfo += fmt.Sprintf(\"dbpass=%s \", dbPass)\n    }\n\n    if sslMode != \"\" {\n        dbInfo += fmt.Sprintf(\"sslmode=%s\", sslMode)\n    } else {\n        dbInfo += fmt.Sprintf(\"sslmode=disable\")\n    }\n\n    return dbInfo\n}\n</code></pre>\n"}, {"tags": ["templates", "go", "setcookie"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5896883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70f015855d4ba3fddebfdf6dedb49cf9?s=128&d=identicon&r=PG&f=1", "display_name": "eleecn", "link": "https://stackoverflow.com/users/5896883/eleecn"}, "edited": false, "score": 0, "creation_date": 1458154982, "post_id": 36042575, "comment_id": 59737984, "body": "Ah, now I understand. Thank you very very much."}], "tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": false, "score": 3, "last_activity_date": 1458148603, "creation_date": 1458148603, "answer_id": 36042575, "question_id": 36042298, "link": "https://stackoverflow.com/questions/36042298/golang-setcookie-failed-after-template-execute/36042575#36042575", "title": "Golang setCookie() failed after template Execute()", "body": "<p>This is a common error tied to the HTTP protocol working: the cookie is sent in a header of the HTTP respo7nse, which cannot be changed after the body start being sent.</p>\n\n<p>So, when you do the <code>t.Execute(w, nil)</code> call, you start writing the body of the response and thus cannot add cookies afterwards.</p>\n\n<p>This is the exact same reason why in PHP the <code>session_start()</code> call must be the very first instruction of the page, even before any whitespace.</p>\n"}], "owner": {"reputation": 1, "user_id": 5896883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70f015855d4ba3fddebfdf6dedb49cf9?s=128&d=identicon&r=PG&f=1", "display_name": "eleecn", "link": "https://stackoverflow.com/users/5896883/eleecn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458148603, "creation_date": 1458147775, "last_edit_date": 1458148302, "question_id": 36042298, "link": "https://stackoverflow.com/questions/36042298/golang-setcookie-failed-after-template-execute", "title": "Golang setCookie() failed after template Execute()", "body": "<p>As a beginner of GO, I've got a situation as following:</p>\n\n<pre><code>t, err := template.ParseFiles(\"/template/login.tpl\")\n\nerr = t.Execute(w, nil)         //if executed before SetCookie\n\nhttp.SetCookie\uff08...\uff09          //failed, browser received nothing\n</code></pre>\n\n<p>If the sequence is changed, to <code>SetCookie</code> first, it'll work.</p>\n\n<p>My plan was to <code>ParseForm()</code> username and password in <code>login.tpl</code>, if success, a <code>sessionID</code> would be sent by <code>SetCookie</code>. But now <code>SetCookie()</code> must be placed before <code>login.tpl</code> is <code>Executed</code>, which also makes <code>ParseForm()</code> run before <code>login.tpl</code> is executed : </p>\n\n<pre><code>r.ParseForm( )                          //ParseForm() works even before template is executed\n\nemail := r.FormValue(\"email\")\npass := r.FormValue(\"pass\")\n\nvar loginPass = checkLogin(email, pass) //verify username and password\n\nif loginPass == true {                  //if correct\n\n    cookie1 := http.Cookie{Name: \"test\", Value: \"testvalue\", Path: \"/\", MaxAge: 86400}\n    http.SetCookie(w, &amp;cookie1)         //setCookie works\n\n    fmt.Println(\"Login success: \", email)\n\n} else {                                //if incorrect username or pass\n\n    fmt.Println(\"Please login: \", email)\n\n}\n\nt, err := template.ParseFiles(\"/template/login.tpl\")\nerr = t.Execute(w, nil)                 //now template execution is here, also works\n</code></pre>\n\n<p>But why it should be written like this? Please anyone give me some advice! Thanks a lot.</p>\n"}, {"tags": ["mongodb", "go", "mgo"], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 3196024, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000460640943/picture?type=large", "display_name": "tchu", "link": "https://stackoverflow.com/users/3196024/tchu"}, "edited": false, "score": 0, "creation_date": 1458320521, "post_id": 36047912, "comment_id": 59824712, "body": "Thats exactly what I was looking for - couldn&#39;t figure out how to pass a subdocument.Also, in my case the correct &quot;key&quot; field would be {&quot;uuid&quot;, &quot;hashed&quot;} like in your example."}], "tags": [], "owner": {"reputation": 3365, "user_id": 1736884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c85628cff13ad6178dee34c769fa727?s=128&d=identicon&r=PG", "display_name": "Verran", "link": "https://stackoverflow.com/users/1736884/verran"}, "is_accepted": true, "score": 2, "last_activity_date": 1458166837, "last_edit_date": 1458166837, "creation_date": 1458166234, "answer_id": 36047912, "question_id": 36042161, "link": "https://stackoverflow.com/questions/36042161/mongodb-shardcollection-command-in-go/36047912#36047912", "title": "MongoDB shardCollection command in Go", "body": "<p>I think the issue you're having is that you have to specify that the second field is the key of <code>key</code> and the value is the subdocument of <code>{uuid: 1}</code>. This way you're matching the exact fields listed by the mongo documentation: <a href=\"https://docs.mongodb.org/manual/reference/command/shardCollection/\" rel=\"nofollow\">https://docs.mongodb.org/manual/reference/command/shardCollection/</a>.</p>\n\n<p>The code I'm using for the same process is:</p>\n\n<pre><code>if err := adminDb.Run(\n            bson.D{\n                {\n                    \"shardCollection\",\n                    \"logs.log_\"+dateString,\n                },\n                {\n                    \"key\",\n                    bson.M{\n                        \"sk\": \"hashed\",\n                    },\n                },\n            }, &amp;result); err != nil {\n                log.Println(\"Failed to shardCollection logs.log_\"+dateString, err)\n            }\n</code></pre>\n\n<p>So you might want to try</p>\n\n<pre><code>if err := session.DB(\"admin\").Run(bson.D{{\"shardCollection\", \"visits.visits-2016-05\"}, {\"key\", bson.M{\"uuid\", \"1\"}}}, &amp;result); err != nil {\n    panic(err)\n} else {\n    fmt.Println(result)\n}\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 3196024, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000460640943/picture?type=large", "display_name": "tchu", "link": "https://stackoverflow.com/users/3196024/tchu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "accepted_answer_id": 36047912, "answer_count": 1, "score": 3, "last_activity_date": 1458166837, "creation_date": 1458147394, "question_id": 36042161, "link": "https://stackoverflow.com/questions/36042161/mongodb-shardcollection-command-in-go", "title": "MongoDB shardCollection command in Go", "body": "<p>I'm trying to shard a collection using mgo library in Go.\nLooks like I can't figure out to run commands using Session.Run call.\nHere is my code:</p>\n\n<pre><code>if err := session.DB(\"admin\").Run(bson.D{{\"shardCollection\", \"visits.visits-2016-05\"}, {\"uuid\", \"1\"}}, &amp;result); err != nil {\n    panic(err)\n} else {\n    fmt.Println(result)\n}\n</code></pre>\n\n<p>I've tried several variants of passing key parameter, but I'm always getting <code>no shard key</code> error</p>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["arrays", "json", "go"], "comments": [{"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 1, "creation_date": 1458147550, "post_id": 36042047, "comment_id": 59733253, "body": "Your json does not represent an array. Arrays in json are denoted with <code>[ ]</code>. It&#39;s just a struct with another struct inside it."}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "edited": false, "score": 0, "creation_date": 1458147756, "post_id": 36042047, "comment_id": 59733416, "body": "the data looks an escaped json string with an object to me, not an array"}], "answers": [{"tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": true, "score": 1, "last_activity_date": 1458206085, "last_edit_date": 1458206085, "creation_date": 1458150388, "answer_id": 36043173, "question_id": 36042047, "link": "https://stackoverflow.com/questions/36042047/how-can-i-defined-this-type-data-in-golang/36043173#36043173", "title": "how can I defined this type data in golang", "body": "<p>I assume you posted incorrect JSON and let's say it's <code>'{\"hello\": \"world\"}</code> \nA struct has a predefined fields, and with arbitrary JSON coming in it's impossible to know ahead. The possible solution would be to convert it into a map.</p>\n\n<pre><code>var data interface{}\nb := []byte(`{\"hello\": \"world\"}`)\nerr := json.Unmarshal(b, &amp;data)\nif err != nil {\n        panic(err)\n}\nfmt.Print(data)\n</code></pre>\n\n<p>As you print out the data, you'll probably get something like.\n<code>map[hello:world]</code></p>\n\n<p>Which is in the form of <code>map[string]interface{}</code>. </p>\n\n<p>Then you can use type switch to loop into the map structure until you <strong>type assert</strong> all the <code>interface{}</code>.</p>\n\n<pre><code>for k, v := range data.(map[string]interface{}) {\n        switch val := v.(type) {\n        case string:\n                v = val\n        default:\n                fmt.Println(k, \"is unknown type\")\n        }\n}\n</code></pre>\n\n<p>Map is an ideal data structure when dealing with arbitrary incoming JSON. However, if the JSON is generated from an SQL table with predefined schemas, you can use a struct with the same structure instead of a map.</p>\n\n<pre><code>type Hello struct {\n        Hello string `json:\"hello\"`\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4344346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02477c3c85e7e96ee15df4a469e2f2dd?s=128&d=identicon&r=PG&f=1", "display_name": "baoer", "link": "https://stackoverflow.com/users/4344346/baoer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 36043173, "answer_count": 1, "score": -2, "last_activity_date": 1458206085, "creation_date": 1458147096, "last_edit_date": 1458147670, "question_id": 36042047, "link": "https://stackoverflow.com/questions/36042047/how-can-i-defined-this-type-data-in-golang", "title": "how can I defined this type data in golang", "body": "<p>I have a data like <code>'{\"{\\\"hello\\\":\\\"world\\\"}\"}'</code>, it's a array json in postgresql.</p>\n\n<p>I don't know how to handle it in golang.\nI know I can define with <code>string</code> then use <code>json.Unmarshal</code> to slove, but I want to know if there is a way to get it in a <code>struct</code></p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 3, "creation_date": 1458141680, "post_id": 36039284, "comment_id": 59728791, "body": "The problem with this loop is that there&#39;s no guarantee than any of the <code>myFunc</code> functions will even be scheduled before you run out of resources. Can you call the function first, and then dispatch the work? You could also have N worker goroutines, where you find what value of N is most efficient, and have those each call <code>MyFunc</code> until the work is exhausted."}, {"owner": {"reputation": 1762, "user_id": 5120331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTAB.png?s=128&g=1", "display_name": "Corvus Crypto", "link": "https://stackoverflow.com/users/5120331/corvus-crypto"}, "edited": false, "score": 1, "creation_date": 1458151991, "post_id": 36039284, "comment_id": 59736208, "body": "Another thing to look at is working pools. Basically instead of trying to initiate more goroutines on the fly and having to compensate for scheduling time, you use pre-existing worker routines that are managed by a worker pool. Then you give work to the pool&#39;s interface and the pool distributes the work to workers that are already primed for working. something to keep in mind with this approach is having the appropriate input and output buffers to avoid deadlocks"}, {"owner": {"reputation": 621, "user_id": 3618272, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/698721211/picture?type=large", "display_name": "NegatioN", "link": "https://stackoverflow.com/users/3618272/negation"}, "edited": false, "score": 0, "creation_date": 1458304738, "post_id": 36039284, "comment_id": 59813389, "body": "A worker-pool seems to be the way to go. I was somehow hoping Go would magically solve this for me. Thanks."}], "owner": {"reputation": 621, "user_id": 3618272, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/698721211/picture?type=large", "display_name": "NegatioN", "link": "https://stackoverflow.com/users/3618272/negation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1458308247, "creation_date": 1458140237, "question_id": 36039284, "link": "https://stackoverflow.com/questions/36039284/how-break-dynamic-creation-of-goroutines-on-error", "title": "How break dynamic creation of goroutines on error?", "body": "<p>I want to create as many go-routines as i need to complete a certain task in parallel.\nI know I will get an error when there are enough routines created, and the order of execution of these routines does not really matter.</p>\n\n<p>How can i break out from a loop creating these routines?\nHere's a half pseudo-code example of what I want to achieve:</p>\n\n<pre><code>func main() {\n  for {\n    //This function will give an error after N runs\n    //I just don't know which before running.\n    go myFunc()\n     if err != nil {\n      break\n    }\n  }\n  //Wait for all routines to finish\n  //Do something with returned data.\n}\n</code></pre>\n\n<p>I realize this might not be the best approach to the problem after searching around for a while. So any suggestions on how to best solve the problem would also be appreciated.</p>\n"}, {"tags": ["go", "ginkgo"], "answers": [{"comments": [{"owner": {"reputation": 29052, "user_id": 96233, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/85735330505ef1c84896fcb86491bd0b?s=128&d=identicon&r=PG", "display_name": "Ralph", "link": "https://stackoverflow.com/users/96233/ralph"}, "edited": false, "score": 0, "creation_date": 1458142921, "post_id": 36038337, "comment_id": 59729765, "body": "I had the <code>RunSpecs</code> in a separate <code>_suite_test.go</code> file, but it appears that for ginkgo to work, <code>&quot;github.com&#47;onsi&#47;gomega&quot;</code> must be imported in the file containing the <code>BeforeSuite</code>, ... . I had to add a fake <code>It</code> and <code>Expect</code> to allow this (the import would not be &quot;used&quot;, otherwise. At least that is what further testing seems to indicate. Thanks."}], "tags": [], "owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "is_accepted": true, "score": 4, "last_activity_date": 1458137931, "creation_date": 1458137931, "answer_id": 36038337, "question_id": 36037244, "link": "https://stackoverflow.com/questions/36037244/no-output-from-golang-ginkgo-beforesuite/36038337#36038337", "title": "No output from Golang Ginkgo BeforeSuite", "body": "<p>You are not invoking <code>RunSpecs</code></p>\n\n<pre><code>func TestSo(t *testing.T) {\n    RunSpecs(t, \"My Test Suite\")\n}\n</code></pre>\n\n<p>Output then appears similar to</p>\n\n<pre><code>2016/03/16 07:16:05 Describe\nRunning Suite: So Suite\n=======================\nRandom Seed: 1458137764\nWill run 0 of 0 specs\n\n2016/03/16 07:16:05 BeforeSuite\n2016/03/16 07:16:05 AfterSuite\n\nRan 0 of 0 Specs in 0.000 seconds\nSUCCESS! -- 0 Passed | 0 Failed | 0 Pending | 0 Skipped PASS\n\nGinkgo ran 1 suite in 1.211144437s\nTest Suite Passed\n</code></pre>\n\n<p>Are you trying to run your actual tests in the <code>_suite_test.go</code> file?</p>\n"}], "owner": {"reputation": 29052, "user_id": 96233, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/85735330505ef1c84896fcb86491bd0b?s=128&d=identicon&r=PG", "display_name": "Ralph", "link": "https://stackoverflow.com/users/96233/ralph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1666, "favorite_count": 0, "accepted_answer_id": 36038337, "answer_count": 1, "score": 1, "last_activity_date": 1458137931, "creation_date": 1458135321, "last_edit_date": 1592644375, "question_id": 36037244, "link": "https://stackoverflow.com/questions/36037244/no-output-from-golang-ginkgo-beforesuite", "title": "No output from Golang Ginkgo BeforeSuite", "body": "<p>I have the following <a href=\"http://onsi.github.io/ginkgo/\" rel=\"nofollow noreferrer\"><code>Ginkgo</code></a> test file:</p>\n<pre><code>package foo\n\nimport (\n    &quot;log&quot;\n\n    . &quot;github.com/onsi/ginkgo&quot;\n)\n\nvar _ = BeforeSuite(func() {\n    log.Print(&quot;BeforeSuite&quot;)\n})\n\nvar _ = AfterSuite(func() {\n    log.Print(&quot;AfterSuite&quot;)\n})\n\nvar _ = Describe(&quot;Foo&quot;, func() {\n    log.Print(&quot;Describe&quot;)\n})\n</code></pre>\n<p>When I run <code>ginkgo -r -v</code>, the test file runs, but the <code>BeforeSuite</code> and <code>AfterSuite</code> do not appear to:</p>\n<pre><code>2016/03/16 09:23:17 Describe\ntesting: warning: no tests to run\nPASS\n</code></pre>\n<p>The line <code>2016/03/16 09:23:17 Describe</code> shows that the <code>Describe</code> is running, but where is the output for <code>BeforeSuite</code> and <code>AfterSuite</code>?</p>\n<p>I do not really care about the output, but in my real test (not the fragment above), database build up and tear down are not getting executed.</p>\n<p>What am I doing wrong?</p>\n"}, {"tags": ["go", "gif", "mp4"], "comments": [{"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1458130509, "post_id": 36035269, "comment_id": 59719657, "body": "Have a look at some binding to libav and work with it. one such example, I can&#39;t attest to its quality: <a href=\"https://github.com/nareix/codec\" rel=\"nofollow noreferrer\">github.com/nareix/codec</a>"}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1458130824, "post_id": 36035269, "comment_id": 59719879, "body": "<code>os.Cmd</code> and shelling out to ffmpeg may also be another option."}, {"owner": {"reputation": 26911, "user_id": 225262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/10f7602ff38f6486cb1580052746fc05?s=128&d=identicon&r=PG", "display_name": "satoru", "link": "https://stackoverflow.com/users/225262/satoru"}, "edited": false, "score": 0, "creation_date": 1458130938, "post_id": 36035269, "comment_id": 59719953, "body": "So how long would it take for one to implement MP4 encoding/decoding from scratch?"}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 5, "creation_date": 1458131379, "post_id": 36035269, "comment_id": 59720313, "body": "a couple of years to learn the algorithms and theory, and then a few months to implement probably :)"}, {"owner": {"reputation": 26911, "user_id": 225262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/10f7602ff38f6486cb1580052746fc05?s=128&d=identicon&r=PG", "display_name": "satoru", "link": "https://stackoverflow.com/users/225262/satoru"}, "edited": false, "score": 2, "creation_date": 1458131980, "post_id": 36035269, "comment_id": 59720773, "body": "No wonder almost every &quot;modern&quot; programming languages rely on the C-binding solution or command-line solution when it comes to MP4 processing."}], "answers": [{"tags": [], "owner": {"reputation": 1368, "user_id": 1599940, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/7KpaW.png?s=128&g=1", "display_name": "rootatdarkstar", "link": "https://stackoverflow.com/users/1599940/rootatdarkstar"}, "is_accepted": false, "score": 2, "last_activity_date": 1458232518, "creation_date": 1458232518, "answer_id": 36066581, "question_id": 36035269, "link": "https://stackoverflow.com/questions/36035269/how-to-create-a-mp4-video-from-scratch/36066581#36066581", "title": "How to create a MP4 video from scratch?", "body": "<p>Mp4 is not the one universal standard of video data. It's dozens of standards called MPEG-4 now. But if you mean .Mp4 most times you mean H.264 in some container.\nProper implementation of H.264 (that will work as fast and as stable that ready-made solutions) is very hard work that requires advanced computer science skills, expert programming skills, expert knowledge of the H.264-related standards, and a lot of time. The draft that you can find on ITU site contains 671 pages and it's referenced to few (or dozens?) other standards.\nAnd another bad news: draft of standard is not the current standard. You need to buy it.\nSome of aspects of realization of H.264: frame data compression, entropy coding, code correction, video filters, color profiles. It's really complicated things, all of them.</p>\n\n<p>So why not have try to use the ffmpeg?\nYou can execute ffmpeg executable with \"os/exec\" package:</p>\n\n<pre><code>out, err := exec.Command(\"ffmpeg\", \"-f\", \"gif\", \"-i\", gifFileName, mp4FileName).Output()\n</code></pre>\n\n<p>Or even try use ffmpeg bindings for go <a href=\"https://github.com/giorgisio/goav\" rel=\"nofollow\">https://github.com/giorgisio/goav</a></p>\n\n<p>The use of ready-made solutions will save years of your work ;)</p>\n"}], "owner": {"reputation": 26911, "user_id": 225262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/10f7602ff38f6486cb1580052746fc05?s=128&d=identicon&r=PG", "display_name": "satoru", "link": "https://stackoverflow.com/users/225262/satoru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1777, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458232518, "creation_date": 1458130087, "question_id": 36035269, "link": "https://stackoverflow.com/questions/36035269/how-to-create-a-mp4-video-from-scratch", "title": "How to create a MP4 video from scratch?", "body": "<p>I'm trying to write a service with Go that converts GIF to MP4.</p>\n\n<p>For GIF there's a builtin package \"image/gif\" which contains tools for decoding a GIF.</p>\n\n<p>But no such package exists for MP4.</p>\n\n<p>So I'm considering creating the MP4 file myself.</p>\n\n<p>After decoding a GIF, I have access to its images and parameters like delay, so if I figure out something like a \"template for MP4 file\", I can use these information to create one, right?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 0, "creation_date": 1458132561, "post_id": 36034541, "comment_id": 59721253, "body": "Is the array empty when you print it out before the first loop ends at <code>fmt.Printf(%x\\n, allTableArray[i].macAddr</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6071009"}, "reply_to_user": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 0, "creation_date": 1458132762, "post_id": 36034541, "comment_id": 59721394, "body": "No, the array doesn&#39;t seem empty because the Printf prints out the mac addresses: It displays data like this before the end of the first loop: .12.196.122.5.50.246 = 0xx47a053xxx 0xx47a053xxx .0.37.144.88.177.153 = 23"}, {"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 0, "creation_date": 1458134462, "post_id": 36034541, "comment_id": 59722773, "body": "It is likely because you filled the <code>allTableArray</code> with <code>nil</code> at this point. <code>allTableArray[j] = allTable {brPortNb: gosnmp.ToBigInt(essai[i].Value)</code>. Try switching to some other value to test if that&#39;s the case."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6071009"}, "reply_to_user": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 0, "creation_date": 1458136700, "post_id": 36034541, "comment_id": 59724810, "body": ".0.37.144.204.23.61 = 1 deux trois quatre 25 .12.196.122.5.50.246 = 14 deux trois quatre 26  Only the variable that is accessed during the loop seems to be displayed (here quatre displays the content of j variable) and not the ones that are inserted in the loop before (macaddr &amp; ptVlan1Id)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6071009"}, "reply_to_user": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 0, "creation_date": 1458137431, "post_id": 36034541, "comment_id": 59725438, "body": "Ok, allTable {brPortNb: gosnmp.ToBigInt(essai[i].Value) is not the correct way to insert data into an array which already contains data as it sets nil to all other fields. I need to find the right way to do this in golang documentation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6071009"}, "reply_to_user": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 0, "creation_date": 1458137921, "post_id": 36034541, "comment_id": 59725826, "body": "I found this workaround to keep the previous data:  <code>allTableArray[j] = allTable {ptVlan1id: allTableArray[j].ptVlan1id, macAddr: allTableArray[j].macAddr, brPortNb: big.NewInt(int64(j))}</code>  Is there a better way to do this ?"}], "answers": [{"comments": [{"owner": {"reputation": 1795, "user_id": 1431317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e565cf25d753bc7b715eac4a21edb4d6?s=128&d=identicon&r=PG", "display_name": "user1431317", "link": "https://stackoverflow.com/users/1431317/user1431317"}, "edited": false, "score": 0, "creation_date": 1458304658, "post_id": 36039841, "comment_id": 59813341, "body": "<code>for i, v := range essai</code> will create a copy of <code>essai[i]</code> stored in <code>v</code>. Aside from lower performance because of the copy, you won&#39;t be able to modify it: <a href=\"http://play.golang.org/p/MhVRf5qY4t\" rel=\"nofollow noreferrer\">play.golang.org/p/MhVRf5qY4t</a>"}], "tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": false, "score": 1, "last_activity_date": 1458141491, "creation_date": 1458141491, "answer_id": 36039841, "question_id": 36034541, "link": "https://stackoverflow.com/questions/36034541/array-seems-to-lose-values-after-end-of-for-loop/36039841#36039841", "title": "Array seems to lose values after end of for loop", "body": "<p>Apparently this line</p>\n\n<pre><code>allTableArray[j] = allTable {brPortNb: gosnmp.ToBigInt(essai[i].Value) }\n</code></pre>\n\n<p>Update each member with a new <code>allTable</code> instance, where every field other than <code>brPortNb</code> is not defined thus becomes <code>nil</code>.</p>\n\n<p>If what you were trying to do is to update each member's <code>brPortNb</code> field, you could have done so by accessing the field and assign the value to it <strong>instead of assigning a new <code>allTable</code> to every member</strong>.</p>\n\n<pre><code>allTableArray[j].brPortNb = gosnmp.ToBigInt(essai[i].Value)\n</code></pre>\n\n<p>Also, try simplifying your loops like this, provided <code>len(essai) == len(allTableArray)</code>:</p>\n\n<pre><code>for i, v := range essai {\n        s := strings.TrimPrefix(v.Name, \".1.3.6.1.2.1.17.4.3.1.1\")\n        bytes := v.Value.([]byte)\n        macAddrTable[i] = oidMacAddr { s, string(bytes) }\n        allTableArray[i] = allTable { ptVlan1id: s, macAddr: bytes }\n\n        s = strings.TrimPrefix(v.Name, \".1.3.6.1.2.1.17.4.3.1.2\")\n        if s == allTableArray[i].ptVlan1id {\n                allTableArray[i].brPortNb = gosnmp.ToBigInt(v.Value)\n        }\n}\n</code></pre>\n\n<p>Notice that by using <code>for i, v := range essai</code> syntax, you have access to both the index and the value without having to use <code>essai[i]</code> for the value.</p>\n\n<p>Now your two loops can become just one, plus no embedded loops which are really hard to make sense of. </p>\n\n<p>I Also recommend you work with slice instead of array. It's more flexible that way.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6071009"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458141491, "creation_date": 1458128065, "last_edit_date": 1458132575, "question_id": 36034541, "link": "https://stackoverflow.com/questions/36034541/array-seems-to-lose-values-after-end-of-for-loop", "title": "Array seems to lose values after end of for loop", "body": "<p>I'm a beginner at go (and not a good programmer) but I wanted to write a small program which would dump from a switch the list of mac addresses &amp; interfaces name using snmp. I store the snmp values into an array of struct using multiple loops (the code here is to show the behavior).\nDuring the first loop, I store Ports Vlan id &amp; mac addresses into an array of struct (var allTableArray [30]allTable). At the end of this loop, I print the content of the array to be sure the mac addresses are in the array.\nBut when the second loop begins (to register bridge port number), the array seems empty (<code>fmt.Printf(\"deux %x\\n\",allTableArray[i].macAddr) and     fmt.Printf(\"trois %s\\n\",allTableArray[i].ptVlan1id))</code>.</p>\n\n<p>I don't understand why my array seems empty. Do you have any idea ?</p>\n\n<pre><code>package main\n\nimport (\n    \"flag\"\n    \"fmt\"\n    \"os\"\n    \"time\"\n    \"strings\"\n    \"github.com/soniah/gosnmp\"\n    \"math/big\"\n)\n\ntype oidMacAddr struct {\n    oid string\n    macaddr string\n}\n\ntype allTable struct {\n    ptVlan1id string\n    macAddr []byte\n    brPortNb *big.Int\n    ifIndex *big.Int\n    ifName string\n}\n\nvar macAddrTable [30]oidMacAddr\n\n\nfunc main() {\n    flag.Parse()\n\n    if len(flag.Args()) &lt; 1 {\n            flag.Usage()\n            os.Exit(1)\n    }\n    target := flag.Args()[0]\n    showMacAddrTable(target)\n}\n\nfunc printValue(pdu gosnmp.SnmpPDU) error {\n    fmt.Printf(\"%s = \", pdu.Name)\n\n    //fmt.Println(reflect.TypeOf(pdu.Value.([]byte)))\n    switch pdu.Type {\n    case gosnmp.OctetString:\n            b := pdu.Value.([]byte)\n            fmt.Printf(\"STRING: %x\\n\", b)\n    default:\n            fmt.Printf(\"TYPE %d: %d\\n\", pdu.Type, gosnmp.ToBigInt(pdu.Value))\n    }\n    return nil\n}\n\n\nfunc showMacAddrTable(target string) () {\n\n    var allTableArray [30]allTable\n    ptVlan1Oid := \".1.3.6.1.2.1.17.4.3.1.1\"\n    brPortOid := \".1.3.6.1.2.1.17.4.3.1.2\"\n    brPortIfIndex := \".1.3.6.1.2.1.17.1.4.1.2\"\n    ifIndexIfName := \".1.3.6.1.2.1.31.1.1.1.1\"\n    community := \"public\"\n\n    gosnmp.Default.Target = target\n    gosnmp.Default.Community = community\n    gosnmp.Default.Timeout = time.Duration(10 * time.Second) // Timeout better suited to walking\n    err := gosnmp.Default.Connect()\n    if err != nil {\n            fmt.Printf(\"Connect err: %v\\n\", err)\n            os.Exit(1)\n    }\n\n    var essai []gosnmp.SnmpPDU\n    essai, err = gosnmp.Default.BulkWalkAll(ptVlan1Oid)\n    if err != nil {\n            fmt.Printf(\"Walk Error: %v\\n\", err)\n            os.Exit(1)\n    }\n    for i :=0 ; i &lt; len(essai); i++ {\n            s := strings.TrimPrefix(essai[i].Name, \".1.3.6.1.2.1.17.4.3.1.1\")\n            fmt.Printf(\"%s = \", s)\n            fmt.Printf(\"%x\\n\", essai[i].Value.([]byte))\n            bytes := essai[i].Value.([]byte)\n            macAddrTable[i] = oidMacAddr {s, string(bytes)}\n            allTableArray[i] = allTable {ptVlan1id: s, macAddr: bytes}\n            if(allTableArray[i].macAddr != nil){\n                    fmt.Printf(\"%x\\n\",allTableArray[i].macAddr)\n            }\n\n\n    }\n    essai, err = gosnmp.Default.BulkWalkAll(brPortOid)\n    if err != nil {\n            fmt.Printf(\"Walk Error: %v\\n\", err)\n            os.Exit(1)\n    }\n    for i:=0 ; i &lt; len(essai); i++ {\n            s := strings.TrimPrefix(essai[i].Name, \".1.3.6.1.2.1.17.4.3.1.2\")\n            fmt.Printf(\"%s = \", s)\n            fmt.Printf(\"%d\\n\", essai[i].Value)\n            for j:=0 ; j &lt; len(allTableArray); j++ {\n                    if (s == allTableArray[j].ptVlan1id) {\n                            allTableArray[j] = allTable {brPortNb: gosnmp.ToBigInt(essai[i].Value) }\n                    }\n            }\n                    fmt.Printf(\"deux %x\\n\",allTableArray[i].macAddr)\n                    fmt.Printf(\"trois %s\\n\",allTableArray[i].ptVlan1id)\n    }\n\n    os.Exit(1)\n}\n</code></pre>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 21289, "user_id": 532430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/uAwnB.png?s=128&g=1", "display_name": "thwd", "link": "https://stackoverflow.com/users/532430/thwd"}, "is_accepted": true, "score": 3, "last_activity_date": 1458124955, "creation_date": 1458124955, "answer_id": 36033317, "question_id": 36032865, "link": "https://stackoverflow.com/questions/36032865/recreate-http-request-persisted-by-request-write/36033317#36033317", "title": "Recreate http.Request persisted by Request.Write", "body": "<p>You can use <a href=\"https://golang.org/pkg/net/http/#ReadRequest\" rel=\"nofollow\"><code>http.ReadRequest</code></a>.</p>\n"}], "owner": {"reputation": 3063, "user_id": 450598, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/780c14039de44c48349f578fdcfa66e0?s=128&d=identicon&r=PG", "display_name": "soupdiver", "link": "https://stackoverflow.com/users/450598/soupdiver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 36033317, "answer_count": 1, "score": 0, "last_activity_date": 1458124955, "creation_date": 1458123833, "question_id": 36032865, "link": "https://stackoverflow.com/questions/36032865/recreate-http-request-persisted-by-request-write", "title": "Recreate http.Request persisted by Request.Write", "body": "<p>I have a <code>http.Request</code> which I wrote to a file using <code>Request.Write</code>. Since there is no <code>Request.Read</code> or similar, I was wondering how I can recreate a <code>http.Request</code> using the file.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1458125610, "post_id": 36030885, "comment_id": 59716313, "body": "The type is <code>*gorm.DB</code> (a pointer to <code>gorm.DB</code>), the return and member types you&#39;re using is <code>gorm.DB</code> in both the <code>GetDB</code> method and the <code>DBController</code> type. these types are incompatible with one another. Change the <code>DB</code> member to a pointer, and return a pointer from <code>GetDB</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "edited": false, "score": 0, "creation_date": 1458122187, "post_id": 36030948, "comment_id": 59713841, "body": "Nuwan, Change return type of <code>GetDB</code> as well. to *gorm.DB"}, {"owner": {"reputation": 1795, "user_id": 1431317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e565cf25d753bc7b715eac4a21edb4d6?s=128&d=identicon&r=PG", "display_name": "user1431317", "link": "https://stackoverflow.com/users/1431317/user1431317"}, "edited": false, "score": 6, "creation_date": 1458305387, "post_id": 36030948, "comment_id": 59813870, "body": "The API of gorm changed recently, <code>gorm.Open</code> now returns a pointer: <a href=\"http://jinzhu.me/gorm/changelog.html\" rel=\"nofollow noreferrer\">jinzhu.me/gorm/changelog.html</a>"}], "tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": false, "score": 0, "last_activity_date": 1458118968, "creation_date": 1458118968, "answer_id": 36030948, "question_id": 36030885, "link": "https://stackoverflow.com/questions/36030885/cannot-assign-gorm-db-in-go-lang/36030948#36030948", "title": "cannot assign *gorm.DB in go lang", "body": "<p>You need and most probably you want to have a pointer in the structure of controller. Passing structure with a pointer to the database object (gorm.DB) will prevent Go from making a copy of this object (gorm.DB).</p>\n\n<p>Do the following:</p>\n\n<pre><code>type DBController struct {\n    DB *gorm.DB\n}\n</code></pre>\n\n<p>Now it should work fine.</p>\n"}], "owner": {"reputation": 31, "user_id": 6022227, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-BkKgi11r8Oc/AAAAAAAAAAI/AAAAAAAAAAs/Udr5NJ7Q7Q4/photo.jpg?sz=128", "display_name": "Nuwan Indika", "link": "https://stackoverflow.com/users/6022227/nuwan-indika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2956, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458118968, "creation_date": 1458118832, "question_id": 36030885, "link": "https://stackoverflow.com/questions/36030885/cannot-assign-gorm-db-in-go-lang", "title": "cannot assign *gorm.DB in go lang", "body": "<p>I'm trying to return a instance from the gorm.Open() return it i'm getting following error</p>\n\n<pre><code>controllers/db.go:34: cannot assign *gorm.DB to dc.DB (type gorm.DB) in multiple assignment\n</code></pre>\n\n<p>This is the db.go controller</p>\n\n<pre><code>    package controllers\n\nimport (\n\n  //\"fmt\"\n\n  _ \"github.com/go-sql-driver/mysql\"\n  //v \"github.com/spf13/viper\"\n  \"github.com/jinzhu/gorm\"\n\n)\n\ntype DBController struct {\n    DB gorm.DB\n}\n\nfunc (dc *DBController) InitDB() {\n    var err error\n\n\n    dc.DB, err = gorm.Open(\"mysql\",\"root:12345@tcp(localhost:3306)/api\")\n    if err != nil {\n        log.Fatalf(\"Error when connect database, the error is '%v'\", err)\n    }\n    dc.DB.LogMode(true)\n}\n\nfunc (dc *DBController) GetDB() gorm.DB {\n  return dc.DB\n}\n</code></pre>\n\n<p>What is reason for this error and how can i fix this?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 934, "user_id": 3239666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638873245dd9cdc579bf551818c11fb3?s=128&d=identicon&r=PG&f=1", "display_name": "GarMan", "link": "https://stackoverflow.com/users/3239666/garman"}, "edited": false, "score": 0, "creation_date": 1458105403, "post_id": 36027315, "comment_id": 59704993, "body": "Simpler than 3 line?"}, {"owner": {"reputation": 934, "user_id": 3239666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638873245dd9cdc579bf551818c11fb3?s=128&d=identicon&r=PG&f=1", "display_name": "GarMan", "link": "https://stackoverflow.com/users/3239666/garman"}, "edited": false, "score": 2, "creation_date": 1458105427, "post_id": 36027315, "comment_id": 59705000, "body": "ipAddress := strings.Split(conn.Remoteddr().String(), &quot;:&quot;)[0]"}, {"owner": {"reputation": 3728, "user_id": 2073991, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/hjYJt.jpg?s=128&g=1", "display_name": "Yi Jiang", "link": "https://stackoverflow.com/users/2073991/yi-jiang"}, "reply_to_user": {"reputation": 934, "user_id": 3239666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638873245dd9cdc579bf551818c11fb3?s=128&d=identicon&r=PG&f=1", "display_name": "GarMan", "link": "https://stackoverflow.com/users/3239666/garman"}, "edited": false, "score": 0, "creation_date": 1458107734, "post_id": 36027315, "comment_id": 59705841, "body": "@GarMan It still looks ugly.... :( Do I have to wrap these things by my self?"}, {"owner": {"reputation": 708, "user_id": 4144758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfea5e29717057a628f9363b652e5a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Daniele D", "link": "https://stackoverflow.com/users/4144758/daniele-d"}, "edited": false, "score": 1, "creation_date": 1458117394, "post_id": 36027315, "comment_id": 59710599, "body": "on a side note: OPs and GarMans code wouldn&#39;t work with IPv6"}, {"owner": {"reputation": 3728, "user_id": 2073991, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/hjYJt.jpg?s=128&g=1", "display_name": "Yi Jiang", "link": "https://stackoverflow.com/users/2073991/yi-jiang"}, "reply_to_user": {"reputation": 708, "user_id": 4144758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfea5e29717057a628f9363b652e5a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Daniele D", "link": "https://stackoverflow.com/users/4144758/daniele-d"}, "edited": false, "score": 0, "creation_date": 1458170141, "post_id": 36027315, "comment_id": 59745918, "body": "@DanieleD So, if we get IPv6, how to solve the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "is_accepted": true, "score": 11, "last_activity_date": 1458200082, "last_edit_date": 1458200082, "creation_date": 1458108259, "answer_id": 36027896, "question_id": 36027315, "link": "https://stackoverflow.com/questions/36027315/best-way-to-grep-substring-from-a-string-before-a-character-or-string-in-golang/36027896#36027896", "title": "Best way to grep substring from a string before a character or string in golang", "body": "<p>You can use <code>net.SplitHostPort</code>, like so</p>\n\n<pre><code>ip, _, err := net.SplitHostPort(conn.RemoteAddr().String())\nif err != nil {\n    fmt.Println(err)\n    return\n}\nfmt.Println(ip)\n</code></pre>\n\n<p>Try it on the <kbd><a href=\"http://play.golang.org/p/V7MHvCURIK\" rel=\"nofollow\">Playground</a></kbd></p>\n\n<p>To answer OP's question in the comments above, <code>net.SplitHostPort</code> already deals with IPv6.  Given the string </p>\n\n<pre><code>net.SplitHostPort(\"[2001:db8:85a3:0:0:8a2e:370]:7334\")\n</code></pre>\n\n<p>Will work as intended.</p>\n"}], "owner": {"reputation": 3728, "user_id": 2073991, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/hjYJt.jpg?s=128&g=1", "display_name": "Yi Jiang", "link": "https://stackoverflow.com/users/2073991/yi-jiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "accepted_answer_id": 36027896, "answer_count": 1, "score": 1, "last_activity_date": 1458200082, "creation_date": 1458105321, "question_id": 36027315, "link": "https://stackoverflow.com/questions/36027315/best-way-to-grep-substring-from-a-string-before-a-character-or-string-in-golang", "title": "Best way to grep substring from a string before a character or string in golang", "body": "<p>I got net.Conn.RemoteAddr() as this:</p>\n\n<pre><code>192.168.16.96:64840\n</code></pre>\n\n<p>I only need  IP address without port number</p>\n\n<pre><code>...\nstr := conn.RemoteAddr().String()\nstrSlice := strings.Split(str, \":\")\nipAddress := strSlice[0]\n...\n</code></pre>\n\n<p>Is there any simple way?</p>\n"}, {"tags": ["html", "templates", "go"], "comments": [{"owner": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "edited": false, "score": 3, "creation_date": 1458107773, "post_id": 36027099, "comment_id": 59705853, "body": "You&#39;re not specifying the content type in the HTTP response headers. Try adding a Content-Type header."}, {"owner": {"reputation": 35, "user_id": 4481471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0874a78cfcbb04f87f55a32faa389d18?s=128&d=identicon&r=PG&f=1", "display_name": "Zag", "link": "https://stackoverflow.com/users/4481471/zag"}, "reply_to_user": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "edited": false, "score": 0, "creation_date": 1458108621, "post_id": 36027099, "comment_id": 59706164, "body": "@joshlf I went ahead and added the following line of code to both of my response headers. <code>w.Header().Set(&quot;Access-Control-Allow-Orgin&quot;, &quot;*&quot;)</code>  Unfortunately no changes."}, {"owner": {"reputation": 249, "user_id": 3602982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f498120f2b82de0f4e2a9440f7c039d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Phomsopha", "link": "https://stackoverflow.com/users/3602982/sam-phomsopha"}, "reply_to_user": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "edited": false, "score": 2, "creation_date": 1458109385, "post_id": 36027099, "comment_id": 59706444, "body": "Just like @joshlf stated, you need to set the content type and not the origin access control.  So for if you want your output to be html, you would do: w.Header().Set(&quot;Content-Type&quot;, &quot;text/html&quot;)"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1458109387, "post_id": 36027099, "comment_id": 59706445, "body": "Well, &quot;Access-Control-Allow-Origin&quot; is not &quot;Content-Type&quot;, so your &quot;no changes&quot; is to be expected. joshlf asked for Content-Type and he is right."}, {"owner": {"reputation": 35, "user_id": 4481471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0874a78cfcbb04f87f55a32faa389d18?s=128&d=identicon&r=PG&f=1", "display_name": "Zag", "link": "https://stackoverflow.com/users/4481471/zag"}, "reply_to_user": {"reputation": 249, "user_id": 3602982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f498120f2b82de0f4e2a9440f7c039d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Phomsopha", "link": "https://stackoverflow.com/users/3602982/sam-phomsopha"}, "edited": false, "score": 0, "creation_date": 1458110012, "post_id": 36027099, "comment_id": 59706716, "body": "@SamPhomsopha I went ahead and implemented the w.Header().Set(&quot;Content-Type&quot;, &quot;text/html&quot;) and it&#39;s working perfectly now.  Earlier I had read that if you didn&#39;t specify the content type, it was handled for you. And in the case of the guide I had been reading, there was never the necessity to set it, why&#39;s that?"}, {"owner": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "edited": false, "score": 2, "creation_date": 1458110926, "post_id": 36027099, "comment_id": 59707124, "body": "The function that does the detection is DetectContentType (implementation <a href=\"https://golang.org/src/net/http/sniff.go?s=648:690#L11\" rel=\"nofollow noreferrer\">here</a>). It&#39;s a pretty simple function - basically it just tries to match against a list of very simple text-based signatures, and see if any matches. The HTML signatures (see <a href=\"https://golang.org/src/net/http/sniff.go#L54\" rel=\"nofollow noreferrer\">here</a>) don&#39;t include <code>&lt;form&gt;</code> or <code>&lt;h4&gt;</code>, and since those are the tags your resources start with, that&#39;s what it&#39;d need to match in order to properly detect the content type (since it just pays attention to the first few bytes)."}, {"owner": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "edited": false, "score": 1, "creation_date": 1458110944, "post_id": 36027099, "comment_id": 59707130, "body": "I&#39;d be willing to bet that if you sent a document starting with <code>&lt;html&gt;</code>, the detection would be successful."}, {"owner": {"reputation": 35, "user_id": 4481471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0874a78cfcbb04f87f55a32faa389d18?s=128&d=identicon&r=PG&f=1", "display_name": "Zag", "link": "https://stackoverflow.com/users/4481471/zag"}, "reply_to_user": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "edited": false, "score": 0, "creation_date": 1458111996, "post_id": 36027099, "comment_id": 59707660, "body": "@joshlf Ah, okay now this is making a lot more sense. When I was working with a smaller post.html file it had been working but all of a sudden after a few edits it quit displaying properly. At the time I had also done a few edits with the code and thought I had done something to disturb something leading to the ResponseWriter.  Just for my own understanding, since I had altered the start of my view.html file, the detection array no longer contained a signature that matched with an item in the HTML signature array. So the content type wasn&#39;t set properly and resulted in displaying the raw text."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4481471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0874a78cfcbb04f87f55a32faa389d18?s=128&d=identicon&r=PG&f=1", "display_name": "Zag", "link": "https://stackoverflow.com/users/4481471/zag"}, "edited": false, "score": 0, "creation_date": 1458158581, "post_id": 36029056, "comment_id": 59740198, "body": "I had totally overlooked the cost of the detection algorithm in my earlier conclusion I had come to when replying to joshlf. How and why I got my error is much clearer now.  Thanks everyone!"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 3, "last_activity_date": 1458113560, "last_edit_date": 1458113560, "creation_date": 1458112731, "answer_id": 36029056, "question_id": 36027099, "link": "https://stackoverflow.com/questions/36027099/why-and-when-would-a-responsewriter-generate-raw-html/36029056#36029056", "title": "Why and when would a ResponseWriter generate raw html?", "body": "<p>As hinted, it's because you haven't set the content type. Quoting from <a href=\"https://golang.org/pkg/net/http/#ResponseWriter\" rel=\"nofollow\"><code>http.ResponseWriter</code></a>:</p>\n\n<pre><code>// Write writes the data to the connection as part of an HTTP reply.\n// If WriteHeader has not yet been called, Write calls WriteHeader(http.StatusOK)\n// before writing the data.  If the Header does not contain a\n// Content-Type line, Write adds a Content-Type set to the result of passing\n// the initial 512 bytes of written data to DetectContentType.\nWrite([]byte) (int, error)\n</code></pre>\n\n<p>If you don't set the content type yourself, first call to <code>ResponseWriter.Write()</code> will call <a href=\"https://golang.org/pkg/net/http/#DetectContentType\" rel=\"nofollow\"><code>http.DetectContentType()</code></a> to guess what to set. If the content you send starts with <code>\"&lt;form&gt;\"</code>, it won't be detected as HTML, but <code>\"text/plain; charset=utf-8\"</code> will be set (which \"instructs\" the browser to display the content as text and not try to interpret it as HTML).</p>\n\n<p>If the content would start with <code>\"&lt;html&gt;\"</code> for example, content type <code>\"text/html; charset=utf-8\"</code> would be set automatically and it would work without further actions.</p>\n\n<p>But don't rely on automatic detection if you know what you're sending, also it's much faster to set it yourself than to run a detection algorithm on it, so simply add this line before writing/sending any data:</p>\n\n<pre><code>w.Header().Set(\"Content-Type\", \"text/html; charset=utf-8\")\n</code></pre>\n\n<p>And also make your <code>post.html</code> template a complete, valid HTML document.</p>\n\n<p>Also another piece of advice: in your code you religiously omit checking returned errors. Don't do that. The least you could do is print them on the console. You will save a lot of time for yourself if you don't omit errors.</p>\n"}], "owner": {"reputation": 35, "user_id": 4481471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0874a78cfcbb04f87f55a32faa389d18?s=128&d=identicon&r=PG&f=1", "display_name": "Zag", "link": "https://stackoverflow.com/users/4481471/zag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 36029056, "answer_count": 1, "score": 0, "last_activity_date": 1458113560, "creation_date": 1458104164, "question_id": 36027099, "link": "https://stackoverflow.com/questions/36027099/why-and-when-would-a-responsewriter-generate-raw-html", "title": "Why and when would a ResponseWriter generate raw html?", "body": "<p>I don't understand why the code is generating the view.html and post.html data correctly but displaying it all as raw text. I had been following the guide <a href=\"https://golang.org/doc/articles/wiki/\" rel=\"nofollow\">here</a> and as I was building it, I thought that the generated html from the Execute function would be sent to the ResponserWriter which would handle displaying it, but the error I'm getting seems to indicate my understanding of Execute or the ResponseWriter is wrong.</p>\n\n<pre><code>package main\n\nimport (\n    \"os\"\n    \"fmt\"\n    \"time\"\n    \"bufio\"\n    \"net/http\"\n    \"html/template\"\n)\n\ntype UserPost struct {\n    Name string\n    About string\n    PostTime string\n}\n\nfunc check(e error) {\n    if e != nil {\n        fmt.Println(\"Error Recieved...\")\n        panic(e)\n    }\n}\n\n\nfunc lineCounter(workingFile *os.File) int {\n    fileScanner := bufio.NewScanner(workingFile)\n    lineCount := 0\n    for fileScanner.Scan() {\n        lineCount++\n    }\n    return lineCount\n}\n\nfunc loadPage(i int) (*UserPost, error) {\n    Posts,err := os.Open(\"dataf.txt\")\n    check(err)\n    var PostArray [512]UserPost = parsePosts(Posts,i)\n    Name := PostArray[i].Name \n    About := PostArray[i].About\n    PostTime := PostArray[i].PostTime\n    Posts.Close()\n    return &amp;UserPost{Name: Name[:len(Name)-1], About: About[:len(About)-1], PostTime: PostTime[:len(PostTime)-1]}, nil\n}\n\nfunc viewHandler(w http.ResponseWriter, r *http.Request) {\n    tmp,err := os.Open(\"dataf.txt\")\n    check(err)\n    num := (lineCounter(tmp)/3)\n    tmp.Close()\n    for i := 0; i &lt; num; i++ {\n        p, _ := loadPage(i)\n        t, _ := template.ParseFiles(\"view.html\")\n        t.Execute(w, p)\n    }\n    p := UserPost{Name: \"\", About: \"\", PostTime: \"\"}\n    t, _ := template.ParseFiles(\"post.html\")\n    t.Execute(w, p)\n}\n\nfunc inputHandler(w http.ResponseWriter, r *http.Request) {\n    Name := r.FormValue(\"person\")\n    About := r.FormValue(\"body\")\n    PostTime := time.Now().String()\n\n    filePaste,err := os.OpenFile(\"dataf.txt\", os.O_RDWR | os.O_CREATE | os.O_APPEND | os.SEEK_END, 0666)\n    check(err)\n    filePaste.WriteString(Name+\"~\\n\")\n    filePaste.WriteString(About+\"~\\n\")\n    filePaste.WriteString(PostTime+\"~\\n\")\n    filePaste.Close()\n    fmt.Println(\"Data recieved: \", Name,About,PostTime)\n    http.Redirect(w, r, \"/#bottom\", http.StatusFound) //Use \"/#bottom\" to go to bottom of html page.\n}\n\n//os.File is the file type.\nfunc parsePosts(fileToParse *os.File,num int) [512]UserPost {\n    var buffer [512]UserPost\n    reader := bufio.NewReader(fileToParse)  \n\n    //This For loop reads each \"forum post\" then saves it to the buffer, then iterates to the next.\n    for i := 0;i &lt;= num; i++ {\n        currentPost := new(UserPost)\n        str, err := reader.ReadString('~')\n        check(err)\n        currentPost.Name = str\n\n        //I search for '~' because my files save the end of reading line with that, so i can keep formatting saved (\\n placement).\n        str2, err2 := reader.ReadString('~')\n        check(err2)\n        currentPost.About = str2\n\n        str3, err3 := reader.ReadString('~')\n        check(err3)\n        currentPost.PostTime = str3\n\n        buffer[i] = *currentPost\n        }   \n    return buffer\n}\n\nfunc main() {\n    fmt.Println(\"Listening...\")\n    http.HandleFunc(\"/\", viewHandler)\n    http.HandleFunc(\"/post/\", inputHandler)\n    http.ListenAndServe(\":8080\", nil)\n}   \n</code></pre>\n\n<p>view.html</p>\n\n<pre><code>&lt;h4&gt;{{.Name}}&lt;/h4&gt;\n\n&lt;font size=\"3\"&gt;\n    &lt;div&gt;{{printf \"%s\" .About}}&lt;/div&gt;\n&lt;/font&gt;\n&lt;br&gt;\n&lt;font size=\"2\" align=\"right\"&gt;\n    &lt;div align=\"right\"&gt;{{.PostTime}}&lt;/div&gt;\n&lt;/font&gt;\n</code></pre>\n\n<p>post.html</p>\n\n<pre><code>&lt;form action=\"/post/\" method=\"POST\"&gt;\n\n&lt;div&gt;&lt;textarea name=\"person\" rows=\"1\" cols=\"30\"&gt;{{printf \"%s\" .Name}}&lt;/textarea&gt;&lt;/div&gt;\n\n&lt;div&gt;&lt;textarea name=\"body\" rows=\"5\" cols=\"100\"&gt;{{printf \"%s\" .About}}&lt;/textarea&gt;&lt;/div&gt;\n\n&lt;div&gt;&lt;input type=\"submit\" value=\"Submit\"&gt;&lt;/div&gt;\n\n&lt;a name=\"bottom\"&gt;&lt;/a&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I've currently been reading from an empty dataf.txt file.</p>\n"}, {"tags": ["bash", "go"], "comments": [{"owner": {"reputation": 8159, "user_id": 1091784, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/cIHz9.png?s=128&g=1", "display_name": "riteshtch", "link": "https://stackoverflow.com/users/1091784/riteshtch"}, "edited": false, "score": 0, "creation_date": 1458104151, "post_id": 36027021, "comment_id": 59704624, "body": "so you want something in <code>bash</code> that will write prompt and value to the file?"}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 8159, "user_id": 1091784, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/cIHz9.png?s=128&g=1", "display_name": "riteshtch", "link": "https://stackoverflow.com/users/1091784/riteshtch"}, "edited": false, "score": 0, "creation_date": 1458104201, "post_id": 36027021, "comment_id": 59704639, "body": "@ritesht93, OP wants something in Go with the bash behavior. Read the last line carefully."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 6044659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcR8I.png?s=128&g=1", "display_name": "Josiah Niedrauer", "link": "https://stackoverflow.com/users/6044659/josiah-niedrauer"}, "edited": false, "score": 0, "creation_date": 1458104885, "post_id": 36027125, "comment_id": 59704848, "body": "Huh. Sure enough, you&#39;re right. I never would have figured that out on my own, thank you!"}], "tags": [], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "is_accepted": true, "score": 6, "last_activity_date": 1458104300, "creation_date": 1458104300, "answer_id": 36027125, "question_id": 36027021, "link": "https://stackoverflow.com/questions/36027021/create-a-user-prompt-that-does-not-write-to-stdout/36027125#36027125", "title": "Create a user prompt that does not write to stdout", "body": "<p>Bash's <code>read -p</code> just prints the prompt to <code>stderr</code>. You can tell by redirecting the stderr of your script to <code>/dev/null</code> and noticing that no prompt prints.</p>\n\n<pre><code> ./bashfile &gt; result.txt 2&gt; /dev/null\n</code></pre>\n\n<p>You can do the same in Go using <code>fmt.Fprintf</code>.</p>\n\n<pre><code>fmt.Fprintf(os.Stderr, \"Please enter a value: \")\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 6044659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcR8I.png?s=128&g=1", "display_name": "Josiah Niedrauer", "link": "https://stackoverflow.com/users/6044659/josiah-niedrauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 36027125, "answer_count": 1, "score": 0, "last_activity_date": 1458104300, "creation_date": 1458103810, "question_id": 36027021, "link": "https://stackoverflow.com/questions/36027021/create-a-user-prompt-that-does-not-write-to-stdout", "title": "Create a user prompt that does not write to stdout", "body": "<p>In bash, there is a builtin called <code>read</code> which has the -p switch. For example:</p>\n\n<pre><code>read -p \"Please enter a value: \" value\necho \"${value}\"\n</code></pre>\n\n<p>If this file is then executed like <code>$ ./bashfile &gt; result.txt</code></p>\n\n<p>You will end up with a file containing <code>$value\\n</code>, but NOT <code>Please enter a value: $value\\n</code></p>\n\n<p>In go, you can do something similar. Here's a section of code:</p>\n\n<pre><code>fmt.Print(\"Please enter a value: \")\nreader := bufio.NewReader(os.Stdin)\nvalue, _ := reader.ReadString('\\n')\nfmt.Println(value)\n</code></pre>\n\n<p>If you were to run that with <code>$ ./goexecutable &gt; result.txt</code></p>\n\n<p>The content of result.txt will look like <code>Please enter a value: value\\n</code></p>\n\n<p>Is there an equivalent in go to the bash <code>&lt;PROMPT&gt;</code> string from read -p which prints to the command line, but not to stdout?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 1425, "user_id": 293581, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d96c8822fa6bd112a3df4e45c16ea786?s=128&d=identicon&r=PG", "display_name": "Machiel", "link": "https://stackoverflow.com/users/293581/machiel"}, "edited": false, "score": 4, "creation_date": 1458103054, "post_id": 36026753, "comment_id": 59704279, "body": "Check this answer, might be what you&#39;re looking for: <a href=\"http://stackoverflow.com/questions/21397653/how-to-dump-methods-of-structs-in-golang\" title=\"how to dump methods of structs in golang\">stackoverflow.com/questions/21397653/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5022507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1c9f31a4f1d91b3120f64134ca08014?s=128&d=identicon&r=PG&f=1", "display_name": "yrssoft", "link": "https://stackoverflow.com/users/5022507/yrssoft"}, "is_accepted": false, "score": -1, "last_activity_date": 1458103643, "creation_date": 1458103643, "answer_id": 36026997, "question_id": 36026753, "link": "https://stackoverflow.com/questions/36026753/is-it-possible-to-get-the-function-name-with-reflect-like-this/36026997#36026997", "title": "Is it possible to get the function name with reflect like this?", "body": "<p>Thanks machiel.</p>\n\n<p>The answer following:</p>\n\n<pre><code>t := reflect.TypeOf(new(A))\nfor i := 0; i &lt; t.NumMethod(); i++ {\n    method := t.Method(i)\n    fmt.Println(method.Name)\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5022507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1c9f31a4f1d91b3120f64134ca08014?s=128&d=identicon&r=PG&f=1", "display_name": "yrssoft", "link": "https://stackoverflow.com/users/5022507/yrssoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1171, "favorite_count": 1, "closed_date": 1458134531, "answer_count": 1, "score": 0, "last_activity_date": 1458103643, "creation_date": 1458102190, "question_id": 36026753, "link": "https://stackoverflow.com/questions/36026753/is-it-possible-to-get-the-function-name-with-reflect-like-this", "closed_reason": "Duplicate", "title": "Is it possible to get the function name with reflect like this?", "body": "<p>Is it possible to get the function name with reflect like this?</p>\n\n<p>I am a new <strong>golang</strong> programmer,I don't know how to solve it.</p>\n\n<p>The code following:</p>\n\n<pre><code>type A struct {\n    Name string\n}\n\nfunc (this *A) Func1(name string) {\n    fmt.Println(name)\n}\n\nfunc (this *A) Func2(name string, value string) {\n    fmt.Println(name + \": \" + value)\n}\n\nfunc main() {\n    a := new(A)\n    v := reflect.ValueOf(a)\n\n    for i := 0; i &lt; v.NumMethod(); i++ {\n        method := v.Method(i)\n        if method.IsValid() {\n            t := reflect.TypeOf(method.Interface())\n            // how to echo the function name of A: Func1,Func2\n            fmt.Printf(\"%s  %d  %d\\n\", runtime.FuncForPC(method.Pointer()).Name(), t.NumIn(), t.NumOut())\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["ubuntu", "go", "supervisord"], "answers": [{"comments": [{"owner": {"reputation": 508, "user_id": 2261658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fbc1ca8e07bdb8e9429b5ce522fe3?s=128&d=identicon&r=PG&f=1", "display_name": "jimis", "link": "https://stackoverflow.com/users/2261658/jimis"}, "edited": false, "score": 0, "creation_date": 1572532042, "post_id": 36025166, "comment_id": 103596025, "body": "Go compiler produces dynamically linked binaries by default (unless instructed otherwise). Just do <code>ldd</code> and you will see that the binary is linked to <code>libc.so</code> (tested on Linux). The difference is that the go packages it depends on, are bundled in the binary. But not the system libraries."}], "tags": [], "owner": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "is_accepted": true, "score": 7, "last_activity_date": 1458090964, "creation_date": 1458090964, "answer_id": 36025166, "question_id": 36024872, "link": "https://stackoverflow.com/questions/36024872/libfaketime-doesnt-work-with-golang/36025166#36025166", "title": "libfaketime doesn&#39;t work with golang", "body": "<p>The issue is that <code>faketime</code> uses the <code>LD_PRELOAD</code> environment variable to instruct the program's dynamic loader to load <code>libfaketime</code> at startup. <code>libfaketime</code> will do what's called \"interpositioning\" - replacing normal dynamic library routines with its own copies of those routines - so that when future dynamic library calls are made, <code>libfaketime</code> can influence what happens. In particular, <code>libfaketime</code> interposes time-related calls, and thus it is able to return fake values to the program.</p>\n\n<p>The reason that this works for most programs is that they use <code>libc</code> to make syscalls. <code>libc</code> provides high-level functions for interacting with syscalls, making it easier to do systems programming. In most languages that use <code>libc</code>, binaries are dynamically linked, meaning that <code>libc</code> isn't actually included in the binary, but rather it is expected that a compiled version of <code>libc</code> (called an \"object file\") will exist on the system when the binary is run, and the dynamic library can be loaded at that point. This dynamic loading is what makes <code>faketime</code> possible by way of the <code>LD_PRELOAD</code> directive, which changes the loader's behavior.</p>\n\n<p>Go, however, differs in two ways. First, it is statically linked, and thus there is no loader that could ever pay attention to <code>LD_PRELOAD</code>. Second, it doesn't use <code>libc</code>, so even if it were dynamically linked, and the <code>LD_PRELOAD</code> trick worked, <code>libc</code> would never be called anyway, so it still wouldn't actually accomplish the intended goal of tricking the program into using fake time functions.</p>\n"}], "owner": {"reputation": 1536, "user_id": 1793374, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qK8kV.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/1793374/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 0, "accepted_answer_id": 36025166, "answer_count": 1, "score": 4, "last_activity_date": 1458090964, "creation_date": 1458088879, "question_id": 36024872, "link": "https://stackoverflow.com/questions/36024872/libfaketime-doesnt-work-with-golang", "title": "libfaketime doesn&#39;t work with golang", "body": "<p>I would like my go program, which runs on ubuntu server (14.04), daemonized with supervisor, to use a fake server time.</p>\n\n<p>In my supervisor config, I use this as the executing command:</p>\n\n<p><code>\"faketime 'last Friday 5 pm' /home/user/main\"</code></p>\n\n<p>The program runs, but displays the current time.</p>\n\n<p>According to this article:\n<a href=\"http://archive09.linux.com/feature/147801\" rel=\"nofollow\">Changing what time a process thinks it is with libfaketime</a></p>\n\n<blockquote>\n  <p>libfaketime cannot be used with statically linked or setuid programs, because LD_PRELOAD is not available to such programs.</p>\n</blockquote>\n\n<p>Is there anyway to have my compiled go program use the faketime?</p>\n"}, {"tags": ["go", "32bit-64bit"], "comments": [{"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1458125990, "post_id": 36024542, "comment_id": 59716588, "body": "<code>runtime.GOARCH</code> will give you the architecture the program was compiled to run on. To get the actual systems&#39; architecture details, you&#39;ll probably end up having to check <code>runtime.GOOS</code>, and perform a platform specific system call."}, {"owner": {"reputation": 240649, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1613630943, "post_id": 36024542, "comment_id": 117135466, "body": "This question originally looked like it was about detecting the OS, but the answers, including the accepted one, were about detecting the compiler-target bitness.  I edited it to make the question match the answers, because this is also a potentially useful thing.  That&#39;s why there are comments about this detection not matching the OS."}], "answers": [{"comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 2, "creation_date": 1458125660, "post_id": 36024943, "comment_id": 59716348, "body": "IIUC, <code>runtime.GOARCH</code> would return the architecture of the built <i>program</i> being executed. Since some arches, namely, Intel/AMD&#39;s 64-bit ISAs, allow running 32-bit programs on 64-bit kernels, so if the OP really wanted to know the architecture of the OS currently executing their Go program, the approach to figuring this out should supposedly be different (and, I&#39;m afraid, platform-specific)."}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 4, "last_activity_date": 1458089785, "last_edit_date": 1458089785, "creation_date": 1458089440, "answer_id": 36024943, "question_id": 36024542, "link": "https://stackoverflow.com/questions/36024542/how-do-i-determine-whether-the-program-was-built-as-32-bit-or-64-bit-in-go/36024943#36024943", "title": "How do I determine whether the program was built as 32 bit or 64 bit in Go?", "body": "<p>Use GOARCH for arm: arm (ARM) and arm64 (AArch64),</p>\n\n<blockquote>\n  <p><a href=\"https://golang.org/doc/install/source#environment\" rel=\"nofollow noreferrer\">Optional environment variables</a></p>\n  \n  <p>$GOOS and $GOARCH</p>\n  \n  <p>The name of the target operating system and compilation architecture.\n  These default to the values of $GOHOSTOS and $GOHOSTARCH respectively\n  (described below).</p>\n  \n  <p>Choices for $GOOS are </p>\n\n<pre><code>$GOOS     $GOARCH\ndarwin    386\ndarwin    amd64\ndarwin    arm\ndarwin    arm64\ndragonfly     amd64\nfreebsd   386\nfreebsd   amd64\nfreebsd   arm\nlinux     386\nlinux     amd64\nlinux     arm\nlinux     arm64\nlinux     ppc64\nlinux     ppc64le\nlinux     mips64\nlinux     mips64le\nnetbsd    386\nnetbsd    amd64\nnetbsd    arm\nopenbsd   386\nopenbsd   amd64\nopenbsd   arm\nplan9     386\nplan9     amd64\nsolaris   amd64\nwindows   386\nwindows   amd64\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 240649, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1613630016, "post_id": 60319709, "comment_id": 117135168, "body": "Wouldn&#39;t <code>uintptr</code> always be 32-bit in 32-bit code, even when running under a 64-bit OS?  (e.g. i386 code under an x86-64 long mode kernel, or ARM32 code under an AArch64 kernel, are the main real-world use-cases for this.  e.g. where you want to know which version of another executable you can run.)"}, {"owner": {"reputation": 240649, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1613630153, "post_id": 60319709, "comment_id": 117135217, "body": "But apparently that&#39;s what this question actually wants, given the accepted answer.  So I&#39;ll retitle the question."}, {"owner": {"reputation": 240649, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1613631098, "post_id": 60319709, "comment_id": 117135507, "body": "Note that this will report non-64-bit even for ILP32 ABIs in 64-bit mode.  So this is good for figuring out if pointers are 64-bit, but not for figuring out if 64-bit integer stuff can be done fully efficiently.  (e.g. AArch64 ILP32 uses 32-bit pointers in 64-bit mode to save space, same as <a href=\"https://en.wikipedia.org/wiki/X32_ABI\" rel=\"nofollow noreferrer\">Linux x32</a> on x86-64)"}, {"owner": {"reputation": 12876, "user_id": 377446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0479a8c7ebd088dbcf459147ba3b2569?s=128&d=identicon&r=PG", "display_name": "Karl", "link": "https://stackoverflow.com/users/377446/karl"}, "reply_to_user": {"reputation": 240649, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1613723370, "post_id": 60319709, "comment_id": 117168955, "body": "Hmm interesting. Then perhaps a second test <code>uint64(^uint(0)) == ^uint64(0)</code> would give a fuller picture."}, {"owner": {"reputation": 240649, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1613723483, "post_id": 60319709, "comment_id": 117169007, "body": "I wouldn&#39;t expect <code>uint</code> to be 64-bit, if Go sizes it like C compilers choose the size of <code>unsigned int</code>.  ILP32 ABIs like x32 will have 32-bit <code>uint</code> as well, I&#39;d expect."}, {"owner": {"reputation": 12876, "user_id": 377446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0479a8c7ebd088dbcf459147ba3b2569?s=128&d=identicon&r=PG", "display_name": "Karl", "link": "https://stackoverflow.com/users/377446/karl"}, "reply_to_user": {"reputation": 240649, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1613723576, "post_id": 60319709, "comment_id": 117169039, "body": "But generally for anyone using this kind of trick, they&#39;re really interested in whether uint will be 32 or 64 bit, and whether uintptr will be 32 or 64 bit. I&#39;ve encountered this issue many times when trying to deal with for example words in a big.Int"}, {"owner": {"reputation": 240649, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1613724166, "post_id": 60319709, "comment_id": 117169277, "body": "I don&#39;t know Go, but if you&#39;re writing your own extended-precision stuff, you generally want to work in chunks as large as efficiently possible, even if that&#39;s wider than pointer width.  (Or maybe just always 64-bit chunks, even if that means the compiler has to use a pair of 32-bit <code>add&#47;adc</code> instructions in a 32-bit build).  If you want to know whether <code>uint64</code> is as efficient as a 32-bit integer type for most arithmetic, in C/C++ AFAIK there&#39;s no easy portable way to detect that without false negatives on ILP32 ABIs.  uintptr being 64-bit is a sure sign that it <i>is</i> efficient, though."}], "tags": [], "owner": {"reputation": 12876, "user_id": 377446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0479a8c7ebd088dbcf459147ba3b2569?s=128&d=identicon&r=PG", "display_name": "Karl", "link": "https://stackoverflow.com/users/377446/karl"}, "is_accepted": false, "score": 2, "last_activity_date": 1582201258, "last_edit_date": 1582201258, "creation_date": 1582200934, "answer_id": 60319709, "question_id": 36024542, "link": "https://stackoverflow.com/questions/36024542/how-do-i-determine-whether-the-program-was-built-as-32-bit-or-64-bit-in-go/60319709#60319709", "title": "How do I determine whether the program was built as 32 bit or 64 bit in Go?", "body": "<pre class=\"lang-golang prettyprint-override\"><code>const is64Bit = uint64(^uintptr(0)) == ^uint64(0)\n</code></pre>\n\n<p>This works because if <code>uintptr</code> is 32 bits, <code>^uintptr(0)</code> will be <code>0xffffffff</code> rather than <code>0xffffffffffffffff</code>.</p>\n\n<p><code>^uint64(0)</code> will always be <code>0xffffffffffffffff</code> regardless of 32 or 64 bit architectures.</p>\n"}], "owner": {"reputation": 1907, "user_id": 3161525, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/6c4bdb240d87fd9fa82717d3cfbea305?s=128&d=identicon&r=PG&f=1", "display_name": "EMBLEM", "link": "https://stackoverflow.com/users/3161525/emblem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1600, "favorite_count": 1, "accepted_answer_id": 36024943, "answer_count": 2, "score": 1, "last_activity_date": 1613630459, "creation_date": 1458086728, "last_edit_date": 1613630459, "question_id": 36024542, "link": "https://stackoverflow.com/questions/36024542/how-do-i-determine-whether-the-program-was-built-as-32-bit-or-64-bit-in-go", "title": "How do I determine whether the program was built as 32 bit or 64 bit in Go?", "body": "<p>The closest I can get is <code>runtime.GOARCH</code>, but that might also give <code>arm</code>, which could be either 32 or 64 bit.</p>\n<hr />\n<p>I only care how this program was built, not whether the OS also supports 64-bit executables.  e.g. for ARM mode on an AArch64 CPU or 32-bit compat mode on an x86-64 CPU, I still want 32 because that's the mode this program is running in.</p>\n<p>Related: <a href=\"https://stackoverflow.com/questions/66254265/detect-os-x86-or-x64-when-compiled-as-x86-in-go\">Detect OS x86 or x64, when compiled as x86 in GO</a> is about detecting what the OS supports, e.g. for maybe running a differently-compiled executable.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1458090793, "post_id": 36024512, "comment_id": 59701053, "body": "Is all of this code within the same package? You should also remove your use of <code>defer</code> - it doesn&#39;t help make your code clearer or safer."}, {"owner": {"reputation": 3728, "user_id": 2073991, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/hjYJt.jpg?s=128&g=1", "display_name": "Yi Jiang", "link": "https://stackoverflow.com/users/2073991/yi-jiang"}, "reply_to_user": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1458092890, "post_id": 36024512, "comment_id": 59701601, "body": "@elithrar Yes. I guess they are in one package, as they are in one .go file. I guess something wrong with the pointer and the instance. But I can&#39;t tell there the problem is. Sorry, I didn&#39;t clean defer out. I do it right now."}, {"owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 0, "creation_date": 1458096672, "post_id": 36024512, "comment_id": 59702653, "body": "I think you want sql.Open to assign to d.db, not just db. Also possible sql syntax error: *,"}, {"owner": {"reputation": 3728, "user_id": 2073991, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/hjYJt.jpg?s=128&g=1", "display_name": "Yi Jiang", "link": "https://stackoverflow.com/users/2073991/yi-jiang"}, "edited": false, "score": 0, "creation_date": 1458097729, "post_id": 36024512, "comment_id": 59702900, "body": "Sorry! I forgot paste these functions into question. I do it now."}], "answers": [{"comments": [{"owner": {"reputation": 3728, "user_id": 2073991, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/hjYJt.jpg?s=128&g=1", "display_name": "Yi Jiang", "link": "https://stackoverflow.com/users/2073991/yi-jiang"}, "edited": false, "score": 0, "creation_date": 1458097634, "post_id": 36025467, "comment_id": 59702872, "body": "I spent hours to find this bug! THANK YOU!"}], "tags": [], "owner": {"reputation": 13739, "user_id": 38333, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2ea7c27233a9019a1f91a821726a4d4?s=128&d=identicon&r=PG", "display_name": "cd1", "link": "https://stackoverflow.com/users/38333/cd1"}, "is_accepted": true, "score": 1, "last_activity_date": 1458093072, "creation_date": 1458093072, "answer_id": 36025467, "question_id": 36024512, "link": "https://stackoverflow.com/questions/36024512/wrapped-sql-db-by-struct-cant-invoke-methods-in-instance/36025467#36025467", "title": "Wrapped sql.DB by struct can&#39;t invoke methods in instance", "body": "<p>The function <a href=\"https://golang.org/pkg/database/sql/#DB.Prepare\" rel=\"nofollow\"><code>Prepare</code></a> starts with a capital letter ;)</p>\n\n<p>So you should have:</p>\n\n<pre><code>getNodeRecord, err := dbConn.db.Prepare(dbQuery)\n</code></pre>\n"}], "owner": {"reputation": 3728, "user_id": 2073991, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/hjYJt.jpg?s=128&g=1", "display_name": "Yi Jiang", "link": "https://stackoverflow.com/users/2073991/yi-jiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 36025467, "answer_count": 1, "score": 0, "last_activity_date": 1458097833, "creation_date": 1458086571, "last_edit_date": 1458097833, "question_id": 36024512, "link": "https://stackoverflow.com/questions/36024512/wrapped-sql-db-by-struct-cant-invoke-methods-in-instance", "title": "Wrapped sql.DB by struct can&#39;t invoke methods in instance", "body": "<p>My goal is using a struct to wrap sql.DB to do something more than sql.DB.\nThe instance I create can't work and give me this error when I run it.</p>\n\n<pre><code>DbConn.db.prepare undefined (cannot refer to unexported field or method sql.(*DB).\"\".prepare)\n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code>type DatabaseConn struct {\n  driverName string\n  databaseName string\n  userName string\n  password string\n  dataSourceName string\n  db *sql.DB\n}\n\nfunc (d DatabaseConn)Open() error {\n    d.driverName    = DB_DRNAME\n    d.userName      = DB_UNAME\n    d.password      = DB_PWD\n    d.databaseName  = DB_DBNAME\n    d.dataSourceName = fmt.Sprintf(\"%s:%s@/%s?charset=utf8\",d.userName, d.password, d.databaseName)\n    db, err := sql.Open(d.driverName, d.dataSourceName)\n    return err\n}\n\n\nfunc (d *DatabaseConn)Close() error {\n    defer func() {\n        if err := recover(); err != nil {\n            fmt.Println(\"Trying to handle error in DatabaseConn.Close(): \", err)\n        }\n    }()\n\n    err := d.db.Close()\n    return err\n}\n</code></pre>\n\n<p>I am trying to create an instance and invoke sql.DB method.</p>\n\n<pre><code>var dbConn DatabaseConn\ndbConn.Open()\ndefer dbConn.Close()\ndbQuery := fmt.Sprintf(\"SELECT *, FROM ms_node WHERE node_id = ?\")\ngetNodeRecord, err := dbConn.db.prepare(dbQuery)\n</code></pre>\n\n<p>The error message is pointed here.</p>\n\n<pre><code>./server.go:343: dbConn.db.prepare undefined (cannot refer to unexported field or method sql.(*DB).\"\".prepare)\n</code></pre>\n\n<p>(Personal background: I am newbie for 2 weeks)</p>\n"}, {"tags": ["post", "go", "client", "goroutine"], "comments": [{"owner": {"reputation": 155, "user_id": 2048713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5561e3a9aaad516ea652edd59ae2b55e?s=128&d=identicon&r=PG", "display_name": "jcasado94", "link": "https://stackoverflow.com/users/2048713/jcasado94"}, "reply_to_user": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 0, "creation_date": 1458085652, "post_id": 36024260, "comment_id": 59699615, "body": "Set it to 16 but still have the same problem. Still, I said that all the functions are starting at the same time! thanks anyway"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 3, "creation_date": 1458085712, "post_id": 36024260, "comment_id": 59699640, "body": "Even if GOMAXPROCS was 1, the requests wouldn&#39;t be serialized. Are you sure the remote server will accept more than 1 connection at a time?"}, {"owner": {"reputation": 155, "user_id": 2048713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5561e3a9aaad516ea652edd59ae2b55e?s=128&d=identicon&r=PG", "display_name": "jcasado94", "link": "https://stackoverflow.com/users/2048713/jcasado94"}, "edited": false, "score": 0, "creation_date": 1458085802, "post_id": 36024260, "comment_id": 59699674, "body": "that&#39;s my main guess... Is there a way to check that? :/"}, {"owner": {"reputation": 155, "user_id": 2048713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5561e3a9aaad516ea652edd59ae2b55e?s=128&d=identicon&r=PG", "display_name": "jcasado94", "link": "https://stackoverflow.com/users/2048713/jcasado94"}, "edited": false, "score": 0, "creation_date": 1458087422, "post_id": 36024260, "comment_id": 59700182, "body": "Indeed, changed the request for a GET to Google and it was all concurrent... Well, thank you, major problem haha!"}, {"owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 0, "creation_date": 1458098798, "post_id": 36024260, "comment_id": 59703146, "body": "Yeah sorry I should&#39;ve read the issue more clearly - I apologise. I&#39;ll delete my comment."}, {"owner": {"reputation": 155, "user_id": 2048713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5561e3a9aaad516ea652edd59ae2b55e?s=128&d=identicon&r=PG", "display_name": "jcasado94", "link": "https://stackoverflow.com/users/2048713/jcasado94"}, "edited": false, "score": 0, "creation_date": 1458174522, "post_id": 36024260, "comment_id": 59747359, "body": "Just so you know, I solved it. It had something to do with the previous requests I had to do to get there (it&#39;s a scraping func, so like the &quot;previous pages&quot; to get to the current one with this post). They had to be done with the same client as this last one. So what I did was create a very new client for every post request, that will simulate the whole process including the previous requests. It doesn&#39;t add more execution time, since all the requests are concurrent. Thank you all!"}], "owner": {"reputation": 155, "user_id": 2048713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5561e3a9aaad516ea652edd59ae2b55e?s=128&d=identicon&r=PG", "display_name": "jcasado94", "link": "https://stackoverflow.com/users/2048713/jcasado94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1088, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1458086541, "creation_date": 1458084933, "last_edit_date": 1458085283, "question_id": 36024260, "link": "https://stackoverflow.com/questions/36024260/golang-concurrent-http-requests-have-to-wait-for-each-other", "title": "Golang concurrent http requests have to wait for each other", "body": "<p>I've been trying to solve this problem for a long time I really can't see the cause..\nThe thing is I am calling a goroutine n times, which has to leave some result in a channel. This goroutines perform a post request to some website with a Client. The thing is that it looks like they have to wait for each other, since their times (the time for the function to finish) look like this in the output:\n1s\n2s\n3s\n5s\n.\n.</p>\n\n<p>and so on; when they're supposed to run concurrently.</p>\n\n<p>Here it goes the important pieces of the code.</p>\n\n<p>First, the calling function. This is supposed to trigger a \"getFlight\" for every id, and keep gathering the information they return through the channel. postUrl and urlParams are pre-assigned variables, a string and a pointer, respectively. The copy of the client is simply cause I thought that using the same client could've been the reason for the serialization, but looks like not.</p>\n\n<pre><code>result := []types.Trip{}\nc := make(chan types.Trip)\nfor _, id := range ids {\n    client1 := *client\n    client2 := &amp;client1\n    go getFlight(id, postUrl, urlParams, client2, c)\n}\nfor range ids {\n    result = append(result, &lt;-c)\n}\n\nreturn result\n</code></pre>\n\n<p>And this is the part of getFlight where I make the http request. All the variables have been previously initialized.</p>\n\n<pre><code>func getFlight(id string, postUrl string, urlParams *url.Values, client*http.Client, c chan types.Trip)\n\nvar newTrip types.Trip\nnewTrip.Url = postUrl\nnewTrip.UrlParams = *urlParams\n\n\nr, err := http.NewRequest(\"POST\", myUrl, bytes.NewBufferString(form.Encode()))\nr.Header.Add(\"Content-Type\", \"application/x-www-form-urlencoded; charset=UTF-8\")\n\nresp, err := client.Do(r)\nif err != nil {\n    return\n}\n\nbody, _ := ioutil.ReadAll(resp.Body)\nresp.Body.Close()\n</code></pre>\n\n<p>As I said, the output of getFlight time, for every thread, looks like this:</p>\n\n<p>4.6196584s\n5.8934936s\n7.1387969s\n8.3415495s\n9.7005444s\n11.078563s\n12.1587691s\n13.8861763s</p>\n\n<p>There's just not any kind of concurrency, and I really don't know why... And all the functions are starting at the same time, just put a Println at the very beggining of getFlight and all where shown at the same time.</p>\n\n<p>Thanks for your help.</p>\n\n<p>EDIT: The problem is indeed when calling client.Do(r), I put the timers before and after the call, and I get the same timings (1s, 2s, 3s, 5s..), therefore there is where the threads are waiting for the previous thread to finish. The question is, why?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1458093816, "post_id": 36022817, "comment_id": 59701846, "body": "It might be easier not to use channels at all"}, {"owner": {"reputation": 1017, "user_id": 2576956, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/98TKO.jpg?s=128&g=1", "display_name": "bvpx", "link": "https://stackoverflow.com/users/2576956/bvpx"}, "edited": false, "score": 0, "creation_date": 1458247809, "post_id": 36022817, "comment_id": 59788951, "body": "could you please post the <code>testing</code> package as well as the <code>main</code> package that goes along with <code>cbhdl</code> in your github repo?"}, {"owner": {"reputation": 763, "user_id": 5986227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-R58sngDauK0/AAAAAAAAAAI/AAAAAAAAB_0/pzxD2AYGNQA/photo.jpg?sz=128", "display_name": "Chris Hopkins", "link": "https://stackoverflow.com/users/5986227/chris-hopkins"}, "edited": false, "score": 0, "creation_date": 1458413300, "post_id": 36022817, "comment_id": 59853498, "body": "The guthub link is the full test case. I know that&#39;s bad practice for a library but fot a test case I wanted to get it into a single file to make it easier to acquire. Is it not working for you?"}], "owner": {"reputation": 763, "user_id": 5986227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-R58sngDauK0/AAAAAAAAAAI/AAAAAAAAB_0/pzxD2AYGNQA/photo.jpg?sz=128", "display_name": "Chris Hopkins", "link": "https://stackoverflow.com/users/5986227/chris-hopkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 574, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1458078296, "creation_date": 1458078296, "question_id": 36022817, "link": "https://stackoverflow.com/questions/36022817/golang-event-model", "title": "Golang Event Model", "body": "<p>So my problem stems from I thought I'd be awfully clever and try and model hardware in Golang. Yes, use it for the sort of thing that in my day job I write in Verilog.</p>\n\n<p>To start off I'm trying to do the simplest possible hardware pipeline. i.e. a data source that pushes data to a Reg stage which pushes it to the next Reg which pushes it to a sink stage. Things can only advance on the clock. The problem is the event manager seems to have it in for me.\nStarting at the data being sent on a clock </p>\n\n<pre><code>  select {\n    case out_chan &lt;- tmp:\n      front_chan = saved_front_chan\n      out_chan = nil\n      fmt.Println(\"Sent Data, \", tmp, name)\n    default:\n      c.ckwg.Done() // Send failed so remove token\n      if out_chan != nil {\n        log.Fatal(\"Stalled, Can't send \", tmp, name)\n       } else {\n        fmt.Println(\"Nothing to send \", name)\n      }\n    }\n</code></pre>\n\n<p>i.e. if we can send the data, do, if we can't then fine; but if we can't send data then the front end receiver (see main code) doesn't get re-enabled for reception.\nThis is sending to a front end which is a bit simpler</p>\n\n<pre><code>for itm := range in_chan {\n        c.ckwg.Done()\n        fmt.Println(\"Front Channel received\", itm, name)\n        saved_front_chan &lt;- itm\n    }\n</code></pre>\n\n<p>Note the use of a sync.WaitGroup to make sure that this code is run before the end of the clock evaluation phase.\nSo far so good. The problem is <em>sometimes</em> one of these front ends will have sucessfully \"saved_front_chan &lt;- itm\" but will not have got around back to listening on in_chan.</p>\n\n<p>This will mean that the previous stage in the pipeline will think it is stalled.\nNow this would be fine in a data processing pipeline, but for something that's trying to model hardware to some degree of accuracy it is not. (For this test case I'm modelling a pipeline that tries to support stalls but has no need to stall, so doesn't) As far as I can see though there are no tricks left to me to force the scheduler to have the loop ready to read. Fundamentally I need to know the difference between \"Channel can't receive because of pipeline back pressure\" and \"Channel can't receive because the scheduler hasn't got around to that routine yet.\"</p>\n\n<p>So the full code is here:</p>\n\n<p><a href=\"https://github.com/cbehopkins/cbhdl/blob/master/pipe_test.go\" rel=\"nofollow\">https://github.com/cbehopkins/cbhdl/blob/master/pipe_test.go</a></p>\n\n<p>For context, the specification I am actually trying to meet is a stage that only advances the data on a clock pulse, and that clock pulse is supplied to all stages \"Simultaneously\". Yes I know nothing is really in parallel but I'm trying to fake that behavior. Specifically it must appear that the inputs are sampled at the start of the clock phase and then the data is output at the end of the clock phase. Crucially in the faking of the parallelism it must not matter which order the reg stages receive their clock pulses. I have also experimented with the flow control not being done by golang channel back pressure but by a separate token system - but that got stupendously complex and error prone. </p>\n\n<p>FWIW I have another trial version of this where the broadcast of the clock pulse is done with sync package broadcast structure - but that code got in the way of demonstrating the problem I'm having.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": false, "score": 1, "last_activity_date": 1458140095, "last_edit_date": 1458140095, "creation_date": 1458081284, "answer_id": 36023554, "question_id": 36022253, "link": "https://stackoverflow.com/questions/36022253/bufio-reader-readrune-size-0-return-value-possible/36023554#36023554", "title": "bufio.Reader ReadRune - size 0 (return value) possible?", "body": "<p>There is no case where the bufio.Reader ReadRune method returns size == 0 and err == nil.</p>\n\n<p>The method reads a rune or a single byte in the case where a valid rune cannot be read. In both cases, the size returned is greater than zero.</p>\n"}], "owner": {"reputation": 262, "user_id": 5528070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-IYABogD9sxI/AAAAAAAAAAI/AAAAAAAACNE/ZIt8C6XSB3U/photo.jpg?sz=128", "display_name": "Christopher", "link": "https://stackoverflow.com/users/5528070/christopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458140095, "creation_date": 1458076368, "last_edit_date": 1458076428, "question_id": 36022253, "link": "https://stackoverflow.com/questions/36022253/bufio-reader-readrune-size-0-return-value-possible", "title": "bufio.Reader ReadRune - size 0 (return value) possible?", "body": "<p>Can ReadRune really ever have a size 0 return value when an error is nil?</p>\n\n<p>I'm curious because I've seen some online examples with the following code:</p>\n\n<pre><code>//assuming input = *bufio.Reader\nr, size, err := input.ReadRune()\nif size == 0 &amp;&amp; err == nil {\n    return 0, nil\n} else if err != nil {\n    return 0, err\n}\nreturn r, nil\n</code></pre>\n\n<p>However, according to the go documentation:</p>\n\n<blockquote>\n  <p>If the encoded rune is invalid, it consumes one byte and returns unicode.ReplacementChar (U+FFFD) with a size of 1.</p>\n</blockquote>\n\n<p>So in what case would a size 0 rune be returned when the error is nil?</p>\n"}, {"tags": ["json", "elasticsearch", "go"], "comments": [{"owner": {"reputation": 10358, "user_id": 1211175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/il5eC.jpg?s=128&g=1", "display_name": "Endre Simo", "link": "https://stackoverflow.com/users/1211175/endre-simo"}, "edited": false, "score": 0, "creation_date": 1458074897, "post_id": 36021671, "comment_id": 59694916, "body": "Why you are not appending the query term when you are unmarshaling?"}], "answers": [{"tags": [], "owner": {"reputation": 13739, "user_id": 38333, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2ea7c27233a9019a1f91a821726a4d4?s=128&d=identicon&r=PG", "display_name": "cd1", "link": "https://stackoverflow.com/users/38333/cd1"}, "is_accepted": false, "score": 2, "last_activity_date": 1458075803, "creation_date": 1458075803, "answer_id": 36022093, "question_id": 36021671, "link": "https://stackoverflow.com/questions/36021671/elastigo-and-go-search-using-raw-json-string-with-variables/36022093#36022093", "title": "Elastigo and Go, Search Using Raw json String with variables", "body": "<p>You can use <a href=\"https://golang.org/pkg/text/template\" rel=\"nofollow\">templates</a> to fill in that value:</p>\n\n<pre><code>term := \"\\\"my search term\\\"\"\n\nsearchJSONTmpl := `{\n        \"size\" : \"size\",\n        \"query\" : {\n            \"match\" : {\n                \"_all\" : {\n                    \"query\" : {{.Term}},\n                    \"operator\" : \"and\"  \n                }\n            }\n        },\n        \"sort\" : [{\n            \"name\" : { \n                \"order\" : \"asc\", \n                \"mode\" : \"avg\" \n            }\n        }]\n    }`\n\ntmpl, err := template.New(\"blah\").Parse(searchJSONTmpl)\nif err != nil {\n    log.Fatal(err)\n}   \n\ndata := map[string]string{\n    \"Term\": term,\n}   \n\nif err := tmpl.Execute(os.Stdout, data); err != nil {\n    log.Fatal(err)\n}\n</code></pre>\n\n<p>If you want to store the new JSON string into a variable, use <a href=\"https://golang.org/pkg/bytes/#Buffer\" rel=\"nofollow\"><code>bytes.Buffer</code></a> instead of <code>os.Stdout</code> when executing the template.</p>\n"}], "owner": {"reputation": 213, "user_id": 442008, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d6ff846a79ee3dbf5c815150537fe573?s=128&d=identicon&r=PG", "display_name": "Sanx", "link": "https://stackoverflow.com/users/442008/sanx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458075803, "creation_date": 1458074450, "question_id": 36021671, "link": "https://stackoverflow.com/questions/36021671/elastigo-and-go-search-using-raw-json-string-with-variables", "title": "Elastigo and Go, Search Using Raw json String with variables", "body": "<p>This site have an example of elasticsearch query in go:</p>\n\n<p><a href=\"https://github.com/mattbaird/elastigo\" rel=\"nofollow\">https://github.com/mattbaird/elastigo</a></p>\n\n<p>The example is this:</p>\n\n<p>A search using raw json string</p>\n\n<pre><code>searchJson := `{\n    \"query\" : {\n        \"term\" : { \"user\" : \"kimchy\" }\n    }\n}`\nout, err := core.SearchRequest(true, \"twitter\", \"tweet\", searchJson, \"\")\nif len(out.Hits.Hits) == 1 {\n  fmt.Println(string(out.Hits.Hits[0].Source))\n}\n</code></pre>\n\n<p>But i need something like this:</p>\n\n<p><strong>A varible inside a raw json string</strong></p>\n\n<pre><code>term := \"my search term\"\n\nsearchJson := `{\n        \"size\" : \"size\",\n        \"query\" : {\n            \"match\" : {\n                \"_all\" : {\n                    \"query\" : term,\n                    \"operator\" : \"and\"  \n                }\n            }\n        },\n        \"sort\" : [{\n            \"name\" : { \n                \"order\" : \"asc\", \n                \"mode\" : \"avg\" \n            }\n        }]\n    }`\n</code></pre>\n\n<p>How can i put a varible <strong>term</strong> inside a raw json string?</p>\n\n<p>Is posible put a varible inside a raw json string?</p>\n"}, {"tags": ["go", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 486, "user_id": 1006745, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/98e993a8f9e52bf16c83a3be3fcbbb09?s=128&d=identicon&r=PG", "display_name": "Computer User", "link": "https://stackoverflow.com/users/1006745/computer-user"}, "edited": false, "score": 0, "creation_date": 1458074453, "post_id": 36020877, "comment_id": 59694674, "body": "Thanks for the suggestion. I updated my example above. The end result is the same unfortunately. data.db is created but nothing is saved to the file after the script has finished running."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 486, "user_id": 1006745, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/98e993a8f9e52bf16c83a3be3fcbbb09?s=128&d=identicon&r=PG", "display_name": "Computer User", "link": "https://stackoverflow.com/users/1006745/computer-user"}, "edited": false, "score": 0, "creation_date": 1458074988, "post_id": 36020877, "comment_id": 59694969, "body": "@ComputerUser: missed that you&#39;re using Query too."}, {"owner": {"reputation": 830, "user_id": 3872894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100006705821837/picture?type=large", "display_name": "Jared Hooper", "link": "https://stackoverflow.com/users/3872894/jared-hooper"}, "edited": false, "score": 0, "creation_date": 1472480762, "post_id": 36020877, "comment_id": 65756243, "body": "@JimB can you defer the close statement?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 830, "user_id": 3872894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100006705821837/picture?type=large", "display_name": "Jared Hooper", "link": "https://stackoverflow.com/users/3872894/jared-hooper"}, "edited": false, "score": 0, "creation_date": 1472481036, "post_id": 36020877, "comment_id": 65756405, "body": "@Hooper: As long as it get&#39;s called it doesn&#39;t matter if it&#39;s in a defer or not, but that&#39;s kind of obvious, so is there a reason you&#39;re asking?"}, {"owner": {"reputation": 830, "user_id": 3872894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100006705821837/picture?type=large", "display_name": "Jared Hooper", "link": "https://stackoverflow.com/users/3872894/jared-hooper"}, "edited": false, "score": 0, "creation_date": 1472481598, "post_id": 36020877, "comment_id": 65756732, "body": "@JimB You&#39;re right. Nope - I was thinking of something else."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 8, "last_activity_date": 1458074977, "last_edit_date": 1458074977, "creation_date": 1458071670, "answer_id": 36020877, "question_id": 36020664, "link": "https://stackoverflow.com/questions/36020664/instantiating-an-sqlite-database-with-go/36020877#36020877", "title": "Instantiating an sqlite database with go?", "body": "<p>You're not closing the database, so the changes aren't flushed to the database file.</p>\n\n<p>Make sure you execute <code>db.Close()</code>.</p>\n\n<p>You then need to use the <code>Exec</code> method, not <code>Query</code> to modify the database.</p>\n\n<pre><code>_, err = db.Exec(\"CREATE TABLE `customers` (`till_id` INTEGER PRIMARY KEY AUTOINCREMENT, `client_id` VARCHAR(64) NULL, `first_name` VARCHAR(255) NOT NULL, `last_name` VARCHAR(255) NOT NULL, `guid` VARCHAR(255) NULL, `dob` DATETIME NULL, `type` VARCHAR(1))\")\nif err != nil {\n    log.Fatal(err)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13739, "user_id": 38333, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2ea7c27233a9019a1f91a821726a4d4?s=128&d=identicon&r=PG", "display_name": "cd1", "link": "https://stackoverflow.com/users/38333/cd1"}, "is_accepted": false, "score": 2, "last_activity_date": 1458074969, "creation_date": 1458074969, "answer_id": 36021824, "question_id": 36020664, "link": "https://stackoverflow.com/questions/36020664/instantiating-an-sqlite-database-with-go/36021824#36021824", "title": "Instantiating an sqlite database with go?", "body": "<p>You need to use the function <code>Exec</code> instead of <code>Query</code> to create a table. Take a look at the documentation for those functions:</p>\n\n<p><a href=\"https://golang.org/pkg/database/sql/#DB.Query\" rel=\"nofollow\">func (*DB) Query</a></p>\n\n<pre><code>Query executes a query that returns rows, typically a SELECT. The args are for any placeholder parameters in the query.\n</code></pre>\n\n<p><a href=\"https://golang.org/pkg/database/sql/#DB.Exec\" rel=\"nofollow\">func (*DB) Exec</a></p>\n\n<pre><code>Exec executes a query without returning any rows. The args are for any placeholder parameters in the query.\n</code></pre>\n"}], "owner": {"reputation": 486, "user_id": 1006745, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/98e993a8f9e52bf16c83a3be3fcbbb09?s=128&d=identicon&r=PG", "display_name": "Computer User", "link": "https://stackoverflow.com/users/1006745/computer-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5099, "favorite_count": 2, "accepted_answer_id": 36020877, "answer_count": 2, "score": 8, "last_activity_date": 1458074977, "creation_date": 1458070974, "last_edit_date": 1458074267, "question_id": 36020664, "link": "https://stackoverflow.com/questions/36020664/instantiating-an-sqlite-database-with-go", "title": "Instantiating an sqlite database with go?", "body": "<p>I have extracted the code below from my application. I am trying to create a new directory, put an sqlite database in it, then create a table in the database.</p>\n\n<p>Currently it creates the directory, a file for the db to exist in and it runs without any errors. However, the db file is empty. I cannot figure out why it is empty.</p>\n\n<p>Does anyone know how to modify this code so the content remains in the database?</p>\n\n<pre><code>package main\n\nimport (\n    \"os\"\n    \"database/sql\"\n    \"fmt\"\n    _ \"github.com/mattn/go-sqlite3\"\n)\n\nfunc main() {\n    os.MkdirAll(\"./data/1234\", 0755)\n    os.Create(\"./data/1234/data.db\")\n\n    db, err := sql.Open(\"sqlite3\", \"./data/1234/data.db\")\n    if err != nil {\n        fmt.Println(err)\n        os.Exit(1)\n    }\n\n    _, err = db.Query(\"CREATE TABLE `customers` (`till_id` INTEGER PRIMARY KEY AUTOINCREMENT, `client_id` VARCHAR(64) NULL, `first_name` VARCHAR(255) NOT NULL, `last_name` VARCHAR(255) NOT NULL, `guid` VARCHAR(255) NULL, `dob` DATETIME NULL, `type` VARCHAR(1))\")\n    if err != nil {\n        fmt.Println(err)\n        os.Exit(1)\n    }\n\n    db.Close()\n}\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 911, "user_id": 4728636, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/yQ2Rl.jpg?s=128&g=1", "display_name": "anonrose", "link": "https://stackoverflow.com/users/4728636/anonrose"}, "reply_to_user": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1458069000, "post_id": 36019815, "comment_id": 59691547, "body": "Ya I looked at that, looks like they&#39;re not using the composite literal initialization."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 1, "creation_date": 1458069102, "post_id": 36019815, "comment_id": 59691602, "body": "Yes, it is not used in a composite literal, but that doesn&#39;t change the fact that they want to achieve the same goal: to discard the returned 2nd value (error). Please read the answer too which suggests a <code>MustXXX()</code> helper function to do just that."}, {"owner": {"reputation": 911, "user_id": 4728636, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/yQ2Rl.jpg?s=128&g=1", "display_name": "anonrose", "link": "https://stackoverflow.com/users/4728636/anonrose"}, "reply_to_user": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1458069188, "post_id": 36019815, "comment_id": 59691650, "body": "So there isn&#39;t a way to do it in one line?"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1458069254, "post_id": 36019815, "comment_id": 59691695, "body": "No. Your options are listed in this answer: <a href=\"http://stackoverflow.com/a/28487270/1705598\">Return map like &#39;ok&#39; in golang on normal functions</a>. <i>(Actually you could do it in one line too but that would be uglier - see <a href=\"http://stackoverflow.com/questions/30716354/how-do-i-do-a-literal-int64-in-go#30716481\">this answer</a> for the techniques.)</i>"}, {"owner": {"reputation": 646, "user_id": 4335622, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-OeTdPDQRltk/AAAAAAAAAAI/AAAAAAAAAE4/KXT0pHbxg9s/photo.jpg?sz=128", "display_name": "i.van", "link": "https://stackoverflow.com/users/4335622/i-van"}, "edited": false, "score": 0, "creation_date": 1458120550, "post_id": 36019815, "comment_id": 59712599, "body": "Sadly, but there is no way to do it in one line."}], "answers": [{"tags": [], "owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "is_accepted": false, "score": 10, "last_activity_date": 1458068524, "creation_date": 1458068524, "answer_id": 36019904, "question_id": 36019815, "link": "https://stackoverflow.com/questions/36019815/is-there-a-way-to-ignore-an-error-return-value-in-golang/36019904#36019904", "title": "Is there a way to ignore an error return value in Golang?", "body": "<p>You can ignore a return value using <code>_</code> on the left hand side of assignment however, I don't think there is any way to do it while using the 'composite literal' initialization style you have in your example.</p>\n\n<p>IE I can do <code>returnValue1, _ := SomeFuncThatReturnsAresultAndAnError()</code> but if you tried that in your example like;</p>\n\n<pre><code>ts := &amp;student{\n    name: td[0],\n    ssn: td[2],\n    next: students.next,\n    age, _: strconv.Atoi(td[1]),\n  }\n</code></pre>\n\n<p>It will also generate a compiler error.</p>\n"}], "owner": {"reputation": 911, "user_id": 4728636, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/yQ2Rl.jpg?s=128&g=1", "display_name": "anonrose", "link": "https://stackoverflow.com/users/4728636/anonrose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17385, "favorite_count": 1, "closed_date": 1458069199, "answer_count": 1, "score": 8, "last_activity_date": 1458068524, "creation_date": 1458068257, "question_id": 36019815, "link": "https://stackoverflow.com/questions/36019815/is-there-a-way-to-ignore-an-error-return-value-in-golang", "closed_reason": "Duplicate", "title": "Is there a way to ignore an error return value in Golang?", "body": "<p>I'm trying to initialize a struct in Go, one of my values is being which returns both an int and an error if one was encountered converted from a string using <code>strconv.Atoi(\"val\")</code>.</p>\n\n<p>My question is : Is there a way to ignore an error return value in Golang?</p>\n\n<pre><code>ts := &amp;student{\n    name: td[0],\n    ssn: td[2],\n    next: students.next,\n    age: strconv.Atoi(td[1]),\n  }\n</code></pre>\n\n<p>which gives the error</p>\n\n<pre><code>multiple-value strconv.Atoi() in single-value context\n</code></pre>\n\n<p>if I add in the err, which i don't want to include in my struct, I will get an error that I am using a method that is not defined in the struct.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1458068300, "post_id": 36019806, "comment_id": 59691125, "body": "No, it&#39;s just a struct tag. Some package is making use of that, but it&#39;s not part of the language per say."}, {"owner": {"reputation": 2679, "user_id": 3081480, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UVerL.jpg?s=128&g=1", "display_name": "Kyle Chadha", "link": "https://stackoverflow.com/users/3081480/kyle-chadha"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1458068470, "post_id": 36019806, "comment_id": 59691223, "body": "Okay, I see that now. They&#39;re checking the tag later and skipping it in the logs. Thanks @JimB, if you want to make that an answer I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 3, "last_activity_date": 1458068768, "creation_date": 1458068768, "answer_id": 36019984, "question_id": 36019806, "link": "https://stackoverflow.com/questions/36019806/what-are-filtered-field-tags-in-golang-structs/36019984#36019984", "title": "What are filtered field tags in Golang structs?", "body": "<p>There is no special meaning assigned to struct tags by the language, they are interpreted by the package looking for them. </p>\n\n<p>In this case, <code>filtered:true</code> means something to the package that uses the <code>User</code> type, and acts on that however it sees fit. This is the same as how the <code>json:</code> tags work in <a href=\"https://golang.org/pkg/encoding/json/#Marshal\" rel=\"nofollow\"><code>encoding/json</code></a>.</p>\n"}], "owner": {"reputation": 2679, "user_id": 3081480, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/UVerL.jpg?s=128&g=1", "display_name": "Kyle Chadha", "link": "https://stackoverflow.com/users/3081480/kyle-chadha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 36019984, "answer_count": 1, "score": 0, "last_activity_date": 1458068768, "creation_date": 1458068225, "question_id": 36019806, "link": "https://stackoverflow.com/questions/36019806/what-are-filtered-field-tags-in-golang-structs", "title": "What are filtered field tags in Golang structs?", "body": "<pre><code>type User struct {\n    Id                int\n    Password          string `filtered:\"true\"`\n}\n</code></pre>\n\n<p>Referring to the <code>filtered: \"true\"</code> part. Never seen this anywhere else, and can't find anything in the spec about it. Presumably it's similar to not exporting a field?</p>\n\n<p>Does anyone have more information?</p>\n"}, {"tags": ["pointers", "go", "function-pointers"], "comments": [{"owner": {"reputation": 15792, "user_id": 816721, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8444cf72fac7e9065e0c68d70246a36d?s=128&d=identicon&r=PG", "display_name": "rkmax", "link": "https://stackoverflow.com/users/816721/rkmax"}, "edited": false, "score": 2, "creation_date": 1458068244, "post_id": 36019754, "comment_id": 59691098, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/8263546/whats-the-difference-of-functions-and-methods-in-go\">Whats the difference of functions and methods in Go?</a>"}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1458075656, "post_id": 36019754, "comment_id": 59695372, "body": "<a href=\"http://stackoverflow.com/questions/23542989/pointers-vs-values-in-parameters-and-return-values/23551970#23551970\">&quot;Pointers vs. values in parameters and return values&quot;</a> talks about some related issues."}], "answers": [{"tags": [], "owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "is_accepted": false, "score": 1, "last_activity_date": 1458069345, "last_edit_date": 1458069345, "creation_date": 1458068157, "answer_id": 36019791, "question_id": 36019754, "link": "https://stackoverflow.com/questions/36019754/should-i-define-my-funcs-with-a-pointer-to-the-struct-or-just-on-the-struct/36019791#36019791", "title": "Should I define my funcs with a pointer to the struct or just on the struct?", "body": "<p>There isn't a clear answer but they're completely different. When you don't use a pointer you 'pass by value' meaning the object you called it on will be immutable (modifying a copy), when you use the pointer you 'pass by reference'. I would say more often you use the pointer variety but it is completely situational, there is no 'better way'.</p>\n\n<p>If you look at various programming frameworks/class libraries you will see many examples where the authors have deliberately chosen to do things by value or reference. For example, in C# .NET this is the fundamental difference between a struct and a class and types like <code>Guid</code> and <code>DateTime</code> were deliberately implemented as structs (value type). Again, I think the pointer is more often the better choice (if you look through .NET almost everything is a class, the reference type), but it definitely depends on what you wish to achieve with the type and/or how you want consumers/other developers to interact with it. Your may need to consider performance and concurrency (maybe you want everything to be by value so you don't have to worry about concurrent ops on a type, maybe you need a pointer because the objects memory footprint is large and copying it would make your program too slow or consumptive).</p>\n"}, {"tags": [], "owner": {"reputation": 13739, "user_id": 38333, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2ea7c27233a9019a1f91a821726a4d4?s=128&d=identicon&r=PG", "display_name": "cd1", "link": "https://stackoverflow.com/users/38333/cd1"}, "is_accepted": false, "score": 2, "last_activity_date": 1458075366, "creation_date": 1458075366, "answer_id": 36021949, "question_id": 36019754, "link": "https://stackoverflow.com/questions/36019754/should-i-define-my-funcs-with-a-pointer-to-the-struct-or-just-on-the-struct/36021949#36021949", "title": "Should I define my funcs with a pointer to the struct or just on the struct?", "body": "<p>Take a look at this item from <a href=\"https://golang.org/doc/faq#methods_on_values_or_pointers\" rel=\"nofollow\">the official FAQ</a>:</p>\n\n<blockquote>\n  <p>For programmers unaccustomed to pointers, the distinction between\n  these two examples can be confusing, but the situation is actually\n  very simple. When defining a method on a type, the receiver (s in the\n  above examples) behaves exactly as if it were an argument to the\n  method. Whether to define the receiver as a value or as a pointer is\n  the same question, then, as whether a function argument should be a\n  value or a pointer. There are several considerations.</p>\n  \n  <p>First, and most important, does the method need to modify the\n  receiver? If it does, the receiver must be a pointer. (Slices and maps\n  act as references, so their story is a little more subtle, but for\n  instance to change the length of a slice in a method the receiver must\n  still be a pointer.) In the examples above, if pointerMethod modifies\n  the fields of s, the caller will see those changes, but valueMethod is\n  called with a copy of the caller's argument (that's the definition of\n  passing a value), so changes it makes will be invisible to the caller.</p>\n  \n  <p>By the way, pointer receivers are identical to the situation in Java,\n  although in Java the pointers are hidden under the covers; it's Go's\n  value receivers that are unusual.</p>\n  \n  <p>Second is the consideration of efficiency. If the receiver is large, a\n  big struct for instance, it will be much cheaper to use a pointer\n  receiver.</p>\n  \n  <p>Next is consistency. If some of the methods of the type must have\n  pointer receivers, the rest should too, so the method set is\n  consistent regardless of how the type is used. See the section on\n  method sets for details.</p>\n  \n  <p>For types such as basic types, slices, and small structs, a value\n  receiver is very cheap so unless the semantics of the method requires\n  a pointer, a value receiver is efficient and clear.</p>\n</blockquote>\n"}], "owner": {"reputation": 4263, "user_id": 148736, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/98ce675339d7e7c8269349943d6a0823?s=128&d=identicon&r=PG", "display_name": "Andrew Arrow", "link": "https://stackoverflow.com/users/148736/andrew-arrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1458075366, "creation_date": 1458068039, "last_edit_date": 1458069027, "question_id": 36019754, "link": "https://stackoverflow.com/questions/36019754/should-i-define-my-funcs-with-a-pointer-to-the-struct-or-just-on-the-struct", "title": "Should I define my funcs with a pointer to the struct or just on the struct?", "body": "<p>In go I seem to have two options:</p>\n\n<pre><code>foo := Thing{}\nfoo.bar()\n\nfoo := &amp;Thing{}\nfoo.bar()\n\n\nfunc (self Thing) bar() {\n}\n\nfunc (self *Thing) bar() {\n}\n</code></pre>\n\n<p>What's the better way to define my funcs with self Thing or with self *Thing?</p>\n\n<p>Edit: this is not a duplicate of the question about methods and functions. This question has to do with Thing and &amp;Thing and I think it's different enough to warrent it's own url.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 2, "creation_date": 1458061936, "post_id": 36017724, "comment_id": 59686879, "body": "Yes. Separate entries : or ; depending on OS."}], "answers": [{"tags": [], "owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "is_accepted": false, "score": 14, "last_activity_date": 1458061969, "creation_date": 1458061969, "answer_id": 36017836, "question_id": 36017724, "link": "https://stackoverflow.com/questions/36017724/can-i-have-multiple-gopath-directories/36017836#36017836", "title": "Can I have multiple GOPATH directories?", "body": "<p>Yes.</p>\n\n<p>To cite Go itself:</p>\n\n<pre><code>$ go help gopath\n</code></pre>\n\n<blockquote>\n  <p>The Go path is used to resolve import statements.\n  It is implemented by and documented in the go/build package.</p>\n  \n  <p>The GOPATH environment variable lists places to look for Go code.<br/>\n  On Unix, the value is a colon-separated string.<br/>\n  On Windows, the value is a semicolon-separated string.<br/>\n  On Plan 9, the value is a list.</p>\n  \n  <p>GOPATH must be set to get, build and install packages outside the\n  standard Go tree.</p>\n  \n  <p>Each directory listed in GOPATH must have a prescribed structure:</p>\n  \n  <p>The src directory holds source code.  The path below src\n  determines the import path or executable name.</p>\n  \n  <p>...</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 337, "user_id": 1920214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f138092492c317d91304aa0af579caf6?s=128&d=identicon&r=PG", "display_name": "payneio", "link": "https://stackoverflow.com/users/1920214/payneio"}, "edited": false, "score": 15, "creation_date": 1458086112, "post_id": 36017866, "comment_id": 59699777, "body": "Unfortunately, this still causes all kinds of grief as tooling doesn&#39;t seem to handle multiple GOPATH well. For example, vendor directories are only picked up in the first item in the path; <code>go get</code> only works against the first item in the path; most (all?) vendor management tools don&#39;t expect to have more than one item in the path; different workpaths are considered to be in different &quot;trees&quot;. And, packages in more than one location (vendored) get a bit screwy. I&#39;m still trying to figure all this out, but haven&#39;t found a good solution, yet."}, {"owner": {"reputation": 487, "user_id": 214891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCG7w.jpg?s=128&g=1", "display_name": "Richard Varno", "link": "https://stackoverflow.com/users/214891/richard-varno"}, "edited": false, "score": 0, "creation_date": 1612108760, "post_id": 36017866, "comment_id": 116657843, "body": "Great answer (and totally solved my problem with the dreaded: Error loading workspace: You are outside of a module and outside of $GOPATH/src. If you are using modules, please open your editor to a directory in your module.)  Thanks!"}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 74, "last_activity_date": 1458063792, "last_edit_date": 1458063792, "creation_date": 1458062074, "answer_id": 36017866, "question_id": 36017724, "link": "https://stackoverflow.com/questions/36017724/can-i-have-multiple-gopath-directories/36017866#36017866", "title": "Can I have multiple GOPATH directories?", "body": "<p>Yes, <code>GOPATH</code> is a list of directories (like <code>PATH</code>). Run <code>go help gopath</code> for details. For example, on Linux, I have:</p>\n\n<pre><code>$ go env\nGOROOT=\"/home/peter/go\"\nGOPATH=\"/home/peter/gopath:/home/peter/public/gopath\"\n$\n</code></pre>\n\n<p>I have something similar on Windows.</p>\n\n<p>Note: Linux uses <code>:</code> as the <code>GOPATH</code> list separator; Windows uses <code>;</code> as the separator.</p>\n\n<p>If you use <code>go get</code> it will default to the first directory in the list.</p>\n\n<p>Run <code>go env</code> to check that everything is correct.</p>\n"}, {"tags": [], "owner": {"reputation": 2543, "user_id": 436085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a4d1a5b8d2c2a24c350f360e7e6bce1?s=128&d=identicon&r=PG", "display_name": "Edoardo", "link": "https://stackoverflow.com/users/436085/edoardo"}, "is_accepted": false, "score": 23, "last_activity_date": 1504591028, "creation_date": 1504591028, "answer_id": 46047870, "question_id": 36017724, "link": "https://stackoverflow.com/questions/36017724/can-i-have-multiple-gopath-directories/46047870#46047870", "title": "Can I have multiple GOPATH directories?", "body": "<p><a href=\"https://dmitri.shuralyov.com/blog/18\" rel=\"noreferrer\">This blog post</a> gives a very nice explanation about how and why one would set multiple values in GOPATH, especially when it says:</p>\n\n<blockquote>\n  <p>My GOPATH consists of 3 folders or GOPATH workspaces.</p>\n  \n  <p>The first one is my <strong>landing workspace</strong>. Since it's listed first, whenever I go get any new package, it always ends up in this workspace.</p>\n  \n  <p>Go searches each directory listed in GOPATH to find source code, but new packages are always downloaded into the first directory in the list.\n  I make it a rule to never do any development in there, so it's always completely safe to clean this folder whenever it gets too large (with Go packages I don't use). After all, it only has Go packages that I can get again with go get.</p>\n  \n  <p>My second workspace is for all <strong>my personal Go packages</strong> and any other packages I may want to \"favorite\" or do some development on. I move things I use regularly from first workspace into second.</p>\n  \n  <p>My third workspace is dedicated to <strong>the private Go packages from my work</strong>, and their dependencies. It's convenient to have my work packages separate from all my personal stuff, so they don't get in each other's way.</p>\n</blockquote>\n"}], "owner": {"reputation": 4263, "user_id": 148736, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/98ce675339d7e7c8269349943d6a0823?s=128&d=identicon&r=PG", "display_name": "Andrew Arrow", "link": "https://stackoverflow.com/users/148736/andrew-arrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37417, "favorite_count": 13, "accepted_answer_id": 36017866, "answer_count": 3, "score": 51, "last_activity_date": 1504591028, "creation_date": 1458061624, "question_id": 36017724, "link": "https://stackoverflow.com/questions/36017724/can-i-have-multiple-gopath-directories", "title": "Can I have multiple GOPATH directories?", "body": "<p>I set my GOPATH to</p>\n\n<pre><code>/Users/me/dev/go\n</code></pre>\n\n<p>and I have</p>\n\n<pre><code>/Users/me/dev/go/src/client1\n/Users/me/dev/go/src/client2\n/Users/me/dev/go/src/client3\n</code></pre>\n\n<p>and also</p>\n\n<pre><code>/Users/me/dev/client1/rails_project\n/Users/me/dev/client2/php_project\netc.\n</code></pre>\n\n<p>I don't like how in my root dev folder I'm forced to have this general \"go\" dir that holds many different client's go projects.</p>\n"}, {"tags": ["go", "xml-parsing"], "answers": [{"tags": [], "owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "is_accepted": true, "score": 1, "last_activity_date": 1458060473, "creation_date": 1458060473, "answer_id": 36017309, "question_id": 36015394, "link": "https://stackoverflow.com/questions/36015394/how-to-represent-alternates-in-a-go-xml-struct-tag/36017309#36017309", "title": "How to represent alternates in a Go xml struct tag", "body": "<p>Your code is almost working; <a href=\"http://play.golang.org/p/rj3FtOJSw_\" rel=\"nofollow\">here's the fixed version</a>.</p>\n\n<p>Basically you need the following adjustments:</p>\n\n<ul>\n<li><p>In struct tags, the values&mdash;bits after the <code>xml:</code> prefix&mdash;must be enclosed in double quotes, like this:</p>\n\n<pre><code>`xml:\"foo,attr\"`\n</code></pre></li>\n<li><p>There's no need to specify the <code>,chardata</code> bit when you already just want to get whatever is between the element's tags.</p></li>\n<li><p>To extract the <code>&lt;function&gt;</code> element just provide a data type for is: the parser will extract it if it's present or not if it's absent.</p>\n\n<p>To tell whether there was <code>&lt;function&gt;</code> or not, you can check the value of the <code>PrintValue</code> field: if it's not all-whitespace, there was no <code>&lt;function&gt;</code> element; otherwise there was.</p>\n\n<p>Alternatively, define a separate <code>struct</code> data type for unmarshaling this element, and have the field for it defined as a pointer to that type,\nlike in</p>\n\n<pre><code>type Function struct { ... }\n...\nFunction *Function `xml:\"function\"`\n</code></pre>\n\n<p>This way, if there was no <code>&lt;function&gt;</code> element the field's value will be <code>nil</code>, otherwise it will point to a heap-allocated <code>Function</code> instance.</p></li>\n</ul>\n"}], "owner": {"reputation": 2392, "user_id": 620679, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb547106a24ce46841e936a917ed610d?s=128&d=identicon&r=PG", "display_name": "Scott Deerwester", "link": "https://stackoverflow.com/users/620679/scott-deerwester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 36017309, "answer_count": 1, "score": 2, "last_activity_date": 1458060473, "creation_date": 1458055383, "question_id": 36015394, "link": "https://stackoverflow.com/questions/36015394/how-to-represent-alternates-in-a-go-xml-struct-tag", "title": "How to represent alternates in a Go xml struct tag", "body": "<p>I'm trying to write the appropriate set of struct tags to parse the <a href=\"http://unitsofmeasure.org/ucum-essence.xml\" rel=\"nofollow\">XML version of UCUM</a>. Following are two examples of the <code>unit</code> tag:</p>\n\n<pre><code>&lt;unit Code=\"deg\" CODE=\"DEG\" isMetric=\"no\" class=\"iso1000\"&gt;\n   &lt;name&gt;degree&lt;/name&gt;\n   &lt;printSymbol&gt;&amp;#176;&lt;/printSymbol&gt;\n   &lt;property&gt;plane angle&lt;/property&gt;\n   &lt;value Unit=\"[pi].rad/360\" UNIT=\"[PI].RAD/360\" value=\"2\"&gt;2&lt;/value&gt;\n&lt;/unit&gt;\n\n&lt;unit Code=\"[degF]\" CODE=\"[DEGF]\" isMetric=\"no\" isSpecial=\"yes\" class=\"heat\"&gt;\n   &lt;name&gt;degree Fahrenheit&lt;/name&gt;\n   &lt;printSymbol&gt;&amp;#176;F&lt;/printSymbol&gt;\n   &lt;property&gt;temperature&lt;/property&gt;\n   &lt;value Unit=\"degf(5 K/9)\" UNIT=\"DEGF(5 K/9)\"&gt;\n      &lt;function name=\"degF\" value=\"5\" Unit=\"K/9\"/&gt;\n   &lt;/value&gt;\n&lt;/unit&gt;\n</code></pre>\n\n<p>The tricky part is the contents of the <code>value</code> tag, which can either be a string (which I'd represent with a string attribute) or a function (which would require a struct of its own). Here's what I've got so far:</p>\n\n<pre><code>type Unit struct {\n    Code             string `xml:Code,attr`\n    CodeCaps         string `xml:CODE,attr`\n    IsMetric         bool   `xml:isMetric,attr,omitempty`\n    IsSpecial        bool   `xml:isEmptySpecial,attr,omitempty`\n    Class            string `xml:class,attr`\n    Name             string `xml:name`\n    PrintSymbol      string `xml:printSymbol,chardata`\n    DimensionTypeKey string `xml:property,chardata`\n    Value            struct {\n        Unit       string `xml:Unit,attr`\n        UnitCaps   string `xml:UNIT,attr`\n        Value      string `xml:Value,attr`\n        PrintValue string `xml:,chardata`\n        Function   struct { ... }\n    } `xml:value`\n}\n</code></pre>\n\n<p>How do I accurately describe this XML with struct tags?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1458052859, "post_id": 36014343, "comment_id": 59680171, "body": "You can&#39;t with what you&#39;ve shown. What is setting the values? Is it up to the programmer or via a package like json, database/sql?"}, {"owner": {"reputation": 4177, "user_id": 610584, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/XOWZg.jpg?s=128&g=1", "display_name": "Nathan Lippi", "link": "https://stackoverflow.com/users/610584/nathan-lippi"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1458052979, "post_id": 36014343, "comment_id": 59680283, "body": "@JimB: Thank you.  I&#39;m going to be processing data from an API.  I&#39;m assuming there&#39;s a way to do this with Unmarshal but I didn&#39;t want to make the scope of the question too large."}], "answers": [{"comments": [{"owner": {"reputation": 4177, "user_id": 610584, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/XOWZg.jpg?s=128&g=1", "display_name": "Nathan Lippi", "link": "https://stackoverflow.com/users/610584/nathan-lippi"}, "edited": false, "score": 0, "creation_date": 1458053548, "post_id": 36014403, "comment_id": 59680752, "body": "Thank you Grzegorz!  Very helpful."}], "tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": true, "score": 11, "last_activity_date": 1458053208, "last_edit_date": 1458053208, "creation_date": 1458052842, "answer_id": 36014403, "question_id": 36014343, "link": "https://stackoverflow.com/questions/36014343/go-how-to-check-if-a-struct-property-was-explicitly-set-to-a-zero-value/36014403#36014403", "title": "Go: How to check if a struct property was explicitly set to a zero value?", "body": "<p>It is simply impossible to distinguish.</p>\n\n<p>If you are unmarshalling data from XML or JSON, use pointers.</p>\n\n<pre><code>type Animal struct {\n    Name *string\n    LegCount *int\n}\n</code></pre>\n\n<p>You will get <code>nil</code> values for absent fields.</p>\n\n<p>You can use the same convention in your case.</p>\n"}], "owner": {"reputation": 4177, "user_id": 610584, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/XOWZg.jpg?s=128&g=1", "display_name": "Nathan Lippi", "link": "https://stackoverflow.com/users/610584/nathan-lippi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 36014403, "answer_count": 1, "score": 7, "last_activity_date": 1458053208, "creation_date": 1458052696, "question_id": 36014343, "link": "https://stackoverflow.com/questions/36014343/go-how-to-check-if-a-struct-property-was-explicitly-set-to-a-zero-value", "title": "Go: How to check if a struct property was explicitly set to a zero value?", "body": "<pre><code>type Animal struct {\n    Name string\n    LegCount int\n}\n\nsnake := Animal{Name: \"snake\", LegCount: 0}\nworm := Animal{Name: \"worm\"}\n</code></pre>\n\n<p><strong>Question:</strong> How can I check <code>snake</code> and <code>worm</code> after they've been set, to tell that:</p>\n\n<ol>\n<li><code>snake</code> was explicitly set with a <code>LegCount</code> of 0.</li>\n<li>The <code>worm</code>'s <code>LegCount</code> was not explicitly set (and therefore based off of its default value)?</li>\n</ol>\n"}, {"tags": ["function", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 5, "creation_date": 1458041381, "post_id": 36009327, "comment_id": 59671479, "body": "You can&#39;t. That&#39;s the way the language works."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 6, "creation_date": 1458041741, "post_id": 36009327, "comment_id": 59671728, "body": "The whole idea of &quot;private&quot; is to be non-accessible."}, {"owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "edited": false, "score": 1, "creation_date": 1583951411, "post_id": 36009327, "comment_id": 107288510, "body": "Actually it is possible, see my answer."}], "answers": [{"tags": [], "owner": {"reputation": 23294, "user_id": 2891324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d27f03cd98b59774911f8dea5ee00b?s=128&d=identicon&r=PG", "display_name": "nessuno", "link": "https://stackoverflow.com/users/2891324/nessuno"}, "is_accepted": false, "score": 8, "last_activity_date": 1458043527, "creation_date": 1458043527, "answer_id": 36010857, "question_id": 36009327, "link": "https://stackoverflow.com/questions/36009327/how-to-access-private-functions-of-another-package-in-golang/36010857#36010857", "title": "How to access private functions of another package in Golang?", "body": "<p>Private functions are, by definition, not accessible outside the package in which they are declared.</p>\n\n<p>If you need that function outside that package, you must make it public (change the function name, turning the first letter in upper case).</p>\n\n<p>Eg: if you have <code>func doSomething()</code> rename it to <code>func DoSomething()</code> and use it outside the package with <code>&lt;package name&gt;.DoDomething()</code></p>\n"}, {"tags": [], "owner": {"reputation": 646, "user_id": 4335622, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-OeTdPDQRltk/AAAAAAAAAAI/AAAAAAAAAE4/KXT0pHbxg9s/photo.jpg?sz=128", "display_name": "i.van", "link": "https://stackoverflow.com/users/4335622/i-van"}, "is_accepted": true, "score": 5, "last_activity_date": 1458046251, "creation_date": 1458046251, "answer_id": 36011850, "question_id": 36009327, "link": "https://stackoverflow.com/questions/36009327/how-to-access-private-functions-of-another-package-in-golang/36011850#36011850", "title": "How to access private functions of another package in Golang?", "body": "<p>You can also add public proxy-function.</p>\n\n<p>For example:</p>\n\n<p>You have package-private function</p>\n\n<pre><code>func foo() int {\n    return 42\n}\n</code></pre>\n\n<p>You can create public function in the same package, which will call the package-private function and return it's result</p>\n\n<pre><code>func Bar() int {\n    return foo()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3587, "user_id": 7824574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a639be4c9ecc139065fbc6b12b87e6a9?s=128&d=identicon&r=PG&f=1", "display_name": "typetetris", "link": "https://stackoverflow.com/users/7824574/typetetris"}, "edited": false, "score": 3, "creation_date": 1498045496, "post_id": 44674998, "comment_id": 76334239, "body": "You are assuming, that he approves altering the source of the package."}], "tags": [], "owner": {"reputation": 31, "user_id": 8193917, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CoeFqrTWWY4/AAAAAAAAAAI/AAAAAAAACe4/WRlKiJ97tm0/photo.jpg?sz=128", "display_name": "Mirek Walczak", "link": "https://stackoverflow.com/users/8193917/mirek-walczak"}, "is_accepted": false, "score": 3, "last_activity_date": 1498045007, "creation_date": 1498045007, "answer_id": 44674998, "question_id": 36009327, "link": "https://stackoverflow.com/questions/36009327/how-to-access-private-functions-of-another-package-in-golang/44674998#44674998", "title": "How to access private functions of another package in Golang?", "body": "<p>in the package (let's say mypackage) where you have pastry function add:</p>\n\n<pre><code>var Pastry = pastry\n</code></pre>\n\n<p>in main package:</p>\n\n<pre><code>mypackage.Pastry()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 774, "user_id": 6393636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a13a6bc94b135d28bb51aaa361c24a51?s=128&d=identicon&r=PG", "display_name": "Melardev", "link": "https://stackoverflow.com/users/6393636/melardev"}, "edited": false, "score": 0, "creation_date": 1597322624, "post_id": 60642357, "comment_id": 112099052, "body": "what about a struct function?"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1604325967, "post_id": 60642357, "comment_id": 114305522, "body": "Warning: unexported variables like <code>int</code> or <code>bool</code> are often <i>inlined</i>. <code>go:linkname</code> will be of no help in changing those at run time."}], "tags": [], "owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "is_accepted": false, "score": 7, "last_activity_date": 1583951335, "last_edit_date": 1583951335, "creation_date": 1583950996, "answer_id": 60642357, "question_id": 36009327, "link": "https://stackoverflow.com/questions/36009327/how-to-access-private-functions-of-another-package-in-golang/60642357#60642357", "title": "How to access private functions of another package in Golang?", "body": "<p>You can use <code>go:linkname</code> to map functions from same/different package\nto some function in yours. For example like:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n\n    _ \"net\"\n    _ \"unsafe\"\n)\n\n//go:linkname lookupStaticHost net.lookupStaticHost\nfunc lookupStaticHost(host string) []string\n\nfunc main() {\n    fmt.Println(lookupStaticHost(\"localhost\"))\n}\n</code></pre>\n\n<p>will produce <code>[127.0.0.1 ::1]</code> when executed on my machine.</p>\n"}], "owner": {"reputation": 75, "user_id": 6065905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f30cf12a574bc1dd5fa5ce49ef2604?s=128&d=identicon&r=PG", "display_name": "jjs", "link": "https://stackoverflow.com/users/6065905/jjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5382, "favorite_count": 1, "accepted_answer_id": 36011850, "answer_count": 4, "score": 0, "last_activity_date": 1583951335, "creation_date": 1458039542, "question_id": 36009327, "link": "https://stackoverflow.com/questions/36009327/how-to-access-private-functions-of-another-package-in-golang", "title": "How to access private functions of another package in Golang?", "body": "<p>I want to access a private function of a package called \"pastry\". But it generates error as:\ninvalid reference to unexported identifier</p>\n\n<p>Specify the way by which private functions of golang are accessible in main.</p>\n"}, {"tags": ["http", "go"], "comments": [{"owner": {"reputation": 28098, "user_id": 86072, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dd41ab60469c4ee32c957c97fc101b9d?s=128&d=identicon&r=PG", "display_name": "LeGEC", "link": "https://stackoverflow.com/users/86072/legec"}, "edited": false, "score": 0, "creation_date": 1458029172, "post_id": 36005489, "comment_id": 59662850, "body": "Log the urls that hit the &quot;handler&quot; function (in a file, or on stdout). You are probably receiving extra requests for favicon or such."}, {"owner": {"reputation": 1582, "user_id": 4604899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WyuD9.jpg?s=128&g=1", "display_name": "Julien Chien", "link": "https://stackoverflow.com/users/4604899/julien-chien"}, "reply_to_user": {"reputation": 28098, "user_id": 86072, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dd41ab60469c4ee32c957c97fc101b9d?s=128&d=identicon&r=PG", "display_name": "LeGEC", "link": "https://stackoverflow.com/users/86072/legec"}, "edited": false, "score": 0, "creation_date": 1458029771, "post_id": 36005489, "comment_id": 59663160, "body": "Don&#39;t know why I didn&#39;t think of that. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 1582, "user_id": 4604899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WyuD9.jpg?s=128&g=1", "display_name": "Julien Chien", "link": "https://stackoverflow.com/users/4604899/julien-chien"}, "edited": false, "score": 0, "creation_date": 1458029714, "post_id": 36005663, "comment_id": 59663136, "body": "Ok. I&#39;m logging it and this is what I found: each time my browser hits the url it also requests a favicon, like you @aedolon and @simo said. Also, it seems for <code>localhost:8000&#47;count&quot;, </code>handler` and <code>counter</code> are both hit. Interesting stuff."}, {"owner": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "reply_to_user": {"reputation": 1582, "user_id": 4604899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WyuD9.jpg?s=128&g=1", "display_name": "Julien Chien", "link": "https://stackoverflow.com/users/4604899/julien-chien"}, "edited": false, "score": 0, "creation_date": 1458029987, "post_id": 36005663, "comment_id": 59663266, "body": "Your browser likely (different browsers may behave differently) tries to grab favicon also when accessing /count, but favicon requests are all handled by <code>handler</code>, because &quot;/&quot; is the best and only match for &quot;/favicon.ico&quot;."}, {"owner": {"reputation": 28098, "user_id": 86072, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dd41ab60469c4ee32c957c97fc101b9d?s=128&d=identicon&r=PG", "display_name": "LeGEC", "link": "https://stackoverflow.com/users/86072/legec"}, "reply_to_user": {"reputation": 1582, "user_id": 4604899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WyuD9.jpg?s=128&g=1", "display_name": "Julien Chien", "link": "https://stackoverflow.com/users/4604899/julien-chien"}, "edited": false, "score": 0, "creation_date": 1458030090, "post_id": 36005663, "comment_id": 59663317, "body": "@LeibnizMan: again, check all the urls that are hit when you load the &quot;/count&quot; page. Maybe your browser sends extra requests. The amount and repetition of requests for favicon.ico depends on your browser and how it caches stuff : on my PC (firefox - linux), I only see the <code>+3</code> step on the first page load ; after that, the counter is incremented &quot;as expected&quot;."}], "tags": [], "owner": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "is_accepted": true, "score": 2, "last_activity_date": 1458029465, "creation_date": 1458029465, "answer_id": 36005663, "question_id": 36005489, "link": "https://stackoverflow.com/questions/36005489/running-a-simple-server-but-the-counter-seems-to-go-up-by-3-why/36005663#36005663", "title": "Running a simple server, but the counter seems to go up by 3, why?", "body": "<p>The extra requests are your browser trying to access /favicon.ico</p>\n\n<p>You can see this, for example, if you print the http.Request to stdout in your handler funcs.</p>\n"}, {"comments": [{"owner": {"reputation": 1582, "user_id": 4604899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WyuD9.jpg?s=128&g=1", "display_name": "Julien Chien", "link": "https://stackoverflow.com/users/4604899/julien-chien"}, "edited": false, "score": 0, "creation_date": 1458029759, "post_id": 36005687, "comment_id": 59663156, "body": "Thanks for the answer. I accepted @Aedolon&#39;s because he was the first - but you&#39;re equally right as far as I can tell :D"}], "tags": [], "owner": {"reputation": 10358, "user_id": 1211175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/il5eC.jpg?s=128&g=1", "display_name": "Endre Simo", "link": "https://stackoverflow.com/users/1211175/endre-simo"}, "is_accepted": false, "score": 1, "last_activity_date": 1458029802, "last_edit_date": 1495535280, "creation_date": 1458029543, "answer_id": 36005687, "question_id": 36005489, "link": "https://stackoverflow.com/questions/36005489/running-a-simple-server-but-the-counter-seems-to-go-up-by-3-why/36005687#36005687", "title": "Running a simple server, but the counter seems to go up by 3, why?", "body": "<p>The issue is that your handler is serving extra static content like <code>favicon</code> and such. If you log the request, you'll see your browser is probably also requesting \n/favicon.ico, which is being passed to that same handler. </p>\n\n<p>To serve static content one way is to create your own <a href=\"https://golang.org/pkg/net/http/#NewServeMux\" rel=\"nofollow noreferrer\">ServeMux</a>:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"strings\"\n)   \n\nvar chttp = http.NewServeMux()\n\nfunc main() {\n\n    chttp.Handle(\"/\", http.FileServer(http.Dir(\"./\")))\n\n    http.HandleFunc(\"/\", HomeHandler) // homepage\n    http.ListenAndServe(\":8080\", nil)\n}   \n\nfunc HomeHandler(w http.ResponseWriter, r *http.Request) {\n\n    if (strings.Contains(r.URL.Path, \".\")) {\n        chttp.ServeHTTP(w, r)\n    } else {\n        fmt.Fprintf(w, \"HomeHandler\")\n    }   \n} \n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/14086063/serve-homepage-and-static-content-from-root\">Serve homepage and static content from root</a></p>\n"}], "owner": {"reputation": 1582, "user_id": 4604899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WyuD9.jpg?s=128&g=1", "display_name": "Julien Chien", "link": "https://stackoverflow.com/users/4604899/julien-chien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "closed_date": 1458031854, "accepted_answer_id": 36005663, "answer_count": 2, "score": -3, "last_activity_date": 1458029802, "creation_date": 1458028793, "question_id": 36005489, "link": "https://stackoverflow.com/questions/36005489/running-a-simple-server-but-the-counter-seems-to-go-up-by-3-why", "closed_reason": "Duplicate", "title": "Running a simple server, but the counter seems to go up by 3, why?", "body": "<p>I have this little server here. The intent is that if I visit localhost:8000/* it should increase <code>counter</code> by 1, and if I go to localhost:8000/count, it should show me the current number of <code>counter</code>. </p>\n\n<p>A weird thing happening is that it seems like every time I visit <code>localhost:8000</code>, the counter goes up by 3. So I'd go to <code>localhost:8000/count</code> and the <code>counter</code> would be at 3, and then I visit <code>localhost:8000</code>, and then <code>localhost:8000/count</code> again, <code>counter</code> would now be at 6. Why does that happen? Is there something weird with <code>net/http</code>?</p>\n\n<p>Also, why is it that when I refresh <code>localhost:8000/count</code>, the count goes up 1 by 1? The <code>counter</code> func doesn't increment <code>count</code>, yet <code>count</code> still goes up - why is that? Does <code>handler</code> get added to the <code>localhost:8000/count</code> route as well? </p>\n\n<pre><code>package main\n\nimport (\n        \"fmt\"\n        \"log\"\n        \"net/http\"\n        \"sync\"\n)\n\nvar mu sync.Mutex\nvar count int\n\nfunc main() {\n        http.HandleFunc(\"/\", handler)\n        http.HandleFunc(\"/count\", counter)\n        log.Fatal(http.ListenAndServe(\"localhost:8000\", nil))\n}\n\n// handler echoes the Path component of the requested URL.\nfunc handler(w http.ResponseWriter, r *http.Request) {\n        mu.Lock()\n        count++\n        mu.Unlock()\n        fmt.Fprintf(w, \"URL.Path = %q\\n\", r.URL.Path)\n}\n\n// counter echoes the number of calls so far.\nfunc counter(w http.ResponseWriter, r *http.Request) {\n        mu.Lock()\n        fmt.Fprintf(w, \"Count %d\\n\", count)\n        mu.Unlock()\n}\n</code></pre>\n"}, {"tags": ["go", "oauth", "request", "google-oauth", "token"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1458015756, "post_id": 36002536, "comment_id": 59657637, "body": "Print out (log) the value of <code>code</code> during the request. Is it empty?"}, {"owner": {"reputation": 2495, "user_id": 4760425, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1415935128722296/picture?type=large", "display_name": "necroface", "link": "https://stackoverflow.com/users/4760425/necroface"}, "reply_to_user": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1458023516, "post_id": 36002536, "comment_id": 59660223, "body": "It is. I don&#39;t know why few days ago, when I logged, it logged code, token, even profile"}], "answers": [{"tags": [], "owner": {"reputation": 2495, "user_id": 4760425, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1415935128722296/picture?type=large", "display_name": "necroface", "link": "https://stackoverflow.com/users/4760425/necroface"}, "is_accepted": true, "score": 0, "last_activity_date": 1458030956, "last_edit_date": 1458030956, "creation_date": 1458024053, "answer_id": 36004297, "question_id": 36002536, "link": "https://stackoverflow.com/questions/36002536/go-oauth2-cannot-fetch-token-bad-request/36004297#36004297", "title": "go - oauth2 cannot fetch token: bad request", "body": "<p>I can solve it by adding one more handler</p>\n\n<pre><code>var (\n    conf *oauth2.Config\n)\n\nfunc GoogleCallbackHandler(w http.ResponseWriter, r *http.Request) {\n    conf=&amp;oauth2.Config{\n        ClientID:\"700740834863-m4om9r91htn19htq2b6a05fu6vu4j7i5.apps.googleusercontent.com\",\n        ClientSecret:\"...-rB\",\n        RedirectURL:\"http://localhost:3000/auth/google/callback\",\n        Scopes:[]string{\"profile\"},\n        Endpoint:google.Endpoint,\n    }\n\n    http.Redirect(w, r, conf.AuthCodeURL(\"state\"), http.StatusMovedPermanently)\n}\n\nfunc GoogleLoginHandler(w http.ResponseWriter, r *http.Request) {\n    code := r.URL.Query().Get(\"code\")\n\n    token, err := conf.Exchange(oauth2.NoContext, code)\n    if err != nil {\n        http.Error(w, err.Error(), http.StatusInternalServerError)\n        return\n    }\n\n    client := conf.Client(oauth2.NoContext, token)\n    resp, err := client.Get(\"https://www.googleapis.com/userinfo/v2/me\")\n    if err != nil {\n        http.Error(w, err.Error(), http.StatusInternalServerError)\n        return\n    }\n\n    raw, err := ioutil.ReadAll(resp.Body)\n    defer resp.Body.Close()\n    if err != nil {\n        http.Error(w, err.Error(), http.StatusInternalServerError)\n        return\n    }\n\n    var profile map[string]interface{}\n    if err := json.Unmarshal(raw, &amp;profile); err != nil {\n        http.Error(w, err.Error(), http.StatusInternalServerError)\n        return\n    }\n\n    session, _ := util.GlobalSessions.SessionStart(w, r)\n    defer session.SessionRelease(w)\n\n    session.Set(\"id_token\", token.Extra(\"id_token\"))\n    session.Set(\"access_token\", token.AccessToken)\n    session.Set(\"profile\", profile)\n\n    http.Redirect(w, r, \"/user\", http.StatusMovedPermanently)\n}\n</code></pre>\n"}], "owner": {"reputation": 2495, "user_id": 4760425, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1415935128722296/picture?type=large", "display_name": "necroface", "link": "https://stackoverflow.com/users/4760425/necroface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3651, "favorite_count": 0, "accepted_answer_id": 36004297, "answer_count": 1, "score": 2, "last_activity_date": 1458030956, "creation_date": 1458015006, "last_edit_date": 1495542248, "question_id": 36002536, "link": "https://stackoverflow.com/questions/36002536/go-oauth2-cannot-fetch-token-bad-request", "title": "go - oauth2 cannot fetch token: bad request", "body": "<p>I write a callback handler to login with Google account:</p>\n\n<pre><code>func GoogleCallbackHandler(w http.ResponseWriter, r *http.Request) {\n    conf:=&amp;oauth2.Config{\n        ClientID:\"700740834863-m4om9r91htn19htq2b6a05fu6vu4j7i5.apps.googleusercontent.com\",\n        ClientSecret:\"...-rB\",\n        RedirectURL:\"http://localhost:3000/auth/google/callback\",\n        Scopes:[]string{\"profile\"},\n        Endpoint:google.Endpoint,\n    }\n\n    fmt.Println(conf.AuthCodeURL(\"state\"))\n\n    code := r.URL.Query().Get(\"code\")\n\n    token, err := conf.Exchange(oauth2.NoContext, code)\n    if err != nil {\n        http.Error(w, err.Error(), http.StatusInternalServerError)\n        return\n    }\n\n    client := conf.Client(oauth2.NoContext, token)\n    resp, err := client.Get(\"https://www.googleapis.com/userinfo/v2/me\")\n    if err != nil {\n        http.Error(w, err.Error(), http.StatusInternalServerError)\n        return\n    }\n\n    raw, err := ioutil.ReadAll(resp.Body)\n    defer resp.Body.Close()\n    if err != nil {\n        http.Error(w, err.Error(), http.StatusInternalServerError)\n        return\n    }\n\n    var profile map[string]interface{}\n    if err := json.Unmarshal(raw, &amp;profile); err != nil {\n        http.Error(w, err.Error(), http.StatusInternalServerError)\n        return\n    }\n\n    session, _ := util.GlobalSessions.SessionStart(w, r)\n    defer session.SessionRelease(w)\n\n    session.Set(\"id_token\", token.Extra(\"id_token\"))\n    session.Set(\"access_token\", token.AccessToken)\n    session.Set(\"profile\", profile)\n\n    // // Redirect to logged in page\n\n    http.Redirect(w, r, \"/user\", http.StatusMovedPermanently)\n}\n</code></pre>\n\n<p>In <code>main</code>, I serve handlers</p>\n\n<pre><code>http.HandleFunc(\"/\",route.IndexHandler)\nhttp.HandleFunc(\"/auth/google/\",route.GoogleCallbackHandler)\nhttp.Handle(\"/user\",negroni.New(\n    negroni.HandlerFunc(route.IsAuthenticated),\n    negroni.Wrap(http.HandlerFunc(route.UserHandler)),\n))\n</code></pre>\n\n<p>I encounter the same problem I got with my old question:\n<a href=\"https://stackoverflow.com/questions/35860811/oauth2-cannot-fetch-token-bad-request/\">oauth2 cannot fetch token: bad request</a></p>\n\n<pre><code>oauth2: cannot fetch token: 400 Bad Request\nResponse: {\n  \"error\" : \"invalid_request\",\n  \"error_description\" : \"Missing required parameter: code\"\n}\n</code></pre>\n\n<p>After I asked this question last time, I managed to fix it with my above code, accessing and getting data successfully, but last night it suddenly got this error again, and I don't get why it no longer works after last few days working with totally same code</p>\n\n<p>How can I get the <code>code</code> from <code>AuthCodeURL</code>? Is there any way to get the code for exchanging without redirecting to any other handler? I want to handle all things in just one this handler</p>\n"}, {"tags": ["go", "docker"], "answers": [{"tags": [], "owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "is_accepted": true, "score": 2, "last_activity_date": 1458043541, "last_edit_date": 1458043541, "creation_date": 1458043083, "answer_id": 36010699, "question_id": 36002205, "link": "https://stackoverflow.com/questions/36002205/golang-project-cant-find-dependencies-when-run-inside-a-docker-container/36010699#36010699", "title": "golang project can&#39;t find dependencies when run inside a docker container", "body": "<p>Actually you successfully got the Go server running. It wasn't hanging, just waiting for connections. Due to some quirks, there's no output: it didn't attempt to connect to the database, and logging statements were buffered.</p>\n\n<p>Try modifying gateway.go main:</p>\n\n<pre><code>func main() {\n    log.Println(\"Starting main...\")\n\n    conn := os.ExpandEnv(\"root:${MYSQL_SERVER_PASSWORD}@mysql_server:3306/${MYSQL_DATABASE}\")\n\n    var err error\n    db, err = sql.Open(\"mysql\", conn)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    log.Println(\"pinging\", conn)\n    if err := db.Ping(); err != nil {\n        log.Fatal(err)\n    }\n\n    r := mux.NewRouter()\n    r.HandleFunc(\"/todos\", getTodos).Methods(\"GET\")\n\n    listen := \":8080\"\n    log.Printf(\"Listening on %s\\n\", listen)\n    log.Fatal(http.ListenAndServe(listen, r))\n}\n</code></pre>\n\n<p>Running this version gives:</p>\n\n<pre><code>$ docker-compose up gateway\nmysql_server is up-to-date\nStarting gateway\nAttaching to gateway\ngateway | 2016/03/15 10:58:05 Starting main...\ngateway | 2016/03/15 10:58:05 pinging root:@mysql_server:3306/sandbox\ngateway | 2016/03/15 10:58:05 default addr for network 'mysql_server:3306' unknown\ngateway | exit status 1\ngateway exited with code 1\n</code></pre>\n\n<p>You should be good to go from there. Note:</p>\n\n<ul>\n<li>docker-compose seems to buffer standard output until newline</li>\n<li>log functions such as log.Print add newlines, fmt.Print doesn't</li>\n<li>sql.Open doesn't connect to the database, use sql.Ping (see <a href=\"https://github.com/go-sql-driver/mysql/wiki/Examples\" rel=\"nofollow\">wiki</a>)</li>\n<li>MYSQL_SERVER_PASSWORD is missing</li>\n<li>network type of the mysql connection string is missing (see <a href=\"https://github.com/go-sql-driver/mysql#examples\" rel=\"nofollow\">examples</a>)</li>\n<li>start mysql server too</li>\n<li>need to create new or mount existing database 'sandbox'</li>\n</ul>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6279634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28075644d73eb98899391510c913f125?s=128&d=identicon&r=PG&f=1", "display_name": "Artur", "link": "https://stackoverflow.com/users/6279634/artur"}, "is_accepted": false, "score": 0, "last_activity_date": 1463076212, "last_edit_date": 1463076212, "creation_date": 1463072087, "answer_id": 37193084, "question_id": 36002205, "link": "https://stackoverflow.com/questions/36002205/golang-project-cant-find-dependencies-when-run-inside-a-docker-container/37193084#37193084", "title": "golang project can&#39;t find dependencies when run inside a docker container", "body": "<p>First - need to change <code>${MYSQL_SERVER_PASSWORD}</code> on <code>${MYSQL_ROOT_PASSWORD}</code>, because environment only has <code>MYSQL_ROOT_PASSWORD</code> variable.</p>\n\n<p>Second - this is wrong <code>@mysql_server:3306</code>, correct one is <code>@tcp(mysql_server:3306)</code> to be able to connect to MySQL via TCP.</p>\n\n<pre><code>conn := os.ExpandEnv(\"root:${MYSQL_ROOT_PASSWORD}@tcp(mysql_server:3306)/${MYSQL_DATABASE}\")\n</code></pre>\n\n<p>All will work fine, the only problem can be while db initializing need to make pause before run main program. There are sever ways to solve this problem here are few methods <a href=\"https://docs.docker.com/compose/startup-order/\" rel=\"nofollow\">https://docs.docker.com/compose/startup-order/</a></p>\n"}, {"tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 1, "last_activity_date": 1463073467, "creation_date": 1463073467, "answer_id": 37193531, "question_id": 36002205, "link": "https://stackoverflow.com/questions/36002205/golang-project-cant-find-dependencies-when-run-inside-a-docker-container/37193531#37193531", "title": "golang project can&#39;t find dependencies when run inside a docker container", "body": "<p>It looks like, in my opinion, that the primary problem here is that you aren't building your Go program ahead of time. It looks like you've put the Go source files in the Docker container and you're relying on <code>go run</code> to build and then run the program.</p>\n\n<p>I guess you can do that? It's very script language style that way.</p>\n\n<p>However, the way that I think works best is to build the Go application ahead of time.</p>\n\n<p><em>(Note, for the following I adapted existing makefile code but I didn't actually run this.)</em><br>\nFor example, you could build it like this:</p>\n\n<pre><code>CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -a -tags netgo -installsuffix netgo -o ./gateway/gateway ./gateway\n</code></pre>\n\n<p>Then, assuming that you don't need other stuff in that container, you can build the Docker image with a Dockerfile like:</p>\n\n<pre><code>FROM scratch\nENTRYPOINT [\"/gateway\"]\nADD ./gateway/gateway /gateway\n</code></pre>\n\n<p>Resulting in a simple, small (about 8 MB) container with one static linked executable in it.</p>\n"}], "owner": {"reputation": 12542, "user_id": 480807, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fd3c806f94926cbe683f3ddc878ae4d3?s=128&d=identicon&r=PG", "display_name": "Casey Flynn", "link": "https://stackoverflow.com/users/480807/casey-flynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1787, "favorite_count": 1, "accepted_answer_id": 36010699, "answer_count": 3, "score": 2, "last_activity_date": 1463076212, "creation_date": 1458012689, "last_edit_date": 1458014696, "question_id": 36002205, "link": "https://stackoverflow.com/questions/36002205/golang-project-cant-find-dependencies-when-run-inside-a-docker-container", "title": "golang project can&#39;t find dependencies when run inside a docker container", "body": "<p>I have this golang sandbox project:\n<a href=\"https://github.com/cflynn07/golang-db-gateway-example\" rel=\"nofollow\">https://github.com/cflynn07/golang-db-gateway-example</a></p>\n\n<p>When I try to run <code>gateway/gateway.go</code> inside a <code>golang:1.6.0-alpine</code></p>\n\n<pre><code>~/g/s/g/c/golang-db-gateway-example git:master \u276f\u276f\u276f docker-compose up gateway\nmysql_server is up-to-date\nStarting gateway\nAttaching to gateway\ngateway | gateway.go:7:2: cannot find package \"github.com/go-sql-driver/mysql\" in any of:\ngateway |   /usr/local/go/src/github.com/go-sql-driver/mysql (from $GOROOT)\ngateway |   /go/src/github.com/go-sql-driver/mysql (from $GOPATH)\ngateway | gateway.go:8:2: cannot find package \"github.com/gorilla/mux\" in any of:\ngateway |   /usr/local/go/src/github.com/gorilla/mux (from $GOROOT)\ngateway |   /go/src/github.com/gorilla/mux (from $GOPATH)\ngateway exited with code 1\n</code></pre>\n\n<p>Why isn't the build step detecting my project's dependencies inside the <code>/example/vendor</code> folder?</p>\n\n<p>When I run <code>go run gateway/gateway.go</code> from my host OS, the command works.</p>\n\n<p><strong>Directory structure (mounted inside container at /example)</strong></p>\n\n<pre><code>~/g/s/g/c/golang-db-gateway-example git:master \u276f\u276f\u276f tree -L 3\n.\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 client\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 client.go\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 gateway\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 gateway.go\n\u251c\u2500\u2500 glide.lock\n\u251c\u2500\u2500 glide.yaml\n\u251c\u2500\u2500 tmp\n\u2514\u2500\u2500 vendor\n    \u2514\u2500\u2500 github.com\n        \u251c\u2500\u2500 go-sql-driver\n        \u2514\u2500\u2500 gorilla\n</code></pre>\n\n<hr>\n\n<p><br></p>\n\n<h2>Relevant files:</h2>\n\n<p><strong>docker-compose.yml</strong></p>\n\n<pre><code>mysql:\n  container_name: mysql_server\n  image: mysql:5.7.11\n  environment:\n    - MYSQL_ROOT_PASSWORD=root\n  ports:\n    - 3306\ngateway:\n  container_name: gateway\n  image: golang:1.6.0-alpine\n  volumes:\n    - ./:/example\n  working_dir: /example/gateway\n  command: go run gateway.go\n  environment:\n    - MYSQL_ROOT_PASSWORD=root\n    - MYSQL_DATABASE=sandbox\n  links:\n    - mysql\n</code></pre>\n\n<p><strong>gateway/gateway.go</strong></p>\n\n<pre><code>package main\n\nimport (\n    \"database/sql\"\n    \"encoding/json\"\n    \"fmt\"\n    _ \"github.com/go-sql-driver/mysql\"\n    \"github.com/gorilla/mux\"\n    \"net/http\"\n    \"os\"\n)\n\nvar db *sql.DB\n\nfunc main() {\n    r := mux.NewRouter()\n\n    var e error\n    db, e = sql.Open(\n        \"mysql\", os.ExpandEnv(\"root:${MYSQL_SERVER_PASSWORD}@mysql_server:3306/${MYSQL_DATABASE}\"))\n    fmt.Print(\"error is\", e)\n\n    r.HandleFunc(\"/todos\", getTodos).Methods(\"GET\")\n\n    http.ListenAndServe(\":8080\", r)\n    fmt.Printf(\"gateway\")\n}\n\ntype todo struct{}\n\nfunc getTodos(w http.ResponseWriter, r *http.Request) {\n    t := new(todo)\n    s, _ := json.Marshal(t)\n    w.Header().Set(\"Content-Type\", \"application/json; charset=UTF-8\")\n    fmt.Fprint(w, string(s))\n}\n</code></pre>\n\n<h2><br><br></h2>\n\n<p><strong>Update 1</strong>\nI changed my data-volume mount path inside the container to mount the project under the containers $GOPATH</p>\n\n<pre><code>mysql:\n  container_name: mysql_server\n  image: mysql:5.7.11\n  environment:\n    - MYSQL_ROOT_PASSWORD=root\n  ports:\n    - 3306\ngateway:\n  container_name: gateway\n  image: golang:1.6.0-alpine\n  volumes:\n    - ./:/go/src/github.com/cflynn07/golang-db-gateway-example\n  working_dir: /go/src/github.com/cflynn07/golang-db-gateway-example\n  command: go run gateway/gateway.go\n  environment:\n    - MYSQL_ROOT_PASSWORD=root\n    - MYSQL_DATABASE=sandbox\n  links:\n    - mysql\n</code></pre>\n\n<p>However now docker appears to hang:</p>\n\n<pre><code>~/g/s/g/c/golang-db-gateway-example git:master \u276f\u276f\u276f docker-compose up gateway                                                         \u2731\nmysql_server is up-to-date\nRecreating gateway\nAttaching to gateway\n</code></pre>\n"}, {"tags": ["mongodb", "go"], "comments": [{"owner": {"reputation": 43776, "user_id": 5031275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h8FTg.png?s=128&g=1", "display_name": "Blakes Seven", "link": "https://stackoverflow.com/users/5031275/blakes-seven"}, "edited": false, "score": 0, "creation_date": 1458013423, "post_id": 36002074, "comment_id": 59656998, "body": "What is wrong? All I really see is the order of elements is reversed, so <code>[ &quot;$a&quot;, &quot;$b&quot; ]</code> rather than <code>[ &quot;$b&quot;, &quot;$a&quot; ]</code>. Of course you can keep going and wrap the <code>$cond</code> for the <i>&#39;divide by zero&quot;</i> check, but once you have worked out one part, it should not be hard to get the rest of it."}, {"owner": {"reputation": 1725, "user_id": 2489933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65b4780597f3c3d23e629f8b1d30002f?s=128&d=identicon&r=PG", "display_name": "Jialin", "link": "https://stackoverflow.com/users/2489933/jialin"}, "reply_to_user": {"reputation": 43776, "user_id": 5031275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h8FTg.png?s=128&g=1", "display_name": "Blakes Seven", "link": "https://stackoverflow.com/users/5031275/blakes-seven"}, "edited": false, "score": 0, "creation_date": 1458015998, "post_id": 36002074, "comment_id": 59657698, "body": "Sorry, my mistake, the code is updated.I will try step by step."}, {"owner": {"reputation": 43776, "user_id": 5031275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h8FTg.png?s=128&g=1", "display_name": "Blakes Seven", "link": "https://stackoverflow.com/users/5031275/blakes-seven"}, "edited": false, "score": 0, "creation_date": 1458016391, "post_id": 36002074, "comment_id": 59657817, "body": "You could be more descriptive. Are you actually asking <i>&quot;How do I mix BSON types and an integer/double value in array elements?&quot;</i> That would be a lot more direct if you just were not sure how to structure the <code>$cond</code>. Again though, on the surface it looks correct, so I&#39;m not sure what the problem is here."}, {"owner": {"reputation": 1725, "user_id": 2489933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65b4780597f3c3d23e629f8b1d30002f?s=128&d=identicon&r=PG", "display_name": "Jialin", "link": "https://stackoverflow.com/users/2489933/jialin"}, "reply_to_user": {"reputation": 43776, "user_id": 5031275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h8FTg.png?s=128&g=1", "display_name": "Blakes Seven", "link": "https://stackoverflow.com/users/5031275/blakes-seven"}, "edited": false, "score": 0, "creation_date": 1458020941, "post_id": 36002074, "comment_id": 59659244, "body": "More details were added."}, {"owner": {"reputation": 43776, "user_id": 5031275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h8FTg.png?s=128&g=1", "display_name": "Blakes Seven", "link": "https://stackoverflow.com/users/5031275/blakes-seven"}, "edited": false, "score": 0, "creation_date": 1458022308, "post_id": 36002074, "comment_id": 59659711, "body": "Should that not be <code>operations := []bson.M{  group, project, sort }</code>? You have the stages in a different order, therefore the result of <code>$project</code> does not come through."}, {"owner": {"reputation": 1725, "user_id": 2489933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65b4780597f3c3d23e629f8b1d30002f?s=128&d=identicon&r=PG", "display_name": "Jialin", "link": "https://stackoverflow.com/users/2489933/jialin"}, "reply_to_user": {"reputation": 43776, "user_id": 5031275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h8FTg.png?s=128&g=1", "display_name": "Blakes Seven", "link": "https://stackoverflow.com/users/5031275/blakes-seven"}, "edited": false, "score": 0, "creation_date": 1458022662, "post_id": 36002074, "comment_id": 59659822, "body": "It works!~~~~~~Thank you very much!!!!!!!"}], "answers": [{"tags": [], "owner": {"reputation": 1725, "user_id": 2489933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65b4780597f3c3d23e629f8b1d30002f?s=128&d=identicon&r=PG", "display_name": "Jialin", "link": "https://stackoverflow.com/users/2489933/jialin"}, "is_accepted": false, "score": 0, "last_activity_date": 1458023804, "last_edit_date": 1495540227, "creation_date": 1458023804, "answer_id": 36004242, "question_id": 36002074, "link": "https://stackoverflow.com/questions/36002074/how-to-translate-this-mongo-query-cmd-using-golang/36004242#36004242", "title": "How to translate this mongo query cmd using golang", "body": "<p>Query conditions are right written,and these are worth being noticed :</p>\n\n<ol>\n<li>to writh $eq condition you should use interface slice in go</li>\n<li><p>Operation Order is important, to fix issue of the problem ,it should be</p>\n\n<p><strong>operations := []bson.M{group, project, sort}</strong></p></li>\n</ol>\n\n<p>thank <a href=\"https://stackoverflow.com/users/5031275/blakes-seven\">Blake Seven</a></p>\n"}], "owner": {"reputation": 1725, "user_id": 2489933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65b4780597f3c3d23e629f8b1d30002f?s=128&d=identicon&r=PG", "display_name": "Jialin", "link": "https://stackoverflow.com/users/2489933/jialin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 511, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458023804, "creation_date": 1458011893, "last_edit_date": 1458023092, "question_id": 36002074, "link": "https://stackoverflow.com/questions/36002074/how-to-translate-this-mongo-query-cmd-using-golang", "title": "How to translate this mongo query cmd using golang", "body": "<pre><code>db.demo.aggregate([ \n{$group:{_id:\"$name\",\n    a:{$sum:\"$a\"},\n    b:{$sum:\"$b\"}}},\n{$project:{name:1,a:1,b:1,_id:1,bdiva:{$cond:[{$eq:[\"$a\",0]},0,{$divide:[\"$b\",\"$a\"]}]}}},\n{$sort:{bdiva:1}}\n])\n</code></pre>\n\n<p>I'm using   \"gopkg.in/mgo.v2\" as mongo driver for Go \nand I try translating this query cmd:</p>\n\n<pre><code>project := bson.M{\n    \"$project\": bson.M{\n        \"name\": true, \"a\": true, \"b\": true,  \"_id\": true,\n        \"bdiva\": bson.M{\"$cond\": []interface{}{bson.M{\"$eq\": []interface{}{\"$a\", 0}}, 0, bson.M{\"$divide\": []interface{}{\"$b\", \"$a\"}}}},\n\n    },\n}\n\ngroup := bson.M{\n    \"$group\": bson.M{\n        \"_id\":  \"$name\",\n        \"a\":    bson.M{\"$sum\": \"$a\"},\n        \"b\":    bson.M{\"$sum\": \"$b\"},\n    },\n}\n\nsort := bson.M{\n    \"$sort\": bson.M{\n        \"bdiva\": 1,\n    },\n}\n</code></pre>\n\n<p>but I can't get <strong>bdiva</strong> right, how should I fix it?\n------what I tried----\nI execute the cmd in shell and get the result:\n<a href=\"https://i.stack.imgur.com/t9GJf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t9GJf.png\" alt=\"bdiva is there\"></a>\nfield <strong>bdiva</strong>  is outputted,\nbut when I run the go code,it Only output:\n<a href=\"https://i.stack.imgur.com/WioBq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WioBq.png\" alt=\"bdiva not found\"></a></p>\n\n<p>field <strong>bdiva</strong> is missing,why?</p>\n\n<p>The complete code:</p>\n\n<pre><code>func AggregateQueryDemo() {\n    println(\"//&lt;&lt;-------------------------AggregateQueryDemo start-----------\")\n    start := time.Now()\n\n    session, err := mgo.Dial(ADDRESSPORT)\n    if err != nil {\n        return\n    }\n    defer session.Close()\n    c := session.DB(DB).C(COLLECTION)\n\n    project := bson.M{\n        \"$project\": bson.M{\n            \"name\": true, \"a\": true, \"b\": true, \"suma\": true, \"sumb\": true, \"_id\": true,\n            \"bdiva\": bson.M{\"$cond\": []interface{}{bson.M{\"$eq\": []interface{}{\"$suma\", 0}}, 0, bson.M{\"$divide\": []interface{}{\"$sumb\", \"$suma\"}}}},\n        },\n    }\n\n    group := bson.M{\n        \"$group\": bson.M{\n            \"_id\":  \"$name\",\n            \"sumb\": bson.M{\"$sum\": \"$b\"},\n            \"suma\": bson.M{\"$sum\": \"$a\"},\n        },\n    }\n\n    sort := bson.M{\n        \"$sort\": bson.M{\n            \"bdiva\": 1,\n        },\n    }\n\n    operations := []bson.M{project, group, sort}\n    pipe := c.Pipe(operations)\n\n    ret := []interface {\n    }{}\n    err = pipe.All(&amp;ret)\n    if err != nil {\n        panic(err.Error())\n        return\n    }\n    for k, v := range ret {\n        fmt.Printf(\"%+v: %+v\\n\", k, v)\n    }\n    fmt.Printf(\" %v microseconds\\n\", time.Since(start)/1000000)\n    println(\"//---------------------------AggregateQueryDemo end-----------&gt;&gt;\")\n}\n</code></pre>\n"}, {"tags": ["random", "go", "numbers"], "comments": [{"owner": {"reputation": 7084, "user_id": 640277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14f57fec5c9a807c0eeff896afb5ad86?s=128&d=identicon&r=PG", "display_name": "Ezra", "link": "https://stackoverflow.com/users/640277/ezra"}, "edited": false, "score": 1, "creation_date": 1458009508, "post_id": 36001621, "comment_id": 59655878, "body": "What is your use case? To me, it seems like you want a string made of 8 digits more than a number <i>per se</i>? This answer may help: <a href=\"http://stackoverflow.com/questions/22892120/how-to-generate-a-random-string-of-a-fixed-length-in-golang\" title=\"how to generate a random string of a fixed length in golang\">stackoverflow.com/questions/22892120/&hellip;</a>"}, {"owner": {"reputation": 13026, "user_id": 2125837, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/760b6ec2b6e1cba2b0218178425f4cde?s=128&d=identicon&r=PG", "display_name": "xpt", "link": "https://stackoverflow.com/users/2125837/xpt"}, "reply_to_user": {"reputation": 7084, "user_id": 640277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14f57fec5c9a807c0eeff896afb5ad86?s=128&d=identicon&r=PG", "display_name": "Ezra", "link": "https://stackoverflow.com/users/640277/ezra"}, "edited": false, "score": 0, "creation_date": 1458010076, "post_id": 36001621, "comment_id": 59656042, "body": "@Ezra, the question is actually inspired by that one, which despite several iteration of performance improvement, still can&#39;t get rid of that loop. Yes, I do want string made of 8 digits more than a number per se. Even hex digits are fine with me. The point is, my above solution can finish in one shot, which I believe will be much much faster than the fastest solution there, which is far from simple."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1458022734, "post_id": 36001621, "comment_id": 59659853, "body": "There is nothing wrong with padding with zeros: A random number may start with one or more zeros if padded and is still totally random."}, {"owner": {"reputation": 13026, "user_id": 2125837, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/760b6ec2b6e1cba2b0218178425f4cde?s=128&d=identicon&r=PG", "display_name": "xpt", "link": "https://stackoverflow.com/users/2125837/xpt"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1458098001, "post_id": 36001621, "comment_id": 59702965, "body": "@Volker, There is nothing wrong with my personal taste not wanting the padding. You may like <code>00000023</code>, or even <code>00000004</code> as the answers but I <b><i>personally don&#39;t</i></b>. I&#39;ve <i>already</i> state that clearly in OP so I don&#39;t see the point your arguing about that -- It all comes down to personal taste, so please don&#39;t force yours onto others."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1458109230, "post_id": 36001621, "comment_id": 59706377, "body": "Please excuse if I hurt you feelings. I just didn&#39;t know that random numbers are more a matter of taste than of math. Sorry."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1458115046, "post_id": 36001621, "comment_id": 59709237, "body": "Regarding your Update: Can you define what makes good &quot;randomness&quot;? There are several aspects and the whole concept of randomness is hard. What do you mean exactly by &quot;better randomness&quot;? If you think that judging &quot;randomness&quot; by looking at a 2-D scatter is good enough than the proposed low + rand(hi-low) is more than good enough."}, {"owner": {"reputation": 13026, "user_id": 2125837, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/760b6ec2b6e1cba2b0218178425f4cde?s=128&d=identicon&r=PG", "display_name": "xpt", "link": "https://stackoverflow.com/users/2125837/xpt"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1458165727, "post_id": 36001621, "comment_id": 59744098, "body": "@Volker, It&#39;s OK. I know math is math, but I was hoping for 8 different digits, more or less, while the proposed low + rand(hi-low) can randomly give me numbers like 10000023, or 10000004 etc. I know mine isn&#39;t any better. Oh, well, I guess it is what it is then. Time to move on."}], "answers": [{"tags": [], "owner": {"reputation": 6339, "user_id": 304778, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/CD3Vg.jpg?s=128&g=1", "display_name": "secmask", "link": "https://stackoverflow.com/users/304778/secmask"}, "is_accepted": false, "score": 2, "last_activity_date": 1458009532, "creation_date": 1458009532, "answer_id": 36001713, "question_id": 36001621, "link": "https://stackoverflow.com/questions/36001621/how-to-generate-a-fixed-length-random-number-in-go/36001713#36001713", "title": "How to generate a fixed length random number in Go?", "body": "<p>It depend on value range you want to use.  </p>\n\n<ol>\n<li><p>If you allow value range [0-99999999] and padding zero ip number of char &lt; 8, then use fmt like <code>fmt.Sprintf(\"%08d\",rand.Intn(100000000))</code>.    </p></li>\n<li><p>If you dont want padding, which value in range [10000000, 99999999], then give it a base like <code>ranNumber := 10000000</code> + rand.Intn(90000000)`</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "is_accepted": true, "score": 10, "last_activity_date": 1458017998, "creation_date": 1458017998, "answer_id": 36003006, "question_id": 36001621, "link": "https://stackoverflow.com/questions/36001621/how-to-generate-a-fixed-length-random-number-in-go/36003006#36003006", "title": "How to generate a fixed length random number in Go?", "body": "<p>This is a general purpose function for generating numbers within a range</p>\n\n<pre><code>func rangeIn(low, hi int) int {\n    return low + rand.Intn(hi-low)\n}\n</code></pre>\n\n<p>See it on the <kbd><a href=\"http://play.golang.org/p/HEG_UToBAB\" rel=\"noreferrer\">Playground</a></kbd></p>\n\n<p>In your specific case, trying to generate 8 digit numbers, the range would be <code>(10000000, 99999999)</code></p>\n"}], "owner": {"reputation": 13026, "user_id": 2125837, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/760b6ec2b6e1cba2b0218178425f4cde?s=128&d=identicon&r=PG", "display_name": "xpt", "link": "https://stackoverflow.com/users/2125837/xpt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7082, "favorite_count": 1, "accepted_answer_id": 36003006, "answer_count": 2, "score": 2, "last_activity_date": 1458097637, "creation_date": 1458008867, "last_edit_date": 1458097637, "question_id": 36001621, "link": "https://stackoverflow.com/questions/36001621/how-to-generate-a-fixed-length-random-number-in-go", "title": "How to generate a fixed length random number in Go?", "body": "<p>What is the fastest and simplest way to generate fixed length random numbers in Go? </p>\n\n<p>Say to generate 8-digits long numbers, the problem with <code>rand.Intn(100000000)</code> is that the result might be far less than 8-digits, and padding it with leading zeros doesn't look like a good answer to me.</p>\n\n<p>I.e., I care about the the quality of the randomness more in the sense of its length. So I'm thinking, for this specific problem, would the following be the fastest and simplest way to do it? </p>\n\n<pre><code>99999999 - rand.Int63n(90000000)\n</code></pre>\n\n<p>I.e., I guess <code>Int63n</code> might be better for my case than <code>Intn</code>. Is it ture, or it is only a wishful thinking? Regarding randomness of the full 8-digits, would the two be the same, or there is really one better than the other? </p>\n\n<p>Finally, any better way than above? </p>\n\n<p><strong>UPDATE:</strong> </p>\n\n<p>Please do not provide <code>low + rand(hi-low)</code> as the answer, as everyone knows that. It is equivalent of what I'm doing now, and it doesn't answer my real question, <em>\"Regarding randomness of the full 8-digits, would the two be the same, or there is really one better than the other? \"</em></p>\n\n<p>If nobody can answer that, I'll plot a 2-D scatter plot between the two and find out myself...</p>\n\n<p>Thanks</p>\n"}, {"tags": ["go", "variable-assignment"], "comments": [{"owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "edited": false, "score": 0, "creation_date": 1458008695, "post_id": 36001477, "comment_id": 59655687, "body": "You can&#39;t assign <code>nil</code> to <code>int</code>s either.  Why does this surprise you for strings?"}, {"owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 2, "creation_date": 1458009179, "post_id": 36001477, "comment_id": 59655802, "body": "By preventing nil assignment to strings the language eliminates a class of errors. Note <a href=\"https://dhdersch.github.io/golang/2016/01/23/golang-when-to-use-string-pointers.html\" rel=\"nofollow noreferrer\">string pointers</a> can be assigned nil."}, {"owner": {"reputation": 2736, "user_id": 5090391, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh5.googleusercontent.com/-mYreaq2QAsQ/AAAAAAAAAAI/AAAAAAAAAE0/Qo8TuR0kJyk/photo.jpg?sz=128", "display_name": "Brendan", "link": "https://stackoverflow.com/users/5090391/brendan"}, "edited": false, "score": 3, "creation_date": 1458059666, "post_id": 36001477, "comment_id": 59685375, "body": "Not sure why this got down voted.  Seems like a pretty legitimate question to me"}], "answers": [{"tags": [], "owner": {"reputation": 934, "user_id": 3239666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638873245dd9cdc579bf551818c11fb3?s=128&d=identicon&r=PG&f=1", "display_name": "GarMan", "link": "https://stackoverflow.com/users/3239666/garman"}, "is_accepted": false, "score": 7, "last_activity_date": 1458020890, "creation_date": 1458020890, "answer_id": 36003539, "question_id": 36001477, "link": "https://stackoverflow.com/questions/36001477/why-cant-a-string-be-nil-in-go/36003539#36003539", "title": "Why can&#39;t a string be nil in Go?", "body": "<p>In go <code>string</code> is a data type, it's no a pointer to an array like C/C++. As such you can't assign it to nil. </p>\n"}, {"comments": [{"owner": {"reputation": 3865, "user_id": 128579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69229fcd3f4bf012faa51db42e6fb768?s=128&d=identicon&r=PG", "display_name": "Louis St-Amour", "link": "https://stackoverflow.com/users/128579/louis-st-amour"}, "edited": false, "score": 1, "creation_date": 1500350617, "post_id": 36006313, "comment_id": 77283165, "body": "Tip: If dealing with optional parameters - you can however, pass a pointer to your string, and pointers can be nil :) (You can also use an empty string.)"}], "tags": [], "owner": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "is_accepted": true, "score": 65, "last_activity_date": 1458031561, "creation_date": 1458031561, "answer_id": 36006313, "question_id": 36001477, "link": "https://stackoverflow.com/questions/36001477/why-cant-a-string-be-nil-in-go/36006313#36006313", "title": "Why can&#39;t a string be nil in Go?", "body": "<p><strong>The simple answer is that <code>nil</code> is not defined to be a valid value for type <code>string</code> in the <a href=\"https://golang.org/ref/spec\" rel=\"noreferrer\">language specification</a>.</strong></p>\n\n<p>...but maybe you want a longer answer?</p>\n\n<p><code>nil</code> is the zero value for pointers, interfaces, channels, slices, maps and function types, and it represents an <em>uninitialized</em> state.</p>\n\n<p>Consider the following variable declarations:</p>\n\n<pre><code>var a *SomeType\nvar b interface{}\nvar c func()\n</code></pre>\n\n<p>It seems natural that all these variables would have a value that represents uninitialized state. <code>a</code> has been declared as a pointer, but what would it point to, when we haven't yet pointed it at anything? <code>nil</code> is an obvious zero value for these types.</p>\n\n<p>As for channels, slices and maps, their zero value is <code>nil</code> for the simple reason that their <em>implementation</em> is such that they must be explicitly initialized before they can be used. This is mostly for performance reasons, these types are all represented internally as more or less complex data structures, and initializing them is not free.</p>\n\n<p>However, a <code>string</code> doesn't require initialization, and it seems natural that the default, zero value for a new string variable would be an empty string, <code>\"\"</code>. Therefore there's simply no reason for <code>nil</code> to be a valid string value, and adding it to the specification would only make the language more complicated and much more cumbersome to work with.</p>\n\n<p>Furthermore, what would <code>nil</code> of type <code>string</code> <em>represent</em>? An empty string? We already have that. An uninitialized string? There's no such thing.</p>\n"}, {"tags": [], "owner": {"reputation": 2372, "user_id": 468778, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/XgvcC.jpg?s=128&g=1", "display_name": "Roger Hill", "link": "https://stackoverflow.com/users/468778/roger-hill"}, "is_accepted": false, "score": 0, "last_activity_date": 1548798852, "creation_date": 1548798852, "answer_id": 54430184, "question_id": 36001477, "link": "https://stackoverflow.com/questions/36001477/why-cant-a-string-be-nil-in-go/54430184#54430184", "title": "Why can&#39;t a string be nil in Go?", "body": "<p>Aedolon made some good points, but to go further, in other languages strings are convenient ways of representing arrays of bytes as characters. We need to do this a lot, so this specific use case of an array gets a lot of language support to make it easier to use. However, at the heart of the matter, you are working with an array, which is often able to be null in a language because it is a reference type. That is, the string isn't really null, the pointer to the array is null. Because many languages conflate these two things, programmers are used to having to check if a string is null before using it.</p>\n\n<p>Go doesn't do this. A string cannot be nil, because the data structure in go doesn't allow it. You can have a pointer to a byte array holding character representations in go be null, but that isn't a string.</p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 7526356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a00ffd5bdb3434cc5c2a73c7dd79c0b?s=128&d=identicon&r=PG", "display_name": "RocketKittens", "link": "https://stackoverflow.com/users/7526356/rocketkittens"}, "is_accepted": false, "score": 2, "last_activity_date": 1586492330, "last_edit_date": 1586492330, "creation_date": 1586491932, "answer_id": 61133929, "question_id": 36001477, "link": "https://stackoverflow.com/questions/36001477/why-cant-a-string-be-nil-in-go/61133929#61133929", "title": "Why can&#39;t a string be nil in Go?", "body": "<p>Because Golang <code>string</code> is a read-only slices of bytes.</p>\n\n<p>However, a pointer to a string (*string) can be nil:</p>\n\n<pre><code>var s *string\ns = nil\nreadonly := \"readonly\"\ns = &amp;readonly\ndereference := *s\n</code></pre>\n\n<p><a href=\"https://dhdersch.github.io/golang/2016/01/23/golang-when-to-use-string-pointers.html\" rel=\"nofollow noreferrer\">https://dhdersch.github.io/golang/2016/01/23/golang-when-to-use-string-pointers.html</a></p>\n"}], "owner": {"reputation": 455, "user_id": 6064017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c6f07b7f18ae1fd2f07ef275af192c?s=128&d=identicon&r=PG&f=1", "display_name": "user319286", "link": "https://stackoverflow.com/users/6064017/user319286"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44158, "favorite_count": 4, "accepted_answer_id": 36006313, "answer_count": 4, "score": 42, "last_activity_date": 1586492330, "creation_date": 1458007826, "question_id": 36001477, "link": "https://stackoverflow.com/questions/36001477/why-cant-a-string-be-nil-in-go", "title": "Why can&#39;t a string be nil in Go?", "body": "<p>The program <a href=\"https://play.golang.org/p/2gLydmLeHf\" rel=\"noreferrer\">available on The Go Playground</a> reads</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    var name string = nil\n    fmt.Println(name)\n}\n</code></pre>\n\n<p>and yields an error</p>\n\n<pre><code>prog.go:6: cannot use nil as type string in assignment\n</code></pre>\n\n<p>I understand <a href=\"https://tour.golang.org/basics/12\" rel=\"noreferrer\"><code>\"\"</code> is the \"zero value\" for strings</a>. I don't understand why I cannot assign <code>nil</code> to my <code>string</code>.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 4, "creation_date": 1458015614, "post_id": 36000978, "comment_id": 59657604, "body": "Here&#39;s what Dropbox <i>actually</i> said, rather than what Wired paraphrased: <a href=\"https://news.ycombinator.com/item?id=11283688\" rel=\"nofollow noreferrer\">news.ycombinator.com/item?id=11283688</a> (the poster is an engineer there)"}], "answers": [{"tags": [], "owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "is_accepted": true, "score": 4, "last_activity_date": 1490467225, "last_edit_date": 1490467225, "creation_date": 1458005052, "answer_id": 36001064, "question_id": 36000978, "link": "https://stackoverflow.com/questions/36000978/what-is-gos-memory-footprint/36001064#36001064", "title": "What is Go&#39;s memory footprint", "body": "<p>\"It had a high memory footprint\" is just another way to say their program used a lot of RAM. It is related to garbage collection in that GC'd programs only free memory periodically (because each GC cycle takes CPU time), whereas manual memory management tends to free memory more or less as soon as it's unused. </p>\n\n<p>The downside of manual memory management is either that mistakes can cause crashes and security bugs (as in C++, where you can accidentally use a freed variable after the memory has been reused for something else) or you have to put effort into expressing the exact lifetimes of each variable, reference, etc. in your code so that the compiler can check that they're being used in a valid way (as in Rust, where you interact with <a href=\"https://doc.rust-lang.org/book/ownership.html\" rel=\"nofollow noreferrer\">the borrow checker</a> to root out potentially incorrect uses of memory in your code). </p>\n\n<hr>\n\n<p>The sentence in the Wired story makes it sound like \"memory footprint\" is a simple measurable quantity you could assign to any language (and your question takes that idea to its logical conclusion). It's not quite that simple. In different languages, doing different things has different costs in memory, performance, and so on, and you kind of have to understand languages'/runtimes' details to know how the language will work with a given sort of program.</p>\n\n<p>For example, CPython has <a href=\"https://en.wikipedia.org/wiki/Reference_counting\" rel=\"nofollow noreferrer\">reference counting</a>, and that frees unused memory sooner but at the cost of having to store and update reference counts. Java has, on the one hand, things like object headers that add a certain amount of memory overhead per object, but uses some tricks to speed garbage collection (like generational collection) that Go doesn't (yet). Or in Go, you might try to reduce the memory footprint of a program by <a href=\"http://golang.org/pkg/sync/#Pool\" rel=\"nofollow noreferrer\">recycling memory with free pools</a> and adjusting GOGC to free unused memory more often as kostya said.</p>\n\n<p>The bigger point there is not that those specific details I listed are super important, but that there can be a lot of details to consider other than \"higher memory footprint\" or \"lower memory footprint.\" </p>\n\n<hr>\n\n<p>So: \"memory footprint\" refers to the amount of RAM a particular program with a particular workload takes up. Bigger picture, it's one factor in a large set of tradeoffs that folks like you or I or Dropbox's team have to navigate.</p>\n"}, {"tags": [], "owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "is_accepted": false, "score": 1, "last_activity_date": 1458010186, "last_edit_date": 1458010186, "creation_date": 1458005622, "answer_id": 36001149, "question_id": 36000978, "link": "https://stackoverflow.com/questions/36000978/what-is-gos-memory-footprint/36001149#36001149", "title": "What is Go&#39;s memory footprint", "body": "<p>The garbage collector requires free memory to be available to work efficiently. By default Go application needs roughly twice as much memory as size of live data set (memory occupied by application objects).</p>\n\n<p>This can be tuned using <code>GOGC</code> environment variable. By setting it to a lower value the application will request less memory from OS but GC will run more frequently therefore will use more CPU resources. By setting it to a higher value the GC will run less frequently and use less resources but the application will have higher \"memory footprint\".</p>\n\n<p>This is general idea but the exact memory, performance requirements and GOGC effect are highly application specific.</p>\n"}], "owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3406, "favorite_count": 1, "accepted_answer_id": 36001064, "answer_count": 2, "score": 4, "last_activity_date": 1490467225, "creation_date": 1458004285, "question_id": 36000978, "link": "https://stackoverflow.com/questions/36000978/what-is-gos-memory-footprint", "title": "What is Go&#39;s memory footprint", "body": "<p><a href=\"http://www.wired.com/2016/03/epic-story-dropboxs-exodus-amazon-cloud-empire/\" rel=\"nofollow\">This</a> article on Wired about Dropbox's switch from Go to Rust for its MagicPocket product says </p>\n\n<blockquote>\n  <p>\u201cmemory footprint\u201d\u2014the amount of computer memory it demands while running Magic Pocket\u2014was too high for the massive storage systems the company was trying to build.</p>\n</blockquote>\n\n<p>Question(s): What exactly is Go's \"memory footprint\" (where does it come from, how is it measured etc, is it related to garbage collection,binary size, is it something that will always be high) and why is it higher than Rust's? </p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 1, "creation_date": 1458005866, "post_id": 36000871, "comment_id": 59654960, "body": "there is no difference"}], "answers": [{"tags": [], "owner": {"reputation": 1509, "user_id": 4897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mbYz.jpg?s=128&g=1", "display_name": "Mike Reedell", "link": "https://stackoverflow.com/users/4897/mike-reedell"}, "is_accepted": false, "score": 0, "last_activity_date": 1458010451, "last_edit_date": 1458010451, "creation_date": 1458006683, "answer_id": 36001326, "question_id": 36000871, "link": "https://stackoverflow.com/questions/36000871/whats-difference-between-make-and-initialize-struct-in-golang/36001326#36001326", "title": "what&#39;s difference between make and initialize struct in golang?", "body": "<p>From the docs for the <code>make</code> keyword:</p>\n\n<blockquote>\n  <p>Map: An initial allocation is made according to the size but the\n  resulting map has length 0. The size may be omitted, in which case a\n  small starting size is allocated.</p>\n</blockquote>\n\n<p>So, in the case of maps, there is no difference between using <code>make</code> and using an empty map literal.</p>\n"}, {"tags": [], "owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "is_accepted": false, "score": 10, "last_activity_date": 1458006793, "creation_date": 1458006793, "answer_id": 36001343, "question_id": 36000871, "link": "https://stackoverflow.com/questions/36000871/whats-difference-between-make-and-initialize-struct-in-golang/36001343#36001343", "title": "what&#39;s difference between make and initialize struct in golang?", "body": "<p><code>make</code> can be used to initialize a map with preallocated space. It takes an optional second parameter.</p>\n\n<p><code>m0 := make(map[int]int, 1000) // allocateds space for 1000 entries</code></p>\n\n<p>Allocation takes cpu time. If you know how many entries there will be in the map you can preallocate space to all of them. This reduces execution time. Here is a program you can run to verify this.</p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"testing\"\n\nfunc BenchmarkWithMake(b *testing.B) {\n    m0 := make(map[int]int, b.N)\n    for i := 0; i &lt; b.N; i++ {\n        m0[i] = 1000\n    }\n}\n\nfunc BenchmarkWithLitteral(b *testing.B) {\n    m1 := map[int]int{}\n    for i := 0; i &lt; b.N; i++ {\n        m1[i] = 1000\n    }\n}\n\nfunc main() {\n    bwm := testing.Benchmark(BenchmarkWithMake)\n    fmt.Println(bwm) // gives 176 ns/op\n\n    bwl := testing.Benchmark(BenchmarkWithLitteral)\n    fmt.Println(bwl) // gives 259 ns/op\n}\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 872954, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f1ad4800358292dd53cd5cfc4f54d378?s=128&d=identicon&r=PG", "display_name": "peerxu", "link": "https://stackoverflow.com/users/872954/peerxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1538, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1458010451, "creation_date": 1458003441, "question_id": 36000871, "link": "https://stackoverflow.com/questions/36000871/whats-difference-between-make-and-initialize-struct-in-golang", "title": "what&#39;s difference between make and initialize struct in golang?", "body": "<p>We can make channel by <code>make</code> function, new an object by <code>{}</code> expression.</p>\n\n<pre><code>ch := make(chan interface{})\no := struct{}{}\n</code></pre>\n\n<p>But, what's difference between <code>make</code> and <code>{}</code> to new a map?</p>\n\n<pre><code>m0 := make(map[int]int)\nm1 := map[int]int{}\n</code></pre>\n"}, {"tags": ["go", "slice", "equality"], "answers": [{"comments": [{"owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "reply_to_user": {"reputation": 343, "user_id": 6058631, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/80f2cff0a0888497bd7ef323cbc1d4c5?s=128&d=identicon&r=PG&f=1", "display_name": "XXX", "link": "https://stackoverflow.com/users/6058631/xxx"}, "edited": false, "score": 1, "creation_date": 1458016177, "post_id": 36000696, "comment_id": 59657753, "body": "NP @XXX.  I added your playground link since the edit was rejected (erroneously in my opinion)."}], "tags": [], "owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "is_accepted": true, "score": 17, "last_activity_date": 1618939892, "last_edit_date": 1618939892, "creation_date": 1458002157, "answer_id": 36000696, "question_id": 36000487, "link": "https://stackoverflow.com/questions/36000487/check-for-equality-on-slices-without-order/36000696#36000696", "title": "check for equality on slices without order", "body": "<p>Here is an alternate solution, though perhaps a bit verbose:</p>\n<pre><code>func sameStringSlice(x, y []string) bool {\n    if len(x) != len(y) {\n        return false\n    }\n    // create a map of string -&gt; int\n    diff := make(map[string]int, len(x))\n    for _, _x := range x {\n        // 0 value for int is 0, so just increment a counter for the string\n        diff[_x]++\n    }\n    for _, _y := range y {\n        // If the string _y is not in diff bail out early\n        if _, ok := diff[_y]; !ok {\n            return false\n        }\n        diff[_y] -= 1\n        if diff[_y] == 0 {\n            delete(diff, _y)\n        }\n    }\n    return len(diff) == 0\n}\n</code></pre>\n<p>Try it on the <kbd><a href=\"http://play.golang.org/p/J48Jz51C73\" rel=\"nofollow noreferrer\">Go Playground</a></kbd></p>\n"}, {"comments": [{"owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "edited": false, "score": 1, "creation_date": 1458019074, "post_id": 36000706, "comment_id": 59658646, "body": "Good answer @dimitar, I like the approach.  +1 from me."}, {"owner": {"reputation": 2217, "user_id": 2604708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b62fe48f9c75ebe5e3868f9d428c125?s=128&d=identicon&r=PG", "display_name": "Dirbaio", "link": "https://stackoverflow.com/users/2604708/dirbaio"}, "edited": false, "score": 0, "creation_date": 1565030437, "post_id": 36000706, "comment_id": 101214954, "body": "This solution is WRONG, it returns true even if the second slice contains strings that are not in the first one, for example <code>x=[a,b], y=[a,b,c]</code>. Example: <a href=\"https://play.golang.org/p/oydEKpbseaH\" rel=\"nofollow noreferrer\">play.golang.org/p/oydEKpbseaH</a>"}, {"owner": {"reputation": 15124, "user_id": 144969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a12d286134563e628089f733b946a00?s=128&d=identicon&r=PG", "display_name": "Dimitar Dimitrov", "link": "https://stackoverflow.com/users/144969/dimitar-dimitrov"}, "reply_to_user": {"reputation": 2217, "user_id": 2604708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b62fe48f9c75ebe5e3868f9d428c125?s=128&d=identicon&r=PG", "display_name": "Dirbaio", "link": "https://stackoverflow.com/users/2604708/dirbaio"}, "edited": false, "score": 1, "creation_date": 1565125136, "post_id": 36000706, "comment_id": 101251950, "body": "@Dirbaio, that&#39;s absolutely right, which is why my answer notes <i>You&#39;ll need to add some additional due dilligence, like short circuiting if your arrays/slices contain elements of different types or are of different length.</i>"}], "tags": [], "owner": {"reputation": 15124, "user_id": 144969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a12d286134563e628089f733b946a00?s=128&d=identicon&r=PG", "display_name": "Dimitar Dimitrov", "link": "https://stackoverflow.com/users/144969/dimitar-dimitrov"}, "is_accepted": false, "score": 6, "last_activity_date": 1458005206, "last_edit_date": 1458005206, "creation_date": 1458002218, "answer_id": 36000706, "question_id": 36000487, "link": "https://stackoverflow.com/questions/36000487/check-for-equality-on-slices-without-order/36000706#36000706", "title": "check for equality on slices without order", "body": "<p>I would think the easiest way would be to map the elements in each array/slice to their number of occurrences, then compare the maps:</p>\n\n<pre><code>func main() {\n    x := []string{\"a\",\"b\",\"c\"}\n    y := []string{\"c\",\"b\",\"a\"}\n\n    xMap := make(map[string]int)\n    yMap := make(map[string]int)\n\n    for _, xElem := range x {\n        xMap[xElem]++\n    }\n    for _, yElem := range y {\n        yMap[yElem]++\n    }\n\n    for xMapKey, xMapVal := range xMap {\n        if yMap[xMapKey] != xMapVal {\n            return false\n        }\n    }\n    return true\n}\n</code></pre>\n\n<p>You'll need to add some additional due dilligence, like short circuiting if your arrays/slices contain elements of different types or are of different length.</p>\n"}, {"tags": [], "owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "is_accepted": false, "score": 7, "last_activity_date": 1553617393, "last_edit_date": 1553617393, "creation_date": 1458006130, "answer_id": 36001228, "question_id": 36000487, "link": "https://stackoverflow.com/questions/36000487/check-for-equality-on-slices-without-order/36001228#36001228", "title": "check for equality on slices without order", "body": "<p>The other answers have better time complexity <code>O(N)</code> vs <code>(O(N log(N))</code>, that are in my answer, also my solution will take up more memory if elements in the slices are repeated frequently, but I wanted to add it because I think this is the most straight forward way to do it:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"sort\"\n    \"reflect\"\n)\n\nfunc array_sorted_equal(a, b []string) bool {\n    if len(a) != len(b) {return false }\n\n    a_copy := make([]string, len(a))\n    b_copy := make([]string, len(b))\n\n    copy(a_copy, a)\n    copy(b_copy, b)\n\n    sort.Strings(a_copy)\n    sort.Strings(b_copy)\n\n    return reflect.DeepEqual(a_copy, b_copy)\n}\n\nfunc main() {\n    a := []string {\"a\", \"a\", \"c\"}\n    b := []string {\"c\", \"a\", \"c\"}\n    c := []string {\"z\",\"z\",\"x\"} \n    d := []string {\"x\",\"z\",\"z\"}\n\n\n    fmt.Println( array_sorted_equal(a, b))\n    fmt.Println( array_sorted_equal(c, d))\n\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>false\ntrue\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 635, "user_id": 2906821, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/zAm2R.jpg?s=128&g=1", "display_name": "Dhruv Pal", "link": "https://stackoverflow.com/users/2906821/dhruv-pal"}, "is_accepted": false, "score": 0, "last_activity_date": 1567592413, "last_edit_date": 1567592413, "creation_date": 1567591737, "answer_id": 57786189, "question_id": 36000487, "link": "https://stackoverflow.com/questions/36000487/check-for-equality-on-slices-without-order/57786189#57786189", "title": "check for equality on slices without order", "body": "<p>I know its been answered but still I would like to add my answer. By following code here <a href=\"https://github.com/stretchr/testify/blob/master/assert/assertions.go#L835\" rel=\"nofollow noreferrer\">stretchr/testify</a> we can have something like</p>\n\n<pre><code>  func Elementsmatch(listA, listB []string) (string, bool) {\n    aLen := len(listA)\n    bLen := len(listB)\n\n    if aLen != bLen {\n        return fmt.Sprintf(\"Len of the lists don't match , len listA %v, len listB %v\", aLen, bLen), false\n    }\n\n    visited := make([]bool, bLen)\n\n    for i := 0; i &lt; aLen; i++ {\n        found := false\n        element := listA[i]\n        for j := 0; j &lt; bLen; j++ {\n            if visited[j] {\n                continue\n            }\n            if element == listB[j] {\n                visited[j] = true\n                found = true\n                break\n            }\n        }\n        if !found {\n            return fmt.Sprintf(\"element %s appears more times in %s than in %s\", element, listA, listB), false\n        }\n    }\n    return \"\", true\n}\n</code></pre>\n\n<p>Now lets talk about performance of this solution compared to map based ones. Well it really depends on the size of the lists which you are comparing, If size of list is large (I would say greater than 20) then map approach is better else this would be sufficent.</p>\n\n<p>Well on <a href=\"https://play.golang.org/p/k-MC-b6x6P6\" rel=\"nofollow noreferrer\">Go PlayGround</a> it shows 0s always, but run this on local system and you can see the difference in time taken as size of list increases</p>\n\n<p>So the solution I propose is, adding map based comparision from above <a href=\"https://stackoverflow.com/a/36000696/2906821\">solution</a> </p>\n\n<pre><code>func Elementsmatch(listA, listB []string) (string, bool) {\n    aLen := len(listA)\n    bLen := len(listB)\n\n    if aLen != bLen {\n        return fmt.Sprintf(\"Len of the lists don't match , len listA %v, len listB %v\", aLen, bLen), false\n    }\n\n    if aLen &gt; 20 {\n        return elementsMatchByMap(listA, listB)\n    }else{\n        return elementsMatchByLoop(listA, listB)\n    }\n\n}\n\nfunc elementsMatchByLoop(listA, listB []string) (string, bool) {\n    aLen := len(listA)\n    bLen := len(listB)\n\n    visited := make([]bool, bLen)\n\n    for i := 0; i &lt; aLen; i++ {\n        found := false\n        element := listA[i]\n        for j := 0; j &lt; bLen; j++ {\n            if visited[j] {\n                continue\n            }\n            if element == listB[j] {\n                visited[j] = true\n                found = true\n                break\n            }\n        }\n        if !found {\n            return fmt.Sprintf(\"element %s appears more times in %s than in %s\", element, listA, listB), false\n        }\n    }\n    return \"\", true\n}\n\nfunc elementsMatchByMap(x, y []string) (string, bool) {\n    // create a map of string -&gt; int\n    diff := make(map[string]int, len(x))\n    for _, _x := range x {\n        // 0 value for int is 0, so just increment a counter for the string\n        diff[_x]++\n    }\n    for _, _y := range y {\n        // If the string _y is not in diff bail out early\n        if _, ok := diff[_y]; !ok {\n            return fmt.Sprintf(\" %v is not present in list b\", _y), false\n        }\n        diff[_y] -= 1\n        if diff[_y] == 0 {\n            delete(diff, _y)\n        }\n    }\n    if len(diff) == 0 {\n        return \"\", true\n    }\n    return \"\", false\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1454, "user_id": 1407722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6dde592c8e5f207759779786160c6b?s=128&d=identicon&r=PG", "display_name": "adrianlzt", "link": "https://stackoverflow.com/users/1407722/adrianlzt"}, "is_accepted": false, "score": 4, "last_activity_date": 1571125038, "creation_date": 1571125038, "answer_id": 58389509, "question_id": 36000487, "link": "https://stackoverflow.com/questions/36000487/check-for-equality-on-slices-without-order/58389509#58389509", "title": "check for equality on slices without order", "body": "<p>Generalizing the code of <a href=\"https://github.com/stretchr/testify/blob/85f2b59c4459e5bf57488796be8c3667cb8246d6/assert/assertions.go#L836\" rel=\"nofollow noreferrer\">testify ElementsMatch</a>, solution to compare any kind of objects (in the example <code>[]map[string]string</code>):</p>\n\n<p><a href=\"https://play.golang.org/p/xUS2ngrUWUl\" rel=\"nofollow noreferrer\">https://play.golang.org/p/xUS2ngrUWUl</a></p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 2761550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VpLO3.png?s=128&g=1", "display_name": "MathObsessed", "link": "https://stackoverflow.com/users/2761550/mathobsessed"}, "is_accepted": false, "score": 1, "last_activity_date": 1600440360, "creation_date": 1600440360, "answer_id": 63957950, "question_id": 36000487, "link": "https://stackoverflow.com/questions/36000487/check-for-equality-on-slices-without-order/63957950#63957950", "title": "check for equality on slices without order", "body": "<p>Since I haven't got enough reputation to comment, I have to post yet another answer with a bit better code readability:</p>\n<pre><code>func AssertSameStringSlice(x, y []string) bool {\n    if len(x) != len(y) {\n        return false\n    }\n\n    itemAppearsTimes := make(map[string]int, len(x))\n    for _, i := range x {\n        itemAppearsTimes[i]++\n    }\n\n    for _, i := range y {\n        if _, ok := itemAppearsTimes[i]; !ok {\n            return false\n        }\n\n        itemAppearsTimes[i]--\n\n        if itemAppearsTimes[i] == 0 {\n            delete(itemAppearsTimes, i)\n        }\n    }\n\n    if len(itemAppearsTimes) == 0 {\n        return true\n    }\n\n    return false\n}\n</code></pre>\n<p>The logic is the same as in this <a href=\"https://stackoverflow.com/a/36000696/2761550\">answer</a></p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 1475347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf199d24090ce7868b85d6d155b46c5d?s=128&d=identicon&r=PG", "display_name": "Rafa\u0142 Krypa", "link": "https://stackoverflow.com/users/1475347/rafa%c5%82-krypa"}, "is_accepted": false, "score": 0, "last_activity_date": 1612522914, "creation_date": 1612522914, "answer_id": 66062073, "question_id": 36000487, "link": "https://stackoverflow.com/questions/36000487/check-for-equality-on-slices-without-order/66062073#66062073", "title": "check for equality on slices without order", "body": "<p>Like <a href=\"https://stackoverflow.com/users/1407722/adrianlzt\">adrianlzt</a> wrote in his <a href=\"https://stackoverflow.com/a/58389509/1475347\">answer</a>, an implementation of <code>assert.ElementsMatch</code> from <a href=\"https://pkg.go.dev/github.com/stretchr/testify/assert\" rel=\"nofollow noreferrer\">testify</a> can be used to achieve that. But how about reusing actual testify module instead of copying that code when all you need is a bool result of the comparison? The implementation in testify is intended for tests code and usually takes <code>testing.T</code> argument.</p>\n<p>It turns out that ElementsMatch can be quite easily used outside of testing code. All it takes is a dummy implementation of an interface with <code>ErrorF</code> method:</p>\n<pre class=\"lang-go prettyprint-override\"><code>type dummyt struct{}\n\nfunc (t dummyt) Errorf(string, ...interface{}) {}\n\nfunc elementsMatch(listA, listB interface{}) bool {\n    return assert.ElementsMatch(dummyt{}, listA, listB)\n}\n</code></pre>\n<p>Or test it on <a href=\"https://play.golang.org/p/BgcklcWGrap\" rel=\"nofollow noreferrer\">The Go Playground</a>, which I've adapted from the adrianlzt's example.</p>\n"}], "owner": {"reputation": 343, "user_id": 6058631, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/80f2cff0a0888497bd7ef323cbc1d4c5?s=128&d=identicon&r=PG&f=1", "display_name": "XXX", "link": "https://stackoverflow.com/users/6058631/xxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16437, "favorite_count": 1, "accepted_answer_id": 36000696, "answer_count": 7, "score": 12, "last_activity_date": 1618939892, "creation_date": 1458000888, "last_edit_date": 1458002831, "question_id": 36000487, "link": "https://stackoverflow.com/questions/36000487/check-for-equality-on-slices-without-order", "title": "check for equality on slices without order", "body": "<p>I am trying to find a solution to check for equality in 2 slices. Unfortanely, the answers I have found require values in the slice to be in the same order. For example, <a href=\"http://play.golang.org/p/yV0q1_u3xR\" rel=\"noreferrer\">http://play.golang.org/p/yV0q1_u3xR</a> evaluates equality to false.<br>\n I want a solution that lets <code>[]string{\"a\",\"b\",\"c\"} == []string{\"b\",\"a\",\"c\"}</code> evaluate to <code>true</code>.<br>\n<strong>MORE EXAMPLES</strong><br>\n<code>[]string{\"a\",\"a\",\"c\"} == []string{\"c\",\"a\",\"c\"}</code> >>> <code>false</code><br>\n<code>[]string{\"z\",\"z\",\"x\"} == []string{\"x\",\"z\",\"z\"}</code> >>> <code>true</code></p>\n"}, {"tags": ["go", "gif", "animated-gif"], "comments": [{"owner": {"reputation": 7084, "user_id": 640277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14f57fec5c9a807c0eeff896afb5ad86?s=128&d=identicon&r=PG", "display_name": "Ezra", "link": "https://stackoverflow.com/users/640277/ezra"}, "edited": false, "score": 1, "creation_date": 1458009013, "post_id": 36000041, "comment_id": 59655753, "body": "When I try this <code>0</code> loops forever, and <code>1</code> and <code>2</code> work exactly as expected, with <code>1</code> playing the animation exactly once?"}, {"owner": {"reputation": 238, "user_id": 1820453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83eadbb660f121bf5259f82856756d1e?s=128&d=identicon&r=PG", "display_name": "DanneJ", "link": "https://stackoverflow.com/users/1820453/dannej"}, "reply_to_user": {"reputation": 7084, "user_id": 640277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14f57fec5c9a807c0eeff896afb5ad86?s=128&d=identicon&r=PG", "display_name": "Ezra", "link": "https://stackoverflow.com/users/640277/ezra"}, "edited": false, "score": 0, "creation_date": 1458031607, "post_id": 36000041, "comment_id": 59664161, "body": "Hmm... What do you use to play the gif? I use chrome. Maybe that is playing it twice."}], "answers": [{"tags": [], "owner": {"reputation": 1894, "user_id": 2269979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff22a1e835980e29baccf08a62e7ff71?s=128&d=identicon&r=PG", "display_name": "molivier", "link": "https://stackoverflow.com/users/2269979/molivier"}, "is_accepted": true, "score": 0, "last_activity_date": 1458042339, "creation_date": 1458042339, "answer_id": 36010425, "question_id": 36000041, "link": "https://stackoverflow.com/questions/36000041/how-to-create-a-gif-animation-that-plays-only-once/36010425#36010425", "title": "How to create a gif animation that plays only once", "body": "<p>Browsers interpret differently the loop counter. For a single loop gif, Chrome is looping twice while Firefox is playing the animation exactly once.</p>\n\n<p>See this issue of <a href=\"https://github.com/Sybio/GifCreator/issues/4#issuecomment-41282288\" rel=\"nofollow\">GifCreator - Unable to create non loop GIF image</a>.</p>\n"}], "owner": {"reputation": 238, "user_id": 1820453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83eadbb660f121bf5259f82856756d1e?s=128&d=identicon&r=PG", "display_name": "DanneJ", "link": "https://stackoverflow.com/users/1820453/dannej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1405, "favorite_count": 0, "accepted_answer_id": 36010425, "answer_count": 1, "score": 1, "last_activity_date": 1458042339, "creation_date": 1457998399, "question_id": 36000041, "link": "https://stackoverflow.com/questions/36000041/how-to-create-a-gif-animation-that-plays-only-once", "title": "How to create a gif animation that plays only once", "body": "<p>I am trying to generate an animated gif that plays the frames only once.</p>\n\n<p>When I set LoopCount to 1, it plays the frames twice. When I set LoopCount to 0 or -1, it loops infinitely.</p>\n\n<pre><code>img := image.(*image.Paletted)\n\noutGif := &amp;gif.GIF{}\noutGif.LoopCount = 0\noutGif.Image = append(outGif.Image, img)\noutGif.Delay = append(outGif.Delay, 10)\n\nf, err := os.Create(\"/tmp/test.gif\")\nif err != nil {\n    panic(err)\n}\ndefer f.Close()\n\ngif.EncodeAll(f, outGif)\n</code></pre>\n\n<p>How to I make sure it only plays the frames once?</p>\n"}, {"tags": ["go", "build", "compilation", "packages"], "answers": [{"comments": [{"owner": {"reputation": 790, "user_id": 1394909, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/746bfa102ebee06c66755ec3288a67fb?s=128&d=identicon&r=PG", "display_name": "Zee", "link": "https://stackoverflow.com/users/1394909/zee"}, "edited": false, "score": 0, "creation_date": 1457998848, "post_id": 36000122, "comment_id": 59652836, "body": "BTW, The GOPATH shall be changed to GOPATH = /Users/john/work/"}, {"owner": {"reputation": 357, "user_id": 1416735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/246169e18abf5fadc8532b729bde20f0?s=128&d=identicon&r=PG", "display_name": "imranhasanhira", "link": "https://stackoverflow.com/users/1416735/imranhasanhira"}, "edited": false, "score": 0, "creation_date": 1457999563, "post_id": 36000122, "comment_id": 59653058, "body": "Renaming the directory to &quot;helper&quot; from &quot;helper-lib&quot; makes sense.   But moving &quot;helper&quot; directory one above &quot;project-mars&quot; seems unlikely, because in that way, <b>helper</b> directory would be sibling of <b>project-mars</b> and <b>project-aurora</b> . Actually I used subdirectories to package my codes. For example when I would have a lot more files, putting them outside project base directory would loose the modularity.  Also GOPATH is set to a separate location, according to the need I expected to have for reusing common libraries across projects."}, {"owner": {"reputation": 357, "user_id": 1416735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/246169e18abf5fadc8532b729bde20f0?s=128&d=identicon&r=PG", "display_name": "imranhasanhira", "link": "https://stackoverflow.com/users/1416735/imranhasanhira"}, "edited": false, "score": 0, "creation_date": 1457999957, "post_id": 36000122, "comment_id": 59653173, "body": "Thanks Zee for pointing out the &quot;helper-lib&quot; directory name. I will update it in my question to get the focus on the problem that I wanted to torch on."}, {"owner": {"reputation": 790, "user_id": 1394909, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/746bfa102ebee06c66755ec3288a67fb?s=128&d=identicon&r=PG", "display_name": "Zee", "link": "https://stackoverflow.com/users/1394909/zee"}, "reply_to_user": {"reputation": 357, "user_id": 1416735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/246169e18abf5fadc8532b729bde20f0?s=128&d=identicon&r=PG", "display_name": "imranhasanhira", "link": "https://stackoverflow.com/users/1416735/imranhasanhira"}, "edited": false, "score": 0, "creation_date": 1458000233, "post_id": 36000122, "comment_id": 59653262, "body": "My understanding is you want this helper package be shared with multiple projects. In this case. Putting this folder under your project folder means it is not shared with other project"}, {"owner": {"reputation": 790, "user_id": 1394909, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/746bfa102ebee06c66755ec3288a67fb?s=128&d=identicon&r=PG", "display_name": "Zee", "link": "https://stackoverflow.com/users/1394909/zee"}, "reply_to_user": {"reputation": 357, "user_id": 1416735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/246169e18abf5fadc8532b729bde20f0?s=128&d=identicon&r=PG", "display_name": "imranhasanhira", "link": "https://stackoverflow.com/users/1416735/imranhasanhira"}, "edited": false, "score": 0, "creation_date": 1458000361, "post_id": 36000122, "comment_id": 59653312, "body": "If you really want your package folder in Mars. Change the import statement to import &quot;project-mars/helper&quot;"}, {"owner": {"reputation": 357, "user_id": 1416735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/246169e18abf5fadc8532b729bde20f0?s=128&d=identicon&r=PG", "display_name": "imranhasanhira", "link": "https://stackoverflow.com/users/1416735/imranhasanhira"}, "edited": false, "score": 0, "creation_date": 1458002001, "post_id": 36000122, "comment_id": 59653838, "body": "Sorry for abrupt name. <b>helper</b> is <b>project-mars</b> related helper files. So they should remain inside <b>project-mars</b> directory. And changing the import path won&#39;t help, because you can see that the compilation error was based on the GOROOT and GOPATH locations ( which might be completely different than <b>project-mars</b> ) . If this kind of modularity is not possible in the I am expecting, then either I am doing it wrong, or there must be some good project layout which doesn&#39;t introduce this redundancy."}], "tags": [], "owner": {"reputation": 790, "user_id": 1394909, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/746bfa102ebee06c66755ec3288a67fb?s=128&d=identicon&r=PG", "display_name": "Zee", "link": "https://stackoverflow.com/users/1394909/zee"}, "is_accepted": false, "score": 0, "last_activity_date": 1457998800, "creation_date": 1457998800, "answer_id": 36000122, "question_id": 35999277, "link": "https://stackoverflow.com/questions/35999277/how-to-import-project-specific-go-packages-while-maintaining-a-separate-location/36000122#36000122", "title": "How to import project specific go packages while maintaining a separate location for go packages that are common to totally different projects?", "body": "<p>Rename your <em>helper-lib</em> folder to <em>helper</em></p>\n\n<p>Then move this folder from <em>project-mars</em> to the upper folder <em>work</em></p>\n\n<p>This should make your </p>\n\n<pre><code>import \"helper\" \n</code></pre>\n\n<p>statement in main.go work.</p>\n"}, {"comments": [{"owner": {"reputation": 357, "user_id": 1416735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/246169e18abf5fadc8532b729bde20f0?s=128&d=identicon&r=PG", "display_name": "imranhasanhira", "link": "https://stackoverflow.com/users/1416735/imranhasanhira"}, "edited": false, "score": 0, "creation_date": 1458076871, "post_id": 36011783, "comment_id": 59695992, "body": "Thanks JimB. I read the full article. Nicely put. My concern was if I have projects that can be in totally separate locations irrespective of <code>GOPATH</code>, how does go handle that? I assume go is designed to force the developers to keep all the go codes in <code>GOPATH&#47;src</code> directory. Is this correct? If it&#39;s correct, that means, keeping project directories in different location ( i.e. <code>&#47;Users&#47;john&#47;hobist-projects&#47;project-mars</code>, <code>&#47;Users&#47;john&#47;hobist-projects&#47;project-samurai</code> and <code>&#47;Users&#47;john&#47;office-projects&#47;projects-aurora</code> ) is really bad. I am curious about the reason of go marking it as a bad design."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 357, "user_id": 1416735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/246169e18abf5fadc8532b729bde20f0?s=128&d=identicon&r=PG", "display_name": "imranhasanhira", "link": "https://stackoverflow.com/users/1416735/imranhasanhira"}, "edited": false, "score": 0, "creation_date": 1458077902, "post_id": 36011783, "comment_id": 59696556, "body": "@imranhasanhira: the Go tools work by convention, rather than configuration. Having one way to do things makes it simpler, and everyone can collaborate in the same way. If you want to structure your projects differently, you&#39;re free to do what you want, but you should know how the tools work in the first place and what to expect from them. You are also free to use other build tools, like <a href=\"https://getgb.io/\" rel=\"nofollow noreferrer\">gb</a> for example, which allows a &quot;project based workflow&quot;."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": false, "score": 1, "last_activity_date": 1458048644, "last_edit_date": 1458048644, "creation_date": 1458046061, "answer_id": 36011783, "question_id": 35999277, "link": "https://stackoverflow.com/questions/35999277/how-to-import-project-specific-go-packages-while-maintaining-a-separate-location/36011783#36011783", "title": "How to import project specific go packages while maintaining a separate location for go packages that are common to totally different projects?", "body": "<p>Please read <a href=\"https://golang.org/doc/code.html\" rel=\"nofollow\">How to Write Go Code</a> carefully. It explains everything you need to know. </p>\n\n<p>You don't use <code>GOPATH</code> as your project directory. Assuming you want to work with the standard Go tooling, your package source needs to be in the directory corresponding to its import path, just like any other package.</p>\n\n<p>Your project should be located at <code>$GOPATH/src/project-mars</code>, which can be built via <code>go install project-mars</code>. The <code>helper</code> package should be located at <code>$GOPATH/src/project-mars/helper</code>, and imported via <code>\"project-mars/helper\"</code>.</p>\n"}], "owner": {"reputation": 357, "user_id": 1416735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/246169e18abf5fadc8532b729bde20f0?s=128&d=identicon&r=PG", "display_name": "imranhasanhira", "link": "https://stackoverflow.com/users/1416735/imranhasanhira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1458048644, "creation_date": 1457994320, "last_edit_date": 1457999801, "question_id": 35999277, "link": "https://stackoverflow.com/questions/35999277/how-to-import-project-specific-go-packages-while-maintaining-a-separate-location", "title": "How to import project specific go packages while maintaining a separate location for go packages that are common to totally different projects?", "body": "<p>So I was developing a go application for the very first time. I came to know that there are two variables GOROOT and GOPATH which are used to maintain go packages. What I understand till now, is that GOROOT is for the go binary files and GOPATH is mainly for storing library and helper packages that is needed for projects.</p>\n\n<p>Here is my current project structure - </p>\n\n<pre><code>/Users/john/work/project-mars\n/Users/john/work/project-mars/main.go\n/Users/john/work/project-mars/helper\n/Users/john/work/project-mars/helper/helper.go\n</code></pre>\n\n<p>Content of main.go</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"helper\"\n)\n\nfunc main(){\n    fmt.Println(\"Hello\")\n}\n</code></pre>\n\n<p>Content of helper.go</p>\n\n<pre><code>package helper\n\nimport (\n    \"fmt\"\n)\n\nfunc SayWorld(){\n    fmt.Println(\"World\")\n}\n</code></pre>\n\n<p>And the go variables are -</p>\n\n<pre><code>GOROOT = /Users/john/apps/go\nGOPATH = /Users/john/apps/go-packages\n</code></pre>\n\n<p><strong>Problem:</strong>\nNow when I perform the following command, I get this error -</p>\n\n<pre><code>mac-machine:project-mars john$ go build main.go \nmain.go:5:5: cannot find package \"helper\" in any of:\n    /Users/john/apps/go/src/helper (from $GOROOT)\n    /Users/john/apps/go-packages/src/helper (from $GOPATH)\n</code></pre>\n\n<p>I understand that GOPATH should be the project directory that I am working on. But I am concerned with keeping my projects and library packages in a modular way, so that when later I have a totally different project (i.e. project-aurora) which might use same github helper packages, that they are not downloaded two times, both in project-mars and project-aurora . </p>\n\n<p>How can I avoid this redundancy while working on different projects ?</p>\n\n<p><strong>Update:</strong> It's not that I can not compile them. I can use the GOPATH as my project directory and use src,pkg,bin project layouts and also reorganize the files and finally get to compile the project. yeeeeppi. But my question is about resolving the redundancy of common package problem that appears in this single GOPATH way.</p>\n"}, {"tags": ["go", "vendor"], "comments": [{"owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "edited": false, "score": 2, "creation_date": 1457994177, "post_id": 35999046, "comment_id": 59651035, "body": "The whole branch under src should be in a subdirectory, no?  Can you try making a directory &quot;foo&quot; and move <code>main.go</code> and <code>vender</code> under it."}, {"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 2, "creation_date": 1458006003, "post_id": 35999046, "comment_id": 59654990, "body": "Could you please post what exact commands you tried and what error messages you got?"}, {"owner": {"reputation": 2552, "user_id": 610051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c90269c460cc6593f56823abb0c9cf39?s=128&d=identicon&r=PG", "display_name": "Roshambo", "link": "https://stackoverflow.com/users/610051/roshambo"}, "reply_to_user": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1458060993, "post_id": 35999046, "comment_id": 59686242, "body": "@kostya Edited to add build commands."}, {"owner": {"reputation": 2552, "user_id": 610051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c90269c460cc6593f56823abb0c9cf39?s=128&d=identicon&r=PG", "display_name": "Roshambo", "link": "https://stackoverflow.com/users/610051/roshambo"}, "reply_to_user": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "edited": false, "score": 0, "creation_date": 1458061021, "post_id": 35999046, "comment_id": 59686259, "body": "@sberry No luck. But is vendoring only for libraries?"}], "answers": [{"comments": [{"owner": {"reputation": 2552, "user_id": 610051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c90269c460cc6593f56823abb0c9cf39?s=128&d=identicon&r=PG", "display_name": "Roshambo", "link": "https://stackoverflow.com/users/610051/roshambo"}, "edited": false, "score": 0, "creation_date": 1458186906, "post_id": 36025155, "comment_id": 59750762, "body": "Thank you so much @kostya; you solved it for me. There were two things I needed to do: properly set <code>$GOPATH</code>, and move the project to a subdirectory under <code>.&#47;src</code>."}, {"owner": {"reputation": 1803, "user_id": 321307, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2dee6b4872d0e1dc7189d930af6335a3?s=128&d=identicon&r=PG", "display_name": "sschober", "link": "https://stackoverflow.com/users/321307/sschober"}, "edited": false, "score": 0, "creation_date": 1471029605, "post_id": 36025155, "comment_id": 65206994, "body": "moving the project to <code>src&#47;</code> did it for me"}], "tags": [], "owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "is_accepted": true, "score": 9, "last_activity_date": 1458090901, "creation_date": 1458090901, "answer_id": 36025155, "question_id": 35999046, "link": "https://stackoverflow.com/questions/35999046/vendoring-in-go-1-6/36025155#36025155", "title": "Vendoring in Go 1.6", "body": "<p>I suggest you to read <a href=\"https://golang.org/doc/code.html\">https://golang.org/doc/code.html</a>. It requires a day or two to digest but after you understand how go tools work with the source code and GOPATH it is really easy to use them.</p>\n\n<p>Back to your question. To build a simple go program you need to:</p>\n\n<ul>\n<li>create directory under $GOPATH/src, e.g. <code>mkdir $GOPATH/src/myprogram</code></li>\n<li>put all the source code (including vendor directory) there: <code>$GOPATH/src/myprogram/main.go</code>, <code>$GOPATH/src/myprogram/vendor</code>.</li>\n<li>run <code>go install myprogram</code> to build your application and put the resulting <code>myprogram</code> binary to <code>$GOPATH/bin/myprogram</code></li>\n</ul>\n"}], "owner": {"reputation": 2552, "user_id": 610051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c90269c460cc6593f56823abb0c9cf39?s=128&d=identicon&r=PG", "display_name": "Roshambo", "link": "https://stackoverflow.com/users/610051/roshambo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6420, "favorite_count": 2, "accepted_answer_id": 36025155, "answer_count": 1, "score": 5, "last_activity_date": 1463291726, "creation_date": 1457993351, "last_edit_date": 1458060958, "question_id": 35999046, "link": "https://stackoverflow.com/questions/35999046/vendoring-in-go-1-6", "title": "Vendoring in Go 1.6", "body": "<p>I\u2019ve read as many docs and StackOverflow articles as I can find, yet I am having no luck importing using the new vendor feature in Go 1.6.</p>\n\n<p>Here's a sample project I put together with <a href=\"https://github.com/zenazn/goji\" rel=\"nofollow\">Goji</a> to test. The directory structure is as such:</p>\n\n<pre><code>.\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 main.go\n    \u2514\u2500\u2500 vendor\n        \u2514\u2500\u2500 github.com\n            \u2514\u2500\u2500 zenazn\n                \u2514\u2500\u2500 goji\n                    \u251c\u2500\u2500 LICENSE\n                    \u251c\u2500\u2500 README.md\n                    \u251c\u2500\u2500 bind\n                    \u251c\u2500\u2500 default.go\n                    \u251c\u2500\u2500 example\n                    \u251c\u2500\u2500 goji.go\n                    \u251c\u2500\u2500 graceful\n                    \u251c\u2500\u2500 serve.go\n                    \u251c\u2500\u2500 serve_appengine.go\n                    \u2514\u2500\u2500 web\n</code></pre>\n\n<p>And <code>main.go</code>, the sole file in the project, is as such:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n\n    \"github.com/zenazn/goji\"\n    \"github.com/zenazn/goji/web\"\n)\n\nfunc hello(c web.C, w http.ResponseWriter, r *http.Request) {\n    fmt.Fprintf(w, \"Hello, %s!\", c.URLParams[\"name\"])\n}\n\nfunc main() {\n    goji.Get(\"/hello/:name\", hello)\n    goji.Serve()\n}\n</code></pre>\n\n<p>My environment variables are as such:</p>\n\n<pre><code>export GOPATH=~/.go\nexport GOBIN=$GOPATH/bin\nexport PATH=$PATH:/usr/local/opt/go/libexec/bin:$GOBIN\n</code></pre>\n\n<p>I\u2019ve tried the most simple build commands, with no luck:</p>\n\n<pre><code>go run ./src/main.go\ngo build ./src/main.go\n</code></pre>\n\n<p>I\u2019ve also attempted to build with:</p>\n\n<pre><code>$GOPATH=`pwd`\n</code></pre>\n\n<p>...to no avail. Am I totally missing something? Any advice is appreciated.</p>\n"}, {"tags": ["go", "google-cloud-platform", "kubernetes", "google-kubernetes-engine"], "answers": [{"comments": [{"owner": {"reputation": 7801, "user_id": 420061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863c36ad26574df2c254dc2e46c8ff03?s=128&d=identicon&r=PG", "display_name": "Timo Reimann", "link": "https://stackoverflow.com/users/420061/timo-reimann"}, "edited": false, "score": 0, "creation_date": 1458235610, "post_id": 36047568, "comment_id": 59781555, "body": "My application does run outside of the cluster. The service account hack should be acceptable for me as I don&#39;t plan on running too many off-cluster apps."}, {"owner": {"reputation": 7801, "user_id": 420061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863c36ad26574df2c254dc2e46c8ff03?s=128&d=identicon&r=PG", "display_name": "Timo Reimann", "link": "https://stackoverflow.com/users/420061/timo-reimann"}, "edited": false, "score": 0, "creation_date": 1458235670, "post_id": 36047568, "comment_id": 59781592, "body": "Does the service account&#39;s token expire at some point though? Is it possibly bound to the lifetime of the pod? That&#39;d be a show-stopper for me."}, {"owner": {"reputation": 5321, "user_id": 4215254, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qImNt9WhVK4/AAAAAAAAAAI/AAAAAAAAAHs/gQPWlTrkinQ/photo.jpg?sz=128", "display_name": "Eric Tune", "link": "https://stackoverflow.com/users/4215254/eric-tune"}, "edited": false, "score": 2, "creation_date": 1458576661, "post_id": 36047568, "comment_id": 59910652, "body": "You can manually expire the service account token by deleting the secret object.  A new one will be created.  Pods that use the deleted token will need to be restarted."}], "tags": [], "owner": {"reputation": 4834, "user_id": 805800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1t7sV.jpg?s=128&g=1", "display_name": "CJ Cullen", "link": "https://stackoverflow.com/users/805800/cj-cullen"}, "is_accepted": true, "score": 2, "last_activity_date": 1458164733, "creation_date": 1458164733, "answer_id": 36047568, "question_id": 35998735, "link": "https://stackoverflow.com/questions/35998735/how-to-create-new-client-certificates-tokens-for-programmatic-access-to-the-ku/36047568#36047568", "title": "How to create new client certificates / tokens for programmatic access to the Kubernetes API hosted on GKE?", "body": "<p>If your application is running inside the cluster, you can use <a href=\"http://kubernetes.io/docs/user-guide/service-accounts/\" rel=\"nofollow\">Kubernetes Service Accounts</a> to authenticate to the API server.</p>\n\n<p>If this is outside of the cluster, things aren't as easy, and I suppose your concerns are justified. Right now, GKE does not allow additional custom identities beyond the one generated for your personal kubeconfig file.</p>\n\n<p>Instead of using your credentials, you could grab a service account's token (inside a pod, read from <code>/var/run/secrets/kubernetes.io/serviceaccount/token</code>), and use that instead. It's a gross hack, and not a great general solution, but it might be slightly preferable to using your own personal credentials.</p>\n"}], "owner": {"reputation": 7801, "user_id": 420061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863c36ad26574df2c254dc2e46c8ff03?s=128&d=identicon&r=PG", "display_name": "Timo Reimann", "link": "https://stackoverflow.com/users/420061/timo-reimann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1118, "favorite_count": 1, "accepted_answer_id": 36047568, "answer_count": 1, "score": 3, "last_activity_date": 1458164733, "creation_date": 1457992127, "question_id": 35998735, "link": "https://stackoverflow.com/questions/35998735/how-to-create-new-client-certificates-tokens-for-programmatic-access-to-the-ku", "title": "How to create new client certificates / tokens for programmatic access to the Kubernetes API hosted on GKE?", "body": "<p>I am running a Kubernetes cluster hosted on GKE and would like to write an application (written in Go) that speaks to the Kubernetes API. My understanding is that I can either provide a client certificate, bearer token, or HTTP Basic Authentication in order to authenticate with the apiserver. I have already found the right spot to inject any of these into the <a href=\"https://github.com/kubernetes/kubernetes/tree/release-1.1/pkg/client/\" rel=\"nofollow\">Golang client library</a>.</p>\n\n<p>Unfortunately, the examples I ran across tend to reference to existing credentials stored in my personal kubeconfig file. This seems non-advisable from a security perspective and makes me believe that I should create a new client certificate / token / username-password pair in order to support easy revocation/removal of compromised accounts. However, I could not find a spot in the documentation actually describing how to go about this when running on managed Kubernetes in GKE. (There's <a href=\"http://kubernetes.io/docs/admin/authentication/\" rel=\"nofollow\">this guide on creating new certificates</a> explaining that the apiserver needs to get restarted with updated parameters eventually, something that to my understanding cannot be done in GKE.)</p>\n\n<p>Are my security concerns for reusing my personal Kubernetes credentials in one (or potentially multiple) applications unjustified? If not, what's the right approach to generate a new set of credentials?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1457991070, "post_id": 35998455, "comment_id": 59649502, "body": "I believe the error is due to you not handling the return values from <code>WriteString</code> - <a href=\"https://golang.org/pkg/bytes/#Buffer.WriteString\" rel=\"nofollow noreferrer\">golang.org/pkg/bytes/#Buffer.WriteString</a> - you need the <code>_</code> to indicate you&#39;re not assigning a value or you need to assign to some variable."}, {"owner": {"reputation": 450, "user_id": 856575, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BFSCa.jpg?s=128&g=1", "display_name": "Pierre Tasci", "link": "https://stackoverflow.com/users/856575/pierre-tasci"}, "reply_to_user": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1457991341, "post_id": 35998455, "comment_id": 59649643, "body": "I tried that, and it still complains. I will update my question with the latest version."}, {"owner": {"reputation": 28120, "user_id": 492773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c30dea4ed3e1c2efc5e877f1f3c971?s=128&d=identicon&r=PG", "display_name": "kichik", "link": "https://stackoverflow.com/users/492773/kichik"}, "edited": false, "score": 0, "creation_date": 1457991566, "post_id": 35998455, "comment_id": 59649741, "body": "What is the actual complaint?"}, {"owner": {"reputation": 450, "user_id": 856575, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BFSCa.jpg?s=128&g=1", "display_name": "Pierre Tasci", "link": "https://stackoverflow.com/users/856575/pierre-tasci"}, "edited": false, "score": 0, "creation_date": 1457991789, "post_id": 35998455, "comment_id": 59649844, "body": "multiple-value buffer.WriteString() in single-value context"}], "answers": [{"comments": [{"owner": {"reputation": 450, "user_id": 856575, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BFSCa.jpg?s=128&g=1", "display_name": "Pierre Tasci", "link": "https://stackoverflow.com/users/856575/pierre-tasci"}, "edited": false, "score": 0, "creation_date": 1457991958, "post_id": 35998663, "comment_id": 59649929, "body": "That did it. I didn&#39;t know the star only dereferences return values."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 1, "last_activity_date": 1457991823, "creation_date": 1457991823, "answer_id": 35998663, "question_id": 35998455, "link": "https://stackoverflow.com/questions/35998455/multiple-value-in-single-value-context-no-return-func/35998663#35998663", "title": "multiple-value in single-value context no return func", "body": "<p>You don't need to dereference pointers to call methods in Go. The <code>*</code> operator before <code>buffer.WriteString</code> is applied to the returned values. To dereference <code>buffer</code> you would need to write <code>(*buffer).WriteString</code>, but that's not needed at all:</p>\n\n<pre><code>func Write(buffer *bytes.Buffer, values ...string) {\n    for _, val := range values {\n        _, err := buffer.WriteString(val)\n        if err != nil {\n            // print error\n        }\n    }\n    _, err := buffer.WriteString(\" \")\n    if err != nil {\n        // print error\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 450, "user_id": 856575, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BFSCa.jpg?s=128&g=1", "display_name": "Pierre Tasci", "link": "https://stackoverflow.com/users/856575/pierre-tasci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 35998663, "answer_count": 1, "score": 1, "last_activity_date": 1457991823, "creation_date": 1457990938, "last_edit_date": 1457991530, "question_id": 35998455, "link": "https://stackoverflow.com/questions/35998455/multiple-value-in-single-value-context-no-return-func", "title": "multiple-value in single-value context no return func", "body": "<p>I have a func in Go that simply writes to a buffer. I have no return type set on the func so I am not sure why I am seeing this error. Here is my code:</p>\n\n<pre><code>func Write(buffer *bytes.Buffer, values ...string) {\n  for _, val := range values\n    _, err := *buffer.WriteString(val)\n    if err != nil {\n      // print error\n    }\n  }\n  _, err := *buffer.WriteString(\" \")\n  if err != nil {\n    // print error\n  }\n}\n</code></pre>\n\n<p>It complains at both lines where I have buffer.WriteString. This leads me to believe it has something to do with the return types of the WriteString method on the buffer but I am not experienced enough in Go to know for sure.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p>Edit: Updated code.</p>\n"}, {"tags": ["go", "types"], "answers": [{"tags": [], "owner": {"reputation": 608, "user_id": 2742953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6440a8ea0b00a8259b04bef0d57881?s=128&d=identicon&r=PG", "display_name": "Gerard Abello", "link": "https://stackoverflow.com/users/2742953/gerard-abello"}, "is_accepted": true, "score": 4, "last_activity_date": 1457990566, "creation_date": 1457990566, "answer_id": 35998345, "question_id": 35998040, "link": "https://stackoverflow.com/questions/35998040/id-like-to-understand-why-one-would-create-a-type-for-handling-errors-in-go-and/35998345#35998345", "title": "I&#39;d like to understand why one would create a type for handling errors in Go and how you decide what underlying type it should have", "body": "<p>I'm gonna answer your second question first: you add a method to your type so ErrNegativeSqrt implements the <a href=\"https://golang.org/pkg/builtin/#error\" rel=\"nofollow\">error interface</a>, which means other code that does not know about the specifics of ErrNegativeSqrt can use it as any other error.</p>\n\n<p>As the error interface only requires a method Error() with return type string, a common type to use is just a string with the Error method returning that string (defined in package \"errors\").</p>\n\n<p>I don't know why it was decided to use float64 as the error type in this case, but the main advantage that I see is that if you had several functions that could return a similar error, you'd have to do the following:</p>\n\n<pre><code>func Method1() error{\n  ...\n  return errors.New(fmt.Sprintf(\"cannot Sqrt negative number: %g\", number)\n}\n\nfunc Method2() error{\n  ...\n  return errors.New(fmt.Sprintf(\"cannot Sqrt negative number: %g\", number2)\n}\n</code></pre>\n\n<p>And repeat for any function that needs to return a similar thing. With the code that you posted, you only declare the number responsible for the error when you create it, and the method \"Error()\" returns the formated string for all.</p>\n\n<pre><code>func Method1() error{\n  ...\n  ErrNegativeSqrt(number)\n}\n\nfunc Method2() error{\n  ...\n  ErrNegativeSqrt(number)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": false, "score": 2, "last_activity_date": 1457992313, "last_edit_date": 1457992313, "creation_date": 1457990664, "answer_id": 35998378, "question_id": 35998040, "link": "https://stackoverflow.com/questions/35998040/id-like-to-understand-why-one-would-create-a-type-for-handling-errors-in-go-and/35998378#35998378", "title": "I&#39;d like to understand why one would create a type for handling errors in Go and how you decide what underlying type it should have", "body": "<p>One usually doesn't create custom error types, but this is a demonstration of how errors work, as well as some other Go concepts.</p>\n\n<blockquote>\n  <p>Why is the underlying type of ErrNegativeSqrt \"float64\" and not \"error\"?</p>\n</blockquote>\n\n<p>This allows the <code>float64</code> value in <code>Sqrt</code> to be directly converted to an error. It also demonstrates how new types can have various underlying types, and methods can be attached to types other than structs. If you need to create your own type of error, use the underlying type that is most convenient for your use case.</p>\n\n<blockquote>\n  <p>Why create a type in the first place? Why do we create an error type and add a method to it instead of just having a free-standing function?</p>\n</blockquote>\n\n<p>Sometimes an error needs to have more information or context than can be contained in the single string returned from <a href=\"https://golang.org/pkg/errors/#New\" rel=\"nofollow\"><code>errors.New</code></a>, or <a href=\"https://golang.org/pkg/fmt/#Errorf\" rel=\"nofollow\"><code>fmt.Errorf</code></a>. For example, the <code>net</code> package uses a <a href=\"https://golang.org/pkg/net/#OpError\" rel=\"nofollow\"><code>net.OpError</code></a> (which conforms to the <a href=\"https://golang.org/pkg/net/#Error\" rel=\"nofollow\"><code>net.Error</code></a> interface) to package information about addresses, whether it's a temporary error, or a caused by a timeout.</p>\n\n<p>In most cases a simple string-based error will suffice. </p>\n"}, {"tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": false, "score": 1, "last_activity_date": 1457991470, "creation_date": 1457991470, "answer_id": 35998578, "question_id": 35998040, "link": "https://stackoverflow.com/questions/35998040/id-like-to-understand-why-one-would-create-a-type-for-handling-errors-in-go-and/35998578#35998578", "title": "I&#39;d like to understand why one would create a type for handling errors in Go and how you decide what underlying type it should have", "body": "<p>Like any other languages, we create a type or object to make sense and group functionalities for our own sakes (computer doesn't care). In Go, it is common to create a custom type or a struct type to extend the functionalities of an object.</p>\n\n<p>In this case, creating a type <code>ErrNegativeSqrt</code> you can actually extend a <code>float64</code> functionalities by adding methods. For instance, compare this two approaches:</p>\n\n<pre><code>func TimesTwo(val int) int {\n        return val * 2\n}\n</code></pre>\n\n<p>with </p>\n\n<pre><code>type SuperChargedInt int\n\nfunc (sc SuperChargedInt) TimesTwo() int {\n        return int(sc) * 2\n}\n</code></pre>\n\n<p>Instead of passing an <code>int</code> to a function, a <code>SuperChargedInt</code> has the capability to act on itself. This becomes very handy when you tread into interfaces.</p>\n\n<pre><code>type MyInt interface {\n        TimesTwo() int\n}\n\ntype IntA int\ntype IntB int\n\nfunc (a IntA) TimesTwo() int {\n        return int(a) * 2\n}\n\nfunc (b IntB) TimesTwo() int {\n        return int(b) * (1 + 1)\n}\n\nfunc PrintMyInt(c MyInt) {\n        fmt.Println(c)\n}\n</code></pre>\n\n<p>Type <code>IntA</code> and <code>IntB</code>, satisfying the interface <code>MyInt</code>because they both implement the required methods, can be use anywhere in the code that requires <code>MyInt</code>.</p>\n\n<pre><code>var a IntA = 34\nvar b IntB = 32\nPrintMyInt(a)\nPrintMyInt(b)\n\ntype SomeNum struct {\n        A MyInt\n}\n\nnum := SomeNum{ A: a }\n</code></pre>\n\n<p>With the understanding of interfaces, now coming back to <code>ErrNegativeSqrt</code> type, adding <code>Error()</code> method to it make the type implements the <code>error</code> interface (which has only one method <code>Error()</code> to implement). Now you can use the type just like an error anywhere.</p>\n\n<p>This is the duck-typing in Golang.</p>\n"}], "owner": {"reputation": 135, "user_id": 3291242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01081686bcfb56623c1f869d0276b287?s=128&d=identicon&r=PG", "display_name": "dianafaye17", "link": "https://stackoverflow.com/users/3291242/dianafaye17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 1, "accepted_answer_id": 35998345, "answer_count": 3, "score": 8, "last_activity_date": 1457992313, "creation_date": 1457989476, "question_id": 35998040, "link": "https://stackoverflow.com/questions/35998040/id-like-to-understand-why-one-would-create-a-type-for-handling-errors-in-go-and", "title": "I&#39;d like to understand why one would create a type for handling errors in Go and how you decide what underlying type it should have", "body": "<p>I'm working through <a href=\"https://tour.golang.org/methods/20\">A Tour of Go - Exercise: Errors</a>. It holds my hand as I add error handling to a square root function.</p>\n\n<p>Here is my solution:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"math\"\n)\n\ntype ErrNegativeSqrt float64\n\nfunc (e ErrNegativeSqrt) Error() string {\n    fmt.Sprint(float64(e))\n    return fmt.Sprintf(\"cannot Sqrt negative number: %g\", float64(e))\n}\n\nfunc Sqrt(x float64) (float64, error) {\n    z := 1.0\n    margin := 0.00000000000001\n    for {\n        if x &lt; 0 {\n            return 0, ErrNegativeSqrt(x)\n        }\n        previousZ := z\n        z = z - (z*z-x)/(2*z)\n        if math.Abs(previousZ-z) &lt; margin {\n            fmt.Println(previousZ, \"-\", z, \"=\", previousZ-z)\n            break\n        }\n    }\n    fmt.Println(\"math.Sqrt:\", math.Sqrt(x))\n    return z, nil\n}\n\nfunc main() {\n    fmt.Println(Sqrt(2))\n    fmt.Println(Sqrt(-2))\n}\n</code></pre>\n\n<p>I am having trouble understanding the line:</p>\n\n<pre><code>type ErrNegativeSqrt float64\n</code></pre>\n\n<p>I have two questions: </p>\n\n<ol>\n<li>Why is the underlying type of ErrNegativeSqrt \"float64\" and not \"error\"?</li>\n</ol>\n\n<p>and</p>\n\n<ol start=\"2\">\n<li>Why create a type in the first place? Why do we create an error type and add a method to it instead of just having a free-standing function?</li>\n</ol>\n\n<p>I'm a beginner at Go and I'd like to understand. Thank you so much.</p>\n"}, {"tags": ["linux", "macos", "go", "build", "docker"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 3, "creation_date": 1457989535, "post_id": 35997995, "comment_id": 59648709, "body": "Docker caches image layers, and allows you to start from a specific image. Break up the commands in the Dockerfile so that you can reuse as many layers as possible, and changes in your source only require building your own package."}, {"owner": {"reputation": 646, "user_id": 4335622, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-OeTdPDQRltk/AAAAAAAAAAI/AAAAAAAAAE4/KXT0pHbxg9s/photo.jpg?sz=128", "display_name": "i.van", "link": "https://stackoverflow.com/users/4335622/i-van"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1457989834, "post_id": 35997995, "comment_id": 59648868, "body": "JimB, but how can I break up &#39;go get&#39; command? RUN go get package1 /n RUN go get package2... etc and they will be cached?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 4, "creation_date": 1457990199, "post_id": 35997995, "comment_id": 59649046, "body": "Don&#39; use <code>go get</code>, or at least create an base image with it and start from there (<code>go get</code> shouldn&#39;t be used in production, so most people have some other method for managing dependencies). A basic solution in a single Dockerfile is to create a Makefile or script to install all deps as required, which can be put in a single RUN statement."}, {"owner": {"reputation": 646, "user_id": 4335622, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-OeTdPDQRltk/AAAAAAAAAAI/AAAAAAAAAE4/KXT0pHbxg9s/photo.jpg?sz=128", "display_name": "i.van", "link": "https://stackoverflow.com/users/4335622/i-van"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1457990386, "post_id": 35997995, "comment_id": 59649158, "body": "I&#39;ve understood, thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 5278, "user_id": 3074508, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6bbb9b3baf8440bc7a00e3147378bcf2?s=128&d=identicon&r=PG", "display_name": "CESCO", "link": "https://stackoverflow.com/users/3074508/cesco"}, "is_accepted": false, "score": 0, "last_activity_date": 1472156503, "creation_date": 1472156503, "answer_id": 39154131, "question_id": 35997995, "link": "https://stackoverflow.com/questions/35997995/golang-mac-osx-build-for-docker-machine/39154131#39154131", "title": "Golang Mac OSX build for Docker machine", "body": "<p>I use the first approach. Here its a gulp task the build go code. If the production flag is set, it runs <code>GOOS=linux CGO_ENABLED=0 go build</code> instead  <code>go build</code>. So the binary will work inside a docker container</p>\n\n<pre><code>gulp.task('server:build', function () {\n    var build;\n\n    let options = {\n        env: {\n            'PATH': process.env.PATH,\n            'GOPATH': process.env.GOPATH\n        }\n    }\n\n    if (argv.prod) {\n        options.env['GOOS'] = 'linux'\n        options.env['CGO_ENABLED'] = '0'\n        console.log(\"Compiling go binarie to run inside Docker container\")\n    }\n\n    var output = argv.prod ? conf.paths.build + '/prod/bin' : conf.paths.build + '/dev/bin';\n    build = child.spawnSync('go', ['build', '-o', output, \"src/backend/main.go\"], options);\n    if (build.stderr.length) {\n        var lines = build.stderr.toString()\n            .split('\\n').filter(function(line) {\n                return line.length\n            });\n        for (var l in lines)\n            util.log(util.colors.red(\n                'Error (go install): ' + lines[l]\n            ));\n        notifier.notify({\n            title: 'Error (go install)',\n            message: lines\n        });\n    }\n    return build;\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 5277749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6894801ba1e52a77fefb30e77cebf5ec?s=128&d=identicon&r=PG&f=1", "display_name": "candita", "link": "https://stackoverflow.com/users/5277749/candita"}, "is_accepted": false, "score": 0, "last_activity_date": 1476281491, "creation_date": 1476281491, "answer_id": 40000860, "question_id": 35997995, "link": "https://stackoverflow.com/questions/35997995/golang-mac-osx-build-for-docker-machine/40000860#40000860", "title": "Golang Mac OSX build for Docker machine", "body": "<p>You could create a Docker container from the distinct OS you need for your executable, and map a volume to your src directory. Run the container and make the executable from within the container.  You end up with a binary that you can run on the distinct OS.</p>\n"}, {"tags": [], "owner": {"reputation": 5467, "user_id": 6220193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ce5723ea1716955e1f492c59d5cb5cb?s=128&d=identicon&r=PG", "display_name": "TehSphinX", "link": "https://stackoverflow.com/users/6220193/tehsphinx"}, "is_accepted": true, "score": 3, "last_activity_date": 1561630172, "last_edit_date": 1561630172, "creation_date": 1498473179, "answer_id": 44757772, "question_id": 35997995, "link": "https://stackoverflow.com/questions/35997995/golang-mac-osx-build-for-docker-machine/44757772#44757772", "title": "Golang Mac OSX build for Docker machine", "body": "<p>Here a solution to make cross-compile super easy even with CGO.</p>\n\n<p>I stumbled upon it recently after wasting a lot of time getting a new windows build server to build my Go app.\nNow I just compile it on my Mac and will create a Linux build server with it:</p>\n\n<p><a href=\"https://github.com/karalabe/xgo\" rel=\"nofollow noreferrer\">https://github.com/karalabe/xgo</a></p>\n\n<p>Many thanks to P\u00e9ter Szil\u00e1gyi alias karalabe for this really great package!</p>\n\n<p>How to use:</p>\n\n<ul>\n<li>have Docker running</li>\n<li>go get github.com/karalabe/xgo</li>\n<li>xgo --targets=windows/amd64 ./</li>\n</ul>\n\n<p>There are lots more options!</p>\n\n<p>-- edit --</p>\n\n<p>Almost 3 Years later I'm not using this any more, but my docker image to build my application in a linux based CD pipeline is still based on the docker images used in <code>xgo</code>.</p>\n"}], "owner": {"reputation": 646, "user_id": 4335622, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-OeTdPDQRltk/AAAAAAAAAAI/AAAAAAAAAE4/KXT0pHbxg9s/photo.jpg?sz=128", "display_name": "i.van", "link": "https://stackoverflow.com/users/4335622/i-van"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2006, "favorite_count": 2, "accepted_answer_id": 44757772, "answer_count": 3, "score": 6, "last_activity_date": 1561630172, "creation_date": 1457989291, "question_id": 35997995, "link": "https://stackoverflow.com/questions/35997995/golang-mac-osx-build-for-docker-machine", "title": "Golang Mac OSX build for Docker machine", "body": "<p>I need to run Golang application on Docker machine.</p>\n\n<p>I'm working on Mac OSX and Docker is working on top of Linux virtual machine, so binaries builded on Mac are not runnable on Docker. </p>\n\n<p>I see two ways here:</p>\n\n<ol>\n<li>cross-compile binaries on Mac for linux OS</li>\n<li>copy project sources to docker, run 'go get' and 'go build' on it</li>\n</ol>\n\n<p>First one is hard because of CGO (it is used in some imported libraries). </p>\n\n<p>Second is very slow because of 'go get' operation.</p>\n\n<p>Can you please tell me, which way is the most common in that situation? Or maybe I'm doing something wrong?</p>\n"}, {"tags": ["forms", "text", "go", "dry", "idioms"], "comments": [{"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1457988939, "post_id": 35997842, "comment_id": 59648353, "body": "Can you show us how you do it now? HTML form code + Go handler?"}, {"owner": {"reputation": 10150, "user_id": 341362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/deb483e59f08e28083464e8e35a352db?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/341362/charles"}, "reply_to_user": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1457989064, "post_id": 35997842, "comment_id": 59648431, "body": "@icza: Nothing fancy, I just defined a local function which returns <code>r.FormValue(name) == &quot;on&quot;</code> for a given <code>name</code> (where <code>r</code> is the current <code>http.Request</code>) then use it to concatenate the appropriate strings. I then call the functions a second time to see if I need to concatenate &quot;None&quot;. Just the straightforward, boring algorithm."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1457989395, "post_id": 35997842, "comment_id": 59648637, "body": "Maybe it&#39;s just me, but since you have a working code which you want to improve, I still find it important to see what to improve."}, {"owner": {"reputation": 10150, "user_id": 341362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/deb483e59f08e28083464e8e35a352db?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/341362/charles"}, "reply_to_user": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1457990095, "post_id": 35997842, "comment_id": 59648996, "body": "@icza: <a href=\"http://pastebin.com/c21VFWbs\" rel=\"nofollow noreferrer\">pastebin.com/c21VFWbs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 3990434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JMTJk.jpg?s=128&g=1", "display_name": "Gon", "link": "https://stackoverflow.com/users/3990434/gon"}, "edited": false, "score": 0, "creation_date": 1457989874, "post_id": 35998136, "comment_id": 59648897, "body": "You don&#39;t have to add it to array, you can just adding text for each &quot;if&quot; syntax."}, {"owner": {"reputation": 10150, "user_id": 341362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/deb483e59f08e28083464e8e35a352db?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/341362/charles"}, "edited": false, "score": 0, "creation_date": 1457989926, "post_id": 35998136, "comment_id": 59648914, "body": "This is similar to what I&#39;m doing now. My question is how should I handle cases where I have many collections of checkboxes -- should I repeat this code, or is there some way to modularize it?"}], "tags": [], "owner": {"reputation": 693, "user_id": 3990434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JMTJk.jpg?s=128&g=1", "display_name": "Gon", "link": "https://stackoverflow.com/users/3990434/gon"}, "is_accepted": false, "score": 0, "last_activity_date": 1457990084, "last_edit_date": 1457990084, "creation_date": 1457989825, "answer_id": 35998136, "question_id": 35997842, "link": "https://stackoverflow.com/questions/35997842/parsing-simple-groups-of-checkboxes-in-go/35998136#35998136", "title": "Parsing simple groups of checkboxes in Go", "body": "<p>This will store the form values into an array.\nThen, it will iterate the array into a string with appending \",\" at the end of each name. \nThen, it will put very last \", \" (2 bytes) if it's longer than 2, otherwise, print \"None\"</p>\n\n<pre><code>func(w http.ResponseWriter, r *http.Request) {\n    r.ParseMultipartForm(0)\n    arr := []string{}\n    if r.FormValue(\"Foo\") {\n        arr = append(arr, \"Foo\")\n    }\n    if r.FormValue(\"Bar\") {\n        arr = append(arr, \"Bar\")\n    }\n    if r.FormValue(\"Baz\") {\n        arr = append(arr, \"Baz\")\n    }\n    if r.FormValue(\"Bat\") {\n        arr = append(arr, \"Bat\")\n    }\n    out := \"\"\n    for _, title := range arr {\n        out += title +\", \"\n    }\n    if len(out) &gt; 2 {\n        out := out[0: len(out)-2]   \n    } else {\n        out = \"None\"\n    }\n\n    fmt.Println(out)\n}\n</code></pre>\n\n<p>If you want to iterate, </p>\n\n<pre><code>for k, vs:= range r.Form {   \n  for _, v:= range vs{\n     fmt.Println(k, v)\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10150, "user_id": 341362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/deb483e59f08e28083464e8e35a352db?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/341362/charles"}, "edited": false, "score": 0, "creation_date": 1457991921, "post_id": 35998490, "comment_id": 59649906, "body": "Thank you. :) I&#39;m still getting used to Go and I didn&#39;t want to be writing repetitive code."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 1, "last_activity_date": 1457992032, "last_edit_date": 1457992032, "creation_date": 1457991067, "answer_id": 35998490, "question_id": 35997842, "link": "https://stackoverflow.com/questions/35997842/parsing-simple-groups-of-checkboxes-in-go/35998490#35998490", "title": "Parsing simple groups of checkboxes in Go", "body": "<p>There are many repeating code in yours which can be optimized out.</p>\n\n<p>Your code must contain at least the following \"fragments\":</p>\n\n<ol>\n<li><p>The mappings from entry name to entry text, which can be stored in a map, e.g.</p>\n\n<pre><code>var mappings = map[string]string {\n    \"Foo\": \"Foo text\",\n    \"Bar\": \"Bar text\",\n    \"Baz\": \"Baz text\",\n    \"Bat\": \"Bat text\",\n    // ... other mappings\n}\n</code></pre></li>\n<li><p>And the list of keys belonging to a group, which can be stored in a slice, e.g.</p>\n\n<pre><code>var group1 = []string{\"Foo\", \"Bar\", \"Baz\", \"Bat\"}\n</code></pre></li>\n</ol>\n\n<p>Once you defined these, you can have a helper method which handles a group:</p>\n\n<pre><code>func handleGroup(r *http.Request, group []string) (res string) {\n    for _, v := range group {\n        if r.FormValue(v) == \"on\" {\n            res := \", \" + mappings[v]\n        }\n    }\n    if res == \"\" {\n        return \"none\\n\"\n    }\n    return res[2:] + \"\\n\"\n}\n</code></pre>\n\n<p>That's all. After this your handler can be this simple:</p>\n\n<pre><code>func checkboxHandler(w http.ResponseWriter, r *http.Request) {\n    // Handle group1:\n    res1 := handleGroup(r, group1)\n\n    // Handle group2:\n    res2 := handleGroup(r, group2)\n}\n</code></pre>\n\n<p><strong>Notes:</strong></p>\n\n<p>It wasn't your requirement, but this solution handles translations very easily: each translation can have its own <code>mappings</code> map, and that's all. Nothing else needs to be changed.</p>\n\n<p>Performance also wasn't your concern, but appending strings isn't very efficient this way. If performance is at least a little concern, you can improve it without adding complexity by utilizing <a href=\"https://golang.org/pkg/bytes/#Buffer\" rel=\"nofollow\"><code>bytes.Buffer</code></a>:</p>\n\n<pre><code>func handleGroup(r *http.Request, group []string) string {\n    buf := &amp;bytes.Buffer{}\n    for _, v := range group {\n        if r.FormValue(v) == \"on\" {\n            buf.WriteString(\", \")\n            buf.WriteString(mappings[v])\n        }\n    }\n    if buf.Len() == 0 {\n        return \"none\\n\"\n    }\n    buf.WriteString(\"\\n\")\n    return string(buf.Bytes()[2:])\n}\n</code></pre>\n"}], "owner": {"reputation": 10150, "user_id": 341362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/deb483e59f08e28083464e8e35a352db?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/341362/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 35998490, "answer_count": 2, "score": 1, "last_activity_date": 1457992032, "creation_date": 1457988715, "last_edit_date": 1457991168, "question_id": 35997842, "link": "https://stackoverflow.com/questions/35997842/parsing-simple-groups-of-checkboxes-in-go", "title": "Parsing simple groups of checkboxes in Go", "body": "<p>I'm parsing a form in Go and I frequently find groups of checkboxes which need to be processed into text like so:</p>\n\n<pre><code>[ ] Foo\n[x] Bar\n[ ] Baz\n[x] Bat\n</code></pre>\n\n<p>where the output should be a comma-separated list \"BarText, BatText\" corresponding to the checked items, or \"None\" if none of the items are checked. What is a good way to handle this situation? Repeating the logic each time seems like a bad idea.</p>\n\n<p>In the spirit of YAGNI there's no need to handle possible future changes like translations into other languages (actually this example is highly unlikely to be useful in the present context).</p>\n\n<p>Efficiency is unimportant for this application.</p>\n\n<p>Edit: code looks like this (<a href=\"http://pastebin.com/c21VFWbs\" rel=\"nofollow\">source</a>):</p>\n\n<pre><code>func handleCheckboxesForm(w http.ResponseWriter, r *http.Request) {\n    b := func(name string) string { // helper function for boolean values in the form\n        return r.FormValue(name) == \"on\"\n    }\n\n    text := \"Header stuff here\"\n\n    mytext := \"\"\n    if b(\"nfpa-alk\") {\n        mytext += \", alkaline\"\n    }\n    if b(\"nfpa-acid\") {\n        mytext += \", acid\"\n    }\n    if b(\"nfpa-w\") {\n        mytext += \", reacts violently with water\"\n    }\n    if b(\"nfpa-alk\") || b(\"nfpa-acid\") || b(\"nfpa-w\") {\n        text += mytext[2:] + \"\\n\"\n    } else {\n        text += \"none\\n\"\n    }\n\n    // lots of other checkbox groups here\n\n    // do stuff with text\n}\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 182, "user_id": 1700248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CSfD.jpg?s=128&g=1", "display_name": "pupizoid", "link": "https://stackoverflow.com/users/1700248/pupizoid"}, "edited": false, "score": 6, "creation_date": 1458054125, "post_id": 35996966, "comment_id": 59681246, "body": "Consider reading <a href=\"https://blog.golang.org/defer-panic-and-recover\" rel=\"nofollow noreferrer\">official go blog</a>, where panic &amp; recover are well explained"}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1578925175, "post_id": 35996966, "comment_id": 105587315, "body": "A common opinion is that you should never use either. <a href=\"https://dave.cheney.net/2015/11/05/lets-talk-about-logging\" rel=\"nofollow noreferrer\">dave.cheney.net/2015/11/05/lets-talk-about-logging</a>"}, {"owner": {"reputation": 1542, "user_id": 1369897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68d343f9b7ecfbb19ab2c2a4e86ad97?s=128&d=identicon&r=PG", "display_name": "Raatje", "link": "https://stackoverflow.com/users/1369897/raatje"}, "edited": false, "score": 0, "creation_date": 1588660759, "post_id": 35996966, "comment_id": 108976049, "body": "After reading the Go blog it seems that Panic behaves kind of like Exceptions, it bubbles up the execution stack until caught by a Recover.  In general, don&#39;t panic unless you implement a Recover as well. Never log.Fatal in libraries. Always return nil,false or an error depending on the situation"}], "answers": [{"comments": [{"owner": {"reputation": 12273, "user_id": 1048539, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b2bfeca28ec73556f395bed4668f9e16?s=128&d=identicon&r=PG", "display_name": "enderland", "link": "https://stackoverflow.com/users/1048539/enderland"}, "edited": false, "score": 0, "creation_date": 1457987015, "post_id": 35997323, "comment_id": 59647157, "body": "So in the context of tests it seems panic would be better then? Because they are targeted towards programmers.."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 12273, "user_id": 1048539, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b2bfeca28ec73556f395bed4668f9e16?s=128&d=identicon&r=PG", "display_name": "enderland", "link": "https://stackoverflow.com/users/1048539/enderland"}, "edited": false, "score": 1, "creation_date": 1457987144, "post_id": 35997323, "comment_id": 59647241, "body": "@enderland: only panic if the stack trace is relevant (I know I don&#39;t want useless stack traces when testing, when a simple message about the failure would suffice). If you only need to write an error message, then just write that message. (also, use <code>t.Fatal</code>/<code>t.Fatalf</code> vs log in tests when possible)"}, {"owner": {"reputation": 42446, "user_id": 245552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48906ce482893497d2d7e017cd2f4352?s=128&d=identicon&r=PG", "display_name": "Matthieu Napoli", "link": "https://stackoverflow.com/users/245552/matthieu-napoli"}, "edited": false, "score": 5, "creation_date": 1528049218, "post_id": 35997323, "comment_id": 88348687, "body": "The fact that <code>Fatal</code> doesn&#39;t execute defers is a huge problem IMO, I can&#39;t see how this makes it a viable solution. For example because of that my program does not cleanup its temporary directories\u2026"}, {"owner": {"reputation": 3623, "user_id": 491557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3c20e970d3e909fa67a7809965c4936?s=128&d=identicon&r=PG", "display_name": "Spangen", "link": "https://stackoverflow.com/users/491557/spangen"}, "edited": false, "score": 2, "creation_date": 1528109925, "post_id": 35997323, "comment_id": 88367417, "body": "If the function that deals with the temp directories returns an error, then defer will be called and it is the responsibility of the caller to decide if <code>log.Fatal</code> is needed.  Maybe?"}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": false, "score": 60, "last_activity_date": 1458046886, "last_edit_date": 1458046886, "creation_date": 1457986946, "answer_id": 35997323, "question_id": 35996966, "link": "https://stackoverflow.com/questions/35996966/what-are-the-differences-in-outcome-for-panic-vs-log-fatalln-in-golang/35997323#35997323", "title": "What are the differences in outcome for panic vs log.fatalln() in golang?", "body": "<ul>\n<li><p>The log message goes to the configured log output, while panic is only going to write to stderr. </p></li>\n<li><p>Panic will print a stack trace, which may not be relevant to the error at all.</p></li>\n<li><p>Defers will be executed when a program panics, but calling <code>os.Exit</code> exits immediately, and deferred functions can't be run. </p></li>\n</ul>\n\n<p>In general, only use <code>panic</code> for programming errors, where the stack trace is important to the context of the error. If the message isn't targeted at the programmer, you're simply hiding the message in superfluous data.</p>\n"}, {"tags": [], "owner": {"reputation": 1178, "user_id": 3967945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d671333d111810416ba4952f1da75c1?s=128&d=identicon&r=PG", "display_name": "mroman", "link": "https://stackoverflow.com/users/3967945/mroman"}, "is_accepted": false, "score": 6, "last_activity_date": 1528963964, "creation_date": 1528963964, "answer_id": 50852667, "question_id": 35996966, "link": "https://stackoverflow.com/questions/35996966/what-are-the-differences-in-outcome-for-panic-vs-log-fatalln-in-golang/50852667#50852667", "title": "What are the differences in outcome for panic vs log.fatalln() in golang?", "body": "<p><code>panic</code> is often used in little programs to just terminate the program once an error appears you don't know how to handle or don't want to handle. The downside of <code>panic</code> is exactly that: it'll terminate the program (mostly, unless you use <code>recover</code>). It's generally not good to use <code>panic</code> unless you intend to recover from it or unless something has happened you really can't recover from at all nor where you can gracefully terminate the program otherwise. Consider for example an API that offers you functionality but that API secretly has a <code>panic</code> somewhere and you notice that your program terminates in production due to this. Thus, the \"outward API\" of whatever code you write should recover from panics and return an error instead. The same thing applies to anything that terminates the program. </p>\n\n<p>However, os.Exit() can't be recovered from nor does it execute defers. </p>\n"}], "owner": {"reputation": 12273, "user_id": 1048539, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b2bfeca28ec73556f395bed4668f9e16?s=128&d=identicon&r=PG", "display_name": "enderland", "link": "https://stackoverflow.com/users/1048539/enderland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29137, "favorite_count": 5, "answer_count": 2, "score": 69, "last_activity_date": 1591916090, "creation_date": 1457985744, "last_edit_date": 1578929740, "question_id": 35996966, "link": "https://stackoverflow.com/questions/35996966/what-are-the-differences-in-outcome-for-panic-vs-log-fatalln-in-golang", "title": "What are the differences in outcome for panic vs log.fatalln() in golang?", "body": "<p>From the documentation on <a href=\"https://golang.org/pkg/log/#Fatalln\" rel=\"noreferrer\">log.Fatalln()</a>:</p>\n\n<blockquote>\n  <p>func Fatalln(v ...interface{}) Fatalln is equivalent to Println()\n  followed by a call to os.Exit(1).</p>\n</blockquote>\n\n<p>The <a href=\"https://golang.org/src/log/log.go\" rel=\"noreferrer\">source code</a> for Fatalln:</p>\n\n<pre><code>   310  // Fatalln is equivalent to Println() followed by a call to os.Exit(1).\n   311  func Fatalln(v ...interface{}) {\n   312      std.Output(2, fmt.Sprintln(v...))\n   313      os.Exit(1)\n   314  }\n</code></pre>\n\n<p>It seems the main difference is whether or not the error is recoverable (since you can recover a panic) - is there anything more significantly different between these? </p>\n\n<p>Panic's interface <a href=\"https://golang.org/src/builtin/builtin.go?h=func+panic\" rel=\"noreferrer\">definition</a> is:</p>\n\n<pre><code>   215  // The panic built-in function stops normal execution of the current\n   216  // goroutine. When a function F calls panic, normal execution of F stops\n   217  // immediately. Any functions whose execution was deferred by F are run in\n   218  // the usual way, and then F returns to its caller. To the caller G, the\n   219  // invocation of F then behaves like a call to panic, terminating G's\n   220  // execution and running any deferred functions. This continues until all\n   221  // functions in the executing goroutine have stopped, in reverse order. At\n   222  // that point, the program is terminated and the error condition is reported,\n   223  // including the value of the argument to panic. This termination sequence\n   224  // is called panicking and can be controlled by the built-in function\n   225  // recover.\n   226  func panic(v interface{})\n</code></pre>\n\n<p>It appears panic does not return anything.</p>\n\n<p>Is that the primary difference? Otherwise, they seem to perform the same function in an application, assuming the panic is not recovered.</p>\n"}, {"tags": ["go", "exec"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 3, "creation_date": 1457979378, "post_id": 35994907, "comment_id": 59642650, "body": "Why not do the same thing for stderr?"}], "answers": [{"comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 1, "creation_date": 1457984381, "post_id": 35995372, "comment_id": 59645609, "body": "Alternatively, create a decicated pipe using <code>os.Pipe()</code> and then assign its write end to both <code>Stderr</code> and <code>Stdout</code> fields of your <code>cmd</code> instance. Then read from its read end."}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "reply_to_user": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 1, "creation_date": 1457985121, "post_id": 35995372, "comment_id": 59646013, "body": "@kostix The StdoutPipe method is easier to use because it <a href=\"https://github.com/golang/go/blob/13f74db304fdf6dc6241485d6e6f3f6a0327633c/src/os/exec/exec.go#L512-L518\" rel=\"nofollow noreferrer\">arranges to close the os.Pipe writer at Start() and the os.Pipe reader at Wait()</a>."}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": false, "score": 15, "last_activity_date": 1457980472, "creation_date": 1457980472, "answer_id": 35995372, "question_id": 35994907, "link": "https://stackoverflow.com/questions/35994907/go-combining-cmd-stdoutpipe-and-cmd-stderrpipe/35995372#35995372", "title": "Go - Combining cmd.StdoutPipe and Cmd.StderrPipe", "body": "<p>To combine stdout and stderr to a single reader, assign a single pipe to Command.Stdout and Command.Stderr:</p>\n\n<pre><code>cmdReader, err := cmd.StdoutPipe()\ncmd.Stderr = cmd.Stdout\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 3, "creation_date": 1457998505, "post_id": 35995643, "comment_id": 59652726, "body": "This approach returns all output from stdout before returning any from stdin."}], "tags": [], "owner": {"reputation": 13739, "user_id": 38333, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2ea7c27233a9019a1f91a821726a4d4?s=128&d=identicon&r=PG", "display_name": "cd1", "link": "https://stackoverflow.com/users/38333/cd1"}, "is_accepted": true, "score": 1, "last_activity_date": 1457981327, "creation_date": 1457981327, "answer_id": 35995643, "question_id": 35994907, "link": "https://stackoverflow.com/questions/35994907/go-combining-cmd-stdoutpipe-and-cmd-stderrpipe/35995643#35995643", "title": "Go - Combining cmd.StdoutPipe and Cmd.StderrPipe", "body": "<p>Use the function <a href=\"https://golang.org/pkg/io/#MultiReader\" rel=\"nofollow\"><code>io.MultiReader</code></a> to combine multiple readers into one:</p>\n\n<pre><code>outReader, err := cmd.StdoutReader()\nif err != nil {\n    // handle err\n}\n\nerrReader, err := cmd.StderrReader()\nif err != nil {\n    // handle err\n}\n\ncmdReader := io.MultiReader(outReader, errReader)\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 6062250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2757995d4a8d6fc49459dd6bfd831fb0?s=128&d=identicon&r=PG&f=1", "display_name": "zsolt.k", "link": "https://stackoverflow.com/users/6062250/zsolt-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1622, "favorite_count": 0, "accepted_answer_id": 35995643, "answer_count": 2, "score": 7, "last_activity_date": 1457981327, "creation_date": 1457978986, "question_id": 35994907, "link": "https://stackoverflow.com/questions/35994907/go-combining-cmd-stdoutpipe-and-cmd-stderrpipe", "title": "Go - Combining cmd.StdoutPipe and Cmd.StderrPipe", "body": "<p>I would like to execute a command in Go, and combining its stdout and stderr into one stream. I wrote this code, its read only from the stdout, but I don't know how to I combine it with the stderr:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"os\"\n    \"os/exec\"\n    \"bufio\"\n)\n\nfunc runCommand() {\n    var (\n        err error\n    )\n\n    cmdName := \"docker\"\n    cmdArgs := []string{\"build\", \"--no-cache=true\", \"--force-rm=true\", \".\"}\n\n    cmd := exec.Command(cmdName, cmdArgs...)\n\n    cmdReader, err := cmd.StdoutPipe()\n    if err != nil {\n        fmt.Fprintln(os.Stderr, \"Error creating StdoutPipe for Cmd\", err)\n    }\n\n    scanner := bufio.NewScanner(cmdReader)\n    go func() {\n        for scanner.Scan() {\n            fmt.Printf(\"docker build out | %s\\n\", scanner.Text())\n        }\n    }()\n\n    err = cmd.Start()\n    if err != nil {\n        fmt.Fprintln(os.Stderr, \"Error starting Cmd\", err)\n    }\n\n    err = cmd.Wait()\n    if err != nil {\n        fmt.Fprintln(os.Stderr, \"Error waiting for Cmd\", err)\n    }\n}\n\nfunc main() {\n    runCommand()\n}\n</code></pre>\n\n<p>Thanks for all answers!</p>\n"}, {"tags": ["c++", "boost", "go", "concurrency", "goroutine"], "comments": [{"owner": {"reputation": 1762, "user_id": 5120331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTAB.png?s=128&g=1", "display_name": "Corvus Crypto", "link": "https://stackoverflow.com/users/5120331/corvus-crypto"}, "edited": false, "score": 0, "creation_date": 1457980883, "post_id": 35992854, "comment_id": 59643628, "body": "was going to go look at the code but couldn&#39;t find a submethod of boost called fiber. is it safe to assume that boost.fiber is the same as you meant? Just want to be sure before digging into source code."}, {"owner": {"reputation": 3820, "user_id": 4735801, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/199d8cc1517265fe55f0ebeee0566d18?s=128&d=identicon&r=PG&f=1", "display_name": "Exagon", "link": "https://stackoverflow.com/users/4735801/exagon"}, "reply_to_user": {"reputation": 1762, "user_id": 5120331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTAB.png?s=128&g=1", "display_name": "Corvus Crypto", "link": "https://stackoverflow.com/users/5120331/corvus-crypto"}, "edited": false, "score": 0, "creation_date": 1457980964, "post_id": 35992854, "comment_id": 59643671, "body": "Yes thats what I mean ... I am sorry"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 1, "creation_date": 1457981894, "post_id": 35992854, "comment_id": 59644196, "body": "Here&#39;s (and outdated but valid for your question anyway) <a href=\"https://morsmachine.dk/go-scheduler\" rel=\"nofollow noreferrer\">description of how Go runtime works w.r.t goroutines</a> so you could compare and contrast by yourself."}], "answers": [{"comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1457985159, "post_id": 35996436, "comment_id": 59646039, "body": "So, how does <code>boost.fiber</code> goes about implementing that &quot;M &#215; N&quot; scheduling of goroutines where you have <code>N</code> OS threads serve <code>M</code> goroutines, with <code>N \u226a M</code>, allocating new threads only when there&#39;s the need for this?"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1457985592, "post_id": 35996436, "comment_id": 59646289, "body": "Another point, is that without at least outlining how <code>boost.fiber</code> can be used to do <a href=\"https://blog.golang.org/pipelines\" rel=\"nofollow noreferrer\">such</a> or <a href=\"http://blog.golang.org/go-concurrency-patterns-timing-out-and\" rel=\"nofollow noreferrer\">such</a> stuff, your &quot;...MUCH more versatile...&quot; agitation appears to be a bit... uhm... uninformed. I mean, the fact Go has this stuff in its runtime and not in the form of an external library, has clear scientific background."}, {"owner": {"reputation": 1762, "user_id": 5120331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTAB.png?s=128&g=1", "display_name": "Corvus Crypto", "link": "https://stackoverflow.com/users/5120331/corvus-crypto"}, "reply_to_user": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1457985735, "post_id": 35996436, "comment_id": 59646372, "body": "&quot;this an advanced topic and should not be part of this lib. I&#39;m working  currently  on a library implementing a thread-pool which uses internally fibers.  It maps to a M:N solution.  boost.fiber itself should provide only the low-level functionality (same as  boost.context does  for boost.coroutine and boost.coroutine acts for boost.fiber).  the lib contains a unit-tests (test_migration) which shows how a fiber can  be migrated  between two threads (this code shows how work-stealing/work-sharing can be  implemented in a thread-pool). &quot; - Oliver Kowalke"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1457985742, "post_id": 35996436, "comment_id": 59646379, "body": "You might be interested in studying <a href=\"https://news.ycombinator.com/item?id=10585505\" rel=\"nofollow noreferrer\">this</a>, <a href=\"https://swtch.com/libtask/\" rel=\"nofollow noreferrer\">this</a> and <a href=\"http://state-threads.sourceforge.net/docs/st.html\" rel=\"nofollow noreferrer\">this</a> to refine your research."}, {"owner": {"reputation": 1762, "user_id": 5120331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTAB.png?s=128&g=1", "display_name": "Corvus Crypto", "link": "https://stackoverflow.com/users/5120331/corvus-crypto"}, "reply_to_user": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1457985774, "post_id": 35996436, "comment_id": 59646401, "body": "the reason it is much more versatile is because of how low-level it is. You can&#39;t change the scheduling in go for a single thread for instance. You can&#39;t share memory with goroutines, etc. etc. Just look at the source code and you can see this stuff. it&#39;s already out there. I&#39;m obviously just generalizing to answer the OP&#39;s question concisely. no need to write a book for a simple and quick compare and contrast, ya know?"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1457986047, "post_id": 35996436, "comment_id": 59646539, "body": "Of course, you can share memory with goroutines. It&#39;s just a suboptimal solution for many cases (which is sadly instilled in the brains of many folks coming from low-level languages). Channels can be thought of as queues protected by mutexes (though the implementation is more involved, of course). Channels allow you to write naturally flowing sequential code, but for those cases where it&#39;s more appropriate, there are mutexes, waitgroups, conditional variables and atomics. All this stuff."}, {"owner": {"reputation": 1762, "user_id": 5120331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTAB.png?s=128&g=1", "display_name": "Corvus Crypto", "link": "https://stackoverflow.com/users/5120331/corvus-crypto"}, "edited": false, "score": 0, "creation_date": 1457986190, "post_id": 35996436, "comment_id": 59646648, "body": "you are right about that. I do need to change that. You can indeed share memory, though IIRC if your routine is scheduled across threads you need to be more safe about things"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 3, "creation_date": 1457986265, "post_id": 35996436, "comment_id": 59646699, "body": "@CorvusCrypto, please take no offence, but from what you wrote I&#39;d say you hardly wrote a working program in Go so I would advise the OP to actually do their own research."}, {"owner": {"reputation": 1762, "user_id": 5120331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTAB.png?s=128&g=1", "display_name": "Corvus Crypto", "link": "https://stackoverflow.com/users/5120331/corvus-crypto"}, "edited": false, "score": 2, "creation_date": 1457986482, "post_id": 35996436, "comment_id": 59646830, "body": "changed it to be more clear that we are talking &quot;safe&quot; memory sharing. and yeah think back, without further implementing your own safe memory pools for multiple goroutine access, you can get race conditions. Boost::Fiber already takes care of this. And of course I take no offense, this is the whole point of discussing stuff like this."}], "tags": [], "owner": {"reputation": 1762, "user_id": 5120331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTAB.png?s=128&g=1", "display_name": "Corvus Crypto", "link": "https://stackoverflow.com/users/5120331/corvus-crypto"}, "is_accepted": true, "score": 13, "last_activity_date": 1457986317, "last_edit_date": 1457986317, "creation_date": 1457983932, "answer_id": 35996436, "question_id": 35992854, "link": "https://stackoverflow.com/questions/35992854/difference-between-goroutines-and-boost-fiber/35996436#35996436", "title": "Difference between goroutines and boost.fiber", "body": "<p>So from what I could gather from the source code of the boost.fiber library, it seems that it is indeed MUCH more versatile and powerful than goroutines. The mantra of goroutines is to not share data between the coroutines, but rather pass data into them as necessary. This is apparently possible within fibers as well with channels (<code>boost::fibers::unbounded_channel&lt;T&gt;</code> and <code>boost::fibers::bounded_channel&lt;T&gt;</code>), although one thing I'd keep in mind is data is safely shared between all fibers in a single thread. This is managed (by the use of mutexes, I guess) to ensure only one fiber runs at a time, so you may not need channels for a particular use case.</p>\n\n<p>Fiber also seems to give you control over the synchronization of fibers within threads it seems. Apparently I/O that blocks will block an entire thread that the fiber running the operation is in, which makes sense. The cooler thing is that you could use Fiber to simulate blocking (e.g. for strict order of routine scheduling) if needed. There is a pretty good example of custom scheduling of fibers based on priority queuing here <a href=\"https://github.com/olk/boost-fiber/blob/master/examples/priority.cpp\" rel=\"noreferrer\">https://github.com/olk/boost-fiber/blob/master/examples/priority.cpp</a> as well. However, I'd be willing to bet that scheduling defaults to interleaving them</p>\n\n<p>So just to summarize, it seems the main points to take away are that yes, Fibers already has goroutine-like stuff already implemented. You have channels, you can multithread (and I'm sure this can be extended to multicore fun as well), and you can run async operations in the same thread (again, I'm assuming they default to interleaved scheduling in the same thread). Fibers seems to have much more, context-switching, fiber-safe shared memory, while go tends to keep things restricted to data passing using channels. </p>\n\n<p>Honestly you'd have to surf the codebase a bit like I did to see what else Fibers has, but yeah I'd say these are some main diffs.</p>\n"}], "owner": {"reputation": 3820, "user_id": 4735801, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/199d8cc1517265fe55f0ebeee0566d18?s=128&d=identicon&r=PG&f=1", "display_name": "Exagon", "link": "https://stackoverflow.com/users/4735801/exagon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3447, "favorite_count": 2, "accepted_answer_id": 35996436, "answer_count": 1, "score": 7, "last_activity_date": 1457986317, "creation_date": 1457972697, "last_edit_date": 1457980936, "question_id": 35992854, "link": "https://stackoverflow.com/questions/35992854/difference-between-goroutines-and-boost-fiber", "title": "Difference between goroutines and boost.fiber", "body": "<p>I just started having a look at go and how the concurency in go works.\nI just wondered if you could implement something equal in C++ and found boost.fiber.\nWhat's the difference between goroutines and boost fibers? \nCould you implement something goroutine like with those fibers in C++?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1457971287, "post_id": 35992322, "comment_id": 59637236, "body": "You don&#39;t need any dependencies to run a go program. Why not build the program on <code>Bob</code>, and deploy the binary to <code>Alice</code>?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1457971322, "post_id": 35992322, "comment_id": 59637260, "body": "@JimB One is under Windows, the other on Linux. Is it doable?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1457971620, "post_id": 35992322, "comment_id": 59637469, "body": "Since I use go v1.5+, I could cross-compile the program I guess."}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 1, "creation_date": 1457972466, "post_id": 35992322, "comment_id": 59638120, "body": "try gox for cross compilation: <a href=\"https://github.com/mitchellh/gox\" rel=\"nofollow noreferrer\">github.com/mitchellh/gox</a>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1458032293, "post_id": 35992322, "comment_id": 59664594, "body": "downvoters, please explain why and how to improve!"}], "answers": [{"tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 2, "last_activity_date": 1457972311, "last_edit_date": 1457972311, "creation_date": 1457971709, "answer_id": 35992498, "question_id": 35992322, "link": "https://stackoverflow.com/questions/35992322/download-and-prepare-go-packages-dependencies-to-be-used-on-another-isolated-m/35992498#35992498", "title": "Download and prepare go package&#39;s dependencies to be used on another, isolated machine", "body": "<p>All the source for compilation is in <code>$GOPATH</code>. Copying that to <code>Alice</code> will give you everything you need to rebuild the package. Since your source should be in <code>$GOPATH</code> as well, there shouldn't be anything else to copy.</p>\n\n<p>If you're using go1.6+, or go1.5 with <code>GO15VENDOREXPERIMENT=1</code>, you can put all the dependencies into a <code>vendor/</code> subdirectory of your project, to package them together.</p>\n\n<p>Cross-compilation is also very easy in go (unless you require cgo), by setting the <code>GOOS</code> and <code>GOARCH</code> environment variables.</p>\n\n<p>Go build reference: <a href=\"https://golang.org/pkg/go/build/\" rel=\"nofollow\">https://golang.org/pkg/go/build/</a></p>\n\n<p><a href=\"http://dave.cheney.net/2015/08/22/cross-compilation-with-go-1-5\" rel=\"nofollow\">http://dave.cheney.net/2015/08/22/cross-compilation-with-go-1-5</a></p>\n"}], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 35992498, "answer_count": 1, "score": 0, "last_activity_date": 1457972311, "creation_date": 1457971229, "question_id": 35992322, "link": "https://stackoverflow.com/questions/35992322/download-and-prepare-go-packages-dependencies-to-be-used-on-another-isolated-m", "title": "Download and prepare go package&#39;s dependencies to be used on another, isolated machine", "body": "<p>I've got two machines: <code>Alice</code> and <code>Bob</code>. <code>Alice</code> is not connected to the network, <code>Bob</code> is.</p>\n\n<p>I'd like to build and run a go program on <code>Alice</code>, but it requires multiple dependencies. Is there a convenient way to prepare all those dependencies from <code>Bob</code> so I just have to copy one directory from <code>Bob</code> to <code>Alice</code> and run <code>go build</code> (on <code>Alice</code>)?</p>\n"}, {"tags": ["heroku", "go"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1457973396, "post_id": 35992153, "comment_id": 59638793, "body": "Is your vendored version of <code>gopkg.in&#47;mgo.v2</code> updated?"}], "answers": [{"comments": [{"owner": {"reputation": 768, "user_id": 1729714, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bdcf1b39549b3c53821583503eb39f3b?s=128&d=identicon&r=PG", "display_name": "nkobber", "link": "https://stackoverflow.com/users/1729714/nkobber"}, "edited": false, "score": 0, "creation_date": 1461347304, "post_id": 36021928, "comment_id": 61174599, "body": "The problem is that heroku automatically runs  <code>godep save .&#47;...</code>"}], "tags": [], "owner": {"reputation": 21, "user_id": 773505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27972acc262c950df7e463f12bfaf72e?s=128&d=identicon&r=PG", "display_name": "Besser", "link": "https://stackoverflow.com/users/773505/besser"}, "is_accepted": false, "score": 1, "last_activity_date": 1458090331, "last_edit_date": 1458090331, "creation_date": 1458075329, "answer_id": 36021928, "question_id": 35992153, "link": "https://stackoverflow.com/questions/35992153/error-on-mgo-dependency-when-deploying-go-app-to-heroku/36021928#36021928", "title": "Error on mgo dependency when deploying go app to Heroku", "body": "<p>Do you use <code>godep save ./...</code> in your project?</p>\n\n<p>If yes, delete the <code>Godep</code> and <code>vendor</code> directories and try to use <code>godep save</code>, without <code>./...</code>.</p>\n\n<p>I do this and work for me.</p>\n"}, {"tags": [], "owner": {"reputation": 7284, "user_id": 4374109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sHeIb.png?s=128&g=1", "display_name": "Uvelichitel", "link": "https://stackoverflow.com/users/4374109/uvelichitel"}, "is_accepted": false, "score": 0, "last_activity_date": 1461199034, "creation_date": 1461199034, "answer_id": 36757620, "question_id": 35992153, "link": "https://stackoverflow.com/questions/35992153/error-on-mgo-dependency-when-deploying-go-app-to-heroku/36757620#36757620", "title": "Error on mgo dependency when deploying go app to Heroku", "body": "<p>Error tells sasl/sasl.h missing but not sasl.go. sasl.h header file is part of libsasl2-dev package which not installed on heroku and I don't know simple way to install it. To my mind you can try to find sasl headers on your local machine(most likely /usr/include/sasl)and copy to vendor/include/sasl in your local go app source. Then make them visible for CGO using heroku config vars doing</p>\n\n<pre><code>heroku config:set CGO_CFLAGS= -I/app/code/vendor/include/sasl\n</code></pre>\n\n<p>in heroku console, and than git push.\nAlso you can look for libsasl2-dev buildpack for heroku and try to use two buildpacks for your app with something like</p>\n\n<pre><code>heroku buildpacks:add heroku/some_libsasl2-dev\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 785, "user_id": 529311, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e6e70b698ae596aecdc1a448bffa3068?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/529311/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1475169546, "creation_date": 1475169546, "answer_id": 39776389, "question_id": 35992153, "link": "https://stackoverflow.com/questions/35992153/error-on-mgo-dependency-when-deploying-go-app-to-heroku/39776389#39776389", "title": "Error on mgo dependency when deploying go app to Heroku", "body": "<p>I finally found a solution (from <a href=\"https://github.com/go-mgo/mgo/issues/220#issuecomment-212658192\" rel=\"nofollow\">https://github.com/go-mgo/mgo/issues/220#issuecomment-212658192</a>):</p>\n\n<ul>\n<li>run <code>godep save ./...</code> (to create the vendor directory with all the dependencies)</li>\n<li>then re-run <code>godep save</code> without ./... (this will remove unused files)</li>\n</ul>\n"}], "owner": {"reputation": 113, "user_id": 5328625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-Nv-FjMGUHOo/AAAAAAAAAAI/AAAAAAAABOA/jnN35J3sihA/photo.jpg?sz=128", "display_name": "Guilherme Souza", "link": "https://stackoverflow.com/users/5328625/guilherme-souza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 1, "answer_count": 3, "score": 10, "last_activity_date": 1475169546, "creation_date": 1457970732, "question_id": 35992153, "link": "https://stackoverflow.com/questions/35992153/error-on-mgo-dependency-when-deploying-go-app-to-heroku", "title": "Error on mgo dependency when deploying go app to Heroku", "body": "<p>I'm trying to deploy a Go App to Heroku, I'm using godeps for dependency management as their docs suggested.\nBut when I <code>git push heroku master</code> I get the following error telling that the file sasl.go doesn't exists.</p>\n\n<pre><code>remote: # github.com/grsouza/feeng-api/vendor/gopkg.in/mgo.v2/internal/sasl\nremote: vendor/gopkg.in/mgo.v2/internal/sasl/sasl.go:15:24: fatal error: sasl/sasl.h: No such file or directory\nremote:  // #include &lt;sasl/sasl.h&gt;\nremote:                         ^\nremote: compilation terminated.\nremote: github.com/grsouza/feeng-api/vendor/github.com/onsi/gomega\nremote: \nremote:  !     Push rejected, failed to compile Go app\nremote: \nremote: Verifying deploy....\nremote: \nremote: !   Push rejected to limitless-ridge-36512.\nremote: \nTo https://git.heroku.com/limitless-ridge-36512.git\n ! [remote rejected] master -&gt; master (pre-receive hook declined)\nerror: failed to push some refs to 'https://git.heroku.com/limitless-ridge-36512.git'\n</code></pre>\n\n<p>Can anyone help me with this issue?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["rest", "testing", "go", "go-gin"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1457969003, "post_id": 35988767, "comment_id": 59635452, "body": "<code>router.GET(&quot;&#47;cars&#47;1&quot;, handler)</code> should be <code>router.GET(&quot;&#47;cars&#47;:type&quot;, handler)</code> in your test."}], "answers": [{"tags": [], "owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "is_accepted": true, "score": 8, "last_activity_date": 1457971134, "last_edit_date": 1457971134, "creation_date": 1457970697, "answer_id": 35992137, "question_id": 35988767, "link": "https://stackoverflow.com/questions/35988767/golang-testing-gin-based-rest-api-not-getting-params-while-using-net-http-httpte/35992137#35992137", "title": "Golang testing gin based REST API not getting params while using net/http/httptest", "body": "<p><code>router.GET(\"/cars/1\", handler)</code> should be <code>router.GET(\"/cars/:type\", handler)</code> in your test. </p>\n\n<p>Note that a better (more testable; less duplication of routes) would be to create a <code>SetupRouter() *gin.Engine</code> function that returns all of your routes. e.g.</p>\n\n<pre><code>// package main\n\n// server.go\n// This is where you create a gin.Default() and add routes to it\nfunc SetupRouter() *gin.Engine {\n    router := gin.Default()\n    router.GET(\"/cars/:type\", carsByType)\n\n    return router\n}\n\nfunc main() {\n    router := SetupRouter() \n    router.Run()\n}\n\n// router_test.go\ntestRouter := SetupRouter()\n\nreq, err := http.NewRequest(\"GET\", \"/cars/1\", nil)\nif err != nil {\n    fmt.Println(err)\n}\n\nresp := httptest.NewRecorder()\ntestRouter.ServeHTTP(resp, req)\nassert.Equal(t, resp.Code, 200)\n</code></pre>\n"}], "owner": {"reputation": 365, "user_id": 4576805, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/whUhl.jpg?s=128&g=1", "display_name": "Alex Benz", "link": "https://stackoverflow.com/users/4576805/alex-benz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3564, "favorite_count": 0, "accepted_answer_id": 35992137, "answer_count": 1, "score": 7, "last_activity_date": 1457971134, "creation_date": 1457961734, "last_edit_date": 1457963198, "question_id": 35988767, "link": "https://stackoverflow.com/questions/35988767/golang-testing-gin-based-rest-api-not-getting-params-while-using-net-http-httpte", "title": "Golang testing gin based REST API not getting params while using net/http/httptest", "body": "<p>I am developing a REST API based on Gin golang, the endpoint look something like below:</p>\n\n<pre><code>func carsByType(c *gin.Context) {\n    fmt.Println(\"Go Request in Handler...\")\n    carType := c.Params.ByName(\"type\")\n    fmt.Println(carType)\n    if carType != \"\" {\n\n    }\n    c.JSON(http.StatusBadRequest, gin.H{\"result\": \"Bad request\"})\n    return\n}\n\nfunc main() {\n    router := gin.Default()\n    router.GET(\"/cars/:type\", carsByType)\n    router.Run(\":80\")\n}\n</code></pre>\n\n<p>When I am making request to the endpoint via browser and cURL its just working fine, getting the carType value but when I am running the tests its returning bad request and getting carType is \"\".</p>\n\n<p>For testing the endpoint my test code looks like this:</p>\n\n<pre><code>func TestGetcarsByType(t *testing.T) {\n    gin.SetMode(gin.TestMode)\n    handler := carsByType\n    router := gin.Default()\n    router.GET(\"/cars/1\", handler)\n\n    req, err := http.NewRequest(\"GET\", \"/cars/1\", nil)\n    if err != nil {\n        fmt.Println(err)\n    }\n    resp := httptest.NewRecorder()\n    router.ServeHTTP(resp, req)\n    assert.Equal(t, resp.Code, 200)\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["go", "bit-manipulation"], "comments": [{"owner": {"reputation": 24772, "user_id": 770830, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a3943e02574f64dabaa71603264c9c28?s=128&d=identicon&r=PG", "display_name": "bereal", "link": "https://stackoverflow.com/users/770830/bereal"}, "edited": false, "score": 1, "creation_date": 1457959312, "post_id": 35987779, "comment_id": 59628065, "body": "<a href=\"https://golang.org/ref/spec#Arithmetic_operators\" rel=\"nofollow noreferrer\">Bitwise OR</a>."}], "answers": [{"tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": false, "score": 4, "last_activity_date": 1457959265, "creation_date": 1457959265, "answer_id": 35987825, "question_id": 35987779, "link": "https://stackoverflow.com/questions/35987779/pipe-character-in-golang/35987825#35987825", "title": "Pipe character in Golang", "body": "<blockquote>\n  <p><a href=\"https://golang.org/ref/spec\" rel=\"nofollow\">The Go Programming Language Specification</a></p>\n  \n  <p><a href=\"https://golang.org/ref/spec#Arithmetic_operators\" rel=\"nofollow\">Arithmetic operators</a></p>\n\n<pre><code>|    bitwise OR             integers\n</code></pre>\n</blockquote>\n\n<p>The Go programming language is defined in <a href=\"https://golang.org/ref/spec\" rel=\"nofollow\">The Go Programming Language Specification</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 6950, "user_id": 5371821, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/gHZQr.jpg?s=128&g=1", "display_name": "starkshang", "link": "https://stackoverflow.com/users/5371821/starkshang"}, "reply_to_user": {"reputation": 24772, "user_id": 770830, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a3943e02574f64dabaa71603264c9c28?s=128&d=identicon&r=PG", "display_name": "bereal", "link": "https://stackoverflow.com/users/770830/bereal"}, "edited": false, "score": 0, "creation_date": 1457960000, "post_id": 35987921, "comment_id": 59628536, "body": "@bereal,yes,I&#39;m sorry for my slip of the pen."}], "tags": [], "owner": {"reputation": 6950, "user_id": 5371821, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/gHZQr.jpg?s=128&g=1", "display_name": "starkshang", "link": "https://stackoverflow.com/users/5371821/starkshang"}, "is_accepted": false, "score": 1, "last_activity_date": 1457959858, "last_edit_date": 1457959858, "creation_date": 1457959512, "answer_id": 35987921, "question_id": 35987779, "link": "https://stackoverflow.com/questions/35987779/pipe-character-in-golang/35987921#35987921", "title": "Pipe character in Golang", "body": "<p>The <code>|</code> is not pipe character here,but <strong>or</strong> character,one of bit manipuations.</p>\n\n<p>For example,<code>1 | 1 = 1</code>,<code>1 | 2 = 3</code>,<code>0 | 0 = 0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1094, "user_id": 3813210, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/be8dba99b54c433c5b8cf8f628817609?s=128&d=identicon&r=PG&f=1", "display_name": "user162097", "link": "https://stackoverflow.com/users/3813210/user162097"}, "is_accepted": true, "score": 31, "last_activity_date": 1457962631, "last_edit_date": 1457962631, "creation_date": 1457961099, "answer_id": 35988536, "question_id": 35987779, "link": "https://stackoverflow.com/questions/35987779/pipe-character-in-golang/35988536#35988536", "title": "Pipe character in Golang", "body": "<p>As others have said, it's the bitwise [inclusive] OR operator. More specifically, the operators are being used to create bit mask flags, which is a way of combining option constants based on bitwise arithmetic. For example, if you have option constants that are powers of two, like so:</p>\n\n<pre><code>const (\n    red = 1 &lt;&lt; iota    // 1 (binary: 001) (2 to the power of 0)\n    green              // 2 (binary: 010) (2 to the power of 1)\n    blue               // 4 (binary: 100) (2 to the power of 2)\n)\n</code></pre>\n\n<p>Then you can combine them with the bitwise OR operator like so:</p>\n\n<pre><code>const (\n    yellow = red | green          // 3 (binary: 011) (1 + 2)\n    purple = red | blue           // 5 (binary: 101) (1 + 4)\n    white = red | green | blue    // 7 (binary: 111) (1 + 2 + 4)\n)\n</code></pre>\n\n<p>So it simply provides a way for you to combine option constants based on bitwise arithmetic, relying on the way that powers of two are represented in the binary number system; notice how the binary bits are combined when using the OR operator. (For more information, see <a href=\"http://www.dylanleigh.net/notes/c-cpp-tricks.html#Using_&quot;Bitflags&quot;\">this example</a> in the C programming language.) So by combining the options in your example, you are simply allowing the service to accept stop, shutdown <em>and</em> pause and continue commands.</p>\n"}], "owner": {"reputation": 6756, "user_id": 1606248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0lXId.jpg?s=128&g=1", "display_name": "Pierre Prinetti", "link": "https://stackoverflow.com/users/1606248/pierre-prinetti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3514, "favorite_count": 5, "accepted_answer_id": 35988536, "answer_count": 3, "score": 12, "last_activity_date": 1457970300, "creation_date": 1457959150, "last_edit_date": 1457970300, "question_id": 35987779, "link": "https://stackoverflow.com/questions/35987779/pipe-character-in-golang", "title": "Pipe character in Golang", "body": "<p>In the package <code>golang.org/x/sys/windows/svc</code> there is an example that contains this code:</p>\n\n<pre><code>const cmdsAccepted = svc.AcceptStop | svc.AcceptShutdown | svc.AcceptPauseAndContinue\n</code></pre>\n\n<p>What does the pipe <code>|</code> character mean?</p>\n"}, {"tags": ["go", "webserver", "cloud9-ide"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6060672"}, "edited": false, "score": 0, "creation_date": 1457969130, "post_id": 35989660, "comment_id": 59635544, "body": "When i go to : <a href=\"https://golangpractice-amanuel2.c9users.io/item/name\" rel=\"nofollow noreferrer\">golangpractice-amanuel2.c9users.io/item/name</a>  , i actually get something.. That is the keys: {&quot;name&quot;:&quot;name&quot;,&quot;what&quot;:&quot;item&quot;}  . Now in the html as you can see in the cloud9 says otherwise... Im confused now.."}, {"owner": {"reputation": 3760, "user_id": 722657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2034643609a3d51207127b00dfacce5f?s=128&d=identicon&r=PG", "display_name": "Mutahhir", "link": "https://stackoverflow.com/users/722657/mutahhir"}, "edited": false, "score": 0, "creation_date": 1458022959, "post_id": 35989660, "comment_id": 59659952, "body": "Can you post what Cloud9 is saying? If you&#39;re able to get a response from your server, that means your server is up and running without any problems."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6060672"}, "reply_to_user": {"reputation": 3760, "user_id": 722657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2034643609a3d51207127b00dfacce5f?s=128&d=identicon&r=PG", "display_name": "Mutahhir", "link": "https://stackoverflow.com/users/722657/mutahhir"}, "edited": false, "score": 0, "creation_date": 1458040980, "post_id": 35989660, "comment_id": 59671160, "body": "Thats exactly what it is saying: {&quot;name&quot;:&quot;name&quot;,&quot;what&quot;:&quot;item&quot;}  @Mutahhir"}, {"owner": {"reputation": 3760, "user_id": 722657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2034643609a3d51207127b00dfacce5f?s=128&d=identicon&r=PG", "display_name": "Mutahhir", "link": "https://stackoverflow.com/users/722657/mutahhir"}, "edited": false, "score": 0, "creation_date": 1458116479, "post_id": 35989660, "comment_id": 59710059, "body": "Right, so doesn&#39;t that show that your webserver&#39;s working? @JohnnyDoe"}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "edited": false, "score": 0, "creation_date": 1458181956, "post_id": 35989660, "comment_id": 59749560, "body": "@Johnny Doe if you want to html to show up just do /home at the end! Like so: <a href=\"https://golangpractice-amanuel2.c9users.io:8080/home\" rel=\"nofollow noreferrer\">golangpractice-amanuel2.c9users.io:8080/home</a>"}], "tags": [], "owner": {"reputation": 3226, "user_id": 4449035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-cDrTIBwolm0/AAAAAAAAAAI/AAAAAAAANmE/OK9Bjdfpl7g/photo.jpg?sz=128", "display_name": "Brady Dowling", "link": "https://stackoverflow.com/users/4449035/brady-dowling"}, "is_accepted": false, "score": 3, "last_activity_date": 1457964220, "creation_date": 1457964220, "answer_id": 35989660, "question_id": 35986940, "link": "https://stackoverflow.com/questions/35986940/running-go-webserver-on-cloud9-ide/35989660#35989660", "title": "Running go webserver on Cloud9 IDE", "body": "<p>The 404 you're seeing is from line 142 of <code>webserver.go</code> so your app actually is running properly. From your code, it looks like you have a route for <code>/item/name</code> so try going to <code>https://golangpractice-amanuel2.c9users.io/item/name</code> and you'll get something there.</p>\n\n<p>All other routes are giving 404's because of line 142.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6060672"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1457964220, "creation_date": 1457956706, "question_id": 35986940, "link": "https://stackoverflow.com/questions/35986940/running-go-webserver-on-cloud9-ide", "title": "Running go webserver on Cloud9 IDE", "body": "<p>im kinda confused on how to run a go lang webserver on Cloud9IDE.. This is my simple go server i am attempting to run:\n<br>\n<a href=\"https://ide.c9.io/amanuel2/golangpractice\" rel=\"nofollow\">https://ide.c9.io/amanuel2/golangpractice</a></p>\n\n<p>I tried to click run then went to the url it wants me to go but it told me 404 not found... And i also saw this is the output in the command line when i click run on cloud9:</p>\n\n<pre><code>Your code is running at https://golangpractice-amanuel2.c9users.io.\nImportant: use os.Getenv(PORT) as the port and os.Getenv(IP) as the host in your scripts!\n\n2016/03/14 11:45:51 Listening on port 8080 ... \n</code></pre>\n\n<p>Please help!</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 10358, "user_id": 1211175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/il5eC.jpg?s=128&g=1", "display_name": "Endre Simo", "link": "https://stackoverflow.com/users/1211175/endre-simo"}, "is_accepted": true, "score": 3, "last_activity_date": 1457957292, "last_edit_date": 1457957292, "creation_date": 1457956850, "answer_id": 35986993, "question_id": 35986604, "link": "https://stackoverflow.com/questions/35986604/go-runtime-error-assignment-to-entry-in-nil-map/35986993#35986993", "title": "Go Runtime error: \u201cassignment to entry in nil map\u201d", "body": "<p>I don't know what you are trying to obtain, but the error tells, that <code>columns</code> map does not have a <code>column</code> index on the moment of assignment and for this reason is throwing a panic.</p>\n\n<pre><code>panic: assignment to entry in nil map\n</code></pre>\n\n<p>To make it work you have to initialize the map itself before to start to populate with indexes.</p>\n\n<pre><code>state := &amp;stateInformation{\n    columns: make(map[string]int),\n}\n</code></pre>\n\n<p>Or another way to initialize:</p>\n\n<pre><code>func (info *stateInformation) setColumns(record []string) {\n    info.columns = make(map[string]int)\n\n    for idx, column := range record {\n        info.columns[column] = idx\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5726, "user_id": 2976830, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/OT27A.jpg?s=128&g=1", "display_name": "Yeahia2508", "link": "https://stackoverflow.com/users/2976830/yeahia2508"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3089, "favorite_count": 0, "accepted_answer_id": 35986993, "answer_count": 1, "score": -1, "last_activity_date": 1457957292, "creation_date": 1457955756, "question_id": 35986604, "link": "https://stackoverflow.com/questions/35986604/go-runtime-error-assignment-to-entry-in-nil-map", "title": "Go Runtime error: \u201cassignment to entry in nil map\u201d", "body": "<p>I'm new in go lang. I'm trying to read csv file and collecting data. </p>\n\n<p><strong>But after run it I got this error :</strong></p>\n\n<pre><code>panic: assignment to entry in nil map\n\ngoroutine 1 [running]:\npanic(0x4dedc0, 0xc082002440)\n        C:/Go/src/runtime/panic.go:464 +0x3f4\nmain.(*stateInformation).setColumns(0xc08202bd40, 0xc082060000, 0x11, 0x20)\n        F:/Works/Go/src/examples/state-info/main.go:25 +0xda\nmain.main()\n        F:/Works/Go/src/examples/state-info/main.go:69 +0xaea\n</code></pre>\n\n<p><strong>My code</strong> : </p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/csv\"\n    \"fmt\"\n    \"io\"\n    \"log\"\n    \"os\"\n    \"strconv\"\n)\n\ntype stateInformation struct {\n    columns map[string]int\n}\n\ntype state struct {\n    id               int\n    name             string\n    abbreviation     string\n    censusRegionName string\n}\n\nfunc (info *stateInformation) setColumns(record []string) {\n    for idx, column := range record {\n        info.columns[column] = idx\n    }\n}\n\nfunc (info *stateInformation) parseState(record []string) (*state, error) {\n    column := info.columns[\"id\"]\n    id, err := strconv.Atoi(record[column])\n    if err != nil {\n        return nil, err\n    }\n    name := record[info.columns[\"name\"]]\n    abbreviation := record[info.columns[\"abbreviation\"]]\n    censusRegionName := record[info.columns[\"census_region_name\"]]\n    return &amp;state{\n        id:               id,\n        name:             name,\n        abbreviation:     abbreviation,\n        censusRegionName: censusRegionName,\n    }, nil\n}\n\nfunc main() {\n    // #1 open a file\n    f, err := os.Open(\"state_table.csv\")\n    if err != nil {\n        log.Fatalln(err)\n    }\n    defer f.Close()\n\n    stateLookup := map[string]*state{}\n\n    info := &amp;stateInformation{}\n\n    // #2 parse a csv file\n    csvReader := csv.NewReader(f)\n    for rowCount := 0; ; rowCount++ {\n        record, err := csvReader.Read()\n        if err == io.EOF {\n            break\n        } else if err != nil {\n            log.Fatalln(err)\n        }\n\n        if rowCount == 0 {\n            info.setColumns(record)\n        } else {\n            state, err := info.parseState(record)\n            if err != nil {\n                log.Fatalln(err)\n            }\n            stateLookup[state.abbreviation] = state\n        }\n    }\n\n    // state-information AL\n    if len(os.Args) &lt; 2 {\n        log.Fatalln(\"expected state abbreviation\")\n    }\n    abbreviation := os.Args[1]\n    state, ok := stateLookup[abbreviation]\n    if !ok {\n        log.Fatalln(\"invalid state abbreviation\")\n    }\n\n    fmt.Println(`\n&lt;html&gt;\n    &lt;head&gt;&lt;/head&gt;\n    &lt;body&gt;\n      &lt;table&gt;\n        &lt;tr&gt;\n          &lt;th&gt;Abbreviation&lt;/th&gt;\n          &lt;th&gt;Name&lt;/th&gt;\n        &lt;/tr&gt;`)\n\n    fmt.Println(`\n        &lt;tr&gt;\n          &lt;td&gt;` + state.abbreviation + `&lt;/td&gt;\n          &lt;td&gt;` + state.name + `&lt;/td&gt;\n        &lt;/tr&gt;\n    `)\n\n    fmt.Println(`\n      &lt;/table&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n    `)\n}\n</code></pre>\n\n<p><strong>What's wrong in my code?</strong></p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 4, "creation_date": 1457947341, "post_id": 35983118, "comment_id": 59620206, "body": "You&#39;ll have to understand Go types and the different values an object of each type may have. All details about which things are nil, assignable to nil, comparable to nil and so an are explained in <a href=\"https://golang.org/ref/spec\" rel=\"nofollow noreferrer\">golang.org/ref/spec</a> which is short enough to read in one go and clear enough to understand it."}, {"owner": {"reputation": 842, "user_id": 1198986, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6af477723fb832487f84973e990d2466?s=128&d=identicon&r=PG", "display_name": "libertylocked", "link": "https://stackoverflow.com/users/1198986/libertylocked"}, "edited": false, "score": 0, "creation_date": 1457975481, "post_id": 35983118, "comment_id": 59640125, "body": "Empty string in Go is &quot;&quot;. To test if a string has value, simply do <code>str == &quot;&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 16259, "user_id": 115363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/49cf5d5ff161eed26b99e75694299fe1?s=128&d=identicon&r=PG", "display_name": "inanc", "link": "https://stackoverflow.com/users/115363/inanc"}, "edited": false, "score": 1, "creation_date": 1519842473, "post_id": 35983281, "comment_id": 85077365, "body": "Wrong: <code>nil</code> has no type. It isn&#39;t typed. You can&#39;t do: <code>var n = nil</code> not because nil has a type, it&#39;s because, the compiler can&#39;t derive what will be the type of <code>n</code>, it can&#39;t defer the type, because, <code>nil</code> has no type."}, {"owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "reply_to_user": {"reputation": 16259, "user_id": 115363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/49cf5d5ff161eed26b99e75694299fe1?s=128&d=identicon&r=PG", "display_name": "inanc", "link": "https://stackoverflow.com/users/115363/inanc"}, "edited": false, "score": 0, "creation_date": 1520521636, "post_id": 35983281, "comment_id": 85357777, "body": "Thanks for pointing out the typo, so long after the answer. An edit would have been more <i>a propos</i>. But thanks nonetheless."}, {"owner": {"reputation": 16259, "user_id": 115363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/49cf5d5ff161eed26b99e75694299fe1?s=128&d=identicon&r=PG", "display_name": "inanc", "link": "https://stackoverflow.com/users/115363/inanc"}, "edited": false, "score": 0, "creation_date": 1520590230, "post_id": 35983281, "comment_id": 85387554, "body": "Right, no problem."}, {"owner": {"reputation": 2009, "user_id": 518469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25f5f2f0ff49caee819e3e1805cb436?s=128&d=identicon&r=PG&f=1", "display_name": "yname", "link": "https://stackoverflow.com/users/518469/yname"}, "edited": false, "score": 0, "creation_date": 1523321035, "post_id": 35983281, "comment_id": 86502075, "body": "Additional example: <code>func getStuff() string { return nil }</code> won&#39;t compile with message <code>cannot use nil as type string in return argument</code>. In java <code>public String getStuff() { return null; }</code> works perfectly fine. Not sure what you meant by &quot;string is a value&quot; - string is a slice of bytes."}, {"owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "edited": false, "score": 0, "creation_date": 1524814153, "post_id": 35983281, "comment_id": 87131248, "body": "A <code>string</code> is a value by opposition to a pointer (or an <code>error</code> which is an interface, essentially a pointer). Maybe the term <i>concrete type</i> would be more precise, but I don&#39;t think it would be more understandable for a beginner."}], "tags": [], "owner": {"reputation": 7802, "user_id": 3472656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sg0vU.jpg?s=128&g=1", "display_name": "Elwinar", "link": "https://stackoverflow.com/users/3472656/elwinar"}, "is_accepted": false, "score": 7, "last_activity_date": 1520521648, "last_edit_date": 1520521648, "creation_date": 1457946296, "answer_id": 35983281, "question_id": 35983118, "link": "https://stackoverflow.com/questions/35983118/what-does-nil-mean-in-golang/35983281#35983281", "title": "What does nil mean in golang?", "body": "<p><code>nil</code> in Go is simply the <code>NULL</code> pointer value of other languages.</p>\n\n<p>You can effectively use it in place of any pointer or interface (interfaces are somewhat pointers).</p>\n\n<p>You can use it as an error, because the <a href=\"https://golang.org/pkg/builtin/#error\" rel=\"noreferrer\">error type is an interface</a>.</p>\n\n<p>You can't use it as a string because in Go, a string is a value.</p>\n\n<p><code>nil</code> is untyped in Go, meaning you can't do that:</p>\n\n<pre><code>var n = nil\n</code></pre>\n\n<p>Because here you lack a type for <code>n</code>. However, you can do</p>\n\n<pre><code>var n *Foo = nil\n</code></pre>\n\n<p>Note that <code>nil</code> being the zero value of pointers and interfaces, uninitialized pointers and interfaces will be <code>nil</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "is_accepted": true, "score": 116, "last_activity_date": 1457947317, "creation_date": 1457947317, "answer_id": 35983594, "question_id": 35983118, "link": "https://stackoverflow.com/questions/35983118/what-does-nil-mean-in-golang/35983594#35983594", "title": "What does nil mean in golang?", "body": "<p>In Go, <code>nil</code> is the <strong>zero value for pointers, interfaces, maps, slices, channels and function types</strong>, representing an <em>uninitialized</em> value.</p>\n\n<p><code>nil</code> doesn't mean some \"undefined\" state, it's a proper value in itself. An object in Go is <code>nil</code> simply if and only if it's value is <code>nil</code>, which it can only be if it's of one of the aforementioned types.</p>\n\n<p>An <code>error</code> is an interface, so <code>nil</code> is a valid value for one, unlike for a <code>string</code>. For obvious reasons a <code>nil</code> error represents <em>no error</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 1746, "user_id": 5785743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a09b5b4639c7459d79f565db0d63da?s=128&d=identicon&r=PG&f=1", "display_name": "pr-pal", "link": "https://stackoverflow.com/users/5785743/pr-pal"}, "is_accepted": false, "score": 1, "last_activity_date": 1560525092, "creation_date": 1560525092, "answer_id": 56600952, "question_id": 35983118, "link": "https://stackoverflow.com/questions/35983118/what-does-nil-mean-in-golang/56600952#56600952", "title": "What does nil mean in golang?", "body": "<ul>\n<li>For the data types like slice and pointers which \"refer\" to other types, \"nil\" indicates that the variable does not refer to an instance (equivalent of null pointer in other languages)</li>\n<li>It is thee zero value of the variables of type functions, maps, interfaces, channels and structures</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 11953867, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NSAPI2duzI8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlCNBltR0P--mhJUuN9jUpkafTXQ/photo.jpg?sz=128", "display_name": "Isaac Kiptanui", "link": "https://stackoverflow.com/users/11953867/isaac-kiptanui"}, "is_accepted": false, "score": 1, "last_activity_date": 1572454135, "creation_date": 1572454135, "answer_id": 58630199, "question_id": 35983118, "link": "https://stackoverflow.com/questions/35983118/what-does-nil-mean-in-golang/58630199#58630199", "title": "What does nil mean in golang?", "body": "<p><em>nil</em> in Go means a zero value for <strong>pointers</strong>, <strong>interfaces, maps, slices, and channels</strong>.\nIt means the value is uninitialized</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 11917716, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l0YldTstRrI/AAAAAAAAAAI/AAAAAAAAACM/ybjxmsDOZrc/photo.jpg?sz=128", "display_name": "cakazies", "link": "https://stackoverflow.com/users/11917716/cakazies"}, "is_accepted": false, "score": 2, "last_activity_date": 1575707935, "creation_date": 1575707935, "answer_id": 59224342, "question_id": 35983118, "link": "https://stackoverflow.com/questions/35983118/what-does-nil-mean-in-golang/59224342#59224342", "title": "What does nil mean in golang?", "body": "<p>In Golang, datatype can use nil is pointers, interfaces, maps, slices, channels, function types and errors</p>\n\n<p>in <strong>String</strong> value is \"\"</p>\n\n<p>in <strong>INT</strong> value is <strong>ZERO</strong></p>\n"}, {"comments": [{"owner": {"reputation": 476, "user_id": 12817546, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7Y79xcMm5cw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePp9zs2ylgFHtZKiaQLj2QI9Xc7w/photo.jpg?sz=128", "display_name": "Tom L", "link": "https://stackoverflow.com/users/12817546/tom-l"}, "edited": false, "score": 1, "creation_date": 1599962957, "post_id": 62711220, "comment_id": 112937213, "body": "Typo in your code? See <a href=\"https://play.golang.org/p/G3a2aqgjcnj\" rel=\"nofollow noreferrer\">play.golang.org/p/G3a2aqgjcnj</a>."}], "tags": [], "owner": {"reputation": 66, "user_id": 7769816, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Xczg8XeF1SU/AAAAAAAAAAI/AAAAAAAAACw/OeQOM1ddxF0/photo.jpg?sz=128", "display_name": "Alok Tripathi", "link": "https://stackoverflow.com/users/7769816/alok-tripathi"}, "is_accepted": false, "score": 2, "last_activity_date": 1602729749, "last_edit_date": 1602729749, "creation_date": 1593763993, "answer_id": 62711220, "question_id": 35983118, "link": "https://stackoverflow.com/questions/35983118/what-does-nil-mean-in-golang/62711220#62711220", "title": "What does nil mean in golang?", "body": "<p><code>nil</code> is a predeclared identifier in Go that represents <strong>zero values</strong> for <strong>pointers, interfaces, channels, maps, slices and function types.</strong>\n<code>nil</code> being the zero value of pointers and interfaces, uninitialized pointers and interfaces will be nil.</p>\n<p>In Go, string can\u2019t be <code>nil</code>. A string doesn\u2019t qualify to be assigned <code>nil</code>.</p>\n<pre><code>a := nil   // It will throw an error 'use of untyped nil'\n\nvar a *int = nil  //It will work\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 240, "user_id": 8557136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b9ae2974fba531b03c779064c095c17?s=128&d=identicon&r=PG&f=1", "display_name": "ajaykumar mp", "link": "https://stackoverflow.com/users/8557136/ajaykumar-mp"}, "is_accepted": false, "score": 1, "last_activity_date": 1605171906, "creation_date": 1605171906, "answer_id": 64800832, "question_id": 35983118, "link": "https://stackoverflow.com/questions/35983118/what-does-nil-mean-in-golang/64800832#64800832", "title": "What does nil mean in golang?", "body": "<p><em><strong>nil</strong></em> is also a value but only difference is- it is empty.</p>\n<p>In Javascript for the un-initialized variable will be <em><strong>undefined</strong></em>. In the same way Golang has <em><strong>nil</strong></em> as default value for all the un-initalized data types.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 15196449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a16cbe2490c90a0ae5f8cc6f92ef6b3?s=128&d=identicon&r=PG&f=1", "display_name": "Gourav Jondhale", "link": "https://stackoverflow.com/users/15196449/gourav-jondhale"}, "is_accepted": false, "score": 1, "last_activity_date": 1614941360, "creation_date": 1614941360, "answer_id": 66491163, "question_id": 35983118, "link": "https://stackoverflow.com/questions/35983118/what-does-nil-mean-in-golang/66491163#66491163", "title": "What does nil mean in golang?", "body": "<p>In Go <code>nil</code> is predeclared identifier that represents nothing for pointers, interfaces, channels, maps, slices and function types. Uninitialized pointers and interfaces will be <code>nil</code>. A string doesn\u2019t qualify to be either of the above-mentioned types and hence can\u2019t be assigned <code>nil</code>.\nIf you declare a variable by shorthand decleration like this: <code>variable:=nil</code> this will give compile time error because compiler has no idea which type it has to assign to <code>variable</code> .</p>\n<p>In Go map, slice and function doesn't support comparison but can be compared with <code>nil</code>.\nIf any two map, slice or function are assigned to <code>nil</code> and compared with each other then it will raise runtime error.\nBut if we assign <code>nil</code> to any two pointer variables and compare them with each other then no error will occur.</p>\n<pre><code>package main\n\nimport (\n&quot;fmt&quot;\n)\n\n func main() {\n    var i *int =nil\n    var j *int =nil\n    if i==j {\n      fmt.Println(&quot;equal&quot;)\n    } else {\n      fmt.Println(&quot;no&quot;)\n    }\n}\n</code></pre>\n<p>This code works fine and prints output as <code>equal</code>.</p>\n"}], "owner": {"reputation": 6950, "user_id": 5371821, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/gHZQr.jpg?s=128&g=1", "display_name": "starkshang", "link": "https://stackoverflow.com/users/5371821/starkshang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47514, "favorite_count": 15, "accepted_answer_id": 35983594, "answer_count": 8, "score": 59, "last_activity_date": 1614941360, "creation_date": 1457945769, "last_edit_date": 1522397901, "question_id": 35983118, "link": "https://stackoverflow.com/questions/35983118/what-does-nil-mean-in-golang", "title": "What does nil mean in golang?", "body": "<p>There are many cases using <strong>nil</strong> in golang. For example:</p>\n\n<pre><code>func (u *URL) Parse(ref string) (*URL, error) {\n    refurl, err := Parse(ref)\n    if err != nil {\n        return nil, err\n    }\n    return u.ResolveReference(refurl), nil\n}\n</code></pre>\n\n<p>but we can't use it like this:</p>\n\n<pre><code>var str string //or var str int\nstr = nil\n</code></pre>\n\n<p>the golang compiler will throw a <code>can't use nil as type string in assignment</code> error.</p>\n\n<p>Looks like <code>nil</code> can only be used for a pointer of struct and interface. If that is the case, then <strong>what does it mean?</strong>\nand <strong>when we use it to compare to the other object, how do they compare, in other words, how does golang determine one object is nil</strong>?</p>\n\n<p><strong>EDIT:For example, if an interface is nil, its type and value must be nil at the same time. How does golang do this?</strong></p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1457945317, "post_id": 35982751, "comment_id": 59619044, "body": "and what you can do is add a <code>r.URL</code> check then using <code>http.Error</code> to return a 404"}], "answers": [{"tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 3, "last_activity_date": 1457944961, "creation_date": 1457944961, "answer_id": 35982889, "question_id": 35982751, "link": "https://stackoverflow.com/questions/35982751/about-golang-handlerfunc-i-expected-404-not-found-but/35982889#35982889", "title": "about golang HandlerFunc. I expected 404 not found but", "body": "<p><code>\"/\"</code> is a rooted subtree and matches basically everything. See <a href=\"https://golang.org/pkg/net/http/#ServeMux\" rel=\"nofollow\">https://golang.org/pkg/net/http/#ServeMux</a> . (Always consult the documentation before making any assumptions.)</p>\n"}], "owner": {"reputation": 71, "user_id": 5725195, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153314468411659/picture?type=large", "display_name": "Jihun Lee", "link": "https://stackoverflow.com/users/5725195/jihun-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457944961, "creation_date": 1457944435, "question_id": 35982751, "link": "https://stackoverflow.com/questions/35982751/about-golang-handlerfunc-i-expected-404-not-found-but", "title": "about golang HandlerFunc. I expected 404 not found but", "body": "<p>this is my code</p>\n\n<pre><code>  package main\n\n  import \"encoding/json\"\n  import \"net/http\"\n  import \"time\"\n  import \"fmt\"\n  import \"os\"\n\ntype Profile struct {\n    Name string\n    Hobbies []string\n}\n\nfunc main() {\n   http.HandleFunc(\"/\", rootFunc)//routeSet()\n   err :=http.ListenAndServe(\":3000\", nil)\n   checkError(err)\n}\n\nfunc checkError(err error) {\n    if err != nil {\n        fmt.Println(\"Fatal Error\", err.Error())\n        os.Exit(1)\n    }\n}\n\nfunc rootFunc(w http.ResponseWriter, r *http.Request) {\n    //fmt.Println(\"Request url : \" + r.RequestURI)\n    userProfile := make(chan Profile)\n\n    go goFun(userProfile, w, r)\n\n    profile := &lt;-userProfile\n    js, err := json.Marshal(profile)\n\n    if err != nil {\n        http.Error(w, err.Error(), http.StatusInternalServerError)\n        return\n    }\n\n    w.Header().Set(\"Content-Type\", \"application/json\")\n    w.Write(js)\n}\nfunc goFun(u chan Profile, w http.ResponseWriter, r *http.Request) {\n//    time.Sleep(1 * time.Second)\n    u &lt;- Profile{\"Alex\", []string{r.RequestURI, \"programming\"}}\n}\n</code></pre>\n\n<p>and I send <strong><a href=\"http://localhost:3000/hello\" rel=\"nofollow\">http://localhost:3000/hello</a></strong> by postman</p>\n\n<p>and I recieve</p>\n\n<pre><code>{\n    \"Name\": \"Alex\",\n    \"Hobbies\": [\n        \"/hello\",\n        \"programming\"\n    ]\n}\n</code></pre>\n\n<p>I expected 404 not found, because I use HandleFunc() only for \"/\" </p>\n\n<p>but i received normal result.</p>\n\n<p>...........................\nenv. \ngo 1.6\nmax osx</p>\n\n<p>...........................</p>\n"}, {"tags": ["http", "go"], "answers": [{"tags": [], "owner": {"reputation": 303, "user_id": 2977136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275c4df9289839b46d76540fedc621ad?s=128&d=identicon&r=PG&f=1", "display_name": "Abex", "link": "https://stackoverflow.com/users/2977136/abex"}, "is_accepted": true, "score": 2, "last_activity_date": 1457942862, "creation_date": 1457942862, "answer_id": 35982347, "question_id": 35981958, "link": "https://stackoverflow.com/questions/35981958/receive-big-file-via-http/35982347#35982347", "title": "Receive big file via http", "body": "<p>Go will start writing large files to disk, so that they don't clog up memory. \nYou can then use <a href=\"https://golang.org/pkg/net/http/#Request.FormFile\" rel=\"nofollow\"><code>FormFile</code></a> to get the a handle to the file on disk. When you are done you should close the handle and delete the temporary file with <code>r.MultipartForm.RemoveAll()</code>.</p>\n\n<p>All together:</p>\n\n<pre><code>func handler(w http.ResponseWriter, r *http.Request) {\n    r.ParseMultipartForm(0)\n    defer r.MultipartForm.RemoveAll()\n    fi, info, err := r.FormFile(\"f\")\n    defer fi.Close()\n    fmt.Printf(\"Recieved %v\",info.Filename)\n    //Do whatever with it\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 1557491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2c90cd6deb096c32acc93cd73e19717?s=128&d=identicon&r=PG", "display_name": "Andrey Sinitsyn", "link": "https://stackoverflow.com/users/1557491/andrey-sinitsyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 35982347, "answer_count": 1, "score": 0, "last_activity_date": 1457942862, "creation_date": 1457941354, "question_id": 35981958, "link": "https://stackoverflow.com/questions/35981958/receive-big-file-via-http", "title": "Receive big file via http", "body": "<p>I've trying to receive big (~25Mb) file via http. From \"client\" i've send this file via PHP and cUrl and trying to receive it from golang.<br>\nHere is code:   </p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"io/ioutil\"\n)\n\nfunc handler(w http.ResponseWriter, r *http.Request) {\n    buf, _ := ioutil.ReadAll(r.Body)\n    fmt.Println(string(buf[:]))\n}\n\nfunc main() {\n    http.HandleFunc(\"/\", handler)\n    http.ListenAndServe(\":12100\", nil)\n}\n</code></pre>\n\n<p>In this case i can see my file in <code>ioutil.ReadAll</code> output. But if i trying to get only file contents, it is failed :(</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"io/ioutil\"\n)\n\nfunc handler(w http.ResponseWriter, r *http.Request) {\n    r.ParseMultipartForm(0)\n    fmt.Println(r.FormValue(\"f\"))\n}\n\n\nfunc main() {\n    http.HandleFunc(\"/\", handler)\n    http.ListenAndServe(\":12100\", nil)\n}\n</code></pre>\n\n<p>However file is small (~900Kb) everything is ok. What is right way to send big files via http?</p>\n"}, {"tags": ["go", "debouncing"], "comments": [{"owner": {"reputation": 6950, "user_id": 5371821, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/gHZQr.jpg?s=128&g=1", "display_name": "starkshang", "link": "https://stackoverflow.com/users/5371821/starkshang"}, "edited": false, "score": 0, "creation_date": 1457934275, "post_id": 35979863, "comment_id": 59614217, "body": "Do you mean put all data to input channel then read these one by one to output channel?"}, {"owner": {"reputation": 28206, "user_id": 624884, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04a353473303cb908cd95f25277a4ba2?s=128&d=identicon&r=PG&f=1", "display_name": "F21", "link": "https://stackoverflow.com/users/624884/f21"}, "reply_to_user": {"reputation": 6950, "user_id": 5371821, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/gHZQr.jpg?s=128&g=1", "display_name": "starkshang", "link": "https://stackoverflow.com/users/5371821/starkshang"}, "edited": false, "score": 0, "creation_date": 1457934844, "post_id": 35979863, "comment_id": 59614411, "body": "No. I have an input channel that receives data in bursts. I want to read from the input and only write to the output channel once every time a burst of data has been read."}, {"owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 0, "creation_date": 1457937020, "post_id": 35979863, "comment_id": 59615118, "body": "Can you expand on the comment &quot;wait until all the writes have finished&quot;? Is the intention to use a delay as a signal?"}, {"owner": {"reputation": 28206, "user_id": 624884, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04a353473303cb908cd95f25277a4ba2?s=128&d=identicon&r=PG&f=1", "display_name": "F21", "link": "https://stackoverflow.com/users/624884/f21"}, "reply_to_user": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 0, "creation_date": 1457937740, "post_id": 35979863, "comment_id": 59615429, "body": "@Mark, I updated my question and changed it to &quot;a burst of sends on the channel&quot;. I have found a solution to my problem and have posted some code implementing that as my answer."}], "answers": [{"tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": false, "score": 1, "last_activity_date": 1457933959, "creation_date": 1457933959, "answer_id": 35980237, "question_id": 35979863, "link": "https://stackoverflow.com/questions/35979863/how-do-i-wait-for-lulls-in-channel-activity-to-trigger-something/35980237#35980237", "title": "How do I wait for lulls in channel activity to trigger something?", "body": "<p>Sounds like you need synchronization between goroutines, perhaps along this line.</p>\n\n<pre><code>func main() {\n\n        // Create a channel for our input\n        input := make(chan int, 1)\n        // Create another for synchronization between main and forked goroutines\n        done := make(chan bool)\n\n        go func() {\n                // block-wait for received value\n                &lt;-input\n\n                // do some more things here\n\n                // when done, send signal to the main goroutine\n                done &lt;- true\n        }()\n\n        // Do something while wait for the forked goroutine\n\n        // this block until `&lt;-done`\n        &lt;-done\n        close(mychan)\n}\n</code></pre>\n\n<p>This <a href=\"https://medium.com/code-zen/concurrency-in-go-5fcba11acb0f#.s7wbsadzl\" rel=\"nofollow\">post</a> explains quite clear about synchronization using channels and sync group.</p>\n"}, {"tags": [], "owner": {"reputation": 28206, "user_id": 624884, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04a353473303cb908cd95f25277a4ba2?s=128&d=identicon&r=PG&f=1", "display_name": "F21", "link": "https://stackoverflow.com/users/624884/f21"}, "is_accepted": true, "score": 0, "last_activity_date": 1457937495, "creation_date": 1457937495, "answer_id": 35981000, "question_id": 35979863, "link": "https://stackoverflow.com/questions/35979863/how-do-i-wait-for-lulls-in-channel-activity-to-trigger-something/35981000#35981000", "title": "How do I wait for lulls in channel activity to trigger something?", "body": "<p>This is what I ended up implementing as my debouncer:</p>\n\n<pre><code>func Debounce(lull time.Duration, in chan struct{}, out chan struct{}) {\n\n    go func() {\n\n        var last int64 = 0\n\n        for {\n            select {\n            case &lt;-in:\n                last = time.Now().Unix()\n\n            case &lt;-time.Tick(lull):\n                if last != 0 &amp;&amp; time.Now().Unix() &gt;= last+int64(lull.Seconds()) {\n                    last = 0\n                    out &lt;- struct{}{}\n                }\n            }\n        }\n    }()\n}\n</code></pre>\n\n<p>It takes a lull time which is the duration where if we do not receive on the input, then we assume there is a break in the bursts of data. There are 2 channels, 1 input and 1 output. The bursts of data arrives on the input, and for each burst, we write to the output channel at the end of the burst.</p>\n\n<p>The implementation is extremely simplistic. I just store the current unix timestamp every time I receive from the input channel. Then, I have a ticker ticking with a duration of the lull time. All this does is check to see if we've exceeded the wait time for the last burst. If so, it resets <code>last</code> to 0 an emits an event on the output channel.</p>\n\n<p>Here's some code using the debounce function with a lull time of 2 seconds which sends random bursts on the input channel:</p>\n\n<pre><code>func main() {\n\n    out := make(chan struct{})\n    in := make(chan struct{})\n\n    Debounce(2*time.Second, in, out)\n\n    // Generating bursts of input data\n    go func(in chan struct{}) {\n\n        for {\n            select {\n            case &lt;-time.Tick(1 * time.Second):\n                in &lt;- struct{}{}\n\n                fmt.Println(\"Sending!\")\n\n                shouldSleep := rand.Intn(2)\n                if shouldSleep == 1 {\n                    time.Sleep(5 * time.Second)\n                }\n            }\n        }\n    }(in)\n\n    // Listening for output events\n    go func(out chan struct{}) {\n\n        for _ = range out {\n            fmt.Println(\"Got an event!\")\n        }\n    }(out)\n\n    // Do not let main terminate.\n    done := make(chan struct{})\n    &lt;-done\n}\n</code></pre>\n"}], "owner": {"reputation": 28206, "user_id": 624884, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/04a353473303cb908cd95f25277a4ba2?s=128&d=identicon&r=PG&f=1", "display_name": "F21", "link": "https://stackoverflow.com/users/624884/f21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 1, "accepted_answer_id": 35981000, "answer_count": 2, "score": 0, "last_activity_date": 1457937672, "creation_date": 1457931663, "last_edit_date": 1457937672, "question_id": 35979863, "link": "https://stackoverflow.com/questions/35979863/how-do-i-wait-for-lulls-in-channel-activity-to-trigger-something", "title": "How do I wait for lulls in channel activity to trigger something?", "body": "<p>I have a channel that will receive bursts of writes to it. I want to wait until a burst of sends on the channel have finished before triggering an action.</p>\n\n<p>I have looked at this <a href=\"https://gist.github.com/leolara/d62b87797b0ef5e418cd\" rel=\"nofollow\">gist</a>, however, it will send on the output every <code>interval</code>if there is data in the buffer:</p>\n\n<pre><code>func debounceChannel(interval time.Duration, output chan int) chan int {\n  input := make(chan int)\n\n  go func() {\n    var buffer int\n    var ok bool\n\n    // We do not start waiting for interval until called at least once\n    buffer, ok = &lt;-input \n    // If channel closed exit, we could also close output\n    if !ok {\n      return\n    }\n\n    // We start waiting for an interval\n    for {\n      select {\n      case buffer, ok = &lt;-input:\n        // If channel closed exit, we could also close output\n        if !ok {\n          return\n        }\n\n      case &lt;-time.After(interval):\n        // Interval has passed and we have data, so send it\n        output &lt;- buffer\n        // Wait for data again before starting waiting for an interval\n        buffer, ok = &lt;-input\n        if !ok {\n          return\n        }\n        // If channel is not closed we have more data and start waiting for interval\n      }\n    }\n  }()\n\n  return input\n}\n</code></pre>\n\n<p>In my case, I want to wait until there is no longer any data being sent on the input channel for this burst before triggering or sending on the output.</p>\n\n<p>How do I achieve this?</p>\n"}, {"tags": ["methods", "go", "packages", "receiver"], "comments": [{"owner": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "edited": false, "score": 0, "creation_date": 1457951049, "post_id": 35979501, "comment_id": 59622582, "body": "Style pointer. In Go, it is recommended that tests for package &quot;p&quot; are in package &quot;p&quot;, that is the only way you can test non-exported functions."}], "answers": [{"tags": [], "owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "is_accepted": false, "score": 2, "last_activity_date": 1457929560, "creation_date": 1457929560, "answer_id": 35979529, "question_id": 35979501, "link": "https://stackoverflow.com/questions/35979501/in-golang-how-do-you-access-a-method-that-takes-a-pointer-receiver-and-is-also/35979529#35979529", "title": "In golang, how do you access a method that takes a pointer receiver and is also in a different package?", "body": "<pre><code>func (update *Struct) Update(a, b, c, d, e string, f, g bool)\n</code></pre>\n\n<p>is a method that is defined on type <code>model.Struct</code>. You cannot call it on a different type, such as <code>TestStruct</code> defined in your tests package.</p>\n\n<p>What you probably want to do is:</p>\n\n<pre><code>    cur := model.Struct{i,a,b,c,d,true,true}\n    err := cur.Update(a,b,c,d,true,true)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": false, "score": 2, "last_activity_date": 1457929586, "creation_date": 1457929586, "answer_id": 35979533, "question_id": 35979501, "link": "https://stackoverflow.com/questions/35979501/in-golang-how-do-you-access-a-method-that-takes-a-pointer-receiver-and-is-also/35979533#35979533", "title": "In golang, how do you access a method that takes a pointer receiver and is also in a different package?", "body": "<p>For example,</p>\n\n<pre><code>package tests\n\nimport (\n    \"dir/model\"\n    \"testing\"\n)\n\nfunc TestUpdate(t *testing.T) {\n    t.Log(\"Updating\")\n    cur := model.Struct{i, a, b, c, d, true, true}\n    err := cur.Update(a, b, c, d, true, true)\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 4974678, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/909074285815547/picture?type=large", "display_name": "Healy Fuess", "link": "https://stackoverflow.com/users/4974678/healy-fuess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1061, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1457929586, "creation_date": 1457929321, "question_id": 35979501, "link": "https://stackoverflow.com/questions/35979501/in-golang-how-do-you-access-a-method-that-takes-a-pointer-receiver-and-is-also", "title": "In golang, how do you access a method that takes a pointer receiver and is also in a different package?", "body": "<pre><code>package tests\n\nimport (\n    \"testing\"\n    \"strconv\"\n    \"dir/model\"\n)\n\ntype TestStruct struct {\n    ID int\n    a  string\n    b  string\n    c  string\n    d  string\n    ac bool\n    ad bool\n}\n\nfunc TestUpdate(t *testing.T) {\n\n        t.Log(\"Updating\")\n        cur := TestStruct{i,a,b,c,d,true,true}\n        err := cur.model.Update(a,b,c,d,true,true)\n}\n</code></pre>\n\n<p>In the code block above, I am trying to call a method that takes a receiver pointer and that is located in package \"model\".</p>\n\n<p>The compiler error for this is: </p>\n\n<p>reference to undefined field or method \u2018model\u2019\n   err := cur.model.Update(a,b,c,d,e,true,true)</p>\n\n<p>In the code block below,the method \"Udpate\" in package \"model\" takes a receiver point to a struct and other input parameters.   </p>\n\n<pre><code>package model\n\ntype Struct struct {\n    ID int\n    a  string\n    b  string\n    c  string\n    d  string\n    ac bool\n    ad bool\n}\n\nfunc (update *Struct) Update(a, b, c, d,\ne string, f, g bool) error {\n\n    /* code */\n\n}\n</code></pre>\n\n<p>I know for functions in other packages I can call them in my current package by saying:</p>\n\n<pre><code>packageName.method(parameters) \n</code></pre>\n\n<p>How could I call method \"Update\" from package \"model\" in package \"tests\" while inputting a receiver pointer when I call it?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 15349, "user_id": 2282538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0a4fff09f1f0e3360daeabb30c2c06bb?s=128&d=identicon&r=PG", "display_name": "Tyler", "link": "https://stackoverflow.com/users/2282538/tyler"}, "edited": false, "score": 1, "creation_date": 1457923138, "post_id": 35978605, "comment_id": 59611435, "body": "I think your input slice is probably wrong, and that is why the join isn&#39;t producing what you&#39;re expecting."}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 1, "creation_date": 1458000501, "post_id": 35978605, "comment_id": 59653358, "body": "the errors about url.QueryEscape are likely that you have a global var somewhere named &quot;url&quot; (or a var in this function but not in what you pasted to us).  basically, you&#39;ve shadowed the package url with a string named url. rename the variable url and it should work fine"}], "answers": [{"comments": [{"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457923236, "post_id": 35978686, "comment_id": 59611455, "body": "But should that end up like this, \t   \t \t But it needs to be example.com/value?bad+santa"}], "tags": [], "owner": {"reputation": 5916, "user_id": 3068258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ecfa82e529a576cbc6ef661b9c9815?s=128&d=identicon&r=PG", "display_name": "Andy Schweig", "link": "https://stackoverflow.com/users/3068258/andy-schweig"}, "is_accepted": false, "score": 0, "last_activity_date": 1457923095, "creation_date": 1457923095, "answer_id": 35978686, "question_id": 35978605, "link": "https://stackoverflow.com/questions/35978605/how-to-build-a-url-query-in-golang/35978686#35978686", "title": "How to build a URL / Query in Golang", "body": "<p>If <code>MovieSearch</code> contains one element with the value \"bad santa\", what you're seeing looks correct. It's joining those three strings and putting \"+\" between them.</p>\n"}, {"tags": [], "owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "is_accepted": false, "score": 0, "last_activity_date": 1457923675, "creation_date": 1457923675, "answer_id": 35978750, "question_id": 35978605, "link": "https://stackoverflow.com/questions/35978605/how-to-build-a-url-query-in-golang/35978750#35978750", "title": "How to build a URL / Query in Golang", "body": "<p>If there is a space in the word you will need to replace it.</p>\n\n<p>Example</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    fmt.Println(strings.Replace(\"bad santa\", \" \", \"+\", -1))\n}\n</code></pre>\n\n<p>So you should probably do it like this</p>\n\n<pre><code>func main() {\n    a := []string{\"bad\", \"santa\"}\n    fmt.Printf(\"%q\\n\", a)\n    j := ArrayToString(a)\n    strings.Replace(j, \" \", \"+\",-1)\n    fmt.Printf(\"%q\\n\", j)\n}\n</code></pre>\n\n<p>Here is a link to the Go Documentation - <a href=\"https://golang.org/pkg/strings/#Replace\" rel=\"nofollow\">https://golang.org/pkg/strings/#Replace</a></p>\n"}, {"tags": [], "owner": {"reputation": 624, "user_id": 1887309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ba562230112c5953454a7b7ec7acb6?s=128&d=identicon&r=PG", "display_name": "Cedmundo", "link": "https://stackoverflow.com/users/1887309/cedmundo"}, "is_accepted": false, "score": 1, "last_activity_date": 1457934652, "last_edit_date": 1457934652, "creation_date": 1457934293, "answer_id": 35980297, "question_id": 35978605, "link": "https://stackoverflow.com/questions/35978605/how-to-build-a-url-query-in-golang/35980297#35980297", "title": "How to build a URL / Query in Golang", "body": "<p>You can escape parameters using <a href=\"https://golang.org/pkg/net/url/#QueryEscape\" rel=\"nofollow\">https://golang.org/pkg/net/url/#QueryEscape</a>, instead of doing it yourself.</p>\n\n<p>Besides you should be using <a href=\"https://golang.org/pkg/net/url/#URL\" rel=\"nofollow\">https://golang.org/pkg/net/url/#URL</a> to build up your url:</p>\n\n<pre><code>params := fmt.Sprintf(\"?query=%s&amp;api_key=######\", url.QueryEscape(\"name\"))\nperform := url.URL{\n    Scheme:     \"https\",  \n    Host:       \"api.example.com\",\n    Path:       \"3/search/movie\",\n    RawQuery:   params,\n}\n\nfmt.Println(perform) // &lt;- Calls .String()\n</code></pre>\n\n<p>I recommend to check <a href=\"https://golang.org/doc/effective_go.html\" rel=\"nofollow\">https://golang.org/doc/effective_go.html</a>.</p>\n\n<p>If your data comes in []string:</p>\n\n<pre><code>func ArrayToQuery(values []string) string {\n    return url.QueryEscape(strings.Join(values, \" \"))\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 1, "creation_date": 1458001554, "post_id": 36000522, "comment_id": 59653678, "body": "r.Form is the same type (url.Values)... Just use r.Form.Get(&quot;key&quot;) and you get a single string.  The only reason the underlying map uses a map[string][]string is because it&#39;s legal for a form to submit the same form key twice.  if your html doesn&#39;t do that, just use the first field just like Values.Get does ( <a href=\"https://golang.org/src/net/url/url.go?s=19773:19811#L698\" rel=\"nofollow noreferrer\">golang.org/src/net/url/url.go?s=19773:19811#L698</a> )"}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 1, "creation_date": 1458001863, "post_id": 36000522, "comment_id": 59653798, "body": "correct, and I updated my example.   Warning, I didn&#39;t run the handler itself, but it compiles.  and that code is simple enough that compiles probably == works"}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 1, "creation_date": 1458003172, "post_id": 36000522, "comment_id": 59654216, "body": "I&#39;d guess the down votes were for a couple reasons.  The title doesn&#39;t really match the problem (generating urls).  Your solution is fairly complex and not in a copy&amp;paste form, so hard to drop in an editor to see what is wrong.   Also, only errors in the question are related to code not in the example.  People are more likely to help if you boil problem down in to an easy to reproduce, runnable thing.  Having a link to the problematic code on play.golang.org is also super helpful.  Make sure the question always has the code as well, no everyone will click the link to Play."}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1458004649, "post_id": 36000522, "comment_id": 59654654, "body": "Ok cool. Thanks a lot man. I will keep that in mind in the future."}], "tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": true, "score": 3, "last_activity_date": 1458001830, "last_edit_date": 1458001830, "creation_date": 1458001159, "answer_id": 36000522, "question_id": 35978605, "link": "https://stackoverflow.com/questions/35978605/how-to-build-a-url-query-in-golang/36000522#36000522", "title": "How to build a URL / Query in Golang", "body": "<p>Normally, one should use url package's Values.</p>\n\n<p>Here's an example, that does what I think you want, <a href=\"http://play.golang.org/p/9gC6NNW--_\" rel=\"nofollow\">on play</a>\nBoth a simple main, and in http.HandlerFunc form:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"net/url\"\nimport \"net/http\"\n\nfunc main() {\n    baseURL := \"https://www.example.org/3/search/movie\"\n    v := url.Values{}\n    v.Set(\"query\", \"this is a value\")\n    perform := baseURL + \"?\" + v.Encode()\n    fmt.Println(\"Perform:\", perform)\n}\n\nfunc formHandler(w http.ResponseWriter, r *http.Request) {\n    baseURL := \"https://www.example.org/3/search/movie\"\n    v := url.Values{}\n\n    v.Set(\"query\", r.Form.Get(\"GetSearchKey\")) // take GetSearchKey from submitted form\n    v.Set(\"api_ley\", \"YOURKEY\") // whatever your api key is\n\n    perform := baseURL + \"?\" + v.Encode() // put it all together\n    fmt.Println(\"Perform:\", perform) // do something with it\n}\n</code></pre>\n\n<p>Output:\n<code>Perform: https://www.example.org/3/search/movie?query=this+is+a+value</code></p>\n\n<p>Notice how the values are put in to query string, properly escaped, for you.</p>\n"}], "owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3300, "favorite_count": 1, "accepted_answer_id": 36000522, "answer_count": 4, "score": -5, "last_activity_date": 1595309588, "creation_date": 1457922387, "last_edit_date": 1595309588, "question_id": 35978605, "link": "https://stackoverflow.com/questions/35978605/how-to-build-a-url-query-in-golang", "title": "How to build a URL / Query in Golang", "body": "<p><strong>Background -</strong></p>\n<p>I need to build a URL / query based on user input from a form that will be used to make an API call.</p>\n<p><strong>Problem -</strong></p>\n<p>When building the URL, the params are not properly escaped. For example, the query &quot;bad santa&quot; ends up with a space between it instead of &quot;+&quot;.</p>\n<p>Current Output -</p>\n<blockquote>\n<p>e.g. <a href=\"https://api.example.org/3/search/movie?query=bad\" rel=\"nofollow noreferrer\">https://api.example.org/3/search/movie?query=bad</a>\nsanta&amp;api_key=#######</p>\n</blockquote>\n<p>Expected Output -</p>\n<blockquote>\n<p>e.g. <a href=\"https://api.example.org/3/search/movie?query=bad+santa&amp;api_key=#######\" rel=\"nofollow noreferrer\">https://api.example.org/3/search/movie?query=bad+santa&amp;api_key=#######</a></p>\n</blockquote>\n<p><strong>Code Example -</strong></p>\n<p>Root URL -</p>\n<pre><code>var SearchUrl = &quot;https://www.example.org/3/search/movie?query=&quot;\n</code></pre>\n<p>Get params taken from user input -</p>\n<pre><code>var MovieSearch []string = r.Form[&quot;GetSearchKey&quot;]  \n</code></pre>\n<p>API Key -</p>\n<pre><code>var apiKey = &quot;&amp;api_key=######&quot;\n</code></pre>\n<p>I am using the <code>ArrayToString()</code> to parse the form input data</p>\n<pre><code>func ArrayToString(array []string) string{\n    str := strings.Join(array, &quot;+&quot;)\n    return str \n}\n</code></pre>\n<p>Then building the URL -</p>\n<pre><code>var SearchUrl = &quot;https://api.example.org/3/search/movie?query=&quot;\nvar MovieSearch []string = r.Form[&quot;GetSearchKey&quot;]  \nvar apiKey = &quot;&amp;api_key=########&quot;\nUrlBuild := []string {SearchUrl, ArrayToString(MovieSearch), apiKey}\nOUTPUT_STRING := ArrayToString(UrlBuild)\n</code></pre>\n<p><strong>Question -</strong></p>\n<p>How to build a URL with user input GET params that are escaped properly?</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5895067, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/432c26e117b9272658291dfab8b09d74?s=128&d=identicon&r=PG&f=1", "display_name": "ADF programmer", "link": "https://stackoverflow.com/users/5895067/adf-programmer"}, "edited": false, "score": 0, "creation_date": 1458508786, "post_id": 35978217, "comment_id": 59879518, "body": "i want to say that when i passed files in this code    controller.carService.InsertImages(&amp;fileNames) and the InsertImages function     func (r CarService) InsertImages(images *[]string) { \tsession, _ := mgo.Dial(r.uri) \tdefer session.Close() \tsession.SetSafe(&amp;mgo.Safe{}) \tcollection := session.DB(r.dbName).C(r.collectionName) \tfor _, image := range images { \t\terror := collection.Insert(  \t\t\tmodels.Car{ImagePath:image}) \t\tif error != nil {  \t\t} \t}  } i have error say : cannot range over images (type *[]string)"}], "tags": [], "owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "is_accepted": false, "score": 2, "last_activity_date": 1457920108, "last_edit_date": 1457920108, "creation_date": 1457919646, "answer_id": 35978217, "question_id": 35978181, "link": "https://stackoverflow.com/questions/35978181/how-can-i-return-array-in-golang-to-use-it-in-my-index-html/35978217#35978217", "title": "How can I return array in golang to use it in my index.html?", "body": "<p>Create a slice and use <code>append</code> to add the file names in your loop.</p>\n\n<pre><code>var fileNames []string\nfiles, _ := ioutil.ReadDir(\"public/my-template/imagesT/gallery/\")\nfor _, f := range files {\n    fileNames = append(fileNames, f.Name())\n}\n\n// Now fileNames contains all of the file names for you to pass to your template.\n</code></pre>\n\n<p>Also note that you should not ignore the possible error returned on the line</p>\n\n<pre><code>files, _ := ioutil.ReadDir(\"public/my-template/imagesT/gallery/\")\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5895067, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/432c26e117b9272658291dfab8b09d74?s=128&d=identicon&r=PG&f=1", "display_name": "ADF programmer", "link": "https://stackoverflow.com/users/5895067/adf-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2096, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1457920507, "creation_date": 1457919330, "last_edit_date": 1457920507, "question_id": 35978181, "link": "https://stackoverflow.com/questions/35978181/how-can-i-return-array-in-golang-to-use-it-in-my-index-html", "title": "How can I return array in golang to use it in my index.html?", "body": "<p>I have this code    </p>\n\n<pre><code>files, _ := ioutil.ReadDir(\"public/my-template/imagesT/gallery/\")\n    for _, f:=range files {\n        fmt.Println(f.Name())\n    }\n</code></pre>\n\n<p>How can  return an array contain all <code>f.Name</code> to use them in index.html ?</p>\n"}, {"tags": ["string", "go"], "comments": [{"owner": {"reputation": 15349, "user_id": 2282538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0a4fff09f1f0e3360daeabb30c2c06bb?s=128&d=identicon&r=PG", "display_name": "Tyler", "link": "https://stackoverflow.com/users/2282538/tyler"}, "edited": false, "score": 0, "creation_date": 1457912996, "post_id": 35977267, "comment_id": 59609046, "body": "What&#39;s wrong with having the data in the map?"}, {"owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "edited": false, "score": 0, "creation_date": 1457913508, "post_id": 35977267, "comment_id": 59609172, "body": "What do you want exactly? Add an example."}, {"owner": {"reputation": 8880, "user_id": 2363866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ToSkw.png?s=128&g=1", "display_name": "creker", "link": "https://stackoverflow.com/users/2363866/creker"}, "edited": false, "score": 0, "creation_date": 1457913648, "post_id": 35977267, "comment_id": 59609208, "body": "&quot;How can I Put this in a variable that I can call outside of the for loop&quot; - maybe by storing it in a variable that you defined outside of the loop?"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457913838, "post_id": 35977267, "comment_id": 59609249, "body": "I am trying to convert it to a string so I can build a url out of it. Ill edit right now."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 3, "creation_date": 1457914606, "post_id": 35977267, "comment_id": 59609453, "body": "Working through the Tour of Go twice might be well spent 4 hours."}, {"owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "edited": false, "score": 0, "creation_date": 1457915637, "post_id": 35977267, "comment_id": 59609702, "body": "What do you get when you range over the MovieSearch?  I would think you would need to create the UrlBuild slice with SearchUrl, append the values from MovieSearch, and then append the api key."}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457915780, "post_id": 35977267, "comment_id": 59609729, "body": "Yes what you said is sounds ideal. I am just trying to make things work the best I know how. What I don&#39;t understand is that when I use reflect and check the type it is a string.. so why can I not just concatenate it? If you believe there is a better way would you please show me? Also I really truly would like to understand why I can concatenate the form data when it is indeed"}], "answers": [{"comments": [{"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457914000, "post_id": 35977528, "comment_id": 59609287, "body": "But since I am building a url does it make sense to do it like I am attempting? I just edited my question."}], "tags": [], "owner": {"reputation": 111, "user_id": 6014800, "user_type": "registered", "profile_image": "https://graph.facebook.com/575008389314997/picture?type=large", "display_name": "Dennis Chen", "link": "https://stackoverflow.com/users/6014800/dennis-chen"}, "is_accepted": false, "score": 1, "last_activity_date": 1457913936, "creation_date": 1457913936, "answer_id": 35977528, "question_id": 35977267, "link": "https://stackoverflow.com/questions/35977267/converting-value-to-string-in-for-loop-in-golang/35977528#35977528", "title": "Converting Value To String In For Loop In GoLang", "body": "<p>This problem doesn't seem so bad, though I may be misunderstanding the question. There are many ways to build up these strings. </p>\n\n<p>Consider the following approach using concatenation (slow):</p>\n\n<pre><code>s := []string{}\nfor key, values := range r.Form {   // range over map\n    for _, value := range values {    // range over []string\n        s = append(s, fmt.Sprintf(\"%s, %s\", key, value))\n    }\n}\ndata := strings.Join(s, \";\")\n</code></pre>\n\n<p>More examples of concat are seen here: <a href=\"http://herman.asia/efficient-string-concatenation-in-go\" rel=\"nofollow\">http://herman.asia/efficient-string-concatenation-in-go</a></p>\n"}, {"comments": [{"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457917020, "post_id": 35977862, "comment_id": 59610038, "body": "Hey thank you very much for trying to help me out. Would you mind elaborating a little on this."}, {"owner": {"reputation": 343, "user_id": 6058631, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/80f2cff0a0888497bd7ef323cbc1d4c5?s=128&d=identicon&r=PG&f=1", "display_name": "XXX", "link": "https://stackoverflow.com/users/6058631/xxx"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457917201, "post_id": 35977862, "comment_id": 59610086, "body": "Yeah... I just through this out there. It turns an array into a string by joining it"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457917440, "post_id": 35977862, "comment_id": 59610146, "body": "Cool thanks man, so I have 2 string and 1 input value from a form. the value from the form says it is a string when I check it with reflect. But I guess its an string array maybe and that&#39;s what is killing me? if so I am not even sure how I would use that function to concatenate it all. If you look at my question and see these tree vars SearchUrl MovieSearch and apiKey would you mind updating your answer with how to bring all those together in to one string var so I can call that var in another function."}, {"owner": {"reputation": 343, "user_id": 6058631, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/80f2cff0a0888497bd7ef323cbc1d4c5?s=128&d=identicon&r=PG&f=1", "display_name": "XXX", "link": "https://stackoverflow.com/users/6058631/xxx"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457917513, "post_id": 35977862, "comment_id": 59610159, "body": "Ahh I get it. One sec"}, {"owner": {"reputation": 343, "user_id": 6058631, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/80f2cff0a0888497bd7ef323cbc1d4c5?s=128&d=identicon&r=PG&f=1", "display_name": "XXX", "link": "https://stackoverflow.com/users/6058631/xxx"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457917671, "post_id": 35977862, "comment_id": 59610188, "body": "Wait, what does, <code>MovieSearch</code> look like"}, {"owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "edited": false, "score": 0, "creation_date": 1457917693, "post_id": 35977862, "comment_id": 59610197, "body": "Wuno, if your sure they are all strings, you would just use myString := SearchUrl + MovieSearch + apiKey to get a string.  If MovieSearch is an array of strings, you could use XXXs function like this myString := SearchUrl + ArrayToString(MovieSearch) + apiKey"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457917840, "post_id": 35977862, "comment_id": 59610230, "body": "Exactly thats my point. its coming from a form. And when i try and do what you just suggested it gives me the error I posted in my question. When I use reflection I get this as the type []string and when I print it to the terminal it looks like this [hahahahahahah]"}, {"owner": {"reputation": 343, "user_id": 6058631, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/80f2cff0a0888497bd7ef323cbc1d4c5?s=128&d=identicon&r=PG&f=1", "display_name": "XXX", "link": "https://stackoverflow.com/users/6058631/xxx"}, "edited": false, "score": 0, "creation_date": 1457917891, "post_id": 35977862, "comment_id": 59610248, "body": "Did you try converting it with the function?"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457917936, "post_id": 35977862, "comment_id": 59610259, "body": "I didnt understand how. I am going to edit my question and show you the code i have."}, {"owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "edited": false, "score": 0, "creation_date": 1457917938, "post_id": 35977862, "comment_id": 59610260, "body": "The error references line 71.  What is the actual code on that line?  Would make it easier to see what is going on then."}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457918102, "post_id": 35977862, "comment_id": 59610297, "body": "Ok I updated at the bottom I show you exactly the error and the whole function I am writing. And Wade... I really really appreciate you."}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457918340, "post_id": 35977862, "comment_id": 59610347, "body": "Haha right on man. Bro my whole app is decent work. I just do not understand what this specific issue is. I do not understand why that is such blasphemy that warrants down votes. But either way I just want to understand."}, {"owner": {"reputation": 343, "user_id": 6058631, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/80f2cff0a0888497bd7ef323cbc1d4c5?s=128&d=identicon&r=PG&f=1", "display_name": "XXX", "link": "https://stackoverflow.com/users/6058631/xxx"}, "edited": false, "score": 0, "creation_date": 1457918605, "post_id": 35977862, "comment_id": 59610400, "body": "Ok. Your problem is you are trying to create a slice(list in golang), with slice within it. This is illegal in golang the way you are doing it. So, you need to convert all the items in the slice to a string, to make it legal. My function <code>ArrayToString</code> does this. Now, you have a slice of everything. Convert <b>THAT</b> to a string, and voila!"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457918637, "post_id": 35977862, "comment_id": 59610411, "body": "Got it. Thank you so much for all your help! You both are great. Thanks a ton. So at the end I think I need to understand what slice is and does better.  Is that pretty much it?"}, {"owner": {"reputation": 343, "user_id": 6058631, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/80f2cff0a0888497bd7ef323cbc1d4c5?s=128&d=identicon&r=PG&f=1", "display_name": "XXX", "link": "https://stackoverflow.com/users/6058631/xxx"}, "edited": false, "score": 0, "creation_date": 1457918679, "post_id": 35977862, "comment_id": 59610421, "body": "Yes, you need to read <a href=\"http://www.dotnetperls.com/slice-go\" rel=\"nofollow noreferrer\">dotnetperls.com/slice-go</a> and <a href=\"http://openmymind.net/The-Minimum-You-Need-To-Know-About-Arrays-And-Slices-In-Go/\" rel=\"nofollow noreferrer\">openmymind.net/&hellip;</a>"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457920269, "post_id": 35977862, "comment_id": 59610771, "body": "Hey man the whole app works now thanks to you. My only issue is that if there is multiple words in the search field it ends up removing the +between them that is needed for the url. so if I search bad santa the url ends up not placing the + between bad+santa. To fix this should I just be able to add the + after each value in the ArrayToString function?"}], "tags": [], "owner": {"reputation": 343, "user_id": 6058631, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/80f2cff0a0888497bd7ef323cbc1d4c5?s=128&d=identicon&r=PG&f=1", "display_name": "XXX", "link": "https://stackoverflow.com/users/6058631/xxx"}, "is_accepted": true, "score": 2, "last_activity_date": 1457918418, "last_edit_date": 1457918418, "creation_date": 1457916610, "answer_id": 35977862, "question_id": 35977267, "link": "https://stackoverflow.com/questions/35977267/converting-value-to-string-in-for-loop-in-golang/35977862#35977862", "title": "Converting Value To String In For Loop In GoLang", "body": "<p>You cannot have a slice within a slice.</p>\n\n<pre><code>func ArrayToString(array []string) string {\n    str := strings.Join(array, \"\")\n    return str\n\n}\nUrlBuild := []string {SearchUrl, ArrayToString(MovieSearch), apiKey}\nfmt.Println(UrlBuild) \nUrlBuildString := ArrayToString(UrlBuild)\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>UrlBuildString := ArrayToString([]string{SearchUrl, ArrayToString(MovieSearch), apiKey}\n</code></pre>\n\n<p>_________________FULL_______________</p>\n\n<pre><code>func ArrayToString(array []string) string {\n    str := strings.Join(array, \"\")\n    return str\n\n}\nfunc searchHandler(w http.ResponseWriter, r *http.Request) {\n  display(w, \"search\", &amp;Page{Title: \"Search\"})\n   fmt.Println(\"method:\", r.Method) \n        r.ParseForm()\n        fmt.Println(\"GetSearchKey:\", r.Form[\"GetSearchKey\"])\n\nfor key, values := range r.Form {   // range over map\nfor _, value := range values {    // range over []string\n    fmt.Println(key, value)\n\n  }\n}\n\nvar SearchUrl = \"https://api.themoviedb.org/3/search/movie?query=\"\n var MovieSearch []string = r.Form[\"GetSearchKey\"]   \nvar apiKey = \"&amp;api_key=ewrfwrfwrcwerc\"\nUrlBuild := []string {SearchUrl, ArrayToString(MovieSearch), apiKey}\nfmt.Println(UrlBuild)\nOUTPUT_STRING := ArrayToString(UrlBuild)\n}\n</code></pre>\n"}], "owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1741, "favorite_count": 0, "accepted_answer_id": 35977862, "answer_count": 2, "score": 0, "last_activity_date": 1457918418, "creation_date": 1457912039, "last_edit_date": 1457918068, "question_id": 35977267, "link": "https://stackoverflow.com/questions/35977267/converting-value-to-string-in-for-loop-in-golang", "title": "Converting Value To String In For Loop In GoLang", "body": "<p>In GoLang I am looping through my form data like this, </p>\n\n<pre><code>for key, values := range r.Form {   // range over map\n    for _, value := range values {    // range over []string\n        fmt.Println(key, value)\n    }\n}\n</code></pre>\n\n<p>I can print the data out to the terminal like this but I need this data to be a string so I can access it from outside of the for loop. </p>\n\n<p>How can I Put this in a variable that I can call outside of the for loop when the loop is finished?</p>\n\n<p>My goal here is to build a url by joining these three strings</p>\n\n<pre><code>var SearchUrl = \"https://api.themoviedb.org/3/search/movie?query=\"\nvar MovieSearch []string = r.Form[\"GetSearchKey\"]   \nvar apiKey = \"&amp;api_key=e2a\"\nUrlBuild := []string {SearchUrl, MovieSearch, apiKey}\nfmt.Println(UrlBuild) \n</code></pre>\n\n<p>I get this error</p>\n\n<pre><code>/main.go:71: cannot use MovieSearch (type []string) \nas type string in array or slice literal\n</code></pre>\n\n<p><code>MovieSearch</code> is coming from the input form. It is the search keywords.</p>\n\n<p>Once I have one string I can pass this to a function that makes the api call.</p>\n\n<p>The full function</p>\n\n<pre><code>func searchHandler(w http.ResponseWriter, r *http.Request) {\n  display(w, \"search\", &amp;Page{Title: \"Search\"})\n   fmt.Println(\"method:\", r.Method) \n        r.ParseForm()\n        fmt.Println(\"GetSearchKey:\", r.Form[\"GetSearchKey\"])\n\nfor key, values := range r.Form {   // range over map\nfor _, value := range values {    // range over []string\n    fmt.Println(key, value)\n\n  }\n}\n\nvar SearchUrl = \"https://api.themoviedb.org/3/search/movie?query=\"\n var MovieSearch []string = r.Form[\"GetSearchKey\"]   \nvar apiKey = \"&amp;api_key=ewrfwrfwrcwerc\"\nUrlBuild := []string {SearchUrl, MovieSearch, apiKey}\nfmt.Println(UrlBuild)\n\nfmt.Println(reflect.TypeOf(r.Form[\"GetSearchKey\"] ))\n}\n</code></pre>\n\n<p>The error comes from this line,</p>\n\n<pre><code>UrlBuild := []string {SearchUrl, MovieSearch, apiKey}\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 3, "creation_date": 1457913695, "post_id": 35976840, "comment_id": 59609218, "body": "Don&#39;t call panic. Use <code>http.Error</code> to write an error response, or write your own that generates a JSON error response."}], "answers": [{"tags": [], "owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "is_accepted": true, "score": 26, "last_activity_date": 1516752197, "last_edit_date": 1516752197, "creation_date": 1457915955, "answer_id": 35977788, "question_id": 35976840, "link": "https://stackoverflow.com/questions/35976840/go-error-handling-on-a-rest-api/35977788#35977788", "title": "Go Error handling on a REST API", "body": "<p>Go suggests a different approach, that errors are not exceptional, they're normal events, just less common.</p>\n\n<p>Taking an example from the code above:</p>\n\n<pre><code>body, err := ioutil.ReadAll(io.LimitReader(r.Body, 1048576))\nif err != nil {\n    panic(err)\n}\n</code></pre>\n\n<p>Here, a panic (without recovery) terminates the process, shutting down the web server. Seems an overly severe response to not fully reading a request.</p>\n\n<p>What do you want to do? It may be appropriate to tell the client who made the request:</p>\n\n<pre><code>body, err := ioutil.ReadAll(io.LimitReader(r.Body, 1048576))\nif err != nil {\n    http.Error(w, err.Error(), http.StatusBadRequest)\n    return\n}\n</code></pre>\n\n<p>You might want to return a json encoded response, or give a generic message to the client avoid exposing too much, and log the specific error details.</p>\n\n<p>For general functions it's idiomatic to return the error as the last return parameter. In the specific example you mentioned:</p>\n\n<pre><code>func HandleCustomerLocationChange(custLoc CustomerLocation) \n...\n    conn, err := amqp.Dial(...)\n    failOnError(err, \"Failed to connect to RabbitMQ\")\n</code></pre>\n\n<p>Instead, check if the connection failed, and return the error to the caller. Handle it in the calling function, or add information and propagate it up the call stack.</p>\n\n<pre><code>func HandleCustomerLocationChange(custLoc CustomerLocation) error\n...\n    conn, err := amqp.Dial(...)\n    if err != nil {\n        return fmt.Errorf(\"failed to connect to RabbitMQ: %s\", err)\n    }\n</code></pre>\n\n<p>Propagating the error in this way gives a concise explanation of the root cause, like the <a href=\"https://en.wikipedia.org/wiki/5_Whys\" rel=\"noreferrer\">5 whys technique</a>, eg:</p>\n\n<p>\"did not update client location: did not connect to rabbitmq: network address 1.2.3 unreachable\"</p>\n\n<p>Another convention is to deal with errors first and return early. This helps to reduce nesting.</p>\n\n<p>See also the many error handling resources, like <a href=\"https://golang.org/doc/articles/wiki/#tmp_9\" rel=\"noreferrer\">error handling in a web application</a>, <a href=\"https://gobyexample.com/errors\" rel=\"noreferrer\">Go by Example</a>, <a href=\"http://blog.golang.org/error-handling-and-go\" rel=\"noreferrer\">Error Handling and Go</a>, <a href=\"https://blog.golang.org/errors-are-values\" rel=\"noreferrer\">errors are values</a> and <a href=\"http://blog.golang.org/defer-panic-and-recover\" rel=\"noreferrer\">Defer, Panic &amp; Recover</a>. The source code of the <a href=\"https://golang.org/src/errors/errors.go\" rel=\"noreferrer\">error package</a> is interesting, as is <a href=\"https://plus.google.com/+RussCox-rsc/posts/iqAiKAwP6Ce\" rel=\"noreferrer\">Russ Cox's comment on error handling</a>, and <a href=\"https://go-talks.appspot.com/github.com/edmontongo/presentations/2018-01/err/err.slide#1\" rel=\"noreferrer\">Nathan Youngman's To Err is Human</a>.</p>\n\n<p>Also interesting is <a href=\"https://commandcenter.blogspot.co.nz/2017/12/error-handling-in-upspin.html\" rel=\"noreferrer\">Upspin's concept of an operational trace</a>, rather than a stack trace.</p>\n"}], "owner": {"reputation": 7606, "user_id": 180253, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/df46030788b7cc95cadb9778a2b9e7dd?s=128&d=identicon&r=PG", "display_name": "TheJediCowboy", "link": "https://stackoverflow.com/users/180253/thejedicowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9744, "favorite_count": 2, "accepted_answer_id": 35977788, "answer_count": 1, "score": 7, "last_activity_date": 1516752197, "creation_date": 1457909121, "question_id": 35976840, "link": "https://stackoverflow.com/questions/35976840/go-error-handling-on-a-rest-api", "title": "Go Error handling on a REST API", "body": "<p>I am very new to go and have deployed a small service with an API endpoint.</p>\n\n<p>I have heard/read that go doesn't use <code>try/catch</code> so I am trying to figure out how I can \"catch\" any problems happening from my service call from my API and make sure that the resource server doesn't go down.</p>\n\n<p>My code for my API looks like the following..</p>\n\n<p>I have a <code>routes.go</code> file with the following</p>\n\n<pre><code>package main\n\nimport (\n    \"net/http\"\n\n    \"github.com/gorilla/mux\"\n)\n\ntype Route struct {\n    Name        string\n    Method      string\n    Pattern     string\n    HandlerFunc http.HandlerFunc\n}\n\ntype Routes []Route\n\nfunc NewRouter() *mux.Router {\n    router := mux.NewRouter().StrictSlash(true)\n    for _, route := range routes {\n        router.\n            Methods(route.Method).\n            Path(route.Pattern).\n            Name(route.Name).\n            Handler(route.HandlerFunc)\n    }\n\n    return router\n}\n\nvar routes = Routes{\n    Route{\n        \"CustomerLocationCreate\",\n        \"POST\",\n        \"/tracking/customer\",\n        CustomerLocationCreate,\n    },\n}\n</code></pre>\n\n<p>I have a <code>handlers.go</code></p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"net/http\"\n    \"io\"\n    \"io/ioutil\"\n)\n\n//curl -H \"Content-Type: application/json\" -d '{\"userId\":\"1234\"}' http://localhost:8181/tracking/customer\nfunc CustomerLocationCreate(w http.ResponseWriter, r *http.Request) {\n    var location CustomerLocation\n    body, err := ioutil.ReadAll(io.LimitReader(r.Body, 1048576))\n    if err != nil {\n        panic(err)\n    }\n    if err := r.Body.Close(); err != nil {\n        panic(err)\n    }\n    if err := json.Unmarshal(body, &amp;location); err != nil {\n        w.Header().Set(\"Content-Type\", \"application/json; charset=UTF-8\")\n        w.WriteHeader(422) // unprocessable entity\n        if err := json.NewEncoder(w).Encode(err); err != nil {\n            panic(err)\n        }\n    }\n\n    c := RepoCreateCustomerLocation(location)\n    w.Header().Set(\"Content-Type\", \"application/json; charset=UTF-8\")\n    w.WriteHeader(http.StatusCreated)\n    if err := json.NewEncoder(w).Encode(c); err != nil {\n        panic(err)\n    }\n\n    HandleCustomerLocationChange(c);\n}\n</code></pre>\n\n<p>and I have a <code>bus.go</code> which has the <code>HandleCustomerLocationChange(...)</code> function.</p>\n\n<pre><code>func HandleCustomerLocationChange(custLoc CustomerLocation) {\n\n    endpoint := og.Getenv(\"RABBIT_ENDPOINT\")\n    conn, err := amqp.Dial(\"amqp://guest:guest@\" + endpoint)\n    failOnError(err, \"Failed to connect to RabbitMQ\")\n    defer conn.Close()\n\n    ch, err := conn.Channel()\n    failOnError(err, \"Failed to open a channel\")\n    defer ch.Close()\n\n    topic := \"locationChange\"\n    err = ch.ExchangeDeclare(\n        topic,   // name\n        \"topic\", // type\n        true,    // durable\n        false,   // auto-deleted\n        false,   // internal\n        false,   // no-wait\n        nil,     // arguments\n    )\n    failOnError(err, \"Failed to declare an exchange\")\n\n    // Create JSON from the instance data.\n    body, _ := json.Marshal(custLoc)\n    // Convert bytes to string.\n\n    err = ch.Publish(\n        topic, // exchange\n        \"\",    // routing key\n        false, // mandatory\n        false, // immediate\n        amqp.Publishing{\n            ContentType: \"text/plain\",\n            Body:        body,\n        })\n    failOnError(err, \"Failed to publish a message\")\n\n    log.Printf(\" [x] Sent %s\", body)\n\n}\n</code></pre>\n\n<p>My question is how should I modify both the <code>HandleCustomerLocationChange(...) function and if necessary</code>CustomerLocationChange(..)` handler to handle errors properly so that if an error occurs, my entire API doesn't go down?</p>\n"}, {"tags": ["input", "go", "stdin"], "answers": [{"tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 0, "last_activity_date": 1457911614, "last_edit_date": 1457911614, "creation_date": 1457909858, "answer_id": 35976961, "question_id": 35976781, "link": "https://stackoverflow.com/questions/35976781/in-go-scan-numbers-from-a-line-using-recursion/35976961#35976961", "title": "In Go, scan numbers from a line using recursion", "body": "<p>For example,</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nvar a []int\n\nfunc read(b int) {\n    if b == 0 {\n        return\n    }\n    var i int\n    _, err := fmt.Scanf(\"%d\", &amp;i)\n    if err != nil {\n        return\n    }\n    a = append(a, i)\n    read(b - 1)\n}\n\nfunc main() {\n    read(4)\n    fmt.Println(a)\n}\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>1 15 16 17&lt;Enter&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1 15 16 17]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "edited": false, "score": 0, "creation_date": 1457910744, "post_id": 35977069, "comment_id": 59608450, "body": "The question says &quot;using recursion&quot; and &quot;I&#39;m trying not to use a for loop.&quot; You used a for loop. You didn&#39;t answer the question."}], "tags": [], "owner": {"reputation": 2400, "user_id": 1103700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/365175c40356861c03385615db1adfdd?s=128&d=identicon&r=PG", "display_name": "WeakPointer", "link": "https://stackoverflow.com/users/1103700/weakpointer"}, "is_accepted": false, "score": -1, "last_activity_date": 1457910662, "creation_date": 1457910662, "answer_id": 35977069, "question_id": 35976781, "link": "https://stackoverflow.com/questions/35976781/in-go-scan-numbers-from-a-line-using-recursion/35977069#35977069", "title": "In Go, scan numbers from a line using recursion", "body": "<p>Not recursive, but just reading integers until stdin is closed or something that can't be converted to an integer is read.</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    var array []int\n    var i int\n    for {\n        _, err := fmt.Scan(&amp;i)\n        if err != nil {\n            break\n        }\n        array = append(array, i)\n        fmt.Println(\"read number\", i, \"from stdin, array \", array)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6057942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb68e4cba9e2c76861f7f3533b004ea?s=128&d=identicon&r=PG&f=1", "display_name": "gilang", "link": "https://stackoverflow.com/users/6057942/gilang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 1, "accepted_answer_id": 35976961, "answer_count": 2, "score": 0, "last_activity_date": 1457911614, "creation_date": 1457908746, "last_edit_date": 1457910680, "question_id": 35976781, "link": "https://stackoverflow.com/questions/35976781/in-go-scan-numbers-from-a-line-using-recursion", "title": "In Go, scan numbers from a line using recursion", "body": "<p>I want to scan a line of integers from stdin into a slice of integers. Each integer is separated by whitespace. Ther would be as many as N integers of user input. I'm trying not to use a for loop. For example,</p>\n\n<p>1 15 16 17</p>\n\n<p>So far, this is my function to perform the task,</p>\n\n<pre><code>var array []int\n\nfunc read(b int) {\n    if b == 0 {\n        return\n    }\n    fmt.Scanf(\"%d\", &amp;array)\n    read(b - 1)\n}\n</code></pre>\n\n<p>The idea is to read from the input, 1 15 16 17, and make it into a slice with value [1 15 16 17]</p>\n\n<p>After compiling, I got the error,</p>\n\n<pre><code>Runtime error\n</code></pre>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1457916838, "creation_date": 1457916838, "answer_id": 35977882, "question_id": 35976721, "link": "https://stackoverflow.com/questions/35976721/expand-package-import-path/35977882#35977882", "title": "Expand package import path", "body": "<p>Perhaps something like:</p>\n\n<p><a href=\"https://golang.org/pkg/path/filepath/#Join\" rel=\"nofollow\">path.Join</a>(<a href=\"https://golang.org/pkg/os/#Getenv\" rel=\"nofollow\">os.Getenv</a>(\"GOPATH\"), \"/my/package/path\")</p>\n"}], "owner": {"reputation": 843, "user_id": 1559886, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/be6180def9a2759f86a174885732ceb8?s=128&d=identicon&r=PG", "display_name": "kvu787", "link": "https://stackoverflow.com/users/1559886/kvu787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457916838, "creation_date": 1457908445, "question_id": 35976721, "link": "https://stackoverflow.com/questions/35976721/expand-package-import-path", "title": "Expand package import path", "body": "<p>Is there a Go standard library function to expand package import paths?</p>\n\n<p>For example, I'd like a function <code>Expand</code> with the following behavior:</p>\n\n<pre><code>Expand(\"path/filepath\")   =&gt; \"/usr/local/go/src/path/filepath\"\nExpand(\"go/types\")        =&gt; \"/usr/local/go/src/go/types\"\nExpand(\"my/package/path\") =&gt; \"/Users/kvu/go/src/my/package/path\"\n</code></pre>\n"}, {"tags": ["pointers", "reflection", "go", "function-pointers"], "comments": [{"owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "edited": false, "score": 4, "creation_date": 1457905206, "post_id": 35976162, "comment_id": 59606720, "body": "Go is not a scripting language, so this is not something you can do &quot;elegantly&quot;. Perhaps if you explained what your use case is, maybe there could be a better solution."}, {"owner": {"reputation": 4263, "user_id": 148736, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/98ce675339d7e7c8269349943d6a0823?s=128&d=identicon&r=PG", "display_name": "Andrew Arrow", "link": "https://stackoverflow.com/users/148736/andrew-arrow"}, "reply_to_user": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "edited": false, "score": 0, "creation_date": 1457905459, "post_id": 35976162, "comment_id": 59606802, "body": "sure this is an ftp server <a href=\"https://github.com/andrewarrow/paradise_ftp\" rel=\"nofollow noreferrer\">github.com/andrewarrow/paradise_ftp</a> and I need to handle 15 or so commands like &quot;USER&quot; and &quot;PASS&quot; and &quot;QUIT&quot; etc. etc. I want each one to call a method like &quot;handleUser&quot; or &quot;handlePass&quot;  and avoid a big if else tree."}], "answers": [{"tags": [], "owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "is_accepted": true, "score": 4, "last_activity_date": 1548253194, "last_edit_date": 1548253194, "creation_date": 1457905832, "answer_id": 35976305, "question_id": 35976162, "link": "https://stackoverflow.com/questions/35976162/how-do-i-elegantly-call-a-method-dynamically-in-golang-without-using-reflection/35976305#35976305", "title": "How do I elegantly call a method dynamically in golang without using reflection?", "body": "<p>From your linked use case, it appears that having a map of strings to functions will work best. Example:</p>\n\n<pre><code>func MakeCommandMap() map[string]func(*Paradise) {\n    m := map[string]func(*Paradise){\n        \"USER\": (*Paradise).HandleUser,\n        \"PASS\": (*Paradise).HandlePass,\n    }\n    // ...\n    return m\n}\n</code></pre>\n\n<p>Calling the functions:</p>\n\n<pre><code>name := \"USER\"\nif fn := m[name]; fn != nil {\n    fn(self) // where self is *Paradise\n}\n</code></pre>\n"}], "owner": {"reputation": 4263, "user_id": 148736, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/98ce675339d7e7c8269349943d6a0823?s=128&d=identicon&r=PG", "display_name": "Andrew Arrow", "link": "https://stackoverflow.com/users/148736/andrew-arrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1179, "favorite_count": 0, "accepted_answer_id": 35976305, "answer_count": 1, "score": 1, "last_activity_date": 1548253194, "creation_date": 1457904918, "last_edit_date": 1503538394, "question_id": 35976162, "link": "https://stackoverflow.com/questions/35976162/how-do-i-elegantly-call-a-method-dynamically-in-golang-without-using-reflection", "title": "How do I elegantly call a method dynamically in golang without using reflection?", "body": "<p>I'm using reflection to do this:</p>\n\n<pre><code>        method_name := CommandMap[command]\n    thing := reflect.ValueOf(self).MethodByName(method_name)\n    thing_s := fmt.Sprintf(\"%s\", thing)\n    if thing_s == \"&lt;invalid reflect.Value&gt;\" {\n        self.writeMessage(550, \"not allowed\")\n    } else {\n        thing.Call([]reflect.Value{})\n    }\n</code></pre>\n\n<p>but there must be a better way. The point of the above code was to get rid of:</p>\n\n<pre><code>if command == \"this\" {\n  runThis()\n} else if command == \"that\" {\n  runThat()\n} etc. etc.\n</code></pre>\n\n<p>I want to not have a big if else tree. This is an ftp server <a href=\"http://github.com/andrewarrow/paradise_ftp\" rel=\"nofollow\">http://github.com/andrewarrow/paradise_ftp</a> and I need to handle 15 or so commands like \"USER\" and \"PASS\" and \"QUIT\" etc. etc. I want each one to call a method like \"handleUser\" or \"handlePass\". But using reflection is a bad idea. It's too slow.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1457901551, "post_id": 35975456, "comment_id": 59605411, "body": "Does the posted goal not work as you want?"}, {"owner": {"reputation": 227, "user_id": 5956807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/75aeaea59178a778b256c7435a652fd5?s=128&d=identicon&r=PG", "display_name": "XXXX", "link": "https://stackoverflow.com/users/5956807/xxxx"}, "edited": false, "score": 0, "creation_date": 1457901694, "post_id": 35975456, "comment_id": 59605474, "body": "What is the goal? Give an example."}, {"owner": {"reputation": 141, "user_id": 6028424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2067ad422ce08a09803f7a0d63fab4?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/6028424/coder"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1457902090, "post_id": 35975456, "comment_id": 59605622, "body": "@MuffinTop I am not sure if it does what I want. I&#39;m also not sure if there is a standard way of doing this. I imagine that this is a very common thing so I was surprised I couldn&#39;t find anything by googling."}, {"owner": {"reputation": 141, "user_id": 6028424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2067ad422ce08a09803f7a0d63fab4?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/6028424/coder"}, "reply_to_user": {"reputation": 227, "user_id": 5956807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/75aeaea59178a778b256c7435a652fd5?s=128&d=identicon&r=PG", "display_name": "XXXX", "link": "https://stackoverflow.com/users/5956807/xxxx"}, "edited": false, "score": 0, "creation_date": 1457902340, "post_id": 35975456, "comment_id": 59605705, "body": "@XXXX I added an example, although I&#39;m not sure what you&#39;re looking for."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 6028424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2067ad422ce08a09803f7a0d63fab4?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/6028424/coder"}, "edited": false, "score": 0, "creation_date": 1457902416, "post_id": 35975680, "comment_id": 59605728, "body": "Thank you, does that mean in my attempted solution <code>[]byte(s)</code> returns a slice?"}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "reply_to_user": {"reputation": 141, "user_id": 6028424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2067ad422ce08a09803f7a0d63fab4?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/6028424/coder"}, "edited": false, "score": 0, "creation_date": 1457902494, "post_id": 35975680, "comment_id": 59605757, "body": "@Coder yes <code>[]byte(s)</code> returns a byte slice where each byte is one character from the string <code>s</code>."}, {"owner": {"reputation": 303, "user_id": 2977136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275c4df9289839b46d76540fedc621ad?s=128&d=identicon&r=PG&f=1", "display_name": "Abex", "link": "https://stackoverflow.com/users/2977136/abex"}, "edited": false, "score": 0, "creation_date": 1457902631, "post_id": 35975680, "comment_id": 59605801, "body": "I Think it does, but I am not sure. Either way this shows very explicitly what you are trying to do, making it easier for future maintainers."}, {"owner": {"reputation": 361, "user_id": 1289368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ea6c6a3d4e2b929092e787d86ebd49?s=128&d=identicon&r=PG", "display_name": "Gerry Gleason", "link": "https://stackoverflow.com/users/1289368/gerry-gleason"}, "edited": false, "score": 0, "creation_date": 1534969053, "post_id": 35975680, "comment_id": 90899393, "body": "The byte slice isn&#39;t exactly &quot;each character&quot;, if there are multibyte characters in the string (runes ?). You can iterate over these insteade. It is &quot;each byte&quot; of the string."}], "tags": [], "owner": {"reputation": 303, "user_id": 2977136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275c4df9289839b46d76540fedc621ad?s=128&d=identicon&r=PG&f=1", "display_name": "Abex", "link": "https://stackoverflow.com/users/2977136/abex"}, "is_accepted": true, "score": 2, "last_activity_date": 1457902240, "creation_date": 1457902240, "answer_id": 35975680, "question_id": 35975456, "link": "https://stackoverflow.com/questions/35975456/how-should-i-convert-a-slice-to-a-string-in-golang/35975680#35975680", "title": "How should I convert a slice to a string in golang?", "body": "<p>To ensure that Go doesn't keep the underlying string in memory you will have to explicitly copy it to a new location:</p>\n\n<pre><code>func unslice(old string) string {\n    new := make([]byte,len(old))\n    copy(new,old)\n    return string(old)\n}\n\nSmallString := unslice(BigString[0:7])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 6028424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2067ad422ce08a09803f7a0d63fab4?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/6028424/coder"}, "edited": false, "score": 0, "creation_date": 1457988088, "post_id": 35993927, "comment_id": 59647834, "body": "Nice! That makes sense. Very thorough answer. I had not though about profiling thiss"}, {"owner": {"reputation": 2400, "user_id": 1103700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/365175c40356861c03385615db1adfdd?s=128&d=identicon&r=PG", "display_name": "WeakPointer", "link": "https://stackoverflow.com/users/1103700/weakpointer"}, "reply_to_user": {"reputation": 141, "user_id": 6028424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2067ad422ce08a09803f7a0d63fab4?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/6028424/coder"}, "edited": false, "score": 0, "creation_date": 1458239264, "post_id": 35993927, "comment_id": 59783814, "body": "So many things to admire about go.  The easy cpu and memory profiling are one of those.  I&#39;m still trying to streamline my own profiling setup so it feels easy to profile things that I care about.  I see others who are better at it and seem to take it for granted.  Still trying to get to that level of comfort myself so the question here seemed perfect for a little experimentation."}], "tags": [], "owner": {"reputation": 2400, "user_id": 1103700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/365175c40356861c03385615db1adfdd?s=128&d=identicon&r=PG", "display_name": "WeakPointer", "link": "https://stackoverflow.com/users/1103700/weakpointer"}, "is_accepted": false, "score": 3, "last_activity_date": 1457975626, "creation_date": 1457975626, "answer_id": 35993927, "question_id": 35975456, "link": "https://stackoverflow.com/questions/35975456/how-should-i-convert-a-slice-to-a-string-in-golang/35993927#35993927", "title": "How should I convert a slice to a string in golang?", "body": "<p>Just as some further information.  Some benchmark code and memory profiling shows that as of go 1.5.3, both methods allocate the same amount of memory from the heap, i.e. a new copy is made either way.  In building a string from a byte slice, the compiler calls a routine that makes a unique copy of the bytes - since strings are immutable and byte slices are not.  </p>\n\n<pre><code>$ go tool pprof -alloc_space so002.test cprof0\nEntering interactive mode (type \"help\" for commands)\n(pprof) list copy\nTotal: 9.66MB\n    9.62MB     9.62MB (flat, cum) 99.55% of Total\n         .          .     15:\n         .          .     16:var global string\n         .          .     17:\n         .          .     18:func benchmarkcopy(b *testing.B, c int) {\n         .          .     19:   big := \"This is a long string\"\n         .       240B     20:   parts := strings.Split(big, \" \")\n         .          .     21:   old := parts[0]\n         .          .     22:   jlimit := 100\n         .          .     23:   for i := 0; i &lt; b.N; i++ {\n         .          .     24:       for j := 0; j &lt; jlimit; j++ {\n    3.21MB     3.21MB     25:           global = string([]byte(old))\n         .          .     26:       }\n         .          .     27:       for j := 0; j &lt; jlimit; j++ {\n         .          .     28:           b := []byte(old)\n    3.21MB     3.21MB     29:           global = string(b)\n         .          .     30:       }\n         .          .     31:       for j := 0; j &lt; jlimit; j++ {\n    3.21MB     3.21MB     32:           new := make([]byte, len(old))\n         .          .     33:           copy(new, old)\n         .          .     34:           global = string(old)\n         .          .     35:       }\n         .          .     36:   }\n         .          .     37:}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 6028424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2067ad422ce08a09803f7a0d63fab4?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/6028424/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 35975680, "answer_count": 2, "score": 2, "last_activity_date": 1457975626, "creation_date": 1457901160, "last_edit_date": 1457902293, "question_id": 35975456, "link": "https://stackoverflow.com/questions/35975456/how-should-i-convert-a-slice-to-a-string-in-golang", "title": "How should I convert a slice to a string in golang?", "body": "<p>I'm using strings.Split to split a string.</p>\n\n<p>I would like my program to retain one of the elements of the array and release the underlying array.</p>\n\n<p>Unfortunately I can't figure out how to convert a slice of a string into a string that doesn't refer to the underlying string.</p>\n\n<p>Am I supposed to do something like this:</p>\n\n<pre><code>func unslice(s string) (string) {\n  return string([]byte(s))\n}\n</code></pre>\n\n<p>The background is:</p>\n\n<ol>\n<li>the underlying string is very large</li>\n<li>the slice I want to retain is very small</li>\n<li>the slice I want to retain will be retained for a long time</li>\n<li>the program will run for a long time - weeks or more</li>\n<li>during the lifetime of the program it will split many of these strings (millions)</li>\n</ol>\n\n<p>Here is an example in response to the comment.</p>\n\n<pre><code>func takesBigStringOften(big string) {\n    parts := strings.Split(big, \" \")\n\n    saveTinyStringForALongTime(parts[0])\n}\n</code></pre>\n"}, {"tags": ["javascript", "go"], "comments": [{"owner": {"reputation": 2722, "user_id": 4740606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWt5W.jpg?s=128&g=1", "display_name": "Snowman", "link": "https://stackoverflow.com/users/4740606/snowman"}, "edited": false, "score": 0, "creation_date": 1457901798, "post_id": 35975188, "comment_id": 59605525, "body": "I think you need to use the json package. Check out this article <a href=\"https://blog.golang.org/json-and-go\" rel=\"nofollow noreferrer\">blog.golang.org/json-and-go</a>"}, {"owner": {"reputation": 2401, "user_id": 1797161, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/538748ff6e44c656974e3eda5602bc93?s=128&d=identicon&r=PG", "display_name": "Federico", "link": "https://stackoverflow.com/users/1797161/federico"}, "reply_to_user": {"reputation": 2722, "user_id": 4740606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWt5W.jpg?s=128&g=1", "display_name": "Snowman", "link": "https://stackoverflow.com/users/4740606/snowman"}, "edited": false, "score": 0, "creation_date": 1457909188, "post_id": 35975188, "comment_id": 59607956, "body": "@Snowman The json package helps with encoding and decoding of json data. What I want is to retrieve binary data from an http request. I don&#39;t see how that package is going to help in achieving that."}, {"owner": {"reputation": 2722, "user_id": 4740606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWt5W.jpg?s=128&g=1", "display_name": "Snowman", "link": "https://stackoverflow.com/users/4740606/snowman"}, "edited": false, "score": 0, "creation_date": 1457911864, "post_id": 35975188, "comment_id": 59608771, "body": "oh. then I don&#39;t get the example JS. It looks as if you&#39;re sending a stringify&#39;d object... only way I ever deal with json objects is with package encoding/json."}], "answers": [{"comments": [{"owner": {"reputation": 2401, "user_id": 1797161, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/538748ff6e44c656974e3eda5602bc93?s=128&d=identicon&r=PG", "display_name": "Federico", "link": "https://stackoverflow.com/users/1797161/federico"}, "edited": false, "score": 0, "creation_date": 1457925680, "post_id": 35978214, "comment_id": 59612018, "body": "Sorry, I forgot to mention that I did that in my original code. I posted it here without the error checking to simplify it."}, {"owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "reply_to_user": {"reputation": 2401, "user_id": 1797161, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/538748ff6e44c656974e3eda5602bc93?s=128&d=identicon&r=PG", "display_name": "Federico", "link": "https://stackoverflow.com/users/1797161/federico"}, "edited": false, "score": 0, "creation_date": 1457930283, "post_id": 35978214, "comment_id": 59613154, "body": "Oh ok. Can you record and add the raw http request you&#39;re getting? See <a href=\"https://golang.org/pkg/net/http/httputil/#DumpRequest\" rel=\"nofollow noreferrer\">dump request</a> in httputil"}], "tags": [], "owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1457919623, "creation_date": 1457919623, "answer_id": 35978214, "question_id": 35975188, "link": "https://stackoverflow.com/questions/35975188/parse-javascript-blob-in-golang/35978214#35978214", "title": "Parse javascript Blob in golang", "body": "<pre><code>r.ParseMultipartForm(500)\n</code></pre>\n\n<p>Perhaps an error is being returned here? Try capturing the error:</p>\n\n<pre><code>if err := r.ParseMultipartForm(500); err != nil {\n    http.Error(w, err.Error(), http.StatusInternalServerError)\n}\n</code></pre>\n\n<p>Also, consider raising the 500 byte memory limit as larger blobs will be written to temporary files.</p>\n"}, {"comments": [{"owner": {"reputation": 2401, "user_id": 1797161, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/538748ff6e44c656974e3eda5602bc93?s=128&d=identicon&r=PG", "display_name": "Federico", "link": "https://stackoverflow.com/users/1797161/federico"}, "edited": false, "score": 0, "creation_date": 1457926014, "post_id": 35978524, "comment_id": 59612120, "body": "Maybe, but before that I must be able to actually retrieve that string. My problem is that I don&#39;t know where go stores the data that is not sent as a key-value pair, which I believe is my case. In short, Request.Form returns an empty value when I sent a blob."}], "tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": false, "score": 0, "last_activity_date": 1457921926, "creation_date": 1457921926, "answer_id": 35978524, "question_id": 35975188, "link": "https://stackoverflow.com/questions/35975188/parse-javascript-blob-in-golang/35978524#35978524", "title": "Parse javascript Blob in golang", "body": "<p>I presume Javascript's Blob is a hex string which can eventually be converted to <code>[]byte</code>, which is a standard type for JSON in Go.</p>\n\n<pre><code>// Once you get the blob\nblobString := `7b22666f6f223a205b22626172222c202262617a222c2039395d7d`\n\nb, _ := hex.DecodeString(blobString)\njson := string(b)\nfmt.Println(json) // prints out {\"foo\": [\"bar\", \"baz\", 99]}\n</code></pre>\n\n<p>You might want to look into <code>encoding/hex</code> and <code>encoding/binary</code> packages to decode your blob acquired from Javascript to type <code>[]byte</code> in Go, if it's not already.</p>\n"}, {"tags": [], "owner": {"reputation": 7284, "user_id": 4374109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sHeIb.png?s=128&g=1", "display_name": "Uvelichitel", "link": "https://stackoverflow.com/users/4374109/uvelichitel"}, "is_accepted": false, "score": 1, "last_activity_date": 1457957118, "creation_date": 1457957118, "answer_id": 35987088, "question_id": 35975188, "link": "https://stackoverflow.com/questions/35975188/parse-javascript-blob-in-golang/35987088#35987088", "title": "Parse javascript Blob in golang", "body": "<p>I think javascript treats blob as file, so your can look it in   <code>r.MultipartForm.File</code>, get file header, open it, read, decode and parse.\nTry for example</p>\n\n<pre><code>r.ParseMultipartForm(500) \nfmt.Fprintf(w, \"This is the value of %+v\", *r.MultipartForm.File)\n}\n</code></pre>\n"}], "owner": {"reputation": 2401, "user_id": 1797161, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/538748ff6e44c656974e3eda5602bc93?s=128&d=identicon&r=PG", "display_name": "Federico", "link": "https://stackoverflow.com/users/1797161/federico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2009, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1457957118, "creation_date": 1457899665, "question_id": 35975188, "link": "https://stackoverflow.com/questions/35975188/parse-javascript-blob-in-golang", "title": "Parse javascript Blob in golang", "body": "<p>In Go, you can read a form sent using Ajax and <a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/Sending_forms_through_JavaScript#Using_XMLHttpRequest_and_the_FormData_object\" rel=\"nofollow\">FormData</a> using <code>r.ParseMultipartForm()</code>, which populates the <code>Form</code> map with form request data. </p>\n\n<pre><code>func form(w http.ResponseWriter, r *http.Request) {\n    r.ParseMultipartForm(500) //\n    fmt.Fprintf(w, \"This is the value of %+v\", r.Form)\n}\n</code></pre>\n\n<p>However, I haven't found a method to parse Blobs. The above code returns an empty map whenever instead of sending a form, I send a Blob. That is, when I send this:</p>\n\n<pre><code>var blob = new Blob([JSON.stringify(someJavascriptObj)]);\n//XHR initialization, etc. etc.\nxhr.send(blob);\n</code></pre>\n\n<p>the Go code above doesn't work. Now, when I send this:</p>\n\n<pre><code>var form = new FormData(document.querySelector(\"form\"));\n//...\nxhr.send(form);\n</code></pre>\n\n<p>I can read form data without problems. </p>\n"}, {"tags": ["go", "yaml", "buildpack", "cloud-foundry"], "comments": [{"owner": {"reputation": 147, "user_id": 1470618, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6473d95fecd431089c0aa84ccde946f2?s=128&d=identicon&r=PG", "display_name": "user1470618", "link": "https://stackoverflow.com/users/1470618/user1470618"}, "edited": false, "score": 0, "creation_date": 1457894385, "post_id": 35973890, "comment_id": 59602700, "body": "I also run it with -c &quot;go run weight.go&quot; and it doesn&#39;t work."}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1457895940, "post_id": 35973890, "comment_id": 59603374, "body": "How are you running this locally? You would also typically have your Go package at the root of your repository, not a level deeper."}, {"owner": {"reputation": 147, "user_id": 1470618, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6473d95fecd431089c0aa84ccde946f2?s=128&d=identicon&r=PG", "display_name": "user1470618", "link": "https://stackoverflow.com/users/1470618/user1470618"}, "reply_to_user": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1457913452, "post_id": 35973890, "comment_id": 59609157, "body": "I fixed the project structure toe have it build and run, still facing the port problem."}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 1, "creation_date": 1457914250, "post_id": 35973890, "comment_id": 59609360, "body": "Just listen on &quot;:&quot; + &quot;PORT&quot;, not localhost:PORT."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 1470618, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6473d95fecd431089c0aa84ccde946f2?s=128&d=identicon&r=PG", "display_name": "user1470618", "link": "https://stackoverflow.com/users/1470618/user1470618"}, "edited": false, "score": 0, "creation_date": 1457909227, "post_id": 35974849, "comment_id": 59607975, "body": "I have actually changed my Source ( for testing ) to &lt;code&gt;\tfmt.Println(&quot;Hi&quot;) \ttime.Sleep(1*time.Hour)&lt;/code&gt; and it still doesn&#39;t work. I also added --no-route to the push command."}, {"owner": {"reputation": 147, "user_id": 1470618, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6473d95fecd431089c0aa84ccde946f2?s=128&d=identicon&r=PG", "display_name": "user1470618", "link": "https://stackoverflow.com/users/1470618/user1470618"}, "edited": false, "score": 0, "creation_date": 1457913304, "post_id": 35974849, "comment_id": 59609121, "body": "So I figured out the first part where the command was in the bin directory, switched back to listening to the port and it still doesn&#39;t work. I am using the PORT env."}, {"owner": {"reputation": 147, "user_id": 1470618, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6473d95fecd431089c0aa84ccde946f2?s=128&d=identicon&r=PG", "display_name": "user1470618", "link": "https://stackoverflow.com/users/1470618/user1470618"}, "reply_to_user": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1457913620, "post_id": 35974849, "comment_id": 59609202, "body": "@elithrar just uploaded."}], "tags": [], "owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "is_accepted": true, "score": 2, "last_activity_date": 1457897921, "creation_date": 1457897921, "answer_id": 35974849, "question_id": 35973890, "link": "https://stackoverflow.com/questions/35973890/my-go-server-fails-to-start-in-cloud-foundry/35974849#35974849", "title": "My Go server fails to start in cloud foundry", "body": "<p>From Cloud Foundry docs on troubleshooting:</p>\n\n<blockquote>\n  <p><strong>Make sure your application code uses the <code>PORT</code> environment variable.</strong> Your application may be failing because it is listening on the wrong port. Instead of hard coding the port on which your application listens, use the <code>PORT</code> environment variable. [<a href=\"https://docs.cloudfoundry.org/devguide/deploy-apps/troubleshoot-app-health.html#start\" rel=\"nofollow\">Source</a>]</p>\n</blockquote>\n\n<p>From Cloud Foundry docs on environment variables:</p>\n\n<blockquote>\n  <p>The port on which the application should listen for requests. The Cloud Foundry runtime allocates a port dynamically for each instance of the application, so code that obtains or uses the application port should refer to it via the PORT environment variable. [<a href=\"https://docs.run.pivotal.io/devguide/deploy-apps/environment-variable.html#PORT\" rel=\"nofollow\">Source</a>]</p>\n</blockquote>\n\n<p>So rather than your app being hardcoded to listen on port 9000, it should listen on the port specified by the <code>PORT</code> environment variable, and can then default to 9000 if that environment variable is not set.</p>\n"}], "owner": {"reputation": 147, "user_id": 1470618, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6473d95fecd431089c0aa84ccde946f2?s=128&d=identicon&r=PG", "display_name": "user1470618", "link": "https://stackoverflow.com/users/1470618/user1470618"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 35974849, "answer_count": 1, "score": 0, "last_activity_date": 1457913921, "creation_date": 1457892826, "last_edit_date": 1457913921, "question_id": 35973890, "link": "https://stackoverflow.com/questions/35973890/my-go-server-fails-to-start-in-cloud-foundry", "title": "My Go server fails to start in cloud foundry", "body": "<p>I have a simple GO server that I am trying to push to cloud foundry on Bosh lite ( Vagrant + Virtual box.)</p>\n\n<p>Here is the source code setup from my go application:</p>\n\n<ul>\n<li><p>~/workspace/src/github.com/me/ ( parent directory)</p>\n\n<p>-Godeps</p>\n\n<p>-weight\nweight.go &lt;-- main file. </p>\n\n<p>manifest.yml</p>\n\n<p>Procfile</p></li>\n</ul>\n\n<p>My weight.go is a simple server that listens on 9000.</p>\n\n<p>1) manifest.yml looks like this.</p>\n\n<pre><code>applications:\n- name: weight\n  memory: 128MB\n  instances: 1\n</code></pre>\n\n<p>2 ) Procfile looks like this.</p>\n\n<pre><code>worker: bin/weight\n</code></pre>\n\n<p>3 ) I use the default buildpack.</p>\n\n<p>4 ) When I push my app with cf push weight -c \"./bin/weight;sleep 1d\" I get:</p>\n\n<pre><code>a-424e-b509-6df11fb32cc7 ({\"state\"=&gt;\"STOPPED\"})\n2016-03-13T11:02:45.70-0700 [DEA/0]      OUT Got staging request for app with id 16d3795a-8cda-424e-b509-6df11fb32cc7\n2016-03-13T11:02:46.84-0700 [API/0]      OUT Updated app with guid 16d3795a-8cda-424e-b509-6df11fb32cc7 ({\"state\"=&gt;\"STARTED\"})\n2016-03-13T11:02:46.89-0700 [STG/0]      OUT -----&gt; Downloaded app package (12K)\n2016-03-13T11:02:48.76-0700 [STG/0]      OUT -----&gt; Downloaded app buildpack cache (78M)\n2016-03-13T11:02:48.82-0700 [STG/0]      ERR Cloning into '/tmp/buildpacks/go-buildpack'...\n2016-03-13T11:03:05.66-0700 [STG/0]      OUT Submodule 'compile-extensions' (https://github.com/cloudfoundry/compile-extensions.git) registered for path 'compile-extensions'\n2016-03-13T11:03:05.68-0700 [STG/0]      ERR Cloning into 'compile-extensions'...\n2016-03-13T11:03:07.59-0700 [STG/0]      OUT Submodule path 'compile-extensions': checked out '26a578c06a62c763205833561fec1c5c6d34deb6'\n2016-03-13T11:03:07.61-0700 [STG/0]      OUT -------&gt; Buildpack version 1.7.3\n2016-03-13T11:03:09.81-0700 [STG/0]      OUT https://pivotal-buildpacks.s3.amazonaws.com/concourse-binaries/godep/godep-v55-linux-x64.tgz\n2016-03-13T11:03:09.88-0700 [STG/0]      OUT -----&gt; Checking Godeps/Godeps.json file.\n2016-03-13T11:03:09.92-0700 [STG/0]      OUT -----&gt; Using go1.5.3\n2016-03-13T11:03:09.92-0700 [STG/0]      OUT -----&gt; Running: godep go install -tags cloudfoundry .\n2016-03-13T11:03:11.19-0700 [STG/0]      OUT -----&gt; Uploading droplet (2.0M)\n2016-03-13T11:03:25.11-0700 [DEA/0]      OUT Starting app instance (index 0) with guid 16d3795a-8cda-424e-b509-6df11fb32cc7\n2016-03-13T11:03:34.93-0700 [DEA/0]      OUT Removing crash for app with id 16d3795a-8cda-424e-b509-6df11fb32cc7\n2016-03-13T11:03:34.93-0700 [DEA/0]      OUT Stopping app instance (index 0) with guid 16d3795a-8cda-424e-b509-6df11fb32cc7\n2016-03-13T11:03:34.93-0700 [DEA/0]      OUT Stopped app instance (index 0) with guid 16d3795a-8cda-424e-b509-6df11fb32cc7\n2016-03-13T11:03:56.81-0700 [DEA/0]      OUT Starting app instance (index 0) with guid 16d3795a-8cda-424e-b509-6df11fb32cc7\n**2016-03-13T11:03:57.79-0700 [DEA/0]      ERR Instance (index 0) failed to start accepting connections**\n2016-03-13T11:03:57.80-0700 [API/0]      OUT App instance exited with guid 16d3795a-8cda-424e-b509-6df11fb32cc7 payload: {\"cc_partition\"=&gt;\"default\", \"droplet\"=&gt;\"16d3795a-8cda-424e-b509-6df11fb32cc7\", \"version\"=&gt;\"2eeebbf8-e84e-412a-aeba-2adc0cffea6b\", \"instance\"=&gt;\"910eba711c6e414bb7c6324565d0a9af\", \"index\"=&gt;0, \"reason\"=&gt;\"CRASHED\", \"exit_status\"=&gt;127, \"exit_description\"=&gt;\"failed to accept connections within health check timeout\", \"crash_timestamp\"=&gt;1457892237}\n</code></pre>\n\n<p>I have tried setting </p>\n\n<pre><code>cf set-env weight PORT 9000\n</code></pre>\n\n<p>No success,\nAm I doing something funky with the manifest and yaml ?</p>\n\n<p>The weight.go runs locally.</p>\n\n<p>Code :</p>\n\n<pre><code>func main (){\n    http.HandleFunc(\"/weight\", weightHandler)\n    err:=http.ListenAndServe(\"localhost:\"+getPort(), nil)\n    if err != nil {\n        fmt.Println(\"got an err \")\n        log.Fatalln(err)\n    }else{\n        fmt.Println(\"Apparently it works ?\")\n    }\n    //fmt.Println(\"Hi\")\n    //time.Sleep(1*time.Hour)\n}\n\nfunc getPort() string {\n    var port string\n    if port = os.Getenv(\"PORT\"); len(port) == 0 {\n        fmt.Println(\"Didn't Found it\")\n        fmt.Println(port)\n        port = DEFAULT_PORT\n    }else{\n        fmt.Println(\"Gotim\")\n        fmt.Println(port)\n    }\n    return port\n}\n</code></pre>\n\n<p>I do get the Log for the random PORT CF assigns, still stuck at </p>\n\n<pre><code>2016-03-13T16:58:40.90-0700 [API/0]      OUT App instance exited with guid e5d417bd-c38d-4239-aa61-e9ca67fce79a payload: {\"cc_partition\"=&gt;\"default\", \"droplet\"=&gt;\"e5d417bd-c38d-4239-aa61-e9ca67fce79a\", \"version\"=&gt;\"8d7e80b3-69d5-4c83-9d37-1159d5deeba8\", \"instance\"=&gt;\"14223d325c204406b87a131c065c16cc\", \"index\"=&gt;0, \"reason\"=&gt;\"CRASHED\", \"exit_status\"=&gt;-1, \"exit_description\"=&gt;\"failed to accept connections within health check timeout\", \"crash_timestamp\"=&gt;1457913520}\n</code></pre>\n\n<p><strong>*FIXED IT : The problem was listening on localhost, I didn't specify the IP and I was good to go *</strong></p>\n"}, {"tags": ["ssl", "nginx", "go", "https", "self-signed"], "comments": [{"owner": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 0, "creation_date": 1457888441, "post_id": 35972742, "comment_id": 59600360, "body": "According to the message, it seems you&#39;ll have to go the CA cert route to make it work."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 1457633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc1714f1203795da00cb33b7a0bf81a5?s=128&d=identicon&r=PG", "display_name": "LAMonday", "link": "https://stackoverflow.com/users/1457633/lamonday"}, "edited": false, "score": 0, "creation_date": 1457999778, "post_id": 35973274, "comment_id": 59653122, "body": "I was able to get everything working cleanly by generating a second cert that I will use as my CA cert. I have edited my question to include some other details. Thank you."}], "tags": [], "owner": {"reputation": 20703, "user_id": 2805033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TasHL.jpg?s=128&g=1", "display_name": "Ben Darnell", "link": "https://stackoverflow.com/users/2805033/ben-darnell"}, "is_accepted": true, "score": 3, "last_activity_date": 1457889647, "creation_date": 1457889647, "answer_id": 35973274, "question_id": 35972742, "link": "https://stackoverflow.com/questions/35972742/using-self-signed-ssl-certificates/35973274#35973274", "title": "Using self signed SSL Certificates", "body": "<p>That error message is coming from go's <a href=\"https://github.com/golang/go/blob/release-branch.go1.6/src/crypto/x509/x509.go#L638\" rel=\"nofollow\">CheckSignatureFrom</a> method. It looks like it requires the CA flag in <code>basicConstraints</code> to be set to true, and if the <code>keyUsage</code> field is present (it is in the example you linked but it's not in most instructions I've seen for using self-signed certs) it must include the <code>keyCertSign</code> value.</p>\n\n<p>When I've faced similar problems I've created a CA that is separate from the server certificate. It's a little more work, but it's not a \"hack\"; if anything setting up the self-signed cert to be properly recognized as its own CA is the hackier solution.</p>\n"}], "owner": {"reputation": 25, "user_id": 1457633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc1714f1203795da00cb33b7a0bf81a5?s=128&d=identicon&r=PG", "display_name": "LAMonday", "link": "https://stackoverflow.com/users/1457633/lamonday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1116, "favorite_count": 0, "accepted_answer_id": 35973274, "answer_count": 1, "score": 0, "last_activity_date": 1457999709, "creation_date": 1457886636, "last_edit_date": 1457999709, "question_id": 35972742, "link": "https://stackoverflow.com/questions/35972742/using-self-signed-ssl-certificates", "title": "Using self signed SSL Certificates", "body": "<p>I am trying to use this certificate with a connection between an InfluxDB rest endpoint that is behind an nginx reverse-proxy and my simple client written in GoLang.</p>\n\n<p>I started using SSL Certificates generated with openssl using the tutorial found at <a href=\"http://apetec.com/support/GenerateSAN-CSR.htm\" rel=\"nofollow\">this link</a> which runs me through creating and self-singing a certificate.</p>\n\n<p>But I get this error every time I try to make this connection:</p>\n\n<pre><code>x509: certificate signed by unknown authority (possibly because of \"x509: invalid signature: parent certificate cannot sign this kind of certificate\" while trying to verify candidate authority certificate \"&lt;My Certificate Name&gt;\")\n</code></pre>\n\n<p>I have yet to find a way to get this resolved, but I'll show what I can see as relevant:</p>\n\n<p>As far as I can tell, the nginx rules for InfluxDB were fairly easy to write and ended up looking like this:</p>\n\n<pre><code># InfluxDB\nserver {\n    ssl                   on;\n    ssl_protocols         TLSV1.2 TLSV1.1 TLSV1;\n    ssl_certificate       /etc/nginx/server.crt;\n    ssl_certificate_key  /etc/nginx/server.key;\n    listen                8086;\n\n    access_log            /var/log/nginx/influxdb.access.log;\n    error_log             /var/log/nginx/influxdb.error.log;\n\n\n    location / {\n      include /etc/nginx/conf.d/options.conf.inc;\n      include /etc/nginx/conf.d/auth.conf.inc;\n      proxy_pass http://127.0.0.1:8087;\n    }\n  }\n</code></pre>\n\n<p>Where options.conf.inc is: </p>\n\n<pre><code>  if ($request_method = OPTIONS) {\n    add_header Access-Control-Allow-Origin $served_at;\n    add_header Access-Control-Allow-Methods \"GET, OPTIONS\";\n    add_header Access-Control-Allow-Headers \"Authorization\";\n    add_header Access-Control-Allow-Credentials \"true\";\n    add_header Content-Length 0;\n    add_header Content-Type text/plain;\n    return 200;\n  }\n</code></pre>\n\n<p>Where the auto.conf.inc is:</p>\n\n<pre><code>    add_header Access-Control-Allow-Headers \"Authorization\";\n    add_header Access-Control-Allow-Credentials \"true\";\n    auth_basic \"Restricted\";\n    auth_basic_user_file &lt;pathTo&gt;.htpasswd;\n    error_page 401 /401.html;\n</code></pre>\n\n<p>My golang client looks like this:</p>\n\n<pre><code>func main() {\nflag.Parse()\n// Load client cert\ncert, err := tls.LoadX509KeyPair(certFile, keyFile)\nif err != nil {\n    log.Fatal(err)\n}\n// Load CA cert\ncaCert, err := ioutil.ReadFile(caFile)\nif err != nil {\n    log.Fatal(err)\n}\ncaCertPool := x509.NewCertPool()\ncaCertPool.AppendCertsFromPEM(caCert)\n// Setup HTTPS client\ntlsConfig := &amp;tls.Config{\n    Certificates: []tls.Certificate{cert},\n    RootCAs:      caCertPool,\n    //      InsecureSkipVerify: true,\n}\n//tlsConfig.BuildNameToCertificate()\ntransport := &amp;http.Transport{TLSClientConfig: tlsConfig}\nclient := &amp;http.Client{Transport: transport}\n// Do GET something\nresp, err := client.Get(\"https://fillerBasicAuthCredentials:password!1@192.168.223.128:8086/query?q=show+databases\")\nif err != nil {\n    log.Fatal(err)\n}\ndefer resp.Body.Close()\n// Dump response\ndata, err := ioutil.ReadAll(resp.Body)\nif err != nil {\n    log.Fatal(err)\n}\nlog.Println(string(data))\n}\n</code></pre>\n\n<p>As you can see in my golang code, is that I have played with the <code>InsecureSkipVerify</code> flag on the tlsConfig object. Setting this to true makes everything work, but seems inherently bad to do since it defeats a lot of the point of using the cert in the first place.</p>\n\n<p>The options I have left, it seems, is to generate a CA cert and use THAT to sign my regular cert, but that also seems like more of a hack than I should be needing to do.</p>\n\n<p><strong>EDIT (Solution):</strong></p>\n\n<p>After exploring creating my own CA cert to sign these with I was able to get everything working. Now I have a CA cert that I will use to sign my other certs, and I will be installing this CA cert on the boxes so they know it is a trusted cert.</p>\n\n<p>Pieces that were helpful in how I solved this:</p>\n\n<p>I am using an open source influxdb client that I was trying to avoid using. It currently uses golang's <code>net/http</code> package, and not the <code>crypto</code> which means I can't specify my CA certs in-code like my example does. I had to install the CA cert onto my box so it was recognized properly. An article I found helpful on this topic is [this one]<a href=\"https://www.happyassassin.net/2015/01/14/trusting-additional-cas-in-fedora-rhel-centos-dont-append-to-etcpkitlscertsca-bundle-crt-or-etcpkitlscert-pem/\" rel=\"nofollow\">https://www.happyassassin.net/2015/01/14/trusting-additional-cas-in-fedora-rhel-centos-dont-append-to-etcpkitlscertsca-bundle-crt-or-etcpkitlscert-pem/</a></p>\n"}, {"tags": ["indexing", "go", "int"], "comments": [{"owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "edited": false, "score": 0, "creation_date": 1457890457, "post_id": 35972561, "comment_id": 59601141, "body": "Is indexing an <code>int</code> a requirement? Because you can reverse an <code>int</code> without indexing and it is more straight forward in my opinion."}, {"owner": {"reputation": 227, "user_id": 5956807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/75aeaea59178a778b256c7435a652fd5?s=128&d=identicon&r=PG", "display_name": "XXXX", "link": "https://stackoverflow.com/users/5956807/xxxx"}, "reply_to_user": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "edited": false, "score": 0, "creation_date": 1457891327, "post_id": 35972561, "comment_id": 59601485, "body": "It is not. Please share your non-complicated way"}], "answers": [{"comments": [{"owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "edited": false, "score": 0, "creation_date": 1457904533, "post_id": 35973757, "comment_id": 59606513, "body": "Is there a reason not to just convert the integer to a string and then reverse it?  I came up with a different solution, but as a newbie to Go figured I might have missed something compared to how you did it."}, {"owner": {"reputation": 2400, "user_id": 1103700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/365175c40356861c03385615db1adfdd?s=128&d=identicon&r=PG", "display_name": "WeakPointer", "link": "https://stackoverflow.com/users/1103700/weakpointer"}, "edited": false, "score": 1, "creation_date": 1457911758, "post_id": 35973757, "comment_id": 59608742, "body": "Gophers like to avoid pulling in more packages than necessary or using more memory than necessary.  And if the code is going to run so often that cpu time or power consumed is an issue, they would opt for keeping the solution in the integer domain - also fewer error cases to cover.  Most conversions from integer to string are going to use a loop that does its own modulus 10 in each iteration under the covers.  Then a loop that reverses the string.  Then a loop that builds up an integer by multiplying by 10. Asking the computer to do too much busy work.  And what about negative ints?"}, {"owner": {"reputation": 1061, "user_id": 489149, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2369401260afca71c5bc5707f5b8765d?s=128&d=identicon&r=PG", "display_name": "Ian Herbert", "link": "https://stackoverflow.com/users/489149/ian-herbert"}, "edited": false, "score": 0, "creation_date": 1591286981, "post_id": 35973757, "comment_id": 110005181, "body": "This won&#39;t work correctly if the number ends in any amount of 0s. For example 19100 becomes 191."}, {"owner": {"reputation": 6300, "user_id": 10431732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/066R1.png?s=128&g=1", "display_name": "Matt Oestreich", "link": "https://stackoverflow.com/users/10431732/matt-oestreich"}, "edited": false, "score": 0, "creation_date": 1607559214, "post_id": 35973757, "comment_id": 115314519, "body": "Also doesn&#39;t work well with negative integers. If you change <code>for n &gt; 0 {</code> to <code>for n != 0 {</code> that fixes the issue with negative integers (tested)."}], "tags": [], "owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "is_accepted": true, "score": 9, "last_activity_date": 1457892073, "creation_date": 1457892073, "answer_id": 35973757, "question_id": 35972561, "link": "https://stackoverflow.com/questions/35972561/reverse-int-golang/35973757#35973757", "title": "Reverse int golang", "body": "<p>Here is a solution that does not use indexing an <code>int</code></p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc reverse_int(n int) int {\n    new_int := 0\n    for n &gt; 0 {\n        remainder := n % 10\n        new_int *= 10\n        new_int += remainder \n        n /= 10\n    }\n    return new_int \n}\n\nfunc main() {\n    fmt.Println(reverse_int(123456))\n    fmt.Println(reverse_int(100))\n    fmt.Println(reverse_int(1001))\n    fmt.Println(reverse_int(131415))\n    fmt.Println(reverse_int(1357))\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>654321\n1\n1001\n514131\n7531\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/CyGd7Hq3DV\" rel=\"noreferrer\">Go playground</a></p>\n"}, {"comments": [{"owner": {"reputation": 3294, "user_id": 4848859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Slzu.jpg?s=128&g=1", "display_name": "mayo", "link": "https://stackoverflow.com/users/4848859/mayo"}, "edited": false, "score": 0, "creation_date": 1507224583, "post_id": 35976070, "comment_id": 80136120, "body": "Another option is use a rune array,  <code>r := make([]rune, len(intString))</code>, to avoid <code>+=</code> on strings (due to immutability). After that <code>string(r)</code> will convert the array to string."}], "tags": [], "owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "is_accepted": false, "score": 3, "last_activity_date": 1457904426, "creation_date": 1457904426, "answer_id": 35976070, "question_id": 35972561, "link": "https://stackoverflow.com/questions/35972561/reverse-int-golang/35976070#35976070", "title": "Reverse int golang", "body": "<p>I converted the integer to a string, reverse the string, and convert the result back to a string.  </p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strconv\"\n)\n\nfunc main() {\n\n    fmt.Println(reverse_int(123456))\n        fmt.Println(reverse_int(100))\n        fmt.Println(reverse_int(1001))\n        fmt.Println(reverse_int(131415))\n        fmt.Println(reverse_int(1357))\n\n}\n\nfunc reverse_int(value int) int {\n\n    intString := strconv.Itoa(value)\n\n    newString := \"\"\n\n    for x := len(intString); x &gt; 0; x-- {\n        newString += string(intString[x - 1])\n    }\n\n    newInt, err := strconv.Atoi(newString)\n\n    if(err != nil){\n        fmt.Println(\"Error converting string to int\")\n    }\n\n    return newInt\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 474, "user_id": 2709131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2814a78ae5b7945b770965603bd31df6?s=128&d=identicon&r=PG&f=1", "display_name": "pwaterz", "link": "https://stackoverflow.com/users/2709131/pwaterz"}, "is_accepted": false, "score": 2, "last_activity_date": 1549978532, "creation_date": 1549978532, "answer_id": 54651324, "question_id": 35972561, "link": "https://stackoverflow.com/questions/35972561/reverse-int-golang/54651324#54651324", "title": "Reverse int golang", "body": "<p>Very similar to the first answer but this checks to make sure you don't go out of bounds on the type.</p>\n\n<pre><code>func reverse(x int) int {    \n    rev := 0\n    for x != 0 {\n        pop := x % 10\n        x /=  10\n        if rev &gt; math.MaxInt32/10 || (rev == math.MaxInt32 /10 &amp;&amp; pop &gt; 7) {\n            return 0\n        }\n        if rev &lt; math.MinInt32/10 || (rev == math.MinInt32/10 &amp;&amp; pop &lt; -8) {\n            return 0\n        }\n        rev = rev * 10 + pop\n    }\n\n    return rev\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 6393097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a3ada497a4a849bbb0578348ab247af?s=128&d=identicon&r=PG&f=1", "display_name": "Fokiruna", "link": "https://stackoverflow.com/users/6393097/fokiruna"}, "is_accepted": false, "score": 1, "last_activity_date": 1591315926, "creation_date": 1591315926, "answer_id": 62206117, "question_id": 35972561, "link": "https://stackoverflow.com/questions/35972561/reverse-int-golang/62206117#62206117", "title": "Reverse int golang", "body": "<p>Also flips negative numbers <strong>int</strong></p>\n\n<pre><code>func Abs(x int) int {\n  if x &lt; 0 {\n    return -x\n  }\n   return x\n}\n\nfunc reverse_int(n int) int {\n  newInt := 0\n  sign := 1\n   if n &lt; 0 {\n    sign = -1\n   }\n   n = Abs(n)\n  for n &gt; 0 {\n    remainder := n % 10\n    newInt = newInt*10 + remainder\n    n /= 10\n  }\n  return newInt * sign \n}\n\nfunc main() {\n  fmt.Println(reverse_int(-100))\n  fmt.Println(reverse_int(-1001))\n  fmt.Println(reverse_int(131415))\n  fmt.Println(reverse_int(1357))\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11940917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7N9Y.jpg?s=128&g=1", "display_name": "ndiecodes", "link": "https://stackoverflow.com/users/11940917/ndiecodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1614034929, "creation_date": 1614034929, "answer_id": 66324689, "question_id": 35972561, "link": "https://stackoverflow.com/questions/35972561/reverse-int-golang/66324689#66324689", "title": "Reverse int golang", "body": "<p>Similar to Fokiruna's answer but also checks for a 32bit overflow</p>\n<pre><code>func reverse(x int) int {\n    result, sign := 0, 1\n \n    if(x &lt; 0) {\n        sign = -1\n        x = -x     \n    }\n\n    for x &gt; 0 {\n        remainder := x % 10;\n        result = result * 10 + remainder\n        x = x/10\n    }\n    \n    var checkInt int = int(int32(result))\n\n    if checkInt != result {\n        return 0\n    }\n\n    return result * sign\n}\n</code></pre>\n"}], "owner": {"reputation": 227, "user_id": 5956807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/75aeaea59178a778b256c7435a652fd5?s=128&d=identicon&r=PG", "display_name": "XXXX", "link": "https://stackoverflow.com/users/5956807/xxxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4703, "favorite_count": 1, "accepted_answer_id": 35973757, "answer_count": 5, "score": 1, "last_activity_date": 1614034929, "creation_date": 1457885508, "last_edit_date": 1457913110, "question_id": 35972561, "link": "https://stackoverflow.com/questions/35972561/reverse-int-golang", "title": "Reverse int golang", "body": "<p>How to change <code>12345</code> to <code>54321</code>?\nWith a string, you can change the string to a <code>rune</code>, and reverse it, but you cannot do the same for an integer. I have searched and found no one talking about this. Examples<br>\n<code>131415</code> >>> <code>514131</code><br>\n<code>1357</code> >>> <code>7531</code><br>\n<code>123a</code> >>> <strong>ERROR</strong><br>\n -EDIT-<br>\nI was thinking, why not create a <code>slice</code> and index that?<br>\nThen I realized that you can't index <code>int</code><br>\n(<a href=\"http://play.golang.org/p/SUSg04tZsc\" rel=\"nofollow\">http://play.golang.org/p/SUSg04tZsc</a>)<br>\n<strong>MY NEW QUESTION IS</strong><br>\nHow do you index an int?\n<strong>OR</strong><br>\nHow do you reverse a int?</p>\n"}, {"tags": ["html", "go"], "comments": [{"owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "edited": false, "score": 0, "creation_date": 1457886566, "post_id": 35972287, "comment_id": 59599666, "body": "This is probably because <code>{{range .TopPIcks.Results}}</code> gives an error. Please check your console output."}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "reply_to_user": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "edited": false, "score": 0, "creation_date": 1457887106, "post_id": 35972287, "comment_id": 59599870, "body": "This is the only error bootstrap.min.js:6 Uncaught ReferenceError: jQuery is not defined"}, {"owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "edited": false, "score": 0, "creation_date": 1457887493, "post_id": 35972287, "comment_id": 59600020, "body": "Check your server&#39;s logs. Not browser&#39;s"}, {"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 0, "creation_date": 1457891967, "post_id": 35972287, "comment_id": 59601715, "body": "Should <code>.TopPIcks</code> in fact  be <code>.TopPicks</code>? That&#39;s probably what caused the error."}], "answers": [{"tags": [], "owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "is_accepted": false, "score": 0, "last_activity_date": 1457894267, "last_edit_date": 1457894267, "creation_date": 1457893923, "answer_id": 35974110, "question_id": 35972287, "link": "https://stackoverflow.com/questions/35972287/golang-html-templates-removing-all-data-from-below-the-template-call/35974110#35974110", "title": "GoLang HTML Templates Removing All Data From Below The Template Call", "body": "<p>Can you see if something like this works for you.  I had to use a different url to get json results, but I am hoping the overall outline will help you fix your problem.  EDIT: Forgot to credit the code for calling the rest api - Joseph Misiti <a href=\"https://github.com/josephmisiti/go-citibike\" rel=\"nofollow\">https://github.com/josephmisiti/go-citibike</a>.</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"io/ioutil\"\n    \"net/http\"\n    \"text/template\"\n)\n\ntype station struct {\n    Id                    int64   `json:\"id\"`\n    StationName           string  `json:\"stationName\"`\n    AvailableDocks        int64   `json:\"availableDocks\"`\n    TotalDocks            int64   `json:\"totalDocks\"`\n    Latitude              float64 `json:\"latitude\"`\n    Longitude             float64 `json:\"longitude\"`\n    StatusValue           string  `json:\"statusValue\"`\n    StatusKey             int64   `json:\"statusKey\"`\n    AvailableBikes        int64   `json:\"availableBikes\"`\n    StAddress1            string  `json:\"stAddress1\"`\n    StAddress2            string  `json:\"stAddress2\"`\n    City                  string  `json:\"city\"`\n    PostalCode            string  `json:\"postalCode\"`\n    Location              string  `json:\"location\"`\n    Altitude              string  `json:\"altitude\"`\n    TestStation           bool    `json:\"testStation\"`\n    LastCommunicationTime string  `json:\"lastCommunicationTime\"`\n    LandMark              string  `json:\"landMark\"`\n}\n\ntype stationsResponse struct {\n    ExecutionTime string    `json:\"executionTime\"`\n    StationList   []station `json:\"stationBeanList\"`\n}\n\ntype page struct {\n    Title          string\n    StationsResult stationsResponse\n}\n\nfunc main() {\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, req *http.Request) {\n        w.Header().Add(\"Content Type\", \"text/html\")\n\n        templates := template.New(\"template\")\n        templates.New(\"Body\").Parse(doc)\n        templates.New(\"List\").Parse(docList)\n\n        stations, err := getStations()\n        if err != nil {\n            fmt.Println(err)\n        }\n\n        page := page{Title: \"My Title\", StationsResult: *stations}\n        templates.Lookup(\"Body\").Execute(w, page)\n\n    })\n\n    http.ListenAndServe(\":8000\", nil)\n}\n\nfunc getStations() (*stationsResponse, error) {\n\n    body, err := makeRequest(\"https://www.citibikenyc.com/stations/json\")\n    if err != nil {\n        return nil, err\n    }\n    s, err := parseStations(body)\n    return s, err\n}\n\nfunc makeRequest(url string) ([]byte, error) {\n\n    res, err := http.Get(url)\n    if err != nil {\n        return nil, err\n    }\n\n    defer res.Body.Close()\n\n    body, err := ioutil.ReadAll(res.Body)\n    if err != nil {\n        return nil, err\n    }\n\n    return []byte(body), err\n}\n\nfunc parseStations(body []byte) (*stationsResponse, error) {\n    var s = new(stationsResponse)\n    err := json.Unmarshal(body, &amp;s)\n    if err != nil {\n        fmt.Println(\"whoops:\", err)\n    }\n\n    return s, err\n}\n\nconst docList = `\n&lt;ul &gt;\n    {{range .StationList}}\n    &lt;li&gt;{{.StationName}}&lt;/li&gt;\n    {{end}}\n&lt;/ul&gt;\n`\n\nconst doc = `\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;&lt;title&gt;{{.Title}}&lt;/title&gt;&lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;Hello Templates&lt;/h1&gt;\n        {{template \"List\" .StationsResult}}\n    &lt;/body&gt;\n&lt;/html&gt;\n`\n</code></pre>\n"}], "owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457894267, "creation_date": 1457883936, "last_edit_date": 1457887043, "question_id": 35972287, "link": "https://stackoverflow.com/questions/35972287/golang-html-templates-removing-all-data-from-below-the-template-call", "title": "GoLang HTML Templates Removing All Data From Below The Template Call", "body": "<p>I am calling a html template in my html page and everything below the call is not being shown on the page. </p>\n\n<p>This is the html page </p>\n\n<pre><code>{{define \"TopPicks\"}}\n{{template \"header\" .}}\n&lt;div class=\"content\"&gt;       \n   {{range .TopPIcks.Results}}\n   {{end}}\n   &lt;/div&gt; // Below this div\n{{template \"footer\" .}}\n{{end}}\n</code></pre>\n\n<p>After the closing content class div the footer is not being displayed. When I remove the </p>\n\n<pre><code>{{range .TopPIcks.Results}}\n       {{end}}\n</code></pre>\n\n<p>The footer appears at the bottom of the page and the html is injected at the bottom of the page but I cannot control where it is placed. What reason is this happening?</p>\n\n<p>I am creating the TopPicks template in the main.go file.</p>\n\n<pre><code> t, err := template.New(\"TopPicks\").Parse(`\n      {{define \"body\"}}\n        &lt;ul&gt;\n        {{$ImgUrl := \"http://image.tmdb.org/t/p/w185\" }}\n        {{range $movies := .Results}}\n        &lt;li&gt;{{$ImgUrl}}{{$movies.PosterPath}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Adult}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Overview}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.ReleaseDate}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.GenreIds}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Id}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.OriginalTitle}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.OriginalLanguage}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Title}}&lt;/li&gt;\n        &lt;li&gt;{{$ImgUrl}}{{$movies.BackdropPath}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Popularity}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.VoteCount}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Video}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.VoteAverage}}&lt;/li&gt;\n        {{end}}\n        &lt;/ul&gt;\n      {{end}}\n      `)\n    err = t.ExecuteTemplate(w, \"body\", p) // This writes the client response\n</code></pre>\n"}, {"tags": ["file", "go"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 1, "creation_date": 1457883438, "post_id": 35971181, "comment_id": 59598452, "body": "For a simple use case like this, I think a <a href=\"https://golang.org/pkg/bufio/#Scanner\" rel=\"nofollow noreferrer\">bufio.Scanner</a> is more convenient to use."}], "answers": [{"tags": [], "owner": {"reputation": 200, "user_id": 6040694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a194f101db85d5b94cb0cd87f32edf3f?s=128&d=identicon&r=PG&f=1", "display_name": "animal", "link": "https://stackoverflow.com/users/6040694/animal"}, "is_accepted": false, "score": 5, "last_activity_date": 1457881477, "creation_date": 1457881477, "answer_id": 35971829, "question_id": 35971181, "link": "https://stackoverflow.com/questions/35971181/go-golang-checking-file-extension-not-working-in-go/35971829#35971829", "title": "Go (Golang) - checking file extension not working in Go", "body": "<p>The <code>path, _ := reader.ReadString('\\n')</code> also returns the newline. So your comparing \".vm\\n\" with \".vm\".</p>\n\n<p>you should trimspace from the path <code>if filepath.Ext(strings.TrimSpace(path)) != \".vm\" {</code> </p>\n"}, {"tags": [], "owner": {"reputation": 1715, "user_id": 8712494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iWUnn1PqAuw/AAAAAAAAAAI/AAAAAAAAAGQ/2OslFo_DLk4/photo.jpg?sz=128", "display_name": "Amin Shojaei", "link": "https://stackoverflow.com/users/8712494/amin-shojaei"}, "is_accepted": false, "score": 2, "last_activity_date": 1601392496, "creation_date": 1601392496, "answer_id": 64122557, "question_id": 35971181, "link": "https://stackoverflow.com/questions/35971181/go-golang-checking-file-extension-not-working-in-go/64122557#64122557", "title": "Go (Golang) - checking file extension not working in Go", "body": "<p>For checking file extension:</p>\n<pre class=\"lang-golang prettyprint-override\"><code>path := &quot;/media/godfather.mp4&quot;\n\nfileExtension := filepath.Ext(path)\n\nif fileExtension != &quot;.mp4&quot; {\n    panic(&quot;File extension ins't equal to .mp4&quot;)\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5738946, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10201421177449208/picture?type=large", "display_name": "Ido Ikar", "link": "https://stackoverflow.com/users/5738946/ido-ikar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5100, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1601392496, "creation_date": 1457877734, "question_id": 35971181, "link": "https://stackoverflow.com/questions/35971181/go-golang-checking-file-extension-not-working-in-go", "title": "Go (Golang) - checking file extension not working in Go", "body": "<p>I want to get a file path from the console and check if the file is a vm file.\nI wrote this code:</p>\n\n<pre><code>func main() {\nreader := bufio.NewReader(os.Stdin)\nfmt.Println(\"Enter the path of the vm file:\")\npath, _ := reader.ReadString('\\n')\nif filepath.Ext(path) != \".vm\" {\n    fmt.Println(\"Error! file must be vm file\")\n}\n</code></pre>\n\n<p>but it's not working. I just started learn Go So please accept my apologies if this is a basic mistake.</p>\n"}, {"tags": ["json", "go"], "answers": [{"tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": true, "score": 2, "last_activity_date": 1457880918, "creation_date": 1457880918, "answer_id": 35971737, "question_id": 35970960, "link": "https://stackoverflow.com/questions/35970960/passing-api-request-function-to-another-function-golang/35971737#35971737", "title": "Passing API Request Function To Another Function GoLang", "body": "<p>RequestTopMovies is a <code>http.Handler</code> type which will get called automatically as a handler function aka controller. </p>\n\n<p>To access the data received, either use something like context (check gorilla/context) or just create a slice or map to hold the data struct so you can access it from somewhere else in the code, i.e.</p>\n\n<pre><code>var Temp = map[string]Payload{}\n</code></pre>\n\n<p>And once you unmarshaled the data, store it like </p>\n\n<pre><code>Temp[key] = p\n</code></pre>\n\n<p>Then from else where like another handler you can grab the data like</p>\n\n<pre><code>func SomeHandler(rw http.ResponseWriter, *http.Request) {\n        p := Temp[key]\n        // ...\n} \n</code></pre>\n"}], "owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1149, "favorite_count": 0, "accepted_answer_id": 35971737, "answer_count": 1, "score": 3, "last_activity_date": 1608389495, "creation_date": 1457876486, "last_edit_date": 1608389495, "question_id": 35970960, "link": "https://stackoverflow.com/questions/35970960/passing-api-request-function-to-another-function-golang", "title": "Passing API Request Function To Another Function GoLang", "body": "<p><strong>Background -</strong></p>\n<p>I am moving this function to <code>main()</code> so the response data is accessible to the rest of my code.</p>\n<p><strong>Example -</strong></p>\n<pre><code>func RequestTopMovies(w http.ResponseWriter, r *http.Request) {\n  res, err := http.Get(url)\n      if err != nil {\n        panic(err)\n      }\n      defer res.Body.Close()\n\n      body, err := ioutil.ReadAll(res.Body)\n      if err != nil {\n        panic(err)\n      }\n      var p Payload\n\n      err = json.Unmarshal(body, &amp;p)\n      if err != nil {\n        panic(err)\n      }\n      for i := 0; i &lt; len(p.Results); i++ {\n       fmt.Println(p.Results[i].Overview) \n    }\n}\n</code></pre>\n<p><strong>Question -</strong></p>\n<p>How do I set the response data to be accessible to other places in my code?</p>\n"}, {"tags": ["ssl", "go", "cassandra", "cqlsh"], "answers": [{"tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": false, "score": 1, "last_activity_date": 1457969229, "last_edit_date": 1457969229, "creation_date": 1457968161, "answer_id": 35991178, "question_id": 35970581, "link": "https://stackoverflow.com/questions/35970581/ssl-options-in-gocql/35991178#35991178", "title": "SSL options in gocql", "body": "<p>You're adding a cert without a private key, which is where the \"no such file or directory\" error is coming from.</p>\n\n<p>Your python code is adding a CA; you should do the same with the Go code:</p>\n\n<pre><code>gocql.SslOptions {\n    CaPath: \"/path/to/cert.pem\",\n}\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 3502035, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1918db6efe80204a2a26c8ef590e9c04?s=128&d=identicon&r=PG&f=1", "display_name": "user3502035", "link": "https://stackoverflow.com/users/3502035/user3502035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 964, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1457969229, "creation_date": 1457874331, "question_id": 35970581, "link": "https://stackoverflow.com/questions/35970581/ssl-options-in-gocql", "title": "SSL options in gocql", "body": "<p>In my Cassandra config I have enabled user authentication and connect with cqlsh over ssl.\nI'm having trouble implementing the same with gocql, following is my code:</p>\n\n<pre><code>cluster := gocql.NewCluster(\"127.0.0.1\")\ncluster.Authenticator = gocql.PasswordAuthenticator{\n    Username: \"myuser\",\n    Password: \"mypassword\",\n}\ncluster.SslOpts = &amp;gocql.SslOptions {\n    CertPath: \"/path/to/cert.pem\",\n}\n</code></pre>\n\n<p>When I try to connect I get following error:</p>\n\n<pre><code> gocql: unable to create session: connectionpool: unable to load X509 key pair: open : no such file or directory\n</code></pre>\n\n<p>In python I can do this with something like:</p>\n\n<pre><code>from cassandra.cluster import Cluster\nfrom cassandra.auth import PlainTextAuthProvider\nUSER = 'username'\nPASS = 'password'\nssl_opts = {'ca_certs': '/path/to/cert.pem',\n        'ssl_version': PROTOCOL_TLSv1\n}\ncredentials = PlainTextAuthProvider(username = USER, password = PASS)\n# define host, port, cqlsh protocaol version\ncluster = Cluster(contact_points= HOST, protocol_version= CQLSH_PROTOCOL_VERSION, auth_provider = credentials, port = CASSANDRA_PORT)\n</code></pre>\n\n<p>I checked the gocql and TLS documentation <a href=\"https://godoc.org/github.com/gocql/gocql#SslOptions\" rel=\"nofollow\">here</a> and <a href=\"https://godoc.org/crypto/tls#Config\" rel=\"nofollow\">here</a> but I'm unsure about how to set ssl options.</p>\n"}, {"tags": ["json", "go", "spreedly"], "comments": [{"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1457874204, "post_id": 35970395, "comment_id": 59595179, "body": "You must have some issue in your code, because it works for me. <a href=\"https://play.golang.org/p/AjeKfc-JTH\" rel=\"nofollow noreferrer\">play.golang.org/p/AjeKfc-JTH</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15124, "user_id": 144969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a12d286134563e628089f733b946a00?s=128&d=identicon&r=PG", "display_name": "Dimitar Dimitrov", "link": "https://stackoverflow.com/users/144969/dimitar-dimitrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1457874344, "creation_date": 1457874344, "answer_id": 35970583, "question_id": 35970395, "link": "https://stackoverflow.com/questions/35970395/parsing-json-in-golang-into-struct/35970583#35970583", "title": "Parsing JSON in GoLang into struct", "body": "<p>Take a look at <a href=\"http://play.golang.org/p/3xJHBmhuei\" rel=\"nofollow\">http://play.golang.org/p/3xJHBmhuei</a> - unmarshalling into your second definition of gateways completes successfully, so it must be something little that you're missing.</p>\n\n<p>Check if the json.Unmarshal call returns an error.</p>\n\n<p>P.S. It probably isn't the problem if you're unmarshalling successfully into the first version of gateways, but the JSON string that you've given above is missing a closing \"}\" bracket.</p>\n"}, {"tags": [], "owner": {"reputation": 23294, "user_id": 2891324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d27f03cd98b59774911f8dea5ee00b?s=128&d=identicon&r=PG", "display_name": "nessuno", "link": "https://stackoverflow.com/users/2891324/nessuno"}, "is_accepted": true, "score": 1, "last_activity_date": 1457875312, "creation_date": 1457875312, "answer_id": 35970741, "question_id": 35970395, "link": "https://stackoverflow.com/questions/35970395/parsing-json-in-golang-into-struct/35970741#35970741", "title": "Parsing JSON in GoLang into struct", "body": "<p>There's a problem with your <code>ParseResponse</code> function, you're calling <code>json.Unmarshal</code> passing as first parameter <code>json</code>, that's a packge name: that's ambiguous.</p>\n\n<p>As you can see, your code works well changing the <code>ParseResponse</code> function.</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n)\n\ntype gateway struct {\n    Characteristics       []string      `json:\"characteristics\"`\n    CreatedAt             string        `json:\"created_at\"`\n    Credentials           []interface{} `json:\"credentials\"`\n    Description           interface{}   `json:\"description\"`\n    GatewaySpecificFields []interface{} `json:\"gateway_specific_fields\"`\n    GatewayType           string        `json:\"gateway_type\"`\n    Name                  string        `json:\"name\"`\n    PaymentMethods        []string      `json:\"payment_methods\"`\n    Redacted              bool          `json:\"redacted\"`\n    State                 string        `json:\"state\"`\n    Token                 string        `json:\"token\"`\n    UpdatedAt             string        `json:\"updated_at\"`\n}\n\ntype gateways struct {\n    Gateways []gateway `json:\"gateways\"`\n}\n\nfunc ParseResponse(js []byte) {\n    var parsed gateways\n    json.Unmarshal(js, &amp;parsed)\n    fmt.Println(parsed)\n}\n\nfunc main() {\n    var js []byte = []byte(`{\n\"gateways\": [\n    {\n        \"token\": \"my_token_here\",\n        \"gateway_type\": \"test\",\n        \"description\": null,\n        \"payment_methods\": [\n            \"credit_card\",\n            \"sprel\",\n            \"third_party_token\",\n            \"bank_account\",\n            \"apple_pay\"\n        ],\n        \"state\": \"retained\",\n        \"created_at\": \"2016-03-12T18:52:37Z\",\n        \"updated_at\": \"2016-03-12T18:52:37Z\",\n        \"name\": \"Spreedly Test\",\n        \"characteristics\": [\n            \"purchase\",\n            \"authorize\",\n            \"capture\",\n            \"credit\",\n            \"general_credit\",\n            \"void\",\n            \"verify\",\n            \"reference_purchase\",\n            \"purchase_via_preauthorization\",\n            \"offsite_purchase\",\n            \"offsite_authorize\",\n            \"3dsecure_purchase\",\n            \"3dsecure_authorize\",\n            \"store\",\n            \"remove\",\n            \"disburse\",\n            \"reference_authorization\"\n        ],\n        \"credentials\": [],\n        \"gateway_specific_fields\": [],\n        \"redacted\": false\n    }\n]\n}`)\n    /*\n        var parsed gateways\n        e := json.Unmarshal(js, &amp;parsed)\n        if e != nil {\n            fmt.Println(e.Error())\n        } else {\n            fmt.Println(parsed)\n        }\n    */\n    ParseResponse(js)\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>{[{[purchase authorize capture credit general_credit void verify reference_purchase purchase_via_preauthorization offsite_purchase offsite_authorize 3dsecure_purchase 3dsecure_authorize store remove disburse reference_authorization] 2016-03-12T18:52:37Z [] &lt;nil&gt; [] test Spreedly Test [credit_card sprel third_party_token bank_account apple_pay] false retained my_token_here 2016-03-12T18:52:37Z}]}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 1750695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03113038171a738a4a7239fca6e8c466?s=128&d=identicon&r=PG", "display_name": "Honest Abe", "link": "https://stackoverflow.com/users/1750695/honest-abe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "accepted_answer_id": 35970741, "answer_count": 2, "score": -1, "last_activity_date": 1457875312, "creation_date": 1457872975, "question_id": 35970395, "link": "https://stackoverflow.com/questions/35970395/parsing-json-in-golang-into-struct", "title": "Parsing JSON in GoLang into struct", "body": "<p>So, I'm having some trouble parsing this data in golang:</p>\n\n<pre><code>{\n\"gateways\": [\n    {\n        \"token\": \"my_token_here\",\n        \"gateway_type\": \"test\",\n        \"description\": null,\n        \"payment_methods\": [\n            \"credit_card\",\n            \"sprel\",\n            \"third_party_token\",\n            \"bank_account\",\n            \"apple_pay\"\n        ],\n        \"state\": \"retained\",\n        \"created_at\": \"2016-03-12T18:52:37Z\",\n        \"updated_at\": \"2016-03-12T18:52:37Z\",\n        \"name\": \"Spreedly Test\",\n        \"characteristics\": [\n            \"purchase\",\n            \"authorize\",\n            \"capture\",\n            \"credit\",\n            \"general_credit\",\n            \"void\",\n            \"verify\",\n            \"reference_purchase\",\n            \"purchase_via_preauthorization\",\n            \"offsite_purchase\",\n            \"offsite_authorize\",\n            \"3dsecure_purchase\",\n            \"3dsecure_authorize\",\n            \"store\",\n            \"remove\",\n            \"disburse\",\n            \"reference_authorization\"\n        ],\n        \"credentials\": [],\n        \"gateway_specific_fields\": [],\n        \"redacted\": false\n    }\n]\n</code></pre>\n\n<p>}</p>\n\n<p>When using this struct I can get it to output pretty easily.</p>\n\n<pre><code>type gateways struct {\n    Gateways []struct {\n        Characteristics       []string      `json:\"characteristics\"`\n        CreatedAt             string        `json:\"created_at\"`\n        Credentials           []interface{} `json:\"credentials\"`\n        Description           interface{}   `json:\"description\"`\n        GatewaySpecificFields []interface{} `json:\"gateway_specific_fields\"`\n        GatewayType           string        `json:\"gateway_type\"`\n        Name                  string        `json:\"name\"`\n        PaymentMethods        []string      `json:\"payment_methods\"`\n        Redacted              bool          `json:\"redacted\"`\n        State                 string        `json:\"state\"`\n        Token                 string        `json:\"token\"`\n        UpdatedAt             string        `json:\"updated_at\"`\n    } `json:\"gateways\"` \n}\n</code></pre>\n\n<p>But as soon as I seperate the \"Gateways []struct\" into its own struct then it returns an empty array...</p>\n\n<p>Full source.</p>\n\n<pre><code>type gateway struct {  \n  Characteristics       []string      `json:\"characteristics\"`\n  CreatedAt             string        `json:\"created_at\"`\n  Credentials           []interface{} `json:\"credentials\"`\n  Description           interface{}   `json:\"description\"`\n  GatewaySpecificFields []interface{} `json:\"gateway_specific_fields\"`\n  GatewayType           string        `json:\"gateway_type\"`\n  Name                  string        `json:\"name\"`\n  PaymentMethods        []string      `json:\"payment_methods\"`\n  Redacted              bool          `json:\"redacted\"`\n  State                 string        `json:\"state\"`\n  Token                 string        `json:\"token\"`\n  UpdatedAt             string        `json:\"updated_at\"`\n}\ntype gateways struct {\n  Gateways []gateway `json:\"gateways\"`\n}\n\nfunc ParseResponse() {\n  var parsed gateways\n  json.Unmarshal(json, &amp;parsed)\n}\n</code></pre>\n"}, {"tags": ["arrays", "go", "slice"], "comments": [{"owner": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "edited": false, "score": 0, "creation_date": 1457881591, "post_id": 35970010, "comment_id": 59597802, "body": "Go is a <i>statically</i> typed language, and the length of an array is part of it&#39;s type. This means that an array&#39;s length must be a <i>compile-time constant</i>. In Go, if you need to allocate variable-length &quot;arrays&quot; dynamically, you use <i>slices</i> instead."}], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 6056789, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8bfd94f1b34ad9b1f3bbc5acca74ca5?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/6056789/fred"}, "edited": false, "score": 0, "creation_date": 1457886127, "post_id": 35970204, "comment_id": 59599507, "body": "Thank you very much for your answer Simone. Your solution is good to work with rows. Unfortunately I have to work with columns, so filling the array using indexes array[i][j] would be much better if I had a solution to create the array with the number of rows and columns."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 1, "last_activity_date": 1457871889, "creation_date": 1457871889, "answer_id": 35970204, "question_id": 35970010, "link": "https://stackoverflow.com/questions/35970010/go-how-to-assign-all-elements-in-2-by-2-array-of-variable-size/35970204#35970204", "title": "GO : how to Assign all elements in 2 by 2 array of variable size?", "body": "<p>A matrix of <code>float64</code> in Go is declared as <code>[][]float64</code></p>\n\n<pre><code>var matrix [][]float64\n</code></pre>\n\n<p>You can use the <code>:=</code> operator to initialize the matrix and declare the type automatically</p>\n\n<pre><code>matrix := [][]float64{}\n</code></pre>\n\n<p>Note that this the line above is not a simple declaration, is the syntax used to create a new empty slice</p>\n\n<pre><code>// creates an empty slice of ints\nx := []int{} \n// creates a slice of ints\nx := []int{1, 2, 3, 4} \n</code></pre>\n\n<p>The use of <code>[]float64{}</code> combines together the definition and the allocation. Note that the following two lines are different</p>\n\n<pre><code>// creates a slice of 4 ints\nx := []int{1, 2, 3, 4} \n// creates an array of 4 ints\nx := [4]int{1, 2, 3, 4} \n</code></pre>\n\n<p>Slices can be resized, arrays have fixed size.</p>\n\n<p>Back to your problem, <a href=\"https://play.golang.org/p/D-sJ7Oq3g5\" rel=\"nofollow\">here's an example</a> that demonstrates how to create a matrix of <code>float64</code> and append new rows to the matrix.</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    matrix := [][]float64{}\n    matrix = append(matrix, []float64{1.0, 2.0, 3.0})\n    matrix = append(matrix, []float64{1.1, 2.1, 3.1})\n    fmt.Println(matrix)\n}\n</code></pre>\n\n<p>You can start from this example and update your script.</p>\n"}, {"tags": [], "owner": {"reputation": 375, "user_id": 6056789, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8bfd94f1b34ad9b1f3bbc5acca74ca5?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/6056789/fred"}, "is_accepted": false, "score": 0, "last_activity_date": 1457879817, "last_edit_date": 1457879817, "creation_date": 1457878129, "answer_id": 35971256, "question_id": 35970010, "link": "https://stackoverflow.com/questions/35970010/go-how-to-assign-all-elements-in-2-by-2-array-of-variable-size/35971256#35971256", "title": "GO : how to Assign all elements in 2 by 2 array of variable size?", "body": "<p>I did few modifications to my program and this is a \"almost\" working example... not very elegant ;) There is still a problem in the matrix : the 1st column of the matrix correspond to the 1st line of the file so I dont have access to columns :(</p>\n\n<pre><code>func main() {\n\n    matrix := [][]float64{} // matrix corresponding to the text file\n\n    // Open the file.\n    whole_file,_ := ioutil.ReadFile(\"test2.tsv\")\n    // mesasure the size of the table\n    tab_whole_file := strings.Split(string(whole_file), \"\\n\")\n    tab_first_line := strings.Split(tab_whole_file[0], \"\\t\")\n    nb_col := len(tab_first_line)\n    nb_lines := len(tab_whole_file) - 1 \n// I dont know why this number is longer than I expected so I have to substract 1\n\n\n    for i := 0; i &lt; nb_lines ; i++ {\n      numbers := []float64{} // temp array\n      line := strings.Split(tab_whole_file[i], \"\\t\")\n      for j := 1; j &lt; nb_col ; j++ { // 1 instead of 0 because I dont want the first column of row names and I cant store it in a float array\n        if nb, err := strconv.ParseFloat(line[j], 64); err == nil {\n          numbers = append(numbers,nb) // not very elegant/efficient temporary array\n        }\n      }\n      matrix = append(matrix, numbers)\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 375, "user_id": 6056789, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8bfd94f1b34ad9b1f3bbc5acca74ca5?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/6056789/fred"}, "edited": false, "score": 0, "creation_date": 1457904413, "post_id": 35974450, "comment_id": 59606467, "body": "Thank you very much for this very nice code ! If I need to access columns of the matrix, here [3.14 42] for col1,  the only way is to built another transposed matrix from m ?"}, {"owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "reply_to_user": {"reputation": 375, "user_id": 6056789, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8bfd94f1b34ad9b1f3bbc5acca74ca5?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/6056789/fred"}, "edited": false, "score": 0, "creation_date": 1457906271, "post_id": 35974450, "comment_id": 59607084, "body": "@Fred: The first matrix index represents the row, the second represents the column: <code>m[r,c]</code>. Use the indices to select particular rows or columns. See my revised answer."}, {"owner": {"reputation": 375, "user_id": 6056789, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8bfd94f1b34ad9b1f3bbc5acca74ca5?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/6056789/fred"}, "edited": false, "score": 0, "creation_date": 1457953527, "post_id": 35974450, "comment_id": 59624175, "body": "Thank you again PeterSO ! The amount of work just to read a table is huge compare to some other programming languages (Python, Perl, Julia, R...) ! I tested your code and now I can access to any element of the matrix. But when I try to access to one column at a time I don&#39;t have the result I imagined. For example, m[1][:] and m[:][1] gives exactly the same result = the 2nd line of my table instead of 2nd line and 2nd column. Whereas m[4][2] give exactly the result I expect ! It is strange ! :)"}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 1, "last_activity_date": 1457906133, "last_edit_date": 1457906133, "creation_date": 1457895765, "answer_id": 35974450, "question_id": 35970010, "link": "https://stackoverflow.com/questions/35970010/go-how-to-assign-all-elements-in-2-by-2-array-of-variable-size/35974450#35974450", "title": "GO : how to Assign all elements in 2 by 2 array of variable size?", "body": "<p>For example,</p>\n\n<pre><code>package main\n\nimport (\n    \"bytes\"\n    \"fmt\"\n    \"io/ioutil\"\n    \"strconv\"\n)\n\nfunc loadMatrix(filename string) ([][]float64, error) {\n    var m [][]float64\n    data, err := ioutil.ReadFile(filename)\n    if err != nil {\n        return nil, err\n    }\n\n    rows := bytes.Split(data, []byte{'\\n'})\n    for r := len(rows) - 1; r &gt;= 0; r-- {\n        if len(rows[r]) != 0 {\n            break\n        }\n        rows = rows[:len(rows)-1]\n    }\n    m = make([][]float64, len(rows))\n\n    nCols := 0\n    for r, row := range rows {\n        cols := bytes.Split(row, []byte{'\\t'})\n        if r == 0 {\n            nCols = len(cols)\n        }\n        m[r] = make([]float64, nCols)\n        for c, col := range cols {\n            if c &lt; nCols &amp;&amp; len(col) &gt; 0 {\n                e, err := strconv.ParseFloat(string(col), 64)\n                if err != nil {\n                    return nil, err\n                }\n                m[r][c] = e\n            }\n        }\n    }\n    return m, nil\n}\n\nfunc main() {\n    filename := \"matrix.tsv\"\n    m, err := loadMatrix(filename)\n    if err != nil {\n        fmt.Println(err)\n        return\n    }\n    fmt.Println(\"Matrix:\")\n    fmt.Println(m)\n\n    fmt.Println(\"\\nBy [row,column]:\")\n    for r := range m {\n        for c := range m[0] {\n            fmt.Printf(\"[%d,%d] %5v  \", r, c, m[r][c])\n        }\n        fmt.Println()\n    }\n\n    fmt.Println(\"\\nBy [column,row]:\")\n    for c := range m[0] {\n        for r := range m {\n            fmt.Printf(\"[%d,%d] %5v  \", c, r, m[r][c])\n        }\n        fmt.Println()\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ cat matrix.tsv\n3.14    1.59    2.7 1.8\n42\n\n$ go run matrix.go\nMatrix:\n[[3.14 1.59 2.7 1.8] [42 0 0 0]]\n\nBy [row,column]:\n[0,0]  3.14  [0,1]  1.59  [0,2]   2.7  [0,3]   1.8  \n[1,0]    42  [1,1]     0  [1,2]     0  [1,3]     0  \n\nBy [column,row]:\n[0,0]  3.14  [0,1]    42  \n[1,0]  1.59  [1,1]     0  \n[2,0]   2.7  [2,1]     0  \n[3,0]   1.8  [3,1]     0  \n$\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 6056789, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8bfd94f1b34ad9b1f3bbc5acca74ca5?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/6056789/fred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 1, "accepted_answer_id": 35974450, "answer_count": 3, "score": 1, "last_activity_date": 1457906133, "creation_date": 1457870839, "last_edit_date": 1457872095, "question_id": 35970010, "link": "https://stackoverflow.com/questions/35970010/go-how-to-assign-all-elements-in-2-by-2-array-of-variable-size", "title": "GO : how to Assign all elements in 2 by 2 array of variable size?", "body": "<p>I'm having problems filling a 2D array with a matrix from a text file using GO. </p>\n\n<p>The main problem I have is to create a 2D array because I have to calculate the dimension of the array and GO does not seem to accept VAR in array dimension :</p>\n\n<pre><code>nb_lines = number of line of the array\nnb_col = number of columns of the array\n\n// read matrix from file\nwhole_file,_ := ioutil.ReadFile(\"test2.txt\")\n// get each line of the file in tab_whole_file\ntab_whole_file := strings.Split(string(whole_file), \"\\n\")\n// first line of the table\ntab_first_line := strings.Split(tab_whole_file[0], \"\\t\")\nnb_col := len(tab_first_line)\nnb_lines := len(tab_whole_file) - 1\n\n// at this point I tried to build a array to contain the matrix values from the texte file\n\nvar columns [nb_lines][nb_col]float64 // does not work\ncolumns := make([][]float64, nb_lines, nb_col) // does not work\ncolumns := make([nb_lines][nb_col]float64) // does not work\ncolumns := [nb_lines][nb_col]float64{} // does not work\ncolumns := [][]float64{} // panic: runtime error: index out of range\n\nfor i := 0; i &lt; nb_lines ; i++ { // for each line of the table from text file\n    line := strings.Split(tab_whole_file[0], \"\\t\") // split one line to get each table values\n    for j := 1; j &lt; len(line) ; j++ {\n        columns[i][j], _  = strconv.ParseFloat(line[j], 64) // assign each value to the table columns[i][j]\n    }\n}\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "edited": false, "score": 2, "creation_date": 1457882623, "post_id": 35969911, "comment_id": 59598173, "body": "That tutorial is horrible. Panicking is not a typical way of handling errors, and neither is printing them to stdout and exiting. Identifying errors by their error string is the least preferred way to identify them."}], "answers": [{"comments": [{"owner": {"reputation": 2886, "user_id": 821517, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6fb11c8c09d79b4cd76fbd4225cce067?s=128&d=identicon&r=PG", "display_name": "mr1031011", "link": "https://stackoverflow.com/users/821517/mr1031011"}, "edited": false, "score": 0, "creation_date": 1457960712, "post_id": 35970034, "comment_id": 59629056, "body": "Thank you. Indeed I was using someone else&#39;s code and thus was a bit reluctant to fix the code that does not belong to me. Anyhow, I took your advice and got around it this time without having to do the nasty string matching method. It&#39;s good to know that there are options though, I will bookmark your answer. :)"}], "tags": [], "owner": {"reputation": 8880, "user_id": 2363866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ToSkw.png?s=128&g=1", "display_name": "creker", "link": "https://stackoverflow.com/users/2363866/creker"}, "is_accepted": true, "score": 1, "last_activity_date": 1457872164, "last_edit_date": 1457872164, "creation_date": 1457871008, "answer_id": 35970034, "question_id": 35969911, "link": "https://stackoverflow.com/questions/35969911/how-to-check-the-exact-type-of-error-in-recover/35970034#35970034", "title": "How to check the exact type of error in recover?", "body": "<p>Use type assertion to get <code>error</code> <a href=\"https://play.golang.org/p/BryV7YfZHS\" rel=\"nofollow\">https://play.golang.org/p/BryV7YfZHS</a></p>\n\n<pre><code>defer func(){\n    err := recover().(error)\n    fmt.Println(err.Error())\n}()\n\na := make([]int, 0)\na[1] = 0\n</code></pre>\n\n<p>But I suggest you don't do that. First, you should not use recover. In almost all cases that means you're doing something wrong. Instead, fix the code that panics. </p>\n\n<p>Second, don't use string matching to determine the cause of the error. There're many reasons why it's bad but I will just say that it's not the Go way of doing things. I understand that you may be using API that just doesn't leave you a choice but try to find a better way. Use type assertion, type switch to get the exact error type and go from there.</p>\n"}], "owner": {"reputation": 2886, "user_id": 821517, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6fb11c8c09d79b4cd76fbd4225cce067?s=128&d=identicon&r=PG", "display_name": "mr1031011", "link": "https://stackoverflow.com/users/821517/mr1031011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1007, "favorite_count": 0, "accepted_answer_id": 35970034, "answer_count": 1, "score": 0, "last_activity_date": 1457872164, "creation_date": 1457870133, "question_id": 35969911, "link": "https://stackoverflow.com/questions/35969911/how-to-check-the-exact-type-of-error-in-recover", "title": "How to check the exact type of error in recover?", "body": "<p>I'm following this example here:</p>\n\n<p><a href=\"https://www.socketloop.com/tutorials/golang-smarter-error-handling-with-strings-contains-function\" rel=\"nofollow\">https://www.socketloop.com/tutorials/golang-smarter-error-handling-with-strings-contains-function</a></p>\n\n<pre><code> if !strings.Contains(err.Error(), \"timed out\") {\n    fmt.Printf(\"resulting error not a timeout: %s\", err)\n }\n</code></pre>\n\n<p>However, if I do that in my code I will get this</p>\n\n<blockquote>\n  <p>err.Error undefined (type interface {} is interface with no methods)</p>\n</blockquote>\n\n<p>I wonder what I'm doing wrong here, and how should I check for an exact error (in my case I want to recover from the error \"slice bounds out of range\")</p>\n\n<p>Best,</p>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "edited": false, "score": 1, "creation_date": 1457870202, "post_id": 35969856, "comment_id": 59594028, "body": "make fields in <code>Test</code> struct public. With capital first letters. <code>type Test struct {   Id   int   Text string }</code>"}, {"owner": {"reputation": 97, "user_id": 5573708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/okiLI.png?s=128&g=1", "display_name": "balazswmann", "link": "https://stackoverflow.com/users/5573708/balazswmann"}, "reply_to_user": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "edited": false, "score": 1, "creation_date": 1457875600, "post_id": 35969856, "comment_id": 59595614, "body": "Thank you also! I couldn&#39;t accept your comment, but this was the problem."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 5573708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/okiLI.png?s=128&g=1", "display_name": "balazswmann", "link": "https://stackoverflow.com/users/5573708/balazswmann"}, "edited": false, "score": 0, "creation_date": 1457873015, "post_id": 35970299, "comment_id": 59594810, "body": "Thanks! Indeed, this was the problem."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 3, "last_activity_date": 1457872366, "creation_date": 1457872366, "answer_id": 35970299, "question_id": 35969856, "link": "https://stackoverflow.com/questions/35969856/decoding-json-from-post-request-fails-in-go/35970299#35970299", "title": "Decoding JSON from POST request fails in Go", "body": "<p>From the <a href=\"https://golang.org/pkg/encoding/json/#Unmarshal\" rel=\"nofollow\"><code>Unmarshal</code> documentation</a> (emphasis is mine):</p>\n\n<blockquote>\n  <p>To unmarshal JSON into a struct, Unmarshal matches incoming object keys to the keys used by Marshal (either the struct field name or its tag), preferring an exact match but also accepting a case-insensitive match. <strong>Unmarshal will only set exported fields of the struct</strong>.</p>\n</blockquote>\n\n<p>You need to change the field definition in your struct:</p>\n\n<pre><code>type Test struct {\n  ID   int\n  Text string\n}\n</code></pre>\n\n<p>Note I used <code>ID</code> instead of <code>Id</code> per <a href=\"https://github.com/golang/go/wiki/CodeReviewComments#initialisms\" rel=\"nofollow\">Golang naming conventions</a>.</p>\n"}], "owner": {"reputation": 97, "user_id": 5573708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/okiLI.png?s=128&g=1", "display_name": "balazswmann", "link": "https://stackoverflow.com/users/5573708/balazswmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 35970299, "answer_count": 1, "score": 0, "last_activity_date": 1457872366, "creation_date": 1457869704, "question_id": 35969856, "link": "https://stackoverflow.com/questions/35969856/decoding-json-from-post-request-fails-in-go", "title": "Decoding JSON from POST request fails in Go", "body": "<p>I send a POST request to my Go application with JSON data like below:</p>\n\n<pre><code>var test = {text: \"Lorem ipsum dolor sit amet\"};\n\n$.ajax({\n  url: \"/api/test/add\",\n  type: \"POST\",\n  dataType: \"json\",\n  contentType: \"application/json; charset=utf-8\",\n  data: JSON.stringify(test),\n  success: function(data) {\n    // ...\n  },\n  error: function(xhr, status, err) {\n    // ...\n  }\n});\n</code></pre>\n\n<p>In my Go application I have the following code (using <a href=\"https://github.com/husobee/vestigo\" rel=\"nofollow\">vestigo</a>):</p>\n\n<pre><code>type Test struct {\n  id   int\n  text string\n}\n\nfunc apiAddTestHandler(w http.ResponseWriter, r *http.Request) {\n  r_body, err := ioutil.ReadAll(r.Body)\n  if err != nil {\n    panic(err)\n  }\n\n  // Here looks like everything is ok because I get\n  // {\"text\": \"Lorem ipsum dolor sit amet\"} if I try\n  // to convert r_body to string (string(r_body)).\n\n  var test Test\n  err = json.Unmarshal(r_body, &amp;test)\n  if err != nil {\n    panic(err)\n  }\n\n  // Process test struct below, but here I get\n  // {id:0 text:} if I try to use or print the value\n  // of test (fmt.Printf(\"%+v\\n\", test)).\n}\n\nfunc main() {\n  router := vestigo.NewRouter()\n  router.Post(\"/api/test/add\", apiAddTestHandler)\n\n  err := http.ListenAndServe(\":3000\", router)\n  if err != nil {\n    log.Fatal(\"ListenAndServe: \", err)\n  }\n}\n</code></pre>\n\n<p>The problem is, that in apiAddTestHandler() I cannot \"populate\" the test struct with the decoded JSON data. A little bit more info in the comments. I also tried the below snippet with no luck:</p>\n\n<pre><code>decoder := json.NewDecoder(r.Body)\nvar test Test\nerr := decoder.Decode(&amp;test)\nif err != nil {\n  panic(err)\n}\n</code></pre>\n\n<p>What is the problem?</p>\n"}, {"tags": ["html", "go", "equals", "go-html-template"], "answers": [{"comments": [{"owner": {"reputation": 2144, "user_id": 3103732, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ddea83f3d0a1cde074665d4c1382c3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Dany", "link": "https://stackoverflow.com/users/3103732/dany"}, "edited": false, "score": 0, "creation_date": 1457850511, "post_id": 35967196, "comment_id": 59589067, "body": "For some reasons <code>{{ $length := len .SearchData }} {{ if eq $length 0 }}</code> is not working in my html template. But <code>{{if not .SearchData}}</code> works. But in some scenarios I have to use <code>eq</code> with different values[to restrict the results]."}, {"owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "reply_to_user": {"reputation": 2144, "user_id": 3103732, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ddea83f3d0a1cde074665d4c1382c3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Dany", "link": "https://stackoverflow.com/users/3103732/dany"}, "edited": false, "score": 0, "creation_date": 1457850849, "post_id": 35967196, "comment_id": 59589115, "body": "I understand your need to check for other values. I can&#39;t think of why it wouldn&#39;t work for you :( Must be something outside templates. Are you sure you are passing the intended value for <code>SearchData</code>?"}, {"owner": {"reputation": 2144, "user_id": 3103732, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ddea83f3d0a1cde074665d4c1382c3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Dany", "link": "https://stackoverflow.com/users/3103732/dany"}, "edited": false, "score": 0, "creation_date": 1457851076, "post_id": 35967196, "comment_id": 59589154, "body": "Yeah. I am passing the indented values because <code>{{if not .SearchData}}</code> works as expected. I tested with <code>empty</code> list and list with some values"}, {"owner": {"reputation": 570, "user_id": 6188720, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JJjpc.jpg?s=128&g=1", "display_name": "c0degeas", "link": "https://stackoverflow.com/users/6188720/c0degeas"}, "edited": false, "score": 0, "creation_date": 1538995653, "post_id": 35967196, "comment_id": 92327556, "body": "Be careful, in case the result is a number, it returns the total number of digits. Eg, if SearchData is &quot;1234567890&quot;, the length will be 10, rather than 1."}], "tags": [], "owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "is_accepted": true, "score": 65, "last_activity_date": 1482132564, "last_edit_date": 1482132564, "creation_date": 1457849908, "answer_id": 35967196, "question_id": 35967109, "link": "https://stackoverflow.com/questions/35967109/how-to-compare-the-length-of-a-list-in-html-template-in-golang/35967196#35967196", "title": "How to compare the length of a list in html/template in golang?", "body": "<p>From documentation,</p>\n\n<blockquote>\n  <p>{{if pipeline}} T1 {{end}}:   If the value of the pipeline is empty, no\n  output is generated;  otherwise, T1 is executed.  The empty values are\n  false, 0, any     nil pointer or interface value, and any array, slice,\n  map, or   string of length zero.  Dot is unaffected.</p>\n</blockquote>\n\n<p>So if you want to check if the <code>.SearchData</code> slice/array/map is empty just use,</p>\n\n<pre><code>{{if not .SearchData}} Nothing to show {{end}}\n</code></pre>\n\n<p>Even your code runs fine if string <code>\"0\"</code> is replaced by int <code>0</code></p>\n\n<pre><code>{{ $length := len .SearchData }} {{ if eq $length 0 }}\n    Sorry. No matching results found\n{{ end }}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/Q44qyRbKRB\" rel=\"noreferrer\">http://play.golang.org/p/Q44qyRbKRB</a></p>\n"}, {"tags": [], "owner": {"reputation": 1061, "user_id": 514308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daf54d45d90f3cfa77f8b2ba778af15a?s=128&d=identicon&r=PG", "display_name": "emicklei", "link": "https://stackoverflow.com/users/514308/emicklei"}, "is_accepted": false, "score": 53, "last_activity_date": 1478698190, "creation_date": 1478698190, "answer_id": 40508202, "question_id": 35967109, "link": "https://stackoverflow.com/questions/35967109/how-to-compare-the-length-of-a-list-in-html-template-in-golang/40508202#40508202", "title": "How to compare the length of a list in html/template in golang?", "body": "<p>A shorter version</p>\n\n<pre><code>{{ if eq (len .SearchData) 0 }}\n    Sorry. No matching results found\n{{ end }}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7907, "user_id": 1592008, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e208220f7cb95e6854adb653663736a?s=128&d=identicon&r=PG", "display_name": "Oleg Neumyvakin", "link": "https://stackoverflow.com/users/1592008/oleg-neumyvakin"}, "is_accepted": false, "score": 8, "last_activity_date": 1516782737, "creation_date": 1516782737, "answer_id": 48417955, "question_id": 35967109, "link": "https://stackoverflow.com/questions/35967109/how-to-compare-the-length-of-a-list-in-html-template-in-golang/48417955#48417955", "title": "How to compare the length of a list in html/template in golang?", "body": "<p>There is <code>{{ else }}</code> for <code>{{ range }}</code> Works well for maps as well <a href=\"https://play.golang.org/p/7xJ1LXL2u09\" rel=\"noreferrer\">https://play.golang.org/p/7xJ1LXL2u09</a>:</p>\n\n<pre><code>{{range $item := . }}    \n    &lt;span&gt;{{ $item }}&lt;/span&gt;\n{{ else }}\n    &lt;span&gt;Sorry no rows here&lt;/span&gt;\n{{ end }}\n</code></pre>\n"}], "owner": {"reputation": 2144, "user_id": 3103732, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ddea83f3d0a1cde074665d4c1382c3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Dany", "link": "https://stackoverflow.com/users/3103732/dany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35935, "favorite_count": 6, "accepted_answer_id": 35967196, "answer_count": 3, "score": 37, "last_activity_date": 1516782737, "creation_date": 1457849210, "question_id": 35967109, "link": "https://stackoverflow.com/questions/35967109/how-to-compare-the-length-of-a-list-in-html-template-in-golang", "title": "How to compare the length of a list in html/template in golang?", "body": "<p>I am trying to compare the length of a list in golang html/template. But it is loading forever in html.</p>\n\n<pre><code>{{ $length := len .SearchData }} {{ if eq $length \"0\" }}\n    Sorry. No matching results found\n{{ end }}\n</code></pre>\n\n<p>Could anyone help me with this?</p>\n"}, {"tags": ["go", "header", "server", "cors", "local"], "answers": [{"comments": [{"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "edited": false, "score": 0, "creation_date": 1457889112, "post_id": 35966550, "comment_id": 59600618, "body": "Kudos! the implementations of NULL or absence of value are different among languages and platforms (i.e. JSON&#39;s is <code>null</code>, Python is <code>None</code>, Go is <code>nil</code>). For the HTTP Header, it&#39;s text-only format thus there is no way (and perhaps not desireable) for <code>nil</code> in Go to be converted to <code>null</code>."}], "tags": [], "owner": {"reputation": 4515, "user_id": 4808079, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/hXTld.jpg?s=128&g=1", "display_name": "Seph Reed", "link": "https://stackoverflow.com/users/4808079/seph-reed"}, "is_accepted": true, "score": 2, "last_activity_date": 1457843994, "creation_date": 1457843994, "answer_id": 35966550, "question_id": 35966549, "link": "https://stackoverflow.com/questions/35966549/golang-setting-header-to-null-for-a-file-to-http-request-not-working/35966550#35966550", "title": "GoLang: Setting header to null for a file:// to http:// request not working", "body": "<p>After writing up this question, I thought to try one last thing out of desperation, and it worked.</p>\n\n<pre><code>func handler(w http.ResponseWriter, r *http.Request) {\n    w.Header().Add(\"Access-Control-Allow-Origin\", \"null\")\n    fmt.Fprintf(w, \"Hi there, I love %s!\", r.URL.Path[1:])\n}\n</code></pre>\n\n<p>You're supposed to set the string to <code>\"null\"</code>, rather than a null string <code>\"\"</code> or <code>nil</code></p>\n\n<p>If you don't think this question belongs on SO, please leave a comment and I'll promptly take it down.</p>\n"}], "owner": {"reputation": 4515, "user_id": 4808079, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/hXTld.jpg?s=128&g=1", "display_name": "Seph Reed", "link": "https://stackoverflow.com/users/4808079/seph-reed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "accepted_answer_id": 35966550, "answer_count": 1, "score": -1, "last_activity_date": 1457843994, "creation_date": 1457843994, "last_edit_date": 1495541266, "question_id": 35966549, "link": "https://stackoverflow.com/questions/35966549/golang-setting-header-to-null-for-a-file-to-http-request-not-working", "title": "GoLang: Setting header to null for a file:// to http:// request not working", "body": "<p><a href=\"https://stackoverflow.com/a/4276931/4808079\">This answer</a> about static to static (file:// -> file://) states that a webserver (http://) can be used to serve files to a local static page (file://) without violating CORS.  And <a href=\"https://stackoverflow.com/a/8456586/4808079\">this answer</a> states that when sending data from a webserver to a static page, a header of <code>null</code> must be used.  But neither of the two lines below are working, so how do I do it?</p>\n\n<pre><code>func handler(w http.ResponseWriter, r *http.Request) {\n    w.Header().Add(\"Access-Control-Allow-Origin\", nil) //this line\n    fmt.Fprintf(w, \"Hi there, I love %s!\", r.URL.Path[1:])\n}\n</code></pre>\n\n<p>returns the error <code>./main.go:42: cannot use nil as type string in argument to w.Header().Add</code></p>\n\n<pre><code>func handler(w http.ResponseWriter, r *http.Request) {\n    w.Header().Add(\"Access-Control-Allow-Origin\", \"\")\n    fmt.Fprintf(w, \"Hi there, I love %s!\", r.URL.Path[1:])\n}\n</code></pre>\n\n<p>This compiles but throws the client side error: <code>Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/aardvark/posts. (Reason: CORS header 'Access-Control-Allow-Origin' missing)</code></p>\n"}, {"tags": ["go", "channel"], "answers": [{"comments": [{"owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "edited": false, "score": 0, "creation_date": 1457841970, "post_id": 35966316, "comment_id": 59587344, "body": "That&#39;s a perfect answer. Somehow, I just confused myself with this."}], "tags": [], "owner": {"reputation": 15950, "user_id": 324978, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9a271d8f6946301fa1f0c0fc4c7b9f14?s=128&d=identicon&r=PG", "display_name": "robbrit", "link": "https://stackoverflow.com/users/324978/robbrit"}, "is_accepted": true, "score": 11, "last_activity_date": 1457841722, "creation_date": 1457841722, "answer_id": 35966316, "question_id": 35966277, "link": "https://stackoverflow.com/questions/35966277/sending-directly-from-one-channel-to-another/35966316#35966316", "title": "Sending directly from one channel to another", "body": "<p>I'm not 100% sure I understand the question, but let's give it a shot.</p>\n\n<p>Consider this line:</p>\n\n<pre><code>chan_of_chans &lt;- my_chan\n</code></pre>\n\n<p>What you're actually doing is pushing <code>my_chan</code> into the channel, rather than removing something from <code>my_chan</code> and pushing it into <code>chan_of_chans</code>.</p>\n\n<p>If you want to extract something from <code>my_chan</code> and send it to another channel, you need to extract it by using the <code>&lt;-</code> operator right before the channel without a space:</p>\n\n<pre><code>value := &lt;-my_chan\nother_chan &lt;- value\n</code></pre>\n\n<p>Alternatively, this should work:</p>\n\n<pre><code>other_chan &lt;- (&lt;-my_chan)\n</code></pre>\n"}], "owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1427, "favorite_count": 2, "accepted_answer_id": 35966316, "answer_count": 1, "score": 3, "last_activity_date": 1457842302, "creation_date": 1457841395, "last_edit_date": 1457842302, "question_id": 35966277, "link": "https://stackoverflow.com/questions/35966277/sending-directly-from-one-channel-to-another", "title": "Sending directly from one channel to another", "body": "<p>I stumbled upon what I found to be surprising behavior when sending from one channel directly to another channel:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n    my_chan := make(chan string)\n    chan_of_chans := make(chan chan string)\n\n    go func() {\n        my_chan &lt;- \"Hello\"\n    }()\n\n    go func() {\n        chan_of_chans &lt;- my_chan\n    }()\n\n    fmt.Println(&lt;- &lt;- chan_of_chans)\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/ClYjSrGdPM\" rel=\"nofollow\">Go Playground</a></p>\n\n<p>I expected <code>&lt;- my_chan</code> to send <code>\"Hello\"</code> type <code>string</code>. However, it sends type <code>chan string</code> and my code runs fine. This means that what is being (<code>string</code> or <code>chan string</code>) sent depends on the type of the receiver.</p>\n\n<p>I tried naive googling, but since I am not familiar with proper terminology I came up with nothing. Is there a proper term associated with the above behavior? Any additional insight is great of course.</p>\n"}, {"tags": ["json", "go", "go-interface"], "answers": [{"comments": [{"owner": {"reputation": 1638, "user_id": 448844, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/23d9a83bfedeaa2c56a49edd134ec2ea?s=128&d=identicon&r=PG", "display_name": "7hacker", "link": "https://stackoverflow.com/users/448844/7hacker"}, "edited": false, "score": 0, "creation_date": 1457840374, "post_id": 35965667, "comment_id": 59587089, "body": "Awesome! This works! Although I have two follow up questions: This seems a bit roundabout - We first marshal and then unmarshal - is that normal? Is there a way to directly obtain Person struct from map[string]interface{} ? . My second question: lets say email_address field did not exist in data(since its an omitempty field). Do i need to do anything special with the Unmarshal call? Or the above would still work?"}, {"owner": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "reply_to_user": {"reputation": 1638, "user_id": 448844, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/23d9a83bfedeaa2c56a49edd134ec2ea?s=128&d=identicon&r=PG", "display_name": "7hacker", "link": "https://stackoverflow.com/users/448844/7hacker"}, "edited": false, "score": 0, "creation_date": 1457842088, "post_id": 35965667, "comment_id": 59587355, "body": "@nthacker, it is somewhat roundabout, but for all I know, there isn&#39;t a simple way to convert a map directly into a struct. The real question, however, is where are you getting that map from in the first place? Why is the thing that&#39;s producing it not simply giving you a struct? Maybe you could refactor your code so that you don&#39;t need a map at all. As for your second question... is there something that prevents your from trying it out yourself?"}, {"owner": {"reputation": 1638, "user_id": 448844, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/23d9a83bfedeaa2c56a49edd134ec2ea?s=128&d=identicon&r=PG", "display_name": "7hacker", "link": "https://stackoverflow.com/users/448844/7hacker"}, "edited": false, "score": 0, "creation_date": 1457843458, "post_id": 35965667, "comment_id": 59587643, "body": "you are right on both counts! Thanks I&#39;ll look into both of those!"}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1457845996, "post_id": 35965667, "comment_id": 59588128, "body": "<a href=\"http://www.gorillatoolkit.org/pkg/schema\" rel=\"nofollow noreferrer\">gorillatoolkit.org/pkg/schema</a> or <a href=\"https://github.com/mitchellh/mapstructure\" rel=\"nofollow noreferrer\">github.com/mitchellh/mapstructure</a>"}], "tags": [], "owner": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "is_accepted": true, "score": 3, "last_activity_date": 1457835095, "creation_date": 1457835095, "answer_id": 35965667, "question_id": 35965579, "link": "https://stackoverflow.com/questions/35965579/create-a-struct-from-a-byte-array/35965667#35965667", "title": "Create a struct from a byte array", "body": "<p>You use <code>json.Unmarshal</code>:</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n)\n\ntype Person struct {\n    Name          string  `json:\"name\"`\n    StreetAddress string  `json:\"street_address\"`\n    Output        string  `json:\"output\"`\n    Status        float64 `json:\"status\"`\n    EmailAddress  string  `json:\"email_address\",omitempty\"`\n}\n\nfunc main() {\n    data := []byte(`{\"email_address\":\"joe@me.com\",\"street_address\":\"123 Anywhere Anytown\",\"name\":\"joe\",\"output\":\"Hello World\",\"status\":1}`)\n    var p Person\n    if err := json.Unmarshal(data, &amp;p); err != nil {\n        panic(err)\n    }\n    fmt.Printf(\"%#v\\n\", p)\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>main.Person{Name:\"joe\", StreetAddress:\"123 Anywhere Anytown\", Output:\"Hello World\", Status:1, EmailAddress:\"joe@me.com\"}\n</code></pre>\n"}], "owner": {"reputation": 1638, "user_id": 448844, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/23d9a83bfedeaa2c56a49edd134ec2ea?s=128&d=identicon&r=PG", "display_name": "7hacker", "link": "https://stackoverflow.com/users/448844/7hacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "accepted_answer_id": 35965667, "answer_count": 1, "score": 0, "last_activity_date": 1457862817, "creation_date": 1457834262, "last_edit_date": 1457862817, "question_id": 35965579, "link": "https://stackoverflow.com/questions/35965579/create-a-struct-from-a-byte-array", "title": "Create a struct from a byte array", "body": "<p>I use the <a href=\"https://golang.org/pkg/encoding/json/#Marshal\" rel=\"nofollow\"><code>json.Marshal</code></a> interface to accept a <code>map[string]interface{}</code> and convert it to a <code>[]byte</code> (is this a byte array?)</p>\n\n<pre><code>data, _ := json.Marshal(value)\nlog.Printf(\"%s\\n\", data)\n</code></pre>\n\n<p>I get this output</p>\n\n<pre><code>{\"email_address\":\"joe@me.com\",\"street_address\":\"123 Anywhere Anytown\",\"name\":\"joe\",\"output\":\"Hello World\",\"status\":1}\n</code></pre>\n\n<p>The underlying bytes pertain to the struct of the below declaration</p>\n\n<pre><code>type Person struct {\n    Name           string  `json:\"name\"`\n    StreetAddress  string  `json:\"street_address\"`\n    Output         string  `json:\"output\"`\n    Status         float64 `json:\"status\"`\n    EmailAddress   string  `json:\"email_address\",omitempty\"`\n}\n</code></pre>\n\n<p>I'd like to take <code>data</code> and generate a variable of type <code>Person struct</code></p>\n\n<p>How do I do that?</p>\n"}, {"tags": ["image", "go", "graphics", "png"], "comments": [{"owner": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "edited": false, "score": 3, "creation_date": 1457826359, "post_id": 35964656, "comment_id": 59584372, "body": "What kind of trouble are you having? What have you tried so far? In any case, the general princinple is to create a new, big target image and then copy pixels from the source images into the target image."}, {"owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "reply_to_user": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "edited": false, "score": 0, "creation_date": 1457827192, "post_id": 35964656, "comment_id": 59584594, "body": "Well so far I am only able to take the pixel data from a png and form a new RGBA and then decode that internally as a png which I pass to OpenGL. However, i&#39;m not quite sure how to take this &quot;decoded&quot; png data that I read from the .png file and copy/create a bigger image from that"}], "answers": [{"comments": [{"owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 3, "creation_date": 1457843027, "post_id": 35965499, "comment_id": 59587553, "body": "I really like this answer as it is very well formatted, explained each section individually, concise, used a lot of existing go functionality."}, {"owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "reply_to_user": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 0, "creation_date": 1458324108, "post_id": 35965499, "comment_id": 59826830, "body": "efel, thanks. looks like I have confused between right and left ealiar. edited to fix :)"}, {"owner": {"reputation": 361, "user_id": 4205778, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/-67ocuJiNWxI/AAAAAAAAAAI/AAAAAAAAAFQ/fbNxuIQOe1M/photo.jpg?sz=128", "display_name": "Rakin Alam", "link": "https://stackoverflow.com/users/4205778/rakin-alam"}, "edited": false, "score": 0, "creation_date": 1554493405, "post_id": 35965499, "comment_id": 97787963, "body": "Hi I am trying to use this code a bit differently in my post, some input from you would be very helpful: <a href=\"https://stackoverflow.com/questions/55542284/how-do-i-concat-multiple-image-into-a-single-image\" title=\"how do i concat multiple image into a single image\">stackoverflow.com/questions/55542284/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "is_accepted": true, "score": 27, "last_activity_date": 1606139956, "last_edit_date": 1606139956, "creation_date": 1457833322, "answer_id": 35965499, "question_id": 35964656, "link": "https://stackoverflow.com/questions/35964656/golang-how-to-concatenate-append-images-to-one-another/35965499#35965499", "title": "Golang how to concatenate/append images to one another", "body": "<p>Create a new empty image (NewRGBA) that has bounds large enough to hold both images. Then use the <code>Draw</code> method to draw each image on appropriate parts of this new large image.</p>\n<p>Here are steps with code.</p>\n<p>Load two images.</p>\n<pre><code>imgFile1, err := os.Open(&quot;test1.jpg&quot;)\nif err != nil {\n    fmt.Println(err)\n}\nimgFile2, err := os.Open(&quot;test2.jpg&quot;)\nif err != nil {\n    fmt.Println(err)\n}\nimg1, _, err := image.Decode(imgFile1)\nif err != nil {\n    fmt.Println(err)\n}\nimg2, _, err := image.Decode(imgFile2)\nif err != nil {\n    fmt.Println(err)\n}\n</code></pre>\n<p>Let's draw the second image to the right of the first image. So the starting point of it should be at <code>(w, 0)</code> where <code>w</code> is the width of the first image. The bottom right point of the first image will be the bottom left point of the second.</p>\n<pre><code>//starting position of the second image (bottom left)\nsp2 := image.Point{img1.Bounds().Dx(), 0}\n</code></pre>\n<p>It should be in a rectangle large enough to hold it.</p>\n<pre><code>//new rectangle for the second image\nr2 := image.Rectangle{sp2, sp2.Add(img2.Bounds().Size())}\n</code></pre>\n<p>Now create a large rectangle that will be wide enough to hold both images.</p>\n<pre><code>//rectangle for the big image\nr := image.Rectangle{image.Point{0, 0}, r2.Max}\n</code></pre>\n<p>Note This large image will have the height of the second image. If the first image is higher it will be cropped.</p>\n<p>Create a new image.</p>\n<pre><code>rgba := image.NewRGBA(r)\n</code></pre>\n<p>Now you can draw the two images into this new image</p>\n<pre><code>draw.Draw(rgba, img1.Bounds(), img1, image.Point{0, 0}, draw.Src)\ndraw.Draw(rgba, r2, img2, image.Point{0, 0}, draw.Src)\n</code></pre>\n<p>Since we created <code>r2</code> so its to the right of the first image, second image will be drawn to the right.</p>\n<p>Finally you can export it.</p>\n<pre><code>out, err := os.Create(&quot;./output.jpg&quot;)\nif err != nil {\n    fmt.Println(err)\n}\n\nvar opt jpeg.Options\nopt.Quality = 80\n\njpeg.Encode(out, rgba, &amp;opt)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "edited": false, "score": 6, "creation_date": 1457843064, "post_id": 35965872, "comment_id": 59587560, "body": "A lot of work went into this answer, I like it as well.  Very modular."}, {"owner": {"reputation": 2571, "user_id": 2422530, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/zlebS.jpg?s=128&g=1", "display_name": "Obi Wan - PallavJha", "link": "https://stackoverflow.com/users/2422530/obi-wan-pallavjha"}, "edited": false, "score": 0, "creation_date": 1595753763, "post_id": 35965872, "comment_id": 111578165, "body": "This is a great answer. As the functions were correctly telling their roles in the entire operation, it became easy to understand"}], "tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": false, "score": 9, "last_activity_date": 1457838133, "last_edit_date": 1457838133, "creation_date": 1457837299, "answer_id": 35965872, "question_id": 35964656, "link": "https://stackoverflow.com/questions/35964656/golang-how-to-concatenate-append-images-to-one-another/35965872#35965872", "title": "Golang how to concatenate/append images to one another", "body": "<p>Your life would be much easier if you make a few things into functions and create a struct to make sense of each pixel.</p>\n\n<pre><code>// Create a struct to deal with pixel\ntype Pixel struct {\n    Point image.Point\n    Color color.Color\n}\n\n// Keep it DRY so don't have to repeat opening file and decode\nfunc OpenAndDecode(filepath string) (image.Image, string, error) {\n    imgFile, err := os.Open(filepath)\n    if err != nil {\n        panic(err)\n    }\n    defer imgFile.Close()\n    img, format, err := image.Decode(imgFile)\n    if err != nil {\n        panic(err)\n    }\n    return img, format, nil\n}\n\n// Decode image.Image's pixel data into []*Pixel\nfunc DecodePixelsFromImage(img image.Image, offsetX, offsetY int) []*Pixel {\n    pixels := []*Pixel{}\n    for y := 0; y &lt;= img.Bounds().Max.Y; y++ {\n        for x := 0; x &lt;= img.Bounds().Max.X; x++ {\n            p := &amp;Pixel{\n                Point: image.Point{x + offsetX, y + offsetY},\n                Color: img.At(x, y),\n            }\n            pixels = append(pixels, p)\n        }\n    }\n    return pixels\n}\n\nfunc main() {\n    img1, _, err := OpenAndDecode(\"makey.png\")\n    if err != nil {\n        panic(err)\n    }\n    img2, _, err := OpenAndDecode(\"sample.jpg\")\n    if err != nil {\n        panic(err)\n    }\n    // collect pixel data from each image\n    pixels1 := DecodePixelsFromImage(img1, 0, 0)\n    // the second image has a Y-offset of img1's max Y (appended at bottom)\n    pixels2 := DecodePixelsFromImage(img2, 0, img1.Bounds().Max.Y)\n    pixelSum := append(pixels1, pixels2...)\n\n    // Set a new size for the new image equal to the max width\n    // of bigger image and max height of two images combined\n    newRect := image.Rectangle{\n        Min: img1.Bounds().Min,\n        Max: image.Point{\n            X: img2.Bounds().Max.X,\n            Y: img2.Bounds().Max.Y + img1.Bounds().Max.Y,\n        },\n    }\n    finImage := image.NewRGBA(newRect)\n    // This is the cool part, all you have to do is loop through\n    // each Pixel and set the image's color on the go\n    for _, px := range pixelSum {\n            finImage.Set(\n                px.Point.X,\n                px.Point.Y,\n                px.Color,\n            )\n    }\n    draw.Draw(finImage, finImage.Bounds(), finImage, image.Point{0, 0}, draw.Src)\n\n    // Create a new file and write to it\n    out, err := os.Create(\"./output.png\")\n    if err != nil {\n        panic(err)\n        os.Exit(1)\n    }\n    err = png.Encode(out, finImage)\n    if err != nil {\n        panic(err)\n        os.Exit(1)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 1798899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cae1de017e1ccb8521cacd6f37aa869?s=128&d=identicon&r=PG&f=1", "display_name": "Ozan", "link": "https://stackoverflow.com/users/1798899/ozan"}, "is_accepted": false, "score": 3, "last_activity_date": 1569846466, "last_edit_date": 1569846466, "creation_date": 1569729601, "answer_id": 58152136, "question_id": 35964656, "link": "https://stackoverflow.com/questions/35964656/golang-how-to-concatenate-append-images-to-one-another/58152136#58152136", "title": "Golang how to concatenate/append images to one another", "body": "<p>I built a library exactly for this purpose.</p>\n\n<p>You can use it as follows;</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>import gim \"github.com/ozankasikci/go-image-merge\"\n\ngrids := []*gim.Grid{\n    {ImageFilePath: \"test1.jpg\"},\n    {ImageFilePath: \"test2.png\"},\n}\n\n// merge the images into a 2x1 grid\nrgba, err := gim.New(grids, 2, 1).Merge()\n\n// save the output to jpg or png\nfile, err := os.Create(\"file/path.jpg|png\")\nerr = jpeg.Encode(file, rgba, &amp;jpeg.Options{Quality: 80})\n</code></pre>\n\n<p><a href=\"https://github.com/ozankasikci/go-image-merge\" rel=\"nofollow noreferrer\">https://github.com/ozankasikci/go-image-merge</a></p>\n"}], "owner": {"reputation": 876, "user_id": 2305723, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23e6e73c52938ec01c706097cf4e8943?s=128&d=identicon&r=PG", "display_name": "efel", "link": "https://stackoverflow.com/users/2305723/efel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8185, "favorite_count": 8, "accepted_answer_id": 35965499, "answer_count": 3, "score": 12, "last_activity_date": 1606139956, "creation_date": 1457825808, "last_edit_date": 1457827363, "question_id": 35964656, "link": "https://stackoverflow.com/questions/35964656/golang-how-to-concatenate-append-images-to-one-another", "title": "Golang how to concatenate/append images to one another", "body": "<p>Go has great image manipulation and data libraries however I'm having trouble creating one big image from smaller ones.  Does anyone know how to take two png or jpeg files in Golang and concatenate them to form one big image that encompasses the two (or more) files?</p>\n\n<p>i'm currently reading png files like so:</p>\n\n<pre><code>imgFile, err := os.Open(path)\nif err != nil {\n    return Image{}, err\n}\nimg, _, err := image.Decode(imgFile)\nif err != nil {\n    return Image{}, err\n}\n\nrgba := image.NewRGBA(img.Bounds())\nif rgba.Stride != rgba.Rect.Size().X*4 {\n    return Image{}, fmt.Errorf(\"unsupported stride\")\n}\ndraw.Draw(rgba, rgba.Bounds(), img, image.Point{0, 0}, draw.Src)\n</code></pre>\n\n<p>I'm confused on how to take this png RGBA data and concatenate with other RGBA data and/or combine that into an \"empty\" image. </p>\n"}, {"tags": ["reflection", "go", "struct"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 2400241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96f9a202de5eb71cb0a5b1ba6bbe5cf?s=128&d=identicon&r=PG", "display_name": "jayshua", "link": "https://stackoverflow.com/users/2400241/jayshua"}, "edited": false, "score": 0, "creation_date": 1457832793, "post_id": 35965102, "comment_id": 59585850, "body": "Thanks, that&#39;s certainly farther than I got. However, I can&#39;t declare a srcArray of length <code>field.Len()</code>. The structure&#39;s array may not always be of length 2, and I need to read however many bytes are necessary. Sorry if that wasn&#39;t clear, I&#39;ll update the question."}, {"owner": {"reputation": 47, "user_id": 2400241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96f9a202de5eb71cb0a5b1ba6bbe5cf?s=128&d=identicon&r=PG", "display_name": "jayshua", "link": "https://stackoverflow.com/users/2400241/jayshua"}, "edited": false, "score": 0, "creation_date": 1457833198, "post_id": 35965102, "comment_id": 59585936, "body": "Turns out if I use <code>srcArr := make([]byte, field.Len())</code> to make the slice, <code>reflect.Copy</code> can copy that slice into the structure. Thanks for the help!"}, {"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "reply_to_user": {"reputation": 47, "user_id": 2400241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96f9a202de5eb71cb0a5b1ba6bbe5cf?s=128&d=identicon&r=PG", "display_name": "jayshua", "link": "https://stackoverflow.com/users/2400241/jayshua"}, "edited": false, "score": 0, "creation_date": 1457834322, "post_id": 35965102, "comment_id": 59586146, "body": "Yes, your method of <code>srcArr := make([]byte, field.Len())</code> creates an equivalent of  <code>srcArr[:]</code>. You mind ticking my answer as the right one since there&#39;s no other?"}], "tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": true, "score": 0, "last_activity_date": 1457830194, "last_edit_date": 1457830194, "creation_date": 1457829148, "answer_id": 35965102, "question_id": 35963741, "link": "https://stackoverflow.com/questions/35963741/copying-a-slice-into-a-reflected-array/35965102#35965102", "title": "Copying a slice into a reflected array", "body": "<p><code>copy</code> does work if you \"trick\" the array into thinking it's a slice.</p>\n\n<pre><code>copy(myStruct.QuestionType[:], buffer.Bytes())\n</code></pre>\n\n<p>In your case, you can use <code>reflect.Copy</code> together with the above technique like so:</p>\n\n<pre><code>if field.Kind() == reflect.Array {\n    srcArr := [2]byte{}\n    copy(srcArr[:], buffer.Bytes())\n    reflect.Copy(field, reflect.ValueOf(srcArr))\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 2400241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96f9a202de5eb71cb0a5b1ba6bbe5cf?s=128&d=identicon&r=PG", "display_name": "jayshua", "link": "https://stackoverflow.com/users/2400241/jayshua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 35965102, "answer_count": 1, "score": 1, "last_activity_date": 1457832860, "creation_date": 1457819411, "last_edit_date": 1457832860, "question_id": 35963741, "link": "https://stackoverflow.com/questions/35963741/copying-a-slice-into-a-reflected-array", "title": "Copying a slice into a reflected array", "body": "<p>I have a structure that looks like this:</p>\n\n<pre><code>type Record struct {\n   Name         string\n   QuestionType [2]byte // Array may be arbitrary length\n   Class        [3]byte\n}\n</code></pre>\n\n<p>I am attempting to fill the structure with bytes from a <code>bytes.Buffer</code> (I am unable to use binary.Read due to some additional complexity in the byte data.) I'm using the <code>reflect</code> package to iterate over the elements of the structure, and read from the bytes.Buffer into the structure.</p>\n\n<pre><code>func fillStructure(buffer *bytes.Buffer) *Record {\n   // This is hard-coded now, but will be passed in as an interface later\n   myStruct := Record{}\n   reflectedStruct := reflect.ValueOf(&amp;myStruct).Elem()\n\n   for i := 0; i &lt; reflectedStruct.NumField(); i++ {\n      field := reflectedStruct.Field(i)\n\n      if field.Kind() == reflect.Array {\n         // Copy bytes from buffer into structure\n      }\n   }\n\n   return &amp;myStruct\n}\n</code></pre>\n\n<p>However, when I attempt to fill the [n]byte arrays with n bytes from the buffer, I find myself unable to copy the slice returned by <code>buffer.Next(n)</code> into the array in the struct. </p>\n\n<ul>\n<li><code>field.Set()</code> doesn't work because []byte is incompatible with [n]byte.</li>\n<li><code>copy()</code> doesn't work because I can't find a way to get a slice of the struct's array</li>\n</ul>\n\n<p><strong>Question</strong>: Is there a way to get a slice \"view\" of the reflected structure's array so I can copy the values in? Or some other way to copy the slice returned by buffer into the structure?</p>\n"}, {"tags": ["http", "parsing", "url", "go", "absolute-path"], "comments": [{"owner": {"reputation": 17024, "user_id": 1296707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc4319dbdd4adbb6d25f1eb2309eec20?s=128&d=identicon&r=PG", "display_name": "Markus W Mahlberg", "link": "https://stackoverflow.com/users/1296707/markus-w-mahlberg"}, "edited": false, "score": 2, "creation_date": 1457824578, "post_id": 35962971, "comment_id": 59583937, "body": "This was extensively discussed on #go-nuts, no? A href without a protocol is either malformed in case a remote host is supposed to be referenced, &quot;protocol relative&quot; if it starts with two slashes <code>&#47;&#47;</code>, absolute on the current host in case it starts with a single <code>&#47;</code> or relative if not. There is no way of differentiating wether &quot;www.example.com/&quot; is supposed to be a host reference or a relative url."}, {"owner": {"reputation": 1776, "user_id": 4435175, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/UCpoD.gif?s=128&g=1", "display_name": "Vega", "link": "https://stackoverflow.com/users/4435175/vega"}, "reply_to_user": {"reputation": 17024, "user_id": 1296707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc4319dbdd4adbb6d25f1eb2309eec20?s=128&d=identicon&r=PG", "display_name": "Markus W Mahlberg", "link": "https://stackoverflow.com/users/1296707/markus-w-mahlberg"}, "edited": false, "score": 0, "creation_date": 1457869168, "post_id": 35962971, "comment_id": 59593712, "body": "Yes, but I created this question before the discussion in IRC."}], "answers": [{"comments": [{"owner": {"reputation": 1776, "user_id": 4435175, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/UCpoD.gif?s=128&g=1", "display_name": "Vega", "link": "https://stackoverflow.com/users/4435175/vega"}, "edited": false, "score": 0, "creation_date": 1457869298, "post_id": 35966387, "comment_id": 59593757, "body": "I just tested it in Firefox and Chrome and you&#39;re right, the browsers interpret it as &quot;/current/path/www.example.com&quot;, leading to a 404 error on that site. So I will do the same."}], "tags": [], "owner": {"reputation": 15950, "user_id": 324978, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9a271d8f6946301fa1f0c0fc4c7b9f14?s=128&d=identicon&r=PG", "display_name": "robbrit", "link": "https://stackoverflow.com/users/324978/robbrit"}, "is_accepted": true, "score": 1, "last_activity_date": 1457842538, "creation_date": 1457842538, "answer_id": 35966387, "question_id": 35962971, "link": "https://stackoverflow.com/questions/35962971/wrong-url-parsing-with-url-resolvereference-if-http-is-missing/35966387#35966387", "title": "Wrong URL parsing with url.ResolveReference() if http:// is missing", "body": "<p>Unfortunately there's no real \"fix\" for this, because if you get a link with an href like this:</p>\n\n<pre><code>www.example.com\n</code></pre>\n\n<p>In the general case it's ambiguous between:</p>\n\n<pre><code>http://host.tld/path/to/www.example.com\nhttp://www.example.com\n</code></pre>\n\n<p>In fact, most browsers treat a link like this:</p>\n\n<pre><code>&lt;a href=\"www.example.com\"&gt;\n</code></pre>\n\n<p>As this:</p>\n\n<pre><code>&lt;a href=\"/current/path/www.example.com\"&gt;\n</code></pre>\n\n<p>I'd suggest doing the same (since this is a bug with the person's website), and if you get a 404 just treat it as you would any other.</p>\n"}], "owner": {"reputation": 1776, "user_id": 4435175, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/UCpoD.gif?s=128&g=1", "display_name": "Vega", "link": "https://stackoverflow.com/users/4435175/vega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 35966387, "answer_count": 1, "score": 2, "last_activity_date": 1457842538, "creation_date": 1457814877, "question_id": 35962971, "link": "https://stackoverflow.com/questions/35962971/wrong-url-parsing-with-url-resolvereference-if-http-is-missing", "title": "Wrong URL parsing with url.ResolveReference() if http:// is missing", "body": "<p>I've build a web crawler that searches a website for all links on that page and take this links and search on them for more links until the whole page is crawled. Worked perfectly until I came across a special site.</p>\n\n<p>Problem with their linking:</p>\n\n<p>Normal case 1: absolute path like '<a href=\"http://www.example.com/test\" rel=\"nofollow\">http://www.example.com/test</a>'</p>\n\n<p>Normal case 2: relative path like '/test'</p>\n\n<p>Problematic new case: absolute path without the http:// - just 'www.example.com'</p>\n\n<p>Example code that shows the problem:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"net/url\"\n)\n\nfunc main() {\n\n    u, err := url.Parse(\"http://www.example.com\")\n    if err != nil {\n        log.Fatal(err)\n    }\n    base, err := url.Parse(\"http://example.com/directory/\")\n        if err != nil {\n            log.Fatal(err)\n        }\n\n    u2, err := url.Parse(\"www.example.com\")\n    if err != nil {\n        log.Fatal(err)\n    }\n    base2, err := url.Parse(\"http://example.com/directory/\")\n        if err != nil {\n            log.Fatal(err)\n        }\n\n    fmt.Println(base.ResolveReference(u))\n    fmt.Println(base2.ResolveReference(u2))\n}\n\nhttp://www.example.com\nhttp://example.com/test/www.example.com\n</code></pre>\n\n<p>As you can see the second line gives back a wrong URL because the test for an absolute URL is u.IsAbs() = false if the http:// is missing ...</p>\n\n<p>Any ideas how to fix that? I have to test 100.000 - 1.000.000 links on a daily base, maybe more and it needs to be performant.</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "is_accepted": true, "score": 4, "last_activity_date": 1457814861, "creation_date": 1457814861, "answer_id": 35962969, "question_id": 35962922, "link": "https://stackoverflow.com/questions/35962922/newbufferbytes-int-int64-method-not-found-in-go-lang-bytes-package/35962969#35962969", "title": "NewBuffer([]bytes,int,int64) method not found in go lang bytes package", "body": "<p><code>make([]byte, 0, capacity)</code> returns a new byte slice (<code>[]byte</code>) initialized to length 0 and capacity <code>capacity</code>.</p>\n\n<p>In other words, it might help you to see it on multiple lines:</p>\n\n<pre><code>capacity := 100 // or whatever\nvar myBytes []byte = make([]byte, 0, capacity)\nbuf := bytes.NewBuffer(myBytes)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5726, "user_id": 2976830, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/OT27A.jpg?s=128&g=1", "display_name": "Yeahia2508", "link": "https://stackoverflow.com/users/2976830/yeahia2508"}, "edited": false, "score": 0, "creation_date": 1457815087, "post_id": 35962977, "comment_id": 59580961, "body": "How stupid I am. Wasted 1 hour to figure out this simple thing. Thank you very much."}], "tags": [], "owner": {"reputation": 21441, "user_id": 723693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b2fe761a7aa211adfb466500210412?s=128&d=identicon&r=PG", "display_name": "ain", "link": "https://stackoverflow.com/users/723693/ain"}, "is_accepted": false, "score": 2, "last_activity_date": 1457815251, "last_edit_date": 1457815251, "creation_date": 1457814906, "answer_id": 35962977, "question_id": 35962922, "link": "https://stackoverflow.com/questions/35962922/newbufferbytes-int-int64-method-not-found-in-go-lang-bytes-package/35962977#35962977", "title": "NewBuffer([]bytes,int,int64) method not found in go lang bytes package", "body": "<p>Youre missing the fact that you're calling the <code>bytes.NewBuffer()</code> function with a single parameter, which happens to be a method call - <a href=\"https://golang.org/ref/spec#Making_slices_maps_and_channels\" rel=\"nofollow\"><code>make([]byte, 0, capacity)</code></a> - which returns an byte slice.</p>\n"}], "owner": {"reputation": 5726, "user_id": 2976830, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/OT27A.jpg?s=128&g=1", "display_name": "Yeahia2508", "link": "https://stackoverflow.com/users/2976830/yeahia2508"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 35962969, "answer_count": 2, "score": -2, "last_activity_date": 1457815251, "creation_date": 1457814591, "question_id": 35962922, "link": "https://stackoverflow.com/questions/35962922/newbufferbytes-int-int64-method-not-found-in-go-lang-bytes-package", "title": "NewBuffer([]bytes,int,int64) method not found in go lang bytes package", "body": "<p>I'm new in go language. I'm trying to understand what's happening inside <a href=\"https://golang.org/src/io/ioutil/ioutil.go?s=1147:1188#L31\" rel=\"nofollow\">ioutil</a>.ReadAll(r Reader, capacity int64) method. Inside this method there is a line like:</p>\n\n<pre><code>buf := bytes.NewBuffer(make([]byte, 0, capacity))\n</code></pre>\n\n<p>But <strong>the problem is inside bytes package there is a NewBuffer method with only parameter</strong> like:</p>\n\n<pre><code>func NewBuffer(buf []byte) *Buffer\n</code></pre>\n\n<p>I searched <a href=\"https://golang.org/pkg/bytes/\" rel=\"nofollow\">bytes</a> package documentation again and again but can't find NewBuffer method with 3 parameter.</p>\n\n<p><strong>So actually from where NewBuffer(make([]byte, int, int64)) method calling?</strong></p>\n"}, {"tags": ["go", "yaml", "slice"], "comments": [{"owner": {"reputation": 200, "user_id": 6040694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a194f101db85d5b94cb0cd87f32edf3f?s=128&d=identicon&r=PG&f=1", "display_name": "animal", "link": "https://stackoverflow.com/users/6040694/animal"}, "edited": false, "score": 0, "creation_date": 1457815806, "post_id": 35962661, "comment_id": 59581187, "body": "are you using the newest package? &quot;github.com/go-yaml/yaml&quot; has been moved to &quot;gopkg.in/yaml.v2&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6010285, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2PgndJvLSrw/AAAAAAAAAAI/AAAAAAAAAMI/h_LNCmaHCp8/photo.jpg?sz=128", "display_name": "Tim Tanasse", "link": "https://stackoverflow.com/users/6010285/tim-tanasse"}, "edited": false, "score": 0, "creation_date": 1457821042, "post_id": 35963073, "comment_id": 59582898, "body": "This worked! Thanks I was previously using <code>var config Configuration</code>  to initialize  Can you explain why that works and this doesn&#39;t?"}, {"owner": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "reply_to_user": {"reputation": 13, "user_id": 6010285, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2PgndJvLSrw/AAAAAAAAAAI/AAAAAAAAAMI/h_LNCmaHCp8/photo.jpg?sz=128", "display_name": "Tim Tanasse", "link": "https://stackoverflow.com/users/6010285/tim-tanasse"}, "edited": false, "score": 0, "creation_date": 1457825430, "post_id": 35963073, "comment_id": 59584135, "body": "@TimTanasse, I added the explanation to my answer."}, {"owner": {"reputation": 13, "user_id": 6010285, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2PgndJvLSrw/AAAAAAAAAAI/AAAAAAAAAMI/h_LNCmaHCp8/photo.jpg?sz=128", "display_name": "Tim Tanasse", "link": "https://stackoverflow.com/users/6010285/tim-tanasse"}, "edited": false, "score": 0, "creation_date": 1457832395, "post_id": 35963073, "comment_id": 59585769, "body": "Thanks a bunch! Looks like I&#39;m a bit too used to Java"}], "tags": [], "owner": {"reputation": 3070, "user_id": 3566064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494d9fad1c8b66110f8dbadaf9607212?s=128&d=identicon&r=PG&f=1", "display_name": "LemurFromTheId", "link": "https://stackoverflow.com/users/3566064/lemurfromtheid"}, "is_accepted": true, "score": 3, "last_activity_date": 1457825383, "last_edit_date": 1457825383, "creation_date": 1457815445, "answer_id": 35963073, "question_id": 35962661, "link": "https://stackoverflow.com/questions/35962661/goyaml-struct-slices/35963073#35963073", "title": "GoYAML struct slices", "body": "<p>The following code works just fine for me, outputting the original yaml text as it should:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"gopkg.in/yaml.v2\"\n\nfunc main() {\n    c := &amp;Configuration{}\n    yaml.Unmarshal([]byte(yamlText), c) \n    buf, _ := yaml.Marshal(c)\n    fmt.Println(string(buf))\n}\n\nvar yamlText = ` \ninput:\n  file:\n  - file: stdin\n  webservice:\n  - port: \"0000\"\n    address: 0.0.0.0\nprocessing:\n  regex:\n  - regex: ^(this)*\n    mapping: (1) thing\noutput:\n  file:\n  - file: stdout\n  webservice:\n  - port: \"0000\"\n    address: 0.0.0.0\n`\n\ntype Configuration struct {\n    Input      ioInstance\n    Processing ProcessingInstance\n    Output     ioInstance\n}\n\ntype ioInstance struct {\n    File       []FileInstance\n    Webservice []WebserviceInstance\n}\n\ntype FileInstance struct {\n    File string\n}\n\ntype WebserviceInstance struct {\n    Port    string\n    Address string\n}\n\ntype ProcessingInstance struct {\n    Regex []RegexInstance\n}\n\ntype RegexInstance struct {\n    Regex   string\n    Mapping string\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>input:\n  file:\n  - file: stdin\n  webservice:\n  - port: \"0000\"\n    address: 0.0.0.0\nprocessing:\n  regex:\n  - regex: ^(this)*\n    mapping: (1) thing\noutput:\n  file:\n  - file: stdout\n  webservice:\n  - port: \"0000\"\n    address: 0.0.0.0\n</code></pre>\n\n<p>(Of course you should <em>not</em> ignore errors in your actual code, like I'm doing here.)</p>\n\n<p>EDIT:</p>\n\n<p><code>Unmarshal</code> needs a <em>pointer</em> to a struct in order to set its fields. If you call it with a plain struct value, it receives only a <em>copy</em> of the original struct (because in Go <em>everything</em> is passed as a copy), and therefore couldn't possibly alter the fields of the original struct.</p>\n\n<p>Therefore, you have basically two options:</p>\n\n<p>You can define and initialize <code>c</code> with <code>c := &amp;Configuration{}</code>, i.e. defining it as a pointer to type <code>Configuration</code> while simultaneously pointing it to a new, zeroed <code>Configuration</code> value. Then you can call <code>yaml.Unmarshal([]byte(yamlText), c)</code>.</p>\n\n<p>Alternatively you can define <code>c</code> with <code>var c Configuration</code>, which means <code>c</code> is not a pointer, but a new zero value of type <code>Configuration</code>. In this case you need to explicitly pass a pointer to that value when you call <code>Unmarshal</code>: <code>yaml.Unmarshal([]byte(yamlText), &amp;c)</code>.</p>\n\n<p>Note that the pointer you pass to Unmarshal must point to an <em>existing</em> <code>Configuration</code> value. <code>var c *Configuration</code> would define <code>c</code> as a pointer, but passing it immediately to <code>Unmarshal</code> would lead to an panic, as it's value is <code>nil</code>; it doesn't point to an existing <code>Configuration</code> value.</p>\n\n<p>Also, in my code above there was originally a little typo, which is now fixed (though the code still worked). I wrote both <code>c := &amp;Configuration{}</code> and <code>yaml.Unmarshal([]byte(yamlText), &amp;c)</code>, so I actually passed <code>Unmarshal</code> <em>a pointer to a pointer to a struct</em>, which <code>Unmarshal</code> was able to handle without issues.</p>\n"}], "owner": {"reputation": 13, "user_id": 6010285, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2PgndJvLSrw/AAAAAAAAAAI/AAAAAAAAAMI/h_LNCmaHCp8/photo.jpg?sz=128", "display_name": "Tim Tanasse", "link": "https://stackoverflow.com/users/6010285/tim-tanasse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1054, "favorite_count": 0, "accepted_answer_id": 35963073, "answer_count": 1, "score": 1, "last_activity_date": 1457825383, "creation_date": 1457812965, "question_id": 35962661, "link": "https://stackoverflow.com/questions/35962661/goyaml-struct-slices", "title": "GoYAML struct slices", "body": "<p>I am attempting to learn goyaml, and am having some issues with attempting to produce slices from yaml. I can marshal my struct into this example yaml, but I cannot unmarshal the same yaml back into the struct.</p>\n\n<pre><code> input:\n  file:\n  - file: stdin\n  webservice:\n  - port: \"0000\"\n    address: 0.0.0.0\nprocessing:\n  regex:\n  - regex: ^(this)*\n    mapping: (1) thing\noutput:\n  file:\n  - file: stdout\n  webservice:\n  - port: \"0000\"\n    address: 0.0.0.0\n</code></pre>\n\n<p>struct:</p>\n\n<pre><code>type Configuration struct{\n    Input ioInstance\n    Processing ProcessingInstance\n    Output ioInstance\n}\n\ntype ioInstance struct {\n    File []FileInstance\n    Webservice []WebserviceInstance\n}\n\ntype FileInstance struct {\n    File string\n}\n\ntype WebserviceInstance struct  {\n    Port string\n    Address string\n}\n\ntype ProcessingInstance struct {\n    Regex []RegexInstance\n}\n\ntype RegexInstance struct {\n    Regex string\n    Mapping string\n}\n</code></pre>\n\n<p>When testing unmarshaling I'm getting reflect errors, as I understand it I think I may need to re-approach the design without struct slices, I was hoping someone could offer some insight into this?</p>\n\n<p>errors:</p>\n\n<pre><code>panic: reflect: reflect.Value.Set using unaddressable value [recovered]\n    panic: reflect: reflect.Value.Set using unaddressable value [recovered]\n    panic: reflect: reflect.Value.Set using unaddressable value\n</code></pre>\n"}, {"tags": ["go", "docker", "client"], "comments": [{"owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 0, "creation_date": 1457853644, "post_id": 35962443, "comment_id": 59589684, "body": "Does the <a href=\"https://godoc.org/github.com/fsouza/go-dockerclient#Client.UploadToContainer\" rel=\"nofollow noreferrer\">upload archive to container</a> function do what you want? It also extracts the archive."}, {"owner": {"reputation": 6121, "user_id": 1513388, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a235aa59e48586dcab866c685d042874?s=128&d=identicon&r=PG", "display_name": "user1513388", "link": "https://stackoverflow.com/users/1513388/user1513388"}, "reply_to_user": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 0, "creation_date": 1457864228, "post_id": 35962443, "comment_id": 59592353, "body": "Yes that&#39;s fine I need the files extracted anyway. I noticed the python client had a copy function, buts that&#39;s been deprecated now."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 5288165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14850fcb5e985a35ed97b1d863a0be12?s=128&d=identicon&r=PG&f=1", "display_name": "Adi Clepcea", "link": "https://stackoverflow.com/users/5288165/adi-clepcea"}, "is_accepted": false, "score": 0, "last_activity_date": 1473187138, "creation_date": 1473187138, "answer_id": 39355756, "question_id": 35962443, "link": "https://stackoverflow.com/questions/35962443/go-dockerclient-uploadtocontainer-tar-examples/39355756#39355756", "title": "go-dockerclient `UploadToContainer` tar examples", "body": "<p>In case you still need it, that is how I have managed to upload a file (named test.txt) onto the container(in the /data dir) using go-dockerclient.</p>\n\n<pre><code>content := \"File content\"\n\nbuf := new(bytes.Buffer)\ntw := tar.NewWriter(buf)\nhdr := &amp;tar.Header{\n    Name: \"test.txt\",\n    Mode: 0644,\n    Size: int64(len(content)),\n}\nerr := tw.WriteHeader(hdr)\nif err != nil {\n    fmt.Println(err.Error())\n}\n_, err = tw.Write([]byte(content))\nif err != nil {\n    fmt.Println(err.Error())\n}\n\nin := sT{bytes.NewBufferString(string(buf.Bytes()))}\nopts := docker.UploadToContainerOptions{Path: \"data\", InputStream: in}\ncont, err := client.CreateContainer(options)\nif err != nil {\n    log.Printf(err.Error())\n    return\n}\nerr = client.UploadToContainer(container.ID, opts)\n</code></pre>\n\n<p>and sT is defined as:</p>\n\n<pre><code>type sT struct {\n   *bytes.Buffer\n}\n</code></pre>\n\n<p>You might still improve the code (like use a better aproach for the buffer), but for my tests this is ok.\nThe result is /data/test.txt containing the text \"File content\"</p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 6121, "user_id": 1513388, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a235aa59e48586dcab866c685d042874?s=128&d=identicon&r=PG", "display_name": "user1513388", "link": "https://stackoverflow.com/users/1513388/user1513388"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473187138, "creation_date": 1457811745, "last_edit_date": 1457873034, "question_id": 35962443, "link": "https://stackoverflow.com/questions/35962443/go-dockerclient-uploadtocontainer-tar-examples", "title": "go-dockerclient `UploadToContainer` tar examples", "body": "<p>Unlike the python docker client which I've been using there seems to be very few examples for how to use go-dockerclient. I'm trying to work out how to upload a tar archive to a docker container using <code>UploadToContainer</code> which is documented here: <a href=\"https://godoc.org/github.com/fsouza/go-dockerclient#Client.UploadToContainer\" rel=\"nofollow\">https://godoc.org/github.com/fsouza/go-dockerclient#Client.UploadToContainer</a></p>\n\n<p>I've built a .tar archive in memory which looks like this: </p>\n\n<pre><code>import (\n    \"archive/tar\"\n    \"bytes\"\n    \"fmt\"\n    \"log\"\n)\nfunc main() {\n    // Create a buffer to write our archive to.\n    buf := new(bytes.Buffer)\n\n    // Create a new tar archive.\n    tw := tar.NewWriter(buf)\n\n    // Add some files to the archive.\n    var files = []struct {\n        Name, Body string\n    }{\n        {\"file1.txt\", \"This archive contains some text files.\"},\n        {\"file2.txt\", \"Gopher names:\\nGeorge\\nGeoffrey\\nGonzo\"},\n        {\"file3.txt\", \"Get animal handling license.\"},\n    }\n    for _, file := range files {\n        hdr := &amp;tar.Header{\n            Name: file.Name,\n            Mode: 0600,\n            Size: int64(len(file.Body)),\n        }\n        if err := tw.WriteHeader(hdr); err != nil {\n            log.Fatalln(err)\n        }\n        if _, err := tw.Write([]byte(file.Body)); err != nil {\n            log.Fatalln(err)\n        }\n    }\n    // Make sure to check the error on Close.\n        if err := tw.Close(); err != nil {\n         log.Fatalln(err)\n    }\n    fmt.Print(buf)\n</code></pre>\n\n<p>I've also successfully created a docker-client like this:</p>\n\n<pre><code>import (\n    \"fmt\"\n\n    \"github.com/fsouza/go-dockerclient\"\n        \"os\"\n)\n\nfunc main() {\n    endpoint := \"https://localhost:52376\"\n    path := os.Getenv(\"DOCKER_CERT_PATH\")\n    ca := fmt.Sprintf(\"%s/ca.pem\", path)\n    cert := fmt.Sprintf(\"%s/cert.pem\", path)\n    key := fmt.Sprintf(\"%s/key.pem\", path)\n    client, _ := docker.NewTLSClient(endpoint, cert, key, ca)\n</code></pre>\n\n<p>I have a running container called <code>nginx-ssl</code> and I need to upload the tar archive to the container but can't work out whats needed to write the tar to my container.</p>\n\n<p>This what I do using python where <code>data</code> is an in  memory tar object thats been pre-created. </p>\n\n<pre><code>cli.put_archive(container='nginx-ssl', path=\"/keys\", data=newtar)\n</code></pre>\n\n<p>UPDATE\n++++++</p>\n\n<p>I just tried this:</p>\n\n<pre><code>input := bytes.NewBufferString(\"test\")\n    uploadOpts := docker.UploadToContainerOptions{\n        InputStream: input,\n        Path:        \"/test-test\",\n    }\n\n    err := client.UploadToContainer(\"20e0c347cd41\", uploadOpts)\n    if err != nil {\n        print(err)\n    }\n</code></pre>\n\n<p>20e0c347cd41 is the \"CONTAINER ID\"</p>\n\n<p>which returns this error:</p>\n\n<pre><code>(0xd60088,0xc820278100)\n</code></pre>\n\n<p>Then I tried this: </p>\n\n<pre><code>//input := bytes.NewBufferString(buf)\n    uploadOpts := docker.UploadToContainerOptions{\n        InputStream: buf,\n        Path:        \"/test-test.txt\",\n    }\n\n    err := client.UploadToContainer(\"nginx-ssl\", uploadOpts)\n    if err != nil {\n        print(err)\n    }\n</code></pre>\n\n<p>where <code>InputStream: buf</code> is the output from my tar archive shown above. This throws the following error:</p>\n\n<pre><code>panic: runtime error: invalid memory address or nil pointer dereference\n[signal 0xb code=0x1 addr=0x0 pc=0x2df8]\n\ngoroutine 1 [running]:\npanic(0x3d3420, 0xc82000a0d0)\n</code></pre>\n\n<p>but nothing gets uploaded.  </p>\n\n<p>\u00b6</p>\n"}, {"tags": ["macos", "go", "chroot"], "comments": [{"owner": {"reputation": 411, "user_id": 1531219, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b10b1839f3fded11e74a72dfb382b4c?s=128&d=identicon&r=PG", "display_name": "fntlnz", "link": "https://stackoverflow.com/users/1531219/fntlnz"}, "edited": false, "score": 0, "creation_date": 1457832698, "post_id": 35962179, "comment_id": 59585831, "body": "What kind of sandboxing do you need? You need to sandbox just the file system or other things like network sockets?"}, {"owner": {"reputation": 15950, "user_id": 324978, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9a271d8f6946301fa1f0c0fc4c7b9f14?s=128&d=identicon&r=PG", "display_name": "robbrit", "link": "https://stackoverflow.com/users/324978/robbrit"}, "edited": false, "score": 0, "creation_date": 1457842660, "post_id": 35962179, "comment_id": 59587460, "body": "There&#39;s a package called syscall, it has a Chroot function that might do what you need: <a href=\"https://golang.org/pkg/syscall/\" rel=\"nofollow noreferrer\">golang.org/pkg/syscall</a>"}, {"owner": {"reputation": 20521, "user_id": 1135424, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rvwBS.jpg?s=128&g=1", "display_name": "nbari", "link": "https://stackoverflow.com/users/1135424/nbari"}, "edited": false, "score": 0, "creation_date": 1457856682, "post_id": 35962179, "comment_id": 59590420, "body": "I need sandbox only for the file system"}, {"owner": {"reputation": 20521, "user_id": 1135424, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rvwBS.jpg?s=128&g=1", "display_name": "nbari", "link": "https://stackoverflow.com/users/1135424/nbari"}, "reply_to_user": {"reputation": 15950, "user_id": 324978, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9a271d8f6946301fa1f0c0fc4c7b9f14?s=128&d=identicon&r=PG", "display_name": "robbrit", "link": "https://stackoverflow.com/users/324978/robbrit"}, "edited": false, "score": 0, "creation_date": 1457857363, "post_id": 35962179, "comment_id": 59590578, "body": "@robbrit I think I am not properly using the syscall/chroot any chance you could share an example?"}, {"owner": {"reputation": 15950, "user_id": 324978, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9a271d8f6946301fa1f0c0fc4c7b9f14?s=128&d=identicon&r=PG", "display_name": "robbrit", "link": "https://stackoverflow.com/users/324978/robbrit"}, "edited": false, "score": 0, "creation_date": 1457928192, "post_id": 35962179, "comment_id": 59612648, "body": "Unfortunately I&#39;ve never used it, I just Googled for something that might do what you want. You&#39;d have to test it out for yourself."}], "answers": [{"tags": [], "owner": {"reputation": 624, "user_id": 1887309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ba562230112c5953454a7b7ec7acb6?s=128&d=identicon&r=PG", "display_name": "Cedmundo", "link": "https://stackoverflow.com/users/1887309/cedmundo"}, "is_accepted": true, "score": 1, "last_activity_date": 1457943932, "last_edit_date": 1492086990, "creation_date": 1457943932, "answer_id": 35982601, "question_id": 35962179, "link": "https://stackoverflow.com/questions/35962179/is-there-a-way-to-chroot-sandbox-a-go-os-exec-call-prevent-rm-rf/35982601#35982601", "title": "Is there a way to chroot/sandbox a go os.exec call (prevent rm -rf /)", "body": "<p>You should be fine using os.Setuid/os.Setgid (example.go):</p>\n\n<pre><code>package main\n\nimport (\n    \"log\"\n    \"flag\"\n    \"os\"\n    \"os/exec\"\n    \"syscall\"\n)\n\nfunc main() {\n    var oUid = flag.Int(\"uid\", 0, \"Run with User ID\")\n    var oGid = flag.Int(\"gid\", 0, \"Run with Group ID\")\n    flag.Parse()\n\n    // Get UID/GUID from args\n    var uid = *oUid\n    var gid = *oGid\n\n    // Run whoami\n    out, err := exec.Command(\"whoami\").Output()\n    if err != nil {\n        log.Fatal(err)\n        return\n    }\n\n    // Output whoami\n    log.Println(\"Original UID/GID whoami:\", string(out))\n    log.Println(\"Setting UID/GUID\")\n\n    // Change privileges\n    err = syscall.Setgid(gid)\n    if err != nil {\n        log.Println(\"Cannot setgid\")\n        log.Fatal(err)\n        return\n    }\n\n    err = syscall.Setuid(uid)\n    if err != nil {\n        log.Println(\"Cannot setuid\")\n        log.Fatal(err)\n        return\n    }\n\n    // Execute whoami again\n    out, err = exec.Command(\"whoami\").Output()\n    if err != nil {\n        log.Fatal(err)\n        return\n    }\n    log.Println(\"Changed UID/GID whoami:\", string(out))\n\n\n    // Do some dangerous stuff\n    log.Println(\"Creating a executable file within /bin should fail...\")\n    _, err = os.Create(\"/bin/should-fail\")\n    if err == nil {\n        log.Println(\"Warning: operation did not fail\")\n        return\n    }\n\n    log.Println(\"We are fine\", err)\n}\n</code></pre>\n\n<p>I would also recommend to read about setting gid/uid properly (<a href=\"https://unix.stackexchange.com/questions/166817/using-the-setuid-bit-properly\">https://unix.stackexchange.com/questions/166817/using-the-setuid-bit-properly</a>, in C). Oh! its needed to set gid before uid, because the example fails if you don't do so.</p>\n\n<p>You should execute <code>example.go</code> with root privileges and specify unprivileged gid/uid to the command with flags -gid,-uid respectively.</p>\n\n<pre><code>sudo go run example.go -uid &lt;unprivileged id&gt; -gid &lt;unprivileged id&gt;\n</code></pre>\n"}], "owner": {"reputation": 20521, "user_id": 1135424, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rvwBS.jpg?s=128&g=1", "display_name": "nbari", "link": "https://stackoverflow.com/users/1135424/nbari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1032, "favorite_count": 0, "accepted_answer_id": 35982601, "answer_count": 1, "score": 1, "last_activity_date": 1457943932, "creation_date": 1457810248, "question_id": 35962179, "link": "https://stackoverflow.com/questions/35962179/is-there-a-way-to-chroot-sandbox-a-go-os-exec-call-prevent-rm-rf", "title": "Is there a way to chroot/sandbox a go os.exec call (prevent rm -rf /)", "body": "<p>I want to test/automate some repositories, the basic flow is something like:</p>\n\n<pre><code>repos := []string{\"repo 1\", \"repo 2\", ...}\nfor r := range repos {\n    // git clone the repo \n    // cd repo dir\n    // make test\n    // make build\n    // ...\n}\n</code></pre>\n\n<p>I am doing this with <a href=\"https://golang.org/\" rel=\"nofollow\">GO</a> using  <code>os.exec</code> to call the all the series of commands, something like:</p>\n\n<pre><code> exec.Command(\"sh\", \"-c\", \"git clone project\")\n</code></pre>\n\n<p>So far so good, but I would like to know if there is a way to secure/protect against something miswriting on the Makefile that could be doing something like <code>rm -rf /</code>. and break my host.</p>\n\n<p>Basically I would like to use the system libraries/tools but restrict/chroot only the output to a specific <code>workdir</code>, so that I can avoid pre-build a chroot for this.</p>\n\n<p>A working solution is to use a <a href=\"https://www.freebsd.org/doc/handbook/jails.html\" rel=\"nofollow\">FreeBSD jail</a>, but I would like to know if there an alternative/secure way of doing this without the need of containers,virtualbox,etc; and using a basic Mac OS X workstation. so that anyone could \"safely\" run &amp; test without worries.</p>\n\n<p>Any ideas ?</p>\n"}, {"tags": ["html", "go", "goquery"], "comments": [{"owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "edited": false, "score": 0, "creation_date": 1457815697, "post_id": 35961491, "comment_id": 59581149, "body": "Can you add the actual code you used?"}, {"owner": {"reputation": 542, "user_id": 1953301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5e5f04258159ec3f6b0f76e5ccedd4?s=128&d=identicon&r=PG", "display_name": "CheeseFerret", "link": "https://stackoverflow.com/users/1953301/cheeseferret"}, "edited": false, "score": 0, "creation_date": 1509691725, "post_id": 35961491, "comment_id": 81129115, "body": "The html table doesn&#39;t look valid. There&#39;s no closing td tags here if I&#39;m not mistaken."}], "answers": [{"comments": [{"owner": {"reputation": 498, "user_id": 1422425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce46bae4aba4c091bffb10b7993e8769?s=128&d=identicon&r=PG&f=1", "display_name": "Paniko0", "link": "https://stackoverflow.com/users/1422425/paniko0"}, "edited": false, "score": 0, "creation_date": 1458054453, "post_id": 35964192, "comment_id": 59681513, "body": "Thank you very much. After changing a little your code I got the result expected. <a href=\"https://play.golang.org/p/zykOWwHCcG\" rel=\"nofollow noreferrer\">play.golang.org/p/zykOWwHCcG</a>"}, {"owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "reply_to_user": {"reputation": 498, "user_id": 1422425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce46bae4aba4c091bffb10b7993e8769?s=128&d=identicon&r=PG&f=1", "display_name": "Paniko0", "link": "https://stackoverflow.com/users/1422425/paniko0"}, "edited": false, "score": 0, "creation_date": 1458064950, "post_id": 35964192, "comment_id": 59688931, "body": "@DanilloSouza happy to help!"}], "tags": [], "owner": {"reputation": 5586, "user_id": 1965774, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e7KDB.gif?s=128&g=1", "display_name": "Pie &#39;Oh&#39; Pah", "link": "https://stackoverflow.com/users/1965774/pie-oh-pah"}, "is_accepted": true, "score": 5, "last_activity_date": 1607283514, "last_edit_date": 1607283514, "creation_date": 1457822312, "answer_id": 35964192, "question_id": 35961491, "link": "https://stackoverflow.com/questions/35961491/how-to-convert-html-table-to-array-with-golang/35964192#35964192", "title": "How to convert HTML table to array with golang", "body": "<p>You can get away with package <code>golang.org/x/net/html</code> only.</p>\n<pre><code>var body = strings.NewReader(`                                                                                                                            \n        &lt;html&gt;                                                                                                                                            \n        &lt;body&gt;                                                                                                                                            \n        &lt;table&gt;                                                                                                                                           \n        &lt;tr&gt;                                                                                                                                              \n        &lt;td&gt;Row 1, Content 1&lt;/td&gt;                                                                                                                          \n        &lt;td&gt;Row 1, Content 2&lt;/td&gt;                                                                                                                          \n        &lt;td&gt;Row 1, Content 3&lt;/td&gt;                                                                                                                          \n        &lt;td&gt;Row 1, Content 4&lt;/td&gt;                                                                                                                          \n        &lt;/tr&gt;                                                                                                                                             \n        &lt;tr&gt;                                                                                                                                              \n        &lt;td&gt;Row 2, Content 1&lt;/td&gt;                                                                                                        \n        &lt;td&gt;Row 2, Content 2&lt;/td&gt;                                                                                                                          \n        &lt;td&gt;Row 2, Content 3&lt;/td&gt;                                                                                                                          \n        &lt;td&gt;Row 2, Content 4&lt;/td&gt;                                                                                                                          \n        &lt;/tr&gt;  \n        &lt;/table&gt;                                                                                                                                          \n        &lt;/body&gt;                                                                                                                                           \n        &lt;/html&gt;`)          \n\nfunc main() {\n    z := html.NewTokenizer(body)\n    content := []string{}\n\n    // While have not hit the &lt;/html&gt; tag\n    for z.Token().Data != &quot;html&quot; {\n        tt := z.Next()\n        if tt == html.StartTagToken {\n            t := z.Token()\n            if t.Data == &quot;td&quot; {\n                inner := z.Next()\n                if inner == html.TextToken {\n                    text := (string)(z.Text())\n                    t := strings.TrimSpace(text)\n                    content = append(content, t)\n                }\n            }\n        }\n    }\n    // Print to check the slice's content\n    fmt.Println(content)\n}\n</code></pre>\n<p>This code is written only for this typical HTML pattern only, but refactoring it to be more general wouldn't be hard.</p>\n"}, {"tags": [], "owner": {"reputation": 2398, "user_id": 1086560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41626fdfa1eadf74ce45e39c9ef6d711?s=128&d=identicon&r=PG", "display_name": "bamnet", "link": "https://stackoverflow.com/users/1086560/bamnet"}, "is_accepted": false, "score": -1, "last_activity_date": 1562732625, "creation_date": 1562732625, "answer_id": 56963390, "question_id": 35961491, "link": "https://stackoverflow.com/questions/35961491/how-to-convert-html-table-to-array-with-golang/56963390#56963390", "title": "How to convert HTML table to array with golang", "body": "<p>Try an approach like this to make a 2d array and handle variable row sizes:</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>    z := html.NewTokenizer(body)\n    table := [][]string{}\n    row := []string{}\n\n    for z.Token().Data != \"html\" {\n        tt := z.Next()\n        if tt == html.StartTagToken {\n            t := z.Token()\n\n            if t.Data == \"tr\" {\n                if len(row) &gt; 0 {\n                    table = append(table, row)\n                    row = []string{}\n                }\n            }\n\n            if t.Data == \"td\" {\n                inner := z.Next()\n\n                if inner == html.TextToken {\n                    text := (string)(z.Text())\n                    t := strings.TrimSpace(text)\n                    row = append(row, t)\n                }\n            }\n\n        }\n    }\n    if len(row) &gt; 0 {\n        table = append(table, row)\n    }\n</code></pre>\n"}], "owner": {"reputation": 498, "user_id": 1422425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce46bae4aba4c091bffb10b7993e8769?s=128&d=identicon&r=PG&f=1", "display_name": "Paniko0", "link": "https://stackoverflow.com/users/1422425/paniko0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5409, "favorite_count": 0, "accepted_answer_id": 35964192, "answer_count": 2, "score": 3, "last_activity_date": 1607283514, "creation_date": 1457806478, "last_edit_date": 1607267679, "question_id": 35961491, "link": "https://stackoverflow.com/questions/35961491/how-to-convert-html-table-to-array-with-golang", "title": "How to convert HTML table to array with golang", "body": "<p>I'm having a problem trying to convert an HTML table into a Golang array. I've tried to achieve it using x/net/html and goquery, without any success on both of them.</p>\n<p>Let's say we have this HTML table:</p>\n<pre><code>&lt;html&gt;\n  &lt;body&gt;\n    &lt;table&gt;\n      &lt;tr&gt;\n        &lt;td&gt;Row 1, Content 1&lt;/td&gt;\n        &lt;td&gt;Row 1, Content 2&lt;/td&gt;\n        &lt;td&gt;Row 1, Content 3&lt;/td&gt;\n        &lt;td&gt;Row 1, Content 4&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td&gt;Row 2, Content 1&lt;/td&gt;\n        &lt;td&gt;Row 2, Content 2&lt;/td&gt;\n        &lt;td&gt;Row 2, Content 3&lt;/td&gt;\n        &lt;td&gt;Row 2, Content 4&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/table&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>And I'd like to end up with this array:</p>\n<pre><code>------------------------------------\n|Row 1, Content 1| Row 1, Content 2|\n------------------------------------\n|Row 2, Content 1| Row 2, Content 2|\n------------------------------------\n</code></pre>\n<p>As you guy can see, I'm just ignoring Contents 3 and 4.</p>\n<p>My extraction code:</p>\n<pre><code>func extractValue(content []byte) {\n  doc, _ := goquery.NewDocumentFromReader(bytes.NewReader(content))\n\n  doc.Find(&quot;table tr td&quot;).Each(func(i int, td *goquery.Selection) {\n    // ...\n  })\n}\n</code></pre>\n<p>I've tried to add a controller number which would be responsible for ignoring the <code>&lt;td&gt;</code> that I don't want to convert and calling</p>\n<pre><code>td.NextAll()\n</code></pre>\n<p>but with no luck. Do you guys have any idea of what should I do to accomplish it?</p>\n<p>Thanks.</p>\n"}, {"tags": ["layout", "go", "package", "packages"], "comments": [{"owner": {"reputation": 200, "user_id": 6040694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a194f101db85d5b94cb0cd87f32edf3f?s=128&d=identicon&r=PG&f=1", "display_name": "animal", "link": "https://stackoverflow.com/users/6040694/animal"}, "edited": false, "score": 0, "creation_date": 1457798478, "post_id": 35959776, "comment_id": 59575070, "body": "Can you please clarify the question?"}, {"owner": {"reputation": 227, "user_id": 5956807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/75aeaea59178a778b256c7435a652fd5?s=128&d=identicon&r=PG", "display_name": "XXXX", "link": "https://stackoverflow.com/users/5956807/xxxx"}, "reply_to_user": {"reputation": 200, "user_id": 6040694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a194f101db85d5b94cb0cd87f32edf3f?s=128&d=identicon&r=PG&f=1", "display_name": "animal", "link": "https://stackoverflow.com/users/6040694/animal"}, "edited": false, "score": 0, "creation_date": 1457798730, "post_id": 35959776, "comment_id": 59575168, "body": "Sorry about that, just did"}], "answers": [{"tags": [], "owner": {"reputation": 200, "user_id": 6040694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a194f101db85d5b94cb0cd87f32edf3f?s=128&d=identicon&r=PG&f=1", "display_name": "animal", "link": "https://stackoverflow.com/users/6040694/animal"}, "is_accepted": true, "score": 1, "last_activity_date": 1457802643, "last_edit_date": 1457802643, "creation_date": 1457798456, "answer_id": 35959957, "question_id": 35959776, "link": "https://stackoverflow.com/questions/35959776/is-go-get-needed-in-order-to-use-packages/35959957#35959957", "title": "Is go get needed in order to use packages", "body": "<p>go get will checkout the needed dependencies for them. For instance when I go get one of your packages via:</p>\n\n<p>go get github.com/retep-mathwizard/utils/convert</p>\n\n<p>go also gets the skilstak resource because your package is dependent on it.</p>\n\n<p>The go get <a href=\"https://golang.org/cmd/go/\" rel=\"nofollow\">documentation</a> says:</p>\n\n<p>Get downloads and installs the packages named by the import paths, along with their dependencies.</p>\n"}], "owner": {"reputation": 227, "user_id": 5956807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/75aeaea59178a778b256c7435a652fd5?s=128&d=identicon&r=PG", "display_name": "XXXX", "link": "https://stackoverflow.com/users/5956807/xxxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 35959957, "answer_count": 1, "score": 0, "last_activity_date": 1457802643, "creation_date": 1457797672, "last_edit_date": 1457798646, "question_id": 35959776, "link": "https://stackoverflow.com/questions/35959776/is-go-get-needed-in-order-to-use-packages", "title": "Is go get needed in order to use packages", "body": "<p>Is it needed to <code>go get</code> on packages? My code is here: <a href=\"https://github.com/retep-mathwizard/utils\" rel=\"nofollow\">https://github.com/retep-mathwizard/utils</a></p>\n\n<p>My packages have dependencies on other items</p>\n"}, {"tags": ["html", "json", "go"], "answers": [{"comments": [{"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457879300, "post_id": 35959857, "comment_id": 59597000, "body": "Hey man you were absolutely right... by changing it to execute body it does indeed put the data in the page. But it overwrites the whole page. My goal here is to take that data and have it display in the html template page with the header and navigation bar. is there no way to call the data from the html page in the correct location?"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457997917, "post_id": 35959857, "comment_id": 59652541, "body": "Yes sir it did. Thank you. I will upvote it now. Would you mind taking a look at this one? <a href=\"http://stackoverflow.com/q/35978605/2218253\">stackoverflow.com/q/35978605/2218253</a> I appreciate you very much David. My only problem now is building a url for a search function."}], "tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": true, "score": 3, "last_activity_date": 1457897873, "last_edit_date": 1457897873, "creation_date": 1457798037, "answer_id": 35959857, "question_id": 35958216, "link": "https://stackoverflow.com/questions/35958216/map-json-data-to-html-template-in-golang/35959857#35959857", "title": "Map Json Data To Html Template In GoLang", "body": "<p>Looks like you are doing <code>{{define \"body\"}}</code>, but then asking ExecuteTemplate to execute \"T\" which isn't defined anywhere.</p>\n\n<p>I think you want: <code>t.ExecuteTemplate(w, \"body\", p)</code></p>\n\n<p>That all said, if you just want to use multiple templates, you can do it by creating a master top level template, then parsing all the parts as sub templates.</p>\n\n<p>Here's an example (<a href=\"http://play.golang.org/p/rRO4woop0m\" rel=\"nofollow\">on Play</a>).  </p>\n\n<p>Easily changed to walk your file system and load all your templates, then you just execute the template matching the http.Request path.</p>\n\n<pre><code>package main\n\nimport \"html/template\"\nimport \"os\"\nimport \"log\"\n\nvar mainText = `\nNormal page stuff\n{{ template \"_header_\" . }}\n{{ template \"body\" . }}\n`\n\nvar bodyText = `\n Body has: {{ .Thing }}\n`\nvar headerText = `\n I am header text\n`\n\ntype Stuff struct {\n    Thing string\n}\n\nfunc main() {\n    t := template.New(\"everything\")\n\n    // parse all templates you may want\n    template.Must(t.New(\"/\").Parse(mainText))\n    template.Must(t.New(\"_header_\").Parse(headerText))\n    template.Must(t.New(\"body\").Parse(bodyText))\n\n    if err := t.ExecuteTemplate(os.Stdout, \"/\", Stuff{\"I am a thing\"}); err != nil {\n        log.Fatal(\"Failed to execute:\", err)\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457878977, "post_id": 35971247, "comment_id": 59596873, "body": "I have seen an example very similar to this but unfortunately it does not get me there. The problem is more directed in that I cant manage my json response to the html page. I was able to get the response to display on the initial html page but once I created a navigation and multiple templates I have yet to be able to get the response to display on the specific page I need."}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457879372, "post_id": 35971247, "comment_id": 59597020, "body": "Actually The answer above this did get me closer. The data displays now but not the way I need it to. if you see my recent comment I just made it describes my problem. I think I just need to know how to call the data from the page instead of the current function."}, {"owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457879827, "post_id": 35971247, "comment_id": 59597182, "body": "Well, one thing I see and missed earlier is that in the topPicksHandler, shouldn&#39;t err = t.ExecuteTemplate(w, &quot;T&quot;, p) // This writes the client response be err = t.ExecuteTemplate(w, &quot;Topmovies&quot;, p) ?"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457880121, "post_id": 35971247, "comment_id": 59597272, "body": "If you check my question out in the section I show how my html page is set up you will see what I mean. I have a header.html footer.html etc. I am calling the templates in different pages as needed. So my goal here is to create a TopPicks/html template so I can call it when needed."}, {"owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457880440, "post_id": 35971247, "comment_id": 59597371, "body": "You should call the template like this I believe  {{template &quot;My Template&quot; .TopPicks }}  Otherwise I think you would need to change the nested template to use {{ range .TopPIcks.Results }}"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457880588, "post_id": 35971247, "comment_id": 59597429, "body": "Dude your a boss. Thank you! Please update your answer with these points. I promise this will help others. Finding a clear answer for this situation was so hard to find online."}, {"owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457881672, "post_id": 35971247, "comment_id": 59597833, "body": "No problem, glad I could help."}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457882721, "post_id": 35971247, "comment_id": 59598208, "body": "Hey man for I just realized it is still removing all of the data below where I implement the template. Which ends up being like this,  {{range .TopPIcks.Results}}         {{end}} Any clue why the data under this would not make it to the page?"}, {"owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457885800, "post_id": 35971247, "comment_id": 59599376, "body": "First, can you update your code on the question.  Might make it easier to see if everything is setup correctly."}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457887067, "post_id": 35971247, "comment_id": 59599859, "body": "Sure no problem. Please see this question <a href=\"http://stackoverflow.com/q/35972287/2218253\">stackoverflow.com/q/35972287/2218253</a>"}], "tags": [], "owner": {"reputation": 4205, "user_id": 159370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ppN64.jpg?s=128&g=1", "display_name": "Wade73", "link": "https://stackoverflow.com/users/159370/wade73"}, "is_accepted": false, "score": 1, "last_activity_date": 1457881656, "last_edit_date": 1457881656, "creation_date": 1457878065, "answer_id": 35971247, "question_id": 35958216, "link": "https://stackoverflow.com/questions/35958216/map-json-data-to-html-template-in-golang/35971247#35971247", "title": "Map Json Data To Html Template In GoLang", "body": "<p>Ok, I think there were two problems with the original code.</p>\n\n<ol>\n<li>Handler was calling wrong template</li>\n</ol>\n\n<p>func TopMoviesHandler(w http.ResponseWriter, r *http.Request) {\n   ...snip original code...</p>\n\n<pre><code>err = t.ExecuteTemplate(w, \"T\", p) // This writes the client response\n\nShould be \n\nerr = t.ExecuteTemplate(w, \"TopMovies\", p) // This writes the client response\n</code></pre>\n\n<ol start=\"2\">\n<li>Incorrect context was passed to nested template</li>\n</ol>\n\n<p>In the html file there was this code</p>\n\n<pre><code>{{define \"TopPicks\"}}\n     {{template \"header\" .}}\n     &lt;div class=\"content\"&gt;\n          {{.TopMovies}}\n          {{template \"MyTemplate\" . }}\n     &lt;/div&gt;\n     {{template \"footer\" .}}\n{{end}}\n</code></pre>\n\n<p>Which should be </p>\n\n<pre><code>{{define \"TopPicks\"}}\n     {{template \"header\" .}}\n     &lt;div class=\"content\"&gt;\n          {{.TopMovies}}\n          {{template \"MyTemplate\" .TopMovies }}\n     &lt;/div&gt;\n     {{template \"footer\" .}}\n{{end}}\n</code></pre>\n\n<p>The reason was that you were trying to pass the main context to the nested template, versus just the json result the template was expecting.</p>\n\n<p>Original Answer</p>\n\n<p>I made a simple example of what I think you need to do.  Where I set the topMovies variable, this is where you would set the results from your api call.  I hope this helps to show you the sequence you need to follow a little bit better.</p>\n\n<pre><code>package main\n\nimport (\n    \"net/http\"\n    \"text/template\"\n)\n\ntype movie struct {\n    Title string\n}\n\ntype page struct {\n    Title     string\n    TopMovies []movie\n}\n\nfunc main() {\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, req *http.Request) {\n        w.Header().Add(\"Content Type\", \"text/html\")\n\n        templates := template.New(\"template\")\n        templates.New(\"Body\").Parse(doc)\n        templates.New(\"List\").Parse(docList)\n\n        topMovies := []movie{{Title: \"Movie 1\"}, {Title: \"Movie 2\"}, {Title: \"Movie 3\"}}\n\n        page := page{Title: \"My Title\", TopMovies: topMovies}\n        templates.Lookup(\"Body\").Execute(w, page)\n\n    })\n\n    http.ListenAndServe(\":8000\", nil)\n}\n\nconst docList = `\n&lt;ul &gt;\n    {{range .}}\n    &lt;li&gt;{{.Title}}&lt;/li&gt;\n    {{end}}\n&lt;/ul&gt;\n`\n\nconst doc = `\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;&lt;title&gt;{{.Title}}&lt;/title&gt;&lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;Hello Templates&lt;/h1&gt;\n        {{template \"List\" .TopMovies}}\n    &lt;/body&gt;\n&lt;/html&gt;\n`\n</code></pre>\n"}], "owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6140, "favorite_count": 1, "accepted_answer_id": 35959857, "answer_count": 2, "score": 7, "last_activity_date": 1457897873, "creation_date": 1457789132, "last_edit_date": 1457834052, "question_id": 35958216, "link": "https://stackoverflow.com/questions/35958216/map-json-data-to-html-template-in-golang", "title": "Map Json Data To Html Template In GoLang", "body": "<p>I am looping through my API response and adding it to the html template like this,</p>\n\n<pre><code> // Following sends same information as above to the browser as html\n     t, err := template.New(\"TopMovies\").Parse(`\n      {{define \"TopMovies\"}}\n        &lt;html&gt;\n        &lt;ul&gt;\n        {{$ImgUrl := \"http://image.tmdb.org/t/p/w185\" }}\n        {{range $movies := .Results}}\n        &lt;li&gt;{{$ImgUrl}}{{$movies.PosterPath}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Adult}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Overview}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.ReleaseDate}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.GenreIds}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Id}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.OriginalTitle}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.OriginalLanguage}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Title}}&lt;/li&gt;\n        &lt;li&gt;{{$ImgUrl}}{{$movies.BackdropPath}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Popularity}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.VoteCount}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Video}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.VoteAverage}}&lt;/li&gt;\n        {{end}}\n        &lt;/ul&gt;\n        &lt;/html&gt;\n      {{end}}\n      `)\n    err = t.ExecuteTemplate(w, \"T\", p) // This writes the client response\n}\n</code></pre>\n\n<p>I am under the impression I should be able to call this in my html templates like this,</p>\n\n<pre><code>{{.TopMovies}}\n</code></pre>\n\n<p>But when I run the app the data does not appear in the html page I am calling it in. What am I missing here?</p>\n\n<p>I create a struct like this,</p>\n\n<pre><code>//A Page structure\ntype Page struct {\n  Title string\n  TopMovies string\n}\n</code></pre>\n\n<p>Then I create my handle like this,</p>\n\n<pre><code>func TopMoviesHandler(w http.ResponseWriter, r *http.Request) {\n   res, err := http.Get(url)\n      if err != nil {\n        panic(err)\n      }\n      defer res.Body.Close()\n\n      body, err := ioutil.ReadAll(res.Body)\n      if err != nil {\n        panic(err)\n      }\n      var p Payload\n\n      err = json.Unmarshal(body, &amp;p)\n      if err != nil {\n        panic(err)\n      }\n\n  // Following sends same information as above to the browser as html\n     t, err := template.New(\"TopMovies\").Parse(`\n      {{define \"TopMovies\"}}\n        &lt;html&gt;\n        &lt;ul&gt;\n        {{$ImgUrl := \"http://image.tmdb.org/t/p/w185\" }}\n        {{range $movies := .Results}}\n        &lt;li&gt;{{$ImgUrl}}{{$movies.PosterPath}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Adult}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Overview}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.ReleaseDate}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.GenreIds}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Id}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.OriginalTitle}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.OriginalLanguage}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Title}}&lt;/li&gt;\n        &lt;li&gt;{{$ImgUrl}}{{$movies.BackdropPath}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Popularity}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.VoteCount}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.Video}}&lt;/li&gt;\n        &lt;li&gt;{{$movies.VoteAverage}}&lt;/li&gt;\n        {{end}}\n        &lt;/ul&gt;\n        &lt;/html&gt;\n      {{end}}\n      `)\n    err = t.ExecuteTemplate(w, \"T\", p) // This writes the client response\n}\n</code></pre>\n\n<p>Then in <code>main.go</code></p>\n\n<pre><code>   http.HandleFunc(\"/TopPicks\", TopMoviesHandler)\n\nTopPicks.html\n\n{{define \"TopPicks\"}}\n    {{template \"header\" .}}\n    &lt;div class=\"content\"&gt;\n    {{.TopMovies}}\n    &lt;/div&gt;\n     {{template \"footer\" .}}\n    {{end}}\n</code></pre>\n\n<p>What does work is this,</p>\n\n<pre><code>func aboutHandler(w http.ResponseWriter, r *http.Request) {\n  display(w, \"about\", &amp;Page{Title: \"About\"})\n}\n</code></pre>\n\n<p>I can add a title to the page in the same way as I previously mentioned but using <code>display()</code></p>\n\n<p>And in the html template</p>\n\n<pre><code>&lt;title&gt;{{.Title}}&lt;/title&gt;\n</code></pre>\n\n<p>How can I make this work for my json response?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1457754402, "post_id": 35953436, "comment_id": 59563128, "body": "Copying the first one and pasting it multiple times duplicates the first string, and same with the second string. I think it has something to do with the encoding of the strings.. check this: <a href=\"https://play.golang.org/p/fSgO40Nz_-\" rel=\"nofollow noreferrer\">play.golang.org/p/fSgO40Nz_-</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8641, "user_id": 732539, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d33cc4a619410535e0176138c6971ba3?s=128&d=identicon&r=PG", "display_name": "K2xL", "link": "https://stackoverflow.com/users/732539/k2xl"}, "edited": false, "score": 0, "creation_date": 1457804651, "post_id": 35953542, "comment_id": 59577269, "body": "i did copy and paste actually from google docs preview mode. thanks for helping me untangle this mystery"}, {"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 8641, "user_id": 732539, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d33cc4a619410535e0176138c6971ba3?s=128&d=identicon&r=PG", "display_name": "K2xL", "link": "https://stackoverflow.com/users/732539/k2xl"}, "edited": false, "score": 0, "creation_date": 1457806630, "post_id": 35953542, "comment_id": 59577953, "body": "@K2xL yeah, always be careful when copying code from apps that weren&#39;t meant for dealing with code, they can do all kinds of funny things to it :)"}], "tags": [], "owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 14, "last_activity_date": 1457754843, "creation_date": 1457754843, "answer_id": 35953542, "question_id": 35953436, "link": "https://stackoverflow.com/questions/35953436/golang-why-arent-these-two-strings-equal/35953542#35953542", "title": "Golang Why aren&#39;t these two strings equal?", "body": "<p>The second one has a number of \"soft hyphen\" (U+00AD) characters between the visible characters, the first one appearing between \"482\" and \"e4\". A soft hyphen is a character that's invisible unless it happens to be at the location of a line-break, then it appears as a hyphen. Did you copy-paste the code from a word processor or some other program that might have applied special text formatting to it?</p>\n"}, {"tags": [], "owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "is_accepted": false, "score": 5, "last_activity_date": 1457755291, "last_edit_date": 1457755291, "creation_date": 1457754982, "answer_id": 35953556, "question_id": 35953436, "link": "https://stackoverflow.com/questions/35953436/golang-why-arent-these-two-strings-equal/35953556#35953556", "title": "Golang Why aren&#39;t these two strings equal?", "body": "<p>The problem is that the second one has 4 Unicode Soft Hyphens <code>0+00ad</code> which are not printable on the playground.</p>\n\n<p>What you are actually doing is basically similar to...</p>\n\n<pre><code>fmt.Println([]byte(\"f6f77482e4394a21815b7090bc0185b4\"))\nfmt.Println([]byte(\"f6f77482\u00ad-e439\u00ad-4a21-\u00ad815b\u00ad-7090bc0185b4\"))\n</code></pre>\n\n<p>This is what is looks like pasted into vim</p>\n\n<p><a href=\"https://i.stack.imgur.com/iwX9V.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/iwX9V.png\" alt=\"This is a screenshot in vim\"></a></p>\n"}], "owner": {"reputation": 8641, "user_id": 732539, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d33cc4a619410535e0176138c6971ba3?s=128&d=identicon&r=PG", "display_name": "K2xL", "link": "https://stackoverflow.com/users/732539/k2xl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1847, "favorite_count": 1, "accepted_answer_id": 35953542, "answer_count": 2, "score": 12, "last_activity_date": 1459046203, "creation_date": 1457753654, "last_edit_date": 1459046203, "question_id": 35953436, "link": "https://stackoverflow.com/questions/35953436/golang-why-arent-these-two-strings-equal", "title": "Golang Why aren&#39;t these two strings equal?", "body": "<p>I copied and pasted these two strings (one from a Google Doc and one from terminal) \u2013 what the heck is going on? And how can I clean them up so they are the same?</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println([]byte(\"f6f77482e4394a21815b7090bc0185b4\"))\n    fmt.Println([]byte(\"f6f77482\u00ade439\u00ad4a21\u00ad815b\u00ad7090bc0185b4\"))\n}\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>[102 54 102 55 55 52 56 50 101 52 51 57 52 97 50 49 56 49 53 98 55 48 57 48 98 99 48 49 56 53 98 52]\n[102 54 102 55 55 52 56 50 194 173 101 52 51 57 194 173 52 97 50 49 194 173 56 49 53 98 194 173 55 48 57 48 98 99 48 49 56 53 98 52]\n</code></pre>\n\n<p>Which are clearly two different byte arrays for the same string.</p>\n\n<p><a href=\"https://play.golang.org/p/_zd7tjqCZl\" rel=\"noreferrer\">https://play.golang.org/p/_zd7tjqCZl</a></p>\n"}, {"tags": ["multithreading", "go", "concurrency"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6052657, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gZM78UK6DKk/AAAAAAAAAAI/AAAAAAAAAoA/xlaYxIIFR6E/photo.jpg?sz=128", "display_name": "clee", "link": "https://stackoverflow.com/users/6052657/clee"}, "edited": false, "score": 0, "creation_date": 1457905500, "post_id": 35956757, "comment_id": 59606824, "body": "Great, I agree with your conclusion.  I think I more or less get what they&#39;re doing now, and it sounds like I don&#39;t need to retire my fork join just yet. Marked as answered.  Thank you for the thorough explanation. =]"}], "tags": [], "owner": {"reputation": 15124, "user_id": 144969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a12d286134563e628089f733b946a00?s=128&d=identicon&r=PG", "display_name": "Dimitar Dimitrov", "link": "https://stackoverflow.com/users/144969/dimitar-dimitrov"}, "is_accepted": true, "score": 3, "last_activity_date": 1457780704, "last_edit_date": 1457780704, "creation_date": 1457780208, "answer_id": 35956757, "question_id": 35953381, "link": "https://stackoverflow.com/questions/35953381/what-is-the-difference-between-distribute-work-synchronize-and-fork-join-paralle/35956757#35956757", "title": "What is the difference between distribute-work-synchronize and fork-join parallel programming methodologies", "body": "<p><strong>I would be very careful taking the statement you've quoted from <a href=\"https://en.wikipedia.org/wiki/Go_(programming_language)#Suitability_for_parallel_programming\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Go_(programming_language)#Suitability_for_parallel_programming</a> as a general truth for Go programming</strong>.</p>\n\n<p>I assume that what's described in the <a href=\"https://books.google.bg/books?id=QSm6BQAAQBAJ&amp;pg=PA440#v=onepage&amp;q&amp;f=false\" rel=\"nofollow\">study</a> as <strong>distribute-work-synchronize</strong> is the approach of dividing a problem into subtasks, that are determined mainly by the parallelization that can be achieved in hardware, and less by the natural way the problem decomposes into smaller tasks.</p>\n\n<p>This approach may give you some performance benefits depending on your specific problem and your expertise, but it may not be trivial to apply even for <a href=\"https://en.wikipedia.org/wiki/Embarrassingly_parallel\" rel=\"nofollow\">embarrassingly-parallel</a> problems. In addition, this approach is more dependant on the specific hardware you're using (e.g. 2-32 vs 64-1024 cores, regular CAS vs LL/SC), on the specific problem size (e.g. fits in L1 vs barely fits in RAM), and most importantly, on your expertise with that approach and with the tool that you're using to solve your problem.</p>\n\n<p>The above is standard \"<em>premature optimization is the root of all evil</em>\" / \"<em>simple, adequate and correct trumps complex, super-fast and with an insidious bug</em>\" advice, but the actual experiment cited in the paper also gives some examples why you should use your own judgment which approach to use.</p>\n\n<ol>\n<li><p>The study used Go 1.0.3. The significant improvements done on the scheduling, garbage collection and goroutine/channel performance fronts may have effectively made the results obsolete.</p>\n\n<p>1.1. Ironically, the paper mentions how for one of the Chapel solutions, expert version was ~68% slower when Chapel 1.6 (instead of 1.5) was used. </p></li>\n<li><p>The study does not claim to provide statistically significant results - for each of the 4 platforms, a single non-expert solved 6 synthetic problems that fit a specific blueprint, then rewrote his solutions according to the advice of a single expert.</p></li>\n<li><p>The expert should not be held responsible for applying his advice outside of the specific context. <strong>distribute-work-synchronize</strong> was the better approach for these specific problems, if you are a Staff Software Engineer on the Golang team (Luuk van Dijk), and your alternative was using plain <strong>divide-and-conquer</strong> with Go 1.0.3.</p></li>\n</ol>\n\n<blockquote>\n  <p>When I do fork join I typically run as many threads as I do cores, but in the paper they say the go expert did this as well, and they briefly mention the overhead of creating new threads being one of the ways the go expert optimized the code, but don't seem to go into detail.</p>\n</blockquote>\n\n<p>I'm assuming the overhead of creating new threads is related to the proliferation of tasks when approaching the bottom of the recursion tree.</p>\n\n<p>I would think that algorithms that fall into Case 2 and 3 of the <a href=\"https://en.wikipedia.org/wiki/Master_theorem\" rel=\"nofollow\">Master Theorem</a> will be particularly affected, but even algorithms that fall in Case 1 (where the work done on the leaf level of the tree is most significant, i.e. the overhead of the spawned threads is diluted the most) will be affected. For example, making a new logical task for the comparison of each pair of elements in a top-down merge sort is probably redundant.</p>\n\n<p>IMHO running as many threads as you do cores, but logically dividing the work naturally/on each recursion level is a great compromise between my understanding for <strong>distribute-work-synchronize</strong> and a plain <strong>divide-and-conquer</strong>.</p>\n\n<p>You are still paying some price in complexity (and probably, but not necessarily, in running time) for the scheduling of your N tasks on the K worker threads. It is possible for this price to cost you in missed parallelization opportunities at runtime, for example because of cache thrashing, because of sub-optmal scheduling, because of thread or core affinity in play, etc.\nHowever this may be abstracted away from your program at the language platform level, or at the Fork-Join framework level (in case you are using a framework), or maybe at the OS level.\nIn this case, your solution is not fully responsible for adapting to changes in your language platform, in your problem size, or in your machine hardware, and you should be able to benefit from optimizations in the underlying layers without touching your solution.</p>\n\n<p><strong>My bet is that the increased complexity and the reduced portability of a custom-tailored distribute-work-synchronize solution is worth it only if you can prove that your natural divide-and-conquer solution is not enough and you are aware of the consequences.</strong></p>\n"}], "owner": {"reputation": 31, "user_id": 6052657, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gZM78UK6DKk/AAAAAAAAAAI/AAAAAAAAAoA/xlaYxIIFR6E/photo.jpg?sz=128", "display_name": "clee", "link": "https://stackoverflow.com/users/6052657/clee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 35956757, "answer_count": 1, "score": 2, "last_activity_date": 1457780704, "creation_date": 1457753044, "question_id": 35953381, "link": "https://stackoverflow.com/questions/35953381/what-is-the-difference-between-distribute-work-synchronize-and-fork-join-paralle", "title": "What is the difference between distribute-work-synchronize and fork-join parallel programming methodologies", "body": "<p>In this article on wikipedia:\n<a href=\"https://en.wikipedia.org/wiki/Go_(programming_language)#Suitability_for_parallel_programming\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Go_(programming_language)#Suitability_for_parallel_programming</a></p>\n\n<p>It is claimed that the go expert used a distribute-work-synchronize pattern to organize his parallel programs, while the non-expert used a fork-join:\n<a href=\"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Fork_join.svg/2000px-Fork_join.svg.png\" rel=\"nofollow\">https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Fork_join.svg/2000px-Fork_join.svg.png</a></p>\n\n<p>I am familiar with the fork-join from school, but I was wondering what the distribute-work-synchronize pattern is, and what the differences are between it and the classical fork-join model that i'm familiar with? </p>\n\n<p>When I do fork join I typically run as many threads as I do cores, but in the paper they say the go expert did this as well, and they briefly mention the overhead of creating new threads being one of the ways the go expert optimized the code, but don't seem to go into detail.</p>\n"}, {"tags": ["json", "go"], "answers": [{"comments": [{"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457751620, "post_id": 35953237, "comment_id": 59562600, "body": "What do you mean am if I am fine with it? Are there downsides?"}, {"owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457751695, "post_id": 35953237, "comment_id": 59562620, "body": "I thought maybe you want to strip out content that are not useful to your clients. If API returns errors in case of rate limiting etc, those errors will be sent directly to clients."}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457751849, "post_id": 35953237, "comment_id": 59562654, "body": "Gotcha. Could you give me a few ways to do this? So I can try a few and learn this better?"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457752698, "post_id": 35953237, "comment_id": 59562806, "body": "also the response is in json. How can I parse that and wrap it in html if I make the request to the api and directly post it to the page?"}, {"owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457753153, "post_id": 35953237, "comment_id": 59562893, "body": "If you want to render html checkout template package <a href=\"https://golang.org/pkg/html/template/\" rel=\"nofollow noreferrer\">golang.org/pkg/html/template</a>"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457753434, "post_id": 35953237, "comment_id": 59562947, "body": "Ya I have seen that. Would you mind giving me an example of it using my current situation?"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457753453, "post_id": 35953237, "comment_id": 59562950, "body": "Or how about how can I push my data to a string then just call that string in my handler?"}, {"owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457754558, "post_id": 35953237, "comment_id": 59563160, "body": "I added an example usage of the template package. It doesn&#39;t really matter where your data comes from. Since you already have a Payload type and a <code>p</code> instance you can easily use the template package for this."}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457755592, "post_id": 35953237, "comment_id": 59563338, "body": "I really appreciate your help. I am so confused by what your showing me here. I dont even understand where that is supposed to go? So you are saying just add that block of code to my handle function?\\"}, {"owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457755858, "post_id": 35953237, "comment_id": 59563395, "body": "yes that goes in the handler function. I think going through the documentation of <a href=\"https://golang.org/pkg/html/template/\" rel=\"nofollow noreferrer\">template</a> package would help you understand"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457755904, "post_id": 35953237, "comment_id": 59563401, "body": "Yes I have read it. I cant get a solid understanding based on my circumstances. If it makes perfect sense to you would you mind adding it to your example so I can see exactly what you are saying?"}, {"owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457756026, "post_id": 35953237, "comment_id": 59563428, "body": "It appears you are showing me code from the documentation. Which I have read. My problem is not that I can not read the docs, my problem is I do not understand how to properly write this function to get it to work."}, {"owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "reply_to_user": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "edited": false, "score": 0, "creation_date": 1457756642, "post_id": 35953237, "comment_id": 59563558, "body": "The code I posted is specific to your example. I used the variables and structures that you showed in the question. They were not just blindly copied from the documentation. Its a lot disappointing that you think so. I have put my best effort to help you. I updated the code putting it inside the handler function. I am sorry but I think I have been the best help I possibly can. Hope this will help you with your app."}], "tags": [], "owner": {"reputation": 4928, "user_id": 1150725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfe8aa21199e444d60f32a9ec4f94c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna Herath", "link": "https://stackoverflow.com/users/1150725/aruna-herath"}, "is_accepted": true, "score": 1, "last_activity_date": 1457756461, "last_edit_date": 1457756461, "creation_date": 1457751546, "answer_id": 35953237, "question_id": 35953120, "link": "https://stackoverflow.com/questions/35953120/displaying-go-app-in-the-browser/35953237#35953237", "title": "Displaying Go App In The Browser", "body": "<p>If you are fine with directly sending the response from the API to your users then use <a href=\"https://golang.org/pkg/io/#Copy\" rel=\"nofollow\">io.Copy</a>. You can check if the api request was successful before relaying it to the users and send an error if it did not.</p>\n\n<p>Some APIs send information in headers like how you are doing with the rate limiting. So you can check headers as well before relaying.</p>\n\n<pre><code>func handler(w http.ResponseWriter, r *http.Request) {\n    resp, err := http.Get(\"http://jsonplaceholder.typicode.com/posts\") // your request to the api\n\n    w.Header().Set(\"Content-Type\", \"application/javascript\")\n\n    if err == nil &amp;&amp; resp.StatusCode == http.StatusOK {\n        io.Copy(w, resp.Body)\n    } else {\n        json.NewEncoder(w).Encode(err)\n    }\n}\n</code></pre>\n\n<p>This avoids making any new allocations on your app.</p>\n\n<p>If you want to send your clients html as stated in comments, use the <a href=\"https://golang.org/pkg/html/template/\" rel=\"nofollow\">html/template</a> package.</p>\n\n<p>You can of course prepare a html string manually and send it to the clients. But I think its obvious that using templates makes the code cleaner and maintainable. It also provides autoescaping. </p>\n\n<p>For example following would render the <code>Overview</code> section of each of your <code>Results</code> from the <code>Payload</code> <code>p</code></p>\n\n<pre><code>func handler(w http.ResponseWriter, r *http.Request) {\n    // Make your api call and prepare the `Payload` object (from your example in the question)\n\n    for i := 0; i &lt; len(p.Results); i++ {\n       fmt.Println(p.Results[i].Overview) // Prints to your terminal\n    }\n\n    // Following sends same information as above to the browser as html\n\n    t, err := template.New(\"foo\").Parse(`\n      {{define \"T\"}}\n        &lt;html&gt;&lt;ul&gt;{{range .Results}}&lt;li&gt;{{.Overview}}&lt;/li&gt;{{end}}&lt;/ul&gt;&lt;/html&gt;\n      {{end}}`)\n    err = t.ExecuteTemplate(w, \"T\", p) // This writes the client response\n}\n</code></pre>\n"}], "owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 35953237, "answer_count": 1, "score": 0, "last_activity_date": 1457756461, "creation_date": 1457750478, "question_id": 35953120, "link": "https://stackoverflow.com/questions/35953120/displaying-go-app-in-the-browser", "title": "Displaying Go App In The Browser", "body": "<p>I wrote an app that makes a request to an API and gets a JSON response. When I run the app it displays the json in the terminal.</p>\n\n<pre><code>go run main.go\n</code></pre>\n\n<p>I want to make this run in the browser and I found this, which allowed me to print a string to the browser. </p>\n\n<pre><code>     func handler(w http.ResponseWriter, r *http.Request) {\n       fmt.Fprintf(w, \"This is a string\")\n   }\n</code></pre>\n\n<p>Then in <code>main</code></p>\n\n<pre><code>http.HandleFunc(\"/\", handler) \nlog.Fatal(http.ListenAndServe(\"localhost:8000\", nil))\n</code></pre>\n\n<p>Now that I have a string being printed to the screen and I have a json response coming from the api I am using, how can I add the json response to the browser instead of the string? </p>\n\n<p>Would it be best to put the response into a string then just bring it to the browser?</p>\n\n<p>Currently I am printing the json response to the terminal like this,</p>\n\n<pre><code>type Payload struct {\n        Page    int\n        Results []Data \n}\n\ntype Data struct {\n        PosterPath       string  `json:\"poster_path\"`\n        Adult            bool    `json:\"adult\"`\n        Overview         string  `json:\"overview\"`\n        ReleaseDate      string  `json:\"release_date\"`\n        GenreIds         []int   `json:\"genre_ids\"`\n        Id               int     `json:\"id\"`\n        OriginalTitle    string  `json:\"original_title\"`\n        OriginalLanguage string  `json:\"original_language\"`\n        Title            string  `json:\"title\"`\n        BackdropPath     string  `json:\"backdrop_path\"`\n        Popularity       float64 `json:\"popularity\"`\n        VoteCount        int     `json:\"vote_count\"`\n        Video            bool    `json:\"video\"`\n        VoteAverage      float64 `json:\"vote_average\"`\n}\n</code></pre>\n\n<p>Then inside <code>main()</code> I do this,</p>\n\n<pre><code>    for i := 0; i &lt; len(p.Results); i++ {\n            fmt.Println(\n            ImgUrl+p.Results[i].PosterPath, \"\\n\", p.Results[i].Adult,\n            p.Results[i].Overview, \"\\n\", p.Results[i].ReleaseDate,\n            p.Results[i].GenreIds, \"\\n\", p.Results[i].Id,\n            p.Results[i].OriginalTitle, \"\\n\", p.Results[i].OriginalLanguage,\n            p.Results[i].Title, \"\\n\", ImgUrl+p.Results[i].BackdropPath,\n            p.Results[i].Popularity, \"\\n\", p.Results[i].VoteCount,\n            p.Results[i].Video, \"\\n\", p.Results[i].VoteAverage,\n            )\n</code></pre>\n\n<p>What would be the Go way to do this for building web applications? My end goal here is to take user input and recreate my api call based on the information they provide.</p>\n"}]