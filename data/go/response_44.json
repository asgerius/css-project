[{"tags": ["go"], "comments": [{"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1447284452, "post_id": 33661442, "comment_id": 55097194, "body": "You&#39;ll need to provide more information. Unless you&#39;re doing some ordering it will not be possible. A set or in this case a table is a collection of unordered items. In order to do this concurrently you&#39;ll have to be able to split your collection into sub sets and process each individually in their own goroutine aggregating the results in the calling scope. You want to take a divide and conquer approach and express that in an algorithm. If you can provide more details about the data I could help suggest how you might get the subsets and process them."}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1447284692, "post_id": 33661442, "comment_id": 55097271, "body": "To expand on that, firstly I would be making a decision of whether or not I&#39;m getting the results in one query. Say you&#39;re getting users out of a database, you could for example use a where clause to divide get your current 200k result set in 5 different queries, each being made from their own goroutine doing the processing ect. Alternately you could get all the results at once then use subslicing to divide the results right as you pass them into the process method that you&#39;re calling in a goroutine. Hope that helps! I&#39;ll provide an answer if you get something more concrete here."}], "answers": [{"tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": false, "score": 8, "last_activity_date": 1447290688, "creation_date": 1447290688, "answer_id": 33662810, "question_id": 33661442, "link": "https://stackoverflow.com/questions/33661442/how-to-concurrently-iterate-through-an-sql-result-set-in-golang/33662810#33662810", "title": "How to concurrently iterate through an sql result set in Golang?", "body": "<p>The sql.Rows you get back from your query can't be used concurrently (I believe).</p>\n\n<p>but you can do most of the heavy lifting in goroutines.</p>\n\n<p>Here is an example (non-working, but close), on <a href=\"http://play.golang.org/p/dwxL-D0yzJ\" rel=\"noreferrer\">Play</a></p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"sql\"\n\ntype Row struct {\n    x string\n    y string\n    z string\n}\n\nfunc processor(ch chan Row) {\n    for row := range &lt;-ch {\n        // be awesome\n    }\n}\nfunc main() {\n    ch := make(chan Row)\n    // two handler go routines (current processors)\n    go processor(ch)\n    go processor(ch)\n    rows := db.Query(\"select x,y,z from whatever\")\n    for rows.Next() {\n        var row Row\n        if err := rows.Scan(&amp;row.x, &amp;row.y, &amp;row.z); err != nil {\n            // do something with error\n        } else {\n            ch &lt;- row\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3348, "user_id": 964634, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ecb23bff591cd2ebc53507a963e5b72c?s=128&d=identicon&r=PG", "display_name": "Hard worker", "link": "https://stackoverflow.com/users/964634/hard-worker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5510, "favorite_count": 3, "answer_count": 1, "score": 8, "last_activity_date": 1447290688, "creation_date": 1447282777, "question_id": 33661442, "link": "https://stackoverflow.com/questions/33661442/how-to-concurrently-iterate-through-an-sql-result-set-in-golang", "title": "How to concurrently iterate through an sql result set in Golang?", "body": "<p>The next() method is sequential, is there a way to concurrently iterate through the loop?</p>\n\n<p>I have a result set of 200k rows that I am looping through sequentially and doing logic on each row and want to split it up.</p>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 8805, "user_id": 1817176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/479f89f122c20918e9fe81f856f0a8c6?s=128&d=identicon&r=PG", "display_name": "jmaloney", "link": "https://stackoverflow.com/users/1817176/jmaloney"}, "edited": false, "score": 3, "creation_date": 1447276293, "post_id": 33659298, "comment_id": 55093395, "body": "Comparing against the raw output produced by a marshal is problematic since anytime you use a map the order is not guaranteed. In my tests I always unmarshal then compare."}, {"owner": {"reputation": 10776, "user_id": 749477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6845c6b2318e02258cc1dc56fe620482?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/749477/derek"}, "reply_to_user": {"reputation": 8805, "user_id": 1817176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/479f89f122c20918e9fe81f856f0a8c6?s=128&d=identicon&r=PG", "display_name": "jmaloney", "link": "https://stackoverflow.com/users/1817176/jmaloney"}, "edited": false, "score": 0, "creation_date": 1447276947, "post_id": 33659298, "comment_id": 55093732, "body": "@jmaloney, Can you please give me a code sample?"}, {"owner": {"reputation": 8805, "user_id": 1817176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/479f89f122c20918e9fe81f856f0a8c6?s=128&d=identicon&r=PG", "display_name": "jmaloney", "link": "https://stackoverflow.com/users/1817176/jmaloney"}, "edited": false, "score": 1, "creation_date": 1447277745, "post_id": 33659298, "comment_id": 55094131, "body": "<a href=\"https://play.golang.org/p/vA-n_f9VoI\" rel=\"nofollow noreferrer\">play.golang.org/p/vA-n_f9VoI</a>"}], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 1879879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5380465dce1fc431923c9976b4867910?s=128&d=identicon&r=PG", "display_name": "Karl", "link": "https://stackoverflow.com/users/1879879/karl"}, "is_accepted": false, "score": 2, "last_activity_date": 1447285126, "creation_date": 1447285126, "answer_id": 33661917, "question_id": 33659298, "link": "https://stackoverflow.com/questions/33659298/unit-testing-http-json-response-in-golang/33661917#33661917", "title": "Unit testing http json response in Golang", "body": "<p>Unmarshal the body into a struct and the use Gocheck's DeepEquals\n<a href=\"https://godoc.org/launchpad.net/gocheck\" rel=\"nofollow\">https://godoc.org/launchpad.net/gocheck</a></p>\n"}, {"tags": [], "owner": {"reputation": 1399, "user_id": 536113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4329f705a6d4ea0185f3aca9ee823d74?s=128&d=identicon&r=PG", "display_name": "vially", "link": "https://stackoverflow.com/users/536113/vially"}, "is_accepted": false, "score": 3, "last_activity_date": 1447483755, "creation_date": 1447483755, "answer_id": 33705931, "question_id": 33659298, "link": "https://stackoverflow.com/questions/33659298/unit-testing-http-json-response-in-golang/33705931#33705931", "title": "Unit testing http json response in Golang", "body": "<p>You should first unmarshal the body of the response into a struct and compare against the resulting object. Example:</p>\n\n<pre><code>result := []string{}\nif err := json.NewDecoder(response.Body).Decode(&amp;result); err != nil {\n    log.Fatalln(err)\n}\nSo(len(result), ShouldEqual, 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1798, "user_id": 2422278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BIhGx.jpg?s=128&g=1", "display_name": "kinbiko", "link": "https://stackoverflow.com/users/2422278/kinbiko"}, "is_accepted": false, "score": 2, "last_activity_date": 1561235610, "creation_date": 1561235610, "answer_id": 56718991, "question_id": 33659298, "link": "https://stackoverflow.com/questions/33659298/unit-testing-http-json-response-in-golang/56718991#56718991", "title": "Unit testing http json response in Golang", "body": "<p>You may find <a href=\"https://github.com/kinbiko/jsonassert\" rel=\"nofollow noreferrer\">jsonassert</a> useful.\nIt has no dependencies outside the standard library and allows you to verify that JSON strings are semantically equivalent to a JSON string you expect.</p>\n\n<p>In your case:</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>// white space is ignored, no need for \\n\njsonassert.New(t).Assertf(response.Body().String(), \"[]\")\n</code></pre>\n\n<p>It can handle any form of JSON, and has very friendly assertion error messages.</p>\n\n<p>Disclaimer: I wrote this package.</p>\n"}], "owner": {"reputation": 10776, "user_id": 749477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6845c6b2318e02258cc1dc56fe620482?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/749477/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4421, "favorite_count": 2, "answer_count": 3, "score": 6, "last_activity_date": 1561235610, "creation_date": 1447273927, "last_edit_date": 1447276065, "question_id": 33659298, "link": "https://stackoverflow.com/questions/33659298/unit-testing-http-json-response-in-golang", "title": "Unit testing http json response in Golang", "body": "<p>I am using <code>gin</code> as my http server and sending back an empty array in json as my response:</p>\n\n<pre><code>c.JSON(http.StatusOK, []string{})\n</code></pre>\n\n<p>The resulting json string I get is <code>\"[]\\n\"</code>.  The newline is added by the json Encoder object, see <a href=\"https://groups.google.com/forum/#!topic/golang-nuts/JN5eV6UqVzE\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Using <code>goconvey</code>, I could test my json like </p>\n\n<pre><code>So(response.Body.String(), ShouldEqual, \"[]\\n\")\n</code></pre>\n\n<p>But is there a better way to generate the expected json string than just adding a newline to all of them?</p>\n"}, {"tags": ["arrays", "memory", "struct", "go", "memory-layout"], "answers": [{"comments": [{"owner": {"reputation": 1046, "user_id": 18390, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d24899f609d0fa44478b33eaef5a07f7?s=128&d=identicon&r=PG", "display_name": "Sid Datta", "link": "https://stackoverflow.com/users/18390/sid-datta"}, "edited": false, "score": 0, "creation_date": 1447294301, "post_id": 33659091, "comment_id": 55099995, "body": "Thanks! Wanted to make sure Go does not ref everything like java. Regarding your link, I have seen it before but it does not talk about array of structs."}], "tags": [], "owner": {"reputation": 18961, "user_id": 1094941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gVU2.jpg?s=128&g=1", "display_name": "mna", "link": "https://stackoverflow.com/users/1094941/mna"}, "is_accepted": true, "score": 3, "last_activity_date": 1447273159, "creation_date": 1447273159, "answer_id": 33659091, "question_id": 33658987, "link": "https://stackoverflow.com/questions/33658987/how-does-go-layout-arrays-of-structs-in-memory/33659091#33659091", "title": "How does go layout arrays of structs in memory?", "body": "<p>The 4 <code>Point</code>s will be contiguous in memory, as in your first example. If you want them to be pointers, then you'd need <code>[4]*Point</code>.</p>\n\n<p>A slice of <code>Point</code> creates a slice that uses (points to) a backing array, where, again, <code>Point</code>s would be side-by-side (and <code>[]*Point</code> would be a slice of pointers to <code>Point</code>).</p>\n\n<p>See <a href=\"http://research.swtch.com/godata\" rel=\"nofollow\">http://research.swtch.com/godata</a> for a good explanation of memory layouts of Go data structures.</p>\n"}], "owner": {"reputation": 1046, "user_id": 18390, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d24899f609d0fa44478b33eaef5a07f7?s=128&d=identicon&r=PG", "display_name": "Sid Datta", "link": "https://stackoverflow.com/users/18390/sid-datta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "accepted_answer_id": 33659091, "answer_count": 1, "score": 0, "last_activity_date": 1447273159, "creation_date": 1447272631, "question_id": 33658987, "link": "https://stackoverflow.com/questions/33658987/how-does-go-layout-arrays-of-structs-in-memory", "title": "How does go layout arrays of structs in memory?", "body": "<pre><code>type Point struct {\n     x, y int\n}\n\nvar arr [4]Point\n</code></pre>\n\n<p>How will the array be laid out in memory?</p>\n\n<p>Will the actual objects be laid out side by side</p>\n\n<pre><code>[Point[x][y]][Point[x][y]][Point[x][y]][Point[x][y]]\n</code></pre>\n\n<p>Or will the array be a array of pointers, with the objects stored elsewhere, like Java?</p>\n\n<pre><code>[&amp;Point0][&amp;Point1][&amp;Point2][&amp;Point3]\n</code></pre>\n\n<p>Somewhere in the heap:</p>\n\n<pre><code>...[Point0[x][y]] ... [Point1[x][y]] ....  [Point3[x][y]] ... [Point2[x][y]]\n</code></pre>\n\n<p>Also, how will <code>make()</code> lay out slices in memory?</p>\n\n<pre><code>make([]Point, 10)\n</code></pre>\n"}, {"tags": ["time", "go"], "answers": [{"tags": [], "owner": {"reputation": 18961, "user_id": 1094941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gVU2.jpg?s=128&g=1", "display_name": "mna", "link": "https://stackoverflow.com/users/1094941/mna"}, "is_accepted": true, "score": 4, "last_activity_date": 1447272713, "creation_date": 1447272713, "answer_id": 33659003, "question_id": 33657280, "link": "https://stackoverflow.com/questions/33657280/time-conversion-from-string-in-golang/33659003#33659003", "title": "Time conversion from string in golang", "body": "<p>You can parse your raw data directly to a time in UTC using time.Parse and Go's reference time (<a href=\"https://golang.org/pkg/time/#pkg-constants\" rel=\"nofollow\">https://golang.org/pkg/time/#pkg-constants</a>), and then load a PST location and convert the time to that location. It can then be formatted as you wish, e.g.:</p>\n\n<pre><code>func main() {\n    t, err := time.Parse(\"2006 01 02 15 04\", \"2015 11 11 16 50\")\n    fmt.Println(t, err)\n\n    loc, err := time.LoadLocation(\"America/Los_Angeles\")\n    fmt.Println(loc, err)\n\n    t = t.In(loc)\n    fmt.Println(t.Format(time.RFC822))\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/mIXxVhmkDB\" rel=\"nofollow\">http://play.golang.org/p/mIXxVhmkDB</a></p>\n"}], "owner": {"reputation": 2597, "user_id": 2291517, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gGDf0.jpg?s=128&g=1", "display_name": "surfearth", "link": "https://stackoverflow.com/users/2291517/surfearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1496, "favorite_count": 0, "accepted_answer_id": 33659003, "answer_count": 1, "score": 0, "last_activity_date": 1447272713, "creation_date": 1447266222, "question_id": 33657280, "link": "https://stackoverflow.com/questions/33657280/time-conversion-from-string-in-golang", "title": "Time conversion from string in golang", "body": "<p>I'm trying to convert a time/date crawled from a NOAA observation from UTC to Pacific Time. The raw data is formatted as a fixed width space delimited string that I convert into an array of strings via strings.Field.</p>\n\n<p>The raw data looks like:</p>\n\n<pre><code>2015 11 11 16 50\n</code></pre>\n\n<p>It is stored as: </p>\n\n<pre><code>data[0:5]\n</code></pre>\n\n<p>Note that <code>data</code> has additional observations that are used elsewhere in the program. How can this be converted to Pacific time such that it will be correct year round, including daylight savings changes? I would eventually like to print it out in RFC822 format (i.e. \"02 Jan 06 15:04 PST\").</p>\n"}, {"tags": ["xml", "go"], "answers": [{"tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": true, "score": 0, "last_activity_date": 1447264782, "creation_date": 1447264782, "answer_id": 33656859, "question_id": 33656596, "link": "https://stackoverflow.com/questions/33656596/unmarshal-an-xml-document-with-xmlns-namespaces/33656859#33656859", "title": "Unmarshal an xml document with xmlns namespaces", "body": "<p>Namespaces are denoted by their URL and separated from names by a space, so your struct should be more like</p>\n\n<pre><code>type wsdlDoc struct {\n    XMLName xml.Name `xml:\"http://www.w3.org/1999/02/22-rdf-syntax-ns# RDF\"`\n    // ...\n}\n</code></pre>\n\n<p>Playground example: <a href=\"http://play.golang.org/p/tYVm2h6cIm\" rel=\"nofollow\">http://play.golang.org/p/tYVm2h6cIm</a>.</p>\n"}], "owner": {"reputation": 20459, "user_id": 1120221, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0977d36f1cf30241c35121f1d741c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Salah Eddine Taouririt", "link": "https://stackoverflow.com/users/1120221/salah-eddine-taouririt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 33656859, "answer_count": 1, "score": 1, "last_activity_date": 1447264782, "creation_date": 1447263902, "last_edit_date": 1447264234, "question_id": 33656596, "link": "https://stackoverflow.com/questions/33656596/unmarshal-an-xml-document-with-xmlns-namespaces", "title": "Unmarshal an xml document with xmlns namespaces", "body": "<p>I want to unmarshal an RDF document that looks likes:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"WINDOWS-1252\"?&gt;\n&lt;rdf:RDF  xmlns:owl       = \"http://www.w3.org/2002/07/owl#\"\n   xmlns:rdf = \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n\n   &lt;!-- other xml element --&gt;\n&lt;/rdf:RDF&gt;\n</code></pre>\n\n<p>I'm using this type to unmarchal in:</p>\n\n<pre><code>type wsdlDoc struct {\n    XMLName xml.Name `xml:\"rdf:RDF\"`\n    Name    string   `xml:\"grounding:hasAtomicProcessGrounding\"`\n}\n</code></pre>\n\n<p>the snippet of code to do this:</p>\n\n<pre><code>// you should import \"github.com/rogpeppe/go-charset/charset\"\n// and _ \"github.com/rogpeppe/go-charset/data\"\ndec := xml.NewDecoder(file)\ndec.CharsetReader = charset.NewReader\nvar v wsdlDoc\nerr = dec.Decode(&amp;v)\nif err != nil {\n    panic(err)\n}\n</code></pre>\n\n<p>When I run the code the panic print this error:</p>\n\n<pre><code>panic: expected element type &lt;rdf:RDF&gt; but have &lt;RDF&gt;\n</code></pre>\n\n<p>How to handle this case of unmarshaling?</p>\n"}, {"tags": ["vim", "go", "windows-7", "vim-plugin"], "owner": {"reputation": 1055, "user_id": 1563701, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/63da13112be95f5fd032d1c3c409ec0c?s=128&d=identicon&r=PG", "display_name": "marczoid", "link": "https://stackoverflow.com/users/1563701/marczoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 822, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1447264221, "creation_date": 1447263196, "last_edit_date": 1447264221, "question_id": 33656383, "link": "https://stackoverflow.com/questions/33656383/golang-gorun-in-vim-go-and-go-install-have-conflicting-gopath-requirements", "title": "Golang: &quot;:GoRun&quot; in vim-go and &quot;go install&quot; have conflicting GOPATH requirements on Windows", "body": "<p>I am running:</p>\n\n<ul>\n<li><p>Windows 7</p></li>\n<li><p><a href=\"https://code.google.com/hosting/moved?project=conemu-maximus5\" rel=\"nofollow\">ConEmu</a> combined with <a href=\"https://git-for-windows.github.io/\" rel=\"nofollow\">Git Bash</a> as my command prompt</p></li>\n<li><p><code>go version go1.5.1 windows/amd64</code></p></li>\n<li><p><a href=\"https://github.com/fatih/vim-go/\" rel=\"nofollow\">vim-go</a> v1.2 as my editor</p></li>\n</ul>\n\n<p>When I use the following GOPATH:</p>\n\n<p><code>$GOPATH=C:\\Users\\marc\\Desktop\\coding\\go</code></p>\n\n<p>And I try to run a Go program directly from <code>VIM-go</code> using the command</p>\n\n<p><code>:GoRun</code></p>\n\n<p>I receive the following error:</p>\n\n<p><code>go: GOPATH entry is relative; must be absolute path: \"C\".</code></p>\n\n<p>When I change my go path to:</p>\n\n<p><code>$GOPATH = /Users/marc/Desktop/coding/go</code></p>\n\n<p>The <code>:GoRun</code> command is working fine, but then <code>go install</code> throws the following error:</p>\n\n<p><code>go install: no install location for directory C:\\Users\\marc\\Desktop\\coding\\go\\src\\github.com\\marc\\test outside GOPATH</code>\n<code>For more details see: go help gopath</code></p>\n\n<p>So what value should <code>$GOPATH</code> have such that both commands are working?</p>\n\n<p><strong>--- I FOUND THE ANSWER ---</strong></p>\n\n<p>I thought I post my solution for people with the same problem. Change GOPATH to:</p>\n\n<p><code>$GOPATH = /C/Users/marc/Desktop/coding/go</code></p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 9159, "user_id": 1919228, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b942d91f7affb127a69d54c71dd26580?s=128&d=identicon&r=PG", "display_name": "Pablo Lozano", "link": "https://stackoverflow.com/users/1919228/pablo-lozano"}, "edited": false, "score": 1, "creation_date": 1447259422, "post_id": 33655033, "comment_id": 55083627, "body": "Please show your code"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5551387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b205e55b0da03661ed1bc81e8b833fff?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sims", "link": "https://stackoverflow.com/users/5551387/michael-sims"}, "edited": false, "score": 0, "creation_date": 1447261630, "post_id": 33655683, "comment_id": 55085004, "body": "Many thanks peterSO! That is the type of program i was looking for and works perfectly for me. I had been trying to concatenate strings but i couldnt get it to do subsequent combinations."}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": false, "score": 1, "last_activity_date": 1447261350, "last_edit_date": 1447261350, "creation_date": 1447260998, "answer_id": 33655683, "question_id": 33655033, "link": "https://stackoverflow.com/questions/33655033/golang-code-to-generate-specific-sequential-word-combinations/33655683#33655683", "title": "Golang code to generate specific sequential word combinations?", "body": "<p>You probably need a nested <code>for</code> loop. For example,</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc pairs(words1, words2 []string) []string {\n    pairs := make([]string, 0, len(words1)*len(words2))\n    for _, word1 := range words1 {\n        for _, word2 := range words2 {\n            pairs = append(pairs, word1+\"_\"+word2)\n        }\n    }\n    return pairs\n}\n\nfunc main() {\n    w1 := []string{\"a\", \"b\", \"c\", \"j\"}\n    fmt.Printf(\"%q\\n\", w1)\n    w2 := []string{\"k\", \"l\", \"m\", \"t\"}\n    fmt.Printf(\"%q\\n\", w2)\n    p := pairs(w1, w2)\n    fmt.Printf(\"%q\\n\", p)\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[\"a\" \"b\" \"c\" \"j\"]\n[\"k\" \"l\" \"m\" \"t\"]\n[\"a_k\" \"a_l\" \"a_m\" \"a_t\" \"b_k\" \"b_l\" \"b_m\" \"b_t\" \"c_k\" \"c_l\" \"c_m\" \"c_t\" \"j_k\" \"j_l\" \"j_m\" \"j_t\"]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5551387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b205e55b0da03661ed1bc81e8b833fff?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sims", "link": "https://stackoverflow.com/users/5551387/michael-sims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1447261350, "creation_date": 1447258982, "question_id": 33655033, "link": "https://stackoverflow.com/questions/33655033/golang-code-to-generate-specific-sequential-word-combinations", "title": "Golang code to generate specific sequential word combinations?", "body": "<p>I'm trying to write a code in GoLang and am struggling, as am still learning a lot. I would like a code that would do the following:</p>\n\n<p>Generate list of sequential combinations of two words, for example</p>\n\n<p>Word Group One: A, B, C, ..... J</p>\n\n<p>Word Group Two: K, L, M, ..... T</p>\n\n<p>List needed:</p>\n\n<p>Test_A_K,\nTest_A_L,\nTest_A_M,</p>\n\n<p>etc</p>\n\n<p>Test_B_K,\nTest_B_L,\nTest_B_M,</p>\n\n<p>etc </p>\n\n<p>for all combinations of \"Test_Word Group One_Word Group Two\"</p>\n\n<p>Ive tried to implement some other codes from this site, but am not sure if i am doing the correct thing - any pointers would be most appreciated</p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["go", "google-apps", "google-cloud-datastore"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 1149215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c7ff93d6a8e594d1dad724faef6cfda?s=128&d=identicon&r=PG", "display_name": "Kit", "link": "https://stackoverflow.com/users/1149215/kit"}, "edited": false, "score": 0, "creation_date": 1447485797, "post_id": 33658463, "comment_id": 55184291, "body": "Thanks for your reply. I just wonder how can I use that &quot;save&quot; function in my controller. Since Datastore has a method called &quot;Put&quot; which will save the item to datastore. Do I need to call that &quot;save&quot; function before calling &quot;Put&quot; function of Datastore?"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 105, "user_id": 1149215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c7ff93d6a8e594d1dad724faef6cfda?s=128&d=identicon&r=PG", "display_name": "Kit", "link": "https://stackoverflow.com/users/1149215/kit"}, "edited": false, "score": 0, "creation_date": 1447486581, "post_id": 33658463, "comment_id": 55184458, "body": "@Kit The use of this <code>save()</code> method is implicit, you don&#39;t have to call it. You can save your entity as usual, e.g. with the <code>datastore.Put()</code>. The <code>Put()</code> function will check if the value you want to save implements <code>PropertyLoadSaver</code>, and if so, the implementation of the <code>Put()</code> method will call the <code>save()</code> method."}, {"owner": {"reputation": 105, "user_id": 1149215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c7ff93d6a8e594d1dad724faef6cfda?s=128&d=identicon&r=PG", "display_name": "Kit", "link": "https://stackoverflow.com/users/1149215/kit"}, "edited": false, "score": 0, "creation_date": 1447489007, "post_id": 33658463, "comment_id": 55184899, "body": "Thanks! It works. But need to change the interface a little bit (not channel) because the interface of that in datastore is <a href=\"https://godoc.org/google.golang.org/cloud/datastore#PropertyLoadSaver\" rel=\"nofollow noreferrer\">godoc.org/google.golang.org/cloud/datastore#PropertyLoadSave&zwnj;&#8203;r</a>"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 105, "user_id": 1149215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c7ff93d6a8e594d1dad724faef6cfda?s=128&d=identicon&r=PG", "display_name": "Kit", "link": "https://stackoverflow.com/users/1149215/kit"}, "edited": false, "score": 0, "creation_date": 1447489717, "post_id": 33658463, "comment_id": 55185058, "body": "@Kit Then it looks you&#39;re using the Cloud datastore which slightly differs from AppEngine Datastore. In my example I was showcasing AppEngine Datastore."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 2, "last_activity_date": 1447271237, "last_edit_date": 1447271237, "creation_date": 1447270519, "answer_id": 33658463, "question_id": 33652561, "link": "https://stackoverflow.com/questions/33652561/how-to-ignore-zero-value-in-struct-in-google-datastore-for-golang/33658463#33658463", "title": "How to ignore zero value in struct in Google Datastore for Golang?", "body": "<p>The default saving mechanism does not handle optional fields. A field is either saved all the time, or never. There is no such thing as \"only save if it's value does not equal to something\".</p>\n\n<p>The \"optionally saved property\" is considered a custom behavior, a custom saving mechanism, and as such, it has to be implemented manually. Go's way to do this is to implement the <a href=\"https://cloud.google.com/appengine/docs/go/datastore/reference#PropertyLoadSaver\" rel=\"nofollow\"><code>PropertyLoadSaver</code></a> interface on your struct. Here I present 2 different methods to achieve that:</p>\n\n<h3>Manually saving fields</h3>\n\n<p>Here is an example how to do it by manually saving the fields (and excluding <code>EndDate</code> if it is the zero value):</p>\n\n<pre><code>type Event struct {\n    StartDate time.Time `datastore:\"start_date,noindex\" json:\"startDate\"`\n    EndDate   time.Time `datastore:\"end_date,noindex\" json:\"endDate\"`\n}\n\nfunc (e *Event) Save(c chan&lt;- datastore.Property) error {\n    defer close(c)\n    // Always save StartDate:\n    c &lt;- datastore.Property{Name:\"start_date\", Value:e.StartDate, NoIndex: true}\n\n    // Only save EndDate if not zero value:\n    if !e.EndDate.IsZero() {\n        c &lt;- datastore.Property{Name:\"end_date\", Value:e.EndDate, NoIndex: true}\n    }\n    return nil\n}\n\nfunc (e *Event) Load(c chan&lt;- datastore.Property) error {\n    // No change required in loading, call default implementation:\n    return datastore.LoadStruct(e, c)\n}\n</code></pre>\n\n<h3>With another struct</h3>\n\n<p>Here's another way using another struct. The <code>Load()</code> implementation is always the same, only <code>Save()</code> differs:</p>\n\n<pre><code>func (e *Event) Save(c chan&lt;- datastore.Property) error {\n    if !e.EndDate.IsZero() {\n        // If EndDate is not zero, save as usual:\n        return datastore.SaveStruct(e, c)\n    }\n\n    // Else we need a struct without the EndDate field:\n    s := struct{ StartDate time.Time `datastore:\"start_date,noindex\"` }{e.StartDate}\n    // Which now can be saved using the default saving mechanism:\n    return datastore.SaveStruct(&amp;s, c)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1447319420, "post_id": 33661974, "comment_id": 55108538, "body": "The Datastore does not store entities as JSON, it does not use JSON marshaling/umarshaling. Changing the json value in the field tag has no effect on Datastore saving at all. Asker does not want to exclude the field <i>all the time</i>, he just wants to exclude it <i>if its run-time value</i> is the zero value."}], "tags": [], "owner": {"reputation": 157, "user_id": 1879879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5380465dce1fc431923c9976b4867910?s=128&d=identicon&r=PG", "display_name": "Karl", "link": "https://stackoverflow.com/users/1879879/karl"}, "is_accepted": false, "score": 0, "last_activity_date": 1447285471, "creation_date": 1447285471, "answer_id": 33661974, "question_id": 33652561, "link": "https://stackoverflow.com/questions/33652561/how-to-ignore-zero-value-in-struct-in-google-datastore-for-golang/33661974#33661974", "title": "How to ignore zero value in struct in Google Datastore for Golang?", "body": "<p>Use omitempty in the field tags.\nFrom the docs: <a href=\"https://golang.org/pkg/encoding/json/\" rel=\"nofollow\">https://golang.org/pkg/encoding/json/</a></p>\n\n<blockquote>\n  <p>Struct values encode as JSON objects. Each exported struct field\n  becomes a member of the object unless</p>\n  \n  <ul>\n  <li>the field's tag is \"-\", or</li>\n  <li>the field is empty and its tag specifies the \"omitempty\" option.</li>\n  </ul>\n  \n  <p>Field int <code>json:\"myName,omitempty\"</code></p>\n</blockquote>\n"}], "owner": {"reputation": 105, "user_id": 1149215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c7ff93d6a8e594d1dad724faef6cfda?s=128&d=identicon&r=PG", "display_name": "Kit", "link": "https://stackoverflow.com/users/1149215/kit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 837, "favorite_count": 0, "accepted_answer_id": 33658463, "answer_count": 2, "score": 1, "last_activity_date": 1471380737, "creation_date": 1447251769, "last_edit_date": 1471380737, "question_id": 33652561, "link": "https://stackoverflow.com/questions/33652561/how-to-ignore-zero-value-in-struct-in-google-datastore-for-golang", "title": "How to ignore zero value in struct in Google Datastore for Golang?", "body": "<p>I am trying to use Google Datastore to store data by Go. Since the <code>EndDate</code> is optional field, and don't want to store zero value in that field. If I make a pointer for time field, Google Datastore will send an error message - <code>datastore: unsupported struct field type: *time.Time</code></p>\n\n<p>How can I ignore zero value field in struct?</p>\n\n<pre><code>type Event struct {\n    StartDate time.Time `datastore:\"start_date,noindex\" json:\"startDate\"`\n    EndDate   time.Time `datastore:\"end_date,noindex\" json:\"endDate\"`\n}\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "edited": false, "score": 1, "creation_date": 1447250645, "post_id": 33651888, "comment_id": 55077608, "body": "Your question does not seem specific enough for SO, maybe it is a better fit for <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 1316, "user_id": 4169411, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/724127205/picture?type=large", "display_name": "Kaz", "link": "https://stackoverflow.com/users/4169411/kaz"}, "edited": false, "score": 0, "creation_date": 1447250806, "post_id": 33651888, "comment_id": 55077703, "body": "@asticode This would be a reasonable Code Review question but make sure to embed the code in the question itself if you do come over."}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1447251010, "post_id": 33651888, "comment_id": 55077838, "body": "You can also ask this over on <a href=\"https://forum.golangbridge.org/\" rel=\"nofollow noreferrer\">forum.golangbridge.org</a>"}, {"owner": {"reputation": 287, "user_id": 4270770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff66d6ac9684b8e70a1156ec4c778b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Asticode", "link": "https://stackoverflow.com/users/4270770/asticode"}, "edited": false, "score": 0, "creation_date": 1447251305, "post_id": 33651888, "comment_id": 55078036, "body": "You&#39;re definitely right guys, I&#39;ve asked my question at <a href=\"http://codereview.stackexchange.com/questions/110454/go-write-the-perfect-multi-output-logger\" title=\"go write the perfect multi output logger\">codereview.stackexchange.com/questions/110454/&hellip;</a> and I&#39;ll be sure to checkout your forum @elithar"}], "owner": {"reputation": 287, "user_id": 4270770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff66d6ac9684b8e70a1156ec4c778b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Asticode", "link": "https://stackoverflow.com/users/4270770/asticode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447249520, "creation_date": 1447249520, "question_id": 33651888, "link": "https://stackoverflow.com/questions/33651888/go-is-this-the-proper-way-to-create-a-multi-output-logger", "title": "GO - Is this the proper way to create a multi-output logger?", "body": "<p>I needed to write my own lightweight GO multi-output logger for a work project and I've come up with <a href=\"https://github.com/asticode/go-logger\" rel=\"nofollow\">https://github.com/asticode/go-logger</a>.</p>\n\n<p>I'm not here to advertise at all and I'm rather looking for Gopher's opinions (good or bad) on my code and my implementation since I'd like to know whether I've done things right or whether I've gone completely off tracks.</p>\n\n<p>My points of emphasis would be:</p>\n\n<ul>\n<li>Have I made good use of interfaces?</li>\n<li>Have I made good use of const and global vars ?</li>\n<li>Have I made good use of GO project structure ?</li>\n<li>Have I made good use of GO unit testing package?</li>\n<li>...</li>\n</ul>\n\n<p>I really thank you in advance for the time you'll put in reviewing my project.</p>\n\n<p>Cheers</p>\n\n<p>Quentin</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 3938393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72a3283ea69a2e37da85f7fee5accc0a?s=128&d=identicon&r=PG&f=1", "display_name": "myleftball", "link": "https://stackoverflow.com/users/3938393/myleftball"}, "edited": false, "score": 0, "creation_date": 1447242165, "post_id": 33649584, "comment_id": 55073037, "body": "Excellent answer. Thanks"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 3, "last_activity_date": 1447265477, "last_edit_date": 1447265477, "creation_date": 1447241315, "answer_id": 33649584, "question_id": 33649512, "link": "https://stackoverflow.com/questions/33649512/runtime-error-when-accessing-a-reader-in-struct/33649584#33649584", "title": "Runtime error: When accessing a Reader in struct", "body": "<p>The problem is that you're using non-pointer receiver:</p>\n\n<pre><code>func (b BaseVideo) Download() (err error) {\n    b.fileContent = bytes.NewReader([]byte(\"abc\"))\n    return nil\n}\n</code></pre>\n\n<p>This means your <code>Download()</code> method gets a <em>copy</em> of the <code>BaseVideo</code> value you're calling it on. You modify this copy inside the method (you assign a new <code>Reader</code> to the <code>fileContent</code> field), but the original <code>BaseVideo</code> <strong>will not be modified</strong>.</p>\n\n<p>Solution: use a pointer receiver:</p>\n\n<pre><code>func (b *BaseVideo) Download() (err error) {\n    b.fileContent = bytes.NewReader([]byte(\"abc\"))\n    return nil\n}\n</code></pre>\n\n<p>Of course if you modify the receiver to be a pointer, the type <code>BaseVideo</code> will no longer implement the <code>Video</code> interface, only a pointer to <code>BaseVideo</code>, so also modify <code>NewBaseVideo</code> to return a pointer to the struct value: <code>*BaseVideo</code>. You can achieve this by taking the address of the struct literal:</p>\n\n<pre><code>func NewBaseVideo(path, name string) Video {\n    return &amp;BaseVideo{\n        Path: path,\n        Name: name,\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": false, "score": 2, "last_activity_date": 1447241368, "creation_date": 1447241368, "answer_id": 33649601, "question_id": 33649512, "link": "https://stackoverflow.com/questions/33649512/runtime-error-when-accessing-a-reader-in-struct/33649601#33649601", "title": "Runtime error: When accessing a Reader in struct", "body": "<p>If you want to mutate the value in a methods, the receiver of the method should be a pointer. Replace</p>\n\n<pre><code>func (b BaseVideo) Download() (err error)\n</code></pre>\n\n<p>and such with</p>\n\n<pre><code>func (b *BaseVideo) Download() (err error)\n</code></pre>\n\n<p>Working code on the playground: <a href=\"https://play.golang.org/p/hZ8-RwzVYh\" rel=\"nofollow\">https://play.golang.org/p/hZ8-RwzVYh</a>.</p>\n"}], "owner": {"reputation": 57, "user_id": 3938393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72a3283ea69a2e37da85f7fee5accc0a?s=128&d=identicon&r=PG&f=1", "display_name": "myleftball", "link": "https://stackoverflow.com/users/3938393/myleftball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 33649584, "answer_count": 2, "score": 0, "last_activity_date": 1447265477, "creation_date": 1447241049, "question_id": 33649512, "link": "https://stackoverflow.com/questions/33649512/runtime-error-when-accessing-a-reader-in-struct", "title": "Runtime error: When accessing a Reader in struct", "body": "<p>I'm new to go and trying to implement an interface for video operations (download, upload, transcode). In my download method I'm creating a Reader and assigning it to struct variable 'fileContent'. I'd then like to access the Reader in my upload method but it's throwing a runtime error.</p>\n\n<blockquote>\n  <p>panic: runtime error: invalid memory address or nil pointer dereference</p>\n</blockquote>\n\n<p>Below is a link to my code in go playground. Any help would be great. </p>\n\n<p><a href=\"https://play.golang.org/p/ib38IQ6AZI\" rel=\"nofollow\">https://play.golang.org/p/ib38IQ6AZI</a></p>\n"}, {"tags": ["testing", "go"], "owner": {"reputation": 7876, "user_id": 2777965, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/tQaGa.png?s=128&g=1", "display_name": "030", "link": "https://stackoverflow.com/users/2777965/030"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "closed_date": 1447236593, "answer_count": 0, "score": 2, "last_activity_date": 1447234382, "creation_date": 1447234224, "last_edit_date": 1447234382, "question_id": 33647643, "link": "https://stackoverflow.com/questions/33647643/how-to-test-that-a-panic-is-thrown-in-golang", "closed_reason": "Duplicate", "title": "How to test that a Panic is thrown in Golang?", "body": "<p>I am able to force the throw of a Panic statement, but no matter what I try I am unable to test it.</p>\n\n<p><strong>Test</strong></p>\n\n<pre><code>func TestPanicStatement(t *testing.T) {\n    expected := \"error\"\n    actual := function(\"/file/does/not/exist.xml\")\n    if actual != expected {\n        t.Errorf(\"Test failed, expected: '%s', got:  '%s'\", expected, actual)\n    }\n}\n</code></pre>\n\n<p><strong>Main</strong></p>\n\n<pre><code>if err != nil {\n    panic(err)\n}\n</code></pre>\n\n<p><strong>Outcome</strong></p>\n\n<pre><code>--- FAIL: TestPanicStatement (0.00s)\npanic: EOF [recovered]\n    panic: EOF\n\ngoroutine 8 [running]:\n</code></pre>\n"}, {"tags": ["go", "router", "mux"], "answers": [{"tags": [], "owner": {"reputation": 3038, "user_id": 568689, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a68e2585beb59c1bd2a19c46045f57b?s=128&d=identicon&r=PG", "display_name": "Eden", "link": "https://stackoverflow.com/users/568689/eden"}, "is_accepted": false, "score": 1, "last_activity_date": 1447233596, "creation_date": 1447233596, "answer_id": 33647447, "question_id": 33646948, "link": "https://stackoverflow.com/questions/33646948/go-using-mux-router-how-to-pass-my-db-to-my-handlers/33647447#33647447", "title": "Go using mux Router - How to pass my DB to my handlers", "body": "<p>You can always have \"env\" defined as <a href=\"https://groups.google.com/forum/#!topic/golang-nuts/p9sav4g599E\" rel=\"nofollow\">global variable</a>. </p>\n\n<p>But before everyone will hate me, this is not a good solution! You should create a package that encapsulate the access to your database with public function that state your exact intent.</p>\n\n<p>Something along the lines of </p>\n\n<pre><code>Package db\n\nvar config ....\n\nfunc ShowTodos(params ... ) result {\n   your database access code here.... \n}\n</code></pre>\n\n<p>and from your router function access it with </p>\n\n<pre><code>db.ShowTodos(...)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1524, "user_id": 198256, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc2a6fc77c8d745acd03d4ceac87204a?s=128&d=identicon&r=PG", "display_name": "Newbie", "link": "https://stackoverflow.com/users/198256/newbie"}, "edited": false, "score": 1, "creation_date": 1447238103, "post_id": 33647455, "comment_id": 55070816, "body": "Thank you very much, I already had a look at Alex Edwards blogpost and tried to implement his closure solution (using his example at <a href=\"https://gist.github.com/alexedwards/5cd712192b4831058b21\" rel=\"nofollow noreferrer\">gist.github.com/alexedwards/5cd712192b4831058b21</a> )  Now, I changed it and use a global var in my models package and it is working. I am still not sure if it is the best solution for my project, but for the moment it will fit my needs."}, {"owner": {"reputation": 1456, "user_id": 1873291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3ccb61e243523bc0e0f20c377a1a5c33?s=128&d=identicon&r=PG", "display_name": "Ethan Hohensee", "link": "https://stackoverflow.com/users/1873291/ethan-hohensee"}, "edited": false, "score": 0, "creation_date": 1554148128, "post_id": 33647455, "comment_id": 97637412, "body": "Thanks for this! Just getting started with Golang and GORM and having been searching for about an hour for the &quot;right&quot; way to get my db object into my handlers so they can hit the database."}], "tags": [], "owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "is_accepted": true, "score": 30, "last_activity_date": 1581786872, "last_edit_date": 1581786872, "creation_date": 1447233612, "answer_id": 33647455, "question_id": 33646948, "link": "https://stackoverflow.com/questions/33646948/go-using-mux-router-how-to-pass-my-db-to-my-handlers/33647455#33647455", "title": "Go using mux Router - How to pass my DB to my handlers", "body": "<p>You have three options:</p>\n\n<ol>\n<li><p>Make your database connection pool a global, so that you don't have to pass it. <code>sql.DB</code> is safe for concurrent access, and this is the easiest approach. The downside is that it makes testing harder and obfuscates \"where\" the pool is coming from - e.g.</p>\n\n<pre><code>var db *sql.DB\n\nfunc main() {\n    var err error\n    db, err = sql.Open(...)\n    // Now accessible globally, no need to pass it around\n    // ...\n }\n</code></pre></li>\n<li><p>Wrap your handlers in a closure, which makes it accessible to the inner handler.  You'll need to adapt this to your range-over-routes approach\u2014which is a little obtuse IMO, and makes it harder to see what routes exist, but I digress\u2014for example:</p>\n\n<pre><code>func SomeHandler(db *sql.DB) http.HandlerFunc {\n    fn := func(w http.ResponseWriter, r *http.Request) {\n        res, err := db.GetThings()\n        // etc.\n    }\n\n    return http.HandlerFunc(fn)\n}\n\nfunc main() {\n    db, err := sql.Open(...)\n    http.HandleFunc(\"/some-route\", SomeHandler(db))\n    // etc.\n}\n</code></pre></li>\n<li><p>Create a custom handler type that accepts a handler - e.g.</p>\n\n<pre><code>type AppHandler struct {\n    Handler func(env *config.Env, w http.ResponseWriter, r *http.Request)\n    Env *config.Env\n}\n\n// ServeHTTP allows your type to satisfy the http.Handler interface.\nfunc (ah *AppHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {\n    ah.Handler(ah.Env, w, r)\n}\n\nfunc SomeHandler(env *config.Env, w http.ResponseWriter, r *http.Request) {\n    res, err := env.DB.GetThings()\n    // etc.\n}\n</code></pre></li>\n</ol>\n\n<p>Note that (shameless plug!) I've <a href=\"http://elithrar.github.io/article/http-handler-error-handling-revisited/\" rel=\"noreferrer\">written about the last approach in detail</a>, and Alex Edwards has an <a href=\"http://www.alexedwards.net/blog/organising-database-access\" rel=\"noreferrer\">excellent blog post</a> on approaches to accessing DB pools in Go programs as well.</p>\n\n<p>The only strict advice I can give is that you should shy away from passing your DB pool around in a request context, which is inefficient and not good practice (request contexts are for temporary, per-request objects).</p>\n"}], "owner": {"reputation": 1524, "user_id": 198256, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc2a6fc77c8d745acd03d4ceac87204a?s=128&d=identicon&r=PG", "display_name": "Newbie", "link": "https://stackoverflow.com/users/198256/newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7884, "favorite_count": 4, "accepted_answer_id": 33647455, "answer_count": 2, "score": 14, "last_activity_date": 1581786872, "creation_date": 1447231602, "question_id": 33646948, "link": "https://stackoverflow.com/questions/33646948/go-using-mux-router-how-to-pass-my-db-to-my-handlers", "title": "Go using mux Router - How to pass my DB to my handlers", "body": "<p>At the moment, I try to create a small Web-Project using Go for data handling on the server.</p>\n\n<p>I try to pass my database-connection to my HandlerFunc(tions) but it does not work as expected. I am pretty new to golang, so maybe I did not understand some basic principles of this lang.</p>\n\n<p>My main func looks like this:</p>\n\n<pre><code>func main() {\n\n    db, err := config.NewDB(\"username:password@/databasename?charset=utf8&amp;parseTime=True\")\n    if err != nil {\n        log.Panic(err)\n    }   \n    env := &amp;config.Env{DB: db} \n\n    router := NewRouter(env)\n    log.Fatal(http.ListenAndServe(\":8080\", router))\n}\n</code></pre>\n\n<p>My Router:</p>\n\n<pre><code>func NewRouter(env *config.Env) *mux.Router {\n    router := mux.NewRouter().StrictSlash(true)\n    for _, route := range routes {\n        var handler http.Handler\n\n        handler = route.HandlerFunc\n        handler = Logger(handler, route.Name)\n\n        router.\n            Methods(route.Method).\n            Path(route.Pattern).\n            Name(route.Name).\n            Handler(handler)\n    }   \n    return router\n}\n</code></pre>\n\n<p>and my routes:</p>\n\n<pre><code>type Route struct {\n    Name        string\n    Method      string\n    Pattern     string\n    HandlerFunc http.HandlerFunc\n}\n\ntype Routes []Route\n\nvar routes = Routes{\n    Route{\n        \"Index\",\n        \"GET\",\n        \"/\",\n        controller.Index,\n    },  \n    Route{\n        \"Show\",\n        \"GET\",\n        \"/todos/{todoId}\",\n        controller.TodoShow,\n    },  \n    Route{\n        \"Create\",\n        \"POST\",\n        \"/todos\",\n        controller.TodoCreate,\n    },  \n}\n</code></pre>\n\n<p>So - how can I pass my \"env\" (or env.DB) to my FuncHandlers? I tried many things, but none of them worked. </p>\n"}, {"tags": ["go", "google-apps-script", "google-sheets", "google-drive-api"], "comments": [{"owner": {"reputation": 40596, "user_id": 1677912, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/craWj.png?s=128&g=1", "display_name": "Mogsdad", "link": "https://stackoverflow.com/users/1677912/mogsdad"}, "edited": false, "score": 1, "creation_date": 1447253208, "post_id": 33646511, "comment_id": 55079273, "body": "I think this is the same issue <a href=\"http://stackoverflow.com/a/33548808/1677912\">here</a>; when you start using a different service in your script you need to get new authentication scope that covers them."}, {"owner": {"reputation": 139, "user_id": 2099063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ECm9.jpg?s=128&g=1", "display_name": "Mardwan", "link": "https://stackoverflow.com/users/2099063/mardwan"}, "reply_to_user": {"reputation": 40596, "user_id": 1677912, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/craWj.png?s=128&g=1", "display_name": "Mogsdad", "link": "https://stackoverflow.com/users/1677912/mogsdad"}, "edited": false, "score": 0, "creation_date": 1447308431, "post_id": 33646511, "comment_id": 55103903, "body": "Thanks @Mogsdad. Adding the spreadsheet scope worked! Thank you :)"}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 2099063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ECm9.jpg?s=128&g=1", "display_name": "Mardwan", "link": "https://stackoverflow.com/users/2099063/mardwan"}, "is_accepted": true, "score": 1, "last_activity_date": 1447308668, "creation_date": 1447308668, "answer_id": 33665390, "question_id": 33646511, "link": "https://stackoverflow.com/questions/33646511/app-script-go-quickstart-modification-401-error/33665390#33665390", "title": "App Script Go Quickstart modification 401 error", "body": "<p>As suggested by @Mogsdad, I looked into adding scopes. On the target App Script, click on File >> Project Properties >> Scopes to get what scopes you need to add. An example of a scope is \"<a href=\"https://www.googleapis.com/auth/spreadsheets\" rel=\"nofollow\">https://www.googleapis.com/auth/spreadsheets</a>\". </p>\n\n<p>On the Golang code, add the scope like so:</p>\n\n<pre><code>config, err := google.ConfigFromJSON(b, https://www.googleapis.com/auth/drive\", \"https://www.googleapis.com/auth/spreadsheets\") \n</code></pre>\n\n<p>Hope this helps someone :)</p>\n"}], "owner": {"reputation": 139, "user_id": 2099063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ECm9.jpg?s=128&g=1", "display_name": "Mardwan", "link": "https://stackoverflow.com/users/2099063/mardwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 1, "accepted_answer_id": 33665390, "answer_count": 1, "score": 0, "last_activity_date": 1447308668, "creation_date": 1447229571, "question_id": 33646511, "link": "https://stackoverflow.com/questions/33646511/app-script-go-quickstart-modification-401-error", "title": "App Script Go Quickstart modification 401 error", "body": "<p>I am trying out this tutorial on <a href=\"https://developers.google.com/apps-script/guides/rest/quickstart/go\" rel=\"nofollow\">Go and App Script</a> and it works perfectly but the moment I modified the code to access a spreadsheet the go part doesn't execute the script but give a 401 error. Here is my go code (basically code from the tutorial but changed a few things for it to 'work' on my app script) <a href=\"http://pastebin.com/28S5tVY2\" rel=\"nofollow\">http://pastebin.com/28S5tVY2</a></p>\n\n<p>I don't know if I made a mistake when creating credentials for the script (I have redone this severally with no success) or if I missed something while doing the modification. Any help will be highly appreciated. </p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 818, "user_id": 5292835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f2a5019f9a977706135c3f8246bba1?s=128&d=identicon&r=PG&f=1", "display_name": "mrd0ll4r", "link": "https://stackoverflow.com/users/5292835/mrd0ll4r"}, "is_accepted": false, "score": 2, "last_activity_date": 1447228374, "creation_date": 1447228374, "answer_id": 33646251, "question_id": 33646162, "link": "https://stackoverflow.com/questions/33646162/go-cross-compilation-with-1-5-x-output-file-is-overridden/33646251#33646251", "title": "Go cross-compilation with 1.5.x - output file is overridden", "body": "<p>From the page you linked to:</p>\n\n<blockquote>\n  <p>-o may be used to alter the name and destination of your binary, but remember that go build takes a value that is relative to your $GOPATH/src, not your working directory, so changing directories then executing the go build command is also an option.</p>\n</blockquote>\n\n<p>If you use <code>GOOS</code> and <code>GOARCH</code> in the name, you should be able to achieve what you want.</p>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 3336936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d71d43a57e155f08b4e6323e030e07f?s=128&d=identicon&r=PG&f=1", "display_name": "mihaic", "link": "https://stackoverflow.com/users/3336936/mihaic"}, "is_accepted": true, "score": 2, "last_activity_date": 1447228445, "creation_date": 1447228445, "answer_id": 33646265, "question_id": 33646162, "link": "https://stackoverflow.com/questions/33646162/go-cross-compilation-with-1-5-x-output-file-is-overridden/33646265#33646265", "title": "Go cross-compilation with 1.5.x - output file is overridden", "body": "<p>You could use the \"-o\" argument, like this:</p>\n\n<pre><code>GOOS=linux GOARCH=386 CGO_ENABLED=0 go build -o test/output/myapp\n</code></pre>\n"}], "owner": {"reputation": 3391, "user_id": 4470201, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/558270100/picture?type=large", "display_name": "Shikloshi", "link": "https://stackoverflow.com/users/4470201/shikloshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 33646265, "answer_count": 2, "score": 5, "last_activity_date": 1485097913, "creation_date": 1447227996, "last_edit_date": 1485097913, "question_id": 33646162, "link": "https://stackoverflow.com/questions/33646162/go-cross-compilation-with-1-5-x-output-file-is-overridden", "title": "Go cross-compilation with 1.5.x - output file is overridden", "body": "<p>I'm using <code>go 1.5</code> and I'm cross compiling like specified <a href=\"http://dave.cheney.net/2015/08/22/cross-compilation-with-go-1-5\">here</a>.</p>\n\n<p>The problem is that when compiling the project it will override the binary the last compilation created. Moreover - I will never know which OS/ARCH the executable file that I'm running was compiled to (in any case that is not windows).</p>\n\n<p>Is there a way to rename the file at compile command? </p>\n"}, {"tags": ["go", "tcp", "timer", "rudp"], "answers": [{"tags": [], "owner": {"reputation": 3038, "user_id": 568689, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a68e2585beb59c1bd2a19c46045f57b?s=128&d=identicon&r=PG", "display_name": "Eden", "link": "https://stackoverflow.com/users/568689/eden"}, "is_accepted": false, "score": 0, "last_activity_date": 1447229656, "creation_date": 1447229656, "answer_id": 33646531, "question_id": 33645459, "link": "https://stackoverflow.com/questions/33645459/is-there-a-way-to-callback-a-function-without-creating-a-new-goroutine/33646531#33646531", "title": "Is there a way to callback a function without creating a new goroutine?", "body": "<p>You can create one timer object with <a href=\"https://golang.org/pkg/time/#NewTicker\" rel=\"nofollow\">time.NewTicker</a> this will provide with a channel that sends a message periodically. </p>\n"}, {"tags": [], "owner": {"reputation": 4456, "user_id": 4127569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b728c7d6c1dce81f5a82249b7617756?s=128&d=identicon&r=PG&f=1", "display_name": "jch", "link": "https://stackoverflow.com/users/4127569/jch"}, "is_accepted": false, "score": 0, "last_activity_date": 1447259064, "creation_date": 1447259064, "answer_id": 33655049, "question_id": 33645459, "link": "https://stackoverflow.com/questions/33645459/is-there-a-way-to-callback-a-function-without-creating-a-new-goroutine/33655049#33655049", "title": "Is there a way to callback a function without creating a new goroutine?", "body": "<p>You want to create a single <a href=\"http://en.wikipedia.org/wiki/Priority_queue\" rel=\"nofollow\">priority queue</a> that holds all of the scheduled timeouts.  A single goroutine should be checking the head of the priority queue, sleeping until the next timeout, and either execute the associated code or discard it.</p>\n\n<p>Of course, you will need to deal with synchronisation issues.  The Java way would be to protect the priority queue by a lock.  The more go-ish approach would be to put the timeout-handling goroutine in charge of enqueing timeouts, which it receives over a dedicated channel.</p>\n\n<p>There is a priority queue implementation in <a href=\"https://golang.org/pkg/container/heap/\" rel=\"nofollow\">package <code>container/heap</code></a>, but I haven't checked how good it is.</p>\n"}], "owner": {"reputation": 101, "user_id": 887116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a204338b100e0ed0f9c05b58eafefe?s=128&d=identicon&r=PG", "display_name": "liudanking", "link": "https://stackoverflow.com/users/887116/liudanking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1447259064, "creation_date": 1447224024, "last_edit_date": 1447226822, "question_id": 33645459, "link": "https://stackoverflow.com/questions/33645459/is-there-a-way-to-callback-a-function-without-creating-a-new-goroutine", "title": "Is there a way to callback a function without creating a new goroutine?", "body": "<p>I am trying to implement Reliable-UDP in golang. </p>\n\n<p>One of the basic features I need to implement is packet-retransmission.</p>\n\n<p>The naive method is as follows: </p>\n\n<ol>\n<li>send a packet;</li>\n<li>create a timer (also will create a new goroutine) to check if ACK is received before timer fires.</li>\n</ol>\n\n<p>It is simple, but creation a lot of goroutine is NOT FREE. And I do NOT think implementation of packet-retransmission in TCP uses this method.</p>\n\n<p>So, is there a way to callback a function without creating a new goroutine?</p>\n\n<p>I have checked the post from golang-nuts ( <a href=\"https://groups.google.com/forum/#!topic/golang-nuts/ja8j7wQUB-0\" rel=\"nofollow\">https://groups.google.com/forum/#!topic/golang-nuts/ja8j7wQUB-0</a>), and still can not figure out a solution.</p>\n"}, {"tags": ["go", "sublimetext", "sublime-text-plugin"], "answers": [{"tags": [], "owner": {"reputation": 549, "user_id": 3040816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43fdb4f835d35ff0f78867a4d2007b4f?s=128&d=identicon&r=PG&f=1", "display_name": "smnpl", "link": "https://stackoverflow.com/users/3040816/smnpl"}, "is_accepted": false, "score": 1, "last_activity_date": 1447232411, "last_edit_date": 1447232411, "creation_date": 1447231794, "answer_id": 33646989, "question_id": 33643753, "link": "https://stackoverflow.com/questions/33643753/what-is-a-common-practice-in-rename-a-variable-function-in-sublime-golang/33646989#33646989", "title": "What is a common practice in rename a variable/function in sublime (Golang)?", "body": "<p>Search/replace over files is something Sublime Text supports I believe. Would there be anything wrong with that?\ne: <a href=\"http://docs.sublimetext.info/en/latest/search_and_replace/search_and_replace_files.html\" rel=\"nofollow\">man subl</a></p>\n"}], "owner": {"reputation": 6591, "user_id": 2185472, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05ef4480505adfa05516719b865e22aa?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2185472/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447232411, "creation_date": 1447212172, "question_id": 33643753, "link": "https://stackoverflow.com/questions/33643753/what-is-a-common-practice-in-rename-a-variable-function-in-sublime-golang", "title": "What is a common practice in rename a variable/function in sublime (Golang)?", "body": "<p>One of the advantage of static typed language is the tooling for refactoring. As for the <code>Golang</code>, I think simply a <code>rename</code> tool which can work across files is enough. Is there such a tool / plugin for sublime text editor? </p>\n\n<p>Currently available approach:</p>\n\n<ul>\n<li><p><code>Ctrl-D</code> multi-cursor selection, works fine within a file.</p></li>\n<li><p><code>gorename</code> works in the command line. Is it possible to do the rename\nin sublime (without switching to the command line and back)?</p></li>\n</ul>\n"}, {"tags": ["json", "go", "tags", "bson"], "answers": [{"comments": [{"owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "edited": false, "score": 0, "creation_date": 1447214028, "post_id": 33643936, "comment_id": 55061812, "body": "Anyway, I know this, but I need to do this each time I define a struct, what I want to do is without append the tags, the default action will work for me"}], "tags": [], "owner": {"reputation": 36, "user_id": 5332300, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ynN9XCBf-X8/AAAAAAAAAAI/AAAAAAAAADs/xrxlWfLrw9w/photo.jpg?sz=128", "display_name": "L&#234; Ng\u1ecdc Th\u1ea1ch", "link": "https://stackoverflow.com/users/5332300/l%c3%aa-ng%e1%bb%8dc-th%e1%ba%a1ch"}, "is_accepted": false, "score": 0, "last_activity_date": 1447213560, "creation_date": 1447213560, "answer_id": 33643936, "question_id": 33643677, "link": "https://stackoverflow.com/questions/33643677/how-to-change-default-action-of-golang-tags/33643936#33643936", "title": "How to change default action of golang tags?", "body": "<p>You can try:</p>\n\n<pre><code>   type CvJdRelationInfo struct {\n     JdId            string    `bson:\"jdId\" json:\"jdId\"`\n     CvId            string    `bson:\"cvId\" json:\"cvId\"`\n     Status          int16     `bson:\"status\" json\"status\"`\n     AcceptTimestamp int64     `bson:\"acceptTimeStamp\" json:\"acceptTimeStamp\"`\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 0, "last_activity_date": 1569313319, "last_edit_date": 1569313319, "creation_date": 1447222866, "answer_id": 33645254, "question_id": 33643677, "link": "https://stackoverflow.com/questions/33643677/how-to-change-default-action-of-golang-tags/33645254#33645254", "title": "How to change default action of golang tags?", "body": "<p>You can't change the default behavior of the <a href=\"https://golang.org/pkg/encoding/json/\" rel=\"nofollow noreferrer\"><code>encoding/json</code></a> package. It's built into it and there is no exported variable or function which would change it. Nothing to discuss on it.</p>\n\n<blockquote>\n  <p>The object's default key string is the struct field name but can be specified in the struct field's tag value. </p>\n</blockquote>\n\n<p>One thing to note here is that even though marshaling a value to JSON will use the exported, uppercased name, but when you unmarshal, the <code>json</code> package is \"intelligent\" enough to match lowercased names to uppercased field names too.</p>\n\n<p>See this example:</p>\n\n<pre><code>s := struct{ X, Y int }{}\nif err := json.Unmarshal([]byte(`{\"X\":1,\"y\":2}`), &amp;s); err != nil {\n    panic(err)\n}\nfmt.Printf(\"%+v\", s)\n</code></pre>\n\n<p>It will print (<a href=\"http://play.golang.org/p/fvylv9RP_L\" rel=\"nofollow noreferrer\">Go Playground</a>):</p>\n\n<pre><code>{X:1 Y:2}\n</code></pre>\n\n<p>The <code>json</code> package properly matches the <code>\"X\"</code> and <code>\"y\"</code> keys to the <code>s.X</code> and <code>s.Y</code> fields even though <code>\"y\"</code> is written lowercased.</p>\n"}], "owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1569313319, "creation_date": 1447211623, "last_edit_date": 1447214215, "question_id": 33643677, "link": "https://stackoverflow.com/questions/33643677/how-to-change-default-action-of-golang-tags", "title": "How to change default action of golang tags?", "body": "<p>I am not familiar with usage of <code>golang tags</code>, I want to change the default action of convertion:</p>\n\n<pre><code>type CvJdRelationInfo struct {\n    JdId            string\n    CvId            string\n    Status          int16\n    AcceptTimestamp int64\n}\n</code></pre>\n\n<p><code>json</code> tag will auto convert:</p>\n\n<pre><code>JdId -&gt; JdId\nCvId -&gt; CvId\nStatus -&gt; Status\nAcceptTimestamp -&gt; AcceptTimestamp\n</code></pre>\n\n<p><code>bson</code> tag will auto convert:</p>\n\n<pre><code>JdId -&gt; jdid\nCvId -&gt; cvid\nStatus -&gt; status\nAcceptTimestamp -&gt; accepttimestamp\n</code></pre>\n\n<p>Can I change the default action, such as <code>json</code> <code>bson</code> tags will do this:</p>\n\n<pre><code>JdId -&gt; jdId\nCvId -&gt; cvId\nStatus -&gt; status\nAcceptTimestamp -&gt; acceptTimeStamp\n</code></pre>\n\n<p>So I can omission all tags each time(why should I write tags each time if default action is just what I want?)</p>\n\n<pre><code>type CvJdRelationInfo struct {\n    JdId            string `json:\"jdId\" bson:\"jdId\"`\n    CvId            string `json:\"cvId\" bson:\"cvId\"`\n    Status          int16  `json:\"status\" bson:\"status\"`\n    AcceptTimestamp int64  `json:\"acceptTimestamp\" bson:\"acceptTimestamp\"`\n}\n</code></pre>\n"}, {"tags": ["json", "go", "bson", "mgo"], "answers": [{"comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1577959869, "post_id": 33643766, "comment_id": 105290744, "body": "Calling BSON &quot;binary JSON&quot; is inaccurate. There&#39;s no such thing as binary JSON."}, {"owner": {"reputation": 476, "user_id": 7315344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2EUhR.jpg?s=128&g=1", "display_name": "Limatuz", "link": "https://stackoverflow.com/users/7315344/limatuz"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1579648697, "post_id": 33643766, "comment_id": 105834714, "body": "@Flimzy you may be interested in these links  <a href=\"http://bsonspec.org/\" rel=\"nofollow noreferrer\">bsonspec.org</a> <a href=\"https://en.wikipedia.org/wiki/BSON\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/BSON</a>"}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "reply_to_user": {"reputation": 476, "user_id": 7315344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2EUhR.jpg?s=128&g=1", "display_name": "Limatuz", "link": "https://stackoverflow.com/users/7315344/limatuz"}, "edited": false, "score": 0, "creation_date": 1579682259, "post_id": 33643766, "comment_id": 105843340, "body": "@Limatuz: Note the &quot;JSON-like&quot; terminology in the first sentence. JSON, by <a href=\"https://tools.ietf.org/html/rfc7159\" rel=\"nofollow noreferrer\">very definition</a> is text-based, and thus not &quot;binary.&quot; Even a 1-to-1 binary representation of JSON (which BSON definitely is not) would still not be &quot;binary JSON&quot;. CBOR is probably the closest standard to a 1-to-1 JSON-to-binary representation, but it&#39;s still obviously not &quot;binary JSON&quot;."}], "tags": [], "owner": {"reputation": 36, "user_id": 4219020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d2003ad00bd2f2939a15f39f370958a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Baxter", "link": "https://stackoverflow.com/users/4219020/michael-baxter"}, "is_accepted": false, "score": 2, "last_activity_date": 1447213180, "last_edit_date": 1447213180, "creation_date": 1447212317, "answer_id": 33643766, "question_id": 33643442, "link": "https://stackoverflow.com/questions/33643442/can-i-use-json-tags-as-bson-tags-in-mgo/33643766#33643766", "title": "Can I use json tags as bson tags in mgo?", "body": "<p>MongoDB actually stores the data as binary JSON (bson), which is distinct from JSON. It's slightly confusing because if you access the database using the mongo shell, you get back raw JSON, but it's actually a conversion, it's not the storage format. So in storing the data to the database, the \"mgo\" driver serializes as <strong>bson</strong>.</p>\n\n<p>This serializing ignores the <code>json</code> export keys, and chooses the appropriate name by defaulting to the lowercase version of your struct field. (See the <a href=\"https://godoc.org/labix.org/v2/mgo/bson#Marshal\" rel=\"nofollow\">bson.Marshal go doc</a>.) If you specify a <code>bson</code> export key, it will then ignore the struct field name and go with whatever you have specified as the <code>bson</code> export key.</p>\n\n<p>For example,</p>\n\n<pre class=\"lang-go prettyprint-override\"><code>type User struct {\n    Name string\n    UserAge int `bson:\"age\"`\n    Phone string `json:\"phoneNumber\"`\n}\n</code></pre>\n\n<p>will result in the following structure in MongoDB:</p>\n\n<pre><code>{\n    \"name\": \"\",\n    \"age\": 0,\n    \"phone\": \"\"\n}\n</code></pre>\n\n<p>So it seems like your struct fields should handle most things for you.</p>\n\n<p>The one 'gotcha' that you might not see until it bites you is, if you don't specify the <code>bson</code> export keys, you don't have the ability to do <code>bson:\",omitempty\"</code> for leaving out blank fields, or <code>bson:\",inline\"</code> for marshaling embedded (or nested) structs.</p>\n\n<p>For instance, this is how you would handle embedded structs:</p>\n\n<pre><code>type Employee struct {\n    User `bson:\",inline\"`\n    JobTitle string\n    EmployeeId string\n    Salary int\n}\n</code></pre>\n\n<p>These sorts of things are specified in that link I provided on bson.Marshal. Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10721901, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/2c203cf209fe4585c50310bb3d3a426c?s=128&d=identicon&r=PG", "display_name": "Alan Lavintman", "link": "https://stackoverflow.com/users/10721901/alan-lavintman"}, "is_accepted": false, "score": 0, "last_activity_date": 1543486705, "creation_date": 1543486705, "answer_id": 53536673, "question_id": 33643442, "link": "https://stackoverflow.com/questions/33643442/can-i-use-json-tags-as-bson-tags-in-mgo/53536673#53536673", "title": "Can I use json tags as bson tags in mgo?", "body": "<p>You can use the following (From thrift test file git.apache.org/thrift.git/lib/go/test/GoTagTest.thrift)</p>\n\n<pre><code>struct tagged {\n    1: string string_thing,\n    2: i64 int_thing (go.tag = \"json:\\\"int_thing,string\\\"\"),\n    3: optional i64 optional_int_thing\n}\n</code></pre>\n"}], "owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2971, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1579682522, "creation_date": 1447209959, "last_edit_date": 1579682522, "question_id": 33643442, "link": "https://stackoverflow.com/questions/33643442/can-i-use-json-tags-as-bson-tags-in-mgo", "title": "Can I use json tags as bson tags in mgo?", "body": "<p>I am using <code>thrift</code> in my project, thrift will generate code as follow:</p>\n\n<pre><code>type CvJdRelationInfo struct {\n    JdId            string `thrift:\"jdId,1\" json:\"jdId\"`\n    CvId            string `thrift:\"cvId,2\" json:\"cvId\"`\n    Status          int16  `thrift:\"status,3\" json:\"status\"`\n    AcceptTimestamp int64  `thrift:\"acceptTimestamp,4\" json:\"acceptTimestamp\"`\n}\n</code></pre>\n\n<p>as you see thrift already generate <code>json tags</code>(but <code>no bson tags</code>), when I use <code>mgo</code> save record, <code>mgo</code> will auto convert:</p>\n\n<pre><code>JdId -&gt; jdid\nCvId -&gt; cvid\nStatus -&gt; status\nAcceptTimeStamp -&gt; accepttimestamp\n</code></pre>\n\n<p>what I needed is:</p>\n\n<pre><code>type CvJdRelationInfo struct {\n    JdId            string `thrift:\"jdId,1\" json:\"jdId\" bson:\"jdId\"`\n    CvId            string `thrift:\"cvId,2\" json:\"cvId\" bson:\"cvId\"`\n    Status          int16  `thrift:\"status,3\" json:\"status\" bson:\"status\"`\n    AcceptTimestamp int64  `thrift:\"acceptTimestamp,4\" json:\"acceptTimestamp\" bson:\"acceptTimestamp\"`\n}\n</code></pre>\n\n<p>as your can see, <code>bson tags</code> is the same as <code>json tags</code>. Can I use <code>json tags</code> as <code>bson tags</code>?</p>\n"}, {"tags": ["go", "beego"], "comments": [{"owner": {"reputation": 385, "user_id": 5386963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57a66c301b782f4630f4e45200cc2a5?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewN", "link": "https://stackoverflow.com/users/5386963/andrewn"}, "edited": false, "score": 0, "creation_date": 1447207363, "post_id": 33642708, "comment_id": 55060189, "body": "I&#39;m not terribly familiar with beego/orm, but is there a reason you couldn&#39;t put a tag on an embedded struct? I&#39;m still not sure this will truly help you, since a method operating on that embedded struct won&#39;t have access to any other fields of the outer struct.In terms of"}, {"owner": {"reputation": 834, "user_id": 1395722, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4fc4325896e0c19e7f276d5659cd0694?s=128&d=identicon&r=PG", "display_name": "a.l.", "link": "https://stackoverflow.com/users/1395722/a-l"}, "reply_to_user": {"reputation": 385, "user_id": 5386963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57a66c301b782f4630f4e45200cc2a5?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewN", "link": "https://stackoverflow.com/users/5386963/andrewn"}, "edited": false, "score": 0, "creation_date": 1447223546, "post_id": 33642708, "comment_id": 55064122, "body": "@AndrewN, so in the <code>func (this *Base) Save()</code> method, the <code>this</code>  varable  is always pointer to <code>Base</code>, even if invoking it on a <code>ModelA</code> instance? Maybe the Base solution is the wrong way. To make the question more clear, i add the implement of <code>Save()</code> method."}, {"owner": {"reputation": 385, "user_id": 5386963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57a66c301b782f4630f4e45200cc2a5?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewN", "link": "https://stackoverflow.com/users/5386963/andrewn"}, "edited": false, "score": 0, "creation_date": 1447230429, "post_id": 33642708, "comment_id": 55066784, "body": "Correct. <code>this</code> isn&#39;t very idiomatic in Go, though. If the logic is really <i>exactly</i> the same, make your Save function not-a-method, and call the object (through an interface). Let me see if I can whip up an example, and I&#39;ll post it as an answer, since I&#39;m moving way beyond comments..."}, {"owner": {"reputation": 385, "user_id": 5386963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57a66c301b782f4630f4e45200cc2a5?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewN", "link": "https://stackoverflow.com/users/5386963/andrewn"}, "edited": false, "score": 0, "creation_date": 1447231715, "post_id": 33642708, "comment_id": 55067354, "body": "<a href=\"http://play.golang.org/p/VsxyA5s55a\" rel=\"nofollow noreferrer\">Here</a>&#39;s a very simple example of using interfaces to write your <code>Save</code> logic once."}, {"owner": {"reputation": 834, "user_id": 1395722, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4fc4325896e0c19e7f276d5659cd0694?s=128&d=identicon&r=PG", "display_name": "a.l.", "link": "https://stackoverflow.com/users/1395722/a-l"}, "reply_to_user": {"reputation": 385, "user_id": 5386963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57a66c301b782f4630f4e45200cc2a5?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewN", "link": "https://stackoverflow.com/users/5386963/andrewn"}, "edited": false, "score": 0, "creation_date": 1447256273, "post_id": 33642708, "comment_id": 55081397, "body": "@AndrewN, thank you. If the <code>interface</code> could include data fields, like <code>type IDer interface { ID string }</code>, the code would be more simple and beautiful."}, {"owner": {"reputation": 385, "user_id": 5386963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57a66c301b782f4630f4e45200cc2a5?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewN", "link": "https://stackoverflow.com/users/5386963/andrewn"}, "edited": false, "score": 0, "creation_date": 1447344909, "post_id": 33642708, "comment_id": 55125180, "body": "Well the whole point of interfaces is that they define behavior, not data structures, but it&#39;s pretty common to have structs only make their fields available through a method of the same name, but capitalized/exported."}], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 5386963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57a66c301b782f4630f4e45200cc2a5?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewN", "link": "https://stackoverflow.com/users/5386963/andrewn"}, "edited": false, "score": 1, "creation_date": 1447206783, "post_id": 33642734, "comment_id": 55060055, "body": "It&#39;s important to note that while using interfaces is probably a good idea, it won&#39;t save the author from writing two <code>Save()</code> methods, one for each struct. An interface will really only help reduce the code that <i>uses</i> <code>ModelA</code> and ModelB`, since it can operate on the interface instead."}, {"owner": {"reputation": 834, "user_id": 1395722, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4fc4325896e0c19e7f276d5659cd0694?s=128&d=identicon&r=PG", "display_name": "a.l.", "link": "https://stackoverflow.com/users/1395722/a-l"}, "reply_to_user": {"reputation": 385, "user_id": 5386963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57a66c301b782f4630f4e45200cc2a5?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewN", "link": "https://stackoverflow.com/users/5386963/andrewn"}, "edited": false, "score": 0, "creation_date": 1447219160, "post_id": 33642734, "comment_id": 55063065, "body": "Thanks for pointing out that <code>embedding</code> is not <code>mixin</code>. As @AndrewN said, it would writing two <code>Save()</code> methods too, and I want to write only once, because saving <code>ModelA</code> and saving <code>ModelB</code>  have the same logic."}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "reply_to_user": {"reputation": 834, "user_id": 1395722, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4fc4325896e0c19e7f276d5659cd0694?s=128&d=identicon&r=PG", "display_name": "a.l.", "link": "https://stackoverflow.com/users/1395722/a-l"}, "edited": false, "score": 0, "creation_date": 1447258982, "post_id": 33642734, "comment_id": 55083301, "body": "@alxlx embedding could be beneficial too. You&#39;d still need to use interfaces to keep the calling code generic but if you wanted, you could move all common fields into their own struct and embed that. You could define save there if that subset of the data is sufficient for what you need to do. If you need to write both shared and not shared data in this method, I&#39;d generally recommend against it because it&#39;s just not as clear in Go how this works as say in C# or Java where you&#39;d inherit, override and invoke the base method. With embedding method resolution gets muddy and I don&#39;t like that."}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "reply_to_user": {"reputation": 834, "user_id": 1395722, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4fc4325896e0c19e7f276d5659cd0694?s=128&d=identicon&r=PG", "display_name": "a.l.", "link": "https://stackoverflow.com/users/1395722/a-l"}, "edited": false, "score": 0, "creation_date": 1447259156, "post_id": 33642734, "comment_id": 55083418, "body": "@alxlx I&#39;ll edit with an example. I didn&#39;t read your edit too closely but if that example is more or less complete then I do think it would be good to embed."}], "tags": [], "owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "is_accepted": true, "score": 5, "last_activity_date": 1447259647, "last_edit_date": 1447259647, "creation_date": 1447204877, "answer_id": 33642734, "question_id": 33642708, "link": "https://stackoverflow.com/questions/33642708/how-to-add-a-method-for-different-structs-which-have-one-common-field-in-golang/33642734#33642734", "title": "How to add a method for different structs which have one common field in golang", "body": "<p>Yes. Define an interface. Also, hate to nitpick, while I'm pretty sure you're talking about embedding there isn't a 'mixin' concept that exists in Go. Here's some pseudo code that demonstrates the constructs.</p>\n\n<pre><code>type Savable interface {\n       Save()\n}\n\n// satisfies Savable for ModelA\nfunc (a ModelA) Save() {\n      // do something\n}\n\nvar i Savable\ni = SomeMethodThatRetunsMyModel()\ni.Save()\nSomeOthermMethodThatAcceptsASavableAndCallesSave(i)\n</code></pre>\n\n<p>EDIT: based on some discussion seems like the OP probably wants to do something like below</p>\n\n<pre><code>type ModelA struct {\n    ModelC\n    FiledA string\n}\n\ntype ModelB struct {\n    ModelC\n    FiledB string\n}\n\ntype ModelC struct {\n    Guid string `orm:\"pk\"`\n}\n\nfunc (this ModelC) Save() error {\n    o := orm.NewOrm()\n    guid := guidlib.Generate()\n    this.Guid = guid\n    _, err := o.Insert(this)\n    return err\n}\n</code></pre>\n\n<p>However, note that <code>o.Insert(this)</code> is not going to insert any fields that aren't defined on <code>ModelC</code>. As I mentioned in my comment below the type of inheritance structure that might be used where models A and B would reimplement <code>Save</code> calling the base classes method upfront doesn't really work well in Go. </p>\n\n<p>The rules for method resolution with embedded types aren't completely clear and can be confusing. You could define one version of <code>Save</code> in the embedded structs, redefine it in the embedor and even call it within that method however it doesn't really make much sense to do. I would make a point to avoid embedding if you're still going to have to statically reference the embedded type. For example if I have <code>ModelA</code> embedding <code>ModelC</code> and in the broader scope I'm having to do <code>ModelA.ModelC.SomeMethodThatIhaveToReferencExplicitlyToEnsureItsCalled()</code> then I'm probably making poor use of the feature.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2714735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a8c82f3231ba70b845410042119e5d?s=128&d=identicon&r=PG&f=1", "display_name": "user2714735", "link": "https://stackoverflow.com/users/2714735/user2714735"}, "is_accepted": false, "score": 0, "last_activity_date": 1494773850, "creation_date": 1494773850, "answer_id": 43965355, "question_id": 33642708, "link": "https://stackoverflow.com/questions/33642708/how-to-add-a-method-for-different-structs-which-have-one-common-field-in-golang/43965355#43965355", "title": "How to add a method for different structs which have one common field in golang", "body": "<p>No, you can not do this because golang do not support inherit. But you can do something like this bellow:</p>\n\n<pre><code>func Save(obj interface{}) error {\n    o := orm.NewOrm()\n    guid := guidlib.Generate()\n    r := reflect.ValueOf(obj)\n    f := reflect.Indirect(r).FieldByName(\"Guid\") \n    f.setString(guid)  \n    _, err := o.Insert(obj)\n    return err\n}\n</code></pre>\n\n<p>Be careful, it will panic if there is not field \"guid\"</p>\n"}], "owner": {"reputation": 834, "user_id": 1395722, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4fc4325896e0c19e7f276d5659cd0694?s=128&d=identicon&r=PG", "display_name": "a.l.", "link": "https://stackoverflow.com/users/1395722/a-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3259, "favorite_count": 0, "accepted_answer_id": 33642734, "answer_count": 2, "score": 3, "last_activity_date": 1494773850, "creation_date": 1447204767, "last_edit_date": 1447224026, "question_id": 33642708, "link": "https://stackoverflow.com/questions/33642708/how-to-add-a-method-for-different-structs-which-have-one-common-field-in-golang", "title": "How to add a method for different structs which have one common field in golang", "body": "<p>I'm using beego/orm for my app. Here I have 2 models</p>\n\n<pre><code>type ModelA struct {\n    Guid string `orm:\"pk\"`\n    FiledA string\n}\n\ntype ModelB struct {\n    Guid string `orm:\"pk\"`\n    FiledB string\n}\n</code></pre>\n\n<p>I need to add a <code>Save()</code> method for each struct. In general, I can create an <code>Base</code> struct and mixin it into <code>ModelA</code> and <code>ModelB</code>, but the orm would not work.</p>\n\n<p>Is there any better solution?</p>\n\n<p><strong>edit1:</strong> Giving <code>Save()</code> code here to make question more clear</p>\n\n<pre><code>func (this *ModelA) Save() error {\n    o := orm.NewOrm()\n    guid := guidlib.Generate()\n    this.Guid = guid\n    _, err := o.Insert(this)\n    return err\n}\n\nfunc (this *ModelB) Save() error {\n    o := orm.NewOrm()\n    guid := guidlib.Generate()\n    this.Guid = guid\n    _, err := o.Insert(this)\n    return err\n}\n</code></pre>\n"}, {"tags": ["email", "go"], "answers": [{"tags": [], "owner": {"reputation": 1664, "user_id": 1306228, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e732e5ac9820eeb35a70276cf6c05f7?s=128&d=identicon&r=PG", "display_name": "Ale", "link": "https://stackoverflow.com/users/1306228/ale"}, "is_accepted": false, "score": 0, "last_activity_date": 1447327721, "creation_date": 1447327721, "answer_id": 33670399, "question_id": 33641975, "link": "https://stackoverflow.com/questions/33641975/programmatically-send-mail-to-mailhog/33670399#33670399", "title": "Programmatically Send Mail to MailHog", "body": "<p>I advise you to use my library <a href=\"https://github.com/go-gomail/gomail/\" rel=\"nofollow\">Gomail</a>:</p>\n\n<pre><code>package main\n\nimport \"gopkg.in/gomail.v2\"\n\nfunc main() {\n    m := gomail.NewMessage()\n    m.SetHeader(\"From\", \"from@example.com\")\n    m.SetHeader(\"To\", \"to@example.com\")\n    m.SetHeader(\"Subject\", \"Hello!\")\n    m.SetBody(\"text/plain\", \"What's up?\")\n\n    d := gomail.NewPlainDialer(\"smtp.example.com\", 587, \"user\", \"123456\")\n    if err := d.DialAndSend(m); err != nil {\n        panic(err)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 4369015, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-oRZ19Ko1Qzg/AAAAAAAAAAI/AAAAAAAAAHY/tUaw3DS3Q-w/photo.jpg?sz=128", "display_name": "Glitson George", "link": "https://stackoverflow.com/users/4369015/glitson-george"}, "is_accepted": false, "score": 1, "last_activity_date": 1530867195, "creation_date": 1530867195, "answer_id": 51206515, "question_id": 33641975, "link": "https://stackoverflow.com/questions/33641975/programmatically-send-mail-to-mailhog/51206515#51206515", "title": "Programmatically Send Mail to MailHog", "body": "<p>I Tried by run mail hog in my machine. This is the code\n{</p>\n\n<pre><code>            MailMessage mail = new MailMessage();\n            mail.To.Add(\"glitson@gmail.com\");\n\n            mail.From = new MailAddress(\"priyesh@gmail.com\");\n            mail.Subject = \"Email using Gmail\";\n            string Body = \"Hello\";\n            mail.Body = Body;\n            SmtpClient smtp = new SmtpClient();\n            smtp.Host = \"Localhost\"; //Or Your SMTP Server Address\n            smtp.Port = 1025;\n            smtp.UseDefaultCredentials = false;\n            smtp.Credentials = new System.Net.NetworkCredential\n            (\"username\", \"password\");\n\n            //Or your Smtp Email ID and Password\n            //smtp.EnableSsl = true;\n            smtp.Send(mail);\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 485, "user_id": 5221361, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1ed56bd4393f501d4b691424cc689a75?s=128&d=identicon&r=PG&f=1", "display_name": "Gakho", "link": "https://stackoverflow.com/users/5221361/gakho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1650, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1530867195, "creation_date": 1447200117, "question_id": 33641975, "link": "https://stackoverflow.com/questions/33641975/programmatically-send-mail-to-mailhog", "title": "Programmatically Send Mail to MailHog", "body": "<p>I'm trying to catch e-mails using MailHog in Go. However, their API doesn't demonstrate how to send an email to it in Go itself. I was wondering if anyone has some sample on how to.</p>\n"}, {"tags": ["go", "integer-overflow"], "comments": [{"owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "edited": false, "score": 0, "creation_date": 1447199039, "post_id": 33641717, "comment_id": 55057665, "body": "I suspect boxing up is your best bet. There is no mechanism in the language precisely to keep addition fast."}, {"owner": {"reputation": 150, "user_id": 3023336, "user_type": "registered", "profile_image": "https://graph.facebook.com/1657380227/picture?type=large", "display_name": "Alderin", "link": "https://stackoverflow.com/users/3023336/alderin"}, "edited": false, "score": 1, "creation_date": 1447199045, "post_id": 33641717, "comment_id": 55057675, "body": "I think the extra 4 bytes is near negligible in most modern systems to just use 64bit vs 32bit integers in most situations (exceptions made for large arrays, etc). As for runtime automatic detection of overflow without resorting to assembly, and if your environment doesn&#39;t throw an exception you can catch, it isn&#39;t trivial. IMHO."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1447212822, "post_id": 33641717, "comment_id": 55061540, "body": "Converting to 64-bit <i>just for the calculation</i> has essentially no memory impact, since you&#39;re only holding a constant number of up-sized values at a time. This is what, for example, OpenJDK&#39;s <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/lang/Math.java#864\" rel=\"nofollow noreferrer\"><code>Math.multiplyExact(int, int)</code></a> does."}, {"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "edited": false, "score": 0, "creation_date": 1447215722, "post_id": 33641717, "comment_id": 55062231, "body": "@captncraig it could be done with no overhead (except slightly uglier code). The processor already computes the overflow bit on every single addition, for free; all you need is a way to tell the compiler you&#39;re interested in it. GCC has <code>__builtin_add_overflow</code> these days, and <code>if(__builtin_add_overflow(a,b,c)) { ...</code> can compile right down to an <code>add</code> and a <code>jo</code>, or whatever for a given platform."}, {"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1447215965, "post_id": 33641717, "comment_id": 55062292, "body": "@d11wtq honestly the reasonable thing to do here is to go 64-bit all the time. 32-bit CPUs are disappearing pretty quickly, and on a 64-bit machine there&#39;s no CPU cost to using 64-bit ints, and the memory cost is probably insignificant next to the overhead of other parts of your system."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1447215988, "post_id": 33641717, "comment_id": 55062299, "body": "Beware of corner cases when checking for overflow too. For example, <code>math.MinInt8 &#47; -1</code> when checking multiplication for overflow would cause an overflow itself."}], "answers": [{"comments": [{"owner": {"reputation": 33152, "user_id": 322122, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f855324f298eb7708e39ea117477cbd5?s=128&d=identicon&r=PG", "display_name": "d11wtq", "link": "https://stackoverflow.com/users/322122/d11wtq"}, "edited": false, "score": 1, "creation_date": 1447800369, "post_id": 33643773, "comment_id": 55304795, "body": "Thanks! I think I might have a shorter solution, but not sure if there are edge cases where it doesn&#39;t work: <code>((c &lt; a) != (b &lt; 0))</code>, where <code>c := a + b</code>."}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 12, "last_activity_date": 1447212363, "creation_date": 1447212363, "answer_id": 33643773, "question_id": 33641717, "link": "https://stackoverflow.com/questions/33641717/detect-signed-int-overflow-in-go/33643773#33643773", "title": "Detect signed int overflow in Go", "body": "<p>For example, to detect 32-bit integer overflow for addition,</p>\n\n<pre><code>package main\n\nimport (\n    \"errors\"\n    \"fmt\"\n    \"math\"\n)\n\nvar ErrOverflow = errors.New(\"integer overflow\")\n\nfunc Add32(left, right int32) (int32, error) {\n    if right &gt; 0 {\n        if left &gt; math.MaxInt32-right {\n            return 0, ErrOverflow\n        }\n    } else {\n        if left &lt; math.MinInt32-right {\n            return 0, ErrOverflow\n        }\n    }\n    return left + right, nil\n}\nfunc main() {\n    var a, b int32 = 2147483327, 2147483327\n    c, err := Add32(a, b)\n    if err != nil {\n        // handle overflow\n        fmt.Println(err, a, b, c)\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>integer overflow 2147483327 2147483327 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80955, "user_id": 1002260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5ec9c21c8d54825b04def7a41998d18d?s=128&d=identicon&r=PG", "display_name": "Steven Penny", "link": "https://stackoverflow.com/users/1002260/steven-penny"}, "is_accepted": false, "score": 1, "last_activity_date": 1618270306, "last_edit_date": 1618270306, "creation_date": 1618268631, "answer_id": 67066725, "question_id": 33641717, "link": "https://stackoverflow.com/questions/33641717/detect-signed-int-overflow-in-go/67066725#67066725", "title": "Detect signed int overflow in Go", "body": "<p>For 32 bit integers, the standard way is as you said, to cast to 64 bit, then\ndown size again [1]:</p>\n<pre><code>package main\n\nfunc add32(x, y int32) (int32, int32) {\n   sum64 := int64(x) + int64(y)\n   return x + y, int32(sum64 &gt;&gt; 31)\n}\n\nfunc main() {\n   {\n      s, c := add32(2147483646, 1)\n      println(s == 2147483647, c == 0)\n   }\n   {\n      s, c := add32(2147483647, 1)\n      println(s == -2147483648, c == 1)\n   }\n}\n</code></pre>\n<p>However if you dont like that, you can use some bit operations [2]:</p>\n<pre><code>func add32(x, y int32) (int32, int32) {\n   sum := x + y\n   return sum, x &amp; y | (x | y) &amp;^ sum &gt;&gt; 30\n}\n</code></pre>\n<ol>\n<li><a href=\"https://github.com/golang/go/blob/go1.16.3/src/math/bits/bits.go#L368-L373\" rel=\"nofollow noreferrer\">https://github.com/golang/go/blob/go1.16.3/src/math/bits/bits.go#L368-L373</a></li>\n<li><a href=\"https://github.com/golang/go/blob/go1.16.3/src/math/bits/bits.go#L380-L387\" rel=\"nofollow noreferrer\">https://github.com/golang/go/blob/go1.16.3/src/math/bits/bits.go#L380-L387</a></li>\n</ol>\n"}], "owner": {"reputation": 33152, "user_id": 322122, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f855324f298eb7708e39ea117477cbd5?s=128&d=identicon&r=PG", "display_name": "d11wtq", "link": "https://stackoverflow.com/users/322122/d11wtq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7805, "favorite_count": 1, "accepted_answer_id": 33643773, "answer_count": 2, "score": 16, "last_activity_date": 1618270306, "creation_date": 1447198620, "question_id": 33641717, "link": "https://stackoverflow.com/questions/33641717/detect-signed-int-overflow-in-go", "title": "Detect signed int overflow in Go", "body": "<p>I'm building a Lisp, and I want 32 bit integers to automatically switch to 64 bit integers if a computation would cause them to otherwise overflow. And likewise, for 64 bit overflows, switch to arbitrarily sized integers.</p>\n\n<p>The problem I have is that I don't know what the \"correct\" way is to detect an integer overflow.</p>\n\n<pre><code>a, b := 2147483647, 2147483647\nc := a + b\n</code></pre>\n\n<p>How can I efficiently check if c overflowed?</p>\n\n<p>I have considered always converting to 64 bit values to do the calculation, then down-sizing again afterwards when possible, but that seems expensive and memory wasteful for something that is as primitive and core to the language as basic arithmetic.</p>\n"}, {"tags": ["go", "md5"], "comments": [{"owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "edited": false, "score": 0, "creation_date": 1447196737, "post_id": 33641282, "comment_id": 55056752, "body": "I wouldn&#39;t call it an exact duplicate, but the same answer as <a href=\"https://stackoverflow.com/questions/22765185/md5-inconsistent-between-c-sharp-and-golang\" title=\"md5 inconsistent between c sharp and golang\">stackoverflow.com/questions/22765185/&hellip;</a> applies"}], "answers": [{"comments": [{"owner": {"reputation": 924, "user_id": 3068922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zjwoG.png?s=128&g=1", "display_name": "HighlyUnavailable", "link": "https://stackoverflow.com/users/3068922/highlyunavailable"}, "edited": false, "score": 1, "creation_date": 1447198080, "post_id": 33641353, "comment_id": 55057310, "body": "I think the documentation on md5.Sum is wrong, since the doc comment on hash.Sum is &quot;Sum appends the current hash to b and returns the resulting slice. It does not change the underlying hash state.&quot; which is what does happen. If you call <code>fmt.Println(string(hasher.Sum([]byte(text))))</code> you get <code>This is a test\ufffd\ufffd\u064f\ufffd\ufffd\ufffd\t\ufffd\ufffd\ufffdB~</code> which is: <code>5468697320697320612074657374 d41d8cd98f00b204e9800998ecf8427e</code> or, the value of <code>text</code> with the hash of an empty string (<code>d41d8cd98f00b204e9800998ecf8427e</code>) appended."}, {"owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "reply_to_user": {"reputation": 924, "user_id": 3068922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zjwoG.png?s=128&g=1", "display_name": "HighlyUnavailable", "link": "https://stackoverflow.com/users/3068922/highlyunavailable"}, "edited": false, "score": 0, "creation_date": 1447198189, "post_id": 33641353, "comment_id": 55057351, "body": "<code>md5.Sum</code> hashes the input and returns a new array of bytes. <code>hasher.Sum</code> appends the output to the array you pass in, but does not look at the input at all."}, {"owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "reply_to_user": {"reputation": 924, "user_id": 3068922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zjwoG.png?s=128&g=1", "display_name": "HighlyUnavailable", "link": "https://stackoverflow.com/users/3068922/highlyunavailable"}, "edited": false, "score": 0, "creation_date": 1447198230, "post_id": 33641353, "comment_id": 55057360, "body": "If you never write to the hasher, then you will get the hash of an empty string, correct."}, {"owner": {"reputation": 924, "user_id": 3068922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zjwoG.png?s=128&g=1", "display_name": "HighlyUnavailable", "link": "https://stackoverflow.com/users/3068922/highlyunavailable"}, "edited": false, "score": 0, "creation_date": 1447198338, "post_id": 33641353, "comment_id": 55057398, "body": "That&#39;s not what the code says: <a href=\"https://golang.org/src/crypto/md5/md5.go\" rel=\"nofollow noreferrer\">golang.org/src/crypto/md5/md5.go</a> Look at the Sum method - it&#39;s not actually doing anything to the hash, you need to call Write to add bytes to the hash. That&#39;s why I say it&#39;s a doc bug - the documentation itself is wrong, the code isn&#39;t."}, {"owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "reply_to_user": {"reputation": 924, "user_id": 3068922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zjwoG.png?s=128&g=1", "display_name": "HighlyUnavailable", "link": "https://stackoverflow.com/users/3068922/highlyunavailable"}, "edited": false, "score": 0, "creation_date": 1447198565, "post_id": 33641353, "comment_id": 55057477, "body": "By &quot;It does not change the underlying hash state.&quot; they are referring to the members of the <code>digest</code> struct which are only changes on Write. I agree the docs are a bit confusing, as I&#39;ve had the same issue myself. But md5.Sum and hash.Sum do different things. I believe the docs are technically correct."}, {"owner": {"reputation": 924, "user_id": 3068922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zjwoG.png?s=128&g=1", "display_name": "HighlyUnavailable", "link": "https://stackoverflow.com/users/3068922/highlyunavailable"}, "edited": false, "score": 0, "creation_date": 1447198572, "post_id": 33641353, "comment_id": 55057482, "body": "Nevermind - found the difference. <code>md5.Sum</code> (the function not bound to anything) will return the checksum. However, a variable of somemd5.Sum() (that is a Hasher) will return the concatenated bytes+hash. That is some weird packaging."}, {"owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "reply_to_user": {"reputation": 924, "user_id": 3068922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zjwoG.png?s=128&g=1", "display_name": "HighlyUnavailable", "link": "https://stackoverflow.com/users/3068922/highlyunavailable"}, "edited": false, "score": 0, "creation_date": 1447198636, "post_id": 33641353, "comment_id": 55057503, "body": "yeah, the package func is really a convenience feature, but the naming confuses things."}], "tags": [], "owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "is_accepted": true, "score": 4, "last_activity_date": 1447196646, "creation_date": 1447196646, "answer_id": 33641353, "question_id": 33641282, "link": "https://stackoverflow.com/questions/33641282/golang-md5-write-vs-sum-why-different-outputs/33641353#33641353", "title": "Golang md5 Write vs Sum - why different outputs?", "body": "<p>The argument to the Sum function is not input, but a location to store the output. It is technically possible to Sum into a fixed byte array without needing to allocate. You must use <code>Write</code> to provide input to the hash function.</p>\n\n<p>Or use <code>md5.Sum()</code> directly:</p>\n\n<pre><code>func GetMD5HashWithSum(text string) string {\n    hash := md5.Sum([]byte(text))\n    return hex.EncodeToString(hash[:]) \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254, "user_id": 3492033, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N72OR.png?s=128&g=1", "display_name": "tgreiser", "link": "https://stackoverflow.com/users/3492033/tgreiser"}, "is_accepted": false, "score": 4, "last_activity_date": 1447196778, "creation_date": 1447196778, "answer_id": 33641383, "question_id": 33641282, "link": "https://stackoverflow.com/questions/33641282/golang-md5-write-vs-sum-why-different-outputs/33641383#33641383", "title": "Golang md5 Write vs Sum - why different outputs?", "body": "<p>I was mixing up hasher.Sum() with md5.Sum(). These do produce equivalent outputs.</p>\n\n<pre><code>func GetMD5HashWithWrite(text string) []byte {\n    hasher := md5.New()\n    hasher.Write([]byte(text))\n    return hasher.Sum(nil)\n}\n\nfunc GetMD5HashWithSum(text string) [16]byte {\n    return md5.Sum([]byte(text))\n}\n</code></pre>\n\n<p>Playground: <a href=\"https://play.golang.org/p/fpE5ztnh5U\" rel=\"nofollow\">https://play.golang.org/p/fpE5ztnh5U</a></p>\n"}], "owner": {"reputation": 254, "user_id": 3492033, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N72OR.png?s=128&g=1", "display_name": "tgreiser", "link": "https://stackoverflow.com/users/3492033/tgreiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2625, "favorite_count": 0, "accepted_answer_id": 33641353, "answer_count": 2, "score": 4, "last_activity_date": 1447196778, "creation_date": 1447196317, "question_id": 33641282, "link": "https://stackoverflow.com/questions/33641282/golang-md5-write-vs-sum-why-different-outputs", "title": "Golang md5 Write vs Sum - why different outputs?", "body": "<p>Can anyone explain why these methods produce two different output values? It isn't clear from the md5 docs.</p>\n\n<pre><code>import (\n    \"crypto/md5\"\n    \"encoding/hex\"\n    \"fmt\"\n)\n\nfunc GetMD5HashWithWrite(text string) string {\n    hasher := md5.New()\n    hasher.Write([]byte(text))\n    return hex.EncodeToString(hasher.Sum(nil))\n}\n\nfunc GetMD5HashWithSum(text string) string {\n    hasher := md5.New()\n    return hex.EncodeToString(hasher.Sum([]byte(text)))\n}\n</code></pre>\n\n<p>See example: <a href=\"https://play.golang.org/p/Fy7KgfCvXc\" rel=\"nofollow\">https://play.golang.org/p/Fy7KgfCvXc</a></p>\n"}, {"tags": ["go", "floating-point", "floating-accuracy"], "comments": [{"owner": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "edited": false, "score": 1, "creation_date": 1447195829, "post_id": 33640943, "comment_id": 55056345, "body": "Maybe your surprise comes from ignoring that 1.021 is not exactly the fraction 1021/1000, but the nearest possible float to this fraction... Please read the literature recommended with the floating-point tag."}, {"owner": {"reputation": 1499, "user_id": 5128105, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NDMnr.png?s=128&g=1", "display_name": "Sundar", "link": "https://stackoverflow.com/users/5128105/sundar"}, "reply_to_user": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "edited": false, "score": 0, "creation_date": 1447237640, "post_id": 33640943, "comment_id": 55070548, "body": "Thanks. That clarifies it. Interestingly, I did not understand why I got downvotes for the question. I indeed searched around and was not able to find a clear reason. Somehow I thought this was Go specific, while it seems very generic."}, {"owner": {"reputation": 1499, "user_id": 5128105, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NDMnr.png?s=128&g=1", "display_name": "Sundar", "link": "https://stackoverflow.com/users/5128105/sundar"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1447324165, "post_id": 33640943, "comment_id": 55111561, "body": "@ThomasPadron-McCarthy yes, it is. Thanks. Interestingly that post got 811 upvotes, while mine -3."}, {"owner": {"reputation": 1499, "user_id": 5128105, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NDMnr.png?s=128&g=1", "display_name": "Sundar", "link": "https://stackoverflow.com/users/5128105/sundar"}, "reply_to_user": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "edited": false, "score": 0, "creation_date": 1447417174, "post_id": 33640943, "comment_id": 55156670, "body": "More explanation here @ <a href=\"http://0.30000000000000004.com\" rel=\"nofollow noreferrer\">0.30000000000000004.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 4, "last_activity_date": 1447195786, "creation_date": 1447195786, "answer_id": 33641154, "question_id": 33640943, "link": "https://stackoverflow.com/questions/33640943/golang-float-arithmetic/33641154#33641154", "title": "Golang float arithmetic", "body": "<p>Go, like everyone else, uses IEEE-754 binary floating-point arithmetic. Floating-point arithmetic is inexact for some decimal values.</p>\n\n<p>References:</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Floating_point\" rel=\"nofollow\">Floating point</a></p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/IEEE_floating_point\" rel=\"nofollow\">IEEE floating point</a></p>\n"}], "owner": {"reputation": 1499, "user_id": 5128105, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NDMnr.png?s=128&g=1", "display_name": "Sundar", "link": "https://stackoverflow.com/users/5128105/sundar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1223, "favorite_count": 1, "closed_date": 1447324188, "accepted_answer_id": 33641154, "answer_count": 1, "score": -2, "last_activity_date": 1447195786, "creation_date": 1447194834, "question_id": 33640943, "link": "https://stackoverflow.com/questions/33640943/golang-float-arithmetic", "closed_reason": "Duplicate", "title": "Golang float arithmetic", "body": "<p>How does the float arithmetic work in Go</p>\n\n<p>Playground <a href=\"https://play.golang.org/p/eayXoOe83E\" rel=\"nofollow\">link</a></p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    j := 1.021\n    fmt.Println(j)\n    k := j*1000\n    fmt.Println(k)\n    l := int(k)\n    fmt.Println(l)\n}\n\nOutput:\n1.021\n1020.9999999999999\n1020\n</code></pre>\n\n<p>I was expecting <code>1021</code> to be printed, but I got <code>1020</code></p>\n"}, {"tags": ["go", "yaml"], "comments": [{"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 4, "creation_date": 1447191701, "post_id": 33639269, "comment_id": 55054314, "body": "Just use the <code>MapSlice</code> type from that package instead of a <code>map</code> in the data structure that you deserialize to."}], "answers": [{"comments": [{"owner": {"reputation": 1376, "user_id": 5190508, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9a505583a1564c89608a5dc393580654?s=128&d=identicon&r=PG&f=1", "display_name": "S.R", "link": "https://stackoverflow.com/users/5190508/s-r"}, "edited": false, "score": 0, "creation_date": 1571928539, "post_id": 42109240, "comment_id": 103409214, "body": "Nice example - but in most cases we know the under type. So I want to keep order of <code>map[string]*MyType</code> Is there easy solution for this? @hobbs"}], "tags": [], "owner": {"reputation": 270, "user_id": 7300777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-kSxhRcDsF44/AAAAAAAAAAI/AAAAAAAAAIE/ip2W_GX5Kl4/photo.jpg?sz=128", "display_name": "Fandy Dharmawan", "link": "https://stackoverflow.com/users/7300777/fandy-dharmawan"}, "is_accepted": true, "score": 11, "last_activity_date": 1486546089, "creation_date": 1486546089, "answer_id": 42109240, "question_id": 33639269, "link": "https://stackoverflow.com/questions/33639269/preserving-order-of-yaml-maps-using-go/42109240#42109240", "title": "Preserving order of YAML maps using Go", "body": "<p>Here you go:</p>\n\n<pre><code>var data = `\n  a: Easy!\n  b:\n  c: 2\n  d: [3, 4]\n`\nm := yaml.MapSlice{}\nerr := yaml.Unmarshal([]byte(data), &amp;m)\nif err != nil {\n    log.Fatalf(\"error: %v\", err)\n}\nfmt.Printf(\"--- m:\\n%v\\n\\n\", m)\n</code></pre>\n"}], "owner": {"reputation": 4020, "user_id": 388739, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/vqsVi.jpg?s=128&g=1", "display_name": "Mark LeMoine", "link": "https://stackoverflow.com/users/388739/mark-lemoine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3202, "favorite_count": 0, "accepted_answer_id": 42109240, "answer_count": 1, "score": 7, "last_activity_date": 1486546089, "creation_date": 1447188317, "last_edit_date": 1447191500, "question_id": 33639269, "link": "https://stackoverflow.com/questions/33639269/preserving-order-of-yaml-maps-using-go", "title": "Preserving order of YAML maps using Go", "body": "<p>I'm trying to figure out how to read a YAML file in Go, while preserving the order of keys as ordered in the YAML doc. Most of the examples I've seen involve sorting the keys, but that won't work in my case. In addition, the YAML is arbitrarily structured (keys are user-defined, and values are a mix of string and string lists, also user-defined), which complicates matters.</p>\n\n<p>go-yaml.v2 seems to do what I want (<a href=\"http://blog.labix.org/2014/09/22/announcing-yaml-v2-for-go\" rel=\"noreferrer\">http://blog.labix.org/2014/09/22/announcing-yaml-v2-for-go</a>), but I can't find any examples on how to use the ordering functionality. That, along with being completely new to Go, is leaving me pretty stumped.</p>\n\n<p>I'd be happy to provide examples of the YAML I'm trying to parse, if needed.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1447184975, "post_id": 33638113, "comment_id": 55050647, "body": "I think the paradigm you want to embody would be better served by unmarshalling into a <code>map[string]interface{}</code> and then iterating it&#39;s keys and values. Should you need the decoder (perhaps the incoming data is to large to have in memory at once) check out the docs, <a href=\"https://golang.org/pkg/encoding/json/#Decoder\" rel=\"nofollow noreferrer\">golang.org/pkg/encoding/json/#Decoder</a> there are methods to return the next item in the stream, check for it ect. The example for the <code>Decode</code> method should serve well since it&#39;s essentially what you&#39;re trying to do."}, {"owner": {"reputation": 15832, "user_id": 1156707, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/99055b620fb3a9d30a8f6ac480c25227?s=128&d=identicon&r=PG", "display_name": "Louis Thibault", "link": "https://stackoverflow.com/users/1156707/louis-thibault"}, "reply_to_user": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1447185182, "post_id": 33638113, "comment_id": 55050785, "body": "@evanmcdonnal, thanks for this helpful reply. Perhapse I&#39;m not quite understanding the idea of <code>Decoder.Buffered</code>.  I ask because it&#39;s the only thing that seems to mention memory:  is the idea that all the data <i>aren&#39;t</i> read at once, but gradually paged into a memory buffer?"}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1447187702, "post_id": 33638113, "comment_id": 55052169, "body": "I haven&#39;t used that class for a bit but yes, I believe data is buffered as needed so if you&#39;re dealing with a large stream of data it is the common approach. If you&#39;re dealing with a data set that can easily be held in memory, more often you&#39;ll unmarshal into an object and deal with that."}], "answers": [{"comments": [{"owner": {"reputation": 15832, "user_id": 1156707, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/99055b620fb3a9d30a8f6ac480c25227?s=128&d=identicon&r=PG", "display_name": "Louis Thibault", "link": "https://stackoverflow.com/users/1156707/louis-thibault"}, "edited": false, "score": 0, "creation_date": 1447185680, "post_id": 33638362, "comment_id": 55051090, "body": "Just to be sure... is this the correct way of handling reads that expect lots of data?  Perhaps my problem is better solved by a buffer of some sort?"}, {"owner": {"reputation": 18961, "user_id": 1094941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gVU2.jpg?s=128&g=1", "display_name": "mna", "link": "https://stackoverflow.com/users/1094941/mna"}, "reply_to_user": {"reputation": 15832, "user_id": 1156707, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/99055b620fb3a9d30a8f6ac480c25227?s=128&d=identicon&r=PG", "display_name": "Louis Thibault", "link": "https://stackoverflow.com/users/1156707/louis-thibault"}, "edited": false, "score": 1, "creation_date": 1447186203, "post_id": 33638362, "comment_id": 55051350, "body": "Will you be handling a bunch of distinct JSON values from a Reader, or just one big JSON object, or something else? Decoder does use a buffer, but it will get as big as the biggest value you read. If a single value can potentially be very big and you don&#39;t want to load it all in memory, you can use the <code>Decoder.Token</code> approach (<a href=\"https://golang.org/pkg/encoding/json/#Decoder.Token\" rel=\"nofollow noreferrer\">golang.org/pkg/encoding/json/#Decoder.Token</a>)"}, {"owner": {"reputation": 18961, "user_id": 1094941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gVU2.jpg?s=128&g=1", "display_name": "mna", "link": "https://stackoverflow.com/users/1094941/mna"}, "reply_to_user": {"reputation": 15832, "user_id": 1156707, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/99055b620fb3a9d30a8f6ac480c25227?s=128&d=identicon&r=PG", "display_name": "Louis Thibault", "link": "https://stackoverflow.com/users/1156707/louis-thibault"}, "edited": false, "score": 0, "creation_date": 1447187000, "post_id": 33638362, "comment_id": 55051794, "body": "Then that would be the correct way, unless you expect a single value can get unreasonably large, in which case you could use the Token approach which requires more work on your part (and can still cause memory issues if, say, a single JSON string value is very large). If you know the JSON values will be reasonable, the loop with Decoder.Decode is fine."}], "tags": [], "owner": {"reputation": 18961, "user_id": 1094941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gVU2.jpg?s=128&g=1", "display_name": "mna", "link": "https://stackoverflow.com/users/1094941/mna"}, "is_accepted": false, "score": 1, "last_activity_date": 1447185069, "creation_date": 1447185069, "answer_id": 33638362, "question_id": 33638113, "link": "https://stackoverflow.com/questions/33638113/how-can-i-iterate-over-a-decoder/33638362#33638362", "title": "How can I iterate over a Decoder?", "body": "<p>A <code>json.Decoder</code> is a struct, and in Go, you can only iterate (use <code>range</code>) over strings, slices/arrays, maps and channels (<a href=\"https://golang.org/ref/spec#For_statements\" rel=\"nofollow\">https://golang.org/ref/spec#For_statements</a>).</p>\n\n<p>You can, however, loop over all JSON-encoded values in an <code>io.Reader</code>:</p>\n\n<pre><code>func main() {\n    s := `\"a string\"\n72\n[\"an\", \"array\"]\n{\"an\": \"object\"}\n`\n    dec := json.NewDecoder(strings.NewReader(s))\n    for {\n        var v interface{}\n        if err := dec.Decode(&amp;v); err != nil {\n            if err == io.EOF {\n                break\n            }\n            log.Fatal(err)\n        }\n        log.Print(v)\n    }\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/flqXlcx_6B\" rel=\"nofollow\">http://play.golang.org/p/flqXlcx_6B</a></p>\n\n<p>EDIT: although <code>More</code> does seem to work for values as in this example, it is not its intended usage (based on the godoc), so checking for err == io.EOF would be better. Updated the code snippet.</p>\n"}, {"tags": [], "owner": {"reputation": 1855, "user_id": 1558705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1563795271fe55bf0beab2d12cd69b0?s=128&d=identicon&r=PG", "display_name": "Dean Elbaz", "link": "https://stackoverflow.com/users/1558705/dean-elbaz"}, "is_accepted": true, "score": 3, "last_activity_date": 1447185076, "creation_date": 1447185076, "answer_id": 33638363, "question_id": 33638113, "link": "https://stackoverflow.com/questions/33638113/how-can-i-iterate-over-a-decoder/33638363#33638363", "title": "How can I iterate over a Decoder?", "body": "<p>Unfortunately, you can only use <code>range</code> with an \"array, slice, string, or map, or reading from a channel\" (see <a href=\"https://golang.org/doc/effective_go.html#for\" rel=\"nofollow\">effective go</a>)</p>\n\n<p>to iterate over structs as they get decoded, the documentation recommends doing: </p>\n\n<pre><code>dec := json.NewDecoder(strings.NewReader(jsonStream))\nfor {\n    var m Message\n    if err := dec.Decode(&amp;m); err == io.EOF {\n        break\n    } else if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Printf(\"%s: %s\\n\", m.Name, m.Text)\n}\n</code></pre>\n\n<p>(taken directly from the <a href=\"https://golang.org/pkg/encoding/json/#Decoder\" rel=\"nofollow\">official doc example</a>)</p>\n"}], "owner": {"reputation": 15832, "user_id": 1156707, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/99055b620fb3a9d30a8f6ac480c25227?s=128&d=identicon&r=PG", "display_name": "Louis Thibault", "link": "https://stackoverflow.com/users/1156707/louis-thibault"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 33638363, "answer_count": 2, "score": 1, "last_activity_date": 1447185076, "creation_date": 1447184101, "question_id": 33638113, "link": "https://stackoverflow.com/questions/33638113/how-can-i-iterate-over-a-decoder", "title": "How can I iterate over a Decoder?", "body": "<p>I come from a Python background and so have a tendency to think in terms of iterators.  It seems to me that the <code>range</code> keyword in Go intends for us to think in a nearly identical way, so I would like to do somthing semantically equivalent to this Python code in Go:</p>\n\n<pre><code>for obj in json_decoder:\n    # business logic\n</code></pre>\n\n<p>Here is the motivating case in Go; consider the following function:</p>\n\n<pre><code>func (c *GorpController) Create(dec *json.Decoder) {\n    // business logic\n}\n</code></pre>\n\n<p>I would like to be able to implement it as:</p>\n\n<pre><code>for someValue := range dec {\n    // business logic\n}\n</code></pre>\n\n<p>Is there some sort of way to use <code>range</code> with a <code>Decoder</code> interface?  A function that wraps it in a different interface would be ideal, and an idiomatic pattern would be acceptable.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["xml", "struct", "go"], "comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 1, "creation_date": 1447176328, "post_id": 33634987, "comment_id": 55045703, "body": "Use <a href=\"https://golang.org/pkg/fmt/#Fprintln\" rel=\"nofollow noreferrer\"><code>fmt.Fprintln()</code></a> like this <code>err, fd := os.OpenFile(&quot;myfile.txt&quot;, os.O_WRONLY|os.O_TRUNC, 0666); fmt.Fprintln(fd, g); fd.Close()</code> ?"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1447176566, "post_id": 33634987, "comment_id": 55045857, "body": "But I don&#39;t quite get your question: it&#39;s titled like having to do something with XML, your code example does something with XML but then you basically ask about how would you use <code>fmt.Println()</code> to write to a file rather than to a console.  Could you narrow your question down as much as possible? If you want to write <code>g</code> to a file, XML is completely irrelevant. If you want to write XML, everything else is completely irrelevant. Please read <a href=\"http://stackoverflow.com/help/mcve\">this</a>."}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1447176629, "post_id": 33634987, "comment_id": 55045897, "body": "...and you didn&#39;t even show us the code which fails for you."}, {"owner": {"reputation": 15, "user_id": 3623634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2775d5662fd8a9710d2eb30a20711b88?s=128&d=identicon&r=PG&f=1", "display_name": "Noahhh", "link": "https://stackoverflow.com/users/3623634/noahhh"}, "reply_to_user": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1447179126, "post_id": 33634987, "comment_id": 55047377, "body": "I took what you gave me and changed it slightly and it ended up working, thank you!  About the XML - Sorry, new to GO and my Bedework struct was dealing with pulling XML and putting it in to []Group but I realize now I did not word the title correctly.  If you want to put up what you wrote in your first comment as the answer I can select it."}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1447179806, "post_id": 33634987, "comment_id": 55047766, "body": "What was the point of editing your question to put the answer in it? It sort of defeats the original purpose of the question."}, {"owner": {"reputation": 15, "user_id": 3623634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2775d5662fd8a9710d2eb30a20711b88?s=128&d=identicon&r=PG&f=1", "display_name": "Noahhh", "link": "https://stackoverflow.com/users/3623634/noahhh"}, "reply_to_user": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1447179997, "post_id": 33634987, "comment_id": 55047884, "body": "Put it back to how it was."}, {"owner": {"reputation": 1652, "user_id": 918176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2bdb37b11c35de00bb68359342a82f38?s=128&d=identicon&r=PG", "display_name": "user918176", "link": "https://stackoverflow.com/users/918176/user918176"}, "edited": false, "score": 0, "creation_date": 1447957911, "post_id": 33634987, "comment_id": 55388724, "body": "@Noahhh Well it&#39;s good you got it working! You are supposed to provide an answer below, and then click on the &quot;accept&quot; button. Before you do that the question shows up in the &quot;unanswered&quot; queue."}], "owner": {"reputation": 15, "user_id": 3623634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2775d5662fd8a9710d2eb30a20711b88?s=128&d=identicon&r=PG&f=1", "display_name": "Noahhh", "link": "https://stackoverflow.com/users/3623634/noahhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1447179937, "creation_date": 1447173407, "last_edit_date": 1447179937, "question_id": 33634987, "link": "https://stackoverflow.com/questions/33634987/go-error-writing-xml-struct-to-file", "title": "GO Error writing xml struct to file", "body": "<p>Currently my console output is formatted like <code>[{a} {b} {c} {d}]</code>.</p>\n\n<p>I'm looking to write this output to a file in place of <code>fmt.Println(a)</code>, but every time I am met with an error such as:</p>\n\n<pre><code>cannot use a (type []Group) as type []byte in argument to ioutil.WriteFile' or similar\ncannot use a (`type []Group`) as type `io.Writer` in argument to `fmt.Fprint`:\n[]Group does not implement io.Writer (missing Write method)).\n</code></pre>\n\n<p>Do I need to convert <code>[]group</code> to another type?  I have tried <code>json.Marshall(group)</code> but that ended up the same.</p>\n\n<pre><code>package main\n\nimport (\n  \"fmt\"\n  \"net/http\"\n  \"io/ioutil\"\n  \"encoding/xml\"\n)\n\ntype Bedework struct {\n  XMLName xml.Name `xml:\"bedework\"`\n  Groups []Group `xml:\"groups&gt;group\"`\n}\n\ntype Group struct {\n  Name string `xml:\"name\"`\n}\n\nfunc main() {\n  response, err := http.Get(\"http://localhost:3000/cal/?noxslt=yes\")\n  if err != nil {\n    fmt.Println(\"Error opening file:\", err)\n    return\n  } else {\n    defer response.Body.Close()\n\n    contents, _ := ioutil.ReadAll(response.Body)\n\n    var b Bedework\n    var g []Group\n    xml.Unmarshal(contents, &amp;b)\n    for _, group := range b.Groups {\n        g = append(g, group)\n    }\n  fmt.Println(g)\n  }\n}\n</code></pre>\n"}, {"tags": ["windows", "go", "build"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1447172791, "post_id": 33634358, "comment_id": 55043222, "body": "Can&#39;t reproduce on any Go version from 1.2 to 1.5.1. Are you sure it&#39;s not a misprint? Have you tried adding an explicit build tag?"}, {"owner": {"reputation": 99, "user_id": 5123899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba442f89d8f98e31fbc4d3b3163e592e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach", "link": "https://stackoverflow.com/users/5123899/zach"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1447176989, "post_id": 33634358, "comment_id": 55046112, "body": "Yes, adding <code>&#47;&#47; +build windows</code> in the <code>foo_windows.go</code> file doesn&#39;t change anything. FWIW, I&#39;ve been using Go version 1.5.1. Also, I doubt it&#39;s a misprint, since putting the code from <code>foo_windows.go</code> into <code>foo.go</code> makes the build successful. It appears that it might be something in the <code>foo_window.go</code> file, but besides <code>&#47;&#47; +build</code> comments, I&#39;m not sure what effects a build."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1447229787, "post_id": 33634358, "comment_id": 55066474, "body": "A wild guess: You have strange characters in the filename &quot;foo_windows.go&quot;. Maybe the name just <i>looks</i> like foo_windows.go but there is a invisible space or the w is a capital one or the i is a cyrillic/turkish/whatever one?"}, {"owner": {"reputation": 99, "user_id": 5123899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba442f89d8f98e31fbc4d3b3163e592e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach", "link": "https://stackoverflow.com/users/5123899/zach"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1447245454, "post_id": 33634358, "comment_id": 55074756, "body": "@Volker Good suggestion. I recreated the file entirely to make sure the name was all normal text and it changed nothing."}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 5123899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba442f89d8f98e31fbc4d3b3163e592e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach", "link": "https://stackoverflow.com/users/5123899/zach"}, "is_accepted": true, "score": 0, "last_activity_date": 1447247071, "creation_date": 1447247071, "answer_id": 33651155, "question_id": 33634358, "link": "https://stackoverflow.com/questions/33634358/go-build-ignores-files-without-saying-anything/33651155#33651155", "title": "Go build ignores files without saying anything", "body": "<p>I will answer my own question and hope it helps someone else. </p>\n\n<p><code>foo_windows.go</code> was not included in the build because of unexpressed build errors. Specifically, <code>foo_windows.go</code> contains C code, and because <code>CGO_ENABLED=0</code> by default, go didn't try compiling it, it just saw there was C code in the file and excluded the file. Setting <code>CGO_ENABLED=1</code> included the file in the build.</p>\n"}], "owner": {"reputation": 99, "user_id": 5123899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba442f89d8f98e31fbc4d3b3163e592e?s=128&d=identicon&r=PG&f=1", "display_name": "Zach", "link": "https://stackoverflow.com/users/5123899/zach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 33651155, "answer_count": 1, "score": 3, "last_activity_date": 1485262080, "creation_date": 1447171538, "last_edit_date": 1485262080, "question_id": 33634358, "link": "https://stackoverflow.com/questions/33634358/go-build-ignores-files-without-saying-anything", "title": "Go build ignores files without saying anything", "body": "<p>I'm getting some really strange behavior when attempting to build a windows version of my go program. </p>\n\n<p>My directory contains: </p>\n\n<pre><code>foo.go  \nfoo_windows.go  \nfoo_windows_test.go  \nfoo_unix.go  \nfoo_linux.go  \nfoo_linux_test.go  \nfoo_darwin.go  \n</code></pre>\n\n<p>Windows builds are failing because the build ignores foo_windows.go, for some reason. Note, there are no <code>// +build</code> comments in any files. Here's the output of the build file list:</p>\n\n<pre><code>$ GOOS=linux GOARCH=amd64 go list -f '{{.IgnoredGoFiles}}' github.com/foo/\n[foo_darwin.go foo_windows.go foo_windows_test.go]\n\n$ GOOS=darwin GOARCH=amd64 go list -f '{{.IgnoredGoFiles}}' github.com/foo/\n[foo_linux.go foo_linux_test.go foo_windows.go foo_windows_test.go]\n\n$ GOOS=windows GOARCH=amd64 go list -f '{{.IgnoredGoFiles}}' github.com/foo/\n[foo_darwin.go foo_linux.go foo_linux_test.go foo_unix.go foo_windows.go]\n</code></pre>\n\n<p>Obviously the last item is very wrong. foo_windows.go should not be ignored. Note that when including the methods in <code>foo_windows.go</code> in <code>foo.go</code> directly, the windows build succeeds, so it really is excluding the file, and the file contains everything needed for a good build. </p>\n\n<p>Both cross-compiling on a mac and compiling normally on a windows machine lead to the same problems of file exclusion, which leads me to believe it's something about the file itself that is causing problems, but I'm not sure what it might be. </p>\n\n<p>Does anyone have any idea why this is happening?</p>\n"}, {"tags": ["string", "go", "character"], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 412256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bb7b87e9ccfeb023a151ac2411f9dd?s=128&d=identicon&r=PG", "display_name": "Dr. Ernie", "link": "https://stackoverflow.com/users/412256/dr-ernie"}, "edited": false, "score": 2, "creation_date": 1492451345, "post_id": 33633451, "comment_id": 73968855, "body": "<a href=\"https://play.golang.org/p/IzcWx771wF\" rel=\"nofollow noreferrer\">play.golang.org/p/IzcWx771wF</a>  Here&#39;s a slightly more general version, that takes arbitrary runes to use as the character to insert."}], "tags": [], "owner": {"reputation": 2590, "user_id": 1209451, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1700220388/picture?type=large", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1209451/oleg"}, "is_accepted": true, "score": 8, "last_activity_date": 1447169044, "creation_date": 1447169044, "answer_id": 33633451, "question_id": 33633168, "link": "https://stackoverflow.com/questions/33633168/how-to-insert-a-character-every-x-characters-in-a-string-in-golang/33633451#33633451", "title": "How to insert a Character every X Characters in a String in Golang?", "body": "<p><a href=\"https://play.golang.org/p/HEGbe7radf\" rel=\"noreferrer\">https://play.golang.org/p/HEGbe7radf</a></p>\n\n<p>This function just inserts '-' each Nth element</p>\n\n<pre><code>func insertNth(s string,n int) string {\n    var buffer bytes.Buffer\n    var n_1 = n - 1\n    var l_1 = len(s) - 1\n    for i,rune := range s {\n       buffer.WriteRune(rune)\n       if i % n == n_1 &amp;&amp; i != l_1  {\n          buffer.WriteRune('-')\n       }\n    }\n    return buffer.String()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 4074586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b8eaeb188788da55f046402d6e9277?s=128&d=identicon&r=PG&f=1", "display_name": "Diablojoe", "link": "https://stackoverflow.com/users/4074586/diablojoe"}, "is_accepted": false, "score": 2, "last_activity_date": 1447170549, "last_edit_date": 1495541392, "creation_date": 1447170549, "answer_id": 33634013, "question_id": 33633168, "link": "https://stackoverflow.com/questions/33633168/how-to-insert-a-character-every-x-characters-in-a-string-in-golang/33634013#33634013", "title": "How to insert a Character every X Characters in a String in Golang?", "body": "<p>According to the Go documentation <a href=\"https://blog.golang.org/slices\" rel=\"nofollow noreferrer\">strings are a read only Slice of bytes.</a>. With that in mind there is an issue that comes up. What character set are you using? You can see some examples of where things get weird <a href=\"https://stackoverflow.com/questions/30263607/how-to-get-a-single-unicode-character-from-string-in-golang\">here</a> and <a href=\"https://stackoverflow.com/questions/15018545/how-to-index-characters-in-a-golang-string\">here</a>.</p>\n\n<p>Despite the complexity there still is a simple answer </p>\n\n<pre><code>s = strings.Replace(s, \"hello\", \"hello-\", -1)\ns = strings.Replace(s, \"world\", \"world-\", -1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "is_accepted": false, "score": 1, "last_activity_date": 1447175258, "last_edit_date": 1447175258, "creation_date": 1447174879, "answer_id": 33635472, "question_id": 33633168, "link": "https://stackoverflow.com/questions/33633168/how-to-insert-a-character-every-x-characters-in-a-string-in-golang/33635472#33635472", "title": "How to insert a Character every X Characters in a String in Golang?", "body": "<p>My take:</p>\n\n<pre><code>\nimport (\n    \"fmt\"\n    \"regexp\"\n)\n\nconst s = \"helloworldhelloworldhelloworld\"\n\nfunc Attempt1(s string) string {\n    var re = regexp.MustCompile(`(\\Bhello|\\Bworld)`)\n    return re.ReplaceAllString(s, \"-$1\")\n}\n\nfunc Attempt2(s string) string {\n    const chunkLen = len(\"hello\")\n    out := make([]rune, len(s)+len(s)/chunkLen)\n    i, j := 1, 0\n    for _, c := range s {\n        out[j] = c\n        if i == len(s) {\n            break\n        }\n        j++\n        if i%chunkLen == 0 {\n            out[j] = '-'\n            j++\n        }\n        i++\n    }\n    return string(out)\n}\n\nfunc main() {\n    fmt.Println(Attempt1(s))\n    fmt.Println(Attempt2(s))\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/QQ-ccxM4z3\" rel=\"nofollow\"><kbd>Playground link</kbd></a></p>\n\n<p>I should add that while it would be possible to implement\n\"approach 3\" &mdash; that \"split the source string in chunks of\nfive characters then join the chunks using the '-' character\" one, &mdash;\nit would still require scanning the source string rune-by-rune as my <code>Attempt2()</code> does; so if you squint at it, you'll see that storing\na list of chunks and then joining them is doing more operations for\nno real gain (and bigger memory footprint etc).</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 5269692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b09ac58f2eac883f98398d012993169?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/5269692/j%c3%a9r%c3%b4me"}, "is_accepted": false, "score": 3, "last_activity_date": 1489056404, "creation_date": 1489056404, "answer_id": 42693281, "question_id": 33633168, "link": "https://stackoverflow.com/questions/33633168/how-to-insert-a-character-every-x-characters-in-a-string-in-golang/42693281#42693281", "title": "How to insert a Character every X Characters in a String in Golang?", "body": "<p>I feel the following solution is worth mentioning:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nvar s = \"helloworldhelloworldhelloworld\"\n\nfunc main() {\n    for i := 5; i &lt; len(s); i += 6 {\n        s = s[:i] + \"-\" + s[i:]\n    }\n    fmt.Println(s)\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/aMXOTgiNHf\" rel=\"nofollow noreferrer\">https://play.golang.org/p/aMXOTgiNHf</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9654256, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lFGiBqkTQ_o/AAAAAAAAAAI/AAAAAAAAa5Y/3JCn9aYakSk/photo.jpg?sz=128", "display_name": "Dylan", "link": "https://stackoverflow.com/users/9654256/dylan"}, "is_accepted": false, "score": 0, "last_activity_date": 1523895231, "last_edit_date": 1523895231, "creation_date": 1523894830, "answer_id": 49861725, "question_id": 33633168, "link": "https://stackoverflow.com/questions/33633168/how-to-insert-a-character-every-x-characters-in-a-string-in-golang/49861725#49861725", "title": "How to insert a Character every X Characters in a String in Golang?", "body": "<p>If you know your string is divisible by 5, then this could also be a solution. Definitely less efficient though than some of the other solutions posted.</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"regexp\"\n    \"strings\"\n)\n\nfunc main() {\n    fmt.Println(InsertEvery5(\"HelloWorld\", \"-\"))\n}\n\n// Only works if len(str) mod 5 is 0\nfunc InsertEvery5(str string, insert string) string {\n    re := regexp.MustCompile(`.{5}`) // Every 5 chars\n    parts := re.FindAllString(str, -1) // Split the string into 5 chars blocks.\n    return strings.Join(parts, insert) // Put the string back together\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17105, "user_id": 472084, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/539bf5ecaec0ac24e133243ba77a7a7d?s=128&d=identicon&r=PG", "display_name": "472084", "link": "https://stackoverflow.com/users/472084/472084"}, "is_accepted": false, "score": 0, "last_activity_date": 1562149885, "creation_date": 1562149885, "answer_id": 56868110, "question_id": 33633168, "link": "https://stackoverflow.com/questions/33633168/how-to-insert-a-character-every-x-characters-in-a-string-in-golang/56868110#56868110", "title": "How to insert a Character every X Characters in a String in Golang?", "body": "<p>My take. I needed to add new lines (more than a single character) to long strings to wrap them.</p>\n\n<pre><code>func InsertNewLines(s string, n int) string {\n    var r = regexp.MustCompile(\"(.{\" + strconv.Itoa(n) + \"})\")\n    return r.ReplaceAllString(s, \"$1&lt;wbr /&gt;\")\n}\n</code></pre>\n"}], "owner": {"reputation": 7876, "user_id": 2777965, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/tQaGa.png?s=128&g=1", "display_name": "030", "link": "https://stackoverflow.com/users/2777965/030"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7779, "favorite_count": 1, "accepted_answer_id": 33633451, "answer_count": 6, "score": 3, "last_activity_date": 1562149885, "creation_date": 1447168197, "last_edit_date": 1447168537, "question_id": 33633168, "link": "https://stackoverflow.com/questions/33633168/how-to-insert-a-character-every-x-characters-in-a-string-in-golang", "title": "How to insert a Character every X Characters in a String in Golang?", "body": "<p><strong>Aim:</strong> to insert a character every x characters in a string in Golang</p>\n\n<p><strong>Input:</strong> <code>helloworldhelloworldhelloworld</code></p>\n\n<p><strong>Expected Output:</strong> <code>hello-world-hello-world-hello-world</code></p>\n\n<p><strong>Attempts</strong></p>\n\n<p><em>Attempt one</em></p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    s := \"helloworldhelloworldhelloworld\"\n\n    s = strings.Replace(s, \"world\", \",\", -1)\n    fmt.Println(s)\n}\n</code></pre>\n\n<p>results in: <code>hello,hello,hello,</code></p>\n\n<hr>\n\n<p><em>Attempt two</em></p>\n\n<ol>\n<li>Count number of characters</li>\n<li>For loop</li>\n<li>If X=5 then insert a <code>-</code></li>\n</ol>\n\n<hr>\n\n<p><em>Attempt three</em></p>\n\n<ol>\n<li>Scan combined with join</li>\n</ol>\n\n<p><strong>Problem</strong></p>\n\n<p>The reason that attempts two and three do not contain code snippets at the moment is that I am still thinking what approach should be used to insert a character every X characters in a string in Golang.</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 7, "last_activity_date": 1447166063, "creation_date": 1447166063, "answer_id": 33632446, "question_id": 33632365, "link": "https://stackoverflow.com/questions/33632365/how-to-allocate-a-slice-of-floats-in-go/33632446#33632446", "title": "How to allocate a slice of floats in Go?", "body": "<p>Your method of generating the random numbers is fine, however <code>xs</code> is empty, and Go doesn't automatically extend slices. You could use <a href=\"https://golang.org/ref/spec#Appending_and_copying_slices\">append</a>, however since you know the size in advance, it's most efficient to replace</p>\n\n<pre><code>var xs []float64\n</code></pre>\n\n<p>with</p>\n\n<pre><code>xs := make([]float64, 10)\n</code></pre>\n\n<p>which will give it the right size initially.</p>\n"}, {"comments": [{"owner": {"reputation": 6591, "user_id": 2185472, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05ef4480505adfa05516719b865e22aa?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2185472/nick"}, "edited": false, "score": 0, "creation_date": 1447207741, "post_id": 33633601, "comment_id": 55060275, "body": "Thank you for showing me how to use the <code>rand</code> package - it&#39;s quite useful."}], "tags": [], "owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "is_accepted": false, "score": 4, "last_activity_date": 1447169414, "creation_date": 1447169414, "answer_id": 33633601, "question_id": 33632365, "link": "https://stackoverflow.com/questions/33632365/how-to-allocate-a-slice-of-floats-in-go/33633601#33633601", "title": "How to allocate a slice of floats in Go?", "body": "<p>@hobbs answered the part about your error, but still your solution will give you the same array every time you run it because you are not passing a random seed. I would do something like this:</p>\n\n<pre><code>package main \n\nimport (\n    \"fmt\"\n    \"math/rand\"\n    \"time\"\n)\n\nfunc main() {\n    s := rand.NewSource(time.Now().UnixNano())\n    r := rand.New(s)\n\n    xn := make([]float64, 10)\n\n    for n := 0; n &lt; 10; n++ {\n        xn[n] = r.Float64()\n    }\n\n    fmt.Println(xn)\n}\n</code></pre>\n"}], "owner": {"reputation": 6591, "user_id": 2185472, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05ef4480505adfa05516719b865e22aa?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2185472/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2215, "favorite_count": 1, "accepted_answer_id": 33632446, "answer_count": 2, "score": 3, "last_activity_date": 1447229917, "creation_date": 1447165823, "last_edit_date": 1447229917, "question_id": 33632365, "link": "https://stackoverflow.com/questions/33632365/how-to-allocate-a-slice-of-floats-in-go", "title": "How to allocate a slice of floats in Go?", "body": "<p>I'm learning <code>Go</code> programming and try to test the following <code>average</code> function:</p>\n\n<pre><code>func average(xs []float64) float64 {\n    total := 0.0\n    for _, v := range xs {\n        total += v\n    }\n    return total / float64(len(xs))\n}\n</code></pre>\n\n<p>I tried to generate a slice of random float numbers by:</p>\n\n<pre><code>var xs []float64\nfor n := 0; n &lt; 10; n++ {\n    xs[n] = rand.Float64()\n}\n</code></pre>\n\n<p>however, I got </p>\n\n<pre><code>panic: runtime error: index out of range\n</code></pre>\n\n<p>Question:</p>\n\n<ol>\n<li>How to generate a slice of random number in Golang?</li>\n<li>Is expression or function call, like <code>xs := []float64 { for ... }</code> allowed in slice literals?</li>\n</ol>\n"}, {"tags": ["mongodb", "go", "aerospike"], "comments": [{"owner": {"reputation": 3038, "user_id": 568689, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a68e2585beb59c1bd2a19c46045f57b?s=128&d=identicon&r=PG", "display_name": "Eden", "link": "https://stackoverflow.com/users/568689/eden"}, "edited": false, "score": 1, "creation_date": 1447162718, "post_id": 33630121, "comment_id": 55035826, "body": "Are you able to insert a simple string to aerospike?"}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 1, "creation_date": 1447163097, "post_id": 33630121, "comment_id": 55036088, "body": "You should add, which package exactly are you using. Judging by the fact that it panics instead of returning an error explaining what&#39;s wrong, seems like a package bug."}, {"owner": {"reputation": 365, "user_id": 1889008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80beccc053ae095465fa39f104bb2523?s=128&d=identicon&r=PG", "display_name": "Milos Bejda", "link": "https://stackoverflow.com/users/1889008/milos-bejda"}, "edited": false, "score": 1, "creation_date": 1447163507, "post_id": 33630121, "comment_id": 55036338, "body": "I&#39;m iterating through MongoDB collection and I&#39;m trying to save the documents to AeroSpike with Aerospikes PutObject method."}, {"owner": {"reputation": 365, "user_id": 1889008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80beccc053ae095465fa39f104bb2523?s=128&d=identicon&r=PG", "display_name": "Milos Bejda", "link": "https://stackoverflow.com/users/1889008/milos-bejda"}, "reply_to_user": {"reputation": 3038, "user_id": 568689, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a68e2585beb59c1bd2a19c46045f57b?s=128&d=identicon&r=PG", "display_name": "Eden", "link": "https://stackoverflow.com/users/568689/eden"}, "edited": false, "score": 1, "creation_date": 1447163543, "post_id": 33630121, "comment_id": 55036357, "body": "@eden I did a sanity test and structs do save into Aerospike. I updated the question with the code I used to save data into AeroSpike"}, {"owner": {"reputation": 365, "user_id": 1889008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80beccc053ae095465fa39f104bb2523?s=128&d=identicon&r=PG", "display_name": "Milos Bejda", "link": "https://stackoverflow.com/users/1889008/milos-bejda"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 1, "creation_date": 1447163559, "post_id": 33630121, "comment_id": 55036369, "body": "@Ainar I updated the question with packages."}], "answers": [{"tags": [], "owner": {"reputation": 3038, "user_id": 568689, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a68e2585beb59c1bd2a19c46045f57b?s=128&d=identicon&r=PG", "display_name": "Eden", "link": "https://stackoverflow.com/users/568689/eden"}, "is_accepted": true, "score": 3, "last_activity_date": 1447183856, "creation_date": 1447183856, "answer_id": 33638047, "question_id": 33630121, "link": "https://stackoverflow.com/questions/33630121/aerospike-golang-client-putobject-method-gives-me-panic-reflect-call-of-reflec/33638047#33638047", "title": "Aerospike Golang client putObject method gives me panic: reflect: call of reflect.Value.Elem on map Value", "body": "<p>You are trying to save a <strong>map</strong> into aerospike as oppose to a <strong>struct</strong>. </p>\n\n<p>I think that your best option is to encapsulate the map inside a struct.  </p>\n"}], "owner": {"reputation": 365, "user_id": 1889008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80beccc053ae095465fa39f104bb2523?s=128&d=identicon&r=PG", "display_name": "Milos Bejda", "link": "https://stackoverflow.com/users/1889008/milos-bejda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 33638047, "answer_count": 1, "score": 2, "last_activity_date": 1447183856, "creation_date": 1447158896, "last_edit_date": 1447163408, "question_id": 33630121, "link": "https://stackoverflow.com/questions/33630121/aerospike-golang-client-putobject-method-gives-me-panic-reflect-call-of-reflec", "title": "Aerospike Golang client putObject method gives me panic: reflect: call of reflect.Value.Elem on map Value", "body": "<p>I'm trying to save a the results from MongoDB into AeroSpike. I'm using the MGO client for Mongodb. The code is the following :</p>\n\n<pre><code>package main\n\nimport (\n    \"log\"\n    \"flag\"\n    \"fmt\"\n    ///\"reflect\"\n    \"gopkg.in/mgo.v2\"\n    \"gopkg.in/mgo.v2/bson\"\n    as \"github.com/aerospike/aerospike-client-go\"\n   /// \"encoding/json\"\n)\n\n\n/*\nIterating through the results\n */\n results := make(map[string]interface{})\n iter := c.Find(nil).Iter()\nfor iter.Next(&amp;results) {\n\n    tmp := make(map[string]interface{})\n    b, _ := bson.Marshal(results)\n    bson.Unmarshal(b, &amp;tmp)\n        log.Println(\"func (interface, interface):\",  tmp[\"_id\"])\n/*\nAerospike Key\n */\n        key, err := as.NewKey(*Namespace, *Set, \"LIST\")\nif err != nil {\n    log.Fatal(err)\n}\n\n/*\nSaving to aerospike\n */\nclient.PutObject(WritePolicy, key, tmp)\n\n}\nif err := iter.Close(); err != nil {\n   fmt.Println(err)\n}\n</code></pre>\n\n<p>I get the following error from Aerospike :</p>\n\n<pre><code>panic: reflect: call of reflect.Value.Elem on map Value\n\ngoroutine 1 [running]:\nreflect.Value.Elem(0x24dd40, 0xc20803b020, 0x15, 0x0, 0x0, 0x0)\n    /usr/local/Cellar/go/1.4.2/libexec/src/reflect/value.go:703 +0x1d5\ngithub.com/aerospike/aerospike-client-go.marshal(0x24dd40, 0xc20803b020, 0xc208052101, 0x0, 0x0, 0x0)\n    /Users/milos/Downloads/golang/src/github.com/aerospike/aerospike-client-go/marshal.go:143 +0xa1\n</code></pre>\n\n<p>I have turned to google and had no luck with this.</p>\n\n<p>For a sanity test I have ran the following to see if the struct saves into AeroSpike and it does save.</p>\n\n<pre><code> type OBJECT struct {\n    Price  int\n    DBName string\n}\n\nobj := &amp;OBJECT{198, \"Jack Shaftoe and Company\"}\n errr := client.PutObject(WritePolicy, key, obj)\nif errr != nil {\n    log.Fatal(errr)\n}\n}\nif err := iter.Close(); err != nil {\n   fmt.Println(err)\n}\n</code></pre>\n"}, {"tags": ["go", "oauth", "oauth-2.0", "authorization"], "comments": [{"owner": {"reputation": 473, "user_id": 279890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c814f355aec49a73a7c3bbcc3b0eb27?s=128&d=identicon&r=PG", "display_name": "Yannick", "link": "https://stackoverflow.com/users/279890/yannick"}, "edited": false, "score": 1, "creation_date": 1447147191, "post_id": 33623520, "comment_id": 55026807, "body": "<a href=\"https://developers.google.com/identity/protocols/OpenIDConnect?hl=en\" rel=\"nofollow noreferrer\">Google OpenID</a>"}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 2, "creation_date": 1447149179, "post_id": 33623520, "comment_id": 55027970, "body": "Take a look at <a href=\"https://github.com/markbates/goth\" rel=\"nofollow noreferrer\">github.com/markbates/goth</a> - which makes OAuth/OAuth2 much less &#39;manual&#39;."}, {"owner": {"reputation": 139, "user_id": 4548148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34277a80dcf52eaf574e892e747b101c?s=128&d=identicon&r=PG&f=1", "display_name": "tugayac", "link": "https://stackoverflow.com/users/4548148/tugayac"}, "edited": false, "score": 0, "creation_date": 1447200728, "post_id": 33623520, "comment_id": 55058275, "body": "Thanks for the links. Looks like Goth is the way to go. I can read the source code to get an understanding as to how OAuth 2.0 works."}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 4548148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34277a80dcf52eaf574e892e747b101c?s=128&d=identicon&r=PG&f=1", "display_name": "tugayac", "link": "https://stackoverflow.com/users/4548148/tugayac"}, "is_accepted": true, "score": 1, "last_activity_date": 1447200863, "last_edit_date": 1495540742, "creation_date": 1447200863, "answer_id": 33642103, "question_id": 33623520, "link": "https://stackoverflow.com/questions/33623520/using-oauth2-0-as-authorization-system-for-webapp/33642103#33642103", "title": "Using OAuth2.0 as Authorization system for webapp", "body": "<p>I ended up using <a href=\"http://github.com/markbates/goth\" rel=\"nofollow noreferrer\">Goth</a>, as suggested in <a href=\"https://stackoverflow.com/questions/33623520/using-oauth2-0-as-authorization-system-for-webapp#comment55027970_33623520\">this comment</a> by <a href=\"https://stackoverflow.com/users/556573/elithrar\">@elithrar</a>.</p>\n"}], "owner": {"reputation": 139, "user_id": 4548148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34277a80dcf52eaf574e892e747b101c?s=128&d=identicon&r=PG&f=1", "display_name": "tugayac", "link": "https://stackoverflow.com/users/4548148/tugayac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "accepted_answer_id": 33642103, "answer_count": 1, "score": 3, "last_activity_date": 1521213951, "creation_date": 1447133448, "question_id": 33623520, "link": "https://stackoverflow.com/questions/33623520/using-oauth2-0-as-authorization-system-for-webapp", "title": "Using OAuth2.0 as Authorization system for webapp", "body": "<p>I'm fairly new to implementing an authorization system for webapps and would like to use OAuth2.0 with Google to provide authorization to users that need to login to their accounts on the webapp. This means that Google will be providing the account details for users, but I will not be using the Google API. I will need a way to tell who's logged on and whether they have access to certain APIs using OAuth. I am aware that Google <a href=\"https://developers.google.com/identity/sign-in/web/\" rel=\"nofollow\">provides simple sign-in</a>, but I would like to learn more about OAuth 2.0, which is why I'm using it.</p>\n\n<p>I've been doing some research to try and understand OAuth2.0 in general (<a href=\"http://www.slideshare.net/aaronpk/an-introduction-to-oauth-2\" rel=\"nofollow\">this presentation</a> has been particularly useful). From what I understand there are several different response types for OAuth, but I haven't been able to figure out what suites my use case the best. </p>\n\n<p>Since I'm using Golang for my backend (<a href=\"https://github.com/gocraft/web\" rel=\"nofollow\">Gocraft/web</a> for mux and middleware and <a href=\"https://github.com/golang/oauth2\" rel=\"nofollow\">Golang OAuth2.0</a> for OAuth2.0, I would appreciate an example related to Golang, if anyone is willing to give me one. I haven't been able to get far, but I've got an OAuth2.0 configuration up:</p>\n\n<pre><code>oauthConfig := &amp;oauth2.Config{\n    ClientID: \"...\",\n    ClientSecret: \"...\",\n    Endpoint: oauth2.Endpoint{\n        AuthURL: \"https://accounts.google.com/o/oauth2/auth\",\n        TokenURL: \"https://accounts.google.com/o/oauth2/token\",\n    },\n    RedirectURL: \"...\",\n    Scopes: []string{ \"https://www.googleapis.com/auth/userinfo.profile\" },\n}\n</code></pre>\n\n<p>Any insight would be appreciated, thank you!</p>\n"}, {"tags": ["postgresql", "go", "database-migration"], "comments": [{"owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 3, "creation_date": 1447132815, "post_id": 33622214, "comment_id": 55020830, "body": "There&#39;s also liquibase. You don&#39;t have to use a tool written in your main language."}, {"owner": {"reputation": 3269, "user_id": 429555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e970e0e5d130ae179f5cfa9b3079b76?s=128&d=identicon&r=PG", "display_name": "ferhat", "link": "https://stackoverflow.com/users/429555/ferhat"}, "edited": false, "score": 0, "creation_date": 1450229491, "post_id": 33622214, "comment_id": 56347200, "body": "FYI, goose is <a href=\"https://bitbucket.org/liamstask/goose/issues/58/is-this-project-dead\" rel=\"nofollow noreferrer\">dead</a>."}, {"owner": {"reputation": 18792, "user_id": 385548, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8f290affc1d939cf9a4ad2c9e79592a?s=128&d=identicon&r=PG", "display_name": "Vojtech Vitek", "link": "https://stackoverflow.com/users/385548/vojtech-vitek"}, "reply_to_user": {"reputation": 3269, "user_id": 429555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e970e0e5d130ae179f5cfa9b3079b76?s=128&d=identicon&r=PG", "display_name": "ferhat", "link": "https://stackoverflow.com/users/429555/ferhat"}, "edited": false, "score": 0, "creation_date": 1490365968, "post_id": 33622214, "comment_id": 73093619, "body": "@ferhatelmas <a href=\"https://github.com/pressly/goose\" rel=\"nofollow noreferrer\">github.com/pressly/goose</a> a maintained fork"}, {"owner": {"reputation": 817, "user_id": 386930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/270304c3eda56d46c3cb99727347a1e5?s=128&d=identicon&r=PG", "display_name": "sh4", "link": "https://stackoverflow.com/users/386930/sh4"}, "edited": false, "score": 0, "creation_date": 1566826574, "post_id": 33622214, "comment_id": 101767447, "body": "<a href=\"https://github.com/lopezator/migrator\" rel=\"nofollow noreferrer\">github.com/lopezator/migrator</a> might be another option."}], "answers": [{"tags": [], "owner": {"reputation": 1351, "user_id": 879047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee933b5bf986de605ee48c1ae3e3f7ee?s=128&d=identicon&r=PG", "display_name": "Duru Can Celasun", "link": "https://stackoverflow.com/users/879047/duru-can-celasun"}, "is_accepted": false, "score": 2, "last_activity_date": 1462196011, "creation_date": 1462196011, "answer_id": 36983743, "question_id": 33622214, "link": "https://stackoverflow.com/questions/33622214/what-package-to-use-for-database-migrations-in-go/36983743#36983743", "title": "What package to use for database migrations in Go?", "body": "<p>We use <code>mattes/migrate</code> at work and are very happy with it. It works with plain SQL files, handles file naming by itself and can easily be <a href=\"https://github.com/mattes/migrate#usage-from-terminal\" rel=\"nofollow\">automated via CLI</a>. It doesn't do anything Go specific.</p>\n\n<p>With <code>gomigrate</code> you need to create the files <a href=\"https://github.com/DavidHuie/gomigrate#migration-files\" rel=\"nofollow\">yourself</a> and <a href=\"https://github.com/DavidHuie/gomigrate#usage\" rel=\"nofollow\">write code</a> for executing the migrations.</p>\n"}, {"tags": [], "owner": {"reputation": 18792, "user_id": 385548, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8f290affc1d939cf9a4ad2c9e79592a?s=128&d=identicon&r=PG", "display_name": "Vojtech Vitek", "link": "https://stackoverflow.com/users/385548/vojtech-vitek"}, "is_accepted": false, "score": 2, "last_activity_date": 1490365940, "creation_date": 1490365940, "answer_id": 43002180, "question_id": 33622214, "link": "https://stackoverflow.com/questions/33622214/what-package-to-use-for-database-migrations-in-go/43002180#43002180", "title": "What package to use for database migrations in Go?", "body": "<p>Take a look at <a href=\"https://github.com/pressly/goose\" rel=\"nofollow noreferrer\">https://github.com/pressly/goose</a>, a maintained fork of <a href=\"https://bitbucket.org/liamstask/goose/\" rel=\"nofollow noreferrer\">https://bitbucket.org/liamstask/goose/</a>.</p>\n"}], "owner": {"reputation": 9074, "user_id": 323578, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/i6YAT.png?s=128&g=1", "display_name": "josephmisiti", "link": "https://stackoverflow.com/users/323578/josephmisiti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6856, "favorite_count": 4, "closed_date": 1490425725, "answer_count": 2, "score": 15, "last_activity_date": 1511222687, "creation_date": 1447125147, "last_edit_date": 1511222687, "question_id": 33622214, "link": "https://stackoverflow.com/questions/33622214/what-package-to-use-for-database-migrations-in-go", "closed_reason": "Not suitable for this site", "title": "What package to use for database migrations in Go?", "body": "<p>I am fairly new to golang, and trying to identify the best tools for the job. Currently I am evaluating the following packages:</p>\n\n<p><a href=\"https://github.com/mattes/migrate\">https://github.com/mattes/migrate</a></p>\n\n<p><a href=\"https://github.com/DavidHuie/gomigrate\">https://github.com/DavidHuie/gomigrate</a></p>\n\n<p><a href=\"https://bitbucket.org/liamstask/goose/\">https://bitbucket.org/liamstask/goose/</a></p>\n\n<p>I was wondering if anyone had any experience with these (or other packages) and could provide some comments.</p>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 7, "creation_date": 1447123968, "post_id": 33622016, "comment_id": 55018509, "body": "see here: <a href=\"http://stackoverflow.com/questions/32346117/unmarshalling-a-json-that-may-or-may-not-return-an-array\" title=\"unmarshalling a json that may or may not return an array\">stackoverflow.com/questions/32346117/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/33569210/go-json-unmarshal-options\" title=\"go json unmarshal options\">stackoverflow.com/questions/33569210/go-json-unmarshal-optio&zwnj;&#8203;ns</a>"}, {"owner": {"reputation": 55, "user_id": 722837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9cf4cb93dc5172710873e8de3c3fdf54?s=128&d=identicon&r=PG&f=1", "display_name": "Techie210", "link": "https://stackoverflow.com/users/722837/techie210"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447271676, "post_id": 33622016, "comment_id": 55090993, "body": "Thanks again @JimB  I used <a href=\"http://stackoverflow.com/questions/32346117/unmarshalling-a-json-that-may-or-may-not-return-an-array\" title=\"unmarshalling a json that may or may not return an array\">stackoverflow.com/questions/32346117/&hellip;</a> to figure this out. Took me some time to get my head wrapped around it, but there you go."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 722837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9cf4cb93dc5172710873e8de3c3fdf54?s=128&d=identicon&r=PG&f=1", "display_name": "Techie210", "link": "https://stackoverflow.com/users/722837/techie210"}, "edited": false, "score": 0, "creation_date": 1447209025, "post_id": 33635797, "comment_id": 55060573, "body": "Thanks all. L&#234; Ng\u1ecdc Th\u1ea1ch this is the simplest and most elegant solution. Thanks much!"}], "tags": [], "owner": {"reputation": 36, "user_id": 5332300, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ynN9XCBf-X8/AAAAAAAAAAI/AAAAAAAAADs/xrxlWfLrw9w/photo.jpg?sz=128", "display_name": "L&#234; Ng\u1ecdc Th\u1ea1ch", "link": "https://stackoverflow.com/users/5332300/l%c3%aa-ng%e1%bb%8dc-th%e1%ba%a1ch"}, "is_accepted": true, "score": 2, "last_activity_date": 1447175835, "creation_date": 1447175835, "answer_id": 33635797, "question_id": 33622016, "link": "https://stackoverflow.com/questions/33622016/json-sometimes-array-sometimes-object/33635797#33635797", "title": "JSON sometimes array sometimes object", "body": "<p>Have you tried unmarshall into map[string]interface{}?</p>\n\n<pre><code>    type Net struct{\n        Comment map[string]interface{} `json:\"comment\"`\n    }\n</code></pre>\n\n<p>Then Comment[\"line\"] value is possible array or object.</p>\n"}], "owner": {"reputation": 55, "user_id": 722837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9cf4cb93dc5172710873e8de3c3fdf54?s=128&d=identicon&r=PG&f=1", "display_name": "Techie210", "link": "https://stackoverflow.com/users/722837/techie210"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 33635797, "answer_count": 1, "score": 3, "last_activity_date": 1447175835, "creation_date": 1447123482, "question_id": 33622016, "link": "https://stackoverflow.com/questions/33622016/json-sometimes-array-sometimes-object", "title": "JSON sometimes array sometimes object", "body": "<p>I am consuming an API who's response for a particular field is sometimes and object and sometimes and array of object.</p>\n\n<p>I created a struct to unmarshall the json response and it works great. However, in the instances where the json response has an array of objects, obviously the unmarshalling fails. How can I deal with this situation in Go?</p>\n\n<pre><code>Single Response:\n{\n    \"net\": {\n                \"comment\": {\n                    \"line\": {\n                        \"$\": \"This space is statically assigned\",\n                        \"@number\": \"0\"\n                    }\n                }\n            }\n}\n\n\nArray Response:\n{\n    \"net\": {\n                \"comment\": {\n                    \"line\": [\n                        {\n                            \"$\": \"All abuse issues will only be responded to by the Abuse\",\n                            \"@number\": \"0\"\n                        },\n                        {\n                            \"$\": \"Team through the contact info found on handle ABUSE223-ARIN\",\n                            \"@number\": \"1\"\n                        }\n                    ]\n                }\n            }\n}\n</code></pre>\n\n<p>I thought about creating 2 versions of the struct and then somehow determining which instance I got back, but this feels quite wasteful. I have also tried unmarshalling into map[string]instance{} but I got a bit lost and wasn't sure if I was headed down the right path.</p>\n\n<p>Any advice would be appreciated.</p>\n"}, {"tags": ["c++", "go", "swig", "unique-ptr"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1447118494, "post_id": 33621292, "comment_id": 55017101, "body": "Please include the entire error message in your post."}, {"owner": {"reputation": 31, "user_id": 4807845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695256b04ed0ad97a8d7223302a09e1e?s=128&d=identicon&r=PG&f=1", "display_name": "linkin", "link": "https://stackoverflow.com/users/4807845/linkin"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1447118582, "post_id": 33621292, "comment_id": 55017125, "body": "I&#39;m using swig in internal system. Though the error message:     <code>builder.h:: Error: Syntax error in input(3)</code> Line 5 points to the CreateCounters function."}, {"owner": {"reputation": 2883, "user_id": 5162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTqjP.jpg?s=128&g=1", "display_name": "m7thon", "link": "https://stackoverflow.com/users/5162389/m7thon"}, "edited": false, "score": 0, "creation_date": 1447127222, "post_id": 33621292, "comment_id": 55019281, "body": "Is your &quot;internal system&quot; passing the <code>-c++</code> argument to swig to tell it that it is wrapping C++?"}, {"owner": {"reputation": 2883, "user_id": 5162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTqjP.jpg?s=128&g=1", "display_name": "m7thon", "link": "https://stackoverflow.com/users/5162389/m7thon"}, "edited": false, "score": 0, "creation_date": 1447127615, "post_id": 33621292, "comment_id": 55019394, "body": "Also, AFAIK <code>%ignoreall</code> etc. are not valid SWIG directives, in any case they will likely need a semicolon at the end."}], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 5544983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/149b37314382ecb13989a557cadad09f?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Mellar", "link": "https://stackoverflow.com/users/5544983/mark-mellar"}, "is_accepted": false, "score": 0, "last_activity_date": 1447126619, "creation_date": 1447126619, "answer_id": 33622443, "question_id": 33621292, "link": "https://stackoverflow.com/questions/33621292/swig-wrapper-for-golang/33622443#33622443", "title": "Swig wrapper for golang", "body": "<p>Your swig file doesn't have a module name. Try this...</p>\n\n<pre><code>%module builder\n%{\n#include \"builder.h\"\n%}\n\n%ignoreall\n\n%unignore Builder;\n%unignore Builder::Init();\n%unignore CreateEntry(string* primary_key);\n\n%include \"builder.h\"\n\n%unignoreall\n</code></pre>\n\n<p>The module name translates to the name of the package your wrapped code resides in.</p>\n\n<p>Also for c++ code, ensure your swig file is named something like 'builder.swigcxx' the extension is important as otherwise it'll assume you're wrapping pure C.</p>\n"}], "owner": {"reputation": 31, "user_id": 4807845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695256b04ed0ad97a8d7223302a09e1e?s=128&d=identicon&r=PG&f=1", "display_name": "linkin", "link": "https://stackoverflow.com/users/4807845/linkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 936, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447126619, "creation_date": 1447118431, "last_edit_date": 1447118780, "question_id": 33621292, "link": "https://stackoverflow.com/questions/33621292/swig-wrapper-for-golang", "title": "Swig wrapper for golang", "body": "<p>I'm having trouble to use swig to wrap a c++ library for golang. Here is my c++ header file.</p>\n\n<pre><code>class Builder {\n public:\n  explicit Builder(int i):counters(i){} \n  void Init(); \n  void CreateCounters(vector&lt;std::unique_ptr&lt;int&gt;&gt;* s);\n  bool CreateEntry(string* primary_key);\n private:\n  std::shared_ptr&lt;hash_set&lt;string&gt;&gt; ids;\n  int counters;\n};\n</code></pre>\n\n<p>I just want to wrap Builder class and its constructor, Init() and CreateEntry function. Here is my swig API</p>\n\n<pre><code>%{\n#include \"builder.h\"\n%}\n\n%ignoreall\n\n%unignore Builder;\n%unignore Builder::Init();\n%unignore CreateEntry(string* primary_key);\n\n%include \"builder.h\"\n\n%unignoreall\n</code></pre>\n\n<p>But when I compile I get error pointing to the CreateCounters function which has a argument of unique_ptr vector. Can anyone tell me whats wrong in here?</p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1447111127, "post_id": 33619954, "comment_id": 55014788, "body": "Yeah, I&#39;m trying to find the specific docs because I can&#39;t give an appropriately technical answer but I believe the basic principal is that you&#39;re checking nullity of this little wrapper (the interface instance itself) and not the underlying value that was returned by <code>SomeFun()</code>. You&#39;re probably aware but if you assign to a <code>*MyError</code> var then it will be <code>nil</code>."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1447111286, "post_id": 33619954, "comment_id": 55014831, "body": "See this answer for explanation: <a href=\"http://stackoverflow.com/questions/29138591/hiding-nil-values-understanding-why-golang-fails-here/29138676#29138676\">Hiding nil values, understanding why golang fails here</a>. Actually I think this is a duplicate."}], "owner": {"reputation": 1319, "user_id": 187145, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/618ce819bd86f4e6328ff6a8e79e759f?s=128&d=identicon&r=PG", "display_name": "slattery", "link": "https://stackoverflow.com/users/187145/slattery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "closed_date": 1447111414, "answer_count": 0, "score": 0, "last_activity_date": 1447109987, "creation_date": 1447109987, "question_id": 33619954, "link": "https://stackoverflow.com/questions/33619954/when-a-nil-pointer-is-assigned-to-a-variable-of-interface-type-why-does-nil", "closed_reason": "Duplicate", "title": "When a nil pointer is assigned to a variable of interface type, why does `!= nil` return true?", "body": "<p>Let's say I have a custom error type, <code>MyError</code>:</p>\n\n<pre><code>type MyError struct{}\n\nfunc (me *MyError) Error() string { return fmt.Sprintf(\"Error() called on %#v\", me) }\n</code></pre>\n\n<p>And some function that might return that type of error:</p>\n\n<pre><code>func SomeFunc() *MyError {\n    return nil\n}\n</code></pre>\n\n<p>Why in the world would <code>err != nil</code> be true for a nil error?:</p>\n\n<pre><code>var err error\nerr = SomeFunc()\nif err != nil {\n    fmt.Printf(\"err != nil, but err is actually nil: %#v\", err)\n}\n// the above prints: \"err != nil, but err is actually nil: (*main.MyError)(nil)\"\n</code></pre>\n\n<p>There's something strange about assigning a nil pointer to a variable of an interface type...</p>\n"}, {"tags": ["go", "path", "split", "slice", "filepath"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447106379, "post_id": 33618967, "comment_id": 55012616, "body": "from the docs: &gt; SplitList splits a list of paths joined by the OS-specific ListSeparator, usually found in PATH or GOPATH environment variables."}, {"owner": {"reputation": 2006, "user_id": 1093828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/18e88c5585de60d6efe3ced4716f7f35?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1093828/stefan"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447106488, "post_id": 33618967, "comment_id": 55012683, "body": "ooops. that explains a lot"}], "answers": [{"comments": [{"owner": {"reputation": 2006, "user_id": 1093828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/18e88c5585de60d6efe3ced4716f7f35?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1093828/stefan"}, "edited": false, "score": 0, "creation_date": 1447106397, "post_id": 33619038, "comment_id": 55012628, "body": "I actually wanted to avoid that due to path separator differences on windows and linux. Is there a solution in the standard library for that?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 2006, "user_id": 1093828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/18e88c5585de60d6efe3ced4716f7f35?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1093828/stefan"}, "edited": false, "score": 2, "creation_date": 1447106519, "post_id": 33619038, "comment_id": 55012703, "body": "@Stefan: then use <code>os.PathSeparator </code>"}, {"owner": {"reputation": 22394, "user_id": 242042, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a798a3d661375ece15776f83fbb80c2c?s=128&d=identicon&r=PG", "display_name": "Archimedes Trajano", "link": "https://stackoverflow.com/users/242042/archimedes-trajano"}, "edited": false, "score": 0, "creation_date": 1523157783, "post_id": 33619038, "comment_id": 86441400, "body": "os.PathSeparator is an int so it needs to be converted."}, {"owner": {"reputation": 22394, "user_id": 242042, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a798a3d661375ece15776f83fbb80c2c?s=128&d=identicon&r=PG", "display_name": "Archimedes Trajano", "link": "https://stackoverflow.com/users/242042/archimedes-trajano"}, "edited": false, "score": 0, "creation_date": 1523231729, "post_id": 33619038, "comment_id": 86461689, "body": "Thanks new to go as well i didn&#39;t know iw was as simple as that to cast it to a string."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 12, "last_activity_date": 1523170326, "last_edit_date": 1523170326, "creation_date": 1447106331, "answer_id": 33619038, "question_id": 33618967, "link": "https://stackoverflow.com/questions/33618967/get-the-first-directory-of-a-path-in-go/33619038#33619038", "title": "Get the first directory of a path in GO", "body": "<p>Simply use <a href=\"https://golang.org/pkg/strings/#Split\" rel=\"noreferrer\"><code>strings.Split()</code></a>:</p>\n\n<pre><code>s := \"foo/bar/file.txt\"\nparts := strings.Split(s, \"/\")\nfmt.Println(parts[0], len(parts))\nfmt.Println(parts)\n</code></pre>\n\n<p>Output (try it on the <a href=\"http://play.golang.org/p/qVNXZItXU2\" rel=\"noreferrer\">Go Playground</a>):</p>\n\n<pre><code>foo 3\n[foo bar file.txt]\n</code></pre>\n\n<p><strong>Note:</strong></p>\n\n<p>If you want to split by the path separator of the current OS, use <a href=\"https://golang.org/pkg/os/#PathSeparator\" rel=\"noreferrer\"><code>os.PathSeparator</code></a> as the separator:</p>\n\n<pre><code>parts := strings.Split(s, string(os.PathSeparator))\n</code></pre>\n\n<p><a href=\"https://golang.org/pkg/path/filepath/#SplitList\" rel=\"noreferrer\"><code>filepath.SplitList()</code></a> splits multiple joined paths into separate paths. It does not split one path into folders and file. For example:</p>\n\n<pre><code>fmt.Println(\"On Unix:\", filepath.SplitList(\"/a/b/c:/usr/bin\"))\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>On Unix: [/a/b/c /usr/bin]\n</code></pre>\n"}], "owner": {"reputation": 2006, "user_id": 1093828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/18e88c5585de60d6efe3ced4716f7f35?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1093828/stefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6651, "favorite_count": 3, "accepted_answer_id": 33619038, "answer_count": 1, "score": 6, "last_activity_date": 1543576804, "creation_date": 1447106005, "last_edit_date": 1543576804, "question_id": 33618967, "link": "https://stackoverflow.com/questions/33618967/get-the-first-directory-of-a-path-in-go", "title": "Get the first directory of a path in GO", "body": "<p>In Go, is it possible to get the root directory of a path so that </p>\n\n<p><code>foo/bar/file.txt\n</code></p>\n\n<p>returns <code>foo</code>? I know about path/filepath, but</p>\n\n<pre><code>package main\n\nimport (\n        \"fmt\"\n        \"path/filepath\"\n)\n\nfunc main() {\n        parts := filepath.SplitList(\"foo/bar/file.txt\")\n        fmt.Println(parts[0])\n        fmt.Println(len(parts))\n}\n</code></pre>\n\n<p>prints <code>foo/bar/file.txt</code> and <code>1</code> whereas I would have expected <code>foo</code> and <code>3</code>.</p>\n"}, {"tags": ["go", "concurrency", "goroutine"], "comments": [{"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 2, "creation_date": 1447098713, "post_id": 33616864, "comment_id": 55008561, "body": "I believe because you have <code>wg.Wait()</code> inside the loop, it blocks there until <code>run</code> returns meaning in your &#39;concurrent&#39; example, it <b>should</b> perform worse because you&#39;ve added the wait guard and goroutine overhead. I believe that line of code needs to be a the bottom of main so you block until all go routines complete, rather than on each."}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 2, "creation_date": 1447098824, "post_id": 33616864, "comment_id": 55008616, "body": "Also, your examples just bad because you&#39;re not actually doing any work. If you this were more complete and included the processing of responses then you would likely see a major divergence in performance as the number of concurrent requests increased. Since the only thing really taking time here is the requests/response actually going over the wire it&#39;s just not really likely to demonstrate the concept very well in the first place."}, {"owner": {"reputation": 2479, "user_id": 3666882, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4d6c91065605fbddcd17db1556134b37?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/3666882/rodrigo"}, "reply_to_user": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1447109757, "post_id": 33616864, "comment_id": 55014205, "body": "@evanmcdonnal gotcha and yeah I dumbed down the example just to show how I was calling the go routines. I know http is also a bad benchmark since it has outside factors that can contribute to slower execution times. It was more too see if I was calling the routine correctly which you pointed out I was not. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "is_accepted": true, "score": 3, "last_activity_date": 1447102156, "creation_date": 1447102156, "answer_id": 33617985, "question_id": 33616864, "link": "https://stackoverflow.com/questions/33616864/what-am-i-missing-on-concurrency/33617985#33617985", "title": "What am I missing on concurrency?", "body": "<p>The main problem with your example is that you're calling <code>wg.Wait()</code> within the for loop. This causes execution to block until you the deferred <code>wg.Done()</code> call inside of <code>run</code>. As a result, the execution isn't concurrent, it happens in a goroutine but you block after starting goroutine <code>i</code> and before starting <code>i+1</code>. If you place that statement after the loop instead like below then your code won't block until after the loop (all goroutines have been started, some may have already completed).</p>\n\n<pre><code>func main() {\n    url := \"http://finance.yahoo.com/q?s=aapl\"\n\n    for i := 0; i &lt; 250; i++ {\n        wg.Add(1)\n        go run(url, &amp;wg)\n        // wg.Wait() don't wait here cause it serializes execution\n    }\n    wg.Wait() // wait here, now that all goroutines have been started\n}\n</code></pre>\n"}], "owner": {"reputation": 2479, "user_id": 3666882, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4d6c91065605fbddcd17db1556134b37?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/3666882/rodrigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 33617985, "answer_count": 1, "score": 1, "last_activity_date": 1447102156, "creation_date": 1447097937, "question_id": 33616864, "link": "https://stackoverflow.com/questions/33616864/what-am-i-missing-on-concurrency", "title": "What am I missing on concurrency?", "body": "<p>I have a very simple script that makes a get request and then does some thing with the response. I have 2 version one using a go routine and one without I bencharmaked both and there was no difference in speed. Here is a dumb down version of what I'm doing:</p>\n\n<p>Regular Version:</p>\n\n<pre><code>func main() {\n    url := \"http://finance.yahoo.com/q?s=aapl\"\n\n    for i := 0; i &lt; 250; i++ {\n        resp, err := http.Get(url)\n        if err != nil {\n            fmt.Println(err)\n        }\n\n        fmt.Println(resp.Status)\n    }\n}\n</code></pre>\n\n<p>Go Routine:</p>\n\n<pre><code>func main() {\n    url := \"http://finance.yahoo.com/q?s=aapl\"\n\n    for i := 0; i &lt; 250; i++ {\n        wg.Add(1)\n        go run(url, &amp;wg)\n        wg.Wait()\n    }\n}\n\nfunc run(url string, wg *sync.WaitGroup) {\n    defer wg.Done()\n    resp, err := http.Get(url)\n    if err != nil {\n        fmt.Println(err)\n    }\n\n    fmt.Println(resp.Status)\n}\n</code></pre>\n\n<p>In most cases when I used a go routine the program took longer to execute. What concept am I missing to understand using concurrency efficiently?</p>\n"}, {"tags": ["linux", "go", "debian", "static-linking"], "comments": [{"owner": {"reputation": 10379, "user_id": 69893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jo6Ks.png?s=128&g=1", "display_name": "Christian Witts", "link": "https://stackoverflow.com/users/69893/christian-witts"}, "edited": false, "score": 0, "creation_date": 1447095168, "post_id": 33616064, "comment_id": 55006518, "body": "You could always use the Go Version Manager <a href=\"https://github.com/moovweb/gvm\" rel=\"nofollow noreferrer\">github.com/moovweb/gvm</a> to install Go 1.4 or 1.5 and use that perhaps."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447100762, "post_id": 33616064, "comment_id": 55009636, "body": "The method from go1.4 worked for me on 1.3. Can you put the output of <code>go env</code>? Also, you can check how things are being built with the <code>-x</code> option. (however, I would really recommend instilling a current version of Go)"}, {"owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "edited": false, "score": 0, "creation_date": 1447107863, "post_id": 33616064, "comment_id": 55013378, "body": "Added those. I was really just trying to explore <code>Rocket</code>, was hoping to not have to learn <code>Go</code> in great deal as a side tangent. Wish the <code>Rocket</code> guys weren&#39;t so bleeding edge I guess."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1447112993, "post_id": 33616064, "comment_id": 55015424, "body": "I wouldn&#39;t necessarily call using the supported version of go &quot;bleeding edge&quot;. Try installing the official release of go from golang.org"}, {"owner": {"reputation": 191, "user_id": 4074586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b8eaeb188788da55f046402d6e9277?s=128&d=identicon&r=PG&f=1", "display_name": "Diablojoe", "link": "https://stackoverflow.com/users/4074586/diablojoe"}, "edited": false, "score": 0, "creation_date": 1447171378, "post_id": 33616064, "comment_id": 55042157, "body": "We are all getting off topic here. Go should be able to compile in this environment without dependencies. Perhaps we should look at the problem as stated first."}, {"owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "edited": false, "score": 0, "creation_date": 1447178559, "post_id": 33616064, "comment_id": 55047044, "body": "I upgraded to debian stretch. It has version 1.5"}], "answers": [{"tags": [], "owner": {"reputation": 14729, "user_id": 2494262, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4a9b1f56d8fca99b42c3cf56affb943b?s=128&d=identicon&r=PG", "display_name": "MrE", "link": "https://stackoverflow.com/users/2494262/mre"}, "is_accepted": false, "score": 1, "last_activity_date": 1469564007, "creation_date": 1469564007, "answer_id": 38599069, "question_id": 33616064, "link": "https://stackoverflow.com/questions/33616064/how-to-compile-statically-linked-go-program-1-3/38599069#38599069", "title": "How to compile statically linked go program (1.3)?", "body": "<p>this is what worked for me:</p>\n\n<pre><code>CGO_ENABLED=0 \\\ngo build -a -installsuffix cgo -ldflags '-s' -o server server.go\n</code></pre>\n\n<p>from:</p>\n\n<p><a href=\"https://github.com/golang/go/issues/9344\" rel=\"nofollow\">https://github.com/golang/go/issues/9344</a></p>\n"}], "owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469564007, "creation_date": 1447094981, "last_edit_date": 1447161552, "question_id": 33616064, "link": "https://stackoverflow.com/questions/33616064/how-to-compile-statically-linked-go-program-1-3", "title": "How to compile statically linked go program (1.3)?", "body": "<p>I'm trying to compile a small go program statically (for the purpose of playing with Rocket). I'm running on Debian Jessie (Mint version). I installed the <code>golang-go</code> package. The Rocket documentation gives examples of how to compile statically for go version 1.4 and 1.5</p>\n\n<pre><code>1.4\n$ CGO_ENABLED=0 GOOS=linux go build -o hello -a -installsuffix cgo .\n\n1.5:\n$ CGO_ENABLED=0 GOOS=linux go build -o hello -a -tags netgo -ldflags '-w' .\n</code></pre>\n\n<p>Unfortunately, <code>go version</code> says I'm running 1.3.</p>\n\n<pre><code>$ go version\ngo version go1.3.3 linux/amd64\n</code></pre>\n\n<p>I tried the 1.4 version, hoping it would for for 1.3, but no such luck. I'm not sure if I installed all the debian packages I even needed?</p>\n\n<p>I <em>was</em> able to compile the file and run it using just <code>go build howdy.go</code>. The small app works as expected, but <code>ldd</code> shows it has multiple dynamic dependencies:</p>\n\n<pre><code>$ ldd howdy\n    linux-vdso.so.1 (0x00007ffe72d7e000)\n    libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f3b22e5a000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f3b22ab1000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f3b23077000)\n</code></pre>\n\n<p>For complete disclosure, the small program I'm trying to compile statically (<code>howdy.go</code>) is:</p>\n\n<pre><code>package main\n\nimport (\n    \"log\"\n    \"net/http\"\n)\n\nfunc main() {\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        log.Printf(\"request from %v\\n\", r.RemoteAddr)\n        w.Write([]byte(\"howdy\\n\"))\n    })\n    log.Fatal(http.ListenAndServe(\":5000\", nil))\n}\n</code></pre>\n\n<p>Additionally, output of go -x is:</p>\n\n<pre><code>$ go build -x howdy.go\nWORK=/tmp/go-build496765737\nmkdir -p $WORK/command-line-arguments/_obj/\ncd /home/travisg/rkt-v0.10.0\n/usr/lib/go/pkg/tool/linux_amd64/6g -o $WORK/command-line-arguments.a -trimpath $WORK -p command-line-arguments -complete -D _/home/travisg/rkt-v0.10.0 -I $WORK -pack ./howdy.go\ncd .\n/usr/lib/go/pkg/tool/linux_amd64/6l -o howdy -L $WORK -extld=gcc $WORK/command-line-arguments.a\n</code></pre>\n\n<p>and output of go env is:</p>\n\n<pre><code>GOARCH=\"amd64\"\nGOBIN=\"\"\nGOCHAR=\"6\"\nGOEXE=\"\"\nGOHOSTARCH=\"amd64\"\nGOHOSTOS=\"linux\"\nGOOS=\"linux\"\nGOPATH=\"\"\nGORACE=\"\"\nGOROOT=\"/usr/lib/go\"\nGOTOOLDIR=\"/usr/lib/go/pkg/tool/linux_amd64\"\nCC=\"gcc\"\nGOGCCFLAGS=\"-fPIC -m64 -pthread -fmessage-length=0\"\nCXX=\"g++\"\nCGO_ENABLED=\"1\"\n</code></pre>\n"}, {"tags": ["go", "panic", "etcd"], "answers": [{"tags": [], "owner": {"reputation": 1855, "user_id": 1558705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1563795271fe55bf0beab2d12cd69b0?s=128&d=identicon&r=PG", "display_name": "Dean Elbaz", "link": "https://stackoverflow.com/users/1558705/dean-elbaz"}, "is_accepted": true, "score": 4, "last_activity_date": 1447092263, "creation_date": 1447092263, "answer_id": 33615349, "question_id": 33614899, "link": "https://stackoverflow.com/questions/33614899/golang-etcd-watcher-panic/33615349#33615349", "title": "Golang etcd watcher panic", "body": "<p>The library can close the <code>watchChan</code>channel. That will return a nil value in your <code>r</code> and then panic when you try to log <code>r.Node</code>.\nWhen you get a pointer back, you should check it's not <code>nil</code>. I would also recommend checking if the receiver channel has been closed and act accordingly.</p>\n\n<pre><code>r, open := &lt;-watchChan\nif !open {\n    // channel is closed\n}\nif r == nil {\n   // the watch channel return a nil value\n}\n</code></pre>\n"}], "owner": {"reputation": 696, "user_id": 722374, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/14cd83d104a40d271d6704864ae5687e?s=128&d=identicon&r=PG", "display_name": "Alexander Vasilenko", "link": "https://stackoverflow.com/users/722374/alexander-vasilenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1183, "favorite_count": 1, "accepted_answer_id": 33615349, "answer_count": 1, "score": 0, "last_activity_date": 1447093043, "creation_date": 1447090789, "last_edit_date": 1447093043, "question_id": 33614899, "link": "https://stackoverflow.com/questions/33614899/golang-etcd-watcher-panic", "title": "Golang etcd watcher panic", "body": "<p>All!</p>\n\n<p>I've the code below:</p>\n\n<pre><code>package main\n\nimport (\n        \"log\"\n\n        \"github.com/coreos/go-etcd/etcd\"\n)\n\nfunc main() {\n        client := etcd.NewClient(\n                []string{\n                        \"http://172.20.20.10:2379\",\n                        \"http://172.20.20.11:2379\",\n                        \"http://172.20.20.12:2379\",\n                },\n        )\n        for {\n                watchChan := make(chan *etcd.Response)\n                go client.Watch(\"/config\", 0, false, watchChan, nil)\n\n                log.Println(\"Waiting for an update...\")\n                r := &lt;-watchChan\n\n                log.Printf(\"&gt;&gt;&gt; got an updated config: %s: %s\\n\", r.Node.Key, r.Node.Value)\n        }\n}\n</code></pre>\n\n<p>BUT... When some node (for example 172.20.20.11) is going down the panic is complain regarding the invalid memory address or nil pointer dereference...</p>\n\n<pre><code>&gt; $ ./etcd-watcher\n2015/11/09 18:46:19 Waiting for an update...\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal 0xb code=0x1 addr=0x10 pc=0x22fe]\n\ngoroutine 1 [running]:\nmain.main()\n    /Users/Stalker/Workspace/src/snippets/etcd-watcher.go:26 +0x2be\n\ngoroutine 17 [syscall, locked to thread]:\nruntime.goexit()\n     /Users/Stalker/App/Go/1.5.1/src/runtime/asm_amd64.s:1696 +0x1\n\ngoroutine 19 [runnable]:\nnet/http.(*persistConn).writeLoop(0xc8200c6dc0)\n    /Users/Stalker/App/Go/1.5.1/src/net/http/transport.go:1009 +0x40c\ncreated by net/http.(*Transport).dialConn\n    /Users/Stalker/App/Go/1.5.1/src/net/http/transport.go:686 +0xc9d\n</code></pre>\n\n<p>Could someone explain me what is going on and how to make this simple example to work properly??\nThanks a lot for advice!\nAlex</p>\n"}, {"tags": ["json", "nginx", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447084234, "post_id": 33612893, "comment_id": 55000026, "body": "Why are you using nginx here at all?"}, {"owner": {"reputation": 137, "user_id": 2132924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c87fb357586a72d52e6dfa8b5ec789e4?s=128&d=identicon&r=PG", "display_name": "noahtkeller", "link": "https://stackoverflow.com/users/2132924/noahtkeller"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1447084442, "post_id": 33612893, "comment_id": 55000176, "body": "I don&#39;t have a real good answer for that. This is the setup when I came onto the project. I think eventually it is intended to be load balanced and have several upstream servers."}, {"owner": {"reputation": 137, "user_id": 2132924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c87fb357586a72d52e6dfa8b5ec789e4?s=128&d=identicon&r=PG", "display_name": "noahtkeller", "link": "https://stackoverflow.com/users/2132924/noahtkeller"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1447084880, "post_id": 33612893, "comment_id": 55000500, "body": "Oh, also nginx handles the ssl termination in production environment."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1447085690, "post_id": 33612893, "comment_id": 55001037, "body": "Disabling chunked encoding in go would be inconvenient. You either need to figure out why your nginx is truncating responses (probably permission issue for creating temp files), or turn <code>proxy_buffering</code> off, as you have. There&#39;s nothing wrong with having Go do the encoding."}, {"owner": {"reputation": 137, "user_id": 2132924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c87fb357586a72d52e6dfa8b5ec789e4?s=128&d=identicon&r=PG", "display_name": "noahtkeller", "link": "https://stackoverflow.com/users/2132924/noahtkeller"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1447087069, "post_id": 33612893, "comment_id": 55001887, "body": "Thanks, that has settled my doubts. If you want to leave it as an answer I will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 388, "user_id": 6858150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ThCtX.jpg?s=128&g=1", "display_name": "David Zhang", "link": "https://stackoverflow.com/users/6858150/david-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1540299831, "creation_date": 1540299831, "answer_id": 52949821, "question_id": 33612893, "link": "https://stackoverflow.com/questions/33612893/golang-json-encoder-and-nginx-proxy-buffering/52949821#52949821", "title": "Golang JSON Encoder and nginx proxy buffering", "body": "<p>If the response body is smaller than <a href=\"http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffer_size\" rel=\"nofollow noreferrer\">default buffer size (4k)</a>, try setting <code>proxy_buffer_size</code> to reduce the buffer size.</p>\n"}], "owner": {"reputation": 137, "user_id": 2132924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c87fb357586a72d52e6dfa8b5ec789e4?s=128&d=identicon&r=PG", "display_name": "noahtkeller", "link": "https://stackoverflow.com/users/2132924/noahtkeller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1540299831, "creation_date": 1447084138, "last_edit_date": 1447084387, "question_id": 33612893, "link": "https://stackoverflow.com/questions/33612893/golang-json-encoder-and-nginx-proxy-buffering", "title": "Golang JSON Encoder and nginx proxy buffering", "body": "<p>I am working on a web app backend in golang that has a JSON api, it resides behind nginx 1.8.0. </p>\n\n<p>Nginx Config:</p>\n\n<pre><code>server {\n\n  listen      80;\n  server_name someserver.com;\n\n  location / {\n    proxy_set_header X-Real-IP              $remote_addr;\n    proxy_set_header Host                   $http_host;\n    proxy_pass       http://127.0.0.1:8080;\n\n    # The go server handles the chunking, so with proxy_buffering on it messes up the response\n    proxy_buffering  off;\n  }\n}\n</code></pre>\n\n<p>I handle routes like:</p>\n\n<pre><code>router.GET(\"/api/cases\", checkAuth(api.GetAllCases))\n</code></pre>\n\n<p>My checkAuth middleware looks like:</p>\n\n<pre><code>func checkAuth(h httprouter.Handle) httprouter.Handle {\n  return func(w http.ResponseWriter, r *http.Request, ps httprouter.Params) {\n    url := strings.Split(r.URL.String(), \"/\")\n    if notAuthenticatedCode {\n      http.Error(w, \"\", http.StatusUnauthorized)\n    } else {\n      if url[1] == \"api\" {\n        w.Header().Set(\"Content-Type\", \"application/json; charset=utf-8\")\n      } else {\n        w.Header().Set(\"Content-Type\", \"text/html; charset=utf-8\")\n      }\n      h(w, r, ps)\n    }\n  }\n}\n</code></pre>\n\n<p>And finally, a JSON endpoint that looks like:</p>\n\n<pre><code>func (api API) GetAllCases(w http.ResponseWriter, r *http.Request, ps httprouter.Params) {\n  // It used to write the json in a different manner, I think this\n  // is where I started receiving the error when I changed to this\n  json.NewEncoder(w).Encode(Cases)\n}\n</code></pre>\n\n<p>At some point while working on this I began receiving an error about incomplete chunked encoding. I'm not 100% sure what I changed when I began receiving this error. While investigating this issue I discovered that apparently the go server is handling response chunking, then nginx would also try to handle it causing issues. I added \"proxy_buffering off\" into the location block of the nginx config and it corrected this issue.</p>\n\n<p>My question: Am I missing out on anything with this set up versus allowing nginx to handle the buffering and disabling it in Go? If I am, how would I disable the chunking in the go server?</p>\n\n<p>It seems to me that nginx should be handling the chunking/compressing/etc and golang shouldn't, but may be this is a naive assumption. Any advice would be greatly appreciated. Thanks!</p>\n"}, {"tags": ["api", "go", "documentation"], "answers": [{"comments": [{"owner": {"reputation": 488, "user_id": 294643, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/086bcd32df05637789411ef932982c96?s=128&d=identicon&r=PG", "display_name": "lhw", "link": "https://stackoverflow.com/users/294643/lhw"}, "edited": false, "score": 0, "creation_date": 1447149800, "post_id": 33614558, "comment_id": 55028392, "body": "That is indeed a very neatly written API. And I technically do have a few categories to sort the endpoints by. So I will do just that. Thanks for the input."}], "tags": [], "owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "is_accepted": true, "score": 1, "last_activity_date": 1447089538, "creation_date": 1447089538, "answer_id": 33614558, "question_id": 33612114, "link": "https://stackoverflow.com/questions/33612114/generating-a-better-godoc-for-api-library/33614558#33614558", "title": "Generating a better GoDoc for API library", "body": "<p>One example of an api package that I think does pretty well is the github wrapper: <a href=\"https://godoc.org/github.com/google/go-github/github\" rel=\"nofollow\">https://godoc.org/github.com/google/go-github/github</a>.</p>\n\n<p>If you have a large api, a bit of a large godoc is somewhat unavoidable. Note that rather than have a million methods defined directly off of <a href=\"https://godoc.org/github.com/google/go-github/github#Client\" rel=\"nofollow\">client</a>, the core object has multiple \"service\" objects defined, which allow them to partition the methods into logical groups. I could see multiple possible groups from the methods in your api.</p>\n\n<p>I don't think there is a super good way to group methods with the struct types they act on or return without significant changes to your api. Rather expect people to look for the operations they want to perform, and from there link to the specific struct types for reference.</p>\n"}], "owner": {"reputation": 488, "user_id": 294643, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/086bcd32df05637789411ef932982c96?s=128&d=identicon&r=PG", "display_name": "lhw", "link": "https://stackoverflow.com/users/294643/lhw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 33614558, "answer_count": 1, "score": 2, "last_activity_date": 1447089538, "creation_date": 1447081762, "question_id": 33612114, "link": "https://stackoverflow.com/questions/33612114/generating-a-better-godoc-for-api-library", "title": "Generating a better GoDoc for API library", "body": "<p>I implemented a typical REST API library in Go. But due to the amount of endpoints and different data structures of which almost none are shared between endpoints the GoDoc for the project is very confusing:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ut8Ri.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ut8Ri.png\" alt=\"GoDoc overview\"></a></p>\n\n<p>The way it is structured right now makes it hard to see what is returned by the actual functions and requires a lot of scrolling through the document to find the associated structures with the data.</p>\n\n<p>The Endpoints are all part of the API struct as they can share the authentication state between calls to the API, which causes them all to be listed below the GW2Api struct instead of their associated data structures.</p>\n\n<p>Is there a good way to make the library API clearer with GoDoc, aside from\nadding comments to function calls?</p>\n"}, {"tags": ["go", "mgo"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447079072, "post_id": 33611174, "comment_id": 54996673, "body": "What do you mean it changes the package structure? Please show an example of your problem."}, {"owner": {"reputation": 383, "user_id": 1856175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3970bfcc403e4089c82be231d0a0df?s=128&d=identicon&r=PG", "display_name": "timedout", "link": "https://stackoverflow.com/users/1856175/timedout"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447079673, "post_id": 33611174, "comment_id": 54997025, "body": "Directory structure changes from /src/gopkg.in --&gt; /src/github.com, added it in description. Thanks."}, {"owner": {"reputation": 818, "user_id": 5292835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f2a5019f9a977706135c3f8246bba1?s=128&d=identicon&r=PG&f=1", "display_name": "mrd0ll4r", "link": "https://stackoverflow.com/users/5292835/mrd0ll4r"}, "edited": false, "score": 0, "creation_date": 1447079997, "post_id": 33611174, "comment_id": 54997230, "body": "How are you &quot;trying to install it from go get forked repo from git&quot;? What commands did you invoke?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447080188, "post_id": 33611174, "comment_id": 54997376, "body": "If you understand the error, why not just fix the directory name?"}, {"owner": {"reputation": 383, "user_id": 1856175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3970bfcc403e4089c82be231d0a0df?s=128&d=identicon&r=PG", "display_name": "timedout", "link": "https://stackoverflow.com/users/1856175/timedout"}, "edited": false, "score": 0, "creation_date": 1447080277, "post_id": 33611174, "comment_id": 54997419, "body": "I simply forked it from <a href=\"https://github.com/go-mgo/mgo/tree/v2\" rel=\"nofollow noreferrer\">github.com/go-mgo/mgo/tree/v2</a>, then ran <b>go get github.com/path/to/repo</b>"}, {"owner": {"reputation": 383, "user_id": 1856175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3970bfcc403e4089c82be231d0a0df?s=128&d=identicon&r=PG", "display_name": "timedout", "link": "https://stackoverflow.com/users/1856175/timedout"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447080396, "post_id": 33611174, "comment_id": 54997514, "body": "@JimB I can try that way, although not sure if it&#39;ll work. But just want to know if we have some solutions which work more cleanly for vendoring such libraries."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447081021, "post_id": 33611174, "comment_id": 54997910, "body": "You not sure if what will work? The only difference is the directory name. If you <code>go get gopkg.in&#47;mgo.v2</code> you&#39;ll have the same code in the correct directory names, or you can change the names of the directories manually."}, {"owner": {"reputation": 383, "user_id": 1856175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3970bfcc403e4089c82be231d0a0df?s=128&d=identicon&r=PG", "display_name": "timedout", "link": "https://stackoverflow.com/users/1856175/timedout"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447082174, "post_id": 33611174, "comment_id": 54998744, "body": "@JimB - Tried that, but with go get github.com/path/to/repo, it doesn&#39;t download anything but one error.go file and fails with error I&#39;ve listed in question description."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447082778, "post_id": 33611174, "comment_id": 54999103, "body": "You&#39;re on in the wrong branch, checkout <code>v2</code>, and make sure the import path is still  <code>gopkg.in&#47;mgo.v2</code>"}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 1856175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3970bfcc403e4089c82be231d0a0df?s=128&d=identicon&r=PG", "display_name": "timedout", "link": "https://stackoverflow.com/users/1856175/timedout"}, "edited": false, "score": 0, "creation_date": 1447090462, "post_id": 33614704, "comment_id": 55003863, "body": "That&#39;s clever idea, thanks for the alternative. I&#39;ll use that."}], "tags": [], "owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "is_accepted": true, "score": 1, "last_activity_date": 1447090114, "creation_date": 1447090114, "answer_id": 33614704, "question_id": 33611174, "link": "https://stackoverflow.com/questions/33611174/error-in-vendoring-of-third-party-librarymgo-v2/33614704#33614704", "title": "Error in vendoring of third party library(mgo.v2)", "body": "<p>This is a common problem when forking go packages. Canonical or \"vanity\" imports require the code to live in the specified path or they won't compile. The only solution is to remove the <code>// import \"gopkg.in/whatever\"</code> comment that exists somewhere.</p>\n\n<p>There are other problems with your approach as well. imports within their repository will resolve back to the original repo and cause all kinds of confusion unless you rewrite them. </p>\n\n<p>Rather, I suggest an alternate approach. The <strong>only</strong> place this can live on disk without causing problems is <code>$GOPATH/src/gopkg.in/mgo.v2</code>. Anything else will cause problems. So:</p>\n\n<pre><code>go get gopkg.in/mgo.v2\ncd $GOPATH/src/gopkg.in/mgo.v2\ngit remote add mine your_git_fork\n</code></pre>\n\n<p>Now you can pull upstream changes from <code>origin</code> and push your changes to <code>mine</code>. It feels a bit odd, but it really is the only way to work from a fork without causing tons of extra pain by rewriting things.</p>\n"}], "owner": {"reputation": 383, "user_id": 1856175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3970bfcc403e4089c82be231d0a0df?s=128&d=identicon&r=PG", "display_name": "timedout", "link": "https://stackoverflow.com/users/1856175/timedout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 818, "favorite_count": 0, "accepted_answer_id": 33614704, "answer_count": 1, "score": 0, "last_activity_date": 1572514305, "creation_date": 1447078828, "last_edit_date": 1572514305, "question_id": 33611174, "link": "https://stackoverflow.com/questions/33611174/error-in-vendoring-of-third-party-librarymgo-v2", "title": "Error in vendoring of third party library(mgo.v2)", "body": "<p>I am trying to have a local copy of current code base of mgo.v2. <strong><a href=\"https://gopkg.in/mgo.v2\" rel=\"nofollow\">https://gopkg.in/mgo.v2</a></strong> says to install using <code>go get gopkg.in/mgo.v2</code>. I forked it from <a href=\"https://github.com/go-mgo/mgo/tree/v2\" rel=\"nofollow\">https://github.com/go-mgo/mgo/tree/v2</a> and trying to install it from go get <strong>forked repo from git</strong> but it changes the package structure(changes from /src/gopkg.in --> /src/github.com) and it fails saying </p>\n\n<pre><code>src/github.com/eateshk/mgo.v2/error.go:4: \"ERROR: the correct import path is gopkg.in/mgo.v2 ... \" evaluated but not used\n</code></pre>\n\n<p>I understand the error, but what's the solution for this ?</p>\n"}, {"tags": ["variables", "go", "integer", "variable-assignment"], "answers": [{"tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": true, "score": 3, "last_activity_date": 1447071714, "creation_date": 1447071714, "answer_id": 33609017, "question_id": 33608975, "link": "https://stackoverflow.com/questions/33608975/im-new-to-golang-and-would-like-to-have-the-following-assignment-explained/33609017#33609017", "title": "I&#39;m new to Golang and would like to have the following assignment explained", "body": "<p>It's a <a href=\"https://golang.org/ref/spec#Conversions\" rel=\"nofollow\">type conversion</a>. It is there to convert <code>0</code> to type <code>Pos</code>. It could also be rewritten without a conversion like this:</p>\n\n<pre><code>var NoPos Pos = 0\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 5542323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2107f5baaf1e0220be4fe28985ef946?s=128&d=identicon&r=PG&f=1", "display_name": "hhh", "link": "https://stackoverflow.com/users/5542323/hhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 33609017, "answer_count": 1, "score": -1, "last_activity_date": 1447074923, "creation_date": 1447071565, "last_edit_date": 1447074923, "question_id": 33608975, "link": "https://stackoverflow.com/questions/33608975/im-new-to-golang-and-would-like-to-have-the-following-assignment-explained", "title": "I&#39;m new to Golang and would like to have the following assignment explained", "body": "<p>I'm new to Golang and would like to have the following code explained to me, particularly the last part when you assign <code>Pos(0)</code>. What is <code>Pos(0)</code> exactly? Thanks! </p>\n\n<pre><code>type Pos uint\n\nvar NoPos = Pos(0)\n</code></pre>\n"}, {"tags": ["http", "go", "request", "interceptor"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1447062708, "post_id": 33606330, "comment_id": 54987466, "body": "Could you elaborate a bit on what type of interceptors get into control and who passes control to these interceptors. And what is &quot;the client&quot;? Your code reading the body <i>is</i> at least &quot;a&quot; client."}, {"owner": {"reputation": 12745, "user_id": 1663023, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fc43a735e2c498f450a9908a5bd9ebf4?s=128&d=identicon&r=PG", "display_name": "Qian Chen", "link": "https://stackoverflow.com/users/1663023/qian-chen"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1447063458, "post_id": 33606330, "comment_id": 54987885, "body": "I added some sample code. Essentially I want to modify the response and pass it on to the next processor. I have the same problem on the server side before the http server send back response."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 8, "creation_date": 1447065577, "post_id": 33606330, "comment_id": 54989131, "body": "You read in the whole body, make your modifications and stuff it back into your Request. Something like (pseudocode) <code>b = ioutil.ReadAll(r.Body); b[42] = 99; r.Body = ioutil.NopCloser(bytes.NewBuffer(b))</code>. Dead simple."}, {"owner": {"reputation": 12745, "user_id": 1663023, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fc43a735e2c498f450a9908a5bd9ebf4?s=128&d=identicon&r=PG", "display_name": "Qian Chen", "link": "https://stackoverflow.com/users/1663023/qian-chen"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 4, "creation_date": 1447067035, "post_id": 33606330, "comment_id": 54989954, "body": "Thank you so much @Volker. <code>ioutil.NopCloser</code> is the thing I was looking for. Would you make it an answer so that I can give you credit?"}, {"owner": {"reputation": 131, "user_id": 4531546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95a37b644dab1f144b514edd6baf3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Izak Marais", "link": "https://stackoverflow.com/users/4531546/izak-marais"}, "edited": false, "score": 2, "creation_date": 1460958778, "post_id": 33606330, "comment_id": 60961419, "body": "In case others hit this same problem: if you change the length of the Body, you also need to update r.Contentlength to a new value. Eg. <code>newBody := &quot;New Body&quot;; r.Body = ioutil.NopCloser(strings.NewReader(newBody)); r.ContentLength = int64(len(newBody))</code>"}, {"owner": {"reputation": 2127, "user_id": 1851915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af054ca0ed65cc12b43c58ad9b3ea3c2?s=128&d=identicon&r=PG", "display_name": "dr.scre", "link": "https://stackoverflow.com/users/1851915/dr-scre"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1563806964, "post_id": 33606330, "comment_id": 100812521, "body": "@Volker You should probably close the original r.Body after ReadAll&#39;ing it"}], "answers": [{"tags": [], "owner": {"reputation": 24361, "user_id": 629685, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cadce7a59af35a66f18b9aaddebfd50f?s=128&d=identicon&r=PG", "display_name": "I159", "link": "https://stackoverflow.com/users/629685/i159"}, "is_accepted": false, "score": 15, "last_activity_date": 1483892799, "last_edit_date": 1483892799, "creation_date": 1483876461, "answer_id": 41532403, "question_id": 33606330, "link": "https://stackoverflow.com/questions/33606330/golang-rewrite-http-request-body/41532403#41532403", "title": "Golang rewrite http request body", "body": "<h3><code>Body io.ReadCloser</code></h3>\n\n<p>It seems like the only way is to substitute a <code>Body</code> with an object appropriate to <a href=\"https://golang.org/pkg/io/#ReadCloser\" rel=\"noreferrer\"><code>io.ReadCloser</code></a> interface. For this purpose you need to construct a <code>Body</code> object using any function which returns <code>io.Reader</code> object and <a href=\"https://golang.org/pkg/io/ioutil/#NopCloser\" rel=\"noreferrer\"><code>ioutil.NopCloser</code></a> to turn the <code>io.Reader</code> object to <code>io.ReadCloser</code>.</p>\n\n<p><code>bytes.NewBufferString</code></p>\n\n<blockquote>\n  <p>NewBufferString creates and initializes a new Buffer using string s as its initial contents. It is intended to prepare a buffer to read an existing string.</p>\n</blockquote>\n\n<p><code>strings.NewReader</code> <em>(used in an example below)</em></p>\n\n<blockquote>\n  <p>NewReader returns a new Reader reading from s. It is similar to bytes.NewBufferString but more efficient and read-only.</p>\n</blockquote>\n\n<p><code>ioutil.NopCloser</code></p>\n\n<blockquote>\n  <p>NopCloser returns a ReadCloser with a no-op Close method wrapping the provided Reader r.</p>\n</blockquote>\n\n<pre><code>new_body_content := \"New content.\"\nr.Body = ioutil.NopCloser(strings.NewReader(new_body_content))\n</code></pre>\n\n<h3>Related attributes</h3>\n\n<p>But to be clear and not to confuse other parts of the application you need to change <code>Request</code> attributes related to <code>Body</code> content. Most of the time it is only <code>ContentLength</code>:</p>\n\n<pre><code>r.ContentLength = int64(len(new_body_content))\n</code></pre>\n\n<p>And in a rare case, when your new content uses different encodings from original <code>Body</code>, it could be <code>TransferEncoding</code>.</p>\n"}], "owner": {"reputation": 12745, "user_id": 1663023, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fc43a735e2c498f450a9908a5bd9ebf4?s=128&d=identicon&r=PG", "display_name": "Qian Chen", "link": "https://stackoverflow.com/users/1663023/qian-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11186, "favorite_count": 4, "answer_count": 1, "score": 7, "last_activity_date": 1483892799, "creation_date": 1447062419, "last_edit_date": 1447067140, "question_id": 33606330, "link": "https://stackoverflow.com/questions/33606330/golang-rewrite-http-request-body", "title": "Golang rewrite http request body", "body": "<p>I'm writing an http interceptor in Golang on the server side. I can read the http request body from <code>r.Body</code>. Now If I want to modify the body content, how can I modify the request body before the control is passed to the next interceptor?</p>\n\n<pre><code>func(w http.ResponseWriter, r *http.Request) {\n    // Now I want to modify the request body, and \n    // handle(w, r)\n}\n</code></pre>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": true, "score": 0, "last_activity_date": 1447060070, "creation_date": 1447060070, "answer_id": 33605672, "question_id": 33605586, "link": "https://stackoverflow.com/questions/33605586/assign-multi-value-to-struct-literal/33605672#33605672", "title": "Assign multi-value to struct literal", "body": "<p><code>strconv.Atoi</code> can fail and you have to deal with this failure. If such failures are absolutely impossible you would write a function <code>func MustAtoi(s string) int</code> which panics on failure and use that one in your struct initialization.</p>\n\n<p>In Go doing some programming instead of using syntactical sugar or fancy syntax is common.</p>\n\n<p>Most probably you should rethink your error handling.</p>\n"}], "owner": {"reputation": 2000, "user_id": 1291147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/10627dec2a33b94544610da292b813a2?s=128&d=identicon&r=PG", "display_name": "Aetherix", "link": "https://stackoverflow.com/users/1291147/aetherix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 0, "closed_date": 1447065048, "accepted_answer_id": 33605672, "answer_count": 1, "score": 0, "last_activity_date": 1447060070, "creation_date": 1447059739, "question_id": 33605586, "link": "https://stackoverflow.com/questions/33605586/assign-multi-value-to-struct-literal", "closed_reason": "Duplicate", "title": "Assign multi-value to struct literal", "body": "<p>Is there any way in Go to do this:</p>\n\n<pre><code>segment := Segment{\n    CumulativeDistanceMm:    strconv.Atoi(record[9]),\n    Length:                  strconv.Atoi(record[1]),\n    LinkId:                  strconv.Atoi(record[8]),\n    SegmentId:               strconv.Atoi(record[2]),\n}\n</code></pre>\n\n<p>The error that I get is that strconv.Atoi returns multiple values so I can't assign it directly to the struct properties. If it was a variable I could use the underscore to ignore the second value. Can I do something similar for structs?</p>\n"}, {"tags": ["powershell", "vim", "plugins", "go", "syntastic"], "comments": [{"owner": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "edited": false, "score": 2, "creation_date": 1447060695, "post_id": 33605124, "comment_id": 54986364, "body": "Syntastic is about syntax checking, not syntax highlighting.  For syntax highlighting (and other Go-related goodies) use <a href=\"https://github.com/fatih/vim-go\" rel=\"nofollow noreferrer\">vim-go</a>."}, {"owner": {"reputation": 155, "user_id": 5541509, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/408e9fd99c0a3e83a09f3173a8498ca8?s=128&d=identicon&r=PG&f=1", "display_name": "bama_programmer", "link": "https://stackoverflow.com/users/5541509/bama-programmer"}, "reply_to_user": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "edited": false, "score": 0, "creation_date": 1447065980, "post_id": 33605124, "comment_id": 54989352, "body": "Thank you! Exactly what I needed."}], "answers": [{"comments": [{"owner": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "edited": false, "score": 0, "creation_date": 1447222477, "post_id": 33607502, "comment_id": 55063827, "body": "Whatever, just please don&#39;t conflate my (nick)name with AC/DC.  For one, I suspect rather few AC/DC members have heard of Vim. :)"}], "tags": [], "owner": {"reputation": 155, "user_id": 5541509, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/408e9fd99c0a3e83a09f3173a8498ca8?s=128&d=identicon&r=PG&f=1", "display_name": "bama_programmer", "link": "https://stackoverflow.com/users/5541509/bama-programmer"}, "is_accepted": false, "score": 0, "last_activity_date": 1447066197, "creation_date": 1447066197, "answer_id": 33607502, "question_id": 33605124, "link": "https://stackoverflow.com/questions/33605124/using-syntastic-plugin-with-vim-in-windows-8-0-powershell/33607502#33607502", "title": "Using syntastic plugin with vim in Windows 8.0 Powershell", "body": "<p>Commentor Icdc047 threw me in the right direction.<br>\nsee: <a href=\"https://github.com/fatih/vim-go\" rel=\"nofollow\">https://github.com/fatih/vim-go</a></p>\n"}], "owner": {"reputation": 155, "user_id": 5541509, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/408e9fd99c0a3e83a09f3173a8498ca8?s=128&d=identicon&r=PG&f=1", "display_name": "bama_programmer", "link": "https://stackoverflow.com/users/5541509/bama-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 326, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447066197, "creation_date": 1447057968, "last_edit_date": 1447064733, "question_id": 33605124, "link": "https://stackoverflow.com/questions/33605124/using-syntastic-plugin-with-vim-in-windows-8-0-powershell", "title": "Using syntastic plugin with vim in Windows 8.0 Powershell", "body": "<p>I've recently been using the Windows 8.0 Powershell package manager program called \"scoop\" (see <a href=\"https://github.com/lukesampson/scoop\" rel=\"nofollow\">https://github.com/lukesampson/scoop</a> for more details), which is based off of Mac's HomeBrew.  I have installed Vim (7.4) with this tool.  I am trying to make use of a vim syntax highlighting plugin called syntastic (see <a href=\"https://github.com/scrooloose/syntastic\" rel=\"nofollow\">https://github.com/scrooloose/syntastic</a>), since vim as it is currently installed on my machine does not seem to recognize Go language syntax.  However, I am not sure where to start in terms of integrating this plugin with Vim.  Scoop installs Vim with a plugin sub directory...the directory path on my computer would be:</p>\n\n<p>~\\AppData\\Local\\scoop\\apps\\vim\\7.4\\plugin</p>\n\n<p>I've tried cloning the syntastic repository into the plugin directory, but the Go syntax is still not recognized.  </p>\n\n<p>I do not want to install vim as a separate IDE, because I prefer working within the shell (the same way vim integrates with a Cygwin terminal).  Is there possibly another plugin I should try using all together?</p>\n\n<p>Thank you very much for any info/ time put into answering this question.</p>\n"}, {"tags": ["linux", "go", "network-programming"], "comments": [{"owner": {"reputation": 477, "user_id": 2169469, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4712d1bf23ea18fde09e1eb8f74ee886?s=128&d=identicon&r=PG", "display_name": "Meng", "link": "https://stackoverflow.com/users/2169469/meng"}, "edited": false, "score": 2, "creation_date": 1447058692, "post_id": 33605013, "comment_id": 54985229, "body": "I think using port 0 means dynamic port in Linux"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1447061255, "post_id": 33605013, "comment_id": 54986670, "body": "Or in any other TCP implementation ... But why do you want to determine the outgoing IP address? TCP will do that for you via the static routing tables."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447075468, "post_id": 33605013, "comment_id": 54994499, "body": "The IP address doesn&#39;t determine the interface. That doesn&#39;t happen until routing."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447077742, "post_id": 33605013, "comment_id": 54995884, "body": "You commented yourself that you should use port 0. Is that not your answer?"}], "owner": {"reputation": 477, "user_id": 2169469, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4712d1bf23ea18fde09e1eb8f74ee886?s=128&d=identicon&r=PG", "display_name": "Meng", "link": "https://stackoverflow.com/users/2169469/meng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447057469, "creation_date": 1447057469, "question_id": 33605013, "link": "https://stackoverflow.com/questions/33605013/how-to-fix-ip-address-but-left-port-number-selected-by-kernel-in-dialtcp", "title": "How to fix IP address but left port number selected by kernel in DialTCP?", "body": "<p>From the document, when using net.DailTCP, if laddr == nil, it means we want the kernel to pick an appropriate originating local address.\nSince the machine could have multiple network interface, I just want to fix the ip address of laddr but left port number selected by kernel randomly. How Can I do that?</p>\n\n<pre><code>func DialTCP(net string, laddr, raddr *TCPAddr) (*TCPConn, error)\n</code></pre>\n"}, {"tags": ["go", "command", "output", "stdout"], "answers": [{"tags": [], "owner": {"reputation": 4382, "user_id": 2251437, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9a594b33bf5eb20ec4e69b63f787e5c4?s=128&d=identicon&r=PG", "display_name": "sargas", "link": "https://stackoverflow.com/users/2251437/sargas"}, "is_accepted": true, "score": 0, "last_activity_date": 1447059192, "creation_date": 1447059192, "answer_id": 33605439, "question_id": 33604928, "link": "https://stackoverflow.com/questions/33604928/how-do-i-get-all-lines-of-output-when-running-command-with-exec-cmd-run/33605439#33605439", "title": "How do I get all lines of output when running command with exec.Cmd.Run()?", "body": "<p>It turns out that line</p>\n\n<p><code>glidenovendor = append(glidenovendor, strings.Split(out.String(), \" \")...)</code></p>\n\n<p>for some reason added a new line character <code>\"\\n\"</code> to the last string element of the <code>glidenovendor</code> slice. I still have no idea why. But removing it with the <em>snippet below</em> got the script running as expected:</p>\n\n<pre class=\"lang-go prettyprint-override\"><code>// Remove trailing LF from strings in `glidenovendor`\nfor i, v := range glidenovendor {\n    glidenovendor[i] = strings.Trim(v, \"\\n\")\n}\n</code></pre>\n"}], "owner": {"reputation": 4382, "user_id": 2251437, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9a594b33bf5eb20ec4e69b63f787e5c4?s=128&d=identicon&r=PG", "display_name": "sargas", "link": "https://stackoverflow.com/users/2251437/sargas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 0, "accepted_answer_id": 33605439, "answer_count": 1, "score": 1, "last_activity_date": 1447059192, "creation_date": 1447057088, "question_id": 33604928, "link": "https://stackoverflow.com/questions/33604928/how-do-i-get-all-lines-of-output-when-running-command-with-exec-cmd-run", "title": "How do I get all lines of output when running command with exec.Cmd.Run()?", "body": "<p>I'm using <a href=\"https://github.com/Masterminds/glide\" rel=\"nofollow\">glide</a> to manage dependencies on my project. I created a script that runs <code>go test $(glide novendor)</code> (which tests all directories, excluding the <em>vendor/</em> one) for me. While it works, the output for the run command doesn't go beyond the 1st line:</p>\n\n<p><code>ok     my/project/scripts    0.005s</code></p>\n\n<p>Here is the portion of the script that runs it:</p>\n\n<pre class=\"lang-go prettyprint-override\"><code>// Get the paths to test (excluding the \"vendor/\" directory)\ncmd := exec.Command(\"glide\", \"novendor\")\nvar out bytes.Buffer\ncmd.Stdout = &amp;out\nerr = cmd.Run()\nif err != nil {\n    log.Fatal(\"Could not run `glide novendor`: \", err)\n}\nglidenovendor := []string{\"test\"}\n// Represents the \"test ./src/... ./scripts/...\" portion of the command\nglidenovendor = append(glidenovendor, strings.Split(out.String(), \" \")...)\n\n// Run `go test ./src/... ./scripts/...`\ncmd = exec.Command(\"go\", glidenovendor...)\ncmd.Stdout = os.Stdout\nerr = cmd.Run()\nif err != nil {\n    log.Fatal(\"Could not run `go test` command with args: \", cmd, err)\n}\n</code></pre>\n\n<p>Running the command directly on my shell gives me all lines of out put as expected.</p>\n\n<p>How do I make my script print the entire output?</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 3038, "user_id": 568689, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a68e2585beb59c1bd2a19c46045f57b?s=128&d=identicon&r=PG", "display_name": "Eden", "link": "https://stackoverflow.com/users/568689/eden"}, "is_accepted": true, "score": 1, "last_activity_date": 1447053548, "creation_date": 1447053548, "answer_id": 33604161, "question_id": 33603847, "link": "https://stackoverflow.com/questions/33603847/unmarshal-json-nested-field-values-into-struct-fields/33604161#33604161", "title": "Unmarshal JSON nested field values into struct fields", "body": "<p>The json package doesn't support a way to access nested fields (unlike encoding/xml). So you will either have to write you own Unmarshal function (see: <a href=\"http://attilaolah.eu/2013/11/29/json-decoding-in-go/\" rel=\"nofollow\">JSON decoding in go</a>) or encapsulate the fields with accessors.</p>\n"}], "owner": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 33604161, "answer_count": 1, "score": -1, "last_activity_date": 1447053548, "creation_date": 1447051882, "question_id": 33603847, "link": "https://stackoverflow.com/questions/33603847/unmarshal-json-nested-field-values-into-struct-fields", "title": "Unmarshal JSON nested field values into struct fields", "body": "<pre><code>// Given the following struct:\n\ntype MyStruct struct {\n  First  string\n  Second string\n  Third  string\n}\n\n// I would like to unmarshal the following JSON into MyStruct such as:\n\nbytes := []byte({ { \"first\":  { \"href\":\"http://some/resources/1\" },\n                    \"second\": { \"href\":\"http://http://some/resources/2\" },\n                    \"third\":  { \"href\":\"http://some/resources/3\" } })\nvar s MyStruct\nerr := json.Unmarshal(bytes, &amp;s)\n\nfmt.Println(s.First) \n  // how do I make this return \"http://some/resources/1\" instead of \n  //   \"map[href:http://some resources/1]\"?\n</code></pre>\n\n<p>What I'm looking for is something like a combination of go field tags with actual JSON object notation where I would be able to declare <code>MyStruct</code> like this:</p>\n\n<pre><code>type MyStruct struct {\n  First  string   `json:\"first.href\"`\n  Second string   `json:\"second.href\"`\n  Third  string   `json:\"third.href\"`\n}\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["encryption", "go", "configuration-files"], "comments": [{"owner": {"reputation": 249309, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "edited": false, "score": 1, "creation_date": 1447035846, "post_id": 33600982, "comment_id": 54978579, "body": "It&#39;s unclear here who you are protecting the information from. If from external attackers, there are ways for your user to provide the decryption key securely. If you&#39;re trying to protect this information from the users (which it sounds like because you discuss hard-coding a key into the binary), then there is no encryption scheme that can provide that. The best you can have is obfuscation, and there can (almost by definition) not be a best-practice for obfuscation."}, {"owner": {"reputation": 7718, "user_id": 225885, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/pKYBo.jpg?s=128&g=1", "display_name": "jim", "link": "https://stackoverflow.com/users/225885/jim"}, "reply_to_user": {"reputation": 249309, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "edited": false, "score": 0, "creation_date": 1447037421, "post_id": 33600982, "comment_id": 54978955, "body": "Thanks, protection from external."}], "answers": [{"tags": [], "owner": {"reputation": 249309, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "is_accepted": true, "score": 1, "last_activity_date": 1447038665, "creation_date": 1447038665, "answer_id": 33601951, "question_id": 33600982, "link": "https://stackoverflow.com/questions/33600982/scheduled-process-providing-key-for-encrypted-config/33601951#33601951", "title": "Scheduled process - providing key for encrypted config", "body": "<p>Best practice for this kind of system is one of two things:</p>\n\n<ul>\n<li><p>A sysadmin authenticates during startup, providing a password at the console. This is often extremely inconvenient, but is pretty easy to implement.</p></li>\n<li><p>A hardware device is used to hold the credential. The most common and effective are called HSMs (Hardware Security Modules). They come in all kinds of formats, from USB keys to plug-in boards to external rack-mounted devices. HSMs come with their own API that you would need to interface with. The main feature of an HSM is that it never divulges its key, and it has physical safeguards to protect against it being extracted. Your app sends it some data and it signs the data and returns it. That proves that that the hardware module was connected to this machine.</p></li>\n</ul>\n\n<p>For specific OSes, you can make use of the local secure credential storage, which can provide some reasonable protection. Windows and OS X in particular have these, generally keyed to some credential the admin is required to type at startup. I'm not aware of a particularly effective one for Linux, and in general this is pretty inconvenient in a server setting (because of manual sysadmin intervention).</p>\n\n<p>In every case that I've worked on, an HSM was the best solution in the end. For simple uses (like starting an application), <a href=\"https://www.yubico.com/products/yubihsm/\" rel=\"nofollow\">you can get them for a few hundred bucks.</a> For a little more \"roll-your-own,\" <a href=\"https://shop.nitrokey.com/shop\" rel=\"nofollow\">I've seen them as cheap as $50.</a> (I'm not reviewing these particularly. I've mostly worked with a <a href=\"http://www.safenet-inc.com/data-encryption/hardware-security-modules-hsms/\" rel=\"nofollow\">bit more expensive ones</a>, but the basic idea is the same.)</p>\n"}], "owner": {"reputation": 7718, "user_id": 225885, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/pKYBo.jpg?s=128&g=1", "display_name": "jim", "link": "https://stackoverflow.com/users/225885/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 33601951, "answer_count": 1, "score": 1, "last_activity_date": 1447038665, "creation_date": 1447031117, "last_edit_date": 1447037403, "question_id": 33600982, "link": "https://stackoverflow.com/questions/33600982/scheduled-process-providing-key-for-encrypted-config", "title": "Scheduled process - providing key for encrypted config", "body": "<p>I have developed a tool that loads in an configuration file at runtime. Some of the values are encrypted with an AES key.</p>\n\n<p>The tool will be scheduled to run on a regular basis from a remote machine. What is an acceptable way to provide the decryption key to the program. It has a command line interface which I can pass it through. I can currently see three options</p>\n\n<ol>\n<li>Provide the full key via CLI, meaning the key is available in the clear at OS config level (i.e. CronJob)</li>\n<li>Hardcode the key into the binary via source code. Not a good idea for a number of reasons. (Decompiling and less portable)</li>\n<li>Use a combination of <code>1</code> and <code>2</code> i.e. Have a base key in exe and then accept partial key via CLI. This way I can use the same build for multiple machines, but it doesn't solve the problem of decompiling the exe.</li>\n</ol>\n\n<p>It is worth noting that I am not too worried about decompiling the exe to get key. If i'm sure there are ways I could address via obfuscation etc.</p>\n\n<p>Ultimately if I was really conscious I wouldn't be storing the password anywhere.</p>\n\n<p>I'd like to hear what is considered best practice. Thanks.</p>\n\n<p>I have added the Go tag because the tool is written in Go, just in case there is a magical Go package that might help, other than that, this question is not specific to a technology really.</p>\n\n<p>UPDATE:: I am trying to protect the key from external attackers. Not the regular physical user of the machine.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1447029667, "post_id": 33600714, "comment_id": 54977019, "body": "Scientific Wild Assed Guessing here, but probably to make it easier to refactor in the future. If you decide later &quot;You know, I&#39;d rather have this function be exportable,&quot; then you just write <code>Foo</code> rather than refactor and change all the references to <code>foo</code> already in your code. Vice versa in the other direction."}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1447029882, "post_id": 33600714, "comment_id": 54977067, "body": "What some examples of this? I have never seen this before."}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1447029963, "post_id": 33600714, "comment_id": 54977088, "body": "Example <a href=\"https://github.com/yohcop/openid-go/blob/master/verify.go\" rel=\"nofollow noreferrer\">here</a> @CodingPickle"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1447030121, "post_id": 33600714, "comment_id": 54977136, "body": "If that&#39;s the only example you know of, then I suggest asking the author. The author&#39;s email address is listed on their Github profile page."}, {"owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "edited": false, "score": 1, "creation_date": 1447030212, "post_id": 33600714, "comment_id": 54977155, "body": "In your example the two functions aren&#39;t equal.  <code>verify</code> takes in an additional <code>urlGetter</code> argument that local to the package, and which a client of the package doesn&#39;t have to construct or know anything about."}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1447030277, "post_id": 33600714, "comment_id": 54977172, "body": "@CodingPickle you can also see another example <a href=\"https://github.com/golang/oauth2/blob/master/oauth2.go\" rel=\"nofollow noreferrer\">here</a> under staticTokenSource"}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "reply_to_user": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "edited": false, "score": 0, "creation_date": 1447030440, "post_id": 33600714, "comment_id": 54977213, "body": "@AmitKumarGupta see my other comment example. So you&#39;re saying so they can use an extra variable that&#39;s not exported or?"}, {"owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "edited": false, "score": 0, "creation_date": 1447030451, "post_id": 33600714, "comment_id": 54977217, "body": "The second example allows you to control how clients construct certain objects. Clients have only one safe way to construct the object, using the constructor, and cannot directly do so via a struct literal. BTW you can link directly to lines of code in github: <a href=\"https://github.com/golang/oauth2/blob/master/oauth2.go#L259-L266\" rel=\"nofollow noreferrer\">github.com/golang/oauth2/blob/master/oauth2.go#L259-L266</a>"}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "reply_to_user": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "edited": false, "score": 0, "creation_date": 1447030491, "post_id": 33600714, "comment_id": 54977224, "body": "@AmitKumarGupta I&#39;m on my phone :/ no option to do that on mobile"}, {"owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "edited": false, "score": 0, "creation_date": 1447030531, "post_id": 33600714, "comment_id": 54977241, "body": "I&#39;m saying the business logic of <code>verify</code> requires something that the client can&#39;t/shouldn&#39;t provide, so they are presented with the simpler <code>Verify</code> interface, and the package provides the <code>urlGetter</code> to the <code>verify</code> call."}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "reply_to_user": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "edited": false, "score": 0, "creation_date": 1447030626, "post_id": 33600714, "comment_id": 54977273, "body": "@AmitKumarGupt ok so all in all you&#39;re saying you want to have better control over the non-exported function so you use an exported version that limits user input? If you wanna do a summary in an answer I&#39;ll mark it as answered"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1447031128, "post_id": 33600714, "comment_id": 54977413, "body": "The StaticTokenSource example returns a composite literal. It does not invoke a function."}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1447031424, "post_id": 33600714, "comment_id": 54977469, "body": "@CodingPickle but could the same not be done by just dropping the function and exporting the type and letting the end user just make a variable of that type by passing in a token?"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1447031632, "post_id": 33600714, "comment_id": 54977514, "body": "Yes, but then the type is exported and the user can do anything with it."}], "answers": [{"comments": [{"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1447031680, "post_id": 33601042, "comment_id": 54977525, "body": "Thanks! Makes complete sense."}], "tags": [], "owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "is_accepted": true, "score": 5, "last_activity_date": 1447031742, "last_edit_date": 1447031742, "creation_date": 1447031564, "answer_id": 33601042, "question_id": 33600714, "link": "https://stackoverflow.com/questions/33600714/why-do-packages-export-a-non-exported-function-by-returning-the-non-exported-fun/33601042#33601042", "title": "Why do packages export a non-exported function by returning the non-exported function through an exported function", "body": "<p>You mentioned a couple examples. The first example (<a href=\"https://github.com/yohcop/openid-go/blob/master/verify.go#L11-L13\" rel=\"nofollow\">https://github.com/yohcop/openid-go/blob/master/verify.go#L11-L13</a>):</p>\n\n<pre><code>func Verify(uri string, cache DiscoveryCache, nonceStore NonceStore) (id string, err error) {\n    return verify(uri, cache, urlGetter, nonceStore)\n}\n</code></pre>\n\n<p>You can see that the unexported <code>verify</code> function takes an extra <code>urlGetter</code> argument.  This may be something that a client of this package cannot or should not provide.  The exported function determines how clients of the package can/should use it; the signature of the non-exported function reflects the dependencies required to do whatever business logic <code>verify</code> is doing.</p>\n\n<p>The second example(<a href=\"https://github.com/golang/oauth2/blob/master/oauth2.go#L259-L266\" rel=\"nofollow\">https://github.com/golang/oauth2/blob/master/oauth2.go#L259-L266</a>):</p>\n\n<pre><code>func StaticTokenSource(t *Token) TokenSource {\n    return staticTokenSource{t}\n}\n\n// staticTokenSource is a TokenSource that always returns the same Token.\ntype staticTokenSource struct {\n    t *Token\n}\n</code></pre>\n\n<p>This restricts how clients can construct the <code>staticTokenSource</code>: there is only one way to do it, via the <code>StaticTokenSource</code> constructor, and it cannot be done directly via a struct literal. This can be useful for many reasons, e.g. input validation.  In this case, you want the safety of knowing that the client cannot mutate the <code>t</code> field on the object, and in order to do this, you leave the <code>t</code> field unexported.  But when it's unexported, the client will not be able to construct the struct literal directly, so you must provide a constructor.</p>\n\n<p>In general, it makes your code much easier to reason about when you can restrict how things are accessed, constructed, or mutated.  Golang packages give you a nice mechanism to encapsulate modules of business logic.  It's a good idea to think about the conceptual components of your software, and what their interfaces should be.  What <em>really</em> needs to be exposed to client code consuming a given component?  Only things that really need to be exported should be.</p>\n\n<p>Further reading: <a href=\"https://blog.golang.org/organizing-go-code\" rel=\"nofollow\">Organizing Go code</a></p>\n"}], "owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1841, "favorite_count": 0, "accepted_answer_id": 33601042, "answer_count": 1, "score": 4, "last_activity_date": 1569525178, "creation_date": 1447028811, "last_edit_date": 1569525178, "question_id": 33600714, "link": "https://stackoverflow.com/questions/33600714/why-do-packages-export-a-non-exported-function-by-returning-the-non-exported-fun", "title": "Why do packages export a non-exported function by returning the non-exported function through an exported function", "body": "<p>Why do some packages declare two equal functions the only difference is one is exported and the other is not but the one that is exported just returns the non-exported function like this:</p>\n\n<pre><code>func Foo() {\n    return foo()\n}\n\nfunc foo() {\n   log.Println(\"Hello\")\n}\n</code></pre>\n\n<p>Why not just move the log into the exported function and get rid of the extra line? Obviously there is a reason but I don't really see one if you can just use the exported one everywhere. Thanks!</p>\n\n<p>Example <a href=\"https://github.com/yohcop/openid-go/blob/master/verify.go\" rel=\"nofollow noreferrer\">here</a> of it being used in Production</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1447025075, "post_id": 33600221, "comment_id": 54975921, "body": "It <i>runs</i> if you take out <code>sep</code>, but did you compare the output?"}, {"owner": {"reputation": 15010, "user_id": 536890, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/85530c6eefdc35e70ff1e2119eaad7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Kim", "link": "https://stackoverflow.com/users/536890/jason-kim"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1447025178, "post_id": 33600221, "comment_id": 54975955, "body": "Yes, there&#39;s seems to be no difference in the ouput. I wonder if the author wanted to demonstrate some subtle point about go language using <code>sep</code> here but I am not sure."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1447025507, "post_id": 33600221, "comment_id": 54976057, "body": "If you only passed it one argument, pass it some more this time."}], "answers": [{"tags": [], "owner": {"reputation": 30089, "user_id": 22147, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/x74x2.png?s=128&g=1", "display_name": "Rhythmic Fistman", "link": "https://stackoverflow.com/users/22147/rhythmic-fistman"}, "is_accepted": false, "score": 3, "last_activity_date": 1447025422, "creation_date": 1447025422, "answer_id": 33600298, "question_id": 33600221, "link": "https://stackoverflow.com/questions/33600221/whats-the-point-of-sep-in-echo-program-in-the-go-programming-language-book/33600298#33600298", "title": "What&#39;s the point of &quot;sep&quot; in echo program in The Go Programming Language book?", "body": "<p>sep makes sure that there is a space between words and not at the beginning or end.</p>\n\n<p>That's why it's a variable </p>\n"}, {"tags": [], "owner": {"reputation": 2767, "user_id": 2430434, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/51cc4a334facd11b01ab94d201395683?s=128&d=identicon&r=PG", "display_name": "Misa Lazovic", "link": "https://stackoverflow.com/users/2430434/misa-lazovic"}, "is_accepted": true, "score": 1, "last_activity_date": 1447025443, "creation_date": 1447025443, "answer_id": 33600304, "question_id": 33600221, "link": "https://stackoverflow.com/questions/33600221/whats-the-point-of-sep-in-echo-program-in-the-go-programming-language-book/33600304#33600304", "title": "What&#39;s the point of &quot;sep&quot; in echo program in The Go Programming Language book?", "body": "<p>In command line (Terminal or CMD.exe), <code>cd</code> to folder with this file and execute:</p>\n\n<pre><code>go run main.go a b c\n</code></pre>\n\n<p>Output will be:</p>\n\n<blockquote>\n  <p>a b c</p>\n</blockquote>\n\n<p>Then, remove the <code>sep</code> variable from code and run it from command line again. New output will be:</p>\n\n<blockquote>\n  <p>abc</p>\n</blockquote>\n\n<p>Therefore,<code>sep</code> variable is used as separator - it adds blank space between two command line arguments passed to main function on application startup</p>\n"}], "owner": {"reputation": 15010, "user_id": 536890, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/85530c6eefdc35e70ff1e2119eaad7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Kim", "link": "https://stackoverflow.com/users/536890/jason-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 33600304, "answer_count": 2, "score": -4, "last_activity_date": 1447025443, "creation_date": 1447024891, "question_id": 33600221, "link": "https://stackoverflow.com/questions/33600221/whats-the-point-of-sep-in-echo-program-in-the-go-programming-language-book", "title": "What&#39;s the point of &quot;sep&quot; in echo program in The Go Programming Language book?", "body": "<p>Source: <a href=\"https://github.com/adonovan/gopl.io/blob/master/ch1/echo1/main.go\" rel=\"nofollow\">https://github.com/adonovan/gopl.io/blob/master/ch1/echo1/main.go</a></p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"os\"\n)\n\nfunc main() {\n    var s, sep string\n    for i := 1; i &lt; len(os.Args); i++ {\n        s += sep + os.Args[i]\n        sep = \" \"\n    }\n    fmt.Println(s)\n}\n</code></pre>\n\n<p>Here is the echo program from the  The Go Programming Language book. It basically echoes whatever you type in the console after you run the program.</p>\n\n<p>What is the point of <code>sep</code> string variable?</p>\n\n<p>The program seems to run perfectly fine without and concatinating this way.</p>\n\n<p><code>s += os.Args[i]</code> instead of <code>s += sep + os.Args[i]</code></p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 111435, "user_id": 1333873, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ae9b432531de46073888f1a49c2391c?s=128&d=identicon&r=PG", "display_name": "Golo Roden", "link": "https://stackoverflow.com/users/1333873/golo-roden"}, "edited": false, "score": 0, "creation_date": 1447010056, "post_id": 33597857, "comment_id": 54970949, "body": "Thanks for your detailed answer :-). Are there any recommended names for the keys? E.g., did somebody specify that it has to be <code>ReleaseDate</code>, or is this just personal style?"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 111435, "user_id": 1333873, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ae9b432531de46073888f1a49c2391c?s=128&d=identicon&r=PG", "display_name": "Golo Roden", "link": "https://stackoverflow.com/users/1333873/golo-roden"}, "edited": false, "score": 0, "creation_date": 1447010144, "post_id": 33597857, "comment_id": 54970979, "body": "@GoloRoden I don&#39;t know any recommendation for that, it&#39;s just personal style. They should be named something obvious, so if someone reads the package doc (which contains exported constants too), they should associate immediately to what they are. Commenting the lines also helps big time. See edit."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 111435, "user_id": 1333873, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ae9b432531de46073888f1a49c2391c?s=128&d=identicon&r=PG", "display_name": "Golo Roden", "link": "https://stackoverflow.com/users/1333873/golo-roden"}, "edited": false, "score": 0, "creation_date": 1447012492, "post_id": 33597857, "comment_id": 54971916, "body": "@GoloRoden Also added a &quot;Metadata of metadata&quot; section."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 7, "last_activity_date": 1447047235, "last_edit_date": 1447047235, "creation_date": 1447009690, "answer_id": 33597857, "question_id": 33597048, "link": "https://stackoverflow.com/questions/33597048/is-there-a-common-way-to-add-metadata-to-a-go-project/33597857#33597857", "title": "Is there a common way to add metadata to a Go project?", "body": "<p>If a Go package has extensive documentation, by convention it should be placed in its own file, <code>doc.go</code>.</p>\n\n<p>Quoting from blog post <a href=\"http://Godoc:%20documenting%20Go%20code\" rel=\"nofollow\">Godoc: documenting Go code</a>:</p>\n\n<blockquote>\n  <p>That package uses another convention for packages that need large amounts of introductory documentation: the package comment is placed in its own file, doc.go, which contains only those comments and a package clause.</p>\n</blockquote>\n\n<p>You may place any metadata in the package doc itself.</p>\n\n<p>If you want these \"metadata\" to also be available from code, you may store them in constants, e.g.:</p>\n\n<pre><code>const (\n    Author      = \"Joe Big\"\n    Version     = \"0.1.2.3\"\n    ReleaseDate = \"2015-11-08\"\n)\n</code></pre>\n\n<p>Note that exported constants will also be included in the godoc, besides them being available from code too.</p>\n\n<p>You may also comment the lines, the comments will also be included in the godoc. These comments can make it obvious what they are, for example:</p>\n\n<pre><code>const (\n    Author      = \"Joe Big\"    // Package author: first name - last name\n    Version     = \"0.1.2.3\"    // Package version: major.minor.maintenance.revision\n    ReleaseDate = \"2015-11-08\" // Release date: year-month-day\n)\n</code></pre>\n\n<h3>Metadata of metadata</h3>\n\n<p>If you include a date or time related constant (like <code>ReleaseDate</code> in my example), it is often useful to also provide a <em>layout</em> that can be used by the <a href=\"https://golang.org/pkg/time/#Parse\" rel=\"nofollow\"><code>time.Parse()</code></a> function to convert your <code>string</code> date/time to a value of <a href=\"https://golang.org/pkg/time/#Time\" rel=\"nofollow\"><code>time.Time</code></a>. For the above example, it could look like this:</p>\n\n<pre><code>const ReleaseDateLayout = \"2006-01-02\" // Release date layout (for time.Parse())\n</code></pre>\n\n<p>Using this layout, obtaining a <code>time.Time</code>:</p>\n\n<pre><code>releaseDate, err := time.Parse(ReleaseDateLayout, ReleaseDate)\n</code></pre>\n\n<p>Another option is to provide exported utility functions which process the metadata and provide other info about them or present them in another format. For example:</p>\n\n<pre><code>// GetReleaseDate returns the release date as a value of time.Time.\nfunc GetReleaseDate() time.Time {\n    t, err := time.Parse(ReleaseDateLayout, ReleaseDate)\n    if err != nil {\n        panic(err)\n    }\n    return t\n}\n</code></pre>\n\n<p>And one for the <code>Version</code>:</p>\n\n<pre><code>// GetVersion returns the parts of the Version as a slice:\n//     {major, minor, maintenance, revision}\nfunc GetVersion() []int {\n    vs := []int{}\n    for _, s := range strings.Split(Version, \".\") {\n        if v, err := strconv.Atoi(s); err != nil {\n            panic(err)\n        } else {\n            vs = append(vs, v)\n        }\n    }\n    return vs\n}\n</code></pre>\n\n<h3>Private metadata</h3>\n\n<p>These constants are exported, so they can be reached from other packages that import and use this. If you don't want that, just start them with lower case letter and so they will not be reachable from the \"outside\" (they will not be exported), e.g.:</p>\n\n<pre><code>// This constant will not be in godoc and is unreachable from other packages\nconst codeReviewer = \"Jane Small\" // Last code reviewer: first name - last name\n</code></pre>\n"}], "owner": {"reputation": 111435, "user_id": 1333873, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ae9b432531de46073888f1a49c2391c?s=128&d=identicon&r=PG", "display_name": "Golo Roden", "link": "https://stackoverflow.com/users/1333873/golo-roden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "accepted_answer_id": 33597857, "answer_count": 1, "score": 5, "last_activity_date": 1447047235, "creation_date": 1447005025, "question_id": 33597048, "link": "https://stackoverflow.com/questions/33597048/is-there-a-common-way-to-add-metadata-to-a-go-project", "title": "Is there a common way to add metadata to a Go project?", "body": "<p>In Node.js, there is a <code>package.json</code> file which contains several metadata on a module, such as its name, its version, its author(s), \u2026</p>\n\n<p>How do you do this in Go?</p>\n\n<p>E.g., I would like to store the authors of a Go module somewhere with the code. Is there a common way of how to do this?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 2, "creation_date": 1446995114, "post_id": 33595102, "comment_id": 54965723, "body": "Consider reading <a href=\"https://blog.golang.org/errors-are-values\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 4498, "user_id": 58768, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9bbffd2d873441279b4661070e8add4b?s=128&d=identicon&r=PG", "display_name": "bohdan_trotsenko", "link": "https://stackoverflow.com/users/58768/bohdan-trotsenko"}, "edited": false, "score": 0, "creation_date": 1446995524, "post_id": 33595102, "comment_id": 54965873, "body": "And this: <a href=\"https://medium.com/@divan/explaining-go-error-handling-44099bcd2b1f\" rel=\"nofollow noreferrer\">medium.com/@divan/explaining-go-error-handling-44099bcd2b1f</a> (which also links to the mentioned article)"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1446996742, "post_id": 33595102, "comment_id": 54966267, "body": "You can always write contrived examples which make error handling look more awkward than it should. Your code is very repetitive, therefor error handling will be too. Try reading through good code examples, and write some code that is more representative of real life problems."}, {"owner": {"reputation": 31539, "user_id": 367985, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/761edb9c3cf7a0a643e73ef40666a1f7?s=128&d=identicon&r=PG", "display_name": "CuriousMind", "link": "https://stackoverflow.com/users/367985/curiousmind"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447041743, "post_id": 33595102, "comment_id": 54979918, "body": "@JimB Point taken. Real-world example added. now how do I refactor this to be idiomatic go?"}], "answers": [{"comments": [{"owner": {"reputation": 31539, "user_id": 367985, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/761edb9c3cf7a0a643e73ef40666a1f7?s=128&d=identicon&r=PG", "display_name": "CuriousMind", "link": "https://stackoverflow.com/users/367985/curiousmind"}, "edited": false, "score": 0, "creation_date": 1447042088, "post_id": 33595518, "comment_id": 54979991, "body": "I wanted to handle that error too but was not sure what&#39;s the right way to go about it. But now This makes more sense. Thanks!"}], "tags": [], "owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "is_accepted": true, "score": 4, "last_activity_date": 1446995925, "creation_date": 1446995925, "answer_id": 33595518, "question_id": 33595102, "link": "https://stackoverflow.com/questions/33595102/go-error-handling-whats-the-idiomatic-way-for-making-things-dry/33595518#33595518", "title": "Go error handling, what&#39;s the idiomatic way for making things DRY", "body": "<p>Yes, the idiomatic way to produce errors is to return multiple values.  The idiomatic way to handle errors is this:</p>\n\n<pre><code>val, err := myFunc()\nif err != nil {\n    // do something with err\n}\n\n// do something with val\n</code></pre>\n\n<p>At the end of the day it's a judgement call, but it's almost always good practice to handle errors.  The code you're writing is also a bit unusual, you normally don't have 10 calls to the same function back-to-back, so the verbose error handling you'd have to do is more a result of the original code.  For instance, you could use a loop:</p>\n\n<pre><code>for _, num := range []int{2, 24, 56, 87, 97, 47, 37, 31, 69} {\n    _, err := push(num)\n    if err != nil {\n        panic(err)\n    }\n}\n</code></pre>\n\n<p>You have some other things that are more problematic than not handling the push errors though.  One minor thing is there is no reason for <code>push</code> to always return 0, why not only have it return an error, instead of an int and an error?  The bigger problem is that <code>pop</code> keeps decrementing <code>top</code>, and <code>getTop</code> just accesses <code>a[top]</code>, so you can easily get a runtime panic if <code>top</code> becomes negative from having <code>pop</code>ped too much.  You probably want some error handling or other safeguards in your <code>pop</code> and <code>getTop</code> functions.</p>\n"}, {"tags": [], "owner": {"reputation": 179, "user_id": 12698841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mnLhX.png?s=128&g=1", "display_name": "0example.com", "link": "https://stackoverflow.com/users/12698841/0example-com"}, "is_accepted": false, "score": 0, "last_activity_date": 1612951571, "creation_date": 1612951571, "answer_id": 66134762, "question_id": 33595102, "link": "https://stackoverflow.com/questions/33595102/go-error-handling-whats-the-idiomatic-way-for-making-things-dry/66134762#66134762", "title": "Go error handling, what&#39;s the idiomatic way for making things DRY", "body": "<p>This is a standard way of handling the errors in go-lang. There are two options that can follow after an error took place.</p>\n<p>1.log the error and entirely quit the program</p>\n<ol start=\"2\">\n<li>log the error and do some relevant task</li>\n</ol>\n<p>Option one example :</p>\n<pre><code>func funcX() {\n    rtnval, err := funcY()\n    if err != nil {\n        fmt.Println(&quot;error: &quot;, err)\n        os.Exit(1)\n    }\n    //rtnval \n}\n</code></pre>\n"}], "owner": {"reputation": 31539, "user_id": 367985, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/761edb9c3cf7a0a643e73ef40666a1f7?s=128&d=identicon&r=PG", "display_name": "CuriousMind", "link": "https://stackoverflow.com/users/367985/curiousmind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 33595518, "answer_count": 2, "score": 0, "last_activity_date": 1612951571, "creation_date": 1446993255, "last_edit_date": 1551801456, "question_id": 33595102, "link": "https://stackoverflow.com/questions/33595102/go-error-handling-whats-the-idiomatic-way-for-making-things-dry", "title": "Go error handling, what&#39;s the idiomatic way for making things DRY", "body": "<p>Consider the following example program which is primitive stack implementation in Go:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"errors\"\n\nconst MAX_SIZE = 10\n\nvar a [10]int\nvar top int = -1\n\nfunc main() {\n    printStack()\n    push(1)\n    printStack()\n    push(23)\n    printStack()\n    pop()\n    push(2)\n    push(24)\n    push(56)\n    push(87)\n    push(97)\n    push(47)\n    push(37)\n    push(31)\n    push(69)\n    printStack()\n    push(75)\n    println(\"Top element is\", getTop())\n}\n\nfunc push(x int) (int, error) {\n    if top &gt;= (MAX_SIZE - 1) {\n        return 0, errors.New(\"Error: Prevented Stackoverflow. Stack full\")\n    }\n    top += 1\n    a[top] = x\n    return 0, nil\n}\n\nfunc pop() {\n    top -= 1\n}\n\nfunc getTop() int {\n    return a[top]\n}\n\nfunc printStack() {\n    fmt.Println(top+1, \"Stack: \", a, \"Top\", top)\n}\n</code></pre>\n\n<p>Now, I read <a href=\"http://blog.golang.org/error-handling-and-go\" rel=\"nofollow\">Error handling and Go</a> &amp; it seems the above way of returning multiple values is the way to handle errors in go. </p>\n\n<p>But what I don't understand is that does do gophers check of errors on every statement? Coming from other languages this concept it bit hard for me to grok.  So the question is</p>\n\n<ol>\n<li>What is the idiomatic way of handling errors in above problem?</li>\n<li>Is considered a bad practice if I don't check for errors? if yes, then I am supposed to check the output of <code>push()</code> everytime I call it?</li>\n</ol>\n\n<p>Basically what I want to know if how would a experienced gopher do error handling in the above program?  </p>\n\n<p>Play URL: <a href=\"https://play.golang.org/p/_AnZLvY-28\" rel=\"nofollow\">https://play.golang.org/p/_AnZLvY-28</a></p>\n\n<p><strong>[Update]</strong>\nAdded a real-world program where I fetch data from database &amp; output to json. <a href=\"http://play.golang.org/p/dDApCYprjU\" rel=\"nofollow\">http://play.golang.org/p/dDApCYprjU</a></p>\n"}, {"tags": ["google-app-engine", "go", "google-cloud-datastore"], "comments": [{"owner": {"reputation": 1179, "user_id": 3824957, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HOl0u.png?s=128&g=1", "display_name": "MayK", "link": "https://stackoverflow.com/users/3824957/mayk"}, "edited": false, "score": 0, "creation_date": 1446988054, "post_id": 33593588, "comment_id": 54963562, "body": "you won&#39;t have a Pos field in the datastore, but you will have lon / lat fields .. is that the case ?"}, {"owner": {"reputation": 417, "user_id": 3603632, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000118135942/picture?type=large", "display_name": "user3603632", "link": "https://stackoverflow.com/users/3603632/user3603632"}, "reply_to_user": {"reputation": 1179, "user_id": 3824957, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HOl0u.png?s=128&g=1", "display_name": "MayK", "link": "https://stackoverflow.com/users/3824957/mayk"}, "edited": false, "score": 0, "creation_date": 1447056575, "post_id": 33593588, "comment_id": 54984234, "body": "No that was not the case."}], "answers": [{"tags": [], "owner": {"reputation": 1728, "user_id": 1628065, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/uhAcU.png?s=128&g=1", "display_name": "drtf", "link": "https://stackoverflow.com/users/1628065/drtf"}, "is_accepted": false, "score": 1, "last_activity_date": 1446994586, "creation_date": 1446994586, "answer_id": 33595304, "question_id": 33593588, "link": "https://stackoverflow.com/questions/33593588/go-app-engine-nested-objects-are-not-stored-in-cloud-datastore/33595304#33595304", "title": "Go App Engine nested objects are not stored in Cloud Datastore", "body": "<p>Try using <a href=\"https://cloud.google.com/appengine/docs/go/reference#GeoPoint\" rel=\"nofollow\">appengine.GeoPoint</a> as an altenative/optimised class</p>\n"}, {"comments": [{"owner": {"reputation": 417, "user_id": 3603632, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000118135942/picture?type=large", "display_name": "user3603632", "link": "https://stackoverflow.com/users/3603632/user3603632"}, "edited": false, "score": 0, "creation_date": 1447056526, "post_id": 33595423, "comment_id": 54984210, "body": "That was the mistake. Thank you"}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 5, "last_activity_date": 1446995304, "creation_date": 1446995304, "answer_id": 33595423, "question_id": 33593588, "link": "https://stackoverflow.com/questions/33593588/go-app-engine-nested-objects-are-not-stored-in-cloud-datastore/33595423#33595423", "title": "Go App Engine nested objects are not stored in Cloud Datastore", "body": "<p><a href=\"https://golang.org/ref/spec#Exported_identifiers\" rel=\"noreferrer\">Export</a> the Position field names by uppercasing the first letter in the name.  The datastore <a href=\"https://cloud.google.com/appengine/docs/go/datastore/entities#Go_Creating_an_entity\" rel=\"noreferrer\">stores exported fields only</a>.</p>\n\n<pre><code>type Position struct{\n  Lon float32\n  Lat float32\n}\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 3603632, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000118135942/picture?type=large", "display_name": "user3603632", "link": "https://stackoverflow.com/users/3603632/user3603632"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 33595423, "answer_count": 2, "score": 1, "last_activity_date": 1475152710, "creation_date": 1446983306, "last_edit_date": 1475152710, "question_id": 33593588, "link": "https://stackoverflow.com/questions/33593588/go-app-engine-nested-objects-are-not-stored-in-cloud-datastore", "title": "Go App Engine nested objects are not stored in Cloud Datastore", "body": "<p>I have a entity EmergencyCase that has 2 embedded structs (1 array and 1 struct)\nWhen I try to save the EmergencyCase by calling:</p>\n\n<pre><code>datastore.Put(c, key, &amp;ec)\n</code></pre>\n\n<p>Everything is stored fine except the Pos field (type Position). There is no error or log entry about this. It is just not stored. Any suggestions?</p>\n\n<p>Here are my 3 entities definitions:</p>\n\n<pre><code>type Position struct{\n    lon float32\n    lat float32\n}\ntype EmergencyCase struct{\n    // Autogenerated id, not stored in the database.\n    ID string `datastore:\"-\"`\n    CreatedAt time.Time\n    Closed bool\n    ClosedByUser bool `datastore:\",noindex\"`\n    AutoClosed bool `datastore:\",noindex\"`\n    Pos Position\n    Events []Event\n}\n\ntype Event struct{\n    // Autogenerated id, not stored in the datastore.\n    ID string `datastore:\"-\"`\n    CreatedAt time.Time\n    Name string `datastore:\",noindex\"`\n}\n</code></pre>\n"}, {"tags": ["pointers", "struct", "go", "initialization", "difference"], "comments": [{"owner": {"reputation": 281, "user_id": 5517206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f35a78e8cfdebb7a0223bf33c7d3e220?s=128&d=identicon&r=PG&f=1", "display_name": "linirod", "link": "https://stackoverflow.com/users/5517206/linirod"}, "edited": false, "score": 1, "creation_date": 1447095544, "post_id": 33593545, "comment_id": 55006711, "body": "Reason for the down votes?"}], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 5517206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f35a78e8cfdebb7a0223bf33c7d3e220?s=128&d=identicon&r=PG&f=1", "display_name": "linirod", "link": "https://stackoverflow.com/users/5517206/linirod"}, "edited": false, "score": 0, "creation_date": 1447000639, "post_id": 33595100, "comment_id": 54967594, "body": "Thanks for your quick reply however that&#39;s not my problem. I updated the question."}], "tags": [], "owner": {"reputation": 81, "user_id": 5423484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b231dbe27f957a7ddfa931c7d6eb26?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/5423484/john"}, "is_accepted": false, "score": 5, "last_activity_date": 1446993228, "creation_date": 1446993228, "answer_id": 33595100, "question_id": 33593545, "link": "https://stackoverflow.com/questions/33593545/difference-between-struct-vs-struct/33595100#33595100", "title": "Difference between &amp;Struct{} vs Struct{}", "body": "<p><strong>Assuming you know the general difference between a pointer and a value:</strong></p>\n\n<p>The first way allocates a struct and assigns a pointer to that allocated struct to the variable <code>p1</code>.</p>\n\n<pre><code>p1 := &amp;StructName{}\n</code></pre>\n\n<p>The second way allocates a struct and assigns a value (the struct itself) to the variable <code>s</code>.\nThen a pointer to that struct may be assigned to another variable (<code>p2</code> in the following example).</p>\n\n<pre><code>s := StructName{}\np2 := &amp;s\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1599, "user_id": 425810, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/510d3b22f788b849e098f53676ee282f?s=128&d=identicon&r=PG", "display_name": "Maleck13", "link": "https://stackoverflow.com/users/425810/maleck13"}, "is_accepted": true, "score": 17, "last_activity_date": 1447001598, "last_edit_date": 1447001598, "creation_date": 1447001025, "answer_id": 33596355, "question_id": 33593545, "link": "https://stackoverflow.com/questions/33593545/difference-between-struct-vs-struct/33596355#33596355", "title": "Difference between &amp;Struct{} vs Struct{}", "body": "<p>Well, they will have different behavior. Essentially if you want to modify state using a method on a struct, then you will need a pointer, otherwise a value will be fine. Maybe an example will be better:</p>\n\n<pre><code>package main\nimport \"fmt\"\n\n\n\ntype test_struct struct {\n  Message string\n}\n\nfunc (t test_struct)Say (){\n   fmt.Println(t.Message)\n}\n\nfunc (t test_struct)Update(m string){\n  t.Message = m; \n}\n\nfunc (t * test_struct) SayP(){\n   fmt.Println(t.Message)\n}\n\nfunc (t* test_struct) UpdateP(m string)  {\n  t.Message = m;\n}\n\nfunc main(){\n  ts := test_struct{}\n  ts.Message = \"test\";\n  ts.Say()\n  ts.Update(\"test2\")\n  ts.Say() // will still output test\n\n  tsp := &amp;test_struct{}\n  tsp.Message = \"test\"\n  tsp.SayP();\n  tsp.UpdateP(\"test2\")\n  tsp.SayP() // will output test2\n\n}\n</code></pre>\n\n<p>And you can run it here <a href=\"http://play.golang.org/p/TwNPiRelIT\" rel=\"noreferrer\">go playground</a></p>\n"}], "owner": {"reputation": 281, "user_id": 5517206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f35a78e8cfdebb7a0223bf33c7d3e220?s=128&d=identicon&r=PG&f=1", "display_name": "linirod", "link": "https://stackoverflow.com/users/5517206/linirod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3327, "favorite_count": 4, "accepted_answer_id": 33596355, "answer_count": 2, "score": 11, "last_activity_date": 1560849320, "creation_date": 1446982964, "last_edit_date": 1560849320, "question_id": 33593545, "link": "https://stackoverflow.com/questions/33593545/difference-between-struct-vs-struct", "title": "Difference between &amp;Struct{} vs Struct{}", "body": "<p>Is there a reason why I should create a struct using <code>&amp;StructName{}</code> instead of <code>Struct{}</code>? I see many examples using the former syntax, even in the <a href=\"https://golang.org/doc/effective_go.html#composite_literals\" rel=\"noreferrer\">Effective Go Page</a> but I really can not understand why.</p>\n\n<p>Additional Notes:\nI'm not sure whether I explained my problem well with these two approaches so let me refine my question.</p>\n\n<p>I know that by using the <code>&amp;</code> I will recieve a pointer instead of a value however I would like to know why would I use the <code>&amp;StructName{}</code> instead of the <code>StructName{}</code>. For example, is there any benefits of using:</p>\n\n<pre><code>func NewJob(command string, logger *log.Logger) *Job {\n    return &amp;Job{command, logger}\n}\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>func NewJob(command string, logger *log.Logger) Job {\n    return Job{command, logger}\n}\n</code></pre>\n"}, {"tags": ["go", "operating-system"], "answers": [{"comments": [{"owner": {"reputation": 3436, "user_id": 307614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/671aed37f0d4a6668053a70a75f5c715?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/307614/dave"}, "edited": false, "score": 0, "creation_date": 1447011569, "post_id": 33593595, "comment_id": 54971483, "body": "Thanks, nice link. On OSX again, all the sizes are different. Seems a bit silly to return a non-zero number here, but hey, I guess that size value might be of use to someone."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 2, "last_activity_date": 1446983337, "last_edit_date": 1592644375, "creation_date": 1446983337, "answer_id": 33593595, "question_id": 33593335, "link": "https://stackoverflow.com/questions/33593335/size-of-directory-from-os-stat-lstat/33593595#33593595", "title": "Size of directory from os.Stat/Lstat", "body": "<p>FileInfo mentions</p>\n<pre><code>// length in bytes for regular files; system-dependent for others\n</code></pre>\n<p>So it really depends on the execution environment.<br />\nSee for instance &quot;<a href=\"https://unix.stackexchange.com/a/124983/7490\">Where does ext4 store directory sizes?</a>&quot;</p>\n<p>In that example, a directory stat size returns 4096 bytes.<br />\nThat's the actual size of the directory itself, not what it contains.</p>\n<blockquote>\n<p>The stat command provides no facility for querying anything other then the size of a filesystem object (directory or file).</p>\n<p><code>stat</code> simply doesn't have a way to return multiple sizes\u2014so it can only return the size of the directory itself, not of its contents.<br />\nAnd also &quot;directory size including contents&quot; becomes less clear when you have hardlinked files.</p>\n</blockquote>\n"}], "owner": {"reputation": 3436, "user_id": 307614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/671aed37f0d4a6668053a70a75f5c715?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/307614/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 1, "accepted_answer_id": 33593595, "answer_count": 1, "score": 0, "last_activity_date": 1446983337, "creation_date": 1446981458, "question_id": 33593335, "link": "https://stackoverflow.com/questions/33593335/size-of-directory-from-os-stat-lstat", "title": "Size of directory from os.Stat/Lstat", "body": "<p>Let's say I do an <code>os.Stat()</code> on a directory:</p>\n\n<pre><code>func main() {\n    fi, _ := os.Stat(\"/tmp\")\n    println(fi.Size())\n}\n\n// 548\n// Program exited.\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/NIzGMHRYfi\" rel=\"nofollow\">https://play.golang.org/p/NIzGMHRYfi</a></p>\n\n<p>What exactly is the <code>[FileInfo].Size()</code> value meant to represent? It's not the file size, so I'm guessing something like number of files? Inodes? I couldn't find a clear answer anywhere, so maybe someone can enlighten me?</p>\n"}, {"tags": ["arrays", "go", "stack"], "answers": [{"tags": [], "owner": {"reputation": 4457, "user_id": 1685538, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ebbb7b5247615b8e0984e149bd86fc16?s=128&d=identicon&r=PG", "display_name": "HectorJ", "link": "https://stackoverflow.com/users/1685538/hectorj"}, "is_accepted": true, "score": 2, "last_activity_date": 1446975122, "creation_date": 1446975122, "answer_id": 33592542, "question_id": 33592478, "link": "https://stackoverflow.com/questions/33592478/variable-getter-functions-in-golang/33592542#33592542", "title": "variable getter functions in golang", "body": "<ol>\n<li><p>You can pass your function as a var, for example: <a href=\"https://play.golang.org/p/wzGVtsEFQk\" rel=\"nofollow\">https://play.golang.org/p/wzGVtsEFQk</a> . So <code>getTop</code> is a \"function pointer\", which explains the address being printed</p></li>\n<li><p>Explained by #1: if it is declared in the same scope, your var name and function name collide</p></li>\n</ol>\n"}], "owner": {"reputation": 31539, "user_id": 367985, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/761edb9c3cf7a0a643e73ef40666a1f7?s=128&d=identicon&r=PG", "display_name": "CuriousMind", "link": "https://stackoverflow.com/users/367985/curiousmind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 33592542, "answer_count": 1, "score": -1, "last_activity_date": 1446975122, "creation_date": 1446974672, "question_id": 33592478, "link": "https://stackoverflow.com/questions/33592478/variable-getter-functions-in-golang", "title": "variable getter functions in golang", "body": "<p>Consider the following stack implementation in go:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nvar a [10]int\nvar top int = -1\n\nfunc main() {\n    printStack()\n    push(1)\n    printStack()\n    push(23)\n    printStack()\n    pop()\n    push(2)\n    printStack()\n    println(\"Top element is\", getTop)\n}\n\nfunc push(x int) {\n    top += 1\n    a[top] = x\n}\n\nfunc pop() {\n    top -= 1\n}\n\nfunc getTop() int {\n    return a[top]\n}\n\nfunc printStack() {\n    fmt.Println(top+1, \"Stack: \", a, \"Top\", getTop)\n}\n</code></pre>\n\n<p>Questions:</p>\n\n<ol>\n<li>When I use <code>println(\"Top element is\", getTop)</code>, it prints out memory address <code>0x193928</code> but when I call <code>println(\"Top element is\", getTop())</code>, it returns <code>2</code>. Returning 2 makes sense but I don't understand why its returning memory address? shouldn't call getTop without brackets be invalid?</li>\n<li>It seems that you can't have variable &amp; functions with same name in golang. is that correct assumption to make?</li>\n</ol>\n\n<p>Play: <a href=\"https://play.golang.org/p/vvOGG296gr\" rel=\"nofollow\">https://play.golang.org/p/vvOGG296gr</a></p>\n"}, {"tags": ["encoding", "go", "base64"], "comments": [{"owner": {"reputation": 27317, "user_id": 893693, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/yHFyJ.jpg?s=128&g=1", "display_name": "Stephan Dollberg", "link": "https://stackoverflow.com/users/893693/stephan-dollberg"}, "edited": false, "score": 2, "creation_date": 1446971679, "post_id": 33592065, "comment_id": 54959561, "body": "base64 works on the bits of the input."}], "answers": [{"tags": [], "owner": {"reputation": 4457, "user_id": 1685538, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ebbb7b5247615b8e0984e149bd86fc16?s=128&d=identicon&r=PG", "display_name": "HectorJ", "link": "https://stackoverflow.com/users/1685538/hectorj"}, "is_accepted": true, "score": 1, "last_activity_date": 1446973130, "creation_date": 1446973130, "answer_id": 33592287, "question_id": 33592065, "link": "https://stackoverflow.com/questions/33592065/why-does-go-use-bit-operation-in-base64-encode/33592287#33592287", "title": "Why does Go use bit operation in base64 encode?", "body": "<p>Here is a commented Javascript implementation of the same algorithm: <a href=\"https://en.wikibooks.org/wiki/Algorithm_Implementation/Miscellaneous/Base64#Javascript\" rel=\"nofollow\">https://en.wikibooks.org/wiki/Algorithm_Implementation/Miscellaneous/Base64#Javascript</a></p>\n\n<p>It tells you that this loop:</p>\n\n<ul>\n<li><p>takes three ASCII chars (8-bit): <code>src[si+0]</code>, <code>src[si+1]</code> and <code>src[si+2]</code></p></li>\n<li><p>merges them into one 24-bit number (that's <code>val := uint(src[si+0])&lt;&lt;16 | uint(src[si+1])&lt;&lt;8 | uint(src[si+2])</code>)</p></li>\n<li><p>re-separate this number into four indices (6-bit) for the base64 character list. (<code>val&gt;&gt;18&amp;0x3F</code> takes the 18th to 24th bit of the previously calculated number, etc.)</p></li>\n</ul>\n\n<p>You can also read this: <a href=\"https://en.wikipedia.org/wiki/Base64#Examples\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Base64#Examples</a></p>\n"}], "owner": {"reputation": 2634, "user_id": 5138909, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/qBvCy.png?s=128&g=1", "display_name": "KiYugadgeter", "link": "https://stackoverflow.com/users/5138909/kiyugadgeter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 33592287, "answer_count": 1, "score": -3, "last_activity_date": 1446973130, "creation_date": 1446971243, "last_edit_date": 1446971386, "question_id": 33592065, "link": "https://stackoverflow.com/questions/33592065/why-does-go-use-bit-operation-in-base64-encode", "title": "Why does Go use bit operation in base64 encode?", "body": "<p>Code 2 is base64.Encode of Go.\nThis code uses bit operation many times.</p>\n\n<p>For example,</p>\n\n<p><code>val := uint(src[si+0])&lt;&lt;16 | uint(src[si+1])&lt;&lt;8 | uint(src[si+2])</code></p>\n\n<p>And,</p>\n\n<p><code>val := uint(src[si+0])&gt;&gt;18&amp;0x3F]</code></p>\n\n<p>I don't know why these bit operations are need to encode to base64.\nWhat is the meaning of these bit operations?</p>\n\n<p>Code: </p>\n\n<pre><code>func (enc *Encoding) Encode(dst, src []byte) {\n    if len(src) == 0 {\n        return\n    }\n\n    di, si := 0, 0\n    n := (len(src) / 3) * 3\n    for si &lt; n {\n        // Convert 3x 8bit source bytes into 4 bytes\n        val := uint(src[si+0])&lt;&lt;16 | uint(src[si+1])&lt;&lt;8 | uint(src[si+2])\n\n        dst[di+0] = enc.encode[val&gt;&gt;18&amp;0x3F]\n        dst[di+1] = enc.encode[val&gt;&gt;12&amp;0x3F]\n        dst[di+2] = enc.encode[val&gt;&gt;6&amp;0x3F]\n        dst[di+3] = enc.encode[val&amp;0x3F]\n\n        si += 3\n        di += 4\n    }\n\n    remain := len(src) - si\n    if remain == 0 {\n        return\n    }\n    // Add the remaining small block\n    val := uint(src[si+0]) &lt;&lt; 16\n    if remain == 2 {\n        val |= uint(src[si+1]) &lt;&lt; 8\n    }\n\n    dst[di+0] = enc.encode[val&gt;&gt;18&amp;0x3F]\n    dst[di+1] = enc.encode[val&gt;&gt;12&amp;0x3F]\n\n    switch remain {\n    case 2:\n        dst[di+2] = enc.encode[val&gt;&gt;6&amp;0x3F]\n        if enc.padChar != NoPadding {\n            dst[di+3] = byte(enc.padChar)\n        }\n    case 1:\n        if enc.padChar != NoPadding {\n            dst[di+2] = byte(enc.padChar)\n            dst[di+3] = byte(enc.padChar)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["xml", "parsing", "go"], "comments": [{"owner": {"reputation": 2194, "user_id": 2142505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f16433508978bc7ab06ee6fd8f124b?s=128&d=identicon&r=PG", "display_name": "davejagoda", "link": "https://stackoverflow.com/users/2142505/davejagoda"}, "edited": false, "score": 4, "creation_date": 1446964371, "post_id": 33591373, "comment_id": 54958290, "body": "All capitals is considered shouting, I don&#39;t recommend it."}], "answers": [{"tags": [], "owner": {"reputation": 595, "user_id": 5443590, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8c3c26c54f6d700cd85d73e1f0cc4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "GKV", "link": "https://stackoverflow.com/users/5443590/gkv"}, "is_accepted": false, "score": 1, "last_activity_date": 1447163826, "creation_date": 1447163826, "answer_id": 33631671, "question_id": 33591373, "link": "https://stackoverflow.com/questions/33591373/parsing-xml-with-different-elements/33631671#33631671", "title": "Parsing XML with different elements", "body": "<p>HERE YOU CAN FIND THE LIVE TRY,I TRIED AND I SUCCEED <a href=\"https://play.golang.org/p/vxfBIlZuPd\" rel=\"nofollow\">https://play.golang.org/p/vxfBIlZuPd</a> </p>\n\n<p>I HOPE I DID WHAT YOU WANT </p>\n"}], "owner": {"reputation": 1, "user_id": 5538586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a71577ebeb3f3fec038d242a917de9?s=128&d=identicon&r=PG&f=1", "display_name": "Rehana", "link": "https://stackoverflow.com/users/5538586/rehana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 2, "answer_count": 1, "score": -3, "last_activity_date": 1447163826, "creation_date": 1446964235, "last_edit_date": 1447006658, "question_id": 33591373, "link": "https://stackoverflow.com/questions/33591373/parsing-xml-with-different-elements", "title": "Parsing XML with different elements", "body": "<p>I am not able to understand, how to create structure, because every monitor elements are different from one another, please help me   </p>\n\n<pre><code>&lt;cm&gt;\n    &lt;id&gt;MONIT_SYNC&lt;/id&gt;\n    &lt;monitor name=\"APPLICATION_MONITOR\"&gt;\n        &lt;name&gt;AD&lt;/name&gt;\n        &lt;script&gt;AD.exe&lt;/script&gt;\n        &lt;freq&gt;1&lt;/freq&gt;   \n    &lt;/monitor&gt;\n\n &lt;monitor name=\"EVENTLOGS\"&gt;\n        &lt;alert&gt;1&lt;/alert&gt;\n        &lt;freq&gt;15&lt;/freq&gt;\n        &lt;eventlog&gt;Active Directory Web Service&lt;/eventlog&gt;\n        &lt;event_include&gt;Microsoft-Windows-DNS-Server&lt;/event_include&gt;\n        &lt;event_exclude/&gt;\n        &lt;sops/&gt;\n    &lt;/monitor&gt;\n&lt;monitor name=\"PING\"&gt;\n        &lt;reqid&gt;2579643&lt;/reqid&gt;\n        &lt;alert&gt;1&lt;/alert&gt;\n        &lt;freq&gt;2&lt;/freq&gt;\n        &lt;repeatfreq&gt;1&lt;/repeatfreq&gt;\n        &lt;repeatcount&gt;1&lt;/repeatcount&gt;\n        &lt;wmi-cred&gt;\n            &lt;![CDATA[test\\test;test]]&gt;\n        &lt;/wmi-cred&gt;\n        &lt;snmp-str&gt;null&lt;/snmp-str&gt;\n        &lt;hosts&gt;172.24.221.140&lt;/hosts&gt;\n        &lt;hung_monitor&gt;0&lt;/hung_monitor&gt;\n        &lt;ipswmi&gt;172.24.221.140&lt;/ipswmi&gt;\n        &lt;sops/&gt;\n    &lt;/monitor&gt;\n&lt;/cm&gt;\n</code></pre>\n\n<p>I am not able get every monitor has different  elements in it.</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5511597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129a52a845b4ba1eadc57edf81af5813?s=128&d=identicon&r=PG&f=1", "display_name": "VM7", "link": "https://stackoverflow.com/users/5511597/vm7"}, "edited": false, "score": 0, "creation_date": 1446960979, "post_id": 33591022, "comment_id": 54957779, "body": "Do you know what the rationale is behind that rule? Besides confusing me of course.  If I change      n := make([]N, 1) to     n := make(N, 1) why does that still work? I thought make needed a slice, map or channel.  This is a bit off topic but also why does the following not give an out of bounds error.     make([]int, 3)[3:]"}, {"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "reply_to_user": {"reputation": 45, "user_id": 5511597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129a52a845b4ba1eadc57edf81af5813?s=128&d=identicon&r=PG&f=1", "display_name": "VM7", "link": "https://stackoverflow.com/users/5511597/vm7"}, "edited": false, "score": 0, "creation_date": 1446965213, "post_id": 33591022, "comment_id": 54958417, "body": "@VM7 I think it&#39;s an omission in the language spec that it doesn&#39;t say what <code>make(N, 1)</code> does."}], "tags": [], "owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "is_accepted": true, "score": 1, "last_activity_date": 1446960095, "creation_date": 1446960095, "answer_id": 33591022, "question_id": 33590399, "link": "https://stackoverflow.com/questions/33590399/why-isnt-this-assignment-a-type-mismatch/33591022#33591022", "title": "Why isn&#39;t this assignment a type mismatch?", "body": "<p>You're asking if <code>n[0] = n</code> is valid. You've correctly identified the rule from the language spec:</p>\n\n<blockquote>\n  <p>A value <code>x</code> is assignable to a variable of type <code>T</code> (\"<code>x</code> is\n  assignable to <code>T</code>\") in any of these cases:</p>\n  \n  <ul>\n  <li>...</li>\n  <li><code>x</code>'s type <code>V</code> and <code>T</code> have identical underlying types and at least one of <code>V</code> or <code>T</code> is not a named type.</li>\n  </ul>\n</blockquote>\n\n<p>And here's how it applies here:</p>\n\n<ul>\n<li><code>n[0]</code> has type <code>N</code> and underlying type <code>[]N</code> (from the language specification: \"the type to which <code>N</code> refers in its type declaration\").</li>\n<li><code>n</code> has type <code>[]N</code> (with the same underlying type).</li>\n</ul>\n\n<p>So <code>n[0]</code> and <code>n</code> have identical underlying types (<code>[]N</code>), and the type of <code>n</code> is not a named type.</p>\n"}], "owner": {"reputation": 45, "user_id": 5511597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129a52a845b4ba1eadc57edf81af5813?s=128&d=identicon&r=PG&f=1", "display_name": "VM7", "link": "https://stackoverflow.com/users/5511597/vm7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1496, "favorite_count": 0, "accepted_answer_id": 33591022, "answer_count": 1, "score": 2, "last_activity_date": 1446960095, "creation_date": 1446953147, "question_id": 33590399, "link": "https://stackoverflow.com/questions/33590399/why-isnt-this-assignment-a-type-mismatch", "title": "Why isn&#39;t this assignment a type mismatch?", "body": "<p>Why isn't this a type mismatch?</p>\n\n<p>From: <a href=\"https://golang.org/ref/spec#Assignability\" rel=\"nofollow\">https://golang.org/ref/spec#Assignability</a></p>\n\n<p>A value x is assignable to a variable of type T (\"x is assignable to T\") in any of these cases:\n...snip...\nx's type V and T have identical underlying types and at least one of V or T is not a named type.\n...snip...</p>\n\n<p>Is that because the underlying type of N[] is N[] which is not a named type?</p>\n\n<p>What's the rationale behind it?</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype N []N\n\nfunc main() {\n    n := make([]N, 1)\n    fmt.Printf(\"%T\\n\", n)\n    fmt.Printf(\"%T\\n\", n[0])\n    n[0] = n\n    //fmt.Println(n)\n}\n\n*Output:*\n[]main.N\nmain.N\n</code></pre>\n"}, {"tags": ["go", "channel", "goroutine"], "answers": [{"comments": [{"owner": {"reputation": 326, "user_id": 524370, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0ca9cd5c39011be8f736147b72bbf6d9?s=128&d=identicon&r=PG", "display_name": "nJoshi", "link": "https://stackoverflow.com/users/524370/njoshi"}, "edited": false, "score": 0, "creation_date": 1446952166, "post_id": 33590042, "comment_id": 54956470, "body": "I get that, but how is that this example <a href=\"http://play.golang.org/p/2ox5ObgKIP\" rel=\"nofollow noreferrer\">play.golang.org/p/2ox5ObgKIP</a> does not need a buffer."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "reply_to_user": {"reputation": 326, "user_id": 524370, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0ca9cd5c39011be8f736147b72bbf6d9?s=128&d=identicon&r=PG", "display_name": "nJoshi", "link": "https://stackoverflow.com/users/524370/njoshi"}, "edited": false, "score": 3, "creation_date": 1446952438, "post_id": 33590042, "comment_id": 54956520, "body": "@nJoshi in that example there are <i>two</i> goroutines. The goroutine started with the call <code>go func() ...</code> passes the string into the channel (and waits), and the main goroutine retrieves it (and allows the other to continue)."}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": false, "score": 4, "last_activity_date": 1446950114, "last_edit_date": 1446950114, "creation_date": 1446949227, "answer_id": 33590042, "question_id": 33589980, "link": "https://stackoverflow.com/questions/33589980/why-does-this-code-generate-an-error/33590042#33590042", "title": "Why does this code generate an error?", "body": "<p>Channels can be <em>buffered</em> or <em>unbuffered</em>. A buffered channel can store a number of items \u201cinside\u201d it, but when you add something to a buffered channel the goroutine adding the item can only continue when another goroutine removes the item. There is no place to \u201cleave\u201d the item, it must be passed directly to the other goroutine, and the first goroutine will wait until another one take the item from it.</p>\n\n<p>This is what is happening in your code. When you create a channel with <code>make</code>, if you don\u2019t specify a capacity as the second argument you get an unbuffered channel. To create a buffered channel pass a second argument to <code>make</code>, <a href=\"https://play.golang.org/p/RAcC69tJlj\" rel=\"nofollow\">e.g</a>.</p>\n\n<pre><code>messages := make(chan string, 1) // could be larger than 1 if you want\n</code></pre>\n\n<p>This allows the goroutine to add the item (a <code>string</code> in this case) to the channel, where it will be available when another goroutine tries to get an item from the channel in the future, and the original goroutine can then continue processing.</p>\n"}, {"tags": [], "owner": {"reputation": 326, "user_id": 524370, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0ca9cd5c39011be8f736147b72bbf6d9?s=128&d=identicon&r=PG", "display_name": "nJoshi", "link": "https://stackoverflow.com/users/524370/njoshi"}, "is_accepted": true, "score": 0, "last_activity_date": 1453581758, "creation_date": 1453581758, "answer_id": 34968617, "question_id": 33589980, "link": "https://stackoverflow.com/questions/33589980/why-does-this-code-generate-an-error/34968617#34968617", "title": "Why does this code generate an error?", "body": "<p>I have learnt a lot about channels now, and now I'm able to answer the question.</p>\n\n<p>In line 16 when the message \"test\" is sent to the channel by the main thread(goroutine) the <strong><em>execution pauses</em></strong> and the runtime looks for other goroutines which are ready to receive the value from the channel message. Since there are no other channels the runtime raises a panic with the deadlock message. This a classic example for deadlock.</p>\n\n<p>To fix this there are two things that can be done.</p>\n\n<p>1) Use buffered channels as Matt suggested(one of the answers).</p>\n\n<p>2) Else have the statement that sends to channel or receives from channel in a go routine.</p>\n\n<pre><code>func main() {\n\n    messages := make(chan string)\n\n    go func() {\n        messages &lt;- \"test\" //line 16\n    }()\n    fmt.Println(&lt;-messages)\n\n}\n</code></pre>\n\n<p>So the essential take aways from this is that, </p>\n\n<p>1) Channels can be used only to communicate between goroutines i.e when you send to channel in one goroutine you can receive it only in another goroutine not the same. </p>\n\n<p>2) When data is sent to a channel in a goroutine the flow/execution of that goroutine is paused until the data is received from the same channel in another goroutine.</p>\n"}], "owner": {"reputation": 326, "user_id": 524370, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0ca9cd5c39011be8f736147b72bbf6d9?s=128&d=identicon&r=PG", "display_name": "nJoshi", "link": "https://stackoverflow.com/users/524370/njoshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 34968617, "answer_count": 2, "score": 3, "last_activity_date": 1453581758, "creation_date": 1446948608, "question_id": 33589980, "link": "https://stackoverflow.com/questions/33589980/why-does-this-code-generate-an-error", "title": "Why does this code generate an error?", "body": "<p>The below piece of code generates an error why?</p>\n\n<pre><code>func main() {\n\n    messages := make(chan string)\n\n    messages &lt;- \"test\" //line 16\n\n    fmt.Println(&lt;-messages)\n\n}\n</code></pre>\n\n<p>Generates the below error.</p>\n\n<pre><code>fatal error: all goroutines are asleep - deadlock!\ngoroutine 1 [chan send]:\nmain.main()\n    /tmp/sandbox994400718/main.go:16 +0x80\n</code></pre>\n\n<p>A value is sent to the channel, and in the next line it's being received. Technically it should work.</p>\n"}, {"tags": ["google-app-engine", "caching", "go", "google-cloud-datastore"], "comments": [{"owner": {"reputation": 18507, "user_id": 2213940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NEbb2.jpg?s=128&g=1", "display_name": "Zig Mandel", "link": "https://stackoverflow.com/users/2213940/zig-mandel"}, "edited": false, "score": 0, "creation_date": 1446946891, "post_id": 33588516, "comment_id": 54955639, "body": "look into using memcached"}, {"owner": {"reputation": 12908, "user_id": 1201324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hkRLn.jpg?s=128&g=1", "display_name": "Tim Hoffman", "link": "https://stackoverflow.com/users/1201324/tim-hoffman"}, "edited": false, "score": 0, "creation_date": 1446964356, "post_id": 33588516, "comment_id": 54958288, "body": "I feel your approach is wrong for appengine. How do you propose to cause a refresh of the data every few minutes.  You would have to direct a request to the specific instance that hits a handler to call refresh.  And if it&#39;s expensive during warmup request it will be no more efficient later.  As the previous comment suggests use memcache.  You can then use the local instance memory as an additional caching layer, but this cache is harder to expire.  I would keep it as a request level cache, i.e if you fetch the same entities from memcache more than once in a request, then cache it locally"}], "owner": {"reputation": 81, "user_id": 5423484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b231dbe27f957a7ddfa931c7d6eb26?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/5423484/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471627407, "creation_date": 1446935221, "last_edit_date": 1471627407, "question_id": 33588516, "link": "https://stackoverflow.com/questions/33588516/app-engine-loading-data-into-memory-of-automatically-scaled-instances", "title": "App Engine: Loading data into memory of automatically scaled instances", "body": "<p><strong>Each instance of my application module</strong> [default] <strong>needs to load data from the datastore into local memory</strong> (for performance/cost reasons), where it will be read-only.</p>\n\n<p><strong>A separate module updates the data in the datastore</strong> [updater], and the data needs to be refreshed (entirely) in each default instance every several minutes (preferably when the data is updated by the updater module).</p>\n\n<p>Loading the data into instance memory takes more time than is reasonable for a single user request.</p>\n\n<p>I would have used a thread (goroutine) with a background context to reload the data in each [default] instance, but background context is not supported in automatically scaled modules.</p>\n\n<p><strong>How should I update each [default] instance's memory when the data is updated by the updater module?</strong></p>\n\n<p>I am using the go runtime environment.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 3, "creation_date": 1446964236, "post_id": 33587227, "comment_id": 54958266, "body": "Related: <a href=\"http://stackoverflow.com/questions/19433050/go-methods-sets-calling-method-for-pointer-type-t-with-receiver-t?rq=1\" title=\"go methods sets calling method for pointer type t with receiver t\">stackoverflow.com/questions/19433050/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 547, "user_id": 2780187, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c82623ac37e00724492a4a22186b36b3?s=128&d=identicon&r=PG&f=1", "display_name": "user2780187", "link": "https://stackoverflow.com/users/2780187/user2780187"}, "edited": false, "score": 2, "creation_date": 1447005657, "post_id": 33591156, "comment_id": 54969356, "body": "Thanks for the crystal clear explanation. Wish the documentation carried this amount of clarity"}, {"owner": {"reputation": 802, "user_id": 2018909, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/10ebdad579fc333db3830e893baf977e?s=128&d=identicon&r=PG", "display_name": "srini", "link": "https://stackoverflow.com/users/2018909/srini"}, "reply_to_user": {"reputation": 547, "user_id": 2780187, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c82623ac37e00724492a4a22186b36b3?s=128&d=identicon&r=PG&f=1", "display_name": "user2780187", "link": "https://stackoverflow.com/users/2780187/user2780187"}, "edited": false, "score": 0, "creation_date": 1482411057, "post_id": 33591156, "comment_id": 69768736, "body": "I agree with @user2780187. I have a question @hobbs, on point#3 from your answer. What could be an example of <code>T</code> that is not &quot;addressable&quot;, and because of that we cannot call its methods with pointer receiver <code>*T</code>. From your reference link to another stackoverflow question I found one example, ie return value. But wondering if there are any other examples."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 802, "user_id": 2018909, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/10ebdad579fc333db3830e893baf977e?s=128&d=identicon&r=PG", "display_name": "srini", "link": "https://stackoverflow.com/users/2018909/srini"}, "edited": false, "score": 1, "creation_date": 1566071827, "post_id": 33591156, "comment_id": 101543201, "body": "@srini calculateArea(42) is not addressable"}], "tags": [], "owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 27, "last_activity_date": 1446961734, "creation_date": 1446961734, "answer_id": 33591156, "question_id": 33587227, "link": "https://stackoverflow.com/questions/33587227/method-sets-pointer-vs-value-receiver/33591156#33591156", "title": "Method Sets (Pointer vs Value Receiver)", "body": "<ol>\n<li>If you have a <code>*T</code> you can call methods that have a receiver type of <code>*T</code> as well as methods that have a receiver type of <code>T</code> (the passage you quoted,  <a href=\"https://golang.org/ref/spec#Method_sets\">Method Sets</a>).</li>\n<li>If you have a <code>T</code> and it is <a href=\"https://golang.org/ref/spec#Address_operators\">addressable</a> you can call methods that have a receiver type of <code>*T</code> as well as methods that have a receiver type of <code>T</code>, because the method call <code>t.Meth()</code> will be equivalent to <code>(&amp;t).Meth()</code> (<a href=\"https://golang.org/ref/spec#Calls\">Calls</a>).</li>\n<li>If you have a <code>T</code> and it isn't addressable, you can only call methods that have a receiver type of <code>T</code>, not <code>*T</code>.</li>\n<li>If you have an interface <code>I</code>, and some or all of the methods in <code>I</code>'s method set are provided by methods with a receiver of <code>*T</code> (with the remainder being provided by methods with a receiver of <code>T</code>), then <code>*T</code> satisfies the interface <code>I</code>, but <code>T</code> doesn't. That is because <code>*T</code>'s method set includes <code>T</code>'s, but not the other way around (back to the first point again).</li>\n</ol>\n\n<p>In short, you can mix and match methods with value receivers and methods with pointer receivers, and use them with variables containing values and pointers, without worrying about which is which. Both will work, and the syntax is the same. However, if methods with pointer receivers are needed to satisfy an interface, then only a pointer will be assignable to the interface \u2014 a value won't be valid.</p>\n"}, {"comments": [{"owner": {"reputation": 188, "user_id": 700659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abc506487129ccdf5c46ec29798b817c?s=128&d=identicon&r=PG&f=1", "display_name": "agronskiy", "link": "https://stackoverflow.com/users/700659/agronskiy"}, "edited": false, "score": 0, "creation_date": 1617221937, "post_id": 50526150, "comment_id": 118247779, "body": "I find this reference great, because it gives one level deeper explanation than standard one about Method Sets. Key to the real question about why method sets are designed in this way is &quot;Doing so would allow a method to modify the contents of the value inside the interface, which is not permitted by the language specification&quot;.   But I can&#39;t find this particular prohibition in the language specification. Can one point it?"}], "tags": [], "owner": {"reputation": 43, "user_id": 9140241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ec299.jpg?s=128&g=1", "display_name": "Dan Super", "link": "https://stackoverflow.com/users/9140241/dan-super"}, "is_accepted": false, "score": 4, "last_activity_date": 1596889602, "last_edit_date": 1596889602, "creation_date": 1527241303, "answer_id": 50526150, "question_id": 33587227, "link": "https://stackoverflow.com/questions/33587227/method-sets-pointer-vs-value-receiver/50526150#50526150", "title": "Method Sets (Pointer vs Value Receiver)", "body": "<p>From <a href=\"https://golang.org/doc/faq#different_method_sets\" rel=\"nofollow noreferrer\">Golang FAQ</a>:</p>\n<blockquote>\n<p>As the Go specification says, the method set of a type T consists of all methods with receiver type T, while that of the corresponding pointer type *T consists of all methods with receiver *T or T. That means the method set of *T includes that of T, but not the reverse.</p>\n<p>This distinction arises because if an interface value contains a pointer *T, a method call can obtain a value by dereferencing the pointer, but if an interface value contains a value T, there is no safe way for a method call to obtain a pointer. (Doing so would allow a method to modify the contents of the value inside the interface, which is not permitted by the language specification.)</p>\n<p>Even in cases where the compiler could take the address of a value to pass to the method, if the method modifies the value the changes will be lost in the caller. As an example, if the Write method of bytes.Buffer used a value receiver rather than a pointer, this code:</p>\n<pre class=\"lang-golang prettyprint-override\"><code>var buf bytes.Buffer\nio.Copy(buf, os.Stdin)\n</code></pre>\n<p>would copy standard input into a copy of buf, not into buf itself. This is almost never the desired behavior.</p>\n</blockquote>\n<p>About Golang interface under the hood.</p>\n<ul>\n<li><a href=\"https://www.airs.com/blog/archives/277\" rel=\"nofollow noreferrer\">Go interface by Lance Taylor</a></li>\n<li><a href=\"https://research.swtch.com/interfaces\" rel=\"nofollow noreferrer\">Go interface by Russ Cox</a></li>\n</ul>\n"}], "owner": {"reputation": 547, "user_id": 2780187, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c82623ac37e00724492a4a22186b36b3?s=128&d=identicon&r=PG&f=1", "display_name": "user2780187", "link": "https://stackoverflow.com/users/2780187/user2780187"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4564, "favorite_count": 15, "accepted_answer_id": 33591156, "answer_count": 2, "score": 16, "last_activity_date": 1596889602, "creation_date": 1446926958, "last_edit_date": 1581360937, "question_id": 33587227, "link": "https://stackoverflow.com/questions/33587227/method-sets-pointer-vs-value-receiver", "title": "Method Sets (Pointer vs Value Receiver)", "body": "<p>I am having a hard time understanding as to why are these rules associated with method set of pointer type .vs. value type</p>\n\n<p>Can someone please explain the reason (from the interface table perspective)</p>\n\n<p>(Snippet from William Kennedy's blog)</p>\n\n<pre><code>Values          Methods Receivers\n-----------------------------------------------\nT               (t T)\n*T              (t T) and (t *T)\n\nMethods Receivers    Values\n-----------------------------------------------\n(t T)                 T and *T\n(t *T)                *T\n</code></pre>\n\n<p>Snippet from specification </p>\n\n<p>Method sets</p>\n\n<p>A type may have a method set associated with it. The method set of an interface type is its interface. \nThe method set of any other type T consists of all methods declared with receiver type T. The method set of the corresponding pointer type *T is the set of all methods declared with receiver *T or T (that is, it also contains the method set of T). Further rules apply to structs containing anonymous fields, as described in the section on struct types. Any other type has an empty method set. In a method set, each method must have a unique non-blank method name.</p>\n\n<p>The method set of a type determines the interfaces that the type implements and the methods that can be called using a receiver of that type.</p>\n"}, {"tags": ["go", "socks"], "answers": [{"comments": [{"owner": {"reputation": 26308, "user_id": 80932, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c8df6a60fa19ec03cde467dad65c8f24?s=128&d=identicon&r=PG", "display_name": "ufk", "link": "https://stackoverflow.com/users/80932/ufk"}, "edited": false, "score": 3, "creation_date": 1525762359, "post_id": 33586260, "comment_id": 87472305, "body": "Dial is deprecated in 1.10. how do I get the DialContext ?"}, {"owner": {"reputation": 96, "user_id": 8805218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ScKGs.jpg?s=128&g=1", "display_name": "AmaHacka", "link": "https://stackoverflow.com/users/8805218/amahacka"}, "reply_to_user": {"reputation": 26308, "user_id": 80932, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c8df6a60fa19ec03cde467dad65c8f24?s=128&d=identicon&r=PG", "display_name": "ufk", "link": "https://stackoverflow.com/users/80932/ufk"}, "edited": false, "score": 1, "creation_date": 1586271356, "post_id": 33586260, "comment_id": 108063971, "body": "@ufk <a href=\"https://play.golang.org/p/dMGu7rdXaJ3\" rel=\"nofollow noreferrer\">play.golang.org/p/dMGu7rdXaJ3</a> what do you thin about this solution?"}, {"owner": {"reputation": 1172, "user_id": 4428377, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9295caadce48c5971dda44581c72181a?s=128&d=identicon&r=PG&f=1", "display_name": "aquaman", "link": "https://stackoverflow.com/users/4428377/aquaman"}, "reply_to_user": {"reputation": 96, "user_id": 8805218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ScKGs.jpg?s=128&g=1", "display_name": "AmaHacka", "link": "https://stackoverflow.com/users/8805218/amahacka"}, "edited": false, "score": 0, "creation_date": 1598780818, "post_id": 33586260, "comment_id": 112564753, "body": "@AmaHacka I tried your code (it required some refactoring) but it did not run successfully for me. Can you check it out - <a href=\"https://stackoverflow.com/questions/63656117/cannot-use-socks5-proxy-in-golang-read-connection-reset-by-peer\">here</a>"}], "tags": [], "owner": {"reputation": 2479, "user_id": 3666882, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4d6c91065605fbddcd17db1556134b37?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/3666882/rodrigo"}, "is_accepted": true, "score": 11, "last_activity_date": 1446947806, "last_edit_date": 1446947806, "creation_date": 1446920877, "answer_id": 33586260, "question_id": 33585587, "link": "https://stackoverflow.com/questions/33585587/creating-a-go-socks5-client/33586260#33586260", "title": "Creating a go socks5 client", "body": "<p>So I was able to find the answer to my question anyone interested how to set up a socks5 client in go here it is:</p>\n\n<pre><code>dialSocksProxy, err := proxy.SOCKS5(\"tcp\", \"proxy_ip\", nil, proxy.Direct)\nif err != nil {\n    fmt.Println(\"Error connecting to proxy:\", err)\n}\ntr := &amp;http.Transport{Dial: dialSocksProxy.Dial}\n\n// Create client\nmyClient := &amp;http.Client{\n    Transport: tr,\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 772, "user_id": 2177445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a2a5ad356c78484d79a3ad4b99209f?s=128&d=identicon&r=PG", "display_name": "likebike", "link": "https://stackoverflow.com/users/2177445/likebike"}, "is_accepted": false, "score": 6, "last_activity_date": 1522440701, "creation_date": 1522440701, "answer_id": 49580816, "question_id": 33585587, "link": "https://stackoverflow.com/questions/33585587/creating-a-go-socks5-client/49580816#49580816", "title": "Creating a go socks5 client", "body": "<p>Recent versions of Go also have SOCKS5 proxy support via the <code>HTTP_PROXY</code> environment variable.  You would write your <code>http.Client</code> code as usual, then just set the environment variable at runtime, for example:</p>\n\n<pre><code>HTTP_PROXY=\"socks5://127.0.0.1:1080/\" ./myGoHttpClient\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1017, "user_id": 4230777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rtRF8.jpg?s=128&g=1", "display_name": "bigspawn", "link": "https://stackoverflow.com/users/4230777/bigspawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1548093766, "creation_date": 1548093766, "answer_id": 54295530, "question_id": 33585587, "link": "https://stackoverflow.com/questions/33585587/creating-a-go-socks5-client/54295530#54295530", "title": "Creating a go socks5 client", "body": "<p>If you need socks5 client proxy with auth, you may use something like this:</p>\n\n<pre><code>auth := proxy.Auth{\n    User:     \"YOUR_PROXY_LOGIN\",\n    Password: \"YOUR_PROXY_PASSWORD\",\n}\n\ndialer, err := proxy.SOCKS5(\"tcp\", \"PROXY_IP\", &amp;auth, proxy.Direct)\nif err != nil {\n    fmt.Fprintln(os.Stderr, \"can't connect to the proxy:\", err)\n}\n\ntr := &amp;http.Transport{Dial: dialer.Dial}\nmyClient := &amp;http.Client{\n    Transport: tr,\n}\n</code></pre>\n"}], "owner": {"reputation": 2479, "user_id": 3666882, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4d6c91065605fbddcd17db1556134b37?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/3666882/rodrigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9318, "favorite_count": 3, "accepted_answer_id": 33586260, "answer_count": 3, "score": 6, "last_activity_date": 1548093766, "creation_date": 1446917068, "question_id": 33585587, "link": "https://stackoverflow.com/questions/33585587/creating-a-go-socks5-client", "title": "Creating a go socks5 client", "body": "<p>So I'm looking at the <code>net/proxy</code> docs and there is no examples at all of how to use any of its methods. I'm looking into using socks5. This is the how the function looks:</p>\n\n<pre><code>func SOCKS5(network, addr string, auth *Auth, forward Dialer) (Dialer, error)\n</code></pre>\n\n<p>Now everything kinda makes sense except I'm confused about <code>forward</code> which is a type <code>Dialer</code> and the function itself returns a <code>Dialer</code>. Everything else makes sense <code>network, add, auth</code> just forward is throwing me off. How would I set my client up to use the socks5 Dialer?</p>\n"}, {"tags": ["google-app-engine", "go", "internal-server-error", "panic"], "answers": [{"comments": [{"owner": {"reputation": 8775, "user_id": 821110, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa6fca5f613944238a91d2daeba67b9d?s=128&d=identicon&r=PG", "display_name": "W.K.S", "link": "https://stackoverflow.com/users/821110/w-k-s"}, "edited": false, "score": 0, "creation_date": 1447097413, "post_id": 33612316, "comment_id": 55007774, "body": "Perfect! Just what I was looking for"}], "tags": [], "owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "is_accepted": true, "score": 1, "last_activity_date": 1447082339, "creation_date": 1447082339, "answer_id": 33612316, "question_id": 33584254, "link": "https://stackoverflow.com/questions/33584254/is-it-possible-to-set-a-default-error-page-using-go-on-google-app-engine/33612316#33612316", "title": "Is it possible to set a default error page using Go on Google App Engine", "body": "<p>Yes, see <a href=\"https://cloud.google.com/appengine/docs/go/config/appconfig#Go_app_yaml_Custom_error_responses\" rel=\"nofollow\">Custom error responses</a>:</p>\n\n<blockquote>\n  <p>When certain errors occur, App Engine serves a generic error page. You\n  can configure your app to serve a custom static file instead of these\n  generic error pages, so long as the custom error data is less than 10\n  kilobytes. You can set up different static files to be served for each\n  supported error code by specifying the files in your app's app.yaml\n  file. To serve custom error pages, add a error_handlers section to\n  your app.yaml, as in this example:</p>\n\n<pre><code>error_handlers:\n  - file: default_error.html\n\n  - error_code: over_quota\n    file: over_quota.html\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 8775, "user_id": 821110, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa6fca5f613944238a91d2daeba67b9d?s=128&d=identicon&r=PG", "display_name": "W.K.S", "link": "https://stackoverflow.com/users/821110/w-k-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 33612316, "answer_count": 1, "score": 1, "last_activity_date": 1447082339, "creation_date": 1446908948, "question_id": 33584254, "link": "https://stackoverflow.com/questions/33584254/is-it-possible-to-set-a-default-error-page-using-go-on-google-app-engine", "title": "Is it possible to set a default error page using Go on Google App Engine", "body": "<p>I've previously worked with J2EE where it's possible to add this configuration to <code>web.xml</code></p>\n\n<pre><code>&lt;error-page&gt;\n        &lt;exception-type&gt;java.lang.Throwable&lt;/exception-type&gt;\n        &lt;location&gt;/error&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n\n<p>The effect of the above code is that if an unhanded exception is thrown, it will be passed to the <code>/error</code> page, which will be shown to the user.</p>\n\n<p>Is there a way to do something similar to this when my Go web application panics on Google App Engine?</p>\n"}, {"tags": ["go", "casting"], "answers": [{"comments": [{"owner": {"reputation": 419, "user_id": 827818, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9324fd31bcfbe16f779bf926381b4a74?s=128&d=identicon&r=PG", "display_name": "bio", "link": "https://stackoverflow.com/users/827818/bio"}, "edited": false, "score": 0, "creation_date": 1571999054, "post_id": 33581477, "comment_id": 103432614, "body": "This solution does not support the leading zeros though, isn&#39;t it? A pity because it&#39;s really straightforward."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 419, "user_id": 827818, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9324fd31bcfbe16f779bf926381b4a74?s=128&d=identicon&r=PG", "display_name": "bio", "link": "https://stackoverflow.com/users/827818/bio"}, "edited": false, "score": 2, "creation_date": 1572018588, "post_id": 33581477, "comment_id": 103442577, "body": "@bio you&#39;re right, but other solutions on this (four year old question) do support leading zeroes"}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 36, "last_activity_date": 1446891194, "last_edit_date": 1446891194, "creation_date": 1446890815, "answer_id": 33581477, "question_id": 33581426, "link": "https://stackoverflow.com/questions/33581426/how-can-i-convert-from-int-to-hex/33581477#33581477", "title": "How can I convert from int to hex", "body": "<p>\"Hex\" isn't a real thing. You can use a hexadecimal representation of a number, but there's no difference between <code>0xFF</code> and <code>255</code>. More info on that <a href=\"https://golang.org/ref/spec#Integer_literals\" rel=\"noreferrer\">can be found in the docs</a> which point out you can use <code>0xff</code> to define an integer constant <code>255</code>! As you mention, if you're trying to find the hexadecimal representation of an integer you could use <code>strconv</code></p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strconv\"\n)\n\nfunc main() {\n    fmt.Println(strconv.FormatInt(255, 16))\n    // gives \"ff\"\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/T_QR5grpDU\" rel=\"noreferrer\">Try it in the playground</a></p>\n"}, {"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 43, "last_activity_date": 1500473461, "last_edit_date": 1500473461, "creation_date": 1446895673, "answer_id": 33582214, "question_id": 33581426, "link": "https://stackoverflow.com/questions/33581426/how-can-i-convert-from-int-to-hex/33582214#33582214", "title": "How can I convert from int to hex", "body": "<p>Since hex is a <a href=\"https://golang.org/ref/spec#Integer_literals\" rel=\"noreferrer\">Integer literal</a>, you can ask the <a href=\"https://golang.org/pkg/fmt/\" rel=\"noreferrer\">fmt package</a> for a string representation of that integer, using <a href=\"https://golang.org/pkg/fmt/#Sprintf\" rel=\"noreferrer\"><code>fmt.Sprintf()</code></a>, and the <code>%x</code> or <code>%X</code> format.<br>\n<a href=\"http://play.golang.org/p/GXleKw0OiF\" rel=\"noreferrer\">See playground</a></p>\n\n<pre><code>i := 255\nh := fmt.Sprintf(\"%x\", i)\nfmt.Printf(\"Hex conv of '%d' is '%s'\\n\", i, h)\nh = fmt.Sprintf(\"%X\", i)\nfmt.Printf(\"HEX conv of '%d' is '%s'\\n\", i, h)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Hex conv of '255' is 'ff'\nHEX conv of '255' is 'FF'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 263, "user_id": 206690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49148715ac3aa5a0eaf9e34f0a62d22b?s=128&d=identicon&r=PG", "display_name": "Lioda", "link": "https://stackoverflow.com/users/206690/lioda"}, "is_accepted": false, "score": 17, "last_activity_date": 1512898907, "creation_date": 1512898907, "answer_id": 47737589, "question_id": 33581426, "link": "https://stackoverflow.com/questions/33581426/how-can-i-convert-from-int-to-hex/47737589#47737589", "title": "How can I convert from int to hex", "body": "<p>If formatting some bytes, hex needs a 2 digits representation, with leading 0.</p>\n\n<p>For exemple: 1 => '01', 15 => '0f', etc.</p>\n\n<p>It is possible to force Sprintf to respect this :</p>\n\n<pre><code>h:= fmt.Sprintf(\"%02x\", 14)\nfmt.Println(h) // 0e\nh2:= fmt.Sprintf(\"%02x\", 231)\nfmt.Println(h2) // e7\n</code></pre>\n\n<p>The pattern \"%02x\" means:</p>\n\n<ul>\n<li>'0' force using zeros</li>\n<li>'2' set the output size as two charactes</li>\n<li>'x' to convert in hexadecimal</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 5450, "user_id": 942317, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/SY5ID.jpg?s=128&g=1", "display_name": "STEEL", "link": "https://stackoverflow.com/users/942317/steel"}, "is_accepted": false, "score": 0, "last_activity_date": 1577363414, "creation_date": 1577363414, "answer_id": 59488528, "question_id": 33581426, "link": "https://stackoverflow.com/questions/33581426/how-can-i-convert-from-int-to-hex/59488528#59488528", "title": "How can I convert from int to hex", "body": "<p>E.g. if its uint32, you can convert it to HEX as seen below =></p>\n\n<pre><code>    var p uint32\n    p = 4278190335\n    r := p &gt;&gt; 24 &amp; 0xFF\n    g := p &gt;&gt; 16 &amp; 0xFF\n    b := p &gt;&gt; 8 &amp; 0xFF\n    fmt.Println(r, g, b)//255 0 0\n\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/zXL0yAeND56\" rel=\"nofollow noreferrer\">DEMO</a></p>\n\n<p>you can also check this online tool for ref. <a href=\"https://cryptii.com/pipes/integer-encoder\" rel=\"nofollow noreferrer\">https://cryptii.com/pipes/integer-encoder</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5876895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cfe18f0f57d194dacb2647d7ebcfd8f?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandr  Cherepanov", "link": "https://stackoverflow.com/users/5876895/alexandr-cherepanov"}, "is_accepted": false, "score": 2, "last_activity_date": 1596093867, "creation_date": 1596093867, "answer_id": 63168150, "question_id": 33581426, "link": "https://stackoverflow.com/questions/33581426/how-can-i-convert-from-int-to-hex/63168150#63168150", "title": "How can I convert from int to hex", "body": "<p>Sprintf is more versatile but FormatInt is faster. Choose what is better for you</p>\n<pre><code>func Benchmark_sprintf(b *testing.B) { // 83.8 ns/op\n    for n := 0; n &lt; b.N; n++ {\n        _ = fmt.Sprintf(&quot;%x&quot;, n)\n    }\n}\nfunc Benchmark_formatint(b *testing.B) { // 28.5 ns/op\n    bn := int64(b.N)\n    for n := int64(0); n &lt; bn; n++ {\n        _ = strconv.FormatInt(n, 16)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1981, "user_id": 577769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0240bc5bafbc2c97c8f871dff042989?s=128&d=identicon&r=PG", "display_name": "Ualter Jr.", "link": "https://stackoverflow.com/users/577769/ualter-jr"}, "is_accepted": false, "score": 1, "last_activity_date": 1606218850, "last_edit_date": 1606218850, "creation_date": 1606218280, "answer_id": 64985817, "question_id": 33581426, "link": "https://stackoverflow.com/questions/33581426/how-can-i-convert-from-int-to-hex/64985817#64985817", "title": "How can I convert from int to hex", "body": "<pre><code>i := 4357640193405743614\nh := fmt.Sprintf(&quot;%016x&quot;,i)\nfmt.Printf(&quot;Decimal: %d,\\nHexa: %s&quot;, i, h)\n\n# Result\nDecimal..: 4357640193405743614,\nHexa.....: 3c7972ab0ae9f1fe\n</code></pre>\n<p>Playground: <a href=\"https://play.golang.org/p/ndlMyBdQjmT\" rel=\"nofollow noreferrer\">https://play.golang.org/p/ndlMyBdQjmT</a></p>\n"}], "owner": {"reputation": 2634, "user_id": 5138909, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/qBvCy.png?s=128&g=1", "display_name": "KiYugadgeter", "link": "https://stackoverflow.com/users/5138909/kiyugadgeter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44191, "favorite_count": 6, "accepted_answer_id": 33582214, "answer_count": 6, "score": 31, "last_activity_date": 1606218850, "creation_date": 1446890384, "last_edit_date": 1561813112, "question_id": 33581426, "link": "https://stackoverflow.com/questions/33581426/how-can-i-convert-from-int-to-hex", "title": "How can I convert from int to hex", "body": "<p>I want to convert from int to hex in Golang.\nIn strconv, there is a method that converts strings to hex. Is there a similar method to get a hex string from an int?</p>\n"}, {"tags": ["string", "go", "id3"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 3844741, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xiKAz.png?s=128&g=1", "display_name": "Love_for_CODE", "link": "https://stackoverflow.com/users/3844741/love-for-code"}, "edited": false, "score": 0, "creation_date": 1447185686, "post_id": 33580405, "comment_id": 55051093, "body": "Yeah, That worked for me....... Sometimes the data is Filled with U&#39;s... I&#39;ll figure out something"}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 0, "last_activity_date": 1447429744, "last_edit_date": 1447429744, "creation_date": 1446881831, "answer_id": 33580405, "question_id": 33578992, "link": "https://stackoverflow.com/questions/33578992/how-to-remove-binary-content-from-the-strings/33580405#33580405", "title": "How to remove binary content from the strings?", "body": "<p>This is a current issue in <a href=\"https://github.com/mikkyang/id3-go\" rel=\"nofollow\">id3-go</a>: <a href=\"https://github.com/mikkyang/id3-go/pull/8\" rel=\"nofollow\">PR 8</a> fixes it for id3v1</p>\n\n<p>But that isn't enough for id3v2, as show <a href=\"https://github.com/frodeaa/dircast/commit/894cfe7a1bd18fbc341b35471befc0f5b7f52173\" rel=\"nofollow\">in this commit</a>, which does have to trim those null characters.\nSee the use of <code>cutset := string(rune(0))</code>, and of <a href=\"https://golang.org/pkg/strings/#TrimRight\" rel=\"nofollow\"><code>TrimRight(s string, cutset string)</code></a>, as in for instance <code>strings.TrimRight(fd.Title(), cutset)</code>:</p>\n\n<pre><code>fd, err := id3.Open(path)\nif err != nil {\n    item.Title = f.Name()\n} else {\n    defer fd.Close()\n    cutset := string(rune(0))\n    title := strings.TrimRight(fd.Title(), cutset)\n    author := strings.TrimRight(fd.Artist(), cutset)\n    if len(title) &gt; 0 {\n        item.Title = title\n    } else {\n        item.Title = author\n        if len(author) &gt; 0 {\n            item.Title += \" - \"\n        }\n        item.Title += strings.TrimRight(f.Name(), cutset)\n    }\n    item.Subtitle = author\n    tcon := fd.Frame(\"TCON\")\n    if tcon != nil {\n        item.Categories = append(item.Categories, Text{Value: strings.TrimRight(tcon.String(), cutset)})\n    }\n    item.PubDate = strings.TrimRight(formatYear(fd.Year()), cutset)\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 3844741, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xiKAz.png?s=128&g=1", "display_name": "Love_for_CODE", "link": "https://stackoverflow.com/users/3844741/love-for-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 1, "accepted_answer_id": 33580405, "answer_count": 1, "score": 1, "last_activity_date": 1447429744, "creation_date": 1446868911, "last_edit_date": 1446881476, "question_id": 33578992, "link": "https://stackoverflow.com/questions/33578992/how-to-remove-binary-content-from-the-strings", "title": "How to remove binary content from the strings?", "body": "<p>I was trying to read ID3 tags from mp3 files using golang.<br>\nI get the results. But they also contain some binary content as my <a href=\"https://www.dropbox.com/s/qcp3vww66tkyycp/Screenshot%20from%202015-11-07%2009-28-17.png?dl=0\" rel=\"nofollow noreferrer\">database viewer</a> suggests.</p>\n\n<p><a href=\"https://i.stack.imgur.com/vesBE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vesBE.png\" alt=\"picture\"></a></p>\n\n<p>Any way to remove that content in golang?</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1446868737, "post_id": 33578897, "comment_id": 54935383, "body": "Would you say the way I have described in my original post is a decent way to do it? Set a db global variable for my package and set it with an <code>init</code> then <code>ping</code> it? Where would I put the <code>defer close</code>? Your answer is fantastic and answers most questions, just the one other thing was what&#39;s the best way to open the initial connection. Like if I don&#39;t have a <code>main()</code> function. Thanks!"}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "reply_to_user": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1446869661, "post_id": 33578897, "comment_id": 54935511, "body": "@Datsik - one global pool (either as a global var, or with a pointer you pass around explicitly) is fine - see <a href=\"https://golang.org/pkg/database/sql/#Open\" rel=\"nofollow noreferrer\">golang.org/pkg/database/sql/#Open</a> - <code>Thus, the Open function should be called just once.</code>"}, {"owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1446912353, "post_id": 33578897, "comment_id": 54945733, "body": "Hey thanks for the fantastic answer. Would it be bad practice to have a file with just an init because as it stands I have 2 files in my package with no main because I don&#39;t need one can I add a third one and call it <code>init.go</code> just to declare my db?"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "edited": false, "score": 0, "creation_date": 1446913899, "post_id": 33578897, "comment_id": 54946317, "body": "@Datsik no, that would not be a bad practice."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 6, "last_activity_date": 1446882717, "last_edit_date": 1495542888, "creation_date": 1446867823, "answer_id": 33578897, "question_id": 33578876, "link": "https://stackoverflow.com/questions/33578876/how-frequently-should-i-be-calling-sql-open-in-my-program/33578897#33578897", "title": "How frequently should I be calling sql.Open in my program?", "body": "<p>You should at least check the error.<br>\nAs mentioned in \"<a href=\"https://github.com/golang/go/wiki/SQLInterface#connecting-to-a-database\" rel=\"nofollow noreferrer\">Connecting to a database</a>\":</p>\n\n<blockquote>\n  <p>Note that <code>Open</code> does not directly open a database connection: this is deferred until a query is made. To verify that a connection can be made before making a query, use the <code>Ping</code> function:</p>\n</blockquote>\n\n<pre><code>if err := db.Ping(); err != nil {\n  log.Fatal(err)\n}\n</code></pre>\n\n<blockquote>\n  <p>After use, the database is closed using Close.</p>\n</blockquote>\n\n<p>If possible, limit the number of opened connection to a database to a minimum.<br>\nSee \"<a href=\"https://stackoverflow.com/a/19986504/6309\">Go/Golang sql.DB reuse in functions</a>\":</p>\n\n<blockquote>\n  <p>You shouldn't need to open database connections all over the place.<br>\n  The <code>database/sql</code> package does connection pooling internally, opening and closing connections as needed, while providing the illusion of a single connection that can be used concurrently.</p>\n</blockquote>\n\n<p>As <a href=\"https://stackoverflow.com/users/556573/elithrar\">elithrar</a> points out <a href=\"https://stackoverflow.com/questions/33578876/how-frequently-should-i-be-calling-sql-open-in-my-program/33578897#comment54935511_33578897\">in the comment</a>, <a href=\"https://golang.org/pkg/database/sql/#Open\" rel=\"nofollow noreferrer\"><code>database.sql/#Open</code></a> does mention:</p>\n\n<blockquote>\n  <p>The returned DB is safe for concurrent use by multiple goroutines and maintains its own pool of idle connections.<br>\n  <strong>Thus, the <code>Open</code> function should be called just once.</strong><br>\n  It is rarely necessary to close a DB. </p>\n</blockquote>\n\n<p>As <a href=\"https://stackoverflow.com/a/19978147/6309\">mentioned here</a> </p>\n\n<blockquote>\n  <p>Declaring <code>*sql.DB</code> globally also have some additional benefits such as <a href=\"http://golang.org/pkg/database/sql/#DB.SetMaxIdleConns\" rel=\"nofollow noreferrer\"><code>SetMaxIdleConns</code></a> (regulating connection pool size) or <a href=\"http://golang.org/pkg/database/sql/#DB.Prepare\" rel=\"nofollow noreferrer\">preparing</a> SQL statements across your application.</p>\n</blockquote>\n\n<p>You can use a <a href=\"https://stackoverflow.com/q/24790175/6309\">function <code>init</code></a>, which will run even if you don't have a <code>main()</code>:</p>\n\n<pre><code>var db *sql.DB\nfunc init() {\n    db, err = sql.Open(DBparms....)\n}\n</code></pre>\n\n<blockquote>\n  <p><code>init()</code> is always called, regardless if there's main or not, so if you import a package that has an init function, it will be executed.<br>\n  You can have multiple <code>init()</code> functions per package, they will be executed in the order they show up in the code (after all variables are initialized of course).</p>\n</blockquote>\n"}], "owner": {"reputation": 12897, "user_id": 2128168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tOuCx.png?s=128&g=1", "display_name": "Datsik", "link": "https://stackoverflow.com/users/2128168/datsik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1504, "favorite_count": 1, "accepted_answer_id": 33578897, "answer_count": 1, "score": 5, "last_activity_date": 1446882717, "creation_date": 1446867514, "question_id": 33578876, "link": "https://stackoverflow.com/questions/33578876/how-frequently-should-i-be-calling-sql-open-in-my-program", "title": "How frequently should I be calling sql.Open in my program?", "body": "<p>As the title says I don't know if having multiple <code>sql.Open</code> statements is a good or bad thing or what or if I should have a file with just an init that is something like:</p>\n\n<pre><code>var db *sql.DB\n\n\nfunc init() {\n    var err error\n    db, err = sql.Open\n}\n</code></pre>\n\n<p>just wondering what the best practice would be. Thanks!</p>\n"}, {"tags": ["ssl", "go", "https", "timeout", "handshake"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1446863629, "post_id": 33578338, "comment_id": 54934612, "body": "There&#39;s nothing wrong with that host that I can see, and it looks fairly well configured. Are you having trouble connecting via IPv6?"}, {"owner": {"reputation": 8404, "user_id": 243712, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5347c683b6963f418d1b16c65917bf3f?s=128&d=identicon&r=PG", "display_name": "poolie", "link": "https://stackoverflow.com/users/243712/poolie"}, "edited": false, "score": 0, "creation_date": 1446878896, "post_id": 33578338, "comment_id": 54937027, "body": "What happens if you try a different https host?"}, {"owner": {"reputation": 19, "user_id": 5535608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2be8350115ab99df444076f568a8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy Solomanidin", "link": "https://stackoverflow.com/users/5535608/evgeniy-solomanidin"}, "edited": false, "score": 0, "creation_date": 1446896750, "post_id": 33578338, "comment_id": 54941022, "body": "Nope, <code>https:&#47;&#47;code.google.com</code> - works perfect."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1446912598, "post_id": 33578338, "comment_id": 54945825, "body": "It would be nice to know if it was an IPv6 problem. Are you using go1.5.1?"}, {"owner": {"reputation": 19, "user_id": 5535608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2be8350115ab99df444076f568a8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy Solomanidin", "link": "https://stackoverflow.com/users/5535608/evgeniy-solomanidin"}, "edited": false, "score": 0, "creation_date": 1446913154, "post_id": 33578338, "comment_id": 54946021, "body": "yep, i use go1.5.1 this can because my provider block this site?i found redirect lin to this site and it`s work, but why i can access to site with Python from normal link?"}, {"owner": {"reputation": 19, "user_id": 5535608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2be8350115ab99df444076f568a8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy Solomanidin", "link": "https://stackoverflow.com/users/5535608/evgeniy-solomanidin"}, "edited": false, "score": 0, "creation_date": 1446913264, "post_id": 33578338, "comment_id": 54946054, "body": "i don`t know how use ipv6."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1447090781, "post_id": 33578338, "comment_id": 55004044, "body": "You&#39;re going to have to try some debugging on your side to provide more information. Does changing the dns resolver from cgo to netgo change anything? Have you tried connecting using the IPv4 and IPv6 addresses directly, or used a dialer which only calls one protocol (I&#39;m focusing on DNS and IPv6, because you haven&#39;t shown anything else that could be different between the GO, and other clients)"}, {"owner": {"reputation": 19, "user_id": 5535608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2be8350115ab99df444076f568a8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy Solomanidin", "link": "https://stackoverflow.com/users/5535608/evgeniy-solomanidin"}, "edited": false, "score": 0, "creation_date": 1447259935, "post_id": 33578338, "comment_id": 55083968, "body": "Fixed, just remove <code>&quot;https:&#47;&#47;www.marathonbet.com&#47;en&#47;&quot;</code> to <code>&quot;https:&#47;&#47;87.117.250.213&#47;en&#47;&quot;</code> and add skip verify"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 3, "creation_date": 1447953785, "post_id": 33578338, "comment_id": 55386248, "body": "@EvgeniySolomanidin: that&#39;s absolutely the wrong solution, since the DNS may change at any point (it goes through cloudflare), and you can&#39;t trust the remote server."}], "owner": {"reputation": 19, "user_id": 5535608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2be8350115ab99df444076f568a8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy Solomanidin", "link": "https://stackoverflow.com/users/5535608/evgeniy-solomanidin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 11625, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1518540199, "creation_date": 1446861576, "last_edit_date": 1495541625, "question_id": 33578338, "link": "https://stackoverflow.com/questions/33578338/get-net-http-tls-handshake-timeout-golang", "title": "Get net/http: TLS handshake timeout golang", "body": "<p>Need your help with this</p>\n\n<pre><code>package main\n\nimport (\n    \"log\"\n    \"net/http\"\n)\n\nfunc main() {\n    client := &amp;http.Client{}\n    _, err := client.Get(\"https://www.marathonbet.com/en/\")\n    if err != nil {\n        log.Fatalf(\"%s\\n\", err)\n    }\n}\n</code></pre>\n\n<p>This always return:<code>Get https://www.marathonbet.com/en/: net/http: TLS handshake timeout exit status 1</code>\nI`m try:\n    <a href=\"https://stackoverflow.com/a/32524298/5535608\">it</a>\nand use <a href=\"https://github.com/parnurzeal/gorequest\" rel=\"nofollow noreferrer\">this</a> lib\nand do <a href=\"https://stackoverflow.com/a/12122718/5535608\">it</a>\nBut nothing works for me..\nSo, please help me.</p>\n\n<p>Update:\nIn Python 2.7 with requests this works:</p>\n\n<pre><code>s = Session()\nr = s.get('https://www.marathonbet.com/en/, verify=False)\n</code></pre>\n\n<p>But i need do it with go(</p>\n\n<p>UPD:\nFixed: Just replase <code>https://www.marathonbet.com/en/</code> to <code>https://87.117.250.213/en/</code> and adding <code>skip verify</code>.\nthx all for help.</p>\n"}, {"tags": ["mysql", "go", "innodb"], "comments": [{"owner": {"reputation": 389, "user_id": 1566921, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f9e82f5ce51b38fd69d6ccb3e215cfd7?s=128&d=identicon&r=PG", "display_name": "william", "link": "https://stackoverflow.com/users/1566921/william"}, "reply_to_user": {"reputation": 62191, "user_id": 3993662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20ce5cf17ddc888ba9d7b5e639f040b2?s=128&d=identicon&r=PG&f=1", "display_name": "baao", "link": "https://stackoverflow.com/users/3993662/baao"}, "edited": false, "score": 0, "creation_date": 1446862051, "post_id": 33578271, "comment_id": 54934296, "body": "Even for temp tables? Is there no way to use temp tables in Golang then?"}, {"owner": {"reputation": 389, "user_id": 1566921, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f9e82f5ce51b38fd69d6ccb3e215cfd7?s=128&d=identicon&r=PG", "display_name": "william", "link": "https://stackoverflow.com/users/1566921/william"}, "reply_to_user": {"reputation": 62191, "user_id": 3993662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20ce5cf17ddc888ba9d7b5e639f040b2?s=128&d=identicon&r=PG&f=1", "display_name": "baao", "link": "https://stackoverflow.com/users/3993662/baao"}, "edited": false, "score": 0, "creation_date": 1446862132, "post_id": 33578271, "comment_id": 54934317, "body": "The docs indicate that creating a temp table will not do an implicit commit (<a href=\"https://dev.mysql.com/doc/refman/5.6/en/implicit-commit.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/5.6/en/implicit-commit.html</a>) however there is no way to add indexes to them as it would."}, {"owner": {"reputation": 438, "user_id": 5500955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lPhR9.jpg?s=128&g=1", "display_name": "Code4aliving", "link": "https://stackoverflow.com/users/5500955/code4aliving"}, "edited": false, "score": 0, "creation_date": 1446870275, "post_id": 33578271, "comment_id": 54935595, "body": "Temporary tables in MySQL are only visible to the current connection.  Once that connection closes, they are dropped.  If you&#39;re using temp tables, you&#39;ve got to hold on to that connection while you&#39;re doing your business."}, {"owner": {"reputation": 438, "user_id": 5500955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lPhR9.jpg?s=128&g=1", "display_name": "Code4aliving", "link": "https://stackoverflow.com/users/5500955/code4aliving"}, "edited": false, "score": 1, "creation_date": 1446873827, "post_id": 33578271, "comment_id": 54936107, "body": "Yeah, I think you&#39;re stuck with doing all of your work within a transaction.  Straight from Golang documentation: &quot;Once DB.Begin is called, the returned Tx is bound to a single connection. Once Commit or Rollback is called on the transaction, that transaction&#39;s connection is returned to DB&#39;s idle connection pool.&quot;  Since temporary tables are visible only per-connection, this is all you can do.  Be sure to clean up the temporary tables when you&#39;re done with them, otherwise they&#39;ll persist, and might confound the next unsuspecting inheritor of that pooled connection..."}, {"owner": {"reputation": 4457, "user_id": 1685538, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ebbb7b5247615b8e0984e149bd86fc16?s=128&d=identicon&r=PG", "display_name": "HectorJ", "link": "https://stackoverflow.com/users/1685538/hectorj"}, "edited": false, "score": 0, "creation_date": 1447122324, "post_id": 33578271, "comment_id": 55018068, "body": "Just for the records: I deleted my answer suggesting to create a new sql.DB with only 1 connection because it seems that would not work (<a href=\"https://groups.google.com/d/msg/golang-dev/RWmOv4SYUmc/SYVuaZazQGwJ\" rel=\"nofollow noreferrer\">groups.google.com/d/msg/golang-dev/RWmOv4SYUmc/SYVuaZazQGwJ</a>&zwnj;&#8203;)"}, {"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1449010986, "post_id": 33578271, "comment_id": 55819116, "body": "@william - won&#39;t it work to create the indexes <i>as</i> you create the tmp table?  <code>CREATE TEMPORARY TABLE foo ( ..., INDEX(...) );</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2797, "user_id": 4123698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883acd9ee061b3a325ba22b1fee3daca?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4123698/harvey"}, "is_accepted": true, "score": 6, "last_activity_date": 1447296903, "creation_date": 1447296903, "answer_id": 33663626, "question_id": 33578271, "link": "https://stackoverflow.com/questions/33578271/is-there-any-way-to-use-mysql-temp-tables-in-go/33663626#33663626", "title": "Is there any way to use MySQL Temp Tables in Go?", "body": "<p>You can create your own pseudo temp tables that can be accessed by multiple processes, and connections.</p>\n\n<p>The idea is to simply create memory tables, run your operations, and cleanup afterwards.</p>\n\n<p><strong>You can create a memory table with the following sql;</strong></p>\n\n<pre><code>CREATE TABLE mydb.temp_32rfd293 (\n  id int(11) auto_increment,\n  content varchar(50),\n  PRIMARY KEY  (`id`)\n) ENGINE=MEMORY;\n</code></pre>\n\n<p><strong>Do something useful, then drop it using;</strong></p>\n\n<pre><code>DROP TABLE temp_32rfd293:\n</code></pre>\n\n<p><strong>Scheduled event to remove mydb.temp_% tables older than 1 day</strong></p>\n\n<p>You'll want to clean up the occasional abandoned temp table, you can create a scheduled event in mysql to do this. If you choose to do this consider using a dedicated schema for temp tables to prevent accidental removals.</p>\n\n<p>Note: You need <code>event_scheduler=ON</code> in your my.ini for this to work.</p>\n\n<pre><code>DELIMITER $$\n\nCREATE\n  EVENT `cleanup_custom_temps`\n  ON SCHEDULE EVERY 1 DAY STARTS '2000-01-01 01:00:00'\n  DO BEGIN\n\n\n  ---------------------------------------------------\n  -- Process to delete all tables with\n  -- prefix 'temp_', and older than 1 day\n  SET @tbls = (\n    SELECT GROUP_CONCAT(TABLE_NAME)\n      FROM information_schema.TABLES\n      WHERE TABLE_SCHEMA = 'mydb'\n        AND TABLE_NAME LIKE 'temp_%'\n          AND CREATE_TIME &lt; NOW() - INTERVAL 1 DAY\n  );\n  SET @delStmt = CONCAT('DROP TABLE ',  @tbls);\n  PREPARE stmt FROM @delStmt;\n  EXECUTE stmt;\n  DEALLOCATE PREPARE stmt;\n  ---------------------------------------------------\n\n  END */$$\n\nDELIMITER ;\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 1566921, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f9e82f5ce51b38fd69d6ccb3e215cfd7?s=128&d=identicon&r=PG", "display_name": "william", "link": "https://stackoverflow.com/users/1566921/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1899, "favorite_count": 1, "accepted_answer_id": 33663626, "answer_count": 1, "score": 8, "last_activity_date": 1447296903, "creation_date": 1446860964, "last_edit_date": 1447182429, "question_id": 33578271, "link": "https://stackoverflow.com/questions/33578271/is-there-any-way-to-use-mysql-temp-tables-in-go", "title": "Is there any way to use MySQL Temp Tables in Go?", "body": "<p>I have stored procedures that create temp tables.  I would like to then execute a query that joins with these temp tables.</p>\n\n<p>The problem is that with Golang's database/sql design, the only way to ensure you get the same connection for subsequent queries is to create a transaction.</p>\n\n<p>Am I asking for trouble if I wrap the majority of my SELECTs in a transaction for the purpose of accessing a temp table?  I understand that I will lose some performance/scalability because I'll be holding onto connections from the pool rather than allowing them to go back between queries.  But I'm wondering if I'll start seeing locking or other serious issues with this strategy.</p>\n\n<p>The reason I need to do this is because the MySQL execution plan for many of my tables is very poor (I'm doing several joins across large tables).  I'd like to execute some intermediate queries and store their results in temp tables to avoid this issue.</p>\n"}, {"tags": ["time", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1446845738, "post_id": 33575967, "comment_id": 54930098, "body": "What problem do you have when you try to use Times? Please show a minimal example of the problem you have."}, {"owner": {"reputation": 665, "user_id": 1800140, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd2989e0eb5cca0cd6d391a548032ec1?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/1800140/andy"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1446845824, "post_id": 33575967, "comment_id": 54930132, "body": "Hi, the problem I&#39;m having is that I don&#39;t understand how to go about converting from string to a time, I&#39;ve read a few places and when they parse the string to a time they all include the date, where mine just includes the time."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1446846981, "post_id": 33575967, "comment_id": 54930570, "body": "Using hours and minutes alone without a date is ambiguous. Is 23:59 before or after 00:01? If you only want to work with hours and minutes, I would just work with them as integers."}, {"owner": {"reputation": 665, "user_id": 1800140, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd2989e0eb5cca0cd6d391a548032ec1?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/1800140/andy"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1446847813, "post_id": 33575967, "comment_id": 54930949, "body": "I think my logic would handle 23:59 and 00:01, However unable to check that it would yet. How would you go about doing it with integers?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1446848141, "post_id": 33575967, "comment_id": 54931092, "body": "A Time is a nanosecond instant in a specific location. What you are essentially asking for is the duration since 00:00. You could use Time.Duration, or make your own type with methods to work directly with the formats you want, using only a single integer of minutes or seconds since 00:00."}, {"owner": {"reputation": 3488, "user_id": 328504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c066fa1944f2b8cd2bf31c5ac1b54abd?s=128&d=identicon&r=PG", "display_name": "Ben Campbell", "link": "https://stackoverflow.com/users/328504/ben-campbell"}, "edited": false, "score": 0, "creation_date": 1446858368, "post_id": 33575967, "comment_id": 54933614, "body": "Much of your example code would fail to build. Could you update your post to include the compiler error you are receiving and a snippet of the offending function?"}, {"owner": {"reputation": 665, "user_id": 1800140, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd2989e0eb5cca0cd6d391a548032ec1?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/1800140/andy"}, "edited": false, "score": 0, "creation_date": 1446858478, "post_id": 33575967, "comment_id": 54933637, "body": "All of it is offending code, Because its mainly pseudo code and dummy code - trying to give a better impression of what I am aiming to achieve. It does not build at all - last paragraph."}], "answers": [{"tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 4, "last_activity_date": 1446864796, "creation_date": 1446864796, "answer_id": 33578646, "question_id": 33575967, "link": "https://stackoverflow.com/questions/33575967/time-formatting-and-converting-from-string/33578646#33578646", "title": "Time formatting and converting from string", "body": "<p>Since <code>time.Time</code> is a particular instant, at a particular location, using it for arbitrary clock time without a day or timezone can be awkward. What you're really looking for is the duration since 00:00, so a <code>time.Duration</code> makes more sense. You could even use your own type based on minutes since midnight for example, but if you use a <code>time.Duration</code> you'll be able to compose your times with <code>time.Time</code> more easily. </p>\n\n<p>Here's an example function to parse your clock times, and minutes into a <code>time.Duration</code></p>\n\n<pre><code>func ParseTime(t string) (time.Duration, error) {\n    var mins, hours int\n    var err error\n\n    parts := strings.SplitN(t, \":\", 2)\n\n    switch len(parts) {\n    case 1:\n        mins, err = strconv.Atoi(parts[0])\n        if err != nil {\n            return 0, err\n        }\n    case 2:\n        hours, err = strconv.Atoi(parts[0])\n        if err != nil {\n            return 0, err\n        }\n\n        mins, err = strconv.Atoi(parts[1])\n        if err != nil {\n            return 0, err\n        }\n    default:\n        return 0, fmt.Errorf(\"invalid time: %s\", t)\n    }\n\n    if mins &gt; 59 || mins &lt; 0 || hours &gt; 23 || hours &lt; 0 {\n        return 0, fmt.Errorf(\"invalid time: %s\", t)\n    }\n\n    return time.Duration(hours)*time.Hour + time.Duration(mins)*time.Minute, nil\n}\n</code></pre>\n\n<p>You can also combine this with your own type, using the same underlying int64 type, so that you can easily format the time.Duration and add your own methods. It's up to you if returning a <code>Time</code> or a <code>time.Duration</code> from ParseTime is more convenient. The two here are directly convertible. </p>\n\n<pre><code>type Time int64\n\nfunc (t Time) Hours() int {\n    return int(time.Duration(t) / time.Hour)\n}\n\nfunc (t Time) Minutes() int {\n    return int((time.Duration(t) % time.Hour) / time.Minute)\n}\n\nfunc (t Time) String() string {\n    return fmt.Sprintf(\"%02d:%02d\", t.Hours(), t.Minutes())\n}\n</code></pre>\n\n<p>You could combine these like so: <a href=\"http://play.golang.org/p/E679m2wlUO\" rel=\"nofollow\">http://play.golang.org/p/E679m2wlUO</a></p>\n"}], "owner": {"reputation": 665, "user_id": 1800140, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd2989e0eb5cca0cd6d391a548032ec1?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/1800140/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5976, "favorite_count": 1, "accepted_answer_id": 33578646, "answer_count": 1, "score": 1, "last_activity_date": 1565768934, "creation_date": 1446845116, "last_edit_date": 1565768934, "question_id": 33575967, "link": "https://stackoverflow.com/questions/33575967/time-formatting-and-converting-from-string", "title": "Time formatting and converting from string", "body": "<p>I'm quite new to Go and mainly work in C#. I am currently working on something that will be used as a command to get the next bus. Currently it does not compile because I am struggling with understanding how to use the <code>time</code> package in Go.</p>\n\n<p>I have an array of strings formatted as times when it is scheduled and another for the minutes when it is a regular service like so (there are many more times these are just an example:</p>\n\n<pre><code>var ScheduledTimes = []string{\"06:34\", \"06:54\", \"17:09\", \"17:19\"}\nvar RegularTimes = []string{\"05\", \"50\"}\n</code></pre>\n\n<p>So what I am currently doing is getting the current time and checking if it is in regular service by doing this: </p>\n\n<pre><code>func isWithinRegularService(check time.Time) bool {\n    RegularStart, err := time.Parse(time.Kitchen, \"10:05\")\n    RegularEnd, err := time.Parse(time.Kitchen, \"13:52\")\n    return check.After(RegularStart) &amp;&amp; check.Before(RegularEnd)\n}\n\ntime := time.Now().UTC().Format(\"15:04\")\nif isWithinRegularService(time) { }\n</code></pre>\n\n<p>If it is in regular service, I will then determine what hour needs looking at (i.e this one or is the next service within the next hour) </p>\n\n<pre><code>if time.Minutes &lt; 5 &amp;&amp; time.Minutes &gt;= 0 {\n    RegularTimes[0] = fmt.Sprintf(\"%s%s\", time.Hour+1, RegularTimes[0])\n    RegularTimes[1] = fmt.Sprintf(\"%s%s\", time.Hour+1, RegularTimes[1])\n    RegularTimes[2] = fmt.Sprintf(\"%s%s\", time.Hour+1, RegularTimes[2])\n    RegularTimes[3] = fmt.Sprintf(\"%s%s\", time.Hour+1, RegularTimes[3])\n} else {\n    RegularTimes[0] = fmt.Sprintf(\"%s%s\", time.Hour, RegularTimes[0])\n    RegularTimes[1] = fmt.Sprintf(\"%s%s\", time.Hour, RegularTimes[1])\n    RegularTimes[2] = fmt.Sprintf(\"%s%s\", time.Hour, RegularTimes[2])\n    RegularTimes[3] = fmt.Sprintf(\"%s%s\", time.Hour, RegularTimes[3])\n}\n</code></pre>\n\n<p>Before I pass that array to another func to give me the times to check between</p>\n\n<pre><code>type BusTime struct {\nbetweenStart string\nbetweenEnd   string\n}\n\nfunc getBusTime(busTimes []array, iteration int) BusTime {\n\n    var timesToReturn BusTime\n\n    if iteration == busTimes.Count()-1 {\n        timesToReturn.betweenStart = busTimes[iteration]\n        timesToReturn.betweenEnd = busTimes[0]\n    } else {\n        timesToReturn.betweenStart = busTimes[iteration]\n        timesToReturn.betweenEnd = busTimes[iteration+1]\n    }\n\n    return timesToReturn\n}\n\nbusTimes := getBusTime(quaylinkRegularTimes, i)\n</code></pre>\n\n<p>And lastly I then check if the time provided is between the times to compare:</p>\n\n<pre><code>check.After(start) &amp;&amp; check.Before(end)\n</code></pre>\n\n<p>That is about it for this project. If it is not with regular service it will do the exact same but skip out determining what hour to look at.</p>\n\n<p>Currently this does not build because I am using strings where I should be using times, I was hoping to get some guidance, some examples, and corrections on how to use times correctly to achieve what I'm looking to do. So far I believe my logic to the way this will flow is correct, but I'm stuck getting it to compile.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1446835322, "post_id": 33573483, "comment_id": 54924848, "body": "Because you&#39;re calling Println, not Printf."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 2, "creation_date": 1446835333, "post_id": 33573483, "comment_id": 54924855, "body": "<code>Println</code> doesn&#39;t do formatting at all."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1446839669, "post_id": 33573483, "comment_id": 54927216, "body": "also look at the Println documentation you linked, there&#39;s no format string argument."}, {"owner": {"reputation": 18043, "user_id": 28045, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/e4TH3.jpg?s=128&g=1", "display_name": "johnny", "link": "https://stackoverflow.com/users/28045/johnny"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1446843218, "post_id": 33573483, "comment_id": 54928996, "body": "@JimB Thanks.  I see that now.  I guess I haven&#39;t spent enough time on languages like Go."}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 1, "creation_date": 1446854518, "post_id": 33573483, "comment_id": 54932719, "body": "In general you&#39;re going to find that the string processing features/paradigm are more like C# or Java than PHP or Python, most stuffs taken care of for you but you still have to be explicit."}], "answers": [{"tags": [], "owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "is_accepted": false, "score": 1, "last_activity_date": 1446835452, "creation_date": 1446835452, "answer_id": 33573540, "question_id": 33573483, "link": "https://stackoverflow.com/questions/33573483/why-does-fmt-println-in-go-print-the-verb-s-literal-instead-of-the-value/33573540#33573540", "title": "Why does fmt.Println in Go print the verb %s literal instead of the value?", "body": "<p><code>Println</code> just prints the string and appends a newline to it. <code>Printf</code> is short for 'print format' and is based off the C library which is where the conventions for format specifiers ect come from.</p>\n\n<p>Simple answer is it's as designed. If you want to use format specifiers you gotta call the format method.</p>\n"}, {"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 3, "last_activity_date": 1446835454, "creation_date": 1446835454, "answer_id": 33573541, "question_id": 33573483, "link": "https://stackoverflow.com/questions/33573483/why-does-fmt-println-in-go-print-the-verb-s-literal-instead-of-the-value/33573541#33573541", "title": "Why does fmt.Println in Go print the verb %s literal instead of the value?", "body": "<p>the <code>f</code> in <code>Printf</code> is for \"Formatting.\" That's why the <code>%?</code> verbs do anything at all, because the function is built to parse for them. <code>Println</code> does no such formatting.</p>\n\n<p>Formatting isn't a property of strings like in some languages (maybe you, like myself, came from Python?)</p>\n"}], "owner": {"reputation": 18043, "user_id": 28045, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/e4TH3.jpg?s=128&g=1", "display_name": "johnny", "link": "https://stackoverflow.com/users/28045/johnny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 972, "favorite_count": 1, "accepted_answer_id": 33573541, "answer_count": 2, "score": 2, "last_activity_date": 1446835454, "creation_date": 1446835204, "question_id": 33573483, "link": "https://stackoverflow.com/questions/33573483/why-does-fmt-println-in-go-print-the-verb-s-literal-instead-of-the-value", "title": "Why does fmt.Println in Go print the verb %s literal instead of the value?", "body": "<p>Consider,</p>\n\n<pre><code>package main\nimport \"fmt\"\n\nfunc main() {\n  name := \"johnny\"\n  fmt.Println(\"Hello world %s\\n\", name)\n}\n</code></pre>\n\n<p>prints out,</p>\n\n<p>Hello world <strong>%s</strong>\n johnny</p>\n\n<hr>\n\n<p>Why do I get the %s instead of this,</p>\n\n<pre><code>package main\nimport \"fmt\"\n\nfunc main() {\n  name := \"johnny\"\n  fmt.Printf(\"Hello world %s\\n\", name)\n}\n</code></pre>\n\n<p>which prints Hello world johnny?</p>\n\n<p>I have tried to figure out the answer from the <a href=\"https://golang.org/pkg/fmt/#Println\" rel=\"nofollow\">documentation</a>,</p>\n\n<blockquote>\n  <p>If the format (which is implicitly %v for Println etc.) is valid for a\n  string (%s %q %v %x %X), the following two rules apply:</p>\n  \n  <ol start=\"4\">\n  <li><p>If an operand implements the error interface, the Error method will be invoked to convert the object to a string, which will then be\n  formatted as required by the verb (if any).</p></li>\n  <li><p>If an operand implements method String() string, that method will be invoked to convert the object to a string, which will then be\n  formatted as required by the verb (if any).</p></li>\n  </ol>\n</blockquote>\n\n<p>But I'm having trouble understanding if this is affecting my program.</p>\n"}, {"tags": ["go", "go-gorm"], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 1229740, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a23484f400e5b2e07e38dcbf3b1229e9?s=128&d=identicon&r=PG", "display_name": "Ben Nichols", "link": "https://stackoverflow.com/users/1229740/ben-nichols"}, "edited": false, "score": 0, "creation_date": 1446836901, "post_id": 33573922, "comment_id": 54925701, "body": "Turns out the problem was I needed to specify the type and primary key to get it working:     ID   uint64 <code>gorm:&quot;primary_key&quot; sql:&quot;type:bigint; DEFAULT:id_generator()&quot;</code>"}, {"owner": {"reputation": 711, "user_id": 1232726, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/Bg5nq.jpg?s=128&g=1", "display_name": "filthy_wizard", "link": "https://stackoverflow.com/users/1232726/filthy-wizard"}, "edited": false, "score": 0, "creation_date": 1515504642, "post_id": 33573922, "comment_id": 83317806, "body": "cant seem to add a default value at all? EpisodeNum int  <code>json: &quot;episodenum&quot; gorm: &quot;type:INTEGER; DEFAULT:0&quot;</code>"}, {"owner": {"reputation": 49343, "user_id": 2082673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gmyMb.jpg?s=128&g=1", "display_name": "dave", "link": "https://stackoverflow.com/users/2082673/dave"}, "reply_to_user": {"reputation": 711, "user_id": 1232726, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/Bg5nq.jpg?s=128&g=1", "display_name": "filthy_wizard", "link": "https://stackoverflow.com/users/1232726/filthy-wizard"}, "edited": false, "score": 1, "creation_date": 1515536842, "post_id": 33573922, "comment_id": 83335260, "body": "@user1232726 try <code>json:&quot;episodenum&quot; gorm:&quot;type:INTEGER&quot; sql:&quot;DEFAULT:0&quot;</code>"}], "tags": [], "owner": {"reputation": 49343, "user_id": 2082673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gmyMb.jpg?s=128&g=1", "display_name": "dave", "link": "https://stackoverflow.com/users/2082673/dave"}, "is_accepted": true, "score": 10, "last_activity_date": 1446836849, "creation_date": 1446836849, "answer_id": 33573922, "question_id": 33573306, "link": "https://stackoverflow.com/questions/33573306/using-gorm-is-there-a-way-for-me-to-set-a-default-value-as-a-postgresql-functio/33573922#33573922", "title": "Using GORM, is there a way for me to set a default value as a PostgreSQL function?", "body": "<p>Have you tried it?  You can do</p>\n\n<pre><code>time.Time `sql:\"DEFAULT:current_timestamp\"`\n</code></pre>\n\n<p>and it will use the \"current_timestamp\" function.  If you want the default to be the string <code>current_timestamp</code>, you would do</p>\n\n<pre><code>time.Time `sql:\"DEFAULT:'current_timestamp'\"`\n</code></pre>\n\n<p>So, in short, yes, it is possible.  You would just do:</p>\n\n<pre><code>type User struct {\n    ID          int     `sql:\"DEFAULT:myfunction\"`\n}\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 1229740, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a23484f400e5b2e07e38dcbf3b1229e9?s=128&d=identicon&r=PG", "display_name": "Ben Nichols", "link": "https://stackoverflow.com/users/1229740/ben-nichols"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17257, "favorite_count": 0, "accepted_answer_id": 33573922, "answer_count": 1, "score": 4, "last_activity_date": 1446836849, "creation_date": 1446834472, "question_id": 33573306, "link": "https://stackoverflow.com/questions/33573306/using-gorm-is-there-a-way-for-me-to-set-a-default-value-as-a-postgresql-functio", "title": "Using GORM, is there a way for me to set a default value as a PostgreSQL function?", "body": "<p>I want something like:</p>\n\n<pre><code>type User struct {\n    ID          int     `sql:\"default:&lt;myfunction&gt;\"`\n}\n</code></pre>\n\n<p>Is this possible with GORM?</p>\n"}, {"tags": ["google-app-engine", "go", "docker", "gcloud", "revel"], "comments": [{"owner": {"reputation": 1, "user_id": 5534577, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000955212938/picture?type=large", "display_name": "\u041d\u0438\u043a\u0438\u0442\u0430 \u0413\u0430\u0432\u0440\u0438\u0448", "link": "https://stackoverflow.com/users/5534577/%d0%9d%d0%b8%d0%ba%d0%b8%d1%82%d0%b0-%d0%93%d0%b0%d0%b2%d1%80%d0%b8%d1%88"}, "edited": false, "score": 0, "creation_date": 1447348519, "post_id": 33573160, "comment_id": 55127668, "body": "*ck google and google app engine. I moved to heroku"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5534577, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000955212938/picture?type=large", "display_name": "\u041d\u0438\u043a\u0438\u0442\u0430 \u0413\u0430\u0432\u0440\u0438\u0448", "link": "https://stackoverflow.com/users/5534577/%d0%9d%d0%b8%d0%ba%d0%b8%d1%82%d0%b0-%d0%93%d0%b0%d0%b2%d1%80%d0%b8%d1%88"}, "is_accepted": true, "score": 0, "last_activity_date": 1451063198, "last_edit_date": 1451063198, "creation_date": 1447348594, "answer_id": 33677370, "question_id": 33573160, "link": "https://stackoverflow.com/questions/33573160/google-cloud-sdks-doesnt-start-preview-for-docker-image-mac-os/33677370#33677370", "title": "Google cloud sdks doesn&#39;t start preview for Docker image Mac OS", "body": "<p>Moved to heroku. Google App Engine is not ready yet.</p>\n"}], "owner": {"reputation": 1, "user_id": 5534577, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000955212938/picture?type=large", "display_name": "\u041d\u0438\u043a\u0438\u0442\u0430 \u0413\u0430\u0432\u0440\u0438\u0448", "link": "https://stackoverflow.com/users/5534577/%d0%9d%d0%b8%d0%ba%d0%b8%d1%82%d0%b0-%d0%93%d0%b0%d0%b2%d1%80%d0%b8%d1%88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 33677370, "answer_count": 1, "score": 0, "last_activity_date": 1451063198, "creation_date": 1446833931, "last_edit_date": 1592644375, "question_id": 33573160, "link": "https://stackoverflow.com/questions/33573160/google-cloud-sdks-doesnt-start-preview-for-docker-image-mac-os", "title": "Google cloud sdks doesn&#39;t start preview for Docker image Mac OS", "body": "<p>My app.yaml</p>\n<pre><code>runtime: custom\nvm: true\napi_version: 1\nhealth_check:\n  enable_health_check: False\n</code></pre>\n<p>Dockerfile</p>\n<pre><code># Use the official go docker image built on debian.\nFROM golang:1.5.1\n\n# Grab the source code and add it to the workspace.\nADD . /go/\n\n# Install revel and the revel CLI.\nRUN go get github.com/revel/revel\nRUN go get github.com/revel/cmd/revel\n\n# Use the revel CLI to start up our application.\nENTRYPOINT revel run 4quorum-appengine dev 8080\n\n# Open up the port where the app is running.\nEXPOSE 8080\n</code></pre>\n<p>I was working through this article\n<a href=\"http://jbeckwith.com/2015/05/08/docker-revel-appengine/\" rel=\"nofollow noreferrer\">http://jbeckwith.com/2015/05/08/docker-revel-appengine/</a></p>\n<h2>Preview</h2>\n<p>I am trying to preview it:</p>\n<pre><code>gcloud preview app run app.yaml --custom-entrypoint &quot;revel run 4quorum-appengine dev 8080&quot;\nWARNING: The `app run` command is deprecated and will soon be removed.\n\nPlease use dev_appserver.py (in the same directory as the `gcloud` command) instead.\nModule [default] found in file     [/Users/802619/Projects/src/4quorum_root/app.yaml]\nINFO: Looking for the Dockerfile in     /Users/802619/Projects/src/4quorum_root\nINFO: Using Dockerfile found in /Users/802619/Projects/src/4quorum_root\nINFO     2015-11-06 18:03:44,226 application_configuration.py:399] No version specified. Generated version id: 20151106t180344\nINFO     2015-11-06 18:03:44,226 devappserver2.py:763] Skipping SDK update check.\nINFO     2015-11-06 18:03:44,266 api_server.py:205] Starting API server at: http://localhost:62780\nINFO     2015-11-06 18:03:44,272 dispatcher.py:197] Starting module &quot;default&quot; running at: http://localhost:8080\nINFO     2015-11-06 18:03:44,277 admin_server.py:116] Starting admin server at: http://localhost:8000\nERROR    2015-11-06 18:03:44,282 instance.py:280] [Errno 2] No such file or directory\n</code></pre>\n<p>The same thing if trying dev_appserver.py</p>\n<h2>Deploy</h2>\n<p>Deploy also doesn't work. Fails because of timeout.</p>\n<pre><code>gcloud preview app deploy ./app.yaml\nWARNING: Soon, deployments will set the deployed version to receive all traffic by\n</code></pre>\n<p>default.</p>\n<pre><code>To keep the current behavior (where new deployments do not receive any traffic),\nuse the `--no-promote` flag or run the following command:\n\n  $ gcloud config set app/promote_by_default false\n\n To adopt the new behavior early, use the `--promote` flag or run the     following\ncommand:\n\n  $ gcloud config set app/promote_by_default true\n\n  Either passing one of the new flags or setting one of these properties will\n</code></pre>\n<p>silence this message.</p>\n<pre><code> You are about to deploy the following modules:\n - vaulted-gift-112113/default (from   [/Users/802619/Projects/src/4quorum_root/app.yaml])\n       Deployed URL: [https://20151106t204027-dot-vaulted-gift-      112113.appspot.com]\n (add --promote if you also want to make this module available from\n [https://vaulted-gift-112113.appspot.com])\n\nBeginning deployment...\nVerifying that Managed VMs are enabled and ready.\n\nProvisioning remote build service.\nCopying certificates for secure access. You may be prompted to create an SSH keypair.\nBuilding and pushing image for module [default]\nSaving [.dockerignore] to [/Users/802619/Projects/src/4quorum_root].\n----------------------------- DOCKER BUILD OUTPUT ------------------------------\nStep 0 : FROM golang:1.5.1\n---&gt; f6271e8f3723\nStep 1 : ADD . /go/\n---&gt; 94fafc5e8a30\nRemoving intermediate container cfbe197f6e93\nStep 2 : RUN go get github.com/revel/revel\n---&gt; Running in d7ad8c923144\n---&gt; b65877cf3049\nRemoving intermediate container d7ad8c923144\nStep 3 : RUN go get github.com/revel/cmd/revel\n---&gt; Running in 2a9b3320ce47\n---&gt; 428defd008f3\nRemoving intermediate container 2a9b3320ce47\nStep 4 : ENTRYPOINT revel run 4quorum-appengine dev 8080\n---&gt; Running in 8b9e38ec69ec\n---&gt; 3749ee8a6636\nRemoving intermediate container 8b9e38ec69ec\nStep 5 : EXPOSE 8080\n---&gt; Running in a0e6c66b56c8\n---&gt; dafff62b9643\nRemoving intermediate container a0e6c66b56c8\nSuccessfully built dafff62b9643\n--------------------------------------------------------------------------------\n\nCopying files to Google Cloud Storage...\nSynchronizing files to [gs://staging.vaulted-gift-112113.appspot.com/].\nUpdating module [default]...|Deleted      [https://www.googleapis.com/compute/v1/projects/vaulted-gift-  112113/zones/us-central1-f/instances/gae-builder-vm-20151106t204027].\n Updating module [default]...failed.\nERROR: (gcloud.preview.app.deploy) Error Response: [4] Timed out creating VMs.\n</code></pre>\n<p>About to drop this.</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 4, "last_activity_date": 1446830147, "last_edit_date": 1446830147, "creation_date": 1446829844, "answer_id": 33572046, "question_id": 33572004, "link": "https://stackoverflow.com/questions/33572004/golang-shadowing-behavior-explanation/33572046#33572046", "title": "Golang shadowing behavior explanation", "body": "<p><a href=\"https://golang.org/ref/spec#Declarations_and_scope\" rel=\"nofollow\">Go is lexically scoped using blocks</a>. In this example:</p>\n\n<pre><code>list := []string{\"a\", \"b\", \"c\"}\nfor {\n    list := repeat(list)\n</code></pre>\n\n<p>The second <code>list</code> shadows the first within the for block, and doesn't alter the outer <code>list</code> variable.</p>\n\n<p>Because the arguments to <code>repeat</code> are evaluated before the inner <code>list</code> is declared and assigned, <code>repeat</code> receives the value from the outer <code>list</code></p>\n"}, {"tags": [], "owner": {"reputation": 3400, "user_id": 91443, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/de6f578d9584573f6873d9110d85b47f?s=128&d=identicon&r=PG", "display_name": "pajato0", "link": "https://stackoverflow.com/users/91443/pajato0"}, "is_accepted": false, "score": 0, "last_activity_date": 1446841804, "creation_date": 1446841804, "answer_id": 33575218, "question_id": 33572004, "link": "https://stackoverflow.com/questions/33572004/golang-shadowing-behavior-explanation/33575218#33575218", "title": "Golang shadowing behavior explanation", "body": "<p>It's a tough crowd on SO.  The answer I was looking for was essentially that in the statement:</p>\n\n<pre><code>list := repeat(list)\n</code></pre>\n\n<p>the inner list variable is not in scope until the end of the statement whereas the outer list variable is in scope.  Here's what the spec has to say:</p>\n\n<blockquote>\n  <p>Go is lexically scoped using blocks:</p>\n  \n  <p>The scope of a predeclared identifier is the universe block. The scope\n  of an identifier denoting a constant, type, variable, or function (but\n  not method) declared at top level (outside any function) is the\n  package block. The scope of the package name of an imported package is\n  the file block of the file containing the import declaration. The\n  scope of an identifier denoting a method receiver, function parameter,\n  or result variable is the function body. <strong>The scope of a constant or\n  variable identifier declared inside a function begins at the end of\n  the ConstSpec or VarSpec (ShortVarDecl for short variable\n  declarations) and ends at the end of the innermost containing block.</strong>\n  The scope of a type identifier declared inside a function begins at\n  the identifier in the TypeSpec and ends at the end of the innermost\n  containing block.</p>\n</blockquote>\n\n<p>The highlighted text is the operational rationale that I missed in the first read.  Mea culpa. :-)</p>\n"}], "owner": {"reputation": 3400, "user_id": 91443, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/de6f578d9584573f6873d9110d85b47f?s=128&d=identicon&r=PG", "display_name": "pajato0", "link": "https://stackoverflow.com/users/91443/pajato0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2160, "favorite_count": 0, "closed_date": 1535034013, "accepted_answer_id": 33572046, "answer_count": 2, "score": -3, "last_activity_date": 1535034104, "creation_date": 1446829712, "last_edit_date": 1535034104, "question_id": 33572004, "link": "https://stackoverflow.com/questions/33572004/golang-shadowing-behavior-explanation", "closed_reason": "Duplicate", "title": "Golang shadowing behavior explanation", "body": "<p>In this snippet</p>\n\n<pre><code>    list := []string{\"a\", \"b\", \"c\"}\n    for {\n        list := repeat(list)\n...\n\n    func repeat(list []string) []string {\n...\n</code></pre>\n\n<p>it is clear that <code>list</code> variable used as the argument to <code>repeat()</code> function is the outer, shadowed list variable.  Now my question is, how would a Go language lawyer explain this behaviour?  At first glance, I thought the declaration of the inner list variable would have preceded the <code>repeat(list)</code> expression evaluation.</p>\n"}, {"tags": ["android", "go", "zeromq"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1446824123, "post_id": 33569399, "comment_id": 54918515, "body": "Do you check errors from <code>NewSocket</code>, <code>Bind</code> and <code>Send</code>?"}, {"owner": {"reputation": 971, "user_id": 2202757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/U5NGN.jpg?s=128&g=1", "display_name": "sh0umik", "link": "https://stackoverflow.com/users/2202757/sh0umik"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1446828363, "post_id": 33569399, "comment_id": 54921195, "body": "Can you be more specific, in Go I did not get any panic and I have tried try catch in java but nothing happens ."}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1446829430, "post_id": 33569399, "comment_id": 54921826, "body": "In Go functions and methods I&#39;ve mentioned return an <code>error</code>. You should always check it."}, {"owner": {"reputation": 971, "user_id": 2202757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/U5NGN.jpg?s=128&g=1", "display_name": "sh0umik", "link": "https://stackoverflow.com/users/2202757/sh0umik"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1446830722, "post_id": 33569399, "comment_id": 54922463, "body": "Just tried . No error . I think the problem is on the client Side . As i said i am able to connect using go"}, {"owner": {"reputation": 971, "user_id": 2202757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/U5NGN.jpg?s=128&g=1", "display_name": "sh0umik", "link": "https://stackoverflow.com/users/2202757/sh0umik"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1446882409, "post_id": 33569399, "comment_id": 54937772, "body": "However The Java code works fine in simple java project but not getting any output in case of android ."}], "owner": {"reputation": 971, "user_id": 2202757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/U5NGN.jpg?s=128&g=1", "display_name": "sh0umik", "link": "https://stackoverflow.com/users/2202757/sh0umik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1042, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1446821256, "creation_date": 1446821256, "question_id": 33569399, "link": "https://stackoverflow.com/questions/33569399/zeromq-pub-sub-not-receiving-messages-golang-as-server-android-as-client", "title": "Zeromq PUB SUB Not Receiving Messages ( Golang as Server Android as Client )", "body": "<p>I am running My Server Side Zeromq in Golang (PUB) . I am testing those features with the basic example provided. My Server is in Digitalocen Droplet . Its running fine . And I am able to connect and receive message on my local machine via Golang client as SUB but when I try the same logic in android then I get nothing . It stuck in the loop . And No errors.</p>\n\n<p>Server Side PUB : Golang</p>\n\n<pre><code>//\n//  Pubsub envelope publisher.\n//\n\npackage main\n\nimport (\n    zmq \"github.com/pebbe/zmq4\"\n    \"time\"\n)\n\nfunc main() {\n    //  Prepare our publisher\n    publisher, _ := zmq.NewSocket(zmq.PUB)\n    defer publisher.Close()\n    publisher.Bind(\"tcp://*:5563\")\n\n    for {\n        //  Write two messages, each with an envelope and content\n        publisher.Send(\"A\", zmq.SNDMORE)\n        publisher.Send(\"We don't want to see this\", 0)\n        publisher.Send(\"B\", zmq.SNDMORE)\n        publisher.Send(\"We would like to see this\", 0)\n        time.Sleep(time.Second)\n    }\n}\n</code></pre>\n\n<p>Client Side SUB : Android</p>\n\n<p>I also have the Internet Permission</p>\n\n<pre><code>package com.example.fahim.zeromq;\n\nimport android.os.AsyncTask;\nimport android.os.Bundle;\nimport android.support.design.widget.FloatingActionButton;\nimport android.support.design.widget.Snackbar;\nimport android.support.v7.app.AppCompatActivity;\nimport android.support.v7.widget.Toolbar;\nimport android.util.Log;\nimport android.view.View;\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.widget.TextView;\n\nimport org.zeromq.ZMQ;\n\npublic class MainActivity extends AppCompatActivity {\n\n    TextView output;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n\n        FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);\n        fab.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\n                        .setAction(\"Action\", null).show();\n            }\n        });\n\n        new Zconnect().execute();\n\n    }\n\n    private  class Zconnect extends AsyncTask&lt;Void, Void, Void&gt;{\n\n        @Override\n        protected Void doInBackground(Void... params) {\n\n            ZMQ.Context context = ZMQ.context(1);\n            ZMQ.Socket subscriber = context.socket(ZMQ.SUB);\n\n            subscriber.connect(\"tcp://server-ip:5563\");\n            subscriber.subscribe(\"A\".getBytes());\n            while (true) {\n                String string = new String(subscriber.recv(0));\n                Log.i(\"Message :\", string);\n                Log.i(\"Info :\", \"This line never shows.\");\n\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>What I came to realize that it can not get passed this line . I could not find the problem .</p>\n\n<pre><code> String string = new String(subscriber.recv(0));\n</code></pre>\n"}, {"tags": ["json", "go", "unmarshalling"], "comments": [{"owner": {"reputation": 5164, "user_id": 1461269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5507a725df760d1a9b0dd88505f8bd1?s=128&d=identicon&r=PG", "display_name": "arjabbar", "link": "https://stackoverflow.com/users/1461269/arjabbar"}, "edited": false, "score": 0, "creation_date": 1446821130, "post_id": 33569210, "comment_id": 54916594, "body": "In this situation, it seems more natural to change what the client is sending. Do you not have any control over that?"}, {"owner": {"reputation": 11, "user_id": 4998576, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zq859P2R2qg/AAAAAAAAAAI/AAAAAAAAADA/2F53wrmCWdE/photo.jpg?sz=128", "display_name": "j.J", "link": "https://stackoverflow.com/users/4998576/j-j"}, "reply_to_user": {"reputation": 5164, "user_id": 1461269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5507a725df760d1a9b0dd88505f8bd1?s=128&d=identicon&r=PG", "display_name": "arjabbar", "link": "https://stackoverflow.com/users/1461269/arjabbar"}, "edited": false, "score": 0, "creation_date": 1447011700, "post_id": 33569210, "comment_id": 54971530, "body": "its the jsonapi.org spec, but thanks for answering though"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4998576, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zq859P2R2qg/AAAAAAAAAAI/AAAAAAAAADA/2F53wrmCWdE/photo.jpg?sz=128", "display_name": "j.J", "link": "https://stackoverflow.com/users/4998576/j-j"}, "edited": false, "score": 0, "creation_date": 1447011906, "post_id": 33570194, "comment_id": 54971630, "body": "Thanks jimb, I like this and will give it a go.  qq - Do you think there will be an efficiency problem with this as you are trying to do something that will fail? While typing I now thinking I should&#39;t worry about such a small thing."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 2, "last_activity_date": 1557311074, "last_edit_date": 1557311074, "creation_date": 1446823833, "answer_id": 33570194, "question_id": 33569210, "link": "https://stackoverflow.com/questions/33569210/go-json-unmarshal-options/33570194#33570194", "title": "go json unmarshal options", "body": "<p>There's a number of ways to structure it, but the simplest technique comes down to implementing a <code>json.Unmarshaler</code>, and inspecting the type of the data. You can minimally parse the json bytes, often just the first character, or you can try to unmarshal into each type and return the one that succeeds.</p>\n\n<p>We'll use the latter technique here, and insert the ResourceData into a slice regardless of the incoming data's format, so we can always operate on it in the same manner:</p>\n\n<pre><code>type Resource struct {\n    Data []ResourceData\n}\n\nfunc (r *Resource) UnmarshalJSON(b []byte) error {\n    // this gives us a temporary location to unmarshal into\n    m := struct {\n        DataSlice struct {\n            Data []ResourceData `json:\"data\"`\n        }\n        DataStruct struct {\n            Data ResourceData `json:\"data\"`\n        }\n    }{}\n\n    // try to unmarshal the data with a slice\n    err := json.Unmarshal(b, &amp;m.DataSlice)\n    if err == nil {\n        log.Println(\"got slice\")\n        r.Data = m.DataSlice.Data\n        return nil\n    } else if err, ok := err.(*json.UnmarshalTypeError); !ok {\n        // something besides a type error occurred\n        return err\n    }\n\n    // try to unmarshal the data with a struct\n    err = json.Unmarshal(b, &amp;m.DataStruct)\n    if err != nil {\n        return err\n    }\n    log.Println(\"got struct\")\n\n    r.Data = append(r.Data, m.DataStruct.Data)\n    return nil\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/YIPeYv4AfT\" rel=\"nofollow noreferrer\">http://play.golang.org/p/YIPeYv4AfT</a></p>\n"}], "owner": {"reputation": 11, "user_id": 4998576, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zq859P2R2qg/AAAAAAAAAAI/AAAAAAAAADA/2F53wrmCWdE/photo.jpg?sz=128", "display_name": "j.J", "link": "https://stackoverflow.com/users/4998576/j-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "closed_date": 1446826116, "accepted_answer_id": 33570194, "answer_count": 1, "score": 0, "last_activity_date": 1557311074, "creation_date": 1446820638, "question_id": 33569210, "link": "https://stackoverflow.com/questions/33569210/go-json-unmarshal-options", "closed_reason": "Duplicate", "title": "go json unmarshal options", "body": "<p>Trying to find a simple solution to marshaling/unmashaling into the following struct</p>\n\n<pre><code>type Resource struct {\n    Data []ResourceData `json:\"data\"`\n}\ntype ResourceData struct {\n    Id string  `json:\"id\"`\n    Type string  `json:\"type\"`\n    Attributes map[string]interface{} `json:\"attributes\"`\n    Relationships map[string]Resource `json:\"relationships\"`\n}\nr := Resource{}\njson.Unmarshal(body, &amp;r)\n</code></pre>\n\n<p>this is great if:</p>\n\n<pre><code>body = `{\"data\":[{\"id\":\"1\",\"type\":\"blah\"}]}`\n</code></pre>\n\n<p>However I also need it to respond to:</p>\n\n<pre><code>body = `{\"data\":{\"id\":\"1\",\"type\":\"blah\"}}` //notice no slice\n</code></pre>\n\n<p>I could make a separate type</p>\n\n<pre><code>type ResourceSingle struct {\n    Data ResourceData `json:\"data\"`\n}\n</code></pre>\n\n<p>However, that would mean needing to duplicate all the functions I have attached to resource, which is possible. However, i would need to find out which type to unmarshal into before executing it, plus when it comes to the relationships part, each of those could contain data:[]{} or data{}, so that idea isn't going to work.</p>\n\n<p>Alternatively I could use </p>\n\n<pre><code>map[string]*json.RawMessage\n//or\ntype Resource struct {\n    Data *json.RawMessage `json:\"data\"`\n}\n</code></pre>\n\n<p>but still, when in json form how do I know if it is a slice or a node to supply the correct struct to unmarshal into?</p>\n\n<p>My last resort is to umarshal into map[string]interface and use lots of reflect testing .. but this is very long winded.</p>\n\n<p>Ideas?</p>\n\n<p>Kind regards, jJ</p>\n"}, {"tags": ["go", "synchronization", "consul"], "answers": [{"tags": [], "owner": {"reputation": 818, "user_id": 5292835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f2a5019f9a977706135c3f8246bba1?s=128&d=identicon&r=PG&f=1", "display_name": "mrd0ll4r", "link": "https://stackoverflow.com/users/5292835/mrd0ll4r"}, "is_accepted": false, "score": 1, "last_activity_date": 1446802067, "last_edit_date": 1446802067, "creation_date": 1446800962, "answer_id": 33563103, "question_id": 33562896, "link": "https://stackoverflow.com/questions/33562896/file-sync-between-n-web-servers-in-cluster/33563103#33563103", "title": "File sync between n web servers in cluster", "body": "<p>Yes, there has been some stuff going on with distributed synchronization lately:</p>\n\n<p>You could use <a href=\"https://syncthing.net\" rel=\"nofollow\">syncthing</a> (open source) or <a href=\"https://www.getsync.com\" rel=\"nofollow\">BitTorrent Sync</a>.</p>\n\n<p>Syncthing is node-based, i.e. you add nodes to a cluster and choose which folders to synchronize.</p>\n\n<p>BTSync is folder-based, i.e. you obtain a \"secret\" for a folder and can synchronize with everyone in the swarm for that folder.</p>\n\n<p>From my experience, BTSync has a better discovery and connectivity, but the whole synchronization process is closed source and nobody really knows what happens. Syncthing is written in go, but sometimes has trouble discovering peers.</p>\n\n<p>Both syncthing and BTSync use LAN discovery via broadcast and a tracker for discovery, AFAIK.</p>\n\n<p><strong>EDIT</strong>: Or, if you're really cool, use IPFS to host the latest version, IPNS to \"name\" that and mount the IPNS on the servers. You can set the IPFS bootstrap list to some of your servers, which would even make you independent of external trackers. :)</p>\n"}], "owner": {"reputation": 11533, "user_id": 1022177, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/BDTjr.jpg?s=128&g=1", "display_name": "Myles McDonnell", "link": "https://stackoverflow.com/users/1022177/myles-mcdonnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446802067, "creation_date": 1446800152, "question_id": 33562896, "link": "https://stackoverflow.com/questions/33562896/file-sync-between-n-web-servers-in-cluster", "title": "File sync between n web servers in cluster", "body": "<p>There are <em>n</em> nodes in a web cluster.  Files may be uploaded to any node and then must be distributed to every other node. This distribution does not have to happen in a transaction (in fact it must not, distributed transactions don't scale) and some latency is acceptable, although must be minimal.  Conflicts can be resolved arbitrarily (typically last write wins) provided that the resolution is also distributed to all nodes so that eventually all nodes have the same set of files.  Nodes can be added and removed dynamically without having to reconfigure existing nodes.  There must be no single point of failure and no additional boxes required to solve this (such as RabbitMQ)</p>\n\n<p>I am thinking along the lines of using consul.io for dynamic configuration so that each node can refer to consul to determine what other nodes are available and writing a daemon (Golang) that monitors the relevant folders and communicates with other nodes using ZeroMQ.  </p>\n\n<p>Feels like I would be re-inventing the wheel though.  This is a common problem and I expect there are solutions available already that I don't know about? Or perhaps my approach is wrong and there is another way to solve this?</p>\n"}, {"tags": ["post", "go"], "comments": [{"owner": {"reputation": 818, "user_id": 5292835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f2a5019f9a977706135c3f8246bba1?s=128&d=identicon&r=PG&f=1", "display_name": "mrd0ll4r", "link": "https://stackoverflow.com/users/5292835/mrd0ll4r"}, "edited": false, "score": 1, "creation_date": 1446796447, "post_id": 33561703, "comment_id": 54902135, "body": "You ignore every possible error, maybe you should check them."}, {"owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "reply_to_user": {"reputation": 818, "user_id": 5292835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f2a5019f9a977706135c3f8246bba1?s=128&d=identicon&r=PG&f=1", "display_name": "mrd0ll4r", "link": "https://stackoverflow.com/users/5292835/mrd0ll4r"}, "edited": false, "score": 0, "creation_date": 1446796686, "post_id": 33561703, "comment_id": 54902232, "body": "@mrd0ll4r what do you mean?"}, {"owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "reply_to_user": {"reputation": 818, "user_id": 5292835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f2a5019f9a977706135c3f8246bba1?s=128&d=identicon&r=PG&f=1", "display_name": "mrd0ll4r", "link": "https://stackoverflow.com/users/5292835/mrd0ll4r"}, "edited": false, "score": 0, "creation_date": 1446796721, "post_id": 33561703, "comment_id": 54902249, "body": "@mrd0ll4r I think the problem is wrong with my request data"}, {"owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "reply_to_user": {"reputation": 818, "user_id": 5292835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f2a5019f9a977706135c3f8246bba1?s=128&d=identicon&r=PG&f=1", "display_name": "mrd0ll4r", "link": "https://stackoverflow.com/users/5292835/mrd0ll4r"}, "edited": false, "score": 0, "creation_date": 1446796842, "post_id": 33561703, "comment_id": 54902306, "body": "@mrd0ll4r I test check the error just now, no erors"}, {"owner": {"reputation": 818, "user_id": 5292835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f2a5019f9a977706135c3f8246bba1?s=128&d=identicon&r=PG&f=1", "display_name": "mrd0ll4r", "link": "https://stackoverflow.com/users/5292835/mrd0ll4r"}, "edited": false, "score": 0, "creation_date": 1446797128, "post_id": 33561703, "comment_id": 54902433, "body": "If you get a <code>5xx</code> code response from the server, the server has encountered an internal error. As I see, the server runs locally, maybe a look at the server (or server logs) could tell you more about the problem?"}], "answers": [{"comments": [{"owner": {"reputation": 805, "user_id": 4387819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nvj4Ncdl4Ak/AAAAAAAAAAI/AAAAAAAAADY/jenBFmM_J8M/photo.jpg?sz=128", "display_name": "Jiayu Wang", "link": "https://stackoverflow.com/users/4387819/jiayu-wang"}, "edited": false, "score": 0, "creation_date": 1446797133, "post_id": 33562081, "comment_id": 54902436, "body": "and resp, err := http.PostForm(&quot;<a href=\"http://example.com/form\" rel=\"nofollow noreferrer\">example.com/form</a>&quot;, \turl.Values{&quot;key&quot;: {&quot;Value&quot;}, &quot;id&quot;: {&quot;123&quot;}})"}], "tags": [], "owner": {"reputation": 805, "user_id": 4387819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nvj4Ncdl4Ak/AAAAAAAAAAI/AAAAAAAAADY/jenBFmM_J8M/photo.jpg?sz=128", "display_name": "Jiayu Wang", "link": "https://stackoverflow.com/users/4387819/jiayu-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1446797055, "creation_date": 1446797055, "answer_id": 33562081, "question_id": 33561703, "link": "https://stackoverflow.com/questions/33561703/go-send-post-request/33562081#33562081", "title": "Go send post request?", "body": "<p>You don't need to set the \"Content-Length\", and instead i think you need to set the \"host\" attribute. </p>\n"}, {"tags": [], "owner": {"reputation": 818, "user_id": 5292835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f2a5019f9a977706135c3f8246bba1?s=128&d=identicon&r=PG&f=1", "display_name": "mrd0ll4r", "link": "https://stackoverflow.com/users/5292835/mrd0ll4r"}, "is_accepted": true, "score": 3, "last_activity_date": 1446798036, "creation_date": 1446798036, "answer_id": 33562306, "question_id": 33561703, "link": "https://stackoverflow.com/questions/33561703/go-send-post-request/33562306#33562306", "title": "Go send post request?", "body": "<p>The Request bodies are not the same:</p>\n\n<p>In curl, you send <code>{\"inputs\": [{\"desc\":\"program\",\"ind\":\"14\",\"p\":\"program\"}]}</code></p>\n\n<p>In go, you send <code>inputs=%7B%22desc%22%3A%22program%22%2C%22ind%22%3A%2214%22%2C%22p%22%3A%22program%22%7D</code> which URLDecodes to <code>inputs={\"desc\":\"program\",\"ind\":\"14\",\"p\":\"program\"}</code>.</p>\n\n<p>So, what you should probably do is something like this:</p>\n\n<pre><code>type body struct {\n    Inputs []input `json:\"input\"`\n}\n\ntype input struct {\n    Desc string `json:\"desc\"`\n    Ind  string `json:\"ind\"`\n    P    string `json:\"p\"`\n}\n</code></pre>\n\n<p>Then create a <code>body</code>:</p>\n\n<pre><code>b := body{\n    Inputs: []input{\n        {\n            Desc: \"program\",\n            Ind:  \"14\",\n            P:    \"program\"},\n        },\n}\n</code></pre>\n\n<p>Encode that:</p>\n\n<pre><code>q, err := json.Marshal(b)\nif err != nil {\n    panic(err)\n}\n</code></pre>\n\n<p>You should obviously not panic, this is just for demonstration. Anyways, a <code>string(q)</code> will get you <code>{\"input\":[{\"desc\":\"program\",\"ind\":\"14\",\"p\":\"program\"}]}</code>.</p>\n\n<p>Try it on the <a href=\"http://play.golang.org/p/uAKp18oiGq\" rel=\"nofollow\">Playground</a></p>\n"}], "owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 33562306, "answer_count": 2, "score": 2, "last_activity_date": 1459895710, "creation_date": 1446795470, "last_edit_date": 1459895710, "question_id": 33561703, "link": "https://stackoverflow.com/questions/33561703/go-send-post-request", "title": "Go send post request?", "body": "<p>I want to send <code>POST</code> request with Go, the request with curl is as follow:</p>\n\n<pre><code>curl 'http://192.168.1.50:18088/' -d '{\"inputs\": [{\"desc\":\"program\",\"ind\":\"14\",\"p\":\"program\"}]}'\n</code></pre>\n\n<p>I do this with Go like this:</p>\n\n<pre><code>jobCateUrl := \"http://192.168.1.50:18088/\"\n\ndata := url.Values{}\nqueryMap := map[string]string{\"p\": \"program\", \"ind\": \"14\", \"desc\": \"program\"}\nq, _ := json.Marshal(queryMap)\ndata.Add(\"inputs\", string(q))\n\nclient := &amp;http.Client{}\nr, _ := http.NewRequest(\"POST\", jobCateUrl, strings.NewReader(data.Encode()))\nr.Header.Add(\"Content-Type\", \"application/x-www-form-urlencoded\")\nr.Header.Add(\"Content-Length\", strconv.Itoa(len(data.Encode())))\n\nresp, _ := client.Do(r)\nfmt.Println(resp)\n</code></pre>\n\n<p>but I failed, got <code>500 error</code>, what wrong with this?</p>\n"}, {"tags": ["xml", "go", "nested", "unmarshalling"], "comments": [{"owner": {"reputation": 3447, "user_id": 5244653, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9412ec207649931753eb77f7afca2599?s=128&d=identicon&r=PG&f=1", "display_name": "Brick", "link": "https://stackoverflow.com/users/5244653/brick"}, "edited": false, "score": 2, "creation_date": 1446769904, "post_id": 33557401, "comment_id": 54894341, "body": "I don&#39;t see a question here...."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1446772860, "post_id": 33557401, "comment_id": 54895120, "body": "You&#39;re ignoring the error from unmarshal, you&#39;re trying to unmarshal a date into an int, and the <code>datevalues</code> field isn&#39;t exported so it&#39;s not seen by the xml package."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5531554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d41221da085063090b902faad06781b?s=128&d=identicon&r=PG&f=1", "display_name": "Tracy J", "link": "https://stackoverflow.com/users/5531554/tracy-j"}, "edited": false, "score": 0, "creation_date": 1446846274, "post_id": 33560897, "comment_id": 54930286, "body": "Thanks for the response.  I didn&#39;t realize that the fields within the struct had to be exported in order to work."}], "tags": [], "owner": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "is_accepted": false, "score": 8, "last_activity_date": 1446793487, "last_edit_date": 1495541962, "creation_date": 1446791932, "answer_id": 33560897, "question_id": 33557401, "link": "https://stackoverflow.com/questions/33557401/unmarshal-nested-xml-with-go/33560897#33560897", "title": "Unmarshal Nested xml with Go", "body": "<p><strong>First</strong>  of all your code doesn't work because you should use <strong>exported</strong> fields for marshalling/unmarshalling (see <a href=\"https://golang.org/pkg/encoding/xml/\" rel=\"noreferrer\">https://golang.org/pkg/encoding/xml/</a>).<br>\nYou should use </p>\n\n<pre><code>type pv struct {\n    XMLName    xml.Name  `xml:\"series\"`\n    Unit       string    `xml:\"unit\"`\n    Datevalues datevalue `xml:\"values&gt;dateValue\"`\n}\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>type pv struct {\n    XMLName    xml.Name  `xml:\"series\"`\n    Unit       string    `xml:\"unit\"`\n    datevalues datevalue `xml:\"values&gt;dateValue\"`\n}\n</code></pre>\n\n<p>Look at DateValues field name. If first symbol is uppercased it's will be exported. Otherwise that field will be ignored while <code>Unmarshal</code></p>\n\n<p><strong>Second:</strong></p>\n\n<p>After it I noticed that you are ignoring your errors. Please don't ignore them, they are critically useful.</p>\n\n<p>Check it out on the <kbd><a href=\"http://play.golang.org/p/6vqtSRhRcv\" rel=\"noreferrer\">go playgroung</a></kbd></p>\n\n<p>As you can see you use <code>int</code> datatype for <code>Date</code> field of <code>datatype</code>.\nIf you change type to <code>string</code>, your code will work.</p>\n\n<p><strong>Third:</strong></p>\n\n<p>I think you really want to unmarshall your <code>date</code> value into <code>time.Time</code>.<br>\nTo do so you can check <a href=\"https://stackoverflow.com/questions/17301149/golang-xml-unmarshal-and-time-time-fields\">this related question</a> </p>\n\n<p>The complete working code you can try on the <kbd><a href=\"http://play.golang.org/p/l8qdPXy2KR\" rel=\"noreferrer\">go playground</a></kbd></p>\n"}], "owner": {"reputation": 21, "user_id": 5531554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d41221da085063090b902faad06781b?s=128&d=identicon&r=PG&f=1", "display_name": "Tracy J", "link": "https://stackoverflow.com/users/5531554/tracy-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5854, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1446802193, "creation_date": 1446769803, "last_edit_date": 1446802193, "question_id": 33557401, "link": "https://stackoverflow.com/questions/33557401/unmarshal-nested-xml-with-go", "title": "Unmarshal Nested xml with Go", "body": "<p>I have the following snippet of code that I have been banging my head on the wall trying to make it work.  I have searched everywhere for a solution, but none of the ones that I have found seem to work.  </p>\n\n<p>It seems that I have an issue with my mapping for the <code>xml.Unmarshal</code> command as it pertains to nested fields.  The code below works for retrieving the first value which is called <code>unit</code>, and is on the top level of the xml code.  </p>\n\n<p>The other two fields come up as zero, and they are nested two level deep.  That implies that the structure isn't set up correctly.  Here is the code.</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/xml\"\n    \"fmt\"\n)\n\ntype datevalue struct {\n    Date  int     `xml:\"date\"`\n    Value float32 `xml:\"value\"`\n}\n\ntype pv struct {\n    XMLName    xml.Name  `xml:\"series\"`\n    Unit       string    `xml:\"unit\"`\n    datevalues datevalue `xml:\"values&gt;dateValue\"`\n}\n\nfunc main() {\n    contents := `&lt;series&gt;\n                   &lt;timeUnit&gt;DAY&lt;/timeUnit&gt;\n                   &lt;unit&gt;Wh&lt;/unit&gt;&lt;measuredBy&gt;INVERTER&lt;/measuredBy&gt;\n                   &lt;values&gt;&lt;dateValue&gt;\n                        &lt;date&gt;2015-11-04 00:00:00&lt;/date&gt;\n                        &lt;value&gt;5935.405&lt;/value&gt;\n                   &lt;/dateValue&gt;&lt;/values&gt;\n                &lt;/series&gt;`\n\n    m := &amp;pv{}\n    xml.Unmarshal([]byte(contents), &amp;m)\n    fmt.Printf(\"%s %f %d\\n\", m.Unit, m.datevalues.Value, m.datevalues.Date)\n}\n</code></pre>\n\n<p>And here is the output:</p>\n\n<pre><code>Wh 0.000000 0\n</code></pre>\n"}, {"tags": ["macos", "go", "docker", "boot2docker", "docker-machine"], "comments": [{"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 0, "creation_date": 1446757629, "post_id": 33553993, "comment_id": 54889171, "body": "did you check and ensure that GOPATH is set right in the container?  you may be seeing a OSX compiled version from your mac into the container if GOPATH isn&#39;t set.  look in the dir of the package you are explicitly compiling, see if binary is there.  maybe a simple -o /binname will work"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1446757851, "post_id": 33553993, "comment_id": 54889299, "body": "You&#39;re going to have to show the steps you&#39;re using to do this, because it doesn&#39;t really make sense. Re #2, binaries are only static by default if there&#39;s no cgo, and the stdlib links to libc for name resolution and user lookup."}, {"owner": {"reputation": 381, "user_id": 1148266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/120ab1b6201bbab8beacf79b623e2604?s=128&d=identicon&r=PG", "display_name": "rking788", "link": "https://stackoverflow.com/users/1148266/rking788"}, "edited": false, "score": 0, "creation_date": 1446758865, "post_id": 33553993, "comment_id": 54889860, "body": "Added an edit including the docker build command, hopefully it helps and doesn&#39;t make it more confusing."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1446759618, "post_id": 33553993, "comment_id": 54890316, "body": "docker-machine is running a Linux host, and environment variables aren&#39;t transferred. Have you just printed out GOOS and GOARCH from within the container to make sure you haven&#39;t set those somewhere? (<code>docker run mybuild_img:latest go env</code>)"}, {"owner": {"reputation": 381, "user_id": 1148266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/120ab1b6201bbab8beacf79b623e2604?s=128&d=identicon&r=PG", "display_name": "rking788", "link": "https://stackoverflow.com/users/1148266/rking788"}, "edited": false, "score": 0, "creation_date": 1446779820, "post_id": 33553993, "comment_id": 54896969, "body": "i didn&#39;t think to print the <code>go env</code> but i did add <code>&amp;&amp; echo $GOARCH &amp;&amp; echo $GOOS</code> at the beginning of the command and they were unset (before explicitly adding them in the workaround i mentioned in my edit.)"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1446820743, "post_id": 33553993, "comment_id": 54916384, "body": "You need to walk through the entire process you used to created <code>mybuild_img</code>, and/or add some more debugging to the build. I created a container from golang:1.5.1, then used it to build and copy a binary to a volume on OSX, and got an ELF binary as expected."}, {"owner": {"reputation": 381, "user_id": 1148266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/120ab1b6201bbab8beacf79b623e2604?s=128&d=identicon&r=PG", "display_name": "rking788", "link": "https://stackoverflow.com/users/1148266/rking788"}, "edited": false, "score": 0, "creation_date": 1446826808, "post_id": 33553993, "comment_id": 54920241, "body": "Not sure what changed between yesterday and today, but i just went to run the commands again to copy them here to show exactly what i was doing and now i am getting an ELF binary. Wish I knew what was wrong yesterday but at least it is working as expected now. Thanks for the help."}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 1148266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/120ab1b6201bbab8beacf79b623e2604?s=128&d=identicon&r=PG", "display_name": "rking788", "link": "https://stackoverflow.com/users/1148266/rking788"}, "edited": false, "score": 0, "creation_date": 1446826829, "post_id": 33568358, "comment_id": 54920251, "body": "This works great. Thanks for your help and sharing that link."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1446827609, "post_id": 33568358, "comment_id": 54920747, "body": "This does not &quot;roll&quot; any linked libraries into your executable. This uses a native go implementation when available (i.e. dns name resolution), or disables the functionality (i.e. user lookups and locating ssl certs on OSX)"}], "tags": [], "owner": {"reputation": 191, "user_id": 4074586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b8eaeb188788da55f046402d6e9277?s=128&d=identicon&r=PG&f=1", "display_name": "Diablojoe", "link": "https://stackoverflow.com/users/4074586/diablojoe"}, "is_accepted": true, "score": 2, "last_activity_date": 1446817810, "creation_date": 1446817810, "answer_id": 33568358, "question_id": 33553993, "link": "https://stackoverflow.com/questions/33553993/golang-binary-built-inside-docker-container-still-mach-o-executable-format/33568358#33568358", "title": "Golang binary built inside Docker container, still Mach-O executable format?", "body": "<p>It looks like you are still binding to some C libraries. This is a common problem when moving a Go executable to a super minimal container. You can roll these bound libraries into your executable by changing \n<code>go build</code>\n to\n<code>CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main .</code> You can find some more information on this problem and how it relates to minimal docker builds at <a href=\"https://blog.codeship.com/building-minimal-docker-containers-for-go-applications/\" rel=\"nofollow\">Codeship's blog</a>.</p>\n"}], "owner": {"reputation": 381, "user_id": 1148266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/120ab1b6201bbab8beacf79b623e2604?s=128&d=identicon&r=PG", "display_name": "rking788", "link": "https://stackoverflow.com/users/1148266/rking788"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 0, "accepted_answer_id": 33568358, "answer_count": 1, "score": 3, "last_activity_date": 1446817810, "creation_date": 1446754645, "last_edit_date": 1446758751, "question_id": 33553993, "link": "https://stackoverflow.com/questions/33553993/golang-binary-built-inside-docker-container-still-mach-o-executable-format", "title": "Golang binary built inside Docker container, still Mach-O executable format?", "body": "<p>I could really use some help here. What I am trying to do is use the standard golang:1.5 Docker image to build a Go binary, then copy that binary out of the container and into a new minimal Docker container based on busybox. The binary is pulled out of the container using a Docker mounted volume. There are two problems so far that I have run into. </p>\n\n<ol>\n<li><p>The resulting binary on the host (and subsequently copied into the second container) still seems to be a Mach-O 64-bit executable when running the <code>file</code> command. Is the Docker container somehow getting GOOS and GOARCH from the host?</p></li>\n<li><p>When manually running the container with <code>bash</code> and building the Go binary, it now says it is an ELF executable but it is dynamically linked. I thought by default built statically linked binaries? I could just be wrong in this assumption.</p></li>\n</ol>\n\n<p>Thanks in advance for any help you can provide. </p>\n\n<p>EDIT: Here are the commands I am using. Hopefully this makes it a bit more clear</p>\n\n<pre><code>## golang:1.5 base image with WORKDIR set to $GOPATH/src/myproject the source\n## for the project was added in when creating the 'mybuild_img' docker image\n## GOPATH is set automatically in the golang image.\ndocker run -i -v `pwd`/jenkins/out:$GOPATH/src/myproject/jenkins/out mybuild_img:latest bash -c 'go build &amp;&amp; cp myproject ./jenkins/out'\n</code></pre>\n\n<p>Once the container is done running I have a Mach-O 64-bit executable in ./jenkins/out/. I'm not sure if this is some kind of weird behavior with docker-machine/boot2docker or anything like that. Just seems really weird. I have confirmed that if i set <code>GOOS=linux GOARCH=amd64</code> before the <code>go build</code> command, then I do get an executable of the correct type. Just trying to figure out what is going on here.</p>\n"}, {"tags": ["ssl", "go", "revel"], "answers": [{"comments": [{"owner": {"reputation": 597, "user_id": 3731722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000181698389/picture?type=large", "display_name": "vinniyo", "link": "https://stackoverflow.com/users/3731722/vinniyo"}, "edited": false, "score": 0, "creation_date": 1446843803, "post_id": 33563755, "comment_id": 54929234, "body": "This worked without any changes to your code.  A note for others to import the net/http and fmt after placing the above code in the func init(). Thank you!"}], "tags": [], "owner": {"reputation": 1101, "user_id": 757102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60bb12c55b318f541cb55c7eeb6bec8f?s=128&d=identicon&r=PG", "display_name": "Colin Nicholson", "link": "https://stackoverflow.com/users/757102/colin-nicholson"}, "is_accepted": true, "score": 5, "last_activity_date": 1446803007, "creation_date": 1446803007, "answer_id": 33563755, "question_id": 33553583, "link": "https://stackoverflow.com/questions/33553583/revel-doesnt-forward-to-port-443-when-ssl-enabled/33563755#33563755", "title": "Revel doesn&#39;t forward to port 443 when SSL enabled", "body": "<p>You could add a simple redirect handler yourself.</p>\n\n<p>Try putting this in your <code>app/init.go</code> file:</p>\n\n<pre><code>httpRedirectServer := &amp;http.Server{Addr: \":80\", Handler: http.HandlerFunc(\n    func(w http.ResponseWriter, r *http.Request) {\n        http.Redirect(w, r, fmt.Sprintf(\"https://%s%s\", r.Host, r.RequestURI), \n                      http.StatusMovedPermanently)\n    })}\ngo httpRedirectServer.ListenAndServe()\n</code></pre>\n\n<p>Note that in Revel's dev mode, you'll first have to access your app on port 443 to have Revel start up properly before your port 80 redirect code will be run.</p>\n"}], "owner": {"reputation": 597, "user_id": 3731722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000181698389/picture?type=large", "display_name": "vinniyo", "link": "https://stackoverflow.com/users/3731722/vinniyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 2, "accepted_answer_id": 33563755, "answer_count": 1, "score": 3, "last_activity_date": 1446803007, "creation_date": 1446753191, "question_id": 33553583, "link": "https://stackoverflow.com/questions/33553583/revel-doesnt-forward-to-port-443-when-ssl-enabled", "title": "Revel doesn&#39;t forward to port 443 when SSL enabled", "body": "<p>I'm using Revel for a small app and added SSL. When I update the config to point to http.port = 443, requests to port 80 are rejected instead of being forwarded. Is there a way to fix this on the Revel Framework? Thank you.</p>\n\n<pre><code># The port on which to listen.\nhttp.port = 443\n\n# Whether to use SSL or not.\nhttp.ssl = true\n\n# Path to an X509 certificate file, if using SSL.\nhttp.sslcert = /root/go/src/saml/AlphaCerts/cert.crt\n\n# Path to an X509 certificate key, if using SSL.\nhttp.sslkey = /root/go/src/saml/star_home_com.key\n</code></pre>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "is_accepted": false, "score": 3, "last_activity_date": 1446751351, "creation_date": 1446751351, "answer_id": 33553029, "question_id": 33552924, "link": "https://stackoverflow.com/questions/33552924/trim-multiple-characters-to-right-of-final-slash-including-slash/33553029#33553029", "title": "Trim multiple characters to right of final slash including slash", "body": "<p>Try <code>output := mystr[:strings.LastIndex(mystr, \"/\")]</code></p>\n\n<pre><code>mystr := \"/this/is/my/path\" \nidx := strings.LastIndex(mystr, \"/\")\nif idx != -1{\n  mystr = mystr[:idx]\n}\n\nfmt.Println(mystr)\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/OJUQQ3kdQp\" rel=\"nofollow\">playground link</a></p>\n"}, {"tags": [], "owner": {"reputation": 18961, "user_id": 1094941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gVU2.jpg?s=128&g=1", "display_name": "mna", "link": "https://stackoverflow.com/users/1094941/mna"}, "is_accepted": true, "score": 3, "last_activity_date": 1446755068, "creation_date": 1446755068, "answer_id": 33554089, "question_id": 33552924, "link": "https://stackoverflow.com/questions/33552924/trim-multiple-characters-to-right-of-final-slash-including-slash/33554089#33554089", "title": "Trim multiple characters to right of final slash including slash", "body": "<p>captncraig's answer works for any type of separator char, but assuming you are running on a POSIX-style machine (\"/\" is the path separator) and what you are manipulating are indeed paths:</p>\n\n<p><a href=\"http://play.golang.org/p/oQbXTEhH30\" rel=\"nofollow\">http://play.golang.org/p/oQbXTEhH30</a></p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"path/filepath\"\n)\n\nfunc main() {\n    s := \"/this/is/my/path\"\n    fmt.Println(filepath.Dir(s))\n\n    // Output: /this/is/my\n}\n</code></pre>\n\n<p>From the godoc (<a href=\"https://golang.org/pkg/path/filepath/#Dir\" rel=\"nofollow\">https://golang.org/pkg/path/filepath/#Dir</a>):</p>\n\n<blockquote>\n  <p>Dir returns all but the last element of path, typically the path's directory. After dropping the final element, the path is Cleaned and trailing slashes are removed.</p>\n</blockquote>\n\n<p>Though if you run it with <code>/path</code>, it will return <code>/</code>, which may or may not be what you want.</p>\n"}, {"tags": [], "owner": {"reputation": 875, "user_id": 233523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uxHAA.jpg?s=128&g=1", "display_name": "Brian Gerard", "link": "https://stackoverflow.com/users/233523/brian-gerard"}, "is_accepted": false, "score": 0, "last_activity_date": 1446836810, "last_edit_date": 1446836810, "creation_date": 1446827874, "answer_id": 33571488, "question_id": 33552924, "link": "https://stackoverflow.com/questions/33552924/trim-multiple-characters-to-right-of-final-slash-including-slash/33571488#33571488", "title": "Trim multiple characters to right of final slash including slash", "body": "<p>One corner case not covered by the previous (quite satisfactory) solutions is that of a trailing <code>/</code>.  Ie - if you wanted <code>/foo/bar/quux/</code> trimmed to <code>/foo/bar</code> rather than <code>/foo/bar/quux</code>.  That can be accomplished with the <code>regexp</code> library:</p>\n\n<pre><code>mystr := \"/this/is/my/path/\"\ntrimpattern := regexp.MustCompile(\"^(.*?)/[^/]*/?$\")\nnewstr := trimpattern.ReplaceAllString(mystr, \"$1\")\n\nfmt.Println(newstr)\n</code></pre>\n\n<p>There's a bit fuller example here: <a href=\"http://play.golang.org/p/ii-svpbaHt\" rel=\"nofollow\">http://play.golang.org/p/ii-svpbaHt</a></p>\n"}], "owner": {"reputation": 35121, "user_id": 577455, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2f5b02182d3fa5ca4afeb39c32f09953?s=128&d=identicon&r=PG", "display_name": "Leahcim", "link": "https://stackoverflow.com/users/577455/leahcim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "accepted_answer_id": 33554089, "answer_count": 3, "score": 0, "last_activity_date": 1446836810, "creation_date": 1446750895, "last_edit_date": 1446751304, "question_id": 33552924, "link": "https://stackoverflow.com/questions/33552924/trim-multiple-characters-to-right-of-final-slash-including-slash", "title": "Trim multiple characters to right of final slash including slash", "body": "<p>Golang doesn't have the <code>strrchr</code> function that php does. If I want to remove <code>/path</code> (including the final slash) from this string, how does one do it in golang?</p>\n\n<pre><code> mystr := \"/this/is/my/path\" \n</code></pre>\n\n<p>Desired output</p>\n\n<pre><code>\"/this/is/my\"\n</code></pre>\n\n<p>I can get the index of the final slash like this</p>\n\n<pre><code>lastSlash := strings.LastIndex(mystr, \"/\")\n</code></pre>\n\n<p>but I'm not sure how to create a new string with <code>/path</code> removed. How to do that?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1446774858, "post_id": 33552504, "comment_id": 54895679, "body": "how about invoke the system unzip command, some kind of ugly."}, {"owner": {"reputation": 99, "user_id": 2637522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f1810c5e4b326854c64d804af00ad3a?s=128&d=identicon&r=PG", "display_name": "sintanial", "link": "https://stackoverflow.com/users/2637522/sintanial"}, "reply_to_user": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1446887383, "post_id": 33552504, "comment_id": 54938835, "body": "I replace return error <a href=\"https://github.com/golang/go/blob/master/src/archive/zip/reader.go#L270\" rel=\"nofollow noreferrer\">github.com/golang/go/blob/master/src/archive/zip/reader.go#L&zwnj;&#8203;270</a> to           size = unit16(len(b))  and archive worked fine :)"}, {"owner": {"reputation": 107, "user_id": 1422248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b5d28b6dd5173dffb1b9fa9350d17ad4?s=128&d=identicon&r=PG", "display_name": "matheus", "link": "https://stackoverflow.com/users/1422248/matheus"}, "edited": false, "score": 0, "creation_date": 1595511674, "post_id": 33552504, "comment_id": 111505398, "body": "@sintanial have you opened an issue at <a href=\"https://github.com/golang/go/issues\" rel=\"nofollow noreferrer\">github.com/golang/go/issues</a>?"}], "owner": {"reputation": 99, "user_id": 2637522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f1810c5e4b326854c64d804af00ad3a?s=128&d=identicon&r=PG", "display_name": "sintanial", "link": "https://stackoverflow.com/users/2637522/sintanial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1220, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446749536, "creation_date": 1446749536, "question_id": 33552504, "link": "https://stackoverflow.com/questions/33552504/apk-unzipping-not-a-valid-zip-file-but-unzip-worked-perfect", "title": "Apk unzipping. Not a valid zip file, but unzip worked perfect", "body": "<p>I have problem with golang zip reader. We have apk builder which build apk and then encrypted this apk with dex protector.</p>\n\n<p>When i try to open apk file, go return err \"zip: not a valid zip file\". But when i try to open with unzip or zipinfo, worked fine.<br>\n(Also I noticed something interesting: in php 5.5 apk file opened with ZipArchive fine, but in 5.6 return error like golang)</p>\n\n<p>I try open to debug golang archive/zip pckage and found that error returned in this line <a href=\"https://github.com/golang/go/blob/master/src/archive/zip/reader.go#L269\" rel=\"nofollow\">https://github.com/golang/go/blob/master/src/archive/zip/reader.go#L269</a>.</p>\n\n<p>Then i try to debug this line like this:</p>\n\n<pre><code>fmt.Printf(\"%+v\", f)\nfmt.Println(\n    \"len(f.Extra):\", len(f.Extra),\n    \"len(b):\", len(b),\n    \"tag:\", tag,\n    \"size:\", size,\n)\n</code></pre>\n\n<p>And have this results:</p>\n\n<pre><code>&amp;{FileHeader:{\nName:META-INF/MANIFEST.MF CreatorVersion:20 ReaderVersion:20 Flags:2056 Method:8 \nModifiedTime:23093 ModifiedDate:18230 CRC32:2569174240 \nCompressedSize:359 UncompressedSize:570 CompressedSize64:359 UncompressedSize64:570 \nExtra:[] ExternalAttrs:0 Comment:\n} zipr:0xc208038038 zipsize:276893 headerOffset:0}\n\n&amp;{FileHeader:{\nName:res/drawable/ic_launcher.png CreatorVersion:10 ReaderVersion:10 Flags:2048 Method:0 \nModifiedTime:22030 ModifiedDate:18230 CRC32:2310989215 \nCompressedSize:20418 UncompressedSize:20418 CompressedSize64:20418 UncompressedSize64:20418\nExtra:[] ExternalAttrs:0 Comment:\n} zipr:0xc208038038 zipsize:276893 headerOffset:2066}\n\n...\n\n----------------&gt;PROBLEM HERE:-------------------=&gt;\n&amp;{FileHeader:{\nName:AndroidManifest.xml CreatorVersion:10 ReaderVersion:10 Flags:2048 Method:0 \nModifiedTime:22030 ModifiedDate:18230 CRC32:1929033187 \nCompressedSize:7268 UncompressedSize:7268 CompressedSize64:7268 UncompressedSize64:7268 \nExtra:[204 94 136 27 148 14 49 95 154 4 231 53 127 242 4 199 243 207 229 161 103 90 116 69 45 31 54 220 113 43 172 4 159 109 211 57 217 2 161 17 196 16 168 19 174 138 107 15 36 181 223 22 15 21 106 153] \nExternalAttrs:0 Comment:\n} zipr:0xc208038038 zipsize:276893 headerOffset:22954}\n\nlen(f.Extra): 56\nlen(b): 52\ntag: 24268 \nsize: 7048 \n</code></pre>\n\n<p>Problem in extra headers (i think this extra headers add dex protector when encrypt apk). Size more then length of extra bytes.\nBut unzip util and ZipArchive in php5.5 woked perfect with this extras. How to fix this ?</p>\n\n<p>I want to rewrite this piece in go archive/zip package, so that the extras do not interfere golang zip reader.</p>\n\n<p>It's very important for me, because i rewrite build apk from php to golang and I came across a problem that can not decide :(. Please help me.</p>\n"}, {"tags": ["intellij-idea", "go"], "comments": [{"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 0, "creation_date": 1446745996, "post_id": 33551338, "comment_id": 54882459, "body": "Can you correctly use <code>go build</code> in the project directory using the command-line ?"}, {"owner": {"reputation": 7718, "user_id": 225885, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/pKYBo.jpg?s=128&g=1", "display_name": "jim", "link": "https://stackoverflow.com/users/225885/jim"}, "reply_to_user": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 0, "creation_date": 1446747804, "post_id": 33551338, "comment_id": 54883472, "body": "Yea, that&#39;s what i&#39;ve fallen back to. I just run from terminal right now. Annoying though."}, {"owner": {"reputation": 1366, "user_id": 4931643, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/702807200eaef92e4d1c6896893d7888?s=128&d=identicon&r=PG&f=1", "display_name": "Mbded", "link": "https://stackoverflow.com/users/4931643/mbded"}, "edited": false, "score": 1, "creation_date": 1446753349, "post_id": 33551338, "comment_id": 54886672, "body": "If I good understood You (probably)... Do You try in Intellij run Your project as package ? <a href=\"http://stackoverflow.com/questions/32508254/go-in-intellij-idea-multiple-file-and-error-undefined-data/32509574#32509574\" title=\"go in intellij idea multiple file and error undefined data\">stackoverflow.com/questions/32508254/&hellip;</a>   I also have this same problem when I started with this IDE"}, {"owner": {"reputation": 7718, "user_id": 225885, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/pKYBo.jpg?s=128&g=1", "display_name": "jim", "link": "https://stackoverflow.com/users/225885/jim"}, "edited": false, "score": 0, "creation_date": 1446760078, "post_id": 33551338, "comment_id": 54890587, "body": "Hmm, thanks. That&#39;s strange it works. I wonder why it worked before?"}, {"owner": {"reputation": 7718, "user_id": 225885, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/pKYBo.jpg?s=128&g=1", "display_name": "jim", "link": "https://stackoverflow.com/users/225885/jim"}, "edited": false, "score": 0, "creation_date": 1446760089, "post_id": 33551338, "comment_id": 54890597, "body": "Post as the answer.. I will accept."}], "answers": [{"tags": [], "owner": {"reputation": 805, "user_id": 4387819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nvj4Ncdl4Ak/AAAAAAAAAAI/AAAAAAAAADY/jenBFmM_J8M/photo.jpg?sz=128", "display_name": "Jiayu Wang", "link": "https://stackoverflow.com/users/4387819/jiayu-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1446797965, "creation_date": 1446797965, "answer_id": 33562288, "question_id": 33551338, "link": "https://stackoverflow.com/questions/33551338/how-to-add-new-file-to-go-project/33562288#33562288", "title": "How to add new file to Go project", "body": "<p>i think you can set GOPATH in the ~/.bash_profile, e.g. \nGOPATH=~/code/go\nexport GOPATH</p>\n\n<p>and source ~/.bash_profile or restart the terminal. it will go to effect;</p>\n\n<p>then put *.go or go project related with the main.go under the GOPATH.</p>\n\n<p>finally, main.go will find the *.go.</p>\n"}, {"tags": [], "owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "is_accepted": false, "score": 0, "last_activity_date": 1446856560, "creation_date": 1446856560, "answer_id": 33577747, "question_id": 33551338, "link": "https://stackoverflow.com/questions/33551338/how-to-add-new-file-to-go-project/33577747#33577747", "title": "How to add new file to Go project", "body": "<p>There are two types of run configurations for Go applications:\n- Go Single file -> which is the equivalent of go run file.go\n- Go Application -> which is the equivalent of go build file / package and run the binary</p>\n\n<p>By the sound of it, you want to run a Go Application with Run kind set to package. There you'll need to type the full package name, for example: github.com/dlsniper/demo/cmd/democmd \nAt the moment support for running multiple files / building a directory is not present (there are some issues opened for it)</p>\n"}], "owner": {"reputation": 7718, "user_id": 225885, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/pKYBo.jpg?s=128&g=1", "display_name": "jim", "link": "https://stackoverflow.com/users/225885/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1446856560, "creation_date": 1446745450, "question_id": 33551338, "link": "https://stackoverflow.com/questions/33551338/how-to-add-new-file-to-go-project", "title": "How to add new file to Go project", "body": "<p>I am using the Go plugin for IntelliJ Idea.</p>\n\n<p>I'm not sure how I got my project working like this but I am able to run my Main.go file and it includes all my other files in the project that I can reference. That is perfect.</p>\n\n<p>The problem now is that when I go and create a new \"*.go\" file it's not included in the IDE build and I get compiled errors wherever I refer to the contents of that file.</p>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["xml", "go"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1446748355, "post_id": 33551110, "comment_id": 54883827, "body": "Whats wrong with writing to the Writer directly, i.e. bypassing the encoder: <code>os.Stdout.Write([]byte(myxml))</code> ?"}, {"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1446748451, "post_id": 33551110, "comment_id": 54883883, "body": "That&#39;s what I would do as well \u2014 only make sure to <code>Flush</code> the encoder before writing directly to the underlying writer."}, {"owner": {"reputation": 13244, "user_id": 317915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/86d01c87cc6f22c8445661b72b6b0d78?s=128&d=identicon&r=PG", "display_name": "topskip", "link": "https://stackoverflow.com/users/317915/topskip"}, "edited": false, "score": 0, "creation_date": 1446752151, "post_id": 33551110, "comment_id": 54885961, "body": "I didn&#39;t think of the obvious solution. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 13244, "user_id": 317915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/86d01c87cc6f22c8445661b72b6b0d78?s=128&d=identicon&r=PG", "display_name": "topskip", "link": "https://stackoverflow.com/users/317915/topskip"}, "edited": false, "score": 0, "creation_date": 1446752107, "post_id": 33552288, "comment_id": 54885936, "body": "It doesn&#39;t look the &#187;One True Way (TM)&#171;, but it works fine and it solves my problem. Thanks!"}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 1, "last_activity_date": 1446748777, "creation_date": 1446748777, "answer_id": 33552288, "question_id": 33551110, "link": "https://stackoverflow.com/questions/33551110/xml-encoding-inject-xml-into-output/33552288#33552288", "title": "XML encoding: inject XML into output", "body": "<p>The only way to insert raw XML is to write it directly to the stream, os.Stdout in this case.</p>\n\n<pre><code>myxml := `&lt;mytag&gt;foo&lt;/mytag&gt;`\nenc := xml.NewEncoder(os.Stdout)\nroot := xml.StartElement{Name: xml.Name{Local: \"root\"}}\nenc.EncodeToken(root)\nenc.Flush()\nos.Stdout.WriteString(myxml)\nenc.EncodeToken(root.End())\nenc.Flush()\n</code></pre>\n\n<p>This is essentialy what happens if you use the <code>innerxml</code> struct tag, but that can only be done through a struct, and would give you one more set of tags representing the struct around your raw xml.</p>\n"}], "owner": {"reputation": 13244, "user_id": 317915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/86d01c87cc6f22c8445661b72b6b0d78?s=128&d=identicon&r=PG", "display_name": "topskip", "link": "https://stackoverflow.com/users/317915/topskip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 1, "accepted_answer_id": 33552288, "answer_count": 1, "score": 1, "last_activity_date": 1446748777, "creation_date": 1446744792, "question_id": 33551110, "link": "https://stackoverflow.com/questions/33551110/xml-encoding-inject-xml-into-output", "title": "XML encoding: inject XML into output", "body": "<p>I have a string with an XML fragment and I'd like to inject it into the encoding stream:</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/xml\"\n    \"os\"\n)\n\nfunc main() {\n    myxml := `&lt;mytag&gt;foo&lt;/mytag&gt;`\n    enc := xml.NewEncoder(os.Stdout)\n    root := xml.StartElement{Name: xml.Name{Local: \"root\"}}\n    enc.EncodeToken(root)\n    enc.EncodeToken(xml.CharData(myxml))\n    enc.EncodeToken(root.End())\n    enc.Flush()\n}\n</code></pre>\n\n<p>I get <code>&lt;root&gt;&amp;lt;mytag&amp;gt;foo&amp;lt;/mytag&amp;gt;&lt;/root&gt;</code> but I'd like to have <code>&lt;root&gt;&lt;mytag&gt;foo&lt;/mytag&gt;&lt;/root&gt;</code></p>\n\n<p>Is there any way I can do this using <code>enc.EncodeToken()</code> or something similiar?</p>\n"}, {"tags": ["javascript", "jquery", "json", "go", "highcharts"], "comments": [{"owner": {"reputation": 8805, "user_id": 1817176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/479f89f122c20918e9fe81f856f0a8c6?s=128&d=identicon&r=PG", "display_name": "jmaloney", "link": "https://stackoverflow.com/users/1817176/jmaloney"}, "edited": false, "score": 0, "creation_date": 1446749978, "post_id": 33550607, "comment_id": 54884752, "body": "You might be getting an error from your ajax call. Add an error call back to check."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 3625612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41646cf43f9e6bf0de20994ef96f8952?s=128&d=identicon&r=PG&f=1", "display_name": "KuKe", "link": "https://stackoverflow.com/users/3625612/kuke"}, "is_accepted": true, "score": 1, "last_activity_date": 1446815153, "creation_date": 1446815153, "answer_id": 33567502, "question_id": 33550607, "link": "https://stackoverflow.com/questions/33550607/golang-highcharts-dynamic-data/33567502#33567502", "title": "Golang Highcharts dynamic data", "body": "<p>The error (thx to @jmaloney 's hint)</p>\n\n<pre><code>{\"readyState\":4,\"status\":200,\"statusText\":\"success\"}\najax.html:28 parsererror: Error: jQuery110109016359453089535_1446814074235 was not called\n</code></pre>\n\n<p>A simple</p>\n\n<pre><code>w.Header().Set(\"Access-Control-Allow-Origin\", \"*\")\n</code></pre>\n\n<p>on my go-Server solves it :)</p>\n"}], "owner": {"reputation": 41, "user_id": 3625612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41646cf43f9e6bf0de20994ef96f8952?s=128&d=identicon&r=PG&f=1", "display_name": "KuKe", "link": "https://stackoverflow.com/users/3625612/kuke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 2, "accepted_answer_id": 33567502, "answer_count": 1, "score": 3, "last_activity_date": 1446815153, "creation_date": 1446743174, "last_edit_date": 1446746493, "question_id": 33550607, "link": "https://stackoverflow.com/questions/33550607/golang-highcharts-dynamic-data", "title": "Golang Highcharts dynamic data", "body": "<p>I am currently learning golang and a bit of webstuff on the way. So excuse my maybe not so smart question</p>\n\n<p>My problem is that I want to provide a Highchart with dynamic Data. I looked up the documentation and the example but cannot get it to work.</p>\n\n<p>The Highchart example:</p>\n\n<pre><code>        &lt;script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-1.10.1.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"http://code.highcharts.com/highcharts.js\"&gt;&lt;/script&gt;\n\n\n    &lt;!-- 2. Add the JavaScript to initialize the chart on document ready --&gt;\n    &lt;script&gt;\n    var chart; // global\n\n    /**\n     * Request data from the server, add it to the graph and set a timeout to request again\n     */\n    function requestData() {\n        $.ajax({\n            url: 'http://localhost:3000/',\n            success: function(point) {\n                var series = chart.series[0],\n                    shift = series.data.length &gt; 20; // shift if the series is longer than 20\n\n                // add the point\n                chart.series[0].addPoint(eval(point), true, shift);\n\n                // call it again after one second\n                setTimeout(requestData, 1000);\n            },\n            cache: false\n        });\n    }\n\n    $(document).ready(function() {\n        chart = new Highcharts.Chart({\n            chart: {\n                renderTo: 'container',\n                defaultSeriesType: 'spline',\n                events: {\n                    load: requestData\n                }\n            },\n            title: {\n                text: 'Live random data'\n            },\n            xAxis: {\n                type: 'datetime',\n                tickPixelInterval: 150,\n                maxZoom: 20 * 1000\n            },\n            yAxis: {\n                minPadding: 0.2,\n                maxPadding: 0.2,\n                title: {\n                    text: 'Value',\n                    margin: 80\n                }\n            },\n            series: [{\n                name: 'Random data',\n                data: [1]\n            }]\n        });\n    });\n    &lt;/script&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;!-- 3. Add the container --&gt;\n    &lt;div id=\"container\" style=\"width: 800px; height: 400px; margin: 0 auto\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>My Server should Provide a json encoding string as requested.</p>\n\n<pre><code>func main(){\nhttp.HandleFunc(\"/\",foo)\nhttp.ListenAndServe(\":3000\", nil)\n}\nfunc foo(w http.ResponseWriter, r *http.Request) {\nnumbers := []int{14,5}\njs, err := json.Marshal(numbers)\nif err != nil {\nhttp.Error(w, err.Error(), http.StatusInternalServerError)\nreturn\n}\nfmt.Println(\"Received Request\")\nw.Header().Set(\"Content-Type\", \"text/json\")\n  w.Write(js)\n}\n</code></pre>\n\n<p>I can see that the highchart makes a request. My guess it that the ajax call does not understand my json?</p>\n\n<p>Thanks for any help in advance :)</p>\n\n<p>Edit: Do I habe to do a success message  as a return too?</p>\n"}, {"tags": ["struct", "go", "maps"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 5, "creation_date": 1446742436, "post_id": 33549851, "comment_id": 54880235, "body": "Goroutines are not safe for concurrently writing <i>anything</i>. Regardless if you have a map or a struct, you need to synchronize access."}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1446742469, "post_id": 33549851, "comment_id": 54880257, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/18930910/golang-access-struct-property-by-name\">GoLang: Access struct property by name</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 0, "last_activity_date": 1515361304, "creation_date": 1515361304, "answer_id": 48141793, "question_id": 33549851, "link": "https://stackoverflow.com/questions/33549851/converting-string-into-field-names/48141793#48141793", "title": "Converting string into field names", "body": "<blockquote>\n  <p>Currently goroutines are not safe for writing into maps.</p>\n</blockquote>\n\n<p>That might need to be revisited with Go 1.9 (Aug. 2017) and the <a href=\"https://golang.org/doc/go1.9#sync-map\" rel=\"nofollow noreferrer\">concurrent map</a> present in the <a href=\"https://golang.org/pkg/sync/#Map\" rel=\"nofollow noreferrer\"><code>sync</code> package</a></p>\n\n<blockquote>\n  <p>The new <code>Map</code> type in the <code>sync</code> package is a concurrent map with amortized-constant-time loads, stores, and deletes.<br>\n  It is safe for multiple goroutines to call a <code>Map</code>'s methods concurrently. </p>\n</blockquote>\n\n<p>Combine that with <a href=\"https://github.com/oleiade/reflections\" rel=\"nofollow noreferrer\"><code>oleiade/reflections</code></a> that I mentioned, as commented, in \"<a href=\"https://stackoverflow.com/a/25616428/6309\">GoLang: Access struct property by name</a>\", and you should be able to do both (access property name, and use maps)</p>\n"}], "owner": {"reputation": 1499, "user_id": 5128105, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NDMnr.png?s=128&g=1", "display_name": "Sundar", "link": "https://stackoverflow.com/users/5128105/sundar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1515361304, "creation_date": 1446741014, "question_id": 33549851, "link": "https://stackoverflow.com/questions/33549851/converting-string-into-field-names", "title": "Converting string into field names", "body": "<p>I have a structure, where I store all the hours and minutes into mongodb. In this case, when  I get a request to modify the value, I get the hour and minute as string. Is there a way to find the field name from the string that is given as input</p>\n\n<p>You can see it <a href=\"https://play.golang.org/p/g-7MLHc0Io\" rel=\"nofollow\">here</a></p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype Min struct {\n    v01 int `bson:\"01\",json:\"01\"`\n    v02 int `bson:\"02\",json:\"02\"`\n}\n\ntype Hour struct {\n    v01 Min `bson:\"01\",json:\"01\"`\n    v02 Min `bson:\"02\",json:\"02\"`\n}\n\nfunc main() {\n    fmt.Println(\"Hello, playground\")\n    var h Hour\n    h.v01.v01 = 1\n    h.v02.v01 = 2\n    fmt.Println(h)\n    h.Set(\"01\", \"01\", 10)\n    fmt.Println(h)\n}\n\nfunc (h *Hour) Set(hour string, min string, value int) {\n    h.v01.v01 = 10 //Here I have hardcoded it\n    // Is there a way to do this from the given input\n    // e.g. h.Set(\"01\",\"01\",100)\n}\n</code></pre>\n\n<p>If you notice, the input is <code>\"01\",\"01\"</code>. I would like to change this input as <code>h.v01.v01</code>. Is it possible in Go?</p>\n\n<p>Note: I am using currently <code>maps</code> in this case. I would like to change this into structure access, if possible, so that I can use goroutine to speed up my program. Currently goroutines are not safe for writing into maps.</p>\n"}, {"tags": ["go", "profiling", "pprof"], "comments": [{"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 1, "creation_date": 1446757045, "post_id": 33549505, "comment_id": 54888849, "body": "Can I suggest another tack? The smaller a program is, the nicer its profile looks, and the less useful it is. As you can see from those call graphs, they&#39;re just spaghetti, and the program can contain real speedups, but <a href=\"http://stackoverflow.com/a/25870103/23771\"><i>there&#39;s no way to see them in the call graph</i></a>. Certainly the speedups can be found, but some cannot be found with the profiler, and when those are the only ones left, they kill. I have a constructive suggestion, which is to at least know how to use <a href=\"http://stackoverflow.com/a/378024/23771\"><i>random pausing</i></a>."}], "answers": [{"tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1446740840, "creation_date": 1446740840, "answer_id": 33549797, "question_id": 33549505, "link": "https://stackoverflow.com/questions/33549505/golang-profiling-simple-example-for-training-purposes/33549797#33549797", "title": "Golang profiling simple example for training purposes", "body": "<p>How about string concatenation? It produces a fairly linear graph on my machine. Besides, this is a good way to teach people why they should build strings by appenting to a <code>[]byte</code> rather than concatenating strings, creating tonnes of garbage.</p>\n\n<pre><code>func handler(w http.ResponseWriter, r *http.Request) {\n    var s string\n    for i := 0; i &lt; 100000; i++ {\n        s += strconv.Itoa(i)\n    }\n    w.Write([]byte(s))\n}\n</code></pre>\n"}], "owner": {"reputation": 1042, "user_id": 374924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/08ef4cdbafc228a2a6052467e74f3c2e?s=128&d=identicon&r=PG", "display_name": "Jacek Wysocki", "link": "https://stackoverflow.com/users/374924/jacek-wysocki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446740840, "creation_date": 1446739885, "question_id": 33549505, "link": "https://stackoverflow.com/questions/33549505/golang-profiling-simple-example-for-training-purposes", "title": "Golang profiling simple example for training purposes", "body": "<p>I'm doing Go training in my company and I want to present in best way pprof package. I think that My example isn't good enough to simply present power of pprof. I want to use only go std library. Code should give me \nsimplier call graph with some bottleneck.</p>\n\n<p>My current workflow is as below:\n1. include pprof in webserver \n2. run webserver (it'll gather data for 30 seconds (default)) \n3. run some curl shots to webserver\n4. present pprof graphs</p>\n\n<p>My code looks like below:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    _ \"net/http/pprof\"\n)\n\nfunc handler(w http.ResponseWriter, r *http.Request) {\n    for i := 0; i &lt; 100000000; i++ {\n        w.Write([]byte(fmt.Sprintf(\"%d - %d, \", i, i)))\n    }\n}\n\nfunc main() {\n    http.HandleFunc(\"/\", handler)\n    http.ListenAndServe(\":8080\", nil)\n}\n</code></pre>\n\n<h3>Pprof without filtering</h3>\n\n<p><a href=\"https://i.stack.imgur.com/PtXhQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PtXhQ.jpg\" alt=\"ppfof all\"></a></p>\n\n<h3>Pprof for handler() function only</h3>\n\n<p><a href=\"https://i.stack.imgur.com/lmCos.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lmCos.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ajax", "go"], "comments": [{"owner": {"reputation": 6501, "user_id": 859353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee0ed1d5c1b450c2c76651dd62f38c4?s=128&d=identicon&r=PG", "display_name": "jcbwlkr", "link": "https://stackoverflow.com/users/859353/jcbwlkr"}, "edited": false, "score": 1, "creation_date": 1446740039, "post_id": 33549115, "comment_id": 54878652, "body": "You&#39;re probably going to need to use something like <a href=\"http://agouti.org/\" rel=\"nofollow noreferrer\">agouti.org</a> along with selenium, phantom js, or chrome driver"}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 5250918, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/2a241b785773d58ae2cd8be649f9b97a?s=128&d=identicon&r=PG&f=1", "display_name": "Kaign", "link": "https://stackoverflow.com/users/5250918/kaign"}, "edited": false, "score": 0, "creation_date": 1446802375, "post_id": 33562429, "comment_id": 54905198, "body": "Yes, but this is individual approach, for another site written with another javascript framework, it will not work. There must be a common way..."}], "tags": [], "owner": {"reputation": 805, "user_id": 4387819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nvj4Ncdl4Ak/AAAAAAAAAAI/AAAAAAAAADY/jenBFmM_J8M/photo.jpg?sz=128", "display_name": "Jiayu Wang", "link": "https://stackoverflow.com/users/4387819/jiayu-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1446798454, "creation_date": 1446798454, "answer_id": 33562429, "question_id": 33549115, "link": "https://stackoverflow.com/questions/33549115/web-scraper-crawler-that-works-with-ajax/33562429#33562429", "title": "web scraper/crawler that works with ajax", "body": "<p>http.Get(Url) just get the response of the Url.\nresp.Content is like:</p>\n\n<pre><code>&lt;body&gt;\n//javascript here       \n &lt;div class=\"content\"&gt;&lt;/div&gt;\n//javascript here\n&lt;/body&gt;\n</code></pre>\n\n<p>if you want to get the content in the div, you need to analysis the javascript and know how the ajax to get data. Then you can simulate the processes the get what you want. </p>\n"}, {"tags": [], "owner": {"reputation": 10938, "user_id": 155082, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f1316ecb725006d020998e6b8a0740c?s=128&d=identicon&r=PG", "display_name": "Lothar", "link": "https://stackoverflow.com/users/155082/lothar"}, "is_accepted": false, "score": 0, "last_activity_date": 1446917248, "creation_date": 1446917248, "answer_id": 33585621, "question_id": 33549115, "link": "https://stackoverflow.com/questions/33549115/web-scraper-crawler-that-works-with-ajax/33585621#33585621", "title": "web scraper/crawler that works with ajax", "body": "<p>You must use one of the headless webbrowsers. \nWithout checking i'm saying that there is no Go binding for the three remaining browser engines (Webkit/Firefox,IE).</p>\n\n<p>Switch to python and javascript. </p>\n"}], "owner": {"reputation": 273, "user_id": 5250918, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/2a241b785773d58ae2cd8be649f9b97a?s=128&d=identicon&r=PG&f=1", "display_name": "Kaign", "link": "https://stackoverflow.com/users/5250918/kaign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 318, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1612903557, "creation_date": 1446738864, "last_edit_date": 1612903557, "question_id": 33549115, "link": "https://stackoverflow.com/questions/33549115/web-scraper-crawler-that-works-with-ajax", "title": "web scraper/crawler that works with ajax", "body": "<p>I need to crawl a site and get all the links from it, the problem is - this site uses ajax, and Go's standart http.Get(..) will return something like:</p>\n\n<pre><code> &lt;body&gt;\n    //javascript here       \n     &lt;div class=\"content\"&gt;&lt;/div&gt;\n    //javascript here\n &lt;/body&gt;\n</code></pre>\n\n<p>Div is empty. Is there some solution with golang?</p>\n"}, {"tags": ["xml", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 3, "creation_date": 1446738009, "post_id": 33548734, "comment_id": 54877136, "body": "There&#39;s no generic way to convert XML to a map. What is it you want to be the keys and values?"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 1, "creation_date": 1446745325, "post_id": 33548734, "comment_id": 54882070, "body": "Also asked (and answered) <a href=\"https://groups.google.com/d/topic/golang-nuts/zEmDOp_yFpU/discussion\" rel=\"nofollow noreferrer\">here</a>."}], "owner": {"reputation": 121, "user_id": 3150602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab3ac12c4c86d0cc08fa6eea237b245?s=128&d=identicon&r=PG&f=1", "display_name": "nathan.xu", "link": "https://stackoverflow.com/users/3150602/nathan-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5794, "favorite_count": 1, "closed_date": 1446745268, "answer_count": 0, "score": 3, "last_activity_date": 1446738250, "creation_date": 1446737812, "last_edit_date": 1446738250, "question_id": 33548734, "link": "https://stackoverflow.com/questions/33548734/ho-to-convert-an-xml-file-to-mapstringinterface-in-golang", "closed_reason": "Duplicate", "title": "Ho to convert an xml file to map[string]interface{} in golang?", "body": "<p>I know the method <code>Unmarshal</code> in <code>encoding/json</code> can convert a json to <code>map[string]interface{}</code>, so I also want to do same thing with <code>encoding/xml</code>, but it failed.</p>\n\n<p>It seems <code>encoding/xml</code> do not have the similar method, do any one know how to solve it? I don't want to define struct for the xml content, since the xml is generated by many different services.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["go", "maps"], "answers": [{"tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 1, "last_activity_date": 1446735172, "creation_date": 1446735172, "answer_id": 33547710, "question_id": 33547378, "link": "https://stackoverflow.com/questions/33547378/assigning-map-to-a-map-in-golang/33547710#33547710", "title": "Assigning map to a map in Golang", "body": "<blockquote>\n  <p>In this case, one way is to copy the map minutes into the new map that I had created for every hour. Is this the only way?</p>\n</blockquote>\n\n<p>Yes. What else could work? Go has no notion of copy-on-write or that like.</p>\n\n<blockquote>\n  <p>If yes, then copying maps over a for loop is the best approach. Is that correct?</p>\n</blockquote>\n\n<p>Yes. (But depends on your definition of \"best\").</p>\n"}], "owner": {"reputation": 1499, "user_id": 5128105, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NDMnr.png?s=128&g=1", "display_name": "Sundar", "link": "https://stackoverflow.com/users/5128105/sundar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1290, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1446735172, "creation_date": 1446734373, "last_edit_date": 1495541744, "question_id": 33547378, "link": "https://stackoverflow.com/questions/33547378/assigning-map-to-a-map-in-golang", "title": "Assigning map to a map in Golang", "body": "<p>Im creating and pre-filling a similar sub map and then when I assign it, I see that I have ended up referencing the same variable.</p>\n\n<p>You can check it out <a href=\"https://play.golang.org/p/hX6SJW6svb\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"strconv\"\n\nfunc main() {\n    fmt.Println(\"Hello, playground\")\n    var hour map[string]map[string]string\n    var minutes map[string]string\n\n    minutes = make(map[string]string)\n    for i := 0; i &lt; 2; i++ {\n        iString := strconv.Itoa(i)\n        minutes[iString] = \"EMPTY\"\n    }\n    fmt.Println(\"Minutes\")\n    fmt.Println(minutes)\n\n    hour = make(map[string]map[string]string)\n    for i := 0; i &lt; 2; i++ {\n        iString := strconv.Itoa(i)\n        hour[iString] = make(map[string]string)\n        hour[iString] = minutes\n    }\n    fmt.Println(\"Hour\")\n    fmt.Println(hour)\n\n    hour[\"0\"][\"1\"] = \"FULL\"\n    fmt.Println(\"Modified Hour\")\n    fmt.Println(hour)\n}\n</code></pre>\n\n<p>So, it is clear that both <code>hour[\"0\"][\"1\"]</code> and <code>hour[\"1\"][\"1\"]</code> have been modified.</p>\n\n<p>In this case, one way is to copy the map <code>minutes</code> into the new map that I had created for every hour. Is <strong>this</strong> the only way?</p>\n\n<p>If yes, then <a href=\"https://stackoverflow.com/questions/7436864/go-copying-all-elements-of-a-map-into-another\">copying maps over a for loop</a> is the best approach. Is that correct?</p>\n"}, {"tags": ["mysql", "go", "gorp"], "answers": [{"tags": [], "owner": {"reputation": 254, "user_id": 1591779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2eb97b40ec6a0b5aea96b6e9c2640a48?s=128&d=identicon&r=PG", "display_name": "Misrab", "link": "https://stackoverflow.com/users/1591779/misrab"}, "is_accepted": false, "score": 1, "last_activity_date": 1448592725, "creation_date": 1448592725, "answer_id": 33949618, "question_id": 33546492, "link": "https://stackoverflow.com/questions/33546492/create-table-using-go-gorp-fails-to-set-column-details/33949618#33949618", "title": "Create table using Go-Gorp fails to set column details", "body": "<p>I believe the column name doesn't require \"name\"</p>\n\n<p>Try <code>db:\"xyz,size:50\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 4236, "user_id": 2231905, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0d4a1b6ef81bd93c9dd8896880995b77?s=128&d=identicon&r=PG", "display_name": "Fallen", "link": "https://stackoverflow.com/users/2231905/fallen"}, "is_accepted": true, "score": 2, "last_activity_date": 1454133266, "creation_date": 1454133266, "answer_id": 35098541, "question_id": 33546492, "link": "https://stackoverflow.com/questions/33546492/create-table-using-go-gorp-fails-to-set-column-details/35098541#35098541", "title": "Create table using Go-Gorp fails to set column details", "body": "<p>According to <a href=\"https://github.com/go-gorp/gorp/issues/287#issuecomment-138815578\" rel=\"nofollow\">this comment</a>, the size feature is still available in only dev branch.\nYou can achieve this by explicitly setting maxsize though. Example:</p>\n\n<pre><code>dt := Dbm.AddTableWithName(Data{}, \"data_test\").SetKeys(true, \"id\")\ndt.ColMap(\"xyz\").SetMaxSize(50)\nDbm.CreateTablesIfNotExists()\n....\n</code></pre>\n"}], "owner": {"reputation": 1183, "user_id": 2644513, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/yNtHc.jpg?s=128&g=1", "display_name": "Itachi", "link": "https://stackoverflow.com/users/2644513/itachi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 35098541, "answer_count": 2, "score": 2, "last_activity_date": 1454133266, "creation_date": 1446731948, "last_edit_date": 1447154564, "question_id": 33546492, "link": "https://stackoverflow.com/questions/33546492/create-table-using-go-gorp-fails-to-set-column-details", "title": "Create table using Go-Gorp fails to set column details", "body": "<p>Trying to create the table using Gorp-Go ORM package. Was able to successfully create the table in MySql but failed to attach column details. </p>\n\n<pre><code>type Data struct {\n    id int `db:\"pid\"`\n    name string `db:\",size:50\"`\n}\n</code></pre>\n\n<p>Gorp hook </p>\n\n<pre><code>Dbm.AddTableWithName(Data{}, \"data_test\").SetKeys(true, \"id\")\nDbm.CreateTablesIfNotExists()\n</code></pre>\n\n<p>Dbm is pointer to <em>gorp.DbMap</em>. The resultant table has <em>pid</em> and <em>,size:50</em> has name. Have tried with </p>\n\n<pre><code>   type Data struct {\n        id int `db:\"pid\"`\n        name string `db:\"name:xyz,size:50\"`\n    }\n</code></pre>\n\n<p>Still the resultant column name is <em>\"name:xyz,size:50\"</em> </p>\n"}, {"tags": ["xml", "parsing", "go", "nested"], "comments": [{"owner": {"reputation": 5402, "user_id": 2611159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DYt6w.jpg?s=128&g=1", "display_name": "planetmaker", "link": "https://stackoverflow.com/users/2611159/planetmaker"}, "edited": false, "score": 0, "creation_date": 1446727530, "post_id": 33544879, "comment_id": 54869518, "body": "The formatting makes it difficult to see what you have, what you want and what you tried."}, {"owner": {"reputation": 1183, "user_id": 2959387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459784500061e41da68ed5af11f92183?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant Thakkar", "link": "https://stackoverflow.com/users/2959387/prashant-thakkar"}, "edited": false, "score": 0, "creation_date": 1446728632, "post_id": 33544879, "comment_id": 54870209, "body": "Your var v is referring to task_data_res struct which is having ID and array of Task. And while printing you are trying to print v.SwidD, v.Tskid etc which are not part of task_data_res struct and hence you are getting error"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 2, "creation_date": 1446729208, "post_id": 33544879, "comment_id": 54870595, "body": "Could you come up with a minimal (or at least a much much smaller) example of what you want to do?"}], "answers": [{"comments": [{"owner": {"reputation": 595, "user_id": 5443590, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8c3c26c54f6d700cd85d73e1f0cc4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "GKV", "link": "https://stackoverflow.com/users/5443590/gkv"}, "edited": false, "score": 0, "creation_date": 1446817927, "post_id": 33566291, "comment_id": 54914588, "body": "Thanks for the help .can you suggest me some resource to dig more into this kind of parsing and GOLANG."}], "tags": [], "owner": {"reputation": 1183, "user_id": 2959387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459784500061e41da68ed5af11f92183?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant Thakkar", "link": "https://stackoverflow.com/users/2959387/prashant-thakkar"}, "is_accepted": true, "score": -1, "last_activity_date": 1446811002, "creation_date": 1446811002, "answer_id": 33566291, "question_id": 33544879, "link": "https://stackoverflow.com/questions/33544879/xml-parsing-in-golang-i-want-to-access-each-element-in-the-details-individually/33566291#33566291", "title": "xml parsing in golang (i want to access each element in the details individually )", "body": "<p>I have tried to parse your xml, you can find complete solution at <a href=\"http://play.golang.org/p/1UCaGYetzo\" rel=\"nofollow\">http://play.golang.org/p/1UCaGYetzo</a></p>\n"}], "owner": {"reputation": 595, "user_id": 5443590, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8c3c26c54f6d700cd85d73e1f0cc4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "GKV", "link": "https://stackoverflow.com/users/5443590/gkv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 2, "accepted_answer_id": 33566291, "answer_count": 1, "score": -1, "last_activity_date": 1448712368, "creation_date": 1446727434, "last_edit_date": 1446731241, "question_id": 33544879, "link": "https://stackoverflow.com/questions/33544879/xml-parsing-in-golang-i-want-to-access-each-element-in-the-details-individually", "title": "xml parsing in golang (i want to access each element in the details individually )", "body": "<p>The XML data that i want to parse is:</p>\n\n<pre><code>&lt;cm&gt;\n&lt;id&gt;TASK_DATA_RES&lt;/id&gt;\n&lt;task&gt;\n    &lt;swid&gt;3873-0&lt;/swid&gt;\n     &lt;detail&gt;\n    &lt;![CDATA[&lt;execute name=\"EXECUTE\"&gt;      \n    &lt;swid&gt;3873&lt;/swid&gt;\n    &lt;tskid&gt;MONITOR0&lt;/tskid&gt;\n    &lt;file_name&gt;DiskStatusCheck.ps1&lt;/file_name&gt;\n    &lt;param&gt;/metricName::metric_3873_48 /metric::DiskStatusCheck /warn::1 /critical::1 /alert::1 /params::E:&lt;/param&gt;\n    &lt;timeout&gt;&lt;/timeout&gt;\n    &lt;user&gt;test\\\\test&lt;/user&gt;\n    &lt;passwd&gt;test&lt;/passwd&gt;   &lt;path&gt;https://mspnocsupport.com/downloadScript.doaction=downloadAgent&amp;fileName=DiskStatusCheck.ps1&amp;version=5.00&lt;/path&gt;\n    &lt;pathtype&gt;local&lt;/pathtype&gt;\n    &lt;size&gt;9147&lt;/size&gt;\n    &lt;encoded_size&gt;9147&lt;/encoded_size&gt;\n    &lt;type&gt;POWERSHELL&lt;/type&gt;\n    &lt;outputdir&gt;&lt;/outputdir&gt;\n    &lt;outputfile&gt;&lt;/outputfile&gt;\n    &lt;alert&gt;false&lt;/alert&gt;\n    &lt;regkeypath&gt;&lt;/regkeypath&gt;\n    &lt;regkeyval&gt;&lt;/regkeyval&gt;\n    &lt;process&gt;&lt;/process&gt;\n    &lt;service&gt;&lt;/service&gt;\n    &lt;version&gt;5.00&lt;/version&gt;\n    &lt;asuser_flag&gt;0&lt;/asuser_flag&gt;\n    &lt;/execute&gt;]]&gt;\n    &lt;/detail&gt;\n&lt;/task&gt;\n&lt;/cm&gt;\n</code></pre>\n\n<p>The corresponding structure to parse such XML documents:</p>\n\n<pre><code>type detail struct{\n    Name string `xml:\"detail&gt;name\"`\n    Swid string `xml:\"detail&gt;swid\"` \n    Tskid string `xml:\"detail&gt;tskid\"`\n    File string `xml:\"detail&gt;file\"`\n    Param string `xml:\"detail&gt;params\"`\n    User string `xml:\"detail&gt;user\"`   \n    Passwd string `xml:\"detail&gt;passwd\"`\n    Path string `xml:\"detail&gt;path\"`\n    Pathtype string `xml:\"detail&gt;pathtype\"`\n    Size int `xml:\"detail&gt;size\"`\n    Encode string `xml:\"detail&gt;encode\"`\n    Type string `xml:\"detail&gt;type\"`\n    Outputdir string `xml:\"detail&gt;outputdir\"`\n    Outputfile string `xml:\"detail&gt;outputfile\"`\n    Alert string `xml:\"detail&gt;alert\"`\n    Regkeyval string `xml:\"detail&gt;regkeyval\"`\n    Process string `xml:\"detail&gt;process\"`   \n    Service string `xml:\"detail&gt;service\"`\n    Version float64 `xml:\"detail&gt;version\"`\n    Asuser_flag string `xml:\"detail&gt;asuser_flag\"`\n}\n\ntype task struct{\n    Swid string `xml:\"swid\"`\n    Details []detail `xml:\"Details&gt;detail\"`\n}\ntype task_data_res struct{\n    ID    string `xml:\"id\"`\n    //Swid  string `xml:\"task&gt;swid\"`\n    Tasks []task `xml:\"Tasks&gt;task\"` \n}\nv := task_data_res{}\nerr := xml.Unmarshal([]byte(*dxml), &amp;v)\nif err != nil {\n    fmt.Printf(\"error: %v\", err)\n    return\n}\n</code></pre>\n\n<p>After that i want to print individual value of Detail structure  such as name,Swid etc.</p>\n"}, {"tags": ["go", "atomicity"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1446722009, "post_id": 33542609, "comment_id": 54866150, "body": "Rule of thumb: Never use anything from sync/atomic. Never ever. But you asked: sync/atomic allows to read e.g. int64 in a race-free manner. If you mix reading and writing without synchronization through channels or stuff from package sync) your code is racy which means it has undefined behaviour.  Now sometimes it is easier to force a &quot;non-racy&quot; read of an int64 with atomic.LoadInt64 than explicit synchronisation. But as said: Never do this."}], "answers": [{"comments": [{"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1446721306, "post_id": 33542858, "comment_id": 54865758, "body": "but why we need load operation?  <code>AddInt32</code>  is enough, isn&#39;t it?"}, {"owner": {"reputation": 818, "user_id": 5292835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f2a5019f9a977706135c3f8246bba1?s=128&d=identicon&r=PG&f=1", "display_name": "mrd0ll4r", "link": "https://stackoverflow.com/users/5292835/mrd0ll4r"}, "edited": false, "score": 0, "creation_date": 1446721502, "post_id": 33542858, "comment_id": 54865868, "body": "I could imagine that on a 32 bit machine a 64 bit load/write is not atomic. You don&#39;t want to read the unmodified lower 32 bits and the modified upper 32 bits."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1446721670, "post_id": 33542858, "comment_id": 54865969, "body": "Are you sure &quot;normal load and stores&quot; of int64 are atomic on all supported platforms? Even on the 32-bit platforms? Also: The memory model does not mention that the operations in syn/atomic establish a HB relation."}, {"owner": {"reputation": 2590, "user_id": 1209451, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1700220388/picture?type=large", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1209451/oleg"}, "edited": false, "score": 0, "creation_date": 1446722283, "post_id": 33542858, "comment_id": 54866324, "body": "the interesting thing that go race detector finds and informes this case as racecondition  <code>gorotine1:...Shared2 = 12345;..gorotine2.. readshared:= Shared2</code>  but if you wrap them with sync.Lock - it thinks that now everething is ok."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1446724471, "post_id": 33542858, "comment_id": 54867612, "body": "@JiangYD On some architectures (and I&#39;m pretty sure modern x86 is one of them) synchronization is best done before loads and not after stores."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 2590, "user_id": 1209451, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1700220388/picture?type=large", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1209451/oleg"}, "edited": false, "score": 0, "creation_date": 1446724686, "post_id": 33542858, "comment_id": 54867756, "body": "@OlegGolovanov because sync.Lock has built-in ordering guarantees, which as I see now aren&#39;t documented either. But if we assume that it behaves like &quot;everyone else&quot;, any writes done before a Unlock in one goroutine will be visible to other goroutines after their call to Lock. Unfortunately the memory model of Go isn&#39;t very well documented, so I can only make reasonable assumptions from how the CPUs and other languages behave."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 2, "creation_date": 1446726185, "post_id": 33542858, "comment_id": 54868719, "body": "@Art the synchronisation and HB guarantees of package sync are documented in the Go Memory Model, see e.g. <a href=\"https://golang.org/ref/mem#tmp_8\" rel=\"nofollow noreferrer\">golang.org/ref/mem#tmp_8</a> ."}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 7, "last_activity_date": 1446721173, "creation_date": 1446721173, "answer_id": 33542858, "question_id": 33542609, "link": "https://stackoverflow.com/questions/33542609/usage-golang-atomic-loadint32-storeint32-64/33542858#33542858", "title": "usage golang atomic LoadInt32/StoreInt32 (64)", "body": "<p>It's not documented in the package at all, but normally atomic loads and stores of normal values are there not for atomicity because the CPU operations are already atomic, but for ordering. The language specification or CPU instruction documentation gives you certain guarantees about in which order one CPU stores will be seen by another CPU if you use the atomic operations. Most modern CPUs have no such guarantees if you don't use the proper (expensive) instructions for it.</p>\n\n<p>So in your example (I assume, since the package isn't documented), if the shared variables have been written by a goroutine first to <code>sharedA</code>, then <code>sharedB</code>, when reading then without atomic operations you might see the changed value of <code>sharedB</code> and still the old value of <code>sharedA</code>. It's different on different CPU families if the stores or loads need to perform extra magic to get the ordering right, so usually languages make you use atomic functions for both stores and loads and then the compiler/library knows what your actual CPU needs.</p>\n\n<p>Of course, the package doesn't document any of this, so in practice there is no difference because we don't know what the package actually guarantees. So for all practical purposes it's useless.</p>\n"}], "owner": {"reputation": 2590, "user_id": 1209451, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1700220388/picture?type=large", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1209451/oleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1799, "favorite_count": 3, "answer_count": 1, "score": 5, "last_activity_date": 1446721173, "creation_date": 1446720452, "question_id": 33542609, "link": "https://stackoverflow.com/questions/33542609/usage-golang-atomic-loadint32-storeint32-64", "title": "usage golang atomic LoadInt32/StoreInt32 (64)", "body": "<p>Can anybody show the example where usage of such atomic operations needed. I don't understand a differenece between </p>\n\n<pre><code>import \"sync/atomic\"\n\n...\nvar sharedA int64\nvar sharedB *int64\n...\n// concurent code\ntmpVarA := sharedA\ntmpVarB := *sharedB\n// and\ntmpVarA := atomic.LoadInt64(&amp;sharedA)\ntmpVarB := atomic.LoadInt64(sharedB)\n</code></pre>\n"}, {"tags": ["java", "json", "go", "jsonrpc4j"], "comments": [{"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 1, "creation_date": 1446719312, "post_id": 33541913, "comment_id": 54864470, "body": "em...but it matchs <code>http:&#47;&#47;json-rpc.org&#47;wiki&#47;specification</code>"}, {"owner": {"reputation": 13, "user_id": 5408621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032801532bd9d0a15530f5312ab922dd?s=128&d=identicon&r=PG&f=1", "display_name": "Venser Lin", "link": "https://stackoverflow.com/users/5408621/venser-lin"}, "reply_to_user": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1446720635, "post_id": 33541913, "comment_id": 54865345, "body": "the error object detail is added in 2.0"}, {"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 1, "creation_date": 1446720802, "post_id": 33541913, "comment_id": 54865449, "body": "so i think <code>net&#47;rpc&#47;jsonrpc</code> is under 1.0, while it is not documented."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5408621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032801532bd9d0a15530f5312ab922dd?s=128&d=identicon&r=PG&f=1", "display_name": "Venser Lin", "link": "https://stackoverflow.com/users/5408621/venser-lin"}, "edited": false, "score": 0, "creation_date": 1446829456, "post_id": 33551212, "comment_id": 54921846, "body": "Thanks, I am instead it of  http and thirft."}], "tags": [], "owner": {"reputation": 644, "user_id": 113120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87193ef5bee5631ceae07d1277b047c5?s=128&d=identicon&r=PG", "display_name": "Powerman", "link": "https://stackoverflow.com/users/113120/powerman"}, "is_accepted": false, "score": 0, "last_activity_date": 1446745052, "creation_date": 1446745052, "answer_id": 33551212, "question_id": 33541913, "link": "https://stackoverflow.com/questions/33541913/jsonrpc-format-different-between-jsonrpc4j-and-gos-rpc-jsonrpc/33551212#33551212", "title": "JSONRPC format different between Jsonrpc4j and go&#39;s rpc/jsonrpc", "body": "<p>If you need JSON-RPC 2.0 support for Go you can try <a href=\"https://github.com/powerman/rpc-codec\" rel=\"nofollow\">https://github.com/powerman/rpc-codec</a></p>\n"}], "owner": {"reputation": 13, "user_id": 5408621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032801532bd9d0a15530f5312ab922dd?s=128&d=identicon&r=PG&f=1", "display_name": "Venser Lin", "link": "https://stackoverflow.com/users/5408621/venser-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 446, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446745052, "creation_date": 1446718573, "question_id": 33541913, "link": "https://stackoverflow.com/questions/33541913/jsonrpc-format-different-between-jsonrpc4j-and-gos-rpc-jsonrpc", "title": "JSONRPC format different between Jsonrpc4j and go&#39;s rpc/jsonrpc", "body": "<p>I was meet a problem when I tried used net/jsonrpc package to build a server and a Java client with jsonrpc4j</p>\n\n<p>The problem is jsonrpc4j is when error happen, golang`s method will return error and encoding to json.</p>\n\n<p>I got this json object in client</p>\n\n<blockquote>\n  <p>{\"id\": -6028374044949000, \"result\": null, \"error\": \"some error return message\"}</p>\n</blockquote>\n\n<p>This object cast failed in java's json4j.</p>\n\n<p><a href=\"http://www.jsonrpc.org/specification#error_object\" rel=\"nofollow\">http://www.jsonrpc.org/specification#error_object</a></p>\n\n<p>After I checked the jsonrpc page, it is said the error field MUST a json object with fields [code, message, date], the golang jsonrpc package not meet the require.</p>\n\n<p>So I`m confused how to solve this.\nChange the jsonrpc lib,\nJust replace the rpc way to thrift/gRpc,\nAvoid to return error but send error in reply and let Java check the response,\nOr just edited the json4j or golang's source code ( I'm very horrible about this option)</p>\n\n<p>Thanks for watch.</p>\n"}, {"tags": ["sockets", "tcp", "go", "nat"], "comments": [{"owner": {"reputation": 680, "user_id": 1592264, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/78dbfab1c2716de55b960f00a5c868ce?s=128&d=identicon&r=PG", "display_name": "Ggicci", "link": "https://stackoverflow.com/users/1592264/ggicci"}, "edited": false, "score": 0, "creation_date": 1446725949, "post_id": 33540302, "comment_id": 54868583, "body": "I have tested your code, but &quot;close the connection directly and listen the same port&quot; was ok. No error occurred."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1446753338, "post_id": 33540302, "comment_id": 54886662, "body": "Why? What do you care what the clients local port is?"}, {"owner": {"reputation": 277, "user_id": 2986683, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100003596915461/picture?type=large", "display_name": "user2986683", "link": "https://stackoverflow.com/users/2986683/user2986683"}, "reply_to_user": {"reputation": 680, "user_id": 1592264, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/78dbfab1c2716de55b960f00a5c868ce?s=128&d=identicon&r=PG", "display_name": "Ggicci", "link": "https://stackoverflow.com/users/1592264/ggicci"}, "edited": false, "score": 0, "creation_date": 1446773386, "post_id": 33540302, "comment_id": 54895282, "body": "i got this: panic: listen tcp 10.0.2.15:54613: bind: address already in use @Ggicci"}, {"owner": {"reputation": 680, "user_id": 1592264, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/78dbfab1c2716de55b960f00a5c868ce?s=128&d=identicon&r=PG", "display_name": "Ggicci", "link": "https://stackoverflow.com/users/1592264/ggicci"}, "edited": false, "score": 0, "creation_date": 1446777183, "post_id": 33540302, "comment_id": 54896322, "body": "@user2986683 check out <a href=\"https://github.com/jbenet/go-reuseport\" rel=\"nofollow noreferrer\">github.com/jbenet/go-reuseport</a>"}], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 2986683, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100003596915461/picture?type=large", "display_name": "user2986683", "link": "https://stackoverflow.com/users/2986683/user2986683"}, "edited": false, "score": 0, "creation_date": 1446774171, "post_id": 33552045, "comment_id": 54895510, "body": "i know, but i just don&#39;t know how to do the same thing in go orz"}], "tags": [], "owner": {"reputation": 7725, "user_id": 681479, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/20bba354e7258f5e647102f63904a7a9?s=128&d=identicon&r=PG", "display_name": "Brian White", "link": "https://stackoverflow.com/users/681479/brian-white"}, "is_accepted": false, "score": 1, "last_activity_date": 1446747789, "last_edit_date": 1495535237, "creation_date": 1446747789, "answer_id": 33552045, "question_id": 33540302, "link": "https://stackoverflow.com/questions/33540302/how-to-reuse-a-dialed-tcp-port/33552045#33552045", "title": "how to reuse a dialed tcp port", "body": "<p>If you want a client to use a specific local port number, you must <code>bind()</code> after you <code>create()</code> but before you <code>connect()</code>.  You can specify any local port number (and/or specific interface) with <a href=\"http://linux.die.net/man/3/bind\" rel=\"nofollow noreferrer\">bind</a>.</p>\n\n<p>To reuse a previous port number, you have to make that port number known to the next connection attempt <strong>and</strong> you must open it with the <code>SO_REUSEADDR</code> <a href=\"https://stackoverflow.com/questions/24194961/how-do-i-use-setsockoptso-reuseaddr\">\"reuse\" option</a> each time or the second bind will not be allowed until the first one fully expires (often 2 minutes after it was closed).</p>\n\n<p>Those are C function names.  Go will have something similar.</p>\n"}, {"tags": [], "owner": {"reputation": 5198, "user_id": 186580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51af0a007f1bdc7134c0f02d3a156abb?s=128&d=identicon&r=PG", "display_name": "Oleksandr Kravchuk", "link": "https://stackoverflow.com/users/186580/oleksandr-kravchuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1446801334, "creation_date": 1446801334, "answer_id": 33563215, "question_id": 33540302, "link": "https://stackoverflow.com/questions/33540302/how-to-reuse-a-dialed-tcp-port/33563215#33563215", "title": "how to reuse a dialed tcp port", "body": "<p>This is a known problem of Go's net package.</p>\n\n<p>There are couple of workarounds, like this package, for instance: <a href=\"https://github.com/jbenet/go-reuseport\" rel=\"nofollow\">https://github.com/jbenet/go-reuseport</a></p>\n"}], "owner": {"reputation": 277, "user_id": 2986683, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100003596915461/picture?type=large", "display_name": "user2986683", "link": "https://stackoverflow.com/users/2986683/user2986683"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1978, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1446801334, "creation_date": 1446714180, "question_id": 33540302, "link": "https://stackoverflow.com/questions/33540302/how-to-reuse-a-dialed-tcp-port", "title": "how to reuse a dialed tcp port", "body": "<p>making it short:<br>\na server(192.168.0.78) listens on 8013<br>\na client(10.0.2.15) tries to connect the server, getting its local port(eg.54591)</p>\n\n<p>how to make the client close the connection and reuse 54591?<br>\ni tried and got:<br>\n1. close the connection directly and listen the same port:<b>can not reuse port</b><br>\n2. launch another program(B) to connect server and exit, then tried to listen the port B has used:<b>unknown port</b><br></p>\n\n<p>is there a correct way to do this?<br>\ncode is simple:<br>\nclient<br></p>\n\n<pre><code>func main() {                                                                                                                    \n    conn, err := net.Dial(\"tcp\" , \"192.168.0.78:8013\")                                                                           \n    if err != nil {                                                                                                              \n        panic(err)                                                                                                               \n    }                                                                                                                            \n    localAddr := conn.LocalAddr().String()                                                                                       \n    conn.Close()                                                                                                                 \n    // i got the local port, what to do?                                                                                         \n    fmt.Println(localAddr)                                                                                                       \n}      \n</code></pre>\n\n<p>server<br></p>\n\n<pre><code>func main(){                                                                                                                     \n    ln, err := net.Listen(\"tcp\", \":8013\")                                                                                        \n    if err != nil {                                                                                                              \n        panic(err)                                                                                                               \n    }                                                                                                                            \n    for i := 0; i &lt; 5; i++ {                                                                                                     \n        conn, err := ln.Accept()                                                                                                 \n        if err != nil {                                                                                                          \n            panic(err)                                                                                                           \n        }                                                                                                                        \n        fmt.Println(conn.RemoteAddr().String(), \"connected\")                                                                     \n        conn.Close()                                                                                                             \n    }                                                                                                                            \n}  \n</code></pre>\n"}, {"tags": ["testing", "go", "benchmarking"], "comments": [{"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1446716810, "post_id": 33537552, "comment_id": 54862916, "body": "a simple shell script with go:generate might work as well"}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 11339140, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_oZaOqfxYFI/AAAAAAAAAAI/AAAAAAAAADw/o9Jcv0YYArU/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u0438\u0444\u043e\u0440 \u0421\u0435\u0440\u044f\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/11339140/%d0%9d%d0%b8%d0%ba%d0%b8%d1%84%d0%be%d1%80-%d0%a1%d0%b5%d1%80%d1%8f%d0%ba%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1591568961, "post_id": 33539270, "comment_id": 110098882, "body": "I would also recommend to use <code>testing.B.Run(&quot;name&quot;, ...)</code> instead of <code>testing.InternalBenchmark</code>"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 5, "last_activity_date": 1446740507, "last_edit_date": 1446740507, "creation_date": 1446710335, "answer_id": 33539270, "question_id": 33537552, "link": "https://stackoverflow.com/questions/33537552/is-it-possible-to-dynamically-run-benchmark-tests/33539270#33539270", "title": "Is it possible to dynamically run benchmark tests?", "body": "<p>Yes, it's possible. In your test file (<code>xxx_test.go</code>) create your own <code>TestMain()</code> function, and inside that after assembling the dynamic benchmark cases (values of struct <a href=\"https://golang.org/pkg/testing/#InternalBenchmark\" rel=\"nofollow\"><code>testing.InternalBenchmark</code></a>), call <a href=\"https://golang.org/pkg/testing/#Main\" rel=\"nofollow\"><code>testing.Main()</code></a> which properly parses command line flags, creates and sets up <a href=\"https://golang.org/pkg/testing/#M\" rel=\"nofollow\"><code>testing.M</code></a>, and prepares and calls <a href=\"https://golang.org/pkg/testing/#RunBenchmarks\" rel=\"nofollow\"><code>testing.RunBenchmarks()</code></a>. This way your dynamic benchmarks will still be runnable by <code>go test</code>.</p>\n\n<p>Notes: <code>testing.Main()</code> will never return as it calls <a href=\"https://golang.org/pkg/os/#Exit\" rel=\"nofollow\"><code>os.Exit()</code></a>. If you want to perform further logging and calculations on the benchmark results, you may also call <a href=\"https://golang.org/pkg/testing/#MainStart\" rel=\"nofollow\"><code>testing.MainStart()</code></a><code>.Run()</code> (which is what <code>testing.Main()</code> does), and you may pass the exit code which is returned by <a href=\"https://golang.org/pkg/testing/#M.Run\" rel=\"nofollow\"><code>M.Run()</code></a> to <code>os.Exit()</code>.</p>\n\n<p>Below comes a complete test file which you can simply run with <code>go test -bench .</code>.</p>\n\n<p>The output is: benchmark results of dynamically generated tests (of different implementations with different parameters):</p>\n\n<pre><code>testing: warning: no tests to run\nPASS\nmain.EngineA[impl=0, n=50, x=300]-4       100000             16716 ns/op\nmain.EngineB[impl=1, n=50, x=300]-4       100000             24788 ns/op\nmain.EngineA[impl=0, n=50, x=200]-4       100000             10764 ns/op\nmain.EngineB[impl=1, n=50, x=200]-4       100000             16415 ns/op\nmain.EngineA[impl=0, n=100, x=300]-4       50000             33426 ns/op\nmain.EngineB[impl=1, n=100, x=300]-4       30000             48466 ns/op\nmain.EngineA[impl=0, n=100, x=200]-4       50000             20452 ns/op\nmain.EngineB[impl=1, n=100, x=200]-4       50000             33134 ns/op\nmain.EngineA[impl=0, n=500, x=300]-4       10000            163087 ns/op\nmain.EngineB[impl=1, n=500, x=300]-4        5000            238043 ns/op\nmain.EngineA[impl=0, n=500, x=200]-4       10000            102662 ns/op\nmain.EngineB[impl=1, n=500, x=200]-4       10000            163113 ns/op\nmain.EngineA[impl=0, n=1000, x=300]-4       5000            319744 ns/op\nmain.EngineB[impl=1, n=1000, x=300]-4       3000            512077 ns/op\nmain.EngineA[impl=0, n=1000, x=200]-4      10000            201036 ns/op\nmain.EngineB[impl=1, n=1000, x=200]-4       5000            325714 ns/op\nok      _/xxx/src/play  27.307s\n</code></pre>\n\n<p>And the source (a test file, e.g. <code>dynbench_test.go</code>):</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"testing\"\n)\n\ntype Engine interface {\n    Calc()\n}\n\ntype EngineA struct{ n, x int }\n\nfunc (e EngineA) Calc() {\n    for i := 0; i &lt; e.n; i++ {\n        a, b := make([]byte, e.x), make([]byte, e.x)\n        copy(b, a)\n    }\n}\n\ntype EngineB struct{ n, x int }\n\nfunc (e EngineB) Calc() {\n    for i := 0; i &lt; e.n*2; i++ {\n        a, b := make([]byte, e.x/2), make([]byte, e.x/2)\n        copy(b, a)\n    }\n}\n\nfunc TestMain(m *testing.M) {\n    implementations := [](func(n, x int) Engine){\n        func(n, x int) Engine { return EngineA{n, x} },\n        func(n, x int) Engine { return EngineB{n, x} },\n    }\n\n    benchmarks := []testing.InternalBenchmark{}\n    for _, n := range []int{50, 100, 500, 1000} {\n        for _, x := range []int{300, 200} {\n            for name, gen := range implementations {\n                impl := gen(n, x)\n                bm := testing.InternalBenchmark{\n                    Name: fmt.Sprintf(\"%T[impl=%d, n=%d, x=%d]\", impl, name, n, x)}\n                bm.F = func(b *testing.B) {\n                    for i := 0; i &lt; b.N; i++ {\n                        impl.Calc()\n                    }\n                }\n                benchmarks = append(benchmarks, bm)\n            }\n        }\n    }\n    anything := func(pat, str string) (bool, error) { return true, nil }\n\n    testing.Main(anything, nil, benchmarks, nil)\n}\n</code></pre>\n\n<p><strong>Notes #2:</strong></p>\n\n<p><code>testing.Main()</code>, <code>testing.MainStart()</code> and <code>testing.InternalBenchmark</code> may change (or get removed) in a future release of Go:</p>\n\n<blockquote>\n  <p>An internal function / internal type but exported because it is cross-package; part of or called by the implementation of the \"go test\" command.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "is_accepted": false, "score": 2, "last_activity_date": 1446736491, "creation_date": 1446736491, "answer_id": 33548239, "question_id": 33537552, "link": "https://stackoverflow.com/questions/33537552/is-it-possible-to-dynamically-run-benchmark-tests/33548239#33548239", "title": "Is it possible to dynamically run benchmark tests?", "body": "<p>I suppose reading the docs would help. I overlooked </p>\n\n<p><a href=\"https://golang.org/pkg/testing/#Benchmark\" rel=\"nofollow\"><code>func Benchmark(f func(b *B)) BenchmarkResult</code></a></p>\n\n<p>which will run my function wothout need for any test harness at all.</p>\n\n<blockquote>\n  <p>Benchmark benchmarks a single function. Useful for creating custom\n  benchmarks that do not use the \"go test\" command.</p>\n</blockquote>\n\n<p>That way I can iterate through my test cases and create a function for each possibility, then run the benchmark directly.</p>\n"}], "owner": {"reputation": 19300, "user_id": 121660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39396b815c9a804b8b99000ee9ea50e8?s=128&d=identicon&r=PG", "display_name": "captncraig", "link": "https://stackoverflow.com/users/121660/captncraig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 2, "accepted_answer_id": 33539270, "answer_count": 2, "score": 6, "last_activity_date": 1446740507, "creation_date": 1446702628, "question_id": 33537552, "link": "https://stackoverflow.com/questions/33537552/is-it-possible-to-dynamically-run-benchmark-tests", "title": "Is it possible to dynamically run benchmark tests?", "body": "<p>I have a few different implementations of an interface, and a variety of factors I want to test them under. End goal being to make a grid of results for different implementations in different situations.</p>\n\n<p>I could write a test for each possible combination, but that gets exhausting:</p>\n\n<pre><code>func Benchmark_ImplA_N100_X300(b *testing.B){\n   impl := newImplA(100,300)\n   runBenchmark(b,impl)\n}\n</code></pre>\n\n<p>The more combinations I add, the more I have to copy/paste. This gets cumbersome fast.</p>\n\n<p>I would love to do something like:</p>\n\n<pre><code>tests := []testing.InternalBenchmark{}\nfor _, n := range []int{50,100,500,10000}{\n   for _,x := range []int{300,200}{\n      for name, gen := range implementations{\n         impl = gen(n,x)\n         bm := testing.InternalBenchmark{Name: fmt.Sprint(name,x,n)}\n         bm.F = func(b *testing.B){\n            runBench(b,impl)\n         }\n         tests = append(tests,bm)\n      }\n   }\n}\ntesting.RunBenchmarks(anything, tests)\n</code></pre>\n\n<p>so that I can update the list(s) of combinations, and benchmarks will magically run in all combinations. I have tries something like this in main and in TestMain, and nothing ever outputs. I am not sure if I am using it wrong, or if the testing package is just doing something funny.</p>\n\n<p>I really don't care if the <code>go test</code> tool can handle it or if there is some other way.</p>\n"}, {"tags": ["python", "rest", "go", "request"], "comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1446723558, "post_id": 33537055, "comment_id": 54867021, "body": "Did you try with <a href=\"https://github.com/wg/wrk\" rel=\"nofollow noreferrer\"><code>wrk</code></a>?"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1446723769, "post_id": 33537055, "comment_id": 54867150, "body": "To be more clear, this might indicate the exhaustion of the TCP ephemeral ports for your Python client. Hence I&#39;d check with a <i>proper</i> tool first which is able to proprly manage its budget of sockets to create a as-constant-as-possible workload onto the service under test."}, {"owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "reply_to_user": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1446738676, "post_id": 33537055, "comment_id": 54877631, "body": "@kostix, Thanks for the info! I could not figure out how to use <code>wrk</code> for an api that takes parameters and asked about it here <a href=\"http://stackoverflow.com/questions/33548940/is-there-a-way-to-pass-parameters-to-get-request-using-wrk\" title=\"is there a way to pass parameters to get request using wrk\">stackoverflow.com/questions/33548940/&hellip;</a>, if this is interesting to you. For an api that does not take parameters, I could not reproduce the error using <code>requests</code>."}], "owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 645, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446699782, "creation_date": 1446699782, "question_id": 33537055, "link": "https://stackoverflow.com/questions/33537055/requests-exceptions-connectionerror-when-using-requests-to-call-golang-rest-api", "title": "requests.exceptions.ConnectionError When using requests to call golang REST API using different processes", "body": "<p>I have simple REST API written in <code>go</code>. I was test calling it many times using different processes with <code>python</code> <code>request</code> library. But I ran into <code>requests.exceptions.ConnectionError</code> (more detailed message below). This was surprising to me because I expected the server to be able to handle parallel requests. Out of curiosity I implemented the <code>python</code> version in <code>go</code>, but I was not able to reproduce the error!</p>\n\n<p>Here is the code for my REST API:</p>\n\n<pre><code>package main\n\nimport (\n    \"net/http\"\n    \"strconv\"\n    \"fmt\"\n)\n\nfunc make_result(w http.ResponseWriter, r *http.Request) {\n\n    fmt.Println(r)\n\n    err := r.ParseForm()\n    if err != nil {\n        panic(err)\n    }\n\n    number_string := r.Form[\"Number\"][0]\n    number, err := strconv.Atoi(number_string)\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Fprint(w, fmt.Sprint(number * 5))\n\n}\n</code></pre>\n\n<p>I am calling it with <code>python</code>, <code>timer.py</code>:</p>\n\n<pre><code>import requests\nfrom time import time\nimport random as rn\nimport sys\n\n\ndef time_get_requests(n_iterations):\n    start = time()\n    total = 0\n    for i in xrange(n_iterations):\n        if i % 1000 == 0:\n            print \"processed: {} requests, time taken: {}\".format(i, time() - start)\n        n = rn.randint(0, 1000)\n\n        temp = requests.get(\"http://localhost:8000/get_result\", params={\"Number\": n})\n\n        total += int(temp.content)\n    print \"Total: {}\".format(total)\n    print \"Total time: {}\".format(time() - start)\n\nif __name__ == \"__main__\":\n    time_get_requests(int(sys.argv[1]))\n</code></pre>\n\n<p>I am calling using <code>go</code>, <code>timer.go</code>:</p>\n\n<pre><code>package main\n\nimport(\n    \"time\"\n    \"math/rand\"\n    \"strconv\"\n    \"log\"\n    \"os\"\n\n    \"github.com/parnurzeal/gorequest\"\n\n)\n\nfunc main() {\n    rand.Seed( time.Now().UTC().UnixNano())\n    n_iterations, err := strconv.Atoi(os.Args[1])\n    if err != nil {\n        panic(err)\n    }\n    total := 0\n    start := time.Now()\n    request := gorequest.New()\n    for i := 0; i &lt; n_iterations; i++ {\n        if i % 1000 == 0 {\n            log.Printf(\"%d: Time taken: %v\\n\", i, time.Now().Sub(start))\n        }\n        rand_int := rand.Intn(1000)\n        rand_int_str := strconv.Itoa(rand_int)\n        _, body, errs := request.\n            Get(\"http://localhost:8000/get_result\").\n            Param(\"Number\", rand_int_str).\n            End()\n        if len(errs) &gt; 0 {\n            log.Fatalf(\"\\033[0;31m%v\\033[0m\\n\", errs)\n        }\n        int_body, err := strconv.Atoi(body)\n        if err != nil {\n            panic(err)\n        }\n        total += int_body\n    }\n    log.Printf(\"Total: %d\\n\", total)\n    total_time_taken := time.Now().Sub(start)\n    log.Printf(\"Total time: %v\\n\", total_time_taken)\n}\n</code></pre>\n\n<p>I am calling it like this in my linux shell:</p>\n\n<pre><code>for i in {0..7}; do python timer.py 20000 &amp; done\n</code></pre>\n\n<p>and</p>\n\n<pre><code>for i in {0..7}; do go run timer.go 20000 &amp; done\n</code></pre>\n\n<p>(When I run this on one processor both lines run fine)</p>\n\n<p>The error message that I am getting:</p>\n\n<pre><code>    resp = self.send(prep, **send_kwargs)\n  File \"/usr/lib/python2.7/dist-packages/requests/sessions.py\", line 558, in sen\nd\n    raise ConnectionError(e)\nrequests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8\n000): Max retries exceeded with url: /get_result?Number=850 (Caused by &lt;class 's\nocket.error'&gt;: [Errno 99] Cannot assign requested address)\nr = adapter.send(request, **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/requests/adapters.py\", line 378, in send\n</code></pre>\n\n<p>My main question: Why is my <code>python</code> part (<code>timer.py</code>) leads to this error? What should I do to fix it? (I don't know whether my problem is with my REST API or how I am using <code>requests</code>).</p>\n\n<p>My secondary question: Why does <code>timer.go</code> work properly?</p>\n\n<p>I am using: <code>go 1.5</code>, <code>python 2.7.6</code>, <code>requests 2.2.1</code>, <code>ubuntu 14.04</code>.</p>\n"}]